const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/few_shot-BDbPCwzR.js","assets/routes-Bmso1xvj.js","assets/index-DWQzdqsc.js","assets/index-Vcso_2OS.css","assets/toNumber-Ca8lpn2y.js","assets/LLMIcon-DTzLaIG1.js","assets/dot-CWbyRG3b.js","assets/createLucideIcon-ByB7ruez.js","assets/popover-Qa2ZleT0.js","assets/index-BtRrMOaN.js","assets/index-CVyw7bjx.js","assets/index-BBuYi17e.js","assets/index-Cr8Tc6mT.css","assets/pdf-Dl-3VnFu.js"])))=>i.map(i=>d[i]);
import{g as to,R as me,r as S,j as h,C as Br,I as gt,_ as Gt,d as Tx,c as Q,e as ke,L as le,l as Hc,a as Hr,h as Ut,P as se,b as re,i as Lx,J as Fc,u as _e,y as He,K as $x,N as Vx,V as Bx,x as Hx,O as Fx,f as Yx,v as Zx,w as Yc,__tla as Xx}from"./index-DWQzdqsc.js";import{r as Zc,a as Kx,b as Wx,c as Gx,d as Ux,u as qx,e as Qx,f as Jx,g as ev}from"./toNumber-Ca8lpn2y.js";import{F as ce,ae as tv,g as ie,u as Fr,N as Xc,af as nv,ag as ov,ah as Kc,ai as Yr,aj as Wc,ak as Gc,al as rv,B as no,am as Fe,an as mt,o as Uc,l as qc,m as Zr,ab as qt,n as av,I as iv,ao as Qc,ap as sv,a9 as lv,aa as cv,aq as dv,ar as uv,as as fv,at as hv,au as pv,av as Jc,aw as gv,ax as mv,ay as yv,L as ed,b as xv,r as vv,s as wv,t as bv,v as Sv,__tla as _v}from"./routes-Bmso1xvj.js";import{I as Cv,e as Nv,f as Ev,O as kv,w as Pv,G as Mv,h as jv,__tla as Ov}from"./LLMIcon-DTzLaIG1.js";import{P as Iv,a as Av,b as Rv,T as td,__tla as Dv}from"./popover-Qa2ZleT0.js";let nd,oo,Xr,ro,od,ao,Kr,io,so,rd,Qt,Jt,ad,id,lo,en,Qe,co,Wr,Gr,Ur,yt,sd,ld,U,tn,cd,dd,ud,xt,qr,Qr,nn,on,Jr,ea,ta,fd,rn,ee,ne,hd,pd,an,Ye,gd,Ze,md,De,yd,xd,vd,na,wd,bd,oa,ra,aa,Sd,ye,ia,_d,Cd,uo,fo,ho,po,Je,sa,go,Nd,mo,yo,la,xo,vo,zv=Promise.all([(()=>{try{return Xx}catch{}})(),(()=>{try{return _v}catch{}})(),(()=>{try{return Ov}catch{}})(),(()=>{try{return Dv}catch{}})()]).then(async()=>{let wo,ca;Kr=(e=>(e.VECTOR_DATABASE_RETREIVER="VECTOR_DATABASE_RETREIVER",e.DEFAULT_EMBEDDING_MODEL="DEFAULT_EMBEDDING_MODEL",e))(Kr||{});function Ed(){if(ca)return wo;ca=1;var e="Expected a function";function t(n){if(typeof n!="function")throw new TypeError(e);return function(){var o=arguments;switch(o.length){case 0:return!n.call(this);case 1:return!n.call(this,o[0]);case 2:return!n.call(this,o[0],o[1]);case 3:return!n.call(this,o[0],o[1],o[2])}return!n.apply(this,o)}}return wo=t,wo}var bo,da;function kd(){if(da)return bo;da=1;var e=Gx(),t=Zc(),n=Kx(),o=Wx();function r(a,i){if(a==null)return{};var s=e(o(a),function(l){return[l]});return i=t(i),n(a,s,function(l,c){return i(l,c[0])})}return bo=r,bo}var So,ua;function Pd(){if(ua)return So;ua=1;var e=Zc(),t=Ed(),n=kd();function o(r,a){return n(r,t(e(a)))}return So=o,So}var Md=Pd();nn=to(Md);var _o,fa;function jd(){if(fa)return _o;fa=1;function e(t){return t===void 0}return _o=e,_o}var Od=jd();on=to(Od);function ae(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,o;n<e.length;n++)(o=ae(e[n]))!==""&&(t+=(t&&" ")+o);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var Id={value:()=>{}};function sn(){for(var e=0,t=arguments.length,n={},o;e<t;++e){if(!(o=arguments[e]+"")||o in n||/[\s.]/.test(o))throw new Error("illegal type: "+o);n[o]=[]}return new ln(n)}function ln(e){this._=e}function Ad(e,t){return e.trim().split(/^|\s+/).map(function(n){var o="",r=n.indexOf(".");if(r>=0&&(o=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:o}})}ln.prototype=sn.prototype={constructor:ln,on:function(e,t){var n=this._,o=Ad(e+"",n),r,a=-1,i=o.length;if(arguments.length<2){for(;++a<i;)if((r=(e=o[a]).type)&&(r=Rd(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<i;)if(r=(e=o[a]).type)n[r]=ha(n[r],e.name,t);else if(t==null)for(r in n)n[r]=ha(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new ln(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),o=0,r,a;o<r;++o)n[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],o=0,r=a.length;o<r;++o)a[o].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],r=0,a=o.length;r<a;++r)o[r].value.apply(t,n)}};function Rd(e,t){for(var n=0,o=e.length,r;n<o;++n)if((r=e[n]).name===t)return r.value}function ha(e,t,n){for(var o=0,r=e.length;o<r;++o)if(e[o].name===t){e[o]=Id,e=e.slice(0,o).concat(e.slice(o+1));break}return n!=null&&e.push({name:t,value:n}),e}var Co="http://www.w3.org/1999/xhtml";const pa={svg:"http://www.w3.org/2000/svg",xhtml:Co,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function cn(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),pa.hasOwnProperty(t)?{space:pa[t],local:e}:e}function Dd(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Co&&t.documentElement.namespaceURI===Co?t.createElement(e):t.createElementNS(n,e)}}function zd(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function ga(e){var t=cn(e);return(t.local?zd:Dd)(t)}function Td(){}function No(e){return e==null?Td:function(){return this.querySelector(e)}}function Ld(e){typeof e!="function"&&(e=No(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var a=t[r],i=a.length,s=o[r]=new Array(i),l,c,d=0;d<i;++d)(l=a[d])&&(c=e.call(l,l.__data__,d,a))&&("__data__"in l&&(c.__data__=l.__data__),s[d]=c);return new pe(o,this._parents)}function $d(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Vd(){return[]}function ma(e){return e==null?Vd:function(){return this.querySelectorAll(e)}}function Bd(e){return function(){return $d(e.apply(this,arguments))}}function Hd(e){typeof e=="function"?e=Bd(e):e=ma(e);for(var t=this._groups,n=t.length,o=[],r=[],a=0;a<n;++a)for(var i=t[a],s=i.length,l,c=0;c<s;++c)(l=i[c])&&(o.push(e.call(l,l.__data__,c,i)),r.push(l));return new pe(o,r)}function ya(e){return function(){return this.matches(e)}}function xa(e){return function(t){return t.matches(e)}}var Fd=Array.prototype.find;function Yd(e){return function(){return Fd.call(this.children,e)}}function Zd(){return this.firstElementChild}function Xd(e){return this.select(e==null?Zd:Yd(typeof e=="function"?e:xa(e)))}var Kd=Array.prototype.filter;function Wd(){return Array.from(this.children)}function Gd(e){return function(){return Kd.call(this.children,e)}}function Ud(e){return this.selectAll(e==null?Wd:Gd(typeof e=="function"?e:xa(e)))}function qd(e){typeof e!="function"&&(e=ya(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var a=t[r],i=a.length,s=o[r]=[],l,c=0;c<i;++c)(l=a[c])&&e.call(l,l.__data__,c,a)&&s.push(l);return new pe(o,this._parents)}function va(e){return new Array(e.length)}function Qd(){return new pe(this._enter||this._groups.map(va),this._parents)}function dn(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}dn.prototype={constructor:dn,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Jd(e){return function(){return e}}function eu(e,t,n,o,r,a){for(var i=0,s,l=t.length,c=a.length;i<c;++i)(s=t[i])?(s.__data__=a[i],o[i]=s):n[i]=new dn(e,a[i]);for(;i<l;++i)(s=t[i])&&(r[i]=s)}function tu(e,t,n,o,r,a,i){var s,l,c=new Map,d=t.length,u=a.length,f=new Array(d),p;for(s=0;s<d;++s)(l=t[s])&&(f[s]=p=i.call(l,l.__data__,s,t)+"",c.has(p)?r[s]=l:c.set(p,l));for(s=0;s<u;++s)p=i.call(e,a[s],s,a)+"",(l=c.get(p))?(o[s]=l,l.__data__=a[s],c.delete(p)):n[s]=new dn(e,a[s]);for(s=0;s<d;++s)(l=t[s])&&c.get(f[s])===l&&(r[s]=l)}function nu(e){return e.__data__}function ou(e,t){if(!arguments.length)return Array.from(this,nu);var n=t?tu:eu,o=this._parents,r=this._groups;typeof e!="function"&&(e=Jd(e));for(var a=r.length,i=new Array(a),s=new Array(a),l=new Array(a),c=0;c<a;++c){var d=o[c],u=r[c],f=u.length,p=ru(e.call(d,d&&d.__data__,c,o)),y=p.length,m=s[c]=new Array(y),b=i[c]=new Array(y),g=l[c]=new Array(f);n(d,u,m,b,g,p,t);for(var w=0,x=0,v,C;w<y;++w)if(v=m[w]){for(w>=x&&(x=w+1);!(C=b[x])&&++x<y;);v._next=C||null}}return i=new pe(i,o),i._enter=s,i._exit=l,i}function ru(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function au(){return new pe(this._exit||this._groups.map(va),this._parents)}function iu(e,t,n){var o=this.enter(),r=this,a=this.exit();return typeof e=="function"?(o=e(o),o&&(o=o.selection())):o=o.append(e+""),t!=null&&(r=t(r),r&&(r=r.selection())),n==null?a.remove():n(a),o&&r?o.merge(r).order():r}function su(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,r=n.length,a=o.length,i=Math.min(r,a),s=new Array(r),l=0;l<i;++l)for(var c=n[l],d=o[l],u=c.length,f=s[l]=new Array(u),p,y=0;y<u;++y)(p=c[y]||d[y])&&(f[y]=p);for(;l<r;++l)s[l]=n[l];return new pe(s,this._parents)}function lu(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o=e[t],r=o.length-1,a=o[r],i;--r>=0;)(i=o[r])&&(a&&i.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(i,a),a=i);return this}function cu(e){e||(e=du);function t(u,f){return u&&f?e(u.__data__,f.__data__):!u-!f}for(var n=this._groups,o=n.length,r=new Array(o),a=0;a<o;++a){for(var i=n[a],s=i.length,l=r[a]=new Array(s),c,d=0;d<s;++d)(c=i[d])&&(l[d]=c);l.sort(t)}return new pe(r,this._parents).order()}function du(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function uu(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function fu(){return Array.from(this)}function hu(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],r=0,a=o.length;r<a;++r){var i=o[r];if(i)return i}return null}function pu(){let e=0;for(const t of this)++e;return e}function gu(){return!this.node()}function mu(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var r=t[n],a=0,i=r.length,s;a<i;++a)(s=r[a])&&e.call(s,s.__data__,a,r);return this}function yu(e){return function(){this.removeAttribute(e)}}function xu(e){return function(){this.removeAttributeNS(e.space,e.local)}}function vu(e,t){return function(){this.setAttribute(e,t)}}function wu(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function bu(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Su(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function _u(e,t){var n=cn(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((t==null?n.local?xu:yu:typeof t=="function"?n.local?Su:bu:n.local?wu:vu)(n,t))}function wa(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Cu(e){return function(){this.style.removeProperty(e)}}function Nu(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Eu(e,t,n){return function(){var o=t.apply(this,arguments);o==null?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function ku(e,t,n){return arguments.length>1?this.each((t==null?Cu:typeof t=="function"?Eu:Nu)(e,t,n??"")):et(this.node(),e)}function et(e,t){return e.style.getPropertyValue(t)||wa(e).getComputedStyle(e,null).getPropertyValue(t)}function Pu(e){return function(){delete this[e]}}function Mu(e,t){return function(){this[e]=t}}function ju(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Ou(e,t){return arguments.length>1?this.each((t==null?Pu:typeof t=="function"?ju:Mu)(e,t)):this.node()[e]}function ba(e){return e.trim().split(/^|\s+/)}function Eo(e){return e.classList||new Sa(e)}function Sa(e){this._node=e,this._names=ba(e.getAttribute("class")||"")}Sa.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function _a(e,t){for(var n=Eo(e),o=-1,r=t.length;++o<r;)n.add(t[o])}function Ca(e,t){for(var n=Eo(e),o=-1,r=t.length;++o<r;)n.remove(t[o])}function Iu(e){return function(){_a(this,e)}}function Au(e){return function(){Ca(this,e)}}function Ru(e,t){return function(){(t.apply(this,arguments)?_a:Ca)(this,e)}}function Du(e,t){var n=ba(e+"");if(arguments.length<2){for(var o=Eo(this.node()),r=-1,a=n.length;++r<a;)if(!o.contains(n[r]))return!1;return!0}return this.each((typeof t=="function"?Ru:t?Iu:Au)(n,t))}function zu(){this.textContent=""}function Tu(e){return function(){this.textContent=e}}function Lu(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function $u(e){return arguments.length?this.each(e==null?zu:(typeof e=="function"?Lu:Tu)(e)):this.node().textContent}function Vu(){this.innerHTML=""}function Bu(e){return function(){this.innerHTML=e}}function Hu(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Fu(e){return arguments.length?this.each(e==null?Vu:(typeof e=="function"?Hu:Bu)(e)):this.node().innerHTML}function Yu(){this.nextSibling&&this.parentNode.appendChild(this)}function Zu(){return this.each(Yu)}function Xu(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Ku(){return this.each(Xu)}function Wu(e){var t=typeof e=="function"?e:ga(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Gu(){return null}function Uu(e,t){var n=typeof e=="function"?e:ga(e),o=t==null?Gu:typeof t=="function"?t:No(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)})}function qu(){var e=this.parentNode;e&&e.removeChild(this)}function Qu(){return this.each(qu)}function Ju(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function ef(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function tf(e){return this.select(e?ef:Ju)}function nf(e){return arguments.length?this.property("__data__",e):this.node().__data__}function of(e){return function(t){e.call(this,t,this.__data__)}}function rf(e){return e.trim().split(/^|\s+/).map(function(t){var n="",o=t.indexOf(".");return o>=0&&(n=t.slice(o+1),t=t.slice(0,o)),{type:t,name:n}})}function af(e){return function(){var t=this.__on;if(t){for(var n=0,o=-1,r=t.length,a;n<r;++n)a=t[n],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++o]=a;++o?t.length=o:delete this.__on}}}function sf(e,t,n){return function(){var o=this.__on,r,a=of(t);if(o){for(var i=0,s=o.length;i<s;++i)if((r=o[i]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=a,r.options=n),r.value=t;return}}this.addEventListener(e.type,a,n),r={type:e.type,name:e.name,value:t,listener:a,options:n},o?o.push(r):this.__on=[r]}}function lf(e,t,n){var o=rf(e+""),r,a=o.length,i;if(arguments.length<2){var s=this.node().__on;if(s){for(var l=0,c=s.length,d;l<c;++l)for(r=0,d=s[l];r<a;++r)if((i=o[r]).type===d.type&&i.name===d.name)return d.value}return}for(s=t?sf:af,r=0;r<a;++r)this.each(s(o[r],t,n));return this}function Na(e,t,n){var o=wa(e),r=o.CustomEvent;typeof r=="function"?r=new r(t,n):(r=o.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function cf(e,t){return function(){return Na(this,e,t)}}function df(e,t){return function(){return Na(this,e,t.apply(this,arguments))}}function uf(e,t){return this.each((typeof t=="function"?df:cf)(e,t))}function*ff(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],r=0,a=o.length,i;r<a;++r)(i=o[r])&&(yield i)}var Ea=[null];function pe(e,t){this._groups=e,this._parents=t}function vt(){return new pe([[document.documentElement]],Ea)}function hf(){return this}pe.prototype=vt.prototype={constructor:pe,select:Ld,selectAll:Hd,selectChild:Xd,selectChildren:Ud,filter:qd,data:ou,enter:Qd,exit:au,join:iu,merge:su,selection:hf,order:lu,sort:cu,call:uu,nodes:fu,node:hu,size:pu,empty:gu,each:mu,attr:_u,style:ku,property:Ou,classed:Du,text:$u,html:Fu,raise:Zu,lower:Ku,append:Wu,insert:Uu,remove:Qu,clone:tf,datum:nf,on:lf,dispatch:uf,[Symbol.iterator]:ff};function ge(e){return typeof e=="string"?new pe([[document.querySelector(e)]],[document.documentElement]):new pe([[e]],Ea)}function pf(e){let t;for(;t=e.sourceEvent;)e=t;return e}function xe(e,t){if(e=pf(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,o=o.matrixTransform(t.getScreenCTM().inverse()),[o.x,o.y]}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}}return[e.pageX,e.pageY]}const gf={passive:!1},wt={capture:!0,passive:!1};function ko(e){e.stopImmediatePropagation()}function tt(e){e.preventDefault(),e.stopImmediatePropagation()}function ka(e){var t=e.document.documentElement,n=ge(e).on("dragstart.drag",tt,wt);"onselectstart"in t?n.on("selectstart.drag",tt,wt):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Pa(e,t){var n=e.document.documentElement,o=ge(e).on("dragstart.drag",null);t&&(o.on("click.drag",tt,wt),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const un=e=>()=>e;function Po(e,{sourceEvent:t,subject:n,target:o,identifier:r,active:a,x:i,y:s,dx:l,dy:c,dispatch:d}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:i,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:d}})}Po.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function mf(e){return!e.ctrlKey&&!e.button}function yf(){return this.parentNode}function xf(e,t){return t??{x:e.x,y:e.y}}function vf(){return navigator.maxTouchPoints||"ontouchstart"in this}function Ma(){var e=mf,t=yf,n=xf,o=vf,r={},a=sn("start","drag","end"),i=0,s,l,c,d,u=0;function f(v){v.on("mousedown.drag",p).filter(o).on("touchstart.drag",b).on("touchmove.drag",g,gf).on("touchend.drag touchcancel.drag",w).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(v,C){if(!(d||!e.call(this,v,C))){var I=x(this,t.call(this,v,C),v,C,"mouse");I&&(ge(v.view).on("mousemove.drag",y,wt).on("mouseup.drag",m,wt),ka(v.view),ko(v),c=!1,s=v.clientX,l=v.clientY,I("start",v))}}function y(v){if(tt(v),!c){var C=v.clientX-s,I=v.clientY-l;c=C*C+I*I>u}r.mouse("drag",v)}function m(v){ge(v.view).on("mousemove.drag mouseup.drag",null),Pa(v.view,c),tt(v),r.mouse("end",v)}function b(v,C){if(e.call(this,v,C)){var I=v.changedTouches,k=t.call(this,v,C),O=I.length,A,R;for(A=0;A<O;++A)(R=x(this,k,v,C,I[A].identifier,I[A]))&&(ko(v),R("start",v,I[A]))}}function g(v){var C=v.changedTouches,I=C.length,k,O;for(k=0;k<I;++k)(O=r[C[k].identifier])&&(tt(v),O("drag",v,C[k]))}function w(v){var C=v.changedTouches,I=C.length,k,O;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),k=0;k<I;++k)(O=r[C[k].identifier])&&(ko(v),O("end",v,C[k]))}function x(v,C,I,k,O,A){var R=a.copy(),$=xe(A||I,C),z,T,_;if((_=n.call(v,new Po("beforestart",{sourceEvent:I,target:f,identifier:O,active:i,x:$[0],y:$[1],dx:0,dy:0,dispatch:R}),k))!=null)return z=_.x-$[0]||0,T=_.y-$[1]||0,function P(N,j,E){var M=$,D;switch(N){case"start":r[O]=P,D=i++;break;case"end":delete r[O],--i;case"drag":$=xe(E||j,C),D=i;break}R.call(N,v,new Po(N,{sourceEvent:j,subject:_,target:f,identifier:O,active:D,x:$[0]+z,y:$[1]+T,dx:$[0]-M[0],dy:$[1]-M[1],dispatch:R}),k)}}return f.filter=function(v){return arguments.length?(e=typeof v=="function"?v:un(!!v),f):e},f.container=function(v){return arguments.length?(t=typeof v=="function"?v:un(v),f):t},f.subject=function(v){return arguments.length?(n=typeof v=="function"?v:un(v),f):n},f.touchable=function(v){return arguments.length?(o=typeof v=="function"?v:un(!!v),f):o},f.on=function(){var v=a.on.apply(a,arguments);return v===a?f:v},f.clickDistance=function(v){return arguments.length?(u=(v=+v)*v,f):Math.sqrt(u)},f}function Mo(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function ja(e,t){var n=Object.create(e.prototype);for(var o in t)n[o]=t[o];return n}function bt(){}var St=.7,fn=1/St,nt="\\s*([+-]?\\d+)\\s*",_t="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ce="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",wf=/^#([0-9a-f]{3,8})$/,bf=new RegExp(`^rgb\\(${nt},${nt},${nt}\\)$`),Sf=new RegExp(`^rgb\\(${Ce},${Ce},${Ce}\\)$`),_f=new RegExp(`^rgba\\(${nt},${nt},${nt},${_t}\\)$`),Cf=new RegExp(`^rgba\\(${Ce},${Ce},${Ce},${_t}\\)$`),Nf=new RegExp(`^hsl\\(${_t},${Ce},${Ce}\\)$`),Ef=new RegExp(`^hsla\\(${_t},${Ce},${Ce},${_t}\\)$`),Oa={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Mo(bt,Ct,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Ia,formatHex:Ia,formatHex8:kf,formatHsl:Pf,formatRgb:Aa,toString:Aa});function Ia(){return this.rgb().formatHex()}function kf(){return this.rgb().formatHex8()}function Pf(){return La(this).formatHsl()}function Aa(){return this.rgb().formatRgb()}function Ct(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=wf.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Ra(t):n===3?new fe(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?hn(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?hn(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=bf.exec(e))?new fe(t[1],t[2],t[3],1):(t=Sf.exec(e))?new fe(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=_f.exec(e))?hn(t[1],t[2],t[3],t[4]):(t=Cf.exec(e))?hn(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Nf.exec(e))?Ta(t[1],t[2]/100,t[3]/100,1):(t=Ef.exec(e))?Ta(t[1],t[2]/100,t[3]/100,t[4]):Oa.hasOwnProperty(e)?Ra(Oa[e]):e==="transparent"?new fe(NaN,NaN,NaN,0):null}function Ra(e){return new fe(e>>16&255,e>>8&255,e&255,1)}function hn(e,t,n,o){return o<=0&&(e=t=n=NaN),new fe(e,t,n,o)}function Mf(e){return e instanceof bt||(e=Ct(e)),e?(e=e.rgb(),new fe(e.r,e.g,e.b,e.opacity)):new fe}function jo(e,t,n,o){return arguments.length===1?Mf(e):new fe(e,t,n,o??1)}function fe(e,t,n,o){this.r=+e,this.g=+t,this.b=+n,this.opacity=+o}Mo(fe,jo,ja(bt,{brighter(e){return e=e==null?fn:Math.pow(fn,e),new fe(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?St:Math.pow(St,e),new fe(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new fe(Xe(this.r),Xe(this.g),Xe(this.b),pn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Da,formatHex:Da,formatHex8:jf,formatRgb:za,toString:za}));function Da(){return`#${Ke(this.r)}${Ke(this.g)}${Ke(this.b)}`}function jf(){return`#${Ke(this.r)}${Ke(this.g)}${Ke(this.b)}${Ke((isNaN(this.opacity)?1:this.opacity)*255)}`}function za(){const e=pn(this.opacity);return`${e===1?"rgb(":"rgba("}${Xe(this.r)}, ${Xe(this.g)}, ${Xe(this.b)}${e===1?")":`, ${e})`}`}function pn(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Xe(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Ke(e){return e=Xe(e),(e<16?"0":"")+e.toString(16)}function Ta(e,t,n,o){return o<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ve(e,t,n,o)}function La(e){if(e instanceof ve)return new ve(e.h,e.s,e.l,e.opacity);if(e instanceof bt||(e=Ct(e)),!e)return new ve;if(e instanceof ve)return e;e=e.rgb();var t=e.r/255,n=e.g/255,o=e.b/255,r=Math.min(t,n,o),a=Math.max(t,n,o),i=NaN,s=a-r,l=(a+r)/2;return s?(t===a?i=(n-o)/s+(n<o)*6:n===a?i=(o-t)/s+2:i=(t-n)/s+4,s/=l<.5?a+r:2-a-r,i*=60):s=l>0&&l<1?0:i,new ve(i,s,l,e.opacity)}function Of(e,t,n,o){return arguments.length===1?La(e):new ve(e,t,n,o??1)}function ve(e,t,n,o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}Mo(ve,Of,ja(bt,{brighter(e){return e=e==null?fn:Math.pow(fn,e),new ve(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?St:Math.pow(St,e),new ve(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*t,r=2*n-o;return new fe(Oo(e>=240?e-240:e+120,r,o),Oo(e,r,o),Oo(e<120?e+240:e-120,r,o),this.opacity)},clamp(){return new ve($a(this.h),gn(this.s),gn(this.l),pn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=pn(this.opacity);return`${e===1?"hsl(":"hsla("}${$a(this.h)}, ${gn(this.s)*100}%, ${gn(this.l)*100}%${e===1?")":`, ${e})`}`}}));function $a(e){return e=(e||0)%360,e<0?e+360:e}function gn(e){return Math.max(0,Math.min(1,e||0))}function Oo(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Va=e=>()=>e;function If(e,t){return function(n){return e+n*t}}function Af(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(o){return Math.pow(e+o*t,n)}}function Rf(e){return(e=+e)==1?Ba:function(t,n){return n-t?Af(t,n,e):Va(isNaN(t)?n:t)}}function Ba(e,t){var n=t-e;return n?If(e,n):Va(isNaN(e)?t:e)}const Ha=function e(t){var n=Rf(t);function o(r,a){var i=n((r=jo(r)).r,(a=jo(a)).r),s=n(r.g,a.g),l=n(r.b,a.b),c=Ba(r.opacity,a.opacity);return function(d){return r.r=i(d),r.g=s(d),r.b=l(d),r.opacity=c(d),r+""}}return o.gamma=e,o}(1);function ze(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Io=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ao=new RegExp(Io.source,"g");function Df(e){return function(){return e}}function zf(e){return function(t){return e(t)+""}}function Tf(e,t){var n=Io.lastIndex=Ao.lastIndex=0,o,r,a,i=-1,s=[],l=[];for(e=e+"",t=t+"";(o=Io.exec(e))&&(r=Ao.exec(t));)(a=r.index)>n&&(a=t.slice(n,a),s[i]?s[i]+=a:s[++i]=a),(o=o[0])===(r=r[0])?s[i]?s[i]+=r:s[++i]=r:(s[++i]=null,l.push({i,x:ze(o,r)})),n=Ao.lastIndex;return n<t.length&&(a=t.slice(n),s[i]?s[i]+=a:s[++i]=a),s.length<2?l[0]?zf(l[0].x):Df(t):(t=l.length,function(c){for(var d=0,u;d<t;++d)s[(u=l[d]).i]=u.x(c);return s.join("")})}var Fa=180/Math.PI,Ya={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Za(e,t,n,o,r,a){var i,s,l;return(i=Math.sqrt(e*e+t*t))&&(e/=i,t/=i),(l=e*n+t*o)&&(n-=e*l,o-=t*l),(s=Math.sqrt(n*n+o*o))&&(n/=s,o/=s,l/=s),e*o<t*n&&(e=-e,t=-t,l=-l,i=-i),{translateX:r,translateY:a,rotate:Math.atan2(t,e)*Fa,skewX:Math.atan(l)*Fa,scaleX:i,scaleY:s}}var mn;function Lf(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Ya:Za(t.a,t.b,t.c,t.d,t.e,t.f)}function $f(e){return e==null||(mn||(mn=document.createElementNS("http://www.w3.org/2000/svg","g")),mn.setAttribute("transform",e),!(e=mn.transform.baseVal.consolidate()))?Ya:(e=e.matrix,Za(e.a,e.b,e.c,e.d,e.e,e.f))}function Xa(e,t,n,o){function r(c){return c.length?c.pop()+" ":""}function a(c,d,u,f,p,y){if(c!==u||d!==f){var m=p.push("translate(",null,t,null,n);y.push({i:m-4,x:ze(c,u)},{i:m-2,x:ze(d,f)})}else(u||f)&&p.push("translate("+u+t+f+n)}function i(c,d,u,f){c!==d?(c-d>180?d+=360:d-c>180&&(c+=360),f.push({i:u.push(r(u)+"rotate(",null,o)-2,x:ze(c,d)})):d&&u.push(r(u)+"rotate("+d+o)}function s(c,d,u,f){c!==d?f.push({i:u.push(r(u)+"skewX(",null,o)-2,x:ze(c,d)}):d&&u.push(r(u)+"skewX("+d+o)}function l(c,d,u,f,p,y){if(c!==u||d!==f){var m=p.push(r(p)+"scale(",null,",",null,")");y.push({i:m-4,x:ze(c,u)},{i:m-2,x:ze(d,f)})}else(u!==1||f!==1)&&p.push(r(p)+"scale("+u+","+f+")")}return function(c,d){var u=[],f=[];return c=e(c),d=e(d),a(c.translateX,c.translateY,d.translateX,d.translateY,u,f),i(c.rotate,d.rotate,u,f),s(c.skewX,d.skewX,u,f),l(c.scaleX,c.scaleY,d.scaleX,d.scaleY,u,f),c=d=null,function(p){for(var y=-1,m=f.length,b;++y<m;)u[(b=f[y]).i]=b.x(p);return u.join("")}}}var Vf=Xa(Lf,"px, ","px)","deg)"),Bf=Xa($f,", ",")",")"),Hf=1e-12;function Ka(e){return((e=Math.exp(e))+1/e)/2}function Ff(e){return((e=Math.exp(e))-1/e)/2}function Yf(e){return((e=Math.exp(2*e))-1)/(e+1)}const Zf=function e(t,n,o){function r(a,i){var s=a[0],l=a[1],c=a[2],d=i[0],u=i[1],f=i[2],p=d-s,y=u-l,m=p*p+y*y,b,g;if(m<Hf)g=Math.log(f/c)/t,b=function(k){return[s+k*p,l+k*y,c*Math.exp(t*k*g)]};else{var w=Math.sqrt(m),x=(f*f-c*c+o*m)/(2*c*n*w),v=(f*f-c*c-o*m)/(2*f*n*w),C=Math.log(Math.sqrt(x*x+1)-x),I=Math.log(Math.sqrt(v*v+1)-v);g=(I-C)/t,b=function(k){var O=k*g,A=Ka(C),R=c/(n*w)*(A*Yf(t*O+C)-Ff(C));return[s+R*p,l+R*y,c*A/Ka(t*O+C)]}}return b.duration=g*1e3*t/Math.SQRT2,b}return r.rho=function(a){var i=Math.max(.001,+a),s=i*i,l=s*s;return e(i,s,l)},r}(Math.SQRT2,2,4);var ot=0,Nt=0,Et=0,Wa=1e3,yn,kt,xn=0,We=0,vn=0,Pt=typeof performance=="object"&&performance.now?performance:Date,Ga=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Ro(){return We||(Ga(Xf),We=Pt.now()+vn)}function Xf(){We=0}function wn(){this._call=this._time=this._next=null}wn.prototype=Ua.prototype={constructor:wn,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Ro():+n)+(t==null?0:+t),!this._next&&kt!==this&&(kt?kt._next=this:yn=this,kt=this),this._call=e,this._time=n,Do()},stop:function(){this._call&&(this._call=null,this._time=1/0,Do())}};function Ua(e,t,n){var o=new wn;return o.restart(e,t,n),o}function Kf(){Ro(),++ot;for(var e=yn,t;e;)(t=We-e._time)>=0&&e._call.call(void 0,t),e=e._next;--ot}function qa(){We=(xn=Pt.now())+vn,ot=Nt=0;try{Kf()}finally{ot=0,Gf(),We=0}}function Wf(){var e=Pt.now(),t=e-xn;t>Wa&&(vn-=t,xn=e)}function Gf(){for(var e,t=yn,n,o=1/0;t;)t._call?(o>t._time&&(o=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:yn=n);kt=e,Do(o)}function Do(e){if(!ot){Nt&&(Nt=clearTimeout(Nt));var t=e-We;t>24?(e<1/0&&(Nt=setTimeout(qa,e-Pt.now()-vn)),Et&&(Et=clearInterval(Et))):(Et||(xn=Pt.now(),Et=setInterval(Wf,Wa)),ot=1,Ga(qa))}}function Qa(e,t,n){var o=new wn;return t=t==null?0:+t,o.restart(r=>{o.stop(),e(r+t)},t,n),o}var Uf=sn("start","end","cancel","interrupt"),qf=[],Ja=0,ei=1,zo=2,bn=3,ti=4,To=5,Sn=6;function _n(e,t,n,o,r,a){var i=e.__transition;if(!i)e.__transition={};else if(n in i)return;Qf(e,n,{name:t,index:o,group:r,on:Uf,tween:qf,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:Ja})}function Lo(e,t){var n=we(e,t);if(n.state>Ja)throw new Error("too late; already scheduled");return n}function Ne(e,t){var n=we(e,t);if(n.state>bn)throw new Error("too late; already running");return n}function we(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Qf(e,t,n){var o=e.__transition,r;o[t]=n,n.timer=Ua(a,0,n.time);function a(c){n.state=ei,n.timer.restart(i,n.delay,n.time),n.delay<=c&&i(c-n.delay)}function i(c){var d,u,f,p;if(n.state!==ei)return l();for(d in o)if(p=o[d],p.name===n.name){if(p.state===bn)return Qa(i);p.state===ti?(p.state=Sn,p.timer.stop(),p.on.call("interrupt",e,e.__data__,p.index,p.group),delete o[d]):+d<t&&(p.state=Sn,p.timer.stop(),p.on.call("cancel",e,e.__data__,p.index,p.group),delete o[d])}if(Qa(function(){n.state===bn&&(n.state=ti,n.timer.restart(s,n.delay,n.time),s(c))}),n.state=zo,n.on.call("start",e,e.__data__,n.index,n.group),n.state===zo){for(n.state=bn,r=new Array(f=n.tween.length),d=0,u=-1;d<f;++d)(p=n.tween[d].value.call(e,e.__data__,n.index,n.group))&&(r[++u]=p);r.length=u+1}}function s(c){for(var d=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(l),n.state=To,1),u=-1,f=r.length;++u<f;)r[u].call(e,d);n.state===To&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=Sn,n.timer.stop(),delete o[t];for(var c in o)return;delete e.__transition}}function Cn(e,t){var n=e.__transition,o,r,a=!0,i;if(n){t=t==null?null:t+"";for(i in n){if((o=n[i]).name!==t){a=!1;continue}r=o.state>zo&&o.state<To,o.state=Sn,o.timer.stop(),o.on.call(r?"interrupt":"cancel",e,e.__data__,o.index,o.group),delete n[i]}a&&delete e.__transition}}function Jf(e){return this.each(function(){Cn(this,e)})}function eh(e,t){var n,o;return function(){var r=Ne(this,e),a=r.tween;if(a!==n){o=n=a;for(var i=0,s=o.length;i<s;++i)if(o[i].name===t){o=o.slice(),o.splice(i,1);break}}r.tween=o}}function th(e,t,n){var o,r;if(typeof n!="function")throw new Error;return function(){var a=Ne(this,e),i=a.tween;if(i!==o){r=(o=i).slice();for(var s={name:t,value:n},l=0,c=r.length;l<c;++l)if(r[l].name===t){r[l]=s;break}l===c&&r.push(s)}a.tween=r}}function nh(e,t){var n=this._id;if(e+="",arguments.length<2){for(var o=we(this.node(),n).tween,r=0,a=o.length,i;r<a;++r)if((i=o[r]).name===e)return i.value;return null}return this.each((t==null?eh:th)(n,e,t))}function $o(e,t,n){var o=e._id;return e.each(function(){var r=Ne(this,o);(r.value||(r.value={}))[t]=n.apply(this,arguments)}),function(r){return we(r,o).value[t]}}function ni(e,t){var n;return(typeof t=="number"?ze:t instanceof Ct?Ha:(n=Ct(t))?(t=n,Ha):Tf)(e,t)}function oh(e){return function(){this.removeAttribute(e)}}function rh(e){return function(){this.removeAttributeNS(e.space,e.local)}}function ah(e,t,n){var o,r=n+"",a;return function(){var i=this.getAttribute(e);return i===r?null:i===o?a:a=t(o=i,n)}}function ih(e,t,n){var o,r=n+"",a;return function(){var i=this.getAttributeNS(e.space,e.local);return i===r?null:i===o?a:a=t(o=i,n)}}function sh(e,t,n){var o,r,a;return function(){var i,s=n(this),l;return s==null?void this.removeAttribute(e):(i=this.getAttribute(e),l=s+"",i===l?null:i===o&&l===r?a:(r=l,a=t(o=i,s)))}}function lh(e,t,n){var o,r,a;return function(){var i,s=n(this),l;return s==null?void this.removeAttributeNS(e.space,e.local):(i=this.getAttributeNS(e.space,e.local),l=s+"",i===l?null:i===o&&l===r?a:(r=l,a=t(o=i,s)))}}function ch(e,t){var n=cn(e),o=n==="transform"?Bf:ni;return this.attrTween(e,typeof t=="function"?(n.local?lh:sh)(n,o,$o(this,"attr."+e,t)):t==null?(n.local?rh:oh)(n):(n.local?ih:ah)(n,o,t))}function dh(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function uh(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function fh(e,t){var n,o;function r(){var a=t.apply(this,arguments);return a!==o&&(n=(o=a)&&uh(e,a)),n}return r._value=t,r}function hh(e,t){var n,o;function r(){var a=t.apply(this,arguments);return a!==o&&(n=(o=a)&&dh(e,a)),n}return r._value=t,r}function ph(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var o=cn(e);return this.tween(n,(o.local?fh:hh)(o,t))}function gh(e,t){return function(){Lo(this,e).delay=+t.apply(this,arguments)}}function mh(e,t){return t=+t,function(){Lo(this,e).delay=t}}function yh(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?gh:mh)(t,e)):we(this.node(),t).delay}function xh(e,t){return function(){Ne(this,e).duration=+t.apply(this,arguments)}}function vh(e,t){return t=+t,function(){Ne(this,e).duration=t}}function wh(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?xh:vh)(t,e)):we(this.node(),t).duration}function bh(e,t){if(typeof t!="function")throw new Error;return function(){Ne(this,e).ease=t}}function Sh(e){var t=this._id;return arguments.length?this.each(bh(t,e)):we(this.node(),t).ease}function _h(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Ne(this,e).ease=n}}function Ch(e){if(typeof e!="function")throw new Error;return this.each(_h(this._id,e))}function Nh(e){typeof e!="function"&&(e=ya(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var a=t[r],i=a.length,s=o[r]=[],l,c=0;c<i;++c)(l=a[c])&&e.call(l,l.__data__,c,a)&&s.push(l);return new Pe(o,this._parents,this._name,this._id)}function Eh(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,o=t.length,r=n.length,a=Math.min(o,r),i=new Array(o),s=0;s<a;++s)for(var l=t[s],c=n[s],d=l.length,u=i[s]=new Array(d),f,p=0;p<d;++p)(f=l[p]||c[p])&&(u[p]=f);for(;s<o;++s)i[s]=t[s];return new Pe(i,this._parents,this._name,this._id)}function kh(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Ph(e,t,n){var o,r,a=kh(t)?Lo:Ne;return function(){var i=a(this,e),s=i.on;s!==o&&(r=(o=s).copy()).on(t,n),i.on=r}}function Mh(e,t){var n=this._id;return arguments.length<2?we(this.node(),n).on.on(e):this.each(Ph(n,e,t))}function jh(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Oh(){return this.on("end.remove",jh(this._id))}function Ih(e){var t=this._name,n=this._id;typeof e!="function"&&(e=No(e));for(var o=this._groups,r=o.length,a=new Array(r),i=0;i<r;++i)for(var s=o[i],l=s.length,c=a[i]=new Array(l),d,u,f=0;f<l;++f)(d=s[f])&&(u=e.call(d,d.__data__,f,s))&&("__data__"in d&&(u.__data__=d.__data__),c[f]=u,_n(c[f],t,n,f,c,we(d,n)));return new Pe(a,this._parents,t,n)}function Ah(e){var t=this._name,n=this._id;typeof e!="function"&&(e=ma(e));for(var o=this._groups,r=o.length,a=[],i=[],s=0;s<r;++s)for(var l=o[s],c=l.length,d,u=0;u<c;++u)if(d=l[u]){for(var f=e.call(d,d.__data__,u,l),p,y=we(d,n),m=0,b=f.length;m<b;++m)(p=f[m])&&_n(p,t,n,m,f,y);a.push(f),i.push(d)}return new Pe(a,i,t,n)}var Rh=vt.prototype.constructor;function Dh(){return new Rh(this._groups,this._parents)}function zh(e,t){var n,o,r;return function(){var a=et(this,e),i=(this.style.removeProperty(e),et(this,e));return a===i?null:a===n&&i===o?r:r=t(n=a,o=i)}}function oi(e){return function(){this.style.removeProperty(e)}}function Th(e,t,n){var o,r=n+"",a;return function(){var i=et(this,e);return i===r?null:i===o?a:a=t(o=i,n)}}function Lh(e,t,n){var o,r,a;return function(){var i=et(this,e),s=n(this),l=s+"";return s==null&&(l=s=(this.style.removeProperty(e),et(this,e))),i===l?null:i===o&&l===r?a:(r=l,a=t(o=i,s))}}function $h(e,t){var n,o,r,a="style."+t,i="end."+a,s;return function(){var l=Ne(this,e),c=l.on,d=l.value[a]==null?s||(s=oi(t)):void 0;(c!==n||r!==d)&&(o=(n=c).copy()).on(i,r=d),l.on=o}}function Vh(e,t,n){var o=(e+="")=="transform"?Vf:ni;return t==null?this.styleTween(e,zh(e,o)).on("end.style."+e,oi(e)):typeof t=="function"?this.styleTween(e,Lh(e,o,$o(this,"style."+e,t))).each($h(this._id,e)):this.styleTween(e,Th(e,o,t),n).on("end.style."+e,null)}function Bh(e,t,n){return function(o){this.style.setProperty(e,t.call(this,o),n)}}function Hh(e,t,n){var o,r;function a(){var i=t.apply(this,arguments);return i!==r&&(o=(r=i)&&Bh(e,i,n)),o}return a._value=t,a}function Fh(e,t,n){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(t==null)return this.tween(o,null);if(typeof t!="function")throw new Error;return this.tween(o,Hh(e,t,n??""))}function Yh(e){return function(){this.textContent=e}}function Zh(e){return function(){var t=e(this);this.textContent=t??""}}function Xh(e){return this.tween("text",typeof e=="function"?Zh($o(this,"text",e)):Yh(e==null?"":e+""))}function Kh(e){return function(t){this.textContent=e.call(this,t)}}function Wh(e){var t,n;function o(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&Kh(r)),t}return o._value=e,o}function Gh(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Wh(e))}function Uh(){for(var e=this._name,t=this._id,n=ri(),o=this._groups,r=o.length,a=0;a<r;++a)for(var i=o[a],s=i.length,l,c=0;c<s;++c)if(l=i[c]){var d=we(l,t);_n(l,e,n,c,i,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new Pe(o,this._parents,e,n)}function qh(){var e,t,n=this,o=n._id,r=n.size();return new Promise(function(a,i){var s={value:i},l={value:function(){--r===0&&a()}};n.each(function(){var c=Ne(this,o),d=c.on;d!==e&&(t=(e=d).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(l)),c.on=t}),r===0&&a()})}var Qh=0;function Pe(e,t,n,o){this._groups=e,this._parents=t,this._name=n,this._id=o}function ri(){return++Qh}var Me=vt.prototype;Pe.prototype={constructor:Pe,select:Ih,selectAll:Ah,selectChild:Me.selectChild,selectChildren:Me.selectChildren,filter:Nh,merge:Eh,selection:Dh,transition:Uh,call:Me.call,nodes:Me.nodes,node:Me.node,size:Me.size,empty:Me.empty,each:Me.each,on:Mh,attr:ch,attrTween:ph,style:Vh,styleTween:Fh,text:Xh,textTween:Gh,remove:Oh,tween:nh,delay:yh,duration:wh,ease:Sh,easeVarying:Ch,end:qh,[Symbol.iterator]:Me[Symbol.iterator]};function Jh(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var ep={time:null,delay:0,duration:250,ease:Jh};function tp(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function np(e){var t,n;e instanceof Pe?(t=e._id,e=e._name):(t=ri(),(n=ep).time=Ro(),e=e==null?null:e+"");for(var o=this._groups,r=o.length,a=0;a<r;++a)for(var i=o[a],s=i.length,l,c=0;c<s;++c)(l=i[c])&&_n(l,e,t,c,i,n||tp(l,t));return new Pe(o,this._parents,e,t)}vt.prototype.interrupt=Jf,vt.prototype.transition=np;const Nn=e=>()=>e;function op(e,{sourceEvent:t,target:n,transform:o,dispatch:r}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:r}})}function je(e,t,n){this.k=e,this.x=t,this.y=n}je.prototype={constructor:je,scale:function(e){return e===1?this:new je(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new je(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var En=new je(1,0,0);ai.prototype=je.prototype;function ai(e){for(;!e.__zoom;)if(!(e=e.parentNode))return En;return e.__zoom}function Vo(e){e.stopImmediatePropagation()}function Mt(e){e.preventDefault(),e.stopImmediatePropagation()}function rp(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function ap(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function ii(){return this.__zoom||En}function ip(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function sp(){return navigator.maxTouchPoints||"ontouchstart"in this}function lp(e,t,n){var o=e.invertX(t[0][0])-n[0][0],r=e.invertX(t[1][0])-n[1][0],a=e.invertY(t[0][1])-n[0][1],i=e.invertY(t[1][1])-n[1][1];return e.translate(r>o?(o+r)/2:Math.min(0,o)||Math.max(0,r),i>a?(a+i)/2:Math.min(0,a)||Math.max(0,i))}function si(){var e=rp,t=ap,n=lp,o=ip,r=sp,a=[0,1/0],i=[[-1/0,-1/0],[1/0,1/0]],s=250,l=Zf,c=sn("start","zoom","end"),d,u,f,p=500,y=150,m=0,b=10;function g(_){_.property("__zoom",ii).on("wheel.zoom",O,{passive:!1}).on("mousedown.zoom",A).on("dblclick.zoom",R).filter(r).on("touchstart.zoom",$).on("touchmove.zoom",z).on("touchend.zoom touchcancel.zoom",T).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}g.transform=function(_,P,N,j){var E=_.selection?_.selection():_;E.property("__zoom",ii),_!==E?C(_,P,N,j):E.interrupt().each(function(){I(this,arguments).event(j).start().zoom(null,typeof P=="function"?P.apply(this,arguments):P).end()})},g.scaleBy=function(_,P,N,j){g.scaleTo(_,function(){var E=this.__zoom.k,M=typeof P=="function"?P.apply(this,arguments):P;return E*M},N,j)},g.scaleTo=function(_,P,N,j){g.transform(_,function(){var E=t.apply(this,arguments),M=this.__zoom,D=N==null?v(E):typeof N=="function"?N.apply(this,arguments):N,B=M.invert(D),H=typeof P=="function"?P.apply(this,arguments):P;return n(x(w(M,H),D,B),E,i)},N,j)},g.translateBy=function(_,P,N,j){g.transform(_,function(){return n(this.__zoom.translate(typeof P=="function"?P.apply(this,arguments):P,typeof N=="function"?N.apply(this,arguments):N),t.apply(this,arguments),i)},null,j)},g.translateTo=function(_,P,N,j,E){g.transform(_,function(){var M=t.apply(this,arguments),D=this.__zoom,B=j==null?v(M):typeof j=="function"?j.apply(this,arguments):j;return n(En.translate(B[0],B[1]).scale(D.k).translate(typeof P=="function"?-P.apply(this,arguments):-P,typeof N=="function"?-N.apply(this,arguments):-N),M,i)},j,E)};function w(_,P){return P=Math.max(a[0],Math.min(a[1],P)),P===_.k?_:new je(P,_.x,_.y)}function x(_,P,N){var j=P[0]-N[0]*_.k,E=P[1]-N[1]*_.k;return j===_.x&&E===_.y?_:new je(_.k,j,E)}function v(_){return[(+_[0][0]+ +_[1][0])/2,(+_[0][1]+ +_[1][1])/2]}function C(_,P,N,j){_.on("start.zoom",function(){I(this,arguments).event(j).start()}).on("interrupt.zoom end.zoom",function(){I(this,arguments).event(j).end()}).tween("zoom",function(){var E=this,M=arguments,D=I(E,M).event(j),B=t.apply(E,M),H=N==null?v(B):typeof N=="function"?N.apply(E,M):N,G=Math.max(B[1][0]-B[0][0],B[1][1]-B[0][1]),F=E.__zoom,Y=typeof P=="function"?P.apply(E,M):P,q=l(F.invert(H).concat(G/F.k),Y.invert(H).concat(G/Y.k));return function(V){if(V===1)V=Y;else{var L=q(V),K=G/L[2];V=new je(K,H[0]-L[0]*K,H[1]-L[1]*K)}D.zoom(null,V)}})}function I(_,P,N){return!N&&_.__zooming||new k(_,P)}function k(_,P){this.that=_,this.args=P,this.active=0,this.sourceEvent=null,this.extent=t.apply(_,P),this.taps=0}k.prototype={event:function(_){return _&&(this.sourceEvent=_),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(_,P){return this.mouse&&_!=="mouse"&&(this.mouse[1]=P.invert(this.mouse[0])),this.touch0&&_!=="touch"&&(this.touch0[1]=P.invert(this.touch0[0])),this.touch1&&_!=="touch"&&(this.touch1[1]=P.invert(this.touch1[0])),this.that.__zoom=P,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(_){var P=ge(this.that).datum();c.call(_,this.that,new op(_,{sourceEvent:this.sourceEvent,target:g,type:_,transform:this.that.__zoom,dispatch:c}),P)}};function O(_,...P){if(!e.apply(this,arguments))return;var N=I(this,P).event(_),j=this.__zoom,E=Math.max(a[0],Math.min(a[1],j.k*Math.pow(2,o.apply(this,arguments)))),M=xe(_);if(N.wheel)(N.mouse[0][0]!==M[0]||N.mouse[0][1]!==M[1])&&(N.mouse[1]=j.invert(N.mouse[0]=M)),clearTimeout(N.wheel);else{if(j.k===E)return;N.mouse=[M,j.invert(M)],Cn(this),N.start()}Mt(_),N.wheel=setTimeout(D,y),N.zoom("mouse",n(x(w(j,E),N.mouse[0],N.mouse[1]),N.extent,i));function D(){N.wheel=null,N.end()}}function A(_,...P){if(f||!e.apply(this,arguments))return;var N=_.currentTarget,j=I(this,P,!0).event(_),E=ge(_.view).on("mousemove.zoom",H,!0).on("mouseup.zoom",G,!0),M=xe(_,N),D=_.clientX,B=_.clientY;ka(_.view),Vo(_),j.mouse=[M,this.__zoom.invert(M)],Cn(this),j.start();function H(F){if(Mt(F),!j.moved){var Y=F.clientX-D,q=F.clientY-B;j.moved=Y*Y+q*q>m}j.event(F).zoom("mouse",n(x(j.that.__zoom,j.mouse[0]=xe(F,N),j.mouse[1]),j.extent,i))}function G(F){E.on("mousemove.zoom mouseup.zoom",null),Pa(F.view,j.moved),Mt(F),j.event(F).end()}}function R(_,...P){if(e.apply(this,arguments)){var N=this.__zoom,j=xe(_.changedTouches?_.changedTouches[0]:_,this),E=N.invert(j),M=N.k*(_.shiftKey?.5:2),D=n(x(w(N,M),j,E),t.apply(this,P),i);Mt(_),s>0?ge(this).transition().duration(s).call(C,D,j,_):ge(this).call(g.transform,D,j,_)}}function $(_,...P){if(e.apply(this,arguments)){var N=_.touches,j=N.length,E=I(this,P,_.changedTouches.length===j).event(_),M,D,B,H;for(Vo(_),D=0;D<j;++D)B=N[D],H=xe(B,this),H=[H,this.__zoom.invert(H),B.identifier],E.touch0?!E.touch1&&E.touch0[2]!==H[2]&&(E.touch1=H,E.taps=0):(E.touch0=H,M=!0,E.taps=1+!!d);d&&(d=clearTimeout(d)),M&&(E.taps<2&&(u=H[0],d=setTimeout(function(){d=null},p)),Cn(this),E.start())}}function z(_,...P){if(this.__zooming){var N=I(this,P).event(_),j=_.changedTouches,E=j.length,M,D,B,H;for(Mt(_),M=0;M<E;++M)D=j[M],B=xe(D,this),N.touch0&&N.touch0[2]===D.identifier?N.touch0[0]=B:N.touch1&&N.touch1[2]===D.identifier&&(N.touch1[0]=B);if(D=N.that.__zoom,N.touch1){var G=N.touch0[0],F=N.touch0[1],Y=N.touch1[0],q=N.touch1[1],V=(V=Y[0]-G[0])*V+(V=Y[1]-G[1])*V,L=(L=q[0]-F[0])*L+(L=q[1]-F[1])*L;D=w(D,Math.sqrt(V/L)),B=[(G[0]+Y[0])/2,(G[1]+Y[1])/2],H=[(F[0]+q[0])/2,(F[1]+q[1])/2]}else if(N.touch0)B=N.touch0[0],H=N.touch0[1];else return;N.zoom("touch",n(x(D,B,H),N.extent,i))}}function T(_,...P){if(this.__zooming){var N=I(this,P).event(_),j=_.changedTouches,E=j.length,M,D;for(Vo(_),f&&clearTimeout(f),f=setTimeout(function(){f=null},p),M=0;M<E;++M)D=j[M],N.touch0&&N.touch0[2]===D.identifier?delete N.touch0:N.touch1&&N.touch1[2]===D.identifier&&delete N.touch1;if(N.touch1&&!N.touch0&&(N.touch0=N.touch1,delete N.touch1),N.touch0)N.touch0[1]=this.__zoom.invert(N.touch0[0]);else if(N.end(),N.taps===2&&(D=xe(D,this),Math.hypot(u[0]-D[0],u[1]-D[1])<b)){var B=ge(this).on("dblclick.zoom");B&&B.apply(this,arguments)}}}return g.wheelDelta=function(_){return arguments.length?(o=typeof _=="function"?_:Nn(+_),g):o},g.filter=function(_){return arguments.length?(e=typeof _=="function"?_:Nn(!!_),g):e},g.touchable=function(_){return arguments.length?(r=typeof _=="function"?_:Nn(!!_),g):r},g.extent=function(_){return arguments.length?(t=typeof _=="function"?_:Nn([[+_[0][0],+_[0][1]],[+_[1][0],+_[1][1]]]),g):t},g.scaleExtent=function(_){return arguments.length?(a[0]=+_[0],a[1]=+_[1],g):[a[0],a[1]]},g.translateExtent=function(_){return arguments.length?(i[0][0]=+_[0][0],i[1][0]=+_[1][0],i[0][1]=+_[0][1],i[1][1]=+_[1][1],g):[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},g.constrain=function(_){return arguments.length?(n=_,g):n},g.duration=function(_){return arguments.length?(s=+_,g):s},g.interpolate=function(_){return arguments.length?(l=_,g):l},g.on=function(){var _=c.on.apply(c,arguments);return _===c?g:_},g.clickDistance=function(_){return arguments.length?(m=(_=+_)*_,g):Math.sqrt(m)},g.tapDistance=function(_){return arguments.length?(b=+_,g):b},g}const Oe={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:n,targetHandle:o})=>`Couldn't create edge for ${e} handle id: "${e==="source"?n:o}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`},jt=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],li=["Enter"," ","Escape"];var rt;(function(e){e.Strict="strict",e.Loose="loose"})(rt||(rt={})),function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"}(Ze||(Ze={}));var Ot;(function(e){e.Partial="partial",e.Full="full"})(Ot||(Ot={}));const ci={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var Te;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Te||(Te={}));var kn;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(kn||(kn={})),function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"}(U||(U={}));const di={[U.Left]:U.Right,[U.Right]:U.Left,[U.Top]:U.Bottom,[U.Bottom]:U.Top};function cp(e,t){if(!e&&!t)return!0;if(!e||!t||e.size!==t.size)return!1;if(!e.size&&!t.size)return!0;for(const n of e.keys())if(!t.has(n))return!1;return!0}function ui(e,t,n){if(!n)return;const o=[];e.forEach((r,a)=>{t!=null&&t.has(a)||o.push(r)}),o.length&&n(o)}function fi(e){return e===null?null:e?"valid":"invalid"}const hi=e=>"id"in e&&"source"in e&&"target"in e,dp=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),Bo=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),It=(e,t=[0,0])=>{const{width:n,height:o}=Ie(e),r=e.origin??t,a=n*r[0],i=o*r[1];return{x:e.position.x-a,y:e.position.y-i}},up=(e,t={nodeOrigin:[0,0],nodeLookup:void 0})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((o,r)=>{const a=typeof r=="string";let i=!t.nodeLookup&&!a?r:void 0;t.nodeLookup&&(i=a?t.nodeLookup.get(r):Bo(r)?r:t.nodeLookup.get(r.id));const s=i?jn(i,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return Pn(o,s)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Mn(n)},At=(e,t={})=>{if(e.size===0)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return e.forEach(o=>{if(t.filter===void 0||t.filter(o)){const r=jn(o);n=Pn(n,r)}}),Mn(n)},pi=(e,t,[n,o,r]=[0,0,1],a=!1,i=!1)=>{const s={...Dt(t,[n,o,r]),width:t.width/r,height:t.height/r},l=[];for(const c of e.values()){const{measured:d,selectable:u=!0,hidden:f=!1}=c;if(i&&!u||f)continue;const p=d.width??c.width??c.initialWidth??null,y=d.height??c.height??c.initialHeight??null,m=Rt(s,it(c)),b=(p??0)*(y??0),g=a&&m>0;(!c.internals.handleBounds||g||m>=b||c.dragging)&&l.push(c)}return l},fp=(e,t)=>{const n=new Set;return e.forEach(o=>{n.add(o.id)}),t.filter(o=>n.has(o.source)||n.has(o.target))};function Ho(e,t){const n=new Map,o=t!=null&&t.nodes?new Set(t.nodes.map(r=>r.id)):null;return e.forEach(r=>{r.measured.width&&r.measured.height&&(t!=null&&t.includeHiddenNodes||!r.hidden)&&(!o||o.has(r.id))&&n.set(r.id,r)}),n}async function Fo({nodes:e,width:t,height:n,panZoom:o,minZoom:r,maxZoom:a},i){if(e.size===0)return Promise.resolve(!1);const s=At(e),l=Zo(s,t,n,(i==null?void 0:i.minZoom)??r,(i==null?void 0:i.maxZoom)??a,(i==null?void 0:i.padding)??.1);return await o.setViewport(l,{duration:i==null?void 0:i.duration}),Promise.resolve(!0)}function gi({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:o=[0,0],nodeExtent:r,onError:a}){const i=n.get(e),s=i.parentId?n.get(i.parentId):void 0,{x:l,y:c}=s?s.internals.positionAbsolute:{x:0,y:0},d=i.origin??o;let u=r;if(i.extent==="parent"&&!i.expandParent)if(!s)a==null||a("005",Oe.error005());else{const p=s.measured.width,y=s.measured.height;p&&y&&(u=[[l,c],[l+p,c+y]])}else s&&st(i.extent)&&(u=[[i.extent[0][0]+l,i.extent[0][1]+c],[i.extent[1][0]+l,i.extent[1][1]+c]]);const f=st(u)?Ge(t,u,i.measured):t;return{position:{x:f.x-l+i.measured.width*d[0],y:f.y-c+i.measured.height*d[1]},positionAbsolute:f}}async function hp({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:o,onBeforeDelete:r}){const a=new Set(e.map(u=>u.id)),i=[];for(const u of n){if(u.deletable===!1)continue;const f=a.has(u.id),p=!f&&u.parentId&&i.find(y=>y.id===u.parentId);(f||p)&&i.push(u)}const s=new Set(t.map(u=>u.id)),l=o.filter(u=>u.deletable!==!1),c=fp(i,l);for(const u of l)s.has(u.id)&&!c.find(f=>f.id===u.id)&&c.push(u);if(!r)return{edges:c,nodes:i};const d=await r({nodes:i,edges:c});return typeof d=="boolean"?d?{edges:c,nodes:i}:{edges:[],nodes:[]}:d}const at=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),Ge=(e={x:0,y:0},t,n)=>({x:at(e.x,t[0][0],t[1][0]-((n==null?void 0:n.width)??0)),y:at(e.y,t[0][1],t[1][1]-((n==null?void 0:n.height)??0))});function mi(e,t,n){const{width:o,height:r}=Ie(n),{x:a,y:i}=n.internals.positionAbsolute;return Ge(e,[[a,i],[a+o,i+r]],t)}const yi=(e,t,n)=>e<t?at(Math.abs(e-t),1,t)/t:e>n?-at(Math.abs(e-n),1,t)/t:0,xi=(e,t,n=15,o=40)=>{const r=yi(e.x,o,t.width-o)*n,a=yi(e.y,o,t.height-o)*n;return[r,a]},Pn=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),Yo=({x:e,y:t,width:n,height:o})=>({x:e,y:t,x2:e+n,y2:t+o}),Mn=({x:e,y:t,x2:n,y2:o})=>({x:e,y:t,width:n-e,height:o-t}),it=(e,t=[0,0])=>{var r,a;const{x:n,y:o}=Bo(e)?e.internals.positionAbsolute:It(e,t);return{x:n,y:o,width:((r=e.measured)==null?void 0:r.width)??e.width??e.initialWidth??0,height:((a=e.measured)==null?void 0:a.height)??e.height??e.initialHeight??0}},jn=(e,t=[0,0])=>{var r,a;const{x:n,y:o}=Bo(e)?e.internals.positionAbsolute:It(e,t);return{x:n,y:o,x2:n+(((r=e.measured)==null?void 0:r.width)??e.width??e.initialWidth??0),y2:o+(((a=e.measured)==null?void 0:a.height)??e.height??e.initialHeight??0)}},vi=(e,t)=>Mn(Pn(Yo(e),Yo(t))),Rt=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),o=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*o)},wi=e=>be(e.width)&&be(e.height)&&be(e.x)&&be(e.y),be=e=>!isNaN(e)&&isFinite(e),pp=(e,t)=>{},On=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),Dt=({x:e,y:t},[n,o,r],a=!1,i=[1,1])=>{const s={x:(e-n)/r,y:(t-o)/r};return a?On(s,i):s},bi=({x:e,y:t},[n,o,r])=>({x:e*r+n,y:t*r+o}),Zo=(e,t,n,o,r,a)=>{const i=t/(e.width*(1+a)),s=n/(e.height*(1+a)),l=Math.min(i,s),c=at(l,o,r),d=e.x+e.width/2,u=e.y+e.height/2,f=t/2-d*c,p=n/2-u*c;return{x:f,y:p,zoom:c}},In=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function st(e){return e!==void 0&&e!=="parent"}function Ie(e){var t,n;return{width:((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth??0,height:((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight??0}}function Si(e){var t,n;return(((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth)!==void 0&&(((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight)!==void 0}function _i(e,t={width:0,height:0},n,o,r){const a={...e},i=o.get(n);if(i){const s=i.origin||r;a.x+=i.internals.positionAbsolute.x-(t.width??0)*s[0],a.y+=i.internals.positionAbsolute.y-(t.height??0)*s[1]}return a}function zt(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:o,containerBounds:r}){const{x:a,y:i}=Ae(e),s=Dt({x:a-((r==null?void 0:r.left)??0),y:i-((r==null?void 0:r.top)??0)},o),{x:l,y:c}=n?On(s,t):s;return{xSnapped:l,ySnapped:c,...s}}const An=e=>({width:e.offsetWidth,height:e.offsetHeight}),Ci=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},gp=["INPUT","SELECT","TEXTAREA"];function Xo(e){var n,o;const t=((o=(n=e.composedPath)==null?void 0:n.call(e))==null?void 0:o[0])||e.target;return gp.includes(t==null?void 0:t.nodeName)||(t==null?void 0:t.hasAttribute("contenteditable"))||!!(t!=null&&t.closest(".nokey"))}const Ni=e=>"clientX"in e,Ae=(e,t)=>{var a,i;const n=Ni(e),o=n?e.clientX:(a=e.touches)==null?void 0:a[0].clientX,r=n?e.clientY:(i=e.touches)==null?void 0:i[0].clientY;return{x:o-((t==null?void 0:t.left)??0),y:r-((t==null?void 0:t.top)??0)}},Ei=(e,t,n,o,r)=>{const a=t.querySelectorAll(`.${e}`);return!a||!a.length?null:Array.from(a).map(i=>{const s=i.getBoundingClientRect();return{id:i.getAttribute("data-handleid"),type:e,nodeId:r,position:i.getAttribute("data-handlepos"),x:(s.left-n.left)/o,y:(s.top-n.top)/o,...An(i)}})};function ki({sourceX:e,sourceY:t,targetX:n,targetY:o,sourceControlX:r,sourceControlY:a,targetControlX:i,targetControlY:s}){const l=e*.125+r*.375+i*.375+n*.125,c=t*.125+a*.375+s*.375+o*.125,d=Math.abs(l-e),u=Math.abs(c-t);return[l,c,d,u]}function Rn(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Pi({pos:e,x1:t,y1:n,x2:o,y2:r,c:a}){switch(e){case U.Left:return[t-Rn(t-o,a),n];case U.Right:return[t+Rn(o-t,a),n];case U.Top:return[t,n-Rn(n-r,a)];case U.Bottom:return[t,n+Rn(r-n,a)]}}function Mi({sourceX:e,sourceY:t,sourcePosition:n=U.Bottom,targetX:o,targetY:r,targetPosition:a=U.Top,curvature:i=.25}){const[s,l]=Pi({pos:n,x1:e,y1:t,x2:o,y2:r,c:i}),[c,d]=Pi({pos:a,x1:o,y1:r,x2:e,y2:t,c:i}),[u,f,p,y]=ki({sourceX:e,sourceY:t,targetX:o,targetY:r,sourceControlX:s,sourceControlY:l,targetControlX:c,targetControlY:d});return[`M${e},${t} C${s},${l} ${c},${d} ${o},${r}`,u,f,p,y]}function ji({sourceX:e,sourceY:t,targetX:n,targetY:o}){const r=Math.abs(n-e)/2,a=n<e?n+r:n-r,i=Math.abs(o-t)/2,s=o<t?o+i:o-i;return[a,s,r,i]}function mp({sourceNode:e,targetNode:t,selected:n=!1,zIndex:o=0,elevateOnSelect:r=!1}){if(!r)return o;const a=n||t.selected||e.selected,i=Math.max(e.internals.z||0,t.internals.z||0,1e3);return o+(a?i:0)}function yp({sourceNode:e,targetNode:t,width:n,height:o,transform:r}){const a=Pn(jn(e),jn(t));a.x===a.x2&&(a.x2+=1),a.y===a.y2&&(a.y2+=1);const i={x:-r[0]/r[2],y:-r[1]/r[2],width:n/r[2],height:o/r[2]};return Rt(i,Mn(a))>0}const xp=({source:e,sourceHandle:t,target:n,targetHandle:o})=>`xy-edge__${e}${t||""}-${n}${o||""}`,vp=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),Oi=(e,t)=>{if(!e.source||!e.target)return t;let n;return hi(e)?n={...e}:n={...e,id:xp(e)},vp(n,t)?t:(n.sourceHandle===null&&delete n.sourceHandle,n.targetHandle===null&&delete n.targetHandle,t.concat(n))};function Ii({sourceX:e,sourceY:t,targetX:n,targetY:o}){const[r,a,i,s]=ji({sourceX:e,sourceY:t,targetX:n,targetY:o});return[`M ${e},${t}L ${n},${o}`,r,a,i,s]}const Ai={[U.Left]:{x:-1,y:0},[U.Right]:{x:1,y:0},[U.Top]:{x:0,y:-1},[U.Bottom]:{x:0,y:1}},wp=({source:e,sourcePosition:t=U.Bottom,target:n})=>t===U.Left||t===U.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},Ri=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function bp({source:e,sourcePosition:t=U.Bottom,target:n,targetPosition:o=U.Top,center:r,offset:a}){const i=Ai[t],s=Ai[o],l={x:e.x+i.x*a,y:e.y+i.y*a},c={x:n.x+s.x*a,y:n.y+s.y*a},d=wp({source:l,sourcePosition:t,target:c}),u=d.x!==0?"x":"y",f=d[u];let p=[],y,m;const b={x:0,y:0},g={x:0,y:0},[w,x,v,C]=ji({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(i[u]*s[u]===-1){y=r.x??w,m=r.y??x;const I=[{x:y,y:l.y},{x:y,y:c.y}],k=[{x:l.x,y:m},{x:c.x,y:m}];i[u]===f?p=u==="x"?I:k:p=u==="x"?k:I}else{const I=[{x:l.x,y:c.y}],k=[{x:c.x,y:l.y}];if(u==="x"?p=i.x===f?k:I:p=i.y===f?I:k,t===o){const z=Math.abs(e[u]-n[u]);if(z<=a){const T=Math.min(a-1,a-z);i[u]===f?b[u]=(l[u]>e[u]?-1:1)*T:g[u]=(c[u]>n[u]?-1:1)*T}}if(t!==o){const z=u==="x"?"y":"x",T=i[u]===s[z],_=l[z]>c[z],P=l[z]<c[z];(i[u]===1&&(!T&&_||T&&P)||i[u]!==1&&(!T&&P||T&&_))&&(p=u==="x"?I:k)}const O={x:l.x+b.x,y:l.y+b.y},A={x:c.x+g.x,y:c.y+g.y},R=Math.max(Math.abs(O.x-p[0].x),Math.abs(A.x-p[0].x)),$=Math.max(Math.abs(O.y-p[0].y),Math.abs(A.y-p[0].y));R>=$?(y=(O.x+A.x)/2,m=p[0].y):(y=p[0].x,m=(O.y+A.y)/2)}return[[e,{x:l.x+b.x,y:l.y+b.y},...p,{x:c.x+g.x,y:c.y+g.y},n],y,m,v,C]}function Sp(e,t,n,o){const r=Math.min(Ri(e,t)/2,Ri(t,n)/2,o),{x:a,y:i}=t;if(e.x===a&&a===n.x||e.y===i&&i===n.y)return`L${a} ${i}`;if(e.y===i){const c=e.x<n.x?-1:1,d=e.y<n.y?1:-1;return`L ${a+r*c},${i}Q ${a},${i} ${a},${i+r*d}`}const s=e.x<n.x?1:-1,l=e.y<n.y?-1:1;return`L ${a},${i+r*l}Q ${a},${i} ${a+r*s},${i}`}function Ko({sourceX:e,sourceY:t,sourcePosition:n=U.Bottom,targetX:o,targetY:r,targetPosition:a=U.Top,borderRadius:i=5,centerX:s,centerY:l,offset:c=20}){const[d,u,f,p,y]=bp({source:{x:e,y:t},sourcePosition:n,target:{x:o,y:r},targetPosition:a,center:{x:s,y:l},offset:c});return[d.reduce((m,b,g)=>{let w="";return g>0&&g<d.length-1?w=Sp(d[g-1],b,d[g+1],i):w=`${g===0?"M":"L"}${b.x} ${b.y}`,m+=w,m},""),u,f,p,y]}function Di(e){var t;return e&&!!(e.internals.handleBounds||(t=e.handles)!=null&&t.length)&&!!(e.measured.width||e.width||e.initialWidth)}function _p(e){var u;const{sourceNode:t,targetNode:n}=e;if(!Di(t)||!Di(n))return null;const o=t.internals.handleBounds||zi(t.handles),r=n.internals.handleBounds||zi(n.handles),a=Ti((o==null?void 0:o.source)??[],e.sourceHandle),i=Ti(e.connectionMode===rt.Strict?(r==null?void 0:r.target)??[]:((r==null?void 0:r.target)??[]).concat((r==null?void 0:r.source)??[]),e.targetHandle);if(!a||!i)return(u=e.onError)==null||u.call(e,"008",Oe.error008(a?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const s=(a==null?void 0:a.position)||U.Bottom,l=(i==null?void 0:i.position)||U.Top,c=Tt(t,a,s),d=Tt(n,i,l);return{sourceX:c.x,sourceY:c.y,targetX:d.x,targetY:d.y,sourcePosition:s,targetPosition:l}}function zi(e){if(!e)return null;const t=[],n=[];for(const o of e)o.width=o.width??1,o.height=o.height??1,o.type==="source"?t.push(o):o.type==="target"&&n.push(o);return{source:t,target:n}}function Tt(e,t,n=U.Left,o=!1){const r=((t==null?void 0:t.x)??0)+e.internals.positionAbsolute.x,a=((t==null?void 0:t.y)??0)+e.internals.positionAbsolute.y,{width:i,height:s}=t??Ie(e);if(o)return{x:r+i/2,y:a+s/2};switch((t==null?void 0:t.position)??n){case U.Top:return{x:r+i/2,y:a};case U.Right:return{x:r+i,y:a+s/2};case U.Bottom:return{x:r+i/2,y:a+s};case U.Left:return{x:r,y:a+s/2}}}function Ti(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function Wo(e,t){return e?typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(n=>`${n}=${e[n]}`).join("&")}`:""}function Cp(e,{id:t,defaultColor:n,defaultMarkerStart:o,defaultMarkerEnd:r}){const a=new Set;return e.reduce((i,s)=>([s.markerStart||o,s.markerEnd||r].forEach(l=>{if(l&&typeof l=="object"){const c=Wo(l,t);a.has(c)||(i.push({id:c,color:l.color||n,...l}),a.add(c))}}),i),[]).sort((i,s)=>i.id.localeCompare(s.id))}const Go={nodeOrigin:[0,0],nodeExtent:jt,elevateNodesOnSelect:!0,defaults:{}},Np={...Go,checkEquality:!0};function Uo(e,t){const n={...e};for(const o in t)t[o]!==void 0&&(n[o]=t[o]);return n}function Ep(e,t,n){const o=Uo(Go,n);for(const r of e.values())if(r.parentId)Qo(r,e,t,o);else{const a=It(r,o.nodeOrigin),i=st(r.extent)?r.extent:o.nodeExtent,s=Ge(a,i,Ie(r));r.internals.positionAbsolute=s}}function qo(e,t,n,o){var s,l;const r=Uo(Np,o),a=new Map(t),i=r!=null&&r.elevateNodesOnSelect?1e3:0;t.clear(),n.clear();for(const c of e){let d=a.get(c.id);if(r.checkEquality&&c===(d==null?void 0:d.internals.userNode))t.set(c.id,d);else{const u=It(c,r.nodeOrigin),f=st(c.extent)?c.extent:r.nodeExtent,p=Ge(u,f,Ie(c));d={...r.defaults,...c,measured:{width:(s=c.measured)==null?void 0:s.width,height:(l=c.measured)==null?void 0:l.height},internals:{positionAbsolute:p,handleBounds:c.measured?d==null?void 0:d.internals.handleBounds:void 0,z:Li(c,i),userNode:c}},t.set(c.id,d)}c.parentId&&Qo(d,t,n,o)}}function kp(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function Qo(e,t,n,o){const{elevateNodesOnSelect:r,nodeOrigin:a,nodeExtent:i}=Uo(Go,o),s=e.parentId,l=t.get(s);if(!l){console.warn(`Parent node ${s} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}kp(e,n);const c=r?1e3:0,{x:d,y:u,z:f}=Pp(e,l,a,i,c),{positionAbsolute:p}=e.internals,y=d!==p.x||u!==p.y;(y||f!==e.internals.z)&&(e.internals={...e.internals,positionAbsolute:y?{x:d,y:u}:p,z:f})}function Li(e,t){return(be(e.zIndex)?e.zIndex:0)+(e.selected?t:0)}function Pp(e,t,n,o,r){const{x:a,y:i}=t.internals.positionAbsolute,s=Ie(e),l=It(e,n),c=st(e.extent)?Ge(l,e.extent,s):l;let d=Ge({x:a+c.x,y:i+c.y},o,s);e.extent==="parent"&&(d=mi(d,s,t));const u=Li(e,r),f=t.internals.z??0;return{x:d.x,y:d.y,z:f>u?f:u}}function Jo(e,t,n,o=[0,0]){var i;const r=[],a=new Map;for(const s of e){const l=t.get(s.parentId);if(!l)continue;const c=((i=a.get(s.parentId))==null?void 0:i.expandedRect)??it(l),d=vi(c,s.rect);a.set(s.parentId,{expandedRect:d,parent:l})}return a.size>0&&a.forEach(({expandedRect:s,parent:l},c)=>{var x;const d=l.internals.positionAbsolute,u=Ie(l),f=l.origin??o,p=s.x<d.x?Math.round(Math.abs(d.x-s.x)):0,y=s.y<d.y?Math.round(Math.abs(d.y-s.y)):0,m=Math.max(u.width,Math.round(s.width)),b=Math.max(u.height,Math.round(s.height)),g=(m-u.width)*f[0],w=(b-u.height)*f[1];(p>0||y>0||g||w)&&(r.push({id:c,type:"position",position:{x:l.position.x-p+g,y:l.position.y-y+w}}),(x=n.get(c))==null||x.forEach(v=>{e.some(C=>C.id===v.id)||r.push({id:v.id,type:"position",position:{x:v.position.x+p,y:v.position.y+y}})})),(u.width<s.width||u.height<s.height||p||y)&&r.push({id:c,type:"dimensions",setAttributes:!0,dimensions:{width:m+(p?f[0]*p-g:0),height:b+(y?f[1]*y-w:0)}})}),r}function Mp(e,t,n,o,r,a){const i=o==null?void 0:o.querySelector(".xyflow__viewport");let s=!1;if(!i)return{changes:[],updatedInternals:s};const l=[],c=window.getComputedStyle(i),{m22:d}=new window.DOMMatrixReadOnly(c.transform),u=[];for(const f of e.values()){const p=t.get(f.id);if(p)if(p.hidden)p.internals={...p.internals,handleBounds:void 0},s=!0;else{const y=An(f.nodeElement),m=p.measured.width!==y.width||p.measured.height!==y.height;if(y.width&&y.height&&(m||!p.internals.handleBounds||f.force)){const b=f.nodeElement.getBoundingClientRect(),g=st(p.extent)?p.extent:a;let{positionAbsolute:w}=p.internals;p.parentId&&p.extent==="parent"?w=mi(w,y,t.get(p.parentId)):g&&(w=Ge(w,g,y)),p.measured=y,p.internals={...p.internals,positionAbsolute:w,handleBounds:{source:Ei("source",f.nodeElement,b,d,p.id),target:Ei("target",f.nodeElement,b,d,p.id)}},p.parentId&&Qo(p,t,n,{nodeOrigin:r}),s=!0,m&&(l.push({id:p.id,type:"dimensions",dimensions:y}),p.expandParent&&p.parentId&&u.push({id:p.id,parentId:p.parentId,rect:it(p,r)}))}}}if(u.length>0){const f=Jo(u,t,n,r);l.push(...f)}return{changes:l,updatedInternals:s}}async function jp({delta:e,panZoom:t,transform:n,translateExtent:o,width:r,height:a}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const i=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[r,a]],o),s=!!i&&(i.x!==n[0]||i.y!==n[1]||i.k!==n[2]);return Promise.resolve(s)}function $i(e,t,n){e.clear(),t.clear();for(const o of n){const{source:r,target:a,sourceHandle:i=null,targetHandle:s=null}=o,l=`${r}-source-${i}`,c=`${a}-target-${s}`,d=e.get(l)||new Map,u=e.get(c)||new Map,f={edgeId:o.id,source:r,target:a,sourceHandle:i,targetHandle:s};t.set(o.id,o),e.set(l,d.set(`${a}-${s}`,f)),e.set(c,u.set(`${r}-${i}`,f))}}function Vi(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return n?n.selected?!0:Vi(n,t):!1}function Bi(e,t,n){let o=e;do{if(o!=null&&o.matches(t))return!0;if(o===n)return!1;o=o.parentElement}while(o);return!1}function Op(e,t,n,o){const r=new Map;for(const[a,i]of e)if((i.selected||i.id===o)&&(!i.parentId||!Vi(i,e))&&(i.draggable||t&&typeof i.draggable>"u")){const s=e.get(a);s&&r.set(a,{id:a,position:s.position||{x:0,y:0},distance:{x:n.x-s.internals.positionAbsolute.x,y:n.y-s.internals.positionAbsolute.y},extent:s.extent,parentId:s.parentId,origin:s.origin,expandParent:s.expandParent,internals:{positionAbsolute:s.internals.positionAbsolute||{x:0,y:0}},measured:{width:s.measured.width??0,height:s.measured.height??0}})}return r}function er({nodeId:e,dragItems:t,nodeLookup:n,dragging:o=!0}){var i,s,l;const r=[];for(const[c,d]of t){const u=(i=n.get(c))==null?void 0:i.internals.userNode;u&&r.push({...u,position:d.position,dragging:o})}if(!e)return[r[0],r];const a=(s=n.get(e))==null?void 0:s.internals.userNode;return[a?{...a,position:((l=t.get(e))==null?void 0:l.position)||a.position,dragging:o}:r[0],r]}function Ip({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:o,onDragStop:r}){let a={x:null,y:null},i=0,s=new Map,l=!1,c={x:0,y:0},d=null,u=!1,f=null,p=!1;function y({noDragClassName:b,handleSelector:g,domNode:w,isSelectable:x,nodeId:v,nodeClickDistance:C=0}){f=ge(w);function I({x:R,y:$},z){const{nodeLookup:T,nodeExtent:_,snapGrid:P,snapToGrid:N,nodeOrigin:j,onNodeDrag:E,onSelectionDrag:M,onError:D,updateNodePositions:B}=t();a={x:R,y:$};let H=!1,G={x:0,y:0,x2:0,y2:0};if(s.size>1&&_){const F=At(s);G=Yo(F)}for(const[F,Y]of s){if(!T.has(F))continue;let q={x:R-Y.distance.x,y:$-Y.distance.y};N&&(q=On(q,P));let V=[[_[0][0],_[0][1]],[_[1][0],_[1][1]]];if(s.size>1&&_&&!Y.extent){const{positionAbsolute:Z}=Y.internals,W=Z.x-G.x+_[0][0],X=Z.x+Y.measured.width-G.x2+_[1][0],J=Z.y-G.y+_[0][1],te=Z.y+Y.measured.height-G.y2+_[1][1];V=[[W,J],[X,te]]}const{position:L,positionAbsolute:K}=gi({nodeId:F,nextPosition:q,nodeLookup:T,nodeExtent:V,nodeOrigin:j,onError:D});H=H||Y.position.x!==L.x||Y.position.y!==L.y,Y.position=L,Y.internals.positionAbsolute=K}if(H&&(B(s,!0),z&&(o||E||!v&&M))){const[F,Y]=er({nodeId:v,dragItems:s,nodeLookup:T});o==null||o(z,s,F,Y),E==null||E(z,F,Y),v||(M==null||M(z,Y))}}async function k(){if(!d)return;const{transform:R,panBy:$,autoPanSpeed:z}=t(),[T,_]=xi(c,d,z);(T!==0||_!==0)&&(a.x=(a.x??0)-T/R[2],a.y=(a.y??0)-_/R[2],await $({x:T,y:_})&&I(a,null)),i=requestAnimationFrame(k)}function O(R){var H;const{nodeLookup:$,multiSelectionActive:z,nodesDraggable:T,transform:_,snapGrid:P,snapToGrid:N,selectNodesOnDrag:j,onNodeDragStart:E,onSelectionDragStart:M,unselectNodesAndEdges:D}=t();u=!0,(!j||!x)&&!z&&v&&((H=$.get(v))!=null&&H.selected||D()),x&&j&&v&&(e==null||e(v));const B=zt(R.sourceEvent,{transform:_,snapGrid:P,snapToGrid:N,containerBounds:d});if(a=B,s=Op($,T,B,v),s.size>0&&(n||E||!v&&M)){const[G,F]=er({nodeId:v,dragItems:s,nodeLookup:$});n==null||n(R.sourceEvent,s,G,F),E==null||E(R.sourceEvent,G,F),v||(M==null||M(R.sourceEvent,F))}}const A=Ma().clickDistance(C).on("start",R=>{const{domNode:$,nodeDragThreshold:z,transform:T,snapGrid:_,snapToGrid:P}=t();d=($==null?void 0:$.getBoundingClientRect())||null,p=!1,z===0&&O(R),a=zt(R.sourceEvent,{transform:T,snapGrid:_,snapToGrid:P,containerBounds:d}),c=Ae(R.sourceEvent,d)}).on("drag",R=>{const{autoPanOnNodeDrag:$,transform:z,snapGrid:T,snapToGrid:_,nodeDragThreshold:P,nodeLookup:N}=t(),j=zt(R.sourceEvent,{transform:z,snapGrid:T,snapToGrid:_,containerBounds:d});if((R.sourceEvent.type==="touchmove"&&R.sourceEvent.touches.length>1||v&&!N.has(v))&&(p=!0),!p){if(!l&&$&&u&&(l=!0,k()),!u){const E=j.xSnapped-(a.x??0),M=j.ySnapped-(a.y??0);Math.sqrt(E*E+M*M)>P&&O(R)}(a.x!==j.xSnapped||a.y!==j.ySnapped)&&s&&u&&(c=Ae(R.sourceEvent,d),I(j,R.sourceEvent))}}).on("end",R=>{if(!(!u||p)&&(l=!1,u=!1,cancelAnimationFrame(i),s.size>0)){const{nodeLookup:$,updateNodePositions:z,onNodeDragStop:T,onSelectionDragStop:_}=t();if(z(s,!1),r||T||!v&&_){const[P,N]=er({nodeId:v,dragItems:s,nodeLookup:$,dragging:!1});r==null||r(R.sourceEvent,s,P,N),T==null||T(R.sourceEvent,P,N),v||(_==null||_(R.sourceEvent,N))}}}).filter(R=>{const $=R.target;return!R.button&&(!b||!Bi($,`.${b}`,w))&&(!g||Bi($,g,w))});f.call(A)}function m(){f==null||f.on(".drag",null)}return{update:y,destroy:m}}function Ap(e,t,n){const o=[],r={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const a of t.values())Rt(r,it(a))>0&&o.push(a);return o}const Rp=250;function Dp(e,t,n,o){var s,l;let r=[],a=1/0;const i=Ap(e,n,t+Rp);for(const c of i){const d=[...((s=c.internals.handleBounds)==null?void 0:s.source)??[],...((l=c.internals.handleBounds)==null?void 0:l.target)??[]];for(const u of d){if(o.nodeId===u.nodeId&&o.type===u.type&&o.id===u.id)continue;const{x:f,y:p}=Tt(c,u,u.position,!0),y=Math.sqrt(Math.pow(f-e.x,2)+Math.pow(p-e.y,2));y>t||(y<a?(r=[{...u,x:f,y:p}],a=y):y===a&&r.push({...u,x:f,y:p}))}}if(!r.length)return null;if(r.length>1){const c=o.type==="source"?"target":"source";return r.find(d=>d.type===c)??r[0]}return r[0]}function Hi(e,t,n,o,r,a=!1){var c,d,u;const i=o.get(e);if(!i)return null;const s=r==="strict"?(c=i.internals.handleBounds)==null?void 0:c[t]:[...((d=i.internals.handleBounds)==null?void 0:d.source)??[],...((u=i.internals.handleBounds)==null?void 0:u.target)??[]],l=(n?s==null?void 0:s.find(f=>f.id===n):s==null?void 0:s[0])??null;return l&&a?{...l,...Tt(i,l,l.position,!0)}:l}function Fi(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function zp(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}const Yi=()=>!0;function Tp(e,{connectionMode:t,connectionRadius:n,handleId:o,nodeId:r,edgeUpdaterType:a,isTarget:i,domNode:s,nodeLookup:l,lib:c,autoPanOnConnect:d,flowId:u,panBy:f,cancelConnection:p,onConnectStart:y,onConnect:m,onConnectEnd:b,isValidConnection:g=Yi,onReconnectEnd:w,updateConnection:x,getTransform:v,getFromHandle:C,autoPanSpeed:I}){const k=Ci(e.target);let O=0,A;const{x:R,y:$}=Ae(e),z=k==null?void 0:k.elementFromPoint(R,$),T=Fi(a,z),_=s==null?void 0:s.getBoundingClientRect();if(!_||!T)return;const P=Hi(r,T,o,l,t);if(!P)return;let N=Ae(e,_),j=!1,E=null,M=!1,D=null;function B(){if(!d||!_)return;const[L,K]=xi(N,_,I);f({x:L,y:K}),O=requestAnimationFrame(B)}const H={...P,nodeId:r,type:T,position:P.position},G=l.get(r),F={inProgress:!0,isValid:null,from:Tt(G,H,U.Left,!0),fromHandle:H,fromPosition:H.position,fromNode:G,to:N,toHandle:null,toPosition:di[H.position],toNode:null};x(F);let Y=F;y==null||y(e,{nodeId:r,handleId:o,handleType:T});function q(L){if(!C()||!H){V(L);return}const K=v();N=Ae(L,_),A=Dp(Dt(N,K,!1,[1,1]),n,l,H),j||(B(),j=!0);const Z=Zi(L,{handle:A,connectionMode:t,fromNodeId:r,fromHandleId:o,fromType:i?"target":"source",isValidConnection:g,doc:k,lib:c,flowId:u,nodeLookup:l});D=Z.handleDomNode,E=Z.connection,M=zp(!!A,Z.isValid);const W={...Y,isValid:M,to:A&&M?bi({x:A.x,y:A.y},K):N,toHandle:Z.toHandle,toPosition:M&&Z.toHandle?Z.toHandle.position:di[H.position],toNode:Z.toHandle?l.get(Z.toHandle.nodeId):null};M&&A&&Y.toHandle&&W.toHandle&&Y.toHandle.type===W.toHandle.type&&Y.toHandle.nodeId===W.toHandle.nodeId&&Y.toHandle.id===W.toHandle.id&&Y.to.x===W.to.x&&Y.to.y===W.to.y||(x(W),Y=W)}function V(L){(A||D)&&E&&M&&(m==null||m(E));const{inProgress:K,...Z}=Y,W={...Z,toPosition:Y.toHandle?Y.toPosition:null};b==null||b(L,W),a&&(w==null||w(L,W)),p(),cancelAnimationFrame(O),j=!1,M=!1,E=null,D=null,k.removeEventListener("mousemove",q),k.removeEventListener("mouseup",V),k.removeEventListener("touchmove",q),k.removeEventListener("touchend",V)}k.addEventListener("mousemove",q),k.addEventListener("mouseup",V),k.addEventListener("touchmove",q),k.addEventListener("touchend",V)}function Zi(e,{handle:t,connectionMode:n,fromNodeId:o,fromHandleId:r,fromType:a,doc:i,lib:s,flowId:l,isValidConnection:c=Yi,nodeLookup:d}){const u=a==="target",f=t?i.querySelector(`.${s}-flow__handle[data-id="${l}-${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`):null,{x:p,y}=Ae(e),m=i.elementFromPoint(p,y),b=m!=null&&m.classList.contains(`${s}-flow__handle`)?m:f,g={handleDomNode:b,isValid:!1,connection:null,toHandle:null};if(b){const w=Fi(void 0,b),x=b.getAttribute("data-nodeid"),v=b.getAttribute("data-handleid"),C=b.classList.contains("connectable"),I=b.classList.contains("connectableend");if(!x||!w)return g;const k={source:u?x:o,sourceHandle:u?v:r,target:u?o:x,targetHandle:u?r:v};g.connection=k;const O=C&&I&&(n===rt.Strict?u&&w==="source"||!u&&w==="target":x!==o||v!==r);g.isValid=O&&c(k),g.toHandle=Hi(x,w,v,d,n,!1)}return g}const tr={onPointerDown:Tp,isValid:Zi};function Lp({domNode:e,panZoom:t,getTransform:n,getViewScale:o}){const r=ge(e);function a({translateExtent:s,width:l,height:c,zoomStep:d=10,pannable:u=!0,zoomable:f=!0,inversePan:p=!1}){const y=x=>{const v=n();if(x.sourceEvent.type!=="wheel"||!t)return;const C=-x.sourceEvent.deltaY*(x.sourceEvent.deltaMode===1?.05:x.sourceEvent.deltaMode?1:.002)*d,I=v[2]*Math.pow(2,C);t.scaleTo(I)};let m=[0,0];const b=x=>{(x.sourceEvent.type==="mousedown"||x.sourceEvent.type==="touchstart")&&(m=[x.sourceEvent.clientX??x.sourceEvent.touches[0].clientX,x.sourceEvent.clientY??x.sourceEvent.touches[0].clientY])},g=x=>{const v=n();if(x.sourceEvent.type!=="mousemove"&&x.sourceEvent.type!=="touchmove"||!t)return;const C=[x.sourceEvent.clientX??x.sourceEvent.touches[0].clientX,x.sourceEvent.clientY??x.sourceEvent.touches[0].clientY],I=[C[0]-m[0],C[1]-m[1]];m=C;const k=o()*Math.max(v[2],Math.log(v[2]))*(p?-1:1),O={x:v[0]-I[0]*k,y:v[1]-I[1]*k},A=[[0,0],[l,c]];t.setViewportConstrained({x:O.x,y:O.y,zoom:v[2]},A,s)},w=si().on("start",b).on("zoom",u?g:null).on("zoom.wheel",f?y:null);r.call(w,{})}function i(){r.on("zoom",null)}return{update:a,destroy:i,pointer:xe}}const $p=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,Dn=e=>({x:e.x,y:e.y,zoom:e.k}),nr=({x:e,y:t,zoom:n})=>En.translate(e,t).scale(n),lt=(e,t)=>e.target.closest(`.${t}`),Xi=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),or=(e,t=0,n=()=>{})=>{const o=typeof t=="number"&&t>0;return o||n(),o?e.transition().duration(t).on("end",n):e},Ki=e=>{const t=e.ctrlKey&&In()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function Vp({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:o,panOnScrollMode:r,panOnScrollSpeed:a,zoomOnPinch:i,onPanZoomStart:s,onPanZoom:l,onPanZoomEnd:c}){return d=>{if(lt(d,t))return!1;d.preventDefault(),d.stopImmediatePropagation();const u=n.property("__zoom").k||1;if(d.ctrlKey&&i){const b=xe(d),g=Ki(d),w=u*Math.pow(2,g);o.scaleTo(n,w,b,d);return}const f=d.deltaMode===1?20:1;let p=r===Ze.Vertical?0:d.deltaX*f,y=r===Ze.Horizontal?0:d.deltaY*f;!In()&&d.shiftKey&&r!==Ze.Vertical&&(p=d.deltaY*f,y=0),o.translateBy(n,-(p/u)*a,-(y/u)*a,{internal:!0});const m=Dn(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling||(e.isPanScrolling=!0,s==null||s(d,m)),e.isPanScrolling&&(l==null||l(d,m),e.panScrollTimeout=setTimeout(()=>{c==null||c(d,m),e.isPanScrolling=!1},150))}}function Bp({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(o,r){if(!t&&o.type==="wheel"&&!o.ctrlKey||lt(o,e))return null;o.preventDefault(),n.call(this,o,r)}}function Hp({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return o=>{var a,i,s;if((a=o.sourceEvent)!=null&&a.internal)return;const r=Dn(o.transform);e.mouseButton=((i=o.sourceEvent)==null?void 0:i.button)||0,e.isZoomingOrPanning=!0,e.prevViewport=r,((s=o.sourceEvent)==null?void 0:s.type)==="mousedown"&&t(!0),n&&(n==null||n(o.sourceEvent,r))}}function Fp({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:o,onPanZoom:r}){return a=>{var i,s;e.usedRightMouseButton=!!(n&&Xi(t,e.mouseButton??0)),(i=a.sourceEvent)!=null&&i.sync||o([a.transform.x,a.transform.y,a.transform.k]),r&&!((s=a.sourceEvent)!=null&&s.internal)&&(r==null||r(a.sourceEvent,Dn(a.transform)))}}function Yp({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:o,onPanZoomEnd:r,onPaneContextMenu:a}){return i=>{var s;if(!((s=i.sourceEvent)!=null&&s.internal)&&(e.isZoomingOrPanning=!1,a&&Xi(t,e.mouseButton??0)&&!e.usedRightMouseButton&&i.sourceEvent&&a(i.sourceEvent),e.usedRightMouseButton=!1,o(!1),r&&$p(e.prevViewport,i.transform))){const l=Dn(i.transform);e.prevViewport=l,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{r==null||r(i.sourceEvent,l)},n?150:0)}}}function Zp({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:o,panOnScroll:r,zoomOnDoubleClick:a,userSelectionActive:i,noWheelClassName:s,noPanClassName:l,lib:c}){return d=>{var y;const u=e||t,f=n&&d.ctrlKey;if(d.button===1&&d.type==="mousedown"&&(lt(d,`${c}-flow__node`)||lt(d,`${c}-flow__edge`)))return!0;if(!o&&!u&&!r&&!a&&!n||i||lt(d,s)&&d.type==="wheel"||lt(d,l)&&(d.type!=="wheel"||r&&d.type==="wheel"&&!e)||!n&&d.ctrlKey&&d.type==="wheel")return!1;if(!n&&d.type==="touchstart"&&((y=d.touches)==null?void 0:y.length)>1)return d.preventDefault(),!1;if(!u&&!r&&!f&&d.type==="wheel"||!o&&(d.type==="mousedown"||d.type==="touchstart")||Array.isArray(o)&&!o.includes(d.button)&&d.type==="mousedown")return!1;const p=Array.isArray(o)&&o.includes(d.button)||!d.button||d.button<=1;return(!d.ctrlKey||d.type==="wheel")&&p}}function Xp({domNode:e,minZoom:t,maxZoom:n,paneClickDistance:o,translateExtent:r,viewport:a,onPanZoom:i,onPanZoomStart:s,onPanZoomEnd:l,onDraggingChange:c}){const d={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},u=e.getBoundingClientRect(),f=si().clickDistance(!be(o)||o<0?0:o).scaleExtent([t,n]).translateExtent(r),p=ge(e).call(f);x({x:a.x,y:a.y,zoom:at(a.zoom,t,n)},[[0,0],[u.width,u.height]],r);const y=p.on("wheel.zoom"),m=p.on("dblclick.zoom");f.wheelDelta(Ki);function b(z,T){return p?new Promise(_=>{f==null||f.transform(or(p,T==null?void 0:T.duration,()=>_(!0)),z)}):Promise.resolve(!1)}function g({noWheelClassName:z,noPanClassName:T,onPaneContextMenu:_,userSelectionActive:P,panOnScroll:N,panOnDrag:j,panOnScrollMode:E,panOnScrollSpeed:M,preventScrolling:D,zoomOnPinch:B,zoomOnScroll:H,zoomOnDoubleClick:G,zoomActivationKeyPressed:F,lib:Y,onTransformChange:q}){P&&!d.isZoomingOrPanning&&w();const V=N&&!F&&!P?Vp({zoomPanValues:d,noWheelClassName:z,d3Selection:p,d3Zoom:f,panOnScrollMode:E,panOnScrollSpeed:M,zoomOnPinch:B,onPanZoomStart:s,onPanZoom:i,onPanZoomEnd:l}):Bp({noWheelClassName:z,preventScrolling:D,d3ZoomHandler:y});if(p.on("wheel.zoom",V,{passive:!1}),!P){const K=Hp({zoomPanValues:d,onDraggingChange:c,onPanZoomStart:s});f.on("start",K);const Z=Fp({zoomPanValues:d,panOnDrag:j,onPaneContextMenu:!!_,onPanZoom:i,onTransformChange:q});f.on("zoom",Z);const W=Yp({zoomPanValues:d,panOnDrag:j,panOnScroll:N,onPaneContextMenu:_,onPanZoomEnd:l,onDraggingChange:c});f.on("end",W)}const L=Zp({zoomActivationKeyPressed:F,panOnDrag:j,zoomOnScroll:H,panOnScroll:N,zoomOnDoubleClick:G,zoomOnPinch:B,userSelectionActive:P,noPanClassName:T,noWheelClassName:z,lib:Y});f.filter(L),G?p.on("dblclick.zoom",m):p.on("dblclick.zoom",null)}function w(){f.on("zoom",null)}async function x(z,T,_){const P=nr(z),N=f==null?void 0:f.constrain()(P,T,_);return N&&await b(N),new Promise(j=>j(N))}async function v(z,T){const _=nr(z);return await b(_,T),new Promise(P=>P(_))}function C(z){if(p){const T=nr(z),_=p.property("__zoom");(_.k!==z.zoom||_.x!==z.x||_.y!==z.y)&&(f==null||f.transform(p,T,null,{sync:!0}))}}function I(){const z=p?ai(p.node()):{x:0,y:0,k:1};return{x:z.x,y:z.y,zoom:z.k}}function k(z,T){return p?new Promise(_=>{f==null||f.scaleTo(or(p,T==null?void 0:T.duration,()=>_(!0)),z)}):Promise.resolve(!1)}function O(z,T){return p?new Promise(_=>{f==null||f.scaleBy(or(p,T==null?void 0:T.duration,()=>_(!0)),z)}):Promise.resolve(!1)}function A(z){f==null||f.scaleExtent(z)}function R(z){f==null||f.translateExtent(z)}function $(z){const T=!be(z)||z<0?0:z;f==null||f.clickDistance(T)}return{update:g,destroy:w,setViewport:v,setViewportConstrained:x,getViewport:I,scaleTo:k,scaleBy:O,setScaleExtent:A,setTranslateExtent:R,syncViewport:C,setClickDistance:$}}var ct;(function(e){e.Line="line",e.Handle="handle"})(ct||(ct={}));const Kp=["top-left","top-right","bottom-left","bottom-right"],Wp=["top","right","bottom","left"];function Gp({width:e,prevWidth:t,height:n,prevHeight:o,affectsX:r,affectsY:a}){const i=e-t,s=n-o,l=[i>0?1:i<0?-1:0,s>0?1:s<0?-1:0];return i&&r&&(l[0]=l[0]*-1),s&&a&&(l[1]=l[1]*-1),l}function Up(e){const t=e.includes("right")||e.includes("left"),n=e.includes("bottom")||e.includes("top"),o=e.includes("left"),r=e.includes("top");return{isHorizontal:t,isVertical:n,affectsX:o,affectsY:r}}function Le(e,t){return Math.max(0,t-e)}function $e(e,t){return Math.max(0,e-t)}function zn(e,t,n){return Math.max(0,t-e,e-n)}function Wi(e,t){return e?!t:t}function qp(e,t,n,o,r,a,i,s){let{affectsX:l,affectsY:c}=t;const{isHorizontal:d,isVertical:u}=t,f=d&&u,{xSnapped:p,ySnapped:y}=n,{minWidth:m,maxWidth:b,minHeight:g,maxHeight:w}=o,{x,y:v,width:C,height:I,aspectRatio:k}=e;let O=Math.floor(d?p-e.pointerX:0),A=Math.floor(u?y-e.pointerY:0);const R=C+(l?-O:O),$=I+(c?-A:A),z=-a[0]*C,T=-a[1]*I;let _=zn(R,m,b),P=zn($,g,w);if(i){let E=0,M=0;l&&O<0?E=Le(x+O+z,i[0][0]):!l&&O>0&&(E=$e(x+R+z,i[1][0])),c&&A<0?M=Le(v+A+T,i[0][1]):!c&&A>0&&(M=$e(v+$+T,i[1][1])),_=Math.max(_,E),P=Math.max(P,M)}if(s){let E=0,M=0;l&&O>0?E=$e(x+O,s[0][0]):!l&&O<0&&(E=Le(x+R,s[1][0])),c&&A>0?M=$e(v+A,s[0][1]):!c&&A<0&&(M=Le(v+$,s[1][1])),_=Math.max(_,E),P=Math.max(P,M)}if(r){if(d){const E=zn(R/k,g,w)*k;if(_=Math.max(_,E),i){let M=0;!l&&!c||l&&!c&&f?M=$e(v+T+R/k,i[1][1])*k:M=Le(v+T+(l?O:-O)/k,i[0][1])*k,_=Math.max(_,M)}if(s){let M=0;!l&&!c||l&&!c&&f?M=Le(v+R/k,s[1][1])*k:M=$e(v+(l?O:-O)/k,s[0][1])*k,_=Math.max(_,M)}}if(u){const E=zn($*k,m,b)/k;if(P=Math.max(P,E),i){let M=0;!l&&!c||c&&!l&&f?M=$e(x+$*k+z,i[1][0])/k:M=Le(x+(c?A:-A)*k+z,i[0][0])/k,P=Math.max(P,M)}if(s){let M=0;!l&&!c||c&&!l&&f?M=Le(x+$*k,s[1][0])/k:M=$e(x+(c?A:-A)*k,s[0][0])/k,P=Math.max(P,M)}}}A=A+(A<0?P:-P),O=O+(O<0?_:-_),r&&(f?R>$*k?A=(Wi(l,c)?-O:O)/k:O=(Wi(l,c)?-A:A)*k:d?(A=O/k,c=l):(O=A*k,l=c));const N=l?x+O:x,j=c?v+A:v;return{width:C+(l?-O:O),height:I+(c?-A:A),x:a[0]*O*(l?-1:1)+N,y:a[1]*A*(c?-1:1)+j}}const Gi={width:0,height:0,x:0,y:0},Qp={...Gi,pointerX:0,pointerY:0,aspectRatio:1};function Jp(e){return[[0,0],[e.measured.width,e.measured.height]]}function eg(e,t,n){const o=t.position.x+e.position.x,r=t.position.y+e.position.y,a=e.measured.width??0,i=e.measured.height??0,s=n[0]*a,l=n[1]*i;return[[o-s,r-l],[o+a-s,r+i-l]]}function tg({domNode:e,nodeId:t,getStoreItems:n,onChange:o,onEnd:r}){const a=ge(e);function i({controlPosition:l,boundaries:c,keepAspectRatio:d,onResizeStart:u,onResize:f,onResizeEnd:p,shouldResize:y}){let m={...Gi},b={...Qp};const g=Up(l);let w,x=null,v=[],C,I,k;const O=Ma().on("start",A=>{const{nodeLookup:R,transform:$,snapGrid:z,snapToGrid:T,nodeOrigin:_,paneDomNode:P}=n();if(w=R.get(t),!w)return;x=(P==null?void 0:P.getBoundingClientRect())??null;const{xSnapped:N,ySnapped:j}=zt(A.sourceEvent,{transform:$,snapGrid:z,snapToGrid:T,containerBounds:x});m={width:w.measured.width??0,height:w.measured.height??0,x:w.position.x??0,y:w.position.y??0},b={...m,pointerX:N,pointerY:j,aspectRatio:m.width/m.height},C=void 0,w.parentId&&(w.extent==="parent"||w.expandParent)&&(C=R.get(w.parentId),I=C&&w.extent==="parent"?Jp(C):void 0),v=[],k=void 0;for(const[E,M]of R)if(M.parentId===t&&(v.push({id:E,position:{...M.position},extent:M.extent}),M.extent==="parent"||M.expandParent)){const D=eg(M,w,M.origin??_);k?k=[[Math.min(D[0][0],k[0][0]),Math.min(D[0][1],k[0][1])],[Math.max(D[1][0],k[1][0]),Math.max(D[1][1],k[1][1])]]:k=D}u==null||u(A,{...m})}).on("drag",A=>{const{transform:R,snapGrid:$,snapToGrid:z,nodeOrigin:T}=n(),_=zt(A.sourceEvent,{transform:R,snapGrid:$,snapToGrid:z,containerBounds:x}),P=[];if(!w)return;const{x:N,y:j,width:E,height:M}=m,D={},B=w.origin??T,{width:H,height:G,x:F,y:Y}=qp(b,g,_,c,d,B,I,k),q=H!==E,V=G!==M,L=F!==N&&q,K=Y!==j&&V;if(!L&&!K&&!q&&!V)return;if((L||K||B[0]===1||B[1]===1)&&(D.x=L?F:m.x,D.y=K?Y:m.y,m.x=D.x,m.y=D.y,v.length>0)){const X=F-N,J=Y-j;for(const te of v)te.position={x:te.position.x-X+B[0]*(H-E),y:te.position.y-J+B[1]*(G-M)},P.push(te)}if((q||V)&&(D.width=q?H:m.width,D.height=V?G:m.height,m.width=D.width,m.height=D.height),C&&w.expandParent){const X=B[0]*(D.width??0);D.x&&D.x<X&&(m.x=X,b.x=b.x-(D.x-X));const J=B[1]*(D.height??0);D.y&&D.y<J&&(m.y=J,b.y=b.y-(D.y-J))}const Z=Gp({width:m.width,prevWidth:E,height:m.height,prevHeight:M,affectsX:g.affectsX,affectsY:g.affectsY}),W={...m,direction:Z};(y==null?void 0:y(A,W))!==!1&&(f==null||f(A,W),o(D,P))}).on("end",A=>{p==null||p(A,{...m}),r==null||r()});a.call(O)}function s(){a.on(".drag",null)}return{update:i,destroy:s}}const ng={BASE_URL:"/NoLLMChat/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_BASE_URL:"/NoLLMChat/",VITE_ROUTE_MODE:"hash"},Ui=e=>{let t;const n=new Set,o=(s,l)=>{const c=typeof s=="function"?s(t):s;if(!Object.is(c,t)){const d=t;t=l??(typeof c!="object"||c===null)?c:Object.assign({},t,c),n.forEach(u=>u(t,d))}},r=()=>t,a={setState:o,getState:r,getInitialState:()=>i,subscribe:s=>(n.add(s),()=>n.delete(s)),destroy:()=>{(ng?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},i=t=e(o,r,a);return a},og=e=>e?Ui(e):Ui,{useDebugValue:rg}=me,{useSyncExternalStoreWithSelector:ag}=Ux,ig=e=>e;function qi(e,t=ig,n){const o=ag(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return rg(o),o}const Qi=(e,t)=>{const n=og(e),o=(r,a=t)=>qi(n,r,a);return Object.assign(o,n),o},sg=(e,t)=>e?Qi(e,t):Qi;function oe(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[o,r]of e)if(!Object.is(r,t.get(o)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const o of e)if(!t.has(o))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const o of n)if(!Object.prototype.hasOwnProperty.call(t,o)||!Object.is(e[o],t[o]))return!1;return!0}const Tn=S.createContext(null),lg=Tn.Provider,Ji=Oe.error001();ee=function(e,t){const n=S.useContext(Tn);if(n===null)throw new Error(Ji);return qi(n,e,t)},ne=function(){const e=S.useContext(Tn);if(e===null)throw new Error(Ji);return S.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])};const es={display:"none"},cg={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},ts="react-flow__node-desc",ns="react-flow__edge-desc",dg="react-flow__aria-live",ug=e=>e.ariaLiveMessage;function fg({rfId:e}){const t=ee(ug);return h.jsx("div",{id:`${dg}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:cg,children:t})}function hg({rfId:e,disableKeyboardA11y:t}){return h.jsxs(h.Fragment,{children:[h.jsxs("div",{id:`${ts}-${e}`,style:es,children:["Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "]}),h.jsx("div",{id:`${ns}-${e}`,style:es,children:"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."}),!t&&h.jsx(fg,{rfId:e})]})}const pg=e=>e.userSelectionActive?"none":"all";rn=function({position:e="top-left",children:t,className:n,style:o,...r}){const a=ee(pg),i=`${e}`.split("-");return h.jsx("div",{className:ae(["react-flow__panel",n,...i]),style:{...o,pointerEvents:a},...r,children:t})};function gg({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:h.jsx(rn,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:h.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const mg=e=>{const t=[],n=[];for(const[,o]of e.nodeLookup)o.selected&&t.push(o.internals.userNode);for(const[,o]of e.edgeLookup)o.selected&&n.push(o);return{selectedNodes:t,selectedEdges:n}},Ln=e=>e.id;function yg(e,t){return oe(e.selectedNodes.map(Ln),t.selectedNodes.map(Ln))&&oe(e.selectedEdges.map(Ln),t.selectedEdges.map(Ln))}function xg({onSelectionChange:e}){const t=ne(),{selectedNodes:n,selectedEdges:o}=ee(mg,yg);return S.useEffect(()=>{const r={nodes:n,edges:o};e==null||e(r),t.getState().onSelectionChangeHandlers.forEach(a=>a(r))},[n,o,e]),null}const vg=e=>!!e.onSelectionChangeHandlers;function wg({onSelectionChange:e}){const t=ee(vg);return e||t?h.jsx(xg,{onSelectionChange:e}):null}const os=[0,0],bg={x:0,y:0,zoom:1},Sg=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","onBeforeDelete","debug","autoPanSpeed","paneClickDistance"],rs=[...Sg,"rfId"],_g=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setPaneClickDistance:e.setPaneClickDistance}),as={translateExtent:jt,nodeOrigin:os,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1",paneClickDistance:0};function Cg(e){const{setNodes:t,setEdges:n,setMinZoom:o,setMaxZoom:r,setTranslateExtent:a,setNodeExtent:i,reset:s,setDefaultNodesAndEdges:l,setPaneClickDistance:c}=ee(_g,oe),d=ne();S.useEffect(()=>(l(e.defaultNodes,e.defaultEdges),()=>{u.current=as,s()}),[]);const u=S.useRef(as);return S.useEffect(()=>{for(const f of rs){const p=e[f],y=u.current[f];p!==y&&(typeof e[f]>"u"||(f==="nodes"?t(p):f==="edges"?n(p):f==="minZoom"?o(p):f==="maxZoom"?r(p):f==="translateExtent"?a(p):f==="nodeExtent"?i(p):f==="paneClickDistance"?c(p):f==="fitView"?d.setState({fitViewOnInit:p}):f==="fitViewOptions"?d.setState({fitViewOnInitOptions:p}):d.setState({[f]:p})))}u.current=e},rs.map(f=>e[f])),null}function is(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function Ng(e){var o;const[t,n]=S.useState(e==="system"?null:e);return S.useEffect(()=>{if(e!=="system"){n(e);return}const r=is(),a=()=>n(r!=null&&r.matches?"dark":"light");return a(),r==null||r.addEventListener("change",a),()=>{r==null||r.removeEventListener("change",a)}},[e]),t!==null?t:(o=is())!=null&&o.matches?"dark":"light"}const ss=typeof document<"u"?document:null;function Lt(e=null,t={target:ss,actInsideInputWithModifier:!0}){const[n,o]=S.useState(!1),r=S.useRef(!1),a=S.useRef(new Set([])),[i,s]=S.useMemo(()=>{if(e!==null){const l=(Array.isArray(e)?e:[e]).filter(d=>typeof d=="string").map(d=>d.replace("+",`
`).replace(`

`,`
+`).split(`
`)),c=l.reduce((d,u)=>d.concat(...u),[]);return[l,c]}return[[],[]]},[e]);return S.useEffect(()=>{const l=(t==null?void 0:t.target)||ss;if(e!==null){const c=f=>{if(r.current=f.ctrlKey||f.metaKey||f.shiftKey,(!r.current||r.current&&!t.actInsideInputWithModifier)&&Xo(f))return!1;const p=cs(f.code,s);a.current.add(f[p]),ls(i,a.current,!1)&&(f.preventDefault(),o(!0))},d=f=>{if((!r.current||r.current&&!t.actInsideInputWithModifier)&&Xo(f))return!1;const p=cs(f.code,s);ls(i,a.current,!0)?(o(!1),a.current.clear()):a.current.delete(f[p]),f.key==="Meta"&&a.current.clear(),r.current=!1},u=()=>{a.current.clear(),o(!1)};return l==null||l.addEventListener("keydown",c),l==null||l.addEventListener("keyup",d),window.addEventListener("blur",u),window.addEventListener("contextmenu",u),()=>{l==null||l.removeEventListener("keydown",c),l==null||l.removeEventListener("keyup",d),window.removeEventListener("blur",u),window.removeEventListener("contextmenu",u)}}},[e,o]),n}function ls(e,t,n){return e.filter(o=>n||o.length===t.size).some(o=>o.every(r=>t.has(r)))}function cs(e,t){return t.includes(e)?"code":"key"}const Eg=()=>{const e=ne();return S.useMemo(()=>({zoomIn:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomOut:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1/1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomTo:(t,n)=>{const{panZoom:o}=e.getState();return o?o.scaleTo(t,{duration:n==null?void 0:n.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(t,n)=>{const{transform:[o,r,a],panZoom:i}=e.getState();return i?(await i.setViewport({x:t.x??o,y:t.y??r,zoom:t.zoom??a},{duration:n==null?void 0:n.duration}),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[t,n,o]=e.getState().transform;return{x:t,y:n,zoom:o}},fitView:t=>{const{nodeLookup:n,minZoom:o,maxZoom:r,panZoom:a,domNode:i}=e.getState();if(!a||!i)return Promise.resolve(!1);const s=Ho(n,t),{width:l,height:c}=An(i);return Fo({nodes:s,width:l,height:c,minZoom:o,maxZoom:r,panZoom:a},t)},setCenter:async(t,n,o)=>{const{width:r,height:a,maxZoom:i,panZoom:s}=e.getState(),l=typeof(o==null?void 0:o.zoom)<"u"?o.zoom:i,c=r/2-t*l,d=a/2-n*l;return s?(await s.setViewport({x:c,y:d,zoom:l},{duration:o==null?void 0:o.duration}),Promise.resolve(!0)):Promise.resolve(!1)},fitBounds:async(t,n)=>{const{width:o,height:r,minZoom:a,maxZoom:i,panZoom:s}=e.getState(),l=Zo(t,o,r,a,i,(n==null?void 0:n.padding)??.1);return s?(await s.setViewport(l,{duration:n==null?void 0:n.duration}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(t,n={snapToGrid:!0})=>{const{transform:o,snapGrid:r,domNode:a}=e.getState();if(!a)return t;const{x:i,y:s}=a.getBoundingClientRect(),l={x:t.x-i,y:t.y-s};return Dt(l,o,n.snapToGrid,r)},flowToScreenPosition:t=>{const{transform:n,domNode:o}=e.getState();if(!o)return t;const{x:r,y:a}=o.getBoundingClientRect(),i=bi(t,n);return{x:i.x+r,y:i.y+a}}}),[])};function ds(e,t){const n=[],o=new Map,r=[];for(const a of e)if(a.type==="add"){r.push(a);continue}else if(a.type==="remove"||a.type==="replace")o.set(a.id,[a]);else{const i=o.get(a.id);i?i.push(a):o.set(a.id,[a])}for(const a of t){const i=o.get(a.id);if(!i){n.push(a);continue}if(i[0].type==="remove")continue;if(i[0].type==="replace"){n.push({...i[0].item});continue}const s={...a};for(const l of i)kg(l,s);n.push(s)}return r.length&&r.forEach(a=>{a.index!==void 0?n.splice(a.index,0,{...a.item}):n.push({...a.item})}),n}function kg(e,t){switch(e.type){case"select":{t.selected=e.selected;break}case"position":{typeof e.position<"u"&&(t.position=e.position),typeof e.dragging<"u"&&(t.dragging=e.dragging);break}case"dimensions":{typeof e.dimensions<"u"&&(t.measured??(t.measured={}),t.measured.width=e.dimensions.width,t.measured.height=e.dimensions.height,e.setAttributes&&(t.width=e.dimensions.width,t.height=e.dimensions.height)),typeof e.resizing=="boolean"&&(t.resizing=e.resizing);break}}}Ye=function(e,t){return ds(e,t)};function $t(e,t){return ds(e,t)}function Ue(e,t){return{id:e,type:"select",selected:t}}function dt(e,t=new Set,n=!1){const o=[];for(const[r,a]of e){const i=t.has(r);!(a.selected===void 0&&!i)&&a.selected!==i&&(n&&(a.selected=i),o.push(Ue(a.id,i)))}return o}function us({items:e=[],lookup:t}){var r;const n=[],o=new Map(e.map(a=>[a.id,a]));for(const[a,i]of e.entries()){const s=t.get(i.id),l=((r=s==null?void 0:s.internals)==null?void 0:r.userNode)??s;l!==void 0&&l!==i&&n.push({id:i.id,item:i,type:"replace"}),l===void 0&&n.push({item:i,type:"add",index:a})}for(const[a]of t)o.get(a)===void 0&&n.push({id:a,type:"remove"});return n}function fs(e){return{id:e.id,type:"remove"}}const hs=e=>dp(e),Pg=e=>hi(e);function ps(e){return S.forwardRef(e)}const Mg=typeof window<"u"?S.useLayoutEffect:S.useEffect;function gs(e){const[t,n]=S.useState(BigInt(0)),[o]=S.useState(()=>jg(()=>n(r=>r+BigInt(1))));return Mg(()=>{const r=o.get();r.length&&(e(r),o.reset())},[t]),o}function jg(e){let t=[];return{get:()=>t,reset:()=>{t=[]},push:n=>{t.push(n),e()}}}const ms=S.createContext(null);function Og({children:e}){const t=ne(),n=S.useCallback(s=>{const{nodes:l=[],setNodes:c,hasDefaultNodes:d,onNodesChange:u,nodeLookup:f}=t.getState();let p=l;for(const y of s)p=typeof y=="function"?y(p):y;d?c(p):u&&u(us({items:p,lookup:f}))},[]),o=gs(n),r=S.useCallback(s=>{const{edges:l=[],setEdges:c,hasDefaultEdges:d,onEdgesChange:u,edgeLookup:f}=t.getState();let p=l;for(const y of s)p=typeof y=="function"?y(p):y;d?c(p):u&&u(us({items:p,lookup:f}))},[]),a=gs(r),i=S.useMemo(()=>({nodeQueue:o,edgeQueue:a}),[]);return h.jsx(ms.Provider,{value:i,children:e})}function Ig(){const e=S.useContext(ms);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}const Ag=e=>!!e.panZoom;tn=function(){const e=Eg(),t=ne(),n=Ig(),o=ee(Ag),r=S.useMemo(()=>{const a=u=>t.getState().nodeLookup.get(u),i=u=>{n.nodeQueue.push(u)},s=u=>{n.edgeQueue.push(u)},l=u=>{var g,w;const{nodeLookup:f,nodeOrigin:p}=t.getState(),y=hs(u)?u:f.get(u.id),m=y.parentId?_i(y.position,y.measured,y.parentId,f,p):y.position,b={id:y.id,position:m,width:((g=y.measured)==null?void 0:g.width)??y.width,height:((w=y.measured)==null?void 0:w.height)??y.height,data:y.data};return it(b)},c=(u,f,p={replace:!1})=>{i(y=>y.map(m=>{if(m.id===u){const b=typeof f=="function"?f(m):f;return p.replace&&hs(b)?b:{...m,...b}}return m}))},d=(u,f,p={replace:!1})=>{s(y=>y.map(m=>{if(m.id===u){const b=typeof f=="function"?f(m):f;return p.replace&&Pg(b)?b:{...m,...b}}return m}))};return{getNodes:()=>t.getState().nodes.map(u=>({...u})),getNode:u=>{var f;return(f=a(u))==null?void 0:f.internals.userNode},getInternalNode:a,getEdges:()=>{const{edges:u=[]}=t.getState();return u.map(f=>({...f}))},getEdge:u=>t.getState().edgeLookup.get(u),setNodes:i,setEdges:s,addNodes:u=>{const f=Array.isArray(u)?u:[u];n.nodeQueue.push(p=>[...p,...f])},addEdges:u=>{const f=Array.isArray(u)?u:[u];n.edgeQueue.push(p=>[...p,...f])},toObject:()=>{const{nodes:u=[],edges:f=[],transform:p}=t.getState(),[y,m,b]=p;return{nodes:u.map(g=>({...g})),edges:f.map(g=>({...g})),viewport:{x:y,y:m,zoom:b}}},deleteElements:async({nodes:u=[],edges:f=[]})=>{const{nodes:p,edges:y,onNodesDelete:m,onEdgesDelete:b,triggerNodeChanges:g,triggerEdgeChanges:w,onDelete:x,onBeforeDelete:v}=t.getState(),{nodes:C,edges:I}=await hp({nodesToRemove:u,edgesToRemove:f,nodes:p,edges:y,onBeforeDelete:v}),k=I.length>0,O=C.length>0;if(k){const A=I.map(fs);b==null||b(I),w(A)}if(O){const A=C.map(fs);m==null||m(C),g(A)}return(O||k)&&(x==null||x({nodes:C,edges:I})),{deletedNodes:C,deletedEdges:I}},getIntersectingNodes:(u,f=!0,p)=>{const y=wi(u),m=y?u:l(u),b=p!==void 0;return m?(p||t.getState().nodes).filter(g=>{const w=t.getState().nodeLookup.get(g.id);if(w&&!y&&(g.id===u.id||!w.internals.positionAbsolute))return!1;const x=it(b?g:w),v=Rt(x,m);return f&&v>0||v>=m.width*m.height}):[]},isNodeIntersecting:(u,f,p=!0)=>{const y=wi(u)?u:l(u);if(!y)return!1;const m=Rt(y,f);return p&&m>0||m>=y.width*y.height},updateNode:c,updateNodeData:(u,f,p={replace:!1})=>{c(u,y=>{const m=typeof f=="function"?f(y):f;return p.replace?{...y,data:m}:{...y,data:{...y.data,...m}}},p)},updateEdge:d,updateEdgeData:(u,f,p={replace:!1})=>{d(u,y=>{const m=typeof f=="function"?f(y):f;return p.replace?{...y,data:m}:{...y,data:{...y.data,...m}}},p)},getNodesBounds:u=>{const{nodeLookup:f,nodeOrigin:p}=t.getState();return up(u,{nodeLookup:f,nodeOrigin:p})},getHandleConnections:({type:u,id:f,nodeId:p})=>{var y;return Array.from(((y=t.getState().connectionLookup.get(`${p}-${u}-${f??null}`))==null?void 0:y.values())??[])}}},[]);return S.useMemo(()=>({...r,...e,viewportInitialized:o}),[o])};const ys=e=>e.selected,Rg={actInsideInputWithModifier:!1},Dg=typeof window<"u"?window:void 0;function zg({deleteKeyCode:e,multiSelectionKeyCode:t}){const n=ne(),{deleteElements:o}=tn(),r=Lt(e,Rg),a=Lt(t,{target:Dg});S.useEffect(()=>{if(r){const{edges:i,nodes:s}=n.getState();o({nodes:s.filter(ys),edges:i.filter(ys)}),n.setState({nodesSelectionActive:!1})}},[r]),S.useEffect(()=>{n.setState({multiSelectionActive:a})},[a])}function Tg(e){const t=ne();S.useEffect(()=>{const n=()=>{var r,a;if(!e.current)return!1;const o=An(e.current);(o.height===0||o.width===0)&&((a=(r=t.getState()).onError)==null||a.call(r,"004",Oe.error004())),t.setState({width:o.width||500,height:o.height||500})};if(e.current){n(),window.addEventListener("resize",n);const o=new ResizeObserver(()=>n());return o.observe(e.current),()=>{window.removeEventListener("resize",n),o&&e.current&&o.unobserve(e.current)}}},[])}const $n={position:"absolute",width:"100%",height:"100%",top:0,left:0},Lg=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib});function $g({onPaneContextMenu:e,zoomOnScroll:t=!0,zoomOnPinch:n=!0,panOnScroll:o=!1,panOnScrollSpeed:r=.5,panOnScrollMode:a=Ze.Free,zoomOnDoubleClick:i=!0,panOnDrag:s=!0,defaultViewport:l,translateExtent:c,minZoom:d,maxZoom:u,zoomActivationKeyCode:f,preventScrolling:p=!0,children:y,noWheelClassName:m,noPanClassName:b,onViewportChange:g,isControlledViewport:w,paneClickDistance:x}){const v=ne(),C=S.useRef(null),{userSelectionActive:I,lib:k}=ee(Lg,oe),O=Lt(f),A=S.useRef();Tg(C);const R=S.useCallback($=>{g==null||g({x:$[0],y:$[1],zoom:$[2]}),w||v.setState({transform:$})},[g,w]);return S.useEffect(()=>{if(C.current){A.current=Xp({domNode:C.current,minZoom:d,maxZoom:u,translateExtent:c,viewport:l,paneClickDistance:x,onDraggingChange:_=>v.setState({paneDragging:_}),onPanZoomStart:(_,P)=>{const{onViewportChangeStart:N,onMoveStart:j}=v.getState();j==null||j(_,P),N==null||N(P)},onPanZoom:(_,P)=>{const{onViewportChange:N,onMove:j}=v.getState();j==null||j(_,P),N==null||N(P)},onPanZoomEnd:(_,P)=>{const{onViewportChangeEnd:N,onMoveEnd:j}=v.getState();j==null||j(_,P),N==null||N(P)}});const{x:$,y:z,zoom:T}=A.current.getViewport();return v.setState({panZoom:A.current,transform:[$,z,T],domNode:C.current.closest(".react-flow")}),()=>{var _;(_=A.current)==null||_.destroy()}}},[]),S.useEffect(()=>{var $;($=A.current)==null||$.update({onPaneContextMenu:e,zoomOnScroll:t,zoomOnPinch:n,panOnScroll:o,panOnScrollSpeed:r,panOnScrollMode:a,zoomOnDoubleClick:i,panOnDrag:s,zoomActivationKeyPressed:O,preventScrolling:p,noPanClassName:b,userSelectionActive:I,noWheelClassName:m,lib:k,onTransformChange:R})},[e,t,n,o,r,a,i,s,O,p,b,I,m,k,R]),h.jsx("div",{className:"react-flow__renderer",ref:C,style:$n,children:y})}const Vg=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function Bg(){const{userSelectionActive:e,userSelectionRect:t}=ee(Vg,oe);return e&&t?h.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}const rr=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},Hg=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging});function Fg({isSelecting:e,selectionKeyPressed:t,selectionMode:n=Ot.Full,panOnDrag:o,selectionOnDrag:r,onSelectionStart:a,onSelectionEnd:i,onPaneClick:s,onPaneContextMenu:l,onPaneScroll:c,onPaneMouseEnter:d,onPaneMouseMove:u,onPaneMouseLeave:f,children:p}){const y=S.useRef(null),m=ne(),b=S.useRef(0),g=S.useRef(0),w=S.useRef(),x=S.useRef(new Map),{userSelectionActive:v,elementsSelectable:C,dragging:I}=ee(Hg,oe),k=C&&(e||v),O=S.useRef(!1),A=S.useRef(!1),R=()=>{m.setState({userSelectionActive:!1,userSelectionRect:null}),b.current=0,g.current=0},$=E=>{if(O.current){O.current=!1;return}s==null||s(E),m.getState().resetSelectedElements(),m.setState({nodesSelectionActive:!1})},z=E=>{if(Array.isArray(o)&&(o!=null&&o.includes(2))){E.preventDefault();return}l==null||l(E)},T=c?E=>c(E):void 0,_=E=>{var F,Y,q,V;const{resetSelectedElements:M,domNode:D,edgeLookup:B}=m.getState();if(w.current=D==null?void 0:D.getBoundingClientRect(),!C||!e||E.button!==0||E.target!==y.current||!w.current)return;(Y=(F=E.target)==null?void 0:F.setPointerCapture)==null||Y.call(F,E.pointerId),A.current=!0,O.current=!1,x.current=new Map;for(const[L,K]of B)x.current.set(K.source,((q=x.current.get(K.source))==null?void 0:q.add(L))||new Set([L])),x.current.set(K.target,((V=x.current.get(K.target))==null?void 0:V.add(L))||new Set([L]));const{x:H,y:G}=Ae(E.nativeEvent,w.current);M(),m.setState({userSelectionRect:{width:0,height:0,startX:H,startY:G,x:H,y:G}}),a==null||a(E)},P=E=>{const{userSelectionRect:M,edgeLookup:D,transform:B,nodeLookup:H,triggerNodeChanges:G,triggerEdgeChanges:F}=m.getState();if(!w.current||!M)return;O.current=!0;const{x:Y,y:q}=Ae(E.nativeEvent,w.current),{startX:V,startY:L}=M,K={startX:V,startY:L,x:Y<V?Y:V,y:q<L?q:L,width:Math.abs(Y-V),height:Math.abs(q-L)},Z=pi(H,K,B,n===Ot.Partial,!0),W=new Set,X=new Set;for(const J of Z){X.add(J.id);const te=x.current.get(J.id);if(te)for(const ue of te)W.add(ue)}if(b.current!==X.size){b.current=X.size;const J=dt(H,X,!0);G(J)}if(g.current!==W.size){g.current=W.size;const J=dt(D,W);F(J)}m.setState({userSelectionRect:K,userSelectionActive:!0,nodesSelectionActive:!1})},N=E=>{var D,B;if(E.button!==0||!A.current)return;(B=(D=E.target)==null?void 0:D.releasePointerCapture)==null||B.call(D,E.pointerId);const{userSelectionRect:M}=m.getState();!v&&M&&E.target===y.current&&($==null||$(E)),b.current>0&&m.setState({nodesSelectionActive:!0}),R(),i==null||i(E),(t||r)&&(O.current=!1),A.current=!1},j=o===!0||Array.isArray(o)&&o.includes(0);return h.jsxs("div",{className:ae(["react-flow__pane",{draggable:j,dragging:I,selection:e}]),onClick:k?void 0:rr($,y),onContextMenu:rr(z,y),onWheel:rr(T,y),onPointerEnter:k?void 0:d,onPointerDown:k?_:u,onPointerMove:k?P:u,onPointerUp:k?N:void 0,onPointerLeave:f,ref:y,style:$n,children:[p,h.jsx(Bg,{})]})}function ar({id:e,store:t,unselect:n=!1,nodeRef:o}){const{addSelectedNodes:r,unselectNodesAndEdges:a,multiSelectionActive:i,nodeLookup:s,onError:l}=t.getState(),c=s.get(e);if(!c){l==null||l("012",Oe.error012(e));return}t.setState({nodesSelectionActive:!1}),c.selected?(n||c.selected&&i)&&(a({nodes:[c],edges:[]}),requestAnimationFrame(()=>{var d;return(d=o==null?void 0:o.current)==null?void 0:d.blur()})):r([e])}function xs({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:o,nodeId:r,isSelectable:a,nodeClickDistance:i}){const s=ne(),[l,c]=S.useState(!1),d=S.useRef();return S.useEffect(()=>{d.current=Ip({getStoreItems:()=>s.getState(),onNodeMouseDown:u=>{ar({id:u,store:s,nodeRef:e})},onDragStart:()=>{c(!0)},onDragStop:()=>{c(!1)}})},[]),S.useEffect(()=>{var u,f;if(t)(u=d.current)==null||u.destroy();else if(e.current)return(f=d.current)==null||f.update({noDragClassName:n,handleSelector:o,domNode:e.current,isSelectable:a,nodeId:r,nodeClickDistance:i}),()=>{var p;(p=d.current)==null||p.destroy()}},[n,o,t,a,e,r]),l}const Yg=e=>t=>t.selected&&(t.draggable||e&&typeof t.draggable>"u");function vs(){const e=ne();return S.useCallback(t=>{const{nodeExtent:n,snapToGrid:o,snapGrid:r,nodesDraggable:a,onError:i,updateNodePositions:s,nodeLookup:l,nodeOrigin:c}=e.getState(),d=new Map,u=Yg(a),f=o?r[0]:5,p=o?r[1]:5,y=t.direction.x*f*t.factor,m=t.direction.y*p*t.factor;for(const[,b]of l){if(!u(b))continue;let g={x:b.internals.positionAbsolute.x+y,y:b.internals.positionAbsolute.y+m};o&&(g=On(g,r));const{position:w,positionAbsolute:x}=gi({nodeId:b.id,nextPosition:g,nodeLookup:l,nodeExtent:n,nodeOrigin:c,onError:i});b.position=w,b.internals.positionAbsolute=x,d.set(b.id,b)}s(d)},[])}const ir=S.createContext(null),Zg=ir.Provider;ir.Consumer;const sr=()=>S.useContext(ir),Xg=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),Kg=(e,t,n)=>o=>{const{connectionClickStartHandle:r,connectionMode:a,connection:i}=o,{fromHandle:s,toHandle:l,isValid:c}=i,d=(l==null?void 0:l.nodeId)===e&&(l==null?void 0:l.id)===t&&(l==null?void 0:l.type)===n;return{connectingFrom:(s==null?void 0:s.nodeId)===e&&(s==null?void 0:s.id)===t&&(s==null?void 0:s.type)===n,connectingTo:d,clickConnecting:(r==null?void 0:r.nodeId)===e&&(r==null?void 0:r.id)===t&&(r==null?void 0:r.type)===n,isPossibleEndHandle:a===rt.Strict?(s==null?void 0:s.type)!==n:e!==(s==null?void 0:s.nodeId)||t!==(s==null?void 0:s.id),connectionInProcess:!!s,valid:d&&c}};function Wg({type:e="source",position:t=U.Top,isValidConnection:n,isConnectable:o=!0,isConnectableStart:r=!0,isConnectableEnd:a=!0,id:i,onConnect:s,children:l,className:c,onMouseDown:d,onTouchStart:u,...f},p){var _,P;const y=i||null,m=e==="target",b=ne(),g=sr(),{connectOnClick:w,noPanClassName:x,rfId:v}=ee(Xg,oe),{connectingFrom:C,connectingTo:I,clickConnecting:k,isPossibleEndHandle:O,connectionInProcess:A,valid:R}=ee(Kg(g,y,e),oe);g||((P=(_=b.getState()).onError)==null||P.call(_,"010",Oe.error010()));const $=N=>{const{defaultEdgeOptions:j,onConnect:E,hasDefaultEdges:M}=b.getState(),D={...j,...N};if(M){const{edges:B,setEdges:H}=b.getState();H(Oi(D,B))}E==null||E(D),s==null||s(D)},z=N=>{if(!g)return;const j=Ni(N.nativeEvent);if(r&&(j&&N.button===0||!j)){const E=b.getState();tr.onPointerDown(N.nativeEvent,{autoPanOnConnect:E.autoPanOnConnect,connectionMode:E.connectionMode,connectionRadius:E.connectionRadius,domNode:E.domNode,nodeLookup:E.nodeLookup,lib:E.lib,isTarget:m,handleId:y,nodeId:g,flowId:E.rfId,panBy:E.panBy,cancelConnection:E.cancelConnection,onConnectStart:E.onConnectStart,onConnectEnd:E.onConnectEnd,updateConnection:E.updateConnection,onConnect:$,isValidConnection:n||E.isValidConnection,getTransform:()=>b.getState().transform,getFromHandle:()=>b.getState().connection.fromHandle,autoPanSpeed:E.autoPanSpeed})}j?d==null||d(N):u==null||u(N)},T=N=>{const{onClickConnectStart:j,onClickConnectEnd:E,connectionClickStartHandle:M,connectionMode:D,isValidConnection:B,lib:H,rfId:G,nodeLookup:F,connection:Y}=b.getState();if(!g||!M&&!r)return;if(!M){j==null||j(N.nativeEvent,{nodeId:g,handleId:y,handleType:e}),b.setState({connectionClickStartHandle:{nodeId:g,type:e,id:y}});return}const q=Ci(N.target),V=n||B,{connection:L,isValid:K}=tr.isValid(N.nativeEvent,{handle:{nodeId:g,id:y,type:e},connectionMode:D,fromNodeId:M.nodeId,fromHandleId:M.id||null,fromType:M.type,isValidConnection:V,flowId:G,doc:q,lib:H,nodeLookup:F});K&&L&&$(L);const Z=structuredClone(Y);delete Z.inProgress,Z.toPosition=Z.toHandle?Z.toHandle.position:null,E==null||E(N,Z),b.setState({connectionClickStartHandle:null})};return h.jsx("div",{"data-handleid":y,"data-nodeid":g,"data-handlepos":t,"data-id":`${v}-${g}-${y}-${e}`,className:ae(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",x,c,{source:!m,target:m,connectable:o,connectablestart:r,connectableend:a,clickconnecting:k,connectingfrom:C,connectingto:I,valid:R,connectionindicator:o&&(!A||O)&&(A?a:r)}]),onMouseDown:z,onTouchStart:z,onClick:w?T:void 0,ref:p,...f,children:l})}yt=S.memo(ps(Wg));function Gg({data:e,isConnectable:t,sourcePosition:n=U.Bottom}){return h.jsxs(h.Fragment,{children:[e==null?void 0:e.label,h.jsx(yt,{type:"source",position:n,isConnectable:t})]})}function Ug({data:e,isConnectable:t,targetPosition:n=U.Top,sourcePosition:o=U.Bottom}){return h.jsxs(h.Fragment,{children:[h.jsx(yt,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,h.jsx(yt,{type:"source",position:o,isConnectable:t})]})}function qg(){return null}function Qg({data:e,isConnectable:t,targetPosition:n=U.Top}){return h.jsxs(h.Fragment,{children:[h.jsx(yt,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label]})}const Vn={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},ws={input:Gg,default:Ug,output:Qg,group:qg};function Jg(e){var t,n,o,r;return e.internals.handleBounds===void 0?{width:e.width??e.initialWidth??((t=e.style)==null?void 0:t.width),height:e.height??e.initialHeight??((n=e.style)==null?void 0:n.height)}:{width:e.width??((o=e.style)==null?void 0:o.width),height:e.height??((r=e.style)==null?void 0:r.height)}}const em=e=>{const{width:t,height:n,x:o,y:r}=At(e.nodeLookup,{filter:a=>!!a.selected});return{width:be(t)?t:null,height:be(n)?n:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${o}px,${r}px)`}};function tm({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const o=ne(),{width:r,height:a,transformString:i,userSelectionActive:s}=ee(em,oe),l=vs(),c=S.useRef(null);if(S.useEffect(()=>{var f;n||((f=c.current)==null||f.focus({preventScroll:!0}))},[n]),xs({nodeRef:c}),s||!r||!a)return null;const d=e?f=>{const p=o.getState().nodes.filter(y=>y.selected);e(f,p)}:void 0,u=f=>{Object.prototype.hasOwnProperty.call(Vn,f.key)&&l({direction:Vn[f.key],factor:f.shiftKey?4:1})};return h.jsx("div",{className:ae(["react-flow__nodesselection","react-flow__container",t]),style:{transform:i},children:h.jsx("div",{ref:c,className:"react-flow__nodesselection-rect",onContextMenu:d,tabIndex:n?void 0:-1,onKeyDown:n?void 0:u,style:{width:r,height:a}})})}const bs=typeof window<"u"?window:void 0,nm=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function Ss({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:o,onPaneMouseLeave:r,onPaneContextMenu:a,onPaneScroll:i,paneClickDistance:s,deleteKeyCode:l,selectionKeyCode:c,selectionOnDrag:d,selectionMode:u,onSelectionStart:f,onSelectionEnd:p,multiSelectionKeyCode:y,panActivationKeyCode:m,zoomActivationKeyCode:b,elementsSelectable:g,zoomOnScroll:w,zoomOnPinch:x,panOnScroll:v,panOnScrollSpeed:C,panOnScrollMode:I,zoomOnDoubleClick:k,panOnDrag:O,defaultViewport:A,translateExtent:R,minZoom:$,maxZoom:z,preventScrolling:T,onSelectionContextMenu:_,noWheelClassName:P,noPanClassName:N,disableKeyboardA11y:j,onViewportChange:E,isControlledViewport:M}){const{nodesSelectionActive:D,userSelectionActive:B}=ee(nm),H=Lt(c,{target:bs}),G=Lt(m,{target:bs}),F=G||O,Y=G||v,q=d&&F!==!0,V=H||B||q;return zg({deleteKeyCode:l,multiSelectionKeyCode:y}),h.jsx($g,{onPaneContextMenu:a,elementsSelectable:g,zoomOnScroll:w,zoomOnPinch:x,panOnScroll:Y,panOnScrollSpeed:C,panOnScrollMode:I,zoomOnDoubleClick:k,panOnDrag:!H&&F,defaultViewport:A,translateExtent:R,minZoom:$,maxZoom:z,zoomActivationKeyCode:b,preventScrolling:T,noWheelClassName:P,noPanClassName:N,onViewportChange:E,isControlledViewport:M,paneClickDistance:s,children:h.jsxs(Fg,{onSelectionStart:f,onSelectionEnd:p,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:o,onPaneMouseLeave:r,onPaneContextMenu:a,onPaneScroll:i,panOnDrag:F,isSelecting:!!V,selectionMode:u,selectionKeyPressed:H,selectionOnDrag:q,children:[e,D&&h.jsx(tm,{onSelectionContextMenu:_,noPanClassName:N,disableKeyboardA11y:j})]})})}Ss.displayName="FlowRenderer";const om=S.memo(Ss),rm=e=>t=>e?pi(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map(n=>n.id):Array.from(t.nodeLookup.keys());function am(e){return ee(S.useCallback(rm(e),[e]),oe)}const im=e=>e.updateNodeInternals;function sm(){const e=ee(im),[t]=S.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(n=>{const o=new Map;n.forEach(r=>{const a=r.target.getAttribute("data-id");o.set(a,{id:a,nodeElement:r.target,force:!0})}),e(o)}));return S.useEffect(()=>()=>{t==null||t.disconnect()},[t]),t}function lm({node:e,nodeType:t,hasDimensions:n,resizeObserver:o}){const r=ne(),a=S.useRef(null),i=S.useRef(null),s=S.useRef(e.sourcePosition),l=S.useRef(e.targetPosition),c=S.useRef(t),d=n&&!!e.internals.handleBounds;return S.useEffect(()=>{a.current&&!e.hidden&&(!d||i.current!==a.current)&&(i.current&&(o==null||o.unobserve(i.current)),o==null||o.observe(a.current),i.current=a.current)},[d,e.hidden]),S.useEffect(()=>()=>{i.current&&(o==null||o.unobserve(i.current),i.current=null)},[]),S.useEffect(()=>{if(a.current){const u=c.current!==t,f=s.current!==e.sourcePosition,p=l.current!==e.targetPosition;(u||f||p)&&(c.current=t,s.current=e.sourcePosition,l.current=e.targetPosition,r.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:a.current,force:!0}]])))}},[e.id,t,e.sourcePosition,e.targetPosition]),a}function cm({id:e,onClick:t,onMouseEnter:n,onMouseMove:o,onMouseLeave:r,onContextMenu:a,onDoubleClick:i,nodesDraggable:s,elementsSelectable:l,nodesConnectable:c,nodesFocusable:d,resizeObserver:u,noDragClassName:f,noPanClassName:p,disableKeyboardA11y:y,rfId:m,nodeTypes:b,nodeExtent:g,nodeClickDistance:w,onError:x}){const{node:v,internals:C,isParent:I}=ee(L=>{const K=L.nodeLookup.get(e),Z=L.parentLookup.has(e);return{node:K,internals:K.internals,isParent:Z}},oe);let k=v.type||"default",O=(b==null?void 0:b[k])||ws[k];O===void 0&&(x==null||x("003",Oe.error003(k)),k="default",O=ws.default);const A=!!(v.draggable||s&&typeof v.draggable>"u"),R=!!(v.selectable||l&&typeof v.selectable>"u"),$=!!(v.connectable||c&&typeof v.connectable>"u"),z=!!(v.focusable||d&&typeof v.focusable>"u"),T=ne(),_=Si(v),P=lm({node:v,nodeType:k,hasDimensions:_,resizeObserver:u}),N=xs({nodeRef:P,disabled:v.hidden||!A,noDragClassName:f,handleSelector:v.dragHandle,nodeId:e,isSelectable:R,nodeClickDistance:w}),j=vs();if(v.hidden)return null;const E=Ie(v),M=Jg(v),D=R||A||t||n||o||r,B=n?L=>n(L,{...C.userNode}):void 0,H=o?L=>o(L,{...C.userNode}):void 0,G=r?L=>r(L,{...C.userNode}):void 0,F=a?L=>a(L,{...C.userNode}):void 0,Y=i?L=>i(L,{...C.userNode}):void 0,q=L=>{const{selectNodesOnDrag:K,nodeDragThreshold:Z}=T.getState();R&&(!K||!A||Z>0)&&ar({id:e,store:T,nodeRef:P}),t&&t(L,{...C.userNode})},V=L=>{if(!(Xo(L.nativeEvent)||y))if(li.includes(L.key)&&R){const K=L.key==="Escape";ar({id:e,store:T,unselect:K,nodeRef:P})}else A&&v.selected&&Object.prototype.hasOwnProperty.call(Vn,L.key)&&(T.setState({ariaLiveMessage:`Moved selected node ${L.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~C.positionAbsolute.x}, y: ${~~C.positionAbsolute.y}`}),j({direction:Vn[L.key],factor:L.shiftKey?4:1}))};return h.jsx("div",{className:ae(["react-flow__node",`react-flow__node-${k}`,{[p]:A},v.className,{selected:v.selected,selectable:R,parent:I,draggable:A,dragging:N}]),ref:P,style:{zIndex:C.z,transform:`translate(${C.positionAbsolute.x}px,${C.positionAbsolute.y}px)`,pointerEvents:D?"all":"none",visibility:_?"visible":"hidden",...v.style,...M},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:B,onMouseMove:H,onMouseLeave:G,onContextMenu:F,onClick:q,onDoubleClick:Y,onKeyDown:z?V:void 0,tabIndex:z?0:void 0,role:z?"button":void 0,"aria-describedby":y?void 0:`${ts}-${m}`,"aria-label":v.ariaLabel,children:h.jsx(Zg,{value:e,children:h.jsx(O,{id:e,data:v.data,type:k,positionAbsoluteX:C.positionAbsolute.x,positionAbsoluteY:C.positionAbsolute.y,selected:v.selected,selectable:R,draggable:A,deletable:v.deletable??!0,isConnectable:$,sourcePosition:v.sourcePosition,targetPosition:v.targetPosition,dragging:N,dragHandle:v.dragHandle,zIndex:C.z,parentId:v.parentId,...E})})})}const dm=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function _s(e){const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:o,elementsSelectable:r,onError:a}=ee(dm,oe),i=am(e.onlyRenderVisibleElements),s=sm();return h.jsx("div",{className:"react-flow__nodes",style:$n,children:i.map(l=>h.jsx(cm,{id:l,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:s,nodesDraggable:t,nodesConnectable:n,nodesFocusable:o,elementsSelectable:r,nodeClickDistance:e.nodeClickDistance,onError:a},l))})}_s.displayName="NodeRenderer";const um=S.memo(_s);function fm(e){return ee(S.useCallback(t=>{if(!e)return t.edges.map(o=>o.id);const n=[];if(t.width&&t.height)for(const o of t.edges){const r=t.nodeLookup.get(o.source),a=t.nodeLookup.get(o.target);r&&a&&yp({sourceNode:r,targetNode:a,width:t.width,height:t.height,transform:t.transform})&&n.push(o.id)}return n},[e]),oe)}const hm=({color:e="none",strokeWidth:t=1})=>h.jsx("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),pm=({color:e="none",strokeWidth:t=1})=>h.jsx("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),Cs={[kn.Arrow]:hm,[kn.ArrowClosed]:pm};function gm(e){const t=ne();return S.useMemo(()=>{var n,o;return Object.prototype.hasOwnProperty.call(Cs,e)?Cs[e]:((o=(n=t.getState()).onError)==null||o.call(n,"009",Oe.error009(e)),null)},[e])}const mm=({id:e,type:t,color:n,width:o=12.5,height:r=12.5,markerUnits:a="strokeWidth",strokeWidth:i,orient:s="auto-start-reverse"})=>{const l=gm(t);return l?h.jsx("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${o}`,markerHeight:`${r}`,viewBox:"-10 -10 20 20",markerUnits:a,orient:s,refX:"0",refY:"0",children:h.jsx(l,{color:n,strokeWidth:i})}):null},Ns=({defaultColor:e,rfId:t})=>{const n=ee(a=>a.edges),o=ee(a=>a.defaultEdgeOptions),r=S.useMemo(()=>Cp(n,{id:t,defaultColor:e,defaultMarkerStart:o==null?void 0:o.markerStart,defaultMarkerEnd:o==null?void 0:o.markerEnd}),[n,o,t,e]);return r.length?h.jsx("svg",{className:"react-flow__marker",children:h.jsx("defs",{children:r.map(a=>h.jsx(mm,{id:a.id,type:a.type,color:a.color,width:a.width,height:a.height,markerUnits:a.markerUnits,strokeWidth:a.strokeWidth,orient:a.orient},a.id))})}):null};Ns.displayName="MarkerDefinitions";var ym=S.memo(Ns);function Es({x:e,y:t,label:n,labelStyle:o={},labelShowBg:r=!0,labelBgStyle:a={},labelBgPadding:i=[2,4],labelBgBorderRadius:s=2,children:l,className:c,...d}){const[u,f]=S.useState({x:1,y:0,width:0,height:0}),p=ae(["react-flow__edge-textwrapper",c]),y=S.useRef(null);return S.useEffect(()=>{if(y.current){const m=y.current.getBBox();f({x:m.x,y:m.y,width:m.width,height:m.height})}},[n]),typeof n>"u"||!n?null:h.jsxs("g",{transform:`translate(${e-u.width/2} ${t-u.height/2})`,className:p,visibility:u.width?"visible":"hidden",...d,children:[r&&h.jsx("rect",{width:u.width+2*i[0],x:-i[0],y:-i[1],height:u.height+2*i[1],className:"react-flow__edge-textbg",style:a,rx:s,ry:s}),h.jsx("text",{className:"react-flow__edge-text",y:u.height/2,dy:"0.3em",ref:y,style:o,children:n}),l]})}Es.displayName="EdgeText";const xm=S.memo(Es);function Bn({id:e,path:t,labelX:n,labelY:o,label:r,labelStyle:a,labelShowBg:i,labelBgStyle:s,labelBgPadding:l,labelBgBorderRadius:c,style:d,markerEnd:u,markerStart:f,className:p,interactionWidth:y=20}){return h.jsxs(h.Fragment,{children:[h.jsx("path",{id:e,style:d,d:t,fill:"none",className:ae(["react-flow__edge-path",p]),markerEnd:u,markerStart:f}),y&&h.jsx("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:y,className:"react-flow__edge-interaction"}),r&&be(n)&&be(o)?h.jsx(xm,{x:n,y:o,label:r,labelStyle:a,labelShowBg:i,labelBgStyle:s,labelBgPadding:l,labelBgBorderRadius:c}):null]})}function ks({pos:e,x1:t,y1:n,x2:o,y2:r}){return e===U.Left||e===U.Right?[.5*(t+o),n]:[t,.5*(n+r)]}function Ps({sourceX:e,sourceY:t,sourcePosition:n=U.Bottom,targetX:o,targetY:r,targetPosition:a=U.Top}){const[i,s]=ks({pos:n,x1:e,y1:t,x2:o,y2:r}),[l,c]=ks({pos:a,x1:o,y1:r,x2:e,y2:t}),[d,u,f,p]=ki({sourceX:e,sourceY:t,targetX:o,targetY:r,sourceControlX:i,sourceControlY:s,targetControlX:l,targetControlY:c});return[`M${e},${t} C${i},${s} ${l},${c} ${o},${r}`,d,u,f,p]}function Ms(e){return S.memo(({id:t,sourceX:n,sourceY:o,targetX:r,targetY:a,sourcePosition:i=U.Bottom,targetPosition:s=U.Top,label:l,labelStyle:c,labelShowBg:d,labelBgStyle:u,labelBgPadding:f,labelBgBorderRadius:p,style:y,markerEnd:m,markerStart:b,interactionWidth:g})=>{const[w,x,v]=Ps({sourceX:n,sourceY:o,sourcePosition:i,targetX:r,targetY:a,targetPosition:s}),C=e.isInternal?void 0:t;return h.jsx(Bn,{id:C,path:w,labelX:x,labelY:v,label:l,labelStyle:c,labelShowBg:d,labelBgStyle:u,labelBgPadding:f,labelBgBorderRadius:p,style:y,markerEnd:m,markerStart:b,interactionWidth:g})})}const vm=Ms({isInternal:!1}),js=Ms({isInternal:!0});vm.displayName="SimpleBezierEdge",js.displayName="SimpleBezierEdgeInternal";function Os(e){return S.memo(({id:t,sourceX:n,sourceY:o,targetX:r,targetY:a,label:i,labelStyle:s,labelShowBg:l,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:u,style:f,sourcePosition:p=U.Bottom,targetPosition:y=U.Top,markerEnd:m,markerStart:b,pathOptions:g,interactionWidth:w})=>{const[x,v,C]=Ko({sourceX:n,sourceY:o,sourcePosition:p,targetX:r,targetY:a,targetPosition:y,borderRadius:g==null?void 0:g.borderRadius,offset:g==null?void 0:g.offset}),I=e.isInternal?void 0:t;return h.jsx(Bn,{id:I,path:x,labelX:v,labelY:C,label:i,labelStyle:s,labelShowBg:l,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:u,style:f,markerEnd:m,markerStart:b,interactionWidth:w})})}const Is=Os({isInternal:!1}),As=Os({isInternal:!0});Is.displayName="SmoothStepEdge",As.displayName="SmoothStepEdgeInternal";function Rs(e){return S.memo(({id:t,...n})=>{var r;const o=e.isInternal?void 0:t;return h.jsx(Is,{...n,id:o,pathOptions:S.useMemo(()=>{var a;return{borderRadius:0,offset:(a=n.pathOptions)==null?void 0:a.offset}},[(r=n.pathOptions)==null?void 0:r.offset])})})}const wm=Rs({isInternal:!1}),Ds=Rs({isInternal:!0});wm.displayName="StepEdge",Ds.displayName="StepEdgeInternal";function zs(e){return S.memo(({id:t,sourceX:n,sourceY:o,targetX:r,targetY:a,label:i,labelStyle:s,labelShowBg:l,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:u,style:f,markerEnd:p,markerStart:y,interactionWidth:m})=>{const[b,g,w]=Ii({sourceX:n,sourceY:o,targetX:r,targetY:a}),x=e.isInternal?void 0:t;return h.jsx(Bn,{id:x,path:b,labelX:g,labelY:w,label:i,labelStyle:s,labelShowBg:l,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:u,style:f,markerEnd:p,markerStart:y,interactionWidth:m})})}const bm=zs({isInternal:!1}),Ts=zs({isInternal:!0});bm.displayName="StraightEdge",Ts.displayName="StraightEdgeInternal";function Ls(e){return S.memo(({id:t,sourceX:n,sourceY:o,targetX:r,targetY:a,sourcePosition:i=U.Bottom,targetPosition:s=U.Top,label:l,labelStyle:c,labelShowBg:d,labelBgStyle:u,labelBgPadding:f,labelBgBorderRadius:p,style:y,markerEnd:m,markerStart:b,pathOptions:g,interactionWidth:w})=>{const[x,v,C]=Mi({sourceX:n,sourceY:o,sourcePosition:i,targetX:r,targetY:a,targetPosition:s,curvature:g==null?void 0:g.curvature}),I=e.isInternal?void 0:t;return h.jsx(Bn,{id:I,path:x,labelX:v,labelY:C,label:l,labelStyle:c,labelShowBg:d,labelBgStyle:u,labelBgPadding:f,labelBgBorderRadius:p,style:y,markerEnd:m,markerStart:b,interactionWidth:w})})}const Sm=Ls({isInternal:!1}),$s=Ls({isInternal:!0});Sm.displayName="BezierEdge",$s.displayName="BezierEdgeInternal";const Vs={default:$s,straight:Ts,step:Ds,smoothstep:As,simplebezier:js},Bs={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},_m=(e,t,n)=>n===U.Left?e-t:n===U.Right?e+t:e,Cm=(e,t,n)=>n===U.Top?e-t:n===U.Bottom?e+t:e,Hs="react-flow__edgeupdater";function Fs({position:e,centerX:t,centerY:n,radius:o=10,onMouseDown:r,onMouseEnter:a,onMouseOut:i,type:s}){return h.jsx("circle",{onMouseDown:r,onMouseEnter:a,onMouseOut:i,className:ae([Hs,`${Hs}-${s}`]),cx:_m(t,o,e),cy:Cm(n,o,e),r:o,stroke:"transparent",fill:"transparent"})}function Nm({isReconnectable:e,reconnectRadius:t,edge:n,sourceX:o,sourceY:r,targetX:a,targetY:i,sourcePosition:s,targetPosition:l,onReconnect:c,onReconnectStart:d,onReconnectEnd:u,setReconnecting:f,setUpdateHover:p}){const y=ne(),m=(v,C)=>{if(v.button!==0)return;const{autoPanOnConnect:I,domNode:k,isValidConnection:O,connectionMode:A,connectionRadius:R,lib:$,onConnectStart:z,onConnectEnd:T,cancelConnection:_,nodeLookup:P,rfId:N,panBy:j,updateConnection:E}=y.getState(),M=C.type==="target";f(!0),d==null||d(v,n,C.type);const D=(H,G)=>{f(!1),u==null||u(H,n,C.type,G)},B=H=>c==null?void 0:c(n,H);tr.onPointerDown(v.nativeEvent,{autoPanOnConnect:I,connectionMode:A,connectionRadius:R,domNode:k,handleId:C.id,nodeId:C.nodeId,nodeLookup:P,isTarget:M,edgeUpdaterType:C.type,lib:$,flowId:N,cancelConnection:_,panBy:j,isValidConnection:O,onConnect:B,onConnectStart:z,onConnectEnd:T,onReconnectEnd:D,updateConnection:E,getTransform:()=>y.getState().transform,getFromHandle:()=>y.getState().connection.fromHandle})},b=v=>m(v,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),g=v=>m(v,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),w=()=>p(!0),x=()=>p(!1);return h.jsxs(h.Fragment,{children:[(e===!0||e==="source")&&h.jsx(Fs,{position:s,centerX:o,centerY:r,radius:t,onMouseDown:b,onMouseEnter:w,onMouseOut:x,type:"source"}),(e===!0||e==="target")&&h.jsx(Fs,{position:l,centerX:a,centerY:i,radius:t,onMouseDown:g,onMouseEnter:w,onMouseOut:x,type:"target"})]})}function Em({id:e,edgesFocusable:t,edgesReconnectable:n,elementsSelectable:o,onClick:r,onDoubleClick:a,onContextMenu:i,onMouseEnter:s,onMouseMove:l,onMouseLeave:c,reconnectRadius:d,onReconnect:u,onReconnectStart:f,onReconnectEnd:p,rfId:y,edgeTypes:m,noPanClassName:b,onError:g,disableKeyboardA11y:w}){let x=ee(X=>X.edgeLookup.get(e));const v=ee(X=>X.defaultEdgeOptions);x=v?{...v,...x}:x;let C=x.type||"default",I=(m==null?void 0:m[C])||Vs[C];I===void 0&&(g==null||g("011",Oe.error011(C)),C="default",I=Vs.default);const k=!!(x.focusable||t&&typeof x.focusable>"u"),O=typeof u<"u"&&(x.reconnectable||n&&typeof x.reconnectable>"u"),A=!!(x.selectable||o&&typeof x.selectable>"u"),R=S.useRef(null),[$,z]=S.useState(!1),[T,_]=S.useState(!1),P=ne(),{zIndex:N,sourceX:j,sourceY:E,targetX:M,targetY:D,sourcePosition:B,targetPosition:H}=ee(S.useCallback(X=>{const J=X.nodeLookup.get(x.source),te=X.nodeLookup.get(x.target);if(!J||!te)return{zIndex:x.zIndex,...Bs};const ue=_p({id:e,sourceNode:J,targetNode:te,sourceHandle:x.sourceHandle||null,targetHandle:x.targetHandle||null,connectionMode:X.connectionMode,onError:g});return{zIndex:mp({selected:x.selected,zIndex:x.zIndex,sourceNode:J,targetNode:te,elevateOnSelect:X.elevateEdgesOnSelect}),...ue||Bs}},[x.source,x.target,x.sourceHandle,x.targetHandle,x.selected,x.zIndex]),oe),G=S.useMemo(()=>x.markerStart?`url('#${Wo(x.markerStart,y)}')`:void 0,[x.markerStart,y]),F=S.useMemo(()=>x.markerEnd?`url('#${Wo(x.markerEnd,y)}')`:void 0,[x.markerEnd,y]);if(x.hidden||j===null||E===null||M===null||D===null)return null;const Y=X=>{var Ee;const{addSelectedEdges:J,unselectNodesAndEdges:te,multiSelectionActive:ue}=P.getState();A&&(P.setState({nodesSelectionActive:!1}),x.selected&&ue?(te({nodes:[],edges:[x]}),(Ee=R.current)==null||Ee.blur()):J([e])),r&&r(X,x)},q=a?X=>{a(X,{...x})}:void 0,V=i?X=>{i(X,{...x})}:void 0,L=s?X=>{s(X,{...x})}:void 0,K=l?X=>{l(X,{...x})}:void 0,Z=c?X=>{c(X,{...x})}:void 0,W=X=>{var J;if(!w&&li.includes(X.key)&&A){const{unselectNodesAndEdges:te,addSelectedEdges:ue}=P.getState();X.key==="Escape"?((J=R.current)==null||J.blur(),te({edges:[x]})):ue([e])}};return h.jsx("svg",{style:{zIndex:N},children:h.jsxs("g",{className:ae(["react-flow__edge",`react-flow__edge-${C}`,x.className,b,{selected:x.selected,animated:x.animated,inactive:!A&&!r,updating:$,selectable:A}]),onClick:Y,onDoubleClick:q,onContextMenu:V,onMouseEnter:L,onMouseMove:K,onMouseLeave:Z,onKeyDown:k?W:void 0,tabIndex:k?0:void 0,role:k?"button":"img","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":x.ariaLabel===null?void 0:x.ariaLabel||`Edge from ${x.source} to ${x.target}`,"aria-describedby":k?`${ns}-${y}`:void 0,ref:R,children:[!T&&h.jsx(I,{id:e,source:x.source,target:x.target,type:x.type,selected:x.selected,animated:x.animated,selectable:A,deletable:x.deletable??!0,label:x.label,labelStyle:x.labelStyle,labelShowBg:x.labelShowBg,labelBgStyle:x.labelBgStyle,labelBgPadding:x.labelBgPadding,labelBgBorderRadius:x.labelBgBorderRadius,sourceX:j,sourceY:E,targetX:M,targetY:D,sourcePosition:B,targetPosition:H,data:x.data,style:x.style,sourceHandleId:x.sourceHandle,targetHandleId:x.targetHandle,markerStart:G,markerEnd:F,pathOptions:"pathOptions"in x?x.pathOptions:void 0,interactionWidth:x.interactionWidth}),O&&h.jsx(Nm,{edge:x,isReconnectable:O,reconnectRadius:d,onReconnect:u,onReconnectStart:f,onReconnectEnd:p,sourceX:j,sourceY:E,targetX:M,targetY:D,sourcePosition:B,targetPosition:H,setUpdateHover:z,setReconnecting:_})]})})}const km=e=>({width:e.width,height:e.height,edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function Ys({defaultMarkerColor:e,onlyRenderVisibleElements:t,rfId:n,edgeTypes:o,noPanClassName:r,onReconnect:a,onEdgeContextMenu:i,onEdgeMouseEnter:s,onEdgeMouseMove:l,onEdgeMouseLeave:c,onEdgeClick:d,reconnectRadius:u,onEdgeDoubleClick:f,onReconnectStart:p,onReconnectEnd:y,disableKeyboardA11y:m}){const{edgesFocusable:b,edgesReconnectable:g,elementsSelectable:w,onError:x}=ee(km,oe),v=fm(t);return h.jsxs("div",{className:"react-flow__edges",children:[h.jsx(ym,{defaultColor:e,rfId:n}),v.map(C=>h.jsx(Em,{id:C,edgesFocusable:b,edgesReconnectable:g,elementsSelectable:w,noPanClassName:r,onReconnect:a,onContextMenu:i,onMouseEnter:s,onMouseMove:l,onMouseLeave:c,onClick:d,reconnectRadius:u,onDoubleClick:f,onReconnectStart:p,onReconnectEnd:y,rfId:n,onError:x,edgeTypes:o,disableKeyboardA11y:m},C))]})}Ys.displayName="EdgeRenderer";const Pm=S.memo(Ys),Mm=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function jm({children:e}){const t=ee(Mm);return h.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:t},children:e})}function Om(e){const t=tn(),n=S.useRef(!1);S.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const Im=e=>{var t;return(t=e.panZoom)==null?void 0:t.syncViewport};function Am(e){const t=ee(Im),n=ne();return S.useEffect(()=>{e&&(t==null||t(e),n.setState({transform:[e.x,e.y,e.zoom]}))},[e,t]),null}function Rm(e){return e.connection.inProgress?{...e.connection,to:Dt(e.connection.to,e.transform)}:{...e.connection}}function Dm(e){return Rm}function zm(e){const t=Dm();return ee(t,oe)}const Tm=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function Lm({containerStyle:e,style:t,type:n,component:o}){const{nodesConnectable:r,width:a,height:i,isValid:s,inProgress:l}=ee(Tm,oe);return a&&r&&l?h.jsx("svg",{style:e,width:a,height:i,className:"react-flow__connectionline react-flow__container",children:h.jsx("g",{className:ae(["react-flow__connection",fi(s)]),children:h.jsx(Zs,{style:t,type:n,CustomComponent:o,isValid:s})})}):null}const Zs=({style:e,type:t=Te.Bezier,CustomComponent:n,isValid:o})=>{const{inProgress:r,from:a,fromNode:i,fromHandle:s,fromPosition:l,to:c,toNode:d,toHandle:u,toPosition:f}=zm();if(!r)return;if(n)return h.jsx(n,{connectionLineType:t,connectionLineStyle:e,fromNode:i,fromHandle:s,fromX:a.x,fromY:a.y,toX:c.x,toY:c.y,fromPosition:l,toPosition:f,connectionStatus:fi(o),toNode:d,toHandle:u});let p="";const y={sourceX:a.x,sourceY:a.y,sourcePosition:l,targetX:c.x,targetY:c.y,targetPosition:f};switch(t){case Te.Bezier:[p]=Mi(y);break;case Te.SimpleBezier:[p]=Ps(y);break;case Te.Step:[p]=Ko({...y,borderRadius:0});break;case Te.SmoothStep:[p]=Ko(y);break;default:[p]=Ii(y)}return h.jsx("path",{d:p,fill:"none",className:"react-flow__connection-path",style:e})};Zs.displayName="ConnectionLine";const $m={};function Xs(e=$m){S.useRef(e),ne(),S.useEffect(()=>{},[e])}function Vm(){ne(),S.useRef(!1),S.useEffect(()=>{},[])}function Ks({nodeTypes:e,edgeTypes:t,onInit:n,onNodeClick:o,onEdgeClick:r,onNodeDoubleClick:a,onEdgeDoubleClick:i,onNodeMouseEnter:s,onNodeMouseMove:l,onNodeMouseLeave:c,onNodeContextMenu:d,onSelectionContextMenu:u,onSelectionStart:f,onSelectionEnd:p,connectionLineType:y,connectionLineStyle:m,connectionLineComponent:b,connectionLineContainerStyle:g,selectionKeyCode:w,selectionOnDrag:x,selectionMode:v,multiSelectionKeyCode:C,panActivationKeyCode:I,zoomActivationKeyCode:k,deleteKeyCode:O,onlyRenderVisibleElements:A,elementsSelectable:R,defaultViewport:$,translateExtent:z,minZoom:T,maxZoom:_,preventScrolling:P,defaultMarkerColor:N,zoomOnScroll:j,zoomOnPinch:E,panOnScroll:M,panOnScrollSpeed:D,panOnScrollMode:B,zoomOnDoubleClick:H,panOnDrag:G,onPaneClick:F,onPaneMouseEnter:Y,onPaneMouseMove:q,onPaneMouseLeave:V,onPaneScroll:L,onPaneContextMenu:K,paneClickDistance:Z,nodeClickDistance:W,onEdgeContextMenu:X,onEdgeMouseEnter:J,onEdgeMouseMove:te,onEdgeMouseLeave:ue,reconnectRadius:Ee,onReconnect:Rr,onReconnectStart:Dr,onReconnectEnd:zr,noDragClassName:Yt,noWheelClassName:Tr,noPanClassName:Zt,disableKeyboardA11y:Xt,nodeExtent:Lr,rfId:Kt,viewport:Wt,onViewportChange:eo}){return Xs(e),Xs(t),Vm(),Om(n),Am(Wt),h.jsx(om,{onPaneClick:F,onPaneMouseEnter:Y,onPaneMouseMove:q,onPaneMouseLeave:V,onPaneContextMenu:K,onPaneScroll:L,paneClickDistance:Z,deleteKeyCode:O,selectionKeyCode:w,selectionOnDrag:x,selectionMode:v,onSelectionStart:f,onSelectionEnd:p,multiSelectionKeyCode:C,panActivationKeyCode:I,zoomActivationKeyCode:k,elementsSelectable:R,zoomOnScroll:j,zoomOnPinch:E,zoomOnDoubleClick:H,panOnScroll:M,panOnScrollSpeed:D,panOnScrollMode:B,panOnDrag:G,defaultViewport:$,translateExtent:z,minZoom:T,maxZoom:_,onSelectionContextMenu:u,preventScrolling:P,noDragClassName:Yt,noWheelClassName:Tr,noPanClassName:Zt,disableKeyboardA11y:Xt,onViewportChange:eo,isControlledViewport:!!Wt,children:h.jsxs(jm,{children:[h.jsx(Pm,{edgeTypes:t,onEdgeClick:r,onEdgeDoubleClick:i,onReconnect:Rr,onReconnectStart:Dr,onReconnectEnd:zr,onlyRenderVisibleElements:A,onEdgeContextMenu:X,onEdgeMouseEnter:J,onEdgeMouseMove:te,onEdgeMouseLeave:ue,reconnectRadius:Ee,defaultMarkerColor:N,noPanClassName:Zt,disableKeyboardA11y:Xt,rfId:Kt}),h.jsx(Lm,{style:m,type:y,component:b,containerStyle:g}),h.jsx("div",{className:"react-flow__edgelabel-renderer"}),h.jsx(um,{nodeTypes:e,onNodeClick:o,onNodeDoubleClick:a,onNodeMouseEnter:s,onNodeMouseMove:l,onNodeMouseLeave:c,onNodeContextMenu:d,nodeClickDistance:W,onlyRenderVisibleElements:A,noPanClassName:Zt,noDragClassName:Yt,disableKeyboardA11y:Xt,nodeExtent:Lr,rfId:Kt}),h.jsx("div",{className:"react-flow__viewport-portal"})]})})}Ks.displayName="GraphView";const Bm=S.memo(Ks),Ws=({nodes:e,edges:t,defaultNodes:n,defaultEdges:o,width:r,height:a,fitView:i,nodeOrigin:s,nodeExtent:l}={})=>{const c=new Map,d=new Map,u=new Map,f=new Map,p=o??t??[],y=n??e??[],m=s??[0,0],b=l??jt;$i(u,f,p),qo(y,c,d,{nodeOrigin:m,nodeExtent:b,elevateNodesOnSelect:!1});let g=[0,0,1];if(i&&r&&a){const w=At(c,{filter:I=>!!((I.width||I.initialWidth)&&(I.height||I.initialHeight))}),{x,y:v,zoom:C}=Zo(w,r,a,.5,2,.1);g=[x,v,C]}return{rfId:"1",width:0,height:0,transform:g,nodes:y,nodeLookup:c,parentLookup:d,edges:p,edgeLookup:f,connectionLookup:u,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:n!==void 0,hasDefaultEdges:o!==void 0,panZoom:null,minZoom:.5,maxZoom:2,translateExtent:jt,nodeExtent:b,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:rt.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:m,nodeDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,fitViewOnInit:!1,fitViewDone:!1,fitViewOnInitOptions:void 0,selectNodesOnDrag:!0,multiSelectionActive:!1,connection:{...ci},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanSpeed:15,connectionRadius:20,onError:pp,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1}},Hm=({nodes:e,edges:t,defaultNodes:n,defaultEdges:o,width:r,height:a,fitView:i,nodeOrigin:s,nodeExtent:l})=>sg((c,d)=>({...Ws({nodes:e,edges:t,width:r,height:a,fitView:i,nodeOrigin:s,nodeExtent:l,defaultNodes:n,defaultEdges:o}),setNodes:u=>{const{nodeLookup:f,parentLookup:p,nodeOrigin:y,elevateNodesOnSelect:m}=d();qo(u,f,p,{nodeOrigin:y,nodeExtent:l,elevateNodesOnSelect:m,checkEquality:!0}),c({nodes:u})},setEdges:u=>{const{connectionLookup:f,edgeLookup:p}=d();$i(f,p,u),c({edges:u})},setDefaultNodesAndEdges:(u,f)=>{if(u){const{setNodes:p}=d();p(u),c({hasDefaultNodes:!0})}if(f){const{setEdges:p}=d();p(f),c({hasDefaultEdges:!0})}},updateNodeInternals:(u,f={triggerFitView:!0})=>{const{triggerNodeChanges:p,nodeLookup:y,parentLookup:m,fitViewOnInit:b,fitViewDone:g,fitViewOnInitOptions:w,domNode:x,nodeOrigin:v,nodeExtent:C,debug:I,fitViewSync:k}=d(),{changes:O,updatedInternals:A}=Mp(u,y,m,x,v,C);if(A){if(Ep(y,m,{nodeOrigin:v,nodeExtent:C}),f.triggerFitView){let R=g;!g&&b&&(R=k({...w,nodes:w==null?void 0:w.nodes})),c({fitViewDone:R})}else c({});(O==null?void 0:O.length)>0&&(I&&console.log("React Flow: trigger node changes",O),p==null||p(O))}},updateNodePositions:(u,f=!1)=>{const p=[],y=[];for(const[m,b]of u){const g={id:m,type:"position",position:b.position,dragging:f};b!=null&&b.expandParent&&(b!=null&&b.parentId)&&g.position&&(p.push({id:m,parentId:b.parentId,rect:{...b.internals.positionAbsolute,width:b.measured.width,height:b.measured.height}}),g.position.x=Math.max(0,g.position.x),g.position.y=Math.max(0,g.position.y)),y.push(g)}if(p.length>0){const{nodeLookup:m,parentLookup:b,nodeOrigin:g}=d(),w=Jo(p,m,b,g);y.push(...w)}d().triggerNodeChanges(y)},triggerNodeChanges:u=>{const{onNodesChange:f,setNodes:p,nodes:y,hasDefaultNodes:m,debug:b}=d();if(u!=null&&u.length){if(m){const g=Ye(u,y);p(g)}b&&console.log("React Flow: trigger node changes",u),f==null||f(u)}},triggerEdgeChanges:u=>{const{onEdgesChange:f,setEdges:p,edges:y,hasDefaultEdges:m,debug:b}=d();if(u!=null&&u.length){if(m){const g=$t(u,y);p(g)}b&&console.log("React Flow: trigger edge changes",u),f==null||f(u)}},addSelectedNodes:u=>{const{multiSelectionActive:f,edgeLookup:p,nodeLookup:y,triggerNodeChanges:m,triggerEdgeChanges:b}=d();if(f){const g=u.map(w=>Ue(w,!0));m(g);return}m(dt(y,new Set([...u]),!0)),b(dt(p))},addSelectedEdges:u=>{const{multiSelectionActive:f,edgeLookup:p,nodeLookup:y,triggerNodeChanges:m,triggerEdgeChanges:b}=d();if(f){const g=u.map(w=>Ue(w,!0));b(g);return}b(dt(p,new Set([...u]))),m(dt(y,new Set,!0))},unselectNodesAndEdges:({nodes:u,edges:f}={})=>{const{edges:p,nodes:y,nodeLookup:m,triggerNodeChanges:b,triggerEdgeChanges:g}=d(),w=u||y,x=f||p,v=w.map(I=>{const k=m.get(I.id);return k&&(k.selected=!1),Ue(I.id,!1)}),C=x.map(I=>Ue(I.id,!1));b(v),g(C)},setMinZoom:u=>{const{panZoom:f,maxZoom:p}=d();f==null||f.setScaleExtent([u,p]),c({minZoom:u})},setMaxZoom:u=>{const{panZoom:f,minZoom:p}=d();f==null||f.setScaleExtent([p,u]),c({maxZoom:u})},setTranslateExtent:u=>{var f;(f=d().panZoom)==null||f.setTranslateExtent(u),c({translateExtent:u})},setPaneClickDistance:u=>{var f;(f=d().panZoom)==null||f.setClickDistance(u)},resetSelectedElements:()=>{const{edges:u,nodes:f,triggerNodeChanges:p,triggerEdgeChanges:y}=d(),m=f.reduce((g,w)=>w.selected?[...g,Ue(w.id,!1)]:g,[]),b=u.reduce((g,w)=>w.selected?[...g,Ue(w.id,!1)]:g,[]);p(m),y(b)},setNodeExtent:u=>{const{nodes:f,nodeLookup:p,parentLookup:y,nodeOrigin:m,elevateNodesOnSelect:b,nodeExtent:g}=d();u[0][0]===g[0][0]&&u[0][1]===g[0][1]&&u[1][0]===g[1][0]&&u[1][1]===g[1][1]||(qo(f,p,y,{nodeOrigin:m,nodeExtent:u,elevateNodesOnSelect:b,checkEquality:!1}),c({nodeExtent:u}))},panBy:u=>{const{transform:f,width:p,height:y,panZoom:m,translateExtent:b}=d();return jp({delta:u,panZoom:m,transform:f,translateExtent:b,width:p,height:y})},fitView:u=>{const{panZoom:f,width:p,height:y,minZoom:m,maxZoom:b,nodeLookup:g}=d();if(!f)return Promise.resolve(!1);const w=Ho(g,u);return Fo({nodes:w,width:p,height:y,panZoom:f,minZoom:m,maxZoom:b},u)},fitViewSync:u=>{const{panZoom:f,width:p,height:y,minZoom:m,maxZoom:b,nodeLookup:g}=d();if(!f)return!1;const w=Ho(g,u);return Fo({nodes:w,width:p,height:y,panZoom:f,minZoom:m,maxZoom:b},u),w.size>0},cancelConnection:()=>{c({connection:{...ci}})},updateConnection:u=>{c({connection:u})},reset:()=>c({...Ws()})}),Object.is);function Fm({initialNodes:e,initialEdges:t,defaultNodes:n,defaultEdges:o,initialWidth:r,initialHeight:a,fitView:i,nodeOrigin:s,nodeExtent:l,children:c}){const[d]=S.useState(()=>Hm({nodes:e,edges:t,defaultNodes:n,defaultEdges:o,width:r,height:a,fitView:i,nodeOrigin:s,nodeExtent:l}));return h.jsx(lg,{value:d,children:h.jsx(Og,{children:c})})}function Ym({children:e,nodes:t,edges:n,defaultNodes:o,defaultEdges:r,width:a,height:i,fitView:s,nodeOrigin:l,nodeExtent:c}){return S.useContext(Tn)?h.jsx(h.Fragment,{children:e}):h.jsx(Fm,{initialNodes:t,initialEdges:n,defaultNodes:o,defaultEdges:r,initialWidth:a,initialHeight:i,fitView:s,nodeOrigin:l,nodeExtent:c,children:e})}const Zm={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function Xm({nodes:e,edges:t,defaultNodes:n,defaultEdges:o,className:r,nodeTypes:a,edgeTypes:i,onNodeClick:s,onEdgeClick:l,onInit:c,onMove:d,onMoveStart:u,onMoveEnd:f,onConnect:p,onConnectStart:y,onConnectEnd:m,onClickConnectStart:b,onClickConnectEnd:g,onNodeMouseEnter:w,onNodeMouseMove:x,onNodeMouseLeave:v,onNodeContextMenu:C,onNodeDoubleClick:I,onNodeDragStart:k,onNodeDrag:O,onNodeDragStop:A,onNodesDelete:R,onEdgesDelete:$,onDelete:z,onSelectionChange:T,onSelectionDragStart:_,onSelectionDrag:P,onSelectionDragStop:N,onSelectionContextMenu:j,onSelectionStart:E,onSelectionEnd:M,onBeforeDelete:D,connectionMode:B,connectionLineType:H=Te.Bezier,connectionLineStyle:G,connectionLineComponent:F,connectionLineContainerStyle:Y,deleteKeyCode:q="Backspace",selectionKeyCode:V="Shift",selectionOnDrag:L=!1,selectionMode:K=Ot.Full,panActivationKeyCode:Z="Space",multiSelectionKeyCode:W=In()?"Meta":"Control",zoomActivationKeyCode:X=In()?"Meta":"Control",snapToGrid:J,snapGrid:te,onlyRenderVisibleElements:ue=!1,selectNodesOnDrag:Ee,nodesDraggable:Rr,nodesConnectable:Dr,nodesFocusable:zr,nodeOrigin:Yt=os,edgesFocusable:Tr,edgesReconnectable:Zt,elementsSelectable:Xt=!0,defaultViewport:Lr=bg,minZoom:Kt=.5,maxZoom:Wt=2,translateExtent:eo=jt,preventScrolling:Ty=!0,nodeExtent:$r,defaultMarkerColor:Ly="#b1b1b7",zoomOnScroll:$y=!0,zoomOnPinch:Vy=!0,panOnScroll:By=!1,panOnScrollSpeed:Hy=.5,panOnScrollMode:Fy=Ze.Free,zoomOnDoubleClick:Yy=!0,panOnDrag:Zy=!0,onPaneClick:Xy,onPaneMouseEnter:Ky,onPaneMouseMove:Wy,onPaneMouseLeave:Gy,onPaneScroll:Uy,onPaneContextMenu:qy,paneClickDistance:Tc=0,nodeClickDistance:Qy=0,children:Jy,onReconnect:ex,onReconnectStart:tx,onReconnectEnd:nx,onEdgeContextMenu:ox,onEdgeDoubleClick:rx,onEdgeMouseEnter:ax,onEdgeMouseMove:ix,onEdgeMouseLeave:sx,reconnectRadius:lx=10,onNodesChange:cx,onEdgesChange:dx,noDragClassName:ux="nodrag",noWheelClassName:fx="nowheel",noPanClassName:Lc="nopan",fitView:$c,fitViewOptions:hx,connectOnClick:px,attributionPosition:gx,proOptions:mx,defaultEdgeOptions:yx,elevateNodesOnSelect:xx,elevateEdgesOnSelect:vx,disableKeyboardA11y:Vc=!1,autoPanOnConnect:wx,autoPanOnNodeDrag:bx,autoPanSpeed:Sx,connectionRadius:_x,isValidConnection:Cx,onError:Nx,style:Ex,id:Bc,nodeDragThreshold:kx,viewport:Px,onViewportChange:Mx,width:jx,height:Ox,colorMode:Ix="light",debug:Ax,...Rx},Dx){const Vr=Bc||"1",zx=Ng(Ix);return h.jsx("div",{...Rx,style:{...Ex,...Zm},ref:Dx,className:ae(["react-flow",r,zx]),"data-testid":"rf__wrapper",id:Bc,children:h.jsxs(Ym,{nodes:e,edges:t,width:jx,height:Ox,fitView:$c,nodeOrigin:Yt,nodeExtent:$r,children:[h.jsx(Bm,{onInit:c,onNodeClick:s,onEdgeClick:l,onNodeMouseEnter:w,onNodeMouseMove:x,onNodeMouseLeave:v,onNodeContextMenu:C,onNodeDoubleClick:I,nodeTypes:a,edgeTypes:i,connectionLineType:H,connectionLineStyle:G,connectionLineComponent:F,connectionLineContainerStyle:Y,selectionKeyCode:V,selectionOnDrag:L,selectionMode:K,deleteKeyCode:q,multiSelectionKeyCode:W,panActivationKeyCode:Z,zoomActivationKeyCode:X,onlyRenderVisibleElements:ue,defaultViewport:Lr,translateExtent:eo,minZoom:Kt,maxZoom:Wt,preventScrolling:Ty,zoomOnScroll:$y,zoomOnPinch:Vy,zoomOnDoubleClick:Yy,panOnScroll:By,panOnScrollSpeed:Hy,panOnScrollMode:Fy,panOnDrag:Zy,onPaneClick:Xy,onPaneMouseEnter:Ky,onPaneMouseMove:Wy,onPaneMouseLeave:Gy,onPaneScroll:Uy,onPaneContextMenu:qy,paneClickDistance:Tc,nodeClickDistance:Qy,onSelectionContextMenu:j,onSelectionStart:E,onSelectionEnd:M,onReconnect:ex,onReconnectStart:tx,onReconnectEnd:nx,onEdgeContextMenu:ox,onEdgeDoubleClick:rx,onEdgeMouseEnter:ax,onEdgeMouseMove:ix,onEdgeMouseLeave:sx,reconnectRadius:lx,defaultMarkerColor:Ly,noDragClassName:ux,noWheelClassName:fx,noPanClassName:Lc,rfId:Vr,disableKeyboardA11y:Vc,nodeExtent:$r,viewport:Px,onViewportChange:Mx}),h.jsx(Cg,{nodes:e,edges:t,defaultNodes:n,defaultEdges:o,onConnect:p,onConnectStart:y,onConnectEnd:m,onClickConnectStart:b,onClickConnectEnd:g,nodesDraggable:Rr,nodesConnectable:Dr,nodesFocusable:zr,edgesFocusable:Tr,edgesReconnectable:Zt,elementsSelectable:Xt,elevateNodesOnSelect:xx,elevateEdgesOnSelect:vx,minZoom:Kt,maxZoom:Wt,nodeExtent:$r,onNodesChange:cx,onEdgesChange:dx,snapToGrid:J,snapGrid:te,connectionMode:B,translateExtent:eo,connectOnClick:px,defaultEdgeOptions:yx,fitView:$c,fitViewOptions:hx,onNodesDelete:R,onEdgesDelete:$,onDelete:z,onNodeDragStart:k,onNodeDrag:O,onNodeDragStop:A,onSelectionDrag:P,onSelectionDragStart:_,onSelectionDragStop:N,onMove:d,onMoveStart:u,onMoveEnd:f,noPanClassName:Lc,nodeOrigin:Yt,rfId:Vr,autoPanOnConnect:wx,autoPanOnNodeDrag:bx,autoPanSpeed:Sx,onError:Nx,connectionRadius:_x,isValidConnection:Cx,selectNodesOnDrag:Ee,nodeDragThreshold:kx,onBeforeDelete:D,paneClickDistance:Tc,debug:Ax}),h.jsx(wg,{onSelectionChange:T}),Jy,h.jsx(gg,{proOptions:mx,position:gx}),h.jsx(hg,{rfId:Vr,disableKeyboardA11y:Vc})]})})}gd=ps(Xm);const Km=e=>{var t;return(t=e.domNode)==null?void 0:t.querySelector(".react-flow__viewport-portal")};hd=function({children:e}){const t=ee(Km);return t?Br.createPortal(e,t):null};const Wm=e=>e.nodes;nd=function(){return ee(Wm,oe)},cd=function({type:e,id:t=null,nodeId:n,onConnect:o,onDisconnect:r}){const a=sr(),i=n??a,s=S.useRef(null),l=ee(c=>c.connectionLookup.get(`${i}-${e}-${t}`),cp);return S.useEffect(()=>{if(s.current&&s.current!==l){const c=l??new Map;ui(s.current,c,r),ui(c,s.current,o)}s.current=l??new Map},[l,o,r]),S.useMemo(()=>Array.from((l==null?void 0:l.values())??[]),[l])},Nd=function(e){return ee(S.useCallback(t=>t.nodeLookup.get(e),[e]),oe)};function Gm({dimensions:e,lineWidth:t,variant:n,className:o}){return h.jsx("path",{strokeWidth:t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:ae(["react-flow__background-pattern",n,o])})}function Um({radius:e,className:t}){return h.jsx("circle",{cx:e,cy:e,r:e,className:ae(["react-flow__background-pattern","dots",t])})}(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(De||(De={}));const qm={[De.Dots]:1,[De.Lines]:1,[De.Cross]:6},Qm=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function Gs({id:e,variant:t=De.Dots,gap:n=20,size:o,lineWidth:r=1,offset:a=0,color:i,bgColor:s,style:l,className:c,patternClassName:d}){const u=S.useRef(null),{transform:f,patternId:p}=ee(Qm,oe),y=o||qm[t],m=t===De.Dots,b=t===De.Cross,g=Array.isArray(n)?n:[n,n],w=[g[0]*f[2]||1,g[1]*f[2]||1],x=y*f[2],v=Array.isArray(a)?a:[a,a],C=b?[x,x]:w,I=[v[0]*f[2]||1+C[0]/2,v[1]*f[2]||1+C[1]/2],k=`${p}${e||""}`;return h.jsxs("svg",{className:ae(["react-flow__background",c]),style:{...l,...$n,"--xy-background-color-props":s,"--xy-background-pattern-color-props":i},ref:u,"data-testid":"rf__background",children:[h.jsx("pattern",{id:k,x:f[0]%w[0],y:f[1]%w[1],width:w[0],height:w[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${I[0]},-${I[1]})`,children:m?h.jsx(Um,{radius:x/2,className:d}):h.jsx(Gm,{dimensions:C,lineWidth:r,variant:t,className:d})}),h.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${k})`})]})}Gs.displayName="Background",md=S.memo(Gs);function Jm(){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:h.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function e0(){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:h.jsx("path",{d:"M0 0h32v4.2H0z"})})}function t0(){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:h.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function n0(){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:h.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function o0(){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:h.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function Hn({children:e,className:t,...n}){return h.jsx("button",{type:"button",className:ae(["react-flow__controls-button",t]),...n,children:e})}const r0=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom});function Us({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:o=!0,fitViewOptions:r,onZoomIn:a,onZoomOut:i,onFitView:s,onInteractiveChange:l,className:c,children:d,position:u="bottom-left",orientation:f="vertical","aria-label":p="React Flow controls"}){const y=ne(),{isInteractive:m,minZoomReached:b,maxZoomReached:g}=ee(r0,oe),{zoomIn:w,zoomOut:x,fitView:v}=tn(),C=()=>{w(),a==null||a()},I=()=>{x(),i==null||i()},k=()=>{v(r),s==null||s()},O=()=>{y.setState({nodesDraggable:!m,nodesConnectable:!m,elementsSelectable:!m}),l==null||l(!m)},A=f==="horizontal"?"horizontal":"vertical";return h.jsxs(rn,{className:ae(["react-flow__controls",A,c]),position:u,style:e,"data-testid":"rf__controls","aria-label":p,children:[t&&h.jsxs(h.Fragment,{children:[h.jsx(Hn,{onClick:C,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:g,children:h.jsx(Jm,{})}),h.jsx(Hn,{onClick:I,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:b,children:h.jsx(e0,{})})]}),n&&h.jsx(Hn,{className:"react-flow__controls-fitview",onClick:k,title:"fit view","aria-label":"fit view",children:h.jsx(t0,{})}),o&&h.jsx(Hn,{className:"react-flow__controls-interactive",onClick:O,title:"toggle interactivity","aria-label":"toggle interactivity",children:m?h.jsx(o0,{}):h.jsx(n0,{})}),d]})}Us.displayName="Controls",yd=S.memo(Us);function a0({id:e,x:t,y:n,width:o,height:r,style:a,color:i,strokeColor:s,strokeWidth:l,className:c,borderRadius:d,shapeRendering:u,selected:f,onClick:p}){const{background:y,backgroundColor:m}=a||{},b=i||y||m;return h.jsx("rect",{className:ae(["react-flow__minimap-node",{selected:f},c]),x:t,y:n,rx:d,ry:d,width:o,height:r,style:{fill:b,stroke:s,strokeWidth:l},shapeRendering:u,onClick:p?g=>p(g,e):void 0})}const i0=S.memo(a0),s0=e=>e.nodes.map(t=>t.id),lr=e=>e instanceof Function?e:()=>e;function l0({nodeStrokeColor:e,nodeColor:t,nodeClassName:n="",nodeBorderRadius:o=5,nodeStrokeWidth:r,nodeComponent:a=i0,onClick:i}){const s=ee(s0,oe),l=lr(t),c=lr(e),d=lr(n),u=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return h.jsx(h.Fragment,{children:s.map(f=>h.jsx(d0,{id:f,nodeColorFunc:l,nodeStrokeColorFunc:c,nodeClassNameFunc:d,nodeBorderRadius:o,nodeStrokeWidth:r,NodeComponent:a,onClick:i,shapeRendering:u},f))})}function c0({id:e,nodeColorFunc:t,nodeStrokeColorFunc:n,nodeClassNameFunc:o,nodeBorderRadius:r,nodeStrokeWidth:a,shapeRendering:i,NodeComponent:s,onClick:l}){const{node:c,x:d,y:u,width:f,height:p}=ee(y=>{const m=y.nodeLookup.get(e),{x:b,y:g}=m.internals.positionAbsolute,{width:w,height:x}=Ie(m);return{node:m,x:b,y:g,width:w,height:x}},oe);return!c||c.hidden||!Si(c)?null:h.jsx(s,{x:d,y:u,width:f,height:p,style:c.style,selected:!!c.selected,className:o(c),color:t(c),borderRadius:r,strokeColor:n(c),strokeWidth:a,shapeRendering:i,onClick:l,id:c.id})}const d0=S.memo(c0);var u0=S.memo(l0);const f0=200,h0=150,p0=e=>{const t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:t,boundingRect:e.nodeLookup.size>0?vi(At(e.nodeLookup),t):t,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height}},g0="react-flow__minimap-desc";function qs({style:e,className:t,nodeStrokeColor:n,nodeColor:o,nodeClassName:r="",nodeBorderRadius:a=5,nodeStrokeWidth:i,nodeComponent:s,bgColor:l,maskColor:c,maskStrokeColor:d,maskStrokeWidth:u,position:f="bottom-right",onClick:p,onNodeClick:y,pannable:m=!1,zoomable:b=!1,ariaLabel:g="React Flow mini map",inversePan:w,zoomStep:x=10,offsetScale:v=5}){const C=ne(),I=S.useRef(null),{boundingRect:k,viewBB:O,rfId:A,panZoom:R,translateExtent:$,flowWidth:z,flowHeight:T}=ee(p0,oe),_=(e==null?void 0:e.width)??f0,P=(e==null?void 0:e.height)??h0,N=k.width/_,j=k.height/P,E=Math.max(N,j),M=E*_,D=E*P,B=v*E,H=k.x-(M-k.width)/2-B,G=k.y-(D-k.height)/2-B,F=M+B*2,Y=D+B*2,q=`${g0}-${A}`,V=S.useRef(0),L=S.useRef();V.current=E,S.useEffect(()=>{if(I.current&&R)return L.current=Lp({domNode:I.current,panZoom:R,getTransform:()=>C.getState().transform,getViewScale:()=>V.current}),()=>{var W;(W=L.current)==null||W.destroy()}},[R]),S.useEffect(()=>{var W;(W=L.current)==null||W.update({translateExtent:$,width:z,height:T,inversePan:w,pannable:m,zoomStep:x,zoomable:b})},[m,b,w,x,$,z,T]);const K=p?W=>{var te;const[X,J]=((te=L.current)==null?void 0:te.pointer(W))||[0,0];p(W,{x:X,y:J})}:void 0,Z=y?S.useCallback((W,X)=>{const J=C.getState().nodeLookup.get(X);y(W,J)},[]):void 0;return h.jsx(rn,{position:f,style:{...e,"--xy-minimap-background-color-props":typeof l=="string"?l:void 0,"--xy-minimap-mask-background-color-props":typeof c=="string"?c:void 0,"--xy-minimap-mask-stroke-color-props":typeof d=="string"?d:void 0,"--xy-minimap-mask-stroke-width-props":typeof u=="number"?u*E:void 0,"--xy-minimap-node-background-color-props":typeof o=="string"?o:void 0,"--xy-minimap-node-stroke-color-props":typeof n=="string"?n:void 0,"--xy-minimap-node-stroke-width-props":typeof i=="string"?i:void 0},className:ae(["react-flow__minimap",t]),"data-testid":"rf__minimap",children:h.jsxs("svg",{width:_,height:P,viewBox:`${H} ${G} ${F} ${Y}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":q,ref:I,onClick:K,children:[g&&h.jsx("title",{id:q,children:g}),h.jsx(u0,{onClick:Z,nodeColor:o,nodeStrokeColor:n,nodeBorderRadius:a,nodeClassName:r,nodeStrokeWidth:i,nodeComponent:s}),h.jsx("path",{className:"react-flow__minimap-mask",d:`M${H-B},${G-B}h${F+B*2}v${Y+B*2}h${-F-B*2}z
        M${O.x},${O.y}h${O.width}v${O.height}h${-O.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}qs.displayName="MiniMap",xd=S.memo(qs);function m0({nodeId:e,position:t,variant:n=ct.Handle,className:o,style:r={},children:a,color:i,minWidth:s=10,minHeight:l=10,maxWidth:c=Number.MAX_VALUE,maxHeight:d=Number.MAX_VALUE,keepAspectRatio:u=!1,shouldResize:f,onResizeStart:p,onResize:y,onResizeEnd:m}){const b=sr(),g=typeof e=="string"?e:b,w=ne(),x=S.useRef(null),v=n===ct.Line?"right":"bottom-right",C=t??v,I=S.useRef(null);S.useEffect(()=>{if(!(!x.current||!g))return I.current||(I.current=tg({domNode:x.current,nodeId:g,getStoreItems:()=>{const{nodeLookup:R,transform:$,snapGrid:z,snapToGrid:T,nodeOrigin:_,domNode:P}=w.getState();return{nodeLookup:R,transform:$,snapGrid:z,snapToGrid:T,nodeOrigin:_,paneDomNode:P}},onChange:(R,$)=>{const{triggerNodeChanges:z,nodeLookup:T,parentLookup:_,nodeOrigin:P}=w.getState(),N=[],j={x:R.x,y:R.y},E=T.get(g);if(E&&E.expandParent&&E.parentId){const M=E.origin??P,D=R.width??E.measured.width,B=R.height??E.measured.height,H={id:E.id,parentId:E.parentId,rect:{width:D,height:B,..._i({x:R.x??E.position.x,y:R.y??E.position.y},{width:D,height:B},E.parentId,T,M)}},G=Jo([H],T,_,P);N.push(...G),j.x=R.x?Math.max(M[0]*D,R.x):void 0,j.y=R.y?Math.max(M[1]*B,R.y):void 0}if(j.x!==void 0&&j.y!==void 0){const M={id:g,type:"position",position:{...j}};N.push(M)}if(R.width!==void 0&&R.height!==void 0){const M={id:g,type:"dimensions",resizing:!0,setAttributes:!0,dimensions:{width:R.width,height:R.height}};N.push(M)}for(const M of $){const D={...M,type:"position"};N.push(D)}z(N)},onEnd:()=>{const R={id:g,type:"dimensions",resizing:!1};w.getState().triggerNodeChanges([R])}})),I.current.update({controlPosition:C,boundaries:{minWidth:s,minHeight:l,maxWidth:c,maxHeight:d},keepAspectRatio:u,onResizeStart:p,onResize:y,onResizeEnd:m,shouldResize:f}),()=>{var R;(R=I.current)==null||R.destroy()}},[C,s,l,c,d,u,p,y,m,f]);const k=C.split("-"),O=n===ct.Line?"borderColor":"backgroundColor",A=i?{...r,[O]:i}:r;return h.jsx("div",{className:ae(["react-flow__resize-control","nodrag",...k,n,o]),ref:x,style:A,children:a})}const Qs=S.memo(m0);fd=function({nodeId:e,isVisible:t=!0,handleClassName:n,handleStyle:o,lineClassName:r,lineStyle:a,color:i,minWidth:s=10,minHeight:l=10,maxWidth:c=Number.MAX_VALUE,maxHeight:d=Number.MAX_VALUE,keepAspectRatio:u=!1,shouldResize:f,onResizeStart:p,onResize:y,onResizeEnd:m}){return t?h.jsxs(h.Fragment,{children:[Wp.map(b=>h.jsx(Qs,{className:r,style:a,nodeId:e,position:b,variant:ct.Line,color:i,minWidth:s,minHeight:l,maxWidth:c,maxHeight:d,onResizeStart:p,keepAspectRatio:u,shouldResize:f,onResize:y,onResizeEnd:m},b)),Kp.map(b=>h.jsx(Qs,{className:n,style:o,nodeId:e,position:b,color:i,minWidth:s,minHeight:l,maxWidth:c,maxHeight:d,onResizeStart:p,keepAspectRatio:u,shouldResize:f,onResize:y,onResizeEnd:m},b))]}):null};var cr,Js;function y0(){if(Js)return cr;Js=1;var e=function(g){return t(g)&&!n(g)};function t(g){return!!g&&typeof g=="object"}function n(g){var w=Object.prototype.toString.call(g);return w==="[object RegExp]"||w==="[object Date]"||a(g)}var o=typeof Symbol=="function"&&Symbol.for,r=o?Symbol.for("react.element"):60103;function a(g){return g.$$typeof===r}function i(g){return Array.isArray(g)?[]:{}}function s(g,w){return w.clone!==!1&&w.isMergeableObject(g)?m(i(g),g,w):g}function l(g,w,x){return g.concat(w).map(function(v){return s(v,x)})}function c(g,w){if(!w.customMerge)return m;var x=w.customMerge(g);return typeof x=="function"?x:m}function d(g){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(g).filter(function(w){return Object.propertyIsEnumerable.call(g,w)}):[]}function u(g){return Object.keys(g).concat(d(g))}function f(g,w){try{return w in g}catch{return!1}}function p(g,w){return f(g,w)&&!(Object.hasOwnProperty.call(g,w)&&Object.propertyIsEnumerable.call(g,w))}function y(g,w,x){var v={};return x.isMergeableObject(g)&&u(g).forEach(function(C){v[C]=s(g[C],x)}),u(w).forEach(function(C){p(g,C)||(f(g,C)&&x.isMergeableObject(w[C])?v[C]=c(C,x)(g[C],w[C],x):v[C]=s(w[C],x))}),v}function m(g,w,x){x=x||{},x.arrayMerge=x.arrayMerge||l,x.isMergeableObject=x.isMergeableObject||e,x.cloneUnlessOtherwiseSpecified=s;var v=Array.isArray(w),C=Array.isArray(g),I=v===C;return I?v?x.arrayMerge(g,w,x):y(g,w,x):s(w,x)}m.all=function(g,w){if(!Array.isArray(g))throw new Error("first argument should be an array");return g.reduce(function(x,v){return m(x,v,w)},{})};var b=m;return cr=b,cr}var x0=y0();let dr,el,ur,Fn,Yn,tl,fr,hr,nl,ol,rl,al,il,sl;an=to(x0),dr=(e,t)=>({id:e.id,type:e.node_type,position:{x:e.x||0,y:e.y||0},width:e.width||void 0,height:e.height||void 0,data:{loading:!1,flowNode:e,...t}}),el=e=>({id:e.id,target:e.target,source:e.target,targetHandle:e.targetHandle,sourceHandle:e.sourceHandle}),ur=e=>({id:e.id,source:e.source,target:e.target,targetHandle:e.targetHandle,sourceHandle:e.sourceHandle}),dd=e=>e.filter(t=>"edgeId"in t?`${t.edgeId}`.startsWith("xy-edge__"):!1),Fn=(e,t,n)=>{const o=[];return{changes:e.map(r=>{var l;const a=t.find(c=>r.id===c.id);a||o.push(r.id);const i=(l=n==null?void 0:n[r.source_type])==null?void 0:l.find(c=>(c==null?void 0:c.id)===r.source_id),s=dr(r,{...a==null?void 0:a.data,entity:i});return{type:a?"replace":"add",id:r.id,item:a?an({...a||{},data:void 0},nn(s,on)):s}}),newIds:[]}},Yn=(e,t)=>{const n=[],o=[],r=e.map(a=>{const i=t.find(s=>a.source===s.source&&a.target===s.target);return!i||i.id!==a.id?(i&&o.push(i.id),{type:"add",item:ur(a)}):(n.push(a.id),{type:"replace",item:ur(a)})});return t.forEach(a=>{n.includes(a.id)||o.push(a.id)}),{changes:r,updatedIds:n,deletedIds:o}},tl={width:440,height:360},fr={width:380,height:650},hr={width:400,height:70},nl={width:400,height:130},xt={[ce.Toolbox]:"toolbox",[ce.SessionInfo]:"session-info",[ce.DefaultEmbeddingModel]:"default-embedding-model",[ce.ApplicationBar]:"application-bar"},ol={id:xt[ce.ApplicationBar],type:ce.ApplicationBar,position:{x:10,y:10},data:{}},rl={id:xt[ce.DefaultEmbeddingModel],type:ce.DefaultEmbeddingModel,position:{x:10,y:10+hr.height+5},data:{model:tv}},al={id:xt[ce.Toolbox],type:ce.Toolbox,position:{x:10+fr.width+10,y:10},measured:tl,data:{}},il={id:xt[ce.SessionInfo],type:ce.SessionInfo,position:{x:10,y:10+hr.height+nl.height},measured:fr,data:{}},sl=[al,il,rl,ol],pd=[ce.Toolbox,ce.SessionInfo,ce.ApplicationBar,ce.EditorApp],ia={flowNodes:[],flowEdges:[],ready:!0,flowEdgeLoading:!1,flowNodeLoading:!1,syncedNodes:[],syncedEdges:[],syncNodeQueue:[],syncEdgeQueue:[],edges:[],nodes:sl},oa=async e=>{const t=await ie("FlowNode").find(e),n=t.reduce((r,a)=>{var i;return r[a.source_type]||(r[a.source_type]=[]),(i=r[a.source_type])==null||i.push(a),r},{}),o={};return await Promise.all(Object.entries(n).map(async([r,a])=>{const i=r;o[i]=await ie(i).find({where:{id:Cv(a.map(s=>s.source_id))}})})),{flowNodes:t,entityGroups:n,flowNodeDatas:o}},_d=(e,t)=>({reset:()=>{e(ia)},setNodes:n=>{if(typeof n=="function"){e({nodes:n(t().nodes)});return}e({nodes:n})},setEdges:n=>{if(typeof n=="function"){e({edges:n(t().edges)});return}e({edges:n})},updateNodes:n=>{const o=t().nodes;e({nodes:Ye(n,o)})},updateEdges:n=>{const o=t().edges;e({edges:$t(n,o)})},addConnectionToEdges:n=>{const o=t().edges;e({edges:Oi(n,o)})},flowNodesToNodes:(n,o={})=>{const r=t().nodes,{changes:a}=Fn(n,r,o);e({nodes:Ye(a,r)})},flowEdgesToEdges:n=>{const o=t().edges,{changes:r,updatedIds:a,deletedIds:i}=Yn(n,o);o.forEach(s=>{a.includes(s.id)||i.push(s.id)}),i.forEach(s=>{r.push({type:"remove",id:s})}),e({edges:$t(r,o)})},getNodes:n=>t().nodes.filter(o=>n.includes(o.id)),removeSyncNodeQueue:n=>{const{syncNodeQueue:o}=t();for(const r of n){const a=o.findIndex(i=>i.timestamp===r);a>-1&&o.splice(a,1)}e({syncNodeQueue:o})},removeSyncEdgeQueue:n=>{const{syncEdgeQueue:o}=t();for(const r of n){const a=o.findIndex(i=>i.timestamp===r);a>-1&&o.splice(a,1)}e({syncEdgeQueue:o})},pushSyncNodeQueue:(n,o)=>{const{syncNodeQueue:r}=t();e({syncNodeQueue:[...r,{query:o,timestamp:Date.now(),syncType:n}]})},pushSyncEdgeQueue:()=>{const{syncEdgeQueue:n}=t();e({syncEdgeQueue:[...n,{timestamp:Date.now()}]})},findFlowNodesWithSource:async(n,o)=>{try{e({flowNodeLoading:!0});const{flowNodes:r,flowNodeDatas:a}=await oa(n);if(o!=null&&o.clean)e({flowNodes:r,nodes:r.map(i=>{var l;const s=(l=a==null?void 0:a[i.source_type])==null?void 0:l.find(c=>c.id===i.source_id);return dr(i,{data:s})})});else{const i=t().flowNodes,s=r.map(d=>d.id),l=t().nodes,{changes:c}=Fn(r,l,a);e({flowNodes:[...i.filter(d=>!s.includes(d.id)),...r],nodes:Ye(c,l)})}return r}finally{e({flowNodeLoading:!1})}},findFlowEdges:async(n,o)=>{try{e({flowEdgeLoading:!0});const r=await ie("FlowEdge").find(n),a=t().flowEdges,i=r.map(s=>s.id);if(o!=null&&o.clean)e({flowEdges:r,edges:r.map(s=>el(s))});else{const s=t().edges,{changes:l}=Yn(r,s);e({flowEdges:[...a.filter(c=>!i.includes(c.id)),...r],edges:$t(l,s)})}return r}finally{e({flowEdgeLoading:!1})}},deleteFlowNode:async n=>{try{if(!n.id&&!n.source_type&&!n.source_id)throw new Error("Missing flow node indentify");const o=await ie("FlowNode").findOne({where:n.id?{id:n.id}:{source_type:n.source_type,source_id:n.source_id}});if(o){await ie("FlowNode").delete(o.id);const r=t().flowNodes;o.source_type&&o.source_id&&await ie(o.source_type).delete(o.source_id).catch(i=>{gt("Failed to delete source entity",o.source_type,o.source_id,i)});const a=t().nodes;e({flowNodes:r.filter(i=>i.id!==o.id),nodes:Ye([{type:"remove",id:o.id}],a)})}}catch(o){gt("Failed to delete flow node",o)}},deleteFlowEdge:async n=>{try{if(!n.id&&!n.source&&!n.target)throw new Error("Missing flow edge indentify");const o=await ie("FlowEdge").findOne({where:n.id?{id:n.id}:{source:n.source,target:n.target}});if(o){await ie("FlowEdge").delete(o.id);const r=t().flowEdges;e({flowEdges:r.filter(a=>a.id!==o.id)})}}catch(o){gt("Failed to delete flow edge",o)}},updateFlowNode:async(n,o)=>{var r;try{if(!((r=Fr.getState().currentSession)!=null&&r.id))throw new Error("Session not found");if(!n.id)throw new Error("Missing flow node indentify");await ie("FlowNode").update(n.id,n);const a=t().flowNodes.map(i=>i.id===n.id?{...i,...n}:i);e({flowNodes:o!=null&&o.silent?a:[...a]})}catch(a){gt("Failed to create or update flow node",a,n)}},createOrUpdateFlowNode:async(n,o)=>{var r;try{const a=Fr.getState().currentSession;if(!(a!=null&&a.id))throw new Error("Session not found");if(!n.id&&(!n.source_type||!n.source_id))throw new Error("Missing flow node indentify");let i,s=n!=null&&n.id?t().flowNodes.find(p=>p.id===n.id):void 0;if(!s&&(n.id||n.source_type&&n.source_id)&&(s=await ie("FlowNode").findOne({where:n.id?{id:n.id}:{source_type:n.source_type,source_id:n.source_id}})),s)i=an(s,nn(n,on)),o!=null&&o.lazy?ie("FlowNode").update(s.id,i):await ie("FlowNode").update(s.id,i);else if(n.source_id&&n.source_type)i={...n,source_id:`${n.source_id}`,source_type:`${n.source_type}`,node_type:n.node_type||"NEW_MESSAGE",session_id:n.session_id||(a==null?void 0:a.id)},o!=null&&o.lazy?(i.id=Xc(),ie("FlowNode").save(i)):i=await ie("FlowNode").save(i);else throw new Error("Missing source id and type");let l;const c=t().nodes.find(p=>p.id===i.id);i.source_type&&!c?l=await ie(i.source_type).findOne({where:{id:n.source_id}}):i.source_type&&c&&(l=(r=c==null?void 0:c.data)==null?void 0:r.entity);const d=t().flowNodes,u=t().nodes,{changes:f}=Fn([i],u,{[i.source_type]:[l]});return e({flowNodes:[...d.filter(p=>p.id!==i.id),i],nodes:Ye(f,u)}),i}catch(a){gt("Failed to create or update flow node",a,n)}},createOrUpdateFlowEdge:async(n,o)=>{try{const r=Fr.getState().currentSession;if(!(r!=null&&r.id))throw new Error("Session not found");if(!n.id&&(!n.source||!n.target))throw new Error("Missing flow node indentify");let a,i=n!=null&&n.id?t().flowEdges.find(c=>c.id===n.id):void 0;if(i&&(n.id||n.source&&n.target)&&(i=await ie("FlowEdge").findOne({where:n.id?{id:n.id}:{source:n.source,target:n.target}})),i)a=an(i,nn(n,on)),o!=null&&o.lazy?ie("FlowEdge").update(i.id,a):await ie("FlowEdge").update(i.id,a);else if(n.source&&n.target)a={...n,source:`${n.source}`,target:`${n.target}`,session_id:n.session_id||(r==null?void 0:r.id)},o!=null&&o.lazy?(a.id=Xc(),ie("FlowEdge").save(a)):a=await ie("FlowEdge").save(a);else throw new Error("Missing source and target");const s=t().flowEdges,l=t().edges;return e({flowEdges:[...s.filter(c=>c.id!==a.id),a],edges:$t(Yn([a],l).changes,l)}),a}catch(r){gt("Failed to create or update flow node",r)}}});class v0 extends nv{get lc_attributes(){return{partialVariables:void 0}}constructor(t){super(t),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompts",this._getPromptType()]}),Object.defineProperty(this,"inputVariables",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputParser",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"partialVariables",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0});const{inputVariables:n}=t;if(n.includes("stop"))throw new Error("Cannot have an input variable named 'stop', as it is used internally, please rename.");Object.assign(this,t)}async mergePartialAndUserVariables(t){const n=this.partialVariables??{},o={};for(const[r,a]of Object.entries(n))typeof a=="string"?o[r]=a:o[r]=await a();return{...o,...t}}async invoke(t,n){const o={...this.metadata,...n==null?void 0:n.metadata},r=[...this.tags??[],...(n==null?void 0:n.tags)??[]];return this._callWithConfig(a=>this.formatPromptValue(a),t,{...n,tags:r,metadata:o,runType:"prompt"})}serialize(){throw new Error("Use .toJSON() instead")}static async deserialize(t){switch(t._type){case"prompt":{const{PromptTemplate:n}=await Gt(async()=>{const{PromptTemplate:o}=await Promise.resolve().then(()=>yl);return{PromptTemplate:o}},void 0);return n.deserialize(t)}case void 0:{const{PromptTemplate:n}=await Gt(async()=>{const{PromptTemplate:o}=await Promise.resolve().then(()=>yl);return{PromptTemplate:o}},void 0);return n.deserialize({...t,_type:"prompt"})}case"few_shot":{const{FewShotPromptTemplate:n}=await Gt(async()=>{const{FewShotPromptTemplate:o}=await import("./few_shot-BDbPCwzR.js").then(async r=>(await r.__tla,r));return{FewShotPromptTemplate:o}},__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]));return n.deserialize(t)}default:throw new Error(`Invalid prompt type in config: ${t._type}`)}}}Xr=class extends v0{async formatPromptValue(e){const t=await this.format(e);return new Nv(t)}};var w0=Object.prototype.toString,ut=Array.isArray||function(e){return w0.call(e)==="[object Array]"};function pr(e){return typeof e=="function"}function b0(e){return ut(e)?"array":typeof e}function gr(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function ll(e,t){return e!=null&&typeof e=="object"&&t in e}function S0(e,t){return e!=null&&typeof e!="object"&&e.hasOwnProperty&&e.hasOwnProperty(t)}var _0=RegExp.prototype.test;function C0(e,t){return _0.call(e,t)}var N0=/\S/;function E0(e){return!C0(N0,e)}var k0={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function P0(e){return String(e).replace(/[&<>"'`=\/]/g,function(t){return k0[t]})}var M0=/\s*/,j0=/\s+/,cl=/\s*=/,O0=/\s*\}/,I0=/#|\^|\/|>|\{|&|=|!/;function A0(e,t){if(!e)return[];var n=!1,o=[],r=[],a=[],i=!1,s=!1,l="",c=0;function d(){if(i&&!s)for(;a.length;)delete r[a.pop()];else a=[];i=!1,s=!1}var u,f,p;function y(O){if(typeof O=="string"&&(O=O.split(j0,2)),!ut(O)||O.length!==2)throw new Error("Invalid tags: "+O);u=new RegExp(gr(O[0])+"\\s*"),f=new RegExp("\\s*"+gr(O[1])),p=new RegExp("\\s*"+gr("}"+O[1]))}y(t||he.tags);for(var m=new Vt(e),b,g,w,x,v,C;!m.eos();){if(b=m.pos,w=m.scanUntil(u),w)for(var I=0,k=w.length;I<k;++I)x=w.charAt(I),E0(x)?(a.push(r.length),l+=x):(s=!0,n=!0,l+=" "),r.push(["text",x,b,b+1]),b+=1,x===`
`&&(d(),l="",c=0,n=!1);if(!m.scan(u))break;if(i=!0,g=m.scan(I0)||"name",m.scan(M0),g==="="?(w=m.scanUntil(cl),m.scan(cl),m.scanUntil(f)):g==="{"?(w=m.scanUntil(p),m.scan(O0),m.scanUntil(f),g="&"):w=m.scanUntil(f),!m.scan(f))throw new Error("Unclosed tag at "+m.pos);if(g==">"?v=[g,w,b,m.pos,l,c,n]:v=[g,w,b,m.pos],c++,r.push(v),g==="#"||g==="^")o.push(v);else if(g==="/"){if(C=o.pop(),!C)throw new Error('Unopened section "'+w+'" at '+b);if(C[1]!==w)throw new Error('Unclosed section "'+C[1]+'" at '+b)}else g==="name"||g==="{"||g==="&"?s=!0:g==="="&&y(w)}if(d(),C=o.pop(),C)throw new Error('Unclosed section "'+C[1]+'" at '+m.pos);return D0(R0(r))}function R0(e){for(var t=[],n,o,r=0,a=e.length;r<a;++r)n=e[r],n&&(n[0]==="text"&&o&&o[0]==="text"?(o[1]+=n[1],o[3]=n[3]):(t.push(n),o=n));return t}function D0(e){for(var t=[],n=t,o=[],r,a,i=0,s=e.length;i<s;++i)switch(r=e[i],r[0]){case"#":case"^":n.push(r),o.push(r),n=r[4]=[];break;case"/":a=o.pop(),a[5]=r[2],n=o.length>0?o[o.length-1][4]:t;break;default:n.push(r)}return t}function Vt(e){this.string=e,this.tail=e,this.pos=0}Vt.prototype.eos=function(){return this.tail===""},Vt.prototype.scan=function(e){var t=this.tail.match(e);if(!t||t.index!==0)return"";var n=t[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n},Vt.prototype.scanUntil=function(e){var t=this.tail.search(e),n;switch(t){case-1:n=this.tail,this.tail="";break;case 0:n="";break;default:n=this.tail.substring(0,t),this.tail=this.tail.substring(t)}return this.pos+=n.length,n};function ft(e,t){this.view=e,this.cache={".":this.view},this.parent=t}ft.prototype.push=function(e){return new ft(e,this)},ft.prototype.lookup=function(e){var t=this.cache,n;if(t.hasOwnProperty(e))n=t[e];else{for(var o=this,r,a,i,s=!1;o;){if(e.indexOf(".")>0)for(r=o.view,a=e.split("."),i=0;r!=null&&i<a.length;)i===a.length-1&&(s=ll(r,a[i])||S0(r,a[i])),r=r[a[i++]];else r=o.view[e],s=ll(o.view,e);if(s){n=r;break}o=o.parent}t[e]=n}return pr(n)&&(n=n.call(this.view)),n};function de(){this.templateCache={_cache:{},set:function(e,t){this._cache[e]=t},get:function(e){return this._cache[e]},clear:function(){this._cache={}}}}de.prototype.clearCache=function(){typeof this.templateCache<"u"&&this.templateCache.clear()},de.prototype.parse=function(e,t){var n=this.templateCache,o=e+":"+(t||he.tags).join(":"),r=typeof n<"u",a=r?n.get(o):void 0;return a==null&&(a=A0(e,t),r&&n.set(o,a)),a},de.prototype.render=function(e,t,n,o){var r=this.getConfigTags(o),a=this.parse(e,r),i=t instanceof ft?t:new ft(t,void 0);return this.renderTokens(a,i,n,e,o)},de.prototype.renderTokens=function(e,t,n,o,r){for(var a="",i,s,l,c=0,d=e.length;c<d;++c)l=void 0,i=e[c],s=i[0],s==="#"?l=this.renderSection(i,t,n,o,r):s==="^"?l=this.renderInverted(i,t,n,o,r):s===">"?l=this.renderPartial(i,t,n,r):s==="&"?l=this.unescapedValue(i,t):s==="name"?l=this.escapedValue(i,t,r):s==="text"&&(l=this.rawValue(i)),l!==void 0&&(a+=l);return a},de.prototype.renderSection=function(e,t,n,o,r){var a=this,i="",s=t.lookup(e[1]);function l(u){return a.render(u,t,n,r)}if(s){if(ut(s))for(var c=0,d=s.length;c<d;++c)i+=this.renderTokens(e[4],t.push(s[c]),n,o,r);else if(typeof s=="object"||typeof s=="string"||typeof s=="number")i+=this.renderTokens(e[4],t.push(s),n,o,r);else if(pr(s)){if(typeof o!="string")throw new Error("Cannot use higher-order sections without the original template");s=s.call(t.view,o.slice(e[3],e[5]),l),s!=null&&(i+=s)}else i+=this.renderTokens(e[4],t,n,o,r);return i}},de.prototype.renderInverted=function(e,t,n,o,r){var a=t.lookup(e[1]);if(!a||ut(a)&&a.length===0)return this.renderTokens(e[4],t,n,o,r)},de.prototype.indentPartial=function(e,t,n){for(var o=t.replace(/[^ \t]/g,""),r=e.split(`
`),a=0;a<r.length;a++)r[a].length&&(a>0||!n)&&(r[a]=o+r[a]);return r.join(`
`)},de.prototype.renderPartial=function(e,t,n,o){if(n){var r=this.getConfigTags(o),a=pr(n)?n(e[1]):n[e[1]];if(a!=null){var i=e[6],s=e[5],l=e[4],c=a;s==0&&l&&(c=this.indentPartial(a,l,i));var d=this.parse(c,r);return this.renderTokens(d,t,n,c,o)}}},de.prototype.unescapedValue=function(e,t){var n=t.lookup(e[1]);if(n!=null)return n},de.prototype.escapedValue=function(e,t,n){var o=this.getConfigEscape(n)||he.escape,r=t.lookup(e[1]);if(r!=null)return typeof r=="number"&&o===he.escape?String(r):o(r)},de.prototype.rawValue=function(e){return e[1]},de.prototype.getConfigTags=function(e){return ut(e)?e:e&&typeof e=="object"?e.tags:void 0},de.prototype.getConfigEscape=function(e){if(e&&typeof e=="object"&&!ut(e))return e.escape};var he={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(e){Bt.templateCache=e},get templateCache(){return Bt.templateCache}},Bt=new de;he.clearCache=function(){return Bt.clearCache()},he.parse=function(e,t){return Bt.parse(e,t)},he.render=function(e,t,n,o){if(typeof e!="string")throw new TypeError('Invalid template! Template should be a "string" but "'+b0(e)+'" was given as the first argument for mustache#render(template, view, partials)');return Bt.render(e,t,n,o)},he.escape=P0,he.Scanner=Vt,he.Context=ft,he.Writer=de;function dl(){he.escape=e=>e}let mr,ul,fl,hl,pl,Zn,gl,ml;mr=e=>{const t=e.split(""),n=[],o=(a,i)=>{for(let s=i;s<t.length;s+=1)if(a.includes(t[s]))return s;return-1};let r=0;for(;r<t.length;)if(t[r]==="{"&&r+1<t.length&&t[r+1]==="{")n.push({type:"literal",text:"{"}),r+=2;else if(t[r]==="}"&&r+1<t.length&&t[r+1]==="}")n.push({type:"literal",text:"}"}),r+=2;else if(t[r]==="{"){const a=o("}",r);if(a<0)throw new Error("Unclosed '{' in template.");n.push({type:"variable",name:t.slice(r+1,a).join("")}),r=a+1}else{if(t[r]==="}")throw new Error("Single '}' in template.");{const a=o("{}",r),i=(a<0?t.slice(r):t.slice(r,a)).join("");n.push({type:"literal",text:i}),r=a<0?t.length:a}}return n},ul=e=>e.map(t=>t[0]==="name"?{type:"variable",name:t[1].includes(".")?t[1].split(".")[0]:t[1]}:["#","&","^",">"].includes(t[0])?{type:"variable",name:t[1]}:{type:"literal",text:t[1]}),fl=e=>{dl();const t=he.parse(e);return ul(t)},hl=(e,t)=>mr(e).reduce((n,o)=>{if(o.type==="variable"){if(o.name in t){const r=typeof t[o.name]=="string"?t[o.name]:JSON.stringify(t[o.name]);return n+r}throw new Error(`(f-string) Missing value for input ${o.name}`)}return n+o.text},""),pl=(e,t)=>(dl(),he.render(e,t)),Zn={"f-string":hl,mustache:pl},gl={"f-string":mr,mustache:fl},Je=(e,t,n)=>{try{return Zn[t](e,n)}catch(o){throw ov(o,"INVALID_PROMPT_INPUT")}},ml=(e,t)=>gl[t](e),na=(e,t,n)=>{if(!(t in Zn)){const o=Object.keys(Zn);throw new Error(`Invalid template format. Got \`${t}\`;
                         should be one of ${o}`)}try{const o=n.reduce((r,a)=>(r[a]="foo",r),{});Array.isArray(e)?e.forEach(r=>{if(r.type==="text")Je(r.text,t,o);else if(r.type==="image_url")if(typeof r.image_url=="string")Je(r.image_url,t,o);else{const a=r.image_url.url;Je(a,t,o)}else throw new Error(`Invalid message template received. ${JSON.stringify(r,null,2)}`)}):Je(e,t,o)}catch(o){throw new Error(`Invalid prompt schema: ${o.message}`)}},Qe=class extends Xr{static lc_name(){return"PromptTemplate"}constructor(e){if(super(e),Object.defineProperty(this,"template",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"templateFormat",{enumerable:!0,configurable:!0,writable:!0,value:"f-string"}),Object.defineProperty(this,"validateTemplate",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"additionalContentFields",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e.templateFormat==="mustache"&&e.validateTemplate===void 0&&(this.validateTemplate=!1),Object.assign(this,e),this.validateTemplate){if(this.templateFormat==="mustache")throw new Error("Mustache templates cannot be validated.");let t=this.inputVariables;this.partialVariables&&(t=t.concat(Object.keys(this.partialVariables))),na(this.template,this.templateFormat,t)}}_getPromptType(){return"prompt"}async format(e){const t=await this.mergePartialAndUserVariables(e);return Je(this.template,this.templateFormat,t)}static fromExamples(e,t,n,o=`

`,r=""){const a=[r,...e,t].join(o);return new Qe({inputVariables:n,template:a})}static fromTemplate(e,t){const{templateFormat:n="f-string",...o}=t??{},r=new Set;return ml(e,n).forEach(a=>{a.type==="variable"&&r.add(a.name)}),new Qe({inputVariables:[...r],templateFormat:n,template:e,...o})}async partial(e){const t=this.inputVariables.filter(r=>!(r in e)),n={...this.partialVariables??{},...e},o={...this,inputVariables:t,partialVariables:n};return new Qe(o)}serialize(){if(this.outputParser!==void 0)throw new Error("Cannot serialize a prompt template with an output parser");return{_type:this._getPromptType(),input_variables:this.inputVariables,template:this.template,template_format:this.templateFormat}}static async deserialize(e){if(!e.template)throw new Error("Prompt template must have a template");return new Qe({inputVariables:e.input_variables,template:e.template,templateFormat:e.template_format})}};const yl=Object.freeze(Object.defineProperty({__proto__:null,PromptTemplate:Qe},Symbol.toStringTag,{value:"Module"}));class z0 extends Kc{constructor(t){var r;const n={maxConcurrency:2,...t};super(n),Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:"text-embedding-ada-002"}),Object.defineProperty(this,"modelName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"batchSize",{enumerable:!0,configurable:!0,writable:!0,value:512}),Object.defineProperty(this,"stripNewLines",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"dimensions",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"organization",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientConfig",{enumerable:!0,configurable:!0,writable:!0,value:void 0});const o=(n==null?void 0:n.apiKey)??(n==null?void 0:n.openAIApiKey)??Yr("OPENAI_API_KEY");this.organization=((r=n==null?void 0:n.configuration)==null?void 0:r.organization)??Yr("OPENAI_ORGANIZATION"),this.model=(n==null?void 0:n.model)??(n==null?void 0:n.modelName)??this.model,this.modelName=this.model,this.batchSize=(n==null?void 0:n.batchSize)??this.batchSize,this.stripNewLines=(n==null?void 0:n.stripNewLines)??this.stripNewLines,this.timeout=n==null?void 0:n.timeout,this.dimensions=n==null?void 0:n.dimensions,this.clientConfig={apiKey:o,organization:this.organization,dangerouslyAllowBrowser:!0,...t==null?void 0:t.configuration}}async embedDocuments(t){const n=Wc(this.stripNewLines?t.map(i=>i.replace(/\n/g," ")):t,this.batchSize),o=n.map(i=>{const s={model:this.model,input:i};return this.dimensions&&(s.dimensions=this.dimensions),this.embeddingWithRetry(s)}),r=await Promise.all(o),a=[];for(let i=0;i<r.length;i+=1){const s=n[i],{data:l}=r[i];for(let c=0;c<s.length;c+=1)a.push(l[c].embedding)}return a}async embedQuery(t){const n={model:this.model,input:this.stripNewLines?t.replace(/\n/g," "):t};this.dimensions&&(n.dimensions=this.dimensions);const{data:o}=await this.embeddingWithRetry(n);return o[0].embedding}async embeddingWithRetry(t){if(!this.client){const o={baseURL:this.clientConfig.baseURL},r=Ev(o),a={...this.clientConfig,baseURL:r,timeout:this.timeout,maxRetries:0};a.baseURL||delete a.baseURL,this.client=new kv(a)}const n={};return this.caller.call(async()=>{try{return await this.client.embeddings.create(t,n)}catch(o){throw Pv(o)}})}}class T0 extends Kc{constructor(t){var n,o;if(super(t??{}),Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"modelName",{enumerable:!0,configurable:!0,writable:!0,value:"embedding-001"}),Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:"embedding-001"}),Object.defineProperty(this,"taskType",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"title",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stripNewLines",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"maxBatchSize",{enumerable:!0,configurable:!0,writable:!0,value:100}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.modelName=((n=t==null?void 0:t.model)==null?void 0:n.replace(/^models\//,""))??((o=t==null?void 0:t.modelName)==null?void 0:o.replace(/^models\//,""))??this.modelName,this.model=this.modelName,this.taskType=(t==null?void 0:t.taskType)??this.taskType,this.title=(t==null?void 0:t.title)??this.title,this.title&&this.taskType!=="RETRIEVAL_DOCUMENT")throw new Error("title can only be sepcified with TaskType.RETRIEVAL_DOCUMENT");if(this.apiKey=(t==null?void 0:t.apiKey)??Yr("GOOGLE_API_KEY"),!this.apiKey)throw new Error("Please set an API key for Google GenerativeAI in the environmentb variable GOOGLE_API_KEY or in the `apiKey` field of the GoogleGenerativeAIEmbeddings constructor");this.client=new Mv(this.apiKey).getGenerativeModel({model:this.model},{baseUrl:t==null?void 0:t.baseUrl})}_convertToContent(t){return{content:{role:"user",parts:[{text:this.stripNewLines?t.replace(/\n/g," "):t}]},taskType:this.taskType,title:this.title}}async _embedQueryContent(t){const n=this._convertToContent(t);return(await this.client.embedContent(n)).embedding.values??[]}async _embedDocumentsContent(t){const n=Wc(t,this.maxBatchSize),o=n.map(r=>({requests:r.map(a=>this._convertToContent(a))}));return(await Promise.allSettled(o.map(r=>this.client.batchEmbedContents(r)))).flatMap((r,a)=>r.status==="fulfilled"?r.value.embeddings.map(i=>i.values||[]):Array(n[a].length).fill([]))}embedQuery(t){return this.caller.call(this._embedQueryContent.bind(this),t)}embedDocuments(t){return this.caller.call(this._embedDocumentsContent.bind(this),t)}}let xl;bd={async similaritySearchWithScore(e,t,n,o=4){var r,a;try{const i=Gc.getState(),{similaritySearchWithScore:s}=i;if(!e||!((r=e.data)!=null&&r.provider)||((a=e.data)==null?void 0:a.provider)==="local_transformers")return await s({database:{databaseId:t.database.databaseId,dataSourceId:t.database.dataSourceId,dataSourceType:t.database.dataSourceType}},n,o);const l=await this.getEmbeddingModel(e);return await s({database:{databaseId:t.database.databaseId,dataSourceId:t.database.dataSourceId,dataSourceType:t.database.dataSourceType},embedding:l},n,o)}catch(i){return console.error("Embedding similarity search failed:",i),null}},async getEmbeddingModel(e){var t;try{const n=e==null?void 0:e.encrypted,o=(t=e.data)==null?void 0:t.provider;if(!(n!=null&&n.provider)&&!(n!=null&&n.key))throw new Error("API Key is not found.");const r=await rv.get("passphrase");if(!r)throw new Error("Passphrase is not found");const a=await jv(`${n.key}`,r);if(!a||!o)throw new Error("API Key or provider is not found.");switch(o){case"OpenAI":return new z0({apiKey:a,model:"text-embedding-3-small"});case"GoogleGenerativeAI":return new T0({apiKey:a,model:"text-embedding-004"});default:throw new Error(`Provider ${o} is not supported`)}}catch(n){throw console.error("Failed to get embedding model:",n),n}},async index(e,t,n){var o,r;try{const a=Gc.getState(),{index:i}=a;if(!e||!((o=e.data)!=null&&o.provider)||((r=e.data)==null?void 0:r.provider)==="local_transformers")return await i({database:{databaseId:t.database.databaseId,dataSourceId:t.database.dataSourceId,dataSourceType:t.database.dataSourceType}},n);const s=await this.getEmbeddingModel(e);return await i({database:{databaseId:t.database.databaseId,dataSourceId:t.database.dataSourceId,dataSourceType:t.database.dataSourceType},embedding:s},n)}catch(a){throw console.error("Embedding indexing failed:",a),a}}},xl=S.lazy(()=>Gt(()=>import("./index-CVyw7bjx.js"),__vite__mapDeps([10,2,3,11,12]))),id=S.memo(({source:e,className:t,...n})=>{const o=Tx(a=>a.theme),r=S.useMemo(()=>({pre:({children:a,className:i,...s})=>h.jsx("pre",{...s,className:Q(i,"nowheel"),children:a}),think:({children:a})=>h.jsxs(h.Fragment,{children:[h.jsx("code",{className:"!rounded-none",children:"Think: "}),h.jsx("blockquote",{className:"think",children:a})]})}),[]);return h.jsx(S.Suspense,{children:h.jsx(xl,{className:Q("!text-sm [&_p]:leading-relaxed !max-w-full !bg-transparent !font-sans",t),source:e,wrapperElement:{"data-color-mode":o==="dark"?"dark":"light"},components:r,...n})})},(e,t)=>e.source===t.source),ro=S.forwardRef(({className:e,...t},n)=>h.jsx("div",{ref:n,className:Q("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t})),ro.displayName="Card",uo=S.forwardRef(({className:e,...t},n)=>h.jsx("div",{ref:n,className:Q("flex flex-col space-y-1.5 p-6",e),...t})),uo.displayName="CardHeader",fo=S.forwardRef(({className:e,...t},n)=>h.jsx("h3",{ref:n,className:Q("text-2xl font-semibold leading-none tracking-tight",e),...t})),fo.displayName="CardTitle",Qr=S.forwardRef(({className:e,...t},n)=>h.jsx("p",{ref:n,className:Q("text-sm text-muted-foreground",e),...t})),Qr.displayName="CardDescription",ho=S.forwardRef(({className:e,...t},n)=>h.jsx("div",{ref:n,className:Q("p-6 pt-0",e),...t})),ho.displayName="CardContent",yo=S.forwardRef(({className:e,...t},n)=>h.jsx("div",{ref:n,className:Q("flex items-center p-6 pt-0",e),...t})),yo.displayName="CardFooter";let vl;Sd=S.memo(e=>{const[t,n]=S.useState(!1),[o,r]=S.useState(e.options||{}),{t:a}=ke("atoms"),i=()=>{t||r(e.options||{}),n(!t)},s=()=>{var l;(l=e.onChangeOptions)==null||l.call(e,o||{}),n(!1)};return h.jsx("div",{className:e.className,children:h.jsxs(Iv,{open:t,onOpenChange:n,children:[h.jsx(Av,{asChild:!0,children:h.jsx("div",{className:"flex justify-end gap-2",children:h.jsxs(no,{onClick:i,variant:"link",className:"flex items-center px-0",children:[h.jsx(le,{name:"settings"}),h.jsx(Fe,{children:a("llm_setting.title")})]})})}),h.jsx(Rv,{className:"w-full p-0",children:t?h.jsxs(ro,{className:"!border-none",children:[h.jsx(uo,{children:h.jsx(fo,{children:a("llm_setting.title")})}),h.jsxs(ho,{children:[h.jsxs("div",{children:[h.jsxs(Fe,{children:[a("llm_setting.temperature"),":"]}),h.jsx(mt,{type:"number",value:o.temperature?`${o.temperature}`:"",onChange:l=>r(c=>({...c,temperature:l.target.value}))})]}),h.jsxs("div",{children:[h.jsxs(Fe,{children:[a("llm_setting.top_p"),":"]}),h.jsx(mt,{type:"number",value:o.topP?`${o.topP}`:"",onChange:l=>r(c=>({...c,topP:l.target.value}))})]}),h.jsxs("div",{children:[h.jsxs(Fe,{children:[a("llm_setting.top_k"),":"]}),h.jsx(mt,{type:"number",value:o.topK?`${o.topK}`:"",onChange:l=>r(c=>({...c,topK:l.target.value}))})]}),h.jsxs("div",{children:[h.jsxs(Fe,{children:[a("llm_setting.max_tokens"),":"]}),h.jsx(mt,{type:"number",value:o.maxTokens?`${o.maxTokens}`:"",onChange:l=>r(c=>({...c,maxTokens:l.target.value}))})]}),h.jsxs("div",{children:[h.jsxs(Fe,{children:[a("llm_setting.stop_sequences"),":"]}),h.jsx(mt,{placeholder:a("llm_setting.stop_sequences_placeholder"),value:o.stop?`${o.stop}`:"",onChange:l=>r(c=>({...c,stop:l.target.value}))})]})]}),h.jsx(yo,{className:"flex justify-end",children:h.jsx(no,{variant:"secondary",onClick:s,children:a("llm_setting.save")})})]}):void 0})]})})}),Wr=["Qwen3-1.7B-q4f16_1-MLC","Qwen2.5-Coder-1.5B-Instruct-q4f16_1-MLC","stablelm-2-zephyr-1_6b-q4f16_1-MLC-1k","Phi-3.5-mini-instruct-q4f16_1-MLC-1k","Llama-3.2-3B-Instruct-q4f32_1-MLC","DeepSeek-R1-Distill-Qwen-7B-q4f16_1-MLC"],Cd=["gabriellarson/LFM2-VL-1.6B-GGUF","LiquidAI/LFM2-1.2B-GGUF","ggml-org/SmolLM3-3B-GGUF","LiquidAI/LFM2-700M-GGUF","ggml-org/Qwen3-1.7B-GGUF","unsloth/gemma-3-1b-it-GGUF","unsloth/DeepSeek-R1-Distill-Qwen-1.5B-GGUF","bartowski/Llama-3.2-1B-Instruct-GGUF","unsloth/Qwen3-1.7B-GGUF","unsloth/Qwen3-0.6B-GGUF","unsloth/Qwen3-4B-GGUF","unsloth/Phi-4-mini-reasoning-GGUF","unsloth/gemma-3-270m-it-GGUF","LiquidAI/LFM2-350M-GGUF","gabriellarson/LFM2-VL-450M-GGUF"],vl=Hc("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}}),ye=function({className:e,variant:t,...n}){return h.jsx("div",{className:Q(vl({variant:t}),e),...n})},ad=S.memo(e=>{var c;const{cloud:t,name:n,model:o,isCached:r,isFunctionCalling:a}=e,{t:i}=ke("atoms"),s=S.useCallback(d=>d===1?"llm_info.model_types.embedding":d===2?"llm_info.model_types.vlm":"llm_info.model_types.llm",[]),l=S.useMemo(()=>{if(o)switch(o.model_type){case 0:case 1:return h.jsx(ye,{className:"",children:i(s(o.model_type))});case 2:return h.jsxs(h.Fragment,{children:[h.jsx(ye,{className:"",children:i(s(0))}),h.jsx(ye,{className:"",children:i(s(o.model_type))})]})}},[o,s,i]);if(o)return h.jsxs(h.Fragment,{children:[l,Wr.some(d=>n&&d.includes(n))?h.jsx(ye,{className:"",variant:"outline",children:i("llm_info.recommended")}):null,r?h.jsx(ye,{className:"",variant:"outline",children:i("llm_info.cached")}):null,t?h.jsx(ye,{className:"",variant:"outline",children:i("llm_info.cloud")}):null,a?h.jsx(ye,{className:"",variant:"outline",children:i("llm_info.function_calling")}):null,o!=null&&o.low_resource_required?h.jsx(ye,{className:"",variant:"outline",children:i("llm_info.low_resource_required")}):null,(c=o==null?void 0:o.overrides)!=null&&c.context_window_size?h.jsxs(ye,{className:"",variant:"outline",children:[o.overrides.context_window_size.toLocaleString("en-US")," Tokens"]}):null,o!=null&&o.vram_required_MB?h.jsxs(ye,{className:"",variant:"outline",children:["VRAM: ",o.vram_required_MB.toLocaleString("en-US")," MB"]}):null]})});class L0{async loadAndSplit(t){if(t===void 0)throw new Error("You must pass a text splitter to use this method.");const n=await this.load();return t.invoke(n)}}ld=class extends L0{constructor(e,{splitPages:t=!0,pdfjs:n=$0,parsedItemSeparator:o=""}={}){super(),Object.defineProperty(this,"blob",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"splitPages",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"pdfjs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"parsedItemSeparator",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.blob=e,this.splitPages=t??this.splitPages,this.pdfjs=n,this.parsedItemSeparator=o}async load(){const{getDocument:e,version:t}=await this.pdfjs(),n=await e({data:new Uint8Array(await this.blob.arrayBuffer()),useWorkerFetch:!1,isEvalSupported:!1,useSystemFonts:!0}).promise,o=await n.getMetadata().catch(()=>null),r=[];for(let a=1;a<=n.numPages;a+=1){const i=await(await n.getPage(a)).getTextContent();if(i.items.length===0)continue;let s;const l=[];for(const d of i.items)"str"in d&&(s===d.transform[5]||!s?l.push(d.str):l.push(`
${d.str}`),s=d.transform[5]);const c=l.join(this.parsedItemSeparator);r.push(new Uc({pageContent:c,metadata:{pdf:{version:t,info:o==null?void 0:o.info,metadata:o==null?void 0:o.metadata,totalPages:n.numPages},loc:{pageNumber:a}}}))}return this.splitPages?r:r.length===0?[]:[new Uc({pageContent:r.map(a=>a.pageContent).join(`

`),metadata:{pdf:{version:t,info:o==null?void 0:o.info,metadata:o==null?void 0:o.metadata,totalPages:n.numPages}}})]}};async function $0(){try{const{default:e}=await Gt(async()=>{const{default:o}=await import("./pdf-Dl-3VnFu.js").then(async r=>(await r.__tla,r)).then(r=>r.p);return{default:o}},__vite__mapDeps([13,2,3,1])),{getDocument:t,version:n}=e;return{getDocument:t,version:n}}catch(e){throw console.error(e),new Error("Failed to load pdf-parse. Please install it with eg. `npm install pdf-parse`.")}}var yr="Tabs",[V0,Tv]=Hr(yr,[qc]),wl=qc(),[B0,xr]=V0(yr),bl=S.forwardRef((e,t)=>{const{__scopeTabs:n,value:o,onValueChange:r,defaultValue:a,orientation:i="horizontal",dir:s,activationMode:l="automatic",...c}=e,d=Zr(s),[u,f]=Ut({prop:o,onChange:r,defaultProp:a});return h.jsx(B0,{scope:n,baseId:qt(),value:u,onValueChange:f,orientation:i,dir:d,activationMode:l,children:h.jsx(se.div,{dir:d,"data-orientation":i,...c,ref:t})})});bl.displayName=yr;let vr;vr="TabsList",co=S.forwardRef((e,t)=>{const{__scopeTabs:n,loop:o=!0,...r}=e,a=xr(vr,n),i=wl(n);return h.jsx(av,{asChild:!0,...i,orientation:a.orientation,dir:a.dir,loop:o,children:h.jsx(se.div,{role:"tablist","aria-orientation":a.orientation,...r,ref:t})})}),co.displayName=vr;var Sl="TabsTrigger",_l=S.forwardRef((e,t)=>{const{__scopeTabs:n,value:o,disabled:r=!1,...a}=e,i=xr(Sl,n),s=wl(n),l=El(i.baseId,o),c=kl(i.baseId,o),d=o===i.value;return h.jsx(iv,{asChild:!0,...s,focusable:!r,active:d,children:h.jsx(se.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":c,"data-state":d?"active":"inactive","data-disabled":r?"":void 0,disabled:r,id:l,...a,ref:t,onMouseDown:re(e.onMouseDown,u=>{!r&&u.button===0&&u.ctrlKey===!1?i.onValueChange(o):u.preventDefault()}),onKeyDown:re(e.onKeyDown,u=>{[" ","Enter"].includes(u.key)&&i.onValueChange(o)}),onFocus:re(e.onFocus,()=>{const u=i.activationMode!=="manual";!d&&!r&&u&&i.onValueChange(o)})})})});_l.displayName=Sl;var Cl="TabsContent",Nl=S.forwardRef((e,t)=>{const{__scopeTabs:n,value:o,forceMount:r,children:a,...i}=e,s=xr(Cl,n),l=El(s.baseId,o),c=kl(s.baseId,o),d=o===s.value,u=S.useRef(d);return S.useEffect(()=>{const f=requestAnimationFrame(()=>u.current=!1);return()=>cancelAnimationFrame(f)},[]),h.jsx(Lx,{present:r||d,children:({present:f})=>h.jsx(se.div,{"data-state":d?"active":"inactive","data-orientation":s.orientation,role:"tabpanel","aria-labelledby":l,hidden:!f,id:c,tabIndex:0,...i,ref:t,style:{...e.style,animationDuration:u.current?"0s":void 0},children:f&&a})})});Nl.displayName=Cl;function El(e,t){return`${e}-trigger-${t}`}function kl(e,t){return`${e}-content-${t}`}var H0=bl,Pl=co,Ml=_l,jl=Nl;wd=H0,ra=S.forwardRef(({className:e,...t},n)=>h.jsx(Pl,{ref:n,className:Q("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t})),ra.displayName=Pl.displayName,aa=S.forwardRef(({className:e,...t},n)=>h.jsx(Ml,{ref:n,className:Q("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t})),aa.displayName=Ml.displayName,Ur=S.forwardRef(({className:e,...t},n)=>h.jsx(jl,{ref:n,className:Q("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t})),Ur.displayName=jl.displayName;function Ol(e,[t,n]){return Math.min(n,Math.max(t,e))}var F0=[" ","Enter","ArrowUp","ArrowDown"],Y0=[" ","Enter"],Ht="Select",[Xn,Kn,Z0]=Fc(Ht),[ht,Lv]=Hr(Ht,[Z0,Qc]),Wn=Qc(),[X0,Ve]=ht(Ht),[K0,W0]=ht(Ht),Il=e=>{const{__scopeSelect:t,children:n,open:o,defaultOpen:r,onOpenChange:a,value:i,defaultValue:s,onValueChange:l,dir:c,name:d,autoComplete:u,disabled:f,required:p,form:y}=e,m=Wn(t),[b,g]=S.useState(null),[w,x]=S.useState(null),[v,C]=S.useState(!1),I=Zr(c),[k=!1,O]=Ut({prop:o,defaultProp:r,onChange:a}),[A,R]=Ut({prop:i,defaultProp:s,onChange:l}),$=S.useRef(null),z=b?y||!!b.closest("form"):!0,[T,_]=S.useState(new Set),P=Array.from(T).map(N=>N.props.value).join(";");return h.jsx(pv,{...m,children:h.jsxs(X0,{required:p,scope:t,trigger:b,onTriggerChange:g,valueNode:w,onValueNodeChange:x,valueNodeHasChildren:v,onValueNodeHasChildrenChange:C,contentId:qt(),value:A,onValueChange:R,open:k,onOpenChange:O,dir:I,triggerPointerDownPosRef:$,disabled:f,children:[h.jsx(Xn.Provider,{scope:t,children:h.jsx(K0,{scope:e.__scopeSelect,onNativeOptionAdd:S.useCallback(N=>{_(j=>new Set(j).add(N))},[]),onNativeOptionRemove:S.useCallback(N=>{_(j=>{const E=new Set(j);return E.delete(N),E})},[]),children:n})}),z?h.jsxs(oc,{"aria-hidden":!0,required:p,tabIndex:-1,name:d,autoComplete:u,value:A,onChange:N=>R(N.target.value),disabled:f,form:y,children:[A===void 0?h.jsx("option",{value:""}):null,Array.from(T)]},P):null]})})};Il.displayName=Ht;var Al="SelectTrigger",Rl=S.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:o=!1,...r}=e,a=Wn(n),i=Ve(Al,n),s=i.disabled||o,l=_e(t,i.onTriggerChange),c=Kn(n),d=S.useRef("touch"),[u,f,p]=rc(m=>{const b=c().filter(x=>!x.disabled),g=b.find(x=>x.value===i.value),w=ac(b,m,g);w!==void 0&&i.onValueChange(w.value)}),y=m=>{s||(i.onOpenChange(!0),p()),m&&(i.triggerPointerDownPosRef.current={x:Math.round(m.pageX),y:Math.round(m.pageY)})};return h.jsx(sv,{asChild:!0,...a,children:h.jsx(se.button,{type:"button",role:"combobox","aria-controls":i.contentId,"aria-expanded":i.open,"aria-required":i.required,"aria-autocomplete":"none",dir:i.dir,"data-state":i.open?"open":"closed",disabled:s,"data-disabled":s?"":void 0,"data-placeholder":nc(i.value)?"":void 0,...r,ref:l,onClick:re(r.onClick,m=>{m.currentTarget.focus(),d.current!=="mouse"&&y(m)}),onPointerDown:re(r.onPointerDown,m=>{d.current=m.pointerType;const b=m.target;b.hasPointerCapture(m.pointerId)&&b.releasePointerCapture(m.pointerId),m.button===0&&m.ctrlKey===!1&&m.pointerType==="mouse"&&(y(m),m.preventDefault())}),onKeyDown:re(r.onKeyDown,m=>{const b=u.current!=="";!(m.ctrlKey||m.altKey||m.metaKey)&&m.key.length===1&&f(m.key),!(b&&m.key===" ")&&F0.includes(m.key)&&(y(),m.preventDefault())})})})});Rl.displayName=Al;var Dl="SelectValue",zl=S.forwardRef((e,t)=>{const{__scopeSelect:n,className:o,style:r,children:a,placeholder:i="",...s}=e,l=Ve(Dl,n),{onValueNodeHasChildrenChange:c}=l,d=a!==void 0,u=_e(t,l.onValueNodeChange);return He(()=>{c(d)},[c,d]),h.jsx(se.span,{...s,ref:u,style:{pointerEvents:"none"},children:nc(l.value)?h.jsx(h.Fragment,{children:i}):a})});zl.displayName=Dl;var G0="SelectIcon",Tl=S.forwardRef((e,t)=>{const{__scopeSelect:n,children:o,...r}=e;return h.jsx(se.span,{"aria-hidden":!0,...r,ref:t,children:o||"\u25BC"})});Tl.displayName=G0;var U0="SelectPortal",Ll=e=>h.jsx(Fx,{asChild:!0,...e});Ll.displayName=U0;var qe="SelectContent",$l=S.forwardRef((e,t)=>{const n=Ve(qe,e.__scopeSelect),[o,r]=S.useState();if(He(()=>{r(new DocumentFragment)},[]),!n.open){const a=o;return a?Br.createPortal(h.jsx(Vl,{scope:e.__scopeSelect,children:h.jsx(Xn.Slot,{scope:e.__scopeSelect,children:h.jsx("div",{children:e.children})})}),a):null}return h.jsx(Bl,{...e,ref:t})});$l.displayName=qe;var Se=10,[Vl,Be]=ht(qe),q0="SelectContentImpl",Bl=S.forwardRef((e,t)=>{const{__scopeSelect:n,position:o="item-aligned",onCloseAutoFocus:r,onEscapeKeyDown:a,onPointerDownOutside:i,side:s,sideOffset:l,align:c,alignOffset:d,arrowPadding:u,collisionBoundary:f,collisionPadding:p,sticky:y,hideWhenDetached:m,avoidCollisions:b,...g}=e,w=Ve(qe,n),[x,v]=S.useState(null),[C,I]=S.useState(null),k=_e(t,V=>v(V)),[O,A]=S.useState(null),[R,$]=S.useState(null),z=Kn(n),[T,_]=S.useState(!1),P=S.useRef(!1);S.useEffect(()=>{if(x)return lv(x)},[x]),cv();const N=S.useCallback(V=>{const[L,...K]=z().map(X=>X.ref.current),[Z]=K.slice(-1),W=document.activeElement;for(const X of V)if(X===W||(X==null||X.scrollIntoView({block:"nearest"}),X===L&&C&&(C.scrollTop=0),X===Z&&C&&(C.scrollTop=C.scrollHeight),X==null||X.focus(),document.activeElement!==W))return},[z,C]),j=S.useCallback(()=>N([O,x]),[N,O,x]);S.useEffect(()=>{T&&j()},[T,j]);const{onOpenChange:E,triggerPointerDownPosRef:M}=w;S.useEffect(()=>{if(x){let V={x:0,y:0};const L=Z=>{var W,X;V={x:Math.abs(Math.round(Z.pageX)-(((W=M.current)==null?void 0:W.x)??0)),y:Math.abs(Math.round(Z.pageY)-(((X=M.current)==null?void 0:X.y)??0))}},K=Z=>{V.x<=10&&V.y<=10?Z.preventDefault():x.contains(Z.target)||E(!1),document.removeEventListener("pointermove",L),M.current=null};return M.current!==null&&(document.addEventListener("pointermove",L),document.addEventListener("pointerup",K,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",L),document.removeEventListener("pointerup",K,{capture:!0})}}},[x,E,M]),S.useEffect(()=>{const V=()=>E(!1);return window.addEventListener("blur",V),window.addEventListener("resize",V),()=>{window.removeEventListener("blur",V),window.removeEventListener("resize",V)}},[E]);const[D,B]=rc(V=>{const L=z().filter(W=>!W.disabled),K=L.find(W=>W.ref.current===document.activeElement),Z=ac(L,V,K);Z&&setTimeout(()=>Z.ref.current.focus())}),H=S.useCallback((V,L,K)=>{const Z=!P.current&&!K;(w.value!==void 0&&w.value===L||Z)&&(A(V),Z&&(P.current=!0))},[w.value]),G=S.useCallback(()=>x==null?void 0:x.focus(),[x]),F=S.useCallback((V,L,K)=>{const Z=!P.current&&!K;(w.value!==void 0&&w.value===L||Z)&&$(V)},[w.value]),Y=o==="popper"?wr:Hl,q=Y===wr?{side:s,sideOffset:l,align:c,alignOffset:d,arrowPadding:u,collisionBoundary:f,collisionPadding:p,sticky:y,hideWhenDetached:m,avoidCollisions:b}:{};return h.jsx(Vl,{scope:n,content:x,viewport:C,onViewportChange:I,itemRefCallback:H,selectedItem:O,onItemLeave:G,itemTextRefCallback:F,focusSelectedItem:j,selectedItemText:R,position:o,isPositioned:T,searchRef:D,children:h.jsx(dv,{as:$x,allowPinchZoom:!0,children:h.jsx(uv,{asChild:!0,trapped:w.open,onMountAutoFocus:V=>{V.preventDefault()},onUnmountAutoFocus:re(r,V=>{var L;(L=w.trigger)==null||L.focus({preventScroll:!0}),V.preventDefault()}),children:h.jsx(Vx,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:i,onFocusOutside:V=>V.preventDefault(),onDismiss:()=>w.onOpenChange(!1),children:h.jsx(Y,{role:"listbox",id:w.contentId,"data-state":w.open?"open":"closed",dir:w.dir,onContextMenu:V=>V.preventDefault(),...g,...q,onPlaced:()=>_(!0),ref:k,style:{display:"flex",flexDirection:"column",outline:"none",...g.style},onKeyDown:re(g.onKeyDown,V=>{const L=V.ctrlKey||V.altKey||V.metaKey;if(V.key==="Tab"&&V.preventDefault(),!L&&V.key.length===1&&B(V.key),["ArrowUp","ArrowDown","Home","End"].includes(V.key)){let K=z().filter(Z=>!Z.disabled).map(Z=>Z.ref.current);if(["ArrowUp","End"].includes(V.key)&&(K=K.slice().reverse()),["ArrowUp","ArrowDown"].includes(V.key)){const Z=V.target,W=K.indexOf(Z);K=K.slice(W+1)}setTimeout(()=>N(K)),V.preventDefault()}})})})})})})});Bl.displayName=q0;var Q0="SelectItemAlignedPosition",Hl=S.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:o,...r}=e,a=Ve(qe,n),i=Be(qe,n),[s,l]=S.useState(null),[c,d]=S.useState(null),u=_e(t,k=>d(k)),f=Kn(n),p=S.useRef(!1),y=S.useRef(!0),{viewport:m,selectedItem:b,selectedItemText:g,focusSelectedItem:w}=i,x=S.useCallback(()=>{if(a.trigger&&a.valueNode&&s&&c&&m&&b&&g){const k=a.trigger.getBoundingClientRect(),O=c.getBoundingClientRect(),A=a.valueNode.getBoundingClientRect(),R=g.getBoundingClientRect();if(a.dir!=="rtl"){const Z=R.left-O.left,W=A.left-Z,X=k.left-W,J=k.width+X,te=Math.max(J,O.width),ue=window.innerWidth-Se,Ee=Ol(W,[Se,Math.max(Se,ue-te)]);s.style.minWidth=J+"px",s.style.left=Ee+"px"}else{const Z=O.right-R.right,W=window.innerWidth-A.right-Z,X=window.innerWidth-k.right-W,J=k.width+X,te=Math.max(J,O.width),ue=window.innerWidth-Se,Ee=Ol(W,[Se,Math.max(Se,ue-te)]);s.style.minWidth=J+"px",s.style.right=Ee+"px"}const $=f(),z=window.innerHeight-Se*2,T=m.scrollHeight,_=window.getComputedStyle(c),P=parseInt(_.borderTopWidth,10),N=parseInt(_.paddingTop,10),j=parseInt(_.borderBottomWidth,10),E=parseInt(_.paddingBottom,10),M=P+N+T+E+j,D=Math.min(b.offsetHeight*5,M),B=window.getComputedStyle(m),H=parseInt(B.paddingTop,10),G=parseInt(B.paddingBottom,10),F=k.top+k.height/2-Se,Y=z-F,q=b.offsetHeight/2,V=b.offsetTop+q,L=P+N+V,K=M-L;if(L<=F){const Z=$.length>0&&b===$[$.length-1].ref.current;s.style.bottom="0px";const W=c.clientHeight-m.offsetTop-m.offsetHeight,X=Math.max(Y,q+(Z?G:0)+W+j),J=L+X;s.style.height=J+"px"}else{const Z=$.length>0&&b===$[0].ref.current;s.style.top="0px";const W=Math.max(F,P+m.offsetTop+(Z?H:0)+q)+K;s.style.height=W+"px",m.scrollTop=L-F+m.offsetTop}s.style.margin=`${Se}px 0`,s.style.minHeight=D+"px",s.style.maxHeight=z+"px",o==null||o(),requestAnimationFrame(()=>p.current=!0)}},[f,a.trigger,a.valueNode,s,c,m,b,g,a.dir,o]);He(()=>x(),[x]);const[v,C]=S.useState();He(()=>{c&&C(window.getComputedStyle(c).zIndex)},[c]);const I=S.useCallback(k=>{k&&y.current===!0&&(x(),w==null||w(),y.current=!1)},[x,w]);return h.jsx(ey,{scope:n,contentWrapper:s,shouldExpandOnScrollRef:p,onScrollButtonChange:I,children:h.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:v},children:h.jsx(se.div,{...r,ref:u,style:{boxSizing:"border-box",maxHeight:"100%",...r.style}})})})});Hl.displayName=Q0;var J0="SelectPopperPosition",wr=S.forwardRef((e,t)=>{const{__scopeSelect:n,align:o="start",collisionPadding:r=Se,...a}=e,i=Wn(n);return h.jsx(fv,{...i,...a,ref:t,align:o,collisionPadding:r,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});wr.displayName=J0;var[ey,br]=ht(qe,{}),Sr="SelectViewport",Fl=S.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:o,...r}=e,a=Be(Sr,n),i=br(Sr,n),s=_e(t,a.onViewportChange),l=S.useRef(0);return h.jsxs(h.Fragment,{children:[h.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:o}),h.jsx(Xn.Slot,{scope:n,children:h.jsx(se.div,{"data-radix-select-viewport":"",role:"presentation",...r,ref:s,style:{position:"relative",flex:1,overflow:"hidden auto",...r.style},onScroll:re(r.onScroll,c=>{const d=c.currentTarget,{contentWrapper:u,shouldExpandOnScrollRef:f}=i;if(f!=null&&f.current&&u){const p=Math.abs(l.current-d.scrollTop);if(p>0){const y=window.innerHeight-Se*2,m=parseFloat(u.style.minHeight),b=parseFloat(u.style.height),g=Math.max(m,b);if(g<y){const w=g+p,x=Math.min(y,w),v=w-x;u.style.height=x+"px",u.style.bottom==="0px"&&(d.scrollTop=v>0?v:0,u.style.justifyContent="flex-end")}}}l.current=d.scrollTop})})})]})});Fl.displayName=Sr;var Yl="SelectGroup",[ty,ny]=ht(Yl),oy=S.forwardRef((e,t)=>{const{__scopeSelect:n,...o}=e,r=qt();return h.jsx(ty,{scope:n,id:r,children:h.jsx(se.div,{role:"group","aria-labelledby":r,...o,ref:t})})});oy.displayName=Yl;var Zl="SelectLabel",Xl=S.forwardRef((e,t)=>{const{__scopeSelect:n,...o}=e,r=ny(Zl,n);return h.jsx(se.div,{id:r.id,...o,ref:t})});Xl.displayName=Zl;var Gn="SelectItem",[ry,Kl]=ht(Gn),Wl=S.forwardRef((e,t)=>{const{__scopeSelect:n,value:o,disabled:r=!1,textValue:a,...i}=e,s=Ve(Gn,n),l=Be(Gn,n),c=s.value===o,[d,u]=S.useState(a??""),[f,p]=S.useState(!1),y=_e(t,w=>{var x;return(x=l.itemRefCallback)==null?void 0:x.call(l,w,o,r)}),m=qt(),b=S.useRef("touch"),g=()=>{r||(s.onValueChange(o),s.onOpenChange(!1))};if(o==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return h.jsx(ry,{scope:n,value:o,disabled:r,textId:m,isSelected:c,onItemTextChange:S.useCallback(w=>{u(x=>x||((w==null?void 0:w.textContent)??"").trim())},[]),children:h.jsx(Xn.ItemSlot,{scope:n,value:o,disabled:r,textValue:d,children:h.jsx(se.div,{role:"option","aria-labelledby":m,"data-highlighted":f?"":void 0,"aria-selected":c&&f,"data-state":c?"checked":"unchecked","aria-disabled":r||void 0,"data-disabled":r?"":void 0,tabIndex:r?void 0:-1,...i,ref:y,onFocus:re(i.onFocus,()=>p(!0)),onBlur:re(i.onBlur,()=>p(!1)),onClick:re(i.onClick,()=>{b.current!=="mouse"&&g()}),onPointerUp:re(i.onPointerUp,()=>{b.current==="mouse"&&g()}),onPointerDown:re(i.onPointerDown,w=>{b.current=w.pointerType}),onPointerMove:re(i.onPointerMove,w=>{var x;b.current=w.pointerType,r?(x=l.onItemLeave)==null||x.call(l):b.current==="mouse"&&w.currentTarget.focus({preventScroll:!0})}),onPointerLeave:re(i.onPointerLeave,w=>{var x;w.currentTarget===document.activeElement&&((x=l.onItemLeave)==null||x.call(l))}),onKeyDown:re(i.onKeyDown,w=>{var x;((x=l.searchRef)==null?void 0:x.current)!==""&&w.key===" "||(Y0.includes(w.key)&&g(),w.key===" "&&w.preventDefault())})})})})});Wl.displayName=Gn;var Ft="SelectItemText",Gl=S.forwardRef((e,t)=>{const{__scopeSelect:n,className:o,style:r,...a}=e,i=Ve(Ft,n),s=Be(Ft,n),l=Kl(Ft,n),c=W0(Ft,n),[d,u]=S.useState(null),f=_e(t,g=>u(g),l.onItemTextChange,g=>{var w;return(w=s.itemTextRefCallback)==null?void 0:w.call(s,g,l.value,l.disabled)}),p=d==null?void 0:d.textContent,y=S.useMemo(()=>h.jsx("option",{value:l.value,disabled:l.disabled,children:p},l.value),[l.disabled,l.value,p]),{onNativeOptionAdd:m,onNativeOptionRemove:b}=c;return He(()=>(m(y),()=>b(y)),[m,b,y]),h.jsxs(h.Fragment,{children:[h.jsx(se.span,{id:l.textId,...a,ref:f}),l.isSelected&&i.valueNode&&!i.valueNodeHasChildren?Br.createPortal(a.children,i.valueNode):null]})});Gl.displayName=Ft;var Ul="SelectItemIndicator",ql=S.forwardRef((e,t)=>{const{__scopeSelect:n,...o}=e;return Kl(Ul,n).isSelected?h.jsx(se.span,{"aria-hidden":!0,...o,ref:t}):null});ql.displayName=Ul;var _r="SelectScrollUpButton",Ql=S.forwardRef((e,t)=>{const n=Be(_r,e.__scopeSelect),o=br(_r,e.__scopeSelect),[r,a]=S.useState(!1),i=_e(t,o.onScrollButtonChange);return He(()=>{if(n.viewport&&n.isPositioned){let s=function(){const c=l.scrollTop>0;a(c)};const l=n.viewport;return s(),l.addEventListener("scroll",s),()=>l.removeEventListener("scroll",s)}},[n.viewport,n.isPositioned]),r?h.jsx(ec,{...e,ref:i,onAutoScroll:()=>{const{viewport:s,selectedItem:l}=n;s&&l&&(s.scrollTop=s.scrollTop-l.offsetHeight)}}):null});Ql.displayName=_r;var Cr="SelectScrollDownButton",Jl=S.forwardRef((e,t)=>{const n=Be(Cr,e.__scopeSelect),o=br(Cr,e.__scopeSelect),[r,a]=S.useState(!1),i=_e(t,o.onScrollButtonChange);return He(()=>{if(n.viewport&&n.isPositioned){let s=function(){const c=l.scrollHeight-l.clientHeight,d=Math.ceil(l.scrollTop)<c;a(d)};const l=n.viewport;return s(),l.addEventListener("scroll",s),()=>l.removeEventListener("scroll",s)}},[n.viewport,n.isPositioned]),r?h.jsx(ec,{...e,ref:i,onAutoScroll:()=>{const{viewport:s,selectedItem:l}=n;s&&l&&(s.scrollTop=s.scrollTop+l.offsetHeight)}}):null});Jl.displayName=Cr;var ec=S.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:o,...r}=e,a=Be("SelectScrollButton",n),i=S.useRef(null),s=Kn(n),l=S.useCallback(()=>{i.current!==null&&(window.clearInterval(i.current),i.current=null)},[]);return S.useEffect(()=>()=>l(),[l]),He(()=>{var c,d;(d=(c=s().find(u=>u.ref.current===document.activeElement))==null?void 0:c.ref.current)==null||d.scrollIntoView({block:"nearest"})},[s]),h.jsx(se.div,{"aria-hidden":!0,...r,ref:t,style:{flexShrink:0,...r.style},onPointerDown:re(r.onPointerDown,()=>{i.current===null&&(i.current=window.setInterval(o,50))}),onPointerMove:re(r.onPointerMove,()=>{var c;(c=a.onItemLeave)==null||c.call(a),i.current===null&&(i.current=window.setInterval(o,50))}),onPointerLeave:re(r.onPointerLeave,()=>{l()})})}),ay="SelectSeparator",tc=S.forwardRef((e,t)=>{const{__scopeSelect:n,...o}=e;return h.jsx(se.div,{"aria-hidden":!0,...o,ref:t})});tc.displayName=ay;var Nr="SelectArrow",iy=S.forwardRef((e,t)=>{const{__scopeSelect:n,...o}=e,r=Wn(n),a=Ve(Nr,n),i=Be(Nr,n);return a.open&&i.position==="popper"?h.jsx(hv,{...r,...o,ref:t}):null});iy.displayName=Nr;function nc(e){return e===""||e===void 0}var oc=S.forwardRef((e,t)=>{const{value:n,...o}=e,r=S.useRef(null),a=_e(t,r),i=qx(n);return S.useEffect(()=>{const s=r.current,l=window.HTMLSelectElement.prototype,c=Object.getOwnPropertyDescriptor(l,"value").set;if(i!==n&&c){const d=new Event("change",{bubbles:!0});c.call(s,n),s.dispatchEvent(d)}},[i,n]),h.jsx(Bx,{asChild:!0,children:h.jsx("select",{...o,ref:a,defaultValue:n})})});oc.displayName="BubbleSelect";function rc(e){const t=Hx(e),n=S.useRef(""),o=S.useRef(0),r=S.useCallback(i=>{const s=n.current+i;t(s),function l(c){n.current=c,window.clearTimeout(o.current),c!==""&&(o.current=window.setTimeout(()=>l(""),1e3))}(s)},[t]),a=S.useCallback(()=>{n.current="",window.clearTimeout(o.current)},[]);return S.useEffect(()=>()=>window.clearTimeout(o.current),[]),[n,r,a]}function ac(e,t,n){const o=t.length>1&&Array.from(t).every(s=>s===t[0])?t[0]:t,r=n?e.indexOf(n):-1;let a=sy(e,Math.max(r,0));o.length===1&&(a=a.filter(s=>s!==n));const i=a.find(s=>s.textValue.toLowerCase().startsWith(o.toLowerCase()));return i!==n?i:void 0}function sy(e,t){return e.map((n,o)=>e[(t+o)%e.length])}var ly=Il,ic=Rl,cy=zl,dy=Tl,uy=Ll,sc=$l,fy=Fl,lc=Xl,cc=Wl,hy=Gl,py=ql,dc=Ql,uc=Jl,fc=tc;Gr=ly,sa=cy,po=S.forwardRef(({className:e,children:t,...n},o)=>h.jsxs(ic,{ref:o,className:Q("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...n,children:[t,h.jsx(dy,{asChild:!0,children:h.jsx(le,{name:"chevron-down",className:"h-4 w-4 opacity-50"})})]})),po.displayName=ic.displayName;const hc=S.forwardRef(({className:e,...t},n)=>h.jsx(dc,{ref:n,className:Q("flex cursor-default items-center justify-center py-1",e),...t,children:h.jsx(le,{name:"chevron-up",className:"h-4 w-4"})}));hc.displayName=dc.displayName;const pc=S.forwardRef(({className:e,...t},n)=>h.jsx(uc,{ref:n,className:Q("flex cursor-default items-center justify-center py-1",e),...t,children:h.jsx(le,{name:"chevron-down",className:"h-4 w-4"})}));pc.displayName=uc.displayName,go=S.forwardRef(({className:e,children:t,position:n="popper",...o},r)=>h.jsx(uy,{children:h.jsxs(sc,{ref:r,className:Q("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...o,children:[h.jsx(hc,{}),h.jsx(fy,{className:Q("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),h.jsx(pc,{})]})})),go.displayName=sc.displayName;const gy=S.forwardRef(({className:e,...t},n)=>h.jsx(lc,{ref:n,className:Q("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));gy.displayName=lc.displayName,mo=S.forwardRef(({className:e,children:t,...n},o)=>h.jsxs(cc,{ref:o,className:Q("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[h.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:h.jsx(py,{children:h.jsx(le,{name:"check",className:"h-4 w-4"})})}),h.jsx(hy,{children:t})]})),mo.displayName=cc.displayName;const my=S.forwardRef(({className:e,...t},n)=>h.jsx(fc,{ref:n,className:Q("-mx-1 my-1 h-px bg-muted",e),...t}));my.displayName=fc.displayName;var Re="Accordion",yy=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[Er,xy,vy]=Fc(Re),[Un,$v]=Hr(Re,[vy,Jc]),kr=Jc(),gc=me.forwardRef((e,t)=>{const{type:n,...o}=e,r=o,a=o;return h.jsx(Er.Provider,{scope:e.__scopeAccordion,children:n==="multiple"?h.jsx(_y,{...a,ref:t}):h.jsx(Sy,{...r,ref:t})})});gc.displayName=Re;var[mc,wy]=Un(Re),[yc,by]=Un(Re,{collapsible:!1}),Sy=me.forwardRef((e,t)=>{const{value:n,defaultValue:o,onValueChange:r=()=>{},collapsible:a=!1,...i}=e,[s,l]=Ut({prop:n,defaultProp:o,onChange:r});return h.jsx(mc,{scope:e.__scopeAccordion,value:s?[s]:[],onItemOpen:l,onItemClose:me.useCallback(()=>a&&l(""),[a,l]),children:h.jsx(yc,{scope:e.__scopeAccordion,collapsible:a,children:h.jsx(xc,{...i,ref:t})})})}),_y=me.forwardRef((e,t)=>{const{value:n,defaultValue:o,onValueChange:r=()=>{},...a}=e,[i=[],s]=Ut({prop:n,defaultProp:o,onChange:r}),l=me.useCallback(d=>s((u=[])=>[...u,d]),[s]),c=me.useCallback(d=>s((u=[])=>u.filter(f=>f!==d)),[s]);return h.jsx(mc,{scope:e.__scopeAccordion,value:i,onItemOpen:l,onItemClose:c,children:h.jsx(yc,{scope:e.__scopeAccordion,collapsible:!0,children:h.jsx(xc,{...a,ref:t})})})}),[Cy,qn]=Un(Re),xc=me.forwardRef((e,t)=>{const{__scopeAccordion:n,disabled:o,dir:r,orientation:a="vertical",...i}=e,s=me.useRef(null),l=_e(s,t),c=xy(n),d=Zr(r)==="ltr",u=re(e.onKeyDown,f=>{var k;if(!yy.includes(f.key))return;const p=f.target,y=c().filter(O=>{var A;return!((A=O.ref.current)!=null&&A.disabled)}),m=y.findIndex(O=>O.ref.current===p),b=y.length;if(m===-1)return;f.preventDefault();let g=m;const w=0,x=b-1,v=()=>{g=m+1,g>x&&(g=w)},C=()=>{g=m-1,g<w&&(g=x)};switch(f.key){case"Home":g=w;break;case"End":g=x;break;case"ArrowRight":a==="horizontal"&&(d?v():C());break;case"ArrowDown":a==="vertical"&&v();break;case"ArrowLeft":a==="horizontal"&&(d?C():v());break;case"ArrowUp":a==="vertical"&&C();break}const I=g%b;(k=y[I].ref.current)==null||k.focus()});return h.jsx(Cy,{scope:n,disabled:o,direction:r,orientation:a,children:h.jsx(Er.Slot,{scope:n,children:h.jsx(se.div,{...i,"data-orientation":a,ref:l,onKeyDown:o?void 0:u})})})}),Qn="AccordionItem",[Ny,Pr]=Un(Qn),vc=me.forwardRef((e,t)=>{const{__scopeAccordion:n,value:o,...r}=e,a=qn(Qn,n),i=wy(Qn,n),s=kr(n),l=qt(),c=o&&i.value.includes(o)||!1,d=a.disabled||e.disabled;return h.jsx(Ny,{scope:n,open:c,disabled:d,triggerId:l,children:h.jsx(gv,{"data-orientation":a.orientation,"data-state":Nc(c),...s,...r,ref:t,disabled:d,open:c,onOpenChange:u=>{u?i.onItemOpen(o):i.onItemClose(o)}})})});vc.displayName=Qn;var wc="AccordionHeader",bc=me.forwardRef((e,t)=>{const{__scopeAccordion:n,...o}=e,r=qn(Re,n),a=Pr(wc,n);return h.jsx(se.h3,{"data-orientation":r.orientation,"data-state":Nc(a.open),"data-disabled":a.disabled?"":void 0,...o,ref:t})});bc.displayName=wc;var Mr="AccordionTrigger",Sc=me.forwardRef((e,t)=>{const{__scopeAccordion:n,...o}=e,r=qn(Re,n),a=Pr(Mr,n),i=by(Mr,n),s=kr(n);return h.jsx(Er.ItemSlot,{scope:n,children:h.jsx(mv,{"aria-disabled":a.open&&!i.collapsible||void 0,"data-orientation":r.orientation,id:a.triggerId,...s,...o,ref:t})})});Sc.displayName=Mr;var _c="AccordionContent",Cc=me.forwardRef((e,t)=>{const{__scopeAccordion:n,...o}=e,r=qn(Re,n),a=Pr(_c,n),i=kr(n);return h.jsx(yv,{role:"region","aria-labelledby":a.triggerId,"data-orientation":r.orientation,...i,...o,ref:t,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...e.style}})});Cc.displayName=_c;function Nc(e){return e?"open":"closed"}var Ey=gc,ky=vc,Py=bc,Ec=Sc,kc=Cc;la=Ey,xo=S.forwardRef(({className:e,...t},n)=>h.jsx(ky,{ref:n,className:Q("border-b",e),...t})),xo.displayName="AccordionItem",vo=S.forwardRef(({className:e,children:t,...n},o)=>h.jsx(Py,{className:"flex",children:h.jsxs(Ec,{ref:o,className:Q("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",e),...n,children:[t,h.jsx(le,{name:"chevron-down",className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})})),vo.displayName=Ec.displayName,ao=S.forwardRef(({className:e,children:t,...n},o)=>h.jsx(kc,{ref:o,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...n,children:h.jsx("div",{className:Q("pb-4 pt-0",e),children:t})})),ao.displayName=kc.displayName;let Pc;Pc=[1,2,3,4,5,6,7,8,9,10],sd=S.memo(e=>{const{t}=ke("flows"),[n,o]=S.useState(""),[r,a]=S.useState([]),[i,s]=S.useState("1"),{loading:l,onSimilaritySearch:c,onCreatePrompt:d,onCreateRetriever:u}=e,f=async()=>{a(await c(n,+i)),o("")},p=async y=>{y.key==="Enter"&&!y.shiftKey&&(y.preventDefault(),f())};return h.jsxs("div",{className:"mt-4 max-w-full",children:[h.jsx("div",{className:"bg-black/5 dark:bg-white/5 rounded-xl relative",children:h.jsxs("div",{className:"relative px-2 py-1 pb-2",children:[h.jsxs(Gr,{value:`${i}`,onValueChange:y=>s(y),children:[h.jsx(po,{className:"absolute left-0 !w-14 top-[2px] rounded-xl bg-transparent border-none focus:outline-none focus:ring-0 focus:border-opacity-0 focus:ring-transparent",children:h.jsx(sa,{placeholder:t("vector_database_node.k_select_placeholder")})}),h.jsx(go,{children:Pc.map(y=>h.jsx(mo,{value:`${y}`,children:y},`${y}`))})]}),h.jsx(td,{value:n,disabled:l,placeholder:t("vector_database_node.similarity_search_placeholder"),className:Q("w-full rounded-xl px-2 pl-11 border-none resize-none bg-transparent","min-h-8 max-h-8"),onKeyDown:p,onChange:y=>{o(y.target.value)}}),h.jsx("button",{type:"button",disabled:l,onClick:f,className:"absolute right-3 top-5 -translate-y-1/2 rounded-xl bg-black/5 dark:bg-white/5 p-1",children:h.jsx(le,{name:l?"loader-circle":"arrow-right",className:Q("w-4 h-4 dark:text-white",n?"opacity-100":"opacity-30",l?"animate-spin":"")})})]})}),h.jsx(la,{type:"single",collapsible:!0,children:r==null?void 0:r.map(([y,m],b)=>h.jsxs(xo,{value:`${b}`,children:[h.jsxs(vo,{children:[`[${m.toFixed(2)}] ${y.pageContent}`.substring(0,32),"..."]}),h.jsx(ao,{children:y.pageContent})]},`${b}`))}),h.jsxs("div",{className:"w-full mt-4 flex flex-col gap-1",children:[u?h.jsx(no,{disabled:l,onClick:u,className:"w-full",children:t("vector_database_node.to_retriever")}):void 0,r!=null&&r.length&&d?h.jsx(no,{disabled:l,onClick:()=>d(r),className:"w-full",children:t("vector_database_node.create_prompt")}):void 0]})]})}),vd=S.memo(({loading:e,onCreateData:t})=>{const{t:n}=ke("flows"),[o,r]=S.useState(""),[a,i]=S.useState(""),s=async()=>{a&&(await t({id:o,content:a}),r(""),i(""))};return h.jsxs("div",{className:"min-w-80",children:[h.jsxs("div",{className:"flex flex-col space-y-1.5 mt-3",children:[h.jsx(Fe,{htmlFor:"name",children:n("vector_database_node.add_text.id")}),h.jsx(mt,{value:o,disabled:e,onChange:l=>r(l.target.value||""),placeholder:n("vector_database_node.add_text.id_placeholder"),className:"mb-4"}),h.jsxs(Fe,{htmlFor:"name",children:[n("vector_database_node.add_text.content")," ",h.jsx("span",{className:"text-red-600",children:"*"})]}),h.jsx(td,{value:a,disabled:e,onChange:l=>i(l.target.value||""),placeholder:n("vector_database_node.add_text.content_placeholder")})]}),h.jsx("div",{className:"flex justify-between mt-6",children:h.jsx(ed,{loading:e,disabled:!(a!=null&&a.length),onClick:s,className:"w-full",children:n("vector_database_node.add_text.add")})})]})}),ea=({className:e,size:t=200,duration:n=15,anchor:o=90,borderWidth:r=1.5,colorFrom:a="#ffaa40",colorTo:i="#9c40ff",delay:s=0})=>h.jsx("div",{style:{"--size":t,"--duration":n,"--anchor":o,"--border-width":r,"--color-from":a,"--color-to":i,"--delay":`-${s}s`},className:Q("pointer-events-none absolute inset-0 rounded-[inherit] [border:calc(var(--border-width)*1px)_solid_transparent]","![mask-clip:padding-box,border-box] ![mask-composite:intersect] [mask:linear-gradient(transparent,transparent),linear-gradient(white,white)]","after:absolute after:aspect-square after:w-[calc(var(--size)*1px)] after:animate-border-beam after:[animation-delay:var(--delay)] after:[background:linear-gradient(to_left,var(--color-from),var(--color-to),transparent)] after:[offset-anchor:calc(var(--anchor)*1%)_50%] after:[offset-path:rect(0_auto_auto_0_round_calc(var(--size)*1px))]",e)});function My({accept:e,maxSize:t}){const{t:n}=ke("atoms"),[o,r]=S.useState(""),[a,i]=S.useState(""),s=S.useRef(null),[l,c]=S.useState(0),d=f=>{var y;const p=(y=f.target.files)==null?void 0:y[0];u(p)},u=f=>{if(i(""),f){if(t&&f.size>t*1024*1024){i(n("file_upload_input.errors.max_size",{maxSize:t,fileSize:(f.size/1024/1024).toFixed(2)}));return}const p=e==null?void 0:e.split(",").map(y=>y.replace(".","").trim());if(e&&!f.type.match(e.replace("/*",""))&&!(p!=null&&p.some(y=>f.type.includes(y)))){i(n("file_upload_input.errors.accept",{accept:e}));return}return c(f.size),r(f.name),f}};return{fileName:o,error:a,fileInputRef:s,handleFileSelect:d,validateAndSetFile:u,clearFile:()=>{r(""),i(""),c(0),s.current&&(s.current.value="")},fileSize:l}}function jy({file:e,setFile:t,loading:n,progress:o,fileOptions:r}){const{toast:a}=Yx(),{t:i}=ke("atoms"),[s,l]=S.useState(!1),{fileName:c,fileInputRef:d,clearFile:u,error:f,validateAndSetFile:p,fileSize:y}=My({accept:(r==null?void 0:r.accept)||"image/*",maxSize:(r==null?void 0:r.maxSize)||3});S.useEffect(()=>{e||u()},[u,e]),S.useEffect(()=>{f&&a({title:f,variant:"destructive"})},[f,a]);function m(v){const C=p(v);C&&t(C)}function b(v){v.preventDefault(),l(!1);const C=v.dataTransfer.files[0];C&&m(C)}function g(v){var I;const C=(I=v.target.files)==null?void 0:I[0];C&&m(C)}function w(){u(),t(void 0)}const x=S.useMemo(()=>{if(!e)return h.jsx("div",{className:"w-16 h-16 rounded-lg bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center",children:h.jsx(le,{name:"file-text",className:"w-8 h-8 text-zinc-400"})});const v=e.type.startsWith("image/");return h.jsx("div",{className:"relative w-16 h-16 rounded-lg overflow-hidden",children:v?h.jsx("img",{src:URL.createObjectURL(e),alt:"Preview",className:"w-full h-full object-cover"}):h.jsx(le,{className:"w-14 h-14",name:"file-text"})})},[e]);return h.jsx(h.Fragment,{children:h.jsxs("div",{className:Q("relative group cursor-pointer","rounded-lg border-2 border-dashed","transition-colors duration-200",s?"border-indigo-500 bg-indigo-50/50 dark:bg-indigo-500/10":"border-zinc-200 dark:border-zinc-800"),onDragOver:v=>{v.preventDefault(),l(!0)},onDragLeave:()=>l(!1),onDrop:b,onClick:()=>{var v;return(v=d.current)==null?void 0:v.click()},onKeyDown:v=>{var C;(v.key==="Enter"||v.key===" ")&&(v.preventDefault(),(C=d.current)==null||C.click())},"aria-label":"Upload file",children:[h.jsx("input",{ref:d,type:"file",disabled:n||!!(o&&o<1),accept:(r==null?void 0:r.accept)||"image/*",onChange:g,className:"hidden"}),h.jsx("div",{className:"p-8 space-y-4",children:c?h.jsxs("div",{className:"flex items-center gap-4",children:[x,h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsxs("p",{className:"text-sm font-medium truncate",children:[c||"No file selected"," ",h.jsx("span",{className:"text-xs text-zinc-500 leading-5",children:y?`(${(y/1024/1024).toFixed(2)} MB)`:""})]}),o&&o<1?h.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[h.jsxs("p",{children:[(o*100).toFixed(2)," %"]}),h.jsx("div",{className:"h-1 flex-1 bg-zinc-100 dark:bg-zinc-800 rounded-full overflow-hidden items-center flex",children:h.jsx("div",{className:"h-full bg-indigo-500 transition-all duration-200",style:{width:`${o*100}%`}})})]}):void 0]}),h.jsx("button",{type:"button",disabled:n||!!(o&&o<1),onClick:v=>{v.stopPropagation(),w()},className:"p-1 hover:bg-zinc-100 dark:hover:bg-zinc-800 rounded",children:h.jsx(le,{name:"x",className:"w-5 h-5 text-zinc-400"})}),o&&o<1?h.jsx(ea,{className:"rounded-lg"}):void 0]}):h.jsxs("div",{className:"flex flex-col items-center gap-2",children:[h.jsx(le,{name:"upload",className:"w-8 h-8 text-zinc-400 dark:text-zinc-500"}),h.jsx("p",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:i("file_upload_input.drop_file")})]})})]})})}let Mc;Mc=Hc("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),oo=S.forwardRef(({className:e,variant:t,...n},o)=>h.jsx("div",{ref:o,role:"alert",className:Q(Mc({variant:t}),e),...n})),oo.displayName="Alert",qr=S.forwardRef(({className:e,...t},n)=>h.jsx("h5",{ref:n,className:Q("mb-1 font-medium leading-none tracking-tight",e),...t})),qr.displayName="AlertTitle",Jr=S.forwardRef(({className:e,...t},n)=>h.jsx("div",{ref:n,className:Q("text-sm [&_p]:leading-relaxed",e),...t})),Jr.displayName="AlertDescription",rd=function({onFileSubmit:e,fileOptions:t,progress:n,loading:o}){const{t:r}=ke("flows"),[a,i]=S.useState(),s=async()=>{a&&(await e(a),i(void 0))};return h.jsxs("div",{className:"w-full max-w-full space-y-2 mt-4",children:[h.jsxs("div",{className:"mb-6",children:[h.jsx(jy,{progress:n,loading:o,fileOptions:t,setFile:i,file:a}),h.jsx(oo,{variant:"default",className:"mt-2 border-none max-w-96",children:r("vector_database_node.add_file.alert_file_size")})]}),h.jsx(ed,{loading:o,disabled:!a,onClick:s,className:"w-full mt-4",children:r("vector_database_node.add_file.index")})]})},io=S.forwardRef(({className:e,...t},n)=>h.jsx("div",{className:"relative w-full overflow-auto",children:h.jsx("table",{ref:n,className:Q("w-full caption-bottom text-sm",e),...t})})),io.displayName="Table",so=S.forwardRef(({className:e,...t},n)=>h.jsx("thead",{ref:n,className:Q("[&_tr]:border-b",e),...t})),so.displayName="TableHeader",lo=S.forwardRef(({className:e,...t},n)=>h.jsx("tbody",{ref:n,className:Q("[&_tr:last-child]:border-0",e),...t})),lo.displayName="TableBody";const Oy=S.forwardRef(({className:e,...t},n)=>h.jsx("tfoot",{ref:n,className:Q("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));Oy.displayName="TableFooter",Qt=S.forwardRef(({className:e,...t},n)=>h.jsx("tr",{ref:n,className:Q("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t})),Qt.displayName="TableRow",Jt=S.forwardRef(({className:e,...t},n)=>h.jsx("th",{ref:n,className:Q("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t})),Jt.displayName="TableHead",en=S.forwardRef(({className:e,...t},n)=>h.jsx("td",{ref:n,className:Q("align-middle [&:has([role=checkbox])]:pr-0",e),...t})),en.displayName="TableCell";const Iy=S.forwardRef(({className:e,...t},n)=>h.jsx("caption",{ref:n,className:Q("mt-4 text-sm text-muted-foreground",e),...t}));Iy.displayName="TableCaption";const jc=({className:e,...t})=>h.jsx("nav",{role:"navigation","aria-label":"pagination",className:Q("mx-auto flex w-full justify-center",e),...t});jc.displayName="Pagination";const Oc=S.forwardRef(({className:e,...t},n)=>h.jsx("ul",{ref:n,className:Q("flex flex-row items-center gap-1",e),...t}));Oc.displayName="PaginationContent";const pt=S.forwardRef(({className:e,...t},n)=>h.jsx("li",{ref:n,className:Q("",e),...t}));pt.displayName="PaginationItem";const Jn=({className:e,isActive:t,size:n="icon",...o})=>h.jsx("a",{"aria-current":t?"page":void 0,className:Q(xv({variant:t?"outline":"ghost",size:n}),e),...o});Jn.displayName="PaginationLink";const Ic=({className:e,...t})=>{const{t:n}=ke("atoms");return h.jsxs(Jn,{"aria-label":"Go to previous page",size:"default",className:Q("gap-1 pl-2.5",e),...t,children:[h.jsx(le,{name:"chevron-left",className:"h-4 w-4"}),h.jsx("span",{children:n("pagination.previous")})]})};Ic.displayName="PaginationPrevious";const Ac=({className:e,...t})=>{const{t:n}=ke("atoms");return h.jsxs(Jn,{"aria-label":"Go to next page",size:"default",className:Q("gap-1 pr-2.5",e),...t,children:[h.jsx("span",{children:n("pagination.next")}),h.jsx(le,{name:"chevron-right",className:"h-4 w-4"})]})};Ac.displayName="PaginationNext";const jr=({className:e,...t})=>{const{t:n}=ke("atoms");return h.jsxs("span",{"aria-hidden":!0,className:Q("flex h-9 w-9 items-center justify-center",e),...t,children:[h.jsx(le,{name:"ellipsis",className:"h-4 w-4"}),h.jsx("span",{className:"sr-only",children:n("pagination.more_pages")})]})};jr.displayName="PaginationEllipsis",ta=Zx(({title:e,content:t})=>{const n=Yc();return h.jsx(vv,{open:n.visible,onOpenChange:n.hide,children:h.jsxs(wv,{className:"sm:max-w-2xl",children:[h.jsx(bv,{children:h.jsxs("div",{className:"flex",children:[h.jsx(le,{name:"file",className:"mr-2 h-4 w-4"}),h.jsx(Sv,{children:e})]})}),h.jsx("div",{className:"mx-auto w-full min-h-96 max-h-96 overflow-hidden",children:h.jsx("div",{className:"relative w-full h-full overflow-hidden rounded-xl p-1 border border-border",children:h.jsx("pre",{className:"break-all h-full overflow-y-auto bg-background font-mono text-xs w-full",children:t})})})]})})}),od=S.memo(e=>{const{data:t,headers:n,limitLengthByColumns:o,showPerPage:r=7,paginationShowLimit:a=1,contentLengthLimit:i=64}=e,[s,l]=S.useState({page:1,maxPage:1}),c=Yc(ta);S.useEffect(()=>{l(p=>({...p,maxPage:Math.ceil(t.length/r)}))},[t.length,r]);const d=S.useMemo(()=>t.slice((s.page-1)*r,s.page*r),[t,s.page,r]),u=S.useMemo(()=>{let p=!1,y=!1;return h.jsx(jc,{className:"mt-4 mb-4 ml-4 mr-4 w-full",children:h.jsxs(Oc,{children:[s.page>1?h.jsx(pt,{onClick:()=>l(m=>({...m,page:m.page-1})),children:h.jsx(Ic,{})}):null,Array.from({length:s.maxPage},(m,b)=>{const g=b+1,w=b===0||b===s.maxPage-1;return!w&&g>s.page+a&&y?null:!w&&g>s.page+a?(y=!0,h.jsx(pt,{children:h.jsx(jr,{})},b)):!w&&g<s.page-a&&p?null:!w&&g<s.page-a?(p=!0,h.jsx(pt,{children:h.jsx(jr,{})},b)):h.jsx(pt,{onClick:()=>l(x=>({...x,page:g})),children:h.jsx(Jn,{isActive:b+1===s.page,children:b+1})},b)}),s.page<s.maxPage?h.jsx(pt,{onClick:()=>l(m=>({...m,page:m.page+1})),children:h.jsx(Ac,{})}):null]})})},[s.maxPage,s.page,a]),f=(p,y)=>{if(!p)return;const m=Array.isArray(p)?p:n.map(b=>p[b]);return h.jsxs(Qt,{children:[h.jsx(en,{children:h.jsx("div",{className:"font-bold",children:y+1})}),m.map((b,g)=>{const w=typeof b=="string"?b:JSON.stringify(b),x=n[g],v=(o==null?void 0:o[x])||i,C=w.length>v;return h.jsx(en,{className:"p-4",children:h.jsxs("div",{onClick:C?()=>c.show({title:x,content:w}):void 0,className:"flex gap-4",children:[C?`${w.substring(0,v)}...`:w,C?h.jsx(le,{className:"w-6 mt-[-2px]",name:"chevron-right"}):null]})},`${g}`)})]},`${y}`)};return h.jsxs(h.Fragment,{children:[h.jsxs(io,{className:"w-full",children:[h.jsx(so,{children:h.jsxs(Qt,{children:[h.jsx(Jt,{},"index"),n?n.map(p=>h.jsx(Jt,{children:h.jsx("div",{className:"font-bold",children:p})},p)):void 0]})}),h.jsx(lo,{children:d!=null&&d.length?d==null?void 0:d.map(f):void 0})]}),u]})});var Or,Rc;function Ay(){if(Rc)return Or;Rc=1;var e=Qx(),t=1/0,n=17976931348623157e292;function o(r){if(!r)return r===0?r:0;if(r=e(r),r===t||r===-t){var a=r<0?-1:1;return a*n}return r===r?r:0}return Or=o,Or}var Ir,Dc;function Ry(){if(Dc)return Ir;Dc=1;var e=Ay();function t(n){var o=e(n),r=o%1;return o===o?r?o-r:o:0}return Ir=t,Ir}var Ar,zc;function Dy(){if(zc)return Ar;zc=1;var e=ev(),t=Jx(),n=Ry(),o=Math.ceil,r=Math.max;function a(i,s,l){(l?t(i,s,l):s===void 0)?s=1:s=r(n(s),0);var c=i==null?0:i.length;if(!c||s<1)return[];for(var d=0,u=0,f=Array(o(c/s));d<c;)f[u++]=e(i,d,d+=s);return f}return Ar=a,Ar}var zy=Dy();ud=to(zy)});export{nd as $,oo as A,Xr as B,ro as C,od as D,ao as E,Kr as F,io as G,so as H,rd as I,Qt as J,Jt as K,ad as L,id as M,lo as N,en as O,Qe as P,co as Q,Wr as R,Gr as S,Ur as T,yt as U,sd as V,ld as W,U as X,tn as Y,cd as Z,dd as _,zv as __tla,ud as a,xt as a0,qr as a1,Qr as a2,nn as a3,on as a4,Jr as a5,ea as a6,ta as a7,fd as a8,rn as a9,ee as aa,ne as ab,hd as ac,pd as ad,an as ae,Ye as af,gd as ag,Ze as ah,md as ai,De as aj,yd as ak,xd as al,vd as b,na as c,wd as d,bd as e,oa as f,ra as g,aa as h,Sd as i,ye as j,ia as k,_d as l,Cd as m,uo as n,fo as o,ho as p,po as q,Je as r,sa as s,go as t,Nd as u,mo as v,yo as w,la as x,xo as y,vo as z};
