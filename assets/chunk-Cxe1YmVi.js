const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/few_shot-ZSQltW5J.js","assets/routes-u3SNg5Jg.js","assets/index-8-pJaDMF.js","assets/index-B2Kz5wtG.css","assets/toNumber-Dhkog0VQ.js","assets/LLMIcon-CUYaTADE.js","assets/dot-DA86Xfyx.js","assets/createLucideIcon-BjNtZP9Y.js","assets/popover-O6xj8nF7.js","assets/index-B7J2WeK0.js","assets/index-IiyPudT7.js","assets/index-D95kcCxR.js","assets/index-CTOJClKK.css","assets/pdf-C9p4cp-L.js"])))=>i.map(i=>d[i]);
import{g as to,R as ge,r as S,j as h,E as $r,I as mt,_ as Gt,v as $x,c as Q,d as ke,L as le,q as Fc,l as Ut,a as Vr,n as se,o as Vx,b as re,J as Yc,u as _e,z as He,V as Bx,K as Hx,y as Fx,N as Yx,O as Zx,e as Xx,w as Kx,x as Zc,__tla as Wx}from"./index-8-pJaDMF.js";import{a as Gx,b as Xc,c as Ux,d as qx,e as Qx,u as Jx,f as ev,g as tv,h as nv}from"./toNumber-Dhkog0VQ.js";import{F as ce,ab as ov,g as ae,u as Br,N as Kc,ac as rv,ad as iv,ae as Wc,af as Hr,ag as Gc,ah as av,ai as Uc,B as no,aj as Fe,ak as gt,o as qc,m as Fr,a6 as qt,l as Qc,n as sv,I as lv,al as Jc,am as cv,an as dv,a7 as uv,a8 as fv,ao as hv,ap as pv,aq as mv,ar as gv,as as ed,at as yv,au as xv,av as vv,L as td,b as wv,r as bv,s as Sv,t as _v,v as Cv,__tla as Nv}from"./routes-u3SNg5Jg.js";import{I as Ev,e as kv,f as jv,O as Pv,w as Mv,G as Ov,h as Av,i as Iv,j as nd,__tla as Rv}from"./LLMIcon-CUYaTADE.js";import{P as zv,a as Dv,b as Tv,T as od,__tla as Lv}from"./popover-O6xj8nF7.js";let Yr,oo,Zr,ro,rd,io,Xr,ao,so,id,Qt,Jt,ad,sd,lo,en,Qe,tn,Kr,Wr,Gr,yt,ld,cd,U,dd,ud,Ur,fd,qr,nn,on,Qr,Jr,hd,xt,pd,rn,ne,md,ee,gd,an,Ye,yd,Ze,xd,ze,vd,wd,bd,ei,Sd,ti,ni,oi,_d,ye,Cd,ri,Nd,Ed,co,uo,fo,ho,Je,ii,po,kd,mo,go,ai,yo,xo,$v=Promise.all([(()=>{try{return Wx}catch{}})(),(()=>{try{return Nv}catch{}})(),(()=>{try{return Rv}catch{}})(),(()=>{try{return Lv}catch{}})()]).then(async()=>{let vo,si;Xr=(e=>(e.VECTOR_DATABASE_RETREIVER="VECTOR_DATABASE_RETREIVER",e.DEFAULT_EMBEDDING_MODEL="DEFAULT_EMBEDDING_MODEL",e))(Xr||{});function jd(){if(si)return vo;si=1;var e="Expected a function";function t(n){if(typeof n!="function")throw new TypeError(e);return function(){var o=arguments;switch(o.length){case 0:return!n.call(this);case 1:return!n.call(this,o[0]);case 2:return!n.call(this,o[0],o[1]);case 3:return!n.call(this,o[0],o[1],o[2])}return!n.apply(this,o)}}return vo=t,vo}var wo,li;function Pd(){if(li)return wo;li=1;var e=Gx(),t=Xc(),n=Ux(),o=qx();function r(i,a){if(i==null)return{};var s=e(o(i),function(l){return[l]});return a=t(a),n(i,s,function(l,c){return a(l,c[0])})}return wo=r,wo}var bo,ci;function Md(){if(ci)return bo;ci=1;var e=Xc(),t=jd(),n=Pd();function o(r,i){return n(r,t(e(i)))}return bo=o,bo}var Od=Md();nn=to(Od);var So,di;function Ad(){if(di)return So;di=1;function e(t){return t===void 0}return So=e,So}var Id=Ad();on=to(Id);function ie(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,o;n<e.length;n++)(o=ie(e[n]))!==""&&(t+=(t&&" ")+o);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var Rd={value:()=>{}};function sn(){for(var e=0,t=arguments.length,n={},o;e<t;++e){if(!(o=arguments[e]+"")||o in n||/[\s.]/.test(o))throw new Error("illegal type: "+o);n[o]=[]}return new ln(n)}function ln(e){this._=e}function zd(e,t){return e.trim().split(/^|\s+/).map(function(n){var o="",r=n.indexOf(".");if(r>=0&&(o=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:o}})}ln.prototype=sn.prototype={constructor:ln,on:function(e,t){var n=this._,o=zd(e+"",n),r,i=-1,a=o.length;if(arguments.length<2){for(;++i<a;)if((r=(e=o[i]).type)&&(r=Dd(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++i<a;)if(r=(e=o[i]).type)n[r]=ui(n[r],e.name,t);else if(t==null)for(r in n)n[r]=ui(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new ln(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),o=0,r,i;o<r;++o)n[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=this._[e],o=0,r=i.length;o<r;++o)i[o].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)}};function Dd(e,t){for(var n=0,o=e.length,r;n<o;++n)if((r=e[n]).name===t)return r.value}function ui(e,t,n){for(var o=0,r=e.length;o<r;++o)if(e[o].name===t){e[o]=Rd,e=e.slice(0,o).concat(e.slice(o+1));break}return n!=null&&e.push({name:t,value:n}),e}var _o="http://www.w3.org/1999/xhtml";const fi={svg:"http://www.w3.org/2000/svg",xhtml:_o,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function cn(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),fi.hasOwnProperty(t)?{space:fi[t],local:e}:e}function Td(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===_o&&t.documentElement.namespaceURI===_o?t.createElement(e):t.createElementNS(n,e)}}function Ld(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function hi(e){var t=cn(e);return(t.local?Ld:Td)(t)}function $d(){}function Co(e){return e==null?$d:function(){return this.querySelector(e)}}function Vd(e){typeof e!="function"&&(e=Co(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i=t[r],a=i.length,s=o[r]=new Array(a),l,c,d=0;d<a;++d)(l=i[d])&&(c=e.call(l,l.__data__,d,i))&&("__data__"in l&&(c.__data__=l.__data__),s[d]=c);return new pe(o,this._parents)}function Bd(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Hd(){return[]}function pi(e){return e==null?Hd:function(){return this.querySelectorAll(e)}}function Fd(e){return function(){return Bd(e.apply(this,arguments))}}function Yd(e){typeof e=="function"?e=Fd(e):e=pi(e);for(var t=this._groups,n=t.length,o=[],r=[],i=0;i<n;++i)for(var a=t[i],s=a.length,l,c=0;c<s;++c)(l=a[c])&&(o.push(e.call(l,l.__data__,c,a)),r.push(l));return new pe(o,r)}function mi(e){return function(){return this.matches(e)}}function gi(e){return function(t){return t.matches(e)}}var Zd=Array.prototype.find;function Xd(e){return function(){return Zd.call(this.children,e)}}function Kd(){return this.firstElementChild}function Wd(e){return this.select(e==null?Kd:Xd(typeof e=="function"?e:gi(e)))}var Gd=Array.prototype.filter;function Ud(){return Array.from(this.children)}function qd(e){return function(){return Gd.call(this.children,e)}}function Qd(e){return this.selectAll(e==null?Ud:qd(typeof e=="function"?e:gi(e)))}function Jd(e){typeof e!="function"&&(e=mi(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i=t[r],a=i.length,s=o[r]=[],l,c=0;c<a;++c)(l=i[c])&&e.call(l,l.__data__,c,i)&&s.push(l);return new pe(o,this._parents)}function yi(e){return new Array(e.length)}function eu(){return new pe(this._enter||this._groups.map(yi),this._parents)}function dn(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}dn.prototype={constructor:dn,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function tu(e){return function(){return e}}function nu(e,t,n,o,r,i){for(var a=0,s,l=t.length,c=i.length;a<c;++a)(s=t[a])?(s.__data__=i[a],o[a]=s):n[a]=new dn(e,i[a]);for(;a<l;++a)(s=t[a])&&(r[a]=s)}function ou(e,t,n,o,r,i,a){var s,l,c=new Map,d=t.length,u=i.length,f=new Array(d),p;for(s=0;s<d;++s)(l=t[s])&&(f[s]=p=a.call(l,l.__data__,s,t)+"",c.has(p)?r[s]=l:c.set(p,l));for(s=0;s<u;++s)p=a.call(e,i[s],s,i)+"",(l=c.get(p))?(o[s]=l,l.__data__=i[s],c.delete(p)):n[s]=new dn(e,i[s]);for(s=0;s<d;++s)(l=t[s])&&c.get(f[s])===l&&(r[s]=l)}function ru(e){return e.__data__}function iu(e,t){if(!arguments.length)return Array.from(this,ru);var n=t?ou:nu,o=this._parents,r=this._groups;typeof e!="function"&&(e=tu(e));for(var i=r.length,a=new Array(i),s=new Array(i),l=new Array(i),c=0;c<i;++c){var d=o[c],u=r[c],f=u.length,p=au(e.call(d,d&&d.__data__,c,o)),y=p.length,g=s[c]=new Array(y),b=a[c]=new Array(y),m=l[c]=new Array(f);n(d,u,g,b,m,p,t);for(var w=0,x=0,v,C;w<y;++w)if(v=g[w]){for(w>=x&&(x=w+1);!(C=b[x])&&++x<y;);v._next=C||null}}return a=new pe(a,o),a._enter=s,a._exit=l,a}function au(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function su(){return new pe(this._exit||this._groups.map(yi),this._parents)}function lu(e,t,n){var o=this.enter(),r=this,i=this.exit();return typeof e=="function"?(o=e(o),o&&(o=o.selection())):o=o.append(e+""),t!=null&&(r=t(r),r&&(r=r.selection())),n==null?i.remove():n(i),o&&r?o.merge(r).order():r}function cu(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,r=n.length,i=o.length,a=Math.min(r,i),s=new Array(r),l=0;l<a;++l)for(var c=n[l],d=o[l],u=c.length,f=s[l]=new Array(u),p,y=0;y<u;++y)(p=c[y]||d[y])&&(f[y]=p);for(;l<r;++l)s[l]=n[l];return new pe(s,this._parents)}function du(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o=e[t],r=o.length-1,i=o[r],a;--r>=0;)(a=o[r])&&(i&&a.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(a,i),i=a);return this}function uu(e){e||(e=fu);function t(u,f){return u&&f?e(u.__data__,f.__data__):!u-!f}for(var n=this._groups,o=n.length,r=new Array(o),i=0;i<o;++i){for(var a=n[i],s=a.length,l=r[i]=new Array(s),c,d=0;d<s;++d)(c=a[d])&&(l[d]=c);l.sort(t)}return new pe(r,this._parents).order()}function fu(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function hu(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function pu(){return Array.from(this)}function mu(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],r=0,i=o.length;r<i;++r){var a=o[r];if(a)return a}return null}function gu(){let e=0;for(const t of this)++e;return e}function yu(){return!this.node()}function xu(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var r=t[n],i=0,a=r.length,s;i<a;++i)(s=r[i])&&e.call(s,s.__data__,i,r);return this}function vu(e){return function(){this.removeAttribute(e)}}function wu(e){return function(){this.removeAttributeNS(e.space,e.local)}}function bu(e,t){return function(){this.setAttribute(e,t)}}function Su(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function _u(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Cu(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Nu(e,t){var n=cn(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((t==null?n.local?wu:vu:typeof t=="function"?n.local?Cu:_u:n.local?Su:bu)(n,t))}function xi(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Eu(e){return function(){this.style.removeProperty(e)}}function ku(e,t,n){return function(){this.style.setProperty(e,t,n)}}function ju(e,t,n){return function(){var o=t.apply(this,arguments);o==null?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function Pu(e,t,n){return arguments.length>1?this.each((t==null?Eu:typeof t=="function"?ju:ku)(e,t,n??"")):et(this.node(),e)}function et(e,t){return e.style.getPropertyValue(t)||xi(e).getComputedStyle(e,null).getPropertyValue(t)}function Mu(e){return function(){delete this[e]}}function Ou(e,t){return function(){this[e]=t}}function Au(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Iu(e,t){return arguments.length>1?this.each((t==null?Mu:typeof t=="function"?Au:Ou)(e,t)):this.node()[e]}function vi(e){return e.trim().split(/^|\s+/)}function No(e){return e.classList||new wi(e)}function wi(e){this._node=e,this._names=vi(e.getAttribute("class")||"")}wi.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function bi(e,t){for(var n=No(e),o=-1,r=t.length;++o<r;)n.add(t[o])}function Si(e,t){for(var n=No(e),o=-1,r=t.length;++o<r;)n.remove(t[o])}function Ru(e){return function(){bi(this,e)}}function zu(e){return function(){Si(this,e)}}function Du(e,t){return function(){(t.apply(this,arguments)?bi:Si)(this,e)}}function Tu(e,t){var n=vi(e+"");if(arguments.length<2){for(var o=No(this.node()),r=-1,i=n.length;++r<i;)if(!o.contains(n[r]))return!1;return!0}return this.each((typeof t=="function"?Du:t?Ru:zu)(n,t))}function Lu(){this.textContent=""}function $u(e){return function(){this.textContent=e}}function Vu(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Bu(e){return arguments.length?this.each(e==null?Lu:(typeof e=="function"?Vu:$u)(e)):this.node().textContent}function Hu(){this.innerHTML=""}function Fu(e){return function(){this.innerHTML=e}}function Yu(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Zu(e){return arguments.length?this.each(e==null?Hu:(typeof e=="function"?Yu:Fu)(e)):this.node().innerHTML}function Xu(){this.nextSibling&&this.parentNode.appendChild(this)}function Ku(){return this.each(Xu)}function Wu(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Gu(){return this.each(Wu)}function Uu(e){var t=typeof e=="function"?e:hi(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function qu(){return null}function Qu(e,t){var n=typeof e=="function"?e:hi(e),o=t==null?qu:typeof t=="function"?t:Co(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)})}function Ju(){var e=this.parentNode;e&&e.removeChild(this)}function ef(){return this.each(Ju)}function tf(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function nf(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function of(e){return this.select(e?nf:tf)}function rf(e){return arguments.length?this.property("__data__",e):this.node().__data__}function af(e){return function(t){e.call(this,t,this.__data__)}}function sf(e){return e.trim().split(/^|\s+/).map(function(t){var n="",o=t.indexOf(".");return o>=0&&(n=t.slice(o+1),t=t.slice(0,o)),{type:t,name:n}})}function lf(e){return function(){var t=this.__on;if(t){for(var n=0,o=-1,r=t.length,i;n<r;++n)i=t[n],(!e.type||i.type===e.type)&&i.name===e.name?this.removeEventListener(i.type,i.listener,i.options):t[++o]=i;++o?t.length=o:delete this.__on}}}function cf(e,t,n){return function(){var o=this.__on,r,i=af(t);if(o){for(var a=0,s=o.length;a<s;++a)if((r=o[a]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=i,r.options=n),r.value=t;return}}this.addEventListener(e.type,i,n),r={type:e.type,name:e.name,value:t,listener:i,options:n},o?o.push(r):this.__on=[r]}}function df(e,t,n){var o=sf(e+""),r,i=o.length,a;if(arguments.length<2){var s=this.node().__on;if(s){for(var l=0,c=s.length,d;l<c;++l)for(r=0,d=s[l];r<i;++r)if((a=o[r]).type===d.type&&a.name===d.name)return d.value}return}for(s=t?cf:lf,r=0;r<i;++r)this.each(s(o[r],t,n));return this}function _i(e,t,n){var o=xi(e),r=o.CustomEvent;typeof r=="function"?r=new r(t,n):(r=o.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function uf(e,t){return function(){return _i(this,e,t)}}function ff(e,t){return function(){return _i(this,e,t.apply(this,arguments))}}function hf(e,t){return this.each((typeof t=="function"?ff:uf)(e,t))}function*pf(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],r=0,i=o.length,a;r<i;++r)(a=o[r])&&(yield a)}var Ci=[null];function pe(e,t){this._groups=e,this._parents=t}function vt(){return new pe([[document.documentElement]],Ci)}function mf(){return this}pe.prototype=vt.prototype={constructor:pe,select:Vd,selectAll:Yd,selectChild:Wd,selectChildren:Qd,filter:Jd,data:iu,enter:eu,exit:su,join:lu,merge:cu,selection:mf,order:du,sort:uu,call:hu,nodes:pu,node:mu,size:gu,empty:yu,each:xu,attr:Nu,style:Pu,property:Iu,classed:Tu,text:Bu,html:Zu,raise:Ku,lower:Gu,append:Uu,insert:Qu,remove:ef,clone:of,datum:rf,on:df,dispatch:hf,[Symbol.iterator]:pf};function me(e){return typeof e=="string"?new pe([[document.querySelector(e)]],[document.documentElement]):new pe([[e]],Ci)}function gf(e){let t;for(;t=e.sourceEvent;)e=t;return e}function xe(e,t){if(e=gf(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,o=o.matrixTransform(t.getScreenCTM().inverse()),[o.x,o.y]}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}}return[e.pageX,e.pageY]}const yf={passive:!1},wt={capture:!0,passive:!1};function Eo(e){e.stopImmediatePropagation()}function tt(e){e.preventDefault(),e.stopImmediatePropagation()}function Ni(e){var t=e.document.documentElement,n=me(e).on("dragstart.drag",tt,wt);"onselectstart"in t?n.on("selectstart.drag",tt,wt):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Ei(e,t){var n=e.document.documentElement,o=me(e).on("dragstart.drag",null);t&&(o.on("click.drag",tt,wt),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const un=e=>()=>e;function ko(e,{sourceEvent:t,subject:n,target:o,identifier:r,active:i,x:a,y:s,dx:l,dy:c,dispatch:d}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:i,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:d}})}ko.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function xf(e){return!e.ctrlKey&&!e.button}function vf(){return this.parentNode}function wf(e,t){return t??{x:e.x,y:e.y}}function bf(){return navigator.maxTouchPoints||"ontouchstart"in this}function ki(){var e=xf,t=vf,n=wf,o=bf,r={},i=sn("start","drag","end"),a=0,s,l,c,d,u=0;function f(v){v.on("mousedown.drag",p).filter(o).on("touchstart.drag",b).on("touchmove.drag",m,yf).on("touchend.drag touchcancel.drag",w).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(v,C){if(!(d||!e.call(this,v,C))){var A=x(this,t.call(this,v,C),v,C,"mouse");A&&(me(v.view).on("mousemove.drag",y,wt).on("mouseup.drag",g,wt),Ni(v.view),Eo(v),c=!1,s=v.clientX,l=v.clientY,A("start",v))}}function y(v){if(tt(v),!c){var C=v.clientX-s,A=v.clientY-l;c=C*C+A*A>u}r.mouse("drag",v)}function g(v){me(v.view).on("mousemove.drag mouseup.drag",null),Ei(v.view,c),tt(v),r.mouse("end",v)}function b(v,C){if(e.call(this,v,C)){var A=v.changedTouches,k=t.call(this,v,C),O=A.length,I,R;for(I=0;I<O;++I)(R=x(this,k,v,C,A[I].identifier,A[I]))&&(Eo(v),R("start",v,A[I]))}}function m(v){var C=v.changedTouches,A=C.length,k,O;for(k=0;k<A;++k)(O=r[C[k].identifier])&&(tt(v),O("drag",v,C[k]))}function w(v){var C=v.changedTouches,A=C.length,k,O;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),k=0;k<A;++k)(O=r[C[k].identifier])&&(Eo(v),O("end",v,C[k]))}function x(v,C,A,k,O,I){var R=i.copy(),$=xe(I||A,C),D,T,_;if((_=n.call(v,new ko("beforestart",{sourceEvent:A,target:f,identifier:O,active:a,x:$[0],y:$[1],dx:0,dy:0,dispatch:R}),k))!=null)return D=_.x-$[0]||0,T=_.y-$[1]||0,function j(N,M,E){var P=$,z;switch(N){case"start":r[O]=j,z=a++;break;case"end":delete r[O],--a;case"drag":$=xe(E||M,C),z=a;break}R.call(N,v,new ko(N,{sourceEvent:M,subject:_,target:f,identifier:O,active:z,x:$[0]+D,y:$[1]+T,dx:$[0]-P[0],dy:$[1]-P[1],dispatch:R}),k)}}return f.filter=function(v){return arguments.length?(e=typeof v=="function"?v:un(!!v),f):e},f.container=function(v){return arguments.length?(t=typeof v=="function"?v:un(v),f):t},f.subject=function(v){return arguments.length?(n=typeof v=="function"?v:un(v),f):n},f.touchable=function(v){return arguments.length?(o=typeof v=="function"?v:un(!!v),f):o},f.on=function(){var v=i.on.apply(i,arguments);return v===i?f:v},f.clickDistance=function(v){return arguments.length?(u=(v=+v)*v,f):Math.sqrt(u)},f}function jo(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function ji(e,t){var n=Object.create(e.prototype);for(var o in t)n[o]=t[o];return n}function bt(){}var St=.7,fn=1/St,nt="\\s*([+-]?\\d+)\\s*",_t="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ce="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Sf=/^#([0-9a-f]{3,8})$/,_f=new RegExp(`^rgb\\(${nt},${nt},${nt}\\)$`),Cf=new RegExp(`^rgb\\(${Ce},${Ce},${Ce}\\)$`),Nf=new RegExp(`^rgba\\(${nt},${nt},${nt},${_t}\\)$`),Ef=new RegExp(`^rgba\\(${Ce},${Ce},${Ce},${_t}\\)$`),kf=new RegExp(`^hsl\\(${_t},${Ce},${Ce}\\)$`),jf=new RegExp(`^hsla\\(${_t},${Ce},${Ce},${_t}\\)$`),Pi={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};jo(bt,Ct,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Mi,formatHex:Mi,formatHex8:Pf,formatHsl:Mf,formatRgb:Oi,toString:Oi});function Mi(){return this.rgb().formatHex()}function Pf(){return this.rgb().formatHex8()}function Mf(){return Di(this).formatHsl()}function Oi(){return this.rgb().formatRgb()}function Ct(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Sf.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Ai(t):n===3?new fe(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?hn(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?hn(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=_f.exec(e))?new fe(t[1],t[2],t[3],1):(t=Cf.exec(e))?new fe(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Nf.exec(e))?hn(t[1],t[2],t[3],t[4]):(t=Ef.exec(e))?hn(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=kf.exec(e))?zi(t[1],t[2]/100,t[3]/100,1):(t=jf.exec(e))?zi(t[1],t[2]/100,t[3]/100,t[4]):Pi.hasOwnProperty(e)?Ai(Pi[e]):e==="transparent"?new fe(NaN,NaN,NaN,0):null}function Ai(e){return new fe(e>>16&255,e>>8&255,e&255,1)}function hn(e,t,n,o){return o<=0&&(e=t=n=NaN),new fe(e,t,n,o)}function Of(e){return e instanceof bt||(e=Ct(e)),e?(e=e.rgb(),new fe(e.r,e.g,e.b,e.opacity)):new fe}function Po(e,t,n,o){return arguments.length===1?Of(e):new fe(e,t,n,o??1)}function fe(e,t,n,o){this.r=+e,this.g=+t,this.b=+n,this.opacity=+o}jo(fe,Po,ji(bt,{brighter(e){return e=e==null?fn:Math.pow(fn,e),new fe(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?St:Math.pow(St,e),new fe(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new fe(Xe(this.r),Xe(this.g),Xe(this.b),pn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ii,formatHex:Ii,formatHex8:Af,formatRgb:Ri,toString:Ri}));function Ii(){return`#${Ke(this.r)}${Ke(this.g)}${Ke(this.b)}`}function Af(){return`#${Ke(this.r)}${Ke(this.g)}${Ke(this.b)}${Ke((isNaN(this.opacity)?1:this.opacity)*255)}`}function Ri(){const e=pn(this.opacity);return`${e===1?"rgb(":"rgba("}${Xe(this.r)}, ${Xe(this.g)}, ${Xe(this.b)}${e===1?")":`, ${e})`}`}function pn(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Xe(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Ke(e){return e=Xe(e),(e<16?"0":"")+e.toString(16)}function zi(e,t,n,o){return o<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ve(e,t,n,o)}function Di(e){if(e instanceof ve)return new ve(e.h,e.s,e.l,e.opacity);if(e instanceof bt||(e=Ct(e)),!e)return new ve;if(e instanceof ve)return e;e=e.rgb();var t=e.r/255,n=e.g/255,o=e.b/255,r=Math.min(t,n,o),i=Math.max(t,n,o),a=NaN,s=i-r,l=(i+r)/2;return s?(t===i?a=(n-o)/s+(n<o)*6:n===i?a=(o-t)/s+2:a=(t-n)/s+4,s/=l<.5?i+r:2-i-r,a*=60):s=l>0&&l<1?0:a,new ve(a,s,l,e.opacity)}function If(e,t,n,o){return arguments.length===1?Di(e):new ve(e,t,n,o??1)}function ve(e,t,n,o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}jo(ve,If,ji(bt,{brighter(e){return e=e==null?fn:Math.pow(fn,e),new ve(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?St:Math.pow(St,e),new ve(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*t,r=2*n-o;return new fe(Mo(e>=240?e-240:e+120,r,o),Mo(e,r,o),Mo(e<120?e+240:e-120,r,o),this.opacity)},clamp(){return new ve(Ti(this.h),mn(this.s),mn(this.l),pn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=pn(this.opacity);return`${e===1?"hsl(":"hsla("}${Ti(this.h)}, ${mn(this.s)*100}%, ${mn(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Ti(e){return e=(e||0)%360,e<0?e+360:e}function mn(e){return Math.max(0,Math.min(1,e||0))}function Mo(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Li=e=>()=>e;function Rf(e,t){return function(n){return e+n*t}}function zf(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(o){return Math.pow(e+o*t,n)}}function Df(e){return(e=+e)==1?$i:function(t,n){return n-t?zf(t,n,e):Li(isNaN(t)?n:t)}}function $i(e,t){var n=t-e;return n?Rf(e,n):Li(isNaN(e)?t:e)}const Vi=function e(t){var n=Df(t);function o(r,i){var a=n((r=Po(r)).r,(i=Po(i)).r),s=n(r.g,i.g),l=n(r.b,i.b),c=$i(r.opacity,i.opacity);return function(d){return r.r=a(d),r.g=s(d),r.b=l(d),r.opacity=c(d),r+""}}return o.gamma=e,o}(1);function De(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Oo=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ao=new RegExp(Oo.source,"g");function Tf(e){return function(){return e}}function Lf(e){return function(t){return e(t)+""}}function $f(e,t){var n=Oo.lastIndex=Ao.lastIndex=0,o,r,i,a=-1,s=[],l=[];for(e=e+"",t=t+"";(o=Oo.exec(e))&&(r=Ao.exec(t));)(i=r.index)>n&&(i=t.slice(n,i),s[a]?s[a]+=i:s[++a]=i),(o=o[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,l.push({i:a,x:De(o,r)})),n=Ao.lastIndex;return n<t.length&&(i=t.slice(n),s[a]?s[a]+=i:s[++a]=i),s.length<2?l[0]?Lf(l[0].x):Tf(t):(t=l.length,function(c){for(var d=0,u;d<t;++d)s[(u=l[d]).i]=u.x(c);return s.join("")})}var Bi=180/Math.PI,Hi={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Fi(e,t,n,o,r,i){var a,s,l;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(l=e*n+t*o)&&(n-=e*l,o-=t*l),(s=Math.sqrt(n*n+o*o))&&(n/=s,o/=s,l/=s),e*o<t*n&&(e=-e,t=-t,l=-l,a=-a),{translateX:r,translateY:i,rotate:Math.atan2(t,e)*Bi,skewX:Math.atan(l)*Bi,scaleX:a,scaleY:s}}var gn;function Vf(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Hi:Fi(t.a,t.b,t.c,t.d,t.e,t.f)}function Bf(e){return e==null||(gn||(gn=document.createElementNS("http://www.w3.org/2000/svg","g")),gn.setAttribute("transform",e),!(e=gn.transform.baseVal.consolidate()))?Hi:(e=e.matrix,Fi(e.a,e.b,e.c,e.d,e.e,e.f))}function Yi(e,t,n,o){function r(c){return c.length?c.pop()+" ":""}function i(c,d,u,f,p,y){if(c!==u||d!==f){var g=p.push("translate(",null,t,null,n);y.push({i:g-4,x:De(c,u)},{i:g-2,x:De(d,f)})}else(u||f)&&p.push("translate("+u+t+f+n)}function a(c,d,u,f){c!==d?(c-d>180?d+=360:d-c>180&&(c+=360),f.push({i:u.push(r(u)+"rotate(",null,o)-2,x:De(c,d)})):d&&u.push(r(u)+"rotate("+d+o)}function s(c,d,u,f){c!==d?f.push({i:u.push(r(u)+"skewX(",null,o)-2,x:De(c,d)}):d&&u.push(r(u)+"skewX("+d+o)}function l(c,d,u,f,p,y){if(c!==u||d!==f){var g=p.push(r(p)+"scale(",null,",",null,")");y.push({i:g-4,x:De(c,u)},{i:g-2,x:De(d,f)})}else(u!==1||f!==1)&&p.push(r(p)+"scale("+u+","+f+")")}return function(c,d){var u=[],f=[];return c=e(c),d=e(d),i(c.translateX,c.translateY,d.translateX,d.translateY,u,f),a(c.rotate,d.rotate,u,f),s(c.skewX,d.skewX,u,f),l(c.scaleX,c.scaleY,d.scaleX,d.scaleY,u,f),c=d=null,function(p){for(var y=-1,g=f.length,b;++y<g;)u[(b=f[y]).i]=b.x(p);return u.join("")}}}var Hf=Yi(Vf,"px, ","px)","deg)"),Ff=Yi(Bf,", ",")",")"),Yf=1e-12;function Zi(e){return((e=Math.exp(e))+1/e)/2}function Zf(e){return((e=Math.exp(e))-1/e)/2}function Xf(e){return((e=Math.exp(2*e))-1)/(e+1)}const Kf=function e(t,n,o){function r(i,a){var s=i[0],l=i[1],c=i[2],d=a[0],u=a[1],f=a[2],p=d-s,y=u-l,g=p*p+y*y,b,m;if(g<Yf)m=Math.log(f/c)/t,b=function(k){return[s+k*p,l+k*y,c*Math.exp(t*k*m)]};else{var w=Math.sqrt(g),x=(f*f-c*c+o*g)/(2*c*n*w),v=(f*f-c*c-o*g)/(2*f*n*w),C=Math.log(Math.sqrt(x*x+1)-x),A=Math.log(Math.sqrt(v*v+1)-v);m=(A-C)/t,b=function(k){var O=k*m,I=Zi(C),R=c/(n*w)*(I*Xf(t*O+C)-Zf(C));return[s+R*p,l+R*y,c*I/Zi(t*O+C)]}}return b.duration=m*1e3*t/Math.SQRT2,b}return r.rho=function(i){var a=Math.max(.001,+i),s=a*a,l=s*s;return e(a,s,l)},r}(Math.SQRT2,2,4);var ot=0,Nt=0,Et=0,Xi=1e3,yn,kt,xn=0,We=0,vn=0,jt=typeof performance=="object"&&performance.now?performance:Date,Ki=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Io(){return We||(Ki(Wf),We=jt.now()+vn)}function Wf(){We=0}function wn(){this._call=this._time=this._next=null}wn.prototype=Wi.prototype={constructor:wn,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Io():+n)+(t==null?0:+t),!this._next&&kt!==this&&(kt?kt._next=this:yn=this,kt=this),this._call=e,this._time=n,Ro()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ro())}};function Wi(e,t,n){var o=new wn;return o.restart(e,t,n),o}function Gf(){Io(),++ot;for(var e=yn,t;e;)(t=We-e._time)>=0&&e._call.call(void 0,t),e=e._next;--ot}function Gi(){We=(xn=jt.now())+vn,ot=Nt=0;try{Gf()}finally{ot=0,qf(),We=0}}function Uf(){var e=jt.now(),t=e-xn;t>Xi&&(vn-=t,xn=e)}function qf(){for(var e,t=yn,n,o=1/0;t;)t._call?(o>t._time&&(o=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:yn=n);kt=e,Ro(o)}function Ro(e){if(!ot){Nt&&(Nt=clearTimeout(Nt));var t=e-We;t>24?(e<1/0&&(Nt=setTimeout(Gi,e-jt.now()-vn)),Et&&(Et=clearInterval(Et))):(Et||(xn=jt.now(),Et=setInterval(Uf,Xi)),ot=1,Ki(Gi))}}function Ui(e,t,n){var o=new wn;return t=t==null?0:+t,o.restart(r=>{o.stop(),e(r+t)},t,n),o}var Qf=sn("start","end","cancel","interrupt"),Jf=[],qi=0,Qi=1,zo=2,bn=3,Ji=4,Do=5,Sn=6;function _n(e,t,n,o,r,i){var a=e.__transition;if(!a)e.__transition={};else if(n in a)return;eh(e,n,{name:t,index:o,group:r,on:Qf,tween:Jf,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:qi})}function To(e,t){var n=we(e,t);if(n.state>qi)throw new Error("too late; already scheduled");return n}function Ne(e,t){var n=we(e,t);if(n.state>bn)throw new Error("too late; already running");return n}function we(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function eh(e,t,n){var o=e.__transition,r;o[t]=n,n.timer=Wi(i,0,n.time);function i(c){n.state=Qi,n.timer.restart(a,n.delay,n.time),n.delay<=c&&a(c-n.delay)}function a(c){var d,u,f,p;if(n.state!==Qi)return l();for(d in o)if(p=o[d],p.name===n.name){if(p.state===bn)return Ui(a);p.state===Ji?(p.state=Sn,p.timer.stop(),p.on.call("interrupt",e,e.__data__,p.index,p.group),delete o[d]):+d<t&&(p.state=Sn,p.timer.stop(),p.on.call("cancel",e,e.__data__,p.index,p.group),delete o[d])}if(Ui(function(){n.state===bn&&(n.state=Ji,n.timer.restart(s,n.delay,n.time),s(c))}),n.state=zo,n.on.call("start",e,e.__data__,n.index,n.group),n.state===zo){for(n.state=bn,r=new Array(f=n.tween.length),d=0,u=-1;d<f;++d)(p=n.tween[d].value.call(e,e.__data__,n.index,n.group))&&(r[++u]=p);r.length=u+1}}function s(c){for(var d=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(l),n.state=Do,1),u=-1,f=r.length;++u<f;)r[u].call(e,d);n.state===Do&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=Sn,n.timer.stop(),delete o[t];for(var c in o)return;delete e.__transition}}function Cn(e,t){var n=e.__transition,o,r,i=!0,a;if(n){t=t==null?null:t+"";for(a in n){if((o=n[a]).name!==t){i=!1;continue}r=o.state>zo&&o.state<Do,o.state=Sn,o.timer.stop(),o.on.call(r?"interrupt":"cancel",e,e.__data__,o.index,o.group),delete n[a]}i&&delete e.__transition}}function th(e){return this.each(function(){Cn(this,e)})}function nh(e,t){var n,o;return function(){var r=Ne(this,e),i=r.tween;if(i!==n){o=n=i;for(var a=0,s=o.length;a<s;++a)if(o[a].name===t){o=o.slice(),o.splice(a,1);break}}r.tween=o}}function oh(e,t,n){var o,r;if(typeof n!="function")throw new Error;return function(){var i=Ne(this,e),a=i.tween;if(a!==o){r=(o=a).slice();for(var s={name:t,value:n},l=0,c=r.length;l<c;++l)if(r[l].name===t){r[l]=s;break}l===c&&r.push(s)}i.tween=r}}function rh(e,t){var n=this._id;if(e+="",arguments.length<2){for(var o=we(this.node(),n).tween,r=0,i=o.length,a;r<i;++r)if((a=o[r]).name===e)return a.value;return null}return this.each((t==null?nh:oh)(n,e,t))}function Lo(e,t,n){var o=e._id;return e.each(function(){var r=Ne(this,o);(r.value||(r.value={}))[t]=n.apply(this,arguments)}),function(r){return we(r,o).value[t]}}function ea(e,t){var n;return(typeof t=="number"?De:t instanceof Ct?Vi:(n=Ct(t))?(t=n,Vi):$f)(e,t)}function ih(e){return function(){this.removeAttribute(e)}}function ah(e){return function(){this.removeAttributeNS(e.space,e.local)}}function sh(e,t,n){var o,r=n+"",i;return function(){var a=this.getAttribute(e);return a===r?null:a===o?i:i=t(o=a,n)}}function lh(e,t,n){var o,r=n+"",i;return function(){var a=this.getAttributeNS(e.space,e.local);return a===r?null:a===o?i:i=t(o=a,n)}}function ch(e,t,n){var o,r,i;return function(){var a,s=n(this),l;return s==null?void this.removeAttribute(e):(a=this.getAttribute(e),l=s+"",a===l?null:a===o&&l===r?i:(r=l,i=t(o=a,s)))}}function dh(e,t,n){var o,r,i;return function(){var a,s=n(this),l;return s==null?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local),l=s+"",a===l?null:a===o&&l===r?i:(r=l,i=t(o=a,s)))}}function uh(e,t){var n=cn(e),o=n==="transform"?Ff:ea;return this.attrTween(e,typeof t=="function"?(n.local?dh:ch)(n,o,Lo(this,"attr."+e,t)):t==null?(n.local?ah:ih)(n):(n.local?lh:sh)(n,o,t))}function fh(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function hh(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function ph(e,t){var n,o;function r(){var i=t.apply(this,arguments);return i!==o&&(n=(o=i)&&hh(e,i)),n}return r._value=t,r}function mh(e,t){var n,o;function r(){var i=t.apply(this,arguments);return i!==o&&(n=(o=i)&&fh(e,i)),n}return r._value=t,r}function gh(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var o=cn(e);return this.tween(n,(o.local?ph:mh)(o,t))}function yh(e,t){return function(){To(this,e).delay=+t.apply(this,arguments)}}function xh(e,t){return t=+t,function(){To(this,e).delay=t}}function vh(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?yh:xh)(t,e)):we(this.node(),t).delay}function wh(e,t){return function(){Ne(this,e).duration=+t.apply(this,arguments)}}function bh(e,t){return t=+t,function(){Ne(this,e).duration=t}}function Sh(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?wh:bh)(t,e)):we(this.node(),t).duration}function _h(e,t){if(typeof t!="function")throw new Error;return function(){Ne(this,e).ease=t}}function Ch(e){var t=this._id;return arguments.length?this.each(_h(t,e)):we(this.node(),t).ease}function Nh(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Ne(this,e).ease=n}}function Eh(e){if(typeof e!="function")throw new Error;return this.each(Nh(this._id,e))}function kh(e){typeof e!="function"&&(e=mi(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i=t[r],a=i.length,s=o[r]=[],l,c=0;c<a;++c)(l=i[c])&&e.call(l,l.__data__,c,i)&&s.push(l);return new je(o,this._parents,this._name,this._id)}function jh(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,o=t.length,r=n.length,i=Math.min(o,r),a=new Array(o),s=0;s<i;++s)for(var l=t[s],c=n[s],d=l.length,u=a[s]=new Array(d),f,p=0;p<d;++p)(f=l[p]||c[p])&&(u[p]=f);for(;s<o;++s)a[s]=t[s];return new je(a,this._parents,this._name,this._id)}function Ph(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Mh(e,t,n){var o,r,i=Ph(t)?To:Ne;return function(){var a=i(this,e),s=a.on;s!==o&&(r=(o=s).copy()).on(t,n),a.on=r}}function Oh(e,t){var n=this._id;return arguments.length<2?we(this.node(),n).on.on(e):this.each(Mh(n,e,t))}function Ah(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Ih(){return this.on("end.remove",Ah(this._id))}function Rh(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Co(e));for(var o=this._groups,r=o.length,i=new Array(r),a=0;a<r;++a)for(var s=o[a],l=s.length,c=i[a]=new Array(l),d,u,f=0;f<l;++f)(d=s[f])&&(u=e.call(d,d.__data__,f,s))&&("__data__"in d&&(u.__data__=d.__data__),c[f]=u,_n(c[f],t,n,f,c,we(d,n)));return new je(i,this._parents,t,n)}function zh(e){var t=this._name,n=this._id;typeof e!="function"&&(e=pi(e));for(var o=this._groups,r=o.length,i=[],a=[],s=0;s<r;++s)for(var l=o[s],c=l.length,d,u=0;u<c;++u)if(d=l[u]){for(var f=e.call(d,d.__data__,u,l),p,y=we(d,n),g=0,b=f.length;g<b;++g)(p=f[g])&&_n(p,t,n,g,f,y);i.push(f),a.push(d)}return new je(i,a,t,n)}var Dh=vt.prototype.constructor;function Th(){return new Dh(this._groups,this._parents)}function Lh(e,t){var n,o,r;return function(){var i=et(this,e),a=(this.style.removeProperty(e),et(this,e));return i===a?null:i===n&&a===o?r:r=t(n=i,o=a)}}function ta(e){return function(){this.style.removeProperty(e)}}function $h(e,t,n){var o,r=n+"",i;return function(){var a=et(this,e);return a===r?null:a===o?i:i=t(o=a,n)}}function Vh(e,t,n){var o,r,i;return function(){var a=et(this,e),s=n(this),l=s+"";return s==null&&(l=s=(this.style.removeProperty(e),et(this,e))),a===l?null:a===o&&l===r?i:(r=l,i=t(o=a,s))}}function Bh(e,t){var n,o,r,i="style."+t,a="end."+i,s;return function(){var l=Ne(this,e),c=l.on,d=l.value[i]==null?s||(s=ta(t)):void 0;(c!==n||r!==d)&&(o=(n=c).copy()).on(a,r=d),l.on=o}}function Hh(e,t,n){var o=(e+="")=="transform"?Hf:ea;return t==null?this.styleTween(e,Lh(e,o)).on("end.style."+e,ta(e)):typeof t=="function"?this.styleTween(e,Vh(e,o,Lo(this,"style."+e,t))).each(Bh(this._id,e)):this.styleTween(e,$h(e,o,t),n).on("end.style."+e,null)}function Fh(e,t,n){return function(o){this.style.setProperty(e,t.call(this,o),n)}}function Yh(e,t,n){var o,r;function i(){var a=t.apply(this,arguments);return a!==r&&(o=(r=a)&&Fh(e,a,n)),o}return i._value=t,i}function Zh(e,t,n){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(t==null)return this.tween(o,null);if(typeof t!="function")throw new Error;return this.tween(o,Yh(e,t,n??""))}function Xh(e){return function(){this.textContent=e}}function Kh(e){return function(){var t=e(this);this.textContent=t??""}}function Wh(e){return this.tween("text",typeof e=="function"?Kh(Lo(this,"text",e)):Xh(e==null?"":e+""))}function Gh(e){return function(t){this.textContent=e.call(this,t)}}function Uh(e){var t,n;function o(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&Gh(r)),t}return o._value=e,o}function qh(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Uh(e))}function Qh(){for(var e=this._name,t=this._id,n=na(),o=this._groups,r=o.length,i=0;i<r;++i)for(var a=o[i],s=a.length,l,c=0;c<s;++c)if(l=a[c]){var d=we(l,t);_n(l,e,n,c,a,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new je(o,this._parents,e,n)}function Jh(){var e,t,n=this,o=n._id,r=n.size();return new Promise(function(i,a){var s={value:a},l={value:function(){--r===0&&i()}};n.each(function(){var c=Ne(this,o),d=c.on;d!==e&&(t=(e=d).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(l)),c.on=t}),r===0&&i()})}var ep=0;function je(e,t,n,o){this._groups=e,this._parents=t,this._name=n,this._id=o}function na(){return++ep}var Pe=vt.prototype;je.prototype={constructor:je,select:Rh,selectAll:zh,selectChild:Pe.selectChild,selectChildren:Pe.selectChildren,filter:kh,merge:jh,selection:Th,transition:Qh,call:Pe.call,nodes:Pe.nodes,node:Pe.node,size:Pe.size,empty:Pe.empty,each:Pe.each,on:Oh,attr:uh,attrTween:gh,style:Hh,styleTween:Zh,text:Wh,textTween:qh,remove:Ih,tween:rh,delay:vh,duration:Sh,ease:Ch,easeVarying:Eh,end:Jh,[Symbol.iterator]:Pe[Symbol.iterator]};function tp(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var np={time:null,delay:0,duration:250,ease:tp};function op(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function rp(e){var t,n;e instanceof je?(t=e._id,e=e._name):(t=na(),(n=np).time=Io(),e=e==null?null:e+"");for(var o=this._groups,r=o.length,i=0;i<r;++i)for(var a=o[i],s=a.length,l,c=0;c<s;++c)(l=a[c])&&_n(l,e,t,c,a,n||op(l,t));return new je(o,this._parents,e,t)}vt.prototype.interrupt=th,vt.prototype.transition=rp;const Nn=e=>()=>e;function ip(e,{sourceEvent:t,target:n,transform:o,dispatch:r}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:r}})}function Me(e,t,n){this.k=e,this.x=t,this.y=n}Me.prototype={constructor:Me,scale:function(e){return e===1?this:new Me(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Me(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var En=new Me(1,0,0);oa.prototype=Me.prototype;function oa(e){for(;!e.__zoom;)if(!(e=e.parentNode))return En;return e.__zoom}function $o(e){e.stopImmediatePropagation()}function Pt(e){e.preventDefault(),e.stopImmediatePropagation()}function ap(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function sp(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function ra(){return this.__zoom||En}function lp(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function cp(){return navigator.maxTouchPoints||"ontouchstart"in this}function dp(e,t,n){var o=e.invertX(t[0][0])-n[0][0],r=e.invertX(t[1][0])-n[1][0],i=e.invertY(t[0][1])-n[0][1],a=e.invertY(t[1][1])-n[1][1];return e.translate(r>o?(o+r)/2:Math.min(0,o)||Math.max(0,r),a>i?(i+a)/2:Math.min(0,i)||Math.max(0,a))}function ia(){var e=ap,t=sp,n=dp,o=lp,r=cp,i=[0,1/0],a=[[-1/0,-1/0],[1/0,1/0]],s=250,l=Kf,c=sn("start","zoom","end"),d,u,f,p=500,y=150,g=0,b=10;function m(_){_.property("__zoom",ra).on("wheel.zoom",O,{passive:!1}).on("mousedown.zoom",I).on("dblclick.zoom",R).filter(r).on("touchstart.zoom",$).on("touchmove.zoom",D).on("touchend.zoom touchcancel.zoom",T).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}m.transform=function(_,j,N,M){var E=_.selection?_.selection():_;E.property("__zoom",ra),_!==E?C(_,j,N,M):E.interrupt().each(function(){A(this,arguments).event(M).start().zoom(null,typeof j=="function"?j.apply(this,arguments):j).end()})},m.scaleBy=function(_,j,N,M){m.scaleTo(_,function(){var E=this.__zoom.k,P=typeof j=="function"?j.apply(this,arguments):j;return E*P},N,M)},m.scaleTo=function(_,j,N,M){m.transform(_,function(){var E=t.apply(this,arguments),P=this.__zoom,z=N==null?v(E):typeof N=="function"?N.apply(this,arguments):N,B=P.invert(z),H=typeof j=="function"?j.apply(this,arguments):j;return n(x(w(P,H),z,B),E,a)},N,M)},m.translateBy=function(_,j,N,M){m.transform(_,function(){return n(this.__zoom.translate(typeof j=="function"?j.apply(this,arguments):j,typeof N=="function"?N.apply(this,arguments):N),t.apply(this,arguments),a)},null,M)},m.translateTo=function(_,j,N,M,E){m.transform(_,function(){var P=t.apply(this,arguments),z=this.__zoom,B=M==null?v(P):typeof M=="function"?M.apply(this,arguments):M;return n(En.translate(B[0],B[1]).scale(z.k).translate(typeof j=="function"?-j.apply(this,arguments):-j,typeof N=="function"?-N.apply(this,arguments):-N),P,a)},M,E)};function w(_,j){return j=Math.max(i[0],Math.min(i[1],j)),j===_.k?_:new Me(j,_.x,_.y)}function x(_,j,N){var M=j[0]-N[0]*_.k,E=j[1]-N[1]*_.k;return M===_.x&&E===_.y?_:new Me(_.k,M,E)}function v(_){return[(+_[0][0]+ +_[1][0])/2,(+_[0][1]+ +_[1][1])/2]}function C(_,j,N,M){_.on("start.zoom",function(){A(this,arguments).event(M).start()}).on("interrupt.zoom end.zoom",function(){A(this,arguments).event(M).end()}).tween("zoom",function(){var E=this,P=arguments,z=A(E,P).event(M),B=t.apply(E,P),H=N==null?v(B):typeof N=="function"?N.apply(E,P):N,G=Math.max(B[1][0]-B[0][0],B[1][1]-B[0][1]),F=E.__zoom,Y=typeof j=="function"?j.apply(E,P):j,q=l(F.invert(H).concat(G/F.k),Y.invert(H).concat(G/Y.k));return function(V){if(V===1)V=Y;else{var L=q(V),K=G/L[2];V=new Me(K,H[0]-L[0]*K,H[1]-L[1]*K)}z.zoom(null,V)}})}function A(_,j,N){return!N&&_.__zooming||new k(_,j)}function k(_,j){this.that=_,this.args=j,this.active=0,this.sourceEvent=null,this.extent=t.apply(_,j),this.taps=0}k.prototype={event:function(_){return _&&(this.sourceEvent=_),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(_,j){return this.mouse&&_!=="mouse"&&(this.mouse[1]=j.invert(this.mouse[0])),this.touch0&&_!=="touch"&&(this.touch0[1]=j.invert(this.touch0[0])),this.touch1&&_!=="touch"&&(this.touch1[1]=j.invert(this.touch1[0])),this.that.__zoom=j,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(_){var j=me(this.that).datum();c.call(_,this.that,new ip(_,{sourceEvent:this.sourceEvent,target:m,transform:this.that.__zoom,dispatch:c}),j)}};function O(_,...j){if(!e.apply(this,arguments))return;var N=A(this,j).event(_),M=this.__zoom,E=Math.max(i[0],Math.min(i[1],M.k*Math.pow(2,o.apply(this,arguments)))),P=xe(_);if(N.wheel)(N.mouse[0][0]!==P[0]||N.mouse[0][1]!==P[1])&&(N.mouse[1]=M.invert(N.mouse[0]=P)),clearTimeout(N.wheel);else{if(M.k===E)return;N.mouse=[P,M.invert(P)],Cn(this),N.start()}Pt(_),N.wheel=setTimeout(z,y),N.zoom("mouse",n(x(w(M,E),N.mouse[0],N.mouse[1]),N.extent,a));function z(){N.wheel=null,N.end()}}function I(_,...j){if(f||!e.apply(this,arguments))return;var N=_.currentTarget,M=A(this,j,!0).event(_),E=me(_.view).on("mousemove.zoom",H,!0).on("mouseup.zoom",G,!0),P=xe(_,N),z=_.clientX,B=_.clientY;Ni(_.view),$o(_),M.mouse=[P,this.__zoom.invert(P)],Cn(this),M.start();function H(F){if(Pt(F),!M.moved){var Y=F.clientX-z,q=F.clientY-B;M.moved=Y*Y+q*q>g}M.event(F).zoom("mouse",n(x(M.that.__zoom,M.mouse[0]=xe(F,N),M.mouse[1]),M.extent,a))}function G(F){E.on("mousemove.zoom mouseup.zoom",null),Ei(F.view,M.moved),Pt(F),M.event(F).end()}}function R(_,...j){if(e.apply(this,arguments)){var N=this.__zoom,M=xe(_.changedTouches?_.changedTouches[0]:_,this),E=N.invert(M),P=N.k*(_.shiftKey?.5:2),z=n(x(w(N,P),M,E),t.apply(this,j),a);Pt(_),s>0?me(this).transition().duration(s).call(C,z,M,_):me(this).call(m.transform,z,M,_)}}function $(_,...j){if(e.apply(this,arguments)){var N=_.touches,M=N.length,E=A(this,j,_.changedTouches.length===M).event(_),P,z,B,H;for($o(_),z=0;z<M;++z)B=N[z],H=xe(B,this),H=[H,this.__zoom.invert(H),B.identifier],E.touch0?!E.touch1&&E.touch0[2]!==H[2]&&(E.touch1=H,E.taps=0):(E.touch0=H,P=!0,E.taps=1+!!d);d&&(d=clearTimeout(d)),P&&(E.taps<2&&(u=H[0],d=setTimeout(function(){d=null},p)),Cn(this),E.start())}}function D(_,...j){if(this.__zooming){var N=A(this,j).event(_),M=_.changedTouches,E=M.length,P,z,B,H;for(Pt(_),P=0;P<E;++P)z=M[P],B=xe(z,this),N.touch0&&N.touch0[2]===z.identifier?N.touch0[0]=B:N.touch1&&N.touch1[2]===z.identifier&&(N.touch1[0]=B);if(z=N.that.__zoom,N.touch1){var G=N.touch0[0],F=N.touch0[1],Y=N.touch1[0],q=N.touch1[1],V=(V=Y[0]-G[0])*V+(V=Y[1]-G[1])*V,L=(L=q[0]-F[0])*L+(L=q[1]-F[1])*L;z=w(z,Math.sqrt(V/L)),B=[(G[0]+Y[0])/2,(G[1]+Y[1])/2],H=[(F[0]+q[0])/2,(F[1]+q[1])/2]}else if(N.touch0)B=N.touch0[0],H=N.touch0[1];else return;N.zoom("touch",n(x(z,B,H),N.extent,a))}}function T(_,...j){if(this.__zooming){var N=A(this,j).event(_),M=_.changedTouches,E=M.length,P,z;for($o(_),f&&clearTimeout(f),f=setTimeout(function(){f=null},p),P=0;P<E;++P)z=M[P],N.touch0&&N.touch0[2]===z.identifier?delete N.touch0:N.touch1&&N.touch1[2]===z.identifier&&delete N.touch1;if(N.touch1&&!N.touch0&&(N.touch0=N.touch1,delete N.touch1),N.touch0)N.touch0[1]=this.__zoom.invert(N.touch0[0]);else if(N.end(),N.taps===2&&(z=xe(z,this),Math.hypot(u[0]-z[0],u[1]-z[1])<b)){var B=me(this).on("dblclick.zoom");B&&B.apply(this,arguments)}}}return m.wheelDelta=function(_){return arguments.length?(o=typeof _=="function"?_:Nn(+_),m):o},m.filter=function(_){return arguments.length?(e=typeof _=="function"?_:Nn(!!_),m):e},m.touchable=function(_){return arguments.length?(r=typeof _=="function"?_:Nn(!!_),m):r},m.extent=function(_){return arguments.length?(t=typeof _=="function"?_:Nn([[+_[0][0],+_[0][1]],[+_[1][0],+_[1][1]]]),m):t},m.scaleExtent=function(_){return arguments.length?(i[0]=+_[0],i[1]=+_[1],m):[i[0],i[1]]},m.translateExtent=function(_){return arguments.length?(a[0][0]=+_[0][0],a[1][0]=+_[1][0],a[0][1]=+_[0][1],a[1][1]=+_[1][1],m):[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},m.constrain=function(_){return arguments.length?(n=_,m):n},m.duration=function(_){return arguments.length?(s=+_,m):s},m.interpolate=function(_){return arguments.length?(l=_,m):l},m.on=function(){var _=c.on.apply(c,arguments);return _===c?m:_},m.clickDistance=function(_){return arguments.length?(g=(_=+_)*_,m):Math.sqrt(g)},m.tapDistance=function(_){return arguments.length?(b=+_,m):b},m}const Oe={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:n,targetHandle:o})=>`Couldn't create edge for ${e} handle id: "${e==="source"?n:o}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`},Mt=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],aa=["Enter"," ","Escape"];var rt;(function(e){e.Strict="strict",e.Loose="loose"})(rt||(rt={})),function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"}(Ze||(Ze={}));var Ot;(function(e){e.Partial="partial",e.Full="full"})(Ot||(Ot={}));const sa={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var Te;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Te||(Te={}));var kn;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(kn||(kn={})),function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"}(U||(U={}));const la={[U.Left]:U.Right,[U.Right]:U.Left,[U.Top]:U.Bottom,[U.Bottom]:U.Top};function up(e,t){if(!e&&!t)return!0;if(!e||!t||e.size!==t.size)return!1;if(!e.size&&!t.size)return!0;for(const n of e.keys())if(!t.has(n))return!1;return!0}function ca(e,t,n){if(!n)return;const o=[];e.forEach((r,i)=>{t!=null&&t.has(i)||o.push(r)}),o.length&&n(o)}function da(e){return e===null?null:e?"valid":"invalid"}const ua=e=>"id"in e&&"source"in e&&"target"in e,fp=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),Vo=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),At=(e,t=[0,0])=>{const{width:n,height:o}=Ae(e),r=e.origin??t,i=n*r[0],a=o*r[1];return{x:e.position.x-i,y:e.position.y-a}},hp=(e,t={nodeOrigin:[0,0],nodeLookup:void 0})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((o,r)=>{const i=typeof r=="string";let a=!t.nodeLookup&&!i?r:void 0;t.nodeLookup&&(a=i?t.nodeLookup.get(r):Vo(r)?r:t.nodeLookup.get(r.id));const s=a?Mn(a,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return jn(o,s)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Pn(n)},It=(e,t={})=>{if(e.size===0)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return e.forEach(o=>{if(t.filter===void 0||t.filter(o)){const r=Mn(o);n=jn(n,r)}}),Pn(n)},fa=(e,t,[n,o,r]=[0,0,1],i=!1,a=!1)=>{const s={...zt(t,[n,o,r]),width:t.width/r,height:t.height/r},l=[];for(const c of e.values()){const{measured:d,selectable:u=!0,hidden:f=!1}=c;if(a&&!u||f)continue;const p=d.width??c.width??c.initialWidth??null,y=d.height??c.height??c.initialHeight??null,g=Rt(s,at(c)),b=(p??0)*(y??0),m=i&&g>0;(!c.internals.handleBounds||m||g>=b||c.dragging)&&l.push(c)}return l},pp=(e,t)=>{const n=new Set;return e.forEach(o=>{n.add(o.id)}),t.filter(o=>n.has(o.source)||n.has(o.target))};function Bo(e,t){const n=new Map,o=t!=null&&t.nodes?new Set(t.nodes.map(r=>r.id)):null;return e.forEach(r=>{r.measured.width&&r.measured.height&&(t!=null&&t.includeHiddenNodes||!r.hidden)&&(!o||o.has(r.id))&&n.set(r.id,r)}),n}async function Ho({nodes:e,width:t,height:n,panZoom:o,minZoom:r,maxZoom:i},a){if(e.size===0)return Promise.resolve(!1);const s=It(e),l=Yo(s,t,n,(a==null?void 0:a.minZoom)??r,(a==null?void 0:a.maxZoom)??i,(a==null?void 0:a.padding)??.1);return await o.setViewport(l,{duration:a==null?void 0:a.duration}),Promise.resolve(!0)}function ha({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:o=[0,0],nodeExtent:r,onError:i}){const a=n.get(e),s=a.parentId?n.get(a.parentId):void 0,{x:l,y:c}=s?s.internals.positionAbsolute:{x:0,y:0},d=a.origin??o;let u=r;if(a.extent==="parent"&&!a.expandParent)if(!s)i==null||i("005",Oe.error005());else{const p=s.measured.width,y=s.measured.height;p&&y&&(u=[[l,c],[l+p,c+y]])}else s&&st(a.extent)&&(u=[[a.extent[0][0]+l,a.extent[0][1]+c],[a.extent[1][0]+l,a.extent[1][1]+c]]);const f=st(u)?Ge(t,u,a.measured):t;return{position:{x:f.x-l+a.measured.width*d[0],y:f.y-c+a.measured.height*d[1]},positionAbsolute:f}}async function mp({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:o,onBeforeDelete:r}){const i=new Set(e.map(u=>u.id)),a=[];for(const u of n){if(u.deletable===!1)continue;const f=i.has(u.id),p=!f&&u.parentId&&a.find(y=>y.id===u.parentId);(f||p)&&a.push(u)}const s=new Set(t.map(u=>u.id)),l=o.filter(u=>u.deletable!==!1),c=pp(a,l);for(const u of l)s.has(u.id)&&!c.find(f=>f.id===u.id)&&c.push(u);if(!r)return{edges:c,nodes:a};const d=await r({nodes:a,edges:c});return typeof d=="boolean"?d?{edges:c,nodes:a}:{edges:[],nodes:[]}:d}const it=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),Ge=(e={x:0,y:0},t,n)=>({x:it(e.x,t[0][0],t[1][0]-((n==null?void 0:n.width)??0)),y:it(e.y,t[0][1],t[1][1]-((n==null?void 0:n.height)??0))});function pa(e,t,n){const{width:o,height:r}=Ae(n),{x:i,y:a}=n.internals.positionAbsolute;return Ge(e,[[i,a],[i+o,a+r]],t)}const ma=(e,t,n)=>e<t?it(Math.abs(e-t),1,t)/t:e>n?-it(Math.abs(e-n),1,t)/t:0,ga=(e,t,n=15,o=40)=>{const r=ma(e.x,o,t.width-o)*n,i=ma(e.y,o,t.height-o)*n;return[r,i]},jn=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),Fo=({x:e,y:t,width:n,height:o})=>({x:e,y:t,x2:e+n,y2:t+o}),Pn=({x:e,y:t,x2:n,y2:o})=>({x:e,y:t,width:n-e,height:o-t}),at=(e,t=[0,0])=>{var r,i;const{x:n,y:o}=Vo(e)?e.internals.positionAbsolute:At(e,t);return{x:n,y:o,width:((r=e.measured)==null?void 0:r.width)??e.width??e.initialWidth??0,height:((i=e.measured)==null?void 0:i.height)??e.height??e.initialHeight??0}},Mn=(e,t=[0,0])=>{var r,i;const{x:n,y:o}=Vo(e)?e.internals.positionAbsolute:At(e,t);return{x:n,y:o,x2:n+(((r=e.measured)==null?void 0:r.width)??e.width??e.initialWidth??0),y2:o+(((i=e.measured)==null?void 0:i.height)??e.height??e.initialHeight??0)}},ya=(e,t)=>Pn(jn(Fo(e),Fo(t))),Rt=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),o=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*o)},xa=e=>be(e.width)&&be(e.height)&&be(e.x)&&be(e.y),be=e=>!isNaN(e)&&isFinite(e),gp=(e,t)=>{},On=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),zt=({x:e,y:t},[n,o,r],i=!1,a=[1,1])=>{const s={x:(e-n)/r,y:(t-o)/r};return i?On(s,a):s},va=({x:e,y:t},[n,o,r])=>({x:e*r+n,y:t*r+o}),Yo=(e,t,n,o,r,i)=>{const a=t/(e.width*(1+i)),s=n/(e.height*(1+i)),l=Math.min(a,s),c=it(l,o,r),d=e.x+e.width/2,u=e.y+e.height/2,f=t/2-d*c,p=n/2-u*c;return{x:f,y:p,zoom:c}},An=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function st(e){return e!==void 0&&e!=="parent"}function Ae(e){var t,n;return{width:((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth??0,height:((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight??0}}function wa(e){var t,n;return(((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth)!==void 0&&(((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight)!==void 0}function ba(e,t={width:0,height:0},n,o,r){const i={...e},a=o.get(n);if(a){const s=a.origin||r;i.x+=a.internals.positionAbsolute.x-(t.width??0)*s[0],i.y+=a.internals.positionAbsolute.y-(t.height??0)*s[1]}return i}function Dt(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:o,containerBounds:r}){const{x:i,y:a}=Ie(e),s=zt({x:i-((r==null?void 0:r.left)??0),y:a-((r==null?void 0:r.top)??0)},o),{x:l,y:c}=n?On(s,t):s;return{xSnapped:l,ySnapped:c,...s}}const In=e=>({width:e.offsetWidth,height:e.offsetHeight}),Sa=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},yp=["INPUT","SELECT","TEXTAREA"];function Zo(e){var n,o;const t=((o=(n=e.composedPath)==null?void 0:n.call(e))==null?void 0:o[0])||e.target;return yp.includes(t==null?void 0:t.nodeName)||(t==null?void 0:t.hasAttribute("contenteditable"))||!!(t!=null&&t.closest(".nokey"))}const _a=e=>"clientX"in e,Ie=(e,t)=>{var i,a;const n=_a(e),o=n?e.clientX:(i=e.touches)==null?void 0:i[0].clientX,r=n?e.clientY:(a=e.touches)==null?void 0:a[0].clientY;return{x:o-((t==null?void 0:t.left)??0),y:r-((t==null?void 0:t.top)??0)}},Ca=(e,t,n,o,r)=>{const i=t.querySelectorAll(`.${e}`);return!i||!i.length?null:Array.from(i).map(a=>{const s=a.getBoundingClientRect();return{id:a.getAttribute("data-handleid"),type:e,nodeId:r,position:a.getAttribute("data-handlepos"),x:(s.left-n.left)/o,y:(s.top-n.top)/o,...In(a)}})};function Na({sourceX:e,sourceY:t,targetX:n,targetY:o,sourceControlX:r,sourceControlY:i,targetControlX:a,targetControlY:s}){const l=e*.125+r*.375+a*.375+n*.125,c=t*.125+i*.375+s*.375+o*.125,d=Math.abs(l-e),u=Math.abs(c-t);return[l,c,d,u]}function Rn(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Ea({pos:e,x1:t,y1:n,x2:o,y2:r,c:i}){switch(e){case U.Left:return[t-Rn(t-o,i),n];case U.Right:return[t+Rn(o-t,i),n];case U.Top:return[t,n-Rn(n-r,i)];case U.Bottom:return[t,n+Rn(r-n,i)]}}function ka({sourceX:e,sourceY:t,sourcePosition:n=U.Bottom,targetX:o,targetY:r,targetPosition:i=U.Top,curvature:a=.25}){const[s,l]=Ea({pos:n,x1:e,y1:t,x2:o,y2:r,c:a}),[c,d]=Ea({pos:i,x1:o,y1:r,x2:e,y2:t,c:a}),[u,f,p,y]=Na({sourceX:e,sourceY:t,targetX:o,targetY:r,sourceControlX:s,sourceControlY:l,targetControlX:c,targetControlY:d});return[`M${e},${t} C${s},${l} ${c},${d} ${o},${r}`,u,f,p,y]}function ja({sourceX:e,sourceY:t,targetX:n,targetY:o}){const r=Math.abs(n-e)/2,i=n<e?n+r:n-r,a=Math.abs(o-t)/2,s=o<t?o+a:o-a;return[i,s,r,a]}function xp({sourceNode:e,targetNode:t,selected:n=!1,zIndex:o=0,elevateOnSelect:r=!1}){if(!r)return o;const i=n||t.selected||e.selected,a=Math.max(e.internals.z||0,t.internals.z||0,1e3);return o+(i?a:0)}function vp({sourceNode:e,targetNode:t,width:n,height:o,transform:r}){const i=jn(Mn(e),Mn(t));i.x===i.x2&&(i.x2+=1),i.y===i.y2&&(i.y2+=1);const a={x:-r[0]/r[2],y:-r[1]/r[2],width:n/r[2],height:o/r[2]};return Rt(a,Pn(i))>0}const wp=({source:e,sourceHandle:t,target:n,targetHandle:o})=>`xy-edge__${e}${t||""}-${n}${o||""}`,bp=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),Pa=(e,t)=>{if(!e.source||!e.target)return t;let n;return ua(e)?n={...e}:n={...e,id:wp(e)},bp(n,t)?t:(n.sourceHandle===null&&delete n.sourceHandle,n.targetHandle===null&&delete n.targetHandle,t.concat(n))};function Ma({sourceX:e,sourceY:t,targetX:n,targetY:o}){const[r,i,a,s]=ja({sourceX:e,sourceY:t,targetX:n,targetY:o});return[`M ${e},${t}L ${n},${o}`,r,i,a,s]}const Oa={[U.Left]:{x:-1,y:0},[U.Right]:{x:1,y:0},[U.Top]:{x:0,y:-1},[U.Bottom]:{x:0,y:1}},Sp=({source:e,sourcePosition:t=U.Bottom,target:n})=>t===U.Left||t===U.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},Aa=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function _p({source:e,sourcePosition:t=U.Bottom,target:n,targetPosition:o=U.Top,center:r,offset:i}){const a=Oa[t],s=Oa[o],l={x:e.x+a.x*i,y:e.y+a.y*i},c={x:n.x+s.x*i,y:n.y+s.y*i},d=Sp({source:l,sourcePosition:t,target:c}),u=d.x!==0?"x":"y",f=d[u];let p=[],y,g;const b={x:0,y:0},m={x:0,y:0},[w,x,v,C]=ja({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(a[u]*s[u]===-1){y=r.x??w,g=r.y??x;const A=[{x:y,y:l.y},{x:y,y:c.y}],k=[{x:l.x,y:g},{x:c.x,y:g}];a[u]===f?p=u==="x"?A:k:p=u==="x"?k:A}else{const A=[{x:l.x,y:c.y}],k=[{x:c.x,y:l.y}];if(u==="x"?p=a.x===f?k:A:p=a.y===f?A:k,t===o){const D=Math.abs(e[u]-n[u]);if(D<=i){const T=Math.min(i-1,i-D);a[u]===f?b[u]=(l[u]>e[u]?-1:1)*T:m[u]=(c[u]>n[u]?-1:1)*T}}if(t!==o){const D=u==="x"?"y":"x",T=a[u]===s[D],_=l[D]>c[D],j=l[D]<c[D];(a[u]===1&&(!T&&_||T&&j)||a[u]!==1&&(!T&&j||T&&_))&&(p=u==="x"?A:k)}const O={x:l.x+b.x,y:l.y+b.y},I={x:c.x+m.x,y:c.y+m.y},R=Math.max(Math.abs(O.x-p[0].x),Math.abs(I.x-p[0].x)),$=Math.max(Math.abs(O.y-p[0].y),Math.abs(I.y-p[0].y));R>=$?(y=(O.x+I.x)/2,g=p[0].y):(y=p[0].x,g=(O.y+I.y)/2)}return[[e,{x:l.x+b.x,y:l.y+b.y},...p,{x:c.x+m.x,y:c.y+m.y},n],y,g,v,C]}function Cp(e,t,n,o){const r=Math.min(Aa(e,t)/2,Aa(t,n)/2,o),{x:i,y:a}=t;if(e.x===i&&i===n.x||e.y===a&&a===n.y)return`L${i} ${a}`;if(e.y===a){const c=e.x<n.x?-1:1,d=e.y<n.y?1:-1;return`L ${i+r*c},${a}Q ${i},${a} ${i},${a+r*d}`}const s=e.x<n.x?1:-1,l=e.y<n.y?-1:1;return`L ${i},${a+r*l}Q ${i},${a} ${i+r*s},${a}`}function Xo({sourceX:e,sourceY:t,sourcePosition:n=U.Bottom,targetX:o,targetY:r,targetPosition:i=U.Top,borderRadius:a=5,centerX:s,centerY:l,offset:c=20}){const[d,u,f,p,y]=_p({source:{x:e,y:t},sourcePosition:n,target:{x:o,y:r},targetPosition:i,center:{x:s,y:l},offset:c});return[d.reduce((g,b,m)=>{let w="";return m>0&&m<d.length-1?w=Cp(d[m-1],b,d[m+1],a):w=`${m===0?"M":"L"}${b.x} ${b.y}`,g+=w,g},""),u,f,p,y]}function Ia(e){var t;return e&&!!(e.internals.handleBounds||(t=e.handles)!=null&&t.length)&&!!(e.measured.width||e.width||e.initialWidth)}function Np(e){var u;const{sourceNode:t,targetNode:n}=e;if(!Ia(t)||!Ia(n))return null;const o=t.internals.handleBounds||Ra(t.handles),r=n.internals.handleBounds||Ra(n.handles),i=za((o==null?void 0:o.source)??[],e.sourceHandle),a=za(e.connectionMode===rt.Strict?(r==null?void 0:r.target)??[]:((r==null?void 0:r.target)??[]).concat((r==null?void 0:r.source)??[]),e.targetHandle);if(!i||!a)return(u=e.onError)==null||u.call(e,"008",Oe.error008(i?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const s=(i==null?void 0:i.position)||U.Bottom,l=(a==null?void 0:a.position)||U.Top,c=Tt(t,i,s),d=Tt(n,a,l);return{sourceX:c.x,sourceY:c.y,targetX:d.x,targetY:d.y,sourcePosition:s,targetPosition:l}}function Ra(e){if(!e)return null;const t=[],n=[];for(const o of e)o.width=o.width??1,o.height=o.height??1,o.type==="source"?t.push(o):o.type==="target"&&n.push(o);return{source:t,target:n}}function Tt(e,t,n=U.Left,o=!1){const r=((t==null?void 0:t.x)??0)+e.internals.positionAbsolute.x,i=((t==null?void 0:t.y)??0)+e.internals.positionAbsolute.y,{width:a,height:s}=t??Ae(e);if(o)return{x:r+a/2,y:i+s/2};switch((t==null?void 0:t.position)??n){case U.Top:return{x:r+a/2,y:i};case U.Right:return{x:r+a,y:i+s/2};case U.Bottom:return{x:r+a/2,y:i+s};case U.Left:return{x:r,y:i+s/2}}}function za(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function Ko(e,t){return e?typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(n=>`${n}=${e[n]}`).join("&")}`:""}function Ep(e,{id:t,defaultColor:n,defaultMarkerStart:o,defaultMarkerEnd:r}){const i=new Set;return e.reduce((a,s)=>([s.markerStart||o,s.markerEnd||r].forEach(l=>{if(l&&typeof l=="object"){const c=Ko(l,t);i.has(c)||(a.push({id:c,color:l.color||n,...l}),i.add(c))}}),a),[]).sort((a,s)=>a.id.localeCompare(s.id))}const Wo={nodeOrigin:[0,0],nodeExtent:Mt,elevateNodesOnSelect:!0,defaults:{}},kp={...Wo,checkEquality:!0};function Go(e,t){const n={...e};for(const o in t)t[o]!==void 0&&(n[o]=t[o]);return n}function jp(e,t,n){const o=Go(Wo,n);for(const r of e.values())if(r.parentId)qo(r,e,t,o);else{const i=At(r,o.nodeOrigin),a=st(r.extent)?r.extent:o.nodeExtent,s=Ge(i,a,Ae(r));r.internals.positionAbsolute=s}}function Uo(e,t,n,o){var s,l;const r=Go(kp,o),i=new Map(t),a=r!=null&&r.elevateNodesOnSelect?1e3:0;t.clear(),n.clear();for(const c of e){let d=i.get(c.id);if(r.checkEquality&&c===(d==null?void 0:d.internals.userNode))t.set(c.id,d);else{const u=At(c,r.nodeOrigin),f=st(c.extent)?c.extent:r.nodeExtent,p=Ge(u,f,Ae(c));d={...r.defaults,...c,measured:{width:(s=c.measured)==null?void 0:s.width,height:(l=c.measured)==null?void 0:l.height},internals:{positionAbsolute:p,handleBounds:c.measured?d==null?void 0:d.internals.handleBounds:void 0,z:Da(c,a),userNode:c}},t.set(c.id,d)}c.parentId&&qo(d,t,n,o)}}function Pp(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function qo(e,t,n,o){const{elevateNodesOnSelect:r,nodeOrigin:i,nodeExtent:a}=Go(Wo,o),s=e.parentId,l=t.get(s);if(!l){console.warn(`Parent node ${s} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}Pp(e,n);const c=r?1e3:0,{x:d,y:u,z:f}=Mp(e,l,i,a,c),{positionAbsolute:p}=e.internals,y=d!==p.x||u!==p.y;(y||f!==e.internals.z)&&(e.internals={...e.internals,positionAbsolute:y?{x:d,y:u}:p,z:f})}function Da(e,t){return(be(e.zIndex)?e.zIndex:0)+(e.selected?t:0)}function Mp(e,t,n,o,r){const{x:i,y:a}=t.internals.positionAbsolute,s=Ae(e),l=At(e,n),c=st(e.extent)?Ge(l,e.extent,s):l;let d=Ge({x:i+c.x,y:a+c.y},o,s);e.extent==="parent"&&(d=pa(d,s,t));const u=Da(e,r),f=t.internals.z??0;return{x:d.x,y:d.y,z:f>u?f:u}}function Qo(e,t,n,o=[0,0]){var a;const r=[],i=new Map;for(const s of e){const l=t.get(s.parentId);if(!l)continue;const c=((a=i.get(s.parentId))==null?void 0:a.expandedRect)??at(l),d=ya(c,s.rect);i.set(s.parentId,{expandedRect:d,parent:l})}return i.size>0&&i.forEach(({expandedRect:s,parent:l},c)=>{var x;const d=l.internals.positionAbsolute,u=Ae(l),f=l.origin??o,p=s.x<d.x?Math.round(Math.abs(d.x-s.x)):0,y=s.y<d.y?Math.round(Math.abs(d.y-s.y)):0,g=Math.max(u.width,Math.round(s.width)),b=Math.max(u.height,Math.round(s.height)),m=(g-u.width)*f[0],w=(b-u.height)*f[1];(p>0||y>0||m||w)&&(r.push({id:c,type:"position",position:{x:l.position.x-p+m,y:l.position.y-y+w}}),(x=n.get(c))==null||x.forEach(v=>{e.some(C=>C.id===v.id)||r.push({id:v.id,type:"position",position:{x:v.position.x+p,y:v.position.y+y}})})),(u.width<s.width||u.height<s.height||p||y)&&r.push({id:c,type:"dimensions",setAttributes:!0,dimensions:{width:g+(p?f[0]*p-m:0),height:b+(y?f[1]*y-w:0)}})}),r}function Op(e,t,n,o,r,i){const a=o==null?void 0:o.querySelector(".xyflow__viewport");let s=!1;if(!a)return{changes:[],updatedInternals:s};const l=[],c=window.getComputedStyle(a),{m22:d}=new window.DOMMatrixReadOnly(c.transform),u=[];for(const f of e.values()){const p=t.get(f.id);if(p)if(p.hidden)p.internals={...p.internals,handleBounds:void 0},s=!0;else{const y=In(f.nodeElement),g=p.measured.width!==y.width||p.measured.height!==y.height;if(y.width&&y.height&&(g||!p.internals.handleBounds||f.force)){const b=f.nodeElement.getBoundingClientRect(),m=st(p.extent)?p.extent:i;let{positionAbsolute:w}=p.internals;p.parentId&&p.extent==="parent"?w=pa(w,y,t.get(p.parentId)):m&&(w=Ge(w,m,y)),p.measured=y,p.internals={...p.internals,positionAbsolute:w,handleBounds:{source:Ca("source",f.nodeElement,b,d,p.id),target:Ca("target",f.nodeElement,b,d,p.id)}},p.parentId&&qo(p,t,n,{nodeOrigin:r}),s=!0,g&&(l.push({id:p.id,type:"dimensions",dimensions:y}),p.expandParent&&p.parentId&&u.push({id:p.id,parentId:p.parentId,rect:at(p,r)}))}}}if(u.length>0){const f=Qo(u,t,n,r);l.push(...f)}return{changes:l,updatedInternals:s}}async function Ap({delta:e,panZoom:t,transform:n,translateExtent:o,width:r,height:i}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const a=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[r,i]],o),s=!!a&&(a.x!==n[0]||a.y!==n[1]||a.k!==n[2]);return Promise.resolve(s)}function Ta(e,t,n){e.clear(),t.clear();for(const o of n){const{source:r,target:i,sourceHandle:a=null,targetHandle:s=null}=o,l=`${r}-source-${a}`,c=`${i}-target-${s}`,d=e.get(l)||new Map,u=e.get(c)||new Map,f={edgeId:o.id,source:r,target:i,sourceHandle:a,targetHandle:s};t.set(o.id,o),e.set(l,d.set(`${i}-${s}`,f)),e.set(c,u.set(`${r}-${a}`,f))}}function La(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return n?n.selected?!0:La(n,t):!1}function $a(e,t,n){let o=e;do{if(o!=null&&o.matches(t))return!0;if(o===n)return!1;o=o.parentElement}while(o);return!1}function Ip(e,t,n,o){const r=new Map;for(const[i,a]of e)if((a.selected||a.id===o)&&(!a.parentId||!La(a,e))&&(a.draggable||t&&typeof a.draggable>"u")){const s=e.get(i);s&&r.set(i,{id:i,position:s.position||{x:0,y:0},distance:{x:n.x-s.internals.positionAbsolute.x,y:n.y-s.internals.positionAbsolute.y},extent:s.extent,parentId:s.parentId,origin:s.origin,expandParent:s.expandParent,internals:{positionAbsolute:s.internals.positionAbsolute||{x:0,y:0}},measured:{width:s.measured.width??0,height:s.measured.height??0}})}return r}function Jo({nodeId:e,dragItems:t,nodeLookup:n,dragging:o=!0}){var a,s,l;const r=[];for(const[c,d]of t){const u=(a=n.get(c))==null?void 0:a.internals.userNode;u&&r.push({...u,position:d.position,dragging:o})}if(!e)return[r[0],r];const i=(s=n.get(e))==null?void 0:s.internals.userNode;return[i?{...i,position:((l=t.get(e))==null?void 0:l.position)||i.position,dragging:o}:r[0],r]}function Rp({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:o,onDragStop:r}){let i={x:null,y:null},a=0,s=new Map,l=!1,c={x:0,y:0},d=null,u=!1,f=null,p=!1;function y({noDragClassName:b,handleSelector:m,domNode:w,isSelectable:x,nodeId:v,nodeClickDistance:C=0}){f=me(w);function A({x:R,y:$},D){const{nodeLookup:T,nodeExtent:_,snapGrid:j,snapToGrid:N,nodeOrigin:M,onNodeDrag:E,onSelectionDrag:P,onError:z,updateNodePositions:B}=t();i={x:R,y:$};let H=!1,G={x:0,y:0,x2:0,y2:0};if(s.size>1&&_){const F=It(s);G=Fo(F)}for(const[F,Y]of s){if(!T.has(F))continue;let q={x:R-Y.distance.x,y:$-Y.distance.y};N&&(q=On(q,j));let V=[[_[0][0],_[0][1]],[_[1][0],_[1][1]]];if(s.size>1&&_&&!Y.extent){const{positionAbsolute:Z}=Y.internals,W=Z.x-G.x+_[0][0],X=Z.x+Y.measured.width-G.x2+_[1][0],J=Z.y-G.y+_[0][1],te=Z.y+Y.measured.height-G.y2+_[1][1];V=[[W,J],[X,te]]}const{position:L,positionAbsolute:K}=ha({nodeId:F,nextPosition:q,nodeLookup:T,nodeExtent:V,nodeOrigin:M,onError:z});H=H||Y.position.x!==L.x||Y.position.y!==L.y,Y.position=L,Y.internals.positionAbsolute=K}if(H&&(B(s,!0),D&&(o||E||!v&&P))){const[F,Y]=Jo({nodeId:v,dragItems:s,nodeLookup:T});o==null||o(D,s,F,Y),E==null||E(D,F,Y),v||(P==null||P(D,Y))}}async function k(){if(!d)return;const{transform:R,panBy:$,autoPanSpeed:D}=t(),[T,_]=ga(c,d,D);(T!==0||_!==0)&&(i.x=(i.x??0)-T/R[2],i.y=(i.y??0)-_/R[2],await $({x:T,y:_})&&A(i,null)),a=requestAnimationFrame(k)}function O(R){var H;const{nodeLookup:$,multiSelectionActive:D,nodesDraggable:T,transform:_,snapGrid:j,snapToGrid:N,selectNodesOnDrag:M,onNodeDragStart:E,onSelectionDragStart:P,unselectNodesAndEdges:z}=t();u=!0,(!M||!x)&&!D&&v&&((H=$.get(v))!=null&&H.selected||z()),x&&M&&v&&(e==null||e(v));const B=Dt(R.sourceEvent,{transform:_,snapGrid:j,snapToGrid:N,containerBounds:d});if(i=B,s=Ip($,T,B,v),s.size>0&&(n||E||!v&&P)){const[G,F]=Jo({nodeId:v,dragItems:s,nodeLookup:$});n==null||n(R.sourceEvent,s,G,F),E==null||E(R.sourceEvent,G,F),v||(P==null||P(R.sourceEvent,F))}}const I=ki().clickDistance(C).on("start",R=>{const{domNode:$,nodeDragThreshold:D,transform:T,snapGrid:_,snapToGrid:j}=t();d=($==null?void 0:$.getBoundingClientRect())||null,p=!1,D===0&&O(R),i=Dt(R.sourceEvent,{transform:T,snapGrid:_,snapToGrid:j,containerBounds:d}),c=Ie(R.sourceEvent,d)}).on("drag",R=>{const{autoPanOnNodeDrag:$,transform:D,snapGrid:T,snapToGrid:_,nodeDragThreshold:j,nodeLookup:N}=t(),M=Dt(R.sourceEvent,{transform:D,snapGrid:T,snapToGrid:_,containerBounds:d});if((R.sourceEvent.type==="touchmove"&&R.sourceEvent.touches.length>1||v&&!N.has(v))&&(p=!0),!p){if(!l&&$&&u&&(l=!0,k()),!u){const E=M.xSnapped-(i.x??0),P=M.ySnapped-(i.y??0);Math.sqrt(E*E+P*P)>j&&O(R)}(i.x!==M.xSnapped||i.y!==M.ySnapped)&&s&&u&&(c=Ie(R.sourceEvent,d),A(M,R.sourceEvent))}}).on("end",R=>{if(!(!u||p)&&(l=!1,u=!1,cancelAnimationFrame(a),s.size>0)){const{nodeLookup:$,updateNodePositions:D,onNodeDragStop:T,onSelectionDragStop:_}=t();if(D(s,!1),r||T||!v&&_){const[j,N]=Jo({nodeId:v,dragItems:s,nodeLookup:$,dragging:!1});r==null||r(R.sourceEvent,s,j,N),T==null||T(R.sourceEvent,j,N),v||(_==null||_(R.sourceEvent,N))}}}).filter(R=>{const $=R.target;return!R.button&&(!b||!$a($,`.${b}`,w))&&(!m||$a($,m,w))});f.call(I)}function g(){f==null||f.on(".drag",null)}return{update:y,destroy:g}}function zp(e,t,n){const o=[],r={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const i of t.values())Rt(r,at(i))>0&&o.push(i);return o}const Dp=250;function Tp(e,t,n,o){var s,l;let r=[],i=1/0;const a=zp(e,n,t+Dp);for(const c of a){const d=[...((s=c.internals.handleBounds)==null?void 0:s.source)??[],...((l=c.internals.handleBounds)==null?void 0:l.target)??[]];for(const u of d){if(o.nodeId===u.nodeId&&o.type===u.type&&o.id===u.id)continue;const{x:f,y:p}=Tt(c,u,u.position,!0),y=Math.sqrt(Math.pow(f-e.x,2)+Math.pow(p-e.y,2));y>t||(y<i?(r=[{...u,x:f,y:p}],i=y):y===i&&r.push({...u,x:f,y:p}))}}if(!r.length)return null;if(r.length>1){const c=o.type==="source"?"target":"source";return r.find(d=>d.type===c)??r[0]}return r[0]}function Va(e,t,n,o,r,i=!1){var c,d,u;const a=o.get(e);if(!a)return null;const s=r==="strict"?(c=a.internals.handleBounds)==null?void 0:c[t]:[...((d=a.internals.handleBounds)==null?void 0:d.source)??[],...((u=a.internals.handleBounds)==null?void 0:u.target)??[]],l=(n?s==null?void 0:s.find(f=>f.id===n):s==null?void 0:s[0])??null;return l&&i?{...l,...Tt(a,l,l.position,!0)}:l}function Ba(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function Lp(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}const Ha=()=>!0;function $p(e,{connectionMode:t,connectionRadius:n,handleId:o,nodeId:r,edgeUpdaterType:i,isTarget:a,domNode:s,nodeLookup:l,lib:c,autoPanOnConnect:d,flowId:u,panBy:f,cancelConnection:p,onConnectStart:y,onConnect:g,onConnectEnd:b,isValidConnection:m=Ha,onReconnectEnd:w,updateConnection:x,getTransform:v,getFromHandle:C,autoPanSpeed:A}){const k=Sa(e.target);let O=0,I;const{x:R,y:$}=Ie(e),D=k==null?void 0:k.elementFromPoint(R,$),T=Ba(i,D),_=s==null?void 0:s.getBoundingClientRect();if(!_||!T)return;const j=Va(r,T,o,l,t);if(!j)return;let N=Ie(e,_),M=!1,E=null,P=!1,z=null;function B(){if(!d||!_)return;const[L,K]=ga(N,_,A);f({x:L,y:K}),O=requestAnimationFrame(B)}const H={...j,nodeId:r,type:T,position:j.position},G=l.get(r),F={inProgress:!0,isValid:null,from:Tt(G,H,U.Left,!0),fromHandle:H,fromPosition:H.position,fromNode:G,to:N,toHandle:null,toPosition:la[H.position],toNode:null};x(F);let Y=F;y==null||y(e,{nodeId:r,handleId:o,handleType:T});function q(L){if(!C()||!H){V(L);return}const K=v();N=Ie(L,_),I=Tp(zt(N,K,!1,[1,1]),n,l,H),M||(B(),M=!0);const Z=Fa(L,{handle:I,connectionMode:t,fromNodeId:r,fromHandleId:o,fromType:a?"target":"source",isValidConnection:m,doc:k,lib:c,flowId:u,nodeLookup:l});z=Z.handleDomNode,E=Z.connection,P=Lp(!!I,Z.isValid);const W={...Y,isValid:P,to:I&&P?va({x:I.x,y:I.y},K):N,toHandle:Z.toHandle,toPosition:P&&Z.toHandle?Z.toHandle.position:la[H.position],toNode:Z.toHandle?l.get(Z.toHandle.nodeId):null};P&&I&&Y.toHandle&&W.toHandle&&Y.toHandle.type===W.toHandle.type&&Y.toHandle.nodeId===W.toHandle.nodeId&&Y.toHandle.id===W.toHandle.id&&Y.to.x===W.to.x&&Y.to.y===W.to.y||(x(W),Y=W)}function V(L){(I||z)&&E&&P&&(g==null||g(E));const{inProgress:K,...Z}=Y,W={...Z,toPosition:Y.toHandle?Y.toPosition:null};b==null||b(L,W),i&&(w==null||w(L,W)),p(),cancelAnimationFrame(O),M=!1,P=!1,E=null,z=null,k.removeEventListener("mousemove",q),k.removeEventListener("mouseup",V),k.removeEventListener("touchmove",q),k.removeEventListener("touchend",V)}k.addEventListener("mousemove",q),k.addEventListener("mouseup",V),k.addEventListener("touchmove",q),k.addEventListener("touchend",V)}function Fa(e,{handle:t,connectionMode:n,fromNodeId:o,fromHandleId:r,fromType:i,doc:a,lib:s,flowId:l,isValidConnection:c=Ha,nodeLookup:d}){const u=i==="target",f=t?a.querySelector(`.${s}-flow__handle[data-id="${l}-${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`):null,{x:p,y}=Ie(e),g=a.elementFromPoint(p,y),b=g!=null&&g.classList.contains(`${s}-flow__handle`)?g:f,m={handleDomNode:b,isValid:!1,connection:null,toHandle:null};if(b){const w=Ba(void 0,b),x=b.getAttribute("data-nodeid"),v=b.getAttribute("data-handleid"),C=b.classList.contains("connectable"),A=b.classList.contains("connectableend");if(!x||!w)return m;const k={source:u?x:o,sourceHandle:u?v:r,target:u?o:x,targetHandle:u?r:v};m.connection=k;const O=C&&A&&(n===rt.Strict?u&&w==="source"||!u&&w==="target":x!==o||v!==r);m.isValid=O&&c(k),m.toHandle=Va(x,w,v,d,n,!1)}return m}const er={onPointerDown:$p,isValid:Fa};function Vp({domNode:e,panZoom:t,getTransform:n,getViewScale:o}){const r=me(e);function i({translateExtent:s,width:l,height:c,zoomStep:d=10,pannable:u=!0,zoomable:f=!0,inversePan:p=!1}){const y=x=>{const v=n();if(x.sourceEvent.type!=="wheel"||!t)return;const C=-x.sourceEvent.deltaY*(x.sourceEvent.deltaMode===1?.05:x.sourceEvent.deltaMode?1:.002)*d,A=v[2]*Math.pow(2,C);t.scaleTo(A)};let g=[0,0];const b=x=>{(x.sourceEvent.type==="mousedown"||x.sourceEvent.type==="touchstart")&&(g=[x.sourceEvent.clientX??x.sourceEvent.touches[0].clientX,x.sourceEvent.clientY??x.sourceEvent.touches[0].clientY])},m=x=>{const v=n();if(x.sourceEvent.type!=="mousemove"&&x.sourceEvent.type!=="touchmove"||!t)return;const C=[x.sourceEvent.clientX??x.sourceEvent.touches[0].clientX,x.sourceEvent.clientY??x.sourceEvent.touches[0].clientY],A=[C[0]-g[0],C[1]-g[1]];g=C;const k=o()*Math.max(v[2],Math.log(v[2]))*(p?-1:1),O={x:v[0]-A[0]*k,y:v[1]-A[1]*k},I=[[0,0],[l,c]];t.setViewportConstrained({x:O.x,y:O.y,zoom:v[2]},I,s)},w=ia().on("start",b).on("zoom",u?m:null).on("zoom.wheel",f?y:null);r.call(w,{})}function a(){r.on("zoom",null)}return{update:i,destroy:a,pointer:xe}}const Bp=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,zn=e=>({x:e.x,y:e.y,zoom:e.k}),tr=({x:e,y:t,zoom:n})=>En.translate(e,t).scale(n),lt=(e,t)=>e.target.closest(`.${t}`),Ya=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),nr=(e,t=0,n=()=>{})=>{const o=typeof t=="number"&&t>0;return o||n(),o?e.transition().duration(t).on("end",n):e},Za=e=>{const t=e.ctrlKey&&An()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function Hp({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:o,panOnScrollMode:r,panOnScrollSpeed:i,zoomOnPinch:a,onPanZoomStart:s,onPanZoom:l,onPanZoomEnd:c}){return d=>{if(lt(d,t))return!1;d.preventDefault(),d.stopImmediatePropagation();const u=n.property("__zoom").k||1;if(d.ctrlKey&&a){const b=xe(d),m=Za(d),w=u*Math.pow(2,m);o.scaleTo(n,w,b,d);return}const f=d.deltaMode===1?20:1;let p=r===Ze.Vertical?0:d.deltaX*f,y=r===Ze.Horizontal?0:d.deltaY*f;!An()&&d.shiftKey&&r!==Ze.Vertical&&(p=d.deltaY*f,y=0),o.translateBy(n,-(p/u)*i,-(y/u)*i,{internal:!0});const g=zn(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling||(e.isPanScrolling=!0,s==null||s(d,g)),e.isPanScrolling&&(l==null||l(d,g),e.panScrollTimeout=setTimeout(()=>{c==null||c(d,g),e.isPanScrolling=!1},150))}}function Fp({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(o,r){if(!t&&o.type==="wheel"&&!o.ctrlKey||lt(o,e))return null;o.preventDefault(),n.call(this,o,r)}}function Yp({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return o=>{var i,a,s;if((i=o.sourceEvent)!=null&&i.internal)return;const r=zn(o.transform);e.mouseButton=((a=o.sourceEvent)==null?void 0:a.button)||0,e.isZoomingOrPanning=!0,e.prevViewport=r,((s=o.sourceEvent)==null?void 0:s.type)==="mousedown"&&t(!0),n&&(n==null||n(o.sourceEvent,r))}}function Zp({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:o,onPanZoom:r}){return i=>{var a,s;e.usedRightMouseButton=!!(n&&Ya(t,e.mouseButton??0)),(a=i.sourceEvent)!=null&&a.sync||o([i.transform.x,i.transform.y,i.transform.k]),r&&!((s=i.sourceEvent)!=null&&s.internal)&&(r==null||r(i.sourceEvent,zn(i.transform)))}}function Xp({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:o,onPanZoomEnd:r,onPaneContextMenu:i}){return a=>{var s;if(!((s=a.sourceEvent)!=null&&s.internal)&&(e.isZoomingOrPanning=!1,i&&Ya(t,e.mouseButton??0)&&!e.usedRightMouseButton&&a.sourceEvent&&i(a.sourceEvent),e.usedRightMouseButton=!1,o(!1),r&&Bp(e.prevViewport,a.transform))){const l=zn(a.transform);e.prevViewport=l,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{r==null||r(a.sourceEvent,l)},n?150:0)}}}function Kp({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:o,panOnScroll:r,zoomOnDoubleClick:i,userSelectionActive:a,noWheelClassName:s,noPanClassName:l,lib:c}){return d=>{var y;const u=e||t,f=n&&d.ctrlKey;if(d.button===1&&d.type==="mousedown"&&(lt(d,`${c}-flow__node`)||lt(d,`${c}-flow__edge`)))return!0;if(!o&&!u&&!r&&!i&&!n||a||lt(d,s)&&d.type==="wheel"||lt(d,l)&&(d.type!=="wheel"||r&&d.type==="wheel"&&!e)||!n&&d.ctrlKey&&d.type==="wheel")return!1;if(!n&&d.type==="touchstart"&&((y=d.touches)==null?void 0:y.length)>1)return d.preventDefault(),!1;if(!u&&!r&&!f&&d.type==="wheel"||!o&&(d.type==="mousedown"||d.type==="touchstart")||Array.isArray(o)&&!o.includes(d.button)&&d.type==="mousedown")return!1;const p=Array.isArray(o)&&o.includes(d.button)||!d.button||d.button<=1;return(!d.ctrlKey||d.type==="wheel")&&p}}function Wp({domNode:e,minZoom:t,maxZoom:n,paneClickDistance:o,translateExtent:r,viewport:i,onPanZoom:a,onPanZoomStart:s,onPanZoomEnd:l,onDraggingChange:c}){const d={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},u=e.getBoundingClientRect(),f=ia().clickDistance(!be(o)||o<0?0:o).scaleExtent([t,n]).translateExtent(r),p=me(e).call(f);x({x:i.x,y:i.y,zoom:it(i.zoom,t,n)},[[0,0],[u.width,u.height]],r);const y=p.on("wheel.zoom"),g=p.on("dblclick.zoom");f.wheelDelta(Za);function b(D,T){return p?new Promise(_=>{f==null||f.transform(nr(p,T==null?void 0:T.duration,()=>_(!0)),D)}):Promise.resolve(!1)}function m({noWheelClassName:D,noPanClassName:T,onPaneContextMenu:_,userSelectionActive:j,panOnScroll:N,panOnDrag:M,panOnScrollMode:E,panOnScrollSpeed:P,preventScrolling:z,zoomOnPinch:B,zoomOnScroll:H,zoomOnDoubleClick:G,zoomActivationKeyPressed:F,lib:Y,onTransformChange:q}){j&&!d.isZoomingOrPanning&&w();const V=N&&!F&&!j?Hp({zoomPanValues:d,noWheelClassName:D,d3Selection:p,d3Zoom:f,panOnScrollMode:E,panOnScrollSpeed:P,zoomOnPinch:B,onPanZoomStart:s,onPanZoom:a,onPanZoomEnd:l}):Fp({noWheelClassName:D,preventScrolling:z,d3ZoomHandler:y});if(p.on("wheel.zoom",V,{passive:!1}),!j){const K=Yp({zoomPanValues:d,onDraggingChange:c,onPanZoomStart:s});f.on("start",K);const Z=Zp({zoomPanValues:d,panOnDrag:M,onPaneContextMenu:!!_,onPanZoom:a,onTransformChange:q});f.on("zoom",Z);const W=Xp({zoomPanValues:d,panOnDrag:M,panOnScroll:N,onPaneContextMenu:_,onPanZoomEnd:l,onDraggingChange:c});f.on("end",W)}const L=Kp({zoomActivationKeyPressed:F,panOnDrag:M,zoomOnScroll:H,panOnScroll:N,zoomOnDoubleClick:G,zoomOnPinch:B,userSelectionActive:j,noPanClassName:T,noWheelClassName:D,lib:Y});f.filter(L),G?p.on("dblclick.zoom",g):p.on("dblclick.zoom",null)}function w(){f.on("zoom",null)}async function x(D,T,_){const j=tr(D),N=f==null?void 0:f.constrain()(j,T,_);return N&&await b(N),new Promise(M=>M(N))}async function v(D,T){const _=tr(D);return await b(_,T),new Promise(j=>j(_))}function C(D){if(p){const T=tr(D),_=p.property("__zoom");(_.k!==D.zoom||_.x!==D.x||_.y!==D.y)&&(f==null||f.transform(p,T,null,{sync:!0}))}}function A(){const D=p?oa(p.node()):{x:0,y:0,k:1};return{x:D.x,y:D.y,zoom:D.k}}function k(D,T){return p?new Promise(_=>{f==null||f.scaleTo(nr(p,T==null?void 0:T.duration,()=>_(!0)),D)}):Promise.resolve(!1)}function O(D,T){return p?new Promise(_=>{f==null||f.scaleBy(nr(p,T==null?void 0:T.duration,()=>_(!0)),D)}):Promise.resolve(!1)}function I(D){f==null||f.scaleExtent(D)}function R(D){f==null||f.translateExtent(D)}function $(D){const T=!be(D)||D<0?0:D;f==null||f.clickDistance(T)}return{update:m,destroy:w,setViewport:v,setViewportConstrained:x,getViewport:A,scaleTo:k,scaleBy:O,setScaleExtent:I,setTranslateExtent:R,syncViewport:C,setClickDistance:$}}var ct;(function(e){e.Line="line",e.Handle="handle"})(ct||(ct={}));const Gp=["top-left","top-right","bottom-left","bottom-right"],Up=["top","right","bottom","left"];function qp({width:e,prevWidth:t,height:n,prevHeight:o,affectsX:r,affectsY:i}){const a=e-t,s=n-o,l=[a>0?1:a<0?-1:0,s>0?1:s<0?-1:0];return a&&r&&(l[0]=l[0]*-1),s&&i&&(l[1]=l[1]*-1),l}function Qp(e){const t=e.includes("right")||e.includes("left"),n=e.includes("bottom")||e.includes("top"),o=e.includes("left"),r=e.includes("top");return{isHorizontal:t,isVertical:n,affectsX:o,affectsY:r}}function Le(e,t){return Math.max(0,t-e)}function $e(e,t){return Math.max(0,e-t)}function Dn(e,t,n){return Math.max(0,t-e,e-n)}function Xa(e,t){return e?!t:t}function Jp(e,t,n,o,r,i,a,s){let{affectsX:l,affectsY:c}=t;const{isHorizontal:d,isVertical:u}=t,f=d&&u,{xSnapped:p,ySnapped:y}=n,{minWidth:g,maxWidth:b,minHeight:m,maxHeight:w}=o,{x,y:v,width:C,height:A,aspectRatio:k}=e;let O=Math.floor(d?p-e.pointerX:0),I=Math.floor(u?y-e.pointerY:0);const R=C+(l?-O:O),$=A+(c?-I:I),D=-i[0]*C,T=-i[1]*A;let _=Dn(R,g,b),j=Dn($,m,w);if(a){let E=0,P=0;l&&O<0?E=Le(x+O+D,a[0][0]):!l&&O>0&&(E=$e(x+R+D,a[1][0])),c&&I<0?P=Le(v+I+T,a[0][1]):!c&&I>0&&(P=$e(v+$+T,a[1][1])),_=Math.max(_,E),j=Math.max(j,P)}if(s){let E=0,P=0;l&&O>0?E=$e(x+O,s[0][0]):!l&&O<0&&(E=Le(x+R,s[1][0])),c&&I>0?P=$e(v+I,s[0][1]):!c&&I<0&&(P=Le(v+$,s[1][1])),_=Math.max(_,E),j=Math.max(j,P)}if(r){if(d){const E=Dn(R/k,m,w)*k;if(_=Math.max(_,E),a){let P=0;!l&&!c||l&&!c&&f?P=$e(v+T+R/k,a[1][1])*k:P=Le(v+T+(l?O:-O)/k,a[0][1])*k,_=Math.max(_,P)}if(s){let P=0;!l&&!c||l&&!c&&f?P=Le(v+R/k,s[1][1])*k:P=$e(v+(l?O:-O)/k,s[0][1])*k,_=Math.max(_,P)}}if(u){const E=Dn($*k,g,b)/k;if(j=Math.max(j,E),a){let P=0;!l&&!c||c&&!l&&f?P=$e(x+$*k+D,a[1][0])/k:P=Le(x+(c?I:-I)*k+D,a[0][0])/k,j=Math.max(j,P)}if(s){let P=0;!l&&!c||c&&!l&&f?P=Le(x+$*k,s[1][0])/k:P=$e(x+(c?I:-I)*k,s[0][0])/k,j=Math.max(j,P)}}}I=I+(I<0?j:-j),O=O+(O<0?_:-_),r&&(f?R>$*k?I=(Xa(l,c)?-O:O)/k:O=(Xa(l,c)?-I:I)*k:d?(I=O/k,c=l):(O=I*k,l=c));const N=l?x+O:x,M=c?v+I:v;return{width:C+(l?-O:O),height:A+(c?-I:I),x:i[0]*O*(l?-1:1)+N,y:i[1]*I*(c?-1:1)+M}}const Ka={width:0,height:0,x:0,y:0},em={...Ka,pointerX:0,pointerY:0,aspectRatio:1};function tm(e){return[[0,0],[e.measured.width,e.measured.height]]}function nm(e,t,n){const o=t.position.x+e.position.x,r=t.position.y+e.position.y,i=e.measured.width??0,a=e.measured.height??0,s=n[0]*i,l=n[1]*a;return[[o-s,r-l],[o+i-s,r+a-l]]}function om({domNode:e,nodeId:t,getStoreItems:n,onChange:o,onEnd:r}){const i=me(e);function a({controlPosition:l,boundaries:c,keepAspectRatio:d,onResizeStart:u,onResize:f,onResizeEnd:p,shouldResize:y}){let g={...Ka},b={...em};const m=Qp(l);let w,x=null,v=[],C,A,k;const O=ki().on("start",I=>{const{nodeLookup:R,transform:$,snapGrid:D,snapToGrid:T,nodeOrigin:_,paneDomNode:j}=n();if(w=R.get(t),!w)return;x=(j==null?void 0:j.getBoundingClientRect())??null;const{xSnapped:N,ySnapped:M}=Dt(I.sourceEvent,{transform:$,snapGrid:D,snapToGrid:T,containerBounds:x});g={width:w.measured.width??0,height:w.measured.height??0,x:w.position.x??0,y:w.position.y??0},b={...g,pointerX:N,pointerY:M,aspectRatio:g.width/g.height},C=void 0,w.parentId&&(w.extent==="parent"||w.expandParent)&&(C=R.get(w.parentId),A=C&&w.extent==="parent"?tm(C):void 0),v=[],k=void 0;for(const[E,P]of R)if(P.parentId===t&&(v.push({id:E,position:{...P.position},extent:P.extent}),P.extent==="parent"||P.expandParent)){const z=nm(P,w,P.origin??_);k?k=[[Math.min(z[0][0],k[0][0]),Math.min(z[0][1],k[0][1])],[Math.max(z[1][0],k[1][0]),Math.max(z[1][1],k[1][1])]]:k=z}u==null||u(I,{...g})}).on("drag",I=>{const{transform:R,snapGrid:$,snapToGrid:D,nodeOrigin:T}=n(),_=Dt(I.sourceEvent,{transform:R,snapGrid:$,snapToGrid:D,containerBounds:x}),j=[];if(!w)return;const{x:N,y:M,width:E,height:P}=g,z={},B=w.origin??T,{width:H,height:G,x:F,y:Y}=Jp(b,m,_,c,d,B,A,k),q=H!==E,V=G!==P,L=F!==N&&q,K=Y!==M&&V;if(!L&&!K&&!q&&!V)return;if((L||K||B[0]===1||B[1]===1)&&(z.x=L?F:g.x,z.y=K?Y:g.y,g.x=z.x,g.y=z.y,v.length>0)){const X=F-N,J=Y-M;for(const te of v)te.position={x:te.position.x-X+B[0]*(H-E),y:te.position.y-J+B[1]*(G-P)},j.push(te)}if((q||V)&&(z.width=q?H:g.width,z.height=V?G:g.height,g.width=z.width,g.height=z.height),C&&w.expandParent){const X=B[0]*(z.width??0);z.x&&z.x<X&&(g.x=X,b.x=b.x-(z.x-X));const J=B[1]*(z.height??0);z.y&&z.y<J&&(g.y=J,b.y=b.y-(z.y-J))}const Z=qp({width:g.width,prevWidth:E,height:g.height,prevHeight:P,affectsX:m.affectsX,affectsY:m.affectsY}),W={...g,direction:Z};(y==null?void 0:y(I,W))!==!1&&(f==null||f(I,W),o(z,j))}).on("end",I=>{p==null||p(I,{...g}),r==null||r()});i.call(O)}function s(){i.on(".drag",null)}return{update:a,destroy:s}}const rm={},Wa=e=>{let t;const n=new Set,o=(s,l)=>{const c=typeof s=="function"?s(t):s;if(!Object.is(c,t)){const d=t;t=l??(typeof c!="object"||c===null)?c:Object.assign({},t,c),n.forEach(u=>u(t,d))}},r=()=>t,i={setState:o,getState:r,getInitialState:()=>a,subscribe:s=>(n.add(s),()=>n.delete(s)),destroy:()=>{(rm?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},a=t=e(o,r,i);return i},im=e=>e?Wa(e):Wa,{useDebugValue:am}=ge,{useSyncExternalStoreWithSelector:sm}=Qx,lm=e=>e;function Ga(e,t=lm,n){const o=sm(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return am(o),o}const Ua=(e,t)=>{const n=im(e),o=(r,i=t)=>Ga(n,r,i);return Object.assign(o,n),o},cm=(e,t)=>e?Ua(e,t):Ua;function oe(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[o,r]of e)if(!Object.is(r,t.get(o)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const o of e)if(!t.has(o))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const o of n)if(!Object.prototype.hasOwnProperty.call(t,o)||!Object.is(e[o],t[o]))return!1;return!0}const Tn=S.createContext(null),dm=Tn.Provider,qa=Oe.error001();ee=function(e,t){const n=S.useContext(Tn);if(n===null)throw new Error(qa);return Ga(n,e,t)},ne=function(){const e=S.useContext(Tn);if(e===null)throw new Error(qa);return S.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])};const Qa={display:"none"},um={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Ja="react-flow__node-desc",es="react-flow__edge-desc",fm="react-flow__aria-live",hm=e=>e.ariaLiveMessage;function pm({rfId:e}){const t=ee(hm);return h.jsx("div",{id:`${fm}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:um,children:t})}function mm({rfId:e,disableKeyboardA11y:t}){return h.jsxs(h.Fragment,{children:[h.jsxs("div",{id:`${Ja}-${e}`,style:Qa,children:["Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "]}),h.jsx("div",{id:`${es}-${e}`,style:Qa,children:"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."}),!t&&h.jsx(pm,{rfId:e})]})}const gm=e=>e.userSelectionActive?"none":"all";rn=function({position:e="top-left",children:t,className:n,style:o,...r}){const i=ee(gm),a=`${e}`.split("-");return h.jsx("div",{className:ie(["react-flow__panel",n,...a]),style:{...o,pointerEvents:i},...r,children:t})};function ym({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:h.jsx(rn,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:h.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const xm=e=>{const t=[],n=[];for(const[,o]of e.nodeLookup)o.selected&&t.push(o.internals.userNode);for(const[,o]of e.edgeLookup)o.selected&&n.push(o);return{selectedNodes:t,selectedEdges:n}},Ln=e=>e.id;function vm(e,t){return oe(e.selectedNodes.map(Ln),t.selectedNodes.map(Ln))&&oe(e.selectedEdges.map(Ln),t.selectedEdges.map(Ln))}function wm({onSelectionChange:e}){const t=ne(),{selectedNodes:n,selectedEdges:o}=ee(xm,vm);return S.useEffect(()=>{const r={nodes:n,edges:o};e==null||e(r),t.getState().onSelectionChangeHandlers.forEach(i=>i(r))},[n,o,e]),null}const bm=e=>!!e.onSelectionChangeHandlers;function Sm({onSelectionChange:e}){const t=ee(bm);return e||t?h.jsx(wm,{onSelectionChange:e}):null}const ts=[0,0],_m={x:0,y:0,zoom:1},Cm=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","onBeforeDelete","debug","autoPanSpeed","paneClickDistance"],ns=[...Cm,"rfId"],Nm=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setPaneClickDistance:e.setPaneClickDistance}),os={translateExtent:Mt,nodeOrigin:ts,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1",paneClickDistance:0};function Em(e){const{setNodes:t,setEdges:n,setMinZoom:o,setMaxZoom:r,setTranslateExtent:i,setNodeExtent:a,reset:s,setDefaultNodesAndEdges:l,setPaneClickDistance:c}=ee(Nm,oe),d=ne();S.useEffect(()=>(l(e.defaultNodes,e.defaultEdges),()=>{u.current=os,s()}),[]);const u=S.useRef(os);return S.useEffect(()=>{for(const f of ns){const p=e[f],y=u.current[f];p!==y&&(typeof e[f]>"u"||(f==="nodes"?t(p):f==="edges"?n(p):f==="minZoom"?o(p):f==="maxZoom"?r(p):f==="translateExtent"?i(p):f==="nodeExtent"?a(p):f==="paneClickDistance"?c(p):f==="fitView"?d.setState({fitViewOnInit:p}):f==="fitViewOptions"?d.setState({fitViewOnInitOptions:p}):d.setState({[f]:p})))}u.current=e},ns.map(f=>e[f])),null}function rs(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function km(e){var o;const[t,n]=S.useState(e==="system"?null:e);return S.useEffect(()=>{if(e!=="system"){n(e);return}const r=rs(),i=()=>n(r!=null&&r.matches?"dark":"light");return i(),r==null||r.addEventListener("change",i),()=>{r==null||r.removeEventListener("change",i)}},[e]),t!==null?t:(o=rs())!=null&&o.matches?"dark":"light"}const is=typeof document<"u"?document:null;function Lt(e=null,t={target:is,actInsideInputWithModifier:!0}){const[n,o]=S.useState(!1),r=S.useRef(!1),i=S.useRef(new Set([])),[a,s]=S.useMemo(()=>{if(e!==null){const l=(Array.isArray(e)?e:[e]).filter(d=>typeof d=="string").map(d=>d.replace("+",`
`).replace(`

`,`
+`).split(`
`)),c=l.reduce((d,u)=>d.concat(...u),[]);return[l,c]}return[[],[]]},[e]);return S.useEffect(()=>{const l=(t==null?void 0:t.target)||is;if(e!==null){const c=f=>{if(r.current=f.ctrlKey||f.metaKey||f.shiftKey,(!r.current||r.current&&!t.actInsideInputWithModifier)&&Zo(f))return!1;const p=ss(f.code,s);i.current.add(f[p]),as(a,i.current,!1)&&(f.preventDefault(),o(!0))},d=f=>{if((!r.current||r.current&&!t.actInsideInputWithModifier)&&Zo(f))return!1;const p=ss(f.code,s);as(a,i.current,!0)?(o(!1),i.current.clear()):i.current.delete(f[p]),f.key==="Meta"&&i.current.clear(),r.current=!1},u=()=>{i.current.clear(),o(!1)};return l==null||l.addEventListener("keydown",c),l==null||l.addEventListener("keyup",d),window.addEventListener("blur",u),window.addEventListener("contextmenu",u),()=>{l==null||l.removeEventListener("keydown",c),l==null||l.removeEventListener("keyup",d),window.removeEventListener("blur",u),window.removeEventListener("contextmenu",u)}}},[e,o]),n}function as(e,t,n){return e.filter(o=>n||o.length===t.size).some(o=>o.every(r=>t.has(r)))}function ss(e,t){return t.includes(e)?"code":"key"}const jm=()=>{const e=ne();return S.useMemo(()=>({zoomIn:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomOut:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1/1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomTo:(t,n)=>{const{panZoom:o}=e.getState();return o?o.scaleTo(t,{duration:n==null?void 0:n.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(t,n)=>{const{transform:[o,r,i],panZoom:a}=e.getState();return a?(await a.setViewport({x:t.x??o,y:t.y??r,zoom:t.zoom??i},{duration:n==null?void 0:n.duration}),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[t,n,o]=e.getState().transform;return{x:t,y:n,zoom:o}},fitView:t=>{const{nodeLookup:n,minZoom:o,maxZoom:r,panZoom:i,domNode:a}=e.getState();if(!i||!a)return Promise.resolve(!1);const s=Bo(n,t),{width:l,height:c}=In(a);return Ho({nodes:s,width:l,height:c,minZoom:o,maxZoom:r,panZoom:i},t)},setCenter:async(t,n,o)=>{const{width:r,height:i,maxZoom:a,panZoom:s}=e.getState(),l=typeof(o==null?void 0:o.zoom)<"u"?o.zoom:a,c=r/2-t*l,d=i/2-n*l;return s?(await s.setViewport({x:c,y:d,zoom:l},{duration:o==null?void 0:o.duration}),Promise.resolve(!0)):Promise.resolve(!1)},fitBounds:async(t,n)=>{const{width:o,height:r,minZoom:i,maxZoom:a,panZoom:s}=e.getState(),l=Yo(t,o,r,i,a,(n==null?void 0:n.padding)??.1);return s?(await s.setViewport(l,{duration:n==null?void 0:n.duration}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(t,n={snapToGrid:!0})=>{const{transform:o,snapGrid:r,domNode:i}=e.getState();if(!i)return t;const{x:a,y:s}=i.getBoundingClientRect(),l={x:t.x-a,y:t.y-s};return zt(l,o,n.snapToGrid,r)},flowToScreenPosition:t=>{const{transform:n,domNode:o}=e.getState();if(!o)return t;const{x:r,y:i}=o.getBoundingClientRect(),a=va(t,n);return{x:a.x+r,y:a.y+i}}}),[])};function ls(e,t){const n=[],o=new Map,r=[];for(const i of e)if(i.type==="add"){r.push(i);continue}else if(i.type==="remove"||i.type==="replace")o.set(i.id,[i]);else{const a=o.get(i.id);a?a.push(i):o.set(i.id,[i])}for(const i of t){const a=o.get(i.id);if(!a){n.push(i);continue}if(a[0].type==="remove")continue;if(a[0].type==="replace"){n.push({...a[0].item});continue}const s={...i};for(const l of a)Pm(l,s);n.push(s)}return r.length&&r.forEach(i=>{i.index!==void 0?n.splice(i.index,0,{...i.item}):n.push({...i.item})}),n}function Pm(e,t){switch(e.type){case"select":{t.selected=e.selected;break}case"position":{typeof e.position<"u"&&(t.position=e.position),typeof e.dragging<"u"&&(t.dragging=e.dragging);break}case"dimensions":{typeof e.dimensions<"u"&&(t.measured??(t.measured={}),t.measured.width=e.dimensions.width,t.measured.height=e.dimensions.height,e.setAttributes&&(t.width=e.dimensions.width,t.height=e.dimensions.height)),typeof e.resizing=="boolean"&&(t.resizing=e.resizing);break}}}Ye=function(e,t){return ls(e,t)};function $t(e,t){return ls(e,t)}function Ue(e,t){return{id:e,type:"select",selected:t}}function dt(e,t=new Set,n=!1){const o=[];for(const[r,i]of e){const a=t.has(r);!(i.selected===void 0&&!a)&&i.selected!==a&&(n&&(i.selected=a),o.push(Ue(i.id,a)))}return o}function cs({items:e=[],lookup:t}){var r;const n=[],o=new Map(e.map(i=>[i.id,i]));for(const[i,a]of e.entries()){const s=t.get(a.id),l=((r=s==null?void 0:s.internals)==null?void 0:r.userNode)??s;l!==void 0&&l!==a&&n.push({id:a.id,item:a,type:"replace"}),l===void 0&&n.push({item:a,type:"add",index:i})}for(const[i]of t)o.get(i)===void 0&&n.push({id:i,type:"remove"});return n}function ds(e){return{id:e.id,type:"remove"}}const us=e=>fp(e),Mm=e=>ua(e);function fs(e){return S.forwardRef(e)}const Om=typeof window<"u"?S.useLayoutEffect:S.useEffect;function hs(e){const[t,n]=S.useState(BigInt(0)),[o]=S.useState(()=>Am(()=>n(r=>r+BigInt(1))));return Om(()=>{const r=o.get();r.length&&(e(r),o.reset())},[t]),o}function Am(e){let t=[];return{get:()=>t,reset:()=>{t=[]},push:n=>{t.push(n),e()}}}const ps=S.createContext(null);function Im({children:e}){const t=ne(),n=S.useCallback(s=>{const{nodes:l=[],setNodes:c,hasDefaultNodes:d,onNodesChange:u,nodeLookup:f}=t.getState();let p=l;for(const y of s)p=typeof y=="function"?y(p):y;d?c(p):u&&u(cs({items:p,lookup:f}))},[]),o=hs(n),r=S.useCallback(s=>{const{edges:l=[],setEdges:c,hasDefaultEdges:d,onEdgesChange:u,edgeLookup:f}=t.getState();let p=l;for(const y of s)p=typeof y=="function"?y(p):y;d?c(p):u&&u(cs({items:p,lookup:f}))},[]),i=hs(r),a=S.useMemo(()=>({nodeQueue:o,edgeQueue:i}),[]);return h.jsx(ps.Provider,{value:a,children:e})}function Rm(){const e=S.useContext(ps);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}const zm=e=>!!e.panZoom;tn=function(){const e=jm(),t=ne(),n=Rm(),o=ee(zm),r=S.useMemo(()=>{const i=u=>t.getState().nodeLookup.get(u),a=u=>{n.nodeQueue.push(u)},s=u=>{n.edgeQueue.push(u)},l=u=>{var m,w;const{nodeLookup:f,nodeOrigin:p}=t.getState(),y=us(u)?u:f.get(u.id),g=y.parentId?ba(y.position,y.measured,y.parentId,f,p):y.position,b={id:y.id,position:g,width:((m=y.measured)==null?void 0:m.width)??y.width,height:((w=y.measured)==null?void 0:w.height)??y.height,data:y.data};return at(b)},c=(u,f,p={replace:!1})=>{a(y=>y.map(g=>{if(g.id===u){const b=typeof f=="function"?f(g):f;return p.replace&&us(b)?b:{...g,...b}}return g}))},d=(u,f,p={replace:!1})=>{s(y=>y.map(g=>{if(g.id===u){const b=typeof f=="function"?f(g):f;return p.replace&&Mm(b)?b:{...g,...b}}return g}))};return{getNodes:()=>t.getState().nodes.map(u=>({...u})),getNode:u=>{var f;return(f=i(u))==null?void 0:f.internals.userNode},getInternalNode:i,getEdges:()=>{const{edges:u=[]}=t.getState();return u.map(f=>({...f}))},getEdge:u=>t.getState().edgeLookup.get(u),setNodes:a,setEdges:s,addNodes:u=>{const f=Array.isArray(u)?u:[u];n.nodeQueue.push(p=>[...p,...f])},addEdges:u=>{const f=Array.isArray(u)?u:[u];n.edgeQueue.push(p=>[...p,...f])},toObject:()=>{const{nodes:u=[],edges:f=[],transform:p}=t.getState(),[y,g,b]=p;return{nodes:u.map(m=>({...m})),edges:f.map(m=>({...m})),viewport:{x:y,y:g,zoom:b}}},deleteElements:async({nodes:u=[],edges:f=[]})=>{const{nodes:p,edges:y,onNodesDelete:g,onEdgesDelete:b,triggerNodeChanges:m,triggerEdgeChanges:w,onDelete:x,onBeforeDelete:v}=t.getState(),{nodes:C,edges:A}=await mp({nodesToRemove:u,edgesToRemove:f,nodes:p,edges:y,onBeforeDelete:v}),k=A.length>0,O=C.length>0;if(k){const I=A.map(ds);b==null||b(A),w(I)}if(O){const I=C.map(ds);g==null||g(C),m(I)}return(O||k)&&(x==null||x({nodes:C,edges:A})),{deletedNodes:C,deletedEdges:A}},getIntersectingNodes:(u,f=!0,p)=>{const y=xa(u),g=y?u:l(u),b=p!==void 0;return g?(p||t.getState().nodes).filter(m=>{const w=t.getState().nodeLookup.get(m.id);if(w&&!y&&(m.id===u.id||!w.internals.positionAbsolute))return!1;const x=at(b?m:w),v=Rt(x,g);return f&&v>0||v>=g.width*g.height}):[]},isNodeIntersecting:(u,f,p=!0)=>{const y=xa(u)?u:l(u);if(!y)return!1;const g=Rt(y,f);return p&&g>0||g>=y.width*y.height},updateNode:c,updateNodeData:(u,f,p={replace:!1})=>{c(u,y=>{const g=typeof f=="function"?f(y):f;return p.replace?{...y,data:g}:{...y,data:{...y.data,...g}}},p)},updateEdge:d,updateEdgeData:(u,f,p={replace:!1})=>{d(u,y=>{const g=typeof f=="function"?f(y):f;return p.replace?{...y,data:g}:{...y,data:{...y.data,...g}}},p)},getNodesBounds:u=>{const{nodeLookup:f,nodeOrigin:p}=t.getState();return hp(u,{nodeLookup:f,nodeOrigin:p})},getHandleConnections:({type:u,id:f,nodeId:p})=>{var y;return Array.from(((y=t.getState().connectionLookup.get(`${p}-${u}-${f??null}`))==null?void 0:y.values())??[])}}},[]);return S.useMemo(()=>({...r,...e,viewportInitialized:o}),[o])};const ms=e=>e.selected,Dm={actInsideInputWithModifier:!1},Tm=typeof window<"u"?window:void 0;function Lm({deleteKeyCode:e,multiSelectionKeyCode:t}){const n=ne(),{deleteElements:o}=tn(),r=Lt(e,Dm),i=Lt(t,{target:Tm});S.useEffect(()=>{if(r){const{edges:a,nodes:s}=n.getState();o({nodes:s.filter(ms),edges:a.filter(ms)}),n.setState({nodesSelectionActive:!1})}},[r]),S.useEffect(()=>{n.setState({multiSelectionActive:i})},[i])}function $m(e){const t=ne();S.useEffect(()=>{const n=()=>{var r,i;if(!e.current)return!1;const o=In(e.current);(o.height===0||o.width===0)&&((i=(r=t.getState()).onError)==null||i.call(r,"004",Oe.error004())),t.setState({width:o.width||500,height:o.height||500})};if(e.current){n(),window.addEventListener("resize",n);const o=new ResizeObserver(()=>n());return o.observe(e.current),()=>{window.removeEventListener("resize",n),o&&e.current&&o.unobserve(e.current)}}},[])}const $n={position:"absolute",width:"100%",height:"100%",top:0,left:0},Vm=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib});function Bm({onPaneContextMenu:e,zoomOnScroll:t=!0,zoomOnPinch:n=!0,panOnScroll:o=!1,panOnScrollSpeed:r=.5,panOnScrollMode:i=Ze.Free,zoomOnDoubleClick:a=!0,panOnDrag:s=!0,defaultViewport:l,translateExtent:c,minZoom:d,maxZoom:u,zoomActivationKeyCode:f,preventScrolling:p=!0,children:y,noWheelClassName:g,noPanClassName:b,onViewportChange:m,isControlledViewport:w,paneClickDistance:x}){const v=ne(),C=S.useRef(null),{userSelectionActive:A,lib:k}=ee(Vm,oe),O=Lt(f),I=S.useRef();$m(C);const R=S.useCallback($=>{m==null||m({x:$[0],y:$[1],zoom:$[2]}),w||v.setState({transform:$})},[m,w]);return S.useEffect(()=>{if(C.current){I.current=Wp({domNode:C.current,minZoom:d,maxZoom:u,translateExtent:c,viewport:l,paneClickDistance:x,onDraggingChange:_=>v.setState({paneDragging:_}),onPanZoomStart:(_,j)=>{const{onViewportChangeStart:N,onMoveStart:M}=v.getState();M==null||M(_,j),N==null||N(j)},onPanZoom:(_,j)=>{const{onViewportChange:N,onMove:M}=v.getState();M==null||M(_,j),N==null||N(j)},onPanZoomEnd:(_,j)=>{const{onViewportChangeEnd:N,onMoveEnd:M}=v.getState();M==null||M(_,j),N==null||N(j)}});const{x:$,y:D,zoom:T}=I.current.getViewport();return v.setState({panZoom:I.current,transform:[$,D,T],domNode:C.current.closest(".react-flow")}),()=>{var _;(_=I.current)==null||_.destroy()}}},[]),S.useEffect(()=>{var $;($=I.current)==null||$.update({onPaneContextMenu:e,zoomOnScroll:t,zoomOnPinch:n,panOnScroll:o,panOnScrollSpeed:r,panOnScrollMode:i,zoomOnDoubleClick:a,panOnDrag:s,zoomActivationKeyPressed:O,preventScrolling:p,noPanClassName:b,userSelectionActive:A,noWheelClassName:g,lib:k,onTransformChange:R})},[e,t,n,o,r,i,a,s,O,p,b,A,g,k,R]),h.jsx("div",{className:"react-flow__renderer",ref:C,style:$n,children:y})}const Hm=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function Fm(){const{userSelectionActive:e,userSelectionRect:t}=ee(Hm,oe);return e&&t?h.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}const or=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},Ym=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging});function Zm({isSelecting:e,selectionKeyPressed:t,selectionMode:n=Ot.Full,panOnDrag:o,selectionOnDrag:r,onSelectionStart:i,onSelectionEnd:a,onPaneClick:s,onPaneContextMenu:l,onPaneScroll:c,onPaneMouseEnter:d,onPaneMouseMove:u,onPaneMouseLeave:f,children:p}){const y=S.useRef(null),g=ne(),b=S.useRef(0),m=S.useRef(0),w=S.useRef(),x=S.useRef(new Map),{userSelectionActive:v,elementsSelectable:C,dragging:A}=ee(Ym,oe),k=C&&(e||v),O=S.useRef(!1),I=S.useRef(!1),R=()=>{g.setState({userSelectionActive:!1,userSelectionRect:null}),b.current=0,m.current=0},$=E=>{if(O.current){O.current=!1;return}s==null||s(E),g.getState().resetSelectedElements(),g.setState({nodesSelectionActive:!1})},D=E=>{if(Array.isArray(o)&&(o!=null&&o.includes(2))){E.preventDefault();return}l==null||l(E)},T=c?E=>c(E):void 0,_=E=>{var F,Y,q,V;const{resetSelectedElements:P,domNode:z,edgeLookup:B}=g.getState();if(w.current=z==null?void 0:z.getBoundingClientRect(),!C||!e||E.button!==0||E.target!==y.current||!w.current)return;(Y=(F=E.target)==null?void 0:F.setPointerCapture)==null||Y.call(F,E.pointerId),I.current=!0,O.current=!1,x.current=new Map;for(const[L,K]of B)x.current.set(K.source,((q=x.current.get(K.source))==null?void 0:q.add(L))||new Set([L])),x.current.set(K.target,((V=x.current.get(K.target))==null?void 0:V.add(L))||new Set([L]));const{x:H,y:G}=Ie(E.nativeEvent,w.current);P(),g.setState({userSelectionRect:{width:0,height:0,startX:H,startY:G,x:H,y:G}}),i==null||i(E)},j=E=>{const{userSelectionRect:P,edgeLookup:z,transform:B,nodeLookup:H,triggerNodeChanges:G,triggerEdgeChanges:F}=g.getState();if(!w.current||!P)return;O.current=!0;const{x:Y,y:q}=Ie(E.nativeEvent,w.current),{startX:V,startY:L}=P,K={startX:V,startY:L,x:Y<V?Y:V,y:q<L?q:L,width:Math.abs(Y-V),height:Math.abs(q-L)},Z=fa(H,K,B,n===Ot.Partial,!0),W=new Set,X=new Set;for(const J of Z){X.add(J.id);const te=x.current.get(J.id);if(te)for(const ue of te)W.add(ue)}if(b.current!==X.size){b.current=X.size;const J=dt(H,X,!0);G(J)}if(m.current!==W.size){m.current=W.size;const J=dt(z,W);F(J)}g.setState({userSelectionRect:K,userSelectionActive:!0,nodesSelectionActive:!1})},N=E=>{var z,B;if(E.button!==0||!I.current)return;(B=(z=E.target)==null?void 0:z.releasePointerCapture)==null||B.call(z,E.pointerId);const{userSelectionRect:P}=g.getState();!v&&P&&E.target===y.current&&($==null||$(E)),b.current>0&&g.setState({nodesSelectionActive:!0}),R(),a==null||a(E),(t||r)&&(O.current=!1),I.current=!1},M=o===!0||Array.isArray(o)&&o.includes(0);return h.jsxs("div",{className:ie(["react-flow__pane",{draggable:M,dragging:A,selection:e}]),onClick:k?void 0:or($,y),onContextMenu:or(D,y),onWheel:or(T,y),onPointerEnter:k?void 0:d,onPointerDown:k?_:u,onPointerMove:k?j:u,onPointerUp:k?N:void 0,onPointerLeave:f,ref:y,style:$n,children:[p,h.jsx(Fm,{})]})}function rr({id:e,store:t,unselect:n=!1,nodeRef:o}){const{addSelectedNodes:r,unselectNodesAndEdges:i,multiSelectionActive:a,nodeLookup:s,onError:l}=t.getState(),c=s.get(e);if(!c){l==null||l("012",Oe.error012(e));return}t.setState({nodesSelectionActive:!1}),c.selected?(n||c.selected&&a)&&(i({nodes:[c],edges:[]}),requestAnimationFrame(()=>{var d;return(d=o==null?void 0:o.current)==null?void 0:d.blur()})):r([e])}function gs({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:o,nodeId:r,isSelectable:i,nodeClickDistance:a}){const s=ne(),[l,c]=S.useState(!1),d=S.useRef();return S.useEffect(()=>{d.current=Rp({getStoreItems:()=>s.getState(),onNodeMouseDown:u=>{rr({id:u,store:s,nodeRef:e})},onDragStart:()=>{c(!0)},onDragStop:()=>{c(!1)}})},[]),S.useEffect(()=>{var u,f;if(t)(u=d.current)==null||u.destroy();else if(e.current)return(f=d.current)==null||f.update({noDragClassName:n,handleSelector:o,domNode:e.current,isSelectable:i,nodeId:r,nodeClickDistance:a}),()=>{var p;(p=d.current)==null||p.destroy()}},[n,o,t,i,e,r]),l}const Xm=e=>t=>t.selected&&(t.draggable||e&&typeof t.draggable>"u");function ys(){const e=ne();return S.useCallback(t=>{const{nodeExtent:n,snapToGrid:o,snapGrid:r,nodesDraggable:i,onError:a,updateNodePositions:s,nodeLookup:l,nodeOrigin:c}=e.getState(),d=new Map,u=Xm(i),f=o?r[0]:5,p=o?r[1]:5,y=t.direction.x*f*t.factor,g=t.direction.y*p*t.factor;for(const[,b]of l){if(!u(b))continue;let m={x:b.internals.positionAbsolute.x+y,y:b.internals.positionAbsolute.y+g};o&&(m=On(m,r));const{position:w,positionAbsolute:x}=ha({nodeId:b.id,nextPosition:m,nodeLookup:l,nodeExtent:n,nodeOrigin:c,onError:a});b.position=w,b.internals.positionAbsolute=x,d.set(b.id,b)}s(d)},[])}const ir=S.createContext(null),Km=ir.Provider;ir.Consumer;const ar=()=>S.useContext(ir),Wm=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),Gm=(e,t,n)=>o=>{const{connectionClickStartHandle:r,connectionMode:i,connection:a}=o,{fromHandle:s,toHandle:l,isValid:c}=a,d=(l==null?void 0:l.nodeId)===e&&(l==null?void 0:l.id)===t&&(l==null?void 0:l.type)===n;return{connectingFrom:(s==null?void 0:s.nodeId)===e&&(s==null?void 0:s.id)===t&&(s==null?void 0:s.type)===n,connectingTo:d,clickConnecting:(r==null?void 0:r.nodeId)===e&&(r==null?void 0:r.id)===t&&(r==null?void 0:r.type)===n,isPossibleEndHandle:i===rt.Strict?(s==null?void 0:s.type)!==n:e!==(s==null?void 0:s.nodeId)||t!==(s==null?void 0:s.id),connectionInProcess:!!s,valid:d&&c}};function Um({type:e="source",position:t=U.Top,isValidConnection:n,isConnectable:o=!0,isConnectableStart:r=!0,isConnectableEnd:i=!0,id:a,onConnect:s,children:l,className:c,onMouseDown:d,onTouchStart:u,...f},p){var _,j;const y=a||null,g=e==="target",b=ne(),m=ar(),{connectOnClick:w,noPanClassName:x,rfId:v}=ee(Wm,oe),{connectingFrom:C,connectingTo:A,clickConnecting:k,isPossibleEndHandle:O,connectionInProcess:I,valid:R}=ee(Gm(m,y,e),oe);m||((j=(_=b.getState()).onError)==null||j.call(_,"010",Oe.error010()));const $=N=>{const{defaultEdgeOptions:M,onConnect:E,hasDefaultEdges:P}=b.getState(),z={...M,...N};if(P){const{edges:B,setEdges:H}=b.getState();H(Pa(z,B))}E==null||E(z),s==null||s(z)},D=N=>{if(!m)return;const M=_a(N.nativeEvent);if(r&&(M&&N.button===0||!M)){const E=b.getState();er.onPointerDown(N.nativeEvent,{autoPanOnConnect:E.autoPanOnConnect,connectionMode:E.connectionMode,connectionRadius:E.connectionRadius,domNode:E.domNode,nodeLookup:E.nodeLookup,lib:E.lib,isTarget:g,handleId:y,nodeId:m,flowId:E.rfId,panBy:E.panBy,cancelConnection:E.cancelConnection,onConnectStart:E.onConnectStart,onConnectEnd:E.onConnectEnd,updateConnection:E.updateConnection,onConnect:$,isValidConnection:n||E.isValidConnection,getTransform:()=>b.getState().transform,getFromHandle:()=>b.getState().connection.fromHandle,autoPanSpeed:E.autoPanSpeed})}M?d==null||d(N):u==null||u(N)},T=N=>{const{onClickConnectStart:M,onClickConnectEnd:E,connectionClickStartHandle:P,connectionMode:z,isValidConnection:B,lib:H,rfId:G,nodeLookup:F,connection:Y}=b.getState();if(!m||!P&&!r)return;if(!P){M==null||M(N.nativeEvent,{nodeId:m,handleId:y,handleType:e}),b.setState({connectionClickStartHandle:{nodeId:m,type:e,id:y}});return}const q=Sa(N.target),V=n||B,{connection:L,isValid:K}=er.isValid(N.nativeEvent,{handle:{nodeId:m,id:y,type:e},connectionMode:z,fromNodeId:P.nodeId,fromHandleId:P.id||null,fromType:P.type,isValidConnection:V,flowId:G,doc:q,lib:H,nodeLookup:F});K&&L&&$(L);const Z=structuredClone(Y);delete Z.inProgress,Z.toPosition=Z.toHandle?Z.toHandle.position:null,E==null||E(N,Z),b.setState({connectionClickStartHandle:null})};return h.jsx("div",{"data-handleid":y,"data-nodeid":m,"data-handlepos":t,"data-id":`${v}-${m}-${y}-${e}`,className:ie(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",x,c,{source:!g,target:g,connectable:o,connectablestart:r,connectableend:i,clickconnecting:k,connectingfrom:C,connectingto:A,valid:R,connectionindicator:o&&(!I||O)&&(I?i:r)}]),onMouseDown:D,onTouchStart:D,onClick:w?T:void 0,ref:p,...f,children:l})}yt=S.memo(fs(Um));function qm({data:e,isConnectable:t,sourcePosition:n=U.Bottom}){return h.jsxs(h.Fragment,{children:[e==null?void 0:e.label,h.jsx(yt,{type:"source",position:n,isConnectable:t})]})}function Qm({data:e,isConnectable:t,targetPosition:n=U.Top,sourcePosition:o=U.Bottom}){return h.jsxs(h.Fragment,{children:[h.jsx(yt,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,h.jsx(yt,{type:"source",position:o,isConnectable:t})]})}function Jm(){return null}function eg({data:e,isConnectable:t,targetPosition:n=U.Top}){return h.jsxs(h.Fragment,{children:[h.jsx(yt,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label]})}const Vn={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},xs={input:qm,default:Qm,output:eg,group:Jm};function tg(e){var t,n,o,r;return e.internals.handleBounds===void 0?{width:e.width??e.initialWidth??((t=e.style)==null?void 0:t.width),height:e.height??e.initialHeight??((n=e.style)==null?void 0:n.height)}:{width:e.width??((o=e.style)==null?void 0:o.width),height:e.height??((r=e.style)==null?void 0:r.height)}}const ng=e=>{const{width:t,height:n,x:o,y:r}=It(e.nodeLookup,{filter:i=>!!i.selected});return{width:be(t)?t:null,height:be(n)?n:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${o}px,${r}px)`}};function og({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const o=ne(),{width:r,height:i,transformString:a,userSelectionActive:s}=ee(ng,oe),l=ys(),c=S.useRef(null);if(S.useEffect(()=>{var f;n||((f=c.current)==null||f.focus({preventScroll:!0}))},[n]),gs({nodeRef:c}),s||!r||!i)return null;const d=e?f=>{const p=o.getState().nodes.filter(y=>y.selected);e(f,p)}:void 0,u=f=>{Object.prototype.hasOwnProperty.call(Vn,f.key)&&l({direction:Vn[f.key],factor:f.shiftKey?4:1})};return h.jsx("div",{className:ie(["react-flow__nodesselection","react-flow__container",t]),style:{transform:a},children:h.jsx("div",{ref:c,className:"react-flow__nodesselection-rect",onContextMenu:d,tabIndex:n?void 0:-1,onKeyDown:n?void 0:u,style:{width:r,height:i}})})}const vs=typeof window<"u"?window:void 0,rg=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function ws({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:o,onPaneMouseLeave:r,onPaneContextMenu:i,onPaneScroll:a,paneClickDistance:s,deleteKeyCode:l,selectionKeyCode:c,selectionOnDrag:d,selectionMode:u,onSelectionStart:f,onSelectionEnd:p,multiSelectionKeyCode:y,panActivationKeyCode:g,zoomActivationKeyCode:b,elementsSelectable:m,zoomOnScroll:w,zoomOnPinch:x,panOnScroll:v,panOnScrollSpeed:C,panOnScrollMode:A,zoomOnDoubleClick:k,panOnDrag:O,defaultViewport:I,translateExtent:R,minZoom:$,maxZoom:D,preventScrolling:T,onSelectionContextMenu:_,noWheelClassName:j,noPanClassName:N,disableKeyboardA11y:M,onViewportChange:E,isControlledViewport:P}){const{nodesSelectionActive:z,userSelectionActive:B}=ee(rg),H=Lt(c,{target:vs}),G=Lt(g,{target:vs}),F=G||O,Y=G||v,q=d&&F!==!0,V=H||B||q;return Lm({deleteKeyCode:l,multiSelectionKeyCode:y}),h.jsx(Bm,{onPaneContextMenu:i,elementsSelectable:m,zoomOnScroll:w,zoomOnPinch:x,panOnScroll:Y,panOnScrollSpeed:C,panOnScrollMode:A,zoomOnDoubleClick:k,panOnDrag:!H&&F,defaultViewport:I,translateExtent:R,minZoom:$,maxZoom:D,zoomActivationKeyCode:b,preventScrolling:T,noWheelClassName:j,noPanClassName:N,onViewportChange:E,isControlledViewport:P,paneClickDistance:s,children:h.jsxs(Zm,{onSelectionStart:f,onSelectionEnd:p,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:o,onPaneMouseLeave:r,onPaneContextMenu:i,onPaneScroll:a,panOnDrag:F,isSelecting:!!V,selectionMode:u,selectionKeyPressed:H,selectionOnDrag:q,children:[e,z&&h.jsx(og,{onSelectionContextMenu:_,noPanClassName:N,disableKeyboardA11y:M})]})})}ws.displayName="FlowRenderer";const ig=S.memo(ws),ag=e=>t=>e?fa(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map(n=>n.id):Array.from(t.nodeLookup.keys());function sg(e){return ee(S.useCallback(ag(e),[e]),oe)}const lg=e=>e.updateNodeInternals;function cg(){const e=ee(lg),[t]=S.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(n=>{const o=new Map;n.forEach(r=>{const i=r.target.getAttribute("data-id");o.set(i,{id:i,nodeElement:r.target,force:!0})}),e(o)}));return S.useEffect(()=>()=>{t==null||t.disconnect()},[t]),t}function dg({node:e,nodeType:t,hasDimensions:n,resizeObserver:o}){const r=ne(),i=S.useRef(null),a=S.useRef(null),s=S.useRef(e.sourcePosition),l=S.useRef(e.targetPosition),c=S.useRef(t),d=n&&!!e.internals.handleBounds;return S.useEffect(()=>{i.current&&!e.hidden&&(!d||a.current!==i.current)&&(a.current&&(o==null||o.unobserve(a.current)),o==null||o.observe(i.current),a.current=i.current)},[d,e.hidden]),S.useEffect(()=>()=>{a.current&&(o==null||o.unobserve(a.current),a.current=null)},[]),S.useEffect(()=>{if(i.current){const u=c.current!==t,f=s.current!==e.sourcePosition,p=l.current!==e.targetPosition;(u||f||p)&&(c.current=t,s.current=e.sourcePosition,l.current=e.targetPosition,r.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:i.current,force:!0}]])))}},[e.id,t,e.sourcePosition,e.targetPosition]),i}function ug({id:e,onClick:t,onMouseEnter:n,onMouseMove:o,onMouseLeave:r,onContextMenu:i,onDoubleClick:a,nodesDraggable:s,elementsSelectable:l,nodesConnectable:c,nodesFocusable:d,resizeObserver:u,noDragClassName:f,noPanClassName:p,disableKeyboardA11y:y,rfId:g,nodeTypes:b,nodeExtent:m,nodeClickDistance:w,onError:x}){const{node:v,internals:C,isParent:A}=ee(L=>{const K=L.nodeLookup.get(e),Z=L.parentLookup.has(e);return{node:K,internals:K.internals,isParent:Z}},oe);let k=v.type||"default",O=(b==null?void 0:b[k])||xs[k];O===void 0&&(x==null||x("003",Oe.error003(k)),k="default",O=xs.default);const I=!!(v.draggable||s&&typeof v.draggable>"u"),R=!!(v.selectable||l&&typeof v.selectable>"u"),$=!!(v.connectable||c&&typeof v.connectable>"u"),D=!!(v.focusable||d&&typeof v.focusable>"u"),T=ne(),_=wa(v),j=dg({node:v,nodeType:k,hasDimensions:_,resizeObserver:u}),N=gs({nodeRef:j,disabled:v.hidden||!I,noDragClassName:f,handleSelector:v.dragHandle,nodeId:e,isSelectable:R,nodeClickDistance:w}),M=ys();if(v.hidden)return null;const E=Ae(v),P=tg(v),z=R||I||t||n||o||r,B=n?L=>n(L,{...C.userNode}):void 0,H=o?L=>o(L,{...C.userNode}):void 0,G=r?L=>r(L,{...C.userNode}):void 0,F=i?L=>i(L,{...C.userNode}):void 0,Y=a?L=>a(L,{...C.userNode}):void 0,q=L=>{const{selectNodesOnDrag:K,nodeDragThreshold:Z}=T.getState();R&&(!K||!I||Z>0)&&rr({id:e,store:T,nodeRef:j}),t&&t(L,{...C.userNode})},V=L=>{if(!(Zo(L.nativeEvent)||y))if(aa.includes(L.key)&&R){const K=L.key==="Escape";rr({id:e,store:T,unselect:K,nodeRef:j})}else I&&v.selected&&Object.prototype.hasOwnProperty.call(Vn,L.key)&&(T.setState({ariaLiveMessage:`Moved selected node ${L.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~C.positionAbsolute.x}, y: ${~~C.positionAbsolute.y}`}),M({direction:Vn[L.key],factor:L.shiftKey?4:1}))};return h.jsx("div",{className:ie(["react-flow__node",`react-flow__node-${k}`,{[p]:I},v.className,{selected:v.selected,selectable:R,parent:A,draggable:I,dragging:N}]),ref:j,style:{zIndex:C.z,transform:`translate(${C.positionAbsolute.x}px,${C.positionAbsolute.y}px)`,pointerEvents:z?"all":"none",visibility:_?"visible":"hidden",...v.style,...P},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:B,onMouseMove:H,onMouseLeave:G,onContextMenu:F,onClick:q,onDoubleClick:Y,onKeyDown:D?V:void 0,tabIndex:D?0:void 0,role:D?"button":void 0,"aria-describedby":y?void 0:`${Ja}-${g}`,"aria-label":v.ariaLabel,children:h.jsx(Km,{value:e,children:h.jsx(O,{id:e,data:v.data,type:k,positionAbsoluteX:C.positionAbsolute.x,positionAbsoluteY:C.positionAbsolute.y,selected:v.selected,selectable:R,draggable:I,deletable:v.deletable??!0,isConnectable:$,sourcePosition:v.sourcePosition,targetPosition:v.targetPosition,dragging:N,dragHandle:v.dragHandle,zIndex:C.z,parentId:v.parentId,...E})})})}const fg=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function bs(e){const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:o,elementsSelectable:r,onError:i}=ee(fg,oe),a=sg(e.onlyRenderVisibleElements),s=cg();return h.jsx("div",{className:"react-flow__nodes",style:$n,children:a.map(l=>h.jsx(ug,{id:l,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:s,nodesDraggable:t,nodesConnectable:n,nodesFocusable:o,elementsSelectable:r,nodeClickDistance:e.nodeClickDistance,onError:i},l))})}bs.displayName="NodeRenderer";const hg=S.memo(bs);function pg(e){return ee(S.useCallback(t=>{if(!e)return t.edges.map(o=>o.id);const n=[];if(t.width&&t.height)for(const o of t.edges){const r=t.nodeLookup.get(o.source),i=t.nodeLookup.get(o.target);r&&i&&vp({sourceNode:r,targetNode:i,width:t.width,height:t.height,transform:t.transform})&&n.push(o.id)}return n},[e]),oe)}const mg=({color:e="none",strokeWidth:t=1})=>h.jsx("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),gg=({color:e="none",strokeWidth:t=1})=>h.jsx("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),Ss={[kn.Arrow]:mg,[kn.ArrowClosed]:gg};function yg(e){const t=ne();return S.useMemo(()=>{var n,o;return Object.prototype.hasOwnProperty.call(Ss,e)?Ss[e]:((o=(n=t.getState()).onError)==null||o.call(n,"009",Oe.error009(e)),null)},[e])}const xg=({id:e,type:t,color:n,width:o=12.5,height:r=12.5,markerUnits:i="strokeWidth",strokeWidth:a,orient:s="auto-start-reverse"})=>{const l=yg(t);return l?h.jsx("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${o}`,markerHeight:`${r}`,viewBox:"-10 -10 20 20",markerUnits:i,orient:s,refX:"0",refY:"0",children:h.jsx(l,{color:n,strokeWidth:a})}):null},_s=({defaultColor:e,rfId:t})=>{const n=ee(i=>i.edges),o=ee(i=>i.defaultEdgeOptions),r=S.useMemo(()=>Ep(n,{id:t,defaultColor:e,defaultMarkerStart:o==null?void 0:o.markerStart,defaultMarkerEnd:o==null?void 0:o.markerEnd}),[n,o,t,e]);return r.length?h.jsx("svg",{className:"react-flow__marker",children:h.jsx("defs",{children:r.map(i=>h.jsx(xg,{id:i.id,type:i.type,color:i.color,width:i.width,height:i.height,markerUnits:i.markerUnits,strokeWidth:i.strokeWidth,orient:i.orient},i.id))})}):null};_s.displayName="MarkerDefinitions";var vg=S.memo(_s);function Cs({x:e,y:t,label:n,labelStyle:o={},labelShowBg:r=!0,labelBgStyle:i={},labelBgPadding:a=[2,4],labelBgBorderRadius:s=2,children:l,className:c,...d}){const[u,f]=S.useState({x:1,y:0,width:0,height:0}),p=ie(["react-flow__edge-textwrapper",c]),y=S.useRef(null);return S.useEffect(()=>{if(y.current){const g=y.current.getBBox();f({x:g.x,y:g.y,width:g.width,height:g.height})}},[n]),typeof n>"u"||!n?null:h.jsxs("g",{transform:`translate(${e-u.width/2} ${t-u.height/2})`,className:p,visibility:u.width?"visible":"hidden",...d,children:[r&&h.jsx("rect",{width:u.width+2*a[0],x:-a[0],y:-a[1],height:u.height+2*a[1],className:"react-flow__edge-textbg",style:i,rx:s,ry:s}),h.jsx("text",{className:"react-flow__edge-text",y:u.height/2,dy:"0.3em",ref:y,style:o,children:n}),l]})}Cs.displayName="EdgeText";const wg=S.memo(Cs);function Bn({id:e,path:t,labelX:n,labelY:o,label:r,labelStyle:i,labelShowBg:a,labelBgStyle:s,labelBgPadding:l,labelBgBorderRadius:c,style:d,markerEnd:u,markerStart:f,className:p,interactionWidth:y=20}){return h.jsxs(h.Fragment,{children:[h.jsx("path",{id:e,style:d,d:t,fill:"none",className:ie(["react-flow__edge-path",p]),markerEnd:u,markerStart:f}),y&&h.jsx("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:y,className:"react-flow__edge-interaction"}),r&&be(n)&&be(o)?h.jsx(wg,{x:n,y:o,label:r,labelStyle:i,labelShowBg:a,labelBgStyle:s,labelBgPadding:l,labelBgBorderRadius:c}):null]})}function Ns({pos:e,x1:t,y1:n,x2:o,y2:r}){return e===U.Left||e===U.Right?[.5*(t+o),n]:[t,.5*(n+r)]}function Es({sourceX:e,sourceY:t,sourcePosition:n=U.Bottom,targetX:o,targetY:r,targetPosition:i=U.Top}){const[a,s]=Ns({pos:n,x1:e,y1:t,x2:o,y2:r}),[l,c]=Ns({pos:i,x1:o,y1:r,x2:e,y2:t}),[d,u,f,p]=Na({sourceX:e,sourceY:t,targetX:o,targetY:r,sourceControlX:a,sourceControlY:s,targetControlX:l,targetControlY:c});return[`M${e},${t} C${a},${s} ${l},${c} ${o},${r}`,d,u,f,p]}function ks(e){return S.memo(({id:t,sourceX:n,sourceY:o,targetX:r,targetY:i,sourcePosition:a=U.Bottom,targetPosition:s=U.Top,label:l,labelStyle:c,labelShowBg:d,labelBgStyle:u,labelBgPadding:f,labelBgBorderRadius:p,style:y,markerEnd:g,markerStart:b,interactionWidth:m})=>{const[w,x,v]=Es({sourceX:n,sourceY:o,sourcePosition:a,targetX:r,targetY:i,targetPosition:s}),C=e.isInternal?void 0:t;return h.jsx(Bn,{id:C,path:w,labelX:x,labelY:v,label:l,labelStyle:c,labelShowBg:d,labelBgStyle:u,labelBgPadding:f,labelBgBorderRadius:p,style:y,markerEnd:g,markerStart:b,interactionWidth:m})})}const bg=ks({isInternal:!1}),js=ks({isInternal:!0});bg.displayName="SimpleBezierEdge",js.displayName="SimpleBezierEdgeInternal";function Ps(e){return S.memo(({id:t,sourceX:n,sourceY:o,targetX:r,targetY:i,label:a,labelStyle:s,labelShowBg:l,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:u,style:f,sourcePosition:p=U.Bottom,targetPosition:y=U.Top,markerEnd:g,markerStart:b,pathOptions:m,interactionWidth:w})=>{const[x,v,C]=Xo({sourceX:n,sourceY:o,sourcePosition:p,targetX:r,targetY:i,targetPosition:y,borderRadius:m==null?void 0:m.borderRadius,offset:m==null?void 0:m.offset}),A=e.isInternal?void 0:t;return h.jsx(Bn,{id:A,path:x,labelX:v,labelY:C,label:a,labelStyle:s,labelShowBg:l,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:u,style:f,markerEnd:g,markerStart:b,interactionWidth:w})})}const Ms=Ps({isInternal:!1}),Os=Ps({isInternal:!0});Ms.displayName="SmoothStepEdge",Os.displayName="SmoothStepEdgeInternal";function As(e){return S.memo(({id:t,...n})=>{var r;const o=e.isInternal?void 0:t;return h.jsx(Ms,{...n,id:o,pathOptions:S.useMemo(()=>{var i;return{borderRadius:0,offset:(i=n.pathOptions)==null?void 0:i.offset}},[(r=n.pathOptions)==null?void 0:r.offset])})})}const Sg=As({isInternal:!1}),Is=As({isInternal:!0});Sg.displayName="StepEdge",Is.displayName="StepEdgeInternal";function Rs(e){return S.memo(({id:t,sourceX:n,sourceY:o,targetX:r,targetY:i,label:a,labelStyle:s,labelShowBg:l,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:u,style:f,markerEnd:p,markerStart:y,interactionWidth:g})=>{const[b,m,w]=Ma({sourceX:n,sourceY:o,targetX:r,targetY:i}),x=e.isInternal?void 0:t;return h.jsx(Bn,{id:x,path:b,labelX:m,labelY:w,label:a,labelStyle:s,labelShowBg:l,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:u,style:f,markerEnd:p,markerStart:y,interactionWidth:g})})}const _g=Rs({isInternal:!1}),zs=Rs({isInternal:!0});_g.displayName="StraightEdge",zs.displayName="StraightEdgeInternal";function Ds(e){return S.memo(({id:t,sourceX:n,sourceY:o,targetX:r,targetY:i,sourcePosition:a=U.Bottom,targetPosition:s=U.Top,label:l,labelStyle:c,labelShowBg:d,labelBgStyle:u,labelBgPadding:f,labelBgBorderRadius:p,style:y,markerEnd:g,markerStart:b,pathOptions:m,interactionWidth:w})=>{const[x,v,C]=ka({sourceX:n,sourceY:o,sourcePosition:a,targetX:r,targetY:i,targetPosition:s,curvature:m==null?void 0:m.curvature}),A=e.isInternal?void 0:t;return h.jsx(Bn,{id:A,path:x,labelX:v,labelY:C,label:l,labelStyle:c,labelShowBg:d,labelBgStyle:u,labelBgPadding:f,labelBgBorderRadius:p,style:y,markerEnd:g,markerStart:b,interactionWidth:w})})}const Cg=Ds({isInternal:!1}),Ts=Ds({isInternal:!0});Cg.displayName="BezierEdge",Ts.displayName="BezierEdgeInternal";const Ls={default:Ts,straight:zs,step:Is,smoothstep:Os,simplebezier:js},$s={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},Ng=(e,t,n)=>n===U.Left?e-t:n===U.Right?e+t:e,Eg=(e,t,n)=>n===U.Top?e-t:n===U.Bottom?e+t:e,Vs="react-flow__edgeupdater";function Bs({position:e,centerX:t,centerY:n,radius:o=10,onMouseDown:r,onMouseEnter:i,onMouseOut:a,type:s}){return h.jsx("circle",{onMouseDown:r,onMouseEnter:i,onMouseOut:a,className:ie([Vs,`${Vs}-${s}`]),cx:Ng(t,o,e),cy:Eg(n,o,e),r:o,stroke:"transparent",fill:"transparent"})}function kg({isReconnectable:e,reconnectRadius:t,edge:n,sourceX:o,sourceY:r,targetX:i,targetY:a,sourcePosition:s,targetPosition:l,onReconnect:c,onReconnectStart:d,onReconnectEnd:u,setReconnecting:f,setUpdateHover:p}){const y=ne(),g=(v,C)=>{if(v.button!==0)return;const{autoPanOnConnect:A,domNode:k,isValidConnection:O,connectionMode:I,connectionRadius:R,lib:$,onConnectStart:D,onConnectEnd:T,cancelConnection:_,nodeLookup:j,rfId:N,panBy:M,updateConnection:E}=y.getState(),P=C.type==="target";f(!0),d==null||d(v,n,C.type);const z=(H,G)=>{f(!1),u==null||u(H,n,C.type,G)},B=H=>c==null?void 0:c(n,H);er.onPointerDown(v.nativeEvent,{autoPanOnConnect:A,connectionMode:I,connectionRadius:R,domNode:k,handleId:C.id,nodeId:C.nodeId,nodeLookup:j,isTarget:P,edgeUpdaterType:C.type,lib:$,flowId:N,cancelConnection:_,panBy:M,isValidConnection:O,onConnect:B,onConnectStart:D,onConnectEnd:T,onReconnectEnd:z,updateConnection:E,getTransform:()=>y.getState().transform,getFromHandle:()=>y.getState().connection.fromHandle})},b=v=>g(v,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),m=v=>g(v,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),w=()=>p(!0),x=()=>p(!1);return h.jsxs(h.Fragment,{children:[(e===!0||e==="source")&&h.jsx(Bs,{position:s,centerX:o,centerY:r,radius:t,onMouseDown:b,onMouseEnter:w,onMouseOut:x,type:"source"}),(e===!0||e==="target")&&h.jsx(Bs,{position:l,centerX:i,centerY:a,radius:t,onMouseDown:m,onMouseEnter:w,onMouseOut:x,type:"target"})]})}function jg({id:e,edgesFocusable:t,edgesReconnectable:n,elementsSelectable:o,onClick:r,onDoubleClick:i,onContextMenu:a,onMouseEnter:s,onMouseMove:l,onMouseLeave:c,reconnectRadius:d,onReconnect:u,onReconnectStart:f,onReconnectEnd:p,rfId:y,edgeTypes:g,noPanClassName:b,onError:m,disableKeyboardA11y:w}){let x=ee(X=>X.edgeLookup.get(e));const v=ee(X=>X.defaultEdgeOptions);x=v?{...v,...x}:x;let C=x.type||"default",A=(g==null?void 0:g[C])||Ls[C];A===void 0&&(m==null||m("011",Oe.error011(C)),C="default",A=Ls.default);const k=!!(x.focusable||t&&typeof x.focusable>"u"),O=typeof u<"u"&&(x.reconnectable||n&&typeof x.reconnectable>"u"),I=!!(x.selectable||o&&typeof x.selectable>"u"),R=S.useRef(null),[$,D]=S.useState(!1),[T,_]=S.useState(!1),j=ne(),{zIndex:N,sourceX:M,sourceY:E,targetX:P,targetY:z,sourcePosition:B,targetPosition:H}=ee(S.useCallback(X=>{const J=X.nodeLookup.get(x.source),te=X.nodeLookup.get(x.target);if(!J||!te)return{zIndex:x.zIndex,...$s};const ue=Np({id:e,sourceNode:J,targetNode:te,sourceHandle:x.sourceHandle||null,targetHandle:x.targetHandle||null,connectionMode:X.connectionMode,onError:m});return{zIndex:xp({selected:x.selected,zIndex:x.zIndex,sourceNode:J,targetNode:te,elevateOnSelect:X.elevateEdgesOnSelect}),...ue||$s}},[x.source,x.target,x.sourceHandle,x.targetHandle,x.selected,x.zIndex]),oe),G=S.useMemo(()=>x.markerStart?`url('#${Ko(x.markerStart,y)}')`:void 0,[x.markerStart,y]),F=S.useMemo(()=>x.markerEnd?`url('#${Ko(x.markerEnd,y)}')`:void 0,[x.markerEnd,y]);if(x.hidden||M===null||E===null||P===null||z===null)return null;const Y=X=>{var Ee;const{addSelectedEdges:J,unselectNodesAndEdges:te,multiSelectionActive:ue}=j.getState();I&&(j.setState({nodesSelectionActive:!1}),x.selected&&ue?(te({nodes:[],edges:[x]}),(Ee=R.current)==null||Ee.blur()):J([e])),r&&r(X,x)},q=i?X=>{i(X,{...x})}:void 0,V=a?X=>{a(X,{...x})}:void 0,L=s?X=>{s(X,{...x})}:void 0,K=l?X=>{l(X,{...x})}:void 0,Z=c?X=>{c(X,{...x})}:void 0,W=X=>{var J;if(!w&&aa.includes(X.key)&&I){const{unselectNodesAndEdges:te,addSelectedEdges:ue}=j.getState();X.key==="Escape"?((J=R.current)==null||J.blur(),te({edges:[x]})):ue([e])}};return h.jsx("svg",{style:{zIndex:N},children:h.jsxs("g",{className:ie(["react-flow__edge",`react-flow__edge-${C}`,x.className,b,{selected:x.selected,animated:x.animated,inactive:!I&&!r,updating:$,selectable:I}]),onClick:Y,onDoubleClick:q,onContextMenu:V,onMouseEnter:L,onMouseMove:K,onMouseLeave:Z,onKeyDown:k?W:void 0,tabIndex:k?0:void 0,role:k?"button":"img","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":x.ariaLabel===null?void 0:x.ariaLabel||`Edge from ${x.source} to ${x.target}`,"aria-describedby":k?`${es}-${y}`:void 0,ref:R,children:[!T&&h.jsx(A,{id:e,source:x.source,target:x.target,type:x.type,selected:x.selected,animated:x.animated,selectable:I,deletable:x.deletable??!0,label:x.label,labelStyle:x.labelStyle,labelShowBg:x.labelShowBg,labelBgStyle:x.labelBgStyle,labelBgPadding:x.labelBgPadding,labelBgBorderRadius:x.labelBgBorderRadius,sourceX:M,sourceY:E,targetX:P,targetY:z,sourcePosition:B,targetPosition:H,data:x.data,style:x.style,sourceHandleId:x.sourceHandle,targetHandleId:x.targetHandle,markerStart:G,markerEnd:F,pathOptions:"pathOptions"in x?x.pathOptions:void 0,interactionWidth:x.interactionWidth}),O&&h.jsx(kg,{edge:x,isReconnectable:O,reconnectRadius:d,onReconnect:u,onReconnectStart:f,onReconnectEnd:p,sourceX:M,sourceY:E,targetX:P,targetY:z,sourcePosition:B,targetPosition:H,setUpdateHover:D,setReconnecting:_})]})})}const Pg=e=>({width:e.width,height:e.height,edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function Hs({defaultMarkerColor:e,onlyRenderVisibleElements:t,rfId:n,edgeTypes:o,noPanClassName:r,onReconnect:i,onEdgeContextMenu:a,onEdgeMouseEnter:s,onEdgeMouseMove:l,onEdgeMouseLeave:c,onEdgeClick:d,reconnectRadius:u,onEdgeDoubleClick:f,onReconnectStart:p,onReconnectEnd:y,disableKeyboardA11y:g}){const{edgesFocusable:b,edgesReconnectable:m,elementsSelectable:w,onError:x}=ee(Pg,oe),v=pg(t);return h.jsxs("div",{className:"react-flow__edges",children:[h.jsx(vg,{defaultColor:e,rfId:n}),v.map(C=>h.jsx(jg,{id:C,edgesFocusable:b,edgesReconnectable:m,elementsSelectable:w,noPanClassName:r,onReconnect:i,onContextMenu:a,onMouseEnter:s,onMouseMove:l,onMouseLeave:c,onClick:d,reconnectRadius:u,onDoubleClick:f,onReconnectStart:p,onReconnectEnd:y,rfId:n,onError:x,edgeTypes:o,disableKeyboardA11y:g},C))]})}Hs.displayName="EdgeRenderer";const Mg=S.memo(Hs),Og=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function Ag({children:e}){const t=ee(Og);return h.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:t},children:e})}function Ig(e){const t=tn(),n=S.useRef(!1);S.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const Rg=e=>{var t;return(t=e.panZoom)==null?void 0:t.syncViewport};function zg(e){const t=ee(Rg),n=ne();return S.useEffect(()=>{e&&(t==null||t(e),n.setState({transform:[e.x,e.y,e.zoom]}))},[e,t]),null}function Dg(e){return e.connection.inProgress?{...e.connection,to:zt(e.connection.to,e.transform)}:{...e.connection}}function Tg(e){return Dg}function Lg(e){const t=Tg();return ee(t,oe)}const $g=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function Vg({containerStyle:e,style:t,type:n,component:o}){const{nodesConnectable:r,width:i,height:a,isValid:s,inProgress:l}=ee($g,oe);return i&&r&&l?h.jsx("svg",{style:e,width:i,height:a,className:"react-flow__connectionline react-flow__container",children:h.jsx("g",{className:ie(["react-flow__connection",da(s)]),children:h.jsx(Fs,{style:t,type:n,CustomComponent:o,isValid:s})})}):null}const Fs=({style:e,type:t=Te.Bezier,CustomComponent:n,isValid:o})=>{const{inProgress:r,from:i,fromNode:a,fromHandle:s,fromPosition:l,to:c,toNode:d,toHandle:u,toPosition:f}=Lg();if(!r)return;if(n)return h.jsx(n,{connectionLineType:t,connectionLineStyle:e,fromNode:a,fromHandle:s,fromX:i.x,fromY:i.y,toX:c.x,toY:c.y,fromPosition:l,toPosition:f,connectionStatus:da(o),toNode:d,toHandle:u});let p="";const y={sourceX:i.x,sourceY:i.y,sourcePosition:l,targetX:c.x,targetY:c.y,targetPosition:f};switch(t){case Te.Bezier:[p]=ka(y);break;case Te.SimpleBezier:[p]=Es(y);break;case Te.Step:[p]=Xo({...y,borderRadius:0});break;case Te.SmoothStep:[p]=Xo(y);break;default:[p]=Ma(y)}return h.jsx("path",{d:p,fill:"none",className:"react-flow__connection-path",style:e})};Fs.displayName="ConnectionLine";const Bg={};function Ys(e=Bg){S.useRef(e),ne(),S.useEffect(()=>{},[e])}function Hg(){ne(),S.useRef(!1),S.useEffect(()=>{},[])}function Zs({nodeTypes:e,edgeTypes:t,onInit:n,onNodeClick:o,onEdgeClick:r,onNodeDoubleClick:i,onEdgeDoubleClick:a,onNodeMouseEnter:s,onNodeMouseMove:l,onNodeMouseLeave:c,onNodeContextMenu:d,onSelectionContextMenu:u,onSelectionStart:f,onSelectionEnd:p,connectionLineType:y,connectionLineStyle:g,connectionLineComponent:b,connectionLineContainerStyle:m,selectionKeyCode:w,selectionOnDrag:x,selectionMode:v,multiSelectionKeyCode:C,panActivationKeyCode:A,zoomActivationKeyCode:k,deleteKeyCode:O,onlyRenderVisibleElements:I,elementsSelectable:R,defaultViewport:$,translateExtent:D,minZoom:T,maxZoom:_,preventScrolling:j,defaultMarkerColor:N,zoomOnScroll:M,zoomOnPinch:E,panOnScroll:P,panOnScrollSpeed:z,panOnScrollMode:B,zoomOnDoubleClick:H,panOnDrag:G,onPaneClick:F,onPaneMouseEnter:Y,onPaneMouseMove:q,onPaneMouseLeave:V,onPaneScroll:L,onPaneContextMenu:K,paneClickDistance:Z,nodeClickDistance:W,onEdgeContextMenu:X,onEdgeMouseEnter:J,onEdgeMouseMove:te,onEdgeMouseLeave:ue,reconnectRadius:Ee,onReconnect:Ar,onReconnectStart:Ir,onReconnectEnd:Rr,noDragClassName:Yt,noWheelClassName:zr,noPanClassName:Zt,disableKeyboardA11y:Xt,nodeExtent:Dr,rfId:Kt,viewport:Wt,onViewportChange:eo}){return Ys(e),Ys(t),Hg(),Ig(n),zg(Wt),h.jsx(ig,{onPaneClick:F,onPaneMouseEnter:Y,onPaneMouseMove:q,onPaneMouseLeave:V,onPaneContextMenu:K,onPaneScroll:L,paneClickDistance:Z,deleteKeyCode:O,selectionKeyCode:w,selectionOnDrag:x,selectionMode:v,onSelectionStart:f,onSelectionEnd:p,multiSelectionKeyCode:C,panActivationKeyCode:A,zoomActivationKeyCode:k,elementsSelectable:R,zoomOnScroll:M,zoomOnPinch:E,zoomOnDoubleClick:H,panOnScroll:P,panOnScrollSpeed:z,panOnScrollMode:B,panOnDrag:G,defaultViewport:$,translateExtent:D,minZoom:T,maxZoom:_,onSelectionContextMenu:u,preventScrolling:j,noDragClassName:Yt,noWheelClassName:zr,noPanClassName:Zt,disableKeyboardA11y:Xt,onViewportChange:eo,isControlledViewport:!!Wt,children:h.jsxs(Ag,{children:[h.jsx(Mg,{edgeTypes:t,onEdgeClick:r,onEdgeDoubleClick:a,onReconnect:Ar,onReconnectStart:Ir,onReconnectEnd:Rr,onlyRenderVisibleElements:I,onEdgeContextMenu:X,onEdgeMouseEnter:J,onEdgeMouseMove:te,onEdgeMouseLeave:ue,reconnectRadius:Ee,defaultMarkerColor:N,noPanClassName:Zt,disableKeyboardA11y:Xt,rfId:Kt}),h.jsx(Vg,{style:g,type:y,component:b,containerStyle:m}),h.jsx("div",{className:"react-flow__edgelabel-renderer"}),h.jsx(hg,{nodeTypes:e,onNodeClick:o,onNodeDoubleClick:i,onNodeMouseEnter:s,onNodeMouseMove:l,onNodeMouseLeave:c,onNodeContextMenu:d,nodeClickDistance:W,onlyRenderVisibleElements:I,noPanClassName:Zt,noDragClassName:Yt,disableKeyboardA11y:Xt,nodeExtent:Dr,rfId:Kt}),h.jsx("div",{className:"react-flow__viewport-portal"})]})})}Zs.displayName="GraphView";const Fg=S.memo(Zs),Xs=({nodes:e,edges:t,defaultNodes:n,defaultEdges:o,width:r,height:i,fitView:a,nodeOrigin:s,nodeExtent:l}={})=>{const c=new Map,d=new Map,u=new Map,f=new Map,p=o??t??[],y=n??e??[],g=s??[0,0],b=l??Mt;Ta(u,f,p),Uo(y,c,d,{nodeOrigin:g,nodeExtent:b,elevateNodesOnSelect:!1});let m=[0,0,1];if(a&&r&&i){const w=It(c,{filter:A=>!!((A.width||A.initialWidth)&&(A.height||A.initialHeight))}),{x,y:v,zoom:C}=Yo(w,r,i,.5,2,.1);m=[x,v,C]}return{rfId:"1",width:0,height:0,transform:m,nodes:y,nodeLookup:c,parentLookup:d,edges:p,edgeLookup:f,connectionLookup:u,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:n!==void 0,hasDefaultEdges:o!==void 0,panZoom:null,minZoom:.5,maxZoom:2,translateExtent:Mt,nodeExtent:b,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:rt.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:g,nodeDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,fitViewOnInit:!1,fitViewDone:!1,fitViewOnInitOptions:void 0,selectNodesOnDrag:!0,multiSelectionActive:!1,connection:{...sa},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanSpeed:15,connectionRadius:20,onError:gp,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1}},Yg=({nodes:e,edges:t,defaultNodes:n,defaultEdges:o,width:r,height:i,fitView:a,nodeOrigin:s,nodeExtent:l})=>cm((c,d)=>({...Xs({nodes:e,edges:t,width:r,height:i,fitView:a,nodeOrigin:s,nodeExtent:l,defaultNodes:n,defaultEdges:o}),setNodes:u=>{const{nodeLookup:f,parentLookup:p,nodeOrigin:y,elevateNodesOnSelect:g}=d();Uo(u,f,p,{nodeOrigin:y,nodeExtent:l,elevateNodesOnSelect:g,checkEquality:!0}),c({nodes:u})},setEdges:u=>{const{connectionLookup:f,edgeLookup:p}=d();Ta(f,p,u),c({edges:u})},setDefaultNodesAndEdges:(u,f)=>{if(u){const{setNodes:p}=d();p(u),c({hasDefaultNodes:!0})}if(f){const{setEdges:p}=d();p(f),c({hasDefaultEdges:!0})}},updateNodeInternals:(u,f={triggerFitView:!0})=>{const{triggerNodeChanges:p,nodeLookup:y,parentLookup:g,fitViewOnInit:b,fitViewDone:m,fitViewOnInitOptions:w,domNode:x,nodeOrigin:v,nodeExtent:C,debug:A,fitViewSync:k}=d(),{changes:O,updatedInternals:I}=Op(u,y,g,x,v,C);if(I){if(jp(y,g,{nodeOrigin:v,nodeExtent:C}),f.triggerFitView){let R=m;!m&&b&&(R=k({...w,nodes:w==null?void 0:w.nodes})),c({fitViewDone:R})}else c({});(O==null?void 0:O.length)>0&&(A&&console.log("React Flow: trigger node changes",O),p==null||p(O))}},updateNodePositions:(u,f=!1)=>{const p=[],y=[];for(const[g,b]of u){const m={id:g,type:"position",position:b.position,dragging:f};b!=null&&b.expandParent&&(b!=null&&b.parentId)&&m.position&&(p.push({id:g,parentId:b.parentId,rect:{...b.internals.positionAbsolute,width:b.measured.width,height:b.measured.height}}),m.position.x=Math.max(0,m.position.x),m.position.y=Math.max(0,m.position.y)),y.push(m)}if(p.length>0){const{nodeLookup:g,parentLookup:b,nodeOrigin:m}=d(),w=Qo(p,g,b,m);y.push(...w)}d().triggerNodeChanges(y)},triggerNodeChanges:u=>{const{onNodesChange:f,setNodes:p,nodes:y,hasDefaultNodes:g,debug:b}=d();if(u!=null&&u.length){if(g){const m=Ye(u,y);p(m)}b&&console.log("React Flow: trigger node changes",u),f==null||f(u)}},triggerEdgeChanges:u=>{const{onEdgesChange:f,setEdges:p,edges:y,hasDefaultEdges:g,debug:b}=d();if(u!=null&&u.length){if(g){const m=$t(u,y);p(m)}b&&console.log("React Flow: trigger edge changes",u),f==null||f(u)}},addSelectedNodes:u=>{const{multiSelectionActive:f,edgeLookup:p,nodeLookup:y,triggerNodeChanges:g,triggerEdgeChanges:b}=d();if(f){const m=u.map(w=>Ue(w,!0));g(m);return}g(dt(y,new Set([...u]),!0)),b(dt(p))},addSelectedEdges:u=>{const{multiSelectionActive:f,edgeLookup:p,nodeLookup:y,triggerNodeChanges:g,triggerEdgeChanges:b}=d();if(f){const m=u.map(w=>Ue(w,!0));b(m);return}b(dt(p,new Set([...u]))),g(dt(y,new Set,!0))},unselectNodesAndEdges:({nodes:u,edges:f}={})=>{const{edges:p,nodes:y,nodeLookup:g,triggerNodeChanges:b,triggerEdgeChanges:m}=d(),w=u||y,x=f||p,v=w.map(A=>{const k=g.get(A.id);return k&&(k.selected=!1),Ue(A.id,!1)}),C=x.map(A=>Ue(A.id,!1));b(v),m(C)},setMinZoom:u=>{const{panZoom:f,maxZoom:p}=d();f==null||f.setScaleExtent([u,p]),c({minZoom:u})},setMaxZoom:u=>{const{panZoom:f,minZoom:p}=d();f==null||f.setScaleExtent([p,u]),c({maxZoom:u})},setTranslateExtent:u=>{var f;(f=d().panZoom)==null||f.setTranslateExtent(u),c({translateExtent:u})},setPaneClickDistance:u=>{var f;(f=d().panZoom)==null||f.setClickDistance(u)},resetSelectedElements:()=>{const{edges:u,nodes:f,triggerNodeChanges:p,triggerEdgeChanges:y}=d(),g=f.reduce((m,w)=>w.selected?[...m,Ue(w.id,!1)]:m,[]),b=u.reduce((m,w)=>w.selected?[...m,Ue(w.id,!1)]:m,[]);p(g),y(b)},setNodeExtent:u=>{const{nodes:f,nodeLookup:p,parentLookup:y,nodeOrigin:g,elevateNodesOnSelect:b,nodeExtent:m}=d();u[0][0]===m[0][0]&&u[0][1]===m[0][1]&&u[1][0]===m[1][0]&&u[1][1]===m[1][1]||(Uo(f,p,y,{nodeOrigin:g,nodeExtent:u,elevateNodesOnSelect:b,checkEquality:!1}),c({nodeExtent:u}))},panBy:u=>{const{transform:f,width:p,height:y,panZoom:g,translateExtent:b}=d();return Ap({delta:u,panZoom:g,transform:f,translateExtent:b,width:p,height:y})},fitView:u=>{const{panZoom:f,width:p,height:y,minZoom:g,maxZoom:b,nodeLookup:m}=d();if(!f)return Promise.resolve(!1);const w=Bo(m,u);return Ho({nodes:w,width:p,height:y,panZoom:f,minZoom:g,maxZoom:b},u)},fitViewSync:u=>{const{panZoom:f,width:p,height:y,minZoom:g,maxZoom:b,nodeLookup:m}=d();if(!f)return!1;const w=Bo(m,u);return Ho({nodes:w,width:p,height:y,panZoom:f,minZoom:g,maxZoom:b},u),w.size>0},cancelConnection:()=>{c({connection:{...sa}})},updateConnection:u=>{c({connection:u})},reset:()=>c({...Xs()})}),Object.is);function Zg({initialNodes:e,initialEdges:t,defaultNodes:n,defaultEdges:o,initialWidth:r,initialHeight:i,fitView:a,nodeOrigin:s,nodeExtent:l,children:c}){const[d]=S.useState(()=>Yg({nodes:e,edges:t,defaultNodes:n,defaultEdges:o,width:r,height:i,fitView:a,nodeOrigin:s,nodeExtent:l}));return h.jsx(dm,{value:d,children:h.jsx(Im,{children:c})})}function Xg({children:e,nodes:t,edges:n,defaultNodes:o,defaultEdges:r,width:i,height:a,fitView:s,nodeOrigin:l,nodeExtent:c}){return S.useContext(Tn)?h.jsx(h.Fragment,{children:e}):h.jsx(Zg,{initialNodes:t,initialEdges:n,defaultNodes:o,defaultEdges:r,initialWidth:i,initialHeight:a,fitView:s,nodeOrigin:l,nodeExtent:c,children:e})}const Kg={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function Wg({nodes:e,edges:t,defaultNodes:n,defaultEdges:o,className:r,nodeTypes:i,edgeTypes:a,onNodeClick:s,onEdgeClick:l,onInit:c,onMove:d,onMoveStart:u,onMoveEnd:f,onConnect:p,onConnectStart:y,onConnectEnd:g,onClickConnectStart:b,onClickConnectEnd:m,onNodeMouseEnter:w,onNodeMouseMove:x,onNodeMouseLeave:v,onNodeContextMenu:C,onNodeDoubleClick:A,onNodeDragStart:k,onNodeDrag:O,onNodeDragStop:I,onNodesDelete:R,onEdgesDelete:$,onDelete:D,onSelectionChange:T,onSelectionDragStart:_,onSelectionDrag:j,onSelectionDragStop:N,onSelectionContextMenu:M,onSelectionStart:E,onSelectionEnd:P,onBeforeDelete:z,connectionMode:B,connectionLineType:H=Te.Bezier,connectionLineStyle:G,connectionLineComponent:F,connectionLineContainerStyle:Y,deleteKeyCode:q="Backspace",selectionKeyCode:V="Shift",selectionOnDrag:L=!1,selectionMode:K=Ot.Full,panActivationKeyCode:Z="Space",multiSelectionKeyCode:W=An()?"Meta":"Control",zoomActivationKeyCode:X=An()?"Meta":"Control",snapToGrid:J,snapGrid:te,onlyRenderVisibleElements:ue=!1,selectNodesOnDrag:Ee,nodesDraggable:Ar,nodesConnectable:Ir,nodesFocusable:Rr,nodeOrigin:Yt=ts,edgesFocusable:zr,edgesReconnectable:Zt,elementsSelectable:Xt=!0,defaultViewport:Dr=_m,minZoom:Kt=.5,maxZoom:Wt=2,translateExtent:eo=Mt,preventScrolling:$y=!0,nodeExtent:Tr,defaultMarkerColor:Vy="#b1b1b7",zoomOnScroll:By=!0,zoomOnPinch:Hy=!0,panOnScroll:Fy=!1,panOnScrollSpeed:Yy=.5,panOnScrollMode:Zy=Ze.Free,zoomOnDoubleClick:Xy=!0,panOnDrag:Ky=!0,onPaneClick:Wy,onPaneMouseEnter:Gy,onPaneMouseMove:Uy,onPaneMouseLeave:qy,onPaneScroll:Qy,onPaneContextMenu:Jy,paneClickDistance:Lc=0,nodeClickDistance:ex=0,children:tx,onReconnect:nx,onReconnectStart:ox,onReconnectEnd:rx,onEdgeContextMenu:ix,onEdgeDoubleClick:ax,onEdgeMouseEnter:sx,onEdgeMouseMove:lx,onEdgeMouseLeave:cx,reconnectRadius:dx=10,onNodesChange:ux,onEdgesChange:fx,noDragClassName:hx="nodrag",noWheelClassName:px="nowheel",noPanClassName:$c="nopan",fitView:Vc,fitViewOptions:mx,connectOnClick:gx,attributionPosition:yx,proOptions:xx,defaultEdgeOptions:vx,elevateNodesOnSelect:wx,elevateEdgesOnSelect:bx,disableKeyboardA11y:Bc=!1,autoPanOnConnect:Sx,autoPanOnNodeDrag:_x,autoPanSpeed:Cx,connectionRadius:Nx,isValidConnection:Ex,onError:kx,style:jx,id:Hc,nodeDragThreshold:Px,viewport:Mx,onViewportChange:Ox,width:Ax,height:Ix,colorMode:Rx="light",debug:zx,...Dx},Tx){const Lr=Hc||"1",Lx=km(Rx);return h.jsx("div",{...Dx,style:{...jx,...Kg},ref:Tx,className:ie(["react-flow",r,Lx]),"data-testid":"rf__wrapper",id:Hc,children:h.jsxs(Xg,{nodes:e,edges:t,width:Ax,height:Ix,fitView:Vc,nodeOrigin:Yt,nodeExtent:Tr,children:[h.jsx(Fg,{onInit:c,onNodeClick:s,onEdgeClick:l,onNodeMouseEnter:w,onNodeMouseMove:x,onNodeMouseLeave:v,onNodeContextMenu:C,onNodeDoubleClick:A,nodeTypes:i,edgeTypes:a,connectionLineType:H,connectionLineStyle:G,connectionLineComponent:F,connectionLineContainerStyle:Y,selectionKeyCode:V,selectionOnDrag:L,selectionMode:K,deleteKeyCode:q,multiSelectionKeyCode:W,panActivationKeyCode:Z,zoomActivationKeyCode:X,onlyRenderVisibleElements:ue,defaultViewport:Dr,translateExtent:eo,minZoom:Kt,maxZoom:Wt,preventScrolling:$y,zoomOnScroll:By,zoomOnPinch:Hy,zoomOnDoubleClick:Xy,panOnScroll:Fy,panOnScrollSpeed:Yy,panOnScrollMode:Zy,panOnDrag:Ky,onPaneClick:Wy,onPaneMouseEnter:Gy,onPaneMouseMove:Uy,onPaneMouseLeave:qy,onPaneScroll:Qy,onPaneContextMenu:Jy,paneClickDistance:Lc,nodeClickDistance:ex,onSelectionContextMenu:M,onSelectionStart:E,onSelectionEnd:P,onReconnect:nx,onReconnectStart:ox,onReconnectEnd:rx,onEdgeContextMenu:ix,onEdgeDoubleClick:ax,onEdgeMouseEnter:sx,onEdgeMouseMove:lx,onEdgeMouseLeave:cx,reconnectRadius:dx,defaultMarkerColor:Vy,noDragClassName:hx,noWheelClassName:px,noPanClassName:$c,rfId:Lr,disableKeyboardA11y:Bc,nodeExtent:Tr,viewport:Mx,onViewportChange:Ox}),h.jsx(Em,{nodes:e,edges:t,defaultNodes:n,defaultEdges:o,onConnect:p,onConnectStart:y,onConnectEnd:g,onClickConnectStart:b,onClickConnectEnd:m,nodesDraggable:Ar,nodesConnectable:Ir,nodesFocusable:Rr,edgesFocusable:zr,edgesReconnectable:Zt,elementsSelectable:Xt,elevateNodesOnSelect:wx,elevateEdgesOnSelect:bx,minZoom:Kt,maxZoom:Wt,nodeExtent:Tr,onNodesChange:ux,onEdgesChange:fx,snapToGrid:J,snapGrid:te,connectionMode:B,translateExtent:eo,connectOnClick:gx,defaultEdgeOptions:vx,fitView:Vc,fitViewOptions:mx,onNodesDelete:R,onEdgesDelete:$,onDelete:D,onNodeDragStart:k,onNodeDrag:O,onNodeDragStop:I,onSelectionDrag:j,onSelectionDragStart:_,onSelectionDragStop:N,onMove:d,onMoveStart:u,onMoveEnd:f,noPanClassName:$c,nodeOrigin:Yt,rfId:Lr,autoPanOnConnect:Sx,autoPanOnNodeDrag:_x,autoPanSpeed:Cx,onError:kx,connectionRadius:Nx,isValidConnection:Ex,selectNodesOnDrag:Ee,nodeDragThreshold:Px,onBeforeDelete:z,paneClickDistance:Lc,debug:zx}),h.jsx(Sm,{onSelectionChange:T}),tx,h.jsx(ym,{proOptions:xx,position:yx}),h.jsx(mm,{rfId:Lr,disableKeyboardA11y:Bc})]})})}yd=fs(Wg);const Gg=e=>{var t;return(t=e.domNode)==null?void 0:t.querySelector(".react-flow__viewport-portal")};md=function({children:e}){const t=ee(Gg);return t?$r.createPortal(e,t):null};const Ug=e=>e.nodes;hd=function(){return ee(Ug,oe)},dd=function({type:e,id:t=null,nodeId:n,onConnect:o,onDisconnect:r}){const i=ar(),a=n??i,s=S.useRef(null),l=ee(c=>c.connectionLookup.get(`${a}-${e}-${t}`),up);return S.useEffect(()=>{if(s.current&&s.current!==l){const c=l??new Map;ca(s.current,c,r),ca(c,s.current,o)}s.current=l??new Map},[l,o,r]),S.useMemo(()=>Array.from((l==null?void 0:l.values())??[]),[l])},Nd=function(e){return ee(S.useCallback(t=>t.nodeLookup.get(e),[e]),oe)};function qg({dimensions:e,lineWidth:t,variant:n,className:o}){return h.jsx("path",{strokeWidth:t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:ie(["react-flow__background-pattern",n,o])})}function Qg({radius:e,className:t}){return h.jsx("circle",{cx:e,cy:e,r:e,className:ie(["react-flow__background-pattern","dots",t])})}(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(ze||(ze={}));const Jg={[ze.Dots]:1,[ze.Lines]:1,[ze.Cross]:6},e0=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function Ks({id:e,variant:t=ze.Dots,gap:n=20,size:o,lineWidth:r=1,offset:i=0,color:a,bgColor:s,style:l,className:c,patternClassName:d}){const u=S.useRef(null),{transform:f,patternId:p}=ee(e0,oe),y=o||Jg[t],g=t===ze.Dots,b=t===ze.Cross,m=Array.isArray(n)?n:[n,n],w=[m[0]*f[2]||1,m[1]*f[2]||1],x=y*f[2],v=Array.isArray(i)?i:[i,i],C=b?[x,x]:w,A=[v[0]*f[2]||1+C[0]/2,v[1]*f[2]||1+C[1]/2],k=`${p}${e||""}`;return h.jsxs("svg",{className:ie(["react-flow__background",c]),style:{...l,...$n,"--xy-background-color-props":s,"--xy-background-pattern-color-props":a},ref:u,"data-testid":"rf__background",children:[h.jsx("pattern",{id:k,x:f[0]%w[0],y:f[1]%w[1],width:w[0],height:w[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${A[0]},-${A[1]})`,children:g?h.jsx(Qg,{radius:x/2,className:d}):h.jsx(qg,{dimensions:C,lineWidth:r,variant:t,className:d})}),h.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${k})`})]})}Ks.displayName="Background",xd=S.memo(Ks);function t0(){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:h.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function n0(){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:h.jsx("path",{d:"M0 0h32v4.2H0z"})})}function o0(){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:h.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function r0(){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:h.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function i0(){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:h.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function Hn({children:e,className:t,...n}){return h.jsx("button",{type:"button",className:ie(["react-flow__controls-button",t]),...n,children:e})}const a0=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom});function Ws({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:o=!0,fitViewOptions:r,onZoomIn:i,onZoomOut:a,onFitView:s,onInteractiveChange:l,className:c,children:d,position:u="bottom-left",orientation:f="vertical","aria-label":p="React Flow controls"}){const y=ne(),{isInteractive:g,minZoomReached:b,maxZoomReached:m}=ee(a0,oe),{zoomIn:w,zoomOut:x,fitView:v}=tn(),C=()=>{w(),i==null||i()},A=()=>{x(),a==null||a()},k=()=>{v(r),s==null||s()},O=()=>{y.setState({nodesDraggable:!g,nodesConnectable:!g,elementsSelectable:!g}),l==null||l(!g)},I=f==="horizontal"?"horizontal":"vertical";return h.jsxs(rn,{className:ie(["react-flow__controls",I,c]),position:u,style:e,"data-testid":"rf__controls","aria-label":p,children:[t&&h.jsxs(h.Fragment,{children:[h.jsx(Hn,{onClick:C,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:m,children:h.jsx(t0,{})}),h.jsx(Hn,{onClick:A,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:b,children:h.jsx(n0,{})})]}),n&&h.jsx(Hn,{className:"react-flow__controls-fitview",onClick:k,title:"fit view","aria-label":"fit view",children:h.jsx(o0,{})}),o&&h.jsx(Hn,{className:"react-flow__controls-interactive",onClick:O,title:"toggle interactivity","aria-label":"toggle interactivity",children:g?h.jsx(i0,{}):h.jsx(r0,{})}),d]})}Ws.displayName="Controls",vd=S.memo(Ws);function s0({id:e,x:t,y:n,width:o,height:r,style:i,color:a,strokeColor:s,strokeWidth:l,className:c,borderRadius:d,shapeRendering:u,selected:f,onClick:p}){const{background:y,backgroundColor:g}=i||{},b=a||y||g;return h.jsx("rect",{className:ie(["react-flow__minimap-node",{selected:f},c]),x:t,y:n,rx:d,ry:d,width:o,height:r,style:{fill:b,stroke:s,strokeWidth:l},shapeRendering:u,onClick:p?m=>p(m,e):void 0})}const l0=S.memo(s0),c0=e=>e.nodes.map(t=>t.id),sr=e=>e instanceof Function?e:()=>e;function d0({nodeStrokeColor:e,nodeColor:t,nodeClassName:n="",nodeBorderRadius:o=5,nodeStrokeWidth:r,nodeComponent:i=l0,onClick:a}){const s=ee(c0,oe),l=sr(t),c=sr(e),d=sr(n),u=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return h.jsx(h.Fragment,{children:s.map(f=>h.jsx(f0,{id:f,nodeColorFunc:l,nodeStrokeColorFunc:c,nodeClassNameFunc:d,nodeBorderRadius:o,nodeStrokeWidth:r,NodeComponent:i,onClick:a,shapeRendering:u},f))})}function u0({id:e,nodeColorFunc:t,nodeStrokeColorFunc:n,nodeClassNameFunc:o,nodeBorderRadius:r,nodeStrokeWidth:i,shapeRendering:a,NodeComponent:s,onClick:l}){const{node:c,x:d,y:u,width:f,height:p}=ee(y=>{const g=y.nodeLookup.get(e),{x:b,y:m}=g.internals.positionAbsolute,{width:w,height:x}=Ae(g);return{node:g,x:b,y:m,width:w,height:x}},oe);return!c||c.hidden||!wa(c)?null:h.jsx(s,{x:d,y:u,width:f,height:p,style:c.style,selected:!!c.selected,className:o(c),color:t(c),borderRadius:r,strokeColor:n(c),strokeWidth:i,shapeRendering:a,onClick:l,id:c.id})}const f0=S.memo(u0);var h0=S.memo(d0);const p0=200,m0=150,g0=e=>{const t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:t,boundingRect:e.nodeLookup.size>0?ya(It(e.nodeLookup),t):t,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height}},y0="react-flow__minimap-desc";function Gs({style:e,className:t,nodeStrokeColor:n,nodeColor:o,nodeClassName:r="",nodeBorderRadius:i=5,nodeStrokeWidth:a,nodeComponent:s,bgColor:l,maskColor:c,maskStrokeColor:d,maskStrokeWidth:u,position:f="bottom-right",onClick:p,onNodeClick:y,pannable:g=!1,zoomable:b=!1,ariaLabel:m="React Flow mini map",inversePan:w,zoomStep:x=10,offsetScale:v=5}){const C=ne(),A=S.useRef(null),{boundingRect:k,viewBB:O,rfId:I,panZoom:R,translateExtent:$,flowWidth:D,flowHeight:T}=ee(g0,oe),_=(e==null?void 0:e.width)??p0,j=(e==null?void 0:e.height)??m0,N=k.width/_,M=k.height/j,E=Math.max(N,M),P=E*_,z=E*j,B=v*E,H=k.x-(P-k.width)/2-B,G=k.y-(z-k.height)/2-B,F=P+B*2,Y=z+B*2,q=`${y0}-${I}`,V=S.useRef(0),L=S.useRef();V.current=E,S.useEffect(()=>{if(A.current&&R)return L.current=Vp({domNode:A.current,panZoom:R,getTransform:()=>C.getState().transform,getViewScale:()=>V.current}),()=>{var W;(W=L.current)==null||W.destroy()}},[R]),S.useEffect(()=>{var W;(W=L.current)==null||W.update({translateExtent:$,width:D,height:T,inversePan:w,pannable:g,zoomStep:x,zoomable:b})},[g,b,w,x,$,D,T]);const K=p?W=>{var te;const[X,J]=((te=L.current)==null?void 0:te.pointer(W))||[0,0];p(W,{x:X,y:J})}:void 0,Z=y?S.useCallback((W,X)=>{const J=C.getState().nodeLookup.get(X);y(W,J)},[]):void 0;return h.jsx(rn,{position:f,style:{...e,"--xy-minimap-background-color-props":typeof l=="string"?l:void 0,"--xy-minimap-mask-background-color-props":typeof c=="string"?c:void 0,"--xy-minimap-mask-stroke-color-props":typeof d=="string"?d:void 0,"--xy-minimap-mask-stroke-width-props":typeof u=="number"?u*E:void 0,"--xy-minimap-node-background-color-props":typeof o=="string"?o:void 0,"--xy-minimap-node-stroke-color-props":typeof n=="string"?n:void 0,"--xy-minimap-node-stroke-width-props":typeof a=="string"?a:void 0},className:ie(["react-flow__minimap",t]),"data-testid":"rf__minimap",children:h.jsxs("svg",{width:_,height:j,viewBox:`${H} ${G} ${F} ${Y}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":q,ref:A,onClick:K,children:[m&&h.jsx("title",{id:q,children:m}),h.jsx(h0,{onClick:Z,nodeColor:o,nodeStrokeColor:n,nodeBorderRadius:i,nodeClassName:r,nodeStrokeWidth:a,nodeComponent:s}),h.jsx("path",{className:"react-flow__minimap-mask",d:`M${H-B},${G-B}h${F+B*2}v${Y+B*2}h${-F-B*2}z
        M${O.x},${O.y}h${O.width}v${O.height}h${-O.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}Gs.displayName="MiniMap",wd=S.memo(Gs);function x0({nodeId:e,position:t,variant:n=ct.Handle,className:o,style:r={},children:i,color:a,minWidth:s=10,minHeight:l=10,maxWidth:c=Number.MAX_VALUE,maxHeight:d=Number.MAX_VALUE,keepAspectRatio:u=!1,shouldResize:f,onResizeStart:p,onResize:y,onResizeEnd:g}){const b=ar(),m=typeof e=="string"?e:b,w=ne(),x=S.useRef(null),v=n===ct.Line?"right":"bottom-right",C=t??v,A=S.useRef(null);S.useEffect(()=>{if(!(!x.current||!m))return A.current||(A.current=om({domNode:x.current,nodeId:m,getStoreItems:()=>{const{nodeLookup:R,transform:$,snapGrid:D,snapToGrid:T,nodeOrigin:_,domNode:j}=w.getState();return{nodeLookup:R,transform:$,snapGrid:D,snapToGrid:T,nodeOrigin:_,paneDomNode:j}},onChange:(R,$)=>{const{triggerNodeChanges:D,nodeLookup:T,parentLookup:_,nodeOrigin:j}=w.getState(),N=[],M={x:R.x,y:R.y},E=T.get(m);if(E&&E.expandParent&&E.parentId){const P=E.origin??j,z=R.width??E.measured.width,B=R.height??E.measured.height,H={id:E.id,parentId:E.parentId,rect:{width:z,height:B,...ba({x:R.x??E.position.x,y:R.y??E.position.y},{width:z,height:B},E.parentId,T,P)}},G=Qo([H],T,_,j);N.push(...G),M.x=R.x?Math.max(P[0]*z,R.x):void 0,M.y=R.y?Math.max(P[1]*B,R.y):void 0}if(M.x!==void 0&&M.y!==void 0){const P={id:m,type:"position",position:{...M}};N.push(P)}if(R.width!==void 0&&R.height!==void 0){const P={id:m,type:"dimensions",resizing:!0,setAttributes:!0,dimensions:{width:R.width,height:R.height}};N.push(P)}for(const P of $){const z={...P,type:"position"};N.push(z)}D(N)},onEnd:()=>{const R={id:m,type:"dimensions",resizing:!1};w.getState().triggerNodeChanges([R])}})),A.current.update({controlPosition:C,boundaries:{minWidth:s,minHeight:l,maxWidth:c,maxHeight:d},keepAspectRatio:u,onResizeStart:p,onResize:y,onResizeEnd:g,shouldResize:f}),()=>{var R;(R=A.current)==null||R.destroy()}},[C,s,l,c,d,u,p,y,g,f]);const k=C.split("-"),O=n===ct.Line?"borderColor":"backgroundColor",I=a?{...r,[O]:a}:r;return h.jsx("div",{className:ie(["react-flow__resize-control","nodrag",...k,n,o]),ref:x,style:I,children:i})}const Us=S.memo(x0);pd=function({nodeId:e,isVisible:t=!0,handleClassName:n,handleStyle:o,lineClassName:r,lineStyle:i,color:a,minWidth:s=10,minHeight:l=10,maxWidth:c=Number.MAX_VALUE,maxHeight:d=Number.MAX_VALUE,keepAspectRatio:u=!1,shouldResize:f,onResizeStart:p,onResize:y,onResizeEnd:g}){return t?h.jsxs(h.Fragment,{children:[Up.map(b=>h.jsx(Us,{className:r,style:i,nodeId:e,position:b,variant:ct.Line,color:a,minWidth:s,minHeight:l,maxWidth:c,maxHeight:d,onResizeStart:p,keepAspectRatio:u,shouldResize:f,onResize:y,onResizeEnd:g},b)),Gp.map(b=>h.jsx(Us,{className:n,style:o,nodeId:e,position:b,color:a,minWidth:s,minHeight:l,maxWidth:c,maxHeight:d,onResizeStart:p,keepAspectRatio:u,shouldResize:f,onResize:y,onResizeEnd:g},b))]}):null};var lr,qs;function v0(){if(qs)return lr;qs=1;var e=function(m){return t(m)&&!n(m)};function t(m){return!!m&&typeof m=="object"}function n(m){var w=Object.prototype.toString.call(m);return w==="[object RegExp]"||w==="[object Date]"||i(m)}var o=typeof Symbol=="function"&&Symbol.for,r=o?Symbol.for("react.element"):60103;function i(m){return m.$$typeof===r}function a(m){return Array.isArray(m)?[]:{}}function s(m,w){return w.clone!==!1&&w.isMergeableObject(m)?g(a(m),m,w):m}function l(m,w,x){return m.concat(w).map(function(v){return s(v,x)})}function c(m,w){if(!w.customMerge)return g;var x=w.customMerge(m);return typeof x=="function"?x:g}function d(m){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(m).filter(function(w){return Object.propertyIsEnumerable.call(m,w)}):[]}function u(m){return Object.keys(m).concat(d(m))}function f(m,w){try{return w in m}catch{return!1}}function p(m,w){return f(m,w)&&!(Object.hasOwnProperty.call(m,w)&&Object.propertyIsEnumerable.call(m,w))}function y(m,w,x){var v={};return x.isMergeableObject(m)&&u(m).forEach(function(C){v[C]=s(m[C],x)}),u(w).forEach(function(C){p(m,C)||(f(m,C)&&x.isMergeableObject(w[C])?v[C]=c(C,x)(m[C],w[C],x):v[C]=s(w[C],x))}),v}function g(m,w,x){x=x||{},x.arrayMerge=x.arrayMerge||l,x.isMergeableObject=x.isMergeableObject||e,x.cloneUnlessOtherwiseSpecified=s;var v=Array.isArray(w),C=Array.isArray(m),A=v===C;return A?v?x.arrayMerge(m,w,x):y(m,w,x):s(w,x)}g.all=function(m,w){if(!Array.isArray(m))throw new Error("first argument should be an array");return m.reduce(function(x,v){return g(x,v,w)},{})};var b=g;return lr=b,lr}var w0=v0();let cr,Qs,dr,Fn,Yn,Js,ur,fr,el,tl,nl,ol,rl,il;an=to(w0),cr=(e,t)=>({id:e.id,type:e.node_type,position:{x:e.x||0,y:e.y||0},width:e.width||void 0,height:e.height||void 0,data:{loading:!1,flowNode:e,...t}}),Qs=e=>({id:e.id,target:e.target,source:e.target,targetHandle:e.targetHandle,sourceHandle:e.sourceHandle}),dr=e=>({id:e.id,source:e.source,target:e.target,targetHandle:e.targetHandle,sourceHandle:e.sourceHandle}),ud=e=>e.filter(t=>"edgeId"in t?`${t.edgeId}`.startsWith("xy-edge__"):!1),Fn=(e,t,n)=>{const o=[];return{changes:e.map(r=>{var l;const i=t.find(c=>r.id===c.id);i||o.push(r.id);const a=(l=n==null?void 0:n[r.source_type])==null?void 0:l.find(c=>(c==null?void 0:c.id)===r.source_id),s=cr(r,{...i==null?void 0:i.data,entity:a});return{type:i?"replace":"add",id:r.id,item:i?an({...i||{},data:void 0},nn(s,on)):s}}),newIds:[]}},Yn=(e,t)=>{const n=[],o=[],r=e.map(i=>{const a=t.find(s=>i.source===s.source&&i.target===s.target);return!a||a.id!==i.id?(a&&o.push(a.id),{type:"add",item:dr(i)}):(n.push(i.id),{type:"replace",item:dr(i)})});return t.forEach(i=>{n.includes(i.id)||o.push(i.id)}),{changes:r,updatedIds:n,deletedIds:o}},Js={width:440,height:360},ur={width:380,height:650},fr={height:70},el={height:130},xt={[ce.Toolbox]:"toolbox",[ce.SessionInfo]:"session-info",[ce.DefaultEmbeddingModel]:"default-embedding-model",[ce.ApplicationBar]:"application-bar"},tl={id:xt[ce.ApplicationBar],type:ce.ApplicationBar,position:{x:10,y:10},data:{}},nl={id:xt[ce.DefaultEmbeddingModel],type:ce.DefaultEmbeddingModel,position:{x:10,y:10+fr.height+5},data:{model:ov}},ol={id:xt[ce.Toolbox],type:ce.Toolbox,position:{x:10+ur.width+10,y:10},measured:Js,data:{}},rl={id:xt[ce.SessionInfo],type:ce.SessionInfo,position:{x:10,y:10+fr.height+el.height},measured:ur,data:{}},il=[ol,rl,nl,tl],gd=[ce.Toolbox,ce.SessionInfo,ce.ApplicationBar,ce.EditorApp],ri={flowNodes:[],flowEdges:[],ready:!0,flowEdgeLoading:!1,flowNodeLoading:!1,syncedNodes:[],syncedEdges:[],syncNodeQueue:[],syncEdgeQueue:[],edges:[],nodes:il},ni=async e=>{const t=await ae("FlowNode").find(e),n=t.reduce((r,i)=>{var a;return r[i.source_type]||(r[i.source_type]=[]),(a=r[i.source_type])==null||a.push(i),r},{}),o={};return await Promise.all(Object.entries(n).map(async([r,i])=>{const a=r;o[a]=await ae(a).find({where:{id:Ev(i.map(s=>s.source_id))}})})),{flowNodes:t,entityGroups:n,flowNodeDatas:o}},Cd=(e,t)=>({reset:()=>{e(ri)},setNodes:n=>{if(typeof n=="function"){e({nodes:n(t().nodes)});return}e({nodes:n})},setEdges:n=>{if(typeof n=="function"){e({edges:n(t().edges)});return}e({edges:n})},updateNodes:n=>{const o=t().nodes;e({nodes:Ye(n,o)})},updateEdges:n=>{const o=t().edges;e({edges:$t(n,o)})},addConnectionToEdges:n=>{const o=t().edges;e({edges:Pa(n,o)})},flowNodesToNodes:(n,o={})=>{const r=t().nodes,{changes:i}=Fn(n,r,o);e({nodes:Ye(i,r)})},flowEdgesToEdges:n=>{const o=t().edges,{changes:r,updatedIds:i,deletedIds:a}=Yn(n,o);o.forEach(s=>{i.includes(s.id)||a.push(s.id)}),a.forEach(s=>{r.push({type:"remove",id:s})}),e({edges:$t(r,o)})},getNodes:n=>t().nodes.filter(o=>n.includes(o.id)),removeSyncNodeQueue:n=>{const{syncNodeQueue:o}=t();for(const r of n){const i=o.findIndex(a=>a.timestamp===r);i>-1&&o.splice(i,1)}e({syncNodeQueue:o})},removeSyncEdgeQueue:n=>{const{syncEdgeQueue:o}=t();for(const r of n){const i=o.findIndex(a=>a.timestamp===r);i>-1&&o.splice(i,1)}e({syncEdgeQueue:o})},pushSyncNodeQueue:(n,o)=>{const{syncNodeQueue:r}=t();e({syncNodeQueue:[...r,{query:o,timestamp:Date.now(),syncType:n}]})},pushSyncEdgeQueue:()=>{const{syncEdgeQueue:n}=t();e({syncEdgeQueue:[...n,{timestamp:Date.now()}]})},findFlowNodesWithSource:async(n,o)=>{try{e({flowNodeLoading:!0});const{flowNodes:r,flowNodeDatas:i}=await ni(n);if(o!=null&&o.clean)e({flowNodes:r,nodes:r.map(a=>{var l;const s=(l=i==null?void 0:i[a.source_type])==null?void 0:l.find(c=>c.id===a.source_id);return cr(a,{data:s})})});else{const a=t().flowNodes,s=r.map(d=>d.id),l=t().nodes,{changes:c}=Fn(r,l,i);e({flowNodes:[...a.filter(d=>!s.includes(d.id)),...r],nodes:Ye(c,l)})}return r}finally{e({flowNodeLoading:!1})}},findFlowEdges:async(n,o)=>{try{e({flowEdgeLoading:!0});const r=await ae("FlowEdge").find(n),i=t().flowEdges,a=r.map(s=>s.id);if(o!=null&&o.clean)e({flowEdges:r,edges:r.map(s=>Qs(s))});else{const s=t().edges,{changes:l}=Yn(r,s);e({flowEdges:[...i.filter(c=>!a.includes(c.id)),...r],edges:$t(l,s)})}return r}finally{e({flowEdgeLoading:!1})}},deleteFlowNode:async n=>{try{if(!n.id&&!n.source_type&&!n.source_id)throw new Error("Missing flow node indentify");const o=await ae("FlowNode").findOne({where:n.id?{id:n.id}:{source_type:n.source_type,source_id:n.source_id}});if(o){await ae("FlowNode").delete(o.id);const r=t().flowNodes;o.source_type&&o.source_id&&await ae(o.source_type).delete(o.source_id).catch(a=>{mt("Failed to delete source entity",o.source_type,o.source_id,a)});const i=t().nodes;e({flowNodes:r.filter(a=>a.id!==o.id),nodes:Ye([{type:"remove",id:o.id}],i)})}}catch(o){mt("Failed to delete flow node",o)}},deleteFlowEdge:async n=>{try{if(!n.id&&!n.source&&!n.target)throw new Error("Missing flow edge indentify");const o=await ae("FlowEdge").findOne({where:n.id?{id:n.id}:{source:n.source,target:n.target}});if(o){await ae("FlowEdge").delete(o.id);const r=t().flowEdges;e({flowEdges:r.filter(i=>i.id!==o.id)})}}catch(o){mt("Failed to delete flow edge",o)}},updateFlowNode:async(n,o)=>{var r;try{if(!((r=Br.getState().currentSession)!=null&&r.id))throw new Error("Session not found");if(!n.id)throw new Error("Missing flow node indentify");await ae("FlowNode").update(n.id,n);const i=t().flowNodes.map(a=>a.id===n.id?{...a,...n}:a);e({flowNodes:o!=null&&o.silent?i:[...i]})}catch(i){mt("Failed to create or update flow node",i,n)}},createOrUpdateFlowNode:async(n,o)=>{var r;try{const i=Br.getState().currentSession;if(!(i!=null&&i.id))throw new Error("Session not found");if(!n.id&&(!n.source_type||!n.source_id))throw new Error("Missing flow node indentify");let a,s=n!=null&&n.id?t().flowNodes.find(p=>p.id===n.id):void 0;if(!s&&(n.id||n.source_type&&n.source_id)&&(s=await ae("FlowNode").findOne({where:n.id?{id:n.id}:{source_type:n.source_type,source_id:n.source_id}})),s)a=an(s,nn(n,on)),o!=null&&o.lazy?ae("FlowNode").update(s.id,a):await ae("FlowNode").update(s.id,a);else if(n.source_id&&n.source_type)a={...n,source_id:`${n.source_id}`,source_type:`${n.source_type}`,node_type:n.node_type||"NEW_MESSAGE",session_id:n.session_id||(i==null?void 0:i.id)},o!=null&&o.lazy?(a.id=Kc(),ae("FlowNode").save(a)):a=await ae("FlowNode").save(a);else throw new Error("Missing source id and type");let l;const c=t().nodes.find(p=>p.id===a.id);a.source_type&&!c?l=await ae(a.source_type).findOne({where:{id:n.source_id}}):a.source_type&&c&&(l=(r=c==null?void 0:c.data)==null?void 0:r.entity);const d=t().flowNodes,u=t().nodes,{changes:f}=Fn([a],u,{[a.source_type]:[l]});return e({flowNodes:[...d.filter(p=>p.id!==a.id),a],nodes:Ye(f,u)}),a}catch(i){mt("Failed to create or update flow node",i,n)}},createOrUpdateFlowEdge:async(n,o)=>{try{const r=Br.getState().currentSession;if(!(r!=null&&r.id))throw new Error("Session not found");if(!n.id&&(!n.source||!n.target))throw new Error("Missing flow node indentify");let i,a=n!=null&&n.id?t().flowEdges.find(c=>c.id===n.id):void 0;if(a&&(n.id||n.source&&n.target)&&(a=await ae("FlowEdge").findOne({where:n.id?{id:n.id}:{source:n.source,target:n.target}})),a)i=an(a,nn(n,on)),o!=null&&o.lazy?ae("FlowEdge").update(a.id,i):await ae("FlowEdge").update(a.id,i);else if(n.source&&n.target)i={...n,source:`${n.source}`,target:`${n.target}`,session_id:n.session_id||(r==null?void 0:r.id)},o!=null&&o.lazy?(i.id=Kc(),ae("FlowEdge").save(i)):i=await ae("FlowEdge").save(i);else throw new Error("Missing source and target");const s=t().flowEdges,l=t().edges;return e({flowEdges:[...s.filter(c=>c.id!==i.id),i],edges:$t(Yn([i],l).changes,l)}),i}catch(r){mt("Failed to create or update flow node",r)}}});class b0 extends rv{get lc_attributes(){return{partialVariables:void 0}}constructor(t){super(t),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompts",this._getPromptType()]}),Object.defineProperty(this,"inputVariables",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputParser",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"partialVariables",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0});const{inputVariables:n}=t;if(n.includes("stop"))throw new Error("Cannot have an input variable named 'stop', as it is used internally, please rename.");Object.assign(this,t)}async mergePartialAndUserVariables(t){const n=this.partialVariables??{},o={};for(const[r,i]of Object.entries(n))typeof i=="string"?o[r]=i:o[r]=await i();return{...o,...t}}async invoke(t,n){const o={...this.metadata,...n==null?void 0:n.metadata},r=[...this.tags??[],...(n==null?void 0:n.tags)??[]];return this._callWithConfig(i=>this.formatPromptValue(i),t,{...n,tags:r,metadata:o,runType:"prompt"})}serialize(){throw new Error("Use .toJSON() instead")}static async deserialize(t){switch(t._type){case"prompt":{const{PromptTemplate:n}=await Gt(async()=>{const{PromptTemplate:o}=await Promise.resolve().then(()=>ml);return{PromptTemplate:o}},void 0);return n.deserialize(t)}case void 0:{const{PromptTemplate:n}=await Gt(async()=>{const{PromptTemplate:o}=await Promise.resolve().then(()=>ml);return{PromptTemplate:o}},void 0);return n.deserialize({...t,_type:"prompt"})}case"few_shot":{const{FewShotPromptTemplate:n}=await Gt(async()=>{const{FewShotPromptTemplate:o}=await import("./few_shot-ZSQltW5J.js").then(async r=>(await r.__tla,r));return{FewShotPromptTemplate:o}},__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]));return n.deserialize(t)}default:throw new Error(`Invalid prompt type in config: ${t._type}`)}}}Zr=class extends b0{async formatPromptValue(e){const t=await this.format(e);return new kv(t)}};var S0=Object.prototype.toString,ut=Array.isArray||function(e){return S0.call(e)==="[object Array]"};function hr(e){return typeof e=="function"}function _0(e){return ut(e)?"array":typeof e}function pr(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function al(e,t){return e!=null&&typeof e=="object"&&t in e}function C0(e,t){return e!=null&&typeof e!="object"&&e.hasOwnProperty&&e.hasOwnProperty(t)}var N0=RegExp.prototype.test;function E0(e,t){return N0.call(e,t)}var k0=/\S/;function j0(e){return!E0(k0,e)}var P0={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function M0(e){return String(e).replace(/[&<>"'`=\/]/g,function(t){return P0[t]})}var O0=/\s*/,A0=/\s+/,sl=/\s*=/,I0=/\s*\}/,R0=/#|\^|\/|>|\{|&|=|!/;function z0(e,t){if(!e)return[];var n=!1,o=[],r=[],i=[],a=!1,s=!1,l="",c=0;function d(){if(a&&!s)for(;i.length;)delete r[i.pop()];else i=[];a=!1,s=!1}var u,f,p;function y(O){if(typeof O=="string"&&(O=O.split(A0,2)),!ut(O)||O.length!==2)throw new Error("Invalid tags: "+O);u=new RegExp(pr(O[0])+"\\s*"),f=new RegExp("\\s*"+pr(O[1])),p=new RegExp("\\s*"+pr("}"+O[1]))}y(t||he.tags);for(var g=new Vt(e),b,m,w,x,v,C;!g.eos();){if(b=g.pos,w=g.scanUntil(u),w)for(var A=0,k=w.length;A<k;++A)x=w.charAt(A),j0(x)?(i.push(r.length),l+=x):(s=!0,n=!0,l+=" "),r.push(["text",x,b,b+1]),b+=1,x===`
`&&(d(),l="",c=0,n=!1);if(!g.scan(u))break;if(a=!0,m=g.scan(R0)||"name",g.scan(O0),m==="="?(w=g.scanUntil(sl),g.scan(sl),g.scanUntil(f)):m==="{"?(w=g.scanUntil(p),g.scan(I0),g.scanUntil(f),m="&"):w=g.scanUntil(f),!g.scan(f))throw new Error("Unclosed tag at "+g.pos);if(m==">"?v=[m,w,b,g.pos,l,c,n]:v=[m,w,b,g.pos],c++,r.push(v),m==="#"||m==="^")o.push(v);else if(m==="/"){if(C=o.pop(),!C)throw new Error('Unopened section "'+w+'" at '+b);if(C[1]!==w)throw new Error('Unclosed section "'+C[1]+'" at '+b)}else m==="name"||m==="{"||m==="&"?s=!0:m==="="&&y(w)}if(d(),C=o.pop(),C)throw new Error('Unclosed section "'+C[1]+'" at '+g.pos);return T0(D0(r))}function D0(e){for(var t=[],n,o,r=0,i=e.length;r<i;++r)n=e[r],n&&(n[0]==="text"&&o&&o[0]==="text"?(o[1]+=n[1],o[3]=n[3]):(t.push(n),o=n));return t}function T0(e){for(var t=[],n=t,o=[],r,i,a=0,s=e.length;a<s;++a)switch(r=e[a],r[0]){case"#":case"^":n.push(r),o.push(r),n=r[4]=[];break;case"/":i=o.pop(),i[5]=r[2],n=o.length>0?o[o.length-1][4]:t;break;default:n.push(r)}return t}function Vt(e){this.string=e,this.tail=e,this.pos=0}Vt.prototype.eos=function(){return this.tail===""},Vt.prototype.scan=function(e){var t=this.tail.match(e);if(!t||t.index!==0)return"";var n=t[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n},Vt.prototype.scanUntil=function(e){var t=this.tail.search(e),n;switch(t){case-1:n=this.tail,this.tail="";break;case 0:n="";break;default:n=this.tail.substring(0,t),this.tail=this.tail.substring(t)}return this.pos+=n.length,n};function ft(e,t){this.view=e,this.cache={".":this.view},this.parent=t}ft.prototype.push=function(e){return new ft(e,this)},ft.prototype.lookup=function(e){var t=this.cache,n;if(t.hasOwnProperty(e))n=t[e];else{for(var o=this,r,i,a,s=!1;o;){if(e.indexOf(".")>0)for(r=o.view,i=e.split("."),a=0;r!=null&&a<i.length;)a===i.length-1&&(s=al(r,i[a])||C0(r,i[a])),r=r[i[a++]];else r=o.view[e],s=al(o.view,e);if(s){n=r;break}o=o.parent}t[e]=n}return hr(n)&&(n=n.call(this.view)),n};function de(){this.templateCache={_cache:{},set:function(e,t){this._cache[e]=t},get:function(e){return this._cache[e]},clear:function(){this._cache={}}}}de.prototype.clearCache=function(){typeof this.templateCache<"u"&&this.templateCache.clear()},de.prototype.parse=function(e,t){var n=this.templateCache,o=e+":"+(t||he.tags).join(":"),r=typeof n<"u",i=r?n.get(o):void 0;return i==null&&(i=z0(e,t),r&&n.set(o,i)),i},de.prototype.render=function(e,t,n,o){var r=this.getConfigTags(o),i=this.parse(e,r),a=t instanceof ft?t:new ft(t,void 0);return this.renderTokens(i,a,n,e,o)},de.prototype.renderTokens=function(e,t,n,o,r){for(var i="",a,s,l,c=0,d=e.length;c<d;++c)l=void 0,a=e[c],s=a[0],s==="#"?l=this.renderSection(a,t,n,o,r):s==="^"?l=this.renderInverted(a,t,n,o,r):s===">"?l=this.renderPartial(a,t,n,r):s==="&"?l=this.unescapedValue(a,t):s==="name"?l=this.escapedValue(a,t,r):s==="text"&&(l=this.rawValue(a)),l!==void 0&&(i+=l);return i},de.prototype.renderSection=function(e,t,n,o,r){var i=this,a="",s=t.lookup(e[1]);function l(u){return i.render(u,t,n,r)}if(s){if(ut(s))for(var c=0,d=s.length;c<d;++c)a+=this.renderTokens(e[4],t.push(s[c]),n,o,r);else if(typeof s=="object"||typeof s=="string"||typeof s=="number")a+=this.renderTokens(e[4],t.push(s),n,o,r);else if(hr(s)){if(typeof o!="string")throw new Error("Cannot use higher-order sections without the original template");s=s.call(t.view,o.slice(e[3],e[5]),l),s!=null&&(a+=s)}else a+=this.renderTokens(e[4],t,n,o,r);return a}},de.prototype.renderInverted=function(e,t,n,o,r){var i=t.lookup(e[1]);if(!i||ut(i)&&i.length===0)return this.renderTokens(e[4],t,n,o,r)},de.prototype.indentPartial=function(e,t,n){for(var o=t.replace(/[^ \t]/g,""),r=e.split(`
`),i=0;i<r.length;i++)r[i].length&&(i>0||!n)&&(r[i]=o+r[i]);return r.join(`
`)},de.prototype.renderPartial=function(e,t,n,o){if(n){var r=this.getConfigTags(o),i=hr(n)?n(e[1]):n[e[1]];if(i!=null){var a=e[6],s=e[5],l=e[4],c=i;s==0&&l&&(c=this.indentPartial(i,l,a));var d=this.parse(c,r);return this.renderTokens(d,t,n,c,o)}}},de.prototype.unescapedValue=function(e,t){var n=t.lookup(e[1]);if(n!=null)return n},de.prototype.escapedValue=function(e,t,n){var o=this.getConfigEscape(n)||he.escape,r=t.lookup(e[1]);if(r!=null)return typeof r=="number"&&o===he.escape?String(r):o(r)},de.prototype.rawValue=function(e){return e[1]},de.prototype.getConfigTags=function(e){return ut(e)?e:e&&typeof e=="object"?e.tags:void 0},de.prototype.getConfigEscape=function(e){if(e&&typeof e=="object"&&!ut(e))return e.escape};var he={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(e){Bt.templateCache=e},get templateCache(){return Bt.templateCache}},Bt=new de;he.clearCache=function(){return Bt.clearCache()},he.parse=function(e,t){return Bt.parse(e,t)},he.render=function(e,t,n,o){if(typeof e!="string")throw new TypeError('Invalid template! Template should be a "string" but "'+_0(e)+'" was given as the first argument for mustache#render(template, view, partials)');return Bt.render(e,t,n,o)},he.escape=M0,he.Scanner=Vt,he.Context=ft,he.Writer=de;function ll(){he.escape=e=>e}let mr,cl,dl,ul,fl,Zn,hl,pl;mr=e=>{const t=e.split(""),n=[],o=(i,a)=>{for(let s=a;s<t.length;s+=1)if(i.includes(t[s]))return s;return-1};let r=0;for(;r<t.length;)if(t[r]==="{"&&r+1<t.length&&t[r+1]==="{")n.push({type:"literal",text:"{"}),r+=2;else if(t[r]==="}"&&r+1<t.length&&t[r+1]==="}")n.push({type:"literal",text:"}"}),r+=2;else if(t[r]==="{"){const i=o("}",r);if(i<0)throw new Error("Unclosed '{' in template.");n.push({type:"variable",name:t.slice(r+1,i).join("")}),r=i+1}else{if(t[r]==="}")throw new Error("Single '}' in template.");{const i=o("{}",r),a=(i<0?t.slice(r):t.slice(r,i)).join("");n.push({type:"literal",text:a}),r=i<0?t.length:i}}return n},cl=e=>e.map(t=>t[0]==="name"?{type:"variable",name:t[1].includes(".")?t[1].split(".")[0]:t[1]}:["#","&","^",">"].includes(t[0])?{type:"variable",name:t[1]}:{type:"literal",text:t[1]}),dl=e=>{ll();const t=he.parse(e);return cl(t)},ul=(e,t)=>mr(e).reduce((n,o)=>{if(o.type==="variable"){if(o.name in t){const r=typeof t[o.name]=="string"?t[o.name]:JSON.stringify(t[o.name]);return n+r}throw new Error(`(f-string) Missing value for input ${o.name}`)}return n+o.text},""),fl=(e,t)=>(ll(),he.render(e,t)),Zn={"f-string":ul,mustache:fl},hl={"f-string":mr,mustache:dl},Je=(e,t,n)=>{try{return Zn[t](e,n)}catch(o){throw iv(o,"INVALID_PROMPT_INPUT")}},pl=(e,t)=>hl[t](e),ei=(e,t,n)=>{if(!(t in Zn)){const o=Object.keys(Zn);throw new Error(`Invalid template format. Got \`${t}\`;
                         should be one of ${o}`)}try{const o=n.reduce((r,i)=>(r[i]="foo",r),{});Array.isArray(e)?e.forEach(r=>{if(r.type==="text")Je(r.text,t,o);else if(r.type==="image_url")if(typeof r.image_url=="string")Je(r.image_url,t,o);else{const i=r.image_url.url;Je(i,t,o)}else throw new Error(`Invalid message template received. ${JSON.stringify(r,null,2)}`)}):Je(e,t,o)}catch(o){throw new Error(`Invalid prompt schema: ${o.message}`)}},Qe=class extends Zr{static lc_name(){return"PromptTemplate"}constructor(e){if(super(e),Object.defineProperty(this,"template",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"templateFormat",{enumerable:!0,configurable:!0,writable:!0,value:"f-string"}),Object.defineProperty(this,"validateTemplate",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"additionalContentFields",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e.templateFormat==="mustache"&&e.validateTemplate===void 0&&(this.validateTemplate=!1),Object.assign(this,e),this.validateTemplate){if(this.templateFormat==="mustache")throw new Error("Mustache templates cannot be validated.");let t=this.inputVariables;this.partialVariables&&(t=t.concat(Object.keys(this.partialVariables))),ei(this.template,this.templateFormat,t)}}_getPromptType(){return"prompt"}async format(e){const t=await this.mergePartialAndUserVariables(e);return Je(this.template,this.templateFormat,t)}static fromExamples(e,t,n,o=`

`,r=""){const i=[r,...e,t].join(o);return new Qe({inputVariables:n,template:i})}static fromTemplate(e,t){const{templateFormat:n="f-string",...o}=t??{},r=new Set;return pl(e,n).forEach(i=>{i.type==="variable"&&r.add(i.name)}),new Qe({inputVariables:[...r],templateFormat:n,template:e,...o})}async partial(e){const t=this.inputVariables.filter(r=>!(r in e)),n={...this.partialVariables??{},...e},o={...this,inputVariables:t,partialVariables:n};return new Qe(o)}serialize(){if(this.outputParser!==void 0)throw new Error("Cannot serialize a prompt template with an output parser");return{_type:this._getPromptType(),input_variables:this.inputVariables,template:this.template,template_format:this.templateFormat}}static async deserialize(e){if(!e.template)throw new Error("Prompt template must have a template");return new Qe({inputVariables:e.input_variables,template:e.template,templateFormat:e.template_format})}};const ml=Object.freeze(Object.defineProperty({__proto__:null,PromptTemplate:Qe},Symbol.toStringTag,{value:"Module"}));class L0 extends Wc{constructor(t){var r;const n={maxConcurrency:2,...t};super(n),Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:"text-embedding-ada-002"}),Object.defineProperty(this,"modelName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"batchSize",{enumerable:!0,configurable:!0,writable:!0,value:512}),Object.defineProperty(this,"stripNewLines",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"dimensions",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"organization",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientConfig",{enumerable:!0,configurable:!0,writable:!0,value:void 0});const o=(n==null?void 0:n.apiKey)??(n==null?void 0:n.openAIApiKey)??Hr("OPENAI_API_KEY");this.organization=((r=n==null?void 0:n.configuration)==null?void 0:r.organization)??Hr("OPENAI_ORGANIZATION"),this.model=(n==null?void 0:n.model)??(n==null?void 0:n.modelName)??this.model,this.modelName=this.model,this.batchSize=(n==null?void 0:n.batchSize)??this.batchSize,this.stripNewLines=(n==null?void 0:n.stripNewLines)??this.stripNewLines,this.timeout=n==null?void 0:n.timeout,this.dimensions=n==null?void 0:n.dimensions,this.clientConfig={apiKey:o,organization:this.organization,dangerouslyAllowBrowser:!0,...t==null?void 0:t.configuration}}async embedDocuments(t){const n=Gc(this.stripNewLines?t.map(a=>a.replace(/\n/g," ")):t,this.batchSize),o=n.map(a=>{const s={model:this.model,input:a};return this.dimensions&&(s.dimensions=this.dimensions),this.embeddingWithRetry(s)}),r=await Promise.all(o),i=[];for(let a=0;a<r.length;a+=1){const s=n[a],{data:l}=r[a];for(let c=0;c<s.length;c+=1)i.push(l[c].embedding)}return i}async embedQuery(t){const n={model:this.model,input:this.stripNewLines?t.replace(/\n/g," "):t};this.dimensions&&(n.dimensions=this.dimensions);const{data:o}=await this.embeddingWithRetry(n);return o[0].embedding}async embeddingWithRetry(t){if(!this.client){const o={baseURL:this.clientConfig.baseURL},r=jv(o),i={...this.clientConfig,baseURL:r,timeout:this.timeout,maxRetries:0};i.baseURL||delete i.baseURL,this.client=new Pv(i)}const n={};return this.caller.call(async()=>{try{return await this.client.embeddings.create(t,n)}catch(o){throw Mv(o)}})}}class $0 extends Wc{constructor(t){var n,o;if(super(t??{}),Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"modelName",{enumerable:!0,configurable:!0,writable:!0,value:"embedding-001"}),Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:"embedding-001"}),Object.defineProperty(this,"taskType",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"title",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stripNewLines",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"maxBatchSize",{enumerable:!0,configurable:!0,writable:!0,value:100}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.modelName=((n=t==null?void 0:t.model)==null?void 0:n.replace(/^models\//,""))??((o=t==null?void 0:t.modelName)==null?void 0:o.replace(/^models\//,""))??this.modelName,this.model=this.modelName,this.taskType=(t==null?void 0:t.taskType)??this.taskType,this.title=(t==null?void 0:t.title)??this.title,this.title&&this.taskType!=="RETRIEVAL_DOCUMENT")throw new Error("title can only be sepcified with TaskType.RETRIEVAL_DOCUMENT");if(this.apiKey=(t==null?void 0:t.apiKey)??Hr("GOOGLE_API_KEY"),!this.apiKey)throw new Error("Please set an API key for Google GenerativeAI in the environmentb variable GOOGLE_API_KEY or in the `apiKey` field of the GoogleGenerativeAIEmbeddings constructor");this.client=new Ov(this.apiKey).getGenerativeModel({model:this.model},{baseUrl:t==null?void 0:t.baseUrl})}_convertToContent(t){return{content:{role:"user",parts:[{text:this.stripNewLines?t.replace(/\n/g," "):t}]},taskType:this.taskType,title:this.title}}async _embedQueryContent(t){const n=this._convertToContent(t);return(await this.client.embedContent(n)).embedding.values??[]}async _embedDocumentsContent(t){const n=Gc(t,this.maxBatchSize),o=n.map(r=>({requests:r.map(i=>this._convertToContent(i))}));return(await Promise.allSettled(o.map(r=>this.client.batchEmbedContents(r)))).flatMap((r,i)=>r.status==="fulfilled"?r.value.embeddings.map(a=>a.values||[]):Array(n[i].length).fill([]))}embedQuery(t){return this.caller.call(this._embedQueryContent.bind(this),t)}embedDocuments(t){return this.caller.call(this._embedDocumentsContent.bind(this),t)}}let gl,yl;gl=()=>{const{confirmPassphrase:e}=Av();return{getEmbedding:S.useCallback(async t=>{var a;const n=t==null?void 0:t.encrypted,o=(a=t.data)==null?void 0:a.provider;if(await e(),!(n!=null&&n.provider)&&!(n!=null&&n.key))throw new Error("API Key is not found.");const r=await av.get("passphrase");if(!r)throw new Error("Passphrase is not found");const i=await Iv(`${n.key}`,r);if(!i||!o)throw new Error("API Key or provider is not found.");switch(o){case nd.OpenAI:return new L0({apiKey:i,model:"text-embedding-3-small"});case nd.GoogleGenerativeAI:return new $0({apiKey:i,model:"text-embedding-004"});default:throw new Error("Provider is not supported")}},[e])}},kd=()=>{const[e,t]=S.useState(!1),n=Uc(s=>s.index),o=Uc(s=>s.similaritySearchWithScore),{getEmbedding:r}=gl(),i=S.useCallback(async(s,...l)=>{var c,d;try{const[u,f]=l;if(t(!0),!s||!((c=s.data)!=null&&c.provider)||((d=s.data)==null?void 0:d.provider)==="local_transformers")return o(u,f);const p=await r(s);return o({...u,embedding:p},f)}finally{t(!1)}},[r,o]),a=S.useCallback(async(s,...l)=>{var c,d;try{const[u,f]=l;if(t(!0),!s||!((c=s.data)!=null&&c.provider)||((d=s.data)==null?void 0:d.provider)==="local_transformers")return n(u,f);const p=await r(s);return n({...u,embedding:p},f)}finally{t(!1)}},[r,n]);return{loading:e,index:a,similaritySearchWithScore:i}},yl=S.lazy(()=>Gt(()=>import("./index-IiyPudT7.js"),__vite__mapDeps([10,2,3,11,12]))),sd=S.memo(({source:e,className:t,...n})=>{const o=$x(i=>i.theme),r=S.useMemo(()=>({pre:({children:i,className:a,...s})=>h.jsx("pre",{...s,className:Q(a,"nowheel"),children:i}),think:({children:i})=>h.jsxs(h.Fragment,{children:[h.jsx("code",{className:"!rounded-none",children:"Think: "}),h.jsx("blockquote",{className:"think",children:i})]})}),[]);return h.jsx(S.Suspense,{children:h.jsx(yl,{className:Q("!text-sm [&_p]:leading-relaxed !max-w-full !bg-transparent !font-sans",t),source:e,wrapperElement:{"data-color-mode":o==="dark"?"dark":"light"},components:r,...n})})},(e,t)=>e.source===t.source),ro=S.forwardRef(({className:e,...t},n)=>h.jsx("div",{ref:n,className:Q("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t})),ro.displayName="Card",co=S.forwardRef(({className:e,...t},n)=>h.jsx("div",{ref:n,className:Q("flex flex-col space-y-1.5 p-6",e),...t})),co.displayName="CardHeader",uo=S.forwardRef(({className:e,...t},n)=>h.jsx("h3",{ref:n,className:Q("text-2xl font-semibold leading-none tracking-tight",e),...t})),uo.displayName="CardTitle",Jr=S.forwardRef(({className:e,...t},n)=>h.jsx("p",{ref:n,className:Q("text-sm text-muted-foreground",e),...t})),Jr.displayName="CardDescription",fo=S.forwardRef(({className:e,...t},n)=>h.jsx("div",{ref:n,className:Q("p-6 pt-0",e),...t})),fo.displayName="CardContent",go=S.forwardRef(({className:e,...t},n)=>h.jsx("div",{ref:n,className:Q("flex items-center p-6 pt-0",e),...t})),go.displayName="CardFooter";let xl;_d=S.memo(e=>{const[t,n]=S.useState(!1),[o,r]=S.useState(e.options||{}),{t:i}=ke("atoms"),a=()=>{t||r(e.options||{}),n(!t)},s=()=>{var l;(l=e.onChangeOptions)==null||l.call(e,o||{}),n(!1)};return h.jsx("div",{className:e.className,children:h.jsxs(zv,{open:t,onOpenChange:n,children:[h.jsx(Dv,{asChild:!0,children:h.jsx("div",{className:"flex justify-end gap-2",children:h.jsxs(no,{onClick:a,variant:"link",className:"flex items-center px-0",children:[h.jsx(le,{name:"settings"}),h.jsx(Fe,{children:i("llm_setting.title")})]})})}),h.jsx(Tv,{className:"w-full p-0",children:t?h.jsxs(ro,{className:"!border-none",children:[h.jsx(co,{children:h.jsx(uo,{children:i("llm_setting.title")})}),h.jsxs(fo,{children:[h.jsxs("div",{children:[h.jsxs(Fe,{children:[i("llm_setting.temperature"),":"]}),h.jsx(gt,{type:"number",value:o.temperature?`${o.temperature}`:"",onChange:l=>r(c=>({...c,temperature:l.target.value}))})]}),h.jsxs("div",{children:[h.jsxs(Fe,{children:[i("llm_setting.top_p"),":"]}),h.jsx(gt,{type:"number",value:o.topP?`${o.topP}`:"",onChange:l=>r(c=>({...c,topP:l.target.value}))})]}),h.jsxs("div",{children:[h.jsxs(Fe,{children:[i("llm_setting.top_k"),":"]}),h.jsx(gt,{type:"number",value:o.topK?`${o.topK}`:"",onChange:l=>r(c=>({...c,topK:l.target.value}))})]}),h.jsxs("div",{children:[h.jsxs(Fe,{children:[i("llm_setting.max_tokens"),":"]}),h.jsx(gt,{type:"number",value:o.maxTokens?`${o.maxTokens}`:"",onChange:l=>r(c=>({...c,maxTokens:l.target.value}))})]}),h.jsxs("div",{children:[h.jsxs(Fe,{children:[i("llm_setting.stop_sequences"),":"]}),h.jsx(gt,{placeholder:i("llm_setting.stop_sequences_placeholder"),value:o.stop?`${o.stop}`:"",onChange:l=>r(c=>({...c,stop:l.target.value}))})]})]}),h.jsx(go,{className:"flex justify-end",children:h.jsx(no,{variant:"secondary",onClick:s,children:i("llm_setting.save")})})]}):void 0})]})})}),Kr=["Qwen3-1.7B-q4f16_1-MLC","Qwen2.5-Coder-1.5B-Instruct-q4f16_1-MLC","stablelm-2-zephyr-1_6b-q4f16_1-MLC-1k","Phi-3.5-mini-instruct-q4f16_1-MLC-1k","Llama-3.2-3B-Instruct-q4f32_1-MLC","DeepSeek-R1-Distill-Qwen-7B-q4f16_1-MLC"],Ed=["LiquidAI/LFM2-1.2B-GGUF","ggml-org/SmolLM3-3B-GGUF","LiquidAI/LFM2-700M-GGUF","ggml-org/Qwen3-1.7B-GGUF","unsloth/gemma-3-1b-it-GGUF","unsloth/DeepSeek-R1-Distill-Qwen-1.5B-GGUF","bartowski/Llama-3.2-1B-Instruct-GGUF","unsloth/Qwen3-1.7B-GGUF","unsloth/Qwen3-0.6B-GGUF","unsloth/Qwen3-4B-GGUF","unsloth/Phi-4-mini-reasoning-GGUF"],xl=Fc("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}}),ye=function({className:e,variant:t,...n}){return h.jsx("div",{className:Q(xl({variant:t}),e),...n})},ad=S.memo(e=>{var c;const{cloud:t,name:n,model:o,isCached:r,isFunctionCalling:i}=e,{t:a}=ke("atoms"),s=S.useCallback(d=>d===1?"llm_info.model_types.embedding":d===2?"llm_info.model_types.vlm":"llm_info.model_types.llm",[]),l=S.useMemo(()=>{if(o)switch(o.model_type){case 0:case 1:return h.jsx(ye,{className:"",children:a(s(o.model_type))});case 2:return h.jsxs(h.Fragment,{children:[h.jsx(ye,{className:"",children:a(s(0))}),h.jsx(ye,{className:"",children:a(s(o.model_type))})]})}},[o,s,a]);if(o)return h.jsxs(h.Fragment,{children:[l,Kr.some(d=>n&&d.includes(n))?h.jsx(ye,{className:"",variant:"outline",children:a("llm_info.recommended")}):null,r?h.jsx(ye,{className:"",variant:"outline",children:a("llm_info.cached")}):null,t?h.jsx(ye,{className:"",variant:"outline",children:a("llm_info.cloud")}):null,i?h.jsx(ye,{className:"",variant:"outline",children:a("llm_info.function_calling")}):null,o!=null&&o.low_resource_required?h.jsx(ye,{className:"",variant:"outline",children:a("llm_info.low_resource_required")}):null,(c=o==null?void 0:o.overrides)!=null&&c.context_window_size?h.jsxs(ye,{className:"",variant:"outline",children:[o.overrides.context_window_size.toLocaleString("en-US")," Tokens"]}):null,o!=null&&o.vram_required_MB?h.jsxs(ye,{className:"",variant:"outline",children:["VRAM: ",o.vram_required_MB.toLocaleString("en-US")," MB"]}):null]})});class V0{async loadAndSplit(t){if(t===void 0)throw new Error("You must pass a text splitter to use this method.");const n=await this.load();return t.invoke(n)}}cd=class extends V0{constructor(e,{splitPages:t=!0,pdfjs:n=B0,parsedItemSeparator:o=""}={}){super(),Object.defineProperty(this,"blob",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"splitPages",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"pdfjs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"parsedItemSeparator",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.blob=e,this.splitPages=t??this.splitPages,this.pdfjs=n,this.parsedItemSeparator=o}async load(){const{getDocument:e,version:t}=await this.pdfjs(),n=await e({data:new Uint8Array(await this.blob.arrayBuffer()),useWorkerFetch:!1,isEvalSupported:!1,useSystemFonts:!0}).promise,o=await n.getMetadata().catch(()=>null),r=[];for(let i=1;i<=n.numPages;i+=1){const a=await(await n.getPage(i)).getTextContent();if(a.items.length===0)continue;let s;const l=[];for(const d of a.items)"str"in d&&(s===d.transform[5]||!s?l.push(d.str):l.push(`
${d.str}`),s=d.transform[5]);const c=l.join(this.parsedItemSeparator);r.push(new qc({pageContent:c,metadata:{pdf:{version:t,info:o==null?void 0:o.info,metadata:o==null?void 0:o.metadata,totalPages:n.numPages},loc:{pageNumber:i}}}))}return this.splitPages?r:r.length===0?[]:[new qc({pageContent:r.map(i=>i.pageContent).join(`

`),metadata:{pdf:{version:t,info:o==null?void 0:o.info,metadata:o==null?void 0:o.metadata,totalPages:n.numPages}}})]}};async function B0(){try{const{default:e}=await Gt(async()=>{const{default:o}=await import("./pdf-C9p4cp-L.js").then(async r=>(await r.__tla,r)).then(r=>r.p);return{default:o}},__vite__mapDeps([13,2,3,1])),{getDocument:t,version:n}=e;return{getDocument:t,version:n}}catch(e){throw console.error(e),new Error("Failed to load pdf-parse. Please install it with eg. `npm install pdf-parse`.")}}var gr="Tabs",[H0,Vv]=Vr(gr,[Qc]),vl=Qc(),[F0,yr]=H0(gr),wl=S.forwardRef((e,t)=>{const{__scopeTabs:n,value:o,onValueChange:r,defaultValue:i,orientation:a="horizontal",dir:s,activationMode:l="automatic",...c}=e,d=Fr(s),[u,f]=Ut({prop:o,onChange:r,defaultProp:i});return h.jsx(F0,{scope:n,baseId:qt(),value:u,onValueChange:f,orientation:a,dir:d,activationMode:l,children:h.jsx(se.div,{dir:d,"data-orientation":a,...c,ref:t})})});wl.displayName=gr;var bl="TabsList",Sl=S.forwardRef((e,t)=>{const{__scopeTabs:n,loop:o=!0,...r}=e,i=yr(bl,n),a=vl(n);return h.jsx(sv,{asChild:!0,...a,orientation:i.orientation,dir:i.dir,loop:o,children:h.jsx(se.div,{role:"tablist","aria-orientation":i.orientation,...r,ref:t})})});Sl.displayName=bl;var _l="TabsTrigger",Cl=S.forwardRef((e,t)=>{const{__scopeTabs:n,value:o,disabled:r=!1,...i}=e,a=yr(_l,n),s=vl(n),l=kl(a.baseId,o),c=jl(a.baseId,o),d=o===a.value;return h.jsx(lv,{asChild:!0,...s,focusable:!r,active:d,children:h.jsx(se.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":c,"data-state":d?"active":"inactive","data-disabled":r?"":void 0,disabled:r,id:l,...i,ref:t,onMouseDown:re(e.onMouseDown,u=>{!r&&u.button===0&&u.ctrlKey===!1?a.onValueChange(o):u.preventDefault()}),onKeyDown:re(e.onKeyDown,u=>{[" ","Enter"].includes(u.key)&&a.onValueChange(o)}),onFocus:re(e.onFocus,()=>{const u=a.activationMode!=="manual";!d&&!r&&u&&a.onValueChange(o)})})})});Cl.displayName=_l;var Nl="TabsContent",El=S.forwardRef((e,t)=>{const{__scopeTabs:n,value:o,forceMount:r,children:i,...a}=e,s=yr(Nl,n),l=kl(s.baseId,o),c=jl(s.baseId,o),d=o===s.value,u=S.useRef(d);return S.useEffect(()=>{const f=requestAnimationFrame(()=>u.current=!1);return()=>cancelAnimationFrame(f)},[]),h.jsx(Vx,{present:r||d,children:({present:f})=>h.jsx(se.div,{"data-state":d?"active":"inactive","data-orientation":s.orientation,role:"tabpanel","aria-labelledby":l,hidden:!f,id:c,tabIndex:0,...a,ref:t,style:{...e.style,animationDuration:u.current?"0s":void 0},children:f&&i})})});El.displayName=Nl;function kl(e,t){return`${e}-trigger-${t}`}function jl(e,t){return`${e}-content-${t}`}var Y0=wl,Pl=Sl,Ml=Cl,Ol=El;Sd=Y0,ti=S.forwardRef(({className:e,...t},n)=>h.jsx(Pl,{ref:n,className:Q("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t})),ti.displayName=Pl.displayName,oi=S.forwardRef(({className:e,...t},n)=>h.jsx(Ml,{ref:n,className:Q("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t})),oi.displayName=Ml.displayName,Gr=S.forwardRef(({className:e,...t},n)=>h.jsx(Ol,{ref:n,className:Q("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t})),Gr.displayName=Ol.displayName;function Al(e,[t,n]){return Math.min(n,Math.max(t,e))}var Z0=[" ","Enter","ArrowUp","ArrowDown"],X0=[" ","Enter"],Ht="Select",[Xn,Kn,K0]=Yc(Ht),[ht,Bv]=Vr(Ht,[K0,Jc]),Wn=Jc(),[W0,Ve]=ht(Ht),[G0,U0]=ht(Ht),Il=e=>{const{__scopeSelect:t,children:n,open:o,defaultOpen:r,onOpenChange:i,value:a,defaultValue:s,onValueChange:l,dir:c,name:d,autoComplete:u,disabled:f,required:p,form:y}=e,g=Wn(t),[b,m]=S.useState(null),[w,x]=S.useState(null),[v,C]=S.useState(!1),A=Fr(c),[k=!1,O]=Ut({prop:o,defaultProp:r,onChange:i}),[I,R]=Ut({prop:a,defaultProp:s,onChange:l}),$=S.useRef(null),D=b?y||!!b.closest("form"):!0,[T,_]=S.useState(new Set),j=Array.from(T).map(N=>N.props.value).join(";");return h.jsx(cv,{...g,children:h.jsxs(W0,{required:p,scope:t,trigger:b,onTriggerChange:m,valueNode:w,onValueNodeChange:x,valueNodeHasChildren:v,onValueNodeHasChildrenChange:C,contentId:qt(),value:I,onValueChange:R,open:k,onOpenChange:O,dir:A,triggerPointerDownPosRef:$,disabled:f,children:[h.jsx(Xn.Provider,{scope:t,children:h.jsx(G0,{scope:e.__scopeSelect,onNativeOptionAdd:S.useCallback(N=>{_(M=>new Set(M).add(N))},[]),onNativeOptionRemove:S.useCallback(N=>{_(M=>{const E=new Set(M);return E.delete(N),E})},[]),children:n})}),D?h.jsxs(rc,{"aria-hidden":!0,required:p,tabIndex:-1,name:d,autoComplete:u,value:I,onChange:N=>R(N.target.value),disabled:f,form:y,children:[I===void 0?h.jsx("option",{value:""}):null,Array.from(T)]},j):null]})})};Il.displayName=Ht;var Rl="SelectTrigger",zl=S.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:o=!1,...r}=e,i=Wn(n),a=Ve(Rl,n),s=a.disabled||o,l=_e(t,a.onTriggerChange),c=Kn(n),d=S.useRef("touch"),[u,f,p]=ic(g=>{const b=c().filter(x=>!x.disabled),m=b.find(x=>x.value===a.value),w=ac(b,g,m);w!==void 0&&a.onValueChange(w.value)}),y=g=>{s||(a.onOpenChange(!0),p()),g&&(a.triggerPointerDownPosRef.current={x:Math.round(g.pageX),y:Math.round(g.pageY)})};return h.jsx(dv,{asChild:!0,...i,children:h.jsx(se.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:s,"data-disabled":s?"":void 0,"data-placeholder":oc(a.value)?"":void 0,...r,ref:l,onClick:re(r.onClick,g=>{g.currentTarget.focus(),d.current!=="mouse"&&y(g)}),onPointerDown:re(r.onPointerDown,g=>{d.current=g.pointerType;const b=g.target;b.hasPointerCapture(g.pointerId)&&b.releasePointerCapture(g.pointerId),g.button===0&&g.ctrlKey===!1&&g.pointerType==="mouse"&&(y(g),g.preventDefault())}),onKeyDown:re(r.onKeyDown,g=>{const b=u.current!=="";!(g.ctrlKey||g.altKey||g.metaKey)&&g.key.length===1&&f(g.key),!(b&&g.key===" ")&&Z0.includes(g.key)&&(y(),g.preventDefault())})})})});zl.displayName=Rl;var Dl="SelectValue",Tl=S.forwardRef((e,t)=>{const{__scopeSelect:n,className:o,style:r,children:i,placeholder:a="",...s}=e,l=Ve(Dl,n),{onValueNodeHasChildrenChange:c}=l,d=i!==void 0,u=_e(t,l.onValueNodeChange);return He(()=>{c(d)},[c,d]),h.jsx(se.span,{...s,ref:u,style:{pointerEvents:"none"},children:oc(l.value)?h.jsx(h.Fragment,{children:a}):i})});Tl.displayName=Dl;var q0="SelectIcon",Ll=S.forwardRef((e,t)=>{const{__scopeSelect:n,children:o,...r}=e;return h.jsx(se.span,{"aria-hidden":!0,...r,ref:t,children:o||"\u25BC"})});Ll.displayName=q0;var Q0="SelectPortal",$l=e=>h.jsx(Hx,{asChild:!0,...e});$l.displayName=Q0;var qe="SelectContent",Vl=S.forwardRef((e,t)=>{const n=Ve(qe,e.__scopeSelect),[o,r]=S.useState();if(He(()=>{r(new DocumentFragment)},[]),!n.open){const i=o;return i?$r.createPortal(h.jsx(Bl,{scope:e.__scopeSelect,children:h.jsx(Xn.Slot,{scope:e.__scopeSelect,children:h.jsx("div",{children:e.children})})}),i):null}return h.jsx(Hl,{...e,ref:t})});Vl.displayName=qe;var Se=10,[Bl,Be]=ht(qe),J0="SelectContentImpl",Hl=S.forwardRef((e,t)=>{const{__scopeSelect:n,position:o="item-aligned",onCloseAutoFocus:r,onEscapeKeyDown:i,onPointerDownOutside:a,side:s,sideOffset:l,align:c,alignOffset:d,arrowPadding:u,collisionBoundary:f,collisionPadding:p,sticky:y,hideWhenDetached:g,avoidCollisions:b,...m}=e,w=Ve(qe,n),[x,v]=S.useState(null),[C,A]=S.useState(null),k=_e(t,V=>v(V)),[O,I]=S.useState(null),[R,$]=S.useState(null),D=Kn(n),[T,_]=S.useState(!1),j=S.useRef(!1);S.useEffect(()=>{if(x)return uv(x)},[x]),fv();const N=S.useCallback(V=>{const[L,...K]=D().map(X=>X.ref.current),[Z]=K.slice(-1),W=document.activeElement;for(const X of V)if(X===W||(X==null||X.scrollIntoView({block:"nearest"}),X===L&&C&&(C.scrollTop=0),X===Z&&C&&(C.scrollTop=C.scrollHeight),X==null||X.focus(),document.activeElement!==W))return},[D,C]),M=S.useCallback(()=>N([O,x]),[N,O,x]);S.useEffect(()=>{T&&M()},[T,M]);const{onOpenChange:E,triggerPointerDownPosRef:P}=w;S.useEffect(()=>{if(x){let V={x:0,y:0};const L=Z=>{var W,X;V={x:Math.abs(Math.round(Z.pageX)-(((W=P.current)==null?void 0:W.x)??0)),y:Math.abs(Math.round(Z.pageY)-(((X=P.current)==null?void 0:X.y)??0))}},K=Z=>{V.x<=10&&V.y<=10?Z.preventDefault():x.contains(Z.target)||E(!1),document.removeEventListener("pointermove",L),P.current=null};return P.current!==null&&(document.addEventListener("pointermove",L),document.addEventListener("pointerup",K,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",L),document.removeEventListener("pointerup",K,{capture:!0})}}},[x,E,P]),S.useEffect(()=>{const V=()=>E(!1);return window.addEventListener("blur",V),window.addEventListener("resize",V),()=>{window.removeEventListener("blur",V),window.removeEventListener("resize",V)}},[E]);const[z,B]=ic(V=>{const L=D().filter(W=>!W.disabled),K=L.find(W=>W.ref.current===document.activeElement),Z=ac(L,V,K);Z&&setTimeout(()=>Z.ref.current.focus())}),H=S.useCallback((V,L,K)=>{const Z=!j.current&&!K;(w.value!==void 0&&w.value===L||Z)&&(I(V),Z&&(j.current=!0))},[w.value]),G=S.useCallback(()=>x==null?void 0:x.focus(),[x]),F=S.useCallback((V,L,K)=>{const Z=!j.current&&!K;(w.value!==void 0&&w.value===L||Z)&&$(V)},[w.value]),Y=o==="popper"?xr:Fl,q=Y===xr?{side:s,sideOffset:l,align:c,alignOffset:d,arrowPadding:u,collisionBoundary:f,collisionPadding:p,sticky:y,hideWhenDetached:g,avoidCollisions:b}:{};return h.jsx(Bl,{scope:n,content:x,viewport:C,onViewportChange:A,itemRefCallback:H,selectedItem:O,onItemLeave:G,itemTextRefCallback:F,focusSelectedItem:M,selectedItemText:R,position:o,isPositioned:T,searchRef:z,children:h.jsx(hv,{as:Yx,allowPinchZoom:!0,children:h.jsx(pv,{asChild:!0,trapped:w.open,onMountAutoFocus:V=>{V.preventDefault()},onUnmountAutoFocus:re(r,V=>{var L;(L=w.trigger)==null||L.focus({preventScroll:!0}),V.preventDefault()}),children:h.jsx(Zx,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:a,onFocusOutside:V=>V.preventDefault(),onDismiss:()=>w.onOpenChange(!1),children:h.jsx(Y,{role:"listbox",id:w.contentId,"data-state":w.open?"open":"closed",dir:w.dir,onContextMenu:V=>V.preventDefault(),...m,...q,onPlaced:()=>_(!0),ref:k,style:{display:"flex",flexDirection:"column",outline:"none",...m.style},onKeyDown:re(m.onKeyDown,V=>{const L=V.ctrlKey||V.altKey||V.metaKey;if(V.key==="Tab"&&V.preventDefault(),!L&&V.key.length===1&&B(V.key),["ArrowUp","ArrowDown","Home","End"].includes(V.key)){let K=D().filter(Z=>!Z.disabled).map(Z=>Z.ref.current);if(["ArrowUp","End"].includes(V.key)&&(K=K.slice().reverse()),["ArrowUp","ArrowDown"].includes(V.key)){const Z=V.target,W=K.indexOf(Z);K=K.slice(W+1)}setTimeout(()=>N(K)),V.preventDefault()}})})})})})})});Hl.displayName=J0;var ey="SelectItemAlignedPosition",Fl=S.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:o,...r}=e,i=Ve(qe,n),a=Be(qe,n),[s,l]=S.useState(null),[c,d]=S.useState(null),u=_e(t,k=>d(k)),f=Kn(n),p=S.useRef(!1),y=S.useRef(!0),{viewport:g,selectedItem:b,selectedItemText:m,focusSelectedItem:w}=a,x=S.useCallback(()=>{if(i.trigger&&i.valueNode&&s&&c&&g&&b&&m){const k=i.trigger.getBoundingClientRect(),O=c.getBoundingClientRect(),I=i.valueNode.getBoundingClientRect(),R=m.getBoundingClientRect();if(i.dir!=="rtl"){const Z=R.left-O.left,W=I.left-Z,X=k.left-W,J=k.width+X,te=Math.max(J,O.width),ue=window.innerWidth-Se,Ee=Al(W,[Se,Math.max(Se,ue-te)]);s.style.minWidth=J+"px",s.style.left=Ee+"px"}else{const Z=O.right-R.right,W=window.innerWidth-I.right-Z,X=window.innerWidth-k.right-W,J=k.width+X,te=Math.max(J,O.width),ue=window.innerWidth-Se,Ee=Al(W,[Se,Math.max(Se,ue-te)]);s.style.minWidth=J+"px",s.style.right=Ee+"px"}const $=f(),D=window.innerHeight-Se*2,T=g.scrollHeight,_=window.getComputedStyle(c),j=parseInt(_.borderTopWidth,10),N=parseInt(_.paddingTop,10),M=parseInt(_.borderBottomWidth,10),E=parseInt(_.paddingBottom,10),P=j+N+T+E+M,z=Math.min(b.offsetHeight*5,P),B=window.getComputedStyle(g),H=parseInt(B.paddingTop,10),G=parseInt(B.paddingBottom,10),F=k.top+k.height/2-Se,Y=D-F,q=b.offsetHeight/2,V=b.offsetTop+q,L=j+N+V,K=P-L;if(L<=F){const Z=$.length>0&&b===$[$.length-1].ref.current;s.style.bottom="0px";const W=c.clientHeight-g.offsetTop-g.offsetHeight,X=Math.max(Y,q+(Z?G:0)+W+M),J=L+X;s.style.height=J+"px"}else{const Z=$.length>0&&b===$[0].ref.current;s.style.top="0px";const W=Math.max(F,j+g.offsetTop+(Z?H:0)+q)+K;s.style.height=W+"px",g.scrollTop=L-F+g.offsetTop}s.style.margin=`${Se}px 0`,s.style.minHeight=z+"px",s.style.maxHeight=D+"px",o==null||o(),requestAnimationFrame(()=>p.current=!0)}},[f,i.trigger,i.valueNode,s,c,g,b,m,i.dir,o]);He(()=>x(),[x]);const[v,C]=S.useState();He(()=>{c&&C(window.getComputedStyle(c).zIndex)},[c]);const A=S.useCallback(k=>{k&&y.current===!0&&(x(),w==null||w(),y.current=!1)},[x,w]);return h.jsx(ny,{scope:n,contentWrapper:s,shouldExpandOnScrollRef:p,onScrollButtonChange:A,children:h.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:v},children:h.jsx(se.div,{...r,ref:u,style:{boxSizing:"border-box",maxHeight:"100%",...r.style}})})})});Fl.displayName=ey;var ty="SelectPopperPosition",xr=S.forwardRef((e,t)=>{const{__scopeSelect:n,align:o="start",collisionPadding:r=Se,...i}=e,a=Wn(n);return h.jsx(mv,{...a,...i,ref:t,align:o,collisionPadding:r,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});xr.displayName=ty;var[ny,vr]=ht(qe,{}),wr="SelectViewport",Yl=S.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:o,...r}=e,i=Be(wr,n),a=vr(wr,n),s=_e(t,i.onViewportChange),l=S.useRef(0);return h.jsxs(h.Fragment,{children:[h.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:o}),h.jsx(Xn.Slot,{scope:n,children:h.jsx(se.div,{"data-radix-select-viewport":"",role:"presentation",...r,ref:s,style:{position:"relative",flex:1,overflow:"hidden auto",...r.style},onScroll:re(r.onScroll,c=>{const d=c.currentTarget,{contentWrapper:u,shouldExpandOnScrollRef:f}=a;if(f!=null&&f.current&&u){const p=Math.abs(l.current-d.scrollTop);if(p>0){const y=window.innerHeight-Se*2,g=parseFloat(u.style.minHeight),b=parseFloat(u.style.height),m=Math.max(g,b);if(m<y){const w=m+p,x=Math.min(y,w),v=w-x;u.style.height=x+"px",u.style.bottom==="0px"&&(d.scrollTop=v>0?v:0,u.style.justifyContent="flex-end")}}}l.current=d.scrollTop})})})]})});Yl.displayName=wr;var Zl="SelectGroup",[oy,ry]=ht(Zl),iy=S.forwardRef((e,t)=>{const{__scopeSelect:n,...o}=e,r=qt();return h.jsx(oy,{scope:n,id:r,children:h.jsx(se.div,{role:"group","aria-labelledby":r,...o,ref:t})})});iy.displayName=Zl;var Xl="SelectLabel",Kl=S.forwardRef((e,t)=>{const{__scopeSelect:n,...o}=e,r=ry(Xl,n);return h.jsx(se.div,{id:r.id,...o,ref:t})});Kl.displayName=Xl;var Gn="SelectItem",[ay,Wl]=ht(Gn),Gl=S.forwardRef((e,t)=>{const{__scopeSelect:n,value:o,disabled:r=!1,textValue:i,...a}=e,s=Ve(Gn,n),l=Be(Gn,n),c=s.value===o,[d,u]=S.useState(i??""),[f,p]=S.useState(!1),y=_e(t,w=>{var x;return(x=l.itemRefCallback)==null?void 0:x.call(l,w,o,r)}),g=qt(),b=S.useRef("touch"),m=()=>{r||(s.onValueChange(o),s.onOpenChange(!1))};if(o==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return h.jsx(ay,{scope:n,value:o,disabled:r,textId:g,isSelected:c,onItemTextChange:S.useCallback(w=>{u(x=>x||((w==null?void 0:w.textContent)??"").trim())},[]),children:h.jsx(Xn.ItemSlot,{scope:n,value:o,disabled:r,textValue:d,children:h.jsx(se.div,{role:"option","aria-labelledby":g,"data-highlighted":f?"":void 0,"aria-selected":c&&f,"data-state":c?"checked":"unchecked","aria-disabled":r||void 0,"data-disabled":r?"":void 0,tabIndex:r?void 0:-1,...a,ref:y,onFocus:re(a.onFocus,()=>p(!0)),onBlur:re(a.onBlur,()=>p(!1)),onClick:re(a.onClick,()=>{b.current!=="mouse"&&m()}),onPointerUp:re(a.onPointerUp,()=>{b.current==="mouse"&&m()}),onPointerDown:re(a.onPointerDown,w=>{b.current=w.pointerType}),onPointerMove:re(a.onPointerMove,w=>{var x;b.current=w.pointerType,r?(x=l.onItemLeave)==null||x.call(l):b.current==="mouse"&&w.currentTarget.focus({preventScroll:!0})}),onPointerLeave:re(a.onPointerLeave,w=>{var x;w.currentTarget===document.activeElement&&((x=l.onItemLeave)==null||x.call(l))}),onKeyDown:re(a.onKeyDown,w=>{var x;((x=l.searchRef)==null?void 0:x.current)!==""&&w.key===" "||(X0.includes(w.key)&&m(),w.key===" "&&w.preventDefault())})})})})});Gl.displayName=Gn;var Ft="SelectItemText",Ul=S.forwardRef((e,t)=>{const{__scopeSelect:n,className:o,style:r,...i}=e,a=Ve(Ft,n),s=Be(Ft,n),l=Wl(Ft,n),c=U0(Ft,n),[d,u]=S.useState(null),f=_e(t,m=>u(m),l.onItemTextChange,m=>{var w;return(w=s.itemTextRefCallback)==null?void 0:w.call(s,m,l.value,l.disabled)}),p=d==null?void 0:d.textContent,y=S.useMemo(()=>h.jsx("option",{value:l.value,disabled:l.disabled,children:p},l.value),[l.disabled,l.value,p]),{onNativeOptionAdd:g,onNativeOptionRemove:b}=c;return He(()=>(g(y),()=>b(y)),[g,b,y]),h.jsxs(h.Fragment,{children:[h.jsx(se.span,{id:l.textId,...i,ref:f}),l.isSelected&&a.valueNode&&!a.valueNodeHasChildren?$r.createPortal(i.children,a.valueNode):null]})});Ul.displayName=Ft;var ql="SelectItemIndicator",Ql=S.forwardRef((e,t)=>{const{__scopeSelect:n,...o}=e;return Wl(ql,n).isSelected?h.jsx(se.span,{"aria-hidden":!0,...o,ref:t}):null});Ql.displayName=ql;var br="SelectScrollUpButton",Jl=S.forwardRef((e,t)=>{const n=Be(br,e.__scopeSelect),o=vr(br,e.__scopeSelect),[r,i]=S.useState(!1),a=_e(t,o.onScrollButtonChange);return He(()=>{if(n.viewport&&n.isPositioned){let s=function(){const c=l.scrollTop>0;i(c)};const l=n.viewport;return s(),l.addEventListener("scroll",s),()=>l.removeEventListener("scroll",s)}},[n.viewport,n.isPositioned]),r?h.jsx(tc,{...e,ref:a,onAutoScroll:()=>{const{viewport:s,selectedItem:l}=n;s&&l&&(s.scrollTop=s.scrollTop-l.offsetHeight)}}):null});Jl.displayName=br;var Sr="SelectScrollDownButton",ec=S.forwardRef((e,t)=>{const n=Be(Sr,e.__scopeSelect),o=vr(Sr,e.__scopeSelect),[r,i]=S.useState(!1),a=_e(t,o.onScrollButtonChange);return He(()=>{if(n.viewport&&n.isPositioned){let s=function(){const c=l.scrollHeight-l.clientHeight,d=Math.ceil(l.scrollTop)<c;i(d)};const l=n.viewport;return s(),l.addEventListener("scroll",s),()=>l.removeEventListener("scroll",s)}},[n.viewport,n.isPositioned]),r?h.jsx(tc,{...e,ref:a,onAutoScroll:()=>{const{viewport:s,selectedItem:l}=n;s&&l&&(s.scrollTop=s.scrollTop+l.offsetHeight)}}):null});ec.displayName=Sr;var tc=S.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:o,...r}=e,i=Be("SelectScrollButton",n),a=S.useRef(null),s=Kn(n),l=S.useCallback(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return S.useEffect(()=>()=>l(),[l]),He(()=>{var c,d;(d=(c=s().find(u=>u.ref.current===document.activeElement))==null?void 0:c.ref.current)==null||d.scrollIntoView({block:"nearest"})},[s]),h.jsx(se.div,{"aria-hidden":!0,...r,ref:t,style:{flexShrink:0,...r.style},onPointerDown:re(r.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(o,50))}),onPointerMove:re(r.onPointerMove,()=>{var c;(c=i.onItemLeave)==null||c.call(i),a.current===null&&(a.current=window.setInterval(o,50))}),onPointerLeave:re(r.onPointerLeave,()=>{l()})})}),sy="SelectSeparator",nc=S.forwardRef((e,t)=>{const{__scopeSelect:n,...o}=e;return h.jsx(se.div,{"aria-hidden":!0,...o,ref:t})});nc.displayName=sy;var _r="SelectArrow",ly=S.forwardRef((e,t)=>{const{__scopeSelect:n,...o}=e,r=Wn(n),i=Ve(_r,n),a=Be(_r,n);return i.open&&a.position==="popper"?h.jsx(gv,{...r,...o,ref:t}):null});ly.displayName=_r;function oc(e){return e===""||e===void 0}var rc=S.forwardRef((e,t)=>{const{value:n,...o}=e,r=S.useRef(null),i=_e(t,r),a=Jx(n);return S.useEffect(()=>{const s=r.current,l=window.HTMLSelectElement.prototype,c=Object.getOwnPropertyDescriptor(l,"value").set;if(a!==n&&c){const d=new Event("change",{bubbles:!0});c.call(s,n),s.dispatchEvent(d)}},[a,n]),h.jsx(Bx,{asChild:!0,children:h.jsx("select",{...o,ref:i,defaultValue:n})})});rc.displayName="BubbleSelect";function ic(e){const t=Fx(e),n=S.useRef(""),o=S.useRef(0),r=S.useCallback(a=>{const s=n.current+a;t(s),function l(c){n.current=c,window.clearTimeout(o.current),c!==""&&(o.current=window.setTimeout(()=>l(""),1e3))}(s)},[t]),i=S.useCallback(()=>{n.current="",window.clearTimeout(o.current)},[]);return S.useEffect(()=>()=>window.clearTimeout(o.current),[]),[n,r,i]}function ac(e,t,n){const o=t.length>1&&Array.from(t).every(s=>s===t[0])?t[0]:t,r=n?e.indexOf(n):-1;let i=cy(e,Math.max(r,0));o.length===1&&(i=i.filter(s=>s!==n));const a=i.find(s=>s.textValue.toLowerCase().startsWith(o.toLowerCase()));return a!==n?a:void 0}function cy(e,t){return e.map((n,o)=>e[(t+o)%e.length])}var dy=Il,sc=zl,uy=Tl,fy=Ll,hy=$l,lc=Vl,py=Yl,cc=Kl,dc=Gl,my=Ul,gy=Ql,uc=Jl,fc=ec,hc=nc;Wr=dy,ii=uy,ho=S.forwardRef(({className:e,children:t,...n},o)=>h.jsxs(sc,{ref:o,className:Q("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...n,children:[t,h.jsx(fy,{asChild:!0,children:h.jsx(le,{name:"chevron-down",className:"h-4 w-4 opacity-50"})})]})),ho.displayName=sc.displayName;const pc=S.forwardRef(({className:e,...t},n)=>h.jsx(uc,{ref:n,className:Q("flex cursor-default items-center justify-center py-1",e),...t,children:h.jsx(le,{name:"chevron-up",className:"h-4 w-4"})}));pc.displayName=uc.displayName;const mc=S.forwardRef(({className:e,...t},n)=>h.jsx(fc,{ref:n,className:Q("flex cursor-default items-center justify-center py-1",e),...t,children:h.jsx(le,{name:"chevron-down",className:"h-4 w-4"})}));mc.displayName=fc.displayName,po=S.forwardRef(({className:e,children:t,position:n="popper",...o},r)=>h.jsx(hy,{children:h.jsxs(lc,{ref:r,className:Q("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...o,children:[h.jsx(pc,{}),h.jsx(py,{className:Q("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),h.jsx(mc,{})]})})),po.displayName=lc.displayName;const yy=S.forwardRef(({className:e,...t},n)=>h.jsx(cc,{ref:n,className:Q("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));yy.displayName=cc.displayName,mo=S.forwardRef(({className:e,children:t,...n},o)=>h.jsxs(dc,{ref:o,className:Q("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[h.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:h.jsx(gy,{children:h.jsx(le,{name:"check",className:"h-4 w-4"})})}),h.jsx(my,{children:t})]})),mo.displayName=dc.displayName;const xy=S.forwardRef(({className:e,...t},n)=>h.jsx(hc,{ref:n,className:Q("-mx-1 my-1 h-px bg-muted",e),...t}));xy.displayName=hc.displayName;var Re="Accordion",vy=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[Cr,wy,by]=Yc(Re),[Un,Hv]=Vr(Re,[by,ed]),Nr=ed(),gc=ge.forwardRef((e,t)=>{const{type:n,...o}=e,r=o,i=o;return h.jsx(Cr.Provider,{scope:e.__scopeAccordion,children:n==="multiple"?h.jsx(Ny,{...i,ref:t}):h.jsx(Cy,{...r,ref:t})})});gc.displayName=Re;var[yc,Sy]=Un(Re),[xc,_y]=Un(Re,{collapsible:!1}),Cy=ge.forwardRef((e,t)=>{const{value:n,defaultValue:o,onValueChange:r=()=>{},collapsible:i=!1,...a}=e,[s,l]=Ut({prop:n,defaultProp:o,onChange:r});return h.jsx(yc,{scope:e.__scopeAccordion,value:s?[s]:[],onItemOpen:l,onItemClose:ge.useCallback(()=>i&&l(""),[i,l]),children:h.jsx(xc,{scope:e.__scopeAccordion,collapsible:i,children:h.jsx(vc,{...a,ref:t})})})}),Ny=ge.forwardRef((e,t)=>{const{value:n,defaultValue:o,onValueChange:r=()=>{},...i}=e,[a=[],s]=Ut({prop:n,defaultProp:o,onChange:r}),l=ge.useCallback(d=>s((u=[])=>[...u,d]),[s]),c=ge.useCallback(d=>s((u=[])=>u.filter(f=>f!==d)),[s]);return h.jsx(yc,{scope:e.__scopeAccordion,value:a,onItemOpen:l,onItemClose:c,children:h.jsx(xc,{scope:e.__scopeAccordion,collapsible:!0,children:h.jsx(vc,{...i,ref:t})})})}),[Ey,qn]=Un(Re),vc=ge.forwardRef((e,t)=>{const{__scopeAccordion:n,disabled:o,dir:r,orientation:i="vertical",...a}=e,s=ge.useRef(null),l=_e(s,t),c=wy(n),d=Fr(r)==="ltr",u=re(e.onKeyDown,f=>{var k;if(!vy.includes(f.key))return;const p=f.target,y=c().filter(O=>{var I;return!((I=O.ref.current)!=null&&I.disabled)}),g=y.findIndex(O=>O.ref.current===p),b=y.length;if(g===-1)return;f.preventDefault();let m=g;const w=0,x=b-1,v=()=>{m=g+1,m>x&&(m=w)},C=()=>{m=g-1,m<w&&(m=x)};switch(f.key){case"Home":m=w;break;case"End":m=x;break;case"ArrowRight":i==="horizontal"&&(d?v():C());break;case"ArrowDown":i==="vertical"&&v();break;case"ArrowLeft":i==="horizontal"&&(d?C():v());break;case"ArrowUp":i==="vertical"&&C();break}const A=m%b;(k=y[A].ref.current)==null||k.focus()});return h.jsx(Ey,{scope:n,disabled:o,direction:r,orientation:i,children:h.jsx(Cr.Slot,{scope:n,children:h.jsx(se.div,{...a,"data-orientation":i,ref:l,onKeyDown:o?void 0:u})})})}),Qn="AccordionItem",[ky,Er]=Un(Qn),wc=ge.forwardRef((e,t)=>{const{__scopeAccordion:n,value:o,...r}=e,i=qn(Qn,n),a=Sy(Qn,n),s=Nr(n),l=qt(),c=o&&a.value.includes(o)||!1,d=i.disabled||e.disabled;return h.jsx(ky,{scope:n,open:c,disabled:d,triggerId:l,children:h.jsx(yv,{"data-orientation":i.orientation,"data-state":Ec(c),...s,...r,ref:t,disabled:d,open:c,onOpenChange:u=>{u?a.onItemOpen(o):a.onItemClose(o)}})})});wc.displayName=Qn;var bc="AccordionHeader",Sc=ge.forwardRef((e,t)=>{const{__scopeAccordion:n,...o}=e,r=qn(Re,n),i=Er(bc,n);return h.jsx(se.h3,{"data-orientation":r.orientation,"data-state":Ec(i.open),"data-disabled":i.disabled?"":void 0,...o,ref:t})});Sc.displayName=bc;var kr="AccordionTrigger",_c=ge.forwardRef((e,t)=>{const{__scopeAccordion:n,...o}=e,r=qn(Re,n),i=Er(kr,n),a=_y(kr,n),s=Nr(n);return h.jsx(Cr.ItemSlot,{scope:n,children:h.jsx(xv,{"aria-disabled":i.open&&!a.collapsible||void 0,"data-orientation":r.orientation,id:i.triggerId,...s,...o,ref:t})})});_c.displayName=kr;var Cc="AccordionContent",Nc=ge.forwardRef((e,t)=>{const{__scopeAccordion:n,...o}=e,r=qn(Re,n),i=Er(Cc,n),a=Nr(n);return h.jsx(vv,{role:"region","aria-labelledby":i.triggerId,"data-orientation":r.orientation,...a,...o,ref:t,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...e.style}})});Nc.displayName=Cc;function Ec(e){return e?"open":"closed"}var jy=gc,Py=wc,My=Sc,kc=_c,jc=Nc;ai=jy,yo=S.forwardRef(({className:e,...t},n)=>h.jsx(Py,{ref:n,className:Q("border-b",e),...t})),yo.displayName="AccordionItem",xo=S.forwardRef(({className:e,children:t,...n},o)=>h.jsx(My,{className:"flex",children:h.jsxs(kc,{ref:o,className:Q("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",e),...n,children:[t,h.jsx(le,{name:"chevron-down",className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})})),xo.displayName=kc.displayName,io=S.forwardRef(({className:e,children:t,...n},o)=>h.jsx(jc,{ref:o,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...n,children:h.jsx("div",{className:Q("pb-4 pt-0",e),children:t})})),io.displayName=jc.displayName;let Pc;Pc=[1,2,3,4,5,6,7,8,9,10],ld=S.memo(e=>{const{t}=ke("flows"),[n,o]=S.useState(""),[r,i]=S.useState([]),[a,s]=S.useState("1"),{loading:l,onSimilaritySearch:c,onCreatePrompt:d,onCreateRetriever:u}=e,f=async()=>{i(await c(n,+a)),o("")},p=async y=>{y.key==="Enter"&&!y.shiftKey&&(y.preventDefault(),f())};return h.jsxs("div",{className:"mt-4 max-w-full",children:[h.jsx("div",{className:"bg-black/5 dark:bg-white/5 rounded-xl relative",children:h.jsxs("div",{className:"relative px-2 py-1 pb-2",children:[h.jsxs(Wr,{value:`${a}`,onValueChange:y=>s(y),children:[h.jsx(ho,{className:"absolute left-0 !w-14 top-[2px] rounded-xl bg-transparent border-none focus:outline-none focus:ring-0 focus:border-opacity-0 focus:ring-transparent",children:h.jsx(ii,{placeholder:t("vector_database_node.k_select_placeholder")})}),h.jsx(po,{children:Pc.map(y=>h.jsx(mo,{value:`${y}`,children:y},`${y}`))})]}),h.jsx(od,{value:n,disabled:l,placeholder:t("vector_database_node.similarity_search_placeholder"),className:Q("w-full rounded-xl px-2 pl-11 border-none resize-none bg-transparent","min-h-8 max-h-8"),onKeyDown:p,onChange:y=>{o(y.target.value)}}),h.jsx("button",{type:"button",disabled:l,onClick:f,className:"absolute right-3 top-5 -translate-y-1/2 rounded-xl bg-black/5 dark:bg-white/5 p-1",children:h.jsx(le,{name:l?"loader-circle":"arrow-right",className:Q("w-4 h-4 dark:text-white",n?"opacity-100":"opacity-30",l?"animate-spin":"")})})]})}),h.jsx(ai,{type:"single",collapsible:!0,children:r==null?void 0:r.map(([y,g],b)=>h.jsxs(yo,{value:`${b}`,children:[h.jsxs(xo,{children:[`[${g.toFixed(2)}] ${y.pageContent}`.substring(0,32),"..."]}),h.jsx(io,{children:y.pageContent})]},`${b}`))}),h.jsxs("div",{className:"w-full mt-4 flex flex-col gap-1",children:[u?h.jsx(no,{disabled:l,onClick:u,className:"w-full",children:t("vector_database_node.to_retriever")}):void 0,r!=null&&r.length&&d?h.jsx(no,{disabled:l,onClick:()=>d(r),className:"w-full",children:t("vector_database_node.create_prompt")}):void 0]})]})}),bd=S.memo(({loading:e,onCreateData:t})=>{const{t:n}=ke("flows"),[o,r]=S.useState(""),[i,a]=S.useState(""),s=async()=>{i&&(await t({id:o,content:i}),r(""),a(""))};return h.jsxs("div",{className:"min-w-80",children:[h.jsxs("div",{className:"flex flex-col space-y-1.5 mt-3",children:[h.jsx(Fe,{htmlFor:"name",children:n("vector_database_node.add_text.id")}),h.jsx(gt,{value:o,disabled:e,onChange:l=>r(l.target.value||""),placeholder:n("vector_database_node.add_text.id_placeholder"),className:"mb-4"}),h.jsxs(Fe,{htmlFor:"name",children:[n("vector_database_node.add_text.content")," ",h.jsx("span",{className:"text-red-600",children:"*"})]}),h.jsx(od,{value:i,disabled:e,onChange:l=>a(l.target.value||""),placeholder:n("vector_database_node.add_text.content_placeholder")})]}),h.jsx("div",{className:"flex justify-between mt-6",children:h.jsx(td,{loading:e,disabled:!(i!=null&&i.length),onClick:s,className:"w-full",children:n("vector_database_node.add_text.add")})})]})}),qr=({className:e,size:t=200,duration:n=15,anchor:o=90,borderWidth:r=1.5,colorFrom:i="#ffaa40",colorTo:a="#9c40ff",delay:s=0})=>h.jsx("div",{style:{"--size":t,"--duration":n,"--anchor":o,"--border-width":r,"--color-from":i,"--color-to":a,"--delay":`-${s}s`},className:Q("pointer-events-none absolute inset-0 rounded-[inherit] [border:calc(var(--border-width)*1px)_solid_transparent]","![mask-clip:padding-box,border-box] ![mask-composite:intersect] [mask:linear-gradient(transparent,transparent),linear-gradient(white,white)]","after:absolute after:aspect-square after:w-[calc(var(--size)*1px)] after:animate-border-beam after:[animation-delay:var(--delay)] after:[background:linear-gradient(to_left,var(--color-from),var(--color-to),transparent)] after:[offset-anchor:calc(var(--anchor)*1%)_50%] after:[offset-path:rect(0_auto_auto_0_round_calc(var(--size)*1px))]",e)});function Oy({accept:e,maxSize:t}){const{t:n}=ke("atoms"),[o,r]=S.useState(""),[i,a]=S.useState(""),s=S.useRef(null),[l,c]=S.useState(0),d=f=>{var y;const p=(y=f.target.files)==null?void 0:y[0];u(p)},u=f=>{if(a(""),f){if(f.size>t*1024*1024){a(n("file_upload_input.errors.max_size",{maxSize:t,fileSize:(f.size/1024/1024).toFixed(2)}));return}const p=e==null?void 0:e.split(",").map(y=>y.replace(".","").trim());if(!f.type.match(e.replace("/*",""))&&!(p!=null&&p.some(y=>f.type.includes(y)))){a(n("file_upload_input.errors.accept",{accept:e}));return}return c(f.size),r(f.name),f}};return{fileName:o,error:i,fileInputRef:s,handleFileSelect:d,validateAndSetFile:u,clearFile:()=>{r(""),a(""),c(0),s.current&&(s.current.value="")},fileSize:l}}function Ay({file:e,setFile:t,loading:n,progress:o,fileOptions:r}){const{toast:i}=Xx(),{t:a}=ke("atoms"),[s,l]=S.useState(!1),{fileName:c,fileInputRef:d,clearFile:u,error:f,validateAndSetFile:p,fileSize:y}=Oy({accept:(r==null?void 0:r.accept)||"image/*",maxSize:(r==null?void 0:r.maxSize)||3});S.useEffect(()=>{e||u()},[u,e]),S.useEffect(()=>{f&&i({title:f,variant:"destructive"})},[f,i]);function g(v){const C=p(v);C&&t(C)}function b(v){v.preventDefault(),l(!1);const C=v.dataTransfer.files[0];C&&g(C)}function m(v){var A;const C=(A=v.target.files)==null?void 0:A[0];C&&g(C)}function w(){u(),t(void 0)}const x=S.useMemo(()=>{if(!e)return h.jsx("div",{className:"w-16 h-16 rounded-lg bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center",children:h.jsx(le,{name:"file-text",className:"w-8 h-8 text-zinc-400"})});const v=e.type.startsWith("image/");return h.jsx("div",{className:"relative w-16 h-16 rounded-lg overflow-hidden",children:v?h.jsx("img",{src:URL.createObjectURL(e),alt:"Preview",className:"w-full h-full object-cover"}):h.jsx(le,{className:"w-14 h-14",name:"file-text"})})},[e]);return h.jsx(h.Fragment,{children:h.jsxs("div",{className:Q("relative group cursor-pointer","rounded-lg border-2 border-dashed","transition-colors duration-200",s?"border-indigo-500 bg-indigo-50/50 dark:bg-indigo-500/10":"border-zinc-200 dark:border-zinc-800"),onDragOver:v=>{v.preventDefault(),l(!0)},onDragLeave:()=>l(!1),onDrop:b,onClick:()=>{var v;return(v=d.current)==null?void 0:v.click()},onKeyDown:v=>{var C;(v.key==="Enter"||v.key===" ")&&(v.preventDefault(),(C=d.current)==null||C.click())},"aria-label":"Upload file",children:[h.jsx("input",{ref:d,type:"file",disabled:n||!!(o&&o<1),accept:(r==null?void 0:r.accept)||"image/*",onChange:m,className:"hidden"}),h.jsx("div",{className:"p-8 space-y-4",children:c?h.jsxs("div",{className:"flex items-center gap-4",children:[x,h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsxs("p",{className:"text-sm font-medium truncate",children:[c||"No file selected"," ",h.jsx("span",{className:"text-xs text-zinc-500 leading-5",children:y?`(${(y/1024/1024).toFixed(2)} MB)`:""})]}),o&&o<1?h.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[h.jsxs("p",{children:[(o*100).toFixed(2)," %"]}),h.jsx("div",{className:"h-1 flex-1 bg-zinc-100 dark:bg-zinc-800 rounded-full overflow-hidden items-center flex",children:h.jsx("div",{className:"h-full bg-indigo-500 transition-all duration-200",style:{width:`${o*100}%`}})})]}):void 0]}),h.jsx("button",{type:"button",disabled:n||!!(o&&o<1),onClick:v=>{v.stopPropagation(),w()},className:"p-1 hover:bg-zinc-100 dark:hover:bg-zinc-800 rounded",children:h.jsx(le,{name:"x",className:"w-5 h-5 text-zinc-400"})}),o&&o<1?h.jsx(qr,{className:"rounded-lg"}):void 0]}):h.jsxs("div",{className:"flex flex-col items-center gap-2",children:[h.jsx(le,{name:"upload",className:"w-8 h-8 text-zinc-400 dark:text-zinc-500"}),h.jsx("p",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:a("file_upload_input.drop_file")})]})})]})})}let Mc;Mc=Fc("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),oo=S.forwardRef(({className:e,variant:t,...n},o)=>h.jsx("div",{ref:o,role:"alert",className:Q(Mc({variant:t}),e),...n})),oo.displayName="Alert",Ur=S.forwardRef(({className:e,...t},n)=>h.jsx("h5",{ref:n,className:Q("mb-1 font-medium leading-none tracking-tight",e),...t})),Ur.displayName="AlertTitle",Yr=S.forwardRef(({className:e,...t},n)=>h.jsx("div",{ref:n,className:Q("text-sm [&_p]:leading-relaxed",e),...t})),Yr.displayName="AlertDescription",id=function({onFileSubmit:e,fileOptions:t,progress:n,loading:o}){const{t:r}=ke("flows"),[i,a]=S.useState(),s=async()=>{i&&(await e(i),a(void 0))};return h.jsxs("div",{className:"w-full max-w-full space-y-2 mt-4",children:[h.jsxs("div",{className:"mb-6",children:[h.jsx(Ay,{progress:n,loading:o,fileOptions:t,setFile:a,file:i}),h.jsx(oo,{variant:"default",className:"mt-2 border-none max-w-96",children:r("vector_database_node.add_file.alert_file_size")})]}),h.jsx(td,{loading:o,disabled:!i,onClick:s,className:"w-full mt-4",children:r("vector_database_node.add_file.index")})]})},ao=S.forwardRef(({className:e,...t},n)=>h.jsx("div",{className:"relative w-full overflow-auto",children:h.jsx("table",{ref:n,className:Q("w-full caption-bottom text-sm",e),...t})})),ao.displayName="Table",so=S.forwardRef(({className:e,...t},n)=>h.jsx("thead",{ref:n,className:Q("[&_tr]:border-b",e),...t})),so.displayName="TableHeader",lo=S.forwardRef(({className:e,...t},n)=>h.jsx("tbody",{ref:n,className:Q("[&_tr:last-child]:border-0",e),...t})),lo.displayName="TableBody";const Iy=S.forwardRef(({className:e,...t},n)=>h.jsx("tfoot",{ref:n,className:Q("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));Iy.displayName="TableFooter",Qt=S.forwardRef(({className:e,...t},n)=>h.jsx("tr",{ref:n,className:Q("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t})),Qt.displayName="TableRow",Jt=S.forwardRef(({className:e,...t},n)=>h.jsx("th",{ref:n,className:Q("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t})),Jt.displayName="TableHead",en=S.forwardRef(({className:e,...t},n)=>h.jsx("td",{ref:n,className:Q("align-middle [&:has([role=checkbox])]:pr-0",e),...t})),en.displayName="TableCell";const Ry=S.forwardRef(({className:e,...t},n)=>h.jsx("caption",{ref:n,className:Q("mt-4 text-sm text-muted-foreground",e),...t}));Ry.displayName="TableCaption";const Oc=({className:e,...t})=>h.jsx("nav",{role:"navigation","aria-label":"pagination",className:Q("mx-auto flex w-full justify-center",e),...t});Oc.displayName="Pagination";const Ac=S.forwardRef(({className:e,...t},n)=>h.jsx("ul",{ref:n,className:Q("flex flex-row items-center gap-1",e),...t}));Ac.displayName="PaginationContent";const pt=S.forwardRef(({className:e,...t},n)=>h.jsx("li",{ref:n,className:Q("",e),...t}));pt.displayName="PaginationItem";const Jn=({className:e,isActive:t,size:n="icon",...o})=>h.jsx("a",{"aria-current":t?"page":void 0,className:Q(wv({variant:t?"outline":"ghost",size:n}),e),...o});Jn.displayName="PaginationLink";const Ic=({className:e,...t})=>{const{t:n}=ke("atoms");return h.jsxs(Jn,{"aria-label":"Go to previous page",size:"default",className:Q("gap-1 pl-2.5",e),...t,children:[h.jsx(le,{name:"chevron-left",className:"h-4 w-4"}),h.jsx("span",{children:n("pagination.previous")})]})};Ic.displayName="PaginationPrevious";const Rc=({className:e,...t})=>{const{t:n}=ke("atoms");return h.jsxs(Jn,{"aria-label":"Go to next page",size:"default",className:Q("gap-1 pr-2.5",e),...t,children:[h.jsx("span",{children:n("pagination.next")}),h.jsx(le,{name:"chevron-right",className:"h-4 w-4"})]})};Rc.displayName="PaginationNext";const jr=({className:e,...t})=>{const{t:n}=ke("atoms");return h.jsxs("span",{"aria-hidden":!0,className:Q("flex h-9 w-9 items-center justify-center",e),...t,children:[h.jsx(le,{name:"ellipsis",className:"h-4 w-4"}),h.jsx("span",{className:"sr-only",children:n("pagination.more_pages")})]})};jr.displayName="PaginationEllipsis",Qr=Kx(({title:e,content:t})=>{const n=Zc();return h.jsx(bv,{open:n.visible,onOpenChange:n.hide,children:h.jsxs(Sv,{className:"sm:max-w-2xl",children:[h.jsx(_v,{children:h.jsxs("div",{className:"flex",children:[h.jsx(le,{name:"file",className:"mr-2 h-4 w-4"}),h.jsx(Cv,{children:e})]})}),h.jsx("div",{className:"mx-auto w-full min-h-96 max-h-96 overflow-hidden",children:h.jsx("div",{className:"relative w-full h-full overflow-hidden rounded-xl p-1 border border-border",children:h.jsx("pre",{className:"break-all h-full overflow-y-auto bg-background font-mono text-xs w-full",children:t})})})]})})}),rd=S.memo(e=>{const{data:t,headers:n,limitLengthByColumns:o,showPerPage:r=7,paginationShowLimit:i=1,contentLengthLimit:a=64}=e,[s,l]=S.useState({page:1,maxPage:1}),c=Zc(Qr);S.useEffect(()=>{l(p=>({...p,maxPage:Math.ceil(t.length/r)}))},[t.length,r]);const d=S.useMemo(()=>t.slice((s.page-1)*r,s.page*r),[t,s.page,r]),u=S.useMemo(()=>{let p=!1,y=!1;return h.jsx(Oc,{className:"mt-4 mb-4 ml-4 mr-4 w-full",children:h.jsxs(Ac,{children:[s.page>1?h.jsx(pt,{onClick:()=>l(g=>({...g,page:g.page-1})),children:h.jsx(Ic,{})}):null,Array.from({length:s.maxPage},(g,b)=>{const m=b+1,w=b===0||b===s.maxPage-1;return!w&&m>s.page+i&&y?null:!w&&m>s.page+i?(y=!0,h.jsx(pt,{children:h.jsx(jr,{})},b)):!w&&m<s.page-i&&p?null:!w&&m<s.page-i?(p=!0,h.jsx(pt,{children:h.jsx(jr,{})},b)):h.jsx(pt,{onClick:()=>l(x=>({...x,page:m})),children:h.jsx(Jn,{isActive:b+1===s.page,children:b+1})},b)}),s.page<s.maxPage?h.jsx(pt,{onClick:()=>l(g=>({...g,page:g.page+1})),children:h.jsx(Rc,{})}):null]})})},[s.maxPage,s.page,i]),f=(p,y)=>{if(!p)return;const g=Array.isArray(p)?p:n.map(b=>p[b]);return h.jsxs(Qt,{children:[h.jsx(en,{children:h.jsx("div",{className:"font-bold",children:y+1})}),g.map((b,m)=>{const w=typeof b=="string"?b:JSON.stringify(b),x=n[m],v=(o==null?void 0:o[x])||a,C=w.length>v;return h.jsx(en,{className:"p-4",children:h.jsxs("div",{onClick:C?()=>c.show({title:x,content:w}):void 0,className:"flex gap-4",children:[C?`${w.substring(0,v)}...`:w,C?h.jsx(le,{className:"w-6 mt-[-2px]",name:"chevron-right"}):null]})},`${m}`)})]},`${y}`)};return h.jsxs(h.Fragment,{children:[h.jsxs(ao,{className:"w-full",children:[h.jsx(so,{children:h.jsxs(Qt,{children:[h.jsx(Jt,{},"index"),n?n.map(p=>h.jsx(Jt,{children:h.jsx("div",{className:"font-bold",children:p})},p)):void 0]})}),h.jsx(lo,{children:d!=null&&d.length?d==null?void 0:d.map(f):void 0})]}),u]})});var Pr,zc;function zy(){if(zc)return Pr;zc=1;var e=ev(),t=1/0,n=17976931348623157e292;function o(r){if(!r)return r===0?r:0;if(r=e(r),r===t||r===-t){var i=r<0?-1:1;return i*n}return r===r?r:0}return Pr=o,Pr}var Mr,Dc;function Dy(){if(Dc)return Mr;Dc=1;var e=zy();function t(n){var o=e(n),r=o%1;return o===o?r?o-r:o:0}return Mr=t,Mr}var Or,Tc;function Ty(){if(Tc)return Or;Tc=1;var e=nv(),t=tv(),n=Dy(),o=Math.ceil,r=Math.max;function i(a,s,l){(l?t(a,s,l):s===void 0)?s=1:s=r(n(s),0);var c=a==null?0:a.length;if(!c||s<1)return[];for(var d=0,u=0,f=Array(o(c/s));d<c;)f[u++]=e(a,d,d+=s);return f}return Or=i,Or}var Ly=Ty();fd=to(Ly)});export{Yr as $,oo as A,Zr as B,ro as C,rd as D,io as E,Xr as F,ao as G,so as H,id as I,Qt as J,Jt as K,ad as L,sd as M,lo as N,en as O,Qe as P,tn as Q,Kr as R,Wr as S,Gr as T,yt as U,ld as V,cd as W,U as X,dd as Y,ud as Z,Ur as _,$v as __tla,fd as a,qr as a0,nn as a1,on as a2,Qr as a3,Jr as a4,hd as a5,xt as a6,pd as a7,rn as a8,ne as a9,md as aa,ee as ab,gd as ac,an as ad,Ye as ae,yd as af,Ze as ag,xd as ah,ze as ai,vd as aj,wd as ak,bd as b,ei as c,Sd as d,ti as e,ni as f,oi as g,_d as h,ye as i,Cd as j,ri as k,Nd as l,Ed as m,co as n,uo as o,fo as p,ho as q,Je as r,ii as s,po as t,kd as u,mo as v,go as w,ai as x,yo as y,xo as z};
