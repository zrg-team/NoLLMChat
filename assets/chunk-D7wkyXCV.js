const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/few_shot-DSFoxqCq.js","assets/routes-BC22d4F8.js","assets/index-D_ELiTRG.js","assets/index-BHmW4Jet.css","assets/toNumber-DGeRjXqq.js","assets/LLMIcon-mV0klbiM.js","assets/dot-BZFBpF5w.js","assets/createLucideIcon-DAzac-JV.js","assets/popover-exEqeTvl.js","assets/index-Dzfaeq0k.js","assets/index-B_J6TCQY.js","assets/objectWithoutPropertiesLoose-BjXSgPXB.js","assets/index-DQRWcfCS.js","assets/index-Cr8Tc6mT.css","assets/pdf-Cli72Pte.js"])))=>i.map(i=>d[i]);
import{G as ro,E as ge,r as S,j as h,a as Fr,q as gt,_ as qt,s as Dx,g as Q,o as ke,L as ce,h as Zc,c as Zr,b as Qt,P as se,d as re,e as Tx,A as Yc,f as _e,u as Fe,S as Lx,D as $x,Z as Vx,i as Bx,l as Hx,y as Fx,w as Zx,x as Xc,__tla as Yx}from"./index-D_ELiTRG.js";import{r as Kc,a as Xx,b as Kx,c as Wx,u as Gx,d as Ux,e as qx,f as Qx,g as Jx}from"./toNumber-DGeRjXqq.js";import{F as le,ao as ev,g as ae,u as Yr,y as Wc,T as tv,ap as Gc,af as Re,aq as Uc,M as nv,ar as qc,B as io,as as Ze,at as yt,D as Qc,au as Jc,av as Xr,aw as Jt,ax as ov,ay as rv,az as ed,aA as iv,aB as av,aC as sv,aD as lv,aE as cv,aF as dv,aG as uv,aH as fv,aI as td,aJ as hv,aK as pv,aL as mv,L as nd,aM as gv,k as yv,l as xv,m as vv,n as wv,__tla as bv}from"./routes-BC22d4F8.js";import{I as Sv,e as _v,g as Ev,O as Nv,w as Cv,G as kv,f as Pv,h as Mv,i as od,__tla as jv}from"./LLMIcon-mV0klbiM.js";import{P as Av,a as Ov,b as Iv,T as rd,__tla as zv}from"./popover-exEqeTvl.js";let Kr,ao,ye,so,id,en,Wr,lo,tn,ad,nn,xt,sd,ld,U,cd,Je,dd,Gr,Ur,qr,Qr,ud,fd,Jr,ei,on,rn,hd,ti,pd,vt,md,an,ee,ne,gd,yd,sn,Ye,xd,Xe,vd,De,wd,bd,ni,oi,et,co,ri,ii,uo,fo,Sd,_d,ai,si,li,Ed,ci,Nd,Cd,ho,po,mo,go,di,yo,xo,vo,ui,wo,kd,bo,So,_o,Eo,ln,Rv=Promise.all([(()=>{try{return Yx}catch{}})(),(()=>{try{return bv}catch{}})(),(()=>{try{return jv}catch{}})(),(()=>{try{return zv}catch{}})()]).then(async()=>{let No,fi;Wr=(e=>(e.VECTOR_DATABASE_RETREIVER="VECTOR_DATABASE_RETREIVER",e.DEFAULT_EMBEDDING_MODEL="DEFAULT_EMBEDDING_MODEL",e))(Wr||{});function Pd(){if(fi)return No;fi=1;var e="Expected a function";function t(n){if(typeof n!="function")throw new TypeError(e);return function(){var o=arguments;switch(o.length){case 0:return!n.call(this);case 1:return!n.call(this,o[0]);case 2:return!n.call(this,o[0],o[1]);case 3:return!n.call(this,o[0],o[1],o[2])}return!n.apply(this,o)}}return No=t,No}var Co,hi;function Md(){if(hi)return Co;hi=1;var e=Wx(),t=Kc(),n=Xx(),o=Kx();function r(i,a){if(i==null)return{};var s=e(o(i),function(l){return[l]});return a=t(a),n(i,s,function(l,c){return a(l,c[0])})}return Co=r,Co}var ko,pi;function jd(){if(pi)return ko;pi=1;var e=Kc(),t=Pd(),n=Md();function o(r,i){return n(r,t(e(i)))}return ko=o,ko}var Ad=jd();on=ro(Ad);var Po,mi;function Od(){if(mi)return Po;mi=1;function e(t){return t===void 0}return Po=e,Po}var Id=Od();rn=ro(Id);function ie(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,o;n<e.length;n++)(o=ie(e[n]))!==""&&(t+=(t&&" ")+o);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var zd={value:()=>{}};function cn(){for(var e=0,t=arguments.length,n={},o;e<t;++e){if(!(o=arguments[e]+"")||o in n||/[\s.]/.test(o))throw new Error("illegal type: "+o);n[o]=[]}return new dn(n)}function dn(e){this._=e}function Rd(e,t){return e.trim().split(/^|\s+/).map(function(n){var o="",r=n.indexOf(".");if(r>=0&&(o=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:o}})}dn.prototype=cn.prototype={constructor:dn,on:function(e,t){var n=this._,o=Rd(e+"",n),r,i=-1,a=o.length;if(arguments.length<2){for(;++i<a;)if((r=(e=o[i]).type)&&(r=Dd(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++i<a;)if(r=(e=o[i]).type)n[r]=gi(n[r],e.name,t);else if(t==null)for(r in n)n[r]=gi(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new dn(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),o=0,r,i;o<r;++o)n[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=this._[e],o=0,r=i.length;o<r;++o)i[o].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)}};function Dd(e,t){for(var n=0,o=e.length,r;n<o;++n)if((r=e[n]).name===t)return r.value}function gi(e,t,n){for(var o=0,r=e.length;o<r;++o)if(e[o].name===t){e[o]=zd,e=e.slice(0,o).concat(e.slice(o+1));break}return n!=null&&e.push({name:t,value:n}),e}var Mo="http://www.w3.org/1999/xhtml";const yi={svg:"http://www.w3.org/2000/svg",xhtml:Mo,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function un(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),yi.hasOwnProperty(t)?{space:yi[t],local:e}:e}function Td(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Mo&&t.documentElement.namespaceURI===Mo?t.createElement(e):t.createElementNS(n,e)}}function Ld(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function xi(e){var t=un(e);return(t.local?Ld:Td)(t)}function $d(){}function jo(e){return e==null?$d:function(){return this.querySelector(e)}}function Vd(e){typeof e!="function"&&(e=jo(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i=t[r],a=i.length,s=o[r]=new Array(a),l,c,d=0;d<a;++d)(l=i[d])&&(c=e.call(l,l.__data__,d,i))&&("__data__"in l&&(c.__data__=l.__data__),s[d]=c);return new pe(o,this._parents)}function Bd(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Hd(){return[]}function vi(e){return e==null?Hd:function(){return this.querySelectorAll(e)}}function Fd(e){return function(){return Bd(e.apply(this,arguments))}}function Zd(e){typeof e=="function"?e=Fd(e):e=vi(e);for(var t=this._groups,n=t.length,o=[],r=[],i=0;i<n;++i)for(var a=t[i],s=a.length,l,c=0;c<s;++c)(l=a[c])&&(o.push(e.call(l,l.__data__,c,a)),r.push(l));return new pe(o,r)}function wi(e){return function(){return this.matches(e)}}function bi(e){return function(t){return t.matches(e)}}var Yd=Array.prototype.find;function Xd(e){return function(){return Yd.call(this.children,e)}}function Kd(){return this.firstElementChild}function Wd(e){return this.select(e==null?Kd:Xd(typeof e=="function"?e:bi(e)))}var Gd=Array.prototype.filter;function Ud(){return Array.from(this.children)}function qd(e){return function(){return Gd.call(this.children,e)}}function Qd(e){return this.selectAll(e==null?Ud:qd(typeof e=="function"?e:bi(e)))}function Jd(e){typeof e!="function"&&(e=wi(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i=t[r],a=i.length,s=o[r]=[],l,c=0;c<a;++c)(l=i[c])&&e.call(l,l.__data__,c,i)&&s.push(l);return new pe(o,this._parents)}function Si(e){return new Array(e.length)}function eu(){return new pe(this._enter||this._groups.map(Si),this._parents)}function fn(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}fn.prototype={constructor:fn,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function tu(e){return function(){return e}}function nu(e,t,n,o,r,i){for(var a=0,s,l=t.length,c=i.length;a<c;++a)(s=t[a])?(s.__data__=i[a],o[a]=s):n[a]=new fn(e,i[a]);for(;a<l;++a)(s=t[a])&&(r[a]=s)}function ou(e,t,n,o,r,i,a){var s,l,c=new Map,d=t.length,u=i.length,f=new Array(d),p;for(s=0;s<d;++s)(l=t[s])&&(f[s]=p=a.call(l,l.__data__,s,t)+"",c.has(p)?r[s]=l:c.set(p,l));for(s=0;s<u;++s)p=a.call(e,i[s],s,i)+"",(l=c.get(p))?(o[s]=l,l.__data__=i[s],c.delete(p)):n[s]=new fn(e,i[s]);for(s=0;s<d;++s)(l=t[s])&&c.get(f[s])===l&&(r[s]=l)}function ru(e){return e.__data__}function iu(e,t){if(!arguments.length)return Array.from(this,ru);var n=t?ou:nu,o=this._parents,r=this._groups;typeof e!="function"&&(e=tu(e));for(var i=r.length,a=new Array(i),s=new Array(i),l=new Array(i),c=0;c<i;++c){var d=o[c],u=r[c],f=u.length,p=au(e.call(d,d&&d.__data__,c,o)),y=p.length,g=s[c]=new Array(y),b=a[c]=new Array(y),m=l[c]=new Array(f);n(d,u,g,b,m,p,t);for(var w=0,x=0,v,E;w<y;++w)if(v=g[w]){for(w>=x&&(x=w+1);!(E=b[x])&&++x<y;);v._next=E||null}}return a=new pe(a,o),a._enter=s,a._exit=l,a}function au(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function su(){return new pe(this._exit||this._groups.map(Si),this._parents)}function lu(e,t,n){var o=this.enter(),r=this,i=this.exit();return typeof e=="function"?(o=e(o),o&&(o=o.selection())):o=o.append(e+""),t!=null&&(r=t(r),r&&(r=r.selection())),n==null?i.remove():n(i),o&&r?o.merge(r).order():r}function cu(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,r=n.length,i=o.length,a=Math.min(r,i),s=new Array(r),l=0;l<a;++l)for(var c=n[l],d=o[l],u=c.length,f=s[l]=new Array(u),p,y=0;y<u;++y)(p=c[y]||d[y])&&(f[y]=p);for(;l<r;++l)s[l]=n[l];return new pe(s,this._parents)}function du(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o=e[t],r=o.length-1,i=o[r],a;--r>=0;)(a=o[r])&&(i&&a.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(a,i),i=a);return this}function uu(e){e||(e=fu);function t(u,f){return u&&f?e(u.__data__,f.__data__):!u-!f}for(var n=this._groups,o=n.length,r=new Array(o),i=0;i<o;++i){for(var a=n[i],s=a.length,l=r[i]=new Array(s),c,d=0;d<s;++d)(c=a[d])&&(l[d]=c);l.sort(t)}return new pe(r,this._parents).order()}function fu(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function hu(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function pu(){return Array.from(this)}function mu(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],r=0,i=o.length;r<i;++r){var a=o[r];if(a)return a}return null}function gu(){let e=0;for(const t of this)++e;return e}function yu(){return!this.node()}function xu(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var r=t[n],i=0,a=r.length,s;i<a;++i)(s=r[i])&&e.call(s,s.__data__,i,r);return this}function vu(e){return function(){this.removeAttribute(e)}}function wu(e){return function(){this.removeAttributeNS(e.space,e.local)}}function bu(e,t){return function(){this.setAttribute(e,t)}}function Su(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function _u(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Eu(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Nu(e,t){var n=un(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((t==null?n.local?wu:vu:typeof t=="function"?n.local?Eu:_u:n.local?Su:bu)(n,t))}function _i(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Cu(e){return function(){this.style.removeProperty(e)}}function ku(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Pu(e,t,n){return function(){var o=t.apply(this,arguments);o==null?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function Mu(e,t,n){return arguments.length>1?this.each((t==null?Cu:typeof t=="function"?Pu:ku)(e,t,n??"")):tt(this.node(),e)}function tt(e,t){return e.style.getPropertyValue(t)||_i(e).getComputedStyle(e,null).getPropertyValue(t)}function ju(e){return function(){delete this[e]}}function Au(e,t){return function(){this[e]=t}}function Ou(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Iu(e,t){return arguments.length>1?this.each((t==null?ju:typeof t=="function"?Ou:Au)(e,t)):this.node()[e]}function Ei(e){return e.trim().split(/^|\s+/)}function Ao(e){return e.classList||new Ni(e)}function Ni(e){this._node=e,this._names=Ei(e.getAttribute("class")||"")}Ni.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Ci(e,t){for(var n=Ao(e),o=-1,r=t.length;++o<r;)n.add(t[o])}function ki(e,t){for(var n=Ao(e),o=-1,r=t.length;++o<r;)n.remove(t[o])}function zu(e){return function(){Ci(this,e)}}function Ru(e){return function(){ki(this,e)}}function Du(e,t){return function(){(t.apply(this,arguments)?Ci:ki)(this,e)}}function Tu(e,t){var n=Ei(e+"");if(arguments.length<2){for(var o=Ao(this.node()),r=-1,i=n.length;++r<i;)if(!o.contains(n[r]))return!1;return!0}return this.each((typeof t=="function"?Du:t?zu:Ru)(n,t))}function Lu(){this.textContent=""}function $u(e){return function(){this.textContent=e}}function Vu(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Bu(e){return arguments.length?this.each(e==null?Lu:(typeof e=="function"?Vu:$u)(e)):this.node().textContent}function Hu(){this.innerHTML=""}function Fu(e){return function(){this.innerHTML=e}}function Zu(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Yu(e){return arguments.length?this.each(e==null?Hu:(typeof e=="function"?Zu:Fu)(e)):this.node().innerHTML}function Xu(){this.nextSibling&&this.parentNode.appendChild(this)}function Ku(){return this.each(Xu)}function Wu(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Gu(){return this.each(Wu)}function Uu(e){var t=typeof e=="function"?e:xi(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function qu(){return null}function Qu(e,t){var n=typeof e=="function"?e:xi(e),o=t==null?qu:typeof t=="function"?t:jo(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)})}function Ju(){var e=this.parentNode;e&&e.removeChild(this)}function ef(){return this.each(Ju)}function tf(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function nf(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function of(e){return this.select(e?nf:tf)}function rf(e){return arguments.length?this.property("__data__",e):this.node().__data__}function af(e){return function(t){e.call(this,t,this.__data__)}}function sf(e){return e.trim().split(/^|\s+/).map(function(t){var n="",o=t.indexOf(".");return o>=0&&(n=t.slice(o+1),t=t.slice(0,o)),{type:t,name:n}})}function lf(e){return function(){var t=this.__on;if(t){for(var n=0,o=-1,r=t.length,i;n<r;++n)i=t[n],(!e.type||i.type===e.type)&&i.name===e.name?this.removeEventListener(i.type,i.listener,i.options):t[++o]=i;++o?t.length=o:delete this.__on}}}function cf(e,t,n){return function(){var o=this.__on,r,i=af(t);if(o){for(var a=0,s=o.length;a<s;++a)if((r=o[a]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=i,r.options=n),r.value=t;return}}this.addEventListener(e.type,i,n),r={type:e.type,name:e.name,value:t,listener:i,options:n},o?o.push(r):this.__on=[r]}}function df(e,t,n){var o=sf(e+""),r,i=o.length,a;if(arguments.length<2){var s=this.node().__on;if(s){for(var l=0,c=s.length,d;l<c;++l)for(r=0,d=s[l];r<i;++r)if((a=o[r]).type===d.type&&a.name===d.name)return d.value}return}for(s=t?cf:lf,r=0;r<i;++r)this.each(s(o[r],t,n));return this}function Pi(e,t,n){var o=_i(e),r=o.CustomEvent;typeof r=="function"?r=new r(t,n):(r=o.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function uf(e,t){return function(){return Pi(this,e,t)}}function ff(e,t){return function(){return Pi(this,e,t.apply(this,arguments))}}function hf(e,t){return this.each((typeof t=="function"?ff:uf)(e,t))}function*pf(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],r=0,i=o.length,a;r<i;++r)(a=o[r])&&(yield a)}var Mi=[null];function pe(e,t){this._groups=e,this._parents=t}function wt(){return new pe([[document.documentElement]],Mi)}function mf(){return this}pe.prototype=wt.prototype={constructor:pe,select:Vd,selectAll:Zd,selectChild:Wd,selectChildren:Qd,filter:Jd,data:iu,enter:eu,exit:su,join:lu,merge:cu,selection:mf,order:du,sort:uu,call:hu,nodes:pu,node:mu,size:gu,empty:yu,each:xu,attr:Nu,style:Mu,property:Iu,classed:Tu,text:Bu,html:Yu,raise:Ku,lower:Gu,append:Uu,insert:Qu,remove:ef,clone:of,datum:rf,on:df,dispatch:hf,[Symbol.iterator]:pf};function me(e){return typeof e=="string"?new pe([[document.querySelector(e)]],[document.documentElement]):new pe([[e]],Mi)}function gf(e){let t;for(;t=e.sourceEvent;)e=t;return e}function xe(e,t){if(e=gf(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,o=o.matrixTransform(t.getScreenCTM().inverse()),[o.x,o.y]}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}}return[e.pageX,e.pageY]}const yf={passive:!1},bt={capture:!0,passive:!1};function Oo(e){e.stopImmediatePropagation()}function nt(e){e.preventDefault(),e.stopImmediatePropagation()}function ji(e){var t=e.document.documentElement,n=me(e).on("dragstart.drag",nt,bt);"onselectstart"in t?n.on("selectstart.drag",nt,bt):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Ai(e,t){var n=e.document.documentElement,o=me(e).on("dragstart.drag",null);t&&(o.on("click.drag",nt,bt),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const hn=e=>()=>e;function Io(e,{sourceEvent:t,subject:n,target:o,identifier:r,active:i,x:a,y:s,dx:l,dy:c,dispatch:d}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:i,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:d}})}Io.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function xf(e){return!e.ctrlKey&&!e.button}function vf(){return this.parentNode}function wf(e,t){return t??{x:e.x,y:e.y}}function bf(){return navigator.maxTouchPoints||"ontouchstart"in this}function Oi(){var e=xf,t=vf,n=wf,o=bf,r={},i=cn("start","drag","end"),a=0,s,l,c,d,u=0;function f(v){v.on("mousedown.drag",p).filter(o).on("touchstart.drag",b).on("touchmove.drag",m,yf).on("touchend.drag touchcancel.drag",w).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(v,E){if(!(d||!e.call(this,v,E))){var O=x(this,t.call(this,v,E),v,E,"mouse");O&&(me(v.view).on("mousemove.drag",y,bt).on("mouseup.drag",g,bt),ji(v.view),Oo(v),c=!1,s=v.clientX,l=v.clientY,O("start",v))}}function y(v){if(nt(v),!c){var E=v.clientX-s,O=v.clientY-l;c=E*E+O*O>u}r.mouse("drag",v)}function g(v){me(v.view).on("mousemove.drag mouseup.drag",null),Ai(v.view,c),nt(v),r.mouse("end",v)}function b(v,E){if(e.call(this,v,E)){var O=v.changedTouches,k=t.call(this,v,E),A=O.length,I,z;for(I=0;I<A;++I)(z=x(this,k,v,E,O[I].identifier,O[I]))&&(Oo(v),z("start",v,O[I]))}}function m(v){var E=v.changedTouches,O=E.length,k,A;for(k=0;k<O;++k)(A=r[E[k].identifier])&&(nt(v),A("drag",v,E[k]))}function w(v){var E=v.changedTouches,O=E.length,k,A;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),k=0;k<O;++k)(A=r[E[k].identifier])&&(Oo(v),A("end",v,E[k]))}function x(v,E,O,k,A,I){var z=i.copy(),$=xe(I||O,E),D,T,_;if((_=n.call(v,new Io("beforestart",{sourceEvent:O,target:f,identifier:A,active:a,x:$[0],y:$[1],dx:0,dy:0,dispatch:z}),k))!=null)return D=_.x-$[0]||0,T=_.y-$[1]||0,function P(N,j,C){var M=$,R;switch(N){case"start":r[A]=P,R=a++;break;case"end":delete r[A],--a;case"drag":$=xe(C||j,E),R=a;break}z.call(N,v,new Io(N,{sourceEvent:j,subject:_,target:f,identifier:A,active:R,x:$[0]+D,y:$[1]+T,dx:$[0]-M[0],dy:$[1]-M[1],dispatch:z}),k)}}return f.filter=function(v){return arguments.length?(e=typeof v=="function"?v:hn(!!v),f):e},f.container=function(v){return arguments.length?(t=typeof v=="function"?v:hn(v),f):t},f.subject=function(v){return arguments.length?(n=typeof v=="function"?v:hn(v),f):n},f.touchable=function(v){return arguments.length?(o=typeof v=="function"?v:hn(!!v),f):o},f.on=function(){var v=i.on.apply(i,arguments);return v===i?f:v},f.clickDistance=function(v){return arguments.length?(u=(v=+v)*v,f):Math.sqrt(u)},f}function zo(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Ii(e,t){var n=Object.create(e.prototype);for(var o in t)n[o]=t[o];return n}function St(){}var _t=.7,pn=1/_t,ot="\\s*([+-]?\\d+)\\s*",Et="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ee="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Sf=/^#([0-9a-f]{3,8})$/,_f=new RegExp(`^rgb\\(${ot},${ot},${ot}\\)$`),Ef=new RegExp(`^rgb\\(${Ee},${Ee},${Ee}\\)$`),Nf=new RegExp(`^rgba\\(${ot},${ot},${ot},${Et}\\)$`),Cf=new RegExp(`^rgba\\(${Ee},${Ee},${Ee},${Et}\\)$`),kf=new RegExp(`^hsl\\(${Et},${Ee},${Ee}\\)$`),Pf=new RegExp(`^hsla\\(${Et},${Ee},${Ee},${Et}\\)$`),zi={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};zo(St,Nt,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Ri,formatHex:Ri,formatHex8:Mf,formatHsl:jf,formatRgb:Di,toString:Di});function Ri(){return this.rgb().formatHex()}function Mf(){return this.rgb().formatHex8()}function jf(){return Bi(this).formatHsl()}function Di(){return this.rgb().formatRgb()}function Nt(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Sf.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Ti(t):n===3?new fe(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?mn(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?mn(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=_f.exec(e))?new fe(t[1],t[2],t[3],1):(t=Ef.exec(e))?new fe(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Nf.exec(e))?mn(t[1],t[2],t[3],t[4]):(t=Cf.exec(e))?mn(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=kf.exec(e))?Vi(t[1],t[2]/100,t[3]/100,1):(t=Pf.exec(e))?Vi(t[1],t[2]/100,t[3]/100,t[4]):zi.hasOwnProperty(e)?Ti(zi[e]):e==="transparent"?new fe(NaN,NaN,NaN,0):null}function Ti(e){return new fe(e>>16&255,e>>8&255,e&255,1)}function mn(e,t,n,o){return o<=0&&(e=t=n=NaN),new fe(e,t,n,o)}function Af(e){return e instanceof St||(e=Nt(e)),e?(e=e.rgb(),new fe(e.r,e.g,e.b,e.opacity)):new fe}function Ro(e,t,n,o){return arguments.length===1?Af(e):new fe(e,t,n,o??1)}function fe(e,t,n,o){this.r=+e,this.g=+t,this.b=+n,this.opacity=+o}zo(fe,Ro,Ii(St,{brighter(e){return e=e==null?pn:Math.pow(pn,e),new fe(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?_t:Math.pow(_t,e),new fe(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new fe(Ke(this.r),Ke(this.g),Ke(this.b),gn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Li,formatHex:Li,formatHex8:Of,formatRgb:$i,toString:$i}));function Li(){return`#${We(this.r)}${We(this.g)}${We(this.b)}`}function Of(){return`#${We(this.r)}${We(this.g)}${We(this.b)}${We((isNaN(this.opacity)?1:this.opacity)*255)}`}function $i(){const e=gn(this.opacity);return`${e===1?"rgb(":"rgba("}${Ke(this.r)}, ${Ke(this.g)}, ${Ke(this.b)}${e===1?")":`, ${e})`}`}function gn(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Ke(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function We(e){return e=Ke(e),(e<16?"0":"")+e.toString(16)}function Vi(e,t,n,o){return o<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ve(e,t,n,o)}function Bi(e){if(e instanceof ve)return new ve(e.h,e.s,e.l,e.opacity);if(e instanceof St||(e=Nt(e)),!e)return new ve;if(e instanceof ve)return e;e=e.rgb();var t=e.r/255,n=e.g/255,o=e.b/255,r=Math.min(t,n,o),i=Math.max(t,n,o),a=NaN,s=i-r,l=(i+r)/2;return s?(t===i?a=(n-o)/s+(n<o)*6:n===i?a=(o-t)/s+2:a=(t-n)/s+4,s/=l<.5?i+r:2-i-r,a*=60):s=l>0&&l<1?0:a,new ve(a,s,l,e.opacity)}function If(e,t,n,o){return arguments.length===1?Bi(e):new ve(e,t,n,o??1)}function ve(e,t,n,o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}zo(ve,If,Ii(St,{brighter(e){return e=e==null?pn:Math.pow(pn,e),new ve(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?_t:Math.pow(_t,e),new ve(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*t,r=2*n-o;return new fe(Do(e>=240?e-240:e+120,r,o),Do(e,r,o),Do(e<120?e+240:e-120,r,o),this.opacity)},clamp(){return new ve(Hi(this.h),yn(this.s),yn(this.l),gn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=gn(this.opacity);return`${e===1?"hsl(":"hsla("}${Hi(this.h)}, ${yn(this.s)*100}%, ${yn(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Hi(e){return e=(e||0)%360,e<0?e+360:e}function yn(e){return Math.max(0,Math.min(1,e||0))}function Do(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Fi=e=>()=>e;function zf(e,t){return function(n){return e+n*t}}function Rf(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(o){return Math.pow(e+o*t,n)}}function Df(e){return(e=+e)==1?Zi:function(t,n){return n-t?Rf(t,n,e):Fi(isNaN(t)?n:t)}}function Zi(e,t){var n=t-e;return n?zf(e,n):Fi(isNaN(e)?t:e)}const Yi=function e(t){var n=Df(t);function o(r,i){var a=n((r=Ro(r)).r,(i=Ro(i)).r),s=n(r.g,i.g),l=n(r.b,i.b),c=Zi(r.opacity,i.opacity);return function(d){return r.r=a(d),r.g=s(d),r.b=l(d),r.opacity=c(d),r+""}}return o.gamma=e,o}(1);function Te(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var To=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Lo=new RegExp(To.source,"g");function Tf(e){return function(){return e}}function Lf(e){return function(t){return e(t)+""}}function $f(e,t){var n=To.lastIndex=Lo.lastIndex=0,o,r,i,a=-1,s=[],l=[];for(e=e+"",t=t+"";(o=To.exec(e))&&(r=Lo.exec(t));)(i=r.index)>n&&(i=t.slice(n,i),s[a]?s[a]+=i:s[++a]=i),(o=o[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,l.push({i:a,x:Te(o,r)})),n=Lo.lastIndex;return n<t.length&&(i=t.slice(n),s[a]?s[a]+=i:s[++a]=i),s.length<2?l[0]?Lf(l[0].x):Tf(t):(t=l.length,function(c){for(var d=0,u;d<t;++d)s[(u=l[d]).i]=u.x(c);return s.join("")})}var Xi=180/Math.PI,Ki={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Wi(e,t,n,o,r,i){var a,s,l;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(l=e*n+t*o)&&(n-=e*l,o-=t*l),(s=Math.sqrt(n*n+o*o))&&(n/=s,o/=s,l/=s),e*o<t*n&&(e=-e,t=-t,l=-l,a=-a),{translateX:r,translateY:i,rotate:Math.atan2(t,e)*Xi,skewX:Math.atan(l)*Xi,scaleX:a,scaleY:s}}var xn;function Vf(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Ki:Wi(t.a,t.b,t.c,t.d,t.e,t.f)}function Bf(e){return e==null||(xn||(xn=document.createElementNS("http://www.w3.org/2000/svg","g")),xn.setAttribute("transform",e),!(e=xn.transform.baseVal.consolidate()))?Ki:(e=e.matrix,Wi(e.a,e.b,e.c,e.d,e.e,e.f))}function Gi(e,t,n,o){function r(c){return c.length?c.pop()+" ":""}function i(c,d,u,f,p,y){if(c!==u||d!==f){var g=p.push("translate(",null,t,null,n);y.push({i:g-4,x:Te(c,u)},{i:g-2,x:Te(d,f)})}else(u||f)&&p.push("translate("+u+t+f+n)}function a(c,d,u,f){c!==d?(c-d>180?d+=360:d-c>180&&(c+=360),f.push({i:u.push(r(u)+"rotate(",null,o)-2,x:Te(c,d)})):d&&u.push(r(u)+"rotate("+d+o)}function s(c,d,u,f){c!==d?f.push({i:u.push(r(u)+"skewX(",null,o)-2,x:Te(c,d)}):d&&u.push(r(u)+"skewX("+d+o)}function l(c,d,u,f,p,y){if(c!==u||d!==f){var g=p.push(r(p)+"scale(",null,",",null,")");y.push({i:g-4,x:Te(c,u)},{i:g-2,x:Te(d,f)})}else(u!==1||f!==1)&&p.push(r(p)+"scale("+u+","+f+")")}return function(c,d){var u=[],f=[];return c=e(c),d=e(d),i(c.translateX,c.translateY,d.translateX,d.translateY,u,f),a(c.rotate,d.rotate,u,f),s(c.skewX,d.skewX,u,f),l(c.scaleX,c.scaleY,d.scaleX,d.scaleY,u,f),c=d=null,function(p){for(var y=-1,g=f.length,b;++y<g;)u[(b=f[y]).i]=b.x(p);return u.join("")}}}var Hf=Gi(Vf,"px, ","px)","deg)"),Ff=Gi(Bf,", ",")",")"),Zf=1e-12;function Ui(e){return((e=Math.exp(e))+1/e)/2}function Yf(e){return((e=Math.exp(e))-1/e)/2}function Xf(e){return((e=Math.exp(2*e))-1)/(e+1)}const Kf=function e(t,n,o){function r(i,a){var s=i[0],l=i[1],c=i[2],d=a[0],u=a[1],f=a[2],p=d-s,y=u-l,g=p*p+y*y,b,m;if(g<Zf)m=Math.log(f/c)/t,b=function(k){return[s+k*p,l+k*y,c*Math.exp(t*k*m)]};else{var w=Math.sqrt(g),x=(f*f-c*c+o*g)/(2*c*n*w),v=(f*f-c*c-o*g)/(2*f*n*w),E=Math.log(Math.sqrt(x*x+1)-x),O=Math.log(Math.sqrt(v*v+1)-v);m=(O-E)/t,b=function(k){var A=k*m,I=Ui(E),z=c/(n*w)*(I*Xf(t*A+E)-Yf(E));return[s+z*p,l+z*y,c*I/Ui(t*A+E)]}}return b.duration=m*1e3*t/Math.SQRT2,b}return r.rho=function(i){var a=Math.max(.001,+i),s=a*a,l=s*s;return e(a,s,l)},r}(Math.SQRT2,2,4);var rt=0,Ct=0,kt=0,qi=1e3,vn,Pt,wn=0,Ge=0,bn=0,Mt=typeof performance=="object"&&performance.now?performance:Date,Qi=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function $o(){return Ge||(Qi(Wf),Ge=Mt.now()+bn)}function Wf(){Ge=0}function Sn(){this._call=this._time=this._next=null}Sn.prototype=Ji.prototype={constructor:Sn,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?$o():+n)+(t==null?0:+t),!this._next&&Pt!==this&&(Pt?Pt._next=this:vn=this,Pt=this),this._call=e,this._time=n,Vo()},stop:function(){this._call&&(this._call=null,this._time=1/0,Vo())}};function Ji(e,t,n){var o=new Sn;return o.restart(e,t,n),o}function Gf(){$o(),++rt;for(var e=vn,t;e;)(t=Ge-e._time)>=0&&e._call.call(void 0,t),e=e._next;--rt}function ea(){Ge=(wn=Mt.now())+bn,rt=Ct=0;try{Gf()}finally{rt=0,qf(),Ge=0}}function Uf(){var e=Mt.now(),t=e-wn;t>qi&&(bn-=t,wn=e)}function qf(){for(var e,t=vn,n,o=1/0;t;)t._call?(o>t._time&&(o=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:vn=n);Pt=e,Vo(o)}function Vo(e){if(!rt){Ct&&(Ct=clearTimeout(Ct));var t=e-Ge;t>24?(e<1/0&&(Ct=setTimeout(ea,e-Mt.now()-bn)),kt&&(kt=clearInterval(kt))):(kt||(wn=Mt.now(),kt=setInterval(Uf,qi)),rt=1,Qi(ea))}}function ta(e,t,n){var o=new Sn;return t=t==null?0:+t,o.restart(r=>{o.stop(),e(r+t)},t,n),o}var Qf=cn("start","end","cancel","interrupt"),Jf=[],na=0,oa=1,Bo=2,_n=3,ra=4,Ho=5,En=6;function Nn(e,t,n,o,r,i){var a=e.__transition;if(!a)e.__transition={};else if(n in a)return;eh(e,n,{name:t,index:o,group:r,on:Qf,tween:Jf,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:na})}function Fo(e,t){var n=we(e,t);if(n.state>na)throw new Error("too late; already scheduled");return n}function Ne(e,t){var n=we(e,t);if(n.state>_n)throw new Error("too late; already running");return n}function we(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function eh(e,t,n){var o=e.__transition,r;o[t]=n,n.timer=Ji(i,0,n.time);function i(c){n.state=oa,n.timer.restart(a,n.delay,n.time),n.delay<=c&&a(c-n.delay)}function a(c){var d,u,f,p;if(n.state!==oa)return l();for(d in o)if(p=o[d],p.name===n.name){if(p.state===_n)return ta(a);p.state===ra?(p.state=En,p.timer.stop(),p.on.call("interrupt",e,e.__data__,p.index,p.group),delete o[d]):+d<t&&(p.state=En,p.timer.stop(),p.on.call("cancel",e,e.__data__,p.index,p.group),delete o[d])}if(ta(function(){n.state===_n&&(n.state=ra,n.timer.restart(s,n.delay,n.time),s(c))}),n.state=Bo,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Bo){for(n.state=_n,r=new Array(f=n.tween.length),d=0,u=-1;d<f;++d)(p=n.tween[d].value.call(e,e.__data__,n.index,n.group))&&(r[++u]=p);r.length=u+1}}function s(c){for(var d=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(l),n.state=Ho,1),u=-1,f=r.length;++u<f;)r[u].call(e,d);n.state===Ho&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=En,n.timer.stop(),delete o[t];for(var c in o)return;delete e.__transition}}function Cn(e,t){var n=e.__transition,o,r,i=!0,a;if(n){t=t==null?null:t+"";for(a in n){if((o=n[a]).name!==t){i=!1;continue}r=o.state>Bo&&o.state<Ho,o.state=En,o.timer.stop(),o.on.call(r?"interrupt":"cancel",e,e.__data__,o.index,o.group),delete n[a]}i&&delete e.__transition}}function th(e){return this.each(function(){Cn(this,e)})}function nh(e,t){var n,o;return function(){var r=Ne(this,e),i=r.tween;if(i!==n){o=n=i;for(var a=0,s=o.length;a<s;++a)if(o[a].name===t){o=o.slice(),o.splice(a,1);break}}r.tween=o}}function oh(e,t,n){var o,r;if(typeof n!="function")throw new Error;return function(){var i=Ne(this,e),a=i.tween;if(a!==o){r=(o=a).slice();for(var s={name:t,value:n},l=0,c=r.length;l<c;++l)if(r[l].name===t){r[l]=s;break}l===c&&r.push(s)}i.tween=r}}function rh(e,t){var n=this._id;if(e+="",arguments.length<2){for(var o=we(this.node(),n).tween,r=0,i=o.length,a;r<i;++r)if((a=o[r]).name===e)return a.value;return null}return this.each((t==null?nh:oh)(n,e,t))}function Zo(e,t,n){var o=e._id;return e.each(function(){var r=Ne(this,o);(r.value||(r.value={}))[t]=n.apply(this,arguments)}),function(r){return we(r,o).value[t]}}function ia(e,t){var n;return(typeof t=="number"?Te:t instanceof Nt?Yi:(n=Nt(t))?(t=n,Yi):$f)(e,t)}function ih(e){return function(){this.removeAttribute(e)}}function ah(e){return function(){this.removeAttributeNS(e.space,e.local)}}function sh(e,t,n){var o,r=n+"",i;return function(){var a=this.getAttribute(e);return a===r?null:a===o?i:i=t(o=a,n)}}function lh(e,t,n){var o,r=n+"",i;return function(){var a=this.getAttributeNS(e.space,e.local);return a===r?null:a===o?i:i=t(o=a,n)}}function ch(e,t,n){var o,r,i;return function(){var a,s=n(this),l;return s==null?void this.removeAttribute(e):(a=this.getAttribute(e),l=s+"",a===l?null:a===o&&l===r?i:(r=l,i=t(o=a,s)))}}function dh(e,t,n){var o,r,i;return function(){var a,s=n(this),l;return s==null?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local),l=s+"",a===l?null:a===o&&l===r?i:(r=l,i=t(o=a,s)))}}function uh(e,t){var n=un(e),o=n==="transform"?Ff:ia;return this.attrTween(e,typeof t=="function"?(n.local?dh:ch)(n,o,Zo(this,"attr."+e,t)):t==null?(n.local?ah:ih)(n):(n.local?lh:sh)(n,o,t))}function fh(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function hh(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function ph(e,t){var n,o;function r(){var i=t.apply(this,arguments);return i!==o&&(n=(o=i)&&hh(e,i)),n}return r._value=t,r}function mh(e,t){var n,o;function r(){var i=t.apply(this,arguments);return i!==o&&(n=(o=i)&&fh(e,i)),n}return r._value=t,r}function gh(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var o=un(e);return this.tween(n,(o.local?ph:mh)(o,t))}function yh(e,t){return function(){Fo(this,e).delay=+t.apply(this,arguments)}}function xh(e,t){return t=+t,function(){Fo(this,e).delay=t}}function vh(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?yh:xh)(t,e)):we(this.node(),t).delay}function wh(e,t){return function(){Ne(this,e).duration=+t.apply(this,arguments)}}function bh(e,t){return t=+t,function(){Ne(this,e).duration=t}}function Sh(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?wh:bh)(t,e)):we(this.node(),t).duration}function _h(e,t){if(typeof t!="function")throw new Error;return function(){Ne(this,e).ease=t}}function Eh(e){var t=this._id;return arguments.length?this.each(_h(t,e)):we(this.node(),t).ease}function Nh(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Ne(this,e).ease=n}}function Ch(e){if(typeof e!="function")throw new Error;return this.each(Nh(this._id,e))}function kh(e){typeof e!="function"&&(e=wi(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i=t[r],a=i.length,s=o[r]=[],l,c=0;c<a;++c)(l=i[c])&&e.call(l,l.__data__,c,i)&&s.push(l);return new Pe(o,this._parents,this._name,this._id)}function Ph(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,o=t.length,r=n.length,i=Math.min(o,r),a=new Array(o),s=0;s<i;++s)for(var l=t[s],c=n[s],d=l.length,u=a[s]=new Array(d),f,p=0;p<d;++p)(f=l[p]||c[p])&&(u[p]=f);for(;s<o;++s)a[s]=t[s];return new Pe(a,this._parents,this._name,this._id)}function Mh(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function jh(e,t,n){var o,r,i=Mh(t)?Fo:Ne;return function(){var a=i(this,e),s=a.on;s!==o&&(r=(o=s).copy()).on(t,n),a.on=r}}function Ah(e,t){var n=this._id;return arguments.length<2?we(this.node(),n).on.on(e):this.each(jh(n,e,t))}function Oh(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Ih(){return this.on("end.remove",Oh(this._id))}function zh(e){var t=this._name,n=this._id;typeof e!="function"&&(e=jo(e));for(var o=this._groups,r=o.length,i=new Array(r),a=0;a<r;++a)for(var s=o[a],l=s.length,c=i[a]=new Array(l),d,u,f=0;f<l;++f)(d=s[f])&&(u=e.call(d,d.__data__,f,s))&&("__data__"in d&&(u.__data__=d.__data__),c[f]=u,Nn(c[f],t,n,f,c,we(d,n)));return new Pe(i,this._parents,t,n)}function Rh(e){var t=this._name,n=this._id;typeof e!="function"&&(e=vi(e));for(var o=this._groups,r=o.length,i=[],a=[],s=0;s<r;++s)for(var l=o[s],c=l.length,d,u=0;u<c;++u)if(d=l[u]){for(var f=e.call(d,d.__data__,u,l),p,y=we(d,n),g=0,b=f.length;g<b;++g)(p=f[g])&&Nn(p,t,n,g,f,y);i.push(f),a.push(d)}return new Pe(i,a,t,n)}var Dh=wt.prototype.constructor;function Th(){return new Dh(this._groups,this._parents)}function Lh(e,t){var n,o,r;return function(){var i=tt(this,e),a=(this.style.removeProperty(e),tt(this,e));return i===a?null:i===n&&a===o?r:r=t(n=i,o=a)}}function aa(e){return function(){this.style.removeProperty(e)}}function $h(e,t,n){var o,r=n+"",i;return function(){var a=tt(this,e);return a===r?null:a===o?i:i=t(o=a,n)}}function Vh(e,t,n){var o,r,i;return function(){var a=tt(this,e),s=n(this),l=s+"";return s==null&&(l=s=(this.style.removeProperty(e),tt(this,e))),a===l?null:a===o&&l===r?i:(r=l,i=t(o=a,s))}}function Bh(e,t){var n,o,r,i="style."+t,a="end."+i,s;return function(){var l=Ne(this,e),c=l.on,d=l.value[i]==null?s||(s=aa(t)):void 0;(c!==n||r!==d)&&(o=(n=c).copy()).on(a,r=d),l.on=o}}function Hh(e,t,n){var o=(e+="")=="transform"?Hf:ia;return t==null?this.styleTween(e,Lh(e,o)).on("end.style."+e,aa(e)):typeof t=="function"?this.styleTween(e,Vh(e,o,Zo(this,"style."+e,t))).each(Bh(this._id,e)):this.styleTween(e,$h(e,o,t),n).on("end.style."+e,null)}function Fh(e,t,n){return function(o){this.style.setProperty(e,t.call(this,o),n)}}function Zh(e,t,n){var o,r;function i(){var a=t.apply(this,arguments);return a!==r&&(o=(r=a)&&Fh(e,a,n)),o}return i._value=t,i}function Yh(e,t,n){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(t==null)return this.tween(o,null);if(typeof t!="function")throw new Error;return this.tween(o,Zh(e,t,n??""))}function Xh(e){return function(){this.textContent=e}}function Kh(e){return function(){var t=e(this);this.textContent=t??""}}function Wh(e){return this.tween("text",typeof e=="function"?Kh(Zo(this,"text",e)):Xh(e==null?"":e+""))}function Gh(e){return function(t){this.textContent=e.call(this,t)}}function Uh(e){var t,n;function o(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&Gh(r)),t}return o._value=e,o}function qh(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Uh(e))}function Qh(){for(var e=this._name,t=this._id,n=sa(),o=this._groups,r=o.length,i=0;i<r;++i)for(var a=o[i],s=a.length,l,c=0;c<s;++c)if(l=a[c]){var d=we(l,t);Nn(l,e,n,c,a,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new Pe(o,this._parents,e,n)}function Jh(){var e,t,n=this,o=n._id,r=n.size();return new Promise(function(i,a){var s={value:a},l={value:function(){--r===0&&i()}};n.each(function(){var c=Ne(this,o),d=c.on;d!==e&&(t=(e=d).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(l)),c.on=t}),r===0&&i()})}var ep=0;function Pe(e,t,n,o){this._groups=e,this._parents=t,this._name=n,this._id=o}function sa(){return++ep}var Me=wt.prototype;Pe.prototype={constructor:Pe,select:zh,selectAll:Rh,selectChild:Me.selectChild,selectChildren:Me.selectChildren,filter:kh,merge:Ph,selection:Th,transition:Qh,call:Me.call,nodes:Me.nodes,node:Me.node,size:Me.size,empty:Me.empty,each:Me.each,on:Ah,attr:uh,attrTween:gh,style:Hh,styleTween:Yh,text:Wh,textTween:qh,remove:Ih,tween:rh,delay:vh,duration:Sh,ease:Eh,easeVarying:Ch,end:Jh,[Symbol.iterator]:Me[Symbol.iterator]};function tp(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var np={time:null,delay:0,duration:250,ease:tp};function op(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function rp(e){var t,n;e instanceof Pe?(t=e._id,e=e._name):(t=sa(),(n=np).time=$o(),e=e==null?null:e+"");for(var o=this._groups,r=o.length,i=0;i<r;++i)for(var a=o[i],s=a.length,l,c=0;c<s;++c)(l=a[c])&&Nn(l,e,t,c,a,n||op(l,t));return new Pe(o,this._parents,e,t)}wt.prototype.interrupt=th,wt.prototype.transition=rp;const kn=e=>()=>e;function ip(e,{sourceEvent:t,target:n,transform:o,dispatch:r}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:r}})}function je(e,t,n){this.k=e,this.x=t,this.y=n}je.prototype={constructor:je,scale:function(e){return e===1?this:new je(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new je(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Pn=new je(1,0,0);la.prototype=je.prototype;function la(e){for(;!e.__zoom;)if(!(e=e.parentNode))return Pn;return e.__zoom}function Yo(e){e.stopImmediatePropagation()}function jt(e){e.preventDefault(),e.stopImmediatePropagation()}function ap(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function sp(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function ca(){return this.__zoom||Pn}function lp(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function cp(){return navigator.maxTouchPoints||"ontouchstart"in this}function dp(e,t,n){var o=e.invertX(t[0][0])-n[0][0],r=e.invertX(t[1][0])-n[1][0],i=e.invertY(t[0][1])-n[0][1],a=e.invertY(t[1][1])-n[1][1];return e.translate(r>o?(o+r)/2:Math.min(0,o)||Math.max(0,r),a>i?(i+a)/2:Math.min(0,i)||Math.max(0,a))}function da(){var e=ap,t=sp,n=dp,o=lp,r=cp,i=[0,1/0],a=[[-1/0,-1/0],[1/0,1/0]],s=250,l=Kf,c=cn("start","zoom","end"),d,u,f,p=500,y=150,g=0,b=10;function m(_){_.property("__zoom",ca).on("wheel.zoom",A,{passive:!1}).on("mousedown.zoom",I).on("dblclick.zoom",z).filter(r).on("touchstart.zoom",$).on("touchmove.zoom",D).on("touchend.zoom touchcancel.zoom",T).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}m.transform=function(_,P,N,j){var C=_.selection?_.selection():_;C.property("__zoom",ca),_!==C?E(_,P,N,j):C.interrupt().each(function(){O(this,arguments).event(j).start().zoom(null,typeof P=="function"?P.apply(this,arguments):P).end()})},m.scaleBy=function(_,P,N,j){m.scaleTo(_,function(){var C=this.__zoom.k,M=typeof P=="function"?P.apply(this,arguments):P;return C*M},N,j)},m.scaleTo=function(_,P,N,j){m.transform(_,function(){var C=t.apply(this,arguments),M=this.__zoom,R=N==null?v(C):typeof N=="function"?N.apply(this,arguments):N,B=M.invert(R),H=typeof P=="function"?P.apply(this,arguments):P;return n(x(w(M,H),R,B),C,a)},N,j)},m.translateBy=function(_,P,N,j){m.transform(_,function(){return n(this.__zoom.translate(typeof P=="function"?P.apply(this,arguments):P,typeof N=="function"?N.apply(this,arguments):N),t.apply(this,arguments),a)},null,j)},m.translateTo=function(_,P,N,j,C){m.transform(_,function(){var M=t.apply(this,arguments),R=this.__zoom,B=j==null?v(M):typeof j=="function"?j.apply(this,arguments):j;return n(Pn.translate(B[0],B[1]).scale(R.k).translate(typeof P=="function"?-P.apply(this,arguments):-P,typeof N=="function"?-N.apply(this,arguments):-N),M,a)},j,C)};function w(_,P){return P=Math.max(i[0],Math.min(i[1],P)),P===_.k?_:new je(P,_.x,_.y)}function x(_,P,N){var j=P[0]-N[0]*_.k,C=P[1]-N[1]*_.k;return j===_.x&&C===_.y?_:new je(_.k,j,C)}function v(_){return[(+_[0][0]+ +_[1][0])/2,(+_[0][1]+ +_[1][1])/2]}function E(_,P,N,j){_.on("start.zoom",function(){O(this,arguments).event(j).start()}).on("interrupt.zoom end.zoom",function(){O(this,arguments).event(j).end()}).tween("zoom",function(){var C=this,M=arguments,R=O(C,M).event(j),B=t.apply(C,M),H=N==null?v(B):typeof N=="function"?N.apply(C,M):N,G=Math.max(B[1][0]-B[0][0],B[1][1]-B[0][1]),F=C.__zoom,Z=typeof P=="function"?P.apply(C,M):P,q=l(F.invert(H).concat(G/F.k),Z.invert(H).concat(G/Z.k));return function(V){if(V===1)V=Z;else{var L=q(V),K=G/L[2];V=new je(K,H[0]-L[0]*K,H[1]-L[1]*K)}R.zoom(null,V)}})}function O(_,P,N){return!N&&_.__zooming||new k(_,P)}function k(_,P){this.that=_,this.args=P,this.active=0,this.sourceEvent=null,this.extent=t.apply(_,P),this.taps=0}k.prototype={event:function(_){return _&&(this.sourceEvent=_),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(_,P){return this.mouse&&_!=="mouse"&&(this.mouse[1]=P.invert(this.mouse[0])),this.touch0&&_!=="touch"&&(this.touch0[1]=P.invert(this.touch0[0])),this.touch1&&_!=="touch"&&(this.touch1[1]=P.invert(this.touch1[0])),this.that.__zoom=P,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(_){var P=me(this.that).datum();c.call(_,this.that,new ip(_,{sourceEvent:this.sourceEvent,target:m,type:_,transform:this.that.__zoom,dispatch:c}),P)}};function A(_,...P){if(!e.apply(this,arguments))return;var N=O(this,P).event(_),j=this.__zoom,C=Math.max(i[0],Math.min(i[1],j.k*Math.pow(2,o.apply(this,arguments)))),M=xe(_);if(N.wheel)(N.mouse[0][0]!==M[0]||N.mouse[0][1]!==M[1])&&(N.mouse[1]=j.invert(N.mouse[0]=M)),clearTimeout(N.wheel);else{if(j.k===C)return;N.mouse=[M,j.invert(M)],Cn(this),N.start()}jt(_),N.wheel=setTimeout(R,y),N.zoom("mouse",n(x(w(j,C),N.mouse[0],N.mouse[1]),N.extent,a));function R(){N.wheel=null,N.end()}}function I(_,...P){if(f||!e.apply(this,arguments))return;var N=_.currentTarget,j=O(this,P,!0).event(_),C=me(_.view).on("mousemove.zoom",H,!0).on("mouseup.zoom",G,!0),M=xe(_,N),R=_.clientX,B=_.clientY;ji(_.view),Yo(_),j.mouse=[M,this.__zoom.invert(M)],Cn(this),j.start();function H(F){if(jt(F),!j.moved){var Z=F.clientX-R,q=F.clientY-B;j.moved=Z*Z+q*q>g}j.event(F).zoom("mouse",n(x(j.that.__zoom,j.mouse[0]=xe(F,N),j.mouse[1]),j.extent,a))}function G(F){C.on("mousemove.zoom mouseup.zoom",null),Ai(F.view,j.moved),jt(F),j.event(F).end()}}function z(_,...P){if(e.apply(this,arguments)){var N=this.__zoom,j=xe(_.changedTouches?_.changedTouches[0]:_,this),C=N.invert(j),M=N.k*(_.shiftKey?.5:2),R=n(x(w(N,M),j,C),t.apply(this,P),a);jt(_),s>0?me(this).transition().duration(s).call(E,R,j,_):me(this).call(m.transform,R,j,_)}}function $(_,...P){if(e.apply(this,arguments)){var N=_.touches,j=N.length,C=O(this,P,_.changedTouches.length===j).event(_),M,R,B,H;for(Yo(_),R=0;R<j;++R)B=N[R],H=xe(B,this),H=[H,this.__zoom.invert(H),B.identifier],C.touch0?!C.touch1&&C.touch0[2]!==H[2]&&(C.touch1=H,C.taps=0):(C.touch0=H,M=!0,C.taps=1+!!d);d&&(d=clearTimeout(d)),M&&(C.taps<2&&(u=H[0],d=setTimeout(function(){d=null},p)),Cn(this),C.start())}}function D(_,...P){if(this.__zooming){var N=O(this,P).event(_),j=_.changedTouches,C=j.length,M,R,B,H;for(jt(_),M=0;M<C;++M)R=j[M],B=xe(R,this),N.touch0&&N.touch0[2]===R.identifier?N.touch0[0]=B:N.touch1&&N.touch1[2]===R.identifier&&(N.touch1[0]=B);if(R=N.that.__zoom,N.touch1){var G=N.touch0[0],F=N.touch0[1],Z=N.touch1[0],q=N.touch1[1],V=(V=Z[0]-G[0])*V+(V=Z[1]-G[1])*V,L=(L=q[0]-F[0])*L+(L=q[1]-F[1])*L;R=w(R,Math.sqrt(V/L)),B=[(G[0]+Z[0])/2,(G[1]+Z[1])/2],H=[(F[0]+q[0])/2,(F[1]+q[1])/2]}else if(N.touch0)B=N.touch0[0],H=N.touch0[1];else return;N.zoom("touch",n(x(R,B,H),N.extent,a))}}function T(_,...P){if(this.__zooming){var N=O(this,P).event(_),j=_.changedTouches,C=j.length,M,R;for(Yo(_),f&&clearTimeout(f),f=setTimeout(function(){f=null},p),M=0;M<C;++M)R=j[M],N.touch0&&N.touch0[2]===R.identifier?delete N.touch0:N.touch1&&N.touch1[2]===R.identifier&&delete N.touch1;if(N.touch1&&!N.touch0&&(N.touch0=N.touch1,delete N.touch1),N.touch0)N.touch0[1]=this.__zoom.invert(N.touch0[0]);else if(N.end(),N.taps===2&&(R=xe(R,this),Math.hypot(u[0]-R[0],u[1]-R[1])<b)){var B=me(this).on("dblclick.zoom");B&&B.apply(this,arguments)}}}return m.wheelDelta=function(_){return arguments.length?(o=typeof _=="function"?_:kn(+_),m):o},m.filter=function(_){return arguments.length?(e=typeof _=="function"?_:kn(!!_),m):e},m.touchable=function(_){return arguments.length?(r=typeof _=="function"?_:kn(!!_),m):r},m.extent=function(_){return arguments.length?(t=typeof _=="function"?_:kn([[+_[0][0],+_[0][1]],[+_[1][0],+_[1][1]]]),m):t},m.scaleExtent=function(_){return arguments.length?(i[0]=+_[0],i[1]=+_[1],m):[i[0],i[1]]},m.translateExtent=function(_){return arguments.length?(a[0][0]=+_[0][0],a[1][0]=+_[1][0],a[0][1]=+_[0][1],a[1][1]=+_[1][1],m):[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},m.constrain=function(_){return arguments.length?(n=_,m):n},m.duration=function(_){return arguments.length?(s=+_,m):s},m.interpolate=function(_){return arguments.length?(l=_,m):l},m.on=function(){var _=c.on.apply(c,arguments);return _===c?m:_},m.clickDistance=function(_){return arguments.length?(g=(_=+_)*_,m):Math.sqrt(g)},m.tapDistance=function(_){return arguments.length?(b=+_,m):b},m}const Ae={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:n,targetHandle:o})=>`Couldn't create edge for ${e} handle id: "${e==="source"?n:o}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`},At=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],ua=["Enter"," ","Escape"];var it;(function(e){e.Strict="strict",e.Loose="loose"})(it||(it={})),function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"}(Xe||(Xe={}));var Ot;(function(e){e.Partial="partial",e.Full="full"})(Ot||(Ot={}));const fa={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var Le;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Le||(Le={}));var Mn;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(Mn||(Mn={})),function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"}(U||(U={}));const ha={[U.Left]:U.Right,[U.Right]:U.Left,[U.Top]:U.Bottom,[U.Bottom]:U.Top};function up(e,t){if(!e&&!t)return!0;if(!e||!t||e.size!==t.size)return!1;if(!e.size&&!t.size)return!0;for(const n of e.keys())if(!t.has(n))return!1;return!0}function pa(e,t,n){if(!n)return;const o=[];e.forEach((r,i)=>{t!=null&&t.has(i)||o.push(r)}),o.length&&n(o)}function ma(e){return e===null?null:e?"valid":"invalid"}const ga=e=>"id"in e&&"source"in e&&"target"in e,fp=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),Xo=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),It=(e,t=[0,0])=>{const{width:n,height:o}=Oe(e),r=e.origin??t,i=n*r[0],a=o*r[1];return{x:e.position.x-i,y:e.position.y-a}},hp=(e,t={nodeOrigin:[0,0],nodeLookup:void 0})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((o,r)=>{const i=typeof r=="string";let a=!t.nodeLookup&&!i?r:void 0;t.nodeLookup&&(a=i?t.nodeLookup.get(r):Xo(r)?r:t.nodeLookup.get(r.id));const s=a?On(a,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return jn(o,s)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return An(n)},zt=(e,t={})=>{if(e.size===0)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return e.forEach(o=>{if(t.filter===void 0||t.filter(o)){const r=On(o);n=jn(n,r)}}),An(n)},ya=(e,t,[n,o,r]=[0,0,1],i=!1,a=!1)=>{const s={...Dt(t,[n,o,r]),width:t.width/r,height:t.height/r},l=[];for(const c of e.values()){const{measured:d,selectable:u=!0,hidden:f=!1}=c;if(a&&!u||f)continue;const p=d.width??c.width??c.initialWidth??null,y=d.height??c.height??c.initialHeight??null,g=Rt(s,st(c)),b=(p??0)*(y??0),m=i&&g>0;(!c.internals.handleBounds||m||g>=b||c.dragging)&&l.push(c)}return l},pp=(e,t)=>{const n=new Set;return e.forEach(o=>{n.add(o.id)}),t.filter(o=>n.has(o.source)||n.has(o.target))};function Ko(e,t){const n=new Map,o=t!=null&&t.nodes?new Set(t.nodes.map(r=>r.id)):null;return e.forEach(r=>{r.measured.width&&r.measured.height&&(t!=null&&t.includeHiddenNodes||!r.hidden)&&(!o||o.has(r.id))&&n.set(r.id,r)}),n}async function Wo({nodes:e,width:t,height:n,panZoom:o,minZoom:r,maxZoom:i},a){if(e.size===0)return Promise.resolve(!1);const s=zt(e),l=Uo(s,t,n,(a==null?void 0:a.minZoom)??r,(a==null?void 0:a.maxZoom)??i,(a==null?void 0:a.padding)??.1);return await o.setViewport(l,{duration:a==null?void 0:a.duration}),Promise.resolve(!0)}function xa({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:o=[0,0],nodeExtent:r,onError:i}){const a=n.get(e),s=a.parentId?n.get(a.parentId):void 0,{x:l,y:c}=s?s.internals.positionAbsolute:{x:0,y:0},d=a.origin??o;let u=r;if(a.extent==="parent"&&!a.expandParent)if(!s)i==null||i("005",Ae.error005());else{const p=s.measured.width,y=s.measured.height;p&&y&&(u=[[l,c],[l+p,c+y]])}else s&&lt(a.extent)&&(u=[[a.extent[0][0]+l,a.extent[0][1]+c],[a.extent[1][0]+l,a.extent[1][1]+c]]);const f=lt(u)?Ue(t,u,a.measured):t;return{position:{x:f.x-l+a.measured.width*d[0],y:f.y-c+a.measured.height*d[1]},positionAbsolute:f}}async function mp({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:o,onBeforeDelete:r}){const i=new Set(e.map(u=>u.id)),a=[];for(const u of n){if(u.deletable===!1)continue;const f=i.has(u.id),p=!f&&u.parentId&&a.find(y=>y.id===u.parentId);(f||p)&&a.push(u)}const s=new Set(t.map(u=>u.id)),l=o.filter(u=>u.deletable!==!1),c=pp(a,l);for(const u of l)s.has(u.id)&&!c.find(f=>f.id===u.id)&&c.push(u);if(!r)return{edges:c,nodes:a};const d=await r({nodes:a,edges:c});return typeof d=="boolean"?d?{edges:c,nodes:a}:{edges:[],nodes:[]}:d}const at=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),Ue=(e={x:0,y:0},t,n)=>({x:at(e.x,t[0][0],t[1][0]-((n==null?void 0:n.width)??0)),y:at(e.y,t[0][1],t[1][1]-((n==null?void 0:n.height)??0))});function va(e,t,n){const{width:o,height:r}=Oe(n),{x:i,y:a}=n.internals.positionAbsolute;return Ue(e,[[i,a],[i+o,a+r]],t)}const wa=(e,t,n)=>e<t?at(Math.abs(e-t),1,t)/t:e>n?-at(Math.abs(e-n),1,t)/t:0,ba=(e,t,n=15,o=40)=>{const r=wa(e.x,o,t.width-o)*n,i=wa(e.y,o,t.height-o)*n;return[r,i]},jn=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),Go=({x:e,y:t,width:n,height:o})=>({x:e,y:t,x2:e+n,y2:t+o}),An=({x:e,y:t,x2:n,y2:o})=>({x:e,y:t,width:n-e,height:o-t}),st=(e,t=[0,0])=>{var r,i;const{x:n,y:o}=Xo(e)?e.internals.positionAbsolute:It(e,t);return{x:n,y:o,width:((r=e.measured)==null?void 0:r.width)??e.width??e.initialWidth??0,height:((i=e.measured)==null?void 0:i.height)??e.height??e.initialHeight??0}},On=(e,t=[0,0])=>{var r,i;const{x:n,y:o}=Xo(e)?e.internals.positionAbsolute:It(e,t);return{x:n,y:o,x2:n+(((r=e.measured)==null?void 0:r.width)??e.width??e.initialWidth??0),y2:o+(((i=e.measured)==null?void 0:i.height)??e.height??e.initialHeight??0)}},Sa=(e,t)=>An(jn(Go(e),Go(t))),Rt=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),o=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*o)},_a=e=>be(e.width)&&be(e.height)&&be(e.x)&&be(e.y),be=e=>!isNaN(e)&&isFinite(e),gp=(e,t)=>{},In=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),Dt=({x:e,y:t},[n,o,r],i=!1,a=[1,1])=>{const s={x:(e-n)/r,y:(t-o)/r};return i?In(s,a):s},Ea=({x:e,y:t},[n,o,r])=>({x:e*r+n,y:t*r+o}),Uo=(e,t,n,o,r,i)=>{const a=t/(e.width*(1+i)),s=n/(e.height*(1+i)),l=Math.min(a,s),c=at(l,o,r),d=e.x+e.width/2,u=e.y+e.height/2,f=t/2-d*c,p=n/2-u*c;return{x:f,y:p,zoom:c}},zn=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function lt(e){return e!==void 0&&e!=="parent"}function Oe(e){var t,n;return{width:((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth??0,height:((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight??0}}function Na(e){var t,n;return(((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth)!==void 0&&(((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight)!==void 0}function Ca(e,t={width:0,height:0},n,o,r){const i={...e},a=o.get(n);if(a){const s=a.origin||r;i.x+=a.internals.positionAbsolute.x-(t.width??0)*s[0],i.y+=a.internals.positionAbsolute.y-(t.height??0)*s[1]}return i}function Tt(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:o,containerBounds:r}){const{x:i,y:a}=Ie(e),s=Dt({x:i-((r==null?void 0:r.left)??0),y:a-((r==null?void 0:r.top)??0)},o),{x:l,y:c}=n?In(s,t):s;return{xSnapped:l,ySnapped:c,...s}}const Rn=e=>({width:e.offsetWidth,height:e.offsetHeight}),ka=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},yp=["INPUT","SELECT","TEXTAREA"];function qo(e){var n,o;const t=((o=(n=e.composedPath)==null?void 0:n.call(e))==null?void 0:o[0])||e.target;return yp.includes(t==null?void 0:t.nodeName)||(t==null?void 0:t.hasAttribute("contenteditable"))||!!(t!=null&&t.closest(".nokey"))}const Pa=e=>"clientX"in e,Ie=(e,t)=>{var i,a;const n=Pa(e),o=n?e.clientX:(i=e.touches)==null?void 0:i[0].clientX,r=n?e.clientY:(a=e.touches)==null?void 0:a[0].clientY;return{x:o-((t==null?void 0:t.left)??0),y:r-((t==null?void 0:t.top)??0)}},Ma=(e,t,n,o,r)=>{const i=t.querySelectorAll(`.${e}`);return!i||!i.length?null:Array.from(i).map(a=>{const s=a.getBoundingClientRect();return{id:a.getAttribute("data-handleid"),type:e,nodeId:r,position:a.getAttribute("data-handlepos"),x:(s.left-n.left)/o,y:(s.top-n.top)/o,...Rn(a)}})};function ja({sourceX:e,sourceY:t,targetX:n,targetY:o,sourceControlX:r,sourceControlY:i,targetControlX:a,targetControlY:s}){const l=e*.125+r*.375+a*.375+n*.125,c=t*.125+i*.375+s*.375+o*.125,d=Math.abs(l-e),u=Math.abs(c-t);return[l,c,d,u]}function Dn(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Aa({pos:e,x1:t,y1:n,x2:o,y2:r,c:i}){switch(e){case U.Left:return[t-Dn(t-o,i),n];case U.Right:return[t+Dn(o-t,i),n];case U.Top:return[t,n-Dn(n-r,i)];case U.Bottom:return[t,n+Dn(r-n,i)]}}function Oa({sourceX:e,sourceY:t,sourcePosition:n=U.Bottom,targetX:o,targetY:r,targetPosition:i=U.Top,curvature:a=.25}){const[s,l]=Aa({pos:n,x1:e,y1:t,x2:o,y2:r,c:a}),[c,d]=Aa({pos:i,x1:o,y1:r,x2:e,y2:t,c:a}),[u,f,p,y]=ja({sourceX:e,sourceY:t,targetX:o,targetY:r,sourceControlX:s,sourceControlY:l,targetControlX:c,targetControlY:d});return[`M${e},${t} C${s},${l} ${c},${d} ${o},${r}`,u,f,p,y]}function Ia({sourceX:e,sourceY:t,targetX:n,targetY:o}){const r=Math.abs(n-e)/2,i=n<e?n+r:n-r,a=Math.abs(o-t)/2,s=o<t?o+a:o-a;return[i,s,r,a]}function xp({sourceNode:e,targetNode:t,selected:n=!1,zIndex:o=0,elevateOnSelect:r=!1}){if(!r)return o;const i=n||t.selected||e.selected,a=Math.max(e.internals.z||0,t.internals.z||0,1e3);return o+(i?a:0)}function vp({sourceNode:e,targetNode:t,width:n,height:o,transform:r}){const i=jn(On(e),On(t));i.x===i.x2&&(i.x2+=1),i.y===i.y2&&(i.y2+=1);const a={x:-r[0]/r[2],y:-r[1]/r[2],width:n/r[2],height:o/r[2]};return Rt(a,An(i))>0}const wp=({source:e,sourceHandle:t,target:n,targetHandle:o})=>`xy-edge__${e}${t||""}-${n}${o||""}`,bp=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),za=(e,t)=>{if(!e.source||!e.target)return t;let n;return ga(e)?n={...e}:n={...e,id:wp(e)},bp(n,t)?t:(n.sourceHandle===null&&delete n.sourceHandle,n.targetHandle===null&&delete n.targetHandle,t.concat(n))};function Ra({sourceX:e,sourceY:t,targetX:n,targetY:o}){const[r,i,a,s]=Ia({sourceX:e,sourceY:t,targetX:n,targetY:o});return[`M ${e},${t}L ${n},${o}`,r,i,a,s]}const Da={[U.Left]:{x:-1,y:0},[U.Right]:{x:1,y:0},[U.Top]:{x:0,y:-1},[U.Bottom]:{x:0,y:1}},Sp=({source:e,sourcePosition:t=U.Bottom,target:n})=>t===U.Left||t===U.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},Ta=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function _p({source:e,sourcePosition:t=U.Bottom,target:n,targetPosition:o=U.Top,center:r,offset:i}){const a=Da[t],s=Da[o],l={x:e.x+a.x*i,y:e.y+a.y*i},c={x:n.x+s.x*i,y:n.y+s.y*i},d=Sp({source:l,sourcePosition:t,target:c}),u=d.x!==0?"x":"y",f=d[u];let p=[],y,g;const b={x:0,y:0},m={x:0,y:0},[w,x,v,E]=Ia({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(a[u]*s[u]===-1){y=r.x??w,g=r.y??x;const O=[{x:y,y:l.y},{x:y,y:c.y}],k=[{x:l.x,y:g},{x:c.x,y:g}];a[u]===f?p=u==="x"?O:k:p=u==="x"?k:O}else{const O=[{x:l.x,y:c.y}],k=[{x:c.x,y:l.y}];if(u==="x"?p=a.x===f?k:O:p=a.y===f?O:k,t===o){const D=Math.abs(e[u]-n[u]);if(D<=i){const T=Math.min(i-1,i-D);a[u]===f?b[u]=(l[u]>e[u]?-1:1)*T:m[u]=(c[u]>n[u]?-1:1)*T}}if(t!==o){const D=u==="x"?"y":"x",T=a[u]===s[D],_=l[D]>c[D],P=l[D]<c[D];(a[u]===1&&(!T&&_||T&&P)||a[u]!==1&&(!T&&P||T&&_))&&(p=u==="x"?O:k)}const A={x:l.x+b.x,y:l.y+b.y},I={x:c.x+m.x,y:c.y+m.y},z=Math.max(Math.abs(A.x-p[0].x),Math.abs(I.x-p[0].x)),$=Math.max(Math.abs(A.y-p[0].y),Math.abs(I.y-p[0].y));z>=$?(y=(A.x+I.x)/2,g=p[0].y):(y=p[0].x,g=(A.y+I.y)/2)}return[[e,{x:l.x+b.x,y:l.y+b.y},...p,{x:c.x+m.x,y:c.y+m.y},n],y,g,v,E]}function Ep(e,t,n,o){const r=Math.min(Ta(e,t)/2,Ta(t,n)/2,o),{x:i,y:a}=t;if(e.x===i&&i===n.x||e.y===a&&a===n.y)return`L${i} ${a}`;if(e.y===a){const c=e.x<n.x?-1:1,d=e.y<n.y?1:-1;return`L ${i+r*c},${a}Q ${i},${a} ${i},${a+r*d}`}const s=e.x<n.x?1:-1,l=e.y<n.y?-1:1;return`L ${i},${a+r*l}Q ${i},${a} ${i+r*s},${a}`}function Qo({sourceX:e,sourceY:t,sourcePosition:n=U.Bottom,targetX:o,targetY:r,targetPosition:i=U.Top,borderRadius:a=5,centerX:s,centerY:l,offset:c=20}){const[d,u,f,p,y]=_p({source:{x:e,y:t},sourcePosition:n,target:{x:o,y:r},targetPosition:i,center:{x:s,y:l},offset:c});return[d.reduce((g,b,m)=>{let w="";return m>0&&m<d.length-1?w=Ep(d[m-1],b,d[m+1],a):w=`${m===0?"M":"L"}${b.x} ${b.y}`,g+=w,g},""),u,f,p,y]}function La(e){var t;return e&&!!(e.internals.handleBounds||(t=e.handles)!=null&&t.length)&&!!(e.measured.width||e.width||e.initialWidth)}function Np(e){var u;const{sourceNode:t,targetNode:n}=e;if(!La(t)||!La(n))return null;const o=t.internals.handleBounds||$a(t.handles),r=n.internals.handleBounds||$a(n.handles),i=Va((o==null?void 0:o.source)??[],e.sourceHandle),a=Va(e.connectionMode===it.Strict?(r==null?void 0:r.target)??[]:((r==null?void 0:r.target)??[]).concat((r==null?void 0:r.source)??[]),e.targetHandle);if(!i||!a)return(u=e.onError)==null||u.call(e,"008",Ae.error008(i?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const s=(i==null?void 0:i.position)||U.Bottom,l=(a==null?void 0:a.position)||U.Top,c=Lt(t,i,s),d=Lt(n,a,l);return{sourceX:c.x,sourceY:c.y,targetX:d.x,targetY:d.y,sourcePosition:s,targetPosition:l}}function $a(e){if(!e)return null;const t=[],n=[];for(const o of e)o.width=o.width??1,o.height=o.height??1,o.type==="source"?t.push(o):o.type==="target"&&n.push(o);return{source:t,target:n}}function Lt(e,t,n=U.Left,o=!1){const r=((t==null?void 0:t.x)??0)+e.internals.positionAbsolute.x,i=((t==null?void 0:t.y)??0)+e.internals.positionAbsolute.y,{width:a,height:s}=t??Oe(e);if(o)return{x:r+a/2,y:i+s/2};switch((t==null?void 0:t.position)??n){case U.Top:return{x:r+a/2,y:i};case U.Right:return{x:r+a,y:i+s/2};case U.Bottom:return{x:r+a/2,y:i+s};case U.Left:return{x:r,y:i+s/2}}}function Va(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function Jo(e,t){return e?typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(n=>`${n}=${e[n]}`).join("&")}`:""}function Cp(e,{id:t,defaultColor:n,defaultMarkerStart:o,defaultMarkerEnd:r}){const i=new Set;return e.reduce((a,s)=>([s.markerStart||o,s.markerEnd||r].forEach(l=>{if(l&&typeof l=="object"){const c=Jo(l,t);i.has(c)||(a.push({id:c,color:l.color||n,...l}),i.add(c))}}),a),[]).sort((a,s)=>a.id.localeCompare(s.id))}const er={nodeOrigin:[0,0],nodeExtent:At,elevateNodesOnSelect:!0,defaults:{}},kp={...er,checkEquality:!0};function tr(e,t){const n={...e};for(const o in t)t[o]!==void 0&&(n[o]=t[o]);return n}function Pp(e,t,n){const o=tr(er,n);for(const r of e.values())if(r.parentId)or(r,e,t,o);else{const i=It(r,o.nodeOrigin),a=lt(r.extent)?r.extent:o.nodeExtent,s=Ue(i,a,Oe(r));r.internals.positionAbsolute=s}}function nr(e,t,n,o){var s,l;const r=tr(kp,o),i=new Map(t),a=r!=null&&r.elevateNodesOnSelect?1e3:0;t.clear(),n.clear();for(const c of e){let d=i.get(c.id);if(r.checkEquality&&c===(d==null?void 0:d.internals.userNode))t.set(c.id,d);else{const u=It(c,r.nodeOrigin),f=lt(c.extent)?c.extent:r.nodeExtent,p=Ue(u,f,Oe(c));d={...r.defaults,...c,measured:{width:(s=c.measured)==null?void 0:s.width,height:(l=c.measured)==null?void 0:l.height},internals:{positionAbsolute:p,handleBounds:c.measured?d==null?void 0:d.internals.handleBounds:void 0,z:Ba(c,a),userNode:c}},t.set(c.id,d)}c.parentId&&or(d,t,n,o)}}function Mp(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function or(e,t,n,o){const{elevateNodesOnSelect:r,nodeOrigin:i,nodeExtent:a}=tr(er,o),s=e.parentId,l=t.get(s);if(!l){console.warn(`Parent node ${s} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}Mp(e,n);const c=r?1e3:0,{x:d,y:u,z:f}=jp(e,l,i,a,c),{positionAbsolute:p}=e.internals,y=d!==p.x||u!==p.y;(y||f!==e.internals.z)&&(e.internals={...e.internals,positionAbsolute:y?{x:d,y:u}:p,z:f})}function Ba(e,t){return(be(e.zIndex)?e.zIndex:0)+(e.selected?t:0)}function jp(e,t,n,o,r){const{x:i,y:a}=t.internals.positionAbsolute,s=Oe(e),l=It(e,n),c=lt(e.extent)?Ue(l,e.extent,s):l;let d=Ue({x:i+c.x,y:a+c.y},o,s);e.extent==="parent"&&(d=va(d,s,t));const u=Ba(e,r),f=t.internals.z??0;return{x:d.x,y:d.y,z:f>u?f:u}}function rr(e,t,n,o=[0,0]){var a;const r=[],i=new Map;for(const s of e){const l=t.get(s.parentId);if(!l)continue;const c=((a=i.get(s.parentId))==null?void 0:a.expandedRect)??st(l),d=Sa(c,s.rect);i.set(s.parentId,{expandedRect:d,parent:l})}return i.size>0&&i.forEach(({expandedRect:s,parent:l},c)=>{var x;const d=l.internals.positionAbsolute,u=Oe(l),f=l.origin??o,p=s.x<d.x?Math.round(Math.abs(d.x-s.x)):0,y=s.y<d.y?Math.round(Math.abs(d.y-s.y)):0,g=Math.max(u.width,Math.round(s.width)),b=Math.max(u.height,Math.round(s.height)),m=(g-u.width)*f[0],w=(b-u.height)*f[1];(p>0||y>0||m||w)&&(r.push({id:c,type:"position",position:{x:l.position.x-p+m,y:l.position.y-y+w}}),(x=n.get(c))==null||x.forEach(v=>{e.some(E=>E.id===v.id)||r.push({id:v.id,type:"position",position:{x:v.position.x+p,y:v.position.y+y}})})),(u.width<s.width||u.height<s.height||p||y)&&r.push({id:c,type:"dimensions",setAttributes:!0,dimensions:{width:g+(p?f[0]*p-m:0),height:b+(y?f[1]*y-w:0)}})}),r}function Ap(e,t,n,o,r,i){const a=o==null?void 0:o.querySelector(".xyflow__viewport");let s=!1;if(!a)return{changes:[],updatedInternals:s};const l=[],c=window.getComputedStyle(a),{m22:d}=new window.DOMMatrixReadOnly(c.transform),u=[];for(const f of e.values()){const p=t.get(f.id);if(p)if(p.hidden)p.internals={...p.internals,handleBounds:void 0},s=!0;else{const y=Rn(f.nodeElement),g=p.measured.width!==y.width||p.measured.height!==y.height;if(y.width&&y.height&&(g||!p.internals.handleBounds||f.force)){const b=f.nodeElement.getBoundingClientRect(),m=lt(p.extent)?p.extent:i;let{positionAbsolute:w}=p.internals;p.parentId&&p.extent==="parent"?w=va(w,y,t.get(p.parentId)):m&&(w=Ue(w,m,y)),p.measured=y,p.internals={...p.internals,positionAbsolute:w,handleBounds:{source:Ma("source",f.nodeElement,b,d,p.id),target:Ma("target",f.nodeElement,b,d,p.id)}},p.parentId&&or(p,t,n,{nodeOrigin:r}),s=!0,g&&(l.push({id:p.id,type:"dimensions",dimensions:y}),p.expandParent&&p.parentId&&u.push({id:p.id,parentId:p.parentId,rect:st(p,r)}))}}}if(u.length>0){const f=rr(u,t,n,r);l.push(...f)}return{changes:l,updatedInternals:s}}async function Op({delta:e,panZoom:t,transform:n,translateExtent:o,width:r,height:i}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const a=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[r,i]],o),s=!!a&&(a.x!==n[0]||a.y!==n[1]||a.k!==n[2]);return Promise.resolve(s)}function Ha(e,t,n){e.clear(),t.clear();for(const o of n){const{source:r,target:i,sourceHandle:a=null,targetHandle:s=null}=o,l=`${r}-source-${a}`,c=`${i}-target-${s}`,d=e.get(l)||new Map,u=e.get(c)||new Map,f={edgeId:o.id,source:r,target:i,sourceHandle:a,targetHandle:s};t.set(o.id,o),e.set(l,d.set(`${i}-${s}`,f)),e.set(c,u.set(`${r}-${a}`,f))}}function Fa(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return n?n.selected?!0:Fa(n,t):!1}function Za(e,t,n){let o=e;do{if(o!=null&&o.matches(t))return!0;if(o===n)return!1;o=o.parentElement}while(o);return!1}function Ip(e,t,n,o){const r=new Map;for(const[i,a]of e)if((a.selected||a.id===o)&&(!a.parentId||!Fa(a,e))&&(a.draggable||t&&typeof a.draggable>"u")){const s=e.get(i);s&&r.set(i,{id:i,position:s.position||{x:0,y:0},distance:{x:n.x-s.internals.positionAbsolute.x,y:n.y-s.internals.positionAbsolute.y},extent:s.extent,parentId:s.parentId,origin:s.origin,expandParent:s.expandParent,internals:{positionAbsolute:s.internals.positionAbsolute||{x:0,y:0}},measured:{width:s.measured.width??0,height:s.measured.height??0}})}return r}function ir({nodeId:e,dragItems:t,nodeLookup:n,dragging:o=!0}){var a,s,l;const r=[];for(const[c,d]of t){const u=(a=n.get(c))==null?void 0:a.internals.userNode;u&&r.push({...u,position:d.position,dragging:o})}if(!e)return[r[0],r];const i=(s=n.get(e))==null?void 0:s.internals.userNode;return[i?{...i,position:((l=t.get(e))==null?void 0:l.position)||i.position,dragging:o}:r[0],r]}function zp({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:o,onDragStop:r}){let i={x:null,y:null},a=0,s=new Map,l=!1,c={x:0,y:0},d=null,u=!1,f=null,p=!1;function y({noDragClassName:b,handleSelector:m,domNode:w,isSelectable:x,nodeId:v,nodeClickDistance:E=0}){f=me(w);function O({x:z,y:$},D){const{nodeLookup:T,nodeExtent:_,snapGrid:P,snapToGrid:N,nodeOrigin:j,onNodeDrag:C,onSelectionDrag:M,onError:R,updateNodePositions:B}=t();i={x:z,y:$};let H=!1,G={x:0,y:0,x2:0,y2:0};if(s.size>1&&_){const F=zt(s);G=Go(F)}for(const[F,Z]of s){if(!T.has(F))continue;let q={x:z-Z.distance.x,y:$-Z.distance.y};N&&(q=In(q,P));let V=[[_[0][0],_[0][1]],[_[1][0],_[1][1]]];if(s.size>1&&_&&!Z.extent){const{positionAbsolute:Y}=Z.internals,W=Y.x-G.x+_[0][0],X=Y.x+Z.measured.width-G.x2+_[1][0],J=Y.y-G.y+_[0][1],te=Y.y+Z.measured.height-G.y2+_[1][1];V=[[W,J],[X,te]]}const{position:L,positionAbsolute:K}=xa({nodeId:F,nextPosition:q,nodeLookup:T,nodeExtent:V,nodeOrigin:j,onError:R});H=H||Z.position.x!==L.x||Z.position.y!==L.y,Z.position=L,Z.internals.positionAbsolute=K}if(H&&(B(s,!0),D&&(o||C||!v&&M))){const[F,Z]=ir({nodeId:v,dragItems:s,nodeLookup:T});o==null||o(D,s,F,Z),C==null||C(D,F,Z),v||(M==null||M(D,Z))}}async function k(){if(!d)return;const{transform:z,panBy:$,autoPanSpeed:D}=t(),[T,_]=ba(c,d,D);(T!==0||_!==0)&&(i.x=(i.x??0)-T/z[2],i.y=(i.y??0)-_/z[2],await $({x:T,y:_})&&O(i,null)),a=requestAnimationFrame(k)}function A(z){var H;const{nodeLookup:$,multiSelectionActive:D,nodesDraggable:T,transform:_,snapGrid:P,snapToGrid:N,selectNodesOnDrag:j,onNodeDragStart:C,onSelectionDragStart:M,unselectNodesAndEdges:R}=t();u=!0,(!j||!x)&&!D&&v&&((H=$.get(v))!=null&&H.selected||R()),x&&j&&v&&(e==null||e(v));const B=Tt(z.sourceEvent,{transform:_,snapGrid:P,snapToGrid:N,containerBounds:d});if(i=B,s=Ip($,T,B,v),s.size>0&&(n||C||!v&&M)){const[G,F]=ir({nodeId:v,dragItems:s,nodeLookup:$});n==null||n(z.sourceEvent,s,G,F),C==null||C(z.sourceEvent,G,F),v||(M==null||M(z.sourceEvent,F))}}const I=Oi().clickDistance(E).on("start",z=>{const{domNode:$,nodeDragThreshold:D,transform:T,snapGrid:_,snapToGrid:P}=t();d=($==null?void 0:$.getBoundingClientRect())||null,p=!1,D===0&&A(z),i=Tt(z.sourceEvent,{transform:T,snapGrid:_,snapToGrid:P,containerBounds:d}),c=Ie(z.sourceEvent,d)}).on("drag",z=>{const{autoPanOnNodeDrag:$,transform:D,snapGrid:T,snapToGrid:_,nodeDragThreshold:P,nodeLookup:N}=t(),j=Tt(z.sourceEvent,{transform:D,snapGrid:T,snapToGrid:_,containerBounds:d});if((z.sourceEvent.type==="touchmove"&&z.sourceEvent.touches.length>1||v&&!N.has(v))&&(p=!0),!p){if(!l&&$&&u&&(l=!0,k()),!u){const C=j.xSnapped-(i.x??0),M=j.ySnapped-(i.y??0);Math.sqrt(C*C+M*M)>P&&A(z)}(i.x!==j.xSnapped||i.y!==j.ySnapped)&&s&&u&&(c=Ie(z.sourceEvent,d),O(j,z.sourceEvent))}}).on("end",z=>{if(!(!u||p)&&(l=!1,u=!1,cancelAnimationFrame(a),s.size>0)){const{nodeLookup:$,updateNodePositions:D,onNodeDragStop:T,onSelectionDragStop:_}=t();if(D(s,!1),r||T||!v&&_){const[P,N]=ir({nodeId:v,dragItems:s,nodeLookup:$,dragging:!1});r==null||r(z.sourceEvent,s,P,N),T==null||T(z.sourceEvent,P,N),v||(_==null||_(z.sourceEvent,N))}}}).filter(z=>{const $=z.target;return!z.button&&(!b||!Za($,`.${b}`,w))&&(!m||Za($,m,w))});f.call(I)}function g(){f==null||f.on(".drag",null)}return{update:y,destroy:g}}function Rp(e,t,n){const o=[],r={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const i of t.values())Rt(r,st(i))>0&&o.push(i);return o}const Dp=250;function Tp(e,t,n,o){var s,l;let r=[],i=1/0;const a=Rp(e,n,t+Dp);for(const c of a){const d=[...((s=c.internals.handleBounds)==null?void 0:s.source)??[],...((l=c.internals.handleBounds)==null?void 0:l.target)??[]];for(const u of d){if(o.nodeId===u.nodeId&&o.type===u.type&&o.id===u.id)continue;const{x:f,y:p}=Lt(c,u,u.position,!0),y=Math.sqrt(Math.pow(f-e.x,2)+Math.pow(p-e.y,2));y>t||(y<i?(r=[{...u,x:f,y:p}],i=y):y===i&&r.push({...u,x:f,y:p}))}}if(!r.length)return null;if(r.length>1){const c=o.type==="source"?"target":"source";return r.find(d=>d.type===c)??r[0]}return r[0]}function Ya(e,t,n,o,r,i=!1){var c,d,u;const a=o.get(e);if(!a)return null;const s=r==="strict"?(c=a.internals.handleBounds)==null?void 0:c[t]:[...((d=a.internals.handleBounds)==null?void 0:d.source)??[],...((u=a.internals.handleBounds)==null?void 0:u.target)??[]],l=(n?s==null?void 0:s.find(f=>f.id===n):s==null?void 0:s[0])??null;return l&&i?{...l,...Lt(a,l,l.position,!0)}:l}function Xa(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function Lp(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}const Ka=()=>!0;function $p(e,{connectionMode:t,connectionRadius:n,handleId:o,nodeId:r,edgeUpdaterType:i,isTarget:a,domNode:s,nodeLookup:l,lib:c,autoPanOnConnect:d,flowId:u,panBy:f,cancelConnection:p,onConnectStart:y,onConnect:g,onConnectEnd:b,isValidConnection:m=Ka,onReconnectEnd:w,updateConnection:x,getTransform:v,getFromHandle:E,autoPanSpeed:O}){const k=ka(e.target);let A=0,I;const{x:z,y:$}=Ie(e),D=k==null?void 0:k.elementFromPoint(z,$),T=Xa(i,D),_=s==null?void 0:s.getBoundingClientRect();if(!_||!T)return;const P=Ya(r,T,o,l,t);if(!P)return;let N=Ie(e,_),j=!1,C=null,M=!1,R=null;function B(){if(!d||!_)return;const[L,K]=ba(N,_,O);f({x:L,y:K}),A=requestAnimationFrame(B)}const H={...P,nodeId:r,type:T,position:P.position},G=l.get(r),F={inProgress:!0,isValid:null,from:Lt(G,H,U.Left,!0),fromHandle:H,fromPosition:H.position,fromNode:G,to:N,toHandle:null,toPosition:ha[H.position],toNode:null};x(F);let Z=F;y==null||y(e,{nodeId:r,handleId:o,handleType:T});function q(L){if(!E()||!H){V(L);return}const K=v();N=Ie(L,_),I=Tp(Dt(N,K,!1,[1,1]),n,l,H),j||(B(),j=!0);const Y=Wa(L,{handle:I,connectionMode:t,fromNodeId:r,fromHandleId:o,fromType:a?"target":"source",isValidConnection:m,doc:k,lib:c,flowId:u,nodeLookup:l});R=Y.handleDomNode,C=Y.connection,M=Lp(!!I,Y.isValid);const W={...Z,isValid:M,to:I&&M?Ea({x:I.x,y:I.y},K):N,toHandle:Y.toHandle,toPosition:M&&Y.toHandle?Y.toHandle.position:ha[H.position],toNode:Y.toHandle?l.get(Y.toHandle.nodeId):null};M&&I&&Z.toHandle&&W.toHandle&&Z.toHandle.type===W.toHandle.type&&Z.toHandle.nodeId===W.toHandle.nodeId&&Z.toHandle.id===W.toHandle.id&&Z.to.x===W.to.x&&Z.to.y===W.to.y||(x(W),Z=W)}function V(L){(I||R)&&C&&M&&(g==null||g(C));const{inProgress:K,...Y}=Z,W={...Y,toPosition:Z.toHandle?Z.toPosition:null};b==null||b(L,W),i&&(w==null||w(L,W)),p(),cancelAnimationFrame(A),j=!1,M=!1,C=null,R=null,k.removeEventListener("mousemove",q),k.removeEventListener("mouseup",V),k.removeEventListener("touchmove",q),k.removeEventListener("touchend",V)}k.addEventListener("mousemove",q),k.addEventListener("mouseup",V),k.addEventListener("touchmove",q),k.addEventListener("touchend",V)}function Wa(e,{handle:t,connectionMode:n,fromNodeId:o,fromHandleId:r,fromType:i,doc:a,lib:s,flowId:l,isValidConnection:c=Ka,nodeLookup:d}){const u=i==="target",f=t?a.querySelector(`.${s}-flow__handle[data-id="${l}-${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`):null,{x:p,y}=Ie(e),g=a.elementFromPoint(p,y),b=g!=null&&g.classList.contains(`${s}-flow__handle`)?g:f,m={handleDomNode:b,isValid:!1,connection:null,toHandle:null};if(b){const w=Xa(void 0,b),x=b.getAttribute("data-nodeid"),v=b.getAttribute("data-handleid"),E=b.classList.contains("connectable"),O=b.classList.contains("connectableend");if(!x||!w)return m;const k={source:u?x:o,sourceHandle:u?v:r,target:u?o:x,targetHandle:u?r:v};m.connection=k;const A=E&&O&&(n===it.Strict?u&&w==="source"||!u&&w==="target":x!==o||v!==r);m.isValid=A&&c(k),m.toHandle=Ya(x,w,v,d,n,!1)}return m}const ar={onPointerDown:$p,isValid:Wa};function Vp({domNode:e,panZoom:t,getTransform:n,getViewScale:o}){const r=me(e);function i({translateExtent:s,width:l,height:c,zoomStep:d=10,pannable:u=!0,zoomable:f=!0,inversePan:p=!1}){const y=x=>{const v=n();if(x.sourceEvent.type!=="wheel"||!t)return;const E=-x.sourceEvent.deltaY*(x.sourceEvent.deltaMode===1?.05:x.sourceEvent.deltaMode?1:.002)*d,O=v[2]*Math.pow(2,E);t.scaleTo(O)};let g=[0,0];const b=x=>{(x.sourceEvent.type==="mousedown"||x.sourceEvent.type==="touchstart")&&(g=[x.sourceEvent.clientX??x.sourceEvent.touches[0].clientX,x.sourceEvent.clientY??x.sourceEvent.touches[0].clientY])},m=x=>{const v=n();if(x.sourceEvent.type!=="mousemove"&&x.sourceEvent.type!=="touchmove"||!t)return;const E=[x.sourceEvent.clientX??x.sourceEvent.touches[0].clientX,x.sourceEvent.clientY??x.sourceEvent.touches[0].clientY],O=[E[0]-g[0],E[1]-g[1]];g=E;const k=o()*Math.max(v[2],Math.log(v[2]))*(p?-1:1),A={x:v[0]-O[0]*k,y:v[1]-O[1]*k},I=[[0,0],[l,c]];t.setViewportConstrained({x:A.x,y:A.y,zoom:v[2]},I,s)},w=da().on("start",b).on("zoom",u?m:null).on("zoom.wheel",f?y:null);r.call(w,{})}function a(){r.on("zoom",null)}return{update:i,destroy:a,pointer:xe}}const Bp=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,Tn=e=>({x:e.x,y:e.y,zoom:e.k}),sr=({x:e,y:t,zoom:n})=>Pn.translate(e,t).scale(n),ct=(e,t)=>e.target.closest(`.${t}`),Ga=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),lr=(e,t=0,n=()=>{})=>{const o=typeof t=="number"&&t>0;return o||n(),o?e.transition().duration(t).on("end",n):e},Ua=e=>{const t=e.ctrlKey&&zn()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function Hp({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:o,panOnScrollMode:r,panOnScrollSpeed:i,zoomOnPinch:a,onPanZoomStart:s,onPanZoom:l,onPanZoomEnd:c}){return d=>{if(ct(d,t))return!1;d.preventDefault(),d.stopImmediatePropagation();const u=n.property("__zoom").k||1;if(d.ctrlKey&&a){const b=xe(d),m=Ua(d),w=u*Math.pow(2,m);o.scaleTo(n,w,b,d);return}const f=d.deltaMode===1?20:1;let p=r===Xe.Vertical?0:d.deltaX*f,y=r===Xe.Horizontal?0:d.deltaY*f;!zn()&&d.shiftKey&&r!==Xe.Vertical&&(p=d.deltaY*f,y=0),o.translateBy(n,-(p/u)*i,-(y/u)*i,{internal:!0});const g=Tn(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling||(e.isPanScrolling=!0,s==null||s(d,g)),e.isPanScrolling&&(l==null||l(d,g),e.panScrollTimeout=setTimeout(()=>{c==null||c(d,g),e.isPanScrolling=!1},150))}}function Fp({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(o,r){if(!t&&o.type==="wheel"&&!o.ctrlKey||ct(o,e))return null;o.preventDefault(),n.call(this,o,r)}}function Zp({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return o=>{var i,a,s;if((i=o.sourceEvent)!=null&&i.internal)return;const r=Tn(o.transform);e.mouseButton=((a=o.sourceEvent)==null?void 0:a.button)||0,e.isZoomingOrPanning=!0,e.prevViewport=r,((s=o.sourceEvent)==null?void 0:s.type)==="mousedown"&&t(!0),n&&(n==null||n(o.sourceEvent,r))}}function Yp({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:o,onPanZoom:r}){return i=>{var a,s;e.usedRightMouseButton=!!(n&&Ga(t,e.mouseButton??0)),(a=i.sourceEvent)!=null&&a.sync||o([i.transform.x,i.transform.y,i.transform.k]),r&&!((s=i.sourceEvent)!=null&&s.internal)&&(r==null||r(i.sourceEvent,Tn(i.transform)))}}function Xp({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:o,onPanZoomEnd:r,onPaneContextMenu:i}){return a=>{var s;if(!((s=a.sourceEvent)!=null&&s.internal)&&(e.isZoomingOrPanning=!1,i&&Ga(t,e.mouseButton??0)&&!e.usedRightMouseButton&&a.sourceEvent&&i(a.sourceEvent),e.usedRightMouseButton=!1,o(!1),r&&Bp(e.prevViewport,a.transform))){const l=Tn(a.transform);e.prevViewport=l,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{r==null||r(a.sourceEvent,l)},n?150:0)}}}function Kp({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:o,panOnScroll:r,zoomOnDoubleClick:i,userSelectionActive:a,noWheelClassName:s,noPanClassName:l,lib:c}){return d=>{var y;const u=e||t,f=n&&d.ctrlKey;if(d.button===1&&d.type==="mousedown"&&(ct(d,`${c}-flow__node`)||ct(d,`${c}-flow__edge`)))return!0;if(!o&&!u&&!r&&!i&&!n||a||ct(d,s)&&d.type==="wheel"||ct(d,l)&&(d.type!=="wheel"||r&&d.type==="wheel"&&!e)||!n&&d.ctrlKey&&d.type==="wheel")return!1;if(!n&&d.type==="touchstart"&&((y=d.touches)==null?void 0:y.length)>1)return d.preventDefault(),!1;if(!u&&!r&&!f&&d.type==="wheel"||!o&&(d.type==="mousedown"||d.type==="touchstart")||Array.isArray(o)&&!o.includes(d.button)&&d.type==="mousedown")return!1;const p=Array.isArray(o)&&o.includes(d.button)||!d.button||d.button<=1;return(!d.ctrlKey||d.type==="wheel")&&p}}function Wp({domNode:e,minZoom:t,maxZoom:n,paneClickDistance:o,translateExtent:r,viewport:i,onPanZoom:a,onPanZoomStart:s,onPanZoomEnd:l,onDraggingChange:c}){const d={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},u=e.getBoundingClientRect(),f=da().clickDistance(!be(o)||o<0?0:o).scaleExtent([t,n]).translateExtent(r),p=me(e).call(f);x({x:i.x,y:i.y,zoom:at(i.zoom,t,n)},[[0,0],[u.width,u.height]],r);const y=p.on("wheel.zoom"),g=p.on("dblclick.zoom");f.wheelDelta(Ua);function b(D,T){return p?new Promise(_=>{f==null||f.transform(lr(p,T==null?void 0:T.duration,()=>_(!0)),D)}):Promise.resolve(!1)}function m({noWheelClassName:D,noPanClassName:T,onPaneContextMenu:_,userSelectionActive:P,panOnScroll:N,panOnDrag:j,panOnScrollMode:C,panOnScrollSpeed:M,preventScrolling:R,zoomOnPinch:B,zoomOnScroll:H,zoomOnDoubleClick:G,zoomActivationKeyPressed:F,lib:Z,onTransformChange:q}){P&&!d.isZoomingOrPanning&&w();const V=N&&!F&&!P?Hp({zoomPanValues:d,noWheelClassName:D,d3Selection:p,d3Zoom:f,panOnScrollMode:C,panOnScrollSpeed:M,zoomOnPinch:B,onPanZoomStart:s,onPanZoom:a,onPanZoomEnd:l}):Fp({noWheelClassName:D,preventScrolling:R,d3ZoomHandler:y});if(p.on("wheel.zoom",V,{passive:!1}),!P){const K=Zp({zoomPanValues:d,onDraggingChange:c,onPanZoomStart:s});f.on("start",K);const Y=Yp({zoomPanValues:d,panOnDrag:j,onPaneContextMenu:!!_,onPanZoom:a,onTransformChange:q});f.on("zoom",Y);const W=Xp({zoomPanValues:d,panOnDrag:j,panOnScroll:N,onPaneContextMenu:_,onPanZoomEnd:l,onDraggingChange:c});f.on("end",W)}const L=Kp({zoomActivationKeyPressed:F,panOnDrag:j,zoomOnScroll:H,panOnScroll:N,zoomOnDoubleClick:G,zoomOnPinch:B,userSelectionActive:P,noPanClassName:T,noWheelClassName:D,lib:Z});f.filter(L),G?p.on("dblclick.zoom",g):p.on("dblclick.zoom",null)}function w(){f.on("zoom",null)}async function x(D,T,_){const P=sr(D),N=f==null?void 0:f.constrain()(P,T,_);return N&&await b(N),new Promise(j=>j(N))}async function v(D,T){const _=sr(D);return await b(_,T),new Promise(P=>P(_))}function E(D){if(p){const T=sr(D),_=p.property("__zoom");(_.k!==D.zoom||_.x!==D.x||_.y!==D.y)&&(f==null||f.transform(p,T,null,{sync:!0}))}}function O(){const D=p?la(p.node()):{x:0,y:0,k:1};return{x:D.x,y:D.y,zoom:D.k}}function k(D,T){return p?new Promise(_=>{f==null||f.scaleTo(lr(p,T==null?void 0:T.duration,()=>_(!0)),D)}):Promise.resolve(!1)}function A(D,T){return p?new Promise(_=>{f==null||f.scaleBy(lr(p,T==null?void 0:T.duration,()=>_(!0)),D)}):Promise.resolve(!1)}function I(D){f==null||f.scaleExtent(D)}function z(D){f==null||f.translateExtent(D)}function $(D){const T=!be(D)||D<0?0:D;f==null||f.clickDistance(T)}return{update:m,destroy:w,setViewport:v,setViewportConstrained:x,getViewport:O,scaleTo:k,scaleBy:A,setScaleExtent:I,setTranslateExtent:z,syncViewport:E,setClickDistance:$}}var dt;(function(e){e.Line="line",e.Handle="handle"})(dt||(dt={}));const Gp=["top-left","top-right","bottom-left","bottom-right"],Up=["top","right","bottom","left"];function qp({width:e,prevWidth:t,height:n,prevHeight:o,affectsX:r,affectsY:i}){const a=e-t,s=n-o,l=[a>0?1:a<0?-1:0,s>0?1:s<0?-1:0];return a&&r&&(l[0]=l[0]*-1),s&&i&&(l[1]=l[1]*-1),l}function Qp(e){const t=e.includes("right")||e.includes("left"),n=e.includes("bottom")||e.includes("top"),o=e.includes("left"),r=e.includes("top");return{isHorizontal:t,isVertical:n,affectsX:o,affectsY:r}}function $e(e,t){return Math.max(0,t-e)}function Ve(e,t){return Math.max(0,e-t)}function Ln(e,t,n){return Math.max(0,t-e,e-n)}function qa(e,t){return e?!t:t}function Jp(e,t,n,o,r,i,a,s){let{affectsX:l,affectsY:c}=t;const{isHorizontal:d,isVertical:u}=t,f=d&&u,{xSnapped:p,ySnapped:y}=n,{minWidth:g,maxWidth:b,minHeight:m,maxHeight:w}=o,{x,y:v,width:E,height:O,aspectRatio:k}=e;let A=Math.floor(d?p-e.pointerX:0),I=Math.floor(u?y-e.pointerY:0);const z=E+(l?-A:A),$=O+(c?-I:I),D=-i[0]*E,T=-i[1]*O;let _=Ln(z,g,b),P=Ln($,m,w);if(a){let C=0,M=0;l&&A<0?C=$e(x+A+D,a[0][0]):!l&&A>0&&(C=Ve(x+z+D,a[1][0])),c&&I<0?M=$e(v+I+T,a[0][1]):!c&&I>0&&(M=Ve(v+$+T,a[1][1])),_=Math.max(_,C),P=Math.max(P,M)}if(s){let C=0,M=0;l&&A>0?C=Ve(x+A,s[0][0]):!l&&A<0&&(C=$e(x+z,s[1][0])),c&&I>0?M=Ve(v+I,s[0][1]):!c&&I<0&&(M=$e(v+$,s[1][1])),_=Math.max(_,C),P=Math.max(P,M)}if(r){if(d){const C=Ln(z/k,m,w)*k;if(_=Math.max(_,C),a){let M=0;!l&&!c||l&&!c&&f?M=Ve(v+T+z/k,a[1][1])*k:M=$e(v+T+(l?A:-A)/k,a[0][1])*k,_=Math.max(_,M)}if(s){let M=0;!l&&!c||l&&!c&&f?M=$e(v+z/k,s[1][1])*k:M=Ve(v+(l?A:-A)/k,s[0][1])*k,_=Math.max(_,M)}}if(u){const C=Ln($*k,g,b)/k;if(P=Math.max(P,C),a){let M=0;!l&&!c||c&&!l&&f?M=Ve(x+$*k+D,a[1][0])/k:M=$e(x+(c?I:-I)*k+D,a[0][0])/k,P=Math.max(P,M)}if(s){let M=0;!l&&!c||c&&!l&&f?M=$e(x+$*k,s[1][0])/k:M=Ve(x+(c?I:-I)*k,s[0][0])/k,P=Math.max(P,M)}}}I=I+(I<0?P:-P),A=A+(A<0?_:-_),r&&(f?z>$*k?I=(qa(l,c)?-A:A)/k:A=(qa(l,c)?-I:I)*k:d?(I=A/k,c=l):(A=I*k,l=c));const N=l?x+A:x,j=c?v+I:v;return{width:E+(l?-A:A),height:O+(c?-I:I),x:i[0]*A*(l?-1:1)+N,y:i[1]*I*(c?-1:1)+j}}const Qa={width:0,height:0,x:0,y:0},em={...Qa,pointerX:0,pointerY:0,aspectRatio:1};function tm(e){return[[0,0],[e.measured.width,e.measured.height]]}function nm(e,t,n){const o=t.position.x+e.position.x,r=t.position.y+e.position.y,i=e.measured.width??0,a=e.measured.height??0,s=n[0]*i,l=n[1]*a;return[[o-s,r-l],[o+i-s,r+a-l]]}function om({domNode:e,nodeId:t,getStoreItems:n,onChange:o,onEnd:r}){const i=me(e);function a({controlPosition:l,boundaries:c,keepAspectRatio:d,onResizeStart:u,onResize:f,onResizeEnd:p,shouldResize:y}){let g={...Qa},b={...em};const m=Qp(l);let w,x=null,v=[],E,O,k;const A=Oi().on("start",I=>{const{nodeLookup:z,transform:$,snapGrid:D,snapToGrid:T,nodeOrigin:_,paneDomNode:P}=n();if(w=z.get(t),!w)return;x=(P==null?void 0:P.getBoundingClientRect())??null;const{xSnapped:N,ySnapped:j}=Tt(I.sourceEvent,{transform:$,snapGrid:D,snapToGrid:T,containerBounds:x});g={width:w.measured.width??0,height:w.measured.height??0,x:w.position.x??0,y:w.position.y??0},b={...g,pointerX:N,pointerY:j,aspectRatio:g.width/g.height},E=void 0,w.parentId&&(w.extent==="parent"||w.expandParent)&&(E=z.get(w.parentId),O=E&&w.extent==="parent"?tm(E):void 0),v=[],k=void 0;for(const[C,M]of z)if(M.parentId===t&&(v.push({id:C,position:{...M.position},extent:M.extent}),M.extent==="parent"||M.expandParent)){const R=nm(M,w,M.origin??_);k?k=[[Math.min(R[0][0],k[0][0]),Math.min(R[0][1],k[0][1])],[Math.max(R[1][0],k[1][0]),Math.max(R[1][1],k[1][1])]]:k=R}u==null||u(I,{...g})}).on("drag",I=>{const{transform:z,snapGrid:$,snapToGrid:D,nodeOrigin:T}=n(),_=Tt(I.sourceEvent,{transform:z,snapGrid:$,snapToGrid:D,containerBounds:x}),P=[];if(!w)return;const{x:N,y:j,width:C,height:M}=g,R={},B=w.origin??T,{width:H,height:G,x:F,y:Z}=Jp(b,m,_,c,d,B,O,k),q=H!==C,V=G!==M,L=F!==N&&q,K=Z!==j&&V;if(!L&&!K&&!q&&!V)return;if((L||K||B[0]===1||B[1]===1)&&(R.x=L?F:g.x,R.y=K?Z:g.y,g.x=R.x,g.y=R.y,v.length>0)){const X=F-N,J=Z-j;for(const te of v)te.position={x:te.position.x-X+B[0]*(H-C),y:te.position.y-J+B[1]*(G-M)},P.push(te)}if((q||V)&&(R.width=q?H:g.width,R.height=V?G:g.height,g.width=R.width,g.height=R.height),E&&w.expandParent){const X=B[0]*(R.width??0);R.x&&R.x<X&&(g.x=X,b.x=b.x-(R.x-X));const J=B[1]*(R.height??0);R.y&&R.y<J&&(g.y=J,b.y=b.y-(R.y-J))}const Y=qp({width:g.width,prevWidth:C,height:g.height,prevHeight:M,affectsX:m.affectsX,affectsY:m.affectsY}),W={...g,direction:Y};(y==null?void 0:y(I,W))!==!1&&(f==null||f(I,W),o(R,P))}).on("end",I=>{p==null||p(I,{...g}),r==null||r()});i.call(A)}function s(){i.on(".drag",null)}return{update:a,destroy:s}}const rm={BASE_URL:"/NoLLMChat/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_BASE_URL:"/NoLLMChat/",VITE_ROUTE_MODE:"hash"},Ja=e=>{let t;const n=new Set,o=(s,l)=>{const c=typeof s=="function"?s(t):s;if(!Object.is(c,t)){const d=t;t=l??(typeof c!="object"||c===null)?c:Object.assign({},t,c),n.forEach(u=>u(t,d))}},r=()=>t,i={setState:o,getState:r,getInitialState:()=>a,subscribe:s=>(n.add(s),()=>n.delete(s)),destroy:()=>{(rm?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},a=t=e(o,r,i);return i},im=e=>e?Ja(e):Ja,{useDebugValue:am}=ge,{useSyncExternalStoreWithSelector:sm}=Gx,lm=e=>e;function es(e,t=lm,n){const o=sm(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return am(o),o}const ts=(e,t)=>{const n=im(e),o=(r,i=t)=>es(n,r,i);return Object.assign(o,n),o},cm=(e,t)=>e?ts(e,t):ts;function oe(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[o,r]of e)if(!Object.is(r,t.get(o)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const o of e)if(!t.has(o))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const o of n)if(!Object.prototype.hasOwnProperty.call(t,o)||!Object.is(e[o],t[o]))return!1;return!0}const $n=S.createContext(null),dm=$n.Provider,ns=Ae.error001();ee=function(e,t){const n=S.useContext($n);if(n===null)throw new Error(ns);return es(n,e,t)},ne=function(){const e=S.useContext($n);if(e===null)throw new Error(ns);return S.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])};const os={display:"none"},um={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},rs="react-flow__node-desc",is="react-flow__edge-desc",fm="react-flow__aria-live",hm=e=>e.ariaLiveMessage;function pm({rfId:e}){const t=ee(hm);return h.jsx("div",{id:`${fm}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:um,children:t})}function mm({rfId:e,disableKeyboardA11y:t}){return h.jsxs(h.Fragment,{children:[h.jsxs("div",{id:`${rs}-${e}`,style:os,children:["Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "]}),h.jsx("div",{id:`${is}-${e}`,style:os,children:"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."}),!t&&h.jsx(pm,{rfId:e})]})}const gm=e=>e.userSelectionActive?"none":"all";an=function({position:e="top-left",children:t,className:n,style:o,...r}){const i=ee(gm),a=`${e}`.split("-");return h.jsx("div",{className:ie(["react-flow__panel",n,...a]),style:{...o,pointerEvents:i},...r,children:t})};function ym({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:h.jsx(an,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:h.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const xm=e=>{const t=[],n=[];for(const[,o]of e.nodeLookup)o.selected&&t.push(o.internals.userNode);for(const[,o]of e.edgeLookup)o.selected&&n.push(o);return{selectedNodes:t,selectedEdges:n}},Vn=e=>e.id;function vm(e,t){return oe(e.selectedNodes.map(Vn),t.selectedNodes.map(Vn))&&oe(e.selectedEdges.map(Vn),t.selectedEdges.map(Vn))}function wm({onSelectionChange:e}){const t=ne(),{selectedNodes:n,selectedEdges:o}=ee(xm,vm);return S.useEffect(()=>{const r={nodes:n,edges:o};e==null||e(r),t.getState().onSelectionChangeHandlers.forEach(i=>i(r))},[n,o,e]),null}const bm=e=>!!e.onSelectionChangeHandlers;function Sm({onSelectionChange:e}){const t=ee(bm);return e||t?h.jsx(wm,{onSelectionChange:e}):null}const as=[0,0],_m={x:0,y:0,zoom:1},Em=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","onBeforeDelete","debug","autoPanSpeed","paneClickDistance"],ss=[...Em,"rfId"],Nm=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setPaneClickDistance:e.setPaneClickDistance}),ls={translateExtent:At,nodeOrigin:as,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1",paneClickDistance:0};function Cm(e){const{setNodes:t,setEdges:n,setMinZoom:o,setMaxZoom:r,setTranslateExtent:i,setNodeExtent:a,reset:s,setDefaultNodesAndEdges:l,setPaneClickDistance:c}=ee(Nm,oe),d=ne();S.useEffect(()=>(l(e.defaultNodes,e.defaultEdges),()=>{u.current=ls,s()}),[]);const u=S.useRef(ls);return S.useEffect(()=>{for(const f of ss){const p=e[f],y=u.current[f];p!==y&&(typeof e[f]>"u"||(f==="nodes"?t(p):f==="edges"?n(p):f==="minZoom"?o(p):f==="maxZoom"?r(p):f==="translateExtent"?i(p):f==="nodeExtent"?a(p):f==="paneClickDistance"?c(p):f==="fitView"?d.setState({fitViewOnInit:p}):f==="fitViewOptions"?d.setState({fitViewOnInitOptions:p}):d.setState({[f]:p})))}u.current=e},ss.map(f=>e[f])),null}function cs(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function km(e){var o;const[t,n]=S.useState(e==="system"?null:e);return S.useEffect(()=>{if(e!=="system"){n(e);return}const r=cs(),i=()=>n(r!=null&&r.matches?"dark":"light");return i(),r==null||r.addEventListener("change",i),()=>{r==null||r.removeEventListener("change",i)}},[e]),t!==null?t:(o=cs())!=null&&o.matches?"dark":"light"}const ds=typeof document<"u"?document:null;function $t(e=null,t={target:ds,actInsideInputWithModifier:!0}){const[n,o]=S.useState(!1),r=S.useRef(!1),i=S.useRef(new Set([])),[a,s]=S.useMemo(()=>{if(e!==null){const l=(Array.isArray(e)?e:[e]).filter(d=>typeof d=="string").map(d=>d.replace("+",`
`).replace(`

`,`
+`).split(`
`)),c=l.reduce((d,u)=>d.concat(...u),[]);return[l,c]}return[[],[]]},[e]);return S.useEffect(()=>{const l=(t==null?void 0:t.target)||ds;if(e!==null){const c=f=>{if(r.current=f.ctrlKey||f.metaKey||f.shiftKey,(!r.current||r.current&&!t.actInsideInputWithModifier)&&qo(f))return!1;const p=fs(f.code,s);i.current.add(f[p]),us(a,i.current,!1)&&(f.preventDefault(),o(!0))},d=f=>{if((!r.current||r.current&&!t.actInsideInputWithModifier)&&qo(f))return!1;const p=fs(f.code,s);us(a,i.current,!0)?(o(!1),i.current.clear()):i.current.delete(f[p]),f.key==="Meta"&&i.current.clear(),r.current=!1},u=()=>{i.current.clear(),o(!1)};return l==null||l.addEventListener("keydown",c),l==null||l.addEventListener("keyup",d),window.addEventListener("blur",u),window.addEventListener("contextmenu",u),()=>{l==null||l.removeEventListener("keydown",c),l==null||l.removeEventListener("keyup",d),window.removeEventListener("blur",u),window.removeEventListener("contextmenu",u)}}},[e,o]),n}function us(e,t,n){return e.filter(o=>n||o.length===t.size).some(o=>o.every(r=>t.has(r)))}function fs(e,t){return t.includes(e)?"code":"key"}const Pm=()=>{const e=ne();return S.useMemo(()=>({zoomIn:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomOut:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1/1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomTo:(t,n)=>{const{panZoom:o}=e.getState();return o?o.scaleTo(t,{duration:n==null?void 0:n.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(t,n)=>{const{transform:[o,r,i],panZoom:a}=e.getState();return a?(await a.setViewport({x:t.x??o,y:t.y??r,zoom:t.zoom??i},{duration:n==null?void 0:n.duration}),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[t,n,o]=e.getState().transform;return{x:t,y:n,zoom:o}},fitView:t=>{const{nodeLookup:n,minZoom:o,maxZoom:r,panZoom:i,domNode:a}=e.getState();if(!i||!a)return Promise.resolve(!1);const s=Ko(n,t),{width:l,height:c}=Rn(a);return Wo({nodes:s,width:l,height:c,minZoom:o,maxZoom:r,panZoom:i},t)},setCenter:async(t,n,o)=>{const{width:r,height:i,maxZoom:a,panZoom:s}=e.getState(),l=typeof(o==null?void 0:o.zoom)<"u"?o.zoom:a,c=r/2-t*l,d=i/2-n*l;return s?(await s.setViewport({x:c,y:d,zoom:l},{duration:o==null?void 0:o.duration}),Promise.resolve(!0)):Promise.resolve(!1)},fitBounds:async(t,n)=>{const{width:o,height:r,minZoom:i,maxZoom:a,panZoom:s}=e.getState(),l=Uo(t,o,r,i,a,(n==null?void 0:n.padding)??.1);return s?(await s.setViewport(l,{duration:n==null?void 0:n.duration}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(t,n={snapToGrid:!0})=>{const{transform:o,snapGrid:r,domNode:i}=e.getState();if(!i)return t;const{x:a,y:s}=i.getBoundingClientRect(),l={x:t.x-a,y:t.y-s};return Dt(l,o,n.snapToGrid,r)},flowToScreenPosition:t=>{const{transform:n,domNode:o}=e.getState();if(!o)return t;const{x:r,y:i}=o.getBoundingClientRect(),a=Ea(t,n);return{x:a.x+r,y:a.y+i}}}),[])};function hs(e,t){const n=[],o=new Map,r=[];for(const i of e)if(i.type==="add"){r.push(i);continue}else if(i.type==="remove"||i.type==="replace")o.set(i.id,[i]);else{const a=o.get(i.id);a?a.push(i):o.set(i.id,[i])}for(const i of t){const a=o.get(i.id);if(!a){n.push(i);continue}if(a[0].type==="remove")continue;if(a[0].type==="replace"){n.push({...a[0].item});continue}const s={...i};for(const l of a)Mm(l,s);n.push(s)}return r.length&&r.forEach(i=>{i.index!==void 0?n.splice(i.index,0,{...i.item}):n.push({...i.item})}),n}function Mm(e,t){switch(e.type){case"select":{t.selected=e.selected;break}case"position":{typeof e.position<"u"&&(t.position=e.position),typeof e.dragging<"u"&&(t.dragging=e.dragging);break}case"dimensions":{typeof e.dimensions<"u"&&(t.measured??(t.measured={}),t.measured.width=e.dimensions.width,t.measured.height=e.dimensions.height,e.setAttributes&&(t.width=e.dimensions.width,t.height=e.dimensions.height)),typeof e.resizing=="boolean"&&(t.resizing=e.resizing);break}}}Ye=function(e,t){return hs(e,t)};function Vt(e,t){return hs(e,t)}function qe(e,t){return{id:e,type:"select",selected:t}}function ut(e,t=new Set,n=!1){const o=[];for(const[r,i]of e){const a=t.has(r);!(i.selected===void 0&&!a)&&i.selected!==a&&(n&&(i.selected=a),o.push(qe(i.id,a)))}return o}function ps({items:e=[],lookup:t}){var r;const n=[],o=new Map(e.map(i=>[i.id,i]));for(const[i,a]of e.entries()){const s=t.get(a.id),l=((r=s==null?void 0:s.internals)==null?void 0:r.userNode)??s;l!==void 0&&l!==a&&n.push({id:a.id,item:a,type:"replace"}),l===void 0&&n.push({item:a,type:"add",index:i})}for(const[i]of t)o.get(i)===void 0&&n.push({id:i,type:"remove"});return n}function ms(e){return{id:e.id,type:"remove"}}const gs=e=>fp(e),jm=e=>ga(e);function ys(e){return S.forwardRef(e)}const Am=typeof window<"u"?S.useLayoutEffect:S.useEffect;function xs(e){const[t,n]=S.useState(BigInt(0)),[o]=S.useState(()=>Om(()=>n(r=>r+BigInt(1))));return Am(()=>{const r=o.get();r.length&&(e(r),o.reset())},[t]),o}function Om(e){let t=[];return{get:()=>t,reset:()=>{t=[]},push:n=>{t.push(n),e()}}}const vs=S.createContext(null);function Im({children:e}){const t=ne(),n=S.useCallback(s=>{const{nodes:l=[],setNodes:c,hasDefaultNodes:d,onNodesChange:u,nodeLookup:f}=t.getState();let p=l;for(const y of s)p=typeof y=="function"?y(p):y;d?c(p):u&&u(ps({items:p,lookup:f}))},[]),o=xs(n),r=S.useCallback(s=>{const{edges:l=[],setEdges:c,hasDefaultEdges:d,onEdgesChange:u,edgeLookup:f}=t.getState();let p=l;for(const y of s)p=typeof y=="function"?y(p):y;d?c(p):u&&u(ps({items:p,lookup:f}))},[]),i=xs(r),a=S.useMemo(()=>({nodeQueue:o,edgeQueue:i}),[]);return h.jsx(vs.Provider,{value:a,children:e})}function zm(){const e=S.useContext(vs);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}const Rm=e=>!!e.panZoom;nn=function(){const e=Pm(),t=ne(),n=zm(),o=ee(Rm),r=S.useMemo(()=>{const i=u=>t.getState().nodeLookup.get(u),a=u=>{n.nodeQueue.push(u)},s=u=>{n.edgeQueue.push(u)},l=u=>{var m,w;const{nodeLookup:f,nodeOrigin:p}=t.getState(),y=gs(u)?u:f.get(u.id),g=y.parentId?Ca(y.position,y.measured,y.parentId,f,p):y.position,b={id:y.id,position:g,width:((m=y.measured)==null?void 0:m.width)??y.width,height:((w=y.measured)==null?void 0:w.height)??y.height,data:y.data};return st(b)},c=(u,f,p={replace:!1})=>{a(y=>y.map(g=>{if(g.id===u){const b=typeof f=="function"?f(g):f;return p.replace&&gs(b)?b:{...g,...b}}return g}))},d=(u,f,p={replace:!1})=>{s(y=>y.map(g=>{if(g.id===u){const b=typeof f=="function"?f(g):f;return p.replace&&jm(b)?b:{...g,...b}}return g}))};return{getNodes:()=>t.getState().nodes.map(u=>({...u})),getNode:u=>{var f;return(f=i(u))==null?void 0:f.internals.userNode},getInternalNode:i,getEdges:()=>{const{edges:u=[]}=t.getState();return u.map(f=>({...f}))},getEdge:u=>t.getState().edgeLookup.get(u),setNodes:a,setEdges:s,addNodes:u=>{const f=Array.isArray(u)?u:[u];n.nodeQueue.push(p=>[...p,...f])},addEdges:u=>{const f=Array.isArray(u)?u:[u];n.edgeQueue.push(p=>[...p,...f])},toObject:()=>{const{nodes:u=[],edges:f=[],transform:p}=t.getState(),[y,g,b]=p;return{nodes:u.map(m=>({...m})),edges:f.map(m=>({...m})),viewport:{x:y,y:g,zoom:b}}},deleteElements:async({nodes:u=[],edges:f=[]})=>{const{nodes:p,edges:y,onNodesDelete:g,onEdgesDelete:b,triggerNodeChanges:m,triggerEdgeChanges:w,onDelete:x,onBeforeDelete:v}=t.getState(),{nodes:E,edges:O}=await mp({nodesToRemove:u,edgesToRemove:f,nodes:p,edges:y,onBeforeDelete:v}),k=O.length>0,A=E.length>0;if(k){const I=O.map(ms);b==null||b(O),w(I)}if(A){const I=E.map(ms);g==null||g(E),m(I)}return(A||k)&&(x==null||x({nodes:E,edges:O})),{deletedNodes:E,deletedEdges:O}},getIntersectingNodes:(u,f=!0,p)=>{const y=_a(u),g=y?u:l(u),b=p!==void 0;return g?(p||t.getState().nodes).filter(m=>{const w=t.getState().nodeLookup.get(m.id);if(w&&!y&&(m.id===u.id||!w.internals.positionAbsolute))return!1;const x=st(b?m:w),v=Rt(x,g);return f&&v>0||v>=g.width*g.height}):[]},isNodeIntersecting:(u,f,p=!0)=>{const y=_a(u)?u:l(u);if(!y)return!1;const g=Rt(y,f);return p&&g>0||g>=y.width*y.height},updateNode:c,updateNodeData:(u,f,p={replace:!1})=>{c(u,y=>{const g=typeof f=="function"?f(y):f;return p.replace?{...y,data:g}:{...y,data:{...y.data,...g}}},p)},updateEdge:d,updateEdgeData:(u,f,p={replace:!1})=>{d(u,y=>{const g=typeof f=="function"?f(y):f;return p.replace?{...y,data:g}:{...y,data:{...y.data,...g}}},p)},getNodesBounds:u=>{const{nodeLookup:f,nodeOrigin:p}=t.getState();return hp(u,{nodeLookup:f,nodeOrigin:p})},getHandleConnections:({type:u,id:f,nodeId:p})=>{var y;return Array.from(((y=t.getState().connectionLookup.get(`${p}-${u}-${f??null}`))==null?void 0:y.values())??[])}}},[]);return S.useMemo(()=>({...r,...e,viewportInitialized:o}),[o])};const ws=e=>e.selected,Dm={actInsideInputWithModifier:!1},Tm=typeof window<"u"?window:void 0;function Lm({deleteKeyCode:e,multiSelectionKeyCode:t}){const n=ne(),{deleteElements:o}=nn(),r=$t(e,Dm),i=$t(t,{target:Tm});S.useEffect(()=>{if(r){const{edges:a,nodes:s}=n.getState();o({nodes:s.filter(ws),edges:a.filter(ws)}),n.setState({nodesSelectionActive:!1})}},[r]),S.useEffect(()=>{n.setState({multiSelectionActive:i})},[i])}function $m(e){const t=ne();S.useEffect(()=>{const n=()=>{var r,i;if(!e.current)return!1;const o=Rn(e.current);(o.height===0||o.width===0)&&((i=(r=t.getState()).onError)==null||i.call(r,"004",Ae.error004())),t.setState({width:o.width||500,height:o.height||500})};if(e.current){n(),window.addEventListener("resize",n);const o=new ResizeObserver(()=>n());return o.observe(e.current),()=>{window.removeEventListener("resize",n),o&&e.current&&o.unobserve(e.current)}}},[])}const Bn={position:"absolute",width:"100%",height:"100%",top:0,left:0},Vm=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib});function Bm({onPaneContextMenu:e,zoomOnScroll:t=!0,zoomOnPinch:n=!0,panOnScroll:o=!1,panOnScrollSpeed:r=.5,panOnScrollMode:i=Xe.Free,zoomOnDoubleClick:a=!0,panOnDrag:s=!0,defaultViewport:l,translateExtent:c,minZoom:d,maxZoom:u,zoomActivationKeyCode:f,preventScrolling:p=!0,children:y,noWheelClassName:g,noPanClassName:b,onViewportChange:m,isControlledViewport:w,paneClickDistance:x}){const v=ne(),E=S.useRef(null),{userSelectionActive:O,lib:k}=ee(Vm,oe),A=$t(f),I=S.useRef();$m(E);const z=S.useCallback($=>{m==null||m({x:$[0],y:$[1],zoom:$[2]}),w||v.setState({transform:$})},[m,w]);return S.useEffect(()=>{if(E.current){I.current=Wp({domNode:E.current,minZoom:d,maxZoom:u,translateExtent:c,viewport:l,paneClickDistance:x,onDraggingChange:_=>v.setState({paneDragging:_}),onPanZoomStart:(_,P)=>{const{onViewportChangeStart:N,onMoveStart:j}=v.getState();j==null||j(_,P),N==null||N(P)},onPanZoom:(_,P)=>{const{onViewportChange:N,onMove:j}=v.getState();j==null||j(_,P),N==null||N(P)},onPanZoomEnd:(_,P)=>{const{onViewportChangeEnd:N,onMoveEnd:j}=v.getState();j==null||j(_,P),N==null||N(P)}});const{x:$,y:D,zoom:T}=I.current.getViewport();return v.setState({panZoom:I.current,transform:[$,D,T],domNode:E.current.closest(".react-flow")}),()=>{var _;(_=I.current)==null||_.destroy()}}},[]),S.useEffect(()=>{var $;($=I.current)==null||$.update({onPaneContextMenu:e,zoomOnScroll:t,zoomOnPinch:n,panOnScroll:o,panOnScrollSpeed:r,panOnScrollMode:i,zoomOnDoubleClick:a,panOnDrag:s,zoomActivationKeyPressed:A,preventScrolling:p,noPanClassName:b,userSelectionActive:O,noWheelClassName:g,lib:k,onTransformChange:z})},[e,t,n,o,r,i,a,s,A,p,b,O,g,k,z]),h.jsx("div",{className:"react-flow__renderer",ref:E,style:Bn,children:y})}const Hm=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function Fm(){const{userSelectionActive:e,userSelectionRect:t}=ee(Hm,oe);return e&&t?h.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}const cr=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},Zm=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging});function Ym({isSelecting:e,selectionKeyPressed:t,selectionMode:n=Ot.Full,panOnDrag:o,selectionOnDrag:r,onSelectionStart:i,onSelectionEnd:a,onPaneClick:s,onPaneContextMenu:l,onPaneScroll:c,onPaneMouseEnter:d,onPaneMouseMove:u,onPaneMouseLeave:f,children:p}){const y=S.useRef(null),g=ne(),b=S.useRef(0),m=S.useRef(0),w=S.useRef(),x=S.useRef(new Map),{userSelectionActive:v,elementsSelectable:E,dragging:O}=ee(Zm,oe),k=E&&(e||v),A=S.useRef(!1),I=S.useRef(!1),z=()=>{g.setState({userSelectionActive:!1,userSelectionRect:null}),b.current=0,m.current=0},$=C=>{if(A.current){A.current=!1;return}s==null||s(C),g.getState().resetSelectedElements(),g.setState({nodesSelectionActive:!1})},D=C=>{if(Array.isArray(o)&&(o!=null&&o.includes(2))){C.preventDefault();return}l==null||l(C)},T=c?C=>c(C):void 0,_=C=>{var F,Z,q,V;const{resetSelectedElements:M,domNode:R,edgeLookup:B}=g.getState();if(w.current=R==null?void 0:R.getBoundingClientRect(),!E||!e||C.button!==0||C.target!==y.current||!w.current)return;(Z=(F=C.target)==null?void 0:F.setPointerCapture)==null||Z.call(F,C.pointerId),I.current=!0,A.current=!1,x.current=new Map;for(const[L,K]of B)x.current.set(K.source,((q=x.current.get(K.source))==null?void 0:q.add(L))||new Set([L])),x.current.set(K.target,((V=x.current.get(K.target))==null?void 0:V.add(L))||new Set([L]));const{x:H,y:G}=Ie(C.nativeEvent,w.current);M(),g.setState({userSelectionRect:{width:0,height:0,startX:H,startY:G,x:H,y:G}}),i==null||i(C)},P=C=>{const{userSelectionRect:M,edgeLookup:R,transform:B,nodeLookup:H,triggerNodeChanges:G,triggerEdgeChanges:F}=g.getState();if(!w.current||!M)return;A.current=!0;const{x:Z,y:q}=Ie(C.nativeEvent,w.current),{startX:V,startY:L}=M,K={startX:V,startY:L,x:Z<V?Z:V,y:q<L?q:L,width:Math.abs(Z-V),height:Math.abs(q-L)},Y=ya(H,K,B,n===Ot.Partial,!0),W=new Set,X=new Set;for(const J of Y){X.add(J.id);const te=x.current.get(J.id);if(te)for(const ue of te)W.add(ue)}if(b.current!==X.size){b.current=X.size;const J=ut(H,X,!0);G(J)}if(m.current!==W.size){m.current=W.size;const J=ut(R,W);F(J)}g.setState({userSelectionRect:K,userSelectionActive:!0,nodesSelectionActive:!1})},N=C=>{var R,B;if(C.button!==0||!I.current)return;(B=(R=C.target)==null?void 0:R.releasePointerCapture)==null||B.call(R,C.pointerId);const{userSelectionRect:M}=g.getState();!v&&M&&C.target===y.current&&($==null||$(C)),b.current>0&&g.setState({nodesSelectionActive:!0}),z(),a==null||a(C),(t||r)&&(A.current=!1),I.current=!1},j=o===!0||Array.isArray(o)&&o.includes(0);return h.jsxs("div",{className:ie(["react-flow__pane",{draggable:j,dragging:O,selection:e}]),onClick:k?void 0:cr($,y),onContextMenu:cr(D,y),onWheel:cr(T,y),onPointerEnter:k?void 0:d,onPointerDown:k?_:u,onPointerMove:k?P:u,onPointerUp:k?N:void 0,onPointerLeave:f,ref:y,style:Bn,children:[p,h.jsx(Fm,{})]})}function dr({id:e,store:t,unselect:n=!1,nodeRef:o}){const{addSelectedNodes:r,unselectNodesAndEdges:i,multiSelectionActive:a,nodeLookup:s,onError:l}=t.getState(),c=s.get(e);if(!c){l==null||l("012",Ae.error012(e));return}t.setState({nodesSelectionActive:!1}),c.selected?(n||c.selected&&a)&&(i({nodes:[c],edges:[]}),requestAnimationFrame(()=>{var d;return(d=o==null?void 0:o.current)==null?void 0:d.blur()})):r([e])}function bs({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:o,nodeId:r,isSelectable:i,nodeClickDistance:a}){const s=ne(),[l,c]=S.useState(!1),d=S.useRef();return S.useEffect(()=>{d.current=zp({getStoreItems:()=>s.getState(),onNodeMouseDown:u=>{dr({id:u,store:s,nodeRef:e})},onDragStart:()=>{c(!0)},onDragStop:()=>{c(!1)}})},[]),S.useEffect(()=>{var u,f;if(t)(u=d.current)==null||u.destroy();else if(e.current)return(f=d.current)==null||f.update({noDragClassName:n,handleSelector:o,domNode:e.current,isSelectable:i,nodeId:r,nodeClickDistance:a}),()=>{var p;(p=d.current)==null||p.destroy()}},[n,o,t,i,e,r]),l}const Xm=e=>t=>t.selected&&(t.draggable||e&&typeof t.draggable>"u");function Ss(){const e=ne();return S.useCallback(t=>{const{nodeExtent:n,snapToGrid:o,snapGrid:r,nodesDraggable:i,onError:a,updateNodePositions:s,nodeLookup:l,nodeOrigin:c}=e.getState(),d=new Map,u=Xm(i),f=o?r[0]:5,p=o?r[1]:5,y=t.direction.x*f*t.factor,g=t.direction.y*p*t.factor;for(const[,b]of l){if(!u(b))continue;let m={x:b.internals.positionAbsolute.x+y,y:b.internals.positionAbsolute.y+g};o&&(m=In(m,r));const{position:w,positionAbsolute:x}=xa({nodeId:b.id,nextPosition:m,nodeLookup:l,nodeExtent:n,nodeOrigin:c,onError:a});b.position=w,b.internals.positionAbsolute=x,d.set(b.id,b)}s(d)},[])}const ur=S.createContext(null),Km=ur.Provider;ur.Consumer;const fr=()=>S.useContext(ur),Wm=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),Gm=(e,t,n)=>o=>{const{connectionClickStartHandle:r,connectionMode:i,connection:a}=o,{fromHandle:s,toHandle:l,isValid:c}=a,d=(l==null?void 0:l.nodeId)===e&&(l==null?void 0:l.id)===t&&(l==null?void 0:l.type)===n;return{connectingFrom:(s==null?void 0:s.nodeId)===e&&(s==null?void 0:s.id)===t&&(s==null?void 0:s.type)===n,connectingTo:d,clickConnecting:(r==null?void 0:r.nodeId)===e&&(r==null?void 0:r.id)===t&&(r==null?void 0:r.type)===n,isPossibleEndHandle:i===it.Strict?(s==null?void 0:s.type)!==n:e!==(s==null?void 0:s.nodeId)||t!==(s==null?void 0:s.id),connectionInProcess:!!s,valid:d&&c}};function Um({type:e="source",position:t=U.Top,isValidConnection:n,isConnectable:o=!0,isConnectableStart:r=!0,isConnectableEnd:i=!0,id:a,onConnect:s,children:l,className:c,onMouseDown:d,onTouchStart:u,...f},p){var _,P;const y=a||null,g=e==="target",b=ne(),m=fr(),{connectOnClick:w,noPanClassName:x,rfId:v}=ee(Wm,oe),{connectingFrom:E,connectingTo:O,clickConnecting:k,isPossibleEndHandle:A,connectionInProcess:I,valid:z}=ee(Gm(m,y,e),oe);m||((P=(_=b.getState()).onError)==null||P.call(_,"010",Ae.error010()));const $=N=>{const{defaultEdgeOptions:j,onConnect:C,hasDefaultEdges:M}=b.getState(),R={...j,...N};if(M){const{edges:B,setEdges:H}=b.getState();H(za(R,B))}C==null||C(R),s==null||s(R)},D=N=>{if(!m)return;const j=Pa(N.nativeEvent);if(r&&(j&&N.button===0||!j)){const C=b.getState();ar.onPointerDown(N.nativeEvent,{autoPanOnConnect:C.autoPanOnConnect,connectionMode:C.connectionMode,connectionRadius:C.connectionRadius,domNode:C.domNode,nodeLookup:C.nodeLookup,lib:C.lib,isTarget:g,handleId:y,nodeId:m,flowId:C.rfId,panBy:C.panBy,cancelConnection:C.cancelConnection,onConnectStart:C.onConnectStart,onConnectEnd:C.onConnectEnd,updateConnection:C.updateConnection,onConnect:$,isValidConnection:n||C.isValidConnection,getTransform:()=>b.getState().transform,getFromHandle:()=>b.getState().connection.fromHandle,autoPanSpeed:C.autoPanSpeed})}j?d==null||d(N):u==null||u(N)},T=N=>{const{onClickConnectStart:j,onClickConnectEnd:C,connectionClickStartHandle:M,connectionMode:R,isValidConnection:B,lib:H,rfId:G,nodeLookup:F,connection:Z}=b.getState();if(!m||!M&&!r)return;if(!M){j==null||j(N.nativeEvent,{nodeId:m,handleId:y,handleType:e}),b.setState({connectionClickStartHandle:{nodeId:m,type:e,id:y}});return}const q=ka(N.target),V=n||B,{connection:L,isValid:K}=ar.isValid(N.nativeEvent,{handle:{nodeId:m,id:y,type:e},connectionMode:R,fromNodeId:M.nodeId,fromHandleId:M.id||null,fromType:M.type,isValidConnection:V,flowId:G,doc:q,lib:H,nodeLookup:F});K&&L&&$(L);const Y=structuredClone(Z);delete Y.inProgress,Y.toPosition=Y.toHandle?Y.toHandle.position:null,C==null||C(N,Y),b.setState({connectionClickStartHandle:null})};return h.jsx("div",{"data-handleid":y,"data-nodeid":m,"data-handlepos":t,"data-id":`${v}-${m}-${y}-${e}`,className:ie(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",x,c,{source:!g,target:g,connectable:o,connectablestart:r,connectableend:i,clickconnecting:k,connectingfrom:E,connectingto:O,valid:z,connectionindicator:o&&(!I||A)&&(I?i:r)}]),onMouseDown:D,onTouchStart:D,onClick:w?T:void 0,ref:p,...f,children:l})}xt=S.memo(ys(Um));function qm({data:e,isConnectable:t,sourcePosition:n=U.Bottom}){return h.jsxs(h.Fragment,{children:[e==null?void 0:e.label,h.jsx(xt,{type:"source",position:n,isConnectable:t})]})}function Qm({data:e,isConnectable:t,targetPosition:n=U.Top,sourcePosition:o=U.Bottom}){return h.jsxs(h.Fragment,{children:[h.jsx(xt,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,h.jsx(xt,{type:"source",position:o,isConnectable:t})]})}function Jm(){return null}function eg({data:e,isConnectable:t,targetPosition:n=U.Top}){return h.jsxs(h.Fragment,{children:[h.jsx(xt,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label]})}const Hn={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},_s={input:qm,default:Qm,output:eg,group:Jm};function tg(e){var t,n,o,r;return e.internals.handleBounds===void 0?{width:e.width??e.initialWidth??((t=e.style)==null?void 0:t.width),height:e.height??e.initialHeight??((n=e.style)==null?void 0:n.height)}:{width:e.width??((o=e.style)==null?void 0:o.width),height:e.height??((r=e.style)==null?void 0:r.height)}}const ng=e=>{const{width:t,height:n,x:o,y:r}=zt(e.nodeLookup,{filter:i=>!!i.selected});return{width:be(t)?t:null,height:be(n)?n:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${o}px,${r}px)`}};function og({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const o=ne(),{width:r,height:i,transformString:a,userSelectionActive:s}=ee(ng,oe),l=Ss(),c=S.useRef(null);if(S.useEffect(()=>{var f;n||((f=c.current)==null||f.focus({preventScroll:!0}))},[n]),bs({nodeRef:c}),s||!r||!i)return null;const d=e?f=>{const p=o.getState().nodes.filter(y=>y.selected);e(f,p)}:void 0,u=f=>{Object.prototype.hasOwnProperty.call(Hn,f.key)&&l({direction:Hn[f.key],factor:f.shiftKey?4:1})};return h.jsx("div",{className:ie(["react-flow__nodesselection","react-flow__container",t]),style:{transform:a},children:h.jsx("div",{ref:c,className:"react-flow__nodesselection-rect",onContextMenu:d,tabIndex:n?void 0:-1,onKeyDown:n?void 0:u,style:{width:r,height:i}})})}const Es=typeof window<"u"?window:void 0,rg=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function Ns({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:o,onPaneMouseLeave:r,onPaneContextMenu:i,onPaneScroll:a,paneClickDistance:s,deleteKeyCode:l,selectionKeyCode:c,selectionOnDrag:d,selectionMode:u,onSelectionStart:f,onSelectionEnd:p,multiSelectionKeyCode:y,panActivationKeyCode:g,zoomActivationKeyCode:b,elementsSelectable:m,zoomOnScroll:w,zoomOnPinch:x,panOnScroll:v,panOnScrollSpeed:E,panOnScrollMode:O,zoomOnDoubleClick:k,panOnDrag:A,defaultViewport:I,translateExtent:z,minZoom:$,maxZoom:D,preventScrolling:T,onSelectionContextMenu:_,noWheelClassName:P,noPanClassName:N,disableKeyboardA11y:j,onViewportChange:C,isControlledViewport:M}){const{nodesSelectionActive:R,userSelectionActive:B}=ee(rg),H=$t(c,{target:Es}),G=$t(g,{target:Es}),F=G||A,Z=G||v,q=d&&F!==!0,V=H||B||q;return Lm({deleteKeyCode:l,multiSelectionKeyCode:y}),h.jsx(Bm,{onPaneContextMenu:i,elementsSelectable:m,zoomOnScroll:w,zoomOnPinch:x,panOnScroll:Z,panOnScrollSpeed:E,panOnScrollMode:O,zoomOnDoubleClick:k,panOnDrag:!H&&F,defaultViewport:I,translateExtent:z,minZoom:$,maxZoom:D,zoomActivationKeyCode:b,preventScrolling:T,noWheelClassName:P,noPanClassName:N,onViewportChange:C,isControlledViewport:M,paneClickDistance:s,children:h.jsxs(Ym,{onSelectionStart:f,onSelectionEnd:p,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:o,onPaneMouseLeave:r,onPaneContextMenu:i,onPaneScroll:a,panOnDrag:F,isSelecting:!!V,selectionMode:u,selectionKeyPressed:H,selectionOnDrag:q,children:[e,R&&h.jsx(og,{onSelectionContextMenu:_,noPanClassName:N,disableKeyboardA11y:j})]})})}Ns.displayName="FlowRenderer";const ig=S.memo(Ns),ag=e=>t=>e?ya(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map(n=>n.id):Array.from(t.nodeLookup.keys());function sg(e){return ee(S.useCallback(ag(e),[e]),oe)}const lg=e=>e.updateNodeInternals;function cg(){const e=ee(lg),[t]=S.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(n=>{const o=new Map;n.forEach(r=>{const i=r.target.getAttribute("data-id");o.set(i,{id:i,nodeElement:r.target,force:!0})}),e(o)}));return S.useEffect(()=>()=>{t==null||t.disconnect()},[t]),t}function dg({node:e,nodeType:t,hasDimensions:n,resizeObserver:o}){const r=ne(),i=S.useRef(null),a=S.useRef(null),s=S.useRef(e.sourcePosition),l=S.useRef(e.targetPosition),c=S.useRef(t),d=n&&!!e.internals.handleBounds;return S.useEffect(()=>{i.current&&!e.hidden&&(!d||a.current!==i.current)&&(a.current&&(o==null||o.unobserve(a.current)),o==null||o.observe(i.current),a.current=i.current)},[d,e.hidden]),S.useEffect(()=>()=>{a.current&&(o==null||o.unobserve(a.current),a.current=null)},[]),S.useEffect(()=>{if(i.current){const u=c.current!==t,f=s.current!==e.sourcePosition,p=l.current!==e.targetPosition;(u||f||p)&&(c.current=t,s.current=e.sourcePosition,l.current=e.targetPosition,r.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:i.current,force:!0}]])))}},[e.id,t,e.sourcePosition,e.targetPosition]),i}function ug({id:e,onClick:t,onMouseEnter:n,onMouseMove:o,onMouseLeave:r,onContextMenu:i,onDoubleClick:a,nodesDraggable:s,elementsSelectable:l,nodesConnectable:c,nodesFocusable:d,resizeObserver:u,noDragClassName:f,noPanClassName:p,disableKeyboardA11y:y,rfId:g,nodeTypes:b,nodeExtent:m,nodeClickDistance:w,onError:x}){const{node:v,internals:E,isParent:O}=ee(L=>{const K=L.nodeLookup.get(e),Y=L.parentLookup.has(e);return{node:K,internals:K.internals,isParent:Y}},oe);let k=v.type||"default",A=(b==null?void 0:b[k])||_s[k];A===void 0&&(x==null||x("003",Ae.error003(k)),k="default",A=_s.default);const I=!!(v.draggable||s&&typeof v.draggable>"u"),z=!!(v.selectable||l&&typeof v.selectable>"u"),$=!!(v.connectable||c&&typeof v.connectable>"u"),D=!!(v.focusable||d&&typeof v.focusable>"u"),T=ne(),_=Na(v),P=dg({node:v,nodeType:k,hasDimensions:_,resizeObserver:u}),N=bs({nodeRef:P,disabled:v.hidden||!I,noDragClassName:f,handleSelector:v.dragHandle,nodeId:e,isSelectable:z,nodeClickDistance:w}),j=Ss();if(v.hidden)return null;const C=Oe(v),M=tg(v),R=z||I||t||n||o||r,B=n?L=>n(L,{...E.userNode}):void 0,H=o?L=>o(L,{...E.userNode}):void 0,G=r?L=>r(L,{...E.userNode}):void 0,F=i?L=>i(L,{...E.userNode}):void 0,Z=a?L=>a(L,{...E.userNode}):void 0,q=L=>{const{selectNodesOnDrag:K,nodeDragThreshold:Y}=T.getState();z&&(!K||!I||Y>0)&&dr({id:e,store:T,nodeRef:P}),t&&t(L,{...E.userNode})},V=L=>{if(!(qo(L.nativeEvent)||y))if(ua.includes(L.key)&&z){const K=L.key==="Escape";dr({id:e,store:T,unselect:K,nodeRef:P})}else I&&v.selected&&Object.prototype.hasOwnProperty.call(Hn,L.key)&&(T.setState({ariaLiveMessage:`Moved selected node ${L.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~E.positionAbsolute.x}, y: ${~~E.positionAbsolute.y}`}),j({direction:Hn[L.key],factor:L.shiftKey?4:1}))};return h.jsx("div",{className:ie(["react-flow__node",`react-flow__node-${k}`,{[p]:I},v.className,{selected:v.selected,selectable:z,parent:O,draggable:I,dragging:N}]),ref:P,style:{zIndex:E.z,transform:`translate(${E.positionAbsolute.x}px,${E.positionAbsolute.y}px)`,pointerEvents:R?"all":"none",visibility:_?"visible":"hidden",...v.style,...M},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:B,onMouseMove:H,onMouseLeave:G,onContextMenu:F,onClick:q,onDoubleClick:Z,onKeyDown:D?V:void 0,tabIndex:D?0:void 0,role:D?"button":void 0,"aria-describedby":y?void 0:`${rs}-${g}`,"aria-label":v.ariaLabel,children:h.jsx(Km,{value:e,children:h.jsx(A,{id:e,data:v.data,type:k,positionAbsoluteX:E.positionAbsolute.x,positionAbsoluteY:E.positionAbsolute.y,selected:v.selected,selectable:z,draggable:I,deletable:v.deletable??!0,isConnectable:$,sourcePosition:v.sourcePosition,targetPosition:v.targetPosition,dragging:N,dragHandle:v.dragHandle,zIndex:E.z,parentId:v.parentId,...C})})})}const fg=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function Cs(e){const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:o,elementsSelectable:r,onError:i}=ee(fg,oe),a=sg(e.onlyRenderVisibleElements),s=cg();return h.jsx("div",{className:"react-flow__nodes",style:Bn,children:a.map(l=>h.jsx(ug,{id:l,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:s,nodesDraggable:t,nodesConnectable:n,nodesFocusable:o,elementsSelectable:r,nodeClickDistance:e.nodeClickDistance,onError:i},l))})}Cs.displayName="NodeRenderer";const hg=S.memo(Cs);function pg(e){return ee(S.useCallback(t=>{if(!e)return t.edges.map(o=>o.id);const n=[];if(t.width&&t.height)for(const o of t.edges){const r=t.nodeLookup.get(o.source),i=t.nodeLookup.get(o.target);r&&i&&vp({sourceNode:r,targetNode:i,width:t.width,height:t.height,transform:t.transform})&&n.push(o.id)}return n},[e]),oe)}const mg=({color:e="none",strokeWidth:t=1})=>h.jsx("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),gg=({color:e="none",strokeWidth:t=1})=>h.jsx("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),ks={[Mn.Arrow]:mg,[Mn.ArrowClosed]:gg};function yg(e){const t=ne();return S.useMemo(()=>{var n,o;return Object.prototype.hasOwnProperty.call(ks,e)?ks[e]:((o=(n=t.getState()).onError)==null||o.call(n,"009",Ae.error009(e)),null)},[e])}const xg=({id:e,type:t,color:n,width:o=12.5,height:r=12.5,markerUnits:i="strokeWidth",strokeWidth:a,orient:s="auto-start-reverse"})=>{const l=yg(t);return l?h.jsx("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${o}`,markerHeight:`${r}`,viewBox:"-10 -10 20 20",markerUnits:i,orient:s,refX:"0",refY:"0",children:h.jsx(l,{color:n,strokeWidth:a})}):null},Ps=({defaultColor:e,rfId:t})=>{const n=ee(i=>i.edges),o=ee(i=>i.defaultEdgeOptions),r=S.useMemo(()=>Cp(n,{id:t,defaultColor:e,defaultMarkerStart:o==null?void 0:o.markerStart,defaultMarkerEnd:o==null?void 0:o.markerEnd}),[n,o,t,e]);return r.length?h.jsx("svg",{className:"react-flow__marker",children:h.jsx("defs",{children:r.map(i=>h.jsx(xg,{id:i.id,type:i.type,color:i.color,width:i.width,height:i.height,markerUnits:i.markerUnits,strokeWidth:i.strokeWidth,orient:i.orient},i.id))})}):null};Ps.displayName="MarkerDefinitions";var vg=S.memo(Ps);function Ms({x:e,y:t,label:n,labelStyle:o={},labelShowBg:r=!0,labelBgStyle:i={},labelBgPadding:a=[2,4],labelBgBorderRadius:s=2,children:l,className:c,...d}){const[u,f]=S.useState({x:1,y:0,width:0,height:0}),p=ie(["react-flow__edge-textwrapper",c]),y=S.useRef(null);return S.useEffect(()=>{if(y.current){const g=y.current.getBBox();f({x:g.x,y:g.y,width:g.width,height:g.height})}},[n]),typeof n>"u"||!n?null:h.jsxs("g",{transform:`translate(${e-u.width/2} ${t-u.height/2})`,className:p,visibility:u.width?"visible":"hidden",...d,children:[r&&h.jsx("rect",{width:u.width+2*a[0],x:-a[0],y:-a[1],height:u.height+2*a[1],className:"react-flow__edge-textbg",style:i,rx:s,ry:s}),h.jsx("text",{className:"react-flow__edge-text",y:u.height/2,dy:"0.3em",ref:y,style:o,children:n}),l]})}Ms.displayName="EdgeText";const wg=S.memo(Ms);function Fn({id:e,path:t,labelX:n,labelY:o,label:r,labelStyle:i,labelShowBg:a,labelBgStyle:s,labelBgPadding:l,labelBgBorderRadius:c,style:d,markerEnd:u,markerStart:f,className:p,interactionWidth:y=20}){return h.jsxs(h.Fragment,{children:[h.jsx("path",{id:e,style:d,d:t,fill:"none",className:ie(["react-flow__edge-path",p]),markerEnd:u,markerStart:f}),y&&h.jsx("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:y,className:"react-flow__edge-interaction"}),r&&be(n)&&be(o)?h.jsx(wg,{x:n,y:o,label:r,labelStyle:i,labelShowBg:a,labelBgStyle:s,labelBgPadding:l,labelBgBorderRadius:c}):null]})}function js({pos:e,x1:t,y1:n,x2:o,y2:r}){return e===U.Left||e===U.Right?[.5*(t+o),n]:[t,.5*(n+r)]}function As({sourceX:e,sourceY:t,sourcePosition:n=U.Bottom,targetX:o,targetY:r,targetPosition:i=U.Top}){const[a,s]=js({pos:n,x1:e,y1:t,x2:o,y2:r}),[l,c]=js({pos:i,x1:o,y1:r,x2:e,y2:t}),[d,u,f,p]=ja({sourceX:e,sourceY:t,targetX:o,targetY:r,sourceControlX:a,sourceControlY:s,targetControlX:l,targetControlY:c});return[`M${e},${t} C${a},${s} ${l},${c} ${o},${r}`,d,u,f,p]}function Os(e){return S.memo(({id:t,sourceX:n,sourceY:o,targetX:r,targetY:i,sourcePosition:a=U.Bottom,targetPosition:s=U.Top,label:l,labelStyle:c,labelShowBg:d,labelBgStyle:u,labelBgPadding:f,labelBgBorderRadius:p,style:y,markerEnd:g,markerStart:b,interactionWidth:m})=>{const[w,x,v]=As({sourceX:n,sourceY:o,sourcePosition:a,targetX:r,targetY:i,targetPosition:s}),E=e.isInternal?void 0:t;return h.jsx(Fn,{id:E,path:w,labelX:x,labelY:v,label:l,labelStyle:c,labelShowBg:d,labelBgStyle:u,labelBgPadding:f,labelBgBorderRadius:p,style:y,markerEnd:g,markerStart:b,interactionWidth:m})})}const bg=Os({isInternal:!1}),Is=Os({isInternal:!0});bg.displayName="SimpleBezierEdge",Is.displayName="SimpleBezierEdgeInternal";function zs(e){return S.memo(({id:t,sourceX:n,sourceY:o,targetX:r,targetY:i,label:a,labelStyle:s,labelShowBg:l,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:u,style:f,sourcePosition:p=U.Bottom,targetPosition:y=U.Top,markerEnd:g,markerStart:b,pathOptions:m,interactionWidth:w})=>{const[x,v,E]=Qo({sourceX:n,sourceY:o,sourcePosition:p,targetX:r,targetY:i,targetPosition:y,borderRadius:m==null?void 0:m.borderRadius,offset:m==null?void 0:m.offset}),O=e.isInternal?void 0:t;return h.jsx(Fn,{id:O,path:x,labelX:v,labelY:E,label:a,labelStyle:s,labelShowBg:l,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:u,style:f,markerEnd:g,markerStart:b,interactionWidth:w})})}const Rs=zs({isInternal:!1}),Ds=zs({isInternal:!0});Rs.displayName="SmoothStepEdge",Ds.displayName="SmoothStepEdgeInternal";function Ts(e){return S.memo(({id:t,...n})=>{var r;const o=e.isInternal?void 0:t;return h.jsx(Rs,{...n,id:o,pathOptions:S.useMemo(()=>{var i;return{borderRadius:0,offset:(i=n.pathOptions)==null?void 0:i.offset}},[(r=n.pathOptions)==null?void 0:r.offset])})})}const Sg=Ts({isInternal:!1}),Ls=Ts({isInternal:!0});Sg.displayName="StepEdge",Ls.displayName="StepEdgeInternal";function $s(e){return S.memo(({id:t,sourceX:n,sourceY:o,targetX:r,targetY:i,label:a,labelStyle:s,labelShowBg:l,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:u,style:f,markerEnd:p,markerStart:y,interactionWidth:g})=>{const[b,m,w]=Ra({sourceX:n,sourceY:o,targetX:r,targetY:i}),x=e.isInternal?void 0:t;return h.jsx(Fn,{id:x,path:b,labelX:m,labelY:w,label:a,labelStyle:s,labelShowBg:l,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:u,style:f,markerEnd:p,markerStart:y,interactionWidth:g})})}const _g=$s({isInternal:!1}),Vs=$s({isInternal:!0});_g.displayName="StraightEdge",Vs.displayName="StraightEdgeInternal";function Bs(e){return S.memo(({id:t,sourceX:n,sourceY:o,targetX:r,targetY:i,sourcePosition:a=U.Bottom,targetPosition:s=U.Top,label:l,labelStyle:c,labelShowBg:d,labelBgStyle:u,labelBgPadding:f,labelBgBorderRadius:p,style:y,markerEnd:g,markerStart:b,pathOptions:m,interactionWidth:w})=>{const[x,v,E]=Oa({sourceX:n,sourceY:o,sourcePosition:a,targetX:r,targetY:i,targetPosition:s,curvature:m==null?void 0:m.curvature}),O=e.isInternal?void 0:t;return h.jsx(Fn,{id:O,path:x,labelX:v,labelY:E,label:l,labelStyle:c,labelShowBg:d,labelBgStyle:u,labelBgPadding:f,labelBgBorderRadius:p,style:y,markerEnd:g,markerStart:b,interactionWidth:w})})}const Eg=Bs({isInternal:!1}),Hs=Bs({isInternal:!0});Eg.displayName="BezierEdge",Hs.displayName="BezierEdgeInternal";const Fs={default:Hs,straight:Vs,step:Ls,smoothstep:Ds,simplebezier:Is},Zs={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},Ng=(e,t,n)=>n===U.Left?e-t:n===U.Right?e+t:e,Cg=(e,t,n)=>n===U.Top?e-t:n===U.Bottom?e+t:e,Ys="react-flow__edgeupdater";function Xs({position:e,centerX:t,centerY:n,radius:o=10,onMouseDown:r,onMouseEnter:i,onMouseOut:a,type:s}){return h.jsx("circle",{onMouseDown:r,onMouseEnter:i,onMouseOut:a,className:ie([Ys,`${Ys}-${s}`]),cx:Ng(t,o,e),cy:Cg(n,o,e),r:o,stroke:"transparent",fill:"transparent"})}function kg({isReconnectable:e,reconnectRadius:t,edge:n,sourceX:o,sourceY:r,targetX:i,targetY:a,sourcePosition:s,targetPosition:l,onReconnect:c,onReconnectStart:d,onReconnectEnd:u,setReconnecting:f,setUpdateHover:p}){const y=ne(),g=(v,E)=>{if(v.button!==0)return;const{autoPanOnConnect:O,domNode:k,isValidConnection:A,connectionMode:I,connectionRadius:z,lib:$,onConnectStart:D,onConnectEnd:T,cancelConnection:_,nodeLookup:P,rfId:N,panBy:j,updateConnection:C}=y.getState(),M=E.type==="target";f(!0),d==null||d(v,n,E.type);const R=(H,G)=>{f(!1),u==null||u(H,n,E.type,G)},B=H=>c==null?void 0:c(n,H);ar.onPointerDown(v.nativeEvent,{autoPanOnConnect:O,connectionMode:I,connectionRadius:z,domNode:k,handleId:E.id,nodeId:E.nodeId,nodeLookup:P,isTarget:M,edgeUpdaterType:E.type,lib:$,flowId:N,cancelConnection:_,panBy:j,isValidConnection:A,onConnect:B,onConnectStart:D,onConnectEnd:T,onReconnectEnd:R,updateConnection:C,getTransform:()=>y.getState().transform,getFromHandle:()=>y.getState().connection.fromHandle})},b=v=>g(v,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),m=v=>g(v,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),w=()=>p(!0),x=()=>p(!1);return h.jsxs(h.Fragment,{children:[(e===!0||e==="source")&&h.jsx(Xs,{position:s,centerX:o,centerY:r,radius:t,onMouseDown:b,onMouseEnter:w,onMouseOut:x,type:"source"}),(e===!0||e==="target")&&h.jsx(Xs,{position:l,centerX:i,centerY:a,radius:t,onMouseDown:m,onMouseEnter:w,onMouseOut:x,type:"target"})]})}function Pg({id:e,edgesFocusable:t,edgesReconnectable:n,elementsSelectable:o,onClick:r,onDoubleClick:i,onContextMenu:a,onMouseEnter:s,onMouseMove:l,onMouseLeave:c,reconnectRadius:d,onReconnect:u,onReconnectStart:f,onReconnectEnd:p,rfId:y,edgeTypes:g,noPanClassName:b,onError:m,disableKeyboardA11y:w}){let x=ee(X=>X.edgeLookup.get(e));const v=ee(X=>X.defaultEdgeOptions);x=v?{...v,...x}:x;let E=x.type||"default",O=(g==null?void 0:g[E])||Fs[E];O===void 0&&(m==null||m("011",Ae.error011(E)),E="default",O=Fs.default);const k=!!(x.focusable||t&&typeof x.focusable>"u"),A=typeof u<"u"&&(x.reconnectable||n&&typeof x.reconnectable>"u"),I=!!(x.selectable||o&&typeof x.selectable>"u"),z=S.useRef(null),[$,D]=S.useState(!1),[T,_]=S.useState(!1),P=ne(),{zIndex:N,sourceX:j,sourceY:C,targetX:M,targetY:R,sourcePosition:B,targetPosition:H}=ee(S.useCallback(X=>{const J=X.nodeLookup.get(x.source),te=X.nodeLookup.get(x.target);if(!J||!te)return{zIndex:x.zIndex,...Zs};const ue=Np({id:e,sourceNode:J,targetNode:te,sourceHandle:x.sourceHandle||null,targetHandle:x.targetHandle||null,connectionMode:X.connectionMode,onError:m});return{zIndex:xp({selected:x.selected,zIndex:x.zIndex,sourceNode:J,targetNode:te,elevateOnSelect:X.elevateEdgesOnSelect}),...ue||Zs}},[x.source,x.target,x.sourceHandle,x.targetHandle,x.selected,x.zIndex]),oe),G=S.useMemo(()=>x.markerStart?`url('#${Jo(x.markerStart,y)}')`:void 0,[x.markerStart,y]),F=S.useMemo(()=>x.markerEnd?`url('#${Jo(x.markerEnd,y)}')`:void 0,[x.markerEnd,y]);if(x.hidden||j===null||C===null||M===null||R===null)return null;const Z=X=>{var Ce;const{addSelectedEdges:J,unselectNodesAndEdges:te,multiSelectionActive:ue}=P.getState();I&&(P.setState({nodesSelectionActive:!1}),x.selected&&ue?(te({nodes:[],edges:[x]}),(Ce=z.current)==null||Ce.blur()):J([e])),r&&r(X,x)},q=i?X=>{i(X,{...x})}:void 0,V=a?X=>{a(X,{...x})}:void 0,L=s?X=>{s(X,{...x})}:void 0,K=l?X=>{l(X,{...x})}:void 0,Y=c?X=>{c(X,{...x})}:void 0,W=X=>{var J;if(!w&&ua.includes(X.key)&&I){const{unselectNodesAndEdges:te,addSelectedEdges:ue}=P.getState();X.key==="Escape"?((J=z.current)==null||J.blur(),te({edges:[x]})):ue([e])}};return h.jsx("svg",{style:{zIndex:N},children:h.jsxs("g",{className:ie(["react-flow__edge",`react-flow__edge-${E}`,x.className,b,{selected:x.selected,animated:x.animated,inactive:!I&&!r,updating:$,selectable:I}]),onClick:Z,onDoubleClick:q,onContextMenu:V,onMouseEnter:L,onMouseMove:K,onMouseLeave:Y,onKeyDown:k?W:void 0,tabIndex:k?0:void 0,role:k?"button":"img","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":x.ariaLabel===null?void 0:x.ariaLabel||`Edge from ${x.source} to ${x.target}`,"aria-describedby":k?`${is}-${y}`:void 0,ref:z,children:[!T&&h.jsx(O,{id:e,source:x.source,target:x.target,type:x.type,selected:x.selected,animated:x.animated,selectable:I,deletable:x.deletable??!0,label:x.label,labelStyle:x.labelStyle,labelShowBg:x.labelShowBg,labelBgStyle:x.labelBgStyle,labelBgPadding:x.labelBgPadding,labelBgBorderRadius:x.labelBgBorderRadius,sourceX:j,sourceY:C,targetX:M,targetY:R,sourcePosition:B,targetPosition:H,data:x.data,style:x.style,sourceHandleId:x.sourceHandle,targetHandleId:x.targetHandle,markerStart:G,markerEnd:F,pathOptions:"pathOptions"in x?x.pathOptions:void 0,interactionWidth:x.interactionWidth}),A&&h.jsx(kg,{edge:x,isReconnectable:A,reconnectRadius:d,onReconnect:u,onReconnectStart:f,onReconnectEnd:p,sourceX:j,sourceY:C,targetX:M,targetY:R,sourcePosition:B,targetPosition:H,setUpdateHover:D,setReconnecting:_})]})})}const Mg=e=>({width:e.width,height:e.height,edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function Ks({defaultMarkerColor:e,onlyRenderVisibleElements:t,rfId:n,edgeTypes:o,noPanClassName:r,onReconnect:i,onEdgeContextMenu:a,onEdgeMouseEnter:s,onEdgeMouseMove:l,onEdgeMouseLeave:c,onEdgeClick:d,reconnectRadius:u,onEdgeDoubleClick:f,onReconnectStart:p,onReconnectEnd:y,disableKeyboardA11y:g}){const{edgesFocusable:b,edgesReconnectable:m,elementsSelectable:w,onError:x}=ee(Mg,oe),v=pg(t);return h.jsxs("div",{className:"react-flow__edges",children:[h.jsx(vg,{defaultColor:e,rfId:n}),v.map(E=>h.jsx(Pg,{id:E,edgesFocusable:b,edgesReconnectable:m,elementsSelectable:w,noPanClassName:r,onReconnect:i,onContextMenu:a,onMouseEnter:s,onMouseMove:l,onMouseLeave:c,onClick:d,reconnectRadius:u,onDoubleClick:f,onReconnectStart:p,onReconnectEnd:y,rfId:n,onError:x,edgeTypes:o,disableKeyboardA11y:g},E))]})}Ks.displayName="EdgeRenderer";const jg=S.memo(Ks),Ag=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function Og({children:e}){const t=ee(Ag);return h.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:t},children:e})}function Ig(e){const t=nn(),n=S.useRef(!1);S.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const zg=e=>{var t;return(t=e.panZoom)==null?void 0:t.syncViewport};function Rg(e){const t=ee(zg),n=ne();return S.useEffect(()=>{e&&(t==null||t(e),n.setState({transform:[e.x,e.y,e.zoom]}))},[e,t]),null}function Dg(e){return e.connection.inProgress?{...e.connection,to:Dt(e.connection.to,e.transform)}:{...e.connection}}function Tg(e){return Dg}function Lg(e){const t=Tg();return ee(t,oe)}const $g=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function Vg({containerStyle:e,style:t,type:n,component:o}){const{nodesConnectable:r,width:i,height:a,isValid:s,inProgress:l}=ee($g,oe);return i&&r&&l?h.jsx("svg",{style:e,width:i,height:a,className:"react-flow__connectionline react-flow__container",children:h.jsx("g",{className:ie(["react-flow__connection",ma(s)]),children:h.jsx(Ws,{style:t,type:n,CustomComponent:o,isValid:s})})}):null}const Ws=({style:e,type:t=Le.Bezier,CustomComponent:n,isValid:o})=>{const{inProgress:r,from:i,fromNode:a,fromHandle:s,fromPosition:l,to:c,toNode:d,toHandle:u,toPosition:f}=Lg();if(!r)return;if(n)return h.jsx(n,{connectionLineType:t,connectionLineStyle:e,fromNode:a,fromHandle:s,fromX:i.x,fromY:i.y,toX:c.x,toY:c.y,fromPosition:l,toPosition:f,connectionStatus:ma(o),toNode:d,toHandle:u});let p="";const y={sourceX:i.x,sourceY:i.y,sourcePosition:l,targetX:c.x,targetY:c.y,targetPosition:f};switch(t){case Le.Bezier:[p]=Oa(y);break;case Le.SimpleBezier:[p]=As(y);break;case Le.Step:[p]=Qo({...y,borderRadius:0});break;case Le.SmoothStep:[p]=Qo(y);break;default:[p]=Ra(y)}return h.jsx("path",{d:p,fill:"none",className:"react-flow__connection-path",style:e})};Ws.displayName="ConnectionLine";const Bg={};function Gs(e=Bg){S.useRef(e),ne(),S.useEffect(()=>{},[e])}function Hg(){ne(),S.useRef(!1),S.useEffect(()=>{},[])}function Us({nodeTypes:e,edgeTypes:t,onInit:n,onNodeClick:o,onEdgeClick:r,onNodeDoubleClick:i,onEdgeDoubleClick:a,onNodeMouseEnter:s,onNodeMouseMove:l,onNodeMouseLeave:c,onNodeContextMenu:d,onSelectionContextMenu:u,onSelectionStart:f,onSelectionEnd:p,connectionLineType:y,connectionLineStyle:g,connectionLineComponent:b,connectionLineContainerStyle:m,selectionKeyCode:w,selectionOnDrag:x,selectionMode:v,multiSelectionKeyCode:E,panActivationKeyCode:O,zoomActivationKeyCode:k,deleteKeyCode:A,onlyRenderVisibleElements:I,elementsSelectable:z,defaultViewport:$,translateExtent:D,minZoom:T,maxZoom:_,preventScrolling:P,defaultMarkerColor:N,zoomOnScroll:j,zoomOnPinch:C,panOnScroll:M,panOnScrollSpeed:R,panOnScrollMode:B,zoomOnDoubleClick:H,panOnDrag:G,onPaneClick:F,onPaneMouseEnter:Z,onPaneMouseMove:q,onPaneMouseLeave:V,onPaneScroll:L,onPaneContextMenu:K,paneClickDistance:Y,nodeClickDistance:W,onEdgeContextMenu:X,onEdgeMouseEnter:J,onEdgeMouseMove:te,onEdgeMouseLeave:ue,reconnectRadius:Ce,onReconnect:Dr,onReconnectStart:Tr,onReconnectEnd:Lr,noDragClassName:Xt,noWheelClassName:$r,noPanClassName:Kt,disableKeyboardA11y:Wt,nodeExtent:Vr,rfId:Gt,viewport:Ut,onViewportChange:oo}){return Gs(e),Gs(t),Hg(),Ig(n),Rg(Ut),h.jsx(ig,{onPaneClick:F,onPaneMouseEnter:Z,onPaneMouseMove:q,onPaneMouseLeave:V,onPaneContextMenu:K,onPaneScroll:L,paneClickDistance:Y,deleteKeyCode:A,selectionKeyCode:w,selectionOnDrag:x,selectionMode:v,onSelectionStart:f,onSelectionEnd:p,multiSelectionKeyCode:E,panActivationKeyCode:O,zoomActivationKeyCode:k,elementsSelectable:z,zoomOnScroll:j,zoomOnPinch:C,zoomOnDoubleClick:H,panOnScroll:M,panOnScrollSpeed:R,panOnScrollMode:B,panOnDrag:G,defaultViewport:$,translateExtent:D,minZoom:T,maxZoom:_,onSelectionContextMenu:u,preventScrolling:P,noDragClassName:Xt,noWheelClassName:$r,noPanClassName:Kt,disableKeyboardA11y:Wt,onViewportChange:oo,isControlledViewport:!!Ut,children:h.jsxs(Og,{children:[h.jsx(jg,{edgeTypes:t,onEdgeClick:r,onEdgeDoubleClick:a,onReconnect:Dr,onReconnectStart:Tr,onReconnectEnd:Lr,onlyRenderVisibleElements:I,onEdgeContextMenu:X,onEdgeMouseEnter:J,onEdgeMouseMove:te,onEdgeMouseLeave:ue,reconnectRadius:Ce,defaultMarkerColor:N,noPanClassName:Kt,disableKeyboardA11y:Wt,rfId:Gt}),h.jsx(Vg,{style:g,type:y,component:b,containerStyle:m}),h.jsx("div",{className:"react-flow__edgelabel-renderer"}),h.jsx(hg,{nodeTypes:e,onNodeClick:o,onNodeDoubleClick:i,onNodeMouseEnter:s,onNodeMouseMove:l,onNodeMouseLeave:c,onNodeContextMenu:d,nodeClickDistance:W,onlyRenderVisibleElements:I,noPanClassName:Kt,noDragClassName:Xt,disableKeyboardA11y:Wt,nodeExtent:Vr,rfId:Gt}),h.jsx("div",{className:"react-flow__viewport-portal"})]})})}Us.displayName="GraphView";const Fg=S.memo(Us),qs=({nodes:e,edges:t,defaultNodes:n,defaultEdges:o,width:r,height:i,fitView:a,nodeOrigin:s,nodeExtent:l}={})=>{const c=new Map,d=new Map,u=new Map,f=new Map,p=o??t??[],y=n??e??[],g=s??[0,0],b=l??At;Ha(u,f,p),nr(y,c,d,{nodeOrigin:g,nodeExtent:b,elevateNodesOnSelect:!1});let m=[0,0,1];if(a&&r&&i){const w=zt(c,{filter:O=>!!((O.width||O.initialWidth)&&(O.height||O.initialHeight))}),{x,y:v,zoom:E}=Uo(w,r,i,.5,2,.1);m=[x,v,E]}return{rfId:"1",width:0,height:0,transform:m,nodes:y,nodeLookup:c,parentLookup:d,edges:p,edgeLookup:f,connectionLookup:u,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:n!==void 0,hasDefaultEdges:o!==void 0,panZoom:null,minZoom:.5,maxZoom:2,translateExtent:At,nodeExtent:b,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:it.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:g,nodeDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,fitViewOnInit:!1,fitViewDone:!1,fitViewOnInitOptions:void 0,selectNodesOnDrag:!0,multiSelectionActive:!1,connection:{...fa},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanSpeed:15,connectionRadius:20,onError:gp,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1}},Zg=({nodes:e,edges:t,defaultNodes:n,defaultEdges:o,width:r,height:i,fitView:a,nodeOrigin:s,nodeExtent:l})=>cm((c,d)=>({...qs({nodes:e,edges:t,width:r,height:i,fitView:a,nodeOrigin:s,nodeExtent:l,defaultNodes:n,defaultEdges:o}),setNodes:u=>{const{nodeLookup:f,parentLookup:p,nodeOrigin:y,elevateNodesOnSelect:g}=d();nr(u,f,p,{nodeOrigin:y,nodeExtent:l,elevateNodesOnSelect:g,checkEquality:!0}),c({nodes:u})},setEdges:u=>{const{connectionLookup:f,edgeLookup:p}=d();Ha(f,p,u),c({edges:u})},setDefaultNodesAndEdges:(u,f)=>{if(u){const{setNodes:p}=d();p(u),c({hasDefaultNodes:!0})}if(f){const{setEdges:p}=d();p(f),c({hasDefaultEdges:!0})}},updateNodeInternals:(u,f={triggerFitView:!0})=>{const{triggerNodeChanges:p,nodeLookup:y,parentLookup:g,fitViewOnInit:b,fitViewDone:m,fitViewOnInitOptions:w,domNode:x,nodeOrigin:v,nodeExtent:E,debug:O,fitViewSync:k}=d(),{changes:A,updatedInternals:I}=Ap(u,y,g,x,v,E);if(I){if(Pp(y,g,{nodeOrigin:v,nodeExtent:E}),f.triggerFitView){let z=m;!m&&b&&(z=k({...w,nodes:w==null?void 0:w.nodes})),c({fitViewDone:z})}else c({});(A==null?void 0:A.length)>0&&(O&&console.log("React Flow: trigger node changes",A),p==null||p(A))}},updateNodePositions:(u,f=!1)=>{const p=[],y=[];for(const[g,b]of u){const m={id:g,type:"position",position:b.position,dragging:f};b!=null&&b.expandParent&&(b!=null&&b.parentId)&&m.position&&(p.push({id:g,parentId:b.parentId,rect:{...b.internals.positionAbsolute,width:b.measured.width,height:b.measured.height}}),m.position.x=Math.max(0,m.position.x),m.position.y=Math.max(0,m.position.y)),y.push(m)}if(p.length>0){const{nodeLookup:g,parentLookup:b,nodeOrigin:m}=d(),w=rr(p,g,b,m);y.push(...w)}d().triggerNodeChanges(y)},triggerNodeChanges:u=>{const{onNodesChange:f,setNodes:p,nodes:y,hasDefaultNodes:g,debug:b}=d();if(u!=null&&u.length){if(g){const m=Ye(u,y);p(m)}b&&console.log("React Flow: trigger node changes",u),f==null||f(u)}},triggerEdgeChanges:u=>{const{onEdgesChange:f,setEdges:p,edges:y,hasDefaultEdges:g,debug:b}=d();if(u!=null&&u.length){if(g){const m=Vt(u,y);p(m)}b&&console.log("React Flow: trigger edge changes",u),f==null||f(u)}},addSelectedNodes:u=>{const{multiSelectionActive:f,edgeLookup:p,nodeLookup:y,triggerNodeChanges:g,triggerEdgeChanges:b}=d();if(f){const m=u.map(w=>qe(w,!0));g(m);return}g(ut(y,new Set([...u]),!0)),b(ut(p))},addSelectedEdges:u=>{const{multiSelectionActive:f,edgeLookup:p,nodeLookup:y,triggerNodeChanges:g,triggerEdgeChanges:b}=d();if(f){const m=u.map(w=>qe(w,!0));b(m);return}b(ut(p,new Set([...u]))),g(ut(y,new Set,!0))},unselectNodesAndEdges:({nodes:u,edges:f}={})=>{const{edges:p,nodes:y,nodeLookup:g,triggerNodeChanges:b,triggerEdgeChanges:m}=d(),w=u||y,x=f||p,v=w.map(O=>{const k=g.get(O.id);return k&&(k.selected=!1),qe(O.id,!1)}),E=x.map(O=>qe(O.id,!1));b(v),m(E)},setMinZoom:u=>{const{panZoom:f,maxZoom:p}=d();f==null||f.setScaleExtent([u,p]),c({minZoom:u})},setMaxZoom:u=>{const{panZoom:f,minZoom:p}=d();f==null||f.setScaleExtent([p,u]),c({maxZoom:u})},setTranslateExtent:u=>{var f;(f=d().panZoom)==null||f.setTranslateExtent(u),c({translateExtent:u})},setPaneClickDistance:u=>{var f;(f=d().panZoom)==null||f.setClickDistance(u)},resetSelectedElements:()=>{const{edges:u,nodes:f,triggerNodeChanges:p,triggerEdgeChanges:y}=d(),g=f.reduce((m,w)=>w.selected?[...m,qe(w.id,!1)]:m,[]),b=u.reduce((m,w)=>w.selected?[...m,qe(w.id,!1)]:m,[]);p(g),y(b)},setNodeExtent:u=>{const{nodes:f,nodeLookup:p,parentLookup:y,nodeOrigin:g,elevateNodesOnSelect:b,nodeExtent:m}=d();u[0][0]===m[0][0]&&u[0][1]===m[0][1]&&u[1][0]===m[1][0]&&u[1][1]===m[1][1]||(nr(f,p,y,{nodeOrigin:g,nodeExtent:u,elevateNodesOnSelect:b,checkEquality:!1}),c({nodeExtent:u}))},panBy:u=>{const{transform:f,width:p,height:y,panZoom:g,translateExtent:b}=d();return Op({delta:u,panZoom:g,transform:f,translateExtent:b,width:p,height:y})},fitView:u=>{const{panZoom:f,width:p,height:y,minZoom:g,maxZoom:b,nodeLookup:m}=d();if(!f)return Promise.resolve(!1);const w=Ko(m,u);return Wo({nodes:w,width:p,height:y,panZoom:f,minZoom:g,maxZoom:b},u)},fitViewSync:u=>{const{panZoom:f,width:p,height:y,minZoom:g,maxZoom:b,nodeLookup:m}=d();if(!f)return!1;const w=Ko(m,u);return Wo({nodes:w,width:p,height:y,panZoom:f,minZoom:g,maxZoom:b},u),w.size>0},cancelConnection:()=>{c({connection:{...fa}})},updateConnection:u=>{c({connection:u})},reset:()=>c({...qs()})}),Object.is);function Yg({initialNodes:e,initialEdges:t,defaultNodes:n,defaultEdges:o,initialWidth:r,initialHeight:i,fitView:a,nodeOrigin:s,nodeExtent:l,children:c}){const[d]=S.useState(()=>Zg({nodes:e,edges:t,defaultNodes:n,defaultEdges:o,width:r,height:i,fitView:a,nodeOrigin:s,nodeExtent:l}));return h.jsx(dm,{value:d,children:h.jsx(Im,{children:c})})}function Xg({children:e,nodes:t,edges:n,defaultNodes:o,defaultEdges:r,width:i,height:a,fitView:s,nodeOrigin:l,nodeExtent:c}){return S.useContext($n)?h.jsx(h.Fragment,{children:e}):h.jsx(Yg,{initialNodes:t,initialEdges:n,defaultNodes:o,defaultEdges:r,initialWidth:i,initialHeight:a,fitView:s,nodeOrigin:l,nodeExtent:c,children:e})}const Kg={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function Wg({nodes:e,edges:t,defaultNodes:n,defaultEdges:o,className:r,nodeTypes:i,edgeTypes:a,onNodeClick:s,onEdgeClick:l,onInit:c,onMove:d,onMoveStart:u,onMoveEnd:f,onConnect:p,onConnectStart:y,onConnectEnd:g,onClickConnectStart:b,onClickConnectEnd:m,onNodeMouseEnter:w,onNodeMouseMove:x,onNodeMouseLeave:v,onNodeContextMenu:E,onNodeDoubleClick:O,onNodeDragStart:k,onNodeDrag:A,onNodeDragStop:I,onNodesDelete:z,onEdgesDelete:$,onDelete:D,onSelectionChange:T,onSelectionDragStart:_,onSelectionDrag:P,onSelectionDragStop:N,onSelectionContextMenu:j,onSelectionStart:C,onSelectionEnd:M,onBeforeDelete:R,connectionMode:B,connectionLineType:H=Le.Bezier,connectionLineStyle:G,connectionLineComponent:F,connectionLineContainerStyle:Z,deleteKeyCode:q="Backspace",selectionKeyCode:V="Shift",selectionOnDrag:L=!1,selectionMode:K=Ot.Full,panActivationKeyCode:Y="Space",multiSelectionKeyCode:W=zn()?"Meta":"Control",zoomActivationKeyCode:X=zn()?"Meta":"Control",snapToGrid:J,snapGrid:te,onlyRenderVisibleElements:ue=!1,selectNodesOnDrag:Ce,nodesDraggable:Dr,nodesConnectable:Tr,nodesFocusable:Lr,nodeOrigin:Xt=as,edgesFocusable:$r,edgesReconnectable:Kt,elementsSelectable:Wt=!0,defaultViewport:Vr=_m,minZoom:Gt=.5,maxZoom:Ut=2,translateExtent:oo=At,preventScrolling:Dy=!0,nodeExtent:Br,defaultMarkerColor:Ty="#b1b1b7",zoomOnScroll:Ly=!0,zoomOnPinch:$y=!0,panOnScroll:Vy=!1,panOnScrollSpeed:By=.5,panOnScrollMode:Hy=Xe.Free,zoomOnDoubleClick:Fy=!0,panOnDrag:Zy=!0,onPaneClick:Yy,onPaneMouseEnter:Xy,onPaneMouseMove:Ky,onPaneMouseLeave:Wy,onPaneScroll:Gy,onPaneContextMenu:Uy,paneClickDistance:$c=0,nodeClickDistance:qy=0,children:Qy,onReconnect:Jy,onReconnectStart:ex,onReconnectEnd:tx,onEdgeContextMenu:nx,onEdgeDoubleClick:ox,onEdgeMouseEnter:rx,onEdgeMouseMove:ix,onEdgeMouseLeave:ax,reconnectRadius:sx=10,onNodesChange:lx,onEdgesChange:cx,noDragClassName:dx="nodrag",noWheelClassName:ux="nowheel",noPanClassName:Vc="nopan",fitView:Bc,fitViewOptions:fx,connectOnClick:hx,attributionPosition:px,proOptions:mx,defaultEdgeOptions:gx,elevateNodesOnSelect:yx,elevateEdgesOnSelect:xx,disableKeyboardA11y:Hc=!1,autoPanOnConnect:vx,autoPanOnNodeDrag:wx,autoPanSpeed:bx,connectionRadius:Sx,isValidConnection:_x,onError:Ex,style:Nx,id:Fc,nodeDragThreshold:Cx,viewport:kx,onViewportChange:Px,width:Mx,height:jx,colorMode:Ax="light",debug:Ox,...Ix},zx){const Hr=Fc||"1",Rx=km(Ax);return h.jsx("div",{...Ix,style:{...Nx,...Kg},ref:zx,className:ie(["react-flow",r,Rx]),"data-testid":"rf__wrapper",id:Fc,children:h.jsxs(Xg,{nodes:e,edges:t,width:Mx,height:jx,fitView:Bc,nodeOrigin:Xt,nodeExtent:Br,children:[h.jsx(Fg,{onInit:c,onNodeClick:s,onEdgeClick:l,onNodeMouseEnter:w,onNodeMouseMove:x,onNodeMouseLeave:v,onNodeContextMenu:E,onNodeDoubleClick:O,nodeTypes:i,edgeTypes:a,connectionLineType:H,connectionLineStyle:G,connectionLineComponent:F,connectionLineContainerStyle:Z,selectionKeyCode:V,selectionOnDrag:L,selectionMode:K,deleteKeyCode:q,multiSelectionKeyCode:W,panActivationKeyCode:Y,zoomActivationKeyCode:X,onlyRenderVisibleElements:ue,defaultViewport:Vr,translateExtent:oo,minZoom:Gt,maxZoom:Ut,preventScrolling:Dy,zoomOnScroll:Ly,zoomOnPinch:$y,zoomOnDoubleClick:Fy,panOnScroll:Vy,panOnScrollSpeed:By,panOnScrollMode:Hy,panOnDrag:Zy,onPaneClick:Yy,onPaneMouseEnter:Xy,onPaneMouseMove:Ky,onPaneMouseLeave:Wy,onPaneScroll:Gy,onPaneContextMenu:Uy,paneClickDistance:$c,nodeClickDistance:qy,onSelectionContextMenu:j,onSelectionStart:C,onSelectionEnd:M,onReconnect:Jy,onReconnectStart:ex,onReconnectEnd:tx,onEdgeContextMenu:nx,onEdgeDoubleClick:ox,onEdgeMouseEnter:rx,onEdgeMouseMove:ix,onEdgeMouseLeave:ax,reconnectRadius:sx,defaultMarkerColor:Ty,noDragClassName:dx,noWheelClassName:ux,noPanClassName:Vc,rfId:Hr,disableKeyboardA11y:Hc,nodeExtent:Br,viewport:kx,onViewportChange:Px}),h.jsx(Cm,{nodes:e,edges:t,defaultNodes:n,defaultEdges:o,onConnect:p,onConnectStart:y,onConnectEnd:g,onClickConnectStart:b,onClickConnectEnd:m,nodesDraggable:Dr,nodesConnectable:Tr,nodesFocusable:Lr,edgesFocusable:$r,edgesReconnectable:Kt,elementsSelectable:Wt,elevateNodesOnSelect:yx,elevateEdgesOnSelect:xx,minZoom:Gt,maxZoom:Ut,nodeExtent:Br,onNodesChange:lx,onEdgesChange:cx,snapToGrid:J,snapGrid:te,connectionMode:B,translateExtent:oo,connectOnClick:hx,defaultEdgeOptions:gx,fitView:Bc,fitViewOptions:fx,onNodesDelete:z,onEdgesDelete:$,onDelete:D,onNodeDragStart:k,onNodeDrag:A,onNodeDragStop:I,onSelectionDrag:P,onSelectionDragStart:_,onSelectionDragStop:N,onMove:d,onMoveStart:u,onMoveEnd:f,noPanClassName:Vc,nodeOrigin:Xt,rfId:Hr,autoPanOnConnect:vx,autoPanOnNodeDrag:wx,autoPanSpeed:bx,onError:Ex,connectionRadius:Sx,isValidConnection:_x,selectNodesOnDrag:Ce,nodeDragThreshold:Cx,onBeforeDelete:R,paneClickDistance:$c,debug:Ox}),h.jsx(Sm,{onSelectionChange:T}),Qy,h.jsx(ym,{proOptions:mx,position:px}),h.jsx(mm,{rfId:Hr,disableKeyboardA11y:Hc})]})})}xd=ys(Wg);const Gg=e=>{var t;return(t=e.domNode)==null?void 0:t.querySelector(".react-flow__viewport-portal")};gd=function({children:e}){const t=ee(Gg);return t?Fr.createPortal(e,t):null};const Ug=e=>e.nodes;pd=function(){return ee(Ug,oe)},cd=function({type:e,id:t=null,nodeId:n,onConnect:o,onDisconnect:r}){const i=fr(),a=n??i,s=S.useRef(null),l=ee(c=>c.connectionLookup.get(`${a}-${e}-${t}`),up);return S.useEffect(()=>{if(s.current&&s.current!==l){const c=l??new Map;pa(s.current,c,r),pa(c,s.current,o)}s.current=l??new Map},[l,o,r]),S.useMemo(()=>Array.from((l==null?void 0:l.values())??[]),[l])},Cd=function(e){return ee(S.useCallback(t=>t.nodeLookup.get(e),[e]),oe)};function qg({dimensions:e,lineWidth:t,variant:n,className:o}){return h.jsx("path",{strokeWidth:t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:ie(["react-flow__background-pattern",n,o])})}function Qg({radius:e,className:t}){return h.jsx("circle",{cx:e,cy:e,r:e,className:ie(["react-flow__background-pattern","dots",t])})}(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(De||(De={}));const Jg={[De.Dots]:1,[De.Lines]:1,[De.Cross]:6},e0=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function Qs({id:e,variant:t=De.Dots,gap:n=20,size:o,lineWidth:r=1,offset:i=0,color:a,bgColor:s,style:l,className:c,patternClassName:d}){const u=S.useRef(null),{transform:f,patternId:p}=ee(e0,oe),y=o||Jg[t],g=t===De.Dots,b=t===De.Cross,m=Array.isArray(n)?n:[n,n],w=[m[0]*f[2]||1,m[1]*f[2]||1],x=y*f[2],v=Array.isArray(i)?i:[i,i],E=b?[x,x]:w,O=[v[0]*f[2]||1+E[0]/2,v[1]*f[2]||1+E[1]/2],k=`${p}${e||""}`;return h.jsxs("svg",{className:ie(["react-flow__background",c]),style:{...l,...Bn,"--xy-background-color-props":s,"--xy-background-pattern-color-props":a},ref:u,"data-testid":"rf__background",children:[h.jsx("pattern",{id:k,x:f[0]%w[0],y:f[1]%w[1],width:w[0],height:w[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${O[0]},-${O[1]})`,children:g?h.jsx(Qg,{radius:x/2,className:d}):h.jsx(qg,{dimensions:E,lineWidth:r,variant:t,className:d})}),h.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${k})`})]})}Qs.displayName="Background",vd=S.memo(Qs);function t0(){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:h.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function n0(){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:h.jsx("path",{d:"M0 0h32v4.2H0z"})})}function o0(){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:h.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function r0(){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:h.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function i0(){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:h.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function Zn({children:e,className:t,...n}){return h.jsx("button",{type:"button",className:ie(["react-flow__controls-button",t]),...n,children:e})}const a0=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom});function Js({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:o=!0,fitViewOptions:r,onZoomIn:i,onZoomOut:a,onFitView:s,onInteractiveChange:l,className:c,children:d,position:u="bottom-left",orientation:f="vertical","aria-label":p="React Flow controls"}){const y=ne(),{isInteractive:g,minZoomReached:b,maxZoomReached:m}=ee(a0,oe),{zoomIn:w,zoomOut:x,fitView:v}=nn(),E=()=>{w(),i==null||i()},O=()=>{x(),a==null||a()},k=()=>{v(r),s==null||s()},A=()=>{y.setState({nodesDraggable:!g,nodesConnectable:!g,elementsSelectable:!g}),l==null||l(!g)},I=f==="horizontal"?"horizontal":"vertical";return h.jsxs(an,{className:ie(["react-flow__controls",I,c]),position:u,style:e,"data-testid":"rf__controls","aria-label":p,children:[t&&h.jsxs(h.Fragment,{children:[h.jsx(Zn,{onClick:E,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:m,children:h.jsx(t0,{})}),h.jsx(Zn,{onClick:O,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:b,children:h.jsx(n0,{})})]}),n&&h.jsx(Zn,{className:"react-flow__controls-fitview",onClick:k,title:"fit view","aria-label":"fit view",children:h.jsx(o0,{})}),o&&h.jsx(Zn,{className:"react-flow__controls-interactive",onClick:A,title:"toggle interactivity","aria-label":"toggle interactivity",children:g?h.jsx(i0,{}):h.jsx(r0,{})}),d]})}Js.displayName="Controls",wd=S.memo(Js);function s0({id:e,x:t,y:n,width:o,height:r,style:i,color:a,strokeColor:s,strokeWidth:l,className:c,borderRadius:d,shapeRendering:u,selected:f,onClick:p}){const{background:y,backgroundColor:g}=i||{},b=a||y||g;return h.jsx("rect",{className:ie(["react-flow__minimap-node",{selected:f},c]),x:t,y:n,rx:d,ry:d,width:o,height:r,style:{fill:b,stroke:s,strokeWidth:l},shapeRendering:u,onClick:p?m=>p(m,e):void 0})}const l0=S.memo(s0),c0=e=>e.nodes.map(t=>t.id),hr=e=>e instanceof Function?e:()=>e;function d0({nodeStrokeColor:e,nodeColor:t,nodeClassName:n="",nodeBorderRadius:o=5,nodeStrokeWidth:r,nodeComponent:i=l0,onClick:a}){const s=ee(c0,oe),l=hr(t),c=hr(e),d=hr(n),u=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return h.jsx(h.Fragment,{children:s.map(f=>h.jsx(f0,{id:f,nodeColorFunc:l,nodeStrokeColorFunc:c,nodeClassNameFunc:d,nodeBorderRadius:o,nodeStrokeWidth:r,NodeComponent:i,onClick:a,shapeRendering:u},f))})}function u0({id:e,nodeColorFunc:t,nodeStrokeColorFunc:n,nodeClassNameFunc:o,nodeBorderRadius:r,nodeStrokeWidth:i,shapeRendering:a,NodeComponent:s,onClick:l}){const{node:c,x:d,y:u,width:f,height:p}=ee(y=>{const g=y.nodeLookup.get(e),{x:b,y:m}=g.internals.positionAbsolute,{width:w,height:x}=Oe(g);return{node:g,x:b,y:m,width:w,height:x}},oe);return!c||c.hidden||!Na(c)?null:h.jsx(s,{x:d,y:u,width:f,height:p,style:c.style,selected:!!c.selected,className:o(c),color:t(c),borderRadius:r,strokeColor:n(c),strokeWidth:i,shapeRendering:a,onClick:l,id:c.id})}const f0=S.memo(u0);var h0=S.memo(d0);const p0=200,m0=150,g0=e=>{const t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:t,boundingRect:e.nodeLookup.size>0?Sa(zt(e.nodeLookup),t):t,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height}},y0="react-flow__minimap-desc";function el({style:e,className:t,nodeStrokeColor:n,nodeColor:o,nodeClassName:r="",nodeBorderRadius:i=5,nodeStrokeWidth:a,nodeComponent:s,bgColor:l,maskColor:c,maskStrokeColor:d,maskStrokeWidth:u,position:f="bottom-right",onClick:p,onNodeClick:y,pannable:g=!1,zoomable:b=!1,ariaLabel:m="React Flow mini map",inversePan:w,zoomStep:x=10,offsetScale:v=5}){const E=ne(),O=S.useRef(null),{boundingRect:k,viewBB:A,rfId:I,panZoom:z,translateExtent:$,flowWidth:D,flowHeight:T}=ee(g0,oe),_=(e==null?void 0:e.width)??p0,P=(e==null?void 0:e.height)??m0,N=k.width/_,j=k.height/P,C=Math.max(N,j),M=C*_,R=C*P,B=v*C,H=k.x-(M-k.width)/2-B,G=k.y-(R-k.height)/2-B,F=M+B*2,Z=R+B*2,q=`${y0}-${I}`,V=S.useRef(0),L=S.useRef();V.current=C,S.useEffect(()=>{if(O.current&&z)return L.current=Vp({domNode:O.current,panZoom:z,getTransform:()=>E.getState().transform,getViewScale:()=>V.current}),()=>{var W;(W=L.current)==null||W.destroy()}},[z]),S.useEffect(()=>{var W;(W=L.current)==null||W.update({translateExtent:$,width:D,height:T,inversePan:w,pannable:g,zoomStep:x,zoomable:b})},[g,b,w,x,$,D,T]);const K=p?W=>{var te;const[X,J]=((te=L.current)==null?void 0:te.pointer(W))||[0,0];p(W,{x:X,y:J})}:void 0,Y=y?S.useCallback((W,X)=>{const J=E.getState().nodeLookup.get(X);y(W,J)},[]):void 0;return h.jsx(an,{position:f,style:{...e,"--xy-minimap-background-color-props":typeof l=="string"?l:void 0,"--xy-minimap-mask-background-color-props":typeof c=="string"?c:void 0,"--xy-minimap-mask-stroke-color-props":typeof d=="string"?d:void 0,"--xy-minimap-mask-stroke-width-props":typeof u=="number"?u*C:void 0,"--xy-minimap-node-background-color-props":typeof o=="string"?o:void 0,"--xy-minimap-node-stroke-color-props":typeof n=="string"?n:void 0,"--xy-minimap-node-stroke-width-props":typeof a=="string"?a:void 0},className:ie(["react-flow__minimap",t]),"data-testid":"rf__minimap",children:h.jsxs("svg",{width:_,height:P,viewBox:`${H} ${G} ${F} ${Z}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":q,ref:O,onClick:K,children:[m&&h.jsx("title",{id:q,children:m}),h.jsx(h0,{onClick:Y,nodeColor:o,nodeStrokeColor:n,nodeBorderRadius:i,nodeClassName:r,nodeStrokeWidth:a,nodeComponent:s}),h.jsx("path",{className:"react-flow__minimap-mask",d:`M${H-B},${G-B}h${F+B*2}v${Z+B*2}h${-F-B*2}z
        M${A.x},${A.y}h${A.width}v${A.height}h${-A.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}el.displayName="MiniMap",bd=S.memo(el);function x0({nodeId:e,position:t,variant:n=dt.Handle,className:o,style:r={},children:i,color:a,minWidth:s=10,minHeight:l=10,maxWidth:c=Number.MAX_VALUE,maxHeight:d=Number.MAX_VALUE,keepAspectRatio:u=!1,shouldResize:f,onResizeStart:p,onResize:y,onResizeEnd:g}){const b=fr(),m=typeof e=="string"?e:b,w=ne(),x=S.useRef(null),v=n===dt.Line?"right":"bottom-right",E=t??v,O=S.useRef(null);S.useEffect(()=>{if(!(!x.current||!m))return O.current||(O.current=om({domNode:x.current,nodeId:m,getStoreItems:()=>{const{nodeLookup:z,transform:$,snapGrid:D,snapToGrid:T,nodeOrigin:_,domNode:P}=w.getState();return{nodeLookup:z,transform:$,snapGrid:D,snapToGrid:T,nodeOrigin:_,paneDomNode:P}},onChange:(z,$)=>{const{triggerNodeChanges:D,nodeLookup:T,parentLookup:_,nodeOrigin:P}=w.getState(),N=[],j={x:z.x,y:z.y},C=T.get(m);if(C&&C.expandParent&&C.parentId){const M=C.origin??P,R=z.width??C.measured.width,B=z.height??C.measured.height,H={id:C.id,parentId:C.parentId,rect:{width:R,height:B,...Ca({x:z.x??C.position.x,y:z.y??C.position.y},{width:R,height:B},C.parentId,T,M)}},G=rr([H],T,_,P);N.push(...G),j.x=z.x?Math.max(M[0]*R,z.x):void 0,j.y=z.y?Math.max(M[1]*B,z.y):void 0}if(j.x!==void 0&&j.y!==void 0){const M={id:m,type:"position",position:{...j}};N.push(M)}if(z.width!==void 0&&z.height!==void 0){const M={id:m,type:"dimensions",resizing:!0,setAttributes:!0,dimensions:{width:z.width,height:z.height}};N.push(M)}for(const M of $){const R={...M,type:"position"};N.push(R)}D(N)},onEnd:()=>{const z={id:m,type:"dimensions",resizing:!1};w.getState().triggerNodeChanges([z])}})),O.current.update({controlPosition:E,boundaries:{minWidth:s,minHeight:l,maxWidth:c,maxHeight:d},keepAspectRatio:u,onResizeStart:p,onResize:y,onResizeEnd:g,shouldResize:f}),()=>{var z;(z=O.current)==null||z.destroy()}},[E,s,l,c,d,u,p,y,g,f]);const k=E.split("-"),A=n===dt.Line?"borderColor":"backgroundColor",I=a?{...r,[A]:a}:r;return h.jsx("div",{className:ie(["react-flow__resize-control","nodrag",...k,n,o]),ref:x,style:I,children:i})}const tl=S.memo(x0);md=function({nodeId:e,isVisible:t=!0,handleClassName:n,handleStyle:o,lineClassName:r,lineStyle:i,color:a,minWidth:s=10,minHeight:l=10,maxWidth:c=Number.MAX_VALUE,maxHeight:d=Number.MAX_VALUE,keepAspectRatio:u=!1,shouldResize:f,onResizeStart:p,onResize:y,onResizeEnd:g}){return t?h.jsxs(h.Fragment,{children:[Up.map(b=>h.jsx(tl,{className:r,style:i,nodeId:e,position:b,variant:dt.Line,color:a,minWidth:s,minHeight:l,maxWidth:c,maxHeight:d,onResizeStart:p,keepAspectRatio:u,shouldResize:f,onResize:y,onResizeEnd:g},b)),Gp.map(b=>h.jsx(tl,{className:n,style:o,nodeId:e,position:b,color:a,minWidth:s,minHeight:l,maxWidth:c,maxHeight:d,onResizeStart:p,keepAspectRatio:u,shouldResize:f,onResize:y,onResizeEnd:g},b))]}):null};var pr,nl;function v0(){if(nl)return pr;nl=1;var e=function(m){return t(m)&&!n(m)};function t(m){return!!m&&typeof m=="object"}function n(m){var w=Object.prototype.toString.call(m);return w==="[object RegExp]"||w==="[object Date]"||i(m)}var o=typeof Symbol=="function"&&Symbol.for,r=o?Symbol.for("react.element"):60103;function i(m){return m.$$typeof===r}function a(m){return Array.isArray(m)?[]:{}}function s(m,w){return w.clone!==!1&&w.isMergeableObject(m)?g(a(m),m,w):m}function l(m,w,x){return m.concat(w).map(function(v){return s(v,x)})}function c(m,w){if(!w.customMerge)return g;var x=w.customMerge(m);return typeof x=="function"?x:g}function d(m){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(m).filter(function(w){return Object.propertyIsEnumerable.call(m,w)}):[]}function u(m){return Object.keys(m).concat(d(m))}function f(m,w){try{return w in m}catch{return!1}}function p(m,w){return f(m,w)&&!(Object.hasOwnProperty.call(m,w)&&Object.propertyIsEnumerable.call(m,w))}function y(m,w,x){var v={};return x.isMergeableObject(m)&&u(m).forEach(function(E){v[E]=s(m[E],x)}),u(w).forEach(function(E){p(m,E)||(f(m,E)&&x.isMergeableObject(w[E])?v[E]=c(E,x)(m[E],w[E],x):v[E]=s(w[E],x))}),v}function g(m,w,x){x=x||{},x.arrayMerge=x.arrayMerge||l,x.isMergeableObject=x.isMergeableObject||e,x.cloneUnlessOtherwiseSpecified=s;var v=Array.isArray(w),E=Array.isArray(m),O=v===E;return O?v?x.arrayMerge(m,w,x):y(m,w,x):s(w,x)}g.all=function(m,w){if(!Array.isArray(m))throw new Error("first argument should be an array");return m.reduce(function(x,v){return g(x,v,w)},{})};var b=g;return pr=b,pr}var w0=v0();let mr,ol,gr,Yn,Xn,Kn,Bt,rl,il,al,sl,ll;sn=ro(w0),mr=(e,t)=>({id:e.id,type:e.node_type,position:{x:e.x||0,y:e.y||0},width:e.width||void 0,height:e.height||void 0,data:{loading:!1,flowNode:e,...t}}),ol=e=>({id:e.id,target:e.target,source:e.target,targetHandle:e.targetHandle,sourceHandle:e.sourceHandle}),gr=e=>({id:e.id,source:e.source,target:e.target,targetHandle:e.targetHandle,sourceHandle:e.sourceHandle}),dd=e=>e.filter(t=>"edgeId"in t?`${t.edgeId}`.startsWith("xy-edge__"):!1),Yn=(e,t,n)=>{const o=[];return{changes:e.map(r=>{var l;const i=t.find(c=>r.id===c.id);i||o.push(r.id);const a=(l=n==null?void 0:n[r.source_type])==null?void 0:l.find(c=>(c==null?void 0:c.id)===r.source_id),s=mr(r,{...i==null?void 0:i.data,entity:a});return{type:i?"replace":"add",id:r.id,item:i?sn({...i||{},data:void 0},on(s,rn)):s}}),newIds:[]}},Xn=(e,t)=>{const n=[],o=[],r=e.map(i=>{const a=t.find(s=>i.source===s.source&&i.target===s.target);return!a||a.id!==i.id?(a&&o.push(a.id),{type:"add",item:gr(i)}):(n.push(i.id),{type:"replace",item:gr(i)})});return t.forEach(i=>{n.includes(i.id)||o.push(i.id)}),{changes:r,updatedIds:n,deletedIds:o}},Kn={width:440,height:360},Bt={width:380,height:650},vt={[le.Toolbox]:"toolbox",[le.SessionInfo]:"session-info",[le.DefaultEmbeddingModel]:"default-embedding-model",[le.ApplicationBar]:"application-bar"},rl={id:vt[le.Toolbox],type:le.Toolbox,position:{x:10+Bt.width+20,y:10},measured:Kn,data:{}},il={id:vt[le.SessionInfo],type:le.SessionInfo,position:{x:10,y:10},measured:Bt,data:{}},al={id:vt[le.DefaultEmbeddingModel],type:le.DefaultEmbeddingModel,position:{x:10+Bt.width+Kn.width+40,y:80},data:{model:ev}},sl={id:vt[le.ApplicationBar],type:le.ApplicationBar,position:{x:10+Bt.width+Kn.width+40,y:10},data:{}},ll=[rl,il,al,sl],yd=[le.Toolbox,le.SessionInfo,le.ApplicationBar,le.EditorApp,le.CodeContainerApp],ci={flowNodes:[],flowEdges:[],ready:!0,flowEdgeLoading:!1,flowNodeLoading:!1,syncedNodes:[],syncedEdges:[],syncNodeQueue:[],syncEdgeQueue:[],edges:[],nodes:ll},li=async e=>{const t=await ae("FlowNode").find(e),n=t.reduce((r,i)=>{var a;return r[i.source_type]||(r[i.source_type]=[]),(a=r[i.source_type])==null||a.push(i),r},{}),o={};return await Promise.all(Object.entries(n).map(async([r,i])=>{const a=r;o[a]=await ae(a).find({where:{id:Sv(i.map(s=>s.source_id))}})})),{flowNodes:t,entityGroups:n,flowNodeDatas:o}},Nd=(e,t)=>({reset:()=>{e(ci)},setNodes:n=>{if(typeof n=="function"){e({nodes:n(t().nodes)});return}e({nodes:n})},setEdges:n=>{if(typeof n=="function"){e({edges:n(t().edges)});return}e({edges:n})},updateNodes:n=>{const o=t().nodes;e({nodes:Ye(n,o)})},updateEdges:n=>{const o=t().edges;e({edges:Vt(n,o)})},addConnectionToEdges:n=>{const o=t().edges;e({edges:za(n,o)})},flowNodesToNodes:(n,o={})=>{const r=t().nodes,{changes:i}=Yn(n,r,o);e({nodes:Ye(i,r)})},flowEdgesToEdges:n=>{const o=t().edges,{changes:r,updatedIds:i,deletedIds:a}=Xn(n,o);o.forEach(s=>{i.includes(s.id)||a.push(s.id)}),a.forEach(s=>{r.push({type:"remove",id:s})}),e({edges:Vt(r,o)})},getNodes:n=>t().nodes.filter(o=>n.includes(o.id)),removeSyncNodeQueue:n=>{const{syncNodeQueue:o}=t();for(const r of n){const i=o.findIndex(a=>a.timestamp===r);i>-1&&o.splice(i,1)}e({syncNodeQueue:o})},removeSyncEdgeQueue:n=>{const{syncEdgeQueue:o}=t();for(const r of n){const i=o.findIndex(a=>a.timestamp===r);i>-1&&o.splice(i,1)}e({syncEdgeQueue:o})},pushSyncNodeQueue:(n,o)=>{const{syncNodeQueue:r}=t();e({syncNodeQueue:[...r,{query:o,timestamp:Date.now(),syncType:n}]})},pushSyncEdgeQueue:()=>{const{syncEdgeQueue:n}=t();e({syncEdgeQueue:[...n,{timestamp:Date.now()}]})},findFlowNodesWithSource:async(n,o)=>{try{e({flowNodeLoading:!0});const{flowNodes:r,flowNodeDatas:i}=await li(n);if(o!=null&&o.clean)e({flowNodes:r,nodes:r.map(a=>{var l;const s=(l=i==null?void 0:i[a.source_type])==null?void 0:l.find(c=>c.id===a.source_id);return mr(a,{data:s})})});else{const a=t().flowNodes,s=r.map(d=>d.id),l=t().nodes,{changes:c}=Yn(r,l,i);e({flowNodes:[...a.filter(d=>!s.includes(d.id)),...r],nodes:Ye(c,l)})}return r}finally{e({flowNodeLoading:!1})}},findFlowEdges:async(n,o)=>{try{e({flowEdgeLoading:!0});const r=await ae("FlowEdge").find(n),i=t().flowEdges,a=r.map(s=>s.id);if(o!=null&&o.clean)e({flowEdges:r,edges:r.map(s=>ol(s))});else{const s=t().edges,{changes:l}=Xn(r,s);e({flowEdges:[...i.filter(c=>!a.includes(c.id)),...r],edges:Vt(l,s)})}return r}finally{e({flowEdgeLoading:!1})}},deleteFlowNode:async n=>{try{if(!n.id&&!n.source_type&&!n.source_id)throw new Error("Missing flow node indentify");const o=await ae("FlowNode").findOne({where:n.id?{id:n.id}:{source_type:n.source_type,source_id:n.source_id}});if(o){await ae("FlowNode").delete(o.id);const r=t().flowNodes;o.source_type&&o.source_id&&await ae(o.source_type).delete(o.source_id).catch(a=>{gt("Failed to delete source entity",o.source_type,o.source_id,a)});const i=t().nodes;e({flowNodes:r.filter(a=>a.id!==o.id),nodes:Ye([{type:"remove",id:o.id}],i)})}}catch(o){gt("Failed to delete flow node",o)}},deleteFlowEdge:async n=>{try{if(!n.id&&!n.source&&!n.target)throw new Error("Missing flow edge indentify");const o=await ae("FlowEdge").findOne({where:n.id?{id:n.id}:{source:n.source,target:n.target}});if(o){await ae("FlowEdge").delete(o.id);const r=t().flowEdges;e({flowEdges:r.filter(i=>i.id!==o.id)})}}catch(o){gt("Failed to delete flow edge",o)}},updateFlowNode:async(n,o)=>{var r;try{if(!((r=Yr.getState().currentSession)!=null&&r.id))throw new Error("Session not found");if(!n.id)throw new Error("Missing flow node indentify");await ae("FlowNode").update(n.id,n);const i=t().flowNodes.map(a=>a.id===n.id?{...a,...n}:a);e({flowNodes:o!=null&&o.silent?i:[...i]})}catch(i){gt("Failed to create or update flow node",i,n)}},createOrUpdateFlowNode:async(n,o)=>{var r;try{const i=Yr.getState().currentSession;if(!(i!=null&&i.id))throw new Error("Session not found");if(!n.id&&(!n.source_type||!n.source_id))throw new Error("Missing flow node indentify");let a,s=n!=null&&n.id?t().flowNodes.find(p=>p.id===n.id):void 0;if(!s&&(n.id||n.source_type&&n.source_id)&&(s=await ae("FlowNode").findOne({where:n.id?{id:n.id}:{source_type:n.source_type,source_id:n.source_id}})),s)a=sn(s,on(n,rn)),o!=null&&o.lazy?ae("FlowNode").update(s.id,a):await ae("FlowNode").update(s.id,a);else if(n.source_id&&n.source_type)a={...n,source_id:`${n.source_id}`,source_type:`${n.source_type}`,node_type:n.node_type||"NEW_MESSAGE",session_id:n.session_id||(i==null?void 0:i.id)},o!=null&&o.lazy?(a.id=Wc(),ae("FlowNode").save(a)):a=await ae("FlowNode").save(a);else throw new Error("Missing source id and type");let l;const c=t().nodes.find(p=>p.id===a.id);a.source_type&&!c?l=await ae(a.source_type).findOne({where:{id:n.source_id}}):a.source_type&&c&&(l=(r=c==null?void 0:c.data)==null?void 0:r.entity);const d=t().flowNodes,u=t().nodes,{changes:f}=Yn([a],u,{[a.source_type]:[l]});return e({flowNodes:[...d.filter(p=>p.id!==a.id),a],nodes:Ye(f,u)}),a}catch(i){gt("Failed to create or update flow node",i,n)}},createOrUpdateFlowEdge:async(n,o)=>{try{const r=Yr.getState().currentSession;if(!(r!=null&&r.id))throw new Error("Session not found");if(!n.id&&(!n.source||!n.target))throw new Error("Missing flow node indentify");let i,a=n!=null&&n.id?t().flowEdges.find(c=>c.id===n.id):void 0;if(a&&(n.id||n.source&&n.target)&&(a=await ae("FlowEdge").findOne({where:n.id?{id:n.id}:{source:n.source,target:n.target}})),a)i=sn(a,on(n,rn)),o!=null&&o.lazy?ae("FlowEdge").update(a.id,i):await ae("FlowEdge").update(a.id,i);else if(n.source&&n.target)i={...n,source:`${n.source}`,target:`${n.target}`,session_id:n.session_id||(r==null?void 0:r.id)},o!=null&&o.lazy?(i.id=Wc(),ae("FlowEdge").save(i)):i=await ae("FlowEdge").save(i);else throw new Error("Missing source and target");const s=t().flowEdges,l=t().edges;return e({flowEdges:[...s.filter(c=>c.id!==i.id),i],edges:Vt(Xn([i],l).changes,l)}),i}catch(r){gt("Failed to create or update flow node",r)}}});class b0 extends tv{get lc_attributes(){return{partialVariables:void 0}}constructor(t){super(t),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompts",this._getPromptType()]}),Object.defineProperty(this,"inputVariables",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputParser",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"partialVariables",{enumerable:!0,configurable:!0,writable:!0,value:void 0});const{inputVariables:n}=t;if(n.includes("stop"))throw new Error("Cannot have an input variable named 'stop', as it is used internally, please rename.");Object.assign(this,t)}async mergePartialAndUserVariables(t){const n=this.partialVariables??{},o={};for(const[r,i]of Object.entries(n))typeof i=="string"?o[r]=i:o[r]=await i();return{...o,...t}}async invoke(t,n){return this._callWithConfig(o=>this.formatPromptValue(o),t,{...n,runType:"prompt"})}serialize(){throw new Error("Use .toJSON() instead")}static async deserialize(t){switch(t._type){case"prompt":{const{PromptTemplate:n}=await qt(async()=>{const{PromptTemplate:o}=await Promise.resolve().then(()=>xl);return{PromptTemplate:o}},void 0);return n.deserialize(t)}case void 0:{const{PromptTemplate:n}=await qt(async()=>{const{PromptTemplate:o}=await Promise.resolve().then(()=>xl);return{PromptTemplate:o}},void 0);return n.deserialize({...t,_type:"prompt"})}case"few_shot":{const{FewShotPromptTemplate:n}=await qt(async()=>{const{FewShotPromptTemplate:o}=await import("./few_shot-DSFoxqCq.js").then(async r=>(await r.__tla,r));return{FewShotPromptTemplate:o}},__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]));return n.deserialize(t)}default:throw new Error(`Invalid prompt type in config: ${t._type}`)}}}ni=class extends b0{async formatPromptValue(e){const t=await this.format(e);return new _v(t)}};var S0=Object.prototype.toString,ft=Array.isArray||function(e){return S0.call(e)==="[object Array]"};function yr(e){return typeof e=="function"}function _0(e){return ft(e)?"array":typeof e}function xr(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function cl(e,t){return e!=null&&typeof e=="object"&&t in e}function E0(e,t){return e!=null&&typeof e!="object"&&e.hasOwnProperty&&e.hasOwnProperty(t)}var N0=RegExp.prototype.test;function C0(e,t){return N0.call(e,t)}var k0=/\S/;function P0(e){return!C0(k0,e)}var M0={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function j0(e){return String(e).replace(/[&<>"'`=\/]/g,function(t){return M0[t]})}var A0=/\s*/,O0=/\s+/,dl=/\s*=/,I0=/\s*\}/,z0=/#|\^|\/|>|\{|&|=|!/;function R0(e,t){if(!e)return[];var n=!1,o=[],r=[],i=[],a=!1,s=!1,l="",c=0;function d(){if(a&&!s)for(;i.length;)delete r[i.pop()];else i=[];a=!1,s=!1}var u,f,p;function y(A){if(typeof A=="string"&&(A=A.split(O0,2)),!ft(A)||A.length!==2)throw new Error("Invalid tags: "+A);u=new RegExp(xr(A[0])+"\\s*"),f=new RegExp("\\s*"+xr(A[1])),p=new RegExp("\\s*"+xr("}"+A[1]))}y(t||he.tags);for(var g=new Ht(e),b,m,w,x,v,E;!g.eos();){if(b=g.pos,w=g.scanUntil(u),w)for(var O=0,k=w.length;O<k;++O)x=w.charAt(O),P0(x)?(i.push(r.length),l+=x):(s=!0,n=!0,l+=" "),r.push(["text",x,b,b+1]),b+=1,x===`
`&&(d(),l="",c=0,n=!1);if(!g.scan(u))break;if(a=!0,m=g.scan(z0)||"name",g.scan(A0),m==="="?(w=g.scanUntil(dl),g.scan(dl),g.scanUntil(f)):m==="{"?(w=g.scanUntil(p),g.scan(I0),g.scanUntil(f),m="&"):w=g.scanUntil(f),!g.scan(f))throw new Error("Unclosed tag at "+g.pos);if(m==">"?v=[m,w,b,g.pos,l,c,n]:v=[m,w,b,g.pos],c++,r.push(v),m==="#"||m==="^")o.push(v);else if(m==="/"){if(E=o.pop(),!E)throw new Error('Unopened section "'+w+'" at '+b);if(E[1]!==w)throw new Error('Unclosed section "'+E[1]+'" at '+b)}else m==="name"||m==="{"||m==="&"?s=!0:m==="="&&y(w)}if(d(),E=o.pop(),E)throw new Error('Unclosed section "'+E[1]+'" at '+g.pos);return T0(D0(r))}function D0(e){for(var t=[],n,o,r=0,i=e.length;r<i;++r)n=e[r],n&&(n[0]==="text"&&o&&o[0]==="text"?(o[1]+=n[1],o[3]=n[3]):(t.push(n),o=n));return t}function T0(e){for(var t=[],n=t,o=[],r,i,a=0,s=e.length;a<s;++a)switch(r=e[a],r[0]){case"#":case"^":n.push(r),o.push(r),n=r[4]=[];break;case"/":i=o.pop(),i[5]=r[2],n=o.length>0?o[o.length-1][4]:t;break;default:n.push(r)}return t}function Ht(e){this.string=e,this.tail=e,this.pos=0}Ht.prototype.eos=function(){return this.tail===""},Ht.prototype.scan=function(e){var t=this.tail.match(e);if(!t||t.index!==0)return"";var n=t[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n},Ht.prototype.scanUntil=function(e){var t=this.tail.search(e),n;switch(t){case-1:n=this.tail,this.tail="";break;case 0:n="";break;default:n=this.tail.substring(0,t),this.tail=this.tail.substring(t)}return this.pos+=n.length,n};function ht(e,t){this.view=e,this.cache={".":this.view},this.parent=t}ht.prototype.push=function(e){return new ht(e,this)},ht.prototype.lookup=function(e){var t=this.cache,n;if(t.hasOwnProperty(e))n=t[e];else{for(var o=this,r,i,a,s=!1;o;){if(e.indexOf(".")>0)for(r=o.view,i=e.split("."),a=0;r!=null&&a<i.length;)a===i.length-1&&(s=cl(r,i[a])||E0(r,i[a])),r=r[i[a++]];else r=o.view[e],s=cl(o.view,e);if(s){n=r;break}o=o.parent}t[e]=n}return yr(n)&&(n=n.call(this.view)),n};function de(){this.templateCache={_cache:{},set:function(e,t){this._cache[e]=t},get:function(e){return this._cache[e]},clear:function(){this._cache={}}}}de.prototype.clearCache=function(){typeof this.templateCache<"u"&&this.templateCache.clear()},de.prototype.parse=function(e,t){var n=this.templateCache,o=e+":"+(t||he.tags).join(":"),r=typeof n<"u",i=r?n.get(o):void 0;return i==null&&(i=R0(e,t),r&&n.set(o,i)),i},de.prototype.render=function(e,t,n,o){var r=this.getConfigTags(o),i=this.parse(e,r),a=t instanceof ht?t:new ht(t,void 0);return this.renderTokens(i,a,n,e,o)},de.prototype.renderTokens=function(e,t,n,o,r){for(var i="",a,s,l,c=0,d=e.length;c<d;++c)l=void 0,a=e[c],s=a[0],s==="#"?l=this.renderSection(a,t,n,o,r):s==="^"?l=this.renderInverted(a,t,n,o,r):s===">"?l=this.renderPartial(a,t,n,r):s==="&"?l=this.unescapedValue(a,t):s==="name"?l=this.escapedValue(a,t,r):s==="text"&&(l=this.rawValue(a)),l!==void 0&&(i+=l);return i},de.prototype.renderSection=function(e,t,n,o,r){var i=this,a="",s=t.lookup(e[1]);function l(u){return i.render(u,t,n,r)}if(s){if(ft(s))for(var c=0,d=s.length;c<d;++c)a+=this.renderTokens(e[4],t.push(s[c]),n,o,r);else if(typeof s=="object"||typeof s=="string"||typeof s=="number")a+=this.renderTokens(e[4],t.push(s),n,o,r);else if(yr(s)){if(typeof o!="string")throw new Error("Cannot use higher-order sections without the original template");s=s.call(t.view,o.slice(e[3],e[5]),l),s!=null&&(a+=s)}else a+=this.renderTokens(e[4],t,n,o,r);return a}},de.prototype.renderInverted=function(e,t,n,o,r){var i=t.lookup(e[1]);if(!i||ft(i)&&i.length===0)return this.renderTokens(e[4],t,n,o,r)},de.prototype.indentPartial=function(e,t,n){for(var o=t.replace(/[^ \t]/g,""),r=e.split(`
`),i=0;i<r.length;i++)r[i].length&&(i>0||!n)&&(r[i]=o+r[i]);return r.join(`
`)},de.prototype.renderPartial=function(e,t,n,o){if(n){var r=this.getConfigTags(o),i=yr(n)?n(e[1]):n[e[1]];if(i!=null){var a=e[6],s=e[5],l=e[4],c=i;s==0&&l&&(c=this.indentPartial(i,l,a));var d=this.parse(c,r);return this.renderTokens(d,t,n,c,o)}}},de.prototype.unescapedValue=function(e,t){var n=t.lookup(e[1]);if(n!=null)return n},de.prototype.escapedValue=function(e,t,n){var o=this.getConfigEscape(n)||he.escape,r=t.lookup(e[1]);if(r!=null)return typeof r=="number"&&o===he.escape?String(r):o(r)},de.prototype.rawValue=function(e){return e[1]},de.prototype.getConfigTags=function(e){return ft(e)?e:e&&typeof e=="object"?e.tags:void 0},de.prototype.getConfigEscape=function(e){if(e&&typeof e=="object"&&!ft(e))return e.escape};var he={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(e){Ft.templateCache=e},get templateCache(){return Ft.templateCache}},Ft=new de;he.clearCache=function(){return Ft.clearCache()},he.parse=function(e,t){return Ft.parse(e,t)},he.render=function(e,t,n,o){if(typeof e!="string")throw new TypeError('Invalid template! Template should be a "string" but "'+_0(e)+'" was given as the first argument for mustache#render(template, view, partials)');return Ft.render(e,t,n,o)},he.escape=j0,he.Scanner=Ht,he.Context=ht,he.Writer=de;function ul(){he.escape=e=>e}let vr,fl,hl,pl,ml,Wn,gl,yl;vr=e=>{const t=e.split(""),n=[],o=(i,a)=>{for(let s=a;s<t.length;s+=1)if(i.includes(t[s]))return s;return-1};let r=0;for(;r<t.length;)if(t[r]==="{"&&r+1<t.length&&t[r+1]==="{")n.push({type:"literal",text:"{"}),r+=2;else if(t[r]==="}"&&r+1<t.length&&t[r+1]==="}")n.push({type:"literal",text:"}"}),r+=2;else if(t[r]==="{"){const i=o("}",r);if(i<0)throw new Error("Unclosed '{' in template.");n.push({type:"variable",name:t.slice(r+1,i).join("")}),r=i+1}else{if(t[r]==="}")throw new Error("Single '}' in template.");{const i=o("{}",r),a=(i<0?t.slice(r):t.slice(r,i)).join("");n.push({type:"literal",text:a}),r=i<0?t.length:i}}return n},fl=e=>e.map(t=>t[0]==="name"?{type:"variable",name:t[1].includes(".")?t[1].split(".")[0]:t[1]}:["#","&","^",">"].includes(t[0])?{type:"variable",name:t[1]}:{type:"literal",text:t[1]}),hl=e=>{ul();const t=he.parse(e);return fl(t)},pl=(e,t)=>vr(e).reduce((n,o)=>{if(o.type==="variable"){if(o.name in t)return n+t[o.name];throw new Error(`(f-string) Missing value for input ${o.name}`)}return n+o.text},""),ml=(e,t)=>(ul(),he.render(e,t)),Wn={"f-string":pl,mustache:ml},gl={"f-string":vr,mustache:hl},et=(e,t,n)=>Wn[t](e,n),yl=(e,t)=>gl[t](e),oi=(e,t,n)=>{if(!(t in Wn)){const o=Object.keys(Wn);throw new Error(`Invalid template format. Got \`${t}\`;
                         should be one of ${o}`)}try{const o=n.reduce((r,i)=>(r[i]="foo",r),{});Array.isArray(e)?e.forEach(r=>{if(r.type==="text")et(r.text,t,o);else if(r.type==="image_url")if(typeof r.image_url=="string")et(r.image_url,t,o);else{const i=r.image_url.url;et(i,t,o)}else throw new Error(`Invalid message template received. ${JSON.stringify(r,null,2)}`)}):et(e,t,o)}catch(o){throw new Error(`Invalid prompt schema: ${o.message}`)}},Je=class extends ni{static lc_name(){return"PromptTemplate"}constructor(e){if(super(e),Object.defineProperty(this,"template",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"templateFormat",{enumerable:!0,configurable:!0,writable:!0,value:"f-string"}),Object.defineProperty(this,"validateTemplate",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"additionalContentFields",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e.templateFormat==="mustache"&&e.validateTemplate===void 0&&(this.validateTemplate=!1),Object.assign(this,e),this.validateTemplate){if(this.templateFormat==="mustache")throw new Error("Mustache templates cannot be validated.");let t=this.inputVariables;this.partialVariables&&(t=t.concat(Object.keys(this.partialVariables))),oi(this.template,this.templateFormat,t)}}_getPromptType(){return"prompt"}async format(e){const t=await this.mergePartialAndUserVariables(e);return et(this.template,this.templateFormat,t)}static fromExamples(e,t,n,o=`

`,r=""){const i=[r,...e,t].join(o);return new Je({inputVariables:n,template:i})}static fromTemplate(e,t){const{templateFormat:n="f-string",...o}=t??{},r=new Set;return yl(e,n).forEach(i=>{i.type==="variable"&&r.add(i.name)}),new Je({inputVariables:[...r],templateFormat:n,template:e,...o})}async partial(e){const t=this.inputVariables.filter(r=>!(r in e)),n={...this.partialVariables??{},...e},o={...this,inputVariables:t,partialVariables:n};return new Je(o)}serialize(){if(this.outputParser!==void 0)throw new Error("Cannot serialize a prompt template with an output parser");return{_type:this._getPromptType(),input_variables:this.inputVariables,template:this.template,template_format:this.templateFormat}}static async deserialize(e){if(!e.template)throw new Error("Prompt template must have a template");return new Je({inputVariables:e.input_variables,template:e.template,templateFormat:e.template_format})}};const xl=Object.freeze(Object.defineProperty({__proto__:null,PromptTemplate:Je},Symbol.toStringTag,{value:"Module"}));class L0 extends Gc{constructor(t,n){var c,d,u;const o={maxConcurrency:2,...t};super(o),Object.defineProperty(this,"modelName",{enumerable:!0,configurable:!0,writable:!0,value:"text-embedding-ada-002"}),Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:"text-embedding-ada-002"}),Object.defineProperty(this,"batchSize",{enumerable:!0,configurable:!0,writable:!0,value:512}),Object.defineProperty(this,"stripNewLines",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"dimensions",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiVersion",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureADTokenProvider",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiInstanceName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiDeploymentName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIBasePath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"organization",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientConfig",{enumerable:!0,configurable:!0,writable:!0,value:void 0});let r=(o==null?void 0:o.apiKey)??(o==null?void 0:o.openAIApiKey)??Re("OPENAI_API_KEY");const i=(o==null?void 0:o.azureOpenAIApiKey)??Re("AZURE_OPENAI_API_KEY");if(this.azureADTokenProvider=(t==null?void 0:t.azureADTokenProvider)??void 0,!i&&!r&&!this.azureADTokenProvider)throw new Error("OpenAI or Azure OpenAI API key or Token Provider not found");const a=(o==null?void 0:o.azureOpenAIApiInstanceName)??Re("AZURE_OPENAI_API_INSTANCE_NAME"),s=((o==null?void 0:o.azureOpenAIApiEmbeddingsDeploymentName)||(o==null?void 0:o.azureOpenAIApiDeploymentName))??(Re("AZURE_OPENAI_API_EMBEDDINGS_DEPLOYMENT_NAME")||Re("AZURE_OPENAI_API_DEPLOYMENT_NAME")),l=(o==null?void 0:o.azureOpenAIApiVersion)??Re("AZURE_OPENAI_API_VERSION");if(this.azureOpenAIBasePath=(o==null?void 0:o.azureOpenAIBasePath)??Re("AZURE_OPENAI_BASE_PATH"),this.organization=((c=o==null?void 0:o.configuration)==null?void 0:c.organization)??Re("OPENAI_ORGANIZATION"),this.modelName=(o==null?void 0:o.model)??(o==null?void 0:o.modelName)??this.model,this.model=this.modelName,this.batchSize=(o==null?void 0:o.batchSize)??(i?1:this.batchSize),this.stripNewLines=(o==null?void 0:o.stripNewLines)??this.stripNewLines,this.timeout=o==null?void 0:o.timeout,this.dimensions=o==null?void 0:o.dimensions,this.azureOpenAIApiVersion=l,this.azureOpenAIApiKey=i,this.azureOpenAIApiInstanceName=a,this.azureOpenAIApiDeploymentName=s,this.azureOpenAIApiKey||this.azureADTokenProvider){if(!this.azureOpenAIApiInstanceName&&!this.azureOpenAIBasePath)throw new Error("Azure OpenAI API instance name not found");if(!this.azureOpenAIApiDeploymentName)throw new Error("Azure OpenAI API deployment name not found");if(!this.azureOpenAIApiVersion)throw new Error("Azure OpenAI API version not found");r=r??""}this.clientConfig={apiKey:r,organization:this.organization,baseURL:n==null?void 0:n.basePath,dangerouslyAllowBrowser:!0,defaultHeaders:(d=n==null?void 0:n.baseOptions)==null?void 0:d.headers,defaultQuery:(u=n==null?void 0:n.baseOptions)==null?void 0:u.params,...n,...t==null?void 0:t.configuration}}async embedDocuments(t){const n=Uc(this.stripNewLines?t.map(a=>a.replace(/\n/g," ")):t,this.batchSize),o=n.map(a=>{const s={model:this.model,input:a};return this.dimensions&&(s.dimensions=this.dimensions),this.embeddingWithRetry(s)}),r=await Promise.all(o),i=[];for(let a=0;a<r.length;a+=1){const s=n[a],{data:l}=r[a];for(let c=0;c<s.length;c+=1)i.push(l[c].embedding)}return i}async embedQuery(t){const n={model:this.model,input:this.stripNewLines?t.replace(/\n/g," "):t};this.dimensions&&(n.dimensions=this.dimensions);const{data:o}=await this.embeddingWithRetry(n);return o[0].embedding}async embeddingWithRetry(t){if(!this.client){const o={azureOpenAIApiDeploymentName:this.azureOpenAIApiDeploymentName,azureOpenAIApiInstanceName:this.azureOpenAIApiInstanceName,azureOpenAIApiKey:this.azureOpenAIApiKey,azureOpenAIBasePath:this.azureOpenAIBasePath,baseURL:this.clientConfig.baseURL},r=Ev(o),i={...this.clientConfig,baseURL:r,timeout:this.timeout,maxRetries:0};i.baseURL||delete i.baseURL,this.client=new Nv(i)}const n={};return this.azureOpenAIApiKey&&(n.headers={"api-key":this.azureOpenAIApiKey,...n.headers},n.query={"api-version":this.azureOpenAIApiVersion,...n.query}),this.caller.call(async()=>{try{return await this.client.embeddings.create(t,n)}catch(o){throw Cv(o)}})}}class $0 extends Gc{constructor(t){var n,o;if(super(t??{}),Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"modelName",{enumerable:!0,configurable:!0,writable:!0,value:"embedding-001"}),Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:"embedding-001"}),Object.defineProperty(this,"taskType",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"title",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stripNewLines",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"maxBatchSize",{enumerable:!0,configurable:!0,writable:!0,value:100}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.modelName=((n=t==null?void 0:t.model)==null?void 0:n.replace(/^models\//,""))??((o=t==null?void 0:t.modelName)==null?void 0:o.replace(/^models\//,""))??this.modelName,this.model=this.modelName,this.taskType=(t==null?void 0:t.taskType)??this.taskType,this.title=(t==null?void 0:t.title)??this.title,this.title&&this.taskType!=="RETRIEVAL_DOCUMENT")throw new Error("title can only be sepcified with TaskType.RETRIEVAL_DOCUMENT");if(this.apiKey=(t==null?void 0:t.apiKey)??Re("GOOGLE_API_KEY"),!this.apiKey)throw new Error("Please set an API key for Google GenerativeAI in the environmentb variable GOOGLE_API_KEY or in the `apiKey` field of the GoogleGenerativeAIEmbeddings constructor");this.client=new kv(this.apiKey).getGenerativeModel({model:this.model})}_convertToContent(t){return{content:{role:"user",parts:[{text:this.stripNewLines?t.replace(/\n/g," "):t}]},taskType:this.taskType,title:this.title}}async _embedQueryContent(t){const n=this._convertToContent(t);return(await this.client.embedContent(n)).embedding.values??[]}async _embedDocumentsContent(t){const n=Uc(t,this.maxBatchSize),o=n.map(r=>({requests:r.map(i=>this._convertToContent(i))}));return(await Promise.allSettled(o.map(r=>this.client.batchEmbedContents(r)))).flatMap((r,i)=>r.status==="fulfilled"?r.value.embeddings.map(a=>a.values||[]):Array(n[i].length).fill([]))}embedQuery(t){return this.caller.call(this._embedQueryContent.bind(this),t)}embedDocuments(t){return this.caller.call(this._embedDocumentsContent.bind(this),t)}}let vl,wl;vl=()=>{const{confirmPassphrase:e}=Pv();return{getEmbedding:S.useCallback(async t=>{var a;const n=t==null?void 0:t.encrypted,o=(a=t.data)==null?void 0:a.provider;if(await e(),!(n!=null&&n.provider)&&!(n!=null&&n.key))throw new Error("API Key is not found.");const r=await nv.get("passphrase");if(!r)throw new Error("Passphrase is not found");const i=await Mv(`${n.key}`,r);if(!i||!o)throw new Error("API Key or provider is not found.");switch(o){case od.OpenAI:return new L0({apiKey:i,model:"text-embedding-3-small"});case od.GoogleGenerativeAI:return new $0({apiKey:i,model:"text-embedding-004"});default:throw new Error("Provider is not supported")}},[e])}},kd=()=>{const[e,t]=S.useState(!1),n=qc(s=>s.index),o=qc(s=>s.similaritySearchWithScore),{getEmbedding:r}=vl(),i=S.useCallback(async(s,...l)=>{var c,d;try{const[u,f]=l;if(t(!0),!s||!((c=s.data)!=null&&c.provider)||((d=s.data)==null?void 0:d.provider)==="local_transformers")return o(u,f);const p=await r(s);return o({...u,embedding:p},f)}finally{t(!1)}},[r,o]),a=S.useCallback(async(s,...l)=>{var c,d;try{const[u,f]=l;if(t(!0),!s||!((c=s.data)!=null&&c.provider)||((d=s.data)==null?void 0:d.provider)==="local_transformers")return n(u,f);const p=await r(s);return n({...u,embedding:p},f)}finally{t(!1)}},[r,n]);return{loading:e,index:a,similaritySearchWithScore:i}},wl=S.lazy(()=>qt(()=>import("./index-B_J6TCQY.js"),__vite__mapDeps([10,11,2,3,12,13]))),ld=S.memo(({source:e,className:t,...n})=>{const o=Dx(i=>i.theme),r=S.useMemo(()=>({pre:({children:i,className:a,...s})=>h.jsx("pre",{...s,className:Q(a,"nowheel"),children:i}),think:({children:i})=>h.jsxs(h.Fragment,{children:[h.jsx("code",{className:"!rounded-none",children:"Think: "}),h.jsx("blockquote",{className:"think",children:i})]})}),[]);return h.jsx(S.Suspense,{children:h.jsx(wl,{className:Q("!text-sm [&_p]:leading-relaxed !max-w-full !bg-transparent !font-sans",t),source:e,wrapperElement:{"data-color-mode":o==="dark"?"dark":"light"},components:r,...n})})},(e,t)=>e.source===t.source),so=S.forwardRef(({className:e,...t},n)=>h.jsx("div",{ref:n,className:Q("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t})),so.displayName="Card",ho=S.forwardRef(({className:e,...t},n)=>h.jsx("div",{ref:n,className:Q("flex flex-col space-y-1.5 p-6",e),...t})),ho.displayName="CardHeader",po=S.forwardRef(({className:e,...t},n)=>h.jsx("h3",{ref:n,className:Q("text-2xl font-semibold leading-none tracking-tight",e),...t})),po.displayName="CardTitle",ti=S.forwardRef(({className:e,...t},n)=>h.jsx("p",{ref:n,className:Q("text-sm text-muted-foreground",e),...t})),ti.displayName="CardDescription",mo=S.forwardRef(({className:e,...t},n)=>h.jsx("div",{ref:n,className:Q("p-6 pt-0",e),...t})),mo.displayName="CardContent",vo=S.forwardRef(({className:e,...t},n)=>h.jsx("div",{ref:n,className:Q("flex items-center p-6 pt-0",e),...t})),vo.displayName="CardFooter";let bl;Ed=S.memo(e=>{const[t,n]=S.useState(!1),[o,r]=S.useState(e.options||{}),{t:i}=ke("atoms"),a=()=>{t||r(e.options||{}),n(!t)},s=()=>{var l;(l=e.onChangeOptions)==null||l.call(e,o||{}),n(!1)};return h.jsx("div",{className:e.className,children:h.jsxs(Av,{open:t,onOpenChange:n,children:[h.jsx(Ov,{asChild:!0,children:h.jsx("div",{className:"flex justify-end gap-2",children:h.jsxs(io,{onClick:a,variant:"link",className:"flex items-center px-0",children:[h.jsx(ce,{name:"settings"}),h.jsx(Ze,{children:i("llm_setting.title")})]})})}),h.jsx(Iv,{className:"w-full p-0",children:t?h.jsxs(so,{className:"!border-none",children:[h.jsx(ho,{children:h.jsx(po,{children:i("llm_setting.title")})}),h.jsxs(mo,{children:[h.jsxs("div",{children:[h.jsxs(Ze,{children:[i("llm_setting.temperature"),":"]}),h.jsx(yt,{type:"number",value:o.temperature?`${o.temperature}`:"",onChange:l=>r(c=>({...c,temperature:l.target.value}))})]}),h.jsxs("div",{children:[h.jsxs(Ze,{children:[i("llm_setting.top_p"),":"]}),h.jsx(yt,{type:"number",value:o.topP?`${o.topP}`:"",onChange:l=>r(c=>({...c,topP:l.target.value}))})]}),h.jsxs("div",{children:[h.jsxs(Ze,{children:[i("llm_setting.top_k"),":"]}),h.jsx(yt,{type:"number",value:o.topK?`${o.topK}`:"",onChange:l=>r(c=>({...c,topK:l.target.value}))})]}),h.jsxs("div",{children:[h.jsxs(Ze,{children:[i("llm_setting.max_tokens"),":"]}),h.jsx(yt,{type:"number",value:o.maxTokens?`${o.maxTokens}`:"",onChange:l=>r(c=>({...c,maxTokens:l.target.value}))})]}),h.jsxs("div",{children:[h.jsxs(Ze,{children:[i("llm_setting.stop_sequences"),":"]}),h.jsx(yt,{placeholder:i("llm_setting.stop_sequences_placeholder"),value:o.stop?`${o.stop}`:"",onChange:l=>r(c=>({...c,stop:l.target.value}))})]})]}),h.jsx(vo,{className:"flex justify-end",children:h.jsx(io,{variant:"secondary",onClick:s,children:i("llm_setting.save")})})]}):void 0})]})})}),Gr=["Qwen2.5-1.5B-Instruct-q4f32_1-MLC","Qwen2.5-Coder-1.5B-Instruct-q4f16_1-MLC","stablelm-2-zephyr-1_6b-q4f16_1-MLC-1k","Phi-3.5-mini-instruct-q4f16_1-MLC-1k","Llama-3.2-3B-Instruct-q4f32_1-MLC","DeepSeek-R1-Distill-Qwen-7B-q4f16_1-MLC"],bl=Zc("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}}),ye=function({className:e,variant:t,...n}){return h.jsx("div",{className:Q(bl({variant:t}),e),...n})},sd=S.memo(e=>{var c;const{cloud:t,name:n,model:o,isCached:r,isFunctionCalling:i}=e,{t:a}=ke("atoms"),s=S.useCallback(d=>d===1?"llm_info.model_types.embedding":d===2?"llm_info.model_types.vlm":"llm_info.model_types.llm",[]),l=S.useMemo(()=>{if(o)switch(o.model_type){case 0:case 1:return h.jsx(ye,{className:"",children:a(s(o.model_type))});case 2:return h.jsxs(h.Fragment,{children:[h.jsx(ye,{className:"",children:a(s(0))}),h.jsx(ye,{className:"",children:a(s(o.model_type))})]})}},[o,s,a]);if(o)return h.jsxs(h.Fragment,{children:[l,Gr.some(d=>n&&d.includes(n))?h.jsx(ye,{className:"",variant:"outline",children:a("llm_info.recommended")}):null,r?h.jsx(ye,{className:"",variant:"outline",children:a("llm_info.cached")}):null,t?h.jsx(ye,{className:"",variant:"outline",children:a("llm_info.cloud")}):null,i?h.jsx(ye,{className:"",variant:"outline",children:a("llm_info.function_calling")}):null,o!=null&&o.low_resource_required?h.jsx(ye,{className:"",variant:"outline",children:a("llm_info.low_resource_required")}):null,(c=o==null?void 0:o.overrides)!=null&&c.context_window_size?h.jsxs(ye,{className:"",variant:"outline",children:[o.overrides.context_window_size.toLocaleString("en-US")," Tokens"]}):null,o!=null&&o.vram_required_MB?h.jsxs(ye,{className:"",variant:"outline",children:["VRAM: ",o.vram_required_MB.toLocaleString("en-US")," MB"]}):null]})});class V0{async loadAndSplit(t){if(t===void 0)throw new Error("You must pass a text splitter to use this method.");const n=await this.load();return t.invoke(n)}}fd=class extends V0{constructor(e,{splitPages:t=!0,pdfjs:n=B0,parsedItemSeparator:o=""}={}){super(),Object.defineProperty(this,"blob",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"splitPages",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"pdfjs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"parsedItemSeparator",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.blob=e,this.splitPages=t??this.splitPages,this.pdfjs=n,this.parsedItemSeparator=o}async load(){const{getDocument:e,version:t}=await this.pdfjs(),n=await e({data:new Uint8Array(await this.blob.arrayBuffer()),useWorkerFetch:!1,isEvalSupported:!1,useSystemFonts:!0}).promise,o=await n.getMetadata().catch(()=>null),r=[];for(let i=1;i<=n.numPages;i+=1){const a=await(await n.getPage(i)).getTextContent();if(a.items.length===0)continue;let s;const l=[];for(const d of a.items)"str"in d&&(s===d.transform[5]||!s?l.push(d.str):l.push(`
${d.str}`),s=d.transform[5]);const c=l.join(this.parsedItemSeparator);r.push(new Qc({pageContent:c,metadata:{pdf:{version:t,info:o==null?void 0:o.info,metadata:o==null?void 0:o.metadata,totalPages:n.numPages},loc:{pageNumber:i}}}))}return this.splitPages?r:r.length===0?[]:[new Qc({pageContent:r.map(i=>i.pageContent).join(`

`),metadata:{pdf:{version:t,info:o==null?void 0:o.info,metadata:o==null?void 0:o.metadata,totalPages:n.numPages}}})]}};async function B0(){try{const{default:e}=await qt(async()=>{const{default:o}=await import("./pdf-Cli72Pte.js").then(async r=>(await r.__tla,r)).then(r=>r.p);return{default:o}},__vite__mapDeps([14,2,3,1])),{getDocument:t,version:n}=e;return{getDocument:t,version:n}}catch(e){throw console.error(e),new Error("Failed to load pdf-parse. Please install it with eg. `npm install pdf-parse`.")}}var wr="Tabs",[H0,Dv]=Zr(wr,[Jc]),Sl=Jc(),[F0,br]=H0(wr),_l=S.forwardRef((e,t)=>{const{__scopeTabs:n,value:o,onValueChange:r,defaultValue:i,orientation:a="horizontal",dir:s,activationMode:l="automatic",...c}=e,d=Xr(s),[u,f]=Qt({prop:o,onChange:r,defaultProp:i});return h.jsx(F0,{scope:n,baseId:Jt(),value:u,onValueChange:f,orientation:a,dir:d,activationMode:l,children:h.jsx(se.div,{dir:d,"data-orientation":a,...c,ref:t})})});_l.displayName=wr;var El="TabsList",Nl=S.forwardRef((e,t)=>{const{__scopeTabs:n,loop:o=!0,...r}=e,i=br(El,n),a=Sl(n);return h.jsx(ov,{asChild:!0,...a,orientation:i.orientation,dir:i.dir,loop:o,children:h.jsx(se.div,{role:"tablist","aria-orientation":i.orientation,...r,ref:t})})});Nl.displayName=El;var Cl="TabsTrigger",kl=S.forwardRef((e,t)=>{const{__scopeTabs:n,value:o,disabled:r=!1,...i}=e,a=br(Cl,n),s=Sl(n),l=jl(a.baseId,o),c=Al(a.baseId,o),d=o===a.value;return h.jsx(rv,{asChild:!0,...s,focusable:!r,active:d,children:h.jsx(se.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":c,"data-state":d?"active":"inactive","data-disabled":r?"":void 0,disabled:r,id:l,...i,ref:t,onMouseDown:re(e.onMouseDown,u=>{!r&&u.button===0&&u.ctrlKey===!1?a.onValueChange(o):u.preventDefault()}),onKeyDown:re(e.onKeyDown,u=>{[" ","Enter"].includes(u.key)&&a.onValueChange(o)}),onFocus:re(e.onFocus,()=>{const u=a.activationMode!=="manual";!d&&!r&&u&&a.onValueChange(o)})})})});kl.displayName=Cl;var Pl="TabsContent",Ml=S.forwardRef((e,t)=>{const{__scopeTabs:n,value:o,forceMount:r,children:i,...a}=e,s=br(Pl,n),l=jl(s.baseId,o),c=Al(s.baseId,o),d=o===s.value,u=S.useRef(d);return S.useEffect(()=>{const f=requestAnimationFrame(()=>u.current=!1);return()=>cancelAnimationFrame(f)},[]),h.jsx(Tx,{present:r||d,children:({present:f})=>h.jsx(se.div,{"data-state":d?"active":"inactive","data-orientation":s.orientation,role:"tabpanel","aria-labelledby":l,hidden:!f,id:c,tabIndex:0,...a,ref:t,style:{...e.style,animationDuration:u.current?"0s":void 0},children:f&&i})})});Ml.displayName=Pl;function jl(e,t){return`${e}-trigger-${t}`}function Al(e,t){return`${e}-content-${t}`}var Z0=_l,Ol=Nl,Il=kl,zl=Ml;Sd=Z0,ai=S.forwardRef(({className:e,...t},n)=>h.jsx(Ol,{ref:n,className:Q("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t})),ai.displayName=Ol.displayName,si=S.forwardRef(({className:e,...t},n)=>h.jsx(Il,{ref:n,className:Q("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t})),si.displayName=Il.displayName,qr=S.forwardRef(({className:e,...t},n)=>h.jsx(zl,{ref:n,className:Q("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t})),qr.displayName=zl.displayName,co=function(e,[t,n]){return Math.min(n,Math.max(t,e))};var Y0=[" ","Enter","ArrowUp","ArrowDown"],X0=[" ","Enter"],Zt="Select",[Gn,Un,K0]=Yc(Zt),[pt,Tv]=Zr(Zt,[K0,ed]),qn=ed(),[W0,Be]=pt(Zt),[G0,U0]=pt(Zt),Rl=e=>{const{__scopeSelect:t,children:n,open:o,defaultOpen:r,onOpenChange:i,value:a,defaultValue:s,onValueChange:l,dir:c,name:d,autoComplete:u,disabled:f,required:p,form:y}=e,g=qn(t),[b,m]=S.useState(null),[w,x]=S.useState(null),[v,E]=S.useState(!1),O=Xr(c),[k=!1,A]=Qt({prop:o,defaultProp:r,onChange:i}),[I,z]=Qt({prop:a,defaultProp:s,onChange:l}),$=S.useRef(null),D=b?y||!!b.closest("form"):!0,[T,_]=S.useState(new Set),P=Array.from(T).map(N=>N.props.value).join(";");return h.jsx(fv,{...g,children:h.jsxs(W0,{required:p,scope:t,trigger:b,onTriggerChange:m,valueNode:w,onValueNodeChange:x,valueNodeHasChildren:v,onValueNodeHasChildrenChange:E,contentId:Jt(),value:I,onValueChange:z,open:k,onOpenChange:A,dir:O,triggerPointerDownPosRef:$,disabled:f,children:[h.jsx(Gn.Provider,{scope:t,children:h.jsx(G0,{scope:e.__scopeSelect,onNativeOptionAdd:S.useCallback(N=>{_(j=>new Set(j).add(N))},[]),onNativeOptionRemove:S.useCallback(N=>{_(j=>{const C=new Set(j);return C.delete(N),C})},[]),children:n})}),D?h.jsxs(ac,{"aria-hidden":!0,required:p,tabIndex:-1,name:d,autoComplete:u,value:I,onChange:N=>z(N.target.value),disabled:f,form:y,children:[I===void 0?h.jsx("option",{value:""}):null,Array.from(T)]},P):null]})})};Rl.displayName=Zt;var Dl="SelectTrigger",Tl=S.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:o=!1,...r}=e,i=qn(n),a=Be(Dl,n),s=a.disabled||o,l=_e(t,a.onTriggerChange),c=Un(n),d=S.useRef("touch"),[u,f,p]=sc(g=>{const b=c().filter(x=>!x.disabled),m=b.find(x=>x.value===a.value),w=lc(b,g,m);w!==void 0&&a.onValueChange(w.value)}),y=g=>{s||(a.onOpenChange(!0),p()),g&&(a.triggerPointerDownPosRef.current={x:Math.round(g.pageX),y:Math.round(g.pageY)})};return h.jsx(iv,{asChild:!0,...i,children:h.jsx(se.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:s,"data-disabled":s?"":void 0,"data-placeholder":ic(a.value)?"":void 0,...r,ref:l,onClick:re(r.onClick,g=>{g.currentTarget.focus(),d.current!=="mouse"&&y(g)}),onPointerDown:re(r.onPointerDown,g=>{d.current=g.pointerType;const b=g.target;b.hasPointerCapture(g.pointerId)&&b.releasePointerCapture(g.pointerId),g.button===0&&g.ctrlKey===!1&&g.pointerType==="mouse"&&(y(g),g.preventDefault())}),onKeyDown:re(r.onKeyDown,g=>{const b=u.current!=="";!(g.ctrlKey||g.altKey||g.metaKey)&&g.key.length===1&&f(g.key),!(b&&g.key===" ")&&Y0.includes(g.key)&&(y(),g.preventDefault())})})})});Tl.displayName=Dl;var Ll="SelectValue",$l=S.forwardRef((e,t)=>{const{__scopeSelect:n,className:o,style:r,children:i,placeholder:a="",...s}=e,l=Be(Ll,n),{onValueNodeHasChildrenChange:c}=l,d=i!==void 0,u=_e(t,l.onValueNodeChange);return Fe(()=>{c(d)},[c,d]),h.jsx(se.span,{...s,ref:u,style:{pointerEvents:"none"},children:ic(l.value)?h.jsx(h.Fragment,{children:a}):i})});$l.displayName=Ll;var q0="SelectIcon",Vl=S.forwardRef((e,t)=>{const{__scopeSelect:n,children:o,...r}=e;return h.jsx(se.span,{"aria-hidden":!0,...r,ref:t,children:o||"\u25BC"})});Vl.displayName=q0;var Q0="SelectPortal",Bl=e=>h.jsx(Hx,{asChild:!0,...e});Bl.displayName=Q0;var Qe="SelectContent",Hl=S.forwardRef((e,t)=>{const n=Be(Qe,e.__scopeSelect),[o,r]=S.useState();if(Fe(()=>{r(new DocumentFragment)},[]),!n.open){const i=o;return i?Fr.createPortal(h.jsx(Fl,{scope:e.__scopeSelect,children:h.jsx(Gn.Slot,{scope:e.__scopeSelect,children:h.jsx("div",{children:e.children})})}),i):null}return h.jsx(Zl,{...e,ref:t})});Hl.displayName=Qe;var Se=10,[Fl,He]=pt(Qe),J0="SelectContentImpl",Zl=S.forwardRef((e,t)=>{const{__scopeSelect:n,position:o="item-aligned",onCloseAutoFocus:r,onEscapeKeyDown:i,onPointerDownOutside:a,side:s,sideOffset:l,align:c,alignOffset:d,arrowPadding:u,collisionBoundary:f,collisionPadding:p,sticky:y,hideWhenDetached:g,avoidCollisions:b,...m}=e,w=Be(Qe,n),[x,v]=S.useState(null),[E,O]=S.useState(null),k=_e(t,V=>v(V)),[A,I]=S.useState(null),[z,$]=S.useState(null),D=Un(n),[T,_]=S.useState(!1),P=S.useRef(!1);S.useEffect(()=>{if(x)return av(x)},[x]),sv();const N=S.useCallback(V=>{const[L,...K]=D().map(X=>X.ref.current),[Y]=K.slice(-1),W=document.activeElement;for(const X of V)if(X===W||(X==null||X.scrollIntoView({block:"nearest"}),X===L&&E&&(E.scrollTop=0),X===Y&&E&&(E.scrollTop=E.scrollHeight),X==null||X.focus(),document.activeElement!==W))return},[D,E]),j=S.useCallback(()=>N([A,x]),[N,A,x]);S.useEffect(()=>{T&&j()},[T,j]);const{onOpenChange:C,triggerPointerDownPosRef:M}=w;S.useEffect(()=>{if(x){let V={x:0,y:0};const L=Y=>{var W,X;V={x:Math.abs(Math.round(Y.pageX)-(((W=M.current)==null?void 0:W.x)??0)),y:Math.abs(Math.round(Y.pageY)-(((X=M.current)==null?void 0:X.y)??0))}},K=Y=>{V.x<=10&&V.y<=10?Y.preventDefault():x.contains(Y.target)||C(!1),document.removeEventListener("pointermove",L),M.current=null};return M.current!==null&&(document.addEventListener("pointermove",L),document.addEventListener("pointerup",K,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",L),document.removeEventListener("pointerup",K,{capture:!0})}}},[x,C,M]),S.useEffect(()=>{const V=()=>C(!1);return window.addEventListener("blur",V),window.addEventListener("resize",V),()=>{window.removeEventListener("blur",V),window.removeEventListener("resize",V)}},[C]);const[R,B]=sc(V=>{const L=D().filter(W=>!W.disabled),K=L.find(W=>W.ref.current===document.activeElement),Y=lc(L,V,K);Y&&setTimeout(()=>Y.ref.current.focus())}),H=S.useCallback((V,L,K)=>{const Y=!P.current&&!K;(w.value!==void 0&&w.value===L||Y)&&(I(V),Y&&(P.current=!0))},[w.value]),G=S.useCallback(()=>x==null?void 0:x.focus(),[x]),F=S.useCallback((V,L,K)=>{const Y=!P.current&&!K;(w.value!==void 0&&w.value===L||Y)&&$(V)},[w.value]),Z=o==="popper"?Sr:Yl,q=Z===Sr?{side:s,sideOffset:l,align:c,alignOffset:d,arrowPadding:u,collisionBoundary:f,collisionPadding:p,sticky:y,hideWhenDetached:g,avoidCollisions:b}:{};return h.jsx(Fl,{scope:n,content:x,viewport:E,onViewportChange:O,itemRefCallback:H,selectedItem:A,onItemLeave:G,itemTextRefCallback:F,focusSelectedItem:j,selectedItemText:z,position:o,isPositioned:T,searchRef:R,children:h.jsx(lv,{as:Lx,allowPinchZoom:!0,children:h.jsx(cv,{asChild:!0,trapped:w.open,onMountAutoFocus:V=>{V.preventDefault()},onUnmountAutoFocus:re(r,V=>{var L;(L=w.trigger)==null||L.focus({preventScroll:!0}),V.preventDefault()}),children:h.jsx($x,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:a,onFocusOutside:V=>V.preventDefault(),onDismiss:()=>w.onOpenChange(!1),children:h.jsx(Z,{role:"listbox",id:w.contentId,"data-state":w.open?"open":"closed",dir:w.dir,onContextMenu:V=>V.preventDefault(),...m,...q,onPlaced:()=>_(!0),ref:k,style:{display:"flex",flexDirection:"column",outline:"none",...m.style},onKeyDown:re(m.onKeyDown,V=>{const L=V.ctrlKey||V.altKey||V.metaKey;if(V.key==="Tab"&&V.preventDefault(),!L&&V.key.length===1&&B(V.key),["ArrowUp","ArrowDown","Home","End"].includes(V.key)){let K=D().filter(Y=>!Y.disabled).map(Y=>Y.ref.current);if(["ArrowUp","End"].includes(V.key)&&(K=K.slice().reverse()),["ArrowUp","ArrowDown"].includes(V.key)){const Y=V.target,W=K.indexOf(Y);K=K.slice(W+1)}setTimeout(()=>N(K)),V.preventDefault()}})})})})})})});Zl.displayName=J0;var ey="SelectItemAlignedPosition",Yl=S.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:o,...r}=e,i=Be(Qe,n),a=He(Qe,n),[s,l]=S.useState(null),[c,d]=S.useState(null),u=_e(t,k=>d(k)),f=Un(n),p=S.useRef(!1),y=S.useRef(!0),{viewport:g,selectedItem:b,selectedItemText:m,focusSelectedItem:w}=a,x=S.useCallback(()=>{if(i.trigger&&i.valueNode&&s&&c&&g&&b&&m){const k=i.trigger.getBoundingClientRect(),A=c.getBoundingClientRect(),I=i.valueNode.getBoundingClientRect(),z=m.getBoundingClientRect();if(i.dir!=="rtl"){const Y=z.left-A.left,W=I.left-Y,X=k.left-W,J=k.width+X,te=Math.max(J,A.width),ue=window.innerWidth-Se,Ce=co(W,[Se,Math.max(Se,ue-te)]);s.style.minWidth=J+"px",s.style.left=Ce+"px"}else{const Y=A.right-z.right,W=window.innerWidth-I.right-Y,X=window.innerWidth-k.right-W,J=k.width+X,te=Math.max(J,A.width),ue=window.innerWidth-Se,Ce=co(W,[Se,Math.max(Se,ue-te)]);s.style.minWidth=J+"px",s.style.right=Ce+"px"}const $=f(),D=window.innerHeight-Se*2,T=g.scrollHeight,_=window.getComputedStyle(c),P=parseInt(_.borderTopWidth,10),N=parseInt(_.paddingTop,10),j=parseInt(_.borderBottomWidth,10),C=parseInt(_.paddingBottom,10),M=P+N+T+C+j,R=Math.min(b.offsetHeight*5,M),B=window.getComputedStyle(g),H=parseInt(B.paddingTop,10),G=parseInt(B.paddingBottom,10),F=k.top+k.height/2-Se,Z=D-F,q=b.offsetHeight/2,V=b.offsetTop+q,L=P+N+V,K=M-L;if(L<=F){const Y=$.length>0&&b===$[$.length-1].ref.current;s.style.bottom="0px";const W=c.clientHeight-g.offsetTop-g.offsetHeight,X=Math.max(Z,q+(Y?G:0)+W+j),J=L+X;s.style.height=J+"px"}else{const Y=$.length>0&&b===$[0].ref.current;s.style.top="0px";const W=Math.max(F,P+g.offsetTop+(Y?H:0)+q)+K;s.style.height=W+"px",g.scrollTop=L-F+g.offsetTop}s.style.margin=`${Se}px 0`,s.style.minHeight=R+"px",s.style.maxHeight=D+"px",o==null||o(),requestAnimationFrame(()=>p.current=!0)}},[f,i.trigger,i.valueNode,s,c,g,b,m,i.dir,o]);Fe(()=>x(),[x]);const[v,E]=S.useState();Fe(()=>{c&&E(window.getComputedStyle(c).zIndex)},[c]);const O=S.useCallback(k=>{k&&y.current===!0&&(x(),w==null||w(),y.current=!1)},[x,w]);return h.jsx(ny,{scope:n,contentWrapper:s,shouldExpandOnScrollRef:p,onScrollButtonChange:O,children:h.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:v},children:h.jsx(se.div,{...r,ref:u,style:{boxSizing:"border-box",maxHeight:"100%",...r.style}})})})});Yl.displayName=ey;var ty="SelectPopperPosition",Sr=S.forwardRef((e,t)=>{const{__scopeSelect:n,align:o="start",collisionPadding:r=Se,...i}=e,a=qn(n);return h.jsx(dv,{...a,...i,ref:t,align:o,collisionPadding:r,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Sr.displayName=ty;var[ny,_r]=pt(Qe,{}),Er="SelectViewport",Xl=S.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:o,...r}=e,i=He(Er,n),a=_r(Er,n),s=_e(t,i.onViewportChange),l=S.useRef(0);return h.jsxs(h.Fragment,{children:[h.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:o}),h.jsx(Gn.Slot,{scope:n,children:h.jsx(se.div,{"data-radix-select-viewport":"",role:"presentation",...r,ref:s,style:{position:"relative",flex:1,overflow:"hidden auto",...r.style},onScroll:re(r.onScroll,c=>{const d=c.currentTarget,{contentWrapper:u,shouldExpandOnScrollRef:f}=a;if(f!=null&&f.current&&u){const p=Math.abs(l.current-d.scrollTop);if(p>0){const y=window.innerHeight-Se*2,g=parseFloat(u.style.minHeight),b=parseFloat(u.style.height),m=Math.max(g,b);if(m<y){const w=m+p,x=Math.min(y,w),v=w-x;u.style.height=x+"px",u.style.bottom==="0px"&&(d.scrollTop=v>0?v:0,u.style.justifyContent="flex-end")}}}l.current=d.scrollTop})})})]})});Xl.displayName=Er;var Kl="SelectGroup",[oy,ry]=pt(Kl),iy=S.forwardRef((e,t)=>{const{__scopeSelect:n,...o}=e,r=Jt();return h.jsx(oy,{scope:n,id:r,children:h.jsx(se.div,{role:"group","aria-labelledby":r,...o,ref:t})})});iy.displayName=Kl;var Wl="SelectLabel",Gl=S.forwardRef((e,t)=>{const{__scopeSelect:n,...o}=e,r=ry(Wl,n);return h.jsx(se.div,{id:r.id,...o,ref:t})});Gl.displayName=Wl;var Qn="SelectItem",[ay,Ul]=pt(Qn),ql=S.forwardRef((e,t)=>{const{__scopeSelect:n,value:o,disabled:r=!1,textValue:i,...a}=e,s=Be(Qn,n),l=He(Qn,n),c=s.value===o,[d,u]=S.useState(i??""),[f,p]=S.useState(!1),y=_e(t,w=>{var x;return(x=l.itemRefCallback)==null?void 0:x.call(l,w,o,r)}),g=Jt(),b=S.useRef("touch"),m=()=>{r||(s.onValueChange(o),s.onOpenChange(!1))};if(o==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return h.jsx(ay,{scope:n,value:o,disabled:r,textId:g,isSelected:c,onItemTextChange:S.useCallback(w=>{u(x=>x||((w==null?void 0:w.textContent)??"").trim())},[]),children:h.jsx(Gn.ItemSlot,{scope:n,value:o,disabled:r,textValue:d,children:h.jsx(se.div,{role:"option","aria-labelledby":g,"data-highlighted":f?"":void 0,"aria-selected":c&&f,"data-state":c?"checked":"unchecked","aria-disabled":r||void 0,"data-disabled":r?"":void 0,tabIndex:r?void 0:-1,...a,ref:y,onFocus:re(a.onFocus,()=>p(!0)),onBlur:re(a.onBlur,()=>p(!1)),onClick:re(a.onClick,()=>{b.current!=="mouse"&&m()}),onPointerUp:re(a.onPointerUp,()=>{b.current==="mouse"&&m()}),onPointerDown:re(a.onPointerDown,w=>{b.current=w.pointerType}),onPointerMove:re(a.onPointerMove,w=>{var x;b.current=w.pointerType,r?(x=l.onItemLeave)==null||x.call(l):b.current==="mouse"&&w.currentTarget.focus({preventScroll:!0})}),onPointerLeave:re(a.onPointerLeave,w=>{var x;w.currentTarget===document.activeElement&&((x=l.onItemLeave)==null||x.call(l))}),onKeyDown:re(a.onKeyDown,w=>{var x;((x=l.searchRef)==null?void 0:x.current)!==""&&w.key===" "||(X0.includes(w.key)&&m(),w.key===" "&&w.preventDefault())})})})})});ql.displayName=Qn;var Yt="SelectItemText",Ql=S.forwardRef((e,t)=>{const{__scopeSelect:n,className:o,style:r,...i}=e,a=Be(Yt,n),s=He(Yt,n),l=Ul(Yt,n),c=U0(Yt,n),[d,u]=S.useState(null),f=_e(t,m=>u(m),l.onItemTextChange,m=>{var w;return(w=s.itemTextRefCallback)==null?void 0:w.call(s,m,l.value,l.disabled)}),p=d==null?void 0:d.textContent,y=S.useMemo(()=>h.jsx("option",{value:l.value,disabled:l.disabled,children:p},l.value),[l.disabled,l.value,p]),{onNativeOptionAdd:g,onNativeOptionRemove:b}=c;return Fe(()=>(g(y),()=>b(y)),[g,b,y]),h.jsxs(h.Fragment,{children:[h.jsx(se.span,{id:l.textId,...i,ref:f}),l.isSelected&&a.valueNode&&!a.valueNodeHasChildren?Fr.createPortal(i.children,a.valueNode):null]})});Ql.displayName=Yt;var Jl="SelectItemIndicator",ec=S.forwardRef((e,t)=>{const{__scopeSelect:n,...o}=e;return Ul(Jl,n).isSelected?h.jsx(se.span,{"aria-hidden":!0,...o,ref:t}):null});ec.displayName=Jl;var Nr="SelectScrollUpButton",tc=S.forwardRef((e,t)=>{const n=He(Nr,e.__scopeSelect),o=_r(Nr,e.__scopeSelect),[r,i]=S.useState(!1),a=_e(t,o.onScrollButtonChange);return Fe(()=>{if(n.viewport&&n.isPositioned){let s=function(){const c=l.scrollTop>0;i(c)};const l=n.viewport;return s(),l.addEventListener("scroll",s),()=>l.removeEventListener("scroll",s)}},[n.viewport,n.isPositioned]),r?h.jsx(oc,{...e,ref:a,onAutoScroll:()=>{const{viewport:s,selectedItem:l}=n;s&&l&&(s.scrollTop=s.scrollTop-l.offsetHeight)}}):null});tc.displayName=Nr;var Cr="SelectScrollDownButton",nc=S.forwardRef((e,t)=>{const n=He(Cr,e.__scopeSelect),o=_r(Cr,e.__scopeSelect),[r,i]=S.useState(!1),a=_e(t,o.onScrollButtonChange);return Fe(()=>{if(n.viewport&&n.isPositioned){let s=function(){const c=l.scrollHeight-l.clientHeight,d=Math.ceil(l.scrollTop)<c;i(d)};const l=n.viewport;return s(),l.addEventListener("scroll",s),()=>l.removeEventListener("scroll",s)}},[n.viewport,n.isPositioned]),r?h.jsx(oc,{...e,ref:a,onAutoScroll:()=>{const{viewport:s,selectedItem:l}=n;s&&l&&(s.scrollTop=s.scrollTop+l.offsetHeight)}}):null});nc.displayName=Cr;var oc=S.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:o,...r}=e,i=He("SelectScrollButton",n),a=S.useRef(null),s=Un(n),l=S.useCallback(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return S.useEffect(()=>()=>l(),[l]),Fe(()=>{var c,d;(d=(c=s().find(u=>u.ref.current===document.activeElement))==null?void 0:c.ref.current)==null||d.scrollIntoView({block:"nearest"})},[s]),h.jsx(se.div,{"aria-hidden":!0,...r,ref:t,style:{flexShrink:0,...r.style},onPointerDown:re(r.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(o,50))}),onPointerMove:re(r.onPointerMove,()=>{var c;(c=i.onItemLeave)==null||c.call(i),a.current===null&&(a.current=window.setInterval(o,50))}),onPointerLeave:re(r.onPointerLeave,()=>{l()})})}),sy="SelectSeparator",rc=S.forwardRef((e,t)=>{const{__scopeSelect:n,...o}=e;return h.jsx(se.div,{"aria-hidden":!0,...o,ref:t})});rc.displayName=sy;var kr="SelectArrow",ly=S.forwardRef((e,t)=>{const{__scopeSelect:n,...o}=e,r=qn(n),i=Be(kr,n),a=He(kr,n);return i.open&&a.position==="popper"?h.jsx(uv,{...r,...o,ref:t}):null});ly.displayName=kr;function ic(e){return e===""||e===void 0}var ac=S.forwardRef((e,t)=>{const{value:n,...o}=e,r=S.useRef(null),i=_e(t,r),a=Ux(n);return S.useEffect(()=>{const s=r.current,l=window.HTMLSelectElement.prototype,c=Object.getOwnPropertyDescriptor(l,"value").set;if(a!==n&&c){const d=new Event("change",{bubbles:!0});c.call(s,n),s.dispatchEvent(d)}},[a,n]),h.jsx(Vx,{asChild:!0,children:h.jsx("select",{...o,ref:i,defaultValue:n})})});ac.displayName="BubbleSelect";function sc(e){const t=Bx(e),n=S.useRef(""),o=S.useRef(0),r=S.useCallback(a=>{const s=n.current+a;t(s),function l(c){n.current=c,window.clearTimeout(o.current),c!==""&&(o.current=window.setTimeout(()=>l(""),1e3))}(s)},[t]),i=S.useCallback(()=>{n.current="",window.clearTimeout(o.current)},[]);return S.useEffect(()=>()=>window.clearTimeout(o.current),[]),[n,r,i]}function lc(e,t,n){const o=t.length>1&&Array.from(t).every(s=>s===t[0])?t[0]:t,r=n?e.indexOf(n):-1;let i=cy(e,Math.max(r,0));o.length===1&&(i=i.filter(s=>s!==n));const a=i.find(s=>s.textValue.toLowerCase().startsWith(o.toLowerCase()));return a!==n?a:void 0}function cy(e,t){return e.map((n,o)=>e[(t+o)%e.length])}var dy=Rl,cc=Tl,uy=$l,fy=Vl,hy=Bl,dc=Hl,py=Xl,uc=Gl,fc=ql,my=Ql,gy=ec,hc=tc,pc=nc,mc=rc;Ur=dy,di=uy,go=S.forwardRef(({className:e,children:t,...n},o)=>h.jsxs(cc,{ref:o,className:Q("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...n,children:[t,h.jsx(fy,{asChild:!0,children:h.jsx(ce,{name:"chevron-down",className:"h-4 w-4 opacity-50"})})]})),go.displayName=cc.displayName;const gc=S.forwardRef(({className:e,...t},n)=>h.jsx(hc,{ref:n,className:Q("flex cursor-default items-center justify-center py-1",e),...t,children:h.jsx(ce,{name:"chevron-up",className:"h-4 w-4"})}));gc.displayName=hc.displayName;const yc=S.forwardRef(({className:e,...t},n)=>h.jsx(pc,{ref:n,className:Q("flex cursor-default items-center justify-center py-1",e),...t,children:h.jsx(ce,{name:"chevron-down",className:"h-4 w-4"})}));yc.displayName=pc.displayName,yo=S.forwardRef(({className:e,children:t,position:n="popper",...o},r)=>h.jsx(hy,{children:h.jsxs(dc,{ref:r,className:Q("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...o,children:[h.jsx(gc,{}),h.jsx(py,{className:Q("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),h.jsx(yc,{})]})})),yo.displayName=dc.displayName;const yy=S.forwardRef(({className:e,...t},n)=>h.jsx(uc,{ref:n,className:Q("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));yy.displayName=uc.displayName,xo=S.forwardRef(({className:e,children:t,...n},o)=>h.jsxs(fc,{ref:o,className:Q("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[h.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:h.jsx(gy,{children:h.jsx(ce,{name:"check",className:"h-4 w-4"})})}),h.jsx(my,{children:t})]})),xo.displayName=fc.displayName;const xy=S.forwardRef(({className:e,...t},n)=>h.jsx(mc,{ref:n,className:Q("-mx-1 my-1 h-px bg-muted",e),...t}));xy.displayName=mc.displayName;var ze="Accordion",vy=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[Pr,wy,by]=Yc(ze),[Jn,Lv]=Zr(ze,[by,td]),Mr=td(),xc=ge.forwardRef((e,t)=>{const{type:n,...o}=e,r=o,i=o;return h.jsx(Pr.Provider,{scope:e.__scopeAccordion,children:n==="multiple"?h.jsx(Ny,{...i,ref:t}):h.jsx(Ey,{...r,ref:t})})});xc.displayName=ze;var[vc,Sy]=Jn(ze),[wc,_y]=Jn(ze,{collapsible:!1}),Ey=ge.forwardRef((e,t)=>{const{value:n,defaultValue:o,onValueChange:r=()=>{},collapsible:i=!1,...a}=e,[s,l]=Qt({prop:n,defaultProp:o,onChange:r});return h.jsx(vc,{scope:e.__scopeAccordion,value:s?[s]:[],onItemOpen:l,onItemClose:ge.useCallback(()=>i&&l(""),[i,l]),children:h.jsx(wc,{scope:e.__scopeAccordion,collapsible:i,children:h.jsx(bc,{...a,ref:t})})})}),Ny=ge.forwardRef((e,t)=>{const{value:n,defaultValue:o,onValueChange:r=()=>{},...i}=e,[a=[],s]=Qt({prop:n,defaultProp:o,onChange:r}),l=ge.useCallback(d=>s((u=[])=>[...u,d]),[s]),c=ge.useCallback(d=>s((u=[])=>u.filter(f=>f!==d)),[s]);return h.jsx(vc,{scope:e.__scopeAccordion,value:a,onItemOpen:l,onItemClose:c,children:h.jsx(wc,{scope:e.__scopeAccordion,collapsible:!0,children:h.jsx(bc,{...i,ref:t})})})}),[Cy,eo]=Jn(ze),bc=ge.forwardRef((e,t)=>{const{__scopeAccordion:n,disabled:o,dir:r,orientation:i="vertical",...a}=e,s=ge.useRef(null),l=_e(s,t),c=wy(n),d=Xr(r)==="ltr",u=re(e.onKeyDown,f=>{var k;if(!vy.includes(f.key))return;const p=f.target,y=c().filter(A=>{var I;return!((I=A.ref.current)!=null&&I.disabled)}),g=y.findIndex(A=>A.ref.current===p),b=y.length;if(g===-1)return;f.preventDefault();let m=g;const w=0,x=b-1,v=()=>{m=g+1,m>x&&(m=w)},E=()=>{m=g-1,m<w&&(m=x)};switch(f.key){case"Home":m=w;break;case"End":m=x;break;case"ArrowRight":i==="horizontal"&&(d?v():E());break;case"ArrowDown":i==="vertical"&&v();break;case"ArrowLeft":i==="horizontal"&&(d?E():v());break;case"ArrowUp":i==="vertical"&&E();break}const O=m%b;(k=y[O].ref.current)==null||k.focus()});return h.jsx(Cy,{scope:n,disabled:o,direction:r,orientation:i,children:h.jsx(Pr.Slot,{scope:n,children:h.jsx(se.div,{...a,"data-orientation":i,ref:l,onKeyDown:o?void 0:u})})})}),to="AccordionItem",[ky,jr]=Jn(to),Sc=ge.forwardRef((e,t)=>{const{__scopeAccordion:n,value:o,...r}=e,i=eo(to,n),a=Sy(to,n),s=Mr(n),l=Jt(),c=o&&a.value.includes(o)||!1,d=i.disabled||e.disabled;return h.jsx(ky,{scope:n,open:c,disabled:d,triggerId:l,children:h.jsx(hv,{"data-orientation":i.orientation,"data-state":Pc(c),...s,...r,ref:t,disabled:d,open:c,onOpenChange:u=>{u?a.onItemOpen(o):a.onItemClose(o)}})})});Sc.displayName=to;var _c="AccordionHeader",Ec=ge.forwardRef((e,t)=>{const{__scopeAccordion:n,...o}=e,r=eo(ze,n),i=jr(_c,n);return h.jsx(se.h3,{"data-orientation":r.orientation,"data-state":Pc(i.open),"data-disabled":i.disabled?"":void 0,...o,ref:t})});Ec.displayName=_c;var Ar="AccordionTrigger",Nc=ge.forwardRef((e,t)=>{const{__scopeAccordion:n,...o}=e,r=eo(ze,n),i=jr(Ar,n),a=_y(Ar,n),s=Mr(n);return h.jsx(Pr.ItemSlot,{scope:n,children:h.jsx(pv,{"aria-disabled":i.open&&!a.collapsible||void 0,"data-orientation":r.orientation,id:i.triggerId,...s,...o,ref:t})})});Nc.displayName=Ar;var Cc="AccordionContent",kc=ge.forwardRef((e,t)=>{const{__scopeAccordion:n,...o}=e,r=eo(ze,n),i=jr(Cc,n),a=Mr(n);return h.jsx(mv,{role:"region","aria-labelledby":i.triggerId,"data-orientation":r.orientation,...a,...o,ref:t,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...e.style}})});kc.displayName=Cc;function Pc(e){return e?"open":"closed"}let Mc;ri=xc,ii=Sc,Mc=Ec,uo=Nc,fo=kc,ui=ri,wo=S.forwardRef(({className:e,...t},n)=>h.jsx(ii,{ref:n,className:Q("border-b",e),...t})),wo.displayName="AccordionItem",bo=S.forwardRef(({className:e,children:t,...n},o)=>h.jsx(Mc,{className:"flex",children:h.jsxs(uo,{ref:o,className:Q("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",e),...n,children:[t,h.jsx(ce,{name:"chevron-down",className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})})),bo.displayName=uo.displayName,So=S.forwardRef(({className:e,children:t,...n},o)=>h.jsx(fo,{ref:o,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...n,children:h.jsx("div",{className:Q("pb-4 pt-0",e),children:t})})),So.displayName=fo.displayName;let jc;jc=[1,2,3,4,5,6,7,8,9,10],ud=S.memo(e=>{const{t}=ke("flows"),[n,o]=S.useState(""),[r,i]=S.useState([]),[a,s]=S.useState("1"),{loading:l,onSimilaritySearch:c,onCreatePrompt:d,onCreateRetriever:u}=e,f=async()=>{i(await c(n,+a)),o("")},p=async y=>{y.key==="Enter"&&!y.shiftKey&&(y.preventDefault(),f())};return h.jsxs("div",{className:"mt-4 max-w-full",children:[h.jsx("div",{className:"bg-black/5 dark:bg-white/5 rounded-xl relative",children:h.jsxs("div",{className:"relative px-2 py-1 pb-2",children:[h.jsxs(Ur,{value:`${a}`,onValueChange:y=>s(y),children:[h.jsx(go,{className:"absolute left-0 !w-14 top-[2px] rounded-xl bg-transparent border-none focus:outline-none focus:ring-0 focus:border-opacity-0 focus:ring-transparent",children:h.jsx(di,{placeholder:t("vector_database_node.k_select_placeholder")})}),h.jsx(yo,{children:jc.map(y=>h.jsx(xo,{value:`${y}`,children:y},`${y}`))})]}),h.jsx(rd,{value:n,disabled:l,placeholder:t("vector_database_node.similarity_search_placeholder"),className:Q("w-full rounded-xl px-2 pl-11 border-none resize-none bg-transparent","min-h-8 max-h-8"),onKeyDown:p,onChange:y=>{o(y.target.value)}}),h.jsx("button",{type:"button",disabled:l,onClick:f,className:"absolute right-3 top-5 -translate-y-1/2 rounded-xl bg-black/5 dark:bg-white/5 p-1",children:h.jsx(ce,{name:l?"loader-circle":"arrow-right",className:Q("w-4 h-4 dark:text-white",n?"opacity-100":"opacity-30",l?"animate-spin":"")})})]})}),h.jsx(ui,{type:"single",collapsible:!0,children:r==null?void 0:r.map(([y,g],b)=>h.jsxs(wo,{value:`${b}`,children:[h.jsxs(bo,{children:[`[${g.toFixed(2)}] ${y.pageContent}`.substring(0,32),"..."]}),h.jsx(So,{children:y.pageContent})]},`${b}`))}),h.jsxs("div",{className:"w-full mt-4 flex flex-col gap-1",children:[u?h.jsx(io,{disabled:l,onClick:u,className:"w-full",children:t("vector_database_node.to_retriever")}):void 0,r!=null&&r.length&&d?h.jsx(io,{disabled:l,onClick:()=>d(r),className:"w-full",children:t("vector_database_node.create_prompt")}):void 0]})]})}),hd=S.memo(({loading:e,onCreateData:t})=>{const{t:n}=ke("flows"),[o,r]=S.useState(""),[i,a]=S.useState(""),s=async()=>{i&&(await t({id:o,content:i}),r(""),a(""))};return h.jsxs("div",{className:"min-w-80",children:[h.jsxs("div",{className:"flex flex-col space-y-1.5 mt-3",children:[h.jsx(Ze,{htmlFor:"name",children:n("vector_database_node.add_text.id")}),h.jsx(yt,{value:o,disabled:e,onChange:l=>r(l.target.value||""),placeholder:n("vector_database_node.add_text.id_placeholder"),className:"mb-4"}),h.jsxs(Ze,{htmlFor:"name",children:[n("vector_database_node.add_text.content")," ",h.jsx("span",{className:"text-red-600",children:"*"})]}),h.jsx(rd,{value:i,disabled:e,onChange:l=>a(l.target.value||""),placeholder:n("vector_database_node.add_text.content_placeholder")})]}),h.jsx("div",{className:"flex justify-between mt-6",children:h.jsx(nd,{loading:e,disabled:!(i!=null&&i.length),onClick:s,className:"w-full",children:n("vector_database_node.add_text.add")})})]})}),ei=({className:e,size:t=200,duration:n=15,anchor:o=90,borderWidth:r=1.5,colorFrom:i="#ffaa40",colorTo:a="#9c40ff",delay:s=0})=>h.jsx("div",{style:{"--size":t,"--duration":n,"--anchor":o,"--border-width":r,"--color-from":i,"--color-to":a,"--delay":`-${s}s`},className:Q("pointer-events-none absolute inset-0 rounded-[inherit] [border:calc(var(--border-width)*1px)_solid_transparent]","![mask-clip:padding-box,border-box] ![mask-composite:intersect] [mask:linear-gradient(transparent,transparent),linear-gradient(white,white)]","after:absolute after:aspect-square after:w-[calc(var(--size)*1px)] after:animate-border-beam after:[animation-delay:var(--delay)] after:[background:linear-gradient(to_left,var(--color-from),var(--color-to),transparent)] after:[offset-anchor:calc(var(--anchor)*1%)_50%] after:[offset-path:rect(0_auto_auto_0_round_calc(var(--size)*1px))]",e)});function Py({accept:e,maxSize:t}){const{t:n}=ke("atoms"),[o,r]=S.useState(""),[i,a]=S.useState(""),s=S.useRef(null),[l,c]=S.useState(0),d=f=>{var y;const p=(y=f.target.files)==null?void 0:y[0];u(p)},u=f=>{if(a(""),f){if(t&&f.size>t*1024*1024){a(n("file_upload_input.errors.max_size",{maxSize:t,fileSize:(f.size/1024/1024).toFixed(2)}));return}const p=e==null?void 0:e.split(",").map(y=>y.replace(".","").trim());if(e&&!f.type.match(e.replace("/*",""))&&!(p!=null&&p.some(y=>f.type.includes(y)))){a(n("file_upload_input.errors.accept",{accept:e}));return}return c(f.size),r(f.name),f}};return{fileName:o,error:i,fileInputRef:s,handleFileSelect:d,validateAndSetFile:u,clearFile:()=>{r(""),a(""),c(0),s.current&&(s.current.value="")},fileSize:l}}function My({file:e,setFile:t,loading:n,progress:o,fileOptions:r}){const{toast:i}=Fx(),{t:a}=ke("atoms"),[s,l]=S.useState(!1),{fileName:c,fileInputRef:d,clearFile:u,error:f,validateAndSetFile:p,fileSize:y}=Py({accept:(r==null?void 0:r.accept)||"image/*",maxSize:(r==null?void 0:r.maxSize)||3});S.useEffect(()=>{e||u()},[u,e]),S.useEffect(()=>{f&&i({title:f,variant:"destructive"})},[f,i]);function g(v){const E=p(v);E&&t(E)}function b(v){v.preventDefault(),l(!1);const E=v.dataTransfer.files[0];E&&g(E)}function m(v){var O;const E=(O=v.target.files)==null?void 0:O[0];E&&g(E)}function w(){u(),t(void 0)}const x=S.useMemo(()=>{if(!e)return h.jsx("div",{className:"w-16 h-16 rounded-lg bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center",children:h.jsx(ce,{name:"file-text",className:"w-8 h-8 text-zinc-400"})});const v=e.type.startsWith("image/");return h.jsx("div",{className:"relative w-16 h-16 rounded-lg overflow-hidden",children:v?h.jsx("img",{src:URL.createObjectURL(e),alt:"Preview",className:"w-full h-full object-cover"}):h.jsx(ce,{className:"w-14 h-14",name:"file-text"})})},[e]);return h.jsx(h.Fragment,{children:h.jsxs("div",{className:Q("relative group cursor-pointer","rounded-lg border-2 border-dashed","transition-colors duration-200",s?"border-indigo-500 bg-indigo-50/50 dark:bg-indigo-500/10":"border-zinc-200 dark:border-zinc-800"),onDragOver:v=>{v.preventDefault(),l(!0)},onDragLeave:()=>l(!1),onDrop:b,onClick:()=>{var v;return(v=d.current)==null?void 0:v.click()},onKeyDown:v=>{var E;(v.key==="Enter"||v.key===" ")&&(v.preventDefault(),(E=d.current)==null||E.click())},"aria-label":"Upload file",children:[h.jsx("input",{ref:d,type:"file",disabled:n||!!(o&&o<1),accept:(r==null?void 0:r.accept)||"image/*",onChange:m,className:"hidden"}),h.jsx("div",{className:"p-8 space-y-4",children:c?h.jsxs("div",{className:"flex items-center gap-4",children:[x,h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsxs("p",{className:"text-sm font-medium truncate",children:[c||"No file selected"," ",h.jsx("span",{className:"text-xs text-zinc-500 leading-5",children:y?`(${(y/1024/1024).toFixed(2)} MB)`:""})]}),o&&o<1?h.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[h.jsxs("p",{children:[(o*100).toFixed(2)," %"]}),h.jsx("div",{className:"h-1 flex-1 bg-zinc-100 dark:bg-zinc-800 rounded-full overflow-hidden items-center flex",children:h.jsx("div",{className:"h-full bg-indigo-500 transition-all duration-200",style:{width:`${o*100}%`}})})]}):void 0]}),h.jsx("button",{type:"button",disabled:n||!!(o&&o<1),onClick:v=>{v.stopPropagation(),w()},className:"p-1 hover:bg-zinc-100 dark:hover:bg-zinc-800 rounded",children:h.jsx(ce,{name:"x",className:"w-5 h-5 text-zinc-400"})}),o&&o<1?h.jsx(ei,{className:"rounded-lg"}):void 0]}):h.jsxs("div",{className:"flex flex-col items-center gap-2",children:[h.jsx(ce,{name:"upload",className:"w-8 h-8 text-zinc-400 dark:text-zinc-500"}),h.jsx("p",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:a("file_upload_input.drop_file")})]})})]})})}let Ac;Ac=Zc("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),ao=S.forwardRef(({className:e,variant:t,...n},o)=>h.jsx("div",{ref:o,role:"alert",className:Q(Ac({variant:t}),e),...n})),ao.displayName="Alert",Qr=S.forwardRef(({className:e,...t},n)=>h.jsx("h5",{ref:n,className:Q("mb-1 font-medium leading-none tracking-tight",e),...t})),Qr.displayName="AlertTitle",Jr=S.forwardRef(({className:e,...t},n)=>h.jsx("div",{ref:n,className:Q("text-sm [&_p]:leading-relaxed",e),...t})),Jr.displayName="AlertDescription",ad=function({onFileSubmit:e,fileOptions:t,progress:n,loading:o}){const{t:r}=ke("flows"),[i,a]=S.useState(),s=async()=>{i&&(await e(i),a(void 0))};return h.jsxs("div",{className:"w-full max-w-full space-y-2 mt-4",children:[h.jsxs("div",{className:"mb-6",children:[h.jsx(My,{progress:n,loading:o,fileOptions:t,setFile:a,file:i}),h.jsx(ao,{variant:"default",className:"mt-2 border-none max-w-96",children:r("vector_database_node.add_file.alert_file_size")})]}),h.jsx(nd,{loading:o,disabled:!i,onClick:s,className:"w-full mt-4",children:r("vector_database_node.add_file.index")})]})},_o=S.forwardRef(({className:e,...t},n)=>h.jsx("div",{className:"relative w-full overflow-auto",children:h.jsx("table",{ref:n,className:Q("w-full caption-bottom text-sm",e),...t})})),_o.displayName="Table",Eo=S.forwardRef(({className:e,...t},n)=>h.jsx("thead",{ref:n,className:Q("[&_tr]:border-b",e),...t})),Eo.displayName="TableHeader",lo=S.forwardRef(({className:e,...t},n)=>h.jsx("tbody",{ref:n,className:Q("[&_tr:last-child]:border-0",e),...t})),lo.displayName="TableBody";const jy=S.forwardRef(({className:e,...t},n)=>h.jsx("tfoot",{ref:n,className:Q("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));jy.displayName="TableFooter",ln=S.forwardRef(({className:e,...t},n)=>h.jsx("tr",{ref:n,className:Q("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t})),ln.displayName="TableRow",en=S.forwardRef(({className:e,...t},n)=>h.jsx("th",{ref:n,className:Q("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t})),en.displayName="TableHead",tn=S.forwardRef(({className:e,...t},n)=>h.jsx("td",{ref:n,className:Q("align-middle [&:has([role=checkbox])]:pr-0",e),...t})),tn.displayName="TableCell";const Ay=S.forwardRef(({className:e,...t},n)=>h.jsx("caption",{ref:n,className:Q("mt-4 text-sm text-muted-foreground",e),...t}));Ay.displayName="TableCaption";const Oc=({className:e,...t})=>h.jsx("nav",{role:"navigation","aria-label":"pagination",className:Q("mx-auto flex w-full justify-center",e),...t});Oc.displayName="Pagination";const Ic=S.forwardRef(({className:e,...t},n)=>h.jsx("ul",{ref:n,className:Q("flex flex-row items-center gap-1",e),...t}));Ic.displayName="PaginationContent";const mt=S.forwardRef(({className:e,...t},n)=>h.jsx("li",{ref:n,className:Q("",e),...t}));mt.displayName="PaginationItem";const no=({className:e,isActive:t,size:n="icon",...o})=>h.jsx("a",{"aria-current":t?"page":void 0,className:Q(gv({variant:t?"outline":"ghost",size:n}),e),...o});no.displayName="PaginationLink";const zc=({className:e,...t})=>{const{t:n}=ke("atoms");return h.jsxs(no,{"aria-label":"Go to previous page",size:"default",className:Q("gap-1 pl-2.5",e),...t,children:[h.jsx(ce,{name:"chevron-left",className:"h-4 w-4"}),h.jsx("span",{children:n("pagination.previous")})]})};zc.displayName="PaginationPrevious";const Rc=({className:e,...t})=>{const{t:n}=ke("atoms");return h.jsxs(no,{"aria-label":"Go to next page",size:"default",className:Q("gap-1 pr-2.5",e),...t,children:[h.jsx("span",{children:n("pagination.next")}),h.jsx(ce,{name:"chevron-right",className:"h-4 w-4"})]})};Rc.displayName="PaginationNext";const Or=({className:e,...t})=>{const{t:n}=ke("atoms");return h.jsxs("span",{"aria-hidden":!0,className:Q("flex h-9 w-9 items-center justify-center",e),...t,children:[h.jsx(ce,{name:"ellipsis",className:"h-4 w-4"}),h.jsx("span",{className:"sr-only",children:n("pagination.more_pages")})]})};Or.displayName="PaginationEllipsis",Kr=Zx(({title:e,content:t})=>{const n=Xc();return h.jsx(yv,{open:n.visible,onOpenChange:n.hide,children:h.jsxs(xv,{className:"sm:max-w-2xl",children:[h.jsx(vv,{children:h.jsxs("div",{className:"flex",children:[h.jsx(ce,{name:"file",className:"mr-2 h-4 w-4"}),h.jsx(wv,{children:e})]})}),h.jsx("div",{className:"mx-auto w-full min-h-96 max-h-96 overflow-hidden",children:h.jsx("div",{className:"relative w-full h-full overflow-hidden rounded-xl p-1 border border-border",children:h.jsx("pre",{className:"break-all h-full overflow-y-auto bg-background font-mono text-xs w-full",children:t})})})]})})}),id=S.memo(e=>{const{data:t,headers:n,limitLengthByColumns:o,showPerPage:r=7,paginationShowLimit:i=1,contentLengthLimit:a=64}=e,[s,l]=S.useState({page:1,maxPage:1}),c=Xc(Kr);S.useEffect(()=>{l(p=>({...p,maxPage:Math.ceil(t.length/r)}))},[t.length,r]);const d=S.useMemo(()=>t.slice((s.page-1)*r,s.page*r),[t,s.page,r]),u=S.useMemo(()=>{let p=!1,y=!1;return h.jsx(Oc,{className:"mt-4 mb-4 ml-4 mr-4 w-full",children:h.jsxs(Ic,{children:[s.page>1?h.jsx(mt,{onClick:()=>l(g=>({...g,page:g.page-1})),children:h.jsx(zc,{})}):null,Array.from({length:s.maxPage},(g,b)=>{const m=b+1,w=b===0||b===s.maxPage-1;return!w&&m>s.page+i&&y?null:!w&&m>s.page+i?(y=!0,h.jsx(mt,{children:h.jsx(Or,{})},b)):!w&&m<s.page-i&&p?null:!w&&m<s.page-i?(p=!0,h.jsx(mt,{children:h.jsx(Or,{})},b)):h.jsx(mt,{onClick:()=>l(x=>({...x,page:m})),children:h.jsx(no,{isActive:b+1===s.page,children:b+1})},b)}),s.page<s.maxPage?h.jsx(mt,{onClick:()=>l(g=>({...g,page:g.page+1})),children:h.jsx(Rc,{})}):null]})})},[s.maxPage,s.page,i]),f=(p,y)=>{if(!p)return;const g=Array.isArray(p)?p:n.map(b=>p[b]);return h.jsxs(ln,{children:[h.jsx(tn,{children:h.jsx("div",{className:"font-bold",children:y+1})}),g.map((b,m)=>{const w=typeof b=="string"?b:JSON.stringify(b),x=n[m],v=(o==null?void 0:o[x])||a,E=w.length>v;return h.jsx(tn,{className:"p-4",children:h.jsxs("div",{onClick:E?()=>c.show({title:x,content:w}):void 0,className:"flex gap-4",children:[E?`${w.substring(0,v)}...`:w,E?h.jsx(ce,{className:"w-6 mt-[-2px]",name:"chevron-right"}):null]})},`${m}`)})]},`${y}`)};return h.jsxs(h.Fragment,{children:[h.jsxs(_o,{className:"w-full",children:[h.jsx(Eo,{children:h.jsxs(ln,{children:[h.jsx(en,{},"index"),n?n.map(p=>h.jsx(en,{children:h.jsx("div",{className:"font-bold",children:p})},p)):void 0]})}),h.jsx(lo,{children:d!=null&&d.length?d==null?void 0:d.map(f):void 0})]}),u]})});var Ir,Dc;function Oy(){if(Dc)return Ir;Dc=1;var e=qx(),t=1/0,n=17976931348623157e292;function o(r){if(!r)return r===0?r:0;if(r=e(r),r===t||r===-t){var i=r<0?-1:1;return i*n}return r===r?r:0}return Ir=o,Ir}var zr,Tc;function Iy(){if(Tc)return zr;Tc=1;var e=Oy();function t(n){var o=e(n),r=o%1;return o===o?r?o-r:o:0}return zr=t,zr}var Rr,Lc;function zy(){if(Lc)return Rr;Lc=1;var e=Jx(),t=Qx(),n=Iy(),o=Math.ceil,r=Math.max;function i(a,s,l){(l?t(a,s,l):s===void 0)?s=1:s=r(n(s),0);var c=a==null?0:a.length;if(!c||s<1)return[];for(var d=0,u=0,f=Array(o(c/s));d<c;)f[u++]=e(a,d,d+=s);return f}return Rr=i,Rr}var Ry=zy();_d=ro(Ry)});export{Kr as $,ao as A,ye as B,so as C,id as D,en as E,Wr as F,lo as G,tn as H,ad as I,nn as J,xt as K,sd as L,ld as M,U as N,cd as O,Je as P,dd as Q,Gr as R,Ur as S,qr as T,Qr as U,ud as V,fd as W,Jr as X,ei as Y,on as Z,rn as _,Rv as __tla,hd as a,ti as a0,pd as a1,vt as a2,md as a3,an as a4,ee as a5,ne as a6,gd as a7,yd as a8,sn as a9,Ye as aa,xd as ab,Xe as ac,vd as ad,De as ae,wd as af,bd as ag,ni as ah,oi as ai,et as aj,co as ak,ri as al,ii as am,uo as an,fo as ao,Sd as b,_d as c,ai as d,si as e,li as f,Ed as g,ci as h,Nd as i,Cd as j,ho as k,po as l,mo as m,go as n,di as o,yo as p,xo as q,vo as r,ui as s,wo as t,kd as u,bo as v,So as w,_o as x,Eo as y,ln as z};
