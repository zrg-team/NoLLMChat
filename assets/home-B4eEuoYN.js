const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-CBYutmqk.js","assets/index-MaNq3QqB.js","assets/index-Bl9vXK3g.css","assets/routes-CwCOSXYp.js","assets/few_shot-62GkyvOi.js","assets/index-BIM_J2Pi.js","assets/objectWithoutPropertiesLoose-BjXSgPXB.js","assets/index-I6R04L4x.js","assets/index-Ux8lesU9.css","assets/pdf-CoC6wDJA.js","assets/pdf.min-CHOqrGFM.js","assets/pdf.worker.min-BPhR4ho3.js","assets/PlateEditor-CZ2XSjt3.js","assets/chevron-down-CZ8-w7id.js","assets/createLucideIcon-CKEnfeL7.js","assets/chevron-right-C1UuH9B4.js","assets/check-C9nBHEBz.js","assets/ellipsis-Da4lGBaY.js","assets/keyboard-JjvGMz8A.js","assets/superscript-D9m6JIIk.js","assets/subscript-D7BwhfL5.js","assets/align-left-BCggxzSX.js","assets/align-center-BVMKPszT.js","assets/align-right-Cc5qR0xC.js","assets/align-justify-cf386P5i.js","assets/plus-Dm33owqm.js","assets/eraser-C_aEJrq3.js","assets/star-Bu9yHD_p.js","assets/flag-BsZ4eFcH.js","assets/apple-CDtQ5dys.js","assets/clock-CE3ti75V.js","assets/leaf-DW5O2HRM.js","assets/lightbulb-BSvxbGxr.js","assets/smile-6LAoVO1z.js","assets/compass-CxJjfmYl.js","assets/music-Dlipq23s.js","assets/x-CtgXcOXr.js","assets/search-CdCVQMTd.js","assets/external-link-BIkLOHo1.js","assets/redo-2-sIMhVyng.js","assets/undo-2-CFU-Q1ue.js","assets/list-BS5I-vdS.js","assets/list-ordered-BufQc0rI.js","assets/list-todo-CmH2EK_P.js","assets/indent-increase-CiIGEIHx.js","assets/pilcrow-DpUNxd98.js","assets/heading-1-D9uDzRYK.js","assets/heading-2-DEJ-zGna.js","assets/heading-3-CrV0PHMo.js","assets/table-BjAxbYrK.js","assets/file-code-BynLMvst.js","assets/quote-K7D17haT.js","assets/minus-Bjpob_GV.js","assets/square-RQVrGAsT.js","assets/image-BdCuwt0_.js","assets/table-of-contents-C7kwRKTP.js","assets/columns-3-aoJ0bhbY.js","assets/link-2-CnQpesoC.js","assets/calendar-CZwN5ext.js","assets/wrap-text-DVffvZlB.js","assets/link-B30gSwRw.js","assets/pen-Bd6CKvQf.js","assets/eye-DmpqT8Ny.js","assets/indent-decrease-U9qpQakZ.js","assets/trash-CZ0cBwgX.js","assets/rectangle-vertical-Bdi9UjT4.js","assets/rectangle-horizontal-CEDDeEA_.js","assets/list-collapse-DWu8W3bF.js","assets/pointer-DokoLJvO.js","assets/wand-sparkles-DHfPyvEc.js","assets/bold-Bi4RwtFg.js","assets/italic-CFEfcgCx.js","assets/underline-B4_kYjI5.js","assets/strikethrough-CLxZwx8B.js","assets/code-xml-Dl4mFOK_.js","assets/baseline-BTcyojBs.js","assets/paint-bucket-ebKC6hoU.js","assets/highlighter-lCNQjYZ2.js","assets/arrow-up-to-line-DSfYuRQp.js","assets/circle-BOf4pYEW.js","assets/text-BkQdCLnP.js","assets/unlink-CCVS27Pc.js","assets/arrow-left-B4F3LsVZ.js","assets/arrow-right-7qk5DlGZ.js","assets/download-CgEXk3xm.js","assets/chevrons-up-down-DkptywCK.js","assets/trash-2-XMSfCr-L.js","assets/chevron-left-DEtL-WJs.js","assets/sparkles-1N_Z2kuu.js","assets/combine-ClHGv5Pr.js","assets/ungroup-D-4WlrvL.js","assets/grip-vertical-85WMDOt0.js","assets/pen-line-BpmB2Uss.js","assets/badge-help-S9cYMOYE.js","assets/wand-BheR7n60.js","assets/list-end-C2aw9_6x.js","assets/list-plus-7LLfGbmC.js","assets/list-minus-CLpqFuYp.js","assets/feather-B-d5_L6J.js","assets/album-D6wpCKD7.js","assets/corner-up-left-2nF6Ll8s.js","assets/loader-circle-CgXeRFcQ.js","assets/PlateEditor-D7XtzYg9.css","assets/CodeEditor-daEqyNJz.js","assets/folder-open-BppkB1X_.js","assets/folder-W6Sb4DcP.js","assets/file-BOBT7mk3.js","assets/ContainerTernimal-CsOG8as1.js"])))=>i.map(i=>d[i]);
var Lde=Object.defineProperty;var Bde=(G,nt,Ln)=>nt in G?Lde(G,nt,{enumerable:!0,configurable:!0,writable:!0,value:Ln}):G[nt]=Ln;var qe=(G,nt,Ln)=>Bde(G,typeof nt!="symbol"?nt+"":nt,Ln);import{r as v,j as h,B as Ne,C as $,y as Ag,c as aa,b as kn,P as ke,f as Tt,d as Me,g as re,L as ge,E as sa,F as $de,G as Fde,H as Mk,I as Ck,J as zde,x as ue,q as It,K as Tg,M as Pk,N as Vde,O as Nk,e as Sd,S as kk,D as Ak,l as Tk,u as Wr,m as Ik,V as Ude,i as qde,h as Md,p as je,w as on,Q as An,_ as an,T as Hde,U as ca,W as Wde,X as Xde,Y as Qde,Z as Dk,$ as Rk,s as Lk,a0 as Yde,a1 as Cd,a2 as Gde,a3 as Ig,a4 as Bk,a5 as Kde,a6 as Pd,a7 as Dg,t as Rg,v as To,a8 as Le,a9 as Zde,aa as $k,ab as Lg,ac as Nd,__tla as Jde}from"./index-MaNq3QqB.js";import{M as Bg,u as kd,P as epe,a as $g,L as tpe,m as npe,c as rpe,f as Fk,i as ope,b as Fg,d as zk,e as ipe,g as ape,h as spe,j as la,k as sc,R as zg,I as Vg,A as cpe,C as lpe,G as upe,l as dpe,n as ppe,o as fpe,p as hpe,q as mpe,r as ype,S as gpe,s as vpe,t as bpe,v as xpe,w as Dt,x as wpe,y as _pe,z as Ad,B as Ug,D as Vk,E as Uk,F as qk,H as Hk,J as Wk,K as Xk,N as Qk,O as jpe,Q as Ope,T as Epe,U as Spe,V as vt,W as $e,X as Yk,Y as Mpe,Z as Cpe,_ as Ppe,$ as Npe,a0 as Tn,a1 as Td,a2 as qg,a3 as Hg,a4 as Wg,a5 as Xg,a6 as kpe,a7 as Ape,a8 as Tpe,a9 as Gk,aa as Kk,ab as Zk,ac as Ipe,__tla as Dpe}from"./routes-CwCOSXYp.js";let Qg,Yg,Id,Gg,Kg,ua,da,Xr,cc,lc,Dd,Zg,Jg,Io,ev,Jk,tv,Rd,eA,nv,rv,ov,tA,Ld,Bd,iv,nA,av,$d,Fd,zd,sv,rA,uc,oA,Vd,cv,Ud,lv,uv,qd,Hd,dv,Zn,In,Jn,Dn,Rt,pv,fv,hv,Do,Qr,iA,mv,gn,Wd,yv,gv,Xd,Ro,vn,Qd,pa,Yd,vv,Rn,bv,Gd,Kd,Zd,xv,wv,Ct,fa,Jd,ha,_v,Lo,Rpe=Promise.all([(()=>{try{return Jde}catch{}})(),(()=>{try{return Dpe}catch{}})()]).then(async()=>{var G=(e=>(e.Toolbox="TOOLBOX",e.LLM="LLM",e.NewMessage="NEW_MESSAGE",e.Thread="THREAD",e.Message="MESSAGE",e.Prompt="PROMPT",e.SessionInfo="SESSION_INFO",e.Schema="SCHEMA",e.ToolDefinition="TOOL_DEFINITION",e.ToolHandler="TOOL_HANDLER",e.FewShotExample="FEW_SHOT_EXAMPLE",e.CSVData="CSV_DATA",e.DefaultEmbeddingModel="DEFAULT_EMBEDDING_MODEL",e.VectorDatabase="VECTOR_DATABASE",e.JSONLData="JSONL_DATA",e.ApplicationBar="APPLICATION_BAR",e.Shape="SHAPE",e.CircleShape="CIRCLE_SHAPE",e.TriangleShape="TRIANGLE_SHAPE",e.EditorApp="EDITOR_APP",e.PlaceHolder="PLACEHOLDER",e.CodeContainerApp="CODE_CONTAINER_APP",e))(G||{}),nt=(e=>(e.Started="started",e.Downloading="downloading",e.Downloaded="downloaded",e.Loading="loading",e.Loaded="loaded",e))(nt||{}),Ln=(e=>(e.LLM="LLM",e.embedding="embedding",e.VLM="VLM",e))(Ln||{}),dc=(e=>(e.WebLLM="WebLLM",e.OpenAI="OpenAI",e))(dc||{}),er=(e=>(e.Started="started",e.Inprogress="inprogress",e.Success="success",e.Failed="failed",e))(er||{}),Qt=(e=>(e.Human="human",e.User="user",e.AI="ai",e.System="system",e.Assistant="assistant",e.Tool="tool",e.FewShotExample="few_shot_example",e))(Qt||{}),pc=(e=>(e.Started="started",e.Inprogress="inprogress",e.Done="done",e))(pc||{}),Yt=(e=>(e.Chat="chat",e.FewShotExample="few_shot_example",e))(Yt||{}),ma=(e=>(e.VECTOR_DATABASE_RETREIVER="VECTOR_DATABASE_RETREIVER",e))(ma||{});class aA extends v.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function sA({children:e,isPresent:t}){const n=v.useId(),r=v.useRef(null),o=v.useRef({width:0,height:0,top:0,left:0}),{nonce:i}=v.useContext(Bg);return v.useInsertionEffect(()=>{const{width:a,height:s,top:c,left:l}=o.current;if(t||!r.current||!a||!s)return;r.current.dataset.motionPopId=n;const u=document.createElement("style");return i&&(u.nonce=i),document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${a}px !important;
            height: ${s}px !important;
            top: ${c}px !important;
            left: ${l}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[t]),h.jsx(aA,{isPresent:t,childRef:r,sizeRef:o,children:v.cloneElement(e,{ref:r})})}const cA=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:o,presenceAffectsLayout:i,mode:a})=>{const s=kd(lA),c=v.useId(),l=v.useCallback(d=>{s.set(d,!0);for(const p of s.values())if(!p)return;r&&r()},[s,r]),u=v.useMemo(()=>({id:c,initial:t,isPresent:n,custom:o,onExitComplete:l,register:d=>(s.set(d,!1),()=>s.delete(d))}),i?[Math.random(),l]:[n,l]);return v.useMemo(()=>{s.forEach((d,p)=>s.set(p,!1))},[n]),v.useEffect(()=>{!n&&!s.size&&r&&r()},[n]),a==="popLayout"&&(e=h.jsx(sA,{isPresent:n,children:e})),h.jsx(epe.Provider,{value:u,children:e})};function lA(){return new Map}const fc=e=>e.key||"";function jv(e){const t=[];return v.Children.forEach(e,n=>{v.isValidElement(n)&&t.push(n)}),t}const uA=({children:e,exitBeforeEnter:t,custom:n,initial:r=!0,onExitComplete:o,presenceAffectsLayout:i=!0,mode:a="sync"})=>{const s=v.useMemo(()=>jv(e),[e]),c=s.map(fc),l=v.useRef(!0),u=v.useRef(s),d=kd(()=>new Map),[p,f]=v.useState(s),[y,m]=v.useState(s);$g(()=>{l.current=!1,u.current=s;for(let w=0;w<y.length;w++){const _=fc(y[w]);c.includes(_)?d.delete(_):d.get(_)!==!0&&d.set(_,!1)}},[y,c.length,c.join("-")]);const g=[];if(s!==p){let w=[...s];for(let _=0;_<y.length;_++){const x=y[_],j=fc(x);c.includes(j)||(w.splice(_,0,x),g.push(x))}a==="wait"&&g.length&&(w=g),m(jv(w)),f(s);return}const{forceRender:b}=v.useContext(tpe);return h.jsx(h.Fragment,{children:y.map(w=>{const _=fc(w),x=s===y||c.includes(_),j=()=>{if(d.has(_))d.set(_,!0);else return;let O=!0;d.forEach(E=>{E||(O=!1)}),O&&(b==null||b(),m(u.current),o&&o())};return h.jsx(cA,{isPresent:x,initial:!l.current||r?void 0:!1,custom:x?void 0:n,presenceAffectsLayout:i,mode:a,onExitComplete:x?void 0:j,children:w},_)})})};function ep(e){const t=kd(()=>npe(e)),{isStatic:n}=v.useContext(Bg);if(n){const[,r]=v.useState(e);v.useEffect(()=>t.on("change",r),[])}return t}function Ov(e,t){const n=ep(t()),r=()=>n.set(t());return r(),$g(()=>{const o=()=>Fk.preRender(r,!1,!0),i=e.map(a=>a.on("change",o));return()=>{i.forEach(a=>a()),rpe(r)}}),n}const dA=e=>e&&typeof e=="object"&&e.mix,pA=e=>dA(e)?e.mix:void 0;function fA(...e){const t=!Array.isArray(e[0]),n=t?0:-1,r=e[0+n],o=e[1+n],i=e[2+n],a=e[3+n],s=ope(o,i,{mixer:pA(i[0]),...a});return t?s(r):s}function hA(e){Fg.current=[],e();const t=Ov(Fg.current,e);return Fg.current=void 0,t}function Ev(e,t,n,r){if(typeof e=="function")return hA(e);const o=typeof t=="function"?t:fA(t,n,r);return Array.isArray(e)?Sv(e,o):Sv([e],([i])=>o(i))}function Sv(e,t){const n=kd(()=>[]);return Ov(e,()=>{n.length=0;const r=e.length;for(let o=0;o<r;o++)n[o]=e[o].get();return t(n)})}function Mv(e){return typeof e=="number"?e:parseFloat(e)}function mA(e,t={}){const{isStatic:n}=v.useContext(Bg),r=v.useRef(null),o=ep(zk(e)?Mv(e.get()):e),i=v.useRef(o.get()),a=v.useRef(()=>{}),s=()=>{const l=r.current;l&&l.time===0&&l.sample(ipe.delta),c(),r.current=ape({keyframes:[o.get(),i.current],velocity:o.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...t,onUpdate:a.current})},c=()=>{r.current&&r.current.stop()};return v.useInsertionEffect(()=>o.attach((l,u)=>n?u(l):(i.current=l,a.current=u,Fk.update(s),o.get()),c),[JSON.stringify(t)]),$g(()=>{if(zk(e))return e.on("change",l=>o.set(Mv(l)))},[o]),o}function ot(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=ot(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var yA={value:()=>{}};function hc(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new mc(n)}function mc(e){this._=e}function gA(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",o=n.indexOf(".");if(o>=0&&(r=n.slice(o+1),n=n.slice(0,o)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}mc.prototype=hc.prototype={constructor:mc,on:function(e,t){var n=this._,r=gA(e+"",n),o,i=-1,a=r.length;if(arguments.length<2){for(;++i<a;)if((o=(e=r[i]).type)&&(o=vA(n[o],e.name)))return o;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++i<a;)if(o=(e=r[i]).type)n[o]=Cv(n[o],e.name,t);else if(t==null)for(o in n)n[o]=Cv(n[o],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new mc(e)},call:function(e,t){if((o=arguments.length-2)>0)for(var n=new Array(o),r=0,o,i;r<o;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=this._[e],r=0,o=i.length;r<o;++r)i[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],o=0,i=r.length;o<i;++o)r[o].value.apply(t,n)}};function vA(e,t){for(var n=0,r=e.length,o;n<r;++n)if((o=e[n]).name===t)return o.value}function Cv(e,t,n){for(var r=0,o=e.length;r<o;++r)if(e[r].name===t){e[r]=yA,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var tp="http://www.w3.org/1999/xhtml";const Pv={svg:"http://www.w3.org/2000/svg",xhtml:tp,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function yc(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Pv.hasOwnProperty(t)?{space:Pv[t],local:e}:e}function bA(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===tp&&t.documentElement.namespaceURI===tp?t.createElement(e):t.createElementNS(n,e)}}function xA(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Nv(e){var t=yc(e);return(t.local?xA:bA)(t)}function wA(){}function np(e){return e==null?wA:function(){return this.querySelector(e)}}function _A(e){typeof e!="function"&&(e=np(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i=t[o],a=i.length,s=r[o]=new Array(a),c,l,u=0;u<a;++u)(c=i[u])&&(l=e.call(c,c.__data__,u,i))&&("__data__"in c&&(l.__data__=c.__data__),s[u]=l);return new Gt(r,this._parents)}function jA(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function OA(){return[]}function kv(e){return e==null?OA:function(){return this.querySelectorAll(e)}}function EA(e){return function(){return jA(e.apply(this,arguments))}}function SA(e){typeof e=="function"?e=EA(e):e=kv(e);for(var t=this._groups,n=t.length,r=[],o=[],i=0;i<n;++i)for(var a=t[i],s=a.length,c,l=0;l<s;++l)(c=a[l])&&(r.push(e.call(c,c.__data__,l,a)),o.push(c));return new Gt(r,o)}function Av(e){return function(){return this.matches(e)}}function Tv(e){return function(t){return t.matches(e)}}var MA=Array.prototype.find;function CA(e){return function(){return MA.call(this.children,e)}}function PA(){return this.firstElementChild}function NA(e){return this.select(e==null?PA:CA(typeof e=="function"?e:Tv(e)))}var kA=Array.prototype.filter;function AA(){return Array.from(this.children)}function TA(e){return function(){return kA.call(this.children,e)}}function IA(e){return this.selectAll(e==null?AA:TA(typeof e=="function"?e:Tv(e)))}function DA(e){typeof e!="function"&&(e=Av(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i=t[o],a=i.length,s=r[o]=[],c,l=0;l<a;++l)(c=i[l])&&e.call(c,c.__data__,l,i)&&s.push(c);return new Gt(r,this._parents)}function Iv(e){return new Array(e.length)}function RA(){return new Gt(this._enter||this._groups.map(Iv),this._parents)}function gc(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}gc.prototype={constructor:gc,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function LA(e){return function(){return e}}function BA(e,t,n,r,o,i){for(var a=0,s,c=t.length,l=i.length;a<l;++a)(s=t[a])?(s.__data__=i[a],r[a]=s):n[a]=new gc(e,i[a]);for(;a<c;++a)(s=t[a])&&(o[a]=s)}function $A(e,t,n,r,o,i,a){var s,c,l=new Map,u=t.length,d=i.length,p=new Array(u),f;for(s=0;s<u;++s)(c=t[s])&&(p[s]=f=a.call(c,c.__data__,s,t)+"",l.has(f)?o[s]=c:l.set(f,c));for(s=0;s<d;++s)f=a.call(e,i[s],s,i)+"",(c=l.get(f))?(r[s]=c,c.__data__=i[s],l.delete(f)):n[s]=new gc(e,i[s]);for(s=0;s<u;++s)(c=t[s])&&l.get(p[s])===c&&(o[s]=c)}function FA(e){return e.__data__}function zA(e,t){if(!arguments.length)return Array.from(this,FA);var n=t?$A:BA,r=this._parents,o=this._groups;typeof e!="function"&&(e=LA(e));for(var i=o.length,a=new Array(i),s=new Array(i),c=new Array(i),l=0;l<i;++l){var u=r[l],d=o[l],p=d.length,f=VA(e.call(u,u&&u.__data__,l,r)),y=f.length,m=s[l]=new Array(y),g=a[l]=new Array(y),b=c[l]=new Array(p);n(u,d,m,g,b,f,t);for(var w=0,_=0,x,j;w<y;++w)if(x=m[w]){for(w>=_&&(_=w+1);!(j=g[_])&&++_<y;);x._next=j||null}}return a=new Gt(a,r),a._enter=s,a._exit=c,a}function VA(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function UA(){return new Gt(this._exit||this._groups.map(Iv),this._parents)}function qA(e,t,n){var r=this.enter(),o=this,i=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(o=t(o),o&&(o=o.selection())),n==null?i.remove():n(i),r&&o?r.merge(o).order():o}function HA(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,o=n.length,i=r.length,a=Math.min(o,i),s=new Array(o),c=0;c<a;++c)for(var l=n[c],u=r[c],d=l.length,p=s[c]=new Array(d),f,y=0;y<d;++y)(f=l[y]||u[y])&&(p[y]=f);for(;c<o;++c)s[c]=n[c];return new Gt(s,this._parents)}function WA(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],o=r.length-1,i=r[o],a;--o>=0;)(a=r[o])&&(i&&a.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(a,i),i=a);return this}function XA(e){e||(e=QA);function t(d,p){return d&&p?e(d.__data__,p.__data__):!d-!p}for(var n=this._groups,r=n.length,o=new Array(r),i=0;i<r;++i){for(var a=n[i],s=a.length,c=o[i]=new Array(s),l,u=0;u<s;++u)(l=a[u])&&(c[u]=l);c.sort(t)}return new Gt(o,this._parents).order()}function QA(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function YA(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function GA(){return Array.from(this)}function KA(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,i=r.length;o<i;++o){var a=r[o];if(a)return a}return null}function ZA(){let e=0;for(const t of this)++e;return e}function JA(){return!this.node()}function eT(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var o=t[n],i=0,a=o.length,s;i<a;++i)(s=o[i])&&e.call(s,s.__data__,i,o);return this}function tT(e){return function(){this.removeAttribute(e)}}function nT(e){return function(){this.removeAttributeNS(e.space,e.local)}}function rT(e,t){return function(){this.setAttribute(e,t)}}function oT(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function iT(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function aT(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function sT(e,t){var n=yc(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?nT:tT:typeof t=="function"?n.local?aT:iT:n.local?oT:rT)(n,t))}function Dv(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function cT(e){return function(){this.style.removeProperty(e)}}function lT(e,t,n){return function(){this.style.setProperty(e,t,n)}}function uT(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function dT(e,t,n){return arguments.length>1?this.each((t==null?cT:typeof t=="function"?uT:lT)(e,t,n??"")):Bo(this.node(),e)}function Bo(e,t){return e.style.getPropertyValue(t)||Dv(e).getComputedStyle(e,null).getPropertyValue(t)}function pT(e){return function(){delete this[e]}}function fT(e,t){return function(){this[e]=t}}function hT(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function mT(e,t){return arguments.length>1?this.each((t==null?pT:typeof t=="function"?hT:fT)(e,t)):this.node()[e]}function Rv(e){return e.trim().split(/^|\s+/)}function rp(e){return e.classList||new Lv(e)}function Lv(e){this._node=e,this._names=Rv(e.getAttribute("class")||"")}Lv.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Bv(e,t){for(var n=rp(e),r=-1,o=t.length;++r<o;)n.add(t[r])}function $v(e,t){for(var n=rp(e),r=-1,o=t.length;++r<o;)n.remove(t[r])}function yT(e){return function(){Bv(this,e)}}function gT(e){return function(){$v(this,e)}}function vT(e,t){return function(){(t.apply(this,arguments)?Bv:$v)(this,e)}}function bT(e,t){var n=Rv(e+"");if(arguments.length<2){for(var r=rp(this.node()),o=-1,i=n.length;++o<i;)if(!r.contains(n[o]))return!1;return!0}return this.each((typeof t=="function"?vT:t?yT:gT)(n,t))}function xT(){this.textContent=""}function wT(e){return function(){this.textContent=e}}function _T(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function jT(e){return arguments.length?this.each(e==null?xT:(typeof e=="function"?_T:wT)(e)):this.node().textContent}function OT(){this.innerHTML=""}function ET(e){return function(){this.innerHTML=e}}function ST(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function MT(e){return arguments.length?this.each(e==null?OT:(typeof e=="function"?ST:ET)(e)):this.node().innerHTML}function CT(){this.nextSibling&&this.parentNode.appendChild(this)}function PT(){return this.each(CT)}function NT(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function kT(){return this.each(NT)}function AT(e){var t=typeof e=="function"?e:Nv(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function TT(){return null}function IT(e,t){var n=typeof e=="function"?e:Nv(e),r=t==null?TT:typeof t=="function"?t:np(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function DT(){var e=this.parentNode;e&&e.removeChild(this)}function RT(){return this.each(DT)}function LT(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function BT(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function $T(e){return this.select(e?BT:LT)}function FT(e){return arguments.length?this.property("__data__",e):this.node().__data__}function zT(e){return function(t){e.call(this,t,this.__data__)}}function VT(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function UT(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,o=t.length,i;n<o;++n)i=t[n],(!e.type||i.type===e.type)&&i.name===e.name?this.removeEventListener(i.type,i.listener,i.options):t[++r]=i;++r?t.length=r:delete this.__on}}}function qT(e,t,n){return function(){var r=this.__on,o,i=zT(t);if(r){for(var a=0,s=r.length;a<s;++a)if((o=r[a]).type===e.type&&o.name===e.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=i,o.options=n),o.value=t;return}}this.addEventListener(e.type,i,n),o={type:e.type,name:e.name,value:t,listener:i,options:n},r?r.push(o):this.__on=[o]}}function HT(e,t,n){var r=VT(e+""),o,i=r.length,a;if(arguments.length<2){var s=this.node().__on;if(s){for(var c=0,l=s.length,u;c<l;++c)for(o=0,u=s[c];o<i;++o)if((a=r[o]).type===u.type&&a.name===u.name)return u.value}return}for(s=t?qT:UT,o=0;o<i;++o)this.each(s(r[o],t,n));return this}function Fv(e,t,n){var r=Dv(e),o=r.CustomEvent;typeof o=="function"?o=new o(t,n):(o=r.document.createEvent("Event"),n?(o.initEvent(t,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}function WT(e,t){return function(){return Fv(this,e,t)}}function XT(e,t){return function(){return Fv(this,e,t.apply(this,arguments))}}function QT(e,t){return this.each((typeof t=="function"?XT:WT)(e,t))}function*YT(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,i=r.length,a;o<i;++o)(a=r[o])&&(yield a)}var zv=[null];function Gt(e,t){this._groups=e,this._parents=t}function ya(){return new Gt([[document.documentElement]],zv)}function GT(){return this}Gt.prototype=ya.prototype={constructor:Gt,select:_A,selectAll:SA,selectChild:NA,selectChildren:IA,filter:DA,data:zA,enter:RA,exit:UA,join:qA,merge:HA,selection:GT,order:WA,sort:XA,call:YA,nodes:GA,node:KA,size:ZA,empty:JA,each:eT,attr:sT,style:dT,property:mT,classed:bT,text:jT,html:MT,raise:PT,lower:kT,append:AT,insert:IT,remove:RT,clone:$T,datum:FT,on:HT,dispatch:QT,[Symbol.iterator]:YT};function Kt(e){return typeof e=="string"?new Gt([[document.querySelector(e)]],[document.documentElement]):new Gt([[e]],zv)}function KT(e){let t;for(;t=e.sourceEvent;)e=t;return e}function bn(e,t){if(e=KT(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}}return[e.pageX,e.pageY]}const ZT={passive:!1},ga={capture:!0,passive:!1};function op(e){e.stopImmediatePropagation()}function $o(e){e.preventDefault(),e.stopImmediatePropagation()}function Vv(e){var t=e.document.documentElement,n=Kt(e).on("dragstart.drag",$o,ga);"onselectstart"in t?n.on("selectstart.drag",$o,ga):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Uv(e,t){var n=e.document.documentElement,r=Kt(e).on("dragstart.drag",null);t&&(r.on("click.drag",$o,ga),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const vc=e=>()=>e;function ip(e,{sourceEvent:t,subject:n,target:r,identifier:o,active:i,x:a,y:s,dx:c,dy:l,dispatch:u}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:i,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:l,enumerable:!0,configurable:!0},_:{value:u}})}ip.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function JT(e){return!e.ctrlKey&&!e.button}function e3(){return this.parentNode}function t3(e,t){return t??{x:e.x,y:e.y}}function n3(){return navigator.maxTouchPoints||"ontouchstart"in this}function qv(){var e=JT,t=e3,n=t3,r=n3,o={},i=hc("start","drag","end"),a=0,s,c,l,u,d=0;function p(x){x.on("mousedown.drag",f).filter(r).on("touchstart.drag",g).on("touchmove.drag",b,ZT).on("touchend.drag touchcancel.drag",w).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function f(x,j){if(!(u||!e.call(this,x,j))){var O=_(this,t.call(this,x,j),x,j,"mouse");O&&(Kt(x.view).on("mousemove.drag",y,ga).on("mouseup.drag",m,ga),Vv(x.view),op(x),l=!1,s=x.clientX,c=x.clientY,O("start",x))}}function y(x){if($o(x),!l){var j=x.clientX-s,O=x.clientY-c;l=j*j+O*O>d}o.mouse("drag",x)}function m(x){Kt(x.view).on("mousemove.drag mouseup.drag",null),Uv(x.view,l),$o(x),o.mouse("end",x)}function g(x,j){if(e.call(this,x,j)){var O=x.changedTouches,E=t.call(this,x,j),M=O.length,N,A;for(N=0;N<M;++N)(A=_(this,E,x,j,O[N].identifier,O[N]))&&(op(x),A("start",x,O[N]))}}function b(x){var j=x.changedTouches,O=j.length,E,M;for(E=0;E<O;++E)(M=o[j[E].identifier])&&($o(x),M("drag",x,j[E]))}function w(x){var j=x.changedTouches,O=j.length,E,M;for(u&&clearTimeout(u),u=setTimeout(function(){u=null},500),E=0;E<O;++E)(M=o[j[E].identifier])&&(op(x),M("end",x,j[E]))}function _(x,j,O,E,M,N){var A=i.copy(),P=bn(N||O,j),T,L,S;if((S=n.call(x,new ip("beforestart",{sourceEvent:O,target:p,identifier:M,active:a,x:P[0],y:P[1],dx:0,dy:0,dispatch:A}),E))!=null)return T=S.x-P[0]||0,L=S.y-P[1]||0,function C(k,D,R){var B=P,F;switch(k){case"start":o[M]=C,F=a++;break;case"end":delete o[M],--a;case"drag":P=bn(R||D,j),F=a;break}A.call(k,x,new ip(k,{sourceEvent:D,subject:S,target:p,identifier:M,active:F,x:P[0]+T,y:P[1]+L,dx:P[0]-B[0],dy:P[1]-B[1],dispatch:A}),E)}}return p.filter=function(x){return arguments.length?(e=typeof x=="function"?x:vc(!!x),p):e},p.container=function(x){return arguments.length?(t=typeof x=="function"?x:vc(x),p):t},p.subject=function(x){return arguments.length?(n=typeof x=="function"?x:vc(x),p):n},p.touchable=function(x){return arguments.length?(r=typeof x=="function"?x:vc(!!x),p):r},p.on=function(){var x=i.on.apply(i,arguments);return x===i?p:x},p.clickDistance=function(x){return arguments.length?(d=(x=+x)*x,p):Math.sqrt(d)},p}function ap(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Hv(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function va(){}var ba=.7,bc=1/ba,Fo="\\s*([+-]?\\d+)\\s*",xa="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Bn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",r3=/^#([0-9a-f]{3,8})$/,o3=new RegExp(`^rgb\\(${Fo},${Fo},${Fo}\\)$`),i3=new RegExp(`^rgb\\(${Bn},${Bn},${Bn}\\)$`),a3=new RegExp(`^rgba\\(${Fo},${Fo},${Fo},${xa}\\)$`),s3=new RegExp(`^rgba\\(${Bn},${Bn},${Bn},${xa}\\)$`),c3=new RegExp(`^hsl\\(${xa},${Bn},${Bn}\\)$`),l3=new RegExp(`^hsla\\(${xa},${Bn},${Bn},${xa}\\)$`),Wv={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ap(va,Yr,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Xv,formatHex:Xv,formatHex8:u3,formatHsl:d3,formatRgb:Qv,toString:Qv});function Xv(){return this.rgb().formatHex()}function u3(){return this.rgb().formatHex8()}function d3(){return Jv(this).formatHsl()}function Qv(){return this.rgb().formatRgb()}function Yr(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=r3.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Yv(t):n===3?new Lt(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?xc(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?xc(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=o3.exec(e))?new Lt(t[1],t[2],t[3],1):(t=i3.exec(e))?new Lt(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=a3.exec(e))?xc(t[1],t[2],t[3],t[4]):(t=s3.exec(e))?xc(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=c3.exec(e))?Zv(t[1],t[2]/100,t[3]/100,1):(t=l3.exec(e))?Zv(t[1],t[2]/100,t[3]/100,t[4]):Wv.hasOwnProperty(e)?Yv(Wv[e]):e==="transparent"?new Lt(NaN,NaN,NaN,0):null}function Yv(e){return new Lt(e>>16&255,e>>8&255,e&255,1)}function xc(e,t,n,r){return r<=0&&(e=t=n=NaN),new Lt(e,t,n,r)}function p3(e){return e instanceof va||(e=Yr(e)),e?(e=e.rgb(),new Lt(e.r,e.g,e.b,e.opacity)):new Lt}function sp(e,t,n,r){return arguments.length===1?p3(e):new Lt(e,t,n,r??1)}function Lt(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}ap(Lt,sp,Hv(va,{brighter(e){return e=e==null?bc:Math.pow(bc,e),new Lt(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?ba:Math.pow(ba,e),new Lt(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Lt(Gr(this.r),Gr(this.g),Gr(this.b),wc(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Gv,formatHex:Gv,formatHex8:f3,formatRgb:Kv,toString:Kv}));function Gv(){return`#${Kr(this.r)}${Kr(this.g)}${Kr(this.b)}`}function f3(){return`#${Kr(this.r)}${Kr(this.g)}${Kr(this.b)}${Kr((isNaN(this.opacity)?1:this.opacity)*255)}`}function Kv(){const e=wc(this.opacity);return`${e===1?"rgb(":"rgba("}${Gr(this.r)}, ${Gr(this.g)}, ${Gr(this.b)}${e===1?")":`, ${e})`}`}function wc(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Gr(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Kr(e){return e=Gr(e),(e<16?"0":"")+e.toString(16)}function Zv(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new xn(e,t,n,r)}function Jv(e){if(e instanceof xn)return new xn(e.h,e.s,e.l,e.opacity);if(e instanceof va||(e=Yr(e)),!e)return new xn;if(e instanceof xn)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,o=Math.min(t,n,r),i=Math.max(t,n,r),a=NaN,s=i-o,c=(i+o)/2;return s?(t===i?a=(n-r)/s+(n<r)*6:n===i?a=(r-t)/s+2:a=(t-n)/s+4,s/=c<.5?i+o:2-i-o,a*=60):s=c>0&&c<1?0:a,new xn(a,s,c,e.opacity)}function h3(e,t,n,r){return arguments.length===1?Jv(e):new xn(e,t,n,r??1)}function xn(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}ap(xn,h3,Hv(va,{brighter(e){return e=e==null?bc:Math.pow(bc,e),new xn(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?ba:Math.pow(ba,e),new xn(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,o=2*n-r;return new Lt(cp(e>=240?e-240:e+120,o,r),cp(e,o,r),cp(e<120?e+240:e-120,o,r),this.opacity)},clamp(){return new xn(e0(this.h),_c(this.s),_c(this.l),wc(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=wc(this.opacity);return`${e===1?"hsl(":"hsla("}${e0(this.h)}, ${_c(this.s)*100}%, ${_c(this.l)*100}%${e===1?")":`, ${e})`}`}}));function e0(e){return e=(e||0)%360,e<0?e+360:e}function _c(e){return Math.max(0,Math.min(1,e||0))}function cp(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const lp=e=>()=>e;function m3(e,t){return function(n){return e+n*t}}function y3(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function g3(e){return(e=+e)==1?t0:function(t,n){return n-t?y3(t,n,e):lp(isNaN(t)?n:t)}}function t0(e,t){var n=t-e;return n?m3(e,n):lp(isNaN(e)?t:e)}const jc=function e(t){var n=g3(t);function r(o,i){var a=n((o=sp(o)).r,(i=sp(i)).r),s=n(o.g,i.g),c=n(o.b,i.b),l=t0(o.opacity,i.opacity);return function(u){return o.r=a(u),o.g=s(u),o.b=c(u),o.opacity=l(u),o+""}}return r.gamma=e,r}(1);function v3(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),o;return function(i){for(o=0;o<n;++o)r[o]=e[o]*(1-i)+t[o]*i;return r}}function b3(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function x3(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,o=new Array(r),i=new Array(n),a;for(a=0;a<r;++a)o[a]=zo(e[a],t[a]);for(;a<n;++a)i[a]=t[a];return function(s){for(a=0;a<r;++a)i[a]=o[a](s);return i}}function w3(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function wn(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function _3(e,t){var n={},r={},o;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(o in t)o in e?n[o]=zo(e[o],t[o]):r[o]=t[o];return function(i){for(o in n)r[o]=n[o](i);return r}}var up=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,dp=new RegExp(up.source,"g");function j3(e){return function(){return e}}function O3(e){return function(t){return e(t)+""}}function n0(e,t){var n=up.lastIndex=dp.lastIndex=0,r,o,i,a=-1,s=[],c=[];for(e=e+"",t=t+"";(r=up.exec(e))&&(o=dp.exec(t));)(i=o.index)>n&&(i=t.slice(n,i),s[a]?s[a]+=i:s[++a]=i),(r=r[0])===(o=o[0])?s[a]?s[a]+=o:s[++a]=o:(s[++a]=null,c.push({i:a,x:wn(r,o)})),n=dp.lastIndex;return n<t.length&&(i=t.slice(n),s[a]?s[a]+=i:s[++a]=i),s.length<2?c[0]?O3(c[0].x):j3(t):(t=c.length,function(l){for(var u=0,d;u<t;++u)s[(d=c[u]).i]=d.x(l);return s.join("")})}function zo(e,t){var n=typeof t,r;return t==null||n==="boolean"?lp(t):(n==="number"?wn:n==="string"?(r=Yr(t))?(t=r,jc):n0:t instanceof Yr?jc:t instanceof Date?w3:b3(t)?v3:Array.isArray(t)?x3:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?_3:wn)(e,t)}function pp(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var r0=180/Math.PI,o0={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function i0(e,t,n,r,o,i){var a,s,c;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(c=e*n+t*r)&&(n-=e*c,r-=t*c),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,c/=s),e*r<t*n&&(e=-e,t=-t,c=-c,a=-a),{translateX:o,translateY:i,rotate:Math.atan2(t,e)*r0,skewX:Math.atan(c)*r0,scaleX:a,scaleY:s}}var Oc;function E3(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?o0:i0(t.a,t.b,t.c,t.d,t.e,t.f)}function S3(e){return e==null||(Oc||(Oc=document.createElementNS("http://www.w3.org/2000/svg","g")),Oc.setAttribute("transform",e),!(e=Oc.transform.baseVal.consolidate()))?o0:(e=e.matrix,i0(e.a,e.b,e.c,e.d,e.e,e.f))}function a0(e,t,n,r){function o(l){return l.length?l.pop()+" ":""}function i(l,u,d,p,f,y){if(l!==d||u!==p){var m=f.push("translate(",null,t,null,n);y.push({i:m-4,x:wn(l,d)},{i:m-2,x:wn(u,p)})}else(d||p)&&f.push("translate("+d+t+p+n)}function a(l,u,d,p){l!==u?(l-u>180?u+=360:u-l>180&&(l+=360),p.push({i:d.push(o(d)+"rotate(",null,r)-2,x:wn(l,u)})):u&&d.push(o(d)+"rotate("+u+r)}function s(l,u,d,p){l!==u?p.push({i:d.push(o(d)+"skewX(",null,r)-2,x:wn(l,u)}):u&&d.push(o(d)+"skewX("+u+r)}function c(l,u,d,p,f,y){if(l!==d||u!==p){var m=f.push(o(f)+"scale(",null,",",null,")");y.push({i:m-4,x:wn(l,d)},{i:m-2,x:wn(u,p)})}else(d!==1||p!==1)&&f.push(o(f)+"scale("+d+","+p+")")}return function(l,u){var d=[],p=[];return l=e(l),u=e(u),i(l.translateX,l.translateY,u.translateX,u.translateY,d,p),a(l.rotate,u.rotate,d,p),s(l.skewX,u.skewX,d,p),c(l.scaleX,l.scaleY,u.scaleX,u.scaleY,d,p),l=u=null,function(f){for(var y=-1,m=p.length,g;++y<m;)d[(g=p[y]).i]=g.x(f);return d.join("")}}}var M3=a0(E3,"px, ","px)","deg)"),C3=a0(S3,", ",")",")"),P3=1e-12;function s0(e){return((e=Math.exp(e))+1/e)/2}function N3(e){return((e=Math.exp(e))-1/e)/2}function k3(e){return((e=Math.exp(2*e))-1)/(e+1)}const A3=function e(t,n,r){function o(i,a){var s=i[0],c=i[1],l=i[2],u=a[0],d=a[1],p=a[2],f=u-s,y=d-c,m=f*f+y*y,g,b;if(m<P3)b=Math.log(p/l)/t,g=function(E){return[s+E*f,c+E*y,l*Math.exp(t*E*b)]};else{var w=Math.sqrt(m),_=(p*p-l*l+r*m)/(2*l*n*w),x=(p*p-l*l-r*m)/(2*p*n*w),j=Math.log(Math.sqrt(_*_+1)-_),O=Math.log(Math.sqrt(x*x+1)-x);b=(O-j)/t,g=function(E){var M=E*b,N=s0(j),A=l/(n*w)*(N*k3(t*M+j)-N3(j));return[s+A*f,c+A*y,l*N/s0(t*M+j)]}}return g.duration=b*1e3*t/Math.SQRT2,g}return o.rho=function(i){var a=Math.max(.001,+i),s=a*a,c=s*s;return e(a,s,c)},o}(Math.SQRT2,2,4);function T3(e,t){t===void 0&&(t=e,e=zo);for(var n=0,r=t.length-1,o=t[0],i=new Array(r<0?0:r);n<r;)i[n]=e(o,o=t[++n]);return function(a){var s=Math.max(0,Math.min(r-1,Math.floor(a*=r)));return i[s](a-s)}}var Vo=0,wa=0,_a=0,c0=1e3,Ec,ja,Sc=0,Zr=0,Mc=0,Oa=typeof performance=="object"&&performance.now?performance:Date,l0=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function fp(){return Zr||(l0(I3),Zr=Oa.now()+Mc)}function I3(){Zr=0}function Cc(){this._call=this._time=this._next=null}Cc.prototype=u0.prototype={constructor:Cc,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?fp():+n)+(t==null?0:+t),!this._next&&ja!==this&&(ja?ja._next=this:Ec=this,ja=this),this._call=e,this._time=n,hp()},stop:function(){this._call&&(this._call=null,this._time=1/0,hp())}};function u0(e,t,n){var r=new Cc;return r.restart(e,t,n),r}function D3(){fp(),++Vo;for(var e=Ec,t;e;)(t=Zr-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Vo}function d0(){Zr=(Sc=Oa.now())+Mc,Vo=wa=0;try{D3()}finally{Vo=0,L3(),Zr=0}}function R3(){var e=Oa.now(),t=e-Sc;t>c0&&(Mc-=t,Sc=e)}function L3(){for(var e,t=Ec,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Ec=n);ja=e,hp(r)}function hp(e){if(!Vo){wa&&(wa=clearTimeout(wa));var t=e-Zr;t>24?(e<1/0&&(wa=setTimeout(d0,e-Oa.now()-Mc)),_a&&(_a=clearInterval(_a))):(_a||(Sc=Oa.now(),_a=setInterval(R3,c0)),Vo=1,l0(d0))}}function p0(e,t,n){var r=new Cc;return t=t==null?0:+t,r.restart(o=>{r.stop(),e(o+t)},t,n),r}var B3=hc("start","end","cancel","interrupt"),$3=[],f0=0,h0=1,mp=2,Pc=3,m0=4,yp=5,Nc=6;function kc(e,t,n,r,o,i){var a=e.__transition;if(!a)e.__transition={};else if(n in a)return;F3(e,n,{name:t,index:r,group:o,on:B3,tween:$3,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:f0})}function gp(e,t){var n=_n(e,t);if(n.state>f0)throw new Error("too late; already scheduled");return n}function $n(e,t){var n=_n(e,t);if(n.state>Pc)throw new Error("too late; already running");return n}function _n(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function F3(e,t,n){var r=e.__transition,o;r[t]=n,n.timer=u0(i,0,n.time);function i(l){n.state=h0,n.timer.restart(a,n.delay,n.time),n.delay<=l&&a(l-n.delay)}function a(l){var u,d,p,f;if(n.state!==h0)return c();for(u in r)if(f=r[u],f.name===n.name){if(f.state===Pc)return p0(a);f.state===m0?(f.state=Nc,f.timer.stop(),f.on.call("interrupt",e,e.__data__,f.index,f.group),delete r[u]):+u<t&&(f.state=Nc,f.timer.stop(),f.on.call("cancel",e,e.__data__,f.index,f.group),delete r[u])}if(p0(function(){n.state===Pc&&(n.state=m0,n.timer.restart(s,n.delay,n.time),s(l))}),n.state=mp,n.on.call("start",e,e.__data__,n.index,n.group),n.state===mp){for(n.state=Pc,o=new Array(p=n.tween.length),u=0,d=-1;u<p;++u)(f=n.tween[u].value.call(e,e.__data__,n.index,n.group))&&(o[++d]=f);o.length=d+1}}function s(l){for(var u=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(c),n.state=yp,1),d=-1,p=o.length;++d<p;)o[d].call(e,u);n.state===yp&&(n.on.call("end",e,e.__data__,n.index,n.group),c())}function c(){n.state=Nc,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function Ac(e,t){var n=e.__transition,r,o,i=!0,a;if(n){t=t==null?null:t+"";for(a in n){if((r=n[a]).name!==t){i=!1;continue}o=r.state>mp&&r.state<yp,r.state=Nc,r.timer.stop(),r.on.call(o?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[a]}i&&delete e.__transition}}function z3(e){return this.each(function(){Ac(this,e)})}function V3(e,t){var n,r;return function(){var o=$n(this,e),i=o.tween;if(i!==n){r=n=i;for(var a=0,s=r.length;a<s;++a)if(r[a].name===t){r=r.slice(),r.splice(a,1);break}}o.tween=r}}function U3(e,t,n){var r,o;if(typeof n!="function")throw new Error;return function(){var i=$n(this,e),a=i.tween;if(a!==r){o=(r=a).slice();for(var s={name:t,value:n},c=0,l=o.length;c<l;++c)if(o[c].name===t){o[c]=s;break}c===l&&o.push(s)}i.tween=o}}function q3(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=_n(this.node(),n).tween,o=0,i=r.length,a;o<i;++o)if((a=r[o]).name===e)return a.value;return null}return this.each((t==null?V3:U3)(n,e,t))}function vp(e,t,n){var r=e._id;return e.each(function(){var o=$n(this,r);(o.value||(o.value={}))[t]=n.apply(this,arguments)}),function(o){return _n(o,r).value[t]}}function y0(e,t){var n;return(typeof t=="number"?wn:t instanceof Yr?jc:(n=Yr(t))?(t=n,jc):n0)(e,t)}function H3(e){return function(){this.removeAttribute(e)}}function W3(e){return function(){this.removeAttributeNS(e.space,e.local)}}function X3(e,t,n){var r,o=n+"",i;return function(){var a=this.getAttribute(e);return a===o?null:a===r?i:i=t(r=a,n)}}function Q3(e,t,n){var r,o=n+"",i;return function(){var a=this.getAttributeNS(e.space,e.local);return a===o?null:a===r?i:i=t(r=a,n)}}function Y3(e,t,n){var r,o,i;return function(){var a,s=n(this),c;return s==null?void this.removeAttribute(e):(a=this.getAttribute(e),c=s+"",a===c?null:a===r&&c===o?i:(o=c,i=t(r=a,s)))}}function G3(e,t,n){var r,o,i;return function(){var a,s=n(this),c;return s==null?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local),c=s+"",a===c?null:a===r&&c===o?i:(o=c,i=t(r=a,s)))}}function K3(e,t){var n=yc(e),r=n==="transform"?C3:y0;return this.attrTween(e,typeof t=="function"?(n.local?G3:Y3)(n,r,vp(this,"attr."+e,t)):t==null?(n.local?W3:H3)(n):(n.local?Q3:X3)(n,r,t))}function Z3(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function J3(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function eI(e,t){var n,r;function o(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&J3(e,i)),n}return o._value=t,o}function tI(e,t){var n,r;function o(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&Z3(e,i)),n}return o._value=t,o}function nI(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=yc(e);return this.tween(n,(r.local?eI:tI)(r,t))}function rI(e,t){return function(){gp(this,e).delay=+t.apply(this,arguments)}}function oI(e,t){return t=+t,function(){gp(this,e).delay=t}}function iI(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?rI:oI)(t,e)):_n(this.node(),t).delay}function aI(e,t){return function(){$n(this,e).duration=+t.apply(this,arguments)}}function sI(e,t){return t=+t,function(){$n(this,e).duration=t}}function cI(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?aI:sI)(t,e)):_n(this.node(),t).duration}function lI(e,t){if(typeof t!="function")throw new Error;return function(){$n(this,e).ease=t}}function uI(e){var t=this._id;return arguments.length?this.each(lI(t,e)):_n(this.node(),t).ease}function dI(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;$n(this,e).ease=n}}function pI(e){if(typeof e!="function")throw new Error;return this.each(dI(this._id,e))}function fI(e){typeof e!="function"&&(e=Av(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i=t[o],a=i.length,s=r[o]=[],c,l=0;l<a;++l)(c=i[l])&&e.call(c,c.__data__,l,i)&&s.push(c);return new tr(r,this._parents,this._name,this._id)}function hI(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,o=n.length,i=Math.min(r,o),a=new Array(r),s=0;s<i;++s)for(var c=t[s],l=n[s],u=c.length,d=a[s]=new Array(u),p,f=0;f<u;++f)(p=c[f]||l[f])&&(d[f]=p);for(;s<r;++s)a[s]=t[s];return new tr(a,this._parents,this._name,this._id)}function mI(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function yI(e,t,n){var r,o,i=mI(t)?gp:$n;return function(){var a=i(this,e),s=a.on;s!==r&&(o=(r=s).copy()).on(t,n),a.on=o}}function gI(e,t){var n=this._id;return arguments.length<2?_n(this.node(),n).on.on(e):this.each(yI(n,e,t))}function vI(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function bI(){return this.on("end.remove",vI(this._id))}function xI(e){var t=this._name,n=this._id;typeof e!="function"&&(e=np(e));for(var r=this._groups,o=r.length,i=new Array(o),a=0;a<o;++a)for(var s=r[a],c=s.length,l=i[a]=new Array(c),u,d,p=0;p<c;++p)(u=s[p])&&(d=e.call(u,u.__data__,p,s))&&("__data__"in u&&(d.__data__=u.__data__),l[p]=d,kc(l[p],t,n,p,l,_n(u,n)));return new tr(i,this._parents,t,n)}function wI(e){var t=this._name,n=this._id;typeof e!="function"&&(e=kv(e));for(var r=this._groups,o=r.length,i=[],a=[],s=0;s<o;++s)for(var c=r[s],l=c.length,u,d=0;d<l;++d)if(u=c[d]){for(var p=e.call(u,u.__data__,d,c),f,y=_n(u,n),m=0,g=p.length;m<g;++m)(f=p[m])&&kc(f,t,n,m,p,y);i.push(p),a.push(u)}return new tr(i,a,t,n)}var _I=ya.prototype.constructor;function jI(){return new _I(this._groups,this._parents)}function OI(e,t){var n,r,o;return function(){var i=Bo(this,e),a=(this.style.removeProperty(e),Bo(this,e));return i===a?null:i===n&&a===r?o:o=t(n=i,r=a)}}function g0(e){return function(){this.style.removeProperty(e)}}function EI(e,t,n){var r,o=n+"",i;return function(){var a=Bo(this,e);return a===o?null:a===r?i:i=t(r=a,n)}}function SI(e,t,n){var r,o,i;return function(){var a=Bo(this,e),s=n(this),c=s+"";return s==null&&(c=s=(this.style.removeProperty(e),Bo(this,e))),a===c?null:a===r&&c===o?i:(o=c,i=t(r=a,s))}}function MI(e,t){var n,r,o,i="style."+t,a="end."+i,s;return function(){var c=$n(this,e),l=c.on,u=c.value[i]==null?s||(s=g0(t)):void 0;(l!==n||o!==u)&&(r=(n=l).copy()).on(a,o=u),c.on=r}}function CI(e,t,n){var r=(e+="")=="transform"?M3:y0;return t==null?this.styleTween(e,OI(e,r)).on("end.style."+e,g0(e)):typeof t=="function"?this.styleTween(e,SI(e,r,vp(this,"style."+e,t))).each(MI(this._id,e)):this.styleTween(e,EI(e,r,t),n).on("end.style."+e,null)}function PI(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function NI(e,t,n){var r,o;function i(){var a=t.apply(this,arguments);return a!==o&&(r=(o=a)&&PI(e,a,n)),r}return i._value=t,i}function kI(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,NI(e,t,n??""))}function AI(e){return function(){this.textContent=e}}function TI(e){return function(){var t=e(this);this.textContent=t??""}}function II(e){return this.tween("text",typeof e=="function"?TI(vp(this,"text",e)):AI(e==null?"":e+""))}function DI(e){return function(t){this.textContent=e.call(this,t)}}function RI(e){var t,n;function r(){var o=e.apply(this,arguments);return o!==n&&(t=(n=o)&&DI(o)),t}return r._value=e,r}function LI(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,RI(e))}function BI(){for(var e=this._name,t=this._id,n=v0(),r=this._groups,o=r.length,i=0;i<o;++i)for(var a=r[i],s=a.length,c,l=0;l<s;++l)if(c=a[l]){var u=_n(c,t);kc(c,e,n,l,a,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new tr(r,this._parents,e,n)}function $I(){var e,t,n=this,r=n._id,o=n.size();return new Promise(function(i,a){var s={value:a},c={value:function(){--o===0&&i()}};n.each(function(){var l=$n(this,r),u=l.on;u!==e&&(t=(e=u).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(c)),l.on=t}),o===0&&i()})}var FI=0;function tr(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function v0(){return++FI}var nr=ya.prototype;tr.prototype={constructor:tr,select:xI,selectAll:wI,selectChild:nr.selectChild,selectChildren:nr.selectChildren,filter:fI,merge:hI,selection:jI,transition:BI,call:nr.call,nodes:nr.nodes,node:nr.node,size:nr.size,empty:nr.empty,each:nr.each,on:gI,attr:K3,attrTween:nI,style:CI,styleTween:kI,text:II,textTween:LI,remove:bI,tween:q3,delay:iI,duration:cI,ease:uI,easeVarying:pI,end:$I,[Symbol.iterator]:nr[Symbol.iterator]};function zI(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var VI={time:null,delay:0,duration:250,ease:zI};function UI(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function qI(e){var t,n;e instanceof tr?(t=e._id,e=e._name):(t=v0(),(n=VI).time=fp(),e=e==null?null:e+"");for(var r=this._groups,o=r.length,i=0;i<o;++i)for(var a=r[i],s=a.length,c,l=0;l<s;++l)(c=a[l])&&kc(c,e,t,l,a,n||UI(c,t));return new tr(r,this._parents,e,t)}ya.prototype.interrupt=z3,ya.prototype.transition=qI;const Tc=e=>()=>e;function HI(e,{sourceEvent:t,target:n,transform:r,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:o}})}function rr(e,t,n){this.k=e,this.x=t,this.y=n}rr.prototype={constructor:rr,scale:function(e){return e===1?this:new rr(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new rr(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Ic=new rr(1,0,0);b0.prototype=rr.prototype;function b0(e){for(;!e.__zoom;)if(!(e=e.parentNode))return Ic;return e.__zoom}function bp(e){e.stopImmediatePropagation()}function Ea(e){e.preventDefault(),e.stopImmediatePropagation()}function WI(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function XI(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function x0(){return this.__zoom||Ic}function QI(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function YI(){return navigator.maxTouchPoints||"ontouchstart"in this}function GI(e,t,n){var r=e.invertX(t[0][0])-n[0][0],o=e.invertX(t[1][0])-n[1][0],i=e.invertY(t[0][1])-n[0][1],a=e.invertY(t[1][1])-n[1][1];return e.translate(o>r?(r+o)/2:Math.min(0,r)||Math.max(0,o),a>i?(i+a)/2:Math.min(0,i)||Math.max(0,a))}function w0(){var e=WI,t=XI,n=GI,r=QI,o=YI,i=[0,1/0],a=[[-1/0,-1/0],[1/0,1/0]],s=250,c=A3,l=hc("start","zoom","end"),u,d,p,f=500,y=150,m=0,g=10;function b(S){S.property("__zoom",x0).on("wheel.zoom",M,{passive:!1}).on("mousedown.zoom",N).on("dblclick.zoom",A).filter(o).on("touchstart.zoom",P).on("touchmove.zoom",T).on("touchend.zoom touchcancel.zoom",L).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}b.transform=function(S,C,k,D){var R=S.selection?S.selection():S;R.property("__zoom",x0),S!==R?j(S,C,k,D):R.interrupt().each(function(){O(this,arguments).event(D).start().zoom(null,typeof C=="function"?C.apply(this,arguments):C).end()})},b.scaleBy=function(S,C,k,D){b.scaleTo(S,function(){var R=this.__zoom.k,B=typeof C=="function"?C.apply(this,arguments):C;return R*B},k,D)},b.scaleTo=function(S,C,k,D){b.transform(S,function(){var R=t.apply(this,arguments),B=this.__zoom,F=k==null?x(R):typeof k=="function"?k.apply(this,arguments):k,V=B.invert(F),I=typeof C=="function"?C.apply(this,arguments):C;return n(_(w(B,I),F,V),R,a)},k,D)},b.translateBy=function(S,C,k,D){b.transform(S,function(){return n(this.__zoom.translate(typeof C=="function"?C.apply(this,arguments):C,typeof k=="function"?k.apply(this,arguments):k),t.apply(this,arguments),a)},null,D)},b.translateTo=function(S,C,k,D,R){b.transform(S,function(){var B=t.apply(this,arguments),F=this.__zoom,V=D==null?x(B):typeof D=="function"?D.apply(this,arguments):D;return n(Ic.translate(V[0],V[1]).scale(F.k).translate(typeof C=="function"?-C.apply(this,arguments):-C,typeof k=="function"?-k.apply(this,arguments):-k),B,a)},D,R)};function w(S,C){return C=Math.max(i[0],Math.min(i[1],C)),C===S.k?S:new rr(C,S.x,S.y)}function _(S,C,k){var D=C[0]-k[0]*S.k,R=C[1]-k[1]*S.k;return D===S.x&&R===S.y?S:new rr(S.k,D,R)}function x(S){return[(+S[0][0]+ +S[1][0])/2,(+S[0][1]+ +S[1][1])/2]}function j(S,C,k,D){S.on("start.zoom",function(){O(this,arguments).event(D).start()}).on("interrupt.zoom end.zoom",function(){O(this,arguments).event(D).end()}).tween("zoom",function(){var R=this,B=arguments,F=O(R,B).event(D),V=t.apply(R,B),I=k==null?x(V):typeof k=="function"?k.apply(R,B):k,X=Math.max(V[1][0]-V[0][0],V[1][1]-V[0][1]),H=R.__zoom,q=typeof C=="function"?C.apply(R,B):C,te=c(H.invert(I).concat(X/H.k),q.invert(I).concat(X/q.k));return function(Q){if(Q===1)Q=q;else{var Z=te(Q),Y=X/Z[2];Q=new rr(Y,I[0]-Z[0]*Y,I[1]-Z[1]*Y)}F.zoom(null,Q)}})}function O(S,C,k){return!k&&S.__zooming||new E(S,C)}function E(S,C){this.that=S,this.args=C,this.active=0,this.sourceEvent=null,this.extent=t.apply(S,C),this.taps=0}E.prototype={event:function(S){return S&&(this.sourceEvent=S),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(S,C){return this.mouse&&S!=="mouse"&&(this.mouse[1]=C.invert(this.mouse[0])),this.touch0&&S!=="touch"&&(this.touch0[1]=C.invert(this.touch0[0])),this.touch1&&S!=="touch"&&(this.touch1[1]=C.invert(this.touch1[0])),this.that.__zoom=C,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(S){var C=Kt(this.that).datum();l.call(S,this.that,new HI(S,{sourceEvent:this.sourceEvent,target:b,type:S,transform:this.that.__zoom,dispatch:l}),C)}};function M(S,...C){if(!e.apply(this,arguments))return;var k=O(this,C).event(S),D=this.__zoom,R=Math.max(i[0],Math.min(i[1],D.k*Math.pow(2,r.apply(this,arguments)))),B=bn(S);if(k.wheel)(k.mouse[0][0]!==B[0]||k.mouse[0][1]!==B[1])&&(k.mouse[1]=D.invert(k.mouse[0]=B)),clearTimeout(k.wheel);else{if(D.k===R)return;k.mouse=[B,D.invert(B)],Ac(this),k.start()}Ea(S),k.wheel=setTimeout(F,y),k.zoom("mouse",n(_(w(D,R),k.mouse[0],k.mouse[1]),k.extent,a));function F(){k.wheel=null,k.end()}}function N(S,...C){if(p||!e.apply(this,arguments))return;var k=S.currentTarget,D=O(this,C,!0).event(S),R=Kt(S.view).on("mousemove.zoom",I,!0).on("mouseup.zoom",X,!0),B=bn(S,k),F=S.clientX,V=S.clientY;Vv(S.view),bp(S),D.mouse=[B,this.__zoom.invert(B)],Ac(this),D.start();function I(H){if(Ea(H),!D.moved){var q=H.clientX-F,te=H.clientY-V;D.moved=q*q+te*te>m}D.event(H).zoom("mouse",n(_(D.that.__zoom,D.mouse[0]=bn(H,k),D.mouse[1]),D.extent,a))}function X(H){R.on("mousemove.zoom mouseup.zoom",null),Uv(H.view,D.moved),Ea(H),D.event(H).end()}}function A(S,...C){if(e.apply(this,arguments)){var k=this.__zoom,D=bn(S.changedTouches?S.changedTouches[0]:S,this),R=k.invert(D),B=k.k*(S.shiftKey?.5:2),F=n(_(w(k,B),D,R),t.apply(this,C),a);Ea(S),s>0?Kt(this).transition().duration(s).call(j,F,D,S):Kt(this).call(b.transform,F,D,S)}}function P(S,...C){if(e.apply(this,arguments)){var k=S.touches,D=k.length,R=O(this,C,S.changedTouches.length===D).event(S),B,F,V,I;for(bp(S),F=0;F<D;++F)V=k[F],I=bn(V,this),I=[I,this.__zoom.invert(I),V.identifier],R.touch0?!R.touch1&&R.touch0[2]!==I[2]&&(R.touch1=I,R.taps=0):(R.touch0=I,B=!0,R.taps=1+!!u);u&&(u=clearTimeout(u)),B&&(R.taps<2&&(d=I[0],u=setTimeout(function(){u=null},f)),Ac(this),R.start())}}function T(S,...C){if(this.__zooming){var k=O(this,C).event(S),D=S.changedTouches,R=D.length,B,F,V,I;for(Ea(S),B=0;B<R;++B)F=D[B],V=bn(F,this),k.touch0&&k.touch0[2]===F.identifier?k.touch0[0]=V:k.touch1&&k.touch1[2]===F.identifier&&(k.touch1[0]=V);if(F=k.that.__zoom,k.touch1){var X=k.touch0[0],H=k.touch0[1],q=k.touch1[0],te=k.touch1[1],Q=(Q=q[0]-X[0])*Q+(Q=q[1]-X[1])*Q,Z=(Z=te[0]-H[0])*Z+(Z=te[1]-H[1])*Z;F=w(F,Math.sqrt(Q/Z)),V=[(X[0]+q[0])/2,(X[1]+q[1])/2],I=[(H[0]+te[0])/2,(H[1]+te[1])/2]}else if(k.touch0)V=k.touch0[0],I=k.touch0[1];else return;k.zoom("touch",n(_(F,V,I),k.extent,a))}}function L(S,...C){if(this.__zooming){var k=O(this,C).event(S),D=S.changedTouches,R=D.length,B,F;for(bp(S),p&&clearTimeout(p),p=setTimeout(function(){p=null},f),B=0;B<R;++B)F=D[B],k.touch0&&k.touch0[2]===F.identifier?delete k.touch0:k.touch1&&k.touch1[2]===F.identifier&&delete k.touch1;if(k.touch1&&!k.touch0&&(k.touch0=k.touch1,delete k.touch1),k.touch0)k.touch0[1]=this.__zoom.invert(k.touch0[0]);else if(k.end(),k.taps===2&&(F=bn(F,this),Math.hypot(d[0]-F[0],d[1]-F[1])<g)){var V=Kt(this).on("dblclick.zoom");V&&V.apply(this,arguments)}}}return b.wheelDelta=function(S){return arguments.length?(r=typeof S=="function"?S:Tc(+S),b):r},b.filter=function(S){return arguments.length?(e=typeof S=="function"?S:Tc(!!S),b):e},b.touchable=function(S){return arguments.length?(o=typeof S=="function"?S:Tc(!!S),b):o},b.extent=function(S){return arguments.length?(t=typeof S=="function"?S:Tc([[+S[0][0],+S[0][1]],[+S[1][0],+S[1][1]]]),b):t},b.scaleExtent=function(S){return arguments.length?(i[0]=+S[0],i[1]=+S[1],b):[i[0],i[1]]},b.translateExtent=function(S){return arguments.length?(a[0][0]=+S[0][0],a[1][0]=+S[1][0],a[0][1]=+S[0][1],a[1][1]=+S[1][1],b):[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},b.constrain=function(S){return arguments.length?(n=S,b):n},b.duration=function(S){return arguments.length?(s=+S,b):s},b.interpolate=function(S){return arguments.length?(c=S,b):c},b.on=function(){var S=l.on.apply(l,arguments);return S===l?b:S},b.clickDistance=function(S){return arguments.length?(m=(S=+S)*S,b):Math.sqrt(m)},b.tapDistance=function(S){return arguments.length?(g=+S,b):g},b}const or={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:n,targetHandle:r})=>`Couldn't create edge for ${e} handle id: "${e==="source"?n:r}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`},Sa=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],_0=["Enter"," ","Escape"];var Uo;(function(e){e.Strict="strict",e.Loose="loose"})(Uo||(Uo={}));var Sr;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Sr||(Sr={}));var Ma;(function(e){e.Partial="partial",e.Full="full"})(Ma||(Ma={}));const j0={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var Mr;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Mr||(Mr={}));var Dc;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(Dc||(Dc={}));var oe;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(oe||(oe={}));const O0={[oe.Left]:oe.Right,[oe.Right]:oe.Left,[oe.Top]:oe.Bottom,[oe.Bottom]:oe.Top};function KI(e,t){if(!e&&!t)return!0;if(!e||!t||e.size!==t.size)return!1;if(!e.size&&!t.size)return!0;for(const n of e.keys())if(!t.has(n))return!1;return!0}function E0(e,t,n){if(!n)return;const r=[];e.forEach((o,i)=>{t!=null&&t.has(i)||r.push(o)}),r.length&&n(r)}function S0(e){return e===null?null:e?"valid":"invalid"}const M0=e=>"id"in e&&"source"in e&&"target"in e,ZI=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),xp=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),Ca=(e,t=[0,0])=>{const{width:n,height:r}=ir(e),o=e.origin??t,i=n*o[0],a=r*o[1];return{x:e.position.x-i,y:e.position.y-a}},JI=(e,t={nodeOrigin:[0,0],nodeLookup:void 0})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,o)=>{const i=typeof o=="string";let a=!t.nodeLookup&&!i?o:void 0;t.nodeLookup&&(a=i?t.nodeLookup.get(o):xp(o)?o:t.nodeLookup.get(o.id));const s=a?Bc(a,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return Rc(r,s)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Lc(n)},Pa=(e,t={})=>{if(e.size===0)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return e.forEach(r=>{if(t.filter===void 0||t.filter(r)){const o=Bc(r);n=Rc(n,o)}}),Lc(n)},C0=(e,t,[n,r,o]=[0,0,1],i=!1,a=!1)=>{const s={...ka(t,[n,r,o]),width:t.width/o,height:t.height/o},c=[];for(const l of e.values()){const{measured:u,selectable:d=!0,hidden:p=!1}=l;if(a&&!d||p)continue;const f=u.width??l.width??l.initialWidth??null,y=u.height??l.height??l.initialHeight??null,m=Na(s,Ho(l)),g=(f??0)*(y??0),b=i&&m>0;(!l.internals.handleBounds||b||m>=g||l.dragging)&&c.push(l)}return c},e5=(e,t)=>{const n=new Set;return e.forEach(r=>{n.add(r.id)}),t.filter(r=>n.has(r.source)||n.has(r.target))};function wp(e,t){const n=new Map,r=t!=null&&t.nodes?new Set(t.nodes.map(o=>o.id)):null;return e.forEach(o=>{o.measured.width&&o.measured.height&&(t!=null&&t.includeHiddenNodes||!o.hidden)&&(!r||r.has(o.id))&&n.set(o.id,o)}),n}async function _p({nodes:e,width:t,height:n,panZoom:r,minZoom:o,maxZoom:i},a){if(e.size===0)return Promise.resolve(!1);const s=Pa(e),c=Op(s,t,n,(a==null?void 0:a.minZoom)??o,(a==null?void 0:a.maxZoom)??i,(a==null?void 0:a.padding)??.1);return await r.setViewport(c,{duration:a==null?void 0:a.duration}),Promise.resolve(!0)}function P0({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:r=[0,0],nodeExtent:o,onError:i}){const a=n.get(e),s=a.parentId?n.get(a.parentId):void 0,{x:c,y:l}=s?s.internals.positionAbsolute:{x:0,y:0},u=a.origin??r;let d=o;if(a.extent==="parent"&&!a.expandParent)if(!s)i==null||i("005",or.error005());else{const f=s.measured.width,y=s.measured.height;f&&y&&(d=[[c,l],[c+f,l+y]])}else s&&Wo(a.extent)&&(d=[[a.extent[0][0]+c,a.extent[0][1]+l],[a.extent[1][0]+c,a.extent[1][1]+l]]);const p=Wo(d)?Jr(t,d,a.measured):t;return{position:{x:p.x-c+a.measured.width*u[0],y:p.y-l+a.measured.height*u[1]},positionAbsolute:p}}async function t5({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:r,onBeforeDelete:o}){const i=new Set(e.map(d=>d.id)),a=[];for(const d of n){if(d.deletable===!1)continue;const p=i.has(d.id),f=!p&&d.parentId&&a.find(y=>y.id===d.parentId);(p||f)&&a.push(d)}const s=new Set(t.map(d=>d.id)),c=r.filter(d=>d.deletable!==!1),l=e5(a,c);for(const d of c)s.has(d.id)&&!l.find(p=>p.id===d.id)&&l.push(d);if(!o)return{edges:l,nodes:a};const u=await o({nodes:a,edges:l});return typeof u=="boolean"?u?{edges:l,nodes:a}:{edges:[],nodes:[]}:u}const qo=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),Jr=(e={x:0,y:0},t,n)=>({x:qo(e.x,t[0][0],t[1][0]-((n==null?void 0:n.width)??0)),y:qo(e.y,t[0][1],t[1][1]-((n==null?void 0:n.height)??0))});function N0(e,t,n){const{width:r,height:o}=ir(n),{x:i,y:a}=n.internals.positionAbsolute;return Jr(e,[[i,a],[i+r,a+o]],t)}const k0=(e,t,n)=>e<t?qo(Math.abs(e-t),1,t)/t:e>n?-qo(Math.abs(e-n),1,t)/t:0,A0=(e,t,n=15,r=40)=>{const o=k0(e.x,r,t.width-r)*n,i=k0(e.y,r,t.height-r)*n;return[o,i]},Rc=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),jp=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),Lc=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),Ho=(e,t=[0,0])=>{var o,i;const{x:n,y:r}=xp(e)?e.internals.positionAbsolute:Ca(e,t);return{x:n,y:r,width:((o=e.measured)==null?void 0:o.width)??e.width??e.initialWidth??0,height:((i=e.measured)==null?void 0:i.height)??e.height??e.initialHeight??0}},Bc=(e,t=[0,0])=>{var o,i;const{x:n,y:r}=xp(e)?e.internals.positionAbsolute:Ca(e,t);return{x:n,y:r,x2:n+(((o=e.measured)==null?void 0:o.width)??e.width??e.initialWidth??0),y2:r+(((i=e.measured)==null?void 0:i.height)??e.height??e.initialHeight??0)}},T0=(e,t)=>Lc(Rc(jp(e),jp(t))),Na=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},I0=e=>jn(e.width)&&jn(e.height)&&jn(e.x)&&jn(e.y),jn=e=>!isNaN(e)&&isFinite(e),n5=(e,t)=>{},$c=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),ka=({x:e,y:t},[n,r,o],i=!1,a=[1,1])=>{const s={x:(e-n)/o,y:(t-r)/o};return i?$c(s,a):s},D0=({x:e,y:t},[n,r,o])=>({x:e*o+n,y:t*o+r}),Op=(e,t,n,r,o,i)=>{const a=t/(e.width*(1+i)),s=n/(e.height*(1+i)),c=Math.min(a,s),l=qo(c,r,o),u=e.x+e.width/2,d=e.y+e.height/2,p=t/2-u*l,f=n/2-d*l;return{x:p,y:f,zoom:l}},Fc=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function Wo(e){return e!==void 0&&e!=="parent"}function ir(e){var t,n;return{width:((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth??0,height:((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight??0}}function R0(e){var t,n;return(((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth)!==void 0&&(((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight)!==void 0}function L0(e,t={width:0,height:0},n,r,o){const i={...e},a=r.get(n);if(a){const s=a.origin||o;i.x+=a.internals.positionAbsolute.x-(t.width??0)*s[0],i.y+=a.internals.positionAbsolute.y-(t.height??0)*s[1]}return i}function Aa(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:r,containerBounds:o}){const{x:i,y:a}=ar(e),s=ka({x:i-((o==null?void 0:o.left)??0),y:a-((o==null?void 0:o.top)??0)},r),{x:c,y:l}=n?$c(s,t):s;return{xSnapped:c,ySnapped:l,...s}}const zc=e=>({width:e.offsetWidth,height:e.offsetHeight}),B0=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},r5=["INPUT","SELECT","TEXTAREA"];function Ep(e){var n,r;const t=((r=(n=e.composedPath)==null?void 0:n.call(e))==null?void 0:r[0])||e.target;return r5.includes(t==null?void 0:t.nodeName)||(t==null?void 0:t.hasAttribute("contenteditable"))||!!(t!=null&&t.closest(".nokey"))}const $0=e=>"clientX"in e,ar=(e,t)=>{var i,a;const n=$0(e),r=n?e.clientX:(i=e.touches)==null?void 0:i[0].clientX,o=n?e.clientY:(a=e.touches)==null?void 0:a[0].clientY;return{x:r-((t==null?void 0:t.left)??0),y:o-((t==null?void 0:t.top)??0)}},F0=(e,t,n,r,o)=>{const i=t.querySelectorAll(`.${e}`);return!i||!i.length?null:Array.from(i).map(a=>{const s=a.getBoundingClientRect();return{id:a.getAttribute("data-handleid"),type:e,nodeId:o,position:a.getAttribute("data-handlepos"),x:(s.left-n.left)/r,y:(s.top-n.top)/r,...zc(a)}})};function z0({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:o,sourceControlY:i,targetControlX:a,targetControlY:s}){const c=e*.125+o*.375+a*.375+n*.125,l=t*.125+i*.375+s*.375+r*.125,u=Math.abs(c-e),d=Math.abs(l-t);return[c,l,u,d]}function Vc(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function V0({pos:e,x1:t,y1:n,x2:r,y2:o,c:i}){switch(e){case oe.Left:return[t-Vc(t-r,i),n];case oe.Right:return[t+Vc(r-t,i),n];case oe.Top:return[t,n-Vc(n-o,i)];case oe.Bottom:return[t,n+Vc(o-n,i)]}}function U0({sourceX:e,sourceY:t,sourcePosition:n=oe.Bottom,targetX:r,targetY:o,targetPosition:i=oe.Top,curvature:a=.25}){const[s,c]=V0({pos:n,x1:e,y1:t,x2:r,y2:o,c:a}),[l,u]=V0({pos:i,x1:r,y1:o,x2:e,y2:t,c:a}),[d,p,f,y]=z0({sourceX:e,sourceY:t,targetX:r,targetY:o,sourceControlX:s,sourceControlY:c,targetControlX:l,targetControlY:u});return[`M${e},${t} C${s},${c} ${l},${u} ${r},${o}`,d,p,f,y]}function q0({sourceX:e,sourceY:t,targetX:n,targetY:r}){const o=Math.abs(n-e)/2,i=n<e?n+o:n-o,a=Math.abs(r-t)/2,s=r<t?r+a:r-a;return[i,s,o,a]}function o5({sourceNode:e,targetNode:t,selected:n=!1,zIndex:r=0,elevateOnSelect:o=!1}){if(!o)return r;const i=n||t.selected||e.selected,a=Math.max(e.internals.z||0,t.internals.z||0,1e3);return r+(i?a:0)}function i5({sourceNode:e,targetNode:t,width:n,height:r,transform:o}){const i=Rc(Bc(e),Bc(t));i.x===i.x2&&(i.x2+=1),i.y===i.y2&&(i.y2+=1);const a={x:-o[0]/o[2],y:-o[1]/o[2],width:n/o[2],height:r/o[2]};return Na(a,Lc(i))>0}const a5=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`xy-edge__${e}${t||""}-${n}${r||""}`,s5=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),H0=(e,t)=>{if(!e.source||!e.target)return t;let n;return M0(e)?n={...e}:n={...e,id:a5(e)},s5(n,t)?t:(n.sourceHandle===null&&delete n.sourceHandle,n.targetHandle===null&&delete n.targetHandle,t.concat(n))};function W0({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[o,i,a,s]=q0({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,o,i,a,s]}const X0={[oe.Left]:{x:-1,y:0},[oe.Right]:{x:1,y:0},[oe.Top]:{x:0,y:-1},[oe.Bottom]:{x:0,y:1}},c5=({source:e,sourcePosition:t=oe.Bottom,target:n})=>t===oe.Left||t===oe.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},Q0=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function l5({source:e,sourcePosition:t=oe.Bottom,target:n,targetPosition:r=oe.Top,center:o,offset:i}){const a=X0[t],s=X0[r],c={x:e.x+a.x*i,y:e.y+a.y*i},l={x:n.x+s.x*i,y:n.y+s.y*i},u=c5({source:c,sourcePosition:t,target:l}),d=u.x!==0?"x":"y",p=u[d];let f=[],y,m;const g={x:0,y:0},b={x:0,y:0},[w,_,x,j]=q0({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(a[d]*s[d]===-1){y=o.x??w,m=o.y??_;const O=[{x:y,y:c.y},{x:y,y:l.y}],E=[{x:c.x,y:m},{x:l.x,y:m}];a[d]===p?f=d==="x"?O:E:f=d==="x"?E:O}else{const O=[{x:c.x,y:l.y}],E=[{x:l.x,y:c.y}];if(d==="x"?f=a.x===p?E:O:f=a.y===p?O:E,t===r){const T=Math.abs(e[d]-n[d]);if(T<=i){const L=Math.min(i-1,i-T);a[d]===p?g[d]=(c[d]>e[d]?-1:1)*L:b[d]=(l[d]>n[d]?-1:1)*L}}if(t!==r){const T=d==="x"?"y":"x",L=a[d]===s[T],S=c[T]>l[T],C=c[T]<l[T];(a[d]===1&&(!L&&S||L&&C)||a[d]!==1&&(!L&&C||L&&S))&&(f=d==="x"?O:E)}const M={x:c.x+g.x,y:c.y+g.y},N={x:l.x+b.x,y:l.y+b.y},A=Math.max(Math.abs(M.x-f[0].x),Math.abs(N.x-f[0].x)),P=Math.max(Math.abs(M.y-f[0].y),Math.abs(N.y-f[0].y));A>=P?(y=(M.x+N.x)/2,m=f[0].y):(y=f[0].x,m=(M.y+N.y)/2)}return[[e,{x:c.x+g.x,y:c.y+g.y},...f,{x:l.x+b.x,y:l.y+b.y},n],y,m,x,j]}function u5(e,t,n,r){const o=Math.min(Q0(e,t)/2,Q0(t,n)/2,r),{x:i,y:a}=t;if(e.x===i&&i===n.x||e.y===a&&a===n.y)return`L${i} ${a}`;if(e.y===a){const l=e.x<n.x?-1:1,u=e.y<n.y?1:-1;return`L ${i+o*l},${a}Q ${i},${a} ${i},${a+o*u}`}const s=e.x<n.x?1:-1,c=e.y<n.y?-1:1;return`L ${i},${a+o*c}Q ${i},${a} ${i+o*s},${a}`}function Sp({sourceX:e,sourceY:t,sourcePosition:n=oe.Bottom,targetX:r,targetY:o,targetPosition:i=oe.Top,borderRadius:a=5,centerX:s,centerY:c,offset:l=20}){const[u,d,p,f,y]=l5({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:o},targetPosition:i,center:{x:s,y:c},offset:l});return[u.reduce((m,g,b)=>{let w="";return b>0&&b<u.length-1?w=u5(u[b-1],g,u[b+1],a):w=`${b===0?"M":"L"}${g.x} ${g.y}`,m+=w,m},""),d,p,f,y]}function Y0(e){var t;return e&&!!(e.internals.handleBounds||(t=e.handles)!=null&&t.length)&&!!(e.measured.width||e.width||e.initialWidth)}function d5(e){var d;const{sourceNode:t,targetNode:n}=e;if(!Y0(t)||!Y0(n))return null;const r=t.internals.handleBounds||G0(t.handles),o=n.internals.handleBounds||G0(n.handles),i=K0((r==null?void 0:r.source)??[],e.sourceHandle),a=K0(e.connectionMode===Uo.Strict?(o==null?void 0:o.target)??[]:((o==null?void 0:o.target)??[]).concat((o==null?void 0:o.source)??[]),e.targetHandle);if(!i||!a)return(d=e.onError)==null||d.call(e,"008",or.error008(i?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const s=(i==null?void 0:i.position)||oe.Bottom,c=(a==null?void 0:a.position)||oe.Top,l=Ta(t,i,s),u=Ta(n,a,c);return{sourceX:l.x,sourceY:l.y,targetX:u.x,targetY:u.y,sourcePosition:s,targetPosition:c}}function G0(e){if(!e)return null;const t=[],n=[];for(const r of e)r.width=r.width??1,r.height=r.height??1,r.type==="source"?t.push(r):r.type==="target"&&n.push(r);return{source:t,target:n}}function Ta(e,t,n=oe.Left,r=!1){const o=((t==null?void 0:t.x)??0)+e.internals.positionAbsolute.x,i=((t==null?void 0:t.y)??0)+e.internals.positionAbsolute.y,{width:a,height:s}=t??ir(e);if(r)return{x:o+a/2,y:i+s/2};switch((t==null?void 0:t.position)??n){case oe.Top:return{x:o+a/2,y:i};case oe.Right:return{x:o+a,y:i+s/2};case oe.Bottom:return{x:o+a/2,y:i+s};case oe.Left:return{x:o,y:i+s/2}}}function K0(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function Mp(e,t){return e?typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(n=>`${n}=${e[n]}`).join("&")}`:""}function p5(e,{id:t,defaultColor:n,defaultMarkerStart:r,defaultMarkerEnd:o}){const i=new Set;return e.reduce((a,s)=>([s.markerStart||r,s.markerEnd||o].forEach(c=>{if(c&&typeof c=="object"){const l=Mp(c,t);i.has(l)||(a.push({id:l,color:c.color||n,...c}),i.add(l))}}),a),[]).sort((a,s)=>a.id.localeCompare(s.id))}const Cp={nodeOrigin:[0,0],nodeExtent:Sa,elevateNodesOnSelect:!0,defaults:{}},f5={...Cp,checkEquality:!0};function Pp(e,t){const n={...e};for(const r in t)t[r]!==void 0&&(n[r]=t[r]);return n}function h5(e,t,n){const r=Pp(Cp,n);for(const o of e.values())if(o.parentId)kp(o,e,t,r);else{const i=Ca(o,r.nodeOrigin),a=Wo(o.extent)?o.extent:r.nodeExtent,s=Jr(i,a,ir(o));o.internals.positionAbsolute=s}}function Np(e,t,n,r){var s,c;const o=Pp(f5,r),i=new Map(t),a=o!=null&&o.elevateNodesOnSelect?1e3:0;t.clear(),n.clear();for(const l of e){let u=i.get(l.id);if(o.checkEquality&&l===(u==null?void 0:u.internals.userNode))t.set(l.id,u);else{const d=Ca(l,o.nodeOrigin),p=Wo(l.extent)?l.extent:o.nodeExtent,f=Jr(d,p,ir(l));u={...o.defaults,...l,measured:{width:(s=l.measured)==null?void 0:s.width,height:(c=l.measured)==null?void 0:c.height},internals:{positionAbsolute:f,handleBounds:l.measured?u==null?void 0:u.internals.handleBounds:void 0,z:Z0(l,a),userNode:l}},t.set(l.id,u)}l.parentId&&kp(u,t,n,r)}}function m5(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function kp(e,t,n,r){const{elevateNodesOnSelect:o,nodeOrigin:i,nodeExtent:a}=Pp(Cp,r),s=e.parentId,c=t.get(s);if(!c){console.warn(`Parent node ${s} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}m5(e,n);const l=o?1e3:0,{x:u,y:d,z:p}=y5(e,c,i,a,l),{positionAbsolute:f}=e.internals,y=u!==f.x||d!==f.y;(y||p!==e.internals.z)&&(e.internals={...e.internals,positionAbsolute:y?{x:u,y:d}:f,z:p})}function Z0(e,t){return(jn(e.zIndex)?e.zIndex:0)+(e.selected?t:0)}function y5(e,t,n,r,o){const{x:i,y:a}=t.internals.positionAbsolute,s=ir(e),c=Ca(e,n),l=Wo(e.extent)?Jr(c,e.extent,s):c;let u=Jr({x:i+l.x,y:a+l.y},r,s);e.extent==="parent"&&(u=N0(u,s,t));const d=Z0(e,o),p=t.internals.z??0;return{x:u.x,y:u.y,z:p>d?p:d}}function Ap(e,t,n,r=[0,0]){var a;const o=[],i=new Map;for(const s of e){const c=t.get(s.parentId);if(!c)continue;const l=((a=i.get(s.parentId))==null?void 0:a.expandedRect)??Ho(c),u=T0(l,s.rect);i.set(s.parentId,{expandedRect:u,parent:c})}return i.size>0&&i.forEach(({expandedRect:s,parent:c},l)=>{var _;const u=c.internals.positionAbsolute,d=ir(c),p=c.origin??r,f=s.x<u.x?Math.round(Math.abs(u.x-s.x)):0,y=s.y<u.y?Math.round(Math.abs(u.y-s.y)):0,m=Math.max(d.width,Math.round(s.width)),g=Math.max(d.height,Math.round(s.height)),b=(m-d.width)*p[0],w=(g-d.height)*p[1];(f>0||y>0||b||w)&&(o.push({id:l,type:"position",position:{x:c.position.x-f+b,y:c.position.y-y+w}}),(_=n.get(l))==null||_.forEach(x=>{e.some(j=>j.id===x.id)||o.push({id:x.id,type:"position",position:{x:x.position.x+f,y:x.position.y+y}})})),(d.width<s.width||d.height<s.height||f||y)&&o.push({id:l,type:"dimensions",setAttributes:!0,dimensions:{width:m+(f?p[0]*f-b:0),height:g+(y?p[1]*y-w:0)}})}),o}function g5(e,t,n,r,o,i){const a=r==null?void 0:r.querySelector(".xyflow__viewport");let s=!1;if(!a)return{changes:[],updatedInternals:s};const c=[],l=window.getComputedStyle(a),{m22:u}=new window.DOMMatrixReadOnly(l.transform),d=[];for(const p of e.values()){const f=t.get(p.id);if(f)if(f.hidden)f.internals={...f.internals,handleBounds:void 0},s=!0;else{const y=zc(p.nodeElement),m=f.measured.width!==y.width||f.measured.height!==y.height;if(y.width&&y.height&&(m||!f.internals.handleBounds||p.force)){const g=p.nodeElement.getBoundingClientRect(),b=Wo(f.extent)?f.extent:i;let{positionAbsolute:w}=f.internals;f.parentId&&f.extent==="parent"?w=N0(w,y,t.get(f.parentId)):b&&(w=Jr(w,b,y)),f.measured=y,f.internals={...f.internals,positionAbsolute:w,handleBounds:{source:F0("source",p.nodeElement,g,u,f.id),target:F0("target",p.nodeElement,g,u,f.id)}},f.parentId&&kp(f,t,n,{nodeOrigin:o}),s=!0,m&&(c.push({id:f.id,type:"dimensions",dimensions:y}),f.expandParent&&f.parentId&&d.push({id:f.id,parentId:f.parentId,rect:Ho(f,o)}))}}}if(d.length>0){const p=Ap(d,t,n,o);c.push(...p)}return{changes:c,updatedInternals:s}}async function v5({delta:e,panZoom:t,transform:n,translateExtent:r,width:o,height:i}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const a=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[o,i]],r),s=!!a&&(a.x!==n[0]||a.y!==n[1]||a.k!==n[2]);return Promise.resolve(s)}function J0(e,t,n){e.clear(),t.clear();for(const r of n){const{source:o,target:i,sourceHandle:a=null,targetHandle:s=null}=r,c=`${o}-source-${a}`,l=`${i}-target-${s}`,u=e.get(c)||new Map,d=e.get(l)||new Map,p={edgeId:r.id,source:o,target:i,sourceHandle:a,targetHandle:s};t.set(r.id,r),e.set(c,u.set(`${i}-${s}`,p)),e.set(l,d.set(`${o}-${a}`,p))}}function eb(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return n?n.selected?!0:eb(n,t):!1}function tb(e,t,n){let r=e;do{if(r!=null&&r.matches(t))return!0;if(r===n)return!1;r=r.parentElement}while(r);return!1}function b5(e,t,n,r){const o=new Map;for(const[i,a]of e)if((a.selected||a.id===r)&&(!a.parentId||!eb(a,e))&&(a.draggable||t&&typeof a.draggable>"u")){const s=e.get(i);s&&o.set(i,{id:i,position:s.position||{x:0,y:0},distance:{x:n.x-s.internals.positionAbsolute.x,y:n.y-s.internals.positionAbsolute.y},extent:s.extent,parentId:s.parentId,origin:s.origin,expandParent:s.expandParent,internals:{positionAbsolute:s.internals.positionAbsolute||{x:0,y:0}},measured:{width:s.measured.width??0,height:s.measured.height??0}})}return o}function Tp({nodeId:e,dragItems:t,nodeLookup:n,dragging:r=!0}){var a,s,c;const o=[];for(const[l,u]of t){const d=(a=n.get(l))==null?void 0:a.internals.userNode;d&&o.push({...d,position:u.position,dragging:r})}if(!e)return[o[0],o];const i=(s=n.get(e))==null?void 0:s.internals.userNode;return[i?{...i,position:((c=t.get(e))==null?void 0:c.position)||i.position,dragging:r}:o[0],o]}function x5({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:r,onDragStop:o}){let i={x:null,y:null},a=0,s=new Map,c=!1,l={x:0,y:0},u=null,d=!1,p=null,f=!1;function y({noDragClassName:g,handleSelector:b,domNode:w,isSelectable:_,nodeId:x,nodeClickDistance:j=0}){p=Kt(w);function O({x:A,y:P},T){const{nodeLookup:L,nodeExtent:S,snapGrid:C,snapToGrid:k,nodeOrigin:D,onNodeDrag:R,onSelectionDrag:B,onError:F,updateNodePositions:V}=t();i={x:A,y:P};let I=!1,X={x:0,y:0,x2:0,y2:0};if(s.size>1&&S){const H=Pa(s);X=jp(H)}for(const[H,q]of s){if(!L.has(H))continue;let te={x:A-q.distance.x,y:P-q.distance.y};k&&(te=$c(te,C));let Q=[[S[0][0],S[0][1]],[S[1][0],S[1][1]]];if(s.size>1&&S&&!q.extent){const{positionAbsolute:K}=q.internals,ne=K.x-X.x+S[0][0],z=K.x+q.measured.width-X.x2+S[1][0],ye=K.y-X.y+S[0][1],fe=K.y+q.measured.height-X.y2+S[1][1];Q=[[ne,ye],[z,fe]]}const{position:Z,positionAbsolute:Y}=P0({nodeId:H,nextPosition:te,nodeLookup:L,nodeExtent:Q,nodeOrigin:D,onError:F});I=I||q.position.x!==Z.x||q.position.y!==Z.y,q.position=Z,q.internals.positionAbsolute=Y}if(I&&(V(s,!0),T&&(r||R||!x&&B))){const[H,q]=Tp({nodeId:x,dragItems:s,nodeLookup:L});r==null||r(T,s,H,q),R==null||R(T,H,q),x||(B==null||B(T,q))}}async function E(){if(!u)return;const{transform:A,panBy:P,autoPanSpeed:T}=t(),[L,S]=A0(l,u,T);(L!==0||S!==0)&&(i.x=(i.x??0)-L/A[2],i.y=(i.y??0)-S/A[2],await P({x:L,y:S})&&O(i,null)),a=requestAnimationFrame(E)}function M(A){var I;const{nodeLookup:P,multiSelectionActive:T,nodesDraggable:L,transform:S,snapGrid:C,snapToGrid:k,selectNodesOnDrag:D,onNodeDragStart:R,onSelectionDragStart:B,unselectNodesAndEdges:F}=t();d=!0,(!D||!_)&&!T&&x&&((I=P.get(x))!=null&&I.selected||F()),_&&D&&x&&(e==null||e(x));const V=Aa(A.sourceEvent,{transform:S,snapGrid:C,snapToGrid:k,containerBounds:u});if(i=V,s=b5(P,L,V,x),s.size>0&&(n||R||!x&&B)){const[X,H]=Tp({nodeId:x,dragItems:s,nodeLookup:P});n==null||n(A.sourceEvent,s,X,H),R==null||R(A.sourceEvent,X,H),x||(B==null||B(A.sourceEvent,H))}}const N=qv().clickDistance(j).on("start",A=>{const{domNode:P,nodeDragThreshold:T,transform:L,snapGrid:S,snapToGrid:C}=t();u=(P==null?void 0:P.getBoundingClientRect())||null,f=!1,T===0&&M(A),i=Aa(A.sourceEvent,{transform:L,snapGrid:S,snapToGrid:C,containerBounds:u}),l=ar(A.sourceEvent,u)}).on("drag",A=>{const{autoPanOnNodeDrag:P,transform:T,snapGrid:L,snapToGrid:S,nodeDragThreshold:C,nodeLookup:k}=t(),D=Aa(A.sourceEvent,{transform:T,snapGrid:L,snapToGrid:S,containerBounds:u});if((A.sourceEvent.type==="touchmove"&&A.sourceEvent.touches.length>1||x&&!k.has(x))&&(f=!0),!f){if(!c&&P&&d&&(c=!0,E()),!d){const R=D.xSnapped-(i.x??0),B=D.ySnapped-(i.y??0);Math.sqrt(R*R+B*B)>C&&M(A)}(i.x!==D.xSnapped||i.y!==D.ySnapped)&&s&&d&&(l=ar(A.sourceEvent,u),O(D,A.sourceEvent))}}).on("end",A=>{if(!(!d||f)&&(c=!1,d=!1,cancelAnimationFrame(a),s.size>0)){const{nodeLookup:P,updateNodePositions:T,onNodeDragStop:L,onSelectionDragStop:S}=t();if(T(s,!1),o||L||!x&&S){const[C,k]=Tp({nodeId:x,dragItems:s,nodeLookup:P,dragging:!1});o==null||o(A.sourceEvent,s,C,k),L==null||L(A.sourceEvent,C,k),x||(S==null||S(A.sourceEvent,k))}}}).filter(A=>{const P=A.target;return!A.button&&(!g||!tb(P,`.${g}`,w))&&(!b||tb(P,b,w))});p.call(N)}function m(){p==null||p.on(".drag",null)}return{update:y,destroy:m}}function w5(e,t,n){const r=[],o={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const i of t.values())Na(o,Ho(i))>0&&r.push(i);return r}const _5=250;function j5(e,t,n,r){var s,c;let o=[],i=1/0;const a=w5(e,n,t+_5);for(const l of a){const u=[...((s=l.internals.handleBounds)==null?void 0:s.source)??[],...((c=l.internals.handleBounds)==null?void 0:c.target)??[]];for(const d of u){if(r.nodeId===d.nodeId&&r.type===d.type&&r.id===d.id)continue;const{x:p,y:f}=Ta(l,d,d.position,!0),y=Math.sqrt(Math.pow(p-e.x,2)+Math.pow(f-e.y,2));y>t||(y<i?(o=[{...d,x:p,y:f}],i=y):y===i&&o.push({...d,x:p,y:f}))}}if(!o.length)return null;if(o.length>1){const l=r.type==="source"?"target":"source";return o.find(u=>u.type===l)??o[0]}return o[0]}function nb(e,t,n,r,o,i=!1){var l,u,d;const a=r.get(e);if(!a)return null;const s=o==="strict"?(l=a.internals.handleBounds)==null?void 0:l[t]:[...((u=a.internals.handleBounds)==null?void 0:u.source)??[],...((d=a.internals.handleBounds)==null?void 0:d.target)??[]],c=(n?s==null?void 0:s.find(p=>p.id===n):s==null?void 0:s[0])??null;return c&&i?{...c,...Ta(a,c,c.position,!0)}:c}function rb(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function O5(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}const ob=()=>!0;function E5(e,{connectionMode:t,connectionRadius:n,handleId:r,nodeId:o,edgeUpdaterType:i,isTarget:a,domNode:s,nodeLookup:c,lib:l,autoPanOnConnect:u,flowId:d,panBy:p,cancelConnection:f,onConnectStart:y,onConnect:m,onConnectEnd:g,isValidConnection:b=ob,onReconnectEnd:w,updateConnection:_,getTransform:x,getFromHandle:j,autoPanSpeed:O}){const E=B0(e.target);let M=0,N;const{x:A,y:P}=ar(e),T=E==null?void 0:E.elementFromPoint(A,P),L=rb(i,T),S=s==null?void 0:s.getBoundingClientRect();if(!S||!L)return;const C=nb(o,L,r,c,t);if(!C)return;let k=ar(e,S),D=!1,R=null,B=!1,F=null;function V(){if(!u||!S)return;const[Z,Y]=A0(k,S,O);p({x:Z,y:Y}),M=requestAnimationFrame(V)}const I={...C,nodeId:o,type:L,position:C.position},X=c.get(o),H={inProgress:!0,isValid:null,from:Ta(X,I,oe.Left,!0),fromHandle:I,fromPosition:I.position,fromNode:X,to:k,toHandle:null,toPosition:O0[I.position],toNode:null};_(H);let q=H;y==null||y(e,{nodeId:o,handleId:r,handleType:L});function te(Z){if(!j()||!I){Q(Z);return}const Y=x();k=ar(Z,S),N=j5(ka(k,Y,!1,[1,1]),n,c,I),D||(V(),D=!0);const K=ib(Z,{handle:N,connectionMode:t,fromNodeId:o,fromHandleId:r,fromType:a?"target":"source",isValidConnection:b,doc:E,lib:l,flowId:d,nodeLookup:c});F=K.handleDomNode,R=K.connection,B=O5(!!N,K.isValid);const ne={...q,isValid:B,to:N&&B?D0({x:N.x,y:N.y},Y):k,toHandle:K.toHandle,toPosition:B&&K.toHandle?K.toHandle.position:O0[I.position],toNode:K.toHandle?c.get(K.toHandle.nodeId):null};B&&N&&q.toHandle&&ne.toHandle&&q.toHandle.type===ne.toHandle.type&&q.toHandle.nodeId===ne.toHandle.nodeId&&q.toHandle.id===ne.toHandle.id&&q.to.x===ne.to.x&&q.to.y===ne.to.y||(_(ne),q=ne)}function Q(Z){(N||F)&&R&&B&&(m==null||m(R));const{inProgress:Y,...K}=q,ne={...K,toPosition:q.toHandle?q.toPosition:null};g==null||g(Z,ne),i&&(w==null||w(Z,ne)),f(),cancelAnimationFrame(M),D=!1,B=!1,R=null,F=null,E.removeEventListener("mousemove",te),E.removeEventListener("mouseup",Q),E.removeEventListener("touchmove",te),E.removeEventListener("touchend",Q)}E.addEventListener("mousemove",te),E.addEventListener("mouseup",Q),E.addEventListener("touchmove",te),E.addEventListener("touchend",Q)}function ib(e,{handle:t,connectionMode:n,fromNodeId:r,fromHandleId:o,fromType:i,doc:a,lib:s,flowId:c,isValidConnection:l=ob,nodeLookup:u}){const d=i==="target",p=t?a.querySelector(`.${s}-flow__handle[data-id="${c}-${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`):null,{x:f,y}=ar(e),m=a.elementFromPoint(f,y),g=m!=null&&m.classList.contains(`${s}-flow__handle`)?m:p,b={handleDomNode:g,isValid:!1,connection:null,toHandle:null};if(g){const w=rb(void 0,g),_=g.getAttribute("data-nodeid"),x=g.getAttribute("data-handleid"),j=g.classList.contains("connectable"),O=g.classList.contains("connectableend");if(!_||!w)return b;const E={source:d?_:r,sourceHandle:d?x:o,target:d?r:_,targetHandle:d?o:x};b.connection=E;const M=j&&O&&(n===Uo.Strict?d&&w==="source"||!d&&w==="target":_!==r||x!==o);b.isValid=M&&l(E),b.toHandle=nb(_,w,x,u,n,!1)}return b}const Ip={onPointerDown:E5,isValid:ib};function S5({domNode:e,panZoom:t,getTransform:n,getViewScale:r}){const o=Kt(e);function i({translateExtent:s,width:c,height:l,zoomStep:u=10,pannable:d=!0,zoomable:p=!0,inversePan:f=!1}){const y=_=>{const x=n();if(_.sourceEvent.type!=="wheel"||!t)return;const j=-_.sourceEvent.deltaY*(_.sourceEvent.deltaMode===1?.05:_.sourceEvent.deltaMode?1:.002)*u,O=x[2]*Math.pow(2,j);t.scaleTo(O)};let m=[0,0];const g=_=>{(_.sourceEvent.type==="mousedown"||_.sourceEvent.type==="touchstart")&&(m=[_.sourceEvent.clientX??_.sourceEvent.touches[0].clientX,_.sourceEvent.clientY??_.sourceEvent.touches[0].clientY])},b=_=>{const x=n();if(_.sourceEvent.type!=="mousemove"&&_.sourceEvent.type!=="touchmove"||!t)return;const j=[_.sourceEvent.clientX??_.sourceEvent.touches[0].clientX,_.sourceEvent.clientY??_.sourceEvent.touches[0].clientY],O=[j[0]-m[0],j[1]-m[1]];m=j;const E=r()*Math.max(x[2],Math.log(x[2]))*(f?-1:1),M={x:x[0]-O[0]*E,y:x[1]-O[1]*E},N=[[0,0],[c,l]];t.setViewportConstrained({x:M.x,y:M.y,zoom:x[2]},N,s)},w=w0().on("start",g).on("zoom",d?b:null).on("zoom.wheel",p?y:null);o.call(w,{})}function a(){o.on("zoom",null)}return{update:i,destroy:a,pointer:bn}}const M5=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,Uc=e=>({x:e.x,y:e.y,zoom:e.k}),Dp=({x:e,y:t,zoom:n})=>Ic.translate(e,t).scale(n),Xo=(e,t)=>e.target.closest(`.${t}`),ab=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),Rp=(e,t=0,n=()=>{})=>{const r=typeof t=="number"&&t>0;return r||n(),r?e.transition().duration(t).on("end",n):e},sb=e=>{const t=e.ctrlKey&&Fc()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function C5({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:r,panOnScrollMode:o,panOnScrollSpeed:i,zoomOnPinch:a,onPanZoomStart:s,onPanZoom:c,onPanZoomEnd:l}){return u=>{if(Xo(u,t))return!1;u.preventDefault(),u.stopImmediatePropagation();const d=n.property("__zoom").k||1;if(u.ctrlKey&&a){const g=bn(u),b=sb(u),w=d*Math.pow(2,b);r.scaleTo(n,w,g,u);return}const p=u.deltaMode===1?20:1;let f=o===Sr.Vertical?0:u.deltaX*p,y=o===Sr.Horizontal?0:u.deltaY*p;!Fc()&&u.shiftKey&&o!==Sr.Vertical&&(f=u.deltaY*p,y=0),r.translateBy(n,-(f/d)*i,-(y/d)*i,{internal:!0});const m=Uc(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling||(e.isPanScrolling=!0,s==null||s(u,m)),e.isPanScrolling&&(c==null||c(u,m),e.panScrollTimeout=setTimeout(()=>{l==null||l(u,m),e.isPanScrolling=!1},150))}}function P5({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(r,o){if(!t&&r.type==="wheel"&&!r.ctrlKey||Xo(r,e))return null;r.preventDefault(),n.call(this,r,o)}}function N5({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return r=>{var i,a,s;if((i=r.sourceEvent)!=null&&i.internal)return;const o=Uc(r.transform);e.mouseButton=((a=r.sourceEvent)==null?void 0:a.button)||0,e.isZoomingOrPanning=!0,e.prevViewport=o,((s=r.sourceEvent)==null?void 0:s.type)==="mousedown"&&t(!0),n&&(n==null||n(r.sourceEvent,o))}}function k5({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:r,onPanZoom:o}){return i=>{var a,s;e.usedRightMouseButton=!!(n&&ab(t,e.mouseButton??0)),(a=i.sourceEvent)!=null&&a.sync||r([i.transform.x,i.transform.y,i.transform.k]),o&&!((s=i.sourceEvent)!=null&&s.internal)&&(o==null||o(i.sourceEvent,Uc(i.transform)))}}function A5({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:r,onPanZoomEnd:o,onPaneContextMenu:i}){return a=>{var s;if(!((s=a.sourceEvent)!=null&&s.internal)&&(e.isZoomingOrPanning=!1,i&&ab(t,e.mouseButton??0)&&!e.usedRightMouseButton&&a.sourceEvent&&i(a.sourceEvent),e.usedRightMouseButton=!1,r(!1),o&&M5(e.prevViewport,a.transform))){const c=Uc(a.transform);e.prevViewport=c,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{o==null||o(a.sourceEvent,c)},n?150:0)}}}function T5({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:r,panOnScroll:o,zoomOnDoubleClick:i,userSelectionActive:a,noWheelClassName:s,noPanClassName:c,lib:l}){return u=>{var y;const d=e||t,p=n&&u.ctrlKey;if(u.button===1&&u.type==="mousedown"&&(Xo(u,`${l}-flow__node`)||Xo(u,`${l}-flow__edge`)))return!0;if(!r&&!d&&!o&&!i&&!n||a||Xo(u,s)&&u.type==="wheel"||Xo(u,c)&&(u.type!=="wheel"||o&&u.type==="wheel"&&!e)||!n&&u.ctrlKey&&u.type==="wheel")return!1;if(!n&&u.type==="touchstart"&&((y=u.touches)==null?void 0:y.length)>1)return u.preventDefault(),!1;if(!d&&!o&&!p&&u.type==="wheel"||!r&&(u.type==="mousedown"||u.type==="touchstart")||Array.isArray(r)&&!r.includes(u.button)&&u.type==="mousedown")return!1;const f=Array.isArray(r)&&r.includes(u.button)||!u.button||u.button<=1;return(!u.ctrlKey||u.type==="wheel")&&f}}function I5({domNode:e,minZoom:t,maxZoom:n,paneClickDistance:r,translateExtent:o,viewport:i,onPanZoom:a,onPanZoomStart:s,onPanZoomEnd:c,onDraggingChange:l}){const u={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},d=e.getBoundingClientRect(),p=w0().clickDistance(!jn(r)||r<0?0:r).scaleExtent([t,n]).translateExtent(o),f=Kt(e).call(p);_({x:i.x,y:i.y,zoom:qo(i.zoom,t,n)},[[0,0],[d.width,d.height]],o);const y=f.on("wheel.zoom"),m=f.on("dblclick.zoom");p.wheelDelta(sb);function g(T,L){return f?new Promise(S=>{p==null||p.transform(Rp(f,L==null?void 0:L.duration,()=>S(!0)),T)}):Promise.resolve(!1)}function b({noWheelClassName:T,noPanClassName:L,onPaneContextMenu:S,userSelectionActive:C,panOnScroll:k,panOnDrag:D,panOnScrollMode:R,panOnScrollSpeed:B,preventScrolling:F,zoomOnPinch:V,zoomOnScroll:I,zoomOnDoubleClick:X,zoomActivationKeyPressed:H,lib:q,onTransformChange:te}){C&&!u.isZoomingOrPanning&&w();const Q=k&&!H&&!C?C5({zoomPanValues:u,noWheelClassName:T,d3Selection:f,d3Zoom:p,panOnScrollMode:R,panOnScrollSpeed:B,zoomOnPinch:V,onPanZoomStart:s,onPanZoom:a,onPanZoomEnd:c}):P5({noWheelClassName:T,preventScrolling:F,d3ZoomHandler:y});if(f.on("wheel.zoom",Q,{passive:!1}),!C){const Y=N5({zoomPanValues:u,onDraggingChange:l,onPanZoomStart:s});p.on("start",Y);const K=k5({zoomPanValues:u,panOnDrag:D,onPaneContextMenu:!!S,onPanZoom:a,onTransformChange:te});p.on("zoom",K);const ne=A5({zoomPanValues:u,panOnDrag:D,panOnScroll:k,onPaneContextMenu:S,onPanZoomEnd:c,onDraggingChange:l});p.on("end",ne)}const Z=T5({zoomActivationKeyPressed:H,panOnDrag:D,zoomOnScroll:I,panOnScroll:k,zoomOnDoubleClick:X,zoomOnPinch:V,userSelectionActive:C,noPanClassName:L,noWheelClassName:T,lib:q});p.filter(Z),X?f.on("dblclick.zoom",m):f.on("dblclick.zoom",null)}function w(){p.on("zoom",null)}async function _(T,L,S){const C=Dp(T),k=p==null?void 0:p.constrain()(C,L,S);return k&&await g(k),new Promise(D=>D(k))}async function x(T,L){const S=Dp(T);return await g(S,L),new Promise(C=>C(S))}function j(T){if(f){const L=Dp(T),S=f.property("__zoom");(S.k!==T.zoom||S.x!==T.x||S.y!==T.y)&&(p==null||p.transform(f,L,null,{sync:!0}))}}function O(){const T=f?b0(f.node()):{x:0,y:0,k:1};return{x:T.x,y:T.y,zoom:T.k}}function E(T,L){return f?new Promise(S=>{p==null||p.scaleTo(Rp(f,L==null?void 0:L.duration,()=>S(!0)),T)}):Promise.resolve(!1)}function M(T,L){return f?new Promise(S=>{p==null||p.scaleBy(Rp(f,L==null?void 0:L.duration,()=>S(!0)),T)}):Promise.resolve(!1)}function N(T){p==null||p.scaleExtent(T)}function A(T){p==null||p.translateExtent(T)}function P(T){const L=!jn(T)||T<0?0:T;p==null||p.clickDistance(L)}return{update:b,destroy:w,setViewport:x,setViewportConstrained:_,getViewport:O,scaleTo:E,scaleBy:M,setScaleExtent:N,setTranslateExtent:A,syncViewport:j,setClickDistance:P}}var Qo;(function(e){e.Line="line",e.Handle="handle"})(Qo||(Qo={}));const D5=["top-left","top-right","bottom-left","bottom-right"],R5=["top","right","bottom","left"];function L5({width:e,prevWidth:t,height:n,prevHeight:r,affectsX:o,affectsY:i}){const a=e-t,s=n-r,c=[a>0?1:a<0?-1:0,s>0?1:s<0?-1:0];return a&&o&&(c[0]=c[0]*-1),s&&i&&(c[1]=c[1]*-1),c}function B5(e){const t=e.includes("right")||e.includes("left"),n=e.includes("bottom")||e.includes("top"),r=e.includes("left"),o=e.includes("top");return{isHorizontal:t,isVertical:n,affectsX:r,affectsY:o}}function Cr(e,t){return Math.max(0,t-e)}function Pr(e,t){return Math.max(0,e-t)}function qc(e,t,n){return Math.max(0,t-e,e-n)}function cb(e,t){return e?!t:t}function $5(e,t,n,r,o,i,a,s){let{affectsX:c,affectsY:l}=t;const{isHorizontal:u,isVertical:d}=t,p=u&&d,{xSnapped:f,ySnapped:y}=n,{minWidth:m,maxWidth:g,minHeight:b,maxHeight:w}=r,{x:_,y:x,width:j,height:O,aspectRatio:E}=e;let M=Math.floor(u?f-e.pointerX:0),N=Math.floor(d?y-e.pointerY:0);const A=j+(c?-M:M),P=O+(l?-N:N),T=-i[0]*j,L=-i[1]*O;let S=qc(A,m,g),C=qc(P,b,w);if(a){let R=0,B=0;c&&M<0?R=Cr(_+M+T,a[0][0]):!c&&M>0&&(R=Pr(_+A+T,a[1][0])),l&&N<0?B=Cr(x+N+L,a[0][1]):!l&&N>0&&(B=Pr(x+P+L,a[1][1])),S=Math.max(S,R),C=Math.max(C,B)}if(s){let R=0,B=0;c&&M>0?R=Pr(_+M,s[0][0]):!c&&M<0&&(R=Cr(_+A,s[1][0])),l&&N>0?B=Pr(x+N,s[0][1]):!l&&N<0&&(B=Cr(x+P,s[1][1])),S=Math.max(S,R),C=Math.max(C,B)}if(o){if(u){const R=qc(A/E,b,w)*E;if(S=Math.max(S,R),a){let B=0;!c&&!l||c&&!l&&p?B=Pr(x+L+A/E,a[1][1])*E:B=Cr(x+L+(c?M:-M)/E,a[0][1])*E,S=Math.max(S,B)}if(s){let B=0;!c&&!l||c&&!l&&p?B=Cr(x+A/E,s[1][1])*E:B=Pr(x+(c?M:-M)/E,s[0][1])*E,S=Math.max(S,B)}}if(d){const R=qc(P*E,m,g)/E;if(C=Math.max(C,R),a){let B=0;!c&&!l||l&&!c&&p?B=Pr(_+P*E+T,a[1][0])/E:B=Cr(_+(l?N:-N)*E+T,a[0][0])/E,C=Math.max(C,B)}if(s){let B=0;!c&&!l||l&&!c&&p?B=Cr(_+P*E,s[1][0])/E:B=Pr(_+(l?N:-N)*E,s[0][0])/E,C=Math.max(C,B)}}}N=N+(N<0?C:-C),M=M+(M<0?S:-S),o&&(p?A>P*E?N=(cb(c,l)?-M:M)/E:M=(cb(c,l)?-N:N)*E:u?(N=M/E,l=c):(M=N*E,c=l));const k=c?_+M:_,D=l?x+N:x;return{width:j+(c?-M:M),height:O+(l?-N:N),x:i[0]*M*(c?-1:1)+k,y:i[1]*N*(l?-1:1)+D}}const lb={width:0,height:0,x:0,y:0},F5={...lb,pointerX:0,pointerY:0,aspectRatio:1};function z5(e){return[[0,0],[e.measured.width,e.measured.height]]}function V5(e,t,n){const r=t.position.x+e.position.x,o=t.position.y+e.position.y,i=e.measured.width??0,a=e.measured.height??0,s=n[0]*i,c=n[1]*a;return[[r-s,o-c],[r+i-s,o+a-c]]}function U5({domNode:e,nodeId:t,getStoreItems:n,onChange:r,onEnd:o}){const i=Kt(e);function a({controlPosition:c,boundaries:l,keepAspectRatio:u,onResizeStart:d,onResize:p,onResizeEnd:f,shouldResize:y}){let m={...lb},g={...F5};const b=B5(c);let w,_=null,x=[],j,O,E;const M=qv().on("start",N=>{const{nodeLookup:A,transform:P,snapGrid:T,snapToGrid:L,nodeOrigin:S,paneDomNode:C}=n();if(w=A.get(t),!w)return;_=(C==null?void 0:C.getBoundingClientRect())??null;const{xSnapped:k,ySnapped:D}=Aa(N.sourceEvent,{transform:P,snapGrid:T,snapToGrid:L,containerBounds:_});m={width:w.measured.width??0,height:w.measured.height??0,x:w.position.x??0,y:w.position.y??0},g={...m,pointerX:k,pointerY:D,aspectRatio:m.width/m.height},j=void 0,w.parentId&&(w.extent==="parent"||w.expandParent)&&(j=A.get(w.parentId),O=j&&w.extent==="parent"?z5(j):void 0),x=[],E=void 0;for(const[R,B]of A)if(B.parentId===t&&(x.push({id:R,position:{...B.position},extent:B.extent}),B.extent==="parent"||B.expandParent)){const F=V5(B,w,B.origin??S);E?E=[[Math.min(F[0][0],E[0][0]),Math.min(F[0][1],E[0][1])],[Math.max(F[1][0],E[1][0]),Math.max(F[1][1],E[1][1])]]:E=F}d==null||d(N,{...m})}).on("drag",N=>{const{transform:A,snapGrid:P,snapToGrid:T,nodeOrigin:L}=n(),S=Aa(N.sourceEvent,{transform:A,snapGrid:P,snapToGrid:T,containerBounds:_}),C=[];if(!w)return;const{x:k,y:D,width:R,height:B}=m,F={},V=w.origin??L,{width:I,height:X,x:H,y:q}=$5(g,b,S,l,u,V,O,E),te=I!==R,Q=X!==B,Z=H!==k&&te,Y=q!==D&&Q;if(!Z&&!Y&&!te&&!Q)return;if((Z||Y||V[0]===1||V[1]===1)&&(F.x=Z?H:m.x,F.y=Y?q:m.y,m.x=F.x,m.y=F.y,x.length>0)){const z=H-k,ye=q-D;for(const fe of x)fe.position={x:fe.position.x-z+V[0]*(I-R),y:fe.position.y-ye+V[1]*(X-B)},C.push(fe)}if((te||Q)&&(F.width=te?I:m.width,F.height=Q?X:m.height,m.width=F.width,m.height=F.height),j&&w.expandParent){const z=V[0]*(F.width??0);F.x&&F.x<z&&(m.x=z,g.x=g.x-(F.x-z));const ye=V[1]*(F.height??0);F.y&&F.y<ye&&(m.y=ye,g.y=g.y-(F.y-ye))}const K=L5({width:m.width,prevWidth:R,height:m.height,prevHeight:B,affectsX:b.affectsX,affectsY:b.affectsY}),ne={...m,direction:K};(y==null?void 0:y(N,ne))!==!1&&(p==null||p(N,ne),r(F,C))}).on("end",N=>{f==null||f(N,{...m}),o==null||o()});i.call(M)}function s(){i.on(".drag",null)}return{update:a,destroy:s}}var ub={exports:{}},db={},pb={exports:{}},fb={},Yo=v;function q5(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var H5=typeof Object.is=="function"?Object.is:q5,W5=Yo.useState,X5=Yo.useEffect,Q5=Yo.useLayoutEffect,Y5=Yo.useDebugValue;function G5(e,t){var n=t(),r=W5({inst:{value:n,getSnapshot:t}}),o=r[0].inst,i=r[1];return Q5(function(){o.value=n,o.getSnapshot=t,Lp(o)&&i({inst:o})},[e,n,t]),X5(function(){return Lp(o)&&i({inst:o}),e(function(){Lp(o)&&i({inst:o})})},[e]),Y5(n),n}function Lp(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!H5(e,n)}catch{return!0}}function K5(e,t){return t()}var Z5=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?K5:G5;fb.useSyncExternalStore=Yo.useSyncExternalStore!==void 0?Yo.useSyncExternalStore:Z5,pb.exports=fb,uc=pb.exports,oA=Ne(uc);var Hc=v,J5=uc;function e4(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var t4=typeof Object.is=="function"?Object.is:e4,n4=J5.useSyncExternalStore,r4=Hc.useRef,o4=Hc.useEffect,i4=Hc.useMemo,a4=Hc.useDebugValue;db.useSyncExternalStoreWithSelector=function(e,t,n,r,o){var i=r4(null);if(i.current===null){var a={hasValue:!1,value:null};i.current=a}else a=i.current;i=i4(function(){function c(f){if(!l){if(l=!0,u=f,f=r(f),o!==void 0&&a.hasValue){var y=a.value;if(o(y,f))return d=y}return d=f}if(y=d,t4(u,f))return y;var m=r(f);return o!==void 0&&o(y,m)?y:(u=f,d=m)}var l=!1,u,d,p=n===void 0?null:n;return[function(){return c(t())},p===null?void 0:function(){return c(p())}]},[t,n,r,o]);var s=n4(e,i[0],i[1]);return o4(function(){a.hasValue=!0,a.value=s},[s]),a4(s),s},ub.exports=db;var s4=ub.exports;let hb,Bp,mb,yb,gb,vb;tv=Ne(s4),hb={BASE_URL:"/NoLLMChat/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},Bp=e=>{let t;const n=new Set,r=(s,c)=>{const l=typeof s=="function"?s(t):s;if(!Object.is(l,t)){const u=t;t=c??(typeof l!="object"||l===null)?l:Object.assign({},t,l),n.forEach(d=>d(t,u))}},o=()=>t,i={setState:r,getState:o,getInitialState:()=>a,subscribe:s=>(n.add(s),()=>n.delete(s)),destroy:()=>{(hb?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},a=t=e(r,o,i);return i},mb=e=>e?Bp(e):Bp,{useDebugValue:yb}=$,{useSyncExternalStoreWithSelector:gb}=tv,vb=e=>e;function bb(e,t=vb,n){const r=gb(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return yb(r),r}const xb=(e,t)=>{const n=mb(e),r=(o,i=t)=>bb(n,o,i);return Object.assign(r,n),r},c4=(e,t)=>e?xb(e,t):xb;function Ke(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,o]of e)if(!Object.is(o,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}const Wc=v.createContext(null),l4=Wc.Provider,wb=or.error001();function Pe(e,t){const n=v.useContext(Wc);if(n===null)throw new Error(wb);return bb(n,e,t)}function Qe(){const e=v.useContext(Wc);if(e===null)throw new Error(wb);return v.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])}const _b={display:"none"},u4={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},jb="react-flow__node-desc",Ob="react-flow__edge-desc",d4="react-flow__aria-live",p4=e=>e.ariaLiveMessage;function f4({rfId:e}){const t=Pe(p4);return h.jsx("div",{id:`${d4}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:u4,children:t})}function h4({rfId:e,disableKeyboardA11y:t}){return h.jsxs(h.Fragment,{children:[h.jsxs("div",{id:`${jb}-${e}`,style:_b,children:["Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "]}),h.jsx("div",{id:`${Ob}-${e}`,style:_b,children:"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."}),!t&&h.jsx(f4,{rfId:e})]})}const m4=e=>e.userSelectionActive?"none":"all";function $p({position:e="top-left",children:t,className:n,style:r,...o}){const i=Pe(m4),a=`${e}`.split("-");return h.jsx("div",{className:ot(["react-flow__panel",n,...a]),style:{...r,pointerEvents:i},...o,children:t})}function y4({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:h.jsx($p,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:h.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const g4=e=>{const t=[],n=[];for(const[,r]of e.nodeLookup)r.selected&&t.push(r.internals.userNode);for(const[,r]of e.edgeLookup)r.selected&&n.push(r);return{selectedNodes:t,selectedEdges:n}},Xc=e=>e.id;function v4(e,t){return Ke(e.selectedNodes.map(Xc),t.selectedNodes.map(Xc))&&Ke(e.selectedEdges.map(Xc),t.selectedEdges.map(Xc))}function b4({onSelectionChange:e}){const t=Qe(),{selectedNodes:n,selectedEdges:r}=Pe(g4,v4);return v.useEffect(()=>{const o={nodes:n,edges:r};e==null||e(o),t.getState().onSelectionChangeHandlers.forEach(i=>i(o))},[n,r,e]),null}const x4=e=>!!e.onSelectionChangeHandlers;function w4({onSelectionChange:e}){const t=Pe(x4);return e||t?h.jsx(b4,{onSelectionChange:e}):null}const Eb=[0,0],_4={x:0,y:0,zoom:1},j4=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","onBeforeDelete","debug","autoPanSpeed","paneClickDistance"],Sb=[...j4,"rfId"],O4=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setPaneClickDistance:e.setPaneClickDistance}),Mb={translateExtent:Sa,nodeOrigin:Eb,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1",paneClickDistance:0};function E4(e){const{setNodes:t,setEdges:n,setMinZoom:r,setMaxZoom:o,setTranslateExtent:i,setNodeExtent:a,reset:s,setDefaultNodesAndEdges:c,setPaneClickDistance:l}=Pe(O4,Ke),u=Qe();v.useEffect(()=>(c(e.defaultNodes,e.defaultEdges),()=>{d.current=Mb,s()}),[]);const d=v.useRef(Mb);return v.useEffect(()=>{for(const p of Sb){const f=e[p],y=d.current[p];f!==y&&(typeof e[p]>"u"||(p==="nodes"?t(f):p==="edges"?n(f):p==="minZoom"?r(f):p==="maxZoom"?o(f):p==="translateExtent"?i(f):p==="nodeExtent"?a(f):p==="paneClickDistance"?l(f):p==="fitView"?u.setState({fitViewOnInit:f}):p==="fitViewOptions"?u.setState({fitViewOnInitOptions:f}):u.setState({[p]:f})))}d.current=e},Sb.map(p=>e[p])),null}function Cb(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function S4(e){var r;const[t,n]=v.useState(e==="system"?null:e);return v.useEffect(()=>{if(e!=="system"){n(e);return}const o=Cb(),i=()=>n(o!=null&&o.matches?"dark":"light");return i(),o==null||o.addEventListener("change",i),()=>{o==null||o.removeEventListener("change",i)}},[e]),t!==null?t:(r=Cb())!=null&&r.matches?"dark":"light"}const Pb=typeof document<"u"?document:null;function Ia(e=null,t={target:Pb,actInsideInputWithModifier:!0}){const[n,r]=v.useState(!1),o=v.useRef(!1),i=v.useRef(new Set([])),[a,s]=v.useMemo(()=>{if(e!==null){const c=(Array.isArray(e)?e:[e]).filter(u=>typeof u=="string").map(u=>u.replace("+",`
`).replace(`

`,`
+`).split(`
`)),l=c.reduce((u,d)=>u.concat(...d),[]);return[c,l]}return[[],[]]},[e]);return v.useEffect(()=>{const c=(t==null?void 0:t.target)||Pb;if(e!==null){const l=p=>{if(o.current=p.ctrlKey||p.metaKey||p.shiftKey,(!o.current||o.current&&!t.actInsideInputWithModifier)&&Ep(p))return!1;const f=kb(p.code,s);i.current.add(p[f]),Nb(a,i.current,!1)&&(p.preventDefault(),r(!0))},u=p=>{if((!o.current||o.current&&!t.actInsideInputWithModifier)&&Ep(p))return!1;const f=kb(p.code,s);Nb(a,i.current,!0)?(r(!1),i.current.clear()):i.current.delete(p[f]),p.key==="Meta"&&i.current.clear(),o.current=!1},d=()=>{i.current.clear(),r(!1)};return c==null||c.addEventListener("keydown",l),c==null||c.addEventListener("keyup",u),window.addEventListener("blur",d),window.addEventListener("contextmenu",d),()=>{c==null||c.removeEventListener("keydown",l),c==null||c.removeEventListener("keyup",u),window.removeEventListener("blur",d),window.removeEventListener("contextmenu",d)}}},[e,r]),n}function Nb(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(o=>t.has(o)))}function kb(e,t){return t.includes(e)?"code":"key"}const M4=()=>{const e=Qe();return v.useMemo(()=>({zoomIn:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomOut:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1/1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomTo:(t,n)=>{const{panZoom:r}=e.getState();return r?r.scaleTo(t,{duration:n==null?void 0:n.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(t,n)=>{const{transform:[r,o,i],panZoom:a}=e.getState();return a?(await a.setViewport({x:t.x??r,y:t.y??o,zoom:t.zoom??i},{duration:n==null?void 0:n.duration}),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[t,n,r]=e.getState().transform;return{x:t,y:n,zoom:r}},fitView:t=>{const{nodeLookup:n,minZoom:r,maxZoom:o,panZoom:i,domNode:a}=e.getState();if(!i||!a)return Promise.resolve(!1);const s=wp(n,t),{width:c,height:l}=zc(a);return _p({nodes:s,width:c,height:l,minZoom:r,maxZoom:o,panZoom:i},t)},setCenter:async(t,n,r)=>{const{width:o,height:i,maxZoom:a,panZoom:s}=e.getState(),c=typeof(r==null?void 0:r.zoom)<"u"?r.zoom:a,l=o/2-t*c,u=i/2-n*c;return s?(await s.setViewport({x:l,y:u,zoom:c},{duration:r==null?void 0:r.duration}),Promise.resolve(!0)):Promise.resolve(!1)},fitBounds:async(t,n)=>{const{width:r,height:o,minZoom:i,maxZoom:a,panZoom:s}=e.getState(),c=Op(t,r,o,i,a,(n==null?void 0:n.padding)??.1);return s?(await s.setViewport(c,{duration:n==null?void 0:n.duration}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(t,n={snapToGrid:!0})=>{const{transform:r,snapGrid:o,domNode:i}=e.getState();if(!i)return t;const{x:a,y:s}=i.getBoundingClientRect(),c={x:t.x-a,y:t.y-s};return ka(c,r,n.snapToGrid,o)},flowToScreenPosition:t=>{const{transform:n,domNode:r}=e.getState();if(!r)return t;const{x:o,y:i}=r.getBoundingClientRect(),a=D0(t,n);return{x:a.x+o,y:a.y+i}}}),[])};function Ab(e,t){const n=[],r=new Map,o=[];for(const i of e)if(i.type==="add"){o.push(i);continue}else if(i.type==="remove"||i.type==="replace")r.set(i.id,[i]);else{const a=r.get(i.id);a?a.push(i):r.set(i.id,[i])}for(const i of t){const a=r.get(i.id);if(!a){n.push(i);continue}if(a[0].type==="remove")continue;if(a[0].type==="replace"){n.push({...a[0].item});continue}const s={...i};for(const c of a)C4(c,s);n.push(s)}return o.length&&o.forEach(i=>{i.index!==void 0?n.splice(i.index,0,{...i.item}):n.push({...i.item})}),n}function C4(e,t){switch(e.type){case"select":{t.selected=e.selected;break}case"position":{typeof e.position<"u"&&(t.position=e.position),typeof e.dragging<"u"&&(t.dragging=e.dragging);break}case"dimensions":{typeof e.dimensions<"u"&&(t.measured??(t.measured={}),t.measured.width=e.dimensions.width,t.measured.height=e.dimensions.height,e.setAttributes&&(t.width=e.dimensions.width,t.height=e.dimensions.height)),typeof e.resizing=="boolean"&&(t.resizing=e.resizing);break}}}function eo(e,t){return Ab(e,t)}function Da(e,t){return Ab(e,t)}function to(e,t){return{id:e,type:"select",selected:t}}function Go(e,t=new Set,n=!1){const r=[];for(const[o,i]of e){const a=t.has(o);!(i.selected===void 0&&!a)&&i.selected!==a&&(n&&(i.selected=a),r.push(to(i.id,a)))}return r}function Tb({items:e=[],lookup:t}){var o;const n=[],r=new Map(e.map(i=>[i.id,i]));for(const[i,a]of e.entries()){const s=t.get(a.id),c=((o=s==null?void 0:s.internals)==null?void 0:o.userNode)??s;c!==void 0&&c!==a&&n.push({id:a.id,item:a,type:"replace"}),c===void 0&&n.push({item:a,type:"add",index:i})}for(const[i]of t)r.get(i)===void 0&&n.push({id:i,type:"remove"});return n}function Ib(e){return{id:e.id,type:"remove"}}const Db=e=>ZI(e),P4=e=>M0(e);function Rb(e){return v.forwardRef(e)}const N4=typeof window<"u"?v.useLayoutEffect:v.useEffect;function Lb(e){const[t,n]=v.useState(BigInt(0)),[r]=v.useState(()=>k4(()=>n(o=>o+BigInt(1))));return N4(()=>{const o=r.get();o.length&&(e(o),r.reset())},[t]),r}function k4(e){let t=[];return{get:()=>t,reset:()=>{t=[]},push:n=>{t.push(n),e()}}}const Bb=v.createContext(null);function A4({children:e}){const t=Qe(),n=v.useCallback(s=>{const{nodes:c=[],setNodes:l,hasDefaultNodes:u,onNodesChange:d,nodeLookup:p}=t.getState();let f=c;for(const y of s)f=typeof y=="function"?y(f):y;u?l(f):d&&d(Tb({items:f,lookup:p}))},[]),r=Lb(n),o=v.useCallback(s=>{const{edges:c=[],setEdges:l,hasDefaultEdges:u,onEdgesChange:d,edgeLookup:p}=t.getState();let f=c;for(const y of s)f=typeof y=="function"?y(f):y;u?l(f):d&&d(Tb({items:f,lookup:p}))},[]),i=Lb(o),a=v.useMemo(()=>({nodeQueue:r,edgeQueue:i}),[]);return h.jsx(Bb.Provider,{value:a,children:e})}function T4(){const e=v.useContext(Bb);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}const I4=e=>!!e.panZoom;function Fn(){const e=M4(),t=Qe(),n=T4(),r=Pe(I4),o=v.useMemo(()=>{const i=d=>t.getState().nodeLookup.get(d),a=d=>{n.nodeQueue.push(d)},s=d=>{n.edgeQueue.push(d)},c=d=>{var b,w;const{nodeLookup:p,nodeOrigin:f}=t.getState(),y=Db(d)?d:p.get(d.id),m=y.parentId?L0(y.position,y.measured,y.parentId,p,f):y.position,g={id:y.id,position:m,width:((b=y.measured)==null?void 0:b.width)??y.width,height:((w=y.measured)==null?void 0:w.height)??y.height,data:y.data};return Ho(g)},l=(d,p,f={replace:!1})=>{a(y=>y.map(m=>{if(m.id===d){const g=typeof p=="function"?p(m):p;return f.replace&&Db(g)?g:{...m,...g}}return m}))},u=(d,p,f={replace:!1})=>{s(y=>y.map(m=>{if(m.id===d){const g=typeof p=="function"?p(m):p;return f.replace&&P4(g)?g:{...m,...g}}return m}))};return{getNodes:()=>t.getState().nodes.map(d=>({...d})),getNode:d=>{var p;return(p=i(d))==null?void 0:p.internals.userNode},getInternalNode:i,getEdges:()=>{const{edges:d=[]}=t.getState();return d.map(p=>({...p}))},getEdge:d=>t.getState().edgeLookup.get(d),setNodes:a,setEdges:s,addNodes:d=>{const p=Array.isArray(d)?d:[d];n.nodeQueue.push(f=>[...f,...p])},addEdges:d=>{const p=Array.isArray(d)?d:[d];n.edgeQueue.push(f=>[...f,...p])},toObject:()=>{const{nodes:d=[],edges:p=[],transform:f}=t.getState(),[y,m,g]=f;return{nodes:d.map(b=>({...b})),edges:p.map(b=>({...b})),viewport:{x:y,y:m,zoom:g}}},deleteElements:async({nodes:d=[],edges:p=[]})=>{const{nodes:f,edges:y,onNodesDelete:m,onEdgesDelete:g,triggerNodeChanges:b,triggerEdgeChanges:w,onDelete:_,onBeforeDelete:x}=t.getState(),{nodes:j,edges:O}=await t5({nodesToRemove:d,edgesToRemove:p,nodes:f,edges:y,onBeforeDelete:x}),E=O.length>0,M=j.length>0;if(E){const N=O.map(Ib);g==null||g(O),w(N)}if(M){const N=j.map(Ib);m==null||m(j),b(N)}return(M||E)&&(_==null||_({nodes:j,edges:O})),{deletedNodes:j,deletedEdges:O}},getIntersectingNodes:(d,p=!0,f)=>{const y=I0(d),m=y?d:c(d),g=f!==void 0;return m?(f||t.getState().nodes).filter(b=>{const w=t.getState().nodeLookup.get(b.id);if(w&&!y&&(b.id===d.id||!w.internals.positionAbsolute))return!1;const _=Ho(g?b:w),x=Na(_,m);return p&&x>0||x>=m.width*m.height}):[]},isNodeIntersecting:(d,p,f=!0)=>{const y=I0(d)?d:c(d);if(!y)return!1;const m=Na(y,p);return f&&m>0||m>=y.width*y.height},updateNode:l,updateNodeData:(d,p,f={replace:!1})=>{l(d,y=>{const m=typeof p=="function"?p(y):p;return f.replace?{...y,data:m}:{...y,data:{...y.data,...m}}},f)},updateEdge:u,updateEdgeData:(d,p,f={replace:!1})=>{u(d,y=>{const m=typeof p=="function"?p(y):p;return f.replace?{...y,data:m}:{...y,data:{...y.data,...m}}},f)},getNodesBounds:d=>{const{nodeLookup:p,nodeOrigin:f}=t.getState();return JI(d,{nodeLookup:p,nodeOrigin:f})},getHandleConnections:({type:d,id:p,nodeId:f})=>{var y;return Array.from(((y=t.getState().connectionLookup.get(`${f}-${d}-${p??null}`))==null?void 0:y.values())??[])}}},[]);return v.useMemo(()=>({...o,...e,viewportInitialized:r}),[r])}const $b=e=>e.selected,D4={actInsideInputWithModifier:!1},R4=typeof window<"u"?window:void 0;function L4({deleteKeyCode:e,multiSelectionKeyCode:t}){const n=Qe(),{deleteElements:r}=Fn(),o=Ia(e,D4),i=Ia(t,{target:R4});v.useEffect(()=>{if(o){const{edges:a,nodes:s}=n.getState();r({nodes:s.filter($b),edges:a.filter($b)}),n.setState({nodesSelectionActive:!1})}},[o]),v.useEffect(()=>{n.setState({multiSelectionActive:i})},[i])}function B4(e){const t=Qe();v.useEffect(()=>{const n=()=>{var o,i;if(!e.current)return!1;const r=zc(e.current);(r.height===0||r.width===0)&&((i=(o=t.getState()).onError)==null||i.call(o,"004",or.error004())),t.setState({width:r.width||500,height:r.height||500})};if(e.current){n(),window.addEventListener("resize",n);const r=new ResizeObserver(()=>n());return r.observe(e.current),()=>{window.removeEventListener("resize",n),r&&e.current&&r.unobserve(e.current)}}},[])}const Qc={position:"absolute",width:"100%",height:"100%",top:0,left:0},$4=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib});function F4({onPaneContextMenu:e,zoomOnScroll:t=!0,zoomOnPinch:n=!0,panOnScroll:r=!1,panOnScrollSpeed:o=.5,panOnScrollMode:i=Sr.Free,zoomOnDoubleClick:a=!0,panOnDrag:s=!0,defaultViewport:c,translateExtent:l,minZoom:u,maxZoom:d,zoomActivationKeyCode:p,preventScrolling:f=!0,children:y,noWheelClassName:m,noPanClassName:g,onViewportChange:b,isControlledViewport:w,paneClickDistance:_}){const x=Qe(),j=v.useRef(null),{userSelectionActive:O,lib:E}=Pe($4,Ke),M=Ia(p),N=v.useRef();B4(j);const A=v.useCallback(P=>{b==null||b({x:P[0],y:P[1],zoom:P[2]}),w||x.setState({transform:P})},[b,w]);return v.useEffect(()=>{if(j.current){N.current=I5({domNode:j.current,minZoom:u,maxZoom:d,translateExtent:l,viewport:c,paneClickDistance:_,onDraggingChange:S=>x.setState({paneDragging:S}),onPanZoomStart:(S,C)=>{const{onViewportChangeStart:k,onMoveStart:D}=x.getState();D==null||D(S,C),k==null||k(C)},onPanZoom:(S,C)=>{const{onViewportChange:k,onMove:D}=x.getState();D==null||D(S,C),k==null||k(C)},onPanZoomEnd:(S,C)=>{const{onViewportChangeEnd:k,onMoveEnd:D}=x.getState();D==null||D(S,C),k==null||k(C)}});const{x:P,y:T,zoom:L}=N.current.getViewport();return x.setState({panZoom:N.current,transform:[P,T,L],domNode:j.current.closest(".react-flow")}),()=>{var S;(S=N.current)==null||S.destroy()}}},[]),v.useEffect(()=>{var P;(P=N.current)==null||P.update({onPaneContextMenu:e,zoomOnScroll:t,zoomOnPinch:n,panOnScroll:r,panOnScrollSpeed:o,panOnScrollMode:i,zoomOnDoubleClick:a,panOnDrag:s,zoomActivationKeyPressed:M,preventScrolling:f,noPanClassName:g,userSelectionActive:O,noWheelClassName:m,lib:E,onTransformChange:A})},[e,t,n,r,o,i,a,s,M,f,g,O,m,E,A]),h.jsx("div",{className:"react-flow__renderer",ref:j,style:Qc,children:y})}const z4=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function V4(){const{userSelectionActive:e,userSelectionRect:t}=Pe(z4,Ke);return e&&t?h.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}const Fp=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},U4=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging});function q4({isSelecting:e,selectionKeyPressed:t,selectionMode:n=Ma.Full,panOnDrag:r,selectionOnDrag:o,onSelectionStart:i,onSelectionEnd:a,onPaneClick:s,onPaneContextMenu:c,onPaneScroll:l,onPaneMouseEnter:u,onPaneMouseMove:d,onPaneMouseLeave:p,children:f}){const y=v.useRef(null),m=Qe(),g=v.useRef(0),b=v.useRef(0),w=v.useRef(),_=v.useRef(new Map),{userSelectionActive:x,elementsSelectable:j,dragging:O}=Pe(U4,Ke),E=j&&(e||x),M=v.useRef(!1),N=v.useRef(!1),A=()=>{m.setState({userSelectionActive:!1,userSelectionRect:null}),g.current=0,b.current=0},P=R=>{if(M.current){M.current=!1;return}s==null||s(R),m.getState().resetSelectedElements(),m.setState({nodesSelectionActive:!1})},T=R=>{if(Array.isArray(r)&&(r!=null&&r.includes(2))){R.preventDefault();return}c==null||c(R)},L=l?R=>l(R):void 0,S=R=>{var H,q,te,Q;const{resetSelectedElements:B,domNode:F,edgeLookup:V}=m.getState();if(w.current=F==null?void 0:F.getBoundingClientRect(),!j||!e||R.button!==0||R.target!==y.current||!w.current)return;(q=(H=R.target)==null?void 0:H.setPointerCapture)==null||q.call(H,R.pointerId),N.current=!0,M.current=!1,_.current=new Map;for(const[Z,Y]of V)_.current.set(Y.source,((te=_.current.get(Y.source))==null?void 0:te.add(Z))||new Set([Z])),_.current.set(Y.target,((Q=_.current.get(Y.target))==null?void 0:Q.add(Z))||new Set([Z]));const{x:I,y:X}=ar(R.nativeEvent,w.current);B(),m.setState({userSelectionRect:{width:0,height:0,startX:I,startY:X,x:I,y:X}}),i==null||i(R)},C=R=>{const{userSelectionRect:B,edgeLookup:F,transform:V,nodeLookup:I,triggerNodeChanges:X,triggerEdgeChanges:H}=m.getState();if(!w.current||!B)return;M.current=!0;const{x:q,y:te}=ar(R.nativeEvent,w.current),{startX:Q,startY:Z}=B,Y={startX:Q,startY:Z,x:q<Q?q:Q,y:te<Z?te:Z,width:Math.abs(q-Q),height:Math.abs(te-Z)},K=C0(I,Y,V,n===Ma.Partial,!0),ne=new Set,z=new Set;for(const ye of K){z.add(ye.id);const fe=_.current.get(ye.id);if(fe)for(const Oe of fe)ne.add(Oe)}if(g.current!==z.size){g.current=z.size;const ye=Go(I,z,!0);X(ye)}if(b.current!==ne.size){b.current=ne.size;const ye=Go(F,ne);H(ye)}m.setState({userSelectionRect:Y,userSelectionActive:!0,nodesSelectionActive:!1})},k=R=>{var F,V;if(R.button!==0||!N.current)return;(V=(F=R.target)==null?void 0:F.releasePointerCapture)==null||V.call(F,R.pointerId);const{userSelectionRect:B}=m.getState();!x&&B&&R.target===y.current&&(P==null||P(R)),g.current>0&&m.setState({nodesSelectionActive:!0}),A(),a==null||a(R),(t||o)&&(M.current=!1),N.current=!1},D=r===!0||Array.isArray(r)&&r.includes(0);return h.jsxs("div",{className:ot(["react-flow__pane",{draggable:D,dragging:O,selection:e}]),onClick:E?void 0:Fp(P,y),onContextMenu:Fp(T,y),onWheel:Fp(L,y),onPointerEnter:E?void 0:u,onPointerDown:E?S:d,onPointerMove:E?C:d,onPointerUp:E?k:void 0,onPointerLeave:p,ref:y,style:Qc,children:[f,h.jsx(V4,{})]})}function zp({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:o,unselectNodesAndEdges:i,multiSelectionActive:a,nodeLookup:s,onError:c}=t.getState(),l=s.get(e);if(!l){c==null||c("012",or.error012(e));return}t.setState({nodesSelectionActive:!1}),l.selected?(n||l.selected&&a)&&(i({nodes:[l],edges:[]}),requestAnimationFrame(()=>{var u;return(u=r==null?void 0:r.current)==null?void 0:u.blur()})):o([e])}function Fb({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:o,isSelectable:i,nodeClickDistance:a}){const s=Qe(),[c,l]=v.useState(!1),u=v.useRef();return v.useEffect(()=>{u.current=x5({getStoreItems:()=>s.getState(),onNodeMouseDown:d=>{zp({id:d,store:s,nodeRef:e})},onDragStart:()=>{l(!0)},onDragStop:()=>{l(!1)}})},[]),v.useEffect(()=>{var d,p;if(t)(d=u.current)==null||d.destroy();else if(e.current)return(p=u.current)==null||p.update({noDragClassName:n,handleSelector:r,domNode:e.current,isSelectable:i,nodeId:o,nodeClickDistance:a}),()=>{var f;(f=u.current)==null||f.destroy()}},[n,r,t,i,e,o]),c}const H4=e=>t=>t.selected&&(t.draggable||e&&typeof t.draggable>"u");function zb(){const e=Qe();return v.useCallback(t=>{const{nodeExtent:n,snapToGrid:r,snapGrid:o,nodesDraggable:i,onError:a,updateNodePositions:s,nodeLookup:c,nodeOrigin:l}=e.getState(),u=new Map,d=H4(i),p=r?o[0]:5,f=r?o[1]:5,y=t.direction.x*p*t.factor,m=t.direction.y*f*t.factor;for(const[,g]of c){if(!d(g))continue;let b={x:g.internals.positionAbsolute.x+y,y:g.internals.positionAbsolute.y+m};r&&(b=$c(b,o));const{position:w,positionAbsolute:_}=P0({nodeId:g.id,nextPosition:b,nodeLookup:c,nodeExtent:n,nodeOrigin:l,onError:a});g.position=w,g.internals.positionAbsolute=_,u.set(g.id,g)}s(u)},[])}const Vp=v.createContext(null),W4=Vp.Provider;Vp.Consumer;const Up=()=>v.useContext(Vp),X4=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),Q4=(e,t,n)=>r=>{const{connectionClickStartHandle:o,connectionMode:i,connection:a}=r,{fromHandle:s,toHandle:c,isValid:l}=a,u=(c==null?void 0:c.nodeId)===e&&(c==null?void 0:c.id)===t&&(c==null?void 0:c.type)===n;return{connectingFrom:(s==null?void 0:s.nodeId)===e&&(s==null?void 0:s.id)===t&&(s==null?void 0:s.type)===n,connectingTo:u,clickConnecting:(o==null?void 0:o.nodeId)===e&&(o==null?void 0:o.id)===t&&(o==null?void 0:o.type)===n,isPossibleEndHandle:i===Uo.Strict?(s==null?void 0:s.type)!==n:e!==(s==null?void 0:s.nodeId)||t!==(s==null?void 0:s.id),connectionInProcess:!!s,valid:u&&l}};function Y4({type:e="source",position:t=oe.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:o=!0,isConnectableEnd:i=!0,id:a,onConnect:s,children:c,className:l,onMouseDown:u,onTouchStart:d,...p},f){var S,C;const y=a||null,m=e==="target",g=Qe(),b=Up(),{connectOnClick:w,noPanClassName:_,rfId:x}=Pe(X4,Ke),{connectingFrom:j,connectingTo:O,clickConnecting:E,isPossibleEndHandle:M,connectionInProcess:N,valid:A}=Pe(Q4(b,y,e),Ke);b||((C=(S=g.getState()).onError)==null||C.call(S,"010",or.error010()));const P=k=>{const{defaultEdgeOptions:D,onConnect:R,hasDefaultEdges:B}=g.getState(),F={...D,...k};if(B){const{edges:V,setEdges:I}=g.getState();I(H0(F,V))}R==null||R(F),s==null||s(F)},T=k=>{if(!b)return;const D=$0(k.nativeEvent);if(o&&(D&&k.button===0||!D)){const R=g.getState();Ip.onPointerDown(k.nativeEvent,{autoPanOnConnect:R.autoPanOnConnect,connectionMode:R.connectionMode,connectionRadius:R.connectionRadius,domNode:R.domNode,nodeLookup:R.nodeLookup,lib:R.lib,isTarget:m,handleId:y,nodeId:b,flowId:R.rfId,panBy:R.panBy,cancelConnection:R.cancelConnection,onConnectStart:R.onConnectStart,onConnectEnd:R.onConnectEnd,updateConnection:R.updateConnection,onConnect:P,isValidConnection:n||R.isValidConnection,getTransform:()=>g.getState().transform,getFromHandle:()=>g.getState().connection.fromHandle,autoPanSpeed:R.autoPanSpeed})}D?u==null||u(k):d==null||d(k)},L=k=>{const{onClickConnectStart:D,onClickConnectEnd:R,connectionClickStartHandle:B,connectionMode:F,isValidConnection:V,lib:I,rfId:X,nodeLookup:H,connection:q}=g.getState();if(!b||!B&&!o)return;if(!B){D==null||D(k.nativeEvent,{nodeId:b,handleId:y,handleType:e}),g.setState({connectionClickStartHandle:{nodeId:b,type:e,id:y}});return}const te=B0(k.target),Q=n||V,{connection:Z,isValid:Y}=Ip.isValid(k.nativeEvent,{handle:{nodeId:b,id:y,type:e},connectionMode:F,fromNodeId:B.nodeId,fromHandleId:B.id||null,fromType:B.type,isValidConnection:Q,flowId:X,doc:te,lib:I,nodeLookup:H});Y&&Z&&P(Z);const K=structuredClone(q);delete K.inProgress,K.toPosition=K.toHandle?K.toHandle.position:null,R==null||R(k,K),g.setState({connectionClickStartHandle:null})};return h.jsx("div",{"data-handleid":y,"data-nodeid":b,"data-handlepos":t,"data-id":`${x}-${b}-${y}-${e}`,className:ot(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",_,l,{source:!m,target:m,connectable:r,connectablestart:o,connectableend:i,clickconnecting:E,connectingfrom:j,connectingto:O,valid:A,connectionindicator:r&&(!N||M)&&(N?i:o)}]),onMouseDown:T,onTouchStart:T,onClick:w?L:void 0,ref:f,...p,children:c})}const Ra=v.memo(Rb(Y4));function G4({data:e,isConnectable:t,sourcePosition:n=oe.Bottom}){return h.jsxs(h.Fragment,{children:[e==null?void 0:e.label,h.jsx(Ra,{type:"source",position:n,isConnectable:t})]})}function K4({data:e,isConnectable:t,targetPosition:n=oe.Top,sourcePosition:r=oe.Bottom}){return h.jsxs(h.Fragment,{children:[h.jsx(Ra,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,h.jsx(Ra,{type:"source",position:r,isConnectable:t})]})}function Z4(){return null}function J4({data:e,isConnectable:t,targetPosition:n=oe.Top}){return h.jsxs(h.Fragment,{children:[h.jsx(Ra,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label]})}const Yc={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},Vb={input:G4,default:K4,output:J4,group:Z4};function eD(e){var t,n,r,o;return e.internals.handleBounds===void 0?{width:e.width??e.initialWidth??((t=e.style)==null?void 0:t.width),height:e.height??e.initialHeight??((n=e.style)==null?void 0:n.height)}:{width:e.width??((r=e.style)==null?void 0:r.width),height:e.height??((o=e.style)==null?void 0:o.height)}}const tD=e=>{const{width:t,height:n,x:r,y:o}=Pa(e.nodeLookup,{filter:i=>!!i.selected});return{width:jn(t)?t:null,height:jn(n)?n:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${r}px,${o}px)`}};function nD({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=Qe(),{width:o,height:i,transformString:a,userSelectionActive:s}=Pe(tD,Ke),c=zb(),l=v.useRef(null);if(v.useEffect(()=>{var p;n||((p=l.current)==null||p.focus({preventScroll:!0}))},[n]),Fb({nodeRef:l}),s||!o||!i)return null;const u=e?p=>{const f=r.getState().nodes.filter(y=>y.selected);e(p,f)}:void 0,d=p=>{Object.prototype.hasOwnProperty.call(Yc,p.key)&&c({direction:Yc[p.key],factor:p.shiftKey?4:1})};return h.jsx("div",{className:ot(["react-flow__nodesselection","react-flow__container",t]),style:{transform:a},children:h.jsx("div",{ref:l,className:"react-flow__nodesselection-rect",onContextMenu:u,tabIndex:n?void 0:-1,onKeyDown:n?void 0:d,style:{width:o,height:i}})})}const Ub=typeof window<"u"?window:void 0,rD=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function qb({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:o,onPaneContextMenu:i,onPaneScroll:a,paneClickDistance:s,deleteKeyCode:c,selectionKeyCode:l,selectionOnDrag:u,selectionMode:d,onSelectionStart:p,onSelectionEnd:f,multiSelectionKeyCode:y,panActivationKeyCode:m,zoomActivationKeyCode:g,elementsSelectable:b,zoomOnScroll:w,zoomOnPinch:_,panOnScroll:x,panOnScrollSpeed:j,panOnScrollMode:O,zoomOnDoubleClick:E,panOnDrag:M,defaultViewport:N,translateExtent:A,minZoom:P,maxZoom:T,preventScrolling:L,onSelectionContextMenu:S,noWheelClassName:C,noPanClassName:k,disableKeyboardA11y:D,onViewportChange:R,isControlledViewport:B}){const{nodesSelectionActive:F,userSelectionActive:V}=Pe(rD),I=Ia(l,{target:Ub}),X=Ia(m,{target:Ub}),H=X||M,q=X||x,te=u&&H!==!0,Q=I||V||te;return L4({deleteKeyCode:c,multiSelectionKeyCode:y}),h.jsx(F4,{onPaneContextMenu:i,elementsSelectable:b,zoomOnScroll:w,zoomOnPinch:_,panOnScroll:q,panOnScrollSpeed:j,panOnScrollMode:O,zoomOnDoubleClick:E,panOnDrag:!I&&H,defaultViewport:N,translateExtent:A,minZoom:P,maxZoom:T,zoomActivationKeyCode:g,preventScrolling:L,noWheelClassName:C,noPanClassName:k,onViewportChange:R,isControlledViewport:B,paneClickDistance:s,children:h.jsxs(q4,{onSelectionStart:p,onSelectionEnd:f,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:o,onPaneContextMenu:i,onPaneScroll:a,panOnDrag:H,isSelecting:!!Q,selectionMode:d,selectionKeyPressed:I,selectionOnDrag:te,children:[e,F&&h.jsx(nD,{onSelectionContextMenu:S,noPanClassName:k,disableKeyboardA11y:D})]})})}qb.displayName="FlowRenderer";const oD=v.memo(qb),iD=e=>t=>e?C0(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map(n=>n.id):Array.from(t.nodeLookup.keys());function aD(e){return Pe(v.useCallback(iD(e),[e]),Ke)}const sD=e=>e.updateNodeInternals;function cD(){const e=Pe(sD),[t]=v.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(n=>{const r=new Map;n.forEach(o=>{const i=o.target.getAttribute("data-id");r.set(i,{id:i,nodeElement:o.target,force:!0})}),e(r)}));return v.useEffect(()=>()=>{t==null||t.disconnect()},[t]),t}function lD({node:e,nodeType:t,hasDimensions:n,resizeObserver:r}){const o=Qe(),i=v.useRef(null),a=v.useRef(null),s=v.useRef(e.sourcePosition),c=v.useRef(e.targetPosition),l=v.useRef(t),u=n&&!!e.internals.handleBounds;return v.useEffect(()=>{i.current&&!e.hidden&&(!u||a.current!==i.current)&&(a.current&&(r==null||r.unobserve(a.current)),r==null||r.observe(i.current),a.current=i.current)},[u,e.hidden]),v.useEffect(()=>()=>{a.current&&(r==null||r.unobserve(a.current),a.current=null)},[]),v.useEffect(()=>{if(i.current){const d=l.current!==t,p=s.current!==e.sourcePosition,f=c.current!==e.targetPosition;(d||p||f)&&(l.current=t,s.current=e.sourcePosition,c.current=e.targetPosition,o.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:i.current,force:!0}]])))}},[e.id,t,e.sourcePosition,e.targetPosition]),i}function uD({id:e,onClick:t,onMouseEnter:n,onMouseMove:r,onMouseLeave:o,onContextMenu:i,onDoubleClick:a,nodesDraggable:s,elementsSelectable:c,nodesConnectable:l,nodesFocusable:u,resizeObserver:d,noDragClassName:p,noPanClassName:f,disableKeyboardA11y:y,rfId:m,nodeTypes:g,nodeExtent:b,nodeClickDistance:w,onError:_}){const{node:x,internals:j,isParent:O}=Pe(Z=>{const Y=Z.nodeLookup.get(e),K=Z.parentLookup.has(e);return{node:Y,internals:Y.internals,isParent:K}},Ke);let E=x.type||"default",M=(g==null?void 0:g[E])||Vb[E];M===void 0&&(_==null||_("003",or.error003(E)),E="default",M=Vb.default);const N=!!(x.draggable||s&&typeof x.draggable>"u"),A=!!(x.selectable||c&&typeof x.selectable>"u"),P=!!(x.connectable||l&&typeof x.connectable>"u"),T=!!(x.focusable||u&&typeof x.focusable>"u"),L=Qe(),S=R0(x),C=lD({node:x,nodeType:E,hasDimensions:S,resizeObserver:d}),k=Fb({nodeRef:C,disabled:x.hidden||!N,noDragClassName:p,handleSelector:x.dragHandle,nodeId:e,isSelectable:A,nodeClickDistance:w}),D=zb();if(x.hidden)return null;const R=ir(x),B=eD(x),F=A||N||t||n||r||o,V=n?Z=>n(Z,{...j.userNode}):void 0,I=r?Z=>r(Z,{...j.userNode}):void 0,X=o?Z=>o(Z,{...j.userNode}):void 0,H=i?Z=>i(Z,{...j.userNode}):void 0,q=a?Z=>a(Z,{...j.userNode}):void 0,te=Z=>{const{selectNodesOnDrag:Y,nodeDragThreshold:K}=L.getState();A&&(!Y||!N||K>0)&&zp({id:e,store:L,nodeRef:C}),t&&t(Z,{...j.userNode})},Q=Z=>{if(!(Ep(Z.nativeEvent)||y))if(_0.includes(Z.key)&&A){const Y=Z.key==="Escape";zp({id:e,store:L,unselect:Y,nodeRef:C})}else N&&x.selected&&Object.prototype.hasOwnProperty.call(Yc,Z.key)&&(L.setState({ariaLiveMessage:`Moved selected node ${Z.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~j.positionAbsolute.x}, y: ${~~j.positionAbsolute.y}`}),D({direction:Yc[Z.key],factor:Z.shiftKey?4:1}))};return h.jsx("div",{className:ot(["react-flow__node",`react-flow__node-${E}`,{[f]:N},x.className,{selected:x.selected,selectable:A,parent:O,draggable:N,dragging:k}]),ref:C,style:{zIndex:j.z,transform:`translate(${j.positionAbsolute.x}px,${j.positionAbsolute.y}px)`,pointerEvents:F?"all":"none",visibility:S?"visible":"hidden",...x.style,...B},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:V,onMouseMove:I,onMouseLeave:X,onContextMenu:H,onClick:te,onDoubleClick:q,onKeyDown:T?Q:void 0,tabIndex:T?0:void 0,role:T?"button":void 0,"aria-describedby":y?void 0:`${jb}-${m}`,"aria-label":x.ariaLabel,children:h.jsx(W4,{value:e,children:h.jsx(M,{id:e,data:x.data,type:E,positionAbsoluteX:j.positionAbsolute.x,positionAbsoluteY:j.positionAbsolute.y,selected:x.selected,selectable:A,draggable:N,deletable:x.deletable??!0,isConnectable:P,sourcePosition:x.sourcePosition,targetPosition:x.targetPosition,dragging:k,dragHandle:x.dragHandle,zIndex:j.z,parentId:x.parentId,...R})})})}const dD=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function Hb(e){const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:o,onError:i}=Pe(dD,Ke),a=aD(e.onlyRenderVisibleElements),s=cD();return h.jsx("div",{className:"react-flow__nodes",style:Qc,children:a.map(c=>h.jsx(uD,{id:c,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:s,nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:o,nodeClickDistance:e.nodeClickDistance,onError:i},c))})}Hb.displayName="NodeRenderer";const pD=v.memo(Hb);function fD(e){return Pe(v.useCallback(t=>{if(!e)return t.edges.map(r=>r.id);const n=[];if(t.width&&t.height)for(const r of t.edges){const o=t.nodeLookup.get(r.source),i=t.nodeLookup.get(r.target);o&&i&&i5({sourceNode:o,targetNode:i,width:t.width,height:t.height,transform:t.transform})&&n.push(r.id)}return n},[e]),Ke)}const hD=({color:e="none",strokeWidth:t=1})=>h.jsx("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),mD=({color:e="none",strokeWidth:t=1})=>h.jsx("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),Wb={[Dc.Arrow]:hD,[Dc.ArrowClosed]:mD};function yD(e){const t=Qe();return v.useMemo(()=>{var n,r;return Object.prototype.hasOwnProperty.call(Wb,e)?Wb[e]:((r=(n=t.getState()).onError)==null||r.call(n,"009",or.error009(e)),null)},[e])}const gD=({id:e,type:t,color:n,width:r=12.5,height:o=12.5,markerUnits:i="strokeWidth",strokeWidth:a,orient:s="auto-start-reverse"})=>{const c=yD(t);return c?h.jsx("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${o}`,viewBox:"-10 -10 20 20",markerUnits:i,orient:s,refX:"0",refY:"0",children:h.jsx(c,{color:n,strokeWidth:a})}):null},Xb=({defaultColor:e,rfId:t})=>{const n=Pe(i=>i.edges),r=Pe(i=>i.defaultEdgeOptions),o=v.useMemo(()=>p5(n,{id:t,defaultColor:e,defaultMarkerStart:r==null?void 0:r.markerStart,defaultMarkerEnd:r==null?void 0:r.markerEnd}),[n,r,t,e]);return o.length?h.jsx("svg",{className:"react-flow__marker",children:h.jsx("defs",{children:o.map(i=>h.jsx(gD,{id:i.id,type:i.type,color:i.color,width:i.width,height:i.height,markerUnits:i.markerUnits,strokeWidth:i.strokeWidth,orient:i.orient},i.id))})}):null};Xb.displayName="MarkerDefinitions";var vD=v.memo(Xb);function Qb({x:e,y:t,label:n,labelStyle:r={},labelShowBg:o=!0,labelBgStyle:i={},labelBgPadding:a=[2,4],labelBgBorderRadius:s=2,children:c,className:l,...u}){const[d,p]=v.useState({x:1,y:0,width:0,height:0}),f=ot(["react-flow__edge-textwrapper",l]),y=v.useRef(null);return v.useEffect(()=>{if(y.current){const m=y.current.getBBox();p({x:m.x,y:m.y,width:m.width,height:m.height})}},[n]),typeof n>"u"||!n?null:h.jsxs("g",{transform:`translate(${e-d.width/2} ${t-d.height/2})`,className:f,visibility:d.width?"visible":"hidden",...u,children:[o&&h.jsx("rect",{width:d.width+2*a[0],x:-a[0],y:-a[1],height:d.height+2*a[1],className:"react-flow__edge-textbg",style:i,rx:s,ry:s}),h.jsx("text",{className:"react-flow__edge-text",y:d.height/2,dy:"0.3em",ref:y,style:r,children:n}),c]})}Qb.displayName="EdgeText";const bD=v.memo(Qb);function Gc({id:e,path:t,labelX:n,labelY:r,label:o,labelStyle:i,labelShowBg:a,labelBgStyle:s,labelBgPadding:c,labelBgBorderRadius:l,style:u,markerEnd:d,markerStart:p,className:f,interactionWidth:y=20}){return h.jsxs(h.Fragment,{children:[h.jsx("path",{id:e,style:u,d:t,fill:"none",className:ot(["react-flow__edge-path",f]),markerEnd:d,markerStart:p}),y&&h.jsx("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:y,className:"react-flow__edge-interaction"}),o&&jn(n)&&jn(r)?h.jsx(bD,{x:n,y:r,label:o,labelStyle:i,labelShowBg:a,labelBgStyle:s,labelBgPadding:c,labelBgBorderRadius:l}):null]})}function Yb({pos:e,x1:t,y1:n,x2:r,y2:o}){return e===oe.Left||e===oe.Right?[.5*(t+r),n]:[t,.5*(n+o)]}function Gb({sourceX:e,sourceY:t,sourcePosition:n=oe.Bottom,targetX:r,targetY:o,targetPosition:i=oe.Top}){const[a,s]=Yb({pos:n,x1:e,y1:t,x2:r,y2:o}),[c,l]=Yb({pos:i,x1:r,y1:o,x2:e,y2:t}),[u,d,p,f]=z0({sourceX:e,sourceY:t,targetX:r,targetY:o,sourceControlX:a,sourceControlY:s,targetControlX:c,targetControlY:l});return[`M${e},${t} C${a},${s} ${c},${l} ${r},${o}`,u,d,p,f]}function Kb(e){return v.memo(({id:t,sourceX:n,sourceY:r,targetX:o,targetY:i,sourcePosition:a=oe.Bottom,targetPosition:s=oe.Top,label:c,labelStyle:l,labelShowBg:u,labelBgStyle:d,labelBgPadding:p,labelBgBorderRadius:f,style:y,markerEnd:m,markerStart:g,interactionWidth:b})=>{const[w,_,x]=Gb({sourceX:n,sourceY:r,sourcePosition:a,targetX:o,targetY:i,targetPosition:s}),j=e.isInternal?void 0:t;return h.jsx(Gc,{id:j,path:w,labelX:_,labelY:x,label:c,labelStyle:l,labelShowBg:u,labelBgStyle:d,labelBgPadding:p,labelBgBorderRadius:f,style:y,markerEnd:m,markerStart:g,interactionWidth:b})})}const xD=Kb({isInternal:!1}),Zb=Kb({isInternal:!0});xD.displayName="SimpleBezierEdge",Zb.displayName="SimpleBezierEdgeInternal";function Jb(e){return v.memo(({id:t,sourceX:n,sourceY:r,targetX:o,targetY:i,label:a,labelStyle:s,labelShowBg:c,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:d,style:p,sourcePosition:f=oe.Bottom,targetPosition:y=oe.Top,markerEnd:m,markerStart:g,pathOptions:b,interactionWidth:w})=>{const[_,x,j]=Sp({sourceX:n,sourceY:r,sourcePosition:f,targetX:o,targetY:i,targetPosition:y,borderRadius:b==null?void 0:b.borderRadius,offset:b==null?void 0:b.offset}),O=e.isInternal?void 0:t;return h.jsx(Gc,{id:O,path:_,labelX:x,labelY:j,label:a,labelStyle:s,labelShowBg:c,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:d,style:p,markerEnd:m,markerStart:g,interactionWidth:w})})}const ex=Jb({isInternal:!1}),tx=Jb({isInternal:!0});ex.displayName="SmoothStepEdge",tx.displayName="SmoothStepEdgeInternal";function nx(e){return v.memo(({id:t,...n})=>{var o;const r=e.isInternal?void 0:t;return h.jsx(ex,{...n,id:r,pathOptions:v.useMemo(()=>{var i;return{borderRadius:0,offset:(i=n.pathOptions)==null?void 0:i.offset}},[(o=n.pathOptions)==null?void 0:o.offset])})})}const wD=nx({isInternal:!1}),rx=nx({isInternal:!0});wD.displayName="StepEdge",rx.displayName="StepEdgeInternal";function ox(e){return v.memo(({id:t,sourceX:n,sourceY:r,targetX:o,targetY:i,label:a,labelStyle:s,labelShowBg:c,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:d,style:p,markerEnd:f,markerStart:y,interactionWidth:m})=>{const[g,b,w]=W0({sourceX:n,sourceY:r,targetX:o,targetY:i}),_=e.isInternal?void 0:t;return h.jsx(Gc,{id:_,path:g,labelX:b,labelY:w,label:a,labelStyle:s,labelShowBg:c,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:d,style:p,markerEnd:f,markerStart:y,interactionWidth:m})})}const _D=ox({isInternal:!1}),ix=ox({isInternal:!0});_D.displayName="StraightEdge",ix.displayName="StraightEdgeInternal";function ax(e){return v.memo(({id:t,sourceX:n,sourceY:r,targetX:o,targetY:i,sourcePosition:a=oe.Bottom,targetPosition:s=oe.Top,label:c,labelStyle:l,labelShowBg:u,labelBgStyle:d,labelBgPadding:p,labelBgBorderRadius:f,style:y,markerEnd:m,markerStart:g,pathOptions:b,interactionWidth:w})=>{const[_,x,j]=U0({sourceX:n,sourceY:r,sourcePosition:a,targetX:o,targetY:i,targetPosition:s,curvature:b==null?void 0:b.curvature}),O=e.isInternal?void 0:t;return h.jsx(Gc,{id:O,path:_,labelX:x,labelY:j,label:c,labelStyle:l,labelShowBg:u,labelBgStyle:d,labelBgPadding:p,labelBgBorderRadius:f,style:y,markerEnd:m,markerStart:g,interactionWidth:w})})}const jD=ax({isInternal:!1}),sx=ax({isInternal:!0});jD.displayName="BezierEdge",sx.displayName="BezierEdgeInternal";const cx={default:sx,straight:ix,step:rx,smoothstep:tx,simplebezier:Zb},lx={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},OD=(e,t,n)=>n===oe.Left?e-t:n===oe.Right?e+t:e,ED=(e,t,n)=>n===oe.Top?e-t:n===oe.Bottom?e+t:e,ux="react-flow__edgeupdater";function dx({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:o,onMouseEnter:i,onMouseOut:a,type:s}){return h.jsx("circle",{onMouseDown:o,onMouseEnter:i,onMouseOut:a,className:ot([ux,`${ux}-${s}`]),cx:OD(t,r,e),cy:ED(n,r,e),r,stroke:"transparent",fill:"transparent"})}function SD({isReconnectable:e,reconnectRadius:t,edge:n,sourceX:r,sourceY:o,targetX:i,targetY:a,sourcePosition:s,targetPosition:c,onReconnect:l,onReconnectStart:u,onReconnectEnd:d,setReconnecting:p,setUpdateHover:f}){const y=Qe(),m=(x,j)=>{if(x.button!==0)return;const{autoPanOnConnect:O,domNode:E,isValidConnection:M,connectionMode:N,connectionRadius:A,lib:P,onConnectStart:T,onConnectEnd:L,cancelConnection:S,nodeLookup:C,rfId:k,panBy:D,updateConnection:R}=y.getState(),B=j.type==="target";p(!0),u==null||u(x,n,j.type);const F=(I,X)=>{p(!1),d==null||d(I,n,j.type,X)},V=I=>l==null?void 0:l(n,I);Ip.onPointerDown(x.nativeEvent,{autoPanOnConnect:O,connectionMode:N,connectionRadius:A,domNode:E,handleId:j.id,nodeId:j.nodeId,nodeLookup:C,isTarget:B,edgeUpdaterType:j.type,lib:P,flowId:k,cancelConnection:S,panBy:D,isValidConnection:M,onConnect:V,onConnectStart:T,onConnectEnd:L,onReconnectEnd:F,updateConnection:R,getTransform:()=>y.getState().transform,getFromHandle:()=>y.getState().connection.fromHandle})},g=x=>m(x,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),b=x=>m(x,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),w=()=>f(!0),_=()=>f(!1);return h.jsxs(h.Fragment,{children:[(e===!0||e==="source")&&h.jsx(dx,{position:s,centerX:r,centerY:o,radius:t,onMouseDown:g,onMouseEnter:w,onMouseOut:_,type:"source"}),(e===!0||e==="target")&&h.jsx(dx,{position:c,centerX:i,centerY:a,radius:t,onMouseDown:b,onMouseEnter:w,onMouseOut:_,type:"target"})]})}function MD({id:e,edgesFocusable:t,edgesReconnectable:n,elementsSelectable:r,onClick:o,onDoubleClick:i,onContextMenu:a,onMouseEnter:s,onMouseMove:c,onMouseLeave:l,reconnectRadius:u,onReconnect:d,onReconnectStart:p,onReconnectEnd:f,rfId:y,edgeTypes:m,noPanClassName:g,onError:b,disableKeyboardA11y:w}){let _=Pe(z=>z.edgeLookup.get(e));const x=Pe(z=>z.defaultEdgeOptions);_=x?{...x,..._}:_;let j=_.type||"default",O=(m==null?void 0:m[j])||cx[j];O===void 0&&(b==null||b("011",or.error011(j)),j="default",O=cx.default);const E=!!(_.focusable||t&&typeof _.focusable>"u"),M=typeof d<"u"&&(_.reconnectable||n&&typeof _.reconnectable>"u"),N=!!(_.selectable||r&&typeof _.selectable>"u"),A=v.useRef(null),[P,T]=v.useState(!1),[L,S]=v.useState(!1),C=Qe(),{zIndex:k,sourceX:D,sourceY:R,targetX:B,targetY:F,sourcePosition:V,targetPosition:I}=Pe(v.useCallback(z=>{const ye=z.nodeLookup.get(_.source),fe=z.nodeLookup.get(_.target);if(!ye||!fe)return{zIndex:_.zIndex,...lx};const Oe=d5({id:e,sourceNode:ye,targetNode:fe,sourceHandle:_.sourceHandle||null,targetHandle:_.targetHandle||null,connectionMode:z.connectionMode,onError:b});return{zIndex:o5({selected:_.selected,zIndex:_.zIndex,sourceNode:ye,targetNode:fe,elevateOnSelect:z.elevateEdgesOnSelect}),...Oe||lx}},[_.source,_.target,_.sourceHandle,_.targetHandle,_.selected,_.zIndex]),Ke),X=v.useMemo(()=>_.markerStart?`url('#${Mp(_.markerStart,y)}')`:void 0,[_.markerStart,y]),H=v.useMemo(()=>_.markerEnd?`url('#${Mp(_.markerEnd,y)}')`:void 0,[_.markerEnd,y]);if(_.hidden||D===null||R===null||B===null||F===null)return null;const q=z=>{var Ae;const{addSelectedEdges:ye,unselectNodesAndEdges:fe,multiSelectionActive:Oe}=C.getState();N&&(C.setState({nodesSelectionActive:!1}),_.selected&&Oe?(fe({nodes:[],edges:[_]}),(Ae=A.current)==null||Ae.blur()):ye([e])),o&&o(z,_)},te=i?z=>{i(z,{..._})}:void 0,Q=a?z=>{a(z,{..._})}:void 0,Z=s?z=>{s(z,{..._})}:void 0,Y=c?z=>{c(z,{..._})}:void 0,K=l?z=>{l(z,{..._})}:void 0,ne=z=>{var ye;if(!w&&_0.includes(z.key)&&N){const{unselectNodesAndEdges:fe,addSelectedEdges:Oe}=C.getState();z.key==="Escape"?((ye=A.current)==null||ye.blur(),fe({edges:[_]})):Oe([e])}};return h.jsx("svg",{style:{zIndex:k},children:h.jsxs("g",{className:ot(["react-flow__edge",`react-flow__edge-${j}`,_.className,g,{selected:_.selected,animated:_.animated,inactive:!N&&!o,updating:P,selectable:N}]),onClick:q,onDoubleClick:te,onContextMenu:Q,onMouseEnter:Z,onMouseMove:Y,onMouseLeave:K,onKeyDown:E?ne:void 0,tabIndex:E?0:void 0,role:E?"button":"img","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":_.ariaLabel===null?void 0:_.ariaLabel||`Edge from ${_.source} to ${_.target}`,"aria-describedby":E?`${Ob}-${y}`:void 0,ref:A,children:[!L&&h.jsx(O,{id:e,source:_.source,target:_.target,type:_.type,selected:_.selected,animated:_.animated,selectable:N,deletable:_.deletable??!0,label:_.label,labelStyle:_.labelStyle,labelShowBg:_.labelShowBg,labelBgStyle:_.labelBgStyle,labelBgPadding:_.labelBgPadding,labelBgBorderRadius:_.labelBgBorderRadius,sourceX:D,sourceY:R,targetX:B,targetY:F,sourcePosition:V,targetPosition:I,data:_.data,style:_.style,sourceHandleId:_.sourceHandle,targetHandleId:_.targetHandle,markerStart:X,markerEnd:H,pathOptions:"pathOptions"in _?_.pathOptions:void 0,interactionWidth:_.interactionWidth}),M&&h.jsx(SD,{edge:_,isReconnectable:M,reconnectRadius:u,onReconnect:d,onReconnectStart:p,onReconnectEnd:f,sourceX:D,sourceY:R,targetX:B,targetY:F,sourcePosition:V,targetPosition:I,setUpdateHover:T,setReconnecting:S})]})})}const CD=e=>({width:e.width,height:e.height,edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function px({defaultMarkerColor:e,onlyRenderVisibleElements:t,rfId:n,edgeTypes:r,noPanClassName:o,onReconnect:i,onEdgeContextMenu:a,onEdgeMouseEnter:s,onEdgeMouseMove:c,onEdgeMouseLeave:l,onEdgeClick:u,reconnectRadius:d,onEdgeDoubleClick:p,onReconnectStart:f,onReconnectEnd:y,disableKeyboardA11y:m}){const{edgesFocusable:g,edgesReconnectable:b,elementsSelectable:w,onError:_}=Pe(CD,Ke),x=fD(t);return h.jsxs("div",{className:"react-flow__edges",children:[h.jsx(vD,{defaultColor:e,rfId:n}),x.map(j=>h.jsx(MD,{id:j,edgesFocusable:g,edgesReconnectable:b,elementsSelectable:w,noPanClassName:o,onReconnect:i,onContextMenu:a,onMouseEnter:s,onMouseMove:c,onMouseLeave:l,onClick:u,reconnectRadius:d,onDoubleClick:p,onReconnectStart:f,onReconnectEnd:y,rfId:n,onError:_,edgeTypes:r,disableKeyboardA11y:m},j))]})}px.displayName="EdgeRenderer";const PD=v.memo(px),ND=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function kD({children:e}){const t=Pe(ND);return h.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:t},children:e})}function AD(e){const t=Fn(),n=v.useRef(!1);v.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const TD=e=>{var t;return(t=e.panZoom)==null?void 0:t.syncViewport};function ID(e){const t=Pe(TD),n=Qe();return v.useEffect(()=>{e&&(t==null||t(e),n.setState({transform:[e.x,e.y,e.zoom]}))},[e,t]),null}function DD(e){return e.connection.inProgress?{...e.connection,to:ka(e.connection.to,e.transform)}:{...e.connection}}function RD(e){return DD}function LD(e){const t=RD();return Pe(t,Ke)}const BD=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function $D({containerStyle:e,style:t,type:n,component:r}){const{nodesConnectable:o,width:i,height:a,isValid:s,inProgress:c}=Pe(BD,Ke);return i&&o&&c?h.jsx("svg",{style:e,width:i,height:a,className:"react-flow__connectionline react-flow__container",children:h.jsx("g",{className:ot(["react-flow__connection",S0(s)]),children:h.jsx(fx,{style:t,type:n,CustomComponent:r,isValid:s})})}):null}const fx=({style:e,type:t=Mr.Bezier,CustomComponent:n,isValid:r})=>{const{inProgress:o,from:i,fromNode:a,fromHandle:s,fromPosition:c,to:l,toNode:u,toHandle:d,toPosition:p}=LD();if(!o)return;if(n)return h.jsx(n,{connectionLineType:t,connectionLineStyle:e,fromNode:a,fromHandle:s,fromX:i.x,fromY:i.y,toX:l.x,toY:l.y,fromPosition:c,toPosition:p,connectionStatus:S0(r),toNode:u,toHandle:d});let f="";const y={sourceX:i.x,sourceY:i.y,sourcePosition:c,targetX:l.x,targetY:l.y,targetPosition:p};switch(t){case Mr.Bezier:[f]=U0(y);break;case Mr.SimpleBezier:[f]=Gb(y);break;case Mr.Step:[f]=Sp({...y,borderRadius:0});break;case Mr.SmoothStep:[f]=Sp(y);break;default:[f]=W0(y)}return h.jsx("path",{d:f,fill:"none",className:"react-flow__connection-path",style:e})};fx.displayName="ConnectionLine";const FD={};function hx(e=FD){v.useRef(e),Qe(),v.useEffect(()=>{},[e])}function zD(){Qe(),v.useRef(!1),v.useEffect(()=>{},[])}function mx({nodeTypes:e,edgeTypes:t,onInit:n,onNodeClick:r,onEdgeClick:o,onNodeDoubleClick:i,onEdgeDoubleClick:a,onNodeMouseEnter:s,onNodeMouseMove:c,onNodeMouseLeave:l,onNodeContextMenu:u,onSelectionContextMenu:d,onSelectionStart:p,onSelectionEnd:f,connectionLineType:y,connectionLineStyle:m,connectionLineComponent:g,connectionLineContainerStyle:b,selectionKeyCode:w,selectionOnDrag:_,selectionMode:x,multiSelectionKeyCode:j,panActivationKeyCode:O,zoomActivationKeyCode:E,deleteKeyCode:M,onlyRenderVisibleElements:N,elementsSelectable:A,defaultViewport:P,translateExtent:T,minZoom:L,maxZoom:S,preventScrolling:C,defaultMarkerColor:k,zoomOnScroll:D,zoomOnPinch:R,panOnScroll:B,panOnScrollSpeed:F,panOnScrollMode:V,zoomOnDoubleClick:I,panOnDrag:X,onPaneClick:H,onPaneMouseEnter:q,onPaneMouseMove:te,onPaneMouseLeave:Q,onPaneScroll:Z,onPaneContextMenu:Y,paneClickDistance:K,nodeClickDistance:ne,onEdgeContextMenu:z,onEdgeMouseEnter:ye,onEdgeMouseMove:fe,onEdgeMouseLeave:Oe,reconnectRadius:Ae,onReconnect:et,onReconnectStart:Wt,onReconnectEnd:Xt,noDragClassName:Mt,noWheelClassName:nn,noPanClassName:Gn,disableKeyboardA11y:Kn,nodeExtent:oc,rfId:Ao,viewport:Nn,onViewportChange:ia}){return hx(e),hx(t),zD(),AD(n),ID(Nn),h.jsx(oD,{onPaneClick:H,onPaneMouseEnter:q,onPaneMouseMove:te,onPaneMouseLeave:Q,onPaneContextMenu:Y,onPaneScroll:Z,paneClickDistance:K,deleteKeyCode:M,selectionKeyCode:w,selectionOnDrag:_,selectionMode:x,onSelectionStart:p,onSelectionEnd:f,multiSelectionKeyCode:j,panActivationKeyCode:O,zoomActivationKeyCode:E,elementsSelectable:A,zoomOnScroll:D,zoomOnPinch:R,zoomOnDoubleClick:I,panOnScroll:B,panOnScrollSpeed:F,panOnScrollMode:V,panOnDrag:X,defaultViewport:P,translateExtent:T,minZoom:L,maxZoom:S,onSelectionContextMenu:d,preventScrolling:C,noDragClassName:Mt,noWheelClassName:nn,noPanClassName:Gn,disableKeyboardA11y:Kn,onViewportChange:ia,isControlledViewport:!!Nn,children:h.jsxs(kD,{children:[h.jsx(PD,{edgeTypes:t,onEdgeClick:o,onEdgeDoubleClick:a,onReconnect:et,onReconnectStart:Wt,onReconnectEnd:Xt,onlyRenderVisibleElements:N,onEdgeContextMenu:z,onEdgeMouseEnter:ye,onEdgeMouseMove:fe,onEdgeMouseLeave:Oe,reconnectRadius:Ae,defaultMarkerColor:k,noPanClassName:Gn,disableKeyboardA11y:Kn,rfId:Ao}),h.jsx($D,{style:m,type:y,component:g,containerStyle:b}),h.jsx("div",{className:"react-flow__edgelabel-renderer"}),h.jsx(pD,{nodeTypes:e,onNodeClick:r,onNodeDoubleClick:i,onNodeMouseEnter:s,onNodeMouseMove:c,onNodeMouseLeave:l,onNodeContextMenu:u,nodeClickDistance:ne,onlyRenderVisibleElements:N,noPanClassName:Gn,noDragClassName:Mt,disableKeyboardA11y:Kn,nodeExtent:oc,rfId:Ao}),h.jsx("div",{className:"react-flow__viewport-portal"})]})})}mx.displayName="GraphView";const VD=v.memo(mx),yx=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:o,height:i,fitView:a,nodeOrigin:s,nodeExtent:c}={})=>{const l=new Map,u=new Map,d=new Map,p=new Map,f=r??t??[],y=n??e??[],m=s??[0,0],g=c??Sa;J0(d,p,f),Np(y,l,u,{nodeOrigin:m,nodeExtent:g,elevateNodesOnSelect:!1});let b=[0,0,1];if(a&&o&&i){const w=Pa(l,{filter:O=>!!((O.width||O.initialWidth)&&(O.height||O.initialHeight))}),{x:_,y:x,zoom:j}=Op(w,o,i,.5,2,.1);b=[_,x,j]}return{rfId:"1",width:0,height:0,transform:b,nodes:y,nodeLookup:l,parentLookup:u,edges:f,edgeLookup:p,connectionLookup:d,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:n!==void 0,hasDefaultEdges:r!==void 0,panZoom:null,minZoom:.5,maxZoom:2,translateExtent:Sa,nodeExtent:g,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:Uo.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:m,nodeDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,fitViewOnInit:!1,fitViewDone:!1,fitViewOnInitOptions:void 0,selectNodesOnDrag:!0,multiSelectionActive:!1,connection:{...j0},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanSpeed:15,connectionRadius:20,onError:n5,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1}},UD=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:o,height:i,fitView:a,nodeOrigin:s,nodeExtent:c})=>c4((l,u)=>({...yx({nodes:e,edges:t,width:o,height:i,fitView:a,nodeOrigin:s,nodeExtent:c,defaultNodes:n,defaultEdges:r}),setNodes:d=>{const{nodeLookup:p,parentLookup:f,nodeOrigin:y,elevateNodesOnSelect:m}=u();Np(d,p,f,{nodeOrigin:y,nodeExtent:c,elevateNodesOnSelect:m,checkEquality:!0}),l({nodes:d})},setEdges:d=>{const{connectionLookup:p,edgeLookup:f}=u();J0(p,f,d),l({edges:d})},setDefaultNodesAndEdges:(d,p)=>{if(d){const{setNodes:f}=u();f(d),l({hasDefaultNodes:!0})}if(p){const{setEdges:f}=u();f(p),l({hasDefaultEdges:!0})}},updateNodeInternals:(d,p={triggerFitView:!0})=>{const{triggerNodeChanges:f,nodeLookup:y,parentLookup:m,fitViewOnInit:g,fitViewDone:b,fitViewOnInitOptions:w,domNode:_,nodeOrigin:x,nodeExtent:j,debug:O,fitViewSync:E}=u(),{changes:M,updatedInternals:N}=g5(d,y,m,_,x,j);if(N){if(h5(y,m,{nodeOrigin:x,nodeExtent:j}),p.triggerFitView){let A=b;!b&&g&&(A=E({...w,nodes:w==null?void 0:w.nodes})),l({fitViewDone:A})}else l({});(M==null?void 0:M.length)>0&&(O&&console.log("React Flow: trigger node changes",M),f==null||f(M))}},updateNodePositions:(d,p=!1)=>{const f=[],y=[];for(const[m,g]of d){const b={id:m,type:"position",position:g.position,dragging:p};g!=null&&g.expandParent&&(g!=null&&g.parentId)&&b.position&&(f.push({id:m,parentId:g.parentId,rect:{...g.internals.positionAbsolute,width:g.measured.width,height:g.measured.height}}),b.position.x=Math.max(0,b.position.x),b.position.y=Math.max(0,b.position.y)),y.push(b)}if(f.length>0){const{nodeLookup:m,parentLookup:g,nodeOrigin:b}=u(),w=Ap(f,m,g,b);y.push(...w)}u().triggerNodeChanges(y)},triggerNodeChanges:d=>{const{onNodesChange:p,setNodes:f,nodes:y,hasDefaultNodes:m,debug:g}=u();if(d!=null&&d.length){if(m){const b=eo(d,y);f(b)}g&&console.log("React Flow: trigger node changes",d),p==null||p(d)}},triggerEdgeChanges:d=>{const{onEdgesChange:p,setEdges:f,edges:y,hasDefaultEdges:m,debug:g}=u();if(d!=null&&d.length){if(m){const b=Da(d,y);f(b)}g&&console.log("React Flow: trigger edge changes",d),p==null||p(d)}},addSelectedNodes:d=>{const{multiSelectionActive:p,edgeLookup:f,nodeLookup:y,triggerNodeChanges:m,triggerEdgeChanges:g}=u();if(p){const b=d.map(w=>to(w,!0));m(b);return}m(Go(y,new Set([...d]),!0)),g(Go(f))},addSelectedEdges:d=>{const{multiSelectionActive:p,edgeLookup:f,nodeLookup:y,triggerNodeChanges:m,triggerEdgeChanges:g}=u();if(p){const b=d.map(w=>to(w,!0));g(b);return}g(Go(f,new Set([...d]))),m(Go(y,new Set,!0))},unselectNodesAndEdges:({nodes:d,edges:p}={})=>{const{edges:f,nodes:y,nodeLookup:m,triggerNodeChanges:g,triggerEdgeChanges:b}=u(),w=d||y,_=p||f,x=w.map(O=>{const E=m.get(O.id);return E&&(E.selected=!1),to(O.id,!1)}),j=_.map(O=>to(O.id,!1));g(x),b(j)},setMinZoom:d=>{const{panZoom:p,maxZoom:f}=u();p==null||p.setScaleExtent([d,f]),l({minZoom:d})},setMaxZoom:d=>{const{panZoom:p,minZoom:f}=u();p==null||p.setScaleExtent([f,d]),l({maxZoom:d})},setTranslateExtent:d=>{var p;(p=u().panZoom)==null||p.setTranslateExtent(d),l({translateExtent:d})},setPaneClickDistance:d=>{var p;(p=u().panZoom)==null||p.setClickDistance(d)},resetSelectedElements:()=>{const{edges:d,nodes:p,triggerNodeChanges:f,triggerEdgeChanges:y}=u(),m=p.reduce((b,w)=>w.selected?[...b,to(w.id,!1)]:b,[]),g=d.reduce((b,w)=>w.selected?[...b,to(w.id,!1)]:b,[]);f(m),y(g)},setNodeExtent:d=>{const{nodes:p,nodeLookup:f,parentLookup:y,nodeOrigin:m,elevateNodesOnSelect:g,nodeExtent:b}=u();d[0][0]===b[0][0]&&d[0][1]===b[0][1]&&d[1][0]===b[1][0]&&d[1][1]===b[1][1]||(Np(p,f,y,{nodeOrigin:m,nodeExtent:d,elevateNodesOnSelect:g,checkEquality:!1}),l({nodeExtent:d}))},panBy:d=>{const{transform:p,width:f,height:y,panZoom:m,translateExtent:g}=u();return v5({delta:d,panZoom:m,transform:p,translateExtent:g,width:f,height:y})},fitView:d=>{const{panZoom:p,width:f,height:y,minZoom:m,maxZoom:g,nodeLookup:b}=u();if(!p)return Promise.resolve(!1);const w=wp(b,d);return _p({nodes:w,width:f,height:y,panZoom:p,minZoom:m,maxZoom:g},d)},fitViewSync:d=>{const{panZoom:p,width:f,height:y,minZoom:m,maxZoom:g,nodeLookup:b}=u();if(!p)return!1;const w=wp(b,d);return _p({nodes:w,width:f,height:y,panZoom:p,minZoom:m,maxZoom:g},d),w.size>0},cancelConnection:()=>{l({connection:{...j0}})},updateConnection:d=>{l({connection:d})},reset:()=>l({...yx()})}),Object.is);function qD({initialNodes:e,initialEdges:t,defaultNodes:n,defaultEdges:r,initialWidth:o,initialHeight:i,fitView:a,nodeOrigin:s,nodeExtent:c,children:l}){const[u]=v.useState(()=>UD({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:o,height:i,fitView:a,nodeOrigin:s,nodeExtent:c}));return h.jsx(l4,{value:u,children:h.jsx(A4,{children:l})})}function HD({children:e,nodes:t,edges:n,defaultNodes:r,defaultEdges:o,width:i,height:a,fitView:s,nodeOrigin:c,nodeExtent:l}){return v.useContext(Wc)?h.jsx(h.Fragment,{children:e}):h.jsx(qD,{initialNodes:t,initialEdges:n,defaultNodes:r,defaultEdges:o,initialWidth:i,initialHeight:a,fitView:s,nodeOrigin:c,nodeExtent:l,children:e})}const WD={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function XD({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:o,nodeTypes:i,edgeTypes:a,onNodeClick:s,onEdgeClick:c,onInit:l,onMove:u,onMoveStart:d,onMoveEnd:p,onConnect:f,onConnectStart:y,onConnectEnd:m,onClickConnectStart:g,onClickConnectEnd:b,onNodeMouseEnter:w,onNodeMouseMove:_,onNodeMouseLeave:x,onNodeContextMenu:j,onNodeDoubleClick:O,onNodeDragStart:E,onNodeDrag:M,onNodeDragStop:N,onNodesDelete:A,onEdgesDelete:P,onDelete:T,onSelectionChange:L,onSelectionDragStart:S,onSelectionDrag:C,onSelectionDragStop:k,onSelectionContextMenu:D,onSelectionStart:R,onSelectionEnd:B,onBeforeDelete:F,connectionMode:V,connectionLineType:I=Mr.Bezier,connectionLineStyle:X,connectionLineComponent:H,connectionLineContainerStyle:q,deleteKeyCode:te="Backspace",selectionKeyCode:Q="Shift",selectionOnDrag:Z=!1,selectionMode:Y=Ma.Full,panActivationKeyCode:K="Space",multiSelectionKeyCode:ne=Fc()?"Meta":"Control",zoomActivationKeyCode:z=Fc()?"Meta":"Control",snapToGrid:ye,snapGrid:fe,onlyRenderVisibleElements:Oe=!1,selectNodesOnDrag:Ae,nodesDraggable:et,nodesConnectable:Wt,nodesFocusable:Xt,nodeOrigin:Mt=Eb,edgesFocusable:nn,edgesReconnectable:Gn,elementsSelectable:Kn=!0,defaultViewport:oc=_4,minZoom:Ao=.5,maxZoom:Nn=2,translateExtent:ia=Sa,preventScrolling:Cg=!0,nodeExtent:ic,defaultMarkerColor:ac="#b1b1b7",zoomOnScroll:U=!0,zoomOnPinch:W=!0,panOnScroll:ee=!1,panOnScrollSpeed:ie=.5,panOnScrollMode:be=Sr.Free,zoomOnDoubleClick:lt=!0,panOnDrag:rt=!0,onPaneClick:Ee,onPaneMouseEnter:ce,onPaneMouseMove:de,onPaneMouseLeave:he,onPaneScroll:me,onPaneContextMenu:Se,paneClickDistance:ze=0,nodeClickDistance:tt=0,children:rn,onReconnect:Ed,onReconnectStart:Pg,onReconnectEnd:Ng,onEdgeContextMenu:rde,onEdgeDoubleClick:ode,onEdgeMouseEnter:ide,onEdgeMouseMove:ade,onEdgeMouseLeave:sde,reconnectRadius:cde=10,onNodesChange:lde,onEdgesChange:ude,noDragClassName:dde="nodrag",noWheelClassName:pde="nowheel",noPanClassName:jk="nopan",fitView:Ok,fitViewOptions:fde,connectOnClick:hde,attributionPosition:mde,proOptions:yde,defaultEdgeOptions:gde,elevateNodesOnSelect:vde,elevateEdgesOnSelect:bde,disableKeyboardA11y:Ek=!1,autoPanOnConnect:xde,autoPanOnNodeDrag:wde,autoPanSpeed:_de,connectionRadius:jde,isValidConnection:Ode,onError:Ede,style:Sde,id:Sk,nodeDragThreshold:Mde,viewport:Cde,onViewportChange:Pde,width:Nde,height:kde,colorMode:Ade="light",debug:Tde,...Ide},Dde){const kg=Sk||"1",Rde=S4(Ade);return h.jsx("div",{...Ide,style:{...Sde,...WD},ref:Dde,className:ot(["react-flow",o,Rde]),"data-testid":"rf__wrapper",id:Sk,children:h.jsxs(HD,{nodes:e,edges:t,width:Nde,height:kde,fitView:Ok,nodeOrigin:Mt,nodeExtent:ic,children:[h.jsx(VD,{onInit:l,onNodeClick:s,onEdgeClick:c,onNodeMouseEnter:w,onNodeMouseMove:_,onNodeMouseLeave:x,onNodeContextMenu:j,onNodeDoubleClick:O,nodeTypes:i,edgeTypes:a,connectionLineType:I,connectionLineStyle:X,connectionLineComponent:H,connectionLineContainerStyle:q,selectionKeyCode:Q,selectionOnDrag:Z,selectionMode:Y,deleteKeyCode:te,multiSelectionKeyCode:ne,panActivationKeyCode:K,zoomActivationKeyCode:z,onlyRenderVisibleElements:Oe,defaultViewport:oc,translateExtent:ia,minZoom:Ao,maxZoom:Nn,preventScrolling:Cg,zoomOnScroll:U,zoomOnPinch:W,zoomOnDoubleClick:lt,panOnScroll:ee,panOnScrollSpeed:ie,panOnScrollMode:be,panOnDrag:rt,onPaneClick:Ee,onPaneMouseEnter:ce,onPaneMouseMove:de,onPaneMouseLeave:he,onPaneScroll:me,onPaneContextMenu:Se,paneClickDistance:ze,nodeClickDistance:tt,onSelectionContextMenu:D,onSelectionStart:R,onSelectionEnd:B,onReconnect:Ed,onReconnectStart:Pg,onReconnectEnd:Ng,onEdgeContextMenu:rde,onEdgeDoubleClick:ode,onEdgeMouseEnter:ide,onEdgeMouseMove:ade,onEdgeMouseLeave:sde,reconnectRadius:cde,defaultMarkerColor:ac,noDragClassName:dde,noWheelClassName:pde,noPanClassName:jk,rfId:kg,disableKeyboardA11y:Ek,nodeExtent:ic,viewport:Cde,onViewportChange:Pde}),h.jsx(E4,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:f,onConnectStart:y,onConnectEnd:m,onClickConnectStart:g,onClickConnectEnd:b,nodesDraggable:et,nodesConnectable:Wt,nodesFocusable:Xt,edgesFocusable:nn,edgesReconnectable:Gn,elementsSelectable:Kn,elevateNodesOnSelect:vde,elevateEdgesOnSelect:bde,minZoom:Ao,maxZoom:Nn,nodeExtent:ic,onNodesChange:lde,onEdgesChange:ude,snapToGrid:ye,snapGrid:fe,connectionMode:V,translateExtent:ia,connectOnClick:hde,defaultEdgeOptions:gde,fitView:Ok,fitViewOptions:fde,onNodesDelete:A,onEdgesDelete:P,onDelete:T,onNodeDragStart:E,onNodeDrag:M,onNodeDragStop:N,onSelectionDrag:C,onSelectionDragStart:S,onSelectionDragStop:k,onMove:u,onMoveStart:d,onMoveEnd:p,noPanClassName:jk,nodeOrigin:Mt,rfId:kg,autoPanOnConnect:xde,autoPanOnNodeDrag:wde,autoPanSpeed:_de,onError:Ede,connectionRadius:jde,isValidConnection:Ode,selectNodesOnDrag:Ae,nodeDragThreshold:Mde,onBeforeDelete:F,paneClickDistance:ze,debug:Tde}),h.jsx(w4,{onSelectionChange:L}),rn,h.jsx(y4,{proOptions:yde,position:mde}),h.jsx(h4,{rfId:kg,disableKeyboardA11y:Ek})]})})}var QD=Rb(XD);function Kc({type:e,id:t=null,nodeId:n,onConnect:r,onDisconnect:o}){const i=Up(),a=n??i,s=v.useRef(null),c=Pe(l=>l.connectionLookup.get(`${a}-${e}-${t}`),KI);return v.useEffect(()=>{if(s.current&&s.current!==c){const l=c??new Map;E0(s.current,l,o),E0(l,s.current,r)}s.current=c??new Map},[c,r,o]),v.useMemo(()=>Array.from((c==null?void 0:c.values())??[]),[c])}function jt(e){return Pe(v.useCallback(t=>t.nodeLookup.get(e),[e]),Ke)}function YD({dimensions:e,lineWidth:t,variant:n,className:r}){return h.jsx("path",{strokeWidth:t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:ot(["react-flow__background-pattern",n,r])})}function GD({radius:e,className:t}){return h.jsx("circle",{cx:e,cy:e,r:e,className:ot(["react-flow__background-pattern","dots",t])})}var sr;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(sr||(sr={}));const KD={[sr.Dots]:1,[sr.Lines]:1,[sr.Cross]:6},ZD=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function gx({id:e,variant:t=sr.Dots,gap:n=20,size:r,lineWidth:o=1,offset:i=0,color:a,bgColor:s,style:c,className:l,patternClassName:u}){const d=v.useRef(null),{transform:p,patternId:f}=Pe(ZD,Ke),y=r||KD[t],m=t===sr.Dots,g=t===sr.Cross,b=Array.isArray(n)?n:[n,n],w=[b[0]*p[2]||1,b[1]*p[2]||1],_=y*p[2],x=Array.isArray(i)?i:[i,i],j=g?[_,_]:w,O=[x[0]*p[2]||1+j[0]/2,x[1]*p[2]||1+j[1]/2],E=`${f}${e||""}`;return h.jsxs("svg",{className:ot(["react-flow__background",l]),style:{...c,...Qc,"--xy-background-color-props":s,"--xy-background-pattern-color-props":a},ref:d,"data-testid":"rf__background",children:[h.jsx("pattern",{id:E,x:p[0]%w[0],y:p[1]%w[1],width:w[0],height:w[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${O[0]},-${O[1]})`,children:m?h.jsx(GD,{radius:_/2,className:u}):h.jsx(YD,{dimensions:j,lineWidth:o,variant:t,className:u})}),h.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${E})`})]})}gx.displayName="Background";const JD=v.memo(gx);function eR(){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:h.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function tR(){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:h.jsx("path",{d:"M0 0h32v4.2H0z"})})}function nR(){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:h.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function rR(){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:h.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function oR(){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:h.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function Zc({children:e,className:t,...n}){return h.jsx("button",{type:"button",className:ot(["react-flow__controls-button",t]),...n,children:e})}const iR=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom});function vx({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:o,onZoomIn:i,onZoomOut:a,onFitView:s,onInteractiveChange:c,className:l,children:u,position:d="bottom-left",orientation:p="vertical","aria-label":f="React Flow controls"}){const y=Qe(),{isInteractive:m,minZoomReached:g,maxZoomReached:b}=Pe(iR,Ke),{zoomIn:w,zoomOut:_,fitView:x}=Fn(),j=()=>{w(),i==null||i()},O=()=>{_(),a==null||a()},E=()=>{x(o),s==null||s()},M=()=>{y.setState({nodesDraggable:!m,nodesConnectable:!m,elementsSelectable:!m}),c==null||c(!m)},N=p==="horizontal"?"horizontal":"vertical";return h.jsxs($p,{className:ot(["react-flow__controls",N,l]),position:d,style:e,"data-testid":"rf__controls","aria-label":f,children:[t&&h.jsxs(h.Fragment,{children:[h.jsx(Zc,{onClick:j,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:b,children:h.jsx(eR,{})}),h.jsx(Zc,{onClick:O,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:g,children:h.jsx(tR,{})})]}),n&&h.jsx(Zc,{className:"react-flow__controls-fitview",onClick:E,title:"fit view","aria-label":"fit view",children:h.jsx(nR,{})}),r&&h.jsx(Zc,{className:"react-flow__controls-interactive",onClick:M,title:"toggle interactivity","aria-label":"toggle interactivity",children:m?h.jsx(oR,{}):h.jsx(rR,{})}),u]})}vx.displayName="Controls";const aR=v.memo(vx);function sR({id:e,x:t,y:n,width:r,height:o,style:i,color:a,strokeColor:s,strokeWidth:c,className:l,borderRadius:u,shapeRendering:d,selected:p,onClick:f}){const{background:y,backgroundColor:m}=i||{},g=a||y||m;return h.jsx("rect",{className:ot(["react-flow__minimap-node",{selected:p},l]),x:t,y:n,rx:u,ry:u,width:r,height:o,style:{fill:g,stroke:s,strokeWidth:c},shapeRendering:d,onClick:f?b=>f(b,e):void 0})}const cR=v.memo(sR),lR=e=>e.nodes.map(t=>t.id),qp=e=>e instanceof Function?e:()=>e;function uR({nodeStrokeColor:e,nodeColor:t,nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:o,nodeComponent:i=cR,onClick:a}){const s=Pe(lR,Ke),c=qp(t),l=qp(e),u=qp(n),d=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return h.jsx(h.Fragment,{children:s.map(p=>h.jsx(pR,{id:p,nodeColorFunc:c,nodeStrokeColorFunc:l,nodeClassNameFunc:u,nodeBorderRadius:r,nodeStrokeWidth:o,NodeComponent:i,onClick:a,shapeRendering:d},p))})}function dR({id:e,nodeColorFunc:t,nodeStrokeColorFunc:n,nodeClassNameFunc:r,nodeBorderRadius:o,nodeStrokeWidth:i,shapeRendering:a,NodeComponent:s,onClick:c}){const{node:l,x:u,y:d,width:p,height:f}=Pe(y=>{const m=y.nodeLookup.get(e),{x:g,y:b}=m.internals.positionAbsolute,{width:w,height:_}=ir(m);return{node:m,x:g,y:b,width:w,height:_}},Ke);return!l||l.hidden||!R0(l)?null:h.jsx(s,{x:u,y:d,width:p,height:f,style:l.style,selected:!!l.selected,className:r(l),color:t(l),borderRadius:o,strokeColor:n(l),strokeWidth:i,shapeRendering:a,onClick:c,id:l.id})}const pR=v.memo(dR);var fR=v.memo(uR);const hR=200,mR=150,yR=e=>{const t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:t,boundingRect:e.nodeLookup.size>0?T0(Pa(e.nodeLookup),t):t,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height}},gR="react-flow__minimap-desc";function bx({style:e,className:t,nodeStrokeColor:n,nodeColor:r,nodeClassName:o="",nodeBorderRadius:i=5,nodeStrokeWidth:a,nodeComponent:s,bgColor:c,maskColor:l,maskStrokeColor:u,maskStrokeWidth:d,position:p="bottom-right",onClick:f,onNodeClick:y,pannable:m=!1,zoomable:g=!1,ariaLabel:b="React Flow mini map",inversePan:w,zoomStep:_=10,offsetScale:x=5}){const j=Qe(),O=v.useRef(null),{boundingRect:E,viewBB:M,rfId:N,panZoom:A,translateExtent:P,flowWidth:T,flowHeight:L}=Pe(yR,Ke),S=(e==null?void 0:e.width)??hR,C=(e==null?void 0:e.height)??mR,k=E.width/S,D=E.height/C,R=Math.max(k,D),B=R*S,F=R*C,V=x*R,I=E.x-(B-E.width)/2-V,X=E.y-(F-E.height)/2-V,H=B+V*2,q=F+V*2,te=`${gR}-${N}`,Q=v.useRef(0),Z=v.useRef();Q.current=R,v.useEffect(()=>{if(O.current&&A)return Z.current=S5({domNode:O.current,panZoom:A,getTransform:()=>j.getState().transform,getViewScale:()=>Q.current}),()=>{var ne;(ne=Z.current)==null||ne.destroy()}},[A]),v.useEffect(()=>{var ne;(ne=Z.current)==null||ne.update({translateExtent:P,width:T,height:L,inversePan:w,pannable:m,zoomStep:_,zoomable:g})},[m,g,w,_,P,T,L]);const Y=f?ne=>{var fe;const[z,ye]=((fe=Z.current)==null?void 0:fe.pointer(ne))||[0,0];f(ne,{x:z,y:ye})}:void 0,K=y?v.useCallback((ne,z)=>{const ye=j.getState().nodeLookup.get(z);y(ne,ye)},[]):void 0;return h.jsx($p,{position:p,style:{...e,"--xy-minimap-background-color-props":typeof c=="string"?c:void 0,"--xy-minimap-mask-background-color-props":typeof l=="string"?l:void 0,"--xy-minimap-mask-stroke-color-props":typeof u=="string"?u:void 0,"--xy-minimap-mask-stroke-width-props":typeof d=="number"?d*R:void 0,"--xy-minimap-node-background-color-props":typeof r=="string"?r:void 0,"--xy-minimap-node-stroke-color-props":typeof n=="string"?n:void 0,"--xy-minimap-node-stroke-width-props":typeof a=="string"?a:void 0},className:ot(["react-flow__minimap",t]),"data-testid":"rf__minimap",children:h.jsxs("svg",{width:S,height:C,viewBox:`${I} ${X} ${H} ${q}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":te,ref:O,onClick:Y,children:[b&&h.jsx("title",{id:te,children:b}),h.jsx(fR,{onClick:K,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:i,nodeClassName:o,nodeStrokeWidth:a,nodeComponent:s}),h.jsx("path",{className:"react-flow__minimap-mask",d:`M${I-V},${X-V}h${H+V*2}v${q+V*2}h${-H-V*2}z
        M${M.x},${M.y}h${M.width}v${M.height}h${-M.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}bx.displayName="MiniMap";const vR=v.memo(bx);function bR({nodeId:e,position:t,variant:n=Qo.Handle,className:r,style:o={},children:i,color:a,minWidth:s=10,minHeight:c=10,maxWidth:l=Number.MAX_VALUE,maxHeight:u=Number.MAX_VALUE,keepAspectRatio:d=!1,shouldResize:p,onResizeStart:f,onResize:y,onResizeEnd:m}){const g=Up(),b=typeof e=="string"?e:g,w=Qe(),_=v.useRef(null),x=n===Qo.Line?"right":"bottom-right",j=t??x,O=v.useRef(null);v.useEffect(()=>{if(!(!_.current||!b))return O.current||(O.current=U5({domNode:_.current,nodeId:b,getStoreItems:()=>{const{nodeLookup:A,transform:P,snapGrid:T,snapToGrid:L,nodeOrigin:S,domNode:C}=w.getState();return{nodeLookup:A,transform:P,snapGrid:T,snapToGrid:L,nodeOrigin:S,paneDomNode:C}},onChange:(A,P)=>{const{triggerNodeChanges:T,nodeLookup:L,parentLookup:S,nodeOrigin:C}=w.getState(),k=[],D={x:A.x,y:A.y},R=L.get(b);if(R&&R.expandParent&&R.parentId){const B=R.origin??C,F=A.width??R.measured.width,V=A.height??R.measured.height,I={id:R.id,parentId:R.parentId,rect:{width:F,height:V,...L0({x:A.x??R.position.x,y:A.y??R.position.y},{width:F,height:V},R.parentId,L,B)}},X=Ap([I],L,S,C);k.push(...X),D.x=A.x?Math.max(B[0]*F,A.x):void 0,D.y=A.y?Math.max(B[1]*V,A.y):void 0}if(D.x!==void 0&&D.y!==void 0){const B={id:b,type:"position",position:{...D}};k.push(B)}if(A.width!==void 0&&A.height!==void 0){const B={id:b,type:"dimensions",resizing:!0,setAttributes:!0,dimensions:{width:A.width,height:A.height}};k.push(B)}for(const B of P){const F={...B,type:"position"};k.push(F)}T(k)},onEnd:()=>{const A={id:b,type:"dimensions",resizing:!1};w.getState().triggerNodeChanges([A])}})),O.current.update({controlPosition:j,boundaries:{minWidth:s,minHeight:c,maxWidth:l,maxHeight:u},keepAspectRatio:d,onResizeStart:f,onResize:y,onResizeEnd:m,shouldResize:p}),()=>{var A;(A=O.current)==null||A.destroy()}},[j,s,c,l,u,d,f,y,m,p]);const E=j.split("-"),M=n===Qo.Line?"borderColor":"backgroundColor",N=a?{...o,[M]:a}:o;return h.jsx("div",{className:ot(["react-flow__resize-control","nodrag",...E,n,r]),ref:_,style:N,children:i})}const xx=v.memo(bR);function xR({nodeId:e,isVisible:t=!0,handleClassName:n,handleStyle:r,lineClassName:o,lineStyle:i,color:a,minWidth:s=10,minHeight:c=10,maxWidth:l=Number.MAX_VALUE,maxHeight:u=Number.MAX_VALUE,keepAspectRatio:d=!1,shouldResize:p,onResizeStart:f,onResize:y,onResizeEnd:m}){return t?h.jsxs(h.Fragment,{children:[R5.map(g=>h.jsx(xx,{className:o,style:i,nodeId:e,position:g,variant:Qo.Line,color:a,minWidth:s,minHeight:c,maxWidth:l,maxHeight:u,onResizeStart:f,keepAspectRatio:d,shouldResize:p,onResize:y,onResizeEnd:m},g)),D5.map(g=>h.jsx(xx,{className:n,style:r,nodeId:e,position:g,color:a,minWidth:s,minHeight:c,maxWidth:l,maxHeight:u,onResizeStart:f,keepAspectRatio:d,shouldResize:p,onResize:y,onResizeEnd:m},g))]}):null}var Jc="Menubar",[Hp,wR,_R]=Ag(Jc),[wx,Lpe]=aa(Jc,[_R,la]),Pt=spe(),_x=la(),[jR,Wp]=wx(Jc),jx=v.forwardRef((e,t)=>{const{__scopeMenubar:n,value:r,onValueChange:o,defaultValue:i,loop:a=!0,dir:s,...c}=e,l=sc(s),u=_x(n),[d="",p]=kn({prop:r,onChange:o,defaultProp:i}),[f,y]=v.useState(null);return h.jsx(jR,{scope:n,value:d,onMenuOpen:v.useCallback(m=>{p(m),y(m)},[p]),onMenuClose:v.useCallback(()=>p(""),[p]),onMenuToggle:v.useCallback(m=>{p(g=>g?"":m),y(m)},[p]),dir:l,loop:a,children:h.jsx(Hp.Provider,{scope:n,children:h.jsx(Hp.Slot,{scope:n,children:h.jsx(zg,{asChild:!0,...u,orientation:"horizontal",loop:a,dir:l,currentTabStopId:f,onCurrentTabStopIdChange:y,children:h.jsx(ke.div,{role:"menubar",...c,ref:t})})})})})});jx.displayName=Jc;var Xp="MenubarMenu",[OR,Ox]=wx(Xp),Ex=e=>{const{__scopeMenubar:t,value:n,...r}=e,o=Dt(),i=n||o||"LEGACY_REACT_AUTO_VALUE",a=Wp(Xp,t),s=Pt(t),c=v.useRef(null),l=v.useRef(!1),u=a.value===i;return v.useEffect(()=>{u||(l.current=!1)},[u]),h.jsx(OR,{scope:t,value:i,triggerId:Dt(),triggerRef:c,contentId:Dt(),wasKeyboardTriggerOpenRef:l,children:h.jsx(wpe,{...s,open:u,onOpenChange:d=>{d||a.onMenuClose()},modal:!1,dir:a.dir,...r})})};Ex.displayName=Xp;var Qp="MenubarTrigger",Sx=v.forwardRef((e,t)=>{const{__scopeMenubar:n,disabled:r=!1,...o}=e,i=_x(n),a=Pt(n),s=Wp(Qp,n),c=Ox(Qp,n),l=v.useRef(null),u=Tt(t,l,c.triggerRef),[d,p]=v.useState(!1),f=s.value===c.value;return h.jsx(Hp.ItemSlot,{scope:n,value:c.value,disabled:r,children:h.jsx(Vg,{asChild:!0,...i,focusable:!r,tabStopId:c.value,children:h.jsx(cpe,{asChild:!0,...a,children:h.jsx(ke.button,{type:"button",role:"menuitem",id:c.triggerId,"aria-haspopup":"menu","aria-expanded":f,"aria-controls":f?c.contentId:void 0,"data-highlighted":d?"":void 0,"data-state":f?"open":"closed","data-disabled":r?"":void 0,disabled:r,...o,ref:u,onPointerDown:Me(e.onPointerDown,y=>{!r&&y.button===0&&y.ctrlKey===!1&&(s.onMenuOpen(c.value),f||y.preventDefault())}),onPointerEnter:Me(e.onPointerEnter,()=>{var y;s.value&&!f&&(s.onMenuOpen(c.value),(y=l.current)==null||y.focus())}),onKeyDown:Me(e.onKeyDown,y=>{r||(["Enter"," "].includes(y.key)&&s.onMenuToggle(c.value),y.key==="ArrowDown"&&s.onMenuOpen(c.value),["Enter"," ","ArrowDown"].includes(y.key)&&(c.wasKeyboardTriggerOpenRef.current=!0,y.preventDefault()))}),onFocus:Me(e.onFocus,()=>p(!0)),onBlur:Me(e.onBlur,()=>p(!1))})})})})});Sx.displayName=Qp;var ER="MenubarPortal",Mx=e=>{const{__scopeMenubar:t,...n}=e,r=Pt(t);return h.jsx(_pe,{...r,...n})};Mx.displayName=ER;var Yp="MenubarContent",Cx=v.forwardRef((e,t)=>{const{__scopeMenubar:n,align:r="start",...o}=e,i=Pt(n),a=Wp(Yp,n),s=Ox(Yp,n),c=wR(n),l=v.useRef(!1);return h.jsx(lpe,{id:s.contentId,"aria-labelledby":s.triggerId,"data-radix-menubar-content":"",...i,...o,ref:t,align:r,onCloseAutoFocus:Me(e.onCloseAutoFocus,u=>{var d;!a.value&&!l.current&&((d=s.triggerRef.current)==null||d.focus()),l.current=!1,u.preventDefault()}),onFocusOutside:Me(e.onFocusOutside,u=>{const d=u.target;c().some(p=>{var f;return(f=p.ref.current)==null?void 0:f.contains(d)})&&u.preventDefault()}),onInteractOutside:Me(e.onInteractOutside,()=>{l.current=!0}),onEntryFocus:u=>{s.wasKeyboardTriggerOpenRef.current||u.preventDefault()},onKeyDown:Me(e.onKeyDown,u=>{if(["ArrowRight","ArrowLeft"].includes(u.key)){const d=u.target,p=d.hasAttribute("data-radix-menubar-subtrigger"),f=d.closest("[data-radix-menubar-content]")!==u.currentTarget,y=(a.dir==="rtl"?"ArrowRight":"ArrowLeft")===u.key;if(!y&&p||f&&y)return;let m=c().filter(w=>!w.disabled).map(w=>w.value);y&&m.reverse();const g=m.indexOf(s.value);m=a.loop?FR(m,g+1):m.slice(g+1);const[b]=m;b&&a.onMenuOpen(b)}},{checkForDefaultPrevented:!1}),style:{...e.style,"--radix-menubar-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-menubar-content-available-width":"var(--radix-popper-available-width)","--radix-menubar-content-available-height":"var(--radix-popper-available-height)","--radix-menubar-trigger-width":"var(--radix-popper-anchor-width)","--radix-menubar-trigger-height":"var(--radix-popper-anchor-height)"}})});Cx.displayName=Yp;var SR="MenubarGroup",MR=v.forwardRef((e,t)=>{const{__scopeMenubar:n,...r}=e,o=Pt(n);return h.jsx(upe,{...o,...r,ref:t})});MR.displayName=SR;var CR="MenubarLabel",Px=v.forwardRef((e,t)=>{const{__scopeMenubar:n,...r}=e,o=Pt(n);return h.jsx(dpe,{...o,...r,ref:t})});Px.displayName=CR;var PR="MenubarItem",Nx=v.forwardRef((e,t)=>{const{__scopeMenubar:n,...r}=e,o=Pt(n);return h.jsx(ppe,{...o,...r,ref:t})});Nx.displayName=PR;var NR="MenubarCheckboxItem",kx=v.forwardRef((e,t)=>{const{__scopeMenubar:n,...r}=e,o=Pt(n);return h.jsx(fpe,{...o,...r,ref:t})});kx.displayName=NR;var kR="MenubarRadioGroup",AR=v.forwardRef((e,t)=>{const{__scopeMenubar:n,...r}=e,o=Pt(n);return h.jsx(hpe,{...o,...r,ref:t})});AR.displayName=kR;var TR="MenubarRadioItem",Ax=v.forwardRef((e,t)=>{const{__scopeMenubar:n,...r}=e,o=Pt(n);return h.jsx(mpe,{...o,...r,ref:t})});Ax.displayName=TR;var IR="MenubarItemIndicator",Tx=v.forwardRef((e,t)=>{const{__scopeMenubar:n,...r}=e,o=Pt(n);return h.jsx(ype,{...o,...r,ref:t})});Tx.displayName=IR;var DR="MenubarSeparator",Ix=v.forwardRef((e,t)=>{const{__scopeMenubar:n,...r}=e,o=Pt(n);return h.jsx(gpe,{...o,...r,ref:t})});Ix.displayName=DR;var RR="MenubarArrow",LR=v.forwardRef((e,t)=>{const{__scopeMenubar:n,...r}=e,o=Pt(n);return h.jsx(vpe,{...o,...r,ref:t})});LR.displayName=RR;var BR="MenubarSubTrigger",Dx=v.forwardRef((e,t)=>{const{__scopeMenubar:n,...r}=e,o=Pt(n);return h.jsx(bpe,{"data-radix-menubar-subtrigger":"",...o,...r,ref:t})});Dx.displayName=BR;var $R="MenubarSubContent",Rx=v.forwardRef((e,t)=>{const{__scopeMenubar:n,...r}=e,o=Pt(n);return h.jsx(xpe,{...o,"data-radix-menubar-content":"",...r,ref:t,style:{...e.style,"--radix-menubar-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-menubar-content-available-width":"var(--radix-popper-available-width)","--radix-menubar-content-available-height":"var(--radix-popper-available-height)","--radix-menubar-trigger-width":"var(--radix-popper-anchor-width)","--radix-menubar-trigger-height":"var(--radix-popper-anchor-height)"}})});Rx.displayName=$R;function FR(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var Lx=jx,zR=Ex,Bx=Sx,VR=Mx,$x=Cx,Fx=Px,zx=Nx,Vx=kx,Ux=Ax,qx=Tx,Hx=Ix,Wx=Dx,Xx=Rx;const Gp=zR,Qx=v.forwardRef(({className:e,...t},n)=>h.jsx(Lx,{ref:n,className:re("flex h-10 items-center space-x-1 rounded-md border bg-background p-1",e),...t}));Qx.displayName=Lx.displayName;const Kp=v.forwardRef(({className:e,...t},n)=>h.jsx(Bx,{ref:n,className:re("flex cursor-default select-none items-center rounded-sm px-3 py-1.5 text-sm font-medium outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground",e),...t}));Kp.displayName=Bx.displayName;const UR=v.forwardRef(({className:e,inset:t,children:n,...r},o)=>h.jsxs(Wx,{ref:o,className:re("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground",t&&"pl-8",e),...r,children:[n,h.jsx(ge,{name:"chevron-right",className:"ml-auto h-4 w-4"})]}));UR.displayName=Wx.displayName;const qR=v.forwardRef(({className:e,...t},n)=>h.jsx(Xx,{ref:n,className:re("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));qR.displayName=Xx.displayName;const Yx=v.forwardRef(({className:e,align:t="start",alignOffset:n=-4,sideOffset:r=8,...o},i)=>h.jsx(VR,{children:h.jsx($x,{ref:i,align:t,alignOffset:n,sideOffset:r,className:re("z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...o})}));Yx.displayName=$x.displayName;const Gx=v.forwardRef(({className:e,inset:t,...n},r)=>h.jsx(zx,{ref:r,className:re("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...n}));Gx.displayName=zx.displayName;const HR=v.forwardRef(({className:e,children:t,checked:n,...r},o)=>h.jsxs(Vx,{ref:o,className:re("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:n,...r,children:[h.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:h.jsx(qx,{children:h.jsx(ge,{name:"check",className:"h-4 w-4"})})}),t]}));HR.displayName=Vx.displayName;const WR=v.forwardRef(({className:e,children:t,...n},r)=>h.jsxs(Ux,{ref:r,className:re("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[h.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:h.jsx(qx,{children:h.jsx(ge,{name:"circle",className:"h-2 w-2 fill-current"})})}),t]}));WR.displayName=Ux.displayName;const XR=v.forwardRef(({className:e,inset:t,...n},r)=>h.jsx(Fx,{ref:r,className:re("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...n}));XR.displayName=Fx.displayName;const QR=v.forwardRef(({className:e,...t},n)=>h.jsx(Hx,{ref:n,className:re("-mx-1 my-1 h-px bg-muted",e),...t}));QR.displayName=Hx.displayName;const ft=v.forwardRef(({className:e,...t},n)=>h.jsx("div",{ref:n,className:re("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));ft.displayName="Card";const Bt=v.forwardRef(({className:e,...t},n)=>h.jsx("div",{ref:n,className:re("flex flex-col space-y-1.5 p-6",e),...t}));Bt.displayName="CardHeader";const Zt=v.forwardRef(({className:e,...t},n)=>h.jsx("h3",{ref:n,className:re("text-2xl font-semibold leading-none tracking-tight",e),...t}));Zt.displayName="CardTitle";const Kx=v.forwardRef(({className:e,...t},n)=>h.jsx("p",{ref:n,className:re("text-sm text-muted-foreground",e),...t}));Kx.displayName="CardDescription";const $t=v.forwardRef(({className:e,...t},n)=>h.jsx("div",{ref:n,className:re("p-6 pt-0",e),...t}));$t.displayName="CardContent";const Nr=v.forwardRef(({className:e,...t},n)=>h.jsx("div",{ref:n,className:re("flex items-center p-6 pt-0",e),...t}));Nr.displayName="CardFooter";function YR(){this.__data__=[],this.size=0}var GR=YR;function KR(e,t){return e===t||e!==e&&t!==t}let Zx;da=KR,Zx=da;function ZR(e,t){for(var n=e.length;n--;)if(Zx(e[n][0],t))return n;return-1}var el=ZR,JR=el,e6=Array.prototype,t6=e6.splice;function n6(e){var t=this.__data__,n=JR(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():t6.call(t,n,1),--this.size,!0}var r6=n6,o6=el;function i6(e){var t=this.__data__,n=o6(t,e);return n<0?void 0:t[n][1]}var a6=i6,s6=el;function c6(e){return s6(this.__data__,e)>-1}var l6=c6,u6=el;function d6(e,t){var n=this.__data__,r=u6(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}var p6=d6,f6=GR,h6=r6,m6=a6,y6=l6,g6=p6;function Ko(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Ko.prototype.clear=f6,Ko.prototype.delete=h6,Ko.prototype.get=m6,Ko.prototype.has=y6,Ko.prototype.set=g6;var tl=Ko,v6=tl;function b6(){this.__data__=new v6,this.size=0}var x6=b6;function w6(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}var _6=w6;function j6(e){return this.__data__.get(e)}var O6=j6;function E6(e){return this.__data__.has(e)}let Jx,ew,Zp,tw,nw,rw,ow,iw,Jp,ef,aw,sw,Zo;Jx=E6,ew=typeof sa=="object"&&sa&&sa.Object===Object&&sa,Zp=ew,tw=Zp,nw=typeof self=="object"&&self&&self.Object===Object&&self,rw=tw||nw||Function("return this")(),gn=rw,ow=gn,iw=ow.Symbol,Ro=iw,Jp=Ro,ef=Object.prototype,aw=ef.hasOwnProperty,sw=ef.toString,Zo=Jp?Jp.toStringTag:void 0;function S6(e){var t=aw.call(e,Zo),n=e[Zo];try{e[Zo]=void 0;var r=!0}catch{}var o=sw.call(e);return r&&(t?e[Zo]=n:delete e[Zo]),o}var M6=S6,C6=Object.prototype,P6=C6.toString;function N6(e){return P6.call(e)}var k6=N6,cw=Ro,A6=M6,T6=k6,I6="[object Null]",D6="[object Undefined]",lw=cw?cw.toStringTag:void 0;function R6(e){return e==null?e===void 0?D6:I6:lw&&lw in Object(e)?A6(e):T6(e)}var cr=R6;function L6(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}vn=L6;const Jo=Ne(vn);var B6=cr,$6=vn,F6="[object AsyncFunction]",z6="[object Function]",V6="[object GeneratorFunction]",U6="[object Proxy]";function q6(e){if(!$6(e))return!1;var t=B6(e);return t==z6||t==V6||t==F6||t==U6}lc=q6;const Ce=Ne(lc);var H6=gn,W6=H6["__core-js_shared__"],X6=W6,tf=X6,uw=function(){var e=/[^.]+$/.exec(tf&&tf.keys&&tf.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function Q6(e){return!!uw&&uw in e}var Y6=Q6,G6=Function.prototype,K6=G6.toString;function Z6(e){if(e!=null){try{return K6.call(e)}catch{}try{return e+""}catch{}}return""}var dw=Z6,J6=lc,e8=Y6,t8=vn,n8=dw,r8=/[\\^$.*+?()[\]{}|]/g,o8=/^\[object .+?Constructor\]$/,i8=Function.prototype,a8=Object.prototype,s8=i8.toString,c8=a8.hasOwnProperty,l8=RegExp("^"+s8.call(c8).replace(r8,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function u8(e){if(!t8(e)||e8(e))return!1;var t=J6(e)?l8:o8;return t.test(n8(e))}var d8=u8;function p8(e,t){return e==null?void 0:e[t]}var f8=p8,h8=d8,m8=f8;function y8(e,t){var n=m8(e,t);return h8(n)?n:void 0}var no=y8,g8=no,v8=gn,b8=g8(v8,"Map"),nf=b8,x8=no,w8=x8(Object,"create"),nl=w8,pw=nl;function _8(){this.__data__=pw?pw(null):{},this.size=0}var j8=_8;function O8(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var E8=O8,S8=nl,M8="__lodash_hash_undefined__",C8=Object.prototype,P8=C8.hasOwnProperty;function N8(e){var t=this.__data__;if(S8){var n=t[e];return n===M8?void 0:n}return P8.call(t,e)?t[e]:void 0}var k8=N8,A8=nl,T8=Object.prototype,I8=T8.hasOwnProperty;function D8(e){var t=this.__data__;return A8?t[e]!==void 0:I8.call(t,e)}var R8=D8,L8=nl,B8="__lodash_hash_undefined__";function $8(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=L8&&t===void 0?B8:t,this}var F8=$8,z8=j8,V8=E8,U8=k8,q8=R8,H8=F8;function ei(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}ei.prototype.clear=z8,ei.prototype.delete=V8,ei.prototype.get=U8,ei.prototype.has=q8,ei.prototype.set=H8;var W8=ei,fw=W8,X8=tl,Q8=nf;function Y8(){this.size=0,this.__data__={hash:new fw,map:new(Q8||X8),string:new fw}}var G8=Y8;function K8(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var Z8=K8,J8=Z8;function eL(e,t){var n=e.__data__;return J8(t)?n[typeof t=="string"?"string":"hash"]:n.map}var rl=eL,tL=rl;function nL(e){var t=tL(this,e).delete(e);return this.size-=t?1:0,t}var rL=nL,oL=rl;function iL(e){return oL(this,e).get(e)}var aL=iL,sL=rl;function cL(e){return sL(this,e).has(e)}var lL=cL,uL=rl;function dL(e,t){var n=uL(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}var pL=dL,fL=G8,hL=rL,mL=aL,yL=lL,gL=pL;function ti(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}ti.prototype.clear=fL,ti.prototype.delete=hL,ti.prototype.get=mL,ti.prototype.has=yL,ti.prototype.set=gL;var rf=ti,vL=tl,bL=nf,xL=rf,wL=200;function _L(e,t){var n=this.__data__;if(n instanceof vL){var r=n.__data__;if(!bL||r.length<wL-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new xL(r)}return n.set(e,t),this.size=n.size,this}var jL=_L,OL=tl,EL=x6,SL=_6,ML=O6,CL=Jx,PL=jL;function ni(e){var t=this.__data__=new OL(e);this.size=t.size}ni.prototype.clear=EL,ni.prototype.delete=SL,ni.prototype.get=ML,ni.prototype.has=CL,ni.prototype.set=PL;let hw;Kd=ni,hw="__lodash_hash_undefined__";function NL(e){return this.__data__.set(e,hw),this}var kL=NL;function AL(e){return this.__data__.has(e)}var TL=AL,IL=rf,DL=kL,RL=TL;function ol(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new IL;++t<n;)this.add(e[t])}ol.prototype.add=ol.prototype.push=DL,ol.prototype.has=RL;var mw=ol;function LL(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var yw=LL;function BL(e,t){return e.has(t)}var gw=BL,$L=mw,FL=yw,zL=gw,VL=1,UL=2;function qL(e,t,n,r,o,i){var a=n&VL,s=e.length,c=t.length;if(s!=c&&!(a&&c>s))return!1;var l=i.get(e),u=i.get(t);if(l&&u)return l==t&&u==e;var d=-1,p=!0,f=n&UL?new $L:void 0;for(i.set(e,t),i.set(t,e);++d<s;){var y=e[d],m=t[d];if(r)var g=a?r(m,y,d,t,e,i):r(y,m,d,e,t,i);if(g!==void 0){if(g)continue;p=!1;break}if(f){if(!FL(t,function(b,w){if(!zL(f,w)&&(y===b||o(y,b,n,r,i)))return f.push(w)})){p=!1;break}}else if(!(y===m||o(y,m,n,r,i))){p=!1;break}}return i.delete(e),i.delete(t),p}let of,vw,bw;of=qL,vw=gn,bw=vw.Uint8Array,gv=bw;function HL(e){var t=-1,n=Array(e.size);return e.forEach(function(r,o){n[++t]=[o,r]}),n}var WL=HL;function XL(e){var t=-1,n=Array(e.size);return e.forEach(function(r){n[++t]=r}),n}var af=XL,xw=Ro,ww=gv,QL=da,YL=of,GL=WL,KL=af,ZL=1,JL=2,e9="[object Boolean]",t9="[object Date]",n9="[object Error]",r9="[object Map]",o9="[object Number]",i9="[object RegExp]",a9="[object Set]",s9="[object String]",c9="[object Symbol]",l9="[object ArrayBuffer]",u9="[object DataView]",_w=xw?xw.prototype:void 0,sf=_w?_w.valueOf:void 0;function d9(e,t,n,r,o,i,a){switch(n){case u9:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case l9:return!(e.byteLength!=t.byteLength||!i(new ww(e),new ww(t)));case e9:case t9:case o9:return QL(+e,+t);case n9:return e.name==t.name&&e.message==t.message;case i9:case s9:return e==t+"";case r9:var s=GL;case a9:var c=r&ZL;if(s||(s=KL),e.size!=t.size&&!c)return!1;var l=a.get(e);if(l)return l==t;r|=JL,a.set(e,t);var u=YL(s(e),s(t),r,o,i,a);return a.delete(e),u;case c9:if(sf)return sf.call(e)==sf.call(t)}return!1}var p9=d9;function f9(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}let il,jw,Ow,Ew;il=f9,jw=Array.isArray,Ct=jw,Ow=il,Ew=Ct;function h9(e,t,n){var r=t(e);return Ew(e)?r:Ow(r,n(e))}var Sw=h9;function m9(e,t){for(var n=-1,r=e==null?0:e.length,o=0,i=[];++n<r;){var a=e[n];t(a,n,e)&&(i[o++]=a)}return i}var y9=m9;function g9(){return[]}let cf,Mw,Cw,Pw,Nw,lf,kw;cf=g9,Mw=y9,Cw=cf,Pw=Object.prototype,Nw=Pw.propertyIsEnumerable,lf=Object.getOwnPropertySymbols,kw=lf?function(e){return e==null?[]:(e=Object(e),Mw(lf(e),function(t){return Nw.call(e,t)}))}:Cw,Wd=kw;function v9(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var b9=v9;function x9(e){return e!=null&&typeof e=="object"}let Aw,Tw,Iw;Rn=x9,Aw=cr,Tw=Rn,Iw="[object Arguments]";function w9(e){return Tw(e)&&Aw(e)==Iw}let Dw,uf,Rw,df,Lw,Bw,$w,La;Dw=w9,uf=Dw,Rw=Rn,df=Object.prototype,Lw=df.hasOwnProperty,Bw=df.propertyIsEnumerable,$w=uf(function(){return arguments}())?uf:function(e){return Rw(e)&&Lw.call(e,"callee")&&!Bw.call(e,"callee")},cc=$w,La={exports:{}};function _9(){return!1}var j9=_9;La.exports,function(e,t){var n=gn,r=j9,o=t&&!t.nodeType&&t,i=o&&!0&&e&&!e.nodeType&&e,a=i&&i.exports===o,s=a?n.Buffer:void 0,c=s?s.isBuffer:void 0,l=c||r;e.exports=l}(La,La.exports);let Fw,zw;Zd=La.exports,Fw=9007199254740991,zw=/^(?:0|[1-9]\d*)$/;function O9(e,t){var n=typeof e;return t=t??Fw,!!t&&(n=="number"||n!="symbol"&&zw.test(e))&&e>-1&&e%1==0&&e<t}var al=O9,E9=9007199254740991;function S9(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=E9}var pf=S9,M9=cr,C9=pf,P9=Rn,N9="[object Arguments]",k9="[object Array]",A9="[object Boolean]",T9="[object Date]",I9="[object Error]",D9="[object Function]",R9="[object Map]",L9="[object Number]",B9="[object Object]",$9="[object RegExp]",F9="[object Set]",z9="[object String]",V9="[object WeakMap]",U9="[object ArrayBuffer]",q9="[object DataView]",H9="[object Float32Array]",W9="[object Float64Array]",X9="[object Int8Array]",Q9="[object Int16Array]",Y9="[object Int32Array]",G9="[object Uint8Array]",K9="[object Uint8ClampedArray]",Z9="[object Uint16Array]",J9="[object Uint32Array]",He={};He[H9]=He[W9]=He[X9]=He[Q9]=He[Y9]=He[G9]=He[K9]=He[Z9]=He[J9]=!0,He[N9]=He[k9]=He[U9]=He[A9]=He[q9]=He[T9]=He[I9]=He[D9]=He[R9]=He[L9]=He[B9]=He[$9]=He[F9]=He[z9]=He[V9]=!1;function eB(e){return P9(e)&&C9(e.length)&&!!He[M9(e)]}var tB=eB;function nB(e){return function(t){return e(t)}}let Ba;Gd=nB,Ba={exports:{}},Ba.exports,function(e,t){var n=Zp,r=t&&!t.nodeType&&t,o=r&&!0&&e&&!e.nodeType&&e,i=o&&o.exports===r,a=i&&n.process,s=function(){try{var c=o&&o.require&&o.require("util").types;return c||a&&a.binding&&a.binding("util")}catch{}}();e.exports=s}(Ba,Ba.exports);let Vw,Uw,ff,hf,qw,Hw,Ww,Xw,Qw,Yw,Gw,Kw,Zw;bv=Ba.exports,Vw=tB,Uw=Gd,ff=bv,hf=ff&&ff.isTypedArray,qw=hf?Uw(hf):Vw,Dd=qw,Hw=b9,Ww=cc,Xw=Ct,Qw=Zd,Yw=al,Gw=Dd,Kw=Object.prototype,Zw=Kw.hasOwnProperty;function rB(e,t){var n=Xw(e),r=!n&&Ww(e),o=!n&&!r&&Qw(e),i=!n&&!r&&!o&&Gw(e),a=n||r||o||i,s=a?Hw(e.length,String):[],c=s.length;for(var l in e)(t||Zw.call(e,l))&&!(a&&(l=="length"||o&&(l=="offset"||l=="parent")||i&&(l=="buffer"||l=="byteLength"||l=="byteOffset")||Yw(l,c)))&&s.push(l);return s}var Jw=rB,oB=Object.prototype;function iB(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||oB;return e===n}Yd=iB;function aB(e,t){return function(n){return e(t(n))}}var e1=aB,sB=e1,cB=sB(Object.keys,Object),lB=cB,uB=Yd,dB=lB,pB=Object.prototype,fB=pB.hasOwnProperty;function hB(e){if(!uB(e))return dB(e);var t=[];for(var n in Object(e))fB.call(e,n)&&n!="constructor"&&t.push(n);return t}var mB=hB,yB=lc,gB=pf;function vB(e){return e!=null&&gB(e.length)&&!yB(e)}let t1,n1,r1;Xr=vB,t1=Jw,n1=mB,r1=Xr;function bB(e){return r1(e)?t1(e):n1(e)}let o1,i1,a1;pa=bB,o1=Sw,i1=Wd,a1=pa;function xB(e){return o1(e,a1,i1)}let mf,s1,c1,l1;xv=xB,mf=xv,s1=1,c1=Object.prototype,l1=c1.hasOwnProperty;function wB(e,t,n,r,o,i){var a=n&s1,s=mf(e),c=s.length,l=mf(t),u=l.length;if(c!=u&&!a)return!1;for(var d=c;d--;){var p=s[d];if(!(a?p in t:l1.call(t,p)))return!1}var f=i.get(e),y=i.get(t);if(f&&y)return f==t&&y==e;var m=!0;i.set(e,t),i.set(t,e);for(var g=a;++d<c;){p=s[d];var b=e[p],w=t[p];if(r)var _=a?r(w,b,p,t,e,i):r(b,w,p,e,t,i);if(!(_===void 0?b===w||o(b,w,n,r,i):_)){m=!1;break}g||(g=p=="constructor")}if(m&&!g){var x=e.constructor,j=t.constructor;x!=j&&"constructor"in e&&"constructor"in t&&!(typeof x=="function"&&x instanceof x&&typeof j=="function"&&j instanceof j)&&(m=!1)}return i.delete(e),i.delete(t),m}var _B=wB,jB=no,OB=gn,EB=jB(OB,"DataView"),SB=EB,MB=no,CB=gn,PB=MB(CB,"Promise"),NB=PB,kB=no,AB=gn,TB=kB(AB,"Set"),u1=TB,IB=no,DB=gn,RB=IB(DB,"WeakMap"),LB=RB,yf=SB,gf=nf,vf=NB,bf=u1,xf=LB,d1=cr,ri=dw,p1="[object Map]",BB="[object Object]",f1="[object Promise]",h1="[object Set]",m1="[object WeakMap]",y1="[object DataView]",$B=ri(yf),FB=ri(gf),zB=ri(vf),VB=ri(bf),UB=ri(xf),ro=d1;(yf&&ro(new yf(new ArrayBuffer(1)))!=y1||gf&&ro(new gf)!=p1||vf&&ro(vf.resolve())!=f1||bf&&ro(new bf)!=h1||xf&&ro(new xf)!=m1)&&(ro=function(e){var t=d1(e),n=t==BB?e.constructor:void 0,r=n?ri(n):"";if(r)switch(r){case $B:return y1;case FB:return p1;case zB:return f1;case VB:return h1;case UB:return m1}return t});let sl,g1,v1,b1,wf,_f,jf,x1,w1,Of,Ef,$a,_1,Sf;vv=ro,sl=Kd,g1=of,v1=p9,b1=_B,wf=vv,_f=Ct,jf=Zd,x1=Dd,w1=1,Of="[object Arguments]",Ef="[object Array]",$a="[object Object]",_1=Object.prototype,Sf=_1.hasOwnProperty;function qB(e,t,n,r,o,i){var a=_f(e),s=_f(t),c=a?Ef:wf(e),l=s?Ef:wf(t);c=c==Of?$a:c,l=l==Of?$a:l;var u=c==$a,d=l==$a,p=c==l;if(p&&jf(e)){if(!jf(t))return!1;a=!0,u=!1}if(p&&!u)return i||(i=new sl),a||x1(e)?g1(e,t,n,r,o,i):v1(e,t,c,n,r,o,i);if(!(n&w1)){var f=u&&Sf.call(e,"__wrapped__"),y=d&&Sf.call(t,"__wrapped__");if(f||y){var m=f?e.value():e,g=y?t.value():t;return i||(i=new sl),o(m,g,n,r,i)}}return p?(i||(i=new sl),b1(e,t,n,r,o,i)):!1}var HB=qB,WB=HB,j1=Rn;function O1(e,t,n,r,o){return e===t?!0:e==null||t==null||!j1(e)&&!j1(t)?e!==e&&t!==t:WB(e,t,n,r,O1,o)}var Mf=O1,XB=Kd,QB=Mf,YB=1,GB=2;function KB(e,t,n,r){var o=n.length,i=o,a=!r;if(e==null)return!i;for(e=Object(e);o--;){var s=n[o];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++o<i;){s=n[o];var c=s[0],l=e[c],u=s[1];if(a&&s[2]){if(l===void 0&&!(c in e))return!1}else{var d=new XB;if(r)var p=r(l,u,c,e,t,d);if(!(p===void 0?QB(u,l,YB|GB,r,d):p))return!1}}return!0}var ZB=KB,JB=vn;function e$(e){return e===e&&!JB(e)}var E1=e$,t$=E1,n$=pa;function r$(e){for(var t=n$(e),n=t.length;n--;){var r=t[n],o=e[r];t[n]=[r,o,t$(o)]}return t}var o$=r$;function i$(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}}var S1=i$,a$=ZB,s$=o$,c$=S1;function l$(e){var t=s$(e);return t.length==1&&t[0][2]?c$(t[0][0],t[0][1]):function(n){return n===e||a$(n,e,t)}}var u$=l$,d$=cr,p$=Rn,f$="[object Symbol]";function h$(e){return typeof e=="symbol"||p$(e)&&d$(e)==f$}var oi=h$,m$=Ct,y$=oi,g$=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,v$=/^\w*$/;function b$(e,t){if(m$(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||y$(e)?!0:v$.test(e)||!g$.test(e)||t!=null&&e in Object(t)}var Cf=b$,M1=rf,x$="Expected a function";function Pf(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(x$);var n=function(){var r=arguments,o=t?t.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var a=e.apply(this,r);return n.cache=i.set(o,a)||i,a};return n.cache=new(Pf.Cache||M1),n}Pf.Cache=M1;var C1=Pf;const w$=Ne(C1);var _$=C1,j$=500;function O$(e){var t=_$(e,function(r){return n.size===j$&&n.clear(),r}),n=t.cache;return t}var E$=O$,S$=E$,M$=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,C$=/\\(\\)?/g,P$=S$(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(M$,function(n,r,o,i){t.push(o?i.replace(C$,"$1"):r||n)}),t}),N$=P$;function k$(e,t){for(var n=-1,r=e==null?0:e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o}let Nf,P1,N1,k1,A1,kf,Af;ua=k$,Nf=Ro,P1=ua,N1=Ct,k1=oi,A1=1/0,kf=Nf?Nf.prototype:void 0,Af=kf?kf.toString:void 0;function T1(e){if(typeof e=="string")return e;if(N1(e))return P1(e,T1)+"";if(k1(e))return Af?Af.call(e):"";var t=e+"";return t=="0"&&1/e==-A1?"-0":t}var A$=T1,T$=A$;function I$(e){return e==null?"":T$(e)}var I1=I$,D$=Ct,R$=Cf,L$=N$,B$=I1;function $$(e,t){return D$(e)?e:R$(e,t)?[e]:L$(B$(e))}let D1,R1;ha=$$,D1=oi,R1=1/0;function F$(e){if(typeof e=="string"||D1(e))return e;var t=e+"";return t=="0"&&1/e==-R1?"-0":t}let L1,B1;Lo=F$,L1=ha,B1=Lo;function z$(e,t){t=L1(t,e);for(var n=0,r=t.length;e!=null&&n<r;)e=e[B1(t[n++])];return n&&n==r?e:void 0}let $1;fa=z$,$1=fa;function V$(e,t,n){var r=e==null?void 0:$1(e,t);return r===void 0?n:r}var F1=V$;const sn=Ne(F1);function U$(e,t){return e!=null&&t in Object(e)}var q$=U$,H$=ha,W$=cc,X$=Ct,Q$=al,Y$=pf,G$=Lo;function K$(e,t,n){t=H$(t,e);for(var r=-1,o=t.length,i=!1;++r<o;){var a=G$(t[r]);if(!(i=e!=null&&n(e,a)))break;e=e[a]}return i||++r!=o?i:(o=e==null?0:e.length,!!o&&Y$(o)&&Q$(a,o)&&(X$(e)||W$(e)))}var Z$=K$,J$=q$,e7=Z$;function t7(e,t){return e!=null&&e7(e,t,J$)}let z1,V1,U1,q1,H1,W1,X1,Q1,Y1;rv=t7,z1=Mf,V1=F1,U1=rv,q1=Cf,H1=E1,W1=S1,X1=Lo,Q1=1,Y1=2;function n7(e,t){return q1(e)&&H1(t)?W1(X1(e),t):function(n){var r=V1(n,e);return r===void 0&&r===t?U1(n,e):z1(t,r,Q1|Y1)}}var r7=n7;function o7(e){return e}var ii=o7;function i7(e){return function(t){return t==null?void 0:t[e]}}var a7=i7,s7=fa;function c7(e){return function(t){return s7(t,e)}}var l7=c7,u7=a7,d7=l7,p7=Cf,f7=Lo;function h7(e){return p7(e)?u7(f7(e)):d7(e)}var m7=h7,y7=u$,g7=r7,v7=ii,b7=Ct,x7=m7;function w7(e){return typeof e=="function"?e:e==null?v7:typeof e=="object"?b7(e)?g7(e[0],e[1]):y7(e):x7(e)}var zn=w7,_7="Expected a function";function j7(e){if(typeof e!="function")throw new TypeError(_7);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}var O7=j7,E7=no,S7=function(){try{var e=E7(Object,"defineProperty");return e({},"",{}),e}catch{}}(),G1=S7,K1=G1;function M7(e,t,n){t=="__proto__"&&K1?K1(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}let Z1,J1,e_,t_;$d=M7,Z1=$d,J1=da,e_=Object.prototype,t_=e_.hasOwnProperty;function C7(e,t,n){var r=e[t];(!(t_.call(e,t)&&J1(r,n))||n===void 0&&!(t in e))&&Z1(e,t,n)}let n_,r_,o_,Tf,i_;av=C7,n_=av,r_=ha,o_=al,Tf=vn,i_=Lo;function P7(e,t,n,r){if(!Tf(e))return e;t=r_(t,e);for(var o=-1,i=t.length,a=i-1,s=e;s!=null&&++o<i;){var c=i_(t[o]),l=n;if(c==="__proto__"||c==="constructor"||c==="prototype")return e;if(o!=a){var u=s[c];l=r?r(u,c,s):void 0,l===void 0&&(l=Tf(u)?u:o_(t[o+1])?[]:{})}n_(s,c,l),s=s[c]}return e}var N7=P7,k7=fa,A7=N7,T7=ha;function I7(e,t,n){for(var r=-1,o=t.length,i={};++r<o;){var a=t[r],s=k7(e,a);n(s,a)&&A7(i,T7(a,e),s)}return i}let a_,s_,c_,l_,u_,d_,p_,f_;nv=I7,a_=e1,s_=a_(Object.getPrototypeOf,Object),Qd=s_,c_=il,l_=Qd,u_=Wd,d_=cf,p_=Object.getOwnPropertySymbols,f_=p_?function(e){for(var t=[];e;)c_(t,u_(e)),e=l_(e);return t}:d_,yv=f_;function D7(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}var R7=D7,L7=vn,B7=Yd,$7=R7,F7=Object.prototype,z7=F7.hasOwnProperty;function V7(e){if(!L7(e))return $7(e);var t=B7(e),n=[];for(var r in e)r=="constructor"&&(t||!z7.call(e,r))||n.push(r);return n}var U7=V7,q7=Jw,H7=U7,W7=Xr;function X7(e){return W7(e)?q7(e,!0):H7(e)}let h_,m_,y_;mv=X7,h_=Sw,m_=yv,y_=mv;function Q7(e){return h_(e,y_,m_)}let g_,v_,b_,x_;wv=Q7,g_=ua,v_=zn,b_=nv,x_=wv;function Y7(e,t){if(e==null)return{};var n=g_(x_(e),function(r){return[r]});return t=v_(t),b_(e,n,function(r,o){return t(r,o[0])})}var G7=Y7,K7=zn,Z7=O7,J7=G7;function eF(e,t){return J7(e,Z7(K7(t)))}var tF=eF;const Fa=Ne(tF);function nF(e){return e===void 0}var rF=nF;const za=Ne(rF);var oF=function(e){return iF(e)&&!aF(e)};function iF(e){return!!e&&typeof e=="object"}function aF(e){var t=Object.prototype.toString.call(e);return t==="[object RegExp]"||t==="[object Date]"||lF(e)}var sF=typeof Symbol=="function"&&Symbol.for,cF=sF?Symbol.for("react.element"):60103;function lF(e){return e.$$typeof===cF}function uF(e){return Array.isArray(e)?[]:{}}function Va(e,t){return t.clone!==!1&&t.isMergeableObject(e)?ai(uF(e),e,t):e}function dF(e,t,n){return e.concat(t).map(function(r){return Va(r,n)})}function pF(e,t){if(!t.customMerge)return ai;var n=t.customMerge(e);return typeof n=="function"?n:ai}function fF(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter(function(t){return Object.propertyIsEnumerable.call(e,t)}):[]}function w_(e){return Object.keys(e).concat(fF(e))}function __(e,t){try{return t in e}catch{return!1}}function hF(e,t){return __(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))}function mF(e,t,n){var r={};return n.isMergeableObject(e)&&w_(e).forEach(function(o){r[o]=Va(e[o],n)}),w_(t).forEach(function(o){hF(e,o)||(__(e,o)&&n.isMergeableObject(t[o])?r[o]=pF(o,n)(e[o],t[o],n):r[o]=Va(t[o],n))}),r}function ai(e,t,n){n=n||{},n.arrayMerge=n.arrayMerge||dF,n.isMergeableObject=n.isMergeableObject||oF,n.cloneUnlessOtherwiseSpecified=Va;var r=Array.isArray(t),o=Array.isArray(e),i=r===o;return i?r?n.arrayMerge(e,t,n):mF(e,t,n):Va(t,n)}ai.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce(function(n,r){return ai(n,r,t)},{})};var yF=ai,gF=yF;const cl=Ne(gF);var j_;(function(e){(function(t){var n=typeof globalThis=="object"?globalThis:typeof sa=="object"?sa:typeof self=="object"?self:typeof this=="object"?this:s(),r=o(e);typeof n.Reflect<"u"&&(r=o(n.Reflect,r)),t(r,n),typeof n.Reflect>"u"&&(n.Reflect=e);function o(c,l){return function(u,d){Object.defineProperty(c,u,{configurable:!0,writable:!0,value:d}),l&&l(u,d)}}function i(){try{return Function("return this;")()}catch{}}function a(){try{return(0,eval)("(function() { return this; })()")}catch{}}function s(){return i()||a()}})(function(t,n){var r=Object.prototype.hasOwnProperty,o=typeof Symbol=="function",i=o&&typeof Symbol.toPrimitive<"u"?Symbol.toPrimitive:"@@toPrimitive",a=o&&typeof Symbol.iterator<"u"?Symbol.iterator:"@@iterator",s=typeof Object.create=="function",c={__proto__:[]}instanceof Array,l=!s&&!c,u={create:s?function(){return ac(Object.create(null))}:c?function(){return ac({__proto__:null})}:function(){return ac({})},has:l?function(U,W){return r.call(U,W)}:function(U,W){return W in U},get:l?function(U,W){return r.call(U,W)?U[W]:void 0}:function(U,W){return U[W]}},d=Object.getPrototypeOf(Function),p=typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:ia(),f=typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:Cg(),y=typeof WeakMap=="function"?WeakMap:ic(),m=o?Symbol.for("@reflect-metadata:registry"):void 0,g=Kn(),b=oc(g);function w(U,W,ee,ie){if(I(ee)){if(!ne(U))throw new TypeError;if(!ye(W))throw new TypeError;return T(U,W)}else{if(!ne(U))throw new TypeError;if(!q(W))throw new TypeError;if(!q(ie)&&!I(ie)&&!X(ie))throw new TypeError;return X(ie)&&(ie=void 0),ee=K(ee),L(U,W,ee,ie)}}t("decorate",w);function _(U,W){function ee(ie,be){if(!q(ie))throw new TypeError;if(!I(be)&&!fe(be))throw new TypeError;R(U,W,ie,be)}return ee}t("metadata",_);function x(U,W,ee,ie){if(!q(ee))throw new TypeError;return I(ie)||(ie=K(ie)),R(U,W,ee,ie)}t("defineMetadata",x);function j(U,W,ee){if(!q(W))throw new TypeError;return I(ee)||(ee=K(ee)),S(U,W,ee)}t("hasMetadata",j);function O(U,W,ee){if(!q(W))throw new TypeError;return I(ee)||(ee=K(ee)),C(U,W,ee)}t("hasOwnMetadata",O);function E(U,W,ee){if(!q(W))throw new TypeError;return I(ee)||(ee=K(ee)),k(U,W,ee)}t("getMetadata",E);function M(U,W,ee){if(!q(W))throw new TypeError;return I(ee)||(ee=K(ee)),D(U,W,ee)}t("getOwnMetadata",M);function N(U,W){if(!q(U))throw new TypeError;return I(W)||(W=K(W)),B(U,W)}t("getMetadataKeys",N);function A(U,W){if(!q(U))throw new TypeError;return I(W)||(W=K(W)),F(U,W)}t("getOwnMetadataKeys",A);function P(U,W,ee){if(!q(W))throw new TypeError;if(I(ee)||(ee=K(ee)),!q(W))throw new TypeError;I(ee)||(ee=K(ee));var ie=Nn(W,ee,!1);return I(ie)?!1:ie.OrdinaryDeleteMetadata(U,W,ee)}t("deleteMetadata",P);function T(U,W){for(var ee=U.length-1;ee>=0;--ee){var ie=U[ee],be=ie(W);if(!I(be)&&!X(be)){if(!ye(be))throw new TypeError;W=be}}return W}function L(U,W,ee,ie){for(var be=U.length-1;be>=0;--be){var lt=U[be],rt=lt(W,ee,ie);if(!I(rt)&&!X(rt)){if(!q(rt))throw new TypeError;ie=rt}}return ie}function S(U,W,ee){var ie=C(U,W,ee);if(ie)return!0;var be=nn(W);return X(be)?!1:S(U,be,ee)}function C(U,W,ee){var ie=Nn(W,ee,!1);return I(ie)?!1:Z(ie.OrdinaryHasOwnMetadata(U,W,ee))}function k(U,W,ee){var ie=C(U,W,ee);if(ie)return D(U,W,ee);var be=nn(W);if(!X(be))return k(U,be,ee)}function D(U,W,ee){var ie=Nn(W,ee,!1);if(!I(ie))return ie.OrdinaryGetOwnMetadata(U,W,ee)}function R(U,W,ee,ie){var be=Nn(ee,ie,!0);be.OrdinaryDefineOwnMetadata(U,W,ee,ie)}function B(U,W){var ee=F(U,W),ie=nn(U);if(ie===null)return ee;var be=B(ie,W);if(be.length<=0)return ee;if(ee.length<=0)return be;for(var lt=new f,rt=[],Ee=0,ce=ee;Ee<ce.length;Ee++){var de=ce[Ee],he=lt.has(de);he||(lt.add(de),rt.push(de))}for(var me=0,Se=be;me<Se.length;me++){var de=Se[me],he=lt.has(de);he||(lt.add(de),rt.push(de))}return rt}function F(U,W){var ee=Nn(U,W,!1);return ee?ee.OrdinaryOwnMetadataKeys(U,W):[]}function V(U){if(U===null)return 1;switch(typeof U){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return U===null?1:6;default:return 6}}function I(U){return U===void 0}function X(U){return U===null}function H(U){return typeof U=="symbol"}function q(U){return typeof U=="object"?U!==null:typeof U=="function"}function te(U,W){switch(V(U)){case 0:return U;case 1:return U;case 2:return U;case 3:return U;case 4:return U;case 5:return U}var ee="string",ie=Ae(U,i);if(ie!==void 0){var be=ie.call(U,ee);if(q(be))throw new TypeError;return be}return Q(U)}function Q(U,W){var ee,ie;{var be=U.toString;if(z(be)){var ie=be.call(U);if(!q(ie))return ie}var ee=U.valueOf;if(z(ee)){var ie=ee.call(U);if(!q(ie))return ie}}throw new TypeError}function Z(U){return!!U}function Y(U){return""+U}function K(U){var W=te(U);return H(W)?W:Y(W)}function ne(U){return Array.isArray?Array.isArray(U):U instanceof Object?U instanceof Array:Object.prototype.toString.call(U)==="[object Array]"}function z(U){return typeof U=="function"}function ye(U){return typeof U=="function"}function fe(U){switch(V(U)){case 3:return!0;case 4:return!0;default:return!1}}function Oe(U,W){return U===W||U!==U&&W!==W}function Ae(U,W){var ee=U[W];if(ee!=null){if(!z(ee))throw new TypeError;return ee}}function et(U){var W=Ae(U,a);if(!z(W))throw new TypeError;var ee=W.call(U);if(!q(ee))throw new TypeError;return ee}function Wt(U){return U.value}function Xt(U){var W=U.next();return W.done?!1:W}function Mt(U){var W=U.return;W&&W.call(U)}function nn(U){var W=Object.getPrototypeOf(U);if(typeof U!="function"||U===d||W!==d)return W;var ee=U.prototype,ie=ee&&Object.getPrototypeOf(ee);if(ie==null||ie===Object.prototype)return W;var be=ie.constructor;return typeof be!="function"||be===U?W:be}function Gn(){var U;!I(m)&&typeof n.Reflect<"u"&&!(m in n.Reflect)&&typeof n.Reflect.defineMetadata=="function"&&(U=Ao(n.Reflect));var W,ee,ie,be=new y,lt={registerProvider:rt,getProvider:ce,setProvider:he};return lt;function rt(me){if(!Object.isExtensible(lt))throw new Error("Cannot add provider to a frozen registry.");switch(!0){case U===me:break;case I(W):W=me;break;case W===me:break;case I(ee):ee=me;break;case ee===me:break;default:ie===void 0&&(ie=new f),ie.add(me);break}}function Ee(me,Se){if(!I(W)){if(W.isProviderFor(me,Se))return W;if(!I(ee)){if(ee.isProviderFor(me,Se))return W;if(!I(ie))for(var ze=et(ie);;){var tt=Xt(ze);if(!tt)return;var rn=Wt(tt);if(rn.isProviderFor(me,Se))return Mt(ze),rn}}}if(!I(U)&&U.isProviderFor(me,Se))return U}function ce(me,Se){var ze=be.get(me),tt;return I(ze)||(tt=ze.get(Se)),I(tt)&&(tt=Ee(me,Se),I(tt)||(I(ze)&&(ze=new p,be.set(me,ze)),ze.set(Se,tt))),tt}function de(me){if(I(me))throw new TypeError;return W===me||ee===me||!I(ie)&&ie.has(me)}function he(me,Se,ze){if(!de(ze))throw new Error("Metadata provider not registered.");var tt=ce(me,Se);if(tt!==ze){if(!I(tt))return!1;var rn=be.get(me);I(rn)&&(rn=new p,be.set(me,rn)),rn.set(Se,ze)}return!0}}function Kn(){var U;return!I(m)&&q(n.Reflect)&&Object.isExtensible(n.Reflect)&&(U=n.Reflect[m]),I(U)&&(U=Gn()),!I(m)&&q(n.Reflect)&&Object.isExtensible(n.Reflect)&&Object.defineProperty(n.Reflect,m,{enumerable:!1,configurable:!1,writable:!1,value:U}),U}function oc(U){var W=new y,ee={isProviderFor:function(de,he){var me=W.get(de);return I(me)?!1:me.has(he)},OrdinaryDefineOwnMetadata:rt,OrdinaryHasOwnMetadata:be,OrdinaryGetOwnMetadata:lt,OrdinaryOwnMetadataKeys:Ee,OrdinaryDeleteMetadata:ce};return g.registerProvider(ee),ee;function ie(de,he,me){var Se=W.get(de),ze=!1;if(I(Se)){if(!me)return;Se=new p,W.set(de,Se),ze=!0}var tt=Se.get(he);if(I(tt)){if(!me)return;if(tt=new p,Se.set(he,tt),!U.setProvider(de,he,ee))throw Se.delete(he),ze&&W.delete(de),new Error("Wrong provider for target.")}return tt}function be(de,he,me){var Se=ie(he,me,!1);return I(Se)?!1:Z(Se.has(de))}function lt(de,he,me){var Se=ie(he,me,!1);if(!I(Se))return Se.get(de)}function rt(de,he,me,Se){var ze=ie(me,Se,!0);ze.set(de,he)}function Ee(de,he){var me=[],Se=ie(de,he,!1);if(I(Se))return me;for(var ze=Se.keys(),tt=et(ze),rn=0;;){var Ed=Xt(tt);if(!Ed)return me.length=rn,me;var Pg=Wt(Ed);try{me[rn]=Pg}catch(Ng){try{Mt(tt)}finally{throw Ng}}rn++}}function ce(de,he,me){var Se=ie(he,me,!1);if(I(Se)||!Se.delete(de))return!1;if(Se.size===0){var ze=W.get(he);I(ze)||(ze.delete(me),ze.size===0&&W.delete(ze))}return!0}}function Ao(U){var W=U.defineMetadata,ee=U.hasOwnMetadata,ie=U.getOwnMetadata,be=U.getOwnMetadataKeys,lt=U.deleteMetadata,rt=new y,Ee={isProviderFor:function(ce,de){var he=rt.get(ce);return!I(he)&&he.has(de)?!0:be(ce,de).length?(I(he)&&(he=new f,rt.set(ce,he)),he.add(de),!0):!1},OrdinaryDefineOwnMetadata:W,OrdinaryHasOwnMetadata:ee,OrdinaryGetOwnMetadata:ie,OrdinaryOwnMetadataKeys:be,OrdinaryDeleteMetadata:lt};return Ee}function Nn(U,W,ee){var ie=g.getProvider(U,W);if(!I(ie))return ie;if(ee){if(g.setProvider(U,W,b))return b;throw new Error("Illegal state.")}}function ia(){var U={},W=[],ee=function(){function Ee(ce,de,he){this._index=0,this._keys=ce,this._values=de,this._selector=he}return Ee.prototype["@@iterator"]=function(){return this},Ee.prototype[a]=function(){return this},Ee.prototype.next=function(){var ce=this._index;if(ce>=0&&ce<this._keys.length){var de=this._selector(this._keys[ce],this._values[ce]);return ce+1>=this._keys.length?(this._index=-1,this._keys=W,this._values=W):this._index++,{value:de,done:!1}}return{value:void 0,done:!0}},Ee.prototype.throw=function(ce){throw this._index>=0&&(this._index=-1,this._keys=W,this._values=W),ce},Ee.prototype.return=function(ce){return this._index>=0&&(this._index=-1,this._keys=W,this._values=W),{value:ce,done:!0}},Ee}(),ie=function(){function Ee(){this._keys=[],this._values=[],this._cacheKey=U,this._cacheIndex=-2}return Object.defineProperty(Ee.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),Ee.prototype.has=function(ce){return this._find(ce,!1)>=0},Ee.prototype.get=function(ce){var de=this._find(ce,!1);return de>=0?this._values[de]:void 0},Ee.prototype.set=function(ce,de){var he=this._find(ce,!0);return this._values[he]=de,this},Ee.prototype.delete=function(ce){var de=this._find(ce,!1);if(de>=0){for(var he=this._keys.length,me=de+1;me<he;me++)this._keys[me-1]=this._keys[me],this._values[me-1]=this._values[me];return this._keys.length--,this._values.length--,Oe(ce,this._cacheKey)&&(this._cacheKey=U,this._cacheIndex=-2),!0}return!1},Ee.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=U,this._cacheIndex=-2},Ee.prototype.keys=function(){return new ee(this._keys,this._values,be)},Ee.prototype.values=function(){return new ee(this._keys,this._values,lt)},Ee.prototype.entries=function(){return new ee(this._keys,this._values,rt)},Ee.prototype["@@iterator"]=function(){return this.entries()},Ee.prototype[a]=function(){return this.entries()},Ee.prototype._find=function(ce,de){if(!Oe(this._cacheKey,ce)){this._cacheIndex=-1;for(var he=0;he<this._keys.length;he++)if(Oe(this._keys[he],ce)){this._cacheIndex=he;break}}return this._cacheIndex<0&&de&&(this._cacheIndex=this._keys.length,this._keys.push(ce),this._values.push(void 0)),this._cacheIndex},Ee}();return ie;function be(Ee,ce){return Ee}function lt(Ee,ce){return ce}function rt(Ee,ce){return[Ee,ce]}}function Cg(){var U=function(){function W(){this._map=new p}return Object.defineProperty(W.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),W.prototype.has=function(ee){return this._map.has(ee)},W.prototype.add=function(ee){return this._map.set(ee,ee),this},W.prototype.delete=function(ee){return this._map.delete(ee)},W.prototype.clear=function(){this._map.clear()},W.prototype.keys=function(){return this._map.keys()},W.prototype.values=function(){return this._map.keys()},W.prototype.entries=function(){return this._map.entries()},W.prototype["@@iterator"]=function(){return this.keys()},W.prototype[a]=function(){return this.keys()},W}();return U}function ic(){var U=16,W=u.create(),ee=ie();return function(){function ce(){this._key=ie()}return ce.prototype.has=function(de){var he=be(de,!1);return he!==void 0?u.has(he,this._key):!1},ce.prototype.get=function(de){var he=be(de,!1);return he!==void 0?u.get(he,this._key):void 0},ce.prototype.set=function(de,he){var me=be(de,!0);return me[this._key]=he,this},ce.prototype.delete=function(de){var he=be(de,!1);return he!==void 0?delete he[this._key]:!1},ce.prototype.clear=function(){this._key=ie()},ce}();function ie(){var ce;do ce="@@WeakMap@@"+Ee();while(u.has(W,ce));return W[ce]=!0,ce}function be(ce,de){if(!r.call(ce,ee)){if(!de)return;Object.defineProperty(ce,ee,{value:u.create()})}return ce[ee]}function lt(ce,de){for(var he=0;he<de;++he)ce[he]=Math.random()*255|0;return ce}function rt(ce){if(typeof Uint8Array=="function"){var de=new Uint8Array(ce);return typeof crypto<"u"?crypto.getRandomValues(de):typeof msCrypto<"u"?msCrypto.getRandomValues(de):lt(de,ce),de}return lt(new Array(ce),ce)}function Ee(){var ce=rt(U);ce[6]=ce[6]&79|64,ce[8]=ce[8]&191|128;for(var de="",he=0;he<U;++he){var me=ce[he];(he===4||he===6||he===8)&&(de+="-"),me<16&&(de+="0"),de+=me.toString(16).toLowerCase()}return de}}function ac(U){return U.__=void 0,delete U.__,U}})})(j_||(j_={})),Xd=globalThis||void 0||self,typeof window<"u"&&(window.Buffer=$de),typeof Xd<"u"&&typeof require<"u"&&(Xd.Buffer=require("buffer/").Buffer);class it{static isObject(t){return t!==null&&typeof t=="object"}static isObjectWithName(t){return t!==null&&typeof t=="object"&&t.name!==void 0}static assign(t,...n){for(const r of n)for(const o of Object.getOwnPropertyNames(r))t[o]=r[o]}static mixedListToArray(t){return t!==null&&typeof t=="object"?Object.keys(t).map(n=>t[n]):t}}class le extends Error{get name(){return this.constructor.name}constructor(t){super(t),Object.setPrototypeOf?Object.setPrototypeOf(this,new.target.prototype):this.__proto__=new.target.prototype}}class si extends le{constructor(){super("Locking not supported on given driver.")}}class If extends le{constructor(){super('Cannot perform update query because update values are not defined. Call "qb.set(...)" method to specify updated values.')}}class Ve{static isMssqlParameter(t){return this.check(t,"MssqlParameter")}static isEntityMetadata(t){return this.check(t,"EntityMetadata")}static isColumnMetadata(t){return this.check(t,"ColumnMetadata")}static isSelectQueryBuilder(t){return this.check(t,"SelectQueryBuilder")}static isInsertQueryBuilder(t){return this.check(t,"InsertQueryBuilder")}static isDeleteQueryBuilder(t){return this.check(t,"DeleteQueryBuilder")}static isUpdateQueryBuilder(t){return this.check(t,"UpdateQueryBuilder")}static isSoftDeleteQueryBuilder(t){return this.check(t,"SoftDeleteQueryBuilder")}static isRelationQueryBuilder(t){return this.check(t,"RelationQueryBuilder")}static isBrackets(t){return this.check(t,"Brackets")||this.check(t,"NotBrackets")}static isNotBrackets(t){return this.check(t,"NotBrackets")}static isSubject(t){return this.check(t,"Subject")}static isRdbmsSchemaBuilder(t){return this.check(t,"RdbmsSchemaBuilder")}static isMongoEntityManager(t){return this.check(t,"MongoEntityManager")}static isSqljsEntityManager(t){return this.check(t,"SqljsEntityManager")}static isEntitySchema(t){return this.check(t,"EntitySchema")}static isBaseEntityConstructor(t){return typeof t=="function"&&typeof t.hasId=="function"&&typeof t.save=="function"&&typeof t.useDataSource=="function"}static isFindOperator(t){return this.check(t,"FindOperator")||this.check(t,"EqualOperator")}static isEqualOperator(t){return this.check(t,"EqualOperator")}static isQuery(t){return this.check(t,"Query")}static isTable(t){return this.check(t,"Table")}static isTableCheck(t){return this.check(t,"TableCheck")}static isTableColumn(t){return this.check(t,"TableColumn")}static isTableExclusion(t){return this.check(t,"TableExclusion")}static isTableForeignKey(t){return this.check(t,"TableForeignKey")}static isTableIndex(t){return this.check(t,"TableIndex")}static isTableUnique(t){return this.check(t,"TableUnique")}static isView(t){return this.check(t,"View")}static isDataSource(t){return this.check(t,"DataSource")}static check(t,n){return typeof t=="object"&&t!==null&&t["@instanceof"]===Symbol.for(n)}}class vF extends le{constructor(t,n){super(),this.entityClass=t,this.criteria=n,this.message=`Could not find any entity of type "${this.stringifyTarget(t)}" matching: ${this.stringifyCriteria(n)}`}stringifyTarget(t){return Ve.isEntitySchema(t)?t.options.name:typeof t=="function"||it.isObject(t)&&"name"in t?t.name:t}stringifyCriteria(t){try{return JSON.stringify(t,null,4)}catch{}return""+t}}class O_ extends le{constructor(t,n,r){super(`The optimistic lock on entity ${t} failed, version ${n} was expected, but is actually ${r}.`)}}class E_ extends le{constructor(){super("Your database does not support LIMIT on UPDATE statements.")}}class bF extends le{constructor(t){super(`Entity "${t.name}" does not have delete date columns.`)}}class ll extends le{constructor(){super("OUTPUT or RETURNING clause only supported by Microsoft SQL Server or PostgreSQL or MariaDB databases.")}}class Vn extends le{constructor(t,n){super(t),Object.setPrototypeOf(this,Vn.prototype),this.message=`Property "${t}" was not found in "${n.targetName}". Make sure your query is correct.`}}class xF extends le{constructor(t){super(`Entity ${t} does not have version or update date columns.`)}}class wF extends le{constructor(){super('Cannot perform insert query because values are not defined. Call "qb.values(...)" method to specify inserted values.')}}class Ua extends le{constructor(){super("The optimistic lock can be used only with getOne() method.")}}class _F extends le{constructor(t){super(),t.length===1?this.message=`Relation "${t[0]}" was not found; please check if it is correct and really exists in your entity.`:this.message=`Relations ${t.map(n=>`"${n}"`).join(", ")} were not found; please check if relations are correct and they exist in your entities.`}}class jF extends le{constructor(){super("An open transaction is required for pessimistic lock.")}}class OF extends le{constructor(){super("RDBMS does not support OFFSET without LIMIT in SELECT statements. You must use limit in conjunction with offset function (or take in conjunction with skip function if you are using pagination).")}}class S_{constructor(t){it.assign(this,t||{})}get target(){return this.metadata.target}get hasMetadata(){return!!this._metadata}set metadata(t){this._metadata=t}get metadata(){if(!this._metadata)throw new le(`Cannot get entity metadata for the given alias "${this.name}"`);return this._metadata}}class Un{static isAliasProperty(t){if(typeof t!="string"||t.indexOf(".")===-1)return!1;const[n,r]=t.split(".");return!(!n||!r||t.indexOf("(")!==-1||t.indexOf(")")!==-1)}}var M_={exports:{}},Df={exports:{}};typeof Object.create=="function"?Df.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:Df.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}};var ci=Df.exports,Rf={exports:{}};(function(e,t){var n=Fde,r=n.Buffer;function o(a,s){for(var c in a)s[c]=a[c]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?e.exports=n:(o(n,t),t.Buffer=i);function i(a,s,c){return r(a,s,c)}i.prototype=Object.create(r.prototype),o(r,i),i.from=function(a,s,c){if(typeof a=="number")throw new TypeError("Argument must not be a number");return r(a,s,c)},i.alloc=function(a,s,c){if(typeof a!="number")throw new TypeError("Argument must be a number");var l=r(a);return s!==void 0?typeof c=="string"?l.fill(s,c):l.fill(s):l.fill(0),l},i.allocUnsafe=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return r(a)},i.allocUnsafeSlow=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return n.SlowBuffer(a)}})(Rf,Rf.exports);var oo=Rf.exports,C_=oo.Buffer;function ul(e,t){this._block=C_.alloc(e),this._finalSize=t,this._blockSize=e,this._len=0}ul.prototype.update=function(e,t){typeof e=="string"&&(t=t||"utf8",e=C_.from(e,t));for(var n=this._block,r=this._blockSize,o=e.length,i=this._len,a=0;a<o;){for(var s=i%r,c=Math.min(o-a,r-s),l=0;l<c;l++)n[s+l]=e[a+l];i+=c,a+=c,i%r===0&&this._update(n)}return this._len+=o,this},ul.prototype.digest=function(e){var t=this._len%this._blockSize;this._block[t]=128,this._block.fill(0,t+1),t>=this._finalSize&&(this._update(this._block),this._block.fill(0));var n=this._len*8;if(n<=4294967295)this._block.writeUInt32BE(n,this._blockSize-4);else{var r=(n&4294967295)>>>0,o=(n-r)/4294967296;this._block.writeUInt32BE(o,this._blockSize-8),this._block.writeUInt32BE(r,this._blockSize-4)}this._update(this._block);var i=this._hash();return e?i.toString(e):i},ul.prototype._update=function(){throw new Error("_update must be implemented by subclass")};var li=ul,EF=ci,P_=li,SF=oo.Buffer,MF=[1518500249,1859775393,-1894007588,-899497514],CF=new Array(80);function qa(){this.init(),this._w=CF,P_.call(this,64,56)}EF(qa,P_),qa.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function PF(e){return e<<5|e>>>27}function NF(e){return e<<30|e>>>2}function kF(e,t,n,r){return e===0?t&n|~t&r:e===2?t&n|t&r|n&r:t^n^r}qa.prototype._update=function(e){for(var t=this._w,n=this._a|0,r=this._b|0,o=this._c|0,i=this._d|0,a=this._e|0,s=0;s<16;++s)t[s]=e.readInt32BE(s*4);for(;s<80;++s)t[s]=t[s-3]^t[s-8]^t[s-14]^t[s-16];for(var c=0;c<80;++c){var l=~~(c/20),u=PF(n)+kF(l,r,o,i)+a+t[c]+MF[l]|0;a=i,i=o,o=NF(r),r=n,n=u}this._a=n+this._a|0,this._b=r+this._b|0,this._c=o+this._c|0,this._d=i+this._d|0,this._e=a+this._e|0},qa.prototype._hash=function(){var e=SF.allocUnsafe(20);return e.writeInt32BE(this._a|0,0),e.writeInt32BE(this._b|0,4),e.writeInt32BE(this._c|0,8),e.writeInt32BE(this._d|0,12),e.writeInt32BE(this._e|0,16),e};var AF=qa,TF=ci,N_=li,IF=oo.Buffer,DF=[1518500249,1859775393,-1894007588,-899497514],RF=new Array(80);function Ha(){this.init(),this._w=RF,N_.call(this,64,56)}TF(Ha,N_),Ha.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function LF(e){return e<<1|e>>>31}function BF(e){return e<<5|e>>>27}function $F(e){return e<<30|e>>>2}function FF(e,t,n,r){return e===0?t&n|~t&r:e===2?t&n|t&r|n&r:t^n^r}Ha.prototype._update=function(e){for(var t=this._w,n=this._a|0,r=this._b|0,o=this._c|0,i=this._d|0,a=this._e|0,s=0;s<16;++s)t[s]=e.readInt32BE(s*4);for(;s<80;++s)t[s]=LF(t[s-3]^t[s-8]^t[s-14]^t[s-16]);for(var c=0;c<80;++c){var l=~~(c/20),u=BF(n)+FF(l,r,o,i)+a+t[c]+DF[l]|0;a=i,i=o,o=$F(r),r=n,n=u}this._a=n+this._a|0,this._b=r+this._b|0,this._c=o+this._c|0,this._d=i+this._d|0,this._e=a+this._e|0},Ha.prototype._hash=function(){var e=IF.allocUnsafe(20);return e.writeInt32BE(this._a|0,0),e.writeInt32BE(this._b|0,4),e.writeInt32BE(this._c|0,8),e.writeInt32BE(this._d|0,12),e.writeInt32BE(this._e|0,16),e};var zF=Ha,VF=ci,k_=li,UF=oo.Buffer,qF=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],HF=new Array(64);function Wa(){this.init(),this._w=HF,k_.call(this,64,56)}VF(Wa,k_),Wa.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this};function WF(e,t,n){return n^e&(t^n)}function XF(e,t,n){return e&t|n&(e|t)}function QF(e){return(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10)}function YF(e){return(e>>>6|e<<26)^(e>>>11|e<<21)^(e>>>25|e<<7)}function GF(e){return(e>>>7|e<<25)^(e>>>18|e<<14)^e>>>3}function KF(e){return(e>>>17|e<<15)^(e>>>19|e<<13)^e>>>10}Wa.prototype._update=function(e){for(var t=this._w,n=this._a|0,r=this._b|0,o=this._c|0,i=this._d|0,a=this._e|0,s=this._f|0,c=this._g|0,l=this._h|0,u=0;u<16;++u)t[u]=e.readInt32BE(u*4);for(;u<64;++u)t[u]=KF(t[u-2])+t[u-7]+GF(t[u-15])+t[u-16]|0;for(var d=0;d<64;++d){var p=l+YF(a)+WF(a,s,c)+qF[d]+t[d]|0,f=QF(n)+XF(n,r,o)|0;l=c,c=s,s=a,a=i+p|0,i=o,o=r,r=n,n=p+f|0}this._a=n+this._a|0,this._b=r+this._b|0,this._c=o+this._c|0,this._d=i+this._d|0,this._e=a+this._e|0,this._f=s+this._f|0,this._g=c+this._g|0,this._h=l+this._h|0},Wa.prototype._hash=function(){var e=UF.allocUnsafe(32);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e.writeInt32BE(this._h,28),e};var A_=Wa,ZF=ci,JF=A_,ez=li,tz=oo.Buffer,nz=new Array(64);function dl(){this.init(),this._w=nz,ez.call(this,64,56)}ZF(dl,JF),dl.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},dl.prototype._hash=function(){var e=tz.allocUnsafe(28);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e};var rz=dl,oz=ci,T_=li,iz=oo.Buffer,I_=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],az=new Array(160);function Xa(){this.init(),this._w=az,T_.call(this,128,112)}oz(Xa,T_),Xa.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this};function D_(e,t,n){return n^e&(t^n)}function R_(e,t,n){return e&t|n&(e|t)}function L_(e,t){return(e>>>28|t<<4)^(t>>>2|e<<30)^(t>>>7|e<<25)}function B_(e,t){return(e>>>14|t<<18)^(e>>>18|t<<14)^(t>>>9|e<<23)}function sz(e,t){return(e>>>1|t<<31)^(e>>>8|t<<24)^e>>>7}function cz(e,t){return(e>>>1|t<<31)^(e>>>8|t<<24)^(e>>>7|t<<25)}function lz(e,t){return(e>>>19|t<<13)^(t>>>29|e<<3)^e>>>6}function uz(e,t){return(e>>>19|t<<13)^(t>>>29|e<<3)^(e>>>6|t<<26)}function ht(e,t){return e>>>0<t>>>0?1:0}Xa.prototype._update=function(e){for(var t=this._w,n=this._ah|0,r=this._bh|0,o=this._ch|0,i=this._dh|0,a=this._eh|0,s=this._fh|0,c=this._gh|0,l=this._hh|0,u=this._al|0,d=this._bl|0,p=this._cl|0,f=this._dl|0,y=this._el|0,m=this._fl|0,g=this._gl|0,b=this._hl|0,w=0;w<32;w+=2)t[w]=e.readInt32BE(w*4),t[w+1]=e.readInt32BE(w*4+4);for(;w<160;w+=2){var _=t[w-30],x=t[w-15*2+1],j=sz(_,x),O=cz(x,_);_=t[w-2*2],x=t[w-2*2+1];var E=lz(_,x),M=uz(x,_),N=t[w-7*2],A=t[w-7*2+1],P=t[w-16*2],T=t[w-16*2+1],L=O+A|0,S=j+N+ht(L,O)|0;L=L+M|0,S=S+E+ht(L,M)|0,L=L+T|0,S=S+P+ht(L,T)|0,t[w]=S,t[w+1]=L}for(var C=0;C<160;C+=2){S=t[C],L=t[C+1];var k=R_(n,r,o),D=R_(u,d,p),R=L_(n,u),B=L_(u,n),F=B_(a,y),V=B_(y,a),I=I_[C],X=I_[C+1],H=D_(a,s,c),q=D_(y,m,g),te=b+V|0,Q=l+F+ht(te,b)|0;te=te+q|0,Q=Q+H+ht(te,q)|0,te=te+X|0,Q=Q+I+ht(te,X)|0,te=te+L|0,Q=Q+S+ht(te,L)|0;var Z=B+D|0,Y=R+k+ht(Z,B)|0;l=c,b=g,c=s,g=m,s=a,m=y,y=f+te|0,a=i+Q+ht(y,f)|0,i=o,f=p,o=r,p=d,r=n,d=u,u=te+Z|0,n=Q+Y+ht(u,te)|0}this._al=this._al+u|0,this._bl=this._bl+d|0,this._cl=this._cl+p|0,this._dl=this._dl+f|0,this._el=this._el+y|0,this._fl=this._fl+m|0,this._gl=this._gl+g|0,this._hl=this._hl+b|0,this._ah=this._ah+n+ht(this._al,u)|0,this._bh=this._bh+r+ht(this._bl,d)|0,this._ch=this._ch+o+ht(this._cl,p)|0,this._dh=this._dh+i+ht(this._dl,f)|0,this._eh=this._eh+a+ht(this._el,y)|0,this._fh=this._fh+s+ht(this._fl,m)|0,this._gh=this._gh+c+ht(this._gl,g)|0,this._hh=this._hh+l+ht(this._hl,b)|0},Xa.prototype._hash=function(){var e=iz.allocUnsafe(64);function t(n,r,o){e.writeInt32BE(n,o),e.writeInt32BE(r,o+4)}return t(this._ah,this._al,0),t(this._bh,this._bl,8),t(this._ch,this._cl,16),t(this._dh,this._dl,24),t(this._eh,this._el,32),t(this._fh,this._fl,40),t(this._gh,this._gl,48),t(this._hh,this._hl,56),e};var $_=Xa,dz=ci,pz=$_,fz=li,hz=oo.Buffer,mz=new Array(160);function pl(){this.init(),this._w=mz,fz.call(this,128,112)}dz(pl,pz),pl.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},pl.prototype._hash=function(){var e=hz.allocUnsafe(48);function t(n,r,o){e.writeInt32BE(n,o),e.writeInt32BE(r,o+4)}return t(this._ah,this._al,0),t(this._bh,this._bl,8),t(this._ch,this._cl,16),t(this._dh,this._dl,24),t(this._eh,this._el,32),t(this._fh,this._fl,40),e};var yz=pl,io=M_.exports=function(e){e=e.toLowerCase();var t=io[e];if(!t)throw new Error(e+" is not supported (we accept pull requests)");return new t};io.sha=AF,io.sha1=zF,io.sha224=rz,io.sha256=A_,io.sha384=yz,io.sha512=$_;var gz=M_.exports;const vz=Ne(gz);function bz(e,t={}){const{segmentLength:n=4,separator:r="__",termLength:o=2}=t;return e.split(r).reduce((i,a)=>{const s=a.replace(/([a-z\xE0-\xFF])([A-Z\xC0-\xDF])/g,"$1 $2").split(" "),c=s.length>1?o:n,l=s.map(u=>u.substr(0,c)).join("");return i.push(l),i},[]).join(r)}function xz(e,t={}){const n=vz("sha1");n.update(e,"utf8");const r=n.digest("hex");return t.length?r.slice(0,t.length):r}class wz{static isGreaterOrEqual(t,n){const r=F_(t),o=F_(n);return r[0]>o[0]||r[0]===o[0]&&r[1]>o[1]||r[0]===o[0]&&r[1]===o[1]&&r[2]>=o[2]}}function F_(e=""){const t=[0,0,0];return e.split(".").forEach((n,r)=>t[r]=parseInt(n,10)),t}class se{static isSQLiteFamily(t){return["sqlite","cordova","react-native","nativescript","sqljs","expo","better-sqlite3","capacitor"].includes(t.options.type)}static isMySQLFamily(t){return["mysql","mariadb"].includes(t.options.type)}static isReleaseVersionOrGreater(t,n){return t.version!=null&&wz.isGreaterOrEqual(t.version,n)}static isPostgresFamily(t){return["postgres","aurora-postgres","cockroachdb"].includes(t.options.type)}static buildDriverOptions(t,n){if(t.url){const r=this.parseConnectionUrl(t.url);n&&n.useSid&&r.database&&(r.sid=r.database);for(const o of Object.keys(r))typeof r[o]>"u"&&delete r[o];return Object.assign({},t,r)}return Object.assign({},t)}static buildMongoDBDriverOptions(t,n){if(t.url){const r=this.parseMongoDBConnectionUrl(t.url);n&&n.useSid&&r.database&&(r.sid=r.database);for(const o of Object.keys(r))typeof r[o]>"u"&&delete r[o];return Object.assign({},t,r)}return Object.assign({},t)}static buildAlias({maxAliasLength:t},n,...r){const o=n&&n.joiner?n.joiner:"_";let i=r.length===1?r[0]:r.join(o);if(t&&t>0&&i.length>t){if(n&&n.shorten===!0){const a=bz(i);if(a.length<t)return a}return xz(i,{length:t})}return i}static buildColumnAlias({maxAliasLength:t},n,...r){return typeof n=="string"?(r.unshift(n),n={shorten:!1,joiner:"_"}):n=Object.assign({shorten:!1,joiner:"_"},n),this.buildAlias({maxAliasLength:t},n,...r)}static parseConnectionUrl(t){const n=t.split(":")[0],r=t.indexOf("//"),o=t.substr(r+2),i=o.indexOf("/"),a=i!==-1?o.substr(0,i):o;let s=i!==-1?o.substr(i+1):void 0;s&&s.indexOf("?")!==-1&&(s=s.substr(0,s.indexOf("?")));const c=a.lastIndexOf("@"),l=a.substr(0,c),u=a.substr(c+1);let d=l,p="";const f=l.indexOf(":");f!==-1&&(d=l.substr(0,f),p=l.substr(f+1));const[y,m]=u.split(":");return{type:n,host:y,username:decodeURIComponent(d),password:decodeURIComponent(p),port:m?parseInt(m):void 0,database:s||void 0}}static parseMongoDBConnectionUrl(t){const n=t.split(":")[0],r=t.indexOf("//"),o=t.substr(r+2),i=o.indexOf("/"),a=i!==-1?o.substr(0,i):o;let s=i!==-1?o.substr(i+1):void 0,c="",l,u,d,p,f={};if(s&&s.indexOf("?")!==-1){c=s.substr(s.indexOf("?")+1,s.length);const j=c.split("&");let O,E;j.forEach(M=>{O=M.split("=")[0],E=M.split("=")[1],f[O]=E}),p=f.replicaSet,s=s.substr(0,s.indexOf("?"))}const y=a.lastIndexOf("@"),m=a.substr(0,y),g=a.substr(y+1);let b=m,w="";const _=m.indexOf(":");_!==-1&&(b=m.substr(0,_),w=m.substr(_+1)),p?d=g:[l,u]=g.split(":");let x={type:n,host:l,hostReplicaSet:d,username:decodeURIComponent(b),password:decodeURIComponent(w),port:u?parseInt(u):void 0,database:s||void 0};for(const[j,O]of Object.entries(f))x[j]=O;return x}}class z_{constructor(t,n,r){this.connection=t,this.queryExpressionMap=n,this.isSelectedEvaluated=!1,this.relationEvaluated=!1,r&&it.assign(this,r)}get isMany(){return this.isMappingMany!==void 0?this.isMappingMany:this.relation?this.relation.isManyToMany||this.relation.isOneToMany:!1}get isSelected(){if(!this.isSelectedEvaluated){let t=()=>{for(const n of this.queryExpressionMap.selects)if(n.selection===this.alias.name||this.metadata&&this.metadata.columns.find(r=>n.selection===this.alias.name+"."+r.propertyPath))return!0;return!1};this.isSelectedCache=t(),this.isSelectedEvaluated=!0}return this.isSelectedCache}get tablePath(){return this.metadata?this.metadata.tablePath:this.entityOrProperty}get parentAlias(){if(Un.isAliasProperty(this.entityOrProperty))return this.entityOrProperty.substr(0,this.entityOrProperty.indexOf("."))}get relationPropertyPath(){if(Un.isAliasProperty(this.entityOrProperty))return this.entityOrProperty.substr(this.entityOrProperty.indexOf(".")+1)}get relation(){if(!this.relationEvaluated){let t=()=>{if(!Un.isAliasProperty(this.entityOrProperty))return;const n=this.queryExpressionMap.findAliasByName(this.parentAlias);let r=n.metadata.findRelationWithPropertyPath(this.relationPropertyPath);if(r||n.metadata.parentEntityMetadata&&(r=n.metadata.parentEntityMetadata.findRelationWithPropertyPath(this.relationPropertyPath),r))return r;throw new le(`Relation with property path ${this.relationPropertyPath} in entity was not found.`)};this.relationCache=t.bind(this)(),this.relationEvaluated=!0}return this.relationCache}get metadata(){if(this.relation)return this.relation.inverseEntityMetadata;if(this.connection.hasMetadata(this.entityOrProperty))return this.connection.getMetadata(this.entityOrProperty);if(this.mapAsEntity&&this.connection.hasMetadata(this.mapAsEntity))return this.connection.getMetadata(this.mapAsEntity)}get junctionAlias(){if(!this.relation)throw new le("Cannot get junction table for join without relation.");if(typeof this.entityOrProperty!="string")throw new le("Junction property is not defined.");const t=this.entityOrProperty.substr(0,this.entityOrProperty.indexOf("."));return this.relation.isOwning?se.buildAlias(this.connection.driver,void 0,t,this.alias.name):se.buildAlias(this.connection.driver,void 0,this.alias.name,t)}get mapToPropertyParentAlias(){if(this.mapToProperty)return this.mapToProperty.split(".")[0]}get mapToPropertyPropertyName(){if(this.mapToProperty)return this.mapToProperty.split(".")[1]}}class Lf{constructor(t,n){this.queryExpressionMap=t,this.disableMixedMap=!1,it.assign(this,n||{})}get joinInverseSideMetadata(){return this.relation.inverseEntityMetadata}get parentAlias(){if(!Un.isAliasProperty(this.relationName))throw new le("Given value must be a string representation of alias property");return this.relationName.substr(0,this.relationName.indexOf("."))}get relationPropertyPath(){if(!Un.isAliasProperty(this.relationName))throw new le("Given value must be a string representation of alias property");return this.relationName.substr(this.relationName.indexOf(".")+1)}get relation(){if(!Un.isAliasProperty(this.relationName))throw new le("Given value must be a string representation of alias property");const t=this.queryExpressionMap.findAliasByName(this.parentAlias).metadata.findRelationWithPropertyPath(this.relationPropertyPath);if(!t)throw new le(`Relation with property path ${this.relationPropertyPath} in entity was not found.`);return t}get junctionAlias(){const[t,n]=this.relationName.split(".");return t+"_"+n+"_rid"}get junctionMetadata(){return this.relation.junctionEntityMetadata}get mapToPropertyParentAlias(){return this.mapToProperty.substr(0,this.mapToProperty.indexOf("."))}get mapToPropertyPropertyPath(){return this.mapToProperty.substr(this.mapToProperty.indexOf(".")+1)}}class Bf{constructor(t,n){this.expressionMap=t,it.assign(this,n||{})}get joinInverseSideMetadata(){return this.relation.inverseEntityMetadata}get parentAlias(){if(!Un.isAliasProperty(this.relationName))throw new le("Given value must be a string representation of alias property");return this.relationName.split(".")[0]}get relationProperty(){if(!Un.isAliasProperty(this.relationName))throw new le("Given value is a string representation of alias property");return this.relationName.split(".")[1]}get junctionAlias(){const[t,n]=this.relationName.split(".");return t+"_"+n+"_rc"}get relation(){if(!Un.isAliasProperty(this.relationName))throw new le("Given value is a string representation of alias property");const[t,n]=this.relationName.split("."),r=this.expressionMap.findAliasByName(t).metadata.findRelationWithPropertyPath(n);if(!r)throw new le(`Relation with property path ${n} in entity was not found.`);return r}get metadata(){if(!Un.isAliasProperty(this.relationName))throw new le("Given value is a string representation of alias property");const t=this.relationName.split(".")[0];return this.expressionMap.findAliasByName(t).metadata}get mapToPropertyPropertyName(){return this.mapToProperty.split(".")[1]}}class $f{constructor(t){var n;this.connection=t,this.relationLoadStrategy="join",this.queryEntity=!1,this.aliases=[],this.queryType="select",this.selects=[],this.maxExecutionTime=0,this.selectDistinct=!1,this.selectDistinctOn=[],this.extraReturningColumns=[],this.onConflict="",this.onIgnore=!1,this.joinAttributes=[],this.relationIdAttributes=[],this.relationCountAttributes=[],this.wheres=[],this.havings=[],this.orderBys={},this.groupBys=[],this.withDeleted=!1,this.parameters={},this.disableEscaping=!0,this.enableRelationIdValues=!1,this.extraAppendedAndWhereCondition="",this.subQuery=!1,this.aliasNamePrefixingEnabled=!0,this.options=[],this.insertColumns=[],this.whereEntities=[],this.updateEntity=!0,this.callListeners=!0,this.useTransaction=!1,this.nativeParameters={},this.locallyGenerated={},this.commonTableExpressions=[],t.options.relationLoadStrategy&&(this.relationLoadStrategy=t.options.relationLoadStrategy),this.timeTravel=((n=t.options)==null?void 0:n.timeTravelQueries)||!1}get allOrderBys(){if(!Object.keys(this.orderBys).length&&this.mainAlias.hasMetadata&&this.options.indexOf("disable-global-order")===-1){const t=this.mainAlias.metadata.orderBy||{};return Object.keys(t).reduce((n,r)=>(n[this.mainAlias.name+"."+r]=t[r],n),{})}return this.orderBys}setMainAlias(t){return this.mainAlias=t,t}createAlias(t){let n=t.name;!n&&t.tablePath&&(n=t.tablePath),!n&&typeof t.target=="function"&&(n=t.target.name),!n&&typeof t.target=="string"&&(n=t.target);const r=new S_;return r.type=t.type,n&&(r.name=n),t.metadata&&(r.metadata=t.metadata),t.target&&!r.hasMetadata&&(r.metadata=this.connection.getMetadata(t.target)),t.tablePath&&(r.tablePath=t.tablePath),t.subQuery&&(r.subQuery=t.subQuery),this.aliases.push(r),r}findAliasByName(t){const n=this.aliases.find(r=>r.name===t);if(!n)throw new le(`"${t}" alias was not found. Maybe you forgot to join it?`);return n}findColumnByAliasExpression(t){const[n,r]=t.split(".");return this.findAliasByName(n).metadata.findColumnWithPropertyName(r)}get relationMetadata(){if(!this.mainAlias)throw new le("Entity to work with is not specified!");const t=this.mainAlias.metadata.findRelationWithPropertyPath(this.relationPropertyPath);if(!t)throw new le(`Relation ${this.relationPropertyPath} was not found in entity ${this.mainAlias.name}`);return t}clone(){const t=new $f(this.connection);return t.queryType=this.queryType,t.selects=this.selects.map(n=>n),t.maxExecutionTime=this.maxExecutionTime,t.selectDistinct=this.selectDistinct,t.selectDistinctOn=this.selectDistinctOn,this.aliases.forEach(n=>t.aliases.push(new S_(n))),t.relationLoadStrategy=this.relationLoadStrategy,t.mainAlias=this.mainAlias,t.valuesSet=this.valuesSet,t.returning=this.returning,t.onConflict=this.onConflict,t.onIgnore=this.onIgnore,t.onUpdate=this.onUpdate,t.joinAttributes=this.joinAttributes.map(n=>new z_(this.connection,this,n)),t.relationIdAttributes=this.relationIdAttributes.map(n=>new Lf(this,n)),t.relationCountAttributes=this.relationCountAttributes.map(n=>new Bf(this,n)),t.wheres=this.wheres.map(n=>({...n})),t.havings=this.havings.map(n=>({...n})),t.orderBys=Object.assign({},this.orderBys),t.groupBys=this.groupBys.map(n=>n),t.limit=this.limit,t.offset=this.offset,t.skip=this.skip,t.take=this.take,t.lockMode=this.lockMode,t.onLocked=this.onLocked,t.lockVersion=this.lockVersion,t.lockTables=this.lockTables,t.withDeleted=this.withDeleted,t.parameters=Object.assign({},this.parameters),t.disableEscaping=this.disableEscaping,t.enableRelationIdValues=this.enableRelationIdValues,t.extraAppendedAndWhereCondition=this.extraAppendedAndWhereCondition,t.subQuery=this.subQuery,t.aliasNamePrefixingEnabled=this.aliasNamePrefixingEnabled,t.cache=this.cache,t.cacheId=this.cacheId,t.cacheDuration=this.cacheDuration,t.relationPropertyPath=this.relationPropertyPath,t.of=this.of,t.insertColumns=this.insertColumns,t.whereEntities=this.whereEntities,t.updateEntity=this.updateEntity,t.callListeners=this.callListeners,t.useTransaction=this.useTransaction,t.timeTravel=this.timeTravel,t.nativeParameters=Object.assign({},this.nativeParameters),t.comment=this.comment,t.commonTableExpressions=this.commonTableExpressions.map(n=>({alias:n.alias,queryBuilder:typeof n.queryBuilder=="string"?n.queryBuilder:n.queryBuilder.clone(),options:n.options})),t}}class V_{constructor(t){this["@instanceof"]=Symbol.for("Brackets"),this.whereFactory=t}}class Ff{static transformFrom(t,n){return Array.isArray(t)?t.slice().reverse().reduce((r,o)=>o.from(r),n):t.from(n)}static transformTo(t,n){return Array.isArray(t)?t.reduce((r,o)=>o.to(r),n):t.to(n)}}class Qa{constructor(t,n,r=!0,o=!1,i,a){this["@instanceof"]=Symbol.for("FindOperator"),this._type=t,this._value=n,this._useParameter=r,this._multipleParameters=o,this._getSql=i,this._objectLiteralParameters=a}get useParameter(){return Ve.isFindOperator(this._value)?this._value.useParameter:this._useParameter}get multipleParameters(){return Ve.isFindOperator(this._value)?this._value.multipleParameters:this._multipleParameters}get type(){return this._type}get value(){return Ve.isFindOperator(this._value)?this._value.value:this._value}get objectLiteralParameters(){return Ve.isFindOperator(this._value)?this._value.objectLiteralParameters:this._objectLiteralParameters}get child(){if(Ve.isFindOperator(this._value))return this._value}get getSql(){return Ve.isFindOperator(this._value)?this._value.getSql:this._getSql}transformValue(t){this._value instanceof Qa?this._value.transformValue(t):this._value=Array.isArray(this._value)&&this._multipleParameters?this._value.map(n=>t&&Ff.transformTo(t,n)):Ff.transformTo(t,this._value)}}function ao(e){return new Qa("in",e,!0,!0)}const _z=/[.*+\-?^${}()|[\]\\]/g,jz=e=>e.replace(_z,"\\$&");class Ze{constructor(t,n){this["@instanceof"]=Symbol.for("QueryBuilder"),this.parameterIndex=0,Ve.isDataSource(t)?(this.connection=t,this.queryRunner=n,this.expressionMap=new $f(this.connection)):(this.connection=t.connection,this.queryRunner=t.queryRunner,this.expressionMap=t.expressionMap.clone())}static registerQueryBuilderClass(t,n){Ze.queryBuilderRegistry[t]=n}get alias(){if(!this.expressionMap.mainAlias)throw new le("Main alias is not set");return this.expressionMap.mainAlias.name}select(t,n){return this.expressionMap.queryType="select",Array.isArray(t)?this.expressionMap.selects=t.map(r=>({selection:r})):t&&(this.expressionMap.selects=[{selection:t,aliasName:n}]),Ve.isSelectQueryBuilder(this)?this:Ze.queryBuilderRegistry.SelectQueryBuilder(this)}insert(){return this.expressionMap.queryType="insert",Ve.isInsertQueryBuilder(this)?this:Ze.queryBuilderRegistry.InsertQueryBuilder(this)}update(t,n){const r=n||t;if(t=Ve.isEntitySchema(t)?t.options.name:t,typeof t=="function"||typeof t=="string"){const o=this.createFromAlias(t);this.expressionMap.setMainAlias(o)}return this.expressionMap.queryType="update",this.expressionMap.valuesSet=r,Ve.isUpdateQueryBuilder(this)?this:Ze.queryBuilderRegistry.UpdateQueryBuilder(this)}delete(){return this.expressionMap.queryType="delete",Ve.isDeleteQueryBuilder(this)?this:Ze.queryBuilderRegistry.DeleteQueryBuilder(this)}softDelete(){return this.expressionMap.queryType="soft-delete",Ve.isSoftDeleteQueryBuilder(this)?this:Ze.queryBuilderRegistry.SoftDeleteQueryBuilder(this)}restore(){return this.expressionMap.queryType="restore",Ve.isSoftDeleteQueryBuilder(this)?this:Ze.queryBuilderRegistry.SoftDeleteQueryBuilder(this)}relation(t,n){const r=arguments.length===2?t:void 0,o=arguments.length===2?n:t;if(this.expressionMap.queryType="relation",this.expressionMap.relationPropertyPath=o,r){const i=this.createFromAlias(r);this.expressionMap.setMainAlias(i)}return Ve.isRelationQueryBuilder(this)?this:Ze.queryBuilderRegistry.RelationQueryBuilder(this)}hasRelation(t,n){const r=this.connection.getMetadata(t);return(Array.isArray(n)?n:[n]).every(o=>!!r.findRelationWithPropertyPath(o))}hasParameter(t){var n;return((n=this.parentQueryBuilder)==null?void 0:n.hasParameter(t))||t in this.expressionMap.parameters}setParameter(t,n){if(typeof n=="function")throw new le(`Function parameter isn't supported in the parameters. Please check "${t}" parameter.`);if(!t.match(/^([A-Za-z0-9_.]+)$/))throw new le("QueryBuilder parameter keys may only contain numbers, letters, underscores, or periods.");return this.parentQueryBuilder&&this.parentQueryBuilder.setParameter(t,n),this.expressionMap.parameters[t]=n,this}setParameters(t){for(const[n,r]of Object.entries(t))this.setParameter(n,r);return this}createParameter(t){let n;do n=`orm_param_${this.parameterIndex++}`;while(this.hasParameter(n));return this.setParameter(n,t),`:${n}`}setNativeParameters(t){return this.parentQueryBuilder&&this.parentQueryBuilder.setNativeParameters(t),Object.keys(t).forEach(n=>{this.expressionMap.nativeParameters[n]=t[n]}),this}getParameters(){const t=Object.assign({},this.expressionMap.parameters);if(this.expressionMap.mainAlias&&this.expressionMap.mainAlias.hasMetadata){const n=this.expressionMap.mainAlias.metadata;if(n.discriminatorColumn&&n.parentEntityMetadata){const r=n.childEntityMetadatas.filter(o=>o.discriminatorColumn).map(o=>o.discriminatorValue);r.push(n.discriminatorValue),t.discriminatorColumnValues=r}}return t}printSql(){const[t,n]=this.getQueryAndParameters();return this.connection.logger.logQuery(t,n),this}getSql(){return this.getQueryAndParameters()[0]}getQueryAndParameters(){const t=this.getQuery(),n=this.getParameters();return this.connection.driver.escapeQueryWithParameters(t,n,this.expressionMap.nativeParameters)}async execute(){const[t,n]=this.getQueryAndParameters(),r=this.obtainQueryRunner();try{return await r.query(t,n)}finally{r!==this.queryRunner&&await r.release()}}createQueryBuilder(t){return new this.constructor(this.connection,t??this.queryRunner)}clone(){return new this.constructor(this)}comment(t){return this.expressionMap.comment=t,this}disableEscaping(){return this.expressionMap.disableEscaping=!1,this}escape(t){return this.expressionMap.disableEscaping?this.connection.driver.escape(t):t}setQueryRunner(t){return this.queryRunner=t,this}callListeners(t){return this.expressionMap.callListeners=t,this}useTransaction(t){return this.expressionMap.useTransaction=t,this}addCommonTableExpression(t,n,r){return this.expressionMap.commonTableExpressions.push({queryBuilder:t,alias:n,options:r||{}}),this}getTableName(t){return t.split(".").map(n=>n===""?n:this.escape(n)).join(".")}getMainTableName(){if(!this.expressionMap.mainAlias)throw new le('Entity where values should be inserted is not specified. Call "qb.into(entity)" method to specify it.');return this.expressionMap.mainAlias.hasMetadata?this.expressionMap.mainAlias.metadata.tablePath:this.expressionMap.mainAlias.tablePath}createFromAlias(t,n){if(this.connection.hasMetadata(t)){const r=this.connection.getMetadata(t);return this.expressionMap.createAlias({type:"from",name:n,metadata:this.connection.getMetadata(t),tablePath:r.tablePath})}else{if(typeof t=="string"){const i=t.substr(0,1)==="("&&t.substr(-1)===")";return this.expressionMap.createAlias({type:"from",name:n,tablePath:i?void 0:t,subQuery:i?t:void 0})}const r=t(this.subQuery());this.setParameters(r.getParameters());const o=r.getQuery();return this.expressionMap.createAlias({type:"from",name:n,subQuery:o})}}replacePropertyNames(t){return t}replacePropertyNamesForTheWholeQuery(t){const n={};for(const i of this.expressionMap.aliases){if(!i.hasMetadata)continue;const a=this.expressionMap.aliasNamePrefixingEnabled&&i.name?`${i.name}.`:"";n[a]||(n[a]={});for(const s of i.metadata.relations)s.joinColumns.length>0&&(n[a][s.propertyPath]=s.joinColumns[0].databaseName);for(const s of i.metadata.relations){const c=[...s.joinColumns,...s.inverseJoinColumns];for(const l of c){const u=`${s.propertyPath}.${l.referencedColumn.propertyPath}`;n[a][u]=l.databaseName}}for(const s of i.metadata.columns)n[a][s.databaseName]=s.databaseName;for(const s of i.metadata.columns)n[a][s.propertyName]=s.databaseName;for(const s of i.metadata.columns)n[a][s.propertyPath]=s.databaseName}const r=Object.keys(n),o=r.map(i=>jz(i)).join("|");return r.length>0&&(t=t.replace(new RegExp(`([ =(]|^.{0})${o?"("+o+")":""}([^ =(),]+)(?=[ =),]|.{0}$)`,"gm"),(...i)=>{let a,s,c;if(o){if(a=i[0],s=i[1],c=i[3],n[i[2]][c])return`${s}${this.escape(i[2].substring(0,i[2].length-1))}.${this.escape(n[i[2]][c])}`}else if(a=i[0],s=i[1],c=i[2],n[""][c])return`${s}${this.escape(n[""][c])}`;return a})),t}createComment(){return this.expressionMap.comment?`/* ${this.expressionMap.comment.replace(/\*\//g,"")} */ `:""}createTimeTravelQuery(){return this.expressionMap.queryType==="select"&&this.expressionMap.timeTravel?` AS OF SYSTEM TIME ${this.expressionMap.timeTravel}`:""}createWhereExpression(){const t=[],n=this.createWhereClausesExpression(this.expressionMap.wheres);if(n.length>0&&n!=="1=1"&&t.push(this.replacePropertyNames(n)),this.expressionMap.mainAlias.hasMetadata){const o=this.expressionMap.mainAlias.metadata;if(this.expressionMap.queryType==="select"&&!this.expressionMap.withDeleted&&o.deleteDateColumn){const i=this.expressionMap.aliasNamePrefixingEnabled?this.expressionMap.mainAlias.name+"."+o.deleteDateColumn.propertyName:o.deleteDateColumn.propertyName,a=`${this.replacePropertyNames(i)} IS NULL`;t.push(a)}if(o.discriminatorColumn&&o.parentEntityMetadata){const i=this.expressionMap.aliasNamePrefixingEnabled?this.expressionMap.mainAlias.name+"."+o.discriminatorColumn.databaseName:o.discriminatorColumn.databaseName,a=`${this.replacePropertyNames(i)} IN (:...discriminatorColumnValues)`;t.push(a)}}if(this.expressionMap.extraAppendedAndWhereCondition){const o=this.replacePropertyNames(this.expressionMap.extraAppendedAndWhereCondition);t.push(o)}let r="";return r+=this.createTimeTravelQuery(),t.length?t.length===1?r+=` WHERE ${t[0]}`:r+=` WHERE ( ${t.join(" ) AND ( ")} )`:r+="",r}createReturningExpression(t){const n=this.getReturningColumns(),r=this.connection.driver;if(typeof this.expressionMap.returning!="string"&&this.expressionMap.extraReturningColumns.length>0&&r.isReturningSqlSupported(t)&&n.push(...this.expressionMap.extraReturningColumns.filter(o=>n.indexOf(o)===-1)),n.length){let o=n.map(i=>{const a=this.escape(i.databaseName);return r.options.type==="mssql"?this.expressionMap.queryType==="insert"||this.expressionMap.queryType==="update"||this.expressionMap.queryType==="soft-delete"||this.expressionMap.queryType==="restore"?"INSERTED."+a:this.escape(this.getMainTableName())+"."+a:a}).join(", ");return r.options.type==="oracle"&&(o+=" INTO "+n.map(i=>this.createParameter({type:r.columnTypeToNativeParameter(i.type),dir:r.oracle.BIND_OUT})).join(", ")),r.options.type==="mssql"&&(this.expressionMap.queryType==="insert"||this.expressionMap.queryType==="update")&&(o+=" INTO @OutputTable"),o}else if(typeof this.expressionMap.returning=="string")return this.expressionMap.returning;return""}getReturningColumns(){const t=[];return Array.isArray(this.expressionMap.returning)&&this.expressionMap.returning.forEach(n=>{this.expressionMap.mainAlias.hasMetadata&&t.push(...this.expressionMap.mainAlias.metadata.findColumnsWithPropertyPath(n))}),t}createWhereClausesExpression(t){return t.map((n,r)=>{const o=this.createWhereConditionExpression(n.condition);switch(n.type){case"and":return(r>0?"AND ":"")+`${this.connection.options.isolateWhereStatements?"(":""}${o}${this.connection.options.isolateWhereStatements?")":""}`;case"or":return(r>0?"OR ":"")+`${this.connection.options.isolateWhereStatements?"(":""}${o}${this.connection.options.isolateWhereStatements?")":""}`}return o}).join(" ").trim()}createWhereConditionExpression(t,n=!1){if(typeof t=="string")return t;if(Array.isArray(t))return t.length===0?"1=1":t.length===1&&!n?this.createWhereClausesExpression(t):"("+this.createWhereClausesExpression(t)+")";const{driver:r}=this.connection;switch(t.operator){case"lessThan":return`${t.parameters[0]} < ${t.parameters[1]}`;case"lessThanOrEqual":return`${t.parameters[0]} <= ${t.parameters[1]}`;case"arrayContains":return`${t.parameters[0]} @> ${t.parameters[1]}`;case"jsonContains":return`${t.parameters[0]} ::jsonb @> ${t.parameters[1]}`;case"arrayContainedBy":return`${t.parameters[0]} <@ ${t.parameters[1]}`;case"arrayOverlap":return`${t.parameters[0]} && ${t.parameters[1]}`;case"moreThan":return`${t.parameters[0]} > ${t.parameters[1]}`;case"moreThanOrEqual":return`${t.parameters[0]} >= ${t.parameters[1]}`;case"notEqual":return`${t.parameters[0]} != ${t.parameters[1]}`;case"equal":return`${t.parameters[0]} = ${t.parameters[1]}`;case"ilike":return r.options.type==="postgres"||r.options.type==="cockroachdb"?`${t.parameters[0]} ILIKE ${t.parameters[1]}`:`UPPER(${t.parameters[0]}) LIKE UPPER(${t.parameters[1]})`;case"like":return`${t.parameters[0]} LIKE ${t.parameters[1]}`;case"between":return`${t.parameters[0]} BETWEEN ${t.parameters[1]} AND ${t.parameters[2]}`;case"in":return t.parameters.length<=1?"0=1":`${t.parameters[0]} IN (${t.parameters.slice(1).join(", ")})`;case"any":return r.options.type==="cockroachdb"?`${t.parameters[0]}::STRING = ANY(${t.parameters[1]}::STRING[])`:`${t.parameters[0]} = ANY(${t.parameters[1]})`;case"isNull":return`${t.parameters[0]} IS NULL`;case"not":return`NOT(${this.createWhereConditionExpression(t.condition)})`;case"brackets":return`${this.createWhereConditionExpression(t.condition,!0)}`;case"and":return"("+t.parameters.join(" AND ")+")";case"or":return"("+t.parameters.join(" OR ")+")"}throw new TypeError(`Unsupported FindOperator ${Qa.constructor.name}`)}createCteExpression(){if(!this.hasCommonTableExpressions())return"";const t=this.connection.driver.cteCapabilities.requiresRecursiveHint;return"WITH "+this.expressionMap.commonTableExpressions.map(n=>{const r=typeof n.queryBuilder=="string"?n.queryBuilder:n.queryBuilder.getQuery();if(typeof n.queryBuilder!="string"){if(n.queryBuilder.hasCommonTableExpressions())throw new le(`Nested CTEs aren't supported (CTE: ${n.alias})`);if(!this.connection.driver.cteCapabilities.writable&&!Ve.isSelectQueryBuilder(n.queryBuilder))throw new le(`Only select queries are supported in CTEs in ${this.connection.options.type} (CTE: ${n.alias})`);this.setParameters(n.queryBuilder.getParameters())}let o=this.escape(n.alias);if(n.options.columnNames){const s=n.options.columnNames.map(c=>this.escape(c));if(Ve.isSelectQueryBuilder(n.queryBuilder)&&n.queryBuilder.expressionMap.selects.length&&n.options.columnNames.length!==n.queryBuilder.expressionMap.selects.length)throw new le(`cte.options.columnNames length (${n.options.columnNames.length}) doesn't match subquery select list length ${n.queryBuilder.expressionMap.selects.length} (CTE: ${n.alias})`);o+=`(${s.join(", ")})`}const i=n.options.recursive&&t?"RECURSIVE":"";let a="";return this.connection.driver.cteCapabilities.materializedHint&&n.options.materialized!==void 0&&(a=n.options.materialized?"MATERIALIZED":"NOT MATERIALIZED"),[i,o,"AS",a,`(${r})`].filter(Boolean).join(" ")}).join(", ")+" "}getWhereInIdsCondition(t){const n=this.expressionMap.mainAlias.metadata,r=(Array.isArray(t)?t:[t]).map(o=>n.ensureEntityIdMap(o));if(!n.hasMultiplePrimaryKeys){const o=n.primaryColumns[0];if(!o.transformer&&!o.relationMetadata&&!o.embeddedMetadata)return{[o.propertyName]:ao(r.map(i=>o.getEntityValue(i,!1)))}}return new V_(o=>{for(const i of r)o.orWhere(new V_(a=>a.where(i)))})}getExistsCondition(t){const n=t.clone().orderBy().groupBy().offset(void 0).limit(void 0).skip(void 0).take(void 0).select("1").setOption("disable-global-order");return[`EXISTS (${n.getQuery()})`,n.getParameters()]}findColumnsForPropertyPath(t){let n=this.expressionMap.mainAlias;const r=[],o=t.split(".");for(;o.length>1;){const s=o[0];if(!(n!=null&&n.hasMetadata))break;if(n.metadata.hasEmbeddedWithPropertyPath(s)){o.unshift(`${o.shift()}.${o.shift()}`);continue}if(n.metadata.hasRelationWithPropertyPath(s)){const c=this.expressionMap.joinAttributes.find(l=>l.relationPropertyPath===s);if(!(c!=null&&c.alias)){const l=r.length>0?`${r.join(".")}.${s}`:s;throw new Error(`Cannot find alias for relation at ${l}`)}n=c.alias,r.push(...s.split(".")),o.shift();continue}break}if(!n)throw new Error(`Cannot find alias for property ${t}`);const i=o.join("."),a=n.metadata.findColumnsWithPropertyPath(i);if(!a.length)throw new Vn(t,n.metadata);return[n,r,a]}createPropertyPath(t,n,r=""){const o=[];for(const i of Object.keys(n)){const a=r?`${r}.${i}`:i;if(n[i]===null||typeof n[i]!="object"||Ve.isFindOperator(n[i])){o.push(a);continue}if(t.hasEmbeddedWithPropertyPath(a)){const s=this.createPropertyPath(t,n[i],a);o.push(...s);continue}if(t.hasRelationWithPropertyPath(a)){const s=t.findRelationWithPropertyPath(a);if(s.relationType==="one-to-one"||s.relationType==="many-to-one"){const u=s.joinColumns.map(d=>d.referencedColumn).filter(d=>!!d);if(u.length>0&&u.every(d=>d.getEntityValue(n[i],!1))){o.push(a);continue}}if(s.relationType==="one-to-many"||s.relationType==="many-to-many")throw new Error(`Cannot query across ${s.relationType} for property ${a}`);const c=s.inverseEntityMetadata.primaryColumns;if(c.length>0&&c.every(u=>u.getEntityValue(n[i],!1))){const u=c.map(d=>`${a}.${d.propertyPath}`);o.push(...u);continue}const l=this.createPropertyPath(s.inverseEntityMetadata,n[i]).map(u=>`${a}.${u}`);o.push(...l);continue}o.push(a)}return o}*getPredicates(t){if(this.expressionMap.mainAlias.hasMetadata){const n=this.createPropertyPath(this.expressionMap.mainAlias.metadata,t);for(const r of n){const[o,i,a]=this.findColumnsForPropertyPath(r);for(const s of a){let c=t;for(const d of i){if(!c||!(d in c)){c={};break}c=c[d]}const l=this.expressionMap.aliasNamePrefixingEnabled?`${o.name}.${s.propertyPath}`:s.propertyPath,u=s.getEntityValue(c,!0);yield[l,u]}}}else for(const n of Object.keys(t)){const r=t[n];yield[this.expressionMap.aliasNamePrefixingEnabled?`${this.alias}.${n}`:n,r]}}getWherePredicateCondition(t,n){if(Ve.isFindOperator(n)){let r=[];if(n.useParameter)if(n.objectLiteralParameters)this.setParameters(n.objectLiteralParameters);else if(n.multipleParameters)for(const o of n.value)r.push(this.createParameter(o));else r.push(this.createParameter(n.value));if(n.type==="raw")return n.getSql?n.getSql(t):{operator:"equal",parameters:[t,n.value]};if(n.type==="not")return n.child?{operator:n.type,condition:this.getWherePredicateCondition(t,n.child)}:{operator:"notEqual",parameters:[t,...r]};if(n.type==="and"){const o=n.value;return{operator:n.type,parameters:o.map(i=>this.createWhereConditionExpression(this.getWherePredicateCondition(t,i)))}}else if(n.type==="or"){const o=n.value;return{operator:n.type,parameters:o.map(i=>this.createWhereConditionExpression(this.getWherePredicateCondition(t,i)))}}else return{operator:n.type,parameters:[t,...r]}}else return{operator:"equal",parameters:[t,this.createParameter(n)]}}getWhereCondition(t){if(typeof t=="string")return t;if(Ve.isBrackets(t)){const o=this.createQueryBuilder();return o.parentQueryBuilder=this,o.expressionMap.mainAlias=this.expressionMap.mainAlias,o.expressionMap.aliasNamePrefixingEnabled=this.expressionMap.aliasNamePrefixingEnabled,o.expressionMap.parameters=this.expressionMap.parameters,o.expressionMap.nativeParameters=this.expressionMap.nativeParameters,o.expressionMap.wheres=[],t.whereFactory(o),{operator:Ve.isNotBrackets(t)?"not":"brackets",condition:o.expressionMap.wheres}}if(typeof t=="function")return t(this);const n=Array.isArray(t)?t:[t],r=[];for(const o of n){const i=[];for(const[a,s]of this.getPredicates(o))i.push({type:"and",condition:this.getWherePredicateCondition(a,s)});r.push({type:"or",condition:i})}return r.length===1?r[0].condition:r}obtainQueryRunner(){return this.queryRunner||this.connection.createQueryRunner()}hasCommonTableExpressions(){return this.expressionMap.commonTableExpressions.length>0}}Ze.queryBuilderRegistry={};class Oz{static from(t){const n=new this;return n.raw=t.records,n.affected=t.affected,n}}class Ez extends Ze{constructor(t,n){super(t,n),this["@instanceof"]=Symbol.for("DeleteQueryBuilder"),this.expressionMap.aliasNamePrefixingEnabled=!1}getQuery(){let t=this.createComment();return t+=this.createCteExpression(),t+=this.createDeleteExpression(),this.replacePropertyNamesForTheWholeQuery(t.trim())}async execute(){const[t,n]=this.getQueryAndParameters(),r=this.obtainQueryRunner();let o=!1;try{this.expressionMap.useTransaction===!0&&r.isTransactionActive===!1&&(await r.startTransaction(),o=!0),this.expressionMap.callListeners===!0&&this.expressionMap.mainAlias.hasMetadata&&await r.broadcaster.broadcast("BeforeRemove",this.expressionMap.mainAlias.metadata);const i=await r.query(t,n,!0),a=Oz.from(i);return this.expressionMap.callListeners===!0&&this.expressionMap.mainAlias.hasMetadata&&await r.broadcaster.broadcast("AfterRemove",this.expressionMap.mainAlias.metadata),o&&await r.commitTransaction(),a}catch(i){if(o)try{await r.rollbackTransaction()}catch{}throw i}finally{r!==this.queryRunner&&await r.release()}}from(t,n){t=Ve.isEntitySchema(t)?t.options.name:t;const r=this.createFromAlias(t,n);return this.expressionMap.setMainAlias(r),this}where(t,n){this.expressionMap.wheres=[];const r=this.getWhereCondition(t);return r&&(this.expressionMap.wheres=[{type:"simple",condition:r}]),n&&this.setParameters(n),this}andWhere(t,n){return this.expressionMap.wheres.push({type:"and",condition:this.getWhereCondition(t)}),n&&this.setParameters(n),this}orWhere(t,n){return this.expressionMap.wheres.push({type:"or",condition:this.getWhereCondition(t)}),n&&this.setParameters(n),this}whereInIds(t){return this.where(this.getWhereInIdsCondition(t))}andWhereInIds(t){return this.andWhere(this.getWhereInIdsCondition(t))}orWhereInIds(t){return this.orWhere(this.getWhereInIdsCondition(t))}output(t){return this.returning(t)}returning(t){if(!this.connection.driver.isReturningSqlSupported("delete"))throw new ll;return this.expressionMap.returning=t,this}createDeleteExpression(){const t=this.getTableName(this.getMainTableName()),n=this.createWhereExpression(),r=this.createReturningExpression("delete");return r===""?`DELETE FROM ${t}${n}`:this.connection.driver.options.type==="mssql"?`DELETE FROM ${t} OUTPUT ${r}${n}`:`DELETE FROM ${t}${n} RETURNING ${r}`}}let fl;const Sz=new Uint8Array(16);function Mz(){if(!fl&&(fl=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!fl))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return fl(Sz)}const bt=[];for(let e=0;e<256;++e)bt.push((e+256).toString(16).slice(1));function Cz(e,t=0){return bt[e[t+0]]+bt[e[t+1]]+bt[e[t+2]]+bt[e[t+3]]+"-"+bt[e[t+4]]+bt[e[t+5]]+"-"+bt[e[t+6]]+bt[e[t+7]]+"-"+bt[e[t+8]]+bt[e[t+9]]+"-"+bt[e[t+10]]+bt[e[t+11]]+bt[e[t+12]]+bt[e[t+13]]+bt[e[t+14]]+bt[e[t+15]]}const Pz=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),U_={randomUUID:Pz};function Nz(e,t,n){if(U_.randomUUID&&!t&&!e)return U_.randomUUID();e=e||{};const r=e.random||(e.rng||Mz)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,Cz(r)}class q_{constructor(){this.count=0,this.promises=[]}async wait(){return this.promises.length>0&&await Promise.all(this.promises),this}}class H_{constructor(){this.identifiers=[],this.generatedMaps=[]}static from(t){const n=new this;return n.raw=t.raw,n}}class zf{constructor(t,n){this.queryRunner=t,this.expressionMap=n}async update(t,n){const r=this.expressionMap.mainAlias.metadata;await Promise.all(n.map(async(o,i)=>{if(this.queryRunner.connection.driver.isReturningSqlSupported("update")){this.queryRunner.connection.driver.options.type==="oracle"&&Array.isArray(t.raw)&&this.expressionMap.extraReturningColumns.length>0&&(t.raw=t.raw.reduce((c,l,u)=>(c[this.expressionMap.extraReturningColumns[u].databaseName]=l[0],c),{}));const a=Array.isArray(t.raw)?t.raw[i]:t.raw,s=this.queryRunner.connection.driver.createGeneratedMap(r,a);s&&(this.queryRunner.manager.merge(r.target,o,s),t.generatedMaps.push(s))}else{const a=this.expressionMap.extraReturningColumns;if(a.length>0){const s=this.expressionMap.mainAlias.metadata.getEntityIdMap(o);if(!s)throw new le("Cannot update entity because entity id is not set in the entity.");const c=await this.queryRunner.manager.createQueryBuilder().select(r.primaryColumns.map(l=>r.targetName+"."+l.propertyPath)).addSelect(a.map(l=>r.targetName+"."+l.propertyPath)).from(r.target,r.targetName).where(s).withDeleted().setOption("create-pojo").getOne();c&&(this.queryRunner.manager.merge(r.target,o,c),t.generatedMaps.push(c))}}}))}async insert(t,n){const r=this.expressionMap.mainAlias.metadata;let o=r.getInsertionReturningColumns();const i=this.queryRunner.connection.driver.isReturningSqlSupported("insert");o=o.filter(s=>s.isGenerated?i===!0:!0);const a=n.map((s,c)=>{this.queryRunner.connection.driver.options.type==="oracle"&&Array.isArray(t.raw)&&this.expressionMap.extraReturningColumns.length>0&&(t.raw=t.raw.reduce((d,p,f)=>(d[this.expressionMap.extraReturningColumns[f].databaseName]=p[0],d),{}));const l=Array.isArray(t.raw)?t.raw[c]:t.raw,u=this.queryRunner.connection.driver.createGeneratedMap(r,l,c,n.length)||{};return c in this.expressionMap.locallyGenerated&&this.queryRunner.manager.merge(r.target,u,this.expressionMap.locallyGenerated[c]),this.queryRunner.manager.merge(r.target,s,u),u});if(o.length>0&&!this.queryRunner.connection.driver.isReturningSqlSupported("insert")){const s=n.map(l=>{const u=r.getEntityIdMap(l);if(!u)throw new le("Cannot update entity because entity id is not set in the entity.");return u}),c=await this.queryRunner.manager.createQueryBuilder().select(r.primaryColumns.map(l=>r.targetName+"."+l.propertyPath)).addSelect(o.map(l=>r.targetName+"."+l.propertyPath)).from(r.target,r.targetName).where(s).setOption("create-pojo").getMany();n.forEach((l,u)=>{this.queryRunner.manager.merge(r.target,a[u],c[u]),this.queryRunner.manager.merge(r.target,l,c[u])})}n.forEach((s,c)=>{const l=r.getEntityIdMap(s);t.identifiers.push(l),t.generatedMaps.push(a[c])})}getUpdationReturningColumns(){return this.expressionMap.mainAlias.metadata.columns.filter(t=>t.asExpression!==void 0||t.isUpdateDate||t.isVersion)}getSoftDeletionReturningColumns(){return this.expressionMap.mainAlias.metadata.columns.filter(t=>t.asExpression!==void 0||t.isUpdateDate||t.isVersion||t.isDeleteDate)}}class kz extends Ze{constructor(){super(...arguments),this["@instanceof"]=Symbol.for("InsertQueryBuilder")}getQuery(){let t=this.createComment();return t+=this.createCteExpression(),t+=this.createInsertExpression(),this.replacePropertyNamesForTheWholeQuery(t.trim())}async execute(){const t=this.getValueSets();if(t.length===0)return new H_;const n=this.obtainQueryRunner();let r=!1;try{if(this.expressionMap.useTransaction===!0&&n.isTransactionActive===!1&&(await n.startTransaction(),r=!0),this.expressionMap.callListeners===!0&&this.expressionMap.mainAlias.hasMetadata){const f=new q_;t.forEach(y=>{n.broadcaster.broadcastBeforeInsertEvent(f,this.expressionMap.mainAlias.metadata,y)}),await f.wait()}let o=null,i=null;const a=new zf(n,this.expressionMap),s=[];if(Array.isArray(this.expressionMap.returning)&&this.expressionMap.mainAlias.hasMetadata)for(const f of this.expressionMap.returning)s.push(...this.expressionMap.mainAlias.metadata.findColumnsWithPropertyPath(f));this.expressionMap.updateEntity===!0&&this.expressionMap.mainAlias.hasMetadata&&(t.length>1&&this.connection.driver.options.type==="oracle"||(this.expressionMap.extraReturningColumns=this.expressionMap.mainAlias.metadata.getInsertionReturningColumns()),s.push(...this.expressionMap.extraReturningColumns.filter(f=>!s.includes(f)))),s.length>0&&this.connection.driver.options.type==="mssql"&&(o=this.connection.driver.buildTableVariableDeclaration("@OutputTable",s),i="SELECT * FROM @OutputTable");const[c,l]=this.getQueryAndParameters(),u=[o,c,i].filter(f=>f!=null).join(`;

`),d=await n.query(u,l,!0),p=H_.from(d);if(this.expressionMap.updateEntity===!0&&this.expressionMap.mainAlias.hasMetadata&&await a.insert(p,t),this.expressionMap.callListeners===!0&&this.expressionMap.mainAlias.hasMetadata){const f=new q_;t.forEach(y=>{n.broadcaster.broadcastAfterInsertEvent(f,this.expressionMap.mainAlias.metadata,y)}),await f.wait()}return r&&await n.commitTransaction(),p}catch(o){if(r)try{await n.rollbackTransaction()}catch{}throw o}finally{n!==this.queryRunner&&await n.release()}}into(t,n){t=Ve.isEntitySchema(t)?t.options.name:t;const r=this.createFromAlias(t);return this.expressionMap.setMainAlias(r),this.expressionMap.insertColumns=n||[],this}values(t){return this.expressionMap.valuesSet=t,this}output(t){return this.returning(t)}returning(t){if(!this.connection.driver.isReturningSqlSupported("insert"))throw new ll;return this.expressionMap.returning=t,this}updateEntity(t){return this.expressionMap.updateEntity=t,this}onConflict(t){return this.expressionMap.onConflict=t,this}orIgnore(t=!0){return this.expressionMap.onIgnore=!!t,this}orUpdate(t,n,r){return Array.isArray(t)?(this.expressionMap.onUpdate={overwrite:t,conflict:n,skipUpdateIfNoValuesChanged:r==null?void 0:r.skipUpdateIfNoValuesChanged,indexPredicate:r==null?void 0:r.indexPredicate,upsertType:r==null?void 0:r.upsertType},this):(this.expressionMap.onUpdate={conflict:t==null?void 0:t.conflict_target,columns:t==null?void 0:t.columns,overwrite:t==null?void 0:t.overwrite,skipUpdateIfNoValuesChanged:r==null?void 0:r.skipUpdateIfNoValuesChanged,upsertType:r==null?void 0:r.upsertType},this)}createInsertExpression(){var a,s;const t=this.getTableName(this.getMainTableName()),n=this.createValuesExpression(),r=this.connection.driver.options.type==="oracle"&&this.getValueSets().length>1?null:this.createReturningExpression("insert"),o=this.createColumnNamesExpression();let i="INSERT ";if(((a=this.expressionMap.onUpdate)==null?void 0:a.upsertType)==="primary-key"&&(i="UPSERT "),(se.isMySQLFamily(this.connection.driver)||this.connection.driver.options.type==="aurora-mysql")&&(i+=`${this.expressionMap.onIgnore?" IGNORE ":""}`),i+=`INTO ${t}`,this.alias!==this.getMainTableName()&&se.isPostgresFamily(this.connection.driver)&&(i+=` AS "${this.alias}"`),o?i+=`(${o})`:!n&&(se.isMySQLFamily(this.connection.driver)||this.connection.driver.options.type==="aurora-mysql")&&(i+="()"),r&&this.connection.driver.options.type==="mssql"&&(i+=` OUTPUT ${r}`),n?(this.connection.driver.options.type==="oracle"||this.connection.driver.options.type==="sap")&&this.getValueSets().length>1?i+=` ${n}`:i+=` VALUES ${n}`:se.isMySQLFamily(this.connection.driver)||this.connection.driver.options.type==="aurora-mysql"?i+=" VALUES ()":i+=" DEFAULT VALUES",((s=this.expressionMap.onUpdate)==null?void 0:s.upsertType)!=="primary-key"){if(this.connection.driver.supportedUpsertTypes.includes("on-conflict-do-update")){if(this.expressionMap.onIgnore)i+=" ON CONFLICT DO NOTHING ";else if(this.expressionMap.onConflict)i+=` ON CONFLICT ${this.expressionMap.onConflict} `;else if(this.expressionMap.onUpdate){const{overwrite:c,columns:l,conflict:u,skipUpdateIfNoValuesChanged:d,indexPredicate:p}=this.expressionMap.onUpdate;let f="ON CONFLICT";if(Array.isArray(u)){if(f+=` ( ${u.map(m=>this.escape(m)).join(", ")} )`,p&&!se.isPostgresFamily(this.connection.driver))throw new le("indexPredicate option is not supported by the current database driver");p&&se.isPostgresFamily(this.connection.driver)&&(f+=` WHERE ( ${p} )`)}else u&&(f+=` ON CONSTRAINT ${this.escape(u)}`);const y=[];Array.isArray(c)?y.push(...c.map(m=>`${this.escape(m)} = EXCLUDED.${this.escape(m)}`)):l&&y.push(...l.map(m=>`${this.escape(m)} = :${m}`)),y.length>0&&(i+=` ${f} DO UPDATE SET `,y.push(...this.expressionMap.mainAlias.metadata.columns.filter(m=>m.isUpdateDate&&!(c!=null&&c.includes(m.databaseName))&&!(this.connection.driver.options.type==="oracle"&&this.getValueSets().length>1||se.isSQLiteFamily(this.connection.driver)||this.connection.driver.options.type==="sap"||this.connection.driver.options.type==="spanner")).map(m=>`${this.escape(m.databaseName)} = DEFAULT`)),i+=y.join(", "),i+=" "),Array.isArray(c)&&d&&se.isPostgresFamily(this.connection.driver)&&(i+=" WHERE (",i+=c.map(m=>`${t}.${this.escape(m)} IS DISTINCT FROM EXCLUDED.${this.escape(m)}`).join(" OR "),i+=") ")}}else if(this.connection.driver.supportedUpsertTypes.includes("on-duplicate-key-update")){if(this.expressionMap.onUpdate){const{overwrite:c,columns:l}=this.expressionMap.onUpdate;Array.isArray(c)?(i+=" ON DUPLICATE KEY UPDATE ",i+=c.map(u=>`${this.escape(u)} = VALUES(${this.escape(u)})`).join(", "),i+=" "):Array.isArray(l)&&(i+=" ON DUPLICATE KEY UPDATE ",i+=l.map(u=>`${this.escape(u)} = :${u}`).join(", "),i+=" ")}}else if(this.expressionMap.onUpdate)throw new le("onUpdate is not supported by the current database driver")}return r&&(se.isPostgresFamily(this.connection.driver)||this.connection.driver.options.type==="oracle"||this.connection.driver.options.type==="cockroachdb"||se.isMySQLFamily(this.connection.driver))&&(i+=` RETURNING ${r}`),this.connection.driver.options.type==="mssql"&&this.expressionMap.mainAlias.hasMetadata&&this.expressionMap.mainAlias.metadata.columns.filter(c=>this.expressionMap.insertColumns.length>0?this.expressionMap.insertColumns.indexOf(c.propertyPath)!==-1:c.isInsert).some(c=>this.isOverridingAutoIncrementBehavior(c))&&(i=`SET IDENTITY_INSERT ${t} ON; ${i}; SET IDENTITY_INSERT ${t} OFF`),i}getInsertedColumns(){return this.expressionMap.mainAlias.hasMetadata?this.expressionMap.mainAlias.metadata.columns.filter(t=>this.expressionMap.insertColumns.length?this.expressionMap.insertColumns.indexOf(t.propertyPath)!==-1:!(!t.isInsert||t.isGenerated&&t.generationStrategy==="increment"&&this.connection.driver.options.type!=="spanner"&&this.connection.driver.options.type!=="oracle"&&!se.isSQLiteFamily(this.connection.driver)&&!se.isMySQLFamily(this.connection.driver)&&this.connection.driver.options.type!=="aurora-mysql"&&!(this.connection.driver.options.type==="mssql"&&this.isOverridingAutoIncrementBehavior(t)))):[]}createColumnNamesExpression(){const t=this.getInsertedColumns();if(t.length>0)return t.map(n=>this.escape(n.databaseName)).join(", ");if(!this.expressionMap.mainAlias.hasMetadata&&!this.expressionMap.insertColumns.length){const n=this.getValueSets();if(n.length===1)return Object.keys(n[0]).map(r=>this.escape(r)).join(", ")}return this.expressionMap.insertColumns.map(n=>this.escape(n)).join(", ")}createValuesExpression(){const t=this.getValueSets(),n=this.getInsertedColumns();if(n.length>0){let r="";return t.forEach((o,i)=>{n.forEach((a,s)=>{s===0&&(this.connection.driver.options.type==="oracle"&&t.length>1||this.connection.driver.options.type==="sap"&&t.length>1?r+=" SELECT ":r+="(");let c=a.getEntityValue(o);if(typeof c!="function"&&(c=this.connection.driver.preparePersistentValue(c,a)),a.isVersion&&c===void 0)r+="1";else if(a.isDiscriminator)r+=this.createParameter(this.expressionMap.mainAlias.metadata.discriminatorValue);else if(a.isGenerated&&a.generationStrategy==="uuid"&&!this.connection.driver.isUUIDGenerationSupported()&&c===void 0)c=Nz(),r+=this.createParameter(c),i in this.expressionMap.locallyGenerated||(this.expressionMap.locallyGenerated[i]={}),a.setEntityValue(this.expressionMap.locallyGenerated[i],c);else if(c===void 0)this.connection.driver.options.type==="oracle"&&t.length>1||se.isSQLiteFamily(this.connection.driver)||this.connection.driver.options.type==="sap"||this.connection.driver.options.type==="spanner"?a.default!==void 0&&a.default!==null?r+=this.connection.driver.normalizeDefault(a):r+="NULL":r+="DEFAULT";else if(c===null&&this.connection.driver.options.type==="spanner")r+="NULL";else if(typeof c=="function")r+=c();else{this.connection.driver.options.type==="mssql"&&(c=this.connection.driver.parametrizeValue(a,c));const l=this.createParameter(c);if((se.isMySQLFamily(this.connection.driver)||this.connection.driver.options.type==="aurora-mysql")&&this.connection.driver.spatialTypes.indexOf(a.type)!==-1){const u=this.connection.driver.options.legacySpatialSupport?"GeomFromText":"ST_GeomFromText";a.srid!=null?r+=`${u}(${l}, ${a.srid})`:r+=`${u}(${l})`}else se.isPostgresFamily(this.connection.driver)&&this.connection.driver.spatialTypes.indexOf(a.type)!==-1?a.srid!=null?r+=`ST_SetSRID(ST_GeomFromGeoJSON(${l}), ${a.srid})::${a.type}`:r+=`ST_GeomFromGeoJSON(${l})::${a.type}`:this.connection.driver.options.type==="mssql"&&this.connection.driver.spatialTypes.indexOf(a.type)!==-1?r+=a.type+"::STGeomFromText("+l+", "+(a.srid||"0")+")":r+=l}s===n.length-1?i===t.length-1?this.connection.driver.options.type==="oracle"&&t.length>1?r+=" FROM DUAL ":this.connection.driver.options.type==="sap"&&t.length>1?r+=" FROM dummy ":r+=")":this.connection.driver.options.type==="oracle"&&t.length>1?r+=" FROM DUAL UNION ALL ":this.connection.driver.options.type==="sap"&&t.length>1?r+=" FROM dummy UNION ALL ":r+="), ":r+=", "})}),r==="()"?"":r}else{let r="";return t.forEach((o,i)=>{Object.keys(o).forEach((a,s)=>{s===0&&(r+="(");const c=o[a];typeof c=="function"?r+=c():c===void 0?this.connection.driver.options.type==="oracle"&&t.length>1||se.isSQLiteFamily(this.connection.driver)||this.connection.driver.options.type==="sap"||this.connection.driver.options.type==="spanner"?r+="NULL":r+="DEFAULT":c===null&&this.connection.driver.options.type==="spanner"||(r+=this.createParameter(c)),s===Object.keys(o).length-1?i===t.length-1?r+=")":r+="), ":r+=", "})}),r==="()"?"":r}}getValueSets(){if(Array.isArray(this.expressionMap.valuesSet))return this.expressionMap.valuesSet;if(it.isObject(this.expressionMap.valuesSet))return[this.expressionMap.valuesSet];throw new wF}isOverridingAutoIncrementBehavior(t){return t.isPrimary&&t.isGenerated&&t.generationStrategy==="increment"&&this.getValueSets().some(n=>t.getEntityValue(n)!==void 0&&t.getEntityValue(n)!==null)}}class W_{constructor(t,n){this.queryBuilder=t,this.expressionMap=n}async update(t){const n=this.expressionMap.relationMetadata;if(n.isManyToOne||n.isOneToOneOwner){const r=n.joinColumns.reduce((o,i)=>{const a=it.isObject(t)?i.referencedColumn.getEntityValue(t):t;return i.setEntityValue(o,a),o},{});if(!this.expressionMap.of||Array.isArray(this.expressionMap.of)&&!this.expressionMap.of.length)return;await this.queryBuilder.createQueryBuilder().update(n.entityMetadata.target).set(r).whereInIds(this.expressionMap.of).execute()}else if((n.isOneToOneNotOwner||n.isOneToMany)&&t===null){const r={};n.inverseRelation.joinColumns.forEach(c=>{r[c.propertyName]=null});const o=Array.isArray(this.expressionMap.of)?this.expressionMap.of:[this.expressionMap.of],i={},a=[];o.forEach((c,l)=>{n.inverseRelation.joinColumns.map((u,d)=>{const p="joinColumn_"+l+"_"+d;i[p]=it.isObject(c)?u.referencedColumn.getEntityValue(c):c,a.push(`${u.propertyPath} = :${p}`)})});const s=a.map(c=>"("+c+")").join(" OR ");if(!s)return;await this.queryBuilder.createQueryBuilder().update(n.inverseEntityMetadata.target).set(r).where(s).setParameters(i).execute()}else if(n.isOneToOneNotOwner||n.isOneToMany){if(Array.isArray(this.expressionMap.of))throw new le("You cannot update relations of multiple entities with the same related object. Provide a single entity into .of method.");const r=this.expressionMap.of,o=n.inverseRelation.joinColumns.reduce((i,a)=>{const s=it.isObject(r)?a.referencedColumn.getEntityValue(r):r;return a.setEntityValue(i,s),i},{});if(!t||Array.isArray(t)&&!t.length)return;await this.queryBuilder.createQueryBuilder().update(n.inverseEntityMetadata.target).set(o).whereInIds(t).execute()}else{const r=n.junctionEntityMetadata,o=Array.isArray(this.expressionMap.of)?this.expressionMap.of:[this.expressionMap.of],i=Array.isArray(t)?t:[t],a=n.isManyToManyOwner?o:i,s=n.isManyToManyOwner?i:o,c=[];if(a.forEach(l=>{s.forEach(u=>{const d={};r.ownerColumns.forEach(p=>{d[p.databaseName]=it.isObject(l)?p.referencedColumn.getEntityValue(l):l}),r.inverseColumns.forEach(p=>{d[p.databaseName]=it.isObject(u)?p.referencedColumn.getEntityValue(u):u}),c.push(d)})}),!c.length)return;this.queryBuilder.connection.driver.options.type==="oracle"||this.queryBuilder.connection.driver.options.type==="sap"?await Promise.all(c.map(l=>this.queryBuilder.createQueryBuilder().insert().into(r.tableName).values(l).execute())):await this.queryBuilder.createQueryBuilder().insert().into(r.tableName).values(c).execute()}}}class Az{constructor(t,n){this.queryBuilder=t,this.expressionMap=n}async remove(t){const n=this.expressionMap.relationMetadata;if(n.isOneToMany){const r=Array.isArray(this.expressionMap.of)?this.expressionMap.of:[this.expressionMap.of],o=Array.isArray(t)?t:[t],i={};n.inverseRelation.joinColumns.forEach(l=>{i[l.propertyName]=null});const a={},s=[];r.forEach((l,u)=>{s.push(...o.map((d,p)=>[...n.inverseRelation.joinColumns.map((f,y)=>{const m="joinColumn_"+u+"_"+p+"_"+y;return a[m]=it.isObject(l)?f.referencedColumn.getEntityValue(l):l,`${f.propertyPath} = :${m}`}),...n.inverseRelation.entityMetadata.primaryColumns.map((f,y)=>{const m="primaryColumn_"+p+"_"+p+"_"+y;return a[m]=it.isObject(d)?f.getEntityValue(d):d,`${f.propertyPath} = :${m}`})].join(" AND ")))});const c=s.map(l=>"("+l+")").join(" OR ");if(!c)return;await this.queryBuilder.createQueryBuilder().update(n.inverseEntityMetadata.target).set(i).where(c).setParameters(a).execute()}else{const r=n.junctionEntityMetadata,o=Array.isArray(this.expressionMap.of)?this.expressionMap.of:[this.expressionMap.of],i=Array.isArray(t)?t:[t],a=n.isManyToManyOwner?o:i,s=n.isManyToManyOwner?i:o,c={},l=[];a.forEach((d,p)=>{l.push(...s.map((f,y)=>[...r.ownerColumns.map((m,g)=>{const b="firstValue_"+p+"_"+y+"_"+g;return c[b]=it.isObject(d)?m.referencedColumn.getEntityValue(d):d,`${m.databaseName} = :${b}`}),...r.inverseColumns.map((m,g)=>{const b="secondValue_"+p+"_"+y+"_"+g;return c[b]=it.isObject(f)?m.referencedColumn.getEntityValue(f):f,`${m.databaseName} = :${b}`})].join(" AND ")))});const u=l.map(d=>"("+d+")").join(" OR ");await this.queryBuilder.createQueryBuilder().delete().from(r.tableName).where(u).setParameters(c).execute()}}}class Tz extends Ze{constructor(){super(...arguments),this["@instanceof"]=Symbol.for("RelationQueryBuilder")}getQuery(){return""}of(t){return this.expressionMap.of=t,this}async set(t){const n=this.expressionMap.relationMetadata;if(!this.expressionMap.of)throw new le("Entity whose relation needs to be set is not set. Use .of method to define whose relation you want to set.");if(n.isManyToMany||n.isOneToMany)throw new le(`Set operation is only supported for many-to-one and one-to-one relations. However given "${n.propertyPath}" has ${n.relationType} relation. Use .add() method instead.`);if(n.joinColumns&&n.joinColumns.length>1&&(!it.isObject(t)||Object.keys(t).length<n.joinColumns.length))throw new le('Value to be set into the relation must be a map of relation ids, for example: .set({ firstName: "...", lastName: "..." })');return new W_(this,this.expressionMap).update(t)}async add(t){if(Array.isArray(t)&&t.length===0)return;const n=this.expressionMap.relationMetadata;if(!this.expressionMap.of)throw new le("Entity whose relation needs to be set is not set. Use .of method to define whose relation you want to set.");if(n.isManyToOne||n.isOneToOne)throw new le(`Add operation is only supported for many-to-many and one-to-many relations. However given "${n.propertyPath}" has ${n.relationType} relation. Use .set() method instead.`);if(n.joinColumns&&n.joinColumns.length>1&&(!it.isObject(t)||Object.keys(t).length<n.joinColumns.length))throw new le('Value to be set into the relation must be a map of relation ids, for example: .set({ firstName: "...", lastName: "..." })');return new W_(this,this.expressionMap).update(t)}async remove(t){if(Array.isArray(t)&&t.length===0)return;const n=this.expressionMap.relationMetadata;if(!this.expressionMap.of)throw new le("Entity whose relation needs to be set is not set. Use .of method to define whose relation you want to set.");if(n.isManyToOne||n.isOneToOne)throw new le(`Add operation is only supported for many-to-many and one-to-many relations. However given "${n.propertyPath}" has ${n.relationType} relation. Use .set(null) method instead.`);return new Az(this,this.expressionMap).remove(t)}async addAndRemove(t,n){await this.remove(n),await this.add(t)}async loadOne(){return this.loadMany().then(t=>t[0])}async loadMany(){let t=this.expressionMap.of;if(!it.isObject(t)){const n=this.expressionMap.mainAlias.metadata;if(n.hasMultiplePrimaryKeys)throw new le("Cannot load entity because only one primary key was specified, however entity contains multiple primary keys");t=n.primaryColumns[0].createValueMap(t)}return this.connection.relationLoader.load(this.expressionMap.relationMetadata,t,this.queryRunner)}}class xt{static chunk(t,n){return Array.from(Array(Math.ceil(t.length/n)),(r,o)=>t.slice(o*n,o*n+n))}static splitClassesAndStrings(t){return[t.filter(n=>typeof n!="string"),t.filter(n=>typeof n=="string")]}static groupBy(t,n){return t.reduce((r,o)=>{const i=n(o);let a=r.find(s=>s.id===i);return a||(a={id:i,items:[]},r.push(a)),a.items.push(o),r},[])}static uniq(t,n){return t.reduce((r,o)=>{let i=!1;if(typeof n=="function"){const a=n(o);i=!!r.find(s=>n(s)===a)}else typeof n=="string"?i=!!r.find(a=>a[n]===o[n]):i=r.indexOf(o)!==-1;return i||r.push(o),r},[])}static isPlainObject(t){return t==null?!1:!t.constructor||t.constructor===Object}static mergeArrayKey(t,n,r,o){if(o.has(r)){t[n]=o.get(r);return}if(!(r instanceof Promise)){if(!this.isPlainObject(r)&&!Array.isArray(r)){t[n]=r;return}t[n]||(t[n]=Array.isArray(r)?[]:{}),o.set(r,t[n]),this.merge(t[n],r,o),o.delete(r)}}static mergeObjectKey(t,n,r,o){if(o.has(r)){Object.assign(t,{[n]:o.get(r)});return}if(!(r instanceof Promise)){if(!this.isPlainObject(r)&&!Array.isArray(r)){Object.assign(t,{[n]:r});return}t[n]||Object.assign(t,{[n]:Array.isArray(r)?[]:{}}),o.set(r,t[n]),this.merge(t[n],r,o),o.delete(r)}}static merge(t,n,r=new Map){if(this.isPlainObject(t)&&this.isPlainObject(n))for(const o of Object.keys(n))o!=="__proto__"&&this.mergeObjectKey(t,o,n[o],r);if(Array.isArray(t)&&Array.isArray(n))for(let o=0;o<n.length;o++)this.mergeArrayKey(t,o,n[o],r)}static mergeDeep(t,...n){if(!n.length)return t;for(const r of n)xt.merge(t,r);return t}static deepCompare(...t){let n,r,o,i;if(arguments.length<1)return!0;for(n=1,r=arguments.length;n<r;n++)if(o=[],i=[],!this.compare2Objects(o,i,arguments[0],arguments[n]))return!1;return!0}static deepValue(t,n){const r=n.split(".");for(let o=0,i=r.length;o<i;o++)t=t[r[o]];return t}static replaceEmptyObjectsWithBooleans(t){for(let n in t)t[n]&&typeof t[n]=="object"&&(Object.keys(t[n]).length===0?t[n]=!0:this.replaceEmptyObjectsWithBooleans(t[n]))}static propertyPathsToTruthyObject(t){let n={};for(let r of t){const o=r.split(".");if(!o.length)continue;(!n[o[0]]||n[o[0]]===!0)&&(n[o[0]]={});let i=n[o[0]];for(let[a,s]of o.entries())a!==0&&(i[s]?i=i[s]:a===o.length-1?(i[s]={},i=null):(i[s]={},i=i[s]))}return this.replaceEmptyObjectsWithBooleans(n),n}static compareIds(t,n){return t==null||n===void 0||n===null?!1:(typeof t.id=="string"&&typeof n.id=="string"||typeof t.id=="number"&&typeof n.id=="number")&&Object.keys(t).length===1&&Object.keys(n).length===1?t.id===n.id:xt.deepCompare(t,n)}static toBoolean(t){return typeof t=="boolean"?t:typeof t=="string"?t==="true"||t==="1":typeof t=="number"?t>0:!1}static zipObject(t,n){return t.reduce((r,o,i)=>(r[o]=n[i],r),{})}static isArraysEqual(t,n){return t.length!==n.length?!1:t.every(r=>n.indexOf(r)!==-1)}static areMutuallyExclusive(...t){return!t.some(n=>{const r=t.filter(o=>o!==n);return n.some(o=>r.some(i=>i.includes(o)))})}static parseSqlCheckExpression(t,n){const r=t.match(new RegExp(`"${n}" varchar CHECK\\s*\\(\\s*"${n}"\\s+IN\\s*`));if(r&&r.index){const o=t.substring(r.index+r[0].length);let i="",a="";const s=[];for(let c=0;c<o.length;c++){const l=o[c];switch(l){case",":i==""?(s.push(a),a=""):a+=l;break;case"'":i==l?o[c+1]===l?(a+=l,c+=1):i="":i=l;break;case")":if(i=="")return s.push(a),s;a+=l;break;default:i!=""&&(a+=l)}}}}static compare2Objects(t,n,r,o){let i;if(Number.isNaN(r)&&Number.isNaN(o)||r===o)return!0;if(r===null||o===null||r===void 0||o===void 0)return!1;if((typeof r.equals=="function"||typeof r.equals=="function")&&r.equals(o))return!0;if(typeof r=="function"&&typeof o=="function"||r instanceof Date&&o instanceof Date||r instanceof RegExp&&o instanceof RegExp||typeof r=="string"&&typeof o=="string"||typeof r=="number"&&typeof o=="number")return r.toString()===o.toString();if(!(typeof r=="object"&&typeof o=="object")||Object.prototype.isPrototypeOf.call(r,o)||Object.prototype.isPrototypeOf.call(o,r)||r.constructor!==o.constructor||r.prototype!==o.prototype||t.indexOf(r)>-1||n.indexOf(o)>-1)return!1;for(i in o)if(o.hasOwnProperty(i)!==r.hasOwnProperty(i)||typeof o[i]!=typeof r[i])return!1;for(i in r){if(o.hasOwnProperty(i)!==r.hasOwnProperty(i)||typeof o[i]!=typeof r[i])return!1;switch(typeof r[i]){case"object":case"function":if(t.push(r),n.push(o),!this.compare2Objects(t,n,r[i],o[i]))return!1;t.pop(),n.pop();break;default:if(r[i]!==o[i])return!1;break}}return!0}}class Iz{constructor(t,n,r,o,i){this.expressionMap=t,this.driver=n,this.rawRelationIdResults=r,this.rawRelationCountResults=o,this.queryRunner=i}transform(t,n){const r=this.group(t,n),o=[];return r.forEach(i=>{const a=this.transformRawResultsGroup(i,n);a!==void 0&&!Object.values(a).every(s=>s===null)&&o.push(a)}),o}group(t,n){const r=new Map,o=[];return n.metadata.tableType==="view"?o.push(...n.metadata.columns.map(i=>se.buildAlias(this.driver,void 0,n.name,i.databaseName))):o.push(...n.metadata.primaryColumns.map(i=>se.buildAlias(this.driver,void 0,n.name,i.databaseName))),t.forEach(i=>{const a=o.map(c=>{const l=i[c];return Mk.isBuffer(l)?l.toString("hex"):it.isObject(l)?JSON.stringify(l):l}).join("_"),s=r.get(a);s?s.push(i):r.set(a,[i])}),r}transformRawResultsGroup(t,n){let r=n.metadata;if(r.discriminatorColumn){const l=t.map(d=>d[se.buildAlias(this.driver,void 0,n.name,n.metadata.discriminatorColumn.databaseName)]),u=r.childEntityMetadatas.find(d=>typeof l.find(p=>p===d.discriminatorValue)<"u");u&&(r=u)}let o=r.create(this.queryRunner,{fromDeserializer:!0,pojo:this.expressionMap.options.indexOf("create-pojo")!==-1});const i=this.transformColumns(t,n,o,r),a=this.transformJoins(t,o,n,r),s=this.transformRelationIds(t,n,o,r),c=this.transformRelationCounts(t,n,o);if(i||r.primaryColumns.filter(l=>l.isVirtual===!1).length===0&&(a||s||c))return o}transformColumns(t,n,r,o){let i=!1;return o.columns.forEach(a=>{if(o.childEntityMetadatas.length>0&&o.childEntityMetadatas.findIndex(c=>c.target===a.target)!==-1)return;const s=t[0][se.buildAlias(this.driver,void 0,n.name,a.databaseName)];s===void 0||a.isVirtual||this.expressionMap.selects.find(c=>c.selection===n.name||c.selection===n.name+"."+a.propertyPath)&&(a.setEntityValue(r,this.driver.prepareHydratedValue(s,a)),s!==null&&(i=!0))}),i}transformJoins(t,n,r,o){let i=!1;return this.expressionMap.joinAttributes.forEach(a=>{if(!a.metadata||!a.isSelected||a.relation&&!o.relations.find(c=>c===a.relation))return;if(a.mapToProperty){if(a.mapToPropertyParentAlias!==r.name)return}else if(!a.relation||a.parentAlias!==r.name||a.relationPropertyPath!==a.relation.propertyPath)return;let s=this.transform(t,a.alias);s=a.isMany?s:s[0],s=!a.isMany&&s===void 0?null:s,s!==void 0&&(a.mapToPropertyPropertyName?n[a.mapToPropertyPropertyName]=s:a.relation.setEntityValue(n,s),i=!0)}),i}transformRelationIds(t,n,r,o){let i=!1;return this.rawRelationIdResults.forEach((a,s)=>{if(a.relationIdAttribute.parentAlias!==n.name)return;const c=a.relationIdAttribute.relation,l=this.createValueMapFromJoinColumns(c,a.relationIdAttribute.parentAlias,t);if(l==null)return;this.prepareDataForTransformRelationIds();const u=this.hashEntityIds(c,l),d=this.relationIdMaps[s][u]||[],p=a.relationIdAttribute.mapToPropertyPropertyPath.split("."),f=(y,m,g)=>{const b=y.shift();if(b&&y.length===0)return m[b]=g,m;if(b&&y.length>0)f(y,m[b],g);else return m};c.isOneToOne||c.isManyToOne?d[0]!==void 0&&(f(p,r,d[0]),i=!0):(f(p,r,d),i=i||d.length>0)}),i}transformRelationCounts(t,n,r){let o=!1;return this.rawRelationCountResults.filter(i=>i.relationCountAttribute.parentAlias===n.name).forEach(i=>{const a=i.relationCountAttribute.relation;let s;a.isOneToMany?s=a.inverseRelation.joinColumns[0].referencedColumn.databaseName:s=a.isOwning?a.joinColumns[0].referencedColumn.databaseName:a.inverseRelation.joinColumns[0].referencedColumn.databaseName;const c=t[0][se.buildAlias(this.driver,void 0,n.name,s)];c!=null&&(r[i.relationCountAttribute.mapToPropertyPropertyName]=0,i.results.filter(l=>l.parentId===c).forEach(l=>{r[i.relationCountAttribute.mapToPropertyPropertyName]=parseInt(l.cnt),o=!0}))}),o}createValueMapFromJoinColumns(t,n,r){let o;return t.isManyToOne||t.isOneToOneOwner?o=t.entityMetadata.primaryColumns.map(i=>i):t.isOneToMany||t.isOneToOneNotOwner?o=t.inverseRelation.joinColumns.map(i=>i):t.isOwning?o=t.joinColumns.map(i=>i):o=t.inverseRelation.inverseJoinColumns.map(i=>i),o.reduce((i,a)=>(r.forEach(s=>{t.isManyToOne||t.isOneToOneOwner?i[a.databaseName]=this.driver.prepareHydratedValue(s[se.buildAlias(this.driver,void 0,n,a.databaseName)],a):i[a.databaseName]=this.driver.prepareHydratedValue(s[se.buildAlias(this.driver,void 0,n,a.referencedColumn.databaseName)],a.referencedColumn)}),i),{})}extractEntityPrimaryIds(t,n){let r;return t.isManyToOne||t.isOneToOneOwner?r=t.entityMetadata.primaryColumns.map(o=>o):t.isOneToMany||t.isOneToOneNotOwner?r=t.inverseRelation.joinColumns.map(o=>o):t.isOwning?r=t.joinColumns.map(o=>o):r=t.inverseRelation.inverseJoinColumns.map(o=>o),r.reduce((o,i)=>(o[i.databaseName]=n[i.databaseName],o),{})}prepareDataForTransformRelationIds(){this.relationIdMaps||(this.relationIdMaps=this.rawRelationIdResults.map(t=>{const n=t.relationIdAttribute.relation;let r;return n.isManyToOne||n.isOneToOneOwner?r=n.joinColumns:n.isOneToMany||n.isOneToOneNotOwner?r=n.inverseEntityMetadata.primaryColumns:n.isOwning?r=n.inverseJoinColumns:r=n.inverseRelation.joinColumns,t.results.reduce((o,i)=>{let a=r.reduce((s,c)=>{let l=i[c.databaseName];return n.isOneToMany||n.isOneToOneNotOwner?(c.isVirtual&&c.referencedColumn&&c.referencedColumn.propertyName!==c.propertyName&&(l=c.referencedColumn.createValueMap(l)),xt.mergeDeep(s,c.createValueMap(l))):(!c.isPrimary&&c.referencedColumn.referencedColumn&&(l=c.referencedColumn.referencedColumn.createValueMap(l)),xt.mergeDeep(s,c.referencedColumn.createValueMap(l)))},{});if(r.length===1&&!t.relationIdAttribute.disableMixedMap&&(n.isOneToMany||n.isOneToOneNotOwner?a=r[0].getEntityValue(a):a=r[0].referencedColumn.getEntityValue(a)),a!==void 0){const s=this.hashEntityIds(n,i);o[s]?o[s].push(a):o[s]=[a]}return o},{})}))}hashEntityIds(t,n){const r=this.extractEntityPrimaryIds(t,n);return JSON.stringify(r)}}let Dz=class{constructor(e,t,n){this.connection=e,this.queryRunner=t,this.relationIdAttributes=n}async load(e){const t=this.relationIdAttributes.map(async n=>{if(n.relation.isManyToOne||n.relation.isOneToOneOwner){if(n.queryBuilderFactory)throw new le("Additional condition can not be used with ManyToOne or OneToOne owner relations.");const r={},o=e.map(i=>{const a={},s=[];n.relation.joinColumns.forEach(l=>{a[l.databaseName]=this.connection.driver.prepareHydratedValue(i[se.buildAlias(this.connection.driver,void 0,n.parentAlias,l.databaseName)],l.referencedColumn);const u=`${l.databaseName}:${a[l.databaseName]}`;s.indexOf(u)===-1&&s.push(u)}),n.relation.entityMetadata.primaryColumns.forEach(l=>{a[l.databaseName]=this.connection.driver.prepareHydratedValue(i[se.buildAlias(this.connection.driver,void 0,n.parentAlias,l.databaseName)],l);const u=`${l.databaseName}:${a[l.databaseName]}`;s.indexOf(u)===-1&&s.push(u)}),s.sort();const c=s.join("::");return r[c]?null:(r[c]=!0,a)}).filter(i=>i);return{relationIdAttribute:n,results:o}}else if(n.relation.isOneToMany||n.relation.isOneToOneNotOwner){const r=n.relation,o=r.isOwning?r.joinColumns:r.inverseRelation.joinColumns,i=r.inverseEntityMetadata.target,a=r.inverseEntityMetadata.tableName,s=n.alias||a,c={},l={},u=e.map((f,y)=>{const m=[],g={},b=o.map(_=>{const x=_.databaseName+y,j=f[se.buildAlias(this.connection.driver,void 0,n.parentAlias,_.referencedColumn.databaseName)],O=`${s}:${_.propertyPath}:${j}`;return m.indexOf(O)!==-1?"":(m.push(O),g[x]=j,s+"."+_.propertyPath+" = :"+x)}).filter(_=>_).join(" AND ");m.sort();const w=m.join("::");return c[w]?"":(c[w]=!0,Object.assign(l,g),b)}).filter(f=>f).map(f=>"("+f+")").join(" OR ");if(!u)return{relationIdAttribute:n,results:[]};const d=this.connection.createQueryBuilder(this.queryRunner);xt.uniq([...o,...r.inverseRelation.entityMetadata.primaryColumns],f=>f.propertyPath).forEach(f=>{d.addSelect(s+"."+f.propertyPath,f.databaseName)}),d.from(i,s).where("("+u+")").setParameters(l),n.queryBuilderFactory&&n.queryBuilderFactory(d);const p=await d.getRawMany();return p.forEach(f=>{o.forEach(y=>{f[y.databaseName]=this.connection.driver.prepareHydratedValue(f[y.databaseName],y.referencedColumn)}),r.inverseRelation.entityMetadata.primaryColumns.forEach(y=>{f[y.databaseName]=this.connection.driver.prepareHydratedValue(f[y.databaseName],y)})}),{relationIdAttribute:n,results:p}}else{const r=n.relation,o=r.isOwning?r.joinColumns:r.inverseRelation.inverseJoinColumns,i=r.isOwning?r.inverseJoinColumns:r.inverseRelation.joinColumns,a=n.junctionAlias,s=n.joinInverseSideMetadata.tableName,c=n.alias||s,l=r.isOwning?r.junctionEntityMetadata.tableName:r.inverseRelation.junctionEntityMetadata.tableName,u=e.map(w=>o.reduce((_,x)=>(_[x.propertyPath]=w[se.buildAlias(this.connection.driver,void 0,n.parentAlias,x.referencedColumn.databaseName)],_),{}));if(u.length===0)return{relationIdAttribute:n,results:[]};const d={},p={},f=u.map((w,_)=>{const x=[],j={},O=Object.keys(w).map(M=>{const N=M+_,A=w[M],P=`${a}:${M}:${A}`;return x.indexOf(P)!==-1?"":(x.push(P),j[N]=A,a+"."+M+" = :"+N)}).filter(M=>M).join(" AND ");x.sort();const E=x.join("::");return p[E]?"":(p[E]=!0,Object.assign(d,j),O)}).filter(w=>w),y=i.map(w=>a+"."+w.propertyPath+" = "+c+"."+w.referencedColumn.propertyPath).join(" AND "),m=f.map(w=>"("+w+" AND "+y+")").join(" OR "),g=this.connection.createQueryBuilder(this.queryRunner);i.forEach(w=>{g.addSelect(a+"."+w.propertyPath,w.databaseName).addOrderBy(a+"."+w.propertyPath)}),o.forEach(w=>{g.addSelect(a+"."+w.propertyPath,w.databaseName).addOrderBy(a+"."+w.propertyPath)}),g.from(s,c).innerJoin(l,a,m).setParameters(d),n.queryBuilderFactory&&n.queryBuilderFactory(g);const b=await g.getRawMany();return b.forEach(w=>{[...o,...i].forEach(_=>{w[_.databaseName]=this.connection.driver.prepareHydratedValue(w[_.databaseName],_.referencedColumn)})}),{relationIdAttribute:n,results:b}}});return Promise.all(t)}};class Rz{constructor(t,n){this.connection=t,this.queryRunner=n}load(t,n,r){const o=Array.isArray(n)?n:[n],i=Array.isArray(r)?r:r?[r]:void 0;return t.isManyToMany?this.loadForManyToMany(t,o,i):t.isManyToOne||t.isOneToOneOwner?this.loadForManyToOneAndOneToOneOwner(t,o,i):this.loadForOneToManyAndOneToOneNotOwner(t,o,i)}async loadManyToManyRelationIdsAndGroup(t,n,r,o){const i=t.isManyToMany||t.isOneToMany,a=Array.isArray(n)?n:[n];if(!r&&(r=await this.connection.relationLoader.load(t,n,this.queryRunner,o),!r.length))return a.map(d=>({entity:d,related:i?[]:void 0}));const s=await this.load(t,n,r),c=Array.isArray(r)?r:[r];let l=[],u=[];return t.isManyToManyOwner?(l=t.junctionEntityMetadata.inverseColumns.map(d=>d.referencedColumn),u=t.junctionEntityMetadata.ownerColumns.map(d=>d.referencedColumn)):t.isManyToManyNotOwner?(l=t.junctionEntityMetadata.ownerColumns.map(d=>d.referencedColumn),u=t.junctionEntityMetadata.inverseColumns.map(d=>d.referencedColumn)):t.isManyToOne||t.isOneToOneOwner?(l=t.joinColumns.map(d=>d.referencedColumn),u=t.entityMetadata.primaryColumns):(t.isOneToMany||t.isOneToOneNotOwner)&&(l=t.inverseRelation.entityMetadata.primaryColumns,u=t.inverseRelation.joinColumns.map(d=>d.referencedColumn)),a.map(d=>{const p={entity:d,related:i?[]:void 0},f=s.filter(y=>u.every(m=>m.compareEntityValue(d,y[m.entityMetadata.name+"_"+m.propertyAliasName])));return f.length&&c.forEach(y=>{f.forEach(m=>{l.every(g=>g.compareEntityValue(y,m[se.buildAlias(this.connection.driver,void 0,g.entityMetadata.name+"_"+t.propertyPath.replace(".","_")+"_"+g.propertyPath.replace(".","_"))]))&&(i?p.related.push(y):p.related=y)})}),p})}loadForManyToMany(t,n,r){const o=t.junctionEntityMetadata,i=o.name,a=t.isOwning?o.ownerColumns:o.inverseColumns,s=t.isOwning?o.inverseColumns:o.ownerColumns,c=this.connection.createQueryBuilder(this.queryRunner);a.forEach(p=>{const f=se.buildAlias(this.connection.driver,void 0,p.referencedColumn.entityMetadata.name+"_"+p.referencedColumn.propertyPath.replace(".","_"));c.addSelect(i+"."+p.propertyPath,f)}),s.forEach(p=>{const f=se.buildAlias(this.connection.driver,void 0,p.referencedColumn.entityMetadata.name+"_"+t.propertyPath.replace(".","_")+"_"+p.referencedColumn.propertyPath.replace(".","_"));c.addSelect(i+"."+p.propertyPath,f)});let l="";if(a.length===1){const p=n.map(f=>a[0].referencedColumn.getEntityValue(f));p.every(f=>typeof f=="number")?l=`${i}.${a[0].propertyPath} IN (${p.join(", ")})`:(c.setParameter("values1",p),l=i+"."+a[0].propertyPath+" IN (:...values1)")}else l="("+n.map((p,f)=>a.map(y=>{const m="entity1_"+f+"_"+y.propertyName;return c.setParameter(m,y.referencedColumn.getEntityValue(p)),i+"."+y.propertyPath+" = :"+m}).join(" AND ")).map(p=>"("+p+")").join(" OR ")+")";let u="";if(r)if(s.length===1){const p=r.map(f=>s[0].referencedColumn.getEntityValue(f));p.every(f=>typeof f=="number")?u=`${i}.${s[0].propertyPath} IN (${p.join(", ")})`:(c.setParameter("values2",p),u=i+"."+s[0].propertyPath+" IN (:...values2)")}else u="("+r.map((p,f)=>s.map(y=>{const m="entity2_"+f+"_"+y.propertyName;return c.setParameter(m,y.referencedColumn.getEntityValue(p)),i+"."+y.propertyPath+" = :"+m}).join(" AND ")).map(p=>"("+p+")").join(" OR ")+")";const d=[l,u].filter(p=>p.length>0).join(" AND ");return c.from(o.target,i).where(d).getRawMany()}loadForManyToOneAndOneToOneOwner(t,n,r){const o=t.entityMetadata.targetName,i=t.joinColumns.every(c=>!!t.entityMetadata.nonVirtualColumns.find(l=>l===c));if(r&&i){let c=[];if(n.forEach(l=>{let u={};t.entityMetadata.primaryColumns.forEach(d=>{const p=d.entityMetadata.name+"_"+d.propertyPath.replace(".","_");u[p]=d.getEntityValue(l)}),r.forEach(d=>{t.joinColumns.forEach(p=>{const f=p.getEntityValue(l),y=p.referencedColumn.getEntityValue(d);if(!(f===void 0||y===void 0)&&f===y){const m=p.referencedColumn.entityMetadata.name+"_"+t.propertyPath.replace(".","_")+"_"+p.referencedColumn.propertyPath.replace(".","_");u[m]=y}})}),Object.keys(u).length===t.entityMetadata.primaryColumns.length+t.joinColumns.length&&c.push(u)}),c.length===n.length)return Promise.resolve(c)}const a=this.connection.createQueryBuilder(this.queryRunner);t.entityMetadata.primaryColumns.forEach(c=>{const l=se.buildAlias(this.connection.driver,void 0,c.entityMetadata.name+"_"+c.propertyPath.replace(".","_"));a.addSelect(o+"."+c.propertyPath,l)}),t.joinColumns.forEach(c=>{const l=se.buildAlias(this.connection.driver,void 0,c.referencedColumn.entityMetadata.name+"_"+t.propertyPath.replace(".","_")+"_"+c.referencedColumn.propertyPath.replace(".","_"));a.addSelect(o+"."+c.propertyPath,l)});let s="";if(t.entityMetadata.primaryColumns.length===1){const c=n.map(l=>t.entityMetadata.primaryColumns[0].getEntityValue(l));c.every(l=>typeof l=="number")?s=`${o}.${t.entityMetadata.primaryColumns[0].propertyPath} IN (${c.join(", ")})`:(a.setParameter("values",c),s=o+"."+t.entityMetadata.primaryColumns[0].propertyPath+" IN (:...values)")}else s=n.map((c,l)=>t.entityMetadata.primaryColumns.map((u,d)=>{const p="entity"+l+"_"+d;return a.setParameter(p,u.getEntityValue(c)),o+"."+u.propertyPath+" = :"+p}).join(" AND ")).map(c=>"("+c+")").join(" OR ");return a.from(t.entityMetadata.target,o).where(s).getRawMany()}loadForOneToManyAndOneToOneNotOwner(t,n,r){if(t=t.inverseRelation,t.entityMetadata.primaryColumns.length===t.joinColumns.length&&t.entityMetadata.primaryColumns.every(s=>t.joinColumns.indexOf(s)!==-1))return Promise.resolve(n.map(s=>{const c={};return t.joinColumns.forEach(function(l){const u=l.referencedColumn.getEntityValue(s),d=l.referencedColumn.entityMetadata.name+"_"+l.referencedColumn.propertyPath.replace(".","_"),p=l.entityMetadata.name+"_"+t.inverseRelation.propertyPath.replace(".","_")+"_"+l.propertyPath.replace(".","_");c[d]=u,c[p]=u}),c}));const o=t.entityMetadata.targetName,i=this.connection.createQueryBuilder(this.queryRunner);t.entityMetadata.primaryColumns.forEach(s=>{const c=se.buildAlias(this.connection.driver,void 0,s.entityMetadata.name+"_"+t.inverseRelation.propertyPath.replace(".","_")+"_"+s.propertyPath.replace(".","_"));i.addSelect(o+"."+s.propertyPath,c)}),t.joinColumns.forEach(s=>{const c=se.buildAlias(this.connection.driver,void 0,s.referencedColumn.entityMetadata.name+"_"+s.referencedColumn.propertyPath.replace(".","_"));i.addSelect(o+"."+s.propertyPath,c)});let a="";if(t.joinColumns.length===1){const s=n.map(c=>t.joinColumns[0].referencedColumn.getEntityValue(c));s.every(c=>typeof c=="number")?a=`${o}.${t.joinColumns[0].propertyPath} IN (${s.join(", ")})`:(i.setParameter("values",s),a=o+"."+t.joinColumns[0].propertyPath+" IN (:...values)")}else a=n.map((s,c)=>t.joinColumns.map((l,u)=>{const d="entity"+c+"_"+u;return i.setParameter(d,l.referencedColumn.getEntityValue(s)),o+"."+l.propertyPath+" = :"+d}).join(" AND ")).map(s=>"("+s+")").join(" OR ");return i.from(t.entityMetadata.target,o).where(a).getRawMany()}}class Lz{constructor(t){this.expressionMap=t}transform(){this.expressionMap.mainAlias&&this.expressionMap.mainAlias.metadata.relationIds.forEach(t=>{const n=this.metadataToAttribute(this.expressionMap.mainAlias.name,t);this.expressionMap.relationIdAttributes.push(n)}),this.expressionMap.joinAttributes.forEach(t=>{!t.metadata||t.metadata.isJunction||t.metadata.relationIds.forEach(n=>{const r=this.metadataToAttribute(t.alias.name,n);this.expressionMap.relationIdAttributes.push(r)})})}metadataToAttribute(t,n){return new Lf(this.expressionMap,{relationName:t+"."+n.relation.propertyName,mapToProperty:t+"."+n.propertyName,alias:n.alias,queryBuilderFactory:n.queryBuilderFactory})}}class Bz{constructor(t,n,r){this.connection=t,this.queryRunner=n,this.relationCountAttributes=r}async load(t){const n=(o,i,a)=>a.indexOf(o)===i,r=this.relationCountAttributes.map(async o=>{if(o.relation.isOneToMany){const i=o.relation,a=i.inverseRelation,s=a.joinColumns[0].referencedColumn.propertyName,c=i.inverseEntityMetadata.target,l=i.inverseEntityMetadata.tableName,u=o.alias||l,d=a.propertyName;let p=t.map(y=>y[o.parentAlias+"_"+s]).filter(y=>!!y);if(p=p.filter(n),p.length===0)return{relationCountAttribute:o,results:[]};const f=this.connection.createQueryBuilder(this.queryRunner);return f.select(u+"."+d,"parentId").addSelect("COUNT(*)","cnt").from(c,u).where(u+"."+d+" IN (:...ids)").addGroupBy(u+"."+d).setParameter("ids",p),o.queryBuilderFactory&&o.queryBuilderFactory(f),{relationCountAttribute:o,results:await f.getRawMany()}}else{let i,a,s,c;o.relation.isOwning?(i=o.relation.joinColumns[0].referencedColumn.databaseName,a=o.relation.inverseJoinColumns[0].referencedColumn.databaseName,s=o.relation.junctionEntityMetadata.columns[0],c=o.relation.junctionEntityMetadata.columns[1]):(i=o.relation.inverseRelation.inverseJoinColumns[0].referencedColumn.databaseName,a=o.relation.inverseRelation.joinColumns[0].referencedColumn.databaseName,s=o.relation.junctionEntityMetadata.columns[1],c=o.relation.junctionEntityMetadata.columns[0]);let l=t.map(g=>g[o.parentAlias+"_"+i]).filter(g=>!!g);if(l=l.filter(n),l.length===0)return{relationCountAttribute:o,results:[]};const u=o.junctionAlias,d=o.joinInverseSideMetadata.tableName,p=o.alias||d,f=o.relation.junctionEntityMetadata.tableName,y=u+"."+s.propertyName+" IN ("+l.map(g=>isNaN(g)?"'"+g+"'":g)+") AND "+u+"."+c.propertyName+" = "+p+"."+a,m=this.connection.createQueryBuilder(this.queryRunner);return m.select(u+"."+s.propertyName,"parentId").addSelect("COUNT("+m.escape(p)+"."+m.escape(a)+")","cnt").from(d,p).innerJoin(f,u,y).addGroupBy(u+"."+s.propertyName),o.queryBuilderFactory&&o.queryBuilderFactory(m),{relationCountAttribute:o,results:await m.getRawMany()}}});return Promise.all(r)}}class $z{constructor(t){this.expressionMap=t}transform(){this.expressionMap.mainAlias&&this.expressionMap.mainAlias.metadata.relationCounts.forEach(t=>{const n=this.metadataToAttribute(this.expressionMap.mainAlias.name,t);this.expressionMap.relationCountAttributes.push(n)}),this.expressionMap.joinAttributes.forEach(t=>{!t.metadata||t.metadata.isJunction||t.metadata.relationCounts.forEach(n=>{const r=this.metadataToAttribute(t.alias.name,n);this.expressionMap.relationCountAttributes.push(r)})})}metadataToAttribute(t,n){return new Bf(this.expressionMap,{relationName:t+"."+n.relation.propertyName,mapToProperty:t+"."+n.propertyName,alias:n.alias,queryBuilderFactory:n.queryBuilderFactory})}}class Vf{static isFindOneOptions(t){const n=t;return n&&(Array.isArray(n.select)||Array.isArray(n.relations)||typeof n.select=="object"||typeof n.relations=="object"||typeof n.where=="object"||typeof n.join=="object"||typeof n.order=="object"||typeof n.cache=="object"||typeof n.cache=="boolean"||typeof n.cache=="number"||typeof n.comment=="string"||typeof n.lock=="object"||typeof n.loadRelationIds=="object"||typeof n.loadRelationIds=="boolean"||typeof n.loadEagerRelations=="boolean"||typeof n.withDeleted=="boolean"||typeof n.relationLoadStrategy=="string"||typeof n.transaction=="boolean")}static isFindManyOptions(t){const n=t;return n&&(this.isFindOneOptions(n)||typeof n.skip=="number"||typeof n.take=="number"||typeof n.skip=="string"||typeof n.take=="string")}static extractFindManyOptionsAlias(t){if(this.isFindManyOptions(t)&&t.join)return t.join.alias}static applyOptionsToTreeQueryBuilder(t,n){if(n!=null&&n.relations){const r=[...n.relations];if(Vf.applyRelationsRecursively(t,r,t.expressionMap.mainAlias.name,t.expressionMap.mainAlias.metadata,""),r.length>0)throw new _F(r)}return t}static applyRelationsRecursively(t,n,r,o,i){let a=[];if(i){const s=new RegExp("^"+i.replace(".","\\.")+"\\.");a=n.filter(c=>c.match(s)).map(c=>o.findRelationWithPropertyPath(c.replace(s,""))).filter(c=>c)}else a=n.map(s=>o.findRelationWithPropertyPath(s)).filter(s=>s);a.forEach(s=>{let c=se.buildAlias(t.connection.driver,{joiner:"__"},r,s.propertyPath);const l=r+"."+s.propertyPath;t.expressionMap.relationLoadStrategy==="query"?t.concatRelationMetadata(s):t.leftJoinAndSelect(l,c),n.splice(n.indexOf(i?i+"."+s.propertyPath:s.propertyPath),1);let u,d;if(t.expressionMap.relationLoadStrategy==="query")u=s.inverseEntityMetadata,d=c;else{const p=t.expressionMap.joinAttributes.find(f=>f.entityOrProperty===l);u=p.metadata,d=p.alias.name}if(!d||!u)throw new Vn(s.propertyPath,o);if(this.applyRelationsRecursively(t,n,d,u,i?i+"."+s.propertyPath:s.propertyPath),t.expressionMap.relationLoadStrategy==="join"){const p=o.relations.find(f=>f.propertyName===s.propertyPath);p&&this.joinEagerRelations(t,c,p.inverseEntityMetadata)}})}static joinEagerRelations(t,n,r){r.eagerRelations.forEach(o=>{let i=se.buildAlias(t.connection.driver,{joiner:"__"},n,o.propertyName),a=!0;for(const l of t.expressionMap.joinAttributes)if(!(l.condition!==void 0||l.mapToProperty!==void 0||l.isMappingMany!==void 0||l.direction!=="LEFT"||l.entityOrProperty!==`${n}.${o.propertyPath}`)){a=!1,i=l.alias.name;break}const s=!!t.expressionMap.joinAttributes.find(l=>l.alias.name===i);a&&!s&&t.leftJoin(n+"."+o.propertyPath,i);let c=!0;for(const l of t.expressionMap.selects)if(!(l.aliasName!==void 0||l.virtual!==void 0||l.selection!==i)){c=!1;break}c&&t.addSelect(i),this.joinEagerRelations(t,i,o.inverseEntityMetadata)})}}class Uf extends Ze{constructor(){super(...arguments),this["@instanceof"]=Symbol.for("SelectQueryBuilder"),this.findOptions={},this.selects=[],this.joins=[],this.conditions="",this.orderBys=[],this.relationMetadatas=[]}getQuery(){let t=this.createComment();return t+=this.createCteExpression(),t+=this.createSelectExpression(),t+=this.createJoinExpression(),t+=this.createWhereExpression(),t+=this.createGroupByExpression(),t+=this.createHavingExpression(),t+=this.createOrderByExpression(),t+=this.createLimitOffsetExpression(),t+=this.createLockExpression(),t=t.trim(),this.expressionMap.subQuery&&(t="("+t+")"),this.replacePropertyNamesForTheWholeQuery(t)}setFindOptions(t){return this.findOptions=t,this.applyFindOptions(),this}subQuery(){const t=this.createQueryBuilder();return t.expressionMap.subQuery=!0,t.parentQueryBuilder=this,t}select(t,n){if(this.expressionMap.queryType="select",Array.isArray(t))this.expressionMap.selects=t.map(r=>({selection:r}));else if(typeof t=="function"){const r=t(this.subQuery());this.setParameters(r.getParameters()),this.expressionMap.selects.push({selection:r.getQuery(),aliasName:n})}else t&&(this.expressionMap.selects=[{selection:t,aliasName:n}]);return this}addSelect(t,n){if(!t)return this;if(Array.isArray(t))this.expressionMap.selects=this.expressionMap.selects.concat(t.map(r=>({selection:r})));else if(typeof t=="function"){const r=t(this.subQuery());this.setParameters(r.getParameters()),this.expressionMap.selects.push({selection:r.getQuery(),aliasName:n})}else t&&this.expressionMap.selects.push({selection:t,aliasName:n});return this}maxExecutionTime(t){return this.expressionMap.maxExecutionTime=t,this}distinct(t=!0){return this.expressionMap.selectDistinct=t,this}distinctOn(t){return this.expressionMap.selectDistinctOn=t,this}fromDummy(){return this.from(this.connection.driver.dummyTableName??"(SELECT 1 AS dummy_column)","dummy_table")}from(t,n){const r=this.createFromAlias(t,n);return this.expressionMap.setMainAlias(r),this}addFrom(t,n){const r=this.createFromAlias(t,n);return this.expressionMap.mainAlias||this.expressionMap.setMainAlias(r),this}innerJoin(t,n,r,o){return this.join("INNER",t,n,r,o),this}leftJoin(t,n,r,o){return this.join("LEFT",t,n,r,o),this}innerJoinAndSelect(t,n,r,o){return this.addSelect(n),this.innerJoin(t,n,r,o),this}leftJoinAndSelect(t,n,r,o){return this.addSelect(n),this.leftJoin(t,n,r,o),this}innerJoinAndMapMany(t,n,r,o,i){return this.addSelect(r),this.join("INNER",n,r,o,i,t,!0),this}innerJoinAndMapOne(t,n,r,o,i,a){return this.addSelect(r),this.join("INNER",n,r,o,i,t,!1,a),this}leftJoinAndMapMany(t,n,r,o,i){return this.addSelect(r),this.join("LEFT",n,r,o,i,t,!0),this}leftJoinAndMapOne(t,n,r,o,i,a){return this.addSelect(r),this.join("LEFT",n,r,o,i,t,!1,a),this}loadRelationIdAndMap(t,n,r,o){const i=new Lf(this.expressionMap);return i.mapToProperty=t,i.relationName=n,typeof r=="string"&&(i.alias=r),typeof r=="object"&&r.disableMixedMap&&(i.disableMixedMap=!0),i.queryBuilderFactory=o,this.expressionMap.relationIdAttributes.push(i),i.relation.junctionEntityMetadata&&this.expressionMap.createAlias({type:"other",name:i.junctionAlias,metadata:i.relation.junctionEntityMetadata}),this}loadRelationCountAndMap(t,n,r,o){const i=new Bf(this.expressionMap);return i.mapToProperty=t,i.relationName=n,i.alias=r,i.queryBuilderFactory=o,this.expressionMap.relationCountAttributes.push(i),this.expressionMap.createAlias({type:"other",name:i.junctionAlias}),i.relation.junctionEntityMetadata&&this.expressionMap.createAlias({type:"other",name:i.junctionAlias,metadata:i.relation.junctionEntityMetadata}),this}loadAllRelationIds(t){return this.expressionMap.mainAlias.metadata.relations.forEach(n=>{t!==void 0&&t.relations!==void 0&&t.relations.indexOf(n.propertyPath)===-1||this.loadRelationIdAndMap(this.expressionMap.mainAlias.name+"."+n.propertyPath,this.expressionMap.mainAlias.name+"."+n.propertyPath,t)}),this}where(t,n){this.expressionMap.wheres=[];const r=this.getWhereCondition(t);return r&&(this.expressionMap.wheres=[{type:"simple",condition:r}]),n&&this.setParameters(n),this}andWhere(t,n){return this.expressionMap.wheres.push({type:"and",condition:this.getWhereCondition(t)}),n&&this.setParameters(n),this}orWhere(t,n){return this.expressionMap.wheres.push({type:"or",condition:this.getWhereCondition(t)}),n&&this.setParameters(n),this}whereExists(t){return this.where(...this.getExistsCondition(t))}andWhereExists(t){return this.andWhere(...this.getExistsCondition(t))}orWhereExists(t){return this.orWhere(...this.getExistsCondition(t))}whereInIds(t){return this.where(this.getWhereInIdsCondition(t))}andWhereInIds(t){return this.andWhere(this.getWhereInIdsCondition(t))}orWhereInIds(t){return this.orWhere(this.getWhereInIdsCondition(t))}having(t,n){return this.expressionMap.havings.push({type:"simple",condition:t}),n&&this.setParameters(n),this}andHaving(t,n){return this.expressionMap.havings.push({type:"and",condition:t}),n&&this.setParameters(n),this}orHaving(t,n){return this.expressionMap.havings.push({type:"or",condition:t}),n&&this.setParameters(n),this}groupBy(t){return t?this.expressionMap.groupBys=[t]:this.expressionMap.groupBys=[],this}addGroupBy(t){return this.expressionMap.groupBys.push(t),this}timeTravelQuery(t){return this.connection.driver.options.type==="cockroachdb"&&(t===void 0?this.expressionMap.timeTravel="follower_read_timestamp()":this.expressionMap.timeTravel=t),this}orderBy(t,n="ASC",r){if(n!==void 0&&n!=="ASC"&&n!=="DESC")throw new le('SelectQueryBuilder.addOrderBy "order" can accept only "ASC" and "DESC" values.');if(r!==void 0&&r!=="NULLS FIRST"&&r!=="NULLS LAST")throw new le('SelectQueryBuilder.addOrderBy "nulls" can accept only "NULLS FIRST" and "NULLS LAST" values.');return t?typeof t=="object"?this.expressionMap.orderBys=t:r?this.expressionMap.orderBys={[t]:{order:n,nulls:r}}:this.expressionMap.orderBys={[t]:n}:this.expressionMap.orderBys={},this}addOrderBy(t,n="ASC",r){if(n!==void 0&&n!=="ASC"&&n!=="DESC")throw new le('SelectQueryBuilder.addOrderBy "order" can accept only "ASC" and "DESC" values.');if(r!==void 0&&r!=="NULLS FIRST"&&r!=="NULLS LAST")throw new le('SelectQueryBuilder.addOrderBy "nulls" can accept only "NULLS FIRST" and "NULLS LAST" values.');return r?this.expressionMap.orderBys[t]={order:n,nulls:r}:this.expressionMap.orderBys[t]=n,this}limit(t){if(this.expressionMap.limit=this.normalizeNumber(t),this.expressionMap.limit!==void 0&&isNaN(this.expressionMap.limit))throw new le('Provided "limit" value is not a number. Please provide a numeric value.');return this}offset(t){if(this.expressionMap.offset=this.normalizeNumber(t),this.expressionMap.offset!==void 0&&isNaN(this.expressionMap.offset))throw new le('Provided "offset" value is not a number. Please provide a numeric value.');return this}take(t){if(this.expressionMap.take=this.normalizeNumber(t),this.expressionMap.take!==void 0&&isNaN(this.expressionMap.take))throw new le('Provided "take" value is not a number. Please provide a numeric value.');return this}skip(t){if(this.expressionMap.skip=this.normalizeNumber(t),this.expressionMap.skip!==void 0&&isNaN(this.expressionMap.skip))throw new le('Provided "skip" value is not a number. Please provide a numeric value.');return this}useIndex(t){return this.expressionMap.useIndex=t,this}setLock(t,n,r){return this.expressionMap.lockMode=t,this.expressionMap.lockVersion=n,this.expressionMap.lockTables=r,this}setOnLocked(t){return this.expressionMap.onLocked=t,this}withDeleted(){return this.expressionMap.withDeleted=!0,this}async getRawOne(){return(await this.getRawMany())[0]}async getRawMany(){if(this.expressionMap.lockMode==="optimistic")throw new Ua;this.expressionMap.queryEntity=!1;const t=this.obtainQueryRunner();let n=!1;try{this.expressionMap.useTransaction===!0&&t.isTransactionActive===!1&&(await t.startTransaction(),n=!0);const r=await this.loadRawResults(t);return n&&await t.commitTransaction(),r}catch(r){if(n)try{await t.rollbackTransaction()}catch{}throw r}finally{t!==this.queryRunner&&await t.release()}}async getRawAndEntities(){const t=this.obtainQueryRunner();let n=!1;try{this.expressionMap.useTransaction===!0&&t.isTransactionActive===!1&&(await t.startTransaction(),n=!0),this.expressionMap.queryEntity=!0;const r=await this.executeEntitiesAndRawResults(t);return n&&await t.commitTransaction(),r}catch(r){if(n)try{await t.rollbackTransaction()}catch{}throw r}finally{t!==this.queryRunner&&await t.release()}}async getOne(){const t=(await this.getRawAndEntities()).entities[0];if(t&&this.expressionMap.lockMode==="optimistic"&&this.expressionMap.lockVersion){const n=this.expressionMap.mainAlias.metadata;if(this.expressionMap.lockVersion instanceof Date){const r=n.updateDateColumn.getEntityValue(t);if(r.getTime()!==this.expressionMap.lockVersion.getTime())throw new O_(n.name,this.expressionMap.lockVersion,r)}else{const r=n.versionColumn.getEntityValue(t);if(r!==this.expressionMap.lockVersion)throw new O_(n.name,this.expressionMap.lockVersion,r)}}return t===void 0?null:t}async getOneOrFail(){const t=await this.getOne();if(!t)throw new vF(this.expressionMap.mainAlias.target,this.expressionMap.parameters);return t}async getMany(){if(this.expressionMap.lockMode==="optimistic")throw new Ua;return(await this.getRawAndEntities()).entities}async getCount(){if(this.expressionMap.lockMode==="optimistic")throw new Ua;const t=this.obtainQueryRunner();let n=!1;try{this.expressionMap.useTransaction===!0&&t.isTransactionActive===!1&&(await t.startTransaction(),n=!0),this.expressionMap.queryEntity=!1;const r=await this.executeCountQuery(t);return n&&await t.commitTransaction(),r}catch(r){if(n)try{await t.rollbackTransaction()}catch{}throw r}finally{t!==this.queryRunner&&await t.release()}}async getExists(){if(this.expressionMap.lockMode==="optimistic")throw new Ua;const t=this.obtainQueryRunner();let n=!1;try{this.expressionMap.useTransaction===!0&&t.isTransactionActive===!1&&(await t.startTransaction(),n=!0),this.expressionMap.queryEntity=!1;const r=await this.executeExistsQuery(t);return n&&await t.commitTransaction(),r}catch(r){if(n)try{await t.rollbackTransaction()}catch{}throw r}finally{t!==this.queryRunner&&await t.release()}}async getManyAndCount(){if(this.expressionMap.lockMode==="optimistic")throw new Ua;const t=this.obtainQueryRunner();let n=!1;try{this.expressionMap.useTransaction===!0&&t.isTransactionActive===!1&&(await t.startTransaction(),n=!0),this.expressionMap.queryEntity=!0;const r=await this.executeEntitiesAndRawResults(t);this.expressionMap.queryEntity=!1;const o=this.expressionMap.cacheId;this.expressionMap.cacheId=o&&`${o}-count`;const i=await this.executeCountQuery(t),a=[r.entities,i];return n&&await t.commitTransaction(),a}catch(r){if(n)try{await t.rollbackTransaction()}catch{}throw r}finally{t!==this.queryRunner&&await t.release()}}async stream(){this.expressionMap.queryEntity=!1;const[t,n]=this.getQueryAndParameters(),r=this.obtainQueryRunner();let o=!1;try{this.expressionMap.useTransaction===!0&&r.isTransactionActive===!1&&(await r.startTransaction(),o=!0);const i=()=>{if(r!==this.queryRunner)return r.release()},a=r.stream(t,n,i,i);return o&&await r.commitTransaction(),a}catch(i){if(o)try{await r.rollbackTransaction()}catch{}throw i}}cache(t,n){return typeof t=="boolean"?this.expressionMap.cache=t:typeof t=="number"?(this.expressionMap.cache=!0,this.expressionMap.cacheDuration=t):(typeof t=="string"||typeof t=="number")&&(this.expressionMap.cache=!0,this.expressionMap.cacheId=t),n&&(this.expressionMap.cacheDuration=n),this}setOption(t){return this.expressionMap.options.push(t),this}join(t,n,r,o,i,a,s,c){i&&this.setParameters(i);const l=new z_(this.connection,this.expressionMap);l.direction=t,l.mapAsEntity=c,l.mapToProperty=a,l.isMappingMany=s,l.entityOrProperty=n,l.condition=o,this.expressionMap.joinAttributes.push(l);const u=l.metadata;if(u){if(u.deleteDateColumn&&!this.expressionMap.withDeleted){const d=`${r}.${u.deleteDateColumn.propertyName} IS NULL`;l.condition=l.condition?` ${l.condition} AND ${d}`:`${d}`}l.alias=this.expressionMap.createAlias({type:"join",name:r,metadata:u}),l.relation&&l.relation.junctionEntityMetadata&&this.expressionMap.createAlias({type:"join",name:l.junctionAlias,metadata:l.relation.junctionEntityMetadata})}else{let d="";if(typeof n=="function"){const f=n(this.subQuery());this.setParameters(f.getParameters()),d=f.getQuery()}else d=n;const p=typeof n=="function"||n.substr(0,1)==="("&&n.substr(-1)===")";l.alias=this.expressionMap.createAlias({type:"join",name:r,tablePath:p===!1?n:void 0,subQuery:p===!0?d:void 0})}}createSelectExpression(){if(!this.expressionMap.mainAlias)throw new le("Cannot build query because main alias is not set (call qb#from method)");const t=[],n=[];if(this.expressionMap.mainAlias.hasMetadata){const s=this.expressionMap.mainAlias.metadata;t.push(...this.buildEscapedEntityColumnSelects(this.expressionMap.mainAlias.name,s)),n.push(...this.findEntityColumnSelects(this.expressionMap.mainAlias.name,s))}this.expressionMap.joinAttributes.forEach(s=>{if(s.metadata)t.push(...this.buildEscapedEntityColumnSelects(s.alias.name,s.metadata)),n.push(...this.findEntityColumnSelects(s.alias.name,s.metadata));else if(this.expressionMap.selects.some(c=>c.selection===s.alias.name)){t.push({selection:this.escape(s.alias.name)+".*"});const c=this.expressionMap.selects.find(l=>l.selection===s.alias.name);n.push(c)}}),this.expressionMap.selects.filter(s=>n.indexOf(s)===-1).forEach(s=>t.push({selection:this.replacePropertyNames(s.selection),aliasName:s.aliasName})),t.length===0&&t.push({selection:"*"});let r="";this.expressionMap.useIndex&&se.isMySQLFamily(this.connection.driver)&&(r=` USE INDEX (${this.expressionMap.useIndex})`);const o=this.expressionMap.aliases.filter(s=>s.type==="from"&&(s.tablePath||s.subQuery)).map(s=>s.subQuery?s.subQuery+" "+this.escape(s.name):this.getTableName(s.tablePath)+" "+this.escape(s.name)),i=this.createSelectDistinctExpression(),a=t.map(s=>s.selection+(s.aliasName?" AS "+this.escape(s.aliasName):"")).join(", ");return i+a+" FROM "+o.join(", ")+this.createTableLockExpression()+r}createSelectDistinctExpression(){const{selectDistinct:t,selectDistinctOn:n,maxExecutionTime:r}=this.expressionMap,{driver:o}=this.connection;let i="SELECT ";return r>0&&se.isMySQLFamily(o)&&(i+=`/*+ MAX_EXECUTION_TIME(${this.expressionMap.maxExecutionTime}) */ `),se.isPostgresFamily(o)&&n.length>0?i=`SELECT DISTINCT ON (${n.map(a=>this.replacePropertyNames(a)).join(", ")}) `:t&&(i="SELECT DISTINCT "),i}createJoinExpression(){return this.expressionMap.joinAttributes.map(t=>{const n=t.relation,r=t.tablePath,o=t.alias.name;let i=t.condition?" AND ("+t.condition+")":"";const a=t.parentAlias;if(!a||!n){const s=t.alias.subQuery?t.alias.subQuery:this.getTableName(r);return" "+t.direction+" JOIN "+s+" "+this.escape(o)+this.createTableLockExpression()+(t.condition?" ON "+this.replacePropertyNames(t.condition):"")}if(n.isManyToOne||n.isOneToOneOwner){const s=n.joinColumns.map(c=>o+"."+c.referencedColumn.propertyPath+"="+a+"."+n.propertyPath+"."+c.referencedColumn.propertyPath).join(" AND ");return" "+t.direction+" JOIN "+this.getTableName(r)+" "+this.escape(o)+this.createTableLockExpression()+" ON "+this.replacePropertyNames(s+i)}else if(n.isOneToMany||n.isOneToOneNotOwner){const s=n.inverseRelation.joinColumns.map(c=>(n.inverseEntityMetadata.tableType==="entity-child"&&n.inverseEntityMetadata.discriminatorColumn&&(i+=" AND "+o+"."+n.inverseEntityMetadata.discriminatorColumn.databaseName+"='"+n.inverseEntityMetadata.discriminatorValue+"'"),o+"."+n.inverseRelation.propertyPath+"."+c.referencedColumn.propertyPath+"="+a+"."+c.referencedColumn.propertyPath)).join(" AND ");if(!s)throw new le(`Relation ${n.entityMetadata.name}.${n.propertyName} does not have join columns.`);return" "+t.direction+" JOIN "+this.getTableName(r)+" "+this.escape(o)+this.createTableLockExpression()+" ON "+this.replacePropertyNames(s+i)}else{const s=n.junctionEntityMetadata.tablePath,c=t.junctionAlias;let l="",u="";return n.isOwning?(l=n.joinColumns.map(d=>c+"."+d.propertyPath+"="+a+"."+d.referencedColumn.propertyPath).join(" AND "),u=n.inverseJoinColumns.map(d=>o+"."+d.referencedColumn.propertyPath+"="+c+"."+d.propertyPath).join(" AND ")):(l=n.inverseRelation.inverseJoinColumns.map(d=>c+"."+d.propertyPath+"="+a+"."+d.referencedColumn.propertyPath).join(" AND "),u=n.inverseRelation.joinColumns.map(d=>o+"."+d.referencedColumn.propertyPath+"="+c+"."+d.propertyPath).join(" AND "))," "+t.direction+" JOIN "+this.getTableName(s)+" "+this.escape(c)+this.createTableLockExpression()+" ON "+this.replacePropertyNames(l)+" "+t.direction+" JOIN "+this.getTableName(r)+" "+this.escape(o)+this.createTableLockExpression()+" ON "+this.replacePropertyNames(u+i)}}).join(" ")}createGroupByExpression(){return!this.expressionMap.groupBys||!this.expressionMap.groupBys.length?"":" GROUP BY "+this.replacePropertyNames(this.expressionMap.groupBys.join(", "))}createOrderByExpression(){const t=this.expressionMap.allOrderBys;return Object.keys(t).length===0?"":" ORDER BY "+Object.keys(t).map(n=>{const r=typeof t[n]=="string"?t[n]:t[n].order+" "+t[n].nulls,o=this.expressionMap.selects.find(i=>i.selection===n);if(o&&!o.aliasName&&n.indexOf(".")!==-1){const i=n.split("."),a=i[0],s=i.slice(1).join("."),c=this.expressionMap.aliases.find(l=>l.name===a);if(c){const l=c.metadata.findColumnWithPropertyPath(s);if(l){const u=se.buildAlias(this.connection.driver,void 0,a,l.databaseName);return this.escape(u)+" "+r}}}return this.replacePropertyNames(n)+" "+r}).join(", ")}createLimitOffsetExpression(){let t=this.expressionMap.offset,n=this.expressionMap.limit;if(!t&&!n&&this.expressionMap.joinAttributes.length===0&&(t=this.expressionMap.skip,n=this.expressionMap.take),this.connection.driver.options.type==="mssql"){let r="";if((n||t)&&Object.keys(this.expressionMap.allOrderBys).length<=0&&(r=" ORDER BY (SELECT NULL)"),n&&t)return r+" OFFSET "+t+" ROWS FETCH NEXT "+n+" ROWS ONLY";if(n)return r+" OFFSET 0 ROWS FETCH NEXT "+n+" ROWS ONLY";if(t)return r+" OFFSET "+t+" ROWS"}else if(se.isMySQLFamily(this.connection.driver)||this.connection.driver.options.type==="aurora-mysql"||this.connection.driver.options.type==="sap"||this.connection.driver.options.type==="spanner"){if(n&&t)return" LIMIT "+n+" OFFSET "+t;if(n)return" LIMIT "+n;if(t)throw new OF}else if(se.isSQLiteFamily(this.connection.driver)){if(n&&t)return" LIMIT "+n+" OFFSET "+t;if(n)return" LIMIT "+n;if(t)return" LIMIT -1 OFFSET "+t}else if(this.connection.driver.options.type==="oracle"){if(n&&t)return" OFFSET "+t+" ROWS FETCH NEXT "+n+" ROWS ONLY";if(n)return" FETCH NEXT "+n+" ROWS ONLY";if(t)return" OFFSET "+t+" ROWS"}else{if(n&&t)return" LIMIT "+n+" OFFSET "+t;if(n)return" LIMIT "+n;if(t)return" OFFSET "+t}return""}createTableLockExpression(){if(this.connection.driver.options.type==="mssql")switch(this.expressionMap.lockMode){case"pessimistic_read":return" WITH (HOLDLOCK, ROWLOCK)";case"pessimistic_write":return" WITH (UPDLOCK, ROWLOCK)";case"dirty_read":return" WITH (NOLOCK)"}return""}createLockExpression(){const t=this.connection.driver;let n="";if(this.expressionMap.lockTables){if(!(se.isPostgresFamily(t)||t.options.type==="cockroachdb"))throw new le("Lock tables not supported in selected driver");if(this.expressionMap.lockTables.length<1)throw new le("lockTables cannot be an empty array");n=" OF "+this.expressionMap.lockTables.join(", ")}let r="";switch(this.expressionMap.onLocked==="nowait"?r=" NOWAIT":this.expressionMap.onLocked==="skip_locked"&&(r=" SKIP LOCKED"),this.expressionMap.lockMode){case"pessimistic_read":if(t.options.type==="mysql"||t.options.type==="aurora-mysql")return se.isReleaseVersionOrGreater(t,"8.0.0")?" FOR SHARE"+n+r:" LOCK IN SHARE MODE";if(t.options.type==="mariadb")return" LOCK IN SHARE MODE";if(se.isPostgresFamily(t))return" FOR SHARE"+n+r;if(t.options.type==="oracle")return" FOR UPDATE";if(t.options.type==="mssql")return"";throw new si;case"pessimistic_write":if(se.isMySQLFamily(t)||t.options.type==="aurora-mysql"||t.options.type==="oracle")return" FOR UPDATE"+r;if(se.isPostgresFamily(t)||t.options.type==="cockroachdb")return" FOR UPDATE"+n+r;if(t.options.type==="mssql")return"";throw new si;case"pessimistic_partial_write":if(se.isPostgresFamily(t))return" FOR UPDATE"+n+" SKIP LOCKED";if(se.isMySQLFamily(t))return" FOR UPDATE SKIP LOCKED";throw new si;case"pessimistic_write_or_fail":if(se.isPostgresFamily(t)||t.options.type==="cockroachdb")return" FOR UPDATE"+n+" NOWAIT";if(se.isMySQLFamily(t))return" FOR UPDATE NOWAIT";throw new si;case"for_no_key_update":if(se.isPostgresFamily(t)||t.options.type==="cockroachdb")return" FOR NO KEY UPDATE"+n+r;throw new si;case"for_key_share":if(se.isPostgresFamily(t))return" FOR KEY SHARE"+n+r;throw new si;default:return""}}createHavingExpression(){if(!this.expressionMap.havings||!this.expressionMap.havings.length)return"";const t=this.expressionMap.havings.map((n,r)=>{switch(n.type){case"and":return(r>0?"AND ":"")+this.replacePropertyNames(n.condition);case"or":return(r>0?"OR ":"")+this.replacePropertyNames(n.condition);default:return this.replacePropertyNames(n.condition)}}).join(" ");return t.length?" HAVING "+t:""}buildEscapedEntityColumnSelects(t,n){const r=this.expressionMap.selects.some(l=>l.selection===t),o=[];if(r&&o.push(...n.columns.filter(l=>l.isSelect===!0)),o.push(...n.columns.filter(l=>this.expressionMap.selects.some(u=>u.selection===t+"."+l.propertyPath))),o.length===0)return[];const i=this.expressionMap.queryEntity?n.primaryColumns.filter(l=>o.indexOf(l)===-1):[],a=[...o,...i],s=[],c=this.escape(t);return a.forEach(l=>{let u=c+"."+this.escape(l.databaseName);l.isVirtualProperty&&l.query&&(u=`(${l.query(c)})`),this.connection.driver.spatialTypes.indexOf(l.type)!==-1&&((se.isMySQLFamily(this.connection.driver)||this.connection.driver.options.type==="aurora-mysql")&&(u=`${this.connection.driver.options.legacySpatialSupport?"AsText":"ST_AsText"}(${u})`),se.isPostgresFamily(this.connection.driver)&&(l.precision?u=`ST_AsGeoJSON(${u}, ${l.precision})::json`:u=`ST_AsGeoJSON(${u})::json`),this.connection.driver.options.type==="mssql"&&(u=`${u}.ToString()`));const d=this.expressionMap.selects.filter(p=>p.selection===t+"."+l.propertyPath);if(d.length)d.forEach(p=>{s.push({selection:u,aliasName:p.aliasName?p.aliasName:se.buildAlias(this.connection.driver,void 0,t,l.databaseName),virtual:p.virtual})});else{if(l.isVirtualProperty)return;s.push({selection:u,aliasName:se.buildAlias(this.connection.driver,void 0,t,l.databaseName),virtual:r})}}),s}findEntityColumnSelects(t,n){const r=this.expressionMap.selects.find(o=>o.selection===t);return r?[r]:this.expressionMap.selects.filter(o=>n.columns.some(i=>o.selection===t+"."+i.propertyPath))}computeCountExpression(){const t=this.expressionMap.mainAlias.name,n=this.expressionMap.mainAlias.metadata.primaryColumns,r=this.escape(t);if(this.expressionMap.joinAttributes.length===0&&this.expressionMap.relationIdAttributes.length===0&&this.expressionMap.relationCountAttributes.length===0)return"COUNT(1)";if(this.connection.driver.options.type==="cockroachdb"||se.isPostgresFamily(this.connection.driver))return"COUNT(DISTINCT("+n.map(o=>`${r}.${this.escape(o.databaseName)}`).join(", ")+"))";if(se.isMySQLFamily(this.connection.driver))return"COUNT(DISTINCT "+n.map(o=>`${r}.${this.escape(o.databaseName)}`).join(", ")+")";if(this.connection.driver.options.type==="mssql"){const o=n.map(i=>`${r}.${this.escape(i.databaseName)}`).join(", '|;|', ");return n.length===1?`COUNT(DISTINCT(${o}))`:`COUNT(DISTINCT(CONCAT(${o})))`}return this.connection.driver.options.type==="spanner"?n.length===1?`COUNT(DISTINCT(${r}.${this.escape(n[0].databaseName)}))`:`COUNT(DISTINCT(CONCAT(${n.map(o=>`CAST(${r}.${this.escape(o.databaseName)} AS STRING)`).join(", '|;|', ")})))`:"COUNT(DISTINCT("+n.map(o=>`${r}.${this.escape(o.databaseName)}`).join(" || '|;|' || ")+"))"}async executeCountQuery(t){const n=this.computeCountExpression(),r=await this.clone().orderBy().groupBy().offset(void 0).limit(void 0).skip(void 0).take(void 0).select(n,"cnt").setOption("disable-global-order").loadRawResults(t);return!r||!r[0]||!r[0].cnt?0:parseInt(r[0].cnt)}async executeExistsQuery(t){return(await this.connection.createQueryBuilder().fromDummy().select("1","row_exists").whereExists(this).limit(1).loadRawResults(t)).length>0}applyFindOptions(){if(this.expressionMap.mainAlias.metadata){if(this.findOptions.relationLoadStrategy&&(this.expressionMap.relationLoadStrategy=this.findOptions.relationLoadStrategy),this.findOptions.comment&&this.comment(this.findOptions.comment),this.findOptions.withDeleted&&this.withDeleted(),this.findOptions.select){const t=Array.isArray(this.findOptions.select)?xt.propertyPathsToTruthyObject(this.findOptions.select):this.findOptions.select;this.buildSelect(t,this.expressionMap.mainAlias.metadata,this.expressionMap.mainAlias.name)}if(this.selects.length&&this.select(this.selects),this.selects=[],this.findOptions.relations){const t=Array.isArray(this.findOptions.relations)?xt.propertyPathsToTruthyObject(this.findOptions.relations):this.findOptions.relations;this.buildRelations(t,typeof this.findOptions.select=="object"?this.findOptions.select:void 0,this.expressionMap.mainAlias.metadata,this.expressionMap.mainAlias.name),this.findOptions.loadEagerRelations!==!1&&this.expressionMap.relationLoadStrategy==="join"&&this.buildEagerRelations(t,typeof this.findOptions.select=="object"?this.findOptions.select:void 0,this.expressionMap.mainAlias.metadata,this.expressionMap.mainAlias.name)}if(this.selects.length&&this.addSelect(this.selects),this.findOptions.where&&(this.conditions=this.buildWhere(this.findOptions.where,this.expressionMap.mainAlias.metadata,this.expressionMap.mainAlias.name),this.conditions.length&&this.andWhere(this.conditions.substr(0,1)!=="("?"("+this.conditions+")":this.conditions)),this.findOptions.order&&this.buildOrder(this.findOptions.order,this.expressionMap.mainAlias.metadata,this.expressionMap.mainAlias.name),this.joins.length&&this.joins.forEach(t=>{t.select&&!t.selection?t.type==="inner"?this.innerJoinAndSelect(`${t.parentAlias}.${t.relationMetadata.propertyPath}`,t.alias):this.leftJoinAndSelect(`${t.parentAlias}.${t.relationMetadata.propertyPath}`,t.alias):t.type==="inner"?this.innerJoin(`${t.parentAlias}.${t.relationMetadata.propertyPath}`,t.alias):this.leftJoin(`${t.parentAlias}.${t.relationMetadata.propertyPath}`,t.alias)}),this.findOptions.skip!==void 0&&this.skip(this.findOptions.skip),this.findOptions.take!==void 0&&this.take(this.findOptions.take),typeof this.findOptions.cache=="number"?this.cache(this.findOptions.cache):typeof this.findOptions.cache=="boolean"?this.cache(this.findOptions.cache):typeof this.findOptions.cache=="object"&&this.cache(this.findOptions.cache.id,this.findOptions.cache.milliseconds),this.findOptions.join&&(this.findOptions.join.leftJoin&&Object.keys(this.findOptions.join.leftJoin).forEach(t=>{this.leftJoin(this.findOptions.join.leftJoin[t],t)}),this.findOptions.join.innerJoin&&Object.keys(this.findOptions.join.innerJoin).forEach(t=>{this.innerJoin(this.findOptions.join.innerJoin[t],t)}),this.findOptions.join.leftJoinAndSelect&&Object.keys(this.findOptions.join.leftJoinAndSelect).forEach(t=>{this.leftJoinAndSelect(this.findOptions.join.leftJoinAndSelect[t],t)}),this.findOptions.join.innerJoinAndSelect&&Object.keys(this.findOptions.join.innerJoinAndSelect).forEach(t=>{this.innerJoinAndSelect(this.findOptions.join.innerJoinAndSelect[t],t)})),this.findOptions.lock){if(this.findOptions.lock.mode==="optimistic")this.setLock(this.findOptions.lock.mode,this.findOptions.lock.version);else if(this.findOptions.lock.mode==="pessimistic_read"||this.findOptions.lock.mode==="pessimistic_write"||this.findOptions.lock.mode==="dirty_read"||this.findOptions.lock.mode==="pessimistic_partial_write"||this.findOptions.lock.mode==="pessimistic_write_or_fail"||this.findOptions.lock.mode==="for_no_key_update"||this.findOptions.lock.mode==="for_key_share"){const t=this.findOptions.lock.tables?this.findOptions.lock.tables.map(n=>{const r=this.expressionMap.aliases.find(o=>o.metadata.tableNameWithoutPrefix===n);if(!r)throw new le(`"${n}" is not part of this query`);return this.escape(r.name)}):void 0;this.setLock(this.findOptions.lock.mode,void 0,t),this.findOptions.lock.onLocked&&this.setOnLocked(this.findOptions.lock.onLocked)}}this.findOptions.loadRelationIds===!0?this.loadAllRelationIds():typeof this.findOptions.loadRelationIds=="object"&&this.loadAllRelationIds(this.findOptions.loadRelationIds),this.findOptions.loadEagerRelations!==!1&&Vf.joinEagerRelations(this,this.expressionMap.mainAlias.name,this.expressionMap.mainAlias.metadata),this.findOptions.transaction===!0&&(this.expressionMap.useTransaction=!0)}}concatRelationMetadata(t){this.relationMetadatas.push(t)}async executeEntitiesAndRawResults(t){if(!this.expressionMap.mainAlias)throw new le('Alias is not set. Use "from" method to set an alias.');if((this.expressionMap.lockMode==="pessimistic_read"||this.expressionMap.lockMode==="pessimistic_write"||this.expressionMap.lockMode==="pessimistic_partial_write"||this.expressionMap.lockMode==="pessimistic_write_or_fail"||this.expressionMap.lockMode==="for_no_key_update"||this.expressionMap.lockMode==="for_key_share")&&!t.isTransactionActive)throw new jF;if(this.expressionMap.lockMode==="optimistic"){const a=this.expressionMap.mainAlias.metadata;if(!a.versionColumn&&!a.updateDateColumn)throw new xF(a.name)}const n=new Dz(this.connection,t,this.expressionMap.relationIdAttributes),r=new Bz(this.connection,t,this.expressionMap.relationCountAttributes);new Lz(this.expressionMap).transform(),new $z(this.expressionMap).transform();let o=[],i=[];if((this.expressionMap.skip||this.expressionMap.take)&&this.expressionMap.joinAttributes.length>0){const[a,s]=this.createOrderByCombinedWithSelectExpression("distinctAlias"),c=this.expressionMap.mainAlias.metadata,l=this.expressionMap.mainAlias.name,u=c.primaryColumns.map(f=>{const y=this.escape("distinctAlias"),m=this.escape(se.buildAlias(this.connection.driver,void 0,l,f.databaseName));s[m]||(s[m]="ASC");const g=se.buildAlias(this.connection.driver,void 0,"ids_"+l,f.databaseName);return`${y}.${m} AS ${this.escape(g)}`}),d=this.clone(),p=d.expressionMap.timeTravel;if(o=await new Uf(this.connection,t).select(`DISTINCT ${u.join(", ")}`).addSelect(a).from(`(${d.orderBy().timeTravelQuery(!1).getQuery()})`,"distinctAlias").timeTravelQuery(p).offset(this.expressionMap.skip).limit(this.expressionMap.take).orderBy(s).cache(this.expressionMap.cache&&this.expressionMap.cacheId?`${this.expressionMap.cacheId}-pagination`:this.expressionMap.cache,this.expressionMap.cacheDuration).setParameters(this.getParameters()).setNativeParameters(this.expressionMap.nativeParameters).getRawMany(),o.length>0){let f="";const y={};if(c.hasMultiplePrimaryKeys)f=o.map((m,g)=>c.primaryColumns.map(b=>{const w=`orm_distinct_ids_${g}_${b.databaseName}`,_=se.buildAlias(this.connection.driver,void 0,"ids_"+l,b.databaseName);return y[w]=m[_],`${l}.${b.propertyPath}=:${w}`}).join(" AND ")).join(" OR ");else{const m=se.buildAlias(this.connection.driver,void 0,"ids_"+l,c.primaryColumns[0].databaseName),g=o.map(b=>b[m]);g.every(b=>typeof b=="number")?f=`${l}.${c.primaryColumns[0].propertyPath} IN (${g.join(", ")})`:(y.orm_distinct_ids=g,f=l+"."+c.primaryColumns[0].propertyPath+" IN (:...orm_distinct_ids)")}o=await this.clone().mergeExpressionMap({extraAppendedAndWhereCondition:f}).setParameters(y).loadRawResults(t)}}else o=await this.loadRawResults(t);if(o.length>0){const a=await n.load(o),s=await r.load(o);i=new Iz(this.expressionMap,this.connection.driver,a,s,this.queryRunner).transform(o,this.expressionMap.mainAlias),this.expressionMap.callListeners===!0&&this.expressionMap.mainAlias.hasMetadata&&await t.broadcaster.broadcast("Load",this.expressionMap.mainAlias.metadata,i)}if(this.expressionMap.relationLoadStrategy==="query"){const a=new Rz(this.connection,t);await Promise.all(this.relationMetadatas.map(async s=>{const c=s.inverseEntityMetadata.target,l=s.inverseEntityMetadata.targetName,u=Array.isArray(this.findOptions.select)?xt.propertyPathsToTruthyObject(this.findOptions.select):this.findOptions.select,d=Array.isArray(this.findOptions.relations)?xt.propertyPathsToTruthyObject(this.findOptions.relations):this.findOptions.relations,p=this.createQueryBuilder(t).select(l).from(c,l).setFindOptions({select:u?xt.deepValue(u,s.propertyPath):void 0,order:this.findOptions.order?xt.deepValue(this.findOptions.order,s.propertyPath):void 0,relations:d?xt.deepValue(d,s.propertyPath):void 0,withDeleted:this.findOptions.withDeleted,relationLoadStrategy:this.findOptions.relationLoadStrategy});if(i.length>0){const f=await a.loadManyToManyRelationIdsAndGroup(s,i,void 0,p);i.forEach(y=>{const m=f.find(g=>g.entity===y);if(m){const g=m.related===void 0?null:m.related;s.setEntityValue(y,g)}})}}))}return{raw:o,entities:i}}createOrderByCombinedWithSelectExpression(t){const n=this.expressionMap.allOrderBys,r=Object.keys(n).map(i=>{if(i.indexOf(".")!==-1){const a=i.split("."),s=a[0],c=a.slice(1).join("."),l=this.expressionMap.findAliasByName(s).metadata.findColumnWithPropertyPath(c);return this.escape(t)+"."+this.escape(se.buildAlias(this.connection.driver,void 0,s,l.databaseName))}else return this.expressionMap.selects.find(a=>a.selection===i||a.aliasName===i)?this.escape(t)+"."+this.escape(i):""}).join(", "),o={};return Object.keys(n).forEach(i=>{if(i.indexOf(".")!==-1){const a=i.split("."),s=a[0],c=a.slice(1).join("."),l=this.expressionMap.findAliasByName(s).metadata.findColumnWithPropertyPath(c);o[this.escape(t)+"."+this.escape(se.buildAlias(this.connection.driver,void 0,s,l.databaseName))]=n[i]}else this.expressionMap.selects.find(a=>a.selection===i||a.aliasName===i)?o[this.escape(t)+"."+this.escape(i)]=n[i]:o[i]=n[i]}),[r,o]}async loadRawResults(t){const[n,r]=this.getQueryAndParameters(),o=n+" -- PARAMETERS: "+JSON.stringify(r,(u,d)=>typeof d=="bigint"?d.toString():d),i=typeof this.connection.options.cache=="object"?this.connection.options.cache:{};let a;const s=i.alwaysEnabled&&this.expressionMap.cache!==!1||this.expressionMap.cache===!0;let c=!1;if(this.connection.queryResultCache&&s)try{if(a=await this.connection.queryResultCache.getFromCache({identifier:this.expressionMap.cacheId,query:o,duration:this.expressionMap.cacheDuration||i.duration||1e3},t),a&&!this.connection.queryResultCache.isExpired(a))return JSON.parse(a.result)}catch(u){if(!i.ignoreErrors)throw u;c=!0}const l=await t.query(n,r,!0);if(!c&&this.connection.queryResultCache&&s)try{await this.connection.queryResultCache.storeInCache({identifier:this.expressionMap.cacheId,query:o,time:new Date().getTime(),duration:this.expressionMap.cacheDuration||i.duration||1e3,result:JSON.stringify(l.records)},a,t)}catch(u){if(!i.ignoreErrors)throw u}return l.records}mergeExpressionMap(t){return it.assign(this.expressionMap,t),this}normalizeNumber(t){return typeof t=="number"||t===void 0||t===null?t:Number(t)}obtainQueryRunner(){return this.queryRunner||this.connection.createQueryRunner(this.connection.defaultReplicationModeForReads())}buildSelect(t,n,r,o){for(let i in t){if(t[i]===void 0||t[i]===!1)continue;const a=o?o+"."+i:i,s=n.findColumnWithPropertyPathStrict(a),c=n.findEmbeddedWithPropertyPath(a),l=n.findRelationWithPropertyPath(a);if(!c&&!s&&!l)throw new Vn(a,n);s?this.selects.push(r+"."+a):c&&this.buildSelect(t[i],n,r,a)}}buildRelations(t,n,r,o,i){t&&Object.keys(t).forEach(a=>{const s=t[a],c=i?i+"."+a:a,l=r.findEmbeddedWithPropertyPath(c),u=r.findRelationWithPropertyPath(c);if(!l&&!u)throw new Vn(c,r);if(l)this.buildRelations(s,typeof n=="object"?xt.deepValue(n,l.propertyPath):void 0,r,o,c);else if(u){let d=o+"_"+c.replace(".","_");d=se.buildAlias(this.connection.driver,{joiner:"__"},o,d),(s===!0||typeof s=="object")&&(this.expressionMap.relationLoadStrategy==="query"?this.concatRelationMetadata(u):(this.joins.push({type:"left",select:!0,selection:n&&typeof n[a]=="object"?n[a]:void 0,alias:d,parentAlias:o,relationMetadata:u}),n&&typeof n[a]=="object"&&this.buildSelect(n[a],u.inverseEntityMetadata,d))),typeof s=="object"&&this.expressionMap.relationLoadStrategy==="join"&&this.buildRelations(s,typeof n=="object"?xt.deepValue(n,u.propertyPath):void 0,u.inverseEntityMetadata,d,void 0)}})}buildEagerRelations(t,n,r,o,i){t&&Object.keys(t).forEach(a=>{const s=t[a],c=i?i+"."+a:a,l=r.findEmbeddedWithPropertyPath(c),u=r.findRelationWithPropertyPath(c);if(!l&&!u)throw new Vn(c,r);if(l)this.buildEagerRelations(s,typeof n=="object"?xt.deepValue(n,l.propertyPath):void 0,r,o,c);else if(u){let d=o+"_"+c.replace(".","_");d=se.buildAlias(this.connection.driver,{joiner:"__"},o,d),(s===!0||typeof s=="object")&&u.inverseEntityMetadata.eagerRelations.forEach(p=>{let f=d+"_"+p.propertyPath.replace(".","_");f=se.buildAlias(this.connection.driver,{joiner:"__"},d,f),this.joins.find(y=>y.alias===f)||this.joins.push({type:"left",select:!0,alias:f,parentAlias:d,selection:void 0,relationMetadata:p}),n&&typeof n[a]=="object"&&this.buildSelect(n[a],u.inverseEntityMetadata,d)}),typeof s=="object"&&this.buildEagerRelations(s,typeof n=="object"?xt.deepValue(n,u.propertyPath):void 0,u.inverseEntityMetadata,d,void 0)}})}buildOrder(t,n,r,o){for(let i in t){if(t[i]===void 0)continue;const a=o?o+"."+i:i,s=n.findColumnWithPropertyPathStrict(a),c=n.findEmbeddedWithPropertyPath(a),l=n.findRelationWithPropertyPath(a);if(!c&&!s&&!l)throw new Vn(a,n);if(s){let u=typeof t[i]=="object"?t[i].direction:t[i];u=u==="DESC"||u==="desc"||u===-1?"DESC":"ASC";let d=typeof t[i]=="object"?t[i].nulls:void 0;d=(d==null?void 0:d.toLowerCase())==="first"?"NULLS FIRST":(d==null?void 0:d.toLowerCase())==="last"?"NULLS LAST":void 0;let p=`${r}.${a}`;this.addOrderBy(p,u,d)}else if(c)this.buildOrder(t[i],n,r,a);else if(l){let u=r+"_"+a.replace(".","_");u=se.buildAlias(this.connection.driver,{joiner:"__"},r,u),this.joins.find(d=>d.alias===u)||this.joins.push({type:"left",select:!1,alias:u,parentAlias:r,selection:void 0,relationMetadata:l}),this.buildOrder(t[i],l.inverseEntityMetadata,u)}}}buildWhere(t,n,r,o){let i="";if(Array.isArray(t))t.length&&(i=t.map(a=>this.buildWhere(a,n,r,o)).filter(a=>!!a).map(a=>"("+a+")").join(" OR "));else{let a=[];for(let s in t){if(t[s]===void 0||t[s]===null)continue;const c=o?o+"."+s:s,l=n.findColumnWithPropertyPathStrict(c),u=n.findEmbeddedWithPropertyPath(c),d=n.findRelationWithPropertyPath(c);if(!u&&!l&&!d)throw new Vn(c,n);if(l){let p=`${r}.${c}`;l.isVirtualProperty&&l.query&&(p=`(${l.query(r)})`);let f=t[s];Ve.isEqualOperator(t[s])&&(f=t[s].value),l.transformer&&(f instanceof Qa?f.transformValue(l.transformer):f=Ff.transformTo(l.transformer,f)),a.push(this.createWhereConditionExpression(this.getWherePredicateCondition(p,f)))}else if(u){const p=this.buildWhere(t[s],n,r,c);p&&a.push(p)}else if(d){if(typeof t[s]=="object"&&Object.keys(t[s]).every(p=>t[s][p]===void 0))continue;if(Ve.isFindOperator(t[s]))if(t[s].type==="moreThan"||t[s].type==="lessThan"||t[s].type==="moreThanOrEqual"||t[s].type==="lessThanOrEqual"){let p="";t[s].type==="moreThan"?p=">":t[s].type==="lessThan"?p="<":t[s].type==="moreThanOrEqual"?p=">=":t[s].type==="lessThanOrEqual"&&(p="<=");const f=this.subQuery();if(d.isManyToManyOwner)f.select("COUNT(*)").from(d.joinTableName,d.joinTableName).where(d.joinColumns.map(y=>`${d.joinTableName}.${y.propertyName} = ${r}.${y.referencedColumn.propertyName}`).join(" AND "));else if(d.isManyToManyNotOwner)f.select("COUNT(*)").from(d.inverseRelation.joinTableName,d.inverseRelation.joinTableName).where(d.inverseRelation.inverseJoinColumns.map(y=>`${d.inverseRelation.joinTableName}.${y.propertyName} = ${r}.${y.referencedColumn.propertyName}`).join(" AND "));else if(d.isOneToMany)f.select("COUNT(*)").from(d.inverseEntityMetadata.target,d.inverseEntityMetadata.tableName).where(d.inverseRelation.joinColumns.map(y=>`${d.inverseEntityMetadata.tableName}.${y.propertyName} = ${r}.${y.referencedColumn.propertyName}`).join(" AND "));else throw new Error("This relation isn't supported by given find operator");this.andWhere(f.getSql()+" "+p+" "+parseInt(t[s].value))}else if(d.isManyToOne||d.isOneToOne&&d.isOneToOneOwner){const p=`${r}.${c}`;a.push(this.createWhereConditionExpression(this.getWherePredicateCondition(p,t[s])))}else throw new Error("This relation isn't supported by given find operator");else{let p=r+"_"+d.propertyPath.replace(".","_");p=se.buildAlias(this.connection.driver,{joiner:"__"},r,p),this.joins.find(y=>y.alias===p)||this.joins.push({type:"left",select:!1,selection:void 0,alias:p,parentAlias:r,relationMetadata:d});const f=this.buildWhere(t[s],d.inverseEntityMetadata,p);f&&a.push(f)}}}i=a.length?"("+a.join(") AND (")+")":a.join(" AND ")}return i.length?"("+i+")":i}}class X_{constructor(){this.generatedMaps=[]}static from(t){const n=new this;return n.raw=t.records,n.affected=t.affected,n}}class Fz extends Ze{constructor(t,n){super(t,n),this["@instanceof"]=Symbol.for("SoftDeleteQueryBuilder"),this.expressionMap.aliasNamePrefixingEnabled=!1}getQuery(){let t=this.createUpdateExpression();return t+=this.createCteExpression(),t+=this.createOrderByExpression(),t+=this.createLimitExpression(),this.replacePropertyNamesForTheWholeQuery(t.trim())}async execute(){const t=this.obtainQueryRunner();let n=!1;try{this.expressionMap.useTransaction===!0&&t.isTransactionActive===!1&&(await t.startTransaction(),n=!0),this.expressionMap.callListeners===!0&&this.expressionMap.mainAlias.hasMetadata&&(this.expressionMap.queryType==="soft-delete"?await t.broadcaster.broadcast("BeforeSoftRemove",this.expressionMap.mainAlias.metadata):this.expressionMap.queryType==="restore"&&await t.broadcaster.broadcast("BeforeRecover",this.expressionMap.mainAlias.metadata));const r=new zf(t,this.expressionMap);this.expressionMap.updateEntity===!0&&this.expressionMap.mainAlias.hasMetadata&&this.expressionMap.whereEntities.length>0&&(this.expressionMap.extraReturningColumns=r.getSoftDeletionReturningColumns());const[o,i]=this.getQueryAndParameters(),a=await t.query(o,i,!0),s=X_.from(a);return this.expressionMap.updateEntity===!0&&this.expressionMap.mainAlias.hasMetadata&&this.expressionMap.whereEntities.length>0&&await r.update(s,this.expressionMap.whereEntities),this.expressionMap.callListeners===!0&&this.expressionMap.mainAlias.hasMetadata&&(this.expressionMap.queryType==="soft-delete"?await t.broadcaster.broadcast("AfterSoftRemove",this.expressionMap.mainAlias.metadata):this.expressionMap.queryType==="restore"&&await t.broadcaster.broadcast("AfterRecover",this.expressionMap.mainAlias.metadata)),n&&await t.commitTransaction(),s}catch(r){if(n)try{await t.rollbackTransaction()}catch{}throw r}finally{t!==this.queryRunner&&await t.release()}}from(t,n){t=Ve.isEntitySchema(t)?t.options.name:t;const r=this.createFromAlias(t,n);return this.expressionMap.setMainAlias(r),this}where(t,n){this.expressionMap.wheres=[];const r=this.getWhereCondition(t);return r&&(this.expressionMap.wheres=[{type:"simple",condition:r}]),n&&this.setParameters(n),this}andWhere(t,n){return this.expressionMap.wheres.push({type:"and",condition:this.getWhereCondition(t)}),n&&this.setParameters(n),this}orWhere(t,n){return this.expressionMap.wheres.push({type:"or",condition:this.getWhereCondition(t)}),n&&this.setParameters(n),this}whereInIds(t){return this.where(this.getWhereInIdsCondition(t))}andWhereInIds(t){return this.andWhere(this.getWhereInIdsCondition(t))}orWhereInIds(t){return this.orWhere(this.getWhereInIdsCondition(t))}output(t){return this.returning(t)}returning(t){if(!this.connection.driver.isReturningSqlSupported("update"))throw new ll;return this.expressionMap.returning=t,this}orderBy(t,n="ASC",r){return t?typeof t=="object"?this.expressionMap.orderBys=t:r?this.expressionMap.orderBys={[t]:{order:n,nulls:r}}:this.expressionMap.orderBys={[t]:n}:this.expressionMap.orderBys={},this}addOrderBy(t,n="ASC",r){return r?this.expressionMap.orderBys[t]={order:n,nulls:r}:this.expressionMap.orderBys[t]=n,this}limit(t){return this.expressionMap.limit=t,this}whereEntity(t){if(!this.expressionMap.mainAlias.hasMetadata)throw new le(".whereEntity method can only be used on queries which update real entity table.");this.expressionMap.wheres=[];const n=Array.isArray(t)?t:[t];return n.forEach(r=>{const o=this.expressionMap.mainAlias.metadata.getEntityIdMap(r);if(!o)throw new le("Provided entity does not have ids set, cannot perform operation.");this.orWhereInIds(o)}),this.expressionMap.whereEntities=n,this}updateEntity(t){return this.expressionMap.updateEntity=t,this}createUpdateExpression(){const t=this.expressionMap.mainAlias.hasMetadata?this.expressionMap.mainAlias.metadata:void 0;if(!t)throw new le(`Cannot get entity metadata for the given alias "${this.expressionMap.mainAlias}"`);if(!t.deleteDateColumn)throw new bF(t);const n=[];switch(this.expressionMap.queryType){case"soft-delete":n.push(this.escape(t.deleteDateColumn.databaseName)+" = CURRENT_TIMESTAMP");break;case"restore":n.push(this.escape(t.deleteDateColumn.databaseName)+" = NULL");break;default:throw new le('The queryType must be "soft-delete" or "restore"')}if(t.versionColumn&&n.push(this.escape(t.versionColumn.databaseName)+" = "+this.escape(t.versionColumn.databaseName)+" + 1"),t.updateDateColumn&&n.push(this.escape(t.updateDateColumn.databaseName)+" = CURRENT_TIMESTAMP"),n.length<=0)throw new If;const r=this.createWhereExpression(),o=this.createReturningExpression("update");return o===""?`UPDATE ${this.getTableName(this.getMainTableName())} SET ${n.join(", ")}${r}`:this.connection.driver.options.type==="mssql"?`UPDATE ${this.getTableName(this.getMainTableName())} SET ${n.join(", ")} OUTPUT ${o}${r}`:`UPDATE ${this.getTableName(this.getMainTableName())} SET ${n.join(", ")}${r} RETURNING ${o}`}createOrderByExpression(){const t=this.expressionMap.orderBys;return Object.keys(t).length>0?" ORDER BY "+Object.keys(t).map(n=>typeof t[n]=="string"?this.replacePropertyNames(n)+" "+t[n]:this.replacePropertyNames(n)+" "+t[n].order+" "+t[n].nulls).join(", "):""}createLimitExpression(){let t=this.expressionMap.limit;if(t){if(se.isMySQLFamily(this.connection.driver))return" LIMIT "+t;throw new E_}return""}}class zz extends Ze{constructor(t,n){super(t,n),this["@instanceof"]=Symbol.for("UpdateQueryBuilder"),this.expressionMap.aliasNamePrefixingEnabled=!1}getQuery(){let t=this.createComment();return t+=this.createCteExpression(),t+=this.createUpdateExpression(),t+=this.createOrderByExpression(),t+=this.createLimitExpression(),this.replacePropertyNamesForTheWholeQuery(t.trim())}async execute(){const t=this.obtainQueryRunner();let n=!1;try{this.expressionMap.useTransaction===!0&&t.isTransactionActive===!1&&(await t.startTransaction(),n=!0),this.expressionMap.callListeners===!0&&this.expressionMap.mainAlias.hasMetadata&&await t.broadcaster.broadcast("BeforeUpdate",this.expressionMap.mainAlias.metadata,this.expressionMap.valuesSet);let r=null,o=null;const i=new zf(t,this.expressionMap),a=[];if(Array.isArray(this.expressionMap.returning)&&this.expressionMap.mainAlias.hasMetadata)for(const p of this.expressionMap.returning)a.push(...this.expressionMap.mainAlias.metadata.findColumnsWithPropertyPath(p));this.expressionMap.updateEntity===!0&&this.expressionMap.mainAlias.hasMetadata&&this.expressionMap.whereEntities.length>0&&(this.expressionMap.extraReturningColumns=i.getUpdationReturningColumns(),a.push(...this.expressionMap.extraReturningColumns.filter(p=>!a.includes(p)))),a.length>0&&this.connection.driver.options.type==="mssql"&&(r=this.connection.driver.buildTableVariableDeclaration("@OutputTable",a),o="SELECT * FROM @OutputTable");const[s,c]=this.getQueryAndParameters(),l=[r,s,o],u=await t.query(l.filter(p=>p!=null).join(`;

`),c,!0),d=X_.from(u);return this.expressionMap.updateEntity===!0&&this.expressionMap.mainAlias.hasMetadata&&this.expressionMap.whereEntities.length>0&&await i.update(d,this.expressionMap.whereEntities),this.expressionMap.callListeners===!0&&this.expressionMap.mainAlias.hasMetadata&&await t.broadcaster.broadcast("AfterUpdate",this.expressionMap.mainAlias.metadata,this.expressionMap.valuesSet),n&&await t.commitTransaction(),d}catch(r){if(n)try{await t.rollbackTransaction()}catch{}throw r}finally{t!==this.queryRunner&&await t.release()}}set(t){return this.expressionMap.valuesSet=t,this}where(t,n){this.expressionMap.wheres=[];const r=this.getWhereCondition(t);return r&&(this.expressionMap.wheres=[{type:"simple",condition:r}]),n&&this.setParameters(n),this}andWhere(t,n){return this.expressionMap.wheres.push({type:"and",condition:this.getWhereCondition(t)}),n&&this.setParameters(n),this}orWhere(t,n){return this.expressionMap.wheres.push({type:"or",condition:this.getWhereCondition(t)}),n&&this.setParameters(n),this}whereInIds(t){return this.where(this.getWhereInIdsCondition(t))}andWhereInIds(t){return this.andWhere(this.getWhereInIdsCondition(t))}orWhereInIds(t){return this.orWhere(this.getWhereInIdsCondition(t))}output(t){return this.returning(t)}returning(t){if(!this.connection.driver.isReturningSqlSupported("update"))throw new ll;return this.expressionMap.returning=t,this}orderBy(t,n="ASC",r){return t?typeof t=="object"?this.expressionMap.orderBys=t:r?this.expressionMap.orderBys={[t]:{order:n,nulls:r}}:this.expressionMap.orderBys={[t]:n}:this.expressionMap.orderBys={},this}addOrderBy(t,n="ASC",r){return r?this.expressionMap.orderBys[t]={order:n,nulls:r}:this.expressionMap.orderBys[t]=n,this}limit(t){return this.expressionMap.limit=t,this}whereEntity(t){if(!this.expressionMap.mainAlias.hasMetadata)throw new le(".whereEntity method can only be used on queries which update real entity table.");this.expressionMap.wheres=[];const n=Array.isArray(t)?t:[t];return n.forEach(r=>{const o=this.expressionMap.mainAlias.metadata.getEntityIdMap(r);if(!o)throw new le("Provided entity does not have ids set, cannot perform operation.");this.orWhereInIds(o)}),this.expressionMap.whereEntities=n,this}updateEntity(t){return this.expressionMap.updateEntity=t,this}createUpdateExpression(){const t=this.getValueSet(),n=this.expressionMap.mainAlias.hasMetadata?this.expressionMap.mainAlias.metadata:void 0,r={};for(let c in t)t[c]!==void 0&&(r[c]=t[c]);const o=[],i=[];if(n?(this.createPropertyPath(n,r).forEach(c=>{const l=n.findColumnsWithPropertyPath(c);if(l.length<=0)throw new Vn(c,n);l.forEach(u=>{if(!u.isUpdate||i.includes(u))return;i.push(u);let d=u.getEntityValue(r);if(u.referencedColumn&&typeof d=="object"&&!(d instanceof Date)&&d!==null&&!Mk.isBuffer(d)?d=u.referencedColumn.getEntityValue(d):typeof d!="function"&&(d=this.connection.driver.preparePersistentValue(d,u)),typeof d=="function")o.push(this.escape(u.databaseName)+" = "+d());else if((this.connection.driver.options.type==="sap"||this.connection.driver.options.type==="spanner")&&d===null)o.push(this.escape(u.databaseName)+" = NULL");else{this.connection.driver.options.type==="mssql"&&(d=this.connection.driver.parametrizeValue(u,d));const p=this.createParameter(d);let f=null;if((se.isMySQLFamily(this.connection.driver)||this.connection.driver.options.type==="aurora-mysql")&&this.connection.driver.spatialTypes.indexOf(u.type)!==-1){const y=this.connection.driver.options.legacySpatialSupport?"GeomFromText":"ST_GeomFromText";u.srid!=null?f=`${y}(${p}, ${u.srid})`:f=`${y}(${p})`}else se.isPostgresFamily(this.connection.driver)&&this.connection.driver.spatialTypes.indexOf(u.type)!==-1?u.srid!=null?f=`ST_SetSRID(ST_GeomFromGeoJSON(${p}), ${u.srid})::${u.type}`:f=`ST_GeomFromGeoJSON(${p})::${u.type}`:this.connection.driver.options.type==="mssql"&&this.connection.driver.spatialTypes.indexOf(u.type)!==-1?f=u.type+"::STGeomFromText("+p+", "+(u.srid||"0")+")":f=p;o.push(this.escape(u.databaseName)+" = "+f)}})}),(o.length>0||Object.keys(r).length===0)&&(n.versionColumn&&i.indexOf(n.versionColumn)===-1&&o.push(this.escape(n.versionColumn.databaseName)+" = "+this.escape(n.versionColumn.databaseName)+" + 1"),n.updateDateColumn&&i.indexOf(n.updateDateColumn)===-1&&o.push(this.escape(n.updateDateColumn.databaseName)+" = CURRENT_TIMESTAMP"))):Object.keys(r).map(c=>{let l=r[c];if(typeof l=="function")o.push(this.escape(c)+" = "+l());else if((this.connection.driver.options.type==="sap"||this.connection.driver.options.type==="spanner")&&l===null)o.push(this.escape(c)+" = NULL");else{const u=this.createParameter(l);o.push(this.escape(c)+" = "+u)}}),o.length<=0)throw new If;const a=this.createWhereExpression(),s=this.createReturningExpression("update");return s===""?`UPDATE ${this.getTableName(this.getMainTableName())} SET ${o.join(", ")}${a}`:this.connection.driver.options.type==="mssql"?`UPDATE ${this.getTableName(this.getMainTableName())} SET ${o.join(", ")} OUTPUT ${s}${a}`:`UPDATE ${this.getTableName(this.getMainTableName())} SET ${o.join(", ")}${a} RETURNING ${s}`}createOrderByExpression(){const t=this.expressionMap.orderBys;return Object.keys(t).length>0?" ORDER BY "+Object.keys(t).map(n=>typeof t[n]=="string"?this.replacePropertyNames(n)+" "+t[n]:this.replacePropertyNames(n)+" "+t[n].order+" "+t[n].nulls).join(", "):""}createLimitExpression(){let t=this.expressionMap.limit;if(t){if(se.isMySQLFamily(this.connection.driver)||this.connection.driver.options.type==="aurora-mysql")return" LIMIT "+t;throw new E_}return""}getValueSet(){if(typeof this.expressionMap.valuesSet=="object")return this.expressionMap.valuesSet;throw new If}}function Vz(){Ze.registerQueryBuilderClass("DeleteQueryBuilder",e=>new Ez(e)),Ze.registerQueryBuilderClass("InsertQueryBuilder",e=>new kz(e)),Ze.registerQueryBuilderClass("RelationQueryBuilder",e=>new Tz(e)),Ze.registerQueryBuilderClass("SelectQueryBuilder",e=>new Uf(e)),Ze.registerQueryBuilderClass("SoftDeleteQueryBuilder",e=>new Fz(e)),Ze.registerQueryBuilderClass("UpdateQueryBuilder",e=>new zz(e))}var Q_;(function(e){e.VIEW="VIEW",e.MATERIALIZED_VIEW="MATERIALIZED_VIEW",e.GENERATED_COLUMN="GENERATED_COLUMN"})(Q_||(Q_={}));var Y_={exports:{}},qf,G_;function Uz(){if(G_)return qf;G_=1;var e=1e3,t=e*60,n=t*60,r=n*24,o=r*7,i=r*365.25;qf=function(u,d){d=d||{};var p=typeof u;if(p==="string"&&u.length>0)return a(u);if(p==="number"&&isFinite(u))return d.long?c(u):s(u);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(u))};function a(u){if(u=String(u),!(u.length>100)){var d=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(u);if(d){var p=parseFloat(d[1]),f=(d[2]||"ms").toLowerCase();switch(f){case"years":case"year":case"yrs":case"yr":case"y":return p*i;case"weeks":case"week":case"w":return p*o;case"days":case"day":case"d":return p*r;case"hours":case"hour":case"hrs":case"hr":case"h":return p*n;case"minutes":case"minute":case"mins":case"min":case"m":return p*t;case"seconds":case"second":case"secs":case"sec":case"s":return p*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return p;default:return}}}}function s(u){var d=Math.abs(u);return d>=r?Math.round(u/r)+"d":d>=n?Math.round(u/n)+"h":d>=t?Math.round(u/t)+"m":d>=e?Math.round(u/e)+"s":u+"ms"}function c(u){var d=Math.abs(u);return d>=r?l(u,d,r,"day"):d>=n?l(u,d,n,"hour"):d>=t?l(u,d,t,"minute"):d>=e?l(u,d,e,"second"):u+" ms"}function l(u,d,p,f){var y=d>=p*1.5;return Math.round(u/p)+" "+f+(y?"s":"")}return qf}function qz(e){n.debug=n,n.default=n,n.coerce=c,n.disable=i,n.enable=o,n.enabled=a,n.humanize=Uz(),n.destroy=l,Object.keys(e).forEach(u=>{n[u]=e[u]}),n.names=[],n.skips=[],n.formatters={};function t(u){let d=0;for(let p=0;p<u.length;p++)d=(d<<5)-d+u.charCodeAt(p),d|=0;return n.colors[Math.abs(d)%n.colors.length]}n.selectColor=t;function n(u){let d,p=null,f,y;function m(...g){if(!m.enabled)return;const b=m,w=Number(new Date),_=w-(d||w);b.diff=_,b.prev=d,b.curr=w,d=w,g[0]=n.coerce(g[0]),typeof g[0]!="string"&&g.unshift("%O");let x=0;g[0]=g[0].replace(/%([a-zA-Z%])/g,(j,O)=>{if(j==="%%")return"%";x++;const E=n.formatters[O];if(typeof E=="function"){const M=g[x];j=E.call(b,M),g.splice(x,1),x--}return j}),n.formatArgs.call(b,g),(b.log||n.log).apply(b,g)}return m.namespace=u,m.useColors=n.useColors(),m.color=n.selectColor(u),m.extend=r,m.destroy=n.destroy,Object.defineProperty(m,"enabled",{enumerable:!0,configurable:!1,get:()=>p!==null?p:(f!==n.namespaces&&(f=n.namespaces,y=n.enabled(u)),y),set:g=>{p=g}}),typeof n.init=="function"&&n.init(m),m}function r(u,d){const p=n(this.namespace+(typeof d>"u"?":":d)+u);return p.log=this.log,p}function o(u){n.save(u),n.namespaces=u,n.names=[],n.skips=[];let d;const p=(typeof u=="string"?u:"").split(/[\s,]+/),f=p.length;for(d=0;d<f;d++)p[d]&&(u=p[d].replace(/\*/g,".*?"),u[0]==="-"?n.skips.push(new RegExp("^"+u.slice(1)+"$")):n.names.push(new RegExp("^"+u+"$")))}function i(){const u=[...n.names.map(s),...n.skips.map(s).map(d=>"-"+d)].join(",");return n.enable(""),u}function a(u){if(u[u.length-1]==="*")return!0;let d,p;for(d=0,p=n.skips.length;d<p;d++)if(n.skips[d].test(u))return!1;for(d=0,p=n.names.length;d<p;d++)if(n.names[d].test(u))return!0;return!1}function s(u){return u.toString().substring(2,u.toString().length-2).replace(/\.\*\?$/,"*")}function c(u){return u instanceof Error?u.stack||u.message:u}function l(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return n.enable(n.load()),n}var Hz=qz;(function(e,t){var n={};t.formatArgs=o,t.save=i,t.load=a,t.useColors=r,t.storage=s(),t.destroy=(()=>{let l=!1;return()=>{l||(l=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function r(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let l;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(l=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(l[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function o(l){if(l[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+l[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const u="color: "+this.color;l.splice(1,0,u,"color: inherit");let d=0,p=0;l[0].replace(/%[a-zA-Z%]/g,f=>{f!=="%%"&&(d++,f==="%c"&&(p=d))}),l.splice(p,0,u)}t.log=console.debug||console.log||(()=>{});function i(l){try{l?t.storage.setItem("debug",l):t.storage.removeItem("debug")}catch{}}function a(){let l;try{l=t.storage.getItem("debug")}catch{}return!l&&typeof Ck<"u"&&"env"in Ck&&(l=n.DEBUG),l}function s(){try{return localStorage}catch{}}e.exports=Hz(t);const{formatters:c}=e.exports;c.j=function(l){try{return JSON.stringify(l)}catch(u){return"[UnexpectedJSONParseError]: "+u.message}}})(Y_,Y_.exports),Vz();const K_=(e,t)=>({id:e.id,type:e.node_type,position:{x:e.x||0,y:e.y||0},width:e.width||void 0,height:e.height||void 0,data:{loading:!1,flowNode:e,...t}}),Wz=e=>({id:e.id,target:e.target,source:e.target,targetHandle:e.targetHandle,sourceHandle:e.sourceHandle}),Z_=e=>({id:e.id,source:e.source,target:e.target,targetHandle:e.targetHandle,sourceHandle:e.sourceHandle}),Xz=e=>e.filter(t=>"edgeId"in t?`${t.edgeId}`.startsWith("xy-edge__"):!1),Hf=(e,t,n)=>{const r=[];return{changes:e.map(o=>{var c;const i=t.find(l=>o.id===l.id);i||r.push(o.id);const a=(c=n==null?void 0:n[o.source_type])==null?void 0:c.find(l=>(l==null?void 0:l.id)===o.source_id),s=K_(o,{...i==null?void 0:i.data,entity:a});return{type:i?"replace":"add",id:o.id,item:i?cl({...i||{},data:void 0},Fa(s,za)):s}}),newIds:[]}},Wf=(e,t)=>{const n=[],r=[],o=e.map(i=>{const a=t.find(s=>i.source===s.source&&i.target===s.target);return!a||a.id!==i.id?(a&&r.push(a.id),{type:"add",item:Z_(i)}):(n.push(i.id),{type:"replace",item:Z_(i)})});return t.forEach(i=>{n.includes(i.id)||r.push(i.id)}),{changes:o,updatedIds:n,deletedIds:r}},Xf={width:440,height:360},hl={width:380,height:650},Ya={[G.Toolbox]:"toolbox",[G.SessionInfo]:"session-info",[G.DefaultEmbeddingModel]:"default-embedding-model",[G.ApplicationBar]:"application-bar"},Qz={id:Ya[G.Toolbox],type:G.Toolbox,position:{x:10+hl.width+20,y:10},measured:Xf,data:{}},Yz={id:Ya[G.SessionInfo],type:G.SessionInfo,position:{x:10,y:10},measured:hl,data:{}},Gz={id:Ya[G.DefaultEmbeddingModel],type:G.DefaultEmbeddingModel,position:{x:10+hl.width+Xf.width+40,y:10},data:{model:zde}},Kz={id:Ya[G.ApplicationBar],type:G.ApplicationBar,position:{x:10+hl.width+Xf.width+40,y:80},data:{}},Zz=[Qz,Yz,Gz,Kz],Jz=[G.Toolbox,G.SessionInfo,G.ApplicationBar,G.EditorApp,G.CodeContainerApp],J_={flowNodes:[],flowEdges:[],ready:!0,flowEdgeLoading:!1,flowNodeLoading:!1,syncedNodes:[],syncedEdges:[],syncNodeQueue:[],syncEdgeQueue:[],edges:[],nodes:Zz},eV=(e,t)=>({reset:()=>{e(J_)},setNodes:n=>{if(typeof n=="function"){e({nodes:n(t().nodes)});return}e({nodes:n})},setEdges:n=>{if(typeof n=="function"){e({edges:n(t().edges)});return}e({edges:n})},updateNodes:n=>{const r=t().nodes;e({nodes:eo(n,r)})},updateEdges:n=>{const r=t().edges;e({edges:Da(n,r)})},addConnectionToEdges:n=>{const r=t().edges;e({edges:H0(n,r)})},flowNodesToNodes:(n,r={})=>{const o=t().nodes,{changes:i}=Hf(n,o,r);e({nodes:eo(i,o)})},flowEdgesToEdges:n=>{const r=t().edges,{changes:o,updatedIds:i,deletedIds:a}=Wf(n,r);r.forEach(s=>{i.includes(s.id)||a.push(s.id)}),a.forEach(s=>{o.push({type:"remove",id:s})}),e({edges:Da(o,r)})},getNodes:n=>t().nodes.filter(r=>n.includes(r.id)),removeSyncNodeQueue:n=>{const{syncNodeQueue:r}=t();for(const o of n){const i=r.findIndex(a=>a.timestamp===o);i>-1&&r.splice(i,1)}e({syncNodeQueue:r})},removeSyncEdgeQueue:n=>{const{syncEdgeQueue:r}=t();for(const o of n){const i=r.findIndex(a=>a.timestamp===o);i>-1&&r.splice(i,1)}e({syncEdgeQueue:r})},pushSyncNodeQueue:(n,r)=>{const{syncNodeQueue:o}=t();e({syncNodeQueue:[...o,{query:r,timestamp:Date.now(),syncType:n}]})},pushSyncEdgeQueue:()=>{const{syncEdgeQueue:n}=t();e({syncEdgeQueue:[...n,{timestamp:Date.now()}]})},findFlowNodesWithSource:async(n,r)=>{try{e({flowNodeLoading:!0});const o=await ue("FlowNode").find(n),i=o.reduce((s,c)=>{var l;return s[c.source_type]||(s[c.source_type]=[]),(l=s[c.source_type])==null||l.push(c),s},{}),a={};if(await Promise.all(Object.entries(i).map(async([s,c])=>{const l=s;a[l]=await ue(l).find({where:{id:ao(c.map(u=>u.source_id))}})})),r==null?void 0:r.clean)e({flowNodes:o,nodes:o.map(s=>{var l;const c=(l=a==null?void 0:a[s.source_type])==null?void 0:l.find(u=>u.id===s.source_id);return K_(s,{data:c})})});else{const s=t().flowNodes,c=o.map(d=>d.id),l=t().nodes,{changes:u}=Hf(o,l,a);e({flowNodes:[...s.filter(d=>!c.includes(d.id)),...o],nodes:eo(u,l)})}return o}finally{e({flowNodeLoading:!1})}},findFlowEdges:async(n,r)=>{try{e({flowEdgeLoading:!0});const o=await ue("FlowEdge").find(n),i=t().flowEdges,a=o.map(s=>s.id);if(r!=null&&r.clean)e({flowEdges:o,edges:o.map(s=>Wz(s))});else{const s=t().edges,{changes:c}=Wf(o,s);e({flowEdges:[...i.filter(l=>!a.includes(l.id)),...o],edges:Da(c,s)})}return o}finally{e({flowEdgeLoading:!1})}},deleteFlowNode:async n=>{try{if(!n.id&&!n.source_type&&!n.source_id)throw new Error("Missing flow node indentify");const r=await ue("FlowNode").findOne({where:n.id?{id:n.id}:{source_type:n.source_type,source_id:n.source_id}});if(r){await ue("FlowNode").delete(r.id);const o=t().flowNodes;r.source_type&&r.source_id&&await ue(r.source_type).delete(r.source_id).catch(a=>{console.warn("Failed to delete source entity",r.source_type,r.source_id,a)});const i=t().nodes;e({flowNodes:o.filter(a=>a.id!==r.id),nodes:eo([{type:"remove",id:r.id}],i)})}}catch(r){console.warn("Failed to delete flow node",r)}},deleteFlowEdge:async n=>{try{if(!n.id&&!n.source&&!n.target)throw new Error("Missing flow edge indentify");const r=await ue("FlowEdge").findOne({where:n.id?{id:n.id}:{source:n.source,target:n.target}});if(r){await ue("FlowEdge").delete(r.id);const o=t().flowEdges;e({flowEdges:o.filter(i=>i.id!==r.id)})}}catch(r){console.warn("Failed to delete flow edge",r)}},updateFlowNode:async(n,r)=>{var o;try{if(!((o=It.getState().currentSession)!=null&&o.id))throw new Error("Session not found");if(!n.id)throw new Error("Missing flow node indentify");await ue("FlowNode").update(n.id,n);const i=t().flowNodes.map(a=>a.id===n.id?{...a,...n}:a);e({flowNodes:r!=null&&r.silent?i:[...i]})}catch(i){console.warn("Failed to create or update flow node",i,n)}},createOrUpdateFlowNode:async(n,r)=>{var o;try{const i=It.getState().currentSession;if(!(i!=null&&i.id))throw new Error("Session not found");if(!n.id&&(!n.source_type||!n.source_id))throw new Error("Missing flow node indentify");let a,s=n!=null&&n.id?t().flowNodes.find(f=>f.id===n.id):void 0;if(!s&&(n.id||n.source_type&&n.source_id)&&(s=await ue("FlowNode").findOne({where:n.id?{id:n.id}:{source_type:n.source_type,source_id:n.source_id}})),s)a=cl(s,Fa(n,za)),r!=null&&r.lazy?ue("FlowNode").update(s.id,a):await ue("FlowNode").update(s.id,a);else if(n.source_id&&n.source_type)a={...n,source_id:`${n.source_id}`,source_type:`${n.source_type}`,node_type:n.node_type||"NEW_MESSAGE",session_id:n.session_id||(i==null?void 0:i.id)},r!=null&&r.lazy?(a.id=Tg(),ue("FlowNode").save(a)):a=await ue("FlowNode").save(a);else throw new Error("Missing source id and type");let c;const l=t().nodes.find(f=>f.id===a.id);a.source_type&&!l?c=await ue(a.source_type).findOne({where:{id:n.source_id}}):a.source_type&&l&&(c=(o=l==null?void 0:l.data)==null?void 0:o.entity);const u=t().flowNodes,d=t().nodes,{changes:p}=Hf([a],d,{[a.source_type]:[c]});return e({flowNodes:[...u.filter(f=>f.id!==a.id),a],nodes:eo(p,d)}),a}catch(i){console.warn("Failed to create or update flow node",i,n)}},createOrUpdateFlowEdge:async(n,r)=>{try{const o=It.getState().currentSession;if(!(o!=null&&o.id))throw new Error("Session not found");if(!n.id&&(!n.source||!n.target))throw new Error("Missing flow node indentify");let i,a=n!=null&&n.id?t().flowEdges.find(l=>l.id===n.id):void 0;if(a&&(n.id||n.source&&n.target)&&(a=await ue("FlowEdge").findOne({where:n.id?{id:n.id}:{source:n.source,target:n.target}})),a)i=cl(a,Fa(n,za)),r!=null&&r.lazy?ue("FlowEdge").update(a.id,i):await ue("FlowEdge").update(a.id,i);else if(n.source&&n.target)i={...n,source:`${n.source}`,target:`${n.target}`,session_id:n.session_id||(o==null?void 0:o.id)},r!=null&&r.lazy?(i.id=Tg(),ue("FlowEdge").save(i)):i=await ue("FlowEdge").save(i);else throw new Error("Missing source and target");const s=t().flowEdges,c=t().edges;return e({flowEdges:[...s.filter(l=>l.id!==i.id),i],edges:Da(Wf([i],c).changes,c)}),i}catch(o){console.warn("Failed to create or update flow node",o)}}}),ve=Pk()(Vde(Nk((e,t)=>({...J_,...eV(e,t)})))),tV=()=>{const e=It(a=>{var s;return(s=a.currentSession)==null?void 0:s.id}),[t,n]=v.useState(!1),r=ve(a=>a.pushSyncNodeQueue),o=ve(a=>a.createOrUpdateFlowNode),i=v.useCallback(async(a,s)=>{try{if(!e)throw new Error("Session not found");n(!0);const c=await ue("LLM").findOne({where:{name:s.name,session_id:e}});return c?(r("LLM",{where:{source_type:"LLM",source_id:c.id}}),c):ue("LLM").save({name:`${s.name}`,status:nt.Started,session_id:e,provider:dc.WebLLM,metadata:JSON.stringify({}),model_type:s.model_type||Ln.LLM,...s}).then(async l=>{var u,d,p;return await o({source_id:l.id,source_type:"LLM",node_type:G.LLM,x:(u=a.position)==null?void 0:u.x,y:((d=a.position)==null?void 0:d.y)+(((p=a.measured)==null?void 0:p.height)||0)+30}),l})}finally{n(!1)}},[o,r,e]);return{loading:t,createDatabaseLLM:i}};var Qf="Popover",[ej,Bpe]=aa(Qf,[Ad]),Ga=Ad(),[nV,kr]=ej(Qf),tj=e=>{const{__scopePopover:t,children:n,open:r,defaultOpen:o,onOpenChange:i,modal:a=!1}=e,s=Ga(t),c=v.useRef(null),[l,u]=v.useState(!1),[d=!1,p]=kn({prop:r,defaultProp:o,onChange:i});return h.jsx(Qk,{...s,children:h.jsx(nV,{scope:t,contentId:Dt(),triggerRef:c,open:d,onOpenChange:p,onOpenToggle:v.useCallback(()=>p(f=>!f),[p]),hasCustomAnchor:l,onCustomAnchorAdd:v.useCallback(()=>u(!0),[]),onCustomAnchorRemove:v.useCallback(()=>u(!1),[]),modal:a,children:n})})};tj.displayName=Qf;let Yf;Yf="PopoverAnchor",Vd=v.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,o=kr(Yf,n),i=Ga(n),{onCustomAnchorAdd:a,onCustomAnchorRemove:s}=o;return v.useEffect(()=>(a(),()=>s()),[a,s]),h.jsx(Ug,{...i,...r,ref:t})}),Vd.displayName=Yf;var nj="PopoverTrigger",Gf=v.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,o=kr(nj,n),i=Ga(n),a=Tt(t,o.triggerRef),s=h.jsx(ke.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":sj(o.open),...r,ref:a,onClick:Me(e.onClick,o.onOpenToggle)});return o.hasCustomAnchor?s:h.jsx(Ug,{asChild:!0,...i,children:s})});Gf.displayName=nj;var Kf="PopoverPortal",[rV,oV]=ej(Kf,{forceMount:void 0}),rj=e=>{const{__scopePopover:t,forceMount:n,children:r,container:o}=e,i=kr(Kf,t);return h.jsx(rV,{scope:t,forceMount:n,children:h.jsx(Sd,{present:n||i.open,children:h.jsx(Tk,{asChild:!0,container:o,children:r})})})};rj.displayName=Kf;var ui="PopoverContent",oj=v.forwardRef((e,t)=>{const n=oV(ui,e.__scopePopover),{forceMount:r=n.forceMount,...o}=e,i=kr(ui,e.__scopePopover);return h.jsx(Sd,{present:r||i.open,children:i.modal?h.jsx(iV,{...o,ref:t}):h.jsx(aV,{...o,ref:t})})});oj.displayName=ui;var iV=v.forwardRef((e,t)=>{const n=kr(ui,e.__scopePopover),r=v.useRef(null),o=Tt(t,r),i=v.useRef(!1);return v.useEffect(()=>{const a=r.current;if(a)return Vk(a)},[]),h.jsx(Uk,{as:kk,allowPinchZoom:!0,children:h.jsx(ij,{...e,ref:o,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Me(e.onCloseAutoFocus,a=>{var s;a.preventDefault(),i.current||((s=n.triggerRef.current)==null||s.focus())}),onPointerDownOutside:Me(e.onPointerDownOutside,a=>{const s=a.detail.originalEvent,c=s.button===0&&s.ctrlKey===!0,l=s.button===2||c;i.current=l},{checkForDefaultPrevented:!1}),onFocusOutside:Me(e.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1})})})}),aV=v.forwardRef((e,t)=>{const n=kr(ui,e.__scopePopover),r=v.useRef(!1),o=v.useRef(!1);return h.jsx(ij,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var a,s;(a=e.onCloseAutoFocus)==null||a.call(e,i),i.defaultPrevented||(r.current||((s=n.triggerRef.current)==null||s.focus()),i.preventDefault()),r.current=!1,o.current=!1},onInteractOutside:i=>{var s,c;(s=e.onInteractOutside)==null||s.call(e,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const a=i.target;(c=n.triggerRef.current)!=null&&c.contains(a)&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&o.current&&i.preventDefault()}})}),ij=v.forwardRef((e,t)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:o,onCloseAutoFocus:i,disableOutsidePointerEvents:a,onEscapeKeyDown:s,onPointerDownOutside:c,onFocusOutside:l,onInteractOutside:u,...d}=e,p=kr(ui,n),f=Ga(n);return qk(),h.jsx(Hk,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:o,onUnmountAutoFocus:i,children:h.jsx(Ak,{asChild:!0,disableOutsidePointerEvents:a,onInteractOutside:u,onEscapeKeyDown:s,onPointerDownOutside:c,onFocusOutside:l,onDismiss:()=>p.onOpenChange(!1),children:h.jsx(Wk,{"data-state":sj(p.open),role:"dialog",id:p.contentId,...f,...d,ref:t,style:{...d.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),aj="PopoverClose",sV=v.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,o=kr(aj,n);return h.jsx(ke.button,{type:"button",...r,ref:t,onClick:Me(e.onClick,()=>o.onOpenChange(!1))})});sV.displayName=aj;var cV="PopoverArrow",lV=v.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,o=Ga(n);return h.jsx(Xk,{...o,...r,ref:t})});lV.displayName=cV;function sj(e){return e?"open":"closed"}iv=tj,rA=Vd,nA=Gf,Qg=rj,Fd=oj;const uV=iv,cj=v.forwardRef(({className:e,align:t="center",sideOffset:n=4,...r},o)=>h.jsx(Qg,{children:h.jsx(Fd,{ref:o,align:t,sideOffset:n,className:re("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));cj.displayName=Fd.displayName;const dV=e=>v.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",fill:"none",height:192,viewBox:"0 0 150 150",width:192,...e},v.createElement("clipPath",{id:"a"},v.createElement("path",{d:"m0 0h150v150h-150z"})),v.createElement("g",{clipPath:"url(#a)"},v.createElement("path",{d:"m150 0h-150v150h150z",fill:"#29b5e8"}),v.createElement("path",{clipRule:"evenodd",d:"m130.375 67.2532-14.096 8.1221 14.096 8.0536c.843.4872 1.581 1.1357 2.174 1.9084.592.7727 1.026 1.6545 1.278 2.5951.251.9406.315 1.9215.188 2.8867-.128.9652-.444 1.8959-.931 2.7388-.488.843-1.136 1.5817-1.909 2.174s-1.654 1.0267-2.595 1.2782-1.921.3154-2.887.1878c-.965-.1275-1.896-.444-2.739-.9312l-25.2559-14.5496c-1.1575-.6696-2.1128-1.6394-2.765-2.8068-.6523-1.1674-.9773-2.4893-.9408-3.826.0198-.5792.1089-1.1538.2653-1.7117.517-1.8711 1.7458-3.4654 3.4234-4.4419l25.256-14.4983c.847-.4892 1.782-.8067 2.751-.9343.97-.1275 1.955-.0627 2.899.1909.945.2536 1.83.6909 2.605 1.287.775.596 1.425 1.3391 1.913 2.1866.49.8402.808 1.7693.935 2.7334.128.964.063 1.9439-.191 2.8826-.254.9388-.692 1.8177-1.288 2.5859-.597.7681-1.34 1.4101-2.186 1.8887zm-13.343 39.3698-25.2478-14.5243c-1.1296-.6483-2.4091-.9896-3.7115-.9902s-2.5823.3397-3.7124.987c-1.1301.6472-2.0712 1.579-2.7297 2.7026-.6585 1.1237-1.0115 2.4001-1.0239 3.7024v29.0135c.0654 1.928.8772 3.755 2.264 5.095 1.3869 1.341 3.2403 2.09 5.1691 2.09 1.9289 0 3.7823-.749 5.1691-2.09 1.3868-1.34 2.1986-3.167 2.264-5.095v-16.261l14.1301 8.122c.843.488 1.774.805 2.739.933.966.128 1.947.064 2.888-.187s1.823-.685 2.596-1.277c.774-.592 1.423-1.331 1.91-2.174.488-.843.805-1.773.933-2.739.128-.965.065-1.946-.186-2.887s-.685-1.824-1.277-2.597-1.331-1.422-2.174-1.91zm-29.0992-28.3806-10.527 10.3986c-.3601.3349-.8269.5319-1.318.5563h-3.0897c-.49-.0294-.9551-.2257-1.318-.5563l-10.4671-10.4329c-.3274-.3573-.521-.817-.5478-1.3009v-3.081c.0283-.4861.2215-.9481.5478-1.3095l10.4671-10.4329c.3637-.3281.829-.5214 1.318-.5477h3.0897c.4899.0228.9562.2166 1.318.5477l10.4928 10.4329c.3237.3623.514.8243.5392 1.3095v3.081c-.0237.483-.2143.9428-.5392 1.3009zm-8.3874-2.8928c-.0404-.499-.2485-.9696-.5905-1.3352l-3.0383-3.004c-.3641-.3275-.8291-.5207-1.318-.5478h-.1113c-.4867.0255-.9495.2191-1.3094.5478l-3.0383 3.004c-.3262.3676-.5165.8358-.5392 1.3266v.1113c.0215.4834.2124.9439.5392 1.3009l3.0554 2.9955c.3607.3274.823.5208 1.3094.5477h.1113c.4889-.027.9539-.2203 1.318-.5477l3.0383-3.0212c.3282-.3576.5244-.8166.5563-1.3009zm-47.4914-31.2217 25.2563 14.4811c1.1308.648 2.4115.989 3.7149.9889 1.3033 0 2.584-.3409 3.7148-.989 1.1309-.648 2.0725-1.5806 2.7314-2.7051.659-1.1245 1.0123-2.4018 1.0249-3.7051v-28.9879c-.0654-1.9277-.8772-3.7546-2.264-5.0952s-3.2402-2.0899-5.1691-2.0899c-1.9288 0-3.7822.7493-5.169 2.0899-1.3869 1.3406-2.1987 3.1675-2.2641 5.0952v16.2613l-14.1473-8.1307c-.8429-.4877-1.7737-.8047-2.7392-.9328-.9654-.1281-1.9466-.0647-2.8876.1864s-1.8232.6852-2.5965 1.2773c-.7732.5921-1.4222 1.3307-1.91 2.1736-.4878.843-.8048 1.7738-.9329 2.7392-.128.9655-.0647 1.9467.1864 2.8876.2512.941.6852 1.8233 1.2773 2.5965.5921.7733 1.3307 1.4223 2.1737 1.9101zm55.4252 15.4739c1.4914.118 2.9836-.2193 4.2793-.9671l25.2475-14.5496c.843-.4877 1.582-1.1368 2.174-1.91s1.026-1.6555 1.277-2.5965.315-1.9222.187-2.8876c-.128-.9655-.445-1.8962-.933-2.7392-.488-.8429-1.137-1.5816-1.91-2.1737-.774-.5921-1.656-1.0261-2.597-1.2772-1.9-.5072-3.924-.2387-5.627.7464l-14.1298 8.1991v-16.2613c-.0654-1.9277-.8772-3.7546-2.264-5.0952-1.3868-1.3405-3.2402-2.0899-5.1691-2.0899-1.9288 0-3.7822.7494-5.169 2.0899-1.3869 1.3406-2.1987 3.1675-2.2641 5.0952v29.0136c-.0023 1.8784.7086 3.6876 1.9892 5.0619 1.2805 1.3743 3.0351 2.2111 4.909 2.3412zm-25.8554 31.5298c-1.4916-.1213-2.9847.2162-4.2793.9671l-25.2905 14.4893c-1.7024.985-2.9438 2.607-3.451 4.507s-.2387 3.924.7465 5.627c.9851 1.702 2.6061 2.943 4.5065 3.451 1.9004.507 3.9244.238 5.6268-.747l14.1473-8.122v16.261c.0654 1.928.8772 3.755 2.2641 5.096 1.3868 1.34 3.2402 2.09 5.169 2.09 1.9289 0 3.7823-.75 5.1691-2.09 1.3868-1.341 2.1986-3.168 2.264-5.096v-29.0645c-.0038-1.869-.7144-3.6673-1.9891-5.0341s-3.0192-2.2009-4.8834-2.3348zm-6.8468-13.5825c.4875-1.6032.414-3.3247-.2083-4.8806-.6224-1.5559-1.7564-2.8532-3.2152-3.6779l-25.2306-14.541c-1.704-.976-3.7248-1.2385-5.6216-.7303-1.8968.5083-3.5155 1.7461-4.5032 3.4433-.4889.84-.8065 1.7686-.9343 2.732-.1278.9635-.0632 1.9428.1899 2.8811.2531.9384.6897 1.8173 1.2846 2.5858.595.7686 1.3364 1.4115 2.1814 1.8917l14.096 8.1221-14.096 8.0536c-.8429.4861-1.5819 1.1334-2.1746 1.9051-.5928.7717-1.0277 1.6526-1.2801 2.5923-.2523.9398-.317 1.9201-.1905 2.8849s.4418 1.8952.9279 2.7382c.4861.8429 1.1335 1.5819 1.9051 2.1746.7717.5928 1.6526 1.0277 2.5924 1.2801.9397.2523 1.92.317 2.8848.1905s1.8952-.4418 2.7382-.9279l25.2306-14.5496c1.6248-.9071 2.8451-2.3965 3.4149-4.168z",fill:"#fff",fillRule:"evenodd"}))),pV=e=>v.createElement("svg",{className:"mr-2 w-5 h-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",width:48,height:48,...e},v.createElement("path",{fill:"#fbc02d",d:"M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12 s5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24s8.955,20,20,20 s20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"}),v.createElement("path",{fill:"#e53935",d:"M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039 l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"}),v.createElement("path",{fill:"#4caf50",d:"M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36 c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"}),v.createElement("path",{fill:"#1565c0",d:"M43.611,20.083L43.595,20L42,20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571 c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z"})),fV=e=>v.createElement("svg",{className:"mr-2 w-5 h-5",width:1024,height:1024,viewBox:"0 0 1024 1024",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},v.createElement("path",{d:"M44.522 44.5217H489.739V489.739H44.522V44.5217Z",fill:"#F35325"}),v.createElement("path",{d:"M534.261 44.5217H979.478V489.739H534.261V44.5217Z",fill:"#81BC06"}),v.createElement("path",{d:"M44.522 534.261H489.739V979.478H44.522V534.261Z",fill:"#05A6F0"}),v.createElement("path",{d:"M534.261 534.261H979.478V979.478H534.261V534.261Z",fill:"#FFBA08"})),hV=e=>v.createElement("svg",{id:"Layer_1","data-name":"Layer 1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 287.56 191",...e},v.createElement("defs",null,v.createElement("style",null,".cls-1{fill:#0081fb;}.cls-2{fill:url(#linear-gradient);}.cls-3{fill:url(#linear-gradient-2);}"),v.createElement("linearGradient",{id:"linear-gradient",x1:62.34,y1:101.45,x2:260.34,y2:91.45,gradientTransform:"matrix(1, 0, 0, -1, 0, 192)",gradientUnits:"userSpaceOnUse"},v.createElement("stop",{offset:0,stopColor:"#0064e1"}),v.createElement("stop",{offset:.4,stopColor:"#0064e1"}),v.createElement("stop",{offset:.83,stopColor:"#0073ee"}),v.createElement("stop",{offset:1,stopColor:"#0082fb"})),v.createElement("linearGradient",{id:"linear-gradient-2",x1:41.42,y1:53,x2:41.42,y2:126,gradientTransform:"matrix(1, 0, 0, -1, 0, 192)",gradientUnits:"userSpaceOnUse"},v.createElement("stop",{offset:0,stopColor:"#0082fb"}),v.createElement("stop",{offset:1,stopColor:"#0064e0"}))),v.createElement("title",null,"facebook-meta"),v.createElement("path",{className:"cls-1",d:"M31.06,126c0,11,2.41,19.41,5.56,24.51A19,19,0,0,0,53.19,160c8.1,0,15.51-2,29.79-21.76,11.44-15.83,24.92-38,34-52l15.36-23.6c10.67-16.39,23-34.61,37.18-47C181.07,5.6,193.54,0,206.09,0c21.07,0,41.14,12.21,56.5,35.11,16.81,25.08,25,56.67,25,89.27,0,19.38-3.82,33.62-10.32,44.87C271,180.13,258.72,191,238.13,191V160c17.63,0,22-16.2,22-34.74,0-26.42-6.16-55.74-19.73-76.69-9.63-14.86-22.11-23.94-35.84-23.94-14.85,0-26.8,11.2-40.23,31.17-7.14,10.61-14.47,23.54-22.7,38.13l-9.06,16c-18.2,32.27-22.81,39.62-31.91,51.75C84.74,183,71.12,191,53.19,191c-21.27,0-34.72-9.21-43-23.09C3.34,156.6,0,141.76,0,124.85Z"}),v.createElement("path",{className:"cls-2",d:"M24.49,37.3C38.73,15.35,59.28,0,82.85,0c13.65,0,27.22,4,41.39,15.61,15.5,12.65,32,33.48,52.63,67.81l7.39,12.32c17.84,29.72,28,45,33.93,52.22,7.64,9.26,13,12,19.94,12,17.63,0,22-16.2,22-34.74l27.4-.86c0,19.38-3.82,33.62-10.32,44.87C271,180.13,258.72,191,238.13,191c-12.8,0-24.14-2.78-36.68-14.61-9.64-9.08-20.91-25.21-29.58-39.71L146.08,93.6c-12.94-21.62-24.81-37.74-31.68-45C107,40.71,97.51,31.23,82.35,31.23c-12.27,0-22.69,8.61-31.41,21.78Z"}),v.createElement("path",{className:"cls-3",d:"M82.35,31.23c-12.27,0-22.69,8.61-31.41,21.78C38.61,71.62,31.06,99.34,31.06,126c0,11,2.41,19.41,5.56,24.51L10.14,167.91C3.34,156.6,0,141.76,0,124.85,0,94.1,8.44,62.05,24.49,37.3,38.73,15.35,59.28,0,82.85,0Z"})),mV=e=>v.createElement("svg",{className:"mr-2 w-5 h-5",width:256,height:233,viewBox:"0 0 256 233",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},v.createElement("path",{d:"M186.182 0h46.545v46.545h-46.545z"}),v.createElement("path",{fill:"#f7d046",d:"M209.455 0H256v46.545h-46.545z"}),v.createElement("path",{d:"M0 0h46.545v46.545H0zm0 46.545h46.545V93.09H0zm0 46.546h46.545v46.545H0zm0 46.545h46.545v46.545H0zm0 46.546h46.545v46.545H0z"}),v.createElement("path",{fill:"#f7d046",d:"M23.273 0h46.545v46.545H23.273z"}),v.createElement("path",{fill:"#f2a73b",d:"M209.455 46.545H256V93.09h-46.545zm-186.182 0h46.545V93.09H23.273z"}),v.createElement("path",{d:"M139.636 46.545h46.545V93.09h-46.545z"}),v.createElement("path",{fill:"#f2a73b",d:"M162.909 46.545h46.545V93.09h-46.545zm-93.091 0h46.545V93.09H69.818z"}),v.createElement("path",{fill:"#ee792f",d:"M116.364 93.091h46.545v46.545h-46.545zm46.545 0h46.545v46.545h-46.545zm-93.091 0h46.545v46.545H69.818z"}),v.createElement("path",{d:"M93.091 139.636h46.545v46.545H93.091z"}),v.createElement("path",{fill:"#eb5829",d:"M116.364 139.636h46.545v46.545h-46.545z"}),v.createElement("path",{fill:"#ee792f",d:"M209.455 93.091H256v46.545h-46.545zm-186.182 0h46.545v46.545H23.273z"}),v.createElement("path",{d:"M186.182 139.636h46.545v46.545h-46.545z"}),v.createElement("path",{fill:"#eb5829",d:"M209.455 139.636H256v46.545h-46.545z"}),v.createElement("path",{d:"M186.182 186.182h46.545v46.545h-46.545z"}),v.createElement("path",{fill:"#eb5829",d:"M23.273 139.636h46.545v46.545H23.273z"}),v.createElement("path",{fill:"#ea3326",d:"M209.455 186.182H256v46.545h-46.545zm-186.182 0h46.545v46.545H23.273z"})),yV="/NoLLMChat/assets/qwen-B-gSh3_v.webp",gV="/NoLLMChat/assets/smollm-CikBjd4F.png",vV="/NoLLMChat/assets/stablelm-BquePdQ7.png",bV="/NoLLMChat/assets/nomic-BjJqoFji.webp",xV="/NoLLMChat/assets/joshua-ByaReJuI.webp",Ka=v.memo(({name:e,className:t,...n})=>(e=e.toLowerCase(),e.includes("gemma")?h.jsx(pV,{className:re("w-5 h-5",t),...n}):e!=null&&e.includes("qwen")?h.jsx("img",{className:re("w-5 h-5",t),src:yV,alt:"qwen",...n}):e!=null&&e.includes("phi")?h.jsx(fV,{className:re("w-5 h-5",t),...n}):e!=null&&e.includes("llama")?h.jsx(hV,{className:re("w-5 h-5",t),...n}):e!=null&&e.includes("smollm")?h.jsx("img",{className:re("w-5 h-5",t),src:gV,alt:"smollm",...n}):e!=null&&e.includes("mistral")?h.jsx(mV,{className:re("w-5 h-5",t),...n}):e!=null&&e.includes("snowflake")?h.jsx(dV,{className:re("w-5 h-5 rounded-full",t),...n}):e!=null&&e.includes("stablelm")?h.jsx("img",{className:re("w-5 h-5 rounded-full",t),src:vV,alt:"stablelm",...n}):e!=null&&e.includes("nomic")?h.jsx("img",{className:re("w-5 h-5 rounded-full",t),src:bV,alt:"nomic",...n}):e!=null&&e.includes("Xenova")||e!=null&&e.includes("janus")?h.jsx("img",{className:re("w-5 h-5 rounded-full",t),src:xV,alt:"Xenova",...n}):h.jsx(ge,{className:re("w-5 h-5",t),name:"brain"})));var lj=1,wV=.9,_V=.8,jV=.17,Zf=.1,Jf=.999,OV=.9999,EV=.99,SV=/[\\\/_+.#"@\[\(\{&]/,MV=/[\\\/_+.#"@\[\(\{&]/g,CV=/[\s-]/,uj=/[\s-]/g;function eh(e,t,n,r,o,i,a){if(i===t.length)return o===e.length?lj:EV;var s=`${o},${i}`;if(a[s]!==void 0)return a[s];for(var c=r.charAt(i),l=n.indexOf(c,o),u=0,d,p,f,y;l>=0;)d=eh(e,t,n,r,l+1,i+1,a),d>u&&(l===o?d*=lj:SV.test(e.charAt(l-1))?(d*=_V,f=e.slice(o,l-1).match(MV),f&&o>0&&(d*=Math.pow(Jf,f.length))):CV.test(e.charAt(l-1))?(d*=wV,y=e.slice(o,l-1).match(uj),y&&o>0&&(d*=Math.pow(Jf,y.length))):(d*=jV,o>0&&(d*=Math.pow(Jf,l-o))),e.charAt(l)!==t.charAt(i)&&(d*=OV)),(d<Zf&&n.charAt(l-1)===r.charAt(i+1)||r.charAt(i+1)===r.charAt(i)&&n.charAt(l-1)!==r.charAt(i))&&(p=eh(e,t,n,r,l+1,i+2,a),p*Zf>d&&(d=p*Zf)),d>u&&(u=d),l=n.indexOf(c,l+1);return a[s]=u,u}function dj(e){return e.toLowerCase().replace(uj," ")}function PV(e,t,n){return e=n&&n.length>0?`${e+" "+n.join(" ")}`:e,eh(e,t,dj(e),dj(t),0,0,{})}var Za='[cmdk-group=""]',th='[cmdk-group-items=""]',NV='[cmdk-group-heading=""]',nh='[cmdk-item=""]',pj=`${nh}:not([aria-disabled="true"])`,rh="cmdk-item-select",so="data-value",kV=(e,t,n)=>PV(e,t,n),fj=v.createContext(void 0),Ja=()=>v.useContext(fj),hj=v.createContext(void 0),oh=()=>v.useContext(hj),mj=v.createContext(void 0),yj=v.forwardRef((e,t)=>{let n=di(()=>{var I,X;return{search:"",value:(X=(I=e.value)!=null?I:e.defaultValue)!=null?X:"",filtered:{count:0,items:new Map,groups:new Set}}}),r=di(()=>new Set),o=di(()=>new Map),i=di(()=>new Map),a=di(()=>new Set),s=gj(e),{label:c,children:l,value:u,onValueChange:d,filter:p,shouldFilter:f,loop:y,disablePointerSelection:m=!1,vimBindings:g=!0,...b}=e,w=Dt(),_=Dt(),x=Dt(),j=v.useRef(null),O=VV();co(()=>{if(u!==void 0){let I=u.trim();n.current.value=I,E.emit()}},[u]),co(()=>{O(6,L)},[]);let E=v.useMemo(()=>({subscribe:I=>(a.current.add(I),()=>a.current.delete(I)),snapshot:()=>n.current,setState:(I,X,H)=>{var q,te,Q;if(!Object.is(n.current[I],X)){if(n.current[I]=X,I==="search")T(),A(),O(1,P);else if(I==="value"&&(H||O(5,L),((q=s.current)==null?void 0:q.value)!==void 0)){let Z=X??"";(Q=(te=s.current).onValueChange)==null||Q.call(te,Z);return}E.emit()}},emit:()=>{a.current.forEach(I=>I())}}),[]),M=v.useMemo(()=>({value:(I,X,H)=>{var q;X!==((q=i.current.get(I))==null?void 0:q.value)&&(i.current.set(I,{value:X,keywords:H}),n.current.filtered.items.set(I,N(X,H)),O(2,()=>{A(),E.emit()}))},item:(I,X)=>(r.current.add(I),X&&(o.current.has(X)?o.current.get(X).add(I):o.current.set(X,new Set([I]))),O(3,()=>{T(),A(),n.current.value||P(),E.emit()}),()=>{i.current.delete(I),r.current.delete(I),n.current.filtered.items.delete(I);let H=S();O(4,()=>{T(),(H==null?void 0:H.getAttribute("id"))===I&&P(),E.emit()})}),group:I=>(o.current.has(I)||o.current.set(I,new Set),()=>{i.current.delete(I),o.current.delete(I)}),filter:()=>s.current.shouldFilter,label:c||e["aria-label"],getDisablePointerSelection:()=>s.current.disablePointerSelection,listId:w,inputId:x,labelId:_,listInnerRef:j}),[]);function N(I,X){var H,q;let te=(q=(H=s.current)==null?void 0:H.filter)!=null?q:kV;return I?te(I,n.current.search,X):0}function A(){if(!n.current.search||s.current.shouldFilter===!1)return;let I=n.current.filtered.items,X=[];n.current.filtered.groups.forEach(q=>{let te=o.current.get(q),Q=0;te.forEach(Z=>{let Y=I.get(Z);Q=Math.max(Y,Q)}),X.push([q,Q])});let H=j.current;C().sort((q,te)=>{var Q,Z;let Y=q.getAttribute("id"),K=te.getAttribute("id");return((Q=I.get(K))!=null?Q:0)-((Z=I.get(Y))!=null?Z:0)}).forEach(q=>{let te=q.closest(th);te?te.appendChild(q.parentElement===te?q:q.closest(`${th} > *`)):H.appendChild(q.parentElement===H?q:q.closest(`${th} > *`))}),X.sort((q,te)=>te[1]-q[1]).forEach(q=>{var te;let Q=(te=j.current)==null?void 0:te.querySelector(`${Za}[${so}="${encodeURIComponent(q[0])}"]`);Q==null||Q.parentElement.appendChild(Q)})}function P(){let I=C().find(H=>H.getAttribute("aria-disabled")!=="true"),X=I==null?void 0:I.getAttribute(so);E.setState("value",X||void 0)}function T(){var I,X,H,q;if(!n.current.search||s.current.shouldFilter===!1){n.current.filtered.count=r.current.size;return}n.current.filtered.groups=new Set;let te=0;for(let Q of r.current){let Z=(X=(I=i.current.get(Q))==null?void 0:I.value)!=null?X:"",Y=(q=(H=i.current.get(Q))==null?void 0:H.keywords)!=null?q:[],K=N(Z,Y);n.current.filtered.items.set(Q,K),K>0&&te++}for(let[Q,Z]of o.current)for(let Y of Z)if(n.current.filtered.items.get(Y)>0){n.current.filtered.groups.add(Q);break}n.current.filtered.count=te}function L(){var I,X,H;let q=S();q&&(((I=q.parentElement)==null?void 0:I.firstChild)===q&&((H=(X=q.closest(Za))==null?void 0:X.querySelector(NV))==null||H.scrollIntoView({block:"nearest"})),q.scrollIntoView({block:"nearest"}))}function S(){var I;return(I=j.current)==null?void 0:I.querySelector(`${nh}[aria-selected="true"]`)}function C(){var I;return Array.from(((I=j.current)==null?void 0:I.querySelectorAll(pj))||[])}function k(I){let X=C()[I];X&&E.setState("value",X.getAttribute(so))}function D(I){var X;let H=S(),q=C(),te=q.findIndex(Z=>Z===H),Q=q[te+I];(X=s.current)!=null&&X.loop&&(Q=te+I<0?q[q.length-1]:te+I===q.length?q[0]:q[te+I]),Q&&E.setState("value",Q.getAttribute(so))}function R(I){let X=S(),H=X==null?void 0:X.closest(Za),q;for(;H&&!q;)H=I>0?FV(H,Za):zV(H,Za),q=H==null?void 0:H.querySelector(pj);q?E.setState("value",q.getAttribute(so)):D(I)}let B=()=>k(C().length-1),F=I=>{I.preventDefault(),I.metaKey?B():I.altKey?R(1):D(1)},V=I=>{I.preventDefault(),I.metaKey?k(0):I.altKey?R(-1):D(-1)};return v.createElement(ke.div,{ref:t,tabIndex:-1,...b,"cmdk-root":"",onKeyDown:I=>{var X;if((X=b.onKeyDown)==null||X.call(b,I),!I.defaultPrevented)switch(I.key){case"n":case"j":{g&&I.ctrlKey&&F(I);break}case"ArrowDown":{F(I);break}case"p":case"k":{g&&I.ctrlKey&&V(I);break}case"ArrowUp":{V(I);break}case"Home":{I.preventDefault(),k(0);break}case"End":{I.preventDefault(),B();break}case"Enter":if(!I.nativeEvent.isComposing&&I.keyCode!==229){I.preventDefault();let H=S();if(H){let q=new Event(rh);H.dispatchEvent(q)}}}}},v.createElement("label",{"cmdk-label":"",htmlFor:M.inputId,id:M.labelId,style:qV},c),ml(e,I=>v.createElement(hj.Provider,{value:E},v.createElement(fj.Provider,{value:M},I))))}),AV=v.forwardRef((e,t)=>{var n,r;let o=Dt(),i=v.useRef(null),a=v.useContext(mj),s=Ja(),c=gj(e),l=(r=(n=c.current)==null?void 0:n.forceMount)!=null?r:a==null?void 0:a.forceMount;co(()=>{if(!l)return s.item(o,a==null?void 0:a.id)},[l]);let u=vj(o,i,[e.value,e.children,i],e.keywords),d=oh(),p=lo(O=>O.value&&O.value===u.current),f=lo(O=>l||s.filter()===!1?!0:O.search?O.filtered.items.get(o)>0:!0);v.useEffect(()=>{let O=i.current;if(!(!O||e.disabled))return O.addEventListener(rh,y),()=>O.removeEventListener(rh,y)},[f,e.onSelect,e.disabled]);function y(){var O,E;m(),(E=(O=c.current).onSelect)==null||E.call(O,u.current)}function m(){d.setState("value",u.current,!0)}if(!f)return null;let{disabled:g,value:b,onSelect:w,forceMount:_,keywords:x,...j}=e;return v.createElement(ke.div,{ref:es([i,t]),...j,id:o,"cmdk-item":"",role:"option","aria-disabled":!!g,"aria-selected":!!p,"data-disabled":!!g,"data-selected":!!p,onPointerMove:g||s.getDisablePointerSelection()?void 0:m,onClick:g?void 0:y},e.children)}),TV=v.forwardRef((e,t)=>{let{heading:n,children:r,forceMount:o,...i}=e,a=Dt(),s=v.useRef(null),c=v.useRef(null),l=Dt(),u=Ja(),d=lo(f=>o||u.filter()===!1?!0:f.search?f.filtered.groups.has(a):!0);co(()=>u.group(a),[]),vj(a,s,[e.value,e.heading,c]);let p=v.useMemo(()=>({id:a,forceMount:o}),[o]);return v.createElement(ke.div,{ref:es([s,t]),...i,"cmdk-group":"",role:"presentation",hidden:d?void 0:!0},n&&v.createElement("div",{ref:c,"cmdk-group-heading":"","aria-hidden":!0,id:l},n),ml(e,f=>v.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":n?l:void 0},v.createElement(mj.Provider,{value:p},f))))}),IV=v.forwardRef((e,t)=>{let{alwaysRender:n,...r}=e,o=v.useRef(null),i=lo(a=>!a.search);return!n&&!i?null:v.createElement(ke.div,{ref:es([o,t]),...r,"cmdk-separator":"",role:"separator"})}),DV=v.forwardRef((e,t)=>{let{onValueChange:n,...r}=e,o=e.value!=null,i=oh(),a=lo(u=>u.search),s=lo(u=>u.value),c=Ja(),l=v.useMemo(()=>{var u;let d=(u=c.listInnerRef.current)==null?void 0:u.querySelector(`${nh}[${so}="${encodeURIComponent(s)}"]`);return d==null?void 0:d.getAttribute("id")},[]);return v.useEffect(()=>{e.value!=null&&i.setState("search",e.value)},[e.value]),v.createElement(ke.input,{ref:t,...r,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":c.listId,"aria-labelledby":c.labelId,"aria-activedescendant":l,id:c.inputId,type:"text",value:o?e.value:a,onChange:u=>{o||i.setState("search",u.target.value),n==null||n(u.target.value)}})}),RV=v.forwardRef((e,t)=>{let{children:n,label:r="Suggestions",...o}=e,i=v.useRef(null),a=v.useRef(null),s=Ja();return v.useEffect(()=>{if(a.current&&i.current){let c=a.current,l=i.current,u,d=new ResizeObserver(()=>{u=requestAnimationFrame(()=>{let p=c.offsetHeight;l.style.setProperty("--cmdk-list-height",p.toFixed(1)+"px")})});return d.observe(c),()=>{cancelAnimationFrame(u),d.unobserve(c)}}},[]),v.createElement(ke.div,{ref:es([i,t]),...o,"cmdk-list":"",role:"listbox","aria-label":r,id:s.listId},ml(e,c=>v.createElement("div",{ref:es([a,s.listInnerRef]),"cmdk-list-sizer":""},c)))}),LV=v.forwardRef((e,t)=>{let{open:n,onOpenChange:r,overlayClassName:o,contentClassName:i,container:a,...s}=e;return v.createElement(jpe,{open:n,onOpenChange:r},v.createElement(Ope,{container:a},v.createElement(Epe,{"cmdk-overlay":"",className:o}),v.createElement(Spe,{"aria-label":e.label,"cmdk-dialog":"",className:i},v.createElement(yj,{ref:t,...s}))))}),BV=v.forwardRef((e,t)=>lo(n=>n.filtered.count===0)?v.createElement(ke.div,{ref:t,...e,"cmdk-empty":"",role:"presentation"}):null),$V=v.forwardRef((e,t)=>{let{progress:n,children:r,label:o="Loading...",...i}=e;return v.createElement(ke.div,{ref:t,...i,"cmdk-loading":"",role:"progressbar","aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,"aria-label":o},ml(e,a=>v.createElement("div",{"aria-hidden":!0},a)))}),Ft=Object.assign(yj,{List:RV,Item:AV,Input:DV,Group:TV,Separator:IV,Dialog:LV,Empty:BV,Loading:$V});function FV(e,t){let n=e.nextElementSibling;for(;n;){if(n.matches(t))return n;n=n.nextElementSibling}}function zV(e,t){let n=e.previousElementSibling;for(;n;){if(n.matches(t))return n;n=n.previousElementSibling}}function gj(e){let t=v.useRef(e);return co(()=>{t.current=e}),t}var co=typeof window>"u"?v.useEffect:v.useLayoutEffect;function di(e){let t=v.useRef();return t.current===void 0&&(t.current=e()),t}function es(e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}function lo(e){let t=oh(),n=()=>e(t.snapshot());return uc.useSyncExternalStore(t.subscribe,n,n)}function vj(e,t,n,r=[]){let o=v.useRef(),i=Ja();return co(()=>{var a;let s=(()=>{var l;for(let u of n){if(typeof u=="string")return u.trim();if(typeof u=="object"&&"current"in u)return u.current?(l=u.current.textContent)==null?void 0:l.trim():o.current}})(),c=r.map(l=>l.trim());i.value(e,s,c),(a=t.current)==null||a.setAttribute(so,s),o.current=s}),o}var VV=()=>{let[e,t]=v.useState(),n=di(()=>new Map);return co(()=>{n.current.forEach(r=>r()),n.current=new Map},[e]),(r,o)=>{n.current.set(r,o),t({})}};function UV(e){let t=e.type;return typeof t=="function"?t(e.props):"render"in t?t.render(e.props):e}function ml({asChild:e,children:t},n){return e&&v.isValidElement(t)?v.cloneElement(UV(t),{ref:t.ref},n(t.props.children)):n(t)}var qV={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const bj=v.forwardRef(({className:e,...t},n)=>h.jsx(Ft,{ref:n,className:re("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",e),...t}));bj.displayName=Ft.displayName;const xj=v.forwardRef(({className:e,...t},n)=>h.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[h.jsx(ge,{name:"search",className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),h.jsx(Ft.Input,{ref:n,className:re("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",e),...t})]}));xj.displayName=Ft.Input.displayName;const wj=v.forwardRef(({className:e,...t},n)=>h.jsx(Ft.List,{ref:n,className:re("max-h-[300px] overflow-y-auto overflow-x-hidden",e),...t}));wj.displayName=Ft.List.displayName;const _j=v.forwardRef((e,t)=>h.jsx(Ft.Empty,{ref:t,className:"py-6 text-center text-sm",...e}));_j.displayName=Ft.Empty.displayName;const jj=v.forwardRef(({className:e,...t},n)=>h.jsx(Ft.Group,{ref:n,className:re("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",e),...t}));jj.displayName=Ft.Group.displayName;const HV=v.forwardRef(({className:e,...t},n)=>h.jsx(Ft.Separator,{ref:n,className:re("-mx-1 h-px bg-border",e),...t}));HV.displayName=Ft.Separator.displayName;const Oj=v.forwardRef(({className:e,...t},n)=>h.jsx(Ft.Item,{ref:n,className:re("relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",e),...t}));Oj.displayName=Ft.Item.displayName,Ud=function(e,[t,n]){return Math.min(n,Math.max(t,e))};function Ej(e){const t=v.useRef({value:e,previous:e});return v.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var WV=[" ","Enter","ArrowUp","ArrowDown"],XV=[" ","Enter"],ts="Select",[yl,gl,QV]=Ag(ts),[pi,$pe]=aa(ts,[QV,Ad]),vl=Ad(),[YV,Ar]=pi(ts),[GV,KV]=pi(ts),Sj=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:o,onOpenChange:i,value:a,defaultValue:s,onValueChange:c,dir:l,name:u,autoComplete:d,disabled:p,required:f,form:y}=e,m=vl(t),[g,b]=v.useState(null),[w,_]=v.useState(null),[x,j]=v.useState(!1),O=sc(l),[E=!1,M]=kn({prop:r,defaultProp:o,onChange:i}),[N,A]=kn({prop:a,defaultProp:s,onChange:c}),P=v.useRef(null),T=g?y||!!g.closest("form"):!0,[L,S]=v.useState(new Set),C=Array.from(L).map(k=>k.props.value).join(";");return h.jsx(Qk,{...m,children:h.jsxs(YV,{required:f,scope:t,trigger:g,onTriggerChange:b,valueNode:w,onValueNodeChange:_,valueNodeHasChildren:x,onValueNodeHasChildrenChange:j,contentId:Dt(),value:N,onValueChange:A,open:E,onOpenChange:M,dir:O,triggerPointerDownPosRef:P,disabled:p,children:[h.jsx(yl.Provider,{scope:t,children:h.jsx(GV,{scope:e.__scopeSelect,onNativeOptionAdd:v.useCallback(k=>{S(D=>new Set(D).add(k))},[]),onNativeOptionRemove:v.useCallback(k=>{S(D=>{const R=new Set(D);return R.delete(k),R})},[]),children:n})}),T?h.jsxs(Kj,{"aria-hidden":!0,required:f,tabIndex:-1,name:u,autoComplete:d,value:N,onChange:k=>A(k.target.value),disabled:p,form:y,children:[N===void 0?h.jsx("option",{value:""}):null,Array.from(L)]},C):null]})})};Sj.displayName=ts;var Mj="SelectTrigger",Cj=v.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...o}=e,i=vl(n),a=Ar(Mj,n),s=a.disabled||r,c=Tt(t,a.onTriggerChange),l=gl(n),u=v.useRef("touch"),[d,p,f]=Zj(m=>{const g=l().filter(_=>!_.disabled),b=g.find(_=>_.value===a.value),w=Jj(g,m,b);w!==void 0&&a.onValueChange(w.value)}),y=m=>{s||(a.onOpenChange(!0),f()),m&&(a.triggerPointerDownPosRef.current={x:Math.round(m.pageX),y:Math.round(m.pageY)})};return h.jsx(Ug,{asChild:!0,...i,children:h.jsx(ke.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:s,"data-disabled":s?"":void 0,"data-placeholder":Gj(a.value)?"":void 0,...o,ref:c,onClick:Me(o.onClick,m=>{m.currentTarget.focus(),u.current!=="mouse"&&y(m)}),onPointerDown:Me(o.onPointerDown,m=>{u.current=m.pointerType;const g=m.target;g.hasPointerCapture(m.pointerId)&&g.releasePointerCapture(m.pointerId),m.button===0&&m.ctrlKey===!1&&m.pointerType==="mouse"&&(y(m),m.preventDefault())}),onKeyDown:Me(o.onKeyDown,m=>{const g=d.current!=="";!(m.ctrlKey||m.altKey||m.metaKey)&&m.key.length===1&&p(m.key),!(g&&m.key===" ")&&WV.includes(m.key)&&(y(),m.preventDefault())})})})});Cj.displayName=Mj;var Pj="SelectValue",Nj=v.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:o,children:i,placeholder:a="",...s}=e,c=Ar(Pj,n),{onValueNodeHasChildrenChange:l}=c,u=i!==void 0,d=Tt(t,c.onValueNodeChange);return Wr(()=>{l(u)},[l,u]),h.jsx(ke.span,{...s,ref:d,style:{pointerEvents:"none"},children:Gj(c.value)?h.jsx(h.Fragment,{children:a}):i})});Nj.displayName=Pj;var ZV="SelectIcon",kj=v.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...o}=e;return h.jsx(ke.span,{"aria-hidden":!0,...o,ref:t,children:r||"\u25BC"})});kj.displayName=ZV;var JV="SelectPortal",Aj=e=>h.jsx(Tk,{asChild:!0,...e});Aj.displayName=JV;var uo="SelectContent",Tj=v.forwardRef((e,t)=>{const n=Ar(uo,e.__scopeSelect),[r,o]=v.useState();if(Wr(()=>{o(new DocumentFragment)},[]),!n.open){const i=r;return i?Ik.createPortal(h.jsx(Ij,{scope:e.__scopeSelect,children:h.jsx(yl.Slot,{scope:e.__scopeSelect,children:h.jsx("div",{children:e.children})})}),i):null}return h.jsx(Dj,{...e,ref:t})});Tj.displayName=uo;var On=10,[Ij,Tr]=pi(uo),eU="SelectContentImpl",Dj=v.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:o,onEscapeKeyDown:i,onPointerDownOutside:a,side:s,sideOffset:c,align:l,alignOffset:u,arrowPadding:d,collisionBoundary:p,collisionPadding:f,sticky:y,hideWhenDetached:m,avoidCollisions:g,...b}=e,w=Ar(uo,n),[_,x]=v.useState(null),[j,O]=v.useState(null),E=Tt(t,Q=>x(Q)),[M,N]=v.useState(null),[A,P]=v.useState(null),T=gl(n),[L,S]=v.useState(!1),C=v.useRef(!1);v.useEffect(()=>{if(_)return Vk(_)},[_]),qk();const k=v.useCallback(Q=>{const[Z,...Y]=T().map(z=>z.ref.current),[K]=Y.slice(-1),ne=document.activeElement;for(const z of Q)if(z===ne||(z==null||z.scrollIntoView({block:"nearest"}),z===Z&&j&&(j.scrollTop=0),z===K&&j&&(j.scrollTop=j.scrollHeight),z==null||z.focus(),document.activeElement!==ne))return},[T,j]),D=v.useCallback(()=>k([M,_]),[k,M,_]);v.useEffect(()=>{L&&D()},[L,D]);const{onOpenChange:R,triggerPointerDownPosRef:B}=w;v.useEffect(()=>{if(_){let Q={x:0,y:0};const Z=K=>{var ne,z;Q={x:Math.abs(Math.round(K.pageX)-(((ne=B.current)==null?void 0:ne.x)??0)),y:Math.abs(Math.round(K.pageY)-(((z=B.current)==null?void 0:z.y)??0))}},Y=K=>{Q.x<=10&&Q.y<=10?K.preventDefault():_.contains(K.target)||R(!1),document.removeEventListener("pointermove",Z),B.current=null};return B.current!==null&&(document.addEventListener("pointermove",Z),document.addEventListener("pointerup",Y,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Z),document.removeEventListener("pointerup",Y,{capture:!0})}}},[_,R,B]),v.useEffect(()=>{const Q=()=>R(!1);return window.addEventListener("blur",Q),window.addEventListener("resize",Q),()=>{window.removeEventListener("blur",Q),window.removeEventListener("resize",Q)}},[R]);const[F,V]=Zj(Q=>{const Z=T().filter(ne=>!ne.disabled),Y=Z.find(ne=>ne.ref.current===document.activeElement),K=Jj(Z,Q,Y);K&&setTimeout(()=>K.ref.current.focus())}),I=v.useCallback((Q,Z,Y)=>{const K=!C.current&&!Y;(w.value!==void 0&&w.value===Z||K)&&(N(Q),K&&(C.current=!0))},[w.value]),X=v.useCallback(()=>_==null?void 0:_.focus(),[_]),H=v.useCallback((Q,Z,Y)=>{const K=!C.current&&!Y;(w.value!==void 0&&w.value===Z||K)&&P(Q)},[w.value]),q=r==="popper"?ih:Rj,te=q===ih?{side:s,sideOffset:c,align:l,alignOffset:u,arrowPadding:d,collisionBoundary:p,collisionPadding:f,sticky:y,hideWhenDetached:m,avoidCollisions:g}:{};return h.jsx(Ij,{scope:n,content:_,viewport:j,onViewportChange:O,itemRefCallback:I,selectedItem:M,onItemLeave:X,itemTextRefCallback:H,focusSelectedItem:D,selectedItemText:A,position:r,isPositioned:L,searchRef:F,children:h.jsx(Uk,{as:kk,allowPinchZoom:!0,children:h.jsx(Hk,{asChild:!0,trapped:w.open,onMountAutoFocus:Q=>{Q.preventDefault()},onUnmountAutoFocus:Me(o,Q=>{var Z;(Z=w.trigger)==null||Z.focus({preventScroll:!0}),Q.preventDefault()}),children:h.jsx(Ak,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:a,onFocusOutside:Q=>Q.preventDefault(),onDismiss:()=>w.onOpenChange(!1),children:h.jsx(q,{role:"listbox",id:w.contentId,"data-state":w.open?"open":"closed",dir:w.dir,onContextMenu:Q=>Q.preventDefault(),...b,...te,onPlaced:()=>S(!0),ref:E,style:{display:"flex",flexDirection:"column",outline:"none",...b.style},onKeyDown:Me(b.onKeyDown,Q=>{const Z=Q.ctrlKey||Q.altKey||Q.metaKey;if(Q.key==="Tab"&&Q.preventDefault(),!Z&&Q.key.length===1&&V(Q.key),["ArrowUp","ArrowDown","Home","End"].includes(Q.key)){let Y=T().filter(K=>!K.disabled).map(K=>K.ref.current);if(["ArrowUp","End"].includes(Q.key)&&(Y=Y.slice().reverse()),["ArrowUp","ArrowDown"].includes(Q.key)){const K=Q.target,ne=Y.indexOf(K);Y=Y.slice(ne+1)}setTimeout(()=>k(Y)),Q.preventDefault()}})})})})})})});Dj.displayName=eU;var tU="SelectItemAlignedPosition",Rj=v.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...o}=e,i=Ar(uo,n),a=Tr(uo,n),[s,c]=v.useState(null),[l,u]=v.useState(null),d=Tt(t,E=>u(E)),p=gl(n),f=v.useRef(!1),y=v.useRef(!0),{viewport:m,selectedItem:g,selectedItemText:b,focusSelectedItem:w}=a,_=v.useCallback(()=>{if(i.trigger&&i.valueNode&&s&&l&&m&&g&&b){const E=i.trigger.getBoundingClientRect(),M=l.getBoundingClientRect(),N=i.valueNode.getBoundingClientRect(),A=b.getBoundingClientRect();if(i.dir!=="rtl"){const K=A.left-M.left,ne=N.left-K,z=E.left-ne,ye=E.width+z,fe=Math.max(ye,M.width),Oe=window.innerWidth-On,Ae=Ud(ne,[On,Math.max(On,Oe-fe)]);s.style.minWidth=ye+"px",s.style.left=Ae+"px"}else{const K=M.right-A.right,ne=window.innerWidth-N.right-K,z=window.innerWidth-E.right-ne,ye=E.width+z,fe=Math.max(ye,M.width),Oe=window.innerWidth-On,Ae=Ud(ne,[On,Math.max(On,Oe-fe)]);s.style.minWidth=ye+"px",s.style.right=Ae+"px"}const P=p(),T=window.innerHeight-On*2,L=m.scrollHeight,S=window.getComputedStyle(l),C=parseInt(S.borderTopWidth,10),k=parseInt(S.paddingTop,10),D=parseInt(S.borderBottomWidth,10),R=parseInt(S.paddingBottom,10),B=C+k+L+R+D,F=Math.min(g.offsetHeight*5,B),V=window.getComputedStyle(m),I=parseInt(V.paddingTop,10),X=parseInt(V.paddingBottom,10),H=E.top+E.height/2-On,q=T-H,te=g.offsetHeight/2,Q=g.offsetTop+te,Z=C+k+Q,Y=B-Z;if(Z<=H){const K=P.length>0&&g===P[P.length-1].ref.current;s.style.bottom="0px";const ne=l.clientHeight-m.offsetTop-m.offsetHeight,z=Math.max(q,te+(K?X:0)+ne+D),ye=Z+z;s.style.height=ye+"px"}else{const K=P.length>0&&g===P[0].ref.current;s.style.top="0px";const ne=Math.max(H,C+m.offsetTop+(K?I:0)+te)+Y;s.style.height=ne+"px",m.scrollTop=Z-H+m.offsetTop}s.style.margin=`${On}px 0`,s.style.minHeight=F+"px",s.style.maxHeight=T+"px",r==null||r(),requestAnimationFrame(()=>f.current=!0)}},[p,i.trigger,i.valueNode,s,l,m,g,b,i.dir,r]);Wr(()=>_(),[_]);const[x,j]=v.useState();Wr(()=>{l&&j(window.getComputedStyle(l).zIndex)},[l]);const O=v.useCallback(E=>{E&&y.current===!0&&(_(),w==null||w(),y.current=!1)},[_,w]);return h.jsx(rU,{scope:n,contentWrapper:s,shouldExpandOnScrollRef:f,onScrollButtonChange:O,children:h.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:x},children:h.jsx(ke.div,{...o,ref:d,style:{boxSizing:"border-box",maxHeight:"100%",...o.style}})})})});Rj.displayName=tU;var nU="SelectPopperPosition",ih=v.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:o=On,...i}=e,a=vl(n);return h.jsx(Wk,{...a,...i,ref:t,align:r,collisionPadding:o,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});ih.displayName=nU;var[rU,ah]=pi(uo,{}),sh="SelectViewport",Lj=v.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:r,...o}=e,i=Tr(sh,n),a=ah(sh,n),s=Tt(t,i.onViewportChange),c=v.useRef(0);return h.jsxs(h.Fragment,{children:[h.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),h.jsx(yl.Slot,{scope:n,children:h.jsx(ke.div,{"data-radix-select-viewport":"",role:"presentation",...o,ref:s,style:{position:"relative",flex:1,overflow:"hidden auto",...o.style},onScroll:Me(o.onScroll,l=>{const u=l.currentTarget,{contentWrapper:d,shouldExpandOnScrollRef:p}=a;if(p!=null&&p.current&&d){const f=Math.abs(c.current-u.scrollTop);if(f>0){const y=window.innerHeight-On*2,m=parseFloat(d.style.minHeight),g=parseFloat(d.style.height),b=Math.max(m,g);if(b<y){const w=b+f,_=Math.min(y,w),x=w-_;d.style.height=_+"px",d.style.bottom==="0px"&&(u.scrollTop=x>0?x:0,d.style.justifyContent="flex-end")}}}c.current=u.scrollTop})})})]})});Lj.displayName=sh;var Bj="SelectGroup",[oU,iU]=pi(Bj),aU=v.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,o=Dt();return h.jsx(oU,{scope:n,id:o,children:h.jsx(ke.div,{role:"group","aria-labelledby":o,...r,ref:t})})});aU.displayName=Bj;var $j="SelectLabel",Fj=v.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,o=iU($j,n);return h.jsx(ke.div,{id:o.id,...r,ref:t})});Fj.displayName=$j;var bl="SelectItem",[sU,zj]=pi(bl),Vj=v.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:o=!1,textValue:i,...a}=e,s=Ar(bl,n),c=Tr(bl,n),l=s.value===r,[u,d]=v.useState(i??""),[p,f]=v.useState(!1),y=Tt(t,w=>{var _;return(_=c.itemRefCallback)==null?void 0:_.call(c,w,r,o)}),m=Dt(),g=v.useRef("touch"),b=()=>{o||(s.onValueChange(r),s.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return h.jsx(sU,{scope:n,value:r,disabled:o,textId:m,isSelected:l,onItemTextChange:v.useCallback(w=>{d(_=>_||((w==null?void 0:w.textContent)??"").trim())},[]),children:h.jsx(yl.ItemSlot,{scope:n,value:r,disabled:o,textValue:u,children:h.jsx(ke.div,{role:"option","aria-labelledby":m,"data-highlighted":p?"":void 0,"aria-selected":l&&p,"data-state":l?"checked":"unchecked","aria-disabled":o||void 0,"data-disabled":o?"":void 0,tabIndex:o?void 0:-1,...a,ref:y,onFocus:Me(a.onFocus,()=>f(!0)),onBlur:Me(a.onBlur,()=>f(!1)),onClick:Me(a.onClick,()=>{g.current!=="mouse"&&b()}),onPointerUp:Me(a.onPointerUp,()=>{g.current==="mouse"&&b()}),onPointerDown:Me(a.onPointerDown,w=>{g.current=w.pointerType}),onPointerMove:Me(a.onPointerMove,w=>{var _;g.current=w.pointerType,o?(_=c.onItemLeave)==null||_.call(c):g.current==="mouse"&&w.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Me(a.onPointerLeave,w=>{var _;w.currentTarget===document.activeElement&&((_=c.onItemLeave)==null||_.call(c))}),onKeyDown:Me(a.onKeyDown,w=>{var _;((_=c.searchRef)==null?void 0:_.current)!==""&&w.key===" "||(XV.includes(w.key)&&b(),w.key===" "&&w.preventDefault())})})})})});Vj.displayName=bl;var ns="SelectItemText",Uj=v.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:o,...i}=e,a=Ar(ns,n),s=Tr(ns,n),c=zj(ns,n),l=KV(ns,n),[u,d]=v.useState(null),p=Tt(t,b=>d(b),c.onItemTextChange,b=>{var w;return(w=s.itemTextRefCallback)==null?void 0:w.call(s,b,c.value,c.disabled)}),f=u==null?void 0:u.textContent,y=v.useMemo(()=>h.jsx("option",{value:c.value,disabled:c.disabled,children:f},c.value),[c.disabled,c.value,f]),{onNativeOptionAdd:m,onNativeOptionRemove:g}=l;return Wr(()=>(m(y),()=>g(y)),[m,g,y]),h.jsxs(h.Fragment,{children:[h.jsx(ke.span,{id:c.textId,...i,ref:p}),c.isSelected&&a.valueNode&&!a.valueNodeHasChildren?Ik.createPortal(i.children,a.valueNode):null]})});Uj.displayName=ns;var qj="SelectItemIndicator",Hj=v.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return zj(qj,n).isSelected?h.jsx(ke.span,{"aria-hidden":!0,...r,ref:t}):null});Hj.displayName=qj;var ch="SelectScrollUpButton",Wj=v.forwardRef((e,t)=>{const n=Tr(ch,e.__scopeSelect),r=ah(ch,e.__scopeSelect),[o,i]=v.useState(!1),a=Tt(t,r.onScrollButtonChange);return Wr(()=>{if(n.viewport&&n.isPositioned){let s=function(){const l=c.scrollTop>0;i(l)};const c=n.viewport;return s(),c.addEventListener("scroll",s),()=>c.removeEventListener("scroll",s)}},[n.viewport,n.isPositioned]),o?h.jsx(Qj,{...e,ref:a,onAutoScroll:()=>{const{viewport:s,selectedItem:c}=n;s&&c&&(s.scrollTop=s.scrollTop-c.offsetHeight)}}):null});Wj.displayName=ch;var lh="SelectScrollDownButton",Xj=v.forwardRef((e,t)=>{const n=Tr(lh,e.__scopeSelect),r=ah(lh,e.__scopeSelect),[o,i]=v.useState(!1),a=Tt(t,r.onScrollButtonChange);return Wr(()=>{if(n.viewport&&n.isPositioned){let s=function(){const l=c.scrollHeight-c.clientHeight,u=Math.ceil(c.scrollTop)<l;i(u)};const c=n.viewport;return s(),c.addEventListener("scroll",s),()=>c.removeEventListener("scroll",s)}},[n.viewport,n.isPositioned]),o?h.jsx(Qj,{...e,ref:a,onAutoScroll:()=>{const{viewport:s,selectedItem:c}=n;s&&c&&(s.scrollTop=s.scrollTop+c.offsetHeight)}}):null});Xj.displayName=lh;var Qj=v.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...o}=e,i=Tr("SelectScrollButton",n),a=v.useRef(null),s=gl(n),c=v.useCallback(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return v.useEffect(()=>()=>c(),[c]),Wr(()=>{var l,u;(u=(l=s().find(d=>d.ref.current===document.activeElement))==null?void 0:l.ref.current)==null||u.scrollIntoView({block:"nearest"})},[s]),h.jsx(ke.div,{"aria-hidden":!0,...o,ref:t,style:{flexShrink:0,...o.style},onPointerDown:Me(o.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(r,50))}),onPointerMove:Me(o.onPointerMove,()=>{var l;(l=i.onItemLeave)==null||l.call(i),a.current===null&&(a.current=window.setInterval(r,50))}),onPointerLeave:Me(o.onPointerLeave,()=>{c()})})}),cU="SelectSeparator",Yj=v.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return h.jsx(ke.div,{"aria-hidden":!0,...r,ref:t})});Yj.displayName=cU;var uh="SelectArrow",lU=v.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,o=vl(n),i=Ar(uh,n),a=Tr(uh,n);return i.open&&a.position==="popper"?h.jsx(Xk,{...o,...r,ref:t}):null});lU.displayName=uh;function Gj(e){return e===""||e===void 0}var Kj=v.forwardRef((e,t)=>{const{value:n,...r}=e,o=v.useRef(null),i=Tt(t,o),a=Ej(n);return v.useEffect(()=>{const s=o.current,c=window.HTMLSelectElement.prototype,l=Object.getOwnPropertyDescriptor(c,"value").set;if(a!==n&&l){const u=new Event("change",{bubbles:!0});l.call(s,n),s.dispatchEvent(u)}},[a,n]),h.jsx(Ude,{asChild:!0,children:h.jsx("select",{...r,ref:i,defaultValue:n})})});Kj.displayName="BubbleSelect";function Zj(e){const t=qde(e),n=v.useRef(""),r=v.useRef(0),o=v.useCallback(a=>{const s=n.current+a;t(s),function c(l){n.current=l,window.clearTimeout(r.current),l!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(s)},[t]),i=v.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return v.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,o,i]}function Jj(e,t,n){const r=t.length>1&&Array.from(t).every(s=>s===t[0])?t[0]:t,o=n?e.indexOf(n):-1;let i=uU(e,Math.max(o,0));r.length===1&&(i=i.filter(s=>s!==n));const a=i.find(s=>s.textValue.toLowerCase().startsWith(r.toLowerCase()));return a!==n?a:void 0}function uU(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var dU=Sj,eO=Cj,pU=Nj,fU=kj,hU=Aj,tO=Tj,mU=Lj,nO=Fj,rO=Vj,yU=Uj,gU=Hj,oO=Wj,iO=Xj,aO=Yj;Zn=dU,Jn=pU,In=v.forwardRef(({className:e,children:t,...n},r)=>h.jsxs(eO,{ref:r,className:re("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...n,children:[t,h.jsx(fU,{asChild:!0,children:h.jsx(ge,{name:"chevron-down",className:"h-4 w-4 opacity-50"})})]})),In.displayName=eO.displayName;const sO=v.forwardRef(({className:e,...t},n)=>h.jsx(oO,{ref:n,className:re("flex cursor-default items-center justify-center py-1",e),...t,children:h.jsx(ge,{name:"chevron-up",className:"h-4 w-4"})}));sO.displayName=oO.displayName;const cO=v.forwardRef(({className:e,...t},n)=>h.jsx(iO,{ref:n,className:re("flex cursor-default items-center justify-center py-1",e),...t,children:h.jsx(ge,{name:"chevron-down",className:"h-4 w-4"})}));cO.displayName=iO.displayName,Dn=v.forwardRef(({className:e,children:t,position:n="popper",...r},o)=>h.jsx(hU,{children:h.jsxs(tO,{ref:o,className:re("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[h.jsx(sO,{}),h.jsx(mU,{className:re("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),h.jsx(cO,{})]})})),Dn.displayName=tO.displayName;const vU=v.forwardRef(({className:e,...t},n)=>h.jsx(nO,{ref:n,className:re("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));vU.displayName=nO.displayName,Rt=v.forwardRef(({className:e,children:t,...n},r)=>h.jsxs(rO,{ref:r,className:re("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[h.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:h.jsx(gU,{children:h.jsx(ge,{name:"check",className:"h-4 w-4"})})}),h.jsx(yU,{children:t})]})),Rt.displayName=rO.displayName;const bU=v.forwardRef(({className:e,...t},n)=>h.jsx(aO,{ref:n,className:re("-mx-1 my-1 h-px bg-muted",e),...t}));bU.displayName=aO.displayName;const dh=["Qwen2.5-1.5B-Instruct-q4f32_1-MLC","Qwen2.5-Coder-1.5B-Instruct-q4f16_1-MLC","stablelm-2-zephyr-1_6b-q4f16_1-MLC-1k","Phi-3.5-mini-instruct-q4f16_1-MLC-1k","Llama-3.2-3B-Instruct-q4f32_1-MLC"],xU=Md("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function zt({className:e,variant:t,...n}){return h.jsx("div",{className:re(xU({variant:t}),e),...n})}const xl=v.memo(e=>{var s;const{name:t,model:n,isCached:r,isFunctionCalling:o}=e,{t:i}=je("atoms"),a=v.useCallback(c=>c===1?"llm_info.model_types.embedding":c===2?"llm_info.model_types.vlm":"llm_info.model_types.llm",[]);if(n)return h.jsxs(h.Fragment,{children:[h.jsx(zt,{className:"",children:i(a(n.model_type))}),dh.some(c=>t&&c.includes(t))?h.jsx(zt,{className:"",variant:"outline",children:i("llm_info.recommended")}):null,r?h.jsx(zt,{className:"",variant:"outline",children:i("llm_info.cached")}):null,o?h.jsx(zt,{className:"",variant:"outline",children:i("llm_info.function_calling")}):null,n!=null&&n.low_resource_required?h.jsx(zt,{className:"",variant:"outline",children:i("llm_info.low_resource_required")}):null,(s=n==null?void 0:n.overrides)!=null&&s.context_window_size?h.jsxs(zt,{className:"",variant:"outline",children:[n.overrides.context_window_size.toLocaleString("en-US")," Tokens"]}):null,n!=null&&n.vram_required_MB?h.jsxs(zt,{className:"",variant:"outline",children:["VRAM: ",n.vram_required_MB.toLocaleString("en-US")," MB"]}):null]})}),qn=v.memo(e=>{const{loading:t,...n}=e;return h.jsx(vt,{...n,disabled:e.disabled||t,children:t?h.jsx(ge,{name:"loader-circle",className:"animate-spin"}):e.children})}),wU=[dc.WebLLM];function _U(e){var S;const{id:t,setDialog:n}=e,{t:r}=je("components"),{toast:o}=on(),i=jt(t),[a,s]=v.useState(""),[c,l]=v.useState(!1),[u,d]=v.useState(""),[p,f]=v.useState(dc.WebLLM),[y,m]=v.useState(!1),[g,b]=v.useState(),w=An(C=>C.syncCachedLLMURLs),_=An(C=>C.cachedLLMURLs),{loading:x,createDatabaseLLM:j}=tV();v.useEffect(()=>{an(()=>import("./index-CBYutmqk.js").then(async C=>(await C.__tla,C)),__vite__mapDeps([0,1,2,3])).then(async({functionCallingModelIds:C,prebuiltAppConfig:k})=>{const D=k.model_list;b({modelList:D,functionCallingModelIds:C})})},[]),v.useEffect(()=>{w()},[w]);const O=v.useMemo(()=>!(g!=null&&g.functionCallingModelIds)||!(g!=null&&g.modelList)?[]:((u?g==null?void 0:g.modelList.filter(C=>C.model_id.toLowerCase().includes(u.toLowerCase())):g==null?void 0:g.modelList)||[]).sort((C,k)=>{const D=_.some(X=>X.includes(C.model_id)),R=_.some(X=>X.includes(k.model_id));if(D&&!R)return-1;if(!D&&R)return 1;const B=dh.includes(C.model_id),F=dh.includes(k.model_id);if(B&&!F)return-1;if(!B&&F)return 1;const V=g==null?void 0:g.functionCallingModelIds.includes(C.model_id),I=g==null?void 0:g.functionCallingModelIds.includes(k.model_id);return V&&!I?-1:!V&&I?1:C.vram_required_MB&&k.vram_required_MB&&C.vram_required_MB!==k.vram_required_MB?C.vram_required_MB-k.vram_required_MB:C.model_id.localeCompare(k.model_id)}),[g==null?void 0:g.modelList,g==null?void 0:g.functionCallingModelIds,u,_]),E=v.useMemo(()=>{if(!(!a||!(g!=null&&g.modelList)))return g==null?void 0:g.modelList.find(C=>C.model_id===a)},[a,g==null?void 0:g.modelList]);v.useEffect(()=>{!(E!=null&&E.model_id)||!_||m(_.some(C=>C.includes(E.model_id)))},[_,E==null?void 0:E.model_id]);const M=v.useCallback(C=>C===1?Ln.embedding:C===2?Ln.VLM:Ln.LLM,[]),N=v.useCallback(C=>{s(C),l(!1)},[]),A=v.useCallback(C=>{d(C)},[]),P=v.useCallback(C=>{f(C)},[]),T=async()=>{var C;if(i)try{await j(i,{name:a,model_type:M(E==null?void 0:E.model_type),function_calling:E!=null&&E.model_id?(C=g==null?void 0:g.functionCallingModelIds)==null?void 0:C.includes(E==null?void 0:E.model_id):!1}),n==null||n(!1)}catch{o({variant:"destructive",description:r("add_llm_card.errors.failed_to_create")})}finally{s("")}},L=v.useMemo(()=>O.map(C=>{var k;return h.jsxs(Oj,{value:C.model_id,onSelect:N,children:[a===C.model_id?h.jsx(ge,{name:"check",className:"mr-2 h-4 w-4"}):h.jsx("div",{className:"mr-2 h-4 w-4"}),h.jsxs("span",{className:"max-w-md",children:[h.jsxs("div",{className:"flex gap-2 mb-2",children:[h.jsx(Ka,{name:C.model_id}),C.model_id]}),h.jsx("div",{className:"flex max-w-full flex-wrap gap-1",children:h.jsx(xl,{model:C,isFunctionCalling:((k=g==null?void 0:g.functionCallingModelIds)==null?void 0:k.includes(C.model_id))||!1,name:C.model_id,isCached:_.some(D=>D.includes(C.model_id))||!1})})]})]},C.model_id)}),[_,N,a,g==null?void 0:g.functionCallingModelIds,O]);return h.jsxs(ft,{className:"max-w-lg",children:[h.jsx(Bt,{children:h.jsx(Zt,{children:r("add_llm_card.title")})}),h.jsxs($t,{children:[h.jsxs("div",{className:"grid w-full gap-1.5",children:[h.jsx($e,{children:r("add_llm_card.provider")}),h.jsxs(Zn,{value:p,onValueChange:P,children:[h.jsx(In,{className:"w-full mb-4",children:h.jsx(Jn,{placeholder:r("add_llm_card.provider_select_placeholder")})}),h.jsx(Dn,{children:Object.values(wU).map(C=>h.jsx(Rt,{value:C,children:r(`add_llm_card.providers.${C.toLowerCase()}`)},C))})]}),h.jsx($e,{children:r("add_llm_card.model_name")}),h.jsxs(uV,{open:c,onOpenChange:l,children:[h.jsx(Gf,{asChild:!0,children:h.jsxs(vt,{variant:"outline",role:"combobox","aria-expanded":c,className:"w-full justify-between",children:[a?E==null?void 0:E.model_id:r("add_llm_card.select_model_placeholder"),h.jsx(ge,{name:"chevrons-up-down",className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),h.jsx(cj,{className:"w-full p-0",children:h.jsxs(bj,{children:[h.jsx(xj,{onValueChange:A,placeholder:r("add_llm_card.search_placeholder")}),h.jsxs(wj,{children:[h.jsx(_j,{children:r("add_llm_card.no_model")}),h.jsx(jj,{children:L})]})]})})]})]}),E?h.jsxs("div",{className:"mt-4",children:[h.jsxs("div",{className:"mt-4 text-sm text-muted-foreground center flex max-w-full flex-wrap gap-1",children:[h.jsx(Ka,{name:E.model_id,className:"mr-2"}),h.jsx(xl,{model:E,isFunctionCalling:((S=g==null?void 0:g.functionCallingModelIds)==null?void 0:S.includes(E.model_id))||!1,name:E.model_id,isCached:_.some(C=>C.includes(E.model_id))||!1})]}),h.jsxs("div",{className:"mt-2 text-sm text-muted-foreground",children:[h.jsx("span",{className:"font-bold mr-2",children:r("add_llm_card.model_url")}),E.model]}),h.jsxs("div",{className:"mt-2 text-sm text-muted-foreground center flex",children:[h.jsx("span",{className:"font-bold mr-2",children:r("add_llm_card.model_lib_url")}),E.model_lib]}),h.jsxs("div",{className:"mt-2 text-sm text-muted-foreground center flex",children:[h.jsx("span",{className:"font-bold mr-2",children:r("add_llm_card.metadata")}),JSON.stringify(E.overrides)]})]}):null]}),h.jsx(Nr,{className:"flex justify-between",children:h.jsx(qn,{loading:x,disabled:!(a!=null&&a.length),onClick:T,className:"w-full",children:r(y?"add_llm_card.button_add":"add_llm_card.button_download_and_add")})})]})}const lO=()=>{const e=It(i=>{var a;return(a=i.currentSession)==null?void 0:a.id}),[t,n]=v.useState(!1),r=ve(i=>i.createOrUpdateFlowNode),o=v.useCallback(async(i,a)=>{var s,c,l;try{if(!i||!e)throw new Error("Source or Session not found");n(!0);const u=((s=i.position)==null?void 0:s.x)||0,d=(((c=i.position)==null?void 0:c.y)||0)+(((l=i.measured)==null?void 0:l.height)||0),p=await ue("Prompt").save({content:a.content,prefix:a.prefix,role:a.role||Qt.System,status:er.Started,session_id:e,type:a.type||Yt.Chat});if(!p)throw new Error("Failed to save prompt");if(!await r({source_id:p.id,source_type:"Prompt",node_type:G.Prompt,x:u,y:d+20}))throw new Error("Failed to save prompt node")}finally{n(!1)}},[e,r]);return{loading:t,createPrompt:o}},lr=v.forwardRef(({className:e,...t},n)=>h.jsx("textarea",{className:re("flex min-h-[100px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-0 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...t}));lr.displayName="Textarea";const jU={[Yt.Chat]:{label:"add_prompt_card.prompt_types.chat",value:Yt.Chat},[Yt.FewShotExample]:{label:"add_prompt_card.prompt_types.few_shot_example",value:Yt.FewShotExample}},OU={[Qt.System]:{label:"add_prompt_card.prompt_roles.system",value:Qt.System},[Qt.Human]:{label:"add_prompt_card.prompt_roles.human",value:Qt.Human},[Qt.AI]:{label:"add_prompt_card.prompt_roles.ai",value:Qt.AI}},ph=v.memo(({defaultPromptContent:e,defaultPromptRole:t,defaultPromptType:n,hidePromptRole:r,hidePromptType:o,loading:i,onSubmit:a})=>{const[s,c]=v.useState(e||""),[l,u]=v.useState(n||Yt.Chat),[d,p]=v.useState(t),[f,y]=v.useState(""),{t:m}=je("components"),g=v.useCallback(j=>{c(j.target.value)},[]),b=v.useCallback(j=>{y(j.target.value)},[]),w=v.useCallback(j=>{j===Yt.FewShotExample&&c(`Question: {input}
Answer: {output}`),u(j)},[]),_=v.useCallback(j=>{p(j)},[]),x=async()=>{await a({content:s,role:d,prefix:f,type:l})&&(c(""),p(void 0),u("chat"),y(""))};return h.jsxs("div",{children:[h.jsxs("div",{className:"grid w-full gap-1.5",children:[o?void 0:h.jsxs(h.Fragment,{children:[h.jsx($e,{children:m("add_prompt_card.prompt_type")}),h.jsxs(Zn,{value:l,onValueChange:w,children:[h.jsx(In,{className:"w-full mb-4",children:h.jsx(Jn,{placeholder:m("add_prompt_card.type_select_placeholder")})}),h.jsx(Dn,{children:Object.values(jU).map(j=>h.jsx(Rt,{value:j.value,children:m(j.label)},j.value))})]})]}),r?void 0:h.jsxs(h.Fragment,{children:[h.jsx($e,{children:m("add_prompt_card.prompt_role")}),h.jsxs(Zn,{value:d,onValueChange:_,children:[h.jsx(In,{className:"w-full mb-4",children:h.jsx(Jn,{placeholder:m("add_prompt_card.role_select_placeholder")})}),h.jsx(Dn,{children:Object.values(OU).map(j=>h.jsx(Rt,{value:j.value,children:m(j.label)},j.value))})]})]}),l===Yt.FewShotExample&&h.jsxs(h.Fragment,{children:[h.jsx($e,{children:m("add_prompt_card.prompt_prefix")}),h.jsx(lr,{value:f,onChange:b,disabled:!1,className:"h-20",placeholder:m("add_prompt_card.placeholder"),id:"message"}),h.jsx($e,{children:m("add_prompt_card.prompt_content")}),h.jsxs("div",{className:"w-full border-0 text-gray-700 flex text-sm justify-end items-center",children:[h.jsx(ge,{name:"info",className:"mr-2",size:14}),m("add_prompt_card.few_shot_example_note")]})]}),h.jsx(lr,{value:s,onChange:g,disabled:!1,placeholder:m("add_prompt_card.placeholder"),id:"message"})]}),h.jsx("div",{children:h.jsx(qn,{loading:i,disabled:!(s!=null&&s.length),onClick:x,className:"w-full mt-4",children:m("add_prompt_card.button")})})]})}),EU=v.memo(e=>{const{id:t,thread:n,setDialog:r}=e,{t:o}=je("components"),{toast:i}=on(),a=jt(t),{createPrompt:s,loading:c}=lO(),l=async u=>{if(a)try{if(!(u!=null&&u.content))throw new Error("Prompt data is missing");await s(a,{...u,content:u.content,thread:n}),r==null||r(!1)}catch(d){i({variant:"destructive",title:`${d}`})}};return h.jsxs(ft,{className:"mw-full",children:[h.jsx(Bt,{children:h.jsx(Zt,{children:o("add_prompt_card.title")})}),h.jsx($t,{children:h.jsx(ph,{onSubmit:l,loading:c,defaultPromptRole:"system",defaultPromptType:"chat"})})]})}),SU="0123456789abcdef",MU=[8,4,4,4,12];function fh(){return MU.map(e=>Hde(SU,e)()).join("-")}const CU=()=>{const e=It(a=>{var s;return(s=a.currentSession)==null?void 0:s.id}),[t,n]=v.useState(!1),r=ve(a=>a.createOrUpdateFlowNode),o=v.useCallback((a,s,c,l)=>{var u;if(e){for(const d of s)(u=d.data)!=null&&u.length?o(a,d.data,c,d.id):c.push({name:d.name,type:d.type,enum:d.enum?JSON.stringify(d.enum):"",required:d.required,description:d.description,id:d.id||fh(),parent_id:l,schema_id:a,session_id:e});return c}},[e]),i=v.useCallback(async(a,s)=>{var c,l,u;try{if(!a||!e)throw new Error("Source or Session not found");n(!0);const d=((c=a.position)==null?void 0:c.x)||0,p=(((l=a.position)==null?void 0:l.y)||0)+(((u=a.measured)==null?void 0:u.height)||0),f=await ue("Schema").save({name:"Untitled Schema",session_id:e});if(!f)throw new Error("Failed to save schema");const y=o(f.id,s,[],void 0);if(!(y!=null&&y.length))throw new Error("Failed to convert schema items");if(await ue("SchemaItem").save(y),!await r({source_id:f.id,source_type:"Schema",node_type:G.Schema,x:d,y:p+20}))throw new Error("Failed to save schema node")}finally{n(!1)}},[e,o,r]);return{loading:t,createSchema:i}};var ur="Accordion",PU=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[hh,NU,kU]=Ag(ur),[wl,Fpe]=aa(ur,[kU,Yk]),mh=Yk(),uO=$.forwardRef((e,t)=>{const{type:n,...r}=e,o=r,i=r;return h.jsx(hh.Provider,{scope:e.__scopeAccordion,children:n==="multiple"?h.jsx(DU,{...i,ref:t}):h.jsx(IU,{...o,ref:t})})});uO.displayName=ur;var[dO,AU]=wl(ur),[pO,TU]=wl(ur,{collapsible:!1}),IU=$.forwardRef((e,t)=>{const{value:n,defaultValue:r,onValueChange:o=()=>{},collapsible:i=!1,...a}=e,[s,c]=kn({prop:n,defaultProp:r,onChange:o});return h.jsx(dO,{scope:e.__scopeAccordion,value:s?[s]:[],onItemOpen:c,onItemClose:$.useCallback(()=>i&&c(""),[i,c]),children:h.jsx(pO,{scope:e.__scopeAccordion,collapsible:i,children:h.jsx(fO,{...a,ref:t})})})}),DU=$.forwardRef((e,t)=>{const{value:n,defaultValue:r,onValueChange:o=()=>{},...i}=e,[a=[],s]=kn({prop:n,defaultProp:r,onChange:o}),c=$.useCallback(u=>s((d=[])=>[...d,u]),[s]),l=$.useCallback(u=>s((d=[])=>d.filter(p=>p!==u)),[s]);return h.jsx(dO,{scope:e.__scopeAccordion,value:a,onItemOpen:c,onItemClose:l,children:h.jsx(pO,{scope:e.__scopeAccordion,collapsible:!0,children:h.jsx(fO,{...i,ref:t})})})}),[RU,_l]=wl(ur),fO=$.forwardRef((e,t)=>{const{__scopeAccordion:n,disabled:r,dir:o,orientation:i="vertical",...a}=e,s=$.useRef(null),c=Tt(s,t),l=NU(n),u=sc(o)==="ltr",d=Me(e.onKeyDown,p=>{var E;if(!PU.includes(p.key))return;const f=p.target,y=l().filter(M=>{var N;return!((N=M.ref.current)!=null&&N.disabled)}),m=y.findIndex(M=>M.ref.current===f),g=y.length;if(m===-1)return;p.preventDefault();let b=m;const w=0,_=g-1,x=()=>{b=m+1,b>_&&(b=w)},j=()=>{b=m-1,b<w&&(b=_)};switch(p.key){case"Home":b=w;break;case"End":b=_;break;case"ArrowRight":i==="horizontal"&&(u?x():j());break;case"ArrowDown":i==="vertical"&&x();break;case"ArrowLeft":i==="horizontal"&&(u?j():x());break;case"ArrowUp":i==="vertical"&&j();break}const O=b%g;(E=y[O].ref.current)==null||E.focus()});return h.jsx(RU,{scope:n,disabled:r,direction:o,orientation:i,children:h.jsx(hh.Slot,{scope:n,children:h.jsx(ke.div,{...a,"data-orientation":i,ref:c,onKeyDown:r?void 0:d})})})}),jl="AccordionItem",[LU,yh]=wl(jl),hO=$.forwardRef((e,t)=>{const{__scopeAccordion:n,value:r,...o}=e,i=_l(jl,n),a=AU(jl,n),s=mh(n),c=Dt(),l=r&&a.value.includes(r)||!1,u=i.disabled||e.disabled;return h.jsx(LU,{scope:n,open:l,disabled:u,triggerId:c,children:h.jsx(Mpe,{"data-orientation":i.orientation,"data-state":xO(l),...s,...o,ref:t,disabled:u,open:l,onOpenChange:d=>{d?a.onItemOpen(r):a.onItemClose(r)}})})});hO.displayName=jl;var mO="AccordionHeader",yO=$.forwardRef((e,t)=>{const{__scopeAccordion:n,...r}=e,o=_l(ur,n),i=yh(mO,n);return h.jsx(ke.h3,{"data-orientation":o.orientation,"data-state":xO(i.open),"data-disabled":i.disabled?"":void 0,...r,ref:t})});yO.displayName=mO;var gh="AccordionTrigger",gO=$.forwardRef((e,t)=>{const{__scopeAccordion:n,...r}=e,o=_l(ur,n),i=yh(gh,n),a=TU(gh,n),s=mh(n);return h.jsx(hh.ItemSlot,{scope:n,children:h.jsx(Cpe,{"aria-disabled":i.open&&!a.collapsible||void 0,"data-orientation":o.orientation,id:i.triggerId,...s,...r,ref:t})})});gO.displayName=gh;var vO="AccordionContent",bO=$.forwardRef((e,t)=>{const{__scopeAccordion:n,...r}=e,o=_l(ur,n),i=yh(vO,n),a=mh(n);return h.jsx(Ppe,{role:"region","aria-labelledby":i.triggerId,"data-orientation":o.orientation,...a,...r,ref:t,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...e.style}})});bO.displayName=vO;function xO(e){return e?"open":"closed"}let wO;lv=uO,uv=hO,wO=yO,qd=gO,Hd=bO;const _O=lv,vh=v.forwardRef(({className:e,...t},n)=>h.jsx(uv,{ref:n,className:re("border-b",e),...t}));vh.displayName="AccordionItem";const bh=v.forwardRef(({className:e,children:t,...n},r)=>h.jsx(wO,{className:"flex",children:h.jsxs(qd,{ref:r,className:re("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",e),...n,children:[t,h.jsx(ge,{name:"chevron-down",className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));bh.displayName=qd.displayName;const xh=v.forwardRef(({className:e,children:t,...n},r)=>h.jsx(Hd,{ref:r,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...n,children:h.jsx("div",{className:re("pb-4 pt-0",e),children:t})}));xh.displayName=Hd.displayName;var wh="Checkbox",[BU,zpe]=aa(wh),[$U,FU]=BU(wh),jO=v.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:r,checked:o,defaultChecked:i,required:a,disabled:s,value:c="on",onCheckedChange:l,form:u,...d}=e,[p,f]=v.useState(null),y=Tt(t,x=>f(x)),m=v.useRef(!1),g=p?u||!!p.closest("form"):!0,[b=!1,w]=kn({prop:o,defaultProp:i,onChange:l}),_=v.useRef(b);return v.useEffect(()=>{const x=p==null?void 0:p.form;if(x){const j=()=>w(_.current);return x.addEventListener("reset",j),()=>x.removeEventListener("reset",j)}},[p,w]),h.jsxs($U,{scope:n,state:b,disabled:s,children:[h.jsx(ke.button,{type:"button",role:"checkbox","aria-checked":Ir(b)?"mixed":b,"aria-required":a,"data-state":SO(b),"data-disabled":s?"":void 0,disabled:s,value:c,...d,ref:y,onKeyDown:Me(e.onKeyDown,x=>{x.key==="Enter"&&x.preventDefault()}),onClick:Me(e.onClick,x=>{w(j=>Ir(j)?!0:!j),g&&(m.current=x.isPropagationStopped(),m.current||x.stopPropagation())})}),g&&h.jsx(zU,{control:p,bubbles:!m.current,name:r,value:c,checked:b,required:a,disabled:s,form:u,style:{transform:"translateX(-100%)"},defaultChecked:Ir(i)?!1:i})]})});jO.displayName=wh;var OO="CheckboxIndicator",EO=v.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:r,...o}=e,i=FU(OO,n);return h.jsx(Sd,{present:r||Ir(i.state)||i.state===!0,children:h.jsx(ke.span,{"data-state":SO(i.state),"data-disabled":i.disabled?"":void 0,...o,ref:t,style:{pointerEvents:"none",...e.style}})})});EO.displayName=OO;var zU=e=>{const{control:t,checked:n,bubbles:r=!0,defaultChecked:o,...i}=e,a=v.useRef(null),s=Ej(n),c=Npe(t);v.useEffect(()=>{const u=a.current,d=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(d,"checked").set;if(s!==n&&p){const f=new Event("click",{bubbles:r});u.indeterminate=Ir(n),p.call(u,Ir(n)?!1:n),u.dispatchEvent(f)}},[s,n,r]);const l=v.useRef(Ir(n)?!1:n);return h.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:o??l.current,...i,tabIndex:-1,ref:a,style:{...e.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function Ir(e){return e==="indeterminate"}function SO(e){return Ir(e)?"indeterminate":e?"checked":"unchecked"}zd=jO,sv=EO;const MO=v.forwardRef(({className:e,...t},n)=>h.jsx(zd,{ref:n,className:re("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:h.jsx(sv,{className:re("flex items-center justify-center text-current"),children:h.jsx(ge,{name:"check",className:"h-4 w-4"})})}));MO.displayName=zd.displayName;const CO=v.memo(({setData:e,data:t,id:n})=>{const{t:r}=je("components"),[o,i]=v.useState({name:"",description:"",type:"string",required:!1,data:[]}),a=v.useMemo(()=>n&&t.find(m=>m.id===n)||o,[t,o,n]),s=v.useCallback(m=>{m.target.value&&!/^[a-zA-Z_][a-zA-Z0-9_]*$/.test(m.target.value)||(n?e(g=>[...g.map(b=>b.id===n?{...b,name:m.target.value||""}:b)]):i(g=>({...g,name:m.target.value||""})))},[n,e]),c=v.useCallback(m=>{n?e(g=>[...g.map(b=>b.id===n?{...b,description:m.target.value||""}:b)]):i(g=>({...g,description:m.target.value||""}))},[n,e]),l=v.useCallback(m=>{n?e(g=>[...g.map(b=>b.id===n?{...b,type:m||""}:b)]):i(g=>({...g,type:m||"string"}))},[n,e]),u=v.useCallback(m=>{n?e(g=>[...g.map(b=>b.id===n?{...b,required:!!m||!1}:b)]):i(g=>({...g,required:!!m||!1}))},[n,e]),d=v.useCallback(m=>{n?e(g=>[...g.map(b=>b.id===n?{...b,enum:m.target.value||""}:b)]):i(g=>({...g,enum:m.target.value||""}))},[n,e]),p=v.useCallback(()=>{if(t.find(m=>m.name===o.name))return ca({variant:"destructive",content:"Name already exists"});o.id=fh(),e(m=>[...m,{...o}]),i({name:"",description:"",type:"string",required:!1,id:fh(),parent:n||void 0,data:[]})},[t,o,e,n]),f=v.useCallback(m=>{e(g=>[...g.map(b=>b.id===n?{...b,data:m(b.data||[])}:b)])},[n,e]),y=["object","array"].includes(a.type);return h.jsxs("div",{className:"w-full p-1",children:[h.jsxs("div",{children:[h.jsx($e,{children:r("add_schema_card.field.name")}),h.jsx(Tn,{id:"name",onChange:s,placeholder:r("add_schema_card.field.name_placeholder"),value:(a==null?void 0:a.name)||""})]}),h.jsxs("div",{children:[h.jsx($e,{children:r("add_schema_card.field.description")}),h.jsx(Tn,{id:"description",placeholder:r("add_schema_card.field.description_placeholder"),onChange:c,value:(a==null?void 0:a.description)||""})]}),h.jsxs("div",{children:[h.jsx($e,{children:r("add_schema_card.field.type")}),h.jsxs(Zn,{onValueChange:l,value:(a==null?void 0:a.type)||"",children:[h.jsx(In,{children:h.jsx(Jn,{placeholder:r("add_schema_card.field.type_placeholder")})}),h.jsxs(Dn,{children:[h.jsx(Rt,{value:"string",children:r("add_schema_card.types.string")}),h.jsx(Rt,{value:"boolean",children:r("add_schema_card.types.boolean")}),h.jsx(Rt,{value:"number",children:r("add_schema_card.types.number")}),h.jsx(Rt,{value:"object",children:r("add_schema_card.types.object")}),h.jsx(Rt,{value:"array",children:r("add_schema_card.types.array")})]})]})]}),h.jsxs("div",{className:"flex items-center h-10",children:[h.jsx($e,{children:r("add_schema_card.field.required")}),h.jsx(MO,{className:"ml-2","aria-label":"Select row",onCheckedChange:u,checked:a==null?void 0:a.required})]}),y?h.jsxs("div",{className:"mt-2 flex flex-col gap-2",children:[h.jsx($e,{children:r("add_schema_card.children")}),h.jsx(PO,{data:(a==null?void 0:a.data)||[],setData:f})]}):null,(a==null?void 0:a.type)==="enum"?h.jsxs("div",{className:"mt-2 flex flex-col gap-2",children:[h.jsx($e,{children:r("add_schema_card.field.enum")}),h.jsx(Tn,{id:"enum",onChange:d,placeholder:"Enum"})]}):null,n?null:h.jsx("div",{className:"w-full flex justify-end mt-2",children:h.jsx(vt,{variant:"secondary",disabled:!a.name||!a.description||!a.type,onClick:p,className:"w-full",children:r("add_schema_card.field.add_field")})})]})}),VU=v.memo(({data:e,setData:t})=>h.jsxs(_O,{type:"single",collapsible:!0,children:[e.map(n=>h.jsxs(vh,{value:`${n.id}`,children:[h.jsx(bh,{children:n.name}),h.jsx(xh,{children:h.jsx(CO,{setData:t,data:e,id:n.id})})]},n.id||"new")),h.jsx(ft,{className:"p-2 mt-4",children:h.jsx(CO,{setData:t,data:e})})]})),PO=VU,UU=v.memo(e=>{const{t}=je("components"),{id:n}=e,r=jt(n),[o,i]=v.useState([]),{createSchema:a,loading:s}=CU(),c=async()=>{if(r&&(o!=null&&o.length))try{await a(r,o),i([])}catch(l){ca({variant:"destructive",title:`${l}`})}};return h.jsxs(ft,{className:"max-w-lg",children:[h.jsx(Bt,{children:h.jsx(Zt,{children:t("add_schema_card.title")})}),h.jsx($t,{className:"min-w-96",children:h.jsx(PO,{setData:i,data:o})}),h.jsx(Nr,{className:"flex justify-between",children:h.jsx(qn,{loading:s,disabled:!(o!=null&&o.length),onClick:c,className:"w-full",children:t("add_schema_card.create")})})]})}),NO=()=>{const e=It(i=>{var a;return(a=i.currentSession)==null?void 0:a.id}),[t,n]=v.useState(!1),r=ve(i=>i.createOrUpdateFlowNode),o=v.useCallback(async(i,a,s)=>{var c,l,u;try{if(!i||!e)throw new Error("Source or Session not found");n(!0);const d=((c=i.position)==null?void 0:c.x)||0,p=(((l=i.position)==null?void 0:l.y)||0)+(((u=i.measured)==null?void 0:u.height)||0),f=Wde(a,s),y=await ue("CSVData").save({headers:f.headers,csv:f.data,session_id:e});if(!y)throw new Error("Failed to save");if(!await r({source_id:y.id,source_type:"CSVData",node_type:G.CSVData,x:d,y:p+20}))throw new Error("Failed to save node")}finally{n(!1)}},[e,r]);return{loading:t,createCSVData:o}},Ol=v.forwardRef(({className:e,...t},n)=>h.jsx("div",{className:"relative w-full overflow-auto",children:h.jsx("table",{ref:n,className:re("w-full caption-bottom text-sm",e),...t})}));Ol.displayName="Table";const El=v.forwardRef(({className:e,...t},n)=>h.jsx("thead",{ref:n,className:re("[&_tr]:border-b",e),...t}));El.displayName="TableHeader";const Sl=v.forwardRef(({className:e,...t},n)=>h.jsx("tbody",{ref:n,className:re("[&_tr:last-child]:border-0",e),...t}));Sl.displayName="TableBody";const qU=v.forwardRef(({className:e,...t},n)=>h.jsx("tfoot",{ref:n,className:re("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));qU.displayName="TableFooter";const po=v.forwardRef(({className:e,...t},n)=>h.jsx("tr",{ref:n,className:re("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));po.displayName="TableRow";const fi=v.forwardRef(({className:e,...t},n)=>h.jsx("th",{ref:n,className:re("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));fi.displayName="TableHead";const hi=v.forwardRef(({className:e,...t},n)=>h.jsx("td",{ref:n,className:re("align-middle [&:has([role=checkbox])]:pr-0",e),...t}));hi.displayName="TableCell";const HU=v.forwardRef(({className:e,...t},n)=>h.jsx("caption",{ref:n,className:re("mt-4 text-sm text-muted-foreground",e),...t}));HU.displayName="TableCaption";function WU({data:e}){const{t}=je("components");return h.jsxs(Ol,{className:"w-full",children:[h.jsx(El,{children:h.jsxs(po,{children:[h.jsx(fi,{children:t("add_few_shot_example_card.input")}),h.jsx(fi,{children:t("add_few_shot_example_card.output")})]})}),h.jsx(Sl,{children:e==null?void 0:e.map((n,r)=>h.jsxs(po,{children:[h.jsx(hi,{className:"p-4",children:n.input}),h.jsx(hi,{className:"p-4",children:n.output})]},`${n.input}_${n.output}_${r}`))})]})}const XU=v.memo(e=>{const{id:t}=e,{t:n}=je("components"),[r,o]=v.useState([]),[i,a]=v.useState(""),[s,c]=v.useState(""),l=jt(t),{createCSVData:u,loading:d}=NO(),p=()=>{o(y=>[...y,{input:i,output:s}]),a(""),c("")},f=async()=>{l&&await u(l,["input","output"],r.map(y=>[y.input,y.output]))};return h.jsxs(ft,{className:"mw-full",children:[h.jsx(Bt,{children:h.jsx(Zt,{children:n("add_few_shot_example_card.title")})}),h.jsxs($t,{children:[h.jsxs("div",{className:"flex flex-col space-y-1.5",children:[h.jsx($e,{htmlFor:"name",children:n("add_few_shot_example_card.input")}),h.jsx(Tn,{value:i,onChange:y=>a(y.target.value||""),id:"name",placeholder:n("add_few_shot_example_card.input_placeholder")})]}),h.jsxs("div",{className:"flex flex-col space-y-1.5 mt-3",children:[h.jsx($e,{htmlFor:"name",children:n("add_few_shot_example_card.output")}),h.jsx(lr,{value:s,onChange:y=>c(y.target.value||""),placeholder:n("add_few_shot_example_card.output_placeholder")})]}),h.jsx("div",{className:"w-full flex mt-4 justify-end",children:h.jsx(vt,{disabled:!i||!s,onClick:p,className:"w-40",children:n("add_few_shot_example_card.add")})}),h.jsx(WU,{data:r||[]})]}),h.jsx(Nr,{className:"flex justify-between",children:h.jsx(qn,{loading:d,disabled:!(r!=null&&r.length),onClick:f,className:"w-full",children:n("add_few_shot_example_card.create")})})]})}),QU=()=>{const e=It(a=>{var s;return(s=a.currentSession)==null?void 0:s.id}),[t,n]=v.useState(!1),r=ve(a=>a.createOrUpdateFlowNode),o=ve(a=>a.createOrUpdateFlowEdge),i=v.useCallback(async(a,s,c)=>{var l,u,d;try{if(!a||!e)throw new Error("Source or Session not found");if(!s.name||!s.description)throw new Error("Name is required");n(!0);const p=((l=a.position)==null?void 0:l.x)||0,f=(((u=a.position)==null?void 0:u.y)||0)+(((d=a.measured)==null?void 0:d.height)||0),y=await ue("ToolDefinition").save({...s,name:`${s.name}`,description:`${s.description}`,session_id:e});if(!y)throw new Error("Failed create tool.");const m=await r({source_id:y.id,source_type:"ToolDefinition",node_type:G.ToolDefinition,x:p,y:f+20});if(!m)throw new Error("Failed to save node");c!=null&&c.schemaNode&&await o({source:c.schemaNode.id,target:m.id})}finally{n(!1)}},[e,r,o]);return{loading:t,createTool:i}},YU=v.memo(e=>{const{t}=je("components"),{toast:n}=on(),{id:r}=e,o=jt(r),[i,a]=v.useState(""),[s,c]=v.useState(""),{createTool:l,loading:u}=QU(),d=y=>{a(y.target.value)},p=y=>{c(y.target.value)},f=async()=>{if(o&&i&&s)try{await l(o,{name:i,description:s}),a(""),c("")}catch(y){console.warn(y),n({variant:"destructive",title:t("add_tool_card.errors.create_tool_failed")})}};return h.jsxs(ft,{className:"mw-full",children:[h.jsx(Bt,{children:h.jsx(Zt,{children:t("add_tool_card.title")})}),h.jsxs($t,{children:[h.jsxs("div",{className:"flex flex-col space-y-1.5",children:[h.jsx($e,{htmlFor:"name",children:t("add_tool_card.tool_name")}),h.jsx(Tn,{onChange:d,id:"name",placeholder:t("add_tool_card.name_placeholder")})]}),h.jsxs("div",{className:"flex flex-col space-y-1.5 mt-3",children:[h.jsx($e,{htmlFor:"name",children:t("add_tool_card.tool_description")}),h.jsx(lr,{onChange:p,placeholder:t("add_tool_card.description_placeholder")})]})]}),h.jsx(Nr,{className:"flex justify-between",children:h.jsx(qn,{loading:u,onClick:f,className:"w-full",children:t("add_tool_card.create")})})]})}),GU=()=>{const e=It(a=>{var s;return(s=a.currentSession)==null?void 0:s.id}),[t,n]=v.useState(!1),r=ve(a=>a.createOrUpdateFlowNode),o=ve(a=>a.createOrUpdateFlowEdge),i=v.useCallback(async(a,s,c)=>{var l,u,d;try{if(!(s!=null&&s.name)||!a||!e)throw new Error("Source or Session not found");n(!0);const p=((l=a.position)==null?void 0:l.x)||0,f=(((u=a.position)==null?void 0:u.y)||0)+(((d=a.measured)==null?void 0:d.height)||0),y=await ue("JSONLData").save({headers:Xde(["content","embedding","metadata"]),jsonl:"",session_id:e});if(!y)throw new Error("Failed to save databaseSource");const m=await r({source_id:y.id,source_type:"JSONLData",node_type:G.JSONLData,x:p+80,y:f+30});if(!m)throw new Error("Failed to save databaseSource node");const g=await ue("VectorDatabase").save({...s,name:`${s.name}`,type:s.type||Qde.Local,storage:s.storage||Dk.DataNode,provider:s.provider||Rk.Memory,session_id:e,metadata:c?JSON.stringify({textSplitter:c}):void 0});if(!g)throw new Error("Failed to save vectorDatabase");const b=await r({source_id:g.id,source_type:"VectorDatabase",node_type:G.VectorDatabase,x:p,y:f+30});if(!b)throw new Error("Failed to save vectorDatabase node");return await o({source:m.id,target:b.id}),{vectorDatabase:g,vectorDatabaseNode:b}}finally{n(!1)}},[e,r,o]);return{loading:t,createVectorDatabase:i}},rs=[Rk.Memory],os=[Dk.DataNode],KU=["TokenTextSplitter","CharacterTextSplitter","RecursiveCharacterTextSplitter"],ZU=v.memo(e=>{const{t}=je("components"),{id:n}=e,r=jt(n),{toast:o}=on(),[i,a]=v.useState(""),[s,c]=v.useState(rs[0]),[l,u]=v.useState(os[0]),[d,p]=v.useState({}),{loading:f,createVectorDatabase:y}=GU(),m=v.useCallback(O=>{c(O)},[]),g=v.useCallback(O=>{u(O)},[]),b=v.useCallback(O=>{p(E=>({...E,type:O,chunkSize:500,chunkOverlap:40}))},[]),w=v.useCallback(O=>{a(O.target.value||"")},[]),_=v.useCallback(O=>{p(E=>({...E,chunkSize:Number(O.target.value)}))},[]),x=v.useCallback(O=>{p(E=>({...E,chunkOverlap:Number(O.target.value)}))},[]),j=async()=>{try{if(!r)return;await y(r,{name:i,provider:s,storage:l},d!=null&&d.type?{type:d.type,chunkSize:d.chunkSize||500,chunkOverlap:d.chunkOverlap||0}:void 0),a(""),p({})}catch{o({variant:"destructive",description:t("create_vector_database_card.errors.create_failed")})}};return h.jsxs(ft,{className:"mw-full",children:[h.jsx(Bt,{children:h.jsx(Zt,{children:t("create_vector_database_card.title")})}),h.jsx($t,{children:h.jsxs("div",{className:"grid w-full gap-1.5",children:[h.jsx($e,{children:t("create_vector_database_card.name")}),h.jsx(Tn,{className:"mb-4",value:i,onChange:w}),(os==null?void 0:os.length)>1?h.jsxs(h.Fragment,{children:[h.jsx($e,{children:t("create_vector_database_card.storage_type")}),h.jsxs(Zn,{value:l,onValueChange:g,children:[h.jsx(In,{className:"w-full mb-4",children:h.jsx(Jn,{placeholder:t("create_vector_database_card.provider_select_placeholder")})}),h.jsx(Dn,{children:Object.values(os).map(O=>h.jsx(Rt,{value:O,children:t(`create_vector_database_card.storage_types.${O.toLowerCase()}`)},O))})]})]}):void 0,(rs==null?void 0:rs.length)>1?h.jsxs(h.Fragment,{children:[h.jsx($e,{children:t("create_vector_database_card.provider")}),h.jsxs(Zn,{value:s,onValueChange:m,children:[h.jsx(In,{className:"w-full mb-4",children:h.jsx(Jn,{placeholder:t("create_vector_database_card.provider_select_placeholder")})}),h.jsx(Dn,{children:Object.values(rs).map(O=>h.jsx(Rt,{value:O,children:t(`create_vector_database_card.providers.${O.toLowerCase()}`)},O))})]})]}):void 0,h.jsx($e,{children:t("create_vector_database_card.text_splitter")}),h.jsxs(Zn,{value:d.type,onValueChange:b,children:[h.jsx(In,{className:"w-full mb-4",children:h.jsx(Jn,{placeholder:t("create_vector_database_card.text_splitter_select_placeholder")})}),h.jsx(Dn,{children:Object.values(KU).map(O=>h.jsx(Rt,{value:O,children:t(`create_vector_database_card.text_splitters.${O.toLowerCase()}`)},O))})]}),d.type?h.jsxs(ft,{children:[h.jsx(Bt,{children:h.jsx(Zt,{children:t("create_vector_database_card.text_splitter_configuration")})}),h.jsxs($t,{children:[h.jsx($e,{children:t("create_vector_database_card.text_splitter_chunksize")}),h.jsx(Tn,{value:d.chunkSize,onChange:_,placeholder:t("create_vector_database_card.text_splitter_chunksize_placeholder")}),h.jsx($e,{children:t("create_vector_database_card.text_splitter_chunkoverlap")}),h.jsx(Tn,{value:d.chunkOverlap,onChange:x,placeholder:t("create_vector_database_card.text_splitter_chunkoverlap_placeholder")})]})]}):void 0]})}),h.jsx(Nr,{className:"flex justify-between",children:h.jsx(qn,{disabled:!d.type||!i,loading:f,onClick:j,className:"w-full",children:t("create_vector_database_card.create")})})]})}),JU=e=>v.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"512.000000pt",height:"512.000000pt",viewBox:"64 64 384.000000 384.000000",preserveAspectRatio:"xMidYMid meet",fill:"#000000",...e},v.createElement("g",{transform:"translate(0.000000,512.000000) scale(0.100000,-0.100000)",stroke:"none"},v.createElement("path",{d:"M1953 3948 c-13 -21 -16 -289 -4 -369 15 -97 39 -193 62 -247 l18 -42 -69 -133 -69 -132 32 -22 c18 -12 40 -25 49 -28 24 -9 13 -25 -18 -25 -13 0 -24 -4 -24 -9 0 -13 40 -60 61 -71 10 -6 107 -15 215 -21 175 -9 198 -8 214 6 10 9 33 18 51 21 31 4 40 -1 92 -52 64 -63 70 -88 25 -114 -22 -12 -33 -12 -58 -3 -34 13 -41 0 -9 -17 24 -13 73 -5 89 15 10 12 17 11 43 -6 41 -24 59 -24 88 2 l24 20 -28 -17 c-26 -16 -31 -16 -62 -1 -58 27 -55 54 11 120 65 65 90 71 145 34 31 -20 41 -21 114 -15 44 4 129 10 190 14 107 6 110 7 142 39 39 39 42 55 8 55 -37 0 -31 17 14 40 22 11 42 24 46 30 7 11 -13 51 -90 184 -54 95 -54 95 -39 131 8 20 27 84 41 143 24 95 27 126 28 284 0 125 -4 180 -12 189 -30 30 -262 -126 -372 -250 l-62 -70 -42 16 c-67 25 -247 28 -332 6 l-70 -19 -86 86 c-96 96 -180 160 -272 207 -70 37 -73 38 -84 21z m1117 -261 c0 -2 -9 -14 -20 -27 -11 -13 -20 -19 -20 -15 0 5 7 17 17 27 15 17 23 22 23 15z m-830 -97 c6 -11 7 -20 2 -20 -6 0 -12 9 -15 20 -3 11 -3 20 -1 20 2 0 8 -9 14 -20z m744 -15 c-9 -14 -18 -25 -21 -25 -5 0 5 18 20 38 17 22 18 13 1 -13z m-654 -534 c0 -27 4 -61 10 -75 8 -21 7 -26 -6 -26 -38 0 -100 67 -119 128 -6 21 -4 22 54 22 l61 0 0 -49z m700 39 c0 -44 -80 -140 -117 -140 -12 0 -14 7 -9 31 3 17 6 51 6 75 l0 44 60 0 c35 0 60 -4 60 -10z m-587 -35 c15 -14 27 -30 27 -34 0 -18 -42 -60 -69 -69 -29 -10 -30 -10 -20 14 5 14 9 45 9 70 0 51 12 56 53 19z m411 -37 c3 -34 4 -64 1 -66 -15 -15 -85 53 -85 82 0 7 61 46 71 46 3 0 9 -28 13 -62z"}),v.createElement("path",{d:"M1590 3717 c0 -2 15 -16 33 -33 l32 -29 -29 33 c-28 30 -36 37 -36 29z"}),v.createElement("path",{d:"M1723 2863 c26 -2 68 -2 95 0 26 2 4 3 -48 3 -52 0 -74 -1 -47 -3z"}),v.createElement("path",{d:"M3403 2863 c31 -2 83 -2 115 0 31 2 5 3 -58 3 -63 0 -89 -1 -57 -3z"}),v.createElement("path",{d:"M3258 2853 c6 -2 18 -2 25 0 6 3 1 5 -13 5 -14 0 -19 -2 -12 -5z"}),v.createElement("path",{d:"M2010 2830 c4 -8 20 -26 35 -40 l27 -25 -24 -6 c-16 -4 -7 -7 32 -13 58 -7 245 20 305 44 30 12 30 12 7 21 -23 9 -190 25 -324 32 -57 2 -65 1 -58 -13z"}),v.createElement("path",{d:"M3165 2844 c-148 -9 -306 -28 -293 -35 8 -6 -3 -9 -32 -10 -39 -1 -36 -3 25 -11 39 -5 79 -13 90 -18 33 -15 173 -32 197 -24 13 4 37 7 53 7 29 0 29 0 3 4 -33 5 -35 14 -7 39 29 26 44 55 27 52 -7 -1 -35 -3 -63 -4z"}),v.createElement("path",{d:"M2300 2749 c-63 -10 -130 -19 -147 -20 -37 -3 -40 -7 -17 -24 14 -9 -3 -19 -100 -60 -63 -27 -114 -51 -112 -53 3 -2 57 19 121 47 l117 50 41 -30 c51 -37 105 -61 121 -53 6 3 -11 -14 -39 -38 -172 -148 -266 -262 -325 -392 -16 -35 -36 -66 -45 -70 -9 -3 -55 -6 -102 -6 -94 0 -130 -16 -158 -70 -20 -39 -19 -80 10 -341 32 -287 32 -264 -5 -242 -56 33 -110 97 -139 168 -43 104 -99 136 -175 100 -122 -58 -74 -289 92 -450 65 -63 155 -118 231 -140 l59 -18 6 -56 c4 -31 15 -71 26 -89 39 -64 1 -62 962 -62 848 0 874 1 905 20 61 37 61 34 119 556 58 521 58 539 12 581 -44 40 -62 43 -242 43 l-176 0 -40 82 c-73 146 -155 247 -294 356 l-77 61 43 22 c23 12 60 33 81 47 32 21 41 23 63 13 36 -16 44 -13 12 5 -32 17 -36 31 -10 37 9 3 -2 5 -24 6 -23 0 -77 7 -120 15 -90 16 -164 26 -164 21 0 -2 31 -13 70 -25 63 -20 69 -23 60 -41 -23 -42 -111 -99 -194 -124 -99 -30 -148 -31 -236 -5 -73 22 -182 87 -200 119 -12 23 -15 21 85 60 59 24 54 24 -95 0z m1414 -684 c35 -23 56 -65 56 -112 1 -65 -91 -906 -103 -947 -7 -22 -24 -48 -40 -60 -28 -21 -34 -21 -900 -24 -851 -2 -873 -2 -904 17 -18 11 -39 30 -47 43 -15 23 -39 208 -71 538 -9 85 -22 211 -30 280 -22 184 -21 194 19 238 34 37 35 37 133 43 54 4 494 6 979 4 823 -2 883 -4 908 -20z"}),v.createElement("path",{d:"M1973 2743 c9 -2 23 -2 30 0 6 3 -1 5 -18 5 -16 0 -22 -2 -12 -5z"}),v.createElement("path",{d:"M3263 2743 c9 -2 23 -2 30 0 6 3 -1 5 -18 5 -16 0 -22 -2 -12 -5z"}),v.createElement("path",{d:"M1908 2733 c6 -2 18 -2 25 0 6 3 1 5 -13 5 -14 0 -19 -2 -12 -5z"}),v.createElement("path",{d:"M2435 2730 c-3 -5 -1 -10 4 -10 6 0 11 5 11 10 0 6 -2 10 -4 10 -3 0 -8 -4 -11 -10z"}),v.createElement("path",{d:"M3328 2733 c6 -2 18 -2 25 0 6 3 1 5 -13 5 -14 0 -19 -2 -12 -5z"}),v.createElement("path",{d:"M1848 2723 c6 -2 18 -2 25 0 6 3 1 5 -13 5 -14 0 -19 -2 -12 -5z"}),v.createElement("path",{d:"M3383 2723 c9 -2 23 -2 30 0 6 3 -1 5 -18 5 -16 0 -22 -2 -12 -5z"}),v.createElement("path",{d:"M1798 2713 c6 -2 18 -2 25 0 6 3 1 5 -13 5 -14 0 -19 -2 -12 -5z"}),v.createElement("path",{d:"M3438 2713 c7 -3 16 -2 19 1 4 3 -2 6 -13 5 -11 0 -14 -3 -6 -6z"}),v.createElement("path",{d:"M1738 2703 c6 -2 18 -2 25 0 6 3 1 5 -13 5 -14 0 -19 -2 -12 -5z"}),v.createElement("path",{d:"M3488 2703 c7 -3 16 -2 19 1 4 3 -2 6 -13 5 -11 0 -14 -3 -6 -6z"}),v.createElement("path",{d:"M1688 2693 c6 -2 18 -2 25 0 6 3 1 5 -13 5 -14 0 -19 -2 -12 -5z"}),v.createElement("path",{d:"M3538 2693 c7 -3 16 -2 19 1 4 3 -2 6 -13 5 -11 0 -14 -3 -6 -6z"}),v.createElement("path",{d:"M3170 2660 c8 -5 20 -10 25 -10 6 0 3 5 -5 10 -8 5 -19 10 -25 10 -5 0 -3 -5 5 -10z"}),v.createElement("path",{d:"M3230 2635 c14 -8 30 -14 35 -14 6 0 -1 6 -15 14 -14 8 -29 14 -35 14 -5 0 1 -6 15 -14z"}),v.createElement("path",{d:"M3349 2584 c41 -19 76 -33 78 -31 4 5 -133 67 -145 66 -4 0 26 -16 67 -35z"}),v.createElement("path",{d:"M1860 2570 c-8 -5 -10 -10 -5 -10 6 0 17 5 25 10 8 5 11 10 5 10 -5 0 -17 -5 -25 -10z"}),v.createElement("path",{d:"M1764 2524 c-18 -14 -18 -14 6 -3 31 14 36 19 24 19 -6 0 -19 -7 -30 -16z"}),v.createElement("path",{d:"M3470 2530 c8 -5 20 -10 25 -10 6 0 3 5 -5 10 -8 5 -19 10 -25 10 -5 0 -3 -5 5 -10z"})));function eq({data:e}){const{t}=je("components");return h.jsxs(Ol,{className:"w-full",children:[h.jsx(El,{children:h.jsx(po,{children:h.jsx(fi,{children:t("add_text_data.text")})})}),h.jsx(Sl,{children:e==null?void 0:e.map((n,r)=>h.jsx(po,{children:h.jsx(hi,{className:"p-4",children:n.text})},`${n.text}_${r}`))})]})}const tq=v.memo(e=>{const{id:t}=e,{t:n}=je("components"),[r,o]=v.useState([]),[i,a]=v.useState(""),s=jt(t),{createCSVData:c,loading:l}=NO(),u=()=>{o(p=>[...p,{text:i}]),a("")},d=async()=>{s&&await c(s,["text"],r.map(p=>[p.text]))};return h.jsxs(ft,{className:"mw-full",children:[h.jsx(Bt,{children:h.jsx(Zt,{children:n("add_text_data.title")})}),h.jsxs($t,{children:[h.jsxs("div",{className:"flex flex-col space-y-1.5 mt-3",children:[h.jsx($e,{htmlFor:"name",children:n("add_text_data.text")}),h.jsx(lr,{value:i,onChange:p=>a(p.target.value||""),placeholder:n("add_text_data.text_placeholder")})]}),h.jsx("div",{className:"w-full flex mt-4 justify-end",children:h.jsx(vt,{disabled:!i,onClick:u,className:"w-40",children:n("add_text_data.add")})}),h.jsx(eq,{data:r||[]})]}),h.jsx(Nr,{className:"flex justify-between",children:h.jsx(qn,{loading:l,disabled:!(r!=null&&r.length),onClick:d,className:"w-full",children:n("add_text_data.create")})})]})});var dr=(e=>(e.ADD_LLM="ADD_LLM",e.ADD_PROMPT="ADD_PROMPT",e.ADD_TOOL_DEFINITION="ADD_TOOL_DEFINITION",e.ADD_SCHEMA="ADD_SCHEMA",e.ADD_FEW_SHOT_EXAMPLE="ADD_FEW_SHOT_EXAMPLE",e.ADD_VECTOR_DATABASE="ADD_VECTOR_DATABASE",e.ADD_TEXT_DATA="ADD_TEXT_DATA",e))(dr||{});const nq=["ADD_LLM","ADD_PROMPT","ADD_SCHEMA","ADD_VECTOR_DATABASE",{key:"more",label:"more",icon:"ellipsis",children:["ADD_TOOL_DEFINITION","ADD_FEW_SHOT_EXAMPLE"]}],rq=()=>{const e="_coolMode_effect",t=document.getElementById(e);if(t)return t;const n=document.createElement("div");return n.setAttribute("id",e),n.setAttribute("style","overflow:hidden; position:fixed; height:100%; top:0; left:0; right:0; bottom:0; pointer-events:none; z-index:2147483647"),document.body.appendChild(n),n};let kO=0;const oq=(e,t)=>{kO++;const n=(t==null?void 0:t.particle)||"circle",r=[15,20,25,35,45],o=45;let i=[],a=!1,s=0,c=0;const l=rq();function u(){const E=(t==null?void 0:t.size)||r[Math.floor(Math.random()*r.length)],M=(t==null?void 0:t.speedHorz)||Math.random()*10,N=(t==null?void 0:t.speedUp)||Math.random()*25,A=Math.random()*360,P=Math.random()*35*(Math.random()<=.5?-1:1),T=c-E/2,L=s-E/2,S=Math.random()<=.5?-1:1,C=document.createElement("div");if(n==="circle"){const k="http://www.w3.org/2000/svg",D=document.createElementNS(k,"svg"),R=document.createElementNS(k,"circle");R.setAttributeNS(null,"cx",(E/2).toString()),R.setAttributeNS(null,"cy",(E/2).toString()),R.setAttributeNS(null,"r",(E/2).toString()),R.setAttributeNS(null,"fill",`hsl(${Math.random()*360}, 70%, 50%)`),D.appendChild(R),D.setAttribute("width",E.toString()),D.setAttribute("height",E.toString()),C.appendChild(D)}else C.innerHTML=`<img src="${n}" width="${E}" height="${E}" style="border-radius: 50%">`;C.style.position="absolute",C.style.transform=`translate3d(${L}px, ${T}px, 0px) rotate(${A}deg)`,l.appendChild(C),i.push({direction:S,element:C,left:L,size:E,speedHorz:M,speedUp:N,spinSpeed:P,spinVal:A,top:T})}function d(){i.forEach(E=>{E.left=E.left-E.speedHorz*E.direction,E.top=E.top-E.speedUp,E.speedUp=Math.min(E.size,E.speedUp-1),E.spinVal=E.spinVal+E.spinSpeed,E.top>=Math.max(window.innerHeight,document.body.clientHeight)+E.size&&(i=i.filter(M=>M!==E),E.element.remove()),E.element.setAttribute("style",["position:absolute","will-change:transform",`top:${E.top}px`,`left:${E.left}px`,`transform:rotate(${E.spinVal}deg)`].join(";"))})}let p,f=0;const y=30;function m(){const E=performance.now();a&&i.length<o&&E-f>y&&(u(),f=E),d(),p=requestAnimationFrame(m)}m();const g="ontouchstart"in window,b=g?"touchstart":"mousedown",w=g?"touchend":"mouseup",_=g?"touchmove":"mousemove",x=E=>{var M,N;"touches"in E?(s=(M=E.touches)==null?void 0:M[0].clientX,c=(N=E.touches)==null?void 0:N[0].clientY):(s=E.clientX,c=E.clientY)},j=E=>{x(E),a=!0},O=()=>{a=!1};return e.addEventListener(_,x,{passive:!0}),e.addEventListener(b,j,{passive:!0}),e.addEventListener(w,O,{passive:!0}),e.addEventListener("mouseleave",O,{passive:!0}),()=>{e.removeEventListener(_,x),e.removeEventListener(b,j),e.removeEventListener(w,O),e.removeEventListener("mouseleave",O);const E=setInterval(()=>{p&&i.length===0&&(cancelAnimationFrame(p),clearInterval(E),--kO===0&&l.remove())},500)}},iq=({children:e,options:t})=>{const n=v.useRef(null);return v.useEffect(()=>{if(n.current)return oq(n.current,t)},[t]),$.cloneElement(e,{ref:n})},aq=v.memo(e=>{const{t}=je("flows"),n=Lk(s=>s.theme),[r,o]=v.useState(`${dr.ADD_LLM}`),i=v.useMemo(()=>h.jsxs(Qx,{children:[h.jsx(Gp,{children:h.jsx(iq,{children:h.jsx(vt,{variant:"link",className:"!p-0 !pl-3",children:h.jsx(JU,{width:32,height:32,className:re(n==="dark"?"fill-white":"fill-black")})})})}),nq.map(s=>typeof s=="object"?h.jsxs(Gp,{children:[h.jsx(Kp,{children:s.icon?h.jsx(ge,{name:s.icon}):t(`supported_nodes.${s.label}`)}),h.jsx(Yx,{children:s.children.map(c=>h.jsx(Gx,{onClick:()=>o(c),children:t(`supported_nodes.${c.toLowerCase()}`)},c))})]},s.key):h.jsx(Gp,{children:h.jsx(Kp,{value:s,onClick:()=>o(s),children:t(`supported_nodes.${s.toLowerCase()}`)})},s))]}),[t,n]),a=v.useMemo(()=>{switch(r){case dr.ADD_LLM:return h.jsx(_U,{...e});case dr.ADD_PROMPT:return h.jsx(EU,{...e});case dr.ADD_SCHEMA:return h.jsx(UU,{...e});case dr.ADD_FEW_SHOT_EXAMPLE:return h.jsx(XU,{...e});case dr.ADD_TOOL_DEFINITION:return h.jsx(YU,{...e});case dr.ADD_VECTOR_DATABASE:return h.jsx(ZU,{...e});case dr.ADD_TEXT_DATA:return h.jsx(tq,{...e})}},[e,r]);return h.jsxs(h.Fragment,{children:[i,h.jsx("div",{className:"mt-4",children:a})]})}),sq=Md("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),pr=v.forwardRef(({className:e,variant:t,...n},r)=>h.jsx("div",{ref:r,role:"alert",className:re(sq({variant:t}),e),...n}));pr.displayName="Alert";const fr=v.forwardRef(({className:e,...t},n)=>h.jsx("h5",{ref:n,className:re("mb-1 font-medium leading-none tracking-tight",e),...t}));fr.displayName="AlertTitle";const mi=v.forwardRef(({className:e,...t},n)=>h.jsx("div",{ref:n,className:re("text-sm [&_p]:leading-relaxed",e),...t}));mi.displayName="AlertDescription";const Vt=v.memo(({id:e,className:t})=>{const{t:n}=je("common"),r=ve(s=>s.updateNodes),o=ve(s=>s.updateEdges),{toast:i}=on(),a=v.useCallback(async()=>{await ue("FlowNode").delete(e);const s=await ue("FlowEdge").find({where:[{source:e},{target:e}]});await Promise.all(s.map(c=>ue("FlowEdge").delete(c.id))),await r([{id:e,type:"remove"}]),await o(s.map(c=>({id:c.id,type:"remove"}))),i({description:n("deleted")})},[e,r,o,i,n]);return h.jsx("div",{className:re("absolute z-10 right-0 top-0 w-10 h-10",t),children:h.jsx(vt,{className:"!rounded-none !px-2",onClick:a,variant:"ghost",children:h.jsx(ge,{name:"trash-2",size:16})})})}),_h=({className:e,size:t=200,duration:n=15,anchor:r=90,borderWidth:o=1.5,colorFrom:i="#ffaa40",colorTo:a="#9c40ff",delay:s=0})=>h.jsx("div",{style:{"--size":t,"--duration":n,"--anchor":r,"--border-width":o,"--color-from":i,"--color-to":a,"--delay":`-${s}s`},className:re("pointer-events-none absolute inset-0 rounded-[inherit] [border:calc(var(--border-width)*1px)_solid_transparent]","![mask-clip:padding-box,border-box] ![mask-composite:intersect] [mask:linear-gradient(transparent,transparent),linear-gradient(white,white)]","after:absolute after:aspect-square after:w-[calc(var(--size)*1px)] after:animate-border-beam after:[animation-delay:var(--delay)] after:[background:linear-gradient(to_left,var(--color-from),var(--color-to),transparent)] after:[offset-anchor:calc(var(--anchor)*1%)_50%] after:[offset-path:rect(0_auto_auto_0_round_calc(var(--size)*1px))]",e)}),De=v.memo(e=>{const{className:t,...n}=e;return h.jsx(Ra,{className:re("!w-2 !h-2 !border-none !rounded-full !bg-slate-700",e.position===oe.Top?"!top-[-2px]":"",t),...n})}),cq=()=>{const e=It(a=>{var s;return(s=a.currentSession)==null?void 0:s.id}),[t,n]=v.useState(!1),r=ve(a=>a.createOrUpdateFlowNode),o=ve(a=>a.createOrUpdateFlowEdge),i=v.useCallback(async(a,s)=>{var c,l,u,d,p;n(!0);try{const f=(c=a.data)==null?void 0:c.entity;if(!f||!e)throw new Error("LLM or Session not found");const y=await((d=(u=(l=s==null?void 0:s.connectedNodes)==null?void 0:l.find(x=>x.type===G.Schema))==null?void 0:u.data)==null?void 0:d.entity),m=a.position.x,g=a.position.y+(((p=a.measured)==null?void 0:p.height)||0),b=await ue("Thread").save({initial_llm_id:f.id,title:`New thread with ${f.name}`,status:pc.Started,messages:[],session_id:e,schema_id:y==null?void 0:y.id}),w=await r({source_id:b.id,source_type:"Thread",node_type:G.Thread,x:m,y:g+60});if(!w)throw new Error("Failed to create thread node");const _=await o({source:a.id,target:w.id});return{thread:b,flowNode:w,flowEdge:_}}finally{n(!1)}},[o,r,e]);return{loading:t,createThread:i}},lq=(e,t)=>{var x;const{t:n}=je("flows"),{toast:r}=on(),[o,i]=v.useState(!1),[a,s]=v.useState(!1),c=jt(e),l=An(j=>j.loadModel),{createThread:u,loading:d}=cq(),p=ve(j=>j.updateNodes),f=ve(j=>j.pushSyncNodeQueue),{getNode:y,getNodes:m,getHandleConnections:g}=Fn(),b=v.useCallback(async()=>{try{if(s(!0),t.entity.id){const j=await ue("Thread").find({where:{initial_llm_id:t.entity.id}});f("Thread",{where:{source_type:"Thread",source_id:ao(j.map(O=>O.id))}})}}finally{s(!1)}},[(x=t==null?void 0:t.entity)==null?void 0:x.id,f]),w=v.useCallback(async()=>{try{if(i(!0),t.entity&&c){await(l==null?void 0:l(`${t.entity.name}`));const j=m().filter(O=>O.type===G.LLM).map(O=>(O.data.status=nt.Started,{id:O.id,type:"replace",item:O}));c.data.status=nt.Loading,j.push({id:e,type:"replace",item:c}),p(j),await b()}}catch(j){console.warn(j),r({variant:"destructive",description:n("llm_node.errors.loading_model")})}finally{i(!1)}},[t.entity,m,e,l,c,b,n,r,p]),_=v.useCallback(async()=>{if(t.entity&&c){const j=g({type:"target",nodeId:c.id}).map(O=>y(O.source)).filter(Boolean);await(u==null?void 0:u(c,{connectedNodes:j}))}},[t.entity,c,g,u,y]);return{loadingModel:o,creatingThread:d,queringThreads:a,loadModel:w,createThread:_,queryThreads:b}},Ut=(e,t)=>{const[n,r]=v.useState(!1),[o,i]=v.useState([]),{deleteElements:a,getNode:s}=Fn();Kc({type:"target",nodeId:e,onConnect:l=>{l!=null&&l.length&&i(u=>[...u,...Xz(l)])}});const c=v.useCallback(async(l,u,d,p)=>{try{return await t({id:e,edgeId:l,source:u,target:d,connection:p})}catch{return{deleteEdgeId:l}}},[t,e]);v.useEffect(()=>{!(o!=null&&o.length)||n||(async()=>{try{r(!0);const l=[...o];i([]);const u=[],d=s(e);await Promise.all(l.map(async p=>{const f="edgeId"in p?p.edgeId:void 0,y=s(p.source);if(!y||!d)return;const m=await c(`${f}`,y,d,p);m!=null&&m.deleteEdgeId&&u.push(...Array.isArray(m.deleteEdgeId)?m.deleteEdgeId:[m.deleteEdgeId])})),u!=null&&u.length&&await a({edges:u.map(p=>({id:p}))})}finally{r(!1)}})()},[a,s,e,n,c,o])},uq=e=>{const t=v.useCallback(async()=>{},[]);Ut(e,t)},dq=v.memo(e=>{var m,g,b,w;const{id:t,data:n,isConnectable:r}=e,[o,i]=v.useState(),{t:a}=je("flows"),{createThread:s,loadModel:c,queringThreads:l,queryThreads:u,loadingModel:d}=lq(t,n);uq(t);const p=[nt.Loading,nt.Downloading].includes(n.status);v.useEffect(()=>{var _;o||!((_=n==null?void 0:n.entity)!=null&&_.name)||an(()=>import("./index-CBYutmqk.js").then(async x=>(await x.__tla,x)),__vite__mapDeps([0,1,2,3])).then(async({hasModelInCache:x,functionCallingModelIds:j,prebuiltAppConfig:O})=>{var M,N;const E=await x((M=n==null?void 0:n.entity)==null?void 0:M.name);i({hasCache:E,isFunctionCalling:j.includes((N=n==null?void 0:n.entity)==null?void 0:N.name),info:O.model_list.find(A=>{var P;return A.model_id===((P=n==null?void 0:n.entity)==null?void 0:P.name)})})})},[(m=n==null?void 0:n.entity)==null?void 0:m.name,o]);const f=v.useMemo(()=>{var _,x;switch(n.status){case nt.Downloading:return h.jsx(ge,{className:"animate-spin w-7 h-7",name:"arrow-big-down-dash"});case nt.Loaded:return h.jsx(Ka,{name:((_=n.entity)==null?void 0:_.name)||"brain",className:"w-7 h-7"});case nt.Loading:return h.jsx(ge,{className:"animate-spin w-7 h-7",name:"loader-circle"});default:return h.jsx(Ka,{name:((x=n.entity)==null?void 0:x.name)||"brain",className:"w-7 h-7"})}},[(g=n.entity)==null?void 0:g.name,n.status]),y=v.useMemo(()=>p?null:d?h.jsx(vt,{disabled:!0,className:"w-full mt-4",children:h.jsx(ge,{className:"animate-spin",size:24,name:"loader-circle"})}):n.status===nt.Loaded?h.jsx(vt,{onClick:s,className:"mt-4 w-full",children:a("llm_node.create_thread_button")}):h.jsxs("div",{className:"flex gap-2 mt-4",children:[o!=null&&o.hasCache?h.jsx(qn,{loading:l,onClick:u,children:h.jsx(ge,{size:24,name:"message-square-more"})}):null,h.jsx(vt,{disabled:d,onClick:c,className:"w-full",children:a(o!=null&&o.hasCache?"llm_node.load_model_button":"llm_node.download_model_button")})]}),[p,d,n.status,o==null?void 0:o.hasCache,l,u,c,a,s]);return h.jsxs("div",{children:[h.jsxs("div",{children:[h.jsx(Vt,{id:t}),h.jsxs(pr,{className:"flex justify-center",children:[f,h.jsxs("div",{className:"ml-2 pt-1 max-w-lg",children:[h.jsx(fr,{className:"flex gap-2 items-center pr-6",children:`${((b=n==null?void 0:n.entity)==null?void 0:b.name)||""}`}),h.jsx(mi,{className:"max-w-full",children:`${n.label||""}`}),h.jsx("div",{className:"max-w-full mt-2 flex-wrap flex gap-1",children:h.jsx(xl,{model:o==null?void 0:o.info,isFunctionCalling:(o==null?void 0:o.isFunctionCalling)||!1,name:(w=n==null?void 0:n.entity)==null?void 0:w.name,isCached:(o==null?void 0:o.hasCache)||!1})}),y]})]}),p?h.jsx(_h,{className:"rounded-lg"}):void 0]}),h.jsx(De,{type:"source",position:oe.Bottom,id:"a",isConnectable:r})]})});function pq({minHeight:e,maxHeight:t}){const n=v.useRef(null),r=v.useCallback(o=>{const i=n.current;if(!i)return;if(o){i.style.height=`${e}px`;return}i.style.height=`${e}px`;const a=Math.max(e,Math.min(i.scrollHeight,t??Number.POSITIVE_INFINITY));i.style.height=`${a}px`},[e,t]);return v.useEffect(()=>{const o=n.current;o&&(o.style.height=`${e}px`)},[e]),v.useEffect(()=>{const o=()=>r();return window.addEventListener("resize",o),()=>window.removeEventListener("resize",o)},[r]),{textareaRef:n,adjustHeight:r}}const fq=48,AO=164;function hq({onSubmit:e,disabled:t,enableTool:n,enableFile:r,placeholder:o}){const[i,a]=v.useState(!1),[s,c]=v.useState(""),{textareaRef:l,adjustHeight:u}=pq({minHeight:fq,maxHeight:AO}),[d,p]=v.useState(!0),f=async()=>{try{a(!0),await e(s)}finally{a(!1)}};return h.jsx("div",{className:"w-full py-4",children:h.jsx("div",{className:"relative max-w-xl w-full mx-auto",children:h.jsxs("div",{className:"relative flex flex-col",children:[h.jsx("div",{className:"overflow-y-auto",style:{maxHeight:`${AO}px`},children:h.jsx(lr,{id:"ai-input-04",value:s,disabled:t||i,placeholder:o,className:"w-full rounded-xl rounded-b-none px-4 py-3 bg-black/5 dark:bg-white/5 border-none dark:text-white placeholder:text-black/70 dark:placeholder:text-white/70 resize-none focus-visible:ring-0 leading-[1.2]",ref:l,onKeyDown:y=>{y.key==="Enter"&&!y.shiftKey&&(y.preventDefault(),f())},onChange:y=>{c(y.target.value),u()}})}),h.jsxs("div",{className:"h-12 bg-black/5 dark:bg-white/5 rounded-b-xl",children:[h.jsxs("div",{className:"absolute left-3 bottom-3 flex items-center gap-2",children:[r?h.jsxs("label",{className:"cursor-pointer rounded-lg p-2 bg-black/5 dark:bg-white/5",children:[h.jsx("input",{type:"file",className:"hidden"}),h.jsx(ge,{name:"paperclip",className:"w-4 h-4 text-black/40 dark:text-white/40 hover:text-black dark:hover:text-white transition-colors"})]}):void 0,n?h.jsxs("button",{type:"button",onClick:()=>{p(!d)},className:re("rounded-full transition-all flex items-center gap-2 px-1.5 py-1 border h-8",d?"bg-sky-500/15 border-sky-400 text-sky-500":"bg-black/5 dark:bg-white/5 border-transparent text-black/40 dark:text-white/40 hover:text-black dark:hover:text-white"),children:[h.jsx("div",{className:"w-4 h-4 flex items-center justify-center flex-shrink-0",children:h.jsx(Td.div,{animate:{rotate:d?180:0,scale:d?1.1:1},whileHover:{rotate:d?180:15,scale:1.1,transition:{type:"spring",stiffness:300,damping:10}},transition:{type:"spring",stiffness:260,damping:25},children:h.jsx(ge,{name:"globe",className:re("w-4 h-4",d?"text-sky-500":"text-inherit")})})}),h.jsx(uA,{children:d&&h.jsx(Td.span,{initial:{width:0,opacity:0},animate:{width:"auto",opacity:1},exit:{width:0,opacity:0},transition:{duration:.2},className:"text-sm overflow-hidden whitespace-nowrap text-sky-500 flex-shrink-0",children:"Search"})})]}):void 0]}),h.jsx("div",{className:"absolute right-3 bottom-3",children:h.jsx("button",{type:"button",disabled:t||i,onClick:f,className:re("rounded-lg p-2",s?"bg-sky-500/15 text-sky-500":"bg-black/5 dark:bg-white/5 text-black/40 dark:text-white/40 hover:text-black dark:hover:text-white"),children:h.jsx(ge,{name:"send",className:"w-4 h-4"})})})]})]})})})}const jh=v.memo(({tags:e,disabled:t,loading:n,onSubmit:r})=>{const{t:o}=je("components"),i=async a=>{try{return await r(a),!0}catch{return!1}};return h.jsxs(ft,{className:"min-w-80",children:[h.jsx(Bt,{children:h.jsx(Zt,{children:o("add_message_card.title")})}),h.jsxs($t,{children:[h.jsx("div",{className:"grid w-full gap-1.5",children:h.jsx(hq,{onSubmit:i,disabled:t||n,placeholder:o("add_message_card.placeholder")})}),e?h.jsx("div",{className:"mt-2 gap-1 flex flex-wrap",children:e}):null]})]})});class mq extends Yde{get lc_attributes(){return{partialVariables:void 0}}constructor(t){super(t),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompts",this._getPromptType()]}),Object.defineProperty(this,"inputVariables",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputParser",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"partialVariables",{enumerable:!0,configurable:!0,writable:!0,value:void 0});const{inputVariables:n}=t;if(n.includes("stop"))throw new Error("Cannot have an input variable named 'stop', as it is used internally, please rename.");Object.assign(this,t)}async mergePartialAndUserVariables(t){const n=this.partialVariables??{},r={};for(const[o,i]of Object.entries(n))typeof i=="string"?r[o]=i:r[o]=await i();return{...r,...t}}async invoke(t,n){return this._callWithConfig(r=>this.formatPromptValue(r),t,{...n,runType:"prompt"})}serialize(){throw new Error("Use .toJSON() instead")}static async deserialize(t){switch(t._type){case"prompt":{const{PromptTemplate:n}=await an(async()=>{const{PromptTemplate:r}=await Promise.resolve().then(()=>VO);return{PromptTemplate:r}},void 0);return n.deserialize(t)}case void 0:{const{PromptTemplate:n}=await an(async()=>{const{PromptTemplate:r}=await Promise.resolve().then(()=>VO);return{PromptTemplate:r}},void 0);return n.deserialize({...t,_type:"prompt"})}case"few_shot":{const{FewShotPromptTemplate:n}=await an(async()=>{const{FewShotPromptTemplate:r}=await import("./few_shot-62GkyvOi.js").then(async o=>(await o.__tla,o));return{FewShotPromptTemplate:r}},__vite__mapDeps([4,1,2,3]));return n.deserialize(t)}default:throw new Error(`Invalid prompt type in config: ${t._type}`)}}}class yq extends Gde{}class gq extends yq{static lc_name(){return"StringPromptValue"}constructor(t){super({value:t}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompt_values"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.value=t}toString(){return this.value}toChatMessages(){return[new Cd(this.value)]}}fv=class extends mq{async formatPromptValue(e){const t=await this.format(e);return new gq(t)}};var vq=Object.prototype.toString,yi=Array.isArray||function(e){return vq.call(e)==="[object Array]"};function Oh(e){return typeof e=="function"}function bq(e){return yi(e)?"array":typeof e}function Eh(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function TO(e,t){return e!=null&&typeof e=="object"&&t in e}function xq(e,t){return e!=null&&typeof e!="object"&&e.hasOwnProperty&&e.hasOwnProperty(t)}var wq=RegExp.prototype.test;function _q(e,t){return wq.call(e,t)}var jq=/\S/;function Oq(e){return!_q(jq,e)}var Eq={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function Sq(e){return String(e).replace(/[&<>"'`=\/]/g,function(t){return Eq[t]})}var Mq=/\s*/,Cq=/\s+/,IO=/\s*=/,Pq=/\s*\}/,Nq=/#|\^|\/|>|\{|&|=|!/;function kq(e,t){if(!e)return[];var n=!1,r=[],o=[],i=[],a=!1,s=!1,c="",l=0;function u(){if(a&&!s)for(;i.length;)delete o[i.pop()];else i=[];a=!1,s=!1}var d,p,f;function y(M){if(typeof M=="string"&&(M=M.split(Cq,2)),!yi(M)||M.length!==2)throw new Error("Invalid tags: "+M);d=new RegExp(Eh(M[0])+"\\s*"),p=new RegExp("\\s*"+Eh(M[1])),f=new RegExp("\\s*"+Eh("}"+M[1]))}y(t||qt.tags);for(var m=new is(e),g,b,w,_,x,j;!m.eos();){if(g=m.pos,w=m.scanUntil(d),w)for(var O=0,E=w.length;O<E;++O)_=w.charAt(O),Oq(_)?(i.push(o.length),c+=_):(s=!0,n=!0,c+=" "),o.push(["text",_,g,g+1]),g+=1,_===`
`&&(u(),c="",l=0,n=!1);if(!m.scan(d))break;if(a=!0,b=m.scan(Nq)||"name",m.scan(Mq),b==="="?(w=m.scanUntil(IO),m.scan(IO),m.scanUntil(p)):b==="{"?(w=m.scanUntil(f),m.scan(Pq),m.scanUntil(p),b="&"):w=m.scanUntil(p),!m.scan(p))throw new Error("Unclosed tag at "+m.pos);if(b==">"?x=[b,w,g,m.pos,c,l,n]:x=[b,w,g,m.pos],l++,o.push(x),b==="#"||b==="^")r.push(x);else if(b==="/"){if(j=r.pop(),!j)throw new Error('Unopened section "'+w+'" at '+g);if(j[1]!==w)throw new Error('Unclosed section "'+j[1]+'" at '+g)}else b==="name"||b==="{"||b==="&"?s=!0:b==="="&&y(w)}if(u(),j=r.pop(),j)throw new Error('Unclosed section "'+j[1]+'" at '+m.pos);return Tq(Aq(o))}function Aq(e){for(var t=[],n,r,o=0,i=e.length;o<i;++o)n=e[o],n&&(n[0]==="text"&&r&&r[0]==="text"?(r[1]+=n[1],r[3]=n[3]):(t.push(n),r=n));return t}function Tq(e){for(var t=[],n=t,r=[],o,i,a=0,s=e.length;a<s;++a)switch(o=e[a],o[0]){case"#":case"^":n.push(o),r.push(o),n=o[4]=[];break;case"/":i=r.pop(),i[5]=o[2],n=r.length>0?r[r.length-1][4]:t;break;default:n.push(o)}return t}function is(e){this.string=e,this.tail=e,this.pos=0}is.prototype.eos=function(){return this.tail===""},is.prototype.scan=function(e){var t=this.tail.match(e);if(!t||t.index!==0)return"";var n=t[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n},is.prototype.scanUntil=function(e){var t=this.tail.search(e),n;switch(t){case-1:n=this.tail,this.tail="";break;case 0:n="";break;default:n=this.tail.substring(0,t),this.tail=this.tail.substring(t)}return this.pos+=n.length,n};function gi(e,t){this.view=e,this.cache={".":this.view},this.parent=t}gi.prototype.push=function(e){return new gi(e,this)},gi.prototype.lookup=function(e){var t=this.cache,n;if(t.hasOwnProperty(e))n=t[e];else{for(var r=this,o,i,a,s=!1;r;){if(e.indexOf(".")>0)for(o=r.view,i=e.split("."),a=0;o!=null&&a<i.length;)a===i.length-1&&(s=TO(o,i[a])||xq(o,i[a])),o=o[i[a++]];else o=r.view[e],s=TO(r.view,e);if(s){n=o;break}r=r.parent}t[e]=n}return Oh(n)&&(n=n.call(this.view)),n};function Nt(){this.templateCache={_cache:{},set:function(e,t){this._cache[e]=t},get:function(e){return this._cache[e]},clear:function(){this._cache={}}}}Nt.prototype.clearCache=function(){typeof this.templateCache<"u"&&this.templateCache.clear()},Nt.prototype.parse=function(e,t){var n=this.templateCache,r=e+":"+(t||qt.tags).join(":"),o=typeof n<"u",i=o?n.get(r):void 0;return i==null&&(i=kq(e,t),o&&n.set(r,i)),i},Nt.prototype.render=function(e,t,n,r){var o=this.getConfigTags(r),i=this.parse(e,o),a=t instanceof gi?t:new gi(t,void 0);return this.renderTokens(i,a,n,e,r)},Nt.prototype.renderTokens=function(e,t,n,r,o){for(var i="",a,s,c,l=0,u=e.length;l<u;++l)c=void 0,a=e[l],s=a[0],s==="#"?c=this.renderSection(a,t,n,r,o):s==="^"?c=this.renderInverted(a,t,n,r,o):s===">"?c=this.renderPartial(a,t,n,o):s==="&"?c=this.unescapedValue(a,t):s==="name"?c=this.escapedValue(a,t,o):s==="text"&&(c=this.rawValue(a)),c!==void 0&&(i+=c);return i},Nt.prototype.renderSection=function(e,t,n,r,o){var i=this,a="",s=t.lookup(e[1]);function c(d){return i.render(d,t,n,o)}if(s){if(yi(s))for(var l=0,u=s.length;l<u;++l)a+=this.renderTokens(e[4],t.push(s[l]),n,r,o);else if(typeof s=="object"||typeof s=="string"||typeof s=="number")a+=this.renderTokens(e[4],t.push(s),n,r,o);else if(Oh(s)){if(typeof r!="string")throw new Error("Cannot use higher-order sections without the original template");s=s.call(t.view,r.slice(e[3],e[5]),c),s!=null&&(a+=s)}else a+=this.renderTokens(e[4],t,n,r,o);return a}},Nt.prototype.renderInverted=function(e,t,n,r,o){var i=t.lookup(e[1]);if(!i||yi(i)&&i.length===0)return this.renderTokens(e[4],t,n,r,o)},Nt.prototype.indentPartial=function(e,t,n){for(var r=t.replace(/[^ \t]/g,""),o=e.split(`
`),i=0;i<o.length;i++)o[i].length&&(i>0||!n)&&(o[i]=r+o[i]);return o.join(`
`)},Nt.prototype.renderPartial=function(e,t,n,r){if(n){var o=this.getConfigTags(r),i=Oh(n)?n(e[1]):n[e[1]];if(i!=null){var a=e[6],s=e[5],c=e[4],l=i;s==0&&c&&(l=this.indentPartial(i,c,a));var u=this.parse(l,o);return this.renderTokens(u,t,n,l,r)}}},Nt.prototype.unescapedValue=function(e,t){var n=t.lookup(e[1]);if(n!=null)return n},Nt.prototype.escapedValue=function(e,t,n){var r=this.getConfigEscape(n)||qt.escape,o=t.lookup(e[1]);if(o!=null)return typeof o=="number"&&r===qt.escape?String(o):r(o)},Nt.prototype.rawValue=function(e){return e[1]},Nt.prototype.getConfigTags=function(e){return yi(e)?e:e&&typeof e=="object"?e.tags:void 0},Nt.prototype.getConfigEscape=function(e){if(e&&typeof e=="object"&&!yi(e))return e.escape};var qt={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(e){as.templateCache=e},get templateCache(){return as.templateCache}},as=new Nt;qt.clearCache=function(){return as.clearCache()},qt.parse=function(e,t){return as.parse(e,t)},qt.render=function(e,t,n,r){if(typeof e!="string")throw new TypeError('Invalid template! Template should be a "string" but "'+bq(e)+'" was given as the first argument for mustache#render(template, view, partials)');return as.render(e,t,n,r)},qt.escape=Sq,qt.Scanner=is,qt.Context=gi,qt.Writer=Nt;function DO(){qt.escape=e=>e}let Sh,RO,LO,BO,$O,Ml,FO,zO;Sh=e=>{const t=e.split(""),n=[],r=(i,a)=>{for(let s=a;s<t.length;s+=1)if(i.includes(t[s]))return s;return-1};let o=0;for(;o<t.length;)if(t[o]==="{"&&o+1<t.length&&t[o+1]==="{")n.push({type:"literal",text:"{"}),o+=2;else if(t[o]==="}"&&o+1<t.length&&t[o+1]==="}")n.push({type:"literal",text:"}"}),o+=2;else if(t[o]==="{"){const i=r("}",o);if(i<0)throw new Error("Unclosed '{' in template.");n.push({type:"variable",name:t.slice(o+1,i).join("")}),o=i+1}else{if(t[o]==="}")throw new Error("Single '}' in template.");{const i=r("{}",o),a=(i<0?t.slice(o):t.slice(o,i)).join("");n.push({type:"literal",text:a}),o=i<0?t.length:i}}return n},RO=e=>e.map(t=>t[0]==="name"?{type:"variable",name:t[1].includes(".")?t[1].split(".")[0]:t[1]}:["#","&","^",">"].includes(t[0])?{type:"variable",name:t[1]}:{type:"literal",text:t[1]}),LO=e=>{DO();const t=qt.parse(e);return RO(t)},BO=(e,t)=>Sh(e).reduce((n,r)=>{if(r.type==="variable"){if(r.name in t)return n+t[r.name];throw new Error(`(f-string) Missing value for input ${r.name}`)}return n+r.text},""),$O=(e,t)=>(DO(),qt.render(e,t)),Ml={"f-string":BO,mustache:$O},FO={"f-string":Sh,mustache:LO},Do=(e,t,n)=>Ml[t](e,n),zO=(e,t)=>FO[t](e),hv=(e,t,n)=>{if(!(t in Ml)){const r=Object.keys(Ml);throw new Error(`Invalid template format. Got \`${t}\`;
                         should be one of ${r}`)}try{const r=n.reduce((o,i)=>(o[i]="foo",o),{});Array.isArray(e)?e.forEach(o=>{if(o.type==="text")Do(o.text,t,r);else if(o.type==="image_url")if(typeof o.image_url=="string")Do(o.image_url,t,r);else{const i=o.image_url.url;Do(i,t,r)}else throw new Error(`Invalid message template received. ${JSON.stringify(o,null,2)}`)}):Do(e,t,r)}catch(r){throw new Error(`Invalid prompt schema: ${r.message}`)}},Qr=class extends fv{static lc_name(){return"PromptTemplate"}constructor(e){if(super(e),Object.defineProperty(this,"template",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"templateFormat",{enumerable:!0,configurable:!0,writable:!0,value:"f-string"}),Object.defineProperty(this,"validateTemplate",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"additionalContentFields",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e.templateFormat==="mustache"&&e.validateTemplate===void 0&&(this.validateTemplate=!1),Object.assign(this,e),this.validateTemplate){if(this.templateFormat==="mustache")throw new Error("Mustache templates cannot be validated.");let t=this.inputVariables;this.partialVariables&&(t=t.concat(Object.keys(this.partialVariables))),hv(this.template,this.templateFormat,t)}}_getPromptType(){return"prompt"}async format(e){const t=await this.mergePartialAndUserVariables(e);return Do(this.template,this.templateFormat,t)}static fromExamples(e,t,n,r=`

`,o=""){const i=[o,...e,t].join(r);return new Qr({inputVariables:n,template:i})}static fromTemplate(e,t){const{templateFormat:n="f-string",...r}=t??{},o=new Set;return zO(e,n).forEach(i=>{i.type==="variable"&&o.add(i.name)}),new Qr({inputVariables:[...o],templateFormat:n,template:e,...r})}async partial(e){const t=this.inputVariables.filter(o=>!(o in e)),n={...this.partialVariables??{},...e},r={...this,inputVariables:t,partialVariables:n};return new Qr(r)}serialize(){if(this.outputParser!==void 0)throw new Error("Cannot serialize a prompt template with an output parser");return{_type:this._getPromptType(),input_variables:this.inputVariables,template:this.template,template_format:this.templateFormat}}static async deserialize(e){if(!e.template)throw new Error("Prompt template must have a template");return new Qr({inputVariables:e.input_variables,template:e.template,templateFormat:e.template_format})}};const VO=Object.freeze(Object.defineProperty({__proto__:null,PromptTemplate:Qr},Symbol.toStringTag,{value:"Module"})),UO=(e,t,n,r=[],o)=>{const i=e.map(a=>o.getNode(a));for(const a of i){if(!a)continue;const s=o.getHandleConnections({type:"target",nodeId:a.id});if(n.push(...s),a.type===G.Thread){r.push(a.id),t.push(a);continue}else if(a.type!==G.Message){r.push(a.id);continue}else if(r.includes(a.id))continue;r.push(a.id),t.push(a),s.length&&UO(s.map(c=>c.source),t,n,r,o)}return{nodes:t,connections:n}},Iq=(e,t)=>{const n=t.getHandleConnections({nodeId:e.id,type:"target"}).map(u=>{const d=t.getNode(u.source);return d?{connections:t.getHandleConnections({nodeId:d.id,type:"target"}),node:d}:void 0}),r=n.filter(u=>{var d;return((d=u.node)==null?void 0:d.type)===G.Prompt}),o=[];r!=null&&r.length&&r.forEach(u=>{var p;const d=(p=u.connections)==null?void 0:p.map(f=>t.getNode(f.source)).filter(Boolean);o.push({node:u.node,connections:u.connections,connectedNodes:d})});const i=n.filter(u=>{var d;return((d=u.node)==null?void 0:d.type)===G.ToolDefinition}),a=[];i!=null&&i.length&&i.forEach(u=>{var p;const d=(p=u.connections)==null?void 0:p.map(f=>t.getNode(f.source)).filter(Boolean);d!=null&&d.find(f=>f.type===G.Schema)&&a.push({node:u.node,connections:u.connections,connectedNodes:d})});const s=n.filter(u=>{var d;return((d=u.node)==null?void 0:d.type)===G.PlaceHolder}),c=[];s!=null&&s.length&&s.forEach(u=>{var p;const d=(p=u.connections)==null?void 0:p.map(f=>t.getNode(f.source)).filter(Boolean);d&&c.push({node:u.node,connections:u.connections,connectedNodes:d})});const l=n.find(u=>{var d;return((d=u.node)==null?void 0:d.type)===G.Schema});return{thread:e,schemas:l?[l]:[],prompts:o,tools:a,placeholders:c}},Dq=async(e,t)=>{let n="",r="",o;const i=[];await e;for await(const a of e)a&&(Array.isArray(a)?(i.push(...a.map(s=>s.content)),i!=null&&i.length&&(r=i.join(""),t==null||t({chunk:a,content:r}))):(n=typeof a=="object"&&"content"in a?`${a.content}`:`${a}`,t==null||t({chunk:a,content:n})),o=a);return{lastChunk:o,content:n}},Rq=()=>{const e=An(r=>r.toolsCallingStream),t=An(r=>r.structuredStream),n=An(r=>r.stream);return{stream:v.useCallback(async(r,{tools:o,schemas:i,onMessageUpdate:a,onMessageFinish:s})=>{var d,p,f,y;i&&(i==null?void 0:i.length)>1&&console.warn("Multiple schemas are not supported");let c;if(i!=null&&i.length){const m=(f=(p=(d=i==null?void 0:i[0])==null?void 0:d.node)==null?void 0:p.data)==null?void 0:f.entity;if(!((y=m==null?void 0:m.schema_items)!=null&&y.length))throw new Error("Schema is not found");c=t(m.schema_items,r)}else o!=null&&o.length?c=e(o.reduce((m,g)=>{var _,x,j,O,E;const b=(_=g.node.data)==null?void 0:_.entity,w=(O=(j=(x=g==null?void 0:g.connectedNodes)==null?void 0:x.find(M=>M.type===G.Schema))==null?void 0:j.data)==null?void 0:O.entity;return b&&((E=w==null?void 0:w.schema_items)!=null&&E.length)&&m.push({name:b.name,description:b.description,schemaItems:w.schema_items}),m},[]),r):c=n(r);if(!c)throw new Error("Stream is not supported");const{lastChunk:l,content:u}=await Dq(c,a);return s==null||s({content:u,lastChunk:l}),{lastChunk:l,content:u}},[n,t,e])}},qO=e=>{const t=[];return e.forEach(n=>{var i,a,s;const{node:r,connectedNodes:o}=n;if((i=r.data)!=null&&i.entity){if(r.type===G.Message){const c=r.data.entity;switch(c.role){case"human":t.push(new Cd(c.content));break;case"ai":t.push(new Ig(c.content));break}}else if(r.type===G.Prompt){const c=r.data.entity;let l=`${c.prefix?`${c.prefix}
`:""}`;if(c.type===Yt.FewShotExample){const u=(s=(a=o.find(d=>d.type===G.CSVData))==null?void 0:a.data)==null?void 0:s.entity;if(u){const{rows:d}=Bk(u.headers,u.csv);d.forEach(p=>{l+=`${c.content.replace(/{([^{}]*)}/g,(f,y)=>`${p[y]}`)}
`})}}else l+=c.content;switch(c.suffix&&(l+=`
${c.suffix}`),c.role){case"human":t.push(new Cd(l));break;case"system":t.push(new Kde(l));break;default:t.push(new Ig(l));break}}}}),t},Lq=(e,t)=>{const n=(e==null?void 0:e.filter(o=>o.type===G.Message).map(o=>({node:o,connectedNodes:[]})).reverse())||[],r=[];return t.forEach(async o=>{r.unshift({node:o.node,connectedNodes:o.connectedNodes||[]})}),{history:qO(n),systems:qO(r)}},HO=({getNode:e,getHandleConnections:t})=>{const{t:n}=je("create_new_message"),[r,o]=v.useState(!1),i=ve(y=>y.createOrUpdateFlowNode),a=ve(y=>y.createOrUpdateFlowEdge),s=Pd(y=>y.similaritySearchWithScore),c=An(y=>y.getCurrentModelInfo),{stream:l}=Rq(),u=v.useCallback(async({content:y,threadId:m,sourceId:g,initialX:b,initialY:w,initialLLMId:_})=>{const x=await ue("Message").save({thread_id:m,content:y,role:Qt.Human,status:er.Started,llm_id:_});if(!x)throw new Error("Failed to save message");const j=await i({source_id:x.id,source_type:"Message",node_type:G.Message,x:b,y:w+80});if(!j)throw new Error("Failed to save human message node");await a({source:g,target:j.id});const O=await ue("Message").save({thread_id:m,content:n("initial_ai_message"),role:Qt.AI,status:er.Inprogress,llm_id:_,parent_message_id:x.id});if(!O)throw new Error("Failed to save message");const E=await i({source_id:O.id,source_type:"Message",node_type:G.Message,x:b,y:w+250});if(!E)throw new Error("Failed to save ai message node");return await a({source:j.id,target:E.id}),{aiMessage:O,humanMessage:x,aiMessageNode:E,humanMessageNode:j}},[a,i,n]),d=v.useCallback(async(y,m)=>{const{placeholders:g}=m;if(!(g!=null&&g.length))return[];const b=[];return await Promise.all(g.map(async w=>{var x,j,O,E,M,N,A,P,T,L,S,C;const _=(x=w.node.data)==null?void 0:x.entity;if(_)switch(_.placeholder_type){case ma.VECTOR_DATABASE_RETREIVER:{const k=(j=w.connectedNodes)==null?void 0:j.find(H=>H.type===G.VectorDatabase),D=(O=k==null?void 0:k.data)==null?void 0:O.entity,R=(N=(M=(E=w.connectedNodes)==null?void 0:E.find(H=>H.type===G.Prompt))==null?void 0:M.data)==null?void 0:N.entity;if(!R||!D||!k)return;const B=(P=(A=t({nodeId:k.id,type:"target"}).map(H=>e(H.source)).find(H=>(H==null?void 0:H.type)&&[G.JSONLData,G.CSVData].includes(H==null?void 0:H.type)))==null?void 0:A.data)==null?void 0:P.entity;if(!B)return;const F=(T=_.metadata)!=null&&T.k?+((L=_.metadata)==null?void 0:L.k):1;let V=(S=_.metadata)!=null&&S.minimalScore?+((C=_.metadata)==null?void 0:C.minimalScore):void 0;V&&V>1&&(V=V/100);const I=await s({databaseId:D.id,dataSourceId:B.id,dataSourceType:Dg(B)},y.humanMessage.content,F);if(!I)return[];const X=new Qr({template:R.content,inputVariables:["context"]});b.push(new Ig(await X.format({context:V?I.filter(([,H])=>H>=V).map(([H])=>H.pageContent).join(`
`):I.map(([H])=>H.pageContent).join(`
`)})))}}})),b},[t,e,s]),p=v.useCallback(async(y,m,g,{onMessageUpdate:b})=>{const{prompts:w,tools:_,schemas:x,placeholders:j}=m,O=[];j!=null&&j.length&&O.push(...await d(y,m));const{history:E,systems:M}=Lq(g,w),N=[...M,...O,...E,new Cd(y.humanMessage.content)],{lastChunk:A,content:P}=await l(N,{tools:_,schemas:x,onMessageUpdate:({content:T})=>{b==null||b({id:y.aiMessageNode.id,nodeData:{loading:!0,content:T}})}});return y.aiMessage.content=P,y.aiMessage.metadata=JSON.stringify({message:A}),b==null||b({id:y.aiMessageNode.id,nodeData:{content:P,loading:!1,entity:y.aiMessage}}),y.aiMessage.id&&await ue("Message").update(y.aiMessage.id,{content:P,metadata:JSON.stringify({message:A})}),P},[d,l]),f=v.useCallback(async(y,m,g)=>{var O,E,M;const{nodes:b}=UO([y.id],[],[],[],{getNode:e,getHandleConnections:t}),w=b.find(N=>N.type===G.Thread),_=w==null?void 0:w.data.entity;if(!y||!_||!w)throw new Error("Source or thread is not found");if(!await c())throw new Error("Model is not loaded yet");const x=Iq(w,{getNode:e,getHandleConnections:t});if(!(x!=null&&x.thread))throw new Error("Thread node is not found");let j;try{o(!0);const N=((O=y.position)==null?void 0:O.x)||0,A=(((E=y.position)==null?void 0:E.y)||0)+(((M=y.measured)==null?void 0:M.height)||0);return j=await u({content:m,initialX:N,initialY:A,sourceId:y.id,threadId:_.id,initialLLMId:_.initial_llm_id}),await p(j,x,b,g),await ue("Message").update(`${j.aiMessage.id}`,{status:er.Success}),j.aiMessage.status=er.Success,g.onMessageUpdate({id:j.aiMessageNode.id,nodeData:{entity:j.aiMessage,loading:!1}}),!0}catch{j!=null&&j.aiMessage&&await ue("Message").update(`${j.aiMessage.id}`,{status:er.Failed,content:n("errors.ai_message_content_failed")}),j!=null&&j.aiMessageNode.id&&(g==null||g.onMessageUpdate({id:j.aiMessageNode.id,nodeData:{content:n("errors.ai_message_content_failed"),loading:!1}}))}finally{o(!1)}},[c,t,e,u,p,n]);return{loading:r,createMessage:f}},Bq=(e,t)=>{const n=jt(e),{t:r}=je("flows"),{getNode:o,getHandleConnections:i}=Fn(),a=ve(d=>d.updateNodes),{createMessage:s,loading:c}=HO({getNode:o,getHandleConnections:i}),l=v.useCallback(d=>{if(!d.id)return;const p=o(d.id);!p||!d.nodeData||a([{id:p.id,type:"replace",item:{...p,data:{...p.data,...Fa(d.nodeData,za)}}}])},[o,a]),u=v.useCallback(async d=>{if(n&&t.entity)try{await s(n,d,{onMessageUpdate:l})}catch(p){if(p instanceof Error&&p.message.includes("LLM_NOT_LOADED_YET"))return ca({variant:"destructive",title:r("thread_node.errors.llm_not_loaded_yet")});ca({variant:"destructive",title:`${p}`})}},[n,t.entity,s,l,r]);return{loading:c,createMessage:u}},$q=e=>{const t=ve(r=>r.createOrUpdateFlowEdge),n=v.useCallback(async({edgeId:r,source:o,target:i,connection:a})=>{try{if((o==null?void 0:o.type)===G.Prompt&&(i==null?void 0:i.type)===G.Thread){await t({source:a.source,target:a.target,sourceHandle:a.sourceHandle,targetHandle:a.targetHandle});return}else if((o==null?void 0:o.type)===G.LLM&&(i==null?void 0:i.type)===G.Thread){await t({source:a.source,target:a.target,sourceHandle:a.sourceHandle,targetHandle:a.targetHandle});return}else if((o==null?void 0:o.type)===G.Schema&&(i==null?void 0:i.type)===G.Thread){await t({source:a.source,target:a.target,sourceHandle:a.sourceHandle,targetHandle:a.targetHandle});const s=i.data.entity,c=i.data.entity;await ue("Thread").update(s.id,{schema_id:c.id});return}else if((o==null?void 0:o.type)===G.ToolDefinition&&(i==null?void 0:i.type)===G.Thread){await t({source:a.source,target:a.target,sourceHandle:a.sourceHandle,targetHandle:a.targetHandle});return}else if((o==null?void 0:o.type)===G.VectorDatabase&&(i==null?void 0:i.type)===G.Thread){await t({source:a.source,target:a.target,sourceHandle:a.sourceHandle,targetHandle:a.targetHandle});return}else if((o==null?void 0:o.type)===G.PlaceHolder&&(i==null?void 0:i.type)===G.Thread&&o.data.entity.placeholder_type===ma.VECTOR_DATABASE_RETREIVER){await t({source:a.source,target:a.target,sourceHandle:a.sourceHandle,targetHandle:a.targetHandle});return}return{deleteEdgeId:r}}catch{return{deleteEdgeId:r}}},[t]);Ut(e,n)},Fq=v.memo(e=>{const{id:t,data:n,isConnectable:r}=e,{t:o}=je("flows"),[i,a]=v.useState(!1),s=Kc({type:"source"}),c=Kc({type:"target"}),{getNode:l}=Fn(),{loading:u,createMessage:d}=Bq(t,n);$q(t);const p=v.useCallback(async(...g)=>(a(!1),await d(...g)),[d]),f=v.useMemo(()=>s.length>0,[s]),y=v.useCallback(()=>{a(g=>!g)},[]),m=v.useMemo(()=>{var b,w;const g=c.map((_,x)=>{var O;const j=l(_.source);if((j==null?void 0:j.type)===G.Schema)return h.jsx(zt,{children:o("thread_node.structured_output")},`${x}`);if((j==null?void 0:j.type)===G.Prompt){const E=j.data.entity;return h.jsx(zt,{children:o(E.type===Yt.FewShotExample?"thread_node.prompts.few_shot_example":`thread_node.prompts.${E.role.toLowerCase()}`)},`${x}`)}else if((j==null?void 0:j.type)===G.PlaceHolder&&((O=j.data.entity)==null?void 0:O.placeholder_type)===ma.VECTOR_DATABASE_RETREIVER)return h.jsx(zt,{children:o("thread_node.vector_database_retriever")},`${x}`)}).filter(Boolean);return e.data.entity&&!((w=(b=e.data.entity)==null?void 0:b.messages)!=null&&w.length)&&!f?h.jsx(jh,{disabled:u,loading:u,onSubmit:p,tags:g}):g!=null&&g.length?h.jsxs(ft,{className:"p-4 pt-2",children:[h.jsx(Zt,{className:"mb-2",children:o("thread_node.title")}),h.jsx("div",{className:"flex gap-1.5",children:g}),h.jsx("div",{className:"mt-4 w-full flex justify-end",children:h.jsxs(vt,{onClick:y,variant:"outline",children:[h.jsx(ge,{name:i?"copy-minus":"copy-plus"}),o(i?"thread_node.hide":"thread_node.clone")]})})]}):h.jsx("div",{className:"w-12 h-10"})},[f,l,p,y,u,e.data.entity,i,o,c]);return h.jsxs("div",{children:[h.jsx(De,{type:"target",position:oe.Top,isConnectable:r}),h.jsxs("div",{children:[h.jsx(Vt,{id:t}),m,i?h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"w-[1px] absolute ml-[50%] h-[30px] bg-gray-500"}),h.jsx("div",{className:"absolute mt-[30px] w-full",children:h.jsx("div",{className:"ml-[10%] w-80 animate-in slide-in-from-bottom-5",children:h.jsx(jh,{disabled:u,loading:u,onSubmit:p})})})]}):void 0]}),h.jsx(De,{type:"source",position:oe.Bottom,id:"a",isConnectable:r})]})}),at={},Dr=typeof globalThis>"u"?window:globalThis,we={status:"created"},Ye={};at.debug=e=>{hr=typeof e=="function"?e:()=>{}};let hr=()=>{};at.detect=()=>WO();const WO=()=>{const e={};["speechSynthesis","speechSynthesisUtterance","speechSynthesisVoice","speechSynthesisEvent","speechSynthesisErrorEvent"].forEach(n=>{e[n]=Xq(n)}),e.onvoiceschanged=Cl(e.speechSynthesis,"onvoiceschanged");const t=Cl(e.speechSynthesisUtterance,"prototype");return Ch.forEach(n=>{const r=`on${n}`;e[r]=t&&Cl(e.speechSynthesisUtterance.prototype,r)}),Ye.isAndroid=zq(),Ye.isFirefox=Uq()||Vq(),Ye.isSafari=qq(),hr(`is android: ${!!Ye.isAndroid}`),hr(`is firefox: ${!!Ye.isFirefox}`),hr(`is safari: ${!!Ye.isSafari}`),e},Cl=(e={},t)=>Object.hasOwnProperty.call(e,t)||t in e||!!e[t],Mh=()=>(Dr.navigator||{}).userAgent||"",zq=()=>/android/i.test(Mh()),Vq=()=>/kaios/i.test(Mh()),Uq=()=>typeof Dr.InstallTrigger<"u"?!0:/firefox/i.test(Mh()),qq=()=>typeof Dr.GestureEvent<"u",Hq=["webKit","moz","ms","o"],Wq=e=>`${e.charAt(0).toUpperCase()}${e.slice(1)}`,Xq=e=>{const t=Wq(e),n=Hq.map(o=>`${o}${t}`),r=[e,t].concat(n).find(Qq);return Dr[r]},Qq=e=>Dr[e];at.status=()=>({...we}),at.filterVoices=({name:e,language:t,localService:n,voiceURI:r})=>{const o=we.voices||[],i=typeof e<"u",a=typeof r<"u",s=typeof n<"u",c=typeof t<"u",l=c&&t.split(/[-_]+/g)[0].toLocaleLowerCase();return o.filter(u=>{if(i&&u.name.includes(e)||a&&u.voiceURI.includes(r)||s&&u.localService===n)return!0;if(c){const d=u.lang&&u.lang.toLocaleLowerCase();return d&&(d===l||d.indexOf(`${l}-`)>-1||d.indexOf(`${l}_`)>-1)}return!1})};const Ht=e=>{hr(e),we.status=e};at.init=function({maxTimeout:e=5e3,interval:t=250,quiet:n,maxLengthExceeded:r}={}){return new Promise((o,i)=>{if(we.initialized)return o(!1);at.reset(),Ht("init: start");let a,s,c=!1;we.maxLengthExceeded=r||"warn";const l=m=>(Ht(`init: failed (${m})`),clearInterval(a),we.initialized=!1,n?o(!1):i(new Error(`EasySpeech: ${m}`))),u=()=>{if(!c)return Ht("init: complete"),c=!0,we.initialized=!0,clearInterval(a),p.onvoiceschanged=null,s&&p.removeEventListener("voiceschanged",s),o(!0)},d=WO();if(!(d.speechSynthesis&&d.speechSynthesisUtterance))return l("browser misses features");Object.keys(d).forEach(m=>{we[m]=d[m]});const{speechSynthesis:p}=we,f=()=>{const m=p.getVoices()||[];if(m.length>0){if(we.voices=m,Ht(`voices loaded: ${m.length}`),we.defaultVoice=m.find(g=>g.default),!we.defaultVoice){const g=(Dr.navigator||{}).language||"",b=at.filterVoices({language:g});b.length>0&&(we.defaultVoice=b[0])}return we.defaultVoice||(we.defaultVoice=m[0]),!0}return!1};if(Ht("init: voices"),f())return u();const y=()=>{Ht("init: voices (timer)");let m=0;a=setInterval(()=>{if(f())return u();if(m>e)return l("browser has no voices (timeout)");m+=t},t)};d.onvoiceschanged?(Ht("init: voices (onvoiceschanged)"),p.onvoiceschanged=()=>f()?u():y(),setTimeout(()=>f()?u():l("browser has no voices (timeout)"),e)):(Cl(p,"addEventListener")&&(Ht("init: voices (addEventListener)"),s=()=>{if(f())return u()},p.addEventListener("voiceschanged",s)),y())})};const fo=({force:e}={})=>{if(!e&&!we.initialized)throw new Error("EasySpeech: not initialized. Run EasySpeech.init() first")};at.voices=()=>(fo(),we.voices),at.on=e=>(fo(),Ch.forEach(t=>{const n=e[t];Rr.handler(n)&&(we.handlers[t]=n)}),{...we.handlers});const Ch=["boundary","end","error","mark","pause","resume","start"],Rr={isNumber:e=>typeof e=="number"&&!Number.isNaN(e),pitch:e=>Rr.isNumber(e)&&e>=0&&e<=2,volume:e=>Rr.isNumber(e)&&e>=0&&e<=1,rate:e=>Rr.isNumber(e)&&e>=.1&&e<=10,text:e=>typeof e=="string",handler:e=>typeof e=="function",voice:e=>e&&e.lang&&e.name&&e.voiceURI};at.defaults=e=>(fo(),e&&(we.defaults=we.defaults||{},["voice","pitch","rate","volume"].forEach(t=>{const n=e[t],r=Rr[t];r(n)&&(we.defaults[t]=n)})),{...we.defaults});const Yq=e=>{var t,n;return e||((t=we.defaults)==null?void 0:t.voice)||we.defaultVoice||((n=we.voices)==null?void 0:n[0])},Gq=e=>{const t=we.speechSynthesisUtterance;return new t(e)};at.speak=({text:e,voice:t,pitch:n,rate:r,volume:o,force:i,infiniteResume:a,noStop:s,...c})=>{if(fo({force:i}),!Rr.text(e))throw new Error("EasySpeech: at least some valid text is required to speak");if(new TextEncoder().encode(e).length>4096){const u="EasySpeech: text exceeds max length of 4096 bytes, which will not work with some voices.";switch(we.maxLengthExceeded){case"none":break;case"error":throw new Error(u);case"warn":default:console.warn(u)}}const l=u=>{var f;const[d,p]=Object.entries(u)[0];return Rr[d](p)?p:(f=we.defaults)==null?void 0:f[d]};return new Promise((u,d)=>{Ht("init speak");const p=Gq(e),f=Yq(t);f&&(p.voice=f,p.lang=f.lang,p.voiceURI=f.voiceURI),p.text=e,p.pitch=l({pitch:n}),p.rate=l({rate:r}),p.volume=l({volume:o});const y=p.voice&&p.voice.name&&p.voice.name.toLocaleLowerCase().includes("(natural)");Kq(p,{isMsNatural:y}),Ch.forEach(m=>{var b;const g=c[m];Rr.handler(g)&&p.addEventListener(m,g),(b=we.handlers)!=null&&b[m]&&p.addEventListener(m,we.handlers[m])}),p.addEventListener("start",()=>{Ye.paused=!1,Ye.speaking=!0;const m=!y&&!Ye.isFirefox&&!Ye.isSafari&&Ye.isAndroid!==!0;(typeof a=="boolean"?a:m)&&XO(p)}),p.addEventListener("end",m=>{Ht("speak complete"),Ye.paused=!1,Ye.speaking=!1,clearTimeout(vi),u(m)}),p.addEventListener("error",(m={})=>{Ht(`speak failed: ${m.message}`),Ye.paused=!1,Ye.speaking=!1,clearTimeout(vi),d(m)}),clearTimeout(vi),s!==!0&&we.speechSynthesis.cancel(),setTimeout(()=>we.speechSynthesis.speak(p),10)})};const Kq=({voice:e,pitch:t,rate:n,volume:r},{isMsNatural:o=!1}={})=>{hr(`utterance: voice=${e==null?void 0:e.name} volume=${r} rate=${n} pitch=${t} isMsNatural=${o}`)};let vi;function XO(e){if(!e&&vi)return hr("force-clear timeout"),Dr.clearTimeout(vi);const{paused:t,speaking:n}=we.speechSynthesis,r=n||Ye.speaking,o=t||Ye.paused;hr(`resumeInfinity isSpeaking=${r} isPaused=${o}`),r&&!o&&(we.speechSynthesis.pause(),we.speechSynthesis.resume()),vi=Dr.setTimeout(function(){XO(e)},5e3)}at.cancel=()=>{fo(),Ht("cancelling"),we.speechSynthesis.cancel(),Ye.paused=!1,Ye.speaking=!1},at.resume=()=>{fo(),Ht("resuming"),Ye.paused=!1,Ye.speaking=!0,we.speechSynthesis.resume()},at.pause=()=>{if(fo(),Ht("pausing"),Ye.isAndroid)return hr("patch pause on Android with cancel"),we.speechSynthesis.cancel();we.speechSynthesis.pause(),Ye.paused=!0,Ye.speaking=!1},at.reset=()=>{Object.assign(we,{status:"reset",initialized:!1,speechSynthesis:null,speechSynthesisUtterance:null,speechSynthesisVoice:null,speechSynthesisEvent:null,speechSynthesisErrorEvent:null,voices:null,defaultVoice:null,defaults:{pitch:1,rate:1,volume:1,voice:null},handlers:{}})};class cn{constructor(){}static getInstance(){return cn.instance||(cn.instance=new cn),cn.instance}static async init(){try{cn.promise=at.init({maxTimeout:5e3,interval:100}),await cn.promise}finally{cn.promise=void 0}}async speak(t){cn.promise&&await cn.promise;const n=at.status();if(!("initialized"in n)||!n.initialized)throw new Error("EasySpeech is not ready");return at.speak({text:t,pitch:1,rate:1,volume:1,voice:at.voices()[0]}).catch(r=>{console.error("Error during speech synthesis:",r)})}async stop(){return at.cancel()}}cn.init();const QO=cn.getInstance();function Zq({data:e,onNewThread:t,loading:n,showThread:r}){var i;const{t:o}=je("flows");return h.jsxs(pr,{className:"flex min-w-52",children:[h.jsx(ge,{size:24,name:"user"}),h.jsxs("div",{className:"ml-2 max-w-full w-full",children:[h.jsx(fr,{children:"Human"}),h.jsx(mi,{children:`${e.content||((i=e.entity)==null?void 0:i.content)||""}`}),t?h.jsx("div",{className:"w-full mt-2 flex items-center justify-end",children:h.jsxs(vt,{onClick:t,disabled:n,variant:"outline",children:[h.jsx(ge,{name:r?"minus":"plus",size:16}),o(r?"message_node.hide_thread":"message_node.new_thread")]})}):void 0]})]})}const Jq=v.lazy(()=>an(()=>import("./index-BIM_J2Pi.js").then(async e=>(await e.__tla,e)),__vite__mapDeps([5,6,1,2,7,8])));function eH({data:e,onNewThread:t,loading:n,showThread:r}){var a,s,c,l,u,d,p,f;const{t:o}=je("flows"),i=v.useMemo(()=>{var y;try{return JSON.parse(((y=e==null?void 0:e.entity)==null?void 0:y.metadata)||"{}")}catch{return{}}},[(a=e==null?void 0:e.entity)==null?void 0:a.metadata]);return h.jsxs(pr,{className:"flex min-w-52",children:[h.jsx(ge,{className:re(e.loading?"animate-spin":void 0),size:24,name:e.loading?"loader-circle":"bot"}),h.jsx(ge,{name:r?"minus":"plus",size:24}),h.jsxs("div",{className:"ml-2 w-full max-w-full",children:[h.jsx(fr,{children:o(`message_node.message_roles.${(c=(s=e.entity)==null?void 0:s.role)==null?void 0:c.toLowerCase()}`)}),h.jsx(v.Suspense,{fallback:h.jsx("div",{className:"h-full w-ful rounded-lg flex justify-center items-center",children:h.jsx(ge,{name:"loader-circle",className:"animate-spin"})}),children:h.jsx(Jq,{className:"!text-sm [&_p]:leading-relaxed !max-w-full !bg-transparent !text-inherit !font-sans",source:`${e.content||((l=e.entity)==null?void 0:l.content)||""}`})}),Array.isArray((u=i==null?void 0:i.message)==null?void 0:u.tool_calls)&&((p=(d=i==null?void 0:i.message)==null?void 0:d.tool_calls)!=null&&p.length)?(f=i==null?void 0:i.message)==null?void 0:f.tool_calls.map((y,m)=>h.jsx(zt,{children:o("message_node.tool_call",{name:y.name,args:Object.entries(y.args).map(([g,b])=>`"${g}": "${b}"`).join(", ")})},`${y.name}_${m}`)):null,t?h.jsx("div",{className:"w-full mt-2 flex items-center justify-end",children:h.jsxs(vt,{onClick:t,disabled:n,variant:"outline",children:[h.jsx(ge,{name:r?"minus":"plus",size:16}),o(r?"message_node.hide_thread":"message_node.new_thread")]})}):void 0]}),e.loading?h.jsx(_h,{size:350,duration:10}):void 0]})}const tH=e=>{const{t}=je("flows"),n=jt(e),r=ve(u=>u.updateNodes),{getNode:o,getHandleConnections:i}=Fn(),{createMessage:a,loading:s}=HO({getNode:o,getHandleConnections:i}),c=v.useCallback(u=>{if(!u.id)return;const d=o(u.id);!d||!u.nodeData||r([{id:d.id,type:"replace",item:{...d,data:{...d.data,...Fa(u.nodeData,za)}}}])},[o,r]),l=v.useCallback(async u=>{if(n)try{await a(n,u,{onMessageUpdate:c})}catch(d){if(d instanceof Error&&d.message.includes("LLM_NOT_LOADED_YET"))return ca({variant:"destructive",title:t("message_node.errors.llm_not_loaded_yet")});ca({variant:"destructive",title:t("message_node.errors.create_message")})}},[n,t,a,c]);return{loading:s,createMessage:l}},YO=()=>{const e=ve(n=>n.createOrUpdateFlowNode),t=ve(n=>n.createOrUpdateFlowEdge);return{createIdieMessage:v.useCallback(async(n,r,o,i)=>{var f,y,m,g,b;if(!n||!r)return;const a=(y=(f=i==null?void 0:i.promptNode)==null?void 0:f.data)==null?void 0:y.entity,s=((m=n.position)==null?void 0:m.x)||0,c=(((g=n.position)==null?void 0:g.y)||0)+(((b=n.measured)==null?void 0:b.height)||0),l=await ue("Message").save({thread_id:r.id,content:o,role:(a==null?void 0:a.role)||Qt.Human,status:er.Started,llm_id:r.initial_llm_id});if(!l)throw new Error("Failed to save message");const u=await e({source_id:l.id,source_type:"Message",node_type:G.Message,x:s,y:c});if(!u)throw new Error("Failed to save message node");const d=await t({source:n.id,target:u.id});let p;return i!=null&&i.promptNode&&(p=await t({source:i==null?void 0:i.promptNode.id,target:u.id})),{message:l,edgeToPrompt:p,messageNode:u,messageEdge:d}},[e,t])}},nH=e=>{const{createIdieMessage:t}=YO(),n=v.useCallback(async({edgeId:r,source:o,target:i})=>{var a,s;try{if((o==null?void 0:o.type)===G.Prompt&&(i==null?void 0:i.type)===G.Message){const c=(a=i==null?void 0:i.data)==null?void 0:a.entity,l=(s=o==null?void 0:o.data)==null?void 0:s.entity;if(!l||!c||!i)return{deleteEdgeId:r};await t(i,{id:c==null?void 0:c.thread_id,title:"",status:pc.Started,initial_llm_id:c.llm_id,session_id:l.session_id},l.content,{promptNode:o});return}return{deleteEdgeId:r}}catch{return{deleteEdgeId:r}}},[t]);Ut(e,n)},rH=v.memo(e=>{var _,x,j;const{id:t,data:n,isConnectable:r}=e,[o,i]=v.useState(!1),[a,s]=v.useState(!1),{t:c}=je("common"),l=Kc({type:"source"}),{loading:u,createMessage:d}=tH(t),{toast:p}=on();nH(t);const f=v.useCallback(async(...O)=>{const E=await d(...O);return i(!1),E},[d]),y=v.useMemo(()=>l.length===0,[l]),m=v.useCallback(()=>{var O;(O=n.entity)!=null&&O.content&&(navigator.clipboard.writeText(n.entity.content),p({description:c("copied")}))},[p,n,c]),g=v.useCallback(async()=>{var O;try{if(a)return await QO.stop(),s(!1);s(!0),await QO.speak(((O=n.entity)==null?void 0:O.content)||"")}catch{p({variant:"destructive",description:c("errors.speech_is_not_supported")})}finally{s(!1)}},[(_=n.entity)==null?void 0:_.content,a,c,p]),b=v.useCallback(()=>{i(O=>!O)},[]),w=v.useMemo(()=>{var O;if(!(!y&&!o||n.loading||u||((O=n==null?void 0:n.entity)==null?void 0:O.status)==="inprogress"))return h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"w-[1px] absolute ml-[50%] h-[30px] bg-gray-500"}),h.jsx("div",{className:"absolute mt-[30px] w-full",children:h.jsx("div",{className:"ml-[10%] w-80 animate-in slide-in-from-bottom-5",children:h.jsx(jh,{disabled:u,loading:u,onSubmit:f})})})]})},[(x=n==null?void 0:n.entity)==null?void 0:x.status,n.loading,f,y,u,o]);return h.jsxs("div",{children:[h.jsx(De,{type:"target",position:oe.Top,isConnectable:r}),h.jsxs("div",{className:"max-w-sm min-w-64",children:[h.jsxs("div",{className:"w-auto",children:[h.jsx(Vt,{id:t}),h.jsx("div",{children:((j=n.entity)==null?void 0:j.role)===Qt.Human?h.jsx(Zq,{data:n,showThread:o,onNewThread:y?void 0:b}):h.jsx(eH,{data:n,showThread:o,loading:u,onNewThread:y?void 0:b})}),h.jsx(vt,{onClick:g,className:"absolute top-0 right-[68px] !px-2 !rounded-none",variant:"ghost",children:h.jsx(ge,{name:a?"circle-stop":"speech",size:16})}),h.jsx(vt,{onClick:m,className:"absolute top-0 right-[36px] !px-2 !rounded-none",variant:"ghost",children:h.jsx(ge,{name:"copy",size:16})})]}),w]}),h.jsx(De,{type:"source",position:oe.Bottom,id:"a",isConnectable:r})]})}),GO=Rg(({title:e,content:t})=>{const n=To();return h.jsx(qg,{open:n.visible,onOpenChange:n.hide,children:h.jsxs(Hg,{className:"sm:max-w-2xl",children:[h.jsx(Wg,{children:h.jsxs("div",{className:"flex",children:[h.jsx(ge,{name:"file",className:"mr-2 h-4 w-4"}),h.jsx(Xg,{children:e})]})}),h.jsx("div",{className:"mx-auto w-full min-h-96 max-h-96 overflow-hidden",children:h.jsx("div",{className:"relative w-full h-full overflow-hidden rounded-xl p-1 border border-border",children:h.jsx("pre",{className:"break-all h-full overflow-y-auto bg-background font-mono text-xs w-full",children:t})})})]})})}),oH=e=>{const t=ve(o=>o.createOrUpdateFlowEdge),{createIdieMessage:n}=YO(),r=v.useCallback(async({edgeId:o,source:i,target:a})=>{var s,c,l,u;try{const d=(s=a==null?void 0:a.data)==null?void 0:s.entity,p=(c=i==null?void 0:i.data)==null?void 0:c.entity;if((i==null?void 0:i.type)===G.Message&&(a==null?void 0:a.type)===G.Prompt){const f=(l=i==null?void 0:i.data)==null?void 0:l.entity,y=(u=a==null?void 0:a.data)==null?void 0:u.entity;if(!y||!f||!a)return{deleteEdgeId:o};await n(i,{id:f==null?void 0:f.thread_id,title:"",status:pc.Started,initial_llm_id:f.llm_id,session_id:y.session_id},y.content,{promptNode:a});return}else if((i==null?void 0:i.type)===G.CSVData&&(a==null?void 0:a.type)===G.Prompt&&(d==null?void 0:d.type)===Yt.FewShotExample&&(p!=null&&p.headers.includes("input"))&&(p!=null&&p.headers.includes("output"))){await t({source:i.id,target:a.id});return}return{deleteEdgeId:o}}catch{return{deleteEdgeId:o}}},[n,t]);Ut(e,r)},iH=v.memo(e=>{var l,u,d;const{id:t,data:n,isConnectable:r}=e;oH(t);const o=To(GO),i=v.useMemo(()=>{var p,f,y;return`${(p=n.entity)!=null&&p.prefix?`${(f=n.entity)==null?void 0:f.prefix}
`:""}${((y=n.entity)==null?void 0:y.content)||""}`},[(l=n.entity)==null?void 0:l.prefix,(u=n.entity)==null?void 0:u.content]),a=v.useMemo(()=>{var f;const p=/{(.*?)}/g;return((f=i.match(p))==null?void 0:f.map(y=>y.replace("{","").replace("}","")))||[]},[i]),s=i.length>990,c=()=>{o.show({title:"Prompt",content:i})};return h.jsxs("div",{className:"min-w-56",children:[h.jsx(De,{type:"target",position:oe.Top,isConnectable:r}),h.jsxs("div",{children:[h.jsx(Vt,{id:t}),h.jsxs(pr,{className:"flex justify-center max-w-72",variant:"default",children:[h.jsx(ge,{size:24,name:"notepad-text"}),h.jsxs("div",{className:"ml-2 max-w-full break-words break-all",children:[h.jsx(fr,{children:`${((d=n.entity)==null?void 0:d.role)||""}`}),h.jsxs(mi,{onClick:s?c:void 0,children:[s?`${i.slice(0,990)}...`:i,s?h.jsx("span",{className:"float-right",children:h.jsx(ge,{name:"chevron-right"})}):void 0]}),a!=null&&a.length?a.map((p,f)=>h.jsx(zt,{className:"mt-2 mr-1",variant:"default",children:p},f)):void 0]})]})]}),h.jsx(De,{type:"source",position:oe.Bottom,id:"a",isConnectable:r})]})});function aH(e){return e==null}var sH=aH;const Re=Ne(sH);var cH=cr,lH=Ct,uH=Rn,dH="[object String]";function pH(e){return typeof e=="string"||!lH(e)&&uH(e)&&cH(e)==dH}var fH=pH;const ss=Ne(fH);var KO={exports:{}},Be={},Ph=Symbol.for("react.element"),Nh=Symbol.for("react.portal"),Pl=Symbol.for("react.fragment"),Nl=Symbol.for("react.strict_mode"),kl=Symbol.for("react.profiler"),Al=Symbol.for("react.provider"),Tl=Symbol.for("react.context"),hH=Symbol.for("react.server_context"),Il=Symbol.for("react.forward_ref"),Dl=Symbol.for("react.suspense"),Rl=Symbol.for("react.suspense_list"),Ll=Symbol.for("react.memo"),Bl=Symbol.for("react.lazy"),mH=Symbol.for("react.offscreen"),ZO;ZO=Symbol.for("react.module.reference");function ln(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case Ph:switch(e=e.type,e){case Pl:case kl:case Nl:case Dl:case Rl:return e;default:switch(e=e&&e.$$typeof,e){case hH:case Tl:case Il:case Bl:case Ll:case Al:return e;default:return t}}case Nh:return t}}}Be.ContextConsumer=Tl,Be.ContextProvider=Al,Be.Element=Ph,Be.ForwardRef=Il,Be.Fragment=Pl,Be.Lazy=Bl,Be.Memo=Ll,Be.Portal=Nh,Be.Profiler=kl,Be.StrictMode=Nl,Be.Suspense=Dl,Be.SuspenseList=Rl,Be.isAsyncMode=function(){return!1},Be.isConcurrentMode=function(){return!1},Be.isContextConsumer=function(e){return ln(e)===Tl},Be.isContextProvider=function(e){return ln(e)===Al},Be.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ph},Be.isForwardRef=function(e){return ln(e)===Il},Be.isFragment=function(e){return ln(e)===Pl},Be.isLazy=function(e){return ln(e)===Bl},Be.isMemo=function(e){return ln(e)===Ll},Be.isPortal=function(e){return ln(e)===Nh},Be.isProfiler=function(e){return ln(e)===kl},Be.isStrictMode=function(e){return ln(e)===Nl},Be.isSuspense=function(e){return ln(e)===Dl},Be.isSuspenseList=function(e){return ln(e)===Rl},Be.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Pl||e===kl||e===Nl||e===Dl||e===Rl||e===mH||typeof e=="object"&&e!==null&&(e.$$typeof===Bl||e.$$typeof===Ll||e.$$typeof===Al||e.$$typeof===Tl||e.$$typeof===Il||e.$$typeof===ZO||e.getModuleId!==void 0)},Be.typeOf=ln,KO.exports=Be;var yH=KO.exports,gH=cr,vH=Rn,bH="[object Number]";function xH(e){return typeof e=="number"||vH(e)&&gH(e)==bH}var JO=xH;const wH=Ne(JO);var _H=JO;function jH(e){return _H(e)&&e!=+e}var OH=jH;const cs=Ne(OH);var En=function(e){return e===0?0:e>0?1:-1},ho=function(e){return ss(e)&&e.indexOf("%")===e.length-1},ae=function(e){return wH(e)&&!cs(e)},ut=function(e){return ae(e)||ss(e)},EH=0,$l=function(e){var t=++EH;return"".concat(e||"").concat(t)},mo=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!ae(e)&&!ss(e))return n;var o;if(ho(e)){var i=e.indexOf("%");o=t*parseFloat(e.slice(0,i))/100}else o=+e;return cs(o)&&(o=n),r&&o>t&&(o=t),o},Lr=function(e){if(!e)return null;var t=Object.keys(e);return t&&t.length?e[t[0]]:null},SH=function(e){if(!Array.isArray(e))return!1;for(var t=e.length,n={},r=0;r<t;r++)if(!n[e[r]])n[e[r]]=!0;else return!0;return!1},bi=function(e,t){return ae(e)&&ae(t)?function(n){return e+n*(t-e)}:function(){return t}};function kh(e,t,n){return!e||!e.length?null:e.find(function(r){return r&&(typeof t=="function"?t(r):sn(r,t))===n})}function xi(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var r in t)if({}.hasOwnProperty.call(t,r)&&!{}.hasOwnProperty.call(e,r))return!1;return!0}function Ah(e){"@babel/helpers - typeof";return Ah=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ah(e)}var MH=["viewBox","children"],CH=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],eE=["points","pathLength"],Th={svg:MH,polygon:eE,polyline:eE},Ih=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Fl=function(e,t){if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(v.isValidElement(e)&&(n=e.props),!Jo(n))return null;var r={};return Object.keys(n).forEach(function(o){Ih.includes(o)&&(r[o]=t||function(i){return n[o](n,i)})}),r},PH=function(e,t,n){return function(r){return e(t,n,r),null}},zl=function(e,t,n){if(!Jo(e)||Ah(e)!=="object")return null;var r=null;return Object.keys(e).forEach(function(o){var i=e[o];Ih.includes(o)&&typeof i=="function"&&(r||(r={}),r[o]=PH(i,t,n))}),r},NH=["children"],kH=["children"];function tE(e,t){if(e==null)return{};var n=AH(e,t),r,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)r=i[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function AH(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var nE={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart"},mr=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},rE=null,Dh=null,Rh=function e(t){if(t===rE&&Array.isArray(Dh))return Dh;var n=[];return v.Children.forEach(t,function(r){Re(r)||(yH.isFragment(r)?n=n.concat(e(r.props.children)):n.push(r))}),Dh=n,rE=t,n};function Sn(e,t){var n=[],r=[];return Array.isArray(t)?r=t.map(function(o){return mr(o)}):r=[mr(t)],Rh(e).forEach(function(o){var i=sn(o,"type.displayName")||sn(o,"type.name");r.indexOf(i)!==-1&&n.push(o)}),n}function Jt(e,t){var n=Sn(e,t);return n&&n[0]}var oE=function(e){if(!e||!e.props)return!1;var t=e.props,n=t.width,r=t.height;return!(!ae(n)||n<=0||!ae(r)||r<=0)},TH=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],IH=function(e){return e&&e.type&&ss(e.type)&&TH.indexOf(e.type)>=0},DH=function(e,t,n,r){var o,i=(o=Th==null?void 0:Th[r])!==null&&o!==void 0?o:[];return!Ce(e)&&(r&&i.includes(t)||CH.includes(t))||n&&Ih.includes(t)},Ie=function(e,t,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(v.isValidElement(e)&&(r=e.props),!Jo(r))return null;var o={};return Object.keys(r).forEach(function(i){var a;DH((a=r)===null||a===void 0?void 0:a[i],i,t,n)&&(o[i]=r[i])}),o},Lh=function e(t,n){if(t===n)return!0;var r=v.Children.count(t);if(r!==v.Children.count(n))return!1;if(r===0)return!0;if(r===1)return iE(Array.isArray(t)?t[0]:t,Array.isArray(n)?n[0]:n);for(var o=0;o<r;o++){var i=t[o],a=n[o];if(Array.isArray(i)||Array.isArray(a)){if(!e(i,a))return!1}else if(!iE(i,a))return!1}return!0},iE=function(e,t){if(Re(e)&&Re(t))return!0;if(!Re(e)&&!Re(t)){var n=e.props||{},r=n.children,o=tE(n,NH),i=t.props||{},a=i.children,s=tE(i,kH);return r&&a?xi(o,s)&&Lh(r,a):!r&&!a?xi(o,s):!1}return!1},aE=function(e,t){var n=[],r={};return Rh(e).forEach(function(o,i){if(IH(o))n.push(o);else if(o){var a=mr(o.type),s=t[a]||{},c=s.handler,l=s.once;if(c&&(!l||!r[a])){var u=c(o,a,i);n.push(u),r[a]=!0}}}),n},RH=function(e){var t=e&&e.type;return t&&nE[t]?nE[t]:null},LH=function(e,t){return Rh(t).indexOf(e)},BH=["children","width","height","viewBox","className","style","title","desc"];function Bh(){return Bh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Bh.apply(this,arguments)}function $H(e,t){if(e==null)return{};var n=FH(e,t),r,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)r=i[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function FH(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function $h(e){var t=e.children,n=e.width,r=e.height,o=e.viewBox,i=e.className,a=e.style,s=e.title,c=e.desc,l=$H(e,BH),u=o||{width:n,height:r,x:0,y:0},d=Le("recharts-surface",i);return $.createElement("svg",Bh({},Ie(l,!0,"svg"),{className:d,width:n,height:r,style:a,viewBox:"".concat(u.x," ").concat(u.y," ").concat(u.width," ").concat(u.height)}),$.createElement("title",null,s),$.createElement("desc",null,c),t)}var zH=["children","className"];function Fh(){return Fh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Fh.apply(this,arguments)}function VH(e,t){if(e==null)return{};var n=UH(e,t),r,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)r=i[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function UH(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var mt=$.forwardRef(function(e,t){var n=e.children,r=e.className,o=VH(e,zH),i=Le("recharts-layer",r);return $.createElement("g",Fh({className:i},Ie(o,!0),{ref:t}),n)}),yr=function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o]};function qH(e,t,n){var r=-1,o=e.length;t<0&&(t=-t>o?0:o+t),n=n>o?o:n,n<0&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;for(var i=Array(o);++r<o;)i[r]=e[r+t];return i}let sE;Jd=qH,sE=Jd;function HH(e,t,n){var r=e.length;return n=n===void 0?r:n,!t&&n>=r?e:sE(e,t,n)}var WH=HH,XH="\uD800-\uDFFF",QH="\\u0300-\\u036f",YH="\\ufe20-\\ufe2f",GH="\\u20d0-\\u20ff",KH=QH+YH+GH,ZH="\\ufe0e\\ufe0f",JH="\\u200d",eW=RegExp("["+JH+XH+KH+ZH+"]");function tW(e){return eW.test(e)}var cE=tW;function nW(e){return e.split("")}var rW=nW,lE="\uD800-\uDFFF",oW="\\u0300-\\u036f",iW="\\ufe20-\\ufe2f",aW="\\u20d0-\\u20ff",sW=oW+iW+aW,cW="\\ufe0e\\ufe0f",lW="["+lE+"]",zh="["+sW+"]",Vh="\uD83C[\uDFFB-\uDFFF]",uW="(?:"+zh+"|"+Vh+")",uE="[^"+lE+"]",dE="(?:\uD83C[\uDDE6-\uDDFF]){2}",pE="[\uD800-\uDBFF][\uDC00-\uDFFF]",dW="\\u200d",fE=uW+"?",hE="["+cW+"]?",pW="(?:"+dW+"(?:"+[uE,dE,pE].join("|")+")"+hE+fE+")*",fW=hE+fE+pW,hW="(?:"+[uE+zh+"?",zh,dE,pE,lW].join("|")+")",mW=RegExp(Vh+"(?="+Vh+")|"+hW+fW,"g");function yW(e){return e.match(mW)||[]}var gW=yW,vW=rW,bW=cE,xW=gW;function wW(e){return bW(e)?xW(e):vW(e)}var _W=wW,jW=WH,OW=cE,EW=_W,SW=I1;function MW(e){return function(t){t=SW(t);var n=OW(t)?EW(t):void 0,r=n?n[0]:t.charAt(0),o=n?jW(n,1).join(""):t.slice(1);return r[e]()+o}}var CW=MW,PW=CW,NW=PW("toUpperCase"),kW=NW;const Vl=Ne(kW);function We(e){return function(){return e}}const mE=Math.cos,Ul=Math.sin,Mn=Math.sqrt,ql=Math.PI,Hl=2*ql,Uh=Math.PI,qh=2*Uh,yo=1e-6,AW=qh-yo;function yE(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function TW(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return yE;const n=10**t;return function(r){this._+=r[0];for(let o=1,i=r.length;o<i;++o)this._+=Math.round(arguments[o]*n)/n+r[o]}}class IW{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?yE:TW(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,o){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+o}`}bezierCurveTo(t,n,r,o,i,a){this._append`C${+t},${+n},${+r},${+o},${this._x1=+i},${this._y1=+a}`}arcTo(t,n,r,o,i){if(t=+t,n=+n,r=+r,o=+o,i=+i,i<0)throw new Error(`negative radius: ${i}`);let a=this._x1,s=this._y1,c=r-t,l=o-n,u=a-t,d=s-n,p=u*u+d*d;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(p>yo)if(!(Math.abs(d*c-l*u)>yo)||!i)this._append`L${this._x1=t},${this._y1=n}`;else{let f=r-a,y=o-s,m=c*c+l*l,g=f*f+y*y,b=Math.sqrt(m),w=Math.sqrt(p),_=i*Math.tan((Uh-Math.acos((m+p-g)/(2*b*w)))/2),x=_/w,j=_/b;Math.abs(x-1)>yo&&this._append`L${t+x*u},${n+x*d}`,this._append`A${i},${i},0,0,${+(d*f>u*y)},${this._x1=t+j*c},${this._y1=n+j*l}`}}arc(t,n,r,o,i,a){if(t=+t,n=+n,r=+r,a=!!a,r<0)throw new Error(`negative radius: ${r}`);let s=r*Math.cos(o),c=r*Math.sin(o),l=t+s,u=n+c,d=1^a,p=a?o-i:i-o;this._x1===null?this._append`M${l},${u}`:(Math.abs(this._x1-l)>yo||Math.abs(this._y1-u)>yo)&&this._append`L${l},${u}`,r&&(p<0&&(p=p%qh+qh),p>AW?this._append`A${r},${r},0,1,${d},${t-s},${n-c}A${r},${r},0,1,${d},${this._x1=l},${this._y1=u}`:p>yo&&this._append`A${r},${r},0,${+(p>=Uh)},${d},${this._x1=t+r*Math.cos(i)},${this._y1=n+r*Math.sin(i)}`)}rect(t,n,r,o){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+o}h${-r}Z`}toString(){return this._}}function Hh(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new IW(t)}function Wh(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function gE(e){this._context=e}gE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Wl(e){return new gE(e)}function vE(e){return e[0]}function bE(e){return e[1]}function xE(e,t){var n=We(!0),r=null,o=Wl,i=null,a=Hh(s);e=typeof e=="function"?e:e===void 0?vE:We(e),t=typeof t=="function"?t:t===void 0?bE:We(t);function s(c){var l,u=(c=Wh(c)).length,d,p=!1,f;for(r==null&&(i=o(f=a())),l=0;l<=u;++l)!(l<u&&n(d=c[l],l,c))===p&&((p=!p)?i.lineStart():i.lineEnd()),p&&i.point(+e(d,l,c),+t(d,l,c));if(f)return i=null,f+""||null}return s.x=function(c){return arguments.length?(e=typeof c=="function"?c:We(+c),s):e},s.y=function(c){return arguments.length?(t=typeof c=="function"?c:We(+c),s):t},s.defined=function(c){return arguments.length?(n=typeof c=="function"?c:We(!!c),s):n},s.curve=function(c){return arguments.length?(o=c,r!=null&&(i=o(r)),s):o},s.context=function(c){return arguments.length?(c==null?r=i=null:i=o(r=c),s):r},s}function Xl(e,t,n){var r=null,o=We(!0),i=null,a=Wl,s=null,c=Hh(l);e=typeof e=="function"?e:e===void 0?vE:We(+e),t=typeof t=="function"?t:We(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?bE:We(+n);function l(d){var p,f,y,m=(d=Wh(d)).length,g,b=!1,w,_=new Array(m),x=new Array(m);for(i==null&&(s=a(w=c())),p=0;p<=m;++p){if(!(p<m&&o(g=d[p],p,d))===b)if(b=!b)f=p,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),y=p-1;y>=f;--y)s.point(_[y],x[y]);s.lineEnd(),s.areaEnd()}b&&(_[p]=+e(g,p,d),x[p]=+t(g,p,d),s.point(r?+r(g,p,d):_[p],n?+n(g,p,d):x[p]))}if(w)return s=null,w+""||null}function u(){return xE().defined(o).curve(a).context(i)}return l.x=function(d){return arguments.length?(e=typeof d=="function"?d:We(+d),r=null,l):e},l.x0=function(d){return arguments.length?(e=typeof d=="function"?d:We(+d),l):e},l.x1=function(d){return arguments.length?(r=d==null?null:typeof d=="function"?d:We(+d),l):r},l.y=function(d){return arguments.length?(t=typeof d=="function"?d:We(+d),n=null,l):t},l.y0=function(d){return arguments.length?(t=typeof d=="function"?d:We(+d),l):t},l.y1=function(d){return arguments.length?(n=d==null?null:typeof d=="function"?d:We(+d),l):n},l.lineX0=l.lineY0=function(){return u().x(e).y(t)},l.lineY1=function(){return u().x(e).y(n)},l.lineX1=function(){return u().x(r).y(t)},l.defined=function(d){return arguments.length?(o=typeof d=="function"?d:We(!!d),l):o},l.curve=function(d){return arguments.length?(a=d,i!=null&&(s=a(i)),l):a},l.context=function(d){return arguments.length?(d==null?i=s=null:s=a(i=d),l):i},l}class wE{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function DW(e){return new wE(e,!0)}function RW(e){return new wE(e,!1)}const Xh={draw(e,t){const n=Mn(t/ql);e.moveTo(n,0),e.arc(0,0,n,0,Hl)}},LW={draw(e,t){const n=Mn(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},_E=Mn(1/3),BW=_E*2,$W={draw(e,t){const n=Mn(t/BW),r=n*_E;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},FW={draw(e,t){const n=Mn(t),r=-n/2;e.rect(r,r,n,n)}},zW=.8908130915292852,jE=Ul(ql/10)/Ul(7*ql/10),VW=Ul(Hl/10)*jE,UW=-mE(Hl/10)*jE,qW={draw(e,t){const n=Mn(t*zW),r=VW*n,o=UW*n;e.moveTo(0,-n),e.lineTo(r,o);for(let i=1;i<5;++i){const a=Hl*i/5,s=mE(a),c=Ul(a);e.lineTo(c*n,-s*n),e.lineTo(s*r-c*o,c*r+s*o)}e.closePath()}},Qh=Mn(3),HW={draw(e,t){const n=-Mn(t/(Qh*3));e.moveTo(0,n*2),e.lineTo(-Qh*n,-n),e.lineTo(Qh*n,-n),e.closePath()}},un=-.5,dn=Mn(3)/2,Yh=1/Mn(12),WW=(Yh/2+1)*3,XW={draw(e,t){const n=Mn(t/WW),r=n/2,o=n*Yh,i=r,a=n*Yh+n,s=-i,c=a;e.moveTo(r,o),e.lineTo(i,a),e.lineTo(s,c),e.lineTo(un*r-dn*o,dn*r+un*o),e.lineTo(un*i-dn*a,dn*i+un*a),e.lineTo(un*s-dn*c,dn*s+un*c),e.lineTo(un*r+dn*o,un*o-dn*r),e.lineTo(un*i+dn*a,un*a-dn*i),e.lineTo(un*s+dn*c,un*c-dn*s),e.closePath()}};function QW(e,t){let n=null,r=Hh(o);e=typeof e=="function"?e:We(e||Xh),t=typeof t=="function"?t:We(t===void 0?64:+t);function o(){let i;if(n||(n=i=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),i)return n=null,i+""||null}return o.type=function(i){return arguments.length?(e=typeof i=="function"?i:We(i),o):e},o.size=function(i){return arguments.length?(t=typeof i=="function"?i:We(+i),o):t},o.context=function(i){return arguments.length?(n=i??null,o):n},o}function Ql(){}function Yl(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function OE(e){this._context=e}OE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Yl(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Yl(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function YW(e){return new OE(e)}function EE(e){this._context=e}EE.prototype={areaStart:Ql,areaEnd:Ql,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Yl(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function GW(e){return new EE(e)}function SE(e){this._context=e}SE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Yl(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function KW(e){return new SE(e)}function ME(e){this._context=e}ME.prototype={areaStart:Ql,areaEnd:Ql,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function ZW(e){return new ME(e)}function CE(e){return e<0?-1:1}function PE(e,t,n){var r=e._x1-e._x0,o=t-e._x1,i=(e._y1-e._y0)/(r||o<0&&-0),a=(n-e._y1)/(o||r<0&&-0),s=(i*o+a*r)/(r+o);return(CE(i)+CE(a))*Math.min(Math.abs(i),Math.abs(a),.5*Math.abs(s))||0}function NE(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function Gh(e,t,n){var r=e._x0,o=e._y0,i=e._x1,a=e._y1,s=(i-r)/3;e._context.bezierCurveTo(r+s,o+s*t,i-s,a-s*n,i,a)}function Gl(e){this._context=e}Gl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Gh(this,this._t0,NE(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Gh(this,NE(this,n=PE(this,e,t)),n);break;default:Gh(this,this._t0,n=PE(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function kE(e){this._context=new AE(e)}(kE.prototype=Object.create(Gl.prototype)).point=function(e,t){Gl.prototype.point.call(this,t,e)};function AE(e){this._context=e}AE.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,o,i){this._context.bezierCurveTo(t,e,r,n,i,o)}};function JW(e){return new Gl(e)}function eX(e){return new kE(e)}function TE(e){this._context=e}TE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=IE(e),o=IE(t),i=0,a=1;a<n;++i,++a)this._context.bezierCurveTo(r[0][i],o[0][i],r[1][i],o[1][i],e[a],t[a]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function IE(e){var t,n=e.length-1,r,o=new Array(n),i=new Array(n),a=new Array(n);for(o[0]=0,i[0]=2,a[0]=e[0]+2*e[1],t=1;t<n-1;++t)o[t]=1,i[t]=4,a[t]=4*e[t]+2*e[t+1];for(o[n-1]=2,i[n-1]=7,a[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=o[t]/i[t-1],i[t]-=r,a[t]-=r*a[t-1];for(o[n-1]=a[n-1]/i[n-1],t=n-2;t>=0;--t)o[t]=(a[t]-o[t+1])/i[t];for(i[n-1]=(e[n]+o[n-1])/2,t=0;t<n-1;++t)i[t]=2*e[t+1]-o[t+1];return[o,i]}function tX(e){return new TE(e)}function Kl(e,t){this._context=e,this._t=t}Kl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function nX(e){return new Kl(e,.5)}function rX(e){return new Kl(e,0)}function oX(e){return new Kl(e,1)}function wi(e,t){if((a=e.length)>1)for(var n=1,r,o,i=e[t[0]],a,s=i.length;n<a;++n)for(o=i,i=e[t[n]],r=0;r<s;++r)i[r][1]+=i[r][0]=isNaN(o[r][1])?o[r][0]:o[r][1]}function Kh(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function iX(e,t){return e[t]}function aX(e){const t=[];return t.key=e,t}function sX(){var e=We([]),t=Kh,n=wi,r=iX;function o(i){var a=Array.from(e.apply(this,arguments),aX),s,c=a.length,l=-1,u;for(const d of i)for(s=0,++l;s<c;++s)(a[s][l]=[0,+r(d,a[s].key,l,i)]).data=d;for(s=0,u=Wh(t(a));s<c;++s)a[u[s]].index=s;return n(a,u),a}return o.keys=function(i){return arguments.length?(e=typeof i=="function"?i:We(Array.from(i)),o):e},o.value=function(i){return arguments.length?(r=typeof i=="function"?i:We(+i),o):r},o.order=function(i){return arguments.length?(t=i==null?Kh:typeof i=="function"?i:We(Array.from(i)),o):t},o.offset=function(i){return arguments.length?(n=i??wi,o):n},o}function cX(e,t){if((r=e.length)>0){for(var n,r,o=0,i=e[0].length,a;o<i;++o){for(a=n=0;n<r;++n)a+=e[n][o][1]||0;if(a)for(n=0;n<r;++n)e[n][o][1]/=a}wi(e,t)}}function lX(e,t){if((o=e.length)>0){for(var n=0,r=e[t[0]],o,i=r.length;n<i;++n){for(var a=0,s=0;a<o;++a)s+=e[a][n][1]||0;r[n][1]+=r[n][0]=-s/2}wi(e,t)}}function uX(e,t){if(!(!((a=e.length)>0)||!((i=(o=e[t[0]]).length)>0))){for(var n=0,r=1,o,i,a;r<i;++r){for(var s=0,c=0,l=0;s<a;++s){for(var u=e[t[s]],d=u[r][1]||0,p=u[r-1][1]||0,f=(d-p)/2,y=0;y<s;++y){var m=e[t[y]],g=m[r][1]||0,b=m[r-1][1]||0;f+=g-b}c+=d,l+=f*d}o[r-1][1]+=o[r-1][0]=n,c&&(n-=l/c)}o[r-1][1]+=o[r-1][0]=n,wi(e,t)}}function ls(e){"@babel/helpers - typeof";return ls=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ls(e)}var dX=["type","size","sizeType"];function Zh(){return Zh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Zh.apply(this,arguments)}function DE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function RE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?DE(Object(n),!0).forEach(function(r){pX(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):DE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function pX(e,t,n){return t=fX(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fX(e){var t=hX(e,"string");return ls(t)=="symbol"?t:t+""}function hX(e,t){if(ls(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(ls(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function mX(e,t){if(e==null)return{};var n=yX(e,t),r,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)r=i[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function yX(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var LE={symbolCircle:Xh,symbolCross:LW,symbolDiamond:$W,symbolSquare:FW,symbolStar:qW,symbolTriangle:HW,symbolWye:XW},gX=Math.PI/180,vX=function(e){var t="symbol".concat(Vl(e));return LE[t]||Xh},bX=function(e,t,n){if(t==="area")return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var r=18*gX;return 1.25*e*e*(Math.tan(r)-Math.tan(r*2)*Math.pow(Math.tan(r),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},xX=function(e,t){LE["symbol".concat(Vl(e))]=t},Jh=function(e){var t=e.type,n=t===void 0?"circle":t,r=e.size,o=r===void 0?64:r,i=e.sizeType,a=i===void 0?"area":i,s=mX(e,dX),c=RE(RE({},s),{},{type:n,size:o,sizeType:a}),l=function(){var y=vX(n),m=QW().type(y).size(bX(o,a,n));return m()},u=c.className,d=c.cx,p=c.cy,f=Ie(c,!0);return d===+d&&p===+p&&o===+o?$.createElement("path",Zh({},f,{className:Le("recharts-symbols",u),transform:"translate(".concat(d,", ").concat(p,")"),d:l()})):null};Jh.registerSymbol=xX;function _i(e){"@babel/helpers - typeof";return _i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_i(e)}function em(){return em=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},em.apply(this,arguments)}function BE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function wX(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?BE(Object(n),!0).forEach(function(r){us(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):BE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function _X(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jX(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,FE(r.key),r)}}function OX(e,t,n){return t&&jX(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function EX(e,t,n){return t=Zl(t),SX(e,$E()?Reflect.construct(t,n||[],Zl(e).constructor):t.apply(e,n))}function SX(e,t){if(t&&(_i(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return MX(e)}function MX(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $E(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($E=function(){return!!e})()}function Zl(e){return Zl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Zl(e)}function CX(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tm(e,t)}function tm(e,t){return tm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},tm(e,t)}function us(e,t,n){return t=FE(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function FE(e){var t=PX(e,"string");return _i(t)=="symbol"?t:t+""}function PX(e,t){if(_i(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(_i(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var pn=32,nm=function(e){function t(){return _X(this,t),EX(this,t,arguments)}return CX(t,e),OX(t,[{key:"renderIcon",value:function(n){var r=this.props.inactiveColor,o=pn/2,i=pn/6,a=pn/3,s=n.inactive?r:n.color;if(n.type==="plainline")return $.createElement("line",{strokeWidth:4,fill:"none",stroke:s,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:o,x2:pn,y2:o,className:"recharts-legend-icon"});if(n.type==="line")return $.createElement("path",{strokeWidth:4,fill:"none",stroke:s,d:"M0,".concat(o,"h").concat(a,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(2*a,",").concat(o,`
            H`).concat(pn,"M").concat(2*a,",").concat(o,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(a,",").concat(o),className:"recharts-legend-icon"});if(n.type==="rect")return $.createElement("path",{stroke:"none",fill:s,d:"M0,".concat(pn/8,"h").concat(pn,"v").concat(pn*3/4,"h").concat(-pn,"z"),className:"recharts-legend-icon"});if($.isValidElement(n.legendIcon)){var c=wX({},n);return delete c.legendIcon,$.cloneElement(n.legendIcon,c)}return $.createElement(Jh,{fill:s,cx:o,cy:o,size:pn,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,r=this.props,o=r.payload,i=r.iconSize,a=r.layout,s=r.formatter,c=r.inactiveColor,l={x:0,y:0,width:pn,height:pn},u={display:a==="horizontal"?"inline-block":"block",marginRight:10},d={display:"inline-block",verticalAlign:"middle",marginRight:4};return o.map(function(p,f){var y=p.formatter||s,m=Le(us(us({"recharts-legend-item":!0},"legend-item-".concat(f),!0),"inactive",p.inactive));if(p.type==="none")return null;var g=Ce(p.value)?null:p.value;yr(!Ce(p.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var b=p.inactive?c:p.color;return $.createElement("li",em({className:m,style:u,key:"legend-item-".concat(f)},zl(n.props,p,f)),$.createElement($h,{width:i,height:i,viewBox:l,style:d},n.renderIcon(p)),$.createElement("span",{className:"recharts-legend-item-text",style:{color:b}},y?y(g,p,f):g))})}},{key:"render",value:function(){var n=this.props,r=n.payload,o=n.layout,i=n.align;if(!r||!r.length)return null;var a={padding:0,margin:0,textAlign:o==="horizontal"?i:"left"};return $.createElement("ul",{className:"recharts-default-legend",style:a},this.renderItems())}}])}(v.PureComponent);us(nm,"displayName","Legend"),us(nm,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});function NX(e,t,n,r){for(var o=e.length,i=n+(r?1:-1);r?i--:++i<o;)if(t(e[i],i,e))return i;return-1}var zE=NX;function kX(e){return e!==e}var AX=kX;function TX(e,t,n){for(var r=n-1,o=e.length;++r<o;)if(e[r]===t)return r;return-1}var IX=TX,DX=zE,RX=AX,LX=IX;function BX(e,t,n){return t===t?LX(e,t,n):DX(e,RX,n)}var $X=BX,FX=$X;function zX(e,t){var n=e==null?0:e.length;return!!n&&FX(e,t,0)>-1}var VX=zX;function UX(e,t,n){for(var r=-1,o=e==null?0:e.length;++r<o;)if(n(t,e[r]))return!0;return!1}var qX=UX;function HX(){}var WX=HX,rm=u1,XX=WX,QX=af,YX=1/0,GX=rm&&1/QX(new rm([,-0]))[1]==YX?function(e){return new rm(e)}:XX,KX=GX,ZX=mw,JX=VX,eQ=qX,tQ=gw,nQ=KX,rQ=af,oQ=200;function iQ(e,t,n){var r=-1,o=JX,i=e.length,a=!0,s=[],c=s;if(n)a=!1,o=eQ;else if(i>=oQ){var l=t?null:nQ(e);if(l)return rQ(l);a=!1,o=tQ,c=new ZX}else c=t?[]:s;e:for(;++r<i;){var u=e[r],d=t?t(u):u;if(u=n||u!==0?u:0,a&&d===d){for(var p=c.length;p--;)if(c[p]===d)continue e;t&&c.push(d),s.push(u)}else o(c,d,n)||(c!==s&&c.push(d),s.push(u))}return s}var aQ=iQ,sQ=zn,cQ=aQ;function lQ(e,t){return e&&e.length?cQ(e,sQ(t)):[]}var uQ=lQ;const VE=Ne(uQ);function UE(e,t,n){return t===!0?VE(e,n):Ce(t)?VE(e,t):e}function ji(e){"@babel/helpers - typeof";return ji=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ji(e)}var dQ=["ref"];function qE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function gr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?qE(Object(n),!0).forEach(function(r){eu(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function pQ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function HE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,XE(r.key),r)}}function fQ(e,t,n){return t&&HE(e.prototype,t),n&&HE(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function hQ(e,t,n){return t=Jl(t),mQ(e,WE()?Reflect.construct(t,n||[],Jl(e).constructor):t.apply(e,n))}function mQ(e,t){if(t&&(ji(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return yQ(e)}function yQ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function WE(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(WE=function(){return!!e})()}function Jl(e){return Jl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Jl(e)}function gQ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&om(e,t)}function om(e,t){return om=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},om(e,t)}function eu(e,t,n){return t=XE(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function XE(e){var t=vQ(e,"string");return ji(t)=="symbol"?t:t+""}function vQ(e,t){if(ji(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(ji(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function bQ(e,t){if(e==null)return{};var n=xQ(e,t),r,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)r=i[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function xQ(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function wQ(e){return e.value}function _Q(e,t){if($.isValidElement(e))return $.cloneElement(e,t);if(typeof e=="function")return $.createElement(e,t);t.ref;var n=bQ(t,dQ);return $.createElement(nm,n)}var QE=1,Oi=function(e){function t(){var n;pQ(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=hQ(this,t,[].concat(o)),eu(n,"lastBoundingBox",{width:-1,height:-1}),n}return gQ(t,e),fQ(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,r=this.getBBox();r?(Math.abs(r.width-this.lastBoundingBox.width)>QE||Math.abs(r.height-this.lastBoundingBox.height)>QE)&&(this.lastBoundingBox.width=r.width,this.lastBoundingBox.height=r.height,n&&n(r)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?gr({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var r=this.props,o=r.layout,i=r.align,a=r.verticalAlign,s=r.margin,c=r.chartWidth,l=r.chartHeight,u,d;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(i==="center"&&o==="vertical"){var p=this.getBBoxSnapshot();u={left:((c||0)-p.width)/2}}else u=i==="right"?{right:s&&s.right||0}:{left:s&&s.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(a==="middle"){var f=this.getBBoxSnapshot();d={top:((l||0)-f.height)/2}}else d=a==="bottom"?{bottom:s&&s.bottom||0}:{top:s&&s.top||0};return gr(gr({},u),d)}},{key:"render",value:function(){var n=this,r=this.props,o=r.content,i=r.width,a=r.height,s=r.wrapperStyle,c=r.payloadUniqBy,l=r.payload,u=gr(gr({position:"absolute",width:i||"auto",height:a||"auto"},this.getDefaultPosition(s)),s);return $.createElement("div",{className:"recharts-legend-wrapper",style:u,ref:function(d){n.wrapperNode=d}},_Q(o,gr(gr({},this.props),{},{payload:UE(l,c,wQ)})))}}],[{key:"getWithHeight",value:function(n,r){var o=gr(gr({},this.defaultProps),n.props),i=o.layout;return i==="vertical"&&ae(n.props.height)?{height:n.props.height}:i==="horizontal"?{width:n.props.width||r}:null}}])}(v.PureComponent);eu(Oi,"displayName","Legend"),eu(Oi,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var YE=Ro,jQ=cc,OQ=Ct,GE=YE?YE.isConcatSpreadable:void 0;function EQ(e){return OQ(e)||jQ(e)||!!(GE&&e&&e[GE])}var SQ=EQ,MQ=il,CQ=SQ;function KE(e,t,n,r,o){var i=-1,a=e.length;for(n||(n=CQ),o||(o=[]);++i<a;){var s=e[i];t>0&&n(s)?t>1?KE(s,t-1,n,r,o):MQ(o,s):r||(o[o.length]=s)}return o}Id=KE;function PQ(e){return function(t,n,r){for(var o=-1,i=Object(t),a=r(t),s=a.length;s--;){var c=a[e?s:++o];if(n(i[c],c,i)===!1)break}return t}}let ZE,JE,eS,tS,nS;ZE=PQ,JE=ZE,eS=JE(),Zg=eS,tS=Zg,nS=pa;function NQ(e,t){return e&&tS(e,t,nS)}var rS=NQ,kQ=Xr;function AQ(e,t){return function(n,r){if(n==null)return n;if(!kQ(n))return e(n,r);for(var o=n.length,i=t?o:-1,a=Object(n);(t?i--:++i<o)&&r(a[i],i,a)!==!1;);return n}}var TQ=AQ,IQ=rS,DQ=TQ,RQ=DQ(IQ),im=RQ,LQ=im,BQ=Xr;function $Q(e,t){var n=-1,r=BQ(e)?Array(e.length):[];return LQ(e,function(o,i,a){r[++n]=t(o,i,a)}),r}var oS=$Q;function FQ(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}var zQ=FQ,iS=oi;function VQ(e,t){if(e!==t){var n=e!==void 0,r=e===null,o=e===e,i=iS(e),a=t!==void 0,s=t===null,c=t===t,l=iS(t);if(!s&&!l&&!i&&e>t||i&&a&&c&&!s&&!l||r&&a&&c||!n&&c||!o)return 1;if(!r&&!i&&!l&&e<t||l&&n&&o&&!r&&!i||s&&n&&o||!a&&o||!c)return-1}return 0}var UQ=VQ,qQ=UQ;function HQ(e,t,n){for(var r=-1,o=e.criteria,i=t.criteria,a=o.length,s=n.length;++r<a;){var c=qQ(o[r],i[r]);if(c){if(r>=s)return c;var l=n[r];return c*(l=="desc"?-1:1)}}return e.index-t.index}var WQ=HQ,am=ua,XQ=fa,QQ=zn,YQ=oS,GQ=zQ,KQ=Gd,ZQ=WQ,JQ=ii,eY=Ct;function tY(e,t,n){t.length?t=am(t,function(i){return eY(i)?function(a){return XQ(a,i.length===1?i[0]:i)}:i}):t=[JQ];var r=-1;t=am(t,KQ(QQ));var o=YQ(e,function(i,a,s){var c=am(t,function(l){return l(i)});return{criteria:c,index:++r,value:i}});return GQ(o,function(i,a){return ZQ(i,a,n)})}var nY=tY;function rY(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}let aS,sm;ov=rY,aS=ov,sm=Math.max;function oY(e,t,n){return t=sm(t===void 0?e.length-1:t,0),function(){for(var r=arguments,o=-1,i=sm(r.length-t,0),a=Array(i);++o<i;)a[o]=r[t+o];o=-1;for(var s=Array(t+1);++o<t;)s[o]=r[o];return s[t]=n(a),aS(e,this,s)}}Gg=oY;function iY(e){return function(){return e}}var aY=iY,sY=aY,sS=G1,cY=ii,lY=sS?function(e,t){return sS(e,"toString",{configurable:!0,enumerable:!1,value:sY(t),writable:!0})}:cY,uY=lY,dY=800,pY=16,fY=Date.now;function hY(e){var t=0,n=0;return function(){var r=fY(),o=pY-(r-n);if(n=r,o>0){if(++t>=dY)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}let cS,lS,uS,dS,pS,fS,hS;cS=hY,lS=uY,uS=cS,dS=uS(lS),Kg=dS,pS=ii,fS=Gg,hS=Kg;function mY(e,t){return hS(fS(e,t,pS),e+"")}let mS,yS,gS,vS;Jg=mY,mS=da,yS=Xr,gS=al,vS=vn;function yY(e,t,n){if(!vS(n))return!1;var r=typeof t;return(r=="number"?yS(n)&&gS(t,n.length):r=="string"&&t in n)?mS(n[t],e):!1}let bS,xS,wS,cm,_S,jS;Io=yY,bS=Id,xS=nY,wS=Jg,cm=Io,_S=wS(function(e,t){if(e==null)return[];var n=t.length;return n>1&&cm(e,t[0],t[1])?t=[]:n>2&&cm(t[0],t[1],t[2])&&(t=[t[0]]),xS(e,bS(t,1),[])}),jS=_S;const lm=Ne(jS);function ds(e){"@babel/helpers - typeof";return ds=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ds(e)}function um(){return um=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},um.apply(this,arguments)}function gY(e,t){return wY(e)||xY(e,t)||bY(e,t)||vY()}function vY(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bY(e,t){if(e){if(typeof e=="string")return OS(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return OS(e,t)}}function OS(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function xY(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,o,i,a,s=[],c=!0,l=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(u){l=!0,o=u}finally{try{if(!c&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}function wY(e){if(Array.isArray(e))return e}function ES(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function dm(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ES(Object(n),!0).forEach(function(r){_Y(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ES(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function _Y(e,t,n){return t=jY(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jY(e){var t=OY(e,"string");return ds(t)=="symbol"?t:t+""}function OY(e,t){if(ds(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(ds(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function EY(e){return Array.isArray(e)&&ut(e[0])&&ut(e[1])?e.join(" ~ "):e}var SY=function(e){var t=e.separator,n=t===void 0?" : ":t,r=e.contentStyle,o=r===void 0?{}:r,i=e.itemStyle,a=i===void 0?{}:i,s=e.labelStyle,c=s===void 0?{}:s,l=e.payload,u=e.formatter,d=e.itemSorter,p=e.wrapperClassName,f=e.labelClassName,y=e.label,m=e.labelFormatter,g=e.accessibilityLayer,b=g===void 0?!1:g,w=function(){if(l&&l.length){var A={padding:0,margin:0},P=(d?lm(l,d):l).map(function(T,L){if(T.type==="none")return null;var S=dm({display:"block",paddingTop:4,paddingBottom:4,color:T.color||"#000"},a),C=T.formatter||u||EY,k=T.value,D=T.name,R=k,B=D;if(C&&R!=null&&B!=null){var F=C(k,D,T,L,l);if(Array.isArray(F)){var V=gY(F,2);R=V[0],B=V[1]}else R=F}return $.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(L),style:S},ut(B)?$.createElement("span",{className:"recharts-tooltip-item-name"},B):null,ut(B)?$.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,$.createElement("span",{className:"recharts-tooltip-item-value"},R),$.createElement("span",{className:"recharts-tooltip-item-unit"},T.unit||""))});return $.createElement("ul",{className:"recharts-tooltip-item-list",style:A},P)}return null},_=dm({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},o),x=dm({margin:0},c),j=!Re(y),O=j?y:"",E=Le("recharts-default-tooltip",p),M=Le("recharts-tooltip-label",f);j&&m&&l!==void 0&&l!==null&&(O=m(y,l));var N=b?{role:"status","aria-live":"assertive"}:{};return $.createElement("div",um({className:E,style:_},N),$.createElement("p",{className:M,style:x},$.isValidElement(O)?O:"".concat(O)),w())};function ps(e){"@babel/helpers - typeof";return ps=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ps(e)}function tu(e,t,n){return t=MY(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function MY(e){var t=CY(e,"string");return ps(t)=="symbol"?t:t+""}function CY(e,t){if(ps(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(ps(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var fs="recharts-tooltip-wrapper",PY={visibility:"hidden"};function NY(e){var t=e.coordinate,n=e.translateX,r=e.translateY;return Le(fs,tu(tu(tu(tu({},"".concat(fs,"-right"),ae(n)&&t&&ae(t.x)&&n>=t.x),"".concat(fs,"-left"),ae(n)&&t&&ae(t.x)&&n<t.x),"".concat(fs,"-bottom"),ae(r)&&t&&ae(t.y)&&r>=t.y),"".concat(fs,"-top"),ae(r)&&t&&ae(t.y)&&r<t.y))}function SS(e){var t=e.allowEscapeViewBox,n=e.coordinate,r=e.key,o=e.offsetTopLeft,i=e.position,a=e.reverseDirection,s=e.tooltipDimension,c=e.viewBox,l=e.viewBoxDimension;if(i&&ae(i[r]))return i[r];var u=n[r]-s-o,d=n[r]+o;if(t[r])return a[r]?u:d;if(a[r]){var p=u,f=c[r];return p<f?Math.max(d,c[r]):Math.max(u,c[r])}var y=d+s,m=c[r]+l;return y>m?Math.max(u,c[r]):Math.max(d,c[r])}function kY(e){var t=e.translateX,n=e.translateY,r=e.useTranslate3d;return{transform:r?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}function AY(e){var t=e.allowEscapeViewBox,n=e.coordinate,r=e.offsetTopLeft,o=e.position,i=e.reverseDirection,a=e.tooltipBox,s=e.useTranslate3d,c=e.viewBox,l,u,d;return a.height>0&&a.width>0&&n?(u=SS({allowEscapeViewBox:t,coordinate:n,key:"x",offsetTopLeft:r,position:o,reverseDirection:i,tooltipDimension:a.width,viewBox:c,viewBoxDimension:c.width}),d=SS({allowEscapeViewBox:t,coordinate:n,key:"y",offsetTopLeft:r,position:o,reverseDirection:i,tooltipDimension:a.height,viewBox:c,viewBoxDimension:c.height}),l=kY({translateX:u,translateY:d,useTranslate3d:s})):l=PY,{cssProperties:l,cssClasses:NY({translateX:u,translateY:d,coordinate:n})}}function Ei(e){"@babel/helpers - typeof";return Ei=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ei(e)}function MS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function CS(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?MS(Object(n),!0).forEach(function(r){fm(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):MS(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function TY(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function IY(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,NS(r.key),r)}}function DY(e,t,n){return t&&IY(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function RY(e,t,n){return t=nu(t),LY(e,PS()?Reflect.construct(t,n||[],nu(e).constructor):t.apply(e,n))}function LY(e,t){if(t&&(Ei(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return BY(e)}function BY(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function PS(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(PS=function(){return!!e})()}function nu(e){return nu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},nu(e)}function $Y(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pm(e,t)}function pm(e,t){return pm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},pm(e,t)}function fm(e,t,n){return t=NS(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function NS(e){var t=FY(e,"string");return Ei(t)=="symbol"?t:t+""}function FY(e,t){if(Ei(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Ei(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var kS=1,zY=function(e){function t(){var n;TY(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=RY(this,t,[].concat(o)),fm(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),fm(n,"handleKeyDown",function(a){if(a.key==="Escape"){var s,c,l,u;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(s=(c=n.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&s!==void 0?s:0,y:(l=(u=n.props.coordinate)===null||u===void 0?void 0:u.y)!==null&&l!==void 0?l:0}})}}),n}return $Y(t,e),DY(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>kS||Math.abs(n.height-this.state.lastBoundingBox.height)>kS)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,r;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,r=this.props,o=r.active,i=r.allowEscapeViewBox,a=r.animationDuration,s=r.animationEasing,c=r.children,l=r.coordinate,u=r.hasPayload,d=r.isAnimationActive,p=r.offset,f=r.position,y=r.reverseDirection,m=r.useTranslate3d,g=r.viewBox,b=r.wrapperStyle,w=AY({allowEscapeViewBox:i,coordinate:l,offsetTopLeft:p,position:f,reverseDirection:y,tooltipBox:this.state.lastBoundingBox,useTranslate3d:m,viewBox:g}),_=w.cssClasses,x=w.cssProperties,j=CS(CS({transition:d&&o?"transform ".concat(a,"ms ").concat(s):void 0},x),{},{pointerEvents:"none",visibility:!this.state.dismissed&&o&&u?"visible":"hidden",position:"absolute",top:0,left:0},b);return $.createElement("div",{tabIndex:-1,className:_,style:j,ref:function(O){n.wrapperNode=O}},c)}}])}(v.PureComponent),VY=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Br={isSsr:VY(),get:function(e){return Br[e]},set:function(e,t){if(typeof e=="string")Br[e]=t;else{var n=Object.keys(e);n&&n.length&&n.forEach(function(r){Br[r]=e[r]})}}};function Si(e){"@babel/helpers - typeof";return Si=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Si(e)}function AS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function TS(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?AS(Object(n),!0).forEach(function(r){mm(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):AS(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function UY(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qY(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,DS(r.key),r)}}function HY(e,t,n){return t&&qY(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function WY(e,t,n){return t=ru(t),XY(e,IS()?Reflect.construct(t,n||[],ru(e).constructor):t.apply(e,n))}function XY(e,t){if(t&&(Si(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return QY(e)}function QY(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function IS(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(IS=function(){return!!e})()}function ru(e){return ru=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ru(e)}function YY(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hm(e,t)}function hm(e,t){return hm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},hm(e,t)}function mm(e,t,n){return t=DS(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function DS(e){var t=GY(e,"string");return Si(t)=="symbol"?t:t+""}function GY(e,t){if(Si(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Si(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function KY(e){return e.dataKey}function ZY(e,t){return $.isValidElement(e)?$.cloneElement(e,t):typeof e=="function"?$.createElement(e,t):$.createElement(SY,t)}var Hn=function(e){function t(){return UY(this,t),WY(this,t,arguments)}return YY(t,e),HY(t,[{key:"render",value:function(){var n=this,r=this.props,o=r.active,i=r.allowEscapeViewBox,a=r.animationDuration,s=r.animationEasing,c=r.content,l=r.coordinate,u=r.filterNull,d=r.isAnimationActive,p=r.offset,f=r.payload,y=r.payloadUniqBy,m=r.position,g=r.reverseDirection,b=r.useTranslate3d,w=r.viewBox,_=r.wrapperStyle,x=f??[];u&&x.length&&(x=UE(f.filter(function(O){return O.value!=null&&(O.hide!==!0||n.props.includeHidden)}),y,KY));var j=x.length>0;return $.createElement(zY,{allowEscapeViewBox:i,animationDuration:a,animationEasing:s,isAnimationActive:d,active:o,coordinate:l,hasPayload:j,offset:p,position:m,reverseDirection:g,useTranslate3d:b,viewBox:w,wrapperStyle:_},ZY(c,TS(TS({},this.props),{},{payload:x})))}}])}(v.PureComponent);mm(Hn,"displayName","Tooltip"),mm(Hn,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Br.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var JY=gn,eG=function(){return JY.Date.now()},tG=eG,nG=/\s/;function rG(e){for(var t=e.length;t--&&nG.test(e.charAt(t)););return t}var oG=rG,iG=oG,aG=/^\s+/;function sG(e){return e&&e.slice(0,iG(e)+1).replace(aG,"")}var cG=sG,lG=cG,RS=vn,uG=oi,LS=NaN,dG=/^[-+]0x[0-9a-f]+$/i,pG=/^0b[01]+$/i,fG=/^0o[0-7]+$/i,hG=parseInt;function mG(e){if(typeof e=="number")return e;if(uG(e))return LS;if(RS(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=RS(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=lG(e);var n=pG.test(e);return n||fG.test(e)?hG(e.slice(2),n?2:8):dG.test(e)?LS:+e}var BS=mG,yG=vn,ym=tG,$S=BS,gG="Expected a function",vG=Math.max,bG=Math.min;function xG(e,t,n){var r,o,i,a,s,c,l=0,u=!1,d=!1,p=!0;if(typeof e!="function")throw new TypeError(gG);t=$S(t)||0,yG(n)&&(u=!!n.leading,d="maxWait"in n,i=d?vG($S(n.maxWait)||0,t):i,p="trailing"in n?!!n.trailing:p);function f(O){var E=r,M=o;return r=o=void 0,l=O,a=e.apply(M,E),a}function y(O){return l=O,s=setTimeout(b,t),u?f(O):a}function m(O){var E=O-c,M=O-l,N=t-E;return d?bG(N,i-M):N}function g(O){var E=O-c,M=O-l;return c===void 0||E>=t||E<0||d&&M>=i}function b(){var O=ym();if(g(O))return w(O);s=setTimeout(b,m(O))}function w(O){return s=void 0,p&&r?f(O):(r=o=void 0,a)}function _(){s!==void 0&&clearTimeout(s),l=0,r=c=o=s=void 0}function x(){return s===void 0?a:w(ym())}function j(){var O=ym(),E=g(O);if(r=arguments,o=this,c=O,E){if(s===void 0)return y(c);if(d)return clearTimeout(s),s=setTimeout(b,t),f(c)}return s===void 0&&(s=setTimeout(b,t)),a}return j.cancel=_,j.flush=x,j}var FS=xG;eA=Ne(FS);var wG=FS,_G=vn,jG="Expected a function";function OG(e,t,n){var r=!0,o=!0;if(typeof e!="function")throw new TypeError(jG);return _G(n)&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),wG(e,t,{leading:r,maxWait:t,trailing:o})}var EG=OG;Rd=Ne(EG);function hs(e){"@babel/helpers - typeof";return hs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hs(e)}function zS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function ou(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?zS(Object(n),!0).forEach(function(r){SG(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zS(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function SG(e,t,n){return t=MG(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function MG(e){var t=CG(e,"string");return hs(t)=="symbol"?t:t+""}function CG(e,t){if(hs(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(hs(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function PG(e,t){return TG(e)||AG(e,t)||kG(e,t)||NG()}function NG(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kG(e,t){if(e){if(typeof e=="string")return VS(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return VS(e,t)}}function VS(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function AG(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,o,i,a,s=[],c=!0,l=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(u){l=!0,o=u}finally{try{if(!c&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}function TG(e){if(Array.isArray(e))return e}var IG=v.forwardRef(function(e,t){var n=e.aspect,r=e.initialDimension,o=r===void 0?{width:-1,height:-1}:r,i=e.width,a=i===void 0?"100%":i,s=e.height,c=s===void 0?"100%":s,l=e.minWidth,u=l===void 0?0:l,d=e.minHeight,p=e.maxHeight,f=e.children,y=e.debounce,m=y===void 0?0:y,g=e.id,b=e.className,w=e.onResize,_=e.style,x=_===void 0?{}:_,j=v.useRef(null),O=v.useRef();O.current=w,v.useImperativeHandle(t,function(){return Object.defineProperty(j.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),j.current},configurable:!0})});var E=v.useState({containerWidth:o.width,containerHeight:o.height}),M=PG(E,2),N=M[0],A=M[1],P=v.useCallback(function(L,S){A(function(C){var k=Math.round(L),D=Math.round(S);return C.containerWidth===k&&C.containerHeight===D?C:{containerWidth:k,containerHeight:D}})},[]);v.useEffect(function(){var L=function(R){var B,F=R[0].contentRect,V=F.width,I=F.height;P(V,I),(B=O.current)===null||B===void 0||B.call(O,V,I)};m>0&&(L=Rd(L,m,{trailing:!0,leading:!1}));var S=new ResizeObserver(L),C=j.current.getBoundingClientRect(),k=C.width,D=C.height;return P(k,D),S.observe(j.current),function(){S.disconnect()}},[P,m]);var T=v.useMemo(function(){var L=N.containerWidth,S=N.containerHeight;if(L<0||S<0)return null;yr(ho(a)||ho(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,a,c),yr(!n||n>0,"The aspect(%s) must be greater than zero.",n);var C=ho(a)?L:a,k=ho(c)?S:c;n&&n>0&&(C?k=C/n:k&&(C=k*n),p&&k>p&&(k=p)),yr(C>0||k>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,C,k,a,c,u,d,n);var D=!Array.isArray(f)&&mr(f.type).endsWith("Chart");return $.Children.map(f,function(R){return $.isValidElement(R)?v.cloneElement(R,ou({width:C,height:k},D?{style:ou({height:"100%",width:"100%",maxHeight:k,maxWidth:C},R.props.style)}:{})):R})},[n,f,c,p,d,u,N,a]);return $.createElement("div",{id:g?"".concat(g):void 0,className:Le("recharts-responsive-container",b),style:ou(ou({},x),{},{width:a,height:c,minWidth:u,minHeight:d,maxHeight:p}),ref:j},T)}),US=function(e){return null};US.displayName="Cell";function ms(e){"@babel/helpers - typeof";return ms=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ms(e)}function qS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function gm(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?qS(Object(n),!0).forEach(function(r){DG(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qS(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function DG(e,t,n){return t=RG(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function RG(e){var t=LG(e,"string");return ms(t)=="symbol"?t:t+""}function LG(e,t){if(ms(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(ms(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Mi={widthCache:{},cacheCount:0},BG=2e3,$G={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},HS="recharts_measurement_span";function FG(e){var t=gm({},e);return Object.keys(t).forEach(function(n){t[n]||delete t[n]}),t}var ys=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||Br.isSsr)return{width:0,height:0};var n=FG(t),r=JSON.stringify({text:e,copyStyle:n});if(Mi.widthCache[r])return Mi.widthCache[r];try{var o=document.getElementById(HS);o||(o=document.createElement("span"),o.setAttribute("id",HS),o.setAttribute("aria-hidden","true"),document.body.appendChild(o));var i=gm(gm({},$G),n);Object.assign(o.style,i),o.textContent="".concat(e);var a=o.getBoundingClientRect(),s={width:a.width,height:a.height};return Mi.widthCache[r]=s,++Mi.cacheCount>BG&&(Mi.cacheCount=0,Mi.widthCache={}),s}catch{return{width:0,height:0}}},zG=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function gs(e){"@babel/helpers - typeof";return gs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gs(e)}function iu(e,t){return HG(e)||qG(e,t)||UG(e,t)||VG()}function VG(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function UG(e,t){if(e){if(typeof e=="string")return WS(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return WS(e,t)}}function WS(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function qG(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,o,i,a,s=[],c=!0,l=!1;try{if(i=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(u){l=!0,o=u}finally{try{if(!c&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}function HG(e){if(Array.isArray(e))return e}function WG(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function XS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,QG(r.key),r)}}function XG(e,t,n){return t&&XS(e.prototype,t),n&&XS(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function QG(e){var t=YG(e,"string");return gs(t)=="symbol"?t:t+""}function YG(e,t){if(gs(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(gs(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var QS=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,YS=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,GG=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,KG=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,GS={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},ZG=Object.keys(GS),Ci="NaN";function JG(e,t){return e*GS[t]}var au=function(){function e(t,n){WG(this,e),this.num=t,this.unit=n,this.num=t,this.unit=n,Number.isNaN(t)&&(this.unit=""),n!==""&&!GG.test(n)&&(this.num=NaN,this.unit=""),ZG.includes(n)&&(this.num=JG(t,n),this.unit="px")}return XG(e,[{key:"add",value:function(t){return this.unit!==t.unit?new e(NaN,""):new e(this.num+t.num,this.unit)}},{key:"subtract",value:function(t){return this.unit!==t.unit?new e(NaN,""):new e(this.num-t.num,this.unit)}},{key:"multiply",value:function(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new e(NaN,""):new e(this.num*t.num,this.unit||t.unit)}},{key:"divide",value:function(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new e(NaN,""):new e(this.num/t.num,this.unit||t.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(t){var n,r=(n=KG.exec(t))!==null&&n!==void 0?n:[],o=iu(r,3),i=o[1],a=o[2];return new e(parseFloat(i),a??"")}}])}();function KS(e){if(e.includes(Ci))return Ci;for(var t=e;t.includes("*")||t.includes("/");){var n,r=(n=QS.exec(t))!==null&&n!==void 0?n:[],o=iu(r,4),i=o[1],a=o[2],s=o[3],c=au.parse(i??""),l=au.parse(s??""),u=a==="*"?c.multiply(l):c.divide(l);if(u.isNaN())return Ci;t=t.replace(QS,u.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var d,p=(d=YS.exec(t))!==null&&d!==void 0?d:[],f=iu(p,4),y=f[1],m=f[2],g=f[3],b=au.parse(y??""),w=au.parse(g??""),_=m==="+"?b.add(w):b.subtract(w);if(_.isNaN())return Ci;t=t.replace(YS,_.toString())}return t}var ZS=/\(([^()]*)\)/;function eK(e){for(var t=e;t.includes("(");){var n=ZS.exec(t),r=iu(n,2),o=r[1];t=t.replace(ZS,KS(o))}return t}function tK(e){var t=e.replace(/\s+/g,"");return t=eK(t),t=KS(t),t}function nK(e){try{return tK(e)}catch{return Ci}}function vm(e){var t=nK(e.slice(5,-1));return t===Ci?"":t}var rK=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],oK=["dx","dy","angle","className","breakAll"];function bm(){return bm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bm.apply(this,arguments)}function JS(e,t){if(e==null)return{};var n=iK(e,t),r,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)r=i[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function iK(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function eM(e,t){return lK(e)||cK(e,t)||sK(e,t)||aK()}function aK(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sK(e,t){if(e){if(typeof e=="string")return tM(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tM(e,t)}}function tM(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function cK(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,o,i,a,s=[],c=!0,l=!1;try{if(i=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(u){l=!0,o=u}finally{try{if(!c&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}function lK(e){if(Array.isArray(e))return e}var nM=/[ \f\n\r\t\v\u2028\u2029]+/,rM=function(e){var t=e.children,n=e.breakAll,r=e.style;try{var o=[];Re(t)||(n?o=t.toString().split(""):o=t.toString().split(nM));var i=o.map(function(s){return{word:s,width:ys(s,r).width}}),a=n?0:ys("\xA0",r).width;return{wordsWithComputedWidth:i,spaceWidth:a}}catch{return null}},uK=function(e,t,n,r,o){var i=e.maxLines,a=e.children,s=e.style,c=e.breakAll,l=ae(i),u=a,d=function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return L.reduce(function(S,C){var k=C.word,D=C.width,R=S[S.length-1];if(R&&(r==null||o||R.width+D+n<Number(r)))R.words.push(k),R.width+=D+n;else{var B={words:[k],width:D};S.push(B)}return S},[])},p=d(t),f=function(L){return L.reduce(function(S,C){return S.width>C.width?S:C})};if(!l)return p;for(var y="\u2026",m=function(L){var S=u.slice(0,L),C=rM({breakAll:c,style:s,children:S+y}).wordsWithComputedWidth,k=d(C),D=k.length>i||f(k).width>Number(r);return[D,k]},g=0,b=u.length-1,w=0,_;g<=b&&w<=u.length-1;){var x=Math.floor((g+b)/2),j=x-1,O=m(j),E=eM(O,2),M=E[0],N=E[1],A=m(x),P=eM(A,1),T=P[0];if(!M&&!T&&(g=x+1),M&&T&&(b=x-1),!M&&T){_=N;break}w++}return _||p},oM=function(e){var t=Re(e)?[]:e.toString().split(nM);return[{words:t}]},dK=function(e){var t=e.width,n=e.scaleToFit,r=e.children,o=e.style,i=e.breakAll,a=e.maxLines;if((t||n)&&!Br.isSsr){var s,c,l=rM({breakAll:i,children:r,style:o});if(l){var u=l.wordsWithComputedWidth,d=l.spaceWidth;s=u,c=d}else return oM(r);return uK({breakAll:i,children:r,maxLines:a,style:o},s,c,t,n)}return oM(r)},iM="#808080",su=function(e){var t=e.x,n=t===void 0?0:t,r=e.y,o=r===void 0?0:r,i=e.lineHeight,a=i===void 0?"1em":i,s=e.capHeight,c=s===void 0?"0.71em":s,l=e.scaleToFit,u=l===void 0?!1:l,d=e.textAnchor,p=d===void 0?"start":d,f=e.verticalAnchor,y=f===void 0?"end":f,m=e.fill,g=m===void 0?iM:m,b=JS(e,rK),w=v.useMemo(function(){return dK({breakAll:b.breakAll,children:b.children,maxLines:b.maxLines,scaleToFit:u,style:b.style,width:b.width})},[b.breakAll,b.children,b.maxLines,u,b.style,b.width]),_=b.dx,x=b.dy,j=b.angle,O=b.className,E=b.breakAll,M=JS(b,oK);if(!ut(n)||!ut(o))return null;var N=n+(ae(_)?_:0),A=o+(ae(x)?x:0),P;switch(y){case"start":P=vm("calc(".concat(c,")"));break;case"middle":P=vm("calc(".concat((w.length-1)/2," * -").concat(a," + (").concat(c," / 2))"));break;default:P=vm("calc(".concat(w.length-1," * -").concat(a,")"));break}var T=[];if(u){var L=w[0].width,S=b.width;T.push("scale(".concat((ae(S)?S/L:1)/L,")"))}return j&&T.push("rotate(".concat(j,", ").concat(N,", ").concat(A,")")),T.length&&(M.transform=T.join(" ")),$.createElement("text",bm({},Ie(M,!0),{x:N,y:A,className:Le("recharts-text",O),textAnchor:p,fill:g.includes("url")?iM:g}),w.map(function(C,k){var D=C.words.join(E?"":" ");return $.createElement("tspan",{x:N,dy:k===0?P:a,key:"".concat(D,"-").concat(k)},D)}))};function $r(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function pK(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function xm(e){let t,n,r;e.length!==2?(t=$r,n=(s,c)=>$r(e(s),c),r=(s,c)=>e(s)-c):(t=e===$r||e===pK?e:fK,n=e,r=e);function o(s,c,l=0,u=s.length){if(l<u){if(t(c,c)!==0)return u;do{const d=l+u>>>1;n(s[d],c)<0?l=d+1:u=d}while(l<u)}return l}function i(s,c,l=0,u=s.length){if(l<u){if(t(c,c)!==0)return u;do{const d=l+u>>>1;n(s[d],c)<=0?l=d+1:u=d}while(l<u)}return l}function a(s,c,l=0,u=s.length){const d=o(s,c,l,u-1);return d>l&&r(s[d-1],c)>-r(s[d],c)?d-1:d}return{left:o,center:a,right:i}}function fK(){return 0}function aM(e){return e===null?NaN:+e}function*hK(e,t){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const mK=xm($r),vs=mK.right;xm(aM).center;class sM extends Map{constructor(t,n=vK){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,o]of t)this.set(r,o)}get(t){return super.get(cM(this,t))}has(t){return super.has(cM(this,t))}set(t,n){return super.set(yK(this,t),n)}delete(t){return super.delete(gK(this,t))}}function cM({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function yK({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function gK({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function vK(e){return e!==null&&typeof e=="object"?e.valueOf():e}function bK(e=$r){if(e===$r)return lM;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function lM(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const xK=Math.sqrt(50),wK=Math.sqrt(10),_K=Math.sqrt(2);function cu(e,t,n){const r=(t-e)/Math.max(0,n),o=Math.floor(Math.log10(r)),i=r/Math.pow(10,o),a=i>=xK?10:i>=wK?5:i>=_K?2:1;let s,c,l;return o<0?(l=Math.pow(10,-o)/a,s=Math.round(e*l),c=Math.round(t*l),s/l<e&&++s,c/l>t&&--c,l=-l):(l=Math.pow(10,o)*a,s=Math.round(e/l),c=Math.round(t/l),s*l<e&&++s,c*l>t&&--c),c<s&&.5<=n&&n<2?cu(e,t,n*2):[s,c,l]}function wm(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[o,i,a]=r?cu(t,e,n):cu(e,t,n);if(!(i>=o))return[];const s=i-o+1,c=new Array(s);if(r)if(a<0)for(let l=0;l<s;++l)c[l]=(i-l)/-a;else for(let l=0;l<s;++l)c[l]=(i-l)*a;else if(a<0)for(let l=0;l<s;++l)c[l]=(o+l)/-a;else for(let l=0;l<s;++l)c[l]=(o+l)*a;return c}function _m(e,t,n){return t=+t,e=+e,n=+n,cu(e,t,n)[2]}function jm(e,t,n){t=+t,e=+e,n=+n;const r=t<e,o=r?_m(t,e,n):_m(e,t,n);return(r?-1:1)*(o<0?1/-o:o)}function uM(e,t){let n;for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function dM(e,t){let n;for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function pM(e,t,n=0,r=1/0,o){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(o=o===void 0?lM:bK(o);r>n;){if(r-n>600){const c=r-n+1,l=t-n+1,u=Math.log(c),d=.5*Math.exp(2*u/3),p=.5*Math.sqrt(u*d*(c-d)/c)*(l-c/2<0?-1:1),f=Math.max(n,Math.floor(t-l*d/c+p)),y=Math.min(r,Math.floor(t+(c-l)*d/c+p));pM(e,t,f,y,o)}const i=e[t];let a=n,s=r;for(bs(e,n,t),o(e[r],i)>0&&bs(e,n,r);a<s;){for(bs(e,a,s),++a,--s;o(e[a],i)<0;)++a;for(;o(e[s],i)>0;)--s}o(e[n],i)===0?bs(e,n,s):(++s,bs(e,s,r)),s<=t&&(n=s+1),t<=s&&(r=s-1)}return e}function bs(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function jK(e,t,n){if(e=Float64Array.from(hK(e)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return dM(e);if(t>=1)return uM(e);var r,o=(r-1)*t,i=Math.floor(o),a=uM(pM(e,i).subarray(0,i+1)),s=dM(e.subarray(i+1));return a+(s-a)*(o-i)}}function OK(e,t,n=aM){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,o=(r-1)*t,i=Math.floor(o),a=+n(e[i],i,e),s=+n(e[i+1],i+1,e);return a+(s-a)*(o-i)}}function EK(e,t,n){e=+e,t=+t,n=(o=arguments.length)<2?(t=e,e=0,1):o<3?1:+n;for(var r=-1,o=Math.max(0,Math.ceil((t-e)/n))|0,i=new Array(o);++r<o;)i[r]=e+r*n;return i}function fn(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function vr(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const Om=Symbol("implicit");function Em(){var e=new sM,t=[],n=[],r=Om;function o(i){let a=e.get(i);if(a===void 0){if(r!==Om)return r;e.set(i,a=t.push(i)-1)}return n[a%n.length]}return o.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new sM;for(const a of i)e.has(a)||e.set(a,t.push(a)-1);return o},o.range=function(i){return arguments.length?(n=Array.from(i),o):n.slice()},o.unknown=function(i){return arguments.length?(r=i,o):r},o.copy=function(){return Em(t,n).unknown(r)},fn.apply(o,arguments),o}function xs(){var e=Em().unknown(void 0),t=e.domain,n=e.range,r=0,o=1,i,a,s=!1,c=0,l=0,u=.5;delete e.unknown;function d(){var p=t().length,f=o<r,y=f?o:r,m=f?r:o;i=(m-y)/Math.max(1,p-c+l*2),s&&(i=Math.floor(i)),y+=(m-y-i*(p-c))*u,a=i*(1-c),s&&(y=Math.round(y),a=Math.round(a));var g=EK(p).map(function(b){return y+i*b});return n(f?g.reverse():g)}return e.domain=function(p){return arguments.length?(t(p),d()):t()},e.range=function(p){return arguments.length?([r,o]=p,r=+r,o=+o,d()):[r,o]},e.rangeRound=function(p){return[r,o]=p,r=+r,o=+o,s=!0,d()},e.bandwidth=function(){return a},e.step=function(){return i},e.round=function(p){return arguments.length?(s=!!p,d()):s},e.padding=function(p){return arguments.length?(c=Math.min(1,l=+p),d()):c},e.paddingInner=function(p){return arguments.length?(c=Math.min(1,p),d()):c},e.paddingOuter=function(p){return arguments.length?(l=+p,d()):l},e.align=function(p){return arguments.length?(u=Math.max(0,Math.min(1,p)),d()):u},e.copy=function(){return xs(t(),[r,o]).round(s).paddingInner(c).paddingOuter(l).align(u)},fn.apply(d(),arguments)}function fM(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return fM(t())},e}function ws(){return fM(xs.apply(null,arguments).paddingInner(1))}function SK(e){return function(){return e}}function lu(e){return+e}var hM=[0,1];function kt(e){return e}function Sm(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:SK(isNaN(t)?NaN:.5)}function MK(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function CK(e,t,n){var r=e[0],o=e[1],i=t[0],a=t[1];return o<r?(r=Sm(o,r),i=n(a,i)):(r=Sm(r,o),i=n(i,a)),function(s){return i(r(s))}}function PK(e,t,n){var r=Math.min(e.length,t.length)-1,o=new Array(r),i=new Array(r),a=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<r;)o[a]=Sm(e[a],e[a+1]),i[a]=n(t[a],t[a+1]);return function(s){var c=vs(e,s,1,r)-1;return i[c](o[c](s))}}function _s(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function uu(){var e=hM,t=hM,n=zo,r,o,i,a=kt,s,c,l;function u(){var p=Math.min(e.length,t.length);return a!==kt&&(a=MK(e[0],e[p-1])),s=p>2?PK:CK,c=l=null,d}function d(p){return p==null||isNaN(p=+p)?i:(c||(c=s(e.map(r),t,n)))(r(a(p)))}return d.invert=function(p){return a(o((l||(l=s(t,e.map(r),wn)))(p)))},d.domain=function(p){return arguments.length?(e=Array.from(p,lu),u()):e.slice()},d.range=function(p){return arguments.length?(t=Array.from(p),u()):t.slice()},d.rangeRound=function(p){return t=Array.from(p),n=pp,u()},d.clamp=function(p){return arguments.length?(a=p?!0:kt,u()):a!==kt},d.interpolate=function(p){return arguments.length?(n=p,u()):n},d.unknown=function(p){return arguments.length?(i=p,d):i},function(p,f){return r=p,o=f,u()}}function Mm(){return uu()(kt,kt)}function NK(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function du(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Pi(e){return e=du(Math.abs(e)),e?e[1]:NaN}function kK(e,t){return function(n,r){for(var o=n.length,i=[],a=0,s=e[0],c=0;o>0&&s>0&&(c+s+1>r&&(s=Math.max(1,r-c)),i.push(n.substring(o-=s,o+s)),!((c+=s+1)>r));)s=e[a=(a+1)%e.length];return i.reverse().join(t)}}function AK(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var TK=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function js(e){if(!(t=TK.exec(e)))throw new Error("invalid format: "+e);var t;return new Cm({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}js.prototype=Cm.prototype;function Cm(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Cm.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function IK(e){e:for(var t=e.length,n=1,r=-1,o;n<t;++n)switch(e[n]){case".":r=o=n;break;case"0":r===0&&(r=n),o=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(o+1):e}var mM;function DK(e,t){var n=du(e,t);if(!n)return e+"";var r=n[0],o=n[1],i=o-(mM=Math.max(-8,Math.min(8,Math.floor(o/3)))*3)+1,a=r.length;return i===a?r:i>a?r+new Array(i-a+1).join("0"):i>0?r.slice(0,i)+"."+r.slice(i):"0."+new Array(1-i).join("0")+du(e,Math.max(0,t+i-1))[0]}function yM(e,t){var n=du(e,t);if(!n)return e+"";var r=n[0],o=n[1];return o<0?"0."+new Array(-o).join("0")+r:r.length>o+1?r.slice(0,o+1)+"."+r.slice(o+1):r+new Array(o-r.length+2).join("0")}const gM={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:NK,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>yM(e*100,t),r:yM,s:DK,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function vM(e){return e}var bM=Array.prototype.map,xM=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function RK(e){var t=e.grouping===void 0||e.thousands===void 0?vM:kK(bM.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",o=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?vM:AK(bM.call(e.numerals,String)),a=e.percent===void 0?"%":e.percent+"",s=e.minus===void 0?"\u2212":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function l(d){d=js(d);var p=d.fill,f=d.align,y=d.sign,m=d.symbol,g=d.zero,b=d.width,w=d.comma,_=d.precision,x=d.trim,j=d.type;j==="n"?(w=!0,j="g"):gM[j]||(_===void 0&&(_=12),x=!0,j="g"),(g||p==="0"&&f==="=")&&(g=!0,p="0",f="=");var O=m==="$"?n:m==="#"&&/[boxX]/.test(j)?"0"+j.toLowerCase():"",E=m==="$"?r:/[%p]/.test(j)?a:"",M=gM[j],N=/[defgprs%]/.test(j);_=_===void 0?6:/[gprs]/.test(j)?Math.max(1,Math.min(21,_)):Math.max(0,Math.min(20,_));function A(P){var T=O,L=E,S,C,k;if(j==="c")L=M(P)+L,P="";else{P=+P;var D=P<0||1/P<0;if(P=isNaN(P)?c:M(Math.abs(P),_),x&&(P=IK(P)),D&&+P==0&&y!=="+"&&(D=!1),T=(D?y==="("?y:s:y==="-"||y==="("?"":y)+T,L=(j==="s"?xM[8+mM/3]:"")+L+(D&&y==="("?")":""),N){for(S=-1,C=P.length;++S<C;)if(k=P.charCodeAt(S),48>k||k>57){L=(k===46?o+P.slice(S+1):P.slice(S))+L,P=P.slice(0,S);break}}}w&&!g&&(P=t(P,1/0));var R=T.length+P.length+L.length,B=R<b?new Array(b-R+1).join(p):"";switch(w&&g&&(P=t(B+P,B.length?b-L.length:1/0),B=""),f){case"<":P=T+P+L+B;break;case"=":P=T+B+P+L;break;case"^":P=B.slice(0,R=B.length>>1)+T+P+L+B.slice(R);break;default:P=B+T+P+L;break}return i(P)}return A.toString=function(){return d+""},A}function u(d,p){var f=l((d=js(d),d.type="f",d)),y=Math.max(-8,Math.min(8,Math.floor(Pi(p)/3)))*3,m=Math.pow(10,-y),g=xM[8+y/3];return function(b){return f(m*b)+g}}return{format:l,formatPrefix:u}}var pu,Pm,wM;LK({thousands:",",grouping:[3],currency:["$",""]});function LK(e){return pu=RK(e),Pm=pu.format,wM=pu.formatPrefix,pu}function BK(e){return Math.max(0,-Pi(Math.abs(e)))}function $K(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Pi(t)/3)))*3-Pi(Math.abs(e)))}function FK(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Pi(t)-Pi(e))+1}function _M(e,t,n,r){var o=jm(e,t,n),i;switch(r=js(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(i=$K(o,a))&&(r.precision=i),wM(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(i=FK(o,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=i-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(i=BK(o))&&(r.precision=i-(r.type==="%")*2);break}}return Pm(r)}function Fr(e){var t=e.domain;return e.ticks=function(n){var r=t();return wm(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var o=t();return _M(o[0],o[o.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),o=0,i=r.length-1,a=r[o],s=r[i],c,l,u=10;for(s<a&&(l=a,a=s,s=l,l=o,o=i,i=l);u-- >0;){if(l=_m(a,s,n),l===c)return r[o]=a,r[i]=s,t(r);if(l>0)a=Math.floor(a/l)*l,s=Math.ceil(s/l)*l;else if(l<0)a=Math.ceil(a*l)/l,s=Math.floor(s*l)/l;else break;c=l}return e},e}function fu(){var e=Mm();return e.copy=function(){return _s(e,fu())},fn.apply(e,arguments),Fr(e)}function jM(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,lu),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return jM(e).unknown(t)},e=arguments.length?Array.from(e,lu):[0,1],Fr(n)}function OM(e,t){e=e.slice();var n=0,r=e.length-1,o=e[n],i=e[r],a;return i<o&&(a=n,n=r,r=a,a=o,o=i,i=a),e[n]=t.floor(o),e[r]=t.ceil(i),e}function EM(e){return Math.log(e)}function SM(e){return Math.exp(e)}function zK(e){return-Math.log(-e)}function VK(e){return-Math.exp(-e)}function UK(e){return isFinite(e)?+("1e"+e):e<0?0:e}function qK(e){return e===10?UK:e===Math.E?Math.exp:t=>Math.pow(e,t)}function HK(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function MM(e){return(t,n)=>-e(-t,n)}function Nm(e){const t=e(EM,SM),n=t.domain;let r=10,o,i;function a(){return o=HK(r),i=qK(r),n()[0]<0?(o=MM(o),i=MM(i),e(zK,VK)):e(EM,SM),t}return t.base=function(s){return arguments.length?(r=+s,a()):r},t.domain=function(s){return arguments.length?(n(s),a()):n()},t.ticks=s=>{const c=n();let l=c[0],u=c[c.length-1];const d=u<l;d&&([l,u]=[u,l]);let p=o(l),f=o(u),y,m;const g=s==null?10:+s;let b=[];if(!(r%1)&&f-p<g){if(p=Math.floor(p),f=Math.ceil(f),l>0){for(;p<=f;++p)for(y=1;y<r;++y)if(m=p<0?y/i(-p):y*i(p),!(m<l)){if(m>u)break;b.push(m)}}else for(;p<=f;++p)for(y=r-1;y>=1;--y)if(m=p>0?y/i(-p):y*i(p),!(m<l)){if(m>u)break;b.push(m)}b.length*2<g&&(b=wm(l,u,g))}else b=wm(p,f,Math.min(f-p,g)).map(i);return d?b.reverse():b},t.tickFormat=(s,c)=>{if(s==null&&(s=10),c==null&&(c=r===10?"s":","),typeof c!="function"&&(!(r%1)&&(c=js(c)).precision==null&&(c.trim=!0),c=Pm(c)),s===1/0)return c;const l=Math.max(1,r*s/t.ticks().length);return u=>{let d=u/i(Math.round(o(u)));return d*r<r-.5&&(d*=r),d<=l?c(u):""}},t.nice=()=>n(OM(n(),{floor:s=>i(Math.floor(o(s))),ceil:s=>i(Math.ceil(o(s)))})),t}function CM(){const e=Nm(uu()).domain([1,10]);return e.copy=()=>_s(e,CM()).base(e.base()),fn.apply(e,arguments),e}function PM(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function NM(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function km(e){var t=1,n=e(PM(t),NM(t));return n.constant=function(r){return arguments.length?e(PM(t=+r),NM(t)):t},Fr(n)}function kM(){var e=km(uu());return e.copy=function(){return _s(e,kM()).constant(e.constant())},fn.apply(e,arguments)}function AM(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function WK(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function XK(e){return e<0?-e*e:e*e}function Am(e){var t=e(kt,kt),n=1;function r(){return n===1?e(kt,kt):n===.5?e(WK,XK):e(AM(n),AM(1/n))}return t.exponent=function(o){return arguments.length?(n=+o,r()):n},Fr(t)}function Tm(){var e=Am(uu());return e.copy=function(){return _s(e,Tm()).exponent(e.exponent())},fn.apply(e,arguments),e}function QK(){return Tm.apply(null,arguments).exponent(.5)}function TM(e){return Math.sign(e)*e*e}function YK(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function IM(){var e=Mm(),t=[0,1],n=!1,r;function o(i){var a=YK(e(i));return isNaN(a)?r:n?Math.round(a):a}return o.invert=function(i){return e.invert(TM(i))},o.domain=function(i){return arguments.length?(e.domain(i),o):e.domain()},o.range=function(i){return arguments.length?(e.range((t=Array.from(i,lu)).map(TM)),o):t.slice()},o.rangeRound=function(i){return o.range(i).round(!0)},o.round=function(i){return arguments.length?(n=!!i,o):n},o.clamp=function(i){return arguments.length?(e.clamp(i),o):e.clamp()},o.unknown=function(i){return arguments.length?(r=i,o):r},o.copy=function(){return IM(e.domain(),t).round(n).clamp(e.clamp()).unknown(r)},fn.apply(o,arguments),Fr(o)}function DM(){var e=[],t=[],n=[],r;function o(){var a=0,s=Math.max(1,t.length);for(n=new Array(s-1);++a<s;)n[a-1]=OK(e,a/s);return i}function i(a){return a==null||isNaN(a=+a)?r:t[vs(n,a)]}return i.invertExtent=function(a){var s=t.indexOf(a);return s<0?[NaN,NaN]:[s>0?n[s-1]:e[0],s<n.length?n[s]:e[e.length-1]]},i.domain=function(a){if(!arguments.length)return e.slice();e=[];for(let s of a)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort($r),o()},i.range=function(a){return arguments.length?(t=Array.from(a),o()):t.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.quantiles=function(){return n.slice()},i.copy=function(){return DM().domain(e).range(t).unknown(r)},fn.apply(i,arguments)}function RM(){var e=0,t=1,n=1,r=[.5],o=[0,1],i;function a(c){return c!=null&&c<=c?o[vs(r,c,0,n)]:i}function s(){var c=-1;for(r=new Array(n);++c<n;)r[c]=((c+1)*t-(c-n)*e)/(n+1);return a}return a.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,s()):[e,t]},a.range=function(c){return arguments.length?(n=(o=Array.from(c)).length-1,s()):o.slice()},a.invertExtent=function(c){var l=o.indexOf(c);return l<0?[NaN,NaN]:l<1?[e,r[0]]:l>=n?[r[n-1],t]:[r[l-1],r[l]]},a.unknown=function(c){return arguments.length&&(i=c),a},a.thresholds=function(){return r.slice()},a.copy=function(){return RM().domain([e,t]).range(o).unknown(i)},fn.apply(Fr(a),arguments)}function LM(){var e=[.5],t=[0,1],n,r=1;function o(i){return i!=null&&i<=i?t[vs(e,i,0,r)]:n}return o.domain=function(i){return arguments.length?(e=Array.from(i),r=Math.min(e.length,t.length-1),o):e.slice()},o.range=function(i){return arguments.length?(t=Array.from(i),r=Math.min(e.length,t.length-1),o):t.slice()},o.invertExtent=function(i){var a=t.indexOf(i);return[e[a-1],e[a]]},o.unknown=function(i){return arguments.length?(n=i,o):n},o.copy=function(){return LM().domain(e).range(t).unknown(n)},fn.apply(o,arguments)}const Im=new Date,Dm=new Date;function dt(e,t,n,r){function o(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return o.floor=i=>(e(i=new Date(+i)),i),o.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),o.round=i=>{const a=o(i),s=o.ceil(i);return i-a<s-i?a:s},o.offset=(i,a)=>(t(i=new Date(+i),a==null?1:Math.floor(a)),i),o.range=(i,a,s)=>{const c=[];if(i=o.ceil(i),s=s==null?1:Math.floor(s),!(i<a)||!(s>0))return c;let l;do c.push(l=new Date(+i)),t(i,s),e(i);while(l<i&&i<a);return c},o.filter=i=>dt(a=>{if(a>=a)for(;e(a),!i(a);)a.setTime(a-1)},(a,s)=>{if(a>=a)if(s<0)for(;++s<=0;)for(;t(a,-1),!i(a););else for(;--s>=0;)for(;t(a,1),!i(a););}),n&&(o.count=(i,a)=>(Im.setTime(+i),Dm.setTime(+a),e(Im),e(Dm),Math.floor(n(Im,Dm))),o.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?o.filter(r?a=>r(a)%i===0:a=>o.count(0,a)%i===0):o)),o}const hu=dt(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);hu.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?dt(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):hu),hu.range;const br=1e3,hn=br*60,xr=hn*60,wr=xr*24,Rm=wr*7,BM=wr*30,Lm=wr*365,go=dt(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*br)},(e,t)=>(t-e)/br,e=>e.getUTCSeconds());go.range;const Bm=dt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*br)},(e,t)=>{e.setTime(+e+t*hn)},(e,t)=>(t-e)/hn,e=>e.getMinutes());Bm.range;const $m=dt(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*hn)},(e,t)=>(t-e)/hn,e=>e.getUTCMinutes());$m.range;const Fm=dt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*br-e.getMinutes()*hn)},(e,t)=>{e.setTime(+e+t*xr)},(e,t)=>(t-e)/xr,e=>e.getHours());Fm.range;const zm=dt(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*xr)},(e,t)=>(t-e)/xr,e=>e.getUTCHours());zm.range;const Os=dt(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*hn)/wr,e=>e.getDate()-1);Os.range;const mu=dt(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/wr,e=>e.getUTCDate()-1);mu.range;const $M=dt(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/wr,e=>Math.floor(e/wr));$M.range;function vo(e){return dt(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*hn)/Rm)}const yu=vo(0),gu=vo(1),GK=vo(2),KK=vo(3),Ni=vo(4),ZK=vo(5),JK=vo(6);yu.range,gu.range,GK.range,KK.range,Ni.range,ZK.range,JK.range;function bo(e){return dt(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/Rm)}const vu=bo(0),bu=bo(1),eZ=bo(2),tZ=bo(3),ki=bo(4),nZ=bo(5),rZ=bo(6);vu.range,bu.range,eZ.range,tZ.range,ki.range,nZ.range,rZ.range;const Vm=dt(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Vm.range;const Um=dt(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Um.range;const _r=dt(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());_r.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:dt(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)}),_r.range;const jr=dt(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());jr.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:dt(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)}),jr.range;function FM(e,t,n,r,o,i){const a=[[go,1,br],[go,5,5*br],[go,15,15*br],[go,30,30*br],[i,1,hn],[i,5,5*hn],[i,15,15*hn],[i,30,30*hn],[o,1,xr],[o,3,3*xr],[o,6,6*xr],[o,12,12*xr],[r,1,wr],[r,2,2*wr],[n,1,Rm],[t,1,BM],[t,3,3*BM],[e,1,Lm]];function s(l,u,d){const p=u<l;p&&([l,u]=[u,l]);const f=d&&typeof d.range=="function"?d:c(l,u,d),y=f?f.range(l,+u+1):[];return p?y.reverse():y}function c(l,u,d){const p=Math.abs(u-l)/d,f=xm(([,,g])=>g).right(a,p);if(f===a.length)return e.every(jm(l/Lm,u/Lm,d));if(f===0)return hu.every(Math.max(jm(l,u,d),1));const[y,m]=a[p/a[f-1][2]<a[f][2]/p?f-1:f];return y.every(m)}return[s,c]}const[oZ,iZ]=FM(jr,Um,vu,$M,zm,$m),[aZ,sZ]=FM(_r,Vm,yu,Os,Fm,Bm);function qm(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Hm(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Es(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function cZ(e){var t=e.dateTime,n=e.date,r=e.time,o=e.periods,i=e.days,a=e.shortDays,s=e.months,c=e.shortMonths,l=Ss(o),u=Ms(o),d=Ss(i),p=Ms(i),f=Ss(a),y=Ms(a),m=Ss(s),g=Ms(s),b=Ss(c),w=Ms(c),_={a:D,A:R,b:B,B:F,c:null,d:WM,e:WM,f:kZ,g:zZ,G:UZ,H:CZ,I:PZ,j:NZ,L:XM,m:AZ,M:TZ,p:V,q:I,Q:JM,s:eC,S:IZ,u:DZ,U:RZ,V:LZ,w:BZ,W:$Z,x:null,X:null,y:FZ,Y:VZ,Z:qZ,"%":ZM},x={a:X,A:H,b:q,B:te,c:null,d:YM,e:YM,f:QZ,g:oJ,G:aJ,H:HZ,I:WZ,j:XZ,L:GM,m:YZ,M:GZ,p:Q,q:Z,Q:JM,s:eC,S:KZ,u:ZZ,U:JZ,V:eJ,w:tJ,W:nJ,x:null,X:null,y:rJ,Y:iJ,Z:sJ,"%":ZM},j={a:A,A:P,b:T,B:L,c:S,d:qM,e:qM,f:OZ,g:UM,G:VM,H:HM,I:HM,j:xZ,L:jZ,m:bZ,M:wZ,p:N,q:vZ,Q:SZ,s:MZ,S:_Z,u:fZ,U:hZ,V:mZ,w:pZ,W:yZ,x:C,X:k,y:UM,Y:VM,Z:gZ,"%":EZ};_.x=O(n,_),_.X=O(r,_),_.c=O(t,_),x.x=O(n,x),x.X=O(r,x),x.c=O(t,x);function O(Y,K){return function(ne){var z=[],ye=-1,fe=0,Oe=Y.length,Ae,et,Wt;for(ne instanceof Date||(ne=new Date(+ne));++ye<Oe;)Y.charCodeAt(ye)===37&&(z.push(Y.slice(fe,ye)),(et=zM[Ae=Y.charAt(++ye)])!=null?Ae=Y.charAt(++ye):et=Ae==="e"?" ":"0",(Wt=K[Ae])&&(Ae=Wt(ne,et)),z.push(Ae),fe=ye+1);return z.push(Y.slice(fe,ye)),z.join("")}}function E(Y,K){return function(ne){var z=Es(1900,void 0,1),ye=M(z,Y,ne+="",0),fe,Oe;if(ye!=ne.length)return null;if("Q"in z)return new Date(z.Q);if("s"in z)return new Date(z.s*1e3+("L"in z?z.L:0));if(K&&!("Z"in z)&&(z.Z=0),"p"in z&&(z.H=z.H%12+z.p*12),z.m===void 0&&(z.m="q"in z?z.q:0),"V"in z){if(z.V<1||z.V>53)return null;"w"in z||(z.w=1),"Z"in z?(fe=Hm(Es(z.y,0,1)),Oe=fe.getUTCDay(),fe=Oe>4||Oe===0?bu.ceil(fe):bu(fe),fe=mu.offset(fe,(z.V-1)*7),z.y=fe.getUTCFullYear(),z.m=fe.getUTCMonth(),z.d=fe.getUTCDate()+(z.w+6)%7):(fe=qm(Es(z.y,0,1)),Oe=fe.getDay(),fe=Oe>4||Oe===0?gu.ceil(fe):gu(fe),fe=Os.offset(fe,(z.V-1)*7),z.y=fe.getFullYear(),z.m=fe.getMonth(),z.d=fe.getDate()+(z.w+6)%7)}else("W"in z||"U"in z)&&("w"in z||(z.w="u"in z?z.u%7:"W"in z?1:0),Oe="Z"in z?Hm(Es(z.y,0,1)).getUTCDay():qm(Es(z.y,0,1)).getDay(),z.m=0,z.d="W"in z?(z.w+6)%7+z.W*7-(Oe+5)%7:z.w+z.U*7-(Oe+6)%7);return"Z"in z?(z.H+=z.Z/100|0,z.M+=z.Z%100,Hm(z)):qm(z)}}function M(Y,K,ne,z){for(var ye=0,fe=K.length,Oe=ne.length,Ae,et;ye<fe;){if(z>=Oe)return-1;if(Ae=K.charCodeAt(ye++),Ae===37){if(Ae=K.charAt(ye++),et=j[Ae in zM?K.charAt(ye++):Ae],!et||(z=et(Y,ne,z))<0)return-1}else if(Ae!=ne.charCodeAt(z++))return-1}return z}function N(Y,K,ne){var z=l.exec(K.slice(ne));return z?(Y.p=u.get(z[0].toLowerCase()),ne+z[0].length):-1}function A(Y,K,ne){var z=f.exec(K.slice(ne));return z?(Y.w=y.get(z[0].toLowerCase()),ne+z[0].length):-1}function P(Y,K,ne){var z=d.exec(K.slice(ne));return z?(Y.w=p.get(z[0].toLowerCase()),ne+z[0].length):-1}function T(Y,K,ne){var z=b.exec(K.slice(ne));return z?(Y.m=w.get(z[0].toLowerCase()),ne+z[0].length):-1}function L(Y,K,ne){var z=m.exec(K.slice(ne));return z?(Y.m=g.get(z[0].toLowerCase()),ne+z[0].length):-1}function S(Y,K,ne){return M(Y,t,K,ne)}function C(Y,K,ne){return M(Y,n,K,ne)}function k(Y,K,ne){return M(Y,r,K,ne)}function D(Y){return a[Y.getDay()]}function R(Y){return i[Y.getDay()]}function B(Y){return c[Y.getMonth()]}function F(Y){return s[Y.getMonth()]}function V(Y){return o[+(Y.getHours()>=12)]}function I(Y){return 1+~~(Y.getMonth()/3)}function X(Y){return a[Y.getUTCDay()]}function H(Y){return i[Y.getUTCDay()]}function q(Y){return c[Y.getUTCMonth()]}function te(Y){return s[Y.getUTCMonth()]}function Q(Y){return o[+(Y.getUTCHours()>=12)]}function Z(Y){return 1+~~(Y.getUTCMonth()/3)}return{format:function(Y){var K=O(Y+="",_);return K.toString=function(){return Y},K},parse:function(Y){var K=E(Y+="",!1);return K.toString=function(){return Y},K},utcFormat:function(Y){var K=O(Y+="",x);return K.toString=function(){return Y},K},utcParse:function(Y){var K=E(Y+="",!0);return K.toString=function(){return Y},K}}}var zM={"-":"",_:" ",0:"0"},yt=/^\s*\d+/,lZ=/^%/,uZ=/[\\^$*+?|[\]().{}]/g;function Te(e,t,n){var r=e<0?"-":"",o=(r?-e:e)+"",i=o.length;return r+(i<n?new Array(n-i+1).join(t)+o:o)}function dZ(e){return e.replace(uZ,"\\$&")}function Ss(e){return new RegExp("^(?:"+e.map(dZ).join("|")+")","i")}function Ms(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function pZ(e,t,n){var r=yt.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function fZ(e,t,n){var r=yt.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function hZ(e,t,n){var r=yt.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function mZ(e,t,n){var r=yt.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function yZ(e,t,n){var r=yt.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function VM(e,t,n){var r=yt.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function UM(e,t,n){var r=yt.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function gZ(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function vZ(e,t,n){var r=yt.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function bZ(e,t,n){var r=yt.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function qM(e,t,n){var r=yt.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function xZ(e,t,n){var r=yt.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function HM(e,t,n){var r=yt.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function wZ(e,t,n){var r=yt.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function _Z(e,t,n){var r=yt.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function jZ(e,t,n){var r=yt.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function OZ(e,t,n){var r=yt.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function EZ(e,t,n){var r=lZ.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function SZ(e,t,n){var r=yt.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function MZ(e,t,n){var r=yt.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function WM(e,t){return Te(e.getDate(),t,2)}function CZ(e,t){return Te(e.getHours(),t,2)}function PZ(e,t){return Te(e.getHours()%12||12,t,2)}function NZ(e,t){return Te(1+Os.count(_r(e),e),t,3)}function XM(e,t){return Te(e.getMilliseconds(),t,3)}function kZ(e,t){return XM(e,t)+"000"}function AZ(e,t){return Te(e.getMonth()+1,t,2)}function TZ(e,t){return Te(e.getMinutes(),t,2)}function IZ(e,t){return Te(e.getSeconds(),t,2)}function DZ(e){var t=e.getDay();return t===0?7:t}function RZ(e,t){return Te(yu.count(_r(e)-1,e),t,2)}function QM(e){var t=e.getDay();return t>=4||t===0?Ni(e):Ni.ceil(e)}function LZ(e,t){return e=QM(e),Te(Ni.count(_r(e),e)+(_r(e).getDay()===4),t,2)}function BZ(e){return e.getDay()}function $Z(e,t){return Te(gu.count(_r(e)-1,e),t,2)}function FZ(e,t){return Te(e.getFullYear()%100,t,2)}function zZ(e,t){return e=QM(e),Te(e.getFullYear()%100,t,2)}function VZ(e,t){return Te(e.getFullYear()%1e4,t,4)}function UZ(e,t){var n=e.getDay();return e=n>=4||n===0?Ni(e):Ni.ceil(e),Te(e.getFullYear()%1e4,t,4)}function qZ(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Te(t/60|0,"0",2)+Te(t%60,"0",2)}function YM(e,t){return Te(e.getUTCDate(),t,2)}function HZ(e,t){return Te(e.getUTCHours(),t,2)}function WZ(e,t){return Te(e.getUTCHours()%12||12,t,2)}function XZ(e,t){return Te(1+mu.count(jr(e),e),t,3)}function GM(e,t){return Te(e.getUTCMilliseconds(),t,3)}function QZ(e,t){return GM(e,t)+"000"}function YZ(e,t){return Te(e.getUTCMonth()+1,t,2)}function GZ(e,t){return Te(e.getUTCMinutes(),t,2)}function KZ(e,t){return Te(e.getUTCSeconds(),t,2)}function ZZ(e){var t=e.getUTCDay();return t===0?7:t}function JZ(e,t){return Te(vu.count(jr(e)-1,e),t,2)}function KM(e){var t=e.getUTCDay();return t>=4||t===0?ki(e):ki.ceil(e)}function eJ(e,t){return e=KM(e),Te(ki.count(jr(e),e)+(jr(e).getUTCDay()===4),t,2)}function tJ(e){return e.getUTCDay()}function nJ(e,t){return Te(bu.count(jr(e)-1,e),t,2)}function rJ(e,t){return Te(e.getUTCFullYear()%100,t,2)}function oJ(e,t){return e=KM(e),Te(e.getUTCFullYear()%100,t,2)}function iJ(e,t){return Te(e.getUTCFullYear()%1e4,t,4)}function aJ(e,t){var n=e.getUTCDay();return e=n>=4||n===0?ki(e):ki.ceil(e),Te(e.getUTCFullYear()%1e4,t,4)}function sJ(){return"+0000"}function ZM(){return"%"}function JM(e){return+e}function eC(e){return Math.floor(+e/1e3)}var Ai,tC,nC;cJ({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function cJ(e){return Ai=cZ(e),tC=Ai.format,Ai.parse,nC=Ai.utcFormat,Ai.utcParse,Ai}function lJ(e){return new Date(e)}function uJ(e){return e instanceof Date?+e:+new Date(+e)}function Wm(e,t,n,r,o,i,a,s,c,l){var u=Mm(),d=u.invert,p=u.domain,f=l(".%L"),y=l(":%S"),m=l("%I:%M"),g=l("%I %p"),b=l("%a %d"),w=l("%b %d"),_=l("%B"),x=l("%Y");function j(O){return(c(O)<O?f:s(O)<O?y:a(O)<O?m:i(O)<O?g:r(O)<O?o(O)<O?b:w:n(O)<O?_:x)(O)}return u.invert=function(O){return new Date(d(O))},u.domain=function(O){return arguments.length?p(Array.from(O,uJ)):p().map(lJ)},u.ticks=function(O){var E=p();return e(E[0],E[E.length-1],O??10)},u.tickFormat=function(O,E){return E==null?j:l(E)},u.nice=function(O){var E=p();return(!O||typeof O.range!="function")&&(O=t(E[0],E[E.length-1],O??10)),O?p(OM(E,O)):u},u.copy=function(){return _s(u,Wm(e,t,n,r,o,i,a,s,c,l))},u}function dJ(){return fn.apply(Wm(aZ,sZ,_r,Vm,yu,Os,Fm,Bm,go,tC).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function pJ(){return fn.apply(Wm(oZ,iZ,jr,Um,vu,mu,zm,$m,go,nC).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function xu(){var e=0,t=1,n,r,o,i,a=kt,s=!1,c;function l(d){return d==null||isNaN(d=+d)?c:a(o===0?.5:(d=(i(d)-n)*o,s?Math.max(0,Math.min(1,d)):d))}l.domain=function(d){return arguments.length?([e,t]=d,n=i(e=+e),r=i(t=+t),o=n===r?0:1/(r-n),l):[e,t]},l.clamp=function(d){return arguments.length?(s=!!d,l):s},l.interpolator=function(d){return arguments.length?(a=d,l):a};function u(d){return function(p){var f,y;return arguments.length?([f,y]=p,a=d(f,y),l):[a(0),a(1)]}}return l.range=u(zo),l.rangeRound=u(pp),l.unknown=function(d){return arguments.length?(c=d,l):c},function(d){return i=d,n=d(e),r=d(t),o=n===r?0:1/(r-n),l}}function zr(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function rC(){var e=Fr(xu()(kt));return e.copy=function(){return zr(e,rC())},vr.apply(e,arguments)}function oC(){var e=Nm(xu()).domain([1,10]);return e.copy=function(){return zr(e,oC()).base(e.base())},vr.apply(e,arguments)}function iC(){var e=km(xu());return e.copy=function(){return zr(e,iC()).constant(e.constant())},vr.apply(e,arguments)}function Xm(){var e=Am(xu());return e.copy=function(){return zr(e,Xm()).exponent(e.exponent())},vr.apply(e,arguments)}function fJ(){return Xm.apply(null,arguments).exponent(.5)}function aC(){var e=[],t=kt;function n(r){if(r!=null&&!isNaN(r=+r))return t((vs(e,r,1)-1)/(e.length-1))}return n.domain=function(r){if(!arguments.length)return e.slice();e=[];for(let o of r)o!=null&&!isNaN(o=+o)&&e.push(o);return e.sort($r),n},n.interpolator=function(r){return arguments.length?(t=r,n):t},n.range=function(){return e.map((r,o)=>t(o/(e.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(o,i)=>jK(e,i/r))},n.copy=function(){return aC(t).domain(e)},vr.apply(n,arguments)}function wu(){var e=0,t=.5,n=1,r=1,o,i,a,s,c,l=kt,u,d=!1,p;function f(m){return isNaN(m=+m)?p:(m=.5+((m=+u(m))-i)*(r*m<r*i?s:c),l(d?Math.max(0,Math.min(1,m)):m))}f.domain=function(m){return arguments.length?([e,t,n]=m,o=u(e=+e),i=u(t=+t),a=u(n=+n),s=o===i?0:.5/(i-o),c=i===a?0:.5/(a-i),r=i<o?-1:1,f):[e,t,n]},f.clamp=function(m){return arguments.length?(d=!!m,f):d},f.interpolator=function(m){return arguments.length?(l=m,f):l};function y(m){return function(g){var b,w,_;return arguments.length?([b,w,_]=g,l=T3(m,[b,w,_]),f):[l(0),l(.5),l(1)]}}return f.range=y(zo),f.rangeRound=y(pp),f.unknown=function(m){return arguments.length?(p=m,f):p},function(m){return u=m,o=m(e),i=m(t),a=m(n),s=o===i?0:.5/(i-o),c=i===a?0:.5/(a-i),r=i<o?-1:1,f}}function sC(){var e=Fr(wu()(kt));return e.copy=function(){return zr(e,sC())},vr.apply(e,arguments)}function cC(){var e=Nm(wu()).domain([.1,1,10]);return e.copy=function(){return zr(e,cC()).base(e.base())},vr.apply(e,arguments)}function lC(){var e=km(wu());return e.copy=function(){return zr(e,lC()).constant(e.constant())},vr.apply(e,arguments)}function Qm(){var e=Am(wu());return e.copy=function(){return zr(e,Qm()).exponent(e.exponent())},vr.apply(e,arguments)}function hJ(){return Qm.apply(null,arguments).exponent(.5)}const uC=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:xs,scaleDiverging:sC,scaleDivergingLog:cC,scaleDivergingPow:Qm,scaleDivergingSqrt:hJ,scaleDivergingSymlog:lC,scaleIdentity:jM,scaleImplicit:Om,scaleLinear:fu,scaleLog:CM,scaleOrdinal:Em,scalePoint:ws,scalePow:Tm,scaleQuantile:DM,scaleQuantize:RM,scaleRadial:IM,scaleSequential:rC,scaleSequentialLog:oC,scaleSequentialPow:Xm,scaleSequentialQuantile:aC,scaleSequentialSqrt:fJ,scaleSequentialSymlog:iC,scaleSqrt:QK,scaleSymlog:kM,scaleThreshold:LM,scaleTime:dJ,scaleUtc:pJ,tickFormat:_M},Symbol.toStringTag,{value:"Module"}));var mJ=oi;function yJ(e,t,n){for(var r=-1,o=e.length;++r<o;){var i=e[r],a=t(i);if(a!=null&&(s===void 0?a===a&&!mJ(a):n(a,s)))var s=a,c=i}return c}var dC=yJ;function gJ(e,t){return e>t}var vJ=gJ,bJ=dC,xJ=vJ,wJ=ii;function _J(e){return e&&e.length?bJ(e,wJ,xJ):void 0}var jJ=_J;const _u=Ne(jJ);function OJ(e,t){return e<t}var EJ=OJ,SJ=dC,MJ=EJ,CJ=ii;function PJ(e){return e&&e.length?SJ(e,CJ,MJ):void 0}var NJ=PJ;const ju=Ne(NJ);var kJ=ua,AJ=zn,TJ=oS,IJ=Ct;function DJ(e,t){var n=IJ(e)?kJ:TJ;return n(e,AJ(t))}var pC=DJ;Jk=Ne(pC);var RJ=Id,LJ=pC;function BJ(e,t){return RJ(LJ(e,t),1)}var $J=BJ;const FJ=Ne($J);var zJ=Mf;function VJ(e,t){return zJ(e,t)}var UJ=VJ;const Ym=Ne(UJ);var Ti=1e9,qJ={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},Zm,Ge=!0,mn="[DecimalError] ",xo=mn+"Invalid argument: ",Gm=mn+"Exponent out of range: ",Ii=Math.floor,wo=Math.pow,HJ=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,en,gt=1e7,Xe=7,fC=9007199254740991,Ou=Ii(fC/Xe),pe={};pe.absoluteValue=pe.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e},pe.comparedTo=pe.cmp=function(e){var t,n,r,o,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(r=i.d.length,o=e.d.length,t=0,n=r<o?r:o;t<n;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return r===o?0:r>o^i.s<0?1:-1},pe.decimalPlaces=pe.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*Xe;if(t=e.d[t],t)for(;t%10==0;t/=10)n--;return n<0?0:n},pe.dividedBy=pe.div=function(e){return Or(this,new this.constructor(e))},pe.dividedToIntegerBy=pe.idiv=function(e){var t=this,n=t.constructor;return Ue(Or(t,new n(e),0,1),n.precision)},pe.equals=pe.eq=function(e){return!this.cmp(e)},pe.exponent=function(){return st(this)},pe.greaterThan=pe.gt=function(e){return this.cmp(e)>0},pe.greaterThanOrEqualTo=pe.gte=function(e){return this.cmp(e)>=0},pe.isInteger=pe.isint=function(){return this.e>this.d.length-2},pe.isNegative=pe.isneg=function(){return this.s<0},pe.isPositive=pe.ispos=function(){return this.s>0},pe.isZero=function(){return this.s===0},pe.lessThan=pe.lt=function(e){return this.cmp(e)<0},pe.lessThanOrEqualTo=pe.lte=function(e){return this.cmp(e)<1},pe.logarithm=pe.log=function(e){var t,n=this,r=n.constructor,o=r.precision,i=o+5;if(e===void 0)e=new r(10);else if(e=new r(e),e.s<1||e.eq(en))throw Error(mn+"NaN");if(n.s<1)throw Error(mn+(n.s?"NaN":"-Infinity"));return n.eq(en)?new r(0):(Ge=!1,t=Or(Cs(n,i),Cs(e,i),i),Ge=!0,Ue(t,o))},pe.minus=pe.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?gC(t,e):hC(t,(e.s=-e.s,e))},pe.modulo=pe.mod=function(e){var t,n=this,r=n.constructor,o=r.precision;if(e=new r(e),!e.s)throw Error(mn+"NaN");return n.s?(Ge=!1,t=Or(n,e,0,1).times(e),Ge=!0,n.minus(t)):Ue(new r(n),o)},pe.naturalExponential=pe.exp=function(){return mC(this)},pe.naturalLogarithm=pe.ln=function(){return Cs(this)},pe.negated=pe.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e},pe.plus=pe.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?hC(t,e):gC(t,(e.s=-e.s,e))},pe.precision=pe.sd=function(e){var t,n,r,o=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(xo+e);if(t=st(o)+1,r=o.d.length-1,n=r*Xe+1,r=o.d[r],r){for(;r%10==0;r/=10)n--;for(r=o.d[0];r>=10;r/=10)n++}return e&&t>n?t:n},pe.squareRoot=pe.sqrt=function(){var e,t,n,r,o,i,a,s=this,c=s.constructor;if(s.s<1){if(!s.s)return new c(0);throw Error(mn+"NaN")}for(e=st(s),Ge=!1,o=Math.sqrt(+s),o==0||o==1/0?(t=Xn(s.d),(t.length+e)%2==0&&(t+="0"),o=Math.sqrt(t),e=Ii((e+1)/2)-(e<0||e%2),o==1/0?t="5e"+e:(t=o.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),r=new c(t)):r=new c(o.toString()),n=c.precision,o=a=n+3;;)if(i=r,r=i.plus(Or(s,i,a+2)).times(.5),Xn(i.d).slice(0,a)===(t=Xn(r.d)).slice(0,a)){if(t=t.slice(a-3,a+1),o==a&&t=="4999"){if(Ue(i,n+1,0),i.times(i).eq(s)){r=i;break}}else if(t!="9999")break;a+=4}return Ge=!0,Ue(r,n)},pe.times=pe.mul=function(e){var t,n,r,o,i,a,s,c,l,u=this,d=u.constructor,p=u.d,f=(e=new d(e)).d;if(!u.s||!e.s)return new d(0);for(e.s*=u.s,n=u.e+e.e,c=p.length,l=f.length,c<l&&(i=p,p=f,f=i,a=c,c=l,l=a),i=[],a=c+l,r=a;r--;)i.push(0);for(r=l;--r>=0;){for(t=0,o=c+r;o>r;)s=i[o]+f[r]*p[o-r-1]+t,i[o--]=s%gt|0,t=s/gt|0;i[o]=(i[o]+t)%gt|0}for(;!i[--a];)i.pop();return t?++n:i.shift(),e.d=i,e.e=n,Ge?Ue(e,d.precision):e},pe.toDecimalPlaces=pe.todp=function(e,t){var n=this,r=n.constructor;return n=new r(n),e===void 0?n:(Wn(e,0,Ti),t===void 0?t=r.rounding:Wn(t,0,8),Ue(n,e+st(n)+1,t))},pe.toExponential=function(e,t){var n,r=this,o=r.constructor;return e===void 0?n=_o(r,!0):(Wn(e,0,Ti),t===void 0?t=o.rounding:Wn(t,0,8),r=Ue(new o(r),e+1,t),n=_o(r,!0,e+1)),n},pe.toFixed=function(e,t){var n,r,o=this,i=o.constructor;return e===void 0?_o(o):(Wn(e,0,Ti),t===void 0?t=i.rounding:Wn(t,0,8),r=Ue(new i(o),e+st(o)+1,t),n=_o(r.abs(),!1,e+st(r)+1),o.isneg()&&!o.isZero()?"-"+n:n)},pe.toInteger=pe.toint=function(){var e=this,t=e.constructor;return Ue(new t(e),st(e)+1,t.rounding)},pe.toNumber=function(){return+this},pe.toPower=pe.pow=function(e){var t,n,r,o,i,a,s=this,c=s.constructor,l=12,u=+(e=new c(e));if(!e.s)return new c(en);if(s=new c(s),!s.s){if(e.s<1)throw Error(mn+"Infinity");return s}if(s.eq(en))return s;if(r=c.precision,e.eq(en))return Ue(s,r);if(t=e.e,n=e.d.length-1,a=t>=n,i=s.s,a){if((n=u<0?-u:u)<=fC){for(o=new c(en),t=Math.ceil(r/Xe+4),Ge=!1;n%2&&(o=o.times(s),vC(o.d,t)),n=Ii(n/2),n!==0;)s=s.times(s),vC(s.d,t);return Ge=!0,e.s<0?new c(en).div(o):Ue(o,r)}}else if(i<0)throw Error(mn+"NaN");return i=i<0&&e.d[Math.max(t,n)]&1?-1:1,s.s=1,Ge=!1,o=e.times(Cs(s,r+l)),Ge=!0,o=mC(o),o.s=i,o},pe.toPrecision=function(e,t){var n,r,o=this,i=o.constructor;return e===void 0?(n=st(o),r=_o(o,n<=i.toExpNeg||n>=i.toExpPos)):(Wn(e,1,Ti),t===void 0?t=i.rounding:Wn(t,0,8),o=Ue(new i(o),e,t),n=st(o),r=_o(o,e<=n||n<=i.toExpNeg,e)),r},pe.toSignificantDigits=pe.tosd=function(e,t){var n=this,r=n.constructor;return e===void 0?(e=r.precision,t=r.rounding):(Wn(e,1,Ti),t===void 0?t=r.rounding:Wn(t,0,8)),Ue(new r(n),e,t)},pe.toString=pe.valueOf=pe.val=pe.toJSON=pe[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=st(e),n=e.constructor;return _o(e,t<=n.toExpNeg||t>=n.toExpPos)};function hC(e,t){var n,r,o,i,a,s,c,l,u=e.constructor,d=u.precision;if(!e.s||!t.s)return t.s||(t=new u(e)),Ge?Ue(t,d):t;if(c=e.d,l=t.d,a=e.e,o=t.e,c=c.slice(),i=a-o,i){for(i<0?(r=c,i=-i,s=l.length):(r=l,o=a,s=c.length),a=Math.ceil(d/Xe),s=a>s?a+1:s+1,i>s&&(i=s,r.length=1),r.reverse();i--;)r.push(0);r.reverse()}for(s=c.length,i=l.length,s-i<0&&(i=s,r=l,l=c,c=r),n=0;i;)n=(c[--i]=c[i]+l[i]+n)/gt|0,c[i]%=gt;for(n&&(c.unshift(n),++o),s=c.length;c[--s]==0;)c.pop();return t.d=c,t.e=o,Ge?Ue(t,d):t}function Wn(e,t,n){if(e!==~~e||e<t||e>n)throw Error(xo+e)}function Xn(e){var t,n,r,o=e.length-1,i="",a=e[0];if(o>0){for(i+=a,t=1;t<o;t++)r=e[t]+"",n=Xe-r.length,n&&(i+=Vr(n)),i+=r;a=e[t],r=a+"",n=Xe-r.length,n&&(i+=Vr(n))}else if(a===0)return"0";for(;a%10===0;)a/=10;return i+a}var Or=function(){function e(r,o){var i,a=0,s=r.length;for(r=r.slice();s--;)i=r[s]*o+a,r[s]=i%gt|0,a=i/gt|0;return a&&r.unshift(a),r}function t(r,o,i,a){var s,c;if(i!=a)c=i>a?1:-1;else for(s=c=0;s<i;s++)if(r[s]!=o[s]){c=r[s]>o[s]?1:-1;break}return c}function n(r,o,i){for(var a=0;i--;)r[i]-=a,a=r[i]<o[i]?1:0,r[i]=a*gt+r[i]-o[i];for(;!r[0]&&r.length>1;)r.shift()}return function(r,o,i,a){var s,c,l,u,d,p,f,y,m,g,b,w,_,x,j,O,E,M,N=r.constructor,A=r.s==o.s?1:-1,P=r.d,T=o.d;if(!r.s)return new N(r);if(!o.s)throw Error(mn+"Division by zero");for(c=r.e-o.e,E=T.length,j=P.length,f=new N(A),y=f.d=[],l=0;T[l]==(P[l]||0);)++l;if(T[l]>(P[l]||0)&&--c,i==null?w=i=N.precision:a?w=i+(st(r)-st(o))+1:w=i,w<0)return new N(0);if(w=w/Xe+2|0,l=0,E==1)for(u=0,T=T[0],w++;(l<j||u)&&w--;l++)_=u*gt+(P[l]||0),y[l]=_/T|0,u=_%T|0;else{for(u=gt/(T[0]+1)|0,u>1&&(T=e(T,u),P=e(P,u),E=T.length,j=P.length),x=E,m=P.slice(0,E),g=m.length;g<E;)m[g++]=0;M=T.slice(),M.unshift(0),O=T[0],T[1]>=gt/2&&++O;do u=0,s=t(T,m,E,g),s<0?(b=m[0],E!=g&&(b=b*gt+(m[1]||0)),u=b/O|0,u>1?(u>=gt&&(u=gt-1),d=e(T,u),p=d.length,g=m.length,s=t(d,m,p,g),s==1&&(u--,n(d,E<p?M:T,p))):(u==0&&(s=u=1),d=T.slice()),p=d.length,p<g&&d.unshift(0),n(m,d,g),s==-1&&(g=m.length,s=t(T,m,E,g),s<1&&(u++,n(m,E<g?M:T,g))),g=m.length):s===0&&(u++,m=[0]),y[l++]=u,s&&m[0]?m[g++]=P[x]||0:(m=[P[x]],g=1);while((x++<j||m[0]!==void 0)&&w--)}return y[0]||y.shift(),f.e=c,Ue(f,a?i+st(f)+1:i)}}();function mC(e,t){var n,r,o,i,a,s,c=0,l=0,u=e.constructor,d=u.precision;if(st(e)>16)throw Error(Gm+st(e));if(!e.s)return new u(en);for(t==null?(Ge=!1,s=d):s=t,a=new u(.03125);e.abs().gte(.1);)e=e.times(a),l+=5;for(r=Math.log(wo(2,l))/Math.LN10*2+5|0,s+=r,n=o=i=new u(en),u.precision=s;;){if(o=Ue(o.times(e),s),n=n.times(++c),a=i.plus(Or(o,n,s)),Xn(a.d).slice(0,s)===Xn(i.d).slice(0,s)){for(;l--;)i=Ue(i.times(i),s);return u.precision=d,t==null?(Ge=!0,Ue(i,d)):i}i=a}}function st(e){for(var t=e.e*Xe,n=e.d[0];n>=10;n/=10)t++;return t}function Km(e,t,n){if(t>e.LN10.sd())throw Ge=!0,n&&(e.precision=n),Error(mn+"LN10 precision limit exceeded");return Ue(new e(e.LN10),t)}function Vr(e){for(var t="";e--;)t+="0";return t}function Cs(e,t){var n,r,o,i,a,s,c,l,u,d=1,p=10,f=e,y=f.d,m=f.constructor,g=m.precision;if(f.s<1)throw Error(mn+(f.s?"NaN":"-Infinity"));if(f.eq(en))return new m(0);if(t==null?(Ge=!1,l=g):l=t,f.eq(10))return t==null&&(Ge=!0),Km(m,l);if(l+=p,m.precision=l,n=Xn(y),r=n.charAt(0),i=st(f),Math.abs(i)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)f=f.times(e),n=Xn(f.d),r=n.charAt(0),d++;i=st(f),r>1?(f=new m("0."+n),i++):f=new m(r+"."+n.slice(1))}else return c=Km(m,l+2,g).times(i+""),f=Cs(new m(r+"."+n.slice(1)),l-p).plus(c),m.precision=g,t==null?(Ge=!0,Ue(f,g)):f;for(s=a=f=Or(f.minus(en),f.plus(en),l),u=Ue(f.times(f),l),o=3;;){if(a=Ue(a.times(u),l),c=s.plus(Or(a,new m(o),l)),Xn(c.d).slice(0,l)===Xn(s.d).slice(0,l))return s=s.times(2),i!==0&&(s=s.plus(Km(m,l+2,g).times(i+""))),s=Or(s,new m(d),l),m.precision=g,t==null?(Ge=!0,Ue(s,g)):s;s=c,o+=2}}function yC(e,t){var n,r,o;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;t.charCodeAt(r)===48;)++r;for(o=t.length;t.charCodeAt(o-1)===48;)--o;if(t=t.slice(r,o),t){if(o-=r,n=n-r-1,e.e=Ii(n/Xe),e.d=[],r=(n+1)%Xe,n<0&&(r+=Xe),r<o){for(r&&e.d.push(+t.slice(0,r)),o-=Xe;r<o;)e.d.push(+t.slice(r,r+=Xe));t=t.slice(r),r=Xe-t.length}else r-=o;for(;r--;)t+="0";if(e.d.push(+t),Ge&&(e.e>Ou||e.e<-Ou))throw Error(Gm+n)}else e.s=0,e.e=0,e.d=[0];return e}function Ue(e,t,n){var r,o,i,a,s,c,l,u,d=e.d;for(a=1,i=d[0];i>=10;i/=10)a++;if(r=t-a,r<0)r+=Xe,o=t,l=d[u=0];else{if(u=Math.ceil((r+1)/Xe),i=d.length,u>=i)return e;for(l=i=d[u],a=1;i>=10;i/=10)a++;r%=Xe,o=r-Xe+a}if(n!==void 0&&(i=wo(10,a-o-1),s=l/i%10|0,c=t<0||d[u+1]!==void 0||l%i,c=n<4?(s||c)&&(n==0||n==(e.s<0?3:2)):s>5||s==5&&(n==4||c||n==6&&(r>0?o>0?l/wo(10,a-o):0:d[u-1])%10&1||n==(e.s<0?8:7))),t<1||!d[0])return c?(i=st(e),d.length=1,t=t-i-1,d[0]=wo(10,(Xe-t%Xe)%Xe),e.e=Ii(-t/Xe)||0):(d.length=1,d[0]=e.e=e.s=0),e;if(r==0?(d.length=u,i=1,u--):(d.length=u+1,i=wo(10,Xe-r),d[u]=o>0?(l/wo(10,a-o)%wo(10,o)|0)*i:0),c)for(;;)if(u==0){(d[0]+=i)==gt&&(d[0]=1,++e.e);break}else{if(d[u]+=i,d[u]!=gt)break;d[u--]=0,i=1}for(r=d.length;d[--r]===0;)d.pop();if(Ge&&(e.e>Ou||e.e<-Ou))throw Error(Gm+st(e));return e}function gC(e,t){var n,r,o,i,a,s,c,l,u,d,p=e.constructor,f=p.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new p(e),Ge?Ue(t,f):t;if(c=e.d,d=t.d,r=t.e,l=e.e,c=c.slice(),a=l-r,a){for(u=a<0,u?(n=c,a=-a,s=d.length):(n=d,r=l,s=c.length),o=Math.max(Math.ceil(f/Xe),s)+2,a>o&&(a=o,n.length=1),n.reverse(),o=a;o--;)n.push(0);n.reverse()}else{for(o=c.length,s=d.length,u=o<s,u&&(s=o),o=0;o<s;o++)if(c[o]!=d[o]){u=c[o]<d[o];break}a=0}for(u&&(n=c,c=d,d=n,t.s=-t.s),s=c.length,o=d.length-s;o>0;--o)c[s++]=0;for(o=d.length;o>a;){if(c[--o]<d[o]){for(i=o;i&&c[--i]===0;)c[i]=gt-1;--c[i],c[o]+=gt}c[o]-=d[o]}for(;c[--s]===0;)c.pop();for(;c[0]===0;c.shift())--r;return c[0]?(t.d=c,t.e=r,Ge?Ue(t,f):t):new p(0)}function _o(e,t,n){var r,o=st(e),i=Xn(e.d),a=i.length;return t?(n&&(r=n-a)>0?i=i.charAt(0)+"."+i.slice(1)+Vr(r):a>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(o<0?"e":"e+")+o):o<0?(i="0."+Vr(-o-1)+i,n&&(r=n-a)>0&&(i+=Vr(r))):o>=a?(i+=Vr(o+1-a),n&&(r=n-o-1)>0&&(i=i+"."+Vr(r))):((r=o+1)<a&&(i=i.slice(0,r)+"."+i.slice(r)),n&&(r=n-a)>0&&(o+1===a&&(i+="."),i+=Vr(r))),e.s<0?"-"+i:i}function vC(e,t){if(e.length>t)return e.length=t,!0}function bC(e){var t,n,r;function o(i){var a=this;if(!(a instanceof o))return new o(i);if(a.constructor=o,i instanceof o){a.s=i.s,a.e=i.e,a.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(xo+i);if(i>0)a.s=1;else if(i<0)i=-i,a.s=-1;else{a.s=0,a.e=0,a.d=[0];return}if(i===~~i&&i<1e7){a.e=0,a.d=[i];return}return yC(a,i.toString())}else if(typeof i!="string")throw Error(xo+i);if(i.charCodeAt(0)===45?(i=i.slice(1),a.s=-1):a.s=1,HJ.test(i))yC(a,i);else throw Error(xo+i)}if(o.prototype=pe,o.ROUND_UP=0,o.ROUND_DOWN=1,o.ROUND_CEIL=2,o.ROUND_FLOOR=3,o.ROUND_HALF_UP=4,o.ROUND_HALF_DOWN=5,o.ROUND_HALF_EVEN=6,o.ROUND_HALF_CEIL=7,o.ROUND_HALF_FLOOR=8,o.clone=bC,o.config=o.set=WJ,e===void 0&&(e={}),e)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<r.length;)e.hasOwnProperty(n=r[t++])||(e[n]=this[n]);return o.config(e),o}function WJ(e){if(!e||typeof e!="object")throw Error(mn+"Object expected");var t,n,r,o=["precision",1,Ti,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<o.length;t+=3)if((r=e[n=o[t]])!==void 0)if(Ii(r)===r&&r>=o[t+1]&&r<=o[t+2])this[n]=r;else throw Error(xo+n+": "+r);if((r=e[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(xo+n+": "+r);return this}var Zm=bC(qJ);en=new Zm(1);const Fe=Zm;function XJ(e){return KJ(e)||GJ(e)||YJ(e)||QJ()}function QJ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function YJ(e,t){if(e){if(typeof e=="string")return Jm(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Jm(e,t)}}function GJ(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function KJ(e){if(Array.isArray(e))return Jm(e)}function Jm(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ZJ=function(e){return e},xC={"@@functional/placeholder":!0},wC=function(e){return e===xC},_C=function(e){return function t(){return arguments.length===0||arguments.length===1&&wC(arguments.length<=0?void 0:arguments[0])?t:e.apply(void 0,arguments)}},JJ=function e(t,n){return t===1?n:_C(function(){for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];var a=o.filter(function(s){return s!==xC}).length;return a>=t?n.apply(void 0,o):e(t-a,_C(function(){for(var s=arguments.length,c=new Array(s),l=0;l<s;l++)c[l]=arguments[l];var u=o.map(function(d){return wC(d)?c.shift():d});return n.apply(void 0,XJ(u).concat(c))}))})},Eu=function(e){return JJ(e.length,e)},ey=function(e,t){for(var n=[],r=e;r<t;++r)n[r-e]=r;return n},eee=Eu(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(n){return t[n]}).map(e)}),tee=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!t.length)return ZJ;var r=t.reverse(),o=r[0],i=r.slice(1);return function(){return i.reduce(function(a,s){return s(a)},o.apply(void 0,arguments))}},ty=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},jC=function(e){var t=null,n=null;return function(){for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return t&&o.every(function(a,s){return a===t[s]})||(t=o,n=e.apply(void 0,o)),n}};function nee(e){var t;return e===0?t=1:t=Math.floor(new Fe(e).abs().log(10).toNumber())+1,t}function ree(e,t,n){for(var r=new Fe(e),o=0,i=[];r.lt(t)&&o<1e5;)i.push(r.toNumber()),r=r.add(n),o++;return i}var oee=Eu(function(e,t,n){var r=+e,o=+t;return r+n*(o-r)}),iee=Eu(function(e,t,n){var r=t-+e;return r=r||1/0,(n-e)/r}),aee=Eu(function(e,t,n){var r=t-+e;return r=r||1/0,Math.max(0,Math.min(1,(n-e)/r))});const Su={rangeStep:ree,getDigitCount:nee,interpolateNumber:oee,uninterpolateNumber:iee,uninterpolateTruncation:aee};function ny(e){return lee(e)||cee(e)||OC(e)||see()}function see(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cee(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function lee(e){if(Array.isArray(e))return ry(e)}function Ps(e,t){return pee(e)||dee(e,t)||OC(e,t)||uee()}function uee(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function OC(e,t){if(e){if(typeof e=="string")return ry(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ry(e,t)}}function ry(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function dee(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var n=[],r=!0,o=!1,i=void 0;try{for(var a=e[Symbol.iterator](),s;!(r=(s=a.next()).done)&&(n.push(s.value),!(t&&n.length===t));r=!0);}catch(c){o=!0,i=c}finally{try{!r&&a.return!=null&&a.return()}finally{if(o)throw i}}return n}}function pee(e){if(Array.isArray(e))return e}function EC(e){var t=Ps(e,2),n=t[0],r=t[1],o=n,i=r;return n>r&&(o=r,i=n),[o,i]}function SC(e,t,n){if(e.lte(0))return new Fe(0);var r=Su.getDigitCount(e.toNumber()),o=new Fe(10).pow(r),i=e.div(o),a=r!==1?.05:.1,s=new Fe(Math.ceil(i.div(a).toNumber())).add(n).mul(a),c=s.mul(o);return t?c:new Fe(Math.ceil(c))}function fee(e,t,n){var r=1,o=new Fe(e);if(!o.isint()&&n){var i=Math.abs(e);i<1?(r=new Fe(10).pow(Su.getDigitCount(e)-1),o=new Fe(Math.floor(o.div(r).toNumber())).mul(r)):i>1&&(o=new Fe(Math.floor(e)))}else e===0?o=new Fe(Math.floor((t-1)/2)):n||(o=new Fe(Math.floor(e)));var a=Math.floor((t-1)/2),s=tee(eee(function(c){return o.add(new Fe(c-a).mul(r)).toNumber()}),ey);return s(0,t)}function MC(e,t,n,r){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(n-1)))return{step:new Fe(0),tickMin:new Fe(0),tickMax:new Fe(0)};var i=SC(new Fe(t).sub(e).div(n-1),r,o),a;e<=0&&t>=0?a=new Fe(0):(a=new Fe(e).add(t).div(2),a=a.sub(new Fe(a).mod(i)));var s=Math.ceil(a.sub(e).div(i).toNumber()),c=Math.ceil(new Fe(t).sub(a).div(i).toNumber()),l=s+c+1;return l>n?MC(e,t,n,r,o+1):(l<n&&(c=t>0?c+(n-l):c,s=t>0?s:s+(n-l)),{step:i,tickMin:a.sub(new Fe(s).mul(i)),tickMax:a.add(new Fe(c).mul(i))})}function hee(e){var t=Ps(e,2),n=t[0],r=t[1],o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=Math.max(o,2),s=EC([n,r]),c=Ps(s,2),l=c[0],u=c[1];if(l===-1/0||u===1/0){var d=u===1/0?[l].concat(ny(ey(0,o-1).map(function(){return 1/0}))):[].concat(ny(ey(0,o-1).map(function(){return-1/0})),[u]);return n>r?ty(d):d}if(l===u)return fee(l,o,i);var p=MC(l,u,a,i),f=p.step,y=p.tickMin,m=p.tickMax,g=Su.rangeStep(y,m.add(new Fe(.1).mul(f)),f);return n>r?ty(g):g}function mee(e,t){var n=Ps(e,2),r=n[0],o=n[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=EC([r,o]),s=Ps(a,2),c=s[0],l=s[1];if(c===-1/0||l===1/0)return[r,o];if(c===l)return[c];var u=Math.max(t,2),d=SC(new Fe(l).sub(c).div(u-1),i,0),p=[].concat(ny(Su.rangeStep(new Fe(c),new Fe(l).sub(new Fe(.99).mul(d)),d)),[l]);return r>o?ty(p):p}var yee=jC(hee),gee=jC(mee),vee="Invariant failed";function jo(e,t){throw new Error(vee)}var bee=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Di(e){"@babel/helpers - typeof";return Di=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Di(e)}function Mu(){return Mu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Mu.apply(this,arguments)}function xee(e,t){return Oee(e)||jee(e,t)||_ee(e,t)||wee()}function wee(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _ee(e,t){if(e){if(typeof e=="string")return CC(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return CC(e,t)}}function CC(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function jee(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,o,i,a,s=[],c=!0,l=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(u){l=!0,o=u}finally{try{if(!c&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}function Oee(e){if(Array.isArray(e))return e}function Eee(e,t){if(e==null)return{};var n=See(e,t),r,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)r=i[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function See(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Mee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Cee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,kC(r.key),r)}}function Pee(e,t,n){return t&&Cee(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Nee(e,t,n){return t=Cu(t),kee(e,PC()?Reflect.construct(t,n||[],Cu(e).constructor):t.apply(e,n))}function kee(e,t){if(t&&(Di(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Aee(e)}function Aee(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function PC(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(PC=function(){return!!e})()}function Cu(e){return Cu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Cu(e)}function Tee(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&oy(e,t)}function oy(e,t){return oy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},oy(e,t)}function NC(e,t,n){return t=kC(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kC(e){var t=Iee(e,"string");return Di(t)=="symbol"?t:t+""}function Iee(e,t){if(Di(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Di(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Pu=function(e){function t(){return Mee(this,t),Nee(this,t,arguments)}return Tee(t,e),Pee(t,[{key:"render",value:function(){var n=this.props,r=n.offset,o=n.layout,i=n.width,a=n.dataKey,s=n.data,c=n.dataPointFormatter,l=n.xAxis,u=n.yAxis,d=Eee(n,bee),p=Ie(d,!1);this.props.direction==="x"&&l.type!=="number"&&jo();var f=s.map(function(y){var m=c(y,a),g=m.x,b=m.y,w=m.value,_=m.errorVal;if(!_)return null;var x=[],j,O;if(Array.isArray(_)){var E=xee(_,2);j=E[0],O=E[1]}else j=O=_;if(o==="vertical"){var M=l.scale,N=b+r,A=N+i,P=N-i,T=M(w-j),L=M(w+O);x.push({x1:L,y1:A,x2:L,y2:P}),x.push({x1:T,y1:N,x2:L,y2:N}),x.push({x1:T,y1:A,x2:T,y2:P})}else if(o==="horizontal"){var S=u.scale,C=g+r,k=C-i,D=C+i,R=S(w-j),B=S(w+O);x.push({x1:k,y1:B,x2:D,y2:B}),x.push({x1:C,y1:R,x2:C,y2:B}),x.push({x1:k,y1:R,x2:D,y2:R})}return $.createElement(mt,Mu({className:"recharts-errorBar",key:"bar-".concat(x.map(function(F){return"".concat(F.x1,"-").concat(F.x2,"-").concat(F.y1,"-").concat(F.y2)}))},p),x.map(function(F){return $.createElement("line",Mu({},F,{key:"line-".concat(F.x1,"-").concat(F.x2,"-").concat(F.y1,"-").concat(F.y2)}))}))});return $.createElement(mt,{className:"recharts-errorBars"},f)}}])}($.Component);NC(Pu,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"}),NC(Pu,"displayName","ErrorBar");function Ns(e){"@babel/helpers - typeof";return Ns=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ns(e)}function AC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Oo(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?AC(Object(n),!0).forEach(function(r){Dee(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):AC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Dee(e,t,n){return t=Ree(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ree(e){var t=Lee(e,"string");return Ns(t)=="symbol"?t:t+""}function Lee(e,t){if(Ns(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Ns(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var TC=function(e){var t=e.children,n=e.formattedGraphicalItems,r=e.legendWidth,o=e.legendContent,i=Jt(t,Oi);if(!i)return null;var a=Oi.defaultProps,s=a!==void 0?Oo(Oo({},a),i.props):{},c;return i.props&&i.props.payload?c=i.props&&i.props.payload:o==="children"?c=(n||[]).reduce(function(l,u){var d=u.item,p=u.props,f=p.sectors||p.data||[];return l.concat(f.map(function(y){return{type:i.props.iconType||d.props.legendType,value:y.name,color:y.fill,payload:y}}))},[]):c=(n||[]).map(function(l){var u=l.item,d=u.type.defaultProps,p=d!==void 0?Oo(Oo({},d),u.props):{},f=p.dataKey,y=p.name,m=p.legendType,g=p.hide;return{inactive:g,dataKey:f,type:s.iconType||m||"square",color:ay(u),value:y||f,payload:p}}),Oo(Oo(Oo({},s),Oi.getWithHeight(i,r)),{},{payload:c,item:i})};function ks(e){"@babel/helpers - typeof";return ks=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ks(e)}function IC(e){return zee(e)||Fee(e)||$ee(e)||Bee()}function Bee(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $ee(e,t){if(e){if(typeof e=="string")return iy(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return iy(e,t)}}function Fee(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function zee(e){if(Array.isArray(e))return iy(e)}function iy(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function DC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Je(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?DC(Object(n),!0).forEach(function(r){Ri(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):DC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Ri(e,t,n){return t=Vee(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Vee(e){var t=Uee(e,"string");return ks(t)=="symbol"?t:t+""}function Uee(e,t){if(ks(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(ks(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Qn(e,t,n){return Re(e)||Re(t)?n:ut(t)?sn(e,t,n):Ce(t)?t(e):n}function Nu(e,t,n,r){var o=FJ(e,function(s){return Qn(s,t)});if(n==="number"){var i=o.filter(function(s){return ae(s)||parseFloat(s)});return i.length?[ju(i),_u(i)]:[1/0,-1/0]}var a=r?o.filter(function(s){return!Re(s)}):o;return a.map(function(s){return ut(s)||s instanceof Date?s:""})}var qee=function(e){var t,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,i=-1,a=(t=n==null?void 0:n.length)!==null&&t!==void 0?t:0;if(a<=1)return 0;if(o&&o.axisType==="angleAxis"&&Math.abs(Math.abs(o.range[1]-o.range[0])-360)<=1e-6)for(var s=o.range,c=0;c<a;c++){var l=c>0?r[c-1].coordinate:r[a-1].coordinate,u=r[c].coordinate,d=c>=a-1?r[0].coordinate:r[c+1].coordinate,p=void 0;if(En(u-l)!==En(d-u)){var f=[];if(En(d-u)===En(s[1]-s[0])){p=d;var y=u+s[1]-s[0];f[0]=Math.min(y,(y+l)/2),f[1]=Math.max(y,(y+l)/2)}else{p=l;var m=d+s[1]-s[0];f[0]=Math.min(u,(m+u)/2),f[1]=Math.max(u,(m+u)/2)}var g=[Math.min(u,(p+u)/2),Math.max(u,(p+u)/2)];if(e>g[0]&&e<=g[1]||e>=f[0]&&e<=f[1]){i=r[c].index;break}}else{var b=Math.min(l,d),w=Math.max(l,d);if(e>(b+u)/2&&e<=(w+u)/2){i=r[c].index;break}}}else for(var _=0;_<a;_++)if(_===0&&e<=(n[_].coordinate+n[_+1].coordinate)/2||_>0&&_<a-1&&e>(n[_].coordinate+n[_-1].coordinate)/2&&e<=(n[_].coordinate+n[_+1].coordinate)/2||_===a-1&&e>(n[_].coordinate+n[_-1].coordinate)/2){i=n[_].index;break}return i},ay=function(e){var t,n=e,r=n.type.displayName,o=(t=e.type)!==null&&t!==void 0&&t.defaultProps?Je(Je({},e.type.defaultProps),e.props):e.props,i=o.stroke,a=o.fill,s;switch(r){case"Line":s=i;break;case"Area":case"Radar":s=i&&i!=="none"?i:a;break;default:s=a;break}return s},Hee=function(e){var t=e.barSize,n=e.totalSize,r=e.stackGroups,o=r===void 0?{}:r;if(!o)return{};for(var i={},a=Object.keys(o),s=0,c=a.length;s<c;s++)for(var l=o[a[s]].stackGroups,u=Object.keys(l),d=0,p=u.length;d<p;d++){var f=l[u[d]],y=f.items,m=f.cateAxisId,g=y.filter(function(O){return mr(O.type).indexOf("Bar")>=0});if(g&&g.length){var b=g[0].type.defaultProps,w=b!==void 0?Je(Je({},b),g[0].props):g[0].props,_=w.barSize,x=w[m];i[x]||(i[x]=[]);var j=Re(_)?t:_;i[x].push({item:g[0],stackList:g.slice(1),barSize:Re(j)?void 0:mo(j,n,0)})}}return i},Wee=function(e){var t=e.barGap,n=e.barCategoryGap,r=e.bandSize,o=e.sizeList,i=o===void 0?[]:o,a=e.maxBarSize,s=i.length;if(s<1)return null;var c=mo(t,r,0,!0),l,u=[];if(i[0].barSize===+i[0].barSize){var d=!1,p=r/s,f=i.reduce(function(_,x){return _+x.barSize||0},0);f+=(s-1)*c,f>=r&&(f-=(s-1)*c,c=0),f>=r&&p>0&&(d=!0,p*=.9,f=s*p);var y=(r-f)/2>>0,m={offset:y-c,size:0};l=i.reduce(function(_,x){var j={item:x.item,position:{offset:m.offset+m.size+c,size:d?p:x.barSize}},O=[].concat(IC(_),[j]);return m=O[O.length-1].position,x.stackList&&x.stackList.length&&x.stackList.forEach(function(E){O.push({item:E,position:m})}),O},u)}else{var g=mo(n,r,0,!0);r-2*g-(s-1)*c<=0&&(c=0);var b=(r-2*g-(s-1)*c)/s;b>1&&(b>>=0);var w=a===+a?Math.min(b,a):b;l=i.reduce(function(_,x,j){var O=[].concat(IC(_),[{item:x.item,position:{offset:g+(b+c)*j+(b-w)/2,size:w}}]);return x.stackList&&x.stackList.length&&x.stackList.forEach(function(E){O.push({item:E,position:O[O.length-1].position})}),O},u)}return l},Xee=function(e,t,n,r){var o=n.children,i=n.width,a=n.margin,s=i-(a.left||0)-(a.right||0),c=TC({children:o,legendWidth:s});if(c){var l=r||{},u=l.width,d=l.height,p=c.align,f=c.verticalAlign,y=c.layout;if((y==="vertical"||y==="horizontal"&&f==="middle")&&p!=="center"&&ae(e[p]))return Je(Je({},e),{},Ri({},p,e[p]+(u||0)));if((y==="horizontal"||y==="vertical"&&p==="center")&&f!=="middle"&&ae(e[f]))return Je(Je({},e),{},Ri({},f,e[f]+(d||0)))}return e},Qee=function(e,t,n){return Re(t)?!0:e==="horizontal"?t==="yAxis":e==="vertical"||n==="x"?t==="xAxis":n==="y"?t==="yAxis":!0},RC=function(e,t,n,r,o){var i=t.props.children,a=Sn(i,Pu).filter(function(c){return Qee(r,o,c.props.direction)});if(a&&a.length){var s=a.map(function(c){return c.props.dataKey});return e.reduce(function(c,l){var u=Qn(l,n);if(Re(u))return c;var d=Array.isArray(u)?[ju(u),_u(u)]:[u,u],p=s.reduce(function(f,y){var m=Qn(l,y,0),g=d[0]-Math.abs(Array.isArray(m)?m[0]:m),b=d[1]+Math.abs(Array.isArray(m)?m[1]:m);return[Math.min(g,f[0]),Math.max(b,f[1])]},[1/0,-1/0]);return[Math.min(p[0],c[0]),Math.max(p[1],c[1])]},[1/0,-1/0])}return null},Yee=function(e,t,n,r,o){var i=t.map(function(a){return RC(e,a,n,o,r)}).filter(function(a){return!Re(a)});return i&&i.length?i.reduce(function(a,s){return[Math.min(a[0],s[0]),Math.max(a[1],s[1])]},[1/0,-1/0]):null},LC=function(e,t,n,r,o){var i=t.map(function(s){var c=s.props.dataKey;return n==="number"&&c&&RC(e,s,c,r)||Nu(e,c,n,o)});if(n==="number")return i.reduce(function(s,c){return[Math.min(s[0],c[0]),Math.max(s[1],c[1])]},[1/0,-1/0]);var a={};return i.reduce(function(s,c){for(var l=0,u=c.length;l<u;l++)a[c[l]]||(a[c[l]]=!0,s.push(c[l]));return s},[])},BC=function(e,t){return e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis"},$C=function(e,t,n,r){if(r)return e.map(function(s){return s.coordinate});var o,i,a=e.map(function(s){return s.coordinate===t&&(o=!0),s.coordinate===n&&(i=!0),s.coordinate});return o||a.push(t),i||a.push(n),a},Er=function(e,t,n){if(!e)return null;var r=e.scale,o=e.duplicateDomain,i=e.type,a=e.range,s=e.realScaleType==="scaleBand"?r.bandwidth()/2:2,c=(t||n)&&i==="category"&&r.bandwidth?r.bandwidth()/s:0;if(c=e.axisType==="angleAxis"&&(a==null?void 0:a.length)>=2?En(a[0]-a[1])*2*c:c,t&&(e.ticks||e.niceTicks)){var l=(e.ticks||e.niceTicks).map(function(u){var d=o?o.indexOf(u):u;return{coordinate:r(d)+c,value:u,offset:c}});return l.filter(function(u){return!cs(u.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(u,d){return{coordinate:r(u)+c,value:u,index:d,offset:c}}):r.ticks&&!n?r.ticks(e.tickCount).map(function(u){return{coordinate:r(u)+c,value:u,offset:c}}):r.domain().map(function(u,d){return{coordinate:r(u)+c,value:o?o[u]:u,index:d,offset:c}})},sy=new WeakMap,ku=function(e,t){if(typeof t!="function")return e;sy.has(e)||sy.set(e,new WeakMap);var n=sy.get(e);if(n.has(t))return n.get(t);var r=function(){e.apply(void 0,arguments),t.apply(void 0,arguments)};return n.set(t,r),r},Gee=function(e,t,n){var r=e.scale,o=e.type,i=e.layout,a=e.axisType;if(r==="auto")return i==="radial"&&a==="radiusAxis"?{scale:xs(),realScaleType:"band"}:i==="radial"&&a==="angleAxis"?{scale:fu(),realScaleType:"linear"}:o==="category"&&t&&(t.indexOf("LineChart")>=0||t.indexOf("AreaChart")>=0||t.indexOf("ComposedChart")>=0&&!n)?{scale:ws(),realScaleType:"point"}:o==="category"?{scale:xs(),realScaleType:"band"}:{scale:fu(),realScaleType:"linear"};if(ss(r)){var s="scale".concat(Vl(r));return{scale:(uC[s]||ws)(),realScaleType:uC[s]?s:"point"}}return Ce(r)?{scale:r}:{scale:ws(),realScaleType:"point"}},FC=1e-4,Kee=function(e){var t=e.domain();if(!(!t||t.length<=2)){var n=t.length,r=e.range(),o=Math.min(r[0],r[1])-FC,i=Math.max(r[0],r[1])+FC,a=e(t[0]),s=e(t[n-1]);(a<o||a>i||s<o||s>i)&&e.domain([t[0],t[n-1]])}},Zee=function(e,t){if(!e)return null;for(var n=0,r=e.length;n<r;n++)if(e[n].item===t)return e[n].position;return null},Jee=function(e,t){if(!t||t.length!==2||!ae(t[0])||!ae(t[1]))return e;var n=Math.min(t[0],t[1]),r=Math.max(t[0],t[1]),o=[e[0],e[1]];return(!ae(e[0])||e[0]<n)&&(o[0]=n),(!ae(e[1])||e[1]>r)&&(o[1]=r),o[0]>r&&(o[0]=r),o[1]<n&&(o[1]=n),o},ete=function(e){var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var o=0,i=0,a=0;a<t;++a){var s=cs(e[a][n][1])?e[a][n][0]:e[a][n][1];s>=0?(e[a][n][0]=o,e[a][n][1]=o+s,o=e[a][n][1]):(e[a][n][0]=i,e[a][n][1]=i+s,i=e[a][n][1])}},tte=function(e){var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var o=0,i=0;i<t;++i){var a=cs(e[i][n][1])?e[i][n][0]:e[i][n][1];a>=0?(e[i][n][0]=o,e[i][n][1]=o+a,o=e[i][n][1]):(e[i][n][0]=0,e[i][n][1]=0)}},nte={sign:ete,expand:cX,none:wi,silhouette:lX,wiggle:uX,positive:tte},rte=function(e,t,n){var r=t.map(function(a){return a.props.dataKey}),o=nte[n],i=sX().keys(r).value(function(a,s){return+Qn(a,s,0)}).order(Kh).offset(o);return i(e)},ote=function(e,t,n,r,o,i){if(!e)return null;var a=i?t.reverse():t,s={},c=a.reduce(function(u,d){var p,f=(p=d.type)!==null&&p!==void 0&&p.defaultProps?Je(Je({},d.type.defaultProps),d.props):d.props,y=f.stackId,m=f.hide;if(m)return u;var g=f[n],b=u[g]||{hasStack:!1,stackGroups:{}};if(ut(y)){var w=b.stackGroups[y]||{numericAxisId:n,cateAxisId:r,items:[]};w.items.push(d),b.hasStack=!0,b.stackGroups[y]=w}else b.stackGroups[$l("_stackId_")]={numericAxisId:n,cateAxisId:r,items:[d]};return Je(Je({},u),{},Ri({},g,b))},s),l={};return Object.keys(c).reduce(function(u,d){var p=c[d];if(p.hasStack){var f={};p.stackGroups=Object.keys(p.stackGroups).reduce(function(y,m){var g=p.stackGroups[m];return Je(Je({},y),{},Ri({},m,{numericAxisId:n,cateAxisId:r,items:g.items,stackedData:rte(e,g.items,o)}))},f)}return Je(Je({},u),{},Ri({},d,p))},l)},ite=function(e,t){var n=t.realScaleType,r=t.type,o=t.tickCount,i=t.originalDomain,a=t.allowDecimals,s=n||t.scale;if(s!=="auto"&&s!=="linear")return null;if(o&&r==="number"&&i&&(i[0]==="auto"||i[1]==="auto")){var c=e.domain();if(!c.length)return null;var l=yee(c,o,a);return e.domain([ju(l),_u(l)]),{niceTicks:l}}if(o&&r==="number"){var u=e.domain(),d=gee(u,o,a);return{niceTicks:d}}return null},zC=function(e){var t=e.axis,n=e.ticks,r=e.offset,o=e.bandSize,i=e.entry,a=e.index;if(t.type==="category")return n[a]?n[a].coordinate+r:null;var s=Qn(i,t.dataKey,t.domain[a]);return Re(s)?null:t.scale(s)-o/2+r},ate=function(e){var t=e.numericAxis,n=t.scale.domain();if(t.type==="number"){var r=Math.min(n[0],n[1]),o=Math.max(n[0],n[1]);return r<=0&&o>=0?0:o<0?o:r}return n[0]},ste=function(e,t){var n,r=(n=e.type)!==null&&n!==void 0&&n.defaultProps?Je(Je({},e.type.defaultProps),e.props):e.props,o=r.stackId;if(ut(o)){var i=t[o];if(i){var a=i.items.indexOf(e);return a>=0?i.stackedData[a]:null}}return null},cte=function(e){return e.reduce(function(t,n){return[ju(n.concat([t[0]]).filter(ae)),_u(n.concat([t[1]]).filter(ae))]},[1/0,-1/0])},VC=function(e,t,n){return Object.keys(e).reduce(function(r,o){var i=e[o],a=i.stackedData,s=a.reduce(function(c,l){var u=cte(l.slice(t,n+1));return[Math.min(c[0],u[0]),Math.max(c[1],u[1])]},[1/0,-1/0]);return[Math.min(s[0],r[0]),Math.max(s[1],r[1])]},[1/0,-1/0]).map(function(r){return r===1/0||r===-1/0?0:r})},UC=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,qC=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,cy=function(e,t,n){if(Ce(e))return e(t,n);if(!Array.isArray(e))return t;var r=[];if(ae(e[0]))r[0]=n?e[0]:Math.min(e[0],t[0]);else if(UC.test(e[0])){var o=+UC.exec(e[0])[1];r[0]=t[0]-o}else Ce(e[0])?r[0]=e[0](t[0]):r[0]=t[0];if(ae(e[1]))r[1]=n?e[1]:Math.max(e[1],t[1]);else if(qC.test(e[1])){var i=+qC.exec(e[1])[1];r[1]=t[1]+i}else Ce(e[1])?r[1]=e[1](t[1]):r[1]=t[1];return r},Au=function(e,t,n){if(e&&e.scale&&e.scale.bandwidth){var r=e.scale.bandwidth();if(!n||r>0)return r}if(e&&t&&t.length>=2){for(var o=lm(t,function(u){return u.coordinate}),i=1/0,a=1,s=o.length;a<s;a++){var c=o[a],l=o[a-1];i=Math.min((c.coordinate||0)-(l.coordinate||0),i)}return i===1/0?0:i}return n?void 0:0},HC=function(e,t,n){return!e||!e.length||Ym(e,sn(n,"type.defaultProps.domain"))?t:e},WC=function(e,t){var n=e.type.defaultProps?Je(Je({},e.type.defaultProps),e.props):e.props,r=n.dataKey,o=n.name,i=n.unit,a=n.formatter,s=n.tooltipType,c=n.chartType,l=n.hide;return Je(Je({},Ie(e,!1)),{},{dataKey:r,unit:i,formatter:a,name:o||r,color:ay(e),value:Qn(t,r),type:s,payload:t,chartType:c,hide:l})};function As(e){"@babel/helpers - typeof";return As=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},As(e)}function XC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function QC(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?XC(Object(n),!0).forEach(function(r){lte(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):XC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function lte(e,t,n){return t=ute(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ute(e){var t=dte(e,"string");return As(t)=="symbol"?t:t+""}function dte(e,t){if(As(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(As(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Tu=Math.PI/180,pte=function(e){return e*180/Math.PI},wt=function(e,t,n,r){return{x:e+Math.cos(-Tu*r)*n,y:t+Math.sin(-Tu*r)*n}},fte=function(e,t){var n=e.x,r=e.y,o=t.x,i=t.y;return Math.sqrt(Math.pow(n-o,2)+Math.pow(r-i,2))},hte=function(e,t){var n=e.x,r=e.y,o=t.cx,i=t.cy,a=fte({x:n,y:r},{x:o,y:i});if(a<=0)return{radius:a};var s=(n-o)/a,c=Math.acos(s);return r>i&&(c=2*Math.PI-c),{radius:a,angle:pte(c),angleInRadian:c}},mte=function(e){var t=e.startAngle,n=e.endAngle,r=Math.floor(t/360),o=Math.floor(n/360),i=Math.min(r,o);return{startAngle:t-i*360,endAngle:n-i*360}},yte=function(e,t){var n=t.startAngle,r=t.endAngle,o=Math.floor(n/360),i=Math.floor(r/360),a=Math.min(o,i);return e+a*360},YC=function(e,t){var n=e.x,r=e.y,o=hte({x:n,y:r},t),i=o.radius,a=o.angle,s=t.innerRadius,c=t.outerRadius;if(i<s||i>c)return!1;if(i===0)return!0;var l=mte(t),u=l.startAngle,d=l.endAngle,p=a,f;if(u<=d){for(;p>d;)p-=360;for(;p<u;)p+=360;f=p>=u&&p<=d}else{for(;p>u;)p-=360;for(;p<d;)p+=360;f=p>=d&&p<=u}return f?QC(QC({},t),{},{radius:i,angle:yte(p,t)}):null};function Ts(e){"@babel/helpers - typeof";return Ts=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ts(e)}var gte=["offset"];function vte(e){return _te(e)||wte(e)||xte(e)||bte()}function bte(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xte(e,t){if(e){if(typeof e=="string")return ly(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ly(e,t)}}function wte(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function _te(e){if(Array.isArray(e))return ly(e)}function ly(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function jte(e,t){if(e==null)return{};var n=Ote(e,t),r,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)r=i[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Ote(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function GC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function pt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?GC(Object(n),!0).forEach(function(r){Ete(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):GC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Ete(e,t,n){return t=Ste(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ste(e){var t=Mte(e,"string");return Ts(t)=="symbol"?t:t+""}function Mte(e,t){if(Ts(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Ts(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Is(){return Is=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Is.apply(this,arguments)}var Cte=function(e){var t=e.value,n=e.formatter,r=Re(e.children)?t:e.children;return Ce(n)?n(r):r},Pte=function(e,t){var n=En(t-e),r=Math.min(Math.abs(t-e),360);return n*r},Nte=function(e,t,n){var r=e.position,o=e.viewBox,i=e.offset,a=e.className,s=o,c=s.cx,l=s.cy,u=s.innerRadius,d=s.outerRadius,p=s.startAngle,f=s.endAngle,y=s.clockWise,m=(u+d)/2,g=Pte(p,f),b=g>=0?1:-1,w,_;r==="insideStart"?(w=p+b*i,_=y):r==="insideEnd"?(w=f-b*i,_=!y):r==="end"&&(w=f+b*i,_=y),_=g<=0?_:!_;var x=wt(c,l,m,w),j=wt(c,l,m,w+(_?1:-1)*359),O="M".concat(x.x,",").concat(x.y,`
    A`).concat(m,",").concat(m,",0,1,").concat(_?0:1,`,
    `).concat(j.x,",").concat(j.y),E=Re(e.id)?$l("recharts-radial-line-"):e.id;return $.createElement("text",Is({},n,{dominantBaseline:"central",className:Le("recharts-radial-bar-label",a)}),$.createElement("defs",null,$.createElement("path",{id:E,d:O})),$.createElement("textPath",{xlinkHref:"#".concat(E)},t))},kte=function(e){var t=e.viewBox,n=e.offset,r=e.position,o=t,i=o.cx,a=o.cy,s=o.innerRadius,c=o.outerRadius,l=o.startAngle,u=o.endAngle,d=(l+u)/2;if(r==="outside"){var p=wt(i,a,c+n,d),f=p.x,y=p.y;return{x:f,y,textAnchor:f>=i?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:i,y:a,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:i,y:a,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:i,y:a,textAnchor:"middle",verticalAnchor:"end"};var m=(s+c)/2,g=wt(i,a,m,d),b=g.x,w=g.y;return{x:b,y:w,textAnchor:"middle",verticalAnchor:"middle"}},Ate=function(e){var t=e.viewBox,n=e.parentViewBox,r=e.offset,o=e.position,i=t,a=i.x,s=i.y,c=i.width,l=i.height,u=l>=0?1:-1,d=u*r,p=u>0?"end":"start",f=u>0?"start":"end",y=c>=0?1:-1,m=y*r,g=y>0?"end":"start",b=y>0?"start":"end";if(o==="top"){var w={x:a+c/2,y:s-u*r,textAnchor:"middle",verticalAnchor:p};return pt(pt({},w),n?{height:Math.max(s-n.y,0),width:c}:{})}if(o==="bottom"){var _={x:a+c/2,y:s+l+d,textAnchor:"middle",verticalAnchor:f};return pt(pt({},_),n?{height:Math.max(n.y+n.height-(s+l),0),width:c}:{})}if(o==="left"){var x={x:a-m,y:s+l/2,textAnchor:g,verticalAnchor:"middle"};return pt(pt({},x),n?{width:Math.max(x.x-n.x,0),height:l}:{})}if(o==="right"){var j={x:a+c+m,y:s+l/2,textAnchor:b,verticalAnchor:"middle"};return pt(pt({},j),n?{width:Math.max(n.x+n.width-j.x,0),height:l}:{})}var O=n?{width:c,height:l}:{};return o==="insideLeft"?pt({x:a+m,y:s+l/2,textAnchor:b,verticalAnchor:"middle"},O):o==="insideRight"?pt({x:a+c-m,y:s+l/2,textAnchor:g,verticalAnchor:"middle"},O):o==="insideTop"?pt({x:a+c/2,y:s+d,textAnchor:"middle",verticalAnchor:f},O):o==="insideBottom"?pt({x:a+c/2,y:s+l-d,textAnchor:"middle",verticalAnchor:p},O):o==="insideTopLeft"?pt({x:a+m,y:s+d,textAnchor:b,verticalAnchor:f},O):o==="insideTopRight"?pt({x:a+c-m,y:s+d,textAnchor:g,verticalAnchor:f},O):o==="insideBottomLeft"?pt({x:a+m,y:s+l-d,textAnchor:b,verticalAnchor:p},O):o==="insideBottomRight"?pt({x:a+c-m,y:s+l-d,textAnchor:g,verticalAnchor:p},O):Jo(o)&&(ae(o.x)||ho(o.x))&&(ae(o.y)||ho(o.y))?pt({x:a+mo(o.x,c),y:s+mo(o.y,l),textAnchor:"end",verticalAnchor:"end"},O):pt({x:a+c/2,y:s+l/2,textAnchor:"middle",verticalAnchor:"middle"},O)},Tte=function(e){return"cx"in e&&ae(e.cx)};function Ot(e){var t=e.offset,n=t===void 0?5:t,r=jte(e,gte),o=pt({offset:n},r),i=o.viewBox,a=o.position,s=o.value,c=o.children,l=o.content,u=o.className,d=u===void 0?"":u,p=o.textBreakAll;if(!i||Re(s)&&Re(c)&&!v.isValidElement(l)&&!Ce(l))return null;if(v.isValidElement(l))return v.cloneElement(l,o);var f;if(Ce(l)){if(f=v.createElement(l,o),v.isValidElement(f))return f}else f=Cte(o);var y=Tte(i),m=Ie(o,!0);if(y&&(a==="insideStart"||a==="insideEnd"||a==="end"))return Nte(o,f,m);var g=y?kte(o):Ate(o);return $.createElement(su,Is({className:Le("recharts-label",d)},m,g,{breakAll:p}),f)}Ot.displayName="Label";var KC=function(e){var t=e.cx,n=e.cy,r=e.angle,o=e.startAngle,i=e.endAngle,a=e.r,s=e.radius,c=e.innerRadius,l=e.outerRadius,u=e.x,d=e.y,p=e.top,f=e.left,y=e.width,m=e.height,g=e.clockWise,b=e.labelViewBox;if(b)return b;if(ae(y)&&ae(m)){if(ae(u)&&ae(d))return{x:u,y:d,width:y,height:m};if(ae(p)&&ae(f))return{x:p,y:f,width:y,height:m}}return ae(u)&&ae(d)?{x:u,y:d,width:0,height:0}:ae(t)&&ae(n)?{cx:t,cy:n,startAngle:o||r||0,endAngle:i||r||0,innerRadius:c||0,outerRadius:l||s||a||0,clockWise:g}:e.viewBox?e.viewBox:{}},Ite=function(e,t){return e?e===!0?$.createElement(Ot,{key:"label-implicit",viewBox:t}):ut(e)?$.createElement(Ot,{key:"label-implicit",viewBox:t,value:e}):v.isValidElement(e)?e.type===Ot?v.cloneElement(e,{key:"label-implicit",viewBox:t}):$.createElement(Ot,{key:"label-implicit",content:e,viewBox:t}):Ce(e)?$.createElement(Ot,{key:"label-implicit",content:e,viewBox:t}):Jo(e)?$.createElement(Ot,Is({viewBox:t},e,{key:"label-implicit"})):null:null},Dte=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var r=e.children,o=KC(e),i=Sn(r,Ot).map(function(s,c){return v.cloneElement(s,{viewBox:t||o,key:"label-".concat(c)})});if(!n)return i;var a=Ite(e.label,t||o);return[a].concat(vte(i))};Ot.parseViewBox=KC,Ot.renderCallByParent=Dte;function Rte(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}_v=Rte,ev=Ne(_v);function Ds(e){"@babel/helpers - typeof";return Ds=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ds(e)}var Lte=["valueAccessor"],Bte=["data","dataKey","clockWise","id","textBreakAll"];function $te(e){return Ute(e)||Vte(e)||zte(e)||Fte()}function Fte(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zte(e,t){if(e){if(typeof e=="string")return uy(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return uy(e,t)}}function Vte(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Ute(e){if(Array.isArray(e))return uy(e)}function uy(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Iu(){return Iu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Iu.apply(this,arguments)}function ZC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function JC(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ZC(Object(n),!0).forEach(function(r){qte(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ZC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function qte(e,t,n){return t=Hte(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Hte(e){var t=Wte(e,"string");return Ds(t)=="symbol"?t:t+""}function Wte(e,t){if(Ds(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Ds(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function e2(e,t){if(e==null)return{};var n=Xte(e,t),r,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)r=i[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Xte(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var Qte=function(e){return Array.isArray(e.value)?ev(e.value):e.value};function Eo(e){var t=e.valueAccessor,n=t===void 0?Qte:t,r=e2(e,Lte),o=r.data,i=r.dataKey,a=r.clockWise,s=r.id,c=r.textBreakAll,l=e2(r,Bte);return!o||!o.length?null:$.createElement(mt,{className:"recharts-label-list"},o.map(function(u,d){var p=Re(i)?n(u,d):Qn(u&&u.payload,i),f=Re(s)?{}:{id:"".concat(s,"-").concat(d)};return $.createElement(Ot,Iu({},Ie(u,!0),l,f,{parentViewBox:u.parentViewBox,value:p,textBreakAll:c,viewBox:Ot.parseViewBox(Re(a)?u:JC(JC({},u),{},{clockWise:a})),key:"label-".concat(d),index:d}))}))}Eo.displayName="LabelList";function Yte(e,t){return e?e===!0?$.createElement(Eo,{key:"labelList-implicit",data:t}):$.isValidElement(e)||Ce(e)?$.createElement(Eo,{key:"labelList-implicit",data:t,content:e}):Jo(e)?$.createElement(Eo,Iu({data:t},e,{key:"labelList-implicit"})):null:null}function Gte(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var r=e.children,o=Sn(r,Eo).map(function(a,s){return v.cloneElement(a,{data:t,key:"labelList-".concat(s)})});if(!n)return o;var i=Yte(e.label,t);return[i].concat($te(o))}Eo.renderCallByParent=Gte;function Rs(e){"@babel/helpers - typeof";return Rs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rs(e)}function dy(){return dy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dy.apply(this,arguments)}function t2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function n2(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?t2(Object(n),!0).forEach(function(r){Kte(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):t2(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Kte(e,t,n){return t=Zte(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Zte(e){var t=Jte(e,"string");return Rs(t)=="symbol"?t:t+""}function Jte(e,t){if(Rs(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Rs(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ene=function(e,t){var n=En(t-e),r=Math.min(Math.abs(t-e),359.999);return n*r},Du=function(e){var t=e.cx,n=e.cy,r=e.radius,o=e.angle,i=e.sign,a=e.isExternal,s=e.cornerRadius,c=e.cornerIsExternal,l=s*(a?1:-1)+r,u=Math.asin(s/l)/Tu,d=c?o:o+i*u,p=wt(t,n,l,d),f=wt(t,n,r,d),y=c?o-i*u:o,m=wt(t,n,l*Math.cos(u*Tu),y);return{center:p,circleTangency:f,lineTangency:m,theta:u}},r2=function(e){var t=e.cx,n=e.cy,r=e.innerRadius,o=e.outerRadius,i=e.startAngle,a=e.endAngle,s=ene(i,a),c=i+s,l=wt(t,n,o,i),u=wt(t,n,o,c),d="M ".concat(l.x,",").concat(l.y,`
    A `).concat(o,",").concat(o,`,0,
    `).concat(+(Math.abs(s)>180),",").concat(+(i>c),`,
    `).concat(u.x,",").concat(u.y,`
  `);if(r>0){var p=wt(t,n,r,i),f=wt(t,n,r,c);d+="L ".concat(f.x,",").concat(f.y,`
            A `).concat(r,",").concat(r,`,0,
            `).concat(+(Math.abs(s)>180),",").concat(+(i<=c),`,
            `).concat(p.x,",").concat(p.y," Z")}else d+="L ".concat(t,",").concat(n," Z");return d},tne=function(e){var t=e.cx,n=e.cy,r=e.innerRadius,o=e.outerRadius,i=e.cornerRadius,a=e.forceCornerRadius,s=e.cornerIsExternal,c=e.startAngle,l=e.endAngle,u=En(l-c),d=Du({cx:t,cy:n,radius:o,angle:c,sign:u,cornerRadius:i,cornerIsExternal:s}),p=d.circleTangency,f=d.lineTangency,y=d.theta,m=Du({cx:t,cy:n,radius:o,angle:l,sign:-u,cornerRadius:i,cornerIsExternal:s}),g=m.circleTangency,b=m.lineTangency,w=m.theta,_=s?Math.abs(c-l):Math.abs(c-l)-y-w;if(_<0)return a?"M ".concat(f.x,",").concat(f.y,`
        a`).concat(i,",").concat(i,",0,0,1,").concat(i*2,`,0
        a`).concat(i,",").concat(i,",0,0,1,").concat(-i*2,`,0
      `):r2({cx:t,cy:n,innerRadius:r,outerRadius:o,startAngle:c,endAngle:l});var x="M ".concat(f.x,",").concat(f.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(u<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(o,",").concat(o,",0,").concat(+(_>180),",").concat(+(u<0),",").concat(g.x,",").concat(g.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(u<0),",").concat(b.x,",").concat(b.y,`
  `);if(r>0){var j=Du({cx:t,cy:n,radius:r,angle:c,sign:u,isExternal:!0,cornerRadius:i,cornerIsExternal:s}),O=j.circleTangency,E=j.lineTangency,M=j.theta,N=Du({cx:t,cy:n,radius:r,angle:l,sign:-u,isExternal:!0,cornerRadius:i,cornerIsExternal:s}),A=N.circleTangency,P=N.lineTangency,T=N.theta,L=s?Math.abs(c-l):Math.abs(c-l)-M-T;if(L<0&&i===0)return"".concat(x,"L").concat(t,",").concat(n,"Z");x+="L".concat(P.x,",").concat(P.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(u<0),",").concat(A.x,",").concat(A.y,`
      A`).concat(r,",").concat(r,",0,").concat(+(L>180),",").concat(+(u>0),",").concat(O.x,",").concat(O.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(u<0),",").concat(E.x,",").concat(E.y,"Z")}else x+="L".concat(t,",").concat(n,"Z");return x},nne={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},o2=function(e){var t=n2(n2({},nne),e),n=t.cx,r=t.cy,o=t.innerRadius,i=t.outerRadius,a=t.cornerRadius,s=t.forceCornerRadius,c=t.cornerIsExternal,l=t.startAngle,u=t.endAngle,d=t.className;if(i<o||l===u)return null;var p=Le("recharts-sector",d),f=i-o,y=mo(a,f,0,!0),m;return y>0&&Math.abs(l-u)<360?m=tne({cx:n,cy:r,innerRadius:o,outerRadius:i,cornerRadius:Math.min(y,f/2),forceCornerRadius:s,cornerIsExternal:c,startAngle:l,endAngle:u}):m=r2({cx:n,cy:r,innerRadius:o,outerRadius:i,startAngle:l,endAngle:u}),$.createElement("path",dy({},Ie(t,!0),{className:p,d:m,role:"img"}))};function Ls(e){"@babel/helpers - typeof";return Ls=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ls(e)}function py(){return py=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},py.apply(this,arguments)}function i2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function a2(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?i2(Object(n),!0).forEach(function(r){rne(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i2(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function rne(e,t,n){return t=one(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function one(e){var t=ine(e,"string");return Ls(t)=="symbol"?t:t+""}function ine(e,t){if(Ls(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Ls(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var s2={curveBasisClosed:GW,curveBasisOpen:KW,curveBasis:YW,curveBumpX:DW,curveBumpY:RW,curveLinearClosed:ZW,curveLinear:Wl,curveMonotoneX:JW,curveMonotoneY:eX,curveNatural:tX,curveStep:nX,curveStepAfter:oX,curveStepBefore:rX},Ru=function(e){return e.x===+e.x&&e.y===+e.y},Bs=function(e){return e.x},$s=function(e){return e.y},ane=function(e,t){if(Ce(e))return e;var n="curve".concat(Vl(e));return(n==="curveMonotone"||n==="curveBump")&&t?s2["".concat(n).concat(t==="vertical"?"Y":"X")]:s2[n]||Wl},sne=function(e){var t=e.type,n=t===void 0?"linear":t,r=e.points,o=r===void 0?[]:r,i=e.baseLine,a=e.layout,s=e.connectNulls,c=s===void 0?!1:s,l=ane(n,a),u=c?o.filter(function(y){return Ru(y)}):o,d;if(Array.isArray(i)){var p=c?i.filter(function(y){return Ru(y)}):i,f=u.map(function(y,m){return a2(a2({},y),{},{base:p[m]})});return a==="vertical"?d=Xl().y($s).x1(Bs).x0(function(y){return y.base.x}):d=Xl().x(Bs).y1($s).y0(function(y){return y.base.y}),d.defined(Ru).curve(l),d(f)}return a==="vertical"&&ae(i)?d=Xl().y($s).x1(Bs).x0(i):ae(i)?d=Xl().x(Bs).y1($s).y0(i):d=xE().x(Bs).y($s),d.defined(Ru).curve(l),d(u)},c2=function(e){var t=e.className,n=e.points,r=e.path,o=e.pathRef;if((!n||!n.length)&&!r)return null;var i=n&&n.length?sne(e):r;return $.createElement("path",py({},Ie(e,!1),Fl(e),{className:Le("recharts-curve",t),d:i,ref:o}))},l2={exports:{}},cne="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",lne=cne,une=lne;function u2(){}function d2(){}d2.resetWarningCache=u2;var dne=function(){function e(r,o,i,a,s,c){if(c!==une){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:d2,resetWarningCache:u2};return n.PropTypes=n,n};l2.exports=dne();var pne=l2.exports;const _e=Ne(pne);var fne=Object.getOwnPropertyNames,hne=Object.getOwnPropertySymbols,mne=Object.prototype.hasOwnProperty;function p2(e,t){return function(n,r,o){return e(n,r,o)&&t(n,r,o)}}function Lu(e){return function(t,n,r){if(!t||!n||typeof t!="object"||typeof n!="object")return e(t,n,r);var o=r.cache,i=o.get(t),a=o.get(n);if(i&&a)return i===n&&a===t;o.set(t,n),o.set(n,t);var s=e(t,n,r);return o.delete(t),o.delete(n),s}}function f2(e){return fne(e).concat(hne(e))}var h2=Object.hasOwn||function(e,t){return mne.call(e,t)};function Li(e,t){return e||t?e===t:e===t||e!==e&&t!==t}var m2="_owner",y2=Object.getOwnPropertyDescriptor,g2=Object.keys;function yne(e,t,n){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(!n.equals(e[r],t[r],r,r,e,t,n))return!1;return!0}function gne(e,t){return Li(e.getTime(),t.getTime())}function v2(e,t,n){if(e.size!==t.size)return!1;for(var r={},o=e.entries(),i=0,a,s;(a=o.next())&&!a.done;){for(var c=t.entries(),l=!1,u=0;(s=c.next())&&!s.done;){var d=a.value,p=d[0],f=d[1],y=s.value,m=y[0],g=y[1];!l&&!r[u]&&(l=n.equals(p,m,i,u,e,t,n)&&n.equals(f,g,p,m,e,t,n))&&(r[u]=!0),u++}if(!l)return!1;i++}return!0}function vne(e,t,n){var r=g2(e),o=r.length;if(g2(t).length!==o)return!1;for(var i;o-- >0;)if(i=r[o],i===m2&&(e.$$typeof||t.$$typeof)&&e.$$typeof!==t.$$typeof||!h2(t,i)||!n.equals(e[i],t[i],i,i,e,t,n))return!1;return!0}function Fs(e,t,n){var r=f2(e),o=r.length;if(f2(t).length!==o)return!1;for(var i,a,s;o-- >0;)if(i=r[o],i===m2&&(e.$$typeof||t.$$typeof)&&e.$$typeof!==t.$$typeof||!h2(t,i)||!n.equals(e[i],t[i],i,i,e,t,n)||(a=y2(e,i),s=y2(t,i),(a||s)&&(!a||!s||a.configurable!==s.configurable||a.enumerable!==s.enumerable||a.writable!==s.writable)))return!1;return!0}function bne(e,t){return Li(e.valueOf(),t.valueOf())}function xne(e,t){return e.source===t.source&&e.flags===t.flags}function b2(e,t,n){if(e.size!==t.size)return!1;for(var r={},o=e.values(),i,a;(i=o.next())&&!i.done;){for(var s=t.values(),c=!1,l=0;(a=s.next())&&!a.done;)!c&&!r[l]&&(c=n.equals(i.value,a.value,i.value,a.value,e,t,n))&&(r[l]=!0),l++;if(!c)return!1}return!0}function wne(e,t){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(e[n]!==t[n])return!1;return!0}var _ne="[object Arguments]",jne="[object Boolean]",One="[object Date]",Ene="[object Map]",Sne="[object Number]",Mne="[object Object]",Cne="[object RegExp]",Pne="[object Set]",Nne="[object String]",kne=Array.isArray,x2=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,w2=Object.assign,Ane=Object.prototype.toString.call.bind(Object.prototype.toString);function Tne(e){var t=e.areArraysEqual,n=e.areDatesEqual,r=e.areMapsEqual,o=e.areObjectsEqual,i=e.arePrimitiveWrappersEqual,a=e.areRegExpsEqual,s=e.areSetsEqual,c=e.areTypedArraysEqual;return function(l,u,d){if(l===u)return!0;if(l==null||u==null||typeof l!="object"||typeof u!="object")return l!==l&&u!==u;var p=l.constructor;if(p!==u.constructor)return!1;if(p===Object)return o(l,u,d);if(kne(l))return t(l,u,d);if(x2!=null&&x2(l))return c(l,u,d);if(p===Date)return n(l,u,d);if(p===RegExp)return a(l,u,d);if(p===Map)return r(l,u,d);if(p===Set)return s(l,u,d);var f=Ane(l);return f===One?n(l,u,d):f===Cne?a(l,u,d):f===Ene?r(l,u,d):f===Pne?s(l,u,d):f===Mne?typeof l.then!="function"&&typeof u.then!="function"&&o(l,u,d):f===_ne?o(l,u,d):f===jne||f===Sne||f===Nne?i(l,u,d):!1}}function Ine(e){var t=e.circular,n=e.createCustomConfig,r=e.strict,o={areArraysEqual:r?Fs:yne,areDatesEqual:gne,areMapsEqual:r?p2(v2,Fs):v2,areObjectsEqual:r?Fs:vne,arePrimitiveWrappersEqual:bne,areRegExpsEqual:xne,areSetsEqual:r?p2(b2,Fs):b2,areTypedArraysEqual:r?Fs:wne};if(n&&(o=w2({},o,n(o))),t){var i=Lu(o.areArraysEqual),a=Lu(o.areMapsEqual),s=Lu(o.areObjectsEqual),c=Lu(o.areSetsEqual);o=w2({},o,{areArraysEqual:i,areMapsEqual:a,areObjectsEqual:s,areSetsEqual:c})}return o}function Dne(e){return function(t,n,r,o,i,a,s){return e(t,n,s)}}function Rne(e){var t=e.circular,n=e.comparator,r=e.createState,o=e.equals,i=e.strict;if(r)return function(s,c){var l=r(),u=l.cache,d=u===void 0?t?new WeakMap:void 0:u,p=l.meta;return n(s,c,{cache:d,equals:o,meta:p,strict:i})};if(t)return function(s,c){return n(s,c,{cache:new WeakMap,equals:o,meta:void 0,strict:i})};var a={cache:void 0,equals:o,meta:void 0,strict:i};return function(s,c){return n(s,c,a)}}var Lne=Ur();Ur({strict:!0}),Ur({circular:!0}),Ur({circular:!0,strict:!0}),Ur({createInternalComparator:function(){return Li}}),Ur({strict:!0,createInternalComparator:function(){return Li}}),Ur({circular:!0,createInternalComparator:function(){return Li}}),Ur({circular:!0,createInternalComparator:function(){return Li},strict:!0});function Ur(e){e===void 0&&(e={});var t=e.circular,n=t===void 0?!1:t,r=e.createInternalComparator,o=e.createState,i=e.strict,a=i===void 0?!1:i,s=Ine(e),c=Tne(s),l=r?r(c):Dne(c);return Rne({circular:n,comparator:c,createState:o,equals:l,strict:a})}function Bne(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function _2(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,r=function o(i){n<0&&(n=i),i-n>t?(e(i),n=-1):Bne(o)};requestAnimationFrame(r)}function fy(e){"@babel/helpers - typeof";return fy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fy(e)}function $ne(e){return Une(e)||Vne(e)||zne(e)||Fne()}function Fne(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zne(e,t){if(e){if(typeof e=="string")return j2(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return j2(e,t)}}function j2(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Vne(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Une(e){if(Array.isArray(e))return e}function qne(){var e={},t=function(){return null},n=!1,r=function o(i){if(!n){if(Array.isArray(i)){if(!i.length)return;var a=i,s=$ne(a),c=s[0],l=s.slice(1);if(typeof c=="number"){_2(o.bind(null,l),c);return}o(c),_2(o.bind(null,l));return}fy(i)==="object"&&(e=i,t(e)),typeof i=="function"&&i()}};return{stop:function(){n=!0},start:function(o){n=!1,r(o)},subscribe:function(o){return t=o,function(){t=function(){return null}}}}}function zs(e){"@babel/helpers - typeof";return zs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zs(e)}function O2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function E2(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?O2(Object(n),!0).forEach(function(r){S2(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O2(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function S2(e,t,n){return t=Hne(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Hne(e){var t=Wne(e,"string");return zs(t)==="symbol"?t:String(t)}function Wne(e,t){if(zs(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(zs(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Xne=function(e,t){return[Object.keys(e),Object.keys(t)].reduce(function(n,r){return n.filter(function(o){return r.includes(o)})})},Qne=function(e){return e},Yne=function(e){return e.replace(/([A-Z])/g,function(t){return"-".concat(t.toLowerCase())})},Vs=function(e,t){return Object.keys(t).reduce(function(n,r){return E2(E2({},n),{},S2({},r,e(r,t[r])))},{})},M2=function(e,t,n){return e.map(function(r){return"".concat(Yne(r)," ").concat(t,"ms ").concat(n)}).join(",")};function Gne(e,t){return Jne(e)||Zne(e,t)||C2(e,t)||Kne()}function Kne(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Zne(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,o,i,a,s=[],c=!0,l=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(u){l=!0,o=u}finally{try{if(!c&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}function Jne(e){if(Array.isArray(e))return e}function ere(e){return rre(e)||nre(e)||C2(e)||tre()}function tre(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function C2(e,t){if(e){if(typeof e=="string")return hy(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hy(e,t)}}function nre(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function rre(e){if(Array.isArray(e))return hy(e)}function hy(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Bu=1e-4,P2=function(e,t){return[0,3*e,3*t-6*e,3*e-3*t+1]},N2=function(e,t){return e.map(function(n,r){return n*Math.pow(t,r)}).reduce(function(n,r){return n+r})},k2=function(e,t){return function(n){var r=P2(e,t);return N2(r,n)}},ore=function(e,t){return function(n){var r=P2(e,t),o=[].concat(ere(r.map(function(i,a){return i*a}).slice(1)),[0]);return N2(o,n)}},A2=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],o=t[1],i=t[2],a=t[3];if(t.length===1)switch(t[0]){case"linear":r=0,o=0,i=1,a=1;break;case"ease":r=.25,o=.1,i=.25,a=1;break;case"ease-in":r=.42,o=0,i=1,a=1;break;case"ease-out":r=.42,o=0,i=.58,a=1;break;case"ease-in-out":r=0,o=0,i=.58,a=1;break;default:{var s=t[0].split("(");if(s[0]==="cubic-bezier"&&s[1].split(")")[0].split(",").length===4){var c=s[1].split(")")[0].split(",").map(function(m){return parseFloat(m)}),l=Gne(c,4);r=l[0],o=l[1],i=l[2],a=l[3]}}}var u=k2(r,i),d=k2(o,a),p=ore(r,i),f=function(m){return m>1?1:m<0?0:m},y=function(m){for(var g=m>1?1:m,b=g,w=0;w<8;++w){var _=u(b)-g,x=p(b);if(Math.abs(_-g)<Bu||x<Bu)return d(b);b=f(b-_/x)}return d(b)};return y.isStepper=!1,y},ire=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.stiff,n=t===void 0?100:t,r=e.damping,o=r===void 0?8:r,i=e.dt,a=i===void 0?17:i,s=function(c,l,u){var d=-(c-l)*n,p=u*o,f=u+(d-p)*a/1e3,y=u*a/1e3+c;return Math.abs(y-l)<Bu&&Math.abs(f)<Bu?[l,0]:[y,f]};return s.isStepper=!0,s.dt=a,s},are=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0];if(typeof r=="string")switch(r){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return A2(r);case"spring":return ire();default:if(r.split("(")[0]==="cubic-bezier")return A2(r)}return typeof r=="function"?r:null};function Us(e){"@babel/helpers - typeof";return Us=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Us(e)}function T2(e){return lre(e)||cre(e)||D2(e)||sre()}function sre(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cre(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function lre(e){if(Array.isArray(e))return yy(e)}function I2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function _t(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?I2(Object(n),!0).forEach(function(r){my(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I2(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function my(e,t,n){return t=ure(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ure(e){var t=dre(e,"string");return Us(t)==="symbol"?t:String(t)}function dre(e,t){if(Us(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Us(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function pre(e,t){return mre(e)||hre(e,t)||D2(e,t)||fre()}function fre(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function D2(e,t){if(e){if(typeof e=="string")return yy(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yy(e,t)}}function yy(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function hre(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,o,i,a,s=[],c=!0,l=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(u){l=!0,o=u}finally{try{if(!c&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}function mre(e){if(Array.isArray(e))return e}var $u=function(e,t,n){return e+(t-e)*n},gy=function(e){var t=e.from,n=e.to;return t!==n},yre=function e(t,n,r){var o=Vs(function(i,a){if(gy(a)){var s=t(a.from,a.to,a.velocity),c=pre(s,2),l=c[0],u=c[1];return _t(_t({},a),{},{from:l,velocity:u})}return a},n);return r<1?Vs(function(i,a){return gy(a)?_t(_t({},a),{},{velocity:$u(a.velocity,o[i].velocity,r),from:$u(a.from,o[i].from,r)}):a},n):e(t,o,r-1)};const gre=function(e,t,n,r,o){var i=Xne(e,t),a=i.reduce(function(g,b){return _t(_t({},g),{},my({},b,[e[b],t[b]]))},{}),s=i.reduce(function(g,b){return _t(_t({},g),{},my({},b,{from:e[b],velocity:0,to:t[b]}))},{}),c=-1,l,u,d=function(){return null},p=function(){return Vs(function(g,b){return b.from},s)},f=function(){return!Object.values(s).filter(gy).length},y=function(g){l||(l=g);var b=g-l,w=b/n.dt;s=yre(n,s,w),o(_t(_t(_t({},e),t),p())),l=g,f()||(c=requestAnimationFrame(d))},m=function(g){u||(u=g);var b=(g-u)/r,w=Vs(function(x,j){return $u.apply(void 0,T2(j).concat([n(b)]))},a);if(o(_t(_t(_t({},e),t),w)),b<1)c=requestAnimationFrame(d);else{var _=Vs(function(x,j){return $u.apply(void 0,T2(j).concat([n(1)]))},a);o(_t(_t(_t({},e),t),_))}};return d=n.isStepper?y:m,function(){return requestAnimationFrame(d),function(){cancelAnimationFrame(c)}}};function Bi(e){"@babel/helpers - typeof";return Bi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bi(e)}var vre=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function bre(e,t){if(e==null)return{};var n=xre(e,t),r,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)r=i[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function xre(e,t){if(e==null)return{};var n={},r=Object.keys(e),o,i;for(i=0;i<r.length;i++)o=r[i],!(t.indexOf(o)>=0)&&(n[o]=e[o]);return n}function vy(e){return Ore(e)||jre(e)||_re(e)||wre()}function wre(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _re(e,t){if(e){if(typeof e=="string")return by(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return by(e,t)}}function jre(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Ore(e){if(Array.isArray(e))return by(e)}function by(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function R2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Cn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?R2(Object(n),!0).forEach(function(r){qs(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R2(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function qs(e,t,n){return t=L2(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ere(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Sre(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,L2(r.key),r)}}function Mre(e,t,n){return t&&Sre(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function L2(e){var t=Cre(e,"string");return Bi(t)==="symbol"?t:String(t)}function Cre(e,t){if(Bi(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Bi(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Pre(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xy(e,t)}function xy(e,t){return xy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},xy(e,t)}function Nre(e){var t=kre();return function(){var n=Fu(e),r;if(t){var o=Fu(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return wy(this,r)}}function wy(e,t){if(t&&(Bi(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _y(e)}function _y(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function kre(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Fu(e){return Fu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Fu(e)}var qr=function(e){Pre(n,e);var t=Nre(n);function n(r,o){var i;Ere(this,n),i=t.call(this,r,o);var a=i.props,s=a.isActive,c=a.attributeName,l=a.from,u=a.to,d=a.steps,p=a.children,f=a.duration;if(i.handleStyleChange=i.handleStyleChange.bind(_y(i)),i.changeStyle=i.changeStyle.bind(_y(i)),!s||f<=0)return i.state={style:{}},typeof p=="function"&&(i.state={style:u}),wy(i);if(d&&d.length)i.state={style:d[0].style};else if(l){if(typeof p=="function")return i.state={style:l},wy(i);i.state={style:c?qs({},c,l):l}}else i.state={style:{}};return i}return Mre(n,[{key:"componentDidMount",value:function(){var r=this.props,o=r.isActive,i=r.canBegin;this.mounted=!0,!(!o||!i)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(r){var o=this.props,i=o.isActive,a=o.canBegin,s=o.attributeName,c=o.shouldReAnimate,l=o.to,u=o.from,d=this.state.style;if(a){if(!i){var p={style:s?qs({},s,l):l};this.state&&d&&(s&&d[s]!==l||!s&&d!==l)&&this.setState(p);return}if(!(Lne(r.to,l)&&r.canBegin&&r.isActive)){var f=!r.canBegin||!r.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var y=f||c?u:r.to;if(this.state&&d){var m={style:s?qs({},s,y):y};(s&&d[s]!==y||!s&&d!==y)&&this.setState(m)}this.runAnimation(Cn(Cn({},this.props),{},{from:y,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var r=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),r&&r()}},{key:"handleStyleChange",value:function(r){this.changeStyle(r)}},{key:"changeStyle",value:function(r){this.mounted&&this.setState({style:r})}},{key:"runJSAnimation",value:function(r){var o=this,i=r.from,a=r.to,s=r.duration,c=r.easing,l=r.begin,u=r.onAnimationEnd,d=r.onAnimationStart,p=gre(i,a,are(c),s,this.changeStyle),f=function(){o.stopJSAnimation=p()};this.manager.start([d,l,f,s,u])}},{key:"runStepAnimation",value:function(r){var o=this,i=r.steps,a=r.begin,s=r.onAnimationStart,c=i[0],l=c.style,u=c.duration,d=u===void 0?0:u,p=function(f,y,m){if(m===0)return f;var g=y.duration,b=y.easing,w=b===void 0?"ease":b,_=y.style,x=y.properties,j=y.onAnimationEnd,O=m>0?i[m-1]:y,E=x||Object.keys(_);if(typeof w=="function"||w==="spring")return[].concat(vy(f),[o.runJSAnimation.bind(o,{from:O.style,to:_,duration:g,easing:w}),g]);var M=M2(E,g,w),N=Cn(Cn(Cn({},O.style),_),{},{transition:M});return[].concat(vy(f),[N,g,j]).filter(Qne)};return this.manager.start([s].concat(vy(i.reduce(p,[l,Math.max(d,a)])),[r.onAnimationEnd]))}},{key:"runAnimation",value:function(r){this.manager||(this.manager=qne());var o=r.begin,i=r.duration,a=r.attributeName,s=r.to,c=r.easing,l=r.onAnimationStart,u=r.onAnimationEnd,d=r.steps,p=r.children,f=this.manager;if(this.unSubscribe=f.subscribe(this.handleStyleChange),typeof c=="function"||typeof p=="function"||c==="spring"){this.runJSAnimation(r);return}if(d.length>1){this.runStepAnimation(r);return}var y=a?qs({},a,s):s,m=M2(Object.keys(y),i,c);f.start([l,o,Cn(Cn({},y),{},{transition:m}),i,u])}},{key:"render",value:function(){var r=this.props,o=r.children;r.begin;var i=r.duration;r.attributeName,r.easing;var a=r.isActive;r.steps,r.from,r.to,r.canBegin,r.onAnimationEnd,r.shouldReAnimate,r.onAnimationReStart;var s=bre(r,vre),c=v.Children.count(o),l=this.state.style;if(typeof o=="function")return o(l);if(!a||c===0||i<=0)return o;var u=function(d){var p=d.props,f=p.style,y=f===void 0?{}:f,m=p.className,g=v.cloneElement(d,Cn(Cn({},s),{},{style:Cn(Cn({},y),l),className:m}));return g};return c===1?u(v.Children.only(o)):$.createElement("div",null,v.Children.map(o,function(d){return u(d)}))}}]),n}(v.PureComponent);qr.displayName="Animate",qr.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}},qr.propTypes={from:_e.oneOfType([_e.object,_e.string]),to:_e.oneOfType([_e.object,_e.string]),attributeName:_e.string,duration:_e.number,begin:_e.number,easing:_e.oneOfType([_e.string,_e.func]),steps:_e.arrayOf(_e.shape({duration:_e.number.isRequired,style:_e.object.isRequired,easing:_e.oneOfType([_e.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),_e.func]),properties:_e.arrayOf("string"),onAnimationEnd:_e.func})),children:_e.oneOfType([_e.node,_e.func]),isActive:_e.bool,canBegin:_e.bool,onAnimationEnd:_e.func,shouldReAnimate:_e.bool,onAnimationStart:_e.func,onAnimationReStart:_e.func},_e.object,_e.object,_e.object,_e.element,_e.object,_e.object,_e.object,_e.oneOfType([_e.array,_e.element]),_e.any;function Hs(e){"@babel/helpers - typeof";return Hs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hs(e)}function zu(){return zu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zu.apply(this,arguments)}function Are(e,t){return Rre(e)||Dre(e,t)||Ire(e,t)||Tre()}function Tre(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ire(e,t){if(e){if(typeof e=="string")return B2(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return B2(e,t)}}function B2(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Dre(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,o,i,a,s=[],c=!0,l=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(u){l=!0,o=u}finally{try{if(!c&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}function Rre(e){if(Array.isArray(e))return e}function $2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function F2(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?$2(Object(n),!0).forEach(function(r){Lre(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$2(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Lre(e,t,n){return t=Bre(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Bre(e){var t=$re(e,"string");return Hs(t)=="symbol"?t:t+""}function $re(e,t){if(Hs(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Hs(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var z2=function(e,t,n,r,o){var i=Math.min(Math.abs(n)/2,Math.abs(r)/2),a=r>=0?1:-1,s=n>=0?1:-1,c=r>=0&&n>=0||r<0&&n<0?1:0,l;if(i>0&&o instanceof Array){for(var u=[0,0,0,0],d=0,p=4;d<p;d++)u[d]=o[d]>i?i:o[d];l="M".concat(e,",").concat(t+a*u[0]),u[0]>0&&(l+="A ".concat(u[0],",").concat(u[0],",0,0,").concat(c,",").concat(e+s*u[0],",").concat(t)),l+="L ".concat(e+n-s*u[1],",").concat(t),u[1]>0&&(l+="A ".concat(u[1],",").concat(u[1],",0,0,").concat(c,`,
        `).concat(e+n,",").concat(t+a*u[1])),l+="L ".concat(e+n,",").concat(t+r-a*u[2]),u[2]>0&&(l+="A ".concat(u[2],",").concat(u[2],",0,0,").concat(c,`,
        `).concat(e+n-s*u[2],",").concat(t+r)),l+="L ".concat(e+s*u[3],",").concat(t+r),u[3]>0&&(l+="A ".concat(u[3],",").concat(u[3],",0,0,").concat(c,`,
        `).concat(e,",").concat(t+r-a*u[3])),l+="Z"}else if(i>0&&o===+o&&o>0){var f=Math.min(i,o);l="M ".concat(e,",").concat(t+a*f,`
            A `).concat(f,",").concat(f,",0,0,").concat(c,",").concat(e+s*f,",").concat(t,`
            L `).concat(e+n-s*f,",").concat(t,`
            A `).concat(f,",").concat(f,",0,0,").concat(c,",").concat(e+n,",").concat(t+a*f,`
            L `).concat(e+n,",").concat(t+r-a*f,`
            A `).concat(f,",").concat(f,",0,0,").concat(c,",").concat(e+n-s*f,",").concat(t+r,`
            L `).concat(e+s*f,",").concat(t+r,`
            A `).concat(f,",").concat(f,",0,0,").concat(c,",").concat(e,",").concat(t+r-a*f," Z")}else l="M ".concat(e,",").concat(t," h ").concat(n," v ").concat(r," h ").concat(-n," Z");return l},Fre=function(e,t){if(!e||!t)return!1;var n=e.x,r=e.y,o=t.x,i=t.y,a=t.width,s=t.height;if(Math.abs(a)>0&&Math.abs(s)>0){var c=Math.min(o,o+a),l=Math.max(o,o+a),u=Math.min(i,i+s),d=Math.max(i,i+s);return n>=c&&n<=l&&r>=u&&r<=d}return!1},zre={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},jy=function(e){var t=F2(F2({},zre),e),n=v.useRef(),r=v.useState(-1),o=Are(r,2),i=o[0],a=o[1];v.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var _=n.current.getTotalLength();_&&a(_)}catch{}},[]);var s=t.x,c=t.y,l=t.width,u=t.height,d=t.radius,p=t.className,f=t.animationEasing,y=t.animationDuration,m=t.animationBegin,g=t.isAnimationActive,b=t.isUpdateAnimationActive;if(s!==+s||c!==+c||l!==+l||u!==+u||l===0||u===0)return null;var w=Le("recharts-rectangle",p);return b?$.createElement(qr,{canBegin:i>0,from:{width:l,height:u,x:s,y:c},to:{width:l,height:u,x:s,y:c},duration:y,animationEasing:f,isActive:b},function(_){var x=_.width,j=_.height,O=_.x,E=_.y;return $.createElement(qr,{canBegin:i>0,from:"0px ".concat(i===-1?1:i,"px"),to:"".concat(i,"px 0px"),attributeName:"strokeDasharray",begin:m,duration:y,isActive:g,easing:f},$.createElement("path",zu({},Ie(t,!0),{className:w,d:z2(O,E,x,j,d),ref:n})))}):$.createElement("path",zu({},Ie(t,!0),{className:w,d:z2(s,c,l,u,d)}))};function Oy(){return Oy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Oy.apply(this,arguments)}var V2=function(e){var t=e.cx,n=e.cy,r=e.r,o=e.className,i=Le("recharts-dot",o);return t===+t&&n===+n&&r===+r?$.createElement("circle",Oy({},Ie(e,!1),Fl(e),{className:i,cx:t,cy:n,r})):null};function Ws(e){"@babel/helpers - typeof";return Ws=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ws(e)}var Vre=["x","y","top","left","width","height","className"];function Ey(){return Ey=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ey.apply(this,arguments)}function U2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Ure(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?U2(Object(n),!0).forEach(function(r){qre(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U2(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function qre(e,t,n){return t=Hre(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Hre(e){var t=Wre(e,"string");return Ws(t)=="symbol"?t:t+""}function Wre(e,t){if(Ws(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Ws(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Xre(e,t){if(e==null)return{};var n=Qre(e,t),r,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)r=i[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Qre(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var Yre=function(e,t,n,r,o,i){return"M".concat(e,",").concat(o,"v").concat(r,"M").concat(i,",").concat(t,"h").concat(n)},Gre=function(e){var t=e.x,n=t===void 0?0:t,r=e.y,o=r===void 0?0:r,i=e.top,a=i===void 0?0:i,s=e.left,c=s===void 0?0:s,l=e.width,u=l===void 0?0:l,d=e.height,p=d===void 0?0:d,f=e.className,y=Xre(e,Vre),m=Ure({x:n,y:o,top:a,left:c,width:u,height:p},y);return!ae(n)||!ae(o)||!ae(u)||!ae(p)||!ae(a)||!ae(c)?null:$.createElement("path",Ey({},Ie(m,!0),{className:Le("recharts-cross",f),d:Yre(n,o,u,p,a,c)}))},Kre=cr,Zre=Qd,Jre=Rn,eoe="[object Object]",toe=Function.prototype,noe=Object.prototype,q2=toe.toString,roe=noe.hasOwnProperty,ooe=q2.call(Object);function ioe(e){if(!Jre(e)||Kre(e)!=eoe)return!1;var t=Zre(e);if(t===null)return!0;var n=roe.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&q2.call(n)==ooe}Yg=ioe;const aoe=Ne(Yg);var soe=cr,coe=Rn,loe="[object Boolean]";function uoe(e){return e===!0||e===!1||coe(e)&&soe(e)==loe}var doe=uoe;const poe=Ne(doe);function Xs(e){"@babel/helpers - typeof";return Xs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xs(e)}function Vu(){return Vu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Vu.apply(this,arguments)}function foe(e,t){return goe(e)||yoe(e,t)||moe(e,t)||hoe()}function hoe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function moe(e,t){if(e){if(typeof e=="string")return H2(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return H2(e,t)}}function H2(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function yoe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,o,i,a,s=[],c=!0,l=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(u){l=!0,o=u}finally{try{if(!c&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}function goe(e){if(Array.isArray(e))return e}function W2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function X2(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?W2(Object(n),!0).forEach(function(r){voe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W2(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function voe(e,t,n){return t=boe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function boe(e){var t=xoe(e,"string");return Xs(t)=="symbol"?t:t+""}function xoe(e,t){if(Xs(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Xs(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Q2=function(e,t,n,r,o){var i=n-r,a;return a="M ".concat(e,",").concat(t),a+="L ".concat(e+n,",").concat(t),a+="L ".concat(e+n-i/2,",").concat(t+o),a+="L ".concat(e+n-i/2-r,",").concat(t+o),a+="L ".concat(e,",").concat(t," Z"),a},woe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},_oe=function(e){var t=X2(X2({},woe),e),n=v.useRef(),r=v.useState(-1),o=foe(r,2),i=o[0],a=o[1];v.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var w=n.current.getTotalLength();w&&a(w)}catch{}},[]);var s=t.x,c=t.y,l=t.upperWidth,u=t.lowerWidth,d=t.height,p=t.className,f=t.animationEasing,y=t.animationDuration,m=t.animationBegin,g=t.isUpdateAnimationActive;if(s!==+s||c!==+c||l!==+l||u!==+u||d!==+d||l===0&&u===0||d===0)return null;var b=Le("recharts-trapezoid",p);return g?$.createElement(qr,{canBegin:i>0,from:{upperWidth:0,lowerWidth:0,height:d,x:s,y:c},to:{upperWidth:l,lowerWidth:u,height:d,x:s,y:c},duration:y,animationEasing:f,isActive:g},function(w){var _=w.upperWidth,x=w.lowerWidth,j=w.height,O=w.x,E=w.y;return $.createElement(qr,{canBegin:i>0,from:"0px ".concat(i===-1?1:i,"px"),to:"".concat(i,"px 0px"),attributeName:"strokeDasharray",begin:m,duration:y,easing:f},$.createElement("path",Vu({},Ie(t,!0),{className:b,d:Q2(O,E,_,x,j),ref:n})))}):$.createElement("g",null,$.createElement("path",Vu({},Ie(t,!0),{className:b,d:Q2(s,c,l,u,d)})))},joe=["option","shapeType","propTransformer","activeClassName","isActive"];function Qs(e){"@babel/helpers - typeof";return Qs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qs(e)}function Ooe(e,t){if(e==null)return{};var n=Eoe(e,t),r,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)r=i[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Eoe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Y2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Uu(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Y2(Object(n),!0).forEach(function(r){Soe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y2(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Soe(e,t,n){return t=Moe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Moe(e){var t=Coe(e,"string");return Qs(t)=="symbol"?t:t+""}function Coe(e,t){if(Qs(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Qs(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Poe(e,t){return Uu(Uu({},t),e)}function Noe(e,t){return e==="symbols"}function G2(e){var t=e.shapeType,n=e.elementProps;switch(t){case"rectangle":return $.createElement(jy,n);case"trapezoid":return $.createElement(_oe,n);case"sector":return $.createElement(o2,n);case"symbols":if(Noe(t))return $.createElement(Jh,n);break;default:return null}}function koe(e){return v.isValidElement(e)?e.props:e}function Aoe(e){var t=e.option,n=e.shapeType,r=e.propTransformer,o=r===void 0?Poe:r,i=e.activeClassName,a=i===void 0?"recharts-active-shape":i,s=e.isActive,c=Ooe(e,joe),l;if(v.isValidElement(t))l=v.cloneElement(t,Uu(Uu({},c),koe(t)));else if(Ce(t))l=t(c);else if(aoe(t)&&!poe(t)){var u=o(t,c);l=$.createElement(G2,{shapeType:n,elementProps:u})}else{var d=c;l=$.createElement(G2,{shapeType:n,elementProps:d})}return s?$.createElement(mt,{className:a},l):l}function qu(e,t){return t!=null&&"trapezoids"in e.props}function Hu(e,t){return t!=null&&"sectors"in e.props}function Ys(e,t){return t!=null&&"points"in e.props}function Toe(e,t){var n,r,o=e.x===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.x)||e.x===t.x,i=e.y===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.y)||e.y===t.y;return o&&i}function Ioe(e,t){var n=e.endAngle===t.endAngle,r=e.startAngle===t.startAngle;return n&&r}function Doe(e,t){var n=e.x===t.x,r=e.y===t.y,o=e.z===t.z;return n&&r&&o}function Roe(e,t){var n;return qu(e,t)?n=Toe:Hu(e,t)?n=Ioe:Ys(e,t)&&(n=Doe),n}function Loe(e,t){var n;return qu(e,t)?n="trapezoids":Hu(e,t)?n="sectors":Ys(e,t)&&(n="points"),n}function Boe(e,t){if(qu(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(Hu(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return Ys(e,t)?t.payload:{}}function $oe(e){var t=e.activeTooltipItem,n=e.graphicalItem,r=e.itemData,o=Loe(n,t),i=Boe(n,t),a=r.filter(function(c,l){var u=Ym(i,c),d=n.props[o].filter(function(y){var m=Roe(n,t);return m(y,t)}),p=n.props[o].indexOf(d[d.length-1]),f=l===p;return u&&f}),s=r.indexOf(a[a.length-1]);return s}var Foe=Math.ceil,zoe=Math.max;function Voe(e,t,n,r){for(var o=-1,i=zoe(Foe((t-e)/(n||1)),0),a=Array(i);i--;)a[r?i:++o]=e,e+=n;return a}var Uoe=Voe,qoe=BS,K2=1/0,Hoe=17976931348623157e292;function Woe(e){if(!e)return e===0?e:0;if(e=qoe(e),e===K2||e===-K2){var t=e<0?-1:1;return t*Hoe}return e===e?e:0}var Z2=Woe,Xoe=Uoe,Qoe=Io,Sy=Z2;function Yoe(e){return function(t,n,r){return r&&typeof r!="number"&&Qoe(t,n,r)&&(n=r=void 0),t=Sy(t),n===void 0?(n=t,t=0):n=Sy(n),r=r===void 0?t<n?1:-1:Sy(r),Xoe(t,n,r,e)}}var Goe=Yoe,Koe=Goe,Zoe=Koe(),Joe=Zoe;const Wu=Ne(Joe);function Gs(e){"@babel/helpers - typeof";return Gs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gs(e)}function J2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function eP(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?J2(Object(n),!0).forEach(function(r){tP(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J2(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function tP(e,t,n){return t=eie(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function eie(e){var t=tie(e,"string");return Gs(t)=="symbol"?t:t+""}function tie(e,t){if(Gs(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Gs(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var nie=["Webkit","Moz","O","ms"],rie=function(e,t){var n=e.replace(/(\w)/,function(o){return o.toUpperCase()}),r=nie.reduce(function(o,i){return eP(eP({},o),{},tP({},i+n,t))},{});return r[e]=t,r};function $i(e){"@babel/helpers - typeof";return $i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$i(e)}function Xu(){return Xu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Xu.apply(this,arguments)}function nP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function My(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?nP(Object(n),!0).forEach(function(r){tn(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function oie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function rP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,iP(r.key),r)}}function iie(e,t,n){return t&&rP(e.prototype,t),n&&rP(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function aie(e,t,n){return t=Qu(t),sie(e,oP()?Reflect.construct(t,n||[],Qu(e).constructor):t.apply(e,n))}function sie(e,t){if(t&&($i(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return cie(e)}function cie(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(oP=function(){return!!e})()}function Qu(e){return Qu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Qu(e)}function lie(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Cy(e,t)}function Cy(e,t){return Cy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Cy(e,t)}function tn(e,t,n){return t=iP(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function iP(e){var t=uie(e,"string");return $i(t)=="symbol"?t:t+""}function uie(e,t){if($i(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if($i(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var die=function(e){var t=e.data,n=e.startIndex,r=e.endIndex,o=e.x,i=e.width,a=e.travellerWidth;if(!t||!t.length)return{};var s=t.length,c=ws().domain(Wu(0,s)).range([o,o+i-a]),l=c.domain().map(function(u){return c(u)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:c(n),endX:c(r),scale:c,scaleValues:l}},aP=function(e){return e.changedTouches&&!!e.changedTouches.length},Fi=function(e){function t(n){var r;return oie(this,t),r=aie(this,t,[n]),tn(r,"handleDrag",function(o){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(o):r.state.isSlideMoving&&r.handleSlideDrag(o)}),tn(r,"handleTouchMove",function(o){o.changedTouches!=null&&o.changedTouches.length>0&&r.handleDrag(o.changedTouches[0])}),tn(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var o=r.props,i=o.endIndex,a=o.onDragEnd,s=o.startIndex;a==null||a({endIndex:i,startIndex:s})}),r.detachDragEndListener()}),tn(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),tn(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),tn(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),tn(r,"handleSlideDragStart",function(o){var i=aP(o)?o.changedTouches[0]:o;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return lie(t,e),iie(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var r=n.startX,o=n.endX,i=this.state.scaleValues,a=this.props,s=a.gap,c=a.data,l=c.length-1,u=Math.min(r,o),d=Math.max(r,o),p=t.getIndexInRange(i,u),f=t.getIndexInRange(i,d);return{startIndex:p-p%s,endIndex:f===l?l:f-f%s}}},{key:"getTextOfTick",value:function(n){var r=this.props,o=r.data,i=r.tickFormatter,a=r.dataKey,s=Qn(o[n],a,n);return Ce(i)?i(s,n):s}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var r=this.state,o=r.slideMoveStartX,i=r.startX,a=r.endX,s=this.props,c=s.x,l=s.width,u=s.travellerWidth,d=s.startIndex,p=s.endIndex,f=s.onChange,y=n.pageX-o;y>0?y=Math.min(y,c+l-u-a,c+l-u-i):y<0&&(y=Math.max(y,c-i,c-a));var m=this.getIndex({startX:i+y,endX:a+y});(m.startIndex!==d||m.endIndex!==p)&&f&&f(m),this.setState({startX:i+y,endX:a+y,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,r){var o=aP(r)?r.changedTouches[0]:r;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:o.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var r=this.state,o=r.brushMoveStartX,i=r.movingTravellerId,a=r.endX,s=r.startX,c=this.state[i],l=this.props,u=l.x,d=l.width,p=l.travellerWidth,f=l.onChange,y=l.gap,m=l.data,g={startX:this.state.startX,endX:this.state.endX},b=n.pageX-o;b>0?b=Math.min(b,u+d-p-c):b<0&&(b=Math.max(b,u-c)),g[i]=c+b;var w=this.getIndex(g),_=w.startIndex,x=w.endIndex,j=function(){var O=m.length-1;return i==="startX"&&(a>s?_%y===0:x%y===0)||a<s&&x===O||i==="endX"&&(a>s?x%y===0:_%y===0)||a>s&&x===O};this.setState(tn(tn({},i,c+b),"brushMoveStartX",n.pageX),function(){f&&j()&&f(w)})}},{key:"handleTravellerMoveKeyboard",value:function(n,r){var o=this,i=this.state,a=i.scaleValues,s=i.startX,c=i.endX,l=this.state[r],u=a.indexOf(l);if(u!==-1){var d=u+n;if(!(d===-1||d>=a.length)){var p=a[d];r==="startX"&&p>=c||r==="endX"&&p<=s||this.setState(tn({},r,p),function(){o.props.onChange(o.getIndex({startX:o.state.startX,endX:o.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,r=n.x,o=n.y,i=n.width,a=n.height,s=n.fill,c=n.stroke;return $.createElement("rect",{stroke:c,fill:s,x:r,y:o,width:i,height:a})}},{key:"renderPanorama",value:function(){var n=this.props,r=n.x,o=n.y,i=n.width,a=n.height,s=n.data,c=n.children,l=n.padding,u=v.Children.only(c);return u?$.cloneElement(u,{x:r,y:o,width:i,height:a,margin:l,compact:!0,data:s}):null}},{key:"renderTravellerLayer",value:function(n,r){var o,i,a=this,s=this.props,c=s.y,l=s.travellerWidth,u=s.height,d=s.traveller,p=s.ariaLabel,f=s.data,y=s.startIndex,m=s.endIndex,g=Math.max(n,this.props.x),b=My(My({},Ie(this.props,!1)),{},{x:g,y:c,width:l,height:u}),w=p||"Min value: ".concat((o=f[y])===null||o===void 0?void 0:o.name,", Max value: ").concat((i=f[m])===null||i===void 0?void 0:i.name);return $.createElement(mt,{tabIndex:0,role:"slider","aria-label":w,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[r],onTouchStart:this.travellerDragStartHandlers[r],onKeyDown:function(_){["ArrowLeft","ArrowRight"].includes(_.key)&&(_.preventDefault(),_.stopPropagation(),a.handleTravellerMoveKeyboard(_.key==="ArrowRight"?1:-1,r))},onFocus:function(){a.setState({isTravellerFocused:!0})},onBlur:function(){a.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(d,b))}},{key:"renderSlide",value:function(n,r){var o=this.props,i=o.y,a=o.height,s=o.stroke,c=o.travellerWidth,l=Math.min(n,r)+c,u=Math.max(Math.abs(r-n)-c,0);return $.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:s,fillOpacity:.2,x:l,y:i,width:u,height:a})}},{key:"renderText",value:function(){var n=this.props,r=n.startIndex,o=n.endIndex,i=n.y,a=n.height,s=n.travellerWidth,c=n.stroke,l=this.state,u=l.startX,d=l.endX,p=5,f={pointerEvents:"none",fill:c};return $.createElement(mt,{className:"recharts-brush-texts"},$.createElement(su,Xu({textAnchor:"end",verticalAnchor:"middle",x:Math.min(u,d)-p,y:i+a/2},f),this.getTextOfTick(r)),$.createElement(su,Xu({textAnchor:"start",verticalAnchor:"middle",x:Math.max(u,d)+s+p,y:i+a/2},f),this.getTextOfTick(o)))}},{key:"render",value:function(){var n=this.props,r=n.data,o=n.className,i=n.children,a=n.x,s=n.y,c=n.width,l=n.height,u=n.alwaysShowText,d=this.state,p=d.startX,f=d.endX,y=d.isTextActive,m=d.isSlideMoving,g=d.isTravellerMoving,b=d.isTravellerFocused;if(!r||!r.length||!ae(a)||!ae(s)||!ae(c)||!ae(l)||c<=0||l<=0)return null;var w=Le("recharts-brush",o),_=$.Children.count(i)===1,x=rie("userSelect","none");return $.createElement(mt,{className:w,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:x},this.renderBackground(),_&&this.renderPanorama(),this.renderSlide(p,f),this.renderTravellerLayer(p,"startX"),this.renderTravellerLayer(f,"endX"),(y||m||g||b||u)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var r=n.x,o=n.y,i=n.width,a=n.height,s=n.stroke,c=Math.floor(o+a/2)-1;return $.createElement($.Fragment,null,$.createElement("rect",{x:r,y:o,width:i,height:a,fill:s,stroke:"none"}),$.createElement("line",{x1:r+1,y1:c,x2:r+i-1,y2:c,fill:"none",stroke:"#fff"}),$.createElement("line",{x1:r+1,y1:c+2,x2:r+i-1,y2:c+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,r){var o;return $.isValidElement(n)?o=$.cloneElement(n,r):Ce(n)?o=n(r):o=t.renderDefaultTraveller(r),o}},{key:"getDerivedStateFromProps",value:function(n,r){var o=n.data,i=n.width,a=n.x,s=n.travellerWidth,c=n.updateId,l=n.startIndex,u=n.endIndex;if(o!==r.prevData||c!==r.prevUpdateId)return My({prevData:o,prevTravellerWidth:s,prevUpdateId:c,prevX:a,prevWidth:i},o&&o.length?die({data:o,width:i,x:a,travellerWidth:s,startIndex:l,endIndex:u}):{scale:null,scaleValues:null});if(r.scale&&(i!==r.prevWidth||a!==r.prevX||s!==r.prevTravellerWidth)){r.scale.range([a,a+i-s]);var d=r.scale.domain().map(function(p){return r.scale(p)});return{prevData:o,prevTravellerWidth:s,prevUpdateId:c,prevX:a,prevWidth:i,startX:r.scale(n.startIndex),endX:r.scale(n.endIndex),scaleValues:d}}return null}},{key:"getIndexInRange",value:function(n,r){for(var o=n.length,i=0,a=o-1;a-i>1;){var s=Math.floor((i+a)/2);n[s]>r?a=s:i=s}return r>=n[a]?a:i}}])}(v.PureComponent);tn(Fi,"displayName","Brush"),tn(Fi,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var pie=im;function fie(e,t){var n;return pie(e,function(r,o,i){return n=t(r,o,i),!n}),!!n}var hie=fie,mie=yw,yie=zn,gie=hie,vie=Ct,bie=Io;function xie(e,t,n){var r=vie(e)?mie:gie;return n&&bie(e,t,n)&&(t=void 0),r(e,yie(t))}var wie=xie;const _ie=Ne(wie);var Yn=function(e,t){var n=e.alwaysShow,r=e.ifOverflow;return n&&(r="extendDomain"),r===t},jie=$d,Oie=rS,Eie=zn;function Sie(e,t){var n={};return t=Eie(t),Oie(e,function(r,o,i){jie(n,o,t(r,o,i))}),n}var Mie=Sie;const Cie=Ne(Mie);function Pie(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}var Nie=Pie,kie=im;function Aie(e,t){var n=!0;return kie(e,function(r,o,i){return n=!!t(r,o,i),n}),n}var Tie=Aie,Iie=Nie,Die=Tie,Rie=zn,Lie=Ct,Bie=Io;function $ie(e,t,n){var r=Lie(e)?Iie:Die;return n&&Bie(e,t,n)&&(t=void 0),r(e,Rie(t))}var Fie=$ie;const sP=Ne(Fie);var zie=["x","y"];function Ks(e){"@babel/helpers - typeof";return Ks=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ks(e)}function Py(){return Py=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Py.apply(this,arguments)}function cP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Zs(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?cP(Object(n),!0).forEach(function(r){Vie(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Vie(e,t,n){return t=Uie(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Uie(e){var t=qie(e,"string");return Ks(t)=="symbol"?t:t+""}function qie(e,t){if(Ks(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Ks(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Hie(e,t){if(e==null)return{};var n=Wie(e,t),r,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)r=i[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Wie(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Xie(e,t){var n=e.x,r=e.y,o=Hie(e,zie),i="".concat(n),a=parseInt(i,10),s="".concat(r),c=parseInt(s,10),l="".concat(t.height||o.height),u=parseInt(l,10),d="".concat(t.width||o.width),p=parseInt(d,10);return Zs(Zs(Zs(Zs(Zs({},t),o),a?{x:a}:{}),c?{y:c}:{}),{},{height:u,width:p,name:t.name,radius:t.radius})}function lP(e){return $.createElement(Aoe,Py({shapeType:"rectangle",propTransformer:Xie,activeClassName:"recharts-active-bar"},e))}var Qie=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,r){if(typeof e=="number")return e;var o=typeof n=="number";return o?e(n,r):(o||jo(),t)}},Yie=["value","background"],uP;function zi(e){"@babel/helpers - typeof";return zi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zi(e)}function Gie(e,t){if(e==null)return{};var n=Kie(e,t),r,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)r=i[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Kie(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Yu(){return Yu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Yu.apply(this,arguments)}function dP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function ct(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?dP(Object(n),!0).forEach(function(r){Hr(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Zie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,hP(r.key),r)}}function Jie(e,t,n){return t&&pP(e.prototype,t),n&&pP(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function eae(e,t,n){return t=Gu(t),tae(e,fP()?Reflect.construct(t,n||[],Gu(e).constructor):t.apply(e,n))}function tae(e,t){if(t&&(zi(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nae(e)}function nae(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(fP=function(){return!!e})()}function Gu(e){return Gu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Gu(e)}function rae(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ny(e,t)}function Ny(e,t){return Ny=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Ny(e,t)}function Hr(e,t,n){return t=hP(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hP(e){var t=oae(e,"string");return zi(t)=="symbol"?t:t+""}function oae(e,t){if(zi(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(zi(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var So=function(e){function t(){var n;Zie(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=eae(this,t,[].concat(o)),Hr(n,"state",{isAnimationFinished:!1}),Hr(n,"id",$l("recharts-bar-")),Hr(n,"handleAnimationEnd",function(){var a=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),a&&a()}),Hr(n,"handleAnimationStart",function(){var a=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),a&&a()}),n}return rae(t,e),Jie(t,[{key:"renderRectanglesStatically",value:function(n){var r=this,o=this.props,i=o.shape,a=o.dataKey,s=o.activeIndex,c=o.activeBar,l=Ie(this.props,!1);return n&&n.map(function(u,d){var p=d===s,f=p?c:i,y=ct(ct(ct({},l),u),{},{isActive:p,option:f,index:d,dataKey:a,onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd});return $.createElement(mt,Yu({className:"recharts-bar-rectangle"},zl(r.props,u,d),{key:"rectangle-".concat(u==null?void 0:u.x,"-").concat(u==null?void 0:u.y,"-").concat(u==null?void 0:u.value)}),$.createElement(lP,y))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,r=this.props,o=r.data,i=r.layout,a=r.isAnimationActive,s=r.animationBegin,c=r.animationDuration,l=r.animationEasing,u=r.animationId,d=this.state.prevData;return $.createElement(qr,{begin:s,duration:c,isActive:a,easing:l,from:{t:0},to:{t:1},key:"bar-".concat(u),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(p){var f=p.t,y=o.map(function(m,g){var b=d&&d[g];if(b){var w=bi(b.x,m.x),_=bi(b.y,m.y),x=bi(b.width,m.width),j=bi(b.height,m.height);return ct(ct({},m),{},{x:w(f),y:_(f),width:x(f),height:j(f)})}if(i==="horizontal"){var O=bi(0,m.height),E=O(f);return ct(ct({},m),{},{y:m.y+m.height-E,height:E})}var M=bi(0,m.width),N=M(f);return ct(ct({},m),{},{width:N})});return $.createElement(mt,null,n.renderRectanglesStatically(y))})}},{key:"renderRectangles",value:function(){var n=this.props,r=n.data,o=n.isAnimationActive,i=this.state.prevData;return o&&r&&r.length&&(!i||!Ym(i,r))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(r)}},{key:"renderBackground",value:function(){var n=this,r=this.props,o=r.data,i=r.dataKey,a=r.activeIndex,s=Ie(this.props.background,!1);return o.map(function(c,l){c.value;var u=c.background,d=Gie(c,Yie);if(!u)return null;var p=ct(ct(ct(ct(ct({},d),{},{fill:"#eee"},u),s),zl(n.props,c,l)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:i,index:l,className:"recharts-bar-background-rectangle"});return $.createElement(lP,Yu({key:"background-bar-".concat(l),option:n.props.background,isActive:l===a},p))})}},{key:"renderErrorBar",value:function(n,r){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var o=this.props,i=o.data,a=o.xAxis,s=o.yAxis,c=o.layout,l=o.children,u=Sn(l,Pu);if(!u)return null;var d=c==="vertical"?i[0].height/2:i[0].width/2,p=function(y,m){var g=Array.isArray(y.value)?y.value[1]:y.value;return{x:y.x,y:y.y,value:g,errorVal:Qn(y,m)}},f={clipPath:n?"url(#clipPath-".concat(r,")"):null};return $.createElement(mt,f,u.map(function(y){return $.cloneElement(y,{key:"error-bar-".concat(r,"-").concat(y.props.dataKey),data:i,xAxis:a,yAxis:s,layout:c,offset:d,dataPointFormatter:p})}))}},{key:"render",value:function(){var n=this.props,r=n.hide,o=n.data,i=n.className,a=n.xAxis,s=n.yAxis,c=n.left,l=n.top,u=n.width,d=n.height,p=n.isAnimationActive,f=n.background,y=n.id;if(r||!o||!o.length)return null;var m=this.state.isAnimationFinished,g=Le("recharts-bar",i),b=a&&a.allowDataOverflow,w=s&&s.allowDataOverflow,_=b||w,x=Re(y)?this.id:y;return $.createElement(mt,{className:g},b||w?$.createElement("defs",null,$.createElement("clipPath",{id:"clipPath-".concat(x)},$.createElement("rect",{x:b?c:c-u/2,y:w?l:l-d/2,width:b?u:u*2,height:w?d:d*2}))):null,$.createElement(mt,{className:"recharts-bar-rectangles",clipPath:_?"url(#clipPath-".concat(x,")"):null},f?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(_,x),(!p||m)&&Eo.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(n,r){return n.animationId!==r.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:r.curData}:n.data!==r.curData?{curData:n.data}:null}}])}(v.PureComponent);uP=So,Hr(So,"displayName","Bar"),Hr(So,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Br.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"}),Hr(So,"getComposedData",function(e){var t=e.props,n=e.item,r=e.barPosition,o=e.bandSize,i=e.xAxis,a=e.yAxis,s=e.xAxisTicks,c=e.yAxisTicks,l=e.stackedData,u=e.dataStartIndex,d=e.displayedData,p=e.offset,f=Zee(r,n);if(!f)return null;var y=t.layout,m=n.type.defaultProps,g=m!==void 0?ct(ct({},m),n.props):n.props,b=g.dataKey,w=g.children,_=g.minPointSize,x=y==="horizontal"?a:i,j=l?x.scale.domain():null,O=ate({numericAxis:x}),E=Sn(w,US),M=d.map(function(N,A){var P,T,L,S,C,k;l?P=Jee(l[u+A],j):(P=Qn(N,b),Array.isArray(P)||(P=[O,P]));var D=Qie(_,uP.defaultProps.minPointSize)(P[1],A);if(y==="horizontal"){var R,B=[a.scale(P[0]),a.scale(P[1])],F=B[0],V=B[1];T=zC({axis:i,ticks:s,bandSize:o,offset:f.offset,entry:N,index:A}),L=(R=V??F)!==null&&R!==void 0?R:void 0,S=f.size;var I=F-V;if(C=Number.isNaN(I)?0:I,k={x:T,y:a.y,width:S,height:a.height},Math.abs(D)>0&&Math.abs(C)<Math.abs(D)){var X=En(C||D)*(Math.abs(D)-Math.abs(C));L-=X,C+=X}}else{var H=[i.scale(P[0]),i.scale(P[1])],q=H[0],te=H[1];if(T=q,L=zC({axis:a,ticks:c,bandSize:o,offset:f.offset,entry:N,index:A}),S=te-q,C=f.size,k={x:i.x,y:L,width:i.width,height:C},Math.abs(D)>0&&Math.abs(S)<Math.abs(D)){var Q=En(S||D)*(Math.abs(D)-Math.abs(S));S+=Q}}return ct(ct(ct({},N),{},{x:T,y:L,width:S,height:C,value:l?P:P[1],payload:N,background:k},E&&E[A]&&E[A].props),{},{tooltipPayload:[WC(n,N)],tooltipPosition:{x:T+S/2,y:L+C/2}})});return ct({data:M,layout:y},p)});function Js(e){"@babel/helpers - typeof";return Js=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Js(e)}function iae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,gP(r.key),r)}}function aae(e,t,n){return t&&mP(e.prototype,t),n&&mP(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function yP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Pn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?yP(Object(n),!0).forEach(function(r){Ku(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Ku(e,t,n){return t=gP(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gP(e){var t=sae(e,"string");return Js(t)=="symbol"?t:t+""}function sae(e,t){if(Js(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Js(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var cae=function(e,t,n,r,o){var i=e.width,a=e.height,s=e.layout,c=e.children,l=Object.keys(t),u={left:n.left,leftMirror:n.left,right:i-n.right,rightMirror:i-n.right,top:n.top,topMirror:n.top,bottom:a-n.bottom,bottomMirror:a-n.bottom},d=!!Jt(c,So);return l.reduce(function(p,f){var y=t[f],m=y.orientation,g=y.domain,b=y.padding,w=b===void 0?{}:b,_=y.mirror,x=y.reversed,j="".concat(m).concat(_?"Mirror":""),O,E,M,N,A;if(y.type==="number"&&(y.padding==="gap"||y.padding==="no-gap")){var P=g[1]-g[0],T=1/0,L=y.categoricalDomain.sort();if(L.forEach(function(X,H){H>0&&(T=Math.min((X||0)-(L[H-1]||0),T))}),Number.isFinite(T)){var S=T/P,C=y.layout==="vertical"?n.height:n.width;if(y.padding==="gap"&&(O=S*C/2),y.padding==="no-gap"){var k=mo(e.barCategoryGap,S*C),D=S*C/2;O=D-k-(D-k)/C*k}}}r==="xAxis"?E=[n.left+(w.left||0)+(O||0),n.left+n.width-(w.right||0)-(O||0)]:r==="yAxis"?E=s==="horizontal"?[n.top+n.height-(w.bottom||0),n.top+(w.top||0)]:[n.top+(w.top||0)+(O||0),n.top+n.height-(w.bottom||0)-(O||0)]:E=y.range,x&&(E=[E[1],E[0]]);var R=Gee(y,o,d),B=R.scale,F=R.realScaleType;B.domain(g).range(E),Kee(B);var V=ite(B,Pn(Pn({},y),{},{realScaleType:F}));r==="xAxis"?(A=m==="top"&&!_||m==="bottom"&&_,M=n.left,N=u[j]-A*y.height):r==="yAxis"&&(A=m==="left"&&!_||m==="right"&&_,M=u[j]-A*y.width,N=n.top);var I=Pn(Pn(Pn({},y),V),{},{realScaleType:F,x:M,y:N,scale:B,width:r==="xAxis"?n.width:y.width,height:r==="yAxis"?n.height:y.height});return I.bandSize=Au(I,V),!y.hide&&r==="xAxis"?u[j]+=(A?-1:1)*I.height:y.hide||(u[j]+=(A?-1:1)*I.width),Pn(Pn({},p),{},Ku({},f,I))},{})},vP=function(e,t){var n=e.x,r=e.y,o=t.x,i=t.y;return{x:Math.min(n,o),y:Math.min(r,i),width:Math.abs(o-n),height:Math.abs(i-r)}},lae=function(e){var t=e.x1,n=e.y1,r=e.x2,o=e.y2;return vP({x:t,y:n},{x:r,y:o})},bP=function(){function e(t){iae(this,e),this.scale=t}return aae(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.bandAware,o=n.position;if(t!==void 0){if(o)switch(o){case"start":return this.scale(t);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+i}case"end":{var a=this.bandwidth?this.bandwidth():0;return this.scale(t)+a}default:return this.scale(t)}if(r){var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+s}return this.scale(t)}}},{key:"isInRange",value:function(t){var n=this.range(),r=n[0],o=n[n.length-1];return r<=o?t>=r&&t<=o:t>=o&&t<=r}}],[{key:"create",value:function(t){return new e(t)}}])}();Ku(bP,"EPS",1e-4);var ky=function(e){var t=Object.keys(e).reduce(function(n,r){return Pn(Pn({},n),{},Ku({},r,bP.create(e[r])))},{});return Pn(Pn({},t),{},{apply:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=r.bandAware,i=r.position;return Cie(n,function(a,s){return t[s].apply(a,{bandAware:o,position:i})})},isInRange:function(n){return sP(n,function(r,o){return t[o].isInRange(r)})}})};function uae(e){return(e%180+180)%180}var dae=function(e){var t=e.width,n=e.height,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=uae(r),i=o*Math.PI/180,a=Math.atan(n/t),s=i>a&&i<Math.PI-a?n/Math.sin(i):t/Math.cos(i);return Math.abs(s)},pae=zn,fae=Xr,hae=pa;function mae(e){return function(t,n,r){var o=Object(t);if(!fae(t)){var i=pae(n);t=hae(t),n=function(s){return i(o[s],s,o)}}var a=e(t,n,r);return a>-1?o[i?t[a]:a]:void 0}}var yae=mae,gae=Z2;function vae(e){var t=gae(e),n=t%1;return t===t?n?t-n:t:0}var xP=vae,bae=zE,xae=zn,wae=xP,_ae=Math.max;function jae(e,t,n){var r=e==null?0:e.length;if(!r)return-1;var o=n==null?0:wae(n);return o<0&&(o=_ae(r+o,0)),bae(e,xae(t),o)}var Oae=jae,Eae=yae,Sae=Oae,Mae=Eae(Sae),Cae=Mae;const Pae=Ne(Cae);var Nae=w$(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),Ay=v.createContext(void 0),Ty=v.createContext(void 0),wP=v.createContext(void 0),_P=v.createContext({}),jP=v.createContext(void 0),OP=v.createContext(0),EP=v.createContext(0),SP=function(e){var t=e.state,n=t.xAxisMap,r=t.yAxisMap,o=t.offset,i=e.clipPathId,a=e.children,s=e.width,c=e.height,l=Nae(o);return $.createElement(Ay.Provider,{value:n},$.createElement(Ty.Provider,{value:r},$.createElement(_P.Provider,{value:o},$.createElement(wP.Provider,{value:l},$.createElement(jP.Provider,{value:i},$.createElement(OP.Provider,{value:c},$.createElement(EP.Provider,{value:s},a)))))))},kae=function(){return v.useContext(jP)},MP=function(e){var t=v.useContext(Ay);t==null&&jo();var n=t[e];return n==null&&jo(),n},Aae=function(){var e=v.useContext(Ay);return Lr(e)},Tae=function(){var e=v.useContext(Ty),t=Pae(e,function(n){return sP(n.domain,Number.isFinite)});return t||Lr(e)},CP=function(e){var t=v.useContext(Ty);t==null&&jo();var n=t[e];return n==null&&jo(),n},Iae=function(){var e=v.useContext(wP);return e},Dae=function(){return v.useContext(_P)},Iy=function(){return v.useContext(EP)},Dy=function(){return v.useContext(OP)};function Vi(e){"@babel/helpers - typeof";return Vi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vi(e)}function Rae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Lae(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,AP(r.key),r)}}function Bae(e,t,n){return t&&Lae(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function $ae(e,t,n){return t=Zu(t),Fae(e,PP()?Reflect.construct(t,n||[],Zu(e).constructor):t.apply(e,n))}function Fae(e,t){if(t&&(Vi(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zae(e)}function zae(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function PP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(PP=function(){return!!e})()}function Zu(e){return Zu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Zu(e)}function Vae(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ry(e,t)}function Ry(e,t){return Ry=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Ry(e,t)}function NP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function kP(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?NP(Object(n),!0).forEach(function(r){Ly(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):NP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Ly(e,t,n){return t=AP(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function AP(e){var t=Uae(e,"string");return Vi(t)=="symbol"?t:t+""}function Uae(e,t){if(Vi(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Vi(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function qae(e,t){return Qae(e)||Xae(e,t)||Wae(e,t)||Hae()}function Hae(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Wae(e,t){if(e){if(typeof e=="string")return TP(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return TP(e,t)}}function TP(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Xae(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,o,i,a,s=[],c=!0,l=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(u){l=!0,o=u}finally{try{if(!c&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}function Qae(e){if(Array.isArray(e))return e}function By(){return By=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},By.apply(this,arguments)}var Yae=function(e,t){var n;return $.isValidElement(e)?n=$.cloneElement(e,t):Ce(e)?n=e(t):n=$.createElement("line",By({},t,{className:"recharts-reference-line-line"})),n},Gae=function(e,t,n,r,o,i,a,s,c){var l=o.x,u=o.y,d=o.width,p=o.height;if(n){var f=c.y,y=e.y.apply(f,{position:i});if(Yn(c,"discard")&&!e.y.isInRange(y))return null;var m=[{x:l+d,y},{x:l,y}];return s==="left"?m.reverse():m}if(t){var g=c.x,b=e.x.apply(g,{position:i});if(Yn(c,"discard")&&!e.x.isInRange(b))return null;var w=[{x:b,y:u+p},{x:b,y:u}];return a==="top"?w.reverse():w}if(r){var _=c.segment,x=_.map(function(j){return e.apply(j,{position:i})});return Yn(c,"discard")&&_ie(x,function(j){return!e.isInRange(j)})?null:x}return null};function Kae(e){var t=e.x,n=e.y,r=e.segment,o=e.xAxisId,i=e.yAxisId,a=e.shape,s=e.className,c=e.alwaysShow,l=kae(),u=MP(o),d=CP(i),p=Iae();if(!l||!p)return null;yr(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var f=ky({x:u.scale,y:d.scale}),y=ut(t),m=ut(n),g=r&&r.length===2,b=Gae(f,y,m,g,p,e.position,u.orientation,d.orientation,e);if(!b)return null;var w=qae(b,2),_=w[0],x=_.x,j=_.y,O=w[1],E=O.x,M=O.y,N=Yn(e,"hidden")?"url(#".concat(l,")"):void 0,A=kP(kP({clipPath:N},Ie(e,!0)),{},{x1:x,y1:j,x2:E,y2:M});return $.createElement(mt,{className:Le("recharts-reference-line",s)},Yae(a,A),Ot.renderCallByParent(e,lae({x1:x,y1:j,x2:E,y2:M})))}var $y=function(e){function t(){return Rae(this,t),$ae(this,t,arguments)}return Vae(t,e),Bae(t,[{key:"render",value:function(){return $.createElement(Kae,this.props)}}])}($.Component);Ly($y,"displayName","ReferenceLine"),Ly($y,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function Fy(){return Fy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Fy.apply(this,arguments)}function Ui(e){"@babel/helpers - typeof";return Ui=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ui(e)}function IP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function DP(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?IP(Object(n),!0).forEach(function(r){ed(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):IP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Zae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Jae(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,LP(r.key),r)}}function ese(e,t,n){return t&&Jae(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function tse(e,t,n){return t=Ju(t),nse(e,RP()?Reflect.construct(t,n||[],Ju(e).constructor):t.apply(e,n))}function nse(e,t){if(t&&(Ui(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return rse(e)}function rse(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function RP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(RP=function(){return!!e})()}function Ju(e){return Ju=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ju(e)}function ose(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zy(e,t)}function zy(e,t){return zy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},zy(e,t)}function ed(e,t,n){return t=LP(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function LP(e){var t=ise(e,"string");return Ui(t)=="symbol"?t:t+""}function ise(e,t){if(Ui(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Ui(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ase=function(e){var t=e.x,n=e.y,r=e.xAxis,o=e.yAxis,i=ky({x:r.scale,y:o.scale}),a=i.apply({x:t,y:n},{bandAware:!0});return Yn(e,"discard")&&!i.isInRange(a)?null:a},td=function(e){function t(){return Zae(this,t),tse(this,t,arguments)}return ose(t,e),ese(t,[{key:"render",value:function(){var n=this.props,r=n.x,o=n.y,i=n.r,a=n.alwaysShow,s=n.clipPathId,c=ut(r),l=ut(o);if(yr(a===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!c||!l)return null;var u=ase(this.props);if(!u)return null;var d=u.x,p=u.y,f=this.props,y=f.shape,m=f.className,g=Yn(this.props,"hidden")?"url(#".concat(s,")"):void 0,b=DP(DP({clipPath:g},Ie(this.props,!0)),{},{cx:d,cy:p});return $.createElement(mt,{className:Le("recharts-reference-dot",m)},t.renderDot(y,b),Ot.renderCallByParent(this.props,{x:d-i,y:p-i,width:2*i,height:2*i}))}}])}($.Component);ed(td,"displayName","ReferenceDot"),ed(td,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1}),ed(td,"renderDot",function(e,t){var n;return $.isValidElement(e)?n=$.cloneElement(e,t):Ce(e)?n=e(t):n=$.createElement(V2,Fy({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),n});function Vy(){return Vy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Vy.apply(this,arguments)}function qi(e){"@babel/helpers - typeof";return qi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qi(e)}function BP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function $P(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?BP(Object(n),!0).forEach(function(r){rd(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):BP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function sse(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cse(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,zP(r.key),r)}}function lse(e,t,n){return t&&cse(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function use(e,t,n){return t=nd(t),dse(e,FP()?Reflect.construct(t,n||[],nd(e).constructor):t.apply(e,n))}function dse(e,t){if(t&&(qi(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return pse(e)}function pse(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function FP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(FP=function(){return!!e})()}function nd(e){return nd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},nd(e)}function fse(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Uy(e,t)}function Uy(e,t){return Uy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Uy(e,t)}function rd(e,t,n){return t=zP(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zP(e){var t=hse(e,"string");return qi(t)=="symbol"?t:t+""}function hse(e,t){if(qi(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(qi(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var mse=function(e,t,n,r,o){var i=o.x1,a=o.x2,s=o.y1,c=o.y2,l=o.xAxis,u=o.yAxis;if(!l||!u)return null;var d=ky({x:l.scale,y:u.scale}),p={x:e?d.x.apply(i,{position:"start"}):d.x.rangeMin,y:n?d.y.apply(s,{position:"start"}):d.y.rangeMin},f={x:t?d.x.apply(a,{position:"end"}):d.x.rangeMax,y:r?d.y.apply(c,{position:"end"}):d.y.rangeMax};return Yn(o,"discard")&&(!d.isInRange(p)||!d.isInRange(f))?null:vP(p,f)},od=function(e){function t(){return sse(this,t),use(this,t,arguments)}return fse(t,e),lse(t,[{key:"render",value:function(){var n=this.props,r=n.x1,o=n.x2,i=n.y1,a=n.y2,s=n.className,c=n.alwaysShow,l=n.clipPathId;yr(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var u=ut(r),d=ut(o),p=ut(i),f=ut(a),y=this.props.shape;if(!u&&!d&&!p&&!f&&!y)return null;var m=mse(u,d,p,f,this.props);if(!m&&!y)return null;var g=Yn(this.props,"hidden")?"url(#".concat(l,")"):void 0;return $.createElement(mt,{className:Le("recharts-reference-area",s)},t.renderRect(y,$P($P({clipPath:g},Ie(this.props,!0)),m)),Ot.renderCallByParent(this.props,m))}}])}($.Component);rd(od,"displayName","ReferenceArea"),rd(od,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1}),rd(od,"renderRect",function(e,t){var n;return $.isValidElement(e)?n=$.cloneElement(e,t):Ce(e)?n=e(t):n=$.createElement(jy,Vy({},t,{className:"recharts-reference-area-rect"})),n});function VP(e,t,n){if(t<1)return[];if(t===1&&n===void 0)return e;for(var r=[],o=0;o<e.length;o+=t)r.push(e[o]);return r}function yse(e,t,n){var r={width:e.width+t.width,height:e.height+t.height};return dae(r,n)}function gse(e,t,n){var r=n==="width",o=e.x,i=e.y,a=e.width,s=e.height;return t===1?{start:r?o:i,end:r?o+a:i+s}:{start:r?o+a:i+s,end:r?o:i}}function id(e,t,n,r,o){if(e*t<e*r||e*t>e*o)return!1;var i=n();return e*(t-e*i/2-r)>=0&&e*(t+e*i/2-o)<=0}function vse(e,t){return VP(e,t+1)}function bse(e,t,n,r,o){for(var i=(r||[]).slice(),a=t.start,s=t.end,c=0,l=1,u=a,d=function(){var f=r==null?void 0:r[c];if(f===void 0)return{v:VP(r,l)};var y=c,m,g=function(){return m===void 0&&(m=n(f,y)),m},b=f.coordinate,w=c===0||id(e,b,g,u,s);w||(c=0,u=a,l+=1),w&&(u=b+e*(g()/2+o),c+=l)},p;l<=i.length;)if(p=d(),p)return p.v;return[]}function ec(e){"@babel/helpers - typeof";return ec=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ec(e)}function UP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Et(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?UP(Object(n),!0).forEach(function(r){xse(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):UP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function xse(e,t,n){return t=wse(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wse(e){var t=_se(e,"string");return ec(t)=="symbol"?t:t+""}function _se(e,t){if(ec(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(ec(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function jse(e,t,n,r,o){for(var i=(r||[]).slice(),a=i.length,s=t.start,c=t.end,l=function(d){var p=i[d],f,y=function(){return f===void 0&&(f=n(p,d)),f};if(d===a-1){var m=e*(p.coordinate+e*y()/2-c);i[d]=p=Et(Et({},p),{},{tickCoord:m>0?p.coordinate-m*e:p.coordinate})}else i[d]=p=Et(Et({},p),{},{tickCoord:p.coordinate});var g=id(e,p.tickCoord,y,s,c);g&&(c=p.tickCoord-e*(y()/2+o),i[d]=Et(Et({},p),{},{isShow:!0}))},u=a-1;u>=0;u--)l(u);return i}function Ose(e,t,n,r,o,i){var a=(r||[]).slice(),s=a.length,c=t.start,l=t.end;if(i){var u=r[s-1],d=n(u,s-1),p=e*(u.coordinate+e*d/2-l);a[s-1]=u=Et(Et({},u),{},{tickCoord:p>0?u.coordinate-p*e:u.coordinate});var f=id(e,u.tickCoord,function(){return d},c,l);f&&(l=u.tickCoord-e*(d/2+o),a[s-1]=Et(Et({},u),{},{isShow:!0}))}for(var y=i?s-1:s,m=function(b){var w=a[b],_,x=function(){return _===void 0&&(_=n(w,b)),_};if(b===0){var j=e*(w.coordinate-e*x()/2-c);a[b]=w=Et(Et({},w),{},{tickCoord:j<0?w.coordinate-j*e:w.coordinate})}else a[b]=w=Et(Et({},w),{},{tickCoord:w.coordinate});var O=id(e,w.tickCoord,x,c,l);O&&(c=w.tickCoord+e*(x()/2+o),a[b]=Et(Et({},w),{},{isShow:!0}))},g=0;g<y;g++)m(g);return a}function qy(e,t,n){var r=e.tick,o=e.ticks,i=e.viewBox,a=e.minTickGap,s=e.orientation,c=e.interval,l=e.tickFormatter,u=e.unit,d=e.angle;if(!o||!o.length||!r)return[];if(ae(c)||Br.isSsr)return vse(o,typeof c=="number"&&ae(c)?c:0);var p=[],f=s==="top"||s==="bottom"?"width":"height",y=u&&f==="width"?ys(u,{fontSize:t,letterSpacing:n}):{width:0,height:0},m=function(w,_){var x=Ce(l)?l(w.value,_):w.value;return f==="width"?yse(ys(x,{fontSize:t,letterSpacing:n}),y,d):ys(x,{fontSize:t,letterSpacing:n})[f]},g=o.length>=2?En(o[1].coordinate-o[0].coordinate):1,b=gse(i,g,f);return c==="equidistantPreserveStart"?bse(g,b,m,o,a):(c==="preserveStart"||c==="preserveStartEnd"?p=Ose(g,b,m,o,a,c==="preserveStartEnd"):p=jse(g,b,m,o,a),p.filter(function(w){return w.isShow}))}var Ese=["viewBox"],Sse=["viewBox"],Mse=["ticks"];function Hi(e){"@babel/helpers - typeof";return Hi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hi(e)}function Wi(){return Wi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Wi.apply(this,arguments)}function qP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function At(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?qP(Object(n),!0).forEach(function(r){Xy(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Hy(e,t){if(e==null)return{};var n=Cse(e,t),r,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)r=i[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Cse(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Pse(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function HP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,XP(r.key),r)}}function Nse(e,t,n){return t&&HP(e.prototype,t),n&&HP(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function kse(e,t,n){return t=ad(t),Ase(e,WP()?Reflect.construct(t,n||[],ad(e).constructor):t.apply(e,n))}function Ase(e,t){if(t&&(Hi(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Tse(e)}function Tse(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function WP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(WP=function(){return!!e})()}function ad(e){return ad=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ad(e)}function Ise(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Wy(e,t)}function Wy(e,t){return Wy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Wy(e,t)}function Xy(e,t,n){return t=XP(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function XP(e){var t=Dse(e,"string");return Hi(t)=="symbol"?t:t+""}function Dse(e,t){if(Hi(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Hi(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Xi=function(e){function t(n){var r;return Pse(this,t),r=kse(this,t,[n]),r.state={fontSize:"",letterSpacing:""},r}return Ise(t,e),Nse(t,[{key:"shouldComponentUpdate",value:function(n,r){var o=n.viewBox,i=Hy(n,Ese),a=this.props,s=a.viewBox,c=Hy(a,Sse);return!xi(o,s)||!xi(i,c)||!xi(r,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var r=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];r&&this.setState({fontSize:window.getComputedStyle(r).fontSize,letterSpacing:window.getComputedStyle(r).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var r=this.props,o=r.x,i=r.y,a=r.width,s=r.height,c=r.orientation,l=r.tickSize,u=r.mirror,d=r.tickMargin,p,f,y,m,g,b,w=u?-1:1,_=n.tickSize||l,x=ae(n.tickCoord)?n.tickCoord:n.coordinate;switch(c){case"top":p=f=n.coordinate,m=i+ +!u*s,y=m-w*_,b=y-w*d,g=x;break;case"left":y=m=n.coordinate,f=o+ +!u*a,p=f-w*_,g=p-w*d,b=x;break;case"right":y=m=n.coordinate,f=o+ +u*a,p=f+w*_,g=p+w*d,b=x;break;default:p=f=n.coordinate,m=i+ +u*s,y=m+w*_,b=y+w*d,g=x;break}return{line:{x1:p,y1:y,x2:f,y2:m},tick:{x:g,y:b}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,r=n.orientation,o=n.mirror,i;switch(r){case"left":i=o?"start":"end";break;case"right":i=o?"end":"start";break;default:i="middle";break}return i}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,r=n.orientation,o=n.mirror,i="end";switch(r){case"left":case"right":i="middle";break;case"top":i=o?"start":"end";break;default:i=o?"end":"start";break}return i}},{key:"renderAxisLine",value:function(){var n=this.props,r=n.x,o=n.y,i=n.width,a=n.height,s=n.orientation,c=n.mirror,l=n.axisLine,u=At(At(At({},Ie(this.props,!1)),Ie(l,!1)),{},{fill:"none"});if(s==="top"||s==="bottom"){var d=+(s==="top"&&!c||s==="bottom"&&c);u=At(At({},u),{},{x1:r,y1:o+d*a,x2:r+i,y2:o+d*a})}else{var p=+(s==="left"&&!c||s==="right"&&c);u=At(At({},u),{},{x1:r+p*i,y1:o,x2:r+p*i,y2:o+a})}return $.createElement("line",Wi({},u,{className:Le("recharts-cartesian-axis-line",sn(l,"className"))}))}},{key:"renderTicks",value:function(n,r,o){var i=this,a=this.props,s=a.tickLine,c=a.stroke,l=a.tick,u=a.tickFormatter,d=a.unit,p=qy(At(At({},this.props),{},{ticks:n}),r,o),f=this.getTickTextAnchor(),y=this.getTickVerticalAnchor(),m=Ie(this.props,!1),g=Ie(l,!1),b=At(At({},m),{},{fill:"none"},Ie(s,!1)),w=p.map(function(_,x){var j=i.getTickLineCoord(_),O=j.line,E=j.tick,M=At(At(At(At({textAnchor:f,verticalAnchor:y},m),{},{stroke:"none",fill:c},g),E),{},{index:x,payload:_,visibleTicksCount:p.length,tickFormatter:u});return $.createElement(mt,Wi({className:"recharts-cartesian-axis-tick",key:"tick-".concat(_.value,"-").concat(_.coordinate,"-").concat(_.tickCoord)},zl(i.props,_,x)),s&&$.createElement("line",Wi({},b,O,{className:Le("recharts-cartesian-axis-tick-line",sn(s,"className"))})),l&&t.renderTickItem(l,M,"".concat(Ce(u)?u(_.value,x):_.value).concat(d||"")))});return $.createElement("g",{className:"recharts-cartesian-axis-ticks"},w)}},{key:"render",value:function(){var n=this,r=this.props,o=r.axisLine,i=r.width,a=r.height,s=r.ticksGenerator,c=r.className,l=r.hide;if(l)return null;var u=this.props,d=u.ticks,p=Hy(u,Mse),f=d;return Ce(s)&&(f=d&&d.length>0?s(this.props):s(p)),i<=0||a<=0||!f||!f.length?null:$.createElement(mt,{className:Le("recharts-cartesian-axis",c),ref:function(y){n.layerReference=y}},o&&this.renderAxisLine(),this.renderTicks(f,this.state.fontSize,this.state.letterSpacing),Ot.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(n,r,o){var i;return $.isValidElement(n)?i=$.cloneElement(n,r):Ce(n)?i=n(r):i=$.createElement(su,Wi({},r,{className:"recharts-cartesian-axis-tick-value"}),o),i}}])}(v.Component);Xy(Xi,"displayName","CartesianAxis"),Xy(Xi,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var Rse=["x1","y1","x2","y2","key"],Lse=["offset"];function Mo(e){"@babel/helpers - typeof";return Mo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mo(e)}function QP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function St(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?QP(Object(n),!0).forEach(function(r){Bse(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):QP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Bse(e,t,n){return t=$se(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $se(e){var t=Fse(e,"string");return Mo(t)=="symbol"?t:t+""}function Fse(e,t){if(Mo(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Mo(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Co(){return Co=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Co.apply(this,arguments)}function YP(e,t){if(e==null)return{};var n=zse(e,t),r,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)r=i[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function zse(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var Vse=function(e){var t=e.fill;if(!t||t==="none")return null;var n=e.fillOpacity,r=e.x,o=e.y,i=e.width,a=e.height,s=e.ry;return $.createElement("rect",{x:r,y:o,ry:s,width:i,height:a,stroke:"none",fill:t,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function GP(e,t){var n;if($.isValidElement(e))n=$.cloneElement(e,t);else if(Ce(e))n=e(t);else{var r=t.x1,o=t.y1,i=t.x2,a=t.y2,s=t.key,c=YP(t,Rse),l=Ie(c,!1);l.offset;var u=YP(l,Lse);n=$.createElement("line",Co({},u,{x1:r,y1:o,x2:i,y2:a,fill:"none",key:s}))}return n}function Use(e){var t=e.x,n=e.width,r=e.horizontal,o=r===void 0?!0:r,i=e.horizontalPoints;if(!o||!i||!i.length)return null;var a=i.map(function(s,c){var l=St(St({},e),{},{x1:t,y1:s,x2:t+n,y2:s,key:"line-".concat(c),index:c});return GP(o,l)});return $.createElement("g",{className:"recharts-cartesian-grid-horizontal"},a)}function qse(e){var t=e.y,n=e.height,r=e.vertical,o=r===void 0?!0:r,i=e.verticalPoints;if(!o||!i||!i.length)return null;var a=i.map(function(s,c){var l=St(St({},e),{},{x1:s,y1:t,x2:s,y2:t+n,key:"line-".concat(c),index:c});return GP(o,l)});return $.createElement("g",{className:"recharts-cartesian-grid-vertical"},a)}function Hse(e){var t=e.horizontalFill,n=e.fillOpacity,r=e.x,o=e.y,i=e.width,a=e.height,s=e.horizontalPoints,c=e.horizontal,l=c===void 0?!0:c;if(!l||!t||!t.length)return null;var u=s.map(function(p){return Math.round(p+o-o)}).sort(function(p,f){return p-f});o!==u[0]&&u.unshift(0);var d=u.map(function(p,f){var y=!u[f+1],m=y?o+a-p:u[f+1]-p;if(m<=0)return null;var g=f%t.length;return $.createElement("rect",{key:"react-".concat(f),y:p,x:r,height:m,width:i,stroke:"none",fill:t[g],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return $.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function Wse(e){var t=e.vertical,n=t===void 0?!0:t,r=e.verticalFill,o=e.fillOpacity,i=e.x,a=e.y,s=e.width,c=e.height,l=e.verticalPoints;if(!n||!r||!r.length)return null;var u=l.map(function(p){return Math.round(p+i-i)}).sort(function(p,f){return p-f});i!==u[0]&&u.unshift(0);var d=u.map(function(p,f){var y=!u[f+1],m=y?i+s-p:u[f+1]-p;if(m<=0)return null;var g=f%r.length;return $.createElement("rect",{key:"react-".concat(f),x:p,y:a,width:m,height:c,stroke:"none",fill:r[g],fillOpacity:o,className:"recharts-cartesian-grid-bg"})});return $.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var Xse=function(e,t){var n=e.xAxis,r=e.width,o=e.height,i=e.offset;return $C(qy(St(St(St({},Xi.defaultProps),n),{},{ticks:Er(n,!0),viewBox:{x:0,y:0,width:r,height:o}})),i.left,i.left+i.width,t)},Qse=function(e,t){var n=e.yAxis,r=e.width,o=e.height,i=e.offset;return $C(qy(St(St(St({},Xi.defaultProps),n),{},{ticks:Er(n,!0),viewBox:{x:0,y:0,width:r,height:o}})),i.top,i.top+i.height,t)},Qi={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function KP(e){var t,n,r,o,i,a,s=Iy(),c=Dy(),l=Dae(),u=St(St({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:Qi.stroke,fill:(n=e.fill)!==null&&n!==void 0?n:Qi.fill,horizontal:(r=e.horizontal)!==null&&r!==void 0?r:Qi.horizontal,horizontalFill:(o=e.horizontalFill)!==null&&o!==void 0?o:Qi.horizontalFill,vertical:(i=e.vertical)!==null&&i!==void 0?i:Qi.vertical,verticalFill:(a=e.verticalFill)!==null&&a!==void 0?a:Qi.verticalFill,x:ae(e.x)?e.x:l.left,y:ae(e.y)?e.y:l.top,width:ae(e.width)?e.width:l.width,height:ae(e.height)?e.height:l.height}),d=u.x,p=u.y,f=u.width,y=u.height,m=u.syncWithTicks,g=u.horizontalValues,b=u.verticalValues,w=Aae(),_=Tae();if(!ae(f)||f<=0||!ae(y)||y<=0||!ae(d)||d!==+d||!ae(p)||p!==+p)return null;var x=u.verticalCoordinatesGenerator||Xse,j=u.horizontalCoordinatesGenerator||Qse,O=u.horizontalPoints,E=u.verticalPoints;if((!O||!O.length)&&Ce(j)){var M=g&&g.length,N=j({yAxis:_?St(St({},_),{},{ticks:M?g:_.ticks}):void 0,width:s,height:c,offset:l},M?!0:m);yr(Array.isArray(N),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Mo(N),"]")),Array.isArray(N)&&(O=N)}if((!E||!E.length)&&Ce(x)){var A=b&&b.length,P=x({xAxis:w?St(St({},w),{},{ticks:A?b:w.ticks}):void 0,width:s,height:c,offset:l},A?!0:m);yr(Array.isArray(P),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Mo(P),"]")),Array.isArray(P)&&(E=P)}return $.createElement("g",{className:"recharts-cartesian-grid"},$.createElement(Vse,{fill:u.fill,fillOpacity:u.fillOpacity,x:u.x,y:u.y,width:u.width,height:u.height,ry:u.ry}),$.createElement(Use,Co({},u,{offset:l,horizontalPoints:O,xAxis:w,yAxis:_})),$.createElement(qse,Co({},u,{offset:l,verticalPoints:E,xAxis:w,yAxis:_})),$.createElement(Hse,Co({},u,{horizontalPoints:O})),$.createElement(Wse,Co({},u,{verticalPoints:E})))}KP.displayName="CartesianGrid";function Yi(e){"@babel/helpers - typeof";return Yi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yi(e)}function Yse(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Gse(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,eN(r.key),r)}}function Kse(e,t,n){return t&&Gse(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Zse(e,t,n){return t=sd(t),Jse(e,ZP()?Reflect.construct(t,n||[],sd(e).constructor):t.apply(e,n))}function Jse(e,t){if(t&&(Yi(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ece(e)}function ece(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ZP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ZP=function(){return!!e})()}function sd(e){return sd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},sd(e)}function tce(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Qy(e,t)}function Qy(e,t){return Qy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Qy(e,t)}function JP(e,t,n){return t=eN(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function eN(e){var t=nce(e,"string");return Yi(t)=="symbol"?t:t+""}function nce(e,t){if(Yi(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Yi(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Yy(){return Yy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Yy.apply(this,arguments)}function rce(e){var t=e.xAxisId,n=Iy(),r=Dy(),o=MP(t);return o==null?null:$.createElement(Xi,Yy({},o,{className:Le("recharts-".concat(o.axisType," ").concat(o.axisType),o.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(i){return Er(i,!0)}}))}var cd=function(e){function t(){return Yse(this,t),Zse(this,t,arguments)}return tce(t,e),Kse(t,[{key:"render",value:function(){return $.createElement(rce,this.props)}}])}($.Component);JP(cd,"displayName","XAxis"),JP(cd,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Gi(e){"@babel/helpers - typeof";return Gi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gi(e)}function oce(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ice(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,rN(r.key),r)}}function ace(e,t,n){return t&&ice(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function sce(e,t,n){return t=ld(t),cce(e,tN()?Reflect.construct(t,n||[],ld(e).constructor):t.apply(e,n))}function cce(e,t){if(t&&(Gi(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return lce(e)}function lce(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tN(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(tN=function(){return!!e})()}function ld(e){return ld=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ld(e)}function uce(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Gy(e,t)}function Gy(e,t){return Gy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Gy(e,t)}function nN(e,t,n){return t=rN(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rN(e){var t=dce(e,"string");return Gi(t)=="symbol"?t:t+""}function dce(e,t){if(Gi(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Gi(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ky(){return Ky=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ky.apply(this,arguments)}var pce=function(e){var t=e.yAxisId,n=Iy(),r=Dy(),o=CP(t);return o==null?null:$.createElement(Xi,Ky({},o,{className:Le("recharts-".concat(o.axisType," ").concat(o.axisType),o.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(i){return Er(i,!0)}}))},Zy=function(e){function t(){return oce(this,t),sce(this,t,arguments)}return uce(t,e),ace(t,[{key:"render",value:function(){return $.createElement(pce,this.props)}}])}($.Component);nN(Zy,"displayName","YAxis"),nN(Zy,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function oN(e){return yce(e)||mce(e)||hce(e)||fce()}function fce(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hce(e,t){if(e){if(typeof e=="string")return Jy(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Jy(e,t)}}function mce(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function yce(e){if(Array.isArray(e))return Jy(e)}function Jy(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var eg=function(e,t,n,r,o){var i=Sn(e,$y),a=Sn(e,td),s=[].concat(oN(i),oN(a)),c=Sn(e,od),l="".concat(r,"Id"),u=r[0],d=t;if(s.length&&(d=s.reduce(function(y,m){if(m.props[l]===n&&Yn(m.props,"extendDomain")&&ae(m.props[u])){var g=m.props[u];return[Math.min(y[0],g),Math.max(y[1],g)]}return y},d)),c.length){var p="".concat(u,"1"),f="".concat(u,"2");d=c.reduce(function(y,m){if(m.props[l]===n&&Yn(m.props,"extendDomain")&&ae(m.props[p])&&ae(m.props[f])){var g=m.props[p],b=m.props[f];return[Math.min(y[0],g,b),Math.max(y[1],g,b)]}return y},d)}return o&&o.length&&(d=o.reduce(function(y,m){return ae(m)?[Math.min(y[0],m),Math.max(y[1],m)]:y},d)),d},iN={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function o(c,l,u){this.fn=c,this.context=l,this.once=u||!1}function i(c,l,u,d,p){if(typeof u!="function")throw new TypeError("The listener must be a function");var f=new o(u,d||c,p),y=n?n+l:l;return c._events[y]?c._events[y].fn?c._events[y]=[c._events[y],f]:c._events[y].push(f):(c._events[y]=f,c._eventsCount++),c}function a(c,l){--c._eventsCount===0?c._events=new r:delete c._events[l]}function s(){this._events=new r,this._eventsCount=0}s.prototype.eventNames=function(){var c=[],l,u;if(this._eventsCount===0)return c;for(u in l=this._events)t.call(l,u)&&c.push(n?u.slice(1):u);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(l)):c},s.prototype.listeners=function(c){var l=n?n+c:c,u=this._events[l];if(!u)return[];if(u.fn)return[u.fn];for(var d=0,p=u.length,f=new Array(p);d<p;d++)f[d]=u[d].fn;return f},s.prototype.listenerCount=function(c){var l=n?n+c:c,u=this._events[l];return u?u.fn?1:u.length:0},s.prototype.emit=function(c,l,u,d,p,f){var y=n?n+c:c;if(!this._events[y])return!1;var m=this._events[y],g=arguments.length,b,w;if(m.fn){switch(m.once&&this.removeListener(c,m.fn,void 0,!0),g){case 1:return m.fn.call(m.context),!0;case 2:return m.fn.call(m.context,l),!0;case 3:return m.fn.call(m.context,l,u),!0;case 4:return m.fn.call(m.context,l,u,d),!0;case 5:return m.fn.call(m.context,l,u,d,p),!0;case 6:return m.fn.call(m.context,l,u,d,p,f),!0}for(w=1,b=new Array(g-1);w<g;w++)b[w-1]=arguments[w];m.fn.apply(m.context,b)}else{var _=m.length,x;for(w=0;w<_;w++)switch(m[w].once&&this.removeListener(c,m[w].fn,void 0,!0),g){case 1:m[w].fn.call(m[w].context);break;case 2:m[w].fn.call(m[w].context,l);break;case 3:m[w].fn.call(m[w].context,l,u);break;case 4:m[w].fn.call(m[w].context,l,u,d);break;default:if(!b)for(x=1,b=new Array(g-1);x<g;x++)b[x-1]=arguments[x];m[w].fn.apply(m[w].context,b)}}return!0},s.prototype.on=function(c,l,u){return i(this,c,l,u,!1)},s.prototype.once=function(c,l,u){return i(this,c,l,u,!0)},s.prototype.removeListener=function(c,l,u,d){var p=n?n+c:c;if(!this._events[p])return this;if(!l)return a(this,p),this;var f=this._events[p];if(f.fn)f.fn===l&&(!d||f.once)&&(!u||f.context===u)&&a(this,p);else{for(var y=0,m=[],g=f.length;y<g;y++)(f[y].fn!==l||d&&!f[y].once||u&&f[y].context!==u)&&m.push(f[y]);m.length?this._events[p]=m.length===1?m[0]:m:a(this,p)}return this},s.prototype.removeAllListeners=function(c){var l;return c?(l=n?n+c:c,this._events[l]&&a(this,l)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,e.exports=s})(iN);var gce=iN.exports;const vce=Ne(gce);var tg=new vce,ng="recharts.syncMouseEvents";function tc(e){"@babel/helpers - typeof";return tc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tc(e)}function bce(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xce(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,aN(r.key),r)}}function wce(e,t,n){return t&&xce(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function rg(e,t,n){return t=aN(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function aN(e){var t=_ce(e,"string");return tc(t)=="symbol"?t:t+""}function _ce(e,t){if(tc(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(tc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var jce=function(){function e(){bce(this,e),rg(this,"activeIndex",0),rg(this,"coordinateList",[]),rg(this,"layout","horizontal")}return wce(e,[{key:"setDetails",value:function(t){var n,r=t.coordinateList,o=r===void 0?null:r,i=t.container,a=i===void 0?null:i,s=t.layout,c=s===void 0?null:s,l=t.offset,u=l===void 0?null:l,d=t.mouseHandlerCallback,p=d===void 0?null:d;this.coordinateList=(n=o??this.coordinateList)!==null&&n!==void 0?n:[],this.container=a??this.container,this.layout=c??this.layout,this.offset=u??this.offset,this.mouseHandlerCallback=p??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(t){if(this.coordinateList.length!==0)switch(t.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(t){this.activeIndex=t}},{key:"spoofMouse",value:function(){var t,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var r=this.container.getBoundingClientRect(),o=r.x,i=r.y,a=r.height,s=this.coordinateList[this.activeIndex].coordinate,c=((t=window)===null||t===void 0?void 0:t.scrollX)||0,l=((n=window)===null||n===void 0?void 0:n.scrollY)||0,u=o+s+c,d=i+this.offset.top+a/2+l;this.mouseHandlerCallback({pageX:u,pageY:d})}}}])}();function Oce(e,t,n){if(n==="number"&&t===!0&&Array.isArray(e)){var r=e==null?void 0:e[0],o=e==null?void 0:e[1];if(r&&o&&ae(r)&&ae(o))return!0}return!1}function Ece(e,t,n,r){var o=r/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-o:n.left+.5,y:e==="horizontal"?n.top+.5:t.y-o,width:e==="horizontal"?r:n.width-1,height:e==="horizontal"?n.height-1:r}}function sN(e){var t=e.cx,n=e.cy,r=e.radius,o=e.startAngle,i=e.endAngle,a=wt(t,n,r,o),s=wt(t,n,r,i);return{points:[a,s],cx:t,cy:n,radius:r,startAngle:o,endAngle:i}}function Sce(e,t,n){var r,o,i,a;if(e==="horizontal")r=t.x,i=r,o=n.top,a=n.top+n.height;else if(e==="vertical")o=t.y,a=o,r=n.left,i=n.left+n.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var s=t.cx,c=t.cy,l=t.innerRadius,u=t.outerRadius,d=t.angle,p=wt(s,c,l,d),f=wt(s,c,u,d);r=p.x,o=p.y,i=f.x,a=f.y}else return sN(t);return[{x:r,y:o},{x:i,y:a}]}function nc(e){"@babel/helpers - typeof";return nc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nc(e)}function cN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function ud(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?cN(Object(n),!0).forEach(function(r){Mce(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cN(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Mce(e,t,n){return t=Cce(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Cce(e){var t=Pce(e,"string");return nc(t)=="symbol"?t:t+""}function Pce(e,t){if(nc(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(nc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Nce(e){var t,n,r=e.element,o=e.tooltipEventType,i=e.isActive,a=e.activeCoordinate,s=e.activePayload,c=e.offset,l=e.activeTooltipIndex,u=e.tooltipAxisBandSize,d=e.layout,p=e.chartName,f=(t=r.props.cursor)!==null&&t!==void 0?t:(n=r.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!r||!f||!i||!a||p!=="ScatterChart"&&o!=="axis")return null;var y,m=c2;if(p==="ScatterChart")y=a,m=Gre;else if(p==="BarChart")y=Ece(d,a,c,u),m=jy;else if(d==="radial"){var g=sN(a),b=g.cx,w=g.cy,_=g.radius,x=g.startAngle,j=g.endAngle;y={cx:b,cy:w,startAngle:x,endAngle:j,innerRadius:_,outerRadius:_},m=o2}else y={points:Sce(d,a,c)},m=c2;var O=ud(ud(ud(ud({stroke:"#ccc",pointerEvents:"none"},c),y),Ie(f,!1)),{},{payload:s,payloadIndex:l,className:Le("recharts-tooltip-cursor",f.className)});return v.isValidElement(f)?v.cloneElement(f,O):v.createElement(m,O)}var kce=["item"],Ace=["children","className","width","height","style","compact","title","desc"];function Ki(e){"@babel/helpers - typeof";return Ki=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ki(e)}function Zi(){return Zi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Zi.apply(this,arguments)}function lN(e,t){return Dce(e)||Ice(e,t)||pN(e,t)||Tce()}function Tce(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ice(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,o,i,a,s=[],c=!0,l=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(u){l=!0,o=u}finally{try{if(!c&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}function Dce(e){if(Array.isArray(e))return e}function uN(e,t){if(e==null)return{};var n=Rce(e,t),r,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)r=i[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Rce(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Lce(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Bce(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,hN(r.key),r)}}function $ce(e,t,n){return t&&Bce(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Fce(e,t,n){return t=dd(t),zce(e,dN()?Reflect.construct(t,n||[],dd(e).constructor):t.apply(e,n))}function zce(e,t){if(t&&(Ki(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Vce(e)}function Vce(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dN(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(dN=function(){return!!e})()}function dd(e){return dd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},dd(e)}function Uce(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&og(e,t)}function og(e,t){return og=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},og(e,t)}function Ji(e){return Wce(e)||Hce(e)||pN(e)||qce()}function qce(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pN(e,t){if(e){if(typeof e=="string")return ig(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ig(e,t)}}function Hce(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Wce(e){if(Array.isArray(e))return ig(e)}function ig(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function fN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function J(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?fN(Object(n),!0).forEach(function(r){xe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fN(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function xe(e,t,n){return t=hN(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hN(e){var t=Xce(e,"string");return Ki(t)=="symbol"?t:t+""}function Xce(e,t){if(Ki(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Ki(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Qce={xAxis:["bottom","top"],yAxis:["left","right"]},Yce={width:"100%",height:"100%"},mN={x:0,y:0};function pd(e){return e}var Gce=function(e,t){return t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius},Kce=function(e,t,n,r){var o=t.find(function(l){return l&&l.index===n});if(o){if(e==="horizontal")return{x:o.coordinate,y:r.y};if(e==="vertical")return{x:r.x,y:o.coordinate};if(e==="centric"){var i=o.coordinate,a=r.radius;return J(J(J({},r),wt(r.cx,r.cy,a,i)),{},{angle:i,radius:a})}var s=o.coordinate,c=r.angle;return J(J(J({},r),wt(r.cx,r.cy,s,c)),{},{angle:c,radius:s})}return mN},fd=function(e,t){var n=t.graphicalItems,r=t.dataStartIndex,o=t.dataEndIndex,i=(n??[]).reduce(function(a,s){var c=s.props.data;return c&&c.length?[].concat(Ji(a),Ji(c)):a},[]);return i.length>0?i:e&&e.length&&ae(r)&&ae(o)?e.slice(r,o+1):[]};function yN(e){return e==="number"?[0,"auto"]:void 0}var ag=function(e,t,n,r){var o=e.graphicalItems,i=e.tooltipAxis,a=fd(t,e);return n<0||!o||!o.length||n>=a.length?null:o.reduce(function(s,c){var l,u=(l=c.props.data)!==null&&l!==void 0?l:t;u&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=n&&(u=u.slice(e.dataStartIndex,e.dataEndIndex+1));var d;if(i.dataKey&&!i.allowDuplicatedCategory){var p=u===void 0?a:u;d=kh(p,i.dataKey,r)}else d=u&&u[n]||a[n];return d?[].concat(Ji(s),[WC(c,d)]):s},[])},gN=function(e,t,n,r){var o=r||{x:e.chartX,y:e.chartY},i=Gce(o,n),a=e.orderedTooltipTicks,s=e.tooltipAxis,c=e.tooltipTicks,l=qee(i,a,c,s);if(l>=0&&c){var u=c[l]&&c[l].value,d=ag(e,t,l,u),p=Kce(n,a,l,o);return{activeTooltipIndex:l,activeLabel:u,activePayload:d,activeCoordinate:p}}return null},Zce=function(e,t){var n=t.axes,r=t.graphicalItems,o=t.axisType,i=t.axisIdKey,a=t.stackGroups,s=t.dataStartIndex,c=t.dataEndIndex,l=e.layout,u=e.children,d=e.stackOffset,p=BC(l,o);return n.reduce(function(f,y){var m,g=y.type.defaultProps!==void 0?J(J({},y.type.defaultProps),y.props):y.props,b=g.type,w=g.dataKey,_=g.allowDataOverflow,x=g.allowDuplicatedCategory,j=g.scale,O=g.ticks,E=g.includeHidden,M=g[i];if(f[M])return f;var N=fd(e.data,{graphicalItems:r.filter(function(V){var I,X=i in V.props?V.props[i]:(I=V.type.defaultProps)===null||I===void 0?void 0:I[i];return X===M}),dataStartIndex:s,dataEndIndex:c}),A=N.length,P,T,L;Oce(g.domain,_,b)&&(P=cy(g.domain,null,_),p&&(b==="number"||j!=="auto")&&(L=Nu(N,w,"category")));var S=yN(b);if(!P||P.length===0){var C,k=(C=g.domain)!==null&&C!==void 0?C:S;if(w){if(P=Nu(N,w,b),b==="category"&&p){var D=SH(P);x&&D?(T=P,P=Wu(0,A)):x||(P=HC(k,P,y).reduce(function(V,I){return V.indexOf(I)>=0?V:[].concat(Ji(V),[I])},[]))}else if(b==="category")x?P=P.filter(function(V){return V!==""&&!Re(V)}):P=HC(k,P,y).reduce(function(V,I){return V.indexOf(I)>=0||I===""||Re(I)?V:[].concat(Ji(V),[I])},[]);else if(b==="number"){var R=Yee(N,r.filter(function(V){var I,X,H=i in V.props?V.props[i]:(I=V.type.defaultProps)===null||I===void 0?void 0:I[i],q="hide"in V.props?V.props.hide:(X=V.type.defaultProps)===null||X===void 0?void 0:X.hide;return H===M&&(E||!q)}),w,o,l);R&&(P=R)}p&&(b==="number"||j!=="auto")&&(L=Nu(N,w,"category"))}else p?P=Wu(0,A):a&&a[M]&&a[M].hasStack&&b==="number"?P=d==="expand"?[0,1]:VC(a[M].stackGroups,s,c):P=LC(N,r.filter(function(V){var I=i in V.props?V.props[i]:V.type.defaultProps[i],X="hide"in V.props?V.props.hide:V.type.defaultProps.hide;return I===M&&(E||!X)}),b,l,!0);if(b==="number")P=eg(u,P,M,o,O),k&&(P=cy(k,P,_));else if(b==="category"&&k){var B=k,F=P.every(function(V){return B.indexOf(V)>=0});F&&(P=B)}}return J(J({},f),{},xe({},M,J(J({},g),{},{axisType:o,domain:P,categoricalDomain:L,duplicateDomain:T,originalDomain:(m=g.domain)!==null&&m!==void 0?m:S,isCategorical:p,layout:l})))},{})},Jce=function(e,t){var n=t.graphicalItems,r=t.Axis,o=t.axisType,i=t.axisIdKey,a=t.stackGroups,s=t.dataStartIndex,c=t.dataEndIndex,l=e.layout,u=e.children,d=fd(e.data,{graphicalItems:n,dataStartIndex:s,dataEndIndex:c}),p=d.length,f=BC(l,o),y=-1;return n.reduce(function(m,g){var b=g.type.defaultProps!==void 0?J(J({},g.type.defaultProps),g.props):g.props,w=b[i],_=yN("number");if(!m[w]){y++;var x;return f?x=Wu(0,p):a&&a[w]&&a[w].hasStack?(x=VC(a[w].stackGroups,s,c),x=eg(u,x,w,o)):(x=cy(_,LC(d,n.filter(function(j){var O,E,M=i in j.props?j.props[i]:(O=j.type.defaultProps)===null||O===void 0?void 0:O[i],N="hide"in j.props?j.props.hide:(E=j.type.defaultProps)===null||E===void 0?void 0:E.hide;return M===w&&!N}),"number",l),r.defaultProps.allowDataOverflow),x=eg(u,x,w,o)),J(J({},m),{},xe({},w,J(J({axisType:o},r.defaultProps),{},{hide:!0,orientation:sn(Qce,"".concat(o,".").concat(y%2),null),domain:x,originalDomain:_,isCategorical:f,layout:l})))}return m},{})},ele=function(e,t){var n=t.axisType,r=n===void 0?"xAxis":n,o=t.AxisComp,i=t.graphicalItems,a=t.stackGroups,s=t.dataStartIndex,c=t.dataEndIndex,l=e.children,u="".concat(r,"Id"),d=Sn(l,o),p={};return d&&d.length?p=Zce(e,{axes:d,graphicalItems:i,axisType:r,axisIdKey:u,stackGroups:a,dataStartIndex:s,dataEndIndex:c}):i&&i.length&&(p=Jce(e,{Axis:o,graphicalItems:i,axisType:r,axisIdKey:u,stackGroups:a,dataStartIndex:s,dataEndIndex:c})),p},tle=function(e){var t=Lr(e),n=Er(t,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:lm(n,function(r){return r.coordinate}),tooltipAxis:t,tooltipAxisBandSize:Au(t,n)}},vN=function(e){var t=e.children,n=e.defaultShowTooltip,r=Jt(t,Fi),o=0,i=0;return e.data&&e.data.length!==0&&(i=e.data.length-1),r&&r.props&&(r.props.startIndex>=0&&(o=r.props.startIndex),r.props.endIndex>=0&&(i=r.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:o,dataEndIndex:i,activeTooltipIndex:-1,isTooltipActive:!!n}},nle=function(e){return!e||!e.length?!1:e.some(function(t){var n=mr(t&&t.type);return n&&n.indexOf("Bar")>=0})},bN=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},rle=function(e,t){var n=e.props,r=e.graphicalItems,o=e.xAxisMap,i=o===void 0?{}:o,a=e.yAxisMap,s=a===void 0?{}:a,c=n.width,l=n.height,u=n.children,d=n.margin||{},p=Jt(u,Fi),f=Jt(u,Oi),y=Object.keys(s).reduce(function(x,j){var O=s[j],E=O.orientation;return!O.mirror&&!O.hide?J(J({},x),{},xe({},E,x[E]+O.width)):x},{left:d.left||0,right:d.right||0}),m=Object.keys(i).reduce(function(x,j){var O=i[j],E=O.orientation;return!O.mirror&&!O.hide?J(J({},x),{},xe({},E,sn(x,"".concat(E))+O.height)):x},{top:d.top||0,bottom:d.bottom||0}),g=J(J({},m),y),b=g.bottom;p&&(g.bottom+=p.props.height||Fi.defaultProps.height),f&&t&&(g=Xee(g,r,n,t));var w=c-g.left-g.right,_=l-g.top-g.bottom;return J(J({brushBottom:b},g),{},{width:Math.max(w,0),height:Math.max(_,0)})},ole=function(e,t){if(t==="xAxis")return e[t].width;if(t==="yAxis")return e[t].height},ile=function(e){var t=e.chartName,n=e.GraphicalChild,r=e.defaultTooltipEventType,o=r===void 0?"axis":r,i=e.validateTooltipEventTypes,a=i===void 0?["axis"]:i,s=e.axisComponents,c=e.legendContent,l=e.formatAxisMap,u=e.defaultProps,d=function(m,g){var b=g.graphicalItems,w=g.stackGroups,_=g.offset,x=g.updateId,j=g.dataStartIndex,O=g.dataEndIndex,E=m.barSize,M=m.layout,N=m.barGap,A=m.barCategoryGap,P=m.maxBarSize,T=bN(M),L=T.numericAxisName,S=T.cateAxisName,C=nle(b),k=[];return b.forEach(function(D,R){var B=fd(m.data,{graphicalItems:[D],dataStartIndex:j,dataEndIndex:O}),F=D.type.defaultProps!==void 0?J(J({},D.type.defaultProps),D.props):D.props,V=F.dataKey,I=F.maxBarSize,X=F["".concat(L,"Id")],H=F["".concat(S,"Id")],q={},te=s.reduce(function(Xt,Mt){var nn=g["".concat(Mt.axisType,"Map")],Gn=F["".concat(Mt.axisType,"Id")];nn&&nn[Gn]||Mt.axisType==="zAxis"||jo();var Kn=nn[Gn];return J(J({},Xt),{},xe(xe({},Mt.axisType,Kn),"".concat(Mt.axisType,"Ticks"),Er(Kn)))},q),Q=te[S],Z=te["".concat(S,"Ticks")],Y=w&&w[X]&&w[X].hasStack&&ste(D,w[X].stackGroups),K=mr(D.type).indexOf("Bar")>=0,ne=Au(Q,Z),z=[],ye=C&&Hee({barSize:E,stackGroups:w,totalSize:ole(te,S)});if(K){var fe,Oe,Ae=Re(I)?P:I,et=(fe=(Oe=Au(Q,Z,!0))!==null&&Oe!==void 0?Oe:Ae)!==null&&fe!==void 0?fe:0;z=Wee({barGap:N,barCategoryGap:A,bandSize:et!==ne?et:ne,sizeList:ye[H],maxBarSize:Ae}),et!==ne&&(z=z.map(function(Xt){return J(J({},Xt),{},{position:J(J({},Xt.position),{},{offset:Xt.position.offset-et/2})})}))}var Wt=D&&D.type&&D.type.getComposedData;Wt&&k.push({props:J(J({},Wt(J(J({},te),{},{displayedData:B,props:m,dataKey:V,item:D,bandSize:ne,barPosition:z,offset:_,stackedData:Y,layout:M,dataStartIndex:j,dataEndIndex:O}))),{},xe(xe(xe({key:D.key||"item-".concat(R)},L,te[L]),S,te[S]),"animationId",x)),childIndex:LH(D,m.children),item:D})}),k},p=function(m,g){var b=m.props,w=m.dataStartIndex,_=m.dataEndIndex,x=m.updateId;if(!oE({props:b}))return null;var j=b.children,O=b.layout,E=b.stackOffset,M=b.data,N=b.reverseStackOrder,A=bN(O),P=A.numericAxisName,T=A.cateAxisName,L=Sn(j,n),S=ote(M,L,"".concat(P,"Id"),"".concat(T,"Id"),E,N),C=s.reduce(function(F,V){var I="".concat(V.axisType,"Map");return J(J({},F),{},xe({},I,ele(b,J(J({},V),{},{graphicalItems:L,stackGroups:V.axisType===P&&S,dataStartIndex:w,dataEndIndex:_}))))},{}),k=rle(J(J({},C),{},{props:b,graphicalItems:L}),g==null?void 0:g.legendBBox);Object.keys(C).forEach(function(F){C[F]=l(b,C[F],k,F.replace("Map",""),t)});var D=C["".concat(T,"Map")],R=tle(D),B=d(b,J(J({},C),{},{dataStartIndex:w,dataEndIndex:_,updateId:x,graphicalItems:L,stackGroups:S,offset:k}));return J(J({formattedGraphicalItems:B,graphicalItems:L,offset:k,stackGroups:S},R),C)},f=function(m){function g(b){var w,_,x;return Lce(this,g),x=Fce(this,g,[b]),xe(x,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),xe(x,"accessibilityManager",new jce),xe(x,"handleLegendBBoxUpdate",function(j){if(j){var O=x.state,E=O.dataStartIndex,M=O.dataEndIndex,N=O.updateId;x.setState(J({legendBBox:j},p({props:x.props,dataStartIndex:E,dataEndIndex:M,updateId:N},J(J({},x.state),{},{legendBBox:j}))))}}),xe(x,"handleReceiveSyncEvent",function(j,O,E){if(x.props.syncId===j){if(E===x.eventEmitterSymbol&&typeof x.props.syncMethod!="function")return;x.applySyncEvent(O)}}),xe(x,"handleBrushChange",function(j){var O=j.startIndex,E=j.endIndex;if(O!==x.state.dataStartIndex||E!==x.state.dataEndIndex){var M=x.state.updateId;x.setState(function(){return J({dataStartIndex:O,dataEndIndex:E},p({props:x.props,dataStartIndex:O,dataEndIndex:E,updateId:M},x.state))}),x.triggerSyncEvent({dataStartIndex:O,dataEndIndex:E})}}),xe(x,"handleMouseEnter",function(j){var O=x.getMouseInfo(j);if(O){var E=J(J({},O),{},{isTooltipActive:!0});x.setState(E),x.triggerSyncEvent(E);var M=x.props.onMouseEnter;Ce(M)&&M(E,j)}}),xe(x,"triggeredAfterMouseMove",function(j){var O=x.getMouseInfo(j),E=O?J(J({},O),{},{isTooltipActive:!0}):{isTooltipActive:!1};x.setState(E),x.triggerSyncEvent(E);var M=x.props.onMouseMove;Ce(M)&&M(E,j)}),xe(x,"handleItemMouseEnter",function(j){x.setState(function(){return{isTooltipActive:!0,activeItem:j,activePayload:j.tooltipPayload,activeCoordinate:j.tooltipPosition||{x:j.cx,y:j.cy}}})}),xe(x,"handleItemMouseLeave",function(){x.setState(function(){return{isTooltipActive:!1}})}),xe(x,"handleMouseMove",function(j){j.persist(),x.throttleTriggeredAfterMouseMove(j)}),xe(x,"handleMouseLeave",function(j){x.throttleTriggeredAfterMouseMove.cancel();var O={isTooltipActive:!1};x.setState(O),x.triggerSyncEvent(O);var E=x.props.onMouseLeave;Ce(E)&&E(O,j)}),xe(x,"handleOuterEvent",function(j){var O=RH(j),E=sn(x.props,"".concat(O));if(O&&Ce(E)){var M,N;/.*touch.*/i.test(O)?N=x.getMouseInfo(j.changedTouches[0]):N=x.getMouseInfo(j),E((M=N)!==null&&M!==void 0?M:{},j)}}),xe(x,"handleClick",function(j){var O=x.getMouseInfo(j);if(O){var E=J(J({},O),{},{isTooltipActive:!0});x.setState(E),x.triggerSyncEvent(E);var M=x.props.onClick;Ce(M)&&M(E,j)}}),xe(x,"handleMouseDown",function(j){var O=x.props.onMouseDown;if(Ce(O)){var E=x.getMouseInfo(j);O(E,j)}}),xe(x,"handleMouseUp",function(j){var O=x.props.onMouseUp;if(Ce(O)){var E=x.getMouseInfo(j);O(E,j)}}),xe(x,"handleTouchMove",function(j){j.changedTouches!=null&&j.changedTouches.length>0&&x.throttleTriggeredAfterMouseMove(j.changedTouches[0])}),xe(x,"handleTouchStart",function(j){j.changedTouches!=null&&j.changedTouches.length>0&&x.handleMouseDown(j.changedTouches[0])}),xe(x,"handleTouchEnd",function(j){j.changedTouches!=null&&j.changedTouches.length>0&&x.handleMouseUp(j.changedTouches[0])}),xe(x,"triggerSyncEvent",function(j){x.props.syncId!==void 0&&tg.emit(ng,x.props.syncId,j,x.eventEmitterSymbol)}),xe(x,"applySyncEvent",function(j){var O=x.props,E=O.layout,M=O.syncMethod,N=x.state.updateId,A=j.dataStartIndex,P=j.dataEndIndex;if(j.dataStartIndex!==void 0||j.dataEndIndex!==void 0)x.setState(J({dataStartIndex:A,dataEndIndex:P},p({props:x.props,dataStartIndex:A,dataEndIndex:P,updateId:N},x.state)));else if(j.activeTooltipIndex!==void 0){var T=j.chartX,L=j.chartY,S=j.activeTooltipIndex,C=x.state,k=C.offset,D=C.tooltipTicks;if(!k)return;if(typeof M=="function")S=M(D,j);else if(M==="value"){S=-1;for(var R=0;R<D.length;R++)if(D[R].value===j.activeLabel){S=R;break}}var B=J(J({},k),{},{x:k.left,y:k.top}),F=Math.min(T,B.x+B.width),V=Math.min(L,B.y+B.height),I=D[S]&&D[S].value,X=ag(x.state,x.props.data,S),H=D[S]?{x:E==="horizontal"?D[S].coordinate:F,y:E==="horizontal"?V:D[S].coordinate}:mN;x.setState(J(J({},j),{},{activeLabel:I,activeCoordinate:H,activePayload:X,activeTooltipIndex:S}))}else x.setState(j)}),xe(x,"renderCursor",function(j){var O,E=x.state,M=E.isTooltipActive,N=E.activeCoordinate,A=E.activePayload,P=E.offset,T=E.activeTooltipIndex,L=E.tooltipAxisBandSize,S=x.getTooltipEventType(),C=(O=j.props.active)!==null&&O!==void 0?O:M,k=x.props.layout,D=j.key||"_recharts-cursor";return $.createElement(Nce,{key:D,activeCoordinate:N,activePayload:A,activeTooltipIndex:T,chartName:t,element:j,isActive:C,layout:k,offset:P,tooltipAxisBandSize:L,tooltipEventType:S})}),xe(x,"renderPolarAxis",function(j,O,E){var M=sn(j,"type.axisType"),N=sn(x.state,"".concat(M,"Map")),A=j.type.defaultProps,P=A!==void 0?J(J({},A),j.props):j.props,T=N&&N[P["".concat(M,"Id")]];return v.cloneElement(j,J(J({},T),{},{className:Le(M,T.className),key:j.key||"".concat(O,"-").concat(E),ticks:Er(T,!0)}))}),xe(x,"renderPolarGrid",function(j){var O=j.props,E=O.radialLines,M=O.polarAngles,N=O.polarRadius,A=x.state,P=A.radiusAxisMap,T=A.angleAxisMap,L=Lr(P),S=Lr(T),C=S.cx,k=S.cy,D=S.innerRadius,R=S.outerRadius;return v.cloneElement(j,{polarAngles:Array.isArray(M)?M:Er(S,!0).map(function(B){return B.coordinate}),polarRadius:Array.isArray(N)?N:Er(L,!0).map(function(B){return B.coordinate}),cx:C,cy:k,innerRadius:D,outerRadius:R,key:j.key||"polar-grid",radialLines:E})}),xe(x,"renderLegend",function(){var j=x.state.formattedGraphicalItems,O=x.props,E=O.children,M=O.width,N=O.height,A=x.props.margin||{},P=M-(A.left||0)-(A.right||0),T=TC({children:E,formattedGraphicalItems:j,legendWidth:P,legendContent:c});if(!T)return null;var L=T.item,S=uN(T,kce);return v.cloneElement(L,J(J({},S),{},{chartWidth:M,chartHeight:N,margin:A,onBBoxUpdate:x.handleLegendBBoxUpdate}))}),xe(x,"renderTooltip",function(){var j,O=x.props,E=O.children,M=O.accessibilityLayer,N=Jt(E,Hn);if(!N)return null;var A=x.state,P=A.isTooltipActive,T=A.activeCoordinate,L=A.activePayload,S=A.activeLabel,C=A.offset,k=(j=N.props.active)!==null&&j!==void 0?j:P;return v.cloneElement(N,{viewBox:J(J({},C),{},{x:C.left,y:C.top}),active:k,label:S,payload:k?L:[],coordinate:T,accessibilityLayer:M})}),xe(x,"renderBrush",function(j){var O=x.props,E=O.margin,M=O.data,N=x.state,A=N.offset,P=N.dataStartIndex,T=N.dataEndIndex,L=N.updateId;return v.cloneElement(j,{key:j.key||"_recharts-brush",onChange:ku(x.handleBrushChange,j.props.onChange),data:M,x:ae(j.props.x)?j.props.x:A.left,y:ae(j.props.y)?j.props.y:A.top+A.height+A.brushBottom-(E.bottom||0),width:ae(j.props.width)?j.props.width:A.width,startIndex:P,endIndex:T,updateId:"brush-".concat(L)})}),xe(x,"renderReferenceElement",function(j,O,E){if(!j)return null;var M=x,N=M.clipPathId,A=x.state,P=A.xAxisMap,T=A.yAxisMap,L=A.offset,S=j.type.defaultProps||{},C=j.props,k=C.xAxisId,D=k===void 0?S.xAxisId:k,R=C.yAxisId,B=R===void 0?S.yAxisId:R;return v.cloneElement(j,{key:j.key||"".concat(O,"-").concat(E),xAxis:P[D],yAxis:T[B],viewBox:{x:L.left,y:L.top,width:L.width,height:L.height},clipPathId:N})}),xe(x,"renderActivePoints",function(j){var O=j.item,E=j.activePoint,M=j.basePoint,N=j.childIndex,A=j.isRange,P=[],T=O.props.key,L=O.item.type.defaultProps!==void 0?J(J({},O.item.type.defaultProps),O.item.props):O.item.props,S=L.activeDot,C=L.dataKey,k=J(J({index:N,dataKey:C,cx:E.x,cy:E.y,r:4,fill:ay(O.item),strokeWidth:2,stroke:"#fff",payload:E.payload,value:E.value},Ie(S,!1)),Fl(S));return P.push(g.renderActiveDot(S,k,"".concat(T,"-activePoint-").concat(N))),M?P.push(g.renderActiveDot(S,J(J({},k),{},{cx:M.x,cy:M.y}),"".concat(T,"-basePoint-").concat(N))):A&&P.push(null),P}),xe(x,"renderGraphicChild",function(j,O,E){var M=x.filterFormatItem(j,O,E);if(!M)return null;var N=x.getTooltipEventType(),A=x.state,P=A.isTooltipActive,T=A.tooltipAxis,L=A.activeTooltipIndex,S=A.activeLabel,C=x.props.children,k=Jt(C,Hn),D=M.props,R=D.points,B=D.isRange,F=D.baseLine,V=M.item.type.defaultProps!==void 0?J(J({},M.item.type.defaultProps),M.item.props):M.item.props,I=V.activeDot,X=V.hide,H=V.activeBar,q=V.activeShape,te=!!(!X&&P&&k&&(I||H||q)),Q={};N!=="axis"&&k&&k.props.trigger==="click"?Q={onClick:ku(x.handleItemMouseEnter,j.props.onClick)}:N!=="axis"&&(Q={onMouseLeave:ku(x.handleItemMouseLeave,j.props.onMouseLeave),onMouseEnter:ku(x.handleItemMouseEnter,j.props.onMouseEnter)});var Z=v.cloneElement(j,J(J({},M.props),Q));function Y(nn){return typeof T.dataKey=="function"?T.dataKey(nn.payload):null}if(te)if(L>=0){var K,ne;if(T.dataKey&&!T.allowDuplicatedCategory){var z=typeof T.dataKey=="function"?Y:"payload.".concat(T.dataKey.toString());K=kh(R,z,S),ne=B&&F&&kh(F,z,S)}else K=R==null?void 0:R[L],ne=B&&F&&F[L];if(q||H){var ye=j.props.activeIndex!==void 0?j.props.activeIndex:L;return[v.cloneElement(j,J(J(J({},M.props),Q),{},{activeIndex:ye})),null,null]}if(!Re(K))return[Z].concat(Ji(x.renderActivePoints({item:M,activePoint:K,basePoint:ne,childIndex:L,isRange:B})))}else{var fe,Oe=(fe=x.getItemByXY(x.state.activeCoordinate))!==null&&fe!==void 0?fe:{graphicalItem:Z},Ae=Oe.graphicalItem,et=Ae.item,Wt=et===void 0?j:et,Xt=Ae.childIndex,Mt=J(J(J({},M.props),Q),{},{activeIndex:Xt});return[v.cloneElement(Wt,Mt),null,null]}return B?[Z,null,null]:[Z,null]}),xe(x,"renderCustomized",function(j,O,E){return v.cloneElement(j,J(J({key:"recharts-customized-".concat(E)},x.props),x.state))}),xe(x,"renderMap",{CartesianGrid:{handler:pd,once:!0},ReferenceArea:{handler:x.renderReferenceElement},ReferenceLine:{handler:pd},ReferenceDot:{handler:x.renderReferenceElement},XAxis:{handler:pd},YAxis:{handler:pd},Brush:{handler:x.renderBrush,once:!0},Bar:{handler:x.renderGraphicChild},Line:{handler:x.renderGraphicChild},Area:{handler:x.renderGraphicChild},Radar:{handler:x.renderGraphicChild},RadialBar:{handler:x.renderGraphicChild},Scatter:{handler:x.renderGraphicChild},Pie:{handler:x.renderGraphicChild},Funnel:{handler:x.renderGraphicChild},Tooltip:{handler:x.renderCursor,once:!0},PolarGrid:{handler:x.renderPolarGrid,once:!0},PolarAngleAxis:{handler:x.renderPolarAxis},PolarRadiusAxis:{handler:x.renderPolarAxis},Customized:{handler:x.renderCustomized}}),x.clipPathId="".concat((w=b.id)!==null&&w!==void 0?w:$l("recharts"),"-clip"),x.throttleTriggeredAfterMouseMove=Rd(x.triggeredAfterMouseMove,(_=b.throttleDelay)!==null&&_!==void 0?_:1e3/60),x.state={},x}return Uce(g,m),$ce(g,[{key:"componentDidMount",value:function(){var b,w;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(b=this.props.margin.left)!==null&&b!==void 0?b:0,top:(w=this.props.margin.top)!==null&&w!==void 0?w:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var b=this.props,w=b.children,_=b.data,x=b.height,j=b.layout,O=Jt(w,Hn);if(O){var E=O.props.defaultIndex;if(!(typeof E!="number"||E<0||E>this.state.tooltipTicks.length-1)){var M=this.state.tooltipTicks[E]&&this.state.tooltipTicks[E].value,N=ag(this.state,_,E,M),A=this.state.tooltipTicks[E].coordinate,P=(this.state.offset.top+x)/2,T=j==="horizontal",L=T?{x:A,y:P}:{y:A,x:P},S=this.state.formattedGraphicalItems.find(function(k){var D=k.item;return D.type.name==="Scatter"});S&&(L=J(J({},L),S.props.points[E].tooltipPosition),N=S.props.points[E].tooltipPayload);var C={activeTooltipIndex:E,isTooltipActive:!0,activeLabel:M,activePayload:N,activeCoordinate:L};this.setState(C),this.renderCursor(O),this.accessibilityManager.setIndex(E)}}}},{key:"getSnapshotBeforeUpdate",value:function(b,w){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==w.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==b.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==b.margin){var _,x;this.accessibilityManager.setDetails({offset:{left:(_=this.props.margin.left)!==null&&_!==void 0?_:0,top:(x=this.props.margin.top)!==null&&x!==void 0?x:0}})}return null}},{key:"componentDidUpdate",value:function(b){Lh([Jt(b.children,Hn)],[Jt(this.props.children,Hn)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var b=Jt(this.props.children,Hn);if(b&&typeof b.props.shared=="boolean"){var w=b.props.shared?"axis":"item";return a.indexOf(w)>=0?w:o}return o}},{key:"getMouseInfo",value:function(b){if(!this.container)return null;var w=this.container,_=w.getBoundingClientRect(),x=zG(_),j={chartX:Math.round(b.pageX-x.left),chartY:Math.round(b.pageY-x.top)},O=_.width/w.offsetWidth||1,E=this.inRange(j.chartX,j.chartY,O);if(!E)return null;var M=this.state,N=M.xAxisMap,A=M.yAxisMap,P=this.getTooltipEventType();if(P!=="axis"&&N&&A){var T=Lr(N).scale,L=Lr(A).scale,S=T&&T.invert?T.invert(j.chartX):null,C=L&&L.invert?L.invert(j.chartY):null;return J(J({},j),{},{xValue:S,yValue:C})}var k=gN(this.state,this.props.data,this.props.layout,E);return k?J(J({},j),k):null}},{key:"inRange",value:function(b,w){var _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,x=this.props.layout,j=b/_,O=w/_;if(x==="horizontal"||x==="vertical"){var E=this.state.offset,M=j>=E.left&&j<=E.left+E.width&&O>=E.top&&O<=E.top+E.height;return M?{x:j,y:O}:null}var N=this.state,A=N.angleAxisMap,P=N.radiusAxisMap;if(A&&P){var T=Lr(A);return YC({x:j,y:O},T)}return null}},{key:"parseEventsOfWrapper",value:function(){var b=this.props.children,w=this.getTooltipEventType(),_=Jt(b,Hn),x={};_&&w==="axis"&&(_.props.trigger==="click"?x={onClick:this.handleClick}:x={onMouseEnter:this.handleMouseEnter,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd});var j=Fl(this.props,this.handleOuterEvent);return J(J({},j),x)}},{key:"addListener",value:function(){tg.on(ng,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){tg.removeListener(ng,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(b,w,_){for(var x=this.state.formattedGraphicalItems,j=0,O=x.length;j<O;j++){var E=x[j];if(E.item===b||E.props.key===b.key||w===mr(E.item.type)&&_===E.childIndex)return E}return null}},{key:"renderClipPath",value:function(){var b=this.clipPathId,w=this.state.offset,_=w.left,x=w.top,j=w.height,O=w.width;return $.createElement("defs",null,$.createElement("clipPath",{id:b},$.createElement("rect",{x:_,y:x,height:j,width:O})))}},{key:"getXScales",value:function(){var b=this.state.xAxisMap;return b?Object.entries(b).reduce(function(w,_){var x=lN(_,2),j=x[0],O=x[1];return J(J({},w),{},xe({},j,O.scale))},{}):null}},{key:"getYScales",value:function(){var b=this.state.yAxisMap;return b?Object.entries(b).reduce(function(w,_){var x=lN(_,2),j=x[0],O=x[1];return J(J({},w),{},xe({},j,O.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(b){var w;return(w=this.state.xAxisMap)===null||w===void 0||(w=w[b])===null||w===void 0?void 0:w.scale}},{key:"getYScaleByAxisId",value:function(b){var w;return(w=this.state.yAxisMap)===null||w===void 0||(w=w[b])===null||w===void 0?void 0:w.scale}},{key:"getItemByXY",value:function(b){var w=this.state,_=w.formattedGraphicalItems,x=w.activeItem;if(_&&_.length)for(var j=0,O=_.length;j<O;j++){var E=_[j],M=E.props,N=E.item,A=N.type.defaultProps!==void 0?J(J({},N.type.defaultProps),N.props):N.props,P=mr(N.type);if(P==="Bar"){var T=(M.data||[]).find(function(k){return Fre(b,k)});if(T)return{graphicalItem:E,payload:T}}else if(P==="RadialBar"){var L=(M.data||[]).find(function(k){return YC(b,k)});if(L)return{graphicalItem:E,payload:L}}else if(qu(E,x)||Hu(E,x)||Ys(E,x)){var S=$oe({graphicalItem:E,activeTooltipItem:x,itemData:A.data}),C=A.activeIndex===void 0?S:A.activeIndex;return{graphicalItem:J(J({},E),{},{childIndex:C}),payload:Ys(E,x)?A.data[S]:E.props.data[S]}}}return null}},{key:"render",value:function(){var b=this;if(!oE(this))return null;var w=this.props,_=w.children,x=w.className,j=w.width,O=w.height,E=w.style,M=w.compact,N=w.title,A=w.desc,P=uN(w,Ace),T=Ie(P,!1);if(M)return $.createElement(SP,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},$.createElement($h,Zi({},T,{width:j,height:O,title:N,desc:A}),this.renderClipPath(),aE(_,this.renderMap)));if(this.props.accessibilityLayer){var L,S;T.tabIndex=(L=this.props.tabIndex)!==null&&L!==void 0?L:0,T.role=(S=this.props.role)!==null&&S!==void 0?S:"application",T.onKeyDown=function(k){b.accessibilityManager.keyboardEvent(k)},T.onFocus=function(){b.accessibilityManager.focus()}}var C=this.parseEventsOfWrapper();return $.createElement(SP,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},$.createElement("div",Zi({className:Le("recharts-wrapper",x),style:J({position:"relative",cursor:"default",width:j,height:O},E)},C,{ref:function(k){b.container=k}}),$.createElement($h,Zi({},T,{width:j,height:O,title:N,desc:A,style:Yce}),this.renderClipPath(),aE(_,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(v.Component);xe(f,"displayName",t),xe(f,"defaultProps",J({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},u)),xe(f,"getDerivedStateFromProps",function(m,g){var b=m.dataKey,w=m.data,_=m.children,x=m.width,j=m.height,O=m.layout,E=m.stackOffset,M=m.margin,N=g.dataStartIndex,A=g.dataEndIndex;if(g.updateId===void 0){var P=vN(m);return J(J(J({},P),{},{updateId:0},p(J(J({props:m},P),{},{updateId:0}),g)),{},{prevDataKey:b,prevData:w,prevWidth:x,prevHeight:j,prevLayout:O,prevStackOffset:E,prevMargin:M,prevChildren:_})}if(b!==g.prevDataKey||w!==g.prevData||x!==g.prevWidth||j!==g.prevHeight||O!==g.prevLayout||E!==g.prevStackOffset||!xi(M,g.prevMargin)){var T=vN(m),L={chartX:g.chartX,chartY:g.chartY,isTooltipActive:g.isTooltipActive},S=J(J({},gN(g,w,O)),{},{updateId:g.updateId+1}),C=J(J(J({},T),L),S);return J(J(J({},C),p(J({props:m},C),g)),{},{prevDataKey:b,prevData:w,prevWidth:x,prevHeight:j,prevLayout:O,prevStackOffset:E,prevMargin:M,prevChildren:_})}if(!Lh(_,g.prevChildren)){var k,D,R,B,F=Jt(_,Fi),V=F&&(k=(D=F.props)===null||D===void 0?void 0:D.startIndex)!==null&&k!==void 0?k:N,I=F&&(R=(B=F.props)===null||B===void 0?void 0:B.endIndex)!==null&&R!==void 0?R:A,X=V!==N||I!==A,H=!Re(w),q=H&&!X?g.updateId:g.updateId+1;return J(J({updateId:q},p(J(J({props:m},g),{},{updateId:q,dataStartIndex:V,dataEndIndex:I}),g)),{},{prevChildren:_,dataStartIndex:V,dataEndIndex:I})}return null}),xe(f,"renderActiveDot",function(m,g,b){var w;return v.isValidElement(m)?w=v.cloneElement(m,g):Ce(m)?w=m(g):w=$.createElement(V2,g),$.createElement(mt,{className:"recharts-active-dot",key:b},w)});var y=v.forwardRef(function(m,g){return $.createElement(f,Zi({},m,{ref:g}))});return y.displayName=f.displayName,y},ale=ile({chartName:"BarChart",GraphicalChild:So,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:cd},{axisType:"yAxis",AxisComp:Zy}],formatAxisMap:cae});const sle={light:"",dark:".dark"},xN=v.createContext(null);function wN(){const e=v.useContext(xN);if(!e)throw new Error("useChart must be used within a <ChartContainer />");return e}const _N=v.forwardRef(({id:e,className:t,children:n,config:r,...o},i)=>{const a=v.useId(),s=`chart-${e||a.replace(/:/g,"")}`;return h.jsx(xN.Provider,{value:{config:r},children:h.jsxs("div",{"data-chart":s,ref:i,className:re("flex aspect-video justify-center text-xs",t),...o,children:[h.jsx(cle,{id:s,config:r}),h.jsx(IG,{children:n})]})})});_N.displayName="Chart";const cle=({id:e,config:t})=>{const n=Object.entries(t).filter(([r,o])=>o.theme||o.color);return n.length?h.jsx("style",{dangerouslySetInnerHTML:{__html:Object.entries(sle).map(([r,o])=>`
${o} [data-chart=${e}] {
${n.map(([i,a])=>{var c;const s=((c=a.theme)==null?void 0:c[r])||a.color;return s?`  --color-${i}: ${s};`:null}).join(`
`)}
}
`).join(`
`)}}):null},lle=Hn,jN=v.forwardRef(({active:e,payload:t,className:n,indicator:r="dot",hideLabel:o=!1,hideIndicator:i=!1,label:a,labelFormatter:s,labelClassName:c,formatter:l,color:u,nameKey:d,labelKey:p},f)=>{const{config:y}=wN(),m=v.useMemo(()=>{var j;if(o||!(t!=null&&t.length))return null;const[b]=t,w=`${p||b.dataKey||b.name||"value"}`,_=sg(y,b,w),x=!p&&typeof a=="string"?((j=y[a])==null?void 0:j.label)||a:_==null?void 0:_.label;return s?h.jsx("div",{className:re("font-medium",c),children:s(x,t)}):x?h.jsx("div",{className:re("font-medium",c),children:x}):null},[a,s,t,o,c,y,p]);if(!e||!(t!=null&&t.length))return null;const g=t.length===1&&r!=="dot";return h.jsxs("div",{ref:f,className:re("grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl",n),children:[g?null:m,h.jsx("div",{className:"grid gap-1.5",children:t.map((b,w)=>{const _=`${d||b.name||b.dataKey||"value"}`,x=sg(y,b,_),j=u||b.payload.fill||b.color;return h.jsx("div",{className:re("flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground",r==="dot"&&"items-center"),children:l&&(b==null?void 0:b.value)!==void 0&&b.name?l(b.value,b.name,b,w,b.payload):h.jsxs(h.Fragment,{children:[x!=null&&x.icon?h.jsx(x.icon,{}):!i&&h.jsx("div",{className:re("shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]",{"h-2.5 w-2.5":r==="dot","w-1":r==="line","w-0 border-[1.5px] border-dashed bg-transparent":r==="dashed","my-0.5":g&&r==="dashed"}),style:{"--color-bg":j,"--color-border":j}}),h.jsxs("div",{className:re("flex flex-1 justify-between leading-none",g?"items-end":"items-center"),children:[h.jsxs("div",{className:"grid gap-1.5",children:[g?m:null,h.jsx("span",{className:"text-muted-foreground",children:(x==null?void 0:x.label)||b.name})]}),b.value&&h.jsx("span",{className:"font-mono font-medium tabular-nums text-foreground",children:b.value.toLocaleString()})]})]})},b.dataKey)})})]})});jN.displayName="ChartTooltip";const ule=v.forwardRef(({className:e,hideIcon:t=!1,payload:n,verticalAlign:r="bottom",nameKey:o},i)=>{const{config:a}=wN();return n!=null&&n.length?h.jsx("div",{ref:i,className:re("flex items-center justify-center gap-4",r==="top"?"pb-3":"pt-3",e),children:n.map(s=>{const c=`${o||s.dataKey||"value"}`,l=sg(a,s,c);return h.jsxs("div",{className:re("flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground"),children:[l!=null&&l.icon&&!t?h.jsx(l.icon,{}):h.jsx("div",{className:"h-2 w-2 shrink-0 rounded-[2px]",style:{backgroundColor:s.color}}),l==null?void 0:l.label]},s.value)})}):null});ule.displayName="ChartLegend";function sg(e,t,n){if(typeof t!="object"||t===null)return;const r="payload"in t&&typeof t.payload=="object"&&t.payload!==null?t.payload:void 0;let o=n;return n in t&&typeof t[n]=="string"?o=t[n]:r&&n in r&&typeof r[n]=="string"&&(o=r[n]),o in e?e[o]:e[n]}const ON=e=>{const t=["Bytes","KB","MB","GB","TB"];if(e===void 0)return"Unknown size";if(e===0)return"0 Byte";const n=Math.floor(Math.log(e)/Math.log(1024));return`${Math.round(e/Math.pow(1024,n))} ${t[n]}`},dle=v.memo(()=>{const{t:e}=je("flows"),[t,n]=v.useState(),r=An(y=>y.cachedLLMURLs),o=It(y=>y.currentSession),[i,a]=v.useState(),[s,c]=v.useState(""),[l,u]=v.useState(),d=v.useMemo(()=>({nodes:{label:e("session_info_node.entities.nodes"),color:"#2563eb"},edges:{label:e("session_info_node.entities.edges"),color:"#34d399"},threads:{label:e("session_info_node.entities.threads"),color:"#fbbf24"},llms:{label:e("session_info_node.entities.llms"),color:"#f87171"},prompts:{label:e("session_info_node.entities.prompts"),color:"#a78bfa"},tools:{label:e("session_info_node.entities.tools"),color:"#ffcccb"},schemas:{label:e("session_info_node.entities.schemas"),color:"#ffb6c1"},vectorDatabases:{label:e("session_info_node.entities.vector_databases"),color:"#ff69b4"},jsonlDatas:{label:e("session_info_node.entities.jsonl_data"),color:"#ff1493"},csvDatas:{label:e("session_info_node.entities.csv_data"),color:"#db7093"}}),[e]);v.useEffect(()=>{an(async()=>{const{functionCallingModelIds:y,prebuiltAppConfig:m}=await import("./index-CBYutmqk.js").then(async g=>(await g.__tla,g));return{functionCallingModelIds:y,prebuiltAppConfig:m}},__vite__mapDeps([0,1,2,3])).then(({functionCallingModelIds:y,prebuiltAppConfig:m})=>{n(r==null?void 0:r.map(g=>{const b=m.model_list.find(w=>g.includes(w.model));if(b)return{model_id:(b==null?void 0:b.model_id)||"",info:b,isFunctionCalling:y.includes((b==null?void 0:b.model_id)||"")}}))})},[r,o==null?void 0:o.id]);const p=v.useCallback(async()=>{navigator.storage.estimate().then(y=>{y&&c(e("session_info_node.used_bytes",{used:ON(y.usage),total:ON(y==null?void 0:y.quota)}))}),o!=null&&o.id&&(Promise.all([ue("FlowNode").findOne({where:{session_id:o==null?void 0:o.id},order:{updated_at:"DESC"}}),ue("FlowEdge").findOne({where:{session_id:o==null?void 0:o.id},order:{updated_at:"DESC"}}),ue("Thread").findOne({where:{session_id:o==null?void 0:o.id},order:{updated_at:"DESC"}}),ue("Prompt").findOne({where:{session_id:o==null?void 0:o.id},order:{updated_at:"DESC"}}),ue("LLM").findOne({where:{session_id:o==null?void 0:o.id},order:{updated_at:"DESC"}}),ue("Schema").findOne({where:{session_id:o==null?void 0:o.id},order:{updated_at:"DESC"}}),ue("ToolDefinition").findOne({where:{session_id:o==null?void 0:o.id},order:{updated_at:"DESC"}}),ue("VectorDatabase").findOne({where:{session_id:o==null?void 0:o.id},order:{updated_at:"DESC"}}),ue("JSONLData").findOne({where:{session_id:o==null?void 0:o.id},order:{updated_at:"DESC"}}),ue("CSVData").findOne({where:{session_id:o==null?void 0:o.id},order:{updated_at:"DESC"}})]).then(y=>{const m=y.reduce((g,b)=>b!=null&&b.updated_at&&(!g||new Date(b.updated_at)>g)?new Date(b.updated_at):g,o.updated_at?new Date(o.updated_at):void 0);a(m)}),Promise.all([ue("FlowNode").count({where:{session_id:o==null?void 0:o.id}}),ue("FlowEdge").count({where:{session_id:o==null?void 0:o.id}}),ue("Thread").count({where:{session_id:o==null?void 0:o.id}}),ue("Prompt").count({where:{session_id:o==null?void 0:o.id}}),ue("LLM").count({where:{session_id:o==null?void 0:o.id}}),ue("ToolDefinition").count({where:{session_id:o==null?void 0:o.id}}),ue("Schema").count({where:{session_id:o==null?void 0:o.id}}),ue("VectorDatabase").count({where:{session_id:o==null?void 0:o.id}}),ue("JSONLData").count({where:{session_id:o==null?void 0:o.id}}),ue("CSVData").count({where:{session_id:o==null?void 0:o.id}})]).then(([y,m,g,b,w,_,x,j,O,E])=>{u([{name:e("session_info_node.count_info.title"),nodes:y||0,edges:m||0,threads:g||0,prompts:b||0,llms:w||0,tools:_||0,schemas:x||0,vectorDatabases:j||0,jsonlDatas:O||0,csvDatas:E||0}])}))},[o==null?void 0:o.id,o==null?void 0:o.updated_at,e]),f=v.useCallback(()=>{p()},[p]);return v.useEffect(()=>{p()},[p]),h.jsxs(ft,{className:"w-96",children:[h.jsxs(Bt,{children:[h.jsx(Zt,{children:e("session_info_node.title")}),h.jsx(Kx,{children:i||o!=null&&o.updated_at?Zde(i||(o==null?void 0:o.updated_at)).fromNow():""})]}),h.jsxs($t,{className:"grid gap-4",children:[h.jsx("div",{className:"flex items-center space-x-4 rounded-md border p-4",children:h.jsxs("div",{className:"flex-1 space-y-1",children:[h.jsx("p",{className:"text-sm font-medium leading-none",children:e("session_info_node.disk_size")}),h.jsx("p",{className:"text-sm text-muted-foreground",children:s})]})}),h.jsx("div",{className:"flex items-center space-x-4 rounded-md border p-4",children:h.jsxs("div",{className:"flex-1 space-y-1",children:[h.jsxs("div",{className:"text-sm font-medium leading-none",children:[e("session_info_node.cached_llms"),h.jsx(zt,{className:"ml-2",children:(t==null?void 0:t.length)||0})]}),t==null?void 0:t.map(y=>h.jsxs("div",{className:"text-sm text-muted-foreground gap-1",children:[y==null?void 0:y.model_id,h.jsx("div",{className:"max-w-full gap-1 flex flex-wrap mt-1",children:h.jsx(xl,{model:y==null?void 0:y.info,isFunctionCalling:(y==null?void 0:y.isFunctionCalling)||!1,isCached:!0})})]},y==null?void 0:y.model_id))]})}),h.jsx("div",{children:h.jsx(_N,{config:d,className:"min-h-28 w-full",children:h.jsxs(ale,{accessibilityLayer:!0,data:l,children:[h.jsx(KP,{vertical:!1}),h.jsx(cd,{dataKey:"name",tickLine:!1,tickMargin:10,axisLine:!1}),h.jsx(lle,{content:h.jsx(jN,{})}),Object.entries(d).map(([y,m])=>h.jsx(So,{dataKey:y,fill:m.color,radius:4},y))]})})})]}),h.jsx(Nr,{children:h.jsxs(vt,{className:"w-full",onClick:f,children:[h.jsx(ge,{size:24,name:"refresh-ccw"}),e("session_info_node.reload")]})})]})}),ple=e=>{const t=(n,r=null)=>{let o=`{
`;return n.filter(i=>i.parent_id===r).forEach(i=>{if(i.type==="object"){const a=e.filter(c=>c.parent_id===i.id),s=t(a,i.id);o+=`  ${i.name}${i.required?"":"?"}: ${s}
`}else o+=`  // ${i.description||""}
  ${i.name}${i.required?"":"?"}: ${i.type};
`}),o+="}",o};return t(e)},fle=e=>{const t=(r,o=null)=>{let i="";return r.filter(a=>a.parent_id===o).forEach(a=>{if(a.type==="object"){const s=t(r,a.id);i+=`    ${a.name}: z.object({
${s}    })${a.required?"":".optional()"}.describe('${a.description||""}'),
`}else i+=`    ${a.name}: z.${a.type}()${a.required?"":".optional()"}.describe('${a.description||""}'),
`}),i};let n=`const schema = z.object({
`;return n+=t(e),n+="});",n};var cg="Tabs",[hle,Vpe]=aa(cg,[la]),EN=la(),[mle,lg]=hle(cg),SN=v.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:o,defaultValue:i,orientation:a="horizontal",dir:s,activationMode:c="automatic",...l}=e,u=sc(s),[d,p]=kn({prop:r,onChange:o,defaultProp:i});return h.jsx(mle,{scope:n,baseId:Dt(),value:d,onValueChange:p,orientation:a,dir:u,activationMode:c,children:h.jsx(ke.div,{dir:u,"data-orientation":a,...l,ref:t})})});SN.displayName=cg;var MN="TabsList",CN=v.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...o}=e,i=lg(MN,n),a=EN(n);return h.jsx(zg,{asChild:!0,...a,orientation:i.orientation,dir:i.dir,loop:r,children:h.jsx(ke.div,{role:"tablist","aria-orientation":i.orientation,...o,ref:t})})});CN.displayName=MN;var PN="TabsTrigger",NN=v.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:o=!1,...i}=e,a=lg(PN,n),s=EN(n),c=TN(a.baseId,r),l=IN(a.baseId,r),u=r===a.value;return h.jsx(Vg,{asChild:!0,...s,focusable:!o,active:u,children:h.jsx(ke.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":l,"data-state":u?"active":"inactive","data-disabled":o?"":void 0,disabled:o,id:c,...i,ref:t,onMouseDown:Me(e.onMouseDown,d=>{!o&&d.button===0&&d.ctrlKey===!1?a.onValueChange(r):d.preventDefault()}),onKeyDown:Me(e.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&a.onValueChange(r)}),onFocus:Me(e.onFocus,()=>{const d=a.activationMode!=="manual";!u&&!o&&d&&a.onValueChange(r)})})})});NN.displayName=PN;var kN="TabsContent",AN=v.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:o,children:i,...a}=e,s=lg(kN,n),c=TN(s.baseId,r),l=IN(s.baseId,r),u=r===s.value,d=v.useRef(u);return v.useEffect(()=>{const p=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(p)},[]),h.jsx(Sd,{present:o||u,children:({present:p})=>h.jsx(ke.div,{"data-state":u?"active":"inactive","data-orientation":s.orientation,role:"tabpanel","aria-labelledby":c,hidden:!p,id:l,tabIndex:0,...a,ref:t,style:{...e.style,animationDuration:d.current?"0s":void 0},children:p&&i})})});AN.displayName=kN;function TN(e,t){return`${e}-trigger-${t}`}function IN(e,t){return`${e}-content-${t}`}var yle=SN,DN=CN,RN=NN,LN=AN;const BN=yle,ug=v.forwardRef(({className:e,...t},n)=>h.jsx(DN,{ref:n,className:re("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));ug.displayName=DN.displayName;const ea=v.forwardRef(({className:e,...t},n)=>h.jsx(RN,{ref:n,className:re("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));ea.displayName=RN.displayName;const ta=v.forwardRef(({className:e,...t},n)=>h.jsx(LN,{ref:n,className:re("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));ta.displayName=LN.displayName;const gle=e=>{const t=v.useCallback(async({edgeId:n})=>{try{return{deleteEdgeId:n}}catch{return{deleteEdgeId:n}}},[]);Ut(e,t)},vle=v.memo(e=>{var c,l;const{t}=je("flows"),{id:n,data:r,isConnectable:o}=e,i=v.useRef(!1),a=jt(n),s=ve(u=>u.updateNodes);return gle(n),v.useEffect(()=>{var d;const u=r==null?void 0:r.entity;!u||!a||i.current||(d=u==null?void 0:u.schema_items)!=null&&d.length||r.loaded||(i.current=!0,ue("SchemaItem").find({where:{schema_id:u.id}}).then(p=>{s([{id:a.id,type:"replace",item:{...a,data:{...(a==null?void 0:a.data)||{},loaded:!0,entity:{...r.entity,schema_items:p}}}}])}).finally(()=>{i.current=!1}))},[r.entity,r.loaded,a,s]),h.jsxs("div",{children:[h.jsxs("div",{children:[h.jsx(Vt,{id:n}),h.jsxs(BN,{defaultValue:"account",className:"w-[400px]",children:[h.jsxs(ug,{className:"grid w-full grid-cols-2",children:[h.jsx(ea,{value:"account",children:t("schema_node.typescript")}),h.jsx(ea,{value:"password",children:t("schema_node.zod")})]}),h.jsx(ta,{value:"account",children:h.jsx(ft,{className:"p-4",children:h.jsx("pre",{children:ple(((c=r==null?void 0:r.entity)==null?void 0:c.schema_items)||[])})})}),h.jsx(ta,{value:"password",children:h.jsx(ft,{className:"p-4",children:h.jsx("pre",{children:fle(((l=r==null?void 0:r.entity)==null?void 0:l.schema_items)||[])})})})]})]}),h.jsx(De,{type:"source",position:oe.Bottom,id:"a",isConnectable:o})]})}),$N=({className:e,...t})=>h.jsx("nav",{role:"navigation","aria-label":"pagination",className:re("mx-auto flex w-full justify-center",e),...t});$N.displayName="Pagination";const FN=v.forwardRef(({className:e,...t},n)=>h.jsx("ul",{ref:n,className:re("flex flex-row items-center gap-1",e),...t}));FN.displayName="PaginationContent";const na=v.forwardRef(({className:e,...t},n)=>h.jsx("li",{ref:n,className:re("",e),...t}));na.displayName="PaginationItem";const hd=({className:e,isActive:t,size:n="icon",...r})=>h.jsx("a",{"aria-current":t?"page":void 0,className:re(kpe({variant:t?"outline":"ghost",size:n}),e),...r});hd.displayName="PaginationLink";const zN=({className:e,...t})=>{const{t:n}=je("atoms");return h.jsxs(hd,{"aria-label":"Go to previous page",size:"default",className:re("gap-1 pl-2.5",e),...t,children:[h.jsx(ge,{name:"chevron-left",className:"h-4 w-4"}),h.jsx("span",{children:n("pagination.previous")})]})};zN.displayName="PaginationPrevious";const VN=({className:e,...t})=>{const{t:n}=je("atoms");return h.jsxs(hd,{"aria-label":"Go to next page",size:"default",className:re("gap-1 pr-2.5",e),...t,children:[h.jsx("span",{children:n("pagination.next")}),h.jsx(ge,{name:"chevron-right",className:"h-4 w-4"})]})};VN.displayName="PaginationNext";const dg=({className:e,...t})=>{const{t:n}=je("atoms");return h.jsxs("span",{"aria-hidden":!0,className:re("flex h-9 w-9 items-center justify-center",e),...t,children:[h.jsx(ge,{name:"ellipsis",className:"h-4 w-4"}),h.jsx("span",{className:"sr-only",children:n("pagination.more_pages")})]})};dg.displayName="PaginationEllipsis";const UN=v.memo(e=>{const{data:t,headers:n,limitLengthByColumns:r,showPerPage:o=7,paginationShowLimit:i=1,contentLengthLimit:a=64}=e,[s,c]=v.useState({page:1,maxPage:1}),l=To(GO);v.useEffect(()=>{c(f=>({...f,maxPage:Math.ceil(t.length/o)}))},[t.length,o]);const u=v.useMemo(()=>t.slice((s.page-1)*o,s.page*o),[t,s.page,o]),d=v.useMemo(()=>{let f=!1,y=!1;return h.jsx($N,{className:"mt-4 mb-4 ml-4 mr-4 w-full",children:h.jsxs(FN,{children:[s.page>1?h.jsx(na,{onClick:()=>c(m=>({...m,page:m.page-1})),children:h.jsx(zN,{})}):null,Array.from({length:s.maxPage},(m,g)=>{const b=g+1,w=g===0||g===s.maxPage-1;return!w&&b>s.page+i&&y?null:!w&&b>s.page+i?(y=!0,h.jsx(na,{children:h.jsx(dg,{})},g)):!w&&b<s.page-i&&f?null:!w&&b<s.page-i?(f=!0,h.jsx(na,{children:h.jsx(dg,{})},g)):h.jsx(na,{onClick:()=>c(_=>({..._,page:b})),children:h.jsx(hd,{isActive:g+1===s.page,children:g+1})},g)}),s.page<s.maxPage?h.jsx(na,{onClick:()=>c(m=>({...m,page:m.page+1})),children:h.jsx(VN,{})}):null]})})},[s.maxPage,s.page,i]),p=(f,y)=>{if(!f)return;const m=Array.isArray(f)?f:n.map(g=>f[g]);return h.jsxs(po,{children:[h.jsx(hi,{children:h.jsx("div",{className:"font-bold",children:y+1})}),m.map((g,b)=>{const w=typeof g=="string"?g:JSON.stringify(g),_=n[b],x=(r==null?void 0:r[_])||a,j=w.length>x;return h.jsx(hi,{className:"p-4",children:h.jsxs("div",{onClick:j?()=>l.show({title:_,content:w}):void 0,className:"flex gap-4",children:[j?`${w.substring(0,x)}...`:w,j?h.jsx(ge,{className:"w-6 mt-[-2px]",name:"chevron-right"}):null]})},`${b}`)})]},`${y}`)};return h.jsxs(h.Fragment,{children:[h.jsxs(Ol,{className:"w-full",children:[h.jsx(El,{children:h.jsxs(po,{children:[h.jsx(fi,{},"index"),n?n.map(f=>h.jsx(fi,{children:h.jsx("div",{className:"font-bold",children:f})},f)):void 0]})}),h.jsx(Sl,{children:u!=null&&u.length?u==null?void 0:u.map(p):void 0})]}),d]})}),ble=v.memo(e=>{var i,a;const{id:t,data:n,isConnectable:r}=e,o=v.useMemo(()=>{if(!(n!=null&&n.entity))return{headers:[],rows:[]};const s=$k(n.entity.csv);return{headers:Lg(n.entity.headers),rows:s.map(c=>Lg(c))}},[n==null?void 0:n.entity]);return h.jsxs("div",{children:[h.jsx(De,{type:"target",position:oe.Top,isConnectable:r}),h.jsxs("div",{children:[h.jsx(Vt,{id:t}),h.jsxs(ft,{className:"min-w-32 min-h-16 p-4",children:[h.jsx(Bt,{className:"!p-0",children:h.jsxs("div",{className:"pt-2 flex !flex-row",children:[h.jsx(ge,{name:"file-spreadsheet",className:"mr-2"}),h.jsxs($e,{className:"!font-medium leading-none tracking-tight pr-8",children:[G.CSVData," ",(i=o==null?void 0:o.rows)!=null&&i.length?`(${((a=o==null?void 0:o.rows)==null?void 0:a.length)||0})`:""]})]})}),h.jsx($t,{className:"pb-0",children:h.jsx(UN,{data:o.rows,headers:o.headers})})]})]}),h.jsx(De,{type:"source",position:oe.Bottom,id:"a",isConnectable:r})]})}),xle=e=>{const t=ve(r=>r.createOrUpdateFlowEdge),n=v.useCallback(async({edgeId:r,source:o,target:i,connection:a})=>{try{if((o==null?void 0:o.type)===G.Schema&&(i==null?void 0:i.type)===G.ToolDefinition){await t({source:a.source,target:a.target,sourceHandle:a.sourceHandle,targetHandle:a.targetHandle});return}return{deleteEdgeId:r}}catch{return{deleteEdgeId:r}}},[t]);Ut(e,n)},wle=v.memo(({id:e,data:t,isConnectable:n})=>{var r,o;return xle(e),h.jsxs("div",{children:[h.jsx(De,{type:"target",position:oe.Top,isConnectable:n}),h.jsx("div",{children:h.jsxs(pr,{className:"flex justify-center",children:[h.jsx(ge,{size:24,name:"wrench"}),h.jsxs("div",{className:"ml-2",children:[h.jsx(fr,{children:`${((r=t.entity)==null?void 0:r.name)||""}`}),h.jsx(mi,{children:`${((o=t.entity)==null?void 0:o.description)||""}`})]})]})}),h.jsx(De,{type:"source",position:oe.Bottom,id:"a",isConnectable:n})]})}),_le=e=>{const t=v.useCallback(async({edgeId:n})=>({deleteEdgeId:n}),[]);Ut(e,t)},jle=v.memo(e=>{const{id:t,data:n,isConnectable:r}=e;return _le(t),h.jsxs("div",{children:[h.jsx(De,{type:"target",position:oe.Top,isConnectable:r}),h.jsx("div",{children:h.jsxs(pr,{className:"flex justify-center max-w-80",variant:"default",children:[h.jsx(Ka,{name:n.model||"brain",className:"w-7 h-7"}),h.jsx("div",{className:"ml-2 pr-4 flex items-center",children:h.jsx(fr,{children:`${n.model||""}`})})]})}),h.jsx(De,{type:"source",position:oe.Bottom,id:"a",isConnectable:r})]})});class Ole{async loadAndSplit(t){if(t===void 0)throw new Error("You must pass a text splitter to use this method.");const n=await this.load();return t.invoke(n)}}class Ele extends Ole{constructor(t,{splitPages:n=!0,pdfjs:r=Sle,parsedItemSeparator:o=""}={}){super(),Object.defineProperty(this,"blob",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"splitPages",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"pdfjs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"parsedItemSeparator",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.blob=t,this.splitPages=n??this.splitPages,this.pdfjs=r,this.parsedItemSeparator=o}async load(){const{getDocument:t,version:n}=await this.pdfjs(),r=await t({data:new Uint8Array(await this.blob.arrayBuffer()),useWorkerFetch:!1,isEvalSupported:!1,useSystemFonts:!0}).promise,o=await r.getMetadata().catch(()=>null),i=[];for(let a=1;a<=r.numPages;a+=1){const s=await(await r.getPage(a)).getTextContent();if(s.items.length===0)continue;let c;const l=[];for(const d of s.items)"str"in d&&(c===d.transform[5]||!c?l.push(d.str):l.push(`
${d.str}`),c=d.transform[5]);const u=l.join(this.parsedItemSeparator);i.push(new Nd({pageContent:u,metadata:{pdf:{version:n,info:o==null?void 0:o.info,metadata:o==null?void 0:o.metadata,totalPages:r.numPages},loc:{pageNumber:a}}}))}return this.splitPages?i:i.length===0?[]:[new Nd({pageContent:i.map(a=>a.pageContent).join(`

`),metadata:{pdf:{version:n,info:o==null?void 0:o.info,metadata:o==null?void 0:o.metadata,totalPages:r.numPages}}})]}}async function Sle(){try{const{default:e}=await an(async()=>{const{default:r}=await import("./pdf-CoC6wDJA.js").then(async o=>(await o.__tla,o)).then(o=>o.p);return{default:r}},__vite__mapDeps([9,1,2])),{getDocument:t,version:n}=e;return{getDocument:t,version:n}}catch(e){throw console.error(e),new Error("Failed to load pdf-parse. Please install it with eg. `npm install pdf-parse`.")}}const Mle=`Use the following pieces of context to answer the question at the end.
If you don't know the answer, just say that you don't know, don't try to make up an answer.
Use three sentences maximum and keep the answer as concise as possible.

{context}
`,Cle=Rg(e=>{const{source:t,documents:n}=e,r=To(),{toast:o}=on(),{t:i}=je("dialogs"),{loading:a,createPrompt:s}=lO(),c=async l=>{try{if(!l.content||!l.content.includes("{context}")){o({title:i("create_vector_database_prompt.errors.fill_context"),variant:"destructive"});return}const u=l.content.replace("{context}",n.map(d=>`<document>${d.pageContent}</document>`).join(`
`));return await s(t,{...l,content:u}),r.hide(),!0}catch{o({title:i("create_vector_database_prompt.errors.create_failed"),variant:"destructive"})}};return h.jsx(qg,{open:r.visible,onOpenChange:r.hide,children:h.jsxs(Hg,{className:"sm:max-w-[425px]",children:[h.jsx(Wg,{children:h.jsxs("div",{className:"flex",children:[h.jsx(ge,{name:"file",className:"mr-2 h-4 w-4"}),h.jsx(Xg,{children:i("create_vector_database_prompt.title")})]})}),h.jsxs("div",{className:"flex gap-4 py-4 flex-col",children:[h.jsx(ph,{onSubmit:c,loading:a,hidePromptType:!0,defaultPromptRole:"system",defaultPromptContent:Mle}),h.jsxs("div",{className:"w-full border-0 text-gray-700 flex text-sm items-center",children:[h.jsx(ge,{name:"info",className:"mr-2",size:14}),i("create_vector_database_prompt.fill_content_note")]})]})]})})}),Ple=()=>{const e=It(a=>{var s;return(s=a.currentSession)==null?void 0:s.id}),[t,n]=v.useState(!1),r=ve(a=>a.createOrUpdateFlowNode),o=ve(a=>a.createOrUpdateFlowEdge),i=v.useCallback(async({prompt:a,source:s,metadata:c})=>{var l,u,d,p;try{const f=(l=s==null?void 0:s.data)==null?void 0:l.entity;if(!f||!e)throw new Error("Source or Session not found");n(!0);const y=((u=s.position)==null?void 0:u.x)||0,m=(((d=s.position)==null?void 0:d.y)||0)+(((p=s.measured)==null?void 0:p.height)||0),g=await ue("Prompt").save({...a,status:(a==null?void 0:a.status)||er.Started,role:(a==null?void 0:a.role)||Qt.System,type:(a==null?void 0:a.type)||Yt.Chat,content:(a==null?void 0:a.content)||"{context}",session_id:e});if(!g)throw new Error("Failed to save prompt");const b=await r({source_id:g.id,source_type:"Prompt",node_type:G.Prompt,x:y,y:m+20});if(!b)throw new Error("Failed to save prompt node");const w=await ue("FlowNodePlaceholder").save({placeholder:`Retriever for ${f.name}`,placeholder_type:ma.VECTOR_DATABASE_RETREIVER,session_id:e,metadata:c});if(!w)throw new Error("Failed to save node placeholder");const _=await r({source_id:w.id,source_type:"FlowNodePlaceholder",node_type:G.PlaceHolder,x:y,y:m+40});if(!_)throw new Error("Failed to save node placeholder node");await o({source:b.id,target:_.id}),await o({source:s.id,target:_.id})}finally{n(!1)}},[e,r,o]);return{loading:t,createVectorDatabaseRetriever:i}},Nle=`Use the following pieces of context to answer the question at the end.
If you don't know the answer, just say that you don't know, don't try to make up an answer.
----------------
{context}
`,kle=Rg(e=>{const{source:t}=e,n=To(),{toast:r}=on(),{t:o}=je("dialogs"),[i,a]=v.useState(1),[s,c]=v.useState(void 0),{loading:l,createVectorDatabaseRetriever:u}=Ple(),d=async y=>{try{const m=y.content;if(!m||!m.includes("{context}")){r({title:o("create_vector_database_retriever.errors.fill_context"),variant:"destructive"});return}return await u({source:t,prompt:{content:m},metadata:{k:i,minimalScore:s}}),n.hide(),!0}catch{r({title:o("create_vector_database_retriever.errors.create_failed"),variant:"destructive"})}},p=y=>{a(y.target.value?Number(y.target.value):void 0)},f=y=>{c(y.target.value?Number(y.target.value):void 0)};return h.jsx(qg,{open:n.visible,onOpenChange:n.hide,children:h.jsxs(Hg,{className:"sm:max-w-[425px]",children:[h.jsx(Wg,{children:h.jsxs("div",{className:"flex",children:[h.jsx(ge,{name:"file",className:"mr-2 h-4 w-4"}),h.jsx(Xg,{children:o("create_vector_database_retriever.title")})]})}),h.jsxs("div",{className:"flex gap-4 py-4 flex-col",children:[h.jsx(ph,{onSubmit:d,loading:l,hidePromptType:!0,defaultPromptRole:"system",defaultPromptContent:Nle}),h.jsxs(ft,{children:[h.jsx(Bt,{children:h.jsx(Zt,{children:o("create_vector_database_retriever.retriever_settings")})}),h.jsxs($t,{children:[h.jsx($e,{children:o("create_vector_database_retriever.retriever_k")}),h.jsx(Tn,{value:i||"",type:"number",onChange:p,placeholder:o("create_vector_database_retriever.retriever_k_placeholder")}),h.jsx($e,{children:o("create_vector_database_retriever.retriever_minimum_score")}),h.jsx(Tn,{value:s||"",type:"number",onChange:f,placeholder:o("create_vector_database_retriever.retriever_minimum_score_placeholder")})]})]}),h.jsxs("div",{className:"w-full border-0 text-gray-700 flex text-sm items-center",children:[h.jsx(ge,{name:"info",className:"mr-2",size:14}),o("create_vector_database_retriever.fill_content_note")]})]})]})})}),Ale=e=>{const t=ve(o=>o.createOrUpdateFlowEdge),n=Pd(o=>o.index),r=v.useCallback(async({edgeId:o,target:i,source:a})=>{var s,c;try{const l=(s=i==null?void 0:i.data)==null?void 0:s.entity;if((a==null?void 0:a.type)===G.CSVData&&(i==null?void 0:i.type)===G.VectorDatabase){const u=(c=a==null?void 0:a.data)==null?void 0:c.entity;if(!u||!l)return{deleteEdgeId:o};const{rows:d}=Bk(u.headers,u.csv),p=d.map(f=>new Nd({pageContent:`${f.text}`}));await n({databaseId:l.id,dataSourceId:u.id,dataSourceType:"CSVData"},p),await t({source:a.id,target:i.id});return}return{deleteEdgeId:o}}catch{return{deleteEdgeId:o}}},[t,n]);Ut(e,r)};var Tle=Jd,Ile=Io,Dle=xP,Rle=Math.ceil,Lle=Math.max;function Ble(e,t,n){(n?Ile(e,t,n):t===void 0)?t=1:t=Lle(Dle(t),0);var r=e==null?0:e.length;if(!r||t<1)return[];for(var o=0,i=0,a=Array(Rle(r/t));o<r;)a[i++]=Tle(e,o,o+=t);return a}var $le=Ble;const Fle=Ne($le),zle=e=>{var f,y;const[t,n]=v.useState(!1),{t:r}=je("flows"),{toast:o}=on(),i=jt(e),{getNode:a,getHandleConnections:s}=Fn(),c=ve(m=>m.updateNodes),l=Pd(m=>m.index),u=Pd(m=>m.similaritySearchWithScore),d=v.useCallback(async(m,g)=>{var b,w,_;try{const x=(b=i==null?void 0:i.data)==null?void 0:b.entity;if(!x){o({variant:"destructive",title:r("vector_database_node.errors.vector_database_not_found")});return}const j=(_=(w=s({nodeId:e,type:"target"}).map(O=>a(O.source)).find(O=>(O==null?void 0:O.type)&&[G.JSONLData,G.CSVData].includes(O==null?void 0:O.type)))==null?void 0:w.data)==null?void 0:_.entity;if(!j&&x.storage==="DataNode"){o({variant:"destructive",title:r("vector_database_node.errors.data_node_not_found")});return}return n(!0),await u({databaseId:x.id,dataSourceId:j.id,dataSourceType:Dg(j)},m,g==null?void 0:g.k)}catch{o({variant:"destructive",title:r("vector_database_node.errors.similarity_search_failed")})}finally{n(!1)}},[(f=i==null?void 0:i.data)==null?void 0:f.entity,s,e,u,o,r,a]),p=v.useCallback(async(m,g)=>{var b,w,_;try{const x=m.content?[new Nd({pageContent:m.content,id:m.id,metadata:{id:m.id}})]:m.documents;if(!(x!=null&&x.length)){o({variant:"destructive",title:r("vector_database_node.errors.content_not_found")});return}const j=(b=i==null?void 0:i.data)==null?void 0:b.entity;if(!j){o({variant:"destructive",title:r("vector_database_node.errors.vector_database_not_found")});return}const O=s({nodeId:e,type:"target"}).map(P=>a(P.source)).find(P=>(P==null?void 0:P.type)&&[G.JSONLData,G.CSVData].includes(P==null?void 0:P.type)),E=(w=O==null?void 0:O.data)==null?void 0:w.entity;if(!E&&j.storage==="DataNode"){o({variant:"destructive",title:r("vector_database_node.errors.data_node_not_found")});return}n(!0);const M=Dg(E),N=Fle(x,10);let A=0;for(const P of N){if((_=g==null?void 0:g.onProgressReport)==null||_.call(g,{handling:P.length,handled:A,total:x.length}),await l({databaseId:j.id,dataSourceId:E.id,dataSourceType:M},P),M&&O){const T=await ue(M).findOne({where:{id:E.id}});c([{type:"replace",id:O.id,item:{...O,data:{...O.data,entity:T}}}])}A+=P.length}}catch{o({variant:"destructive",title:r("vector_database_node.errors.similarity_search_failed")})}finally{n(!1)}},[(y=i==null?void 0:i.data)==null?void 0:y.entity,s,e,l,o,r,a,c]);return{loading:t,indexData:p,similaritySearchWithScore:d}},Vle=[1,2,3,4,5,6,7,8,9,10],Ule=v.memo(e=>{const{t}=je("flows"),[n,r]=v.useState(""),[o,i]=v.useState([]),[a,s]=v.useState("1"),{loading:c,onSimilaritySearch:l,onCreatePrompt:u,onCreateRetriever:d}=e,p=async()=>{i(await l(n,+a)),r("")},f=async y=>{y.key==="Enter"&&!y.shiftKey&&(y.preventDefault(),p())};return h.jsxs("div",{className:"mt-4 max-w-full",children:[h.jsx("div",{className:"bg-black/5 dark:bg-white/5 rounded-xl relative",children:h.jsxs("div",{className:"relative px-2 py-1 pb-2",children:[h.jsxs(Zn,{value:`${a}`,onValueChange:y=>s(y),children:[h.jsx(In,{className:"absolute left-0 !w-14 top-[2px] rounded-xl bg-transparent border-none focus:outline-none focus:ring-0 focus:border-opacity-0 focus:ring-transparent",children:h.jsx(Jn,{placeholder:t("vector_database_node.k_select_placeholder")})}),h.jsx(Dn,{children:Vle.map(y=>h.jsx(Rt,{value:`${y}`,children:y},`${y}`))})]}),h.jsx(lr,{value:n,disabled:c,placeholder:t("vector_database_node.similarity_search_placeholder"),className:re("w-full rounded-xl px-2 pl-11 border-none resize-none bg-transparent","min-h-8 max-h-8"),onKeyDown:f,onChange:y=>{r(y.target.value)}}),h.jsx("button",{type:"button",disabled:c,onClick:p,className:"absolute right-3 top-5 -translate-y-1/2 rounded-xl bg-black/5 dark:bg-white/5 p-1",children:h.jsx(ge,{name:c?"loader-circle":"arrow-right",className:re("w-4 h-4 dark:text-white",n?"opacity-100":"opacity-30",c?"animate-spin":"")})})]})}),h.jsx(_O,{type:"single",collapsible:!0,children:o==null?void 0:o.map(([y,m],g)=>h.jsxs(vh,{value:`${g}`,children:[h.jsxs(bh,{children:[`[${m.toFixed(2)}] ${y.pageContent}`.substring(0,32),"..."]}),h.jsx(xh,{children:y.pageContent})]},`${g}`))}),h.jsxs("div",{className:"w-full mt-4 flex flex-col gap-1",children:[h.jsx(vt,{disabled:c,onClick:d,className:"w-full",children:t("vector_database_node.to_retriever")}),o!=null&&o.length&&u?h.jsx(vt,{disabled:c,onClick:()=>u(o),className:"w-full",children:t("vector_database_node.create_prompt")}):void 0]})]})}),qle=v.memo(({loading:e,onCreateData:t})=>{const{t:n}=je("flows"),[r,o]=v.useState(""),[i,a]=v.useState(""),s=async()=>{i&&(await t({id:r,content:i}),o(""),a(""))};return h.jsxs("div",{className:"min-w-80",children:[h.jsxs("div",{className:"flex flex-col space-y-1.5 mt-3",children:[h.jsx($e,{htmlFor:"name",children:n("vector_database_node.add_text.id")}),h.jsx(Tn,{value:r,disabled:e,onChange:c=>o(c.target.value||""),placeholder:n("vector_database_node.add_text.id_placeholder"),className:"mb-4"}),h.jsxs($e,{htmlFor:"name",children:[n("vector_database_node.add_text.content")," ",h.jsx("span",{className:"text-red-600",children:"*"})]}),h.jsx(lr,{value:i,disabled:e,onChange:c=>a(c.target.value||""),placeholder:n("vector_database_node.add_text.content_placeholder")})]}),h.jsx("div",{className:"flex justify-between mt-6",children:h.jsx(qn,{loading:e,disabled:!(i!=null&&i.length),onClick:s,className:"w-full",children:n("vector_database_node.add_text.add")})})]})});function Hle({accept:e,maxSize:t}){const{t:n}=je("atoms"),[r,o]=v.useState(""),[i,a]=v.useState(""),s=v.useRef(null),[c,l]=v.useState(0),u=p=>{var y;const f=(y=p.target.files)==null?void 0:y[0];d(f)},d=p=>{if(a(""),p){if(t&&p.size>t*1024*1024){a(n("file_upload_input.errors.max_size",{maxSize:t,fileSize:(p.size/1024/1024).toFixed(2)}));return}const f=e==null?void 0:e.split(",").map(y=>y.replace(".","").trim());if(e&&!p.type.match(e.replace("/*",""))&&!(f!=null&&f.some(y=>p.type.includes(y)))){a(n("file_upload_input.errors.accept",{accept:e}));return}return l(p.size),o(p.name),p}};return{fileName:r,error:i,fileInputRef:s,handleFileSelect:u,validateAndSetFile:d,clearFile:()=>{o(""),a(""),l(0),s.current&&(s.current.value="")},fileSize:c}}function Wle({file:e,setFile:t,loading:n,progress:r,fileOptions:o}){const{toast:i}=on(),{t:a}=je("atoms"),[s,c]=v.useState(!1),{fileName:l,fileInputRef:u,clearFile:d,error:p,validateAndSetFile:f,fileSize:y}=Hle({accept:(o==null?void 0:o.accept)||"image/*",maxSize:(o==null?void 0:o.maxSize)||3});v.useEffect(()=>{e||d()},[d,e]),v.useEffect(()=>{p&&i({title:p,variant:"destructive"})},[p,i]);function m(x){const j=f(x);j&&t(j)}function g(x){x.preventDefault(),c(!1);const j=x.dataTransfer.files[0];j&&m(j)}function b(x){var O;const j=(O=x.target.files)==null?void 0:O[0];j&&m(j)}function w(){d(),t(void 0)}const _=v.useMemo(()=>{if(!e)return h.jsx("div",{className:"w-16 h-16 rounded-lg bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center",children:h.jsx(ge,{name:"file-text",className:"w-8 h-8 text-zinc-400"})});const x=e.type.startsWith("image/");return h.jsx("div",{className:"relative w-16 h-16 rounded-lg overflow-hidden",children:x?h.jsx("img",{src:URL.createObjectURL(e),alt:"Preview",className:"w-full h-full object-cover"}):h.jsx(ge,{className:"w-14 h-14",name:"file-text"})})},[e]);return h.jsx(h.Fragment,{children:h.jsxs("div",{className:re("relative group cursor-pointer","rounded-lg border-2 border-dashed","transition-colors duration-200",s?"border-indigo-500 bg-indigo-50/50 dark:bg-indigo-500/10":"border-zinc-200 dark:border-zinc-800"),onDragOver:x=>{x.preventDefault(),c(!0)},onDragLeave:()=>c(!1),onDrop:g,onClick:()=>{var x;return(x=u.current)==null?void 0:x.click()},onKeyDown:x=>{var j;(x.key==="Enter"||x.key===" ")&&(x.preventDefault(),(j=u.current)==null||j.click())},"aria-label":"Upload file",children:[h.jsx("input",{ref:u,type:"file",disabled:n||!!(r&&r<1),accept:(o==null?void 0:o.accept)||"image/*",onChange:b,className:"hidden"}),h.jsx("div",{className:"p-8 space-y-4",children:l?h.jsxs("div",{className:"flex items-center gap-4",children:[_,h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsxs("p",{className:"text-sm font-medium truncate",children:[l||"No file selected"," ",h.jsx("span",{className:"text-xs text-zinc-500 leading-5",children:y?`(${(y/1024/1024).toFixed(2)} MB)`:""})]}),r&&r<1?h.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[h.jsxs("p",{children:[(r*100).toFixed(2)," %"]}),h.jsx("div",{className:"h-1 flex-1 bg-zinc-100 dark:bg-zinc-800 rounded-full overflow-hidden items-center flex",children:h.jsx("div",{className:"h-full bg-indigo-500 transition-all duration-200",style:{width:`${r*100}%`}})})]}):void 0]}),h.jsx("button",{type:"button",disabled:n||!!(r&&r<1),onClick:x=>{x.stopPropagation(),w()},className:"p-1 hover:bg-zinc-100 dark:hover:bg-zinc-800 rounded",children:h.jsx(ge,{name:"x",className:"w-5 h-5 text-zinc-400"})}),r&&r<1?h.jsx(_h,{className:"rounded-lg"}):void 0]}):h.jsxs("div",{className:"flex flex-col items-center gap-2",children:[h.jsx(ge,{name:"upload",className:"w-8 h-8 text-zinc-400 dark:text-zinc-500"}),h.jsx("p",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:a("file_upload_input.drop_file")})]})})]})})}function Xle({onFileSubmit:e,fileOptions:t,progress:n,loading:r}){const{t:o}=je("flows"),[i,a]=v.useState(),s=async()=>{i&&(await e(i),a(void 0))};return h.jsxs("div",{className:"w-full max-w-md space-y-2 mt-4",children:[h.jsx("div",{className:"mb-6",children:h.jsx(Wle,{progress:n,loading:r,fileOptions:t,setFile:a,file:i})}),h.jsx(qn,{loading:r,disabled:!i,onClick:s,className:"w-full mt-4",children:o("vector_database_node.add_file.index")})]})}const Qle=v.memo(e=>{var j;const{t}=je("flows"),[n,r]=v.useState(0),[o,i]=v.useState("search"),a=jt(e.id),{id:s,data:c,isConnectable:l}=e,{loading:u,similaritySearchWithScore:d,indexData:p}=zle(s),f=To(Cle),y=To(kle);Ale(s);const m=v.useCallback(async(...O)=>{a&&await p(...O)},[p,a]),g=v.useCallback(async(O,E)=>{const M=O.trim(),N=await d(M,{k:E});if(N!=null&&N.length)return N},[d]),b=v.useCallback(O=>{f.show({source:a,documents:O.map(([E])=>E)})},[f,a]),w=v.useCallback(async()=>{y.show({source:a})},[y,a]),_=v.useCallback(async O=>{if(O.type.includes("text")||O.type.includes("txt")){const E=new FileReader;E.onload=async M=>{var A;const N=(A=M.target)==null?void 0:A.result;await m({content:N})},E.readAsText(O)}else if(O.type.endsWith("pdf")){const E=new Blob([O],{type:"application/pdf"}),M=await new Ele(E,{pdfjs:async()=>{const N=await an(()=>import("./pdf.min-CHOqrGFM.js").then(async A=>(await A.__tla,A)),__vite__mapDeps([10,1,2,3]));return await an(()=>import("./pdf.worker.min-BPhR4ho3.js").then(async A=>(await A.__tla,A)),__vite__mapDeps([11,1,2,3])),N.GlobalWorkerOptions.workerSrc=new URL("pdfjs-dist/build/pdf.worker.min.js",import.meta.url).toString(),N},parsedItemSeparator:" "}).load();await m({documents:M},{onProgressReport:N=>{r((N.handled+N.handling)/N.total)}})}},[m]),x=v.useMemo(()=>{switch(o){case"search":return h.jsx(ta,{value:"search",children:h.jsx(Ule,{loading:u,onSimilaritySearch:g,onCreatePrompt:b,onCreateRetriever:w})});case"new":return h.jsx(ta,{className:"min-w-80",value:"new",children:h.jsx(qle,{loading:u,onCreateData:m})});case"file":return h.jsx(ta,{value:"file",children:h.jsx(Xle,{loading:u,progress:n,onFileSubmit:_,fileOptions:{accept:".pdf,.txt,.text",maxSize:1}})})}},[m,b,w,_,g,u,o,n]);return h.jsxs("div",{className:"min-w-72 max-w-md",children:[h.jsx(De,{type:"target",position:oe.Top,isConnectable:l}),h.jsxs("div",{className:"max-w-full",children:[h.jsx(Vt,{id:s}),h.jsxs(pr,{className:"flex justify-center",variant:"default",children:[h.jsx(ge,{size:24,name:"database-zap"}),h.jsxs("div",{className:"ml-2 max-w-full",children:[h.jsx(fr,{children:`${((j=c.entity)==null?void 0:j.name)||""}`}),h.jsxs(BN,{value:o,onValueChange:i,defaultValue:"search",className:"w-full mt-4",children:[h.jsxs(ug,{className:"grid w-full grid-cols-3",children:[h.jsx(ea,{value:"search",children:t("vector_database_node.search")}),h.jsx(ea,{value:"new",children:t("vector_database_node.text")}),h.jsx(ea,{value:"file",children:t("vector_database_node.file")})]}),x]})]})]})]}),h.jsx(De,{type:"source",position:oe.Bottom,id:"a",isConnectable:l})]})}),Yle={embedding:32},Gle=v.memo(e=>{var i,a,s;const{id:t,data:n,isConnectable:r}=e,o=v.useMemo(()=>{var u;if(!((u=n==null?void 0:n.entity)!=null&&u.jsonl))return{headers:[],rows:[]};const c=Lg(n.entity.headers||""),l=$k(n.entity.jsonl);return{headers:c,rows:l.map(d=>{try{return JSON.parse(d)}catch{return[]}})}},[(i=n==null?void 0:n.entity)==null?void 0:i.jsonl,n.entity.headers]);return h.jsxs("div",{className:"min-w-80",children:[h.jsx(De,{type:"target",position:oe.Top,isConnectable:r}),h.jsxs("div",{children:[h.jsx(Vt,{id:t}),h.jsxs(ft,{className:"min-w-32 min-h-16 p-4",children:[h.jsx(Bt,{className:"!p-0",children:h.jsxs("div",{className:"pt-2 flex !flex-row",children:[h.jsx(ge,{name:"file-json",className:"mr-2"}),h.jsxs($e,{className:"!font-medium leading-none tracking-tight pr-8",children:[G.JSONLData," ",(a=o==null?void 0:o.rows)!=null&&a.length?`(${((s=o==null?void 0:o.rows)==null?void 0:s.length)||0})`:""]})]})}),h.jsx($t,{className:"pb-0",children:h.jsx(UN,{data:o.rows,headers:o.headers,limitLengthByColumns:Yle})})]})]}),h.jsx(De,{type:"source",position:oe.Bottom,id:"a",isConnectable:r})]})}),qN=60,HN=140,Kle=Md("supports-backdrop-blur:bg-white/10 supports-backdrop-blur:dark:bg-black/10 mx-auto flex h-[58px] w-max gap-2 rounded-lg border p-2 backdrop-blur-md"),WN=$.forwardRef(({className:e,children:t,magnification:n=qN,distance:r=HN,direction:o="bottom",...i},a)=>{const s=ep(1/0),c=()=>$.Children.map(t,l=>$.isValidElement(l)&&l.type===md?$.cloneElement(l,{...l.props,mouseX:s,magnification:n,distance:r}):l);return h.jsx(Td.div,{ref:a,onMouseMove:l=>s.set(l.pageX),onMouseLeave:()=>s.set(1/0),...i,className:re(Kle({className:e}),{"items-start":o==="top","items-center":o==="middle","items-end":o==="bottom"}),children:c()})});WN.displayName="Dock";const md=({magnification:e=qN,distance:t=HN,mouseX:n,className:r,children:o,...i})=>{const a=v.useRef(null),s=Ev(n||new Ape,u=>{var p;const d=((p=a.current)==null?void 0:p.getBoundingClientRect())??{x:0,width:0};return u-d.x-d.width/2}),c=Ev(s,[-t,0,t],[40,e,40]),l=mA(c,{mass:.1,stiffness:150,damping:12});return h.jsx(Td.div,{ref:a,style:{width:l},className:re("flex aspect-square cursor-pointer items-center justify-center rounded-full",r),...i,children:o})};md.displayName="DockIcon";const Zle={[G.Shape]:{width:100,height:100},[G.CircleShape]:{width:100,height:100},[G.TriangleShape]:{width:100,height:100},[G.EditorApp]:{width:1240,height:400}},Jle=e=>{const t=jt(e),n=It(s=>s.currentSession),[r,o]=v.useState(!1),i=ve(s=>s.createOrUpdateFlowNode),a=v.useCallback(async s=>{var c,l,u;try{if(o(!0),t&&(n==null?void 0:n.id)){const d=((c=t.position)==null?void 0:c.x)||0,p=(((l=t.position)==null?void 0:l.y)||0)+(((u=t.measured)==null?void 0:u.height)||0),f=await ue("FlowNodeData").save({data:{},session_id:n.id});if(!f)throw new Error("Failed to save node data");if(!await i({node_type:s,data:{},source_id:f.id,source_type:"FlowNodeData",x:d,y:p+20,...Zle[s]||{}}))throw new Error("Failed to save node")}}finally{o(!1)}},[i,n==null?void 0:n.id,t]);return{loading:r,createNode:a}},XN={applications:[{key:G.EditorApp,icon:"notebook-text",label:"application_bar.note"},{key:G.CodeContainerApp,icon:"square-terminal",label:"application_bar.code_editor"}],shapes:[{key:G.Shape,icon:"square",label:"application_bar.square"},{key:G.CircleShape,icon:"circle",label:"application_bar.circle"},{key:G.TriangleShape,icon:"triangle",label:"application_bar.triangle"}]},eue=v.memo(e=>{const{t}=je("flows"),{toast:n}=on(),{loading:r,createNode:o}=Jle(e.id),i=async a=>{try{if(r)return;await o(a)}catch{n({description:t("application_bar.errors.add_node_failed"),variant:"destructive"})}};return h.jsx(Tpe,{children:h.jsxs(WN,{direction:"middle",children:[XN.applications.map(a=>h.jsx(md,{children:h.jsxs(Gk,{children:[h.jsx(Kk,{children:h.jsx(ge,{onClick:()=>i(a.key),name:a.icon})}),h.jsx(Zk,{children:h.jsx("p",{children:t(a.label)})})]})},a.label)),h.jsx(Ipe,{orientation:"vertical",className:"h-full"}),XN.shapes.map(a=>h.jsx(md,{children:h.jsxs(Gk,{children:[h.jsx(Kk,{children:h.jsx(ge,{onClick:()=>i(a.key),name:a.icon})}),h.jsx(Zk,{children:h.jsx("p",{children:t(a.label)})})]})},a.label))]})})}),yd=v.memo(e=>{const{lineClassName:t,handleClassName:n,...r}=e;return h.jsx(xR,{lineClassName:re("!border-1.5",t),handleClassName:re("!w-2 !h-2 !border-2 !rounded-full",n),...r})}),tue=e=>{const t=ve(r=>r.createOrUpdateFlowEdge),n=v.useCallback(async({edgeId:r,source:o,target:i,connection:a})=>{try{if([G.CircleShape,G.TriangleShape].includes(o==null?void 0:o.type)&&(i==null?void 0:i.type)===G.Shape){await t({source:a.source,target:a.target,sourceHandle:a.sourceHandle,targetHandle:a.targetHandle});return}return{deleteEdgeId:r}}catch{return{deleteEdgeId:r}}},[t]);Ut(e,n)},nue=v.memo(e=>{const{id:t,selected:n,isConnectable:r}=e;return tue(t),h.jsxs(h.Fragment,{children:[h.jsx(yd,{isVisible:!!n,minWidth:40,minHeight:40}),h.jsx(De,{type:"target",position:oe.Top,isConnectable:r}),h.jsx("div",{className:"min-w-10 min-h-10 w-full h-full bg-border border",children:h.jsx(Vt,{id:t})}),h.jsx(De,{type:"source",position:oe.Bottom,isConnectable:r})]})}),rue=e=>{const t=ve(r=>r.createOrUpdateFlowEdge),n=v.useCallback(async({edgeId:r,source:o,target:i,connection:a})=>{try{if([G.Shape,G.TriangleShape].includes(o==null?void 0:o.type)&&(i==null?void 0:i.type)===G.CircleShape){await t({source:a.source,target:a.target,sourceHandle:a.sourceHandle,targetHandle:a.targetHandle});return}return{deleteEdgeId:r}}catch{return{deleteEdgeId:r}}},[t]);Ut(e,n)},oue=v.memo(e=>{const{id:t,selected:n,isConnectable:r}=e;return rue(t),h.jsxs(h.Fragment,{children:[h.jsx(yd,{isVisible:!!n,minWidth:40,minHeight:40}),h.jsx(De,{type:"target",position:oe.Top,isConnectable:r}),h.jsx("div",{className:"min-w-10 min-h-10 w-full h-full bg-border rounded-full border",children:h.jsx(Vt,{id:t})}),h.jsx(De,{type:"source",position:oe.Bottom,isConnectable:r})]})}),iue=e=>{const t=ve(r=>r.createOrUpdateFlowEdge),n=v.useCallback(async({edgeId:r,source:o,target:i,connection:a})=>{try{if([G.CircleShape,G.Shape].includes(o==null?void 0:o.type)&&(i==null?void 0:i.type)===G.TriangleShape){await t({source:a.source,target:a.target,sourceHandle:a.sourceHandle,targetHandle:a.targetHandle});return}return{deleteEdgeId:r}}catch{return{deleteEdgeId:r}}},[t]);Ut(e,n)},aue=v.memo(e=>{const{id:t,selected:n,width:r,height:o,isConnectable:i}=e;return iue(t),h.jsxs(h.Fragment,{children:[h.jsx(yd,{isVisible:!!n,minWidth:40,minHeight:40}),h.jsx(De,{type:"target",position:oe.Top,isConnectable:i}),h.jsx("div",{className:"w-0 h-0 border-l-transparent border-r-transparent border-b-border",style:{borderLeftWidth:(r||0)/2,borderRightWidth:(r||0)/2,borderBottomWidth:o||0}}),h.jsx(Vt,{id:t,className:"absolute top-0 right-0"}),h.jsx(De,{type:"source",position:oe.Bottom,isConnectable:i})]})}),sue=e=>{const t=ve(r=>r.createOrUpdateFlowEdge),n=v.useCallback(async({edgeId:r,source:o,target:i,connection:a})=>{try{if((o==null?void 0:o.type)===G.LLM&&(i==null?void 0:i.type)===G.EditorApp){await t({source:a.source,target:a.target,sourceHandle:a.sourceHandle,targetHandle:a.targetHandle});return}return{deleteEdgeId:r}}catch{return{deleteEdgeId:r}}},[t]);Ut(e,n)},cue=e=>{const t=jt(e),{t:n}=je("flows"),r=v.useRef(null),{toast:o}=on(),{getNode:i,getHandleConnections:a}=Fn(),s=An(l=>l.stream),c=v.useCallback(async l=>{t&&(clearTimeout(r.current),r.current=setTimeout(async()=>{await ue("FlowNode").update(t.id,{data:l})},150))},[t]);return{createMessage:v.useCallback(async(l,u)=>{if(t){const d=a({nodeId:e,type:"target"}).find(f=>{var y;return((y=i(f.source))==null?void 0:y.type)===G.LLM}),p=d?i(d==null?void 0:d.source):void 0;if(p){if(p.data.status!==nt.Loaded)return o({variant:"destructive",description:n("editor_node.errors.llm_not_loaded_yet")})}else return o({variant:"destructive",description:n("editor_node.errors.llm_not_found")});try{const f=s(l);if(!f)throw new Error("Stream is not supported");const y=[];for await(const m of f)m&&Array.isArray(m)&&(y.push(...m.map(g=>g.content)),m!=null&&m.length&&(u==null||u(m.map(g=>g.content).join(""))));return y.join("")}catch(f){if(f instanceof Error&&f.message.includes("LLM_NOT_LOADED_YET"))return o({title:n("editor_node.errors.llm_not_loaded_yet")});o({variant:"destructive",title:n("editor_node.errors.stream_message_failed")})}}},[t,a,e,i,o,n,s]),updateEditorContent:c}},lue=v.lazy(()=>an(()=>import("./PlateEditor-CZ2XSjt3.js").then(async e=>(await e.__tla,e)),__vite__mapDeps([12,1,2,7,3,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102]))),uue=v.memo(e=>{var c;const{id:t,data:n,selected:r,isConnectable:o}=e;sue(t);const{createMessage:i,updateEditorContent:a}=cue(t),s=v.useCallback(l=>{a(l)},[a]);return h.jsxs("div",{className:"w-full min-w-[1240px] h-full",children:[h.jsx(yd,{isVisible:!!r,minWidth:1240,minHeight:400}),h.jsx(De,{type:"target",position:oe.Top,isConnectable:o}),h.jsxs("div",{className:"min-w-10 min-h-10 w-full h-full rounded-lg border bg-background",children:[h.jsx(v.Suspense,{fallback:h.jsx("div",{className:"h-full w-ful rounded-lg flex justify-center items-center",children:h.jsx(ge,{name:"loader-circle",className:"animate-spin"})}),children:h.jsx("div",{className:"h-full w-ful rounded-lg","data-registry":"plate",children:h.jsx(lue,{defaultValue:(c=n==null?void 0:n.flowNode)==null?void 0:c.data,onValueChange:s,copilotStream:i})})}),h.jsx(Vt,{id:t})]}),h.jsx(De,{type:"source",position:oe.Bottom,isConnectable:o})]})}),due=e=>{const t=v.useCallback(async({edgeId:n})=>{try{return{deleteEdgeId:n}}catch{return{deleteEdgeId:n}}},[]);Ut(e,t)},pue=v.memo(e=>{var a,s;const{id:t,data:n,isConnectable:r}=e,{t:o}=je("flows");due(t);let i="";switch((a=n.entity)==null?void 0:a.placeholder_type){case"VECTOR_DATABASE_RETREIVER":i=o("placeholder_node.vector_database_retriever");break}return h.jsxs("div",{children:[h.jsx(De,{type:"target",position:oe.Top,isConnectable:r}),h.jsxs(pr,{className:"flex justify-center max-w-80",variant:"default",children:[h.jsx(Vt,{id:t}),h.jsx(ge,{name:"land-plot",className:"w-7 h-7"}),h.jsxs("div",{className:"ml-2 pr-4",children:[h.jsx(fr,{children:`${((s=n.entity)==null?void 0:s.placeholder)||""}`}),h.jsx(mi,{children:i?h.jsx(zt,{children:i}):void 0})]})]}),h.jsx(De,{type:"source",position:oe.Bottom,id:"a",isConnectable:r})]})});dv=function(e,t=""){const n=[];for(const[r,o]of Object.entries(e)){const i=Tg(),a=[t,r].filter(Boolean).join("/"),s="file"in o&&"contents"in o.file?o.file:void 0,c={id:i,isSelectable:!0,content:typeof(s==null?void 0:s.contents)=="string"?s.contents:void 0,file:a,name:r,children:[]};"directory"in o&&(c.children=dv(o.directory,a)),n.push(c)}return n};function fue(e){const t=e.trim().split(`
`),n={};return t.forEach(r=>{const{file:o,content:i}=JSON.parse(r),a=o.split("/");let s=n;for(let c=0;c<a.length;c++){const l=a[c];c===a.length-1?s[l]={file:{contents:i}}:(s[l]||(s[l]={directory:{}}),s=s[l].directory)}}),n}function hue(e){const t=[];function n(r,o=[]){for(const[i,a]of Object.entries(r))if("file"in a){const s=[...o,i].join("/");if("contents"in a.file){const c=a.file.contents;t.push(JSON.stringify({file:s,content:c}))}}else"directory"in a&&n(a.directory,[...o,i])}return n(e),t.join(`
`)}function mue(e,t,n){const r=t.split("/");let o=e;for(let i=0;i<r.length;i++){const a=r[i];if(i===r.length-1)a in o&&"file"in o[a]?o[a].file.contents=n:console.warn(`Path "${t}" is not a file.`);else if(a in o&&"directory"in o[a])o=o[a].directory;else return console.warn(`Path "${t}" does not exist.`),e}return e}let QN,YN,GN,KN;QN=e=>{const t=ve(r=>r.createOrUpdateFlowEdge),n=v.useCallback(async({edgeId:r,source:o,target:i,connection:a})=>{try{if((o==null?void 0:o.type)===G.LLM&&(i==null?void 0:i.type)===G.EditorApp){await t({source:a.source,target:a.target,sourceHandle:a.sourceHandle,targetHandle:a.targetHandle});return}return{deleteEdgeId:r}}catch{return{deleteEdgeId:r}}},[t]);Ut(e,n)},YN=e=>(jt(e),{updateCodeContainerData:v.useCallback(async(t,n)=>{await ue("FlowNode").update(t,{raw:hue(n)})},[])}),cv=(e,t)=>{v.useEffect(()=>{const n=o=>{o.ctrlKey&&o.preventDefault()},r=e.current;return r&&r.addEventListener("wheel",n,{passive:!1}),()=>{r&&r.removeEventListener("wheel",n)}},[e,t])},GN="https://stackblitz.com",KN=new Error,KN.stack="";const pg={};let gd=null;const yue={get editorOrigin(){return gd==null&&(gd=new URL(globalThis.WEBCONTAINER_API_IFRAME_URL??GN).origin),gd},set editorOrigin(e){gd=new URL(e).origin},setQueryParam(e,t){pg[e]=t},get url(){const e=new URL(this.editorOrigin);e.pathname="/headless";for(const t in pg)e.searchParams.set(t,pg[t]);return e.searchParams.set("version","1.5.1-internal.1"),e}};function gue(){let e,t;function n(){t=new Promise(r=>e=r)}return n(),{get promise(){return t},resolve(r){return e(r)},reset:n}}gue();var rc;(function(e){e.UncaughtException="PREVIEW_UNCAUGHT_EXCEPTION",e.UnhandledRejection="PREVIEW_UNHANDLED_REJECTION",e.ConsoleError="PREVIEW_CONSOLE_ERROR"})(rc||(rc={}));var vue=Object.defineProperty,bue=(e,t)=>{for(var n in t)vue(e,n,{get:t[n],enumerable:!0})},yn={};bue(yn,{createEndpoint:()=>ZN,expose:()=>yg,proxy:()=>ak,proxyMarker:()=>fg,releaseProxy:()=>JN,transfer:()=>ik,transferHandlers:()=>mg,windowEndpoint:()=>Oue,wrap:()=>nk});var fg=Symbol("Comlink.proxy"),ZN=Symbol("Comlink.endpoint"),JN=Symbol("Comlink.releaseProxy"),hg=Symbol("Comlink.thrown"),ek=e=>typeof e=="object"&&e!==null||typeof e=="function",xue={canHandle:e=>ek(e)&&e[fg],serialize(e){const{port1:t,port2:n}=new MessageChannel;return yg(e,t),[n,[n]]},deserialize(e){return e.start(),nk(e)}},wue={canHandle:e=>ek(e)&&hg in e,serialize({value:e}){let t;return e instanceof Error?t={isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:t={isError:!1,value:e},[t,[]]},deserialize(e){throw e.isError?Object.assign(new Error(e.value.message),e.value):e.value}},mg=new Map([["proxy",xue],["throw",wue]]);function yg(e,t=self){t.addEventListener("message",function n(r){if(!r||!r.data)return;const{id:o,type:i,path:a}=Object.assign({path:[]},r.data),s=(r.data.argumentList||[]).map(Po);let c;try{const l=a.slice(0,-1).reduce((d,p)=>d[p],e),u=a.reduce((d,p)=>d[p],e);switch(i){case 0:c=u;break;case 1:l[a.slice(-1)[0]]=Po(r.data.value),c=!0;break;case 2:c=u.apply(l,s);break;case 3:{const d=new u(...s);c=ak(d)}break;case 4:{const{port1:d,port2:p}=new MessageChannel;yg(e,p),c=ik(d,[d])}break;case 5:c=void 0;break}}catch(l){c={value:l,[hg]:0}}Promise.resolve(c).catch(l=>({value:l,[hg]:0})).then(l=>{const[u,d]=vg(l);t.postMessage(Object.assign(Object.assign({},u),{id:o}),d),i===5&&(t.removeEventListener("message",n),tk(t))})}),t.start&&t.start()}function _ue(e){return e.constructor.name==="MessagePort"}function tk(e){_ue(e)&&e.close()}function nk(e,t){return gg(e,[],t)}function vd(e){if(e)throw new Error("Proxy has been released and is not useable")}function gg(e,t=[],n=function(){}){let r=!1;const o=new Proxy(n,{get(i,a){if(vd(r),a===JN)return()=>ra(e,{type:5,path:t.map(s=>s.toString())}).then(()=>{tk(e),r=!0});if(a==="then"){if(t.length===0)return{then:()=>o};const s=ra(e,{type:0,path:t.map(c=>c.toString())}).then(Po);return s.then.bind(s)}return gg(e,[...t,a])},set(i,a,s){vd(r);const[c,l]=vg(s);return ra(e,{type:1,path:[...t,a].map(u=>u.toString()),value:c},l).then(Po)},apply(i,a,s){vd(r);const c=t[t.length-1];if(c===ZN)return ra(e,{type:4}).then(Po);if(c==="bind")return gg(e,t.slice(0,-1));const[l,u]=rk(s);return ra(e,{type:2,path:t.map(d=>d.toString()),argumentList:l},u).then(Po)},construct(i,a){vd(r);const[s,c]=rk(a);return ra(e,{type:3,path:t.map(l=>l.toString()),argumentList:s},c).then(Po)}});return o}function jue(e){return Array.prototype.concat.apply([],e)}function rk(e){const t=e.map(vg);return[t.map(n=>n[0]),jue(t.map(n=>n[1]))]}var ok=new WeakMap;function ik(e,t){return ok.set(e,t),e}function ak(e){return Object.assign(e,{[fg]:!0})}function Oue(e,t=self,n="*"){return{postMessage:(r,o)=>e.postMessage(r,n,o),addEventListener:t.addEventListener.bind(t),removeEventListener:t.removeEventListener.bind(t)}}function vg(e){for(const[t,n]of mg)if(n.canHandle(e)){const[r,o]=n.serialize(e);return[{type:3,name:t,value:r},o]}return[{type:0,value:e},ok.get(e)||[]]}function Po(e){switch(e.type){case 3:return mg.get(e.name).deserialize(e.value);case 0:return e.value}}function ra(e,t,n){return new Promise(r=>{const o=Eue();e.addEventListener("message",function i(a){!a.data||!a.data.id||a.data.id!==o||(e.removeEventListener("message",i),r(a.data))}),e.start&&e.start(),e.postMessage(Object.assign({id:o},t),n)})}function Eue(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}const Sue=[rc.ConsoleError,rc.UncaughtException,rc.UnhandledRejection];function Mue(e){return!(e==null||typeof e!="object"||!("type"in e)||!Sue.includes(e.type))}function oa(e){const t=Object.create(null);return e?Object.assign(t,e):t}function sk(e){const t={d:{}};for(const n of Object.keys(e)){const r=e[n];if("file"in r){if("symlink"in r.file){t.d[n]={f:{l:r.file.symlink}};continue}const i=r.file.contents,a=typeof i=="string"?i:Cue(i),s=typeof i=="string"?{}:{b:!0};t.d[n]={f:{c:a,...s}};continue}const o=sk(r.directory);t.d[n]=o}return t}function ck(e){const t=oa();if("f"in e)throw new Error("It is not possible to export a single file in the JSON format.");if("d"in e)for(const n of Object.keys(e.d)){const r=e.d[n];"d"in r?t[n]=oa({directory:ck(r)}):"f"in r&&("c"in r.f?t[n]=oa({file:oa({contents:r.f.c})}):"l"in r.f&&(t[n]=oa({file:oa({symlink:r.f.l})})))}return t}function Cue(e){let t="";for(const n of e)t+=String.fromCharCode(n);return t}let bd=null,xd=null,bg={};const lk=new TextDecoder,Pue=new TextEncoder,ko=class ko{constructor(t,n,r){qe(this,"_instance");qe(this,"_runtimeInfo");qe(this,"fs");qe(this,"internal");qe(this,"_tornDown",!1);qe(this,"_unsubscribeFromTokenChangedListener",()=>{});this._instance=t,this._runtimeInfo=r,this.fs=new Rue(n),this.internal=new Nue(t)}async spawn(t,n,r){let o=[];Array.isArray(n)?o=n:r=n;let i,a=new ReadableStream;if((r==null?void 0:r.output)!==!1){const m=wg();i=m.push,a=m.stream}let s,c,l,u;if(c=new ReadableStream,u=new ReadableStream,r==null?void 0:r.stdout){const m=wg();s=m.push,c=m.stream}if(r!=null&&r.stderr){const m=wg();l=m.push,u=m.stream}const d=_d(xg(i)),p=_d(xg(s)),f=_d(xg(l)),y=await this._instance.run({command:t,args:o,cwd:r==null?void 0:r.cwd,env:r==null?void 0:r.env,terminal:r==null?void 0:r.terminal},p,f,d);return new Due(y,a,c,u)}async export(t,n){const r={format:(n==null?void 0:n.format)??"json",includes:n==null?void 0:n.includes,excludes:n==null?void 0:n.excludes,external:!0},o=await this._instance.serialize(t,r);if(r.format==="json"){const i=JSON.parse(lk.decode(o));return ck(i)}return o}on(t,n){if(t==="preview-message"){const i=n;n=a=>{Mue(a)&&i(a)}}const{listener:r,subscribe:o}=_g(n);return o(this._instance.on(t,yn.proxy(r)))}mount(t,n){const r=t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):Pue.encode(JSON.stringify(sk(t)));return this._instance.loadFiles(yn.transfer(r,[r.buffer]),{mountPoints:n==null?void 0:n.mountPoint})}setPreviewScript(t,n){return this._instance.setPreviewScript(t,n)}get path(){return this._runtimeInfo.path}get workdir(){return this._runtimeInfo.cwd}teardown(){if(this._tornDown)throw new Error("WebContainer already torn down");this._tornDown=!0,this._unsubscribeFromTokenChangedListener(),this.fs._teardown(),this._instance.teardown(),this._instance[yn.releaseProxy](),ko._instance===this&&(ko._instance=null)}static async boot(t={}){const{workdirName:n}=t;if(window.crossOriginIsolated&&t.coep==="none"&&console.warn(`A Cross-Origin-Embedder-Policy header is required in cross origin isolated environments.
Set the 'coep' option to 'require-corp'.`),(n==null?void 0:n.includes("/"))||n===".."||n===".")throw new Error("workdirName should be a valid folder name");for(;bd;)await bd;if(ko._instance)throw new Error("Only a single WebContainer instance can be booted");const r=Lue(t);bd=r.catch(()=>{});try{const o=await r;return ko._instance=o,o}finally{bd=null}}};qe(ko,"_instance",null);let wd=ko;class Nue{constructor(t){qe(this,"_instance");this._instance=t}watchPaths(t,n){const{listener:r,subscribe:o}=_g(n);return o(this._instance.watchPaths(t,yn.proxy(r)))}getProcesses(){return this._instance.getProcesses()}onProcessesRemove(t){const{listener:n,subscribe:r}=_g(t);return r(this._instance.onProcessesRemove(yn.proxy(n)))}serialize(t,n){return this._instance.serialize(t,n)}}const kue=1,Aue=2;class Tue{constructor(t,n){qe(this,"name");qe(this,"_type");this.name=t,this._type=n}isFile(){return this._type===kue}isDirectory(){return this._type===Aue}}class Iue{constructor(t,n,r,o){qe(this,"_apiClient");qe(this,"_path");qe(this,"_options");qe(this,"_listener");qe(this,"_wrappedListener");qe(this,"_watcher");qe(this,"_closed",!1);this._apiClient=t,this._path=n,this._options=r,this._listener=o,this._apiClient._watchers.add(this),this._wrappedListener=(i,a)=>{this._listener&&!this._closed&&this._listener(i,a)},this._apiClient._fs.watch(this._path,this._options,_d(this._wrappedListener)).then(i=>{this._watcher=i,this._closed&&this._teardown()}).catch(console.error)}close(){this._closed||(this._closed=!0,this._apiClient._watchers.delete(this),this._teardown())}_teardown(){var t;(t=this._watcher)==null||t.close().finally(()=>{var n;(n=this._watcher)==null||n[yn.releaseProxy]()})}}class Due{constructor(t,n,r,o){qe(this,"output");qe(this,"input");qe(this,"exit");qe(this,"_process");qe(this,"stdout");qe(this,"stderr");this.output=n,this._process=t,this.input=new WritableStream({write:i=>{var a;(a=this._getProcess())==null||a.write(i).catch(()=>{})}}),this.exit=this._onExit(),this.stdout=r,this.stderr=o}kill(){var t;(t=this._getProcess())==null||t.kill()}resize(t){var n;(n=this._getProcess())==null||n.resize(t)}async _onExit(){var t;try{return await this._process.onExit}finally{(t=this._process)==null||t[yn.releaseProxy](),this._process=null}}_getProcess(){return this._process==null&&console.warn("This process already exited"),this._process}}class Rue{constructor(t){qe(this,"_fs");qe(this,"_watchers",new Set([]));this._fs=t}rm(...t){return this._fs.rm(...t)}async readFile(t,n){return await this._fs.readFile(t,n)}async rename(t,n){return await this._fs.rename(t,n)}async writeFile(t,n,r){if(n instanceof Uint8Array){const o=n.buffer.slice(n.byteOffset,n.byteOffset+n.byteLength);n=yn.transfer(new Uint8Array(o),[o])}await this._fs.writeFile(t,n,r)}async readdir(t,n){const r=await this._fs.readdir(t,n);return $ue(r)||Fue(r)?r:r.map(o=>new Tue(o.name,o["Symbol(type)"]))}async mkdir(t,n){return await this._fs.mkdir(t,n)}watch(t,n,r){return typeof n=="function"&&(r=n,n=null),new Iue(this,t,n,r)}_teardown(){this._fs[yn.releaseProxy]();for(const t of this._watchers)t.close()}}async function Lue(e){const{serverPromise:t}=Bue(e),n=await(await t).build({host:window.location.host,version:"1.5.1-internal.1",workdirName:e.workdirName,forwardPreviewErrors:e.forwardPreviewErrors}),r=await n.fs(),o=await n.runtimeInfo();return new wd(n,r,o)}function xg(e){if(e!=null)return t=>{t instanceof Uint8Array?e(lk.decode(t)):t==null&&e(null)}}function _d(e){if(e!=null)return yn.proxy(e)}function Bue(e){if(xd!=null)return e.coep!==bg.coep&&(console.warn(`Attempting to boot WebContainer with 'coep: ${e.coep}'`),console.warn(`First boot had 'coep: ${bg.coep}', new settings will not take effect!`)),{serverPromise:xd};const t=document.createElement("iframe");t.style.display="none",t.setAttribute("allow","cross-origin-isolated");const n=yue.url;e.coep&&n.searchParams.set("coep",e.coep),t.src=n.toString();const{origin:r}=n;return bg={...e},xd=new Promise(o=>{const i=a=>{if(a.origin!==r)return;const{data:s}=a;if(s.type==="init"){o(yn.wrap(a.ports[0]));return}if(s.type==="warning"){console[s.level].call(console,s.message);return}};window.addEventListener("message",i)}),document.body.insertBefore(t,null),{serverPromise:xd}}function $ue(e){return typeof e[0]=="string"}function Fue(e){return e[0]instanceof Uint8Array}function wg(){let e=null;return{stream:new ReadableStream({start(t){e=t}}),push:t=>{t!=null?e==null||e.enqueue(t):(e==null||e.close(),e=null)}}}function _g(e){let t=!1,n=()=>{};return{subscribe(r){return r.then(o=>{n=o,t&&n()}),()=>{t=!0,n()}},listener:(...r)=>{t||e(...r)}}}let uk,dk,pk,fk,hk,mk,yk;uk=(e,t)=>({init:async()=>{try{if(t().webcontainerInstance)return t().webcontainerInstance;const n=await wd.boot();return e({webcontainerInstance:n}),n}catch(n){console.warn("Failed init:",n)}finally{e({ready:!0})}},teardown:async()=>{const n=t().webcontainerInstance;n&&n.teardown(),e({webcontainerInstance:void 0})},mounts:async n=>{try{const r=t().webcontainerInstance;if(!r)throw new Error("WebContainer instance is not ready");await r.mount(n)}catch(r){console.warn("Failed startContainer:",r)}}}),dk={},pv=Pk()(Nk((e,t)=>({...dk,...uk(e,t)}))),pk=v.memo(({iframeRef:e})=>{const[t,n]=v.useState(""),r=pv(i=>i.webcontainerInstance),o=v.useRef(null);return cv(o),v.useEffect(()=>{if(!r)return;const i=r.on("server-ready",(a,s)=>{n(s)});return()=>{i()}},[r]),h.jsxs("div",{ref:o,className:"flex-1 w-full flex relative max-w-full flex-col",children:[h.jsx("div",{className:"relative flex items-center w-full py-2 px-24 bg-neutral-300",children:h.jsx("div",{className:"flex justify-center items-center size-full rounded-lg text-[.25rem] sm:text-[.5rem] bg-neutral-200 text-neutral-400 overflow-hidden",children:(t==null?void 0:t.length)>42?`${t.substring(0,42)}...`:"No URL"})}),h.jsx("div",{className:"bg-background w-full flex-1 nowheel nodrag overflow-auto",children:h.jsx("iframe",{src:t,ref:e,className:"min-h-full w-full"})})]})}),fk=v.lazy(()=>an(()=>import("./CodeEditor-daEqyNJz.js").then(async e=>(await e.__tla,e)).then(e=>e.C),__vite__mapDeps([103,1,2,6,3,104,14,105,106]))),hk=v.lazy(()=>an(()=>import("./ContainerTernimal-CsOG8as1.js").then(async e=>(await e.__tla,e)),__vite__mapDeps([107,1,2,3]))),mk=v.memo(e=>{var u,d,p;const{id:t,isConnectable:n,data:r}=e,o=v.useRef(null),[i,a]=v.useState((u=r==null?void 0:r.flowNode)!=null&&u.raw?fue(r.flowNode.raw):void 0);QN(t);const{updateCodeContainerData:s}=YN(t),c=v.useCallback(async f=>{var y,m;(y=r==null?void 0:r.flowNode)!=null&&y.id&&(await s((m=r==null?void 0:r.flowNode)==null?void 0:m.id,f),a(f))},[(d=r==null?void 0:r.flowNode)==null?void 0:d.id,s]),l=v.useCallback(async(f,y)=>{a(m=>{var b;if(!m)return m;const g=mue(m,f,y);return s((b=r==null?void 0:r.flowNode)==null?void 0:b.id,g),g})},[(p=r==null?void 0:r.flowNode)==null?void 0:p.id,s]);return h.jsxs("div",{className:"w-[1380px] h-[600px]",children:[h.jsx(De,{type:"target",position:oe.Top,isConnectable:n}),h.jsxs("div",{className:"w-full h-full rounded-lg border bg-card overflow-hidden",children:[h.jsx(Vt,{id:t}),h.jsx(v.Suspense,{fallback:h.jsx("div",{className:"h-full w-full flex justify-center items-center",children:h.jsx(ge,{name:"loader-circle",className:"animate-spin"})}),children:h.jsxs("div",{className:"flex h-full",children:[h.jsx(fk,{fileSystemTree:i,updateCodeContainerData:c,updateCodeContainerFile:l}),h.jsxs("div",{className:"w-[400px] h-full flex flex-col border",children:[h.jsx(hk,{fileSystemTree:i}),h.jsx(pk,{iframeRef:o})]})]})})]}),h.jsx(De,{type:"source",position:oe.Bottom,isConnectable:n})]})}),yk={[G.LLM]:dq,[G.Toolbox]:aq,[G.Thread]:Fq,[G.Message]:rH,[G.Prompt]:iH,[G.SessionInfo]:dle,[G.Schema]:vle,[G.CSVData]:ble,[G.ToolDefinition]:wle,[G.DefaultEmbeddingModel]:jle,[G.VectorDatabase]:Qle,[G.JSONLData]:Gle,[G.ApplicationBar]:eue,[G.Shape]:nue,[G.CircleShape]:oue,[G.TriangleShape]:aue,[G.EditorApp]:uue,[G.PlaceHolder]:pue,[G.CodeContainerApp]:mk};function zue(e,t=[]){let n=[];function r(i,a){const s=v.createContext(a),c=n.length;n=[...n,a];function l(d){const{scope:p,children:f,...y}=d,m=(p==null?void 0:p[e][c])||s,g=v.useMemo(()=>y,Object.values(y));return h.jsx(m.Provider,{value:g,children:f})}function u(d,p){const f=(p==null?void 0:p[e][c])||s,y=v.useContext(f);if(y)return y;if(a!==void 0)return a;throw new Error(`\`${d}\` must be used within \`${i}\``)}return l.displayName=i+"Provider",[l,u]}const o=()=>{const i=n.map(a=>v.createContext(a));return function(a){const s=(a==null?void 0:a[e])||i;return v.useMemo(()=>({[`__scope${e}`]:{...a,[e]:s}}),[a,s])}};return o.scopeName=e,[r,Vue(o,...t)]}function Vue(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(o){const i=r.reduce((a,{useScope:s,scopeName:c})=>{const l=s(o)[`__scope${c}`];return{...a,...l}},{});return v.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return n.scopeName=t.scopeName,n}var Uue="Toggle",jg=v.forwardRef((e,t)=>{const{pressed:n,defaultPressed:r=!1,onPressedChange:o,...i}=e,[a=!1,s]=kn({prop:n,onChange:o,defaultProp:r});return h.jsx(ke.button,{type:"button","aria-pressed":a,"data-state":a?"on":"off","data-disabled":e.disabled?"":void 0,...i,ref:t,onClick:Me(e.onClick,()=>{e.disabled||s(!a)})})});jg.displayName=Uue;let Og,No,Eg,Sg,jd;Og=jg,No="ToggleGroup",[Eg,tA]=zue(No,[la]),Sg=la(),jd=$.forwardRef((e,t)=>{const{type:n,...r}=e;if(n==="single"){const o=r;return h.jsx(que,{...o,ref:t})}if(n==="multiple"){const o=r;return h.jsx(Hue,{...o,ref:t})}throw new Error(`Missing prop \`type\` expected on \`${No}\``)}),jd.displayName=No;var[gk,vk]=Eg(No),que=$.forwardRef((e,t)=>{const{value:n,defaultValue:r,onValueChange:o=()=>{},...i}=e,[a,s]=kn({prop:n,defaultProp:r,onChange:o});return h.jsx(gk,{scope:e.__scopeToggleGroup,type:"single",value:a?[a]:[],onItemActivate:s,onItemDeactivate:$.useCallback(()=>s(""),[s]),children:h.jsx(bk,{...i,ref:t})})}),Hue=$.forwardRef((e,t)=>{const{value:n,defaultValue:r,onValueChange:o=()=>{},...i}=e,[a=[],s]=kn({prop:n,defaultProp:r,onChange:o}),c=$.useCallback(u=>s((d=[])=>[...d,u]),[s]),l=$.useCallback(u=>s((d=[])=>d.filter(p=>p!==u)),[s]);return h.jsx(gk,{scope:e.__scopeToggleGroup,type:"multiple",value:a,onItemActivate:c,onItemDeactivate:l,children:h.jsx(bk,{...i,ref:t})})});jd.displayName=No;var[Wue,Xue]=Eg(No),bk=$.forwardRef((e,t)=>{const{__scopeToggleGroup:n,disabled:r=!1,rovingFocus:o=!0,orientation:i,dir:a,loop:s=!0,...c}=e,l=Sg(n),u=sc(a),d={role:"group",dir:u,...c};return h.jsx(Wue,{scope:n,rovingFocus:o,disabled:r,children:o?h.jsx(zg,{asChild:!0,...l,orientation:i,dir:u,loop:s,children:h.jsx(ke.div,{...d,ref:t})}):h.jsx(ke.div,{...d,ref:t})})}),Od="ToggleGroupItem",xk=$.forwardRef((e,t)=>{const n=vk(Od,e.__scopeToggleGroup),r=Xue(Od,e.__scopeToggleGroup),o=Sg(e.__scopeToggleGroup),i=n.value.includes(e.value),a=r.disabled||e.disabled,s={...e,pressed:i,disabled:a},c=$.useRef(null);return r.rovingFocus?h.jsx(Vg,{asChild:!0,...o,focusable:!a,active:i,ref:c,children:h.jsx(Mg,{...s,ref:t})}):h.jsx(Mg,{...s,ref:t})});xk.displayName=Od;let Mg;Mg=$.forwardRef((e,t)=>{const{__scopeToggleGroup:n,value:r,...o}=e,i=vk(Od,n),a={role:"radio","aria-checked":e.pressed,"aria-pressed":void 0},s=i.type==="single"?a:void 0;return h.jsx(jg,{...s,...o,ref:t,onPressedChange:c=>{c?i.onItemActivate(r):i.onItemDeactivate(r)}})}),Ld=jd,Bd=xk;const wk=Md("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 gap-2",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground"},size:{default:"h-10 px-3 min-w-10",sm:"h-9 px-2.5 min-w-9",lg:"h-11 px-5 min-w-11"}},defaultVariants:{variant:"default",size:"default"}}),Que=v.forwardRef(({className:e,variant:t,size:n,...r},o)=>h.jsx(Og,{ref:o,className:re(wk({variant:t,size:n,className:e})),...r}));Que.displayName=Og.displayName;const _k=v.createContext({size:"default",variant:"default"}),Yue=v.forwardRef(({className:e,variant:t,size:n,children:r,...o},i)=>h.jsx(Ld,{ref:i,className:re("flex items-center justify-center gap-1",e),...o,children:h.jsx(_k.Provider,{value:{variant:t,size:n},children:r})}));Yue.displayName=Ld.displayName;const Gue=v.forwardRef(({className:e,children:t,variant:n,size:r,...o},i)=>{const a=v.useContext(_k);return h.jsx(Bd,{ref:i,className:re(wk({variant:a.variant||n,size:a.size||r}),e),...o,children:t})});Gue.displayName=Bd.displayName;const Kue=()=>{const e=ve(M=>M.flowEdges),t=It(M=>M.currentSession),n=ve(M=>M.setNodes),r=ve(M=>M.updateNodes),o=ve(M=>M.updateEdges),i=ve(M=>M.addConnectionToEdges),a=ve(M=>M.reset),s=ve(M=>M.findFlowEdges),c=ve(M=>M.deleteFlowNode),l=ve(M=>M.deleteFlowEdge),u=ve(M=>M.updateFlowNode),d=ve(M=>M.getNodes),p=ve(M=>M.findFlowNodesWithSource),f=v.useRef(e),y=v.useRef(),[m,g]=v.useState({loading:!1});f.current=e;const b=v.useCallback(async(M,N)=>{try{y.current=M,a(),await(N==null?void 0:N())}catch{y.current=void 0}},[a]),w=v.useCallback(async M=>{try{if(!(t!=null&&t.id))return;g(P=>({...P,loading:!0}));const N=await p({...M,where:{...M.where,session_id:t.id}}),A=await s({where:[{source:ao(N.map(P=>P.id))},{target:ao(N.map(P=>P.id))}]});return{flowNodes:N,flowEdges:A}}finally{g(N=>({...N,loading:!1}))}},[p,s,t==null?void 0:t.id]),_=v.useCallback(async M=>{var N,A;for(const P of M)if("id"in P&&Object.values(Ya).includes(P.id)&&P.type!=="remove")r([P]);else if(P.type==="position"&&P.position&&!isNaN(P.position.x)&&!isNaN(P.position.y))r([P]),await u({id:P.id,x:P.position.x,y:P.position.y},{silent:!0});else if(P.type==="remove"){const T=(N=d([P.id]))==null?void 0:N[0];if(!(T!=null&&T.type)||Jz.includes(T.type))return;await c({id:P.id})}else if(P.type==="dimensions"&&P.dimensions&&!isNaN(P.dimensions.width)&&!isNaN(P.dimensions.height)){const T=(A=d([P.id]))==null?void 0:A[0];if(!(T!=null&&T.width)&&!(T!=null&&T.height))return;r([P]),await u({id:P.id,width:P.dimensions.width,height:P.dimensions.height},{silent:!0})}else P.type==="select"&&r([P])},[r,u,d,c]),x=v.useCallback(M=>{Promise.all(M.map(async N=>{if(N.type==="remove")return l({id:N.id})})),o(M)},[l,o]),j=v.useCallback(M=>{i(M)},[i]),O=v.useCallback(()=>{var M;(M=f.current)==null||M.length},[]),E=v.useCallback(M=>{n(N=>{var L,S;let A;if(typeof M=="function"?A=M(N):A=M,!A)return N;const P=N==null?void 0:N.find(C=>C.id===A.id),T={id:A.id,item:P?cl(P,A):{...A,position:{x:((L=A.position)==null?void 0:L.x)||0,y:((S=A.position)==null?void 0:S.y)||0}},type:P?"replace":"add"};return eo([T],N)})},[n]);return{syncEdges:O,initialFlow:b,loadingState:m,prepareFlowInfo:w,updateNodeChanges:_,updateEdgeChanges:x,updateOrCreateNode:E,currentSessionIdRef:y,updateEdgeConnection:j}},Zue=e=>{const t=It(u=>{var d;return(d=u.currentSession)==null?void 0:d.id}),{loadingState:n,prepareFlowInfo:r,syncEdges:o,initialFlow:i,currentSessionIdRef:a}=e,s=ve(u=>u.ready),c=ve(u=>u.removeSyncNodeQueue),l=ve(u=>u.removeSyncEdgeQueue);v.useLayoutEffect(()=>{},[t]),v.useEffect(()=>{n.loading||!s||!t||a.current===t||i(t,async()=>{await r({where:{session_id:t}})})},[i,r,n.loading,a,s,t]),v.useEffect(()=>{const u=ve.subscribe(p=>p.syncNodeQueue,async(p,f)=>{var g;const y=f.map(b=>b.timestamp),m=p.filter(b=>!y.includes(b.timestamp));if(m.length){c(m.map(b=>b.timestamp));for(const b of m){const w=await r(b.query);switch(b.syncType){case"Thread":{const _=(g=w==null?void 0:w.flowNodes)==null?void 0:g.map(x=>{if(x.source_id&&x.source_type==="Thread")return x.source_id}).filter(Boolean);if(_!=null&&_.length){const x=await ue("Message").find({where:{thread_id:ao(_)}});await r({where:{source_type:"Message",source_id:ao(x.map(j=>j.id))}})}}break}}}}),d=ve.subscribe(p=>p.syncEdgeQueue,async(p,f)=>{const y=f.map(g=>g.timestamp),m=p.filter(g=>!y.includes(g.timestamp));m.length&&(l(m.map(g=>g.timestamp)),o())});return()=>{u(),d()}},[r,l,c,o])},Jue=()=>{const[e,t]=v.useState(!0),n=Kue(),r=An(u=>u.selectedModel),o=v.useRef(r),i=An(u=>u.setInitProgressCallback),{updateOrCreateNode:a,updateNodeChanges:s,updateEdgeChanges:c,updateEdgeConnection:l}=n;return Zue(n),o.current=r,v.useEffect(()=>{const u=i==null?void 0:i(d=>{if(!o.current)return;const p=`${o.current}`;a(f=>{const y=f==null?void 0:f.find(m=>{var g;return(g=m.data)!=null&&g.entity&&typeof m.data.entity=="object"&&"name"in m.data.entity?m.data.entity.name===p:!1});if(y)return y.data.label=d.text,y.data.status=nt.Loading,d.progress===100&&(y.data.label="",y.data.status=nt.Loaded),y})});return()=>{u==null||u()}},[i,a]),v.useMemo(()=>({updateNodeChanges:s,updateEdgeChanges:c,initializing:e,setInitializing:t,updateEdgeConnection:l}),[s,c,e,t,l])},ede=()=>{const e=Lk(l=>l.theme),t=ve(l=>l.nodes),n=ve(l=>l.edges),{updateNodeChanges:r,updateEdgeChanges:o,updateEdgeConnection:i}=Jue(),a=v.useCallback(l=>{r(l)},[r]),s=v.useCallback(l=>{o(l)},[o]),c=v.useCallback(l=>{i(l)},[i]);return h.jsxs(QD,{nodes:t,edges:n,nodeTypes:yk,onNodesChange:a,onEdgesChange:s,onConnect:c,panOnScroll:!0,panOnScrollMode:Sr.Free,colorMode:e,fitView:!0,children:[h.jsx(JD,{variant:sr.Dots,gap:24,size:1}),h.jsx(aR,{}),h.jsx(vR,{}),void 0]})},tde=v.memo(ede);function nde(){return h.jsx(tde,{})}iA=Object.freeze(Object.defineProperty({__proto__:null,default:nde},Symbol.toStringTag,{value:"Module"}))});export{Qg as $,Yg as A,Id as B,Gg as C,Kg as D,ua as E,da as F,Xr as G,cc as H,lc as I,Dd as J,Zg as K,Jg as L,Io as M,ev as N,Jk as O,tv as P,Rd as Q,eA as R,nv as S,rv as T,ov as U,tA as V,Ld as W,Bd as X,iv as Y,nA as Z,av as _,Rpe as __tla,$d as a,Fd as a0,zd as a1,sv as a2,rA as a3,uc as a4,oA as a5,Vd as a6,cv as a7,Ud as a8,lv as a9,uv as aa,qd as ab,Hd as ac,dv as ad,Zn as ae,In as af,Jn as ag,Dn as ah,Rt as ai,pv as aj,fv as ak,hv as al,Do as am,Qr as an,iA as ao,mv as b,gn as c,Wd as d,yv as e,gv as f,Xd as g,Ro as h,vn as i,Qd as j,pa as k,Yd as l,vv as m,Rn as n,bv as o,Gd as p,Kd as q,Zd as r,xv as s,wv as t,Ct as u,fa as v,Jd as w,ha as x,_v as y,Lo as z};
