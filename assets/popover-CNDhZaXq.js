import{r as e,M as W,j as s,i as M,k as Y,l as G,m as Q,c as v,L as R,n as z,__tla as X}from"./index-D8zyPWIn.js";import{P as Z,C as I,R as q,T as J,__tla as ee}from"./index-B7BQPxIA.js";let S,L,E,P,T,te=Promise.all([(()=>{try{return X}catch{}})(),(()=>{try{return ee}catch{}})()]).then(async()=>{class A extends e.Component{getSnapshotBeforeUpdate(r){const t=this.props.childRef.current;if(t&&r.isPresent&&!this.props.isPresent){const i=this.props.sizeRef.current;i.height=t.offsetHeight||0,i.width=t.offsetWidth||0,i.top=t.offsetTop,i.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function D({children:a,isPresent:r}){const t=e.useId(),i=e.useRef(null),o=e.useRef({width:0,height:0,top:0,left:0}),{nonce:u}=e.useContext(W);return e.useInsertionEffect(()=>{const{width:f,height:n,top:m,left:d}=o.current;if(r||!i.current||!f||!n)return;i.current.dataset.motionPopId=t;const p=document.createElement("style");return u&&(p.nonce=u),document.head.appendChild(p),p.sheet&&p.sheet.insertRule(`
          [data-motion-pop-id="${t}"] {
            position: absolute !important;
            width: ${f}px !important;
            height: ${n}px !important;
            top: ${m}px !important;
            left: ${d}px !important;
          }
        `),()=>{document.head.removeChild(p)}},[r]),s.jsx(A,{isPresent:r,childRef:i,sizeRef:o,children:e.cloneElement(a,{ref:i})})}const F=({children:a,initial:r,isPresent:t,onExitComplete:i,custom:o,presenceAffectsLayout:u,mode:f})=>{const n=M(O),m=e.useId(),d=e.useCallback(c=>{n.set(c,!0);for(const y of n.values())if(!y)return;i&&i()},[n,i]),p=e.useMemo(()=>({id:m,initial:r,isPresent:t,custom:o,onExitComplete:d,register:c=>(n.set(c,!1),()=>n.delete(c))}),u?[Math.random(),d]:[t,d]);return e.useMemo(()=>{n.forEach((c,y)=>n.set(y,!1))},[t]),e.useEffect(()=>{!t&&!n.size&&i&&i()},[t]),f==="popLayout"&&(a=s.jsx(D,{isPresent:t,children:a})),s.jsx(Y.Provider,{value:p,children:a})};function O(){return new Map}const N=a=>a.key||"";function _(a){const r=[];return e.Children.forEach(a,t=>{e.isValidElement(t)&&r.push(t)}),r}let H;H=({children:a,exitBeforeEnter:r,custom:t,initial:i=!0,onExitComplete:o,presenceAffectsLayout:u=!0,mode:f="sync"})=>{const n=e.useMemo(()=>_(a),[a]),m=n.map(N),d=e.useRef(!0),p=e.useRef(n),c=M(()=>new Map),[y,k]=e.useState(n),[b,C]=e.useState(n);G(()=>{d.current=!1,p.current=n;for(let x=0;x<b.length;x++){const l=N(b[x]);m.includes(l)?c.delete(l):c.get(l)!==!0&&c.set(l,!1)}},[b,m.length,m.join("-")]);const j=[];if(n!==y){let x=[...n];for(let l=0;l<b.length;l++){const w=b[l],h=N(w);m.includes(h)||(x.splice(l,0,w),j.push(w))}f==="wait"&&j.length&&(x=j),C(_(x)),k(n);return}const{forceRender:g}=e.useContext(Q);return s.jsx(s.Fragment,{children:b.map(x=>{const l=N(x),w=n===b||m.includes(l),h=()=>{if(c.has(l))c.set(l,!0);else return;let $=!0;c.forEach(V=>{V||($=!1)}),$&&(g==null||g(),C(p.current),o&&o())};return s.jsx(F,{isPresent:w,initial:!d.current||i?void 0:!1,custom:w?void 0:t,presenceAffectsLayout:u,mode:f,onExitComplete:w?void 0:h,children:x},l)})})},E=e.forwardRef(({className:a,...r},t)=>s.jsx("textarea",{className:v("flex min-h-[100px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-0 disabled:cursor-not-allowed disabled:opacity-50",a),ref:t,...r})),E.displayName="Textarea";function B({minHeight:a,maxHeight:r}){const t=e.useRef(null),i=e.useCallback(o=>{const u=t.current;if(!u)return;if(o){u.style.height=`${a}px`;return}u.style.height=`${a}px`;const f=Math.max(a,Math.min(u.scrollHeight,r??Number.POSITIVE_INFINITY));u.style.height=`${f}px`},[a,r]);return e.useEffect(()=>{const o=t.current;o&&(o.style.height=`${a}px`)},[a]),e.useEffect(()=>{const o=()=>i();return window.addEventListener("resize",o),()=>window.removeEventListener("resize",o)},[i]),{textareaRef:t,adjustHeight:i}}const K=48,U=164;S=function({onSubmit:a,disabled:r,enableTool:t,enableFile:i,placeholder:o,minHeight:u,maxHeight:f,className:n,height:m,onChange:d,value:p}){const[c,y]=e.useState(!1),[k,b]=e.useState(""),{textareaRef:C,adjustHeight:j}=B({minHeight:u||K,maxHeight:f||U}),[g,x]=e.useState(!0),l=e.useCallback(async h=>{try{y(!0),await a(k,h)&&b("")}finally{y(!1)}},[k,a]),w=e.useMemo(()=>({...f?{maxHeight:`${f}px`}:{},...m?{height:`${m}px`}:{}}),[f,m]);return s.jsx("div",{className:v("w-full py-4 max-w-xl",n),children:s.jsx("div",{className:"relative w-full mx-auto",children:s.jsxs("div",{className:"relative flex flex-col",children:[s.jsx("div",{className:"overflow-y-auto",style:w,children:s.jsx(E,{id:"ai-input-04",value:(d?p:k)||"",disabled:r||c,placeholder:o,className:"w-full rounded-xl rounded-b-none px-4 py-3 bg-black/5 dark:bg-white/5 border-none dark:text-white placeholder:text-black/70 dark:placeholder:text-white/70 resize-none focus-visible:ring-0 leading-[1.2]",ref:C,onKeyDown:h=>{h.key==="Enter"&&!h.shiftKey&&(h.preventDefault(),l(h))},onChange:h=>{d||b(h.target.value),j(),d==null||d(h)}})}),s.jsxs("div",{className:"h-12 bg-black/5 dark:bg-white/5 rounded-b-xl",children:[s.jsxs("div",{className:"absolute left-3 bottom-3 flex items-center gap-2",children:[i?s.jsxs("label",{className:"cursor-pointer rounded-lg p-2 bg-black/5 dark:bg-white/5",children:[s.jsx("input",{type:"file",className:"hidden"}),s.jsx(R,{name:"paperclip",className:"w-4 h-4 text-black/40 dark:text-white/40 hover:text-black dark:hover:text-white transition-colors"})]}):void 0,t?s.jsxs("button",{type:"button",onClick:()=>{x(!g)},className:v("rounded-full transition-all flex items-center gap-2 px-1.5 py-1 border h-8",g?"bg-sky-500/15 border-sky-400 text-sky-500":"bg-black/5 dark:bg-white/5 border-transparent text-black/40 dark:text-white/40 hover:text-black dark:hover:text-white"),children:[s.jsx("div",{className:"w-4 h-4 flex items-center justify-center flex-shrink-0",children:s.jsx(z.div,{animate:{rotate:g?180:0,scale:g?1.1:1},whileHover:{rotate:g?180:15,scale:1.1,transition:{type:"spring",stiffness:300,damping:10}},transition:{type:"spring",stiffness:260,damping:25},children:s.jsx(R,{name:"globe",className:v("w-4 h-4",g?"text-sky-500":"text-inherit")})})}),s.jsx(H,{children:g&&s.jsx(z.span,{initial:{width:0,opacity:0},animate:{width:"auto",opacity:1},exit:{width:0,opacity:0},transition:{duration:.2},className:"text-sm overflow-hidden whitespace-nowrap text-sky-500 flex-shrink-0",children:"Search"})})]}):void 0]}),s.jsx("div",{className:"absolute right-3 bottom-3",children:s.jsx("button",{type:"button",disabled:r||c,onClick:h=>{l(h)},className:v("rounded-lg p-2",d&&p||k?"bg-sky-500/15 text-sky-500":"bg-black/5 dark:bg-white/5 text-black/40 dark:text-white/40 hover:text-black dark:hover:text-white"),children:s.jsx(R,{name:"send",className:"w-4 h-4"})})})]})]})})})},L=q,T=J,P=e.forwardRef(({className:a,align:r="center",sideOffset:t=4,...i},o)=>s.jsx(Z,{children:s.jsx(I,{ref:o,align:r,sideOffset:t,className:v("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...i})})),P.displayName=I.displayName});export{S as A,L as P,E as T,te as __tla,P as a,T as b};
