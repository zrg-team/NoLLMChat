import{r as e,M as G,j as s,f as S,P as J,h as Q,i as Y,k as Z,c as v,L as $,m as T,__tla as ee}from"./index-8-pJaDMF.js";import{R as te,T as se,P as ae,C as X,__tla as ie}from"./index-B7J2WeK0.js";let I,A,E,D,_,ne=Promise.all([(()=>{try{return ee}catch{}})(),(()=>{try{return ie}catch{}})()]).then(async()=>{class F extends e.Component{getSnapshotBeforeUpdate(n){const t=this.props.childRef.current;if(t&&n.isPresent&&!this.props.isPresent){const r=t.offsetParent,o=r instanceof HTMLElement&&r.offsetWidth||0,i=this.props.sizeRef.current;i.height=t.offsetHeight||0,i.width=t.offsetWidth||0,i.top=t.offsetTop,i.left=t.offsetLeft,i.right=o-i.width-i.left}return null}componentDidUpdate(){}render(){return this.props.children}}function K({children:a,isPresent:n,anchorX:t}){const r=e.useId(),o=e.useRef(null),i=e.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:u}=e.useContext(G);return e.useInsertionEffect(()=>{const{width:w,height:d,top:p,left:c,right:g}=i.current;if(n||!o.current||!w||!d)return;const x=t==="left"?`left: ${c}`:`right: ${g}`;o.current.dataset.motionPopId=r;const h=document.createElement("style");return u&&(h.nonce=u),document.head.appendChild(h),h.sheet&&h.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${w}px !important;
            height: ${d}px !important;
            ${x}px !important;
            top: ${p}px !important;
          }
        `),()=>{document.head.removeChild(h)}},[n]),s.jsx(F,{isPresent:n,childRef:o,sizeRef:i,children:e.cloneElement(a,{ref:o})})}const O=({children:a,initial:n,isPresent:t,onExitComplete:r,custom:o,presenceAffectsLayout:i,mode:u,anchorX:w})=>{const d=S(U),p=e.useId(),c=e.useCallback(x=>{d.set(x,!0);for(const h of d.values())if(!h)return;r&&r()},[d,r]),g=e.useMemo(()=>({id:p,initial:n,isPresent:t,custom:o,onExitComplete:c,register:x=>(d.set(x,!1),()=>d.delete(x))}),i?[Math.random(),c]:[t,c]);return e.useMemo(()=>{d.forEach((x,h)=>d.set(h,!1))},[t]),e.useEffect(()=>{!t&&!d.size&&r&&r()},[t]),u==="popLayout"&&(a=s.jsx(K,{isPresent:t,anchorX:w,children:a})),s.jsx(J.Provider,{value:g,children:a})};function U(){return new Map}const N=a=>a.key||"";function M(a){const n=[];return e.Children.forEach(a,t=>{e.isValidElement(t)&&n.push(t)}),n}let z;z=({children:a,custom:n,initial:t=!0,onExitComplete:r,presenceAffectsLayout:o=!0,mode:i="sync",propagate:u=!1,anchorX:w="left"})=>{const[d,p]=Q(u),c=e.useMemo(()=>M(a),[a]),g=u&&!d?[]:c.map(N),x=e.useRef(!0),h=e.useRef(c),b=S(()=>new Map),[R,P]=e.useState(c),[f,C]=e.useState(c);Y(()=>{x.current=!1,h.current=c;for(let l=0;l<f.length;l++){const m=N(f[l]);g.includes(m)?b.delete(m):b.get(m)!==!0&&b.set(m,!1)}},[f,g.length,g.join("-")]);const y=[];if(c!==R){let l=[...c];for(let m=0;m<f.length;m++){const k=f[m],H=N(k);g.includes(H)||(l.splice(m,0,k),y.push(k))}return i==="wait"&&y.length&&(l=y),C(M(l)),P(c),null}const{forceRender:j}=e.useContext(Z);return s.jsx(s.Fragment,{children:f.map(l=>{const m=N(l),k=u&&!d?!1:c===f||g.includes(m),H=()=>{if(b.has(m))b.set(m,!0);else return;let L=!0;b.forEach(q=>{q||(L=!1)}),L&&(j==null||j(),C(h.current),u&&(p==null||p()),r&&r())};return s.jsx(O,{isPresent:k,initial:!x.current||t?void 0:!1,custom:n,presenceAffectsLayout:o,mode:i,onExitComplete:k?void 0:H,anchorX:w,children:l},m)})})},E=e.forwardRef(({className:a,...n},t)=>s.jsx("textarea",{className:v("flex min-h-[100px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-0 disabled:cursor-not-allowed disabled:opacity-50",a),ref:t,...n})),E.displayName="Textarea";function W({minHeight:a,maxHeight:n}){const t=e.useRef(null),r=e.useCallback(o=>{const i=t.current;if(!i)return;if(o){i.style.height=`${a}px`;return}i.style.height=`${a}px`;const u=Math.max(a,Math.min(i.scrollHeight,n));i.style.height=`${u}px`},[a,n]);return e.useEffect(()=>{const o=t.current;o&&(o.style.height=`${a}px`)},[a]),e.useEffect(()=>{const o=()=>r();return window.addEventListener("resize",o),()=>window.removeEventListener("resize",o)},[r]),{textareaRef:t,adjustHeight:r}}const B=48,V=164;I=function({onSubmit:a,disabled:n,enableTool:t,enableFile:r,placeholder:o,minHeight:i,maxHeight:u,className:w,height:d,onChange:p,value:c}){const[g,x]=e.useState(!1),[h,b]=e.useState(""),{textareaRef:R,adjustHeight:P}=W({minHeight:i||B,maxHeight:u||V}),[f,C]=e.useState(!0),y=e.useCallback(async l=>{try{x(!0),await a(h,l)&&b("")}finally{x(!1)}},[h,a]),j=e.useMemo(()=>({...u?{maxHeight:`${u}px`}:{},...d?{height:`${d}px`}:{}}),[u,d]);return s.jsx("div",{className:v("w-full py-4 max-w-xl",w),children:s.jsx("div",{className:"relative w-full mx-auto",children:s.jsxs("div",{className:"relative flex flex-col",children:[s.jsx("div",{className:"overflow-y-auto",style:j,children:s.jsx(E,{id:"ai-input-04",value:(p?c:h)||"",disabled:n||g,placeholder:o,className:"w-full rounded-xl rounded-b-none px-4 py-3 bg-black/5 dark:bg-white/5 border-none dark:text-white placeholder:text-black/70 dark:placeholder:text-white/70 resize-none focus-visible:ring-0 leading-[1.2]",ref:R,onKeyDown:l=>{l.key==="Enter"&&!l.shiftKey&&(l.preventDefault(),y(l))},onChange:l=>{p||b(l.target.value),P(),p==null||p(l)}})}),s.jsxs("div",{className:"h-12 bg-black/5 dark:bg-white/5 rounded-b-xl",children:[s.jsxs("div",{className:"absolute left-3 bottom-3 flex items-center gap-2",children:[r?s.jsxs("label",{className:"cursor-pointer rounded-lg p-2 bg-black/5 dark:bg-white/5",children:[s.jsx("input",{type:"file",className:"hidden"}),s.jsx($,{name:"paperclip",className:"w-4 h-4 text-black/40 dark:text-white/40 hover:text-black dark:hover:text-white transition-colors"})]}):void 0,t?s.jsxs("button",{type:"button",onClick:()=>{C(!f)},className:v("rounded-full transition-all flex items-center gap-2 px-1.5 py-1 border h-8",f?"bg-sky-500/15 border-sky-400 text-sky-500":"bg-black/5 dark:bg-white/5 border-transparent text-black/40 dark:text-white/40 hover:text-black dark:hover:text-white"),children:[s.jsx("div",{className:"w-4 h-4 flex items-center justify-center flex-shrink-0",children:s.jsx(T.div,{animate:{rotate:f?180:0,scale:f?1.1:1},whileHover:{rotate:f?180:15,scale:1.1,transition:{type:"spring",stiffness:300,damping:10}},transition:{type:"spring",stiffness:260,damping:25},children:s.jsx($,{name:"globe",className:v("w-4 h-4",f?"text-sky-500":"text-inherit")})})}),s.jsx(z,{children:f&&s.jsx(T.span,{initial:{width:0,opacity:0},animate:{width:"auto",opacity:1},exit:{width:0,opacity:0},transition:{duration:.2},className:"text-sm overflow-hidden whitespace-nowrap text-sky-500 flex-shrink-0",children:"Search"})})]}):void 0]}),s.jsx("div",{className:"absolute right-3 bottom-3",children:s.jsx("button",{type:"button",disabled:n||g,onClick:l=>{y(l)},className:v("rounded-lg p-2",p&&c||h?"bg-sky-500/15 text-sky-500":"bg-black/5 dark:bg-white/5 text-black/40 dark:text-white/40 hover:text-black dark:hover:text-white"),children:s.jsx($,{name:"send",className:"w-4 h-4"})})})]})]})})})},A=te,D=se,_=e.forwardRef(({className:a,align:n="center",sideOffset:t=4,...r},o)=>s.jsx(ae,{children:s.jsx(X,{ref:o,align:n,sideOffset:t,className:v("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...r})})),_.displayName=X.displayName});export{I as A,A as P,E as T,ne as __tla,D as a,_ as b};
