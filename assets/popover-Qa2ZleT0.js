import{r as e,M as Y,j as s,m as L,n as G,o as J,p as Q,q as Z,c as v,L as _,s as S,__tla as ee}from"./index-DWQzdqsc.js";import{P as te,C as T,R as se,T as ae,__tla as ne}from"./index-BtRrMOaN.js";let X,A,C,D,$,ie=Promise.all([(()=>{try{return ee}catch{}})(),(()=>{try{return ne}catch{}})()]).then(async()=>{class F extends e.Component{getSnapshotBeforeUpdate(i){const t=this.props.childRef.current;if(t&&i.isPresent&&!this.props.isPresent){const r=t.offsetParent,o=r instanceof HTMLElement&&r.offsetWidth||0,n=this.props.sizeRef.current;n.height=t.offsetHeight||0,n.width=t.offsetWidth||0,n.top=t.offsetTop,n.left=t.offsetLeft,n.right=o-n.width-n.left}return null}componentDidUpdate(){}render(){return this.props.children}}function O({children:a,isPresent:i,anchorX:t}){const r=e.useId(),o=e.useRef(null),n=e.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:u}=e.useContext(Y);return e.useInsertionEffect(()=>{const{width:w,height:d,top:f,left:c,right:g}=n.current;if(i||!o.current||!w||!d)return;const x=t==="left"?`left: ${c}`:`right: ${g}`;o.current.dataset.motionPopId=r;const h=document.createElement("style");return u&&(h.nonce=u),document.head.appendChild(h),h.sheet&&h.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${w}px !important;
            height: ${d}px !important;
            ${x}px !important;
            top: ${f}px !important;
          }
        `),()=>{document.head.removeChild(h)}},[i]),s.jsx(F,{isPresent:i,childRef:o,sizeRef:n,children:e.cloneElement(a,{ref:o})})}const K=({children:a,initial:i,isPresent:t,onExitComplete:r,custom:o,presenceAffectsLayout:n,mode:u,anchorX:w})=>{const d=L(U),f=e.useId(),c=e.useCallback(x=>{d.set(x,!0);for(const h of d.values())if(!h)return;r&&r()},[d,r]),g=e.useMemo(()=>({id:f,initial:i,isPresent:t,custom:o,onExitComplete:c,register:x=>(d.set(x,!1),()=>d.delete(x))}),n?[Math.random(),c]:[t,c]);return e.useMemo(()=>{d.forEach((x,h)=>d.set(h,!1))},[t]),e.useEffect(()=>{!t&&!d.size&&r&&r()},[t]),u==="popLayout"&&(a=s.jsx(O,{isPresent:t,anchorX:w,children:a})),s.jsx(G.Provider,{value:g,children:a})};function U(){return new Map}const N=a=>a.key||"";function M(a){const i=[];return e.Children.forEach(a,t=>{e.isValidElement(t)&&i.push(t)}),i}let I;I=({children:a,custom:i,initial:t=!0,onExitComplete:r,presenceAffectsLayout:o=!0,mode:n="sync",propagate:u=!1,anchorX:w="left"})=>{const[d,f]=J(u),c=e.useMemo(()=>M(a),[a]),g=u&&!d?[]:c.map(N),x=e.useRef(!0),h=e.useRef(c),b=L(()=>new Map),[R,P]=e.useState(c),[p,E]=e.useState(c);Q(()=>{x.current=!1,h.current=c;for(let l=0;l<p.length;l++){const m=N(p[l]);g.includes(m)?b.delete(m):b.get(m)!==!0&&b.set(m,!1)}},[p,g.length,g.join("-")]);const y=[];if(c!==R){let l=[...c];for(let m=0;m<p.length;m++){const k=p[m],H=N(k);g.includes(H)||(l.splice(m,0,k),y.push(k))}return n==="wait"&&y.length&&(l=y),E(M(l)),P(c),null}const{forceRender:j}=e.useContext(Z);return s.jsx(s.Fragment,{children:p.map(l=>{const m=N(l),k=u&&!d?!1:c===p||g.includes(m),H=()=>{if(b.has(m))b.set(m,!0);else return;let z=!0;b.forEach(B=>{B||(z=!1)}),z&&(j==null||j(),E(h.current),u&&(f==null||f()),r&&r())};return s.jsx(K,{isPresent:k,initial:!x.current||t?void 0:!1,custom:i,presenceAffectsLayout:o,mode:n,onExitComplete:k?void 0:H,anchorX:w,children:l},m)})})},C=e.forwardRef(({className:a,...i},t)=>s.jsx("textarea",{className:v("flex min-h-[100px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-0 disabled:cursor-not-allowed disabled:opacity-50",a),ref:t,...i})),C.displayName="Textarea";function V({minHeight:a,maxHeight:i}){const t=e.useRef(null),r=e.useCallback(o=>{const n=t.current;if(!n)return;if(o){n.style.height=`${a}px`;return}n.style.height=`${a}px`;const u=Math.max(a,Math.min(n.scrollHeight,i??Number.POSITIVE_INFINITY));n.style.height=`${u}px`},[a,i]);return e.useEffect(()=>{const o=t.current;o&&(o.style.height=`${a}px`)},[a]),e.useEffect(()=>{const o=()=>r();return window.addEventListener("resize",o),()=>window.removeEventListener("resize",o)},[r]),{textareaRef:t,adjustHeight:r}}const W=48,q=164;X=function({onSubmit:a,disabled:i,enableTool:t,enableFile:r,placeholder:o,minHeight:n,maxHeight:u,className:w,height:d,onChange:f,value:c}){const[g,x]=e.useState(!1),[h,b]=e.useState(""),{textareaRef:R,adjustHeight:P}=V({minHeight:n||W,maxHeight:u||q}),[p,E]=e.useState(!0),y=e.useCallback(async l=>{try{x(!0),await a(h,l)&&b("")}finally{x(!1)}},[h,a]),j=e.useMemo(()=>({...u?{maxHeight:`${u}px`}:{},...d?{height:`${d}px`}:{}}),[u,d]);return s.jsx("div",{className:v("w-full py-4 max-w-xl",w),children:s.jsx("div",{className:"relative w-full mx-auto",children:s.jsxs("div",{className:"relative flex flex-col",children:[s.jsx("div",{className:"overflow-y-auto",style:j,children:s.jsx(C,{id:"ai-input-04",value:(f?c:h)||"",disabled:i||g,placeholder:o,className:"w-full rounded-xl rounded-b-none px-4 py-3 bg-black/5 dark:bg-white/5 border-none dark:text-white placeholder:text-black/70 dark:placeholder:text-white/70 resize-none focus-visible:ring-0 leading-[1.2]",ref:R,onKeyDown:l=>{l.key==="Enter"&&!l.shiftKey&&(l.preventDefault(),y(l))},onChange:l=>{f||b(l.target.value),P(),f==null||f(l)}})}),s.jsxs("div",{className:"h-12 bg-black/5 dark:bg-white/5 rounded-b-xl",children:[s.jsxs("div",{className:"absolute left-3 bottom-3 flex items-center gap-2",children:[r?s.jsxs("label",{className:"cursor-pointer rounded-lg p-2 bg-black/5 dark:bg-white/5",children:[s.jsx("input",{type:"file",className:"hidden"}),s.jsx(_,{name:"paperclip",className:"w-4 h-4 text-black/40 dark:text-white/40 hover:text-black dark:hover:text-white transition-colors"})]}):void 0,t?s.jsxs("button",{type:"button",onClick:()=>{E(!p)},className:v("rounded-full transition-all flex items-center gap-2 px-1.5 py-1 border h-8",p?"bg-sky-500/15 border-sky-400 text-sky-500":"bg-black/5 dark:bg-white/5 border-transparent text-black/40 dark:text-white/40 hover:text-black dark:hover:text-white"),children:[s.jsx("div",{className:"w-4 h-4 flex items-center justify-center flex-shrink-0",children:s.jsx(S.div,{animate:{rotate:p?180:0,scale:p?1.1:1},whileHover:{rotate:p?180:15,scale:1.1,transition:{type:"spring",stiffness:300,damping:10}},transition:{type:"spring",stiffness:260,damping:25},children:s.jsx(_,{name:"globe",className:v("w-4 h-4",p?"text-sky-500":"text-inherit")})})}),s.jsx(I,{children:p&&s.jsx(S.span,{initial:{width:0,opacity:0},animate:{width:"auto",opacity:1},exit:{width:0,opacity:0},transition:{duration:.2},className:"text-sm overflow-hidden whitespace-nowrap text-sky-500 flex-shrink-0",children:"Search"})})]}):void 0]}),s.jsx("div",{className:"absolute right-3 bottom-3",children:s.jsx("button",{type:"button",disabled:i||g,onClick:l=>{y(l)},className:v("rounded-lg p-2",f&&c||h?"bg-sky-500/15 text-sky-500":"bg-black/5 dark:bg-white/5 text-black/40 dark:text-white/40 hover:text-black dark:hover:text-white"),children:s.jsx(_,{name:"send",className:"w-4 h-4"})})})]})]})})})},A=se,D=ae,$=e.forwardRef(({className:a,align:i="center",sideOffset:t=4,...r},o)=>s.jsx(te,{children:s.jsx(T,{ref:o,align:i,sideOffset:t,className:v("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...r})})),$.displayName=T.displayName});export{X as A,A as P,C as T,ie as __tla,D as a,$ as b};
