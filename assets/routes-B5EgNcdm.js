const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/few_shot-CD6ETBRz.js","assets/index-qjKbJVgh.js","assets/index-bwSGYw91.css","assets/copy-BKWr-XNy.js","assets/createLucideIcon-BnY-9zHM.js","assets/refresh-ccw-CtKxalRQ.js","assets/volume-2-DSUVbsn_.js","assets/index-CCJ1qLS7.js","assets/pdf-3CM_BNMd.js","assets/pdf.min-iEKkduSH.js","assets/pdf.worker.min-D9Yt29vd.js","assets/index-B7J5gepj.js","assets/objectWithoutPropertiesLoose-BjXSgPXB.js","assets/index-ZXar2Ocy.js","assets/index-Cr8Tc6mT.css","assets/PlateEditor-SF0quxx3.js","assets/chevron-down-xHND57Wo.js","assets/chevron-right-AVfxHoMz.js","assets/check-D4TBZpjH.js","assets/ellipsis-8dW5N3ec.js","assets/highlighter-B07iyJMT.js","assets/keyboard-D-7VVp18.js","assets/superscript-BtDH7vqk.js","assets/subscript-BIVkEom2.js","assets/align-left-qf1V6hyv.js","assets/align-center-Cv_Tx1Rs.js","assets/align-right-CS1JMFfP.js","assets/align-justify-C4tvP3xC.js","assets/plus-BJjD2Mmk.js","assets/eraser-DHt0m7zL.js","assets/star-D3cN7EX4.js","assets/flag-ocyPhb1a.js","assets/apple-BVrgWppU.js","assets/clock-BxD2znFh.js","assets/leaf-BdpNLu7y.js","assets/lightbulb-BPwekmTT.js","assets/smile-Cn1G3Ui8.js","assets/compass-6FjrSe7s.js","assets/music-K_3rlp34.js","assets/x-D12dvtlV.js","assets/search-CE-D1c0Y.js","assets/external-link-DGCb6XXD.js","assets/redo-2-CFpnzkM0.js","assets/undo-2-cU9gibnP.js","assets/list-CjKPgMIb.js","assets/list-ordered-CHB-7OD8.js","assets/list-todo-Cv-QnD4n.js","assets/indent-increase-DF2x3zk_.js","assets/pilcrow-B4rmP5Hi.js","assets/heading-1-B5f25IYL.js","assets/heading-2-xULpGGTJ.js","assets/heading-3-D3XzKtGf.js","assets/table--8V9bS-r.js","assets/file-code-DVFIvwaO.js","assets/quote-BFgYdOg4.js","assets/minus-Ba0hJeWZ.js","assets/square-gKlzFWx3.js","assets/image-DbEIl-CO.js","assets/table-of-contents-DNJqeRM2.js","assets/columns-3-MXVvf3ho.js","assets/link-2-DxN_VfVS.js","assets/calendar-CkqvJkQF.js","assets/wrap-text-CfGPGIue.js","assets/link-Bs2gYRmF.js","assets/pen-CvWDVom9.js","assets/eye-CgjQftMf.js","assets/indent-decrease-CGFFkfxN.js","assets/trash-B07Fpp2I.js","assets/rectangle-vertical-CQnTmpzj.js","assets/rectangle-horizontal-CKbpIix0.js","assets/list-collapse-BtalH32b.js","assets/pointer-C71W1jDp.js","assets/wand-sparkles-BYHE294n.js","assets/bold-CoDLyRsk.js","assets/italic-B-wSd-q8.js","assets/underline-S2zZjWb1.js","assets/strikethrough-Bp7cmGus.js","assets/code-xml-3A5dMjIO.js","assets/baseline-TouW1c_T.js","assets/paint-bucket-UEEaaVpp.js","assets/arrow-up-to-line-BRnt0zIB.js","assets/circle-CAbvLIUI.js","assets/text-EkqOgOM8.js","assets/unlink-BmO0a-NB.js","assets/arrow-left-DBjq38qa.js","assets/arrow-right-D7fufVxs.js","assets/download-qJIdv0ZJ.js","assets/chevrons-up-down-CyuRfS7g.js","assets/trash-2-D0ZGxra6.js","assets/chevron-left-D6VBwNs1.js","assets/sparkles-Lob0eNxo.js","assets/combine-BxaWIW9d.js","assets/ungroup-f4-MhbKx.js","assets/grip-vertical-BZ8wxEsa.js","assets/pen-line-D-rkLNGZ.js","assets/badge-help-zu63_dzk.js","assets/wand-ChpJE98U.js","assets/list-end-Cpphgyba.js","assets/list-plus-BxnoeC3c.js","assets/list-minus-BNvIDYw-.js","assets/feather-UX6X4B-g.js","assets/album-Blfn59gy.js","assets/corner-up-left-B1ALq7UF.js","assets/loader-circle-CjvnqhEh.js","assets/use-prevent-pitch-zoom-BP-0CKze.js","assets/PlateEditor-BQPW60dV.css","assets/index-DJCPR4q8.js","assets/index-BH8hxkiQ.js","assets/index-HSnfLTSA.css","assets/CodeContainerApp-BHXpRi08.js","assets/folder-open-DQARm9i7.js","assets/folder-BXjPDTF1.js","assets/file-dlLyjDg9.js"])))=>i.map(i=>d[i]);
import{r as g,M as jE,j as h,u as Uh,P as fwe,a as EE,L as pwe,m as hwe,c as mwe,f as D9,i as ywe,b as SE,d as L9,e as gwe,g as vwe,h as sn,l as Or,k as Au,n as xn,R as bwe,o as Vn,p as en,q as Oe,s as he,t as Nn,v as rt,w as K,x as qr,S as Yr,y as Fo,D as Tu,z as xwe,A as Ru,B as ue,C as F9,E as wwe,F as Me,G as Iu,H as Ze,I as Du,J as ma,K as Kt,N as Bt,O as ce,Q as Lu,T as B9,U as _we,V as Hh,W as Wh,X as Xe,Y as $9,Z as V,_ as Js,$ as jwe,a0 as Ewe,a1 as z9,a2 as oe,a3 as Swe,a4 as ya,a5 as Cwe,a6 as Nt,a7 as Fu,a8 as Owe,a9 as li,aa as Bu,ab as V9,ac as $u,ad as Nwe,ae as nr,af as qh,ag as Mwe,ah as kwe,ai as CE,aj as U9,ak as Pwe,al as Awe,am as Twe,an as Rwe,ao as Gs,ap as Iwe,aq as Dwe,ar as H9,as as Lwe,at as Fwe,au as Bwe,av as $we,aw as W9,ax as q9,ay as OE,az as lt,aA as zwe,aB as NE,aC as Vwe,aD as Uwe,aE as Hwe,aF as Wwe,__tla as qwe}from"./index-qjKbJVgh.js";import Ywe,{__tla as Kwe}from"./copy-BKWr-XNy.js";import Xwe,{__tla as Qwe}from"./refresh-ccw-CtKxalRQ.js";import Jwe,{__tla as Gwe}from"./volume-2-DSUVbsn_.js";let Y9,ME,Yh,kE,PE,Zs,Kh,ec,ga,zu,Vu,Xh,AE,TE,ui,RE,IE,DE,LE,Qh,FE,BE,$E,zE,VE,UE,HE,Kr,Jh,tc,Bo,nc,Gh,rc,Zh,em,K9,WE,X9,qE,tm,nm,rm,om,YE,KE,Uu,am,im,sm,cm,lm,um,dm,fm,pm,hm,mm,ym,gm,vm,bm,XE,xm,QE,Q9,mt,JE,GE,J9,wm,oc,ZE,G9,_m,jm,Em,eS,Sm,Cm,Om,Nm,Mm,km,tS,nS,Z9,rS,ez,oS,Pm,Am,Tm,ac,ic,va,ba,Hu,sc,di,fi,tz,aS,iS,sS,Rm,Im,cS,Qe,Mn,Ae,cn,ln,Dm,Lm,lS,uS,Fm,Bm,dt,dS,$m,zm,fS,pS,hS,pi,$o,nz,mS,rr,Vm,yS,gS,hi,or,Um,Hm,vS,Nr,bS,Wm,qm,xS,wS,_S,Ym,un,cc,Km,lc,mi,jS,Zwe=Promise.all([(()=>{try{return qwe}catch{}})(),(()=>{try{return Kwe}catch{}})(),(()=>{try{return Qwe}catch{}})(),(()=>{try{return Gwe}catch{}})()]).then(async()=>{class oz extends g.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function az({children:e,isPresent:t}){const n=g.useId(),r=g.useRef(null),o=g.useRef({width:0,height:0,top:0,left:0}),{nonce:a}=g.useContext(jE);return g.useInsertionEffect(()=>{const{width:i,height:s,top:c,left:l}=o.current;if(t||!r.current||!i||!s)return;r.current.dataset.motionPopId=n;const u=document.createElement("style");return a&&(u.nonce=a),document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${i}px !important;
            height: ${s}px !important;
            top: ${c}px !important;
            left: ${l}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[t]),h.jsx(oz,{isPresent:t,childRef:r,sizeRef:o,children:g.cloneElement(e,{ref:r})})}const iz=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:o,presenceAffectsLayout:a,mode:i})=>{const s=Uh(sz),c=g.useId(),l=g.useCallback(d=>{s.set(d,!0);for(const f of s.values())if(!f)return;r&&r()},[s,r]),u=g.useMemo(()=>({id:c,initial:t,isPresent:n,custom:o,onExitComplete:l,register:d=>(s.set(d,!1),()=>s.delete(d))}),a?[Math.random(),l]:[n,l]);return g.useMemo(()=>{s.forEach((d,f)=>s.set(f,!1))},[n]),g.useEffect(()=>{!n&&!s.size&&r&&r()},[n]),i==="popLayout"&&(e=h.jsx(az,{isPresent:n,children:e})),h.jsx(fwe.Provider,{value:u,children:e})};function sz(){return new Map}const Wu=e=>e.key||"";function SS(e){const t=[];return g.Children.forEach(e,n=>{g.isValidElement(n)&&t.push(n)}),t}const cz=({children:e,exitBeforeEnter:t,custom:n,initial:r=!0,onExitComplete:o,presenceAffectsLayout:a=!0,mode:i="sync"})=>{const s=g.useMemo(()=>SS(e),[e]),c=s.map(Wu),l=g.useRef(!0),u=g.useRef(s),d=Uh(()=>new Map),[f,p]=g.useState(s),[y,m]=g.useState(s);EE(()=>{l.current=!1,u.current=s;for(let x=0;x<y.length;x++){const _=Wu(y[x]);c.includes(_)?d.delete(_):d.get(_)!==!0&&d.set(_,!1)}},[y,c.length,c.join("-")]);const v=[];if(s!==f){let x=[...s];for(let _=0;_<y.length;_++){const w=y[_],j=Wu(w);c.includes(j)||(x.splice(_,0,w),v.push(w))}i==="wait"&&v.length&&(x=v),m(SS(x)),p(s);return}const{forceRender:b}=g.useContext(pwe);return h.jsx(h.Fragment,{children:y.map(x=>{const _=Wu(x),w=s===y||c.includes(_),j=()=>{if(d.has(_))d.set(_,!0);else return;let E=!0;d.forEach(S=>{S||(E=!1)}),E&&(b==null||b(),m(u.current),o&&o())};return h.jsx(iz,{isPresent:w,initial:!l.current||r?void 0:!1,custom:w?void 0:n,presenceAffectsLayout:a,mode:i,onExitComplete:w?void 0:j,children:x},_)})})};function Xm(e){const t=Uh(()=>hwe(e)),{isStatic:n}=g.useContext(jE);if(n){const[,r]=g.useState(e);g.useEffect(()=>t.on("change",r),[])}return t}function CS(e,t){const n=Xm(t()),r=()=>n.set(t());return r(),EE(()=>{const o=()=>D9.preRender(r,!1,!0),a=e.map(i=>i.on("change",o));return()=>{a.forEach(i=>i()),mwe(r)}}),n}const lz=e=>e&&typeof e=="object"&&e.mix,uz=e=>lz(e)?e.mix:void 0;function dz(...e){const t=!Array.isArray(e[0]),n=t?0:-1,r=e[0+n],o=e[1+n],a=e[2+n],i=e[3+n],s=ywe(o,a,{mixer:uz(a[0]),...i});return t?s(r):s}function fz(e){SE.current=[],e();const t=CS(SE.current,e);return SE.current=void 0,t}function OS(e,t,n,r){if(typeof e=="function")return fz(e);const o=typeof t=="function"?t:dz(t,n,r);return Array.isArray(e)?NS(e,o):NS([e],([a])=>o(a))}function NS(e,t){const n=Uh(()=>[]);return CS(e,()=>{n.length=0;const r=e.length;for(let o=0;o<r;o++)n[o]=e[o].get();return t(n)})}function MS(e){return typeof e=="number"?e:parseFloat(e)}function pz(e,t={}){const{isStatic:n}=g.useContext(jE),r=g.useRef(null),o=Xm(L9(e)?MS(e.get()):e),a=g.useRef(o.get()),i=g.useRef(()=>{}),s=()=>{const l=r.current;l&&l.time===0&&l.sample(gwe.delta),c(),r.current=vwe({keyframes:[o.get(),a.current],velocity:o.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...t,onUpdate:i.current})},c=()=>{r.current&&r.current.stop()};return g.useInsertionEffect(()=>o.attach((l,u)=>n?u(l):(a.current=l,i.current=u,D9.update(s),o.get()),c),[JSON.stringify(t)]),EE(()=>{if(L9(e))return e.on("change",l=>o.set(MS(l)))},[o]),o}var et=(e=>(e.Started="started",e.Downloading="downloading",e.Downloaded="downloaded",e.Loading="loading",e.Loaded="loaded",e))(et||{}),uc=(e=>(e.LLM="LLM",e.embedding="embedding",e.VLM="VLM",e))(uc||{}),qu=(e=>(e.WebLLM="WebLLM",e.OpenAI="OpenAI",e))(qu||{}),Xr=(e=>(e.Started="started",e.Inprogress="inprogress",e.Success="success",e.Failed="failed",e))(Xr||{}),kn=(e=>(e.Human="human",e.User="user",e.AI="ai",e.System="system",e.Assistant="assistant",e.Tool="tool",e.FewShotExample="few_shot_example",e))(kn||{}),Yu=(e=>(e.Started="started",e.Inprogress="inprogress",e.Done="done",e))(Yu||{}),Pn=(e=>(e.Chat="chat",e.FewShotExample="few_shot_example",e))(Pn||{}),yi=(e=>(e.VECTOR_DATABASE_RETREIVER="VECTOR_DATABASE_RETREIVER",e))(yi||{});let kS,Qm;kS=async(e,t)=>{let n="",r="",o;const a=[];await e;for await(const i of e)i&&(Array.isArray(i)?(a.push(...i.map(s=>s.content)),a!=null&&a.length&&(r=a.join(""),t==null||t({chunk:i,content:r}))):(n=typeof i=="object"&&"content"in i?`${i.content}`:`${i}`,t==null||t({chunk:i,content:n})),o=i);return{lastChunk:o,content:n}},Qm=()=>{const e=sn(r=>r.toolsCallingStream),t=sn(r=>r.structuredStream),n=sn(r=>r.stream);return{stream:g.useCallback(async(r,{tools:o,schemas:a,onMessageUpdate:i,onMessageFinish:s})=>{var d;let c;if(a!=null&&a.length?(a&&(a==null?void 0:a.length)>1&&Or("Multiple schemas are not supported. Only the first schema will be used."),c=t(((d=a==null?void 0:a[0])==null?void 0:d.schema_items)||[],r)):o!=null&&o.length?c=e(o,r):c=n(r),!c)throw new Error("Stream is not supported");const{lastChunk:l,content:u}=await kS(c,i);return s==null||s({content:u,lastChunk:l}),{lastChunk:l,content:u}},[n,t,e])}},Kh=globalThis||void 0||self;var dc={},PS;function hz(){if(PS)return dc;PS=1,Object.defineProperty(dc,"__esModule",{value:!0}),dc.parse=i,dc.serialize=l;const e=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,t=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,o=Object.prototype.toString,a=(()=>{const f=function(){};return f.prototype=Object.create(null),f})();function i(f,p){const y=new a,m=f.length;if(m<2)return y;const v=(p==null?void 0:p.decode)||u;let b=0;do{const x=f.indexOf("=",b);if(x===-1)break;const _=f.indexOf(";",b),w=_===-1?m:_;if(x>w){b=f.lastIndexOf(";",x-1)+1;continue}const j=s(f,b,x),E=c(f,x,j),S=f.slice(j,E);if(y[S]===void 0){let O=s(f,x+1,w),k=c(f,w,O);const N=v(f.slice(O,k));y[S]=N}b=w+1}while(b<m);return y}function s(f,p,y){do{const m=f.charCodeAt(p);if(m!==32&&m!==9)return p}while(++p<y);return y}function c(f,p,y){for(;p>y;){const m=f.charCodeAt(--p);if(m!==32&&m!==9)return p+1}return y}function l(f,p,y){const m=(y==null?void 0:y.encode)||encodeURIComponent;if(!e.test(f))throw new TypeError(`argument name is invalid: ${f}`);const v=m(p);if(!t.test(v))throw new TypeError(`argument val is invalid: ${p}`);let b=f+"="+v;if(!y)return b;if(y.maxAge!==void 0){if(!Number.isInteger(y.maxAge))throw new TypeError(`option maxAge is invalid: ${y.maxAge}`);b+="; Max-Age="+y.maxAge}if(y.domain){if(!n.test(y.domain))throw new TypeError(`option domain is invalid: ${y.domain}`);b+="; Domain="+y.domain}if(y.path){if(!r.test(y.path))throw new TypeError(`option path is invalid: ${y.path}`);b+="; Path="+y.path}if(y.expires){if(!d(y.expires)||!Number.isFinite(y.expires.valueOf()))throw new TypeError(`option expires is invalid: ${y.expires}`);b+="; Expires="+y.expires.toUTCString()}if(y.httpOnly&&(b+="; HttpOnly"),y.secure&&(b+="; Secure"),y.partitioned&&(b+="; Partitioned"),y.priority)switch(typeof y.priority=="string"?y.priority.toLowerCase():void 0){case"low":b+="; Priority=Low";break;case"medium":b+="; Priority=Medium";break;case"high":b+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${y.priority}`)}if(y.sameSite)switch(typeof y.sameSite=="string"?y.sameSite.toLowerCase():y.sameSite){case!0:case"strict":b+="; SameSite=Strict";break;case"lax":b+="; SameSite=Lax";break;case"none":b+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${y.sameSite}`)}return b}function u(f){if(f.indexOf("%")===-1)return f;try{return decodeURIComponent(f)}catch{return f}}function d(f){return o.call(f)==="[object Date]"}return dc}hz();var AS="popstate";function mz(e={}){function t(r,o){let{pathname:a,search:i,hash:s}=r.location;return gi("",{pathname:a,search:i,hash:s},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(r,o){return typeof o=="string"?o:Qr(o)}return RS(t,n,null,e)}function yz(e={}){function t(o,a){let{pathname:i="/",search:s="",hash:c=""}=Jr(o.location.hash.substring(1));return!i.startsWith("/")&&!i.startsWith(".")&&(i="/"+i),gi("",{pathname:i,search:s,hash:c},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(o,a){let i=o.document.querySelector("base"),s="";if(i&&i.getAttribute("href")){let c=o.location.href,l=c.indexOf("#");s=l===-1?c:c.slice(0,l)}return s+"#"+(typeof a=="string"?a:Qr(a))}function r(o,a){$t(o.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(a)})`)}return RS(t,n,r,e)}function $e(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function $t(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function gz(){return Math.random().toString(36).substring(2,10)}function TS(e,t){return{usr:e.state,key:e.key,idx:t}}function gi(e,t,n=null,r){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Jr(t):t,state:n,key:t&&t.key||r||gz()}}function Qr({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Jr(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function RS(e,t,n,r={}){let{window:o=document.defaultView,v5Compat:a=!1}=r,i=o.history,s="POP",c=null,l=u();l==null&&(l=0,i.replaceState({...i.state,idx:l},""));function u(){return(i.state||{idx:null}).idx}function d(){s="POP";let v=u(),b=v==null?null:v-l;l=v,c&&c({action:s,location:m.location,delta:b})}function f(v,b){s="PUSH";let x=gi(m.location,v,b);n&&n(x,v),l=u()+1;let _=TS(x,l),w=m.createHref(x);try{i.pushState(_,"",w)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;o.location.assign(w)}a&&c&&c({action:s,location:m.location,delta:1})}function p(v,b){s="REPLACE";let x=gi(m.location,v,b);n&&n(x,v),l=u();let _=TS(x,l),w=m.createHref(x);i.replaceState(_,"",w),a&&c&&c({action:s,location:m.location,delta:0})}function y(v){let b=o.location.origin!=="null"?o.location.origin:o.location.href,x=typeof v=="string"?v:Qr(v);return x=x.replace(/ $/,"%20"),$e(b,`No window.location.(origin|href) available to create URL for href: ${x}`),new URL(x,b)}let m={get action(){return s},get location(){return e(o,i)},listen(v){if(c)throw new Error("A history only accepts one active listener");return o.addEventListener(AS,d),c=v,()=>{o.removeEventListener(AS,d),c=null}},createHref(v){return t(o,v)},createURL:y,encodeLocation(v){let b=y(v);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:f,replace:p,go(v){return i.go(v)}};return m}var vz=new Set(["lazy","caseSensitive","path","id","index","children"]);function bz(e){return e.index===!0}function Ku(e,t,n=[],r={}){return e.map((o,a)=>{let i=[...n,String(a)],s=typeof o.id=="string"?o.id:i.join("-");if($e(o.index!==!0||!o.children,"Cannot specify children on an index route"),$e(!r[s],`Found a route id collision on id "${s}".  Route id's must be globally unique within Data Router usages`),bz(o)){let c={...o,...t(o),id:s};return r[s]=c,c}else{let c={...o,...t(o),id:s,children:void 0};return r[s]=c,o.children&&(c.children=Ku(o.children,t,i,r)),c}})}function zo(e,t,n="/"){return Xu(e,t,n,!1)}function Xu(e,t,n,r){let o=typeof t=="string"?Jr(t):t,a=ar(o.pathname||"/",n);if(a==null)return null;let i=IS(e);wz(i);let s=null;for(let c=0;s==null&&c<i.length;++c){let l=Az(a);s=kz(i[c],l,r)}return s}function xz(e,t){let{route:n,pathname:r,params:o}=e;return{id:n.id,pathname:r,params:o,data:t[n.id],handle:n.handle}}function IS(e,t=[],n=[],r=""){let o=(a,i,s)=>{let c={relativePath:s===void 0?a.path||"":s,caseSensitive:a.caseSensitive===!0,childrenIndex:i,route:a};c.relativePath.startsWith("/")&&($e(c.relativePath.startsWith(r),`Absolute route path "${c.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(r.length));let l=Mr([r,c.relativePath]),u=n.concat(c);a.children&&a.children.length>0&&($e(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${l}".`),IS(a.children,t,u,l)),!(a.path==null&&!a.index)&&t.push({path:l,score:Nz(l,a.index),routesMeta:u})};return e.forEach((a,i)=>{var s;if(a.path===""||!((s=a.path)!=null&&s.includes("?")))o(a,i);else for(let c of DS(a.path))o(a,i,c)}),t}function DS(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,o=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return o?[a,""]:[a];let i=DS(r.join("/")),s=[];return s.push(...i.map(c=>c===""?a:[a,c].join("/"))),o&&s.push(...i),s.map(c=>e.startsWith("/")&&c===""?"/":c)}function wz(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:Mz(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var _z=/^:[\w-]+$/,jz=3,Ez=2,Sz=1,Cz=10,Oz=-2,LS=e=>e==="*";function Nz(e,t){let n=e.split("/"),r=n.length;return n.some(LS)&&(r+=Oz),t&&(r+=Ez),n.filter(o=>!LS(o)).reduce((o,a)=>o+(_z.test(a)?jz:a===""?Sz:Cz),r)}function Mz(e,t){return e.length===t.length&&e.slice(0,-1).every((n,r)=>n===t[r])?e[e.length-1]-t[t.length-1]:0}function kz(e,t,n=!1){let{routesMeta:r}=e,o={},a="/",i=[];for(let s=0;s<r.length;++s){let c=r[s],l=s===r.length-1,u=a==="/"?t:t.slice(a.length)||"/",d=Qu({path:c.relativePath,caseSensitive:c.caseSensitive,end:l},u),f=c.route;if(!d&&l&&n&&!r[r.length-1].route.index&&(d=Qu({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},u)),!d)return null;Object.assign(o,d.params),i.push({params:o,pathname:Mr([a,d.pathname]),pathnameBase:Iz(Mr([a,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(a=Mr([a,d.pathnameBase]))}return i}function Qu(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=Pz(e.path,e.caseSensitive,e.end),o=t.match(n);if(!o)return null;let a=o[0],i=a.replace(/(.)\/+$/,"$1"),s=o.slice(1);return{params:r.reduce((c,{paramName:l,isOptional:u},d)=>{if(l==="*"){let p=s[d]||"";i=a.slice(0,a.length-p.length).replace(/(.)\/+$/,"$1")}const f=s[d];return u&&!f?c[l]=void 0:c[l]=(f||"").replace(/%2F/g,"/"),c},{}),pathname:a,pathnameBase:i,pattern:e}}function Pz(e,t=!1,n=!0){$t(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],o="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,i,s)=>(r.push({paramName:i,isOptional:s!=null}),s?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),o+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":e!==""&&e!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,t?void 0:"i"),r]}function Az(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return $t(!1,`The URL path "${e}" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function ar(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function Tz(e,t="/"){let{pathname:n,search:r="",hash:o=""}=typeof e=="string"?Jr(e):e;return{pathname:n?n.startsWith("/")?n:Rz(n,t):t,search:Dz(r),hash:Lz(o)}}function Rz(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function Jm(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function FS(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Ju(e){let t=FS(e);return t.map((n,r)=>r===t.length-1?n.pathname:n.pathnameBase)}function Gu(e,t,n,r=!1){let o;typeof e=="string"?o=Jr(e):(o={...e},$e(!o.pathname||!o.pathname.includes("?"),Jm("?","pathname","search",o)),$e(!o.pathname||!o.pathname.includes("#"),Jm("#","pathname","hash",o)),$e(!o.search||!o.search.includes("#"),Jm("#","search","hash",o)));let a=e===""||o.pathname==="",i=a?"/":o.pathname,s;if(i==null)s=n;else{let d=t.length-1;if(!r&&i.startsWith("..")){let f=i.split("/");for(;f[0]==="..";)f.shift(),d-=1;o.pathname=f.join("/")}s=d>=0?t[d]:"/"}let c=Tz(o,s),l=i&&i!=="/"&&i.endsWith("/"),u=(a||i===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(l||u)&&(c.pathname+="/"),c}var Mr=e=>e.join("/").replace(/\/\/+/g,"/"),Iz=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Dz=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Lz=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,Zu=class{constructor(e,t,n,r=!1){this.status=e,this.statusText=t||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function ed(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var BS=["POST","PUT","PATCH","DELETE"],Fz=new Set(BS),Bz=["GET",...BS],$z=new Set(Bz),zz=new Set([301,302,303,307,308]),Vz=new Set([307,308]),Gm={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Uz={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},fc={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},Zm=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Hz=e=>({hasErrorBoundary:!!e.hasErrorBoundary}),$S="remix-router-transitions",zS=Symbol("ResetLoaderData");function VS(e){const t=e.window?e.window:typeof window<"u"?window:void 0,n=typeof t<"u"&&typeof t.document<"u"&&typeof t.document.createElement<"u";$e(e.routes.length>0,"You must provide a non-empty routes array to createRouter");let r=e.mapRouteProperties||Hz,o={},a=Ku(e.routes,r,void 0,o),i,s=e.basename||"/",c=e.dataStrategy||Xz,l=e.patchRoutesOnNavigation,u={...e.future},d=null,f=new Set,p=null,y=null,m=null,v=e.hydrationData!=null,b=zo(a,e.history.location,s),x=null;if(b==null&&!l){let z=Un(404,{pathname:e.history.location.pathname}),{matches:X,route:ne}=eC(a);b=X,x={[ne.id]:z}}b&&!e.hydrationData&&je(b,a,e.history.location.pathname).active&&(b=null);let _;if(b)if(b.some(z=>z.route.lazy))_=!1;else if(!b.some(z=>z.route.loader))_=!0;else{let z=e.hydrationData?e.hydrationData.loaderData:null,X=e.hydrationData?e.hydrationData.errors:null;if(X){let ne=b.findIndex(de=>X[de.route.id]!==void 0);_=b.slice(0,ne+1).every(de=>!ty(de.route,z,X))}else _=b.every(ne=>!ty(ne.route,z,X))}else{_=!1,b=[];let z=je(null,a,e.history.location.pathname);z.active&&z.matches&&(b=z.matches)}let w,j={historyAction:e.history.action,location:e.history.location,matches:b,initialized:_,navigation:Gm,restoreScrollPosition:e.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||x,fetchers:new Map,blockers:new Map},E="POP",S=!1,O,k=!1,N=new Map,P=null,R=!1,A=!1,C=new Set,M=new Map,T=0,D=-1,I=new Map,L=new Set,B=new Map,U=new Map,F=new Set,H=new Map,J,q=null;function re(){if(d=e.history.listen(({action:z,location:X,delta:ne})=>{if(J){J(),J=void 0;return}$t(H.size===0||ne!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let de=Mt({currentLocation:j.location,nextLocation:X,historyAction:z});if(de&&ne!=null){let Se=new Promise(Pe=>{J=Pe});e.history.go(ne*-1),ke(de,{state:"blocked",location:X,proceed(){ke(de,{state:"proceeding",proceed:void 0,reset:void 0,location:X}),Se.then(()=>e.history.go(ne))},reset(){let Pe=new Map(j.blockers);Pe.set(de,fc),W({blockers:Pe})}});return}return se(z,X)}),n){i7(t,N);let z=()=>s7(t,N);t.addEventListener("pagehide",z),P=()=>t.removeEventListener("pagehide",z)}return j.initialized||se("POP",j.location,{initialHydration:!0}),w}function Z(){d&&d(),P&&P(),f.clear(),O&&O.abort(),j.fetchers.forEach((z,X)=>Sr(X)),j.blockers.forEach((z,X)=>pe(X))}function Y(z){return f.add(z),()=>f.delete(z)}function W(z,X={}){j={...j,...z};let ne=[],de=[];j.fetchers.forEach((Se,Pe)=>{Se.state==="idle"&&(F.has(Pe)?ne.push(Pe):de.push(Pe))}),[...f].forEach(Se=>Se(j,{deletedFetchers:ne,viewTransitionOpts:X.viewTransitionOpts,flushSync:X.flushSync===!0})),ne.forEach(Se=>Sr(Se)),de.forEach(Se=>j.fetchers.delete(Se))}function G(z,X,{flushSync:ne}={}){var be,De;let de=j.actionData!=null&&j.navigation.formMethod!=null&&ir(j.navigation.formMethod)&&j.navigation.state==="loading"&&((be=z.state)==null?void 0:be._isRedirect)!==!0,Se;X.actionData?Object.keys(X.actionData).length>0?Se=X.actionData:Se=null:de?Se=j.actionData:Se=null;let Pe=X.loaderData?GS(j.loaderData,X.loaderData,X.matches||[],X.errors):j.loaderData,Ie=j.blockers;Ie.size>0&&(Ie=new Map(Ie),Ie.forEach((Ue,gt)=>Ie.set(gt,fc)));let Ce=S===!0||j.navigation.formMethod!=null&&ir(j.navigation.formMethod)&&((De=z.state)==null?void 0:De._isRedirect)!==!0;i&&(a=i,i=void 0),R||E==="POP"||(E==="PUSH"?e.history.push(z,z.state):E==="REPLACE"&&e.history.replace(z,z.state));let Ne;if(E==="POP"){let Ue=N.get(j.location.pathname);Ue&&Ue.has(z.pathname)?Ne={currentLocation:j.location,nextLocation:z}:N.has(z.pathname)&&(Ne={currentLocation:z,nextLocation:j.location})}else if(k){let Ue=N.get(j.location.pathname);Ue?Ue.add(z.pathname):(Ue=new Set([z.pathname]),N.set(j.location.pathname,Ue)),Ne={currentLocation:j.location,nextLocation:z}}W({...X,actionData:Se,loaderData:Pe,historyAction:E,location:z,initialized:!0,navigation:Gm,revalidation:"idle",restoreScrollPosition:_e(z,X.matches||j.matches),preventScrollReset:Ce,blockers:Ie},{viewTransitionOpts:Ne,flushSync:ne===!0}),E="POP",S=!1,k=!1,R=!1,A=!1,q==null||q.resolve(),q=null}async function te(z,X){if(typeof z=="number"){e.history.go(z);return}let ne=ey(j.location,j.matches,s,z,X==null?void 0:X.fromRouteId,X==null?void 0:X.relative),{path:de,submission:Se,error:Pe}=US(!1,ne,X),Ie=j.location,Ce=gi(j.location,de,X&&X.state);Ce={...Ce,...e.history.encodeLocation(Ce)};let Ne=X&&X.replace!=null?X.replace:void 0,be="PUSH";Ne===!0?be="REPLACE":Ne===!1||Se!=null&&ir(Se.formMethod)&&Se.formAction===j.location.pathname+j.location.search&&(be="REPLACE");let De=X&&"preventScrollReset"in X?X.preventScrollReset===!0:void 0,Ue=(X&&X.flushSync)===!0,gt=Mt({currentLocation:Ie,nextLocation:Ce,historyAction:be});if(gt){ke(gt,{state:"blocked",location:Ce,proceed(){ke(gt,{state:"proceeding",proceed:void 0,reset:void 0,location:Ce}),te(z,X)},reset(){let _t=new Map(j.blockers);_t.set(gt,fc),W({blockers:_t})}});return}await se(be,Ce,{submission:Se,pendingError:Pe,preventScrollReset:De,replace:X&&X.replace,enableViewTransition:X&&X.viewTransition,flushSync:Ue})}function $(){q||(q=c7()),St(),W({revalidation:"loading"});let z=q.promise;return j.navigation.state==="submitting"?z:j.navigation.state==="idle"?(se(j.historyAction,j.location,{startUninterruptedRevalidation:!0}),z):(se(E||j.historyAction,j.navigation.location,{overrideNavigation:j.navigation,enableViewTransition:k===!0}),z)}async function se(z,X,ne){O&&O.abort(),O=null,E=z,R=(ne&&ne.startUninterruptedRevalidation)===!0,we(j.location,j.matches),S=(ne&&ne.preventScrollReset)===!0,k=(ne&&ne.enableViewTransition)===!0;let de=i||a,Se=ne&&ne.overrideNavigation,Pe=zo(de,X,s),Ie=(ne&&ne.flushSync)===!0,Ce=je(Pe,de,X.pathname);if(Ce.active&&Ce.matches&&(Pe=Ce.matches),!Pe){let{error:Ke,notFoundMatches:Cn,route:At}=wt(X.pathname);G(X,{matches:Cn,loaderData:{},errors:{[At.id]:Ke}},{flushSync:Ie});return}if(j.initialized&&!A&&t7(j.location,X)&&!(ne&&ne.submission&&ir(ne.submission.formMethod))){G(X,{matches:Pe},{flushSync:Ie});return}O=new AbortController;let Ne=vi(e.history,X,O.signal,ne&&ne.submission),be;if(ne&&ne.pendingError)be=[xa(Pe).route.id,{type:"error",error:ne.pendingError}];else if(ne&&ne.submission&&ir(ne.submission.formMethod)){let Ke=await le(Ne,X,ne.submission,Pe,Ce.active,{replace:ne.replace,flushSync:Ie});if(Ke.shortCircuited)return;if(Ke.pendingActionResult){let[Cn,At]=Ke.pendingActionResult;if(An(At)&&ed(At.error)&&At.error.status===404){O=null,G(X,{matches:Ke.matches,loaderData:{},errors:{[Cn]:At.error}});return}}Pe=Ke.matches||Pe,be=Ke.pendingActionResult,Se=oy(X,ne.submission),Ie=!1,Ce.active=!1,Ne=vi(e.history,Ne.url,Ne.signal)}let{shortCircuited:De,matches:Ue,loaderData:gt,errors:_t}=await ve(Ne,X,Pe,Ce.active,Se,ne&&ne.submission,ne&&ne.fetcherSubmission,ne&&ne.replace,ne&&ne.initialHydration===!0,Ie,be);De||(O=null,G(X,{matches:Ue||Pe,...ZS(be),loaderData:gt,errors:_t}))}async function le(z,X,ne,de,Se,Pe={}){St();let Ie=o7(X,ne);if(W({navigation:Ie},{flushSync:Pe.flushSync===!0}),Se){let be=await Le(de,X.pathname,z.signal);if(be.type==="aborted")return{shortCircuited:!0};if(be.type==="error"){let De=xa(be.partialMatches).route.id;return{matches:be.partialMatches,pendingActionResult:[De,{type:"error",error:be.error}]}}else if(be.matches)de=be.matches;else{let{notFoundMatches:De,error:Ue,route:gt}=wt(X.pathname);return{matches:De,pendingActionResult:[gt.id,{type:"error",error:Ue}]}}}let Ce,Ne=pc(de,X);if(!Ne.route.action&&!Ne.route.lazy)Ce={type:"error",error:Un(405,{method:z.method,pathname:X.pathname,routeId:Ne.route.id})};else if(Ce=(await ct("action",j,z,[Ne],de,null))[Ne.route.id],z.signal.aborted)return{shortCircuited:!0};if(wa(Ce)){let be;return Pe&&Pe.replace!=null?be=Pe.replace:be=XS(Ce.response.headers.get("Location"),new URL(z.url),s)===j.location.pathname+j.location.search,await He(z,Ce,!0,{submission:ne,replace:be}),{shortCircuited:!0}}if(An(Ce)){let be=xa(de,Ne.route.id);return(Pe&&Pe.replace)!==!0&&(E="PUSH"),{matches:de,pendingActionResult:[be.route.id,Ce]}}return{matches:de,pendingActionResult:[Ne.route.id,Ce]}}async function ve(z,X,ne,de,Se,Pe,Ie,Ce,Ne,be,De){let Ue=Se||oy(X,Pe),gt=Pe||Ie||oC(Ue),_t=!R&&!Ne;if(de){if(_t){let On=Te(De);W({navigation:Ue,...On!==void 0?{actionData:On}:{}},{flushSync:be})}let nt=await Le(ne,X.pathname,z.signal);if(nt.type==="aborted")return{shortCircuited:!0};if(nt.type==="error"){let On=xa(nt.partialMatches).route.id;return{matches:nt.partialMatches,loaderData:{},errors:{[On]:nt.error}}}else if(nt.matches)ne=nt.matches;else{let{error:On,notFoundMatches:ci,route:Ot}=wt(X.pathname);return{matches:ci,loaderData:{},errors:{[Ot.id]:On}}}}let Ke=i||a,[Cn,At]=WS(e.history,j,ne,gt,X,Ne===!0,A,C,F,B,L,Ke,s,De);if(D=++T,Cn.length===0&&At.length===0){let nt=Q();return G(X,{matches:ne,loaderData:{},errors:De&&An(De[1])?{[De[0]]:De[1].error}:null,...ZS(De),...nt?{fetchers:new Map(j.fetchers)}:{}},{flushSync:be}),{shortCircuited:!0}}if(_t){let nt={};if(!de){nt.navigation=Ue;let On=Te(De);On!==void 0&&(nt.actionData=On)}At.length>0&&(nt.fetchers=qe(At)),W(nt,{flushSync:be})}At.forEach(nt=>{er(nt.key),nt.controller&&M.set(nt.key,nt.controller)});let si=()=>At.forEach(nt=>er(nt.key));O&&O.signal.addEventListener("abort",si);let{loaderResults:Cr,fetcherResults:ha}=await Ht(j,ne,Cn,At,z);if(z.signal.aborted)return{shortCircuited:!0};O&&O.signal.removeEventListener("abort",si),At.forEach(nt=>M.delete(nt.key));let Wr=td(Cr);if(Wr)return await He(z,Wr.result,!0,{replace:Ce}),{shortCircuited:!0};if(Wr=td(ha),Wr)return L.add(Wr.key),await He(z,Wr.result,!0,{replace:Ce}),{shortCircuited:!0};let{loaderData:Pu,errors:tr}=JS(j,ne,Cr,De,At,ha);Ne&&j.errors&&(tr={...j.errors,...tr});let Ks=Q(),Xs=ee(D),Qs=Ks||Xs||At.length>0;return{matches:ne,loaderData:Pu,errors:tr,...Qs?{fetchers:new Map(j.fetchers)}:{}}}function Te(z){if(z&&!An(z[1]))return{[z[0]]:z[1].data};if(j.actionData)return Object.keys(j.actionData).length===0?null:j.actionData}function qe(z){return z.forEach(X=>{let ne=j.fetchers.get(X.key),de=hc(void 0,ne?ne.data:void 0);j.fetchers.set(X.key,de)}),new Map(j.fetchers)}async function Ye(z,X,ne,de){er(z);let Se=(de&&de.flushSync)===!0,Pe=i||a,Ie=ey(j.location,j.matches,s,ne,X,de==null?void 0:de.relative),Ce=zo(Pe,Ie,s),Ne=je(Ce,Pe,Ie);if(Ne.active&&Ne.matches&&(Ce=Ne.matches),!Ce){Rt(z,X,Un(404,{pathname:Ie}),{flushSync:Se});return}let{path:be,submission:De,error:Ue}=US(!0,Ie,de);if(Ue){Rt(z,X,Ue,{flushSync:Se});return}let gt=pc(Ce,be),_t=(de&&de.preventScrollReset)===!0;if(De&&ir(De.formMethod)){await ze(z,X,be,gt,Ce,Ne.active,Se,_t,De);return}B.set(z,{routeId:X,path:be}),await st(z,X,be,gt,Ce,Ne.active,Se,_t,De)}async function ze(z,X,ne,de,Se,Pe,Ie,Ce,Ne){St(),B.delete(z);function be(Ot){if(!Ot.route.action&&!Ot.route.lazy){let Lo=Un(405,{method:Ne.formMethod,pathname:ne,routeId:X});return Rt(z,X,Lo,{flushSync:Ie}),!0}return!1}if(!Pe&&be(de))return;let De=j.fetchers.get(z);yt(z,a7(Ne,De),{flushSync:Ie});let Ue=new AbortController,gt=vi(e.history,ne,Ue.signal,Ne);if(Pe){let Ot=await Le(Se,ne,gt.signal);if(Ot.type==="aborted")return;if(Ot.type==="error"){Rt(z,X,Ot.error,{flushSync:Ie});return}else if(Ot.matches){if(Se=Ot.matches,de=pc(Se,ne),be(de))return}else{Rt(z,X,Un(404,{pathname:ne}),{flushSync:Ie});return}}M.set(z,Ue);let _t=T,Ke=(await ct("action",j,gt,[de],Se,z))[de.route.id];if(gt.signal.aborted){M.get(z)===Ue&&M.delete(z);return}if(F.has(z)){if(wa(Ke)||An(Ke)){yt(z,Vo(void 0));return}}else{if(wa(Ke))if(M.delete(z),D>_t){yt(z,Vo(void 0));return}else return L.add(z),yt(z,hc(Ne)),He(gt,Ke,!1,{fetcherSubmission:Ne,preventScrollReset:Ce});if(An(Ke)){Rt(z,X,Ke.error);return}}let Cn=j.navigation.location||j.location,At=vi(e.history,Cn,Ue.signal),si=i||a,Cr=j.navigation.state!=="idle"?zo(si,j.navigation.location,s):j.matches;$e(Cr,"Didn't find any matches after fetcher action");let ha=++T;I.set(z,ha);let Wr=hc(Ne,Ke.data);j.fetchers.set(z,Wr);let[Pu,tr]=WS(e.history,j,Cr,Ne,Cn,!1,A,C,F,B,L,si,s,[de.route.id,Ke]);tr.filter(Ot=>Ot.key!==z).forEach(Ot=>{let Lo=Ot.key,Vh=j.fetchers.get(Lo),wE=hc(void 0,Vh?Vh.data:void 0);j.fetchers.set(Lo,wE),er(Lo),Ot.controller&&M.set(Lo,Ot.controller)}),W({fetchers:new Map(j.fetchers)});let Ks=()=>tr.forEach(Ot=>er(Ot.key));Ue.signal.addEventListener("abort",Ks);let{loaderResults:Xs,fetcherResults:Qs}=await Ht(j,Cr,Pu,tr,At);if(Ue.signal.aborted)return;Ue.signal.removeEventListener("abort",Ks),I.delete(z),M.delete(z),tr.forEach(Ot=>M.delete(Ot.key));let nt=td(Xs);if(nt)return He(At,nt.result,!1,{preventScrollReset:Ce});if(nt=td(Qs),nt)return L.add(nt.key),He(At,nt.result,!1,{preventScrollReset:Ce});let{loaderData:On,errors:ci}=JS(j,Cr,Xs,void 0,tr,Qs);if(j.fetchers.has(z)){let Ot=Vo(Ke.data);j.fetchers.set(z,Ot)}ee(ha),j.navigation.state==="loading"&&ha>D?($e(E,"Expected pending action"),O&&O.abort(),G(j.navigation.location,{matches:Cr,loaderData:On,errors:ci,fetchers:new Map(j.fetchers)})):(W({errors:ci,loaderData:GS(j.loaderData,On,Cr,ci),fetchers:new Map(j.fetchers)}),A=!1)}async function st(z,X,ne,de,Se,Pe,Ie,Ce,Ne){let be=j.fetchers.get(z);yt(z,hc(Ne,be?be.data:void 0),{flushSync:Ie});let De=new AbortController,Ue=vi(e.history,ne,De.signal);if(Pe){let Ke=await Le(Se,ne,Ue.signal);if(Ke.type==="aborted")return;if(Ke.type==="error"){Rt(z,X,Ke.error,{flushSync:Ie});return}else if(Ke.matches)Se=Ke.matches,de=pc(Se,ne);else{Rt(z,X,Un(404,{pathname:ne}),{flushSync:Ie});return}}M.set(z,De);let gt=T,_t=(await ct("loader",j,Ue,[de],Se,z))[de.route.id];if(M.get(z)===De&&M.delete(z),!Ue.signal.aborted){if(F.has(z)){yt(z,Vo(void 0));return}if(wa(_t))if(D>gt){yt(z,Vo(void 0));return}else{L.add(z),await He(Ue,_t,!1,{preventScrollReset:Ce});return}if(An(_t)){Rt(z,X,_t.error);return}yt(z,Vo(_t.data))}}async function He(z,X,ne,{submission:de,fetcherSubmission:Se,preventScrollReset:Pe,replace:Ie}={}){X.response.headers.has("X-Remix-Revalidate")&&(A=!0);let Ce=X.response.headers.get("Location");$e(Ce,"Expected a Location header on the redirect Response"),Ce=XS(Ce,new URL(z.url),s);let Ne=gi(j.location,Ce,{_isRedirect:!0});if(n){let Ke=!1;if(X.response.headers.has("X-Remix-Reload-Document"))Ke=!0;else if(Zm.test(Ce)){const Cn=e.history.createURL(Ce);Ke=Cn.origin!==t.location.origin||ar(Cn.pathname,s)==null}if(Ke){Ie?t.location.replace(Ce):t.location.assign(Ce);return}}O=null;let be=Ie===!0||X.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:De,formAction:Ue,formEncType:gt}=j.navigation;!de&&!Se&&De&&Ue&&gt&&(de=oC(j.navigation));let _t=de||Se;if(Vz.has(X.response.status)&&_t&&ir(_t.formMethod))await se(be,Ne,{submission:{..._t,formAction:Ce},preventScrollReset:Pe||S,enableViewTransition:ne?k:void 0});else{let Ke=oy(Ne,de);await se(be,Ne,{overrideNavigation:Ke,fetcherSubmission:Se,preventScrollReset:Pe||S,enableViewTransition:ne?k:void 0})}}async function ct(z,X,ne,de,Se,Pe){let Ie,Ce={};try{Ie=await Qz(c,z,X,ne,de,Se,Pe,o,r)}catch(Ne){return de.forEach(be=>{Ce[be.route.id]={type:"error",error:Ne}}),Ce}for(let[Ne,be]of Object.entries(Ie))if(n7(be)){let De=be.result;Ce[Ne]={type:"redirect",response:Zz(De,ne,Ne,Se,s)}}else Ce[Ne]=await Gz(be);return Ce}async function Ht(z,X,ne,de,Se){let Pe=ct("loader",z,Se,ne,X,null),Ie=Promise.all(de.map(async be=>{if(be.matches&&be.match&&be.controller){let De=(await ct("loader",z,vi(e.history,be.path,be.controller.signal),[be.match],be.matches,be.key))[be.match.route.id];return{[be.key]:De}}else return Promise.resolve({[be.key]:{type:"error",error:Un(404,{pathname:be.path})}})})),Ce=await Pe,Ne=(await Ie).reduce((be,De)=>Object.assign(be,De),{});return{loaderResults:Ce,fetcherResults:Ne}}function St(){A=!0,B.forEach((z,X)=>{M.has(X)&&C.add(X),er(X)})}function yt(z,X,ne={}){j.fetchers.set(z,X),W({fetchers:new Map(j.fetchers)},{flushSync:(ne&&ne.flushSync)===!0})}function Rt(z,X,ne,de={}){let Se=xa(j.matches,X);Sr(z),W({errors:{[Se.route.id]:ne},fetchers:new Map(j.fetchers)},{flushSync:(de&&de.flushSync)===!0})}function bn(z){return U.set(z,(U.get(z)||0)+1),F.has(z)&&F.delete(z),j.fetchers.get(z)||Uz}function Sr(z){let X=j.fetchers.get(z);M.has(z)&&!(X&&X.state==="loading"&&I.has(z))&&er(z),B.delete(z),I.delete(z),L.delete(z),F.delete(z),C.delete(z),j.fetchers.delete(z)}function ii(z){let X=(U.get(z)||0)-1;X<=0?(U.delete(z),F.add(z)):U.set(z,X),W({fetchers:new Map(j.fetchers)})}function er(z){let X=M.get(z);X&&(X.abort(),M.delete(z))}function pa(z){for(let X of z){let ne=bn(X),de=Vo(ne.data);j.fetchers.set(X,de)}}function Q(){let z=[],X=!1;for(let ne of L){let de=j.fetchers.get(ne);$e(de,`Expected fetcher: ${ne}`),de.state==="loading"&&(L.delete(ne),z.push(ne),X=!0)}return pa(z),X}function ee(z){let X=[];for(let[ne,de]of I)if(de<z){let Se=j.fetchers.get(ne);$e(Se,`Expected fetcher: ${ne}`),Se.state==="loading"&&(er(ne),I.delete(ne),X.push(ne))}return pa(X),X.length>0}function ie(z,X){let ne=j.blockers.get(z)||fc;return H.get(z)!==X&&H.set(z,X),ne}function pe(z){j.blockers.delete(z),H.delete(z)}function ke(z,X){let ne=j.blockers.get(z)||fc;$e(ne.state==="unblocked"&&X.state==="blocked"||ne.state==="blocked"&&X.state==="blocked"||ne.state==="blocked"&&X.state==="proceeding"||ne.state==="blocked"&&X.state==="unblocked"||ne.state==="proceeding"&&X.state==="unblocked",`Invalid blocker state transition: ${ne.state} -> ${X.state}`);let de=new Map(j.blockers);de.set(z,X),W({blockers:de})}function Mt({currentLocation:z,nextLocation:X,historyAction:ne}){if(H.size===0)return;H.size>1&&$t(!1,"A router only supports one blocker at a time");let de=Array.from(H.entries()),[Se,Pe]=de[de.length-1],Ie=j.blockers.get(Se);if(!(Ie&&Ie.state==="proceeding")&&Pe({currentLocation:z,nextLocation:X,historyAction:ne}))return Se}function wt(z){let X=Un(404,{pathname:z}),ne=i||a,{matches:de,route:Se}=eC(ne);return{notFoundMatches:de,route:Se,error:X}}function Be(z,X,ne){if(p=z,m=X,y=ne||null,!v&&j.navigation===Gm){v=!0;let de=_e(j.location,j.matches);de!=null&&W({restoreScrollPosition:de})}return()=>{p=null,m=null,y=null}}function ge(z,X){return y&&y(z,X.map(ne=>xz(ne,j.loaderData)))||z.key}function we(z,X){if(p&&m){let ne=ge(z,X);p[ne]=m()}}function _e(z,X){if(p){let ne=ge(z,X),de=p[ne];if(typeof de=="number")return de}return null}function je(z,X,ne){if(l)if(z){if(Object.keys(z[0].params).length>0)return{active:!0,matches:Xu(X,ne,s,!0)}}else return{active:!0,matches:Xu(X,ne,s,!0)||[]};return{active:!1,matches:null}}async function Le(z,X,ne){if(!l)return{type:"success",matches:z};let de=z;for(;;){let Se=i==null,Pe=i||a,Ie=o;try{await l({path:X,matches:de,patch:(be,De)=>{ne.aborted||YS(be,De,Pe,Ie,r)}})}catch(be){return{type:"error",error:be,partialMatches:de}}finally{Se&&!ne.aborted&&(a=[...a])}if(ne.aborted)return{type:"aborted"};let Ce=zo(Pe,X,s);if(Ce)return{type:"success",matches:Ce};let Ne=Xu(Pe,X,s,!0);if(!Ne||de.length===Ne.length&&de.every((be,De)=>be.route.id===Ne[De].route.id))return{type:"success",matches:null};de=Ne}}function ut(z){o={},i=Ku(z,r,void 0,o)}function Ct(z,X){let ne=i==null;YS(z,X,i||a,o,r),ne&&(a=[...a],W({}))}return w={get basename(){return s},get future(){return u},get state(){return j},get routes(){return a},get window(){return t},initialize:re,subscribe:Y,enableScrollRestoration:Be,navigate:te,fetch:Ye,revalidate:$,createHref:z=>e.history.createHref(z),encodeLocation:z=>e.history.encodeLocation(z),getFetcher:bn,deleteFetcher:ii,dispose:Z,getBlocker:ie,deleteBlocker:pe,patchRoutes:Ct,_internalFetchControllers:M,_internalSetRoutes:ut},w}function Wz(e){return e!=null&&("formData"in e&&e.formData!=null||"body"in e&&e.body!==void 0)}function ey(e,t,n,r,o,a){let i,s;if(o){i=[];for(let l of t)if(i.push(l),l.route.id===o){s=l;break}}else i=t,s=t[t.length-1];let c=Gu(r||".",Ju(i),ar(e.pathname,n)||e.pathname,a==="path");if(r==null&&(c.search=e.search,c.hash=e.hash),(r==null||r===""||r===".")&&s){let l=ry(c.search);if(s.route.index&&!l)c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index";else if(!s.route.index&&l){let u=new URLSearchParams(c.search),d=u.getAll("index");u.delete("index"),d.filter(p=>p).forEach(p=>u.append("index",p));let f=u.toString();c.search=f?`?${f}`:""}}return n!=="/"&&(c.pathname=c.pathname==="/"?n:Mr([n,c.pathname])),Qr(c)}function US(e,t,n){if(!n||!Wz(n))return{path:t};if(n.formMethod&&!r7(n.formMethod))return{path:t,error:Un(405,{method:n.formMethod})};let r=()=>({path:t,error:Un(400,{type:"invalid-body"})}),o=(n.formMethod||"get").toUpperCase(),a=tC(t);if(n.body!==void 0){if(n.formEncType==="text/plain"){if(!ir(o))return r();let u=typeof n.body=="string"?n.body:n.body instanceof FormData||n.body instanceof URLSearchParams?Array.from(n.body.entries()).reduce((d,[f,p])=>`${d}${f}=${p}
`,""):String(n.body);return{path:t,submission:{formMethod:o,formAction:a,formEncType:n.formEncType,formData:void 0,json:void 0,text:u}}}else if(n.formEncType==="application/json"){if(!ir(o))return r();try{let u=typeof n.body=="string"?JSON.parse(n.body):n.body;return{path:t,submission:{formMethod:o,formAction:a,formEncType:n.formEncType,formData:void 0,json:u,text:void 0}}}catch{return r()}}}$e(typeof FormData=="function","FormData is not available in this environment");let i,s;if(n.formData)i=ny(n.formData),s=n.formData;else if(n.body instanceof FormData)i=ny(n.body),s=n.body;else if(n.body instanceof URLSearchParams)i=n.body,s=QS(i);else if(n.body==null)i=new URLSearchParams,s=new FormData;else try{i=new URLSearchParams(n.body),s=QS(i)}catch{return r()}let c={formMethod:o,formAction:a,formEncType:n&&n.formEncType||"application/x-www-form-urlencoded",formData:s,json:void 0,text:void 0};if(ir(c.formMethod))return{path:t,submission:c};let l=Jr(t);return e&&l.search&&ry(l.search)&&i.append("index",""),l.search=`?${i}`,{path:Qr(l),submission:c}}function HS(e,t,n=!1){let r=e.findIndex(o=>o.route.id===t);return r>=0?e.slice(0,n?r+1:r):e}function WS(e,t,n,r,o,a,i,s,c,l,u,d,f,p){let y=p?An(p[1])?p[1].error:p[1].data:void 0,m=e.createURL(t.location),v=e.createURL(o),b=n;a&&t.errors?b=HS(n,Object.keys(t.errors)[0],!0):p&&An(p[1])&&(b=HS(n,p[0]));let x=p?p[1].statusCode:void 0,_=x&&x>=400,w=b.filter((E,S)=>{let{route:O}=E;if(O.lazy)return!0;if(O.loader==null)return!1;if(a)return ty(O,t.loaderData,t.errors);if(qz(t.loaderData,t.matches[S],E))return!0;let k=t.matches[S],N=E;return qS(E,{currentUrl:m,currentParams:k.params,nextUrl:v,nextParams:N.params,...r,actionResult:y,actionStatus:x,defaultShouldRevalidate:_?!1:i||m.pathname+m.search===v.pathname+v.search||m.search!==v.search||Yz(k,N)})}),j=[];return l.forEach((E,S)=>{if(a||!n.some(R=>R.route.id===E.routeId)||c.has(S))return;let O=zo(d,E.path,f);if(!O){j.push({key:S,routeId:E.routeId,path:E.path,matches:null,match:null,controller:null});return}let k=t.fetchers.get(S),N=pc(O,E.path),P=!1;u.has(S)?P=!1:s.has(S)?(s.delete(S),P=!0):k&&k.state!=="idle"&&k.data===void 0?P=i:P=qS(N,{currentUrl:m,currentParams:t.matches[t.matches.length-1].params,nextUrl:v,nextParams:n[n.length-1].params,...r,actionResult:y,actionStatus:x,defaultShouldRevalidate:_?!1:i}),P&&j.push({key:S,routeId:E.routeId,path:E.path,matches:O,match:N,controller:new AbortController})}),[w,j]}function ty(e,t,n){if(e.lazy)return!0;if(!e.loader)return!1;let r=t!=null&&t[e.id]!==void 0,o=n!=null&&n[e.id]!==void 0;return!r&&o?!1:typeof e.loader=="function"&&e.loader.hydrate===!0?!0:!r&&!o}function qz(e,t,n){let r=!t||n.route.id!==t.route.id,o=!e.hasOwnProperty(n.route.id);return r||o}function Yz(e,t){let n=e.route.path;return e.pathname!==t.pathname||n!=null&&n.endsWith("*")&&e.params["*"]!==t.params["*"]}function qS(e,t){if(e.route.shouldRevalidate){let n=e.route.shouldRevalidate(t);if(typeof n=="boolean")return n}return t.defaultShouldRevalidate}function YS(e,t,n,r,o){let a;if(e){let c=r[e];$e(c,`No route found to patch children into: routeId = ${e}`),c.children||(c.children=[]),a=c.children}else a=n;let i=t.filter(c=>!a.some(l=>KS(c,l))),s=Ku(i,o,[e||"_","patch",String((a==null?void 0:a.length)||"0")],r);a.push(...s)}function KS(e,t){return"id"in e&&"id"in t&&e.id===t.id?!0:e.index===t.index&&e.path===t.path&&e.caseSensitive===t.caseSensitive?(!e.children||e.children.length===0)&&(!t.children||t.children.length===0)?!0:e.children.every((n,r)=>{var o;return(o=t.children)==null?void 0:o.some(a=>KS(n,a))}):!1}async function Kz(e,t,n){if(!e.lazy)return;let r=await e.lazy();if(!e.lazy)return;let o=n[e.id];$e(o,"No route found in manifest");let a={};for(let i in r){let s=o[i]!==void 0&&i!=="hasErrorBoundary";$t(!s,`Route "${o.id}" has a static property "${i}" defined but its lazy function is also returning a value for this property. The lazy route property "${i}" will be ignored.`),!s&&!vz.has(i)&&(a[i]=r[i])}Object.assign(o,a),Object.assign(o,{...t(o),lazy:void 0})}async function Xz({matches:e}){let t=e.filter(n=>n.shouldLoad);return(await Promise.all(t.map(n=>n.resolve()))).reduce((n,r,o)=>Object.assign(n,{[t[o].route.id]:r}),{})}async function Qz(e,t,n,r,o,a,i,s,c,l){let u=a.map(p=>p.route.lazy?Kz(p.route,c,s):void 0),d=a.map((p,y)=>{let m=u[y],v=o.some(b=>b.route.id===p.route.id);return{...p,shouldLoad:v,resolve:async b=>(b&&r.method==="GET"&&(p.route.lazy||p.route.loader)&&(v=!0),v?Jz(t,r,p,m,b,l):Promise.resolve({type:"data",result:void 0}))}}),f=await e({matches:d,request:r,params:a[0].params,fetcherKey:i,context:l});try{await Promise.all(u)}catch{}return f}async function Jz(e,t,n,r,o,a){let i,s,c=l=>{let u,d=new Promise((y,m)=>u=m);s=()=>u(),t.signal.addEventListener("abort",s);let f=y=>typeof l!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${e}" [routeId: ${n.route.id}]`)):l({request:t,params:n.params,context:a},...y!==void 0?[y]:[]),p=(async()=>{try{return{type:"data",result:await(o?o(y=>f(y)):f())}}catch(y){return{type:"error",result:y}}})();return Promise.race([p,d])};try{let l=n.route[e];if(r)if(l){let u,[d]=await Promise.all([c(l).catch(f=>{u=f}),r]);if(u!==void 0)throw u;i=d}else if(await r,l=n.route[e],l)i=await c(l);else if(e==="action"){let u=new URL(t.url),d=u.pathname+u.search;throw Un(405,{method:t.method,pathname:d,routeId:n.route.id})}else return{type:"data",result:void 0};else if(l)i=await c(l);else{let u=new URL(t.url),d=u.pathname+u.search;throw Un(404,{pathname:d})}}catch(l){return{type:"error",result:l}}finally{s&&t.signal.removeEventListener("abort",s)}return i}async function Gz(e){var r,o,a,i;let{result:t,type:n}=e;if(rC(t)){let s;try{let c=t.headers.get("Content-Type");c&&/\bapplication\/json\b/.test(c)?t.body==null?s=null:s=await t.json():s=await t.text()}catch(c){return{type:"error",error:c}}return n==="error"?{type:"error",error:new Zu(t.status,t.statusText,s),statusCode:t.status,headers:t.headers}:{type:"data",data:s,statusCode:t.status,headers:t.headers}}if(n==="error"){if(nC(t)){if(t.data instanceof Error)return{type:"error",error:t.data,statusCode:(r=t.init)==null?void 0:r.status};t=new Zu(((o=t.init)==null?void 0:o.status)||500,void 0,t.data)}return{type:"error",error:t,statusCode:ed(t)?t.status:void 0}}return nC(t)?{type:"data",data:t.data,statusCode:(a=t.init)==null?void 0:a.status,headers:(i=t.init)!=null&&i.headers?new Headers(t.init.headers):void 0}:{type:"data",data:t}}function Zz(e,t,n,r,o){let a=e.headers.get("Location");if($e(a,"Redirects returned/thrown from loaders/actions must have a Location header"),!Zm.test(a)){let i=r.slice(0,r.findIndex(s=>s.route.id===n)+1);a=ey(new URL(t.url),i,o,a),e.headers.set("Location",a)}return e}function XS(e,t,n){if(Zm.test(e)){let r=e,o=r.startsWith("//")?new URL(t.protocol+r):new URL(r),a=ar(o.pathname,n)!=null;if(o.origin===t.origin&&a)return o.pathname+o.search+o.hash}return e}function vi(e,t,n,r){let o=e.createURL(tC(t)).toString(),a={signal:n};if(r&&ir(r.formMethod)){let{formMethod:i,formEncType:s}=r;a.method=i.toUpperCase(),s==="application/json"?(a.headers=new Headers({"Content-Type":s}),a.body=JSON.stringify(r.json)):s==="text/plain"?a.body=r.text:s==="application/x-www-form-urlencoded"&&r.formData?a.body=ny(r.formData):a.body=r.formData}return new Request(o,a)}function ny(e){let t=new URLSearchParams;for(let[n,r]of e.entries())t.append(n,typeof r=="string"?r:r.name);return t}function QS(e){let t=new FormData;for(let[n,r]of e.entries())t.append(n,r);return t}function e7(e,t,n,r=!1,o=!1){let a={},i=null,s,c=!1,l={},u=n&&An(n[1])?n[1].error:void 0;return e.forEach(d=>{if(!(d.route.id in t))return;let f=d.route.id,p=t[f];if($e(!wa(p),"Cannot handle redirect results in processLoaderData"),An(p)){let y=p.error;if(u!==void 0&&(y=u,u=void 0),i=i||{},o)i[f]=y;else{let m=xa(e,f);i[m.route.id]==null&&(i[m.route.id]=y)}r||(a[f]=zS),c||(c=!0,s=ed(p.error)?p.error.status:500),p.headers&&(l[f]=p.headers)}else a[f]=p.data,p.statusCode&&p.statusCode!==200&&!c&&(s=p.statusCode),p.headers&&(l[f]=p.headers)}),u!==void 0&&n&&(i={[n[0]]:u},a[n[0]]=void 0),{loaderData:a,errors:i,statusCode:s||200,loaderHeaders:l}}function JS(e,t,n,r,o,a){let{loaderData:i,errors:s}=e7(t,n,r);return o.forEach(c=>{let{key:l,match:u,controller:d}=c,f=a[l];if($e(f,"Did not find corresponding fetcher result"),!(d&&d.signal.aborted))if(An(f)){let p=xa(e.matches,u==null?void 0:u.route.id);s&&s[p.route.id]||(s={...s,[p.route.id]:f.error}),e.fetchers.delete(l)}else if(wa(f))$e(!1,"Unhandled fetcher revalidation redirect");else{let p=Vo(f.data);e.fetchers.set(l,p)}}),{loaderData:i,errors:s}}function GS(e,t,n,r){let o=Object.entries(t).filter(([,a])=>a!==zS).reduce((a,[i,s])=>(a[i]=s,a),{});for(let a of n){let i=a.route.id;if(!t.hasOwnProperty(i)&&e.hasOwnProperty(i)&&a.route.loader&&(o[i]=e[i]),r&&r.hasOwnProperty(i))break}return o}function ZS(e){return e?An(e[1])?{actionData:{}}:{actionData:{[e[0]]:e[1].data}}:{}}function xa(e,t){return(t?e.slice(0,e.findIndex(n=>n.route.id===t)+1):[...e]).reverse().find(n=>n.route.hasErrorBoundary===!0)||e[0]}function eC(e){let t=e.length===1?e[0]:e.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function Un(e,{pathname:t,routeId:n,method:r,type:o,message:a}={}){let i="Unknown Server Error",s="Unknown @remix-run/router error";return e===400?(i="Bad Request",r&&t&&n?s=`You made a ${r} request to "${t}" but did not provide a \`loader\` for route "${n}", so there is no way to handle the request.`:o==="invalid-body"&&(s="Unable to encode submission body")):e===403?(i="Forbidden",s=`Route "${n}" does not match URL "${t}"`):e===404?(i="Not Found",s=`No route matches URL "${t}"`):e===405&&(i="Method Not Allowed",r&&t&&n?s=`You made a ${r.toUpperCase()} request to "${t}" but did not provide an \`action\` for route "${n}", so there is no way to handle the request.`:r&&(s=`Invalid request method "${r.toUpperCase()}"`)),new Zu(e||500,i,new Error(s),!0)}function td(e){let t=Object.entries(e);for(let n=t.length-1;n>=0;n--){let[r,o]=t[n];if(wa(o))return{key:r,result:o}}}function tC(e){let t=typeof e=="string"?Jr(e):e;return Qr({...t,hash:""})}function t7(e,t){return e.pathname!==t.pathname||e.search!==t.search?!1:e.hash===""?t.hash!=="":e.hash===t.hash?!0:t.hash!==""}function n7(e){return rC(e.result)&&zz.has(e.result.status)}function An(e){return e.type==="error"}function wa(e){return(e&&e.type)==="redirect"}function nC(e){return typeof e=="object"&&e!=null&&"type"in e&&"data"in e&&"init"in e&&e.type==="DataWithResponseInit"}function rC(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.headers=="object"&&typeof e.body<"u"}function r7(e){return $z.has(e.toUpperCase())}function ir(e){return Fz.has(e.toUpperCase())}function ry(e){return new URLSearchParams(e).getAll("index").some(t=>t==="")}function pc(e,t){let n=typeof t=="string"?Jr(t).search:t.search;if(e[e.length-1].route.index&&ry(n||""))return e[e.length-1];let r=FS(e);return r[r.length-1]}function oC(e){let{formMethod:t,formAction:n,formEncType:r,text:o,formData:a,json:i}=e;if(!(!t||!n||!r)){if(o!=null)return{formMethod:t,formAction:n,formEncType:r,formData:void 0,json:void 0,text:o};if(a!=null)return{formMethod:t,formAction:n,formEncType:r,formData:a,json:void 0,text:void 0};if(i!==void 0)return{formMethod:t,formAction:n,formEncType:r,formData:void 0,json:i,text:void 0}}}function oy(e,t){return t?{state:"loading",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}:{state:"loading",location:e,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function o7(e,t){return{state:"submitting",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}}function hc(e,t){return e?{state:"loading",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function a7(e,t){return{state:"submitting",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t?t.data:void 0}}function Vo(e){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function i7(e,t){try{let n=e.sessionStorage.getItem($S);if(n){let r=JSON.parse(n);for(let[o,a]of Object.entries(r||{}))a&&Array.isArray(a)&&t.set(o,new Set(a||[]))}}catch{}}function s7(e,t){if(t.size>0){let n={};for(let[r,o]of t)n[r]=[...o];try{e.sessionStorage.setItem($S,JSON.stringify(n))}catch(r){$t(!1,`Failed to save applied view transitions in sessionStorage (${r}).`)}}}function c7(){let e,t,n=new Promise((r,o)=>{e=async a=>{r(a);try{await n}catch{}},t=async a=>{o(a);try{await n}catch{}}});return{promise:n,resolve:e,reject:t}}var _a=g.createContext(null);_a.displayName="DataRouter";var mc=g.createContext(null);mc.displayName="DataRouterState";var ay=g.createContext({isTransitioning:!1});ay.displayName="ViewTransition";var aC=g.createContext(new Map);aC.displayName="Fetchers";var l7=g.createContext(null);l7.displayName="Await";var sr=g.createContext(null);sr.displayName="Navigation";var nd=g.createContext(null);nd.displayName="Location";var Hn=g.createContext({outlet:null,matches:[],isDataRoute:!1});Hn.displayName="Route";var iy=g.createContext(null);iy.displayName="RouteError";function u7(e,{relative:t}={}){$e(bi(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=g.useContext(sr),{hash:o,pathname:a,search:i}=gc(e,{relative:t}),s=a;return n!=="/"&&(s=a==="/"?n:Mr([n,a])),r.createHref({pathname:s,search:i,hash:o})}function bi(){return g.useContext(nd)!=null}function Gr(){return $e(bi(),"useLocation() may be used only in the context of a <Router> component."),g.useContext(nd).location}var iC="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function sC(e){g.useContext(sr).static||g.useLayoutEffect(e)}function yc(){let{isDataRoute:e}=g.useContext(Hn);return e?S7():d7()}function d7(){$e(bi(),"useNavigate() may be used only in the context of a <Router> component.");let e=g.useContext(_a),{basename:t,navigator:n}=g.useContext(sr),{matches:r}=g.useContext(Hn),{pathname:o}=Gr(),a=JSON.stringify(Ju(r)),i=g.useRef(!1);return sC(()=>{i.current=!0}),g.useCallback((s,c={})=>{if($t(i.current,iC),!i.current)return;if(typeof s=="number"){n.go(s);return}let l=Gu(s,JSON.parse(a),o,c.relative==="path");e==null&&t!=="/"&&(l.pathname=l.pathname==="/"?t:Mr([t,l.pathname])),(c.replace?n.replace:n.push)(l,c.state,c)},[t,n,a,o,e])}var f7=g.createContext(null);function p7(e){let t=g.useContext(Hn).outlet;return t&&g.createElement(f7.Provider,{value:e},t)}function h7(){let{matches:e}=g.useContext(Hn),t=e[e.length-1];return t?t.params:{}}function gc(e,{relative:t}={}){let{matches:n}=g.useContext(Hn),{pathname:r}=Gr(),o=JSON.stringify(Ju(n));return g.useMemo(()=>Gu(e,JSON.parse(o),r,t==="path"),[e,o,r,t])}function m7(e,t,n,r){$e(bi(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=g.useContext(sr),{matches:a}=g.useContext(Hn),i=a[a.length-1],s=i?i.params:{},c=i?i.pathname:"/",l=i?i.pathnameBase:"/",u=i&&i.route;{let v=u&&u.path||"";uC(c,!u||v.endsWith("*")||v.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${v}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${v}"> to <Route path="${v==="/"?"*":`${v}/*`}">.`)}let d=Gr(),f;f=d;let p=f.pathname||"/",y=p;if(l!=="/"){let v=l.replace(/^\//,"").split("/");y="/"+p.replace(/^\//,"").split("/").slice(v.length).join("/")}let m=zo(e,{pathname:y});return $t(u||m!=null,`No routes matched location "${f.pathname}${f.search}${f.hash}" `),$t(m==null||m[m.length-1].route.element!==void 0||m[m.length-1].route.Component!==void 0||m[m.length-1].route.lazy!==void 0,`Matched leaf route at location "${f.pathname}${f.search}${f.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),x7(m&&m.map(v=>Object.assign({},v,{params:Object.assign({},s,v.params),pathname:Mr([l,o.encodeLocation?o.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?l:Mr([l,o.encodeLocation?o.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),a,n,r)}function y7(){let e=cC(),t=ed(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},i=null;return console.error("Error handled by React Router default ErrorBoundary:",e),i=g.createElement(g.Fragment,null,g.createElement("p",null,"\u{1F4BF} Hey developer \u{1F44B}"),g.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",g.createElement("code",{style:a},"ErrorBoundary")," or"," ",g.createElement("code",{style:a},"errorElement")," prop on your route.")),g.createElement(g.Fragment,null,g.createElement("h2",null,"Unexpected Application Error!"),g.createElement("h3",{style:{fontStyle:"italic"}},t),n?g.createElement("pre",{style:o},n):null,i)}var g7=g.createElement(y7,null),v7=class extends g.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?g.createElement(Hn.Provider,{value:this.props.routeContext},g.createElement(iy.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function b7({routeContext:e,match:t,children:n}){let r=g.useContext(_a);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),g.createElement(Hn.Provider,{value:e},n)}function x7(e,t=[],n=null,r=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let o=e,a=n==null?void 0:n.errors;if(a!=null){let c=o.findIndex(l=>l.route.id&&(a==null?void 0:a[l.route.id])!==void 0);$e(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),o=o.slice(0,Math.min(o.length,c+1))}let i=!1,s=-1;if(n)for(let c=0;c<o.length;c++){let l=o[c];if((l.route.HydrateFallback||l.route.hydrateFallbackElement)&&(s=c),l.route.id){let{loaderData:u,errors:d}=n,f=l.route.loader&&!u.hasOwnProperty(l.route.id)&&(!d||d[l.route.id]===void 0);if(l.route.lazy||f){i=!0,s>=0?o=o.slice(0,s+1):o=[o[0]];break}}}return o.reduceRight((c,l,u)=>{let d,f=!1,p=null,y=null;n&&(d=a&&l.route.id?a[l.route.id]:void 0,p=l.route.errorElement||g7,i&&(s<0&&u===0?(uC("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),f=!0,y=null):s===u&&(f=!0,y=l.route.hydrateFallbackElement||null)));let m=t.concat(o.slice(0,u+1)),v=()=>{let b;return d?b=p:f?b=y:l.route.Component?b=g.createElement(l.route.Component,null):l.route.element?b=l.route.element:b=c,g.createElement(b7,{match:l,routeContext:{outlet:c,matches:m,isDataRoute:n!=null},children:b})};return n&&(l.route.ErrorBoundary||l.route.errorElement||u===0)?g.createElement(v7,{location:n.location,revalidation:n.revalidation,component:p,error:d,children:v(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):v()},null)}function sy(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function w7(e){let t=g.useContext(_a);return $e(t,sy(e)),t}function _7(e){let t=g.useContext(mc);return $e(t,sy(e)),t}function j7(e){let t=g.useContext(Hn);return $e(t,sy(e)),t}function cy(e){let t=j7(e),n=t.matches[t.matches.length-1];return $e(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function E7(){return cy("useRouteId")}function cC(){var r;let e=g.useContext(iy),t=_7("useRouteError"),n=cy("useRouteError");return e!==void 0?e:(r=t.errors)==null?void 0:r[n]}function S7(){let{router:e}=w7("useNavigate"),t=cy("useNavigate"),n=g.useRef(!1);return sC(()=>{n.current=!0}),g.useCallback(async(r,o={})=>{$t(n.current,iC),n.current&&(typeof r=="number"?e.navigate(r):await e.navigate(r,{fromRouteId:t,...o}))},[e,t])}var lC={};function uC(e,t,n){!t&&!lC[e]&&(lC[e]=!0,$t(!1,n))}var dC={};function fC(e,t){!e&&!dC[t]&&(dC[t]=!0,console.warn(t))}function pC(e){let t={hasErrorBoundary:e.hasErrorBoundary||e.ErrorBoundary!=null||e.errorElement!=null};return e.Component&&(e.element&&$t(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(t,{element:g.createElement(e.Component),Component:void 0})),e.HydrateFallback&&(e.hydrateFallbackElement&&$t(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(t,{hydrateFallbackElement:g.createElement(e.HydrateFallback),HydrateFallback:void 0})),e.ErrorBoundary&&(e.errorElement&&$t(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(t,{errorElement:g.createElement(e.ErrorBoundary),ErrorBoundary:void 0})),t}var C7=class{constructor(){this.status="pending",this.promise=new Promise((e,t)=>{this.resolve=n=>{this.status==="pending"&&(this.status="resolved",e(n))},this.reject=n=>{this.status==="pending"&&(this.status="rejected",t(n))}})}};function O7({router:e,flushSync:t}){let[n,r]=g.useState(e.state),[o,a]=g.useState(),[i,s]=g.useState({isTransitioning:!1}),[c,l]=g.useState(),[u,d]=g.useState(),[f,p]=g.useState(),y=g.useRef(new Map),m=g.useCallback((_,{deletedFetchers:w,flushSync:j,viewTransitionOpts:E})=>{w.forEach(O=>y.current.delete(O)),_.fetchers.forEach((O,k)=>{O.data!==void 0&&y.current.set(k,O.data)}),fC(j===!1||t!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let S=e.window!=null&&e.window.document!=null&&typeof e.window.document.startViewTransition=="function";if(fC(E==null||S,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!E||!S){t&&j?t(()=>r(_)):g.startTransition(()=>r(_));return}if(t&&j){t(()=>{u&&(c&&c.resolve(),u.skipTransition()),s({isTransitioning:!0,flushSync:!0,currentLocation:E.currentLocation,nextLocation:E.nextLocation})});let O=e.window.document.startViewTransition(()=>{t(()=>r(_))});O.finished.finally(()=>{t(()=>{l(void 0),d(void 0),a(void 0),s({isTransitioning:!1})})}),t(()=>d(O));return}u?(c&&c.resolve(),u.skipTransition(),p({state:_,currentLocation:E.currentLocation,nextLocation:E.nextLocation})):(a(_),s({isTransitioning:!0,flushSync:!1,currentLocation:E.currentLocation,nextLocation:E.nextLocation}))},[e.window,t,u,c]);g.useLayoutEffect(()=>e.subscribe(m),[e,m]),g.useEffect(()=>{i.isTransitioning&&!i.flushSync&&l(new C7)},[i]),g.useEffect(()=>{if(c&&o&&e.window){let _=o,w=c.promise,j=e.window.document.startViewTransition(async()=>{g.startTransition(()=>r(_)),await w});j.finished.finally(()=>{l(void 0),d(void 0),a(void 0),s({isTransitioning:!1})}),d(j)}},[o,c,e.window]),g.useEffect(()=>{c&&o&&n.location.key===o.location.key&&c.resolve()},[c,u,n.location,o]),g.useEffect(()=>{!i.isTransitioning&&f&&(a(f.state),s({isTransitioning:!0,flushSync:!1,currentLocation:f.currentLocation,nextLocation:f.nextLocation}),p(void 0))},[i.isTransitioning,f]);let v=g.useMemo(()=>({createHref:e.createHref,encodeLocation:e.encodeLocation,go:_=>e.navigate(_),push:(_,w,j)=>e.navigate(_,{state:w,preventScrollReset:j==null?void 0:j.preventScrollReset}),replace:(_,w,j)=>e.navigate(_,{replace:!0,state:w,preventScrollReset:j==null?void 0:j.preventScrollReset})}),[e]),b=e.basename||"/",x=g.useMemo(()=>({router:e,navigator:v,static:!1,basename:b}),[e,v,b]);return g.createElement(g.Fragment,null,g.createElement(_a.Provider,{value:x},g.createElement(mc.Provider,{value:n},g.createElement(aC.Provider,{value:y.current},g.createElement(ay.Provider,{value:i},g.createElement(A7,{basename:b,location:n.location,navigationType:n.historyAction,navigator:v},g.createElement(N7,{routes:e.routes,future:e.future,state:n})))))),null)}var N7=g.memo(M7);function M7({routes:e,future:t,state:n}){return m7(e,void 0,n,t)}function k7({to:e,replace:t,state:n,relative:r}){$e(bi(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=g.useContext(sr);$t(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=g.useContext(Hn),{pathname:i}=Gr(),s=yc(),c=Gu(e,Ju(a),i,r==="path"),l=JSON.stringify(c);return g.useEffect(()=>{s(JSON.parse(l),{replace:t,state:n,relative:r})},[s,l,r,t,n]),null}function P7(e){return p7(e.context)}function vc(e){$e(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function A7({basename:e="/",children:t=null,location:n,navigationType:r="POP",navigator:o,static:a=!1}){$e(!bi(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let i=e.replace(/^\/*/,"/"),s=g.useMemo(()=>({basename:i,navigator:o,static:a,future:{}}),[i,o,a]);typeof n=="string"&&(n=Jr(n));let{pathname:c="/",search:l="",hash:u="",state:d=null,key:f="default"}=n,p=g.useMemo(()=>{let y=ar(c,i);return y==null?null:{location:{pathname:y,search:l,hash:u,state:d,key:f},navigationType:r}},[i,c,l,u,d,f,r]);return $t(p!=null,`<Router basename="${i}"> is not able to match the URL "${c}${l}${u}" because it does not start with the basename, so the <Router> won't render anything.`),p==null?null:g.createElement(sr.Provider,{value:s},g.createElement(nd.Provider,{children:t,value:p}))}function ly(e,t=[]){let n=[];return g.Children.forEach(e,(r,o)=>{if(!g.isValidElement(r))return;let a=[...t,o];if(r.type===g.Fragment){n.push.apply(n,ly(r.props.children,a));return}$e(r.type===vc,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),$e(!r.props.index||!r.props.children,"An index route cannot have child routes.");let i={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(i.children=ly(r.props.children,a)),n.push(i)}),n}var T7=ly,rd="get",od="application/x-www-form-urlencoded";function ad(e){return e!=null&&typeof e.tagName=="string"}function R7(e){return ad(e)&&e.tagName.toLowerCase()==="button"}function I7(e){return ad(e)&&e.tagName.toLowerCase()==="form"}function D7(e){return ad(e)&&e.tagName.toLowerCase()==="input"}function L7(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function F7(e,t){return e.button===0&&(!t||t==="_self")&&!L7(e)}var id=null;function B7(){if(id===null)try{new FormData(document.createElement("form"),0),id=!1}catch{id=!0}return id}var $7=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function uy(e){return e!=null&&!$7.has(e)?($t(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${od}"`),null):e}function z7(e,t){let n,r,o,a,i;if(I7(e)){let s=e.getAttribute("action");r=s?ar(s,t):null,n=e.getAttribute("method")||rd,o=uy(e.getAttribute("enctype"))||od,a=new FormData(e)}else if(R7(e)||D7(e)&&(e.type==="submit"||e.type==="image")){let s=e.form;if(s==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=e.getAttribute("formaction")||s.getAttribute("action");if(r=c?ar(c,t):null,n=e.getAttribute("formmethod")||s.getAttribute("method")||rd,o=uy(e.getAttribute("formenctype"))||uy(s.getAttribute("enctype"))||od,a=new FormData(s,e),!B7()){let{name:l,type:u,value:d}=e;if(u==="image"){let f=l?`${l}.`:"";a.append(`${f}x`,"0"),a.append(`${f}y`,"0")}else l&&a.append(l,d)}}else{if(ad(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=rd,r=null,o=od,i=e}return a&&o==="text/plain"&&(i=a,a=void 0),{action:r,method:n.toLowerCase(),encType:o,formData:a,body:i}}function dy(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}async function V7(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module).then(async r=>(await r.__tla,r));return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function U7(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function H7(e,t,n){let r=await Promise.all(e.map(async o=>{let a=t.routes[o.route.id];if(a){let i=await V7(a,n);return i.links?i.links():[]}return[]}));return K7(r.flat(1).filter(U7).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function hC(e,t,n,r,o,a){let i=(c,l)=>n[l]?c.route.id!==n[l].route.id:!0,s=(c,l)=>{var u;return n[l].pathname!==c.pathname||((u=n[l].route.path)==null?void 0:u.endsWith("*"))&&n[l].params["*"]!==c.params["*"]};return a==="assets"?t.filter((c,l)=>i(c,l)||s(c,l)):a==="data"?t.filter((c,l)=>{var d;let u=r.routes[c.route.id];if(!u||!u.hasLoader)return!1;if(i(c,l)||s(c,l))return!0;if(c.route.shouldRevalidate){let f=c.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((d=n[0])==null?void 0:d.params)||{},nextUrl:new URL(e,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function W7(e,t){return q7(e.map(n=>{let r=t.routes[n.route.id];if(!r)return[];let o=[r.module];return r.imports&&(o=o.concat(r.imports)),o}).flat(1))}function q7(e){return[...new Set(e)]}function Y7(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}function K7(e,t){let n=new Set;return new Set(t),e.reduce((r,o)=>{let a=JSON.stringify(Y7(o));return n.has(a)||(n.add(a),r.push({key:a,link:o})),r},[])}function X7(e){let t=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return t.pathname==="/"?t.pathname="_root.data":t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function Q7(){let e=g.useContext(_a);return dy(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function J7(){let e=g.useContext(mc);return dy(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var fy=g.createContext(void 0);fy.displayName="FrameworkContext";function mC(){let e=g.useContext(fy);return dy(e,"You must render this element inside a <HydratedRouter> element"),e}function G7(e,t){let n=g.useContext(fy),[r,o]=g.useState(!1),[a,i]=g.useState(!1),{onFocus:s,onBlur:c,onMouseEnter:l,onMouseLeave:u,onTouchStart:d}=t,f=g.useRef(null);g.useEffect(()=>{if(e==="render"&&i(!0),e==="viewport"){let m=b=>{b.forEach(x=>{i(x.isIntersecting)})},v=new IntersectionObserver(m,{threshold:.5});return f.current&&v.observe(f.current),()=>{v.disconnect()}}},[e]),g.useEffect(()=>{if(r){let m=setTimeout(()=>{i(!0)},100);return()=>{clearTimeout(m)}}},[r]);let p=()=>{o(!0)},y=()=>{o(!1),i(!1)};return n?e!=="intent"?[a,f,{}]:[a,f,{onFocus:bc(s,p),onBlur:bc(c,y),onMouseEnter:bc(l,p),onMouseLeave:bc(u,y),onTouchStart:bc(d,p)}]:[!1,f,{}]}function bc(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function Z7({page:e,...t}){let{router:n}=Q7(),r=g.useMemo(()=>zo(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?g.createElement(tV,{page:e,matches:r,...t}):(console.warn(`Tried to prefetch ${e} but no routes matched.`),null)}function eV(e){let{manifest:t,routeModules:n}=mC(),[r,o]=g.useState([]);return g.useEffect(()=>{let a=!1;return H7(e,t,n).then(i=>{a||o(i)}),()=>{a=!0}},[e,t,n]),r}function tV({page:e,matches:t,...n}){let r=Gr(),{manifest:o,routeModules:a}=mC(),{loaderData:i,matches:s}=J7(),c=g.useMemo(()=>hC(e,t,s,o,r,"data"),[e,t,s,o,r]),l=g.useMemo(()=>hC(e,t,s,o,r,"assets"),[e,t,s,o,r]),u=g.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let p=new Set,y=!1;if(t.forEach(v=>{var x;let b=o.routes[v.route.id];!b||!b.hasLoader||(!c.some(_=>_.route.id===v.route.id)&&v.route.id in i&&((x=a[v.route.id])!=null&&x.shouldRevalidate)||b.hasClientLoader?y=!0:p.add(v.route.id))}),p.size===0)return[];let m=X7(e);return y&&p.size>0&&m.searchParams.set("_routes",t.filter(v=>p.has(v.route.id)).map(v=>v.route.id).join(",")),[m.pathname+m.search]},[i,r,o,c,t,e,a]),d=g.useMemo(()=>W7(l,o),[l,o]),f=eV(l);return g.createElement(g.Fragment,null,u.map(p=>g.createElement("link",{key:p,rel:"prefetch",as:"fetch",href:p,...n})),d.map(p=>g.createElement("link",{key:p,rel:"modulepreload",href:p,...n})),f.map(({key:p,link:y})=>g.createElement("link",{key:p,...y})))}function nV(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var yC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{yC&&(window.__reactRouterVersion="7.0.2")}catch{}function gC(e,t){return VS({basename:t==null?void 0:t.basename,future:t==null?void 0:t.future,history:mz({window:t==null?void 0:t.window}),hydrationData:(t==null?void 0:t.hydrationData)||vC(),routes:e,mapRouteProperties:pC,dataStrategy:t==null?void 0:t.dataStrategy,patchRoutesOnNavigation:t==null?void 0:t.patchRoutesOnNavigation,window:t==null?void 0:t.window}).initialize()}function rV(e,t){return VS({basename:t==null?void 0:t.basename,future:t==null?void 0:t.future,history:yz({window:t==null?void 0:t.window}),hydrationData:vC(),routes:e,mapRouteProperties:pC,dataStrategy:t==null?void 0:t.dataStrategy,patchRoutesOnNavigation:t==null?void 0:t.patchRoutesOnNavigation,window:t==null?void 0:t.window}).initialize()}function vC(){let e=window==null?void 0:window.__staticRouterHydrationData;return e&&e.errors&&(e={...e,errors:oV(e.errors)}),e}function oV(e){if(!e)return null;let t=Object.entries(e),n={};for(let[r,o]of t)if(o&&o.__type==="RouteErrorResponse")n[r]=new Zu(o.status,o.statusText,o.data,o.internal===!0);else if(o&&o.__type==="Error"){if(o.__subType){let a=window[o.__subType];if(typeof a=="function")try{let i=new a(o.message);i.stack="",n[r]=i}catch{}}if(n[r]==null){let a=new Error(o.message);a.stack="",n[r]=a}}else n[r]=o;return n}var bC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,xC=g.forwardRef(function({onClick:e,discover:t="render",prefetch:n="none",relative:r,reloadDocument:o,replace:a,state:i,target:s,to:c,preventScrollReset:l,viewTransition:u,...d},f){let{basename:p}=g.useContext(sr),y=typeof c=="string"&&bC.test(c),m,v=!1;if(typeof c=="string"&&y&&(m=c,yC))try{let O=new URL(window.location.href),k=c.startsWith("//")?new URL(O.protocol+c):new URL(c),N=ar(k.pathname,p);k.origin===O.origin&&N!=null?c=N+k.search+k.hash:v=!0}catch{$t(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let b=u7(c,{relative:r}),[x,_,w]=G7(n,d),j=cV(c,{replace:a,state:i,target:s,preventScrollReset:l,relative:r,viewTransition:u});function E(O){e&&e(O),O.defaultPrevented||j(O)}let S=g.createElement("a",{...d,...w,href:m||b,onClick:v||o?e:E,ref:nV(f,_),target:s,"data-discover":!y&&t==="render"?"true":void 0});return x&&!y?g.createElement(g.Fragment,null,S,g.createElement(Z7,{page:b})):S});xC.displayName="Link";var aV=g.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:n="",end:r=!1,style:o,to:a,viewTransition:i,children:s,...c},l){let u=gc(a,{relative:c.relative}),d=Gr(),f=g.useContext(mc),{navigator:p,basename:y}=g.useContext(sr),m=f!=null&&pV(u)&&i===!0,v=p.encodeLocation?p.encodeLocation(u).pathname:u.pathname,b=d.pathname,x=f&&f.navigation&&f.navigation.location?f.navigation.location.pathname:null;t||(b=b.toLowerCase(),x=x?x.toLowerCase():null,v=v.toLowerCase()),x&&y&&(x=ar(x,y)||x);const _=v!=="/"&&v.endsWith("/")?v.length-1:v.length;let w=b===v||!r&&b.startsWith(v)&&b.charAt(_)==="/",j=x!=null&&(x===v||!r&&x.startsWith(v)&&x.charAt(v.length)==="/"),E={isActive:w,isPending:j,isTransitioning:m},S=w?e:void 0,O;typeof n=="function"?O=n(E):O=[n,w?"active":null,j?"pending":null,m?"transitioning":null].filter(Boolean).join(" ");let k=typeof o=="function"?o(E):o;return g.createElement(xC,{...c,"aria-current":S,className:O,ref:l,style:k,to:a,viewTransition:i},typeof s=="function"?s(E):s)});aV.displayName="NavLink";var iV=g.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:r,replace:o,state:a,method:i=rd,action:s,onSubmit:c,relative:l,preventScrollReset:u,viewTransition:d,...f},p)=>{let y=dV(),m=fV(s,{relative:l}),v=i.toLowerCase()==="get"?"get":"post",b=typeof s=="string"&&bC.test(s),x=_=>{if(c&&c(_),_.defaultPrevented)return;_.preventDefault();let w=_.nativeEvent.submitter,j=(w==null?void 0:w.getAttribute("formmethod"))||i;y(w||_.currentTarget,{fetcherKey:t,method:j,navigate:n,replace:o,state:a,relative:l,preventScrollReset:u,viewTransition:d})};return g.createElement("form",{ref:p,method:v,action:m,onSubmit:r?c:x,...f,"data-discover":!b&&e==="render"?"true":void 0})});iV.displayName="Form";function sV(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function wC(e){let t=g.useContext(_a);return $e(t,sV(e)),t}function cV(e,{target:t,replace:n,state:r,preventScrollReset:o,relative:a,viewTransition:i}={}){let s=yc(),c=Gr(),l=gc(e,{relative:a});return g.useCallback(u=>{if(F7(u,t)){u.preventDefault();let d=n!==void 0?n:Qr(c)===Qr(l);s(e,{replace:d,state:r,preventScrollReset:o,relative:a,viewTransition:i})}},[c,s,l,n,r,t,e,o,a,i])}var lV=0,uV=()=>`__${String(++lV)}__`;function dV(){let{router:e}=wC("useSubmit"),{basename:t}=g.useContext(sr),n=E7();return g.useCallback(async(r,o={})=>{let{action:a,method:i,encType:s,formData:c,body:l}=z7(r,t);if(o.navigate===!1){let u=o.fetcherKey||uV();await e.fetch(u,n,o.action||a,{preventScrollReset:o.preventScrollReset,formData:c,body:l,formMethod:o.method||i,formEncType:o.encType||s,flushSync:o.flushSync})}else await e.navigate(o.action||a,{preventScrollReset:o.preventScrollReset,formData:c,body:l,formMethod:o.method||i,formEncType:o.encType||s,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[e,t,n])}function fV(e,{relative:t}={}){let{basename:n}=g.useContext(sr),r=g.useContext(Hn);$e(r,"useFormAction must be used inside a RouteContext");let[o]=r.matches.slice(-1),a={...gc(e||".",{relative:t})},i=Gr();if(e==null){a.search=i.search;let s=new URLSearchParams(a.search),c=s.getAll("index");if(c.some(l=>l==="")){s.delete("index"),c.filter(u=>u).forEach(u=>s.append("index",u));let l=s.toString();a.search=l?`?${l}`:""}}return(!e||e===".")&&o.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(a.pathname=a.pathname==="/"?n:Mr([n,a.pathname])),Qr(a)}function pV(e,t={}){let n=g.useContext(ay);$e(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=wC("useViewTransitionState"),o=gc(e,{relative:t.relative});if(!n.isTransitioning)return!1;let a=ar(n.currentLocation.pathname,r)||n.currentLocation.pathname,i=ar(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Qu(o.pathname,i)!=null||Qu(o.pathname,a)!=null}new TextEncoder;function hV(e){return g.createElement(O7,{flushSync:Au.flushSync,...e})}var mV=bwe.useId||(()=>{}),yV=0;mt=function(e){const[t,n]=g.useState(mV());return xn(()=>{e||n(r=>r??String(yV++))},[e]),e||(t?`radix-${t}`:"")};var py="Collapsible",[gV,_C]=Vn(py),[vV,hy]=gV(py),jC=g.forwardRef((e,t)=>{const{__scopeCollapsible:n,open:r,defaultOpen:o,disabled:a,onOpenChange:i,...s}=e,[c=!1,l]=en({prop:r,defaultProp:o,onChange:i});return h.jsx(vV,{scope:n,disabled:a,contentId:mt(),open:c,onOpenToggle:g.useCallback(()=>l(u=>!u),[l]),children:h.jsx(Oe.div,{"data-state":vy(c),"data-disabled":a?"":void 0,...s,ref:t})})});jC.displayName=py;var EC="CollapsibleTrigger",my=g.forwardRef((e,t)=>{const{__scopeCollapsible:n,...r}=e,o=hy(EC,n);return h.jsx(Oe.button,{type:"button","aria-controls":o.contentId,"aria-expanded":o.open||!1,"data-state":vy(o.open),"data-disabled":o.disabled?"":void 0,disabled:o.disabled,...r,ref:t,onClick:he(e.onClick,o.onOpenToggle)})});my.displayName=EC;var yy="CollapsibleContent",gy=g.forwardRef((e,t)=>{const{forceMount:n,...r}=e,o=hy(yy,e.__scopeCollapsible);return h.jsx(Nn,{present:n||o.open,children:({present:a})=>h.jsx(bV,{...r,ref:t,present:a})})});gy.displayName=yy;var bV=g.forwardRef((e,t)=>{const{__scopeCollapsible:n,present:r,children:o,...a}=e,i=hy(yy,n),[s,c]=g.useState(r),l=g.useRef(null),u=rt(t,l),d=g.useRef(0),f=d.current,p=g.useRef(0),y=p.current,m=i.open||s,v=g.useRef(m),b=g.useRef();return g.useEffect(()=>{const x=requestAnimationFrame(()=>v.current=!1);return()=>cancelAnimationFrame(x)},[]),xn(()=>{const x=l.current;if(x){b.current=b.current||{transitionDuration:x.style.transitionDuration,animationName:x.style.animationName},x.style.transitionDuration="0s",x.style.animationName="none";const _=x.getBoundingClientRect();d.current=_.height,p.current=_.width,v.current||(x.style.transitionDuration=b.current.transitionDuration,x.style.animationName=b.current.animationName),c(r)}},[i.open,r]),h.jsx(Oe.div,{"data-state":vy(i.open),"data-disabled":i.disabled?"":void 0,id:i.contentId,hidden:!m,...a,ref:u,style:{"--radix-collapsible-content-height":f?`${f}px`:void 0,"--radix-collapsible-content-width":y?`${y}px`:void 0,...e.style},children:m&&o})});function vy(e){return e?"open":"closed"}var SC=jC,xV=my,wV=gy;const _V=SC,jV=my,EV=gy,by=768;function SV(){const[e,t]=g.useState(void 0);return g.useEffect(()=>{const n=window.matchMedia(`(max-width: ${by-1}px)`),r=()=>{t(window.innerWidth<by)};return n.addEventListener("change",r),t(window.innerWidth<by),()=>n.removeEventListener("change",r)},[]),!!e}let xc;xc=qr("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),dt=g.forwardRef(({className:e,variant:t,size:n,asChild:r=!1,...o},a)=>{const i=r?Yr:"button";return h.jsx(i,{className:K(xc({variant:t,size:n,className:e})),ref:a,...o})}),dt.displayName="Button";const dn=g.forwardRef(({className:e,type:t,...n},r)=>h.jsx("input",{type:t,className:K("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...n}));dn.displayName="Input";var CV="Separator",CC="horizontal",OV=["horizontal","vertical"],OC=g.forwardRef((e,t)=>{const{decorative:n,orientation:r=CC,...o}=e,a=NV(r)?r:CC,i=n?{role:"none"}:{"aria-orientation":a==="vertical"?a:void 0,role:"separator"};return h.jsx(Oe.div,{"data-orientation":a,...i,...o,ref:t})});OC.displayName=CV;function NV(e){return OV.includes(e)}Gh=OC;const wc=g.forwardRef(({className:e,orientation:t="horizontal",decorative:n=!0,...r},o)=>h.jsx(Gh,{ref:o,decorative:n,orientation:t,className:K("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...r}));wc.displayName=Gh.displayName;var xy="focusScope.autoFocusOnMount",wy="focusScope.autoFocusOnUnmount",NC={bubbles:!1,cancelable:!0},MV="FocusScope",_c=g.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:o,onUnmountAutoFocus:a,...i}=e,[s,c]=g.useState(null),l=Fo(o),u=Fo(a),d=g.useRef(null),f=rt(t,m=>c(m)),p=g.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;g.useEffect(()=>{if(r){let m=function(_){if(p.paused||!s)return;const w=_.target;s.contains(w)?d.current=w:Uo(d.current,{select:!0})},v=function(_){if(p.paused||!s)return;const w=_.relatedTarget;w!==null&&(s.contains(w)||Uo(d.current,{select:!0}))},b=function(_){if(document.activeElement===document.body)for(const w of _)w.removedNodes.length>0&&Uo(s)};document.addEventListener("focusin",m),document.addEventListener("focusout",v);const x=new MutationObserver(b);return s&&x.observe(s,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",m),document.removeEventListener("focusout",v),x.disconnect()}}},[r,s,p.paused]),g.useEffect(()=>{if(s){PC.add(p);const m=document.activeElement;if(!s.contains(m)){const v=new CustomEvent(xy,NC);s.addEventListener(xy,l),s.dispatchEvent(v),v.defaultPrevented||(kV(IV(MC(s)),{select:!0}),document.activeElement===m&&Uo(s))}return()=>{s.removeEventListener(xy,l),setTimeout(()=>{const v=new CustomEvent(wy,NC);s.addEventListener(wy,u),s.dispatchEvent(v),v.defaultPrevented||Uo(m??document.body,{select:!0}),s.removeEventListener(wy,u),PC.remove(p)},0)}}},[s,l,u,p]);const y=g.useCallback(m=>{if(!n&&!r||p.paused)return;const v=m.key==="Tab"&&!m.altKey&&!m.ctrlKey&&!m.metaKey,b=document.activeElement;if(v&&b){const x=m.currentTarget,[_,w]=PV(x);_&&w?!m.shiftKey&&b===w?(m.preventDefault(),n&&Uo(_,{select:!0})):m.shiftKey&&b===_&&(m.preventDefault(),n&&Uo(w,{select:!0})):b===x&&m.preventDefault()}},[n,r,p.paused]);return h.jsx(Oe.div,{tabIndex:-1,...i,ref:f,onKeyDown:y})});_c.displayName=MV;function kV(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(Uo(r,{select:t}),document.activeElement!==n)return}function PV(e){const t=MC(e),n=kC(t,e),r=kC(t.reverse(),e);return[n,r]}function MC(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const o=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||o?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function kC(e,t){for(const n of e)if(!AV(n,{upTo:t}))return n}function AV(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function TV(e){return e instanceof HTMLInputElement&&"select"in e}function Uo(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&TV(e)&&t&&e.select()}}var PC=RV();function RV(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=AC(e,t),e.unshift(t)},remove(t){var n;e=AC(e,t),(n=e[0])==null||n.resume()}}}function AC(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function IV(e){return e.filter(t=>t.tagName!=="A")}var _y=0;function sd(){g.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??TC()),document.body.insertAdjacentElement("beforeend",e[1]??TC()),_y++,()=>{_y===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),_y--}},[])}function TC(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var kr=function(){return kr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},kr.apply(this,arguments)};function RC(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n}function DV(e,t,n){if(n||arguments.length===2)for(var r=0,o=t.length,a;r<o;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))}var cd="right-scroll-bar-position",ld="width-before-scroll-bar",LV="with-scroll-bars-hidden",FV="--removed-body-scroll-bar-size";function jy(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function BV(e,t){var n=g.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var o=n.value;o!==r&&(n.value=r,n.callback(r,o))}}}})[0];return n.callback=t,n.facade}var $V=typeof window<"u"?g.useLayoutEffect:g.useEffect,IC=new WeakMap;function zV(e,t){var n=BV(null,function(r){return e.forEach(function(o){return jy(o,r)})});return $V(function(){var r=IC.get(n);if(r){var o=new Set(r),a=new Set(e),i=n.current;o.forEach(function(s){a.has(s)||jy(s,null)}),a.forEach(function(s){o.has(s)||jy(s,i)})}IC.set(n,e)},[e]),n}function VV(e){return e}function UV(e,t){t===void 0&&(t=VV);var n=[],r=!1,o={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(a){var i=t(a,r);return n.push(i),function(){n=n.filter(function(s){return s!==i})}},assignSyncMedium:function(a){for(r=!0;n.length;){var i=n;n=[],i.forEach(a)}n={push:function(s){return a(s)},filter:function(){return n}}},assignMedium:function(a){r=!0;var i=[];if(n.length){var s=n;n=[],s.forEach(a),i=n}var c=function(){var u=i;i=[],u.forEach(a)},l=function(){return Promise.resolve().then(c)};l(),n={push:function(u){i.push(u),l()},filter:function(u){return i=i.filter(u),n}}}};return o}function HV(e){e===void 0&&(e={});var t=UV(null);return t.options=kr({async:!0,ssr:!1},e),t}var DC=function(e){var t=e.sideCar,n=RC(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return g.createElement(r,kr({},n))};DC.isSideCarExport=!0;function WV(e,t){return e.useMedium(t),DC}var LC=HV(),Ey=function(){},ud=g.forwardRef(function(e,t){var n=g.useRef(null),r=g.useState({onScrollCapture:Ey,onWheelCapture:Ey,onTouchMoveCapture:Ey}),o=r[0],a=r[1],i=e.forwardProps,s=e.children,c=e.className,l=e.removeScrollBar,u=e.enabled,d=e.shards,f=e.sideCar,p=e.noIsolation,y=e.inert,m=e.allowPinchZoom,v=e.as,b=v===void 0?"div":v,x=e.gapMode,_=RC(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),w=f,j=zV([n,t]),E=kr(kr({},_),o);return g.createElement(g.Fragment,null,u&&g.createElement(w,{sideCar:LC,removeScrollBar:l,shards:d,noIsolation:p,inert:y,setCallbacks:a,allowPinchZoom:!!m,lockRef:n,gapMode:x}),i?g.cloneElement(g.Children.only(s),kr(kr({},E),{ref:j})):g.createElement(b,kr({},E,{className:c,ref:j}),s))});ud.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},ud.classNames={fullWidth:ld,zeroRight:cd};var qV=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function YV(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=qV();return t&&e.setAttribute("nonce",t),e}function KV(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function XV(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var QV=function(){var e=0,t=null;return{add:function(n){e==0&&(t=YV())&&(KV(t,n),XV(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},JV=function(){var e=QV();return function(t,n){g.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},FC=function(){var e=JV(),t=function(n){var r=n.styles,o=n.dynamic;return e(r,o),null};return t},GV={left:0,top:0,right:0,gap:0},Sy=function(e){return parseInt(e||"",10)||0},ZV=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],o=t[e==="padding"?"paddingRight":"marginRight"];return[Sy(n),Sy(r),Sy(o)]},eU=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return GV;var t=ZV(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},tU=FC(),xi="data-scroll-locked",nU=function(e,t,n,r){var o=e.left,a=e.top,i=e.right,s=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(LV,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(s,"px ").concat(r,`;
  }
  body[`).concat(xi,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(o,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(i,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(s,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(s,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(cd,` {
    right: `).concat(s,"px ").concat(r,`;
  }
  
  .`).concat(ld,` {
    margin-right: `).concat(s,"px ").concat(r,`;
  }
  
  .`).concat(cd," .").concat(cd,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(ld," .").concat(ld,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(xi,`] {
    `).concat(FV,": ").concat(s,`px;
  }
`)},BC=function(){var e=parseInt(document.body.getAttribute(xi)||"0",10);return isFinite(e)?e:0},rU=function(){g.useEffect(function(){return document.body.setAttribute(xi,(BC()+1).toString()),function(){var e=BC()-1;e<=0?document.body.removeAttribute(xi):document.body.setAttribute(xi,e.toString())}},[])},oU=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,o=r===void 0?"margin":r;rU();var a=g.useMemo(function(){return eU(o)},[o]);return g.createElement(tU,{styles:nU(a,!t,o,n?"":"!important")})},Cy=!1;if(typeof window<"u")try{var dd=Object.defineProperty({},"passive",{get:function(){return Cy=!0,!0}});window.addEventListener("test",dd,dd),window.removeEventListener("test",dd,dd)}catch{Cy=!1}var wi=Cy?{passive:!1}:!1,aU=function(e){return e.tagName==="TEXTAREA"},$C=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!aU(e)&&n[t]==="visible")},iU=function(e){return $C(e,"overflowY")},sU=function(e){return $C(e,"overflowX")},zC=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var o=VC(e,r);if(o){var a=UC(e,r),i=a[1],s=a[2];if(i>s)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},cU=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},lU=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},VC=function(e,t){return e==="v"?iU(t):sU(t)},UC=function(e,t){return e==="v"?cU(t):lU(t)},uU=function(e,t){return e==="h"&&t==="rtl"?-1:1},dU=function(e,t,n,r,o){var a=uU(e,window.getComputedStyle(t).direction),i=a*r,s=n.target,c=t.contains(s),l=!1,u=i>0,d=0,f=0;do{var p=UC(e,s),y=p[0],m=p[1],v=p[2],b=m-v-a*y;(y||b)&&VC(e,s)&&(d+=b,f+=y),s instanceof ShadowRoot?s=s.host:s=s.parentNode}while(!c&&s!==document.body||c&&(t.contains(s)||t===s));return(u&&(Math.abs(d)<1||!o)||!u&&(Math.abs(f)<1||!o))&&(l=!0),l},fd=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},HC=function(e){return[e.deltaX,e.deltaY]},WC=function(e){return e&&"current"in e?e.current:e},fU=function(e,t){return e[0]===t[0]&&e[1]===t[1]},pU=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},hU=0,_i=[];function mU(e){var t=g.useRef([]),n=g.useRef([0,0]),r=g.useRef(),o=g.useState(hU++)[0],a=g.useState(FC)[0],i=g.useRef(e);g.useEffect(function(){i.current=e},[e]),g.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(o));var m=DV([e.lockRef.current],(e.shards||[]).map(WC),!0).filter(Boolean);return m.forEach(function(v){return v.classList.add("allow-interactivity-".concat(o))}),function(){document.body.classList.remove("block-interactivity-".concat(o)),m.forEach(function(v){return v.classList.remove("allow-interactivity-".concat(o))})}}},[e.inert,e.lockRef.current,e.shards]);var s=g.useCallback(function(m,v){if("touches"in m&&m.touches.length===2||m.type==="wheel"&&m.ctrlKey)return!i.current.allowPinchZoom;var b=fd(m),x=n.current,_="deltaX"in m?m.deltaX:x[0]-b[0],w="deltaY"in m?m.deltaY:x[1]-b[1],j,E=m.target,S=Math.abs(_)>Math.abs(w)?"h":"v";if("touches"in m&&S==="h"&&E.type==="range")return!1;var O=zC(S,E);if(!O)return!0;if(O?j=S:(j=S==="v"?"h":"v",O=zC(S,E)),!O)return!1;if(!r.current&&"changedTouches"in m&&(_||w)&&(r.current=j),!j)return!0;var k=r.current||j;return dU(k,v,m,k==="h"?_:w,!0)},[]),c=g.useCallback(function(m){var v=m;if(!(!_i.length||_i[_i.length-1]!==a)){var b="deltaY"in v?HC(v):fd(v),x=t.current.filter(function(j){return j.name===v.type&&(j.target===v.target||v.target===j.shadowParent)&&fU(j.delta,b)})[0];if(x&&x.should){v.cancelable&&v.preventDefault();return}if(!x){var _=(i.current.shards||[]).map(WC).filter(Boolean).filter(function(j){return j.contains(v.target)}),w=_.length>0?s(v,_[0]):!i.current.noIsolation;w&&v.cancelable&&v.preventDefault()}}},[]),l=g.useCallback(function(m,v,b,x){var _={name:m,delta:v,target:b,should:x,shadowParent:yU(b)};t.current.push(_),setTimeout(function(){t.current=t.current.filter(function(w){return w!==_})},1)},[]),u=g.useCallback(function(m){n.current=fd(m),r.current=void 0},[]),d=g.useCallback(function(m){l(m.type,HC(m),m.target,s(m,e.lockRef.current))},[]),f=g.useCallback(function(m){l(m.type,fd(m),m.target,s(m,e.lockRef.current))},[]);g.useEffect(function(){return _i.push(a),e.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:f}),document.addEventListener("wheel",c,wi),document.addEventListener("touchmove",c,wi),document.addEventListener("touchstart",u,wi),function(){_i=_i.filter(function(m){return m!==a}),document.removeEventListener("wheel",c,wi),document.removeEventListener("touchmove",c,wi),document.removeEventListener("touchstart",u,wi)}},[]);var p=e.removeScrollBar,y=e.inert;return g.createElement(g.Fragment,null,y?g.createElement(a,{styles:pU(o)}):null,p?g.createElement(oU,{gapMode:e.gapMode}):null)}function yU(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const gU=WV(LC,mU);var jc=g.forwardRef(function(e,t){return g.createElement(ud,kr({},e,{ref:t,sideCar:gU}))});jc.classNames=ud.classNames;var vU=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},ji=new WeakMap,pd=new WeakMap,hd={},Oy=0,qC=function(e){return e&&(e.host||qC(e.parentNode))},bU=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=qC(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},xU=function(e,t,n,r){var o=bU(t,Array.isArray(e)?e:[e]);hd[n]||(hd[n]=new WeakMap);var a=hd[n],i=[],s=new Set,c=new Set(o),l=function(d){!d||s.has(d)||(s.add(d),l(d.parentNode))};o.forEach(l);var u=function(d){!d||c.has(d)||Array.prototype.forEach.call(d.children,function(f){if(s.has(f))u(f);else try{var p=f.getAttribute(r),y=p!==null&&p!=="false",m=(ji.get(f)||0)+1,v=(a.get(f)||0)+1;ji.set(f,m),a.set(f,v),i.push(f),m===1&&y&&pd.set(f,!0),v===1&&f.setAttribute(n,"true"),y||f.setAttribute(r,"true")}catch(b){console.error("aria-hidden: cannot operate on ",f,b)}})};return u(t),s.clear(),Oy++,function(){i.forEach(function(d){var f=ji.get(d)-1,p=a.get(d)-1;ji.set(d,f),a.set(d,p),f||(pd.has(d)||d.removeAttribute(r),pd.delete(d)),p||d.removeAttribute(n)}),Oy--,Oy||(ji=new WeakMap,ji=new WeakMap,pd=new WeakMap,hd={})}},md=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),o=vU(e);return o?(r.push.apply(r,Array.from(o.querySelectorAll("[aria-live]"))),xU(r,o,n,"aria-hidden")):function(){return null}},Ny="Dialog",[YC,KC]=Vn(Ny),[wU,cr]=YC(Ny),XC=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:o,onOpenChange:a,modal:i=!0}=e,s=g.useRef(null),c=g.useRef(null),[l=!1,u]=en({prop:r,defaultProp:o,onChange:a});return h.jsx(wU,{scope:t,triggerRef:s,contentRef:c,contentId:mt(),titleId:mt(),descriptionId:mt(),open:l,onOpenChange:u,onOpenToggle:g.useCallback(()=>u(d=>!d),[u]),modal:i,children:n})};XC.displayName=Ny;var QC="DialogTrigger",JC=g.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=cr(QC,n),a=rt(t,o.triggerRef);return h.jsx(Oe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":Py(o.open),...r,ref:a,onClick:he(e.onClick,o.onOpenToggle)})});JC.displayName=QC;var My="DialogPortal",[_U,GC]=YC(My,{forceMount:void 0}),ZC=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:o}=e,a=cr(My,t);return h.jsx(_U,{scope:t,forceMount:n,children:g.Children.map(r,i=>h.jsx(Nn,{present:n||a.open,children:h.jsx(Ru,{asChild:!0,container:o,children:i})}))})};ZC.displayName=My;var yd="DialogOverlay",eO=g.forwardRef((e,t)=>{const n=GC(yd,e.__scopeDialog),{forceMount:r=n.forceMount,...o}=e,a=cr(yd,e.__scopeDialog);return a.modal?h.jsx(Nn,{present:r||a.open,children:h.jsx(jU,{...o,ref:t})}):null});eO.displayName=yd;var jU=g.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=cr(yd,n);return h.jsx(jc,{as:Yr,allowPinchZoom:!0,shards:[o.contentRef],children:h.jsx(Oe.div,{"data-state":Py(o.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),ja="DialogContent",tO=g.forwardRef((e,t)=>{const n=GC(ja,e.__scopeDialog),{forceMount:r=n.forceMount,...o}=e,a=cr(ja,e.__scopeDialog);return h.jsx(Nn,{present:r||a.open,children:a.modal?h.jsx(EU,{...o,ref:t}):h.jsx(SU,{...o,ref:t})})});tO.displayName=ja;var EU=g.forwardRef((e,t)=>{const n=cr(ja,e.__scopeDialog),r=g.useRef(null),o=rt(t,n.contentRef,r);return g.useEffect(()=>{const a=r.current;if(a)return md(a)},[]),h.jsx(nO,{...e,ref:o,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:he(e.onCloseAutoFocus,a=>{var i;a.preventDefault(),(i=n.triggerRef.current)==null||i.focus()}),onPointerDownOutside:he(e.onPointerDownOutside,a=>{const i=a.detail.originalEvent,s=i.button===0&&i.ctrlKey===!0;(i.button===2||s)&&a.preventDefault()}),onFocusOutside:he(e.onFocusOutside,a=>a.preventDefault())})}),SU=g.forwardRef((e,t)=>{const n=cr(ja,e.__scopeDialog),r=g.useRef(!1),o=g.useRef(!1);return h.jsx(nO,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var i,s;(i=e.onCloseAutoFocus)==null||i.call(e,a),a.defaultPrevented||(r.current||((s=n.triggerRef.current)==null||s.focus()),a.preventDefault()),r.current=!1,o.current=!1},onInteractOutside:a=>{var s,c;(s=e.onInteractOutside)==null||s.call(e,a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const i=a.target;(c=n.triggerRef.current)!=null&&c.contains(i)&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&o.current&&a.preventDefault()}})}),nO=g.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:o,onCloseAutoFocus:a,...i}=e,s=cr(ja,n),c=g.useRef(null),l=rt(t,c);return sd(),h.jsxs(h.Fragment,{children:[h.jsx(_c,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:o,onUnmountAutoFocus:a,children:h.jsx(Tu,{role:"dialog",id:s.contentId,"aria-describedby":s.descriptionId,"aria-labelledby":s.titleId,"data-state":Py(s.open),...i,ref:l,onDismiss:()=>s.onOpenChange(!1)})}),h.jsxs(h.Fragment,{children:[h.jsx(lO,{titleId:s.titleId}),h.jsx(dO,{contentRef:c,descriptionId:s.descriptionId})]})]})}),ky="DialogTitle",rO=g.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=cr(ky,n);return h.jsx(Oe.h2,{id:o.titleId,...r,ref:t})});rO.displayName=ky;var oO="DialogDescription",aO=g.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=cr(oO,n);return h.jsx(Oe.p,{id:o.descriptionId,...r,ref:t})});aO.displayName=oO;var iO="DialogClose",sO=g.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=cr(iO,n);return h.jsx(Oe.button,{type:"button",...r,ref:t,onClick:he(e.onClick,()=>o.onOpenChange(!1))})});sO.displayName=iO;function Py(e){return e?"open":"closed"}let Ay,cO,Ty,lO,uO,dO,fO;Ay="DialogTitleWarning",[cO,Ty]=xwe(Ay,{contentName:ja,titleName:ky,docsSlug:"dialog"}),lO=({titleId:e})=>{const t=Ty(Ay),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return g.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},uO="DialogDescriptionWarning",dO=({contentRef:e,descriptionId:t})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Ty(uO).contentName}}.`;return g.useEffect(()=>{var o;const r=(o=e.current)==null?void 0:o.getAttribute("aria-describedby");t&&r&&(document.getElementById(t)||console.warn(n))},[n,e,t]),null},tc=XC,fO=JC,ic=ZC,va=eO,ba=tO,di=rO,fi=aO,sc=sO;const CU=tc,OU=ic,pO=g.forwardRef(({className:e,...t},n)=>h.jsx(va,{className:K("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));pO.displayName=va.displayName;const NU=qr("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),hO=g.forwardRef(({side:e="right",className:t,children:n,...r},o)=>h.jsxs(OU,{children:[h.jsx(pO,{}),h.jsxs(ba,{ref:o,className:K(NU({side:e}),t),...r,children:[n,h.jsxs(sc,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[h.jsx(ue,{name:"x",className:"h-4 w-4"}),h.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));hO.displayName=ba.displayName;const MU=g.forwardRef(({className:e,...t},n)=>h.jsx(di,{ref:n,className:K("text-lg font-semibold text-foreground",e),...t}));MU.displayName=di.displayName;const kU=g.forwardRef(({className:e,...t},n)=>h.jsx(fi,{ref:n,className:K("text-sm text-muted-foreground",e),...t}));kU.displayName=fi.displayName;function mO({className:e,...t}){return h.jsx("div",{className:K("animate-pulse rounded-md bg-muted",e),...t})}const PU=["top","right","bottom","left"],Pr=Math.min,Tn=Math.max,gd=Math.round,vd=Math.floor,Ho=e=>({x:e,y:e}),AU={left:"right",right:"left",bottom:"top",top:"bottom"},TU={start:"end",end:"start"};function Ry(e,t,n){return Tn(e,Pr(t,n))}function Zr(e,t){return typeof e=="function"?e(t):e}function eo(e){return e.split("-")[0]}function Ei(e){return e.split("-")[1]}function Iy(e){return e==="x"?"y":"x"}function Dy(e){return e==="y"?"height":"width"}function Wo(e){return["top","bottom"].includes(eo(e))?"y":"x"}function Ly(e){return Iy(Wo(e))}function RU(e,t,n){n===void 0&&(n=!1);const r=Ei(e),o=Ly(e),a=Dy(o);let i=o==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[a]>t.floating[a]&&(i=bd(i)),[i,bd(i)]}function IU(e){const t=bd(e);return[Fy(e),t,Fy(t)]}function Fy(e){return e.replace(/start|end/g,t=>TU[t])}function DU(e,t,n){const r=["left","right"],o=["right","left"],a=["top","bottom"],i=["bottom","top"];switch(e){case"top":case"bottom":return n?t?o:r:t?r:o;case"left":case"right":return t?a:i;default:return[]}}function LU(e,t,n,r){const o=Ei(e);let a=DU(eo(e),n==="start",r);return o&&(a=a.map(i=>i+"-"+o),t&&(a=a.concat(a.map(Fy)))),a}function bd(e){return e.replace(/left|right|bottom|top/g,t=>AU[t])}function FU(e){return{top:0,right:0,bottom:0,left:0,...e}}function yO(e){return typeof e!="number"?FU(e):{top:e,right:e,bottom:e,left:e}}function xd(e){const{x:t,y:n,width:r,height:o}=e;return{width:r,height:o,top:n,left:t,right:t+r,bottom:n+o,x:t,y:n}}function gO(e,t,n){let{reference:r,floating:o}=e;const a=Wo(t),i=Ly(t),s=Dy(i),c=eo(t),l=a==="y",u=r.x+r.width/2-o.width/2,d=r.y+r.height/2-o.height/2,f=r[s]/2-o[s]/2;let p;switch(c){case"top":p={x:u,y:r.y-o.height};break;case"bottom":p={x:u,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:d};break;case"left":p={x:r.x-o.width,y:d};break;default:p={x:r.x,y:r.y}}switch(Ei(t)){case"start":p[i]-=f*(n&&l?-1:1);break;case"end":p[i]+=f*(n&&l?-1:1);break}return p}const BU=async(e,t,n)=>{const{placement:r="bottom",strategy:o="absolute",middleware:a=[],platform:i}=n,s=a.filter(Boolean),c=await(i.isRTL==null?void 0:i.isRTL(t));let l=await i.getElementRects({reference:e,floating:t,strategy:o}),{x:u,y:d}=gO(l,r,c),f=r,p={},y=0;for(let m=0;m<s.length;m++){const{name:v,fn:b}=s[m],{x,y:_,data:w,reset:j}=await b({x:u,y:d,initialPlacement:r,placement:f,strategy:o,middlewareData:p,rects:l,platform:i,elements:{reference:e,floating:t}});u=x??u,d=_??d,p={...p,[v]:{...p[v],...w}},j&&y<=50&&(y++,typeof j=="object"&&(j.placement&&(f=j.placement),j.rects&&(l=j.rects===!0?await i.getElementRects({reference:e,floating:t,strategy:o}):j.rects),{x:u,y:d}=gO(l,f,c)),m=-1)}return{x:u,y:d,placement:f,strategy:o,middlewareData:p}};async function Ec(e,t){var n;t===void 0&&(t={});const{x:r,y:o,platform:a,rects:i,elements:s,strategy:c}=e,{boundary:l="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:f=!1,padding:p=0}=Zr(t,e),y=yO(p),m=s[f?d==="floating"?"reference":"floating":d],v=xd(await a.getClippingRect({element:(n=await(a.isElement==null?void 0:a.isElement(m)))==null||n?m:m.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(s.floating)),boundary:l,rootBoundary:u,strategy:c})),b=d==="floating"?{x:r,y:o,width:i.floating.width,height:i.floating.height}:i.reference,x=await(a.getOffsetParent==null?void 0:a.getOffsetParent(s.floating)),_=await(a.isElement==null?void 0:a.isElement(x))?await(a.getScale==null?void 0:a.getScale(x))||{x:1,y:1}:{x:1,y:1},w=xd(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:s,rect:b,offsetParent:x,strategy:c}):b);return{top:(v.top-w.top+y.top)/_.y,bottom:(w.bottom-v.bottom+y.bottom)/_.y,left:(v.left-w.left+y.left)/_.x,right:(w.right-v.right+y.right)/_.x}}const $U=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:o,rects:a,platform:i,elements:s,middlewareData:c}=t,{element:l,padding:u=0}=Zr(e,t)||{};if(l==null)return{};const d=yO(u),f={x:n,y:r},p=Ly(o),y=Dy(p),m=await i.getDimensions(l),v=p==="y",b=v?"top":"left",x=v?"bottom":"right",_=v?"clientHeight":"clientWidth",w=a.reference[y]+a.reference[p]-f[p]-a.floating[y],j=f[p]-a.reference[p],E=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l));let S=E?E[_]:0;(!S||!await(i.isElement==null?void 0:i.isElement(E)))&&(S=s.floating[_]||a.floating[y]);const O=w/2-j/2,k=S/2-m[y]/2-1,N=Pr(d[b],k),P=Pr(d[x],k),R=N,A=S-m[y]-P,C=S/2-m[y]/2+O,M=Ry(R,C,A),T=!c.arrow&&Ei(o)!=null&&C!==M&&a.reference[y]/2-(C<R?N:P)-m[y]/2<0,D=T?C<R?C-R:C-A:0;return{[p]:f[p]+D,data:{[p]:M,centerOffset:C-M-D,...T&&{alignmentOffset:D}},reset:T}}}),zU=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:o,middlewareData:a,rects:i,initialPlacement:s,platform:c,elements:l}=t,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:m=!0,...v}=Zr(e,t);if((n=a.arrow)!=null&&n.alignmentOffset)return{};const b=eo(o),x=Wo(s),_=eo(s)===s,w=await(c.isRTL==null?void 0:c.isRTL(l.floating)),j=f||(_||!m?[bd(s)]:IU(s)),E=y!=="none";!f&&E&&j.push(...LU(s,m,y,w));const S=[s,...j],O=await Ec(t,v),k=[];let N=((r=a.flip)==null?void 0:r.overflows)||[];if(u&&k.push(O[b]),d){const C=RU(o,i,w);k.push(O[C[0]],O[C[1]])}if(N=[...N,{placement:o,overflows:k}],!k.every(C=>C<=0)){var P,R;const C=(((P=a.flip)==null?void 0:P.index)||0)+1,M=S[C];if(M)return{data:{index:C,overflows:N},reset:{placement:M}};let T=(R=N.filter(D=>D.overflows[0]<=0).sort((D,I)=>D.overflows[1]-I.overflows[1])[0])==null?void 0:R.placement;if(!T)switch(p){case"bestFit":{var A;const D=(A=N.filter(I=>{if(E){const L=Wo(I.placement);return L===x||L==="y"}return!0}).map(I=>[I.placement,I.overflows.filter(L=>L>0).reduce((L,B)=>L+B,0)]).sort((I,L)=>I[1]-L[1])[0])==null?void 0:A[0];D&&(T=D);break}case"initialPlacement":T=s;break}if(o!==T)return{reset:{placement:T}}}return{}}}};function vO(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function bO(e){return PU.some(t=>e[t]>=0)}const VU=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...o}=Zr(e,t);switch(r){case"referenceHidden":{const a=await Ec(t,{...o,elementContext:"reference"}),i=vO(a,n.reference);return{data:{referenceHiddenOffsets:i,referenceHidden:bO(i)}}}case"escaped":{const a=await Ec(t,{...o,altBoundary:!0}),i=vO(a,n.floating);return{data:{escapedOffsets:i,escaped:bO(i)}}}default:return{}}}}};async function UU(e,t){const{placement:n,platform:r,elements:o}=e,a=await(r.isRTL==null?void 0:r.isRTL(o.floating)),i=eo(n),s=Ei(n),c=Wo(n)==="y",l=["left","top"].includes(i)?-1:1,u=a&&c?-1:1,d=Zr(t,e);let{mainAxis:f,crossAxis:p,alignmentAxis:y}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...d};return s&&typeof y=="number"&&(p=s==="end"?y*-1:y),c?{x:p*u,y:f*l}:{x:f*l,y:p*u}}const HU=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:o,y:a,placement:i,middlewareData:s}=t,c=await UU(t,e);return i===((n=s.offset)==null?void 0:n.placement)&&(r=s.arrow)!=null&&r.alignmentOffset?{}:{x:o+c.x,y:a+c.y,data:{...c,placement:i}}}}},WU=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:o}=t,{mainAxis:a=!0,crossAxis:i=!1,limiter:s={fn:v=>{let{x:b,y:x}=v;return{x:b,y:x}}},...c}=Zr(e,t),l={x:n,y:r},u=await Ec(t,c),d=Wo(eo(o)),f=Iy(d);let p=l[f],y=l[d];if(a){const v=f==="y"?"top":"left",b=f==="y"?"bottom":"right",x=p+u[v],_=p-u[b];p=Ry(x,p,_)}if(i){const v=d==="y"?"top":"left",b=d==="y"?"bottom":"right",x=y+u[v],_=y-u[b];y=Ry(x,y,_)}const m=s.fn({...t,[f]:p,[d]:y});return{...m,data:{x:m.x-n,y:m.y-r}}}}},qU=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:o,rects:a,middlewareData:i}=t,{offset:s=0,mainAxis:c=!0,crossAxis:l=!0}=Zr(e,t),u={x:n,y:r},d=Wo(o),f=Iy(d);let p=u[f],y=u[d];const m=Zr(s,t),v=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(c){const _=f==="y"?"height":"width",w=a.reference[f]-a.floating[_]+v.mainAxis,j=a.reference[f]+a.reference[_]-v.mainAxis;p<w?p=w:p>j&&(p=j)}if(l){var b,x;const _=f==="y"?"width":"height",w=["top","left"].includes(eo(o)),j=a.reference[d]-a.floating[_]+(w&&((b=i.offset)==null?void 0:b[d])||0)+(w?0:v.crossAxis),E=a.reference[d]+a.reference[_]+(w?0:((x=i.offset)==null?void 0:x[d])||0)-(w?v.crossAxis:0);y<j?y=j:y>E&&(y=E)}return{[f]:p,[d]:y}}}},YU=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){const{placement:n,rects:r,platform:o,elements:a}=t,{apply:i=()=>{},...s}=Zr(e,t),c=await Ec(t,s),l=eo(n),u=Ei(n),d=Wo(n)==="y",{width:f,height:p}=r.floating;let y,m;l==="top"||l==="bottom"?(y=l,m=u===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(m=l,y=u==="end"?"top":"bottom");const v=p-c.top-c.bottom,b=f-c.left-c.right,x=Pr(p-c[y],v),_=Pr(f-c[m],b),w=!t.middlewareData.shift;let j=x,E=_;if(d?E=u||w?Pr(_,b):b:j=u||w?Pr(x,v):v,w&&!u){const O=Tn(c.left,0),k=Tn(c.right,0),N=Tn(c.top,0),P=Tn(c.bottom,0);d?E=f-2*(O!==0||k!==0?O+k:Tn(c.left,c.right)):j=p-2*(N!==0||P!==0?N+P:Tn(c.top,c.bottom))}await i({...t,availableWidth:E,availableHeight:j});const S=await o.getDimensions(a.floating);return f!==S.width||p!==S.height?{reset:{rects:!0}}:{}}}};function Si(e){return xO(e)?(e.nodeName||"").toLowerCase():"#document"}function Rn(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function to(e){var t;return(t=(xO(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function xO(e){return e instanceof Node||e instanceof Rn(e).Node}function lr(e){return e instanceof Element||e instanceof Rn(e).Element}function Ar(e){return e instanceof HTMLElement||e instanceof Rn(e).HTMLElement}function wO(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Rn(e).ShadowRoot}function Sc(e){const{overflow:t,overflowX:n,overflowY:r,display:o}=ur(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(o)}function KU(e){return["table","td","th"].includes(Si(e))}function wd(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function By(e){const t=$y(),n=lr(e)?ur(e):e;return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function XU(e){let t=qo(e);for(;Ar(t)&&!Ci(t);){if(By(t))return t;if(wd(t))return null;t=qo(t)}return null}function $y(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Ci(e){return["html","body","#document"].includes(Si(e))}function ur(e){return Rn(e).getComputedStyle(e)}function _d(e){return lr(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function qo(e){if(Si(e)==="html")return e;const t=e.assignedSlot||e.parentNode||wO(e)&&e.host||to(e);return wO(t)?t.host:t}function _O(e){const t=qo(e);return Ci(t)?e.ownerDocument?e.ownerDocument.body:e.body:Ar(t)&&Sc(t)?t:_O(t)}function Cc(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const o=_O(e),a=o===((r=e.ownerDocument)==null?void 0:r.body),i=Rn(o);if(a){const s=zy(i);return t.concat(i,i.visualViewport||[],Sc(o)?o:[],s&&n?Cc(s):[])}return t.concat(o,Cc(o,[],n))}function zy(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function jO(e){const t=ur(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const o=Ar(e),a=o?e.offsetWidth:n,i=o?e.offsetHeight:r,s=gd(n)!==a||gd(r)!==i;return s&&(n=a,r=i),{width:n,height:r,$:s}}function Vy(e){return lr(e)?e:e.contextElement}function Oi(e){const t=Vy(e);if(!Ar(t))return Ho(1);const n=t.getBoundingClientRect(),{width:r,height:o,$:a}=jO(t);let i=(a?gd(n.width):n.width)/r,s=(a?gd(n.height):n.height)/o;return(!i||!Number.isFinite(i))&&(i=1),(!s||!Number.isFinite(s))&&(s=1),{x:i,y:s}}const QU=Ho(0);function EO(e){const t=Rn(e);return!$y()||!t.visualViewport?QU:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function JU(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Rn(e)?!1:t}function Ea(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const o=e.getBoundingClientRect(),a=Vy(e);let i=Ho(1);t&&(r?lr(r)&&(i=Oi(r)):i=Oi(e));const s=JU(a,n,r)?EO(a):Ho(0);let c=(o.left+s.x)/i.x,l=(o.top+s.y)/i.y,u=o.width/i.x,d=o.height/i.y;if(a){const f=Rn(a),p=r&&lr(r)?Rn(r):r;let y=f,m=zy(y);for(;m&&r&&p!==y;){const v=Oi(m),b=m.getBoundingClientRect(),x=ur(m),_=b.left+(m.clientLeft+parseFloat(x.paddingLeft))*v.x,w=b.top+(m.clientTop+parseFloat(x.paddingTop))*v.y;c*=v.x,l*=v.y,u*=v.x,d*=v.y,c+=_,l+=w,y=Rn(m),m=zy(y)}}return xd({width:u,height:d,x:c,y:l})}function GU(e){let{elements:t,rect:n,offsetParent:r,strategy:o}=e;const a=o==="fixed",i=to(r),s=t?wd(t.floating):!1;if(r===i||s&&a)return n;let c={scrollLeft:0,scrollTop:0},l=Ho(1);const u=Ho(0),d=Ar(r);if((d||!d&&!a)&&((Si(r)!=="body"||Sc(i))&&(c=_d(r)),Ar(r))){const f=Ea(r);l=Oi(r),u.x=f.x+r.clientLeft,u.y=f.y+r.clientTop}return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-c.scrollLeft*l.x+u.x,y:n.y*l.y-c.scrollTop*l.y+u.y}}function ZU(e){return Array.from(e.getClientRects())}function SO(e){return Ea(to(e)).left+_d(e).scrollLeft}function eH(e){const t=to(e),n=_d(e),r=e.ownerDocument.body,o=Tn(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),a=Tn(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let i=-n.scrollLeft+SO(e);const s=-n.scrollTop;return ur(r).direction==="rtl"&&(i+=Tn(t.clientWidth,r.clientWidth)-o),{width:o,height:a,x:i,y:s}}function tH(e,t){const n=Rn(e),r=to(e),o=n.visualViewport;let a=r.clientWidth,i=r.clientHeight,s=0,c=0;if(o){a=o.width,i=o.height;const l=$y();(!l||l&&t==="fixed")&&(s=o.offsetLeft,c=o.offsetTop)}return{width:a,height:i,x:s,y:c}}function nH(e,t){const n=Ea(e,!0,t==="fixed"),r=n.top+e.clientTop,o=n.left+e.clientLeft,a=Ar(e)?Oi(e):Ho(1),i=e.clientWidth*a.x,s=e.clientHeight*a.y,c=o*a.x,l=r*a.y;return{width:i,height:s,x:c,y:l}}function CO(e,t,n){let r;if(t==="viewport")r=tH(e,n);else if(t==="document")r=eH(to(e));else if(lr(t))r=nH(t,n);else{const o=EO(e);r={...t,x:t.x-o.x,y:t.y-o.y}}return xd(r)}function OO(e,t){const n=qo(e);return n===t||!lr(n)||Ci(n)?!1:ur(n).position==="fixed"||OO(n,t)}function rH(e,t){const n=t.get(e);if(n)return n;let r=Cc(e,[],!1).filter(s=>lr(s)&&Si(s)!=="body"),o=null;const a=ur(e).position==="fixed";let i=a?qo(e):e;for(;lr(i)&&!Ci(i);){const s=ur(i),c=By(i);!c&&s.position==="fixed"&&(o=null),(a?!c&&!o:!c&&s.position==="static"&&o&&["absolute","fixed"].includes(o.position)||Sc(i)&&!c&&OO(e,i))?r=r.filter(l=>l!==i):o=s,i=qo(i)}return t.set(e,r),r}function oH(e){let{element:t,boundary:n,rootBoundary:r,strategy:o}=e;const a=[...n==="clippingAncestors"?wd(t)?[]:rH(t,this._c):[].concat(n),r],i=a[0],s=a.reduce((c,l)=>{const u=CO(t,l,o);return c.top=Tn(u.top,c.top),c.right=Pr(u.right,c.right),c.bottom=Pr(u.bottom,c.bottom),c.left=Tn(u.left,c.left),c},CO(t,i,o));return{width:s.right-s.left,height:s.bottom-s.top,x:s.left,y:s.top}}function aH(e){const{width:t,height:n}=jO(e);return{width:t,height:n}}function iH(e,t,n){const r=Ar(t),o=to(t),a=n==="fixed",i=Ea(e,!0,a,t);let s={scrollLeft:0,scrollTop:0};const c=Ho(0);if(r||!r&&!a)if((Si(t)!=="body"||Sc(o))&&(s=_d(t)),r){const d=Ea(t,!0,a,t);c.x=d.x+t.clientLeft,c.y=d.y+t.clientTop}else o&&(c.x=SO(o));const l=i.left+s.scrollLeft-c.x,u=i.top+s.scrollTop-c.y;return{x:l,y:u,width:i.width,height:i.height}}function Uy(e){return ur(e).position==="static"}function NO(e,t){return!Ar(e)||ur(e).position==="fixed"?null:t?t(e):e.offsetParent}function MO(e,t){const n=Rn(e);if(wd(e))return n;if(!Ar(e)){let o=qo(e);for(;o&&!Ci(o);){if(lr(o)&&!Uy(o))return o;o=qo(o)}return n}let r=NO(e,t);for(;r&&KU(r)&&Uy(r);)r=NO(r,t);return r&&Ci(r)&&Uy(r)&&!By(r)?n:r||XU(e)||n}const sH=async function(e){const t=this.getOffsetParent||MO,n=this.getDimensions,r=await n(e.floating);return{reference:iH(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function cH(e){return ur(e).direction==="rtl"}const lH={convertOffsetParentRelativeRectToViewportRelativeRect:GU,getDocumentElement:to,getClippingRect:oH,getOffsetParent:MO,getElementRects:sH,getClientRects:ZU,getDimensions:aH,getScale:Oi,isElement:lr,isRTL:cH};function uH(e,t){let n=null,r;const o=to(e);function a(){var s;clearTimeout(r),(s=n)==null||s.disconnect(),n=null}function i(s,c){s===void 0&&(s=!1),c===void 0&&(c=1),a();const{left:l,top:u,width:d,height:f}=e.getBoundingClientRect();if(s||t(),!d||!f)return;const p=vd(u),y=vd(o.clientWidth-(l+d)),m=vd(o.clientHeight-(u+f)),v=vd(l),b={rootMargin:-p+"px "+-y+"px "+-m+"px "+-v+"px",threshold:Tn(0,Pr(1,c))||1};let x=!0;function _(w){const j=w[0].intersectionRatio;if(j!==c){if(!x)return i();j?i(!1,j):r=setTimeout(()=>{i(!1,1e-7)},1e3)}x=!1}try{n=new IntersectionObserver(_,{...b,root:o.ownerDocument})}catch{n=new IntersectionObserver(_,b)}n.observe(e)}return i(!0),a}HE=function(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:o=!0,ancestorResize:a=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:s=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,l=Vy(e),u=o||a?[...l?Cc(l):[],...Cc(t)]:[];u.forEach(b=>{o&&b.addEventListener("scroll",n,{passive:!0}),a&&b.addEventListener("resize",n)});const d=l&&s?uH(l,n):null;let f=-1,p=null;i&&(p=new ResizeObserver(b=>{let[x]=b;x&&x.target===l&&p&&(p.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var _;(_=p)==null||_.observe(t)})),n()}),l&&!c&&p.observe(l),p.observe(t));let y,m=c?Ea(e):null;c&&v();function v(){const b=Ea(e);m&&(b.x!==m.x||b.y!==m.y||b.width!==m.width||b.height!==m.height)&&n(),m=b,y=requestAnimationFrame(v)}return n(),()=>{var b;u.forEach(x=>{o&&x.removeEventListener("scroll",n),a&&x.removeEventListener("resize",n)}),d==null||d(),(b=p)==null||b.disconnect(),p=null,c&&cancelAnimationFrame(y)}};let kO;zE=HU,aS=WU,VE=zU,sS=YU,kO=VU,Rm=$U,iS=qU,UE=(e,t,n)=>{const r=new Map,o={platform:lH,...n},a={...o.platform,_c:r};return BU(e,t,{...o,platform:a})};var jd=typeof document<"u"?g.useLayoutEffect:g.useEffect;function Ed(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,o;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!Ed(e[r],t[r]))return!1;return!0}if(o=Object.keys(e),n=o.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,o[r]))return!1;for(r=n;r--!==0;){const a=o[r];if(!(a==="_owner"&&e.$$typeof)&&!Ed(e[a],t[a]))return!1}return!0}return e!==e&&t!==t}function PO(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function AO(e,t){const n=PO(e);return Math.round(t*n)/n}function TO(e){const t=g.useRef(e);return jd(()=>{t.current=e}),t}function dH(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:o,elements:{reference:a,floating:i}={},transform:s=!0,whileElementsMounted:c,open:l}=e,[u,d]=g.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[f,p]=g.useState(r);Ed(f,r)||p(r);const[y,m]=g.useState(null),[v,b]=g.useState(null),x=g.useCallback(D=>{D!==E.current&&(E.current=D,m(D))},[]),_=g.useCallback(D=>{D!==S.current&&(S.current=D,b(D))},[]),w=a||y,j=i||v,E=g.useRef(null),S=g.useRef(null),O=g.useRef(u),k=c!=null,N=TO(c),P=TO(o),R=g.useCallback(()=>{if(!E.current||!S.current)return;const D={placement:t,strategy:n,middleware:f};P.current&&(D.platform=P.current),UE(E.current,S.current,D).then(I=>{const L={...I,isPositioned:!0};A.current&&!Ed(O.current,L)&&(O.current=L,Au.flushSync(()=>{d(L)}))})},[f,t,n,P]);jd(()=>{l===!1&&O.current.isPositioned&&(O.current.isPositioned=!1,d(D=>({...D,isPositioned:!1})))},[l]);const A=g.useRef(!1);jd(()=>(A.current=!0,()=>{A.current=!1}),[]),jd(()=>{if(w&&(E.current=w),j&&(S.current=j),w&&j){if(N.current)return N.current(w,j,R);R()}},[w,j,R,N,k]);const C=g.useMemo(()=>({reference:E,floating:S,setReference:x,setFloating:_}),[x,_]),M=g.useMemo(()=>({reference:w,floating:j}),[w,j]),T=g.useMemo(()=>{const D={position:n,left:0,top:0};if(!M.floating)return D;const I=AO(M.floating,u.x),L=AO(M.floating,u.y);return s?{...D,transform:"translate("+I+"px, "+L+"px)",...PO(M.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:I,top:L}},[n,s,M.floating,u.x,u.y]);return g.useMemo(()=>({...u,update:R,refs:C,elements:M,floatingStyles:T}),[u,R,C,M,T])}const fH=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:o}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?Rm({element:r.current,padding:o}).fn(n):{}:r?Rm({element:r,padding:o}).fn(n):{}}}},pH=(e,t)=>({...zE(e),options:[e,t]}),hH=(e,t)=>({...aS(e),options:[e,t]}),mH=(e,t)=>({...iS(e),options:[e,t]}),yH=(e,t)=>({...VE(e),options:[e,t]}),gH=(e,t)=>({...sS(e),options:[e,t]}),vH=(e,t)=>({...kO(e),options:[e,t]}),bH=(e,t)=>({...fH(e),options:[e,t]});var xH="Arrow",RO=g.forwardRef((e,t)=>{const{children:n,width:r=10,height:o=5,...a}=e;return h.jsx(Oe.svg,{...a,ref:t,width:r,height:o,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:h.jsx("polygon",{points:"0,0 30,0 15,10"})})});RO.displayName=xH;var wH=RO;function _H(e,t=[]){let n=[];function r(a,i){const s=g.createContext(i),c=n.length;n=[...n,i];function l(d){const{scope:f,children:p,...y}=d,m=(f==null?void 0:f[e][c])||s,v=g.useMemo(()=>y,Object.values(y));return h.jsx(m.Provider,{value:v,children:p})}function u(d,f){const p=(f==null?void 0:f[e][c])||s,y=g.useContext(p);if(y)return y;if(i!==void 0)return i;throw new Error(`\`${d}\` must be used within \`${a}\``)}return l.displayName=a+"Provider",[l,u]}const o=()=>{const a=n.map(i=>g.createContext(i));return function(i){const s=(i==null?void 0:i[e])||a;return g.useMemo(()=>({[`__scope${e}`]:{...i,[e]:s}}),[i,s])}};return o.scopeName=e,[r,jH(o,...t)]}function jH(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(o){const a=r.reduce((i,{useScope:s,scopeName:c})=>{const l=s(o)[`__scope${c}`];return{...i,...l}},{});return g.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return n.scopeName=t.scopeName,n}function IO(e){const[t,n]=g.useState(void 0);return xn(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(o=>{if(!Array.isArray(o)||!o.length)return;const a=o[0];let i,s;if("borderBoxSize"in a){const c=a.borderBoxSize,l=Array.isArray(c)?c[0]:c;i=l.inlineSize,s=l.blockSize}else i=e.offsetWidth,s=e.offsetHeight;n({width:i,height:s})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var Hy="Popper",[DO,Yo]=_H(Hy),[EH,LO]=DO(Hy),FO=e=>{const{__scopePopper:t,children:n}=e,[r,o]=g.useState(null);return h.jsx(EH,{scope:t,anchor:r,onAnchorChange:o,children:n})};FO.displayName=Hy;var BO="PopperAnchor",$O=g.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...o}=e,a=LO(BO,n),i=g.useRef(null),s=rt(t,i);return g.useEffect(()=>{a.onAnchorChange((r==null?void 0:r.current)||i.current)}),r?null:h.jsx(Oe.div,{...o,ref:s})});$O.displayName=BO;var Wy="PopperContent",[SH,CH]=DO(Wy),zO=g.forwardRef((e,t)=>{var Z,Y,W,G,te,$;const{__scopePopper:n,side:r="bottom",sideOffset:o=0,align:a="center",alignOffset:i=0,arrowPadding:s=0,avoidCollisions:c=!0,collisionBoundary:l=[],collisionPadding:u=0,sticky:d="partial",hideWhenDetached:f=!1,updatePositionStrategy:p="optimized",onPlaced:y,...m}=e,v=LO(Wy,n),[b,x]=g.useState(null),_=rt(t,se=>x(se)),[w,j]=g.useState(null),E=IO(w),S=(E==null?void 0:E.width)??0,O=(E==null?void 0:E.height)??0,k=r+(a!=="center"?"-"+a:""),N=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},P=Array.isArray(l)?l:[l],R=P.length>0,A={padding:N,boundary:P.filter(NH),altBoundary:R},{refs:C,floatingStyles:M,placement:T,isPositioned:D,middlewareData:I}=dH({strategy:"fixed",placement:k,whileElementsMounted:(...se)=>HE(...se,{animationFrame:p==="always"}),elements:{reference:v.anchor},middleware:[pH({mainAxis:o+O,alignmentAxis:i}),c&&hH({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?mH():void 0,...A}),c&&yH({...A}),gH({...A,apply:({elements:se,rects:le,availableWidth:ve,availableHeight:Te})=>{const{width:qe,height:Ye}=le.reference,ze=se.floating.style;ze.setProperty("--radix-popper-available-width",`${ve}px`),ze.setProperty("--radix-popper-available-height",`${Te}px`),ze.setProperty("--radix-popper-anchor-width",`${qe}px`),ze.setProperty("--radix-popper-anchor-height",`${Ye}px`)}}),w&&bH({element:w,padding:s}),MH({arrowWidth:S,arrowHeight:O}),f&&vH({strategy:"referenceHidden",...A})]}),[L,B]=HO(T),U=Fo(y);xn(()=>{D&&(U==null||U())},[D,U]);const F=(Z=I.arrow)==null?void 0:Z.x,H=(Y=I.arrow)==null?void 0:Y.y,J=((W=I.arrow)==null?void 0:W.centerOffset)!==0,[q,re]=g.useState();return xn(()=>{b&&re(window.getComputedStyle(b).zIndex)},[b]),h.jsx("div",{ref:C.setFloating,"data-radix-popper-content-wrapper":"",style:{...M,transform:D?M.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:q,"--radix-popper-transform-origin":[(G=I.transformOrigin)==null?void 0:G.x,(te=I.transformOrigin)==null?void 0:te.y].join(" "),...(($=I.hide)==null?void 0:$.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:h.jsx(SH,{scope:n,placedSide:L,onArrowChange:j,arrowX:F,arrowY:H,shouldHideArrow:J,children:h.jsx(Oe.div,{"data-side":L,"data-align":B,...m,ref:_,style:{...m.style,animation:D?void 0:"none"}})})})});zO.displayName=Wy;var VO="PopperArrow",OH={top:"bottom",right:"left",bottom:"top",left:"right"},UO=g.forwardRef(function(e,t){const{__scopePopper:n,...r}=e,o=CH(VO,n),a=OH[o.placedSide];return h.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:h.jsx(wH,{...r,ref:t,style:{...r.style,display:"block"}})})});UO.displayName=VO;function NH(e){return e!==null}var MH=e=>({name:"transformOrigin",options:e,fn(t){var m,v,b;const{placement:n,rects:r,middlewareData:o}=t,a=((m=o.arrow)==null?void 0:m.centerOffset)!==0,i=a?0:e.arrowWidth,s=a?0:e.arrowHeight,[c,l]=HO(n),u={start:"0%",center:"50%",end:"100%"}[l],d=(((v=o.arrow)==null?void 0:v.x)??0)+i/2,f=(((b=o.arrow)==null?void 0:b.y)??0)+s/2;let p="",y="";return c==="bottom"?(p=a?u:`${d}px`,y=`${-s}px`):c==="top"?(p=a?u:`${d}px`,y=`${r.floating.height+s}px`):c==="right"?(p=`${-s}px`,y=a?u:`${f}px`):c==="left"&&(p=`${r.floating.width+s}px`,y=a?u:`${f}px`),{data:{x:p,y}}}});function HO(e){const[t,n="center"]=e.split("-");return[t,n]}var Oc=FO,Nc=$O,Sd=zO,Cd=UO,[Od,e1e]=Vn("Tooltip",[Yo]),Nd=Yo(),WO="TooltipProvider",kH=700,qy="tooltip.open",[PH,Yy]=Od(WO),qO=e=>{const{__scopeTooltip:t,delayDuration:n=kH,skipDelayDuration:r=300,disableHoverableContent:o=!1,children:a}=e,[i,s]=g.useState(!0),c=g.useRef(!1),l=g.useRef(0);return g.useEffect(()=>{const u=l.current;return()=>window.clearTimeout(u)},[]),h.jsx(PH,{scope:t,isOpenDelayed:i,delayDuration:n,onOpen:g.useCallback(()=>{window.clearTimeout(l.current),s(!1)},[]),onClose:g.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>s(!0),r)},[r]),isPointerInTransitRef:c,onPointerInTransitChange:g.useCallback(u=>{c.current=u},[]),disableHoverableContent:o,children:a})};qO.displayName=WO;var Md="Tooltip",[AH,Mc]=Od(Md),YO=e=>{const{__scopeTooltip:t,children:n,open:r,defaultOpen:o=!1,onOpenChange:a,disableHoverableContent:i,delayDuration:s}=e,c=Yy(Md,e.__scopeTooltip),l=Nd(t),[u,d]=g.useState(null),f=mt(),p=g.useRef(0),y=i??c.disableHoverableContent,m=s??c.delayDuration,v=g.useRef(!1),[b=!1,x]=en({prop:r,defaultProp:o,onChange:S=>{S?(c.onOpen(),document.dispatchEvent(new CustomEvent(qy))):c.onClose(),a==null||a(S)}}),_=g.useMemo(()=>b?v.current?"delayed-open":"instant-open":"closed",[b]),w=g.useCallback(()=>{window.clearTimeout(p.current),p.current=0,v.current=!1,x(!0)},[x]),j=g.useCallback(()=>{window.clearTimeout(p.current),p.current=0,x(!1)},[x]),E=g.useCallback(()=>{window.clearTimeout(p.current),p.current=window.setTimeout(()=>{v.current=!0,x(!0),p.current=0},m)},[m,x]);return g.useEffect(()=>()=>{p.current&&(window.clearTimeout(p.current),p.current=0)},[]),h.jsx(Oc,{...l,children:h.jsx(AH,{scope:t,contentId:f,open:b,stateAttribute:_,trigger:u,onTriggerChange:d,onTriggerEnter:g.useCallback(()=>{c.isOpenDelayed?E():w()},[c.isOpenDelayed,E,w]),onTriggerLeave:g.useCallback(()=>{y?j():(window.clearTimeout(p.current),p.current=0)},[j,y]),onOpen:w,onClose:j,disableHoverableContent:y,children:n})})};YO.displayName=Md;var Ky="TooltipTrigger",KO=g.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,o=Mc(Ky,n),a=Yy(Ky,n),i=Nd(n),s=g.useRef(null),c=rt(t,s,o.onTriggerChange),l=g.useRef(!1),u=g.useRef(!1),d=g.useCallback(()=>l.current=!1,[]);return g.useEffect(()=>()=>document.removeEventListener("pointerup",d),[d]),h.jsx(Nc,{asChild:!0,...i,children:h.jsx(Oe.button,{"aria-describedby":o.open?o.contentId:void 0,"data-state":o.stateAttribute,...r,ref:c,onPointerMove:he(e.onPointerMove,f=>{f.pointerType!=="touch"&&!u.current&&!a.isPointerInTransitRef.current&&(o.onTriggerEnter(),u.current=!0)}),onPointerLeave:he(e.onPointerLeave,()=>{o.onTriggerLeave(),u.current=!1}),onPointerDown:he(e.onPointerDown,()=>{l.current=!0,document.addEventListener("pointerup",d,{once:!0})}),onFocus:he(e.onFocus,()=>{l.current||o.onOpen()}),onBlur:he(e.onBlur,o.onClose),onClick:he(e.onClick,o.onClose)})})});KO.displayName=Ky;var Xy="TooltipPortal",[TH,RH]=Od(Xy,{forceMount:void 0}),XO=e=>{const{__scopeTooltip:t,forceMount:n,children:r,container:o}=e,a=Mc(Xy,t);return h.jsx(TH,{scope:t,forceMount:n,children:h.jsx(Nn,{present:n||a.open,children:h.jsx(Ru,{asChild:!0,container:o,children:r})})})};XO.displayName=Xy;var Ni="TooltipContent",QO=g.forwardRef((e,t)=>{const n=RH(Ni,e.__scopeTooltip),{forceMount:r=n.forceMount,side:o="top",...a}=e,i=Mc(Ni,e.__scopeTooltip);return h.jsx(Nn,{present:r||i.open,children:i.disableHoverableContent?h.jsx(JO,{side:o,...a,ref:t}):h.jsx(IH,{side:o,...a,ref:t})})}),IH=g.forwardRef((e,t)=>{const n=Mc(Ni,e.__scopeTooltip),r=Yy(Ni,e.__scopeTooltip),o=g.useRef(null),a=rt(t,o),[i,s]=g.useState(null),{trigger:c,onClose:l}=n,u=o.current,{onPointerInTransitChange:d}=r,f=g.useCallback(()=>{s(null),d(!1)},[d]),p=g.useCallback((y,m)=>{const v=y.currentTarget,b={x:y.clientX,y:y.clientY},x=BH(b,v.getBoundingClientRect()),_=$H(b,x),w=zH(m.getBoundingClientRect()),j=UH([..._,...w]);s(j),d(!0)},[d]);return g.useEffect(()=>()=>f(),[f]),g.useEffect(()=>{if(c&&u){const y=v=>p(v,u),m=v=>p(v,c);return c.addEventListener("pointerleave",y),u.addEventListener("pointerleave",m),()=>{c.removeEventListener("pointerleave",y),u.removeEventListener("pointerleave",m)}}},[c,u,p,f]),g.useEffect(()=>{if(i){const y=m=>{const v=m.target,b={x:m.clientX,y:m.clientY},x=(c==null?void 0:c.contains(v))||(u==null?void 0:u.contains(v)),_=!VH(b,i);x?f():_&&(f(),l())};return document.addEventListener("pointermove",y),()=>document.removeEventListener("pointermove",y)}},[c,u,i,l,f]),h.jsx(JO,{...e,ref:a})}),[DH,LH]=Od(Md,{isInside:!1}),JO=g.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":o,onEscapeKeyDown:a,onPointerDownOutside:i,...s}=e,c=Mc(Ni,n),l=Nd(n),{onClose:u}=c;return g.useEffect(()=>(document.addEventListener(qy,u),()=>document.removeEventListener(qy,u)),[u]),g.useEffect(()=>{if(c.trigger){const d=f=>{var p;(p=f.target)!=null&&p.contains(c.trigger)&&u()};return window.addEventListener("scroll",d,{capture:!0}),()=>window.removeEventListener("scroll",d,{capture:!0})}},[c.trigger,u]),h.jsx(Tu,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:i,onFocusOutside:d=>d.preventDefault(),onDismiss:u,children:h.jsxs(Sd,{"data-state":c.stateAttribute,...l,...s,ref:t,style:{...s.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[h.jsx(F9,{children:r}),h.jsx(DH,{scope:n,isInside:!0,children:h.jsx(wwe,{id:c.contentId,role:"tooltip",children:o||r})})]})})});QO.displayName=Ni;var GO="TooltipArrow",FH=g.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,o=Nd(n);return LH(GO,n).isInside?null:h.jsx(Cd,{...o,...r,ref:t})});FH.displayName=GO;function BH(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),o=Math.abs(t.right-e.x),a=Math.abs(t.left-e.x);switch(Math.min(n,r,o,a)){case a:return"left";case o:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function $H(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function zH(e){const{top:t,right:n,bottom:r,left:o}=e;return[{x:o,y:t},{x:n,y:t},{x:n,y:r},{x:o,y:r}]}function VH(e,t){const{x:n,y:r}=e;let o=!1;for(let a=0,i=t.length-1;a<t.length;i=a++){const s=t[a].x,c=t[a].y,l=t[i].x,u=t[i].y;c>r!=u>r&&n<(l-s)*(r-c)/(u-c)+s&&(o=!o)}return o}function UH(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),HH(t)}function HH(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const o=e[r];for(;t.length>=2;){const a=t[t.length-1],i=t[t.length-2];if((a.x-i.x)*(o.y-i.y)>=(a.y-i.y)*(o.x-i.x))t.pop();else break}t.push(o)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const o=e[r];for(;n.length>=2;){const a=n[n.length-1],i=n[n.length-2];if((a.x-i.x)*(o.y-i.y)>=(a.y-i.y)*(o.x-i.x))n.pop();else break}n.push(o)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}qE=qO,JE=YO,GE=KO,J9=XO,wm=QO;const kd=qE,Mi=JE,ki=GE,Sa=g.forwardRef(({className:e,sideOffset:t=4,...n},r)=>h.jsx(wm,{ref:r,sideOffset:t,className:K("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n}));Sa.displayName=wm.displayName;const WH="sidebar:state",qH=60*60*24*7,YH="16rem",KH="18rem",XH="3rem",QH="b",ZO=g.createContext(null);function kc(){const e=g.useContext(ZO);if(!e)throw new Error("useSidebar must be used within a SidebarProvider.");return e}const Qy=g.forwardRef(({defaultOpen:e=!0,open:t,onOpenChange:n,className:r,style:o,children:a,...i},s)=>{const c=SV(),[l,u]=g.useState(!1),[d,f]=g.useState(e),p=t??d,y=g.useCallback(x=>{const _=typeof x=="function"?x(p):x;n?n(_):f(_),document.cookie=`${WH}=${_}; path=/; max-age=${qH}`},[n,p]),m=g.useCallback(()=>c?u(x=>!x):y(x=>!x),[c,y,u]);g.useEffect(()=>{const x=_=>{_.key===QH&&(_.metaKey||_.ctrlKey)&&(_.preventDefault(),m())};return window.addEventListener("keydown",x),()=>window.removeEventListener("keydown",x)},[m]);const v=p?"expanded":"collapsed",b=g.useMemo(()=>({state:v,open:p,setOpen:y,isMobile:c,openMobile:l,setOpenMobile:u,toggleSidebar:m}),[v,p,y,c,l,u,m]);return h.jsx(ZO.Provider,{value:b,children:h.jsx(kd,{delayDuration:0,children:h.jsx("div",{style:{"--sidebar-width":YH,"--sidebar-width-icon":XH,...o},className:K("group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar",r),ref:s,...i,children:a})})})});Qy.displayName="SidebarProvider";const Jy=g.forwardRef(({side:e="left",variant:t="sidebar",collapsible:n="offcanvas",className:r,children:o,...a},i)=>{const{isMobile:s,state:c,openMobile:l,setOpenMobile:u}=kc();return n==="none"?h.jsx("div",{className:K("flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground",r),ref:i,...a,children:o}):s?h.jsx(CU,{open:l,onOpenChange:u,...a,children:h.jsx(hO,{"data-sidebar":"sidebar","data-mobile":"true",className:"w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden",style:{"--sidebar-width":KH},side:e,children:h.jsx("div",{className:"flex h-full w-full flex-col",children:o})})}):h.jsxs("div",{ref:i,className:"group peer hidden md:block text-sidebar-foreground","data-state":c,"data-collapsible":c==="collapsed"?n:"","data-variant":t,"data-side":e,children:[h.jsx("div",{className:K("duration-200 relative h-svh w-[--sidebar-width] bg-transparent transition-[width] ease-linear","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180",t==="floating"||t==="inset"?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon]")}),h.jsx("div",{className:K("duration-200 fixed inset-y-0 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] ease-linear md:flex",e==="left"?"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]":"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]",t==="floating"||t==="inset"?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l",r),...a,children:h.jsx("div",{"data-sidebar":"sidebar",className:"flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow",children:o})})]})});Jy.displayName="Sidebar";const eN=g.forwardRef(({className:e,onClick:t,...n},r)=>{const{toggleSidebar:o}=kc();return h.jsx(dt,{ref:r,"data-sidebar":"trigger",variant:"ghost",size:"icon",className:K("h-7 w-7",e),onClick:a=>{t==null||t(a),o()},...n,children:h.jsx(ue,{size:32,name:"panel-left"})})});eN.displayName="SidebarTrigger";const tN=g.forwardRef(({className:e,...t},n)=>{const{toggleSidebar:r}=kc();return h.jsx("button",{ref:n,"data-sidebar":"rail","aria-label":"Toggle Sidebar",tabIndex:-1,onClick:r,title:"Toggle Sidebar",className:K("absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] hover:after:bg-sidebar-border group-data-[side=left]:-right-4 group-data-[side=right]:left-0 sm:flex","[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize","[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize","group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar","[[data-side=left][data-collapsible=offcanvas]_&]:-right-2","[[data-side=right][data-collapsible=offcanvas]_&]:-left-2",e),...t})});tN.displayName="SidebarRail";const Gy=g.forwardRef(({className:e,...t},n)=>h.jsx("main",{ref:n,className:K("relative flex min-h-svh flex-1 flex-col bg-background","peer-data-[variant=inset]:min-h-[calc(100svh-theme(spacing.4))] md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow",e),...t}));Gy.displayName="SidebarInset";const JH=g.forwardRef(({className:e,...t},n)=>h.jsx(dn,{ref:n,"data-sidebar":"input",className:K("h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring",e),...t}));JH.displayName="SidebarInput";const GH=g.forwardRef(({className:e,...t},n)=>h.jsx("div",{ref:n,"data-sidebar":"header",className:K("flex flex-col gap-2 p-2",e),...t}));GH.displayName="SidebarHeader";const nN=g.forwardRef(({className:e,...t},n)=>h.jsx("div",{ref:n,"data-sidebar":"footer",className:K("flex flex-col gap-2 p-2",e),...t}));nN.displayName="SidebarFooter";const ZH=g.forwardRef(({className:e,...t},n)=>h.jsx(wc,{ref:n,"data-sidebar":"separator",className:K("mx-2 w-auto bg-sidebar-border",e),...t}));ZH.displayName="SidebarSeparator";const Zy=g.forwardRef(({className:e,...t},n)=>h.jsx("div",{ref:n,"data-sidebar":"content",className:K("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",e),...t}));Zy.displayName="SidebarContent";const Pc=g.forwardRef(({className:e,...t},n)=>h.jsx("div",{ref:n,"data-sidebar":"group",className:K("relative flex w-full min-w-0 flex-col p-2",e),...t}));Pc.displayName="SidebarGroup";const Ac=g.forwardRef(({className:e,asChild:t=!1,...n},r)=>{const o=t?Yr:"div";return h.jsx(o,{ref:r,"data-sidebar":"group-label",className:K("duration-200 flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opa] ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",e),...n})});Ac.displayName="SidebarGroupLabel";const eW=g.forwardRef(({className:e,asChild:t=!1,...n},r)=>{const o=t?Yr:"button";return h.jsx(o,{ref:r,"data-sidebar":"group-action",className:K("absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","group-data-[collapsible=icon]:hidden",e),...n})});eW.displayName="SidebarGroupAction";const tW=g.forwardRef(({className:e,...t},n)=>h.jsx("div",{ref:n,"data-sidebar":"group-content",className:K("w-full text-sm",e),...t}));tW.displayName="SidebarGroupContent";const Pi=g.forwardRef(({className:e,...t},n)=>h.jsx("ul",{ref:n,"data-sidebar":"menu",className:K("flex w-full min-w-0 flex-col gap-1",e),...t}));Pi.displayName="SidebarMenu";const no=g.forwardRef(({className:e,...t},n)=>h.jsx("li",{ref:n,"data-sidebar":"menu-item",className:K("group/menu-item relative",e),...t}));no.displayName="SidebarMenuItem";const nW=qr("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:!p-0"}},defaultVariants:{variant:"default",size:"default"}}),ro=g.forwardRef(({asChild:e=!1,isActive:t=!1,variant:n="default",size:r="default",tooltip:o,className:a,...i},s)=>{const c=e?Yr:"button",{isMobile:l,state:u}=kc(),d=h.jsx(c,{ref:s,"data-sidebar":"menu-button","data-size":r,"data-active":t,className:K(nW({variant:n,size:r}),a),...i});return o?(typeof o=="string"&&(o={children:o}),h.jsxs(Mi,{children:[h.jsx(ki,{asChild:!0,children:d}),h.jsx(Sa,{side:"right",align:"center",hidden:u!=="collapsed"||l,...o})]})):d});ro.displayName="SidebarMenuButton";const rW=g.forwardRef(({className:e,asChild:t=!1,showOnHover:n=!1,...r},o)=>{const a=t?Yr:"button";return h.jsx(a,{ref:o,"data-sidebar":"menu-action",className:K("absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 peer-hover/menu-button:text-sidebar-accent-foreground [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",n&&"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0",e),...r})});rW.displayName="SidebarMenuAction";const oW=g.forwardRef(({className:e,...t},n)=>h.jsx("div",{ref:n,"data-sidebar":"menu-badge",className:K("absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground select-none pointer-events-none","peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",e),...t}));oW.displayName="SidebarMenuBadge";const aW=g.forwardRef(({className:e,showIcon:t=!1,...n},r)=>{const o=g.useMemo(()=>`${Math.floor(Math.random()*40)+50}%`,[]);return h.jsxs("div",{ref:r,"data-sidebar":"menu-skeleton",className:K("rounded-md h-8 flex gap-2 px-2 items-center",e),...n,children:[t&&h.jsx(mO,{className:"size-4 rounded-md","data-sidebar":"menu-skeleton-icon"}),h.jsx(mO,{className:"h-4 flex-1 max-w-[--skeleton-width]","data-sidebar":"menu-skeleton-text",style:{"--skeleton-width":o}})]})});aW.displayName="SidebarMenuSkeleton";const rN=g.forwardRef(({className:e,...t},n)=>h.jsx("ul",{ref:n,"data-sidebar":"menu-sub",className:K("mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5","group-data-[collapsible=icon]:hidden",e),...t}));rN.displayName="SidebarMenuSub";const oN=g.forwardRef(({...e},t)=>h.jsx("li",{ref:t,...e}));oN.displayName="SidebarMenuSubItem";const aN=g.forwardRef(({asChild:e=!1,size:t="md",isActive:n,className:r,...o},a)=>{const i=e?Yr:"a";return h.jsx(i,{ref:a,"data-sidebar":"menu-sub-button","data-size":t,"data-active":n,className:K("flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground","data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground",t==="sm"&&"text-xs",t==="md"&&"text-sm","group-data-[collapsible=icon]:hidden",r),...o})});aN.displayName="SidebarMenuSubButton";function iW({items:e}){const{t}=Me("documents");return h.jsxs(Pc,{children:[h.jsx(Ac,{children:h.jsx("div",{className:"text-sm",children:t("title")})}),h.jsx(Pi,{children:e.map(n=>{var r;return h.jsx(_V,{asChild:!0,defaultOpen:n.isActive,className:"group/collapsible",children:h.jsxs(no,{children:[h.jsx(jV,{asChild:!0,children:h.jsxs(ro,{className:"cursor-pointer",tooltip:t(n.title),children:[n.icon,h.jsx("span",{children:t(n.title)}),h.jsx(ue,{name:"chevron-right",className:"ml-auto transition-transform duration-200 group-data-[state=open]/collapsible:rotate-90"})]})}),h.jsx(EV,{children:h.jsx(rN,{children:(r=n.items)==null?void 0:r.map(o=>h.jsx(oN,{className:"cursor-pointer",children:h.jsx(aN,{asChild:!0,children:h.jsx("span",{children:t(o.title)})})},t(o.title)))})})]})},n.title)})})]})}const sW="hash",eg={application:"/application/:applicationId?",whiteboard:"/whiteboard/:sessionId?"},In=(e,t)=>{const n=eg[e];return t?Object.keys(t||{}).reduce((r,o)=>r.replace(`:${o}`,(t==null?void 0:t[o])||""),n):n.replace(/\/:[^/]+/g,"")},cW=()=>{{const[,e]=window.location.hash.split("?");return new URLSearchParams(`?${e}`)}},lW=g.memo(({text:e,colors:t={first:"#9E7AFF",second:"#FE8BBB"},className:n,sparklesCount:r=10,...o})=>{const[a,i]=g.useState([]);return g.useEffect(()=>{const s=()=>{const d=`${Math.random()*100}%`,f=`${Math.random()*100}%`,p=Math.random()>.5?t.first:t.second,y=Math.random()*2,m=Math.random()*1+.3,v=Math.random()*10+5;return{id:`${d}-${f}-${Date.now()}`,x:d,y:f,color:p,delay:y,scale:m,lifespan:v}},c=()=>{const d=Array.from({length:r},s);i(d)},l=()=>{i(d=>d.map(f=>f.lifespan<=0?s():{...f,lifespan:f.lifespan-.1}))};c();const u=setInterval(l,100);return()=>clearInterval(u)},[t.first,t.second]),h.jsx("div",{className:K("text-6xl font-bold",n),...o,style:{"--sparkles-first-color":`${t.first}`,"--sparkles-second-color":`${t.second}`},children:h.jsxs("span",{className:"relative inline-block",children:[a.map(s=>h.jsx(uW,{...s},s.id)),h.jsx("strong",{children:e})]})})},(e,t)=>e.text===t.text),uW=({id:e,x:t,y:n,color:r,delay:o,scale:a})=>h.jsx(Iu.svg,{className:"pointer-events-none absolute z-20",initial:{opacity:0,left:t,top:n},animate:{opacity:[0,1,0],scale:[0,a,0],rotate:[75,120,150]},transition:{duration:.8,repeat:1/0,delay:o},width:"21",height:"21",viewBox:"0 0 21 21",children:h.jsx("path",{d:"M9.82531 0.843845C10.0553 0.215178 10.9446 0.215178 11.1746 0.843845L11.8618 2.72026C12.4006 4.19229 12.3916 6.39157 13.5 7.5C14.6084 8.60843 16.8077 8.59935 18.2797 9.13822L20.1561 9.82534C20.7858 10.0553 20.7858 10.9447 20.1561 11.1747L18.2797 11.8618C16.8077 12.4007 14.6084 12.3916 13.5 13.5C12.3916 14.6084 12.4006 16.8077 11.8618 18.2798L11.1746 20.1562C10.9446 20.7858 10.0553 20.7858 9.82531 20.1562L9.13819 18.2798C8.59932 16.8077 8.60843 14.6084 7.5 13.5C6.39157 12.3916 4.19225 12.4007 2.72023 11.8618L0.843814 11.1747C0.215148 10.9447 0.215148 10.0553 0.843814 9.82534L2.72023 9.13822C4.19225 8.59935 6.39157 8.60843 7.5 7.5C8.60843 6.39157 8.59932 4.19229 9.13819 2.72026L9.82531 0.843845Z",fill:r})},e);function dW({className:e,onClick:t}){const{t:n}=Me("sidebar");return h.jsxs(ro,{className:K(e,"tw-w-full"),onClick:t,children:[h.jsx(ue,{name:"frame"}),h.jsx(lW,{text:n("new_session"),className:"text-sm",sparklesCount:3})]})}const fW=()=>{const[e,t]=g.useState(!1),n=Ze(i=>i.setCurrentSession),r=Ze(i=>i.createSession),o=Du(i=>i.setSelectedSessionId),a=g.useCallback(async i=>{try{t(!0);const s=await r(i);n(s),o(s.id)}finally{t(!1)}},[r,n,o]);return{loading:e,createSession:a}},Ai=tc,pW=ic,iN=g.forwardRef(({className:e,...t},n)=>h.jsx(va,{ref:n,className:K("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));iN.displayName=va.displayName;const Ca=g.forwardRef(({className:e,children:t,...n},r)=>h.jsxs(pW,{children:[h.jsx(iN,{}),h.jsxs(ba,{ref:r,className:K("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...n,children:[t,h.jsxs(sc,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[h.jsx(ue,{name:"x",className:"h-4 w-4"}),h.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Ca.displayName=ba.displayName;const Oa=({className:e,...t})=>h.jsx("div",{className:K("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});Oa.displayName="DialogHeader";const tg=({className:e,...t})=>h.jsx("div",{className:K("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});tg.displayName="DialogFooter";const Na=g.forwardRef(({className:e,...t},n)=>h.jsx(di,{ref:n,className:K("text-lg font-semibold leading-none tracking-tight",e),...t}));Na.displayName=di.displayName;const ng=g.forwardRef(({className:e,...t},n)=>h.jsx(fi,{ref:n,className:K("text-sm text-muted-foreground",e),...t}));ng.displayName=fi.displayName;var hW="Label",sN=g.forwardRef((e,t)=>h.jsx(Oe.label,{...e,ref:t,onMouseDown:n=>{var r;n.target.closest("button, input, select, textarea")||((r=e.onMouseDown)==null||r.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));sN.displayName=hW;var cN=sN;let lN;lN=qr("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Qe=g.forwardRef(({className:e,...t},n)=>h.jsx(cN,{ref:n,className:K(lN(),e),...t})),Qe.displayName=cN.displayName;const mW=ma(()=>{const e=Kt(),{t}=Me("dialogs"),[n,r]=g.useState(""),{toast:o}=Bt(),{loading:a,createSession:i}=fW(),s=l=>{r(l.target.value)},c=async()=>{try{await i({name:n}),r(""),e.hide()}catch{o({variant:"destructive",description:t("create_session.errors.create_failed")})}};return h.jsx(Ai,{open:e.visible,onOpenChange:e.hide,children:h.jsxs(Ca,{className:"sm:max-w-[425px]",children:[h.jsxs(Oa,{children:[h.jsx(Na,{children:t("create_session.title")}),h.jsx(ng,{children:t("create_session.description")})]}),h.jsx("div",{className:"grid gap-4 py-4",children:h.jsxs("div",{className:"flex flex-col space-y-1.5",children:[h.jsx(Qe,{className:"mb-2",htmlFor:"name",children:t("create_session.name")}),h.jsx(dn,{onChange:s,id:"name",value:n,placeholder:t("create_session.name_placeholder")})]})}),h.jsx(tg,{children:h.jsx(dt,{onClick:c,disabled:a||!n,type:"submit",children:t("create_session.create")})})]})})}),yW=()=>{const[e,t]=g.useState(!1),n=Ze(o=>o.deleteSession),r=g.useCallback(async o=>{try{t(!0),await n(o),await Promise.all([ce("FlowEdge").find({select:["id"],where:{session_id:o}}).then(a=>Promise.all(a.map(i=>ce("FlowEdge").delete(i.id)))),ce("FlowNode").find({select:["id"],where:{session_id:o}}).then(a=>Promise.all(a.map(i=>ce("FlowNode").delete(i.id))))])}finally{t(!1)}},[n]);return{loading:e,deleteSession:r}};var uN="AlertDialog",[gW,t1e]=Vn(uN,[KC]),oo=KC(),dN=e=>{const{__scopeAlertDialog:t,...n}=e,r=oo(t);return h.jsx(tc,{...r,...n,modal:!0})};dN.displayName=uN;var vW="AlertDialogTrigger",bW=g.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,o=oo(n);return h.jsx(fO,{...o,...r,ref:t})});bW.displayName=vW;var xW="AlertDialogPortal",fN=e=>{const{__scopeAlertDialog:t,...n}=e,r=oo(t);return h.jsx(ic,{...r,...n})};fN.displayName=xW;var wW="AlertDialogOverlay",pN=g.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,o=oo(n);return h.jsx(va,{...o,...r,ref:t})});pN.displayName=wW;var Ti="AlertDialogContent",[_W,jW]=gW(Ti),hN=g.forwardRef((e,t)=>{const{__scopeAlertDialog:n,children:r,...o}=e,a=oo(n),i=g.useRef(null),s=rt(t,i),c=g.useRef(null);return h.jsx(cO,{contentName:Ti,titleName:mN,docsSlug:"alert-dialog",children:h.jsx(_W,{scope:n,cancelRef:c,children:h.jsxs(ba,{role:"alertdialog",...a,...o,ref:s,onOpenAutoFocus:he(o.onOpenAutoFocus,l=>{var u;l.preventDefault(),(u=c.current)==null||u.focus({preventScroll:!0})}),onPointerDownOutside:l=>l.preventDefault(),onInteractOutside:l=>l.preventDefault(),children:[h.jsx(F9,{children:r}),h.jsx(_N,{contentRef:i})]})})})});hN.displayName=Ti;var mN="AlertDialogTitle",yN=g.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,o=oo(n);return h.jsx(di,{...o,...r,ref:t})});yN.displayName=mN;var gN="AlertDialogDescription",vN=g.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,o=oo(n);return h.jsx(fi,{...o,...r,ref:t})});vN.displayName=gN;var EW="AlertDialogAction",bN=g.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,o=oo(n);return h.jsx(sc,{...o,...r,ref:t})});bN.displayName=EW;var xN="AlertDialogCancel",wN=g.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,{cancelRef:o}=jW(xN,n),a=oo(n),i=rt(t,o);return h.jsx(sc,{...a,...r,ref:i})});wN.displayName=xN;let _N;_N=({contentRef:e})=>{const t=`\`${Ti}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Ti}\` by passing a \`${gN}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Ti}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return g.useEffect(()=>{var n;document.getElementById((n=e.current)==null?void 0:n.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},KE=dN,YE=fN,Am=pN,Tm=hN,rm=bN,om=wN,tm=yN,nm=vN;const jN=KE,SW=YE,EN=g.forwardRef(({className:e,...t},n)=>h.jsx(Am,{className:K("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));EN.displayName=Am.displayName;const rg=g.forwardRef(({className:e,...t},n)=>h.jsxs(SW,{children:[h.jsx(EN,{}),h.jsx(Tm,{ref:n,className:K("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));rg.displayName=Tm.displayName;const og=({className:e,...t})=>h.jsx("div",{className:K("flex flex-col space-y-2 text-center sm:text-left",e),...t});og.displayName="AlertDialogHeader";const ag=({className:e,...t})=>h.jsx("div",{className:K("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});ag.displayName="AlertDialogFooter";const ig=g.forwardRef(({className:e,...t},n)=>h.jsx(tm,{ref:n,className:K("text-lg font-semibold",e),...t}));ig.displayName=tm.displayName;const sg=g.forwardRef(({className:e,...t},n)=>h.jsx(nm,{ref:n,className:K("text-sm text-muted-foreground",e),...t}));sg.displayName=nm.displayName;const cg=g.forwardRef(({className:e,...t},n)=>h.jsx(rm,{ref:n,className:K(xc(),e),...t}));cg.displayName=rm.displayName;const lg=g.forwardRef(({className:e,...t},n)=>h.jsx(om,{ref:n,className:K(xc({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));lg.displayName=om.displayName;const SN=ma(({id:e})=>{const{t}=Me("dialogs"),n=Kt(),{toast:r}=Bt(),{deleteSession:o,loading:a}=yW(),i=async()=>{try{await o(e),n.hide()}catch{r({variant:"destructive",description:t("delete_session.errors.delete_failed")})}};return h.jsx(jN,{open:n.visible,onOpenChange:n.hide,children:h.jsxs(rg,{children:[h.jsxs(og,{children:[h.jsx(ig,{children:t("delete_session.title")}),h.jsx(sg,{children:t("delete_session.description")})]}),h.jsxs(ag,{children:[h.jsx(lg,{onClick:n.hide,children:t("delete_session.cancel")}),h.jsx(cg,{disabled:a,onClick:i,children:t("delete_session.delete")})]})]})})});function CW({sessions:e,currentSession:t,setCurrentSession:n}){const{t:r}=Me("sidebar"),o=yc(),a=Kt(mW),i=Kt(SN),s=g.useCallback(()=>{a.show({})},[a]),c=g.useCallback((u,d)=>{u.preventDefault(),u.stopPropagation(),i.show({id:d})},[i]),l=u=>{n(u),o(In("whiteboard",{sessionId:u.id}))};return h.jsxs(Pc,{className:"group-data-[collapsible=icon]:hidden",children:[h.jsx(Ac,{children:h.jsx("div",{className:"text-sm",children:r("sessions")})}),h.jsxs(Pi,{children:[h.jsx(no,{children:h.jsx(dW,{onClick:s,className:"w-full"})}),e.map(u=>h.jsx(no,{className:"cursor-pointer",children:h.jsx(ro,{asChild:!0,onClick:()=>l(u),children:h.jsxs("div",{className:"flex flex-row justify-between items-center",children:[h.jsxs("div",{className:"flex gap-2",children:[(t==null?void 0:t.id)===u.id?h.jsx(ue,{size:16,color:"green",name:"check"}):h.jsx(ue,{size:16,name:"chevron-right"}),h.jsx("span",{children:u.name})]}),h.jsx(ue,{onClick:d=>c(d,u.id),size:16,name:"trash-2",className:"!z-50"})]})})},u.id)),e!=null&&e.length?h.jsx(no,{children:h.jsxs(ro,{className:"text-sidebar-foreground/70",children:[h.jsx(ue,{name:"ellipsis",className:"text-sidebar-foreground/70"}),h.jsx("span",{children:r("more_session")})]})}):null]})]})}var OW=g.createContext(void 0);Bo=function(e){const t=g.useContext(OW);return e||t||"ltr"};function NW(e,t=[]){let n=[];function r(a,i){const s=g.createContext(i),c=n.length;n=[...n,i];function l(d){const{scope:f,children:p,...y}=d,m=(f==null?void 0:f[e][c])||s,v=g.useMemo(()=>y,Object.values(y));return h.jsx(m.Provider,{value:v,children:p})}function u(d,f){const p=(f==null?void 0:f[e][c])||s,y=g.useContext(p);if(y)return y;if(i!==void 0)return i;throw new Error(`\`${d}\` must be used within \`${a}\``)}return l.displayName=a+"Provider",[l,u]}const o=()=>{const a=n.map(i=>g.createContext(i));return function(i){const s=(i==null?void 0:i[e])||a;return g.useMemo(()=>({[`__scope${e}`]:{...i,[e]:s}}),[i,s])}};return o.scopeName=e,[r,MW(o,...t)]}function MW(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(o){const a=r.reduce((i,{useScope:s,scopeName:c})=>{const l=s(o)[`__scope${c}`];return{...i,...l}},{});return g.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return n.scopeName=t.scopeName,n}let Pd,CN,Tc,Ad,ug,ON,NN,MN,kN,dg;Pd="rovingFocusGroup.onEntryFocus",CN={bubbles:!1,cancelable:!0},Tc="RovingFocusGroup",[Ad,ug,ON]=Lu(Tc),[NN,Kr]=NW(Tc,[ON]),[MN,kN]=NN(Tc),dg=g.forwardRef((e,t)=>h.jsx(Ad.Provider,{scope:e.__scopeRovingFocusGroup,children:h.jsx(Ad.Slot,{scope:e.__scopeRovingFocusGroup,children:h.jsx(kW,{...e,ref:t})})})),dg.displayName=Tc;var kW=g.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:o=!1,dir:a,currentTabStopId:i,defaultCurrentTabStopId:s,onCurrentTabStopIdChange:c,onEntryFocus:l,preventScrollOnEntryFocus:u=!1,...d}=e,f=g.useRef(null),p=rt(t,f),y=Bo(a),[m=null,v]=en({prop:i,defaultProp:s,onChange:c}),[b,x]=g.useState(!1),_=Fo(l),w=ug(n),j=g.useRef(!1),[E,S]=g.useState(0);return g.useEffect(()=>{const O=f.current;if(O)return O.addEventListener(Pd,_),()=>O.removeEventListener(Pd,_)},[_]),h.jsx(MN,{scope:n,orientation:r,dir:y,loop:o,currentTabStopId:m,onItemFocus:g.useCallback(O=>v(O),[v]),onItemShiftTab:g.useCallback(()=>x(!0),[]),onFocusableItemAdd:g.useCallback(()=>S(O=>O+1),[]),onFocusableItemRemove:g.useCallback(()=>S(O=>O-1),[]),children:h.jsx(Oe.div,{tabIndex:b||E===0?-1:0,"data-orientation":r,...d,ref:p,style:{outline:"none",...e.style},onMouseDown:he(e.onMouseDown,()=>{j.current=!0}),onFocus:he(e.onFocus,O=>{const k=!j.current;if(O.target===O.currentTarget&&k&&!b){const N=new CustomEvent(Pd,CN);if(O.currentTarget.dispatchEvent(N),!N.defaultPrevented){const P=w().filter(M=>M.focusable),R=P.find(M=>M.active),A=P.find(M=>M.id===m),C=[R,A,...P].filter(Boolean).map(M=>M.ref.current);TN(C,u)}}j.current=!1}),onBlur:he(e.onBlur,()=>x(!1))})})}),PN="RovingFocusGroupItem",AN=g.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:o=!1,tabStopId:a,...i}=e,s=mt(),c=a||s,l=kN(PN,n),u=l.currentTabStopId===c,d=ug(n),{onFocusableItemAdd:f,onFocusableItemRemove:p}=l;return g.useEffect(()=>{if(r)return f(),()=>p()},[r,f,p]),h.jsx(Ad.ItemSlot,{scope:n,id:c,focusable:r,active:o,children:h.jsx(Oe.span,{tabIndex:u?0:-1,"data-orientation":l.orientation,...i,ref:t,onMouseDown:he(e.onMouseDown,y=>{r?l.onItemFocus(c):y.preventDefault()}),onFocus:he(e.onFocus,()=>l.onItemFocus(c)),onKeyDown:he(e.onKeyDown,y=>{if(y.key==="Tab"&&y.shiftKey){l.onItemShiftTab();return}if(y.target!==y.currentTarget)return;const m=TW(y,l.orientation,l.dir);if(m!==void 0){if(y.metaKey||y.ctrlKey||y.altKey||y.shiftKey)return;y.preventDefault();let v=d().filter(b=>b.focusable).map(b=>b.ref.current);if(m==="last")v.reverse();else if(m==="prev"||m==="next"){m==="prev"&&v.reverse();const b=v.indexOf(y.currentTarget);v=l.loop?RW(v,b+1):v.slice(b+1)}setTimeout(()=>TN(v))}})})})});AN.displayName=PN;var PW={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function AW(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function TW(e,t,n){const r=AW(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return PW[r]}function TN(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function RW(e,t){return e.map((n,r)=>e[(t+r)%e.length])}let Td,RN,fg,IN,DN,LN,Ri,Ii,FN,BN,Ko,Di,pg,hg,ao,$N,Li,mg;nc=dg,rc=AN,Td=["Enter"," "],RN=["ArrowDown","PageUp","Home"],fg=["ArrowUp","PageDown","End"],IN=[...RN,...fg],DN={ltr:[...Td,"ArrowRight"],rtl:[...Td,"ArrowLeft"]},LN={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Ri="Menu",[Ii,FN,BN]=Lu(Ri),[Ko,Uu]=Vn(Ri,[BN,Yo,Kr]),Di=Yo(),pg=Kr(),[hg,ao]=Ko(Ri),[$N,Li]=Ko(Ri),mg=e=>{const{__scopeMenu:t,open:n=!1,children:r,dir:o,onOpenChange:a,modal:i=!0}=e,s=Di(t),[c,l]=g.useState(null),u=g.useRef(!1),d=Fo(a),f=Bo(o);return g.useEffect(()=>{const p=()=>{u.current=!0,document.addEventListener("pointerdown",y,{capture:!0,once:!0}),document.addEventListener("pointermove",y,{capture:!0,once:!0})},y=()=>u.current=!1;return document.addEventListener("keydown",p,{capture:!0}),()=>{document.removeEventListener("keydown",p,{capture:!0}),document.removeEventListener("pointerdown",y,{capture:!0}),document.removeEventListener("pointermove",y,{capture:!0})}},[]),h.jsx(Oc,{...s,children:h.jsx(hg,{scope:t,open:n,onOpenChange:d,content:c,onContentChange:l,children:h.jsx($N,{scope:t,onClose:g.useCallback(()=>d(!1),[d]),isUsingKeyboardRef:u,dir:f,modal:i,children:r})})})},mg.displayName=Ri;var IW="MenuAnchor",yg=g.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,o=Di(n);return h.jsx(Nc,{...o,...r,ref:t})});yg.displayName=IW;var gg="MenuPortal",[DW,zN]=Ko(gg,{forceMount:void 0}),VN=e=>{const{__scopeMenu:t,forceMount:n,children:r,container:o}=e,a=ao(gg,t);return h.jsx(DW,{scope:t,forceMount:n,children:h.jsx(Nn,{present:n||a.open,children:h.jsx(Ru,{asChild:!0,container:o,children:r})})})};VN.displayName=gg;var Wn="MenuContent",[LW,vg]=Ko(Wn),UN=g.forwardRef((e,t)=>{const n=zN(Wn,e.__scopeMenu),{forceMount:r=n.forceMount,...o}=e,a=ao(Wn,e.__scopeMenu),i=Li(Wn,e.__scopeMenu);return h.jsx(Ii.Provider,{scope:e.__scopeMenu,children:h.jsx(Nn,{present:r||a.open,children:h.jsx(Ii.Slot,{scope:e.__scopeMenu,children:i.modal?h.jsx(FW,{...o,ref:t}):h.jsx(BW,{...o,ref:t})})})})}),FW=g.forwardRef((e,t)=>{const n=ao(Wn,e.__scopeMenu),r=g.useRef(null),o=rt(t,r);return g.useEffect(()=>{const a=r.current;if(a)return md(a)},[]),h.jsx(bg,{...e,ref:o,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:he(e.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),BW=g.forwardRef((e,t)=>{const n=ao(Wn,e.__scopeMenu);return h.jsx(bg,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),bg=g.forwardRef((e,t)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:o,onOpenAutoFocus:a,onCloseAutoFocus:i,disableOutsidePointerEvents:s,onEntryFocus:c,onEscapeKeyDown:l,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:f,onDismiss:p,disableOutsideScroll:y,...m}=e,v=ao(Wn,n),b=Li(Wn,n),x=Di(n),_=pg(n),w=FN(n),[j,E]=g.useState(null),S=g.useRef(null),O=rt(t,S,v.onContentChange),k=g.useRef(0),N=g.useRef(""),P=g.useRef(0),R=g.useRef(null),A=g.useRef("right"),C=g.useRef(0),M=y?jc:g.Fragment,T=y?{as:Yr,allowPinchZoom:!0}:void 0,D=L=>{var Z,Y;const B=N.current+L,U=w().filter(W=>!W.disabled),F=document.activeElement,H=(Z=U.find(W=>W.ref.current===F))==null?void 0:Z.textValue,J=U.map(W=>W.textValue),q=JW(J,B,H),re=(Y=U.find(W=>W.textValue===q))==null?void 0:Y.ref.current;(function W(G){N.current=G,window.clearTimeout(k.current),G!==""&&(k.current=window.setTimeout(()=>W(""),1e3))})(B),re&&setTimeout(()=>re.focus())};g.useEffect(()=>()=>window.clearTimeout(k.current),[]),sd();const I=g.useCallback(L=>{var B,U;return A.current===((B=R.current)==null?void 0:B.side)&&ZW(L,(U=R.current)==null?void 0:U.area)},[]);return h.jsx(LW,{scope:n,searchRef:N,onItemEnter:g.useCallback(L=>{I(L)&&L.preventDefault()},[I]),onItemLeave:g.useCallback(L=>{var B;I(L)||((B=S.current)==null||B.focus(),E(null))},[I]),onTriggerLeave:g.useCallback(L=>{I(L)&&L.preventDefault()},[I]),pointerGraceTimerRef:P,onPointerGraceIntentChange:g.useCallback(L=>{R.current=L},[]),children:h.jsx(M,{...T,children:h.jsx(_c,{asChild:!0,trapped:o,onMountAutoFocus:he(a,L=>{var B;L.preventDefault(),(B=S.current)==null||B.focus({preventScroll:!0})}),onUnmountAutoFocus:i,children:h.jsx(Tu,{asChild:!0,disableOutsidePointerEvents:s,onEscapeKeyDown:l,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:f,onDismiss:p,children:h.jsx(nc,{asChild:!0,..._,dir:b.dir,orientation:"vertical",loop:r,currentTabStopId:j,onCurrentTabStopIdChange:E,onEntryFocus:he(c,L=>{b.isUsingKeyboardRef.current||L.preventDefault()}),preventScrollOnEntryFocus:!0,children:h.jsx(Sd,{role:"menu","aria-orientation":"vertical","data-state":sM(v.open),"data-radix-menu-content":"",dir:b.dir,...x,...m,ref:O,style:{outline:"none",...m.style},onKeyDown:he(m.onKeyDown,L=>{const B=L.target.closest("[data-radix-menu-content]")===L.currentTarget,U=L.ctrlKey||L.altKey||L.metaKey,F=L.key.length===1;B&&(L.key==="Tab"&&L.preventDefault(),!U&&F&&D(L.key));const H=S.current;if(L.target!==H||!IN.includes(L.key))return;L.preventDefault();const J=w().filter(q=>!q.disabled).map(q=>q.ref.current);fg.includes(L.key)&&J.reverse(),XW(J)}),onBlur:he(e.onBlur,L=>{L.currentTarget.contains(L.target)||(window.clearTimeout(k.current),N.current="")}),onPointerMove:he(e.onPointerMove,Ic(L=>{const B=L.target,U=C.current!==L.clientX;if(L.currentTarget.contains(B)&&U){const F=L.clientX>C.current?"right":"left";A.current=F,C.current=L.clientX}}))})})})})})})});UN.displayName=Wn;var $W="MenuGroup",xg=g.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return h.jsx(Oe.div,{role:"group",...r,ref:t})});xg.displayName=$W;var zW="MenuLabel",HN=g.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return h.jsx(Oe.div,{...r,ref:t})});HN.displayName=zW;var Rd="MenuItem",WN="menu.itemSelect",Id=g.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:r,...o}=e,a=g.useRef(null),i=Li(Rd,e.__scopeMenu),s=vg(Rd,e.__scopeMenu),c=rt(t,a),l=g.useRef(!1),u=()=>{const d=a.current;if(!n&&d){const f=new CustomEvent(WN,{bubbles:!0,cancelable:!0});d.addEventListener(WN,p=>r==null?void 0:r(p),{once:!0}),_we(d,f),f.defaultPrevented?l.current=!1:i.onClose()}};return h.jsx(qN,{...o,ref:c,disabled:n,onClick:he(e.onClick,u),onPointerDown:d=>{var f;(f=e.onPointerDown)==null||f.call(e,d),l.current=!0},onPointerUp:he(e.onPointerUp,d=>{var f;l.current||((f=d.currentTarget)==null||f.click())}),onKeyDown:he(e.onKeyDown,d=>{const f=s.searchRef.current!=="";n||f&&d.key===" "||Td.includes(d.key)&&(d.currentTarget.click(),d.preventDefault())})})});Id.displayName=Rd;var qN=g.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:r=!1,textValue:o,...a}=e,i=vg(Rd,n),s=pg(n),c=g.useRef(null),l=rt(t,c),[u,d]=g.useState(!1),[f,p]=g.useState("");return g.useEffect(()=>{const y=c.current;y&&p((y.textContent??"").trim())},[a.children]),h.jsx(Ii.ItemSlot,{scope:n,disabled:r,textValue:o??f,children:h.jsx(rc,{asChild:!0,...s,focusable:!r,children:h.jsx(Oe.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...a,ref:l,onPointerMove:he(e.onPointerMove,Ic(y=>{r?i.onItemLeave(y):(i.onItemEnter(y),y.defaultPrevented||y.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:he(e.onPointerLeave,Ic(y=>i.onItemLeave(y))),onFocus:he(e.onFocus,()=>d(!0)),onBlur:he(e.onBlur,()=>d(!1))})})})}),VW="MenuCheckboxItem",YN=g.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:r,...o}=e;return h.jsx(GN,{scope:e.__scopeMenu,checked:n,children:h.jsx(Id,{role:"menuitemcheckbox","aria-checked":Dd(n)?"mixed":n,...o,ref:t,"data-state":jg(n),onSelect:he(o.onSelect,()=>r==null?void 0:r(Dd(n)?!0:!n),{checkForDefaultPrevented:!1})})})});YN.displayName=VW;var KN="MenuRadioGroup",[UW,HW]=Ko(KN,{value:void 0,onValueChange:()=>{}}),XN=g.forwardRef((e,t)=>{const{value:n,onValueChange:r,...o}=e,a=Fo(r);return h.jsx(UW,{scope:e.__scopeMenu,value:n,onValueChange:a,children:h.jsx(xg,{...o,ref:t})})});XN.displayName=KN;var QN="MenuRadioItem",JN=g.forwardRef((e,t)=>{const{value:n,...r}=e,o=HW(QN,e.__scopeMenu),a=n===o.value;return h.jsx(GN,{scope:e.__scopeMenu,checked:a,children:h.jsx(Id,{role:"menuitemradio","aria-checked":a,...r,ref:t,"data-state":jg(a),onSelect:he(r.onSelect,()=>{var i;return(i=o.onValueChange)==null?void 0:i.call(o,n)},{checkForDefaultPrevented:!1})})})});JN.displayName=QN;var wg="MenuItemIndicator",[GN,WW]=Ko(wg,{checked:!1}),ZN=g.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:r,...o}=e,a=WW(wg,n);return h.jsx(Nn,{present:r||Dd(a.checked)||a.checked===!0,children:h.jsx(Oe.span,{...o,ref:t,"data-state":jg(a.checked)})})});ZN.displayName=wg;var qW="MenuSeparator",eM=g.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return h.jsx(Oe.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});eM.displayName=qW;var YW="MenuArrow",tM=g.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,o=Di(n);return h.jsx(Cd,{...o,...r,ref:t})});tM.displayName=YW;var _g="MenuSub",[KW,nM]=Ko(_g),rM=e=>{const{__scopeMenu:t,children:n,open:r=!1,onOpenChange:o}=e,a=ao(_g,t),i=Di(t),[s,c]=g.useState(null),[l,u]=g.useState(null),d=Fo(o);return g.useEffect(()=>(a.open===!1&&d(!1),()=>d(!1)),[a.open,d]),h.jsx(Oc,{...i,children:h.jsx(hg,{scope:t,open:r,onOpenChange:d,content:l,onContentChange:u,children:h.jsx(KW,{scope:t,contentId:mt(),triggerId:mt(),trigger:s,onTriggerChange:c,children:n})})})};rM.displayName=_g;var Rc="MenuSubTrigger",oM=g.forwardRef((e,t)=>{const n=ao(Rc,e.__scopeMenu),r=Li(Rc,e.__scopeMenu),o=nM(Rc,e.__scopeMenu),a=vg(Rc,e.__scopeMenu),i=g.useRef(null),{pointerGraceTimerRef:s,onPointerGraceIntentChange:c}=a,l={__scopeMenu:e.__scopeMenu},u=g.useCallback(()=>{i.current&&window.clearTimeout(i.current),i.current=null},[]);return g.useEffect(()=>u,[u]),g.useEffect(()=>{const d=s.current;return()=>{window.clearTimeout(d),c(null)}},[s,c]),h.jsx(yg,{asChild:!0,...l,children:h.jsx(qN,{id:o.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":o.contentId,"data-state":sM(n.open),...e,ref:B9(t,o.onTriggerChange),onClick:d=>{var f;(f=e.onClick)==null||f.call(e,d),!(e.disabled||d.defaultPrevented)&&(d.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:he(e.onPointerMove,Ic(d=>{a.onItemEnter(d),!d.defaultPrevented&&!e.disabled&&!n.open&&!i.current&&(a.onPointerGraceIntentChange(null),i.current=window.setTimeout(()=>{n.onOpenChange(!0),u()},100))})),onPointerLeave:he(e.onPointerLeave,Ic(d=>{var p,y;u();const f=(p=n.content)==null?void 0:p.getBoundingClientRect();if(f){const m=(y=n.content)==null?void 0:y.dataset.side,v=m==="right",b=v?-5:5,x=f[v?"left":"right"],_=f[v?"right":"left"];a.onPointerGraceIntentChange({area:[{x:d.clientX+b,y:d.clientY},{x,y:f.top},{x:_,y:f.top},{x:_,y:f.bottom},{x,y:f.bottom}],side:m}),window.clearTimeout(s.current),s.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(d),d.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:he(e.onKeyDown,d=>{var p;const f=a.searchRef.current!=="";e.disabled||f&&d.key===" "||DN[r.dir].includes(d.key)&&(n.onOpenChange(!0),(p=n.content)==null||p.focus(),d.preventDefault())})})})});oM.displayName=Rc;var aM="MenuSubContent",iM=g.forwardRef((e,t)=>{const n=zN(Wn,e.__scopeMenu),{forceMount:r=n.forceMount,...o}=e,a=ao(Wn,e.__scopeMenu),i=Li(Wn,e.__scopeMenu),s=nM(aM,e.__scopeMenu),c=g.useRef(null),l=rt(t,c);return h.jsx(Ii.Provider,{scope:e.__scopeMenu,children:h.jsx(Nn,{present:r||a.open,children:h.jsx(Ii.Slot,{scope:e.__scopeMenu,children:h.jsx(bg,{id:s.contentId,"aria-labelledby":s.triggerId,...o,ref:l,align:"start",side:i.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{var d;i.isUsingKeyboardRef.current&&((d=c.current)==null||d.focus()),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:he(e.onFocusOutside,u=>{u.target!==s.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:he(e.onEscapeKeyDown,u=>{i.onClose(),u.preventDefault()}),onKeyDown:he(e.onKeyDown,u=>{var p;const d=u.currentTarget.contains(u.target),f=LN[i.dir].includes(u.key);d&&f&&(a.onOpenChange(!1),(p=s.trigger)==null||p.focus(),u.preventDefault())})})})})})});iM.displayName=aM;function sM(e){return e?"open":"closed"}function Dd(e){return e==="indeterminate"}function jg(e){return Dd(e)?"indeterminate":e?"checked":"unchecked"}function XW(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function QW(e,t){return e.map((n,r)=>e[(t+r)%e.length])}function JW(e,t,n){const r=t.length>1&&Array.from(t).every(s=>s===t[0])?t[0]:t,o=n?e.indexOf(n):-1;let a=QW(e,Math.max(o,0));r.length===1&&(a=a.filter(s=>s!==n));const i=a.find(s=>s.toLowerCase().startsWith(r.toLowerCase()));return i!==n?i:void 0}function GW(e,t){const{x:n,y:r}=e;let o=!1;for(let a=0,i=t.length-1;a<t.length;i=a++){const s=t[a].x,c=t[a].y,l=t[i].x,u=t[i].y;c>r!=u>r&&n<(l-s)*(r-c)/(u-c)+s&&(o=!o)}return o}function ZW(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return GW(n,t)}function Ic(e){return t=>t.pointerType==="mouse"?e(t):void 0}let Ld,cM,eq,Xt,lM,Eg,Sg;bm=mg,am=yg,vm=VN,im=UN,sm=xg,cm=HN,lm=Id,um=YN,dm=XN,fm=JN,pm=ZN,hm=eM,mm=tM,XE=rM,ym=oM,gm=iM,Ld="DropdownMenu",[cM,eq]=Vn(Ld,[Uu]),Xt=Uu(),[lM,Eg]=cM(Ld),Sg=e=>{const{__scopeDropdownMenu:t,children:n,dir:r,open:o,defaultOpen:a,onOpenChange:i,modal:s=!0}=e,c=Xt(t),l=g.useRef(null),[u=!1,d]=en({prop:o,defaultProp:a,onChange:i});return h.jsx(lM,{scope:t,triggerId:mt(),triggerRef:l,contentId:mt(),open:u,onOpenChange:d,onOpenToggle:g.useCallback(()=>d(f=>!f),[d]),modal:s,children:h.jsx(bm,{...c,open:u,onOpenChange:d,dir:r,modal:s,children:n})})},Sg.displayName=Ld;var uM="DropdownMenuTrigger",dM=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...o}=e,a=Eg(uM,n),i=Xt(n);return h.jsx(am,{asChild:!0,...i,children:h.jsx(Oe.button,{type:"button",id:a.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...o,ref:B9(t,a.triggerRef),onPointerDown:he(e.onPointerDown,s=>{!r&&s.button===0&&s.ctrlKey===!1&&(a.onOpenToggle(),a.open||s.preventDefault())}),onKeyDown:he(e.onKeyDown,s=>{r||(["Enter"," "].includes(s.key)&&a.onOpenToggle(),s.key==="ArrowDown"&&a.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(s.key)&&s.preventDefault())})})})});dM.displayName=uM;var tq="DropdownMenuPortal",fM=e=>{const{__scopeDropdownMenu:t,...n}=e,r=Xt(t);return h.jsx(vm,{...r,...n})};fM.displayName=tq;var pM="DropdownMenuContent",hM=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=Eg(pM,n),a=Xt(n),i=g.useRef(!1);return h.jsx(im,{id:o.contentId,"aria-labelledby":o.triggerId,...a,...r,ref:t,onCloseAutoFocus:he(e.onCloseAutoFocus,s=>{var c;i.current||((c=o.triggerRef.current)==null||c.focus()),i.current=!1,s.preventDefault()}),onInteractOutside:he(e.onInteractOutside,s=>{const c=s.detail.originalEvent,l=c.button===0&&c.ctrlKey===!0,u=c.button===2||l;(!o.modal||u)&&(i.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});hM.displayName=pM;var nq="DropdownMenuGroup",mM=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=Xt(n);return h.jsx(sm,{...o,...r,ref:t})});mM.displayName=nq;var rq="DropdownMenuLabel",yM=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=Xt(n);return h.jsx(cm,{...o,...r,ref:t})});yM.displayName=rq;var oq="DropdownMenuItem",gM=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=Xt(n);return h.jsx(lm,{...o,...r,ref:t})});gM.displayName=oq;var aq="DropdownMenuCheckboxItem",vM=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=Xt(n);return h.jsx(um,{...o,...r,ref:t})});vM.displayName=aq;var iq="DropdownMenuRadioGroup",bM=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=Xt(n);return h.jsx(dm,{...o,...r,ref:t})});bM.displayName=iq;var sq="DropdownMenuRadioItem",xM=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=Xt(n);return h.jsx(fm,{...o,...r,ref:t})});xM.displayName=sq;var cq="DropdownMenuItemIndicator",wM=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=Xt(n);return h.jsx(pm,{...o,...r,ref:t})});wM.displayName=cq;var lq="DropdownMenuSeparator",_M=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=Xt(n);return h.jsx(hm,{...o,...r,ref:t})});_M.displayName=lq;var uq="DropdownMenuArrow",dq=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=Xt(n);return h.jsx(mm,{...o,...r,ref:t})});dq.displayName=uq;var fq=e=>{const{__scopeDropdownMenu:t,children:n,open:r,onOpenChange:o,defaultOpen:a}=e,i=Xt(t),[s=!1,c]=en({prop:r,defaultProp:a,onChange:o});return h.jsx(XE,{...i,open:s,onOpenChange:c,children:n})},pq="DropdownMenuSubTrigger",jM=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=Xt(n);return h.jsx(ym,{...o,...r,ref:t})});jM.displayName=pq;var hq="DropdownMenuSubContent",EM=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=Xt(n);return h.jsx(gm,{...o,...r,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});EM.displayName=hq,tS=Sg,nS=dM,eS=fM,_m=hM,ZE=mM,Mm=yM,Sm=gM,Cm=vM,G9=bM,Nm=xM,Om=wM,km=_M,Z9=fq,jm=jM,Em=EM;const mq=tS,yq=nS,gq=ZE,vq=g.forwardRef(({className:e,inset:t,children:n,...r},o)=>h.jsxs(jm,{ref:o,className:K("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t&&"pl-8",e),...r,children:[n,h.jsx(ue,{name:"chevron-right",className:"ml-auto"})]}));vq.displayName=jm.displayName;const bq=g.forwardRef(({className:e,...t},n)=>h.jsx(Em,{ref:n,className:K("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));bq.displayName=Em.displayName;const SM=g.forwardRef(({className:e,sideOffset:t=4,...n},r)=>h.jsx(eS,{children:h.jsx(_m,{ref:r,sideOffset:t,className:K("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));SM.displayName=_m.displayName;const CM=g.forwardRef(({className:e,inset:t,...n},r)=>h.jsx(Sm,{ref:r,className:K("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t&&"pl-8",e),...n}));CM.displayName=Sm.displayName;const xq=g.forwardRef(({className:e,children:t,checked:n,...r},o)=>h.jsxs(Cm,{ref:o,className:K("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:n,...r,children:[h.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:h.jsx(Om,{children:h.jsx(ue,{name:"check",className:"h-4 w-4"})})}),t]}));xq.displayName=Cm.displayName;const wq=g.forwardRef(({className:e,children:t,...n},r)=>h.jsxs(Nm,{ref:r,className:K("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[h.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:h.jsx(Om,{children:h.jsx(ue,{name:"circle",className:"h-4 w-4"})})}),t]}));wq.displayName=Nm.displayName;const _q=g.forwardRef(({className:e,inset:t,...n},r)=>h.jsx(Mm,{ref:r,className:K("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...n}));_q.displayName=Mm.displayName;const jq=g.forwardRef(({className:e,...t},n)=>h.jsx(km,{ref:n,className:K("-mx-1 my-1 h-px bg-muted",e),...t}));jq.displayName=km.displayName;function Eq(){const{t:e}=Me("sidebar"),{isMobile:t}=kc();return h.jsx(Pi,{children:h.jsx(no,{children:h.jsxs(mq,{children:[h.jsx(yq,{asChild:!0,children:h.jsxs(ro,{size:"lg",className:"data-[state=open]:bg-sidebar-accent data-[state=open]:text-sidebar-accent-foreground",children:[h.jsx("div",{children:h.jsx(ue,{name:"settings",size:28,className:"pr-2"})}),h.jsx(ue,{name:"chevrons-up-down",className:"ml-auto size-4"})]})}),h.jsx(SM,{className:"w-[--radix-dropdown-menu-trigger-width] min-w-56 rounded-lg",side:t?"bottom":"right",align:"end",sideOffset:4,children:h.jsx(gq,{children:h.jsxs(CM,{children:[h.jsx(ue,{name:"sparkles"}),e("contact")]})})})]})})})}const Sq=qr("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function tn({className:e,variant:t,...n}){return h.jsx("div",{className:K(Sq({variant:t}),e),...n})}function Cq({applications:e,currentSession:t,setCurrentSession:n}){const{t:r}=Me("sidebar"),o=yc(),a=Kt(SN),i=g.useCallback((l,u)=>{l.preventDefault(),l.stopPropagation(),a.show({id:u})},[a]),s=l=>{n(l),o(In("application",{applicationId:l.id}))},c=l=>{switch(l.main_source_type){case"Thread":return h.jsx(tn,{className:"ml-1",color:"blue",children:r("application_types.chat")});default:return null}};return h.jsxs(Pc,{className:"group-data-[collapsible=icon]:hidden pt-0",children:[h.jsx(Ac,{children:h.jsx("div",{className:"text-sm",children:r("applications")})}),h.jsxs(Pi,{children:[e==null?void 0:e.map(l=>h.jsx(no,{className:"cursor-pointer",children:h.jsx(ro,{asChild:!0,onClick:()=>s(l),children:h.jsxs("div",{className:"flex flex-row justify-between items-center !h-auto",children:[h.jsxs("div",{className:"flex gap-2",children:[(t==null?void 0:t.id)===l.id?h.jsx(ue,{size:16,color:"green",name:"check"}):h.jsx(ue,{size:16,name:"chevron-right"}),h.jsxs("span",{children:[l.name,c(l)]})]}),h.jsx(ue,{onClick:u=>i(u,l.id),size:16,className:"!z-50",name:"trash-2"})]})})},l.id)),e?h.jsx(no,{children:h.jsxs(ro,{className:"text-sidebar-foreground/70",children:[h.jsx(ue,{name:"ellipsis",className:"text-sidebar-foreground/70"}),h.jsx("span",{children:r("more_session")})]})}):null]})]})}const Oq={navMain:[{title:"playground.title",icon:h.jsx(ue,{name:"square-terminal"}),isActive:!0,items:[{title:"playground.drag_and_drop"},{title:"playground.node_connections"},{title:"playground.delete_nodes"}]},{title:"model.title",url:"#",icon:h.jsx(ue,{name:"bot"}),items:[{title:"model.llm"},{title:"model.embedding"}]},{title:"tutorial.title",icon:h.jsx(ue,{name:"book-open"}),items:[{title:"tutorial.get_started"},{title:"tutorial.chat_with_llm"},{title:"tutorial.ai_structured_output"},{title:"tutorial.tool_calling"},{title:"tutorial.few_shot_example"},{title:"tutorial.vector_database"}]},{title:"application.title",icon:h.jsx(ue,{name:"settings-2"}),items:[{title:"application.changelog"}]}]};function Nq({sessions:e,applications:t,currentSession:n,setCurrentSession:r,...o}){return h.jsxs(Jy,{collapsible:"icon",...o,children:[h.jsx("div",{className:"h-1"}),h.jsxs(Zy,{children:[h.jsx(CW,{sessions:e||[],currentSession:n,setCurrentSession:r}),h.jsx(Cq,{applications:t||[],currentSession:n,setCurrentSession:r}),h.jsx(iW,{items:Oq.navMain})]}),h.jsx(nN,{children:h.jsx(Eq,{})}),h.jsx(tN,{})]})}function Mq(){const{t:e}=Me("common"),t=h7(),n=yc(),r=Gr(),o=g.useRef(r),a=Du(p=>p.setTheme),i=Du(p=>p.theme),s=Ze(p=>p.currentSession),c=Ze(p=>p.sessions),l=Ze(p=>p.applications),u=Ze(p=>p.setCurrentSession);o.current=r,g.useEffect(()=>{s!=null&&s.id&&(r.pathname.includes(In("whiteboard"))?t.sessionId?t.sessionId&&t.sessionId!==(s==null?void 0:s.id)&&u(t.sessionId):n(In("whiteboard",{sessionId:s==null?void 0:s.id})):r.pathname.includes(In("application"))&&(t.applicationId?t.applicationId&&t.applicationId!==(s==null?void 0:s.id)&&u(t.applicationId):n(In("application",{applicationId:s==null?void 0:s.id}))))},[s==null?void 0:s.id,r.pathname,n,t.applicationId,t.sessionId,u]),g.useEffect(()=>{u(t.sessionId||t.applicationId).then(p=>{cW().has("flow")&&p.type===Hh.StandaloneApp||(p.type===Hh.StandaloneApp&&o.current.pathname.includes(In("whiteboard").replace("/",""))?n(In("application",{applicationId:p.id})):p.type===Hh.Whiteboard&&o.current.pathname.includes(In("application").replace("/",""))&&n(In("whiteboard",{sessionId:p.id})))})},[n,t.applicationId,t.sessionId,u]);const d=g.useCallback(()=>{a(i==="dark"?"light":"dark")},[i,a]),f=g.useMemo(()=>{if(r.pathname.includes(In("whiteboard")))return e("whiteboard");if(r.pathname.includes(In("application")))return e("apllication")},[r.pathname,e]);return h.jsxs(Qy,{defaultOpen:!1,children:[h.jsx(Nq,{sessions:c,applications:l,currentSession:s,setCurrentSession:u}),h.jsxs(Gy,{className:"max-h-screen overflow-hidden",children:[h.jsxs("header",{className:"flex h-14 shrink-0 items-center gap-2 transition-[width,height] ease-linear justify-between",children:[h.jsxs("div",{className:"flex items-center gap-2 px-4",children:[h.jsx(eN,{}),h.jsx(Qe,{children:f})]}),h.jsxs("div",{className:"flex items-center gap-2 px-4",children:[h.jsx(dt,{onClick:d,variant:"link",children:h.jsx(ue,{size:18,name:i==="dark"?"moon":"sun"})}),h.jsx("a",{referrerPolicy:"no-referrer",target:"_blank",href:"https://github.com/zrg-team/NoLLMChat",children:h.jsx(ue,{size:18,name:"github"})})]})]}),h.jsx(wc,{className:"shrink-0"}),h.jsx("div",{className:"flex flex-1 flex-col p-0 m-0 overflow-y-auto",children:h.jsx(P7,{})})]})]})}const OM=g.forwardRef(({className:e,children:t,...n},r)=>h.jsx("div",{className:K("flex flex-col w-full h-full p-4 gap-6 overflow-y-auto",e),ref:r,...n,children:t}));OM.displayName="ChatMessageList";var NM="vercel.ai.error",kq=Symbol.for(NM),MM,Pq=class rz extends Error{constructor({name:t,message:n,cause:r}){super(n),this[MM]=!0,this.name=t,this.cause=r}static isInstance(t){return rz.hasMarker(t,NM)}static hasMarker(t,n){const r=Symbol.for(n);return t!=null&&typeof t=="object"&&r in t&&typeof t[r]=="boolean"&&t[r]===!0}};MM=kq;var Fi=Pq;function kM(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}var PM="AI_InvalidArgumentError",AM=`vercel.ai.error.${PM}`,Aq=Symbol.for(AM),TM,Tq=class extends Fi{constructor({message:e,cause:t,argument:n}){super({name:PM,message:e,cause:t}),this[TM]=!0,this.argument=n}static isInstance(e){return Fi.hasMarker(e,AM)}};TM=Aq;var RM="AI_JSONParseError",IM=`vercel.ai.error.${RM}`,Rq=Symbol.for(IM),DM,LM=class extends Fi{constructor({text:e,cause:t}){super({name:RM,message:`JSON parsing failed: Text: ${e}.
Error message: ${kM(t)}`,cause:t}),this[DM]=!0,this.text=e}static isInstance(e){return Fi.hasMarker(e,IM)}};DM=Rq;var FM="AI_TypeValidationError",BM=`vercel.ai.error.${FM}`,Iq=Symbol.for(BM),$M,Dq=class ES extends Fi{constructor({value:t,cause:n}){super({name:FM,message:`Type validation failed: Value: ${JSON.stringify(t)}.
Error message: ${kM(n)}`,cause:n}),this[$M]=!0,this.value=t}static isInstance(t){return Fi.hasMarker(t,BM)}static wrap({value:t,cause:n}){return ES.isInstance(n)&&n.value===t?n:new ES({value:t,cause:n})}};$M=Iq;var zM=Dq;let Lq=(e,t=21)=>(n=t)=>{let r="",o=n;for(;o--;)r+=e[Math.random()*e.length|0];return r};var Ma={exports:{}},VM;function Fq(){if(VM)return Ma.exports;VM=1;const e=typeof Wh<"u",t=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*:/,n=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/;function r(s,c,l){l==null&&c!==null&&typeof c=="object"&&(l=c,c=void 0),e&&Wh.isBuffer(s)&&(s=s.toString()),s&&s.charCodeAt(0)===65279&&(s=s.slice(1));const u=JSON.parse(s,c);if(u===null||typeof u!="object")return u;const d=l&&l.protoAction||"error",f=l&&l.constructorAction||"error";if(d==="ignore"&&f==="ignore")return u;if(d!=="ignore"&&f!=="ignore"){if(t.test(s)===!1&&n.test(s)===!1)return u}else if(d!=="ignore"&&f==="ignore"){if(t.test(s)===!1)return u}else if(n.test(s)===!1)return u;return o(u,{protoAction:d,constructorAction:f,safe:l&&l.safe})}function o(s,{protoAction:c="error",constructorAction:l="error",safe:u}={}){let d=[s];for(;d.length;){const f=d;d=[];for(const p of f){if(c!=="ignore"&&Object.prototype.hasOwnProperty.call(p,"__proto__")){if(u===!0)return null;if(c==="error")throw new SyntaxError("Object contains forbidden prototype property");delete p.__proto__}if(l!=="ignore"&&Object.prototype.hasOwnProperty.call(p,"constructor")&&Object.prototype.hasOwnProperty.call(p.constructor,"prototype")){if(u===!0)return null;if(l==="error")throw new SyntaxError("Object contains forbidden prototype property");delete p.constructor}for(const y in p){const m=p[y];m&&typeof m=="object"&&d.push(m)}}}return s}function a(s,c,l){const u=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return r(s,c,l)}finally{Error.stackTraceLimit=u}}function i(s,c){const l=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return r(s,c,{safe:!0})}catch{return null}finally{Error.stackTraceLimit=l}}return Ma.exports=a,Ma.exports.default=a,Ma.exports.parse=a,Ma.exports.safeParse=i,Ma.exports.scan=o,Ma.exports}var Bq=Fq();const $q=Xe(Bq);var zq=({prefix:e,size:t=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{const o=Lq(n,t);if(e==null)return o;if(n.includes(r))throw new Tq({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return a=>`${e}${r}${o(a)}`},UM=zq(),Cg=Symbol.for("vercel.ai.validator");function Vq(e){return{[Cg]:!0,validate:e}}function Uq(e){return typeof e=="object"&&e!==null&&Cg in e&&e[Cg]===!0&&"validate"in e}function Hq(e){return Uq(e)?e:Wq(e)}function Wq(e){return Vq(t=>{const n=e.safeParse(t);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}})}function qq({value:e,schema:t}){const n=Hq(t);try{if(n.validate==null)return{success:!0,value:e};const r=n.validate(e);return r.success?r:{success:!1,error:zM.wrap({value:e,cause:r.error})}}catch(r){return{success:!1,error:zM.wrap({value:e,cause:r})}}}function HM({text:e,schema:t}){try{const n=$q.parse(e);return t==null?{success:!0,value:n}:qq({value:n,schema:t})}catch(n){return{success:!1,error:LM.isInstance(n)?n:new LM({text:e,cause:n})}}}var Fd={code:"0",name:"text",parse:e=>{if(typeof e!="string")throw new Error('"text" parts expect a string value.');return{type:"text",value:e}}},Bd={code:"3",name:"error",parse:e=>{if(typeof e!="string")throw new Error('"error" parts expect a string value.');return{type:"error",value:e}}},$d={code:"4",name:"assistant_message",parse:e=>{if(e==null||typeof e!="object"||!("id"in e)||!("role"in e)||!("content"in e)||typeof e.id!="string"||typeof e.role!="string"||e.role!=="assistant"||!Array.isArray(e.content)||!e.content.every(t=>t!=null&&typeof t=="object"&&"type"in t&&t.type==="text"&&"text"in t&&t.text!=null&&typeof t.text=="object"&&"value"in t.text&&typeof t.text.value=="string"))throw new Error('"assistant_message" parts expect an object with an "id", "role", and "content" property.');return{type:"assistant_message",value:e}}},zd={code:"5",name:"assistant_control_data",parse:e=>{if(e==null||typeof e!="object"||!("threadId"in e)||!("messageId"in e)||typeof e.threadId!="string"||typeof e.messageId!="string")throw new Error('"assistant_control_data" parts expect an object with a "threadId" and "messageId" property.');return{type:"assistant_control_data",value:{threadId:e.threadId,messageId:e.messageId}}}},Vd={code:"6",name:"data_message",parse:e=>{if(e==null||typeof e!="object"||!("role"in e)||!("data"in e)||typeof e.role!="string"||e.role!=="data")throw new Error('"data_message" parts expect an object with a "role" and "data" property.');return{type:"data_message",value:e}}},Yq=[Fd,Bd,$d,zd,Vd];Fd.code+"",Bd.code+"",$d.code+"",zd.code+"",Vd.code+"",Fd.name+"",Fd.code,Bd.name+"",Bd.code,$d.name+"",$d.code,zd.name+"",zd.code,Vd.name+"",Vd.code,Yq.map(e=>e.code);function Kq(e){const t=["ROOT"];let n=-1,r=null;function o(c,l,u){switch(c){case'"':{n=l,t.pop(),t.push(u),t.push("INSIDE_STRING");break}case"f":case"t":case"n":{n=l,r=l,t.pop(),t.push(u),t.push("INSIDE_LITERAL");break}case"-":{t.pop(),t.push(u),t.push("INSIDE_NUMBER");break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{n=l,t.pop(),t.push(u),t.push("INSIDE_NUMBER");break}case"{":{n=l,t.pop(),t.push(u),t.push("INSIDE_OBJECT_START");break}case"[":{n=l,t.pop(),t.push(u),t.push("INSIDE_ARRAY_START");break}}}function a(c,l){switch(c){case",":{t.pop(),t.push("INSIDE_OBJECT_AFTER_COMMA");break}case"}":{n=l,t.pop();break}}}function i(c,l){switch(c){case",":{t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{n=l,t.pop();break}}}for(let c=0;c<e.length;c++){const l=e[c];switch(t[t.length-1]){case"ROOT":o(l,c,"FINISH");break;case"INSIDE_OBJECT_START":{switch(l){case'"':{t.pop(),t.push("INSIDE_OBJECT_KEY");break}case"}":{n=c,t.pop();break}}break}case"INSIDE_OBJECT_AFTER_COMMA":{switch(l){case'"':{t.pop(),t.push("INSIDE_OBJECT_KEY");break}}break}case"INSIDE_OBJECT_KEY":{switch(l){case'"':{t.pop(),t.push("INSIDE_OBJECT_AFTER_KEY");break}}break}case"INSIDE_OBJECT_AFTER_KEY":{switch(l){case":":{t.pop(),t.push("INSIDE_OBJECT_BEFORE_VALUE");break}}break}case"INSIDE_OBJECT_BEFORE_VALUE":{o(l,c,"INSIDE_OBJECT_AFTER_VALUE");break}case"INSIDE_OBJECT_AFTER_VALUE":{a(l,c);break}case"INSIDE_STRING":{switch(l){case'"':{t.pop(),n=c;break}case"\\":{t.push("INSIDE_STRING_ESCAPE");break}default:n=c}break}case"INSIDE_ARRAY_START":{switch(l){case"]":{n=c,t.pop();break}default:{n=c,o(l,c,"INSIDE_ARRAY_AFTER_VALUE");break}}break}case"INSIDE_ARRAY_AFTER_VALUE":{switch(l){case",":{t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{n=c,t.pop();break}default:{n=c;break}}break}case"INSIDE_ARRAY_AFTER_COMMA":{o(l,c,"INSIDE_ARRAY_AFTER_VALUE");break}case"INSIDE_STRING_ESCAPE":{t.pop(),n=c;break}case"INSIDE_NUMBER":{switch(l){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{n=c;break}case"e":case"E":case"-":case".":break;case",":{t.pop(),t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&i(l,c),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&a(l,c);break}case"}":{t.pop(),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&a(l,c);break}case"]":{t.pop(),t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&i(l,c);break}default:{t.pop();break}}break}case"INSIDE_LITERAL":{const u=e.substring(r,c+1);!"false".startsWith(u)&&!"true".startsWith(u)&&!"null".startsWith(u)?(t.pop(),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"?a(l,c):t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&i(l,c)):n=c;break}}}let s=e.slice(0,n+1);for(let c=t.length-1;c>=0;c--)switch(t[c]){case"INSIDE_STRING":{s+='"';break}case"INSIDE_OBJECT_KEY":case"INSIDE_OBJECT_AFTER_KEY":case"INSIDE_OBJECT_AFTER_COMMA":case"INSIDE_OBJECT_START":case"INSIDE_OBJECT_BEFORE_VALUE":case"INSIDE_OBJECT_AFTER_VALUE":{s+="}";break}case"INSIDE_ARRAY_START":case"INSIDE_ARRAY_AFTER_COMMA":case"INSIDE_ARRAY_AFTER_VALUE":{s+="]";break}case"INSIDE_LITERAL":{const l=e.substring(r,e.length);"true".startsWith(l)?s+="true".slice(l.length):"false".startsWith(l)?s+="false".slice(l.length):"null".startsWith(l)&&(s+="null".slice(l.length))}}return s}function Xq(e){if(e===void 0)return{value:void 0,state:"undefined-input"};let t=HM({text:e});return t.success?{value:t.value,state:"successful-parse"}:(t=HM({text:Kq(e)}),t.success?{value:t.value,state:"repaired-parse"}:{value:void 0,state:"failed-parse"})}var Dc={code:"0",name:"text",parse:e=>{if(typeof e!="string")throw new Error('"text" parts expect a string value.');return{type:"text",value:e}}},Lc={code:"2",name:"data",parse:e=>{if(!Array.isArray(e))throw new Error('"data" parts expect an array value.');return{type:"data",value:e}}},Fc={code:"3",name:"error",parse:e=>{if(typeof e!="string")throw new Error('"error" parts expect a string value.');return{type:"error",value:e}}},Bc={code:"8",name:"message_annotations",parse:e=>{if(!Array.isArray(e))throw new Error('"message_annotations" parts expect an array value.');return{type:"message_annotations",value:e}}},$c={code:"9",name:"tool_call",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("toolName"in e)||typeof e.toolName!="string"||!("args"in e)||typeof e.args!="object")throw new Error('"tool_call" parts expect an object with a "toolCallId", "toolName", and "args" property.');return{type:"tool_call",value:e}}},zc={code:"a",name:"tool_result",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("result"in e))throw new Error('"tool_result" parts expect an object with a "toolCallId" and a "result" property.');return{type:"tool_result",value:e}}},Vc={code:"b",name:"tool_call_streaming_start",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("toolName"in e)||typeof e.toolName!="string")throw new Error('"tool_call_streaming_start" parts expect an object with a "toolCallId" and "toolName" property.');return{type:"tool_call_streaming_start",value:e}}},Uc={code:"c",name:"tool_call_delta",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("argsTextDelta"in e)||typeof e.argsTextDelta!="string")throw new Error('"tool_call_delta" parts expect an object with a "toolCallId" and "argsTextDelta" property.');return{type:"tool_call_delta",value:e}}},Hc={code:"d",name:"finish_message",parse:e=>{if(e==null||typeof e!="object"||!("finishReason"in e)||typeof e.finishReason!="string")throw new Error('"finish_message" parts expect an object with a "finishReason" property.');const t={finishReason:e.finishReason};return"usage"in e&&e.usage!=null&&typeof e.usage=="object"&&"promptTokens"in e.usage&&"completionTokens"in e.usage&&(t.usage={promptTokens:typeof e.usage.promptTokens=="number"?e.usage.promptTokens:Number.NaN,completionTokens:typeof e.usage.completionTokens=="number"?e.usage.completionTokens:Number.NaN}),{type:"finish_message",value:t}}},Wc={code:"e",name:"finish_step",parse:e=>{if(e==null||typeof e!="object"||!("finishReason"in e)||typeof e.finishReason!="string")throw new Error('"finish_step" parts expect an object with a "finishReason" property.');const t={finishReason:e.finishReason,isContinued:!1};return"usage"in e&&e.usage!=null&&typeof e.usage=="object"&&"promptTokens"in e.usage&&"completionTokens"in e.usage&&(t.usage={promptTokens:typeof e.usage.promptTokens=="number"?e.usage.promptTokens:Number.NaN,completionTokens:typeof e.usage.completionTokens=="number"?e.usage.completionTokens:Number.NaN}),"isContinued"in e&&typeof e.isContinued=="boolean"&&(t.isContinued=e.isContinued),{type:"finish_step",value:t}}},Qq=[Dc,Lc,Fc,Bc,$c,zc,Vc,Uc,Hc,Wc],Jq={[Dc.code]:Dc,[Lc.code]:Lc,[Fc.code]:Fc,[Bc.code]:Bc,[$c.code]:$c,[zc.code]:zc,[Vc.code]:Vc,[Uc.code]:Uc,[Hc.code]:Hc,[Wc.code]:Wc};Dc.name+"",Dc.code,Lc.name+"",Lc.code,Fc.name+"",Fc.code,Bc.name+"",Bc.code,$c.name+"",$c.code,zc.name+"",zc.code,Vc.name+"",Vc.code,Uc.name+"",Uc.code,Hc.name+"",Hc.code,Wc.name+"",Wc.code;var Gq=Qq.map(e=>e.code),Zq=e=>{const t=e.indexOf(":");if(t===-1)throw new Error("Failed to parse stream string. No separator found.");const n=e.slice(0,t);if(!Gq.includes(n))throw new Error(`Failed to parse stream string. Invalid code ${n}.`);const r=n,o=e.slice(t+1),a=JSON.parse(o);return Jq[r].parse(a)},eY=10;function tY(e,t){const n=new Uint8Array(t);let r=0;for(const o of e)n.set(o,r),r+=o.length;return e.length=0,n}async function nY({stream:e,onTextPart:t,onDataPart:n,onErrorPart:r,onToolCallStreamingStartPart:o,onToolCallDeltaPart:a,onToolCallPart:i,onToolResultPart:s,onMessageAnnotationsPart:c,onFinishMessagePart:l,onFinishStepPart:u}){const d=e.getReader(),f=new TextDecoder,p=[];let y=0;for(;;){const{value:m}=await d.read();if(m&&(p.push(m),y+=m.length,m[m.length-1]!==eY))continue;if(p.length===0)break;const v=tY(p,y);y=0;const b=f.decode(v,{stream:!0}).split(`
`).filter(x=>x!=="").map(Zq);for(const{type:x,value:_}of b)switch(x){case"text":await(t==null?void 0:t(_));break;case"data":await(n==null?void 0:n(_));break;case"error":await(r==null?void 0:r(_));break;case"message_annotations":await(c==null?void 0:c(_));break;case"tool_call_streaming_start":await(o==null?void 0:o(_));break;case"tool_call_delta":await(a==null?void 0:a(_));break;case"tool_call":await(i==null?void 0:i(_));break;case"tool_result":await(s==null?void 0:s(_));break;case"finish_message":await(l==null?void 0:l(_));break;case"finish_step":await(u==null?void 0:u(_));break;default:{const w=x;throw new Error(`Unknown stream part type: ${w}`)}}}}function rY({promptTokens:e,completionTokens:t}){return{promptTokens:e,completionTokens:t,totalTokens:e+t}}async function oY({stream:e,update:t,onToolCall:n,onFinish:r,generateId:o=UM,getCurrentDate:a=()=>new Date}){const i=a();let s,c=!0;const l=[],u=[];let d;const f={};let p={completionTokens:NaN,promptTokens:NaN,totalTokens:NaN},y="unknown";function m(){const b=[...u];if(s==null){t(l,b);return}d!=null&&d.length&&(s.annotations=d);const x={...JSON.parse(JSON.stringify(s)),revisionId:o()};t([...l,x],b)}function v(){return(c||s==null)&&(s!=null&&l.push(s),c=!1,s={id:o(),role:"assistant",content:"",createdAt:i}),s}await nY({stream:e,onTextPart(b){const x=v();s={...x,content:x.content+b},m()},onToolCallStreamingStartPart(b){const x=v();x.toolInvocations==null&&(x.toolInvocations=[]),f[b.toolCallId]={text:"",toolName:b.toolName,index:x.toolInvocations.length},x.toolInvocations.push({state:"partial-call",toolCallId:b.toolCallId,toolName:b.toolName,args:void 0}),m()},onToolCallDeltaPart(b){const x=v(),_=f[b.toolCallId];_.text+=b.argsTextDelta;const{value:w}=Xq(_.text);x.toolInvocations[_.index]={state:"partial-call",toolCallId:b.toolCallId,toolName:_.toolName,args:w},m()},async onToolCallPart(b){const x=v();if(f[b.toolCallId]!=null?x.toolInvocations[f[b.toolCallId].index]={state:"call",...b}:(x.toolInvocations==null&&(x.toolInvocations=[]),x.toolInvocations.push({state:"call",...b})),n){const _=await n({toolCall:b});_!=null&&(x.toolInvocations[x.toolInvocations.length-1]={state:"result",...b,result:_})}m()},onToolResultPart(b){const x=v().toolInvocations;if(x==null)throw new Error("tool_result must be preceded by a tool_call");const _=x.findIndex(w=>w.toolCallId===b.toolCallId);if(_===-1)throw new Error("tool_result must be preceded by a tool_call with the same toolCallId");x[_]={...x[_],state:"result",...b},m()},onDataPart(b){u.push(...b),m()},onMessageAnnotationsPart(b){d==null?d=[...b]:d.push(...b),m()},onFinishStepPart(b){c=!b.isContinued},onFinishMessagePart(b){y=b.finishReason,b.usage!=null&&(p=rY(b.usage))},onErrorPart(b){throw new Error(b)}}),r==null||r({message:s,finishReason:y,usage:p})}async function aY({stream:e,onTextPart:t}){const n=e.pipeThrough(new TextDecoderStream).getReader();for(;;){const{done:r,value:o}=await n.read();if(r)break;await t(o)}}var iY=()=>fetch;async function sY({api:e,body:t,streamProtocol:n="data",credentials:r,headers:o,abortController:a,restoreMessagesOnFailure:i,onResponse:s,onUpdate:c,onFinish:l,onToolCall:u,generateId:d,fetch:f=iY()}){var p,y;const m=await f(e,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json",...o},signal:(p=a==null?void 0:a())==null?void 0:p.signal,credentials:r}).catch(v=>{throw i(),v});if(s)try{await s(m)}catch(v){throw v}if(!m.ok)throw i(),new Error((y=await m.text())!=null?y:"Failed to fetch the chat response.");if(!m.body)throw new Error("The response body is empty.");switch(n){case"text":{const v={id:d(),createdAt:new Date,role:"assistant",content:""};await aY({stream:m.body,onTextPart:b=>{v.content+=b,c([{...v}],[])}}),l==null||l(v,{usage:{completionTokens:NaN,promptTokens:NaN,totalTokens:NaN},finishReason:"unknown"});return}case"data":{await oY({stream:m.body,update:c,onToolCall:u,onFinish({message:v,finishReason:b,usage:x}){l&&v!=null&&l(v,{usage:x,finishReason:b})},generateId:d});return}default:{const v=n;throw new Error(`Unknown stream protocol: ${v}`)}}}var WM={exports:{}},Og={},qM;function cY(){if(qM)return Og;qM=1;var e=$9();function t(d,f){return d===f&&(d!==0||1/d===1/f)||d!==d&&f!==f}var n=typeof Object.is=="function"?Object.is:t,r=e.useState,o=e.useEffect,a=e.useLayoutEffect,i=e.useDebugValue;function s(d,f){var p=f(),y=r({inst:{value:p,getSnapshot:f}}),m=y[0].inst,v=y[1];return a(function(){m.value=p,m.getSnapshot=f,c(m)&&v({inst:m})},[d,p,f]),o(function(){return c(m)&&v({inst:m}),d(function(){c(m)&&v({inst:m})})},[d]),i(p),p}function c(d){var f=d.getSnapshot;d=d.value;try{var p=f();return!n(d,p)}catch{return!0}}function l(d,f){return f()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?l:s;return Og.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:u,Og}var YM;function KM(){return YM||(YM=1,WM.exports=cY()),WM.exports}Hu=KM();let io,fn,Ud,Je,dr,so,XM,qc;tz=Xe(Hu),io=()=>{},fn=io(),Ud=Object,Je=e=>e===fn,dr=e=>typeof e=="function",so=(e,t)=>({...e,...t}),XM=e=>dr(e.then),qc=new WeakMap;let lY=0;const Yc=e=>{const t=typeof e,n=e&&e.constructor,r=n==Date;let o,a;if(Ud(e)===e&&!r&&n!=RegExp){if(o=qc.get(e),o)return o;if(o=++lY+"~",qc.set(e,o),n==Array){for(o="@",a=0;a<e.length;a++)o+=Yc(e[a])+",";qc.set(e,o)}if(n==Ud){o="#";const i=Ud.keys(e).sort();for(;!Je(a=i.pop());)Je(e[a])||(o+=a+":"+Yc(e[a])+",");qc.set(e,o)}}else o=r?e.toJSON():t=="symbol"?e.toString():t=="string"?JSON.stringify(e):""+e;return o},co=new WeakMap,Ng={},Hd={},Mg="undefined",Wd=typeof window!=Mg,kg=typeof document!=Mg,uY=()=>Wd&&typeof window.requestAnimationFrame!=Mg,QM=(e,t)=>{const n=co.get(e);return[()=>!Je(t)&&e.get(t)||Ng,r=>{if(!Je(t)){const o=e.get(t);t in Hd||(Hd[t]=o),n[5](t,so(o,r),o||Ng)}},n[6],()=>!Je(t)&&t in Hd?Hd[t]:!Je(t)&&e.get(t)||Ng]};let Pg=!0;const dY=()=>Pg,[Ag,Tg]=Wd&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[io,io],fY=()=>{const e=kg&&document.visibilityState;return Je(e)||e!=="hidden"},pY=e=>(kg&&document.addEventListener("visibilitychange",e),Ag("focus",e),()=>{kg&&document.removeEventListener("visibilitychange",e),Tg("focus",e)}),hY=e=>{const t=()=>{Pg=!0,e()},n=()=>{Pg=!1};return Ag("online",t),Ag("offline",n),()=>{Tg("online",t),Tg("offline",n)}},mY={isOnline:dY,isVisible:fY},yY={initFocus:pY,initReconnect:hY},JM=!V.useId,Kc=!Wd||"Deno"in window,gY=e=>uY()?window.requestAnimationFrame(e):setTimeout(e,1),Rg=Kc?g.useEffect:g.useLayoutEffect,Ig=typeof navigator<"u"&&navigator.connection,GM=!Kc&&Ig&&(["slow-2g","2g"].includes(Ig.effectiveType)||Ig.saveData),Dg=e=>{if(dr(e))try{e=e()}catch{e=""}const t=e;return e=typeof e=="string"?e:(Array.isArray(e)?e.length:e)?Yc(e):"",[e,t]};let vY=0;const Lg=()=>++vY,ZM=0,ek=1,tk=2;var Xc={__proto__:null,ERROR_REVALIDATE_EVENT:3,FOCUS_EVENT:ZM,MUTATE_EVENT:tk,RECONNECT_EVENT:ek};async function nk(...e){const[t,n,r,o]=e,a=so({populateCache:!0,throwOnError:!0},typeof o=="boolean"?{revalidate:o}:o||{});let i=a.populateCache;const s=a.rollbackOnError;let c=a.optimisticData;const l=f=>typeof s=="function"?s(f):s!==!1,u=a.throwOnError;if(dr(n)){const f=n,p=[],y=t.keys();for(const m of y)!/^\$(inf|sub)\$/.test(m)&&f(t.get(m)._k)&&p.push(m);return Promise.all(p.map(d))}return d(n);async function d(f){const[p]=Dg(f);if(!p)return;const[y,m]=QM(t,p),[v,b,x,_]=co.get(t),w=()=>{const A=v[p];return(dr(a.revalidate)?a.revalidate(y().data,f):a.revalidate!==!1)&&(delete x[p],delete _[p],A&&A[0])?A[0](tk).then(()=>y().data):y().data};if(e.length<3)return w();let j=r,E;const S=Lg();b[p]=[S,0];const O=!Je(c),k=y(),N=k.data,P=k._c,R=Je(P)?N:P;if(O&&(c=dr(c)?c(R,N):c,m({data:c,_c:R})),dr(j))try{j=j(R)}catch(A){E=A}if(j&&XM(j))if(j=await j.catch(A=>{E=A}),S!==b[p][0]){if(E)throw E;return j}else E&&O&&l(E)&&(i=!0,m({data:R,_c:fn}));if(i&&!E)if(dr(i)){const A=i(j,R);m({data:A,error:fn,_c:fn})}else m({data:j,error:fn,_c:fn});if(b[p][1]=Lg(),Promise.resolve(w()).then(()=>{m({_c:fn})}),E){if(u)throw E;return}return j}}const rk=(e,t)=>{for(const n in e)e[n][0]&&e[n][0](t)},bY=(e,t)=>{if(!co.has(e)){const n=so(yY,t),r={},o=nk.bind(fn,e);let a=io;const i={},s=(u,d)=>{const f=i[u]||[];return i[u]=f,f.push(d),()=>f.splice(f.indexOf(d),1)},c=(u,d,f)=>{e.set(u,d);const p=i[u];if(p)for(const y of p)y(d,f)},l=()=>{if(!co.has(e)&&(co.set(e,[r,{},{},{},o,c,s]),!Kc)){const u=n.initFocus(setTimeout.bind(fn,rk.bind(fn,r,ZM))),d=n.initReconnect(setTimeout.bind(fn,rk.bind(fn,r,ek)));a=()=>{u&&u(),d&&d(),co.delete(e)}}};return l(),[e,o,l,a]}return[e,co.get(e)[4]]},xY=(e,t,n,r,o)=>{const a=n.errorRetryCount,i=o.retryCount,s=~~((Math.random()+.5)*(1<<(i<8?i:8)))*n.errorRetryInterval;!Je(a)&&i>a||setTimeout(r,s,o)},wY=(e,t)=>Yc(e)==Yc(t),[ok,_Y]=bY(new Map),jY=so({onLoadingSlow:io,onSuccess:io,onError:io,onErrorRetry:xY,onDiscarded:io,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:GM?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:GM?5e3:3e3,compare:wY,isPaused:()=>!1,cache:ok,mutate:_Y,fallback:{}},mY),EY=(e,t)=>{const n=so(e,t);if(t){const{use:r,fallback:o}=e,{use:a,fallback:i}=t;r&&a&&(n.use=r.concat(a)),o&&i&&(n.fallback=so(o,i))}return n},SY=g.createContext({}),CY="$inf$",ak=Wd&&window.__SWR_DEVTOOLS_USE__,OY=ak?window.__SWR_DEVTOOLS_USE__:[],NY=()=>{ak&&(window.__SWR_DEVTOOLS_REACT__=V)},MY=e=>dr(e[1])?[e[0],e[1],e[2]||{}]:[e[0],null,(e[1]===null?e[2]:e[1])||{}],kY=()=>so(jY,g.useContext(SY)),PY=e=>(t,n,r)=>e(t,n&&((...o)=>{const[a]=Dg(t),[,,,i]=co.get(ok);if(a.startsWith(CY))return n(...o);const s=i[a];return Je(s)?n(...o):(delete i[a],s)}),r),AY=OY.concat(PY),TY=e=>function(...t){const n=kY(),[r,o,a]=MY(t),i=EY(n,a);let s=e;const{use:c}=i,l=(c||[]).concat(AY);for(let u=l.length;u--;)s=l[u](s);return s(r,o||i.fetcher||null,i)},RY=(e,t,n)=>{const r=t[e]||(t[e]=[]);return r.push(n),()=>{const o=r.indexOf(n);o>=0&&(r[o]=r[r.length-1],r.pop())}};NY();const ik=V.use||(e=>{if(e.status==="pending")throw e;if(e.status==="fulfilled")return e.value;throw e.status==="rejected"?e.reason:(e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t}),e)}),Fg={dedupe:!0},IY=(e,t,n)=>{const{cache:r,compare:o,suspense:a,fallbackData:i,revalidateOnMount:s,revalidateIfStale:c,refreshInterval:l,refreshWhenHidden:u,refreshWhenOffline:d,keepPreviousData:f}=n,[p,y,m,v]=co.get(r),[b,x]=Dg(e),_=g.useRef(!1),w=g.useRef(!1),j=g.useRef(b),E=g.useRef(t),S=g.useRef(n),O=()=>S.current,k=()=>O().isVisible()&&O().isOnline(),[N,P,R,A]=QM(r,b),C=g.useRef({}).current,M=Je(i)?n.fallback[b]:i,T=($,se)=>{for(const le in C){const ve=le;if(ve==="data"){if(!o($[ve],se[ve])&&(!Je($[ve])||!o(q,se[ve])))return!1}else if(se[ve]!==$[ve])return!1}return!0},D=g.useMemo(()=>{const $=!b||!t?!1:Je(s)?O().isPaused()||a?!1:Je(c)?!0:c:s,se=ze=>{const st=so(ze);return delete st._k,$?{isValidating:!0,isLoading:!0,...st}:st},le=N(),ve=A(),Te=se(le),qe=le===ve?Te:se(ve);let Ye=Te;return[()=>{const ze=se(N());return T(ze,Ye)?(Ye.data=ze.data,Ye.isLoading=ze.isLoading,Ye.isValidating=ze.isValidating,Ye.error=ze.error,Ye):(Ye=ze,ze)},()=>qe]},[r,b]),I=Hu.useSyncExternalStore(g.useCallback($=>R(b,(se,le)=>{T(le,se)||$()}),[r,b]),D[0],D[1]),L=!_.current,B=p[b]&&p[b].length>0,U=I.data,F=Je(U)?M:U,H=I.error,J=g.useRef(F),q=f?Je(U)?J.current:U:F,re=B&&!Je(H)?!1:L&&!Je(s)?s:O().isPaused()?!1:a?Je(F)?!1:c:Je(F)||c,Z=!!(b&&t&&L&&re),Y=Je(I.isValidating)?Z:I.isValidating,W=Je(I.isLoading)?Z:I.isLoading,G=g.useCallback(async $=>{const se=E.current;if(!b||!se||w.current||O().isPaused())return!1;let le,ve,Te=!0;const qe=$||{},Ye=!m[b]||!qe.dedupe,ze=()=>JM?!w.current&&b===j.current&&_.current:b===j.current,st={isValidating:!1,isLoading:!1},He=()=>{P(st)},ct=()=>{const St=m[b];St&&St[1]===ve&&delete m[b]},Ht={isValidating:!0};Je(N().data)&&(Ht.isLoading=!0);try{if(Ye&&(P(Ht),n.loadingTimeout&&Je(N().data)&&setTimeout(()=>{Te&&ze()&&O().onLoadingSlow(b,n)},n.loadingTimeout),m[b]=[se(x),Lg()]),[le,ve]=m[b],le=await le,Ye&&setTimeout(ct,n.dedupingInterval),!m[b]||m[b][1]!==ve)return Ye&&ze()&&O().onDiscarded(b),!1;st.error=fn;const St=y[b];if(!Je(St)&&(ve<=St[0]||ve<=St[1]||St[1]===0))return He(),Ye&&ze()&&O().onDiscarded(b),!1;const yt=N().data;st.data=o(yt,le)?yt:le,Ye&&ze()&&O().onSuccess(le,b,n)}catch(St){ct();const yt=O(),{shouldRetryOnError:Rt}=yt;yt.isPaused()||(st.error=St,Ye&&ze()&&(yt.onError(St,b,yt),(Rt===!0||dr(Rt)&&Rt(St))&&(!O().revalidateOnFocus||!O().revalidateOnReconnect||k())&&yt.onErrorRetry(St,b,yt,bn=>{const Sr=p[b];Sr&&Sr[0]&&Sr[0](Xc.ERROR_REVALIDATE_EVENT,bn)},{retryCount:(qe.retryCount||0)+1,dedupe:!0})))}return Te=!1,He(),!0},[b,r]),te=g.useCallback((...$)=>nk(r,j.current,...$),[]);if(Rg(()=>{E.current=t,S.current=n,Je(U)||(J.current=U)}),Rg(()=>{if(!b)return;const $=G.bind(fn,Fg);let se=0;const le=RY(b,p,(ve,Te={})=>{if(ve==Xc.FOCUS_EVENT){const qe=Date.now();O().revalidateOnFocus&&qe>se&&k()&&(se=qe+O().focusThrottleInterval,$())}else if(ve==Xc.RECONNECT_EVENT)O().revalidateOnReconnect&&k()&&$();else{if(ve==Xc.MUTATE_EVENT)return G();if(ve==Xc.ERROR_REVALIDATE_EVENT)return G(Te)}});return w.current=!1,j.current=b,_.current=!0,P({_k:x}),re&&(Je(F)||Kc?$():gY($)),()=>{w.current=!0,le()}},[b]),Rg(()=>{let $;function se(){const ve=dr(l)?l(N().data):l;ve&&$!==-1&&($=setTimeout(le,ve))}function le(){!N().error&&(u||O().isVisible())&&(d||O().isOnline())?G(Fg).then(se):se()}return se(),()=>{$&&(clearTimeout($),$=-1)}},[l,u,d,b]),g.useDebugValue(q),a&&Je(F)&&b){if(!JM&&Kc)throw new Error("Fallback data is required when using suspense in SSR.");E.current=t,S.current=n,w.current=!1;const $=v[b];if(!Je($)){const se=te($);ik(se)}if(Je(H)){const se=G(Fg);Je(q)||(se.status="fulfilled",se.value=!0),ik(se)}else throw H}return{mutate:te,get data(){return C.data=!0,q},get error(){return C.error=!0,H},get isValidating(){return C.isValidating=!0,Y},get isLoading(){return C.isLoading=!0,W}}},qd=TY(IY);var Bg,sk;function DY(){if(sk)return Bg;sk=1;function e(t,n){if(typeof t!="function")throw new TypeError(`Expected the first argument to be a \`function\`, got \`${typeof t}\`.`);let r,o=0;return function(...a){clearTimeout(r);const i=Date.now(),s=i-o,c=n-s;c<=0?(o=i,t.apply(this,a)):r=setTimeout(()=>{o=Date.now(),t.apply(this,a)},c)}}return Bg=e,Bg}var LY=DY();const FY=Xe(LY);function ck(e,t){return t!=null?FY(e,t):e}var BY=async(e,t,n,r,o,a,i,s,c,l,u,d,f,p,y,m,v)=>{var b;const x=i.current;n(t.messages,!1);const _=p?t.messages:t.messages.map(({role:j,content:E,experimental_attachments:S,data:O,annotations:k,toolInvocations:N})=>({role:j,content:E,...S!==void 0&&{experimental_attachments:S},...O!==void 0&&{data:O},...k!==void 0&&{annotations:k},...N!==void 0&&{toolInvocations:N}})),w=o.current;return await sY({api:e,body:(b=y==null?void 0:y({messages:t.messages,requestData:t.data,requestBody:t.body}))!=null?b:{messages:_,data:t.data,...a.current.body,...t.body},streamProtocol:l,credentials:a.current.credentials,headers:{...a.current.headers,...t.headers},abortController:()=>s.current,restoreMessagesOnFailure(){v||n(x,!1)},onResponse:d,onUpdate(j,E){n([...t.messages,...j],!1),E!=null&&E.length&&r([...w??[],...E],!1)},onToolCall:f,onFinish:u,generateId:c,fetch:m})};function $Y({api:e="/api/chat",id:t,initialMessages:n,initialInput:r="",sendExtraMessageFields:o,onToolCall:a,experimental_prepareRequestBody:i,maxSteps:s=1,streamProtocol:c="data",onResponse:l,onFinish:u,onError:d,credentials:f,headers:p,body:y,generateId:m=UM,fetch:v,keepLastMessageOnError:b=!0,experimental_throttle:x}={}){const _=g.useId(),w=t??_,j=typeof e=="string"?[e,w]:w,[E]=g.useState([]),{data:S,mutate:O}=qd([j,"messages"],null,{fallbackData:n??E}),k=g.useRef(S||[]);g.useEffect(()=>{k.current=S||[]},[S]);const{data:N,mutate:P}=qd([j,"streamData"],null),R=g.useRef(N);g.useEffect(()=>{R.current=N},[N]);const{data:A=!1,mutate:C}=qd([j,"loading"],null),{data:M=void 0,mutate:T}=qd([j,"error"],null),D=g.useRef(null),I=g.useRef({credentials:f,headers:p,body:y});g.useEffect(()=>{I.current={credentials:f,headers:p,body:y}},[f,p,y]);const L=g.useCallback(async Y=>{const W=k.current.length;try{C(!0),T(void 0);const $=new AbortController;D.current=$,await BY(e,Y,ck(O,x),ck(P,x),R,I,k,D,m,c,u,l,a,o,i,v,b),D.current=null}catch($){if($.name==="AbortError")return D.current=null,null;d&&$ instanceof Error&&d($),T($)}finally{C(!1)}const G=k.current,te=G[G.length-1];G.length>W&&te!=null&&s>1&&lk(te)&&zY(G)<s&&await L({messages:G})},[O,C,e,I,l,u,d,T,P,R,c,o,i,a,s,k,D,m,v,b,x]),B=g.useCallback(async(Y,{data:W,headers:G,body:te,experimental_attachments:$}={})=>{var se,le;Y.id||(Y.id=m());const ve=await uk($),Te=k.current.concat({...Y,id:(se=Y.id)!=null?se:m(),createdAt:(le=Y.createdAt)!=null?le:new Date,experimental_attachments:ve.length>0?ve:void 0});return L({messages:Te,headers:G,body:te,data:W})},[L,m]),U=g.useCallback(async({data:Y,headers:W,body:G}={})=>{const te=k.current;if(te.length===0)return null;const $=te[te.length-1];return L({messages:$.role==="assistant"?te.slice(0,-1):te,headers:W,body:G,data:Y})},[L]),F=g.useCallback(()=>{D.current&&(D.current.abort(),D.current=null)},[]),H=g.useCallback(Y=>{typeof Y=="function"&&(Y=Y(k.current)),O(Y,!1),k.current=Y},[O]),J=g.useCallback(Y=>{typeof Y=="function"&&(Y=Y(R.current)),P(Y,!1),R.current=Y},[P]),[q,re]=g.useState(r),Z=g.useCallback(async(Y,W={},G)=>{var te;if((te=Y==null?void 0:Y.preventDefault)==null||te.call(Y),!q&&!W.allowEmptySubmit)return;G&&(I.current={...I.current,...G});const $=await uk(W.experimental_attachments),se={messages:!q&&!$.length&&W.allowEmptySubmit?k.current:k.current.concat({id:m(),createdAt:new Date,role:"user",content:q,experimental_attachments:$.length>0?$:void 0}),headers:W.headers,body:W.body,data:W.data};L(se),re("")},[q,m,L]);return{messages:S||[],setMessages:H,data:N,setData:J,error:M,append:B,reload:U,stop:F,input:q,setInput:re,handleInputChange:Y=>{re(Y.target.value)},handleSubmit:Z,isLoading:A,addToolResult:({toolCallId:Y,result:W})=>{const G=k.current.map(($,se,le)=>se===le.length-1&&$.role==="assistant"&&$.toolInvocations?{...$,toolInvocations:$.toolInvocations.map(ve=>ve.toolCallId===Y?{...ve,result:W,state:"result"}:ve)}:$);O(G,!1);const te=G[G.length-1];lk(te)&&L({messages:G})}}}function lk(e){return e.role==="assistant"&&e.toolInvocations&&e.toolInvocations.length>0&&e.toolInvocations.every(t=>"result"in t)}function zY(e){let t=0;for(let n=e.length-1;n>=0&&e[n].role==="assistant";n--)t++;return t}async function uk(e){if(e==null)return[];if(e instanceof FileList)return Promise.all(Array.from(e).map(async t=>{const{name:n,type:r}=t,o=await new Promise((a,i)=>{const s=new FileReader;s.onload=c=>{var l;a((l=c.target)==null?void 0:l.result)},s.onerror=c=>i(c),s.readAsDataURL(t)});return{name:n,contentType:r,url:o}}));if(Array.isArray(e))return e;throw new Error("Invalid attachments type")}cS=$Y;const lo=g.forwardRef(({className:e,...t},n)=>h.jsx("textarea",{className:K("flex min-h-[100px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-0 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...t}));lo.displayName="Textarea";function VY({minHeight:e,maxHeight:t}){const n=g.useRef(null),r=g.useCallback(o=>{const a=n.current;if(!a)return;if(o){a.style.height=`${e}px`;return}a.style.height=`${e}px`;const i=Math.max(e,Math.min(a.scrollHeight,t??Number.POSITIVE_INFINITY));a.style.height=`${i}px`},[e,t]);return g.useEffect(()=>{const o=n.current;o&&(o.style.height=`${e}px`)},[e]),g.useEffect(()=>{const o=()=>r();return window.addEventListener("resize",o),()=>window.removeEventListener("resize",o)},[r]),{textareaRef:n,adjustHeight:r}}const UY=48,dk=164;function fk({onSubmit:e,disabled:t,enableTool:n,enableFile:r,placeholder:o,minHeight:a,maxHeight:i,className:s,onChange:c,value:l}){const[u,d]=g.useState(!1),[f,p]=g.useState(""),{textareaRef:y,adjustHeight:m}=VY({minHeight:a||UY,maxHeight:i||dk}),[v,b]=g.useState(!0),x=async _=>{try{d(!0),await e(f,_)}finally{d(!1)}};return h.jsx("div",{className:K("w-full py-4 max-w-xl",s),children:h.jsx("div",{className:"relative w-full mx-auto",children:h.jsxs("div",{className:"relative flex flex-col",children:[h.jsx("div",{className:"overflow-y-auto",style:{maxHeight:`${i||dk}px`},children:h.jsx(lo,{id:"ai-input-04",value:(c?l:f)||"",disabled:t||u,placeholder:o,className:"w-full rounded-xl rounded-b-none px-4 py-3 bg-black/5 dark:bg-white/5 border-none dark:text-white placeholder:text-black/70 dark:placeholder:text-white/70 resize-none focus-visible:ring-0 leading-[1.2]",ref:y,onKeyDown:_=>{_.key==="Enter"&&!_.shiftKey&&(_.preventDefault(),x(_))},onChange:_=>{c||p(_.target.value),m(),c==null||c(_)}})}),h.jsxs("div",{className:"h-12 bg-black/5 dark:bg-white/5 rounded-b-xl",children:[h.jsxs("div",{className:"absolute left-3 bottom-3 flex items-center gap-2",children:[r?h.jsxs("label",{className:"cursor-pointer rounded-lg p-2 bg-black/5 dark:bg-white/5",children:[h.jsx("input",{type:"file",className:"hidden"}),h.jsx(ue,{name:"paperclip",className:"w-4 h-4 text-black/40 dark:text-white/40 hover:text-black dark:hover:text-white transition-colors"})]}):void 0,n?h.jsxs("button",{type:"button",onClick:()=>{b(!v)},className:K("rounded-full transition-all flex items-center gap-2 px-1.5 py-1 border h-8",v?"bg-sky-500/15 border-sky-400 text-sky-500":"bg-black/5 dark:bg-white/5 border-transparent text-black/40 dark:text-white/40 hover:text-black dark:hover:text-white"),children:[h.jsx("div",{className:"w-4 h-4 flex items-center justify-center flex-shrink-0",children:h.jsx(Iu.div,{animate:{rotate:v?180:0,scale:v?1.1:1},whileHover:{rotate:v?180:15,scale:1.1,transition:{type:"spring",stiffness:300,damping:10}},transition:{type:"spring",stiffness:260,damping:25},children:h.jsx(ue,{name:"globe",className:K("w-4 h-4",v?"text-sky-500":"text-inherit")})})}),h.jsx(cz,{children:v&&h.jsx(Iu.span,{initial:{width:0,opacity:0},animate:{width:"auto",opacity:1},exit:{width:0,opacity:0},transition:{duration:.2},className:"text-sm overflow-hidden whitespace-nowrap text-sky-500 flex-shrink-0",children:"Search"})})]}):void 0]}),h.jsx("div",{className:"absolute right-3 bottom-3",children:h.jsx("button",{type:"button",disabled:t||u,onClick:_=>{x(_)},className:K("rounded-lg p-2",c&&l||f?"bg-sky-500/15 text-sky-500":"bg-black/5 dark:bg-white/5 text-black/40 dark:text-white/40 hover:text-black dark:hover:text-white"),children:h.jsx(ue,{name:"send",className:"w-4 h-4"})})})]})]})})})}var $g,pk;function HY(){if(pk)return $g;pk=1;function e(){this.__data__=[],this.size=0}return $g=e,$g}var zg,hk;ec=function(){if(hk)return zg;hk=1;function e(t,n){return t===n||t!==t&&n!==n}return zg=e,zg};var Vg,mk;function Yd(){if(mk)return Vg;mk=1;var e=ec();function t(n,r){for(var o=n.length;o--;)if(e(n[o][0],r))return o;return-1}return Vg=t,Vg}var Ug,yk;function WY(){if(yk)return Ug;yk=1;var e=Yd(),t=Array.prototype,n=t.splice;function r(o){var a=this.__data__,i=e(a,o);if(i<0)return!1;var s=a.length-1;return i==s?a.pop():n.call(a,i,1),--this.size,!0}return Ug=r,Ug}var Hg,gk;function qY(){if(gk)return Hg;gk=1;var e=Yd();function t(n){var r=this.__data__,o=e(r,n);return o<0?void 0:r[o][1]}return Hg=t,Hg}var Wg,vk;function YY(){if(vk)return Wg;vk=1;var e=Yd();function t(n){return e(this.__data__,n)>-1}return Wg=t,Wg}var qg,bk;function KY(){if(bk)return qg;bk=1;var e=Yd();function t(n,r){var o=this.__data__,a=e(o,n);return a<0?(++this.size,o.push([n,r])):o[a][1]=r,this}return qg=t,qg}var Yg,xk;function Kd(){if(xk)return Yg;xk=1;var e=HY(),t=WY(),n=qY(),r=YY(),o=KY();function a(i){var s=-1,c=i==null?0:i.length;for(this.clear();++s<c;){var l=i[s];this.set(l[0],l[1])}}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=n,a.prototype.has=r,a.prototype.set=o,Yg=a,Yg}var Kg,wk;function XY(){if(wk)return Kg;wk=1;var e=Kd();function t(){this.__data__=new e,this.size=0}return Kg=t,Kg}var Xg,_k;function QY(){if(_k)return Xg;_k=1;function e(t){var n=this.__data__,r=n.delete(t);return this.size=n.size,r}return Xg=e,Xg}var Qg,jk;function JY(){if(jk)return Qg;jk=1;function e(t){return this.__data__.get(t)}return Qg=e,Qg}var Jg,Ek;function GY(){if(Ek)return Jg;Ek=1;function e(t){return this.__data__.has(t)}return Jg=e,Jg}var Gg,Sk;function Ck(){if(Sk)return Gg;Sk=1;var e=typeof Js=="object"&&Js&&Js.Object===Object&&Js;return Gg=e,Gg}var Zg,Ok;rr=function(){if(Ok)return Zg;Ok=1;var e=Ck(),t=typeof self=="object"&&self&&self.Object===Object&&self,n=e||t||Function("return this")();return Zg=n,Zg};var ev,Nk;hi=function(){if(Nk)return ev;Nk=1;var e=rr(),t=e.Symbol;return ev=t,ev};var tv,Mk;function ZY(){if(Mk)return tv;Mk=1;var e=hi(),t=Object.prototype,n=t.hasOwnProperty,r=t.toString,o=e?e.toStringTag:void 0;function a(i){var s=n.call(i,o),c=i[o];try{i[o]=void 0;var l=!0}catch{}var u=r.call(i);return l&&(s?i[o]=c:delete i[o]),u}return tv=a,tv}var nv,kk;function eK(){if(kk)return nv;kk=1;var e=Object.prototype,t=e.toString;function n(r){return t.call(r)}return nv=n,nv}var rv,Pk;function uo(){if(Pk)return rv;Pk=1;var e=hi(),t=ZY(),n=eK(),r="[object Null]",o="[object Undefined]",a=e?e.toStringTag:void 0;function i(s){return s==null?s===void 0?o:r:a&&a in Object(s)?t(s):n(s)}return rv=i,rv}var ov,Ak;or=function(){if(Ak)return ov;Ak=1;function e(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}return ov=e,ov};var av,Tk;Vu=function(){if(Tk)return av;Tk=1;var e=uo(),t=or(),n="[object AsyncFunction]",r="[object Function]",o="[object GeneratorFunction]",a="[object Proxy]";function i(s){if(!t(s))return!1;var c=e(s);return c==r||c==o||c==n||c==a}return av=i,av};var iv,Rk;function tK(){if(Rk)return iv;Rk=1;var e=rr(),t=e["__core-js_shared__"];return iv=t,iv}var sv,Ik;function nK(){if(Ik)return sv;Ik=1;var e=tK(),t=function(){var r=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function n(r){return!!t&&t in r}return sv=n,sv}var cv,Dk;function Lk(){if(Dk)return cv;Dk=1;var e=Function.prototype,t=e.toString;function n(r){if(r!=null){try{return t.call(r)}catch{}try{return r+""}catch{}}return""}return cv=n,cv}var lv,Fk;function rK(){if(Fk)return lv;Fk=1;var e=Vu(),t=nK(),n=or(),r=Lk(),o=/[\\^$.*+?()[\]{}|]/g,a=/^\[object .+?Constructor\]$/,i=Function.prototype,s=Object.prototype,c=i.toString,l=s.hasOwnProperty,u=RegExp("^"+c.call(l).replace(o,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function d(f){if(!n(f)||t(f))return!1;var p=e(f)?u:a;return p.test(r(f))}return lv=d,lv}var uv,Bk;function oK(){if(Bk)return uv;Bk=1;function e(t,n){return t==null?void 0:t[n]}return uv=e,uv}var dv,$k;function ka(){if($k)return dv;$k=1;var e=rK(),t=oK();function n(r,o){var a=t(r,o);return e(a)?a:void 0}return dv=n,dv}var fv,zk;function pv(){if(zk)return fv;zk=1;var e=ka(),t=rr(),n=e(t,"Map");return fv=n,fv}var hv,Vk;function Xd(){if(Vk)return hv;Vk=1;var e=ka(),t=e(Object,"create");return hv=t,hv}var mv,Uk;function aK(){if(Uk)return mv;Uk=1;var e=Xd();function t(){this.__data__=e?e(null):{},this.size=0}return mv=t,mv}var yv,Hk;function iK(){if(Hk)return yv;Hk=1;function e(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}return yv=e,yv}var gv,Wk;function sK(){if(Wk)return gv;Wk=1;var e=Xd(),t="__lodash_hash_undefined__",n=Object.prototype,r=n.hasOwnProperty;function o(a){var i=this.__data__;if(e){var s=i[a];return s===t?void 0:s}return r.call(i,a)?i[a]:void 0}return gv=o,gv}var vv,qk;function cK(){if(qk)return vv;qk=1;var e=Xd(),t=Object.prototype,n=t.hasOwnProperty;function r(o){var a=this.__data__;return e?a[o]!==void 0:n.call(a,o)}return vv=r,vv}var bv,Yk;function lK(){if(Yk)return bv;Yk=1;var e=Xd(),t="__lodash_hash_undefined__";function n(r,o){var a=this.__data__;return this.size+=this.has(r)?0:1,a[r]=e&&o===void 0?t:o,this}return bv=n,bv}var xv,Kk;function uK(){if(Kk)return xv;Kk=1;var e=aK(),t=iK(),n=sK(),r=cK(),o=lK();function a(i){var s=-1,c=i==null?0:i.length;for(this.clear();++s<c;){var l=i[s];this.set(l[0],l[1])}}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=n,a.prototype.has=r,a.prototype.set=o,xv=a,xv}var wv,Xk;function dK(){if(Xk)return wv;Xk=1;var e=uK(),t=Kd(),n=pv();function r(){this.size=0,this.__data__={hash:new e,map:new(n||t),string:new e}}return wv=r,wv}var _v,Qk;function fK(){if(Qk)return _v;Qk=1;function e(t){var n=typeof t;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?t!=="__proto__":t===null}return _v=e,_v}var jv,Jk;function Qd(){if(Jk)return jv;Jk=1;var e=fK();function t(n,r){var o=n.__data__;return e(r)?o[typeof r=="string"?"string":"hash"]:o.map}return jv=t,jv}var Ev,Gk;function pK(){if(Gk)return Ev;Gk=1;var e=Qd();function t(n){var r=e(this,n).delete(n);return this.size-=r?1:0,r}return Ev=t,Ev}var Sv,Zk;function hK(){if(Zk)return Sv;Zk=1;var e=Qd();function t(n){return e(this,n).get(n)}return Sv=t,Sv}var Cv,eP;function mK(){if(eP)return Cv;eP=1;var e=Qd();function t(n){return e(this,n).has(n)}return Cv=t,Cv}var Ov,tP;function yK(){if(tP)return Ov;tP=1;var e=Qd();function t(n,r){var o=e(this,n),a=o.size;return o.set(n,r),this.size+=o.size==a?0:1,this}return Ov=t,Ov}var Nv,nP;function Mv(){if(nP)return Nv;nP=1;var e=dK(),t=pK(),n=hK(),r=mK(),o=yK();function a(i){var s=-1,c=i==null?0:i.length;for(this.clear();++s<c;){var l=i[s];this.set(l[0],l[1])}}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=n,a.prototype.has=r,a.prototype.set=o,Nv=a,Nv}var kv,rP;function gK(){if(rP)return kv;rP=1;var e=Kd(),t=pv(),n=Mv(),r=200;function o(a,i){var s=this.__data__;if(s instanceof e){var c=s.__data__;if(!t||c.length<r-1)return c.push([a,i]),this.size=++s.size,this;s=this.__data__=new n(c)}return s.set(a,i),this.size=s.size,this}return kv=o,kv}var Pv,oP;qm=function(){if(oP)return Pv;oP=1;var e=Kd(),t=XY(),n=QY(),r=JY(),o=GY(),a=gK();function i(s){var c=this.__data__=new e(s);this.size=c.size}return i.prototype.clear=t,i.prototype.delete=n,i.prototype.get=r,i.prototype.has=o,i.prototype.set=a,Pv=i,Pv};var Av,aP;function vK(){if(aP)return Av;aP=1;var e="__lodash_hash_undefined__";function t(n){return this.__data__.set(n,e),this}return Av=t,Av}var Tv,iP;function bK(){if(iP)return Tv;iP=1;function e(t){return this.__data__.has(t)}return Tv=e,Tv}var Rv,sP;function cP(){if(sP)return Rv;sP=1;var e=Mv(),t=vK(),n=bK();function r(o){var a=-1,i=o==null?0:o.length;for(this.__data__=new e;++a<i;)this.add(o[a])}return r.prototype.add=r.prototype.push=t,r.prototype.has=n,Rv=r,Rv}var Iv,lP;function uP(){if(lP)return Iv;lP=1;function e(t,n){for(var r=-1,o=t==null?0:t.length;++r<o;)if(n(t[r],r,t))return!0;return!1}return Iv=e,Iv}var Dv,dP;function fP(){if(dP)return Dv;dP=1;function e(t,n){return t.has(n)}return Dv=e,Dv}var Lv,pP;function hP(){if(pP)return Lv;pP=1;var e=cP(),t=uP(),n=fP(),r=1,o=2;function a(i,s,c,l,u,d){var f=c&r,p=i.length,y=s.length;if(p!=y&&!(f&&y>p))return!1;var m=d.get(i),v=d.get(s);if(m&&v)return m==s&&v==i;var b=-1,x=!0,_=c&o?new e:void 0;for(d.set(i,s),d.set(s,i);++b<p;){var w=i[b],j=s[b];if(l)var E=f?l(j,w,b,s,i,d):l(w,j,b,i,s,d);if(E!==void 0){if(E)continue;x=!1;break}if(_){if(!t(s,function(S,O){if(!n(_,O)&&(w===S||u(w,S,c,l,d)))return _.push(O)})){x=!1;break}}else if(!(w===j||u(w,j,c,l,d))){x=!1;break}}return d.delete(i),d.delete(s),x}return Lv=a,Lv}var Fv,mP;gS=function(){if(mP)return Fv;mP=1;var e=rr(),t=e.Uint8Array;return Fv=t,Fv};var Bv,yP;function xK(){if(yP)return Bv;yP=1;function e(t){var n=-1,r=Array(t.size);return t.forEach(function(o,a){r[++n]=[a,o]}),r}return Bv=e,Bv}var $v,gP;function zv(){if(gP)return $v;gP=1;function e(t){var n=-1,r=Array(t.size);return t.forEach(function(o){r[++n]=o}),r}return $v=e,$v}var Vv,vP;function wK(){if(vP)return Vv;vP=1;var e=hi(),t=gS(),n=ec(),r=hP(),o=xK(),a=zv(),i=1,s=2,c="[object Boolean]",l="[object Date]",u="[object Error]",d="[object Map]",f="[object Number]",p="[object RegExp]",y="[object Set]",m="[object String]",v="[object Symbol]",b="[object ArrayBuffer]",x="[object DataView]",_=e?e.prototype:void 0,w=_?_.valueOf:void 0;function j(E,S,O,k,N,P,R){switch(O){case x:if(E.byteLength!=S.byteLength||E.byteOffset!=S.byteOffset)return!1;E=E.buffer,S=S.buffer;case b:return!(E.byteLength!=S.byteLength||!P(new t(E),new t(S)));case c:case l:case f:return n(+E,+S);case u:return E.name==S.name&&E.message==S.message;case p:case m:return E==S+"";case d:var A=o;case y:var C=k&i;if(A||(A=a),E.size!=S.size&&!C)return!1;var M=R.get(E);if(M)return M==S;k|=s,R.set(E,S);var T=r(A(E),A(S),k,N,P,R);return R.delete(E),T;case v:if(w)return w.call(E)==w.call(S)}return!1}return Vv=j,Vv}var Uv,bP;function Hv(){if(bP)return Uv;bP=1;function e(t,n){for(var r=-1,o=n.length,a=t.length;++r<o;)t[a+r]=n[r];return t}return Uv=e,Uv}var Wv,xP;un=function(){if(xP)return Wv;xP=1;var e=Array.isArray;return Wv=e,Wv};var qv,wP;function _P(){if(wP)return qv;wP=1;var e=Hv(),t=un();function n(r,o,a){var i=o(r);return t(r)?i:e(i,a(r))}return qv=n,qv}var Yv,jP;function _K(){if(jP)return Yv;jP=1;function e(t,n){for(var r=-1,o=t==null?0:t.length,a=0,i=[];++r<o;){var s=t[r];n(s,r,t)&&(i[a++]=s)}return i}return Yv=e,Yv}var Kv,EP;function SP(){if(EP)return Kv;EP=1;function e(){return[]}return Kv=e,Kv}var Xv,CP;Vm=function(){if(CP)return Xv;CP=1;var e=_K(),t=SP(),n=Object.prototype,r=n.propertyIsEnumerable,o=Object.getOwnPropertySymbols,a=o?function(i){return i==null?[]:(i=Object(i),e(o(i),function(s){return r.call(i,s)}))}:t;return Xv=a,Xv};var Qv,OP;function jK(){if(OP)return Qv;OP=1;function e(t,n){for(var r=-1,o=Array(t);++r<t;)o[r]=n(r);return o}return Qv=e,Qv}var Jv,NP;Nr=function(){if(NP)return Jv;NP=1;function e(t){return t!=null&&typeof t=="object"}return Jv=e,Jv};var Gv,MP;function EK(){if(MP)return Gv;MP=1;var e=uo(),t=Nr(),n="[object Arguments]";function r(o){return t(o)&&e(o)==n}return Gv=r,Gv}var Zv,kP;zu=function(){if(kP)return Zv;kP=1;var e=EK(),t=Nr(),n=Object.prototype,r=n.hasOwnProperty,o=n.propertyIsEnumerable,a=e(function(){return arguments}())?e:function(i){return t(i)&&r.call(i,"callee")&&!o.call(i,"callee")};return Zv=a,Zv};var Jd={exports:{}},e0,PP;function SK(){if(PP)return e0;PP=1;function e(){return!1}return e0=e,e0}Jd.exports;var AP;Ym=function(){return AP||(AP=1,function(e,t){var n=rr(),r=SK(),o=t&&!t.nodeType&&t,a=o&&!0&&e&&!e.nodeType&&e,i=a&&a.exports===o,s=i?n.Buffer:void 0,c=s?s.isBuffer:void 0,l=c||r;e.exports=l}(Jd,Jd.exports)),Jd.exports};var t0,TP;function Gd(){if(TP)return t0;TP=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function n(r,o){var a=typeof r;return o=o??e,!!o&&(a=="number"||a!="symbol"&&t.test(r))&&r>-1&&r%1==0&&r<o}return t0=n,t0}var n0,RP;function r0(){if(RP)return n0;RP=1;var e=9007199254740991;function t(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=e}return n0=t,n0}var o0,IP;function CK(){if(IP)return o0;IP=1;var e=uo(),t=r0(),n=Nr(),r="[object Arguments]",o="[object Array]",a="[object Boolean]",i="[object Date]",s="[object Error]",c="[object Function]",l="[object Map]",u="[object Number]",d="[object Object]",f="[object RegExp]",p="[object Set]",y="[object String]",m="[object WeakMap]",v="[object ArrayBuffer]",b="[object DataView]",x="[object Float32Array]",_="[object Float64Array]",w="[object Int8Array]",j="[object Int16Array]",E="[object Int32Array]",S="[object Uint8Array]",O="[object Uint8ClampedArray]",k="[object Uint16Array]",N="[object Uint32Array]",P={};P[x]=P[_]=P[w]=P[j]=P[E]=P[S]=P[O]=P[k]=P[N]=!0,P[r]=P[o]=P[v]=P[a]=P[b]=P[i]=P[s]=P[c]=P[l]=P[u]=P[d]=P[f]=P[p]=P[y]=P[m]=!1;function R(A){return n(A)&&t(A.length)&&!!P[e(A)]}return o0=R,o0}var a0,DP;Wm=function(){if(DP)return a0;DP=1;function e(t){return function(n){return t(n)}}return a0=e,a0};var Zd={exports:{}};Zd.exports;var LP;bS=function(){return LP||(LP=1,function(e,t){var n=Ck(),r=t&&!t.nodeType&&t,o=r&&!0&&e&&!e.nodeType&&e,a=o&&o.exports===r,i=a&&n.process,s=function(){try{var c=o&&o.require&&o.require("util").types;return c||i&&i.binding&&i.binding("util")}catch{}}();e.exports=s}(Zd,Zd.exports)),Zd.exports};var i0,FP;Xh=function(){if(FP)return i0;FP=1;var e=CK(),t=Wm(),n=bS(),r=n&&n.isTypedArray,o=r?t(r):e;return i0=o,i0};var s0,BP;function $P(){if(BP)return s0;BP=1;var e=jK(),t=zu(),n=un(),r=Ym(),o=Gd(),a=Xh(),i=Object.prototype,s=i.hasOwnProperty;function c(l,u){var d=n(l),f=!d&&t(l),p=!d&&!f&&r(l),y=!d&&!f&&!p&&a(l),m=d||f||p||y,v=m?e(l.length,String):[],b=v.length;for(var x in l)(u||s.call(l,x))&&!(m&&(x=="length"||p&&(x=="offset"||x=="parent")||y&&(x=="buffer"||x=="byteLength"||x=="byteOffset")||o(x,b)))&&v.push(x);return v}return s0=c,s0}var c0,zP;Hm=function(){if(zP)return c0;zP=1;var e=Object.prototype;function t(n){var r=n&&n.constructor,o=typeof r=="function"&&r.prototype||e;return n===o}return c0=t,c0};var l0,VP;function UP(){if(VP)return l0;VP=1;function e(t,n){return function(r){return t(n(r))}}return l0=e,l0}var u0,HP;function OK(){if(HP)return u0;HP=1;var e=UP(),t=e(Object.keys,Object);return u0=t,u0}var d0,WP;function NK(){if(WP)return d0;WP=1;var e=Hm(),t=OK(),n=Object.prototype,r=n.hasOwnProperty;function o(a){if(!e(a))return t(a);var i=[];for(var s in Object(a))r.call(a,s)&&s!="constructor"&&i.push(s);return i}return d0=o,d0}var f0,qP;ga=function(){if(qP)return f0;qP=1;var e=Vu(),t=r0();function n(r){return r!=null&&t(r.length)&&!e(r)}return f0=n,f0};var p0,YP;ac=function(){if(YP)return p0;YP=1;var e=$P(),t=NK(),n=ga();function r(o){return n(o)?e(o):t(o)}return p0=r,p0};var h0,KP;xS=function(){if(KP)return h0;KP=1;var e=_P(),t=Vm(),n=ac();function r(o){return e(o,n,t)}return h0=r,h0};var m0,XP;function MK(){if(XP)return m0;XP=1;var e=xS(),t=1,n=Object.prototype,r=n.hasOwnProperty;function o(a,i,s,c,l,u){var d=s&t,f=e(a),p=f.length,y=e(i),m=y.length;if(p!=m&&!d)return!1;for(var v=p;v--;){var b=f[v];if(!(d?b in i:r.call(i,b)))return!1}var x=u.get(a),_=u.get(i);if(x&&_)return x==i&&_==a;var w=!0;u.set(a,i),u.set(i,a);for(var j=d;++v<p;){b=f[v];var E=a[b],S=i[b];if(c)var O=d?c(S,E,b,i,a,u):c(E,S,b,a,i,u);if(!(O===void 0?E===S||l(E,S,s,c,u):O)){w=!1;break}j||(j=b=="constructor")}if(w&&!j){var k=a.constructor,N=i.constructor;k!=N&&"constructor"in a&&"constructor"in i&&!(typeof k=="function"&&k instanceof k&&typeof N=="function"&&N instanceof N)&&(w=!1)}return u.delete(a),u.delete(i),w}return m0=o,m0}var y0,QP;function kK(){if(QP)return y0;QP=1;var e=ka(),t=rr(),n=e(t,"DataView");return y0=n,y0}var g0,JP;function PK(){if(JP)return g0;JP=1;var e=ka(),t=rr(),n=e(t,"Promise");return g0=n,g0}var v0,GP;function ZP(){if(GP)return v0;GP=1;var e=ka(),t=rr(),n=e(t,"Set");return v0=n,v0}var b0,eA;function AK(){if(eA)return b0;eA=1;var e=ka(),t=rr(),n=e(t,"WeakMap");return b0=n,b0}var x0,tA;vS=function(){if(tA)return x0;tA=1;var e=kK(),t=pv(),n=PK(),r=ZP(),o=AK(),a=uo(),i=Lk(),s="[object Map]",c="[object Object]",l="[object Promise]",u="[object Set]",d="[object WeakMap]",f="[object DataView]",p=i(e),y=i(t),m=i(n),v=i(r),b=i(o),x=a;return(e&&x(new e(new ArrayBuffer(1)))!=f||t&&x(new t)!=s||n&&x(n.resolve())!=l||r&&x(new r)!=u||o&&x(new o)!=d)&&(x=function(_){var w=a(_),j=w==c?_.constructor:void 0,E=j?i(j):"";if(E)switch(E){case p:return f;case y:return s;case m:return l;case v:return u;case b:return d}return w}),x0=x,x0};var w0,nA;function TK(){if(nA)return w0;nA=1;var e=qm(),t=hP(),n=wK(),r=MK(),o=vS(),a=un(),i=Ym(),s=Xh(),c=1,l="[object Arguments]",u="[object Array]",d="[object Object]",f=Object.prototype,p=f.hasOwnProperty;function y(m,v,b,x,_,w){var j=a(m),E=a(v),S=j?u:o(m),O=E?u:o(v);S=S==l?d:S,O=O==l?d:O;var k=S==d,N=O==d,P=S==O;if(P&&i(m)){if(!i(v))return!1;j=!0,k=!1}if(P&&!k)return w||(w=new e),j||s(m)?t(m,v,b,x,_,w):n(m,v,S,b,x,_,w);if(!(b&c)){var R=k&&p.call(m,"__wrapped__"),A=N&&p.call(v,"__wrapped__");if(R||A){var C=R?m.value():m,M=A?v.value():v;return w||(w=new e),_(C,M,b,x,w)}}return P?(w||(w=new e),r(m,v,b,x,_,w)):!1}return w0=y,w0}var _0,rA;function j0(){if(rA)return _0;rA=1;var e=TK(),t=Nr();function n(r,o,a,i,s){return r===o?!0:r==null||o==null||!t(r)&&!t(o)?r!==r&&o!==o:e(r,o,a,i,n,s)}return _0=n,_0}var E0,oA;function RK(){if(oA)return E0;oA=1;var e=qm(),t=j0(),n=1,r=2;function o(a,i,s,c){var l=s.length,u=l,d=!c;if(a==null)return!u;for(a=Object(a);l--;){var f=s[l];if(d&&f[2]?f[1]!==a[f[0]]:!(f[0]in a))return!1}for(;++l<u;){f=s[l];var p=f[0],y=a[p],m=f[1];if(d&&f[2]){if(y===void 0&&!(p in a))return!1}else{var v=new e;if(c)var b=c(y,m,p,a,i,v);if(!(b===void 0?t(m,y,n|r,c,v):b))return!1}}return!0}return E0=o,E0}var S0,aA;function iA(){if(aA)return S0;aA=1;var e=or();function t(n){return n===n&&!e(n)}return S0=t,S0}var C0,sA;function IK(){if(sA)return C0;sA=1;var e=iA(),t=ac();function n(r){for(var o=t(r),a=o.length;a--;){var i=o[a],s=r[i];o[a]=[i,s,e(s)]}return o}return C0=n,C0}var O0,cA;function lA(){if(cA)return O0;cA=1;function e(t,n){return function(r){return r==null?!1:r[t]===n&&(n!==void 0||t in Object(r))}}return O0=e,O0}var N0,uA;function DK(){if(uA)return N0;uA=1;var e=RK(),t=IK(),n=lA();function r(o){var a=t(o);return a.length==1&&a[0][2]?n(a[0][0],a[0][1]):function(i){return i===o||e(i,o,a)}}return N0=r,N0}var M0,dA;function Bi(){if(dA)return M0;dA=1;var e=uo(),t=Nr(),n="[object Symbol]";function r(o){return typeof o=="symbol"||t(o)&&e(o)==n}return M0=r,M0}var k0,fA;function P0(){if(fA)return k0;fA=1;var e=un(),t=Bi(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function o(a,i){if(e(a))return!1;var s=typeof a;return s=="number"||s=="symbol"||s=="boolean"||a==null||t(a)?!0:r.test(a)||!n.test(a)||i!=null&&a in Object(i)}return k0=o,k0}var A0,pA;function hA(){if(pA)return A0;pA=1;var e=Mv(),t="Expected a function";function n(r,o){if(typeof r!="function"||o!=null&&typeof o!="function")throw new TypeError(t);var a=function(){var i=arguments,s=o?o.apply(this,i):i[0],c=a.cache;if(c.has(s))return c.get(s);var l=r.apply(this,i);return a.cache=c.set(s,l)||c,l};return a.cache=new(n.Cache||e),a}return n.Cache=e,A0=n,A0}var T0,mA;function LK(){if(mA)return T0;mA=1;var e=hA(),t=500;function n(r){var o=e(r,function(i){return a.size===t&&a.clear(),i}),a=o.cache;return o}return T0=n,T0}var R0,yA;function FK(){if(yA)return R0;yA=1;var e=LK(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,r=e(function(o){var a=[];return o.charCodeAt(0)===46&&a.push(""),o.replace(t,function(i,s,c,l){a.push(c?l.replace(n,"$1"):s||i)}),a});return R0=r,R0}var I0,gA;Zs=function(){if(gA)return I0;gA=1;function e(t,n){for(var r=-1,o=t==null?0:t.length,a=Array(o);++r<o;)a[r]=n(t[r],r,t);return a}return I0=e,I0};var D0,vA;function BK(){if(vA)return D0;vA=1;var e=hi(),t=Zs(),n=un(),r=Bi(),o=1/0,a=e?e.prototype:void 0,i=a?a.toString:void 0;function s(c){if(typeof c=="string")return c;if(n(c))return t(c,s)+"";if(r(c))return i?i.call(c):"";var l=c+"";return l=="0"&&1/c==-o?"-0":l}return D0=s,D0}var L0,bA;function xA(){if(bA)return L0;bA=1;var e=BK();function t(n){return n==null?"":e(n)}return L0=t,L0}var F0,wA;lc=function(){if(wA)return F0;wA=1;var e=un(),t=P0(),n=FK(),r=xA();function o(a,i){return e(a)?a:t(a,i)?[a]:n(r(a))}return F0=o,F0};var B0,_A;mi=function(){if(_A)return B0;_A=1;var e=Bi(),t=1/0;function n(r){if(typeof r=="string"||e(r))return r;var o=r+"";return o=="0"&&1/r==-t?"-0":o}return B0=n,B0};var $0,jA;cc=function(){if(jA)return $0;jA=1;var e=lc(),t=mi();function n(r,o){o=e(o,r);for(var a=0,i=o.length;r!=null&&a<i;)r=r[t(o[a++])];return a&&a==i?r:void 0}return $0=n,$0};var z0,EA;function SA(){if(EA)return z0;EA=1;var e=cc();function t(n,r,o){var a=n==null?void 0:e(n,r);return a===void 0?o:a}return z0=t,z0}var V0,CA;function $K(){if(CA)return V0;CA=1;function e(t,n){return t!=null&&n in Object(t)}return V0=e,V0}var U0,OA;function zK(){if(OA)return U0;OA=1;var e=lc(),t=zu(),n=un(),r=Gd(),o=r0(),a=mi();function i(s,c,l){c=e(c,s);for(var u=-1,d=c.length,f=!1;++u<d;){var p=a(c[u]);if(!(f=s!=null&&l(s,p)))break;s=s[p]}return f||++u!=d?f:(d=s==null?0:s.length,!!d&&o(d)&&r(p,d)&&(n(s)||t(s)))}return U0=i,U0}var H0,NA;BE=function(){if(NA)return H0;NA=1;var e=$K(),t=zK();function n(r,o){return r!=null&&t(r,o,e)}return H0=n,H0};var W0,MA;function VK(){if(MA)return W0;MA=1;var e=j0(),t=SA(),n=BE(),r=P0(),o=iA(),a=lA(),i=mi(),s=1,c=2;function l(u,d){return r(u)&&o(d)?a(i(u),d):function(f){var p=t(f,u);return p===void 0&&p===d?n(f,u):e(d,p,s|c)}}return W0=l,W0}var q0,kA;function $i(){if(kA)return q0;kA=1;function e(t){return t}return q0=e,q0}var Y0,PA;function UK(){if(PA)return Y0;PA=1;function e(t){return function(n){return n==null?void 0:n[t]}}return Y0=e,Y0}var K0,AA;function HK(){if(AA)return K0;AA=1;var e=cc();function t(n){return function(r){return e(r,n)}}return K0=t,K0}var X0,TA;function WK(){if(TA)return X0;TA=1;var e=UK(),t=HK(),n=P0(),r=mi();function o(a){return n(a)?e(r(a)):t(a)}return X0=o,X0}var Q0,RA;function Tr(){if(RA)return Q0;RA=1;var e=DK(),t=VK(),n=$i(),r=un(),o=WK();function a(i){return typeof i=="function"?i:i==null?n:typeof i=="object"?r(i)?t(i[0],i[1]):e(i):o(i)}return Q0=a,Q0}var J0,IA;function qK(){if(IA)return J0;IA=1;var e="Expected a function";function t(n){if(typeof n!="function")throw new TypeError(e);return function(){var r=arguments;switch(r.length){case 0:return!n.call(this);case 1:return!n.call(this,r[0]);case 2:return!n.call(this,r[0],r[1]);case 3:return!n.call(this,r[0],r[1],r[2])}return!n.apply(this,r)}}return J0=t,J0}var G0,DA;function LA(){if(DA)return G0;DA=1;var e=ka(),t=function(){try{var n=e(Object,"defineProperty");return n({},"",{}),n}catch{}}();return G0=t,G0}var Z0,FA;Jh=function(){if(FA)return Z0;FA=1;var e=LA();function t(n,r,o){r=="__proto__"&&e?e(n,r,{configurable:!0,enumerable:!0,value:o,writable:!0}):n[r]=o}return Z0=t,Z0};var eb,BA;wS=function(){if(BA)return eb;BA=1;var e=Jh(),t=ec(),n=Object.prototype,r=n.hasOwnProperty;function o(a,i,s){var c=a[i];(!(r.call(a,i)&&t(c,s))||s===void 0&&!(i in a))&&e(a,i,s)}return eb=o,eb};var tb,$A;function YK(){if($A)return tb;$A=1;var e=wS(),t=lc(),n=Gd(),r=or(),o=mi();function a(i,s,c,l){if(!r(i))return i;s=t(s,i);for(var u=-1,d=s.length,f=d-1,p=i;p!=null&&++u<d;){var y=o(s[u]),m=c;if(y==="__proto__"||y==="constructor"||y==="prototype")return i;if(u!=f){var v=p[y];m=l?l(v,y,p):void 0,m===void 0&&(m=r(v)?v:n(s[u+1])?[]:{})}e(p,y,m),p=p[y]}return i}return tb=a,tb}var nb,zA;FE=function(){if(zA)return nb;zA=1;var e=cc(),t=YK(),n=lc();function r(o,a,i){for(var s=-1,c=a.length,l={};++s<c;){var u=a[s],d=e(o,u);i(d,u)&&t(l,n(u,o),d)}return l}return nb=r,nb};var rb,VA;Um=function(){if(VA)return rb;VA=1;var e=UP(),t=e(Object.getPrototypeOf,Object);return rb=t,rb};var ob,UA;yS=function(){if(UA)return ob;UA=1;var e=Hv(),t=Um(),n=Vm(),r=SP(),o=Object.getOwnPropertySymbols,a=o?function(i){for(var s=[];i;)e(s,n(i)),i=t(i);return s}:r;return ob=a,ob};var ab,HA;function KK(){if(HA)return ab;HA=1;function e(t){var n=[];if(t!=null)for(var r in Object(t))n.push(r);return n}return ab=e,ab}var ib,WA;function XK(){if(WA)return ib;WA=1;var e=or(),t=Hm(),n=KK(),r=Object.prototype,o=r.hasOwnProperty;function a(i){if(!e(i))return n(i);var s=t(i),c=[];for(var l in i)l=="constructor"&&(s||!o.call(i,l))||c.push(l);return c}return ib=a,ib}var sb,qA;mS=function(){if(qA)return sb;qA=1;var e=$P(),t=XK(),n=ga();function r(o){return n(o)?e(o,!0):t(o)}return sb=r,sb};var cb,YA;_S=function(){if(YA)return cb;YA=1;var e=_P(),t=yS(),n=mS();function r(o){return e(o,n,t)}return cb=r,cb};var lb,KA;function QK(){if(KA)return lb;KA=1;var e=Zs(),t=Tr(),n=FE(),r=_S();function o(a,i){if(a==null)return{};var s=e(r(a),function(c){return[c]});return i=t(i),n(a,s,function(c,l){return i(c,l[0])})}return lb=o,lb}var ub,XA;function JK(){if(XA)return ub;XA=1;var e=Tr(),t=qK(),n=QK();function r(o,a){return n(o,t(e(a)))}return ub=r,ub}var GK=JK();const Qc=Xe(GK);var db,QA;function ZK(){if(QA)return db;QA=1;function e(t){return t===void 0}return db=e,db}var eX=ZK();const Jc=Xe(eX);function It(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=It(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var tX={value:()=>{}};function ef(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new tf(n)}function tf(e){this._=e}function nX(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",o=n.indexOf(".");if(o>=0&&(r=n.slice(o+1),n=n.slice(0,o)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}tf.prototype=ef.prototype={constructor:tf,on:function(e,t){var n=this._,r=nX(e+"",n),o,a=-1,i=r.length;if(arguments.length<2){for(;++a<i;)if((o=(e=r[a]).type)&&(o=rX(n[o],e.name)))return o;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<i;)if(o=(e=r[a]).type)n[o]=JA(n[o],e.name,t);else if(t==null)for(o in n)n[o]=JA(n[o],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new tf(e)},call:function(e,t){if((o=arguments.length-2)>0)for(var n=new Array(o),r=0,o,a;r<o;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],r=0,o=a.length;r<o;++r)a[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],o=0,a=r.length;o<a;++o)r[o].value.apply(t,n)}};function rX(e,t){for(var n=0,r=e.length,o;n<r;++n)if((o=e[n]).name===t)return o.value}function JA(e,t,n){for(var r=0,o=e.length;r<o;++r)if(e[r].name===t){e[r]=tX,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var fb="http://www.w3.org/1999/xhtml";const GA={svg:"http://www.w3.org/2000/svg",xhtml:fb,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function nf(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),GA.hasOwnProperty(t)?{space:GA[t],local:e}:e}function oX(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===fb&&t.documentElement.namespaceURI===fb?t.createElement(e):t.createElementNS(n,e)}}function aX(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function ZA(e){var t=nf(e);return(t.local?aX:oX)(t)}function iX(){}function pb(e){return e==null?iX:function(){return this.querySelector(e)}}function sX(e){typeof e!="function"&&(e=pb(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var a=t[o],i=a.length,s=r[o]=new Array(i),c,l,u=0;u<i;++u)(c=a[u])&&(l=e.call(c,c.__data__,u,a))&&("__data__"in c&&(l.__data__=c.__data__),s[u]=l);return new Dn(r,this._parents)}function cX(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function lX(){return[]}function e2(e){return e==null?lX:function(){return this.querySelectorAll(e)}}function uX(e){return function(){return cX(e.apply(this,arguments))}}function dX(e){typeof e=="function"?e=uX(e):e=e2(e);for(var t=this._groups,n=t.length,r=[],o=[],a=0;a<n;++a)for(var i=t[a],s=i.length,c,l=0;l<s;++l)(c=i[l])&&(r.push(e.call(c,c.__data__,l,i)),o.push(c));return new Dn(r,o)}function t2(e){return function(){return this.matches(e)}}function n2(e){return function(t){return t.matches(e)}}var fX=Array.prototype.find;function pX(e){return function(){return fX.call(this.children,e)}}function hX(){return this.firstElementChild}function mX(e){return this.select(e==null?hX:pX(typeof e=="function"?e:n2(e)))}var yX=Array.prototype.filter;function gX(){return Array.from(this.children)}function vX(e){return function(){return yX.call(this.children,e)}}function bX(e){return this.selectAll(e==null?gX:vX(typeof e=="function"?e:n2(e)))}function xX(e){typeof e!="function"&&(e=t2(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var a=t[o],i=a.length,s=r[o]=[],c,l=0;l<i;++l)(c=a[l])&&e.call(c,c.__data__,l,a)&&s.push(c);return new Dn(r,this._parents)}function r2(e){return new Array(e.length)}function wX(){return new Dn(this._enter||this._groups.map(r2),this._parents)}function rf(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}rf.prototype={constructor:rf,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function _X(e){return function(){return e}}function jX(e,t,n,r,o,a){for(var i=0,s,c=t.length,l=a.length;i<l;++i)(s=t[i])?(s.__data__=a[i],r[i]=s):n[i]=new rf(e,a[i]);for(;i<c;++i)(s=t[i])&&(o[i]=s)}function EX(e,t,n,r,o,a,i){var s,c,l=new Map,u=t.length,d=a.length,f=new Array(u),p;for(s=0;s<u;++s)(c=t[s])&&(f[s]=p=i.call(c,c.__data__,s,t)+"",l.has(p)?o[s]=c:l.set(p,c));for(s=0;s<d;++s)p=i.call(e,a[s],s,a)+"",(c=l.get(p))?(r[s]=c,c.__data__=a[s],l.delete(p)):n[s]=new rf(e,a[s]);for(s=0;s<u;++s)(c=t[s])&&l.get(f[s])===c&&(o[s]=c)}function SX(e){return e.__data__}function CX(e,t){if(!arguments.length)return Array.from(this,SX);var n=t?EX:jX,r=this._parents,o=this._groups;typeof e!="function"&&(e=_X(e));for(var a=o.length,i=new Array(a),s=new Array(a),c=new Array(a),l=0;l<a;++l){var u=r[l],d=o[l],f=d.length,p=OX(e.call(u,u&&u.__data__,l,r)),y=p.length,m=s[l]=new Array(y),v=i[l]=new Array(y),b=c[l]=new Array(f);n(u,d,m,v,b,p,t);for(var x=0,_=0,w,j;x<y;++x)if(w=m[x]){for(x>=_&&(_=x+1);!(j=v[_])&&++_<y;);w._next=j||null}}return i=new Dn(i,r),i._enter=s,i._exit=c,i}function OX(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function NX(){return new Dn(this._exit||this._groups.map(r2),this._parents)}function MX(e,t,n){var r=this.enter(),o=this,a=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(o=t(o),o&&(o=o.selection())),n==null?a.remove():n(a),r&&o?r.merge(o).order():o}function kX(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,o=n.length,a=r.length,i=Math.min(o,a),s=new Array(o),c=0;c<i;++c)for(var l=n[c],u=r[c],d=l.length,f=s[c]=new Array(d),p,y=0;y<d;++y)(p=l[y]||u[y])&&(f[y]=p);for(;c<o;++c)s[c]=n[c];return new Dn(s,this._parents)}function PX(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],o=r.length-1,a=r[o],i;--o>=0;)(i=r[o])&&(a&&i.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(i,a),a=i);return this}function AX(e){e||(e=TX);function t(d,f){return d&&f?e(d.__data__,f.__data__):!d-!f}for(var n=this._groups,r=n.length,o=new Array(r),a=0;a<r;++a){for(var i=n[a],s=i.length,c=o[a]=new Array(s),l,u=0;u<s;++u)(l=i[u])&&(c[u]=l);c.sort(t)}return new Dn(o,this._parents).order()}function TX(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function RX(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function IX(){return Array.from(this)}function DX(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,a=r.length;o<a;++o){var i=r[o];if(i)return i}return null}function LX(){let e=0;for(const t of this)++e;return e}function FX(){return!this.node()}function BX(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var o=t[n],a=0,i=o.length,s;a<i;++a)(s=o[a])&&e.call(s,s.__data__,a,o);return this}function $X(e){return function(){this.removeAttribute(e)}}function zX(e){return function(){this.removeAttributeNS(e.space,e.local)}}function VX(e,t){return function(){this.setAttribute(e,t)}}function UX(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function HX(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function WX(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function qX(e,t){var n=nf(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?zX:$X:typeof t=="function"?n.local?WX:HX:n.local?UX:VX)(n,t))}function o2(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function YX(e){return function(){this.style.removeProperty(e)}}function KX(e,t,n){return function(){this.style.setProperty(e,t,n)}}function XX(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function QX(e,t,n){return arguments.length>1?this.each((t==null?YX:typeof t=="function"?XX:KX)(e,t,n??"")):zi(this.node(),e)}function zi(e,t){return e.style.getPropertyValue(t)||o2(e).getComputedStyle(e,null).getPropertyValue(t)}function JX(e){return function(){delete this[e]}}function GX(e,t){return function(){this[e]=t}}function ZX(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function eQ(e,t){return arguments.length>1?this.each((t==null?JX:typeof t=="function"?ZX:GX)(e,t)):this.node()[e]}function a2(e){return e.trim().split(/^|\s+/)}function hb(e){return e.classList||new i2(e)}function i2(e){this._node=e,this._names=a2(e.getAttribute("class")||"")}i2.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function s2(e,t){for(var n=hb(e),r=-1,o=t.length;++r<o;)n.add(t[r])}function c2(e,t){for(var n=hb(e),r=-1,o=t.length;++r<o;)n.remove(t[r])}function tQ(e){return function(){s2(this,e)}}function nQ(e){return function(){c2(this,e)}}function rQ(e,t){return function(){(t.apply(this,arguments)?s2:c2)(this,e)}}function oQ(e,t){var n=a2(e+"");if(arguments.length<2){for(var r=hb(this.node()),o=-1,a=n.length;++o<a;)if(!r.contains(n[o]))return!1;return!0}return this.each((typeof t=="function"?rQ:t?tQ:nQ)(n,t))}function aQ(){this.textContent=""}function iQ(e){return function(){this.textContent=e}}function sQ(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function cQ(e){return arguments.length?this.each(e==null?aQ:(typeof e=="function"?sQ:iQ)(e)):this.node().textContent}function lQ(){this.innerHTML=""}function uQ(e){return function(){this.innerHTML=e}}function dQ(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function fQ(e){return arguments.length?this.each(e==null?lQ:(typeof e=="function"?dQ:uQ)(e)):this.node().innerHTML}function pQ(){this.nextSibling&&this.parentNode.appendChild(this)}function hQ(){return this.each(pQ)}function mQ(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function yQ(){return this.each(mQ)}function gQ(e){var t=typeof e=="function"?e:ZA(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function vQ(){return null}function bQ(e,t){var n=typeof e=="function"?e:ZA(e),r=t==null?vQ:typeof t=="function"?t:pb(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function xQ(){var e=this.parentNode;e&&e.removeChild(this)}function wQ(){return this.each(xQ)}function _Q(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function jQ(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function EQ(e){return this.select(e?jQ:_Q)}function SQ(e){return arguments.length?this.property("__data__",e):this.node().__data__}function CQ(e){return function(t){e.call(this,t,this.__data__)}}function OQ(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function NQ(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,o=t.length,a;n<o;++n)a=t[n],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++r]=a;++r?t.length=r:delete this.__on}}}function MQ(e,t,n){return function(){var r=this.__on,o,a=CQ(t);if(r){for(var i=0,s=r.length;i<s;++i)if((o=r[i]).type===e.type&&o.name===e.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=a,o.options=n),o.value=t;return}}this.addEventListener(e.type,a,n),o={type:e.type,name:e.name,value:t,listener:a,options:n},r?r.push(o):this.__on=[o]}}function kQ(e,t,n){var r=OQ(e+""),o,a=r.length,i;if(arguments.length<2){var s=this.node().__on;if(s){for(var c=0,l=s.length,u;c<l;++c)for(o=0,u=s[c];o<a;++o)if((i=r[o]).type===u.type&&i.name===u.name)return u.value}return}for(s=t?MQ:NQ,o=0;o<a;++o)this.each(s(r[o],t,n));return this}function l2(e,t,n){var r=o2(e),o=r.CustomEvent;typeof o=="function"?o=new o(t,n):(o=r.document.createEvent("Event"),n?(o.initEvent(t,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}function PQ(e,t){return function(){return l2(this,e,t)}}function AQ(e,t){return function(){return l2(this,e,t.apply(this,arguments))}}function TQ(e,t){return this.each((typeof t=="function"?AQ:PQ)(e,t))}function*RQ(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,a=r.length,i;o<a;++o)(i=r[o])&&(yield i)}var u2=[null];function Dn(e,t){this._groups=e,this._parents=t}function Gc(){return new Dn([[document.documentElement]],u2)}function IQ(){return this}Dn.prototype=Gc.prototype={constructor:Dn,select:sX,selectAll:dX,selectChild:mX,selectChildren:bX,filter:xX,data:CX,enter:wX,exit:NX,join:MX,merge:kX,selection:IQ,order:PX,sort:AX,call:RX,nodes:IX,node:DX,size:LX,empty:FX,each:BX,attr:qX,style:QX,property:eQ,classed:oQ,text:cQ,html:fQ,raise:hQ,lower:yQ,append:gQ,insert:bQ,remove:wQ,clone:EQ,datum:SQ,on:kQ,dispatch:TQ,[Symbol.iterator]:RQ};function Ln(e){return typeof e=="string"?new Dn([[document.querySelector(e)]],[document.documentElement]):new Dn([[e]],u2)}function DQ(e){let t;for(;t=e.sourceEvent;)e=t;return e}function fr(e,t){if(e=DQ(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}}return[e.pageX,e.pageY]}const LQ={passive:!1},Zc={capture:!0,passive:!1};function mb(e){e.stopImmediatePropagation()}function Vi(e){e.preventDefault(),e.stopImmediatePropagation()}function d2(e){var t=e.document.documentElement,n=Ln(e).on("dragstart.drag",Vi,Zc);"onselectstart"in t?n.on("selectstart.drag",Vi,Zc):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function f2(e,t){var n=e.document.documentElement,r=Ln(e).on("dragstart.drag",null);t&&(r.on("click.drag",Vi,Zc),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const of=e=>()=>e;function yb(e,{sourceEvent:t,subject:n,target:r,identifier:o,active:a,x:i,y:s,dx:c,dy:l,dispatch:u}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:i,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:l,enumerable:!0,configurable:!0},_:{value:u}})}yb.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function FQ(e){return!e.ctrlKey&&!e.button}function BQ(){return this.parentNode}function $Q(e,t){return t??{x:e.x,y:e.y}}function zQ(){return navigator.maxTouchPoints||"ontouchstart"in this}function p2(){var e=FQ,t=BQ,n=$Q,r=zQ,o={},a=ef("start","drag","end"),i=0,s,c,l,u,d=0;function f(w){w.on("mousedown.drag",p).filter(r).on("touchstart.drag",v).on("touchmove.drag",b,LQ).on("touchend.drag touchcancel.drag",x).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(w,j){if(!(u||!e.call(this,w,j))){var E=_(this,t.call(this,w,j),w,j,"mouse");E&&(Ln(w.view).on("mousemove.drag",y,Zc).on("mouseup.drag",m,Zc),d2(w.view),mb(w),l=!1,s=w.clientX,c=w.clientY,E("start",w))}}function y(w){if(Vi(w),!l){var j=w.clientX-s,E=w.clientY-c;l=j*j+E*E>d}o.mouse("drag",w)}function m(w){Ln(w.view).on("mousemove.drag mouseup.drag",null),f2(w.view,l),Vi(w),o.mouse("end",w)}function v(w,j){if(e.call(this,w,j)){var E=w.changedTouches,S=t.call(this,w,j),O=E.length,k,N;for(k=0;k<O;++k)(N=_(this,S,w,j,E[k].identifier,E[k]))&&(mb(w),N("start",w,E[k]))}}function b(w){var j=w.changedTouches,E=j.length,S,O;for(S=0;S<E;++S)(O=o[j[S].identifier])&&(Vi(w),O("drag",w,j[S]))}function x(w){var j=w.changedTouches,E=j.length,S,O;for(u&&clearTimeout(u),u=setTimeout(function(){u=null},500),S=0;S<E;++S)(O=o[j[S].identifier])&&(mb(w),O("end",w,j[S]))}function _(w,j,E,S,O,k){var N=a.copy(),P=fr(k||E,j),R,A,C;if((C=n.call(w,new yb("beforestart",{sourceEvent:E,target:f,identifier:O,active:i,x:P[0],y:P[1],dx:0,dy:0,dispatch:N}),S))!=null)return R=C.x-P[0]||0,A=C.y-P[1]||0,function M(T,D,I){var L=P,B;switch(T){case"start":o[O]=M,B=i++;break;case"end":delete o[O],--i;case"drag":P=fr(I||D,j),B=i;break}N.call(T,w,new yb(T,{sourceEvent:D,subject:C,target:f,identifier:O,active:B,x:P[0]+R,y:P[1]+A,dx:P[0]-L[0],dy:P[1]-L[1],dispatch:N}),S)}}return f.filter=function(w){return arguments.length?(e=typeof w=="function"?w:of(!!w),f):e},f.container=function(w){return arguments.length?(t=typeof w=="function"?w:of(w),f):t},f.subject=function(w){return arguments.length?(n=typeof w=="function"?w:of(w),f):n},f.touchable=function(w){return arguments.length?(r=typeof w=="function"?w:of(!!w),f):r},f.on=function(){var w=a.on.apply(a,arguments);return w===a?f:w},f.clickDistance=function(w){return arguments.length?(d=(w=+w)*w,f):Math.sqrt(d)},f}function gb(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function h2(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function el(){}var tl=.7,af=1/tl,Ui="\\s*([+-]?\\d+)\\s*",nl="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Rr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",VQ=/^#([0-9a-f]{3,8})$/,UQ=new RegExp(`^rgb\\(${Ui},${Ui},${Ui}\\)$`),HQ=new RegExp(`^rgb\\(${Rr},${Rr},${Rr}\\)$`),WQ=new RegExp(`^rgba\\(${Ui},${Ui},${Ui},${nl}\\)$`),qQ=new RegExp(`^rgba\\(${Rr},${Rr},${Rr},${nl}\\)$`),YQ=new RegExp(`^hsl\\(${nl},${Rr},${Rr}\\)$`),KQ=new RegExp(`^hsla\\(${nl},${Rr},${Rr},${nl}\\)$`),m2={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};gb(el,Pa,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:y2,formatHex:y2,formatHex8:XQ,formatHsl:QQ,formatRgb:g2,toString:g2});function y2(){return this.rgb().formatHex()}function XQ(){return this.rgb().formatHex8()}function QQ(){return _2(this).formatHsl()}function g2(){return this.rgb().formatRgb()}function Pa(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=VQ.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?v2(t):n===3?new wn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?sf(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?sf(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=UQ.exec(e))?new wn(t[1],t[2],t[3],1):(t=HQ.exec(e))?new wn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=WQ.exec(e))?sf(t[1],t[2],t[3],t[4]):(t=qQ.exec(e))?sf(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=YQ.exec(e))?w2(t[1],t[2]/100,t[3]/100,1):(t=KQ.exec(e))?w2(t[1],t[2]/100,t[3]/100,t[4]):m2.hasOwnProperty(e)?v2(m2[e]):e==="transparent"?new wn(NaN,NaN,NaN,0):null}function v2(e){return new wn(e>>16&255,e>>8&255,e&255,1)}function sf(e,t,n,r){return r<=0&&(e=t=n=NaN),new wn(e,t,n,r)}function JQ(e){return e instanceof el||(e=Pa(e)),e?(e=e.rgb(),new wn(e.r,e.g,e.b,e.opacity)):new wn}function vb(e,t,n,r){return arguments.length===1?JQ(e):new wn(e,t,n,r??1)}function wn(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}gb(wn,vb,h2(el,{brighter(e){return e=e==null?af:Math.pow(af,e),new wn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?tl:Math.pow(tl,e),new wn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new wn(Aa(this.r),Aa(this.g),Aa(this.b),cf(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:b2,formatHex:b2,formatHex8:GQ,formatRgb:x2,toString:x2}));function b2(){return`#${Ta(this.r)}${Ta(this.g)}${Ta(this.b)}`}function GQ(){return`#${Ta(this.r)}${Ta(this.g)}${Ta(this.b)}${Ta((isNaN(this.opacity)?1:this.opacity)*255)}`}function x2(){const e=cf(this.opacity);return`${e===1?"rgb(":"rgba("}${Aa(this.r)}, ${Aa(this.g)}, ${Aa(this.b)}${e===1?")":`, ${e})`}`}function cf(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Aa(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Ta(e){return e=Aa(e),(e<16?"0":"")+e.toString(16)}function w2(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new pr(e,t,n,r)}function _2(e){if(e instanceof pr)return new pr(e.h,e.s,e.l,e.opacity);if(e instanceof el||(e=Pa(e)),!e)return new pr;if(e instanceof pr)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,o=Math.min(t,n,r),a=Math.max(t,n,r),i=NaN,s=a-o,c=(a+o)/2;return s?(t===a?i=(n-r)/s+(n<r)*6:n===a?i=(r-t)/s+2:i=(t-n)/s+4,s/=c<.5?a+o:2-a-o,i*=60):s=c>0&&c<1?0:i,new pr(i,s,c,e.opacity)}function ZQ(e,t,n,r){return arguments.length===1?_2(e):new pr(e,t,n,r??1)}function pr(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}gb(pr,ZQ,h2(el,{brighter(e){return e=e==null?af:Math.pow(af,e),new pr(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?tl:Math.pow(tl,e),new pr(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,o=2*n-r;return new wn(bb(e>=240?e-240:e+120,o,r),bb(e,o,r),bb(e<120?e+240:e-120,o,r),this.opacity)},clamp(){return new pr(j2(this.h),lf(this.s),lf(this.l),cf(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=cf(this.opacity);return`${e===1?"hsl(":"hsla("}${j2(this.h)}, ${lf(this.s)*100}%, ${lf(this.l)*100}%${e===1?")":`, ${e})`}`}}));function j2(e){return e=(e||0)%360,e<0?e+360:e}function lf(e){return Math.max(0,Math.min(1,e||0))}function bb(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const xb=e=>()=>e;function eJ(e,t){return function(n){return e+n*t}}function tJ(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function nJ(e){return(e=+e)==1?E2:function(t,n){return n-t?tJ(t,n,e):xb(isNaN(t)?n:t)}}function E2(e,t){var n=t-e;return n?eJ(e,n):xb(isNaN(e)?t:e)}const uf=function e(t){var n=nJ(t);function r(o,a){var i=n((o=vb(o)).r,(a=vb(a)).r),s=n(o.g,a.g),c=n(o.b,a.b),l=E2(o.opacity,a.opacity);return function(u){return o.r=i(u),o.g=s(u),o.b=c(u),o.opacity=l(u),o+""}}return r.gamma=e,r}(1);function rJ(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),o;return function(a){for(o=0;o<n;++o)r[o]=e[o]*(1-a)+t[o]*a;return r}}function oJ(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function aJ(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,o=new Array(r),a=new Array(n),i;for(i=0;i<r;++i)o[i]=Hi(e[i],t[i]);for(;i<n;++i)a[i]=t[i];return function(s){for(i=0;i<r;++i)a[i]=o[i](s);return a}}function iJ(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function hr(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function sJ(e,t){var n={},r={},o;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(o in t)o in e?n[o]=Hi(e[o],t[o]):r[o]=t[o];return function(a){for(o in n)r[o]=n[o](a);return r}}var wb=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,_b=new RegExp(wb.source,"g");function cJ(e){return function(){return e}}function lJ(e){return function(t){return e(t)+""}}function S2(e,t){var n=wb.lastIndex=_b.lastIndex=0,r,o,a,i=-1,s=[],c=[];for(e=e+"",t=t+"";(r=wb.exec(e))&&(o=_b.exec(t));)(a=o.index)>n&&(a=t.slice(n,a),s[i]?s[i]+=a:s[++i]=a),(r=r[0])===(o=o[0])?s[i]?s[i]+=o:s[++i]=o:(s[++i]=null,c.push({i,x:hr(r,o)})),n=_b.lastIndex;return n<t.length&&(a=t.slice(n),s[i]?s[i]+=a:s[++i]=a),s.length<2?c[0]?lJ(c[0].x):cJ(t):(t=c.length,function(l){for(var u=0,d;u<t;++u)s[(d=c[u]).i]=d.x(l);return s.join("")})}function Hi(e,t){var n=typeof t,r;return t==null||n==="boolean"?xb(t):(n==="number"?hr:n==="string"?(r=Pa(t))?(t=r,uf):S2:t instanceof Pa?uf:t instanceof Date?iJ:oJ(t)?rJ:Array.isArray(t)?aJ:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?sJ:hr)(e,t)}function jb(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var C2=180/Math.PI,O2={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function N2(e,t,n,r,o,a){var i,s,c;return(i=Math.sqrt(e*e+t*t))&&(e/=i,t/=i),(c=e*n+t*r)&&(n-=e*c,r-=t*c),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,c/=s),e*r<t*n&&(e=-e,t=-t,c=-c,i=-i),{translateX:o,translateY:a,rotate:Math.atan2(t,e)*C2,skewX:Math.atan(c)*C2,scaleX:i,scaleY:s}}var df;function uJ(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?O2:N2(t.a,t.b,t.c,t.d,t.e,t.f)}function dJ(e){return e==null||(df||(df=document.createElementNS("http://www.w3.org/2000/svg","g")),df.setAttribute("transform",e),!(e=df.transform.baseVal.consolidate()))?O2:(e=e.matrix,N2(e.a,e.b,e.c,e.d,e.e,e.f))}function M2(e,t,n,r){function o(l){return l.length?l.pop()+" ":""}function a(l,u,d,f,p,y){if(l!==d||u!==f){var m=p.push("translate(",null,t,null,n);y.push({i:m-4,x:hr(l,d)},{i:m-2,x:hr(u,f)})}else(d||f)&&p.push("translate("+d+t+f+n)}function i(l,u,d,f){l!==u?(l-u>180?u+=360:u-l>180&&(l+=360),f.push({i:d.push(o(d)+"rotate(",null,r)-2,x:hr(l,u)})):u&&d.push(o(d)+"rotate("+u+r)}function s(l,u,d,f){l!==u?f.push({i:d.push(o(d)+"skewX(",null,r)-2,x:hr(l,u)}):u&&d.push(o(d)+"skewX("+u+r)}function c(l,u,d,f,p,y){if(l!==d||u!==f){var m=p.push(o(p)+"scale(",null,",",null,")");y.push({i:m-4,x:hr(l,d)},{i:m-2,x:hr(u,f)})}else(d!==1||f!==1)&&p.push(o(p)+"scale("+d+","+f+")")}return function(l,u){var d=[],f=[];return l=e(l),u=e(u),a(l.translateX,l.translateY,u.translateX,u.translateY,d,f),i(l.rotate,u.rotate,d,f),s(l.skewX,u.skewX,d,f),c(l.scaleX,l.scaleY,u.scaleX,u.scaleY,d,f),l=u=null,function(p){for(var y=-1,m=f.length,v;++y<m;)d[(v=f[y]).i]=v.x(p);return d.join("")}}}var fJ=M2(uJ,"px, ","px)","deg)"),pJ=M2(dJ,", ",")",")"),hJ=1e-12;function k2(e){return((e=Math.exp(e))+1/e)/2}function mJ(e){return((e=Math.exp(e))-1/e)/2}function yJ(e){return((e=Math.exp(2*e))-1)/(e+1)}const gJ=function e(t,n,r){function o(a,i){var s=a[0],c=a[1],l=a[2],u=i[0],d=i[1],f=i[2],p=u-s,y=d-c,m=p*p+y*y,v,b;if(m<hJ)b=Math.log(f/l)/t,v=function(S){return[s+S*p,c+S*y,l*Math.exp(t*S*b)]};else{var x=Math.sqrt(m),_=(f*f-l*l+r*m)/(2*l*n*x),w=(f*f-l*l-r*m)/(2*f*n*x),j=Math.log(Math.sqrt(_*_+1)-_),E=Math.log(Math.sqrt(w*w+1)-w);b=(E-j)/t,v=function(S){var O=S*b,k=k2(j),N=l/(n*x)*(k*yJ(t*O+j)-mJ(j));return[s+N*p,c+N*y,l*k/k2(t*O+j)]}}return v.duration=b*1e3*t/Math.SQRT2,v}return o.rho=function(a){var i=Math.max(.001,+a),s=i*i,c=s*s;return e(i,s,c)},o}(Math.SQRT2,2,4);function vJ(e,t){t===void 0&&(t=e,e=Hi);for(var n=0,r=t.length-1,o=t[0],a=new Array(r<0?0:r);n<r;)a[n]=e(o,o=t[++n]);return function(i){var s=Math.max(0,Math.min(r-1,Math.floor(i*=r)));return a[s](i-s)}}var Wi=0,rl=0,ol=0,P2=1e3,ff,al,pf=0,Ra=0,hf=0,il=typeof performance=="object"&&performance.now?performance:Date,A2=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Eb(){return Ra||(A2(bJ),Ra=il.now()+hf)}function bJ(){Ra=0}function mf(){this._call=this._time=this._next=null}mf.prototype=T2.prototype={constructor:mf,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Eb():+n)+(t==null?0:+t),!this._next&&al!==this&&(al?al._next=this:ff=this,al=this),this._call=e,this._time=n,Sb()},stop:function(){this._call&&(this._call=null,this._time=1/0,Sb())}};function T2(e,t,n){var r=new mf;return r.restart(e,t,n),r}function xJ(){Eb(),++Wi;for(var e=ff,t;e;)(t=Ra-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Wi}function R2(){Ra=(pf=il.now())+hf,Wi=rl=0;try{xJ()}finally{Wi=0,_J(),Ra=0}}function wJ(){var e=il.now(),t=e-pf;t>P2&&(hf-=t,pf=e)}function _J(){for(var e,t=ff,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:ff=n);al=e,Sb(r)}function Sb(e){if(!Wi){rl&&(rl=clearTimeout(rl));var t=e-Ra;t>24?(e<1/0&&(rl=setTimeout(R2,e-il.now()-hf)),ol&&(ol=clearInterval(ol))):(ol||(pf=il.now(),ol=setInterval(wJ,P2)),Wi=1,A2(R2))}}function I2(e,t,n){var r=new mf;return t=t==null?0:+t,r.restart(o=>{r.stop(),e(o+t)},t,n),r}var jJ=ef("start","end","cancel","interrupt"),EJ=[],D2=0,L2=1,Cb=2,yf=3,F2=4,Ob=5,gf=6;function vf(e,t,n,r,o,a){var i=e.__transition;if(!i)e.__transition={};else if(n in i)return;SJ(e,n,{name:t,index:r,group:o,on:jJ,tween:EJ,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:D2})}function Nb(e,t){var n=mr(e,t);if(n.state>D2)throw new Error("too late; already scheduled");return n}function Ir(e,t){var n=mr(e,t);if(n.state>yf)throw new Error("too late; already running");return n}function mr(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function SJ(e,t,n){var r=e.__transition,o;r[t]=n,n.timer=T2(a,0,n.time);function a(l){n.state=L2,n.timer.restart(i,n.delay,n.time),n.delay<=l&&i(l-n.delay)}function i(l){var u,d,f,p;if(n.state!==L2)return c();for(u in r)if(p=r[u],p.name===n.name){if(p.state===yf)return I2(i);p.state===F2?(p.state=gf,p.timer.stop(),p.on.call("interrupt",e,e.__data__,p.index,p.group),delete r[u]):+u<t&&(p.state=gf,p.timer.stop(),p.on.call("cancel",e,e.__data__,p.index,p.group),delete r[u])}if(I2(function(){n.state===yf&&(n.state=F2,n.timer.restart(s,n.delay,n.time),s(l))}),n.state=Cb,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Cb){for(n.state=yf,o=new Array(f=n.tween.length),u=0,d=-1;u<f;++u)(p=n.tween[u].value.call(e,e.__data__,n.index,n.group))&&(o[++d]=p);o.length=d+1}}function s(l){for(var u=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(c),n.state=Ob,1),d=-1,f=o.length;++d<f;)o[d].call(e,u);n.state===Ob&&(n.on.call("end",e,e.__data__,n.index,n.group),c())}function c(){n.state=gf,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function bf(e,t){var n=e.__transition,r,o,a=!0,i;if(n){t=t==null?null:t+"";for(i in n){if((r=n[i]).name!==t){a=!1;continue}o=r.state>Cb&&r.state<Ob,r.state=gf,r.timer.stop(),r.on.call(o?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[i]}a&&delete e.__transition}}function CJ(e){return this.each(function(){bf(this,e)})}function OJ(e,t){var n,r;return function(){var o=Ir(this,e),a=o.tween;if(a!==n){r=n=a;for(var i=0,s=r.length;i<s;++i)if(r[i].name===t){r=r.slice(),r.splice(i,1);break}}o.tween=r}}function NJ(e,t,n){var r,o;if(typeof n!="function")throw new Error;return function(){var a=Ir(this,e),i=a.tween;if(i!==r){o=(r=i).slice();for(var s={name:t,value:n},c=0,l=o.length;c<l;++c)if(o[c].name===t){o[c]=s;break}c===l&&o.push(s)}a.tween=o}}function MJ(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=mr(this.node(),n).tween,o=0,a=r.length,i;o<a;++o)if((i=r[o]).name===e)return i.value;return null}return this.each((t==null?OJ:NJ)(n,e,t))}function Mb(e,t,n){var r=e._id;return e.each(function(){var o=Ir(this,r);(o.value||(o.value={}))[t]=n.apply(this,arguments)}),function(o){return mr(o,r).value[t]}}function B2(e,t){var n;return(typeof t=="number"?hr:t instanceof Pa?uf:(n=Pa(t))?(t=n,uf):S2)(e,t)}function kJ(e){return function(){this.removeAttribute(e)}}function PJ(e){return function(){this.removeAttributeNS(e.space,e.local)}}function AJ(e,t,n){var r,o=n+"",a;return function(){var i=this.getAttribute(e);return i===o?null:i===r?a:a=t(r=i,n)}}function TJ(e,t,n){var r,o=n+"",a;return function(){var i=this.getAttributeNS(e.space,e.local);return i===o?null:i===r?a:a=t(r=i,n)}}function RJ(e,t,n){var r,o,a;return function(){var i,s=n(this),c;return s==null?void this.removeAttribute(e):(i=this.getAttribute(e),c=s+"",i===c?null:i===r&&c===o?a:(o=c,a=t(r=i,s)))}}function IJ(e,t,n){var r,o,a;return function(){var i,s=n(this),c;return s==null?void this.removeAttributeNS(e.space,e.local):(i=this.getAttributeNS(e.space,e.local),c=s+"",i===c?null:i===r&&c===o?a:(o=c,a=t(r=i,s)))}}function DJ(e,t){var n=nf(e),r=n==="transform"?pJ:B2;return this.attrTween(e,typeof t=="function"?(n.local?IJ:RJ)(n,r,Mb(this,"attr."+e,t)):t==null?(n.local?PJ:kJ)(n):(n.local?TJ:AJ)(n,r,t))}function LJ(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function FJ(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function BJ(e,t){var n,r;function o(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&FJ(e,a)),n}return o._value=t,o}function $J(e,t){var n,r;function o(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&LJ(e,a)),n}return o._value=t,o}function zJ(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=nf(e);return this.tween(n,(r.local?BJ:$J)(r,t))}function VJ(e,t){return function(){Nb(this,e).delay=+t.apply(this,arguments)}}function UJ(e,t){return t=+t,function(){Nb(this,e).delay=t}}function HJ(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?VJ:UJ)(t,e)):mr(this.node(),t).delay}function WJ(e,t){return function(){Ir(this,e).duration=+t.apply(this,arguments)}}function qJ(e,t){return t=+t,function(){Ir(this,e).duration=t}}function YJ(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?WJ:qJ)(t,e)):mr(this.node(),t).duration}function KJ(e,t){if(typeof t!="function")throw new Error;return function(){Ir(this,e).ease=t}}function XJ(e){var t=this._id;return arguments.length?this.each(KJ(t,e)):mr(this.node(),t).ease}function QJ(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Ir(this,e).ease=n}}function JJ(e){if(typeof e!="function")throw new Error;return this.each(QJ(this._id,e))}function GJ(e){typeof e!="function"&&(e=t2(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var a=t[o],i=a.length,s=r[o]=[],c,l=0;l<i;++l)(c=a[l])&&e.call(c,c.__data__,l,a)&&s.push(c);return new fo(r,this._parents,this._name,this._id)}function ZJ(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,o=n.length,a=Math.min(r,o),i=new Array(r),s=0;s<a;++s)for(var c=t[s],l=n[s],u=c.length,d=i[s]=new Array(u),f,p=0;p<u;++p)(f=c[p]||l[p])&&(d[p]=f);for(;s<r;++s)i[s]=t[s];return new fo(i,this._parents,this._name,this._id)}function eG(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function tG(e,t,n){var r,o,a=eG(t)?Nb:Ir;return function(){var i=a(this,e),s=i.on;s!==r&&(o=(r=s).copy()).on(t,n),i.on=o}}function nG(e,t){var n=this._id;return arguments.length<2?mr(this.node(),n).on.on(e):this.each(tG(n,e,t))}function rG(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function oG(){return this.on("end.remove",rG(this._id))}function aG(e){var t=this._name,n=this._id;typeof e!="function"&&(e=pb(e));for(var r=this._groups,o=r.length,a=new Array(o),i=0;i<o;++i)for(var s=r[i],c=s.length,l=a[i]=new Array(c),u,d,f=0;f<c;++f)(u=s[f])&&(d=e.call(u,u.__data__,f,s))&&("__data__"in u&&(d.__data__=u.__data__),l[f]=d,vf(l[f],t,n,f,l,mr(u,n)));return new fo(a,this._parents,t,n)}function iG(e){var t=this._name,n=this._id;typeof e!="function"&&(e=e2(e));for(var r=this._groups,o=r.length,a=[],i=[],s=0;s<o;++s)for(var c=r[s],l=c.length,u,d=0;d<l;++d)if(u=c[d]){for(var f=e.call(u,u.__data__,d,c),p,y=mr(u,n),m=0,v=f.length;m<v;++m)(p=f[m])&&vf(p,t,n,m,f,y);a.push(f),i.push(u)}return new fo(a,i,t,n)}var sG=Gc.prototype.constructor;function cG(){return new sG(this._groups,this._parents)}function lG(e,t){var n,r,o;return function(){var a=zi(this,e),i=(this.style.removeProperty(e),zi(this,e));return a===i?null:a===n&&i===r?o:o=t(n=a,r=i)}}function $2(e){return function(){this.style.removeProperty(e)}}function uG(e,t,n){var r,o=n+"",a;return function(){var i=zi(this,e);return i===o?null:i===r?a:a=t(r=i,n)}}function dG(e,t,n){var r,o,a;return function(){var i=zi(this,e),s=n(this),c=s+"";return s==null&&(c=s=(this.style.removeProperty(e),zi(this,e))),i===c?null:i===r&&c===o?a:(o=c,a=t(r=i,s))}}function fG(e,t){var n,r,o,a="style."+t,i="end."+a,s;return function(){var c=Ir(this,e),l=c.on,u=c.value[a]==null?s||(s=$2(t)):void 0;(l!==n||o!==u)&&(r=(n=l).copy()).on(i,o=u),c.on=r}}function pG(e,t,n){var r=(e+="")=="transform"?fJ:B2;return t==null?this.styleTween(e,lG(e,r)).on("end.style."+e,$2(e)):typeof t=="function"?this.styleTween(e,dG(e,r,Mb(this,"style."+e,t))).each(fG(this._id,e)):this.styleTween(e,uG(e,r,t),n).on("end.style."+e,null)}function hG(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function mG(e,t,n){var r,o;function a(){var i=t.apply(this,arguments);return i!==o&&(r=(o=i)&&hG(e,i,n)),r}return a._value=t,a}function yG(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,mG(e,t,n??""))}function gG(e){return function(){this.textContent=e}}function vG(e){return function(){var t=e(this);this.textContent=t??""}}function bG(e){return this.tween("text",typeof e=="function"?vG(Mb(this,"text",e)):gG(e==null?"":e+""))}function xG(e){return function(t){this.textContent=e.call(this,t)}}function wG(e){var t,n;function r(){var o=e.apply(this,arguments);return o!==n&&(t=(n=o)&&xG(o)),t}return r._value=e,r}function _G(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,wG(e))}function jG(){for(var e=this._name,t=this._id,n=z2(),r=this._groups,o=r.length,a=0;a<o;++a)for(var i=r[a],s=i.length,c,l=0;l<s;++l)if(c=i[l]){var u=mr(c,t);vf(c,e,n,l,i,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new fo(r,this._parents,e,n)}function EG(){var e,t,n=this,r=n._id,o=n.size();return new Promise(function(a,i){var s={value:i},c={value:function(){--o===0&&a()}};n.each(function(){var l=Ir(this,r),u=l.on;u!==e&&(t=(e=u).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(c)),l.on=t}),o===0&&a()})}var SG=0;function fo(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function z2(){return++SG}var po=Gc.prototype;fo.prototype={constructor:fo,select:aG,selectAll:iG,selectChild:po.selectChild,selectChildren:po.selectChildren,filter:GJ,merge:ZJ,selection:cG,transition:jG,call:po.call,nodes:po.nodes,node:po.node,size:po.size,empty:po.empty,each:po.each,on:nG,attr:DJ,attrTween:zJ,style:pG,styleTween:yG,text:bG,textTween:_G,remove:oG,tween:MJ,delay:HJ,duration:YJ,ease:XJ,easeVarying:JJ,end:EG,[Symbol.iterator]:po[Symbol.iterator]};function CG(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var OG={time:null,delay:0,duration:250,ease:CG};function NG(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function MG(e){var t,n;e instanceof fo?(t=e._id,e=e._name):(t=z2(),(n=OG).time=Eb(),e=e==null?null:e+"");for(var r=this._groups,o=r.length,a=0;a<o;++a)for(var i=r[a],s=i.length,c,l=0;l<s;++l)(c=i[l])&&vf(c,e,t,l,i,n||NG(c,t));return new fo(r,this._parents,e,t)}Gc.prototype.interrupt=CJ,Gc.prototype.transition=MG;const xf=e=>()=>e;function kG(e,{sourceEvent:t,target:n,transform:r,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:o}})}function ho(e,t,n){this.k=e,this.x=t,this.y=n}ho.prototype={constructor:ho,scale:function(e){return e===1?this:new ho(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new ho(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var wf=new ho(1,0,0);V2.prototype=ho.prototype;function V2(e){for(;!e.__zoom;)if(!(e=e.parentNode))return wf;return e.__zoom}function kb(e){e.stopImmediatePropagation()}function sl(e){e.preventDefault(),e.stopImmediatePropagation()}function PG(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function AG(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function U2(){return this.__zoom||wf}function TG(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function RG(){return navigator.maxTouchPoints||"ontouchstart"in this}function IG(e,t,n){var r=e.invertX(t[0][0])-n[0][0],o=e.invertX(t[1][0])-n[1][0],a=e.invertY(t[0][1])-n[0][1],i=e.invertY(t[1][1])-n[1][1];return e.translate(o>r?(r+o)/2:Math.min(0,r)||Math.max(0,o),i>a?(a+i)/2:Math.min(0,a)||Math.max(0,i))}function H2(){var e=PG,t=AG,n=IG,r=TG,o=RG,a=[0,1/0],i=[[-1/0,-1/0],[1/0,1/0]],s=250,c=gJ,l=ef("start","zoom","end"),u,d,f,p=500,y=150,m=0,v=10;function b(C){C.property("__zoom",U2).on("wheel.zoom",O,{passive:!1}).on("mousedown.zoom",k).on("dblclick.zoom",N).filter(o).on("touchstart.zoom",P).on("touchmove.zoom",R).on("touchend.zoom touchcancel.zoom",A).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}b.transform=function(C,M,T,D){var I=C.selection?C.selection():C;I.property("__zoom",U2),C!==I?j(C,M,T,D):I.interrupt().each(function(){E(this,arguments).event(D).start().zoom(null,typeof M=="function"?M.apply(this,arguments):M).end()})},b.scaleBy=function(C,M,T,D){b.scaleTo(C,function(){var I=this.__zoom.k,L=typeof M=="function"?M.apply(this,arguments):M;return I*L},T,D)},b.scaleTo=function(C,M,T,D){b.transform(C,function(){var I=t.apply(this,arguments),L=this.__zoom,B=T==null?w(I):typeof T=="function"?T.apply(this,arguments):T,U=L.invert(B),F=typeof M=="function"?M.apply(this,arguments):M;return n(_(x(L,F),B,U),I,i)},T,D)},b.translateBy=function(C,M,T,D){b.transform(C,function(){return n(this.__zoom.translate(typeof M=="function"?M.apply(this,arguments):M,typeof T=="function"?T.apply(this,arguments):T),t.apply(this,arguments),i)},null,D)},b.translateTo=function(C,M,T,D,I){b.transform(C,function(){var L=t.apply(this,arguments),B=this.__zoom,U=D==null?w(L):typeof D=="function"?D.apply(this,arguments):D;return n(wf.translate(U[0],U[1]).scale(B.k).translate(typeof M=="function"?-M.apply(this,arguments):-M,typeof T=="function"?-T.apply(this,arguments):-T),L,i)},D,I)};function x(C,M){return M=Math.max(a[0],Math.min(a[1],M)),M===C.k?C:new ho(M,C.x,C.y)}function _(C,M,T){var D=M[0]-T[0]*C.k,I=M[1]-T[1]*C.k;return D===C.x&&I===C.y?C:new ho(C.k,D,I)}function w(C){return[(+C[0][0]+ +C[1][0])/2,(+C[0][1]+ +C[1][1])/2]}function j(C,M,T,D){C.on("start.zoom",function(){E(this,arguments).event(D).start()}).on("interrupt.zoom end.zoom",function(){E(this,arguments).event(D).end()}).tween("zoom",function(){var I=this,L=arguments,B=E(I,L).event(D),U=t.apply(I,L),F=T==null?w(U):typeof T=="function"?T.apply(I,L):T,H=Math.max(U[1][0]-U[0][0],U[1][1]-U[0][1]),J=I.__zoom,q=typeof M=="function"?M.apply(I,L):M,re=c(J.invert(F).concat(H/J.k),q.invert(F).concat(H/q.k));return function(Z){if(Z===1)Z=q;else{var Y=re(Z),W=H/Y[2];Z=new ho(W,F[0]-Y[0]*W,F[1]-Y[1]*W)}B.zoom(null,Z)}})}function E(C,M,T){return!T&&C.__zooming||new S(C,M)}function S(C,M){this.that=C,this.args=M,this.active=0,this.sourceEvent=null,this.extent=t.apply(C,M),this.taps=0}S.prototype={event:function(C){return C&&(this.sourceEvent=C),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(C,M){return this.mouse&&C!=="mouse"&&(this.mouse[1]=M.invert(this.mouse[0])),this.touch0&&C!=="touch"&&(this.touch0[1]=M.invert(this.touch0[0])),this.touch1&&C!=="touch"&&(this.touch1[1]=M.invert(this.touch1[0])),this.that.__zoom=M,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(C){var M=Ln(this.that).datum();l.call(C,this.that,new kG(C,{sourceEvent:this.sourceEvent,target:b,type:C,transform:this.that.__zoom,dispatch:l}),M)}};function O(C,...M){if(!e.apply(this,arguments))return;var T=E(this,M).event(C),D=this.__zoom,I=Math.max(a[0],Math.min(a[1],D.k*Math.pow(2,r.apply(this,arguments)))),L=fr(C);if(T.wheel)(T.mouse[0][0]!==L[0]||T.mouse[0][1]!==L[1])&&(T.mouse[1]=D.invert(T.mouse[0]=L)),clearTimeout(T.wheel);else{if(D.k===I)return;T.mouse=[L,D.invert(L)],bf(this),T.start()}sl(C),T.wheel=setTimeout(B,y),T.zoom("mouse",n(_(x(D,I),T.mouse[0],T.mouse[1]),T.extent,i));function B(){T.wheel=null,T.end()}}function k(C,...M){if(f||!e.apply(this,arguments))return;var T=C.currentTarget,D=E(this,M,!0).event(C),I=Ln(C.view).on("mousemove.zoom",F,!0).on("mouseup.zoom",H,!0),L=fr(C,T),B=C.clientX,U=C.clientY;d2(C.view),kb(C),D.mouse=[L,this.__zoom.invert(L)],bf(this),D.start();function F(J){if(sl(J),!D.moved){var q=J.clientX-B,re=J.clientY-U;D.moved=q*q+re*re>m}D.event(J).zoom("mouse",n(_(D.that.__zoom,D.mouse[0]=fr(J,T),D.mouse[1]),D.extent,i))}function H(J){I.on("mousemove.zoom mouseup.zoom",null),f2(J.view,D.moved),sl(J),D.event(J).end()}}function N(C,...M){if(e.apply(this,arguments)){var T=this.__zoom,D=fr(C.changedTouches?C.changedTouches[0]:C,this),I=T.invert(D),L=T.k*(C.shiftKey?.5:2),B=n(_(x(T,L),D,I),t.apply(this,M),i);sl(C),s>0?Ln(this).transition().duration(s).call(j,B,D,C):Ln(this).call(b.transform,B,D,C)}}function P(C,...M){if(e.apply(this,arguments)){var T=C.touches,D=T.length,I=E(this,M,C.changedTouches.length===D).event(C),L,B,U,F;for(kb(C),B=0;B<D;++B)U=T[B],F=fr(U,this),F=[F,this.__zoom.invert(F),U.identifier],I.touch0?!I.touch1&&I.touch0[2]!==F[2]&&(I.touch1=F,I.taps=0):(I.touch0=F,L=!0,I.taps=1+!!u);u&&(u=clearTimeout(u)),L&&(I.taps<2&&(d=F[0],u=setTimeout(function(){u=null},p)),bf(this),I.start())}}function R(C,...M){if(this.__zooming){var T=E(this,M).event(C),D=C.changedTouches,I=D.length,L,B,U,F;for(sl(C),L=0;L<I;++L)B=D[L],U=fr(B,this),T.touch0&&T.touch0[2]===B.identifier?T.touch0[0]=U:T.touch1&&T.touch1[2]===B.identifier&&(T.touch1[0]=U);if(B=T.that.__zoom,T.touch1){var H=T.touch0[0],J=T.touch0[1],q=T.touch1[0],re=T.touch1[1],Z=(Z=q[0]-H[0])*Z+(Z=q[1]-H[1])*Z,Y=(Y=re[0]-J[0])*Y+(Y=re[1]-J[1])*Y;B=x(B,Math.sqrt(Z/Y)),U=[(H[0]+q[0])/2,(H[1]+q[1])/2],F=[(J[0]+re[0])/2,(J[1]+re[1])/2]}else if(T.touch0)U=T.touch0[0],F=T.touch0[1];else return;T.zoom("touch",n(_(B,U,F),T.extent,i))}}function A(C,...M){if(this.__zooming){var T=E(this,M).event(C),D=C.changedTouches,I=D.length,L,B;for(kb(C),f&&clearTimeout(f),f=setTimeout(function(){f=null},p),L=0;L<I;++L)B=D[L],T.touch0&&T.touch0[2]===B.identifier?delete T.touch0:T.touch1&&T.touch1[2]===B.identifier&&delete T.touch1;if(T.touch1&&!T.touch0&&(T.touch0=T.touch1,delete T.touch1),T.touch0)T.touch0[1]=this.__zoom.invert(T.touch0[0]);else if(T.end(),T.taps===2&&(B=fr(B,this),Math.hypot(d[0]-B[0],d[1]-B[1])<v)){var U=Ln(this).on("dblclick.zoom");U&&U.apply(this,arguments)}}}return b.wheelDelta=function(C){return arguments.length?(r=typeof C=="function"?C:xf(+C),b):r},b.filter=function(C){return arguments.length?(e=typeof C=="function"?C:xf(!!C),b):e},b.touchable=function(C){return arguments.length?(o=typeof C=="function"?C:xf(!!C),b):o},b.extent=function(C){return arguments.length?(t=typeof C=="function"?C:xf([[+C[0][0],+C[0][1]],[+C[1][0],+C[1][1]]]),b):t},b.scaleExtent=function(C){return arguments.length?(a[0]=+C[0],a[1]=+C[1],b):[a[0],a[1]]},b.translateExtent=function(C){return arguments.length?(i[0][0]=+C[0][0],i[1][0]=+C[1][0],i[0][1]=+C[0][1],i[1][1]=+C[1][1],b):[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},b.constrain=function(C){return arguments.length?(n=C,b):n},b.duration=function(C){return arguments.length?(s=+C,b):s},b.interpolate=function(C){return arguments.length?(c=C,b):c},b.on=function(){var C=l.on.apply(l,arguments);return C===l?b:C},b.clickDistance=function(C){return arguments.length?(m=(C=+C)*C,b):Math.sqrt(m)},b.tapDistance=function(C){return arguments.length?(v=+C,b):v},b}const mo={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:n,targetHandle:r})=>`Couldn't create edge for ${e} handle id: "${e==="source"?n:r}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`},cl=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],W2=["Enter"," ","Escape"];var qi;(function(e){e.Strict="strict",e.Loose="loose"})(qi||(qi={}));var Xo;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Xo||(Xo={}));var ll;(function(e){e.Partial="partial",e.Full="full"})(ll||(ll={}));const q2={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var Qo;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Qo||(Qo={}));var _f;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(_f||(_f={}));var fe;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(fe||(fe={}));const Y2={[fe.Left]:fe.Right,[fe.Right]:fe.Left,[fe.Top]:fe.Bottom,[fe.Bottom]:fe.Top};function DG(e,t){if(!e&&!t)return!0;if(!e||!t||e.size!==t.size)return!1;if(!e.size&&!t.size)return!0;for(const n of e.keys())if(!t.has(n))return!1;return!0}function K2(e,t,n){if(!n)return;const r=[];e.forEach((o,a)=>{t!=null&&t.has(a)||r.push(o)}),r.length&&n(r)}function X2(e){return e===null?null:e?"valid":"invalid"}const Q2=e=>"id"in e&&"source"in e&&"target"in e,LG=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),Pb=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),ul=(e,t=[0,0])=>{const{width:n,height:r}=yo(e),o=e.origin??t,a=n*o[0],i=r*o[1];return{x:e.position.x-a,y:e.position.y-i}},FG=(e,t={nodeOrigin:[0,0],nodeLookup:void 0})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,o)=>{const a=typeof o=="string";let i=!t.nodeLookup&&!a?o:void 0;t.nodeLookup&&(i=a?t.nodeLookup.get(o):Pb(o)?o:t.nodeLookup.get(o.id));const s=i?Sf(i,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return jf(r,s)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Ef(n)},dl=(e,t={})=>{if(e.size===0)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return e.forEach(r=>{if(t.filter===void 0||t.filter(r)){const o=Sf(r);n=jf(n,o)}}),Ef(n)},J2=(e,t,[n,r,o]=[0,0,1],a=!1,i=!1)=>{const s={...pl(t,[n,r,o]),width:t.width/o,height:t.height/o},c=[];for(const l of e.values()){const{measured:u,selectable:d=!0,hidden:f=!1}=l;if(i&&!d||f)continue;const p=u.width??l.width??l.initialWidth??null,y=u.height??l.height??l.initialHeight??null,m=fl(s,Ki(l)),v=(p??0)*(y??0),b=a&&m>0;(!l.internals.handleBounds||b||m>=v||l.dragging)&&c.push(l)}return c},BG=(e,t)=>{const n=new Set;return e.forEach(r=>{n.add(r.id)}),t.filter(r=>n.has(r.source)||n.has(r.target))};function Ab(e,t){const n=new Map,r=t!=null&&t.nodes?new Set(t.nodes.map(o=>o.id)):null;return e.forEach(o=>{o.measured.width&&o.measured.height&&(t!=null&&t.includeHiddenNodes||!o.hidden)&&(!r||r.has(o.id))&&n.set(o.id,o)}),n}async function Tb({nodes:e,width:t,height:n,panZoom:r,minZoom:o,maxZoom:a},i){if(e.size===0)return Promise.resolve(!1);const s=dl(e),c=Ib(s,t,n,(i==null?void 0:i.minZoom)??o,(i==null?void 0:i.maxZoom)??a,(i==null?void 0:i.padding)??.1);return await r.setViewport(c,{duration:i==null?void 0:i.duration}),Promise.resolve(!0)}function G2({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:r=[0,0],nodeExtent:o,onError:a}){const i=n.get(e),s=i.parentId?n.get(i.parentId):void 0,{x:c,y:l}=s?s.internals.positionAbsolute:{x:0,y:0},u=i.origin??r;let d=o;if(i.extent==="parent"&&!i.expandParent)if(!s)a==null||a("005",mo.error005());else{const p=s.measured.width,y=s.measured.height;p&&y&&(d=[[c,l],[c+p,l+y]])}else s&&Xi(i.extent)&&(d=[[i.extent[0][0]+c,i.extent[0][1]+l],[i.extent[1][0]+c,i.extent[1][1]+l]]);const f=Xi(d)?Ia(t,d,i.measured):t;return{position:{x:f.x-c+i.measured.width*u[0],y:f.y-l+i.measured.height*u[1]},positionAbsolute:f}}async function $G({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:r,onBeforeDelete:o}){const a=new Set(e.map(d=>d.id)),i=[];for(const d of n){if(d.deletable===!1)continue;const f=a.has(d.id),p=!f&&d.parentId&&i.find(y=>y.id===d.parentId);(f||p)&&i.push(d)}const s=new Set(t.map(d=>d.id)),c=r.filter(d=>d.deletable!==!1),l=BG(i,c);for(const d of c)s.has(d.id)&&!l.find(f=>f.id===d.id)&&l.push(d);if(!o)return{edges:l,nodes:i};const u=await o({nodes:i,edges:l});return typeof u=="boolean"?u?{edges:l,nodes:i}:{edges:[],nodes:[]}:u}const Yi=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),Ia=(e={x:0,y:0},t,n)=>({x:Yi(e.x,t[0][0],t[1][0]-((n==null?void 0:n.width)??0)),y:Yi(e.y,t[0][1],t[1][1]-((n==null?void 0:n.height)??0))});function Z2(e,t,n){const{width:r,height:o}=yo(n),{x:a,y:i}=n.internals.positionAbsolute;return Ia(e,[[a,i],[a+r,i+o]],t)}const eT=(e,t,n)=>e<t?Yi(Math.abs(e-t),1,t)/t:e>n?-Yi(Math.abs(e-n),1,t)/t:0,tT=(e,t,n=15,r=40)=>{const o=eT(e.x,r,t.width-r)*n,a=eT(e.y,r,t.height-r)*n;return[o,a]},jf=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),Rb=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),Ef=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),Ki=(e,t=[0,0])=>{var o,a;const{x:n,y:r}=Pb(e)?e.internals.positionAbsolute:ul(e,t);return{x:n,y:r,width:((o=e.measured)==null?void 0:o.width)??e.width??e.initialWidth??0,height:((a=e.measured)==null?void 0:a.height)??e.height??e.initialHeight??0}},Sf=(e,t=[0,0])=>{var o,a;const{x:n,y:r}=Pb(e)?e.internals.positionAbsolute:ul(e,t);return{x:n,y:r,x2:n+(((o=e.measured)==null?void 0:o.width)??e.width??e.initialWidth??0),y2:r+(((a=e.measured)==null?void 0:a.height)??e.height??e.initialHeight??0)}},nT=(e,t)=>Ef(jf(Rb(e),Rb(t))),fl=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},rT=e=>yr(e.width)&&yr(e.height)&&yr(e.x)&&yr(e.y),yr=e=>!isNaN(e)&&isFinite(e),zG=(e,t)=>{},Cf=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),pl=({x:e,y:t},[n,r,o],a=!1,i=[1,1])=>{const s={x:(e-n)/o,y:(t-r)/o};return a?Cf(s,i):s},oT=({x:e,y:t},[n,r,o])=>({x:e*o+n,y:t*o+r}),Ib=(e,t,n,r,o,a)=>{const i=t/(e.width*(1+a)),s=n/(e.height*(1+a)),c=Math.min(i,s),l=Yi(c,r,o),u=e.x+e.width/2,d=e.y+e.height/2,f=t/2-u*l,p=n/2-d*l;return{x:f,y:p,zoom:l}},Of=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function Xi(e){return e!==void 0&&e!=="parent"}function yo(e){var t,n;return{width:((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth??0,height:((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight??0}}function aT(e){var t,n;return(((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth)!==void 0&&(((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight)!==void 0}function iT(e,t={width:0,height:0},n,r,o){const a={...e},i=r.get(n);if(i){const s=i.origin||o;a.x+=i.internals.positionAbsolute.x-(t.width??0)*s[0],a.y+=i.internals.positionAbsolute.y-(t.height??0)*s[1]}return a}function hl(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:r,containerBounds:o}){const{x:a,y:i}=go(e),s=pl({x:a-((o==null?void 0:o.left)??0),y:i-((o==null?void 0:o.top)??0)},r),{x:c,y:l}=n?Cf(s,t):s;return{xSnapped:c,ySnapped:l,...s}}const Nf=e=>({width:e.offsetWidth,height:e.offsetHeight}),sT=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},VG=["INPUT","SELECT","TEXTAREA"];function Db(e){var n,r;const t=((r=(n=e.composedPath)==null?void 0:n.call(e))==null?void 0:r[0])||e.target;return VG.includes(t==null?void 0:t.nodeName)||(t==null?void 0:t.hasAttribute("contenteditable"))||!!(t!=null&&t.closest(".nokey"))}const cT=e=>"clientX"in e,go=(e,t)=>{var a,i;const n=cT(e),r=n?e.clientX:(a=e.touches)==null?void 0:a[0].clientX,o=n?e.clientY:(i=e.touches)==null?void 0:i[0].clientY;return{x:r-((t==null?void 0:t.left)??0),y:o-((t==null?void 0:t.top)??0)}},lT=(e,t,n,r,o)=>{const a=t.querySelectorAll(`.${e}`);return!a||!a.length?null:Array.from(a).map(i=>{const s=i.getBoundingClientRect();return{id:i.getAttribute("data-handleid"),type:e,nodeId:o,position:i.getAttribute("data-handlepos"),x:(s.left-n.left)/r,y:(s.top-n.top)/r,...Nf(i)}})};function uT({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:o,sourceControlY:a,targetControlX:i,targetControlY:s}){const c=e*.125+o*.375+i*.375+n*.125,l=t*.125+a*.375+s*.375+r*.125,u=Math.abs(c-e),d=Math.abs(l-t);return[c,l,u,d]}function Mf(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function dT({pos:e,x1:t,y1:n,x2:r,y2:o,c:a}){switch(e){case fe.Left:return[t-Mf(t-r,a),n];case fe.Right:return[t+Mf(r-t,a),n];case fe.Top:return[t,n-Mf(n-o,a)];case fe.Bottom:return[t,n+Mf(o-n,a)]}}function fT({sourceX:e,sourceY:t,sourcePosition:n=fe.Bottom,targetX:r,targetY:o,targetPosition:a=fe.Top,curvature:i=.25}){const[s,c]=dT({pos:n,x1:e,y1:t,x2:r,y2:o,c:i}),[l,u]=dT({pos:a,x1:r,y1:o,x2:e,y2:t,c:i}),[d,f,p,y]=uT({sourceX:e,sourceY:t,targetX:r,targetY:o,sourceControlX:s,sourceControlY:c,targetControlX:l,targetControlY:u});return[`M${e},${t} C${s},${c} ${l},${u} ${r},${o}`,d,f,p,y]}function pT({sourceX:e,sourceY:t,targetX:n,targetY:r}){const o=Math.abs(n-e)/2,a=n<e?n+o:n-o,i=Math.abs(r-t)/2,s=r<t?r+i:r-i;return[a,s,o,i]}function UG({sourceNode:e,targetNode:t,selected:n=!1,zIndex:r=0,elevateOnSelect:o=!1}){if(!o)return r;const a=n||t.selected||e.selected,i=Math.max(e.internals.z||0,t.internals.z||0,1e3);return r+(a?i:0)}function HG({sourceNode:e,targetNode:t,width:n,height:r,transform:o}){const a=jf(Sf(e),Sf(t));a.x===a.x2&&(a.x2+=1),a.y===a.y2&&(a.y2+=1);const i={x:-o[0]/o[2],y:-o[1]/o[2],width:n/o[2],height:r/o[2]};return fl(i,Ef(a))>0}const WG=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`xy-edge__${e}${t||""}-${n}${r||""}`,qG=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),hT=(e,t)=>{if(!e.source||!e.target)return t;let n;return Q2(e)?n={...e}:n={...e,id:WG(e)},qG(n,t)?t:(n.sourceHandle===null&&delete n.sourceHandle,n.targetHandle===null&&delete n.targetHandle,t.concat(n))};function mT({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[o,a,i,s]=pT({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,o,a,i,s]}const yT={[fe.Left]:{x:-1,y:0},[fe.Right]:{x:1,y:0},[fe.Top]:{x:0,y:-1},[fe.Bottom]:{x:0,y:1}},YG=({source:e,sourcePosition:t=fe.Bottom,target:n})=>t===fe.Left||t===fe.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},gT=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function KG({source:e,sourcePosition:t=fe.Bottom,target:n,targetPosition:r=fe.Top,center:o,offset:a}){const i=yT[t],s=yT[r],c={x:e.x+i.x*a,y:e.y+i.y*a},l={x:n.x+s.x*a,y:n.y+s.y*a},u=YG({source:c,sourcePosition:t,target:l}),d=u.x!==0?"x":"y",f=u[d];let p=[],y,m;const v={x:0,y:0},b={x:0,y:0},[x,_,w,j]=pT({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(i[d]*s[d]===-1){y=o.x??x,m=o.y??_;const E=[{x:y,y:c.y},{x:y,y:l.y}],S=[{x:c.x,y:m},{x:l.x,y:m}];i[d]===f?p=d==="x"?E:S:p=d==="x"?S:E}else{const E=[{x:c.x,y:l.y}],S=[{x:l.x,y:c.y}];if(d==="x"?p=i.x===f?S:E:p=i.y===f?E:S,t===r){const R=Math.abs(e[d]-n[d]);if(R<=a){const A=Math.min(a-1,a-R);i[d]===f?v[d]=(c[d]>e[d]?-1:1)*A:b[d]=(l[d]>n[d]?-1:1)*A}}if(t!==r){const R=d==="x"?"y":"x",A=i[d]===s[R],C=c[R]>l[R],M=c[R]<l[R];(i[d]===1&&(!A&&C||A&&M)||i[d]!==1&&(!A&&M||A&&C))&&(p=d==="x"?E:S)}const O={x:c.x+v.x,y:c.y+v.y},k={x:l.x+b.x,y:l.y+b.y},N=Math.max(Math.abs(O.x-p[0].x),Math.abs(k.x-p[0].x)),P=Math.max(Math.abs(O.y-p[0].y),Math.abs(k.y-p[0].y));N>=P?(y=(O.x+k.x)/2,m=p[0].y):(y=p[0].x,m=(O.y+k.y)/2)}return[[e,{x:c.x+v.x,y:c.y+v.y},...p,{x:l.x+b.x,y:l.y+b.y},n],y,m,w,j]}function XG(e,t,n,r){const o=Math.min(gT(e,t)/2,gT(t,n)/2,r),{x:a,y:i}=t;if(e.x===a&&a===n.x||e.y===i&&i===n.y)return`L${a} ${i}`;if(e.y===i){const l=e.x<n.x?-1:1,u=e.y<n.y?1:-1;return`L ${a+o*l},${i}Q ${a},${i} ${a},${i+o*u}`}const s=e.x<n.x?1:-1,c=e.y<n.y?-1:1;return`L ${a},${i+o*c}Q ${a},${i} ${a+o*s},${i}`}function Lb({sourceX:e,sourceY:t,sourcePosition:n=fe.Bottom,targetX:r,targetY:o,targetPosition:a=fe.Top,borderRadius:i=5,centerX:s,centerY:c,offset:l=20}){const[u,d,f,p,y]=KG({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:o},targetPosition:a,center:{x:s,y:c},offset:l});return[u.reduce((m,v,b)=>{let x="";return b>0&&b<u.length-1?x=XG(u[b-1],v,u[b+1],i):x=`${b===0?"M":"L"}${v.x} ${v.y}`,m+=x,m},""),d,f,p,y]}function vT(e){var t;return e&&!!(e.internals.handleBounds||(t=e.handles)!=null&&t.length)&&!!(e.measured.width||e.width||e.initialWidth)}function QG(e){var d;const{sourceNode:t,targetNode:n}=e;if(!vT(t)||!vT(n))return null;const r=t.internals.handleBounds||bT(t.handles),o=n.internals.handleBounds||bT(n.handles),a=xT((r==null?void 0:r.source)??[],e.sourceHandle),i=xT(e.connectionMode===qi.Strict?(o==null?void 0:o.target)??[]:((o==null?void 0:o.target)??[]).concat((o==null?void 0:o.source)??[]),e.targetHandle);if(!a||!i)return(d=e.onError)==null||d.call(e,"008",mo.error008(a?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const s=(a==null?void 0:a.position)||fe.Bottom,c=(i==null?void 0:i.position)||fe.Top,l=ml(t,a,s),u=ml(n,i,c);return{sourceX:l.x,sourceY:l.y,targetX:u.x,targetY:u.y,sourcePosition:s,targetPosition:c}}function bT(e){if(!e)return null;const t=[],n=[];for(const r of e)r.width=r.width??1,r.height=r.height??1,r.type==="source"?t.push(r):r.type==="target"&&n.push(r);return{source:t,target:n}}function ml(e,t,n=fe.Left,r=!1){const o=((t==null?void 0:t.x)??0)+e.internals.positionAbsolute.x,a=((t==null?void 0:t.y)??0)+e.internals.positionAbsolute.y,{width:i,height:s}=t??yo(e);if(r)return{x:o+i/2,y:a+s/2};switch((t==null?void 0:t.position)??n){case fe.Top:return{x:o+i/2,y:a};case fe.Right:return{x:o+i,y:a+s/2};case fe.Bottom:return{x:o+i/2,y:a+s};case fe.Left:return{x:o,y:a+s/2}}}function xT(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function Fb(e,t){return e?typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(n=>`${n}=${e[n]}`).join("&")}`:""}function JG(e,{id:t,defaultColor:n,defaultMarkerStart:r,defaultMarkerEnd:o}){const a=new Set;return e.reduce((i,s)=>([s.markerStart||r,s.markerEnd||o].forEach(c=>{if(c&&typeof c=="object"){const l=Fb(c,t);a.has(l)||(i.push({id:l,color:c.color||n,...c}),a.add(l))}}),i),[]).sort((i,s)=>i.id.localeCompare(s.id))}const Bb={nodeOrigin:[0,0],nodeExtent:cl,elevateNodesOnSelect:!0,defaults:{}},GG={...Bb,checkEquality:!0};function $b(e,t){const n={...e};for(const r in t)t[r]!==void 0&&(n[r]=t[r]);return n}function ZG(e,t,n){const r=$b(Bb,n);for(const o of e.values())if(o.parentId)Vb(o,e,t,r);else{const a=ul(o,r.nodeOrigin),i=Xi(o.extent)?o.extent:r.nodeExtent,s=Ia(a,i,yo(o));o.internals.positionAbsolute=s}}function zb(e,t,n,r){var s,c;const o=$b(GG,r),a=new Map(t),i=o!=null&&o.elevateNodesOnSelect?1e3:0;t.clear(),n.clear();for(const l of e){let u=a.get(l.id);if(o.checkEquality&&l===(u==null?void 0:u.internals.userNode))t.set(l.id,u);else{const d=ul(l,o.nodeOrigin),f=Xi(l.extent)?l.extent:o.nodeExtent,p=Ia(d,f,yo(l));u={...o.defaults,...l,measured:{width:(s=l.measured)==null?void 0:s.width,height:(c=l.measured)==null?void 0:c.height},internals:{positionAbsolute:p,handleBounds:l.measured?u==null?void 0:u.internals.handleBounds:void 0,z:wT(l,i),userNode:l}},t.set(l.id,u)}l.parentId&&Vb(u,t,n,r)}}function eZ(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function Vb(e,t,n,r){const{elevateNodesOnSelect:o,nodeOrigin:a,nodeExtent:i}=$b(Bb,r),s=e.parentId,c=t.get(s);if(!c){console.warn(`Parent node ${s} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}eZ(e,n);const l=o?1e3:0,{x:u,y:d,z:f}=tZ(e,c,a,i,l),{positionAbsolute:p}=e.internals,y=u!==p.x||d!==p.y;(y||f!==e.internals.z)&&(e.internals={...e.internals,positionAbsolute:y?{x:u,y:d}:p,z:f})}function wT(e,t){return(yr(e.zIndex)?e.zIndex:0)+(e.selected?t:0)}function tZ(e,t,n,r,o){const{x:a,y:i}=t.internals.positionAbsolute,s=yo(e),c=ul(e,n),l=Xi(e.extent)?Ia(c,e.extent,s):c;let u=Ia({x:a+l.x,y:i+l.y},r,s);e.extent==="parent"&&(u=Z2(u,s,t));const d=wT(e,o),f=t.internals.z??0;return{x:u.x,y:u.y,z:f>d?f:d}}function Ub(e,t,n,r=[0,0]){var i;const o=[],a=new Map;for(const s of e){const c=t.get(s.parentId);if(!c)continue;const l=((i=a.get(s.parentId))==null?void 0:i.expandedRect)??Ki(c),u=nT(l,s.rect);a.set(s.parentId,{expandedRect:u,parent:c})}return a.size>0&&a.forEach(({expandedRect:s,parent:c},l)=>{var _;const u=c.internals.positionAbsolute,d=yo(c),f=c.origin??r,p=s.x<u.x?Math.round(Math.abs(u.x-s.x)):0,y=s.y<u.y?Math.round(Math.abs(u.y-s.y)):0,m=Math.max(d.width,Math.round(s.width)),v=Math.max(d.height,Math.round(s.height)),b=(m-d.width)*f[0],x=(v-d.height)*f[1];(p>0||y>0||b||x)&&(o.push({id:l,type:"position",position:{x:c.position.x-p+b,y:c.position.y-y+x}}),(_=n.get(l))==null||_.forEach(w=>{e.some(j=>j.id===w.id)||o.push({id:w.id,type:"position",position:{x:w.position.x+p,y:w.position.y+y}})})),(d.width<s.width||d.height<s.height||p||y)&&o.push({id:l,type:"dimensions",setAttributes:!0,dimensions:{width:m+(p?f[0]*p-b:0),height:v+(y?f[1]*y-x:0)}})}),o}function nZ(e,t,n,r,o,a){const i=r==null?void 0:r.querySelector(".xyflow__viewport");let s=!1;if(!i)return{changes:[],updatedInternals:s};const c=[],l=window.getComputedStyle(i),{m22:u}=new window.DOMMatrixReadOnly(l.transform),d=[];for(const f of e.values()){const p=t.get(f.id);if(p)if(p.hidden)p.internals={...p.internals,handleBounds:void 0},s=!0;else{const y=Nf(f.nodeElement),m=p.measured.width!==y.width||p.measured.height!==y.height;if(y.width&&y.height&&(m||!p.internals.handleBounds||f.force)){const v=f.nodeElement.getBoundingClientRect(),b=Xi(p.extent)?p.extent:a;let{positionAbsolute:x}=p.internals;p.parentId&&p.extent==="parent"?x=Z2(x,y,t.get(p.parentId)):b&&(x=Ia(x,b,y)),p.measured=y,p.internals={...p.internals,positionAbsolute:x,handleBounds:{source:lT("source",f.nodeElement,v,u,p.id),target:lT("target",f.nodeElement,v,u,p.id)}},p.parentId&&Vb(p,t,n,{nodeOrigin:o}),s=!0,m&&(c.push({id:p.id,type:"dimensions",dimensions:y}),p.expandParent&&p.parentId&&d.push({id:p.id,parentId:p.parentId,rect:Ki(p,o)}))}}}if(d.length>0){const f=Ub(d,t,n,o);c.push(...f)}return{changes:c,updatedInternals:s}}async function rZ({delta:e,panZoom:t,transform:n,translateExtent:r,width:o,height:a}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const i=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[o,a]],r),s=!!i&&(i.x!==n[0]||i.y!==n[1]||i.k!==n[2]);return Promise.resolve(s)}function _T(e,t,n){e.clear(),t.clear();for(const r of n){const{source:o,target:a,sourceHandle:i=null,targetHandle:s=null}=r,c=`${o}-source-${i}`,l=`${a}-target-${s}`,u=e.get(c)||new Map,d=e.get(l)||new Map,f={edgeId:r.id,source:o,target:a,sourceHandle:i,targetHandle:s};t.set(r.id,r),e.set(c,u.set(`${a}-${s}`,f)),e.set(l,d.set(`${o}-${i}`,f))}}function jT(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return n?n.selected?!0:jT(n,t):!1}function ET(e,t,n){let r=e;do{if(r!=null&&r.matches(t))return!0;if(r===n)return!1;r=r.parentElement}while(r);return!1}function oZ(e,t,n,r){const o=new Map;for(const[a,i]of e)if((i.selected||i.id===r)&&(!i.parentId||!jT(i,e))&&(i.draggable||t&&typeof i.draggable>"u")){const s=e.get(a);s&&o.set(a,{id:a,position:s.position||{x:0,y:0},distance:{x:n.x-s.internals.positionAbsolute.x,y:n.y-s.internals.positionAbsolute.y},extent:s.extent,parentId:s.parentId,origin:s.origin,expandParent:s.expandParent,internals:{positionAbsolute:s.internals.positionAbsolute||{x:0,y:0}},measured:{width:s.measured.width??0,height:s.measured.height??0}})}return o}function Hb({nodeId:e,dragItems:t,nodeLookup:n,dragging:r=!0}){var i,s,c;const o=[];for(const[l,u]of t){const d=(i=n.get(l))==null?void 0:i.internals.userNode;d&&o.push({...d,position:u.position,dragging:r})}if(!e)return[o[0],o];const a=(s=n.get(e))==null?void 0:s.internals.userNode;return[a?{...a,position:((c=t.get(e))==null?void 0:c.position)||a.position,dragging:r}:o[0],o]}function aZ({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:r,onDragStop:o}){let a={x:null,y:null},i=0,s=new Map,c=!1,l={x:0,y:0},u=null,d=!1,f=null,p=!1;function y({noDragClassName:v,handleSelector:b,domNode:x,isSelectable:_,nodeId:w,nodeClickDistance:j=0}){f=Ln(x);function E({x:N,y:P},R){const{nodeLookup:A,nodeExtent:C,snapGrid:M,snapToGrid:T,nodeOrigin:D,onNodeDrag:I,onSelectionDrag:L,onError:B,updateNodePositions:U}=t();a={x:N,y:P};let F=!1,H={x:0,y:0,x2:0,y2:0};if(s.size>1&&C){const J=dl(s);H=Rb(J)}for(const[J,q]of s){if(!A.has(J))continue;let re={x:N-q.distance.x,y:P-q.distance.y};T&&(re=Cf(re,M));let Z=[[C[0][0],C[0][1]],[C[1][0],C[1][1]]];if(s.size>1&&C&&!q.extent){const{positionAbsolute:G}=q.internals,te=G.x-H.x+C[0][0],$=G.x+q.measured.width-H.x2+C[1][0],se=G.y-H.y+C[0][1],le=G.y+q.measured.height-H.y2+C[1][1];Z=[[te,se],[$,le]]}const{position:Y,positionAbsolute:W}=G2({nodeId:J,nextPosition:re,nodeLookup:A,nodeExtent:Z,nodeOrigin:D,onError:B});F=F||q.position.x!==Y.x||q.position.y!==Y.y,q.position=Y,q.internals.positionAbsolute=W}if(F&&(U(s,!0),R&&(r||I||!w&&L))){const[J,q]=Hb({nodeId:w,dragItems:s,nodeLookup:A});r==null||r(R,s,J,q),I==null||I(R,J,q),w||(L==null||L(R,q))}}async function S(){if(!u)return;const{transform:N,panBy:P,autoPanSpeed:R}=t(),[A,C]=tT(l,u,R);(A!==0||C!==0)&&(a.x=(a.x??0)-A/N[2],a.y=(a.y??0)-C/N[2],await P({x:A,y:C})&&E(a,null)),i=requestAnimationFrame(S)}function O(N){var F;const{nodeLookup:P,multiSelectionActive:R,nodesDraggable:A,transform:C,snapGrid:M,snapToGrid:T,selectNodesOnDrag:D,onNodeDragStart:I,onSelectionDragStart:L,unselectNodesAndEdges:B}=t();d=!0,(!D||!_)&&!R&&w&&((F=P.get(w))!=null&&F.selected||B()),_&&D&&w&&(e==null||e(w));const U=hl(N.sourceEvent,{transform:C,snapGrid:M,snapToGrid:T,containerBounds:u});if(a=U,s=oZ(P,A,U,w),s.size>0&&(n||I||!w&&L)){const[H,J]=Hb({nodeId:w,dragItems:s,nodeLookup:P});n==null||n(N.sourceEvent,s,H,J),I==null||I(N.sourceEvent,H,J),w||(L==null||L(N.sourceEvent,J))}}const k=p2().clickDistance(j).on("start",N=>{const{domNode:P,nodeDragThreshold:R,transform:A,snapGrid:C,snapToGrid:M}=t();u=(P==null?void 0:P.getBoundingClientRect())||null,p=!1,R===0&&O(N),a=hl(N.sourceEvent,{transform:A,snapGrid:C,snapToGrid:M,containerBounds:u}),l=go(N.sourceEvent,u)}).on("drag",N=>{const{autoPanOnNodeDrag:P,transform:R,snapGrid:A,snapToGrid:C,nodeDragThreshold:M,nodeLookup:T}=t(),D=hl(N.sourceEvent,{transform:R,snapGrid:A,snapToGrid:C,containerBounds:u});if((N.sourceEvent.type==="touchmove"&&N.sourceEvent.touches.length>1||w&&!T.has(w))&&(p=!0),!p){if(!c&&P&&d&&(c=!0,S()),!d){const I=D.xSnapped-(a.x??0),L=D.ySnapped-(a.y??0);Math.sqrt(I*I+L*L)>M&&O(N)}(a.x!==D.xSnapped||a.y!==D.ySnapped)&&s&&d&&(l=go(N.sourceEvent,u),E(D,N.sourceEvent))}}).on("end",N=>{if(!(!d||p)&&(c=!1,d=!1,cancelAnimationFrame(i),s.size>0)){const{nodeLookup:P,updateNodePositions:R,onNodeDragStop:A,onSelectionDragStop:C}=t();if(R(s,!1),o||A||!w&&C){const[M,T]=Hb({nodeId:w,dragItems:s,nodeLookup:P,dragging:!1});o==null||o(N.sourceEvent,s,M,T),A==null||A(N.sourceEvent,M,T),w||(C==null||C(N.sourceEvent,T))}}}).filter(N=>{const P=N.target;return!N.button&&(!v||!ET(P,`.${v}`,x))&&(!b||ET(P,b,x))});f.call(k)}function m(){f==null||f.on(".drag",null)}return{update:y,destroy:m}}function iZ(e,t,n){const r=[],o={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const a of t.values())fl(o,Ki(a))>0&&r.push(a);return r}const sZ=250;function cZ(e,t,n,r){var s,c;let o=[],a=1/0;const i=iZ(e,n,t+sZ);for(const l of i){const u=[...((s=l.internals.handleBounds)==null?void 0:s.source)??[],...((c=l.internals.handleBounds)==null?void 0:c.target)??[]];for(const d of u){if(r.nodeId===d.nodeId&&r.type===d.type&&r.id===d.id)continue;const{x:f,y:p}=ml(l,d,d.position,!0),y=Math.sqrt(Math.pow(f-e.x,2)+Math.pow(p-e.y,2));y>t||(y<a?(o=[{...d,x:f,y:p}],a=y):y===a&&o.push({...d,x:f,y:p}))}}if(!o.length)return null;if(o.length>1){const l=r.type==="source"?"target":"source";return o.find(u=>u.type===l)??o[0]}return o[0]}function ST(e,t,n,r,o,a=!1){var l,u,d;const i=r.get(e);if(!i)return null;const s=o==="strict"?(l=i.internals.handleBounds)==null?void 0:l[t]:[...((u=i.internals.handleBounds)==null?void 0:u.source)??[],...((d=i.internals.handleBounds)==null?void 0:d.target)??[]],c=(n?s==null?void 0:s.find(f=>f.id===n):s==null?void 0:s[0])??null;return c&&a?{...c,...ml(i,c,c.position,!0)}:c}function CT(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function lZ(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}const OT=()=>!0;function uZ(e,{connectionMode:t,connectionRadius:n,handleId:r,nodeId:o,edgeUpdaterType:a,isTarget:i,domNode:s,nodeLookup:c,lib:l,autoPanOnConnect:u,flowId:d,panBy:f,cancelConnection:p,onConnectStart:y,onConnect:m,onConnectEnd:v,isValidConnection:b=OT,onReconnectEnd:x,updateConnection:_,getTransform:w,getFromHandle:j,autoPanSpeed:E}){const S=sT(e.target);let O=0,k;const{x:N,y:P}=go(e),R=S==null?void 0:S.elementFromPoint(N,P),A=CT(a,R),C=s==null?void 0:s.getBoundingClientRect();if(!C||!A)return;const M=ST(o,A,r,c,t);if(!M)return;let T=go(e,C),D=!1,I=null,L=!1,B=null;function U(){if(!u||!C)return;const[Y,W]=tT(T,C,E);f({x:Y,y:W}),O=requestAnimationFrame(U)}const F={...M,nodeId:o,type:A,position:M.position},H=c.get(o),J={inProgress:!0,isValid:null,from:ml(H,F,fe.Left,!0),fromHandle:F,fromPosition:F.position,fromNode:H,to:T,toHandle:null,toPosition:Y2[F.position],toNode:null};_(J);let q=J;y==null||y(e,{nodeId:o,handleId:r,handleType:A});function re(Y){if(!j()||!F){Z(Y);return}const W=w();T=go(Y,C),k=cZ(pl(T,W,!1,[1,1]),n,c,F),D||(U(),D=!0);const G=NT(Y,{handle:k,connectionMode:t,fromNodeId:o,fromHandleId:r,fromType:i?"target":"source",isValidConnection:b,doc:S,lib:l,flowId:d,nodeLookup:c});B=G.handleDomNode,I=G.connection,L=lZ(!!k,G.isValid);const te={...q,isValid:L,to:k&&L?oT({x:k.x,y:k.y},W):T,toHandle:G.toHandle,toPosition:L&&G.toHandle?G.toHandle.position:Y2[F.position],toNode:G.toHandle?c.get(G.toHandle.nodeId):null};L&&k&&q.toHandle&&te.toHandle&&q.toHandle.type===te.toHandle.type&&q.toHandle.nodeId===te.toHandle.nodeId&&q.toHandle.id===te.toHandle.id&&q.to.x===te.to.x&&q.to.y===te.to.y||(_(te),q=te)}function Z(Y){(k||B)&&I&&L&&(m==null||m(I));const{inProgress:W,...G}=q,te={...G,toPosition:q.toHandle?q.toPosition:null};v==null||v(Y,te),a&&(x==null||x(Y,te)),p(),cancelAnimationFrame(O),D=!1,L=!1,I=null,B=null,S.removeEventListener("mousemove",re),S.removeEventListener("mouseup",Z),S.removeEventListener("touchmove",re),S.removeEventListener("touchend",Z)}S.addEventListener("mousemove",re),S.addEventListener("mouseup",Z),S.addEventListener("touchmove",re),S.addEventListener("touchend",Z)}function NT(e,{handle:t,connectionMode:n,fromNodeId:r,fromHandleId:o,fromType:a,doc:i,lib:s,flowId:c,isValidConnection:l=OT,nodeLookup:u}){const d=a==="target",f=t?i.querySelector(`.${s}-flow__handle[data-id="${c}-${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`):null,{x:p,y}=go(e),m=i.elementFromPoint(p,y),v=m!=null&&m.classList.contains(`${s}-flow__handle`)?m:f,b={handleDomNode:v,isValid:!1,connection:null,toHandle:null};if(v){const x=CT(void 0,v),_=v.getAttribute("data-nodeid"),w=v.getAttribute("data-handleid"),j=v.classList.contains("connectable"),E=v.classList.contains("connectableend");if(!_||!x)return b;const S={source:d?_:r,sourceHandle:d?w:o,target:d?r:_,targetHandle:d?o:w};b.connection=S;const O=j&&E&&(n===qi.Strict?d&&x==="source"||!d&&x==="target":_!==r||w!==o);b.isValid=O&&l(S),b.toHandle=ST(_,x,w,u,n,!1)}return b}const Wb={onPointerDown:uZ,isValid:NT};function dZ({domNode:e,panZoom:t,getTransform:n,getViewScale:r}){const o=Ln(e);function a({translateExtent:s,width:c,height:l,zoomStep:u=10,pannable:d=!0,zoomable:f=!0,inversePan:p=!1}){const y=_=>{const w=n();if(_.sourceEvent.type!=="wheel"||!t)return;const j=-_.sourceEvent.deltaY*(_.sourceEvent.deltaMode===1?.05:_.sourceEvent.deltaMode?1:.002)*u,E=w[2]*Math.pow(2,j);t.scaleTo(E)};let m=[0,0];const v=_=>{(_.sourceEvent.type==="mousedown"||_.sourceEvent.type==="touchstart")&&(m=[_.sourceEvent.clientX??_.sourceEvent.touches[0].clientX,_.sourceEvent.clientY??_.sourceEvent.touches[0].clientY])},b=_=>{const w=n();if(_.sourceEvent.type!=="mousemove"&&_.sourceEvent.type!=="touchmove"||!t)return;const j=[_.sourceEvent.clientX??_.sourceEvent.touches[0].clientX,_.sourceEvent.clientY??_.sourceEvent.touches[0].clientY],E=[j[0]-m[0],j[1]-m[1]];m=j;const S=r()*Math.max(w[2],Math.log(w[2]))*(p?-1:1),O={x:w[0]-E[0]*S,y:w[1]-E[1]*S},k=[[0,0],[c,l]];t.setViewportConstrained({x:O.x,y:O.y,zoom:w[2]},k,s)},x=H2().on("start",v).on("zoom",d?b:null).on("zoom.wheel",f?y:null);o.call(x,{})}function i(){o.on("zoom",null)}return{update:a,destroy:i,pointer:fr}}const fZ=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,kf=e=>({x:e.x,y:e.y,zoom:e.k}),qb=({x:e,y:t,zoom:n})=>wf.translate(e,t).scale(n),Qi=(e,t)=>e.target.closest(`.${t}`),MT=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),Yb=(e,t=0,n=()=>{})=>{const r=typeof t=="number"&&t>0;return r||n(),r?e.transition().duration(t).on("end",n):e},kT=e=>{const t=e.ctrlKey&&Of()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function pZ({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:r,panOnScrollMode:o,panOnScrollSpeed:a,zoomOnPinch:i,onPanZoomStart:s,onPanZoom:c,onPanZoomEnd:l}){return u=>{if(Qi(u,t))return!1;u.preventDefault(),u.stopImmediatePropagation();const d=n.property("__zoom").k||1;if(u.ctrlKey&&i){const v=fr(u),b=kT(u),x=d*Math.pow(2,b);r.scaleTo(n,x,v,u);return}const f=u.deltaMode===1?20:1;let p=o===Xo.Vertical?0:u.deltaX*f,y=o===Xo.Horizontal?0:u.deltaY*f;!Of()&&u.shiftKey&&o!==Xo.Vertical&&(p=u.deltaY*f,y=0),r.translateBy(n,-(p/d)*a,-(y/d)*a,{internal:!0});const m=kf(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling||(e.isPanScrolling=!0,s==null||s(u,m)),e.isPanScrolling&&(c==null||c(u,m),e.panScrollTimeout=setTimeout(()=>{l==null||l(u,m),e.isPanScrolling=!1},150))}}function hZ({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(r,o){if(!t&&r.type==="wheel"&&!r.ctrlKey||Qi(r,e))return null;r.preventDefault(),n.call(this,r,o)}}function mZ({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return r=>{var a,i,s;if((a=r.sourceEvent)!=null&&a.internal)return;const o=kf(r.transform);e.mouseButton=((i=r.sourceEvent)==null?void 0:i.button)||0,e.isZoomingOrPanning=!0,e.prevViewport=o,((s=r.sourceEvent)==null?void 0:s.type)==="mousedown"&&t(!0),n&&(n==null||n(r.sourceEvent,o))}}function yZ({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:r,onPanZoom:o}){return a=>{var i,s;e.usedRightMouseButton=!!(n&&MT(t,e.mouseButton??0)),(i=a.sourceEvent)!=null&&i.sync||r([a.transform.x,a.transform.y,a.transform.k]),o&&!((s=a.sourceEvent)!=null&&s.internal)&&(o==null||o(a.sourceEvent,kf(a.transform)))}}function gZ({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:r,onPanZoomEnd:o,onPaneContextMenu:a}){return i=>{var s;if(!((s=i.sourceEvent)!=null&&s.internal)&&(e.isZoomingOrPanning=!1,a&&MT(t,e.mouseButton??0)&&!e.usedRightMouseButton&&i.sourceEvent&&a(i.sourceEvent),e.usedRightMouseButton=!1,r(!1),o&&fZ(e.prevViewport,i.transform))){const c=kf(i.transform);e.prevViewport=c,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{o==null||o(i.sourceEvent,c)},n?150:0)}}}function vZ({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:r,panOnScroll:o,zoomOnDoubleClick:a,userSelectionActive:i,noWheelClassName:s,noPanClassName:c,lib:l}){return u=>{var y;const d=e||t,f=n&&u.ctrlKey;if(u.button===1&&u.type==="mousedown"&&(Qi(u,`${l}-flow__node`)||Qi(u,`${l}-flow__edge`)))return!0;if(!r&&!d&&!o&&!a&&!n||i||Qi(u,s)&&u.type==="wheel"||Qi(u,c)&&(u.type!=="wheel"||o&&u.type==="wheel"&&!e)||!n&&u.ctrlKey&&u.type==="wheel")return!1;if(!n&&u.type==="touchstart"&&((y=u.touches)==null?void 0:y.length)>1)return u.preventDefault(),!1;if(!d&&!o&&!f&&u.type==="wheel"||!r&&(u.type==="mousedown"||u.type==="touchstart")||Array.isArray(r)&&!r.includes(u.button)&&u.type==="mousedown")return!1;const p=Array.isArray(r)&&r.includes(u.button)||!u.button||u.button<=1;return(!u.ctrlKey||u.type==="wheel")&&p}}function bZ({domNode:e,minZoom:t,maxZoom:n,paneClickDistance:r,translateExtent:o,viewport:a,onPanZoom:i,onPanZoomStart:s,onPanZoomEnd:c,onDraggingChange:l}){const u={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},d=e.getBoundingClientRect(),f=H2().clickDistance(!yr(r)||r<0?0:r).scaleExtent([t,n]).translateExtent(o),p=Ln(e).call(f);_({x:a.x,y:a.y,zoom:Yi(a.zoom,t,n)},[[0,0],[d.width,d.height]],o);const y=p.on("wheel.zoom"),m=p.on("dblclick.zoom");f.wheelDelta(kT);function v(R,A){return p?new Promise(C=>{f==null||f.transform(Yb(p,A==null?void 0:A.duration,()=>C(!0)),R)}):Promise.resolve(!1)}function b({noWheelClassName:R,noPanClassName:A,onPaneContextMenu:C,userSelectionActive:M,panOnScroll:T,panOnDrag:D,panOnScrollMode:I,panOnScrollSpeed:L,preventScrolling:B,zoomOnPinch:U,zoomOnScroll:F,zoomOnDoubleClick:H,zoomActivationKeyPressed:J,lib:q,onTransformChange:re}){M&&!u.isZoomingOrPanning&&x();const Z=T&&!J&&!M?pZ({zoomPanValues:u,noWheelClassName:R,d3Selection:p,d3Zoom:f,panOnScrollMode:I,panOnScrollSpeed:L,zoomOnPinch:U,onPanZoomStart:s,onPanZoom:i,onPanZoomEnd:c}):hZ({noWheelClassName:R,preventScrolling:B,d3ZoomHandler:y});if(p.on("wheel.zoom",Z,{passive:!1}),!M){const W=mZ({zoomPanValues:u,onDraggingChange:l,onPanZoomStart:s});f.on("start",W);const G=yZ({zoomPanValues:u,panOnDrag:D,onPaneContextMenu:!!C,onPanZoom:i,onTransformChange:re});f.on("zoom",G);const te=gZ({zoomPanValues:u,panOnDrag:D,panOnScroll:T,onPaneContextMenu:C,onPanZoomEnd:c,onDraggingChange:l});f.on("end",te)}const Y=vZ({zoomActivationKeyPressed:J,panOnDrag:D,zoomOnScroll:F,panOnScroll:T,zoomOnDoubleClick:H,zoomOnPinch:U,userSelectionActive:M,noPanClassName:A,noWheelClassName:R,lib:q});f.filter(Y),H?p.on("dblclick.zoom",m):p.on("dblclick.zoom",null)}function x(){f.on("zoom",null)}async function _(R,A,C){const M=qb(R),T=f==null?void 0:f.constrain()(M,A,C);return T&&await v(T),new Promise(D=>D(T))}async function w(R,A){const C=qb(R);return await v(C,A),new Promise(M=>M(C))}function j(R){if(p){const A=qb(R),C=p.property("__zoom");(C.k!==R.zoom||C.x!==R.x||C.y!==R.y)&&(f==null||f.transform(p,A,null,{sync:!0}))}}function E(){const R=p?V2(p.node()):{x:0,y:0,k:1};return{x:R.x,y:R.y,zoom:R.k}}function S(R,A){return p?new Promise(C=>{f==null||f.scaleTo(Yb(p,A==null?void 0:A.duration,()=>C(!0)),R)}):Promise.resolve(!1)}function O(R,A){return p?new Promise(C=>{f==null||f.scaleBy(Yb(p,A==null?void 0:A.duration,()=>C(!0)),R)}):Promise.resolve(!1)}function k(R){f==null||f.scaleExtent(R)}function N(R){f==null||f.translateExtent(R)}function P(R){const A=!yr(R)||R<0?0:R;f==null||f.clickDistance(A)}return{update:b,destroy:x,setViewport:w,setViewportConstrained:_,getViewport:E,scaleTo:S,scaleBy:O,setScaleExtent:k,setTranslateExtent:N,syncViewport:j,setClickDistance:P}}var Ji;(function(e){e.Line="line",e.Handle="handle"})(Ji||(Ji={}));const xZ=["top-left","top-right","bottom-left","bottom-right"],wZ=["top","right","bottom","left"];function _Z({width:e,prevWidth:t,height:n,prevHeight:r,affectsX:o,affectsY:a}){const i=e-t,s=n-r,c=[i>0?1:i<0?-1:0,s>0?1:s<0?-1:0];return i&&o&&(c[0]=c[0]*-1),s&&a&&(c[1]=c[1]*-1),c}function jZ(e){const t=e.includes("right")||e.includes("left"),n=e.includes("bottom")||e.includes("top"),r=e.includes("left"),o=e.includes("top");return{isHorizontal:t,isVertical:n,affectsX:r,affectsY:o}}function Jo(e,t){return Math.max(0,t-e)}function Go(e,t){return Math.max(0,e-t)}function Pf(e,t,n){return Math.max(0,t-e,e-n)}function PT(e,t){return e?!t:t}function EZ(e,t,n,r,o,a,i,s){let{affectsX:c,affectsY:l}=t;const{isHorizontal:u,isVertical:d}=t,f=u&&d,{xSnapped:p,ySnapped:y}=n,{minWidth:m,maxWidth:v,minHeight:b,maxHeight:x}=r,{x:_,y:w,width:j,height:E,aspectRatio:S}=e;let O=Math.floor(u?p-e.pointerX:0),k=Math.floor(d?y-e.pointerY:0);const N=j+(c?-O:O),P=E+(l?-k:k),R=-a[0]*j,A=-a[1]*E;let C=Pf(N,m,v),M=Pf(P,b,x);if(i){let I=0,L=0;c&&O<0?I=Jo(_+O+R,i[0][0]):!c&&O>0&&(I=Go(_+N+R,i[1][0])),l&&k<0?L=Jo(w+k+A,i[0][1]):!l&&k>0&&(L=Go(w+P+A,i[1][1])),C=Math.max(C,I),M=Math.max(M,L)}if(s){let I=0,L=0;c&&O>0?I=Go(_+O,s[0][0]):!c&&O<0&&(I=Jo(_+N,s[1][0])),l&&k>0?L=Go(w+k,s[0][1]):!l&&k<0&&(L=Jo(w+P,s[1][1])),C=Math.max(C,I),M=Math.max(M,L)}if(o){if(u){const I=Pf(N/S,b,x)*S;if(C=Math.max(C,I),i){let L=0;!c&&!l||c&&!l&&f?L=Go(w+A+N/S,i[1][1])*S:L=Jo(w+A+(c?O:-O)/S,i[0][1])*S,C=Math.max(C,L)}if(s){let L=0;!c&&!l||c&&!l&&f?L=Jo(w+N/S,s[1][1])*S:L=Go(w+(c?O:-O)/S,s[0][1])*S,C=Math.max(C,L)}}if(d){const I=Pf(P*S,m,v)/S;if(M=Math.max(M,I),i){let L=0;!c&&!l||l&&!c&&f?L=Go(_+P*S+R,i[1][0])/S:L=Jo(_+(l?k:-k)*S+R,i[0][0])/S,M=Math.max(M,L)}if(s){let L=0;!c&&!l||l&&!c&&f?L=Jo(_+P*S,s[1][0])/S:L=Go(_+(l?k:-k)*S,s[0][0])/S,M=Math.max(M,L)}}}k=k+(k<0?M:-M),O=O+(O<0?C:-C),o&&(f?N>P*S?k=(PT(c,l)?-O:O)/S:O=(PT(c,l)?-k:k)*S:u?(k=O/S,l=c):(O=k*S,c=l));const T=c?_+O:_,D=l?w+k:w;return{width:j+(c?-O:O),height:E+(l?-k:k),x:a[0]*O*(c?-1:1)+T,y:a[1]*k*(l?-1:1)+D}}const AT={width:0,height:0,x:0,y:0},SZ={...AT,pointerX:0,pointerY:0,aspectRatio:1};function CZ(e){return[[0,0],[e.measured.width,e.measured.height]]}function OZ(e,t,n){const r=t.position.x+e.position.x,o=t.position.y+e.position.y,a=e.measured.width??0,i=e.measured.height??0,s=n[0]*a,c=n[1]*i;return[[r-s,o-c],[r+a-s,o+i-c]]}function NZ({domNode:e,nodeId:t,getStoreItems:n,onChange:r,onEnd:o}){const a=Ln(e);function i({controlPosition:c,boundaries:l,keepAspectRatio:u,onResizeStart:d,onResize:f,onResizeEnd:p,shouldResize:y}){let m={...AT},v={...SZ};const b=jZ(c);let x,_=null,w=[],j,E,S;const O=p2().on("start",k=>{const{nodeLookup:N,transform:P,snapGrid:R,snapToGrid:A,nodeOrigin:C,paneDomNode:M}=n();if(x=N.get(t),!x)return;_=(M==null?void 0:M.getBoundingClientRect())??null;const{xSnapped:T,ySnapped:D}=hl(k.sourceEvent,{transform:P,snapGrid:R,snapToGrid:A,containerBounds:_});m={width:x.measured.width??0,height:x.measured.height??0,x:x.position.x??0,y:x.position.y??0},v={...m,pointerX:T,pointerY:D,aspectRatio:m.width/m.height},j=void 0,x.parentId&&(x.extent==="parent"||x.expandParent)&&(j=N.get(x.parentId),E=j&&x.extent==="parent"?CZ(j):void 0),w=[],S=void 0;for(const[I,L]of N)if(L.parentId===t&&(w.push({id:I,position:{...L.position},extent:L.extent}),L.extent==="parent"||L.expandParent)){const B=OZ(L,x,L.origin??C);S?S=[[Math.min(B[0][0],S[0][0]),Math.min(B[0][1],S[0][1])],[Math.max(B[1][0],S[1][0]),Math.max(B[1][1],S[1][1])]]:S=B}d==null||d(k,{...m})}).on("drag",k=>{const{transform:N,snapGrid:P,snapToGrid:R,nodeOrigin:A}=n(),C=hl(k.sourceEvent,{transform:N,snapGrid:P,snapToGrid:R,containerBounds:_}),M=[];if(!x)return;const{x:T,y:D,width:I,height:L}=m,B={},U=x.origin??A,{width:F,height:H,x:J,y:q}=EZ(v,b,C,l,u,U,E,S),re=F!==I,Z=H!==L,Y=J!==T&&re,W=q!==D&&Z;if(!Y&&!W&&!re&&!Z)return;if((Y||W||U[0]===1||U[1]===1)&&(B.x=Y?J:m.x,B.y=W?q:m.y,m.x=B.x,m.y=B.y,w.length>0)){const $=J-T,se=q-D;for(const le of w)le.position={x:le.position.x-$+U[0]*(F-I),y:le.position.y-se+U[1]*(H-L)},M.push(le)}if((re||Z)&&(B.width=re?F:m.width,B.height=Z?H:m.height,m.width=B.width,m.height=B.height),j&&x.expandParent){const $=U[0]*(B.width??0);B.x&&B.x<$&&(m.x=$,v.x=v.x-(B.x-$));const se=U[1]*(B.height??0);B.y&&B.y<se&&(m.y=se,v.y=v.y-(B.y-se))}const G=_Z({width:m.width,prevWidth:I,height:m.height,prevHeight:L,affectsX:b.affectsX,affectsY:b.affectsY}),te={...m,direction:G};(y==null?void 0:y(k,te))!==!1&&(f==null||f(k,te),r(B,M))}).on("end",k=>{p==null||p(k,{...m}),o==null||o()});a.call(O)}function s(){a.on(".drag",null)}return{update:i,destroy:s}}var TT={exports:{}},Kb={},RT;function MZ(){if(RT)return Kb;RT=1;var e=$9(),t=KM();function n(l,u){return l===u&&(l!==0||1/l===1/u)||l!==l&&u!==u}var r=typeof Object.is=="function"?Object.is:n,o=t.useSyncExternalStore,a=e.useRef,i=e.useEffect,s=e.useMemo,c=e.useDebugValue;return Kb.useSyncExternalStoreWithSelector=function(l,u,d,f,p){var y=a(null);if(y.current===null){var m={hasValue:!1,value:null};y.current=m}else m=y.current;y=s(function(){function b(E){if(!x){if(x=!0,_=E,E=f(E),p!==void 0&&m.hasValue){var S=m.value;if(p(S,E))return w=S}return w=E}if(S=w,r(_,E))return S;var O=f(E);return p!==void 0&&p(S,O)?S:(_=E,w=O)}var x=!1,_,w,j=d===void 0?null:d;return[function(){return b(u())},j===null?void 0:function(){return b(j())}]},[u,d,f,p]);var v=o(l,y[0],y[1]);return i(function(){m.hasValue=!0,m.value=v},[v]),c(v),v},Kb}var IT;function kZ(){return IT||(IT=1,TT.exports=MZ()),TT.exports}var PZ=kZ();let DT,Xb,LT,FT,BT,$T;DE=Xe(PZ),DT={BASE_URL:"/NoLLMChat/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_BASE_URL:"/NoLLMChat/",VITE_ROUTE_MODE:"hash"},Xb=e=>{let t;const n=new Set,r=(s,c)=>{const l=typeof s=="function"?s(t):s;if(!Object.is(l,t)){const u=t;t=c??(typeof l!="object"||l===null)?l:Object.assign({},t,l),n.forEach(d=>d(t,u))}},o=()=>t,a={setState:r,getState:o,getInitialState:()=>i,subscribe:s=>(n.add(s),()=>n.delete(s)),destroy:()=>{(DT?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},i=t=e(r,o,a);return a},LT=e=>e?Xb(e):Xb,{useDebugValue:FT}=V,{useSyncExternalStoreWithSelector:BT}=DE,$T=e=>e;function zT(e,t=$T,n){const r=BT(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return FT(r),r}const VT=(e,t)=>{const n=LT(e),r=(o,a=t)=>zT(n,o,a);return Object.assign(r,n),r},AZ=(e,t)=>e?VT(e,t):VT;function jt(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,o]of e)if(!Object.is(o,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}const Af=g.createContext(null),TZ=Af.Provider,UT=mo.error001();function Ve(e,t){const n=g.useContext(Af);if(n===null)throw new Error(UT);return zT(n,e,t)}function vt(){const e=g.useContext(Af);if(e===null)throw new Error(UT);return g.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])}const HT={display:"none"},RZ={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},WT="react-flow__node-desc",qT="react-flow__edge-desc",IZ="react-flow__aria-live",DZ=e=>e.ariaLiveMessage;function LZ({rfId:e}){const t=Ve(DZ);return h.jsx("div",{id:`${IZ}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:RZ,children:t})}function FZ({rfId:e,disableKeyboardA11y:t}){return h.jsxs(h.Fragment,{children:[h.jsxs("div",{id:`${WT}-${e}`,style:HT,children:["Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "]}),h.jsx("div",{id:`${qT}-${e}`,style:HT,children:"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."}),!t&&h.jsx(LZ,{rfId:e})]})}const BZ=e=>e.userSelectionActive?"none":"all";function Gi({position:e="top-left",children:t,className:n,style:r,...o}){const a=Ve(BZ),i=`${e}`.split("-");return h.jsx("div",{className:It(["react-flow__panel",n,...i]),style:{...r,pointerEvents:a},...o,children:t})}function $Z({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:h.jsx(Gi,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:h.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const zZ=e=>{const t=[],n=[];for(const[,r]of e.nodeLookup)r.selected&&t.push(r.internals.userNode);for(const[,r]of e.edgeLookup)r.selected&&n.push(r);return{selectedNodes:t,selectedEdges:n}},Tf=e=>e.id;function VZ(e,t){return jt(e.selectedNodes.map(Tf),t.selectedNodes.map(Tf))&&jt(e.selectedEdges.map(Tf),t.selectedEdges.map(Tf))}function UZ({onSelectionChange:e}){const t=vt(),{selectedNodes:n,selectedEdges:r}=Ve(zZ,VZ);return g.useEffect(()=>{const o={nodes:n,edges:r};e==null||e(o),t.getState().onSelectionChangeHandlers.forEach(a=>a(o))},[n,r,e]),null}const HZ=e=>!!e.onSelectionChangeHandlers;function WZ({onSelectionChange:e}){const t=Ve(HZ);return e||t?h.jsx(UZ,{onSelectionChange:e}):null}const YT=[0,0],qZ={x:0,y:0,zoom:1},YZ=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","onBeforeDelete","debug","autoPanSpeed","paneClickDistance"],KT=[...YZ,"rfId"],KZ=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setPaneClickDistance:e.setPaneClickDistance}),XT={translateExtent:cl,nodeOrigin:YT,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1",paneClickDistance:0};function XZ(e){const{setNodes:t,setEdges:n,setMinZoom:r,setMaxZoom:o,setTranslateExtent:a,setNodeExtent:i,reset:s,setDefaultNodesAndEdges:c,setPaneClickDistance:l}=Ve(KZ,jt),u=vt();g.useEffect(()=>(c(e.defaultNodes,e.defaultEdges),()=>{d.current=XT,s()}),[]);const d=g.useRef(XT);return g.useEffect(()=>{for(const f of KT){const p=e[f],y=d.current[f];p!==y&&(typeof e[f]>"u"||(f==="nodes"?t(p):f==="edges"?n(p):f==="minZoom"?r(p):f==="maxZoom"?o(p):f==="translateExtent"?a(p):f==="nodeExtent"?i(p):f==="paneClickDistance"?l(p):f==="fitView"?u.setState({fitViewOnInit:p}):f==="fitViewOptions"?u.setState({fitViewOnInitOptions:p}):u.setState({[f]:p})))}d.current=e},KT.map(f=>e[f])),null}function QT(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function QZ(e){var r;const[t,n]=g.useState(e==="system"?null:e);return g.useEffect(()=>{if(e!=="system"){n(e);return}const o=QT(),a=()=>n(o!=null&&o.matches?"dark":"light");return a(),o==null||o.addEventListener("change",a),()=>{o==null||o.removeEventListener("change",a)}},[e]),t!==null?t:(r=QT())!=null&&r.matches?"dark":"light"}const JT=typeof document<"u"?document:null;function yl(e=null,t={target:JT,actInsideInputWithModifier:!0}){const[n,r]=g.useState(!1),o=g.useRef(!1),a=g.useRef(new Set([])),[i,s]=g.useMemo(()=>{if(e!==null){const c=(Array.isArray(e)?e:[e]).filter(u=>typeof u=="string").map(u=>u.replace("+",`
`).replace(`

`,`
+`).split(`
`)),l=c.reduce((u,d)=>u.concat(...d),[]);return[c,l]}return[[],[]]},[e]);return g.useEffect(()=>{const c=(t==null?void 0:t.target)||JT;if(e!==null){const l=f=>{if(o.current=f.ctrlKey||f.metaKey||f.shiftKey,(!o.current||o.current&&!t.actInsideInputWithModifier)&&Db(f))return!1;const p=ZT(f.code,s);a.current.add(f[p]),GT(i,a.current,!1)&&(f.preventDefault(),r(!0))},u=f=>{if((!o.current||o.current&&!t.actInsideInputWithModifier)&&Db(f))return!1;const p=ZT(f.code,s);GT(i,a.current,!0)?(r(!1),a.current.clear()):a.current.delete(f[p]),f.key==="Meta"&&a.current.clear(),o.current=!1},d=()=>{a.current.clear(),r(!1)};return c==null||c.addEventListener("keydown",l),c==null||c.addEventListener("keyup",u),window.addEventListener("blur",d),window.addEventListener("contextmenu",d),()=>{c==null||c.removeEventListener("keydown",l),c==null||c.removeEventListener("keyup",u),window.removeEventListener("blur",d),window.removeEventListener("contextmenu",d)}}},[e,r]),n}function GT(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(o=>t.has(o)))}function ZT(e,t){return t.includes(e)?"code":"key"}const JZ=()=>{const e=vt();return g.useMemo(()=>({zoomIn:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomOut:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1/1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomTo:(t,n)=>{const{panZoom:r}=e.getState();return r?r.scaleTo(t,{duration:n==null?void 0:n.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(t,n)=>{const{transform:[r,o,a],panZoom:i}=e.getState();return i?(await i.setViewport({x:t.x??r,y:t.y??o,zoom:t.zoom??a},{duration:n==null?void 0:n.duration}),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[t,n,r]=e.getState().transform;return{x:t,y:n,zoom:r}},fitView:t=>{const{nodeLookup:n,minZoom:r,maxZoom:o,panZoom:a,domNode:i}=e.getState();if(!a||!i)return Promise.resolve(!1);const s=Ab(n,t),{width:c,height:l}=Nf(i);return Tb({nodes:s,width:c,height:l,minZoom:r,maxZoom:o,panZoom:a},t)},setCenter:async(t,n,r)=>{const{width:o,height:a,maxZoom:i,panZoom:s}=e.getState(),c=typeof(r==null?void 0:r.zoom)<"u"?r.zoom:i,l=o/2-t*c,u=a/2-n*c;return s?(await s.setViewport({x:l,y:u,zoom:c},{duration:r==null?void 0:r.duration}),Promise.resolve(!0)):Promise.resolve(!1)},fitBounds:async(t,n)=>{const{width:r,height:o,minZoom:a,maxZoom:i,panZoom:s}=e.getState(),c=Ib(t,r,o,a,i,(n==null?void 0:n.padding)??.1);return s?(await s.setViewport(c,{duration:n==null?void 0:n.duration}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(t,n={snapToGrid:!0})=>{const{transform:r,snapGrid:o,domNode:a}=e.getState();if(!a)return t;const{x:i,y:s}=a.getBoundingClientRect(),c={x:t.x-i,y:t.y-s};return pl(c,r,n.snapToGrid,o)},flowToScreenPosition:t=>{const{transform:n,domNode:r}=e.getState();if(!r)return t;const{x:o,y:a}=r.getBoundingClientRect(),i=oT(t,n);return{x:i.x+o,y:i.y+a}}}),[])};function eR(e,t){const n=[],r=new Map,o=[];for(const a of e)if(a.type==="add"){o.push(a);continue}else if(a.type==="remove"||a.type==="replace")r.set(a.id,[a]);else{const i=r.get(a.id);i?i.push(a):r.set(a.id,[a])}for(const a of t){const i=r.get(a.id);if(!i){n.push(a);continue}if(i[0].type==="remove")continue;if(i[0].type==="replace"){n.push({...i[0].item});continue}const s={...a};for(const c of i)GZ(c,s);n.push(s)}return o.length&&o.forEach(a=>{a.index!==void 0?n.splice(a.index,0,{...a.item}):n.push({...a.item})}),n}function GZ(e,t){switch(e.type){case"select":{t.selected=e.selected;break}case"position":{typeof e.position<"u"&&(t.position=e.position),typeof e.dragging<"u"&&(t.dragging=e.dragging);break}case"dimensions":{typeof e.dimensions<"u"&&(t.measured??(t.measured={}),t.measured.width=e.dimensions.width,t.measured.height=e.dimensions.height,e.setAttributes&&(t.width=e.dimensions.width,t.height=e.dimensions.height)),typeof e.resizing=="boolean"&&(t.resizing=e.resizing);break}}}function Da(e,t){return eR(e,t)}function gl(e,t){return eR(e,t)}function La(e,t){return{id:e,type:"select",selected:t}}function Zi(e,t=new Set,n=!1){const r=[];for(const[o,a]of e){const i=t.has(o);!(a.selected===void 0&&!i)&&a.selected!==i&&(n&&(a.selected=i),r.push(La(a.id,i)))}return r}function tR({items:e=[],lookup:t}){var o;const n=[],r=new Map(e.map(a=>[a.id,a]));for(const[a,i]of e.entries()){const s=t.get(i.id),c=((o=s==null?void 0:s.internals)==null?void 0:o.userNode)??s;c!==void 0&&c!==i&&n.push({id:i.id,item:i,type:"replace"}),c===void 0&&n.push({item:i,type:"add",index:a})}for(const[a]of t)r.get(a)===void 0&&n.push({id:a,type:"remove"});return n}function nR(e){return{id:e.id,type:"remove"}}const rR=e=>LG(e),ZZ=e=>Q2(e);function oR(e){return g.forwardRef(e)}const eee=typeof window<"u"?g.useLayoutEffect:g.useEffect;function aR(e){const[t,n]=g.useState(BigInt(0)),[r]=g.useState(()=>tee(()=>n(o=>o+BigInt(1))));return eee(()=>{const o=r.get();o.length&&(e(o),r.reset())},[t]),r}function tee(e){let t=[];return{get:()=>t,reset:()=>{t=[]},push:n=>{t.push(n),e()}}}const iR=g.createContext(null);function nee({children:e}){const t=vt(),n=g.useCallback(s=>{const{nodes:c=[],setNodes:l,hasDefaultNodes:u,onNodesChange:d,nodeLookup:f}=t.getState();let p=c;for(const y of s)p=typeof y=="function"?y(p):y;u?l(p):d&&d(tR({items:p,lookup:f}))},[]),r=aR(n),o=g.useCallback(s=>{const{edges:c=[],setEdges:l,hasDefaultEdges:u,onEdgesChange:d,edgeLookup:f}=t.getState();let p=c;for(const y of s)p=typeof y=="function"?y(p):y;u?l(p):d&&d(tR({items:p,lookup:f}))},[]),a=aR(o),i=g.useMemo(()=>({nodeQueue:r,edgeQueue:a}),[]);return h.jsx(iR.Provider,{value:i,children:e})}function ree(){const e=g.useContext(iR);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}const oee=e=>!!e.panZoom;function Fn(){const e=JZ(),t=vt(),n=ree(),r=Ve(oee),o=g.useMemo(()=>{const a=d=>t.getState().nodeLookup.get(d),i=d=>{n.nodeQueue.push(d)},s=d=>{n.edgeQueue.push(d)},c=d=>{var b,x;const{nodeLookup:f,nodeOrigin:p}=t.getState(),y=rR(d)?d:f.get(d.id),m=y.parentId?iT(y.position,y.measured,y.parentId,f,p):y.position,v={id:y.id,position:m,width:((b=y.measured)==null?void 0:b.width)??y.width,height:((x=y.measured)==null?void 0:x.height)??y.height,data:y.data};return Ki(v)},l=(d,f,p={replace:!1})=>{i(y=>y.map(m=>{if(m.id===d){const v=typeof f=="function"?f(m):f;return p.replace&&rR(v)?v:{...m,...v}}return m}))},u=(d,f,p={replace:!1})=>{s(y=>y.map(m=>{if(m.id===d){const v=typeof f=="function"?f(m):f;return p.replace&&ZZ(v)?v:{...m,...v}}return m}))};return{getNodes:()=>t.getState().nodes.map(d=>({...d})),getNode:d=>{var f;return(f=a(d))==null?void 0:f.internals.userNode},getInternalNode:a,getEdges:()=>{const{edges:d=[]}=t.getState();return d.map(f=>({...f}))},getEdge:d=>t.getState().edgeLookup.get(d),setNodes:i,setEdges:s,addNodes:d=>{const f=Array.isArray(d)?d:[d];n.nodeQueue.push(p=>[...p,...f])},addEdges:d=>{const f=Array.isArray(d)?d:[d];n.edgeQueue.push(p=>[...p,...f])},toObject:()=>{const{nodes:d=[],edges:f=[],transform:p}=t.getState(),[y,m,v]=p;return{nodes:d.map(b=>({...b})),edges:f.map(b=>({...b})),viewport:{x:y,y:m,zoom:v}}},deleteElements:async({nodes:d=[],edges:f=[]})=>{const{nodes:p,edges:y,onNodesDelete:m,onEdgesDelete:v,triggerNodeChanges:b,triggerEdgeChanges:x,onDelete:_,onBeforeDelete:w}=t.getState(),{nodes:j,edges:E}=await $G({nodesToRemove:d,edgesToRemove:f,nodes:p,edges:y,onBeforeDelete:w}),S=E.length>0,O=j.length>0;if(S){const k=E.map(nR);v==null||v(E),x(k)}if(O){const k=j.map(nR);m==null||m(j),b(k)}return(O||S)&&(_==null||_({nodes:j,edges:E})),{deletedNodes:j,deletedEdges:E}},getIntersectingNodes:(d,f=!0,p)=>{const y=rT(d),m=y?d:c(d),v=p!==void 0;return m?(p||t.getState().nodes).filter(b=>{const x=t.getState().nodeLookup.get(b.id);if(x&&!y&&(b.id===d.id||!x.internals.positionAbsolute))return!1;const _=Ki(v?b:x),w=fl(_,m);return f&&w>0||w>=m.width*m.height}):[]},isNodeIntersecting:(d,f,p=!0)=>{const y=rT(d)?d:c(d);if(!y)return!1;const m=fl(y,f);return p&&m>0||m>=y.width*y.height},updateNode:l,updateNodeData:(d,f,p={replace:!1})=>{l(d,y=>{const m=typeof f=="function"?f(y):f;return p.replace?{...y,data:m}:{...y,data:{...y.data,...m}}},p)},updateEdge:u,updateEdgeData:(d,f,p={replace:!1})=>{u(d,y=>{const m=typeof f=="function"?f(y):f;return p.replace?{...y,data:m}:{...y,data:{...y.data,...m}}},p)},getNodesBounds:d=>{const{nodeLookup:f,nodeOrigin:p}=t.getState();return FG(d,{nodeLookup:f,nodeOrigin:p})},getHandleConnections:({type:d,id:f,nodeId:p})=>{var y;return Array.from(((y=t.getState().connectionLookup.get(`${p}-${d}-${f??null}`))==null?void 0:y.values())??[])}}},[]);return g.useMemo(()=>({...o,...e,viewportInitialized:r}),[r])}const sR=e=>e.selected,aee={actInsideInputWithModifier:!1},iee=typeof window<"u"?window:void 0;function see({deleteKeyCode:e,multiSelectionKeyCode:t}){const n=vt(),{deleteElements:r}=Fn(),o=yl(e,aee),a=yl(t,{target:iee});g.useEffect(()=>{if(o){const{edges:i,nodes:s}=n.getState();r({nodes:s.filter(sR),edges:i.filter(sR)}),n.setState({nodesSelectionActive:!1})}},[o]),g.useEffect(()=>{n.setState({multiSelectionActive:a})},[a])}function cee(e){const t=vt();g.useEffect(()=>{const n=()=>{var o,a;if(!e.current)return!1;const r=Nf(e.current);(r.height===0||r.width===0)&&((a=(o=t.getState()).onError)==null||a.call(o,"004",mo.error004())),t.setState({width:r.width||500,height:r.height||500})};if(e.current){n(),window.addEventListener("resize",n);const r=new ResizeObserver(()=>n());return r.observe(e.current),()=>{window.removeEventListener("resize",n),r&&e.current&&r.unobserve(e.current)}}},[])}const Rf={position:"absolute",width:"100%",height:"100%",top:0,left:0},lee=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib});function uee({onPaneContextMenu:e,zoomOnScroll:t=!0,zoomOnPinch:n=!0,panOnScroll:r=!1,panOnScrollSpeed:o=.5,panOnScrollMode:a=Xo.Free,zoomOnDoubleClick:i=!0,panOnDrag:s=!0,defaultViewport:c,translateExtent:l,minZoom:u,maxZoom:d,zoomActivationKeyCode:f,preventScrolling:p=!0,children:y,noWheelClassName:m,noPanClassName:v,onViewportChange:b,isControlledViewport:x,paneClickDistance:_}){const w=vt(),j=g.useRef(null),{userSelectionActive:E,lib:S}=Ve(lee,jt),O=yl(f),k=g.useRef();cee(j);const N=g.useCallback(P=>{b==null||b({x:P[0],y:P[1],zoom:P[2]}),x||w.setState({transform:P})},[b,x]);return g.useEffect(()=>{if(j.current){k.current=bZ({domNode:j.current,minZoom:u,maxZoom:d,translateExtent:l,viewport:c,paneClickDistance:_,onDraggingChange:C=>w.setState({paneDragging:C}),onPanZoomStart:(C,M)=>{const{onViewportChangeStart:T,onMoveStart:D}=w.getState();D==null||D(C,M),T==null||T(M)},onPanZoom:(C,M)=>{const{onViewportChange:T,onMove:D}=w.getState();D==null||D(C,M),T==null||T(M)},onPanZoomEnd:(C,M)=>{const{onViewportChangeEnd:T,onMoveEnd:D}=w.getState();D==null||D(C,M),T==null||T(M)}});const{x:P,y:R,zoom:A}=k.current.getViewport();return w.setState({panZoom:k.current,transform:[P,R,A],domNode:j.current.closest(".react-flow")}),()=>{var C;(C=k.current)==null||C.destroy()}}},[]),g.useEffect(()=>{var P;(P=k.current)==null||P.update({onPaneContextMenu:e,zoomOnScroll:t,zoomOnPinch:n,panOnScroll:r,panOnScrollSpeed:o,panOnScrollMode:a,zoomOnDoubleClick:i,panOnDrag:s,zoomActivationKeyPressed:O,preventScrolling:p,noPanClassName:v,userSelectionActive:E,noWheelClassName:m,lib:S,onTransformChange:N})},[e,t,n,r,o,a,i,s,O,p,v,E,m,S,N]),h.jsx("div",{className:"react-flow__renderer",ref:j,style:Rf,children:y})}const dee=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function fee(){const{userSelectionActive:e,userSelectionRect:t}=Ve(dee,jt);return e&&t?h.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}const Qb=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},pee=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging});function hee({isSelecting:e,selectionKeyPressed:t,selectionMode:n=ll.Full,panOnDrag:r,selectionOnDrag:o,onSelectionStart:a,onSelectionEnd:i,onPaneClick:s,onPaneContextMenu:c,onPaneScroll:l,onPaneMouseEnter:u,onPaneMouseMove:d,onPaneMouseLeave:f,children:p}){const y=g.useRef(null),m=vt(),v=g.useRef(0),b=g.useRef(0),x=g.useRef(),_=g.useRef(new Map),{userSelectionActive:w,elementsSelectable:j,dragging:E}=Ve(pee,jt),S=j&&(e||w),O=g.useRef(!1),k=g.useRef(!1),N=()=>{m.setState({userSelectionActive:!1,userSelectionRect:null}),v.current=0,b.current=0},P=I=>{if(O.current){O.current=!1;return}s==null||s(I),m.getState().resetSelectedElements(),m.setState({nodesSelectionActive:!1})},R=I=>{if(Array.isArray(r)&&(r!=null&&r.includes(2))){I.preventDefault();return}c==null||c(I)},A=l?I=>l(I):void 0,C=I=>{var J,q,re,Z;const{resetSelectedElements:L,domNode:B,edgeLookup:U}=m.getState();if(x.current=B==null?void 0:B.getBoundingClientRect(),!j||!e||I.button!==0||I.target!==y.current||!x.current)return;(q=(J=I.target)==null?void 0:J.setPointerCapture)==null||q.call(J,I.pointerId),k.current=!0,O.current=!1,_.current=new Map;for(const[Y,W]of U)_.current.set(W.source,((re=_.current.get(W.source))==null?void 0:re.add(Y))||new Set([Y])),_.current.set(W.target,((Z=_.current.get(W.target))==null?void 0:Z.add(Y))||new Set([Y]));const{x:F,y:H}=go(I.nativeEvent,x.current);L(),m.setState({userSelectionRect:{width:0,height:0,startX:F,startY:H,x:F,y:H}}),a==null||a(I)},M=I=>{const{userSelectionRect:L,edgeLookup:B,transform:U,nodeLookup:F,triggerNodeChanges:H,triggerEdgeChanges:J}=m.getState();if(!x.current||!L)return;O.current=!0;const{x:q,y:re}=go(I.nativeEvent,x.current),{startX:Z,startY:Y}=L,W={startX:Z,startY:Y,x:q<Z?q:Z,y:re<Y?re:Y,width:Math.abs(q-Z),height:Math.abs(re-Y)},G=J2(F,W,U,n===ll.Partial,!0),te=new Set,$=new Set;for(const se of G){$.add(se.id);const le=_.current.get(se.id);if(le)for(const ve of le)te.add(ve)}if(v.current!==$.size){v.current=$.size;const se=Zi(F,$,!0);H(se)}if(b.current!==te.size){b.current=te.size;const se=Zi(B,te);J(se)}m.setState({userSelectionRect:W,userSelectionActive:!0,nodesSelectionActive:!1})},T=I=>{var B,U;if(I.button!==0||!k.current)return;(U=(B=I.target)==null?void 0:B.releasePointerCapture)==null||U.call(B,I.pointerId);const{userSelectionRect:L}=m.getState();!w&&L&&I.target===y.current&&(P==null||P(I)),v.current>0&&m.setState({nodesSelectionActive:!0}),N(),i==null||i(I),(t||o)&&(O.current=!1),k.current=!1},D=r===!0||Array.isArray(r)&&r.includes(0);return h.jsxs("div",{className:It(["react-flow__pane",{draggable:D,dragging:E,selection:e}]),onClick:S?void 0:Qb(P,y),onContextMenu:Qb(R,y),onWheel:Qb(A,y),onPointerEnter:S?void 0:u,onPointerDown:S?C:d,onPointerMove:S?M:d,onPointerUp:S?T:void 0,onPointerLeave:f,ref:y,style:Rf,children:[p,h.jsx(fee,{})]})}function Jb({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:o,unselectNodesAndEdges:a,multiSelectionActive:i,nodeLookup:s,onError:c}=t.getState(),l=s.get(e);if(!l){c==null||c("012",mo.error012(e));return}t.setState({nodesSelectionActive:!1}),l.selected?(n||l.selected&&i)&&(a({nodes:[l],edges:[]}),requestAnimationFrame(()=>{var u;return(u=r==null?void 0:r.current)==null?void 0:u.blur()})):o([e])}function cR({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:o,isSelectable:a,nodeClickDistance:i}){const s=vt(),[c,l]=g.useState(!1),u=g.useRef();return g.useEffect(()=>{u.current=aZ({getStoreItems:()=>s.getState(),onNodeMouseDown:d=>{Jb({id:d,store:s,nodeRef:e})},onDragStart:()=>{l(!0)},onDragStop:()=>{l(!1)}})},[]),g.useEffect(()=>{var d,f;if(t)(d=u.current)==null||d.destroy();else if(e.current)return(f=u.current)==null||f.update({noDragClassName:n,handleSelector:r,domNode:e.current,isSelectable:a,nodeId:o,nodeClickDistance:i}),()=>{var p;(p=u.current)==null||p.destroy()}},[n,r,t,a,e,o]),c}const mee=e=>t=>t.selected&&(t.draggable||e&&typeof t.draggable>"u");function lR(){const e=vt();return g.useCallback(t=>{const{nodeExtent:n,snapToGrid:r,snapGrid:o,nodesDraggable:a,onError:i,updateNodePositions:s,nodeLookup:c,nodeOrigin:l}=e.getState(),u=new Map,d=mee(a),f=r?o[0]:5,p=r?o[1]:5,y=t.direction.x*f*t.factor,m=t.direction.y*p*t.factor;for(const[,v]of c){if(!d(v))continue;let b={x:v.internals.positionAbsolute.x+y,y:v.internals.positionAbsolute.y+m};r&&(b=Cf(b,o));const{position:x,positionAbsolute:_}=G2({nodeId:v.id,nextPosition:b,nodeLookup:c,nodeExtent:n,nodeOrigin:l,onError:i});v.position=x,v.internals.positionAbsolute=_,u.set(v.id,v)}s(u)},[])}const Gb=g.createContext(null),yee=Gb.Provider;Gb.Consumer;const Zb=()=>g.useContext(Gb),gee=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),vee=(e,t,n)=>r=>{const{connectionClickStartHandle:o,connectionMode:a,connection:i}=r,{fromHandle:s,toHandle:c,isValid:l}=i,u=(c==null?void 0:c.nodeId)===e&&(c==null?void 0:c.id)===t&&(c==null?void 0:c.type)===n;return{connectingFrom:(s==null?void 0:s.nodeId)===e&&(s==null?void 0:s.id)===t&&(s==null?void 0:s.type)===n,connectingTo:u,clickConnecting:(o==null?void 0:o.nodeId)===e&&(o==null?void 0:o.id)===t&&(o==null?void 0:o.type)===n,isPossibleEndHandle:a===qi.Strict?(s==null?void 0:s.type)!==n:e!==(s==null?void 0:s.nodeId)||t!==(s==null?void 0:s.id),connectionInProcess:!!s,valid:u&&l}};function bee({type:e="source",position:t=fe.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:o=!0,isConnectableEnd:a=!0,id:i,onConnect:s,children:c,className:l,onMouseDown:u,onTouchStart:d,...f},p){var C,M;const y=i||null,m=e==="target",v=vt(),b=Zb(),{connectOnClick:x,noPanClassName:_,rfId:w}=Ve(gee,jt),{connectingFrom:j,connectingTo:E,clickConnecting:S,isPossibleEndHandle:O,connectionInProcess:k,valid:N}=Ve(vee(b,y,e),jt);b||((M=(C=v.getState()).onError)==null||M.call(C,"010",mo.error010()));const P=T=>{const{defaultEdgeOptions:D,onConnect:I,hasDefaultEdges:L}=v.getState(),B={...D,...T};if(L){const{edges:U,setEdges:F}=v.getState();F(hT(B,U))}I==null||I(B),s==null||s(B)},R=T=>{if(!b)return;const D=cT(T.nativeEvent);if(o&&(D&&T.button===0||!D)){const I=v.getState();Wb.onPointerDown(T.nativeEvent,{autoPanOnConnect:I.autoPanOnConnect,connectionMode:I.connectionMode,connectionRadius:I.connectionRadius,domNode:I.domNode,nodeLookup:I.nodeLookup,lib:I.lib,isTarget:m,handleId:y,nodeId:b,flowId:I.rfId,panBy:I.panBy,cancelConnection:I.cancelConnection,onConnectStart:I.onConnectStart,onConnectEnd:I.onConnectEnd,updateConnection:I.updateConnection,onConnect:P,isValidConnection:n||I.isValidConnection,getTransform:()=>v.getState().transform,getFromHandle:()=>v.getState().connection.fromHandle,autoPanSpeed:I.autoPanSpeed})}D?u==null||u(T):d==null||d(T)},A=T=>{const{onClickConnectStart:D,onClickConnectEnd:I,connectionClickStartHandle:L,connectionMode:B,isValidConnection:U,lib:F,rfId:H,nodeLookup:J,connection:q}=v.getState();if(!b||!L&&!o)return;if(!L){D==null||D(T.nativeEvent,{nodeId:b,handleId:y,handleType:e}),v.setState({connectionClickStartHandle:{nodeId:b,type:e,id:y}});return}const re=sT(T.target),Z=n||U,{connection:Y,isValid:W}=Wb.isValid(T.nativeEvent,{handle:{nodeId:b,id:y,type:e},connectionMode:B,fromNodeId:L.nodeId,fromHandleId:L.id||null,fromType:L.type,isValidConnection:Z,flowId:H,doc:re,lib:F,nodeLookup:J});W&&Y&&P(Y);const G=structuredClone(q);delete G.inProgress,G.toPosition=G.toHandle?G.toHandle.position:null,I==null||I(T,G),v.setState({connectionClickStartHandle:null})};return h.jsx("div",{"data-handleid":y,"data-nodeid":b,"data-handlepos":t,"data-id":`${w}-${b}-${y}-${e}`,className:It(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",_,l,{source:!m,target:m,connectable:r,connectablestart:o,connectableend:a,clickconnecting:S,connectingfrom:j,connectingto:E,valid:N,connectionindicator:r&&(!k||O)&&(k?a:o)}]),onMouseDown:R,onTouchStart:R,onClick:x?A:void 0,ref:p,...f,children:c})}const vl=g.memo(oR(bee));function xee({data:e,isConnectable:t,sourcePosition:n=fe.Bottom}){return h.jsxs(h.Fragment,{children:[e==null?void 0:e.label,h.jsx(vl,{type:"source",position:n,isConnectable:t})]})}function wee({data:e,isConnectable:t,targetPosition:n=fe.Top,sourcePosition:r=fe.Bottom}){return h.jsxs(h.Fragment,{children:[h.jsx(vl,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,h.jsx(vl,{type:"source",position:r,isConnectable:t})]})}function _ee(){return null}function jee({data:e,isConnectable:t,targetPosition:n=fe.Top}){return h.jsxs(h.Fragment,{children:[h.jsx(vl,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label]})}const If={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},uR={input:xee,default:wee,output:jee,group:_ee};function Eee(e){var t,n,r,o;return e.internals.handleBounds===void 0?{width:e.width??e.initialWidth??((t=e.style)==null?void 0:t.width),height:e.height??e.initialHeight??((n=e.style)==null?void 0:n.height)}:{width:e.width??((r=e.style)==null?void 0:r.width),height:e.height??((o=e.style)==null?void 0:o.height)}}const See=e=>{const{width:t,height:n,x:r,y:o}=dl(e.nodeLookup,{filter:a=>!!a.selected});return{width:yr(t)?t:null,height:yr(n)?n:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${r}px,${o}px)`}};function Cee({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=vt(),{width:o,height:a,transformString:i,userSelectionActive:s}=Ve(See,jt),c=lR(),l=g.useRef(null);if(g.useEffect(()=>{var f;n||((f=l.current)==null||f.focus({preventScroll:!0}))},[n]),cR({nodeRef:l}),s||!o||!a)return null;const u=e?f=>{const p=r.getState().nodes.filter(y=>y.selected);e(f,p)}:void 0,d=f=>{Object.prototype.hasOwnProperty.call(If,f.key)&&c({direction:If[f.key],factor:f.shiftKey?4:1})};return h.jsx("div",{className:It(["react-flow__nodesselection","react-flow__container",t]),style:{transform:i},children:h.jsx("div",{ref:l,className:"react-flow__nodesselection-rect",onContextMenu:u,tabIndex:n?void 0:-1,onKeyDown:n?void 0:d,style:{width:o,height:a}})})}const dR=typeof window<"u"?window:void 0,Oee=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function fR({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:o,onPaneContextMenu:a,onPaneScroll:i,paneClickDistance:s,deleteKeyCode:c,selectionKeyCode:l,selectionOnDrag:u,selectionMode:d,onSelectionStart:f,onSelectionEnd:p,multiSelectionKeyCode:y,panActivationKeyCode:m,zoomActivationKeyCode:v,elementsSelectable:b,zoomOnScroll:x,zoomOnPinch:_,panOnScroll:w,panOnScrollSpeed:j,panOnScrollMode:E,zoomOnDoubleClick:S,panOnDrag:O,defaultViewport:k,translateExtent:N,minZoom:P,maxZoom:R,preventScrolling:A,onSelectionContextMenu:C,noWheelClassName:M,noPanClassName:T,disableKeyboardA11y:D,onViewportChange:I,isControlledViewport:L}){const{nodesSelectionActive:B,userSelectionActive:U}=Ve(Oee),F=yl(l,{target:dR}),H=yl(m,{target:dR}),J=H||O,q=H||w,re=u&&J!==!0,Z=F||U||re;return see({deleteKeyCode:c,multiSelectionKeyCode:y}),h.jsx(uee,{onPaneContextMenu:a,elementsSelectable:b,zoomOnScroll:x,zoomOnPinch:_,panOnScroll:q,panOnScrollSpeed:j,panOnScrollMode:E,zoomOnDoubleClick:S,panOnDrag:!F&&J,defaultViewport:k,translateExtent:N,minZoom:P,maxZoom:R,zoomActivationKeyCode:v,preventScrolling:A,noWheelClassName:M,noPanClassName:T,onViewportChange:I,isControlledViewport:L,paneClickDistance:s,children:h.jsxs(hee,{onSelectionStart:f,onSelectionEnd:p,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:o,onPaneContextMenu:a,onPaneScroll:i,panOnDrag:J,isSelecting:!!Z,selectionMode:d,selectionKeyPressed:F,selectionOnDrag:re,children:[e,B&&h.jsx(Cee,{onSelectionContextMenu:C,noPanClassName:T,disableKeyboardA11y:D})]})})}fR.displayName="FlowRenderer";const Nee=g.memo(fR),Mee=e=>t=>e?J2(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map(n=>n.id):Array.from(t.nodeLookup.keys());function kee(e){return Ve(g.useCallback(Mee(e),[e]),jt)}const Pee=e=>e.updateNodeInternals;function Aee(){const e=Ve(Pee),[t]=g.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(n=>{const r=new Map;n.forEach(o=>{const a=o.target.getAttribute("data-id");r.set(a,{id:a,nodeElement:o.target,force:!0})}),e(r)}));return g.useEffect(()=>()=>{t==null||t.disconnect()},[t]),t}function Tee({node:e,nodeType:t,hasDimensions:n,resizeObserver:r}){const o=vt(),a=g.useRef(null),i=g.useRef(null),s=g.useRef(e.sourcePosition),c=g.useRef(e.targetPosition),l=g.useRef(t),u=n&&!!e.internals.handleBounds;return g.useEffect(()=>{a.current&&!e.hidden&&(!u||i.current!==a.current)&&(i.current&&(r==null||r.unobserve(i.current)),r==null||r.observe(a.current),i.current=a.current)},[u,e.hidden]),g.useEffect(()=>()=>{i.current&&(r==null||r.unobserve(i.current),i.current=null)},[]),g.useEffect(()=>{if(a.current){const d=l.current!==t,f=s.current!==e.sourcePosition,p=c.current!==e.targetPosition;(d||f||p)&&(l.current=t,s.current=e.sourcePosition,c.current=e.targetPosition,o.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:a.current,force:!0}]])))}},[e.id,t,e.sourcePosition,e.targetPosition]),a}function Ree({id:e,onClick:t,onMouseEnter:n,onMouseMove:r,onMouseLeave:o,onContextMenu:a,onDoubleClick:i,nodesDraggable:s,elementsSelectable:c,nodesConnectable:l,nodesFocusable:u,resizeObserver:d,noDragClassName:f,noPanClassName:p,disableKeyboardA11y:y,rfId:m,nodeTypes:v,nodeExtent:b,nodeClickDistance:x,onError:_}){const{node:w,internals:j,isParent:E}=Ve(Y=>{const W=Y.nodeLookup.get(e),G=Y.parentLookup.has(e);return{node:W,internals:W.internals,isParent:G}},jt);let S=w.type||"default",O=(v==null?void 0:v[S])||uR[S];O===void 0&&(_==null||_("003",mo.error003(S)),S="default",O=uR.default);const k=!!(w.draggable||s&&typeof w.draggable>"u"),N=!!(w.selectable||c&&typeof w.selectable>"u"),P=!!(w.connectable||l&&typeof w.connectable>"u"),R=!!(w.focusable||u&&typeof w.focusable>"u"),A=vt(),C=aT(w),M=Tee({node:w,nodeType:S,hasDimensions:C,resizeObserver:d}),T=cR({nodeRef:M,disabled:w.hidden||!k,noDragClassName:f,handleSelector:w.dragHandle,nodeId:e,isSelectable:N,nodeClickDistance:x}),D=lR();if(w.hidden)return null;const I=yo(w),L=Eee(w),B=N||k||t||n||r||o,U=n?Y=>n(Y,{...j.userNode}):void 0,F=r?Y=>r(Y,{...j.userNode}):void 0,H=o?Y=>o(Y,{...j.userNode}):void 0,J=a?Y=>a(Y,{...j.userNode}):void 0,q=i?Y=>i(Y,{...j.userNode}):void 0,re=Y=>{const{selectNodesOnDrag:W,nodeDragThreshold:G}=A.getState();N&&(!W||!k||G>0)&&Jb({id:e,store:A,nodeRef:M}),t&&t(Y,{...j.userNode})},Z=Y=>{if(!(Db(Y.nativeEvent)||y))if(W2.includes(Y.key)&&N){const W=Y.key==="Escape";Jb({id:e,store:A,unselect:W,nodeRef:M})}else k&&w.selected&&Object.prototype.hasOwnProperty.call(If,Y.key)&&(A.setState({ariaLiveMessage:`Moved selected node ${Y.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~j.positionAbsolute.x}, y: ${~~j.positionAbsolute.y}`}),D({direction:If[Y.key],factor:Y.shiftKey?4:1}))};return h.jsx("div",{className:It(["react-flow__node",`react-flow__node-${S}`,{[p]:k},w.className,{selected:w.selected,selectable:N,parent:E,draggable:k,dragging:T}]),ref:M,style:{zIndex:j.z,transform:`translate(${j.positionAbsolute.x}px,${j.positionAbsolute.y}px)`,pointerEvents:B?"all":"none",visibility:C?"visible":"hidden",...w.style,...L},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:U,onMouseMove:F,onMouseLeave:H,onContextMenu:J,onClick:re,onDoubleClick:q,onKeyDown:R?Z:void 0,tabIndex:R?0:void 0,role:R?"button":void 0,"aria-describedby":y?void 0:`${WT}-${m}`,"aria-label":w.ariaLabel,children:h.jsx(yee,{value:e,children:h.jsx(O,{id:e,data:w.data,type:S,positionAbsoluteX:j.positionAbsolute.x,positionAbsoluteY:j.positionAbsolute.y,selected:w.selected,selectable:N,draggable:k,deletable:w.deletable??!0,isConnectable:P,sourcePosition:w.sourcePosition,targetPosition:w.targetPosition,dragging:T,dragHandle:w.dragHandle,zIndex:j.z,parentId:w.parentId,...I})})})}const Iee=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function pR(e){const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:o,onError:a}=Ve(Iee,jt),i=kee(e.onlyRenderVisibleElements),s=Aee();return h.jsx("div",{className:"react-flow__nodes",style:Rf,children:i.map(c=>h.jsx(Ree,{id:c,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:s,nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:o,nodeClickDistance:e.nodeClickDistance,onError:a},c))})}pR.displayName="NodeRenderer";const Dee=g.memo(pR);function Lee(e){return Ve(g.useCallback(t=>{if(!e)return t.edges.map(r=>r.id);const n=[];if(t.width&&t.height)for(const r of t.edges){const o=t.nodeLookup.get(r.source),a=t.nodeLookup.get(r.target);o&&a&&HG({sourceNode:o,targetNode:a,width:t.width,height:t.height,transform:t.transform})&&n.push(r.id)}return n},[e]),jt)}const Fee=({color:e="none",strokeWidth:t=1})=>h.jsx("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),Bee=({color:e="none",strokeWidth:t=1})=>h.jsx("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),hR={[_f.Arrow]:Fee,[_f.ArrowClosed]:Bee};function $ee(e){const t=vt();return g.useMemo(()=>{var n,r;return Object.prototype.hasOwnProperty.call(hR,e)?hR[e]:((r=(n=t.getState()).onError)==null||r.call(n,"009",mo.error009(e)),null)},[e])}const zee=({id:e,type:t,color:n,width:r=12.5,height:o=12.5,markerUnits:a="strokeWidth",strokeWidth:i,orient:s="auto-start-reverse"})=>{const c=$ee(t);return c?h.jsx("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${o}`,viewBox:"-10 -10 20 20",markerUnits:a,orient:s,refX:"0",refY:"0",children:h.jsx(c,{color:n,strokeWidth:i})}):null},mR=({defaultColor:e,rfId:t})=>{const n=Ve(a=>a.edges),r=Ve(a=>a.defaultEdgeOptions),o=g.useMemo(()=>JG(n,{id:t,defaultColor:e,defaultMarkerStart:r==null?void 0:r.markerStart,defaultMarkerEnd:r==null?void 0:r.markerEnd}),[n,r,t,e]);return o.length?h.jsx("svg",{className:"react-flow__marker",children:h.jsx("defs",{children:o.map(a=>h.jsx(zee,{id:a.id,type:a.type,color:a.color,width:a.width,height:a.height,markerUnits:a.markerUnits,strokeWidth:a.strokeWidth,orient:a.orient},a.id))})}):null};mR.displayName="MarkerDefinitions";var Vee=g.memo(mR);function yR({x:e,y:t,label:n,labelStyle:r={},labelShowBg:o=!0,labelBgStyle:a={},labelBgPadding:i=[2,4],labelBgBorderRadius:s=2,children:c,className:l,...u}){const[d,f]=g.useState({x:1,y:0,width:0,height:0}),p=It(["react-flow__edge-textwrapper",l]),y=g.useRef(null);return g.useEffect(()=>{if(y.current){const m=y.current.getBBox();f({x:m.x,y:m.y,width:m.width,height:m.height})}},[n]),typeof n>"u"||!n?null:h.jsxs("g",{transform:`translate(${e-d.width/2} ${t-d.height/2})`,className:p,visibility:d.width?"visible":"hidden",...u,children:[o&&h.jsx("rect",{width:d.width+2*i[0],x:-i[0],y:-i[1],height:d.height+2*i[1],className:"react-flow__edge-textbg",style:a,rx:s,ry:s}),h.jsx("text",{className:"react-flow__edge-text",y:d.height/2,dy:"0.3em",ref:y,style:r,children:n}),c]})}yR.displayName="EdgeText";const Uee=g.memo(yR);function Df({id:e,path:t,labelX:n,labelY:r,label:o,labelStyle:a,labelShowBg:i,labelBgStyle:s,labelBgPadding:c,labelBgBorderRadius:l,style:u,markerEnd:d,markerStart:f,className:p,interactionWidth:y=20}){return h.jsxs(h.Fragment,{children:[h.jsx("path",{id:e,style:u,d:t,fill:"none",className:It(["react-flow__edge-path",p]),markerEnd:d,markerStart:f}),y&&h.jsx("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:y,className:"react-flow__edge-interaction"}),o&&yr(n)&&yr(r)?h.jsx(Uee,{x:n,y:r,label:o,labelStyle:a,labelShowBg:i,labelBgStyle:s,labelBgPadding:c,labelBgBorderRadius:l}):null]})}function gR({pos:e,x1:t,y1:n,x2:r,y2:o}){return e===fe.Left||e===fe.Right?[.5*(t+r),n]:[t,.5*(n+o)]}function vR({sourceX:e,sourceY:t,sourcePosition:n=fe.Bottom,targetX:r,targetY:o,targetPosition:a=fe.Top}){const[i,s]=gR({pos:n,x1:e,y1:t,x2:r,y2:o}),[c,l]=gR({pos:a,x1:r,y1:o,x2:e,y2:t}),[u,d,f,p]=uT({sourceX:e,sourceY:t,targetX:r,targetY:o,sourceControlX:i,sourceControlY:s,targetControlX:c,targetControlY:l});return[`M${e},${t} C${i},${s} ${c},${l} ${r},${o}`,u,d,f,p]}function bR(e){return g.memo(({id:t,sourceX:n,sourceY:r,targetX:o,targetY:a,sourcePosition:i=fe.Bottom,targetPosition:s=fe.Top,label:c,labelStyle:l,labelShowBg:u,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:p,style:y,markerEnd:m,markerStart:v,interactionWidth:b})=>{const[x,_,w]=vR({sourceX:n,sourceY:r,sourcePosition:i,targetX:o,targetY:a,targetPosition:s}),j=e.isInternal?void 0:t;return h.jsx(Df,{id:j,path:x,labelX:_,labelY:w,label:c,labelStyle:l,labelShowBg:u,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:p,style:y,markerEnd:m,markerStart:v,interactionWidth:b})})}const Hee=bR({isInternal:!1}),xR=bR({isInternal:!0});Hee.displayName="SimpleBezierEdge",xR.displayName="SimpleBezierEdgeInternal";function wR(e){return g.memo(({id:t,sourceX:n,sourceY:r,targetX:o,targetY:a,label:i,labelStyle:s,labelShowBg:c,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:d,style:f,sourcePosition:p=fe.Bottom,targetPosition:y=fe.Top,markerEnd:m,markerStart:v,pathOptions:b,interactionWidth:x})=>{const[_,w,j]=Lb({sourceX:n,sourceY:r,sourcePosition:p,targetX:o,targetY:a,targetPosition:y,borderRadius:b==null?void 0:b.borderRadius,offset:b==null?void 0:b.offset}),E=e.isInternal?void 0:t;return h.jsx(Df,{id:E,path:_,labelX:w,labelY:j,label:i,labelStyle:s,labelShowBg:c,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:d,style:f,markerEnd:m,markerStart:v,interactionWidth:x})})}const _R=wR({isInternal:!1}),jR=wR({isInternal:!0});_R.displayName="SmoothStepEdge",jR.displayName="SmoothStepEdgeInternal";function ER(e){return g.memo(({id:t,...n})=>{var o;const r=e.isInternal?void 0:t;return h.jsx(_R,{...n,id:r,pathOptions:g.useMemo(()=>{var a;return{borderRadius:0,offset:(a=n.pathOptions)==null?void 0:a.offset}},[(o=n.pathOptions)==null?void 0:o.offset])})})}const Wee=ER({isInternal:!1}),SR=ER({isInternal:!0});Wee.displayName="StepEdge",SR.displayName="StepEdgeInternal";function CR(e){return g.memo(({id:t,sourceX:n,sourceY:r,targetX:o,targetY:a,label:i,labelStyle:s,labelShowBg:c,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:d,style:f,markerEnd:p,markerStart:y,interactionWidth:m})=>{const[v,b,x]=mT({sourceX:n,sourceY:r,targetX:o,targetY:a}),_=e.isInternal?void 0:t;return h.jsx(Df,{id:_,path:v,labelX:b,labelY:x,label:i,labelStyle:s,labelShowBg:c,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:d,style:f,markerEnd:p,markerStart:y,interactionWidth:m})})}const qee=CR({isInternal:!1}),OR=CR({isInternal:!0});qee.displayName="StraightEdge",OR.displayName="StraightEdgeInternal";function NR(e){return g.memo(({id:t,sourceX:n,sourceY:r,targetX:o,targetY:a,sourcePosition:i=fe.Bottom,targetPosition:s=fe.Top,label:c,labelStyle:l,labelShowBg:u,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:p,style:y,markerEnd:m,markerStart:v,pathOptions:b,interactionWidth:x})=>{const[_,w,j]=fT({sourceX:n,sourceY:r,sourcePosition:i,targetX:o,targetY:a,targetPosition:s,curvature:b==null?void 0:b.curvature}),E=e.isInternal?void 0:t;return h.jsx(Df,{id:E,path:_,labelX:w,labelY:j,label:c,labelStyle:l,labelShowBg:u,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:p,style:y,markerEnd:m,markerStart:v,interactionWidth:x})})}const Yee=NR({isInternal:!1}),MR=NR({isInternal:!0});Yee.displayName="BezierEdge",MR.displayName="BezierEdgeInternal";const kR={default:MR,straight:OR,step:SR,smoothstep:jR,simplebezier:xR},PR={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},Kee=(e,t,n)=>n===fe.Left?e-t:n===fe.Right?e+t:e,Xee=(e,t,n)=>n===fe.Top?e-t:n===fe.Bottom?e+t:e,AR="react-flow__edgeupdater";function TR({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:o,onMouseEnter:a,onMouseOut:i,type:s}){return h.jsx("circle",{onMouseDown:o,onMouseEnter:a,onMouseOut:i,className:It([AR,`${AR}-${s}`]),cx:Kee(t,r,e),cy:Xee(n,r,e),r,stroke:"transparent",fill:"transparent"})}function Qee({isReconnectable:e,reconnectRadius:t,edge:n,sourceX:r,sourceY:o,targetX:a,targetY:i,sourcePosition:s,targetPosition:c,onReconnect:l,onReconnectStart:u,onReconnectEnd:d,setReconnecting:f,setUpdateHover:p}){const y=vt(),m=(w,j)=>{if(w.button!==0)return;const{autoPanOnConnect:E,domNode:S,isValidConnection:O,connectionMode:k,connectionRadius:N,lib:P,onConnectStart:R,onConnectEnd:A,cancelConnection:C,nodeLookup:M,rfId:T,panBy:D,updateConnection:I}=y.getState(),L=j.type==="target";f(!0),u==null||u(w,n,j.type);const B=(F,H)=>{f(!1),d==null||d(F,n,j.type,H)},U=F=>l==null?void 0:l(n,F);Wb.onPointerDown(w.nativeEvent,{autoPanOnConnect:E,connectionMode:k,connectionRadius:N,domNode:S,handleId:j.id,nodeId:j.nodeId,nodeLookup:M,isTarget:L,edgeUpdaterType:j.type,lib:P,flowId:T,cancelConnection:C,panBy:D,isValidConnection:O,onConnect:U,onConnectStart:R,onConnectEnd:A,onReconnectEnd:B,updateConnection:I,getTransform:()=>y.getState().transform,getFromHandle:()=>y.getState().connection.fromHandle})},v=w=>m(w,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),b=w=>m(w,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),x=()=>p(!0),_=()=>p(!1);return h.jsxs(h.Fragment,{children:[(e===!0||e==="source")&&h.jsx(TR,{position:s,centerX:r,centerY:o,radius:t,onMouseDown:v,onMouseEnter:x,onMouseOut:_,type:"source"}),(e===!0||e==="target")&&h.jsx(TR,{position:c,centerX:a,centerY:i,radius:t,onMouseDown:b,onMouseEnter:x,onMouseOut:_,type:"target"})]})}function Jee({id:e,edgesFocusable:t,edgesReconnectable:n,elementsSelectable:r,onClick:o,onDoubleClick:a,onContextMenu:i,onMouseEnter:s,onMouseMove:c,onMouseLeave:l,reconnectRadius:u,onReconnect:d,onReconnectStart:f,onReconnectEnd:p,rfId:y,edgeTypes:m,noPanClassName:v,onError:b,disableKeyboardA11y:x}){let _=Ve($=>$.edgeLookup.get(e));const w=Ve($=>$.defaultEdgeOptions);_=w?{...w,..._}:_;let j=_.type||"default",E=(m==null?void 0:m[j])||kR[j];E===void 0&&(b==null||b("011",mo.error011(j)),j="default",E=kR.default);const S=!!(_.focusable||t&&typeof _.focusable>"u"),O=typeof d<"u"&&(_.reconnectable||n&&typeof _.reconnectable>"u"),k=!!(_.selectable||r&&typeof _.selectable>"u"),N=g.useRef(null),[P,R]=g.useState(!1),[A,C]=g.useState(!1),M=vt(),{zIndex:T,sourceX:D,sourceY:I,targetX:L,targetY:B,sourcePosition:U,targetPosition:F}=Ve(g.useCallback($=>{const se=$.nodeLookup.get(_.source),le=$.nodeLookup.get(_.target);if(!se||!le)return{zIndex:_.zIndex,...PR};const ve=QG({id:e,sourceNode:se,targetNode:le,sourceHandle:_.sourceHandle||null,targetHandle:_.targetHandle||null,connectionMode:$.connectionMode,onError:b});return{zIndex:UG({selected:_.selected,zIndex:_.zIndex,sourceNode:se,targetNode:le,elevateOnSelect:$.elevateEdgesOnSelect}),...ve||PR}},[_.source,_.target,_.sourceHandle,_.targetHandle,_.selected,_.zIndex]),jt),H=g.useMemo(()=>_.markerStart?`url('#${Fb(_.markerStart,y)}')`:void 0,[_.markerStart,y]),J=g.useMemo(()=>_.markerEnd?`url('#${Fb(_.markerEnd,y)}')`:void 0,[_.markerEnd,y]);if(_.hidden||D===null||I===null||L===null||B===null)return null;const q=$=>{var Te;const{addSelectedEdges:se,unselectNodesAndEdges:le,multiSelectionActive:ve}=M.getState();k&&(M.setState({nodesSelectionActive:!1}),_.selected&&ve?(le({nodes:[],edges:[_]}),(Te=N.current)==null||Te.blur()):se([e])),o&&o($,_)},re=a?$=>{a($,{..._})}:void 0,Z=i?$=>{i($,{..._})}:void 0,Y=s?$=>{s($,{..._})}:void 0,W=c?$=>{c($,{..._})}:void 0,G=l?$=>{l($,{..._})}:void 0,te=$=>{var se;if(!x&&W2.includes($.key)&&k){const{unselectNodesAndEdges:le,addSelectedEdges:ve}=M.getState();$.key==="Escape"?((se=N.current)==null||se.blur(),le({edges:[_]})):ve([e])}};return h.jsx("svg",{style:{zIndex:T},children:h.jsxs("g",{className:It(["react-flow__edge",`react-flow__edge-${j}`,_.className,v,{selected:_.selected,animated:_.animated,inactive:!k&&!o,updating:P,selectable:k}]),onClick:q,onDoubleClick:re,onContextMenu:Z,onMouseEnter:Y,onMouseMove:W,onMouseLeave:G,onKeyDown:S?te:void 0,tabIndex:S?0:void 0,role:S?"button":"img","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":_.ariaLabel===null?void 0:_.ariaLabel||`Edge from ${_.source} to ${_.target}`,"aria-describedby":S?`${qT}-${y}`:void 0,ref:N,children:[!A&&h.jsx(E,{id:e,source:_.source,target:_.target,type:_.type,selected:_.selected,animated:_.animated,selectable:k,deletable:_.deletable??!0,label:_.label,labelStyle:_.labelStyle,labelShowBg:_.labelShowBg,labelBgStyle:_.labelBgStyle,labelBgPadding:_.labelBgPadding,labelBgBorderRadius:_.labelBgBorderRadius,sourceX:D,sourceY:I,targetX:L,targetY:B,sourcePosition:U,targetPosition:F,data:_.data,style:_.style,sourceHandleId:_.sourceHandle,targetHandleId:_.targetHandle,markerStart:H,markerEnd:J,pathOptions:"pathOptions"in _?_.pathOptions:void 0,interactionWidth:_.interactionWidth}),O&&h.jsx(Qee,{edge:_,isReconnectable:O,reconnectRadius:u,onReconnect:d,onReconnectStart:f,onReconnectEnd:p,sourceX:D,sourceY:I,targetX:L,targetY:B,sourcePosition:U,targetPosition:F,setUpdateHover:R,setReconnecting:C})]})})}const Gee=e=>({width:e.width,height:e.height,edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function RR({defaultMarkerColor:e,onlyRenderVisibleElements:t,rfId:n,edgeTypes:r,noPanClassName:o,onReconnect:a,onEdgeContextMenu:i,onEdgeMouseEnter:s,onEdgeMouseMove:c,onEdgeMouseLeave:l,onEdgeClick:u,reconnectRadius:d,onEdgeDoubleClick:f,onReconnectStart:p,onReconnectEnd:y,disableKeyboardA11y:m}){const{edgesFocusable:v,edgesReconnectable:b,elementsSelectable:x,onError:_}=Ve(Gee,jt),w=Lee(t);return h.jsxs("div",{className:"react-flow__edges",children:[h.jsx(Vee,{defaultColor:e,rfId:n}),w.map(j=>h.jsx(Jee,{id:j,edgesFocusable:v,edgesReconnectable:b,elementsSelectable:x,noPanClassName:o,onReconnect:a,onContextMenu:i,onMouseEnter:s,onMouseMove:c,onMouseLeave:l,onClick:u,reconnectRadius:d,onDoubleClick:f,onReconnectStart:p,onReconnectEnd:y,rfId:n,onError:_,edgeTypes:r,disableKeyboardA11y:m},j))]})}RR.displayName="EdgeRenderer";const Zee=g.memo(RR),ete=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function tte({children:e}){const t=Ve(ete);return h.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:t},children:e})}function nte(e){const t=Fn(),n=g.useRef(!1);g.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const rte=e=>{var t;return(t=e.panZoom)==null?void 0:t.syncViewport};function ote(e){const t=Ve(rte),n=vt();return g.useEffect(()=>{e&&(t==null||t(e),n.setState({transform:[e.x,e.y,e.zoom]}))},[e,t]),null}function ate(e){return e.connection.inProgress?{...e.connection,to:pl(e.connection.to,e.transform)}:{...e.connection}}function ite(e){return ate}function ste(e){const t=ite();return Ve(t,jt)}const cte=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function lte({containerStyle:e,style:t,type:n,component:r}){const{nodesConnectable:o,width:a,height:i,isValid:s,inProgress:c}=Ve(cte,jt);return a&&o&&c?h.jsx("svg",{style:e,width:a,height:i,className:"react-flow__connectionline react-flow__container",children:h.jsx("g",{className:It(["react-flow__connection",X2(s)]),children:h.jsx(IR,{style:t,type:n,CustomComponent:r,isValid:s})})}):null}const IR=({style:e,type:t=Qo.Bezier,CustomComponent:n,isValid:r})=>{const{inProgress:o,from:a,fromNode:i,fromHandle:s,fromPosition:c,to:l,toNode:u,toHandle:d,toPosition:f}=ste();if(!o)return;if(n)return h.jsx(n,{connectionLineType:t,connectionLineStyle:e,fromNode:i,fromHandle:s,fromX:a.x,fromY:a.y,toX:l.x,toY:l.y,fromPosition:c,toPosition:f,connectionStatus:X2(r),toNode:u,toHandle:d});let p="";const y={sourceX:a.x,sourceY:a.y,sourcePosition:c,targetX:l.x,targetY:l.y,targetPosition:f};switch(t){case Qo.Bezier:[p]=fT(y);break;case Qo.SimpleBezier:[p]=vR(y);break;case Qo.Step:[p]=Lb({...y,borderRadius:0});break;case Qo.SmoothStep:[p]=Lb(y);break;default:[p]=mT(y)}return h.jsx("path",{d:p,fill:"none",className:"react-flow__connection-path",style:e})};IR.displayName="ConnectionLine";const ute={};function DR(e=ute){g.useRef(e),vt(),g.useEffect(()=>{},[e])}function dte(){vt(),g.useRef(!1),g.useEffect(()=>{},[])}function LR({nodeTypes:e,edgeTypes:t,onInit:n,onNodeClick:r,onEdgeClick:o,onNodeDoubleClick:a,onEdgeDoubleClick:i,onNodeMouseEnter:s,onNodeMouseMove:c,onNodeMouseLeave:l,onNodeContextMenu:u,onSelectionContextMenu:d,onSelectionStart:f,onSelectionEnd:p,connectionLineType:y,connectionLineStyle:m,connectionLineComponent:v,connectionLineContainerStyle:b,selectionKeyCode:x,selectionOnDrag:_,selectionMode:w,multiSelectionKeyCode:j,panActivationKeyCode:E,zoomActivationKeyCode:S,deleteKeyCode:O,onlyRenderVisibleElements:k,elementsSelectable:N,defaultViewport:P,translateExtent:R,minZoom:A,maxZoom:C,preventScrolling:M,defaultMarkerColor:T,zoomOnScroll:D,zoomOnPinch:I,panOnScroll:L,panOnScrollSpeed:B,panOnScrollMode:U,zoomOnDoubleClick:F,panOnDrag:H,onPaneClick:J,onPaneMouseEnter:q,onPaneMouseMove:re,onPaneMouseLeave:Z,onPaneScroll:Y,onPaneContextMenu:W,paneClickDistance:G,nodeClickDistance:te,onEdgeContextMenu:$,onEdgeMouseEnter:se,onEdgeMouseMove:le,onEdgeMouseLeave:ve,reconnectRadius:Te,onReconnect:qe,onReconnectStart:Ye,onReconnectEnd:ze,noDragClassName:st,noWheelClassName:He,noPanClassName:ct,disableKeyboardA11y:Ht,nodeExtent:St,rfId:yt,viewport:Rt,onViewportChange:bn}){return DR(e),DR(t),dte(),nte(n),ote(Rt),h.jsx(Nee,{onPaneClick:J,onPaneMouseEnter:q,onPaneMouseMove:re,onPaneMouseLeave:Z,onPaneContextMenu:W,onPaneScroll:Y,paneClickDistance:G,deleteKeyCode:O,selectionKeyCode:x,selectionOnDrag:_,selectionMode:w,onSelectionStart:f,onSelectionEnd:p,multiSelectionKeyCode:j,panActivationKeyCode:E,zoomActivationKeyCode:S,elementsSelectable:N,zoomOnScroll:D,zoomOnPinch:I,zoomOnDoubleClick:F,panOnScroll:L,panOnScrollSpeed:B,panOnScrollMode:U,panOnDrag:H,defaultViewport:P,translateExtent:R,minZoom:A,maxZoom:C,onSelectionContextMenu:d,preventScrolling:M,noDragClassName:st,noWheelClassName:He,noPanClassName:ct,disableKeyboardA11y:Ht,onViewportChange:bn,isControlledViewport:!!Rt,children:h.jsxs(tte,{children:[h.jsx(Zee,{edgeTypes:t,onEdgeClick:o,onEdgeDoubleClick:i,onReconnect:qe,onReconnectStart:Ye,onReconnectEnd:ze,onlyRenderVisibleElements:k,onEdgeContextMenu:$,onEdgeMouseEnter:se,onEdgeMouseMove:le,onEdgeMouseLeave:ve,reconnectRadius:Te,defaultMarkerColor:T,noPanClassName:ct,disableKeyboardA11y:Ht,rfId:yt}),h.jsx(lte,{style:m,type:y,component:v,containerStyle:b}),h.jsx("div",{className:"react-flow__edgelabel-renderer"}),h.jsx(Dee,{nodeTypes:e,onNodeClick:r,onNodeDoubleClick:a,onNodeMouseEnter:s,onNodeMouseMove:c,onNodeMouseLeave:l,onNodeContextMenu:u,nodeClickDistance:te,onlyRenderVisibleElements:k,noPanClassName:ct,noDragClassName:st,disableKeyboardA11y:Ht,nodeExtent:St,rfId:yt}),h.jsx("div",{className:"react-flow__viewport-portal"})]})})}LR.displayName="GraphView";const fte=g.memo(LR),FR=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:o,height:a,fitView:i,nodeOrigin:s,nodeExtent:c}={})=>{const l=new Map,u=new Map,d=new Map,f=new Map,p=r??t??[],y=n??e??[],m=s??[0,0],v=c??cl;_T(d,f,p),zb(y,l,u,{nodeOrigin:m,nodeExtent:v,elevateNodesOnSelect:!1});let b=[0,0,1];if(i&&o&&a){const x=dl(l,{filter:E=>!!((E.width||E.initialWidth)&&(E.height||E.initialHeight))}),{x:_,y:w,zoom:j}=Ib(x,o,a,.5,2,.1);b=[_,w,j]}return{rfId:"1",width:0,height:0,transform:b,nodes:y,nodeLookup:l,parentLookup:u,edges:p,edgeLookup:f,connectionLookup:d,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:n!==void 0,hasDefaultEdges:r!==void 0,panZoom:null,minZoom:.5,maxZoom:2,translateExtent:cl,nodeExtent:v,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:qi.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:m,nodeDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,fitViewOnInit:!1,fitViewDone:!1,fitViewOnInitOptions:void 0,selectNodesOnDrag:!0,multiSelectionActive:!1,connection:{...q2},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanSpeed:15,connectionRadius:20,onError:zG,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1}},pte=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:o,height:a,fitView:i,nodeOrigin:s,nodeExtent:c})=>AZ((l,u)=>({...FR({nodes:e,edges:t,width:o,height:a,fitView:i,nodeOrigin:s,nodeExtent:c,defaultNodes:n,defaultEdges:r}),setNodes:d=>{const{nodeLookup:f,parentLookup:p,nodeOrigin:y,elevateNodesOnSelect:m}=u();zb(d,f,p,{nodeOrigin:y,nodeExtent:c,elevateNodesOnSelect:m,checkEquality:!0}),l({nodes:d})},setEdges:d=>{const{connectionLookup:f,edgeLookup:p}=u();_T(f,p,d),l({edges:d})},setDefaultNodesAndEdges:(d,f)=>{if(d){const{setNodes:p}=u();p(d),l({hasDefaultNodes:!0})}if(f){const{setEdges:p}=u();p(f),l({hasDefaultEdges:!0})}},updateNodeInternals:(d,f={triggerFitView:!0})=>{const{triggerNodeChanges:p,nodeLookup:y,parentLookup:m,fitViewOnInit:v,fitViewDone:b,fitViewOnInitOptions:x,domNode:_,nodeOrigin:w,nodeExtent:j,debug:E,fitViewSync:S}=u(),{changes:O,updatedInternals:k}=nZ(d,y,m,_,w,j);if(k){if(ZG(y,m,{nodeOrigin:w,nodeExtent:j}),f.triggerFitView){let N=b;!b&&v&&(N=S({...x,nodes:x==null?void 0:x.nodes})),l({fitViewDone:N})}else l({});(O==null?void 0:O.length)>0&&(E&&console.log("React Flow: trigger node changes",O),p==null||p(O))}},updateNodePositions:(d,f=!1)=>{const p=[],y=[];for(const[m,v]of d){const b={id:m,type:"position",position:v.position,dragging:f};v!=null&&v.expandParent&&(v!=null&&v.parentId)&&b.position&&(p.push({id:m,parentId:v.parentId,rect:{...v.internals.positionAbsolute,width:v.measured.width,height:v.measured.height}}),b.position.x=Math.max(0,b.position.x),b.position.y=Math.max(0,b.position.y)),y.push(b)}if(p.length>0){const{nodeLookup:m,parentLookup:v,nodeOrigin:b}=u(),x=Ub(p,m,v,b);y.push(...x)}u().triggerNodeChanges(y)},triggerNodeChanges:d=>{const{onNodesChange:f,setNodes:p,nodes:y,hasDefaultNodes:m,debug:v}=u();if(d!=null&&d.length){if(m){const b=Da(d,y);p(b)}v&&console.log("React Flow: trigger node changes",d),f==null||f(d)}},triggerEdgeChanges:d=>{const{onEdgesChange:f,setEdges:p,edges:y,hasDefaultEdges:m,debug:v}=u();if(d!=null&&d.length){if(m){const b=gl(d,y);p(b)}v&&console.log("React Flow: trigger edge changes",d),f==null||f(d)}},addSelectedNodes:d=>{const{multiSelectionActive:f,edgeLookup:p,nodeLookup:y,triggerNodeChanges:m,triggerEdgeChanges:v}=u();if(f){const b=d.map(x=>La(x,!0));m(b);return}m(Zi(y,new Set([...d]),!0)),v(Zi(p))},addSelectedEdges:d=>{const{multiSelectionActive:f,edgeLookup:p,nodeLookup:y,triggerNodeChanges:m,triggerEdgeChanges:v}=u();if(f){const b=d.map(x=>La(x,!0));v(b);return}v(Zi(p,new Set([...d]))),m(Zi(y,new Set,!0))},unselectNodesAndEdges:({nodes:d,edges:f}={})=>{const{edges:p,nodes:y,nodeLookup:m,triggerNodeChanges:v,triggerEdgeChanges:b}=u(),x=d||y,_=f||p,w=x.map(E=>{const S=m.get(E.id);return S&&(S.selected=!1),La(E.id,!1)}),j=_.map(E=>La(E.id,!1));v(w),b(j)},setMinZoom:d=>{const{panZoom:f,maxZoom:p}=u();f==null||f.setScaleExtent([d,p]),l({minZoom:d})},setMaxZoom:d=>{const{panZoom:f,minZoom:p}=u();f==null||f.setScaleExtent([p,d]),l({maxZoom:d})},setTranslateExtent:d=>{var f;(f=u().panZoom)==null||f.setTranslateExtent(d),l({translateExtent:d})},setPaneClickDistance:d=>{var f;(f=u().panZoom)==null||f.setClickDistance(d)},resetSelectedElements:()=>{const{edges:d,nodes:f,triggerNodeChanges:p,triggerEdgeChanges:y}=u(),m=f.reduce((b,x)=>x.selected?[...b,La(x.id,!1)]:b,[]),v=d.reduce((b,x)=>x.selected?[...b,La(x.id,!1)]:b,[]);p(m),y(v)},setNodeExtent:d=>{const{nodes:f,nodeLookup:p,parentLookup:y,nodeOrigin:m,elevateNodesOnSelect:v,nodeExtent:b}=u();d[0][0]===b[0][0]&&d[0][1]===b[0][1]&&d[1][0]===b[1][0]&&d[1][1]===b[1][1]||(zb(f,p,y,{nodeOrigin:m,nodeExtent:d,elevateNodesOnSelect:v,checkEquality:!1}),l({nodeExtent:d}))},panBy:d=>{const{transform:f,width:p,height:y,panZoom:m,translateExtent:v}=u();return rZ({delta:d,panZoom:m,transform:f,translateExtent:v,width:p,height:y})},fitView:d=>{const{panZoom:f,width:p,height:y,minZoom:m,maxZoom:v,nodeLookup:b}=u();if(!f)return Promise.resolve(!1);const x=Ab(b,d);return Tb({nodes:x,width:p,height:y,panZoom:f,minZoom:m,maxZoom:v},d)},fitViewSync:d=>{const{panZoom:f,width:p,height:y,minZoom:m,maxZoom:v,nodeLookup:b}=u();if(!f)return!1;const x=Ab(b,d);return Tb({nodes:x,width:p,height:y,panZoom:f,minZoom:m,maxZoom:v},d),x.size>0},cancelConnection:()=>{l({connection:{...q2}})},updateConnection:d=>{l({connection:d})},reset:()=>l({...FR()})}),Object.is);function hte({initialNodes:e,initialEdges:t,defaultNodes:n,defaultEdges:r,initialWidth:o,initialHeight:a,fitView:i,nodeOrigin:s,nodeExtent:c,children:l}){const[u]=g.useState(()=>pte({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:o,height:a,fitView:i,nodeOrigin:s,nodeExtent:c}));return h.jsx(TZ,{value:u,children:h.jsx(nee,{children:l})})}function mte({children:e,nodes:t,edges:n,defaultNodes:r,defaultEdges:o,width:a,height:i,fitView:s,nodeOrigin:c,nodeExtent:l}){return g.useContext(Af)?h.jsx(h.Fragment,{children:e}):h.jsx(hte,{initialNodes:t,initialEdges:n,defaultNodes:r,defaultEdges:o,initialWidth:a,initialHeight:i,fitView:s,nodeOrigin:c,nodeExtent:l,children:e})}const yte={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function gte({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:o,nodeTypes:a,edgeTypes:i,onNodeClick:s,onEdgeClick:c,onInit:l,onMove:u,onMoveStart:d,onMoveEnd:f,onConnect:p,onConnectStart:y,onConnectEnd:m,onClickConnectStart:v,onClickConnectEnd:b,onNodeMouseEnter:x,onNodeMouseMove:_,onNodeMouseLeave:w,onNodeContextMenu:j,onNodeDoubleClick:E,onNodeDragStart:S,onNodeDrag:O,onNodeDragStop:k,onNodesDelete:N,onEdgesDelete:P,onDelete:R,onSelectionChange:A,onSelectionDragStart:C,onSelectionDrag:M,onSelectionDragStop:T,onSelectionContextMenu:D,onSelectionStart:I,onSelectionEnd:L,onBeforeDelete:B,connectionMode:U,connectionLineType:F=Qo.Bezier,connectionLineStyle:H,connectionLineComponent:J,connectionLineContainerStyle:q,deleteKeyCode:re="Backspace",selectionKeyCode:Z="Shift",selectionOnDrag:Y=!1,selectionMode:W=ll.Full,panActivationKeyCode:G="Space",multiSelectionKeyCode:te=Of()?"Meta":"Control",zoomActivationKeyCode:$=Of()?"Meta":"Control",snapToGrid:se,snapGrid:le,onlyRenderVisibleElements:ve=!1,selectNodesOnDrag:Te,nodesDraggable:qe,nodesConnectable:Ye,nodesFocusable:ze,nodeOrigin:st=YT,edgesFocusable:He,edgesReconnectable:ct,elementsSelectable:Ht=!0,defaultViewport:St=qZ,minZoom:yt=.5,maxZoom:Rt=2,translateExtent:bn=cl,preventScrolling:Sr=!0,nodeExtent:ii,defaultMarkerColor:er="#b1b1b7",zoomOnScroll:pa=!0,zoomOnPinch:Q=!0,panOnScroll:ee=!1,panOnScrollSpeed:ie=.5,panOnScrollMode:pe=Xo.Free,zoomOnDoubleClick:ke=!0,panOnDrag:Mt=!0,onPaneClick:wt,onPaneMouseEnter:Be,onPaneMouseMove:ge,onPaneMouseLeave:we,onPaneScroll:_e,onPaneContextMenu:je,paneClickDistance:Le=0,nodeClickDistance:ut=0,children:Ct,onReconnect:z,onReconnectStart:X,onReconnectEnd:ne,onEdgeContextMenu:de,onEdgeDoubleClick:Se,onEdgeMouseEnter:Pe,onEdgeMouseMove:Ie,onEdgeMouseLeave:Ce,reconnectRadius:Ne=10,onNodesChange:be,onEdgesChange:De,noDragClassName:Ue="nodrag",noWheelClassName:gt="nowheel",noPanClassName:_t="nopan",fitView:Ke,fitViewOptions:Cn,connectOnClick:At,attributionPosition:si,proOptions:Cr,defaultEdgeOptions:ha,elevateNodesOnSelect:Wr,elevateEdgesOnSelect:Pu,disableKeyboardA11y:tr=!1,autoPanOnConnect:Ks,autoPanOnNodeDrag:Xs,autoPanSpeed:Qs,connectionRadius:nt,isValidConnection:On,onError:ci,style:Ot,id:Lo,nodeDragThreshold:Vh,viewport:wE,onViewportChange:owe,width:awe,height:iwe,colorMode:swe="light",debug:cwe,...lwe},uwe){const _E=Lo||"1",dwe=QZ(swe);return h.jsx("div",{...lwe,style:{...Ot,...yte},ref:uwe,className:It(["react-flow",o,dwe]),"data-testid":"rf__wrapper",id:Lo,children:h.jsxs(mte,{nodes:e,edges:t,width:awe,height:iwe,fitView:Ke,nodeOrigin:st,nodeExtent:ii,children:[h.jsx(fte,{onInit:l,onNodeClick:s,onEdgeClick:c,onNodeMouseEnter:x,onNodeMouseMove:_,onNodeMouseLeave:w,onNodeContextMenu:j,onNodeDoubleClick:E,nodeTypes:a,edgeTypes:i,connectionLineType:F,connectionLineStyle:H,connectionLineComponent:J,connectionLineContainerStyle:q,selectionKeyCode:Z,selectionOnDrag:Y,selectionMode:W,deleteKeyCode:re,multiSelectionKeyCode:te,panActivationKeyCode:G,zoomActivationKeyCode:$,onlyRenderVisibleElements:ve,defaultViewport:St,translateExtent:bn,minZoom:yt,maxZoom:Rt,preventScrolling:Sr,zoomOnScroll:pa,zoomOnPinch:Q,zoomOnDoubleClick:ke,panOnScroll:ee,panOnScrollSpeed:ie,panOnScrollMode:pe,panOnDrag:Mt,onPaneClick:wt,onPaneMouseEnter:Be,onPaneMouseMove:ge,onPaneMouseLeave:we,onPaneScroll:_e,onPaneContextMenu:je,paneClickDistance:Le,nodeClickDistance:ut,onSelectionContextMenu:D,onSelectionStart:I,onSelectionEnd:L,onReconnect:z,onReconnectStart:X,onReconnectEnd:ne,onEdgeContextMenu:de,onEdgeDoubleClick:Se,onEdgeMouseEnter:Pe,onEdgeMouseMove:Ie,onEdgeMouseLeave:Ce,reconnectRadius:Ne,defaultMarkerColor:er,noDragClassName:Ue,noWheelClassName:gt,noPanClassName:_t,rfId:_E,disableKeyboardA11y:tr,nodeExtent:ii,viewport:wE,onViewportChange:owe}),h.jsx(XZ,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:p,onConnectStart:y,onConnectEnd:m,onClickConnectStart:v,onClickConnectEnd:b,nodesDraggable:qe,nodesConnectable:Ye,nodesFocusable:ze,edgesFocusable:He,edgesReconnectable:ct,elementsSelectable:Ht,elevateNodesOnSelect:Wr,elevateEdgesOnSelect:Pu,minZoom:yt,maxZoom:Rt,nodeExtent:ii,onNodesChange:be,onEdgesChange:De,snapToGrid:se,snapGrid:le,connectionMode:U,translateExtent:bn,connectOnClick:At,defaultEdgeOptions:ha,fitView:Ke,fitViewOptions:Cn,onNodesDelete:N,onEdgesDelete:P,onDelete:R,onNodeDragStart:S,onNodeDrag:O,onNodeDragStop:k,onSelectionDrag:M,onSelectionDragStart:C,onSelectionDragStop:T,onMove:u,onMoveStart:d,onMoveEnd:f,noPanClassName:_t,nodeOrigin:st,rfId:_E,autoPanOnConnect:Ks,autoPanOnNodeDrag:Xs,autoPanSpeed:Qs,onError:ci,connectionRadius:nt,isValidConnection:On,selectNodesOnDrag:Te,nodeDragThreshold:Vh,onBeforeDelete:B,paneClickDistance:Le,debug:cwe}),h.jsx(WZ,{onSelectionChange:A}),Ct,h.jsx($Z,{proOptions:Cr,position:si}),h.jsx(FZ,{rfId:_E,disableKeyboardA11y:tr})]})})}var vte=oR(gte);const bte=e=>{var t;return(t=e.domNode)==null?void 0:t.querySelector(".react-flow__viewport-portal")};function xte({children:e}){const t=Ve(bte);return t?Au.createPortal(e,t):null}const wte=e=>e.nodes;function _te(){return Ve(wte,jt)}function Lf({type:e,id:t=null,nodeId:n,onConnect:r,onDisconnect:o}){const a=Zb(),i=n??a,s=g.useRef(null),c=Ve(l=>l.connectionLookup.get(`${i}-${e}-${t}`),DG);return g.useEffect(()=>{if(s.current&&s.current!==c){const l=c??new Map;K2(s.current,l,o),K2(l,s.current,r)}s.current=c??new Map},[c,r,o]),g.useMemo(()=>Array.from((c==null?void 0:c.values())??[]),[c])}ln=function(e){return Ve(g.useCallback(t=>t.nodeLookup.get(e),[e]),jt)};function jte({dimensions:e,lineWidth:t,variant:n,className:r}){return h.jsx("path",{strokeWidth:t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:It(["react-flow__background-pattern",n,r])})}function Ete({radius:e,className:t}){return h.jsx("circle",{cx:e,cy:e,r:e,className:It(["react-flow__background-pattern","dots",t])})}var vo;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(vo||(vo={}));const Ste={[vo.Dots]:1,[vo.Lines]:1,[vo.Cross]:6},Cte=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function BR({id:e,variant:t=vo.Dots,gap:n=20,size:r,lineWidth:o=1,offset:a=0,color:i,bgColor:s,style:c,className:l,patternClassName:u}){const d=g.useRef(null),{transform:f,patternId:p}=Ve(Cte,jt),y=r||Ste[t],m=t===vo.Dots,v=t===vo.Cross,b=Array.isArray(n)?n:[n,n],x=[b[0]*f[2]||1,b[1]*f[2]||1],_=y*f[2],w=Array.isArray(a)?a:[a,a],j=v?[_,_]:x,E=[w[0]*f[2]||1+j[0]/2,w[1]*f[2]||1+j[1]/2],S=`${p}${e||""}`;return h.jsxs("svg",{className:It(["react-flow__background",l]),style:{...c,...Rf,"--xy-background-color-props":s,"--xy-background-pattern-color-props":i},ref:d,"data-testid":"rf__background",children:[h.jsx("pattern",{id:S,x:f[0]%x[0],y:f[1]%x[1],width:x[0],height:x[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${E[0]},-${E[1]})`,children:m?h.jsx(Ete,{radius:_/2,className:u}):h.jsx(jte,{dimensions:j,lineWidth:o,variant:t,className:u})}),h.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${S})`})]})}BR.displayName="Background";const Ote=g.memo(BR);function Nte(){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:h.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function Mte(){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:h.jsx("path",{d:"M0 0h32v4.2H0z"})})}function kte(){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:h.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function Pte(){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:h.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function Ate(){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:h.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function Ff({children:e,className:t,...n}){return h.jsx("button",{type:"button",className:It(["react-flow__controls-button",t]),...n,children:e})}const Tte=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom});function $R({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:o,onZoomIn:a,onZoomOut:i,onFitView:s,onInteractiveChange:c,className:l,children:u,position:d="bottom-left",orientation:f="vertical","aria-label":p="React Flow controls"}){const y=vt(),{isInteractive:m,minZoomReached:v,maxZoomReached:b}=Ve(Tte,jt),{zoomIn:x,zoomOut:_,fitView:w}=Fn(),j=()=>{x(),a==null||a()},E=()=>{_(),i==null||i()},S=()=>{w(o),s==null||s()},O=()=>{y.setState({nodesDraggable:!m,nodesConnectable:!m,elementsSelectable:!m}),c==null||c(!m)},k=f==="horizontal"?"horizontal":"vertical";return h.jsxs(Gi,{className:It(["react-flow__controls",k,l]),position:d,style:e,"data-testid":"rf__controls","aria-label":p,children:[t&&h.jsxs(h.Fragment,{children:[h.jsx(Ff,{onClick:j,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:b,children:h.jsx(Nte,{})}),h.jsx(Ff,{onClick:E,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:v,children:h.jsx(Mte,{})})]}),n&&h.jsx(Ff,{className:"react-flow__controls-fitview",onClick:S,title:"fit view","aria-label":"fit view",children:h.jsx(kte,{})}),r&&h.jsx(Ff,{className:"react-flow__controls-interactive",onClick:O,title:"toggle interactivity","aria-label":"toggle interactivity",children:m?h.jsx(Ate,{}):h.jsx(Pte,{})}),u]})}$R.displayName="Controls";const Rte=g.memo($R);function Ite({id:e,x:t,y:n,width:r,height:o,style:a,color:i,strokeColor:s,strokeWidth:c,className:l,borderRadius:u,shapeRendering:d,selected:f,onClick:p}){const{background:y,backgroundColor:m}=a||{},v=i||y||m;return h.jsx("rect",{className:It(["react-flow__minimap-node",{selected:f},l]),x:t,y:n,rx:u,ry:u,width:r,height:o,style:{fill:v,stroke:s,strokeWidth:c},shapeRendering:d,onClick:p?b=>p(b,e):void 0})}const Dte=g.memo(Ite),Lte=e=>e.nodes.map(t=>t.id),ex=e=>e instanceof Function?e:()=>e;function Fte({nodeStrokeColor:e,nodeColor:t,nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:o,nodeComponent:a=Dte,onClick:i}){const s=Ve(Lte,jt),c=ex(t),l=ex(e),u=ex(n),d=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return h.jsx(h.Fragment,{children:s.map(f=>h.jsx($te,{id:f,nodeColorFunc:c,nodeStrokeColorFunc:l,nodeClassNameFunc:u,nodeBorderRadius:r,nodeStrokeWidth:o,NodeComponent:a,onClick:i,shapeRendering:d},f))})}function Bte({id:e,nodeColorFunc:t,nodeStrokeColorFunc:n,nodeClassNameFunc:r,nodeBorderRadius:o,nodeStrokeWidth:a,shapeRendering:i,NodeComponent:s,onClick:c}){const{node:l,x:u,y:d,width:f,height:p}=Ve(y=>{const m=y.nodeLookup.get(e),{x:v,y:b}=m.internals.positionAbsolute,{width:x,height:_}=yo(m);return{node:m,x:v,y:b,width:x,height:_}},jt);return!l||l.hidden||!aT(l)?null:h.jsx(s,{x:u,y:d,width:f,height:p,style:l.style,selected:!!l.selected,className:r(l),color:t(l),borderRadius:o,strokeColor:n(l),strokeWidth:a,shapeRendering:i,onClick:c,id:l.id})}const $te=g.memo(Bte);var zte=g.memo(Fte);const Vte=200,Ute=150,Hte=e=>{const t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:t,boundingRect:e.nodeLookup.size>0?nT(dl(e.nodeLookup),t):t,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height}},Wte="react-flow__minimap-desc";function zR({style:e,className:t,nodeStrokeColor:n,nodeColor:r,nodeClassName:o="",nodeBorderRadius:a=5,nodeStrokeWidth:i,nodeComponent:s,bgColor:c,maskColor:l,maskStrokeColor:u,maskStrokeWidth:d,position:f="bottom-right",onClick:p,onNodeClick:y,pannable:m=!1,zoomable:v=!1,ariaLabel:b="React Flow mini map",inversePan:x,zoomStep:_=10,offsetScale:w=5}){const j=vt(),E=g.useRef(null),{boundingRect:S,viewBB:O,rfId:k,panZoom:N,translateExtent:P,flowWidth:R,flowHeight:A}=Ve(Hte,jt),C=(e==null?void 0:e.width)??Vte,M=(e==null?void 0:e.height)??Ute,T=S.width/C,D=S.height/M,I=Math.max(T,D),L=I*C,B=I*M,U=w*I,F=S.x-(L-S.width)/2-U,H=S.y-(B-S.height)/2-U,J=L+U*2,q=B+U*2,re=`${Wte}-${k}`,Z=g.useRef(0),Y=g.useRef();Z.current=I,g.useEffect(()=>{if(E.current&&N)return Y.current=dZ({domNode:E.current,panZoom:N,getTransform:()=>j.getState().transform,getViewScale:()=>Z.current}),()=>{var te;(te=Y.current)==null||te.destroy()}},[N]),g.useEffect(()=>{var te;(te=Y.current)==null||te.update({translateExtent:P,width:R,height:A,inversePan:x,pannable:m,zoomStep:_,zoomable:v})},[m,v,x,_,P,R,A]);const W=p?te=>{var le;const[$,se]=((le=Y.current)==null?void 0:le.pointer(te))||[0,0];p(te,{x:$,y:se})}:void 0,G=y?g.useCallback((te,$)=>{const se=j.getState().nodeLookup.get($);y(te,se)},[]):void 0;return h.jsx(Gi,{position:f,style:{...e,"--xy-minimap-background-color-props":typeof c=="string"?c:void 0,"--xy-minimap-mask-background-color-props":typeof l=="string"?l:void 0,"--xy-minimap-mask-stroke-color-props":typeof u=="string"?u:void 0,"--xy-minimap-mask-stroke-width-props":typeof d=="number"?d*I:void 0,"--xy-minimap-node-background-color-props":typeof r=="string"?r:void 0,"--xy-minimap-node-stroke-color-props":typeof n=="string"?n:void 0,"--xy-minimap-node-stroke-width-props":typeof i=="string"?i:void 0},className:It(["react-flow__minimap",t]),"data-testid":"rf__minimap",children:h.jsxs("svg",{width:C,height:M,viewBox:`${F} ${H} ${J} ${q}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":re,ref:E,onClick:W,children:[b&&h.jsx("title",{id:re,children:b}),h.jsx(zte,{onClick:G,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:a,nodeClassName:o,nodeStrokeWidth:i,nodeComponent:s}),h.jsx("path",{className:"react-flow__minimap-mask",d:`M${F-U},${H-U}h${J+U*2}v${q+U*2}h${-J-U*2}z
        M${O.x},${O.y}h${O.width}v${O.height}h${-O.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}zR.displayName="MiniMap";const qte=g.memo(zR);function Yte({nodeId:e,position:t,variant:n=Ji.Handle,className:r,style:o={},children:a,color:i,minWidth:s=10,minHeight:c=10,maxWidth:l=Number.MAX_VALUE,maxHeight:u=Number.MAX_VALUE,keepAspectRatio:d=!1,shouldResize:f,onResizeStart:p,onResize:y,onResizeEnd:m}){const v=Zb(),b=typeof e=="string"?e:v,x=vt(),_=g.useRef(null),w=n===Ji.Line?"right":"bottom-right",j=t??w,E=g.useRef(null);g.useEffect(()=>{if(!(!_.current||!b))return E.current||(E.current=NZ({domNode:_.current,nodeId:b,getStoreItems:()=>{const{nodeLookup:N,transform:P,snapGrid:R,snapToGrid:A,nodeOrigin:C,domNode:M}=x.getState();return{nodeLookup:N,transform:P,snapGrid:R,snapToGrid:A,nodeOrigin:C,paneDomNode:M}},onChange:(N,P)=>{const{triggerNodeChanges:R,nodeLookup:A,parentLookup:C,nodeOrigin:M}=x.getState(),T=[],D={x:N.x,y:N.y},I=A.get(b);if(I&&I.expandParent&&I.parentId){const L=I.origin??M,B=N.width??I.measured.width,U=N.height??I.measured.height,F={id:I.id,parentId:I.parentId,rect:{width:B,height:U,...iT({x:N.x??I.position.x,y:N.y??I.position.y},{width:B,height:U},I.parentId,A,L)}},H=Ub([F],A,C,M);T.push(...H),D.x=N.x?Math.max(L[0]*B,N.x):void 0,D.y=N.y?Math.max(L[1]*U,N.y):void 0}if(D.x!==void 0&&D.y!==void 0){const L={id:b,type:"position",position:{...D}};T.push(L)}if(N.width!==void 0&&N.height!==void 0){const L={id:b,type:"dimensions",resizing:!0,setAttributes:!0,dimensions:{width:N.width,height:N.height}};T.push(L)}for(const L of P){const B={...L,type:"position"};T.push(B)}R(T)},onEnd:()=>{const N={id:b,type:"dimensions",resizing:!1};x.getState().triggerNodeChanges([N])}})),E.current.update({controlPosition:j,boundaries:{minWidth:s,minHeight:c,maxWidth:l,maxHeight:u},keepAspectRatio:d,onResizeStart:p,onResize:y,onResizeEnd:m,shouldResize:f}),()=>{var N;(N=E.current)==null||N.destroy()}},[j,s,c,l,u,d,p,y,m,f]);const S=j.split("-"),O=n===Ji.Line?"borderColor":"backgroundColor",k=i?{...o,[O]:i}:o;return h.jsx("div",{className:It(["react-flow__resize-control","nodrag",...S,n,r]),ref:_,style:k,children:a})}const VR=g.memo(Yte);function Kte({nodeId:e,isVisible:t=!0,handleClassName:n,handleStyle:r,lineClassName:o,lineStyle:a,color:i,minWidth:s=10,minHeight:c=10,maxWidth:l=Number.MAX_VALUE,maxHeight:u=Number.MAX_VALUE,keepAspectRatio:d=!1,shouldResize:f,onResizeStart:p,onResize:y,onResizeEnd:m}){return t?h.jsxs(h.Fragment,{children:[wZ.map(v=>h.jsx(VR,{className:o,style:a,nodeId:e,position:v,variant:Ji.Line,color:i,minWidth:s,minHeight:c,maxWidth:l,maxHeight:u,onResizeStart:p,keepAspectRatio:d,shouldResize:f,onResize:y,onResizeEnd:m},v)),xZ.map(v=>h.jsx(VR,{className:n,style:r,nodeId:e,position:v,color:i,minWidth:s,minHeight:c,maxWidth:l,maxHeight:u,onResizeStart:p,keepAspectRatio:d,shouldResize:f,onResize:y,onResizeEnd:m},v))]}):null}var tx,UR;function Xte(){if(UR)return tx;UR=1;var e=function(b){return t(b)&&!n(b)};function t(b){return!!b&&typeof b=="object"}function n(b){var x=Object.prototype.toString.call(b);return x==="[object RegExp]"||x==="[object Date]"||a(b)}var r=typeof Symbol=="function"&&Symbol.for,o=r?Symbol.for("react.element"):60103;function a(b){return b.$$typeof===o}function i(b){return Array.isArray(b)?[]:{}}function s(b,x){return x.clone!==!1&&x.isMergeableObject(b)?m(i(b),b,x):b}function c(b,x,_){return b.concat(x).map(function(w){return s(w,_)})}function l(b,x){if(!x.customMerge)return m;var _=x.customMerge(b);return typeof _=="function"?_:m}function u(b){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(b).filter(function(x){return Object.propertyIsEnumerable.call(b,x)}):[]}function d(b){return Object.keys(b).concat(u(b))}function f(b,x){try{return x in b}catch{return!1}}function p(b,x){return f(b,x)&&!(Object.hasOwnProperty.call(b,x)&&Object.propertyIsEnumerable.call(b,x))}function y(b,x,_){var w={};return _.isMergeableObject(b)&&d(b).forEach(function(j){w[j]=s(b[j],_)}),d(x).forEach(function(j){p(b,j)||(f(b,j)&&_.isMergeableObject(x[j])?w[j]=l(j,_)(b[j],x[j],_):w[j]=s(x[j],_))}),w}function m(b,x,_){_=_||{},_.arrayMerge=_.arrayMerge||c,_.isMergeableObject=_.isMergeableObject||e,_.cloneUnlessOtherwiseSpecified=s;var w=Array.isArray(x),j=Array.isArray(b),E=w===j;return E?w?_.arrayMerge(b,x,_):y(b,x,_):s(x,_)}m.all=function(b,x){if(!Array.isArray(b))throw new Error("first argument should be an array");return b.reduce(function(_,w){return m(_,w,x)},{})};var v=m;return tx=v,tx}var Qte=Xte();const Bf=Xe(Qte);var HR={},WR;function Jte(){if(WR)return HR;WR=1;var e;return function(t){(function(n){var r=typeof globalThis=="object"?globalThis:typeof Js=="object"?Js:typeof self=="object"?self:typeof this=="object"?this:c(),o=a(t);typeof r.Reflect<"u"&&(o=a(r.Reflect,o)),n(o,r),typeof r.Reflect>"u"&&(r.Reflect=t);function a(l,u){return function(d,f){Object.defineProperty(l,d,{configurable:!0,writable:!0,value:f}),u&&u(d,f)}}function i(){try{return Function("return this;")()}catch{}}function s(){try{return(0,eval)("(function() { return this; })()")}catch{}}function c(){return i()||s()}})(function(n,r){var o=Object.prototype.hasOwnProperty,a=typeof Symbol=="function",i=a&&typeof Symbol.toPrimitive<"u"?Symbol.toPrimitive:"@@toPrimitive",s=a&&typeof Symbol.iterator<"u"?Symbol.iterator:"@@iterator",c=typeof Object.create=="function",l={__proto__:[]}instanceof Array,u=!c&&!l,d={create:c?function(){return pa(Object.create(null))}:l?function(){return pa({__proto__:null})}:function(){return pa({})},has:u?function(Q,ee){return o.call(Q,ee)}:function(Q,ee){return ee in Q},get:u?function(Q,ee){return o.call(Q,ee)?Q[ee]:void 0}:function(Q,ee){return Q[ee]}},f=Object.getPrototypeOf(Function),p=typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:Sr(),y=typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:ii(),m=typeof WeakMap=="function"?WeakMap:er(),v=a?Symbol.for("@reflect-metadata:registry"):void 0,b=St(),x=yt(b);function _(Q,ee,ie,pe){if(H(ie)){if(!$(Q))throw new TypeError;if(!le(ee))throw new TypeError;return A(Q,ee)}else{if(!$(Q))throw new TypeError;if(!re(ee))throw new TypeError;if(!re(pe)&&!H(pe)&&!J(pe))throw new TypeError;return J(pe)&&(pe=void 0),ie=te(ie),C(Q,ee,ie,pe)}}n("decorate",_);function w(Q,ee){function ie(pe,ke){if(!re(pe))throw new TypeError;if(!H(ke)&&!ve(ke))throw new TypeError;L(Q,ee,pe,ke)}return ie}n("metadata",w);function j(Q,ee,ie,pe){if(!re(ie))throw new TypeError;return H(pe)||(pe=te(pe)),L(Q,ee,ie,pe)}n("defineMetadata",j);function E(Q,ee,ie){if(!re(ee))throw new TypeError;return H(ie)||(ie=te(ie)),M(Q,ee,ie)}n("hasMetadata",E);function S(Q,ee,ie){if(!re(ee))throw new TypeError;return H(ie)||(ie=te(ie)),T(Q,ee,ie)}n("hasOwnMetadata",S);function O(Q,ee,ie){if(!re(ee))throw new TypeError;return H(ie)||(ie=te(ie)),D(Q,ee,ie)}n("getMetadata",O);function k(Q,ee,ie){if(!re(ee))throw new TypeError;return H(ie)||(ie=te(ie)),I(Q,ee,ie)}n("getOwnMetadata",k);function N(Q,ee){if(!re(Q))throw new TypeError;return H(ee)||(ee=te(ee)),B(Q,ee)}n("getMetadataKeys",N);function P(Q,ee){if(!re(Q))throw new TypeError;return H(ee)||(ee=te(ee)),U(Q,ee)}n("getOwnMetadataKeys",P);function R(Q,ee,ie){if(!re(ee))throw new TypeError;if(H(ie)||(ie=te(ie)),!re(ee))throw new TypeError;H(ie)||(ie=te(ie));var pe=bn(ee,ie,!1);return H(pe)?!1:pe.OrdinaryDeleteMetadata(Q,ee,ie)}n("deleteMetadata",R);function A(Q,ee){for(var ie=Q.length-1;ie>=0;--ie){var pe=Q[ie],ke=pe(ee);if(!H(ke)&&!J(ke)){if(!le(ke))throw new TypeError;ee=ke}}return ee}function C(Q,ee,ie,pe){for(var ke=Q.length-1;ke>=0;--ke){var Mt=Q[ke],wt=Mt(ee,ie,pe);if(!H(wt)&&!J(wt)){if(!re(wt))throw new TypeError;pe=wt}}return pe}function M(Q,ee,ie){var pe=T(Q,ee,ie);if(pe)return!0;var ke=ct(ee);return J(ke)?!1:M(Q,ke,ie)}function T(Q,ee,ie){var pe=bn(ee,ie,!1);return H(pe)?!1:W(pe.OrdinaryHasOwnMetadata(Q,ee,ie))}function D(Q,ee,ie){var pe=T(Q,ee,ie);if(pe)return I(Q,ee,ie);var ke=ct(ee);if(!J(ke))return D(Q,ke,ie)}function I(Q,ee,ie){var pe=bn(ee,ie,!1);if(!H(pe))return pe.OrdinaryGetOwnMetadata(Q,ee,ie)}function L(Q,ee,ie,pe){var ke=bn(ie,pe,!0);ke.OrdinaryDefineOwnMetadata(Q,ee,ie,pe)}function B(Q,ee){var ie=U(Q,ee),pe=ct(Q);if(pe===null)return ie;var ke=B(pe,ee);if(ke.length<=0)return ie;if(ie.length<=0)return ke;for(var Mt=new y,wt=[],Be=0,ge=ie;Be<ge.length;Be++){var we=ge[Be],_e=Mt.has(we);_e||(Mt.add(we),wt.push(we))}for(var je=0,Le=ke;je<Le.length;je++){var we=Le[je],_e=Mt.has(we);_e||(Mt.add(we),wt.push(we))}return wt}function U(Q,ee){var ie=bn(Q,ee,!1);return ie?ie.OrdinaryOwnMetadataKeys(Q,ee):[]}function F(Q){if(Q===null)return 1;switch(typeof Q){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return Q===null?1:6;default:return 6}}function H(Q){return Q===void 0}function J(Q){return Q===null}function q(Q){return typeof Q=="symbol"}function re(Q){return typeof Q=="object"?Q!==null:typeof Q=="function"}function Z(Q,ee){switch(F(Q)){case 0:return Q;case 1:return Q;case 2:return Q;case 3:return Q;case 4:return Q;case 5:return Q}var ie="string",pe=qe(Q,i);if(pe!==void 0){var ke=pe.call(Q,ie);if(re(ke))throw new TypeError;return ke}return Y(Q)}function Y(Q,ee){var ie,pe;{var ke=Q.toString;if(se(ke)){var pe=ke.call(Q);if(!re(pe))return pe}var ie=Q.valueOf;if(se(ie)){var pe=ie.call(Q);if(!re(pe))return pe}}throw new TypeError}function W(Q){return!!Q}function G(Q){return""+Q}function te(Q){var ee=Z(Q);return q(ee)?ee:G(ee)}function $(Q){return Array.isArray?Array.isArray(Q):Q instanceof Object?Q instanceof Array:Object.prototype.toString.call(Q)==="[object Array]"}function se(Q){return typeof Q=="function"}function le(Q){return typeof Q=="function"}function ve(Q){switch(F(Q)){case 3:return!0;case 4:return!0;default:return!1}}function Te(Q,ee){return Q===ee||Q!==Q&&ee!==ee}function qe(Q,ee){var ie=Q[ee];if(ie!=null){if(!se(ie))throw new TypeError;return ie}}function Ye(Q){var ee=qe(Q,s);if(!se(ee))throw new TypeError;var ie=ee.call(Q);if(!re(ie))throw new TypeError;return ie}function ze(Q){return Q.value}function st(Q){var ee=Q.next();return ee.done?!1:ee}function He(Q){var ee=Q.return;ee&&ee.call(Q)}function ct(Q){var ee=Object.getPrototypeOf(Q);if(typeof Q!="function"||Q===f||ee!==f)return ee;var ie=Q.prototype,pe=ie&&Object.getPrototypeOf(ie);if(pe==null||pe===Object.prototype)return ee;var ke=pe.constructor;return typeof ke!="function"||ke===Q?ee:ke}function Ht(){var Q;!H(v)&&typeof r.Reflect<"u"&&!(v in r.Reflect)&&typeof r.Reflect.defineMetadata=="function"&&(Q=Rt(r.Reflect));var ee,ie,pe,ke=new m,Mt={registerProvider:wt,getProvider:ge,setProvider:_e};return Mt;function wt(je){if(!Object.isExtensible(Mt))throw new Error("Cannot add provider to a frozen registry.");switch(!0){case Q===je:break;case H(ee):ee=je;break;case ee===je:break;case H(ie):ie=je;break;case ie===je:break;default:pe===void 0&&(pe=new y),pe.add(je);break}}function Be(je,Le){if(!H(ee)){if(ee.isProviderFor(je,Le))return ee;if(!H(ie)){if(ie.isProviderFor(je,Le))return ee;if(!H(pe))for(var ut=Ye(pe);;){var Ct=st(ut);if(!Ct)return;var z=ze(Ct);if(z.isProviderFor(je,Le))return He(ut),z}}}if(!H(Q)&&Q.isProviderFor(je,Le))return Q}function ge(je,Le){var ut=ke.get(je),Ct;return H(ut)||(Ct=ut.get(Le)),H(Ct)&&(Ct=Be(je,Le),H(Ct)||(H(ut)&&(ut=new p,ke.set(je,ut)),ut.set(Le,Ct))),Ct}function we(je){if(H(je))throw new TypeError;return ee===je||ie===je||!H(pe)&&pe.has(je)}function _e(je,Le,ut){if(!we(ut))throw new Error("Metadata provider not registered.");var Ct=ge(je,Le);if(Ct!==ut){if(!H(Ct))return!1;var z=ke.get(je);H(z)&&(z=new p,ke.set(je,z)),z.set(Le,ut)}return!0}}function St(){var Q;return!H(v)&&re(r.Reflect)&&Object.isExtensible(r.Reflect)&&(Q=r.Reflect[v]),H(Q)&&(Q=Ht()),!H(v)&&re(r.Reflect)&&Object.isExtensible(r.Reflect)&&Object.defineProperty(r.Reflect,v,{enumerable:!1,configurable:!1,writable:!1,value:Q}),Q}function yt(Q){var ee=new m,ie={isProviderFor:function(we,_e){var je=ee.get(we);return H(je)?!1:je.has(_e)},OrdinaryDefineOwnMetadata:wt,OrdinaryHasOwnMetadata:ke,OrdinaryGetOwnMetadata:Mt,OrdinaryOwnMetadataKeys:Be,OrdinaryDeleteMetadata:ge};return b.registerProvider(ie),ie;function pe(we,_e,je){var Le=ee.get(we),ut=!1;if(H(Le)){if(!je)return;Le=new p,ee.set(we,Le),ut=!0}var Ct=Le.get(_e);if(H(Ct)){if(!je)return;if(Ct=new p,Le.set(_e,Ct),!Q.setProvider(we,_e,ie))throw Le.delete(_e),ut&&ee.delete(we),new Error("Wrong provider for target.")}return Ct}function ke(we,_e,je){var Le=pe(_e,je,!1);return H(Le)?!1:W(Le.has(we))}function Mt(we,_e,je){var Le=pe(_e,je,!1);if(!H(Le))return Le.get(we)}function wt(we,_e,je,Le){var ut=pe(je,Le,!0);ut.set(we,_e)}function Be(we,_e){var je=[],Le=pe(we,_e,!1);if(H(Le))return je;for(var ut=Le.keys(),Ct=Ye(ut),z=0;;){var X=st(Ct);if(!X)return je.length=z,je;var ne=ze(X);try{je[z]=ne}catch(de){try{He(Ct)}finally{throw de}}z++}}function ge(we,_e,je){var Le=pe(_e,je,!1);if(H(Le)||!Le.delete(we))return!1;if(Le.size===0){var ut=ee.get(_e);H(ut)||(ut.delete(je),ut.size===0&&ee.delete(ut))}return!0}}function Rt(Q){var ee=Q.defineMetadata,ie=Q.hasOwnMetadata,pe=Q.getOwnMetadata,ke=Q.getOwnMetadataKeys,Mt=Q.deleteMetadata,wt=new m,Be={isProviderFor:function(ge,we){var _e=wt.get(ge);return!H(_e)&&_e.has(we)?!0:ke(ge,we).length?(H(_e)&&(_e=new y,wt.set(ge,_e)),_e.add(we),!0):!1},OrdinaryDefineOwnMetadata:ee,OrdinaryHasOwnMetadata:ie,OrdinaryGetOwnMetadata:pe,OrdinaryOwnMetadataKeys:ke,OrdinaryDeleteMetadata:Mt};return Be}function bn(Q,ee,ie){var pe=b.getProvider(Q,ee);if(!H(pe))return pe;if(ie){if(b.setProvider(Q,ee,x))return x;throw new Error("Illegal state.")}}function Sr(){var Q={},ee=[],ie=function(){function Be(ge,we,_e){this._index=0,this._keys=ge,this._values=we,this._selector=_e}return Be.prototype["@@iterator"]=function(){return this},Be.prototype[s]=function(){return this},Be.prototype.next=function(){var ge=this._index;if(ge>=0&&ge<this._keys.length){var we=this._selector(this._keys[ge],this._values[ge]);return ge+1>=this._keys.length?(this._index=-1,this._keys=ee,this._values=ee):this._index++,{value:we,done:!1}}return{value:void 0,done:!0}},Be.prototype.throw=function(ge){throw this._index>=0&&(this._index=-1,this._keys=ee,this._values=ee),ge},Be.prototype.return=function(ge){return this._index>=0&&(this._index=-1,this._keys=ee,this._values=ee),{value:ge,done:!0}},Be}(),pe=function(){function Be(){this._keys=[],this._values=[],this._cacheKey=Q,this._cacheIndex=-2}return Object.defineProperty(Be.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),Be.prototype.has=function(ge){return this._find(ge,!1)>=0},Be.prototype.get=function(ge){var we=this._find(ge,!1);return we>=0?this._values[we]:void 0},Be.prototype.set=function(ge,we){var _e=this._find(ge,!0);return this._values[_e]=we,this},Be.prototype.delete=function(ge){var we=this._find(ge,!1);if(we>=0){for(var _e=this._keys.length,je=we+1;je<_e;je++)this._keys[je-1]=this._keys[je],this._values[je-1]=this._values[je];return this._keys.length--,this._values.length--,Te(ge,this._cacheKey)&&(this._cacheKey=Q,this._cacheIndex=-2),!0}return!1},Be.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=Q,this._cacheIndex=-2},Be.prototype.keys=function(){return new ie(this._keys,this._values,ke)},Be.prototype.values=function(){return new ie(this._keys,this._values,Mt)},Be.prototype.entries=function(){return new ie(this._keys,this._values,wt)},Be.prototype["@@iterator"]=function(){return this.entries()},Be.prototype[s]=function(){return this.entries()},Be.prototype._find=function(ge,we){if(!Te(this._cacheKey,ge)){this._cacheIndex=-1;for(var _e=0;_e<this._keys.length;_e++)if(Te(this._keys[_e],ge)){this._cacheIndex=_e;break}}return this._cacheIndex<0&&we&&(this._cacheIndex=this._keys.length,this._keys.push(ge),this._values.push(void 0)),this._cacheIndex},Be}();return pe;function ke(Be,ge){return Be}function Mt(Be,ge){return ge}function wt(Be,ge){return[Be,ge]}}function ii(){var Q=function(){function ee(){this._map=new p}return Object.defineProperty(ee.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),ee.prototype.has=function(ie){return this._map.has(ie)},ee.prototype.add=function(ie){return this._map.set(ie,ie),this},ee.prototype.delete=function(ie){return this._map.delete(ie)},ee.prototype.clear=function(){this._map.clear()},ee.prototype.keys=function(){return this._map.keys()},ee.prototype.values=function(){return this._map.keys()},ee.prototype.entries=function(){return this._map.entries()},ee.prototype["@@iterator"]=function(){return this.keys()},ee.prototype[s]=function(){return this.keys()},ee}();return Q}function er(){var Q=16,ee=d.create(),ie=pe();return function(){function ge(){this._key=pe()}return ge.prototype.has=function(we){var _e=ke(we,!1);return _e!==void 0?d.has(_e,this._key):!1},ge.prototype.get=function(we){var _e=ke(we,!1);return _e!==void 0?d.get(_e,this._key):void 0},ge.prototype.set=function(we,_e){var je=ke(we,!0);return je[this._key]=_e,this},ge.prototype.delete=function(we){var _e=ke(we,!1);return _e!==void 0?delete _e[this._key]:!1},ge.prototype.clear=function(){this._key=pe()},ge}();function pe(){var ge;do ge="@@WeakMap@@"+Be();while(d.has(ee,ge));return ee[ge]=!0,ge}function ke(ge,we){if(!o.call(ge,ie)){if(!we)return;Object.defineProperty(ge,ie,{value:d.create()})}return ge[ie]}function Mt(ge,we){for(var _e=0;_e<we;++_e)ge[_e]=Math.random()*255|0;return ge}function wt(ge){if(typeof Uint8Array=="function"){var we=new Uint8Array(ge);return typeof crypto<"u"?crypto.getRandomValues(we):typeof msCrypto<"u"?msCrypto.getRandomValues(we):Mt(we,ge),we}return Mt(new Array(ge),ge)}function Be(){var ge=wt(Q);ge[6]=ge[6]&79|64,ge[8]=ge[8]&191|128;for(var we="",_e=0;_e<Q;++_e){var je=ge[_e];(_e===4||_e===6||_e===8)&&(we+="-"),je<16&&(we+="0"),we+=je.toString(16).toLowerCase()}return we}}function pa(Q){return Q.__=void 0,delete Q.__,Q}})}(e||(e={})),HR}Jte(),typeof window<"u"&&(window.Buffer=jwe),typeof Kh<"u"&&typeof require<"u"&&(Kh.Buffer=require("buffer/").Buffer);class Dt{static isObject(t){return t!==null&&typeof t=="object"}static isObjectWithName(t){return t!==null&&typeof t=="object"&&t.name!==void 0}static assign(t,...n){for(const r of n)for(const o of Object.getOwnPropertyNames(r))t[o]=r[o]}static mixedListToArray(t){return t!==null&&typeof t=="object"?Object.keys(t).map(n=>t[n]):t}}class xe extends Error{get name(){return this.constructor.name}constructor(t){super(t),Object.setPrototypeOf?Object.setPrototypeOf(this,new.target.prototype):this.__proto__=new.target.prototype}}class es extends xe{constructor(){super("Locking not supported on given driver.")}}class nx extends xe{constructor(){super('Cannot perform update query because update values are not defined. Call "qb.set(...)" method to specify updated values.')}}class pt{static isMssqlParameter(t){return this.check(t,"MssqlParameter")}static isEntityMetadata(t){return this.check(t,"EntityMetadata")}static isColumnMetadata(t){return this.check(t,"ColumnMetadata")}static isSelectQueryBuilder(t){return this.check(t,"SelectQueryBuilder")}static isInsertQueryBuilder(t){return this.check(t,"InsertQueryBuilder")}static isDeleteQueryBuilder(t){return this.check(t,"DeleteQueryBuilder")}static isUpdateQueryBuilder(t){return this.check(t,"UpdateQueryBuilder")}static isSoftDeleteQueryBuilder(t){return this.check(t,"SoftDeleteQueryBuilder")}static isRelationQueryBuilder(t){return this.check(t,"RelationQueryBuilder")}static isBrackets(t){return this.check(t,"Brackets")||this.check(t,"NotBrackets")}static isNotBrackets(t){return this.check(t,"NotBrackets")}static isSubject(t){return this.check(t,"Subject")}static isRdbmsSchemaBuilder(t){return this.check(t,"RdbmsSchemaBuilder")}static isMongoEntityManager(t){return this.check(t,"MongoEntityManager")}static isSqljsEntityManager(t){return this.check(t,"SqljsEntityManager")}static isEntitySchema(t){return this.check(t,"EntitySchema")}static isBaseEntityConstructor(t){return typeof t=="function"&&typeof t.hasId=="function"&&typeof t.save=="function"&&typeof t.useDataSource=="function"}static isFindOperator(t){return this.check(t,"FindOperator")||this.check(t,"EqualOperator")}static isEqualOperator(t){return this.check(t,"EqualOperator")}static isQuery(t){return this.check(t,"Query")}static isTable(t){return this.check(t,"Table")}static isTableCheck(t){return this.check(t,"TableCheck")}static isTableColumn(t){return this.check(t,"TableColumn")}static isTableExclusion(t){return this.check(t,"TableExclusion")}static isTableForeignKey(t){return this.check(t,"TableForeignKey")}static isTableIndex(t){return this.check(t,"TableIndex")}static isTableUnique(t){return this.check(t,"TableUnique")}static isView(t){return this.check(t,"View")}static isDataSource(t){return this.check(t,"DataSource")}static check(t,n){return typeof t=="object"&&t!==null&&t["@instanceof"]===Symbol.for(n)}}class Gte extends xe{constructor(t,n){super(),this.entityClass=t,this.criteria=n,this.message=`Could not find any entity of type "${this.stringifyTarget(t)}" matching: ${this.stringifyCriteria(n)}`}stringifyTarget(t){return pt.isEntitySchema(t)?t.options.name:typeof t=="function"||Dt.isObject(t)&&"name"in t?t.name:t}stringifyCriteria(t){try{return JSON.stringify(t,null,4)}catch{}return""+t}}class qR extends xe{constructor(t,n,r){super(`The optimistic lock on entity ${t} failed, version ${n} was expected, but is actually ${r}.`)}}class YR extends xe{constructor(){super("Your database does not support LIMIT on UPDATE statements.")}}class Zte extends xe{constructor(t){super(`Entity "${t.name}" does not have delete date columns.`)}}class $f extends xe{constructor(){super("OUTPUT or RETURNING clause only supported by Microsoft SQL Server or PostgreSQL or MariaDB databases.")}}class Dr extends xe{constructor(t,n){super(t),Object.setPrototypeOf(this,Dr.prototype),this.message=`Property "${t}" was not found in "${n.targetName}". Make sure your query is correct.`}}class ene extends xe{constructor(t){super(`Entity ${t} does not have version or update date columns.`)}}class tne extends xe{constructor(){super('Cannot perform insert query because values are not defined. Call "qb.values(...)" method to specify inserted values.')}}class bl extends xe{constructor(){super("The optimistic lock can be used only with getOne() method.")}}class nne extends xe{constructor(t){super(),t.length===1?this.message=`Relation "${t[0]}" was not found; please check if it is correct and really exists in your entity.`:this.message=`Relations ${t.map(n=>`"${n}"`).join(", ")} were not found; please check if relations are correct and they exist in your entities.`}}class rne extends xe{constructor(){super("An open transaction is required for pessimistic lock.")}}class one extends xe{constructor(){super("RDBMS does not support OFFSET without LIMIT in SELECT statements. You must use limit in conjunction with offset function (or take in conjunction with skip function if you are using pagination).")}}class KR{constructor(t){Dt.assign(this,t||{})}get target(){return this.metadata.target}get hasMetadata(){return!!this._metadata}set metadata(t){this._metadata=t}get metadata(){if(!this._metadata)throw new xe(`Cannot get entity metadata for the given alias "${this.name}"`);return this._metadata}}class Lr{static isAliasProperty(t){if(typeof t!="string"||t.indexOf(".")===-1)return!1;const[n,r]=t.split(".");return!(!n||!r||t.indexOf("(")!==-1||t.indexOf(")")!==-1)}}var rx={exports:{}},ox={exports:{}},XR;function ts(){return XR||(XR=1,typeof Object.create=="function"?ox.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:ox.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}),ox.exports}var ax={exports:{}},QR;function Fa(){return QR||(QR=1,function(e,t){var n=Ewe(),r=n.Buffer;function o(i,s){for(var c in i)s[c]=i[c]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?e.exports=n:(o(n,t),t.Buffer=a);function a(i,s,c){return r(i,s,c)}a.prototype=Object.create(r.prototype),o(r,a),a.from=function(i,s,c){if(typeof i=="number")throw new TypeError("Argument must not be a number");return r(i,s,c)},a.alloc=function(i,s,c){if(typeof i!="number")throw new TypeError("Argument must be a number");var l=r(i);return s!==void 0?typeof c=="string"?l.fill(s,c):l.fill(s):l.fill(0),l},a.allocUnsafe=function(i){if(typeof i!="number")throw new TypeError("Argument must be a number");return r(i)},a.allocUnsafeSlow=function(i){if(typeof i!="number")throw new TypeError("Argument must be a number");return n.SlowBuffer(i)}}(ax,ax.exports)),ax.exports}var ix,JR;function ns(){if(JR)return ix;JR=1;var e=Fa().Buffer;function t(n,r){this._block=e.alloc(n),this._finalSize=r,this._blockSize=n,this._len=0}return t.prototype.update=function(n,r){typeof n=="string"&&(r=r||"utf8",n=e.from(n,r));for(var o=this._block,a=this._blockSize,i=n.length,s=this._len,c=0;c<i;){for(var l=s%a,u=Math.min(i-c,a-l),d=0;d<u;d++)o[l+d]=n[c+d];s+=u,c+=u,s%a===0&&this._update(o)}return this._len+=i,this},t.prototype.digest=function(n){var r=this._len%this._blockSize;this._block[r]=128,this._block.fill(0,r+1),r>=this._finalSize&&(this._update(this._block),this._block.fill(0));var o=this._len*8;if(o<=4294967295)this._block.writeUInt32BE(o,this._blockSize-4);else{var a=(o&4294967295)>>>0,i=(o-a)/4294967296;this._block.writeUInt32BE(i,this._blockSize-8),this._block.writeUInt32BE(a,this._blockSize-4)}this._update(this._block);var s=this._hash();return n?s.toString(n):s},t.prototype._update=function(){throw new Error("_update must be implemented by subclass")},ix=t,ix}var sx,GR;function ane(){if(GR)return sx;GR=1;var e=ts(),t=ns(),n=Fa().Buffer,r=[1518500249,1859775393,-1894007588,-899497514],o=new Array(80);function a(){this.init(),this._w=o,t.call(this,64,56)}e(a,t),a.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function i(l){return l<<5|l>>>27}function s(l){return l<<30|l>>>2}function c(l,u,d,f){return l===0?u&d|~u&f:l===2?u&d|u&f|d&f:u^d^f}return a.prototype._update=function(l){for(var u=this._w,d=this._a|0,f=this._b|0,p=this._c|0,y=this._d|0,m=this._e|0,v=0;v<16;++v)u[v]=l.readInt32BE(v*4);for(;v<80;++v)u[v]=u[v-3]^u[v-8]^u[v-14]^u[v-16];for(var b=0;b<80;++b){var x=~~(b/20),_=i(d)+c(x,f,p,y)+m+u[b]+r[x]|0;m=y,y=p,p=s(f),f=d,d=_}this._a=d+this._a|0,this._b=f+this._b|0,this._c=p+this._c|0,this._d=y+this._d|0,this._e=m+this._e|0},a.prototype._hash=function(){var l=n.allocUnsafe(20);return l.writeInt32BE(this._a|0,0),l.writeInt32BE(this._b|0,4),l.writeInt32BE(this._c|0,8),l.writeInt32BE(this._d|0,12),l.writeInt32BE(this._e|0,16),l},sx=a,sx}var cx,ZR;function ine(){if(ZR)return cx;ZR=1;var e=ts(),t=ns(),n=Fa().Buffer,r=[1518500249,1859775393,-1894007588,-899497514],o=new Array(80);function a(){this.init(),this._w=o,t.call(this,64,56)}e(a,t),a.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function i(u){return u<<1|u>>>31}function s(u){return u<<5|u>>>27}function c(u){return u<<30|u>>>2}function l(u,d,f,p){return u===0?d&f|~d&p:u===2?d&f|d&p|f&p:d^f^p}return a.prototype._update=function(u){for(var d=this._w,f=this._a|0,p=this._b|0,y=this._c|0,m=this._d|0,v=this._e|0,b=0;b<16;++b)d[b]=u.readInt32BE(b*4);for(;b<80;++b)d[b]=i(d[b-3]^d[b-8]^d[b-14]^d[b-16]);for(var x=0;x<80;++x){var _=~~(x/20),w=s(f)+l(_,p,y,m)+v+d[x]+r[_]|0;v=m,m=y,y=c(p),p=f,f=w}this._a=f+this._a|0,this._b=p+this._b|0,this._c=y+this._c|0,this._d=m+this._d|0,this._e=v+this._e|0},a.prototype._hash=function(){var u=n.allocUnsafe(20);return u.writeInt32BE(this._a|0,0),u.writeInt32BE(this._b|0,4),u.writeInt32BE(this._c|0,8),u.writeInt32BE(this._d|0,12),u.writeInt32BE(this._e|0,16),u},cx=a,cx}var lx,eI;function tI(){if(eI)return lx;eI=1;var e=ts(),t=ns(),n=Fa().Buffer,r=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],o=new Array(64);function a(){this.init(),this._w=o,t.call(this,64,56)}e(a,t),a.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this};function i(f,p,y){return y^f&(p^y)}function s(f,p,y){return f&p|y&(f|p)}function c(f){return(f>>>2|f<<30)^(f>>>13|f<<19)^(f>>>22|f<<10)}function l(f){return(f>>>6|f<<26)^(f>>>11|f<<21)^(f>>>25|f<<7)}function u(f){return(f>>>7|f<<25)^(f>>>18|f<<14)^f>>>3}function d(f){return(f>>>17|f<<15)^(f>>>19|f<<13)^f>>>10}return a.prototype._update=function(f){for(var p=this._w,y=this._a|0,m=this._b|0,v=this._c|0,b=this._d|0,x=this._e|0,_=this._f|0,w=this._g|0,j=this._h|0,E=0;E<16;++E)p[E]=f.readInt32BE(E*4);for(;E<64;++E)p[E]=d(p[E-2])+p[E-7]+u(p[E-15])+p[E-16]|0;for(var S=0;S<64;++S){var O=j+l(x)+i(x,_,w)+r[S]+p[S]|0,k=c(y)+s(y,m,v)|0;j=w,w=_,_=x,x=b+O|0,b=v,v=m,m=y,y=O+k|0}this._a=y+this._a|0,this._b=m+this._b|0,this._c=v+this._c|0,this._d=b+this._d|0,this._e=x+this._e|0,this._f=_+this._f|0,this._g=w+this._g|0,this._h=j+this._h|0},a.prototype._hash=function(){var f=n.allocUnsafe(32);return f.writeInt32BE(this._a,0),f.writeInt32BE(this._b,4),f.writeInt32BE(this._c,8),f.writeInt32BE(this._d,12),f.writeInt32BE(this._e,16),f.writeInt32BE(this._f,20),f.writeInt32BE(this._g,24),f.writeInt32BE(this._h,28),f},lx=a,lx}var ux,nI;function sne(){if(nI)return ux;nI=1;var e=ts(),t=tI(),n=ns(),r=Fa().Buffer,o=new Array(64);function a(){this.init(),this._w=o,n.call(this,64,56)}return e(a,t),a.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},a.prototype._hash=function(){var i=r.allocUnsafe(28);return i.writeInt32BE(this._a,0),i.writeInt32BE(this._b,4),i.writeInt32BE(this._c,8),i.writeInt32BE(this._d,12),i.writeInt32BE(this._e,16),i.writeInt32BE(this._f,20),i.writeInt32BE(this._g,24),i},ux=a,ux}var dx,rI;function oI(){if(rI)return dx;rI=1;var e=ts(),t=ns(),n=Fa().Buffer,r=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],o=new Array(160);function a(){this.init(),this._w=o,t.call(this,128,112)}e(a,t),a.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this};function i(m,v,b){return b^m&(v^b)}function s(m,v,b){return m&v|b&(m|v)}function c(m,v){return(m>>>28|v<<4)^(v>>>2|m<<30)^(v>>>7|m<<25)}function l(m,v){return(m>>>14|v<<18)^(m>>>18|v<<14)^(v>>>9|m<<23)}function u(m,v){return(m>>>1|v<<31)^(m>>>8|v<<24)^m>>>7}function d(m,v){return(m>>>1|v<<31)^(m>>>8|v<<24)^(m>>>7|v<<25)}function f(m,v){return(m>>>19|v<<13)^(v>>>29|m<<3)^m>>>6}function p(m,v){return(m>>>19|v<<13)^(v>>>29|m<<3)^(m>>>6|v<<26)}function y(m,v){return m>>>0<v>>>0?1:0}return a.prototype._update=function(m){for(var v=this._w,b=this._ah|0,x=this._bh|0,_=this._ch|0,w=this._dh|0,j=this._eh|0,E=this._fh|0,S=this._gh|0,O=this._hh|0,k=this._al|0,N=this._bl|0,P=this._cl|0,R=this._dl|0,A=this._el|0,C=this._fl|0,M=this._gl|0,T=this._hl|0,D=0;D<32;D+=2)v[D]=m.readInt32BE(D*4),v[D+1]=m.readInt32BE(D*4+4);for(;D<160;D+=2){var I=v[D-30],L=v[D-15*2+1],B=u(I,L),U=d(L,I);I=v[D-2*2],L=v[D-2*2+1];var F=f(I,L),H=p(L,I),J=v[D-7*2],q=v[D-7*2+1],re=v[D-16*2],Z=v[D-16*2+1],Y=U+q|0,W=B+J+y(Y,U)|0;Y=Y+H|0,W=W+F+y(Y,H)|0,Y=Y+Z|0,W=W+re+y(Y,Z)|0,v[D]=W,v[D+1]=Y}for(var G=0;G<160;G+=2){W=v[G],Y=v[G+1];var te=s(b,x,_),$=s(k,N,P),se=c(b,k),le=c(k,b),ve=l(j,A),Te=l(A,j),qe=r[G],Ye=r[G+1],ze=i(j,E,S),st=i(A,C,M),He=T+Te|0,ct=O+ve+y(He,T)|0;He=He+st|0,ct=ct+ze+y(He,st)|0,He=He+Ye|0,ct=ct+qe+y(He,Ye)|0,He=He+Y|0,ct=ct+W+y(He,Y)|0;var Ht=le+$|0,St=se+te+y(Ht,le)|0;O=S,T=M,S=E,M=C,E=j,C=A,A=R+He|0,j=w+ct+y(A,R)|0,w=_,R=P,_=x,P=N,x=b,N=k,k=He+Ht|0,b=ct+St+y(k,He)|0}this._al=this._al+k|0,this._bl=this._bl+N|0,this._cl=this._cl+P|0,this._dl=this._dl+R|0,this._el=this._el+A|0,this._fl=this._fl+C|0,this._gl=this._gl+M|0,this._hl=this._hl+T|0,this._ah=this._ah+b+y(this._al,k)|0,this._bh=this._bh+x+y(this._bl,N)|0,this._ch=this._ch+_+y(this._cl,P)|0,this._dh=this._dh+w+y(this._dl,R)|0,this._eh=this._eh+j+y(this._el,A)|0,this._fh=this._fh+E+y(this._fl,C)|0,this._gh=this._gh+S+y(this._gl,M)|0,this._hh=this._hh+O+y(this._hl,T)|0},a.prototype._hash=function(){var m=n.allocUnsafe(64);function v(b,x,_){m.writeInt32BE(b,_),m.writeInt32BE(x,_+4)}return v(this._ah,this._al,0),v(this._bh,this._bl,8),v(this._ch,this._cl,16),v(this._dh,this._dl,24),v(this._eh,this._el,32),v(this._fh,this._fl,40),v(this._gh,this._gl,48),v(this._hh,this._hl,56),m},dx=a,dx}var fx,aI;function cne(){if(aI)return fx;aI=1;var e=ts(),t=oI(),n=ns(),r=Fa().Buffer,o=new Array(160);function a(){this.init(),this._w=o,n.call(this,128,112)}return e(a,t),a.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},a.prototype._hash=function(){var i=r.allocUnsafe(48);function s(c,l,u){i.writeInt32BE(c,u),i.writeInt32BE(l,u+4)}return s(this._ah,this._al,0),s(this._bh,this._bl,8),s(this._ch,this._cl,16),s(this._dh,this._dl,24),s(this._eh,this._el,32),s(this._fh,this._fl,40),i},fx=a,fx}var iI;function lne(){if(iI)return rx.exports;iI=1;var e=rx.exports=function(t){t=t.toLowerCase();var n=e[t];if(!n)throw new Error(t+" is not supported (we accept pull requests)");return new n};return e.sha=ane(),e.sha1=ine(),e.sha224=sne(),e.sha256=tI(),e.sha384=cne(),e.sha512=oI(),rx.exports}var une=lne();const dne=Xe(une);function fne(e,t={}){const{segmentLength:n=4,separator:r="__",termLength:o=2}=t;return e.split(r).reduce((a,i)=>{const s=i.replace(/([a-z\xE0-\xFF])([A-Z\xC0-\xDF])/g,"$1 $2").split(" "),c=s.length>1?o:n,l=s.map(u=>u.substr(0,c)).join("");return a.push(l),a},[]).join(r)}function pne(e,t={}){const n=dne("sha1");n.update(e,"utf8");const r=n.digest("hex");return t.length?r.slice(0,t.length):r}class hne{static isGreaterOrEqual(t,n){const r=sI(t),o=sI(n);return r[0]>o[0]||r[0]===o[0]&&r[1]>o[1]||r[0]===o[0]&&r[1]===o[1]&&r[2]>=o[2]}}function sI(e=""){const t=[0,0,0];return e.split(".").forEach((n,r)=>t[r]=parseInt(n,10)),t}class ye{static isSQLiteFamily(t){return["sqlite","cordova","react-native","nativescript","sqljs","expo","better-sqlite3","capacitor"].includes(t.options.type)}static isMySQLFamily(t){return["mysql","mariadb"].includes(t.options.type)}static isReleaseVersionOrGreater(t,n){return t.version!=null&&hne.isGreaterOrEqual(t.version,n)}static isPostgresFamily(t){return["postgres","aurora-postgres","cockroachdb"].includes(t.options.type)}static buildDriverOptions(t,n){if(t.url){const r=this.parseConnectionUrl(t.url);n&&n.useSid&&r.database&&(r.sid=r.database);for(const o of Object.keys(r))typeof r[o]>"u"&&delete r[o];return Object.assign({},t,r)}return Object.assign({},t)}static buildMongoDBDriverOptions(t,n){if(t.url){const r=this.parseMongoDBConnectionUrl(t.url);n&&n.useSid&&r.database&&(r.sid=r.database);for(const o of Object.keys(r))typeof r[o]>"u"&&delete r[o];return Object.assign({},t,r)}return Object.assign({},t)}static buildAlias({maxAliasLength:t},n,...r){const o=n&&n.joiner?n.joiner:"_";let a=r.length===1?r[0]:r.join(o);if(t&&t>0&&a.length>t){if(n&&n.shorten===!0){const i=fne(a);if(i.length<t)return i}return pne(a,{length:t})}return a}static buildColumnAlias({maxAliasLength:t},n,...r){return typeof n=="string"?(r.unshift(n),n={shorten:!1,joiner:"_"}):n=Object.assign({shorten:!1,joiner:"_"},n),this.buildAlias({maxAliasLength:t},n,...r)}static parseConnectionUrl(t){const n=t.split(":")[0],r=t.indexOf("//"),o=t.substr(r+2),a=o.indexOf("/"),i=a!==-1?o.substr(0,a):o;let s=a!==-1?o.substr(a+1):void 0;s&&s.indexOf("?")!==-1&&(s=s.substr(0,s.indexOf("?")));const c=i.lastIndexOf("@"),l=i.substr(0,c),u=i.substr(c+1);let d=l,f="";const p=l.indexOf(":");p!==-1&&(d=l.substr(0,p),f=l.substr(p+1));const[y,m]=u.split(":");return{type:n,host:y,username:decodeURIComponent(d),password:decodeURIComponent(f),port:m?parseInt(m):void 0,database:s||void 0}}static parseMongoDBConnectionUrl(t){const n=t.split(":")[0],r=t.indexOf("//"),o=t.substr(r+2),a=o.indexOf("/"),i=a!==-1?o.substr(0,a):o;let s=a!==-1?o.substr(a+1):void 0,c="",l,u,d,f,p={};if(s&&s.indexOf("?")!==-1){c=s.substr(s.indexOf("?")+1,s.length);const j=c.split("&");let E,S;j.forEach(O=>{E=O.split("=")[0],S=O.split("=")[1],p[E]=S}),f=p.replicaSet,s=s.substr(0,s.indexOf("?"))}const y=i.lastIndexOf("@"),m=i.substr(0,y),v=i.substr(y+1);let b=m,x="";const _=m.indexOf(":");_!==-1&&(b=m.substr(0,_),x=m.substr(_+1)),f?d=v:[l,u]=v.split(":");let w={type:n,host:l,hostReplicaSet:d,username:decodeURIComponent(b),password:decodeURIComponent(x),port:u?parseInt(u):void 0,database:s||void 0};for(const[j,E]of Object.entries(p))w[j]=E;return w}}class cI{constructor(t,n,r){this.connection=t,this.queryExpressionMap=n,this.isSelectedEvaluated=!1,this.relationEvaluated=!1,r&&Dt.assign(this,r)}get isMany(){return this.isMappingMany!==void 0?this.isMappingMany:this.relation?this.relation.isManyToMany||this.relation.isOneToMany:!1}get isSelected(){if(!this.isSelectedEvaluated){let t=()=>{for(const n of this.queryExpressionMap.selects)if(n.selection===this.alias.name||this.metadata&&this.metadata.columns.find(r=>n.selection===this.alias.name+"."+r.propertyPath))return!0;return!1};this.isSelectedCache=t(),this.isSelectedEvaluated=!0}return this.isSelectedCache}get tablePath(){return this.metadata?this.metadata.tablePath:this.entityOrProperty}get parentAlias(){if(Lr.isAliasProperty(this.entityOrProperty))return this.entityOrProperty.substr(0,this.entityOrProperty.indexOf("."))}get relationPropertyPath(){if(Lr.isAliasProperty(this.entityOrProperty))return this.entityOrProperty.substr(this.entityOrProperty.indexOf(".")+1)}get relation(){if(!this.relationEvaluated){let t=()=>{if(!Lr.isAliasProperty(this.entityOrProperty))return;const n=this.queryExpressionMap.findAliasByName(this.parentAlias);let r=n.metadata.findRelationWithPropertyPath(this.relationPropertyPath);if(r||n.metadata.parentEntityMetadata&&(r=n.metadata.parentEntityMetadata.findRelationWithPropertyPath(this.relationPropertyPath),r))return r;throw new xe(`Relation with property path ${this.relationPropertyPath} in entity was not found.`)};this.relationCache=t.bind(this)(),this.relationEvaluated=!0}return this.relationCache}get metadata(){if(this.relation)return this.relation.inverseEntityMetadata;if(this.connection.hasMetadata(this.entityOrProperty))return this.connection.getMetadata(this.entityOrProperty);if(this.mapAsEntity&&this.connection.hasMetadata(this.mapAsEntity))return this.connection.getMetadata(this.mapAsEntity)}get junctionAlias(){if(!this.relation)throw new xe("Cannot get junction table for join without relation.");if(typeof this.entityOrProperty!="string")throw new xe("Junction property is not defined.");const t=this.entityOrProperty.substr(0,this.entityOrProperty.indexOf("."));return this.relation.isOwning?ye.buildAlias(this.connection.driver,void 0,t,this.alias.name):ye.buildAlias(this.connection.driver,void 0,this.alias.name,t)}get mapToPropertyParentAlias(){if(this.mapToProperty)return this.mapToProperty.split(".")[0]}get mapToPropertyPropertyName(){if(this.mapToProperty)return this.mapToProperty.split(".")[1]}}class px{constructor(t,n){this.queryExpressionMap=t,this.disableMixedMap=!1,Dt.assign(this,n||{})}get joinInverseSideMetadata(){return this.relation.inverseEntityMetadata}get parentAlias(){if(!Lr.isAliasProperty(this.relationName))throw new xe("Given value must be a string representation of alias property");return this.relationName.substr(0,this.relationName.indexOf("."))}get relationPropertyPath(){if(!Lr.isAliasProperty(this.relationName))throw new xe("Given value must be a string representation of alias property");return this.relationName.substr(this.relationName.indexOf(".")+1)}get relation(){if(!Lr.isAliasProperty(this.relationName))throw new xe("Given value must be a string representation of alias property");const t=this.queryExpressionMap.findAliasByName(this.parentAlias).metadata.findRelationWithPropertyPath(this.relationPropertyPath);if(!t)throw new xe(`Relation with property path ${this.relationPropertyPath} in entity was not found.`);return t}get junctionAlias(){const[t,n]=this.relationName.split(".");return t+"_"+n+"_rid"}get junctionMetadata(){return this.relation.junctionEntityMetadata}get mapToPropertyParentAlias(){return this.mapToProperty.substr(0,this.mapToProperty.indexOf("."))}get mapToPropertyPropertyPath(){return this.mapToProperty.substr(this.mapToProperty.indexOf(".")+1)}}class hx{constructor(t,n){this.expressionMap=t,Dt.assign(this,n||{})}get joinInverseSideMetadata(){return this.relation.inverseEntityMetadata}get parentAlias(){if(!Lr.isAliasProperty(this.relationName))throw new xe("Given value must be a string representation of alias property");return this.relationName.split(".")[0]}get relationProperty(){if(!Lr.isAliasProperty(this.relationName))throw new xe("Given value is a string representation of alias property");return this.relationName.split(".")[1]}get junctionAlias(){const[t,n]=this.relationName.split(".");return t+"_"+n+"_rc"}get relation(){if(!Lr.isAliasProperty(this.relationName))throw new xe("Given value is a string representation of alias property");const[t,n]=this.relationName.split("."),r=this.expressionMap.findAliasByName(t).metadata.findRelationWithPropertyPath(n);if(!r)throw new xe(`Relation with property path ${n} in entity was not found.`);return r}get metadata(){if(!Lr.isAliasProperty(this.relationName))throw new xe("Given value is a string representation of alias property");const t=this.relationName.split(".")[0];return this.expressionMap.findAliasByName(t).metadata}get mapToPropertyPropertyName(){return this.mapToProperty.split(".")[1]}}class mx{constructor(t){var n;this.connection=t,this.relationLoadStrategy="join",this.queryEntity=!1,this.aliases=[],this.queryType="select",this.selects=[],this.maxExecutionTime=0,this.selectDistinct=!1,this.selectDistinctOn=[],this.extraReturningColumns=[],this.onConflict="",this.onIgnore=!1,this.joinAttributes=[],this.relationIdAttributes=[],this.relationCountAttributes=[],this.wheres=[],this.havings=[],this.orderBys={},this.groupBys=[],this.withDeleted=!1,this.parameters={},this.disableEscaping=!0,this.enableRelationIdValues=!1,this.extraAppendedAndWhereCondition="",this.subQuery=!1,this.aliasNamePrefixingEnabled=!0,this.options=[],this.insertColumns=[],this.whereEntities=[],this.updateEntity=!0,this.callListeners=!0,this.useTransaction=!1,this.nativeParameters={},this.locallyGenerated={},this.commonTableExpressions=[],t.options.relationLoadStrategy&&(this.relationLoadStrategy=t.options.relationLoadStrategy),this.timeTravel=((n=t.options)==null?void 0:n.timeTravelQueries)||!1}get allOrderBys(){if(!Object.keys(this.orderBys).length&&this.mainAlias.hasMetadata&&this.options.indexOf("disable-global-order")===-1){const t=this.mainAlias.metadata.orderBy||{};return Object.keys(t).reduce((n,r)=>(n[this.mainAlias.name+"."+r]=t[r],n),{})}return this.orderBys}setMainAlias(t){return this.mainAlias=t,t}createAlias(t){let n=t.name;!n&&t.tablePath&&(n=t.tablePath),!n&&typeof t.target=="function"&&(n=t.target.name),!n&&typeof t.target=="string"&&(n=t.target);const r=new KR;return r.type=t.type,n&&(r.name=n),t.metadata&&(r.metadata=t.metadata),t.target&&!r.hasMetadata&&(r.metadata=this.connection.getMetadata(t.target)),t.tablePath&&(r.tablePath=t.tablePath),t.subQuery&&(r.subQuery=t.subQuery),this.aliases.push(r),r}findAliasByName(t){const n=this.aliases.find(r=>r.name===t);if(!n)throw new xe(`"${t}" alias was not found. Maybe you forgot to join it?`);return n}findColumnByAliasExpression(t){const[n,r]=t.split(".");return this.findAliasByName(n).metadata.findColumnWithPropertyName(r)}get relationMetadata(){if(!this.mainAlias)throw new xe("Entity to work with is not specified!");const t=this.mainAlias.metadata.findRelationWithPropertyPath(this.relationPropertyPath);if(!t)throw new xe(`Relation ${this.relationPropertyPath} was not found in entity ${this.mainAlias.name}`);return t}clone(){const t=new mx(this.connection);return t.queryType=this.queryType,t.selects=this.selects.map(n=>n),t.maxExecutionTime=this.maxExecutionTime,t.selectDistinct=this.selectDistinct,t.selectDistinctOn=this.selectDistinctOn,this.aliases.forEach(n=>t.aliases.push(new KR(n))),t.relationLoadStrategy=this.relationLoadStrategy,t.mainAlias=this.mainAlias,t.valuesSet=this.valuesSet,t.returning=this.returning,t.onConflict=this.onConflict,t.onIgnore=this.onIgnore,t.onUpdate=this.onUpdate,t.joinAttributes=this.joinAttributes.map(n=>new cI(this.connection,this,n)),t.relationIdAttributes=this.relationIdAttributes.map(n=>new px(this,n)),t.relationCountAttributes=this.relationCountAttributes.map(n=>new hx(this,n)),t.wheres=this.wheres.map(n=>({...n})),t.havings=this.havings.map(n=>({...n})),t.orderBys=Object.assign({},this.orderBys),t.groupBys=this.groupBys.map(n=>n),t.limit=this.limit,t.offset=this.offset,t.skip=this.skip,t.take=this.take,t.lockMode=this.lockMode,t.onLocked=this.onLocked,t.lockVersion=this.lockVersion,t.lockTables=this.lockTables,t.withDeleted=this.withDeleted,t.parameters=Object.assign({},this.parameters),t.disableEscaping=this.disableEscaping,t.enableRelationIdValues=this.enableRelationIdValues,t.extraAppendedAndWhereCondition=this.extraAppendedAndWhereCondition,t.subQuery=this.subQuery,t.aliasNamePrefixingEnabled=this.aliasNamePrefixingEnabled,t.cache=this.cache,t.cacheId=this.cacheId,t.cacheDuration=this.cacheDuration,t.relationPropertyPath=this.relationPropertyPath,t.of=this.of,t.insertColumns=this.insertColumns,t.whereEntities=this.whereEntities,t.updateEntity=this.updateEntity,t.callListeners=this.callListeners,t.useTransaction=this.useTransaction,t.timeTravel=this.timeTravel,t.nativeParameters=Object.assign({},this.nativeParameters),t.comment=this.comment,t.commonTableExpressions=this.commonTableExpressions.map(n=>({alias:n.alias,queryBuilder:typeof n.queryBuilder=="string"?n.queryBuilder:n.queryBuilder.clone(),options:n.options})),t}}class lI{constructor(t){this["@instanceof"]=Symbol.for("Brackets"),this.whereFactory=t}}class yx{static transformFrom(t,n){return Array.isArray(t)?t.slice().reverse().reduce((r,o)=>o.from(r),n):t.from(n)}static transformTo(t,n){return Array.isArray(t)?t.reduce((r,o)=>o.to(r),n):t.to(n)}}class xl{constructor(t,n,r=!0,o=!1,a,i){this["@instanceof"]=Symbol.for("FindOperator"),this._type=t,this._value=n,this._useParameter=r,this._multipleParameters=o,this._getSql=a,this._objectLiteralParameters=i}get useParameter(){return pt.isFindOperator(this._value)?this._value.useParameter:this._useParameter}get multipleParameters(){return pt.isFindOperator(this._value)?this._value.multipleParameters:this._multipleParameters}get type(){return this._type}get value(){return pt.isFindOperator(this._value)?this._value.value:this._value}get objectLiteralParameters(){return pt.isFindOperator(this._value)?this._value.objectLiteralParameters:this._objectLiteralParameters}get child(){if(pt.isFindOperator(this._value))return this._value}get getSql(){return pt.isFindOperator(this._value)?this._value.getSql:this._getSql}transformValue(t){this._value instanceof xl?this._value.transformValue(t):this._value=Array.isArray(this._value)&&this._multipleParameters?this._value.map(n=>t&&yx.transformTo(t,n)):yx.transformTo(t,this._value)}}function qn(e){return new xl("in",e,!0,!0)}const mne=/[.*+\-?^${}()|[\]\\]/g,yne=e=>e.replace(mne,"\\$&");class kt{constructor(t,n){this["@instanceof"]=Symbol.for("QueryBuilder"),this.parameterIndex=0,pt.isDataSource(t)?(this.connection=t,this.queryRunner=n,this.expressionMap=new mx(this.connection)):(this.connection=t.connection,this.queryRunner=t.queryRunner,this.expressionMap=t.expressionMap.clone())}static registerQueryBuilderClass(t,n){kt.queryBuilderRegistry[t]=n}get alias(){if(!this.expressionMap.mainAlias)throw new xe("Main alias is not set");return this.expressionMap.mainAlias.name}select(t,n){return this.expressionMap.queryType="select",Array.isArray(t)?this.expressionMap.selects=t.map(r=>({selection:r})):t&&(this.expressionMap.selects=[{selection:t,aliasName:n}]),pt.isSelectQueryBuilder(this)?this:kt.queryBuilderRegistry.SelectQueryBuilder(this)}insert(){return this.expressionMap.queryType="insert",pt.isInsertQueryBuilder(this)?this:kt.queryBuilderRegistry.InsertQueryBuilder(this)}update(t,n){const r=n||t;if(t=pt.isEntitySchema(t)?t.options.name:t,typeof t=="function"||typeof t=="string"){const o=this.createFromAlias(t);this.expressionMap.setMainAlias(o)}return this.expressionMap.queryType="update",this.expressionMap.valuesSet=r,pt.isUpdateQueryBuilder(this)?this:kt.queryBuilderRegistry.UpdateQueryBuilder(this)}delete(){return this.expressionMap.queryType="delete",pt.isDeleteQueryBuilder(this)?this:kt.queryBuilderRegistry.DeleteQueryBuilder(this)}softDelete(){return this.expressionMap.queryType="soft-delete",pt.isSoftDeleteQueryBuilder(this)?this:kt.queryBuilderRegistry.SoftDeleteQueryBuilder(this)}restore(){return this.expressionMap.queryType="restore",pt.isSoftDeleteQueryBuilder(this)?this:kt.queryBuilderRegistry.SoftDeleteQueryBuilder(this)}relation(t,n){const r=arguments.length===2?t:void 0,o=arguments.length===2?n:t;if(this.expressionMap.queryType="relation",this.expressionMap.relationPropertyPath=o,r){const a=this.createFromAlias(r);this.expressionMap.setMainAlias(a)}return pt.isRelationQueryBuilder(this)?this:kt.queryBuilderRegistry.RelationQueryBuilder(this)}hasRelation(t,n){const r=this.connection.getMetadata(t);return(Array.isArray(n)?n:[n]).every(o=>!!r.findRelationWithPropertyPath(o))}hasParameter(t){var n;return((n=this.parentQueryBuilder)==null?void 0:n.hasParameter(t))||t in this.expressionMap.parameters}setParameter(t,n){if(typeof n=="function")throw new xe(`Function parameter isn't supported in the parameters. Please check "${t}" parameter.`);if(!t.match(/^([A-Za-z0-9_.]+)$/))throw new xe("QueryBuilder parameter keys may only contain numbers, letters, underscores, or periods.");return this.parentQueryBuilder&&this.parentQueryBuilder.setParameter(t,n),this.expressionMap.parameters[t]=n,this}setParameters(t){for(const[n,r]of Object.entries(t))this.setParameter(n,r);return this}createParameter(t){let n;do n=`orm_param_${this.parameterIndex++}`;while(this.hasParameter(n));return this.setParameter(n,t),`:${n}`}setNativeParameters(t){return this.parentQueryBuilder&&this.parentQueryBuilder.setNativeParameters(t),Object.keys(t).forEach(n=>{this.expressionMap.nativeParameters[n]=t[n]}),this}getParameters(){const t=Object.assign({},this.expressionMap.parameters);if(this.expressionMap.mainAlias&&this.expressionMap.mainAlias.hasMetadata){const n=this.expressionMap.mainAlias.metadata;if(n.discriminatorColumn&&n.parentEntityMetadata){const r=n.childEntityMetadatas.filter(o=>o.discriminatorColumn).map(o=>o.discriminatorValue);r.push(n.discriminatorValue),t.discriminatorColumnValues=r}}return t}printSql(){const[t,n]=this.getQueryAndParameters();return this.connection.logger.logQuery(t,n),this}getSql(){return this.getQueryAndParameters()[0]}getQueryAndParameters(){const t=this.getQuery(),n=this.getParameters();return this.connection.driver.escapeQueryWithParameters(t,n,this.expressionMap.nativeParameters)}async execute(){const[t,n]=this.getQueryAndParameters(),r=this.obtainQueryRunner();try{return await r.query(t,n)}finally{r!==this.queryRunner&&await r.release()}}createQueryBuilder(t){return new this.constructor(this.connection,t??this.queryRunner)}clone(){return new this.constructor(this)}comment(t){return this.expressionMap.comment=t,this}disableEscaping(){return this.expressionMap.disableEscaping=!1,this}escape(t){return this.expressionMap.disableEscaping?this.connection.driver.escape(t):t}setQueryRunner(t){return this.queryRunner=t,this}callListeners(t){return this.expressionMap.callListeners=t,this}useTransaction(t){return this.expressionMap.useTransaction=t,this}addCommonTableExpression(t,n,r){return this.expressionMap.commonTableExpressions.push({queryBuilder:t,alias:n,options:r||{}}),this}getTableName(t){return t.split(".").map(n=>n===""?n:this.escape(n)).join(".")}getMainTableName(){if(!this.expressionMap.mainAlias)throw new xe('Entity where values should be inserted is not specified. Call "qb.into(entity)" method to specify it.');return this.expressionMap.mainAlias.hasMetadata?this.expressionMap.mainAlias.metadata.tablePath:this.expressionMap.mainAlias.tablePath}createFromAlias(t,n){if(this.connection.hasMetadata(t)){const r=this.connection.getMetadata(t);return this.expressionMap.createAlias({type:"from",name:n,metadata:this.connection.getMetadata(t),tablePath:r.tablePath})}else{if(typeof t=="string"){const a=t.substr(0,1)==="("&&t.substr(-1)===")";return this.expressionMap.createAlias({type:"from",name:n,tablePath:a?void 0:t,subQuery:a?t:void 0})}const r=t(this.subQuery());this.setParameters(r.getParameters());const o=r.getQuery();return this.expressionMap.createAlias({type:"from",name:n,subQuery:o})}}replacePropertyNames(t){return t}replacePropertyNamesForTheWholeQuery(t){const n={};for(const a of this.expressionMap.aliases){if(!a.hasMetadata)continue;const i=this.expressionMap.aliasNamePrefixingEnabled&&a.name?`${a.name}.`:"";n[i]||(n[i]={});for(const s of a.metadata.relations)s.joinColumns.length>0&&(n[i][s.propertyPath]=s.joinColumns[0].databaseName);for(const s of a.metadata.relations){const c=[...s.joinColumns,...s.inverseJoinColumns];for(const l of c){const u=`${s.propertyPath}.${l.referencedColumn.propertyPath}`;n[i][u]=l.databaseName}}for(const s of a.metadata.columns)n[i][s.databaseName]=s.databaseName;for(const s of a.metadata.columns)n[i][s.propertyName]=s.databaseName;for(const s of a.metadata.columns)n[i][s.propertyPath]=s.databaseName}const r=Object.keys(n),o=r.map(a=>yne(a)).join("|");return r.length>0&&(t=t.replace(new RegExp(`([ =(]|^.{0})${o?"("+o+")":""}([^ =(),]+)(?=[ =),]|.{0}$)`,"gm"),(...a)=>{let i,s,c;if(o){if(i=a[0],s=a[1],c=a[3],n[a[2]][c])return`${s}${this.escape(a[2].substring(0,a[2].length-1))}.${this.escape(n[a[2]][c])}`}else if(i=a[0],s=a[1],c=a[2],n[""][c])return`${s}${this.escape(n[""][c])}`;return i})),t}createComment(){return this.expressionMap.comment?`/* ${this.expressionMap.comment.replace(/\*\//g,"")} */ `:""}createTimeTravelQuery(){return this.expressionMap.queryType==="select"&&this.expressionMap.timeTravel?` AS OF SYSTEM TIME ${this.expressionMap.timeTravel}`:""}createWhereExpression(){const t=[],n=this.createWhereClausesExpression(this.expressionMap.wheres);if(n.length>0&&n!=="1=1"&&t.push(this.replacePropertyNames(n)),this.expressionMap.mainAlias.hasMetadata){const o=this.expressionMap.mainAlias.metadata;if(this.expressionMap.queryType==="select"&&!this.expressionMap.withDeleted&&o.deleteDateColumn){const a=this.expressionMap.aliasNamePrefixingEnabled?this.expressionMap.mainAlias.name+"."+o.deleteDateColumn.propertyName:o.deleteDateColumn.propertyName,i=`${this.replacePropertyNames(a)} IS NULL`;t.push(i)}if(o.discriminatorColumn&&o.parentEntityMetadata){const a=this.expressionMap.aliasNamePrefixingEnabled?this.expressionMap.mainAlias.name+"."+o.discriminatorColumn.databaseName:o.discriminatorColumn.databaseName,i=`${this.replacePropertyNames(a)} IN (:...discriminatorColumnValues)`;t.push(i)}}if(this.expressionMap.extraAppendedAndWhereCondition){const o=this.replacePropertyNames(this.expressionMap.extraAppendedAndWhereCondition);t.push(o)}let r="";return r+=this.createTimeTravelQuery(),t.length?t.length===1?r+=` WHERE ${t[0]}`:r+=` WHERE ( ${t.join(" ) AND ( ")} )`:r+="",r}createReturningExpression(t){const n=this.getReturningColumns(),r=this.connection.driver;if(typeof this.expressionMap.returning!="string"&&this.expressionMap.extraReturningColumns.length>0&&r.isReturningSqlSupported(t)&&n.push(...this.expressionMap.extraReturningColumns.filter(o=>n.indexOf(o)===-1)),n.length){let o=n.map(a=>{const i=this.escape(a.databaseName);return r.options.type==="mssql"?this.expressionMap.queryType==="insert"||this.expressionMap.queryType==="update"||this.expressionMap.queryType==="soft-delete"||this.expressionMap.queryType==="restore"?"INSERTED."+i:this.escape(this.getMainTableName())+"."+i:i}).join(", ");return r.options.type==="oracle"&&(o+=" INTO "+n.map(a=>this.createParameter({type:r.columnTypeToNativeParameter(a.type),dir:r.oracle.BIND_OUT})).join(", ")),r.options.type==="mssql"&&(this.expressionMap.queryType==="insert"||this.expressionMap.queryType==="update")&&(o+=" INTO @OutputTable"),o}else if(typeof this.expressionMap.returning=="string")return this.expressionMap.returning;return""}getReturningColumns(){const t=[];return Array.isArray(this.expressionMap.returning)&&this.expressionMap.returning.forEach(n=>{this.expressionMap.mainAlias.hasMetadata&&t.push(...this.expressionMap.mainAlias.metadata.findColumnsWithPropertyPath(n))}),t}createWhereClausesExpression(t){return t.map((n,r)=>{const o=this.createWhereConditionExpression(n.condition);switch(n.type){case"and":return(r>0?"AND ":"")+`${this.connection.options.isolateWhereStatements?"(":""}${o}${this.connection.options.isolateWhereStatements?")":""}`;case"or":return(r>0?"OR ":"")+`${this.connection.options.isolateWhereStatements?"(":""}${o}${this.connection.options.isolateWhereStatements?")":""}`}return o}).join(" ").trim()}createWhereConditionExpression(t,n=!1){if(typeof t=="string")return t;if(Array.isArray(t))return t.length===0?"1=1":t.length===1&&!n?this.createWhereClausesExpression(t):"("+this.createWhereClausesExpression(t)+")";const{driver:r}=this.connection;switch(t.operator){case"lessThan":return`${t.parameters[0]} < ${t.parameters[1]}`;case"lessThanOrEqual":return`${t.parameters[0]} <= ${t.parameters[1]}`;case"arrayContains":return`${t.parameters[0]} @> ${t.parameters[1]}`;case"jsonContains":return`${t.parameters[0]} ::jsonb @> ${t.parameters[1]}`;case"arrayContainedBy":return`${t.parameters[0]} <@ ${t.parameters[1]}`;case"arrayOverlap":return`${t.parameters[0]} && ${t.parameters[1]}`;case"moreThan":return`${t.parameters[0]} > ${t.parameters[1]}`;case"moreThanOrEqual":return`${t.parameters[0]} >= ${t.parameters[1]}`;case"notEqual":return`${t.parameters[0]} != ${t.parameters[1]}`;case"equal":return`${t.parameters[0]} = ${t.parameters[1]}`;case"ilike":return r.options.type==="postgres"||r.options.type==="cockroachdb"?`${t.parameters[0]} ILIKE ${t.parameters[1]}`:`UPPER(${t.parameters[0]}) LIKE UPPER(${t.parameters[1]})`;case"like":return`${t.parameters[0]} LIKE ${t.parameters[1]}`;case"between":return`${t.parameters[0]} BETWEEN ${t.parameters[1]} AND ${t.parameters[2]}`;case"in":return t.parameters.length<=1?"0=1":`${t.parameters[0]} IN (${t.parameters.slice(1).join(", ")})`;case"any":return r.options.type==="cockroachdb"?`${t.parameters[0]}::STRING = ANY(${t.parameters[1]}::STRING[])`:`${t.parameters[0]} = ANY(${t.parameters[1]})`;case"isNull":return`${t.parameters[0]} IS NULL`;case"not":return`NOT(${this.createWhereConditionExpression(t.condition)})`;case"brackets":return`${this.createWhereConditionExpression(t.condition,!0)}`;case"and":return"("+t.parameters.join(" AND ")+")";case"or":return"("+t.parameters.join(" OR ")+")"}throw new TypeError(`Unsupported FindOperator ${xl.constructor.name}`)}createCteExpression(){if(!this.hasCommonTableExpressions())return"";const t=this.connection.driver.cteCapabilities.requiresRecursiveHint;return"WITH "+this.expressionMap.commonTableExpressions.map(n=>{const r=typeof n.queryBuilder=="string"?n.queryBuilder:n.queryBuilder.getQuery();if(typeof n.queryBuilder!="string"){if(n.queryBuilder.hasCommonTableExpressions())throw new xe(`Nested CTEs aren't supported (CTE: ${n.alias})`);if(!this.connection.driver.cteCapabilities.writable&&!pt.isSelectQueryBuilder(n.queryBuilder))throw new xe(`Only select queries are supported in CTEs in ${this.connection.options.type} (CTE: ${n.alias})`);this.setParameters(n.queryBuilder.getParameters())}let o=this.escape(n.alias);if(n.options.columnNames){const s=n.options.columnNames.map(c=>this.escape(c));if(pt.isSelectQueryBuilder(n.queryBuilder)&&n.queryBuilder.expressionMap.selects.length&&n.options.columnNames.length!==n.queryBuilder.expressionMap.selects.length)throw new xe(`cte.options.columnNames length (${n.options.columnNames.length}) doesn't match subquery select list length ${n.queryBuilder.expressionMap.selects.length} (CTE: ${n.alias})`);o+=`(${s.join(", ")})`}const a=n.options.recursive&&t?"RECURSIVE":"";let i="";return this.connection.driver.cteCapabilities.materializedHint&&n.options.materialized!==void 0&&(i=n.options.materialized?"MATERIALIZED":"NOT MATERIALIZED"),[a,o,"AS",i,`(${r})`].filter(Boolean).join(" ")}).join(", ")+" "}getWhereInIdsCondition(t){const n=this.expressionMap.mainAlias.metadata,r=(Array.isArray(t)?t:[t]).map(o=>n.ensureEntityIdMap(o));if(!n.hasMultiplePrimaryKeys){const o=n.primaryColumns[0];if(!o.transformer&&!o.relationMetadata&&!o.embeddedMetadata)return{[o.propertyName]:qn(r.map(a=>o.getEntityValue(a,!1)))}}return new lI(o=>{for(const a of r)o.orWhere(new lI(i=>i.where(a)))})}getExistsCondition(t){const n=t.clone().orderBy().groupBy().offset(void 0).limit(void 0).skip(void 0).take(void 0).select("1").setOption("disable-global-order");return[`EXISTS (${n.getQuery()})`,n.getParameters()]}findColumnsForPropertyPath(t){let n=this.expressionMap.mainAlias;const r=[],o=t.split(".");for(;o.length>1;){const s=o[0];if(!(n!=null&&n.hasMetadata))break;if(n.metadata.hasEmbeddedWithPropertyPath(s)){o.unshift(`${o.shift()}.${o.shift()}`);continue}if(n.metadata.hasRelationWithPropertyPath(s)){const c=this.expressionMap.joinAttributes.find(l=>l.relationPropertyPath===s);if(!(c!=null&&c.alias)){const l=r.length>0?`${r.join(".")}.${s}`:s;throw new Error(`Cannot find alias for relation at ${l}`)}n=c.alias,r.push(...s.split(".")),o.shift();continue}break}if(!n)throw new Error(`Cannot find alias for property ${t}`);const a=o.join("."),i=n.metadata.findColumnsWithPropertyPath(a);if(!i.length)throw new Dr(t,n.metadata);return[n,r,i]}createPropertyPath(t,n,r=""){const o=[];for(const a of Object.keys(n)){const i=r?`${r}.${a}`:a;if(n[a]===null||typeof n[a]!="object"||pt.isFindOperator(n[a])){o.push(i);continue}if(t.hasEmbeddedWithPropertyPath(i)){const s=this.createPropertyPath(t,n[a],i);o.push(...s);continue}if(t.hasRelationWithPropertyPath(i)){const s=t.findRelationWithPropertyPath(i);if(s.relationType==="one-to-one"||s.relationType==="many-to-one"){const u=s.joinColumns.map(d=>d.referencedColumn).filter(d=>!!d);if(u.length>0&&u.every(d=>d.getEntityValue(n[a],!1))){o.push(i);continue}}if(s.relationType==="one-to-many"||s.relationType==="many-to-many")throw new Error(`Cannot query across ${s.relationType} for property ${i}`);const c=s.inverseEntityMetadata.primaryColumns;if(c.length>0&&c.every(u=>u.getEntityValue(n[a],!1))){const u=c.map(d=>`${i}.${d.propertyPath}`);o.push(...u);continue}const l=this.createPropertyPath(s.inverseEntityMetadata,n[a]).map(u=>`${i}.${u}`);o.push(...l);continue}o.push(i)}return o}*getPredicates(t){if(this.expressionMap.mainAlias.hasMetadata){const n=this.createPropertyPath(this.expressionMap.mainAlias.metadata,t);for(const r of n){const[o,a,i]=this.findColumnsForPropertyPath(r);for(const s of i){let c=t;for(const d of a){if(!c||!(d in c)){c={};break}c=c[d]}const l=this.expressionMap.aliasNamePrefixingEnabled?`${o.name}.${s.propertyPath}`:s.propertyPath,u=s.getEntityValue(c,!0);yield[l,u]}}}else for(const n of Object.keys(t)){const r=t[n];yield[this.expressionMap.aliasNamePrefixingEnabled?`${this.alias}.${n}`:n,r]}}getWherePredicateCondition(t,n){if(pt.isFindOperator(n)){let r=[];if(n.useParameter)if(n.objectLiteralParameters)this.setParameters(n.objectLiteralParameters);else if(n.multipleParameters)for(const o of n.value)r.push(this.createParameter(o));else r.push(this.createParameter(n.value));if(n.type==="raw")return n.getSql?n.getSql(t):{operator:"equal",parameters:[t,n.value]};if(n.type==="not")return n.child?{operator:n.type,condition:this.getWherePredicateCondition(t,n.child)}:{operator:"notEqual",parameters:[t,...r]};if(n.type==="and"){const o=n.value;return{operator:n.type,parameters:o.map(a=>this.createWhereConditionExpression(this.getWherePredicateCondition(t,a)))}}else if(n.type==="or"){const o=n.value;return{operator:n.type,parameters:o.map(a=>this.createWhereConditionExpression(this.getWherePredicateCondition(t,a)))}}else return{operator:n.type,parameters:[t,...r]}}else return{operator:"equal",parameters:[t,this.createParameter(n)]}}getWhereCondition(t){if(typeof t=="string")return t;if(pt.isBrackets(t)){const o=this.createQueryBuilder();return o.parentQueryBuilder=this,o.expressionMap.mainAlias=this.expressionMap.mainAlias,o.expressionMap.aliasNamePrefixingEnabled=this.expressionMap.aliasNamePrefixingEnabled,o.expressionMap.parameters=this.expressionMap.parameters,o.expressionMap.nativeParameters=this.expressionMap.nativeParameters,o.expressionMap.wheres=[],t.whereFactory(o),{operator:pt.isNotBrackets(t)?"not":"brackets",condition:o.expressionMap.wheres}}if(typeof t=="function")return t(this);const n=Array.isArray(t)?t:[t],r=[];for(const o of n){const a=[];for(const[i,s]of this.getPredicates(o))a.push({type:"and",condition:this.getWherePredicateCondition(i,s)});r.push({type:"or",condition:a})}return r.length===1?r[0].condition:r}obtainQueryRunner(){return this.queryRunner||this.connection.createQueryRunner()}hasCommonTableExpressions(){return this.expressionMap.commonTableExpressions.length>0}}kt.queryBuilderRegistry={};class gne{static from(t){const n=new this;return n.raw=t.records,n.affected=t.affected,n}}class vne extends kt{constructor(t,n){super(t,n),this["@instanceof"]=Symbol.for("DeleteQueryBuilder"),this.expressionMap.aliasNamePrefixingEnabled=!1}getQuery(){let t=this.createComment();return t+=this.createCteExpression(),t+=this.createDeleteExpression(),this.replacePropertyNamesForTheWholeQuery(t.trim())}async execute(){const[t,n]=this.getQueryAndParameters(),r=this.obtainQueryRunner();let o=!1;try{this.expressionMap.useTransaction===!0&&r.isTransactionActive===!1&&(await r.startTransaction(),o=!0),this.expressionMap.callListeners===!0&&this.expressionMap.mainAlias.hasMetadata&&await r.broadcaster.broadcast("BeforeRemove",this.expressionMap.mainAlias.metadata);const a=await r.query(t,n,!0),i=gne.from(a);return this.expressionMap.callListeners===!0&&this.expressionMap.mainAlias.hasMetadata&&await r.broadcaster.broadcast("AfterRemove",this.expressionMap.mainAlias.metadata),o&&await r.commitTransaction(),i}catch(a){if(o)try{await r.rollbackTransaction()}catch{}throw a}finally{r!==this.queryRunner&&await r.release()}}from(t,n){t=pt.isEntitySchema(t)?t.options.name:t;const r=this.createFromAlias(t,n);return this.expressionMap.setMainAlias(r),this}where(t,n){this.expressionMap.wheres=[];const r=this.getWhereCondition(t);return r&&(this.expressionMap.wheres=[{type:"simple",condition:r}]),n&&this.setParameters(n),this}andWhere(t,n){return this.expressionMap.wheres.push({type:"and",condition:this.getWhereCondition(t)}),n&&this.setParameters(n),this}orWhere(t,n){return this.expressionMap.wheres.push({type:"or",condition:this.getWhereCondition(t)}),n&&this.setParameters(n),this}whereInIds(t){return this.where(this.getWhereInIdsCondition(t))}andWhereInIds(t){return this.andWhere(this.getWhereInIdsCondition(t))}orWhereInIds(t){return this.orWhere(this.getWhereInIdsCondition(t))}output(t){return this.returning(t)}returning(t){if(!this.connection.driver.isReturningSqlSupported("delete"))throw new $f;return this.expressionMap.returning=t,this}createDeleteExpression(){const t=this.getTableName(this.getMainTableName()),n=this.createWhereExpression(),r=this.createReturningExpression("delete");return r===""?`DELETE FROM ${t}${n}`:this.connection.driver.options.type==="mssql"?`DELETE FROM ${t} OUTPUT ${r}${n}`:`DELETE FROM ${t}${n} RETURNING ${r}`}}let zf;const bne=new Uint8Array(16);function xne(){if(!zf&&(zf=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!zf))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return zf(bne)}const Qt=[];for(let e=0;e<256;++e)Qt.push((e+256).toString(16).slice(1));function wne(e,t=0){return Qt[e[t+0]]+Qt[e[t+1]]+Qt[e[t+2]]+Qt[e[t+3]]+"-"+Qt[e[t+4]]+Qt[e[t+5]]+"-"+Qt[e[t+6]]+Qt[e[t+7]]+"-"+Qt[e[t+8]]+Qt[e[t+9]]+"-"+Qt[e[t+10]]+Qt[e[t+11]]+Qt[e[t+12]]+Qt[e[t+13]]+Qt[e[t+14]]+Qt[e[t+15]]}const _ne=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),uI={randomUUID:_ne};function jne(e,t,n){if(uI.randomUUID&&!t&&!e)return uI.randomUUID();e=e||{};const r=e.random||(e.rng||xne)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,wne(r)}class dI{constructor(){this.count=0,this.promises=[]}async wait(){return this.promises.length>0&&await Promise.all(this.promises),this}}class fI{constructor(){this.identifiers=[],this.generatedMaps=[]}static from(t){const n=new this;return n.raw=t.raw,n}}class gx{constructor(t,n){this.queryRunner=t,this.expressionMap=n}async update(t,n){const r=this.expressionMap.mainAlias.metadata;await Promise.all(n.map(async(o,a)=>{if(this.queryRunner.connection.driver.isReturningSqlSupported("update")){this.queryRunner.connection.driver.options.type==="oracle"&&Array.isArray(t.raw)&&this.expressionMap.extraReturningColumns.length>0&&(t.raw=t.raw.reduce((c,l,u)=>(c[this.expressionMap.extraReturningColumns[u].databaseName]=l[0],c),{}));const i=Array.isArray(t.raw)?t.raw[a]:t.raw,s=this.queryRunner.connection.driver.createGeneratedMap(r,i);s&&(this.queryRunner.manager.merge(r.target,o,s),t.generatedMaps.push(s))}else{const i=this.expressionMap.extraReturningColumns;if(i.length>0){const s=this.expressionMap.mainAlias.metadata.getEntityIdMap(o);if(!s)throw new xe("Cannot update entity because entity id is not set in the entity.");const c=await this.queryRunner.manager.createQueryBuilder().select(r.primaryColumns.map(l=>r.targetName+"."+l.propertyPath)).addSelect(i.map(l=>r.targetName+"."+l.propertyPath)).from(r.target,r.targetName).where(s).withDeleted().setOption("create-pojo").getOne();c&&(this.queryRunner.manager.merge(r.target,o,c),t.generatedMaps.push(c))}}}))}async insert(t,n){const r=this.expressionMap.mainAlias.metadata;let o=r.getInsertionReturningColumns();const a=this.queryRunner.connection.driver.isReturningSqlSupported("insert");o=o.filter(s=>s.isGenerated?a===!0:!0);const i=n.map((s,c)=>{this.queryRunner.connection.driver.options.type==="oracle"&&Array.isArray(t.raw)&&this.expressionMap.extraReturningColumns.length>0&&(t.raw=t.raw.reduce((d,f,p)=>(d[this.expressionMap.extraReturningColumns[p].databaseName]=f[0],d),{}));const l=Array.isArray(t.raw)?t.raw[c]:t.raw,u=this.queryRunner.connection.driver.createGeneratedMap(r,l,c,n.length)||{};return c in this.expressionMap.locallyGenerated&&this.queryRunner.manager.merge(r.target,u,this.expressionMap.locallyGenerated[c]),this.queryRunner.manager.merge(r.target,s,u),u});if(o.length>0&&!this.queryRunner.connection.driver.isReturningSqlSupported("insert")){const s=n.map(l=>{const u=r.getEntityIdMap(l);if(!u)throw new xe("Cannot update entity because entity id is not set in the entity.");return u}),c=await this.queryRunner.manager.createQueryBuilder().select(r.primaryColumns.map(l=>r.targetName+"."+l.propertyPath)).addSelect(o.map(l=>r.targetName+"."+l.propertyPath)).from(r.target,r.targetName).where(s).setOption("create-pojo").getMany();n.forEach((l,u)=>{this.queryRunner.manager.merge(r.target,i[u],c[u]),this.queryRunner.manager.merge(r.target,l,c[u])})}n.forEach((s,c)=>{const l=r.getEntityIdMap(s);t.identifiers.push(l),t.generatedMaps.push(i[c])})}getUpdationReturningColumns(){return this.expressionMap.mainAlias.metadata.columns.filter(t=>t.asExpression!==void 0||t.isUpdateDate||t.isVersion)}getSoftDeletionReturningColumns(){return this.expressionMap.mainAlias.metadata.columns.filter(t=>t.asExpression!==void 0||t.isUpdateDate||t.isVersion||t.isDeleteDate)}}class Ene extends kt{constructor(){super(...arguments),this["@instanceof"]=Symbol.for("InsertQueryBuilder")}getQuery(){let t=this.createComment();return t+=this.createCteExpression(),t+=this.createInsertExpression(),this.replacePropertyNamesForTheWholeQuery(t.trim())}async execute(){const t=this.getValueSets();if(t.length===0)return new fI;const n=this.obtainQueryRunner();let r=!1;try{if(this.expressionMap.useTransaction===!0&&n.isTransactionActive===!1&&(await n.startTransaction(),r=!0),this.expressionMap.callListeners===!0&&this.expressionMap.mainAlias.hasMetadata){const p=new dI;t.forEach(y=>{n.broadcaster.broadcastBeforeInsertEvent(p,this.expressionMap.mainAlias.metadata,y)}),await p.wait()}let o=null,a=null;const i=new gx(n,this.expressionMap),s=[];if(Array.isArray(this.expressionMap.returning)&&this.expressionMap.mainAlias.hasMetadata)for(const p of this.expressionMap.returning)s.push(...this.expressionMap.mainAlias.metadata.findColumnsWithPropertyPath(p));this.expressionMap.updateEntity===!0&&this.expressionMap.mainAlias.hasMetadata&&(t.length>1&&this.connection.driver.options.type==="oracle"||(this.expressionMap.extraReturningColumns=this.expressionMap.mainAlias.metadata.getInsertionReturningColumns()),s.push(...this.expressionMap.extraReturningColumns.filter(p=>!s.includes(p)))),s.length>0&&this.connection.driver.options.type==="mssql"&&(o=this.connection.driver.buildTableVariableDeclaration("@OutputTable",s),a="SELECT * FROM @OutputTable");const[c,l]=this.getQueryAndParameters(),u=[o,c,a].filter(p=>p!=null).join(`;

`),d=await n.query(u,l,!0),f=fI.from(d);if(this.expressionMap.updateEntity===!0&&this.expressionMap.mainAlias.hasMetadata&&await i.insert(f,t),this.expressionMap.callListeners===!0&&this.expressionMap.mainAlias.hasMetadata){const p=new dI;t.forEach(y=>{n.broadcaster.broadcastAfterInsertEvent(p,this.expressionMap.mainAlias.metadata,y)}),await p.wait()}return r&&await n.commitTransaction(),f}catch(o){if(r)try{await n.rollbackTransaction()}catch{}throw o}finally{n!==this.queryRunner&&await n.release()}}into(t,n){t=pt.isEntitySchema(t)?t.options.name:t;const r=this.createFromAlias(t);return this.expressionMap.setMainAlias(r),this.expressionMap.insertColumns=n||[],this}values(t){return this.expressionMap.valuesSet=t,this}output(t){return this.returning(t)}returning(t){if(!this.connection.driver.isReturningSqlSupported("insert"))throw new $f;return this.expressionMap.returning=t,this}updateEntity(t){return this.expressionMap.updateEntity=t,this}onConflict(t){return this.expressionMap.onConflict=t,this}orIgnore(t=!0){return this.expressionMap.onIgnore=!!t,this}orUpdate(t,n,r){return Array.isArray(t)?(this.expressionMap.onUpdate={overwrite:t,conflict:n,skipUpdateIfNoValuesChanged:r==null?void 0:r.skipUpdateIfNoValuesChanged,indexPredicate:r==null?void 0:r.indexPredicate,upsertType:r==null?void 0:r.upsertType},this):(this.expressionMap.onUpdate={conflict:t==null?void 0:t.conflict_target,columns:t==null?void 0:t.columns,overwrite:t==null?void 0:t.overwrite,skipUpdateIfNoValuesChanged:r==null?void 0:r.skipUpdateIfNoValuesChanged,upsertType:r==null?void 0:r.upsertType},this)}createInsertExpression(){var i,s;const t=this.getTableName(this.getMainTableName()),n=this.createValuesExpression(),r=this.connection.driver.options.type==="oracle"&&this.getValueSets().length>1?null:this.createReturningExpression("insert"),o=this.createColumnNamesExpression();let a="INSERT ";if(((i=this.expressionMap.onUpdate)==null?void 0:i.upsertType)==="primary-key"&&(a="UPSERT "),(ye.isMySQLFamily(this.connection.driver)||this.connection.driver.options.type==="aurora-mysql")&&(a+=`${this.expressionMap.onIgnore?" IGNORE ":""}`),a+=`INTO ${t}`,this.alias!==this.getMainTableName()&&ye.isPostgresFamily(this.connection.driver)&&(a+=` AS "${this.alias}"`),o?a+=`(${o})`:!n&&(ye.isMySQLFamily(this.connection.driver)||this.connection.driver.options.type==="aurora-mysql")&&(a+="()"),r&&this.connection.driver.options.type==="mssql"&&(a+=` OUTPUT ${r}`),n?(this.connection.driver.options.type==="oracle"||this.connection.driver.options.type==="sap")&&this.getValueSets().length>1?a+=` ${n}`:a+=` VALUES ${n}`:ye.isMySQLFamily(this.connection.driver)||this.connection.driver.options.type==="aurora-mysql"?a+=" VALUES ()":a+=" DEFAULT VALUES",((s=this.expressionMap.onUpdate)==null?void 0:s.upsertType)!=="primary-key"){if(this.connection.driver.supportedUpsertTypes.includes("on-conflict-do-update")){if(this.expressionMap.onIgnore)a+=" ON CONFLICT DO NOTHING ";else if(this.expressionMap.onConflict)a+=` ON CONFLICT ${this.expressionMap.onConflict} `;else if(this.expressionMap.onUpdate){const{overwrite:c,columns:l,conflict:u,skipUpdateIfNoValuesChanged:d,indexPredicate:f}=this.expressionMap.onUpdate;let p="ON CONFLICT";if(Array.isArray(u)){if(p+=` ( ${u.map(m=>this.escape(m)).join(", ")} )`,f&&!ye.isPostgresFamily(this.connection.driver))throw new xe("indexPredicate option is not supported by the current database driver");f&&ye.isPostgresFamily(this.connection.driver)&&(p+=` WHERE ( ${f} )`)}else u&&(p+=` ON CONSTRAINT ${this.escape(u)}`);const y=[];Array.isArray(c)?y.push(...c.map(m=>`${this.escape(m)} = EXCLUDED.${this.escape(m)}`)):l&&y.push(...l.map(m=>`${this.escape(m)} = :${m}`)),y.length>0&&(a+=` ${p} DO UPDATE SET `,y.push(...this.expressionMap.mainAlias.metadata.columns.filter(m=>m.isUpdateDate&&!(c!=null&&c.includes(m.databaseName))&&!(this.connection.driver.options.type==="oracle"&&this.getValueSets().length>1||ye.isSQLiteFamily(this.connection.driver)||this.connection.driver.options.type==="sap"||this.connection.driver.options.type==="spanner")).map(m=>`${this.escape(m.databaseName)} = DEFAULT`)),a+=y.join(", "),a+=" "),Array.isArray(c)&&d&&ye.isPostgresFamily(this.connection.driver)&&(a+=" WHERE (",a+=c.map(m=>`${t}.${this.escape(m)} IS DISTINCT FROM EXCLUDED.${this.escape(m)}`).join(" OR "),a+=") ")}}else if(this.connection.driver.supportedUpsertTypes.includes("on-duplicate-key-update")){if(this.expressionMap.onUpdate){const{overwrite:c,columns:l}=this.expressionMap.onUpdate;Array.isArray(c)?(a+=" ON DUPLICATE KEY UPDATE ",a+=c.map(u=>`${this.escape(u)} = VALUES(${this.escape(u)})`).join(", "),a+=" "):Array.isArray(l)&&(a+=" ON DUPLICATE KEY UPDATE ",a+=l.map(u=>`${this.escape(u)} = :${u}`).join(", "),a+=" ")}}else if(this.expressionMap.onUpdate)throw new xe("onUpdate is not supported by the current database driver")}return r&&(ye.isPostgresFamily(this.connection.driver)||this.connection.driver.options.type==="oracle"||this.connection.driver.options.type==="cockroachdb"||ye.isMySQLFamily(this.connection.driver))&&(a+=` RETURNING ${r}`),this.connection.driver.options.type==="mssql"&&this.expressionMap.mainAlias.hasMetadata&&this.expressionMap.mainAlias.metadata.columns.filter(c=>this.expressionMap.insertColumns.length>0?this.expressionMap.insertColumns.indexOf(c.propertyPath)!==-1:c.isInsert).some(c=>this.isOverridingAutoIncrementBehavior(c))&&(a=`SET IDENTITY_INSERT ${t} ON; ${a}; SET IDENTITY_INSERT ${t} OFF`),a}getInsertedColumns(){return this.expressionMap.mainAlias.hasMetadata?this.expressionMap.mainAlias.metadata.columns.filter(t=>this.expressionMap.insertColumns.length?this.expressionMap.insertColumns.indexOf(t.propertyPath)!==-1:!(!t.isInsert||t.isGenerated&&t.generationStrategy==="increment"&&this.connection.driver.options.type!=="spanner"&&this.connection.driver.options.type!=="oracle"&&!ye.isSQLiteFamily(this.connection.driver)&&!ye.isMySQLFamily(this.connection.driver)&&this.connection.driver.options.type!=="aurora-mysql"&&!(this.connection.driver.options.type==="mssql"&&this.isOverridingAutoIncrementBehavior(t)))):[]}createColumnNamesExpression(){const t=this.getInsertedColumns();if(t.length>0)return t.map(n=>this.escape(n.databaseName)).join(", ");if(!this.expressionMap.mainAlias.hasMetadata&&!this.expressionMap.insertColumns.length){const n=this.getValueSets();if(n.length===1)return Object.keys(n[0]).map(r=>this.escape(r)).join(", ")}return this.expressionMap.insertColumns.map(n=>this.escape(n)).join(", ")}createValuesExpression(){const t=this.getValueSets(),n=this.getInsertedColumns();if(n.length>0){let r="";return t.forEach((o,a)=>{n.forEach((i,s)=>{s===0&&(this.connection.driver.options.type==="oracle"&&t.length>1||this.connection.driver.options.type==="sap"&&t.length>1?r+=" SELECT ":r+="(");let c=i.getEntityValue(o);if(typeof c!="function"&&(c=this.connection.driver.preparePersistentValue(c,i)),i.isVersion&&c===void 0)r+="1";else if(i.isDiscriminator)r+=this.createParameter(this.expressionMap.mainAlias.metadata.discriminatorValue);else if(i.isGenerated&&i.generationStrategy==="uuid"&&!this.connection.driver.isUUIDGenerationSupported()&&c===void 0)c=jne(),r+=this.createParameter(c),a in this.expressionMap.locallyGenerated||(this.expressionMap.locallyGenerated[a]={}),i.setEntityValue(this.expressionMap.locallyGenerated[a],c);else if(c===void 0)this.connection.driver.options.type==="oracle"&&t.length>1||ye.isSQLiteFamily(this.connection.driver)||this.connection.driver.options.type==="sap"||this.connection.driver.options.type==="spanner"?i.default!==void 0&&i.default!==null?r+=this.connection.driver.normalizeDefault(i):r+="NULL":r+="DEFAULT";else if(c===null&&this.connection.driver.options.type==="spanner")r+="NULL";else if(typeof c=="function")r+=c();else{this.connection.driver.options.type==="mssql"&&(c=this.connection.driver.parametrizeValue(i,c));const l=this.createParameter(c);if((ye.isMySQLFamily(this.connection.driver)||this.connection.driver.options.type==="aurora-mysql")&&this.connection.driver.spatialTypes.indexOf(i.type)!==-1){const u=this.connection.driver.options.legacySpatialSupport?"GeomFromText":"ST_GeomFromText";i.srid!=null?r+=`${u}(${l}, ${i.srid})`:r+=`${u}(${l})`}else ye.isPostgresFamily(this.connection.driver)&&this.connection.driver.spatialTypes.indexOf(i.type)!==-1?i.srid!=null?r+=`ST_SetSRID(ST_GeomFromGeoJSON(${l}), ${i.srid})::${i.type}`:r+=`ST_GeomFromGeoJSON(${l})::${i.type}`:this.connection.driver.options.type==="mssql"&&this.connection.driver.spatialTypes.indexOf(i.type)!==-1?r+=i.type+"::STGeomFromText("+l+", "+(i.srid||"0")+")":r+=l}s===n.length-1?a===t.length-1?this.connection.driver.options.type==="oracle"&&t.length>1?r+=" FROM DUAL ":this.connection.driver.options.type==="sap"&&t.length>1?r+=" FROM dummy ":r+=")":this.connection.driver.options.type==="oracle"&&t.length>1?r+=" FROM DUAL UNION ALL ":this.connection.driver.options.type==="sap"&&t.length>1?r+=" FROM dummy UNION ALL ":r+="), ":r+=", "})}),r==="()"?"":r}else{let r="";return t.forEach((o,a)=>{Object.keys(o).forEach((i,s)=>{s===0&&(r+="(");const c=o[i];typeof c=="function"?r+=c():c===void 0?this.connection.driver.options.type==="oracle"&&t.length>1||ye.isSQLiteFamily(this.connection.driver)||this.connection.driver.options.type==="sap"||this.connection.driver.options.type==="spanner"?r+="NULL":r+="DEFAULT":c===null&&this.connection.driver.options.type==="spanner"||(r+=this.createParameter(c)),s===Object.keys(o).length-1?a===t.length-1?r+=")":r+="), ":r+=", "})}),r==="()"?"":r}}getValueSets(){if(Array.isArray(this.expressionMap.valuesSet))return this.expressionMap.valuesSet;if(Dt.isObject(this.expressionMap.valuesSet))return[this.expressionMap.valuesSet];throw new tne}isOverridingAutoIncrementBehavior(t){return t.isPrimary&&t.isGenerated&&t.generationStrategy==="increment"&&this.getValueSets().some(n=>t.getEntityValue(n)!==void 0&&t.getEntityValue(n)!==null)}}class pI{constructor(t,n){this.queryBuilder=t,this.expressionMap=n}async update(t){const n=this.expressionMap.relationMetadata;if(n.isManyToOne||n.isOneToOneOwner){const r=n.joinColumns.reduce((o,a)=>{const i=Dt.isObject(t)?a.referencedColumn.getEntityValue(t):t;return a.setEntityValue(o,i),o},{});if(!this.expressionMap.of||Array.isArray(this.expressionMap.of)&&!this.expressionMap.of.length)return;await this.queryBuilder.createQueryBuilder().update(n.entityMetadata.target).set(r).whereInIds(this.expressionMap.of).execute()}else if((n.isOneToOneNotOwner||n.isOneToMany)&&t===null){const r={};n.inverseRelation.joinColumns.forEach(c=>{r[c.propertyName]=null});const o=Array.isArray(this.expressionMap.of)?this.expressionMap.of:[this.expressionMap.of],a={},i=[];o.forEach((c,l)=>{n.inverseRelation.joinColumns.map((u,d)=>{const f="joinColumn_"+l+"_"+d;a[f]=Dt.isObject(c)?u.referencedColumn.getEntityValue(c):c,i.push(`${u.propertyPath} = :${f}`)})});const s=i.map(c=>"("+c+")").join(" OR ");if(!s)return;await this.queryBuilder.createQueryBuilder().update(n.inverseEntityMetadata.target).set(r).where(s).setParameters(a).execute()}else if(n.isOneToOneNotOwner||n.isOneToMany){if(Array.isArray(this.expressionMap.of))throw new xe("You cannot update relations of multiple entities with the same related object. Provide a single entity into .of method.");const r=this.expressionMap.of,o=n.inverseRelation.joinColumns.reduce((a,i)=>{const s=Dt.isObject(r)?i.referencedColumn.getEntityValue(r):r;return i.setEntityValue(a,s),a},{});if(!t||Array.isArray(t)&&!t.length)return;await this.queryBuilder.createQueryBuilder().update(n.inverseEntityMetadata.target).set(o).whereInIds(t).execute()}else{const r=n.junctionEntityMetadata,o=Array.isArray(this.expressionMap.of)?this.expressionMap.of:[this.expressionMap.of],a=Array.isArray(t)?t:[t],i=n.isManyToManyOwner?o:a,s=n.isManyToManyOwner?a:o,c=[];if(i.forEach(l=>{s.forEach(u=>{const d={};r.ownerColumns.forEach(f=>{d[f.databaseName]=Dt.isObject(l)?f.referencedColumn.getEntityValue(l):l}),r.inverseColumns.forEach(f=>{d[f.databaseName]=Dt.isObject(u)?f.referencedColumn.getEntityValue(u):u}),c.push(d)})}),!c.length)return;this.queryBuilder.connection.driver.options.type==="oracle"||this.queryBuilder.connection.driver.options.type==="sap"?await Promise.all(c.map(l=>this.queryBuilder.createQueryBuilder().insert().into(r.tableName).values(l).execute())):await this.queryBuilder.createQueryBuilder().insert().into(r.tableName).values(c).execute()}}}class Sne{constructor(t,n){this.queryBuilder=t,this.expressionMap=n}async remove(t){const n=this.expressionMap.relationMetadata;if(n.isOneToMany){const r=Array.isArray(this.expressionMap.of)?this.expressionMap.of:[this.expressionMap.of],o=Array.isArray(t)?t:[t],a={};n.inverseRelation.joinColumns.forEach(l=>{a[l.propertyName]=null});const i={},s=[];r.forEach((l,u)=>{s.push(...o.map((d,f)=>[...n.inverseRelation.joinColumns.map((p,y)=>{const m="joinColumn_"+u+"_"+f+"_"+y;return i[m]=Dt.isObject(l)?p.referencedColumn.getEntityValue(l):l,`${p.propertyPath} = :${m}`}),...n.inverseRelation.entityMetadata.primaryColumns.map((p,y)=>{const m="primaryColumn_"+f+"_"+f+"_"+y;return i[m]=Dt.isObject(d)?p.getEntityValue(d):d,`${p.propertyPath} = :${m}`})].join(" AND ")))});const c=s.map(l=>"("+l+")").join(" OR ");if(!c)return;await this.queryBuilder.createQueryBuilder().update(n.inverseEntityMetadata.target).set(a).where(c).setParameters(i).execute()}else{const r=n.junctionEntityMetadata,o=Array.isArray(this.expressionMap.of)?this.expressionMap.of:[this.expressionMap.of],a=Array.isArray(t)?t:[t],i=n.isManyToManyOwner?o:a,s=n.isManyToManyOwner?a:o,c={},l=[];i.forEach((d,f)=>{l.push(...s.map((p,y)=>[...r.ownerColumns.map((m,v)=>{const b="firstValue_"+f+"_"+y+"_"+v;return c[b]=Dt.isObject(d)?m.referencedColumn.getEntityValue(d):d,`${m.databaseName} = :${b}`}),...r.inverseColumns.map((m,v)=>{const b="secondValue_"+f+"_"+y+"_"+v;return c[b]=Dt.isObject(p)?m.referencedColumn.getEntityValue(p):p,`${m.databaseName} = :${b}`})].join(" AND ")))});const u=l.map(d=>"("+d+")").join(" OR ");await this.queryBuilder.createQueryBuilder().delete().from(r.tableName).where(u).setParameters(c).execute()}}}class Cne extends kt{constructor(){super(...arguments),this["@instanceof"]=Symbol.for("RelationQueryBuilder")}getQuery(){return""}of(t){return this.expressionMap.of=t,this}async set(t){const n=this.expressionMap.relationMetadata;if(!this.expressionMap.of)throw new xe("Entity whose relation needs to be set is not set. Use .of method to define whose relation you want to set.");if(n.isManyToMany||n.isOneToMany)throw new xe(`Set operation is only supported for many-to-one and one-to-one relations. However given "${n.propertyPath}" has ${n.relationType} relation. Use .add() method instead.`);if(n.joinColumns&&n.joinColumns.length>1&&(!Dt.isObject(t)||Object.keys(t).length<n.joinColumns.length))throw new xe('Value to be set into the relation must be a map of relation ids, for example: .set({ firstName: "...", lastName: "..." })');return new pI(this,this.expressionMap).update(t)}async add(t){if(Array.isArray(t)&&t.length===0)return;const n=this.expressionMap.relationMetadata;if(!this.expressionMap.of)throw new xe("Entity whose relation needs to be set is not set. Use .of method to define whose relation you want to set.");if(n.isManyToOne||n.isOneToOne)throw new xe(`Add operation is only supported for many-to-many and one-to-many relations. However given "${n.propertyPath}" has ${n.relationType} relation. Use .set() method instead.`);if(n.joinColumns&&n.joinColumns.length>1&&(!Dt.isObject(t)||Object.keys(t).length<n.joinColumns.length))throw new xe('Value to be set into the relation must be a map of relation ids, for example: .set({ firstName: "...", lastName: "..." })');return new pI(this,this.expressionMap).update(t)}async remove(t){if(Array.isArray(t)&&t.length===0)return;const n=this.expressionMap.relationMetadata;if(!this.expressionMap.of)throw new xe("Entity whose relation needs to be set is not set. Use .of method to define whose relation you want to set.");if(n.isManyToOne||n.isOneToOne)throw new xe(`Add operation is only supported for many-to-many and one-to-many relations. However given "${n.propertyPath}" has ${n.relationType} relation. Use .set(null) method instead.`);return new Sne(this,this.expressionMap).remove(t)}async addAndRemove(t,n){await this.remove(n),await this.add(t)}async loadOne(){return this.loadMany().then(t=>t[0])}async loadMany(){let t=this.expressionMap.of;if(!Dt.isObject(t)){const n=this.expressionMap.mainAlias.metadata;if(n.hasMultiplePrimaryKeys)throw new xe("Cannot load entity because only one primary key was specified, however entity contains multiple primary keys");t=n.primaryColumns[0].createValueMap(t)}return this.connection.relationLoader.load(this.expressionMap.relationMetadata,t,this.queryRunner)}}class Jt{static chunk(t,n){return Array.from(Array(Math.ceil(t.length/n)),(r,o)=>t.slice(o*n,o*n+n))}static splitClassesAndStrings(t){return[t.filter(n=>typeof n!="string"),t.filter(n=>typeof n=="string")]}static groupBy(t,n){return t.reduce((r,o)=>{const a=n(o);let i=r.find(s=>s.id===a);return i||(i={id:a,items:[]},r.push(i)),i.items.push(o),r},[])}static uniq(t,n){return t.reduce((r,o)=>{let a=!1;if(typeof n=="function"){const i=n(o);a=!!r.find(s=>n(s)===i)}else typeof n=="string"?a=!!r.find(i=>i[n]===o[n]):a=r.indexOf(o)!==-1;return a||r.push(o),r},[])}static isPlainObject(t){return t==null?!1:!t.constructor||t.constructor===Object}static mergeArrayKey(t,n,r,o){if(o.has(r)){t[n]=o.get(r);return}if(!(r instanceof Promise)){if(!this.isPlainObject(r)&&!Array.isArray(r)){t[n]=r;return}t[n]||(t[n]=Array.isArray(r)?[]:{}),o.set(r,t[n]),this.merge(t[n],r,o),o.delete(r)}}static mergeObjectKey(t,n,r,o){if(o.has(r)){Object.assign(t,{[n]:o.get(r)});return}if(!(r instanceof Promise)){if(!this.isPlainObject(r)&&!Array.isArray(r)){Object.assign(t,{[n]:r});return}t[n]||Object.assign(t,{[n]:Array.isArray(r)?[]:{}}),o.set(r,t[n]),this.merge(t[n],r,o),o.delete(r)}}static merge(t,n,r=new Map){if(this.isPlainObject(t)&&this.isPlainObject(n))for(const o of Object.keys(n))o!=="__proto__"&&this.mergeObjectKey(t,o,n[o],r);if(Array.isArray(t)&&Array.isArray(n))for(let o=0;o<n.length;o++)this.mergeArrayKey(t,o,n[o],r)}static mergeDeep(t,...n){if(!n.length)return t;for(const r of n)Jt.merge(t,r);return t}static deepCompare(...t){let n,r,o,a;if(arguments.length<1)return!0;for(n=1,r=arguments.length;n<r;n++)if(o=[],a=[],!this.compare2Objects(o,a,arguments[0],arguments[n]))return!1;return!0}static deepValue(t,n){const r=n.split(".");for(let o=0,a=r.length;o<a;o++)t=t[r[o]];return t}static replaceEmptyObjectsWithBooleans(t){for(let n in t)t[n]&&typeof t[n]=="object"&&(Object.keys(t[n]).length===0?t[n]=!0:this.replaceEmptyObjectsWithBooleans(t[n]))}static propertyPathsToTruthyObject(t){let n={};for(let r of t){const o=r.split(".");if(!o.length)continue;(!n[o[0]]||n[o[0]]===!0)&&(n[o[0]]={});let a=n[o[0]];for(let[i,s]of o.entries())i!==0&&(a[s]?a=a[s]:i===o.length-1?(a[s]={},a=null):(a[s]={},a=a[s]))}return this.replaceEmptyObjectsWithBooleans(n),n}static compareIds(t,n){return t==null||n===void 0||n===null?!1:(typeof t.id=="string"&&typeof n.id=="string"||typeof t.id=="number"&&typeof n.id=="number")&&Object.keys(t).length===1&&Object.keys(n).length===1?t.id===n.id:Jt.deepCompare(t,n)}static toBoolean(t){return typeof t=="boolean"?t:typeof t=="string"?t==="true"||t==="1":typeof t=="number"?t>0:!1}static zipObject(t,n){return t.reduce((r,o,a)=>(r[o]=n[a],r),{})}static isArraysEqual(t,n){return t.length!==n.length?!1:t.every(r=>n.indexOf(r)!==-1)}static areMutuallyExclusive(...t){return!t.some(n=>{const r=t.filter(o=>o!==n);return n.some(o=>r.some(a=>a.includes(o)))})}static parseSqlCheckExpression(t,n){const r=t.match(new RegExp(`"${n}" varchar CHECK\\s*\\(\\s*"${n}"\\s+IN\\s*`));if(r&&r.index){const o=t.substring(r.index+r[0].length);let a="",i="";const s=[];for(let c=0;c<o.length;c++){const l=o[c];switch(l){case",":a==""?(s.push(i),i=""):i+=l;break;case"'":a==l?o[c+1]===l?(i+=l,c+=1):a="":a=l;break;case")":if(a=="")return s.push(i),s;i+=l;break;default:a!=""&&(i+=l)}}}}static compare2Objects(t,n,r,o){let a;if(Number.isNaN(r)&&Number.isNaN(o)||r===o)return!0;if(r===null||o===null||r===void 0||o===void 0)return!1;if((typeof r.equals=="function"||typeof r.equals=="function")&&r.equals(o))return!0;if(typeof r=="function"&&typeof o=="function"||r instanceof Date&&o instanceof Date||r instanceof RegExp&&o instanceof RegExp||typeof r=="string"&&typeof o=="string"||typeof r=="number"&&typeof o=="number")return r.toString()===o.toString();if(!(typeof r=="object"&&typeof o=="object")||Object.prototype.isPrototypeOf.call(r,o)||Object.prototype.isPrototypeOf.call(o,r)||r.constructor!==o.constructor||r.prototype!==o.prototype||t.indexOf(r)>-1||n.indexOf(o)>-1)return!1;for(a in o)if(o.hasOwnProperty(a)!==r.hasOwnProperty(a)||typeof o[a]!=typeof r[a])return!1;for(a in r){if(o.hasOwnProperty(a)!==r.hasOwnProperty(a)||typeof o[a]!=typeof r[a])return!1;switch(typeof r[a]){case"object":case"function":if(t.push(r),n.push(o),!this.compare2Objects(t,n,r[a],o[a]))return!1;t.pop(),n.pop();break;default:if(r[a]!==o[a])return!1;break}}return!0}}class One{constructor(t,n,r,o,a){this.expressionMap=t,this.driver=n,this.rawRelationIdResults=r,this.rawRelationCountResults=o,this.queryRunner=a}transform(t,n){const r=this.group(t,n),o=[];return r.forEach(a=>{const i=this.transformRawResultsGroup(a,n);i!==void 0&&!Object.values(i).every(s=>s===null)&&o.push(i)}),o}group(t,n){const r=new Map,o=[];return n.metadata.tableType==="view"?o.push(...n.metadata.columns.map(a=>ye.buildAlias(this.driver,void 0,n.name,a.databaseName))):o.push(...n.metadata.primaryColumns.map(a=>ye.buildAlias(this.driver,void 0,n.name,a.databaseName))),t.forEach(a=>{const i=o.map(c=>{const l=a[c];return Wh.isBuffer(l)?l.toString("hex"):Dt.isObject(l)?JSON.stringify(l):l}).join("_"),s=r.get(i);s?s.push(a):r.set(i,[a])}),r}transformRawResultsGroup(t,n){let r=n.metadata;if(r.discriminatorColumn){const l=t.map(d=>d[ye.buildAlias(this.driver,void 0,n.name,n.metadata.discriminatorColumn.databaseName)]),u=r.childEntityMetadatas.find(d=>typeof l.find(f=>f===d.discriminatorValue)<"u");u&&(r=u)}let o=r.create(this.queryRunner,{fromDeserializer:!0,pojo:this.expressionMap.options.indexOf("create-pojo")!==-1});const a=this.transformColumns(t,n,o,r),i=this.transformJoins(t,o,n,r),s=this.transformRelationIds(t,n,o,r),c=this.transformRelationCounts(t,n,o);if(a||r.primaryColumns.filter(l=>l.isVirtual===!1).length===0&&(i||s||c))return o}transformColumns(t,n,r,o){let a=!1;return o.columns.forEach(i=>{if(o.childEntityMetadatas.length>0&&o.childEntityMetadatas.findIndex(c=>c.target===i.target)!==-1)return;const s=t[0][ye.buildAlias(this.driver,void 0,n.name,i.databaseName)];s===void 0||i.isVirtual||this.expressionMap.selects.find(c=>c.selection===n.name||c.selection===n.name+"."+i.propertyPath)&&(i.setEntityValue(r,this.driver.prepareHydratedValue(s,i)),s!==null&&(a=!0))}),a}transformJoins(t,n,r,o){let a=!1;return this.expressionMap.joinAttributes.forEach(i=>{if(!i.metadata||!i.isSelected||i.relation&&!o.relations.find(c=>c===i.relation))return;if(i.mapToProperty){if(i.mapToPropertyParentAlias!==r.name)return}else if(!i.relation||i.parentAlias!==r.name||i.relationPropertyPath!==i.relation.propertyPath)return;let s=this.transform(t,i.alias);s=i.isMany?s:s[0],s=!i.isMany&&s===void 0?null:s,s!==void 0&&(i.mapToPropertyPropertyName?n[i.mapToPropertyPropertyName]=s:i.relation.setEntityValue(n,s),a=!0)}),a}transformRelationIds(t,n,r,o){let a=!1;return this.rawRelationIdResults.forEach((i,s)=>{if(i.relationIdAttribute.parentAlias!==n.name)return;const c=i.relationIdAttribute.relation,l=this.createValueMapFromJoinColumns(c,i.relationIdAttribute.parentAlias,t);if(l==null)return;this.prepareDataForTransformRelationIds();const u=this.hashEntityIds(c,l),d=this.relationIdMaps[s][u]||[],f=i.relationIdAttribute.mapToPropertyPropertyPath.split("."),p=(y,m,v)=>{const b=y.shift();if(b&&y.length===0)return m[b]=v,m;if(b&&y.length>0)p(y,m[b],v);else return m};c.isOneToOne||c.isManyToOne?d[0]!==void 0&&(p(f,r,d[0]),a=!0):(p(f,r,d),a=a||d.length>0)}),a}transformRelationCounts(t,n,r){let o=!1;return this.rawRelationCountResults.filter(a=>a.relationCountAttribute.parentAlias===n.name).forEach(a=>{const i=a.relationCountAttribute.relation;let s;i.isOneToMany?s=i.inverseRelation.joinColumns[0].referencedColumn.databaseName:s=i.isOwning?i.joinColumns[0].referencedColumn.databaseName:i.inverseRelation.joinColumns[0].referencedColumn.databaseName;const c=t[0][ye.buildAlias(this.driver,void 0,n.name,s)];c!=null&&(r[a.relationCountAttribute.mapToPropertyPropertyName]=0,a.results.filter(l=>l.parentId===c).forEach(l=>{r[a.relationCountAttribute.mapToPropertyPropertyName]=parseInt(l.cnt),o=!0}))}),o}createValueMapFromJoinColumns(t,n,r){let o;return t.isManyToOne||t.isOneToOneOwner?o=t.entityMetadata.primaryColumns.map(a=>a):t.isOneToMany||t.isOneToOneNotOwner?o=t.inverseRelation.joinColumns.map(a=>a):t.isOwning?o=t.joinColumns.map(a=>a):o=t.inverseRelation.inverseJoinColumns.map(a=>a),o.reduce((a,i)=>(r.forEach(s=>{t.isManyToOne||t.isOneToOneOwner?a[i.databaseName]=this.driver.prepareHydratedValue(s[ye.buildAlias(this.driver,void 0,n,i.databaseName)],i):a[i.databaseName]=this.driver.prepareHydratedValue(s[ye.buildAlias(this.driver,void 0,n,i.referencedColumn.databaseName)],i.referencedColumn)}),a),{})}extractEntityPrimaryIds(t,n){let r;return t.isManyToOne||t.isOneToOneOwner?r=t.entityMetadata.primaryColumns.map(o=>o):t.isOneToMany||t.isOneToOneNotOwner?r=t.inverseRelation.joinColumns.map(o=>o):t.isOwning?r=t.joinColumns.map(o=>o):r=t.inverseRelation.inverseJoinColumns.map(o=>o),r.reduce((o,a)=>(o[a.databaseName]=n[a.databaseName],o),{})}prepareDataForTransformRelationIds(){this.relationIdMaps||(this.relationIdMaps=this.rawRelationIdResults.map(t=>{const n=t.relationIdAttribute.relation;let r;return n.isManyToOne||n.isOneToOneOwner?r=n.joinColumns:n.isOneToMany||n.isOneToOneNotOwner?r=n.inverseEntityMetadata.primaryColumns:n.isOwning?r=n.inverseJoinColumns:r=n.inverseRelation.joinColumns,t.results.reduce((o,a)=>{let i=r.reduce((s,c)=>{let l=a[c.databaseName];return n.isOneToMany||n.isOneToOneNotOwner?(c.isVirtual&&c.referencedColumn&&c.referencedColumn.propertyName!==c.propertyName&&(l=c.referencedColumn.createValueMap(l)),Jt.mergeDeep(s,c.createValueMap(l))):(!c.isPrimary&&c.referencedColumn.referencedColumn&&(l=c.referencedColumn.referencedColumn.createValueMap(l)),Jt.mergeDeep(s,c.referencedColumn.createValueMap(l)))},{});if(r.length===1&&!t.relationIdAttribute.disableMixedMap&&(n.isOneToMany||n.isOneToOneNotOwner?i=r[0].getEntityValue(i):i=r[0].referencedColumn.getEntityValue(i)),i!==void 0){const s=this.hashEntityIds(n,a);o[s]?o[s].push(i):o[s]=[i]}return o},{})}))}hashEntityIds(t,n){const r=this.extractEntityPrimaryIds(t,n);return JSON.stringify(r)}}let Nne=class{constructor(e,t,n){this.connection=e,this.queryRunner=t,this.relationIdAttributes=n}async load(e){const t=this.relationIdAttributes.map(async n=>{if(n.relation.isManyToOne||n.relation.isOneToOneOwner){if(n.queryBuilderFactory)throw new xe("Additional condition can not be used with ManyToOne or OneToOne owner relations.");const r={},o=e.map(a=>{const i={},s=[];n.relation.joinColumns.forEach(l=>{i[l.databaseName]=this.connection.driver.prepareHydratedValue(a[ye.buildAlias(this.connection.driver,void 0,n.parentAlias,l.databaseName)],l.referencedColumn);const u=`${l.databaseName}:${i[l.databaseName]}`;s.indexOf(u)===-1&&s.push(u)}),n.relation.entityMetadata.primaryColumns.forEach(l=>{i[l.databaseName]=this.connection.driver.prepareHydratedValue(a[ye.buildAlias(this.connection.driver,void 0,n.parentAlias,l.databaseName)],l);const u=`${l.databaseName}:${i[l.databaseName]}`;s.indexOf(u)===-1&&s.push(u)}),s.sort();const c=s.join("::");return r[c]?null:(r[c]=!0,i)}).filter(a=>a);return{relationIdAttribute:n,results:o}}else if(n.relation.isOneToMany||n.relation.isOneToOneNotOwner){const r=n.relation,o=r.isOwning?r.joinColumns:r.inverseRelation.joinColumns,a=r.inverseEntityMetadata.target,i=r.inverseEntityMetadata.tableName,s=n.alias||i,c={},l={},u=e.map((p,y)=>{const m=[],v={},b=o.map(_=>{const w=_.databaseName+y,j=p[ye.buildAlias(this.connection.driver,void 0,n.parentAlias,_.referencedColumn.databaseName)],E=`${s}:${_.propertyPath}:${j}`;return m.indexOf(E)!==-1?"":(m.push(E),v[w]=j,s+"."+_.propertyPath+" = :"+w)}).filter(_=>_).join(" AND ");m.sort();const x=m.join("::");return c[x]?"":(c[x]=!0,Object.assign(l,v),b)}).filter(p=>p).map(p=>"("+p+")").join(" OR ");if(!u)return{relationIdAttribute:n,results:[]};const d=this.connection.createQueryBuilder(this.queryRunner);Jt.uniq([...o,...r.inverseRelation.entityMetadata.primaryColumns],p=>p.propertyPath).forEach(p=>{d.addSelect(s+"."+p.propertyPath,p.databaseName)}),d.from(a,s).where("("+u+")").setParameters(l),n.queryBuilderFactory&&n.queryBuilderFactory(d);const f=await d.getRawMany();return f.forEach(p=>{o.forEach(y=>{p[y.databaseName]=this.connection.driver.prepareHydratedValue(p[y.databaseName],y.referencedColumn)}),r.inverseRelation.entityMetadata.primaryColumns.forEach(y=>{p[y.databaseName]=this.connection.driver.prepareHydratedValue(p[y.databaseName],y)})}),{relationIdAttribute:n,results:f}}else{const r=n.relation,o=r.isOwning?r.joinColumns:r.inverseRelation.inverseJoinColumns,a=r.isOwning?r.inverseJoinColumns:r.inverseRelation.joinColumns,i=n.junctionAlias,s=n.joinInverseSideMetadata.tableName,c=n.alias||s,l=r.isOwning?r.junctionEntityMetadata.tableName:r.inverseRelation.junctionEntityMetadata.tableName,u=e.map(x=>o.reduce((_,w)=>(_[w.propertyPath]=x[ye.buildAlias(this.connection.driver,void 0,n.parentAlias,w.referencedColumn.databaseName)],_),{}));if(u.length===0)return{relationIdAttribute:n,results:[]};const d={},f={},p=u.map((x,_)=>{const w=[],j={},E=Object.keys(x).map(O=>{const k=O+_,N=x[O],P=`${i}:${O}:${N}`;return w.indexOf(P)!==-1?"":(w.push(P),j[k]=N,i+"."+O+" = :"+k)}).filter(O=>O).join(" AND ");w.sort();const S=w.join("::");return f[S]?"":(f[S]=!0,Object.assign(d,j),E)}).filter(x=>x),y=a.map(x=>i+"."+x.propertyPath+" = "+c+"."+x.referencedColumn.propertyPath).join(" AND "),m=p.map(x=>"("+x+" AND "+y+")").join(" OR "),v=this.connection.createQueryBuilder(this.queryRunner);a.forEach(x=>{v.addSelect(i+"."+x.propertyPath,x.databaseName).addOrderBy(i+"."+x.propertyPath)}),o.forEach(x=>{v.addSelect(i+"."+x.propertyPath,x.databaseName).addOrderBy(i+"."+x.propertyPath)}),v.from(s,c).innerJoin(l,i,m).setParameters(d),n.queryBuilderFactory&&n.queryBuilderFactory(v);const b=await v.getRawMany();return b.forEach(x=>{[...o,...a].forEach(_=>{x[_.databaseName]=this.connection.driver.prepareHydratedValue(x[_.databaseName],_.referencedColumn)})}),{relationIdAttribute:n,results:b}}});return Promise.all(t)}};class Mne{constructor(t,n){this.connection=t,this.queryRunner=n}load(t,n,r){const o=Array.isArray(n)?n:[n],a=Array.isArray(r)?r:r?[r]:void 0;return t.isManyToMany?this.loadForManyToMany(t,o,a):t.isManyToOne||t.isOneToOneOwner?this.loadForManyToOneAndOneToOneOwner(t,o,a):this.loadForOneToManyAndOneToOneNotOwner(t,o,a)}async loadManyToManyRelationIdsAndGroup(t,n,r,o){const a=t.isManyToMany||t.isOneToMany,i=Array.isArray(n)?n:[n];if(!r&&(r=await this.connection.relationLoader.load(t,n,this.queryRunner,o),!r.length))return i.map(d=>({entity:d,related:a?[]:void 0}));const s=await this.load(t,n,r),c=Array.isArray(r)?r:[r];let l=[],u=[];return t.isManyToManyOwner?(l=t.junctionEntityMetadata.inverseColumns.map(d=>d.referencedColumn),u=t.junctionEntityMetadata.ownerColumns.map(d=>d.referencedColumn)):t.isManyToManyNotOwner?(l=t.junctionEntityMetadata.ownerColumns.map(d=>d.referencedColumn),u=t.junctionEntityMetadata.inverseColumns.map(d=>d.referencedColumn)):t.isManyToOne||t.isOneToOneOwner?(l=t.joinColumns.map(d=>d.referencedColumn),u=t.entityMetadata.primaryColumns):(t.isOneToMany||t.isOneToOneNotOwner)&&(l=t.inverseRelation.entityMetadata.primaryColumns,u=t.inverseRelation.joinColumns.map(d=>d.referencedColumn)),i.map(d=>{const f={entity:d,related:a?[]:void 0},p=s.filter(y=>u.every(m=>m.compareEntityValue(d,y[m.entityMetadata.name+"_"+m.propertyAliasName])));return p.length&&c.forEach(y=>{p.forEach(m=>{l.every(v=>v.compareEntityValue(y,m[ye.buildAlias(this.connection.driver,void 0,v.entityMetadata.name+"_"+t.propertyPath.replace(".","_")+"_"+v.propertyPath.replace(".","_"))]))&&(a?f.related.push(y):f.related=y)})}),f})}loadForManyToMany(t,n,r){const o=t.junctionEntityMetadata,a=o.name,i=t.isOwning?o.ownerColumns:o.inverseColumns,s=t.isOwning?o.inverseColumns:o.ownerColumns,c=this.connection.createQueryBuilder(this.queryRunner);i.forEach(f=>{const p=ye.buildAlias(this.connection.driver,void 0,f.referencedColumn.entityMetadata.name+"_"+f.referencedColumn.propertyPath.replace(".","_"));c.addSelect(a+"."+f.propertyPath,p)}),s.forEach(f=>{const p=ye.buildAlias(this.connection.driver,void 0,f.referencedColumn.entityMetadata.name+"_"+t.propertyPath.replace(".","_")+"_"+f.referencedColumn.propertyPath.replace(".","_"));c.addSelect(a+"."+f.propertyPath,p)});let l="";if(i.length===1){const f=n.map(p=>i[0].referencedColumn.getEntityValue(p));f.every(p=>typeof p=="number")?l=`${a}.${i[0].propertyPath} IN (${f.join(", ")})`:(c.setParameter("values1",f),l=a+"."+i[0].propertyPath+" IN (:...values1)")}else l="("+n.map((f,p)=>i.map(y=>{const m="entity1_"+p+"_"+y.propertyName;return c.setParameter(m,y.referencedColumn.getEntityValue(f)),a+"."+y.propertyPath+" = :"+m}).join(" AND ")).map(f=>"("+f+")").join(" OR ")+")";let u="";if(r)if(s.length===1){const f=r.map(p=>s[0].referencedColumn.getEntityValue(p));f.every(p=>typeof p=="number")?u=`${a}.${s[0].propertyPath} IN (${f.join(", ")})`:(c.setParameter("values2",f),u=a+"."+s[0].propertyPath+" IN (:...values2)")}else u="("+r.map((f,p)=>s.map(y=>{const m="entity2_"+p+"_"+y.propertyName;return c.setParameter(m,y.referencedColumn.getEntityValue(f)),a+"."+y.propertyPath+" = :"+m}).join(" AND ")).map(f=>"("+f+")").join(" OR ")+")";const d=[l,u].filter(f=>f.length>0).join(" AND ");return c.from(o.target,a).where(d).getRawMany()}loadForManyToOneAndOneToOneOwner(t,n,r){const o=t.entityMetadata.targetName,a=t.joinColumns.every(c=>!!t.entityMetadata.nonVirtualColumns.find(l=>l===c));if(r&&a){let c=[];if(n.forEach(l=>{let u={};t.entityMetadata.primaryColumns.forEach(d=>{const f=d.entityMetadata.name+"_"+d.propertyPath.replace(".","_");u[f]=d.getEntityValue(l)}),r.forEach(d=>{t.joinColumns.forEach(f=>{const p=f.getEntityValue(l),y=f.referencedColumn.getEntityValue(d);if(!(p===void 0||y===void 0)&&p===y){const m=f.referencedColumn.entityMetadata.name+"_"+t.propertyPath.replace(".","_")+"_"+f.referencedColumn.propertyPath.replace(".","_");u[m]=y}})}),Object.keys(u).length===t.entityMetadata.primaryColumns.length+t.joinColumns.length&&c.push(u)}),c.length===n.length)return Promise.resolve(c)}const i=this.connection.createQueryBuilder(this.queryRunner);t.entityMetadata.primaryColumns.forEach(c=>{const l=ye.buildAlias(this.connection.driver,void 0,c.entityMetadata.name+"_"+c.propertyPath.replace(".","_"));i.addSelect(o+"."+c.propertyPath,l)}),t.joinColumns.forEach(c=>{const l=ye.buildAlias(this.connection.driver,void 0,c.referencedColumn.entityMetadata.name+"_"+t.propertyPath.replace(".","_")+"_"+c.referencedColumn.propertyPath.replace(".","_"));i.addSelect(o+"."+c.propertyPath,l)});let s="";if(t.entityMetadata.primaryColumns.length===1){const c=n.map(l=>t.entityMetadata.primaryColumns[0].getEntityValue(l));c.every(l=>typeof l=="number")?s=`${o}.${t.entityMetadata.primaryColumns[0].propertyPath} IN (${c.join(", ")})`:(i.setParameter("values",c),s=o+"."+t.entityMetadata.primaryColumns[0].propertyPath+" IN (:...values)")}else s=n.map((c,l)=>t.entityMetadata.primaryColumns.map((u,d)=>{const f="entity"+l+"_"+d;return i.setParameter(f,u.getEntityValue(c)),o+"."+u.propertyPath+" = :"+f}).join(" AND ")).map(c=>"("+c+")").join(" OR ");return i.from(t.entityMetadata.target,o).where(s).getRawMany()}loadForOneToManyAndOneToOneNotOwner(t,n,r){if(t=t.inverseRelation,t.entityMetadata.primaryColumns.length===t.joinColumns.length&&t.entityMetadata.primaryColumns.every(s=>t.joinColumns.indexOf(s)!==-1))return Promise.resolve(n.map(s=>{const c={};return t.joinColumns.forEach(function(l){const u=l.referencedColumn.getEntityValue(s),d=l.referencedColumn.entityMetadata.name+"_"+l.referencedColumn.propertyPath.replace(".","_"),f=l.entityMetadata.name+"_"+t.inverseRelation.propertyPath.replace(".","_")+"_"+l.propertyPath.replace(".","_");c[d]=u,c[f]=u}),c}));const o=t.entityMetadata.targetName,a=this.connection.createQueryBuilder(this.queryRunner);t.entityMetadata.primaryColumns.forEach(s=>{const c=ye.buildAlias(this.connection.driver,void 0,s.entityMetadata.name+"_"+t.inverseRelation.propertyPath.replace(".","_")+"_"+s.propertyPath.replace(".","_"));a.addSelect(o+"."+s.propertyPath,c)}),t.joinColumns.forEach(s=>{const c=ye.buildAlias(this.connection.driver,void 0,s.referencedColumn.entityMetadata.name+"_"+s.referencedColumn.propertyPath.replace(".","_"));a.addSelect(o+"."+s.propertyPath,c)});let i="";if(t.joinColumns.length===1){const s=n.map(c=>t.joinColumns[0].referencedColumn.getEntityValue(c));s.every(c=>typeof c=="number")?i=`${o}.${t.joinColumns[0].propertyPath} IN (${s.join(", ")})`:(a.setParameter("values",s),i=o+"."+t.joinColumns[0].propertyPath+" IN (:...values)")}else i=n.map((s,c)=>t.joinColumns.map((l,u)=>{const d="entity"+c+"_"+u;return a.setParameter(d,l.referencedColumn.getEntityValue(s)),o+"."+l.propertyPath+" = :"+d}).join(" AND ")).map(s=>"("+s+")").join(" OR ");return a.from(t.entityMetadata.target,o).where(i).getRawMany()}}class kne{constructor(t){this.expressionMap=t}transform(){this.expressionMap.mainAlias&&this.expressionMap.mainAlias.metadata.relationIds.forEach(t=>{const n=this.metadataToAttribute(this.expressionMap.mainAlias.name,t);this.expressionMap.relationIdAttributes.push(n)}),this.expressionMap.joinAttributes.forEach(t=>{!t.metadata||t.metadata.isJunction||t.metadata.relationIds.forEach(n=>{const r=this.metadataToAttribute(t.alias.name,n);this.expressionMap.relationIdAttributes.push(r)})})}metadataToAttribute(t,n){return new px(this.expressionMap,{relationName:t+"."+n.relation.propertyName,mapToProperty:t+"."+n.propertyName,alias:n.alias,queryBuilderFactory:n.queryBuilderFactory})}}class Pne{constructor(t,n,r){this.connection=t,this.queryRunner=n,this.relationCountAttributes=r}async load(t){const n=(o,a,i)=>i.indexOf(o)===a,r=this.relationCountAttributes.map(async o=>{if(o.relation.isOneToMany){const a=o.relation,i=a.inverseRelation,s=i.joinColumns[0].referencedColumn.propertyName,c=a.inverseEntityMetadata.target,l=a.inverseEntityMetadata.tableName,u=o.alias||l,d=i.propertyName;let f=t.map(y=>y[o.parentAlias+"_"+s]).filter(y=>!!y);if(f=f.filter(n),f.length===0)return{relationCountAttribute:o,results:[]};const p=this.connection.createQueryBuilder(this.queryRunner);return p.select(u+"."+d,"parentId").addSelect("COUNT(*)","cnt").from(c,u).where(u+"."+d+" IN (:...ids)").addGroupBy(u+"."+d).setParameter("ids",f),o.queryBuilderFactory&&o.queryBuilderFactory(p),{relationCountAttribute:o,results:await p.getRawMany()}}else{let a,i,s,c;o.relation.isOwning?(a=o.relation.joinColumns[0].referencedColumn.databaseName,i=o.relation.inverseJoinColumns[0].referencedColumn.databaseName,s=o.relation.junctionEntityMetadata.columns[0],c=o.relation.junctionEntityMetadata.columns[1]):(a=o.relation.inverseRelation.inverseJoinColumns[0].referencedColumn.databaseName,i=o.relation.inverseRelation.joinColumns[0].referencedColumn.databaseName,s=o.relation.junctionEntityMetadata.columns[1],c=o.relation.junctionEntityMetadata.columns[0]);let l=t.map(v=>v[o.parentAlias+"_"+a]).filter(v=>!!v);if(l=l.filter(n),l.length===0)return{relationCountAttribute:o,results:[]};const u=o.junctionAlias,d=o.joinInverseSideMetadata.tableName,f=o.alias||d,p=o.relation.junctionEntityMetadata.tableName,y=u+"."+s.propertyName+" IN ("+l.map(v=>isNaN(v)?"'"+v+"'":v)+") AND "+u+"."+c.propertyName+" = "+f+"."+i,m=this.connection.createQueryBuilder(this.queryRunner);return m.select(u+"."+s.propertyName,"parentId").addSelect("COUNT("+m.escape(f)+"."+m.escape(i)+")","cnt").from(d,f).innerJoin(p,u,y).addGroupBy(u+"."+s.propertyName),o.queryBuilderFactory&&o.queryBuilderFactory(m),{relationCountAttribute:o,results:await m.getRawMany()}}});return Promise.all(r)}}class Ane{constructor(t){this.expressionMap=t}transform(){this.expressionMap.mainAlias&&this.expressionMap.mainAlias.metadata.relationCounts.forEach(t=>{const n=this.metadataToAttribute(this.expressionMap.mainAlias.name,t);this.expressionMap.relationCountAttributes.push(n)}),this.expressionMap.joinAttributes.forEach(t=>{!t.metadata||t.metadata.isJunction||t.metadata.relationCounts.forEach(n=>{const r=this.metadataToAttribute(t.alias.name,n);this.expressionMap.relationCountAttributes.push(r)})})}metadataToAttribute(t,n){return new hx(this.expressionMap,{relationName:t+"."+n.relation.propertyName,mapToProperty:t+"."+n.propertyName,alias:n.alias,queryBuilderFactory:n.queryBuilderFactory})}}class vx{static isFindOneOptions(t){const n=t;return n&&(Array.isArray(n.select)||Array.isArray(n.relations)||typeof n.select=="object"||typeof n.relations=="object"||typeof n.where=="object"||typeof n.join=="object"||typeof n.order=="object"||typeof n.cache=="object"||typeof n.cache=="boolean"||typeof n.cache=="number"||typeof n.comment=="string"||typeof n.lock=="object"||typeof n.loadRelationIds=="object"||typeof n.loadRelationIds=="boolean"||typeof n.loadEagerRelations=="boolean"||typeof n.withDeleted=="boolean"||typeof n.relationLoadStrategy=="string"||typeof n.transaction=="boolean")}static isFindManyOptions(t){const n=t;return n&&(this.isFindOneOptions(n)||typeof n.skip=="number"||typeof n.take=="number"||typeof n.skip=="string"||typeof n.take=="string")}static extractFindManyOptionsAlias(t){if(this.isFindManyOptions(t)&&t.join)return t.join.alias}static applyOptionsToTreeQueryBuilder(t,n){if(n!=null&&n.relations){const r=[...n.relations];if(vx.applyRelationsRecursively(t,r,t.expressionMap.mainAlias.name,t.expressionMap.mainAlias.metadata,""),r.length>0)throw new nne(r)}return t}static applyRelationsRecursively(t,n,r,o,a){let i=[];if(a){const s=new RegExp("^"+a.replace(".","\\.")+"\\.");i=n.filter(c=>c.match(s)).map(c=>o.findRelationWithPropertyPath(c.replace(s,""))).filter(c=>c)}else i=n.map(s=>o.findRelationWithPropertyPath(s)).filter(s=>s);i.forEach(s=>{let c=ye.buildAlias(t.connection.driver,{joiner:"__"},r,s.propertyPath);const l=r+"."+s.propertyPath;t.expressionMap.relationLoadStrategy==="query"?t.concatRelationMetadata(s):t.leftJoinAndSelect(l,c),n.splice(n.indexOf(a?a+"."+s.propertyPath:s.propertyPath),1);let u,d;if(t.expressionMap.relationLoadStrategy==="query")u=s.inverseEntityMetadata,d=c;else{const f=t.expressionMap.joinAttributes.find(p=>p.entityOrProperty===l);u=f.metadata,d=f.alias.name}if(!d||!u)throw new Dr(s.propertyPath,o);if(this.applyRelationsRecursively(t,n,d,u,a?a+"."+s.propertyPath:s.propertyPath),t.expressionMap.relationLoadStrategy==="join"){const f=o.relations.find(p=>p.propertyName===s.propertyPath);f&&this.joinEagerRelations(t,c,f.inverseEntityMetadata)}})}static joinEagerRelations(t,n,r){r.eagerRelations.forEach(o=>{let a=ye.buildAlias(t.connection.driver,{joiner:"__"},n,o.propertyName),i=!0;for(const l of t.expressionMap.joinAttributes)if(!(l.condition!==void 0||l.mapToProperty!==void 0||l.isMappingMany!==void 0||l.direction!=="LEFT"||l.entityOrProperty!==`${n}.${o.propertyPath}`)){i=!1,a=l.alias.name;break}const s=!!t.expressionMap.joinAttributes.find(l=>l.alias.name===a);i&&!s&&t.leftJoin(n+"."+o.propertyPath,a);let c=!0;for(const l of t.expressionMap.selects)if(!(l.aliasName!==void 0||l.virtual!==void 0||l.selection!==a)){c=!1;break}c&&t.addSelect(a),this.joinEagerRelations(t,a,o.inverseEntityMetadata)})}}class bx extends kt{constructor(){super(...arguments),this["@instanceof"]=Symbol.for("SelectQueryBuilder"),this.findOptions={},this.selects=[],this.joins=[],this.conditions="",this.orderBys=[],this.relationMetadatas=[]}getQuery(){let t=this.createComment();return t+=this.createCteExpression(),t+=this.createSelectExpression(),t+=this.createJoinExpression(),t+=this.createWhereExpression(),t+=this.createGroupByExpression(),t+=this.createHavingExpression(),t+=this.createOrderByExpression(),t+=this.createLimitOffsetExpression(),t+=this.createLockExpression(),t=t.trim(),this.expressionMap.subQuery&&(t="("+t+")"),this.replacePropertyNamesForTheWholeQuery(t)}setFindOptions(t){return this.findOptions=t,this.applyFindOptions(),this}subQuery(){const t=this.createQueryBuilder();return t.expressionMap.subQuery=!0,t.parentQueryBuilder=this,t}select(t,n){if(this.expressionMap.queryType="select",Array.isArray(t))this.expressionMap.selects=t.map(r=>({selection:r}));else if(typeof t=="function"){const r=t(this.subQuery());this.setParameters(r.getParameters()),this.expressionMap.selects.push({selection:r.getQuery(),aliasName:n})}else t&&(this.expressionMap.selects=[{selection:t,aliasName:n}]);return this}addSelect(t,n){if(!t)return this;if(Array.isArray(t))this.expressionMap.selects=this.expressionMap.selects.concat(t.map(r=>({selection:r})));else if(typeof t=="function"){const r=t(this.subQuery());this.setParameters(r.getParameters()),this.expressionMap.selects.push({selection:r.getQuery(),aliasName:n})}else t&&this.expressionMap.selects.push({selection:t,aliasName:n});return this}maxExecutionTime(t){return this.expressionMap.maxExecutionTime=t,this}distinct(t=!0){return this.expressionMap.selectDistinct=t,this}distinctOn(t){return this.expressionMap.selectDistinctOn=t,this}fromDummy(){return this.from(this.connection.driver.dummyTableName??"(SELECT 1 AS dummy_column)","dummy_table")}from(t,n){const r=this.createFromAlias(t,n);return this.expressionMap.setMainAlias(r),this}addFrom(t,n){const r=this.createFromAlias(t,n);return this.expressionMap.mainAlias||this.expressionMap.setMainAlias(r),this}innerJoin(t,n,r,o){return this.join("INNER",t,n,r,o),this}leftJoin(t,n,r,o){return this.join("LEFT",t,n,r,o),this}innerJoinAndSelect(t,n,r,o){return this.addSelect(n),this.innerJoin(t,n,r,o),this}leftJoinAndSelect(t,n,r,o){return this.addSelect(n),this.leftJoin(t,n,r,o),this}innerJoinAndMapMany(t,n,r,o,a){return this.addSelect(r),this.join("INNER",n,r,o,a,t,!0),this}innerJoinAndMapOne(t,n,r,o,a,i){return this.addSelect(r),this.join("INNER",n,r,o,a,t,!1,i),this}leftJoinAndMapMany(t,n,r,o,a){return this.addSelect(r),this.join("LEFT",n,r,o,a,t,!0),this}leftJoinAndMapOne(t,n,r,o,a,i){return this.addSelect(r),this.join("LEFT",n,r,o,a,t,!1,i),this}loadRelationIdAndMap(t,n,r,o){const a=new px(this.expressionMap);return a.mapToProperty=t,a.relationName=n,typeof r=="string"&&(a.alias=r),typeof r=="object"&&r.disableMixedMap&&(a.disableMixedMap=!0),a.queryBuilderFactory=o,this.expressionMap.relationIdAttributes.push(a),a.relation.junctionEntityMetadata&&this.expressionMap.createAlias({type:"other",name:a.junctionAlias,metadata:a.relation.junctionEntityMetadata}),this}loadRelationCountAndMap(t,n,r,o){const a=new hx(this.expressionMap);return a.mapToProperty=t,a.relationName=n,a.alias=r,a.queryBuilderFactory=o,this.expressionMap.relationCountAttributes.push(a),this.expressionMap.createAlias({type:"other",name:a.junctionAlias}),a.relation.junctionEntityMetadata&&this.expressionMap.createAlias({type:"other",name:a.junctionAlias,metadata:a.relation.junctionEntityMetadata}),this}loadAllRelationIds(t){return this.expressionMap.mainAlias.metadata.relations.forEach(n=>{t!==void 0&&t.relations!==void 0&&t.relations.indexOf(n.propertyPath)===-1||this.loadRelationIdAndMap(this.expressionMap.mainAlias.name+"."+n.propertyPath,this.expressionMap.mainAlias.name+"."+n.propertyPath,t)}),this}where(t,n){this.expressionMap.wheres=[];const r=this.getWhereCondition(t);return r&&(this.expressionMap.wheres=[{type:"simple",condition:r}]),n&&this.setParameters(n),this}andWhere(t,n){return this.expressionMap.wheres.push({type:"and",condition:this.getWhereCondition(t)}),n&&this.setParameters(n),this}orWhere(t,n){return this.expressionMap.wheres.push({type:"or",condition:this.getWhereCondition(t)}),n&&this.setParameters(n),this}whereExists(t){return this.where(...this.getExistsCondition(t))}andWhereExists(t){return this.andWhere(...this.getExistsCondition(t))}orWhereExists(t){return this.orWhere(...this.getExistsCondition(t))}whereInIds(t){return this.where(this.getWhereInIdsCondition(t))}andWhereInIds(t){return this.andWhere(this.getWhereInIdsCondition(t))}orWhereInIds(t){return this.orWhere(this.getWhereInIdsCondition(t))}having(t,n){return this.expressionMap.havings.push({type:"simple",condition:t}),n&&this.setParameters(n),this}andHaving(t,n){return this.expressionMap.havings.push({type:"and",condition:t}),n&&this.setParameters(n),this}orHaving(t,n){return this.expressionMap.havings.push({type:"or",condition:t}),n&&this.setParameters(n),this}groupBy(t){return t?this.expressionMap.groupBys=[t]:this.expressionMap.groupBys=[],this}addGroupBy(t){return this.expressionMap.groupBys.push(t),this}timeTravelQuery(t){return this.connection.driver.options.type==="cockroachdb"&&(t===void 0?this.expressionMap.timeTravel="follower_read_timestamp()":this.expressionMap.timeTravel=t),this}orderBy(t,n="ASC",r){if(n!==void 0&&n!=="ASC"&&n!=="DESC")throw new xe('SelectQueryBuilder.addOrderBy "order" can accept only "ASC" and "DESC" values.');if(r!==void 0&&r!=="NULLS FIRST"&&r!=="NULLS LAST")throw new xe('SelectQueryBuilder.addOrderBy "nulls" can accept only "NULLS FIRST" and "NULLS LAST" values.');return t?typeof t=="object"?this.expressionMap.orderBys=t:r?this.expressionMap.orderBys={[t]:{order:n,nulls:r}}:this.expressionMap.orderBys={[t]:n}:this.expressionMap.orderBys={},this}addOrderBy(t,n="ASC",r){if(n!==void 0&&n!=="ASC"&&n!=="DESC")throw new xe('SelectQueryBuilder.addOrderBy "order" can accept only "ASC" and "DESC" values.');if(r!==void 0&&r!=="NULLS FIRST"&&r!=="NULLS LAST")throw new xe('SelectQueryBuilder.addOrderBy "nulls" can accept only "NULLS FIRST" and "NULLS LAST" values.');return r?this.expressionMap.orderBys[t]={order:n,nulls:r}:this.expressionMap.orderBys[t]=n,this}limit(t){if(this.expressionMap.limit=this.normalizeNumber(t),this.expressionMap.limit!==void 0&&isNaN(this.expressionMap.limit))throw new xe('Provided "limit" value is not a number. Please provide a numeric value.');return this}offset(t){if(this.expressionMap.offset=this.normalizeNumber(t),this.expressionMap.offset!==void 0&&isNaN(this.expressionMap.offset))throw new xe('Provided "offset" value is not a number. Please provide a numeric value.');return this}take(t){if(this.expressionMap.take=this.normalizeNumber(t),this.expressionMap.take!==void 0&&isNaN(this.expressionMap.take))throw new xe('Provided "take" value is not a number. Please provide a numeric value.');return this}skip(t){if(this.expressionMap.skip=this.normalizeNumber(t),this.expressionMap.skip!==void 0&&isNaN(this.expressionMap.skip))throw new xe('Provided "skip" value is not a number. Please provide a numeric value.');return this}useIndex(t){return this.expressionMap.useIndex=t,this}setLock(t,n,r){return this.expressionMap.lockMode=t,this.expressionMap.lockVersion=n,this.expressionMap.lockTables=r,this}setOnLocked(t){return this.expressionMap.onLocked=t,this}withDeleted(){return this.expressionMap.withDeleted=!0,this}async getRawOne(){return(await this.getRawMany())[0]}async getRawMany(){if(this.expressionMap.lockMode==="optimistic")throw new bl;this.expressionMap.queryEntity=!1;const t=this.obtainQueryRunner();let n=!1;try{this.expressionMap.useTransaction===!0&&t.isTransactionActive===!1&&(await t.startTransaction(),n=!0);const r=await this.loadRawResults(t);return n&&await t.commitTransaction(),r}catch(r){if(n)try{await t.rollbackTransaction()}catch{}throw r}finally{t!==this.queryRunner&&await t.release()}}async getRawAndEntities(){const t=this.obtainQueryRunner();let n=!1;try{this.expressionMap.useTransaction===!0&&t.isTransactionActive===!1&&(await t.startTransaction(),n=!0),this.expressionMap.queryEntity=!0;const r=await this.executeEntitiesAndRawResults(t);return n&&await t.commitTransaction(),r}catch(r){if(n)try{await t.rollbackTransaction()}catch{}throw r}finally{t!==this.queryRunner&&await t.release()}}async getOne(){const t=(await this.getRawAndEntities()).entities[0];if(t&&this.expressionMap.lockMode==="optimistic"&&this.expressionMap.lockVersion){const n=this.expressionMap.mainAlias.metadata;if(this.expressionMap.lockVersion instanceof Date){const r=n.updateDateColumn.getEntityValue(t);if(r.getTime()!==this.expressionMap.lockVersion.getTime())throw new qR(n.name,this.expressionMap.lockVersion,r)}else{const r=n.versionColumn.getEntityValue(t);if(r!==this.expressionMap.lockVersion)throw new qR(n.name,this.expressionMap.lockVersion,r)}}return t===void 0?null:t}async getOneOrFail(){const t=await this.getOne();if(!t)throw new Gte(this.expressionMap.mainAlias.target,this.expressionMap.parameters);return t}async getMany(){if(this.expressionMap.lockMode==="optimistic")throw new bl;return(await this.getRawAndEntities()).entities}async getCount(){if(this.expressionMap.lockMode==="optimistic")throw new bl;const t=this.obtainQueryRunner();let n=!1;try{this.expressionMap.useTransaction===!0&&t.isTransactionActive===!1&&(await t.startTransaction(),n=!0),this.expressionMap.queryEntity=!1;const r=await this.executeCountQuery(t);return n&&await t.commitTransaction(),r}catch(r){if(n)try{await t.rollbackTransaction()}catch{}throw r}finally{t!==this.queryRunner&&await t.release()}}async getExists(){if(this.expressionMap.lockMode==="optimistic")throw new bl;const t=this.obtainQueryRunner();let n=!1;try{this.expressionMap.useTransaction===!0&&t.isTransactionActive===!1&&(await t.startTransaction(),n=!0),this.expressionMap.queryEntity=!1;const r=await this.executeExistsQuery(t);return n&&await t.commitTransaction(),r}catch(r){if(n)try{await t.rollbackTransaction()}catch{}throw r}finally{t!==this.queryRunner&&await t.release()}}async getManyAndCount(){if(this.expressionMap.lockMode==="optimistic")throw new bl;const t=this.obtainQueryRunner();let n=!1;try{this.expressionMap.useTransaction===!0&&t.isTransactionActive===!1&&(await t.startTransaction(),n=!0),this.expressionMap.queryEntity=!0;const r=await this.executeEntitiesAndRawResults(t);this.expressionMap.queryEntity=!1;const o=this.expressionMap.cacheId;this.expressionMap.cacheId=o&&`${o}-count`;const a=await this.executeCountQuery(t),i=[r.entities,a];return n&&await t.commitTransaction(),i}catch(r){if(n)try{await t.rollbackTransaction()}catch{}throw r}finally{t!==this.queryRunner&&await t.release()}}async stream(){this.expressionMap.queryEntity=!1;const[t,n]=this.getQueryAndParameters(),r=this.obtainQueryRunner();let o=!1;try{this.expressionMap.useTransaction===!0&&r.isTransactionActive===!1&&(await r.startTransaction(),o=!0);const a=()=>{if(r!==this.queryRunner)return r.release()},i=r.stream(t,n,a,a);return o&&await r.commitTransaction(),i}catch(a){if(o)try{await r.rollbackTransaction()}catch{}throw a}}cache(t,n){return typeof t=="boolean"?this.expressionMap.cache=t:typeof t=="number"?(this.expressionMap.cache=!0,this.expressionMap.cacheDuration=t):(typeof t=="string"||typeof t=="number")&&(this.expressionMap.cache=!0,this.expressionMap.cacheId=t),n&&(this.expressionMap.cacheDuration=n),this}setOption(t){return this.expressionMap.options.push(t),this}join(t,n,r,o,a,i,s,c){a&&this.setParameters(a);const l=new cI(this.connection,this.expressionMap);l.direction=t,l.mapAsEntity=c,l.mapToProperty=i,l.isMappingMany=s,l.entityOrProperty=n,l.condition=o,this.expressionMap.joinAttributes.push(l);const u=l.metadata;if(u){if(u.deleteDateColumn&&!this.expressionMap.withDeleted){const d=`${r}.${u.deleteDateColumn.propertyName} IS NULL`;l.condition=l.condition?` ${l.condition} AND ${d}`:`${d}`}l.alias=this.expressionMap.createAlias({type:"join",name:r,metadata:u}),l.relation&&l.relation.junctionEntityMetadata&&this.expressionMap.createAlias({type:"join",name:l.junctionAlias,metadata:l.relation.junctionEntityMetadata})}else{let d="";if(typeof n=="function"){const p=n(this.subQuery());this.setParameters(p.getParameters()),d=p.getQuery()}else d=n;const f=typeof n=="function"||n.substr(0,1)==="("&&n.substr(-1)===")";l.alias=this.expressionMap.createAlias({type:"join",name:r,tablePath:f===!1?n:void 0,subQuery:f===!0?d:void 0})}}createSelectExpression(){if(!this.expressionMap.mainAlias)throw new xe("Cannot build query because main alias is not set (call qb#from method)");const t=[],n=[];if(this.expressionMap.mainAlias.hasMetadata){const s=this.expressionMap.mainAlias.metadata;t.push(...this.buildEscapedEntityColumnSelects(this.expressionMap.mainAlias.name,s)),n.push(...this.findEntityColumnSelects(this.expressionMap.mainAlias.name,s))}this.expressionMap.joinAttributes.forEach(s=>{if(s.metadata)t.push(...this.buildEscapedEntityColumnSelects(s.alias.name,s.metadata)),n.push(...this.findEntityColumnSelects(s.alias.name,s.metadata));else if(this.expressionMap.selects.some(c=>c.selection===s.alias.name)){t.push({selection:this.escape(s.alias.name)+".*"});const c=this.expressionMap.selects.find(l=>l.selection===s.alias.name);n.push(c)}}),this.expressionMap.selects.filter(s=>n.indexOf(s)===-1).forEach(s=>t.push({selection:this.replacePropertyNames(s.selection),aliasName:s.aliasName})),t.length===0&&t.push({selection:"*"});let r="";this.expressionMap.useIndex&&ye.isMySQLFamily(this.connection.driver)&&(r=` USE INDEX (${this.expressionMap.useIndex})`);const o=this.expressionMap.aliases.filter(s=>s.type==="from"&&(s.tablePath||s.subQuery)).map(s=>s.subQuery?s.subQuery+" "+this.escape(s.name):this.getTableName(s.tablePath)+" "+this.escape(s.name)),a=this.createSelectDistinctExpression(),i=t.map(s=>s.selection+(s.aliasName?" AS "+this.escape(s.aliasName):"")).join(", ");return a+i+" FROM "+o.join(", ")+this.createTableLockExpression()+r}createSelectDistinctExpression(){const{selectDistinct:t,selectDistinctOn:n,maxExecutionTime:r}=this.expressionMap,{driver:o}=this.connection;let a="SELECT ";return r>0&&ye.isMySQLFamily(o)&&(a+=`/*+ MAX_EXECUTION_TIME(${this.expressionMap.maxExecutionTime}) */ `),ye.isPostgresFamily(o)&&n.length>0?a=`SELECT DISTINCT ON (${n.map(i=>this.replacePropertyNames(i)).join(", ")}) `:t&&(a="SELECT DISTINCT "),a}createJoinExpression(){return this.expressionMap.joinAttributes.map(t=>{const n=t.relation,r=t.tablePath,o=t.alias.name;let a=t.condition?" AND ("+t.condition+")":"";const i=t.parentAlias;if(!i||!n){const s=t.alias.subQuery?t.alias.subQuery:this.getTableName(r);return" "+t.direction+" JOIN "+s+" "+this.escape(o)+this.createTableLockExpression()+(t.condition?" ON "+this.replacePropertyNames(t.condition):"")}if(n.isManyToOne||n.isOneToOneOwner){const s=n.joinColumns.map(c=>o+"."+c.referencedColumn.propertyPath+"="+i+"."+n.propertyPath+"."+c.referencedColumn.propertyPath).join(" AND ");return" "+t.direction+" JOIN "+this.getTableName(r)+" "+this.escape(o)+this.createTableLockExpression()+" ON "+this.replacePropertyNames(s+a)}else if(n.isOneToMany||n.isOneToOneNotOwner){const s=n.inverseRelation.joinColumns.map(c=>(n.inverseEntityMetadata.tableType==="entity-child"&&n.inverseEntityMetadata.discriminatorColumn&&(a+=" AND "+o+"."+n.inverseEntityMetadata.discriminatorColumn.databaseName+"='"+n.inverseEntityMetadata.discriminatorValue+"'"),o+"."+n.inverseRelation.propertyPath+"."+c.referencedColumn.propertyPath+"="+i+"."+c.referencedColumn.propertyPath)).join(" AND ");if(!s)throw new xe(`Relation ${n.entityMetadata.name}.${n.propertyName} does not have join columns.`);return" "+t.direction+" JOIN "+this.getTableName(r)+" "+this.escape(o)+this.createTableLockExpression()+" ON "+this.replacePropertyNames(s+a)}else{const s=n.junctionEntityMetadata.tablePath,c=t.junctionAlias;let l="",u="";return n.isOwning?(l=n.joinColumns.map(d=>c+"."+d.propertyPath+"="+i+"."+d.referencedColumn.propertyPath).join(" AND "),u=n.inverseJoinColumns.map(d=>o+"."+d.referencedColumn.propertyPath+"="+c+"."+d.propertyPath).join(" AND ")):(l=n.inverseRelation.inverseJoinColumns.map(d=>c+"."+d.propertyPath+"="+i+"."+d.referencedColumn.propertyPath).join(" AND "),u=n.inverseRelation.joinColumns.map(d=>o+"."+d.referencedColumn.propertyPath+"="+c+"."+d.propertyPath).join(" AND "))," "+t.direction+" JOIN "+this.getTableName(s)+" "+this.escape(c)+this.createTableLockExpression()+" ON "+this.replacePropertyNames(l)+" "+t.direction+" JOIN "+this.getTableName(r)+" "+this.escape(o)+this.createTableLockExpression()+" ON "+this.replacePropertyNames(u+a)}}).join(" ")}createGroupByExpression(){return!this.expressionMap.groupBys||!this.expressionMap.groupBys.length?"":" GROUP BY "+this.replacePropertyNames(this.expressionMap.groupBys.join(", "))}createOrderByExpression(){const t=this.expressionMap.allOrderBys;return Object.keys(t).length===0?"":" ORDER BY "+Object.keys(t).map(n=>{const r=typeof t[n]=="string"?t[n]:t[n].order+" "+t[n].nulls,o=this.expressionMap.selects.find(a=>a.selection===n);if(o&&!o.aliasName&&n.indexOf(".")!==-1){const a=n.split("."),i=a[0],s=a.slice(1).join("."),c=this.expressionMap.aliases.find(l=>l.name===i);if(c){const l=c.metadata.findColumnWithPropertyPath(s);if(l){const u=ye.buildAlias(this.connection.driver,void 0,i,l.databaseName);return this.escape(u)+" "+r}}}return this.replacePropertyNames(n)+" "+r}).join(", ")}createLimitOffsetExpression(){let t=this.expressionMap.offset,n=this.expressionMap.limit;if(!t&&!n&&this.expressionMap.joinAttributes.length===0&&(t=this.expressionMap.skip,n=this.expressionMap.take),this.connection.driver.options.type==="mssql"){let r="";if((n||t)&&Object.keys(this.expressionMap.allOrderBys).length<=0&&(r=" ORDER BY (SELECT NULL)"),n&&t)return r+" OFFSET "+t+" ROWS FETCH NEXT "+n+" ROWS ONLY";if(n)return r+" OFFSET 0 ROWS FETCH NEXT "+n+" ROWS ONLY";if(t)return r+" OFFSET "+t+" ROWS"}else if(ye.isMySQLFamily(this.connection.driver)||this.connection.driver.options.type==="aurora-mysql"||this.connection.driver.options.type==="sap"||this.connection.driver.options.type==="spanner"){if(n&&t)return" LIMIT "+n+" OFFSET "+t;if(n)return" LIMIT "+n;if(t)throw new one}else if(ye.isSQLiteFamily(this.connection.driver)){if(n&&t)return" LIMIT "+n+" OFFSET "+t;if(n)return" LIMIT "+n;if(t)return" LIMIT -1 OFFSET "+t}else if(this.connection.driver.options.type==="oracle"){if(n&&t)return" OFFSET "+t+" ROWS FETCH NEXT "+n+" ROWS ONLY";if(n)return" FETCH NEXT "+n+" ROWS ONLY";if(t)return" OFFSET "+t+" ROWS"}else{if(n&&t)return" LIMIT "+n+" OFFSET "+t;if(n)return" LIMIT "+n;if(t)return" OFFSET "+t}return""}createTableLockExpression(){if(this.connection.driver.options.type==="mssql")switch(this.expressionMap.lockMode){case"pessimistic_read":return" WITH (HOLDLOCK, ROWLOCK)";case"pessimistic_write":return" WITH (UPDLOCK, ROWLOCK)";case"dirty_read":return" WITH (NOLOCK)"}return""}createLockExpression(){const t=this.connection.driver;let n="";if(this.expressionMap.lockTables){if(!(ye.isPostgresFamily(t)||t.options.type==="cockroachdb"))throw new xe("Lock tables not supported in selected driver");if(this.expressionMap.lockTables.length<1)throw new xe("lockTables cannot be an empty array");n=" OF "+this.expressionMap.lockTables.join(", ")}let r="";switch(this.expressionMap.onLocked==="nowait"?r=" NOWAIT":this.expressionMap.onLocked==="skip_locked"&&(r=" SKIP LOCKED"),this.expressionMap.lockMode){case"pessimistic_read":if(t.options.type==="mysql"||t.options.type==="aurora-mysql")return ye.isReleaseVersionOrGreater(t,"8.0.0")?" FOR SHARE"+n+r:" LOCK IN SHARE MODE";if(t.options.type==="mariadb")return" LOCK IN SHARE MODE";if(ye.isPostgresFamily(t))return" FOR SHARE"+n+r;if(t.options.type==="oracle")return" FOR UPDATE";if(t.options.type==="mssql")return"";throw new es;case"pessimistic_write":if(ye.isMySQLFamily(t)||t.options.type==="aurora-mysql"||t.options.type==="oracle")return" FOR UPDATE"+r;if(ye.isPostgresFamily(t)||t.options.type==="cockroachdb")return" FOR UPDATE"+n+r;if(t.options.type==="mssql")return"";throw new es;case"pessimistic_partial_write":if(ye.isPostgresFamily(t))return" FOR UPDATE"+n+" SKIP LOCKED";if(ye.isMySQLFamily(t))return" FOR UPDATE SKIP LOCKED";throw new es;case"pessimistic_write_or_fail":if(ye.isPostgresFamily(t)||t.options.type==="cockroachdb")return" FOR UPDATE"+n+" NOWAIT";if(ye.isMySQLFamily(t))return" FOR UPDATE NOWAIT";throw new es;case"for_no_key_update":if(ye.isPostgresFamily(t)||t.options.type==="cockroachdb")return" FOR NO KEY UPDATE"+n+r;throw new es;case"for_key_share":if(ye.isPostgresFamily(t))return" FOR KEY SHARE"+n+r;throw new es;default:return""}}createHavingExpression(){if(!this.expressionMap.havings||!this.expressionMap.havings.length)return"";const t=this.expressionMap.havings.map((n,r)=>{switch(n.type){case"and":return(r>0?"AND ":"")+this.replacePropertyNames(n.condition);case"or":return(r>0?"OR ":"")+this.replacePropertyNames(n.condition);default:return this.replacePropertyNames(n.condition)}}).join(" ");return t.length?" HAVING "+t:""}buildEscapedEntityColumnSelects(t,n){const r=this.expressionMap.selects.some(l=>l.selection===t),o=[];if(r&&o.push(...n.columns.filter(l=>l.isSelect===!0)),o.push(...n.columns.filter(l=>this.expressionMap.selects.some(u=>u.selection===t+"."+l.propertyPath))),o.length===0)return[];const a=this.expressionMap.queryEntity?n.primaryColumns.filter(l=>o.indexOf(l)===-1):[],i=[...o,...a],s=[],c=this.escape(t);return i.forEach(l=>{let u=c+"."+this.escape(l.databaseName);l.isVirtualProperty&&l.query&&(u=`(${l.query(c)})`),this.connection.driver.spatialTypes.indexOf(l.type)!==-1&&((ye.isMySQLFamily(this.connection.driver)||this.connection.driver.options.type==="aurora-mysql")&&(u=`${this.connection.driver.options.legacySpatialSupport?"AsText":"ST_AsText"}(${u})`),ye.isPostgresFamily(this.connection.driver)&&(l.precision?u=`ST_AsGeoJSON(${u}, ${l.precision})::json`:u=`ST_AsGeoJSON(${u})::json`),this.connection.driver.options.type==="mssql"&&(u=`${u}.ToString()`));const d=this.expressionMap.selects.filter(f=>f.selection===t+"."+l.propertyPath);if(d.length)d.forEach(f=>{s.push({selection:u,aliasName:f.aliasName?f.aliasName:ye.buildAlias(this.connection.driver,void 0,t,l.databaseName),virtual:f.virtual})});else{if(l.isVirtualProperty)return;s.push({selection:u,aliasName:ye.buildAlias(this.connection.driver,void 0,t,l.databaseName),virtual:r})}}),s}findEntityColumnSelects(t,n){const r=this.expressionMap.selects.find(o=>o.selection===t);return r?[r]:this.expressionMap.selects.filter(o=>n.columns.some(a=>o.selection===t+"."+a.propertyPath))}computeCountExpression(){const t=this.expressionMap.mainAlias.name,n=this.expressionMap.mainAlias.metadata.primaryColumns,r=this.escape(t);if(this.expressionMap.joinAttributes.length===0&&this.expressionMap.relationIdAttributes.length===0&&this.expressionMap.relationCountAttributes.length===0)return"COUNT(1)";if(this.connection.driver.options.type==="cockroachdb"||ye.isPostgresFamily(this.connection.driver))return"COUNT(DISTINCT("+n.map(o=>`${r}.${this.escape(o.databaseName)}`).join(", ")+"))";if(ye.isMySQLFamily(this.connection.driver))return"COUNT(DISTINCT "+n.map(o=>`${r}.${this.escape(o.databaseName)}`).join(", ")+")";if(this.connection.driver.options.type==="mssql"){const o=n.map(a=>`${r}.${this.escape(a.databaseName)}`).join(", '|;|', ");return n.length===1?`COUNT(DISTINCT(${o}))`:`COUNT(DISTINCT(CONCAT(${o})))`}return this.connection.driver.options.type==="spanner"?n.length===1?`COUNT(DISTINCT(${r}.${this.escape(n[0].databaseName)}))`:`COUNT(DISTINCT(CONCAT(${n.map(o=>`CAST(${r}.${this.escape(o.databaseName)} AS STRING)`).join(", '|;|', ")})))`:"COUNT(DISTINCT("+n.map(o=>`${r}.${this.escape(o.databaseName)}`).join(" || '|;|' || ")+"))"}async executeCountQuery(t){const n=this.computeCountExpression(),r=await this.clone().orderBy().groupBy().offset(void 0).limit(void 0).skip(void 0).take(void 0).select(n,"cnt").setOption("disable-global-order").loadRawResults(t);return!r||!r[0]||!r[0].cnt?0:parseInt(r[0].cnt)}async executeExistsQuery(t){return(await this.connection.createQueryBuilder().fromDummy().select("1","row_exists").whereExists(this).limit(1).loadRawResults(t)).length>0}applyFindOptions(){if(this.expressionMap.mainAlias.metadata){if(this.findOptions.relationLoadStrategy&&(this.expressionMap.relationLoadStrategy=this.findOptions.relationLoadStrategy),this.findOptions.comment&&this.comment(this.findOptions.comment),this.findOptions.withDeleted&&this.withDeleted(),this.findOptions.select){const t=Array.isArray(this.findOptions.select)?Jt.propertyPathsToTruthyObject(this.findOptions.select):this.findOptions.select;this.buildSelect(t,this.expressionMap.mainAlias.metadata,this.expressionMap.mainAlias.name)}if(this.selects.length&&this.select(this.selects),this.selects=[],this.findOptions.relations){const t=Array.isArray(this.findOptions.relations)?Jt.propertyPathsToTruthyObject(this.findOptions.relations):this.findOptions.relations;this.buildRelations(t,typeof this.findOptions.select=="object"?this.findOptions.select:void 0,this.expressionMap.mainAlias.metadata,this.expressionMap.mainAlias.name),this.findOptions.loadEagerRelations!==!1&&this.expressionMap.relationLoadStrategy==="join"&&this.buildEagerRelations(t,typeof this.findOptions.select=="object"?this.findOptions.select:void 0,this.expressionMap.mainAlias.metadata,this.expressionMap.mainAlias.name)}if(this.selects.length&&this.addSelect(this.selects),this.findOptions.where&&(this.conditions=this.buildWhere(this.findOptions.where,this.expressionMap.mainAlias.metadata,this.expressionMap.mainAlias.name),this.conditions.length&&this.andWhere(this.conditions.substr(0,1)!=="("?"("+this.conditions+")":this.conditions)),this.findOptions.order&&this.buildOrder(this.findOptions.order,this.expressionMap.mainAlias.metadata,this.expressionMap.mainAlias.name),this.joins.length&&this.joins.forEach(t=>{t.select&&!t.selection?t.type==="inner"?this.innerJoinAndSelect(`${t.parentAlias}.${t.relationMetadata.propertyPath}`,t.alias):this.leftJoinAndSelect(`${t.parentAlias}.${t.relationMetadata.propertyPath}`,t.alias):t.type==="inner"?this.innerJoin(`${t.parentAlias}.${t.relationMetadata.propertyPath}`,t.alias):this.leftJoin(`${t.parentAlias}.${t.relationMetadata.propertyPath}`,t.alias)}),this.findOptions.skip!==void 0&&this.skip(this.findOptions.skip),this.findOptions.take!==void 0&&this.take(this.findOptions.take),typeof this.findOptions.cache=="number"?this.cache(this.findOptions.cache):typeof this.findOptions.cache=="boolean"?this.cache(this.findOptions.cache):typeof this.findOptions.cache=="object"&&this.cache(this.findOptions.cache.id,this.findOptions.cache.milliseconds),this.findOptions.join&&(this.findOptions.join.leftJoin&&Object.keys(this.findOptions.join.leftJoin).forEach(t=>{this.leftJoin(this.findOptions.join.leftJoin[t],t)}),this.findOptions.join.innerJoin&&Object.keys(this.findOptions.join.innerJoin).forEach(t=>{this.innerJoin(this.findOptions.join.innerJoin[t],t)}),this.findOptions.join.leftJoinAndSelect&&Object.keys(this.findOptions.join.leftJoinAndSelect).forEach(t=>{this.leftJoinAndSelect(this.findOptions.join.leftJoinAndSelect[t],t)}),this.findOptions.join.innerJoinAndSelect&&Object.keys(this.findOptions.join.innerJoinAndSelect).forEach(t=>{this.innerJoinAndSelect(this.findOptions.join.innerJoinAndSelect[t],t)})),this.findOptions.lock){if(this.findOptions.lock.mode==="optimistic")this.setLock(this.findOptions.lock.mode,this.findOptions.lock.version);else if(this.findOptions.lock.mode==="pessimistic_read"||this.findOptions.lock.mode==="pessimistic_write"||this.findOptions.lock.mode==="dirty_read"||this.findOptions.lock.mode==="pessimistic_partial_write"||this.findOptions.lock.mode==="pessimistic_write_or_fail"||this.findOptions.lock.mode==="for_no_key_update"||this.findOptions.lock.mode==="for_key_share"){const t=this.findOptions.lock.tables?this.findOptions.lock.tables.map(n=>{const r=this.expressionMap.aliases.find(o=>o.metadata.tableNameWithoutPrefix===n);if(!r)throw new xe(`"${n}" is not part of this query`);return this.escape(r.name)}):void 0;this.setLock(this.findOptions.lock.mode,void 0,t),this.findOptions.lock.onLocked&&this.setOnLocked(this.findOptions.lock.onLocked)}}this.findOptions.loadRelationIds===!0?this.loadAllRelationIds():typeof this.findOptions.loadRelationIds=="object"&&this.loadAllRelationIds(this.findOptions.loadRelationIds),this.findOptions.loadEagerRelations!==!1&&vx.joinEagerRelations(this,this.expressionMap.mainAlias.name,this.expressionMap.mainAlias.metadata),this.findOptions.transaction===!0&&(this.expressionMap.useTransaction=!0)}}concatRelationMetadata(t){this.relationMetadatas.push(t)}async executeEntitiesAndRawResults(t){if(!this.expressionMap.mainAlias)throw new xe('Alias is not set. Use "from" method to set an alias.');if((this.expressionMap.lockMode==="pessimistic_read"||this.expressionMap.lockMode==="pessimistic_write"||this.expressionMap.lockMode==="pessimistic_partial_write"||this.expressionMap.lockMode==="pessimistic_write_or_fail"||this.expressionMap.lockMode==="for_no_key_update"||this.expressionMap.lockMode==="for_key_share")&&!t.isTransactionActive)throw new rne;if(this.expressionMap.lockMode==="optimistic"){const i=this.expressionMap.mainAlias.metadata;if(!i.versionColumn&&!i.updateDateColumn)throw new ene(i.name)}const n=new Nne(this.connection,t,this.expressionMap.relationIdAttributes),r=new Pne(this.connection,t,this.expressionMap.relationCountAttributes);new kne(this.expressionMap).transform(),new Ane(this.expressionMap).transform();let o=[],a=[];if((this.expressionMap.skip||this.expressionMap.take)&&this.expressionMap.joinAttributes.length>0){const[i,s]=this.createOrderByCombinedWithSelectExpression("distinctAlias"),c=this.expressionMap.mainAlias.metadata,l=this.expressionMap.mainAlias.name,u=c.primaryColumns.map(p=>{const y=this.escape("distinctAlias"),m=this.escape(ye.buildAlias(this.connection.driver,void 0,l,p.databaseName));s[m]||(s[m]="ASC");const v=ye.buildAlias(this.connection.driver,void 0,"ids_"+l,p.databaseName);return`${y}.${m} AS ${this.escape(v)}`}),d=this.clone(),f=d.expressionMap.timeTravel;if(o=await new bx(this.connection,t).select(`DISTINCT ${u.join(", ")}`).addSelect(i).from(`(${d.orderBy().timeTravelQuery(!1).getQuery()})`,"distinctAlias").timeTravelQuery(f).offset(this.expressionMap.skip).limit(this.expressionMap.take).orderBy(s).cache(this.expressionMap.cache&&this.expressionMap.cacheId?`${this.expressionMap.cacheId}-pagination`:this.expressionMap.cache,this.expressionMap.cacheDuration).setParameters(this.getParameters()).setNativeParameters(this.expressionMap.nativeParameters).getRawMany(),o.length>0){let p="";const y={};if(c.hasMultiplePrimaryKeys)p=o.map((m,v)=>c.primaryColumns.map(b=>{const x=`orm_distinct_ids_${v}_${b.databaseName}`,_=ye.buildAlias(this.connection.driver,void 0,"ids_"+l,b.databaseName);return y[x]=m[_],`${l}.${b.propertyPath}=:${x}`}).join(" AND ")).join(" OR ");else{const m=ye.buildAlias(this.connection.driver,void 0,"ids_"+l,c.primaryColumns[0].databaseName),v=o.map(b=>b[m]);v.every(b=>typeof b=="number")?p=`${l}.${c.primaryColumns[0].propertyPath} IN (${v.join(", ")})`:(y.orm_distinct_ids=v,p=l+"."+c.primaryColumns[0].propertyPath+" IN (:...orm_distinct_ids)")}o=await this.clone().mergeExpressionMap({extraAppendedAndWhereCondition:p}).setParameters(y).loadRawResults(t)}}else o=await this.loadRawResults(t);if(o.length>0){const i=await n.load(o),s=await r.load(o);a=new One(this.expressionMap,this.connection.driver,i,s,this.queryRunner).transform(o,this.expressionMap.mainAlias),this.expressionMap.callListeners===!0&&this.expressionMap.mainAlias.hasMetadata&&await t.broadcaster.broadcast("Load",this.expressionMap.mainAlias.metadata,a)}if(this.expressionMap.relationLoadStrategy==="query"){const i=new Mne(this.connection,t);await Promise.all(this.relationMetadatas.map(async s=>{const c=s.inverseEntityMetadata.target,l=s.inverseEntityMetadata.targetName,u=Array.isArray(this.findOptions.select)?Jt.propertyPathsToTruthyObject(this.findOptions.select):this.findOptions.select,d=Array.isArray(this.findOptions.relations)?Jt.propertyPathsToTruthyObject(this.findOptions.relations):this.findOptions.relations,f=this.createQueryBuilder(t).select(l).from(c,l).setFindOptions({select:u?Jt.deepValue(u,s.propertyPath):void 0,order:this.findOptions.order?Jt.deepValue(this.findOptions.order,s.propertyPath):void 0,relations:d?Jt.deepValue(d,s.propertyPath):void 0,withDeleted:this.findOptions.withDeleted,relationLoadStrategy:this.findOptions.relationLoadStrategy});if(a.length>0){const p=await i.loadManyToManyRelationIdsAndGroup(s,a,void 0,f);a.forEach(y=>{const m=p.find(v=>v.entity===y);if(m){const v=m.related===void 0?null:m.related;s.setEntityValue(y,v)}})}}))}return{raw:o,entities:a}}createOrderByCombinedWithSelectExpression(t){const n=this.expressionMap.allOrderBys,r=Object.keys(n).map(a=>{if(a.indexOf(".")!==-1){const i=a.split("."),s=i[0],c=i.slice(1).join("."),l=this.expressionMap.findAliasByName(s).metadata.findColumnWithPropertyPath(c);return this.escape(t)+"."+this.escape(ye.buildAlias(this.connection.driver,void 0,s,l.databaseName))}else return this.expressionMap.selects.find(i=>i.selection===a||i.aliasName===a)?this.escape(t)+"."+this.escape(a):""}).join(", "),o={};return Object.keys(n).forEach(a=>{if(a.indexOf(".")!==-1){const i=a.split("."),s=i[0],c=i.slice(1).join("."),l=this.expressionMap.findAliasByName(s).metadata.findColumnWithPropertyPath(c);o[this.escape(t)+"."+this.escape(ye.buildAlias(this.connection.driver,void 0,s,l.databaseName))]=n[a]}else this.expressionMap.selects.find(i=>i.selection===a||i.aliasName===a)?o[this.escape(t)+"."+this.escape(a)]=n[a]:o[a]=n[a]}),[r,o]}async loadRawResults(t){const[n,r]=this.getQueryAndParameters(),o=n+" -- PARAMETERS: "+JSON.stringify(r,(u,d)=>typeof d=="bigint"?d.toString():d),a=typeof this.connection.options.cache=="object"?this.connection.options.cache:{};let i;const s=a.alwaysEnabled&&this.expressionMap.cache!==!1||this.expressionMap.cache===!0;let c=!1;if(this.connection.queryResultCache&&s)try{if(i=await this.connection.queryResultCache.getFromCache({identifier:this.expressionMap.cacheId,query:o,duration:this.expressionMap.cacheDuration||a.duration||1e3},t),i&&!this.connection.queryResultCache.isExpired(i))return JSON.parse(i.result)}catch(u){if(!a.ignoreErrors)throw u;c=!0}const l=await t.query(n,r,!0);if(!c&&this.connection.queryResultCache&&s)try{await this.connection.queryResultCache.storeInCache({identifier:this.expressionMap.cacheId,query:o,time:new Date().getTime(),duration:this.expressionMap.cacheDuration||a.duration||1e3,result:JSON.stringify(l.records)},i,t)}catch(u){if(!a.ignoreErrors)throw u}return l.records}mergeExpressionMap(t){return Dt.assign(this.expressionMap,t),this}normalizeNumber(t){return typeof t=="number"||t===void 0||t===null?t:Number(t)}obtainQueryRunner(){return this.queryRunner||this.connection.createQueryRunner(this.connection.defaultReplicationModeForReads())}buildSelect(t,n,r,o){for(let a in t){if(t[a]===void 0||t[a]===!1)continue;const i=o?o+"."+a:a,s=n.findColumnWithPropertyPathStrict(i),c=n.findEmbeddedWithPropertyPath(i),l=n.findRelationWithPropertyPath(i);if(!c&&!s&&!l)throw new Dr(i,n);s?this.selects.push(r+"."+i):c&&this.buildSelect(t[a],n,r,i)}}buildRelations(t,n,r,o,a){t&&Object.keys(t).forEach(i=>{const s=t[i],c=a?a+"."+i:i,l=r.findEmbeddedWithPropertyPath(c),u=r.findRelationWithPropertyPath(c);if(!l&&!u)throw new Dr(c,r);if(l)this.buildRelations(s,typeof n=="object"?Jt.deepValue(n,l.propertyPath):void 0,r,o,c);else if(u){let d=o+"_"+c.replace(".","_");d=ye.buildAlias(this.connection.driver,{joiner:"__"},o,d),(s===!0||typeof s=="object")&&(this.expressionMap.relationLoadStrategy==="query"?this.concatRelationMetadata(u):(this.joins.push({type:"left",select:!0,selection:n&&typeof n[i]=="object"?n[i]:void 0,alias:d,parentAlias:o,relationMetadata:u}),n&&typeof n[i]=="object"&&this.buildSelect(n[i],u.inverseEntityMetadata,d))),typeof s=="object"&&this.expressionMap.relationLoadStrategy==="join"&&this.buildRelations(s,typeof n=="object"?Jt.deepValue(n,u.propertyPath):void 0,u.inverseEntityMetadata,d,void 0)}})}buildEagerRelations(t,n,r,o,a){t&&Object.keys(t).forEach(i=>{const s=t[i],c=a?a+"."+i:i,l=r.findEmbeddedWithPropertyPath(c),u=r.findRelationWithPropertyPath(c);if(!l&&!u)throw new Dr(c,r);if(l)this.buildEagerRelations(s,typeof n=="object"?Jt.deepValue(n,l.propertyPath):void 0,r,o,c);else if(u){let d=o+"_"+c.replace(".","_");d=ye.buildAlias(this.connection.driver,{joiner:"__"},o,d),(s===!0||typeof s=="object")&&u.inverseEntityMetadata.eagerRelations.forEach(f=>{let p=d+"_"+f.propertyPath.replace(".","_");p=ye.buildAlias(this.connection.driver,{joiner:"__"},d,p),this.joins.find(y=>y.alias===p)||this.joins.push({type:"left",select:!0,alias:p,parentAlias:d,selection:void 0,relationMetadata:f}),n&&typeof n[i]=="object"&&this.buildSelect(n[i],u.inverseEntityMetadata,d)}),typeof s=="object"&&this.buildEagerRelations(s,typeof n=="object"?Jt.deepValue(n,u.propertyPath):void 0,u.inverseEntityMetadata,d,void 0)}})}buildOrder(t,n,r,o){for(let a in t){if(t[a]===void 0)continue;const i=o?o+"."+a:a,s=n.findColumnWithPropertyPathStrict(i),c=n.findEmbeddedWithPropertyPath(i),l=n.findRelationWithPropertyPath(i);if(!c&&!s&&!l)throw new Dr(i,n);if(s){let u=typeof t[a]=="object"?t[a].direction:t[a];u=u==="DESC"||u==="desc"||u===-1?"DESC":"ASC";let d=typeof t[a]=="object"?t[a].nulls:void 0;d=(d==null?void 0:d.toLowerCase())==="first"?"NULLS FIRST":(d==null?void 0:d.toLowerCase())==="last"?"NULLS LAST":void 0;let f=`${r}.${i}`;this.addOrderBy(f,u,d)}else if(c)this.buildOrder(t[a],n,r,i);else if(l){let u=r+"_"+i.replace(".","_");u=ye.buildAlias(this.connection.driver,{joiner:"__"},r,u),this.joins.find(d=>d.alias===u)||this.joins.push({type:"left",select:!1,alias:u,parentAlias:r,selection:void 0,relationMetadata:l}),this.buildOrder(t[a],l.inverseEntityMetadata,u)}}}buildWhere(t,n,r,o){let a="";if(Array.isArray(t))t.length&&(a=t.map(i=>this.buildWhere(i,n,r,o)).filter(i=>!!i).map(i=>"("+i+")").join(" OR "));else{let i=[];for(let s in t){if(t[s]===void 0||t[s]===null)continue;const c=o?o+"."+s:s,l=n.findColumnWithPropertyPathStrict(c),u=n.findEmbeddedWithPropertyPath(c),d=n.findRelationWithPropertyPath(c);if(!u&&!l&&!d)throw new Dr(c,n);if(l){let f=`${r}.${c}`;l.isVirtualProperty&&l.query&&(f=`(${l.query(r)})`);let p=t[s];pt.isEqualOperator(t[s])&&(p=t[s].value),l.transformer&&(p instanceof xl?p.transformValue(l.transformer):p=yx.transformTo(l.transformer,p)),i.push(this.createWhereConditionExpression(this.getWherePredicateCondition(f,p)))}else if(u){const f=this.buildWhere(t[s],n,r,c);f&&i.push(f)}else if(d){if(typeof t[s]=="object"&&Object.keys(t[s]).every(f=>t[s][f]===void 0))continue;if(pt.isFindOperator(t[s]))if(t[s].type==="moreThan"||t[s].type==="lessThan"||t[s].type==="moreThanOrEqual"||t[s].type==="lessThanOrEqual"){let f="";t[s].type==="moreThan"?f=">":t[s].type==="lessThan"?f="<":t[s].type==="moreThanOrEqual"?f=">=":t[s].type==="lessThanOrEqual"&&(f="<=");const p=this.subQuery();if(d.isManyToManyOwner)p.select("COUNT(*)").from(d.joinTableName,d.joinTableName).where(d.joinColumns.map(y=>`${d.joinTableName}.${y.propertyName} = ${r}.${y.referencedColumn.propertyName}`).join(" AND "));else if(d.isManyToManyNotOwner)p.select("COUNT(*)").from(d.inverseRelation.joinTableName,d.inverseRelation.joinTableName).where(d.inverseRelation.inverseJoinColumns.map(y=>`${d.inverseRelation.joinTableName}.${y.propertyName} = ${r}.${y.referencedColumn.propertyName}`).join(" AND "));else if(d.isOneToMany)p.select("COUNT(*)").from(d.inverseEntityMetadata.target,d.inverseEntityMetadata.tableName).where(d.inverseRelation.joinColumns.map(y=>`${d.inverseEntityMetadata.tableName}.${y.propertyName} = ${r}.${y.referencedColumn.propertyName}`).join(" AND "));else throw new Error("This relation isn't supported by given find operator");this.andWhere(p.getSql()+" "+f+" "+parseInt(t[s].value))}else if(d.isManyToOne||d.isOneToOne&&d.isOneToOneOwner){const f=`${r}.${c}`;i.push(this.createWhereConditionExpression(this.getWherePredicateCondition(f,t[s])))}else throw new Error("This relation isn't supported by given find operator");else{let f=r+"_"+d.propertyPath.replace(".","_");f=ye.buildAlias(this.connection.driver,{joiner:"__"},r,f),this.joins.find(y=>y.alias===f)||this.joins.push({type:"left",select:!1,selection:void 0,alias:f,parentAlias:r,relationMetadata:d});const p=this.buildWhere(t[s],d.inverseEntityMetadata,f);p&&i.push(p)}}}a=i.length?"("+i.join(") AND (")+")":i.join(" AND ")}return a.length?"("+a+")":a}}class hI{constructor(){this.generatedMaps=[]}static from(t){const n=new this;return n.raw=t.records,n.affected=t.affected,n}}class Tne extends kt{constructor(t,n){super(t,n),this["@instanceof"]=Symbol.for("SoftDeleteQueryBuilder"),this.expressionMap.aliasNamePrefixingEnabled=!1}getQuery(){let t=this.createUpdateExpression();return t+=this.createCteExpression(),t+=this.createOrderByExpression(),t+=this.createLimitExpression(),this.replacePropertyNamesForTheWholeQuery(t.trim())}async execute(){const t=this.obtainQueryRunner();let n=!1;try{this.expressionMap.useTransaction===!0&&t.isTransactionActive===!1&&(await t.startTransaction(),n=!0),this.expressionMap.callListeners===!0&&this.expressionMap.mainAlias.hasMetadata&&(this.expressionMap.queryType==="soft-delete"?await t.broadcaster.broadcast("BeforeSoftRemove",this.expressionMap.mainAlias.metadata):this.expressionMap.queryType==="restore"&&await t.broadcaster.broadcast("BeforeRecover",this.expressionMap.mainAlias.metadata));const r=new gx(t,this.expressionMap);this.expressionMap.updateEntity===!0&&this.expressionMap.mainAlias.hasMetadata&&this.expressionMap.whereEntities.length>0&&(this.expressionMap.extraReturningColumns=r.getSoftDeletionReturningColumns());const[o,a]=this.getQueryAndParameters(),i=await t.query(o,a,!0),s=hI.from(i);return this.expressionMap.updateEntity===!0&&this.expressionMap.mainAlias.hasMetadata&&this.expressionMap.whereEntities.length>0&&await r.update(s,this.expressionMap.whereEntities),this.expressionMap.callListeners===!0&&this.expressionMap.mainAlias.hasMetadata&&(this.expressionMap.queryType==="soft-delete"?await t.broadcaster.broadcast("AfterSoftRemove",this.expressionMap.mainAlias.metadata):this.expressionMap.queryType==="restore"&&await t.broadcaster.broadcast("AfterRecover",this.expressionMap.mainAlias.metadata)),n&&await t.commitTransaction(),s}catch(r){if(n)try{await t.rollbackTransaction()}catch{}throw r}finally{t!==this.queryRunner&&await t.release()}}from(t,n){t=pt.isEntitySchema(t)?t.options.name:t;const r=this.createFromAlias(t,n);return this.expressionMap.setMainAlias(r),this}where(t,n){this.expressionMap.wheres=[];const r=this.getWhereCondition(t);return r&&(this.expressionMap.wheres=[{type:"simple",condition:r}]),n&&this.setParameters(n),this}andWhere(t,n){return this.expressionMap.wheres.push({type:"and",condition:this.getWhereCondition(t)}),n&&this.setParameters(n),this}orWhere(t,n){return this.expressionMap.wheres.push({type:"or",condition:this.getWhereCondition(t)}),n&&this.setParameters(n),this}whereInIds(t){return this.where(this.getWhereInIdsCondition(t))}andWhereInIds(t){return this.andWhere(this.getWhereInIdsCondition(t))}orWhereInIds(t){return this.orWhere(this.getWhereInIdsCondition(t))}output(t){return this.returning(t)}returning(t){if(!this.connection.driver.isReturningSqlSupported("update"))throw new $f;return this.expressionMap.returning=t,this}orderBy(t,n="ASC",r){return t?typeof t=="object"?this.expressionMap.orderBys=t:r?this.expressionMap.orderBys={[t]:{order:n,nulls:r}}:this.expressionMap.orderBys={[t]:n}:this.expressionMap.orderBys={},this}addOrderBy(t,n="ASC",r){return r?this.expressionMap.orderBys[t]={order:n,nulls:r}:this.expressionMap.orderBys[t]=n,this}limit(t){return this.expressionMap.limit=t,this}whereEntity(t){if(!this.expressionMap.mainAlias.hasMetadata)throw new xe(".whereEntity method can only be used on queries which update real entity table.");this.expressionMap.wheres=[];const n=Array.isArray(t)?t:[t];return n.forEach(r=>{const o=this.expressionMap.mainAlias.metadata.getEntityIdMap(r);if(!o)throw new xe("Provided entity does not have ids set, cannot perform operation.");this.orWhereInIds(o)}),this.expressionMap.whereEntities=n,this}updateEntity(t){return this.expressionMap.updateEntity=t,this}createUpdateExpression(){const t=this.expressionMap.mainAlias.hasMetadata?this.expressionMap.mainAlias.metadata:void 0;if(!t)throw new xe(`Cannot get entity metadata for the given alias "${this.expressionMap.mainAlias}"`);if(!t.deleteDateColumn)throw new Zte(t);const n=[];switch(this.expressionMap.queryType){case"soft-delete":n.push(this.escape(t.deleteDateColumn.databaseName)+" = CURRENT_TIMESTAMP");break;case"restore":n.push(this.escape(t.deleteDateColumn.databaseName)+" = NULL");break;default:throw new xe('The queryType must be "soft-delete" or "restore"')}if(t.versionColumn&&n.push(this.escape(t.versionColumn.databaseName)+" = "+this.escape(t.versionColumn.databaseName)+" + 1"),t.updateDateColumn&&n.push(this.escape(t.updateDateColumn.databaseName)+" = CURRENT_TIMESTAMP"),n.length<=0)throw new nx;const r=this.createWhereExpression(),o=this.createReturningExpression("update");return o===""?`UPDATE ${this.getTableName(this.getMainTableName())} SET ${n.join(", ")}${r}`:this.connection.driver.options.type==="mssql"?`UPDATE ${this.getTableName(this.getMainTableName())} SET ${n.join(", ")} OUTPUT ${o}${r}`:`UPDATE ${this.getTableName(this.getMainTableName())} SET ${n.join(", ")}${r} RETURNING ${o}`}createOrderByExpression(){const t=this.expressionMap.orderBys;return Object.keys(t).length>0?" ORDER BY "+Object.keys(t).map(n=>typeof t[n]=="string"?this.replacePropertyNames(n)+" "+t[n]:this.replacePropertyNames(n)+" "+t[n].order+" "+t[n].nulls).join(", "):""}createLimitExpression(){let t=this.expressionMap.limit;if(t){if(ye.isMySQLFamily(this.connection.driver))return" LIMIT "+t;throw new YR}return""}}class Rne extends kt{constructor(t,n){super(t,n),this["@instanceof"]=Symbol.for("UpdateQueryBuilder"),this.expressionMap.aliasNamePrefixingEnabled=!1}getQuery(){let t=this.createComment();return t+=this.createCteExpression(),t+=this.createUpdateExpression(),t+=this.createOrderByExpression(),t+=this.createLimitExpression(),this.replacePropertyNamesForTheWholeQuery(t.trim())}async execute(){const t=this.obtainQueryRunner();let n=!1;try{this.expressionMap.useTransaction===!0&&t.isTransactionActive===!1&&(await t.startTransaction(),n=!0),this.expressionMap.callListeners===!0&&this.expressionMap.mainAlias.hasMetadata&&await t.broadcaster.broadcast("BeforeUpdate",this.expressionMap.mainAlias.metadata,this.expressionMap.valuesSet);let r=null,o=null;const a=new gx(t,this.expressionMap),i=[];if(Array.isArray(this.expressionMap.returning)&&this.expressionMap.mainAlias.hasMetadata)for(const f of this.expressionMap.returning)i.push(...this.expressionMap.mainAlias.metadata.findColumnsWithPropertyPath(f));this.expressionMap.updateEntity===!0&&this.expressionMap.mainAlias.hasMetadata&&this.expressionMap.whereEntities.length>0&&(this.expressionMap.extraReturningColumns=a.getUpdationReturningColumns(),i.push(...this.expressionMap.extraReturningColumns.filter(f=>!i.includes(f)))),i.length>0&&this.connection.driver.options.type==="mssql"&&(r=this.connection.driver.buildTableVariableDeclaration("@OutputTable",i),o="SELECT * FROM @OutputTable");const[s,c]=this.getQueryAndParameters(),l=[r,s,o],u=await t.query(l.filter(f=>f!=null).join(`;

`),c,!0),d=hI.from(u);return this.expressionMap.updateEntity===!0&&this.expressionMap.mainAlias.hasMetadata&&this.expressionMap.whereEntities.length>0&&await a.update(d,this.expressionMap.whereEntities),this.expressionMap.callListeners===!0&&this.expressionMap.mainAlias.hasMetadata&&await t.broadcaster.broadcast("AfterUpdate",this.expressionMap.mainAlias.metadata,this.expressionMap.valuesSet),n&&await t.commitTransaction(),d}catch(r){if(n)try{await t.rollbackTransaction()}catch{}throw r}finally{t!==this.queryRunner&&await t.release()}}set(t){return this.expressionMap.valuesSet=t,this}where(t,n){this.expressionMap.wheres=[];const r=this.getWhereCondition(t);return r&&(this.expressionMap.wheres=[{type:"simple",condition:r}]),n&&this.setParameters(n),this}andWhere(t,n){return this.expressionMap.wheres.push({type:"and",condition:this.getWhereCondition(t)}),n&&this.setParameters(n),this}orWhere(t,n){return this.expressionMap.wheres.push({type:"or",condition:this.getWhereCondition(t)}),n&&this.setParameters(n),this}whereInIds(t){return this.where(this.getWhereInIdsCondition(t))}andWhereInIds(t){return this.andWhere(this.getWhereInIdsCondition(t))}orWhereInIds(t){return this.orWhere(this.getWhereInIdsCondition(t))}output(t){return this.returning(t)}returning(t){if(!this.connection.driver.isReturningSqlSupported("update"))throw new $f;return this.expressionMap.returning=t,this}orderBy(t,n="ASC",r){return t?typeof t=="object"?this.expressionMap.orderBys=t:r?this.expressionMap.orderBys={[t]:{order:n,nulls:r}}:this.expressionMap.orderBys={[t]:n}:this.expressionMap.orderBys={},this}addOrderBy(t,n="ASC",r){return r?this.expressionMap.orderBys[t]={order:n,nulls:r}:this.expressionMap.orderBys[t]=n,this}limit(t){return this.expressionMap.limit=t,this}whereEntity(t){if(!this.expressionMap.mainAlias.hasMetadata)throw new xe(".whereEntity method can only be used on queries which update real entity table.");this.expressionMap.wheres=[];const n=Array.isArray(t)?t:[t];return n.forEach(r=>{const o=this.expressionMap.mainAlias.metadata.getEntityIdMap(r);if(!o)throw new xe("Provided entity does not have ids set, cannot perform operation.");this.orWhereInIds(o)}),this.expressionMap.whereEntities=n,this}updateEntity(t){return this.expressionMap.updateEntity=t,this}createUpdateExpression(){const t=this.getValueSet(),n=this.expressionMap.mainAlias.hasMetadata?this.expressionMap.mainAlias.metadata:void 0,r={};for(let c in t)t[c]!==void 0&&(r[c]=t[c]);const o=[],a=[];if(n?(this.createPropertyPath(n,r).forEach(c=>{const l=n.findColumnsWithPropertyPath(c);if(l.length<=0)throw new Dr(c,n);l.forEach(u=>{if(!u.isUpdate||a.includes(u))return;a.push(u);let d=u.getEntityValue(r);if(u.referencedColumn&&typeof d=="object"&&!(d instanceof Date)&&d!==null&&!Wh.isBuffer(d)?d=u.referencedColumn.getEntityValue(d):typeof d!="function"&&(d=this.connection.driver.preparePersistentValue(d,u)),typeof d=="function")o.push(this.escape(u.databaseName)+" = "+d());else if((this.connection.driver.options.type==="sap"||this.connection.driver.options.type==="spanner")&&d===null)o.push(this.escape(u.databaseName)+" = NULL");else{this.connection.driver.options.type==="mssql"&&(d=this.connection.driver.parametrizeValue(u,d));const f=this.createParameter(d);let p=null;if((ye.isMySQLFamily(this.connection.driver)||this.connection.driver.options.type==="aurora-mysql")&&this.connection.driver.spatialTypes.indexOf(u.type)!==-1){const y=this.connection.driver.options.legacySpatialSupport?"GeomFromText":"ST_GeomFromText";u.srid!=null?p=`${y}(${f}, ${u.srid})`:p=`${y}(${f})`}else ye.isPostgresFamily(this.connection.driver)&&this.connection.driver.spatialTypes.indexOf(u.type)!==-1?u.srid!=null?p=`ST_SetSRID(ST_GeomFromGeoJSON(${f}), ${u.srid})::${u.type}`:p=`ST_GeomFromGeoJSON(${f})::${u.type}`:this.connection.driver.options.type==="mssql"&&this.connection.driver.spatialTypes.indexOf(u.type)!==-1?p=u.type+"::STGeomFromText("+f+", "+(u.srid||"0")+")":p=f;o.push(this.escape(u.databaseName)+" = "+p)}})}),(o.length>0||Object.keys(r).length===0)&&(n.versionColumn&&a.indexOf(n.versionColumn)===-1&&o.push(this.escape(n.versionColumn.databaseName)+" = "+this.escape(n.versionColumn.databaseName)+" + 1"),n.updateDateColumn&&a.indexOf(n.updateDateColumn)===-1&&o.push(this.escape(n.updateDateColumn.databaseName)+" = CURRENT_TIMESTAMP"))):Object.keys(r).map(c=>{let l=r[c];if(typeof l=="function")o.push(this.escape(c)+" = "+l());else if((this.connection.driver.options.type==="sap"||this.connection.driver.options.type==="spanner")&&l===null)o.push(this.escape(c)+" = NULL");else{const u=this.createParameter(l);o.push(this.escape(c)+" = "+u)}}),o.length<=0)throw new nx;const i=this.createWhereExpression(),s=this.createReturningExpression("update");return s===""?`UPDATE ${this.getTableName(this.getMainTableName())} SET ${o.join(", ")}${i}`:this.connection.driver.options.type==="mssql"?`UPDATE ${this.getTableName(this.getMainTableName())} SET ${o.join(", ")} OUTPUT ${s}${i}`:`UPDATE ${this.getTableName(this.getMainTableName())} SET ${o.join(", ")}${i} RETURNING ${s}`}createOrderByExpression(){const t=this.expressionMap.orderBys;return Object.keys(t).length>0?" ORDER BY "+Object.keys(t).map(n=>typeof t[n]=="string"?this.replacePropertyNames(n)+" "+t[n]:this.replacePropertyNames(n)+" "+t[n].order+" "+t[n].nulls).join(", "):""}createLimitExpression(){let t=this.expressionMap.limit;if(t){if(ye.isMySQLFamily(this.connection.driver)||this.connection.driver.options.type==="aurora-mysql")return" LIMIT "+t;throw new YR}return""}getValueSet(){if(typeof this.expressionMap.valuesSet=="object")return this.expressionMap.valuesSet;throw new nx}}function Ine(){kt.registerQueryBuilderClass("DeleteQueryBuilder",e=>new vne(e)),kt.registerQueryBuilderClass("InsertQueryBuilder",e=>new Ene(e)),kt.registerQueryBuilderClass("RelationQueryBuilder",e=>new Cne(e)),kt.registerQueryBuilderClass("SelectQueryBuilder",e=>new bx(e)),kt.registerQueryBuilderClass("SoftDeleteQueryBuilder",e=>new Tne(e)),kt.registerQueryBuilderClass("UpdateQueryBuilder",e=>new Rne(e))}var mI;(function(e){e.VIEW="VIEW",e.MATERIALIZED_VIEW="MATERIALIZED_VIEW",e.GENERATED_COLUMN="GENERATED_COLUMN"})(mI||(mI={}));var xx={exports:{}},wx,yI;function Dne(){if(yI)return wx;yI=1;var e=1e3,t=e*60,n=t*60,r=n*24,o=r*7,a=r*365.25;wx=function(u,d){d=d||{};var f=typeof u;if(f==="string"&&u.length>0)return i(u);if(f==="number"&&isFinite(u))return d.long?c(u):s(u);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(u))};function i(u){if(u=String(u),!(u.length>100)){var d=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(u);if(d){var f=parseFloat(d[1]),p=(d[2]||"ms").toLowerCase();switch(p){case"years":case"year":case"yrs":case"yr":case"y":return f*a;case"weeks":case"week":case"w":return f*o;case"days":case"day":case"d":return f*r;case"hours":case"hour":case"hrs":case"hr":case"h":return f*n;case"minutes":case"minute":case"mins":case"min":case"m":return f*t;case"seconds":case"second":case"secs":case"sec":case"s":return f*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return f;default:return}}}}function s(u){var d=Math.abs(u);return d>=r?Math.round(u/r)+"d":d>=n?Math.round(u/n)+"h":d>=t?Math.round(u/t)+"m":d>=e?Math.round(u/e)+"s":u+"ms"}function c(u){var d=Math.abs(u);return d>=r?l(u,d,r,"day"):d>=n?l(u,d,n,"hour"):d>=t?l(u,d,t,"minute"):d>=e?l(u,d,e,"second"):u+" ms"}function l(u,d,f,p){var y=d>=f*1.5;return Math.round(u/f)+" "+p+(y?"s":"")}return wx}var _x,gI;function Lne(){if(gI)return _x;gI=1;function e(t){r.debug=r,r.default=r,r.coerce=l,r.disable=i,r.enable=a,r.enabled=s,r.humanize=Dne(),r.destroy=u,Object.keys(t).forEach(d=>{r[d]=t[d]}),r.names=[],r.skips=[],r.formatters={};function n(d){let f=0;for(let p=0;p<d.length;p++)f=(f<<5)-f+d.charCodeAt(p),f|=0;return r.colors[Math.abs(f)%r.colors.length]}r.selectColor=n;function r(d){let f,p=null,y,m;function v(...b){if(!v.enabled)return;const x=v,_=Number(new Date),w=_-(f||_);x.diff=w,x.prev=f,x.curr=_,f=_,b[0]=r.coerce(b[0]),typeof b[0]!="string"&&b.unshift("%O");let j=0;b[0]=b[0].replace(/%([a-zA-Z%])/g,(E,S)=>{if(E==="%%")return"%";j++;const O=r.formatters[S];if(typeof O=="function"){const k=b[j];E=O.call(x,k),b.splice(j,1),j--}return E}),r.formatArgs.call(x,b),(x.log||r.log).apply(x,b)}return v.namespace=d,v.useColors=r.useColors(),v.color=r.selectColor(d),v.extend=o,v.destroy=r.destroy,Object.defineProperty(v,"enabled",{enumerable:!0,configurable:!1,get:()=>p!==null?p:(y!==r.namespaces&&(y=r.namespaces,m=r.enabled(d)),m),set:b=>{p=b}}),typeof r.init=="function"&&r.init(v),v}function o(d,f){const p=r(this.namespace+(typeof f>"u"?":":f)+d);return p.log=this.log,p}function a(d){r.save(d),r.namespaces=d,r.names=[],r.skips=[];let f;const p=(typeof d=="string"?d:"").split(/[\s,]+/),y=p.length;for(f=0;f<y;f++)p[f]&&(d=p[f].replace(/\*/g,".*?"),d[0]==="-"?r.skips.push(new RegExp("^"+d.slice(1)+"$")):r.names.push(new RegExp("^"+d+"$")))}function i(){const d=[...r.names.map(c),...r.skips.map(c).map(f=>"-"+f)].join(",");return r.enable(""),d}function s(d){if(d[d.length-1]==="*")return!0;let f,p;for(f=0,p=r.skips.length;f<p;f++)if(r.skips[f].test(d))return!1;for(f=0,p=r.names.length;f<p;f++)if(r.names[f].test(d))return!0;return!1}function c(d){return d.toString().substring(2,d.toString().length-2).replace(/\.\*\?$/,"*")}function l(d){return d instanceof Error?d.stack||d.message:d}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}return _x=e,_x}var vI;function Fne(){return vI||(vI=1,function(e,t){var n={};t.formatArgs=o,t.save=a,t.load=i,t.useColors=r,t.storage=s(),t.destroy=(()=>{let l=!1;return()=>{l||(l=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function r(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let l;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(l=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(l[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function o(l){if(l[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+l[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const u="color: "+this.color;l.splice(1,0,u,"color: inherit");let d=0,f=0;l[0].replace(/%[a-zA-Z%]/g,p=>{p!=="%%"&&(d++,p==="%c"&&(f=d))}),l.splice(f,0,u)}t.log=console.debug||console.log||(()=>{});function a(l){try{l?t.storage.setItem("debug",l):t.storage.removeItem("debug")}catch{}}function i(){let l;try{l=t.storage.getItem("debug")}catch{}return!l&&typeof z9<"u"&&"env"in z9&&(l=n.DEBUG),l}function s(){try{return localStorage}catch{}}e.exports=Lne()(t);const{formatters:c}=e.exports;c.j=function(l){try{return JSON.stringify(l)}catch(u){return"[UnexpectedJSONParseError]: "+u.message}}}(xx,xx.exports)),xx.exports}Fne(),Ine();const bI=(e,t)=>({id:e.id,type:e.node_type,position:{x:e.x||0,y:e.y||0},width:e.width||void 0,height:e.height||void 0,data:{loading:!1,flowNode:e,...t}}),Bne=e=>({id:e.id,target:e.target,source:e.target,targetHandle:e.targetHandle,sourceHandle:e.sourceHandle}),xI=e=>({id:e.id,source:e.source,target:e.target,targetHandle:e.targetHandle,sourceHandle:e.sourceHandle}),$ne=e=>e.filter(t=>"edgeId"in t?`${t.edgeId}`.startsWith("xy-edge__"):!1),jx=(e,t,n)=>{const r=[];return{changes:e.map(o=>{var c;const a=t.find(l=>o.id===l.id);a||r.push(o.id);const i=(c=n==null?void 0:n[o.source_type])==null?void 0:c.find(l=>(l==null?void 0:l.id)===o.source_id),s=bI(o,{...a==null?void 0:a.data,entity:i});return{type:a?"replace":"add",id:o.id,item:a?Bf({...a||{},data:void 0},Qc(s,Jc)):s}}),newIds:[]}},Ex=(e,t)=>{const n=[],r=[],o=e.map(a=>{const i=t.find(s=>a.source===s.source&&a.target===s.target);return!i||i.id!==a.id?(i&&r.push(i.id),{type:"add",item:xI(a)}):(n.push(a.id),{type:"replace",item:xI(a)})});return t.forEach(a=>{n.includes(a.id)||r.push(a.id)}),{changes:o,updatedIds:n,deletedIds:r}},Sx={width:440,height:360},Vf={width:380,height:650},wl={[oe.Toolbox]:"toolbox",[oe.SessionInfo]:"session-info",[oe.DefaultEmbeddingModel]:"default-embedding-model",[oe.ApplicationBar]:"application-bar"},zne={id:wl[oe.Toolbox],type:oe.Toolbox,position:{x:10+Vf.width+20,y:10},measured:Sx,data:{}},Vne={id:wl[oe.SessionInfo],type:oe.SessionInfo,position:{x:10,y:10},measured:Vf,data:{}},Une={id:wl[oe.DefaultEmbeddingModel],type:oe.DefaultEmbeddingModel,position:{x:10+Vf.width+Sx.width+40,y:10},data:{model:Swe}},Hne={id:wl[oe.ApplicationBar],type:oe.ApplicationBar,position:{x:10+Vf.width+Sx.width+40,y:80},data:{}},Wne=[zne,Vne,Une,Hne],qne=[oe.Toolbox,oe.SessionInfo,oe.ApplicationBar,oe.EditorApp,oe.CodeContainerApp],wI={flowNodes:[],flowEdges:[],ready:!0,flowEdgeLoading:!1,flowNodeLoading:!1,syncedNodes:[],syncedEdges:[],syncNodeQueue:[],syncEdgeQueue:[],edges:[],nodes:Wne},Uf=async e=>{const t=await ce("FlowNode").find(e),n=t.reduce((o,a)=>{var i;return o[a.source_type]||(o[a.source_type]=[]),(i=o[a.source_type])==null||i.push(a),o},{}),r={};return await Promise.all(Object.entries(n).map(async([o,a])=>{const i=o;r[i]=await ce(i).find({where:{id:qn(a.map(s=>s.source_id))}})})),{flowNodes:t,entityGroups:n,flowNodeDatas:r}},Yne=(e,t)=>({reset:()=>{e(wI)},setNodes:n=>{if(typeof n=="function"){e({nodes:n(t().nodes)});return}e({nodes:n})},setEdges:n=>{if(typeof n=="function"){e({edges:n(t().edges)});return}e({edges:n})},updateNodes:n=>{const r=t().nodes;e({nodes:Da(n,r)})},updateEdges:n=>{const r=t().edges;e({edges:gl(n,r)})},addConnectionToEdges:n=>{const r=t().edges;e({edges:hT(n,r)})},flowNodesToNodes:(n,r={})=>{const o=t().nodes,{changes:a}=jx(n,o,r);e({nodes:Da(a,o)})},flowEdgesToEdges:n=>{const r=t().edges,{changes:o,updatedIds:a,deletedIds:i}=Ex(n,r);r.forEach(s=>{a.includes(s.id)||i.push(s.id)}),i.forEach(s=>{o.push({type:"remove",id:s})}),e({edges:gl(o,r)})},getNodes:n=>t().nodes.filter(r=>n.includes(r.id)),removeSyncNodeQueue:n=>{const{syncNodeQueue:r}=t();for(const o of n){const a=r.findIndex(i=>i.timestamp===o);a>-1&&r.splice(a,1)}e({syncNodeQueue:r})},removeSyncEdgeQueue:n=>{const{syncEdgeQueue:r}=t();for(const o of n){const a=r.findIndex(i=>i.timestamp===o);a>-1&&r.splice(a,1)}e({syncEdgeQueue:r})},pushSyncNodeQueue:(n,r)=>{const{syncNodeQueue:o}=t();e({syncNodeQueue:[...o,{query:r,timestamp:Date.now(),syncType:n}]})},pushSyncEdgeQueue:()=>{const{syncEdgeQueue:n}=t();e({syncEdgeQueue:[...n,{timestamp:Date.now()}]})},findFlowNodesWithSource:async(n,r)=>{try{e({flowNodeLoading:!0});const{flowNodes:o,flowNodeDatas:a}=await Uf(n);if(r!=null&&r.clean)e({flowNodes:o,nodes:o.map(i=>{var c;const s=(c=a==null?void 0:a[i.source_type])==null?void 0:c.find(l=>l.id===i.source_id);return bI(i,{data:s})})});else{const i=t().flowNodes,s=o.map(u=>u.id),c=t().nodes,{changes:l}=jx(o,c,a);e({flowNodes:[...i.filter(u=>!s.includes(u.id)),...o],nodes:Da(l,c)})}return o}finally{e({flowNodeLoading:!1})}},findFlowEdges:async(n,r)=>{try{e({flowEdgeLoading:!0});const o=await ce("FlowEdge").find(n),a=t().flowEdges,i=o.map(s=>s.id);if(r!=null&&r.clean)e({flowEdges:o,edges:o.map(s=>Bne(s))});else{const s=t().edges,{changes:c}=Ex(o,s);e({flowEdges:[...a.filter(l=>!i.includes(l.id)),...o],edges:gl(c,s)})}return o}finally{e({flowEdgeLoading:!1})}},deleteFlowNode:async n=>{try{if(!n.id&&!n.source_type&&!n.source_id)throw new Error("Missing flow node indentify");const r=await ce("FlowNode").findOne({where:n.id?{id:n.id}:{source_type:n.source_type,source_id:n.source_id}});if(r){await ce("FlowNode").delete(r.id);const o=t().flowNodes;r.source_type&&r.source_id&&await ce(r.source_type).delete(r.source_id).catch(i=>{Or("Failed to delete source entity",r.source_type,r.source_id,i)});const a=t().nodes;e({flowNodes:o.filter(i=>i.id!==r.id),nodes:Da([{type:"remove",id:r.id}],a)})}}catch(r){Or("Failed to delete flow node",r)}},deleteFlowEdge:async n=>{try{if(!n.id&&!n.source&&!n.target)throw new Error("Missing flow edge indentify");const r=await ce("FlowEdge").findOne({where:n.id?{id:n.id}:{source:n.source,target:n.target}});if(r){await ce("FlowEdge").delete(r.id);const o=t().flowEdges;e({flowEdges:o.filter(a=>a.id!==r.id)})}}catch(r){Or("Failed to delete flow edge",r)}},updateFlowNode:async(n,r)=>{var o;try{if(!((o=Ze.getState().currentSession)!=null&&o.id))throw new Error("Session not found");if(!n.id)throw new Error("Missing flow node indentify");await ce("FlowNode").update(n.id,n);const a=t().flowNodes.map(i=>i.id===n.id?{...i,...n}:i);e({flowNodes:r!=null&&r.silent?a:[...a]})}catch(a){Or("Failed to create or update flow node",a,n)}},createOrUpdateFlowNode:async(n,r)=>{var o;try{const a=Ze.getState().currentSession;if(!(a!=null&&a.id))throw new Error("Session not found");if(!n.id&&(!n.source_type||!n.source_id))throw new Error("Missing flow node indentify");let i,s=n!=null&&n.id?t().flowNodes.find(p=>p.id===n.id):void 0;if(!s&&(n.id||n.source_type&&n.source_id)&&(s=await ce("FlowNode").findOne({where:n.id?{id:n.id}:{source_type:n.source_type,source_id:n.source_id}})),s)i=Bf(s,Qc(n,Jc)),r!=null&&r.lazy?ce("FlowNode").update(s.id,i):await ce("FlowNode").update(s.id,i);else if(n.source_id&&n.source_type)i={...n,source_id:`${n.source_id}`,source_type:`${n.source_type}`,node_type:n.node_type||"NEW_MESSAGE",session_id:n.session_id||(a==null?void 0:a.id)},r!=null&&r.lazy?(i.id=ya(),ce("FlowNode").save(i)):i=await ce("FlowNode").save(i);else throw new Error("Missing source id and type");let c;const l=t().nodes.find(p=>p.id===i.id);i.source_type&&!l?c=await ce(i.source_type).findOne({where:{id:n.source_id}}):i.source_type&&l&&(c=(o=l==null?void 0:l.data)==null?void 0:o.entity);const u=t().flowNodes,d=t().nodes,{changes:f}=jx([i],d,{[i.source_type]:[c]});return e({flowNodes:[...u.filter(p=>p.id!==i.id),i],nodes:Da(f,d)}),i}catch(a){Or("Failed to create or update flow node",a,n)}},createOrUpdateFlowEdge:async(n,r)=>{try{const o=Ze.getState().currentSession;if(!(o!=null&&o.id))throw new Error("Session not found");if(!n.id&&(!n.source||!n.target))throw new Error("Missing flow node indentify");let a,i=n!=null&&n.id?t().flowEdges.find(l=>l.id===n.id):void 0;if(i&&(n.id||n.source&&n.target)&&(i=await ce("FlowEdge").findOne({where:n.id?{id:n.id}:{source:n.source,target:n.target}})),i)a=Bf(i,Qc(n,Jc)),r!=null&&r.lazy?ce("FlowEdge").update(i.id,a):await ce("FlowEdge").update(i.id,a);else if(n.source&&n.target)a={...n,source:`${n.source}`,target:`${n.target}`,session_id:n.session_id||(o==null?void 0:o.id)},r!=null&&r.lazy?(a.id=ya(),ce("FlowEdge").save(a)):a=await ce("FlowEdge").save(a);else throw new Error("Missing source and target");const s=t().flowEdges,c=t().edges;return e({flowEdges:[...s.filter(l=>l.id!==a.id),a],edges:gl(Ex([a],c).changes,c)}),a}catch(o){Or("Failed to create or update flow node",o)}}}),Kne=()=>{var E;const[e,t]=g.useState(),[n,r]=g.useState(),[o,a]=g.useState(),[i,s]=g.useState([]),[c,l]=g.useState(),u=g.useRef(),d=g.useRef({}),f=Ze(S=>S.currentSession),p=sn(S=>S.loadModel),y=g.useCallback(async S=>{var k;if(!f)return;const O=await ce("JSONData").findOne({where:{id:S.source_id,session_id:f==null?void 0:f.id}});O&&((k=u.current)==null||k.call(u,O.data?O.data:[]),l({node:S,enity:O}))},[f]),m=g.useCallback(async S=>{var C;const O=(S==null?void 0:S.sessionId)||(f==null?void 0:f.id),k=(S==null?void 0:S.threadNode)||(n==null?void 0:n.threadNode),N=(S==null?void 0:S.prompts)||(e==null?void 0:e.prompts);if(!O||!(k!=null&&k.id))return;const P=N==null?void 0:N.map(M=>{if(M.type!=="few_shot_example")switch(M.role){case"ai":case"assistant":case"tool":return{id:M.id,content:M.content,role:"assistant"};case"system":return{id:M.id,content:M.content,role:"system"};default:return{id:M.id,content:M.content,role:"user"}}}).filter(Boolean),R=await ce("JSONData").save({headers:"item",session_id:O,json:"",data:P});if(!R)return;const A=await ce("FlowNode").save({session_id:O,source_id:R.id,source_type:"JSONData",node_type:"JSON_DATA",x:0,y:0});if(A)return await ce("FlowEdge").save({session_id:O,source:k.id,target:A.id}),(C=u.current)==null||C.call(u,P),l({node:A,enity:R}),{jsonData:R,jsonDataNode:A}},[e==null?void 0:e.prompts,f==null?void 0:f.id,n==null?void 0:n.threadNode]),v=g.useCallback(async(S,O)=>{if(!f)return;const k=await ce("FlowEdge").findOne({where:{session_id:f.id,source:S.id},order:{id:"DESC"}});if(k){const N=await ce("FlowNode").findOne({where:{id:k.target,session_id:f.id}});if(!N)return;await y(N)}else if(!await m({sessionId:f.id,threadNode:S,prompts:O||[]}))return},[m,f,y]),b=g.useCallback(async S=>{if(S!=null&&S.length&&(f!=null&&f.id)){const O=(await Promise.all(S.map(async k=>ce("FlowEdge").find({where:{target:k.source.id}}).then(N=>Uf({where:{session_id:f.id,id:qn(N.map(P=>P.source))}}).then(P=>({...P,...k})))))).map(k=>{var C,M,T,D;const N=k.flowNodes.find(I=>I.source_type==="Prompt"),P=k.flowNodes.find(I=>I.source_type==="VectorDatabase");if(!P||!N)return;const R=(M=(C=k.flowNodeDatas)==null?void 0:C.Prompt)==null?void 0:M.find(I=>I.id===N.source_id),A=(D=(T=k.flowNodeDatas)==null?void 0:T.VectorDatabase)==null?void 0:D.find(I=>I.id===P.source_id);return{promptNode:N,vectorDatabaseNode:P,placeholderNode:k.source,placeholderEntity:k.entity,promptEntity:R,vectorDatabaseEntity:A}}).filter(Boolean);s(O)}},[f==null?void 0:f.id]),x=g.useCallback(async()=>{try{if(d.current.handling=f==null?void 0:f.id,!(f!=null&&f.id)||!(f!=null&&f.main_source_id)||(f==null?void 0:f.main_source_type)!=="Thread")return;const[S,O]=await Promise.all([ce("Thread").findOne({where:{id:f.main_source_id,session_id:f.id}}),ce("FlowNode").findOne({where:{id:f.main_node_id}})]);if(!S||!O)return;const k=await ce("FlowEdge").find({where:{session_id:f.id,target:O.id}}),{flowNodes:N,flowNodeDatas:P}=await Uf({where:{session_id:f.id,id:qn(k.map(I=>I.source))}}),R=(await ce("FlowEdge").find({where:{session_id:f.id}})).filter(I=>I.target===O.id).map(I=>{var B;const L=N.find(U=>U.id===I.source);return{connection:I,source:L,entity:(B=P==null?void 0:P[L.source_type])==null?void 0:B.find(U=>U.id===L.source_id)}}),A=R.find(I=>I.source.source_type==="LLM"),C=R.filter(I=>I.source.source_type==="Prompt"),M=R.find(I=>I.source.source_type==="Schema");if(!(A!=null&&A.entity))return;const T=R.filter(I=>I.source.source_type==="FlowNodePlaceholder");await b(T),await v(O,(C==null?void 0:C.map(I=>I.entity))||[]),a({llm:A.entity,status:et.Started,progress:""}),r({thread:S,threadNode:O});const D=M==null?void 0:M.entity;if(D){const I=await ce("SchemaItem").find({where:{schema_id:D.id}});D.schema_items=I||[]}t({prompts:(C==null?void 0:C.map(I=>I.entity))||[],schema:D}),d.current.handled=f.id}finally{d.current.handling=void 0}},[f==null?void 0:f.id,f==null?void 0:f.main_node_id,f==null?void 0:f.main_source_id,f==null?void 0:f.main_source_type,b,v]),_=g.useCallback(async()=>{if(o!=null&&o.llm.name)try{a(S=>S&&{...S,status:et.Loading}),await p(o==null?void 0:o.llm.name,S=>{a(O=>O&&{...O,progress:S.text})}),a(S=>S&&{...S,status:et.Loaded,progress:""})}catch{a(S=>S&&{...S,status:et.Started,progress:""})}},[(E=o==null?void 0:o.llm)==null?void 0:E.name,p]),w=g.useCallback(S=>(u.current=S,()=>{u.current=void 0}),[]),j=g.useCallback(async S=>{!(c!=null&&c.node)||!(c!=null&&c.enity)||await ce("JSONData").save({...c.enity,data:S})},[c==null?void 0:c.enity,c==null?void 0:c.node]);return g.useEffect(()=>{d.current.handling||(d==null?void 0:d.current.handled)===(f==null?void 0:f.id)||x()},[f==null?void 0:f.id,x]),{...e,loadLLM:_,threadInfo:n,mainLLMInfo:o,retriverInfo:i,currentDataNode:c,updateMessagesData:j,addNewDataNode:m,selectDataNode:y,onThreadMessagesLoaded:w}};class Xne extends Cwe{get lc_attributes(){return{partialVariables:void 0}}constructor(t){super(t),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompts",this._getPromptType()]}),Object.defineProperty(this,"inputVariables",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputParser",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"partialVariables",{enumerable:!0,configurable:!0,writable:!0,value:void 0});const{inputVariables:n}=t;if(n.includes("stop"))throw new Error("Cannot have an input variable named 'stop', as it is used internally, please rename.");Object.assign(this,t)}async mergePartialAndUserVariables(t){const n=this.partialVariables??{},r={};for(const[o,a]of Object.entries(n))typeof a=="string"?r[o]=a:r[o]=await a();return{...r,...t}}async invoke(t,n){return this._callWithConfig(r=>this.formatPromptValue(r),t,{...n,runType:"prompt"})}serialize(){throw new Error("Use .toJSON() instead")}static async deserialize(t){switch(t._type){case"prompt":{const{PromptTemplate:n}=await Nt(async()=>{const{PromptTemplate:r}=await Promise.resolve().then(()=>Mx);return{PromptTemplate:r}},[]);return n.deserialize(t)}case void 0:{const{PromptTemplate:n}=await Nt(async()=>{const{PromptTemplate:r}=await Promise.resolve().then(()=>Mx);return{PromptTemplate:r}},void 0);return n.deserialize({...t,_type:"prompt"})}case"few_shot":{const{FewShotPromptTemplate:n}=await Nt(async()=>{const{FewShotPromptTemplate:r}=await import("./few_shot-CD6ETBRz.js").then(async o=>(await o.__tla,o));return{FewShotPromptTemplate:r}},__vite__mapDeps([0,1,2,3,4,5,6]));return n.deserialize(t)}default:throw new Error(`Invalid prompt type in config: ${t._type}`)}}}class Qne extends Owe{}class Jne extends Qne{static lc_name(){return"StringPromptValue"}constructor(t){super({value:t}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompt_values"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.value=t}toString(){return this.value}toChatMessages(){return[new Fu(this.value)]}}pS=class extends Xne{async formatPromptValue(e){const t=await this.format(e);return new Jne(t)}};var Gne=Object.prototype.toString,rs=Array.isArray||function(e){return Gne.call(e)==="[object Array]"};function Cx(e){return typeof e=="function"}function Zne(e){return rs(e)?"array":typeof e}function Ox(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function _I(e,t){return e!=null&&typeof e=="object"&&t in e}function ere(e,t){return e!=null&&typeof e!="object"&&e.hasOwnProperty&&e.hasOwnProperty(t)}var tre=RegExp.prototype.test;function nre(e,t){return tre.call(e,t)}var rre=/\S/;function ore(e){return!nre(rre,e)}var are={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function ire(e){return String(e).replace(/[&<>"'`=\/]/g,function(t){return are[t]})}var sre=/\s*/,cre=/\s+/,jI=/\s*=/,lre=/\s*\}/,ure=/#|\^|\/|>|\{|&|=|!/;function dre(e,t){if(!e)return[];var n=!1,r=[],o=[],a=[],i=!1,s=!1,c="",l=0;function u(){if(i&&!s)for(;a.length;)delete o[a.pop()];else a=[];i=!1,s=!1}var d,f,p;function y(O){if(typeof O=="string"&&(O=O.split(cre,2)),!rs(O)||O.length!==2)throw new Error("Invalid tags: "+O);d=new RegExp(Ox(O[0])+"\\s*"),f=new RegExp("\\s*"+Ox(O[1])),p=new RegExp("\\s*"+Ox("}"+O[1]))}y(t||_n.tags);for(var m=new _l(e),v,b,x,_,w,j;!m.eos();){if(v=m.pos,x=m.scanUntil(d),x)for(var E=0,S=x.length;E<S;++E)_=x.charAt(E),ore(_)?(a.push(o.length),c+=_):(s=!0,n=!0,c+=" "),o.push(["text",_,v,v+1]),v+=1,_===`
`&&(u(),c="",l=0,n=!1);if(!m.scan(d))break;if(i=!0,b=m.scan(ure)||"name",m.scan(sre),b==="="?(x=m.scanUntil(jI),m.scan(jI),m.scanUntil(f)):b==="{"?(x=m.scanUntil(p),m.scan(lre),m.scanUntil(f),b="&"):x=m.scanUntil(f),!m.scan(f))throw new Error("Unclosed tag at "+m.pos);if(b==">"?w=[b,x,v,m.pos,c,l,n]:w=[b,x,v,m.pos],l++,o.push(w),b==="#"||b==="^")r.push(w);else if(b==="/"){if(j=r.pop(),!j)throw new Error('Unopened section "'+x+'" at '+v);if(j[1]!==x)throw new Error('Unclosed section "'+j[1]+'" at '+v)}else b==="name"||b==="{"||b==="&"?s=!0:b==="="&&y(x)}if(u(),j=r.pop(),j)throw new Error('Unclosed section "'+j[1]+'" at '+m.pos);return pre(fre(o))}function fre(e){for(var t=[],n,r,o=0,a=e.length;o<a;++o)n=e[o],n&&(n[0]==="text"&&r&&r[0]==="text"?(r[1]+=n[1],r[3]=n[3]):(t.push(n),r=n));return t}function pre(e){for(var t=[],n=t,r=[],o,a,i=0,s=e.length;i<s;++i)switch(o=e[i],o[0]){case"#":case"^":n.push(o),r.push(o),n=o[4]=[];break;case"/":a=r.pop(),a[5]=o[2],n=r.length>0?r[r.length-1][4]:t;break;default:n.push(o)}return t}function _l(e){this.string=e,this.tail=e,this.pos=0}_l.prototype.eos=function(){return this.tail===""},_l.prototype.scan=function(e){var t=this.tail.match(e);if(!t||t.index!==0)return"";var n=t[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n},_l.prototype.scanUntil=function(e){var t=this.tail.search(e),n;switch(t){case-1:n=this.tail,this.tail="";break;case 0:n="";break;default:n=this.tail.substring(0,t),this.tail=this.tail.substring(t)}return this.pos+=n.length,n};function os(e,t){this.view=e,this.cache={".":this.view},this.parent=t}os.prototype.push=function(e){return new os(e,this)},os.prototype.lookup=function(e){var t=this.cache,n;if(t.hasOwnProperty(e))n=t[e];else{for(var r=this,o,a,i,s=!1;r;){if(e.indexOf(".")>0)for(o=r.view,a=e.split("."),i=0;o!=null&&i<a.length;)i===a.length-1&&(s=_I(o,a[i])||ere(o,a[i])),o=o[a[i++]];else o=r.view[e],s=_I(r.view,e);if(s){n=o;break}r=r.parent}t[e]=n}return Cx(n)&&(n=n.call(this.view)),n};function pn(){this.templateCache={_cache:{},set:function(e,t){this._cache[e]=t},get:function(e){return this._cache[e]},clear:function(){this._cache={}}}}pn.prototype.clearCache=function(){typeof this.templateCache<"u"&&this.templateCache.clear()},pn.prototype.parse=function(e,t){var n=this.templateCache,r=e+":"+(t||_n.tags).join(":"),o=typeof n<"u",a=o?n.get(r):void 0;return a==null&&(a=dre(e,t),o&&n.set(r,a)),a},pn.prototype.render=function(e,t,n,r){var o=this.getConfigTags(r),a=this.parse(e,o),i=t instanceof os?t:new os(t,void 0);return this.renderTokens(a,i,n,e,r)},pn.prototype.renderTokens=function(e,t,n,r,o){for(var a="",i,s,c,l=0,u=e.length;l<u;++l)c=void 0,i=e[l],s=i[0],s==="#"?c=this.renderSection(i,t,n,r,o):s==="^"?c=this.renderInverted(i,t,n,r,o):s===">"?c=this.renderPartial(i,t,n,o):s==="&"?c=this.unescapedValue(i,t):s==="name"?c=this.escapedValue(i,t,o):s==="text"&&(c=this.rawValue(i)),c!==void 0&&(a+=c);return a},pn.prototype.renderSection=function(e,t,n,r,o){var a=this,i="",s=t.lookup(e[1]);function c(d){return a.render(d,t,n,o)}if(s){if(rs(s))for(var l=0,u=s.length;l<u;++l)i+=this.renderTokens(e[4],t.push(s[l]),n,r,o);else if(typeof s=="object"||typeof s=="string"||typeof s=="number")i+=this.renderTokens(e[4],t.push(s),n,r,o);else if(Cx(s)){if(typeof r!="string")throw new Error("Cannot use higher-order sections without the original template");s=s.call(t.view,r.slice(e[3],e[5]),c),s!=null&&(i+=s)}else i+=this.renderTokens(e[4],t,n,r,o);return i}},pn.prototype.renderInverted=function(e,t,n,r,o){var a=t.lookup(e[1]);if(!a||rs(a)&&a.length===0)return this.renderTokens(e[4],t,n,r,o)},pn.prototype.indentPartial=function(e,t,n){for(var r=t.replace(/[^ \t]/g,""),o=e.split(`
`),a=0;a<o.length;a++)o[a].length&&(a>0||!n)&&(o[a]=r+o[a]);return o.join(`
`)},pn.prototype.renderPartial=function(e,t,n,r){if(n){var o=this.getConfigTags(r),a=Cx(n)?n(e[1]):n[e[1]];if(a!=null){var i=e[6],s=e[5],c=e[4],l=a;s==0&&c&&(l=this.indentPartial(a,c,i));var u=this.parse(l,o);return this.renderTokens(u,t,n,l,r)}}},pn.prototype.unescapedValue=function(e,t){var n=t.lookup(e[1]);if(n!=null)return n},pn.prototype.escapedValue=function(e,t,n){var r=this.getConfigEscape(n)||_n.escape,o=t.lookup(e[1]);if(o!=null)return typeof o=="number"&&r===_n.escape?String(o):r(o)},pn.prototype.rawValue=function(e){return e[1]},pn.prototype.getConfigTags=function(e){return rs(e)?e:e&&typeof e=="object"?e.tags:void 0},pn.prototype.getConfigEscape=function(e){if(e&&typeof e=="object"&&!rs(e))return e.escape};var _n={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(e){jl.templateCache=e},get templateCache(){return jl.templateCache}},jl=new pn;_n.clearCache=function(){return jl.clearCache()},_n.parse=function(e,t){return jl.parse(e,t)},_n.render=function(e,t,n,r){if(typeof e!="string")throw new TypeError('Invalid template! Template should be a "string" but "'+Zne(e)+'" was given as the first argument for mustache#render(template, view, partials)');return jl.render(e,t,n,r)},_n.escape=ire,_n.Scanner=_l,_n.Context=os,_n.Writer=pn;function EI(){_n.escape=e=>e}let Nx,SI,CI,OI,NI,Hf,MI,kI;Nx=e=>{const t=e.split(""),n=[],r=(a,i)=>{for(let s=i;s<t.length;s+=1)if(a.includes(t[s]))return s;return-1};let o=0;for(;o<t.length;)if(t[o]==="{"&&o+1<t.length&&t[o+1]==="{")n.push({type:"literal",text:"{"}),o+=2;else if(t[o]==="}"&&o+1<t.length&&t[o+1]==="}")n.push({type:"literal",text:"}"}),o+=2;else if(t[o]==="{"){const a=r("}",o);if(a<0)throw new Error("Unclosed '{' in template.");n.push({type:"variable",name:t.slice(o+1,a).join("")}),o=a+1}else{if(t[o]==="}")throw new Error("Single '}' in template.");{const a=r("{}",o),i=(a<0?t.slice(o):t.slice(o,a)).join("");n.push({type:"literal",text:i}),o=a<0?t.length:a}}return n},SI=e=>e.map(t=>t[0]==="name"?{type:"variable",name:t[1].includes(".")?t[1].split(".")[0]:t[1]}:["#","&","^",">"].includes(t[0])?{type:"variable",name:t[1]}:{type:"literal",text:t[1]}),CI=e=>{EI();const t=_n.parse(e);return SI(t)},OI=(e,t)=>Nx(e).reduce((n,r)=>{if(r.type==="variable"){if(r.name in t)return n+t[r.name];throw new Error(`(f-string) Missing value for input ${r.name}`)}return n+r.text},""),NI=(e,t)=>(EI(),_n.render(e,t)),Hf={"f-string":OI,mustache:NI},MI={"f-string":Nx,mustache:CI},pi=(e,t,n)=>Hf[t](e,n),kI=(e,t)=>MI[t](e),hS=(e,t,n)=>{if(!(t in Hf)){const r=Object.keys(Hf);throw new Error(`Invalid template format. Got \`${t}\`;
                         should be one of ${r}`)}try{const r=n.reduce((o,a)=>(o[a]="foo",o),{});Array.isArray(e)?e.forEach(o=>{if(o.type==="text")pi(o.text,t,r);else if(o.type==="image_url")if(typeof o.image_url=="string")pi(o.image_url,t,r);else{const a=o.image_url.url;pi(a,t,r)}else throw new Error(`Invalid message template received. ${JSON.stringify(o,null,2)}`)}):pi(e,t,r)}catch(r){throw new Error(`Invalid prompt schema: ${r.message}`)}},$o=class extends pS{static lc_name(){return"PromptTemplate"}constructor(e){if(super(e),Object.defineProperty(this,"template",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"templateFormat",{enumerable:!0,configurable:!0,writable:!0,value:"f-string"}),Object.defineProperty(this,"validateTemplate",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"additionalContentFields",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e.templateFormat==="mustache"&&e.validateTemplate===void 0&&(this.validateTemplate=!1),Object.assign(this,e),this.validateTemplate){if(this.templateFormat==="mustache")throw new Error("Mustache templates cannot be validated.");let t=this.inputVariables;this.partialVariables&&(t=t.concat(Object.keys(this.partialVariables))),hS(this.template,this.templateFormat,t)}}_getPromptType(){return"prompt"}async format(e){const t=await this.mergePartialAndUserVariables(e);return pi(this.template,this.templateFormat,t)}static fromExamples(e,t,n,r=`

`,o=""){const a=[o,...e,t].join(r);return new $o({inputVariables:n,template:a})}static fromTemplate(e,t){const{templateFormat:n="f-string",...r}=t??{},o=new Set;return kI(e,n).forEach(a=>{a.type==="variable"&&o.add(a.name)}),new $o({inputVariables:[...o],templateFormat:n,template:e,...r})}async partial(e){const t=this.inputVariables.filter(o=>!(o in e)),n={...this.partialVariables??{},...e},r={...this,inputVariables:t,partialVariables:n};return new $o(r)}serialize(){if(this.outputParser!==void 0)throw new Error("Cannot serialize a prompt template with an output parser");return{_type:this._getPromptType(),input_variables:this.inputVariables,template:this.template,template_format:this.templateFormat}}static async deserialize(e){if(!e.template)throw new Error("Prompt template must have a template");return new $o({inputVariables:e.input_variables,template:e.template,templateFormat:e.template_format})}};let Mx,PI,AI,TI,kx;Mx=Object.freeze(Object.defineProperty({__proto__:null,PromptTemplate:$o},Symbol.toStringTag,{value:"Module"})),PI=()=>{const[e]=g.useState(!1),t=li(a=>a.similaritySearchWithScore),{stream:n}=Qm(),r=g.useCallback(async(a,i)=>{if(!(i!=null&&i.length))return[];const s=[];return await Promise.all(i.map(async c=>{var u,d,f,p;const l=c.placeholderEntity;if(l)switch(l.placeholder_type){case yi.VECTOR_DATABASE_RETREIVER:{if(!c.promptNode||!c.promptEntity||!c.vectorDatabaseNode||!c.vectorDatabaseEntity)return;const y=(u=l.metadata)!=null&&u.k?+((d=l.metadata)==null?void 0:d.k):1;let m=(f=l.metadata)!=null&&f.minimalScore?+((p=l.metadata)==null?void 0:p.minimalScore):void 0;m&&m>1&&(m=m/100);const v=await t({databaseId:c.vectorDatabaseEntity.id},a,y);if(!v)return[];const b=new $o({template:c.promptEntity.content,inputVariables:["context"]});s.push(new Bu(await b.format({context:m?v.filter(([,x])=>x>=m).map(([x])=>x.pageContent).join(`
`):v.map(([x])=>x.pageContent).join(`
`)})))}}})),s},[t]),o=g.useCallback(async(a,i,{retriverInfo:s},{schema:c,onMessageUpdate:l,onResponseMessageCreate:u,onInjectedMessages:d})=>{const f=[];s!=null&&s.length&&(f.push(...await r(a,s)),d==null||d(f));const p=i.map(m=>m.role==="system"?new V9(m.content):m.role==="user"?new Fu(m.content):new Bu(m.content));u==null||u();const{content:y}=await n(p,{schemas:c?[c]:void 0,onMessageUpdate:({content:m})=>{l==null||l({nodeData:{loading:!0,content:m}})}});return l==null||l({nodeData:{content:y}}),y},[r,n]);return{loading:e,sendMessage:o}},AI=ma(({onDelete:e})=>{const{t}=Me("dialogs"),[n,r]=g.useState(!1),o=Kt(),{toast:a}=Bt(),i=async()=>{try{r(!0),await e(),o.hide()}catch{a({variant:"destructive",description:t("delete_chat_data_node.errors.delete_failed")})}finally{r(!1)}};return h.jsx(jN,{open:o.visible,onOpenChange:o.hide,children:h.jsxs(rg,{children:[h.jsxs(og,{children:[h.jsx(ig,{children:t("delete_chat_data_node.title")}),h.jsx(sg,{children:t("delete_chat_data_node.description")})]}),h.jsxs(ag,{children:[h.jsx(lg,{onClick:o.hide,children:t("delete_chat_data_node.cancel")}),h.jsx(cg,{disabled:n,onClick:i,children:t("delete_chat_data_node.delete")})]})]})})}),Mn=g.memo(e=>{const{loading:t,...n}=e;return h.jsx(dt,{...n,disabled:e.disabled||t,children:t?h.jsx(ue,{name:"loader-circle",className:"animate-spin"}):e.children})}),TI=e=>{const t=(n,r=null)=>{let o=`{
`;return n.filter(a=>a.parent_id===r).forEach(a=>{if(a.type==="object"){const i=e.filter(c=>c.parent_id===a.id),s=t(i,a.id);o+=`  ${a.name}${a.required?"":"?"}: ${s}
`}else o+=`  // ${a.description||""}
  ${a.name}${a.required?"":"?"}: ${a.type};
`}),o+="}",o};return t(e)},kx=e=>{const t=(r,o=null)=>{let a="";return r.filter(i=>i.parent_id===o).forEach(i=>{if(i.type==="object"){const s=t(r,i.id);a+=`    ${i.name}: z.object({
${s}    })${i.required?"":".optional()"}.describe('${i.description||""}'),
`}else a+=`    ${i.name}: z.${i.type}()${i.required?"":".optional()"}.describe('${i.description||""}'),
`}),a};let n=`const schema = z.object({
`;return n+=t(e),n+="});",n};function Wf(){return h.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",className:"text-foreground",children:[h.jsx("circle",{cx:"4",cy:"12",r:"2",fill:"currentColor",children:h.jsx("animate",{id:"spinner_qFRN",begin:"0;spinner_OcgL.end+0.25s",attributeName:"cy",calcMode:"spline",dur:"0.6s",values:"12;6;12",keySplines:".33,.66,.66,1;.33,0,.66,.33"})}),h.jsx("circle",{cx:"12",cy:"12",r:"2",fill:"currentColor",children:h.jsx("animate",{begin:"spinner_qFRN.begin+0.1s",attributeName:"cy",calcMode:"spline",dur:"0.6s",values:"12;6;12",keySplines:".33,.66,.66,1;.33,0,.66,.33"})}),h.jsx("circle",{cx:"20",cy:"12",r:"2",fill:"currentColor",children:h.jsx("animate",{id:"spinner_OcgL",begin:"spinner_qFRN.begin+0.2s",attributeName:"cy",calcMode:"spline",dur:"0.6s",values:"12;6;12",keySplines:".33,.66,.66,1;.33,0,.66,.33"})})]})}const hre=e=>g.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",fill:"none",height:192,viewBox:"0 0 150 150",width:192,...e},g.createElement("clipPath",{id:"a"},g.createElement("path",{d:"m0 0h150v150h-150z"})),g.createElement("g",{clipPath:"url(#a)"},g.createElement("path",{d:"m150 0h-150v150h150z",fill:"#29b5e8"}),g.createElement("path",{clipRule:"evenodd",d:"m130.375 67.2532-14.096 8.1221 14.096 8.0536c.843.4872 1.581 1.1357 2.174 1.9084.592.7727 1.026 1.6545 1.278 2.5951.251.9406.315 1.9215.188 2.8867-.128.9652-.444 1.8959-.931 2.7388-.488.843-1.136 1.5817-1.909 2.174s-1.654 1.0267-2.595 1.2782-1.921.3154-2.887.1878c-.965-.1275-1.896-.444-2.739-.9312l-25.2559-14.5496c-1.1575-.6696-2.1128-1.6394-2.765-2.8068-.6523-1.1674-.9773-2.4893-.9408-3.826.0198-.5792.1089-1.1538.2653-1.7117.517-1.8711 1.7458-3.4654 3.4234-4.4419l25.256-14.4983c.847-.4892 1.782-.8067 2.751-.9343.97-.1275 1.955-.0627 2.899.1909.945.2536 1.83.6909 2.605 1.287.775.596 1.425 1.3391 1.913 2.1866.49.8402.808 1.7693.935 2.7334.128.964.063 1.9439-.191 2.8826-.254.9388-.692 1.8177-1.288 2.5859-.597.7681-1.34 1.4101-2.186 1.8887zm-13.343 39.3698-25.2478-14.5243c-1.1296-.6483-2.4091-.9896-3.7115-.9902s-2.5823.3397-3.7124.987c-1.1301.6472-2.0712 1.579-2.7297 2.7026-.6585 1.1237-1.0115 2.4001-1.0239 3.7024v29.0135c.0654 1.928.8772 3.755 2.264 5.095 1.3869 1.341 3.2403 2.09 5.1691 2.09 1.9289 0 3.7823-.749 5.1691-2.09 1.3868-1.34 2.1986-3.167 2.264-5.095v-16.261l14.1301 8.122c.843.488 1.774.805 2.739.933.966.128 1.947.064 2.888-.187s1.823-.685 2.596-1.277c.774-.592 1.423-1.331 1.91-2.174.488-.843.805-1.773.933-2.739.128-.965.065-1.946-.186-2.887s-.685-1.824-1.277-2.597-1.331-1.422-2.174-1.91zm-29.0992-28.3806-10.527 10.3986c-.3601.3349-.8269.5319-1.318.5563h-3.0897c-.49-.0294-.9551-.2257-1.318-.5563l-10.4671-10.4329c-.3274-.3573-.521-.817-.5478-1.3009v-3.081c.0283-.4861.2215-.9481.5478-1.3095l10.4671-10.4329c.3637-.3281.829-.5214 1.318-.5477h3.0897c.4899.0228.9562.2166 1.318.5477l10.4928 10.4329c.3237.3623.514.8243.5392 1.3095v3.081c-.0237.483-.2143.9428-.5392 1.3009zm-8.3874-2.8928c-.0404-.499-.2485-.9696-.5905-1.3352l-3.0383-3.004c-.3641-.3275-.8291-.5207-1.318-.5478h-.1113c-.4867.0255-.9495.2191-1.3094.5478l-3.0383 3.004c-.3262.3676-.5165.8358-.5392 1.3266v.1113c.0215.4834.2124.9439.5392 1.3009l3.0554 2.9955c.3607.3274.823.5208 1.3094.5477h.1113c.4889-.027.9539-.2203 1.318-.5477l3.0383-3.0212c.3282-.3576.5244-.8166.5563-1.3009zm-47.4914-31.2217 25.2563 14.4811c1.1308.648 2.4115.989 3.7149.9889 1.3033 0 2.584-.3409 3.7148-.989 1.1309-.648 2.0725-1.5806 2.7314-2.7051.659-1.1245 1.0123-2.4018 1.0249-3.7051v-28.9879c-.0654-1.9277-.8772-3.7546-2.264-5.0952s-3.2402-2.0899-5.1691-2.0899c-1.9288 0-3.7822.7493-5.169 2.0899-1.3869 1.3406-2.1987 3.1675-2.2641 5.0952v16.2613l-14.1473-8.1307c-.8429-.4877-1.7737-.8047-2.7392-.9328-.9654-.1281-1.9466-.0647-2.8876.1864s-1.8232.6852-2.5965 1.2773c-.7732.5921-1.4222 1.3307-1.91 2.1736-.4878.843-.8048 1.7738-.9329 2.7392-.128.9655-.0647 1.9467.1864 2.8876.2512.941.6852 1.8233 1.2773 2.5965.5921.7733 1.3307 1.4223 2.1737 1.9101zm55.4252 15.4739c1.4914.118 2.9836-.2193 4.2793-.9671l25.2475-14.5496c.843-.4877 1.582-1.1368 2.174-1.91s1.026-1.6555 1.277-2.5965.315-1.9222.187-2.8876c-.128-.9655-.445-1.8962-.933-2.7392-.488-.8429-1.137-1.5816-1.91-2.1737-.774-.5921-1.656-1.0261-2.597-1.2772-1.9-.5072-3.924-.2387-5.627.7464l-14.1298 8.1991v-16.2613c-.0654-1.9277-.8772-3.7546-2.264-5.0952-1.3868-1.3405-3.2402-2.0899-5.1691-2.0899-1.9288 0-3.7822.7494-5.169 2.0899-1.3869 1.3406-2.1987 3.1675-2.2641 5.0952v29.0136c-.0023 1.8784.7086 3.6876 1.9892 5.0619 1.2805 1.3743 3.0351 2.2111 4.909 2.3412zm-25.8554 31.5298c-1.4916-.1213-2.9847.2162-4.2793.9671l-25.2905 14.4893c-1.7024.985-2.9438 2.607-3.451 4.507s-.2387 3.924.7465 5.627c.9851 1.702 2.6061 2.943 4.5065 3.451 1.9004.507 3.9244.238 5.6268-.747l14.1473-8.122v16.261c.0654 1.928.8772 3.755 2.2641 5.096 1.3868 1.34 3.2402 2.09 5.169 2.09 1.9289 0 3.7823-.75 5.1691-2.09 1.3868-1.341 2.1986-3.168 2.264-5.096v-29.0645c-.0038-1.869-.7144-3.6673-1.9891-5.0341s-3.0192-2.2009-4.8834-2.3348zm-6.8468-13.5825c.4875-1.6032.414-3.3247-.2083-4.8806-.6224-1.5559-1.7564-2.8532-3.2152-3.6779l-25.2306-14.541c-1.704-.976-3.7248-1.2385-5.6216-.7303-1.8968.5083-3.5155 1.7461-4.5032 3.4433-.4889.84-.8065 1.7686-.9343 2.732-.1278.9635-.0632 1.9428.1899 2.8811.2531.9384.6897 1.8173 1.2846 2.5858.595.7686 1.3364 1.4115 2.1814 1.8917l14.096 8.1221-14.096 8.0536c-.8429.4861-1.5819 1.1334-2.1746 1.9051-.5928.7717-1.0277 1.6526-1.2801 2.5923-.2523.9398-.317 1.9201-.1905 2.8849s.4418 1.8952.9279 2.7382c.4861.8429 1.1335 1.5819 1.9051 2.1746.7717.5928 1.6526 1.0277 2.5924 1.2801.9397.2523 1.92.317 2.8848.1905s1.8952-.4418 2.7382-.9279l25.2306-14.5496c1.6248-.9071 2.8451-2.3965 3.4149-4.168z",fill:"#fff",fillRule:"evenodd"}))),mre=e=>g.createElement("svg",{className:"mr-2 w-5 h-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",width:48,height:48,...e},g.createElement("path",{fill:"#fbc02d",d:"M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12 s5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24s8.955,20,20,20 s20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"}),g.createElement("path",{fill:"#e53935",d:"M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039 l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"}),g.createElement("path",{fill:"#4caf50",d:"M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36 c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"}),g.createElement("path",{fill:"#1565c0",d:"M43.611,20.083L43.595,20L42,20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571 c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z"})),yre=e=>g.createElement("svg",{className:"mr-2 w-5 h-5",width:1024,height:1024,viewBox:"0 0 1024 1024",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},g.createElement("path",{d:"M44.522 44.5217H489.739V489.739H44.522V44.5217Z",fill:"#F35325"}),g.createElement("path",{d:"M534.261 44.5217H979.478V489.739H534.261V44.5217Z",fill:"#81BC06"}),g.createElement("path",{d:"M44.522 534.261H489.739V979.478H44.522V534.261Z",fill:"#05A6F0"}),g.createElement("path",{d:"M534.261 534.261H979.478V979.478H534.261V534.261Z",fill:"#FFBA08"})),gre=e=>g.createElement("svg",{id:"Layer_1","data-name":"Layer 1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 287.56 191",...e},g.createElement("defs",null,g.createElement("style",null,".cls-1{fill:#0081fb;}.cls-2{fill:url(#linear-gradient);}.cls-3{fill:url(#linear-gradient-2);}"),g.createElement("linearGradient",{id:"linear-gradient",x1:62.34,y1:101.45,x2:260.34,y2:91.45,gradientTransform:"matrix(1, 0, 0, -1, 0, 192)",gradientUnits:"userSpaceOnUse"},g.createElement("stop",{offset:0,stopColor:"#0064e1"}),g.createElement("stop",{offset:.4,stopColor:"#0064e1"}),g.createElement("stop",{offset:.83,stopColor:"#0073ee"}),g.createElement("stop",{offset:1,stopColor:"#0082fb"})),g.createElement("linearGradient",{id:"linear-gradient-2",x1:41.42,y1:53,x2:41.42,y2:126,gradientTransform:"matrix(1, 0, 0, -1, 0, 192)",gradientUnits:"userSpaceOnUse"},g.createElement("stop",{offset:0,stopColor:"#0082fb"}),g.createElement("stop",{offset:1,stopColor:"#0064e0"}))),g.createElement("title",null,"facebook-meta"),g.createElement("path",{className:"cls-1",d:"M31.06,126c0,11,2.41,19.41,5.56,24.51A19,19,0,0,0,53.19,160c8.1,0,15.51-2,29.79-21.76,11.44-15.83,24.92-38,34-52l15.36-23.6c10.67-16.39,23-34.61,37.18-47C181.07,5.6,193.54,0,206.09,0c21.07,0,41.14,12.21,56.5,35.11,16.81,25.08,25,56.67,25,89.27,0,19.38-3.82,33.62-10.32,44.87C271,180.13,258.72,191,238.13,191V160c17.63,0,22-16.2,22-34.74,0-26.42-6.16-55.74-19.73-76.69-9.63-14.86-22.11-23.94-35.84-23.94-14.85,0-26.8,11.2-40.23,31.17-7.14,10.61-14.47,23.54-22.7,38.13l-9.06,16c-18.2,32.27-22.81,39.62-31.91,51.75C84.74,183,71.12,191,53.19,191c-21.27,0-34.72-9.21-43-23.09C3.34,156.6,0,141.76,0,124.85Z"}),g.createElement("path",{className:"cls-2",d:"M24.49,37.3C38.73,15.35,59.28,0,82.85,0c13.65,0,27.22,4,41.39,15.61,15.5,12.65,32,33.48,52.63,67.81l7.39,12.32c17.84,29.72,28,45,33.93,52.22,7.64,9.26,13,12,19.94,12,17.63,0,22-16.2,22-34.74l27.4-.86c0,19.38-3.82,33.62-10.32,44.87C271,180.13,258.72,191,238.13,191c-12.8,0-24.14-2.78-36.68-14.61-9.64-9.08-20.91-25.21-29.58-39.71L146.08,93.6c-12.94-21.62-24.81-37.74-31.68-45C107,40.71,97.51,31.23,82.35,31.23c-12.27,0-22.69,8.61-31.41,21.78Z"}),g.createElement("path",{className:"cls-3",d:"M82.35,31.23c-12.27,0-22.69,8.61-31.41,21.78C38.61,71.62,31.06,99.34,31.06,126c0,11,2.41,19.41,5.56,24.51L10.14,167.91C3.34,156.6,0,141.76,0,124.85,0,94.1,8.44,62.05,24.49,37.3,38.73,15.35,59.28,0,82.85,0Z"})),vre=e=>g.createElement("svg",{className:"mr-2 w-5 h-5",width:256,height:233,viewBox:"0 0 256 233",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},g.createElement("path",{d:"M186.182 0h46.545v46.545h-46.545z"}),g.createElement("path",{fill:"#f7d046",d:"M209.455 0H256v46.545h-46.545z"}),g.createElement("path",{d:"M0 0h46.545v46.545H0zm0 46.545h46.545V93.09H0zm0 46.546h46.545v46.545H0zm0 46.545h46.545v46.545H0zm0 46.546h46.545v46.545H0z"}),g.createElement("path",{fill:"#f7d046",d:"M23.273 0h46.545v46.545H23.273z"}),g.createElement("path",{fill:"#f2a73b",d:"M209.455 46.545H256V93.09h-46.545zm-186.182 0h46.545V93.09H23.273z"}),g.createElement("path",{d:"M139.636 46.545h46.545V93.09h-46.545z"}),g.createElement("path",{fill:"#f2a73b",d:"M162.909 46.545h46.545V93.09h-46.545zm-93.091 0h46.545V93.09H69.818z"}),g.createElement("path",{fill:"#ee792f",d:"M116.364 93.091h46.545v46.545h-46.545zm46.545 0h46.545v46.545h-46.545zm-93.091 0h46.545v46.545H69.818z"}),g.createElement("path",{d:"M93.091 139.636h46.545v46.545H93.091z"}),g.createElement("path",{fill:"#eb5829",d:"M116.364 139.636h46.545v46.545h-46.545z"}),g.createElement("path",{fill:"#ee792f",d:"M209.455 93.091H256v46.545h-46.545zm-186.182 0h46.545v46.545H23.273z"}),g.createElement("path",{d:"M186.182 139.636h46.545v46.545h-46.545z"}),g.createElement("path",{fill:"#eb5829",d:"M209.455 139.636H256v46.545h-46.545z"}),g.createElement("path",{d:"M186.182 186.182h46.545v46.545h-46.545z"}),g.createElement("path",{fill:"#eb5829",d:"M23.273 139.636h46.545v46.545H23.273z"}),g.createElement("path",{fill:"#ea3326",d:"M209.455 186.182H256v46.545h-46.545zm-186.182 0h46.545v46.545H23.273z"})),bre="/NoLLMChat/assets/qwen-B-gSh3_v.webp",xre="/NoLLMChat/assets/smollm-CikBjd4F.png",wre="/NoLLMChat/assets/stablelm-BquePdQ7.png",_re="/NoLLMChat/assets/nomic-BjJqoFji.webp",jre="/NoLLMChat/assets/joshua-ByaReJuI.webp",bo=g.memo(({name:e,className:t,...n})=>(e=e.toLowerCase(),e.includes("gemma")?h.jsx(mre,{className:K("w-5 h-5",t),...n}):e!=null&&e.includes("qwen")?h.jsx("img",{className:K("w-5 h-5",t),src:bre,alt:"qwen",...n}):e!=null&&e.includes("phi")?h.jsx(yre,{className:K("w-5 h-5",t),...n}):e!=null&&e.includes("llama")?h.jsx(gre,{className:K("w-5 h-5",t),...n}):e!=null&&e.includes("smollm")?h.jsx("img",{className:K("w-5 h-5",t),src:xre,alt:"smollm",...n}):e!=null&&e.includes("mistral")?h.jsx(vre,{className:K("w-5 h-5",t),...n}):e!=null&&e.includes("snowflake")?h.jsx(hre,{className:K("w-5 h-5 rounded-full",t),...n}):e!=null&&e.includes("stablelm")?h.jsx("img",{className:K("w-5 h-5 rounded-full",t),src:wre,alt:"stablelm",...n}):e!=null&&e.includes("nomic")?h.jsx("img",{className:K("w-5 h-5 rounded-full",t),src:_re,alt:"nomic",...n}):e!=null&&e.includes("Xenova")||e!=null&&e.includes("janus")?h.jsx("img",{className:K("w-5 h-5 rounded-full",t),src:jre,alt:"Xenova",...n}):h.jsx(ue,{className:K("w-5 h-5",t),name:"brain"}))),Px=["Qwen2.5-1.5B-Instruct-q4f32_1-MLC","Qwen2.5-Coder-1.5B-Instruct-q4f16_1-MLC","stablelm-2-zephyr-1_6b-q4f16_1-MLC-1k","Phi-3.5-mini-instruct-q4f16_1-MLC-1k","Llama-3.2-3B-Instruct-q4f32_1-MLC"],El=g.memo(e=>{var s;const{name:t,model:n,isCached:r,isFunctionCalling:o}=e,{t:a}=Me("atoms"),i=g.useCallback(c=>c===1?"llm_info.model_types.embedding":c===2?"llm_info.model_types.vlm":"llm_info.model_types.llm",[]);if(n)return h.jsxs(h.Fragment,{children:[h.jsx(tn,{className:"",children:a(i(n.model_type))}),Px.some(c=>t&&c.includes(t))?h.jsx(tn,{className:"",variant:"outline",children:a("llm_info.recommended")}):null,r?h.jsx(tn,{className:"",variant:"outline",children:a("llm_info.cached")}):null,o?h.jsx(tn,{className:"",variant:"outline",children:a("llm_info.function_calling")}):null,n!=null&&n.low_resource_required?h.jsx(tn,{className:"",variant:"outline",children:a("llm_info.low_resource_required")}):null,(s=n==null?void 0:n.overrides)!=null&&s.context_window_size?h.jsxs(tn,{className:"",variant:"outline",children:[n.overrides.context_window_size.toLocaleString("en-US")," Tokens"]}):null,n!=null&&n.vram_required_MB?h.jsxs(tn,{className:"",variant:"outline",children:["VRAM: ",n.vram_required_MB.toLocaleString("en-US")," MB"]}):null]})}),Tt=g.forwardRef(({className:e,...t},n)=>h.jsx("div",{ref:n,className:K("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));Tt.displayName="Card";const hn=g.forwardRef(({className:e,...t},n)=>h.jsx("div",{ref:n,className:K("flex flex-col space-y-1.5 p-6",e),...t}));hn.displayName="CardHeader";const jn=g.forwardRef(({className:e,...t},n)=>h.jsx("h3",{ref:n,className:K("text-2xl font-semibold leading-none tracking-tight",e),...t}));jn.displayName="CardTitle";const RI=g.forwardRef(({className:e,...t},n)=>h.jsx("p",{ref:n,className:K("text-sm text-muted-foreground",e),...t}));RI.displayName="CardDescription";const mn=g.forwardRef(({className:e,...t},n)=>h.jsx("div",{ref:n,className:K("p-6 pt-0",e),...t}));mn.displayName="CardContent";const Zo=g.forwardRef(({className:e,...t},n)=>h.jsx("div",{ref:n,className:K("flex items-center p-6 pt-0",e),...t}));Zo.displayName="CardFooter";const Ere=g.memo(({llm:e,status:t,loadLLM:n,progress:r})=>{const{t:o}=Me("flows"),[a,i]=g.useState();g.useEffect(()=>{a||!(e!=null&&e.name)||Nt(()=>import("./index-CCJ1qLS7.js").then(async l=>(await l.__tla,l)),__vite__mapDeps([7,1,2,3,4,5,6])).then(async({hasModelInCache:l,functionCallingModelIds:u,prebuiltAppConfig:d})=>{const f=await l(e==null?void 0:e.name);i({hasCache:f,isFunctionCalling:u.includes(e==null?void 0:e.name),info:d.model_list.find(p=>p.model_id===(e==null?void 0:e.name))})})},[e==null?void 0:e.name,a]);const s=g.useCallback(async()=>{await(n==null?void 0:n())},[n]),c=g.useMemo(()=>{switch(t){case et.Downloading:return h.jsx(ue,{className:"animate-spin w-7 h-7",name:"arrow-big-down-dash"});case et.Loaded:return h.jsx(bo,{name:(e==null?void 0:e.name)||"brain",className:"w-7 h-7"});default:return h.jsx(bo,{name:(e==null?void 0:e.name)||"brain",className:"w-7 h-7"})}},[e==null?void 0:e.name,t]);return h.jsx(Tt,{className:"flex justify-center !bg-inherit !p-2 max-w-full overflow-y-hidden !mb-2 m-2 !mt-0",children:h.jsxs("div",{className:"ml-2 pt-1 max-w-full",children:[h.jsxs("p",{className:"flex gap-2 items-center pr-6 !text-sm font-semibold",children:[c,`${(e==null?void 0:e.name)||""}`]}),h.jsxs("div",{className:"max-w-full mt-2 flex-wrap flex gap-1",children:[h.jsx(El,{model:a==null?void 0:a.info,isFunctionCalling:(a==null?void 0:a.isFunctionCalling)||!1,name:e==null?void 0:e.name,isCached:(a==null?void 0:a.hasCache)||!1}),t!==et.Loaded?r?h.jsx("div",{className:"text-sm break-words flex-wrap",children:r}):h.jsx(dt,{disabled:t===et.Loading,onClick:s,className:"mt-4 w-full",children:o(a!=null&&a.hasCache?"llm_node.load_model_button":"llm_node.download_model_button")}):void 0]})]})})}),Sre=e=>{const[t,n]=g.useState([]),r=Ze(i=>i.currentSession),o=g.useCallback(async()=>{if(!e||!(r!=null&&r.id))return;const i=await ce("FlowEdge").find({where:{session_id:r.id,source:e.id},order:{id:"DESC"}}),{flowNodes:s,flowNodeDatas:c}=await Uf({where:{session_id:r.id,id:qn(i.map(l=>l.target)),source_type:"JSONData"},order:{updated_at:"DESC"},select:["id","source_id","source_type","updated_at"]});n(s.reduce((l,u)=>{var f;const d=(f=c[u.source_type])==null?void 0:f.find(p=>p.id===u.source_id);return d&&l.push({node:u,entity:d}),l},[]))},[r==null?void 0:r.id,e]),a=g.useCallback(async i=>{await ce("FlowNode").delete(i.id),await ce("JSONData").delete(i.source_id);const s=await ce("FlowEdge").find({where:[{source:i.id},{target:i.id}]});await Promise.all(s.map(c=>ce("FlowEdge").delete(c.id))),o()},[o]);return g.useEffect(()=>{e&&o()},[o,e]),{chatList:t,deleteChat:a,getChatList:o}};class Cre{async loadAndSplit(t){if(t===void 0)throw new Error("You must pass a text splitter to use this method.");const n=await this.load();return t.invoke(n)}}class II extends Cre{constructor(t,{splitPages:n=!0,pdfjs:r=Ore,parsedItemSeparator:o=""}={}){super(),Object.defineProperty(this,"blob",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"splitPages",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"pdfjs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"parsedItemSeparator",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.blob=t,this.splitPages=n??this.splitPages,this.pdfjs=r,this.parsedItemSeparator=o}async load(){const{getDocument:t,version:n}=await this.pdfjs(),r=await t({data:new Uint8Array(await this.blob.arrayBuffer()),useWorkerFetch:!1,isEvalSupported:!1,useSystemFonts:!0}).promise,o=await r.getMetadata().catch(()=>null),a=[];for(let i=1;i<=r.numPages;i+=1){const s=await(await r.getPage(i)).getTextContent();if(s.items.length===0)continue;let c;const l=[];for(const d of s.items)"str"in d&&(c===d.transform[5]||!c?l.push(d.str):l.push(`
${d.str}`),c=d.transform[5]);const u=l.join(this.parsedItemSeparator);a.push(new $u({pageContent:u,metadata:{pdf:{version:n,info:o==null?void 0:o.info,metadata:o==null?void 0:o.metadata,totalPages:r.numPages},loc:{pageNumber:i}}}))}return this.splitPages?a:a.length===0?[]:[new $u({pageContent:a.map(i=>i.pageContent).join(`

`),metadata:{pdf:{version:n,info:o==null?void 0:o.info,metadata:o==null?void 0:o.metadata,totalPages:r.numPages}}})]}}async function Ore(){try{const{default:e}=await Nt(async()=>{const{default:r}=await import("./pdf-3CM_BNMd.js").then(async o=>(await o.__tla,o)).then(o=>o.p);return{default:r}},__vite__mapDeps([8,1,2])),{getDocument:t,version:n}=e;return{getDocument:t,version:n}}catch(e){throw console.error(e),new Error("Failed to load pdf-parse. Please install it with eg. `npm install pdf-parse`.")}}var Ax="Tabs",[Nre,r1e]=Vn(Ax,[Kr]),DI=Kr(),[Mre,Tx]=Nre(Ax),LI=g.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:o,defaultValue:a,orientation:i="horizontal",dir:s,activationMode:c="automatic",...l}=e,u=Bo(s),[d,f]=en({prop:r,onChange:o,defaultProp:a});return h.jsx(Mre,{scope:n,baseId:mt(),value:d,onValueChange:f,orientation:i,dir:u,activationMode:c,children:h.jsx(Oe.div,{dir:u,"data-orientation":i,...l,ref:t})})});LI.displayName=Ax;var FI="TabsList",BI=g.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...o}=e,a=Tx(FI,n),i=DI(n);return h.jsx(nc,{asChild:!0,...i,orientation:a.orientation,dir:a.dir,loop:r,children:h.jsx(Oe.div,{role:"tablist","aria-orientation":a.orientation,...o,ref:t})})});BI.displayName=FI;var $I="TabsTrigger",zI=g.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:o=!1,...a}=e,i=Tx($I,n),s=DI(n),c=HI(i.baseId,r),l=WI(i.baseId,r),u=r===i.value;return h.jsx(rc,{asChild:!0,...s,focusable:!o,active:u,children:h.jsx(Oe.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":l,"data-state":u?"active":"inactive","data-disabled":o?"":void 0,disabled:o,id:c,...a,ref:t,onMouseDown:he(e.onMouseDown,d=>{!o&&d.button===0&&d.ctrlKey===!1?i.onValueChange(r):d.preventDefault()}),onKeyDown:he(e.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&i.onValueChange(r)}),onFocus:he(e.onFocus,()=>{const d=i.activationMode!=="manual";!u&&!o&&d&&i.onValueChange(r)})})})});zI.displayName=$I;var VI="TabsContent",UI=g.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:o,children:a,...i}=e,s=Tx(VI,n),c=HI(s.baseId,r),l=WI(s.baseId,r),u=r===s.value,d=g.useRef(u);return g.useEffect(()=>{const f=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(f)},[]),h.jsx(Nn,{present:o||u,children:({present:f})=>h.jsx(Oe.div,{"data-state":u?"active":"inactive","data-orientation":s.orientation,role:"tabpanel","aria-labelledby":c,hidden:!f,id:l,tabIndex:0,...i,ref:t,style:{...e.style,animationDuration:d.current?"0s":void 0},children:f&&a})})});UI.displayName=VI;function HI(e,t){return`${e}-trigger-${t}`}function WI(e,t){return`${e}-content-${t}`}var kre=LI,qI=BI,YI=zI,KI=UI;const Rx=kre,qf=g.forwardRef(({className:e,...t},n)=>h.jsx(qI,{ref:n,className:K("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));qf.displayName=qI.displayName;const gr=g.forwardRef(({className:e,...t},n)=>h.jsx(YI,{ref:n,className:K("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));gr.displayName=YI.displayName;const vr=g.forwardRef(({className:e,...t},n)=>h.jsx(KI,{ref:n,className:K("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));vr.displayName=KI.displayName,Lm=function(e,[t,n]){return Math.min(n,Math.max(t,e))};function XI(e){const t=g.useRef({value:e,previous:e});return g.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var Pre=[" ","Enter","ArrowUp","ArrowDown"],Are=[" ","Enter"],Sl="Select",[Yf,Kf,Tre]=Lu(Sl),[as,o1e]=Vn(Sl,[Tre,Yo]),Xf=Yo(),[Rre,ea]=as(Sl),[Ire,Dre]=as(Sl),QI=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:o,onOpenChange:a,value:i,defaultValue:s,onValueChange:c,dir:l,name:u,autoComplete:d,disabled:f,required:p,form:y}=e,m=Xf(t),[v,b]=g.useState(null),[x,_]=g.useState(null),[w,j]=g.useState(!1),E=Bo(l),[S=!1,O]=en({prop:r,defaultProp:o,onChange:a}),[k,N]=en({prop:i,defaultProp:s,onChange:c}),P=g.useRef(null),R=v?y||!!v.closest("form"):!0,[A,C]=g.useState(new Set),M=Array.from(A).map(T=>T.props.value).join(";");return h.jsx(Oc,{...m,children:h.jsxs(Rre,{required:p,scope:t,trigger:v,onTriggerChange:b,valueNode:x,onValueNodeChange:_,valueNodeHasChildren:w,onValueNodeHasChildrenChange:j,contentId:mt(),value:k,onValueChange:N,open:S,onOpenChange:O,dir:E,triggerPointerDownPosRef:P,disabled:f,children:[h.jsx(Yf.Provider,{scope:t,children:h.jsx(Ire,{scope:e.__scopeSelect,onNativeOptionAdd:g.useCallback(T=>{C(D=>new Set(D).add(T))},[]),onNativeOptionRemove:g.useCallback(T=>{C(D=>{const I=new Set(D);return I.delete(T),I})},[]),children:n})}),R?h.jsxs(wD,{"aria-hidden":!0,required:p,tabIndex:-1,name:u,autoComplete:d,value:k,onChange:T=>N(T.target.value),disabled:f,form:y,children:[k===void 0?h.jsx("option",{value:""}):null,Array.from(A)]},M):null]})})};QI.displayName=Sl;var JI="SelectTrigger",GI=g.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...o}=e,a=Xf(n),i=ea(JI,n),s=i.disabled||r,c=rt(t,i.onTriggerChange),l=Kf(n),u=g.useRef("touch"),[d,f,p]=_D(m=>{const v=l().filter(_=>!_.disabled),b=v.find(_=>_.value===i.value),x=jD(v,m,b);x!==void 0&&i.onValueChange(x.value)}),y=m=>{s||(i.onOpenChange(!0),p()),m&&(i.triggerPointerDownPosRef.current={x:Math.round(m.pageX),y:Math.round(m.pageY)})};return h.jsx(Nc,{asChild:!0,...a,children:h.jsx(Oe.button,{type:"button",role:"combobox","aria-controls":i.contentId,"aria-expanded":i.open,"aria-required":i.required,"aria-autocomplete":"none",dir:i.dir,"data-state":i.open?"open":"closed",disabled:s,"data-disabled":s?"":void 0,"data-placeholder":xD(i.value)?"":void 0,...o,ref:c,onClick:he(o.onClick,m=>{m.currentTarget.focus(),u.current!=="mouse"&&y(m)}),onPointerDown:he(o.onPointerDown,m=>{u.current=m.pointerType;const v=m.target;v.hasPointerCapture(m.pointerId)&&v.releasePointerCapture(m.pointerId),m.button===0&&m.ctrlKey===!1&&m.pointerType==="mouse"&&(y(m),m.preventDefault())}),onKeyDown:he(o.onKeyDown,m=>{const v=d.current!=="";!(m.ctrlKey||m.altKey||m.metaKey)&&m.key.length===1&&f(m.key),!(v&&m.key===" ")&&Pre.includes(m.key)&&(y(),m.preventDefault())})})})});GI.displayName=JI;var ZI="SelectValue",eD=g.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:o,children:a,placeholder:i="",...s}=e,c=ea(ZI,n),{onValueNodeHasChildrenChange:l}=c,u=a!==void 0,d=rt(t,c.onValueNodeChange);return xn(()=>{l(u)},[l,u]),h.jsx(Oe.span,{...s,ref:d,style:{pointerEvents:"none"},children:xD(c.value)?h.jsx(h.Fragment,{children:i}):a})});eD.displayName=ZI;var Lre="SelectIcon",tD=g.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...o}=e;return h.jsx(Oe.span,{"aria-hidden":!0,...o,ref:t,children:r||"\u25BC"})});tD.displayName=Lre;var Fre="SelectPortal",nD=e=>h.jsx(Ru,{asChild:!0,...e});nD.displayName=Fre;var Ba="SelectContent",rD=g.forwardRef((e,t)=>{const n=ea(Ba,e.__scopeSelect),[r,o]=g.useState();if(xn(()=>{o(new DocumentFragment)},[]),!n.open){const a=r;return a?Au.createPortal(h.jsx(oD,{scope:e.__scopeSelect,children:h.jsx(Yf.Slot,{scope:e.__scopeSelect,children:h.jsx("div",{children:e.children})})}),a):null}return h.jsx(aD,{...e,ref:t})});rD.displayName=Ba;var br=10,[oD,ta]=as(Ba),Bre="SelectContentImpl",aD=g.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:o,onEscapeKeyDown:a,onPointerDownOutside:i,side:s,sideOffset:c,align:l,alignOffset:u,arrowPadding:d,collisionBoundary:f,collisionPadding:p,sticky:y,hideWhenDetached:m,avoidCollisions:v,...b}=e,x=ea(Ba,n),[_,w]=g.useState(null),[j,E]=g.useState(null),S=rt(t,Z=>w(Z)),[O,k]=g.useState(null),[N,P]=g.useState(null),R=Kf(n),[A,C]=g.useState(!1),M=g.useRef(!1);g.useEffect(()=>{if(_)return md(_)},[_]),sd();const T=g.useCallback(Z=>{const[Y,...W]=R().map($=>$.ref.current),[G]=W.slice(-1),te=document.activeElement;for(const $ of Z)if($===te||($==null||$.scrollIntoView({block:"nearest"}),$===Y&&j&&(j.scrollTop=0),$===G&&j&&(j.scrollTop=j.scrollHeight),$==null||$.focus(),document.activeElement!==te))return},[R,j]),D=g.useCallback(()=>T([O,_]),[T,O,_]);g.useEffect(()=>{A&&D()},[A,D]);const{onOpenChange:I,triggerPointerDownPosRef:L}=x;g.useEffect(()=>{if(_){let Z={x:0,y:0};const Y=G=>{var te,$;Z={x:Math.abs(Math.round(G.pageX)-(((te=L.current)==null?void 0:te.x)??0)),y:Math.abs(Math.round(G.pageY)-((($=L.current)==null?void 0:$.y)??0))}},W=G=>{Z.x<=10&&Z.y<=10?G.preventDefault():_.contains(G.target)||I(!1),document.removeEventListener("pointermove",Y),L.current=null};return L.current!==null&&(document.addEventListener("pointermove",Y),document.addEventListener("pointerup",W,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Y),document.removeEventListener("pointerup",W,{capture:!0})}}},[_,I,L]),g.useEffect(()=>{const Z=()=>I(!1);return window.addEventListener("blur",Z),window.addEventListener("resize",Z),()=>{window.removeEventListener("blur",Z),window.removeEventListener("resize",Z)}},[I]);const[B,U]=_D(Z=>{const Y=R().filter(te=>!te.disabled),W=Y.find(te=>te.ref.current===document.activeElement),G=jD(Y,Z,W);G&&setTimeout(()=>G.ref.current.focus())}),F=g.useCallback((Z,Y,W)=>{const G=!M.current&&!W;(x.value!==void 0&&x.value===Y||G)&&(k(Z),G&&(M.current=!0))},[x.value]),H=g.useCallback(()=>_==null?void 0:_.focus(),[_]),J=g.useCallback((Z,Y,W)=>{const G=!M.current&&!W;(x.value!==void 0&&x.value===Y||G)&&P(Z)},[x.value]),q=r==="popper"?Ix:iD,re=q===Ix?{side:s,sideOffset:c,align:l,alignOffset:u,arrowPadding:d,collisionBoundary:f,collisionPadding:p,sticky:y,hideWhenDetached:m,avoidCollisions:v}:{};return h.jsx(oD,{scope:n,content:_,viewport:j,onViewportChange:E,itemRefCallback:F,selectedItem:O,onItemLeave:H,itemTextRefCallback:J,focusSelectedItem:D,selectedItemText:N,position:r,isPositioned:A,searchRef:B,children:h.jsx(jc,{as:Yr,allowPinchZoom:!0,children:h.jsx(_c,{asChild:!0,trapped:x.open,onMountAutoFocus:Z=>{Z.preventDefault()},onUnmountAutoFocus:he(o,Z=>{var Y;(Y=x.trigger)==null||Y.focus({preventScroll:!0}),Z.preventDefault()}),children:h.jsx(Tu,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:i,onFocusOutside:Z=>Z.preventDefault(),onDismiss:()=>x.onOpenChange(!1),children:h.jsx(q,{role:"listbox",id:x.contentId,"data-state":x.open?"open":"closed",dir:x.dir,onContextMenu:Z=>Z.preventDefault(),...b,...re,onPlaced:()=>C(!0),ref:S,style:{display:"flex",flexDirection:"column",outline:"none",...b.style},onKeyDown:he(b.onKeyDown,Z=>{const Y=Z.ctrlKey||Z.altKey||Z.metaKey;if(Z.key==="Tab"&&Z.preventDefault(),!Y&&Z.key.length===1&&U(Z.key),["ArrowUp","ArrowDown","Home","End"].includes(Z.key)){let W=R().filter(G=>!G.disabled).map(G=>G.ref.current);if(["ArrowUp","End"].includes(Z.key)&&(W=W.slice().reverse()),["ArrowUp","ArrowDown"].includes(Z.key)){const G=Z.target,te=W.indexOf(G);W=W.slice(te+1)}setTimeout(()=>T(W)),Z.preventDefault()}})})})})})})});aD.displayName=Bre;var $re="SelectItemAlignedPosition",iD=g.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...o}=e,a=ea(Ba,n),i=ta(Ba,n),[s,c]=g.useState(null),[l,u]=g.useState(null),d=rt(t,S=>u(S)),f=Kf(n),p=g.useRef(!1),y=g.useRef(!0),{viewport:m,selectedItem:v,selectedItemText:b,focusSelectedItem:x}=i,_=g.useCallback(()=>{if(a.trigger&&a.valueNode&&s&&l&&m&&v&&b){const S=a.trigger.getBoundingClientRect(),O=l.getBoundingClientRect(),k=a.valueNode.getBoundingClientRect(),N=b.getBoundingClientRect();if(a.dir!=="rtl"){const G=N.left-O.left,te=k.left-G,$=S.left-te,se=S.width+$,le=Math.max(se,O.width),ve=window.innerWidth-br,Te=Lm(te,[br,Math.max(br,ve-le)]);s.style.minWidth=se+"px",s.style.left=Te+"px"}else{const G=O.right-N.right,te=window.innerWidth-k.right-G,$=window.innerWidth-S.right-te,se=S.width+$,le=Math.max(se,O.width),ve=window.innerWidth-br,Te=Lm(te,[br,Math.max(br,ve-le)]);s.style.minWidth=se+"px",s.style.right=Te+"px"}const P=f(),R=window.innerHeight-br*2,A=m.scrollHeight,C=window.getComputedStyle(l),M=parseInt(C.borderTopWidth,10),T=parseInt(C.paddingTop,10),D=parseInt(C.borderBottomWidth,10),I=parseInt(C.paddingBottom,10),L=M+T+A+I+D,B=Math.min(v.offsetHeight*5,L),U=window.getComputedStyle(m),F=parseInt(U.paddingTop,10),H=parseInt(U.paddingBottom,10),J=S.top+S.height/2-br,q=R-J,re=v.offsetHeight/2,Z=v.offsetTop+re,Y=M+T+Z,W=L-Y;if(Y<=J){const G=P.length>0&&v===P[P.length-1].ref.current;s.style.bottom="0px";const te=l.clientHeight-m.offsetTop-m.offsetHeight,$=Math.max(q,re+(G?H:0)+te+D),se=Y+$;s.style.height=se+"px"}else{const G=P.length>0&&v===P[0].ref.current;s.style.top="0px";const te=Math.max(J,M+m.offsetTop+(G?F:0)+re)+W;s.style.height=te+"px",m.scrollTop=Y-J+m.offsetTop}s.style.margin=`${br}px 0`,s.style.minHeight=B+"px",s.style.maxHeight=R+"px",r==null||r(),requestAnimationFrame(()=>p.current=!0)}},[f,a.trigger,a.valueNode,s,l,m,v,b,a.dir,r]);xn(()=>_(),[_]);const[w,j]=g.useState();xn(()=>{l&&j(window.getComputedStyle(l).zIndex)},[l]);const E=g.useCallback(S=>{S&&y.current===!0&&(_(),x==null||x(),y.current=!1)},[_,x]);return h.jsx(Vre,{scope:n,contentWrapper:s,shouldExpandOnScrollRef:p,onScrollButtonChange:E,children:h.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:w},children:h.jsx(Oe.div,{...o,ref:d,style:{boxSizing:"border-box",maxHeight:"100%",...o.style}})})})});iD.displayName=$re;var zre="SelectPopperPosition",Ix=g.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:o=br,...a}=e,i=Xf(n);return h.jsx(Sd,{...i,...a,ref:t,align:r,collisionPadding:o,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Ix.displayName=zre;var[Vre,Dx]=as(Ba,{}),Lx="SelectViewport",sD=g.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:r,...o}=e,a=ta(Lx,n),i=Dx(Lx,n),s=rt(t,a.onViewportChange),c=g.useRef(0);return h.jsxs(h.Fragment,{children:[h.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),h.jsx(Yf.Slot,{scope:n,children:h.jsx(Oe.div,{"data-radix-select-viewport":"",role:"presentation",...o,ref:s,style:{position:"relative",flex:1,overflow:"hidden auto",...o.style},onScroll:he(o.onScroll,l=>{const u=l.currentTarget,{contentWrapper:d,shouldExpandOnScrollRef:f}=i;if(f!=null&&f.current&&d){const p=Math.abs(c.current-u.scrollTop);if(p>0){const y=window.innerHeight-br*2,m=parseFloat(d.style.minHeight),v=parseFloat(d.style.height),b=Math.max(m,v);if(b<y){const x=b+p,_=Math.min(y,x),w=x-_;d.style.height=_+"px",d.style.bottom==="0px"&&(u.scrollTop=w>0?w:0,d.style.justifyContent="flex-end")}}}c.current=u.scrollTop})})})]})});sD.displayName=Lx;var cD="SelectGroup",[Ure,Hre]=as(cD),Wre=g.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,o=mt();return h.jsx(Ure,{scope:n,id:o,children:h.jsx(Oe.div,{role:"group","aria-labelledby":o,...r,ref:t})})});Wre.displayName=cD;var lD="SelectLabel",uD=g.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,o=Hre(lD,n);return h.jsx(Oe.div,{id:o.id,...r,ref:t})});uD.displayName=lD;var Qf="SelectItem",[qre,dD]=as(Qf),fD=g.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:o=!1,textValue:a,...i}=e,s=ea(Qf,n),c=ta(Qf,n),l=s.value===r,[u,d]=g.useState(a??""),[f,p]=g.useState(!1),y=rt(t,x=>{var _;return(_=c.itemRefCallback)==null?void 0:_.call(c,x,r,o)}),m=mt(),v=g.useRef("touch"),b=()=>{o||(s.onValueChange(r),s.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return h.jsx(qre,{scope:n,value:r,disabled:o,textId:m,isSelected:l,onItemTextChange:g.useCallback(x=>{d(_=>_||((x==null?void 0:x.textContent)??"").trim())},[]),children:h.jsx(Yf.ItemSlot,{scope:n,value:r,disabled:o,textValue:u,children:h.jsx(Oe.div,{role:"option","aria-labelledby":m,"data-highlighted":f?"":void 0,"aria-selected":l&&f,"data-state":l?"checked":"unchecked","aria-disabled":o||void 0,"data-disabled":o?"":void 0,tabIndex:o?void 0:-1,...i,ref:y,onFocus:he(i.onFocus,()=>p(!0)),onBlur:he(i.onBlur,()=>p(!1)),onClick:he(i.onClick,()=>{v.current!=="mouse"&&b()}),onPointerUp:he(i.onPointerUp,()=>{v.current==="mouse"&&b()}),onPointerDown:he(i.onPointerDown,x=>{v.current=x.pointerType}),onPointerMove:he(i.onPointerMove,x=>{var _;v.current=x.pointerType,o?(_=c.onItemLeave)==null||_.call(c):v.current==="mouse"&&x.currentTarget.focus({preventScroll:!0})}),onPointerLeave:he(i.onPointerLeave,x=>{var _;x.currentTarget===document.activeElement&&((_=c.onItemLeave)==null||_.call(c))}),onKeyDown:he(i.onKeyDown,x=>{var _;((_=c.searchRef)==null?void 0:_.current)!==""&&x.key===" "||(Are.includes(x.key)&&b(),x.key===" "&&x.preventDefault())})})})})});fD.displayName=Qf;var Cl="SelectItemText",pD=g.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:o,...a}=e,i=ea(Cl,n),s=ta(Cl,n),c=dD(Cl,n),l=Dre(Cl,n),[u,d]=g.useState(null),f=rt(t,b=>d(b),c.onItemTextChange,b=>{var x;return(x=s.itemTextRefCallback)==null?void 0:x.call(s,b,c.value,c.disabled)}),p=u==null?void 0:u.textContent,y=g.useMemo(()=>h.jsx("option",{value:c.value,disabled:c.disabled,children:p},c.value),[c.disabled,c.value,p]),{onNativeOptionAdd:m,onNativeOptionRemove:v}=l;return xn(()=>(m(y),()=>v(y)),[m,v,y]),h.jsxs(h.Fragment,{children:[h.jsx(Oe.span,{id:c.textId,...a,ref:f}),c.isSelected&&i.valueNode&&!i.valueNodeHasChildren?Au.createPortal(a.children,i.valueNode):null]})});pD.displayName=Cl;var hD="SelectItemIndicator",mD=g.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return dD(hD,n).isSelected?h.jsx(Oe.span,{"aria-hidden":!0,...r,ref:t}):null});mD.displayName=hD;var Fx="SelectScrollUpButton",yD=g.forwardRef((e,t)=>{const n=ta(Fx,e.__scopeSelect),r=Dx(Fx,e.__scopeSelect),[o,a]=g.useState(!1),i=rt(t,r.onScrollButtonChange);return xn(()=>{if(n.viewport&&n.isPositioned){let s=function(){const l=c.scrollTop>0;a(l)};const c=n.viewport;return s(),c.addEventListener("scroll",s),()=>c.removeEventListener("scroll",s)}},[n.viewport,n.isPositioned]),o?h.jsx(vD,{...e,ref:i,onAutoScroll:()=>{const{viewport:s,selectedItem:c}=n;s&&c&&(s.scrollTop=s.scrollTop-c.offsetHeight)}}):null});yD.displayName=Fx;var Bx="SelectScrollDownButton",gD=g.forwardRef((e,t)=>{const n=ta(Bx,e.__scopeSelect),r=Dx(Bx,e.__scopeSelect),[o,a]=g.useState(!1),i=rt(t,r.onScrollButtonChange);return xn(()=>{if(n.viewport&&n.isPositioned){let s=function(){const l=c.scrollHeight-c.clientHeight,u=Math.ceil(c.scrollTop)<l;a(u)};const c=n.viewport;return s(),c.addEventListener("scroll",s),()=>c.removeEventListener("scroll",s)}},[n.viewport,n.isPositioned]),o?h.jsx(vD,{...e,ref:i,onAutoScroll:()=>{const{viewport:s,selectedItem:c}=n;s&&c&&(s.scrollTop=s.scrollTop+c.offsetHeight)}}):null});gD.displayName=Bx;var vD=g.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...o}=e,a=ta("SelectScrollButton",n),i=g.useRef(null),s=Kf(n),c=g.useCallback(()=>{i.current!==null&&(window.clearInterval(i.current),i.current=null)},[]);return g.useEffect(()=>()=>c(),[c]),xn(()=>{var l,u;(u=(l=s().find(d=>d.ref.current===document.activeElement))==null?void 0:l.ref.current)==null||u.scrollIntoView({block:"nearest"})},[s]),h.jsx(Oe.div,{"aria-hidden":!0,...o,ref:t,style:{flexShrink:0,...o.style},onPointerDown:he(o.onPointerDown,()=>{i.current===null&&(i.current=window.setInterval(r,50))}),onPointerMove:he(o.onPointerMove,()=>{var l;(l=a.onItemLeave)==null||l.call(a),i.current===null&&(i.current=window.setInterval(r,50))}),onPointerLeave:he(o.onPointerLeave,()=>{c()})})}),Yre="SelectSeparator",bD=g.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return h.jsx(Oe.div,{"aria-hidden":!0,...r,ref:t})});bD.displayName=Yre;var $x="SelectArrow",Kre=g.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,o=Xf(n),a=ea($x,n),i=ta($x,n);return a.open&&i.position==="popper"?h.jsx(Cd,{...o,...r,ref:t}):null});Kre.displayName=$x;function xD(e){return e===""||e===void 0}var wD=g.forwardRef((e,t)=>{const{value:n,...r}=e,o=g.useRef(null),a=rt(t,o),i=XI(n);return g.useEffect(()=>{const s=o.current,c=window.HTMLSelectElement.prototype,l=Object.getOwnPropertyDescriptor(c,"value").set;if(i!==n&&l){const u=new Event("change",{bubbles:!0});l.call(s,n),s.dispatchEvent(u)}},[i,n]),h.jsx(Nwe,{asChild:!0,children:h.jsx("select",{...r,ref:a,defaultValue:n})})});wD.displayName="BubbleSelect";function _D(e){const t=Fo(e),n=g.useRef(""),r=g.useRef(0),o=g.useCallback(i=>{const s=n.current+i;t(s),function c(l){n.current=l,window.clearTimeout(r.current),l!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(s)},[t]),a=g.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return g.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,o,a]}function jD(e,t,n){const r=t.length>1&&Array.from(t).every(s=>s===t[0])?t[0]:t,o=n?e.indexOf(n):-1;let a=Xre(e,Math.max(o,0));r.length===1&&(a=a.filter(s=>s!==n));const i=a.find(s=>s.textValue.toLowerCase().startsWith(r.toLowerCase()));return i!==n?i:void 0}function Xre(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var Qre=QI,ED=GI,Jre=eD,Gre=tD,Zre=nD,SD=rD,eoe=sD,CD=uD,OD=fD,toe=pD,noe=mD,ND=yD,MD=gD,kD=bD;const xo=Qre,wo=Jre,Fr=g.forwardRef(({className:e,children:t,...n},r)=>h.jsxs(ED,{ref:r,className:K("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...n,children:[t,h.jsx(Gre,{asChild:!0,children:h.jsx(ue,{name:"chevron-down",className:"h-4 w-4 opacity-50"})})]}));Fr.displayName=ED.displayName;const PD=g.forwardRef(({className:e,...t},n)=>h.jsx(ND,{ref:n,className:K("flex cursor-default items-center justify-center py-1",e),...t,children:h.jsx(ue,{name:"chevron-up",className:"h-4 w-4"})}));PD.displayName=ND.displayName;const AD=g.forwardRef(({className:e,...t},n)=>h.jsx(MD,{ref:n,className:K("flex cursor-default items-center justify-center py-1",e),...t,children:h.jsx(ue,{name:"chevron-down",className:"h-4 w-4"})}));AD.displayName=MD.displayName;const Br=g.forwardRef(({className:e,children:t,position:n="popper",...r},o)=>h.jsx(Zre,{children:h.jsxs(SD,{ref:o,className:K("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[h.jsx(PD,{}),h.jsx(eoe,{className:K("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),h.jsx(AD,{})]})}));Br.displayName=SD.displayName;const roe=g.forwardRef(({className:e,...t},n)=>h.jsx(CD,{ref:n,className:K("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));roe.displayName=CD.displayName;const En=g.forwardRef(({className:e,children:t,...n},r)=>h.jsxs(OD,{ref:r,className:K("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[h.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:h.jsx(noe,{children:h.jsx(ue,{name:"check",className:"h-4 w-4"})})}),h.jsx(toe,{children:t})]}));En.displayName=OD.displayName;const ooe=g.forwardRef(({className:e,...t},n)=>h.jsx(kD,{ref:n,className:K("-mx-1 my-1 h-px bg-muted",e),...t}));ooe.displayName=kD.displayName;var _o="Accordion",aoe=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[zx,ioe,soe]=Lu(_o),[Jf,a1e]=Vn(_o,[soe,_C]),Vx=_C(),TD=V.forwardRef((e,t)=>{const{type:n,...r}=e,o=r,a=r;return h.jsx(zx.Provider,{scope:e.__scopeAccordion,children:n==="multiple"?h.jsx(doe,{...a,ref:t}):h.jsx(uoe,{...o,ref:t})})});TD.displayName=_o;var[RD,coe]=Jf(_o),[ID,loe]=Jf(_o,{collapsible:!1}),uoe=V.forwardRef((e,t)=>{const{value:n,defaultValue:r,onValueChange:o=()=>{},collapsible:a=!1,...i}=e,[s,c]=en({prop:n,defaultProp:r,onChange:o});return h.jsx(RD,{scope:e.__scopeAccordion,value:s?[s]:[],onItemOpen:c,onItemClose:V.useCallback(()=>a&&c(""),[a,c]),children:h.jsx(ID,{scope:e.__scopeAccordion,collapsible:a,children:h.jsx(DD,{...i,ref:t})})})}),doe=V.forwardRef((e,t)=>{const{value:n,defaultValue:r,onValueChange:o=()=>{},...a}=e,[i=[],s]=en({prop:n,defaultProp:r,onChange:o}),c=V.useCallback(u=>s((d=[])=>[...d,u]),[s]),l=V.useCallback(u=>s((d=[])=>d.filter(f=>f!==u)),[s]);return h.jsx(RD,{scope:e.__scopeAccordion,value:i,onItemOpen:c,onItemClose:l,children:h.jsx(ID,{scope:e.__scopeAccordion,collapsible:!0,children:h.jsx(DD,{...a,ref:t})})})}),[foe,Gf]=Jf(_o),DD=V.forwardRef((e,t)=>{const{__scopeAccordion:n,disabled:r,dir:o,orientation:a="vertical",...i}=e,s=V.useRef(null),c=rt(s,t),l=ioe(n),u=Bo(o)==="ltr",d=he(e.onKeyDown,f=>{var S;if(!aoe.includes(f.key))return;const p=f.target,y=l().filter(O=>{var k;return!((k=O.ref.current)!=null&&k.disabled)}),m=y.findIndex(O=>O.ref.current===p),v=y.length;if(m===-1)return;f.preventDefault();let b=m;const x=0,_=v-1,w=()=>{b=m+1,b>_&&(b=x)},j=()=>{b=m-1,b<x&&(b=_)};switch(f.key){case"Home":b=x;break;case"End":b=_;break;case"ArrowRight":a==="horizontal"&&(u?w():j());break;case"ArrowDown":a==="vertical"&&w();break;case"ArrowLeft":a==="horizontal"&&(u?j():w());break;case"ArrowUp":a==="vertical"&&j();break}const E=b%v;(S=y[E].ref.current)==null||S.focus()});return h.jsx(foe,{scope:n,disabled:r,direction:o,orientation:a,children:h.jsx(zx.Slot,{scope:n,children:h.jsx(Oe.div,{...i,"data-orientation":a,ref:c,onKeyDown:r?void 0:d})})})}),Zf="AccordionItem",[poe,Ux]=Jf(Zf),LD=V.forwardRef((e,t)=>{const{__scopeAccordion:n,value:r,...o}=e,a=Gf(Zf,n),i=coe(Zf,n),s=Vx(n),c=mt(),l=r&&i.value.includes(r)||!1,u=a.disabled||e.disabled;return h.jsx(poe,{scope:n,open:l,disabled:u,triggerId:c,children:h.jsx(SC,{"data-orientation":a.orientation,"data-state":UD(l),...s,...o,ref:t,disabled:u,open:l,onOpenChange:d=>{d?i.onItemOpen(r):i.onItemClose(r)}})})});LD.displayName=Zf;var FD="AccordionHeader",BD=V.forwardRef((e,t)=>{const{__scopeAccordion:n,...r}=e,o=Gf(_o,n),a=Ux(FD,n);return h.jsx(Oe.h3,{"data-orientation":o.orientation,"data-state":UD(a.open),"data-disabled":a.disabled?"":void 0,...r,ref:t})});BD.displayName=FD;var Hx="AccordionTrigger",$D=V.forwardRef((e,t)=>{const{__scopeAccordion:n,...r}=e,o=Gf(_o,n),a=Ux(Hx,n),i=loe(Hx,n),s=Vx(n);return h.jsx(zx.ItemSlot,{scope:n,children:h.jsx(xV,{"aria-disabled":a.open&&!i.collapsible||void 0,"data-orientation":o.orientation,id:a.triggerId,...s,...r,ref:t})})});$D.displayName=Hx;var zD="AccordionContent",VD=V.forwardRef((e,t)=>{const{__scopeAccordion:n,...r}=e,o=Gf(_o,n),a=Ux(zD,n),i=Vx(n);return h.jsx(wV,{role:"region","aria-labelledby":a.triggerId,"data-orientation":o.orientation,...i,...r,ref:t,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...e.style}})});VD.displayName=zD;function UD(e){return e?"open":"closed"}let HD;lS=TD,uS=LD,HD=BD,Fm=$D,Bm=VD;const WD=lS,Wx=g.forwardRef(({className:e,...t},n)=>h.jsx(uS,{ref:n,className:K("border-b",e),...t}));Wx.displayName="AccordionItem";const qx=g.forwardRef(({className:e,children:t,...n},r)=>h.jsx(HD,{className:"flex",children:h.jsxs(Fm,{ref:r,className:K("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",e),...n,children:[t,h.jsx(ue,{name:"chevron-down",className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));qx.displayName=Fm.displayName;const Yx=g.forwardRef(({className:e,children:t,...n},r)=>h.jsx(Bm,{ref:r,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...n,children:h.jsx("div",{className:K("pb-4 pt-0",e),children:t})}));Yx.displayName=Bm.displayName;const hoe=[1,2,3,4,5,6,7,8,9,10],qD=g.memo(e=>{const{t}=Me("flows"),[n,r]=g.useState(""),[o,a]=g.useState([]),[i,s]=g.useState("1"),{loading:c,onSimilaritySearch:l,onCreatePrompt:u,onCreateRetriever:d}=e,f=async()=>{a(await l(n,+i)),r("")},p=async y=>{y.key==="Enter"&&!y.shiftKey&&(y.preventDefault(),f())};return h.jsxs("div",{className:"mt-4 max-w-full",children:[h.jsx("div",{className:"bg-black/5 dark:bg-white/5 rounded-xl relative",children:h.jsxs("div",{className:"relative px-2 py-1 pb-2",children:[h.jsxs(xo,{value:`${i}`,onValueChange:y=>s(y),children:[h.jsx(Fr,{className:"absolute left-0 !w-14 top-[2px] rounded-xl bg-transparent border-none focus:outline-none focus:ring-0 focus:border-opacity-0 focus:ring-transparent",children:h.jsx(wo,{placeholder:t("vector_database_node.k_select_placeholder")})}),h.jsx(Br,{children:hoe.map(y=>h.jsx(En,{value:`${y}`,children:y},`${y}`))})]}),h.jsx(lo,{value:n,disabled:c,placeholder:t("vector_database_node.similarity_search_placeholder"),className:K("w-full rounded-xl px-2 pl-11 border-none resize-none bg-transparent","min-h-8 max-h-8"),onKeyDown:p,onChange:y=>{r(y.target.value)}}),h.jsx("button",{type:"button",disabled:c,onClick:f,className:"absolute right-3 top-5 -translate-y-1/2 rounded-xl bg-black/5 dark:bg-white/5 p-1",children:h.jsx(ue,{name:c?"loader-circle":"arrow-right",className:K("w-4 h-4 dark:text-white",n?"opacity-100":"opacity-30",c?"animate-spin":"")})})]})}),h.jsx(WD,{type:"single",collapsible:!0,children:o==null?void 0:o.map(([y,m],v)=>h.jsxs(Wx,{value:`${v}`,children:[h.jsxs(qx,{children:[`[${m.toFixed(2)}] ${y.pageContent}`.substring(0,32),"..."]}),h.jsx(Yx,{children:y.pageContent})]},`${v}`))}),h.jsxs("div",{className:"w-full mt-4 flex flex-col gap-1",children:[d?h.jsx(dt,{disabled:c,onClick:d,className:"w-full",children:t("vector_database_node.to_retriever")}):void 0,o!=null&&o.length&&u?h.jsx(dt,{disabled:c,onClick:()=>u(o),className:"w-full",children:t("vector_database_node.create_prompt")}):void 0]})]})}),YD=g.memo(({loading:e,onCreateData:t})=>{const{t:n}=Me("flows"),[r,o]=g.useState(""),[a,i]=g.useState(""),s=async()=>{a&&(await t({id:r,content:a}),o(""),i(""))};return h.jsxs("div",{className:"min-w-80",children:[h.jsxs("div",{className:"flex flex-col space-y-1.5 mt-3",children:[h.jsx(Qe,{htmlFor:"name",children:n("vector_database_node.add_text.id")}),h.jsx(dn,{value:r,disabled:e,onChange:c=>o(c.target.value||""),placeholder:n("vector_database_node.add_text.id_placeholder"),className:"mb-4"}),h.jsxs(Qe,{htmlFor:"name",children:[n("vector_database_node.add_text.content")," ",h.jsx("span",{className:"text-red-600",children:"*"})]}),h.jsx(lo,{value:a,disabled:e,onChange:c=>i(c.target.value||""),placeholder:n("vector_database_node.add_text.content_placeholder")})]}),h.jsx("div",{className:"flex justify-between mt-6",children:h.jsx(Mn,{loading:e,disabled:!(a!=null&&a.length),onClick:s,className:"w-full",children:n("vector_database_node.add_text.add")})})]})}),Kx=({className:e,size:t=200,duration:n=15,anchor:r=90,borderWidth:o=1.5,colorFrom:a="#ffaa40",colorTo:i="#9c40ff",delay:s=0})=>h.jsx("div",{style:{"--size":t,"--duration":n,"--anchor":r,"--border-width":o,"--color-from":a,"--color-to":i,"--delay":`-${s}s`},className:K("pointer-events-none absolute inset-0 rounded-[inherit] [border:calc(var(--border-width)*1px)_solid_transparent]","![mask-clip:padding-box,border-box] ![mask-composite:intersect] [mask:linear-gradient(transparent,transparent),linear-gradient(white,white)]","after:absolute after:aspect-square after:w-[calc(var(--size)*1px)] after:animate-border-beam after:[animation-delay:var(--delay)] after:[background:linear-gradient(to_left,var(--color-from),var(--color-to),transparent)] after:[offset-anchor:calc(var(--anchor)*1%)_50%] after:[offset-path:rect(0_auto_auto_0_round_calc(var(--size)*1px))]",e)});function moe({accept:e,maxSize:t}){const{t:n}=Me("atoms"),[r,o]=g.useState(""),[a,i]=g.useState(""),s=g.useRef(null),[c,l]=g.useState(0),u=f=>{var y;const p=(y=f.target.files)==null?void 0:y[0];d(p)},d=f=>{if(i(""),f){if(t&&f.size>t*1024*1024){i(n("file_upload_input.errors.max_size",{maxSize:t,fileSize:(f.size/1024/1024).toFixed(2)}));return}const p=e==null?void 0:e.split(",").map(y=>y.replace(".","").trim());if(e&&!f.type.match(e.replace("/*",""))&&!(p!=null&&p.some(y=>f.type.includes(y)))){i(n("file_upload_input.errors.accept",{accept:e}));return}return l(f.size),o(f.name),f}};return{fileName:r,error:a,fileInputRef:s,handleFileSelect:u,validateAndSetFile:d,clearFile:()=>{o(""),i(""),l(0),s.current&&(s.current.value="")},fileSize:c}}function yoe({file:e,setFile:t,loading:n,progress:r,fileOptions:o}){const{toast:a}=Bt(),{t:i}=Me("atoms"),[s,c]=g.useState(!1),{fileName:l,fileInputRef:u,clearFile:d,error:f,validateAndSetFile:p,fileSize:y}=moe({accept:(o==null?void 0:o.accept)||"image/*",maxSize:(o==null?void 0:o.maxSize)||3});g.useEffect(()=>{e||d()},[d,e]),g.useEffect(()=>{f&&a({title:f,variant:"destructive"})},[f,a]);function m(w){const j=p(w);j&&t(j)}function v(w){w.preventDefault(),c(!1);const j=w.dataTransfer.files[0];j&&m(j)}function b(w){var E;const j=(E=w.target.files)==null?void 0:E[0];j&&m(j)}function x(){d(),t(void 0)}const _=g.useMemo(()=>{if(!e)return h.jsx("div",{className:"w-16 h-16 rounded-lg bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center",children:h.jsx(ue,{name:"file-text",className:"w-8 h-8 text-zinc-400"})});const w=e.type.startsWith("image/");return h.jsx("div",{className:"relative w-16 h-16 rounded-lg overflow-hidden",children:w?h.jsx("img",{src:URL.createObjectURL(e),alt:"Preview",className:"w-full h-full object-cover"}):h.jsx(ue,{className:"w-14 h-14",name:"file-text"})})},[e]);return h.jsx(h.Fragment,{children:h.jsxs("div",{className:K("relative group cursor-pointer","rounded-lg border-2 border-dashed","transition-colors duration-200",s?"border-indigo-500 bg-indigo-50/50 dark:bg-indigo-500/10":"border-zinc-200 dark:border-zinc-800"),onDragOver:w=>{w.preventDefault(),c(!0)},onDragLeave:()=>c(!1),onDrop:v,onClick:()=>{var w;return(w=u.current)==null?void 0:w.click()},onKeyDown:w=>{var j;(w.key==="Enter"||w.key===" ")&&(w.preventDefault(),(j=u.current)==null||j.click())},"aria-label":"Upload file",children:[h.jsx("input",{ref:u,type:"file",disabled:n||!!(r&&r<1),accept:(o==null?void 0:o.accept)||"image/*",onChange:b,className:"hidden"}),h.jsx("div",{className:"p-8 space-y-4",children:l?h.jsxs("div",{className:"flex items-center gap-4",children:[_,h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsxs("p",{className:"text-sm font-medium truncate",children:[l||"No file selected"," ",h.jsx("span",{className:"text-xs text-zinc-500 leading-5",children:y?`(${(y/1024/1024).toFixed(2)} MB)`:""})]}),r&&r<1?h.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[h.jsxs("p",{children:[(r*100).toFixed(2)," %"]}),h.jsx("div",{className:"h-1 flex-1 bg-zinc-100 dark:bg-zinc-800 rounded-full overflow-hidden items-center flex",children:h.jsx("div",{className:"h-full bg-indigo-500 transition-all duration-200",style:{width:`${r*100}%`}})})]}):void 0]}),h.jsx("button",{type:"button",disabled:n||!!(r&&r<1),onClick:w=>{w.stopPropagation(),x()},className:"p-1 hover:bg-zinc-100 dark:hover:bg-zinc-800 rounded",children:h.jsx(ue,{name:"x",className:"w-5 h-5 text-zinc-400"})}),r&&r<1?h.jsx(Kx,{className:"rounded-lg"}):void 0]}):h.jsxs("div",{className:"flex flex-col items-center gap-2",children:[h.jsx(ue,{name:"upload",className:"w-8 h-8 text-zinc-400 dark:text-zinc-500"}),h.jsx("p",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:i("file_upload_input.drop_file")})]})})]})})}function KD({onFileSubmit:e,fileOptions:t,progress:n,loading:r}){const{t:o}=Me("flows"),[a,i]=g.useState(),s=async()=>{a&&(await e(a),i(void 0))};return h.jsxs("div",{className:"w-full max-w-full space-y-2 mt-4",children:[h.jsx("div",{className:"mb-6",children:h.jsx(yoe,{progress:n,loading:r,fileOptions:t,setFile:i,file:a})}),h.jsx(Mn,{loading:r,disabled:!a,onClick:s,className:"w-full mt-4",children:o("vector_database_node.add_file.index")})]})}const ep=g.forwardRef(({className:e,...t},n)=>h.jsx("div",{className:"relative w-full overflow-auto",children:h.jsx("table",{ref:n,className:K("w-full caption-bottom text-sm",e),...t})}));ep.displayName="Table";const tp=g.forwardRef(({className:e,...t},n)=>h.jsx("thead",{ref:n,className:K("[&_tr]:border-b",e),...t}));tp.displayName="TableHeader";const np=g.forwardRef(({className:e,...t},n)=>h.jsx("tbody",{ref:n,className:K("[&_tr:last-child]:border-0",e),...t}));np.displayName="TableBody";const goe=g.forwardRef(({className:e,...t},n)=>h.jsx("tfoot",{ref:n,className:K("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));goe.displayName="TableFooter";const $a=g.forwardRef(({className:e,...t},n)=>h.jsx("tr",{ref:n,className:K("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));$a.displayName="TableRow";const is=g.forwardRef(({className:e,...t},n)=>h.jsx("th",{ref:n,className:K("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));is.displayName="TableHead";const ss=g.forwardRef(({className:e,...t},n)=>h.jsx("td",{ref:n,className:K("align-middle [&:has([role=checkbox])]:pr-0",e),...t}));ss.displayName="TableCell";const voe=g.forwardRef(({className:e,...t},n)=>h.jsx("caption",{ref:n,className:K("mt-4 text-sm text-muted-foreground",e),...t}));voe.displayName="TableCaption";const XD=({className:e,...t})=>h.jsx("nav",{role:"navigation","aria-label":"pagination",className:K("mx-auto flex w-full justify-center",e),...t});XD.displayName="Pagination";const QD=g.forwardRef(({className:e,...t},n)=>h.jsx("ul",{ref:n,className:K("flex flex-row items-center gap-1",e),...t}));QD.displayName="PaginationContent";const cs=g.forwardRef(({className:e,...t},n)=>h.jsx("li",{ref:n,className:K("",e),...t}));cs.displayName="PaginationItem";const rp=({className:e,isActive:t,size:n="icon",...r})=>h.jsx("a",{"aria-current":t?"page":void 0,className:K(xc({variant:t?"outline":"ghost",size:n}),e),...r});rp.displayName="PaginationLink";const JD=({className:e,...t})=>{const{t:n}=Me("atoms");return h.jsxs(rp,{"aria-label":"Go to previous page",size:"default",className:K("gap-1 pl-2.5",e),...t,children:[h.jsx(ue,{name:"chevron-left",className:"h-4 w-4"}),h.jsx("span",{children:n("pagination.previous")})]})};JD.displayName="PaginationPrevious";const GD=({className:e,...t})=>{const{t:n}=Me("atoms");return h.jsxs(rp,{"aria-label":"Go to next page",size:"default",className:K("gap-1 pr-2.5",e),...t,children:[h.jsx("span",{children:n("pagination.next")}),h.jsx(ue,{name:"chevron-right",className:"h-4 w-4"})]})};GD.displayName="PaginationNext";const Xx=({className:e,...t})=>{const{t:n}=Me("atoms");return h.jsxs("span",{"aria-hidden":!0,className:K("flex h-9 w-9 items-center justify-center",e),...t,children:[h.jsx(ue,{name:"ellipsis",className:"h-4 w-4"}),h.jsx("span",{className:"sr-only",children:n("pagination.more_pages")})]})};Xx.displayName="PaginationEllipsis";const ZD=ma(({title:e,content:t})=>{const n=Kt();return h.jsx(Ai,{open:n.visible,onOpenChange:n.hide,children:h.jsxs(Ca,{className:"sm:max-w-2xl",children:[h.jsx(Oa,{children:h.jsxs("div",{className:"flex",children:[h.jsx(ue,{name:"file",className:"mr-2 h-4 w-4"}),h.jsx(Na,{children:e})]})}),h.jsx("div",{className:"mx-auto w-full min-h-96 max-h-96 overflow-hidden",children:h.jsx("div",{className:"relative w-full h-full overflow-hidden rounded-xl p-1 border border-border",children:h.jsx("pre",{className:"break-all h-full overflow-y-auto bg-background font-mono text-xs w-full",children:t})})})]})})}),op=g.memo(e=>{const{data:t,headers:n,limitLengthByColumns:r,showPerPage:o=7,paginationShowLimit:a=1,contentLengthLimit:i=64}=e,[s,c]=g.useState({page:1,maxPage:1}),l=Kt(ZD);g.useEffect(()=>{c(p=>({...p,maxPage:Math.ceil(t.length/o)}))},[t.length,o]);const u=g.useMemo(()=>t.slice((s.page-1)*o,s.page*o),[t,s.page,o]),d=g.useMemo(()=>{let p=!1,y=!1;return h.jsx(XD,{className:"mt-4 mb-4 ml-4 mr-4 w-full",children:h.jsxs(QD,{children:[s.page>1?h.jsx(cs,{onClick:()=>c(m=>({...m,page:m.page-1})),children:h.jsx(JD,{})}):null,Array.from({length:s.maxPage},(m,v)=>{const b=v+1,x=v===0||v===s.maxPage-1;return!x&&b>s.page+a&&y?null:!x&&b>s.page+a?(y=!0,h.jsx(cs,{children:h.jsx(Xx,{})},v)):!x&&b<s.page-a&&p?null:!x&&b<s.page-a?(p=!0,h.jsx(cs,{children:h.jsx(Xx,{})},v)):h.jsx(cs,{onClick:()=>c(_=>({..._,page:b})),children:h.jsx(rp,{isActive:v+1===s.page,children:v+1})},v)}),s.page<s.maxPage?h.jsx(cs,{onClick:()=>c(m=>({...m,page:m.page+1})),children:h.jsx(GD,{})}):null]})})},[s.maxPage,s.page,a]),f=(p,y)=>{if(!p)return;const m=Array.isArray(p)?p:n.map(v=>p[v]);return h.jsxs($a,{children:[h.jsx(ss,{children:h.jsx("div",{className:"font-bold",children:y+1})}),m.map((v,b)=>{const x=typeof v=="string"?v:JSON.stringify(v),_=n[b],w=(r==null?void 0:r[_])||i,j=x.length>w;return h.jsx(ss,{className:"p-4",children:h.jsxs("div",{onClick:j?()=>l.show({title:_,content:x}):void 0,className:"flex gap-4",children:[j?`${x.substring(0,w)}...`:x,j?h.jsx(ue,{className:"w-6 mt-[-2px]",name:"chevron-right"}):null]})},`${b}`)})]},`${y}`)};return h.jsxs(h.Fragment,{children:[h.jsxs(ep,{className:"w-full",children:[h.jsx(tp,{children:h.jsxs($a,{children:[h.jsx(is,{},"index"),n?n.map(p=>h.jsx(is,{children:h.jsx("div",{className:"font-bold",children:p})},p)):void 0]})}),h.jsx(np,{children:u!=null&&u.length?u==null?void 0:u.map(f):void 0})]}),d]})});var Qx,e3;Km=function(){if(e3)return Qx;e3=1;function e(t,n,r){var o=-1,a=t.length;n<0&&(n=-n>a?0:a+n),r=r>a?a:r,r<0&&(r+=a),a=n>r?0:r-n>>>0,n>>>=0;for(var i=Array(a);++o<a;)i[o]=t[o+n];return i}return Qx=e,Qx};var Jx,t3;ui=function(){if(t3)return Jx;t3=1;var e=ec(),t=ga(),n=Gd(),r=or();function o(a,i,s){if(!r(s))return!1;var c=typeof i;return(c=="number"?t(s)&&n(i,s.length):c=="string"&&i in s)?e(s[i],a):!1}return Jx=o,Jx};var Gx,n3;function boe(){if(n3)return Gx;n3=1;var e=/\s/;function t(n){for(var r=n.length;r--&&e.test(n.charAt(r)););return r}return Gx=t,Gx}var Zx,r3;function xoe(){if(r3)return Zx;r3=1;var e=boe(),t=/^\s+/;function n(r){return r&&r.slice(0,e(r)+1).replace(t,"")}return Zx=n,Zx}var ew,o3;function a3(){if(o3)return ew;o3=1;var e=xoe(),t=or(),n=Bi(),r=NaN,o=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,i=/^0o[0-7]+$/i,s=parseInt;function c(l){if(typeof l=="number")return l;if(n(l))return r;if(t(l)){var u=typeof l.valueOf=="function"?l.valueOf():l;l=t(u)?u+"":u}if(typeof l!="string")return l===0?l:+l;l=e(l);var d=a.test(l);return d||i.test(l)?s(l.slice(2),d?2:8):o.test(l)?r:+l}return ew=c,ew}var tw,i3;function s3(){if(i3)return tw;i3=1;var e=a3(),t=1/0,n=17976931348623157e292;function r(o){if(!o)return o===0?o:0;if(o=e(o),o===t||o===-t){var a=o<0?-1:1;return a*n}return o===o?o:0}return tw=r,tw}var nw,c3;function l3(){if(c3)return nw;c3=1;var e=s3();function t(n){var r=e(n),o=r%1;return r===r?o?r-o:r:0}return nw=t,nw}var rw,u3;function woe(){if(u3)return rw;u3=1;var e=Km(),t=ui(),n=l3(),r=Math.ceil,o=Math.max;function a(i,s,c){(c?t(i,s,c):s===void 0)?s=1:s=o(n(s),0);var l=i==null?0:i.length;if(!l||s<1)return[];for(var u=0,d=0,f=Array(r(l/s));u<l;)f[d++]=e(i,u,u+=s);return f}return rw=a,rw}var _oe=woe();const ow=Xe(_oe),joe=()=>{const[e,t]=g.useState(!1),{t:n}=Me("flows"),{toast:r}=Bt(),o=li(c=>c.index),a=li(c=>c.similaritySearchWithScore),i=g.useCallback(async(c,l)=>{try{if(!(l!=null&&l.vectorDatabase)){r({variant:"destructive",title:n("vector_database_node.errors.vector_database_not_found")});return}if((l==null?void 0:l.vectorDatabase.storage)===nr.DataNode)throw new Error("DataNode storage is not supported for similarity search");return t(!0),await a({databaseId:l.vectorDatabase.id},c,l==null?void 0:l.k)}catch{r({variant:"destructive",title:n("vector_database_node.errors.similarity_search_failed")})}finally{t(!1)}},[a,r,n]),s=g.useCallback(async(c,l)=>{var u;try{t(!0);const d=c.content?[new $u({pageContent:c.content,id:c.id,metadata:{id:c.id}})]:c.documents;if(!(d!=null&&d.length)){r({variant:"destructive",title:n("vector_database_node.errors.content_not_found")});return}if(!(l!=null&&l.vectorDatabase)){r({variant:"destructive",title:n("vector_database_node.errors.vector_database_not_found")});return}if((l==null?void 0:l.vectorDatabase.storage)===nr.DataNode)throw new Error("DataNode storage is not supported for indexing");{const f=ow(d,10);let p=0;for(const y of f)(u=l==null?void 0:l.onProgressReport)==null||u.call(l,{handling:y.length,handled:p,total:d.length}),await o({databaseId:l.vectorDatabase.id},y),p+=y.length}}catch{r({variant:"destructive",title:n("vector_database_node.errors.similarity_search_failed")})}finally{t(!1)}},[o,r,n]);return{loading:e,indexData:s,similaritySearchWithScore:i}},Eoe=ma(({retriverInfo:e})=>{var m,v,b;const{t}=Me("applications"),{loading:n,similaritySearchWithScore:r,indexData:o}=joe(),[a,i]=g.useState("search"),[s,c]=g.useState(0);console.log("retriverInfo",e);const l=Kt(),u=g.useMemo(()=>{var w,j;if(!((w=e==null?void 0:e.vectorDatabaseEntity)!=null&&w.raw))return{headers:[],rows:[]};const x=["content","embedding","metadata"],_=qh((j=e==null?void 0:e.vectorDatabaseEntity)==null?void 0:j.raw);return{headers:x,rows:_.map(E=>{try{return JSON.parse(E)}catch{return[]}})}},[(m=e==null?void 0:e.vectorDatabaseEntity)==null?void 0:m.raw]),d=g.useCallback(async(...x)=>{const[_,w]=x;await o(_,{...w,vectorDatabase:e.vectorDatabaseEntity})},[o,e.vectorDatabaseEntity]),f=g.useCallback(async(x,_)=>{const w=x.trim(),j=await r(w,{k:_,vectorDatabase:e.vectorDatabaseEntity});if(j!=null&&j.length)return j},[e.vectorDatabaseEntity,r]),p=g.useCallback(async x=>{if(x.type.includes("text")||x.type.includes("txt")){const _=new FileReader;_.onload=async w=>{var E;const j=(E=w.target)==null?void 0:E.result;await d({content:j},{vectorDatabase:e.vectorDatabaseEntity})},_.readAsText(x)}else if(x.type.endsWith("pdf")){const _=new Blob([x],{type:"application/pdf"}),w=await new II(_,{pdfjs:async()=>{const j=await Nt(()=>import("./pdf.min-iEKkduSH.js").then(async E=>(await E.__tla,E)),__vite__mapDeps([9,1,2,3,4,5,6]));return await Nt(()=>import("./pdf.worker.min-D9Yt29vd.js").then(async E=>(await E.__tla,E)),__vite__mapDeps([10,1,2,3,4,5,6])),j.GlobalWorkerOptions.workerSrc=new URL("pdfjs-dist/build/pdf.worker.min.js",import.meta.url).toString(),j},parsedItemSeparator:" "}).load();await d({documents:w},{vectorDatabase:e.vectorDatabaseEntity,onProgressReport:j=>{c((j.handled+j.handling)/j.total)}})}},[d,e.vectorDatabaseEntity]),y=g.useMemo(()=>{switch(a){case"search":return h.jsx(vr,{value:"search",children:h.jsx(qD,{loading:n,onSimilaritySearch:f})});case"new":return h.jsx(vr,{className:"min-w-80",value:"new",children:h.jsx(YD,{loading:n,onCreateData:d})});case"file":return h.jsx(vr,{value:"file",children:h.jsx(KD,{loading:n,progress:s,onFileSubmit:p,fileOptions:{accept:".pdf,.txt,.text",maxSize:1}})});case"view":return h.jsx(vr,{value:"view",className:"max-h-full overflow-auto",children:h.jsx(op,{data:u.rows,headers:u.headers,limitLengthByColumns:{embedding:32}})})}},[d,p,f,n,a,s,u]);return h.jsx(Ai,{open:l.visible,onOpenChange:l.hide,children:h.jsxs(Ca,{className:"max-w-3xl",children:[h.jsx(Oa,{children:h.jsxs("div",{className:"flex",children:[h.jsx(ue,{name:"file",className:"mr-2 h-4 w-4"}),h.jsx(Na,{children:t("chat.vector_database")})]})}),h.jsx("div",{className:"mx-auto w-full min-h-96 max-h-full overflow-hidden",children:h.jsx("div",{className:"w-full h-full",children:h.jsxs(Rx,{value:a,onValueChange:i,defaultValue:"search",className:K("w-full h-full mt-4"),children:[h.jsxs(qf,{className:K("grid w-full grid-cols-3",((v=e==null?void 0:e.vectorDatabaseEntity)==null?void 0:v.storage)===nr.DatabaseNode?"grid-cols-4":"grid-cols-3"),children:[h.jsx(gr,{value:"search",children:t("chat.search")}),h.jsx(gr,{value:"new",children:t("chat.text")}),h.jsx(gr,{value:"file",children:t("chat.file")}),((b=e==null?void 0:e.vectorDatabaseEntity)==null?void 0:b.storage)===nr.DatabaseNode?h.jsx(gr,{value:"view",children:t("chat.view")}):void 0]}),y]})})})]})})}),Soe=g.lazy(()=>Nt(()=>import("./index-B7J5gepj.js").then(async e=>(await e.__tla,e)),__vite__mapDeps([11,12,1,2,13,14])));function Coe({schema:e,mainLLMInfo:t,loadLLM:n,retriverInfo:r,threadNode:o,onSelectThread:a,onAddNewThread:i,currentDataNode:s,...c}){var w,j;const{t:l}=Me("applications"),[u,d]=g.useState(!1),f=Kt(AI),p=Kt(Eoe),{chatList:y,getChatList:m,deleteChat:v}=Sre(o),b=g.useCallback(async()=>{try{d(!0),await(i==null?void 0:i()),m()}finally{d(!1)}},[m,i]),x=g.useCallback(()=>{p.show({retriverInfo:r[0]})},[r,p]),_=g.useCallback(async(E,S)=>{E.stopPropagation(),f.show({onDelete:()=>v(S)})},[v,f]);return h.jsxs(Jy,{variant:"sidebar",side:"right",collapsible:"none",...c,children:[h.jsx("div",{className:"h-1"}),h.jsxs(Ac,{className:"justify-between",children:[h.jsx("div",{className:"text-sm pl-2",children:l("chat.history")}),h.jsx(Mn,{loading:u,onClick:b,variant:"link",className:"mr-[-6px]",children:h.jsx(ue,{name:"circle-plus"})})]}),h.jsxs(Zy,{children:[h.jsx(Pc,{className:"flex-1",children:h.jsx(Pi,{children:y.map(({node:E},S)=>{var O;return h.jsx(no,{onClick:()=>a(E),children:h.jsx(ro,{className:"cursor-pointer",children:h.jsxs("div",{className:"flex flex-row justify-between items-center w-full",children:[h.jsxs("div",{className:"flex gap-2",children:[h.jsx(ue,{size:16,name:((O=s==null?void 0:s.node)==null?void 0:O.id)===E.id?"check":"chevron-right",className:"ml-auto transition-transform duration-200 group-data-[state=open]/collapsible:rotate-90"}),h.jsx("span",{children:`Thread ${S+1}`})]}),h.jsx(ue,{onClick:k=>_(k,E),size:16,name:"trash-2"})]})})},E.id)})})}),r!=null&&r.length?h.jsxs(Tt,{className:"m-2 p-2 max-w-full",children:[h.jsx("pre",{className:"overflow-auto",children:r.map((E,S)=>{var O;return h.jsx("span",{children:((O=E.promptEntity)==null?void 0:O.content)||""},`${S}`)})}),h.jsx(dt,{onClick:x,className:"w-full mt-4",children:l("chat.vector_database")})]}):void 0,(w=e==null?void 0:e.schema_items)!=null&&w.length?h.jsx("div",{className:"m-2 !mb-0",children:h.jsx(g.Suspense,{fallback:h.jsx(Wf,{}),children:h.jsx(Soe,{className:K("overflow-hidden break-words whitespace-pre-wrap w-full rounded-lg"),source:(j=e==null?void 0:e.schema_items)!=null&&j.length?`\`\`\`javascript
${kx((e==null?void 0:e.schema_items)||[])}
\`\`\``:""})})}):void 0,h.jsx(Ere,{llm:t==null?void 0:t.llm,status:t==null?void 0:t.status,progress:t==null?void 0:t.progress,loadLLM:n})]})]})}var Ooe=Object.defineProperty,Noe=Object.defineProperties,Moe=Object.getOwnPropertyDescriptors,ap=Object.getOwnPropertySymbols,d3=Object.prototype.hasOwnProperty,f3=Object.prototype.propertyIsEnumerable,p3=(e,t,n)=>t in e?Ooe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ip=(e,t)=>{for(var n in t||(t={}))d3.call(t,n)&&p3(e,n,t[n]);if(ap)for(var n of ap(t))f3.call(t,n)&&p3(e,n,t[n]);return e},koe=(e,t)=>Noe(e,Moe(t)),Poe=(e,t)=>{var n={};for(var r in e)d3.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&ap)for(var r of ap(e))t.indexOf(r)<0&&f3.call(e,r)&&(n[r]=e[r]);return n};oc=function(...e){return Mwe(kwe(e))},WE=function(e,t){const n=e;return V.forwardRef(function(r,o){return V.createElement(n,koe(ip(ip({ref:o},t),r),{className:oc(t.className,r.className)}))})},X9=function(e,...t){return WE(e,{className:oc(t)})},K9=function(e,t,n){const r=e;return V.forwardRef(function(o,a){const i=o,{className:s}=i,c=Poe(i,["className"]),l=ip({},c);return n&&n.forEach(u=>{c[u]!==void 0&&delete l[u]}),V.createElement(r,ip({ref:a,className:oc(t(c),s)},l))})};var aw="Avatar",[Aoe,i1e]=Vn(aw),[Toe,h3]=Aoe(aw),m3=g.forwardRef((e,t)=>{const{__scopeAvatar:n,...r}=e,[o,a]=g.useState("idle");return h.jsx(Toe,{scope:n,imageLoadingStatus:o,onImageLoadingStatusChange:a,children:h.jsx(Oe.span,{...r,ref:t})})});m3.displayName=aw;var y3="AvatarImage",g3=g.forwardRef((e,t)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:o=()=>{},...a}=e,i=h3(y3,n),s=Roe(r,a.referrerPolicy),c=Fo(l=>{o(l),i.onImageLoadingStatusChange(l)});return xn(()=>{s!=="idle"&&c(s)},[s,c]),s==="loaded"?h.jsx(Oe.img,{...a,ref:t,src:r}):null});g3.displayName=y3;var v3="AvatarFallback",b3=g.forwardRef((e,t)=>{const{__scopeAvatar:n,delayMs:r,...o}=e,a=h3(v3,n),[i,s]=g.useState(r===void 0);return g.useEffect(()=>{if(r!==void 0){const c=window.setTimeout(()=>s(!0),r);return()=>window.clearTimeout(c)}},[r]),i&&a.imageLoadingStatus!=="loaded"?h.jsx(Oe.span,{...o,ref:t}):null});b3.displayName=v3;function Roe(e,t){const[n,r]=g.useState("idle");return xn(()=>{if(!e){r("error");return}let o=!0;const a=new window.Image,i=s=>()=>{o&&r(s)};return r("loading"),a.onload=i("loaded"),a.onerror=i("error"),a.src=e,t&&(a.referrerPolicy=t),()=>{o=!1}},[e,t]),n}var x3=m3,w3=g3,_3=b3;const j3=g.forwardRef(({className:e,...t},n)=>h.jsx(x3,{ref:n,className:K("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));j3.displayName=x3.displayName;const E3=g.forwardRef(({className:e,...t},n)=>h.jsx(w3,{ref:n,className:K("aspect-square h-full w-full",e),...t}));E3.displayName=w3.displayName;const S3=g.forwardRef(({className:e,...t},n)=>h.jsx(_3,{ref:n,className:K("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));S3.displayName=_3.displayName;const Ioe=qr("flex gap-2 max-w-[60%] items-end relative group",{variants:{variant:{received:"self-start",sent:"self-end flex-row-reverse"},layout:{default:"",ai:"max-w-full w-full items-center"}},defaultVariants:{variant:"received",layout:"default"}}),C3=g.forwardRef(({className:e,variant:t,layout:n,children:r,...o},a)=>h.jsx("div",{className:K(Ioe({variant:t,layout:n,className:e}),"relative group"),ref:a,...o,children:g.Children.map(r,i=>g.isValidElement(i)&&typeof i.type!="string"?g.cloneElement(i,{variant:t,layout:n,className:o==null?void 0:o.innerclassname}):i)}));C3.displayName="ChatBubble";const Doe=({src:e,fallback:t,className:n})=>h.jsxs(j3,{className:n,children:[h.jsx(E3,{src:e,alt:"Avatar"}),h.jsx(S3,{children:t})]}),Loe=qr("p-4",{variants:{variant:{received:"bg-secondary text-secondary-foreground rounded-r-lg rounded-tl-lg",sent:"bg-primary text-primary-foreground rounded-l-lg rounded-tr-lg"},layout:{default:"",ai:"border-t w-full rounded-none bg-transparent"}},defaultVariants:{variant:"received",layout:"default"}}),O3=g.forwardRef(({className:e,variant:t,layout:n,isLoading:r=!1,children:o,...a},i)=>h.jsx("div",{className:K(Loe({variant:t,layout:n,className:e}),"break-words max-w-full whitespace-pre-wrap"),ref:i,...a,children:r?h.jsx("div",{className:"flex items-center space-x-2",children:h.jsx(Wf,{})}):o}));O3.displayName="ChatBubbleMessage";const Foe=({icon:e,onClick:t,className:n,variant:r="ghost",size:o="icon",...a})=>h.jsx(dt,{variant:r,size:o,className:n,onClick:t,...a,children:e}),Boe=g.forwardRef(({variant:e,className:t,children:n,...r},o)=>h.jsx("div",{ref:o,className:K("absolute top-1/2 -translate-y-1/2 flex opacity-0 group-hover:opacity-100 transition-opacity duration-200",e==="sent"?"-left-1 -translate-x-full flex-row-reverse":"-right-1 translate-x-full",t),...r,children:n}));Boe.displayName="ChatBubbleActionWrapper";const $oe=g.lazy(()=>Nt(()=>import("./index-B7J5gepj.js").then(async e=>(await e.__tla,e)),__vite__mapDeps([11,12,1,2,13,14]))),zoe=[{icon:Ywe,label:"Copy"},{icon:Xwe,label:"Refresh"},{icon:Jwe,label:"Volume"}],Voe=g.memo(({message:e,index:t,isLastMessage:n,isGenerating:r,isSchema:o,onActionClick:a})=>h.jsxs(C3,{innerclassname:e.role=="system"?"!bg-transparent font-semibold":void 0,variant:e.role=="user"?"sent":"received",children:[e.role==="system"?h.jsx("div",{className:"w-10 h-10"}):e.role==="assistant"?h.jsx(Doe,{src:"",fallback:e.data&&typeof e.data=="object"&&"injectedMessage"in e.data?"\u{1F4C2}":"\u{1F916}"}):void 0,h.jsxs(O3,{children:[r&&n&&(!e.content||o)?h.jsx(Wf,{}):h.jsxs(g.Suspense,{fallback:h.jsx(Wf,{}),children:[e.role==="system"?h.jsx(tn,{className:"!text-sm mb-1",children:"System"}):void 0,h.jsx($oe,{className:oc("[&_p]:leading-relaxed !max-w-full !bg-transparent !font-sans !text-sm"),style:{color:"unset !important"},source:e.content?o?`\`\`\`json
${e.content}
\`\`\``:e.content:""})]}),e.role==="assistant"&&n&&h.jsx("div",{className:"flex items-center mt-1.5 gap-1",children:!r&&h.jsx(h.Fragment,{children:zoe.map((i,s)=>{const c=i.icon;return h.jsx(Foe,{variant:"ghost",className:"size-5",icon:h.jsx(c,{className:"size-3"}),onClick:()=>a(i.label,e)},s)})})})]})]},t),(e,t)=>e.message.content===t.message.content&&e.isLastMessage===t.isLastMessage),Uoe=g.memo(()=>{const{t:e}=Me("applications"),t=g.useRef(!1),[n,r]=g.useState(!1),o=g.useCallback(()=>{setTimeout(()=>{O.current&&(O.current.scrollTop=O.current.scrollHeight)},50)},[]),{schema:a,threadInfo:i,mainLLMInfo:s,retriverInfo:c,currentDataNode:l,loadLLM:u,addNewDataNode:d,selectDataNode:f,updateMessagesData:p,onThreadMessagesLoaded:y}=Kne(),{sendMessage:m}=PI(),{input:v,messages:b,isLoading:x,reload:_,setInput:w,handleSubmit:j,handleInputChange:E,setMessages:S}=cS({fetch:async(A,C)=>{try{r(!0);const M=JSON.parse(C==null?void 0:C.body),T=ya(),D=M.messages[M.messages.length-1];return t.current=!0,S(I=>[...I,{id:ya(),content:D.content,role:"user"}]),await m(D.content,M.messages||[],{retriverInfo:c},{schema:a,onInjectedMessages:I=>{I.length&&S(L=>[...L,...I.map(B=>B._getType()==="system"?{id:ya(),content:`${B.content}`,role:"system",data:{injectedMessage:!0}}:B._getType()==="human"?{id:ya(),content:`${B.content}`,role:"user",data:{injectedMessage:!0}}:{id:ya(),content:`${B.content}`,role:"assistant",data:{injectedMessage:!0}})])},onResponseMessageCreate:I=>{S(L=>[...L,{id:T,content:I||"",role:"assistant"}])},onMessageUpdate:I=>{S(L=>{const B=[...L],U=B.findIndex(F=>F.id===T);return U!==-1&&(B[U]={...B[U],content:I.nodeData.content||""}),B}),t.current&&o()}}),S(I=>(p(I),I)),r(!1),w(""),t.current&&o(),new Response}finally{r(!1)}}}),O=g.useRef(null);g.useEffect(()=>{const A=y(C=>{S(C||[]),o()});return()=>{A()}},[S,y,o]);const k=async(A,C)=>(r(!0),await j(C),!0),N=g.useCallback(async(A,C)=>{if(A==="Refresh"){r(!0);try{await _()}finally{r(!1)}}A==="Copy"&&C&&C.role==="assistant"&&navigator.clipboard.writeText(C.content),A==="Volume"&&(C!=null&&C.content)&&await CE.speak((C==null?void 0:C.content)||"")},[_]),P=g.useCallback(()=>t.current=!1,[]),R=g.useMemo(()=>b&&b.map((A,C)=>h.jsx(Voe,{message:A,index:C,isLastMessage:C===b.length-1,isGenerating:n,isSchema:!!a,onActionClick:N},A.id||`${C}`)),[b,n,a,N]);return h.jsxs(Qy,{onClick:P,className:"max-h-full !overflow-hidden !min-h-full",style:{minHeight:"unset"},defaultOpen:!0,children:[h.jsx(Gy,{className:"!max-h-full !overflow-hidden",style:{minHeight:"unset"},children:h.jsxs("main",{className:"flex h-full w-full max-w-2xl flex-col items-center mx-auto overflow-hidden",children:[h.jsx("div",{className:"flex-1 overflow-y-auto overflow-x-hidden min-w-full max-w-full",children:h.jsx(OM,{className:"!max-h-full",ref:O,children:R})}),h.jsx(fk,{className:"!max-w-2xl px-4",onSubmit:k,disabled:x||n||(s==null?void 0:s.status)!==et.Loaded,placeholder:e("chat.input_message_placeholder"),maxHeight:72,value:v,onChange:E})]})}),h.jsx(Coe,{schema:a,currentDataNode:l,threadNode:i==null?void 0:i.threadNode,loadLLM:u,mainLLMInfo:s,retriverInfo:c,onAddNewThread:d,onSelectThread:f})]})}),Hoe=()=>{const[e,t]=g.useState(),n=Ze(l=>l.currentSession),{t:r}=Me("flows"),{toast:o}=Bt(),a=sn(l=>l.stream),i=sn(l=>l.loadModel),s=g.useCallback(async(l,u)=>{if(n!=null&&n.main_node_id){if(!(e!=null&&e.llm))return o({variant:"destructive",description:r("editor_node.errors.llm_not_found")});(e==null?void 0:e.status)!==et.Loaded&&(await i(e.llm.name,d=>{t(f=>f&&{...f,progress:d.text})}),t(d=>d&&{...d,status:et.Loaded,progress:""}));try{const d=a(l);if(!d)throw new Error("Stream is not supported");const f=[];for await(const p of d)p&&Array.isArray(p)&&(f.push(...p.map(y=>y.content)),p!=null&&p.length&&(u==null||u(p.map(y=>y.content).join(""))));return f.join("")}catch(d){if(d instanceof Error&&d.message.includes("LLM_NOT_LOADED_YET"))return o({title:r("editor_node.errors.llm_not_loaded_yet")});o({variant:"destructive",title:r("editor_node.errors.stream_message_failed")})}}},[n==null?void 0:n.main_node_id,e==null?void 0:e.llm,e==null?void 0:e.status,o,r,i,a]),c=g.useCallback(async()=>{if(!(n!=null&&n.main_node_id))return;const l=await ce("FlowEdge").find({where:{target:n.main_node_id}}),u=(await ce("FlowNode").find({where:{id:qn(l.map(f=>f.source))}})).find(f=>f.source_type===oe.LLM);if(!u)return;const d=await ce("LLM").findOne({where:{id:u.source_id}});d&&(await i(d.name,f=>{t(p=>p&&{...p,llm:d,progress:f.text})}),t({llm:d,status:et.Loaded}))},[n==null?void 0:n.main_node_id,i]);return g.useEffect(()=>{n!=null&&n.main_node_id&&c()},[n==null?void 0:n.main_node_id,c]),{mainLLMInfo:e,createMessage:s}},Woe=()=>{const e=Ze(n=>n.currentSession),t=g.useRef(null);return{updateEditorContent:g.useCallback(async n=>{e!=null&&e.main_node_id&&(clearTimeout(t.current),t.current=setTimeout(async()=>{e!=null&&e.main_node_id&&await ce("FlowNode").update(e.main_node_id,{data:n})},150))},[e])}},qoe=g.lazy(()=>Nt(()=>import("./PlateEditor-SF0quxx3.js").then(async e=>(await e.__tla,e)),__vite__mapDeps([15,1,2,13,16,4,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,3,5,6,105]))),Yoe=g.memo(()=>{var o,a,i,s,c;const{updateEditorContent:e}=Woe(),{mainLLMInfo:t,createMessage:n}=Hoe(),r=g.useCallback(l=>{e(l)},[e]);return h.jsxs("div",{className:"h-full w-full relative","data-registry":"plate",children:[h.jsx(kd,{children:h.jsx(Mi,{children:h.jsxs("div",{className:K("flex absolute !z-[51] right-1 top-0 max-w-28 h-9 items-center justify-center flex-row"),children:[(t==null?void 0:t.status)===et.Loaded&&((o=t==null?void 0:t.llm)!=null&&o.name)?h.jsx(bo,{name:(a=t==null?void 0:t.llm)==null?void 0:a.name,className:"w-5 h-5 mr-1"}):void 0,h.jsx(ki,{className:"overflow-hidden !text-ellipsis w-full max-w-full max-h-full whitespace-nowrap text-sm",children:t!=null&&t.progress?t==null?void 0:t.progress:(t==null?void 0:t.status)===et.Loaded?(i=t==null?void 0:t.llm)==null?void 0:i.name:h.jsx(ue,{size:16,name:"loader-circle",className:"animate-spin ml-2"})}),h.jsx(Sa,{children:h.jsx("p",{children:(t==null?void 0:t.progress)||((s=t==null?void 0:t.llm)==null?void 0:s.name)||""})})]})})}),h.jsx(g.Suspense,{fallback:h.jsx("div",{className:"h-full w-ful !rounded-none flex justify-center items-center",children:h.jsx(ue,{name:"loader-circle",className:"animate-spin"})}),children:h.jsx(qoe,{onValueChange:r,copilotStream:n,hideDragIcon:!0,enableHistoryControl:!0},((c=t==null?void 0:t.llm)==null?void 0:c.name)||"default")})]})}),Koe=()=>{const[e,t]=g.useState(),n=Ze(l=>l.currentSession),{t:r}=Me("flows"),{toast:o}=Bt(),a=sn(l=>l.stream),i=sn(l=>l.loadModel),s=g.useCallback(async(l,u)=>{if(n!=null&&n.main_node_id){if(!(e!=null&&e.llm))return o({variant:"destructive",description:r("editor_node.errors.llm_not_found")});(e==null?void 0:e.status)!==et.Loaded&&(await i(e.llm.name,d=>{t(f=>f&&{...f,progress:d.text})}),t(d=>d&&{...d,status:et.Loaded,progress:""}));try{const d=a(l);if(!d)throw new Error("Stream is not supported");const f=[];for await(const p of d)p&&Array.isArray(p)&&(f.push(...p.map(y=>y.content)),p!=null&&p.length&&(u==null||u(p.map(y=>y.content).join(""))));return f.join("")}catch(d){if(d instanceof Error&&d.message.includes("LLM_NOT_LOADED_YET"))return o({title:r("editor_node.errors.llm_not_loaded_yet")});o({variant:"destructive",title:r("editor_node.errors.stream_message_failed")})}}},[n==null?void 0:n.main_node_id,e==null?void 0:e.llm,e==null?void 0:e.status,o,r,i,a]),c=g.useCallback(async()=>{if(!(n!=null&&n.main_node_id))return;const l=await ce("FlowEdge").find({where:{target:n.main_node_id}}),u=(await ce("FlowNode").find({where:{id:qn(l.map(f=>f.source))}})).find(f=>f.source_type===oe.LLM);if(!u)return;const d=await ce("LLM").findOne({where:{id:u.source_id}});d&&(await i(d.name,f=>{t(p=>p&&{...p,llm:d,progress:f.text})}),t({llm:d,status:et.Loaded}))},[n==null?void 0:n.main_node_id,i]);return g.useEffect(()=>{n!=null&&n.main_node_id&&c()},[n==null?void 0:n.main_node_id,c]),{mainLLMInfo:e,createMessage:s}};dS=function(e,t=""){const n=[];for(const[r,o]of Object.entries(e)){const a=ya(),i=[t,r].filter(Boolean).join("/"),s="file"in o&&"contents"in o.file?o.file:void 0,c={id:a,isSelectable:!0,content:typeof(s==null?void 0:s.contents)=="string"?s.contents:void 0,file:i,name:r,children:[]};"directory"in o&&(c.children=dS(o.directory,i)),n.push(c)}return n},$m=function(e){const t=e.trim().split(`
`),n={};return t.forEach(r=>{const{file:o,content:a}=JSON.parse(r),i=o.split("/");let s=n;for(let c=0;c<i.length;c++){const l=i[c];c===i.length-1?s[l]={file:{contents:a}}:(s[l]||(s[l]={directory:{}}),s=s[l].directory)}}),n},Dm=function(e){const t=[];function n(r,o=[]){for(const[a,i]of Object.entries(r))if("file"in i){const s=[...o,a].join("/");if("contents"in i.file){const c=i.file.contents;t.push(JSON.stringify({file:s,content:c}))}}else"directory"in i&&n(i.directory,[...o,a])}return n(e),t.join(`
`)},zm=function(e,t,n){const r=t.replace(/^\.\//,"").split("/");let o=e;for(let a=0;a<r.length;a++){const i=r[a];if(a===r.length-1)i in o&&"file"in o[i]?o[i].file.contents=n:Or(`Path "${t}" is not a file.`);else if(i in o&&"directory"in o[i])o=o[i].directory;else return Or(`Path "${t}" does not exist.`),e}return e};const Xoe=()=>{const e=Ze(i=>i.currentSession),[t,n]=g.useState(),r=g.useCallback(async(i,s)=>{await ce("FlowNode").update(i,{raw:Dm(s)})},[]),o=g.useCallback(async(i,s)=>{e!=null&&e.main_node_id&&n(c=>{if(!(e!=null&&e.main_node_id))return c;const l=zm(c||{},i,s);return r(e==null?void 0:e.main_node_id,l),l})},[e==null?void 0:e.main_node_id,r]),a=g.useCallback(async()=>{if(!(e!=null&&e.main_node_id))return;const i=await ce("FlowNode").findOne({where:{id:e==null?void 0:e.main_node_id}});i&&n(i.raw?$m(i.raw):{})},[e==null?void 0:e.main_node_id]);return g.useEffect(()=>{e!=null&&e.main_node_id&&a()},[e==null?void 0:e.main_node_id,a]),{fileSystemTree:t,updateCodeContainerFile:o,updateCodeContainerData:r}},Qoe=g.lazy(()=>Nt(()=>import("./index-DJCPR4q8.js").then(async e=>(await e.__tla,e)),__vite__mapDeps([106,1,2,104,107,3,4,5,6,108]))),Joe=g.memo(()=>{var r,o,a,i;const{mainLLMInfo:e}=Koe(),{fileSystemTree:t,updateCodeContainerFile:n}=Xoe();return h.jsxs("div",{className:"h-full w-full relative","data-registry":"plate",children:[h.jsx(kd,{children:h.jsx(Mi,{children:h.jsxs("div",{className:K("flex absolute !z-[51] right-1 top-0 max-w-28 h-9 items-center justify-center flex-row"),children:[(e==null?void 0:e.status)===et.Loaded&&((r=e==null?void 0:e.llm)!=null&&r.name)?h.jsx(bo,{name:(o=e==null?void 0:e.llm)==null?void 0:o.name,className:"w-5 h-5 mr-1"}):void 0,h.jsx(ki,{className:"overflow-hidden !text-ellipsis w-full max-w-full max-h-full whitespace-nowrap text-sm",children:e!=null&&e.progress?e.progress:(e==null?void 0:e.status)===et.Loaded?((a=e==null?void 0:e.llm)==null?void 0:a.name)||"":h.jsx(ue,{size:16,name:"loader-circle",className:"animate-spin ml-2"})}),h.jsx(Sa,{children:h.jsx("p",{children:(e==null?void 0:e.progress)||((i=e==null?void 0:e.llm)==null?void 0:i.name)||""})})]})})}),h.jsx(g.Suspense,{fallback:h.jsx("div",{className:"h-full w-full flex justify-center items-center",children:h.jsx(ue,{name:"loader-circle",className:"animate-spin"})}),children:t!==void 0?h.jsx(Qoe,{autoLoad:!0,hideAppName:!0,fileSystemTree:t,onUpdateFileContent:n}):void 0})]})});function Goe(){var t,n;const e=Ze(r=>r.currentSession);if(!e)return h.jsx(U9,{flickeringGrid:!0,className:"w-full h-full"});if(e.main_source_type==="Thread")return h.jsx(Uoe,{});if(((t=e.main_node)==null?void 0:t.node_type)==="EDITOR_APP")return h.jsx(Yoe,{});if(((n=e.main_node)==null?void 0:n.node_type)==="VSLITE_APP")return h.jsx(Joe,{})}var sp="Menubar",[iw,Zoe,eae]=Lu(sp),[N3,s1e]=Vn(sp,[eae,Kr]),yn=Uu(),M3=Kr(),[tae,sw]=N3(sp),k3=g.forwardRef((e,t)=>{const{__scopeMenubar:n,value:r,onValueChange:o,defaultValue:a,loop:i=!0,dir:s,...c}=e,l=Bo(s),u=M3(n),[d="",f]=en({prop:r,onChange:o,defaultProp:a}),[p,y]=g.useState(null);return h.jsx(tae,{scope:n,value:d,onMenuOpen:g.useCallback(m=>{f(m),y(m)},[f]),onMenuClose:g.useCallback(()=>f(""),[f]),onMenuToggle:g.useCallback(m=>{f(v=>v?"":m),y(m)},[f]),dir:l,loop:i,children:h.jsx(iw.Provider,{scope:n,children:h.jsx(iw.Slot,{scope:n,children:h.jsx(nc,{asChild:!0,...u,orientation:"horizontal",loop:i,dir:l,currentTabStopId:p,onCurrentTabStopIdChange:y,children:h.jsx(Oe.div,{role:"menubar",...c,ref:t})})})})})});k3.displayName=sp;var cw="MenubarMenu",[nae,P3]=N3(cw),A3=e=>{const{__scopeMenubar:t,value:n,...r}=e,o=mt(),a=n||o||"LEGACY_REACT_AUTO_VALUE",i=sw(cw,t),s=yn(t),c=g.useRef(null),l=g.useRef(!1),u=i.value===a;return g.useEffect(()=>{u||(l.current=!1)},[u]),h.jsx(nae,{scope:t,value:a,triggerId:mt(),triggerRef:c,contentId:mt(),wasKeyboardTriggerOpenRef:l,children:h.jsx(bm,{...s,open:u,onOpenChange:d=>{d||i.onMenuClose()},modal:!1,dir:i.dir,...r})})};A3.displayName=cw;var lw="MenubarTrigger",T3=g.forwardRef((e,t)=>{const{__scopeMenubar:n,disabled:r=!1,...o}=e,a=M3(n),i=yn(n),s=sw(lw,n),c=P3(lw,n),l=g.useRef(null),u=rt(t,l,c.triggerRef),[d,f]=g.useState(!1),p=s.value===c.value;return h.jsx(iw.ItemSlot,{scope:n,value:c.value,disabled:r,children:h.jsx(rc,{asChild:!0,...a,focusable:!r,tabStopId:c.value,children:h.jsx(am,{asChild:!0,...i,children:h.jsx(Oe.button,{type:"button",role:"menuitem",id:c.triggerId,"aria-haspopup":"menu","aria-expanded":p,"aria-controls":p?c.contentId:void 0,"data-highlighted":d?"":void 0,"data-state":p?"open":"closed","data-disabled":r?"":void 0,disabled:r,...o,ref:u,onPointerDown:he(e.onPointerDown,y=>{!r&&y.button===0&&y.ctrlKey===!1&&(s.onMenuOpen(c.value),p||y.preventDefault())}),onPointerEnter:he(e.onPointerEnter,()=>{var y;s.value&&!p&&(s.onMenuOpen(c.value),(y=l.current)==null||y.focus())}),onKeyDown:he(e.onKeyDown,y=>{r||(["Enter"," "].includes(y.key)&&s.onMenuToggle(c.value),y.key==="ArrowDown"&&s.onMenuOpen(c.value),["Enter"," ","ArrowDown"].includes(y.key)&&(c.wasKeyboardTriggerOpenRef.current=!0,y.preventDefault()))}),onFocus:he(e.onFocus,()=>f(!0)),onBlur:he(e.onBlur,()=>f(!1))})})})})});T3.displayName=lw;var rae="MenubarPortal",R3=e=>{const{__scopeMenubar:t,...n}=e,r=yn(t);return h.jsx(vm,{...r,...n})};R3.displayName=rae;var uw="MenubarContent",I3=g.forwardRef((e,t)=>{const{__scopeMenubar:n,align:r="start",...o}=e,a=yn(n),i=sw(uw,n),s=P3(uw,n),c=Zoe(n),l=g.useRef(!1);return h.jsx(im,{id:s.contentId,"aria-labelledby":s.triggerId,"data-radix-menubar-content":"",...a,...o,ref:t,align:r,onCloseAutoFocus:he(e.onCloseAutoFocus,u=>{var d;!i.value&&!l.current&&((d=s.triggerRef.current)==null||d.focus()),l.current=!1,u.preventDefault()}),onFocusOutside:he(e.onFocusOutside,u=>{const d=u.target;c().some(f=>{var p;return(p=f.ref.current)==null?void 0:p.contains(d)})&&u.preventDefault()}),onInteractOutside:he(e.onInteractOutside,()=>{l.current=!0}),onEntryFocus:u=>{s.wasKeyboardTriggerOpenRef.current||u.preventDefault()},onKeyDown:he(e.onKeyDown,u=>{if(["ArrowRight","ArrowLeft"].includes(u.key)){const d=u.target,f=d.hasAttribute("data-radix-menubar-subtrigger"),p=d.closest("[data-radix-menubar-content]")!==u.currentTarget,y=(i.dir==="rtl"?"ArrowRight":"ArrowLeft")===u.key;if(!y&&f||p&&y)return;let m=c().filter(x=>!x.disabled).map(x=>x.value);y&&m.reverse();const v=m.indexOf(s.value);m=i.loop?vae(m,v+1):m.slice(v+1);const[b]=m;b&&i.onMenuOpen(b)}},{checkForDefaultPrevented:!1}),style:{...e.style,"--radix-menubar-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-menubar-content-available-width":"var(--radix-popper-available-width)","--radix-menubar-content-available-height":"var(--radix-popper-available-height)","--radix-menubar-trigger-width":"var(--radix-popper-anchor-width)","--radix-menubar-trigger-height":"var(--radix-popper-anchor-height)"}})});I3.displayName=uw;var oae="MenubarGroup",aae=g.forwardRef((e,t)=>{const{__scopeMenubar:n,...r}=e,o=yn(n);return h.jsx(sm,{...o,...r,ref:t})});aae.displayName=oae;var iae="MenubarLabel",D3=g.forwardRef((e,t)=>{const{__scopeMenubar:n,...r}=e,o=yn(n);return h.jsx(cm,{...o,...r,ref:t})});D3.displayName=iae;var sae="MenubarItem",L3=g.forwardRef((e,t)=>{const{__scopeMenubar:n,...r}=e,o=yn(n);return h.jsx(lm,{...o,...r,ref:t})});L3.displayName=sae;var cae="MenubarCheckboxItem",F3=g.forwardRef((e,t)=>{const{__scopeMenubar:n,...r}=e,o=yn(n);return h.jsx(um,{...o,...r,ref:t})});F3.displayName=cae;var lae="MenubarRadioGroup",uae=g.forwardRef((e,t)=>{const{__scopeMenubar:n,...r}=e,o=yn(n);return h.jsx(dm,{...o,...r,ref:t})});uae.displayName=lae;var dae="MenubarRadioItem",B3=g.forwardRef((e,t)=>{const{__scopeMenubar:n,...r}=e,o=yn(n);return h.jsx(fm,{...o,...r,ref:t})});B3.displayName=dae;var fae="MenubarItemIndicator",$3=g.forwardRef((e,t)=>{const{__scopeMenubar:n,...r}=e,o=yn(n);return h.jsx(pm,{...o,...r,ref:t})});$3.displayName=fae;var pae="MenubarSeparator",z3=g.forwardRef((e,t)=>{const{__scopeMenubar:n,...r}=e,o=yn(n);return h.jsx(hm,{...o,...r,ref:t})});z3.displayName=pae;var hae="MenubarArrow",mae=g.forwardRef((e,t)=>{const{__scopeMenubar:n,...r}=e,o=yn(n);return h.jsx(mm,{...o,...r,ref:t})});mae.displayName=hae;var yae="MenubarSubTrigger",V3=g.forwardRef((e,t)=>{const{__scopeMenubar:n,...r}=e,o=yn(n);return h.jsx(ym,{"data-radix-menubar-subtrigger":"",...o,...r,ref:t})});V3.displayName=yae;var gae="MenubarSubContent",U3=g.forwardRef((e,t)=>{const{__scopeMenubar:n,...r}=e,o=yn(n);return h.jsx(gm,{...o,"data-radix-menubar-content":"",...r,ref:t,style:{...e.style,"--radix-menubar-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-menubar-content-available-width":"var(--radix-popper-available-width)","--radix-menubar-content-available-height":"var(--radix-popper-available-height)","--radix-menubar-trigger-width":"var(--radix-popper-anchor-width)","--radix-menubar-trigger-height":"var(--radix-popper-anchor-height)"}})});U3.displayName=gae;function vae(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var H3=k3,bae=A3,W3=T3,xae=R3,q3=I3,Y3=D3,K3=L3,X3=F3,Q3=B3,J3=$3,G3=z3,Z3=V3,e5=U3;const dw=bae,t5=g.forwardRef(({className:e,...t},n)=>h.jsx(H3,{ref:n,className:K("flex h-10 items-center space-x-1 rounded-md border bg-background p-1",e),...t}));t5.displayName=H3.displayName;const fw=g.forwardRef(({className:e,...t},n)=>h.jsx(W3,{ref:n,className:K("flex cursor-default select-none items-center rounded-sm px-3 py-1.5 text-sm font-medium outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground",e),...t}));fw.displayName=W3.displayName;const wae=g.forwardRef(({className:e,inset:t,children:n,...r},o)=>h.jsxs(Z3,{ref:o,className:K("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground",t&&"pl-8",e),...r,children:[n,h.jsx(ue,{name:"chevron-right",className:"ml-auto h-4 w-4"})]}));wae.displayName=Z3.displayName;const _ae=g.forwardRef(({className:e,...t},n)=>h.jsx(e5,{ref:n,className:K("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));_ae.displayName=e5.displayName;const n5=g.forwardRef(({className:e,align:t="start",alignOffset:n=-4,sideOffset:r=8,...o},a)=>h.jsx(xae,{children:h.jsx(q3,{ref:a,align:t,alignOffset:n,sideOffset:r,className:K("z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...o})}));n5.displayName=q3.displayName;const r5=g.forwardRef(({className:e,inset:t,...n},r)=>h.jsx(K3,{ref:r,className:K("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...n}));r5.displayName=K3.displayName;const jae=g.forwardRef(({className:e,children:t,checked:n,...r},o)=>h.jsxs(X3,{ref:o,className:K("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:n,...r,children:[h.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:h.jsx(J3,{children:h.jsx(ue,{name:"check",className:"h-4 w-4"})})}),t]}));jae.displayName=X3.displayName;const Eae=g.forwardRef(({className:e,children:t,...n},r)=>h.jsxs(Q3,{ref:r,className:K("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[h.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:h.jsx(J3,{children:h.jsx(ue,{name:"circle",className:"h-2 w-2 fill-current"})})}),t]}));Eae.displayName=Q3.displayName;const Sae=g.forwardRef(({className:e,inset:t,...n},r)=>h.jsx(Y3,{ref:r,className:K("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...n}));Sae.displayName=Y3.displayName;const Cae=g.forwardRef(({className:e,...t},n)=>h.jsx(G3,{ref:n,className:K("-mx-1 my-1 h-px bg-muted",e),...t}));Cae.displayName=G3.displayName;let o5;Ae=Pwe()(Awe(Twe((e,t)=>({...wI,...Yne(e,t)})))),o5=()=>{const e=Ze(i=>{var s;return(s=i.currentSession)==null?void 0:s.id}),[t,n]=g.useState(!1),r=Ae(i=>i.pushSyncNodeQueue),o=Ae(i=>i.createOrUpdateFlowNode),a=g.useCallback(async(i,s)=>{try{if(!e)throw new Error("Session not found");n(!0);const c=await ce("LLM").findOne({where:{name:s.name,session_id:e}});return c?(r("LLM",{where:{source_type:"LLM",source_id:c.id}}),c):ce("LLM").save({name:`${s.name}`,status:et.Started,session_id:e,provider:qu.WebLLM,metadata:JSON.stringify({}),model_type:s.model_type||uc.LLM,...s}).then(async l=>{var u,d,f;return await o({source_id:l.id,source_type:"LLM",node_type:oe.LLM,x:(u=i.position)==null?void 0:u.x,y:((d=i.position)==null?void 0:d.y)+(((f=i.measured)==null?void 0:f.height)||0)+30}),l})}finally{n(!1)}},[o,r,e]);return{loading:t,createDatabaseLLM:a}};var pw="Popover",[a5,c1e]=Vn(pw,[Yo]),Ol=Yo(),[Oae,na]=a5(pw),i5=e=>{const{__scopePopover:t,children:n,open:r,defaultOpen:o,onOpenChange:a,modal:i=!1}=e,s=Ol(t),c=g.useRef(null),[l,u]=g.useState(!1),[d=!1,f]=en({prop:r,defaultProp:o,onChange:a});return h.jsx(Oc,{...s,children:h.jsx(Oae,{scope:t,contentId:mt(),triggerRef:c,open:d,onOpenChange:f,onOpenToggle:g.useCallback(()=>f(p=>!p),[f]),hasCustomAnchor:l,onCustomAnchorAdd:g.useCallback(()=>u(!0),[]),onCustomAnchorRemove:g.useCallback(()=>u(!1),[]),modal:i,children:n})})};i5.displayName=pw;let hw;hw="PopoverAnchor",Im=g.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,o=na(hw,n),a=Ol(n),{onCustomAnchorAdd:i,onCustomAnchorRemove:s}=o;return g.useEffect(()=>(i(),()=>s()),[i,s]),h.jsx(Nc,{...a,...r,ref:t})}),Im.displayName=hw;var s5="PopoverTrigger",mw=g.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,o=na(s5,n),a=Ol(n),i=rt(t,o.triggerRef),s=h.jsx(Oe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":f5(o.open),...r,ref:i,onClick:he(e.onClick,o.onOpenToggle)});return o.hasCustomAnchor?s:h.jsx(Nc,{asChild:!0,...a,children:s})});mw.displayName=s5;var yw="PopoverPortal",[Nae,Mae]=a5(yw,{forceMount:void 0}),c5=e=>{const{__scopePopover:t,forceMount:n,children:r,container:o}=e,a=na(yw,t);return h.jsx(Nae,{scope:t,forceMount:n,children:h.jsx(Nn,{present:n||a.open,children:h.jsx(Ru,{asChild:!0,container:o,children:r})})})};c5.displayName=yw;var ls="PopoverContent",l5=g.forwardRef((e,t)=>{const n=Mae(ls,e.__scopePopover),{forceMount:r=n.forceMount,...o}=e,a=na(ls,e.__scopePopover);return h.jsx(Nn,{present:r||a.open,children:a.modal?h.jsx(kae,{...o,ref:t}):h.jsx(Pae,{...o,ref:t})})});l5.displayName=ls;var kae=g.forwardRef((e,t)=>{const n=na(ls,e.__scopePopover),r=g.useRef(null),o=rt(t,r),a=g.useRef(!1);return g.useEffect(()=>{const i=r.current;if(i)return md(i)},[]),h.jsx(jc,{as:Yr,allowPinchZoom:!0,children:h.jsx(u5,{...e,ref:o,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:he(e.onCloseAutoFocus,i=>{var s;i.preventDefault(),a.current||((s=n.triggerRef.current)==null||s.focus())}),onPointerDownOutside:he(e.onPointerDownOutside,i=>{const s=i.detail.originalEvent,c=s.button===0&&s.ctrlKey===!0,l=s.button===2||c;a.current=l},{checkForDefaultPrevented:!1}),onFocusOutside:he(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1})})})}),Pae=g.forwardRef((e,t)=>{const n=na(ls,e.__scopePopover),r=g.useRef(!1),o=g.useRef(!1);return h.jsx(u5,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var i,s;(i=e.onCloseAutoFocus)==null||i.call(e,a),a.defaultPrevented||(r.current||((s=n.triggerRef.current)==null||s.focus()),a.preventDefault()),r.current=!1,o.current=!1},onInteractOutside:a=>{var s,c;(s=e.onInteractOutside)==null||s.call(e,a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const i=a.target;(c=n.triggerRef.current)!=null&&c.contains(i)&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&o.current&&a.preventDefault()}})}),u5=g.forwardRef((e,t)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:o,onCloseAutoFocus:a,disableOutsidePointerEvents:i,onEscapeKeyDown:s,onPointerDownOutside:c,onFocusOutside:l,onInteractOutside:u,...d}=e,f=na(ls,n),p=Ol(n);return sd(),h.jsx(_c,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:o,onUnmountAutoFocus:a,children:h.jsx(Tu,{asChild:!0,disableOutsidePointerEvents:i,onInteractOutside:u,onEscapeKeyDown:s,onPointerDownOutside:c,onFocusOutside:l,onDismiss:()=>f.onOpenChange(!1),children:h.jsx(Sd,{"data-state":f5(f.open),role:"dialog",id:f.contentId,...p,...d,ref:t,style:{...d.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),d5="PopoverClose",Aae=g.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,o=na(d5,n);return h.jsx(Oe.button,{type:"button",...r,ref:t,onClick:he(e.onClick,()=>o.onOpenChange(!1))})});Aae.displayName=d5;var Tae="PopoverArrow",Rae=g.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,o=Ol(n);return h.jsx(Cd,{...o,...r,ref:t})});Rae.displayName=Tae;function f5(e){return e?"open":"closed"}rS=i5,Q9=Im,ez=mw,oS=c5,Pm=l5;const Iae=rS,p5=g.forwardRef(({className:e,align:t="center",sideOffset:n=4,...r},o)=>h.jsx(oS,{children:h.jsx(Pm,{ref:o,align:t,sideOffset:n,className:K("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));p5.displayName=Pm.displayName;var h5=1,Dae=.9,Lae=.8,Fae=.17,gw=.1,vw=.999,Bae=.9999,$ae=.99,zae=/[\\\/_+.#"@\[\(\{&]/,Vae=/[\\\/_+.#"@\[\(\{&]/g,Uae=/[\s-]/,m5=/[\s-]/g;function bw(e,t,n,r,o,a,i){if(a===t.length)return o===e.length?h5:$ae;var s=`${o},${a}`;if(i[s]!==void 0)return i[s];for(var c=r.charAt(a),l=n.indexOf(c,o),u=0,d,f,p,y;l>=0;)d=bw(e,t,n,r,l+1,a+1,i),d>u&&(l===o?d*=h5:zae.test(e.charAt(l-1))?(d*=Lae,p=e.slice(o,l-1).match(Vae),p&&o>0&&(d*=Math.pow(vw,p.length))):Uae.test(e.charAt(l-1))?(d*=Dae,y=e.slice(o,l-1).match(m5),y&&o>0&&(d*=Math.pow(vw,y.length))):(d*=Fae,o>0&&(d*=Math.pow(vw,l-o))),e.charAt(l)!==t.charAt(a)&&(d*=Bae)),(d<gw&&n.charAt(l-1)===r.charAt(a+1)||r.charAt(a+1)===r.charAt(a)&&n.charAt(l-1)!==r.charAt(a))&&(f=bw(e,t,n,r,l+1,a+2,i),f*gw>d&&(d=f*gw)),d>u&&(u=d),l=n.indexOf(c,l+1);return i[s]=u,u}function y5(e){return e.toLowerCase().replace(m5," ")}function Hae(e,t,n){return e=n&&n.length>0?`${e+" "+n.join(" ")}`:e,bw(e,t,y5(e),y5(t),0,0,{})}var Nl='[cmdk-group=""]',xw='[cmdk-group-items=""]',Wae='[cmdk-group-heading=""]',ww='[cmdk-item=""]',g5=`${ww}:not([aria-disabled="true"])`,_w="cmdk-item-select",za="data-value",qae=(e,t,n)=>Hae(e,t,n),v5=g.createContext(void 0),Ml=()=>g.useContext(v5),b5=g.createContext(void 0),jw=()=>g.useContext(b5),x5=g.createContext(void 0),w5=g.forwardRef((e,t)=>{let n=us(()=>{var F,H;return{search:"",value:(H=(F=e.value)!=null?F:e.defaultValue)!=null?H:"",filtered:{count:0,items:new Map,groups:new Set}}}),r=us(()=>new Set),o=us(()=>new Map),a=us(()=>new Map),i=us(()=>new Set),s=_5(e),{label:c,children:l,value:u,onValueChange:d,filter:f,shouldFilter:p,loop:y,disablePointerSelection:m=!1,vimBindings:v=!0,...b}=e,x=mt(),_=mt(),w=mt(),j=g.useRef(null),E=rie();Va(()=>{if(u!==void 0){let F=u.trim();n.current.value=F,S.emit()}},[u]),Va(()=>{E(6,A)},[]);let S=g.useMemo(()=>({subscribe:F=>(i.current.add(F),()=>i.current.delete(F)),snapshot:()=>n.current,setState:(F,H,J)=>{var q,re,Z;if(!Object.is(n.current[F],H)){if(n.current[F]=H,F==="search")R(),N(),E(1,P);else if(F==="value"&&(J||E(5,A),((q=s.current)==null?void 0:q.value)!==void 0)){let Y=H??"";(Z=(re=s.current).onValueChange)==null||Z.call(re,Y);return}S.emit()}},emit:()=>{i.current.forEach(F=>F())}}),[]),O=g.useMemo(()=>({value:(F,H,J)=>{var q;H!==((q=a.current.get(F))==null?void 0:q.value)&&(a.current.set(F,{value:H,keywords:J}),n.current.filtered.items.set(F,k(H,J)),E(2,()=>{N(),S.emit()}))},item:(F,H)=>(r.current.add(F),H&&(o.current.has(H)?o.current.get(H).add(F):o.current.set(H,new Set([F]))),E(3,()=>{R(),N(),n.current.value||P(),S.emit()}),()=>{a.current.delete(F),r.current.delete(F),n.current.filtered.items.delete(F);let J=C();E(4,()=>{R(),(J==null?void 0:J.getAttribute("id"))===F&&P(),S.emit()})}),group:F=>(o.current.has(F)||o.current.set(F,new Set),()=>{a.current.delete(F),o.current.delete(F)}),filter:()=>s.current.shouldFilter,label:c||e["aria-label"],getDisablePointerSelection:()=>s.current.disablePointerSelection,listId:x,inputId:w,labelId:_,listInnerRef:j}),[]);function k(F,H){var J,q;let re=(q=(J=s.current)==null?void 0:J.filter)!=null?q:qae;return F?re(F,n.current.search,H):0}function N(){if(!n.current.search||s.current.shouldFilter===!1)return;let F=n.current.filtered.items,H=[];n.current.filtered.groups.forEach(q=>{let re=o.current.get(q),Z=0;re.forEach(Y=>{let W=F.get(Y);Z=Math.max(W,Z)}),H.push([q,Z])});let J=j.current;M().sort((q,re)=>{var Z,Y;let W=q.getAttribute("id"),G=re.getAttribute("id");return((Z=F.get(G))!=null?Z:0)-((Y=F.get(W))!=null?Y:0)}).forEach(q=>{let re=q.closest(xw);re?re.appendChild(q.parentElement===re?q:q.closest(`${xw} > *`)):J.appendChild(q.parentElement===J?q:q.closest(`${xw} > *`))}),H.sort((q,re)=>re[1]-q[1]).forEach(q=>{var re;let Z=(re=j.current)==null?void 0:re.querySelector(`${Nl}[${za}="${encodeURIComponent(q[0])}"]`);Z==null||Z.parentElement.appendChild(Z)})}function P(){let F=M().find(J=>J.getAttribute("aria-disabled")!=="true"),H=F==null?void 0:F.getAttribute(za);S.setState("value",H||void 0)}function R(){var F,H,J,q;if(!n.current.search||s.current.shouldFilter===!1){n.current.filtered.count=r.current.size;return}n.current.filtered.groups=new Set;let re=0;for(let Z of r.current){let Y=(H=(F=a.current.get(Z))==null?void 0:F.value)!=null?H:"",W=(q=(J=a.current.get(Z))==null?void 0:J.keywords)!=null?q:[],G=k(Y,W);n.current.filtered.items.set(Z,G),G>0&&re++}for(let[Z,Y]of o.current)for(let W of Y)if(n.current.filtered.items.get(W)>0){n.current.filtered.groups.add(Z);break}n.current.filtered.count=re}function A(){var F,H,J;let q=C();q&&(((F=q.parentElement)==null?void 0:F.firstChild)===q&&((J=(H=q.closest(Nl))==null?void 0:H.querySelector(Wae))==null||J.scrollIntoView({block:"nearest"})),q.scrollIntoView({block:"nearest"}))}function C(){var F;return(F=j.current)==null?void 0:F.querySelector(`${ww}[aria-selected="true"]`)}function M(){var F;return Array.from(((F=j.current)==null?void 0:F.querySelectorAll(g5))||[])}function T(F){let H=M()[F];H&&S.setState("value",H.getAttribute(za))}function D(F){var H;let J=C(),q=M(),re=q.findIndex(Y=>Y===J),Z=q[re+F];(H=s.current)!=null&&H.loop&&(Z=re+F<0?q[q.length-1]:re+F===q.length?q[0]:q[re+F]),Z&&S.setState("value",Z.getAttribute(za))}function I(F){let H=C(),J=H==null?void 0:H.closest(Nl),q;for(;J&&!q;)J=F>0?tie(J,Nl):nie(J,Nl),q=J==null?void 0:J.querySelector(g5);q?S.setState("value",q.getAttribute(za)):D(F)}let L=()=>T(M().length-1),B=F=>{F.preventDefault(),F.metaKey?L():F.altKey?I(1):D(1)},U=F=>{F.preventDefault(),F.metaKey?T(0):F.altKey?I(-1):D(-1)};return g.createElement(Oe.div,{ref:t,tabIndex:-1,...b,"cmdk-root":"",onKeyDown:F=>{var H;if((H=b.onKeyDown)==null||H.call(b,F),!F.defaultPrevented)switch(F.key){case"n":case"j":{v&&F.ctrlKey&&B(F);break}case"ArrowDown":{B(F);break}case"p":case"k":{v&&F.ctrlKey&&U(F);break}case"ArrowUp":{U(F);break}case"Home":{F.preventDefault(),T(0);break}case"End":{F.preventDefault(),L();break}case"Enter":if(!F.nativeEvent.isComposing&&F.keyCode!==229){F.preventDefault();let J=C();if(J){let q=new Event(_w);J.dispatchEvent(q)}}}}},g.createElement("label",{"cmdk-label":"",htmlFor:O.inputId,id:O.labelId,style:aie},c),cp(e,F=>g.createElement(b5.Provider,{value:S},g.createElement(v5.Provider,{value:O},F))))}),Yae=g.forwardRef((e,t)=>{var n,r;let o=mt(),a=g.useRef(null),i=g.useContext(x5),s=Ml(),c=_5(e),l=(r=(n=c.current)==null?void 0:n.forceMount)!=null?r:i==null?void 0:i.forceMount;Va(()=>{if(!l)return s.item(o,i==null?void 0:i.id)},[l]);let u=j5(o,a,[e.value,e.children,a],e.keywords),d=jw(),f=Ua(E=>E.value&&E.value===u.current),p=Ua(E=>l||s.filter()===!1?!0:E.search?E.filtered.items.get(o)>0:!0);g.useEffect(()=>{let E=a.current;if(!(!E||e.disabled))return E.addEventListener(_w,y),()=>E.removeEventListener(_w,y)},[p,e.onSelect,e.disabled]);function y(){var E,S;m(),(S=(E=c.current).onSelect)==null||S.call(E,u.current)}function m(){d.setState("value",u.current,!0)}if(!p)return null;let{disabled:v,value:b,onSelect:x,forceMount:_,keywords:w,...j}=e;return g.createElement(Oe.div,{ref:kl([a,t]),...j,id:o,"cmdk-item":"",role:"option","aria-disabled":!!v,"aria-selected":!!f,"data-disabled":!!v,"data-selected":!!f,onPointerMove:v||s.getDisablePointerSelection()?void 0:m,onClick:v?void 0:y},e.children)}),Kae=g.forwardRef((e,t)=>{let{heading:n,children:r,forceMount:o,...a}=e,i=mt(),s=g.useRef(null),c=g.useRef(null),l=mt(),u=Ml(),d=Ua(p=>o||u.filter()===!1?!0:p.search?p.filtered.groups.has(i):!0);Va(()=>u.group(i),[]),j5(i,s,[e.value,e.heading,c]);let f=g.useMemo(()=>({id:i,forceMount:o}),[o]);return g.createElement(Oe.div,{ref:kl([s,t]),...a,"cmdk-group":"",role:"presentation",hidden:d?void 0:!0},n&&g.createElement("div",{ref:c,"cmdk-group-heading":"","aria-hidden":!0,id:l},n),cp(e,p=>g.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":n?l:void 0},g.createElement(x5.Provider,{value:f},p))))}),Xae=g.forwardRef((e,t)=>{let{alwaysRender:n,...r}=e,o=g.useRef(null),a=Ua(i=>!i.search);return!n&&!a?null:g.createElement(Oe.div,{ref:kl([o,t]),...r,"cmdk-separator":"",role:"separator"})}),Qae=g.forwardRef((e,t)=>{let{onValueChange:n,...r}=e,o=e.value!=null,a=jw(),i=Ua(u=>u.search),s=Ua(u=>u.value),c=Ml(),l=g.useMemo(()=>{var u;let d=(u=c.listInnerRef.current)==null?void 0:u.querySelector(`${ww}[${za}="${encodeURIComponent(s)}"]`);return d==null?void 0:d.getAttribute("id")},[]);return g.useEffect(()=>{e.value!=null&&a.setState("search",e.value)},[e.value]),g.createElement(Oe.input,{ref:t,...r,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":c.listId,"aria-labelledby":c.labelId,"aria-activedescendant":l,id:c.inputId,type:"text",value:o?e.value:i,onChange:u=>{o||a.setState("search",u.target.value),n==null||n(u.target.value)}})}),Jae=g.forwardRef((e,t)=>{let{children:n,label:r="Suggestions",...o}=e,a=g.useRef(null),i=g.useRef(null),s=Ml();return g.useEffect(()=>{if(i.current&&a.current){let c=i.current,l=a.current,u,d=new ResizeObserver(()=>{u=requestAnimationFrame(()=>{let f=c.offsetHeight;l.style.setProperty("--cmdk-list-height",f.toFixed(1)+"px")})});return d.observe(c),()=>{cancelAnimationFrame(u),d.unobserve(c)}}},[]),g.createElement(Oe.div,{ref:kl([a,t]),...o,"cmdk-list":"",role:"listbox","aria-label":r,id:s.listId},cp(e,c=>g.createElement("div",{ref:kl([i,s.listInnerRef]),"cmdk-list-sizer":""},c)))}),Gae=g.forwardRef((e,t)=>{let{open:n,onOpenChange:r,overlayClassName:o,contentClassName:a,container:i,...s}=e;return g.createElement(tc,{open:n,onOpenChange:r},g.createElement(ic,{container:i},g.createElement(va,{"cmdk-overlay":"",className:o}),g.createElement(ba,{"aria-label":e.label,"cmdk-dialog":"",className:a},g.createElement(w5,{ref:t,...s}))))}),Zae=g.forwardRef((e,t)=>Ua(n=>n.filtered.count===0)?g.createElement(Oe.div,{ref:t,...e,"cmdk-empty":"",role:"presentation"}):null),eie=g.forwardRef((e,t)=>{let{progress:n,children:r,label:o="Loading...",...a}=e;return g.createElement(Oe.div,{ref:t,...a,"cmdk-loading":"",role:"progressbar","aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,"aria-label":o},cp(e,i=>g.createElement("div",{"aria-hidden":!0},i)))}),Sn=Object.assign(w5,{List:Jae,Item:Yae,Input:Qae,Group:Kae,Separator:Xae,Dialog:Gae,Empty:Zae,Loading:eie});function tie(e,t){let n=e.nextElementSibling;for(;n;){if(n.matches(t))return n;n=n.nextElementSibling}}function nie(e,t){let n=e.previousElementSibling;for(;n;){if(n.matches(t))return n;n=n.previousElementSibling}}function _5(e){let t=g.useRef(e);return Va(()=>{t.current=e}),t}var Va=typeof window>"u"?g.useEffect:g.useLayoutEffect;function us(e){let t=g.useRef();return t.current===void 0&&(t.current=e()),t}function kl(e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}function Ua(e){let t=jw(),n=()=>e(t.snapshot());return Hu.useSyncExternalStore(t.subscribe,n,n)}function j5(e,t,n,r=[]){let o=g.useRef(),a=Ml();return Va(()=>{var i;let s=(()=>{var l;for(let u of n){if(typeof u=="string")return u.trim();if(typeof u=="object"&&"current"in u)return u.current?(l=u.current.textContent)==null?void 0:l.trim():o.current}})(),c=r.map(l=>l.trim());a.value(e,s,c),(i=t.current)==null||i.setAttribute(za,s),o.current=s}),o}var rie=()=>{let[e,t]=g.useState(),n=us(()=>new Map);return Va(()=>{n.current.forEach(r=>r()),n.current=new Map},[e]),(r,o)=>{n.current.set(r,o),t({})}};function oie(e){let t=e.type;return typeof t=="function"?t(e.props):"render"in t?t.render(e.props):e}function cp({asChild:e,children:t},n){return e&&g.isValidElement(t)?g.cloneElement(oie(t),{ref:t.ref},n(t.props.children)):n(t)}var aie={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const E5=g.forwardRef(({className:e,...t},n)=>h.jsx(Sn,{ref:n,className:K("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",e),...t}));E5.displayName=Sn.displayName;const S5=g.forwardRef(({className:e,...t},n)=>h.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[h.jsx(ue,{name:"search",className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),h.jsx(Sn.Input,{ref:n,className:K("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",e),...t})]}));S5.displayName=Sn.Input.displayName;const C5=g.forwardRef(({className:e,...t},n)=>h.jsx(Sn.List,{ref:n,className:K("max-h-[300px] overflow-y-auto overflow-x-hidden",e),...t}));C5.displayName=Sn.List.displayName;const O5=g.forwardRef((e,t)=>h.jsx(Sn.Empty,{ref:t,className:"py-6 text-center text-sm",...e}));O5.displayName=Sn.Empty.displayName;const N5=g.forwardRef(({className:e,...t},n)=>h.jsx(Sn.Group,{ref:n,className:K("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",e),...t}));N5.displayName=Sn.Group.displayName;const iie=g.forwardRef(({className:e,...t},n)=>h.jsx(Sn.Separator,{ref:n,className:K("-mx-1 h-px bg-border",e),...t}));iie.displayName=Sn.Separator.displayName;const M5=g.forwardRef(({className:e,...t},n)=>h.jsx(Sn.Item,{ref:n,className:K("relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",e),...t}));M5.displayName=Sn.Item.displayName;const sie=[qu.WebLLM];function cie(e){var C;const{id:t,setDialog:n}=e,{t:r}=Me("components"),{toast:o}=Bt(),a=ln(t),[i,s]=g.useState(""),[c,l]=g.useState(!1),[u,d]=g.useState(""),[f,p]=g.useState(qu.WebLLM),[y,m]=g.useState(!1),[v,b]=g.useState(),x=sn(M=>M.syncCachedLLMURLs),_=sn(M=>M.cachedLLMURLs),{loading:w,createDatabaseLLM:j}=o5();g.useEffect(()=>{Nt(()=>import("./index-CCJ1qLS7.js").then(async M=>(await M.__tla,M)),__vite__mapDeps([7,1,2,3,4,5,6])).then(async({functionCallingModelIds:M,prebuiltAppConfig:T})=>{const D=T.model_list;b({modelList:D,functionCallingModelIds:M})})},[]),g.useEffect(()=>{x()},[x]);const E=g.useMemo(()=>!(v!=null&&v.functionCallingModelIds)||!(v!=null&&v.modelList)?[]:((u?v==null?void 0:v.modelList.filter(M=>M.model_id.toLowerCase().includes(u.toLowerCase())):v==null?void 0:v.modelList)||[]).sort((M,T)=>{const D=_.some(H=>H.includes(M.model_id)),I=_.some(H=>H.includes(T.model_id));if(D&&!I)return-1;if(!D&&I)return 1;const L=Px.includes(M.model_id),B=Px.includes(T.model_id);if(L&&!B)return-1;if(!L&&B)return 1;const U=v==null?void 0:v.functionCallingModelIds.includes(M.model_id),F=v==null?void 0:v.functionCallingModelIds.includes(T.model_id);return U&&!F?-1:!U&&F?1:M.vram_required_MB&&T.vram_required_MB&&M.vram_required_MB!==T.vram_required_MB?M.vram_required_MB-T.vram_required_MB:M.model_id.localeCompare(T.model_id)}),[v==null?void 0:v.modelList,v==null?void 0:v.functionCallingModelIds,u,_]),S=g.useMemo(()=>{if(!(!i||!(v!=null&&v.modelList)))return v==null?void 0:v.modelList.find(M=>M.model_id===i)},[i,v==null?void 0:v.modelList]);g.useEffect(()=>{!(S!=null&&S.model_id)||!_||m(_.some(M=>M.includes(S.model_id)))},[_,S==null?void 0:S.model_id]);const O=g.useCallback(M=>M===1?uc.embedding:M===2?uc.VLM:uc.LLM,[]),k=g.useCallback(M=>{s(M),l(!1)},[]),N=g.useCallback(M=>{d(M)},[]),P=g.useCallback(M=>{p(M)},[]),R=async()=>{var M;if(a)try{await j(a,{name:i,model_type:O(S==null?void 0:S.model_type),function_calling:S!=null&&S.model_id?(M=v==null?void 0:v.functionCallingModelIds)==null?void 0:M.includes(S==null?void 0:S.model_id):!1}),n==null||n(!1)}catch{o({variant:"destructive",description:r("add_llm_card.errors.failed_to_create")})}finally{s("")}},A=g.useMemo(()=>E.map(M=>{var T;return h.jsxs(M5,{value:M.model_id,onSelect:k,children:[i===M.model_id?h.jsx(ue,{name:"check",className:"mr-2 h-4 w-4"}):h.jsx("div",{className:"mr-2 h-4 w-4"}),h.jsxs("span",{className:"max-w-md",children:[h.jsxs("div",{className:"flex gap-2 mb-2",children:[h.jsx(bo,{name:M.model_id}),M.model_id]}),h.jsx("div",{className:"flex max-w-full flex-wrap gap-1",children:h.jsx(El,{model:M,isFunctionCalling:((T=v==null?void 0:v.functionCallingModelIds)==null?void 0:T.includes(M.model_id))||!1,name:M.model_id,isCached:_.some(D=>D.includes(M.model_id))||!1})})]})]},M.model_id)}),[_,k,i,v==null?void 0:v.functionCallingModelIds,E]);return h.jsxs(Tt,{className:"max-w-lg",children:[h.jsx(hn,{children:h.jsx(jn,{children:r("add_llm_card.title")})}),h.jsxs(mn,{children:[h.jsxs("div",{className:"grid w-full gap-1.5",children:[h.jsx(Qe,{children:r("add_llm_card.provider")}),h.jsxs(xo,{value:f,onValueChange:P,children:[h.jsx(Fr,{className:"w-full mb-4",children:h.jsx(wo,{placeholder:r("add_llm_card.provider_select_placeholder")})}),h.jsx(Br,{children:Object.values(sie).map(M=>h.jsx(En,{value:M,children:r(`add_llm_card.providers.${M.toLowerCase()}`)},M))})]}),h.jsx(Qe,{children:r("add_llm_card.model_name")}),h.jsxs(Iae,{open:c,onOpenChange:l,children:[h.jsx(mw,{asChild:!0,children:h.jsxs(dt,{variant:"outline",role:"combobox","aria-expanded":c,className:"w-full justify-between",children:[i?S==null?void 0:S.model_id:r("add_llm_card.select_model_placeholder"),h.jsx(ue,{name:"chevrons-up-down",className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),h.jsx(p5,{className:"w-full p-0",children:h.jsxs(E5,{children:[h.jsx(S5,{onValueChange:N,placeholder:r("add_llm_card.search_placeholder")}),h.jsxs(C5,{children:[h.jsx(O5,{children:r("add_llm_card.no_model")}),h.jsx(N5,{children:A})]})]})})]})]}),S?h.jsxs("div",{className:"mt-4",children:[h.jsxs("div",{className:"mt-4 text-sm text-muted-foreground center flex max-w-full flex-wrap gap-1",children:[h.jsx(bo,{name:S.model_id,className:"mr-2"}),h.jsx(El,{model:S,isFunctionCalling:((C=v==null?void 0:v.functionCallingModelIds)==null?void 0:C.includes(S.model_id))||!1,name:S.model_id,isCached:_.some(M=>M.includes(S.model_id))||!1})]}),h.jsxs("div",{className:"mt-2 text-sm text-muted-foreground",children:[h.jsx("span",{className:"font-bold mr-2",children:r("add_llm_card.model_url")}),S.model]}),h.jsxs("div",{className:"mt-2 text-sm text-muted-foreground center flex",children:[h.jsx("span",{className:"font-bold mr-2",children:r("add_llm_card.model_lib_url")}),S.model_lib]}),h.jsxs("div",{className:"mt-2 text-sm text-muted-foreground center flex",children:[h.jsx("span",{className:"font-bold mr-2",children:r("add_llm_card.metadata")}),JSON.stringify(S.overrides)]})]}):null]}),h.jsx(Zo,{className:"flex justify-between",children:h.jsx(Mn,{loading:w,disabled:!(i!=null&&i.length),onClick:R,className:"w-full",children:r(y?"add_llm_card.button_add":"add_llm_card.button_download_and_add")})})]})}const k5=()=>{const e=Ze(a=>{var i;return(i=a.currentSession)==null?void 0:i.id}),[t,n]=g.useState(!1),r=Ae(a=>a.createOrUpdateFlowNode),o=g.useCallback(async(a,i)=>{var s,c,l;try{if(!a||!e)throw new Error("Source or Session not found");n(!0);const u=((s=a.position)==null?void 0:s.x)||0,d=(((c=a.position)==null?void 0:c.y)||0)+(((l=a.measured)==null?void 0:l.height)||0),f=await ce("Prompt").save({content:i.content,prefix:i.prefix,role:i.role||kn.System,status:Xr.Started,session_id:e,type:i.type||Pn.Chat});if(!f)throw new Error("Failed to save prompt");if(!await r({source_id:f.id,source_type:"Prompt",node_type:oe.Prompt,x:u,y:d+20}))throw new Error("Failed to save prompt node")}finally{n(!1)}},[e,r]);return{loading:t,createPrompt:o}},lie={[Pn.Chat]:{label:"add_prompt_card.prompt_types.chat",value:Pn.Chat},[Pn.FewShotExample]:{label:"add_prompt_card.prompt_types.few_shot_example",value:Pn.FewShotExample}},uie={[kn.System]:{label:"add_prompt_card.prompt_roles.system",value:kn.System},[kn.Human]:{label:"add_prompt_card.prompt_roles.human",value:kn.Human},[kn.AI]:{label:"add_prompt_card.prompt_roles.ai",value:kn.AI}},Ew=g.memo(({defaultPromptContent:e,defaultPromptRole:t,defaultPromptType:n,hidePromptRole:r,hidePromptType:o,loading:a,onSubmit:i})=>{const[s,c]=g.useState(e||""),[l,u]=g.useState(n||Pn.Chat),[d,f]=g.useState(t),[p,y]=g.useState(""),{t:m}=Me("components"),v=g.useCallback(j=>{c(j.target.value)},[]),b=g.useCallback(j=>{y(j.target.value)},[]),x=g.useCallback(j=>{j===Pn.FewShotExample&&c(`Question: {input}
Answer: {output}`),u(j)},[]),_=g.useCallback(j=>{f(j)},[]),w=async()=>{await i({content:s,role:d,prefix:p,type:l})&&(c(""),f(void 0),u("chat"),y(""))};return h.jsxs("div",{children:[h.jsxs("div",{className:"grid w-full gap-1.5",children:[o?void 0:h.jsxs(h.Fragment,{children:[h.jsx(Qe,{children:m("add_prompt_card.prompt_type")}),h.jsxs(xo,{value:l,onValueChange:x,children:[h.jsx(Fr,{className:"w-full mb-4",children:h.jsx(wo,{placeholder:m("add_prompt_card.type_select_placeholder")})}),h.jsx(Br,{children:Object.values(lie).map(j=>h.jsx(En,{value:j.value,children:m(j.label)},j.value))})]})]}),r?void 0:h.jsxs(h.Fragment,{children:[h.jsx(Qe,{children:m("add_prompt_card.prompt_role")}),h.jsxs(xo,{value:d,onValueChange:_,children:[h.jsx(Fr,{className:"w-full mb-4",children:h.jsx(wo,{placeholder:m("add_prompt_card.role_select_placeholder")})}),h.jsx(Br,{children:Object.values(uie).map(j=>h.jsx(En,{value:j.value,children:m(j.label)},j.value))})]})]}),l===Pn.FewShotExample&&h.jsxs(h.Fragment,{children:[h.jsx(Qe,{children:m("add_prompt_card.prompt_prefix")}),h.jsx(lo,{value:p,onChange:b,disabled:!1,className:"h-20",placeholder:m("add_prompt_card.placeholder"),id:"message"}),h.jsx(Qe,{children:m("add_prompt_card.prompt_content")}),h.jsxs("div",{className:"w-full border-0 text-gray-700 flex text-sm justify-end items-center",children:[h.jsx(ue,{name:"info",className:"mr-2",size:14}),m("add_prompt_card.few_shot_example_note")]})]}),h.jsx(lo,{value:s,onChange:v,disabled:!1,placeholder:m("add_prompt_card.placeholder"),id:"message"})]}),h.jsx("div",{children:h.jsx(Mn,{loading:a,disabled:!(s!=null&&s.length),onClick:w,className:"w-full mt-4",children:m("add_prompt_card.button")})})]})}),die=g.memo(e=>{const{id:t,thread:n,setDialog:r}=e,{t:o}=Me("components"),{toast:a}=Bt(),i=ln(t),{createPrompt:s,loading:c}=k5(),l=async u=>{if(i)try{if(!(u!=null&&u.content))throw new Error("Prompt data is missing");await s(i,{...u,content:u.content,thread:n}),r==null||r(!1)}catch(d){a({variant:"destructive",title:`${d}`})}};return h.jsxs(Tt,{className:"mw-full",children:[h.jsx(hn,{children:h.jsx(jn,{children:o("add_prompt_card.title")})}),h.jsx(mn,{children:h.jsx(Ew,{onSubmit:l,loading:c,defaultPromptRole:"system",defaultPromptType:"chat"})})]})}),fie="0123456789abcdef",pie=[8,4,4,4,12];function Sw(){return pie.map(e=>Rwe(fie,e)()).join("-")}const hie=()=>{const e=Ze(i=>{var s;return(s=i.currentSession)==null?void 0:s.id}),[t,n]=g.useState(!1),r=Ae(i=>i.createOrUpdateFlowNode),o=g.useCallback((i,s,c,l)=>{var u;if(e){for(const d of s)(u=d.data)!=null&&u.length?o(i,d.data,c,d.id):c.push({name:d.name,type:d.type,enum:d.enum?JSON.stringify(d.enum):"",required:d.required,description:d.description,id:d.id||Sw(),parent_id:l,schema_id:i,session_id:e});return c}},[e]),a=g.useCallback(async(i,s)=>{var c,l,u;try{if(!i||!e)throw new Error("Source or Session not found");n(!0);const d=((c=i.position)==null?void 0:c.x)||0,f=(((l=i.position)==null?void 0:l.y)||0)+(((u=i.measured)==null?void 0:u.height)||0),p=await ce("Schema").save({name:"Untitled Schema",session_id:e});if(!p)throw new Error("Failed to save schema");const y=o(p.id,s,[],void 0);if(!(y!=null&&y.length))throw new Error("Failed to convert schema items");if(await ce("SchemaItem").save(y),!await r({source_id:p.id,source_type:"Schema",node_type:oe.Schema,x:d,y:f+20}))throw new Error("Failed to save schema node")}finally{n(!1)}},[e,o,r]);return{loading:t,createSchema:a}};var Cw="Checkbox",[mie,l1e]=Vn(Cw),[yie,gie]=mie(Cw),P5=g.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:r,checked:o,defaultChecked:a,required:i,disabled:s,value:c="on",onCheckedChange:l,form:u,...d}=e,[f,p]=g.useState(null),y=rt(t,w=>p(w)),m=g.useRef(!1),v=f?u||!!f.closest("form"):!0,[b=!1,x]=en({prop:o,defaultProp:a,onChange:l}),_=g.useRef(b);return g.useEffect(()=>{const w=f==null?void 0:f.form;if(w){const j=()=>x(_.current);return w.addEventListener("reset",j),()=>w.removeEventListener("reset",j)}},[f,x]),h.jsxs(yie,{scope:n,state:b,disabled:s,children:[h.jsx(Oe.button,{type:"button",role:"checkbox","aria-checked":ra(b)?"mixed":b,"aria-required":i,"data-state":R5(b),"data-disabled":s?"":void 0,disabled:s,value:c,...d,ref:y,onKeyDown:he(e.onKeyDown,w=>{w.key==="Enter"&&w.preventDefault()}),onClick:he(e.onClick,w=>{x(j=>ra(j)?!0:!j),v&&(m.current=w.isPropagationStopped(),m.current||w.stopPropagation())})}),v&&h.jsx(vie,{control:f,bubbles:!m.current,name:r,value:c,checked:b,required:i,disabled:s,form:u,style:{transform:"translateX(-100%)"},defaultChecked:ra(a)?!1:a})]})});P5.displayName=Cw;var A5="CheckboxIndicator",T5=g.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:r,...o}=e,a=gie(A5,n);return h.jsx(Nn,{present:r||ra(a.state)||a.state===!0,children:h.jsx(Oe.span,{"data-state":R5(a.state),"data-disabled":a.disabled?"":void 0,...o,ref:t,style:{pointerEvents:"none",...e.style}})})});T5.displayName=A5;var vie=e=>{const{control:t,checked:n,bubbles:r=!0,defaultChecked:o,...a}=e,i=g.useRef(null),s=XI(n),c=IO(t);g.useEffect(()=>{const u=i.current,d=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(d,"checked").set;if(s!==n&&f){const p=new Event("click",{bubbles:r});u.indeterminate=ra(n),f.call(u,ra(n)?!1:n),u.dispatchEvent(p)}},[s,n,r]);const l=g.useRef(ra(n)?!1:n);return h.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:o??l.current,...a,tabIndex:-1,ref:i,style:{...e.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function ra(e){return e==="indeterminate"}function R5(e){return ra(e)?"indeterminate":e?"checked":"unchecked"}xm=P5,QE=T5;const I5=g.forwardRef(({className:e,...t},n)=>h.jsx(xm,{ref:n,className:K("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:h.jsx(QE,{className:K("flex items-center justify-center text-current"),children:h.jsx(ue,{name:"check",className:"h-4 w-4"})})}));I5.displayName=xm.displayName;const D5=g.memo(({setData:e,data:t,id:n})=>{const{t:r}=Me("components"),[o,a]=g.useState({name:"",description:"",type:"string",required:!1,data:[]}),i=g.useMemo(()=>n&&t.find(m=>m.id===n)||o,[t,o,n]),s=g.useCallback(m=>{m.target.value&&!/^[a-zA-Z_][a-zA-Z0-9_]*$/.test(m.target.value)||(n?e(v=>[...v.map(b=>b.id===n?{...b,name:m.target.value||""}:b)]):a(v=>({...v,name:m.target.value||""})))},[n,e]),c=g.useCallback(m=>{n?e(v=>[...v.map(b=>b.id===n?{...b,description:m.target.value||""}:b)]):a(v=>({...v,description:m.target.value||""}))},[n,e]),l=g.useCallback(m=>{n?e(v=>[...v.map(b=>b.id===n?{...b,type:m||""}:b)]):a(v=>({...v,type:m||"string"}))},[n,e]),u=g.useCallback(m=>{n?e(v=>[...v.map(b=>b.id===n?{...b,required:!!m||!1}:b)]):a(v=>({...v,required:!!m||!1}))},[n,e]),d=g.useCallback(m=>{n?e(v=>[...v.map(b=>b.id===n?{...b,enum:m.target.value||""}:b)]):a(v=>({...v,enum:m.target.value||""}))},[n,e]),f=g.useCallback(()=>{if(t.find(m=>m.name===o.name))return Gs({variant:"destructive",content:"Name already exists"});o.id=Sw(),e(m=>[...m,{...o}]),a({name:"",description:"",type:"string",required:!1,id:Sw(),parent:n||void 0,data:[]})},[t,o,e,n]),p=g.useCallback(m=>{e(v=>[...v.map(b=>b.id===n?{...b,data:m(b.data||[])}:b)])},[n,e]),y=["object","array"].includes(i.type);return h.jsxs("div",{className:"w-full p-1",children:[h.jsxs("div",{children:[h.jsx(Qe,{children:r("add_schema_card.field.name")}),h.jsx(dn,{id:"name",onChange:s,placeholder:r("add_schema_card.field.name_placeholder"),value:(i==null?void 0:i.name)||""})]}),h.jsxs("div",{children:[h.jsx(Qe,{children:r("add_schema_card.field.description")}),h.jsx(dn,{id:"description",placeholder:r("add_schema_card.field.description_placeholder"),onChange:c,value:(i==null?void 0:i.description)||""})]}),h.jsxs("div",{children:[h.jsx(Qe,{children:r("add_schema_card.field.type")}),h.jsxs(xo,{onValueChange:l,value:(i==null?void 0:i.type)||"",children:[h.jsx(Fr,{children:h.jsx(wo,{placeholder:r("add_schema_card.field.type_placeholder")})}),h.jsxs(Br,{children:[h.jsx(En,{value:"string",children:r("add_schema_card.types.string")}),h.jsx(En,{value:"boolean",children:r("add_schema_card.types.boolean")}),h.jsx(En,{value:"number",children:r("add_schema_card.types.number")}),h.jsx(En,{value:"object",children:r("add_schema_card.types.object")}),h.jsx(En,{value:"array",children:r("add_schema_card.types.array")})]})]})]}),h.jsxs("div",{className:"flex items-center h-10",children:[h.jsx(Qe,{children:r("add_schema_card.field.required")}),h.jsx(I5,{className:"ml-2","aria-label":"Select row",onCheckedChange:u,checked:i==null?void 0:i.required})]}),y?h.jsxs("div",{className:"mt-2 flex flex-col gap-2",children:[h.jsx(Qe,{children:r("add_schema_card.children")}),h.jsx(L5,{data:(i==null?void 0:i.data)||[],setData:p})]}):null,(i==null?void 0:i.type)==="enum"?h.jsxs("div",{className:"mt-2 flex flex-col gap-2",children:[h.jsx(Qe,{children:r("add_schema_card.field.enum")}),h.jsx(dn,{id:"enum",onChange:d,placeholder:"Enum"})]}):null,n?null:h.jsx("div",{className:"w-full flex justify-end mt-2",children:h.jsx(dt,{variant:"secondary",disabled:!i.name||!i.description||!i.type,onClick:f,className:"w-full",children:r("add_schema_card.field.add_field")})})]})}),L5=g.memo(({data:e,setData:t})=>h.jsxs(WD,{type:"single",collapsible:!0,children:[e.map(n=>h.jsxs(Wx,{value:`${n.id}`,children:[h.jsx(qx,{children:n.name}),h.jsx(Yx,{children:h.jsx(D5,{setData:t,data:e,id:n.id})})]},n.id||"new")),h.jsx(Tt,{className:"p-2 mt-4",children:h.jsx(D5,{setData:t,data:e})})]})),bie=g.memo(e=>{const{t}=Me("components"),{id:n}=e,r=ln(n),[o,a]=g.useState([]),{createSchema:i,loading:s}=hie(),c=async()=>{if(r&&(o!=null&&o.length))try{await i(r,o),a([])}catch(l){Gs({variant:"destructive",title:`${l}`})}};return h.jsxs(Tt,{className:"max-w-lg",children:[h.jsx(hn,{children:h.jsx(jn,{children:t("add_schema_card.title")})}),h.jsx(mn,{className:"min-w-96",children:h.jsx(L5,{setData:a,data:o})}),h.jsx(Zo,{className:"flex justify-between",children:h.jsx(Mn,{loading:s,disabled:!(o!=null&&o.length),onClick:c,className:"w-full",children:t("add_schema_card.create")})})]})}),F5=()=>{const e=Ze(a=>{var i;return(i=a.currentSession)==null?void 0:i.id}),[t,n]=g.useState(!1),r=Ae(a=>a.createOrUpdateFlowNode),o=g.useCallback(async(a,i,s)=>{var c,l,u;try{if(!a||!e)throw new Error("Source or Session not found");n(!0);const d=((c=a.position)==null?void 0:c.x)||0,f=(((l=a.position)==null?void 0:l.y)||0)+(((u=a.measured)==null?void 0:u.height)||0),p=Iwe(i,s),y=await ce("CSVData").save({headers:p.headers,csv:p.data,session_id:e});if(!y)throw new Error("Failed to save");if(!await r({source_id:y.id,source_type:"CSVData",node_type:oe.CSVData,x:d,y:f+20}))throw new Error("Failed to save node")}finally{n(!1)}},[e,r]);return{loading:t,createCSVData:o}};function xie({data:e}){const{t}=Me("components");return h.jsxs(ep,{className:"w-full",children:[h.jsx(tp,{children:h.jsxs($a,{children:[h.jsx(is,{children:t("add_few_shot_example_card.input")}),h.jsx(is,{children:t("add_few_shot_example_card.output")})]})}),h.jsx(np,{children:e==null?void 0:e.map((n,r)=>h.jsxs($a,{children:[h.jsx(ss,{className:"p-4",children:n.input}),h.jsx(ss,{className:"p-4",children:n.output})]},`${n.input}_${n.output}_${r}`))})]})}const wie=g.memo(e=>{const{id:t}=e,{t:n}=Me("components"),[r,o]=g.useState([]),[a,i]=g.useState(""),[s,c]=g.useState(""),l=ln(t),{createCSVData:u,loading:d}=F5(),f=()=>{o(y=>[...y,{input:a,output:s}]),i(""),c("")},p=async()=>{l&&await u(l,["input","output"],r.map(y=>[y.input,y.output]))};return h.jsxs(Tt,{className:"mw-full",children:[h.jsx(hn,{children:h.jsx(jn,{children:n("add_few_shot_example_card.title")})}),h.jsxs(mn,{children:[h.jsxs("div",{className:"flex flex-col space-y-1.5",children:[h.jsx(Qe,{htmlFor:"name",children:n("add_few_shot_example_card.input")}),h.jsx(dn,{value:a,onChange:y=>i(y.target.value||""),id:"name",placeholder:n("add_few_shot_example_card.input_placeholder")})]}),h.jsxs("div",{className:"flex flex-col space-y-1.5 mt-3",children:[h.jsx(Qe,{htmlFor:"name",children:n("add_few_shot_example_card.output")}),h.jsx(lo,{value:s,onChange:y=>c(y.target.value||""),placeholder:n("add_few_shot_example_card.output_placeholder")})]}),h.jsx("div",{className:"w-full flex mt-4 justify-end",children:h.jsx(dt,{disabled:!a||!s,onClick:f,className:"w-40",children:n("add_few_shot_example_card.add")})}),h.jsx(xie,{data:r||[]})]}),h.jsx(Zo,{className:"flex justify-between",children:h.jsx(Mn,{loading:d,disabled:!(r!=null&&r.length),onClick:p,className:"w-full",children:n("add_few_shot_example_card.create")})})]})}),_ie=()=>{const e=Ze(i=>{var s;return(s=i.currentSession)==null?void 0:s.id}),[t,n]=g.useState(!1),r=Ae(i=>i.createOrUpdateFlowNode),o=Ae(i=>i.createOrUpdateFlowEdge),a=g.useCallback(async(i,s,c)=>{var l,u,d;try{if(!i||!e)throw new Error("Source or Session not found");if(!s.name||!s.description)throw new Error("Name is required");n(!0);const f=((l=i.position)==null?void 0:l.x)||0,p=(((u=i.position)==null?void 0:u.y)||0)+(((d=i.measured)==null?void 0:d.height)||0),y=await ce("ToolDefinition").save({...s,name:`${s.name}`,description:`${s.description}`,session_id:e});if(!y)throw new Error("Failed create tool.");const m=await r({source_id:y.id,source_type:"ToolDefinition",node_type:oe.ToolDefinition,x:f,y:p+20});if(!m)throw new Error("Failed to save node");c!=null&&c.schemaNode&&await o({source:c.schemaNode.id,target:m.id})}finally{n(!1)}},[e,r,o]);return{loading:t,createTool:a}},jie=g.memo(e=>{const{t}=Me("components"),{toast:n}=Bt(),{id:r}=e,o=ln(r),[a,i]=g.useState(""),[s,c]=g.useState(""),{createTool:l,loading:u}=_ie(),d=y=>{i(y.target.value)},f=y=>{c(y.target.value)},p=async()=>{if(o&&a&&s)try{await l(o,{name:a,description:s}),i(""),c("")}catch(y){Or(y),n({variant:"destructive",title:t("add_tool_card.errors.create_tool_failed")})}};return h.jsxs(Tt,{className:"mw-full",children:[h.jsx(hn,{children:h.jsx(jn,{children:t("add_tool_card.title")})}),h.jsxs(mn,{children:[h.jsxs("div",{className:"flex flex-col space-y-1.5",children:[h.jsx(Qe,{htmlFor:"name",children:t("add_tool_card.tool_name")}),h.jsx(dn,{onChange:d,id:"name",placeholder:t("add_tool_card.name_placeholder")})]}),h.jsxs("div",{className:"flex flex-col space-y-1.5 mt-3",children:[h.jsx(Qe,{htmlFor:"name",children:t("add_tool_card.tool_description")}),h.jsx(lo,{onChange:f,placeholder:t("add_tool_card.description_placeholder")})]})]}),h.jsx(Zo,{className:"flex justify-between",children:h.jsx(Mn,{loading:u,onClick:p,className:"w-full",children:t("add_tool_card.create")})})]})}),Eie=()=>{const e=Ze(i=>{var s;return(s=i.currentSession)==null?void 0:s.id}),[t,n]=g.useState(!1),r=Ae(i=>i.createOrUpdateFlowNode),o=Ae(i=>i.createOrUpdateFlowEdge),a=g.useCallback(async(i,s,c)=>{var l,u,d;try{if(!(s!=null&&s.name)||!i||!e)throw new Error("Source or Session not found");n(!0);const f=((l=i.position)==null?void 0:l.x)||0,p=(((u=i.position)==null?void 0:u.y)||0)+(((d=i.measured)==null?void 0:d.height)||0),y=await ce("VectorDatabase").save({...s,name:`${s.name}`,type:s.type||Dwe.Local,storage:s.storage||nr.DatabaseNode,raw:"",provider:s.provider||H9.Memory,session_id:e,metadata:c?JSON.stringify({textSplitter:c}):void 0});if(!y)throw new Error("Failed to save vectorDatabase");const m=await r({source_id:y.id,source_type:"VectorDatabase",node_type:oe.VectorDatabase,x:f,y:p+30});if(!m)throw new Error("Failed to save vectorDatabase node");if(s.storage===nr.DataNode){const v=await ce("JSONLData").save({headers:Lwe(["content","embedding","metadata"]),jsonl:"",session_id:e});if(!v)throw new Error("Failed to save databaseSource");const b=await r({source_id:v.id,source_type:"JSONLData",node_type:oe.JSONLData,x:f+80,y:p+30});if(!b)throw new Error("Failed to save databaseSource node");await o({source:b.id,target:m.id})}return{vectorDatabase:y,vectorDatabaseNode:m}}finally{n(!1)}},[e,r,o]);return{loading:t,createVectorDatabase:a}},Pl=[H9.Memory],Al=[nr.DatabaseNode],Sie=["TokenTextSplitter","CharacterTextSplitter","RecursiveCharacterTextSplitter"],Cie=g.memo(e=>{const{t}=Me("components"),{id:n}=e,r=ln(n),{toast:o}=Bt(),[a,i]=g.useState(""),[s,c]=g.useState(Pl[0]),[l,u]=g.useState(Al[0]),[d,f]=g.useState({}),{loading:p,createVectorDatabase:y}=Eie(),m=g.useCallback(E=>{c(E)},[]),v=g.useCallback(E=>{u(E)},[]),b=g.useCallback(E=>{f(S=>({...S,type:E,chunkSize:500,chunkOverlap:40}))},[]),x=g.useCallback(E=>{i(E.target.value||"")},[]),_=g.useCallback(E=>{f(S=>({...S,chunkSize:Number(E.target.value)}))},[]),w=g.useCallback(E=>{f(S=>({...S,chunkOverlap:Number(E.target.value)}))},[]),j=async()=>{try{if(!r)return;await y(r,{name:a,provider:s,storage:l},d!=null&&d.type?{type:d.type,chunkSize:d.chunkSize||500,chunkOverlap:d.chunkOverlap||0}:void 0),i(""),f({})}catch{o({variant:"destructive",description:t("create_vector_database_card.errors.create_failed")})}};return h.jsxs(Tt,{className:"mw-full",children:[h.jsx(hn,{children:h.jsx(jn,{children:t("create_vector_database_card.title")})}),h.jsx(mn,{children:h.jsxs("div",{className:"grid w-full gap-1.5",children:[h.jsx(Qe,{children:t("create_vector_database_card.name")}),h.jsx(dn,{className:"mb-4",value:a,onChange:x}),(Al==null?void 0:Al.length)>1?h.jsxs(h.Fragment,{children:[h.jsx(Qe,{children:t("create_vector_database_card.storage_type")}),h.jsxs(xo,{value:l,onValueChange:v,children:[h.jsx(Fr,{className:"w-full mb-4",children:h.jsx(wo,{placeholder:t("create_vector_database_card.provider_select_placeholder")})}),h.jsx(Br,{children:Object.values(Al).map(E=>h.jsx(En,{value:E,children:t(`create_vector_database_card.storage_types.${E.toLowerCase()}`)},E))})]})]}):void 0,(Pl==null?void 0:Pl.length)>1?h.jsxs(h.Fragment,{children:[h.jsx(Qe,{children:t("create_vector_database_card.provider")}),h.jsxs(xo,{value:s,onValueChange:m,children:[h.jsx(Fr,{className:"w-full mb-4",children:h.jsx(wo,{placeholder:t("create_vector_database_card.provider_select_placeholder")})}),h.jsx(Br,{children:Object.values(Pl).map(E=>h.jsx(En,{value:E,children:t(`create_vector_database_card.providers.${E.toLowerCase()}`)},E))})]})]}):void 0,h.jsx(Qe,{children:t("create_vector_database_card.text_splitter")}),h.jsxs(xo,{value:d.type,onValueChange:b,children:[h.jsx(Fr,{className:"w-full mb-4",children:h.jsx(wo,{placeholder:t("create_vector_database_card.text_splitter_select_placeholder")})}),h.jsx(Br,{children:Object.values(Sie).map(E=>h.jsx(En,{value:E,children:t(`create_vector_database_card.text_splitters.${E.toLowerCase()}`)},E))})]}),d.type?h.jsxs(Tt,{children:[h.jsx(hn,{children:h.jsx(jn,{children:t("create_vector_database_card.text_splitter_configuration")})}),h.jsxs(mn,{children:[h.jsx(Qe,{children:t("create_vector_database_card.text_splitter_chunksize")}),h.jsx(dn,{value:d.chunkSize,onChange:_,placeholder:t("create_vector_database_card.text_splitter_chunksize_placeholder")}),h.jsx(Qe,{children:t("create_vector_database_card.text_splitter_chunkoverlap")}),h.jsx(dn,{value:d.chunkOverlap,onChange:w,placeholder:t("create_vector_database_card.text_splitter_chunkoverlap_placeholder")})]})]}):void 0]})}),h.jsx(Zo,{className:"flex justify-between",children:h.jsx(Mn,{disabled:!d.type||!a,loading:p,onClick:j,className:"w-full",children:t("create_vector_database_card.create")})})]})});function Oie({data:e}){const{t}=Me("components");return h.jsxs(ep,{className:"w-full",children:[h.jsx(tp,{children:h.jsx($a,{children:h.jsx(is,{children:t("add_text_data.text")})})}),h.jsx(np,{children:e==null?void 0:e.map((n,r)=>h.jsx($a,{children:h.jsx(ss,{className:"p-4",children:n.text})},`${n.text}_${r}`))})]})}const Nie=g.memo(e=>{const{id:t}=e,{t:n}=Me("components"),[r,o]=g.useState([]),[a,i]=g.useState(""),s=ln(t),{createCSVData:c,loading:l}=F5(),u=()=>{o(f=>[...f,{text:a}]),i("")},d=async()=>{s&&await c(s,["text"],r.map(f=>[f.text]))};return h.jsxs(Tt,{className:"mw-full",children:[h.jsx(hn,{children:h.jsx(jn,{children:n("add_text_data.title")})}),h.jsxs(mn,{children:[h.jsxs("div",{className:"flex flex-col space-y-1.5 mt-3",children:[h.jsx(Qe,{htmlFor:"name",children:n("add_text_data.text")}),h.jsx(lo,{value:a,onChange:f=>i(f.target.value||""),placeholder:n("add_text_data.text_placeholder")})]}),h.jsx("div",{className:"w-full flex mt-4 justify-end",children:h.jsx(dt,{disabled:!a,onClick:u,className:"w-40",children:n("add_text_data.add")})}),h.jsx(Oie,{data:r||[]})]}),h.jsx(Zo,{className:"flex justify-between",children:h.jsx(Mn,{loading:l,disabled:!(r!=null&&r.length),onClick:d,className:"w-full",children:n("add_text_data.create")})})]})});var jo=(e=>(e.ADD_LLM="ADD_LLM",e.ADD_PROMPT="ADD_PROMPT",e.ADD_TOOL_DEFINITION="ADD_TOOL_DEFINITION",e.ADD_SCHEMA="ADD_SCHEMA",e.ADD_FEW_SHOT_EXAMPLE="ADD_FEW_SHOT_EXAMPLE",e.ADD_VECTOR_DATABASE="ADD_VECTOR_DATABASE",e.ADD_TEXT_DATA="ADD_TEXT_DATA",e))(jo||{});const Mie=["ADD_LLM","ADD_PROMPT","ADD_SCHEMA","ADD_VECTOR_DATABASE",{key:"more",label:"more",icon:"ellipsis",children:["ADD_TOOL_DEFINITION","ADD_FEW_SHOT_EXAMPLE"]}],kie=()=>{const e="_coolMode_effect",t=document.getElementById(e);if(t)return t;const n=document.createElement("div");return n.setAttribute("id",e),n.setAttribute("style","overflow:hidden; position:fixed; height:100%; top:0; left:0; right:0; bottom:0; pointer-events:none; z-index:2147483647"),document.body.appendChild(n),n};let B5=0;const Pie=(e,t)=>{B5++;const n=(t==null?void 0:t.particle)||"circle",r=[15,20,25,35,45],o=45;let a=[],i=!1,s=0,c=0;const l=kie();function u(){const S=(t==null?void 0:t.size)||r[Math.floor(Math.random()*r.length)],O=(t==null?void 0:t.speedHorz)||Math.random()*10,k=(t==null?void 0:t.speedUp)||Math.random()*25,N=Math.random()*360,P=Math.random()*35*(Math.random()<=.5?-1:1),R=c-S/2,A=s-S/2,C=Math.random()<=.5?-1:1,M=document.createElement("div");if(n==="circle"){const T="http://www.w3.org/2000/svg",D=document.createElementNS(T,"svg"),I=document.createElementNS(T,"circle");I.setAttributeNS(null,"cx",(S/2).toString()),I.setAttributeNS(null,"cy",(S/2).toString()),I.setAttributeNS(null,"r",(S/2).toString()),I.setAttributeNS(null,"fill",`hsl(${Math.random()*360}, 70%, 50%)`),D.appendChild(I),D.setAttribute("width",S.toString()),D.setAttribute("height",S.toString()),M.appendChild(D)}else M.innerHTML=`<img src="${n}" width="${S}" height="${S}" style="border-radius: 50%">`;M.style.position="absolute",M.style.transform=`translate3d(${A}px, ${R}px, 0px) rotate(${N}deg)`,l.appendChild(M),a.push({direction:C,element:M,left:A,size:S,speedHorz:O,speedUp:k,spinSpeed:P,spinVal:N,top:R})}function d(){a.forEach(S=>{S.left=S.left-S.speedHorz*S.direction,S.top=S.top-S.speedUp,S.speedUp=Math.min(S.size,S.speedUp-1),S.spinVal=S.spinVal+S.spinSpeed,S.top>=Math.max(window.innerHeight,document.body.clientHeight)+S.size&&(a=a.filter(O=>O!==S),S.element.remove()),S.element.setAttribute("style",["position:absolute","will-change:transform",`top:${S.top}px`,`left:${S.left}px`,`transform:rotate(${S.spinVal}deg)`].join(";"))})}let f,p=0;const y=30;function m(){const S=performance.now();i&&a.length<o&&S-p>y&&(u(),p=S),d(),f=requestAnimationFrame(m)}m();const v="ontouchstart"in window,b=v?"touchstart":"mousedown",x=v?"touchend":"mouseup",_=v?"touchmove":"mousemove",w=S=>{var O,k;"touches"in S?(s=(O=S.touches)==null?void 0:O[0].clientX,c=(k=S.touches)==null?void 0:k[0].clientY):(s=S.clientX,c=S.clientY)},j=S=>{w(S),i=!0},E=()=>{i=!1};return e.addEventListener(_,w,{passive:!0}),e.addEventListener(b,j,{passive:!0}),e.addEventListener(x,E,{passive:!0}),e.addEventListener("mouseleave",E,{passive:!0}),()=>{e.removeEventListener(_,w),e.removeEventListener(b,j),e.removeEventListener(x,E),e.removeEventListener("mouseleave",E);const S=setInterval(()=>{f&&a.length===0&&(cancelAnimationFrame(f),clearInterval(S),--B5===0&&l.remove())},500)}},Aie=({children:e,options:t})=>{const n=g.useRef(null);return g.useEffect(()=>{if(n.current)return Pie(n.current,t)},[t]),V.cloneElement(e,{ref:n})},Tie=g.memo(e=>{const{t}=Me("flows"),n=Du(s=>s.theme),[r,o]=g.useState(`${jo.ADD_LLM}`),a=g.useMemo(()=>h.jsxs(t5,{children:[h.jsx(dw,{children:h.jsx(Aie,{children:h.jsx(dt,{variant:"link",className:"!p-0 !pl-3",children:h.jsx(Fwe,{width:32,height:32,className:K(n==="dark"?"fill-white":"fill-black")})})})}),Mie.map(s=>typeof s=="object"?h.jsxs(dw,{children:[h.jsx(fw,{children:s.icon?h.jsx(ue,{name:s.icon}):t(`supported_nodes.${s.label}`)}),h.jsx(n5,{children:s.children.map(c=>h.jsx(r5,{onClick:()=>o(c),children:t(`supported_nodes.${c.toLowerCase()}`)},c))})]},s.key):h.jsx(dw,{children:h.jsx(fw,{value:s,onClick:()=>o(s),children:t(`supported_nodes.${s.toLowerCase()}`)})},s))]}),[t,n]),i=g.useMemo(()=>{switch(r){case jo.ADD_LLM:return h.jsx(cie,{...e});case jo.ADD_PROMPT:return h.jsx(die,{...e});case jo.ADD_SCHEMA:return h.jsx(bie,{...e});case jo.ADD_FEW_SHOT_EXAMPLE:return h.jsx(wie,{...e});case jo.ADD_TOOL_DEFINITION:return h.jsx(jie,{...e});case jo.ADD_VECTOR_DATABASE:return h.jsx(Cie,{...e});case jo.ADD_TEXT_DATA:return h.jsx(Nie,{...e})}},[e,r]);return h.jsxs(h.Fragment,{children:[a,h.jsx("div",{className:"mt-4",children:i})]})}),Rie=qr("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Eo=g.forwardRef(({className:e,variant:t,...n},r)=>h.jsx("div",{ref:r,role:"alert",className:K(Rie({variant:t}),e),...n}));Eo.displayName="Alert";const So=g.forwardRef(({className:e,...t},n)=>h.jsx("h5",{ref:n,className:K("mb-1 font-medium leading-none tracking-tight",e),...t}));So.displayName="AlertTitle";const ds=g.forwardRef(({className:e,...t},n)=>h.jsx("div",{ref:n,className:K("text-sm [&_p]:leading-relaxed",e),...t}));ds.displayName="AlertDescription";let $5,z5,V5,nn,Ge,U5,H5,W5,q5,lp,Ow,Nw,Mw,Y5,K5,kw,X5,Q5,J5;$5=()=>{const[e,t]=g.useState(!1),n=Ze(i=>i.currentSession),r=Ze(i=>i.getLatestApplications),o=g.useCallback(async(i,s,c,l)=>{var f;const u=(f=s.data)==null?void 0:f.entity;let d=s.type?Bwe[s.type]:void 0;if(d&&u&&s&&typeof u=="object"&&"id"in u&&!c.has(`${u.id}`)&&!l.has(`${s.id}`)){d=d;const p=await ce(d).save({...u,...u&&typeof u=="object"&&"session_id"in u?{session_id:i.id}:{}});c.set(`${u.id}`,p.id);const y=await ce("FlowNode").findOne({where:{id:s.data.flowNode.id}}),m=await ce("FlowNode").save({...y||s.data.flowNode,session_id:i.id,id:void 0,source_type:d,source_id:p.id});return l.set(`${s.id}`,m.id),{entityName:d,entity:p,node:m}}else if(!l.has(`${s.id}`)){const p=await ce("FlowNode").findOne({where:{id:s.data.flowNode.id}}),y=await ce("FlowNode").save({...p||s.data.flowNode,node_type:s.type,session_id:i.id,id:void 0});return l.set(`${s.id}`,y.id),{node:y}}},[]),a=g.useCallback(async(i,s)=>{try{if(!n)throw new Error("No current session");t(!0);const c=await ce("Session").save({type:Hh.StandaloneApp,name:s.name||(n!=null&&n.name?`${n.name}`:"Standalone"),status:$we.Started});if(!c)throw new Error("Failed create standalone session");const l=new Map,u=new Map,d=await o(c,i,l,u);if(!d)throw new Error("Failed to clone main node");await ce("Session").update(c.id,{main_node_id:d.node.id,main_source_id:d!=null&&d.entity?d.entity.id:void 0,main_source_type:d.entityName?d.entityName:void 0});for(const{node:f,connectedNodes:p}of s.connections)if(await o(c,f,l,u),p)for(const y of p)await o(c,y,l,u);for(const{connections:f}of s.connections)for(const p of f){const y=u.get(`${p.source}`),m=u.get(`${p.target}`);if(!y||!m)throw new Error("Failed to get connected flow node id");await ce("FlowEdge").save({source:y,target:m,sourceHandle:p.sourceHandle,targetHandle:p.targetHandle,session_id:c.id})}return r(),!0}finally{t(!1)}},[o,n,r]);return{loading:e,createStandaloneSession:a}},z5=()=>{const[e,t]=g.useState(!1),n=Ae(a=>a.updateNodes),r=Ae(a=>a.updateEdges),o=g.useCallback(async a=>{try{t(!0),await ce("FlowNode").delete(a);const i=await ce("FlowEdge").find({where:[{source:a},{target:a}]});return await Promise.all(i.map(s=>ce("FlowEdge").delete(s.id))),await n([{id:a,type:"remove"}]),await r(i.map(s=>({id:s.id,type:"remove"}))),!0}catch{return!1}finally{t(!1)}},[r,n]);return{loading:e,deleteNodeFlow:o}},V5=ma(({cloneStandaloneSession:e})=>{const t=Kt(),{t:n}=Me("dialogs"),[r,o]=g.useState(""),{toast:a}=Bt(),i=c=>{o(c.target.value)},s=async()=>{try{t.hide(),await e(r),o("")}catch{a({variant:"destructive",description:n("create_standalone_application.errors.create_failed")})}};return h.jsx(Ai,{open:t.visible,onOpenChange:t.hide,children:h.jsxs(Ca,{className:"sm:max-w-[425px]",children:[h.jsxs(Oa,{children:[h.jsx(Na,{children:n("create_session.title")}),h.jsx(ng,{children:n("create_standalone_application.description")})]}),h.jsx("div",{className:"grid gap-4 py-4",children:h.jsxs("div",{className:"flex flex-col space-y-1.5",children:[h.jsx(Qe,{className:"mb-2",htmlFor:"name",children:n("create_standalone_application.name")}),h.jsx(dn,{onChange:i,id:"name",value:r,placeholder:n("create_standalone_application.name_placeholder")})]})}),h.jsx(tg,{children:h.jsx(dt,{onClick:s,disabled:!r,type:"submit",children:n("create_standalone_application.create")})})]})})}),nn=g.memo(({id:e,className:t,enableToStandalone:n,getLinkedConnections:r})=>{const{t:o}=Me("common"),{getNode:a}=Fn(),{loading:i,deleteNodeFlow:s}=z5(),{createStandaloneSession:c}=$5(),{toast:l}=Bt(),u=Kt(V5),d=g.useCallback(async()=>{try{await s(e),l({description:o("deleted")})}catch{l({description:o("errors.delete_failed"),variant:"destructive"})}},[s,e,l,o]),f=g.useCallback(async y=>{try{const m=a(e);if(!m)throw new Error("No current node");const v=(r==null?void 0:r(e))||[];await c(m,{name:y,connections:v}),l({description:o("standalone_session_created")})}catch(m){W9(m),l({description:o("errors.create_standalone_session_failed"),variant:"destructive"})}},[a,e,r,c,l,o]),p=g.useCallback(()=>{u.show({cloneStandaloneSession:f})},[f,u]);return h.jsxs("div",{className:K("flex absolute z-[51] right-0 top-0 h-10",t),children:[n?h.jsx(dt,{className:"!rounded-none !px-2",onClick:p,variant:"ghost",children:h.jsx(ue,{name:"package-plus",size:16})}):void 0,h.jsx(Mn,{loading:i,className:"!rounded-none !px-2",onClick:d,variant:"ghost",children:h.jsx(ue,{name:"trash-2",size:16})})]})}),Ge=g.memo(e=>{const{className:t,...n}=e;return h.jsx(vl,{className:K("!w-2 !h-2 !border-none !rounded-full !bg-slate-700",e.position===fe.Top?"!top-[-2px]":"",t),...n})}),U5=()=>{const e=Ze(i=>{var s;return(s=i.currentSession)==null?void 0:s.id}),[t,n]=g.useState(!1),r=Ae(i=>i.createOrUpdateFlowNode),o=Ae(i=>i.createOrUpdateFlowEdge),a=g.useCallback(async i=>{var s,c;n(!0);try{const l=(s=i.data)==null?void 0:s.entity;if(!l||!e)throw new Error("LLM or Session not found");const u=i.position.x,d=i.position.y+(((c=i.measured)==null?void 0:c.height)||0),f=await ce("Thread").save({initial_llm_id:l.id,title:`New thread with ${l.name}`,status:Yu.Started,messages:[],session_id:e}),p=await r({source_id:f.id,source_type:"Thread",node_type:oe.Thread,x:u,y:d+60});if(!p)throw new Error("Failed to create thread node");const y=await o({source:i.id,target:p.id});return{thread:f,flowNode:p,flowEdge:y}}finally{n(!1)}},[o,r,e]);return{loading:t,createThread:a}},H5=(e,t)=>{var x;const{t:n}=Me("flows"),{toast:r}=Bt(),[o,a]=g.useState(!1),[i,s]=g.useState(!1),c=ln(e),l=sn(_=>_.loadModel),{createThread:u,loading:d}=U5(),f=Ae(_=>_.updateNodes),p=Ae(_=>_.pushSyncNodeQueue),{getNodes:y}=Fn(),m=g.useCallback(async()=>{try{if(s(!0),t.entity.id){const _=await ce("Thread").find({where:{initial_llm_id:t.entity.id}});p("Thread",{where:{source_type:"Thread",source_id:qn(_.map(w=>w.id))}})}}finally{s(!1)}},[(x=t==null?void 0:t.entity)==null?void 0:x.id,p]),v=g.useCallback(async()=>{try{if(a(!0),t.entity&&c){await(l==null?void 0:l(`${t.entity.name}`));const _=y().filter(w=>w.type===oe.LLM).map(w=>(w.data.status=et.Started,{id:w.id,type:"replace",item:w}));c.data.status=et.Loading,_.push({id:e,type:"replace",item:c}),f(_),await m()}}catch(_){Or(_),r({variant:"destructive",description:n("llm_node.errors.loading_model")})}finally{a(!1)}},[t.entity,y,e,l,c,m,n,r,f]),b=g.useCallback(async()=>{t.entity&&c&&await(u==null?void 0:u(c))},[t.entity,c,u]);return{loadingModel:o,creatingThread:d,queringThreads:i,loadModel:v,createThread:b,queryThreads:m}},cn=(e,t)=>{const[n,r]=g.useState(!1),[o,a]=g.useState([]),{deleteElements:i,getNode:s}=Fn();Lf({type:"target",nodeId:e,onConnect:l=>{l!=null&&l.length&&a(u=>[...u,...$ne(l)])}});const c=g.useCallback(async(l,u,d,f)=>{try{return await t({id:e,edgeId:l,source:u,target:d,connection:f})}catch{return{deleteEdgeId:l}}},[t,e]);g.useEffect(()=>{!(o!=null&&o.length)||n||(async()=>{try{r(!0);const l=[...o];a([]);const u=[],d=s(e);await Promise.all(l.map(async f=>{const p="edgeId"in f?f.edgeId:void 0,y=s(f.source);if(!y||!d)return;const m=await c(`${p}`,y,d,f);m!=null&&m.deleteEdgeId&&u.push(...Array.isArray(m.deleteEdgeId)?m.deleteEdgeId:[m.deleteEdgeId])})),u!=null&&u.length&&await i({edges:u.map(f=>({id:f}))})}finally{r(!1)}})()},[i,s,e,n,c,o])},W5=e=>{const t=g.useCallback(async()=>{},[]);cn(e,t)},q5=g.memo(e=>{var m,v,b,x;const{id:t,data:n,isConnectable:r}=e,[o,a]=g.useState(),{t:i}=Me("flows"),{createThread:s,loadModel:c,queringThreads:l,queryThreads:u,loadingModel:d}=H5(t,n);W5(t);const f=[et.Loading,et.Downloading].includes(n.status);g.useEffect(()=>{var _;o||!((_=n==null?void 0:n.entity)!=null&&_.name)||Nt(()=>import("./index-CCJ1qLS7.js").then(async w=>(await w.__tla,w)),__vite__mapDeps([7,1,2,3,4,5,6])).then(async({hasModelInCache:w,functionCallingModelIds:j,prebuiltAppConfig:E})=>{var O,k;const S=await w((O=n==null?void 0:n.entity)==null?void 0:O.name);a({hasCache:S,isFunctionCalling:j.includes((k=n==null?void 0:n.entity)==null?void 0:k.name),info:E.model_list.find(N=>{var P;return N.model_id===((P=n==null?void 0:n.entity)==null?void 0:P.name)})})})},[(m=n==null?void 0:n.entity)==null?void 0:m.name,o]);const p=g.useMemo(()=>{var _,w;switch(n.status){case et.Downloading:return h.jsx(ue,{className:"animate-spin w-7 h-7",name:"arrow-big-down-dash"});case et.Loaded:return h.jsx(bo,{name:((_=n.entity)==null?void 0:_.name)||"brain",className:"w-7 h-7"});case et.Loading:return h.jsx(ue,{className:"animate-spin w-7 h-7",name:"loader-circle"});default:return h.jsx(bo,{name:((w=n.entity)==null?void 0:w.name)||"brain",className:"w-7 h-7"})}},[(v=n.entity)==null?void 0:v.name,n.status]),y=g.useMemo(()=>f?null:d?h.jsx(dt,{disabled:!0,className:"w-full mt-4",children:h.jsx(ue,{className:"animate-spin",size:24,name:"loader-circle"})}):n.status===et.Loaded?h.jsx(dt,{onClick:s,className:"mt-4 w-full",children:i("llm_node.create_thread_button")}):h.jsxs("div",{className:"flex gap-2 mt-4",children:[o!=null&&o.hasCache?h.jsx(Mn,{loading:l,onClick:u,children:h.jsx(ue,{size:24,name:"message-square-more"})}):null,h.jsx(dt,{disabled:d,onClick:c,className:"w-full",children:i(o!=null&&o.hasCache?"llm_node.load_model_button":"llm_node.download_model_button")})]}),[f,d,n.status,o==null?void 0:o.hasCache,l,u,c,i,s]);return h.jsxs("div",{children:[h.jsxs("div",{children:[h.jsx(nn,{id:t}),h.jsxs(Eo,{className:"flex justify-center",children:[p,h.jsxs("div",{className:"ml-2 pt-1 max-w-lg",children:[h.jsx(So,{className:"flex gap-2 items-center pr-6",children:`${((b=n==null?void 0:n.entity)==null?void 0:b.name)||""}`}),h.jsx(ds,{className:"max-w-full",children:`${n.label||""}`}),h.jsx("div",{className:"max-w-full mt-2 flex-wrap flex gap-1",children:h.jsx(El,{model:o==null?void 0:o.info,isFunctionCalling:(o==null?void 0:o.isFunctionCalling)||!1,name:(x=n==null?void 0:n.entity)==null?void 0:x.name,isCached:(o==null?void 0:o.hasCache)||!1})}),y]})]}),f?h.jsx(Kx,{className:"rounded-lg"}):void 0]}),h.jsx(Ge,{type:"source",position:fe.Bottom,id:"a",isConnectable:r})]})}),lp=g.memo(({tags:e,disabled:t,loading:n,onSubmit:r})=>{const{t:o}=Me("components"),a=async i=>{try{return await r(i),!0}catch{return!1}};return h.jsxs(Tt,{className:"min-w-80",children:[h.jsx(hn,{children:h.jsx(jn,{children:o("add_message_card.title")})}),h.jsxs(mn,{children:[h.jsx("div",{className:"grid w-full gap-1.5",children:h.jsx(fk,{onSubmit:a,disabled:t||n,placeholder:o("add_message_card.placeholder")})}),e?h.jsx("div",{className:"mt-2 gap-1 flex flex-wrap",children:e}):null]})]})}),Ow=(e,t,n,r=[],o)=>{const a=e.map(i=>o.getNode(i));for(const i of a){if(!i)continue;const s=o.getHandleConnections({type:"target",nodeId:i.id});if(n.push(...s),i.type===oe.Thread){r.push(i.id),t.push(i);continue}else if(i.type!==oe.Message){r.push(i.id);continue}else if(r.includes(i.id))continue;r.push(i.id),t.push(i),s.length&&Ow(s.map(c=>c.source),t,n,r,o)}return{nodes:t,connections:n}},Nw=(e,t)=>{const n=t.getHandleConnections({nodeId:e.id,type:"target"}),r=n.map(d=>{const f=t.getNode(d.source);return f?{connections:t.getHandleConnections({nodeId:f.id,type:"target"}),node:f}:void 0}),o=r.filter(d=>{var f;return((f=d.node)==null?void 0:f.type)===oe.Prompt}),a=[];o!=null&&o.length&&o.forEach(d=>{var p;const f=(p=d.connections)==null?void 0:p.map(y=>t.getNode(y.source)).filter(Boolean);a.push({node:d.node,connections:d.connections,connectedNodes:f})});const i=r.filter(d=>{var f;return((f=d.node)==null?void 0:f.type)===oe.ToolDefinition}),s=[];i!=null&&i.length&&i.forEach(d=>{var p;const f=(p=d.connections)==null?void 0:p.map(y=>t.getNode(y.source)).filter(Boolean);f!=null&&f.find(y=>y.type===oe.Schema)&&s.push({node:d.node,connections:d.connections,connectedNodes:f})});const c=r.filter(d=>{var f;return((f=d.node)==null?void 0:f.type)===oe.PlaceHolder}),l=[];c!=null&&c.length&&c.forEach(d=>{var p;const f=(p=d.connections)==null?void 0:p.map(y=>t.getNode(y.source)).filter(Boolean);f&&l.push({node:d.node,connections:d.connections,connectedNodes:f})});const u=r.find(d=>{var f;return((f=d.node)==null?void 0:f.type)===oe.Schema});return{thread:{node:e,connections:n},llm:r.find(d=>{var f;return((f=d.node)==null?void 0:f.type)===oe.LLM}),schemas:u?[u]:[],prompts:a,tools:s,placeholders:l}},Mw=e=>{const t=[];return e.forEach(n=>{var a,i,s;const{node:r,connectedNodes:o}=n;if((a=r.data)!=null&&a.entity){if(r.type===oe.Message){const c=r.data.entity;switch(c.role){case"human":t.push(new Fu(c.content));break;case"ai":t.push(new Bu(c.content));break}}else if(r.type===oe.Prompt){const c=r.data.entity;let l=`${c.prefix?`${c.prefix}
`:""}`;if(c.type===Pn.FewShotExample){const u=(s=(i=o.find(d=>d.type===oe.CSVData))==null?void 0:i.data)==null?void 0:s.entity;if(u){const{rows:d}=q9(u.headers,u.csv);d.forEach(f=>{l+=`${c.content.replace(/{([^{}]*)}/g,(p,y)=>`${f[y]}`)}
`})}}else l+=c.content;switch(c.suffix&&(l+=`
${c.suffix}`),c.role){case"human":t.push(new Fu(l));break;case"system":t.push(new V9(l));break;default:t.push(new Bu(l));break}}}}),t},Y5=(e,t)=>{const n=(e==null?void 0:e.filter(o=>o.type===oe.Message).map(o=>({node:o,connectedNodes:[]})).reverse())||[],r=[];return t.forEach(async o=>{r.unshift({node:o.node,connectedNodes:o.connectedNodes||[]})}),{history:Mw(n),systems:Mw(r)}},K5=e=>e?e.reduce((t,n)=>{var a,i,s,c,l;const r=(a=n.node.data)==null?void 0:a.entity,o=(c=(s=(i=n==null?void 0:n.connectedNodes)==null?void 0:i.find(u=>u.type===oe.Schema))==null?void 0:s.data)==null?void 0:c.entity;return r&&((l=o==null?void 0:o.schema_items)!=null&&l.length)&&t.push({name:r.name,description:r.description,schemaItems:o.schema_items}),t},[]):[],kw=({getNode:e,getHandleConnections:t})=>{const{t:n}=Me("create_new_message"),[r,o]=g.useState(!1),a=Ze(m=>m.currentSession),i=Ae(m=>m.createOrUpdateFlowNode),s=Ae(m=>m.createOrUpdateFlowEdge),c=li(m=>m.similaritySearchWithScore),l=sn(m=>m.getCurrentModelInfo),{stream:u}=Qm(),d=g.useCallback(async({content:m,threadId:v,sourceId:b,initialX:x,initialY:_,initialLLMId:w})=>{if(!a)throw new Error("Session is not found");const j=await ce("Message").save({thread_id:v,content:m,role:kn.Human,status:Xr.Started,llm_id:w,session_id:a.id});if(!j)throw new Error("Failed to save message");const E=await i({source_id:j.id,source_type:"Message",node_type:oe.Message,x,y:_+80});if(!E)throw new Error("Failed to save human message node");await s({source:b,target:E.id});const S=await ce("Message").save({thread_id:v,content:n("initial_ai_message"),role:kn.AI,status:Xr.Inprogress,llm_id:w,parent_message_id:j.id,session_id:a.id});if(!S)throw new Error("Failed to save message");const O=await i({source_id:S.id,source_type:"Message",node_type:oe.Message,x,y:_+250});if(!O)throw new Error("Failed to save ai message node");return await s({source:E.id,target:O.id}),{aiMessage:S,humanMessage:j,aiMessageNode:O,humanMessageNode:E}},[s,i,a,n]),f=g.useCallback(async(m,v)=>{const{placeholders:b}=v;if(!(b!=null&&b.length))return[];const x=[];return await Promise.all(b.map(async _=>{var j,E,S,O,k,N,P,R,A,C,M,T;const w=(j=_.node.data)==null?void 0:j.entity;if(w)switch(w.placeholder_type){case yi.VECTOR_DATABASE_RETREIVER:{const D=(E=_.connectedNodes)==null?void 0:E.find(J=>J.type===oe.VectorDatabase),I=(S=D==null?void 0:D.data)==null?void 0:S.entity,L=(N=(k=(O=_.connectedNodes)==null?void 0:O.find(J=>J.type===oe.Prompt))==null?void 0:k.data)==null?void 0:N.entity;if(!L||!I||!D)return;const B=(P=w.metadata)!=null&&P.k?+((R=w.metadata)==null?void 0:R.k):1;let U=(A=w.metadata)!=null&&A.minimalScore?+((C=w.metadata)==null?void 0:C.minimalScore):void 0;U&&U>1&&(U=U/100);const F=[];if(I.storage===nr.DataNode){const J=(T=(M=t({nodeId:D.id,type:"target"}).map(q=>e(q.source)).find(q=>(q==null?void 0:q.type)&&[oe.JSONLData,oe.CSVData].includes(q==null?void 0:q.type)))==null?void 0:M.data)==null?void 0:T.entity;if(!J)return;F.push(...await c({databaseId:I.id,dataSourceId:J.id,dataSourceType:OE(J)},m.humanMessage.content,B))}else F.push(...await c({databaseId:I.id},m.humanMessage.content,B));if(!F)return[];const H=new $o({template:L.content,inputVariables:["context"]});x.push(new Bu(await H.format({context:U?F.filter(([,J])=>J>=U).map(([J])=>J.pageContent).join(`
`):F.map(([J])=>J.pageContent).join(`
`)})))}}})),x},[t,e,c]),p=g.useCallback(async(m,v,b,{onMessageUpdate:x})=>{const{prompts:_,tools:w,schemas:j,placeholders:E}=v,S=[];E!=null&&E.length&&S.push(...await f(m,v));const{history:O,systems:k}=Y5(b,_),N=[...k,...S,...O,new Fu(m.humanMessage.content)],P=j.map(C=>{var M;return(M=C.node.data)==null?void 0:M.entity}).filter(Boolean),{lastChunk:R,content:A}=await u(N,{tools:K5(w),schemas:P,onMessageUpdate:({content:C})=>{x==null||x({id:m.aiMessageNode.id,nodeData:{loading:!0,content:C}})}});return m.aiMessage.content=A,m.aiMessage.metadata=JSON.stringify({message:R}),x==null||x({id:m.aiMessageNode.id,nodeData:{content:A,loading:!1,entity:m.aiMessage}}),m.aiMessage.id&&await ce("Message").update(m.aiMessage.id,{content:A,metadata:JSON.stringify({message:R})}),A},[f,u]),y=g.useCallback(async(m,v,b)=>{var S,O,k;const{nodes:x}=Ow([m.id],[],[],[],{getNode:e,getHandleConnections:t}),_=x.find(N=>N.type===oe.Thread),w=_==null?void 0:_.data.entity;if(!m||!w||!_)throw new Error("Source or thread is not found");if(!await l())throw new Error("Model is not loaded yet");const j=Nw(_,{getNode:e,getHandleConnections:t});if(!(j!=null&&j.thread))throw new Error("Thread node is not found");let E;try{o(!0);const N=((S=m.position)==null?void 0:S.x)||0,P=(((O=m.position)==null?void 0:O.y)||0)+(((k=m.measured)==null?void 0:k.height)||0);return E=await d({content:v,initialX:N,initialY:P,sourceId:m.id,threadId:w.id,initialLLMId:w.initial_llm_id}),await p(E,j,x,b),await ce("Message").update(`${E.aiMessage.id}`,{status:Xr.Success}),E.aiMessage.status=Xr.Success,b.onMessageUpdate({id:E.aiMessageNode.id,nodeData:{entity:E.aiMessage,loading:!1}}),!0}catch{E!=null&&E.aiMessage&&await ce("Message").update(`${E.aiMessage.id}`,{status:Xr.Failed,content:n("errors.ai_message_content_failed")}),E!=null&&E.aiMessageNode.id&&(b==null||b.onMessageUpdate({id:E.aiMessageNode.id,nodeData:{content:n("errors.ai_message_content_failed"),loading:!1}}))}finally{o(!1)}},[l,t,e,d,p,n]);return{loading:r,createMessage:y}},X5=(e,t)=>{const n=ln(e),{t:r}=Me("flows"),{getNode:o,getHandleConnections:a}=Fn(),i=Ae(f=>f.updateNodes),{createMessage:s,loading:c}=kw({getNode:o,getHandleConnections:a}),l=g.useCallback(f=>{if(!f.id)return;const p=o(f.id);!p||!f.nodeData||i([{id:p.id,type:"replace",item:{...p,data:{...p.data,...Qc(f.nodeData,Jc)}}}])},[o,i]),u=g.useCallback(async f=>{if(n&&t.entity)try{await s(n,f,{onMessageUpdate:l})}catch(p){if(p instanceof Error&&p.message.includes("LLM_NOT_LOADED_YET"))return Gs({variant:"destructive",title:r("thread_node.errors.llm_not_loaded_yet")});Gs({variant:"destructive",title:`${p}`})}},[n,t.entity,s,l,r]),d=g.useCallback(f=>{const p=o(f);if(!p)return[];const y=[],m=Nw(p,{getNode:o,getHandleConnections:a});return m.thread&&y.push({node:m.thread.node,connectedNodes:[],connections:m.thread.connections}),m.prompts&&y.push(...m.prompts.map(v=>({node:v.node,connectedNodes:v.connectedNodes,connections:v.connections}))),m.schemas&&y.push(...m.schemas.map(v=>({node:v.node,connectedNodes:[],connections:v.connections}))),m.placeholders&&m.placeholders.forEach(v=>{const b=v.connections.map(x=>o(x.source)).filter(Boolean);y.push({node:v.node,connectedNodes:b||[],connections:v.connections})}),m.llm&&y.push(m.llm),y},[a,o]);return{loading:c,createMessage:u,getLinkedConnections:d}},Q5=e=>{const t=Ae(r=>r.createOrUpdateFlowEdge),n=g.useCallback(async({edgeId:r,source:o,target:a,connection:i})=>{try{if((o==null?void 0:o.type)===oe.Prompt&&(a==null?void 0:a.type)===oe.Thread){await t({source:i.source,target:i.target,sourceHandle:i.sourceHandle,targetHandle:i.targetHandle});return}else if((o==null?void 0:o.type)===oe.LLM&&(a==null?void 0:a.type)===oe.Thread){await t({source:i.source,target:i.target,sourceHandle:i.sourceHandle,targetHandle:i.targetHandle});return}else if((o==null?void 0:o.type)===oe.Schema&&(a==null?void 0:a.type)===oe.Thread){await t({source:i.source,target:i.target,sourceHandle:i.sourceHandle,targetHandle:i.targetHandle});return}else if((o==null?void 0:o.type)===oe.ToolDefinition&&(a==null?void 0:a.type)===oe.Thread){await t({source:i.source,target:i.target,sourceHandle:i.sourceHandle,targetHandle:i.targetHandle});return}else if((o==null?void 0:o.type)===oe.VectorDatabase&&(a==null?void 0:a.type)===oe.Thread){await t({source:i.source,target:i.target,sourceHandle:i.sourceHandle,targetHandle:i.targetHandle});return}else if((o==null?void 0:o.type)===oe.PlaceHolder&&(a==null?void 0:a.type)===oe.Thread&&o.data.entity.placeholder_type===yi.VECTOR_DATABASE_RETREIVER){await t({source:i.source,target:i.target,sourceHandle:i.sourceHandle,targetHandle:i.targetHandle});return}return{deleteEdgeId:r}}catch{return{deleteEdgeId:r}}},[t]);cn(e,n)},J5=g.memo(e=>{const{id:t,data:n,isConnectable:r}=e,{t:o}=Me("flows"),[a,i]=g.useState(!1),s=Lf({type:"source"}),c=Lf({type:"target"}),{getNode:l}=Fn(),{loading:u,createMessage:d,getLinkedConnections:f}=X5(t,n);Q5(t);const p=g.useCallback(async(...b)=>(i(!1),await d(...b)),[d]),y=g.useMemo(()=>s.length>0,[s]),m=g.useCallback(()=>{i(b=>!b)},[]),v=g.useMemo(()=>{var x,_;const b=c.map((w,j)=>{var S;const E=l(w.source);if((E==null?void 0:E.type)===oe.Schema)return h.jsx(tn,{children:o("thread_node.structured_output")},`${j}`);if((E==null?void 0:E.type)===oe.Prompt){const O=E.data.entity;return h.jsx(tn,{children:o(O.type===Pn.FewShotExample?"thread_node.prompts.few_shot_example":`thread_node.prompts.${O.role.toLowerCase()}`)},`${j}`)}else if((E==null?void 0:E.type)===oe.PlaceHolder&&((S=E.data.entity)==null?void 0:S.placeholder_type)===yi.VECTOR_DATABASE_RETREIVER)return h.jsx(tn,{children:o("thread_node.vector_database_retriever")},`${j}`)}).filter(Boolean);return e.data.entity&&!((_=(x=e.data.entity)==null?void 0:x.messages)!=null&&_.length)&&!y?h.jsx(lp,{disabled:u,loading:u,onSubmit:p,tags:b}):b!=null&&b.length?h.jsxs(Tt,{className:"p-4 pt-2",children:[h.jsx(jn,{className:"mb-2",children:o("thread_node.title")}),h.jsx("div",{className:"flex gap-1.5",children:b}),h.jsx("div",{className:"mt-4 w-full flex justify-end",children:h.jsxs(dt,{onClick:m,variant:"outline",children:[h.jsx(ue,{name:a?"copy-minus":"copy-plus"}),o(a?"thread_node.hide":"thread_node.clone")]})})]}):h.jsx("div",{className:"w-12 h-10"})},[y,l,p,m,u,e.data.entity,a,o,c]);return h.jsxs("div",{children:[h.jsx(Ge,{type:"target",position:fe.Top,isConnectable:r}),h.jsxs("div",{children:[h.jsx(nn,{id:t,enableToStandalone:!0,getLinkedConnections:f}),v,a?h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"w-[1px] absolute ml-[50%] h-[30px] bg-gray-500"}),h.jsx("div",{className:"absolute mt-[30px] w-full",children:h.jsx("div",{className:"ml-[10%] w-80 animate-in slide-in-from-bottom-5",children:h.jsx(lp,{disabled:u,loading:u,onSubmit:p})})})]}):void 0]}),h.jsx(Ge,{type:"source",position:fe.Bottom,id:"a",isConnectable:r})]})});function Iie({data:e,onNewThread:t,loading:n,showThread:r}){var a;const{t:o}=Me("flows");return h.jsxs(Eo,{className:"flex min-w-52",children:[h.jsx(ue,{size:24,name:"user"}),h.jsxs("div",{className:"ml-2 max-w-full w-full",children:[h.jsx(So,{children:"Human"}),h.jsx(ds,{children:`${e.content||((a=e.entity)==null?void 0:a.content)||""}`}),t?h.jsx("div",{className:"w-full mt-2 flex items-center justify-end",children:h.jsxs(dt,{onClick:t,disabled:n,variant:"outline",children:[h.jsx(ue,{name:r?"minus":"plus",size:16}),o(r?"message_node.hide_thread":"message_node.new_thread")]})}):void 0]})]})}const Die=g.lazy(()=>Nt(()=>import("./index-B7J5gepj.js").then(async e=>(await e.__tla,e)),__vite__mapDeps([11,12,1,2,13,14])));function Lie({data:e,onNewThread:t,loading:n,showThread:r}){var i,s,c,l,u,d,f,p;const{t:o}=Me("flows"),a=g.useMemo(()=>{var y;try{return JSON.parse(((y=e==null?void 0:e.entity)==null?void 0:y.metadata)||"{}")}catch{return{}}},[(i=e==null?void 0:e.entity)==null?void 0:i.metadata]);return h.jsxs(Eo,{className:"flex min-w-52",children:[h.jsx(ue,{className:K(e.loading?"animate-spin":void 0),size:24,name:e.loading?"loader-circle":"bot"}),h.jsx(ue,{name:r?"minus":"plus",size:24}),h.jsxs("div",{className:"ml-2 w-full max-w-full",children:[h.jsx(So,{children:o(`message_node.message_roles.${(c=(s=e.entity)==null?void 0:s.role)==null?void 0:c.toLowerCase()}`)}),h.jsx(g.Suspense,{fallback:h.jsx("div",{className:"h-full w-ful rounded-lg flex justify-center items-center",children:h.jsx(ue,{name:"loader-circle",className:"animate-spin"})}),children:h.jsx(Die,{className:"!text-sm [&_p]:leading-relaxed !max-w-full !bg-transparent !font-sans",source:`${e.content||((l=e.entity)==null?void 0:l.content)||""}`,style:{color:"unset !important"}})}),Array.isArray((u=a==null?void 0:a.message)==null?void 0:u.tool_calls)&&((f=(d=a==null?void 0:a.message)==null?void 0:d.tool_calls)!=null&&f.length)?(p=a==null?void 0:a.message)==null?void 0:p.tool_calls.map((y,m)=>h.jsx(tn,{children:o("message_node.tool_call",{name:y.name,args:Object.entries(y.args).map(([v,b])=>`"${v}": "${b}"`).join(", ")})},`${y.name}_${m}`)):null,t?h.jsx("div",{className:"w-full mt-2 flex items-center justify-end",children:h.jsxs(dt,{onClick:t,disabled:n,variant:"outline",children:[h.jsx(ue,{name:r?"minus":"plus",size:16}),o(r?"message_node.hide_thread":"message_node.new_thread")]})}):void 0]}),e.loading?h.jsx(Kx,{size:350,duration:10}):void 0]})}const Fie=e=>{const{t}=Me("flows"),n=ln(e),r=Ae(u=>u.updateNodes),{getNode:o,getHandleConnections:a}=Fn(),{createMessage:i,loading:s}=kw({getNode:o,getHandleConnections:a}),c=g.useCallback(u=>{if(!u.id)return;const d=o(u.id);!d||!u.nodeData||r([{id:d.id,type:"replace",item:{...d,data:{...d.data,...Qc(u.nodeData,Jc)}}}])},[o,r]),l=g.useCallback(async u=>{if(n)try{await i(n,u,{onMessageUpdate:c})}catch(d){if(d instanceof Error&&d.message.includes("LLM_NOT_LOADED_YET"))return Gs({variant:"destructive",title:t("message_node.errors.llm_not_loaded_yet")});Gs({variant:"destructive",title:t("message_node.errors.create_message")})}},[n,t,i,c]);return{loading:s,createMessage:l}},G5=()=>{const e=Ze(r=>r.currentSession),t=Ae(r=>r.createOrUpdateFlowNode),n=Ae(r=>r.createOrUpdateFlowEdge);return{createIdieMessage:g.useCallback(async(r,o,a,i)=>{var y,m,v,b,x;if(!r||!o||!e)return;const s=(m=(y=i==null?void 0:i.promptNode)==null?void 0:y.data)==null?void 0:m.entity,c=((v=r.position)==null?void 0:v.x)||0,l=(((b=r.position)==null?void 0:b.y)||0)+(((x=r.measured)==null?void 0:x.height)||0),u=await ce("Message").save({thread_id:o.id,content:a,role:(s==null?void 0:s.role)||kn.Human,status:Xr.Started,llm_id:o.initial_llm_id,session_id:e.id});if(!u)throw new Error("Failed to save message");const d=await t({source_id:u.id,source_type:"Message",node_type:oe.Message,x:c,y:l});if(!d)throw new Error("Failed to save message node");const f=await n({source:r.id,target:d.id});let p;return i!=null&&i.promptNode&&(p=await n({source:i==null?void 0:i.promptNode.id,target:d.id})),{message:u,edgeToPrompt:p,messageNode:d,messageEdge:f}},[t,n])}},Bie=e=>{const{createIdieMessage:t}=G5(),n=g.useCallback(async({edgeId:r,source:o,target:a})=>{var i,s;try{if((o==null?void 0:o.type)===oe.Prompt&&(a==null?void 0:a.type)===oe.Message){const c=(i=a==null?void 0:a.data)==null?void 0:i.entity,l=(s=o==null?void 0:o.data)==null?void 0:s.entity;if(!l||!c||!a)return{deleteEdgeId:r};await t(a,{id:c==null?void 0:c.thread_id,title:"",status:Yu.Started,initial_llm_id:c.llm_id,session_id:l.session_id},l.content,{promptNode:o});return}return{deleteEdgeId:r}}catch{return{deleteEdgeId:r}}},[t]);cn(e,n)},$ie=g.memo(e=>{var _,w,j;const{id:t,data:n,isConnectable:r}=e,[o,a]=g.useState(!1),[i,s]=g.useState(!1),{t:c}=Me("common"),l=Lf({type:"source"}),{loading:u,createMessage:d}=Fie(t),{toast:f}=Bt();Bie(t);const p=g.useCallback(async(...E)=>{const S=await d(...E);return a(!1),S},[d]),y=g.useMemo(()=>l.length===0,[l]),m=g.useCallback(()=>{var E;(E=n.entity)!=null&&E.content&&(navigator.clipboard.writeText(n.entity.content),f({description:c("copied")}))},[f,n,c]),v=g.useCallback(async()=>{var E;try{if(i)return await CE.stop(),s(!1);s(!0),await CE.speak(((E=n.entity)==null?void 0:E.content)||"")}catch{f({variant:"destructive",description:c("errors.speech_is_not_supported")})}finally{s(!1)}},[(_=n.entity)==null?void 0:_.content,i,c,f]),b=g.useCallback(()=>{a(E=>!E)},[]),x=g.useMemo(()=>{var E;if(!(!y&&!o||n.loading||u||((E=n==null?void 0:n.entity)==null?void 0:E.status)==="inprogress"))return h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"w-[1px] absolute ml-[50%] h-[30px] bg-gray-500"}),h.jsx("div",{className:"absolute mt-[30px] w-full",children:h.jsx("div",{className:"ml-[10%] w-80 animate-in slide-in-from-bottom-5",children:h.jsx(lp,{disabled:u,loading:u,onSubmit:p})})})]})},[(w=n==null?void 0:n.entity)==null?void 0:w.status,n.loading,p,y,u,o]);return h.jsxs("div",{children:[h.jsx(Ge,{type:"target",position:fe.Top,isConnectable:r}),h.jsxs("div",{className:"max-w-sm min-w-64",children:[h.jsxs("div",{className:"w-auto",children:[h.jsx(nn,{id:t}),h.jsx("div",{children:((j=n.entity)==null?void 0:j.role)===kn.Human?h.jsx(Iie,{data:n,showThread:o,onNewThread:y?void 0:b}):h.jsx(Lie,{data:n,showThread:o,loading:u,onNewThread:y?void 0:b})}),h.jsx(dt,{onClick:v,className:"absolute top-0 right-[68px] !px-2 !rounded-none",variant:"ghost",children:h.jsx(ue,{name:i?"circle-stop":"speech",size:16})}),h.jsx(dt,{onClick:m,className:"absolute top-0 right-[36px] !px-2 !rounded-none",variant:"ghost",children:h.jsx(ue,{name:"copy",size:16})})]}),x]}),h.jsx(Ge,{type:"source",position:fe.Bottom,id:"a",isConnectable:r})]})}),zie=e=>{const t=Ae(o=>o.createOrUpdateFlowEdge),{createIdieMessage:n}=G5(),r=g.useCallback(async({edgeId:o,source:a,target:i})=>{var s,c,l,u;try{const d=(s=i==null?void 0:i.data)==null?void 0:s.entity,f=(c=a==null?void 0:a.data)==null?void 0:c.entity;if((a==null?void 0:a.type)===oe.Message&&(i==null?void 0:i.type)===oe.Prompt){const p=(l=a==null?void 0:a.data)==null?void 0:l.entity,y=(u=i==null?void 0:i.data)==null?void 0:u.entity;if(!y||!p||!i)return{deleteEdgeId:o};await n(a,{id:p==null?void 0:p.thread_id,title:"",status:Yu.Started,initial_llm_id:p.llm_id,session_id:y.session_id},y.content,{promptNode:i});return}else if((a==null?void 0:a.type)===oe.CSVData&&(i==null?void 0:i.type)===oe.Prompt&&(d==null?void 0:d.type)===Pn.FewShotExample&&(f!=null&&f.headers.includes("input"))&&(f!=null&&f.headers.includes("output"))){await t({source:a.id,target:i.id});return}return{deleteEdgeId:o}}catch{return{deleteEdgeId:o}}},[n,t]);cn(e,r)},Vie=g.memo(e=>{var l,u,d;const{id:t,data:n,isConnectable:r}=e;zie(t);const o=Kt(ZD),a=g.useMemo(()=>{var f,p,y;return`${(f=n.entity)!=null&&f.prefix?`${(p=n.entity)==null?void 0:p.prefix}
`:""}${((y=n.entity)==null?void 0:y.content)||""}`},[(l=n.entity)==null?void 0:l.prefix,(u=n.entity)==null?void 0:u.content]),i=g.useMemo(()=>{var p;const f=/{(.*?)}/g;return((p=a.match(f))==null?void 0:p.map(y=>y.replace("{","").replace("}","")))||[]},[a]),s=a.length>990,c=()=>{o.show({title:"Prompt",content:a})};return h.jsxs("div",{className:"min-w-56",children:[h.jsx(Ge,{type:"target",position:fe.Top,isConnectable:r}),h.jsxs("div",{children:[h.jsx(nn,{id:t}),h.jsxs(Eo,{className:"flex justify-center max-w-72",variant:"default",children:[h.jsx(ue,{size:24,name:"notepad-text"}),h.jsxs("div",{className:"ml-2 max-w-full break-words break-all",children:[h.jsx(So,{children:`${((d=n.entity)==null?void 0:d.role)||""}`}),h.jsxs(ds,{onClick:s?c:void 0,children:[s?`${a.slice(0,990)}...`:a,s?h.jsx("span",{className:"float-right",children:h.jsx(ue,{name:"chevron-right"})}):void 0]}),i!=null&&i.length?i.map((f,p)=>h.jsx(tn,{className:"mt-2 mr-1",variant:"default",children:f},p)):void 0]})]})]}),h.jsx(Ge,{type:"source",position:fe.Bottom,id:"a",isConnectable:r})]})});var Uie=SA();const Yn=Xe(Uie);var Pw,Z5;function Hie(){if(Z5)return Pw;Z5=1;function e(t){return t==null}return Pw=e,Pw}var Wie=Hie();const at=Xe(Wie);var Aw,e4;function qie(){if(e4)return Aw;e4=1;var e=uo(),t=un(),n=Nr(),r="[object String]";function o(a){return typeof a=="string"||!t(a)&&n(a)&&e(a)==r}return Aw=o,Aw}var Yie=qie();const Tl=Xe(Yie);var Kie=Vu();const We=Xe(Kie);var Xie=or();const fs=Xe(Xie);var t4={exports:{}},it={},n4;function Qie(){if(n4)return it;n4=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),i=Symbol.for("react.context"),s=Symbol.for("react.server_context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.suspense_list"),d=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.for("react.offscreen"),y;y=Symbol.for("react.module.reference");function m(v){if(typeof v=="object"&&v!==null){var b=v.$$typeof;switch(b){case e:switch(v=v.type,v){case n:case o:case r:case l:case u:return v;default:switch(v=v&&v.$$typeof,v){case s:case i:case c:case f:case d:case a:return v;default:return b}}case t:return b}}}return it.ContextConsumer=i,it.ContextProvider=a,it.Element=e,it.ForwardRef=c,it.Fragment=n,it.Lazy=f,it.Memo=d,it.Portal=t,it.Profiler=o,it.StrictMode=r,it.Suspense=l,it.SuspenseList=u,it.isAsyncMode=function(){return!1},it.isConcurrentMode=function(){return!1},it.isContextConsumer=function(v){return m(v)===i},it.isContextProvider=function(v){return m(v)===a},it.isElement=function(v){return typeof v=="object"&&v!==null&&v.$$typeof===e},it.isForwardRef=function(v){return m(v)===c},it.isFragment=function(v){return m(v)===n},it.isLazy=function(v){return m(v)===f},it.isMemo=function(v){return m(v)===d},it.isPortal=function(v){return m(v)===t},it.isProfiler=function(v){return m(v)===o},it.isStrictMode=function(v){return m(v)===r},it.isSuspense=function(v){return m(v)===l},it.isSuspenseList=function(v){return m(v)===u},it.isValidElementType=function(v){return typeof v=="string"||typeof v=="function"||v===n||v===o||v===r||v===l||v===u||v===p||typeof v=="object"&&v!==null&&(v.$$typeof===f||v.$$typeof===d||v.$$typeof===a||v.$$typeof===i||v.$$typeof===c||v.$$typeof===y||v.getModuleId!==void 0)},it.typeOf=m,it}var r4;function Jie(){return r4||(r4=1,t4.exports=Qie()),t4.exports}var Gie=Jie(),Tw,o4;function a4(){if(o4)return Tw;o4=1;var e=uo(),t=Nr(),n="[object Number]";function r(o){return typeof o=="number"||t(o)&&e(o)==n}return Tw=r,Tw}var Rw,i4;function Zie(){if(i4)return Rw;i4=1;var e=a4();function t(n){return e(n)&&n!=+n}return Rw=t,Rw}var ese=Zie();const Rl=Xe(ese);var tse=a4();const nse=Xe(tse);var xr=function(e){return e===0?0:e>0?1:-1},Ha=function(e){return Tl(e)&&e.indexOf("%")===e.length-1},me=function(e){return nse(e)&&!Rl(e)},zt=function(e){return me(e)||Tl(e)},rse=0,up=function(e){var t=++rse;return"".concat(e||"").concat(t)},Wa=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!me(e)&&!Tl(e))return n;var o;if(Ha(e)){var a=e.indexOf("%");o=t*parseFloat(e.slice(0,a))/100}else o=+e;return Rl(o)&&(o=n),r&&o>t&&(o=t),o},oa=function(e){if(!e)return null;var t=Object.keys(e);return t&&t.length?e[t[0]]:null},ose=function(e){if(!Array.isArray(e))return!1;for(var t=e.length,n={},r=0;r<t;r++)if(!n[e[r]])n[e[r]]=!0;else return!0;return!1},ps=function(e,t){return me(e)&&me(t)?function(n){return e+n*(t-e)}:function(){return t}};function Iw(e,t,n){return!e||!e.length?null:e.find(function(r){return r&&(typeof t=="function"?t(r):Yn(r,t))===n})}function hs(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var r in t)if({}.hasOwnProperty.call(t,r)&&!{}.hasOwnProperty.call(e,r))return!1;return!0}function Dw(e){"@babel/helpers - typeof";return Dw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dw(e)}var ase=["viewBox","children"],ise=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],s4=["points","pathLength"],Lw={svg:ase,polygon:s4,polyline:s4},Fw=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],dp=function(e,t){if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(g.isValidElement(e)&&(n=e.props),!fs(n))return null;var r={};return Object.keys(n).forEach(function(o){Fw.includes(o)&&(r[o]=t||function(a){return n[o](n,a)})}),r},sse=function(e,t,n){return function(r){return e(t,n,r),null}},fp=function(e,t,n){if(!fs(e)||Dw(e)!=="object")return null;var r=null;return Object.keys(e).forEach(function(o){var a=e[o];Fw.includes(o)&&typeof a=="function"&&(r||(r={}),r[o]=sse(a,t,n))}),r},cse=["children"],lse=["children"];function c4(e,t){if(e==null)return{};var n=use(e,t),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function use(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var l4={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart"},Co=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},u4=null,Bw=null,$w=function e(t){if(t===u4&&Array.isArray(Bw))return Bw;var n=[];return g.Children.forEach(t,function(r){at(r)||(Gie.isFragment(r)?n=n.concat(e(r.props.children)):n.push(r))}),Bw=n,u4=t,n};function wr(e,t){var n=[],r=[];return Array.isArray(t)?r=t.map(function(o){return Co(o)}):r=[Co(t)],$w(e).forEach(function(o){var a=Yn(o,"type.displayName")||Yn(o,"type.name");r.indexOf(a)!==-1&&n.push(o)}),n}function Bn(e,t){var n=wr(e,t);return n&&n[0]}var d4=function(e){if(!e||!e.props)return!1;var t=e.props,n=t.width,r=t.height;return!(!me(n)||n<=0||!me(r)||r<=0)},dse=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],fse=function(e){return e&&e.type&&Tl(e.type)&&dse.indexOf(e.type)>=0},pse=function(e,t,n,r){var o,a=(o=Lw==null?void 0:Lw[r])!==null&&o!==void 0?o:[];return!We(e)&&(r&&a.includes(t)||ise.includes(t))||n&&Fw.includes(t)},ot=function(e,t,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(g.isValidElement(e)&&(r=e.props),!fs(r))return null;var o={};return Object.keys(r).forEach(function(a){var i;pse((i=r)===null||i===void 0?void 0:i[a],a,t,n)&&(o[a]=r[a])}),o},zw=function e(t,n){if(t===n)return!0;var r=g.Children.count(t);if(r!==g.Children.count(n))return!1;if(r===0)return!0;if(r===1)return f4(Array.isArray(t)?t[0]:t,Array.isArray(n)?n[0]:n);for(var o=0;o<r;o++){var a=t[o],i=n[o];if(Array.isArray(a)||Array.isArray(i)){if(!e(a,i))return!1}else if(!f4(a,i))return!1}return!0},f4=function(e,t){if(at(e)&&at(t))return!0;if(!at(e)&&!at(t)){var n=e.props||{},r=n.children,o=c4(n,cse),a=t.props||{},i=a.children,s=c4(a,lse);return r&&i?hs(o,s)&&zw(r,i):!r&&!i?hs(o,s):!1}return!1},p4=function(e,t){var n=[],r={};return $w(e).forEach(function(o,a){if(fse(o))n.push(o);else if(o){var i=Co(o.type),s=t[i]||{},c=s.handler,l=s.once;if(c&&(!l||!r[i])){var u=c(o,i,a);n.push(u),r[i]=!0}}}),n},hse=function(e){var t=e&&e.type;return t&&l4[t]?l4[t]:null},mse=function(e,t){return $w(t).indexOf(e)},yse=["children","width","height","viewBox","className","style","title","desc"];function Vw(){return Vw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Vw.apply(this,arguments)}function gse(e,t){if(e==null)return{};var n=vse(e,t),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function vse(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Uw(e){var t=e.children,n=e.width,r=e.height,o=e.viewBox,a=e.className,i=e.style,s=e.title,c=e.desc,l=gse(e,yse),u=o||{width:n,height:r,x:0,y:0},d=lt("recharts-surface",a);return V.createElement("svg",Vw({},ot(l,!0,"svg"),{className:d,width:n,height:r,style:i,viewBox:"".concat(u.x," ").concat(u.y," ").concat(u.width," ").concat(u.height)}),V.createElement("title",null,s),V.createElement("desc",null,c),t)}var bse=["children","className"];function Hw(){return Hw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Hw.apply(this,arguments)}function xse(e,t){if(e==null)return{};var n=wse(e,t),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function wse(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var Wt=V.forwardRef(function(e,t){var n=e.children,r=e.className,o=xse(e,bse),a=lt("recharts-layer",r);return V.createElement("g",Hw({className:a},ot(o,!0),{ref:t}),n)}),Oo=function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o]},Ww,h4;function _se(){if(h4)return Ww;h4=1;var e=Km();function t(n,r,o){var a=n.length;return o=o===void 0?a:o,!r&&o>=a?n:e(n,r,o)}return Ww=t,Ww}var qw,m4;function y4(){if(m4)return qw;m4=1;var e="\uD800-\uDFFF",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",o=t+n+r,a="\\ufe0e\\ufe0f",i="\\u200d",s=RegExp("["+i+e+o+a+"]");function c(l){return s.test(l)}return qw=c,qw}var Yw,g4;function jse(){if(g4)return Yw;g4=1;function e(t){return t.split("")}return Yw=e,Yw}var Kw,v4;function Ese(){if(v4)return Kw;v4=1;var e="\uD800-\uDFFF",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",o=t+n+r,a="\\ufe0e\\ufe0f",i="["+e+"]",s="["+o+"]",c="\uD83C[\uDFFB-\uDFFF]",l="(?:"+s+"|"+c+")",u="[^"+e+"]",d="(?:\uD83C[\uDDE6-\uDDFF]){2}",f="[\uD800-\uDBFF][\uDC00-\uDFFF]",p="\\u200d",y=l+"?",m="["+a+"]?",v="(?:"+p+"(?:"+[u,d,f].join("|")+")"+m+y+")*",b=m+y+v,x="(?:"+[u+s+"?",s,d,f,i].join("|")+")",_=RegExp(c+"(?="+c+")|"+x+b,"g");function w(j){return j.match(_)||[]}return Kw=w,Kw}var Xw,b4;function Sse(){if(b4)return Xw;b4=1;var e=jse(),t=y4(),n=Ese();function r(o){return t(o)?n(o):e(o)}return Xw=r,Xw}var Qw,x4;function Cse(){if(x4)return Qw;x4=1;var e=_se(),t=y4(),n=Sse(),r=xA();function o(a){return function(i){i=r(i);var s=t(i)?n(i):void 0,c=s?s[0]:i.charAt(0),l=s?e(s,1).join(""):i.slice(1);return c[a]()+l}}return Qw=o,Qw}var Jw,w4;function Ose(){if(w4)return Jw;w4=1;var e=Cse(),t=e("toUpperCase");return Jw=t,Jw}var Nse=Ose();const pp=Xe(Nse);function bt(e){return function(){return e}}const _4=Math.cos,hp=Math.sin,_r=Math.sqrt,mp=Math.PI,yp=2*mp,Gw=Math.PI,Zw=2*Gw,qa=1e-6,Mse=Zw-qa;function j4(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function kse(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return j4;const n=10**t;return function(r){this._+=r[0];for(let o=1,a=r.length;o<a;++o)this._+=Math.round(arguments[o]*n)/n+r[o]}}class Pse{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?j4:kse(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,o){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+o}`}bezierCurveTo(t,n,r,o,a,i){this._append`C${+t},${+n},${+r},${+o},${this._x1=+a},${this._y1=+i}`}arcTo(t,n,r,o,a){if(t=+t,n=+n,r=+r,o=+o,a=+a,a<0)throw new Error(`negative radius: ${a}`);let i=this._x1,s=this._y1,c=r-t,l=o-n,u=i-t,d=s-n,f=u*u+d*d;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(f>qa)if(!(Math.abs(d*c-l*u)>qa)||!a)this._append`L${this._x1=t},${this._y1=n}`;else{let p=r-i,y=o-s,m=c*c+l*l,v=p*p+y*y,b=Math.sqrt(m),x=Math.sqrt(f),_=a*Math.tan((Gw-Math.acos((m+f-v)/(2*b*x)))/2),w=_/x,j=_/b;Math.abs(w-1)>qa&&this._append`L${t+w*u},${n+w*d}`,this._append`A${a},${a},0,0,${+(d*p>u*y)},${this._x1=t+j*c},${this._y1=n+j*l}`}}arc(t,n,r,o,a,i){if(t=+t,n=+n,r=+r,i=!!i,r<0)throw new Error(`negative radius: ${r}`);let s=r*Math.cos(o),c=r*Math.sin(o),l=t+s,u=n+c,d=1^i,f=i?o-a:a-o;this._x1===null?this._append`M${l},${u}`:(Math.abs(this._x1-l)>qa||Math.abs(this._y1-u)>qa)&&this._append`L${l},${u}`,r&&(f<0&&(f=f%Zw+Zw),f>Mse?this._append`A${r},${r},0,1,${d},${t-s},${n-c}A${r},${r},0,1,${d},${this._x1=l},${this._y1=u}`:f>qa&&this._append`A${r},${r},0,${+(f>=Gw)},${d},${this._x1=t+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(t,n,r,o){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+o}h${-r}Z`}toString(){return this._}}function e1(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new Pse(t)}function t1(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function E4(e){this._context=e}E4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function gp(e){return new E4(e)}function S4(e){return e[0]}function C4(e){return e[1]}function O4(e,t){var n=bt(!0),r=null,o=gp,a=null,i=e1(s);e=typeof e=="function"?e:e===void 0?S4:bt(e),t=typeof t=="function"?t:t===void 0?C4:bt(t);function s(c){var l,u=(c=t1(c)).length,d,f=!1,p;for(r==null&&(a=o(p=i())),l=0;l<=u;++l)!(l<u&&n(d=c[l],l,c))===f&&((f=!f)?a.lineStart():a.lineEnd()),f&&a.point(+e(d,l,c),+t(d,l,c));if(p)return a=null,p+""||null}return s.x=function(c){return arguments.length?(e=typeof c=="function"?c:bt(+c),s):e},s.y=function(c){return arguments.length?(t=typeof c=="function"?c:bt(+c),s):t},s.defined=function(c){return arguments.length?(n=typeof c=="function"?c:bt(!!c),s):n},s.curve=function(c){return arguments.length?(o=c,r!=null&&(a=o(r)),s):o},s.context=function(c){return arguments.length?(c==null?r=a=null:a=o(r=c),s):r},s}function vp(e,t,n){var r=null,o=bt(!0),a=null,i=gp,s=null,c=e1(l);e=typeof e=="function"?e:e===void 0?S4:bt(+e),t=typeof t=="function"?t:bt(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?C4:bt(+n);function l(d){var f,p,y,m=(d=t1(d)).length,v,b=!1,x,_=new Array(m),w=new Array(m);for(a==null&&(s=i(x=c())),f=0;f<=m;++f){if(!(f<m&&o(v=d[f],f,d))===b)if(b=!b)p=f,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),y=f-1;y>=p;--y)s.point(_[y],w[y]);s.lineEnd(),s.areaEnd()}b&&(_[f]=+e(v,f,d),w[f]=+t(v,f,d),s.point(r?+r(v,f,d):_[f],n?+n(v,f,d):w[f]))}if(x)return s=null,x+""||null}function u(){return O4().defined(o).curve(i).context(a)}return l.x=function(d){return arguments.length?(e=typeof d=="function"?d:bt(+d),r=null,l):e},l.x0=function(d){return arguments.length?(e=typeof d=="function"?d:bt(+d),l):e},l.x1=function(d){return arguments.length?(r=d==null?null:typeof d=="function"?d:bt(+d),l):r},l.y=function(d){return arguments.length?(t=typeof d=="function"?d:bt(+d),n=null,l):t},l.y0=function(d){return arguments.length?(t=typeof d=="function"?d:bt(+d),l):t},l.y1=function(d){return arguments.length?(n=d==null?null:typeof d=="function"?d:bt(+d),l):n},l.lineX0=l.lineY0=function(){return u().x(e).y(t)},l.lineY1=function(){return u().x(e).y(n)},l.lineX1=function(){return u().x(r).y(t)},l.defined=function(d){return arguments.length?(o=typeof d=="function"?d:bt(!!d),l):o},l.curve=function(d){return arguments.length?(i=d,a!=null&&(s=i(a)),l):i},l.context=function(d){return arguments.length?(d==null?a=s=null:s=i(a=d),l):a},l}class N4{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function Ase(e){return new N4(e,!0)}function Tse(e){return new N4(e,!1)}const n1={draw(e,t){const n=_r(t/mp);e.moveTo(n,0),e.arc(0,0,n,0,yp)}},Rse={draw(e,t){const n=_r(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},M4=_r(1/3),Ise=M4*2,Dse={draw(e,t){const n=_r(t/Ise),r=n*M4;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},Lse={draw(e,t){const n=_r(t),r=-n/2;e.rect(r,r,n,n)}},Fse=.8908130915292852,k4=hp(mp/10)/hp(7*mp/10),Bse=hp(yp/10)*k4,$se=-_4(yp/10)*k4,zse={draw(e,t){const n=_r(t*Fse),r=Bse*n,o=$se*n;e.moveTo(0,-n),e.lineTo(r,o);for(let a=1;a<5;++a){const i=yp*a/5,s=_4(i),c=hp(i);e.lineTo(c*n,-s*n),e.lineTo(s*r-c*o,c*r+s*o)}e.closePath()}},r1=_r(3),Vse={draw(e,t){const n=-_r(t/(r1*3));e.moveTo(0,n*2),e.lineTo(-r1*n,-n),e.lineTo(r1*n,-n),e.closePath()}},Kn=-.5,Xn=_r(3)/2,o1=1/_r(12),Use=(o1/2+1)*3,Hse={draw(e,t){const n=_r(t/Use),r=n/2,o=n*o1,a=r,i=n*o1+n,s=-a,c=i;e.moveTo(r,o),e.lineTo(a,i),e.lineTo(s,c),e.lineTo(Kn*r-Xn*o,Xn*r+Kn*o),e.lineTo(Kn*a-Xn*i,Xn*a+Kn*i),e.lineTo(Kn*s-Xn*c,Xn*s+Kn*c),e.lineTo(Kn*r+Xn*o,Kn*o-Xn*r),e.lineTo(Kn*a+Xn*i,Kn*i-Xn*a),e.lineTo(Kn*s+Xn*c,Kn*c-Xn*s),e.closePath()}};function Wse(e,t){let n=null,r=e1(o);e=typeof e=="function"?e:bt(e||n1),t=typeof t=="function"?t:bt(t===void 0?64:+t);function o(){let a;if(n||(n=a=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),a)return n=null,a+""||null}return o.type=function(a){return arguments.length?(e=typeof a=="function"?a:bt(a),o):e},o.size=function(a){return arguments.length?(t=typeof a=="function"?a:bt(+a),o):t},o.context=function(a){return arguments.length?(n=a??null,o):n},o}function bp(){}function xp(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function P4(e){this._context=e}P4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:xp(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:xp(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function qse(e){return new P4(e)}function A4(e){this._context=e}A4.prototype={areaStart:bp,areaEnd:bp,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:xp(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Yse(e){return new A4(e)}function T4(e){this._context=e}T4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:xp(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Kse(e){return new T4(e)}function R4(e){this._context=e}R4.prototype={areaStart:bp,areaEnd:bp,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function Xse(e){return new R4(e)}function I4(e){return e<0?-1:1}function D4(e,t,n){var r=e._x1-e._x0,o=t-e._x1,a=(e._y1-e._y0)/(r||o<0&&-0),i=(n-e._y1)/(o||r<0&&-0),s=(a*o+i*r)/(r+o);return(I4(a)+I4(i))*Math.min(Math.abs(a),Math.abs(i),.5*Math.abs(s))||0}function L4(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function a1(e,t,n){var r=e._x0,o=e._y0,a=e._x1,i=e._y1,s=(a-r)/3;e._context.bezierCurveTo(r+s,o+s*t,a-s,i-s*n,a,i)}function wp(e){this._context=e}wp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:a1(this,this._t0,L4(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,a1(this,L4(this,n=D4(this,e,t)),n);break;default:a1(this,this._t0,n=D4(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function F4(e){this._context=new B4(e)}(F4.prototype=Object.create(wp.prototype)).point=function(e,t){wp.prototype.point.call(this,t,e)};function B4(e){this._context=e}B4.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,o,a){this._context.bezierCurveTo(t,e,r,n,a,o)}};function Qse(e){return new wp(e)}function Jse(e){return new F4(e)}function $4(e){this._context=e}$4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=z4(e),o=z4(t),a=0,i=1;i<n;++a,++i)this._context.bezierCurveTo(r[0][a],o[0][a],r[1][a],o[1][a],e[i],t[i]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function z4(e){var t,n=e.length-1,r,o=new Array(n),a=new Array(n),i=new Array(n);for(o[0]=0,a[0]=2,i[0]=e[0]+2*e[1],t=1;t<n-1;++t)o[t]=1,a[t]=4,i[t]=4*e[t]+2*e[t+1];for(o[n-1]=2,a[n-1]=7,i[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=o[t]/a[t-1],a[t]-=r,i[t]-=r*i[t-1];for(o[n-1]=i[n-1]/a[n-1],t=n-2;t>=0;--t)o[t]=(i[t]-o[t+1])/a[t];for(a[n-1]=(e[n]+o[n-1])/2,t=0;t<n-1;++t)a[t]=2*e[t+1]-o[t+1];return[o,a]}function Gse(e){return new $4(e)}function _p(e,t){this._context=e,this._t=t}_p.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function Zse(e){return new _p(e,.5)}function ece(e){return new _p(e,0)}function tce(e){return new _p(e,1)}function ms(e,t){if((i=e.length)>1)for(var n=1,r,o,a=e[t[0]],i,s=a.length;n<i;++n)for(o=a,a=e[t[n]],r=0;r<s;++r)a[r][1]+=a[r][0]=isNaN(o[r][1])?o[r][0]:o[r][1]}function i1(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function nce(e,t){return e[t]}function rce(e){const t=[];return t.key=e,t}function oce(){var e=bt([]),t=i1,n=ms,r=nce;function o(a){var i=Array.from(e.apply(this,arguments),rce),s,c=i.length,l=-1,u;for(const d of a)for(s=0,++l;s<c;++s)(i[s][l]=[0,+r(d,i[s].key,l,a)]).data=d;for(s=0,u=t1(t(i));s<c;++s)i[u[s]].index=s;return n(i,u),i}return o.keys=function(a){return arguments.length?(e=typeof a=="function"?a:bt(Array.from(a)),o):e},o.value=function(a){return arguments.length?(r=typeof a=="function"?a:bt(+a),o):r},o.order=function(a){return arguments.length?(t=a==null?i1:typeof a=="function"?a:bt(Array.from(a)),o):t},o.offset=function(a){return arguments.length?(n=a??ms,o):n},o}function ace(e,t){if((r=e.length)>0){for(var n,r,o=0,a=e[0].length,i;o<a;++o){for(i=n=0;n<r;++n)i+=e[n][o][1]||0;if(i)for(n=0;n<r;++n)e[n][o][1]/=i}ms(e,t)}}function ice(e,t){if((o=e.length)>0){for(var n=0,r=e[t[0]],o,a=r.length;n<a;++n){for(var i=0,s=0;i<o;++i)s+=e[i][n][1]||0;r[n][1]+=r[n][0]=-s/2}ms(e,t)}}function sce(e,t){if(!(!((i=e.length)>0)||!((a=(o=e[t[0]]).length)>0))){for(var n=0,r=1,o,a,i;r<a;++r){for(var s=0,c=0,l=0;s<i;++s){for(var u=e[t[s]],d=u[r][1]||0,f=u[r-1][1]||0,p=(d-f)/2,y=0;y<s;++y){var m=e[t[y]],v=m[r][1]||0,b=m[r-1][1]||0;p+=v-b}c+=d,l+=p*d}o[r-1][1]+=o[r-1][0]=n,c&&(n-=l/c)}o[r-1][1]+=o[r-1][0]=n,ms(e,t)}}function Il(e){"@babel/helpers - typeof";return Il=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Il(e)}var cce=["type","size","sizeType"];function s1(){return s1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s1.apply(this,arguments)}function V4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function U4(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?V4(Object(n),!0).forEach(function(r){lce(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V4(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function lce(e,t,n){return t=uce(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function uce(e){var t=dce(e,"string");return Il(t)=="symbol"?t:t+""}function dce(e,t){if(Il(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Il(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fce(e,t){if(e==null)return{};var n=pce(e,t),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function pce(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var H4={symbolCircle:n1,symbolCross:Rse,symbolDiamond:Dse,symbolSquare:Lse,symbolStar:zse,symbolTriangle:Vse,symbolWye:Hse},hce=Math.PI/180,mce=function(e){var t="symbol".concat(pp(e));return H4[t]||n1},yce=function(e,t,n){if(t==="area")return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var r=18*hce;return 1.25*e*e*(Math.tan(r)-Math.tan(r*2)*Math.pow(Math.tan(r),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},gce=function(e,t){H4["symbol".concat(pp(e))]=t},c1=function(e){var t=e.type,n=t===void 0?"circle":t,r=e.size,o=r===void 0?64:r,a=e.sizeType,i=a===void 0?"area":a,s=fce(e,cce),c=U4(U4({},s),{},{type:n,size:o,sizeType:i}),l=function(){var y=mce(n),m=Wse().type(y).size(yce(o,i,n));return m()},u=c.className,d=c.cx,f=c.cy,p=ot(c,!0);return d===+d&&f===+f&&o===+o?V.createElement("path",s1({},p,{className:lt("recharts-symbols",u),transform:"translate(".concat(d,", ").concat(f,")"),d:l()})):null};c1.registerSymbol=gce;function ys(e){"@babel/helpers - typeof";return ys=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ys(e)}function l1(){return l1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l1.apply(this,arguments)}function W4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function vce(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?W4(Object(n),!0).forEach(function(r){Dl(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W4(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function bce(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xce(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Y4(r.key),r)}}function wce(e,t,n){return t&&xce(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function _ce(e,t,n){return t=jp(t),jce(e,q4()?Reflect.construct(t,n||[],jp(e).constructor):t.apply(e,n))}function jce(e,t){if(t&&(ys(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ece(e)}function Ece(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function q4(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(q4=function(){return!!e})()}function jp(e){return jp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},jp(e)}function Sce(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u1(e,t)}function u1(e,t){return u1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},u1(e,t)}function Dl(e,t,n){return t=Y4(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Y4(e){var t=Cce(e,"string");return ys(t)=="symbol"?t:t+""}function Cce(e,t){if(ys(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(ys(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Qn=32,d1=function(e){function t(){return bce(this,t),_ce(this,t,arguments)}return Sce(t,e),wce(t,[{key:"renderIcon",value:function(n){var r=this.props.inactiveColor,o=Qn/2,a=Qn/6,i=Qn/3,s=n.inactive?r:n.color;if(n.type==="plainline")return V.createElement("line",{strokeWidth:4,fill:"none",stroke:s,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:o,x2:Qn,y2:o,className:"recharts-legend-icon"});if(n.type==="line")return V.createElement("path",{strokeWidth:4,fill:"none",stroke:s,d:"M0,".concat(o,"h").concat(i,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(2*i,",").concat(o,`
            H`).concat(Qn,"M").concat(2*i,",").concat(o,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(i,",").concat(o),className:"recharts-legend-icon"});if(n.type==="rect")return V.createElement("path",{stroke:"none",fill:s,d:"M0,".concat(Qn/8,"h").concat(Qn,"v").concat(Qn*3/4,"h").concat(-Qn,"z"),className:"recharts-legend-icon"});if(V.isValidElement(n.legendIcon)){var c=vce({},n);return delete c.legendIcon,V.cloneElement(n.legendIcon,c)}return V.createElement(c1,{fill:s,cx:o,cy:o,size:Qn,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,r=this.props,o=r.payload,a=r.iconSize,i=r.layout,s=r.formatter,c=r.inactiveColor,l={x:0,y:0,width:Qn,height:Qn},u={display:i==="horizontal"?"inline-block":"block",marginRight:10},d={display:"inline-block",verticalAlign:"middle",marginRight:4};return o.map(function(f,p){var y=f.formatter||s,m=lt(Dl(Dl({"recharts-legend-item":!0},"legend-item-".concat(p),!0),"inactive",f.inactive));if(f.type==="none")return null;var v=We(f.value)?null:f.value;Oo(!We(f.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var b=f.inactive?c:f.color;return V.createElement("li",l1({className:m,style:u,key:"legend-item-".concat(p)},fp(n.props,f,p)),V.createElement(Uw,{width:a,height:a,viewBox:l,style:d},n.renderIcon(f)),V.createElement("span",{className:"recharts-legend-item-text",style:{color:b}},y?y(v,f,p):v))})}},{key:"render",value:function(){var n=this.props,r=n.payload,o=n.layout,a=n.align;if(!r||!r.length)return null;var i={padding:0,margin:0,textAlign:o==="horizontal"?a:"left"};return V.createElement("ul",{className:"recharts-default-legend",style:i},this.renderItems())}}])}(g.PureComponent);Dl(d1,"displayName","Legend"),Dl(d1,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var f1,K4;function X4(){if(K4)return f1;K4=1;function e(t,n,r,o){for(var a=t.length,i=r+(o?1:-1);o?i--:++i<a;)if(n(t[i],i,t))return i;return-1}return f1=e,f1}var p1,Q4;function Oce(){if(Q4)return p1;Q4=1;function e(t){return t!==t}return p1=e,p1}var h1,J4;function Nce(){if(J4)return h1;J4=1;function e(t,n,r){for(var o=r-1,a=t.length;++o<a;)if(t[o]===n)return o;return-1}return h1=e,h1}var m1,G4;function Mce(){if(G4)return m1;G4=1;var e=X4(),t=Oce(),n=Nce();function r(o,a,i){return a===a?n(o,a,i):e(o,t,i)}return m1=r,m1}var y1,Z4;function kce(){if(Z4)return y1;Z4=1;var e=Mce();function t(n,r){var o=n==null?0:n.length;return!!o&&e(n,r,0)>-1}return y1=t,y1}var g1,eL;function Pce(){if(eL)return g1;eL=1;function e(t,n,r){for(var o=-1,a=t==null?0:t.length;++o<a;)if(r(n,t[o]))return!0;return!1}return g1=e,g1}var v1,tL;function Ace(){if(tL)return v1;tL=1;function e(){}return v1=e,v1}var b1,nL;function Tce(){if(nL)return b1;nL=1;var e=ZP(),t=Ace(),n=zv(),r=1/0,o=e&&1/n(new e([,-0]))[1]==r?function(a){return new e(a)}:t;return b1=o,b1}var x1,rL;function Rce(){if(rL)return x1;rL=1;var e=cP(),t=kce(),n=Pce(),r=fP(),o=Tce(),a=zv(),i=200;function s(c,l,u){var d=-1,f=t,p=c.length,y=!0,m=[],v=m;if(u)y=!1,f=n;else if(p>=i){var b=l?null:o(c);if(b)return a(b);y=!1,f=r,v=new e}else v=l?[]:m;e:for(;++d<p;){var x=c[d],_=l?l(x):x;if(x=u||x!==0?x:0,y&&_===_){for(var w=v.length;w--;)if(v[w]===_)continue e;l&&v.push(_),m.push(x)}else f(v,_,u)||(v!==m&&v.push(_),m.push(x))}return m}return x1=s,x1}var w1,oL;function Ice(){if(oL)return w1;oL=1;var e=Tr(),t=Rce();function n(r,o){return r&&r.length?t(r,e(o,2)):[]}return w1=n,w1}var Dce=Ice();const aL=Xe(Dce);function iL(e,t,n){return t===!0?aL(e,n):We(t)?aL(e,t):e}function gs(e){"@babel/helpers - typeof";return gs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gs(e)}var Lce=["ref"];function sL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function No(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?sL(Object(n),!0).forEach(function(r){Sp(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sL(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Fce(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cL(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,uL(r.key),r)}}function Bce(e,t,n){return t&&cL(e.prototype,t),n&&cL(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function $ce(e,t,n){return t=Ep(t),zce(e,lL()?Reflect.construct(t,n||[],Ep(e).constructor):t.apply(e,n))}function zce(e,t){if(t&&(gs(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Vce(e)}function Vce(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(lL=function(){return!!e})()}function Ep(e){return Ep=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ep(e)}function Uce(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_1(e,t)}function _1(e,t){return _1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},_1(e,t)}function Sp(e,t,n){return t=uL(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function uL(e){var t=Hce(e,"string");return gs(t)=="symbol"?t:t+""}function Hce(e,t){if(gs(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(gs(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Wce(e,t){if(e==null)return{};var n=qce(e,t),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function qce(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Yce(e){return e.value}function Kce(e,t){if(V.isValidElement(e))return V.cloneElement(e,t);if(typeof e=="function")return V.createElement(e,t);t.ref;var n=Wce(t,Lce);return V.createElement(d1,n)}var dL=1,vs=function(e){function t(){var n;Fce(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return n=$ce(this,t,[].concat(o)),Sp(n,"lastBoundingBox",{width:-1,height:-1}),n}return Uce(t,e),Bce(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,r=this.getBBox();r?(Math.abs(r.width-this.lastBoundingBox.width)>dL||Math.abs(r.height-this.lastBoundingBox.height)>dL)&&(this.lastBoundingBox.width=r.width,this.lastBoundingBox.height=r.height,n&&n(r)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?No({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var r=this.props,o=r.layout,a=r.align,i=r.verticalAlign,s=r.margin,c=r.chartWidth,l=r.chartHeight,u,d;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(a==="center"&&o==="vertical"){var f=this.getBBoxSnapshot();u={left:((c||0)-f.width)/2}}else u=a==="right"?{right:s&&s.right||0}:{left:s&&s.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(i==="middle"){var p=this.getBBoxSnapshot();d={top:((l||0)-p.height)/2}}else d=i==="bottom"?{bottom:s&&s.bottom||0}:{top:s&&s.top||0};return No(No({},u),d)}},{key:"render",value:function(){var n=this,r=this.props,o=r.content,a=r.width,i=r.height,s=r.wrapperStyle,c=r.payloadUniqBy,l=r.payload,u=No(No({position:"absolute",width:a||"auto",height:i||"auto"},this.getDefaultPosition(s)),s);return V.createElement("div",{className:"recharts-legend-wrapper",style:u,ref:function(d){n.wrapperNode=d}},Kce(o,No(No({},this.props),{},{payload:iL(l,c,Yce)})))}}],[{key:"getWithHeight",value:function(n,r){var o=No(No({},this.defaultProps),n.props),a=o.layout;return a==="vertical"&&me(n.props.height)?{height:n.props.height}:a==="horizontal"?{width:n.props.width||r}:null}}])}(g.PureComponent);Sp(vs,"displayName","Legend"),Sp(vs,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var j1,fL;function Xce(){if(fL)return j1;fL=1;var e=hi(),t=zu(),n=un(),r=e?e.isConcatSpreadable:void 0;function o(a){return n(a)||t(a)||!!(r&&a&&a[r])}return j1=o,j1}var E1,pL;Yh=function(){if(pL)return E1;pL=1;var e=Hv(),t=Xce();function n(r,o,a,i,s){var c=-1,l=r.length;for(a||(a=t),s||(s=[]);++c<l;){var u=r[c];o>0&&a(u)?o>1?n(u,o-1,a,i,s):e(s,u):i||(s[s.length]=u)}return s}return E1=n,E1};var S1,hL;function Qce(){if(hL)return S1;hL=1;function e(t){return function(n,r,o){for(var a=-1,i=Object(n),s=o(n),c=s.length;c--;){var l=s[t?c:++a];if(r(i[l],l,i)===!1)break}return n}}return S1=e,S1}var C1,mL;AE=function(){if(mL)return C1;mL=1;var e=Qce(),t=e();return C1=t,C1};var O1,yL;function gL(){if(yL)return O1;yL=1;var e=AE(),t=ac();function n(r,o){return r&&e(r,o,t)}return O1=n,O1}var N1,vL;function Jce(){if(vL)return N1;vL=1;var e=ga();function t(n,r){return function(o,a){if(o==null)return o;if(!e(o))return n(o,a);for(var i=o.length,s=r?i:-1,c=Object(o);(r?s--:++s<i)&&a(c[s],s,c)!==!1;);return o}}return N1=t,N1}var M1,bL;function k1(){if(bL)return M1;bL=1;var e=gL(),t=Jce(),n=t(e);return M1=n,M1}var P1,xL;function wL(){if(xL)return P1;xL=1;var e=k1(),t=ga();function n(r,o){var a=-1,i=t(r)?Array(r.length):[];return e(r,function(s,c,l){i[++a]=o(s,c,l)}),i}return P1=n,P1}var A1,_L;function Gce(){if(_L)return A1;_L=1;function e(t,n){var r=t.length;for(t.sort(n);r--;)t[r]=t[r].value;return t}return A1=e,A1}var T1,jL;function Zce(){if(jL)return T1;jL=1;var e=Bi();function t(n,r){if(n!==r){var o=n!==void 0,a=n===null,i=n===n,s=e(n),c=r!==void 0,l=r===null,u=r===r,d=e(r);if(!l&&!d&&!s&&n>r||s&&c&&u&&!l&&!d||a&&c&&u||!o&&u||!i)return 1;if(!a&&!s&&!d&&n<r||d&&o&&i&&!a&&!s||l&&o&&i||!c&&i||!u)return-1}return 0}return T1=t,T1}var R1,EL;function ele(){if(EL)return R1;EL=1;var e=Zce();function t(n,r,o){for(var a=-1,i=n.criteria,s=r.criteria,c=i.length,l=o.length;++a<c;){var u=e(i[a],s[a]);if(u){if(a>=l)return u;var d=o[a];return u*(d=="desc"?-1:1)}}return n.index-r.index}return R1=t,R1}var I1,SL;function tle(){if(SL)return I1;SL=1;var e=Zs(),t=cc(),n=Tr(),r=wL(),o=Gce(),a=Wm(),i=ele(),s=$i(),c=un();function l(u,d,f){d.length?d=e(d,function(m){return c(m)?function(v){return t(v,m.length===1?m[0]:m)}:m}):d=[s];var p=-1;d=e(d,a(n));var y=r(u,function(m,v,b){var x=e(d,function(_){return _(m)});return{criteria:x,index:++p,value:m}});return o(y,function(m,v){return i(m,v,f)})}return I1=l,I1}var D1,CL;$E=function(){if(CL)return D1;CL=1;function e(t,n,r){switch(r.length){case 0:return t.call(n);case 1:return t.call(n,r[0]);case 2:return t.call(n,r[0],r[1]);case 3:return t.call(n,r[0],r[1],r[2])}return t.apply(n,r)}return D1=e,D1};var L1,OL;PE=function(){if(OL)return L1;OL=1;var e=$E(),t=Math.max;function n(r,o,a){return o=t(o===void 0?r.length-1:o,0),function(){for(var i=arguments,s=-1,c=t(i.length-o,0),l=Array(c);++s<c;)l[s]=i[o+s];s=-1;for(var u=Array(o+1);++s<o;)u[s]=i[s];return u[o]=a(l),e(r,this,u)}}return L1=n,L1};var F1,NL;function nle(){if(NL)return F1;NL=1;function e(t){return function(){return t}}return F1=e,F1}var B1,ML;function rle(){if(ML)return B1;ML=1;var e=nle(),t=LA(),n=$i(),r=t?function(o,a){return t(o,"toString",{configurable:!0,enumerable:!1,value:e(a),writable:!0})}:n;return B1=r,B1}var $1,kL;function ole(){if(kL)return $1;kL=1;var e=800,t=16,n=Date.now;function r(o){var a=0,i=0;return function(){var s=n(),c=t-(s-i);if(i=s,c>0){if(++a>=e)return arguments[0]}else a=0;return o.apply(void 0,arguments)}}return $1=r,$1}var z1,PL;kE=function(){if(PL)return z1;PL=1;var e=rle(),t=ole(),n=t(e);return z1=n,z1};var V1,AL;TE=function(){if(AL)return V1;AL=1;var e=$i(),t=PE(),n=kE();function r(o,a){return n(t(o,a,e),o+"")}return V1=r,V1};var U1,TL;function ale(){if(TL)return U1;TL=1;var e=Yh(),t=tle(),n=TE(),r=ui(),o=n(function(a,i){if(a==null)return[];var s=i.length;return s>1&&r(a,i[0],i[1])?i=[]:s>2&&r(i[0],i[1],i[2])&&(i=[i[0]]),t(a,e(i,1),[])});return U1=o,U1}var ile=ale();const H1=Xe(ile);function Ll(e){"@babel/helpers - typeof";return Ll=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ll(e)}function W1(){return W1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},W1.apply(this,arguments)}function sle(e,t){return dle(e)||ule(e,t)||lle(e,t)||cle()}function cle(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lle(e,t){if(e){if(typeof e=="string")return RL(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return RL(e,t)}}function RL(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ule(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,o,a,i,s=[],c=!0,l=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(c=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(u){l=!0,o=u}finally{try{if(!c&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return s}}function dle(e){if(Array.isArray(e))return e}function IL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function q1(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?IL(Object(n),!0).forEach(function(r){fle(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):IL(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function fle(e,t,n){return t=ple(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ple(e){var t=hle(e,"string");return Ll(t)=="symbol"?t:t+""}function hle(e,t){if(Ll(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Ll(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function mle(e){return Array.isArray(e)&&zt(e[0])&&zt(e[1])?e.join(" ~ "):e}var yle=function(e){var t=e.separator,n=t===void 0?" : ":t,r=e.contentStyle,o=r===void 0?{}:r,a=e.itemStyle,i=a===void 0?{}:a,s=e.labelStyle,c=s===void 0?{}:s,l=e.payload,u=e.formatter,d=e.itemSorter,f=e.wrapperClassName,p=e.labelClassName,y=e.label,m=e.labelFormatter,v=e.accessibilityLayer,b=v===void 0?!1:v,x=function(){if(l&&l.length){var N={padding:0,margin:0},P=(d?H1(l,d):l).map(function(R,A){if(R.type==="none")return null;var C=q1({display:"block",paddingTop:4,paddingBottom:4,color:R.color||"#000"},i),M=R.formatter||u||mle,T=R.value,D=R.name,I=T,L=D;if(M&&I!=null&&L!=null){var B=M(T,D,R,A,l);if(Array.isArray(B)){var U=sle(B,2);I=U[0],L=U[1]}else I=B}return V.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(A),style:C},zt(L)?V.createElement("span",{className:"recharts-tooltip-item-name"},L):null,zt(L)?V.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,V.createElement("span",{className:"recharts-tooltip-item-value"},I),V.createElement("span",{className:"recharts-tooltip-item-unit"},R.unit||""))});return V.createElement("ul",{className:"recharts-tooltip-item-list",style:N},P)}return null},_=q1({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},o),w=q1({margin:0},c),j=!at(y),E=j?y:"",S=lt("recharts-default-tooltip",f),O=lt("recharts-tooltip-label",p);j&&m&&l!==void 0&&l!==null&&(E=m(y,l));var k=b?{role:"status","aria-live":"assertive"}:{};return V.createElement("div",W1({className:S,style:_},k),V.createElement("p",{className:O,style:w},V.isValidElement(E)?E:"".concat(E)),x())};function Fl(e){"@babel/helpers - typeof";return Fl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fl(e)}function Cp(e,t,n){return t=gle(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gle(e){var t=vle(e,"string");return Fl(t)=="symbol"?t:t+""}function vle(e,t){if(Fl(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Fl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Bl="recharts-tooltip-wrapper",ble={visibility:"hidden"};function xle(e){var t=e.coordinate,n=e.translateX,r=e.translateY;return lt(Bl,Cp(Cp(Cp(Cp({},"".concat(Bl,"-right"),me(n)&&t&&me(t.x)&&n>=t.x),"".concat(Bl,"-left"),me(n)&&t&&me(t.x)&&n<t.x),"".concat(Bl,"-bottom"),me(r)&&t&&me(t.y)&&r>=t.y),"".concat(Bl,"-top"),me(r)&&t&&me(t.y)&&r<t.y))}function DL(e){var t=e.allowEscapeViewBox,n=e.coordinate,r=e.key,o=e.offsetTopLeft,a=e.position,i=e.reverseDirection,s=e.tooltipDimension,c=e.viewBox,l=e.viewBoxDimension;if(a&&me(a[r]))return a[r];var u=n[r]-s-o,d=n[r]+o;if(t[r])return i[r]?u:d;if(i[r]){var f=u,p=c[r];return f<p?Math.max(d,c[r]):Math.max(u,c[r])}var y=d+s,m=c[r]+l;return y>m?Math.max(u,c[r]):Math.max(d,c[r])}function wle(e){var t=e.translateX,n=e.translateY,r=e.useTranslate3d;return{transform:r?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}function _le(e){var t=e.allowEscapeViewBox,n=e.coordinate,r=e.offsetTopLeft,o=e.position,a=e.reverseDirection,i=e.tooltipBox,s=e.useTranslate3d,c=e.viewBox,l,u,d;return i.height>0&&i.width>0&&n?(u=DL({allowEscapeViewBox:t,coordinate:n,key:"x",offsetTopLeft:r,position:o,reverseDirection:a,tooltipDimension:i.width,viewBox:c,viewBoxDimension:c.width}),d=DL({allowEscapeViewBox:t,coordinate:n,key:"y",offsetTopLeft:r,position:o,reverseDirection:a,tooltipDimension:i.height,viewBox:c,viewBoxDimension:c.height}),l=wle({translateX:u,translateY:d,useTranslate3d:s})):l=ble,{cssProperties:l,cssClasses:xle({translateX:u,translateY:d,coordinate:n})}}function bs(e){"@babel/helpers - typeof";return bs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bs(e)}function LL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function FL(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?LL(Object(n),!0).forEach(function(r){K1(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):LL(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function jle(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ele(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,$L(r.key),r)}}function Sle(e,t,n){return t&&Ele(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Cle(e,t,n){return t=Op(t),Ole(e,BL()?Reflect.construct(t,n||[],Op(e).constructor):t.apply(e,n))}function Ole(e,t){if(t&&(bs(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Nle(e)}function Nle(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function BL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(BL=function(){return!!e})()}function Op(e){return Op=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Op(e)}function Mle(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Y1(e,t)}function Y1(e,t){return Y1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Y1(e,t)}function K1(e,t,n){return t=$L(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $L(e){var t=kle(e,"string");return bs(t)=="symbol"?t:t+""}function kle(e,t){if(bs(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(bs(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var zL=1,Ple=function(e){function t(){var n;jle(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return n=Cle(this,t,[].concat(o)),K1(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),K1(n,"handleKeyDown",function(i){if(i.key==="Escape"){var s,c,l,u;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(s=(c=n.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&s!==void 0?s:0,y:(l=(u=n.props.coordinate)===null||u===void 0?void 0:u.y)!==null&&l!==void 0?l:0}})}}),n}return Mle(t,e),Sle(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>zL||Math.abs(n.height-this.state.lastBoundingBox.height)>zL)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,r;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,r=this.props,o=r.active,a=r.allowEscapeViewBox,i=r.animationDuration,s=r.animationEasing,c=r.children,l=r.coordinate,u=r.hasPayload,d=r.isAnimationActive,f=r.offset,p=r.position,y=r.reverseDirection,m=r.useTranslate3d,v=r.viewBox,b=r.wrapperStyle,x=_le({allowEscapeViewBox:a,coordinate:l,offsetTopLeft:f,position:p,reverseDirection:y,tooltipBox:this.state.lastBoundingBox,useTranslate3d:m,viewBox:v}),_=x.cssClasses,w=x.cssProperties,j=FL(FL({transition:d&&o?"transform ".concat(i,"ms ").concat(s):void 0},w),{},{pointerEvents:"none",visibility:!this.state.dismissed&&o&&u?"visible":"hidden",position:"absolute",top:0,left:0},b);return V.createElement("div",{tabIndex:-1,className:_,style:j,ref:function(E){n.wrapperNode=E}},c)}}])}(g.PureComponent),Ale=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},aa={isSsr:Ale(),get:function(e){return aa[e]},set:function(e,t){if(typeof e=="string")aa[e]=t;else{var n=Object.keys(e);n&&n.length&&n.forEach(function(r){aa[r]=e[r]})}}};function xs(e){"@babel/helpers - typeof";return xs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xs(e)}function VL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function UL(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?VL(Object(n),!0).forEach(function(r){Q1(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):VL(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Tle(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Rle(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,WL(r.key),r)}}function Ile(e,t,n){return t&&Rle(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Dle(e,t,n){return t=Np(t),Lle(e,HL()?Reflect.construct(t,n||[],Np(e).constructor):t.apply(e,n))}function Lle(e,t){if(t&&(xs(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Fle(e)}function Fle(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function HL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(HL=function(){return!!e})()}function Np(e){return Np=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Np(e)}function Ble(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&X1(e,t)}function X1(e,t){return X1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},X1(e,t)}function Q1(e,t,n){return t=WL(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function WL(e){var t=$le(e,"string");return xs(t)=="symbol"?t:t+""}function $le(e,t){if(xs(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(xs(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function zle(e){return e.dataKey}function Vle(e,t){return V.isValidElement(e)?V.cloneElement(e,t):typeof e=="function"?V.createElement(e,t):V.createElement(yle,t)}var $r=function(e){function t(){return Tle(this,t),Dle(this,t,arguments)}return Ble(t,e),Ile(t,[{key:"render",value:function(){var n=this,r=this.props,o=r.active,a=r.allowEscapeViewBox,i=r.animationDuration,s=r.animationEasing,c=r.content,l=r.coordinate,u=r.filterNull,d=r.isAnimationActive,f=r.offset,p=r.payload,y=r.payloadUniqBy,m=r.position,v=r.reverseDirection,b=r.useTranslate3d,x=r.viewBox,_=r.wrapperStyle,w=p??[];u&&w.length&&(w=iL(p.filter(function(E){return E.value!=null&&(E.hide!==!0||n.props.includeHidden)}),y,zle));var j=w.length>0;return V.createElement(Ple,{allowEscapeViewBox:a,animationDuration:i,animationEasing:s,isAnimationActive:d,active:o,coordinate:l,hasPayload:j,offset:f,position:m,reverseDirection:v,useTranslate3d:b,viewBox:x,wrapperStyle:_},Vle(c,UL(UL({},this.props),{},{payload:w})))}}])}(g.PureComponent);Q1($r,"displayName","Tooltip"),Q1($r,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!aa.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var J1,qL;function Ule(){if(qL)return J1;qL=1;var e=rr(),t=function(){return e.Date.now()};return J1=t,J1}var G1,YL;LE=function(){if(YL)return G1;YL=1;var e=or(),t=Ule(),n=a3(),r="Expected a function",o=Math.max,a=Math.min;function i(s,c,l){var u,d,f,p,y,m,v=0,b=!1,x=!1,_=!0;if(typeof s!="function")throw new TypeError(r);c=n(c)||0,e(l)&&(b=!!l.leading,x="maxWait"in l,f=x?o(n(l.maxWait)||0,c):f,_="trailing"in l?!!l.trailing:_);function w(A){var C=u,M=d;return u=d=void 0,v=A,p=s.apply(M,C),p}function j(A){return v=A,y=setTimeout(O,c),b?w(A):p}function E(A){var C=A-m,M=A-v,T=c-C;return x?a(T,f-M):T}function S(A){var C=A-m,M=A-v;return m===void 0||C>=c||C<0||x&&M>=f}function O(){var A=t();if(S(A))return k(A);y=setTimeout(O,E(A))}function k(A){return y=void 0,_&&u?w(A):(u=d=void 0,p)}function N(){y!==void 0&&clearTimeout(y),v=0,u=m=d=y=void 0}function P(){return y===void 0?p:k(t())}function R(){var A=t(),C=S(A);if(u=arguments,d=this,m=A,C){if(y===void 0)return j(m);if(x)return clearTimeout(y),y=setTimeout(O,c),w(m)}return y===void 0&&(y=setTimeout(O,c)),p}return R.cancel=N,R.flush=P,R}return G1=i,G1};var Z1,KL;function Hle(){if(KL)return Z1;KL=1;var e=LE(),t=or(),n="Expected a function";function r(o,a,i){var s=!0,c=!0;if(typeof o!="function")throw new TypeError(n);return t(i)&&(s="leading"in i?!!i.leading:s,c="trailing"in i?!!i.trailing:c),e(o,a,{leading:s,maxWait:a,trailing:c})}return Z1=r,Z1}var Wle=Hle();Qh=Xe(Wle);function $l(e){"@babel/helpers - typeof";return $l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$l(e)}function XL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Mp(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?XL(Object(n),!0).forEach(function(r){qle(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):XL(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function qle(e,t,n){return t=Yle(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Yle(e){var t=Kle(e,"string");return $l(t)=="symbol"?t:t+""}function Kle(e,t){if($l(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if($l(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Xle(e,t){return Zle(e)||Gle(e,t)||Jle(e,t)||Qle()}function Qle(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Jle(e,t){if(e){if(typeof e=="string")return QL(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return QL(e,t)}}function QL(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Gle(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,o,a,i,s=[],c=!0,l=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(c=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(u){l=!0,o=u}finally{try{if(!c&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return s}}function Zle(e){if(Array.isArray(e))return e}var eue=g.forwardRef(function(e,t){var n=e.aspect,r=e.initialDimension,o=r===void 0?{width:-1,height:-1}:r,a=e.width,i=a===void 0?"100%":a,s=e.height,c=s===void 0?"100%":s,l=e.minWidth,u=l===void 0?0:l,d=e.minHeight,f=e.maxHeight,p=e.children,y=e.debounce,m=y===void 0?0:y,v=e.id,b=e.className,x=e.onResize,_=e.style,w=_===void 0?{}:_,j=g.useRef(null),E=g.useRef();E.current=x,g.useImperativeHandle(t,function(){return Object.defineProperty(j.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),j.current},configurable:!0})});var S=g.useState({containerWidth:o.width,containerHeight:o.height}),O=Xle(S,2),k=O[0],N=O[1],P=g.useCallback(function(A,C){N(function(M){var T=Math.round(A),D=Math.round(C);return M.containerWidth===T&&M.containerHeight===D?M:{containerWidth:T,containerHeight:D}})},[]);g.useEffect(function(){var A=function(I){var L,B=I[0].contentRect,U=B.width,F=B.height;P(U,F),(L=E.current)===null||L===void 0||L.call(E,U,F)};m>0&&(A=Qh(A,m,{trailing:!0,leading:!1}));var C=new ResizeObserver(A),M=j.current.getBoundingClientRect(),T=M.width,D=M.height;return P(T,D),C.observe(j.current),function(){C.disconnect()}},[P,m]);var R=g.useMemo(function(){var A=k.containerWidth,C=k.containerHeight;if(A<0||C<0)return null;Oo(Ha(i)||Ha(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,i,c),Oo(!n||n>0,"The aspect(%s) must be greater than zero.",n);var M=Ha(i)?A:i,T=Ha(c)?C:c;n&&n>0&&(M?T=M/n:T&&(M=T*n),f&&T>f&&(T=f)),Oo(M>0||T>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,M,T,i,c,u,d,n);var D=!Array.isArray(p)&&Co(p.type).endsWith("Chart");return V.Children.map(p,function(I){return V.isValidElement(I)?g.cloneElement(I,Mp({width:M,height:T},D?{style:Mp({height:"100%",width:"100%",maxHeight:T,maxWidth:M},I.props.style)}:{})):I})},[n,p,c,f,d,u,k,i]);return V.createElement("div",{id:v?"".concat(v):void 0,className:lt("recharts-responsive-container",b),style:Mp(Mp({},w),{},{width:i,height:c,minWidth:u,minHeight:d,maxHeight:f}),ref:j},R)}),JL=function(e){return null};JL.displayName="Cell";function zl(e){"@babel/helpers - typeof";return zl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zl(e)}function GL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function e_(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?GL(Object(n),!0).forEach(function(r){tue(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):GL(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function tue(e,t,n){return t=nue(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nue(e){var t=rue(e,"string");return zl(t)=="symbol"?t:t+""}function rue(e,t){if(zl(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(zl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ws={widthCache:{},cacheCount:0},oue=2e3,aue={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},ZL="recharts_measurement_span";function iue(e){var t=e_({},e);return Object.keys(t).forEach(function(n){t[n]||delete t[n]}),t}var Vl=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||aa.isSsr)return{width:0,height:0};var n=iue(t),r=JSON.stringify({text:e,copyStyle:n});if(ws.widthCache[r])return ws.widthCache[r];try{var o=document.getElementById(ZL);o||(o=document.createElement("span"),o.setAttribute("id",ZL),o.setAttribute("aria-hidden","true"),document.body.appendChild(o));var a=e_(e_({},aue),n);Object.assign(o.style,a),o.textContent="".concat(e);var i=o.getBoundingClientRect(),s={width:i.width,height:i.height};return ws.widthCache[r]=s,++ws.cacheCount>oue&&(ws.cacheCount=0,ws.widthCache={}),s}catch{return{width:0,height:0}}},sue=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function Ul(e){"@babel/helpers - typeof";return Ul=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ul(e)}function kp(e,t){return due(e)||uue(e,t)||lue(e,t)||cue()}function cue(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lue(e,t){if(e){if(typeof e=="string")return eF(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return eF(e,t)}}function eF(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function uue(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,o,a,i,s=[],c=!0,l=!1;try{if(a=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(u){l=!0,o=u}finally{try{if(!c&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return s}}function due(e){if(Array.isArray(e))return e}function fue(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tF(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,hue(r.key),r)}}function pue(e,t,n){return t&&tF(e.prototype,t),n&&tF(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function hue(e){var t=mue(e,"string");return Ul(t)=="symbol"?t:t+""}function mue(e,t){if(Ul(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Ul(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var nF=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,rF=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,yue=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,gue=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,oF={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},vue=Object.keys(oF),_s="NaN";function bue(e,t){return e*oF[t]}var Pp=function(){function e(t,n){fue(this,e),this.num=t,this.unit=n,this.num=t,this.unit=n,Number.isNaN(t)&&(this.unit=""),n!==""&&!yue.test(n)&&(this.num=NaN,this.unit=""),vue.includes(n)&&(this.num=bue(t,n),this.unit="px")}return pue(e,[{key:"add",value:function(t){return this.unit!==t.unit?new e(NaN,""):new e(this.num+t.num,this.unit)}},{key:"subtract",value:function(t){return this.unit!==t.unit?new e(NaN,""):new e(this.num-t.num,this.unit)}},{key:"multiply",value:function(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new e(NaN,""):new e(this.num*t.num,this.unit||t.unit)}},{key:"divide",value:function(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new e(NaN,""):new e(this.num/t.num,this.unit||t.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(t){var n,r=(n=gue.exec(t))!==null&&n!==void 0?n:[],o=kp(r,3),a=o[1],i=o[2];return new e(parseFloat(a),i??"")}}])}();function aF(e){if(e.includes(_s))return _s;for(var t=e;t.includes("*")||t.includes("/");){var n,r=(n=nF.exec(t))!==null&&n!==void 0?n:[],o=kp(r,4),a=o[1],i=o[2],s=o[3],c=Pp.parse(a??""),l=Pp.parse(s??""),u=i==="*"?c.multiply(l):c.divide(l);if(u.isNaN())return _s;t=t.replace(nF,u.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var d,f=(d=rF.exec(t))!==null&&d!==void 0?d:[],p=kp(f,4),y=p[1],m=p[2],v=p[3],b=Pp.parse(y??""),x=Pp.parse(v??""),_=m==="+"?b.add(x):b.subtract(x);if(_.isNaN())return _s;t=t.replace(rF,_.toString())}return t}var iF=/\(([^()]*)\)/;function xue(e){for(var t=e;t.includes("(");){var n=iF.exec(t),r=kp(n,2),o=r[1];t=t.replace(iF,aF(o))}return t}function wue(e){var t=e.replace(/\s+/g,"");return t=xue(t),t=aF(t),t}function _ue(e){try{return wue(e)}catch{return _s}}function t_(e){var t=_ue(e.slice(5,-1));return t===_s?"":t}var jue=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Eue=["dx","dy","angle","className","breakAll"];function n_(){return n_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},n_.apply(this,arguments)}function sF(e,t){if(e==null)return{};var n=Sue(e,t),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Sue(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function cF(e,t){return Mue(e)||Nue(e,t)||Oue(e,t)||Cue()}function Cue(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Oue(e,t){if(e){if(typeof e=="string")return lF(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lF(e,t)}}function lF(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Nue(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,o,a,i,s=[],c=!0,l=!1;try{if(a=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(u){l=!0,o=u}finally{try{if(!c&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return s}}function Mue(e){if(Array.isArray(e))return e}var uF=/[ \f\n\r\t\v\u2028\u2029]+/,dF=function(e){var t=e.children,n=e.breakAll,r=e.style;try{var o=[];at(t)||(n?o=t.toString().split(""):o=t.toString().split(uF));var a=o.map(function(s){return{word:s,width:Vl(s,r).width}}),i=n?0:Vl("\xA0",r).width;return{wordsWithComputedWidth:a,spaceWidth:i}}catch{return null}},kue=function(e,t,n,r,o){var a=e.maxLines,i=e.children,s=e.style,c=e.breakAll,l=me(a),u=i,d=function(){var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return A.reduce(function(C,M){var T=M.word,D=M.width,I=C[C.length-1];if(I&&(r==null||o||I.width+D+n<Number(r)))I.words.push(T),I.width+=D+n;else{var L={words:[T],width:D};C.push(L)}return C},[])},f=d(t),p=function(A){return A.reduce(function(C,M){return C.width>M.width?C:M})};if(!l)return f;for(var y="\u2026",m=function(A){var C=u.slice(0,A),M=dF({breakAll:c,style:s,children:C+y}).wordsWithComputedWidth,T=d(M),D=T.length>a||p(T).width>Number(r);return[D,T]},v=0,b=u.length-1,x=0,_;v<=b&&x<=u.length-1;){var w=Math.floor((v+b)/2),j=w-1,E=m(j),S=cF(E,2),O=S[0],k=S[1],N=m(w),P=cF(N,1),R=P[0];if(!O&&!R&&(v=w+1),O&&R&&(b=w-1),!O&&R){_=k;break}x++}return _||f},fF=function(e){var t=at(e)?[]:e.toString().split(uF);return[{words:t}]},Pue=function(e){var t=e.width,n=e.scaleToFit,r=e.children,o=e.style,a=e.breakAll,i=e.maxLines;if((t||n)&&!aa.isSsr){var s,c,l=dF({breakAll:a,children:r,style:o});if(l){var u=l.wordsWithComputedWidth,d=l.spaceWidth;s=u,c=d}else return fF(r);return kue({breakAll:a,children:r,maxLines:i,style:o},s,c,t,n)}return fF(r)},pF="#808080",Ap=function(e){var t=e.x,n=t===void 0?0:t,r=e.y,o=r===void 0?0:r,a=e.lineHeight,i=a===void 0?"1em":a,s=e.capHeight,c=s===void 0?"0.71em":s,l=e.scaleToFit,u=l===void 0?!1:l,d=e.textAnchor,f=d===void 0?"start":d,p=e.verticalAnchor,y=p===void 0?"end":p,m=e.fill,v=m===void 0?pF:m,b=sF(e,jue),x=g.useMemo(function(){return Pue({breakAll:b.breakAll,children:b.children,maxLines:b.maxLines,scaleToFit:u,style:b.style,width:b.width})},[b.breakAll,b.children,b.maxLines,u,b.style,b.width]),_=b.dx,w=b.dy,j=b.angle,E=b.className,S=b.breakAll,O=sF(b,Eue);if(!zt(n)||!zt(o))return null;var k=n+(me(_)?_:0),N=o+(me(w)?w:0),P;switch(y){case"start":P=t_("calc(".concat(c,")"));break;case"middle":P=t_("calc(".concat((x.length-1)/2," * -").concat(i," + (").concat(c," / 2))"));break;default:P=t_("calc(".concat(x.length-1," * -").concat(i,")"));break}var R=[];if(u){var A=x[0].width,C=b.width;R.push("scale(".concat((me(C)?C/A:1)/A,")"))}return j&&R.push("rotate(".concat(j,", ").concat(k,", ").concat(N,")")),R.length&&(O.transform=R.join(" ")),V.createElement("text",n_({},ot(O,!0),{x:k,y:N,className:lt("recharts-text",E),textAnchor:f,fill:v.includes("url")?pF:v}),x.map(function(M,T){var D=M.words.join(S?"":" ");return V.createElement("tspan",{x:k,dy:T===0?P:i,key:"".concat(D,"-").concat(T)},D)}))};function ia(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Aue(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function r_(e){let t,n,r;e.length!==2?(t=ia,n=(s,c)=>ia(e(s),c),r=(s,c)=>e(s)-c):(t=e===ia||e===Aue?e:Tue,n=e,r=e);function o(s,c,l=0,u=s.length){if(l<u){if(t(c,c)!==0)return u;do{const d=l+u>>>1;n(s[d],c)<0?l=d+1:u=d}while(l<u)}return l}function a(s,c,l=0,u=s.length){if(l<u){if(t(c,c)!==0)return u;do{const d=l+u>>>1;n(s[d],c)<=0?l=d+1:u=d}while(l<u)}return l}function i(s,c,l=0,u=s.length){const d=o(s,c,l,u-1);return d>l&&r(s[d-1],c)>-r(s[d],c)?d-1:d}return{left:o,center:i,right:a}}function Tue(){return 0}function hF(e){return e===null?NaN:+e}function*Rue(e,t){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const Iue=r_(ia),Hl=Iue.right;r_(hF).center;class mF extends Map{constructor(t,n=Fue){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,o]of t)this.set(r,o)}get(t){return super.get(yF(this,t))}has(t){return super.has(yF(this,t))}set(t,n){return super.set(Due(this,t),n)}delete(t){return super.delete(Lue(this,t))}}function yF({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function Due({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function Lue({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function Fue(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Bue(e=ia){if(e===ia)return gF;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function gF(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const $ue=Math.sqrt(50),zue=Math.sqrt(10),Vue=Math.sqrt(2);function Tp(e,t,n){const r=(t-e)/Math.max(0,n),o=Math.floor(Math.log10(r)),a=r/Math.pow(10,o),i=a>=$ue?10:a>=zue?5:a>=Vue?2:1;let s,c,l;return o<0?(l=Math.pow(10,-o)/i,s=Math.round(e*l),c=Math.round(t*l),s/l<e&&++s,c/l>t&&--c,l=-l):(l=Math.pow(10,o)*i,s=Math.round(e/l),c=Math.round(t/l),s*l<e&&++s,c*l>t&&--c),c<s&&.5<=n&&n<2?Tp(e,t,n*2):[s,c,l]}function o_(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[o,a,i]=r?Tp(t,e,n):Tp(e,t,n);if(!(a>=o))return[];const s=a-o+1,c=new Array(s);if(r)if(i<0)for(let l=0;l<s;++l)c[l]=(a-l)/-i;else for(let l=0;l<s;++l)c[l]=(a-l)*i;else if(i<0)for(let l=0;l<s;++l)c[l]=(o+l)/-i;else for(let l=0;l<s;++l)c[l]=(o+l)*i;return c}function a_(e,t,n){return t=+t,e=+e,n=+n,Tp(e,t,n)[2]}function i_(e,t,n){t=+t,e=+e,n=+n;const r=t<e,o=r?a_(t,e,n):a_(e,t,n);return(r?-1:1)*(o<0?1/-o:o)}function vF(e,t){let n;for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function bF(e,t){let n;for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function xF(e,t,n=0,r=1/0,o){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(o=o===void 0?gF:Bue(o);r>n;){if(r-n>600){const c=r-n+1,l=t-n+1,u=Math.log(c),d=.5*Math.exp(2*u/3),f=.5*Math.sqrt(u*d*(c-d)/c)*(l-c/2<0?-1:1),p=Math.max(n,Math.floor(t-l*d/c+f)),y=Math.min(r,Math.floor(t+(c-l)*d/c+f));xF(e,t,p,y,o)}const a=e[t];let i=n,s=r;for(Wl(e,n,t),o(e[r],a)>0&&Wl(e,n,r);i<s;){for(Wl(e,i,s),++i,--s;o(e[i],a)<0;)++i;for(;o(e[s],a)>0;)--s}o(e[n],a)===0?Wl(e,n,s):(++s,Wl(e,s,r)),s<=t&&(n=s+1),t<=s&&(r=s-1)}return e}function Wl(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function Uue(e,t,n){if(e=Float64Array.from(Rue(e)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return bF(e);if(t>=1)return vF(e);var r,o=(r-1)*t,a=Math.floor(o),i=vF(xF(e,a).subarray(0,a+1)),s=bF(e.subarray(a+1));return i+(s-i)*(o-a)}}function Hue(e,t,n=hF){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,o=(r-1)*t,a=Math.floor(o),i=+n(e[a],a,e),s=+n(e[a+1],a+1,e);return i+(s-i)*(o-a)}}function Wue(e,t,n){e=+e,t=+t,n=(o=arguments.length)<2?(t=e,e=0,1):o<3?1:+n;for(var r=-1,o=Math.max(0,Math.ceil((t-e)/n))|0,a=new Array(o);++r<o;)a[r]=e+r*n;return a}function Jn(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Mo(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const s_=Symbol("implicit");function c_(){var e=new mF,t=[],n=[],r=s_;function o(a){let i=e.get(a);if(i===void 0){if(r!==s_)return r;e.set(a,i=t.push(a)-1)}return n[i%n.length]}return o.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new mF;for(const i of a)e.has(i)||e.set(i,t.push(i)-1);return o},o.range=function(a){return arguments.length?(n=Array.from(a),o):n.slice()},o.unknown=function(a){return arguments.length?(r=a,o):r},o.copy=function(){return c_(t,n).unknown(r)},Jn.apply(o,arguments),o}function ql(){var e=c_().unknown(void 0),t=e.domain,n=e.range,r=0,o=1,a,i,s=!1,c=0,l=0,u=.5;delete e.unknown;function d(){var f=t().length,p=o<r,y=p?o:r,m=p?r:o;a=(m-y)/Math.max(1,f-c+l*2),s&&(a=Math.floor(a)),y+=(m-y-a*(f-c))*u,i=a*(1-c),s&&(y=Math.round(y),i=Math.round(i));var v=Wue(f).map(function(b){return y+a*b});return n(p?v.reverse():v)}return e.domain=function(f){return arguments.length?(t(f),d()):t()},e.range=function(f){return arguments.length?([r,o]=f,r=+r,o=+o,d()):[r,o]},e.rangeRound=function(f){return[r,o]=f,r=+r,o=+o,s=!0,d()},e.bandwidth=function(){return i},e.step=function(){return a},e.round=function(f){return arguments.length?(s=!!f,d()):s},e.padding=function(f){return arguments.length?(c=Math.min(1,l=+f),d()):c},e.paddingInner=function(f){return arguments.length?(c=Math.min(1,f),d()):c},e.paddingOuter=function(f){return arguments.length?(l=+f,d()):l},e.align=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),d()):u},e.copy=function(){return ql(t(),[r,o]).round(s).paddingInner(c).paddingOuter(l).align(u)},Jn.apply(d(),arguments)}function wF(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return wF(t())},e}function Yl(){return wF(ql.apply(null,arguments).paddingInner(1))}function que(e){return function(){return e}}function Rp(e){return+e}var _F=[0,1];function gn(e){return e}function l_(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:que(isNaN(t)?NaN:.5)}function Yue(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function Kue(e,t,n){var r=e[0],o=e[1],a=t[0],i=t[1];return o<r?(r=l_(o,r),a=n(i,a)):(r=l_(r,o),a=n(a,i)),function(s){return a(r(s))}}function Xue(e,t,n){var r=Math.min(e.length,t.length)-1,o=new Array(r),a=new Array(r),i=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++i<r;)o[i]=l_(e[i],e[i+1]),a[i]=n(t[i],t[i+1]);return function(s){var c=Hl(e,s,1,r)-1;return a[c](o[c](s))}}function Kl(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Ip(){var e=_F,t=_F,n=Hi,r,o,a,i=gn,s,c,l;function u(){var f=Math.min(e.length,t.length);return i!==gn&&(i=Yue(e[0],e[f-1])),s=f>2?Xue:Kue,c=l=null,d}function d(f){return f==null||isNaN(f=+f)?a:(c||(c=s(e.map(r),t,n)))(r(i(f)))}return d.invert=function(f){return i(o((l||(l=s(t,e.map(r),hr)))(f)))},d.domain=function(f){return arguments.length?(e=Array.from(f,Rp),u()):e.slice()},d.range=function(f){return arguments.length?(t=Array.from(f),u()):t.slice()},d.rangeRound=function(f){return t=Array.from(f),n=jb,u()},d.clamp=function(f){return arguments.length?(i=f?!0:gn,u()):i!==gn},d.interpolate=function(f){return arguments.length?(n=f,u()):n},d.unknown=function(f){return arguments.length?(a=f,d):a},function(f,p){return r=f,o=p,u()}}function u_(){return Ip()(gn,gn)}function Que(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Dp(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function js(e){return e=Dp(Math.abs(e)),e?e[1]:NaN}function Jue(e,t){return function(n,r){for(var o=n.length,a=[],i=0,s=e[0],c=0;o>0&&s>0&&(c+s+1>r&&(s=Math.max(1,r-c)),a.push(n.substring(o-=s,o+s)),!((c+=s+1)>r));)s=e[i=(i+1)%e.length];return a.reverse().join(t)}}function Gue(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var Zue=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Xl(e){if(!(t=Zue.exec(e)))throw new Error("invalid format: "+e);var t;return new d_({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Xl.prototype=d_.prototype;function d_(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}d_.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function ede(e){e:for(var t=e.length,n=1,r=-1,o;n<t;++n)switch(e[n]){case".":r=o=n;break;case"0":r===0&&(r=n),o=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(o+1):e}var jF;function tde(e,t){var n=Dp(e,t);if(!n)return e+"";var r=n[0],o=n[1],a=o-(jF=Math.max(-8,Math.min(8,Math.floor(o/3)))*3)+1,i=r.length;return a===i?r:a>i?r+new Array(a-i+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+Dp(e,Math.max(0,t+a-1))[0]}function EF(e,t){var n=Dp(e,t);if(!n)return e+"";var r=n[0],o=n[1];return o<0?"0."+new Array(-o).join("0")+r:r.length>o+1?r.slice(0,o+1)+"."+r.slice(o+1):r+new Array(o-r.length+2).join("0")}const SF={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Que,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>EF(e*100,t),r:EF,s:tde,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function CF(e){return e}var OF=Array.prototype.map,NF=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function nde(e){var t=e.grouping===void 0||e.thousands===void 0?CF:Jue(OF.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",o=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?CF:Gue(OF.call(e.numerals,String)),i=e.percent===void 0?"%":e.percent+"",s=e.minus===void 0?"\u2212":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function l(d){d=Xl(d);var f=d.fill,p=d.align,y=d.sign,m=d.symbol,v=d.zero,b=d.width,x=d.comma,_=d.precision,w=d.trim,j=d.type;j==="n"?(x=!0,j="g"):SF[j]||(_===void 0&&(_=12),w=!0,j="g"),(v||f==="0"&&p==="=")&&(v=!0,f="0",p="=");var E=m==="$"?n:m==="#"&&/[boxX]/.test(j)?"0"+j.toLowerCase():"",S=m==="$"?r:/[%p]/.test(j)?i:"",O=SF[j],k=/[defgprs%]/.test(j);_=_===void 0?6:/[gprs]/.test(j)?Math.max(1,Math.min(21,_)):Math.max(0,Math.min(20,_));function N(P){var R=E,A=S,C,M,T;if(j==="c")A=O(P)+A,P="";else{P=+P;var D=P<0||1/P<0;if(P=isNaN(P)?c:O(Math.abs(P),_),w&&(P=ede(P)),D&&+P==0&&y!=="+"&&(D=!1),R=(D?y==="("?y:s:y==="-"||y==="("?"":y)+R,A=(j==="s"?NF[8+jF/3]:"")+A+(D&&y==="("?")":""),k){for(C=-1,M=P.length;++C<M;)if(T=P.charCodeAt(C),48>T||T>57){A=(T===46?o+P.slice(C+1):P.slice(C))+A,P=P.slice(0,C);break}}}x&&!v&&(P=t(P,1/0));var I=R.length+P.length+A.length,L=I<b?new Array(b-I+1).join(f):"";switch(x&&v&&(P=t(L+P,L.length?b-A.length:1/0),L=""),p){case"<":P=R+P+A+L;break;case"=":P=R+L+P+A;break;case"^":P=L.slice(0,I=L.length>>1)+R+P+A+L.slice(I);break;default:P=L+R+P+A;break}return a(P)}return N.toString=function(){return d+""},N}function u(d,f){var p=l((d=Xl(d),d.type="f",d)),y=Math.max(-8,Math.min(8,Math.floor(js(f)/3)))*3,m=Math.pow(10,-y),v=NF[8+y/3];return function(b){return p(m*b)+v}}return{format:l,formatPrefix:u}}var Lp,f_,MF;rde({thousands:",",grouping:[3],currency:["$",""]});function rde(e){return Lp=nde(e),f_=Lp.format,MF=Lp.formatPrefix,Lp}function ode(e){return Math.max(0,-js(Math.abs(e)))}function ade(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(js(t)/3)))*3-js(Math.abs(e)))}function ide(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,js(t)-js(e))+1}function kF(e,t,n,r){var o=i_(e,t,n),a;switch(r=Xl(r??",f"),r.type){case"s":{var i=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(a=ade(o,i))&&(r.precision=a),MF(r,i)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=ide(o,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=ode(o))&&(r.precision=a-(r.type==="%")*2);break}}return f_(r)}function sa(e){var t=e.domain;return e.ticks=function(n){var r=t();return o_(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var o=t();return kF(o[0],o[o.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),o=0,a=r.length-1,i=r[o],s=r[a],c,l,u=10;for(s<i&&(l=i,i=s,s=l,l=o,o=a,a=l);u-- >0;){if(l=a_(i,s,n),l===c)return r[o]=i,r[a]=s,t(r);if(l>0)i=Math.floor(i/l)*l,s=Math.ceil(s/l)*l;else if(l<0)i=Math.ceil(i*l)/l,s=Math.floor(s*l)/l;else break;c=l}return e},e}function Fp(){var e=u_();return e.copy=function(){return Kl(e,Fp())},Jn.apply(e,arguments),sa(e)}function PF(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,Rp),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return PF(e).unknown(t)},e=arguments.length?Array.from(e,Rp):[0,1],sa(n)}function AF(e,t){e=e.slice();var n=0,r=e.length-1,o=e[n],a=e[r],i;return a<o&&(i=n,n=r,r=i,i=o,o=a,a=i),e[n]=t.floor(o),e[r]=t.ceil(a),e}function TF(e){return Math.log(e)}function RF(e){return Math.exp(e)}function sde(e){return-Math.log(-e)}function cde(e){return-Math.exp(-e)}function lde(e){return isFinite(e)?+("1e"+e):e<0?0:e}function ude(e){return e===10?lde:e===Math.E?Math.exp:t=>Math.pow(e,t)}function dde(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function IF(e){return(t,n)=>-e(-t,n)}function p_(e){const t=e(TF,RF),n=t.domain;let r=10,o,a;function i(){return o=dde(r),a=ude(r),n()[0]<0?(o=IF(o),a=IF(a),e(sde,cde)):e(TF,RF),t}return t.base=function(s){return arguments.length?(r=+s,i()):r},t.domain=function(s){return arguments.length?(n(s),i()):n()},t.ticks=s=>{const c=n();let l=c[0],u=c[c.length-1];const d=u<l;d&&([l,u]=[u,l]);let f=o(l),p=o(u),y,m;const v=s==null?10:+s;let b=[];if(!(r%1)&&p-f<v){if(f=Math.floor(f),p=Math.ceil(p),l>0){for(;f<=p;++f)for(y=1;y<r;++y)if(m=f<0?y/a(-f):y*a(f),!(m<l)){if(m>u)break;b.push(m)}}else for(;f<=p;++f)for(y=r-1;y>=1;--y)if(m=f>0?y/a(-f):y*a(f),!(m<l)){if(m>u)break;b.push(m)}b.length*2<v&&(b=o_(l,u,v))}else b=o_(f,p,Math.min(p-f,v)).map(a);return d?b.reverse():b},t.tickFormat=(s,c)=>{if(s==null&&(s=10),c==null&&(c=r===10?"s":","),typeof c!="function"&&(!(r%1)&&(c=Xl(c)).precision==null&&(c.trim=!0),c=f_(c)),s===1/0)return c;const l=Math.max(1,r*s/t.ticks().length);return u=>{let d=u/a(Math.round(o(u)));return d*r<r-.5&&(d*=r),d<=l?c(u):""}},t.nice=()=>n(AF(n(),{floor:s=>a(Math.floor(o(s))),ceil:s=>a(Math.ceil(o(s)))})),t}function DF(){const e=p_(Ip()).domain([1,10]);return e.copy=()=>Kl(e,DF()).base(e.base()),Jn.apply(e,arguments),e}function LF(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function FF(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function h_(e){var t=1,n=e(LF(t),FF(t));return n.constant=function(r){return arguments.length?e(LF(t=+r),FF(t)):t},sa(n)}function BF(){var e=h_(Ip());return e.copy=function(){return Kl(e,BF()).constant(e.constant())},Jn.apply(e,arguments)}function $F(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function fde(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function pde(e){return e<0?-e*e:e*e}function m_(e){var t=e(gn,gn),n=1;function r(){return n===1?e(gn,gn):n===.5?e(fde,pde):e($F(n),$F(1/n))}return t.exponent=function(o){return arguments.length?(n=+o,r()):n},sa(t)}function y_(){var e=m_(Ip());return e.copy=function(){return Kl(e,y_()).exponent(e.exponent())},Jn.apply(e,arguments),e}function hde(){return y_.apply(null,arguments).exponent(.5)}function zF(e){return Math.sign(e)*e*e}function mde(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function VF(){var e=u_(),t=[0,1],n=!1,r;function o(a){var i=mde(e(a));return isNaN(i)?r:n?Math.round(i):i}return o.invert=function(a){return e.invert(zF(a))},o.domain=function(a){return arguments.length?(e.domain(a),o):e.domain()},o.range=function(a){return arguments.length?(e.range((t=Array.from(a,Rp)).map(zF)),o):t.slice()},o.rangeRound=function(a){return o.range(a).round(!0)},o.round=function(a){return arguments.length?(n=!!a,o):n},o.clamp=function(a){return arguments.length?(e.clamp(a),o):e.clamp()},o.unknown=function(a){return arguments.length?(r=a,o):r},o.copy=function(){return VF(e.domain(),t).round(n).clamp(e.clamp()).unknown(r)},Jn.apply(o,arguments),sa(o)}function UF(){var e=[],t=[],n=[],r;function o(){var i=0,s=Math.max(1,t.length);for(n=new Array(s-1);++i<s;)n[i-1]=Hue(e,i/s);return a}function a(i){return i==null||isNaN(i=+i)?r:t[Hl(n,i)]}return a.invertExtent=function(i){var s=t.indexOf(i);return s<0?[NaN,NaN]:[s>0?n[s-1]:e[0],s<n.length?n[s]:e[e.length-1]]},a.domain=function(i){if(!arguments.length)return e.slice();e=[];for(let s of i)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(ia),o()},a.range=function(i){return arguments.length?(t=Array.from(i),o()):t.slice()},a.unknown=function(i){return arguments.length?(r=i,a):r},a.quantiles=function(){return n.slice()},a.copy=function(){return UF().domain(e).range(t).unknown(r)},Jn.apply(a,arguments)}function HF(){var e=0,t=1,n=1,r=[.5],o=[0,1],a;function i(c){return c!=null&&c<=c?o[Hl(r,c,0,n)]:a}function s(){var c=-1;for(r=new Array(n);++c<n;)r[c]=((c+1)*t-(c-n)*e)/(n+1);return i}return i.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,s()):[e,t]},i.range=function(c){return arguments.length?(n=(o=Array.from(c)).length-1,s()):o.slice()},i.invertExtent=function(c){var l=o.indexOf(c);return l<0?[NaN,NaN]:l<1?[e,r[0]]:l>=n?[r[n-1],t]:[r[l-1],r[l]]},i.unknown=function(c){return arguments.length&&(a=c),i},i.thresholds=function(){return r.slice()},i.copy=function(){return HF().domain([e,t]).range(o).unknown(a)},Jn.apply(sa(i),arguments)}function WF(){var e=[.5],t=[0,1],n,r=1;function o(a){return a!=null&&a<=a?t[Hl(e,a,0,r)]:n}return o.domain=function(a){return arguments.length?(e=Array.from(a),r=Math.min(e.length,t.length-1),o):e.slice()},o.range=function(a){return arguments.length?(t=Array.from(a),r=Math.min(e.length,t.length-1),o):t.slice()},o.invertExtent=function(a){var i=t.indexOf(a);return[e[i-1],e[i]]},o.unknown=function(a){return arguments.length?(n=a,o):n},o.copy=function(){return WF().domain(e).range(t).unknown(n)},Jn.apply(o,arguments)}const g_=new Date,v_=new Date;function Vt(e,t,n,r){function o(a){return e(a=arguments.length===0?new Date:new Date(+a)),a}return o.floor=a=>(e(a=new Date(+a)),a),o.ceil=a=>(e(a=new Date(a-1)),t(a,1),e(a),a),o.round=a=>{const i=o(a),s=o.ceil(a);return a-i<s-a?i:s},o.offset=(a,i)=>(t(a=new Date(+a),i==null?1:Math.floor(i)),a),o.range=(a,i,s)=>{const c=[];if(a=o.ceil(a),s=s==null?1:Math.floor(s),!(a<i)||!(s>0))return c;let l;do c.push(l=new Date(+a)),t(a,s),e(a);while(l<a&&a<i);return c},o.filter=a=>Vt(i=>{if(i>=i)for(;e(i),!a(i);)i.setTime(i-1)},(i,s)=>{if(i>=i)if(s<0)for(;++s<=0;)for(;t(i,-1),!a(i););else for(;--s>=0;)for(;t(i,1),!a(i););}),n&&(o.count=(a,i)=>(g_.setTime(+a),v_.setTime(+i),e(g_),e(v_),Math.floor(n(g_,v_))),o.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?o.filter(r?i=>r(i)%a===0:i=>o.count(0,i)%a===0):o)),o}const Bp=Vt(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Bp.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Vt(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):Bp),Bp.range;const ko=1e3,Gn=ko*60,Po=Gn*60,Ao=Po*24,b_=Ao*7,qF=Ao*30,x_=Ao*365,Ya=Vt(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*ko)},(e,t)=>(t-e)/ko,e=>e.getUTCSeconds());Ya.range;const w_=Vt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ko)},(e,t)=>{e.setTime(+e+t*Gn)},(e,t)=>(t-e)/Gn,e=>e.getMinutes());w_.range;const __=Vt(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Gn)},(e,t)=>(t-e)/Gn,e=>e.getUTCMinutes());__.range;const j_=Vt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ko-e.getMinutes()*Gn)},(e,t)=>{e.setTime(+e+t*Po)},(e,t)=>(t-e)/Po,e=>e.getHours());j_.range;const E_=Vt(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Po)},(e,t)=>(t-e)/Po,e=>e.getUTCHours());E_.range;const Ql=Vt(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Gn)/Ao,e=>e.getDate()-1);Ql.range;const $p=Vt(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ao,e=>e.getUTCDate()-1);$p.range;const YF=Vt(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ao,e=>Math.floor(e/Ao));YF.range;function Ka(e){return Vt(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Gn)/b_)}const zp=Ka(0),Vp=Ka(1),yde=Ka(2),gde=Ka(3),Es=Ka(4),vde=Ka(5),bde=Ka(6);zp.range,Vp.range,yde.range,gde.range,Es.range,vde.range,bde.range;function Xa(e){return Vt(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/b_)}const Up=Xa(0),Hp=Xa(1),xde=Xa(2),wde=Xa(3),Ss=Xa(4),_de=Xa(5),jde=Xa(6);Up.range,Hp.range,xde.range,wde.range,Ss.range,_de.range,jde.range;const S_=Vt(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());S_.range;const C_=Vt(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());C_.range;const To=Vt(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());To.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Vt(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)}),To.range;const Ro=Vt(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Ro.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Vt(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)}),Ro.range;function KF(e,t,n,r,o,a){const i=[[Ya,1,ko],[Ya,5,5*ko],[Ya,15,15*ko],[Ya,30,30*ko],[a,1,Gn],[a,5,5*Gn],[a,15,15*Gn],[a,30,30*Gn],[o,1,Po],[o,3,3*Po],[o,6,6*Po],[o,12,12*Po],[r,1,Ao],[r,2,2*Ao],[n,1,b_],[t,1,qF],[t,3,3*qF],[e,1,x_]];function s(l,u,d){const f=u<l;f&&([l,u]=[u,l]);const p=d&&typeof d.range=="function"?d:c(l,u,d),y=p?p.range(l,+u+1):[];return f?y.reverse():y}function c(l,u,d){const f=Math.abs(u-l)/d,p=r_(([,,v])=>v).right(i,f);if(p===i.length)return e.every(i_(l/x_,u/x_,d));if(p===0)return Bp.every(Math.max(i_(l,u,d),1));const[y,m]=i[f/i[p-1][2]<i[p][2]/f?p-1:p];return y.every(m)}return[s,c]}const[Ede,Sde]=KF(Ro,C_,Up,YF,E_,__),[Cde,Ode]=KF(To,S_,zp,Ql,j_,w_);function O_(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function N_(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Jl(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function Nde(e){var t=e.dateTime,n=e.date,r=e.time,o=e.periods,a=e.days,i=e.shortDays,s=e.months,c=e.shortMonths,l=Gl(o),u=Zl(o),d=Gl(a),f=Zl(a),p=Gl(i),y=Zl(i),m=Gl(s),v=Zl(s),b=Gl(c),x=Zl(c),_={a:D,A:I,b:L,B,c:null,d:eB,e:eB,f:Jde,g:sfe,G:lfe,H:Kde,I:Xde,j:Qde,L:tB,m:Gde,M:Zde,p:U,q:F,Q:sB,s:cB,S:efe,u:tfe,U:nfe,V:rfe,w:ofe,W:afe,x:null,X:null,y:ife,Y:cfe,Z:ufe,"%":iB},w={a:H,A:J,b:q,B:re,c:null,d:rB,e:rB,f:hfe,g:Efe,G:Cfe,H:dfe,I:ffe,j:pfe,L:oB,m:mfe,M:yfe,p:Z,q:Y,Q:sB,s:cB,S:gfe,u:vfe,U:bfe,V:xfe,w:wfe,W:_fe,x:null,X:null,y:jfe,Y:Sfe,Z:Ofe,"%":iB},j={a:N,A:P,b:R,B:A,c:C,d:GF,e:GF,f:Hde,g:JF,G:QF,H:ZF,I:ZF,j:$de,L:Ude,m:Bde,M:zde,p:k,q:Fde,Q:qde,s:Yde,S:Vde,u:Tde,U:Rde,V:Ide,w:Ade,W:Dde,x:M,X:T,y:JF,Y:QF,Z:Lde,"%":Wde};_.x=E(n,_),_.X=E(r,_),_.c=E(t,_),w.x=E(n,w),w.X=E(r,w),w.c=E(t,w);function E(W,G){return function(te){var $=[],se=-1,le=0,ve=W.length,Te,qe,Ye;for(te instanceof Date||(te=new Date(+te));++se<ve;)W.charCodeAt(se)===37&&($.push(W.slice(le,se)),(qe=XF[Te=W.charAt(++se)])!=null?Te=W.charAt(++se):qe=Te==="e"?" ":"0",(Ye=G[Te])&&(Te=Ye(te,qe)),$.push(Te),le=se+1);return $.push(W.slice(le,se)),$.join("")}}function S(W,G){return function(te){var $=Jl(1900,void 0,1),se=O($,W,te+="",0),le,ve;if(se!=te.length)return null;if("Q"in $)return new Date($.Q);if("s"in $)return new Date($.s*1e3+("L"in $?$.L:0));if(G&&!("Z"in $)&&($.Z=0),"p"in $&&($.H=$.H%12+$.p*12),$.m===void 0&&($.m="q"in $?$.q:0),"V"in $){if($.V<1||$.V>53)return null;"w"in $||($.w=1),"Z"in $?(le=N_(Jl($.y,0,1)),ve=le.getUTCDay(),le=ve>4||ve===0?Hp.ceil(le):Hp(le),le=$p.offset(le,($.V-1)*7),$.y=le.getUTCFullYear(),$.m=le.getUTCMonth(),$.d=le.getUTCDate()+($.w+6)%7):(le=O_(Jl($.y,0,1)),ve=le.getDay(),le=ve>4||ve===0?Vp.ceil(le):Vp(le),le=Ql.offset(le,($.V-1)*7),$.y=le.getFullYear(),$.m=le.getMonth(),$.d=le.getDate()+($.w+6)%7)}else("W"in $||"U"in $)&&("w"in $||($.w="u"in $?$.u%7:"W"in $?1:0),ve="Z"in $?N_(Jl($.y,0,1)).getUTCDay():O_(Jl($.y,0,1)).getDay(),$.m=0,$.d="W"in $?($.w+6)%7+$.W*7-(ve+5)%7:$.w+$.U*7-(ve+6)%7);return"Z"in $?($.H+=$.Z/100|0,$.M+=$.Z%100,N_($)):O_($)}}function O(W,G,te,$){for(var se=0,le=G.length,ve=te.length,Te,qe;se<le;){if($>=ve)return-1;if(Te=G.charCodeAt(se++),Te===37){if(Te=G.charAt(se++),qe=j[Te in XF?G.charAt(se++):Te],!qe||($=qe(W,te,$))<0)return-1}else if(Te!=te.charCodeAt($++))return-1}return $}function k(W,G,te){var $=l.exec(G.slice(te));return $?(W.p=u.get($[0].toLowerCase()),te+$[0].length):-1}function N(W,G,te){var $=p.exec(G.slice(te));return $?(W.w=y.get($[0].toLowerCase()),te+$[0].length):-1}function P(W,G,te){var $=d.exec(G.slice(te));return $?(W.w=f.get($[0].toLowerCase()),te+$[0].length):-1}function R(W,G,te){var $=b.exec(G.slice(te));return $?(W.m=x.get($[0].toLowerCase()),te+$[0].length):-1}function A(W,G,te){var $=m.exec(G.slice(te));return $?(W.m=v.get($[0].toLowerCase()),te+$[0].length):-1}function C(W,G,te){return O(W,t,G,te)}function M(W,G,te){return O(W,n,G,te)}function T(W,G,te){return O(W,r,G,te)}function D(W){return i[W.getDay()]}function I(W){return a[W.getDay()]}function L(W){return c[W.getMonth()]}function B(W){return s[W.getMonth()]}function U(W){return o[+(W.getHours()>=12)]}function F(W){return 1+~~(W.getMonth()/3)}function H(W){return i[W.getUTCDay()]}function J(W){return a[W.getUTCDay()]}function q(W){return c[W.getUTCMonth()]}function re(W){return s[W.getUTCMonth()]}function Z(W){return o[+(W.getUTCHours()>=12)]}function Y(W){return 1+~~(W.getUTCMonth()/3)}return{format:function(W){var G=E(W+="",_);return G.toString=function(){return W},G},parse:function(W){var G=S(W+="",!1);return G.toString=function(){return W},G},utcFormat:function(W){var G=E(W+="",w);return G.toString=function(){return W},G},utcParse:function(W){var G=S(W+="",!0);return G.toString=function(){return W},G}}}var XF={"-":"",_:" ",0:"0"},qt=/^\s*\d+/,Mde=/^%/,kde=/[\\^$*+?|[\]().{}]/g;function tt(e,t,n){var r=e<0?"-":"",o=(r?-e:e)+"",a=o.length;return r+(a<n?new Array(n-a+1).join(t)+o:o)}function Pde(e){return e.replace(kde,"\\$&")}function Gl(e){return new RegExp("^(?:"+e.map(Pde).join("|")+")","i")}function Zl(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function Ade(e,t,n){var r=qt.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function Tde(e,t,n){var r=qt.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function Rde(e,t,n){var r=qt.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function Ide(e,t,n){var r=qt.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function Dde(e,t,n){var r=qt.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function QF(e,t,n){var r=qt.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function JF(e,t,n){var r=qt.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Lde(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Fde(e,t,n){var r=qt.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function Bde(e,t,n){var r=qt.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function GF(e,t,n){var r=qt.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function $de(e,t,n){var r=qt.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function ZF(e,t,n){var r=qt.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function zde(e,t,n){var r=qt.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function Vde(e,t,n){var r=qt.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function Ude(e,t,n){var r=qt.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function Hde(e,t,n){var r=qt.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Wde(e,t,n){var r=Mde.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function qde(e,t,n){var r=qt.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function Yde(e,t,n){var r=qt.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function eB(e,t){return tt(e.getDate(),t,2)}function Kde(e,t){return tt(e.getHours(),t,2)}function Xde(e,t){return tt(e.getHours()%12||12,t,2)}function Qde(e,t){return tt(1+Ql.count(To(e),e),t,3)}function tB(e,t){return tt(e.getMilliseconds(),t,3)}function Jde(e,t){return tB(e,t)+"000"}function Gde(e,t){return tt(e.getMonth()+1,t,2)}function Zde(e,t){return tt(e.getMinutes(),t,2)}function efe(e,t){return tt(e.getSeconds(),t,2)}function tfe(e){var t=e.getDay();return t===0?7:t}function nfe(e,t){return tt(zp.count(To(e)-1,e),t,2)}function nB(e){var t=e.getDay();return t>=4||t===0?Es(e):Es.ceil(e)}function rfe(e,t){return e=nB(e),tt(Es.count(To(e),e)+(To(e).getDay()===4),t,2)}function ofe(e){return e.getDay()}function afe(e,t){return tt(Vp.count(To(e)-1,e),t,2)}function ife(e,t){return tt(e.getFullYear()%100,t,2)}function sfe(e,t){return e=nB(e),tt(e.getFullYear()%100,t,2)}function cfe(e,t){return tt(e.getFullYear()%1e4,t,4)}function lfe(e,t){var n=e.getDay();return e=n>=4||n===0?Es(e):Es.ceil(e),tt(e.getFullYear()%1e4,t,4)}function ufe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+tt(t/60|0,"0",2)+tt(t%60,"0",2)}function rB(e,t){return tt(e.getUTCDate(),t,2)}function dfe(e,t){return tt(e.getUTCHours(),t,2)}function ffe(e,t){return tt(e.getUTCHours()%12||12,t,2)}function pfe(e,t){return tt(1+$p.count(Ro(e),e),t,3)}function oB(e,t){return tt(e.getUTCMilliseconds(),t,3)}function hfe(e,t){return oB(e,t)+"000"}function mfe(e,t){return tt(e.getUTCMonth()+1,t,2)}function yfe(e,t){return tt(e.getUTCMinutes(),t,2)}function gfe(e,t){return tt(e.getUTCSeconds(),t,2)}function vfe(e){var t=e.getUTCDay();return t===0?7:t}function bfe(e,t){return tt(Up.count(Ro(e)-1,e),t,2)}function aB(e){var t=e.getUTCDay();return t>=4||t===0?Ss(e):Ss.ceil(e)}function xfe(e,t){return e=aB(e),tt(Ss.count(Ro(e),e)+(Ro(e).getUTCDay()===4),t,2)}function wfe(e){return e.getUTCDay()}function _fe(e,t){return tt(Hp.count(Ro(e)-1,e),t,2)}function jfe(e,t){return tt(e.getUTCFullYear()%100,t,2)}function Efe(e,t){return e=aB(e),tt(e.getUTCFullYear()%100,t,2)}function Sfe(e,t){return tt(e.getUTCFullYear()%1e4,t,4)}function Cfe(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Ss(e):Ss.ceil(e),tt(e.getUTCFullYear()%1e4,t,4)}function Ofe(){return"+0000"}function iB(){return"%"}function sB(e){return+e}function cB(e){return Math.floor(+e/1e3)}var Cs,lB,uB;Nfe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Nfe(e){return Cs=Nde(e),lB=Cs.format,Cs.parse,uB=Cs.utcFormat,Cs.utcParse,Cs}function Mfe(e){return new Date(e)}function kfe(e){return e instanceof Date?+e:+new Date(+e)}function M_(e,t,n,r,o,a,i,s,c,l){var u=u_(),d=u.invert,f=u.domain,p=l(".%L"),y=l(":%S"),m=l("%I:%M"),v=l("%I %p"),b=l("%a %d"),x=l("%b %d"),_=l("%B"),w=l("%Y");function j(E){return(c(E)<E?p:s(E)<E?y:i(E)<E?m:a(E)<E?v:r(E)<E?o(E)<E?b:x:n(E)<E?_:w)(E)}return u.invert=function(E){return new Date(d(E))},u.domain=function(E){return arguments.length?f(Array.from(E,kfe)):f().map(Mfe)},u.ticks=function(E){var S=f();return e(S[0],S[S.length-1],E??10)},u.tickFormat=function(E,S){return S==null?j:l(S)},u.nice=function(E){var S=f();return(!E||typeof E.range!="function")&&(E=t(S[0],S[S.length-1],E??10)),E?f(AF(S,E)):u},u.copy=function(){return Kl(u,M_(e,t,n,r,o,a,i,s,c,l))},u}function Pfe(){return Jn.apply(M_(Cde,Ode,To,S_,zp,Ql,j_,w_,Ya,lB).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Afe(){return Jn.apply(M_(Ede,Sde,Ro,C_,Up,$p,E_,__,Ya,uB).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Wp(){var e=0,t=1,n,r,o,a,i=gn,s=!1,c;function l(d){return d==null||isNaN(d=+d)?c:i(o===0?.5:(d=(a(d)-n)*o,s?Math.max(0,Math.min(1,d)):d))}l.domain=function(d){return arguments.length?([e,t]=d,n=a(e=+e),r=a(t=+t),o=n===r?0:1/(r-n),l):[e,t]},l.clamp=function(d){return arguments.length?(s=!!d,l):s},l.interpolator=function(d){return arguments.length?(i=d,l):i};function u(d){return function(f){var p,y;return arguments.length?([p,y]=f,i=d(p,y),l):[i(0),i(1)]}}return l.range=u(Hi),l.rangeRound=u(jb),l.unknown=function(d){return arguments.length?(c=d,l):c},function(d){return a=d,n=d(e),r=d(t),o=n===r?0:1/(r-n),l}}function ca(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function dB(){var e=sa(Wp()(gn));return e.copy=function(){return ca(e,dB())},Mo.apply(e,arguments)}function fB(){var e=p_(Wp()).domain([1,10]);return e.copy=function(){return ca(e,fB()).base(e.base())},Mo.apply(e,arguments)}function pB(){var e=h_(Wp());return e.copy=function(){return ca(e,pB()).constant(e.constant())},Mo.apply(e,arguments)}function k_(){var e=m_(Wp());return e.copy=function(){return ca(e,k_()).exponent(e.exponent())},Mo.apply(e,arguments)}function Tfe(){return k_.apply(null,arguments).exponent(.5)}function hB(){var e=[],t=gn;function n(r){if(r!=null&&!isNaN(r=+r))return t((Hl(e,r,1)-1)/(e.length-1))}return n.domain=function(r){if(!arguments.length)return e.slice();e=[];for(let o of r)o!=null&&!isNaN(o=+o)&&e.push(o);return e.sort(ia),n},n.interpolator=function(r){return arguments.length?(t=r,n):t},n.range=function(){return e.map((r,o)=>t(o/(e.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(o,a)=>Uue(e,a/r))},n.copy=function(){return hB(t).domain(e)},Mo.apply(n,arguments)}function qp(){var e=0,t=.5,n=1,r=1,o,a,i,s,c,l=gn,u,d=!1,f;function p(m){return isNaN(m=+m)?f:(m=.5+((m=+u(m))-a)*(r*m<r*a?s:c),l(d?Math.max(0,Math.min(1,m)):m))}p.domain=function(m){return arguments.length?([e,t,n]=m,o=u(e=+e),a=u(t=+t),i=u(n=+n),s=o===a?0:.5/(a-o),c=a===i?0:.5/(i-a),r=a<o?-1:1,p):[e,t,n]},p.clamp=function(m){return arguments.length?(d=!!m,p):d},p.interpolator=function(m){return arguments.length?(l=m,p):l};function y(m){return function(v){var b,x,_;return arguments.length?([b,x,_]=v,l=vJ(m,[b,x,_]),p):[l(0),l(.5),l(1)]}}return p.range=y(Hi),p.rangeRound=y(jb),p.unknown=function(m){return arguments.length?(f=m,p):f},function(m){return u=m,o=m(e),a=m(t),i=m(n),s=o===a?0:.5/(a-o),c=a===i?0:.5/(i-a),r=a<o?-1:1,p}}function mB(){var e=sa(qp()(gn));return e.copy=function(){return ca(e,mB())},Mo.apply(e,arguments)}function yB(){var e=p_(qp()).domain([.1,1,10]);return e.copy=function(){return ca(e,yB()).base(e.base())},Mo.apply(e,arguments)}function gB(){var e=h_(qp());return e.copy=function(){return ca(e,gB()).constant(e.constant())},Mo.apply(e,arguments)}function P_(){var e=m_(qp());return e.copy=function(){return ca(e,P_()).exponent(e.exponent())},Mo.apply(e,arguments)}function Rfe(){return P_.apply(null,arguments).exponent(.5)}const vB=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:ql,scaleDiverging:mB,scaleDivergingLog:yB,scaleDivergingPow:P_,scaleDivergingSqrt:Rfe,scaleDivergingSymlog:gB,scaleIdentity:PF,scaleImplicit:s_,scaleLinear:Fp,scaleLog:DF,scaleOrdinal:c_,scalePoint:Yl,scalePow:y_,scaleQuantile:UF,scaleQuantize:HF,scaleRadial:VF,scaleSequential:dB,scaleSequentialLog:fB,scaleSequentialPow:k_,scaleSequentialQuantile:hB,scaleSequentialSqrt:Tfe,scaleSequentialSymlog:pB,scaleSqrt:hde,scaleSymlog:BF,scaleThreshold:WF,scaleTime:Pfe,scaleUtc:Afe,tickFormat:kF},Symbol.toStringTag,{value:"Module"}));var A_,bB;function xB(){if(bB)return A_;bB=1;var e=Bi();function t(n,r,o){for(var a=-1,i=n.length;++a<i;){var s=n[a],c=r(s);if(c!=null&&(l===void 0?c===c&&!e(c):o(c,l)))var l=c,u=s}return u}return A_=t,A_}var T_,wB;function Ife(){if(wB)return T_;wB=1;function e(t,n){return t>n}return T_=e,T_}var R_,_B;function Dfe(){if(_B)return R_;_B=1;var e=xB(),t=Ife(),n=$i();function r(o){return o&&o.length?e(o,n,t):void 0}return R_=r,R_}var Lfe=Dfe();const Yp=Xe(Lfe);var I_,jB;function Ffe(){if(jB)return I_;jB=1;function e(t,n){return t<n}return I_=e,I_}var D_,EB;function Bfe(){if(EB)return D_;EB=1;var e=xB(),t=Ffe(),n=$i();function r(o){return o&&o.length?e(o,n,t):void 0}return D_=r,D_}var $fe=Bfe();const Kp=Xe($fe);var L_,SB;RE=function(){if(SB)return L_;SB=1;var e=Zs(),t=Tr(),n=wL(),r=un();function o(a,i){var s=r(a)?e:n;return s(a,t(i,3))}return L_=o,L_};var F_,CB;function zfe(){if(CB)return F_;CB=1;var e=Yh(),t=RE();function n(r,o){return e(t(r,o),1)}return F_=n,F_}var Vfe=zfe();const Ufe=Xe(Vfe);var B_,OB;function Hfe(){if(OB)return B_;OB=1;var e=j0();function t(n,r){return e(n,r)}return B_=t,B_}var Wfe=Hfe();const $_=Xe(Wfe);var Os=1e9,qfe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},U_,Et=!0,Zn="[DecimalError] ",Qa=Zn+"Invalid argument: ",z_=Zn+"Exponent out of range: ",Ns=Math.floor,Ja=Math.pow,Yfe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,$n,Yt=1e7,xt=7,NB=9007199254740991,Xp=Ns(NB/xt),Ee={};Ee.absoluteValue=Ee.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e},Ee.comparedTo=Ee.cmp=function(e){var t,n,r,o,a=this;if(e=new a.constructor(e),a.s!==e.s)return a.s||-e.s;if(a.e!==e.e)return a.e>e.e^a.s<0?1:-1;for(r=a.d.length,o=e.d.length,t=0,n=r<o?r:o;t<n;++t)if(a.d[t]!==e.d[t])return a.d[t]>e.d[t]^a.s<0?1:-1;return r===o?0:r>o^a.s<0?1:-1},Ee.decimalPlaces=Ee.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*xt;if(t=e.d[t],t)for(;t%10==0;t/=10)n--;return n<0?0:n},Ee.dividedBy=Ee.div=function(e){return Io(this,new this.constructor(e))},Ee.dividedToIntegerBy=Ee.idiv=function(e){var t=this,n=t.constructor;return ht(Io(t,new n(e),0,1),n.precision)},Ee.equals=Ee.eq=function(e){return!this.cmp(e)},Ee.exponent=function(){return Lt(this)},Ee.greaterThan=Ee.gt=function(e){return this.cmp(e)>0},Ee.greaterThanOrEqualTo=Ee.gte=function(e){return this.cmp(e)>=0},Ee.isInteger=Ee.isint=function(){return this.e>this.d.length-2},Ee.isNegative=Ee.isneg=function(){return this.s<0},Ee.isPositive=Ee.ispos=function(){return this.s>0},Ee.isZero=function(){return this.s===0},Ee.lessThan=Ee.lt=function(e){return this.cmp(e)<0},Ee.lessThanOrEqualTo=Ee.lte=function(e){return this.cmp(e)<1},Ee.logarithm=Ee.log=function(e){var t,n=this,r=n.constructor,o=r.precision,a=o+5;if(e===void 0)e=new r(10);else if(e=new r(e),e.s<1||e.eq($n))throw Error(Zn+"NaN");if(n.s<1)throw Error(Zn+(n.s?"NaN":"-Infinity"));return n.eq($n)?new r(0):(Et=!1,t=Io(eu(n,a),eu(e,a),a),Et=!0,ht(t,o))},Ee.minus=Ee.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?AB(t,e):MB(t,(e.s=-e.s,e))},Ee.modulo=Ee.mod=function(e){var t,n=this,r=n.constructor,o=r.precision;if(e=new r(e),!e.s)throw Error(Zn+"NaN");return n.s?(Et=!1,t=Io(n,e,0,1).times(e),Et=!0,n.minus(t)):ht(new r(n),o)},Ee.naturalExponential=Ee.exp=function(){return kB(this)},Ee.naturalLogarithm=Ee.ln=function(){return eu(this)},Ee.negated=Ee.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e},Ee.plus=Ee.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?MB(t,e):AB(t,(e.s=-e.s,e))},Ee.precision=Ee.sd=function(e){var t,n,r,o=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Qa+e);if(t=Lt(o)+1,r=o.d.length-1,n=r*xt+1,r=o.d[r],r){for(;r%10==0;r/=10)n--;for(r=o.d[0];r>=10;r/=10)n++}return e&&t>n?t:n},Ee.squareRoot=Ee.sqrt=function(){var e,t,n,r,o,a,i,s=this,c=s.constructor;if(s.s<1){if(!s.s)return new c(0);throw Error(Zn+"NaN")}for(e=Lt(s),Et=!1,o=Math.sqrt(+s),o==0||o==1/0?(t=Vr(s.d),(t.length+e)%2==0&&(t+="0"),o=Math.sqrt(t),e=Ns((e+1)/2)-(e<0||e%2),o==1/0?t="5e"+e:(t=o.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),r=new c(t)):r=new c(o.toString()),n=c.precision,o=i=n+3;;)if(a=r,r=a.plus(Io(s,a,i+2)).times(.5),Vr(a.d).slice(0,i)===(t=Vr(r.d)).slice(0,i)){if(t=t.slice(i-3,i+1),o==i&&t=="4999"){if(ht(a,n+1,0),a.times(a).eq(s)){r=a;break}}else if(t!="9999")break;i+=4}return Et=!0,ht(r,n)},Ee.times=Ee.mul=function(e){var t,n,r,o,a,i,s,c,l,u=this,d=u.constructor,f=u.d,p=(e=new d(e)).d;if(!u.s||!e.s)return new d(0);for(e.s*=u.s,n=u.e+e.e,c=f.length,l=p.length,c<l&&(a=f,f=p,p=a,i=c,c=l,l=i),a=[],i=c+l,r=i;r--;)a.push(0);for(r=l;--r>=0;){for(t=0,o=c+r;o>r;)s=a[o]+p[r]*f[o-r-1]+t,a[o--]=s%Yt|0,t=s/Yt|0;a[o]=(a[o]+t)%Yt|0}for(;!a[--i];)a.pop();return t?++n:a.shift(),e.d=a,e.e=n,Et?ht(e,d.precision):e},Ee.toDecimalPlaces=Ee.todp=function(e,t){var n=this,r=n.constructor;return n=new r(n),e===void 0?n:(zr(e,0,Os),t===void 0?t=r.rounding:zr(t,0,8),ht(n,e+Lt(n)+1,t))},Ee.toExponential=function(e,t){var n,r=this,o=r.constructor;return e===void 0?n=Ga(r,!0):(zr(e,0,Os),t===void 0?t=o.rounding:zr(t,0,8),r=ht(new o(r),e+1,t),n=Ga(r,!0,e+1)),n},Ee.toFixed=function(e,t){var n,r,o=this,a=o.constructor;return e===void 0?Ga(o):(zr(e,0,Os),t===void 0?t=a.rounding:zr(t,0,8),r=ht(new a(o),e+Lt(o)+1,t),n=Ga(r.abs(),!1,e+Lt(r)+1),o.isneg()&&!o.isZero()?"-"+n:n)},Ee.toInteger=Ee.toint=function(){var e=this,t=e.constructor;return ht(new t(e),Lt(e)+1,t.rounding)},Ee.toNumber=function(){return+this},Ee.toPower=Ee.pow=function(e){var t,n,r,o,a,i,s=this,c=s.constructor,l=12,u=+(e=new c(e));if(!e.s)return new c($n);if(s=new c(s),!s.s){if(e.s<1)throw Error(Zn+"Infinity");return s}if(s.eq($n))return s;if(r=c.precision,e.eq($n))return ht(s,r);if(t=e.e,n=e.d.length-1,i=t>=n,a=s.s,i){if((n=u<0?-u:u)<=NB){for(o=new c($n),t=Math.ceil(r/xt+4),Et=!1;n%2&&(o=o.times(s),TB(o.d,t)),n=Ns(n/2),n!==0;)s=s.times(s),TB(s.d,t);return Et=!0,e.s<0?new c($n).div(o):ht(o,r)}}else if(a<0)throw Error(Zn+"NaN");return a=a<0&&e.d[Math.max(t,n)]&1?-1:1,s.s=1,Et=!1,o=e.times(eu(s,r+l)),Et=!0,o=kB(o),o.s=a,o},Ee.toPrecision=function(e,t){var n,r,o=this,a=o.constructor;return e===void 0?(n=Lt(o),r=Ga(o,n<=a.toExpNeg||n>=a.toExpPos)):(zr(e,1,Os),t===void 0?t=a.rounding:zr(t,0,8),o=ht(new a(o),e,t),n=Lt(o),r=Ga(o,e<=n||n<=a.toExpNeg,e)),r},Ee.toSignificantDigits=Ee.tosd=function(e,t){var n=this,r=n.constructor;return e===void 0?(e=r.precision,t=r.rounding):(zr(e,1,Os),t===void 0?t=r.rounding:zr(t,0,8)),ht(new r(n),e,t)},Ee.toString=Ee.valueOf=Ee.val=Ee.toJSON=Ee[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Lt(e),n=e.constructor;return Ga(e,t<=n.toExpNeg||t>=n.toExpPos)};function MB(e,t){var n,r,o,a,i,s,c,l,u=e.constructor,d=u.precision;if(!e.s||!t.s)return t.s||(t=new u(e)),Et?ht(t,d):t;if(c=e.d,l=t.d,i=e.e,o=t.e,c=c.slice(),a=i-o,a){for(a<0?(r=c,a=-a,s=l.length):(r=l,o=i,s=c.length),i=Math.ceil(d/xt),s=i>s?i+1:s+1,a>s&&(a=s,r.length=1),r.reverse();a--;)r.push(0);r.reverse()}for(s=c.length,a=l.length,s-a<0&&(a=s,r=l,l=c,c=r),n=0;a;)n=(c[--a]=c[a]+l[a]+n)/Yt|0,c[a]%=Yt;for(n&&(c.unshift(n),++o),s=c.length;c[--s]==0;)c.pop();return t.d=c,t.e=o,Et?ht(t,d):t}function zr(e,t,n){if(e!==~~e||e<t||e>n)throw Error(Qa+e)}function Vr(e){var t,n,r,o=e.length-1,a="",i=e[0];if(o>0){for(a+=i,t=1;t<o;t++)r=e[t]+"",n=xt-r.length,n&&(a+=la(n)),a+=r;i=e[t],r=i+"",n=xt-r.length,n&&(a+=la(n))}else if(i===0)return"0";for(;i%10===0;)i/=10;return a+i}var Io=function(){function e(r,o){var a,i=0,s=r.length;for(r=r.slice();s--;)a=r[s]*o+i,r[s]=a%Yt|0,i=a/Yt|0;return i&&r.unshift(i),r}function t(r,o,a,i){var s,c;if(a!=i)c=a>i?1:-1;else for(s=c=0;s<a;s++)if(r[s]!=o[s]){c=r[s]>o[s]?1:-1;break}return c}function n(r,o,a){for(var i=0;a--;)r[a]-=i,i=r[a]<o[a]?1:0,r[a]=i*Yt+r[a]-o[a];for(;!r[0]&&r.length>1;)r.shift()}return function(r,o,a,i){var s,c,l,u,d,f,p,y,m,v,b,x,_,w,j,E,S,O,k=r.constructor,N=r.s==o.s?1:-1,P=r.d,R=o.d;if(!r.s)return new k(r);if(!o.s)throw Error(Zn+"Division by zero");for(c=r.e-o.e,S=R.length,j=P.length,p=new k(N),y=p.d=[],l=0;R[l]==(P[l]||0);)++l;if(R[l]>(P[l]||0)&&--c,a==null?x=a=k.precision:i?x=a+(Lt(r)-Lt(o))+1:x=a,x<0)return new k(0);if(x=x/xt+2|0,l=0,S==1)for(u=0,R=R[0],x++;(l<j||u)&&x--;l++)_=u*Yt+(P[l]||0),y[l]=_/R|0,u=_%R|0;else{for(u=Yt/(R[0]+1)|0,u>1&&(R=e(R,u),P=e(P,u),S=R.length,j=P.length),w=S,m=P.slice(0,S),v=m.length;v<S;)m[v++]=0;O=R.slice(),O.unshift(0),E=R[0],R[1]>=Yt/2&&++E;do u=0,s=t(R,m,S,v),s<0?(b=m[0],S!=v&&(b=b*Yt+(m[1]||0)),u=b/E|0,u>1?(u>=Yt&&(u=Yt-1),d=e(R,u),f=d.length,v=m.length,s=t(d,m,f,v),s==1&&(u--,n(d,S<f?O:R,f))):(u==0&&(s=u=1),d=R.slice()),f=d.length,f<v&&d.unshift(0),n(m,d,v),s==-1&&(v=m.length,s=t(R,m,S,v),s<1&&(u++,n(m,S<v?O:R,v))),v=m.length):s===0&&(u++,m=[0]),y[l++]=u,s&&m[0]?m[v++]=P[w]||0:(m=[P[w]],v=1);while((w++<j||m[0]!==void 0)&&x--)}return y[0]||y.shift(),p.e=c,ht(p,i?a+Lt(p)+1:a)}}();function kB(e,t){var n,r,o,a,i,s,c=0,l=0,u=e.constructor,d=u.precision;if(Lt(e)>16)throw Error(z_+Lt(e));if(!e.s)return new u($n);for(t==null?(Et=!1,s=d):s=t,i=new u(.03125);e.abs().gte(.1);)e=e.times(i),l+=5;for(r=Math.log(Ja(2,l))/Math.LN10*2+5|0,s+=r,n=o=a=new u($n),u.precision=s;;){if(o=ht(o.times(e),s),n=n.times(++c),i=a.plus(Io(o,n,s)),Vr(i.d).slice(0,s)===Vr(a.d).slice(0,s)){for(;l--;)a=ht(a.times(a),s);return u.precision=d,t==null?(Et=!0,ht(a,d)):a}a=i}}function Lt(e){for(var t=e.e*xt,n=e.d[0];n>=10;n/=10)t++;return t}function V_(e,t,n){if(t>e.LN10.sd())throw Et=!0,n&&(e.precision=n),Error(Zn+"LN10 precision limit exceeded");return ht(new e(e.LN10),t)}function la(e){for(var t="";e--;)t+="0";return t}function eu(e,t){var n,r,o,a,i,s,c,l,u,d=1,f=10,p=e,y=p.d,m=p.constructor,v=m.precision;if(p.s<1)throw Error(Zn+(p.s?"NaN":"-Infinity"));if(p.eq($n))return new m(0);if(t==null?(Et=!1,l=v):l=t,p.eq(10))return t==null&&(Et=!0),V_(m,l);if(l+=f,m.precision=l,n=Vr(y),r=n.charAt(0),a=Lt(p),Math.abs(a)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)p=p.times(e),n=Vr(p.d),r=n.charAt(0),d++;a=Lt(p),r>1?(p=new m("0."+n),a++):p=new m(r+"."+n.slice(1))}else return c=V_(m,l+2,v).times(a+""),p=eu(new m(r+"."+n.slice(1)),l-f).plus(c),m.precision=v,t==null?(Et=!0,ht(p,v)):p;for(s=i=p=Io(p.minus($n),p.plus($n),l),u=ht(p.times(p),l),o=3;;){if(i=ht(i.times(u),l),c=s.plus(Io(i,new m(o),l)),Vr(c.d).slice(0,l)===Vr(s.d).slice(0,l))return s=s.times(2),a!==0&&(s=s.plus(V_(m,l+2,v).times(a+""))),s=Io(s,new m(d),l),m.precision=v,t==null?(Et=!0,ht(s,v)):s;s=c,o+=2}}function PB(e,t){var n,r,o;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;t.charCodeAt(r)===48;)++r;for(o=t.length;t.charCodeAt(o-1)===48;)--o;if(t=t.slice(r,o),t){if(o-=r,n=n-r-1,e.e=Ns(n/xt),e.d=[],r=(n+1)%xt,n<0&&(r+=xt),r<o){for(r&&e.d.push(+t.slice(0,r)),o-=xt;r<o;)e.d.push(+t.slice(r,r+=xt));t=t.slice(r),r=xt-t.length}else r-=o;for(;r--;)t+="0";if(e.d.push(+t),Et&&(e.e>Xp||e.e<-Xp))throw Error(z_+n)}else e.s=0,e.e=0,e.d=[0];return e}function ht(e,t,n){var r,o,a,i,s,c,l,u,d=e.d;for(i=1,a=d[0];a>=10;a/=10)i++;if(r=t-i,r<0)r+=xt,o=t,l=d[u=0];else{if(u=Math.ceil((r+1)/xt),a=d.length,u>=a)return e;for(l=a=d[u],i=1;a>=10;a/=10)i++;r%=xt,o=r-xt+i}if(n!==void 0&&(a=Ja(10,i-o-1),s=l/a%10|0,c=t<0||d[u+1]!==void 0||l%a,c=n<4?(s||c)&&(n==0||n==(e.s<0?3:2)):s>5||s==5&&(n==4||c||n==6&&(r>0?o>0?l/Ja(10,i-o):0:d[u-1])%10&1||n==(e.s<0?8:7))),t<1||!d[0])return c?(a=Lt(e),d.length=1,t=t-a-1,d[0]=Ja(10,(xt-t%xt)%xt),e.e=Ns(-t/xt)||0):(d.length=1,d[0]=e.e=e.s=0),e;if(r==0?(d.length=u,a=1,u--):(d.length=u+1,a=Ja(10,xt-r),d[u]=o>0?(l/Ja(10,i-o)%Ja(10,o)|0)*a:0),c)for(;;)if(u==0){(d[0]+=a)==Yt&&(d[0]=1,++e.e);break}else{if(d[u]+=a,d[u]!=Yt)break;d[u--]=0,a=1}for(r=d.length;d[--r]===0;)d.pop();if(Et&&(e.e>Xp||e.e<-Xp))throw Error(z_+Lt(e));return e}function AB(e,t){var n,r,o,a,i,s,c,l,u,d,f=e.constructor,p=f.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new f(e),Et?ht(t,p):t;if(c=e.d,d=t.d,r=t.e,l=e.e,c=c.slice(),i=l-r,i){for(u=i<0,u?(n=c,i=-i,s=d.length):(n=d,r=l,s=c.length),o=Math.max(Math.ceil(p/xt),s)+2,i>o&&(i=o,n.length=1),n.reverse(),o=i;o--;)n.push(0);n.reverse()}else{for(o=c.length,s=d.length,u=o<s,u&&(s=o),o=0;o<s;o++)if(c[o]!=d[o]){u=c[o]<d[o];break}i=0}for(u&&(n=c,c=d,d=n,t.s=-t.s),s=c.length,o=d.length-s;o>0;--o)c[s++]=0;for(o=d.length;o>i;){if(c[--o]<d[o]){for(a=o;a&&c[--a]===0;)c[a]=Yt-1;--c[a],c[o]+=Yt}c[o]-=d[o]}for(;c[--s]===0;)c.pop();for(;c[0]===0;c.shift())--r;return c[0]?(t.d=c,t.e=r,Et?ht(t,p):t):new f(0)}function Ga(e,t,n){var r,o=Lt(e),a=Vr(e.d),i=a.length;return t?(n&&(r=n-i)>0?a=a.charAt(0)+"."+a.slice(1)+la(r):i>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(o<0?"e":"e+")+o):o<0?(a="0."+la(-o-1)+a,n&&(r=n-i)>0&&(a+=la(r))):o>=i?(a+=la(o+1-i),n&&(r=n-o-1)>0&&(a=a+"."+la(r))):((r=o+1)<i&&(a=a.slice(0,r)+"."+a.slice(r)),n&&(r=n-i)>0&&(o+1===i&&(a+="."),a+=la(r))),e.s<0?"-"+a:a}function TB(e,t){if(e.length>t)return e.length=t,!0}function RB(e){var t,n,r;function o(a){var i=this;if(!(i instanceof o))return new o(a);if(i.constructor=o,a instanceof o){i.s=a.s,i.e=a.e,i.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(Qa+a);if(a>0)i.s=1;else if(a<0)a=-a,i.s=-1;else{i.s=0,i.e=0,i.d=[0];return}if(a===~~a&&a<1e7){i.e=0,i.d=[a];return}return PB(i,a.toString())}else if(typeof a!="string")throw Error(Qa+a);if(a.charCodeAt(0)===45?(a=a.slice(1),i.s=-1):i.s=1,Yfe.test(a))PB(i,a);else throw Error(Qa+a)}if(o.prototype=Ee,o.ROUND_UP=0,o.ROUND_DOWN=1,o.ROUND_CEIL=2,o.ROUND_FLOOR=3,o.ROUND_HALF_UP=4,o.ROUND_HALF_DOWN=5,o.ROUND_HALF_EVEN=6,o.ROUND_HALF_CEIL=7,o.ROUND_HALF_FLOOR=8,o.clone=RB,o.config=o.set=Kfe,e===void 0&&(e={}),e)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<r.length;)e.hasOwnProperty(n=r[t++])||(e[n]=this[n]);return o.config(e),o}function Kfe(e){if(!e||typeof e!="object")throw Error(Zn+"Object expected");var t,n,r,o=["precision",1,Os,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<o.length;t+=3)if((r=e[n=o[t]])!==void 0)if(Ns(r)===r&&r>=o[t+1]&&r<=o[t+2])this[n]=r;else throw Error(Qa+n+": "+r);if((r=e[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(Qa+n+": "+r);return this}var U_=RB(qfe);$n=new U_(1);const ft=U_;function Xfe(e){return Zfe(e)||Gfe(e)||Jfe(e)||Qfe()}function Qfe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Jfe(e,t){if(e){if(typeof e=="string")return H_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return H_(e,t)}}function Gfe(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function Zfe(e){if(Array.isArray(e))return H_(e)}function H_(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var epe=function(e){return e},IB={"@@functional/placeholder":!0},DB=function(e){return e===IB},LB=function(e){return function t(){return arguments.length===0||arguments.length===1&&DB(arguments.length<=0?void 0:arguments[0])?t:e.apply(void 0,arguments)}},tpe=function e(t,n){return t===1?n:LB(function(){for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];var i=o.filter(function(s){return s!==IB}).length;return i>=t?n.apply(void 0,o):e(t-i,LB(function(){for(var s=arguments.length,c=new Array(s),l=0;l<s;l++)c[l]=arguments[l];var u=o.map(function(d){return DB(d)?c.shift():d});return n.apply(void 0,Xfe(u).concat(c))}))})},Qp=function(e){return tpe(e.length,e)},W_=function(e,t){for(var n=[],r=e;r<t;++r)n[r-e]=r;return n},npe=Qp(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(n){return t[n]}).map(e)}),rpe=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!t.length)return epe;var r=t.reverse(),o=r[0],a=r.slice(1);return function(){return a.reduce(function(i,s){return s(i)},o.apply(void 0,arguments))}},q_=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},FB=function(e){var t=null,n=null;return function(){for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return t&&o.every(function(i,s){return i===t[s]})||(t=o,n=e.apply(void 0,o)),n}};function ope(e){var t;return e===0?t=1:t=Math.floor(new ft(e).abs().log(10).toNumber())+1,t}function ape(e,t,n){for(var r=new ft(e),o=0,a=[];r.lt(t)&&o<1e5;)a.push(r.toNumber()),r=r.add(n),o++;return a}var ipe=Qp(function(e,t,n){var r=+e,o=+t;return r+n*(o-r)}),spe=Qp(function(e,t,n){var r=t-+e;return r=r||1/0,(n-e)/r}),cpe=Qp(function(e,t,n){var r=t-+e;return r=r||1/0,Math.max(0,Math.min(1,(n-e)/r))});const Jp={rangeStep:ape,getDigitCount:ope,interpolateNumber:ipe,uninterpolateNumber:spe,uninterpolateTruncation:cpe};function Y_(e){return dpe(e)||upe(e)||BB(e)||lpe()}function lpe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function upe(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function dpe(e){if(Array.isArray(e))return K_(e)}function tu(e,t){return hpe(e)||ppe(e,t)||BB(e,t)||fpe()}function fpe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function BB(e,t){if(e){if(typeof e=="string")return K_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return K_(e,t)}}function K_(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ppe(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var n=[],r=!0,o=!1,a=void 0;try{for(var i=e[Symbol.iterator](),s;!(r=(s=i.next()).done)&&(n.push(s.value),!(t&&n.length===t));r=!0);}catch(c){o=!0,a=c}finally{try{!r&&i.return!=null&&i.return()}finally{if(o)throw a}}return n}}function hpe(e){if(Array.isArray(e))return e}function $B(e){var t=tu(e,2),n=t[0],r=t[1],o=n,a=r;return n>r&&(o=r,a=n),[o,a]}function zB(e,t,n){if(e.lte(0))return new ft(0);var r=Jp.getDigitCount(e.toNumber()),o=new ft(10).pow(r),a=e.div(o),i=r!==1?.05:.1,s=new ft(Math.ceil(a.div(i).toNumber())).add(n).mul(i),c=s.mul(o);return t?c:new ft(Math.ceil(c))}function mpe(e,t,n){var r=1,o=new ft(e);if(!o.isint()&&n){var a=Math.abs(e);a<1?(r=new ft(10).pow(Jp.getDigitCount(e)-1),o=new ft(Math.floor(o.div(r).toNumber())).mul(r)):a>1&&(o=new ft(Math.floor(e)))}else e===0?o=new ft(Math.floor((t-1)/2)):n||(o=new ft(Math.floor(e)));var i=Math.floor((t-1)/2),s=rpe(npe(function(c){return o.add(new ft(c-i).mul(r)).toNumber()}),W_);return s(0,t)}function VB(e,t,n,r){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(n-1)))return{step:new ft(0),tickMin:new ft(0),tickMax:new ft(0)};var a=zB(new ft(t).sub(e).div(n-1),r,o),i;e<=0&&t>=0?i=new ft(0):(i=new ft(e).add(t).div(2),i=i.sub(new ft(i).mod(a)));var s=Math.ceil(i.sub(e).div(a).toNumber()),c=Math.ceil(new ft(t).sub(i).div(a).toNumber()),l=s+c+1;return l>n?VB(e,t,n,r,o+1):(l<n&&(c=t>0?c+(n-l):c,s=t>0?s:s+(n-l)),{step:a,tickMin:i.sub(new ft(s).mul(a)),tickMax:i.add(new ft(c).mul(a))})}function ype(e){var t=tu(e,2),n=t[0],r=t[1],o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=Math.max(o,2),s=$B([n,r]),c=tu(s,2),l=c[0],u=c[1];if(l===-1/0||u===1/0){var d=u===1/0?[l].concat(Y_(W_(0,o-1).map(function(){return 1/0}))):[].concat(Y_(W_(0,o-1).map(function(){return-1/0})),[u]);return n>r?q_(d):d}if(l===u)return mpe(l,o,a);var f=VB(l,u,i,a),p=f.step,y=f.tickMin,m=f.tickMax,v=Jp.rangeStep(y,m.add(new ft(.1).mul(p)),p);return n>r?q_(v):v}function gpe(e,t){var n=tu(e,2),r=n[0],o=n[1],a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=$B([r,o]),s=tu(i,2),c=s[0],l=s[1];if(c===-1/0||l===1/0)return[r,o];if(c===l)return[c];var u=Math.max(t,2),d=zB(new ft(l).sub(c).div(u-1),a,0),f=[].concat(Y_(Jp.rangeStep(new ft(c),new ft(l).sub(new ft(.99).mul(d)),d)),[l]);return r>o?q_(f):f}var vpe=FB(ype),bpe=FB(gpe),xpe="Invariant failed";function Za(e,t){throw new Error(xpe)}var wpe=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Ms(e){"@babel/helpers - typeof";return Ms=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ms(e)}function Gp(){return Gp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Gp.apply(this,arguments)}function _pe(e,t){return Cpe(e)||Spe(e,t)||Epe(e,t)||jpe()}function jpe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Epe(e,t){if(e){if(typeof e=="string")return UB(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return UB(e,t)}}function UB(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Spe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,o,a,i,s=[],c=!0,l=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(c=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(u){l=!0,o=u}finally{try{if(!c&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return s}}function Cpe(e){if(Array.isArray(e))return e}function Ope(e,t){if(e==null)return{};var n=Npe(e,t),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Npe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Mpe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kpe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,qB(r.key),r)}}function Ppe(e,t,n){return t&&kpe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ape(e,t,n){return t=Zp(t),Tpe(e,HB()?Reflect.construct(t,n||[],Zp(e).constructor):t.apply(e,n))}function Tpe(e,t){if(t&&(Ms(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Rpe(e)}function Rpe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function HB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(HB=function(){return!!e})()}function Zp(e){return Zp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Zp(e)}function Ipe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&X_(e,t)}function X_(e,t){return X_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},X_(e,t)}function WB(e,t,n){return t=qB(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qB(e){var t=Dpe(e,"string");return Ms(t)=="symbol"?t:t+""}function Dpe(e,t){if(Ms(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Ms(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var eh=function(e){function t(){return Mpe(this,t),Ape(this,t,arguments)}return Ipe(t,e),Ppe(t,[{key:"render",value:function(){var n=this.props,r=n.offset,o=n.layout,a=n.width,i=n.dataKey,s=n.data,c=n.dataPointFormatter,l=n.xAxis,u=n.yAxis,d=Ope(n,wpe),f=ot(d,!1);this.props.direction==="x"&&l.type!=="number"&&Za();var p=s.map(function(y){var m=c(y,i),v=m.x,b=m.y,x=m.value,_=m.errorVal;if(!_)return null;var w=[],j,E;if(Array.isArray(_)){var S=_pe(_,2);j=S[0],E=S[1]}else j=E=_;if(o==="vertical"){var O=l.scale,k=b+r,N=k+a,P=k-a,R=O(x-j),A=O(x+E);w.push({x1:A,y1:N,x2:A,y2:P}),w.push({x1:R,y1:k,x2:A,y2:k}),w.push({x1:R,y1:N,x2:R,y2:P})}else if(o==="horizontal"){var C=u.scale,M=v+r,T=M-a,D=M+a,I=C(x-j),L=C(x+E);w.push({x1:T,y1:L,x2:D,y2:L}),w.push({x1:M,y1:I,x2:M,y2:L}),w.push({x1:T,y1:I,x2:D,y2:I})}return V.createElement(Wt,Gp({className:"recharts-errorBar",key:"bar-".concat(w.map(function(B){return"".concat(B.x1,"-").concat(B.x2,"-").concat(B.y1,"-").concat(B.y2)}))},f),w.map(function(B){return V.createElement("line",Gp({},B,{key:"line-".concat(B.x1,"-").concat(B.x2,"-").concat(B.y1,"-").concat(B.y2)}))}))});return V.createElement(Wt,{className:"recharts-errorBars"},p)}}])}(V.Component);WB(eh,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"}),WB(eh,"displayName","ErrorBar");function nu(e){"@babel/helpers - typeof";return nu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nu(e)}function YB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function ei(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?YB(Object(n),!0).forEach(function(r){Lpe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):YB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Lpe(e,t,n){return t=Fpe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fpe(e){var t=Bpe(e,"string");return nu(t)=="symbol"?t:t+""}function Bpe(e,t){if(nu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(nu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var KB=function(e){var t=e.children,n=e.formattedGraphicalItems,r=e.legendWidth,o=e.legendContent,a=Bn(t,vs);if(!a)return null;var i=vs.defaultProps,s=i!==void 0?ei(ei({},i),a.props):{},c;return a.props&&a.props.payload?c=a.props&&a.props.payload:o==="children"?c=(n||[]).reduce(function(l,u){var d=u.item,f=u.props,p=f.sectors||f.data||[];return l.concat(p.map(function(y){return{type:a.props.iconType||d.props.legendType,value:y.name,color:y.fill,payload:y}}))},[]):c=(n||[]).map(function(l){var u=l.item,d=u.type.defaultProps,f=d!==void 0?ei(ei({},d),u.props):{},p=f.dataKey,y=f.name,m=f.legendType,v=f.hide;return{inactive:v,dataKey:p,type:s.iconType||m||"square",color:J_(u),value:y||p,payload:f}}),ei(ei(ei({},s),vs.getWithHeight(a,r)),{},{payload:c,item:a})};function ru(e){"@babel/helpers - typeof";return ru=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ru(e)}function XB(e){return Upe(e)||Vpe(e)||zpe(e)||$pe()}function $pe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zpe(e,t){if(e){if(typeof e=="string")return Q_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Q_(e,t)}}function Vpe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Upe(e){if(Array.isArray(e))return Q_(e)}function Q_(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function QB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Pt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?QB(Object(n),!0).forEach(function(r){ks(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):QB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ks(e,t,n){return t=Hpe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Hpe(e){var t=Wpe(e,"string");return ru(t)=="symbol"?t:t+""}function Wpe(e,t){if(ru(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(ru(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ur(e,t,n){return at(e)||at(t)?n:zt(t)?Yn(e,t,n):We(t)?t(e):n}function th(e,t,n,r){var o=Ufe(e,function(s){return Ur(s,t)});if(n==="number"){var a=o.filter(function(s){return me(s)||parseFloat(s)});return a.length?[Kp(a),Yp(a)]:[1/0,-1/0]}var i=r?o.filter(function(s){return!at(s)}):o;return i.map(function(s){return zt(s)||s instanceof Date?s:""})}var qpe=function(e){var t,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,a=-1,i=(t=n==null?void 0:n.length)!==null&&t!==void 0?t:0;if(i<=1)return 0;if(o&&o.axisType==="angleAxis"&&Math.abs(Math.abs(o.range[1]-o.range[0])-360)<=1e-6)for(var s=o.range,c=0;c<i;c++){var l=c>0?r[c-1].coordinate:r[i-1].coordinate,u=r[c].coordinate,d=c>=i-1?r[0].coordinate:r[c+1].coordinate,f=void 0;if(xr(u-l)!==xr(d-u)){var p=[];if(xr(d-u)===xr(s[1]-s[0])){f=d;var y=u+s[1]-s[0];p[0]=Math.min(y,(y+l)/2),p[1]=Math.max(y,(y+l)/2)}else{f=l;var m=d+s[1]-s[0];p[0]=Math.min(u,(m+u)/2),p[1]=Math.max(u,(m+u)/2)}var v=[Math.min(u,(f+u)/2),Math.max(u,(f+u)/2)];if(e>v[0]&&e<=v[1]||e>=p[0]&&e<=p[1]){a=r[c].index;break}}else{var b=Math.min(l,d),x=Math.max(l,d);if(e>(b+u)/2&&e<=(x+u)/2){a=r[c].index;break}}}else for(var _=0;_<i;_++)if(_===0&&e<=(n[_].coordinate+n[_+1].coordinate)/2||_>0&&_<i-1&&e>(n[_].coordinate+n[_-1].coordinate)/2&&e<=(n[_].coordinate+n[_+1].coordinate)/2||_===i-1&&e>(n[_].coordinate+n[_-1].coordinate)/2){a=n[_].index;break}return a},J_=function(e){var t,n=e,r=n.type.displayName,o=(t=e.type)!==null&&t!==void 0&&t.defaultProps?Pt(Pt({},e.type.defaultProps),e.props):e.props,a=o.stroke,i=o.fill,s;switch(r){case"Line":s=a;break;case"Area":case"Radar":s=a&&a!=="none"?a:i;break;default:s=i;break}return s},Ype=function(e){var t=e.barSize,n=e.totalSize,r=e.stackGroups,o=r===void 0?{}:r;if(!o)return{};for(var a={},i=Object.keys(o),s=0,c=i.length;s<c;s++)for(var l=o[i[s]].stackGroups,u=Object.keys(l),d=0,f=u.length;d<f;d++){var p=l[u[d]],y=p.items,m=p.cateAxisId,v=y.filter(function(E){return Co(E.type).indexOf("Bar")>=0});if(v&&v.length){var b=v[0].type.defaultProps,x=b!==void 0?Pt(Pt({},b),v[0].props):v[0].props,_=x.barSize,w=x[m];a[w]||(a[w]=[]);var j=at(_)?t:_;a[w].push({item:v[0],stackList:v.slice(1),barSize:at(j)?void 0:Wa(j,n,0)})}}return a},Kpe=function(e){var t=e.barGap,n=e.barCategoryGap,r=e.bandSize,o=e.sizeList,a=o===void 0?[]:o,i=e.maxBarSize,s=a.length;if(s<1)return null;var c=Wa(t,r,0,!0),l,u=[];if(a[0].barSize===+a[0].barSize){var d=!1,f=r/s,p=a.reduce(function(_,w){return _+w.barSize||0},0);p+=(s-1)*c,p>=r&&(p-=(s-1)*c,c=0),p>=r&&f>0&&(d=!0,f*=.9,p=s*f);var y=(r-p)/2>>0,m={offset:y-c,size:0};l=a.reduce(function(_,w){var j={item:w.item,position:{offset:m.offset+m.size+c,size:d?f:w.barSize}},E=[].concat(XB(_),[j]);return m=E[E.length-1].position,w.stackList&&w.stackList.length&&w.stackList.forEach(function(S){E.push({item:S,position:m})}),E},u)}else{var v=Wa(n,r,0,!0);r-2*v-(s-1)*c<=0&&(c=0);var b=(r-2*v-(s-1)*c)/s;b>1&&(b>>=0);var x=i===+i?Math.min(b,i):b;l=a.reduce(function(_,w,j){var E=[].concat(XB(_),[{item:w.item,position:{offset:v+(b+c)*j+(b-x)/2,size:x}}]);return w.stackList&&w.stackList.length&&w.stackList.forEach(function(S){E.push({item:S,position:E[E.length-1].position})}),E},u)}return l},Xpe=function(e,t,n,r){var o=n.children,a=n.width,i=n.margin,s=a-(i.left||0)-(i.right||0),c=KB({children:o,legendWidth:s});if(c){var l=r||{},u=l.width,d=l.height,f=c.align,p=c.verticalAlign,y=c.layout;if((y==="vertical"||y==="horizontal"&&p==="middle")&&f!=="center"&&me(e[f]))return Pt(Pt({},e),{},ks({},f,e[f]+(u||0)));if((y==="horizontal"||y==="vertical"&&f==="center")&&p!=="middle"&&me(e[p]))return Pt(Pt({},e),{},ks({},p,e[p]+(d||0)))}return e},Qpe=function(e,t,n){return at(t)?!0:e==="horizontal"?t==="yAxis":e==="vertical"||n==="x"?t==="xAxis":n==="y"?t==="yAxis":!0},JB=function(e,t,n,r,o){var a=t.props.children,i=wr(a,eh).filter(function(c){return Qpe(r,o,c.props.direction)});if(i&&i.length){var s=i.map(function(c){return c.props.dataKey});return e.reduce(function(c,l){var u=Ur(l,n);if(at(u))return c;var d=Array.isArray(u)?[Kp(u),Yp(u)]:[u,u],f=s.reduce(function(p,y){var m=Ur(l,y,0),v=d[0]-Math.abs(Array.isArray(m)?m[0]:m),b=d[1]+Math.abs(Array.isArray(m)?m[1]:m);return[Math.min(v,p[0]),Math.max(b,p[1])]},[1/0,-1/0]);return[Math.min(f[0],c[0]),Math.max(f[1],c[1])]},[1/0,-1/0])}return null},Jpe=function(e,t,n,r,o){var a=t.map(function(i){return JB(e,i,n,o,r)}).filter(function(i){return!at(i)});return a&&a.length?a.reduce(function(i,s){return[Math.min(i[0],s[0]),Math.max(i[1],s[1])]},[1/0,-1/0]):null},GB=function(e,t,n,r,o){var a=t.map(function(s){var c=s.props.dataKey;return n==="number"&&c&&JB(e,s,c,r)||th(e,c,n,o)});if(n==="number")return a.reduce(function(s,c){return[Math.min(s[0],c[0]),Math.max(s[1],c[1])]},[1/0,-1/0]);var i={};return a.reduce(function(s,c){for(var l=0,u=c.length;l<u;l++)i[c[l]]||(i[c[l]]=!0,s.push(c[l]));return s},[])},ZB=function(e,t){return e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis"},e6=function(e,t,n,r){if(r)return e.map(function(s){return s.coordinate});var o,a,i=e.map(function(s){return s.coordinate===t&&(o=!0),s.coordinate===n&&(a=!0),s.coordinate});return o||i.push(t),a||i.push(n),i},Do=function(e,t,n){if(!e)return null;var r=e.scale,o=e.duplicateDomain,a=e.type,i=e.range,s=e.realScaleType==="scaleBand"?r.bandwidth()/2:2,c=(t||n)&&a==="category"&&r.bandwidth?r.bandwidth()/s:0;if(c=e.axisType==="angleAxis"&&(i==null?void 0:i.length)>=2?xr(i[0]-i[1])*2*c:c,t&&(e.ticks||e.niceTicks)){var l=(e.ticks||e.niceTicks).map(function(u){var d=o?o.indexOf(u):u;return{coordinate:r(d)+c,value:u,offset:c}});return l.filter(function(u){return!Rl(u.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(u,d){return{coordinate:r(u)+c,value:u,index:d,offset:c}}):r.ticks&&!n?r.ticks(e.tickCount).map(function(u){return{coordinate:r(u)+c,value:u,offset:c}}):r.domain().map(function(u,d){return{coordinate:r(u)+c,value:o?o[u]:u,index:d,offset:c}})},G_=new WeakMap,nh=function(e,t){if(typeof t!="function")return e;G_.has(e)||G_.set(e,new WeakMap);var n=G_.get(e);if(n.has(t))return n.get(t);var r=function(){e.apply(void 0,arguments),t.apply(void 0,arguments)};return n.set(t,r),r},Gpe=function(e,t,n){var r=e.scale,o=e.type,a=e.layout,i=e.axisType;if(r==="auto")return a==="radial"&&i==="radiusAxis"?{scale:ql(),realScaleType:"band"}:a==="radial"&&i==="angleAxis"?{scale:Fp(),realScaleType:"linear"}:o==="category"&&t&&(t.indexOf("LineChart")>=0||t.indexOf("AreaChart")>=0||t.indexOf("ComposedChart")>=0&&!n)?{scale:Yl(),realScaleType:"point"}:o==="category"?{scale:ql(),realScaleType:"band"}:{scale:Fp(),realScaleType:"linear"};if(Tl(r)){var s="scale".concat(pp(r));return{scale:(vB[s]||Yl)(),realScaleType:vB[s]?s:"point"}}return We(r)?{scale:r}:{scale:Yl(),realScaleType:"point"}},t6=1e-4,Zpe=function(e){var t=e.domain();if(!(!t||t.length<=2)){var n=t.length,r=e.range(),o=Math.min(r[0],r[1])-t6,a=Math.max(r[0],r[1])+t6,i=e(t[0]),s=e(t[n-1]);(i<o||i>a||s<o||s>a)&&e.domain([t[0],t[n-1]])}},ehe=function(e,t){if(!e)return null;for(var n=0,r=e.length;n<r;n++)if(e[n].item===t)return e[n].position;return null},the=function(e,t){if(!t||t.length!==2||!me(t[0])||!me(t[1]))return e;var n=Math.min(t[0],t[1]),r=Math.max(t[0],t[1]),o=[e[0],e[1]];return(!me(e[0])||e[0]<n)&&(o[0]=n),(!me(e[1])||e[1]>r)&&(o[1]=r),o[0]>r&&(o[0]=r),o[1]<n&&(o[1]=n),o},nhe=function(e){var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var o=0,a=0,i=0;i<t;++i){var s=Rl(e[i][n][1])?e[i][n][0]:e[i][n][1];s>=0?(e[i][n][0]=o,e[i][n][1]=o+s,o=e[i][n][1]):(e[i][n][0]=a,e[i][n][1]=a+s,a=e[i][n][1])}},rhe=function(e){var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var o=0,a=0;a<t;++a){var i=Rl(e[a][n][1])?e[a][n][0]:e[a][n][1];i>=0?(e[a][n][0]=o,e[a][n][1]=o+i,o=e[a][n][1]):(e[a][n][0]=0,e[a][n][1]=0)}},ohe={sign:nhe,expand:ace,none:ms,silhouette:ice,wiggle:sce,positive:rhe},ahe=function(e,t,n){var r=t.map(function(i){return i.props.dataKey}),o=ohe[n],a=oce().keys(r).value(function(i,s){return+Ur(i,s,0)}).order(i1).offset(o);return a(e)},ihe=function(e,t,n,r,o,a){if(!e)return null;var i=a?t.reverse():t,s={},c=i.reduce(function(u,d){var f,p=(f=d.type)!==null&&f!==void 0&&f.defaultProps?Pt(Pt({},d.type.defaultProps),d.props):d.props,y=p.stackId,m=p.hide;if(m)return u;var v=p[n],b=u[v]||{hasStack:!1,stackGroups:{}};if(zt(y)){var x=b.stackGroups[y]||{numericAxisId:n,cateAxisId:r,items:[]};x.items.push(d),b.hasStack=!0,b.stackGroups[y]=x}else b.stackGroups[up("_stackId_")]={numericAxisId:n,cateAxisId:r,items:[d]};return Pt(Pt({},u),{},ks({},v,b))},s),l={};return Object.keys(c).reduce(function(u,d){var f=c[d];if(f.hasStack){var p={};f.stackGroups=Object.keys(f.stackGroups).reduce(function(y,m){var v=f.stackGroups[m];return Pt(Pt({},y),{},ks({},m,{numericAxisId:n,cateAxisId:r,items:v.items,stackedData:ahe(e,v.items,o)}))},p)}return Pt(Pt({},u),{},ks({},d,f))},l)},she=function(e,t){var n=t.realScaleType,r=t.type,o=t.tickCount,a=t.originalDomain,i=t.allowDecimals,s=n||t.scale;if(s!=="auto"&&s!=="linear")return null;if(o&&r==="number"&&a&&(a[0]==="auto"||a[1]==="auto")){var c=e.domain();if(!c.length)return null;var l=vpe(c,o,i);return e.domain([Kp(l),Yp(l)]),{niceTicks:l}}if(o&&r==="number"){var u=e.domain(),d=bpe(u,o,i);return{niceTicks:d}}return null},n6=function(e){var t=e.axis,n=e.ticks,r=e.offset,o=e.bandSize,a=e.entry,i=e.index;if(t.type==="category")return n[i]?n[i].coordinate+r:null;var s=Ur(a,t.dataKey,t.domain[i]);return at(s)?null:t.scale(s)-o/2+r},che=function(e){var t=e.numericAxis,n=t.scale.domain();if(t.type==="number"){var r=Math.min(n[0],n[1]),o=Math.max(n[0],n[1]);return r<=0&&o>=0?0:o<0?o:r}return n[0]},lhe=function(e,t){var n,r=(n=e.type)!==null&&n!==void 0&&n.defaultProps?Pt(Pt({},e.type.defaultProps),e.props):e.props,o=r.stackId;if(zt(o)){var a=t[o];if(a){var i=a.items.indexOf(e);return i>=0?a.stackedData[i]:null}}return null},uhe=function(e){return e.reduce(function(t,n){return[Kp(n.concat([t[0]]).filter(me)),Yp(n.concat([t[1]]).filter(me))]},[1/0,-1/0])},r6=function(e,t,n){return Object.keys(e).reduce(function(r,o){var a=e[o],i=a.stackedData,s=i.reduce(function(c,l){var u=uhe(l.slice(t,n+1));return[Math.min(c[0],u[0]),Math.max(c[1],u[1])]},[1/0,-1/0]);return[Math.min(s[0],r[0]),Math.max(s[1],r[1])]},[1/0,-1/0]).map(function(r){return r===1/0||r===-1/0?0:r})},o6=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,a6=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Z_=function(e,t,n){if(We(e))return e(t,n);if(!Array.isArray(e))return t;var r=[];if(me(e[0]))r[0]=n?e[0]:Math.min(e[0],t[0]);else if(o6.test(e[0])){var o=+o6.exec(e[0])[1];r[0]=t[0]-o}else We(e[0])?r[0]=e[0](t[0]):r[0]=t[0];if(me(e[1]))r[1]=n?e[1]:Math.max(e[1],t[1]);else if(a6.test(e[1])){var a=+a6.exec(e[1])[1];r[1]=t[1]+a}else We(e[1])?r[1]=e[1](t[1]):r[1]=t[1];return r},rh=function(e,t,n){if(e&&e.scale&&e.scale.bandwidth){var r=e.scale.bandwidth();if(!n||r>0)return r}if(e&&t&&t.length>=2){for(var o=H1(t,function(u){return u.coordinate}),a=1/0,i=1,s=o.length;i<s;i++){var c=o[i],l=o[i-1];a=Math.min((c.coordinate||0)-(l.coordinate||0),a)}return a===1/0?0:a}return n?void 0:0},i6=function(e,t,n){return!e||!e.length||$_(e,Yn(n,"type.defaultProps.domain"))?t:e},s6=function(e,t){var n=e.type.defaultProps?Pt(Pt({},e.type.defaultProps),e.props):e.props,r=n.dataKey,o=n.name,a=n.unit,i=n.formatter,s=n.tooltipType,c=n.chartType,l=n.hide;return Pt(Pt({},ot(e,!1)),{},{dataKey:r,unit:a,formatter:i,name:o||r,color:J_(e),value:Ur(t,r),type:s,payload:t,chartType:c,hide:l})};function ou(e){"@babel/helpers - typeof";return ou=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ou(e)}function c6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function l6(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?c6(Object(n),!0).forEach(function(r){dhe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c6(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function dhe(e,t,n){return t=fhe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fhe(e){var t=phe(e,"string");return ou(t)=="symbol"?t:t+""}function phe(e,t){if(ou(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(ou(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var oh=Math.PI/180,hhe=function(e){return e*180/Math.PI},Gt=function(e,t,n,r){return{x:e+Math.cos(-oh*r)*n,y:t+Math.sin(-oh*r)*n}},mhe=function(e,t){var n=e.x,r=e.y,o=t.x,a=t.y;return Math.sqrt(Math.pow(n-o,2)+Math.pow(r-a,2))},yhe=function(e,t){var n=e.x,r=e.y,o=t.cx,a=t.cy,i=mhe({x:n,y:r},{x:o,y:a});if(i<=0)return{radius:i};var s=(n-o)/i,c=Math.acos(s);return r>a&&(c=2*Math.PI-c),{radius:i,angle:hhe(c),angleInRadian:c}},ghe=function(e){var t=e.startAngle,n=e.endAngle,r=Math.floor(t/360),o=Math.floor(n/360),a=Math.min(r,o);return{startAngle:t-a*360,endAngle:n-a*360}},vhe=function(e,t){var n=t.startAngle,r=t.endAngle,o=Math.floor(n/360),a=Math.floor(r/360),i=Math.min(o,a);return e+i*360},u6=function(e,t){var n=e.x,r=e.y,o=yhe({x:n,y:r},t),a=o.radius,i=o.angle,s=t.innerRadius,c=t.outerRadius;if(a<s||a>c)return!1;if(a===0)return!0;var l=ghe(t),u=l.startAngle,d=l.endAngle,f=i,p;if(u<=d){for(;f>d;)f-=360;for(;f<u;)f+=360;p=f>=u&&f<=d}else{for(;f>u;)f-=360;for(;f<d;)f+=360;p=f>=d&&f<=u}return p?l6(l6({},t),{},{radius:a,angle:vhe(f,t)}):null};function au(e){"@babel/helpers - typeof";return au=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},au(e)}var bhe=["offset"];function xhe(e){return Ehe(e)||jhe(e)||_he(e)||whe()}function whe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _he(e,t){if(e){if(typeof e=="string")return ej(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ej(e,t)}}function jhe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Ehe(e){if(Array.isArray(e))return ej(e)}function ej(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function She(e,t){if(e==null)return{};var n=Che(e,t),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Che(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function d6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Ut(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?d6(Object(n),!0).forEach(function(r){Ohe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d6(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Ohe(e,t,n){return t=Nhe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Nhe(e){var t=Mhe(e,"string");return au(t)=="symbol"?t:t+""}function Mhe(e,t){if(au(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(au(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function iu(){return iu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},iu.apply(this,arguments)}var khe=function(e){var t=e.value,n=e.formatter,r=at(e.children)?t:e.children;return We(n)?n(r):r},Phe=function(e,t){var n=xr(t-e),r=Math.min(Math.abs(t-e),360);return n*r},Ahe=function(e,t,n){var r=e.position,o=e.viewBox,a=e.offset,i=e.className,s=o,c=s.cx,l=s.cy,u=s.innerRadius,d=s.outerRadius,f=s.startAngle,p=s.endAngle,y=s.clockWise,m=(u+d)/2,v=Phe(f,p),b=v>=0?1:-1,x,_;r==="insideStart"?(x=f+b*a,_=y):r==="insideEnd"?(x=p-b*a,_=!y):r==="end"&&(x=p+b*a,_=y),_=v<=0?_:!_;var w=Gt(c,l,m,x),j=Gt(c,l,m,x+(_?1:-1)*359),E="M".concat(w.x,",").concat(w.y,`
    A`).concat(m,",").concat(m,",0,1,").concat(_?0:1,`,
    `).concat(j.x,",").concat(j.y),S=at(e.id)?up("recharts-radial-line-"):e.id;return V.createElement("text",iu({},n,{dominantBaseline:"central",className:lt("recharts-radial-bar-label",i)}),V.createElement("defs",null,V.createElement("path",{id:S,d:E})),V.createElement("textPath",{xlinkHref:"#".concat(S)},t))},The=function(e){var t=e.viewBox,n=e.offset,r=e.position,o=t,a=o.cx,i=o.cy,s=o.innerRadius,c=o.outerRadius,l=o.startAngle,u=o.endAngle,d=(l+u)/2;if(r==="outside"){var f=Gt(a,i,c+n,d),p=f.x,y=f.y;return{x:p,y,textAnchor:p>=a?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:a,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:a,y:i,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:a,y:i,textAnchor:"middle",verticalAnchor:"end"};var m=(s+c)/2,v=Gt(a,i,m,d),b=v.x,x=v.y;return{x:b,y:x,textAnchor:"middle",verticalAnchor:"middle"}},Rhe=function(e){var t=e.viewBox,n=e.parentViewBox,r=e.offset,o=e.position,a=t,i=a.x,s=a.y,c=a.width,l=a.height,u=l>=0?1:-1,d=u*r,f=u>0?"end":"start",p=u>0?"start":"end",y=c>=0?1:-1,m=y*r,v=y>0?"end":"start",b=y>0?"start":"end";if(o==="top"){var x={x:i+c/2,y:s-u*r,textAnchor:"middle",verticalAnchor:f};return Ut(Ut({},x),n?{height:Math.max(s-n.y,0),width:c}:{})}if(o==="bottom"){var _={x:i+c/2,y:s+l+d,textAnchor:"middle",verticalAnchor:p};return Ut(Ut({},_),n?{height:Math.max(n.y+n.height-(s+l),0),width:c}:{})}if(o==="left"){var w={x:i-m,y:s+l/2,textAnchor:v,verticalAnchor:"middle"};return Ut(Ut({},w),n?{width:Math.max(w.x-n.x,0),height:l}:{})}if(o==="right"){var j={x:i+c+m,y:s+l/2,textAnchor:b,verticalAnchor:"middle"};return Ut(Ut({},j),n?{width:Math.max(n.x+n.width-j.x,0),height:l}:{})}var E=n?{width:c,height:l}:{};return o==="insideLeft"?Ut({x:i+m,y:s+l/2,textAnchor:b,verticalAnchor:"middle"},E):o==="insideRight"?Ut({x:i+c-m,y:s+l/2,textAnchor:v,verticalAnchor:"middle"},E):o==="insideTop"?Ut({x:i+c/2,y:s+d,textAnchor:"middle",verticalAnchor:p},E):o==="insideBottom"?Ut({x:i+c/2,y:s+l-d,textAnchor:"middle",verticalAnchor:f},E):o==="insideTopLeft"?Ut({x:i+m,y:s+d,textAnchor:b,verticalAnchor:p},E):o==="insideTopRight"?Ut({x:i+c-m,y:s+d,textAnchor:v,verticalAnchor:p},E):o==="insideBottomLeft"?Ut({x:i+m,y:s+l-d,textAnchor:b,verticalAnchor:f},E):o==="insideBottomRight"?Ut({x:i+c-m,y:s+l-d,textAnchor:v,verticalAnchor:f},E):fs(o)&&(me(o.x)||Ha(o.x))&&(me(o.y)||Ha(o.y))?Ut({x:i+Wa(o.x,c),y:s+Wa(o.y,l),textAnchor:"end",verticalAnchor:"end"},E):Ut({x:i+c/2,y:s+l/2,textAnchor:"middle",verticalAnchor:"middle"},E)},Ihe=function(e){return"cx"in e&&me(e.cx)};function rn(e){var t=e.offset,n=t===void 0?5:t,r=She(e,bhe),o=Ut({offset:n},r),a=o.viewBox,i=o.position,s=o.value,c=o.children,l=o.content,u=o.className,d=u===void 0?"":u,f=o.textBreakAll;if(!a||at(s)&&at(c)&&!g.isValidElement(l)&&!We(l))return null;if(g.isValidElement(l))return g.cloneElement(l,o);var p;if(We(l)){if(p=g.createElement(l,o),g.isValidElement(p))return p}else p=khe(o);var y=Ihe(a),m=ot(o,!0);if(y&&(i==="insideStart"||i==="insideEnd"||i==="end"))return Ahe(o,p,m);var v=y?The(o):Rhe(o);return V.createElement(Ap,iu({className:lt("recharts-label",d)},m,v,{breakAll:f}),p)}rn.displayName="Label";var f6=function(e){var t=e.cx,n=e.cy,r=e.angle,o=e.startAngle,a=e.endAngle,i=e.r,s=e.radius,c=e.innerRadius,l=e.outerRadius,u=e.x,d=e.y,f=e.top,p=e.left,y=e.width,m=e.height,v=e.clockWise,b=e.labelViewBox;if(b)return b;if(me(y)&&me(m)){if(me(u)&&me(d))return{x:u,y:d,width:y,height:m};if(me(f)&&me(p))return{x:f,y:p,width:y,height:m}}return me(u)&&me(d)?{x:u,y:d,width:0,height:0}:me(t)&&me(n)?{cx:t,cy:n,startAngle:o||r||0,endAngle:a||r||0,innerRadius:c||0,outerRadius:l||s||i||0,clockWise:v}:e.viewBox?e.viewBox:{}},Dhe=function(e,t){return e?e===!0?V.createElement(rn,{key:"label-implicit",viewBox:t}):zt(e)?V.createElement(rn,{key:"label-implicit",viewBox:t,value:e}):g.isValidElement(e)?e.type===rn?g.cloneElement(e,{key:"label-implicit",viewBox:t}):V.createElement(rn,{key:"label-implicit",content:e,viewBox:t}):We(e)?V.createElement(rn,{key:"label-implicit",content:e,viewBox:t}):fs(e)?V.createElement(rn,iu({viewBox:t},e,{key:"label-implicit"})):null:null},Lhe=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var r=e.children,o=f6(e),a=wr(r,rn).map(function(s,c){return g.cloneElement(s,{viewBox:t||o,key:"label-".concat(c)})});if(!n)return a;var i=Dhe(e.label,t||o);return[i].concat(xhe(a))};rn.parseViewBox=f6,rn.renderCallByParent=Lhe;var tj,p6;jS=function(){if(p6)return tj;p6=1;function e(t){var n=t==null?0:t.length;return n?t[n-1]:void 0}return tj=e,tj};var Fhe=jS();IE=Xe(Fhe);function su(e){"@babel/helpers - typeof";return su=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},su(e)}var Bhe=["valueAccessor"],$he=["data","dataKey","clockWise","id","textBreakAll"];function zhe(e){return Whe(e)||Hhe(e)||Uhe(e)||Vhe()}function Vhe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Uhe(e,t){if(e){if(typeof e=="string")return nj(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nj(e,t)}}function Hhe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Whe(e){if(Array.isArray(e))return nj(e)}function nj(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ah(){return ah=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ah.apply(this,arguments)}function h6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function m6(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?h6(Object(n),!0).forEach(function(r){qhe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h6(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function qhe(e,t,n){return t=Yhe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Yhe(e){var t=Khe(e,"string");return su(t)=="symbol"?t:t+""}function Khe(e,t){if(su(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(su(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function y6(e,t){if(e==null)return{};var n=Xhe(e,t),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Xhe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var Qhe=function(e){return Array.isArray(e.value)?IE(e.value):e.value};function ti(e){var t=e.valueAccessor,n=t===void 0?Qhe:t,r=y6(e,Bhe),o=r.data,a=r.dataKey,i=r.clockWise,s=r.id,c=r.textBreakAll,l=y6(r,$he);return!o||!o.length?null:V.createElement(Wt,{className:"recharts-label-list"},o.map(function(u,d){var f=at(a)?n(u,d):Ur(u&&u.payload,a),p=at(s)?{}:{id:"".concat(s,"-").concat(d)};return V.createElement(rn,ah({},ot(u,!0),l,p,{parentViewBox:u.parentViewBox,value:f,textBreakAll:c,viewBox:rn.parseViewBox(at(i)?u:m6(m6({},u),{},{clockWise:i})),key:"label-".concat(d),index:d}))}))}ti.displayName="LabelList";function Jhe(e,t){return e?e===!0?V.createElement(ti,{key:"labelList-implicit",data:t}):V.isValidElement(e)||We(e)?V.createElement(ti,{key:"labelList-implicit",data:t,content:e}):fs(e)?V.createElement(ti,ah({data:t},e,{key:"labelList-implicit"})):null:null}function Ghe(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var r=e.children,o=wr(r,ti).map(function(i,s){return g.cloneElement(i,{data:t,key:"labelList-".concat(s)})});if(!n)return o;var a=Jhe(e.label,t);return[a].concat(zhe(o))}ti.renderCallByParent=Ghe;function cu(e){"@babel/helpers - typeof";return cu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cu(e)}function rj(){return rj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rj.apply(this,arguments)}function g6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function v6(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?g6(Object(n),!0).forEach(function(r){Zhe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g6(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Zhe(e,t,n){return t=eme(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function eme(e){var t=tme(e,"string");return cu(t)=="symbol"?t:t+""}function tme(e,t){if(cu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(cu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var nme=function(e,t){var n=xr(t-e),r=Math.min(Math.abs(t-e),359.999);return n*r},ih=function(e){var t=e.cx,n=e.cy,r=e.radius,o=e.angle,a=e.sign,i=e.isExternal,s=e.cornerRadius,c=e.cornerIsExternal,l=s*(i?1:-1)+r,u=Math.asin(s/l)/oh,d=c?o:o+a*u,f=Gt(t,n,l,d),p=Gt(t,n,r,d),y=c?o-a*u:o,m=Gt(t,n,l*Math.cos(u*oh),y);return{center:f,circleTangency:p,lineTangency:m,theta:u}},b6=function(e){var t=e.cx,n=e.cy,r=e.innerRadius,o=e.outerRadius,a=e.startAngle,i=e.endAngle,s=nme(a,i),c=a+s,l=Gt(t,n,o,a),u=Gt(t,n,o,c),d="M ".concat(l.x,",").concat(l.y,`
    A `).concat(o,",").concat(o,`,0,
    `).concat(+(Math.abs(s)>180),",").concat(+(a>c),`,
    `).concat(u.x,",").concat(u.y,`
  `);if(r>0){var f=Gt(t,n,r,a),p=Gt(t,n,r,c);d+="L ".concat(p.x,",").concat(p.y,`
            A `).concat(r,",").concat(r,`,0,
            `).concat(+(Math.abs(s)>180),",").concat(+(a<=c),`,
            `).concat(f.x,",").concat(f.y," Z")}else d+="L ".concat(t,",").concat(n," Z");return d},rme=function(e){var t=e.cx,n=e.cy,r=e.innerRadius,o=e.outerRadius,a=e.cornerRadius,i=e.forceCornerRadius,s=e.cornerIsExternal,c=e.startAngle,l=e.endAngle,u=xr(l-c),d=ih({cx:t,cy:n,radius:o,angle:c,sign:u,cornerRadius:a,cornerIsExternal:s}),f=d.circleTangency,p=d.lineTangency,y=d.theta,m=ih({cx:t,cy:n,radius:o,angle:l,sign:-u,cornerRadius:a,cornerIsExternal:s}),v=m.circleTangency,b=m.lineTangency,x=m.theta,_=s?Math.abs(c-l):Math.abs(c-l)-y-x;if(_<0)return i?"M ".concat(p.x,",").concat(p.y,`
        a`).concat(a,",").concat(a,",0,0,1,").concat(a*2,`,0
        a`).concat(a,",").concat(a,",0,0,1,").concat(-a*2,`,0
      `):b6({cx:t,cy:n,innerRadius:r,outerRadius:o,startAngle:c,endAngle:l});var w="M ".concat(p.x,",").concat(p.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(u<0),",").concat(f.x,",").concat(f.y,`
    A`).concat(o,",").concat(o,",0,").concat(+(_>180),",").concat(+(u<0),",").concat(v.x,",").concat(v.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(u<0),",").concat(b.x,",").concat(b.y,`
  `);if(r>0){var j=ih({cx:t,cy:n,radius:r,angle:c,sign:u,isExternal:!0,cornerRadius:a,cornerIsExternal:s}),E=j.circleTangency,S=j.lineTangency,O=j.theta,k=ih({cx:t,cy:n,radius:r,angle:l,sign:-u,isExternal:!0,cornerRadius:a,cornerIsExternal:s}),N=k.circleTangency,P=k.lineTangency,R=k.theta,A=s?Math.abs(c-l):Math.abs(c-l)-O-R;if(A<0&&a===0)return"".concat(w,"L").concat(t,",").concat(n,"Z");w+="L".concat(P.x,",").concat(P.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(u<0),",").concat(N.x,",").concat(N.y,`
      A`).concat(r,",").concat(r,",0,").concat(+(A>180),",").concat(+(u>0),",").concat(E.x,",").concat(E.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(u<0),",").concat(S.x,",").concat(S.y,"Z")}else w+="L".concat(t,",").concat(n,"Z");return w},ome={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},x6=function(e){var t=v6(v6({},ome),e),n=t.cx,r=t.cy,o=t.innerRadius,a=t.outerRadius,i=t.cornerRadius,s=t.forceCornerRadius,c=t.cornerIsExternal,l=t.startAngle,u=t.endAngle,d=t.className;if(a<o||l===u)return null;var f=lt("recharts-sector",d),p=a-o,y=Wa(i,p,0,!0),m;return y>0&&Math.abs(l-u)<360?m=rme({cx:n,cy:r,innerRadius:o,outerRadius:a,cornerRadius:Math.min(y,p/2),forceCornerRadius:s,cornerIsExternal:c,startAngle:l,endAngle:u}):m=b6({cx:n,cy:r,innerRadius:o,outerRadius:a,startAngle:l,endAngle:u}),V.createElement("path",rj({},ot(t,!0),{className:f,d:m,role:"img"}))};function lu(e){"@babel/helpers - typeof";return lu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lu(e)}function oj(){return oj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},oj.apply(this,arguments)}function w6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function _6(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?w6(Object(n),!0).forEach(function(r){ame(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w6(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ame(e,t,n){return t=ime(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ime(e){var t=sme(e,"string");return lu(t)=="symbol"?t:t+""}function sme(e,t){if(lu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(lu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var j6={curveBasisClosed:Yse,curveBasisOpen:Kse,curveBasis:qse,curveBumpX:Ase,curveBumpY:Tse,curveLinearClosed:Xse,curveLinear:gp,curveMonotoneX:Qse,curveMonotoneY:Jse,curveNatural:Gse,curveStep:Zse,curveStepAfter:tce,curveStepBefore:ece},sh=function(e){return e.x===+e.x&&e.y===+e.y},uu=function(e){return e.x},du=function(e){return e.y},cme=function(e,t){if(We(e))return e;var n="curve".concat(pp(e));return(n==="curveMonotone"||n==="curveBump")&&t?j6["".concat(n).concat(t==="vertical"?"Y":"X")]:j6[n]||gp},lme=function(e){var t=e.type,n=t===void 0?"linear":t,r=e.points,o=r===void 0?[]:r,a=e.baseLine,i=e.layout,s=e.connectNulls,c=s===void 0?!1:s,l=cme(n,i),u=c?o.filter(function(y){return sh(y)}):o,d;if(Array.isArray(a)){var f=c?a.filter(function(y){return sh(y)}):a,p=u.map(function(y,m){return _6(_6({},y),{},{base:f[m]})});return i==="vertical"?d=vp().y(du).x1(uu).x0(function(y){return y.base.x}):d=vp().x(uu).y1(du).y0(function(y){return y.base.y}),d.defined(sh).curve(l),d(p)}return i==="vertical"&&me(a)?d=vp().y(du).x1(uu).x0(a):me(a)?d=vp().x(uu).y1(du).y0(a):d=O4().x(uu).y(du),d.defined(sh).curve(l),d(u)},E6=function(e){var t=e.className,n=e.points,r=e.path,o=e.pathRef;if((!n||!n.length)&&!r)return null;var a=n&&n.length?lme(e):r;return V.createElement("path",oj({},ot(e,!1),dp(e),{className:lt("recharts-curve",t),d:a,ref:o}))},S6={exports:{}},aj,C6;function ume(){if(C6)return aj;C6=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return aj=e,aj}var ij,O6;function dme(){if(O6)return ij;O6=1;var e=ume();function t(){}function n(){}return n.resetWarningCache=t,ij=function(){function r(i,s,c,l,u,d){if(d!==e){var f=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw f.name="Invariant Violation",f}}r.isRequired=r;function o(){return r}var a={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:o,element:r,elementType:r,instanceOf:o,node:r,objectOf:o,oneOf:o,oneOfType:o,shape:o,exact:o,checkPropTypes:n,resetWarningCache:t};return a.PropTypes=a,a},ij}var N6;function fme(){return N6||(N6=1,S6.exports=dme()()),S6.exports}var pme=fme();const Fe=Xe(pme);var hme=Object.getOwnPropertyNames,mme=Object.getOwnPropertySymbols,yme=Object.prototype.hasOwnProperty;function M6(e,t){return function(n,r,o){return e(n,r,o)&&t(n,r,o)}}function ch(e){return function(t,n,r){if(!t||!n||typeof t!="object"||typeof n!="object")return e(t,n,r);var o=r.cache,a=o.get(t),i=o.get(n);if(a&&i)return a===n&&i===t;o.set(t,n),o.set(n,t);var s=e(t,n,r);return o.delete(t),o.delete(n),s}}function k6(e){return hme(e).concat(mme(e))}var P6=Object.hasOwn||function(e,t){return yme.call(e,t)};function Ps(e,t){return e||t?e===t:e===t||e!==e&&t!==t}var A6="_owner",T6=Object.getOwnPropertyDescriptor,R6=Object.keys;function gme(e,t,n){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(!n.equals(e[r],t[r],r,r,e,t,n))return!1;return!0}function vme(e,t){return Ps(e.getTime(),t.getTime())}function I6(e,t,n){if(e.size!==t.size)return!1;for(var r={},o=e.entries(),a=0,i,s;(i=o.next())&&!i.done;){for(var c=t.entries(),l=!1,u=0;(s=c.next())&&!s.done;){var d=i.value,f=d[0],p=d[1],y=s.value,m=y[0],v=y[1];!l&&!r[u]&&(l=n.equals(f,m,a,u,e,t,n)&&n.equals(p,v,f,m,e,t,n))&&(r[u]=!0),u++}if(!l)return!1;a++}return!0}function bme(e,t,n){var r=R6(e),o=r.length;if(R6(t).length!==o)return!1;for(var a;o-- >0;)if(a=r[o],a===A6&&(e.$$typeof||t.$$typeof)&&e.$$typeof!==t.$$typeof||!P6(t,a)||!n.equals(e[a],t[a],a,a,e,t,n))return!1;return!0}function fu(e,t,n){var r=k6(e),o=r.length;if(k6(t).length!==o)return!1;for(var a,i,s;o-- >0;)if(a=r[o],a===A6&&(e.$$typeof||t.$$typeof)&&e.$$typeof!==t.$$typeof||!P6(t,a)||!n.equals(e[a],t[a],a,a,e,t,n)||(i=T6(e,a),s=T6(t,a),(i||s)&&(!i||!s||i.configurable!==s.configurable||i.enumerable!==s.enumerable||i.writable!==s.writable)))return!1;return!0}function xme(e,t){return Ps(e.valueOf(),t.valueOf())}function wme(e,t){return e.source===t.source&&e.flags===t.flags}function D6(e,t,n){if(e.size!==t.size)return!1;for(var r={},o=e.values(),a,i;(a=o.next())&&!a.done;){for(var s=t.values(),c=!1,l=0;(i=s.next())&&!i.done;)!c&&!r[l]&&(c=n.equals(a.value,i.value,a.value,i.value,e,t,n))&&(r[l]=!0),l++;if(!c)return!1}return!0}function _me(e,t){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(e[n]!==t[n])return!1;return!0}var jme="[object Arguments]",Eme="[object Boolean]",Sme="[object Date]",Cme="[object Map]",Ome="[object Number]",Nme="[object Object]",Mme="[object RegExp]",kme="[object Set]",Pme="[object String]",Ame=Array.isArray,L6=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,F6=Object.assign,Tme=Object.prototype.toString.call.bind(Object.prototype.toString);function Rme(e){var t=e.areArraysEqual,n=e.areDatesEqual,r=e.areMapsEqual,o=e.areObjectsEqual,a=e.arePrimitiveWrappersEqual,i=e.areRegExpsEqual,s=e.areSetsEqual,c=e.areTypedArraysEqual;return function(l,u,d){if(l===u)return!0;if(l==null||u==null||typeof l!="object"||typeof u!="object")return l!==l&&u!==u;var f=l.constructor;if(f!==u.constructor)return!1;if(f===Object)return o(l,u,d);if(Ame(l))return t(l,u,d);if(L6!=null&&L6(l))return c(l,u,d);if(f===Date)return n(l,u,d);if(f===RegExp)return i(l,u,d);if(f===Map)return r(l,u,d);if(f===Set)return s(l,u,d);var p=Tme(l);return p===Sme?n(l,u,d):p===Mme?i(l,u,d):p===Cme?r(l,u,d):p===kme?s(l,u,d):p===Nme?typeof l.then!="function"&&typeof u.then!="function"&&o(l,u,d):p===jme?o(l,u,d):p===Eme||p===Ome||p===Pme?a(l,u,d):!1}}function Ime(e){var t=e.circular,n=e.createCustomConfig,r=e.strict,o={areArraysEqual:r?fu:gme,areDatesEqual:vme,areMapsEqual:r?M6(I6,fu):I6,areObjectsEqual:r?fu:bme,arePrimitiveWrappersEqual:xme,areRegExpsEqual:wme,areSetsEqual:r?M6(D6,fu):D6,areTypedArraysEqual:r?fu:_me};if(n&&(o=F6({},o,n(o))),t){var a=ch(o.areArraysEqual),i=ch(o.areMapsEqual),s=ch(o.areObjectsEqual),c=ch(o.areSetsEqual);o=F6({},o,{areArraysEqual:a,areMapsEqual:i,areObjectsEqual:s,areSetsEqual:c})}return o}function Dme(e){return function(t,n,r,o,a,i,s){return e(t,n,s)}}function Lme(e){var t=e.circular,n=e.comparator,r=e.createState,o=e.equals,a=e.strict;if(r)return function(s,c){var l=r(),u=l.cache,d=u===void 0?t?new WeakMap:void 0:u,f=l.meta;return n(s,c,{cache:d,equals:o,meta:f,strict:a})};if(t)return function(s,c){return n(s,c,{cache:new WeakMap,equals:o,meta:void 0,strict:a})};var i={cache:void 0,equals:o,meta:void 0,strict:a};return function(s,c){return n(s,c,i)}}var Fme=ua();ua({strict:!0}),ua({circular:!0}),ua({circular:!0,strict:!0}),ua({createInternalComparator:function(){return Ps}}),ua({strict:!0,createInternalComparator:function(){return Ps}}),ua({circular:!0,createInternalComparator:function(){return Ps}}),ua({circular:!0,createInternalComparator:function(){return Ps},strict:!0});function ua(e){e===void 0&&(e={});var t=e.circular,n=t===void 0?!1:t,r=e.createInternalComparator,o=e.createState,a=e.strict,i=a===void 0?!1:a,s=Ime(e),c=Rme(s),l=r?r(c):Dme(c);return Lme({circular:n,comparator:c,createState:o,equals:l,strict:i})}function Bme(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function B6(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,r=function o(a){n<0&&(n=a),a-n>t?(e(a),n=-1):Bme(o)};requestAnimationFrame(r)}function sj(e){"@babel/helpers - typeof";return sj=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sj(e)}function $me(e){return Hme(e)||Ume(e)||Vme(e)||zme()}function zme(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vme(e,t){if(e){if(typeof e=="string")return $6(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $6(e,t)}}function $6(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ume(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Hme(e){if(Array.isArray(e))return e}function Wme(){var e={},t=function(){return null},n=!1,r=function o(a){if(!n){if(Array.isArray(a)){if(!a.length)return;var i=a,s=$me(i),c=s[0],l=s.slice(1);if(typeof c=="number"){B6(o.bind(null,l),c);return}o(c),B6(o.bind(null,l));return}sj(a)==="object"&&(e=a,t(e)),typeof a=="function"&&a()}};return{stop:function(){n=!0},start:function(o){n=!1,r(o)},subscribe:function(o){return t=o,function(){t=function(){return null}}}}}function pu(e){"@babel/helpers - typeof";return pu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pu(e)}function z6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function V6(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?z6(Object(n),!0).forEach(function(r){U6(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z6(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function U6(e,t,n){return t=qme(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qme(e){var t=Yme(e,"string");return pu(t)==="symbol"?t:String(t)}function Yme(e,t){if(pu(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(pu(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Kme=function(e,t){return[Object.keys(e),Object.keys(t)].reduce(function(n,r){return n.filter(function(o){return r.includes(o)})})},Xme=function(e){return e},Qme=function(e){return e.replace(/([A-Z])/g,function(t){return"-".concat(t.toLowerCase())})},hu=function(e,t){return Object.keys(t).reduce(function(n,r){return V6(V6({},n),{},U6({},r,e(r,t[r])))},{})},H6=function(e,t,n){return e.map(function(r){return"".concat(Qme(r)," ").concat(t,"ms ").concat(n)}).join(",")};function Jme(e,t){return eye(e)||Zme(e,t)||W6(e,t)||Gme()}function Gme(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Zme(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,o,a,i,s=[],c=!0,l=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(c=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(u){l=!0,o=u}finally{try{if(!c&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return s}}function eye(e){if(Array.isArray(e))return e}function tye(e){return oye(e)||rye(e)||W6(e)||nye()}function nye(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function W6(e,t){if(e){if(typeof e=="string")return cj(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return cj(e,t)}}function rye(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function oye(e){if(Array.isArray(e))return cj(e)}function cj(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var lh=1e-4,q6=function(e,t){return[0,3*e,3*t-6*e,3*e-3*t+1]},Y6=function(e,t){return e.map(function(n,r){return n*Math.pow(t,r)}).reduce(function(n,r){return n+r})},K6=function(e,t){return function(n){var r=q6(e,t);return Y6(r,n)}},aye=function(e,t){return function(n){var r=q6(e,t),o=[].concat(tye(r.map(function(a,i){return a*i}).slice(1)),[0]);return Y6(o,n)}},X6=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],o=t[1],a=t[2],i=t[3];if(t.length===1)switch(t[0]){case"linear":r=0,o=0,a=1,i=1;break;case"ease":r=.25,o=.1,a=.25,i=1;break;case"ease-in":r=.42,o=0,a=1,i=1;break;case"ease-out":r=.42,o=0,a=.58,i=1;break;case"ease-in-out":r=0,o=0,a=.58,i=1;break;default:{var s=t[0].split("(");if(s[0]==="cubic-bezier"&&s[1].split(")")[0].split(",").length===4){var c=s[1].split(")")[0].split(",").map(function(m){return parseFloat(m)}),l=Jme(c,4);r=l[0],o=l[1],a=l[2],i=l[3]}}}var u=K6(r,a),d=K6(o,i),f=aye(r,a),p=function(m){return m>1?1:m<0?0:m},y=function(m){for(var v=m>1?1:m,b=v,x=0;x<8;++x){var _=u(b)-v,w=f(b);if(Math.abs(_-v)<lh||w<lh)return d(b);b=p(b-_/w)}return d(b)};return y.isStepper=!1,y},iye=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.stiff,n=t===void 0?100:t,r=e.damping,o=r===void 0?8:r,a=e.dt,i=a===void 0?17:a,s=function(c,l,u){var d=-(c-l)*n,f=u*o,p=u+(d-f)*i/1e3,y=u*i/1e3+c;return Math.abs(y-l)<lh&&Math.abs(p)<lh?[l,0]:[y,p]};return s.isStepper=!0,s.dt=i,s},sye=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0];if(typeof r=="string")switch(r){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return X6(r);case"spring":return iye();default:if(r.split("(")[0]==="cubic-bezier")return X6(r)}return typeof r=="function"?r:null};function mu(e){"@babel/helpers - typeof";return mu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mu(e)}function Q6(e){return uye(e)||lye(e)||G6(e)||cye()}function cye(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lye(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function uye(e){if(Array.isArray(e))return uj(e)}function J6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Zt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?J6(Object(n),!0).forEach(function(r){lj(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J6(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function lj(e,t,n){return t=dye(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dye(e){var t=fye(e,"string");return mu(t)==="symbol"?t:String(t)}function fye(e,t){if(mu(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(mu(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function pye(e,t){return yye(e)||mye(e,t)||G6(e,t)||hye()}function hye(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function G6(e,t){if(e){if(typeof e=="string")return uj(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return uj(e,t)}}function uj(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function mye(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,o,a,i,s=[],c=!0,l=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(c=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(u){l=!0,o=u}finally{try{if(!c&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return s}}function yye(e){if(Array.isArray(e))return e}var uh=function(e,t,n){return e+(t-e)*n},dj=function(e){var t=e.from,n=e.to;return t!==n},gye=function e(t,n,r){var o=hu(function(a,i){if(dj(i)){var s=t(i.from,i.to,i.velocity),c=pye(s,2),l=c[0],u=c[1];return Zt(Zt({},i),{},{from:l,velocity:u})}return i},n);return r<1?hu(function(a,i){return dj(i)?Zt(Zt({},i),{},{velocity:uh(i.velocity,o[a].velocity,r),from:uh(i.from,o[a].from,r)}):i},n):e(t,o,r-1)};const vye=function(e,t,n,r,o){var a=Kme(e,t),i=a.reduce(function(v,b){return Zt(Zt({},v),{},lj({},b,[e[b],t[b]]))},{}),s=a.reduce(function(v,b){return Zt(Zt({},v),{},lj({},b,{from:e[b],velocity:0,to:t[b]}))},{}),c=-1,l,u,d=function(){return null},f=function(){return hu(function(v,b){return b.from},s)},p=function(){return!Object.values(s).filter(dj).length},y=function(v){l||(l=v);var b=v-l,x=b/n.dt;s=gye(n,s,x),o(Zt(Zt(Zt({},e),t),f())),l=v,p()||(c=requestAnimationFrame(d))},m=function(v){u||(u=v);var b=(v-u)/r,x=hu(function(w,j){return uh.apply(void 0,Q6(j).concat([n(b)]))},i);if(o(Zt(Zt(Zt({},e),t),x)),b<1)c=requestAnimationFrame(d);else{var _=hu(function(w,j){return uh.apply(void 0,Q6(j).concat([n(1)]))},i);o(Zt(Zt(Zt({},e),t),_))}};return d=n.isStepper?y:m,function(){return requestAnimationFrame(d),function(){cancelAnimationFrame(c)}}};function As(e){"@babel/helpers - typeof";return As=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},As(e)}var bye=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function xye(e,t){if(e==null)return{};var n=wye(e,t),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function wye(e,t){if(e==null)return{};var n={},r=Object.keys(e),o,a;for(a=0;a<r.length;a++)o=r[a],!(t.indexOf(o)>=0)&&(n[o]=e[o]);return n}function fj(e){return Sye(e)||Eye(e)||jye(e)||_ye()}function _ye(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jye(e,t){if(e){if(typeof e=="string")return pj(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pj(e,t)}}function Eye(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Sye(e){if(Array.isArray(e))return pj(e)}function pj(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Z6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function jr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Z6(Object(n),!0).forEach(function(r){yu(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z6(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function yu(e,t,n){return t=e$(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Cye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Oye(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,e$(r.key),r)}}function Nye(e,t,n){return t&&Oye(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function e$(e){var t=Mye(e,"string");return As(t)==="symbol"?t:String(t)}function Mye(e,t){if(As(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(As(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function kye(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hj(e,t)}function hj(e,t){return hj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},hj(e,t)}function Pye(e){var t=Aye();return function(){var n=dh(e),r;if(t){var o=dh(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return mj(this,r)}}function mj(e,t){if(t&&(As(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return yj(e)}function yj(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Aye(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function dh(e){return dh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},dh(e)}var da=function(e){kye(n,e);var t=Pye(n);function n(r,o){var a;Cye(this,n),a=t.call(this,r,o);var i=a.props,s=i.isActive,c=i.attributeName,l=i.from,u=i.to,d=i.steps,f=i.children,p=i.duration;if(a.handleStyleChange=a.handleStyleChange.bind(yj(a)),a.changeStyle=a.changeStyle.bind(yj(a)),!s||p<=0)return a.state={style:{}},typeof f=="function"&&(a.state={style:u}),mj(a);if(d&&d.length)a.state={style:d[0].style};else if(l){if(typeof f=="function")return a.state={style:l},mj(a);a.state={style:c?yu({},c,l):l}}else a.state={style:{}};return a}return Nye(n,[{key:"componentDidMount",value:function(){var r=this.props,o=r.isActive,a=r.canBegin;this.mounted=!0,!(!o||!a)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(r){var o=this.props,a=o.isActive,i=o.canBegin,s=o.attributeName,c=o.shouldReAnimate,l=o.to,u=o.from,d=this.state.style;if(i){if(!a){var f={style:s?yu({},s,l):l};this.state&&d&&(s&&d[s]!==l||!s&&d!==l)&&this.setState(f);return}if(!(Fme(r.to,l)&&r.canBegin&&r.isActive)){var p=!r.canBegin||!r.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var y=p||c?u:r.to;if(this.state&&d){var m={style:s?yu({},s,y):y};(s&&d[s]!==y||!s&&d!==y)&&this.setState(m)}this.runAnimation(jr(jr({},this.props),{},{from:y,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var r=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),r&&r()}},{key:"handleStyleChange",value:function(r){this.changeStyle(r)}},{key:"changeStyle",value:function(r){this.mounted&&this.setState({style:r})}},{key:"runJSAnimation",value:function(r){var o=this,a=r.from,i=r.to,s=r.duration,c=r.easing,l=r.begin,u=r.onAnimationEnd,d=r.onAnimationStart,f=vye(a,i,sye(c),s,this.changeStyle),p=function(){o.stopJSAnimation=f()};this.manager.start([d,l,p,s,u])}},{key:"runStepAnimation",value:function(r){var o=this,a=r.steps,i=r.begin,s=r.onAnimationStart,c=a[0],l=c.style,u=c.duration,d=u===void 0?0:u,f=function(p,y,m){if(m===0)return p;var v=y.duration,b=y.easing,x=b===void 0?"ease":b,_=y.style,w=y.properties,j=y.onAnimationEnd,E=m>0?a[m-1]:y,S=w||Object.keys(_);if(typeof x=="function"||x==="spring")return[].concat(fj(p),[o.runJSAnimation.bind(o,{from:E.style,to:_,duration:v,easing:x}),v]);var O=H6(S,v,x),k=jr(jr(jr({},E.style),_),{},{transition:O});return[].concat(fj(p),[k,v,j]).filter(Xme)};return this.manager.start([s].concat(fj(a.reduce(f,[l,Math.max(d,i)])),[r.onAnimationEnd]))}},{key:"runAnimation",value:function(r){this.manager||(this.manager=Wme());var o=r.begin,a=r.duration,i=r.attributeName,s=r.to,c=r.easing,l=r.onAnimationStart,u=r.onAnimationEnd,d=r.steps,f=r.children,p=this.manager;if(this.unSubscribe=p.subscribe(this.handleStyleChange),typeof c=="function"||typeof f=="function"||c==="spring"){this.runJSAnimation(r);return}if(d.length>1){this.runStepAnimation(r);return}var y=i?yu({},i,s):s,m=H6(Object.keys(y),a,c);p.start([l,o,jr(jr({},y),{},{transition:m}),a,u])}},{key:"render",value:function(){var r=this.props,o=r.children;r.begin;var a=r.duration;r.attributeName,r.easing;var i=r.isActive;r.steps,r.from,r.to,r.canBegin,r.onAnimationEnd,r.shouldReAnimate,r.onAnimationReStart;var s=xye(r,bye),c=g.Children.count(o),l=this.state.style;if(typeof o=="function")return o(l);if(!i||c===0||a<=0)return o;var u=function(d){var f=d.props,p=f.style,y=p===void 0?{}:p,m=f.className,v=g.cloneElement(d,jr(jr({},s),{},{style:jr(jr({},y),l),className:m}));return v};return c===1?u(g.Children.only(o)):V.createElement("div",null,g.Children.map(o,function(d){return u(d)}))}}]),n}(g.PureComponent);da.displayName="Animate",da.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}},da.propTypes={from:Fe.oneOfType([Fe.object,Fe.string]),to:Fe.oneOfType([Fe.object,Fe.string]),attributeName:Fe.string,duration:Fe.number,begin:Fe.number,easing:Fe.oneOfType([Fe.string,Fe.func]),steps:Fe.arrayOf(Fe.shape({duration:Fe.number.isRequired,style:Fe.object.isRequired,easing:Fe.oneOfType([Fe.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Fe.func]),properties:Fe.arrayOf("string"),onAnimationEnd:Fe.func})),children:Fe.oneOfType([Fe.node,Fe.func]),isActive:Fe.bool,canBegin:Fe.bool,onAnimationEnd:Fe.func,shouldReAnimate:Fe.bool,onAnimationStart:Fe.func,onAnimationReStart:Fe.func},Fe.object,Fe.object,Fe.object,Fe.element,Fe.object,Fe.object,Fe.object,Fe.oneOfType([Fe.array,Fe.element]),Fe.any;function gu(e){"@babel/helpers - typeof";return gu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gu(e)}function fh(){return fh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fh.apply(this,arguments)}function Tye(e,t){return Lye(e)||Dye(e,t)||Iye(e,t)||Rye()}function Rye(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Iye(e,t){if(e){if(typeof e=="string")return t$(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return t$(e,t)}}function t$(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Dye(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,o,a,i,s=[],c=!0,l=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(c=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(u){l=!0,o=u}finally{try{if(!c&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return s}}function Lye(e){if(Array.isArray(e))return e}function n$(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function r$(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?n$(Object(n),!0).forEach(function(r){Fye(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):n$(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Fye(e,t,n){return t=Bye(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Bye(e){var t=$ye(e,"string");return gu(t)=="symbol"?t:t+""}function $ye(e,t){if(gu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(gu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var o$=function(e,t,n,r,o){var a=Math.min(Math.abs(n)/2,Math.abs(r)/2),i=r>=0?1:-1,s=n>=0?1:-1,c=r>=0&&n>=0||r<0&&n<0?1:0,l;if(a>0&&o instanceof Array){for(var u=[0,0,0,0],d=0,f=4;d<f;d++)u[d]=o[d]>a?a:o[d];l="M".concat(e,",").concat(t+i*u[0]),u[0]>0&&(l+="A ".concat(u[0],",").concat(u[0],",0,0,").concat(c,",").concat(e+s*u[0],",").concat(t)),l+="L ".concat(e+n-s*u[1],",").concat(t),u[1]>0&&(l+="A ".concat(u[1],",").concat(u[1],",0,0,").concat(c,`,
        `).concat(e+n,",").concat(t+i*u[1])),l+="L ".concat(e+n,",").concat(t+r-i*u[2]),u[2]>0&&(l+="A ".concat(u[2],",").concat(u[2],",0,0,").concat(c,`,
        `).concat(e+n-s*u[2],",").concat(t+r)),l+="L ".concat(e+s*u[3],",").concat(t+r),u[3]>0&&(l+="A ".concat(u[3],",").concat(u[3],",0,0,").concat(c,`,
        `).concat(e,",").concat(t+r-i*u[3])),l+="Z"}else if(a>0&&o===+o&&o>0){var p=Math.min(a,o);l="M ".concat(e,",").concat(t+i*p,`
            A `).concat(p,",").concat(p,",0,0,").concat(c,",").concat(e+s*p,",").concat(t,`
            L `).concat(e+n-s*p,",").concat(t,`
            A `).concat(p,",").concat(p,",0,0,").concat(c,",").concat(e+n,",").concat(t+i*p,`
            L `).concat(e+n,",").concat(t+r-i*p,`
            A `).concat(p,",").concat(p,",0,0,").concat(c,",").concat(e+n-s*p,",").concat(t+r,`
            L `).concat(e+s*p,",").concat(t+r,`
            A `).concat(p,",").concat(p,",0,0,").concat(c,",").concat(e,",").concat(t+r-i*p," Z")}else l="M ".concat(e,",").concat(t," h ").concat(n," v ").concat(r," h ").concat(-n," Z");return l},zye=function(e,t){if(!e||!t)return!1;var n=e.x,r=e.y,o=t.x,a=t.y,i=t.width,s=t.height;if(Math.abs(i)>0&&Math.abs(s)>0){var c=Math.min(o,o+i),l=Math.max(o,o+i),u=Math.min(a,a+s),d=Math.max(a,a+s);return n>=c&&n<=l&&r>=u&&r<=d}return!1},Vye={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},gj=function(e){var t=r$(r$({},Vye),e),n=g.useRef(),r=g.useState(-1),o=Tye(r,2),a=o[0],i=o[1];g.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var _=n.current.getTotalLength();_&&i(_)}catch{}},[]);var s=t.x,c=t.y,l=t.width,u=t.height,d=t.radius,f=t.className,p=t.animationEasing,y=t.animationDuration,m=t.animationBegin,v=t.isAnimationActive,b=t.isUpdateAnimationActive;if(s!==+s||c!==+c||l!==+l||u!==+u||l===0||u===0)return null;var x=lt("recharts-rectangle",f);return b?V.createElement(da,{canBegin:a>0,from:{width:l,height:u,x:s,y:c},to:{width:l,height:u,x:s,y:c},duration:y,animationEasing:p,isActive:b},function(_){var w=_.width,j=_.height,E=_.x,S=_.y;return V.createElement(da,{canBegin:a>0,from:"0px ".concat(a===-1?1:a,"px"),to:"".concat(a,"px 0px"),attributeName:"strokeDasharray",begin:m,duration:y,isActive:v,easing:p},V.createElement("path",fh({},ot(t,!0),{className:x,d:o$(E,S,w,j,d),ref:n})))}):V.createElement("path",fh({},ot(t,!0),{className:x,d:o$(s,c,l,u,d)}))};function vj(){return vj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vj.apply(this,arguments)}var a$=function(e){var t=e.cx,n=e.cy,r=e.r,o=e.className,a=lt("recharts-dot",o);return t===+t&&n===+n&&r===+r?V.createElement("circle",vj({},ot(e,!1),dp(e),{className:a,cx:t,cy:n,r})):null};function vu(e){"@babel/helpers - typeof";return vu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vu(e)}var Uye=["x","y","top","left","width","height","className"];function bj(){return bj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bj.apply(this,arguments)}function i$(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Hye(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?i$(Object(n),!0).forEach(function(r){Wye(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i$(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Wye(e,t,n){return t=qye(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qye(e){var t=Yye(e,"string");return vu(t)=="symbol"?t:t+""}function Yye(e,t){if(vu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(vu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Kye(e,t){if(e==null)return{};var n=Xye(e,t),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Xye(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var Qye=function(e,t,n,r,o,a){return"M".concat(e,",").concat(o,"v").concat(r,"M").concat(a,",").concat(t,"h").concat(n)},Jye=function(e){var t=e.x,n=t===void 0?0:t,r=e.y,o=r===void 0?0:r,a=e.top,i=a===void 0?0:a,s=e.left,c=s===void 0?0:s,l=e.width,u=l===void 0?0:l,d=e.height,f=d===void 0?0:d,p=e.className,y=Kye(e,Uye),m=Hye({x:n,y:o,top:i,left:c,width:u,height:f},y);return!me(n)||!me(o)||!me(u)||!me(f)||!me(i)||!me(c)?null:V.createElement("path",bj({},ot(m,!0),{className:lt("recharts-cross",p),d:Qye(n,o,u,f,i,c)}))},xj,s$;ME=function(){if(s$)return xj;s$=1;var e=uo(),t=Um(),n=Nr(),r="[object Object]",o=Function.prototype,a=Object.prototype,i=o.toString,s=a.hasOwnProperty,c=i.call(Object);function l(u){if(!n(u)||e(u)!=r)return!1;var d=t(u);if(d===null)return!0;var f=s.call(d,"constructor")&&d.constructor;return typeof f=="function"&&f instanceof f&&i.call(f)==c}return xj=l,xj};var Gye=ME();const Zye=Xe(Gye);var wj,c$;function ege(){if(c$)return wj;c$=1;var e=uo(),t=Nr(),n="[object Boolean]";function r(o){return o===!0||o===!1||t(o)&&e(o)==n}return wj=r,wj}var tge=ege();const nge=Xe(tge);function bu(e){"@babel/helpers - typeof";return bu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bu(e)}function ph(){return ph=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ph.apply(this,arguments)}function rge(e,t){return sge(e)||ige(e,t)||age(e,t)||oge()}function oge(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function age(e,t){if(e){if(typeof e=="string")return l$(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l$(e,t)}}function l$(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ige(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,o,a,i,s=[],c=!0,l=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(c=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(u){l=!0,o=u}finally{try{if(!c&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return s}}function sge(e){if(Array.isArray(e))return e}function u$(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function d$(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?u$(Object(n),!0).forEach(function(r){cge(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u$(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function cge(e,t,n){return t=lge(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lge(e){var t=uge(e,"string");return bu(t)=="symbol"?t:t+""}function uge(e,t){if(bu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(bu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var f$=function(e,t,n,r,o){var a=n-r,i;return i="M ".concat(e,",").concat(t),i+="L ".concat(e+n,",").concat(t),i+="L ".concat(e+n-a/2,",").concat(t+o),i+="L ".concat(e+n-a/2-r,",").concat(t+o),i+="L ".concat(e,",").concat(t," Z"),i},dge={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},fge=function(e){var t=d$(d$({},dge),e),n=g.useRef(),r=g.useState(-1),o=rge(r,2),a=o[0],i=o[1];g.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var x=n.current.getTotalLength();x&&i(x)}catch{}},[]);var s=t.x,c=t.y,l=t.upperWidth,u=t.lowerWidth,d=t.height,f=t.className,p=t.animationEasing,y=t.animationDuration,m=t.animationBegin,v=t.isUpdateAnimationActive;if(s!==+s||c!==+c||l!==+l||u!==+u||d!==+d||l===0&&u===0||d===0)return null;var b=lt("recharts-trapezoid",f);return v?V.createElement(da,{canBegin:a>0,from:{upperWidth:0,lowerWidth:0,height:d,x:s,y:c},to:{upperWidth:l,lowerWidth:u,height:d,x:s,y:c},duration:y,animationEasing:p,isActive:v},function(x){var _=x.upperWidth,w=x.lowerWidth,j=x.height,E=x.x,S=x.y;return V.createElement(da,{canBegin:a>0,from:"0px ".concat(a===-1?1:a,"px"),to:"".concat(a,"px 0px"),attributeName:"strokeDasharray",begin:m,duration:y,easing:p},V.createElement("path",ph({},ot(t,!0),{className:b,d:f$(E,S,_,w,j),ref:n})))}):V.createElement("g",null,V.createElement("path",ph({},ot(t,!0),{className:b,d:f$(s,c,l,u,d)})))},pge=["option","shapeType","propTransformer","activeClassName","isActive"];function xu(e){"@babel/helpers - typeof";return xu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xu(e)}function hge(e,t){if(e==null)return{};var n=mge(e,t),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function mge(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function p$(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function hh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?p$(Object(n),!0).forEach(function(r){yge(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p$(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function yge(e,t,n){return t=gge(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gge(e){var t=vge(e,"string");return xu(t)=="symbol"?t:t+""}function vge(e,t){if(xu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(xu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function bge(e,t){return hh(hh({},t),e)}function xge(e,t){return e==="symbols"}function h$(e){var t=e.shapeType,n=e.elementProps;switch(t){case"rectangle":return V.createElement(gj,n);case"trapezoid":return V.createElement(fge,n);case"sector":return V.createElement(x6,n);case"symbols":if(xge(t))return V.createElement(c1,n);break;default:return null}}function wge(e){return g.isValidElement(e)?e.props:e}function _ge(e){var t=e.option,n=e.shapeType,r=e.propTransformer,o=r===void 0?bge:r,a=e.activeClassName,i=a===void 0?"recharts-active-shape":a,s=e.isActive,c=hge(e,pge),l;if(g.isValidElement(t))l=g.cloneElement(t,hh(hh({},c),wge(t)));else if(We(t))l=t(c);else if(Zye(t)&&!nge(t)){var u=o(t,c);l=V.createElement(h$,{shapeType:n,elementProps:u})}else{var d=c;l=V.createElement(h$,{shapeType:n,elementProps:d})}return s?V.createElement(Wt,{className:i},l):l}function mh(e,t){return t!=null&&"trapezoids"in e.props}function yh(e,t){return t!=null&&"sectors"in e.props}function wu(e,t){return t!=null&&"points"in e.props}function jge(e,t){var n,r,o=e.x===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.x)||e.x===t.x,a=e.y===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.y)||e.y===t.y;return o&&a}function Ege(e,t){var n=e.endAngle===t.endAngle,r=e.startAngle===t.startAngle;return n&&r}function Sge(e,t){var n=e.x===t.x,r=e.y===t.y,o=e.z===t.z;return n&&r&&o}function Cge(e,t){var n;return mh(e,t)?n=jge:yh(e,t)?n=Ege:wu(e,t)&&(n=Sge),n}function Oge(e,t){var n;return mh(e,t)?n="trapezoids":yh(e,t)?n="sectors":wu(e,t)&&(n="points"),n}function Nge(e,t){if(mh(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(yh(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return wu(e,t)?t.payload:{}}function Mge(e){var t=e.activeTooltipItem,n=e.graphicalItem,r=e.itemData,o=Oge(n,t),a=Nge(n,t),i=r.filter(function(c,l){var u=$_(a,c),d=n.props[o].filter(function(y){var m=Cge(n,t);return m(y,t)}),f=n.props[o].indexOf(d[d.length-1]),p=l===f;return u&&p}),s=r.indexOf(i[i.length-1]);return s}var _j,m$;function kge(){if(m$)return _j;m$=1;var e=Math.ceil,t=Math.max;function n(r,o,a,i){for(var s=-1,c=t(e((o-r)/(a||1)),0),l=Array(c);c--;)l[i?c:++s]=r,r+=a;return l}return _j=n,_j}var jj,y$;function Pge(){if(y$)return jj;y$=1;var e=kge(),t=ui(),n=s3();function r(o){return function(a,i,s){return s&&typeof s!="number"&&t(a,i,s)&&(i=s=void 0),a=n(a),i===void 0?(i=a,a=0):i=n(i),s=s===void 0?a<i?1:-1:n(s),e(a,i,s,o)}}return jj=r,jj}var Ej,g$;function Age(){if(g$)return Ej;g$=1;var e=Pge(),t=e();return Ej=t,Ej}var Tge=Age();const gh=Xe(Tge);function _u(e){"@babel/helpers - typeof";return _u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_u(e)}function v$(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function b$(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?v$(Object(n),!0).forEach(function(r){x$(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v$(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function x$(e,t,n){return t=Rge(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Rge(e){var t=Ige(e,"string");return _u(t)=="symbol"?t:t+""}function Ige(e,t){if(_u(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(_u(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Dge=["Webkit","Moz","O","ms"],Lge=function(e,t){var n=e.replace(/(\w)/,function(o){return o.toUpperCase()}),r=Dge.reduce(function(o,a){return b$(b$({},o),{},x$({},a+n,t))},{});return r[e]=t,r};function Ts(e){"@babel/helpers - typeof";return Ts=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ts(e)}function vh(){return vh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vh.apply(this,arguments)}function w$(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Sj(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?w$(Object(n),!0).forEach(function(r){zn(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w$(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Fge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _$(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,E$(r.key),r)}}function Bge(e,t,n){return t&&_$(e.prototype,t),n&&_$(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function $ge(e,t,n){return t=bh(t),zge(e,j$()?Reflect.construct(t,n||[],bh(e).constructor):t.apply(e,n))}function zge(e,t){if(t&&(Ts(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Vge(e)}function Vge(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j$(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(j$=function(){return!!e})()}function bh(e){return bh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},bh(e)}function Uge(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Cj(e,t)}function Cj(e,t){return Cj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Cj(e,t)}function zn(e,t,n){return t=E$(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E$(e){var t=Hge(e,"string");return Ts(t)=="symbol"?t:t+""}function Hge(e,t){if(Ts(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Ts(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Wge=function(e){var t=e.data,n=e.startIndex,r=e.endIndex,o=e.x,a=e.width,i=e.travellerWidth;if(!t||!t.length)return{};var s=t.length,c=Yl().domain(gh(0,s)).range([o,o+a-i]),l=c.domain().map(function(u){return c(u)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:c(n),endX:c(r),scale:c,scaleValues:l}},S$=function(e){return e.changedTouches&&!!e.changedTouches.length},Rs=function(e){function t(n){var r;return Fge(this,t),r=$ge(this,t,[n]),zn(r,"handleDrag",function(o){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(o):r.state.isSlideMoving&&r.handleSlideDrag(o)}),zn(r,"handleTouchMove",function(o){o.changedTouches!=null&&o.changedTouches.length>0&&r.handleDrag(o.changedTouches[0])}),zn(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var o=r.props,a=o.endIndex,i=o.onDragEnd,s=o.startIndex;i==null||i({endIndex:a,startIndex:s})}),r.detachDragEndListener()}),zn(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),zn(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),zn(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),zn(r,"handleSlideDragStart",function(o){var a=S$(o)?o.changedTouches[0]:o;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:a.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return Uge(t,e),Bge(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var r=n.startX,o=n.endX,a=this.state.scaleValues,i=this.props,s=i.gap,c=i.data,l=c.length-1,u=Math.min(r,o),d=Math.max(r,o),f=t.getIndexInRange(a,u),p=t.getIndexInRange(a,d);return{startIndex:f-f%s,endIndex:p===l?l:p-p%s}}},{key:"getTextOfTick",value:function(n){var r=this.props,o=r.data,a=r.tickFormatter,i=r.dataKey,s=Ur(o[n],i,n);return We(a)?a(s,n):s}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var r=this.state,o=r.slideMoveStartX,a=r.startX,i=r.endX,s=this.props,c=s.x,l=s.width,u=s.travellerWidth,d=s.startIndex,f=s.endIndex,p=s.onChange,y=n.pageX-o;y>0?y=Math.min(y,c+l-u-i,c+l-u-a):y<0&&(y=Math.max(y,c-a,c-i));var m=this.getIndex({startX:a+y,endX:i+y});(m.startIndex!==d||m.endIndex!==f)&&p&&p(m),this.setState({startX:a+y,endX:i+y,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,r){var o=S$(r)?r.changedTouches[0]:r;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:o.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var r=this.state,o=r.brushMoveStartX,a=r.movingTravellerId,i=r.endX,s=r.startX,c=this.state[a],l=this.props,u=l.x,d=l.width,f=l.travellerWidth,p=l.onChange,y=l.gap,m=l.data,v={startX:this.state.startX,endX:this.state.endX},b=n.pageX-o;b>0?b=Math.min(b,u+d-f-c):b<0&&(b=Math.max(b,u-c)),v[a]=c+b;var x=this.getIndex(v),_=x.startIndex,w=x.endIndex,j=function(){var E=m.length-1;return a==="startX"&&(i>s?_%y===0:w%y===0)||i<s&&w===E||a==="endX"&&(i>s?w%y===0:_%y===0)||i>s&&w===E};this.setState(zn(zn({},a,c+b),"brushMoveStartX",n.pageX),function(){p&&j()&&p(x)})}},{key:"handleTravellerMoveKeyboard",value:function(n,r){var o=this,a=this.state,i=a.scaleValues,s=a.startX,c=a.endX,l=this.state[r],u=i.indexOf(l);if(u!==-1){var d=u+n;if(!(d===-1||d>=i.length)){var f=i[d];r==="startX"&&f>=c||r==="endX"&&f<=s||this.setState(zn({},r,f),function(){o.props.onChange(o.getIndex({startX:o.state.startX,endX:o.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,r=n.x,o=n.y,a=n.width,i=n.height,s=n.fill,c=n.stroke;return V.createElement("rect",{stroke:c,fill:s,x:r,y:o,width:a,height:i})}},{key:"renderPanorama",value:function(){var n=this.props,r=n.x,o=n.y,a=n.width,i=n.height,s=n.data,c=n.children,l=n.padding,u=g.Children.only(c);return u?V.cloneElement(u,{x:r,y:o,width:a,height:i,margin:l,compact:!0,data:s}):null}},{key:"renderTravellerLayer",value:function(n,r){var o,a,i=this,s=this.props,c=s.y,l=s.travellerWidth,u=s.height,d=s.traveller,f=s.ariaLabel,p=s.data,y=s.startIndex,m=s.endIndex,v=Math.max(n,this.props.x),b=Sj(Sj({},ot(this.props,!1)),{},{x:v,y:c,width:l,height:u}),x=f||"Min value: ".concat((o=p[y])===null||o===void 0?void 0:o.name,", Max value: ").concat((a=p[m])===null||a===void 0?void 0:a.name);return V.createElement(Wt,{tabIndex:0,role:"slider","aria-label":x,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[r],onTouchStart:this.travellerDragStartHandlers[r],onKeyDown:function(_){["ArrowLeft","ArrowRight"].includes(_.key)&&(_.preventDefault(),_.stopPropagation(),i.handleTravellerMoveKeyboard(_.key==="ArrowRight"?1:-1,r))},onFocus:function(){i.setState({isTravellerFocused:!0})},onBlur:function(){i.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(d,b))}},{key:"renderSlide",value:function(n,r){var o=this.props,a=o.y,i=o.height,s=o.stroke,c=o.travellerWidth,l=Math.min(n,r)+c,u=Math.max(Math.abs(r-n)-c,0);return V.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:s,fillOpacity:.2,x:l,y:a,width:u,height:i})}},{key:"renderText",value:function(){var n=this.props,r=n.startIndex,o=n.endIndex,a=n.y,i=n.height,s=n.travellerWidth,c=n.stroke,l=this.state,u=l.startX,d=l.endX,f=5,p={pointerEvents:"none",fill:c};return V.createElement(Wt,{className:"recharts-brush-texts"},V.createElement(Ap,vh({textAnchor:"end",verticalAnchor:"middle",x:Math.min(u,d)-f,y:a+i/2},p),this.getTextOfTick(r)),V.createElement(Ap,vh({textAnchor:"start",verticalAnchor:"middle",x:Math.max(u,d)+s+f,y:a+i/2},p),this.getTextOfTick(o)))}},{key:"render",value:function(){var n=this.props,r=n.data,o=n.className,a=n.children,i=n.x,s=n.y,c=n.width,l=n.height,u=n.alwaysShowText,d=this.state,f=d.startX,p=d.endX,y=d.isTextActive,m=d.isSlideMoving,v=d.isTravellerMoving,b=d.isTravellerFocused;if(!r||!r.length||!me(i)||!me(s)||!me(c)||!me(l)||c<=0||l<=0)return null;var x=lt("recharts-brush",o),_=V.Children.count(a)===1,w=Lge("userSelect","none");return V.createElement(Wt,{className:x,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:w},this.renderBackground(),_&&this.renderPanorama(),this.renderSlide(f,p),this.renderTravellerLayer(f,"startX"),this.renderTravellerLayer(p,"endX"),(y||m||v||b||u)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var r=n.x,o=n.y,a=n.width,i=n.height,s=n.stroke,c=Math.floor(o+i/2)-1;return V.createElement(V.Fragment,null,V.createElement("rect",{x:r,y:o,width:a,height:i,fill:s,stroke:"none"}),V.createElement("line",{x1:r+1,y1:c,x2:r+a-1,y2:c,fill:"none",stroke:"#fff"}),V.createElement("line",{x1:r+1,y1:c+2,x2:r+a-1,y2:c+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,r){var o;return V.isValidElement(n)?o=V.cloneElement(n,r):We(n)?o=n(r):o=t.renderDefaultTraveller(r),o}},{key:"getDerivedStateFromProps",value:function(n,r){var o=n.data,a=n.width,i=n.x,s=n.travellerWidth,c=n.updateId,l=n.startIndex,u=n.endIndex;if(o!==r.prevData||c!==r.prevUpdateId)return Sj({prevData:o,prevTravellerWidth:s,prevUpdateId:c,prevX:i,prevWidth:a},o&&o.length?Wge({data:o,width:a,x:i,travellerWidth:s,startIndex:l,endIndex:u}):{scale:null,scaleValues:null});if(r.scale&&(a!==r.prevWidth||i!==r.prevX||s!==r.prevTravellerWidth)){r.scale.range([i,i+a-s]);var d=r.scale.domain().map(function(f){return r.scale(f)});return{prevData:o,prevTravellerWidth:s,prevUpdateId:c,prevX:i,prevWidth:a,startX:r.scale(n.startIndex),endX:r.scale(n.endIndex),scaleValues:d}}return null}},{key:"getIndexInRange",value:function(n,r){for(var o=n.length,a=0,i=o-1;i-a>1;){var s=Math.floor((a+i)/2);n[s]>r?i=s:a=s}return r>=n[i]?i:a}}])}(g.PureComponent);zn(Rs,"displayName","Brush"),zn(Rs,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var Oj,C$;function qge(){if(C$)return Oj;C$=1;var e=k1();function t(n,r){var o;return e(n,function(a,i,s){return o=r(a,i,s),!o}),!!o}return Oj=t,Oj}var Nj,O$;function Yge(){if(O$)return Nj;O$=1;var e=uP(),t=Tr(),n=qge(),r=un(),o=ui();function a(i,s,c){var l=r(i)?e:n;return c&&o(i,s,c)&&(s=void 0),l(i,t(s,3))}return Nj=a,Nj}var Kge=Yge();const Xge=Xe(Kge);var Hr=function(e,t){var n=e.alwaysShow,r=e.ifOverflow;return n&&(r="extendDomain"),r===t},Mj,N$;function Qge(){if(N$)return Mj;N$=1;var e=Jh(),t=gL(),n=Tr();function r(o,a){var i={};return a=n(a,3),t(o,function(s,c,l){e(i,c,a(s,c,l))}),i}return Mj=r,Mj}var Jge=Qge();const Gge=Xe(Jge);var kj,M$;function Zge(){if(M$)return kj;M$=1;function e(t,n){for(var r=-1,o=t==null?0:t.length;++r<o;)if(!n(t[r],r,t))return!1;return!0}return kj=e,kj}var Pj,k$;function eve(){if(k$)return Pj;k$=1;var e=k1();function t(n,r){var o=!0;return e(n,function(a,i,s){return o=!!r(a,i,s),o}),o}return Pj=t,Pj}var Aj,P$;function tve(){if(P$)return Aj;P$=1;var e=Zge(),t=eve(),n=Tr(),r=un(),o=ui();function a(i,s,c){var l=r(i)?e:t;return c&&o(i,s,c)&&(s=void 0),l(i,n(s,3))}return Aj=a,Aj}var nve=tve();const A$=Xe(nve);var rve=["x","y"];function ju(e){"@babel/helpers - typeof";return ju=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ju(e)}function Tj(){return Tj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Tj.apply(this,arguments)}function T$(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Eu(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?T$(Object(n),!0).forEach(function(r){ove(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T$(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ove(e,t,n){return t=ave(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ave(e){var t=ive(e,"string");return ju(t)=="symbol"?t:t+""}function ive(e,t){if(ju(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(ju(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function sve(e,t){if(e==null)return{};var n=cve(e,t),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function cve(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function lve(e,t){var n=e.x,r=e.y,o=sve(e,rve),a="".concat(n),i=parseInt(a,10),s="".concat(r),c=parseInt(s,10),l="".concat(t.height||o.height),u=parseInt(l,10),d="".concat(t.width||o.width),f=parseInt(d,10);return Eu(Eu(Eu(Eu(Eu({},t),o),i?{x:i}:{}),c?{y:c}:{}),{},{height:u,width:f,name:t.name,radius:t.radius})}function R$(e){return V.createElement(_ge,Tj({shapeType:"rectangle",propTransformer:lve,activeClassName:"recharts-active-bar"},e))}var uve=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,r){if(typeof e=="number")return e;var o=typeof n=="number";return o?e(n,r):(o||Za(),t)}},dve=["value","background"],I$;function Is(e){"@babel/helpers - typeof";return Is=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Is(e)}function fve(e,t){if(e==null)return{};var n=pve(e,t),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function pve(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function xh(){return xh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xh.apply(this,arguments)}function D$(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Ft(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?D$(Object(n),!0).forEach(function(r){fa(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D$(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function hve(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function L$(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,B$(r.key),r)}}function mve(e,t,n){return t&&L$(e.prototype,t),n&&L$(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function yve(e,t,n){return t=wh(t),gve(e,F$()?Reflect.construct(t,n||[],wh(e).constructor):t.apply(e,n))}function gve(e,t){if(t&&(Is(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vve(e)}function vve(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function F$(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(F$=function(){return!!e})()}function wh(e){return wh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},wh(e)}function bve(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Rj(e,t)}function Rj(e,t){return Rj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Rj(e,t)}function fa(e,t,n){return t=B$(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function B$(e){var t=xve(e,"string");return Is(t)=="symbol"?t:t+""}function xve(e,t){if(Is(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Is(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ni=function(e){function t(){var n;hve(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return n=yve(this,t,[].concat(o)),fa(n,"state",{isAnimationFinished:!1}),fa(n,"id",up("recharts-bar-")),fa(n,"handleAnimationEnd",function(){var i=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),i&&i()}),fa(n,"handleAnimationStart",function(){var i=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),i&&i()}),n}return bve(t,e),mve(t,[{key:"renderRectanglesStatically",value:function(n){var r=this,o=this.props,a=o.shape,i=o.dataKey,s=o.activeIndex,c=o.activeBar,l=ot(this.props,!1);return n&&n.map(function(u,d){var f=d===s,p=f?c:a,y=Ft(Ft(Ft({},l),u),{},{isActive:f,option:p,index:d,dataKey:i,onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd});return V.createElement(Wt,xh({className:"recharts-bar-rectangle"},fp(r.props,u,d),{key:"rectangle-".concat(u==null?void 0:u.x,"-").concat(u==null?void 0:u.y,"-").concat(u==null?void 0:u.value)}),V.createElement(R$,y))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,r=this.props,o=r.data,a=r.layout,i=r.isAnimationActive,s=r.animationBegin,c=r.animationDuration,l=r.animationEasing,u=r.animationId,d=this.state.prevData;return V.createElement(da,{begin:s,duration:c,isActive:i,easing:l,from:{t:0},to:{t:1},key:"bar-".concat(u),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(f){var p=f.t,y=o.map(function(m,v){var b=d&&d[v];if(b){var x=ps(b.x,m.x),_=ps(b.y,m.y),w=ps(b.width,m.width),j=ps(b.height,m.height);return Ft(Ft({},m),{},{x:x(p),y:_(p),width:w(p),height:j(p)})}if(a==="horizontal"){var E=ps(0,m.height),S=E(p);return Ft(Ft({},m),{},{y:m.y+m.height-S,height:S})}var O=ps(0,m.width),k=O(p);return Ft(Ft({},m),{},{width:k})});return V.createElement(Wt,null,n.renderRectanglesStatically(y))})}},{key:"renderRectangles",value:function(){var n=this.props,r=n.data,o=n.isAnimationActive,a=this.state.prevData;return o&&r&&r.length&&(!a||!$_(a,r))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(r)}},{key:"renderBackground",value:function(){var n=this,r=this.props,o=r.data,a=r.dataKey,i=r.activeIndex,s=ot(this.props.background,!1);return o.map(function(c,l){c.value;var u=c.background,d=fve(c,dve);if(!u)return null;var f=Ft(Ft(Ft(Ft(Ft({},d),{},{fill:"#eee"},u),s),fp(n.props,c,l)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:a,index:l,className:"recharts-bar-background-rectangle"});return V.createElement(R$,xh({key:"background-bar-".concat(l),option:n.props.background,isActive:l===i},f))})}},{key:"renderErrorBar",value:function(n,r){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var o=this.props,a=o.data,i=o.xAxis,s=o.yAxis,c=o.layout,l=o.children,u=wr(l,eh);if(!u)return null;var d=c==="vertical"?a[0].height/2:a[0].width/2,f=function(y,m){var v=Array.isArray(y.value)?y.value[1]:y.value;return{x:y.x,y:y.y,value:v,errorVal:Ur(y,m)}},p={clipPath:n?"url(#clipPath-".concat(r,")"):null};return V.createElement(Wt,p,u.map(function(y){return V.cloneElement(y,{key:"error-bar-".concat(r,"-").concat(y.props.dataKey),data:a,xAxis:i,yAxis:s,layout:c,offset:d,dataPointFormatter:f})}))}},{key:"render",value:function(){var n=this.props,r=n.hide,o=n.data,a=n.className,i=n.xAxis,s=n.yAxis,c=n.left,l=n.top,u=n.width,d=n.height,f=n.isAnimationActive,p=n.background,y=n.id;if(r||!o||!o.length)return null;var m=this.state.isAnimationFinished,v=lt("recharts-bar",a),b=i&&i.allowDataOverflow,x=s&&s.allowDataOverflow,_=b||x,w=at(y)?this.id:y;return V.createElement(Wt,{className:v},b||x?V.createElement("defs",null,V.createElement("clipPath",{id:"clipPath-".concat(w)},V.createElement("rect",{x:b?c:c-u/2,y:x?l:l-d/2,width:b?u:u*2,height:x?d:d*2}))):null,V.createElement(Wt,{className:"recharts-bar-rectangles",clipPath:_?"url(#clipPath-".concat(w,")"):null},p?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(_,w),(!f||m)&&ti.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(n,r){return n.animationId!==r.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:r.curData}:n.data!==r.curData?{curData:n.data}:null}}])}(g.PureComponent);I$=ni,fa(ni,"displayName","Bar"),fa(ni,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!aa.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"}),fa(ni,"getComposedData",function(e){var t=e.props,n=e.item,r=e.barPosition,o=e.bandSize,a=e.xAxis,i=e.yAxis,s=e.xAxisTicks,c=e.yAxisTicks,l=e.stackedData,u=e.dataStartIndex,d=e.displayedData,f=e.offset,p=ehe(r,n);if(!p)return null;var y=t.layout,m=n.type.defaultProps,v=m!==void 0?Ft(Ft({},m),n.props):n.props,b=v.dataKey,x=v.children,_=v.minPointSize,w=y==="horizontal"?i:a,j=l?w.scale.domain():null,E=che({numericAxis:w}),S=wr(x,JL),O=d.map(function(k,N){var P,R,A,C,M,T;l?P=the(l[u+N],j):(P=Ur(k,b),Array.isArray(P)||(P=[E,P]));var D=uve(_,I$.defaultProps.minPointSize)(P[1],N);if(y==="horizontal"){var I,L=[i.scale(P[0]),i.scale(P[1])],B=L[0],U=L[1];R=n6({axis:a,ticks:s,bandSize:o,offset:p.offset,entry:k,index:N}),A=(I=U??B)!==null&&I!==void 0?I:void 0,C=p.size;var F=B-U;if(M=Number.isNaN(F)?0:F,T={x:R,y:i.y,width:C,height:i.height},Math.abs(D)>0&&Math.abs(M)<Math.abs(D)){var H=xr(M||D)*(Math.abs(D)-Math.abs(M));A-=H,M+=H}}else{var J=[a.scale(P[0]),a.scale(P[1])],q=J[0],re=J[1];if(R=q,A=n6({axis:i,ticks:c,bandSize:o,offset:p.offset,entry:k,index:N}),C=re-q,M=p.size,T={x:a.x,y:A,width:a.width,height:M},Math.abs(D)>0&&Math.abs(C)<Math.abs(D)){var Z=xr(C||D)*(Math.abs(D)-Math.abs(C));C+=Z}}return Ft(Ft(Ft({},k),{},{x:R,y:A,width:C,height:M,value:l?P:P[1],payload:k,background:T},S&&S[N]&&S[N].props),{},{tooltipPayload:[s6(n,k)],tooltipPosition:{x:R+C/2,y:A+M/2}})});return Ft({data:O,layout:y},f)});function Su(e){"@babel/helpers - typeof";return Su=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Su(e)}function wve(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $$(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,V$(r.key),r)}}function _ve(e,t,n){return t&&$$(e.prototype,t),n&&$$(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function z$(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Er(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?z$(Object(n),!0).forEach(function(r){_h(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z$(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function _h(e,t,n){return t=V$(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function V$(e){var t=jve(e,"string");return Su(t)=="symbol"?t:t+""}function jve(e,t){if(Su(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Su(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Eve=function(e,t,n,r,o){var a=e.width,i=e.height,s=e.layout,c=e.children,l=Object.keys(t),u={left:n.left,leftMirror:n.left,right:a-n.right,rightMirror:a-n.right,top:n.top,topMirror:n.top,bottom:i-n.bottom,bottomMirror:i-n.bottom},d=!!Bn(c,ni);return l.reduce(function(f,p){var y=t[p],m=y.orientation,v=y.domain,b=y.padding,x=b===void 0?{}:b,_=y.mirror,w=y.reversed,j="".concat(m).concat(_?"Mirror":""),E,S,O,k,N;if(y.type==="number"&&(y.padding==="gap"||y.padding==="no-gap")){var P=v[1]-v[0],R=1/0,A=y.categoricalDomain.sort();if(A.forEach(function(H,J){J>0&&(R=Math.min((H||0)-(A[J-1]||0),R))}),Number.isFinite(R)){var C=R/P,M=y.layout==="vertical"?n.height:n.width;if(y.padding==="gap"&&(E=C*M/2),y.padding==="no-gap"){var T=Wa(e.barCategoryGap,C*M),D=C*M/2;E=D-T-(D-T)/M*T}}}r==="xAxis"?S=[n.left+(x.left||0)+(E||0),n.left+n.width-(x.right||0)-(E||0)]:r==="yAxis"?S=s==="horizontal"?[n.top+n.height-(x.bottom||0),n.top+(x.top||0)]:[n.top+(x.top||0)+(E||0),n.top+n.height-(x.bottom||0)-(E||0)]:S=y.range,w&&(S=[S[1],S[0]]);var I=Gpe(y,o,d),L=I.scale,B=I.realScaleType;L.domain(v).range(S),Zpe(L);var U=she(L,Er(Er({},y),{},{realScaleType:B}));r==="xAxis"?(N=m==="top"&&!_||m==="bottom"&&_,O=n.left,k=u[j]-N*y.height):r==="yAxis"&&(N=m==="left"&&!_||m==="right"&&_,O=u[j]-N*y.width,k=n.top);var F=Er(Er(Er({},y),U),{},{realScaleType:B,x:O,y:k,scale:L,width:r==="xAxis"?n.width:y.width,height:r==="yAxis"?n.height:y.height});return F.bandSize=rh(F,U),!y.hide&&r==="xAxis"?u[j]+=(N?-1:1)*F.height:y.hide||(u[j]+=(N?-1:1)*F.width),Er(Er({},f),{},_h({},p,F))},{})},U$=function(e,t){var n=e.x,r=e.y,o=t.x,a=t.y;return{x:Math.min(n,o),y:Math.min(r,a),width:Math.abs(o-n),height:Math.abs(a-r)}},Sve=function(e){var t=e.x1,n=e.y1,r=e.x2,o=e.y2;return U$({x:t,y:n},{x:r,y:o})},H$=function(){function e(t){wve(this,e),this.scale=t}return _ve(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.bandAware,o=n.position;if(t!==void 0){if(o)switch(o){case"start":return this.scale(t);case"middle":{var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+a}case"end":{var i=this.bandwidth?this.bandwidth():0;return this.scale(t)+i}default:return this.scale(t)}if(r){var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+s}return this.scale(t)}}},{key:"isInRange",value:function(t){var n=this.range(),r=n[0],o=n[n.length-1];return r<=o?t>=r&&t<=o:t>=o&&t<=r}}],[{key:"create",value:function(t){return new e(t)}}])}();_h(H$,"EPS",1e-4);var Ij=function(e){var t=Object.keys(e).reduce(function(n,r){return Er(Er({},n),{},_h({},r,H$.create(e[r])))},{});return Er(Er({},t),{},{apply:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=r.bandAware,a=r.position;return Gge(n,function(i,s){return t[s].apply(i,{bandAware:o,position:a})})},isInRange:function(n){return A$(n,function(r,o){return t[o].isInRange(r)})}})};function Cve(e){return(e%180+180)%180}var Ove=function(e){var t=e.width,n=e.height,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=Cve(r),a=o*Math.PI/180,i=Math.atan(n/t),s=a>i&&a<Math.PI-i?n/Math.sin(a):t/Math.cos(a);return Math.abs(s)},Dj,W$;function Nve(){if(W$)return Dj;W$=1;var e=Tr(),t=ga(),n=ac();function r(o){return function(a,i,s){var c=Object(a);if(!t(a)){var l=e(i,3);a=n(a),i=function(d){return l(c[d],d,c)}}var u=o(a,i,s);return u>-1?c[l?a[u]:u]:void 0}}return Dj=r,Dj}var Lj,q$;function Mve(){if(q$)return Lj;q$=1;var e=X4(),t=Tr(),n=l3(),r=Math.max;function o(a,i,s){var c=a==null?0:a.length;if(!c)return-1;var l=s==null?0:n(s);return l<0&&(l=r(c+l,0)),e(a,t(i,3),l)}return Lj=o,Lj}var Fj,Y$;function kve(){if(Y$)return Fj;Y$=1;var e=Nve(),t=Mve(),n=e(t);return Fj=n,Fj}var Pve=kve();const Ave=Xe(Pve);var Tve=hA(),Rve=Xe(Tve)(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),Bj=g.createContext(void 0),$j=g.createContext(void 0),K$=g.createContext(void 0),X$=g.createContext({}),Q$=g.createContext(void 0),J$=g.createContext(0),G$=g.createContext(0),Z$=function(e){var t=e.state,n=t.xAxisMap,r=t.yAxisMap,o=t.offset,a=e.clipPathId,i=e.children,s=e.width,c=e.height,l=Rve(o);return V.createElement(Bj.Provider,{value:n},V.createElement($j.Provider,{value:r},V.createElement(X$.Provider,{value:o},V.createElement(K$.Provider,{value:l},V.createElement(Q$.Provider,{value:a},V.createElement(J$.Provider,{value:c},V.createElement(G$.Provider,{value:s},i)))))))},Ive=function(){return g.useContext(Q$)},e8=function(e){var t=g.useContext(Bj);t==null&&Za();var n=t[e];return n==null&&Za(),n},Dve=function(){var e=g.useContext(Bj);return oa(e)},Lve=function(){var e=g.useContext($j),t=Ave(e,function(n){return A$(n.domain,Number.isFinite)});return t||oa(e)},t8=function(e){var t=g.useContext($j);t==null&&Za();var n=t[e];return n==null&&Za(),n},Fve=function(){var e=g.useContext(K$);return e},Bve=function(){return g.useContext(X$)},zj=function(){return g.useContext(G$)},Vj=function(){return g.useContext(J$)};function Ds(e){"@babel/helpers - typeof";return Ds=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ds(e)}function $ve(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zve(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,a8(r.key),r)}}function Vve(e,t,n){return t&&zve(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Uve(e,t,n){return t=jh(t),Hve(e,n8()?Reflect.construct(t,n||[],jh(e).constructor):t.apply(e,n))}function Hve(e,t){if(t&&(Ds(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Wve(e)}function Wve(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function n8(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(n8=function(){return!!e})()}function jh(e){return jh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},jh(e)}function qve(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Uj(e,t)}function Uj(e,t){return Uj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Uj(e,t)}function r8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function o8(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?r8(Object(n),!0).forEach(function(r){Hj(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r8(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Hj(e,t,n){return t=a8(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a8(e){var t=Yve(e,"string");return Ds(t)=="symbol"?t:t+""}function Yve(e,t){if(Ds(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Ds(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Kve(e,t){return Gve(e)||Jve(e,t)||Qve(e,t)||Xve()}function Xve(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qve(e,t){if(e){if(typeof e=="string")return i8(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i8(e,t)}}function i8(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Jve(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,o,a,i,s=[],c=!0,l=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(c=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(u){l=!0,o=u}finally{try{if(!c&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return s}}function Gve(e){if(Array.isArray(e))return e}function Wj(){return Wj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Wj.apply(this,arguments)}var Zve=function(e,t){var n;return V.isValidElement(e)?n=V.cloneElement(e,t):We(e)?n=e(t):n=V.createElement("line",Wj({},t,{className:"recharts-reference-line-line"})),n},e0e=function(e,t,n,r,o,a,i,s,c){var l=o.x,u=o.y,d=o.width,f=o.height;if(n){var p=c.y,y=e.y.apply(p,{position:a});if(Hr(c,"discard")&&!e.y.isInRange(y))return null;var m=[{x:l+d,y},{x:l,y}];return s==="left"?m.reverse():m}if(t){var v=c.x,b=e.x.apply(v,{position:a});if(Hr(c,"discard")&&!e.x.isInRange(b))return null;var x=[{x:b,y:u+f},{x:b,y:u}];return i==="top"?x.reverse():x}if(r){var _=c.segment,w=_.map(function(j){return e.apply(j,{position:a})});return Hr(c,"discard")&&Xge(w,function(j){return!e.isInRange(j)})?null:w}return null};function t0e(e){var t=e.x,n=e.y,r=e.segment,o=e.xAxisId,a=e.yAxisId,i=e.shape,s=e.className,c=e.alwaysShow,l=Ive(),u=e8(o),d=t8(a),f=Fve();if(!l||!f)return null;Oo(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var p=Ij({x:u.scale,y:d.scale}),y=zt(t),m=zt(n),v=r&&r.length===2,b=e0e(p,y,m,v,f,e.position,u.orientation,d.orientation,e);if(!b)return null;var x=Kve(b,2),_=x[0],w=_.x,j=_.y,E=x[1],S=E.x,O=E.y,k=Hr(e,"hidden")?"url(#".concat(l,")"):void 0,N=o8(o8({clipPath:k},ot(e,!0)),{},{x1:w,y1:j,x2:S,y2:O});return V.createElement(Wt,{className:lt("recharts-reference-line",s)},Zve(i,N),rn.renderCallByParent(e,Sve({x1:w,y1:j,x2:S,y2:O})))}var qj=function(e){function t(){return $ve(this,t),Uve(this,t,arguments)}return qve(t,e),Vve(t,[{key:"render",value:function(){return V.createElement(t0e,this.props)}}])}(V.Component);Hj(qj,"displayName","ReferenceLine"),Hj(qj,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function Yj(){return Yj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Yj.apply(this,arguments)}function Ls(e){"@babel/helpers - typeof";return Ls=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ls(e)}function s8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function c8(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?s8(Object(n),!0).forEach(function(r){Sh(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s8(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function n0e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r0e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,u8(r.key),r)}}function o0e(e,t,n){return t&&r0e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function a0e(e,t,n){return t=Eh(t),i0e(e,l8()?Reflect.construct(t,n||[],Eh(e).constructor):t.apply(e,n))}function i0e(e,t){if(t&&(Ls(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return s0e(e)}function s0e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l8(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(l8=function(){return!!e})()}function Eh(e){return Eh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Eh(e)}function c0e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Kj(e,t)}function Kj(e,t){return Kj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Kj(e,t)}function Sh(e,t,n){return t=u8(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u8(e){var t=l0e(e,"string");return Ls(t)=="symbol"?t:t+""}function l0e(e,t){if(Ls(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Ls(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var u0e=function(e){var t=e.x,n=e.y,r=e.xAxis,o=e.yAxis,a=Ij({x:r.scale,y:o.scale}),i=a.apply({x:t,y:n},{bandAware:!0});return Hr(e,"discard")&&!a.isInRange(i)?null:i},Ch=function(e){function t(){return n0e(this,t),a0e(this,t,arguments)}return c0e(t,e),o0e(t,[{key:"render",value:function(){var n=this.props,r=n.x,o=n.y,a=n.r,i=n.alwaysShow,s=n.clipPathId,c=zt(r),l=zt(o);if(Oo(i===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!c||!l)return null;var u=u0e(this.props);if(!u)return null;var d=u.x,f=u.y,p=this.props,y=p.shape,m=p.className,v=Hr(this.props,"hidden")?"url(#".concat(s,")"):void 0,b=c8(c8({clipPath:v},ot(this.props,!0)),{},{cx:d,cy:f});return V.createElement(Wt,{className:lt("recharts-reference-dot",m)},t.renderDot(y,b),rn.renderCallByParent(this.props,{x:d-a,y:f-a,width:2*a,height:2*a}))}}])}(V.Component);Sh(Ch,"displayName","ReferenceDot"),Sh(Ch,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1}),Sh(Ch,"renderDot",function(e,t){var n;return V.isValidElement(e)?n=V.cloneElement(e,t):We(e)?n=e(t):n=V.createElement(a$,Yj({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),n});function Xj(){return Xj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Xj.apply(this,arguments)}function Fs(e){"@babel/helpers - typeof";return Fs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fs(e)}function d8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function f8(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?d8(Object(n),!0).forEach(function(r){Nh(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d8(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function d0e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f0e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,h8(r.key),r)}}function p0e(e,t,n){return t&&f0e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function h0e(e,t,n){return t=Oh(t),m0e(e,p8()?Reflect.construct(t,n||[],Oh(e).constructor):t.apply(e,n))}function m0e(e,t){if(t&&(Fs(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return y0e(e)}function y0e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p8(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(p8=function(){return!!e})()}function Oh(e){return Oh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Oh(e)}function g0e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Qj(e,t)}function Qj(e,t){return Qj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Qj(e,t)}function Nh(e,t,n){return t=h8(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h8(e){var t=v0e(e,"string");return Fs(t)=="symbol"?t:t+""}function v0e(e,t){if(Fs(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Fs(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var b0e=function(e,t,n,r,o){var a=o.x1,i=o.x2,s=o.y1,c=o.y2,l=o.xAxis,u=o.yAxis;if(!l||!u)return null;var d=Ij({x:l.scale,y:u.scale}),f={x:e?d.x.apply(a,{position:"start"}):d.x.rangeMin,y:n?d.y.apply(s,{position:"start"}):d.y.rangeMin},p={x:t?d.x.apply(i,{position:"end"}):d.x.rangeMax,y:r?d.y.apply(c,{position:"end"}):d.y.rangeMax};return Hr(o,"discard")&&(!d.isInRange(f)||!d.isInRange(p))?null:U$(f,p)},Mh=function(e){function t(){return d0e(this,t),h0e(this,t,arguments)}return g0e(t,e),p0e(t,[{key:"render",value:function(){var n=this.props,r=n.x1,o=n.x2,a=n.y1,i=n.y2,s=n.className,c=n.alwaysShow,l=n.clipPathId;Oo(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var u=zt(r),d=zt(o),f=zt(a),p=zt(i),y=this.props.shape;if(!u&&!d&&!f&&!p&&!y)return null;var m=b0e(u,d,f,p,this.props);if(!m&&!y)return null;var v=Hr(this.props,"hidden")?"url(#".concat(l,")"):void 0;return V.createElement(Wt,{className:lt("recharts-reference-area",s)},t.renderRect(y,f8(f8({clipPath:v},ot(this.props,!0)),m)),rn.renderCallByParent(this.props,m))}}])}(V.Component);Nh(Mh,"displayName","ReferenceArea"),Nh(Mh,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1}),Nh(Mh,"renderRect",function(e,t){var n;return V.isValidElement(e)?n=V.cloneElement(e,t):We(e)?n=e(t):n=V.createElement(gj,Xj({},t,{className:"recharts-reference-area-rect"})),n});function m8(e,t,n){if(t<1)return[];if(t===1&&n===void 0)return e;for(var r=[],o=0;o<e.length;o+=t)r.push(e[o]);return r}function x0e(e,t,n){var r={width:e.width+t.width,height:e.height+t.height};return Ove(r,n)}function w0e(e,t,n){var r=n==="width",o=e.x,a=e.y,i=e.width,s=e.height;return t===1?{start:r?o:a,end:r?o+i:a+s}:{start:r?o+i:a+s,end:r?o:a}}function kh(e,t,n,r,o){if(e*t<e*r||e*t>e*o)return!1;var a=n();return e*(t-e*a/2-r)>=0&&e*(t+e*a/2-o)<=0}function _0e(e,t){return m8(e,t+1)}function j0e(e,t,n,r,o){for(var a=(r||[]).slice(),i=t.start,s=t.end,c=0,l=1,u=i,d=function(){var p=r==null?void 0:r[c];if(p===void 0)return{v:m8(r,l)};var y=c,m,v=function(){return m===void 0&&(m=n(p,y)),m},b=p.coordinate,x=c===0||kh(e,b,v,u,s);x||(c=0,u=i,l+=1),x&&(u=b+e*(v()/2+o),c+=l)},f;l<=a.length;)if(f=d(),f)return f.v;return[]}function Cu(e){"@babel/helpers - typeof";return Cu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cu(e)}function y8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function on(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?y8(Object(n),!0).forEach(function(r){E0e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y8(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function E0e(e,t,n){return t=S0e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function S0e(e){var t=C0e(e,"string");return Cu(t)=="symbol"?t:t+""}function C0e(e,t){if(Cu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Cu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function O0e(e,t,n,r,o){for(var a=(r||[]).slice(),i=a.length,s=t.start,c=t.end,l=function(d){var f=a[d],p,y=function(){return p===void 0&&(p=n(f,d)),p};if(d===i-1){var m=e*(f.coordinate+e*y()/2-c);a[d]=f=on(on({},f),{},{tickCoord:m>0?f.coordinate-m*e:f.coordinate})}else a[d]=f=on(on({},f),{},{tickCoord:f.coordinate});var v=kh(e,f.tickCoord,y,s,c);v&&(c=f.tickCoord-e*(y()/2+o),a[d]=on(on({},f),{},{isShow:!0}))},u=i-1;u>=0;u--)l(u);return a}function N0e(e,t,n,r,o,a){var i=(r||[]).slice(),s=i.length,c=t.start,l=t.end;if(a){var u=r[s-1],d=n(u,s-1),f=e*(u.coordinate+e*d/2-l);i[s-1]=u=on(on({},u),{},{tickCoord:f>0?u.coordinate-f*e:u.coordinate});var p=kh(e,u.tickCoord,function(){return d},c,l);p&&(l=u.tickCoord-e*(d/2+o),i[s-1]=on(on({},u),{},{isShow:!0}))}for(var y=a?s-1:s,m=function(b){var x=i[b],_,w=function(){return _===void 0&&(_=n(x,b)),_};if(b===0){var j=e*(x.coordinate-e*w()/2-c);i[b]=x=on(on({},x),{},{tickCoord:j<0?x.coordinate-j*e:x.coordinate})}else i[b]=x=on(on({},x),{},{tickCoord:x.coordinate});var E=kh(e,x.tickCoord,w,c,l);E&&(c=x.tickCoord+e*(w()/2+o),i[b]=on(on({},x),{},{isShow:!0}))},v=0;v<y;v++)m(v);return i}function Jj(e,t,n){var r=e.tick,o=e.ticks,a=e.viewBox,i=e.minTickGap,s=e.orientation,c=e.interval,l=e.tickFormatter,u=e.unit,d=e.angle;if(!o||!o.length||!r)return[];if(me(c)||aa.isSsr)return _0e(o,typeof c=="number"&&me(c)?c:0);var f=[],p=s==="top"||s==="bottom"?"width":"height",y=u&&p==="width"?Vl(u,{fontSize:t,letterSpacing:n}):{width:0,height:0},m=function(x,_){var w=We(l)?l(x.value,_):x.value;return p==="width"?x0e(Vl(w,{fontSize:t,letterSpacing:n}),y,d):Vl(w,{fontSize:t,letterSpacing:n})[p]},v=o.length>=2?xr(o[1].coordinate-o[0].coordinate):1,b=w0e(a,v,p);return c==="equidistantPreserveStart"?j0e(v,b,m,o,i):(c==="preserveStart"||c==="preserveStartEnd"?f=N0e(v,b,m,o,i,c==="preserveStartEnd"):f=O0e(v,b,m,o,i),f.filter(function(x){return x.isShow}))}var M0e=["viewBox"],k0e=["viewBox"],P0e=["ticks"];function Bs(e){"@babel/helpers - typeof";return Bs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bs(e)}function $s(){return $s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$s.apply(this,arguments)}function g8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function vn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?g8(Object(n),!0).forEach(function(r){eE(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g8(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Gj(e,t){if(e==null)return{};var n=A0e(e,t),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function A0e(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function T0e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v8(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,x8(r.key),r)}}function R0e(e,t,n){return t&&v8(e.prototype,t),n&&v8(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function I0e(e,t,n){return t=Ph(t),D0e(e,b8()?Reflect.construct(t,n||[],Ph(e).constructor):t.apply(e,n))}function D0e(e,t){if(t&&(Bs(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return L0e(e)}function L0e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b8(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(b8=function(){return!!e})()}function Ph(e){return Ph=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ph(e)}function F0e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Zj(e,t)}function Zj(e,t){return Zj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Zj(e,t)}function eE(e,t,n){return t=x8(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x8(e){var t=B0e(e,"string");return Bs(t)=="symbol"?t:t+""}function B0e(e,t){if(Bs(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Bs(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var zs=function(e){function t(n){var r;return T0e(this,t),r=I0e(this,t,[n]),r.state={fontSize:"",letterSpacing:""},r}return F0e(t,e),R0e(t,[{key:"shouldComponentUpdate",value:function(n,r){var o=n.viewBox,a=Gj(n,M0e),i=this.props,s=i.viewBox,c=Gj(i,k0e);return!hs(o,s)||!hs(a,c)||!hs(r,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var r=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];r&&this.setState({fontSize:window.getComputedStyle(r).fontSize,letterSpacing:window.getComputedStyle(r).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var r=this.props,o=r.x,a=r.y,i=r.width,s=r.height,c=r.orientation,l=r.tickSize,u=r.mirror,d=r.tickMargin,f,p,y,m,v,b,x=u?-1:1,_=n.tickSize||l,w=me(n.tickCoord)?n.tickCoord:n.coordinate;switch(c){case"top":f=p=n.coordinate,m=a+ +!u*s,y=m-x*_,b=y-x*d,v=w;break;case"left":y=m=n.coordinate,p=o+ +!u*i,f=p-x*_,v=f-x*d,b=w;break;case"right":y=m=n.coordinate,p=o+ +u*i,f=p+x*_,v=f+x*d,b=w;break;default:f=p=n.coordinate,m=a+ +u*s,y=m+x*_,b=y+x*d,v=w;break}return{line:{x1:f,y1:y,x2:p,y2:m},tick:{x:v,y:b}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,r=n.orientation,o=n.mirror,a;switch(r){case"left":a=o?"start":"end";break;case"right":a=o?"end":"start";break;default:a="middle";break}return a}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,r=n.orientation,o=n.mirror,a="end";switch(r){case"left":case"right":a="middle";break;case"top":a=o?"start":"end";break;default:a=o?"end":"start";break}return a}},{key:"renderAxisLine",value:function(){var n=this.props,r=n.x,o=n.y,a=n.width,i=n.height,s=n.orientation,c=n.mirror,l=n.axisLine,u=vn(vn(vn({},ot(this.props,!1)),ot(l,!1)),{},{fill:"none"});if(s==="top"||s==="bottom"){var d=+(s==="top"&&!c||s==="bottom"&&c);u=vn(vn({},u),{},{x1:r,y1:o+d*i,x2:r+a,y2:o+d*i})}else{var f=+(s==="left"&&!c||s==="right"&&c);u=vn(vn({},u),{},{x1:r+f*a,y1:o,x2:r+f*a,y2:o+i})}return V.createElement("line",$s({},u,{className:lt("recharts-cartesian-axis-line",Yn(l,"className"))}))}},{key:"renderTicks",value:function(n,r,o){var a=this,i=this.props,s=i.tickLine,c=i.stroke,l=i.tick,u=i.tickFormatter,d=i.unit,f=Jj(vn(vn({},this.props),{},{ticks:n}),r,o),p=this.getTickTextAnchor(),y=this.getTickVerticalAnchor(),m=ot(this.props,!1),v=ot(l,!1),b=vn(vn({},m),{},{fill:"none"},ot(s,!1)),x=f.map(function(_,w){var j=a.getTickLineCoord(_),E=j.line,S=j.tick,O=vn(vn(vn(vn({textAnchor:p,verticalAnchor:y},m),{},{stroke:"none",fill:c},v),S),{},{index:w,payload:_,visibleTicksCount:f.length,tickFormatter:u});return V.createElement(Wt,$s({className:"recharts-cartesian-axis-tick",key:"tick-".concat(_.value,"-").concat(_.coordinate,"-").concat(_.tickCoord)},fp(a.props,_,w)),s&&V.createElement("line",$s({},b,E,{className:lt("recharts-cartesian-axis-tick-line",Yn(s,"className"))})),l&&t.renderTickItem(l,O,"".concat(We(u)?u(_.value,w):_.value).concat(d||"")))});return V.createElement("g",{className:"recharts-cartesian-axis-ticks"},x)}},{key:"render",value:function(){var n=this,r=this.props,o=r.axisLine,a=r.width,i=r.height,s=r.ticksGenerator,c=r.className,l=r.hide;if(l)return null;var u=this.props,d=u.ticks,f=Gj(u,P0e),p=d;return We(s)&&(p=d&&d.length>0?s(this.props):s(f)),a<=0||i<=0||!p||!p.length?null:V.createElement(Wt,{className:lt("recharts-cartesian-axis",c),ref:function(y){n.layerReference=y}},o&&this.renderAxisLine(),this.renderTicks(p,this.state.fontSize,this.state.letterSpacing),rn.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(n,r,o){var a;return V.isValidElement(n)?a=V.cloneElement(n,r):We(n)?a=n(r):a=V.createElement(Ap,$s({},r,{className:"recharts-cartesian-axis-tick-value"}),o),a}}])}(g.Component);eE(zs,"displayName","CartesianAxis"),eE(zs,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var $0e=["x1","y1","x2","y2","key"],z0e=["offset"];function ri(e){"@babel/helpers - typeof";return ri=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ri(e)}function w8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function an(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?w8(Object(n),!0).forEach(function(r){V0e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w8(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function V0e(e,t,n){return t=U0e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function U0e(e){var t=H0e(e,"string");return ri(t)=="symbol"?t:t+""}function H0e(e,t){if(ri(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(ri(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function oi(){return oi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},oi.apply(this,arguments)}function _8(e,t){if(e==null)return{};var n=W0e(e,t),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function W0e(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var q0e=function(e){var t=e.fill;if(!t||t==="none")return null;var n=e.fillOpacity,r=e.x,o=e.y,a=e.width,i=e.height,s=e.ry;return V.createElement("rect",{x:r,y:o,ry:s,width:a,height:i,stroke:"none",fill:t,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function j8(e,t){var n;if(V.isValidElement(e))n=V.cloneElement(e,t);else if(We(e))n=e(t);else{var r=t.x1,o=t.y1,a=t.x2,i=t.y2,s=t.key,c=_8(t,$0e),l=ot(c,!1);l.offset;var u=_8(l,z0e);n=V.createElement("line",oi({},u,{x1:r,y1:o,x2:a,y2:i,fill:"none",key:s}))}return n}function Y0e(e){var t=e.x,n=e.width,r=e.horizontal,o=r===void 0?!0:r,a=e.horizontalPoints;if(!o||!a||!a.length)return null;var i=a.map(function(s,c){var l=an(an({},e),{},{x1:t,y1:s,x2:t+n,y2:s,key:"line-".concat(c),index:c});return j8(o,l)});return V.createElement("g",{className:"recharts-cartesian-grid-horizontal"},i)}function K0e(e){var t=e.y,n=e.height,r=e.vertical,o=r===void 0?!0:r,a=e.verticalPoints;if(!o||!a||!a.length)return null;var i=a.map(function(s,c){var l=an(an({},e),{},{x1:s,y1:t,x2:s,y2:t+n,key:"line-".concat(c),index:c});return j8(o,l)});return V.createElement("g",{className:"recharts-cartesian-grid-vertical"},i)}function X0e(e){var t=e.horizontalFill,n=e.fillOpacity,r=e.x,o=e.y,a=e.width,i=e.height,s=e.horizontalPoints,c=e.horizontal,l=c===void 0?!0:c;if(!l||!t||!t.length)return null;var u=s.map(function(f){return Math.round(f+o-o)}).sort(function(f,p){return f-p});o!==u[0]&&u.unshift(0);var d=u.map(function(f,p){var y=!u[p+1],m=y?o+i-f:u[p+1]-f;if(m<=0)return null;var v=p%t.length;return V.createElement("rect",{key:"react-".concat(p),y:f,x:r,height:m,width:a,stroke:"none",fill:t[v],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return V.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function Q0e(e){var t=e.vertical,n=t===void 0?!0:t,r=e.verticalFill,o=e.fillOpacity,a=e.x,i=e.y,s=e.width,c=e.height,l=e.verticalPoints;if(!n||!r||!r.length)return null;var u=l.map(function(f){return Math.round(f+a-a)}).sort(function(f,p){return f-p});a!==u[0]&&u.unshift(0);var d=u.map(function(f,p){var y=!u[p+1],m=y?a+s-f:u[p+1]-f;if(m<=0)return null;var v=p%r.length;return V.createElement("rect",{key:"react-".concat(p),x:f,y:i,width:m,height:c,stroke:"none",fill:r[v],fillOpacity:o,className:"recharts-cartesian-grid-bg"})});return V.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var J0e=function(e,t){var n=e.xAxis,r=e.width,o=e.height,a=e.offset;return e6(Jj(an(an(an({},zs.defaultProps),n),{},{ticks:Do(n,!0),viewBox:{x:0,y:0,width:r,height:o}})),a.left,a.left+a.width,t)},G0e=function(e,t){var n=e.yAxis,r=e.width,o=e.height,a=e.offset;return e6(Jj(an(an(an({},zs.defaultProps),n),{},{ticks:Do(n,!0),viewBox:{x:0,y:0,width:r,height:o}})),a.top,a.top+a.height,t)},Vs={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function E8(e){var t,n,r,o,a,i,s=zj(),c=Vj(),l=Bve(),u=an(an({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:Vs.stroke,fill:(n=e.fill)!==null&&n!==void 0?n:Vs.fill,horizontal:(r=e.horizontal)!==null&&r!==void 0?r:Vs.horizontal,horizontalFill:(o=e.horizontalFill)!==null&&o!==void 0?o:Vs.horizontalFill,vertical:(a=e.vertical)!==null&&a!==void 0?a:Vs.vertical,verticalFill:(i=e.verticalFill)!==null&&i!==void 0?i:Vs.verticalFill,x:me(e.x)?e.x:l.left,y:me(e.y)?e.y:l.top,width:me(e.width)?e.width:l.width,height:me(e.height)?e.height:l.height}),d=u.x,f=u.y,p=u.width,y=u.height,m=u.syncWithTicks,v=u.horizontalValues,b=u.verticalValues,x=Dve(),_=Lve();if(!me(p)||p<=0||!me(y)||y<=0||!me(d)||d!==+d||!me(f)||f!==+f)return null;var w=u.verticalCoordinatesGenerator||J0e,j=u.horizontalCoordinatesGenerator||G0e,E=u.horizontalPoints,S=u.verticalPoints;if((!E||!E.length)&&We(j)){var O=v&&v.length,k=j({yAxis:_?an(an({},_),{},{ticks:O?v:_.ticks}):void 0,width:s,height:c,offset:l},O?!0:m);Oo(Array.isArray(k),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(ri(k),"]")),Array.isArray(k)&&(E=k)}if((!S||!S.length)&&We(w)){var N=b&&b.length,P=w({xAxis:x?an(an({},x),{},{ticks:N?b:x.ticks}):void 0,width:s,height:c,offset:l},N?!0:m);Oo(Array.isArray(P),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(ri(P),"]")),Array.isArray(P)&&(S=P)}return V.createElement("g",{className:"recharts-cartesian-grid"},V.createElement(q0e,{fill:u.fill,fillOpacity:u.fillOpacity,x:u.x,y:u.y,width:u.width,height:u.height,ry:u.ry}),V.createElement(Y0e,oi({},u,{offset:l,horizontalPoints:E,xAxis:x,yAxis:_})),V.createElement(K0e,oi({},u,{offset:l,verticalPoints:S,xAxis:x,yAxis:_})),V.createElement(X0e,oi({},u,{horizontalPoints:E})),V.createElement(Q0e,oi({},u,{verticalPoints:S})))}E8.displayName="CartesianGrid";function Us(e){"@babel/helpers - typeof";return Us=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Us(e)}function Z0e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ebe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,O8(r.key),r)}}function tbe(e,t,n){return t&&ebe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function nbe(e,t,n){return t=Ah(t),rbe(e,S8()?Reflect.construct(t,n||[],Ah(e).constructor):t.apply(e,n))}function rbe(e,t){if(t&&(Us(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return obe(e)}function obe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S8(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(S8=function(){return!!e})()}function Ah(e){return Ah=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ah(e)}function abe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tE(e,t)}function tE(e,t){return tE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},tE(e,t)}function C8(e,t,n){return t=O8(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O8(e){var t=ibe(e,"string");return Us(t)=="symbol"?t:t+""}function ibe(e,t){if(Us(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Us(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function nE(){return nE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nE.apply(this,arguments)}function sbe(e){var t=e.xAxisId,n=zj(),r=Vj(),o=e8(t);return o==null?null:V.createElement(zs,nE({},o,{className:lt("recharts-".concat(o.axisType," ").concat(o.axisType),o.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(a){return Do(a,!0)}}))}var Th=function(e){function t(){return Z0e(this,t),nbe(this,t,arguments)}return abe(t,e),tbe(t,[{key:"render",value:function(){return V.createElement(sbe,this.props)}}])}(V.Component);C8(Th,"displayName","XAxis"),C8(Th,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Hs(e){"@babel/helpers - typeof";return Hs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hs(e)}function cbe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lbe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,k8(r.key),r)}}function ube(e,t,n){return t&&lbe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function dbe(e,t,n){return t=Rh(t),fbe(e,N8()?Reflect.construct(t,n||[],Rh(e).constructor):t.apply(e,n))}function fbe(e,t){if(t&&(Hs(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return pbe(e)}function pbe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function N8(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(N8=function(){return!!e})()}function Rh(e){return Rh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Rh(e)}function hbe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rE(e,t)}function rE(e,t){return rE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},rE(e,t)}function M8(e,t,n){return t=k8(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function k8(e){var t=mbe(e,"string");return Hs(t)=="symbol"?t:t+""}function mbe(e,t){if(Hs(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Hs(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function oE(){return oE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},oE.apply(this,arguments)}var ybe=function(e){var t=e.yAxisId,n=zj(),r=Vj(),o=t8(t);return o==null?null:V.createElement(zs,oE({},o,{className:lt("recharts-".concat(o.axisType," ").concat(o.axisType),o.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(a){return Do(a,!0)}}))},aE=function(e){function t(){return cbe(this,t),dbe(this,t,arguments)}return hbe(t,e),ube(t,[{key:"render",value:function(){return V.createElement(ybe,this.props)}}])}(V.Component);M8(aE,"displayName","YAxis"),M8(aE,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function P8(e){return xbe(e)||bbe(e)||vbe(e)||gbe()}function gbe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vbe(e,t){if(e){if(typeof e=="string")return iE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return iE(e,t)}}function bbe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function xbe(e){if(Array.isArray(e))return iE(e)}function iE(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var sE=function(e,t,n,r,o){var a=wr(e,qj),i=wr(e,Ch),s=[].concat(P8(a),P8(i)),c=wr(e,Mh),l="".concat(r,"Id"),u=r[0],d=t;if(s.length&&(d=s.reduce(function(y,m){if(m.props[l]===n&&Hr(m.props,"extendDomain")&&me(m.props[u])){var v=m.props[u];return[Math.min(y[0],v),Math.max(y[1],v)]}return y},d)),c.length){var f="".concat(u,"1"),p="".concat(u,"2");d=c.reduce(function(y,m){if(m.props[l]===n&&Hr(m.props,"extendDomain")&&me(m.props[f])&&me(m.props[p])){var v=m.props[f],b=m.props[p];return[Math.min(y[0],v,b),Math.max(y[1],v,b)]}return y},d)}return o&&o.length&&(d=o.reduce(function(y,m){return me(m)?[Math.min(y[0],m),Math.max(y[1],m)]:y},d)),d},A8={exports:{}},T8;function wbe(){return T8||(T8=1,function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function o(c,l,u){this.fn=c,this.context=l,this.once=u||!1}function a(c,l,u,d,f){if(typeof u!="function")throw new TypeError("The listener must be a function");var p=new o(u,d||c,f),y=n?n+l:l;return c._events[y]?c._events[y].fn?c._events[y]=[c._events[y],p]:c._events[y].push(p):(c._events[y]=p,c._eventsCount++),c}function i(c,l){--c._eventsCount===0?c._events=new r:delete c._events[l]}function s(){this._events=new r,this._eventsCount=0}s.prototype.eventNames=function(){var c=[],l,u;if(this._eventsCount===0)return c;for(u in l=this._events)t.call(l,u)&&c.push(n?u.slice(1):u);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(l)):c},s.prototype.listeners=function(c){var l=n?n+c:c,u=this._events[l];if(!u)return[];if(u.fn)return[u.fn];for(var d=0,f=u.length,p=new Array(f);d<f;d++)p[d]=u[d].fn;return p},s.prototype.listenerCount=function(c){var l=n?n+c:c,u=this._events[l];return u?u.fn?1:u.length:0},s.prototype.emit=function(c,l,u,d,f,p){var y=n?n+c:c;if(!this._events[y])return!1;var m=this._events[y],v=arguments.length,b,x;if(m.fn){switch(m.once&&this.removeListener(c,m.fn,void 0,!0),v){case 1:return m.fn.call(m.context),!0;case 2:return m.fn.call(m.context,l),!0;case 3:return m.fn.call(m.context,l,u),!0;case 4:return m.fn.call(m.context,l,u,d),!0;case 5:return m.fn.call(m.context,l,u,d,f),!0;case 6:return m.fn.call(m.context,l,u,d,f,p),!0}for(x=1,b=new Array(v-1);x<v;x++)b[x-1]=arguments[x];m.fn.apply(m.context,b)}else{var _=m.length,w;for(x=0;x<_;x++)switch(m[x].once&&this.removeListener(c,m[x].fn,void 0,!0),v){case 1:m[x].fn.call(m[x].context);break;case 2:m[x].fn.call(m[x].context,l);break;case 3:m[x].fn.call(m[x].context,l,u);break;case 4:m[x].fn.call(m[x].context,l,u,d);break;default:if(!b)for(w=1,b=new Array(v-1);w<v;w++)b[w-1]=arguments[w];m[x].fn.apply(m[x].context,b)}}return!0},s.prototype.on=function(c,l,u){return a(this,c,l,u,!1)},s.prototype.once=function(c,l,u){return a(this,c,l,u,!0)},s.prototype.removeListener=function(c,l,u,d){var f=n?n+c:c;if(!this._events[f])return this;if(!l)return i(this,f),this;var p=this._events[f];if(p.fn)p.fn===l&&(!d||p.once)&&(!u||p.context===u)&&i(this,f);else{for(var y=0,m=[],v=p.length;y<v;y++)(p[y].fn!==l||d&&!p[y].once||u&&p[y].context!==u)&&m.push(p[y]);m.length?this._events[f]=m.length===1?m[0]:m:i(this,f)}return this},s.prototype.removeAllListeners=function(c){var l;return c?(l=n?n+c:c,this._events[l]&&i(this,l)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,e.exports=s}(A8)),A8.exports}var _be=wbe();const jbe=Xe(_be);var cE=new jbe,lE="recharts.syncMouseEvents";function Ou(e){"@babel/helpers - typeof";return Ou=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ou(e)}function Ebe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Sbe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,R8(r.key),r)}}function Cbe(e,t,n){return t&&Sbe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function uE(e,t,n){return t=R8(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R8(e){var t=Obe(e,"string");return Ou(t)=="symbol"?t:t+""}function Obe(e,t){if(Ou(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Ou(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Nbe=function(){function e(){Ebe(this,e),uE(this,"activeIndex",0),uE(this,"coordinateList",[]),uE(this,"layout","horizontal")}return Cbe(e,[{key:"setDetails",value:function(t){var n,r=t.coordinateList,o=r===void 0?null:r,a=t.container,i=a===void 0?null:a,s=t.layout,c=s===void 0?null:s,l=t.offset,u=l===void 0?null:l,d=t.mouseHandlerCallback,f=d===void 0?null:d;this.coordinateList=(n=o??this.coordinateList)!==null&&n!==void 0?n:[],this.container=i??this.container,this.layout=c??this.layout,this.offset=u??this.offset,this.mouseHandlerCallback=f??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(t){if(this.coordinateList.length!==0)switch(t.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(t){this.activeIndex=t}},{key:"spoofMouse",value:function(){var t,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var r=this.container.getBoundingClientRect(),o=r.x,a=r.y,i=r.height,s=this.coordinateList[this.activeIndex].coordinate,c=((t=window)===null||t===void 0?void 0:t.scrollX)||0,l=((n=window)===null||n===void 0?void 0:n.scrollY)||0,u=o+s+c,d=a+this.offset.top+i/2+l;this.mouseHandlerCallback({pageX:u,pageY:d})}}}])}();function Mbe(e,t,n){if(n==="number"&&t===!0&&Array.isArray(e)){var r=e==null?void 0:e[0],o=e==null?void 0:e[1];if(r&&o&&me(r)&&me(o))return!0}return!1}function kbe(e,t,n,r){var o=r/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-o:n.left+.5,y:e==="horizontal"?n.top+.5:t.y-o,width:e==="horizontal"?r:n.width-1,height:e==="horizontal"?n.height-1:r}}function I8(e){var t=e.cx,n=e.cy,r=e.radius,o=e.startAngle,a=e.endAngle,i=Gt(t,n,r,o),s=Gt(t,n,r,a);return{points:[i,s],cx:t,cy:n,radius:r,startAngle:o,endAngle:a}}function Pbe(e,t,n){var r,o,a,i;if(e==="horizontal")r=t.x,a=r,o=n.top,i=n.top+n.height;else if(e==="vertical")o=t.y,i=o,r=n.left,a=n.left+n.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var s=t.cx,c=t.cy,l=t.innerRadius,u=t.outerRadius,d=t.angle,f=Gt(s,c,l,d),p=Gt(s,c,u,d);r=f.x,o=f.y,a=p.x,i=p.y}else return I8(t);return[{x:r,y:o},{x:a,y:i}]}function Nu(e){"@babel/helpers - typeof";return Nu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nu(e)}function D8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Ih(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?D8(Object(n),!0).forEach(function(r){Abe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D8(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Abe(e,t,n){return t=Tbe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Tbe(e){var t=Rbe(e,"string");return Nu(t)=="symbol"?t:t+""}function Rbe(e,t){if(Nu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Nu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ibe(e){var t,n,r=e.element,o=e.tooltipEventType,a=e.isActive,i=e.activeCoordinate,s=e.activePayload,c=e.offset,l=e.activeTooltipIndex,u=e.tooltipAxisBandSize,d=e.layout,f=e.chartName,p=(t=r.props.cursor)!==null&&t!==void 0?t:(n=r.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!r||!p||!a||!i||f!=="ScatterChart"&&o!=="axis")return null;var y,m=E6;if(f==="ScatterChart")y=i,m=Jye;else if(f==="BarChart")y=kbe(d,i,c,u),m=gj;else if(d==="radial"){var v=I8(i),b=v.cx,x=v.cy,_=v.radius,w=v.startAngle,j=v.endAngle;y={cx:b,cy:x,startAngle:w,endAngle:j,innerRadius:_,outerRadius:_},m=x6}else y={points:Pbe(d,i,c)},m=E6;var E=Ih(Ih(Ih(Ih({stroke:"#ccc",pointerEvents:"none"},c),y),ot(p,!1)),{},{payload:s,payloadIndex:l,className:lt("recharts-tooltip-cursor",p.className)});return g.isValidElement(p)?g.cloneElement(p,E):g.createElement(m,E)}var Dbe=["item"],Lbe=["children","className","width","height","style","compact","title","desc"];function Ws(e){"@babel/helpers - typeof";return Ws=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ws(e)}function qs(){return qs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qs.apply(this,arguments)}function L8(e,t){return $be(e)||Bbe(e,t)||$8(e,t)||Fbe()}function Fbe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bbe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,o,a,i,s=[],c=!0,l=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(c=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(u){l=!0,o=u}finally{try{if(!c&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return s}}function $be(e){if(Array.isArray(e))return e}function F8(e,t){if(e==null)return{};var n=zbe(e,t),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function zbe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Vbe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ube(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,V8(r.key),r)}}function Hbe(e,t,n){return t&&Ube(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Wbe(e,t,n){return t=Dh(t),qbe(e,B8()?Reflect.construct(t,n||[],Dh(e).constructor):t.apply(e,n))}function qbe(e,t){if(t&&(Ws(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ybe(e)}function Ybe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function B8(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(B8=function(){return!!e})()}function Dh(e){return Dh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Dh(e)}function Kbe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&dE(e,t)}function dE(e,t){return dE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},dE(e,t)}function Ys(e){return Jbe(e)||Qbe(e)||$8(e)||Xbe()}function Xbe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $8(e,t){if(e){if(typeof e=="string")return fE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fE(e,t)}}function Qbe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Jbe(e){if(Array.isArray(e))return fE(e)}function fE(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function z8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function ae(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?z8(Object(n),!0).forEach(function(r){Re(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z8(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Re(e,t,n){return t=V8(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function V8(e){var t=Gbe(e,"string");return Ws(t)=="symbol"?t:t+""}function Gbe(e,t){if(Ws(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Ws(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Zbe={xAxis:["bottom","top"],yAxis:["left","right"]},exe={width:"100%",height:"100%"},U8={x:0,y:0};function Lh(e){return e}var txe=function(e,t){return t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius},nxe=function(e,t,n,r){var o=t.find(function(l){return l&&l.index===n});if(o){if(e==="horizontal")return{x:o.coordinate,y:r.y};if(e==="vertical")return{x:r.x,y:o.coordinate};if(e==="centric"){var a=o.coordinate,i=r.radius;return ae(ae(ae({},r),Gt(r.cx,r.cy,i,a)),{},{angle:a,radius:i})}var s=o.coordinate,c=r.angle;return ae(ae(ae({},r),Gt(r.cx,r.cy,s,c)),{},{angle:c,radius:s})}return U8},Fh=function(e,t){var n=t.graphicalItems,r=t.dataStartIndex,o=t.dataEndIndex,a=(n??[]).reduce(function(i,s){var c=s.props.data;return c&&c.length?[].concat(Ys(i),Ys(c)):i},[]);return a.length>0?a:e&&e.length&&me(r)&&me(o)?e.slice(r,o+1):[]};function H8(e){return e==="number"?[0,"auto"]:void 0}var pE=function(e,t,n,r){var o=e.graphicalItems,a=e.tooltipAxis,i=Fh(t,e);return n<0||!o||!o.length||n>=i.length?null:o.reduce(function(s,c){var l,u=(l=c.props.data)!==null&&l!==void 0?l:t;u&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=n&&(u=u.slice(e.dataStartIndex,e.dataEndIndex+1));var d;if(a.dataKey&&!a.allowDuplicatedCategory){var f=u===void 0?i:u;d=Iw(f,a.dataKey,r)}else d=u&&u[n]||i[n];return d?[].concat(Ys(s),[s6(c,d)]):s},[])},W8=function(e,t,n,r){var o=r||{x:e.chartX,y:e.chartY},a=txe(o,n),i=e.orderedTooltipTicks,s=e.tooltipAxis,c=e.tooltipTicks,l=qpe(a,i,c,s);if(l>=0&&c){var u=c[l]&&c[l].value,d=pE(e,t,l,u),f=nxe(n,i,l,o);return{activeTooltipIndex:l,activeLabel:u,activePayload:d,activeCoordinate:f}}return null},rxe=function(e,t){var n=t.axes,r=t.graphicalItems,o=t.axisType,a=t.axisIdKey,i=t.stackGroups,s=t.dataStartIndex,c=t.dataEndIndex,l=e.layout,u=e.children,d=e.stackOffset,f=ZB(l,o);return n.reduce(function(p,y){var m,v=y.type.defaultProps!==void 0?ae(ae({},y.type.defaultProps),y.props):y.props,b=v.type,x=v.dataKey,_=v.allowDataOverflow,w=v.allowDuplicatedCategory,j=v.scale,E=v.ticks,S=v.includeHidden,O=v[a];if(p[O])return p;var k=Fh(e.data,{graphicalItems:r.filter(function(U){var F,H=a in U.props?U.props[a]:(F=U.type.defaultProps)===null||F===void 0?void 0:F[a];return H===O}),dataStartIndex:s,dataEndIndex:c}),N=k.length,P,R,A;Mbe(v.domain,_,b)&&(P=Z_(v.domain,null,_),f&&(b==="number"||j!=="auto")&&(A=th(k,x,"category")));var C=H8(b);if(!P||P.length===0){var M,T=(M=v.domain)!==null&&M!==void 0?M:C;if(x){if(P=th(k,x,b),b==="category"&&f){var D=ose(P);w&&D?(R=P,P=gh(0,N)):w||(P=i6(T,P,y).reduce(function(U,F){return U.indexOf(F)>=0?U:[].concat(Ys(U),[F])},[]))}else if(b==="category")w?P=P.filter(function(U){return U!==""&&!at(U)}):P=i6(T,P,y).reduce(function(U,F){return U.indexOf(F)>=0||F===""||at(F)?U:[].concat(Ys(U),[F])},[]);else if(b==="number"){var I=Jpe(k,r.filter(function(U){var F,H,J=a in U.props?U.props[a]:(F=U.type.defaultProps)===null||F===void 0?void 0:F[a],q="hide"in U.props?U.props.hide:(H=U.type.defaultProps)===null||H===void 0?void 0:H.hide;return J===O&&(S||!q)}),x,o,l);I&&(P=I)}f&&(b==="number"||j!=="auto")&&(A=th(k,x,"category"))}else f?P=gh(0,N):i&&i[O]&&i[O].hasStack&&b==="number"?P=d==="expand"?[0,1]:r6(i[O].stackGroups,s,c):P=GB(k,r.filter(function(U){var F=a in U.props?U.props[a]:U.type.defaultProps[a],H="hide"in U.props?U.props.hide:U.type.defaultProps.hide;return F===O&&(S||!H)}),b,l,!0);if(b==="number")P=sE(u,P,O,o,E),T&&(P=Z_(T,P,_));else if(b==="category"&&T){var L=T,B=P.every(function(U){return L.indexOf(U)>=0});B&&(P=L)}}return ae(ae({},p),{},Re({},O,ae(ae({},v),{},{axisType:o,domain:P,categoricalDomain:A,duplicateDomain:R,originalDomain:(m=v.domain)!==null&&m!==void 0?m:C,isCategorical:f,layout:l})))},{})},oxe=function(e,t){var n=t.graphicalItems,r=t.Axis,o=t.axisType,a=t.axisIdKey,i=t.stackGroups,s=t.dataStartIndex,c=t.dataEndIndex,l=e.layout,u=e.children,d=Fh(e.data,{graphicalItems:n,dataStartIndex:s,dataEndIndex:c}),f=d.length,p=ZB(l,o),y=-1;return n.reduce(function(m,v){var b=v.type.defaultProps!==void 0?ae(ae({},v.type.defaultProps),v.props):v.props,x=b[a],_=H8("number");if(!m[x]){y++;var w;return p?w=gh(0,f):i&&i[x]&&i[x].hasStack?(w=r6(i[x].stackGroups,s,c),w=sE(u,w,x,o)):(w=Z_(_,GB(d,n.filter(function(j){var E,S,O=a in j.props?j.props[a]:(E=j.type.defaultProps)===null||E===void 0?void 0:E[a],k="hide"in j.props?j.props.hide:(S=j.type.defaultProps)===null||S===void 0?void 0:S.hide;return O===x&&!k}),"number",l),r.defaultProps.allowDataOverflow),w=sE(u,w,x,o)),ae(ae({},m),{},Re({},x,ae(ae({axisType:o},r.defaultProps),{},{hide:!0,orientation:Yn(Zbe,"".concat(o,".").concat(y%2),null),domain:w,originalDomain:_,isCategorical:p,layout:l})))}return m},{})},axe=function(e,t){var n=t.axisType,r=n===void 0?"xAxis":n,o=t.AxisComp,a=t.graphicalItems,i=t.stackGroups,s=t.dataStartIndex,c=t.dataEndIndex,l=e.children,u="".concat(r,"Id"),d=wr(l,o),f={};return d&&d.length?f=rxe(e,{axes:d,graphicalItems:a,axisType:r,axisIdKey:u,stackGroups:i,dataStartIndex:s,dataEndIndex:c}):a&&a.length&&(f=oxe(e,{Axis:o,graphicalItems:a,axisType:r,axisIdKey:u,stackGroups:i,dataStartIndex:s,dataEndIndex:c})),f},ixe=function(e){var t=oa(e),n=Do(t,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:H1(n,function(r){return r.coordinate}),tooltipAxis:t,tooltipAxisBandSize:rh(t,n)}},q8=function(e){var t=e.children,n=e.defaultShowTooltip,r=Bn(t,Rs),o=0,a=0;return e.data&&e.data.length!==0&&(a=e.data.length-1),r&&r.props&&(r.props.startIndex>=0&&(o=r.props.startIndex),r.props.endIndex>=0&&(a=r.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:o,dataEndIndex:a,activeTooltipIndex:-1,isTooltipActive:!!n}},sxe=function(e){return!e||!e.length?!1:e.some(function(t){var n=Co(t&&t.type);return n&&n.indexOf("Bar")>=0})},Y8=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},cxe=function(e,t){var n=e.props,r=e.graphicalItems,o=e.xAxisMap,a=o===void 0?{}:o,i=e.yAxisMap,s=i===void 0?{}:i,c=n.width,l=n.height,u=n.children,d=n.margin||{},f=Bn(u,Rs),p=Bn(u,vs),y=Object.keys(s).reduce(function(w,j){var E=s[j],S=E.orientation;return!E.mirror&&!E.hide?ae(ae({},w),{},Re({},S,w[S]+E.width)):w},{left:d.left||0,right:d.right||0}),m=Object.keys(a).reduce(function(w,j){var E=a[j],S=E.orientation;return!E.mirror&&!E.hide?ae(ae({},w),{},Re({},S,Yn(w,"".concat(S))+E.height)):w},{top:d.top||0,bottom:d.bottom||0}),v=ae(ae({},m),y),b=v.bottom;f&&(v.bottom+=f.props.height||Rs.defaultProps.height),p&&t&&(v=Xpe(v,r,n,t));var x=c-v.left-v.right,_=l-v.top-v.bottom;return ae(ae({brushBottom:b},v),{},{width:Math.max(x,0),height:Math.max(_,0)})},lxe=function(e,t){if(t==="xAxis")return e[t].width;if(t==="yAxis")return e[t].height},uxe=function(e){var t=e.chartName,n=e.GraphicalChild,r=e.defaultTooltipEventType,o=r===void 0?"axis":r,a=e.validateTooltipEventTypes,i=a===void 0?["axis"]:a,s=e.axisComponents,c=e.legendContent,l=e.formatAxisMap,u=e.defaultProps,d=function(m,v){var b=v.graphicalItems,x=v.stackGroups,_=v.offset,w=v.updateId,j=v.dataStartIndex,E=v.dataEndIndex,S=m.barSize,O=m.layout,k=m.barGap,N=m.barCategoryGap,P=m.maxBarSize,R=Y8(O),A=R.numericAxisName,C=R.cateAxisName,M=sxe(b),T=[];return b.forEach(function(D,I){var L=Fh(m.data,{graphicalItems:[D],dataStartIndex:j,dataEndIndex:E}),B=D.type.defaultProps!==void 0?ae(ae({},D.type.defaultProps),D.props):D.props,U=B.dataKey,F=B.maxBarSize,H=B["".concat(A,"Id")],J=B["".concat(C,"Id")],q={},re=s.reduce(function(ze,st){var He=v["".concat(st.axisType,"Map")],ct=B["".concat(st.axisType,"Id")];He&&He[ct]||st.axisType==="zAxis"||Za();var Ht=He[ct];return ae(ae({},ze),{},Re(Re({},st.axisType,Ht),"".concat(st.axisType,"Ticks"),Do(Ht)))},q),Z=re[C],Y=re["".concat(C,"Ticks")],W=x&&x[H]&&x[H].hasStack&&lhe(D,x[H].stackGroups),G=Co(D.type).indexOf("Bar")>=0,te=rh(Z,Y),$=[],se=M&&Ype({barSize:S,stackGroups:x,totalSize:lxe(re,C)});if(G){var le,ve,Te=at(F)?P:F,qe=(le=(ve=rh(Z,Y,!0))!==null&&ve!==void 0?ve:Te)!==null&&le!==void 0?le:0;$=Kpe({barGap:k,barCategoryGap:N,bandSize:qe!==te?qe:te,sizeList:se[J],maxBarSize:Te}),qe!==te&&($=$.map(function(ze){return ae(ae({},ze),{},{position:ae(ae({},ze.position),{},{offset:ze.position.offset-qe/2})})}))}var Ye=D&&D.type&&D.type.getComposedData;Ye&&T.push({props:ae(ae({},Ye(ae(ae({},re),{},{displayedData:L,props:m,dataKey:U,item:D,bandSize:te,barPosition:$,offset:_,stackedData:W,layout:O,dataStartIndex:j,dataEndIndex:E}))),{},Re(Re(Re({key:D.key||"item-".concat(I)},A,re[A]),C,re[C]),"animationId",w)),childIndex:mse(D,m.children),item:D})}),T},f=function(m,v){var b=m.props,x=m.dataStartIndex,_=m.dataEndIndex,w=m.updateId;if(!d4({props:b}))return null;var j=b.children,E=b.layout,S=b.stackOffset,O=b.data,k=b.reverseStackOrder,N=Y8(E),P=N.numericAxisName,R=N.cateAxisName,A=wr(j,n),C=ihe(O,A,"".concat(P,"Id"),"".concat(R,"Id"),S,k),M=s.reduce(function(B,U){var F="".concat(U.axisType,"Map");return ae(ae({},B),{},Re({},F,axe(b,ae(ae({},U),{},{graphicalItems:A,stackGroups:U.axisType===P&&C,dataStartIndex:x,dataEndIndex:_}))))},{}),T=cxe(ae(ae({},M),{},{props:b,graphicalItems:A}),v==null?void 0:v.legendBBox);Object.keys(M).forEach(function(B){M[B]=l(b,M[B],T,B.replace("Map",""),t)});var D=M["".concat(R,"Map")],I=ixe(D),L=d(b,ae(ae({},M),{},{dataStartIndex:x,dataEndIndex:_,updateId:w,graphicalItems:A,stackGroups:C,offset:T}));return ae(ae({formattedGraphicalItems:L,graphicalItems:A,offset:T,stackGroups:C},I),M)},p=function(m){function v(b){var x,_,w;return Vbe(this,v),w=Wbe(this,v,[b]),Re(w,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Re(w,"accessibilityManager",new Nbe),Re(w,"handleLegendBBoxUpdate",function(j){if(j){var E=w.state,S=E.dataStartIndex,O=E.dataEndIndex,k=E.updateId;w.setState(ae({legendBBox:j},f({props:w.props,dataStartIndex:S,dataEndIndex:O,updateId:k},ae(ae({},w.state),{},{legendBBox:j}))))}}),Re(w,"handleReceiveSyncEvent",function(j,E,S){if(w.props.syncId===j){if(S===w.eventEmitterSymbol&&typeof w.props.syncMethod!="function")return;w.applySyncEvent(E)}}),Re(w,"handleBrushChange",function(j){var E=j.startIndex,S=j.endIndex;if(E!==w.state.dataStartIndex||S!==w.state.dataEndIndex){var O=w.state.updateId;w.setState(function(){return ae({dataStartIndex:E,dataEndIndex:S},f({props:w.props,dataStartIndex:E,dataEndIndex:S,updateId:O},w.state))}),w.triggerSyncEvent({dataStartIndex:E,dataEndIndex:S})}}),Re(w,"handleMouseEnter",function(j){var E=w.getMouseInfo(j);if(E){var S=ae(ae({},E),{},{isTooltipActive:!0});w.setState(S),w.triggerSyncEvent(S);var O=w.props.onMouseEnter;We(O)&&O(S,j)}}),Re(w,"triggeredAfterMouseMove",function(j){var E=w.getMouseInfo(j),S=E?ae(ae({},E),{},{isTooltipActive:!0}):{isTooltipActive:!1};w.setState(S),w.triggerSyncEvent(S);var O=w.props.onMouseMove;We(O)&&O(S,j)}),Re(w,"handleItemMouseEnter",function(j){w.setState(function(){return{isTooltipActive:!0,activeItem:j,activePayload:j.tooltipPayload,activeCoordinate:j.tooltipPosition||{x:j.cx,y:j.cy}}})}),Re(w,"handleItemMouseLeave",function(){w.setState(function(){return{isTooltipActive:!1}})}),Re(w,"handleMouseMove",function(j){j.persist(),w.throttleTriggeredAfterMouseMove(j)}),Re(w,"handleMouseLeave",function(j){w.throttleTriggeredAfterMouseMove.cancel();var E={isTooltipActive:!1};w.setState(E),w.triggerSyncEvent(E);var S=w.props.onMouseLeave;We(S)&&S(E,j)}),Re(w,"handleOuterEvent",function(j){var E=hse(j),S=Yn(w.props,"".concat(E));if(E&&We(S)){var O,k;/.*touch.*/i.test(E)?k=w.getMouseInfo(j.changedTouches[0]):k=w.getMouseInfo(j),S((O=k)!==null&&O!==void 0?O:{},j)}}),Re(w,"handleClick",function(j){var E=w.getMouseInfo(j);if(E){var S=ae(ae({},E),{},{isTooltipActive:!0});w.setState(S),w.triggerSyncEvent(S);var O=w.props.onClick;We(O)&&O(S,j)}}),Re(w,"handleMouseDown",function(j){var E=w.props.onMouseDown;if(We(E)){var S=w.getMouseInfo(j);E(S,j)}}),Re(w,"handleMouseUp",function(j){var E=w.props.onMouseUp;if(We(E)){var S=w.getMouseInfo(j);E(S,j)}}),Re(w,"handleTouchMove",function(j){j.changedTouches!=null&&j.changedTouches.length>0&&w.throttleTriggeredAfterMouseMove(j.changedTouches[0])}),Re(w,"handleTouchStart",function(j){j.changedTouches!=null&&j.changedTouches.length>0&&w.handleMouseDown(j.changedTouches[0])}),Re(w,"handleTouchEnd",function(j){j.changedTouches!=null&&j.changedTouches.length>0&&w.handleMouseUp(j.changedTouches[0])}),Re(w,"triggerSyncEvent",function(j){w.props.syncId!==void 0&&cE.emit(lE,w.props.syncId,j,w.eventEmitterSymbol)}),Re(w,"applySyncEvent",function(j){var E=w.props,S=E.layout,O=E.syncMethod,k=w.state.updateId,N=j.dataStartIndex,P=j.dataEndIndex;if(j.dataStartIndex!==void 0||j.dataEndIndex!==void 0)w.setState(ae({dataStartIndex:N,dataEndIndex:P},f({props:w.props,dataStartIndex:N,dataEndIndex:P,updateId:k},w.state)));else if(j.activeTooltipIndex!==void 0){var R=j.chartX,A=j.chartY,C=j.activeTooltipIndex,M=w.state,T=M.offset,D=M.tooltipTicks;if(!T)return;if(typeof O=="function")C=O(D,j);else if(O==="value"){C=-1;for(var I=0;I<D.length;I++)if(D[I].value===j.activeLabel){C=I;break}}var L=ae(ae({},T),{},{x:T.left,y:T.top}),B=Math.min(R,L.x+L.width),U=Math.min(A,L.y+L.height),F=D[C]&&D[C].value,H=pE(w.state,w.props.data,C),J=D[C]?{x:S==="horizontal"?D[C].coordinate:B,y:S==="horizontal"?U:D[C].coordinate}:U8;w.setState(ae(ae({},j),{},{activeLabel:F,activeCoordinate:J,activePayload:H,activeTooltipIndex:C}))}else w.setState(j)}),Re(w,"renderCursor",function(j){var E,S=w.state,O=S.isTooltipActive,k=S.activeCoordinate,N=S.activePayload,P=S.offset,R=S.activeTooltipIndex,A=S.tooltipAxisBandSize,C=w.getTooltipEventType(),M=(E=j.props.active)!==null&&E!==void 0?E:O,T=w.props.layout,D=j.key||"_recharts-cursor";return V.createElement(Ibe,{key:D,activeCoordinate:k,activePayload:N,activeTooltipIndex:R,chartName:t,element:j,isActive:M,layout:T,offset:P,tooltipAxisBandSize:A,tooltipEventType:C})}),Re(w,"renderPolarAxis",function(j,E,S){var O=Yn(j,"type.axisType"),k=Yn(w.state,"".concat(O,"Map")),N=j.type.defaultProps,P=N!==void 0?ae(ae({},N),j.props):j.props,R=k&&k[P["".concat(O,"Id")]];return g.cloneElement(j,ae(ae({},R),{},{className:lt(O,R.className),key:j.key||"".concat(E,"-").concat(S),ticks:Do(R,!0)}))}),Re(w,"renderPolarGrid",function(j){var E=j.props,S=E.radialLines,O=E.polarAngles,k=E.polarRadius,N=w.state,P=N.radiusAxisMap,R=N.angleAxisMap,A=oa(P),C=oa(R),M=C.cx,T=C.cy,D=C.innerRadius,I=C.outerRadius;return g.cloneElement(j,{polarAngles:Array.isArray(O)?O:Do(C,!0).map(function(L){return L.coordinate}),polarRadius:Array.isArray(k)?k:Do(A,!0).map(function(L){return L.coordinate}),cx:M,cy:T,innerRadius:D,outerRadius:I,key:j.key||"polar-grid",radialLines:S})}),Re(w,"renderLegend",function(){var j=w.state.formattedGraphicalItems,E=w.props,S=E.children,O=E.width,k=E.height,N=w.props.margin||{},P=O-(N.left||0)-(N.right||0),R=KB({children:S,formattedGraphicalItems:j,legendWidth:P,legendContent:c});if(!R)return null;var A=R.item,C=F8(R,Dbe);return g.cloneElement(A,ae(ae({},C),{},{chartWidth:O,chartHeight:k,margin:N,onBBoxUpdate:w.handleLegendBBoxUpdate}))}),Re(w,"renderTooltip",function(){var j,E=w.props,S=E.children,O=E.accessibilityLayer,k=Bn(S,$r);if(!k)return null;var N=w.state,P=N.isTooltipActive,R=N.activeCoordinate,A=N.activePayload,C=N.activeLabel,M=N.offset,T=(j=k.props.active)!==null&&j!==void 0?j:P;return g.cloneElement(k,{viewBox:ae(ae({},M),{},{x:M.left,y:M.top}),active:T,label:C,payload:T?A:[],coordinate:R,accessibilityLayer:O})}),Re(w,"renderBrush",function(j){var E=w.props,S=E.margin,O=E.data,k=w.state,N=k.offset,P=k.dataStartIndex,R=k.dataEndIndex,A=k.updateId;return g.cloneElement(j,{key:j.key||"_recharts-brush",onChange:nh(w.handleBrushChange,j.props.onChange),data:O,x:me(j.props.x)?j.props.x:N.left,y:me(j.props.y)?j.props.y:N.top+N.height+N.brushBottom-(S.bottom||0),width:me(j.props.width)?j.props.width:N.width,startIndex:P,endIndex:R,updateId:"brush-".concat(A)})}),Re(w,"renderReferenceElement",function(j,E,S){if(!j)return null;var O=w,k=O.clipPathId,N=w.state,P=N.xAxisMap,R=N.yAxisMap,A=N.offset,C=j.type.defaultProps||{},M=j.props,T=M.xAxisId,D=T===void 0?C.xAxisId:T,I=M.yAxisId,L=I===void 0?C.yAxisId:I;return g.cloneElement(j,{key:j.key||"".concat(E,"-").concat(S),xAxis:P[D],yAxis:R[L],viewBox:{x:A.left,y:A.top,width:A.width,height:A.height},clipPathId:k})}),Re(w,"renderActivePoints",function(j){var E=j.item,S=j.activePoint,O=j.basePoint,k=j.childIndex,N=j.isRange,P=[],R=E.props.key,A=E.item.type.defaultProps!==void 0?ae(ae({},E.item.type.defaultProps),E.item.props):E.item.props,C=A.activeDot,M=A.dataKey,T=ae(ae({index:k,dataKey:M,cx:S.x,cy:S.y,r:4,fill:J_(E.item),strokeWidth:2,stroke:"#fff",payload:S.payload,value:S.value},ot(C,!1)),dp(C));return P.push(v.renderActiveDot(C,T,"".concat(R,"-activePoint-").concat(k))),O?P.push(v.renderActiveDot(C,ae(ae({},T),{},{cx:O.x,cy:O.y}),"".concat(R,"-basePoint-").concat(k))):N&&P.push(null),P}),Re(w,"renderGraphicChild",function(j,E,S){var O=w.filterFormatItem(j,E,S);if(!O)return null;var k=w.getTooltipEventType(),N=w.state,P=N.isTooltipActive,R=N.tooltipAxis,A=N.activeTooltipIndex,C=N.activeLabel,M=w.props.children,T=Bn(M,$r),D=O.props,I=D.points,L=D.isRange,B=D.baseLine,U=O.item.type.defaultProps!==void 0?ae(ae({},O.item.type.defaultProps),O.item.props):O.item.props,F=U.activeDot,H=U.hide,J=U.activeBar,q=U.activeShape,re=!!(!H&&P&&T&&(F||J||q)),Z={};k!=="axis"&&T&&T.props.trigger==="click"?Z={onClick:nh(w.handleItemMouseEnter,j.props.onClick)}:k!=="axis"&&(Z={onMouseLeave:nh(w.handleItemMouseLeave,j.props.onMouseLeave),onMouseEnter:nh(w.handleItemMouseEnter,j.props.onMouseEnter)});var Y=g.cloneElement(j,ae(ae({},O.props),Z));function W(He){return typeof R.dataKey=="function"?R.dataKey(He.payload):null}if(re)if(A>=0){var G,te;if(R.dataKey&&!R.allowDuplicatedCategory){var $=typeof R.dataKey=="function"?W:"payload.".concat(R.dataKey.toString());G=Iw(I,$,C),te=L&&B&&Iw(B,$,C)}else G=I==null?void 0:I[A],te=L&&B&&B[A];if(q||J){var se=j.props.activeIndex!==void 0?j.props.activeIndex:A;return[g.cloneElement(j,ae(ae(ae({},O.props),Z),{},{activeIndex:se})),null,null]}if(!at(G))return[Y].concat(Ys(w.renderActivePoints({item:O,activePoint:G,basePoint:te,childIndex:A,isRange:L})))}else{var le,ve=(le=w.getItemByXY(w.state.activeCoordinate))!==null&&le!==void 0?le:{graphicalItem:Y},Te=ve.graphicalItem,qe=Te.item,Ye=qe===void 0?j:qe,ze=Te.childIndex,st=ae(ae(ae({},O.props),Z),{},{activeIndex:ze});return[g.cloneElement(Ye,st),null,null]}return L?[Y,null,null]:[Y,null]}),Re(w,"renderCustomized",function(j,E,S){return g.cloneElement(j,ae(ae({key:"recharts-customized-".concat(S)},w.props),w.state))}),Re(w,"renderMap",{CartesianGrid:{handler:Lh,once:!0},ReferenceArea:{handler:w.renderReferenceElement},ReferenceLine:{handler:Lh},ReferenceDot:{handler:w.renderReferenceElement},XAxis:{handler:Lh},YAxis:{handler:Lh},Brush:{handler:w.renderBrush,once:!0},Bar:{handler:w.renderGraphicChild},Line:{handler:w.renderGraphicChild},Area:{handler:w.renderGraphicChild},Radar:{handler:w.renderGraphicChild},RadialBar:{handler:w.renderGraphicChild},Scatter:{handler:w.renderGraphicChild},Pie:{handler:w.renderGraphicChild},Funnel:{handler:w.renderGraphicChild},Tooltip:{handler:w.renderCursor,once:!0},PolarGrid:{handler:w.renderPolarGrid,once:!0},PolarAngleAxis:{handler:w.renderPolarAxis},PolarRadiusAxis:{handler:w.renderPolarAxis},Customized:{handler:w.renderCustomized}}),w.clipPathId="".concat((x=b.id)!==null&&x!==void 0?x:up("recharts"),"-clip"),w.throttleTriggeredAfterMouseMove=Qh(w.triggeredAfterMouseMove,(_=b.throttleDelay)!==null&&_!==void 0?_:1e3/60),w.state={},w}return Kbe(v,m),Hbe(v,[{key:"componentDidMount",value:function(){var b,x;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(b=this.props.margin.left)!==null&&b!==void 0?b:0,top:(x=this.props.margin.top)!==null&&x!==void 0?x:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var b=this.props,x=b.children,_=b.data,w=b.height,j=b.layout,E=Bn(x,$r);if(E){var S=E.props.defaultIndex;if(!(typeof S!="number"||S<0||S>this.state.tooltipTicks.length-1)){var O=this.state.tooltipTicks[S]&&this.state.tooltipTicks[S].value,k=pE(this.state,_,S,O),N=this.state.tooltipTicks[S].coordinate,P=(this.state.offset.top+w)/2,R=j==="horizontal",A=R?{x:N,y:P}:{y:N,x:P},C=this.state.formattedGraphicalItems.find(function(T){var D=T.item;return D.type.name==="Scatter"});C&&(A=ae(ae({},A),C.props.points[S].tooltipPosition),k=C.props.points[S].tooltipPayload);var M={activeTooltipIndex:S,isTooltipActive:!0,activeLabel:O,activePayload:k,activeCoordinate:A};this.setState(M),this.renderCursor(E),this.accessibilityManager.setIndex(S)}}}},{key:"getSnapshotBeforeUpdate",value:function(b,x){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==x.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==b.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==b.margin){var _,w;this.accessibilityManager.setDetails({offset:{left:(_=this.props.margin.left)!==null&&_!==void 0?_:0,top:(w=this.props.margin.top)!==null&&w!==void 0?w:0}})}return null}},{key:"componentDidUpdate",value:function(b){zw([Bn(b.children,$r)],[Bn(this.props.children,$r)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var b=Bn(this.props.children,$r);if(b&&typeof b.props.shared=="boolean"){var x=b.props.shared?"axis":"item";return i.indexOf(x)>=0?x:o}return o}},{key:"getMouseInfo",value:function(b){if(!this.container)return null;var x=this.container,_=x.getBoundingClientRect(),w=sue(_),j={chartX:Math.round(b.pageX-w.left),chartY:Math.round(b.pageY-w.top)},E=_.width/x.offsetWidth||1,S=this.inRange(j.chartX,j.chartY,E);if(!S)return null;var O=this.state,k=O.xAxisMap,N=O.yAxisMap,P=this.getTooltipEventType();if(P!=="axis"&&k&&N){var R=oa(k).scale,A=oa(N).scale,C=R&&R.invert?R.invert(j.chartX):null,M=A&&A.invert?A.invert(j.chartY):null;return ae(ae({},j),{},{xValue:C,yValue:M})}var T=W8(this.state,this.props.data,this.props.layout,S);return T?ae(ae({},j),T):null}},{key:"inRange",value:function(b,x){var _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,w=this.props.layout,j=b/_,E=x/_;if(w==="horizontal"||w==="vertical"){var S=this.state.offset,O=j>=S.left&&j<=S.left+S.width&&E>=S.top&&E<=S.top+S.height;return O?{x:j,y:E}:null}var k=this.state,N=k.angleAxisMap,P=k.radiusAxisMap;if(N&&P){var R=oa(N);return u6({x:j,y:E},R)}return null}},{key:"parseEventsOfWrapper",value:function(){var b=this.props.children,x=this.getTooltipEventType(),_=Bn(b,$r),w={};_&&x==="axis"&&(_.props.trigger==="click"?w={onClick:this.handleClick}:w={onMouseEnter:this.handleMouseEnter,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd});var j=dp(this.props,this.handleOuterEvent);return ae(ae({},j),w)}},{key:"addListener",value:function(){cE.on(lE,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){cE.removeListener(lE,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(b,x,_){for(var w=this.state.formattedGraphicalItems,j=0,E=w.length;j<E;j++){var S=w[j];if(S.item===b||S.props.key===b.key||x===Co(S.item.type)&&_===S.childIndex)return S}return null}},{key:"renderClipPath",value:function(){var b=this.clipPathId,x=this.state.offset,_=x.left,w=x.top,j=x.height,E=x.width;return V.createElement("defs",null,V.createElement("clipPath",{id:b},V.createElement("rect",{x:_,y:w,height:j,width:E})))}},{key:"getXScales",value:function(){var b=this.state.xAxisMap;return b?Object.entries(b).reduce(function(x,_){var w=L8(_,2),j=w[0],E=w[1];return ae(ae({},x),{},Re({},j,E.scale))},{}):null}},{key:"getYScales",value:function(){var b=this.state.yAxisMap;return b?Object.entries(b).reduce(function(x,_){var w=L8(_,2),j=w[0],E=w[1];return ae(ae({},x),{},Re({},j,E.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(b){var x;return(x=this.state.xAxisMap)===null||x===void 0||(x=x[b])===null||x===void 0?void 0:x.scale}},{key:"getYScaleByAxisId",value:function(b){var x;return(x=this.state.yAxisMap)===null||x===void 0||(x=x[b])===null||x===void 0?void 0:x.scale}},{key:"getItemByXY",value:function(b){var x=this.state,_=x.formattedGraphicalItems,w=x.activeItem;if(_&&_.length)for(var j=0,E=_.length;j<E;j++){var S=_[j],O=S.props,k=S.item,N=k.type.defaultProps!==void 0?ae(ae({},k.type.defaultProps),k.props):k.props,P=Co(k.type);if(P==="Bar"){var R=(O.data||[]).find(function(T){return zye(b,T)});if(R)return{graphicalItem:S,payload:R}}else if(P==="RadialBar"){var A=(O.data||[]).find(function(T){return u6(b,T)});if(A)return{graphicalItem:S,payload:A}}else if(mh(S,w)||yh(S,w)||wu(S,w)){var C=Mge({graphicalItem:S,activeTooltipItem:w,itemData:N.data}),M=N.activeIndex===void 0?C:N.activeIndex;return{graphicalItem:ae(ae({},S),{},{childIndex:M}),payload:wu(S,w)?N.data[C]:S.props.data[C]}}}return null}},{key:"render",value:function(){var b=this;if(!d4(this))return null;var x=this.props,_=x.children,w=x.className,j=x.width,E=x.height,S=x.style,O=x.compact,k=x.title,N=x.desc,P=F8(x,Lbe),R=ot(P,!1);if(O)return V.createElement(Z$,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},V.createElement(Uw,qs({},R,{width:j,height:E,title:k,desc:N}),this.renderClipPath(),p4(_,this.renderMap)));if(this.props.accessibilityLayer){var A,C;R.tabIndex=(A=this.props.tabIndex)!==null&&A!==void 0?A:0,R.role=(C=this.props.role)!==null&&C!==void 0?C:"application",R.onKeyDown=function(T){b.accessibilityManager.keyboardEvent(T)},R.onFocus=function(){b.accessibilityManager.focus()}}var M=this.parseEventsOfWrapper();return V.createElement(Z$,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},V.createElement("div",qs({className:lt("recharts-wrapper",w),style:ae({position:"relative",cursor:"default",width:j,height:E},S)},M,{ref:function(T){b.container=T}}),V.createElement(Uw,qs({},R,{width:j,height:E,title:k,desc:N,style:exe}),this.renderClipPath(),p4(_,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(g.Component);Re(p,"displayName",t),Re(p,"defaultProps",ae({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},u)),Re(p,"getDerivedStateFromProps",function(m,v){var b=m.dataKey,x=m.data,_=m.children,w=m.width,j=m.height,E=m.layout,S=m.stackOffset,O=m.margin,k=v.dataStartIndex,N=v.dataEndIndex;if(v.updateId===void 0){var P=q8(m);return ae(ae(ae({},P),{},{updateId:0},f(ae(ae({props:m},P),{},{updateId:0}),v)),{},{prevDataKey:b,prevData:x,prevWidth:w,prevHeight:j,prevLayout:E,prevStackOffset:S,prevMargin:O,prevChildren:_})}if(b!==v.prevDataKey||x!==v.prevData||w!==v.prevWidth||j!==v.prevHeight||E!==v.prevLayout||S!==v.prevStackOffset||!hs(O,v.prevMargin)){var R=q8(m),A={chartX:v.chartX,chartY:v.chartY,isTooltipActive:v.isTooltipActive},C=ae(ae({},W8(v,x,E)),{},{updateId:v.updateId+1}),M=ae(ae(ae({},R),A),C);return ae(ae(ae({},M),f(ae({props:m},M),v)),{},{prevDataKey:b,prevData:x,prevWidth:w,prevHeight:j,prevLayout:E,prevStackOffset:S,prevMargin:O,prevChildren:_})}if(!zw(_,v.prevChildren)){var T,D,I,L,B=Bn(_,Rs),U=B&&(T=(D=B.props)===null||D===void 0?void 0:D.startIndex)!==null&&T!==void 0?T:k,F=B&&(I=(L=B.props)===null||L===void 0?void 0:L.endIndex)!==null&&I!==void 0?I:N,H=U!==k||F!==N,J=!at(x),q=J&&!H?v.updateId:v.updateId+1;return ae(ae({updateId:q},f(ae(ae({props:m},v),{},{updateId:q,dataStartIndex:U,dataEndIndex:F}),v)),{},{prevChildren:_,dataStartIndex:U,dataEndIndex:F})}return null}),Re(p,"renderActiveDot",function(m,v,b){var x;return g.isValidElement(m)?x=g.cloneElement(m,v):We(m)?x=m(v):x=V.createElement(a$,v),V.createElement(Wt,{className:"recharts-active-dot",key:b},x)});var y=g.forwardRef(function(m,v){return V.createElement(p,qs({},m,{ref:v}))});return y.displayName=p.displayName,y},dxe=uxe({chartName:"BarChart",GraphicalChild:ni,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:Th},{axisType:"yAxis",AxisComp:aE}],formatAxisMap:Eve});const fxe={light:"",dark:".dark"},K8=g.createContext(null);function X8(){const e=g.useContext(K8);if(!e)throw new Error("useChart must be used within a <ChartContainer />");return e}const Q8=g.forwardRef(({id:e,className:t,children:n,config:r,...o},a)=>{const i=g.useId(),s=`chart-${e||i.replace(/:/g,"")}`;return h.jsx(K8.Provider,{value:{config:r},children:h.jsxs("div",{"data-chart":s,ref:a,className:K("flex aspect-video justify-center text-xs",t),...o,children:[h.jsx(pxe,{id:s,config:r}),h.jsx(eue,{children:n})]})})});Q8.displayName="Chart";const pxe=({id:e,config:t})=>{const n=Object.entries(t).filter(([r,o])=>o.theme||o.color);return n.length?h.jsx("style",{dangerouslySetInnerHTML:{__html:Object.entries(fxe).map(([r,o])=>`
${o} [data-chart=${e}] {
${n.map(([a,i])=>{var c;const s=((c=i.theme)==null?void 0:c[r])||i.color;return s?`  --color-${a}: ${s};`:null}).join(`
`)}
}
`).join(`
`)}}):null},hxe=$r,J8=g.forwardRef(({active:e,payload:t,className:n,indicator:r="dot",hideLabel:o=!1,hideIndicator:a=!1,label:i,labelFormatter:s,labelClassName:c,formatter:l,color:u,nameKey:d,labelKey:f},p)=>{const{config:y}=X8(),m=g.useMemo(()=>{var j;if(o||!(t!=null&&t.length))return null;const[b]=t,x=`${f||b.dataKey||b.name||"value"}`,_=hE(y,b,x),w=!f&&typeof i=="string"?((j=y[i])==null?void 0:j.label)||i:_==null?void 0:_.label;return s?h.jsx("div",{className:K("font-medium",c),children:s(w,t)}):w?h.jsx("div",{className:K("font-medium",c),children:w}):null},[i,s,t,o,c,y,f]);if(!e||!(t!=null&&t.length))return null;const v=t.length===1&&r!=="dot";return h.jsxs("div",{ref:p,className:K("grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl",n),children:[v?null:m,h.jsx("div",{className:"grid gap-1.5",children:t.map((b,x)=>{const _=`${d||b.name||b.dataKey||"value"}`,w=hE(y,b,_),j=u||b.payload.fill||b.color;return h.jsx("div",{className:K("flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground",r==="dot"&&"items-center"),children:l&&(b==null?void 0:b.value)!==void 0&&b.name?l(b.value,b.name,b,x,b.payload):h.jsxs(h.Fragment,{children:[w!=null&&w.icon?h.jsx(w.icon,{}):!a&&h.jsx("div",{className:K("shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]",{"h-2.5 w-2.5":r==="dot","w-1":r==="line","w-0 border-[1.5px] border-dashed bg-transparent":r==="dashed","my-0.5":v&&r==="dashed"}),style:{"--color-bg":j,"--color-border":j}}),h.jsxs("div",{className:K("flex flex-1 justify-between leading-none",v?"items-end":"items-center"),children:[h.jsxs("div",{className:"grid gap-1.5",children:[v?m:null,h.jsx("span",{className:"text-muted-foreground",children:(w==null?void 0:w.label)||b.name})]}),b.value&&h.jsx("span",{className:"font-mono font-medium tabular-nums text-foreground",children:b.value.toLocaleString()})]})]})},b.dataKey)})})]})});J8.displayName="ChartTooltip";const mxe=g.forwardRef(({className:e,hideIcon:t=!1,payload:n,verticalAlign:r="bottom",nameKey:o},a)=>{const{config:i}=X8();return n!=null&&n.length?h.jsx("div",{ref:a,className:K("flex items-center justify-center gap-4",r==="top"?"pb-3":"pt-3",e),children:n.map(s=>{const c=`${o||s.dataKey||"value"}`,l=hE(i,s,c);return h.jsxs("div",{className:K("flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground"),children:[l!=null&&l.icon&&!t?h.jsx(l.icon,{}):h.jsx("div",{className:"h-2 w-2 shrink-0 rounded-[2px]",style:{backgroundColor:s.color}}),l==null?void 0:l.label]},s.value)})}):null});mxe.displayName="ChartLegend";function hE(e,t,n){if(typeof t!="object"||t===null)return;const r="payload"in t&&typeof t.payload=="object"&&t.payload!==null?t.payload:void 0;let o=n;return n in t&&typeof t[n]=="string"?o=t[n]:r&&n in r&&typeof r[n]=="string"&&(o=r[n]),o in e?e[o]:e[n]}const G8=e=>{const t=["Bytes","KB","MB","GB","TB"];if(e===void 0)return"Unknown size";if(e===0)return"0 Byte";const n=Math.floor(Math.log(e)/Math.log(1024));return`${Math.round(e/Math.pow(1024,n))} ${t[n]}`},yxe=g.memo(()=>{const{t:e}=Me("flows"),[t,n]=g.useState(),r=sn(y=>y.cachedLLMURLs),o=Ze(y=>y.currentSession),[a,i]=g.useState(),[s,c]=g.useState(""),[l,u]=g.useState(),d=g.useMemo(()=>({nodes:{label:e("session_info_node.entities.nodes"),color:"#2563eb"},edges:{label:e("session_info_node.entities.edges"),color:"#34d399"},threads:{label:e("session_info_node.entities.threads"),color:"#fbbf24"},llms:{label:e("session_info_node.entities.llms"),color:"#f87171"},prompts:{label:e("session_info_node.entities.prompts"),color:"#a78bfa"},tools:{label:e("session_info_node.entities.tools"),color:"#ffcccb"},schemas:{label:e("session_info_node.entities.schemas"),color:"#ffb6c1"},vectorDatabases:{label:e("session_info_node.entities.vector_databases"),color:"#ff69b4"},jsonlDatas:{label:e("session_info_node.entities.jsonl_data"),color:"#ff1493"},csvDatas:{label:e("session_info_node.entities.csv_data"),color:"#db7093"}}),[e]);g.useEffect(()=>{Nt(async()=>{const{functionCallingModelIds:y,prebuiltAppConfig:m}=await import("./index-CCJ1qLS7.js").then(async v=>(await v.__tla,v));return{functionCallingModelIds:y,prebuiltAppConfig:m}},__vite__mapDeps([7,1,2,3,4,5,6])).then(({functionCallingModelIds:y,prebuiltAppConfig:m})=>{n(r==null?void 0:r.map(v=>{const b=m.model_list.find(x=>v.includes(x.model));if(b)return{model_id:(b==null?void 0:b.model_id)||"",info:b,isFunctionCalling:y.includes((b==null?void 0:b.model_id)||"")}}))})},[r,o==null?void 0:o.id]);const f=g.useCallback(async()=>{navigator.storage.estimate().then(y=>{y&&c(e("session_info_node.used_bytes",{used:G8(y.usage),total:G8(y==null?void 0:y.quota)}))}),o!=null&&o.id&&(Promise.all([ce("FlowNode").findOne({where:{session_id:o==null?void 0:o.id},order:{updated_at:"DESC"}}),ce("FlowEdge").findOne({where:{session_id:o==null?void 0:o.id},order:{updated_at:"DESC"}}),ce("Thread").findOne({where:{session_id:o==null?void 0:o.id},order:{updated_at:"DESC"}}),ce("Prompt").findOne({where:{session_id:o==null?void 0:o.id},order:{updated_at:"DESC"}}),ce("LLM").findOne({where:{session_id:o==null?void 0:o.id},order:{updated_at:"DESC"}}),ce("Schema").findOne({where:{session_id:o==null?void 0:o.id},order:{updated_at:"DESC"}}),ce("ToolDefinition").findOne({where:{session_id:o==null?void 0:o.id},order:{updated_at:"DESC"}}),ce("VectorDatabase").findOne({where:{session_id:o==null?void 0:o.id},order:{updated_at:"DESC"}}),ce("JSONLData").findOne({where:{session_id:o==null?void 0:o.id},order:{updated_at:"DESC"}}),ce("CSVData").findOne({where:{session_id:o==null?void 0:o.id},order:{updated_at:"DESC"}})]).then(y=>{const m=y.reduce((v,b)=>b!=null&&b.updated_at&&(!v||new Date(b.updated_at)>v)?new Date(b.updated_at):v,o.updated_at?new Date(o.updated_at):void 0);i(m)}),Promise.all([ce("FlowNode").count({where:{session_id:o==null?void 0:o.id}}),ce("FlowEdge").count({where:{session_id:o==null?void 0:o.id}}),ce("Thread").count({where:{session_id:o==null?void 0:o.id}}),ce("Prompt").count({where:{session_id:o==null?void 0:o.id}}),ce("LLM").count({where:{session_id:o==null?void 0:o.id}}),ce("ToolDefinition").count({where:{session_id:o==null?void 0:o.id}}),ce("Schema").count({where:{session_id:o==null?void 0:o.id}}),ce("VectorDatabase").count({where:{session_id:o==null?void 0:o.id}}),ce("JSONLData").count({where:{session_id:o==null?void 0:o.id}}),ce("CSVData").count({where:{session_id:o==null?void 0:o.id}})]).then(([y,m,v,b,x,_,w,j,E,S])=>{u([{name:e("session_info_node.count_info.title"),nodes:y||0,edges:m||0,threads:v||0,prompts:b||0,llms:x||0,tools:_||0,schemas:w||0,vectorDatabases:j||0,jsonlDatas:E||0,csvDatas:S||0}])}))},[o==null?void 0:o.id,o==null?void 0:o.updated_at,e]),p=g.useCallback(()=>{f()},[f]);return g.useEffect(()=>{f()},[f]),h.jsxs(Tt,{className:"w-96",children:[h.jsxs(hn,{children:[h.jsx(jn,{children:e("session_info_node.title")}),h.jsx(RI,{children:a||o!=null&&o.updated_at?zwe(a||(o==null?void 0:o.updated_at)).fromNow():""})]}),h.jsxs(mn,{className:"grid gap-4",children:[h.jsx("div",{className:"flex items-center space-x-4 rounded-md border p-4",children:h.jsxs("div",{className:"flex-1 space-y-1",children:[h.jsx("p",{className:"text-sm font-medium leading-none",children:e("session_info_node.disk_size")}),h.jsx("p",{className:"text-sm text-muted-foreground",children:s})]})}),h.jsx("div",{className:"flex items-center space-x-4 rounded-md border p-4",children:h.jsxs("div",{className:"flex-1 space-y-1",children:[h.jsxs("div",{className:"text-sm font-medium leading-none",children:[e("session_info_node.cached_llms"),h.jsx(tn,{className:"ml-2",children:(t==null?void 0:t.length)||0})]}),t==null?void 0:t.map(y=>h.jsxs("div",{className:"text-sm text-muted-foreground gap-1",children:[y==null?void 0:y.model_id,h.jsx("div",{className:"max-w-full gap-1 flex flex-wrap mt-1",children:h.jsx(El,{model:y==null?void 0:y.info,isFunctionCalling:(y==null?void 0:y.isFunctionCalling)||!1,isCached:!0})})]},y==null?void 0:y.model_id))]})}),h.jsx("div",{children:h.jsx(Q8,{config:d,className:"min-h-28 w-full",children:h.jsxs(dxe,{accessibilityLayer:!0,data:l,children:[h.jsx(E8,{vertical:!1}),h.jsx(Th,{dataKey:"name",tickLine:!1,tickMargin:10,axisLine:!1}),h.jsx(hxe,{content:h.jsx(J8,{})}),Object.entries(d).map(([y,m])=>h.jsx(ni,{dataKey:y,fill:m.color,radius:4},y))]})})})]}),h.jsx(Zo,{children:h.jsxs(dt,{className:"w-full",onClick:p,children:[h.jsx(ue,{size:24,name:"refresh-ccw"}),e("session_info_node.reload")]})})]})}),gxe=e=>{const t=g.useCallback(async({edgeId:n})=>{try{return{deleteEdgeId:n}}catch{return{deleteEdgeId:n}}},[]);cn(e,t)},vxe=g.memo(e=>{var c,l;const{t}=Me("flows"),{id:n,data:r,isConnectable:o}=e,a=g.useRef(!1),i=ln(n),s=Ae(u=>u.updateNodes);return gxe(n),g.useEffect(()=>{var d;const u=r==null?void 0:r.entity;!u||!i||a.current||(d=u==null?void 0:u.schema_items)!=null&&d.length||r.loaded||(a.current=!0,ce("SchemaItem").find({where:{schema_id:u.id}}).then(f=>{s([{id:i.id,type:"replace",item:{...i,data:{...(i==null?void 0:i.data)||{},loaded:!0,entity:{...r.entity,schema_items:f}}}}])}).finally(()=>{a.current=!1}))},[r.entity,r.loaded,i,s]),h.jsxs("div",{children:[h.jsxs("div",{children:[h.jsx(nn,{id:n}),h.jsxs(Rx,{defaultValue:"account",className:"w-[400px]",children:[h.jsxs(qf,{className:"grid w-full grid-cols-2",children:[h.jsx(gr,{value:"account",children:t("schema_node.typescript")}),h.jsx(gr,{value:"password",children:t("schema_node.zod")})]}),h.jsx(vr,{value:"account",children:h.jsx(Tt,{className:"p-4",children:h.jsx("pre",{className:"overflow-hidden break-words whitespace-pre-wrap",children:TI(((c=r==null?void 0:r.entity)==null?void 0:c.schema_items)||[])})})}),h.jsx(vr,{value:"password",children:h.jsx(Tt,{className:"p-4 max-w-full",children:h.jsx("pre",{className:"overflow-hidden break-words whitespace-pre-wrap",children:kx(((l=r==null?void 0:r.entity)==null?void 0:l.schema_items)||[])})})})]})]}),h.jsx(Ge,{type:"source",position:fe.Bottom,id:"a",isConnectable:o})]})}),bxe=g.memo(e=>{var a,i;const{id:t,data:n,isConnectable:r}=e,o=g.useMemo(()=>{if(!(n!=null&&n.entity))return{headers:[],rows:[]};const s=qh(n.entity.csv);return{headers:NE(n.entity.headers),rows:s.map(c=>NE(c))}},[n==null?void 0:n.entity]);return h.jsxs("div",{children:[h.jsx(Ge,{type:"target",position:fe.Top,isConnectable:r}),h.jsxs("div",{children:[h.jsx(nn,{id:t}),h.jsxs(Tt,{className:"min-w-32 min-h-16 p-4",children:[h.jsx(hn,{className:"!p-0",children:h.jsxs("div",{className:"pt-2 flex !flex-row",children:[h.jsx(ue,{name:"file-spreadsheet",className:"mr-2"}),h.jsxs(Qe,{className:"!font-medium leading-none tracking-tight pr-8",children:[oe.CSVData," ",(a=o==null?void 0:o.rows)!=null&&a.length?`(${((i=o==null?void 0:o.rows)==null?void 0:i.length)||0})`:""]})]})}),h.jsx(mn,{className:"pb-0",children:h.jsx(op,{data:o.rows,headers:o.headers})})]})]}),h.jsx(Ge,{type:"source",position:fe.Bottom,id:"a",isConnectable:r})]})}),xxe=e=>{const t=Ae(r=>r.createOrUpdateFlowEdge),n=g.useCallback(async({edgeId:r,source:o,target:a,connection:i})=>{try{if((o==null?void 0:o.type)===oe.Schema&&(a==null?void 0:a.type)===oe.ToolDefinition){await t({source:i.source,target:i.target,sourceHandle:i.sourceHandle,targetHandle:i.targetHandle});return}return{deleteEdgeId:r}}catch{return{deleteEdgeId:r}}},[t]);cn(e,n)},wxe=g.memo(({id:e,data:t,isConnectable:n})=>{var r,o;return xxe(e),h.jsxs("div",{children:[h.jsx(Ge,{type:"target",position:fe.Top,isConnectable:n}),h.jsx("div",{children:h.jsxs(Eo,{className:"flex justify-center",children:[h.jsx(ue,{size:24,name:"wrench"}),h.jsxs("div",{className:"ml-2",children:[h.jsx(So,{children:`${((r=t.entity)==null?void 0:r.name)||""}`}),h.jsx(ds,{children:`${((o=t.entity)==null?void 0:o.description)||""}`})]})]})}),h.jsx(Ge,{type:"source",position:fe.Bottom,id:"a",isConnectable:n})]})}),_xe=e=>{const t=g.useCallback(async({edgeId:n})=>({deleteEdgeId:n}),[]);cn(e,t)},jxe=g.memo(e=>{const{id:t,data:n,isConnectable:r}=e;return _xe(t),h.jsxs("div",{children:[h.jsx(Ge,{type:"target",position:fe.Top,isConnectable:r}),h.jsx("div",{children:h.jsxs(Eo,{className:"flex justify-center max-w-80",variant:"default",children:[h.jsx(bo,{name:n.model||"brain",className:"w-7 h-7"}),h.jsx("div",{className:"ml-2 pr-4 flex items-center",children:h.jsx(So,{children:`${n.model||""}`})})]})}),h.jsx(Ge,{type:"source",position:fe.Bottom,id:"a",isConnectable:r})]})}),Exe=`Use the following pieces of context to answer the question at the end.
If you don't know the answer, just say that you don't know, don't try to make up an answer.
Use three sentences maximum and keep the answer as concise as possible.

{context}
`,Sxe=ma(e=>{const{source:t,documents:n}=e,r=Kt(),{toast:o}=Bt(),{t:a}=Me("dialogs"),{loading:i,createPrompt:s}=k5(),c=async l=>{try{if(!l.content||!l.content.includes("{context}")){o({title:a("create_vector_database_prompt.errors.fill_context"),variant:"destructive"});return}const u=l.content.replace("{context}",n.map(d=>`<document>${d.pageContent}</document>`).join(`
`));return await s(t,{...l,content:u}),r.hide(),!0}catch{o({title:a("create_vector_database_prompt.errors.create_failed"),variant:"destructive"})}};return h.jsx(Ai,{open:r.visible,onOpenChange:r.hide,children:h.jsxs(Ca,{className:"sm:max-w-[425px]",children:[h.jsx(Oa,{children:h.jsxs("div",{className:"flex",children:[h.jsx(ue,{name:"file",className:"mr-2 h-4 w-4"}),h.jsx(Na,{children:a("create_vector_database_prompt.title")})]})}),h.jsxs("div",{className:"flex gap-4 py-4 flex-col",children:[h.jsx(Ew,{onSubmit:c,loading:i,hidePromptType:!0,defaultPromptRole:"system",defaultPromptContent:Exe}),h.jsxs("div",{className:"w-full border-0 text-gray-700 flex text-sm items-center",children:[h.jsx(ue,{name:"info",className:"mr-2",size:14}),a("create_vector_database_prompt.fill_content_note")]})]})]})})}),Cxe=()=>{const e=Ze(i=>{var s;return(s=i.currentSession)==null?void 0:s.id}),[t,n]=g.useState(!1),r=Ae(i=>i.createOrUpdateFlowNode),o=Ae(i=>i.createOrUpdateFlowEdge),a=g.useCallback(async({prompt:i,source:s,metadata:c})=>{var l,u,d,f;try{const p=(l=s==null?void 0:s.data)==null?void 0:l.entity;if(!p||!e)throw new Error("Source or Session not found");n(!0);const y=((u=s.position)==null?void 0:u.x)||0,m=(((d=s.position)==null?void 0:d.y)||0)+(((f=s.measured)==null?void 0:f.height)||0),v=await ce("Prompt").save({...i,status:(i==null?void 0:i.status)||Xr.Started,role:(i==null?void 0:i.role)||kn.System,type:(i==null?void 0:i.type)||Pn.Chat,content:(i==null?void 0:i.content)||"{context}",session_id:e});if(!v)throw new Error("Failed to save prompt");const b=await r({source_id:v.id,source_type:"Prompt",node_type:oe.Prompt,x:y,y:m+20});if(!b)throw new Error("Failed to save prompt node");const x=await ce("FlowNodePlaceholder").save({placeholder:`Retriever for ${p.name}`,placeholder_type:yi.VECTOR_DATABASE_RETREIVER,session_id:e,metadata:c});if(!x)throw new Error("Failed to save node placeholder");const _=await r({source_id:x.id,source_type:"FlowNodePlaceholder",node_type:oe.PlaceHolder,x:y,y:m+40});if(!_)throw new Error("Failed to save node placeholder node");await o({source:b.id,target:_.id}),await o({source:s.id,target:_.id})}finally{n(!1)}},[e,r,o]);return{loading:t,createVectorDatabaseRetriever:a}},Oxe=`Use the following pieces of context to answer the question at the end.
If you don't know the answer, just say that you don't know, don't try to make up an answer.
----------------
{context}
`,Nxe=ma(e=>{const{source:t}=e,n=Kt(),{toast:r}=Bt(),{t:o}=Me("dialogs"),[a,i]=g.useState(1),[s,c]=g.useState(void 0),{loading:l,createVectorDatabaseRetriever:u}=Cxe(),d=async y=>{try{const m=y.content;if(!m||!m.includes("{context}")){r({title:o("create_vector_database_retriever.errors.fill_context"),variant:"destructive"});return}return await u({source:t,prompt:{content:m},metadata:{k:a,minimalScore:s}}),i(1),c(void 0),n.hide(),!0}catch{r({title:o("create_vector_database_retriever.errors.create_failed"),variant:"destructive"})}},f=y=>{i(y.target.value?Number(y.target.value):void 0)},p=y=>{c(y.target.value?Number(y.target.value):void 0)};return h.jsx(Ai,{open:n.visible,onOpenChange:n.hide,children:h.jsxs(Ca,{className:"sm:max-w-[425px]",children:[h.jsx(Oa,{children:h.jsxs("div",{className:"flex",children:[h.jsx(ue,{name:"file",className:"mr-2 h-4 w-4"}),h.jsx(Na,{children:o("create_vector_database_retriever.title")})]})}),h.jsxs("div",{className:"flex gap-4 py-4 flex-col",children:[h.jsx(Ew,{onSubmit:d,loading:l,hidePromptType:!0,defaultPromptRole:"system",defaultPromptContent:Oxe}),h.jsxs(Tt,{children:[h.jsx(hn,{children:h.jsx(jn,{children:o("create_vector_database_retriever.retriever_settings")})}),h.jsxs(mn,{children:[h.jsx(Qe,{children:o("create_vector_database_retriever.retriever_k")}),h.jsx(dn,{value:a||"",type:"number",onChange:f,placeholder:o("create_vector_database_retriever.retriever_k_placeholder")}),h.jsx(Qe,{children:o("create_vector_database_retriever.retriever_minimum_score")}),h.jsx(dn,{value:s||"",type:"number",onChange:p,placeholder:o("create_vector_database_retriever.retriever_minimum_score_placeholder")})]})]}),h.jsxs("div",{className:"w-full border-0 text-gray-700 flex text-sm items-center",children:[h.jsx(ue,{name:"info",className:"mr-2",size:14}),o("create_vector_database_retriever.fill_content_note")]})]})]})})}),Mxe=e=>{const t=Ae(o=>o.createOrUpdateFlowEdge),n=li(o=>o.index),r=g.useCallback(async({edgeId:o,target:a,source:i})=>{var s,c;try{const l=(s=a==null?void 0:a.data)==null?void 0:s.entity;if((i==null?void 0:i.type)===oe.CSVData&&(a==null?void 0:a.type)===oe.VectorDatabase){const u=(c=i==null?void 0:i.data)==null?void 0:c.entity;if(!u||!l)return{deleteEdgeId:o};const{rows:d}=q9(u.headers,u.csv),f=d.map(p=>new $u({pageContent:`${p.text}`}));await n({databaseId:l.id,dataSourceId:u.id,dataSourceType:"CSVData"},f),await t({source:i.id,target:a.id});return}return{deleteEdgeId:o}}catch{return{deleteEdgeId:o}}},[t,n]);cn(e,r)},kxe=e=>{const[t,n]=g.useState(!1),{t:r}=Me("flows"),{toast:o}=Bt(),{getNode:a,getHandleConnections:i}=Fn(),s=Ae(f=>f.updateNodes),c=li(f=>f.index),l=li(f=>f.similaritySearchWithScore),u=g.useCallback(async(f,p)=>{var y,m,v;try{const b=a(e);if(!b)return;const x=(y=b.data)==null?void 0:y.entity;if(!x){o({variant:"destructive",title:r("vector_database_node.errors.vector_database_not_found")});return}if(x.storage===nr.DataNode){const _=(v=(m=i({nodeId:e,type:"target"}).map(w=>a(w.source)).find(w=>(w==null?void 0:w.type)&&[oe.JSONLData,oe.CSVData].includes(w==null?void 0:w.type)))==null?void 0:m.data)==null?void 0:v.entity;if(!_){o({variant:"destructive",title:r("vector_database_node.errors.data_node_not_found")});return}return n(!0),await l({databaseId:x.id,dataSourceId:_.id,dataSourceType:OE(_)},f,p==null?void 0:p.k)}else return n(!0),await l({databaseId:x.id},f,p==null?void 0:p.k)}catch{o({variant:"destructive",title:r("vector_database_node.errors.similarity_search_failed")})}finally{n(!1)}},[i,e,l,o,r,a]),d=g.useCallback(async(f,p)=>{var y,m,v,b;try{const x=a(e);if(!x)return;n(!0);const _=f.content?[new $u({pageContent:f.content,id:f.id,metadata:{id:f.id}})]:f.documents;if(!(_!=null&&_.length)){o({variant:"destructive",title:r("vector_database_node.errors.content_not_found")});return}const w=(y=x.data)==null?void 0:y.entity;if(!w||!x){o({variant:"destructive",title:r("vector_database_node.errors.vector_database_not_found")});return}if(w.storage===nr.DataNode){const j=i({nodeId:e,type:"target"}).map(N=>a(N.source)).find(N=>(N==null?void 0:N.type)&&[oe.JSONLData,oe.CSVData].includes(N==null?void 0:N.type)),E=(m=j==null?void 0:j.data)==null?void 0:m.entity;if(!E){o({variant:"destructive",title:r("vector_database_node.errors.data_node_not_found")});return}const S=OE(E),O=ow(_,10);let k=0;for(const N of O){if((v=p==null?void 0:p.onProgressReport)==null||v.call(p,{handling:N.length,handled:k,total:_.length}),await c({databaseId:w.id,dataSourceId:E.id,dataSourceType:S},N),S&&j){const P=await ce(S).findOne({where:{id:E.id}});s([{type:"replace",id:j.id,item:{...j,data:{...j.data,entity:P}}}])}k+=N.length}}else{const j=ow(_,10);let E=0;for(const S of j){(b=p==null?void 0:p.onProgressReport)==null||b.call(p,{handling:S.length,handled:E,total:_.length}),await c({databaseId:w.id},S);const O=await ce("VectorDatabase").findOne({where:{id:`${w.id}`}});s([{type:"replace",id:x.id,item:{...x,data:{...x.data,entity:O}}}]),E+=S.length}}}catch{o({variant:"destructive",title:r("vector_database_node.errors.similarity_search_failed")})}finally{n(!1)}},[i,e,c,o,r,a,s]);return{loading:t,indexData:d,similaritySearchWithScore:u}},Pxe=g.memo(e=>{var E,S,O,k;const{t}=Me("flows"),[n,r]=g.useState(0),[o,a]=g.useState("search"),i=ln(e.id),{id:s,data:c,isConnectable:l}=e,{loading:u,similaritySearchWithScore:d,indexData:f}=kxe(s),p=Kt(Sxe),y=Kt(Nxe);Mxe(s);const m=g.useCallback(async(...N)=>{i&&await f(...N)},[f,i]),v=g.useCallback(async(N,P)=>{const R=N.trim(),A=await d(R,{k:P});if(A!=null&&A.length)return A},[d]),b=g.useCallback(N=>{p.show({source:i,documents:N.map(([P])=>P)})},[p,i]),x=g.useCallback(async()=>{y.show({source:i})},[y,i]),_=g.useCallback(async N=>{if(N.type.includes("text")||N.type.includes("txt")){const P=new FileReader;P.onload=async R=>{var C;const A=(C=R.target)==null?void 0:C.result;await m({content:A})},P.readAsText(N)}else if(N.type.endsWith("pdf")){const P=new Blob([N],{type:"application/pdf"}),R=await new II(P,{pdfjs:async()=>{const A=await Nt(()=>import("./pdf.min-iEKkduSH.js").then(async C=>(await C.__tla,C)),__vite__mapDeps([9,1,2,3,4,5,6]));return await Nt(()=>import("./pdf.worker.min-D9Yt29vd.js").then(async C=>(await C.__tla,C)),__vite__mapDeps([10,1,2,3,4,5,6])),A.GlobalWorkerOptions.workerSrc=new URL("pdfjs-dist/build/pdf.worker.min.js",import.meta.url).toString(),A},parsedItemSeparator:" "}).load();await m({documents:R},{onProgressReport:A=>{r((A.handled+A.handling)/A.total)}})}},[m]),w=g.useMemo(()=>{var R,A;if(!((R=c==null?void 0:c.entity)!=null&&R.raw))return{headers:[],rows:[]};const N=["content","embedding","metadata"],P=qh((A=c==null?void 0:c.entity)==null?void 0:A.raw);return{headers:N,rows:P.map(C=>{try{return JSON.parse(C)}catch{return[]}})}},[(E=c==null?void 0:c.entity)==null?void 0:E.raw]),j=g.useMemo(()=>{switch(o){case"search":return h.jsx(vr,{value:"search",children:h.jsx(qD,{loading:u,onSimilaritySearch:v,onCreatePrompt:b,onCreateRetriever:x})});case"new":return h.jsx(vr,{className:"min-w-80",value:"new",children:h.jsx(YD,{loading:u,onCreateData:m})});case"file":return h.jsx(vr,{value:"file",children:h.jsx(KD,{loading:u,progress:n,onFileSubmit:_,fileOptions:{accept:".pdf,.txt,.text",maxSize:1}})});case"view":return h.jsx(vr,{value:"view",children:h.jsx(op,{data:w.rows,headers:w.headers,limitLengthByColumns:{embedding:32}})})}},[m,b,x,_,v,u,o,n,w]);return h.jsxs("div",{className:"min-w-72",children:[h.jsx(Ge,{type:"target",position:fe.Top,isConnectable:l}),h.jsxs("div",{className:"max-w-full",children:[h.jsx(nn,{id:s}),h.jsxs(Eo,{className:"flex justify-center",variant:"default",children:[h.jsx(ue,{size:24,name:"database-zap"}),h.jsxs("div",{className:"ml-2 max-w-full",children:[h.jsx(So,{children:`${((S=c.entity)==null?void 0:S.name)||""}`}),h.jsxs(Rx,{value:o,onValueChange:a,defaultValue:"search",className:K("w-full mt-4"),children:[h.jsxs(qf,{className:K("grid w-full grid-cols-3",((O=c.entity)==null?void 0:O.storage)===nr.DatabaseNode?"grid-cols-4":"grid-cols-3"),children:[h.jsx(gr,{value:"search",children:t("vector_database_node.search")}),h.jsx(gr,{value:"new",children:t("vector_database_node.text")}),h.jsx(gr,{value:"file",children:t("vector_database_node.file")}),((k=c.entity)==null?void 0:k.storage)===nr.DatabaseNode?h.jsx(gr,{value:"view",children:t("vector_database_node.view")}):void 0]}),j]})]})]})]}),h.jsx(Ge,{type:"source",position:fe.Bottom,id:"a",isConnectable:l})]})}),Axe={embedding:32},Txe=g.memo(e=>{var a,i,s;const{id:t,data:n,isConnectable:r}=e,o=g.useMemo(()=>{var u;if(!((u=n==null?void 0:n.entity)!=null&&u.jsonl))return{headers:[],rows:[]};const c=NE(n.entity.headers||""),l=qh(n.entity.jsonl);return{headers:c,rows:l.map(d=>{try{return JSON.parse(d)}catch{return[]}})}},[(a=n==null?void 0:n.entity)==null?void 0:a.jsonl,n.entity.headers]);return h.jsxs("div",{className:"min-w-80",children:[h.jsx(Ge,{type:"target",position:fe.Top,isConnectable:r}),h.jsxs("div",{children:[h.jsx(nn,{id:t}),h.jsxs(Tt,{className:"min-w-32 min-h-16 p-4",children:[h.jsx(hn,{className:"!p-0",children:h.jsxs("div",{className:"pt-2 flex !flex-row",children:[h.jsx(ue,{name:"file-json",className:"mr-2"}),h.jsxs(Qe,{className:"!font-medium leading-none tracking-tight pr-8",children:[oe.JSONLData," ",(i=o==null?void 0:o.rows)!=null&&i.length?`(${((s=o==null?void 0:o.rows)==null?void 0:s.length)||0})`:""]})]})}),h.jsx(mn,{className:"pb-0",children:h.jsx(op,{data:o.rows,headers:o.headers,limitLengthByColumns:Axe})})]})]}),h.jsx(Ge,{type:"source",position:fe.Bottom,id:"a",isConnectable:r})]})}),Z8=60,e9=140,Rxe=qr("supports-backdrop-blur:bg-white/10 supports-backdrop-blur:dark:bg-black/10 mx-auto flex h-[58px] w-max gap-2 rounded-lg border p-2 backdrop-blur-md"),t9=V.forwardRef(({className:e,children:t,magnification:n=Z8,distance:r=e9,direction:o="bottom",...a},i)=>{const s=Xm(1/0),c=()=>V.Children.map(t,l=>V.isValidElement(l)&&l.type===Mu?V.cloneElement(l,{...l.props,mouseX:s,magnification:n,distance:r}):l);return h.jsx(Iu.div,{ref:i,onMouseMove:l=>s.set(l.pageX),onMouseLeave:()=>s.set(1/0),...a,className:K(Rxe({className:e}),{"items-start":o==="top","items-center":o==="middle","items-end":o==="bottom"}),children:c()})});t9.displayName="Dock";const Mu=({magnification:e=Z8,distance:t=e9,mouseX:n,className:r,children:o,...a})=>{const i=g.useRef(null),s=OS(n||new Vwe,u=>{var f;const d=((f=i.current)==null?void 0:f.getBoundingClientRect())??{x:0,width:0};return u-d.x-d.width/2}),c=OS(s,[-t,0,t],[40,e,40]),l=pz(c,{mass:.1,stiffness:150,damping:12});return h.jsx(Iu.div,{ref:i,style:{width:l},className:K("flex aspect-square cursor-pointer items-center justify-center rounded-full",r),...a,children:o})};Mu.displayName="DockIcon";let n9,r9,Bh,o9,ku,a9,i9,s9,c9,l9,u9,d9,f9,p9,h9,m9,y9,g9,v9,b9,x9,w9,_9,j9,E9,S9;n9={[oe.Shape]:{width:100,height:100},[oe.CircleShape]:{width:100,height:100},[oe.TriangleShape]:{width:100,height:100},[oe.EditorApp]:{width:1240,height:400}},r9=e=>{const t=ln(e),n=Ze(s=>s.currentSession),[r,o]=g.useState(!1),a=Ae(s=>s.createOrUpdateFlowNode),i=g.useCallback(async s=>{var c,l,u;try{if(o(!0),t&&(n==null?void 0:n.id)){const d=((c=t.position)==null?void 0:c.x)||0,f=(((l=t.position)==null?void 0:l.y)||0)+(((u=t.measured)==null?void 0:u.height)||0),p=await ce("FlowNodeData").save({data:{},session_id:n.id});if(!p)throw new Error("Failed to save node data");if(!await a({node_type:s,data:{},source_id:p.id,source_type:"FlowNodeData",x:d,y:f+20,...n9[s]||{}}))throw new Error("Failed to save node")}}finally{o(!1)}},[a,n==null?void 0:n.id,t]);return{loading:r,createNode:i}},Bh={applications:[{key:oe.EditorApp,icon:"notebook-text",label:"application_bar.note"},{key:oe.VSLiteApp,icon:"square-terminal",label:"application_bar.vslite"}],shapes:[{key:oe.Shape,icon:"square",label:"application_bar.square"},{key:oe.CircleShape,icon:"circle",label:"application_bar.circle"},{key:oe.TriangleShape,icon:"triangle",label:"application_bar.triangle"}],old:[{key:oe.CodeContainerApp,icon:"file-code-2",label:"application_bar.code_editor"}]},o9=g.memo(e=>{const{t}=Me("flows"),{toast:n}=Bt(),{loading:r,createNode:o}=r9(e.id),a=async i=>{try{if(r)return;await o(i)}catch{n({description:t("application_bar.errors.add_node_failed"),variant:"destructive"})}};return h.jsx(kd,{children:h.jsxs(t9,{direction:"middle",children:[Bh.applications.map(i=>h.jsx(Mu,{children:h.jsxs(Mi,{children:[h.jsx(ki,{children:h.jsx(ue,{onClick:()=>a(i.key),name:i.icon})}),h.jsx(Sa,{children:h.jsx("p",{children:t(i.label)})})]})},i.label)),h.jsx(wc,{orientation:"vertical",className:"h-full"}),Bh.shapes.map(i=>h.jsx(Mu,{children:h.jsxs(Mi,{children:[h.jsx(ki,{children:h.jsx(ue,{onClick:()=>a(i.key),name:i.icon})}),h.jsx(Sa,{children:h.jsx("p",{children:t(i.label)})})]})},i.label)),h.jsx(wc,{orientation:"vertical",className:"h-full"}),Bh.old.map(i=>h.jsx(Mu,{children:h.jsxs(Mi,{children:[h.jsx(ki,{children:h.jsx(ue,{onClick:()=>a(i.key),name:i.icon})}),h.jsx(Sa,{children:h.jsx("p",{children:t(i.label)})})]})},i.label))]})})}),ku=g.memo(e=>{const{lineClassName:t,handleClassName:n,...r}=e;return h.jsx(Kte,{lineClassName:K("!border-1.5",t),handleClassName:K("!w-2 !h-2 !border-2 !rounded-full",n),...r})}),a9=e=>{const t=Ae(r=>r.createOrUpdateFlowEdge),n=g.useCallback(async({edgeId:r,source:o,target:a,connection:i})=>{try{if([oe.CircleShape,oe.TriangleShape].includes(o==null?void 0:o.type)&&(a==null?void 0:a.type)===oe.Shape){await t({source:i.source,target:i.target,sourceHandle:i.sourceHandle,targetHandle:i.targetHandle});return}return{deleteEdgeId:r}}catch{return{deleteEdgeId:r}}},[t]);cn(e,n)},i9=g.memo(e=>{const{id:t,selected:n,isConnectable:r}=e;return a9(t),h.jsxs(h.Fragment,{children:[h.jsx(ku,{isVisible:!!n,minWidth:40,minHeight:40}),h.jsx(Ge,{type:"target",position:fe.Top,isConnectable:r}),h.jsx("div",{className:"min-w-10 min-h-10 w-full h-full bg-border border",children:h.jsx(nn,{id:t})}),h.jsx(Ge,{type:"source",position:fe.Bottom,isConnectable:r})]})}),s9=e=>{const t=Ae(r=>r.createOrUpdateFlowEdge),n=g.useCallback(async({edgeId:r,source:o,target:a,connection:i})=>{try{if([oe.Shape,oe.TriangleShape].includes(o==null?void 0:o.type)&&(a==null?void 0:a.type)===oe.CircleShape){await t({source:i.source,target:i.target,sourceHandle:i.sourceHandle,targetHandle:i.targetHandle});return}return{deleteEdgeId:r}}catch{return{deleteEdgeId:r}}},[t]);cn(e,n)},c9=g.memo(e=>{const{id:t,selected:n,isConnectable:r}=e;return s9(t),h.jsxs(h.Fragment,{children:[h.jsx(ku,{isVisible:!!n,minWidth:40,minHeight:40}),h.jsx(Ge,{type:"target",position:fe.Top,isConnectable:r}),h.jsx("div",{className:"min-w-10 min-h-10 w-full h-full bg-border rounded-full border",children:h.jsx(nn,{id:t})}),h.jsx(Ge,{type:"source",position:fe.Bottom,isConnectable:r})]})}),l9=e=>{const t=Ae(r=>r.createOrUpdateFlowEdge),n=g.useCallback(async({edgeId:r,source:o,target:a,connection:i})=>{try{if([oe.CircleShape,oe.Shape].includes(o==null?void 0:o.type)&&(a==null?void 0:a.type)===oe.TriangleShape){await t({source:i.source,target:i.target,sourceHandle:i.sourceHandle,targetHandle:i.targetHandle});return}return{deleteEdgeId:r}}catch{return{deleteEdgeId:r}}},[t]);cn(e,n)},u9=g.memo(e=>{const{id:t,selected:n,width:r,height:o,isConnectable:a}=e;return l9(t),h.jsxs(h.Fragment,{children:[h.jsx(ku,{isVisible:!!n,minWidth:40,minHeight:40}),h.jsx(Ge,{type:"target",position:fe.Top,isConnectable:a}),h.jsx("div",{className:"w-0 h-0 border-l-transparent border-r-transparent border-b-border",style:{borderLeftWidth:(r||0)/2,borderRightWidth:(r||0)/2,borderBottomWidth:o||0}}),h.jsx(nn,{id:t,className:"absolute top-0 right-0"}),h.jsx(Ge,{type:"source",position:fe.Bottom,isConnectable:a})]})}),d9=e=>{const t=Ae(r=>r.createOrUpdateFlowEdge),n=g.useCallback(async({edgeId:r,source:o,target:a,connection:i})=>{try{if((o==null?void 0:o.type)===oe.LLM&&(a==null?void 0:a.type)===oe.EditorApp){await t({source:i.source,target:i.target,sourceHandle:i.sourceHandle,targetHandle:i.targetHandle});return}return{deleteEdgeId:r}}catch{return{deleteEdgeId:r}}},[t]);cn(e,n)},f9=e=>{const t=ln(e),{t:n}=Me("flows"),r=g.useRef(null),{toast:o}=Bt(),{getNode:a,getHandleConnections:i}=Fn(),s=sn(d=>d.stream),c=g.useCallback(async d=>{t&&(clearTimeout(r.current),r.current=setTimeout(async()=>{await ce("FlowNode").update(t.id,{data:d})},150))},[t]),l=g.useCallback(async(d,f)=>{if(t){const p=i({nodeId:e,type:"target"}).find(m=>{var v;return((v=a(m.source))==null?void 0:v.type)===oe.LLM}),y=p?a(p==null?void 0:p.source):void 0;if(y){if(y.data.status!==et.Loaded)return o({variant:"destructive",description:n("editor_node.errors.llm_not_loaded_yet")})}else return o({variant:"destructive",description:n("editor_node.errors.llm_not_found")});try{const m=s(d);if(!m)throw new Error("Stream is not supported");const v=[];for await(const b of m)b&&Array.isArray(b)&&(v.push(...b.map(x=>x.content)),b!=null&&b.length&&(f==null||f(b.map(x=>x.content).join(""))));return v.join("")}catch(m){if(m instanceof Error&&m.message.includes("LLM_NOT_LOADED_YET"))return o({title:n("editor_node.errors.llm_not_loaded_yet")});o({variant:"destructive",title:n("editor_node.errors.stream_message_failed")})}}},[t,i,e,a,o,n,s]),u=g.useCallback(d=>{if(!a(d))return[];const f=[];return i({nodeId:d,type:"target"}).forEach(p=>{const y=a(p.source);!y||y.type!==oe.LLM||f.push({node:y,connections:[p]})}),f},[i,a]);return{createMessage:l,updateEditorContent:c,getLinkedConnections:u}},p9=g.lazy(()=>Nt(()=>import("./PlateEditor-SF0quxx3.js").then(async e=>(await e.__tla,e)),__vite__mapDeps([15,1,2,13,16,4,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,3,5,6,105]))),h9=g.memo(e=>{var l;const{id:t,data:n,selected:r,isConnectable:o}=e;d9(t);const{createMessage:a,updateEditorContent:i,getLinkedConnections:s}=f9(t),c=g.useCallback(u=>{i(u)},[i]);return h.jsxs("div",{className:"w-full min-w-[1240px] h-full",children:[h.jsx(ku,{isVisible:!!r,minWidth:1240,minHeight:400}),h.jsx(Ge,{type:"target",position:fe.Top,isConnectable:o}),h.jsxs("div",{className:"min-w-10 min-h-10 w-full h-full rounded-lg border bg-background",children:[h.jsx(nn,{className:"!z-[100]",id:t,enableToStandalone:!0,getLinkedConnections:s}),h.jsx(g.Suspense,{fallback:h.jsx("div",{className:"h-full w-ful rounded-lg flex justify-center items-center",children:h.jsx(ue,{name:"loader-circle",className:"animate-spin"})}),children:h.jsx("div",{className:"h-full w-ful rounded-lg","data-registry":"plate",children:h.jsx(p9,{defaultValue:(l=n==null?void 0:n.flowNode)==null?void 0:l.data,onValueChange:c,copilotStream:a})})})]}),h.jsx(Ge,{type:"source",position:fe.Bottom,isConnectable:o})]})}),m9=e=>{const t=g.useCallback(async({edgeId:n})=>{try{return{deleteEdgeId:n}}catch{return{deleteEdgeId:n}}},[]);cn(e,t)},y9=g.memo(e=>{var i,s;const{id:t,data:n,isConnectable:r}=e,{t:o}=Me("flows");m9(t);let a="";switch((i=n.entity)==null?void 0:i.placeholder_type){case"VECTOR_DATABASE_RETREIVER":a=o("placeholder_node.vector_database_retriever");break}return h.jsxs("div",{children:[h.jsx(Ge,{type:"target",position:fe.Top,isConnectable:r}),h.jsxs(Eo,{className:"flex justify-center max-w-80",variant:"default",children:[h.jsx(nn,{id:t}),h.jsx(ue,{name:"land-plot",className:"w-7 h-7"}),h.jsxs("div",{className:"ml-2 pr-4",children:[h.jsx(So,{children:`${((s=n.entity)==null?void 0:s.placeholder)||""}`}),h.jsx(ds,{children:a?h.jsx(tn,{children:a}):void 0})]})]}),h.jsx(Ge,{type:"source",position:fe.Bottom,id:"a",isConnectable:r})]})}),g9=g.lazy(()=>Nt(()=>import("./CodeContainerApp-BHXpRi08.js").then(async e=>(await e.__tla,e)).then(e=>e.C),__vite__mapDeps([109,1,2,104,107,12,110,4,111,112]))),v9=g.memo(e=>{const{id:t,isConnectable:n}=e;return h.jsxs("div",{className:"w-[1380px] h-[600px] rounded-lg border overflow-hidden shadow-sm",children:[h.jsx(Ge,{type:"target",position:fe.Top,isConnectable:n}),h.jsxs("div",{className:"w-full h-full rounded-lg border bg-card overflow-hidden",children:[h.jsx(nn,{id:t}),h.jsx(g.Suspense,{fallback:h.jsx("div",{className:"h-full w-full flex justify-center items-center",children:h.jsx(ue,{name:"loader-circle",className:"animate-spin"})}),children:h.jsx(g9,{...e})})]}),h.jsx(Ge,{type:"source",position:fe.Bottom,isConnectable:n})]})}),b9=["vite-vue","shadcn-react-vite","todo-app-react-vite","porfolio-nextjs"],x9=async e=>{switch(e){case"vite-vue":return Nt(()=>import("./vite-vue-Bmz2z3Fo.js"),[]).then(t=>t.BASE);case"shadcn-react-vite":return Nt(()=>import("./shadcn-react-vite-CDJ9BaE9.js"),[]).then(t=>t.BASE);case"todo-app-react-vite":return Nt(()=>import("./todo-app-react-vite-BBWBkRjR.js"),[]).then(t=>t.BASE);case"porfolio-nextjs":return Nt(()=>import("./porfolio-nextjs-Y_dlzAA8.js"),[]).then(t=>t.BASE);default:throw new Error(`Unknown source base: ${e}`)}},fS=g.memo(({className:e,onUpdateSourceBase:t})=>{const{t:n}=Me("components"),[r,o]=g.useState();return h.jsxs(Tt,{className:K("mw-full",e),children:[h.jsx(hn,{className:"p-4",children:h.jsx(jn,{children:n("add_source_base.title")})}),h.jsx(mn,{className:"p-4",children:h.jsxs("div",{className:"flex items-center justify-center w-full h-full flex-col",children:[h.jsxs(xo,{onValueChange:a=>o(a),children:[h.jsx(Fr,{className:"w-full mb-4",children:h.jsx(wo,{placeholder:n("add_source_base.source_base_select_placeholder")})}),h.jsx(Br,{children:b9.map(a=>h.jsx(En,{value:`${a}`,children:n(`add_source_base.sourcebases.${a.toLowerCase()}`)},`${a}`))})]}),h.jsx(dt,{className:"w-full",onClick:async()=>r&&t(await x9(r)),children:n("add_source_base.update_source")})]})})]})}),w9=()=>{const{getNode:e,getHandleConnections:t}=Fn(),n=g.useCallback(async(r,o)=>{await ce("FlowNode").update(r,{raw:Dm(o)})},[]);return{getLinkedConnections:g.useCallback(r=>{if(!e(r))return[];const o=[];return t({nodeId:r,type:"target"}).forEach(a=>{const i=e(a.source);!i||i.type!==oe.LLM||o.push({node:i,connections:[a]})}),o},[t,e]),updateCodeContainerData:n}},_9=e=>{const t=Ae(r=>r.createOrUpdateFlowEdge),n=g.useCallback(async({edgeId:r,source:o,target:a,connection:i})=>{try{if((o==null?void 0:o.type)===oe.LLM&&(a==null?void 0:a.type)===oe.VSLiteApp){await t({source:i.source,target:i.target,sourceHandle:i.sourceHandle,targetHandle:i.targetHandle});return}return{deleteEdgeId:r}}catch{return{deleteEdgeId:r}}},[t]);cn(e,n)},j9=g.lazy(()=>Nt(()=>import("./index-DJCPR4q8.js").then(async e=>(await e.__tla,e)),__vite__mapDeps([106,1,2,104,107,3,4,5,6,108]))),E9=g.memo(e=>{var u,d,f;const{id:t,isConnectable:n,data:r}=e,[o,a]=g.useState((u=r==null?void 0:r.flowNode)!=null&&u.raw?$m(r.flowNode.raw):void 0),{updateCodeContainerData:i,getLinkedConnections:s}=w9();_9(t);const c=g.useCallback(async p=>{var y,m;(y=r==null?void 0:r.flowNode)!=null&&y.id&&(await i((m=r==null?void 0:r.flowNode)==null?void 0:m.id,p),a(p))},[(d=r==null?void 0:r.flowNode)==null?void 0:d.id,i]),l=g.useCallback(async(p,y)=>{a(m=>{var b;const v=zm(m||{},p,y);return i((b=r==null?void 0:r.flowNode)==null?void 0:b.id,v),v})},[(f=r==null?void 0:r.flowNode)==null?void 0:f.id,i]);return o?h.jsxs("div",{className:"w-[1380px] h-[600px] rounded-lg border overflow-hidden shadow-sm",children:[h.jsx(Ge,{type:"target",position:fe.Top,isConnectable:n}),h.jsxs("div",{className:"w-full h-full rounded-lg border bg-card overflow-hidden",children:[h.jsx(nn,{id:t,className:"z-50",enableToStandalone:!0,getLinkedConnections:s}),h.jsx(g.Suspense,{fallback:h.jsx("div",{className:"h-full w-full flex justify-center items-center",children:h.jsx(ue,{name:"loader-circle",className:"animate-spin"})}),children:h.jsx(j9,{fileSystemTree:o,onUpdateFileContent:l})})]}),h.jsx(Ge,{type:"source",position:fe.Bottom,isConnectable:n})]}):h.jsx("div",{className:"h-full flex justify-center items-center",children:h.jsx(fS,{className:"w-64",onUpdateSourceBase:c})})}),S9={[oe.LLM]:q5,[oe.Toolbox]:Tie,[oe.Thread]:J5,[oe.Message]:$ie,[oe.Prompt]:Vie,[oe.SessionInfo]:yxe,[oe.Schema]:vxe,[oe.CSVData]:bxe,[oe.ToolDefinition]:wxe,[oe.DefaultEmbeddingModel]:jxe,[oe.VectorDatabase]:Pxe,[oe.JSONLData]:Txe,[oe.ApplicationBar]:o9,[oe.Shape]:i9,[oe.CircleShape]:c9,[oe.TriangleShape]:u9,[oe.EditorApp]:h9,[oe.PlaceHolder]:y9,[oe.CodeContainerApp]:v9,[oe.VSLiteApp]:E9};function Ixe(e,t=[]){let n=[];function r(a,i){const s=g.createContext(i),c=n.length;n=[...n,i];function l(d){const{scope:f,children:p,...y}=d,m=(f==null?void 0:f[e][c])||s,v=g.useMemo(()=>y,Object.values(y));return h.jsx(m.Provider,{value:v,children:p})}function u(d,f){const p=(f==null?void 0:f[e][c])||s,y=g.useContext(p);if(y)return y;if(i!==void 0)return i;throw new Error(`\`${d}\` must be used within \`${a}\``)}return l.displayName=a+"Provider",[l,u]}const o=()=>{const a=n.map(i=>g.createContext(i));return function(i){const s=(i==null?void 0:i[e])||a;return g.useMemo(()=>({[`__scope${e}`]:{...i,[e]:s}}),[i,s])}};return o.scopeName=e,[r,Dxe(o,...t)]}function Dxe(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(o){const a=r.reduce((i,{useScope:s,scopeName:c})=>{const l=s(o)[`__scope${c}`];return{...i,...l}},{});return g.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return n.scopeName=t.scopeName,n}var Lxe="Toggle",mE=g.forwardRef((e,t)=>{const{pressed:n,defaultPressed:r=!1,onPressedChange:o,...a}=e,[i=!1,s]=en({prop:n,onChange:o,defaultProp:r});return h.jsx(Oe.button,{type:"button","aria-pressed":i,"data-state":i?"on":"off","data-disabled":e.disabled?"":void 0,...a,ref:t,onClick:he(e.onClick,()=>{e.disabled||s(!i)})})});mE.displayName=Lxe;let yE,ai,gE,vE,$h;yE=mE,ai="ToggleGroup",[gE,Y9]=Ixe(ai,[Kr]),vE=Kr(),$h=V.forwardRef((e,t)=>{const{type:n,...r}=e;if(n==="single"){const o=r;return h.jsx(Fxe,{...o,ref:t})}if(n==="multiple"){const o=r;return h.jsx(Bxe,{...o,ref:t})}throw new Error(`Missing prop \`type\` expected on \`${ai}\``)}),$h.displayName=ai;var[C9,O9]=gE(ai),Fxe=V.forwardRef((e,t)=>{const{value:n,defaultValue:r,onValueChange:o=()=>{},...a}=e,[i,s]=en({prop:n,defaultProp:r,onChange:o});return h.jsx(C9,{scope:e.__scopeToggleGroup,type:"single",value:i?[i]:[],onItemActivate:s,onItemDeactivate:V.useCallback(()=>s(""),[s]),children:h.jsx(N9,{...a,ref:t})})}),Bxe=V.forwardRef((e,t)=>{const{value:n,defaultValue:r,onValueChange:o=()=>{},...a}=e,[i=[],s]=en({prop:n,defaultProp:r,onChange:o}),c=V.useCallback(u=>s((d=[])=>[...d,u]),[s]),l=V.useCallback(u=>s((d=[])=>d.filter(f=>f!==u)),[s]);return h.jsx(C9,{scope:e.__scopeToggleGroup,type:"multiple",value:i,onItemActivate:c,onItemDeactivate:l,children:h.jsx(N9,{...a,ref:t})})});$h.displayName=ai;var[$xe,zxe]=gE(ai),N9=V.forwardRef((e,t)=>{const{__scopeToggleGroup:n,disabled:r=!1,rovingFocus:o=!0,orientation:a,dir:i,loop:s=!0,...c}=e,l=vE(n),u=Bo(i),d={role:"group",dir:u,...c};return h.jsx($xe,{scope:n,rovingFocus:o,disabled:r,children:o?h.jsx(nc,{asChild:!0,...l,orientation:a,dir:u,loop:s,children:h.jsx(Oe.div,{...d,ref:t})}):h.jsx(Oe.div,{...d,ref:t})})}),zh="ToggleGroupItem",M9=V.forwardRef((e,t)=>{const n=O9(zh,e.__scopeToggleGroup),r=zxe(zh,e.__scopeToggleGroup),o=vE(e.__scopeToggleGroup),a=n.value.includes(e.value),i=r.disabled||e.disabled,s={...e,pressed:a,disabled:i},c=V.useRef(null);return r.rovingFocus?h.jsx(rc,{asChild:!0,...o,focusable:!i,active:a,ref:c,children:h.jsx(bE,{...s,ref:t})}):h.jsx(bE,{...s,ref:t})});M9.displayName=zh;let bE;bE=V.forwardRef((e,t)=>{const{__scopeToggleGroup:n,value:r,...o}=e,a=O9(zh,n),i={role:"radio","aria-checked":e.pressed,"aria-pressed":void 0},s=a.type==="single"?i:void 0;return h.jsx(mE,{...s,...o,ref:t,onPressedChange:c=>{c?a.onItemActivate(r):a.onItemDeactivate(r)}})}),Zh=$h,em=M9;const k9=qr("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 gap-2",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground"},size:{default:"h-10 px-3 min-w-10",sm:"h-9 px-2.5 min-w-9",lg:"h-11 px-5 min-w-11"}},defaultVariants:{variant:"default",size:"default"}}),Vxe=g.forwardRef(({className:e,variant:t,size:n,...r},o)=>h.jsx(yE,{ref:o,className:K(k9({variant:t,size:n,className:e})),...r}));Vxe.displayName=yE.displayName;const P9=g.createContext({size:"default",variant:"default"}),A9=g.forwardRef(({className:e,variant:t,size:n,children:r,...o},a)=>h.jsx(Zh,{ref:a,className:K("flex items-center justify-center gap-1",e),...o,children:h.jsx(P9.Provider,{value:{variant:t,size:n},children:r})}));A9.displayName=Zh.displayName;const T9=g.forwardRef(({className:e,children:t,variant:n,size:r,...o},a)=>{const i=g.useContext(P9);return h.jsx(em,{ref:a,className:K(k9({variant:i.variant||n,size:i.size||r}),e),...o,children:t})});T9.displayName=em.displayName;function Uxe(){const e=Ve(t=>`x: ${t.transform[0].toFixed(2)}, y: ${t.transform[1].toFixed(2)}, zoom: ${t.transform[2].toFixed(2)}`);return h.jsx("div",{children:e})}function Hxe({change:e}){var r,o,a,i;const t="id"in e?e.id:"-",{type:n}=e;return h.jsxs("div",{className:"mb-3",children:[h.jsxs("div",{children:["node id: ",t]}),h.jsxs("div",{children:[n==="add"?JSON.stringify(e.item,null,2):null,n==="dimensions"?`dimensions: ${(r=e.dimensions)==null?void 0:r.width} \xD7 ${(o=e.dimensions)==null?void 0:o.height}`:null,n==="position"?`position: ${(a=e.position)==null?void 0:a.x.toFixed(1)}, ${(i=e.position)==null?void 0:i.y.toFixed(1)}`:null,n==="remove"?"remove":null,n==="select"?e.selected?"select":"unselect":null]})]})}function Wxe({limit:e=20}){const[t,n]=g.useState([]),r=vt(),o=g.useCallback(i=>{n(s=>[...i,...s].slice(0,e))},[e]);g.useEffect(()=>(r.setState({onNodesChange:o}),()=>r.setState({onNodesChange:void 0})),[o,r]);const a=()=>h.jsx("div",{children:"No Changes Triggered"});return h.jsx(h.Fragment,{children:t.length===0?h.jsx(a,{}):t.map((i,s)=>h.jsx(Hxe,{change:i},s))})}function qxe(){const{getInternalNode:e}=Fn(),t=_te();return h.jsx(xte,{children:h.jsx("div",{className:"text-secondary-foreground",children:t.map(n=>{var a,i;const r=e(n.id);if(!r)return null;const o=r==null?void 0:r.internals.positionAbsolute;return h.jsx(Yxe,{id:n.id,selected:!!n.selected,type:n.type||"default",position:n.position,absPosition:o,width:((a=n.measured)==null?void 0:a.width)??0,height:((i=n.measured)==null?void 0:i.height)??0,data:n.data},n.id)})})})}function Yxe({id:e,type:t,selected:n,position:r,absPosition:o,width:a,height:i,data:s}){if(!a||!i)return null;const c=`translate(${o.x}px, ${o.y+i}px)`,l=`${r.x.toFixed(1)}, ${r.y.toFixed(1)}`,u=`${a} \xD7 ${i}`,d=n?"Selected":"Not Selected";return h.jsxs("div",{style:{position:"absolute",transform:c,width:a*2},className:"text-xs",children:[h.jsxs("div",{children:["id: ",e]}),h.jsxs("div",{children:["type: ",t]}),h.jsxs("div",{children:["selected: ",d]}),h.jsxs("div",{children:["position: ",l]}),h.jsxs("div",{children:["dimensions: ",u]}),h.jsxs("div",{children:["data: ",JSON.stringify(s,null,2)]})]})}function Kxe({tools:e}){return h.jsx(Gi,{position:"top-left",className:"bg-card p-1 border rounded shadow-sm",children:h.jsx(A9,{type:"multiple",children:e.map(({active:t,setActive:n,label:r,value:o})=>h.jsx(T9,{value:o,onClick:()=>n(a=>!a),"aria-pressed":t,className:"bg-card text-card-foreground transition-colors duration-300 hover:bg-secondary hover:text-secondary-foreground",children:r},o))})})}function R9(){const[e,t]=g.useState(!1),[n,r]=g.useState(!1),[o,a]=g.useState(!1),i=[{active:e,setActive:t,label:"Node Inspector",value:"node-inspector"},{active:n,setActive:r,label:"Change Logger",value:"change-logger"},{active:o,setActive:a,label:"Viewport Logger",value:"viewport-logger"}];return h.jsxs(h.Fragment,{children:[h.jsx(Kxe,{tools:i}),n&&h.jsx(Gi,{className:"text-xs p-5 bg-white rounded shadow-md overflow-y-auto max-h-[50%] mt-20",position:"bottom-right",children:h.jsx(Wxe,{})}),e&&h.jsx(qxe,{}),o&&h.jsx(Gi,{position:"bottom-left",className:"text-secondary-foreground",children:h.jsx(Uxe,{})})]})}R9.displayName="DevTools";const Xxe=()=>{const e=g.useRef({}),t=g.useRef({}),n=Ae(N=>N.flowEdges),r=Ze(N=>N.currentSession),o=Ae(N=>N.setNodes),a=Ae(N=>N.updateNodes),i=Ae(N=>N.updateEdges),s=Ae(N=>N.addConnectionToEdges),c=Ae(N=>N.reset),l=Ae(N=>N.findFlowEdges),u=Ae(N=>N.deleteFlowNode),d=Ae(N=>N.deleteFlowEdge),f=Ae(N=>N.updateFlowNode),p=Ae(N=>N.getNodes),y=Ae(N=>N.findFlowNodesWithSource),m=g.useRef(n),v=g.useRef(),[b,x]=g.useState({loading:!1});m.current=n;const _=g.useCallback(async(N,P)=>{try{v.current=N,c(),await(P==null?void 0:P())}catch{v.current=void 0}},[c]),w=g.useCallback(async N=>{try{if(!(r!=null&&r.id))return;x(A=>({...A,loading:!0}));const P=await y({...N,where:{...N.where,session_id:r.id}}),R=await l({where:[{source:qn(P.map(A=>A.id))},{target:qn(P.map(A=>A.id))}]});return{flowNodes:P,flowEdges:R}}finally{x(P=>({...P,loading:!1}))}},[y,l,r==null?void 0:r.id]),j=g.useCallback(async N=>{var P,R;for(const A of N)if("id"in A&&Object.values(wl).includes(A.id)&&A.type!=="remove")a([A]);else if(A.type==="position"&&A.position&&!isNaN(A.position.x)&&!isNaN(A.position.y)){a([A]);const C=A.position.x,M=A.position.y;clearTimeout(e.current[A.id]),e.current[A.id]=setTimeout(async()=>{e.current[A.id]=void 0,await f({id:A.id,x:C,y:M},{silent:!0})},200)}else if(A.type==="remove"){const C=(P=p([A.id]))==null?void 0:P[0];if(!(C!=null&&C.type)||qne.includes(C.type))return;await u({id:A.id})}else if(A.type==="dimensions"&&A.dimensions&&!isNaN(A.dimensions.width)&&!isNaN(A.dimensions.height)){const C=(R=p([A.id]))==null?void 0:R[0];if(!(C!=null&&C.width)&&!(C!=null&&C.height))return;a([A]),clearTimeout(t.current[A.id]);const M=A.dimensions.width,T=A.dimensions.height;t.current[A.id]=setTimeout(async()=>{await f({id:A.id,width:M,height:T},{silent:!0})},200)}else A.type==="select"&&a([A])},[a,f,p,u]),E=g.useCallback(N=>{Promise.all(N.map(async P=>{if(P.type==="remove")return d({id:P.id})})),i(N)},[d,i]),S=g.useCallback(N=>{s(N)},[s]),O=g.useCallback(()=>{var N;(N=m.current)==null||N.length},[]),k=g.useCallback(N=>{o(P=>{var M,T;let R;if(typeof N=="function"?R=N(P):R=N,!R)return P;const A=P==null?void 0:P.find(D=>D.id===R.id),C={id:R.id,item:A?Bf(A,R):{...R,position:{x:((M=R.position)==null?void 0:M.x)||0,y:((T=R.position)==null?void 0:T.y)||0}},type:A?"replace":"add"};return Da([C],P)})},[o]);return{syncEdges:O,initialFlow:_,loadingState:b,prepareFlowInfo:w,updateNodeChanges:j,updateEdgeChanges:E,updateOrCreateNode:k,currentSessionIdRef:v,updateEdgeConnection:S}},Qxe=e=>{const t=Ze(u=>{var d;return(d=u.currentSession)==null?void 0:d.id}),{loadingState:n,prepareFlowInfo:r,syncEdges:o,initialFlow:a,currentSessionIdRef:i}=e,s=Ae(u=>u.ready),c=Ae(u=>u.removeSyncNodeQueue),l=Ae(u=>u.removeSyncEdgeQueue);g.useLayoutEffect(()=>{},[t]),g.useEffect(()=>{n.loading||!s||!t||i.current===t||a(t,async()=>{await r({where:{session_id:t}})})},[a,r,n.loading,i,s,t]),g.useEffect(()=>{const u=Ae.subscribe(f=>f.syncNodeQueue,async(f,p)=>{var v;const y=p.map(b=>b.timestamp),m=f.filter(b=>!y.includes(b.timestamp));if(m.length){c(m.map(b=>b.timestamp));for(const b of m){const x=await r(b.query);switch(b.syncType){case"Thread":{const _=(v=x==null?void 0:x.flowNodes)==null?void 0:v.map(w=>{if(w.source_id&&w.source_type==="Thread")return w.source_id}).filter(Boolean);if(_!=null&&_.length){const w=await ce("Message").find({where:{thread_id:qn(_)}});await r({where:{source_type:"Message",source_id:qn(w.map(j=>j.id))}})}}break}}}}),d=Ae.subscribe(f=>f.syncEdgeQueue,async(f,p)=>{const y=p.map(v=>v.timestamp),m=f.filter(v=>!y.includes(v.timestamp));m.length&&(l(m.map(v=>v.timestamp)),o())});return()=>{u(),d()}},[r,l,c,o])},Jxe=()=>{const[e,t]=g.useState(!0),n=Xxe(),r=sn(u=>u.selectedModel),o=g.useRef(r),a=sn(u=>u.setInitProgressCallback),{updateOrCreateNode:i,updateNodeChanges:s,updateEdgeChanges:c,updateEdgeConnection:l}=n;return Qxe(n),o.current=r,g.useEffect(()=>{const u=a==null?void 0:a(d=>{if(!o.current)return;const f=`${o.current}`;i(p=>{const y=p==null?void 0:p.find(m=>{var v;return(v=m.data)!=null&&v.entity&&typeof m.data.entity=="object"&&"name"in m.data.entity?m.data.entity.name===f:!1});if(y)return y.data.label=d.text,y.data.status=et.Loading,d.progress===100&&(y.data.label="",y.data.status=et.Loaded),y})});return()=>{u==null||u()}},[a,i]),g.useMemo(()=>({updateNodeChanges:s,updateEdgeChanges:c,initializing:e,setInitializing:t,updateEdgeConnection:l}),[s,c,e,t,l])},Gxe=()=>{const e=Du(l=>l.theme),t=Ae(l=>l.nodes),n=Ae(l=>l.edges),{updateNodeChanges:r,updateEdgeChanges:o,updateEdgeConnection:a}=Jxe(),i=g.useCallback(l=>{r(l)},[r]),s=g.useCallback(l=>{o(l)},[o]),c=g.useCallback(l=>{a(l)},[a]);return h.jsxs(vte,{nodes:t,edges:n,nodeTypes:S9,onNodesChange:i,onEdgesChange:s,onConnect:c,panOnScroll:!0,panOnScrollMode:Xo.Free,colorMode:e,fitView:!0,children:[h.jsx(Ote,{variant:vo.Dots,gap:24,size:1}),h.jsx(Rte,{}),h.jsx(qte,{}),Uwe?h.jsx(R9,{}):void 0]})},Zxe=g.memo(Gxe);function ewe(){return h.jsx(Zxe,{})}function xE(){const e=cC();return W9(e),h.jsx(Wwe,{})}const twe=T7(h.jsxs(vc,{Component:Mq,errorElement:h.jsx(xE,{}),children:[h.jsx(vc,{path:eg.whiteboard,Component:ewe,errorElement:h.jsx(xE,{})}),h.jsx(vc,{path:eg.application,errorElement:h.jsx(xE,{}),Component:Goe}),h.jsx(vc,{path:"*",element:h.jsx(k7,{to:In("whiteboard")})})]})),nwe=(e,t)=>{switch(sW){case"browser":return gC(e,t);case"hash":return rV(e);default:return gC(e,t)}},rwe=nwe(twe,{basename:"/NoLLMChat/"});Hwe("[BASE_URL]","/NoLLMChat/");let I9;I9=g.memo(()=>{const e=!window.location.pathname.includes("/NoLLMChat/");return g.useLayoutEffect(()=>{e&&(window.location.href="/NoLLMChat/".replace("//","/"))},[e]),e?h.jsx(U9,{className:"w-screen h-screen",enableLogo:!0,typing:!0}):h.jsx(hV,{router:rwe})},()=>!0),nz=Object.freeze(Object.defineProperty({__proto__:null,default:I9},Symbol.toStringTag,{value:"Module"}))});export{Y9 as $,ME as A,Yh as B,kE as C,PE as D,Zs as E,Kh as F,ec as G,ga as H,zu as I,Vu as J,Xh as K,AE as L,TE as M,ui as N,RE as O,IE as P,DE as Q,LE as R,Qh as S,FE as T,BE as U,$E as V,zE as W,VE as X,UE as Y,HE as Z,Kr as _,Zwe as __tla,Jh as a,tc as a$,Bo as a0,nc as a1,Gh as a2,rc as a3,Zh as a4,em as a5,K9 as a6,WE as a7,X9 as a8,qE as a9,tm as aA,nm as aB,rm as aC,om as aD,YE as aE,KE as aF,Uu as aG,am as aH,im as aI,sm as aJ,cm as aK,lm as aL,um as aM,dm as aN,fm as aO,pm as aP,hm as aQ,mm as aR,ym as aS,gm as aT,vm as aU,bm as aV,XE as aW,xm as aX,QE as aY,Q9 as aZ,mt as a_,JE as aa,GE as ab,J9 as ac,wm as ad,oc as ae,ZE as af,G9 as ag,_m as ah,jm as ai,Em as aj,eS as ak,Sm as al,Cm as am,Om as an,Nm as ao,Mm as ap,km as aq,tS as ar,nS as as,Z9 as at,rS as au,ez as av,oS as aw,Pm as ax,Am as ay,Tm as az,ac as b,ic as b0,va as b1,ba as b2,Hu as b3,sc as b4,di as b5,fi as b6,tz as b7,aS as b8,iS as b9,sS as ba,Rm as bb,Im as bc,cS as bd,Qe as be,Mn as bf,Ae as bg,cn as bh,ln as bi,Dm as bj,Lm as bk,lS as bl,uS as bm,Fm as bn,Bm as bo,dt as bp,dS as bq,$m as br,zm as bs,fS as bt,pS as bu,hS as bv,pi as bw,$o as bx,nz as by,mS as c,rr as d,Vm as e,yS as f,gS as g,hi as h,or as i,Um as j,Hm as k,vS as l,Nr as m,bS as n,Wm as o,qm as p,xS as q,wS as r,_S as s,Ym as t,un as u,cc as v,Km as w,lc as x,mi as y,jS as z};
