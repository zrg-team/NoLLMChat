const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/few_shot-KkkSpKfD.js","assets/index-uO_BfSNX.js","assets/index-Hqgdq9fF.css","assets/copy-BZ8bvMBQ.js","assets/createLucideIcon-ke0NrbGQ.js","assets/refresh-ccw-DavAjajS.js","assets/volume-2-B_ZZHNVx.js","assets/index-DnLurQHa.js","assets/index-TkYuoEXb.js","assets/objectWithoutPropertiesLoose-BjXSgPXB.js","assets/index-BDTIj9a5.js","assets/index-Cr8Tc6mT.css","assets/pdf-Bkh7NtDr.js","assets/pdf.min-DLpWDy8j.js","assets/pdf.worker.min-DMaI4WcM.js","assets/PlateEditor-DaR2jKnM.js","assets/chevron-down-a9uhU-Jd.js","assets/chevron-right-62gbol1K.js","assets/check-xQgB36qX.js","assets/ellipsis-C2T8zRZx.js","assets/highlighter-Bbz5Zo8O.js","assets/keyboard-CshT21Fm.js","assets/superscript-mTsQgV4r.js","assets/subscript-exNWcLpN.js","assets/align-left-CPU5rWdB.js","assets/align-center-CITV0vxa.js","assets/align-right-CrVtYesK.js","assets/align-justify-iaBLT-5F.js","assets/plus-BYdBjvLl.js","assets/eraser-BAk7Ley0.js","assets/star-Dk_IWyYF.js","assets/flag-BaW4x7HX.js","assets/apple-BrDs1u7i.js","assets/clock-CXGwZt1g.js","assets/leaf-0sKG6iPH.js","assets/lightbulb-QaqVxf8N.js","assets/smile-DGPvmOZG.js","assets/compass-OZy9by3U.js","assets/music-DF0d17Wp.js","assets/x-CpktAaVF.js","assets/search-BQz_dKrN.js","assets/external-link-CC8PakD_.js","assets/redo-2-jfV-2VwF.js","assets/undo-2-DY7FwWjf.js","assets/list-DPAJFHT9.js","assets/list-ordered-B-yKMA5_.js","assets/list-todo-PolOyBcg.js","assets/indent-increase-RL3ti-qf.js","assets/pilcrow-ErDkFq_Z.js","assets/heading-1-CA16pNiv.js","assets/heading-2-Cw9aG4jA.js","assets/heading-3-DMkJV7uL.js","assets/table-Br6Vcy30.js","assets/file-code-Df9L2OpD.js","assets/quote-DNoTiJdc.js","assets/minus-bhHqq91w.js","assets/square-Cdn3eKgl.js","assets/image-fCsOmKyq.js","assets/table-of-contents-BypG88NM.js","assets/columns-3-CG8DZZT9.js","assets/link-2-u-TEsEiZ.js","assets/calendar-B7lYMMvP.js","assets/wrap-text-CRJoF6xm.js","assets/link-mCwCI2vM.js","assets/pen-DWsz14Sc.js","assets/eye-BAR665L2.js","assets/indent-decrease-EqdUNfDV.js","assets/trash-VGpNQ9vt.js","assets/rectangle-vertical-3kKnYAPW.js","assets/rectangle-horizontal-otSlB4Es.js","assets/list-collapse-DPJc7ysN.js","assets/pointer-DSf7ie_F.js","assets/wand-sparkles-DV7KZX7f.js","assets/bold-B-zEc264.js","assets/italic-wlRhSEiz.js","assets/underline-CcXBzGAc.js","assets/strikethrough-CuirGgsC.js","assets/code-xml-ZCR_wEI5.js","assets/baseline-CY2pu1Yi.js","assets/paint-bucket-CHympJAr.js","assets/arrow-up-to-line-wZpkYT2s.js","assets/circle-C48ZhOUh.js","assets/text-BwJXp3vE.js","assets/unlink-Cd-fX3Qh.js","assets/arrow-left-Bx5GZEi-.js","assets/arrow-right-BvzuwIUd.js","assets/download-DR1QP75-.js","assets/chevrons-up-down-C4Z99I9L.js","assets/trash-2-BwFVxbHs.js","assets/chevron-left-QrValq7U.js","assets/sparkles-BpWjgIgK.js","assets/combine-t721KvnT.js","assets/ungroup-CAr1FFGQ.js","assets/grip-vertical-DR06fc_G.js","assets/pen-line-seND8fHm.js","assets/badge-help-D64Ol0DB.js","assets/wand-CXi-swrN.js","assets/list-end-Dh8G--AG.js","assets/list-plus-C08rk55B.js","assets/list-minus-D8xCZqAd.js","assets/feather-DuZCpSbF.js","assets/album-DqwHpSw1.js","assets/corner-up-left-kPPzD8_3.js","assets/loader-circle-DW4GIWrp.js","assets/use-prevent-pitch-zoom-CgNIhcNx.js","assets/PlateEditor-BQPW60dV.css","assets/CodeContainerApp-mxBwxCtz.js","assets/index-AqdUQwR5.js","assets/folder-open-CFNhFjWc.js","assets/folder-BopOveCQ.js","assets/file-BnIIiXz1.js","assets/index-gWENOuEU.js","assets/index-HSnfLTSA.css"])))=>i.map(i=>d[i]);
import{r as g,M as dE,j as h,u as Rh,P as Bxe,a as fE,L as $xe,m as zxe,c as Vxe,f as h$,i as Uxe,b as pE,d as m$,e as Hxe,g as Wxe,h as Zn,l as jr,k as Su,n as vn,R as qxe,o as Bn,p as Zt,q as Oe,s as he,t as On,v as tt,w as Q,x as Vr,S as Ur,y as Ro,D as Cu,z as Yxe,A as Ou,B as de,C as y$,E as Kxe,F as Pe,G as Mu,H as pt,I as Nu,J as ei,K as sn,N as en,O as ue,Q as ku,T as g$,U as Xxe,V as hE,W as Ih,X as Xe,Y as v$,Z as V,_ as Ws,$ as Gxe,a0 as Qxe,a1 as b$,a2 as ae,a3 as Jxe,a4 as Pu,a5 as Zxe,a6 as qt,a7 as Au,a8 as ewe,a9 as Tu,aa as x$,ab as Dh,ac as mE,ad as twe,ae as nwe,af as rwe,ag as owe,ah as awe,ai as iwe,aj as qs,ak as swe,al as cwe,am as lwe,an as w$,ao as _$,ap as uwe,aq as dwe,ar as j$,as as E$,at as yE,au as st,av as fwe,aw as S$,ax as gE,ay as Lh,az as pwe,aA as hwe,aB as mwe,aC as ywe,__tla as gwe}from"./index-uO_BfSNX.js";import vwe,{__tla as bwe}from"./copy-BZ8bvMBQ.js";import xwe,{__tla as wwe}from"./refresh-ccw-DavAjajS.js";import _we,{__tla as jwe}from"./volume-2-B_ZZHNVx.js";let C$,vE,bE,Fh,xE,wE,Ys,Ks,da,Ru,Iu,Bh,_E,jE,ti,EE,SE,CE,OE,$h,ME,NE,kE,PE,AE,TE,RE,Hr,zh,Du,Io,Xs,Vh,Gs,Uh,Hh,IE,DE,LE,O$,FE,BE,Lu,Wh,qh,Yh,Kh,Xh,Gh,Qh,Jh,Zh,em,tm,nm,rm,om,am,$E,im,zE,M$,ht,Qs,Js,fa,pa,sm,VE,N$,cm,lm,um,UE,dm,fm,pm,hm,mm,ym,HE,WE,k$,qE,P$,YE,gm,vm,bm,xm,wm,_m,jm,Zs,ec,ni,ri,A$,KE,XE,GE,Em,Sm,QE,Ae,bn,Yt,JE,Cm,ZE,eS,Om,Mm,ut,tS,nS,rS,oS,Ge,Mn,aS,iS,oi,ha,T$,sS,er,Nm,cS,km,lS,ai,tr,Pm,Am,uS,Er,dS,Tm,Rm,fS,pS,hS,Im,cn,tc,Dm,nc,ii,Ewe=Promise.all([(()=>{try{return gwe}catch{}})(),(()=>{try{return bwe}catch{}})(),(()=>{try{return wwe}catch{}})(),(()=>{try{return jwe}catch{}})()]).then(async()=>{class I$ extends g.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function D$({children:e,isPresent:t}){const n=g.useId(),r=g.useRef(null),o=g.useRef({width:0,height:0,top:0,left:0}),{nonce:a}=g.useContext(dE);return g.useInsertionEffect(()=>{const{width:i,height:s,top:c,left:l}=o.current;if(t||!r.current||!i||!s)return;r.current.dataset.motionPopId=n;const u=document.createElement("style");return a&&(u.nonce=a),document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${i}px !important;
            height: ${s}px !important;
            top: ${c}px !important;
            left: ${l}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[t]),h.jsx(I$,{isPresent:t,childRef:r,sizeRef:o,children:g.cloneElement(e,{ref:r})})}const L$=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:o,presenceAffectsLayout:a,mode:i})=>{const s=Rh(F$),c=g.useId(),l=g.useCallback(d=>{s.set(d,!0);for(const f of s.values())if(!f)return;r&&r()},[s,r]),u=g.useMemo(()=>({id:c,initial:t,isPresent:n,custom:o,onExitComplete:l,register:d=>(s.set(d,!1),()=>s.delete(d))}),a?[Math.random(),l]:[n,l]);return g.useMemo(()=>{s.forEach((d,f)=>s.set(f,!1))},[n]),g.useEffect(()=>{!n&&!s.size&&r&&r()},[n]),i==="popLayout"&&(e=h.jsx(D$,{isPresent:n,children:e})),h.jsx(Bxe.Provider,{value:u,children:e})};function F$(){return new Map}const Fu=e=>e.key||"";function yS(e){const t=[];return g.Children.forEach(e,n=>{g.isValidElement(n)&&t.push(n)}),t}const B$=({children:e,exitBeforeEnter:t,custom:n,initial:r=!0,onExitComplete:o,presenceAffectsLayout:a=!0,mode:i="sync"})=>{const s=g.useMemo(()=>yS(e),[e]),c=s.map(Fu),l=g.useRef(!0),u=g.useRef(s),d=Rh(()=>new Map),[f,p]=g.useState(s),[y,m]=g.useState(s);fE(()=>{l.current=!1,u.current=s;for(let x=0;x<y.length;x++){const _=Fu(y[x]);c.includes(_)?d.delete(_):d.get(_)!==!0&&d.set(_,!1)}},[y,c.length,c.join("-")]);const v=[];if(s!==f){let x=[...s];for(let _=0;_<y.length;_++){const w=y[_],j=Fu(w);c.includes(j)||(x.splice(_,0,w),v.push(w))}i==="wait"&&v.length&&(x=v),m(yS(x)),p(s);return}const{forceRender:b}=g.useContext($xe);return h.jsx(h.Fragment,{children:y.map(x=>{const _=Fu(x),w=s===y||c.includes(_),j=()=>{if(d.has(_))d.set(_,!0);else return;let E=!0;d.forEach(S=>{S||(E=!1)}),E&&(b==null||b(),m(u.current),o&&o())};return h.jsx(L$,{isPresent:w,initial:!l.current||r?void 0:!1,custom:w?void 0:n,presenceAffectsLayout:a,mode:i,onExitComplete:w?void 0:j,children:x},_)})})};function Lm(e){const t=Rh(()=>zxe(e)),{isStatic:n}=g.useContext(dE);if(n){const[,r]=g.useState(e);g.useEffect(()=>t.on("change",r),[])}return t}function gS(e,t){const n=Lm(t()),r=()=>n.set(t());return r(),fE(()=>{const o=()=>h$.preRender(r,!1,!0),a=e.map(i=>i.on("change",o));return()=>{a.forEach(i=>i()),Vxe(r)}}),n}const $$=e=>e&&typeof e=="object"&&e.mix,z$=e=>$$(e)?e.mix:void 0;function V$(...e){const t=!Array.isArray(e[0]),n=t?0:-1,r=e[0+n],o=e[1+n],a=e[2+n],i=e[3+n],s=Uxe(o,a,{mixer:z$(a[0]),...i});return t?s(r):s}function U$(e){pE.current=[],e();const t=gS(pE.current,e);return pE.current=void 0,t}function vS(e,t,n,r){if(typeof e=="function")return U$(e);const o=typeof t=="function"?t:V$(t,n,r);return Array.isArray(e)?bS(e,o):bS([e],([a])=>o(a))}function bS(e,t){const n=Rh(()=>[]);return gS(e,()=>{n.length=0;const r=e.length;for(let o=0;o<r;o++)n[o]=e[o].get();return t(n)})}function xS(e){return typeof e=="number"?e:parseFloat(e)}function H$(e,t={}){const{isStatic:n}=g.useContext(dE),r=g.useRef(null),o=Lm(m$(e)?xS(e.get()):e),a=g.useRef(o.get()),i=g.useRef(()=>{}),s=()=>{const l=r.current;l&&l.time===0&&l.sample(Hxe.delta),c(),r.current=Wxe({keyframes:[o.get(),a.current],velocity:o.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...t,onUpdate:i.current})},c=()=>{r.current&&r.current.stop()};return g.useInsertionEffect(()=>o.attach((l,u)=>n?u(l):(a.current=l,i.current=u,h$.update(s),o.get()),c),[JSON.stringify(t)]),fE(()=>{if(m$(e))return e.on("change",l=>o.set(xS(l)))},[o]),o}var Mt=(e=>(e.Started="started",e.Downloading="downloading",e.Downloaded="downloaded",e.Loading="loading",e.Loaded="loaded",e))(Mt||{}),rc=(e=>(e.LLM="LLM",e.embedding="embedding",e.VLM="VLM",e))(rc||{}),Bu=(e=>(e.WebLLM="WebLLM",e.OpenAI="OpenAI",e))(Bu||{}),Wr=(e=>(e.Started="started",e.Inprogress="inprogress",e.Success="success",e.Failed="failed",e))(Wr||{}),Nn=(e=>(e.Human="human",e.User="user",e.AI="ai",e.System="system",e.Assistant="assistant",e.Tool="tool",e.FewShotExample="few_shot_example",e))(Nn||{}),$u=(e=>(e.Started="started",e.Inprogress="inprogress",e.Done="done",e))($u||{}),kn=(e=>(e.Chat="chat",e.FewShotExample="few_shot_example",e))(kn||{}),si=(e=>(e.VECTOR_DATABASE_RETREIVER="VECTOR_DATABASE_RETREIVER",e))(si||{});let wS,Fm;wS=async(e,t)=>{let n="",r="",o;const a=[];await e;for await(const i of e)i&&(Array.isArray(i)?(a.push(...i.map(s=>s.content)),a!=null&&a.length&&(r=a.join(""),t==null||t({chunk:i,content:r}))):(n=typeof i=="object"&&"content"in i?`${i.content}`:`${i}`,t==null||t({chunk:i,content:n})),o=i);return{lastChunk:o,content:n}},Fm=()=>{const e=Zn(r=>r.toolsCallingStream),t=Zn(r=>r.structuredStream),n=Zn(r=>r.stream);return{stream:g.useCallback(async(r,{tools:o,schemas:a,onMessageUpdate:i,onMessageFinish:s})=>{var d;let c;if(a!=null&&a.length?(a&&(a==null?void 0:a.length)>1&&jr("Multiple schemas are not supported. Only the first schema will be used."),c=t(((d=a==null?void 0:a[0])==null?void 0:d.schema_items)||[],r)):o!=null&&o.length?c=e(o,r):c=n(r),!c)throw new Error("Stream is not supported");const{lastChunk:l,content:u}=await wS(c,i);return s==null||s({content:u,lastChunk:l}),{lastChunk:l,content:u}},[n,t,e])}},km=globalThis||void 0||self;var oc={},_S;function W$(){if(_S)return oc;_S=1,Object.defineProperty(oc,"__esModule",{value:!0}),oc.parse=i,oc.serialize=l;const e=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,t=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,o=Object.prototype.toString,a=(()=>{const f=function(){};return f.prototype=Object.create(null),f})();function i(f,p){const y=new a,m=f.length;if(m<2)return y;const v=(p==null?void 0:p.decode)||u;let b=0;do{const x=f.indexOf("=",b);if(x===-1)break;const _=f.indexOf(";",b),w=_===-1?m:_;if(x>w){b=f.lastIndexOf(";",x-1)+1;continue}const j=s(f,b,x),E=c(f,x,j),S=f.slice(j,E);if(y[S]===void 0){let O=s(f,x+1,w),N=c(f,w,O);const P=v(f.slice(O,N));y[S]=P}b=w+1}while(b<m);return y}function s(f,p,y){do{const m=f.charCodeAt(p);if(m!==32&&m!==9)return p}while(++p<y);return y}function c(f,p,y){for(;p>y;){const m=f.charCodeAt(--p);if(m!==32&&m!==9)return p+1}return y}function l(f,p,y){const m=(y==null?void 0:y.encode)||encodeURIComponent;if(!e.test(f))throw new TypeError(`argument name is invalid: ${f}`);const v=m(p);if(!t.test(v))throw new TypeError(`argument val is invalid: ${p}`);let b=f+"="+v;if(!y)return b;if(y.maxAge!==void 0){if(!Number.isInteger(y.maxAge))throw new TypeError(`option maxAge is invalid: ${y.maxAge}`);b+="; Max-Age="+y.maxAge}if(y.domain){if(!n.test(y.domain))throw new TypeError(`option domain is invalid: ${y.domain}`);b+="; Domain="+y.domain}if(y.path){if(!r.test(y.path))throw new TypeError(`option path is invalid: ${y.path}`);b+="; Path="+y.path}if(y.expires){if(!d(y.expires)||!Number.isFinite(y.expires.valueOf()))throw new TypeError(`option expires is invalid: ${y.expires}`);b+="; Expires="+y.expires.toUTCString()}if(y.httpOnly&&(b+="; HttpOnly"),y.secure&&(b+="; Secure"),y.partitioned&&(b+="; Partitioned"),y.priority)switch(typeof y.priority=="string"?y.priority.toLowerCase():void 0){case"low":b+="; Priority=Low";break;case"medium":b+="; Priority=Medium";break;case"high":b+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${y.priority}`)}if(y.sameSite)switch(typeof y.sameSite=="string"?y.sameSite.toLowerCase():y.sameSite){case!0:case"strict":b+="; SameSite=Strict";break;case"lax":b+="; SameSite=Lax";break;case"none":b+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${y.sameSite}`)}return b}function u(f){if(f.indexOf("%")===-1)return f;try{return decodeURIComponent(f)}catch{return f}}function d(f){return o.call(f)==="[object Date]"}return oc}W$();var jS="popstate";function q$(e={}){function t(r,o){let{pathname:a,search:i,hash:s}=r.location;return ci("",{pathname:a,search:i,hash:s},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(r,o){return typeof o=="string"?o:qr(o)}return SS(t,n,null,e)}function Y$(e={}){function t(o,a){let{pathname:i="/",search:s="",hash:c=""}=Yr(o.location.hash.substring(1));return!i.startsWith("/")&&!i.startsWith(".")&&(i="/"+i),ci("",{pathname:i,search:s,hash:c},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(o,a){let i=o.document.querySelector("base"),s="";if(i&&i.getAttribute("href")){let c=o.location.href,l=c.indexOf("#");s=l===-1?c:c.slice(0,l)}return s+"#"+(typeof a=="string"?a:qr(a))}function r(o,a){Ft(o.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(a)})`)}return SS(t,n,r,e)}function $e(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Ft(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function K$(){return Math.random().toString(36).substring(2,10)}function ES(e,t){return{usr:e.state,key:e.key,idx:t}}function ci(e,t,n=null,r){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Yr(t):t,state:n,key:t&&t.key||r||K$()}}function qr({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Yr(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function SS(e,t,n,r={}){let{window:o=document.defaultView,v5Compat:a=!1}=r,i=o.history,s="POP",c=null,l=u();l==null&&(l=0,i.replaceState({...i.state,idx:l},""));function u(){return(i.state||{idx:null}).idx}function d(){s="POP";let v=u(),b=v==null?null:v-l;l=v,c&&c({action:s,location:m.location,delta:b})}function f(v,b){s="PUSH";let x=ci(m.location,v,b);n&&n(x,v),l=u()+1;let _=ES(x,l),w=m.createHref(x);try{i.pushState(_,"",w)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;o.location.assign(w)}a&&c&&c({action:s,location:m.location,delta:1})}function p(v,b){s="REPLACE";let x=ci(m.location,v,b);n&&n(x,v),l=u();let _=ES(x,l),w=m.createHref(x);i.replaceState(_,"",w),a&&c&&c({action:s,location:m.location,delta:0})}function y(v){let b=o.location.origin!=="null"?o.location.origin:o.location.href,x=typeof v=="string"?v:qr(v);return x=x.replace(/ $/,"%20"),$e(b,`No window.location.(origin|href) available to create URL for href: ${x}`),new URL(x,b)}let m={get action(){return s},get location(){return e(o,i)},listen(v){if(c)throw new Error("A history only accepts one active listener");return o.addEventListener(jS,d),c=v,()=>{o.removeEventListener(jS,d),c=null}},createHref(v){return t(o,v)},createURL:y,encodeLocation(v){let b=y(v);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:f,replace:p,go(v){return i.go(v)}};return m}var X$=new Set(["lazy","caseSensitive","path","id","index","children"]);function G$(e){return e.index===!0}function zu(e,t,n=[],r={}){return e.map((o,a)=>{let i=[...n,String(a)],s=typeof o.id=="string"?o.id:i.join("-");if($e(o.index!==!0||!o.children,"Cannot specify children on an index route"),$e(!r[s],`Found a route id collision on id "${s}".  Route id's must be globally unique within Data Router usages`),G$(o)){let c={...o,...t(o),id:s};return r[s]=c,c}else{let c={...o,...t(o),id:s,children:void 0};return r[s]=c,o.children&&(c.children=zu(o.children,t,i,r)),c}})}function Do(e,t,n="/"){return Vu(e,t,n,!1)}function Vu(e,t,n,r){let o=typeof t=="string"?Yr(t):t,a=nr(o.pathname||"/",n);if(a==null)return null;let i=CS(e);J$(i);let s=null;for(let c=0;s==null&&c<i.length;++c){let l=lz(a);s=sz(i[c],l,r)}return s}function Q$(e,t){let{route:n,pathname:r,params:o}=e;return{id:n.id,pathname:r,params:o,data:t[n.id],handle:n.handle}}function CS(e,t=[],n=[],r=""){let o=(a,i,s)=>{let c={relativePath:s===void 0?a.path||"":s,caseSensitive:a.caseSensitive===!0,childrenIndex:i,route:a};c.relativePath.startsWith("/")&&($e(c.relativePath.startsWith(r),`Absolute route path "${c.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(r.length));let l=Sr([r,c.relativePath]),u=n.concat(c);a.children&&a.children.length>0&&($e(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${l}".`),CS(a.children,t,u,l)),!(a.path==null&&!a.index)&&t.push({path:l,score:az(l,a.index),routesMeta:u})};return e.forEach((a,i)=>{var s;if(a.path===""||!((s=a.path)!=null&&s.includes("?")))o(a,i);else for(let c of OS(a.path))o(a,i,c)}),t}function OS(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,o=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return o?[a,""]:[a];let i=OS(r.join("/")),s=[];return s.push(...i.map(c=>c===""?a:[a,c].join("/"))),o&&s.push(...i),s.map(c=>e.startsWith("/")&&c===""?"/":c)}function J$(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:iz(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var Z$=/^:[\w-]+$/,ez=3,tz=2,nz=1,rz=10,oz=-2,MS=e=>e==="*";function az(e,t){let n=e.split("/"),r=n.length;return n.some(MS)&&(r+=oz),t&&(r+=tz),n.filter(o=>!MS(o)).reduce((o,a)=>o+(Z$.test(a)?ez:a===""?nz:rz),r)}function iz(e,t){return e.length===t.length&&e.slice(0,-1).every((n,r)=>n===t[r])?e[e.length-1]-t[t.length-1]:0}function sz(e,t,n=!1){let{routesMeta:r}=e,o={},a="/",i=[];for(let s=0;s<r.length;++s){let c=r[s],l=s===r.length-1,u=a==="/"?t:t.slice(a.length)||"/",d=Uu({path:c.relativePath,caseSensitive:c.caseSensitive,end:l},u),f=c.route;if(!d&&l&&n&&!r[r.length-1].route.index&&(d=Uu({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},u)),!d)return null;Object.assign(o,d.params),i.push({params:o,pathname:Sr([a,d.pathname]),pathnameBase:fz(Sr([a,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(a=Sr([a,d.pathnameBase]))}return i}function Uu(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=cz(e.path,e.caseSensitive,e.end),o=t.match(n);if(!o)return null;let a=o[0],i=a.replace(/(.)\/+$/,"$1"),s=o.slice(1);return{params:r.reduce((c,{paramName:l,isOptional:u},d)=>{if(l==="*"){let p=s[d]||"";i=a.slice(0,a.length-p.length).replace(/(.)\/+$/,"$1")}const f=s[d];return u&&!f?c[l]=void 0:c[l]=(f||"").replace(/%2F/g,"/"),c},{}),pathname:a,pathnameBase:i,pattern:e}}function cz(e,t=!1,n=!0){Ft(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],o="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,i,s)=>(r.push({paramName:i,isOptional:s!=null}),s?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),o+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":e!==""&&e!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,t?void 0:"i"),r]}function lz(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Ft(!1,`The URL path "${e}" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function nr(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function uz(e,t="/"){let{pathname:n,search:r="",hash:o=""}=typeof e=="string"?Yr(e):e;return{pathname:n?n.startsWith("/")?n:dz(n,t):t,search:pz(r),hash:hz(o)}}function dz(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function Bm(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function NS(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Hu(e){let t=NS(e);return t.map((n,r)=>r===t.length-1?n.pathname:n.pathnameBase)}function Wu(e,t,n,r=!1){let o;typeof e=="string"?o=Yr(e):(o={...e},$e(!o.pathname||!o.pathname.includes("?"),Bm("?","pathname","search",o)),$e(!o.pathname||!o.pathname.includes("#"),Bm("#","pathname","hash",o)),$e(!o.search||!o.search.includes("#"),Bm("#","search","hash",o)));let a=e===""||o.pathname==="",i=a?"/":o.pathname,s;if(i==null)s=n;else{let d=t.length-1;if(!r&&i.startsWith("..")){let f=i.split("/");for(;f[0]==="..";)f.shift(),d-=1;o.pathname=f.join("/")}s=d>=0?t[d]:"/"}let c=uz(o,s),l=i&&i!=="/"&&i.endsWith("/"),u=(a||i===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(l||u)&&(c.pathname+="/"),c}var Sr=e=>e.join("/").replace(/\/\/+/g,"/"),fz=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),pz=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,hz=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,qu=class{constructor(e,t,n,r=!1){this.status=e,this.statusText=t||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function Yu(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var kS=["POST","PUT","PATCH","DELETE"],mz=new Set(kS),yz=["GET",...kS],gz=new Set(yz),vz=new Set([301,302,303,307,308]),bz=new Set([307,308]),$m={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},xz={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},ac={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},zm=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,wz=e=>({hasErrorBoundary:!!e.hasErrorBoundary}),PS="remix-router-transitions",AS=Symbol("ResetLoaderData");function TS(e){const t=e.window?e.window:typeof window<"u"?window:void 0,n=typeof t<"u"&&typeof t.document<"u"&&typeof t.document.createElement<"u";$e(e.routes.length>0,"You must provide a non-empty routes array to createRouter");let r=e.mapRouteProperties||wz,o={},a=zu(e.routes,r,void 0,o),i,s=e.basename||"/",c=e.dataStrategy||Cz,l=e.patchRoutesOnNavigation,u={...e.future},d=null,f=new Set,p=null,y=null,m=null,v=e.hydrationData!=null,b=Do(a,e.history.location,s),x=null;if(b==null&&!l){let z=$n(404,{pathname:e.history.location.pathname}),{matches:K,route:ne}=WS(a);b=K,x={[ne.id]:z}}b&&!e.hydrationData&&je(b,a,e.history.location.pathname).active&&(b=null);let _;if(b)if(b.some(z=>z.route.lazy))_=!1;else if(!b.some(z=>z.route.loader))_=!0;else{let z=e.hydrationData?e.hydrationData.loaderData:null,K=e.hydrationData?e.hydrationData.errors:null;if(K){let ne=b.findIndex(le=>K[le.route.id]!==void 0);_=b.slice(0,ne+1).every(le=>!Um(le.route,z,K))}else _=b.every(ne=>!Um(ne.route,z,K))}else{_=!1,b=[];let z=je(null,a,e.history.location.pathname);z.active&&z.matches&&(b=z.matches)}let w,j={historyAction:e.history.action,location:e.history.location,matches:b,initialized:_,navigation:$m,restoreScrollPosition:e.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||x,fetchers:new Map,blockers:new Map},E="POP",S=!1,O,N=!1,P=new Map,k=null,R=!1,A=!1,C=new Set,M=new Map,T=0,I=-1,L=new Map,D=new Set,$=new Map,U=new Map,F=new Set,H=new Map,Y,G=null;function re(){if(d=e.history.listen(({action:z,location:K,delta:ne})=>{if(Y){Y(),Y=void 0;return}Ft(H.size===0||ne!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let le=Ot({currentLocation:j.location,nextLocation:K,historyAction:z});if(le&&ne!=null){let Se=new Promise(ke=>{Y=ke});e.history.go(ne*-1),Ne(le,{state:"blocked",location:K,proceed(){Ne(le,{state:"proceeding",proceed:void 0,reset:void 0,location:K}),Se.then(()=>e.history.go(ne))},reset(){let ke=new Map(j.blockers);ke.set(le,ac),W({blockers:ke})}});return}return se(z,K)}),n){Lz(t,P);let z=()=>Fz(t,P);t.addEventListener("pagehide",z),k=()=>t.removeEventListener("pagehide",z)}return j.initialized||se("POP",j.location,{initialHydration:!0}),w}function Z(){d&&d(),k&&k(),f.clear(),O&&O.abort(),j.fetchers.forEach((z,K)=>wr(K)),j.blockers.forEach((z,K)=>pe(K))}function q(z){return f.add(z),()=>f.delete(z)}function W(z,K={}){j={...j,...z};let ne=[],le=[];j.fetchers.forEach((Se,ke)=>{Se.state==="idle"&&(F.has(ke)?ne.push(ke):le.push(ke))}),[...f].forEach(Se=>Se(j,{deletedFetchers:ne,viewTransitionOpts:K.viewTransitionOpts,flushSync:K.flushSync===!0})),ne.forEach(Se=>wr(Se)),le.forEach(Se=>j.fetchers.delete(Se))}function J(z,K,{flushSync:ne}={}){var be,De;let le=j.actionData!=null&&j.navigation.formMethod!=null&&rr(j.navigation.formMethod)&&j.navigation.state==="loading"&&((be=z.state)==null?void 0:be._isRedirect)!==!0,Se;K.actionData?Object.keys(K.actionData).length>0?Se=K.actionData:Se=null:le?Se=j.actionData:Se=null;let ke=K.loaderData?US(j.loaderData,K.loaderData,K.matches||[],K.errors):j.loaderData,Ie=j.blockers;Ie.size>0&&(Ie=new Map(Ie),Ie.forEach((Ue,yt)=>Ie.set(yt,ac)));let Ce=S===!0||j.navigation.formMethod!=null&&rr(j.navigation.formMethod)&&((De=z.state)==null?void 0:De._isRedirect)!==!0;i&&(a=i,i=void 0),R||E==="POP"||(E==="PUSH"?e.history.push(z,z.state):E==="REPLACE"&&e.history.replace(z,z.state));let Me;if(E==="POP"){let Ue=P.get(j.location.pathname);Ue&&Ue.has(z.pathname)?Me={currentLocation:j.location,nextLocation:z}:P.has(z.pathname)&&(Me={currentLocation:z,nextLocation:j.location})}else if(N){let Ue=P.get(j.location.pathname);Ue?Ue.add(z.pathname):(Ue=new Set([z.pathname]),P.set(j.location.pathname,Ue)),Me={currentLocation:j.location,nextLocation:z}}W({...K,actionData:Se,loaderData:ke,historyAction:E,location:z,initialized:!0,navigation:$m,revalidation:"idle",restoreScrollPosition:_e(z,K.matches||j.matches),preventScrollReset:Ce,blockers:Ie},{viewTransitionOpts:Me,flushSync:ne===!0}),E="POP",S=!1,N=!1,R=!1,A=!1,G==null||G.resolve(),G=null}async function te(z,K){if(typeof z=="number"){e.history.go(z);return}let ne=Vm(j.location,j.matches,s,z,K==null?void 0:K.fromRouteId,K==null?void 0:K.relative),{path:le,submission:Se,error:ke}=RS(!1,ne,K),Ie=j.location,Ce=ci(j.location,le,K&&K.state);Ce={...Ce,...e.history.encodeLocation(Ce)};let Me=K&&K.replace!=null?K.replace:void 0,be="PUSH";Me===!0?be="REPLACE":Me===!1||Se!=null&&rr(Se.formMethod)&&Se.formAction===j.location.pathname+j.location.search&&(be="REPLACE");let De=K&&"preventScrollReset"in K?K.preventScrollReset===!0:void 0,Ue=(K&&K.flushSync)===!0,yt=Ot({currentLocation:Ie,nextLocation:Ce,historyAction:be});if(yt){Ne(yt,{state:"blocked",location:Ce,proceed(){Ne(yt,{state:"proceeding",proceed:void 0,reset:void 0,location:Ce}),te(z,K)},reset(){let wt=new Map(j.blockers);wt.set(yt,ac),W({blockers:wt})}});return}await se(be,Ce,{submission:Se,pendingError:ke,preventScrollReset:De,replace:K&&K.replace,enableViewTransition:K&&K.viewTransition,flushSync:Ue})}function B(){G||(G=Bz()),Et(),W({revalidation:"loading"});let z=G.promise;return j.navigation.state==="submitting"?z:j.navigation.state==="idle"?(se(j.historyAction,j.location,{startUninterruptedRevalidation:!0}),z):(se(E||j.historyAction,j.navigation.location,{overrideNavigation:j.navigation,enableViewTransition:N===!0}),z)}async function se(z,K,ne){O&&O.abort(),O=null,E=z,R=(ne&&ne.startUninterruptedRevalidation)===!0,we(j.location,j.matches),S=(ne&&ne.preventScrollReset)===!0,N=(ne&&ne.enableViewTransition)===!0;let le=i||a,Se=ne&&ne.overrideNavigation,ke=Do(le,K,s),Ie=(ne&&ne.flushSync)===!0,Ce=je(ke,le,K.pathname);if(Ce.active&&Ce.matches&&(ke=Ce.matches),!ke){let{error:Ke,notFoundMatches:Sn,route:Pt}=xt(K.pathname);J(K,{matches:Sn,loaderData:{},errors:{[Pt.id]:Ke}},{flushSync:Ie});return}if(j.initialized&&!A&&Az(j.location,K)&&!(ne&&ne.submission&&rr(ne.submission.formMethod))){J(K,{matches:ke},{flushSync:Ie});return}O=new AbortController;let Me=li(e.history,K,O.signal,ne&&ne.submission),be;if(ne&&ne.pendingError)be=[ma(ke).route.id,{type:"error",error:ne.pendingError}];else if(ne&&ne.submission&&rr(ne.submission.formMethod)){let Ke=await ce(Me,K,ne.submission,ke,Ce.active,{replace:ne.replace,flushSync:Ie});if(Ke.shortCircuited)return;if(Ke.pendingActionResult){let[Sn,Pt]=Ke.pendingActionResult;if(Pn(Pt)&&Yu(Pt.error)&&Pt.error.status===404){O=null,J(K,{matches:Ke.matches,loaderData:{},errors:{[Sn]:Pt.error}});return}}ke=Ke.matches||ke,be=Ke.pendingActionResult,Se=qm(K,ne.submission),Ie=!1,Ce.active=!1,Me=li(e.history,Me.url,Me.signal)}let{shortCircuited:De,matches:Ue,loaderData:yt,errors:wt}=await ve(Me,K,ke,Ce.active,Se,ne&&ne.submission,ne&&ne.fetcherSubmission,ne&&ne.replace,ne&&ne.initialHydration===!0,Ie,be);De||(O=null,J(K,{matches:Ue||ke,...HS(be),loaderData:yt,errors:wt}))}async function ce(z,K,ne,le,Se,ke={}){Et();let Ie=Iz(K,ne);if(W({navigation:Ie},{flushSync:ke.flushSync===!0}),Se){let be=await Le(le,K.pathname,z.signal);if(be.type==="aborted")return{shortCircuited:!0};if(be.type==="error"){let De=ma(be.partialMatches).route.id;return{matches:be.partialMatches,pendingActionResult:[De,{type:"error",error:be.error}]}}else if(be.matches)le=be.matches;else{let{notFoundMatches:De,error:Ue,route:yt}=xt(K.pathname);return{matches:De,pendingActionResult:[yt.id,{type:"error",error:Ue}]}}}let Ce,Me=ic(le,K);if(!Me.route.action&&!Me.route.lazy)Ce={type:"error",error:$n(405,{method:z.method,pathname:K.pathname,routeId:Me.route.id})};else if(Ce=(await it("action",j,z,[Me],le,null))[Me.route.id],z.signal.aborted)return{shortCircuited:!0};if(ya(Ce)){let be;return ke&&ke.replace!=null?be=ke.replace:be=$S(Ce.response.headers.get("Location"),new URL(z.url),s)===j.location.pathname+j.location.search,await He(z,Ce,!0,{submission:ne,replace:be}),{shortCircuited:!0}}if(Pn(Ce)){let be=ma(le,Me.route.id);return(ke&&ke.replace)!==!0&&(E="PUSH"),{matches:le,pendingActionResult:[be.route.id,Ce]}}return{matches:le,pendingActionResult:[Me.route.id,Ce]}}async function ve(z,K,ne,le,Se,ke,Ie,Ce,Me,be,De){let Ue=Se||qm(K,ke),yt=ke||Ie||XS(Ue),wt=!R&&!Me;if(le){if(wt){let Cn=Te(De);W({navigation:Ue,...Cn!==void 0?{actionData:Cn}:{}},{flushSync:be})}let et=await Le(ne,K.pathname,z.signal);if(et.type==="aborted")return{shortCircuited:!0};if(et.type==="error"){let Cn=ma(et.partialMatches).route.id;return{matches:et.partialMatches,loaderData:{},errors:{[Cn]:et.error}}}else if(et.matches)ne=et.matches;else{let{error:Cn,notFoundMatches:Za,route:Ct}=xt(K.pathname);return{matches:Za,loaderData:{},errors:{[Ct.id]:Cn}}}}let Ke=i||a,[Sn,Pt]=DS(e.history,j,ne,yt,K,Me===!0,A,C,F,$,D,Ke,s,De);if(I=++T,Sn.length===0&&Pt.length===0){let et=X();return J(K,{matches:ne,loaderData:{},errors:De&&Pn(De[1])?{[De[0]]:De[1].error}:null,...HS(De),...et?{fetchers:new Map(j.fetchers)}:{}},{flushSync:be}),{shortCircuited:!0}}if(wt){let et={};if(!le){et.navigation=Ue;let Cn=Te(De);Cn!==void 0&&(et.actionData=Cn)}Pt.length>0&&(et.fetchers=qe(Pt)),W(et,{flushSync:be})}Pt.forEach(et=>{Qn(et.key),et.controller&&M.set(et.key,et.controller)});let Ja=()=>Pt.forEach(et=>Qn(et.key));O&&O.signal.addEventListener("abort",Ja);let{loaderResults:_r,fetcherResults:ua}=await Vt(j,ne,Sn,Pt,z);if(z.signal.aborted)return{shortCircuited:!0};O&&O.signal.removeEventListener("abort",Ja),Pt.forEach(et=>M.delete(et.key));let zr=Ku(_r);if(zr)return await He(z,zr.result,!0,{replace:Ce}),{shortCircuited:!0};if(zr=Ku(ua),zr)return D.add(zr.key),await He(z,zr.result,!0,{replace:Ce}),{shortCircuited:!0};let{loaderData:Eu,errors:Jn}=VS(j,ne,_r,De,Pt,ua);Me&&j.errors&&(Jn={...j.errors,...Jn});let Vs=X(),Us=ee(I),Hs=Vs||Us||Pt.length>0;return{matches:ne,loaderData:Eu,errors:Jn,...Hs?{fetchers:new Map(j.fetchers)}:{}}}function Te(z){if(z&&!Pn(z[1]))return{[z[0]]:z[1].data};if(j.actionData)return Object.keys(j.actionData).length===0?null:j.actionData}function qe(z){return z.forEach(K=>{let ne=j.fetchers.get(K.key),le=sc(void 0,ne?ne.data:void 0);j.fetchers.set(K.key,le)}),new Map(j.fetchers)}async function Ye(z,K,ne,le){Qn(z);let Se=(le&&le.flushSync)===!0,ke=i||a,Ie=Vm(j.location,j.matches,s,ne,K,le==null?void 0:le.relative),Ce=Do(ke,Ie,s),Me=je(Ce,ke,Ie);if(Me.active&&Me.matches&&(Ce=Me.matches),!Ce){Tt(z,K,$n(404,{pathname:Ie}),{flushSync:Se});return}let{path:be,submission:De,error:Ue}=RS(!0,Ie,le);if(Ue){Tt(z,K,Ue,{flushSync:Se});return}let yt=ic(Ce,be),wt=(le&&le.preventScrollReset)===!0;if(De&&rr(De.formMethod)){await ze(z,K,be,yt,Ce,Me.active,Se,wt,De);return}$.set(z,{routeId:K,path:be}),await at(z,K,be,yt,Ce,Me.active,Se,wt,De)}async function ze(z,K,ne,le,Se,ke,Ie,Ce,Me){Et(),$.delete(z);function be(Ct){if(!Ct.route.action&&!Ct.route.lazy){let To=$n(405,{method:Me.formMethod,pathname:ne,routeId:K});return Tt(z,K,To,{flushSync:Ie}),!0}return!1}if(!ke&&be(le))return;let De=j.fetchers.get(z);mt(z,Dz(Me,De),{flushSync:Ie});let Ue=new AbortController,yt=li(e.history,ne,Ue.signal,Me);if(ke){let Ct=await Le(Se,ne,yt.signal);if(Ct.type==="aborted")return;if(Ct.type==="error"){Tt(z,K,Ct.error,{flushSync:Ie});return}else if(Ct.matches){if(Se=Ct.matches,le=ic(Se,ne),be(le))return}else{Tt(z,K,$n(404,{pathname:ne}),{flushSync:Ie});return}}M.set(z,Ue);let wt=T,Ke=(await it("action",j,yt,[le],Se,z))[le.route.id];if(yt.signal.aborted){M.get(z)===Ue&&M.delete(z);return}if(F.has(z)){if(ya(Ke)||Pn(Ke)){mt(z,Lo(void 0));return}}else{if(ya(Ke))if(M.delete(z),I>wt){mt(z,Lo(void 0));return}else return D.add(z),mt(z,sc(Me)),He(yt,Ke,!1,{fetcherSubmission:Me,preventScrollReset:Ce});if(Pn(Ke)){Tt(z,K,Ke.error);return}}let Sn=j.navigation.location||j.location,Pt=li(e.history,Sn,Ue.signal),Ja=i||a,_r=j.navigation.state!=="idle"?Do(Ja,j.navigation.location,s):j.matches;$e(_r,"Didn't find any matches after fetcher action");let ua=++T;L.set(z,ua);let zr=sc(Me,Ke.data);j.fetchers.set(z,zr);let[Eu,Jn]=DS(e.history,j,_r,Me,Sn,!1,A,C,F,$,D,Ja,s,[le.route.id,Ke]);Jn.filter(Ct=>Ct.key!==z).forEach(Ct=>{let To=Ct.key,Th=j.fetchers.get(To),lE=sc(void 0,Th?Th.data:void 0);j.fetchers.set(To,lE),Qn(To),Ct.controller&&M.set(To,Ct.controller)}),W({fetchers:new Map(j.fetchers)});let Vs=()=>Jn.forEach(Ct=>Qn(Ct.key));Ue.signal.addEventListener("abort",Vs);let{loaderResults:Us,fetcherResults:Hs}=await Vt(j,_r,Eu,Jn,Pt);if(Ue.signal.aborted)return;Ue.signal.removeEventListener("abort",Vs),L.delete(z),M.delete(z),Jn.forEach(Ct=>M.delete(Ct.key));let et=Ku(Us);if(et)return He(Pt,et.result,!1,{preventScrollReset:Ce});if(et=Ku(Hs),et)return D.add(et.key),He(Pt,et.result,!1,{preventScrollReset:Ce});let{loaderData:Cn,errors:Za}=VS(j,_r,Us,void 0,Jn,Hs);if(j.fetchers.has(z)){let Ct=Lo(Ke.data);j.fetchers.set(z,Ct)}ee(ua),j.navigation.state==="loading"&&ua>I?($e(E,"Expected pending action"),O&&O.abort(),J(j.navigation.location,{matches:_r,loaderData:Cn,errors:Za,fetchers:new Map(j.fetchers)})):(W({errors:Za,loaderData:US(j.loaderData,Cn,_r,Za),fetchers:new Map(j.fetchers)}),A=!1)}async function at(z,K,ne,le,Se,ke,Ie,Ce,Me){let be=j.fetchers.get(z);mt(z,sc(Me,be?be.data:void 0),{flushSync:Ie});let De=new AbortController,Ue=li(e.history,ne,De.signal);if(ke){let Ke=await Le(Se,ne,Ue.signal);if(Ke.type==="aborted")return;if(Ke.type==="error"){Tt(z,K,Ke.error,{flushSync:Ie});return}else if(Ke.matches)Se=Ke.matches,le=ic(Se,ne);else{Tt(z,K,$n(404,{pathname:ne}),{flushSync:Ie});return}}M.set(z,De);let yt=T,wt=(await it("loader",j,Ue,[le],Se,z))[le.route.id];if(M.get(z)===De&&M.delete(z),!Ue.signal.aborted){if(F.has(z)){mt(z,Lo(void 0));return}if(ya(wt))if(I>yt){mt(z,Lo(void 0));return}else{D.add(z),await He(Ue,wt,!1,{preventScrollReset:Ce});return}if(Pn(wt)){Tt(z,K,wt.error);return}mt(z,Lo(wt.data))}}async function He(z,K,ne,{submission:le,fetcherSubmission:Se,preventScrollReset:ke,replace:Ie}={}){K.response.headers.has("X-Remix-Revalidate")&&(A=!0);let Ce=K.response.headers.get("Location");$e(Ce,"Expected a Location header on the redirect Response"),Ce=$S(Ce,new URL(z.url),s);let Me=ci(j.location,Ce,{_isRedirect:!0});if(n){let Ke=!1;if(K.response.headers.has("X-Remix-Reload-Document"))Ke=!0;else if(zm.test(Ce)){const Sn=e.history.createURL(Ce);Ke=Sn.origin!==t.location.origin||nr(Sn.pathname,s)==null}if(Ke){Ie?t.location.replace(Ce):t.location.assign(Ce);return}}O=null;let be=Ie===!0||K.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:De,formAction:Ue,formEncType:yt}=j.navigation;!le&&!Se&&De&&Ue&&yt&&(le=XS(j.navigation));let wt=le||Se;if(bz.has(K.response.status)&&wt&&rr(wt.formMethod))await se(be,Me,{submission:{...wt,formAction:Ce},preventScrollReset:ke||S,enableViewTransition:ne?N:void 0});else{let Ke=qm(Me,le);await se(be,Me,{overrideNavigation:Ke,fetcherSubmission:Se,preventScrollReset:ke||S,enableViewTransition:ne?N:void 0})}}async function it(z,K,ne,le,Se,ke){let Ie,Ce={};try{Ie=await Oz(c,z,K,ne,le,Se,ke,o,r)}catch(Me){return le.forEach(be=>{Ce[be.route.id]={type:"error",error:Me}}),Ce}for(let[Me,be]of Object.entries(Ie))if(Tz(be)){let De=be.result;Ce[Me]={type:"redirect",response:kz(De,ne,Me,Se,s)}}else Ce[Me]=await Nz(be);return Ce}async function Vt(z,K,ne,le,Se){let ke=it("loader",z,Se,ne,K,null),Ie=Promise.all(le.map(async be=>{if(be.matches&&be.match&&be.controller){let De=(await it("loader",z,li(e.history,be.path,be.controller.signal),[be.match],be.matches,be.key))[be.match.route.id];return{[be.key]:De}}else return Promise.resolve({[be.key]:{type:"error",error:$n(404,{pathname:be.path})}})})),Ce=await ke,Me=(await Ie).reduce((be,De)=>Object.assign(be,De),{});return{loaderResults:Ce,fetcherResults:Me}}function Et(){A=!0,$.forEach((z,K)=>{M.has(K)&&C.add(K),Qn(K)})}function mt(z,K,ne={}){j.fetchers.set(z,K),W({fetchers:new Map(j.fetchers)},{flushSync:(ne&&ne.flushSync)===!0})}function Tt(z,K,ne,le={}){let Se=ma(j.matches,K);wr(z),W({errors:{[Se.route.id]:ne},fetchers:new Map(j.fetchers)},{flushSync:(le&&le.flushSync)===!0})}function gn(z){return U.set(z,(U.get(z)||0)+1),F.has(z)&&F.delete(z),j.fetchers.get(z)||xz}function wr(z){let K=j.fetchers.get(z);M.has(z)&&!(K&&K.state==="loading"&&L.has(z))&&Qn(z),$.delete(z),L.delete(z),D.delete(z),F.delete(z),C.delete(z),j.fetchers.delete(z)}function Qa(z){let K=(U.get(z)||0)-1;K<=0?(U.delete(z),F.add(z)):U.set(z,K),W({fetchers:new Map(j.fetchers)})}function Qn(z){let K=M.get(z);K&&(K.abort(),M.delete(z))}function la(z){for(let K of z){let ne=gn(K),le=Lo(ne.data);j.fetchers.set(K,le)}}function X(){let z=[],K=!1;for(let ne of D){let le=j.fetchers.get(ne);$e(le,`Expected fetcher: ${ne}`),le.state==="loading"&&(D.delete(ne),z.push(ne),K=!0)}return la(z),K}function ee(z){let K=[];for(let[ne,le]of L)if(le<z){let Se=j.fetchers.get(ne);$e(Se,`Expected fetcher: ${ne}`),Se.state==="loading"&&(Qn(ne),L.delete(ne),K.push(ne))}return la(K),K.length>0}function ie(z,K){let ne=j.blockers.get(z)||ac;return H.get(z)!==K&&H.set(z,K),ne}function pe(z){j.blockers.delete(z),H.delete(z)}function Ne(z,K){let ne=j.blockers.get(z)||ac;$e(ne.state==="unblocked"&&K.state==="blocked"||ne.state==="blocked"&&K.state==="blocked"||ne.state==="blocked"&&K.state==="proceeding"||ne.state==="blocked"&&K.state==="unblocked"||ne.state==="proceeding"&&K.state==="unblocked",`Invalid blocker state transition: ${ne.state} -> ${K.state}`);let le=new Map(j.blockers);le.set(z,K),W({blockers:le})}function Ot({currentLocation:z,nextLocation:K,historyAction:ne}){if(H.size===0)return;H.size>1&&Ft(!1,"A router only supports one blocker at a time");let le=Array.from(H.entries()),[Se,ke]=le[le.length-1],Ie=j.blockers.get(Se);if(!(Ie&&Ie.state==="proceeding")&&ke({currentLocation:z,nextLocation:K,historyAction:ne}))return Se}function xt(z){let K=$n(404,{pathname:z}),ne=i||a,{matches:le,route:Se}=WS(ne);return{notFoundMatches:le,route:Se,error:K}}function Be(z,K,ne){if(p=z,m=K,y=ne||null,!v&&j.navigation===$m){v=!0;let le=_e(j.location,j.matches);le!=null&&W({restoreScrollPosition:le})}return()=>{p=null,m=null,y=null}}function ge(z,K){return y&&y(z,K.map(ne=>Q$(ne,j.loaderData)))||z.key}function we(z,K){if(p&&m){let ne=ge(z,K);p[ne]=m()}}function _e(z,K){if(p){let ne=ge(z,K),le=p[ne];if(typeof le=="number")return le}return null}function je(z,K,ne){if(l)if(z){if(Object.keys(z[0].params).length>0)return{active:!0,matches:Vu(K,ne,s,!0)}}else return{active:!0,matches:Vu(K,ne,s,!0)||[]};return{active:!1,matches:null}}async function Le(z,K,ne){if(!l)return{type:"success",matches:z};let le=z;for(;;){let Se=i==null,ke=i||a,Ie=o;try{await l({path:K,matches:le,patch:(be,De)=>{ne.aborted||FS(be,De,ke,Ie,r)}})}catch(be){return{type:"error",error:be,partialMatches:le}}finally{Se&&!ne.aborted&&(a=[...a])}if(ne.aborted)return{type:"aborted"};let Ce=Do(ke,K,s);if(Ce)return{type:"success",matches:Ce};let Me=Vu(ke,K,s,!0);if(!Me||le.length===Me.length&&le.every((be,De)=>be.route.id===Me[De].route.id))return{type:"success",matches:null};le=Me}}function ct(z){o={},i=zu(z,r,void 0,o)}function St(z,K){let ne=i==null;FS(z,K,i||a,o,r),ne&&(a=[...a],W({}))}return w={get basename(){return s},get future(){return u},get state(){return j},get routes(){return a},get window(){return t},initialize:re,subscribe:q,enableScrollRestoration:Be,navigate:te,fetch:Ye,revalidate:B,createHref:z=>e.history.createHref(z),encodeLocation:z=>e.history.encodeLocation(z),getFetcher:gn,deleteFetcher:Qa,dispose:Z,getBlocker:ie,deleteBlocker:pe,patchRoutes:St,_internalFetchControllers:M,_internalSetRoutes:ct},w}function _z(e){return e!=null&&("formData"in e&&e.formData!=null||"body"in e&&e.body!==void 0)}function Vm(e,t,n,r,o,a){let i,s;if(o){i=[];for(let l of t)if(i.push(l),l.route.id===o){s=l;break}}else i=t,s=t[t.length-1];let c=Wu(r||".",Hu(i),nr(e.pathname,n)||e.pathname,a==="path");if(r==null&&(c.search=e.search,c.hash=e.hash),(r==null||r===""||r===".")&&s){let l=Wm(c.search);if(s.route.index&&!l)c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index";else if(!s.route.index&&l){let u=new URLSearchParams(c.search),d=u.getAll("index");u.delete("index"),d.filter(p=>p).forEach(p=>u.append("index",p));let f=u.toString();c.search=f?`?${f}`:""}}return n!=="/"&&(c.pathname=c.pathname==="/"?n:Sr([n,c.pathname])),qr(c)}function RS(e,t,n){if(!n||!_z(n))return{path:t};if(n.formMethod&&!Rz(n.formMethod))return{path:t,error:$n(405,{method:n.formMethod})};let r=()=>({path:t,error:$n(400,{type:"invalid-body"})}),o=(n.formMethod||"get").toUpperCase(),a=qS(t);if(n.body!==void 0){if(n.formEncType==="text/plain"){if(!rr(o))return r();let u=typeof n.body=="string"?n.body:n.body instanceof FormData||n.body instanceof URLSearchParams?Array.from(n.body.entries()).reduce((d,[f,p])=>`${d}${f}=${p}
`,""):String(n.body);return{path:t,submission:{formMethod:o,formAction:a,formEncType:n.formEncType,formData:void 0,json:void 0,text:u}}}else if(n.formEncType==="application/json"){if(!rr(o))return r();try{let u=typeof n.body=="string"?JSON.parse(n.body):n.body;return{path:t,submission:{formMethod:o,formAction:a,formEncType:n.formEncType,formData:void 0,json:u,text:void 0}}}catch{return r()}}}$e(typeof FormData=="function","FormData is not available in this environment");let i,s;if(n.formData)i=Hm(n.formData),s=n.formData;else if(n.body instanceof FormData)i=Hm(n.body),s=n.body;else if(n.body instanceof URLSearchParams)i=n.body,s=zS(i);else if(n.body==null)i=new URLSearchParams,s=new FormData;else try{i=new URLSearchParams(n.body),s=zS(i)}catch{return r()}let c={formMethod:o,formAction:a,formEncType:n&&n.formEncType||"application/x-www-form-urlencoded",formData:s,json:void 0,text:void 0};if(rr(c.formMethod))return{path:t,submission:c};let l=Yr(t);return e&&l.search&&Wm(l.search)&&i.append("index",""),l.search=`?${i}`,{path:qr(l),submission:c}}function IS(e,t,n=!1){let r=e.findIndex(o=>o.route.id===t);return r>=0?e.slice(0,n?r+1:r):e}function DS(e,t,n,r,o,a,i,s,c,l,u,d,f,p){let y=p?Pn(p[1])?p[1].error:p[1].data:void 0,m=e.createURL(t.location),v=e.createURL(o),b=n;a&&t.errors?b=IS(n,Object.keys(t.errors)[0],!0):p&&Pn(p[1])&&(b=IS(n,p[0]));let x=p?p[1].statusCode:void 0,_=x&&x>=400,w=b.filter((E,S)=>{let{route:O}=E;if(O.lazy)return!0;if(O.loader==null)return!1;if(a)return Um(O,t.loaderData,t.errors);if(jz(t.loaderData,t.matches[S],E))return!0;let N=t.matches[S],P=E;return LS(E,{currentUrl:m,currentParams:N.params,nextUrl:v,nextParams:P.params,...r,actionResult:y,actionStatus:x,defaultShouldRevalidate:_?!1:i||m.pathname+m.search===v.pathname+v.search||m.search!==v.search||Ez(N,P)})}),j=[];return l.forEach((E,S)=>{if(a||!n.some(R=>R.route.id===E.routeId)||c.has(S))return;let O=Do(d,E.path,f);if(!O){j.push({key:S,routeId:E.routeId,path:E.path,matches:null,match:null,controller:null});return}let N=t.fetchers.get(S),P=ic(O,E.path),k=!1;u.has(S)?k=!1:s.has(S)?(s.delete(S),k=!0):N&&N.state!=="idle"&&N.data===void 0?k=i:k=LS(P,{currentUrl:m,currentParams:t.matches[t.matches.length-1].params,nextUrl:v,nextParams:n[n.length-1].params,...r,actionResult:y,actionStatus:x,defaultShouldRevalidate:_?!1:i}),k&&j.push({key:S,routeId:E.routeId,path:E.path,matches:O,match:P,controller:new AbortController})}),[w,j]}function Um(e,t,n){if(e.lazy)return!0;if(!e.loader)return!1;let r=t!=null&&t[e.id]!==void 0,o=n!=null&&n[e.id]!==void 0;return!r&&o?!1:typeof e.loader=="function"&&e.loader.hydrate===!0?!0:!r&&!o}function jz(e,t,n){let r=!t||n.route.id!==t.route.id,o=!e.hasOwnProperty(n.route.id);return r||o}function Ez(e,t){let n=e.route.path;return e.pathname!==t.pathname||n!=null&&n.endsWith("*")&&e.params["*"]!==t.params["*"]}function LS(e,t){if(e.route.shouldRevalidate){let n=e.route.shouldRevalidate(t);if(typeof n=="boolean")return n}return t.defaultShouldRevalidate}function FS(e,t,n,r,o){let a;if(e){let c=r[e];$e(c,`No route found to patch children into: routeId = ${e}`),c.children||(c.children=[]),a=c.children}else a=n;let i=t.filter(c=>!a.some(l=>BS(c,l))),s=zu(i,o,[e||"_","patch",String((a==null?void 0:a.length)||"0")],r);a.push(...s)}function BS(e,t){return"id"in e&&"id"in t&&e.id===t.id?!0:e.index===t.index&&e.path===t.path&&e.caseSensitive===t.caseSensitive?(!e.children||e.children.length===0)&&(!t.children||t.children.length===0)?!0:e.children.every((n,r)=>{var o;return(o=t.children)==null?void 0:o.some(a=>BS(n,a))}):!1}async function Sz(e,t,n){if(!e.lazy)return;let r=await e.lazy();if(!e.lazy)return;let o=n[e.id];$e(o,"No route found in manifest");let a={};for(let i in r){let s=o[i]!==void 0&&i!=="hasErrorBoundary";Ft(!s,`Route "${o.id}" has a static property "${i}" defined but its lazy function is also returning a value for this property. The lazy route property "${i}" will be ignored.`),!s&&!X$.has(i)&&(a[i]=r[i])}Object.assign(o,a),Object.assign(o,{...t(o),lazy:void 0})}async function Cz({matches:e}){let t=e.filter(n=>n.shouldLoad);return(await Promise.all(t.map(n=>n.resolve()))).reduce((n,r,o)=>Object.assign(n,{[t[o].route.id]:r}),{})}async function Oz(e,t,n,r,o,a,i,s,c,l){let u=a.map(p=>p.route.lazy?Sz(p.route,c,s):void 0),d=a.map((p,y)=>{let m=u[y],v=o.some(b=>b.route.id===p.route.id);return{...p,shouldLoad:v,resolve:async b=>(b&&r.method==="GET"&&(p.route.lazy||p.route.loader)&&(v=!0),v?Mz(t,r,p,m,b,l):Promise.resolve({type:"data",result:void 0}))}}),f=await e({matches:d,request:r,params:a[0].params,fetcherKey:i,context:l});try{await Promise.all(u)}catch{}return f}async function Mz(e,t,n,r,o,a){let i,s,c=l=>{let u,d=new Promise((y,m)=>u=m);s=()=>u(),t.signal.addEventListener("abort",s);let f=y=>typeof l!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${e}" [routeId: ${n.route.id}]`)):l({request:t,params:n.params,context:a},...y!==void 0?[y]:[]),p=(async()=>{try{return{type:"data",result:await(o?o(y=>f(y)):f())}}catch(y){return{type:"error",result:y}}})();return Promise.race([p,d])};try{let l=n.route[e];if(r)if(l){let u,[d]=await Promise.all([c(l).catch(f=>{u=f}),r]);if(u!==void 0)throw u;i=d}else if(await r,l=n.route[e],l)i=await c(l);else if(e==="action"){let u=new URL(t.url),d=u.pathname+u.search;throw $n(405,{method:t.method,pathname:d,routeId:n.route.id})}else return{type:"data",result:void 0};else if(l)i=await c(l);else{let u=new URL(t.url),d=u.pathname+u.search;throw $n(404,{pathname:d})}}catch(l){return{type:"error",result:l}}finally{s&&t.signal.removeEventListener("abort",s)}return i}async function Nz(e){var r,o,a,i;let{result:t,type:n}=e;if(KS(t)){let s;try{let c=t.headers.get("Content-Type");c&&/\bapplication\/json\b/.test(c)?t.body==null?s=null:s=await t.json():s=await t.text()}catch(c){return{type:"error",error:c}}return n==="error"?{type:"error",error:new qu(t.status,t.statusText,s),statusCode:t.status,headers:t.headers}:{type:"data",data:s,statusCode:t.status,headers:t.headers}}if(n==="error"){if(YS(t)){if(t.data instanceof Error)return{type:"error",error:t.data,statusCode:(r=t.init)==null?void 0:r.status};t=new qu(((o=t.init)==null?void 0:o.status)||500,void 0,t.data)}return{type:"error",error:t,statusCode:Yu(t)?t.status:void 0}}return YS(t)?{type:"data",data:t.data,statusCode:(a=t.init)==null?void 0:a.status,headers:(i=t.init)!=null&&i.headers?new Headers(t.init.headers):void 0}:{type:"data",data:t}}function kz(e,t,n,r,o){let a=e.headers.get("Location");if($e(a,"Redirects returned/thrown from loaders/actions must have a Location header"),!zm.test(a)){let i=r.slice(0,r.findIndex(s=>s.route.id===n)+1);a=Vm(new URL(t.url),i,o,a),e.headers.set("Location",a)}return e}function $S(e,t,n){if(zm.test(e)){let r=e,o=r.startsWith("//")?new URL(t.protocol+r):new URL(r),a=nr(o.pathname,n)!=null;if(o.origin===t.origin&&a)return o.pathname+o.search+o.hash}return e}function li(e,t,n,r){let o=e.createURL(qS(t)).toString(),a={signal:n};if(r&&rr(r.formMethod)){let{formMethod:i,formEncType:s}=r;a.method=i.toUpperCase(),s==="application/json"?(a.headers=new Headers({"Content-Type":s}),a.body=JSON.stringify(r.json)):s==="text/plain"?a.body=r.text:s==="application/x-www-form-urlencoded"&&r.formData?a.body=Hm(r.formData):a.body=r.formData}return new Request(o,a)}function Hm(e){let t=new URLSearchParams;for(let[n,r]of e.entries())t.append(n,typeof r=="string"?r:r.name);return t}function zS(e){let t=new FormData;for(let[n,r]of e.entries())t.append(n,r);return t}function Pz(e,t,n,r=!1,o=!1){let a={},i=null,s,c=!1,l={},u=n&&Pn(n[1])?n[1].error:void 0;return e.forEach(d=>{if(!(d.route.id in t))return;let f=d.route.id,p=t[f];if($e(!ya(p),"Cannot handle redirect results in processLoaderData"),Pn(p)){let y=p.error;if(u!==void 0&&(y=u,u=void 0),i=i||{},o)i[f]=y;else{let m=ma(e,f);i[m.route.id]==null&&(i[m.route.id]=y)}r||(a[f]=AS),c||(c=!0,s=Yu(p.error)?p.error.status:500),p.headers&&(l[f]=p.headers)}else a[f]=p.data,p.statusCode&&p.statusCode!==200&&!c&&(s=p.statusCode),p.headers&&(l[f]=p.headers)}),u!==void 0&&n&&(i={[n[0]]:u},a[n[0]]=void 0),{loaderData:a,errors:i,statusCode:s||200,loaderHeaders:l}}function VS(e,t,n,r,o,a){let{loaderData:i,errors:s}=Pz(t,n,r);return o.forEach(c=>{let{key:l,match:u,controller:d}=c,f=a[l];if($e(f,"Did not find corresponding fetcher result"),!(d&&d.signal.aborted))if(Pn(f)){let p=ma(e.matches,u==null?void 0:u.route.id);s&&s[p.route.id]||(s={...s,[p.route.id]:f.error}),e.fetchers.delete(l)}else if(ya(f))$e(!1,"Unhandled fetcher revalidation redirect");else{let p=Lo(f.data);e.fetchers.set(l,p)}}),{loaderData:i,errors:s}}function US(e,t,n,r){let o=Object.entries(t).filter(([,a])=>a!==AS).reduce((a,[i,s])=>(a[i]=s,a),{});for(let a of n){let i=a.route.id;if(!t.hasOwnProperty(i)&&e.hasOwnProperty(i)&&a.route.loader&&(o[i]=e[i]),r&&r.hasOwnProperty(i))break}return o}function HS(e){return e?Pn(e[1])?{actionData:{}}:{actionData:{[e[0]]:e[1].data}}:{}}function ma(e,t){return(t?e.slice(0,e.findIndex(n=>n.route.id===t)+1):[...e]).reverse().find(n=>n.route.hasErrorBoundary===!0)||e[0]}function WS(e){let t=e.length===1?e[0]:e.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function $n(e,{pathname:t,routeId:n,method:r,type:o,message:a}={}){let i="Unknown Server Error",s="Unknown @remix-run/router error";return e===400?(i="Bad Request",r&&t&&n?s=`You made a ${r} request to "${t}" but did not provide a \`loader\` for route "${n}", so there is no way to handle the request.`:o==="invalid-body"&&(s="Unable to encode submission body")):e===403?(i="Forbidden",s=`Route "${n}" does not match URL "${t}"`):e===404?(i="Not Found",s=`No route matches URL "${t}"`):e===405&&(i="Method Not Allowed",r&&t&&n?s=`You made a ${r.toUpperCase()} request to "${t}" but did not provide an \`action\` for route "${n}", so there is no way to handle the request.`:r&&(s=`Invalid request method "${r.toUpperCase()}"`)),new qu(e||500,i,new Error(s),!0)}function Ku(e){let t=Object.entries(e);for(let n=t.length-1;n>=0;n--){let[r,o]=t[n];if(ya(o))return{key:r,result:o}}}function qS(e){let t=typeof e=="string"?Yr(e):e;return qr({...t,hash:""})}function Az(e,t){return e.pathname!==t.pathname||e.search!==t.search?!1:e.hash===""?t.hash!=="":e.hash===t.hash?!0:t.hash!==""}function Tz(e){return KS(e.result)&&vz.has(e.result.status)}function Pn(e){return e.type==="error"}function ya(e){return(e&&e.type)==="redirect"}function YS(e){return typeof e=="object"&&e!=null&&"type"in e&&"data"in e&&"init"in e&&e.type==="DataWithResponseInit"}function KS(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.headers=="object"&&typeof e.body<"u"}function Rz(e){return gz.has(e.toUpperCase())}function rr(e){return mz.has(e.toUpperCase())}function Wm(e){return new URLSearchParams(e).getAll("index").some(t=>t==="")}function ic(e,t){let n=typeof t=="string"?Yr(t).search:t.search;if(e[e.length-1].route.index&&Wm(n||""))return e[e.length-1];let r=NS(e);return r[r.length-1]}function XS(e){let{formMethod:t,formAction:n,formEncType:r,text:o,formData:a,json:i}=e;if(!(!t||!n||!r)){if(o!=null)return{formMethod:t,formAction:n,formEncType:r,formData:void 0,json:void 0,text:o};if(a!=null)return{formMethod:t,formAction:n,formEncType:r,formData:a,json:void 0,text:void 0};if(i!==void 0)return{formMethod:t,formAction:n,formEncType:r,formData:void 0,json:i,text:void 0}}}function qm(e,t){return t?{state:"loading",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}:{state:"loading",location:e,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function Iz(e,t){return{state:"submitting",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}}function sc(e,t){return e?{state:"loading",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function Dz(e,t){return{state:"submitting",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t?t.data:void 0}}function Lo(e){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function Lz(e,t){try{let n=e.sessionStorage.getItem(PS);if(n){let r=JSON.parse(n);for(let[o,a]of Object.entries(r||{}))a&&Array.isArray(a)&&t.set(o,new Set(a||[]))}}catch{}}function Fz(e,t){if(t.size>0){let n={};for(let[r,o]of t)n[r]=[...o];try{e.sessionStorage.setItem(PS,JSON.stringify(n))}catch(r){Ft(!1,`Failed to save applied view transitions in sessionStorage (${r}).`)}}}function Bz(){let e,t,n=new Promise((r,o)=>{e=async a=>{r(a);try{await n}catch{}},t=async a=>{o(a);try{await n}catch{}}});return{promise:n,resolve:e,reject:t}}var ga=g.createContext(null);ga.displayName="DataRouter";var cc=g.createContext(null);cc.displayName="DataRouterState";var Ym=g.createContext({isTransitioning:!1});Ym.displayName="ViewTransition";var GS=g.createContext(new Map);GS.displayName="Fetchers";var $z=g.createContext(null);$z.displayName="Await";var or=g.createContext(null);or.displayName="Navigation";var Xu=g.createContext(null);Xu.displayName="Location";var zn=g.createContext({outlet:null,matches:[],isDataRoute:!1});zn.displayName="Route";var Km=g.createContext(null);Km.displayName="RouteError";function zz(e,{relative:t}={}){$e(ui(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=g.useContext(or),{hash:o,pathname:a,search:i}=uc(e,{relative:t}),s=a;return n!=="/"&&(s=a==="/"?n:Sr([n,a])),r.createHref({pathname:s,search:i,hash:o})}function ui(){return g.useContext(Xu)!=null}function Kr(){return $e(ui(),"useLocation() may be used only in the context of a <Router> component."),g.useContext(Xu).location}var QS="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function JS(e){g.useContext(or).static||g.useLayoutEffect(e)}function lc(){let{isDataRoute:e}=g.useContext(zn);return e?n7():Vz()}function Vz(){$e(ui(),"useNavigate() may be used only in the context of a <Router> component.");let e=g.useContext(ga),{basename:t,navigator:n}=g.useContext(or),{matches:r}=g.useContext(zn),{pathname:o}=Kr(),a=JSON.stringify(Hu(r)),i=g.useRef(!1);return JS(()=>{i.current=!0}),g.useCallback((s,c={})=>{if(Ft(i.current,QS),!i.current)return;if(typeof s=="number"){n.go(s);return}let l=Wu(s,JSON.parse(a),o,c.relative==="path");e==null&&t!=="/"&&(l.pathname=l.pathname==="/"?t:Sr([t,l.pathname])),(c.replace?n.replace:n.push)(l,c.state,c)},[t,n,a,o,e])}var Uz=g.createContext(null);function Hz(e){let t=g.useContext(zn).outlet;return t&&g.createElement(Uz.Provider,{value:e},t)}function Wz(){let{matches:e}=g.useContext(zn),t=e[e.length-1];return t?t.params:{}}function uc(e,{relative:t}={}){let{matches:n}=g.useContext(zn),{pathname:r}=Kr(),o=JSON.stringify(Hu(n));return g.useMemo(()=>Wu(e,JSON.parse(o),r,t==="path"),[e,o,r,t])}function qz(e,t,n,r){$e(ui(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=g.useContext(or),{matches:a}=g.useContext(zn),i=a[a.length-1],s=i?i.params:{},c=i?i.pathname:"/",l=i?i.pathnameBase:"/",u=i&&i.route;{let v=u&&u.path||"";tC(c,!u||v.endsWith("*")||v.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${v}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${v}"> to <Route path="${v==="/"?"*":`${v}/*`}">.`)}let d=Kr(),f;f=d;let p=f.pathname||"/",y=p;if(l!=="/"){let v=l.replace(/^\//,"").split("/");y="/"+p.replace(/^\//,"").split("/").slice(v.length).join("/")}let m=Do(e,{pathname:y});return Ft(u||m!=null,`No routes matched location "${f.pathname}${f.search}${f.hash}" `),Ft(m==null||m[m.length-1].route.element!==void 0||m[m.length-1].route.Component!==void 0||m[m.length-1].route.lazy!==void 0,`Matched leaf route at location "${f.pathname}${f.search}${f.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),Qz(m&&m.map(v=>Object.assign({},v,{params:Object.assign({},s,v.params),pathname:Sr([l,o.encodeLocation?o.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?l:Sr([l,o.encodeLocation?o.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),a,n,r)}function Yz(){let e=ZS(),t=Yu(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},i=null;return console.error("Error handled by React Router default ErrorBoundary:",e),i=g.createElement(g.Fragment,null,g.createElement("p",null,"\u{1F4BF} Hey developer \u{1F44B}"),g.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",g.createElement("code",{style:a},"ErrorBoundary")," or"," ",g.createElement("code",{style:a},"errorElement")," prop on your route.")),g.createElement(g.Fragment,null,g.createElement("h2",null,"Unexpected Application Error!"),g.createElement("h3",{style:{fontStyle:"italic"}},t),n?g.createElement("pre",{style:o},n):null,i)}var Kz=g.createElement(Yz,null),Xz=class extends g.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?g.createElement(zn.Provider,{value:this.props.routeContext},g.createElement(Km.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Gz({routeContext:e,match:t,children:n}){let r=g.useContext(ga);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),g.createElement(zn.Provider,{value:e},n)}function Qz(e,t=[],n=null,r=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let o=e,a=n==null?void 0:n.errors;if(a!=null){let c=o.findIndex(l=>l.route.id&&(a==null?void 0:a[l.route.id])!==void 0);$e(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),o=o.slice(0,Math.min(o.length,c+1))}let i=!1,s=-1;if(n)for(let c=0;c<o.length;c++){let l=o[c];if((l.route.HydrateFallback||l.route.hydrateFallbackElement)&&(s=c),l.route.id){let{loaderData:u,errors:d}=n,f=l.route.loader&&!u.hasOwnProperty(l.route.id)&&(!d||d[l.route.id]===void 0);if(l.route.lazy||f){i=!0,s>=0?o=o.slice(0,s+1):o=[o[0]];break}}}return o.reduceRight((c,l,u)=>{let d,f=!1,p=null,y=null;n&&(d=a&&l.route.id?a[l.route.id]:void 0,p=l.route.errorElement||Kz,i&&(s<0&&u===0?(tC("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),f=!0,y=null):s===u&&(f=!0,y=l.route.hydrateFallbackElement||null)));let m=t.concat(o.slice(0,u+1)),v=()=>{let b;return d?b=p:f?b=y:l.route.Component?b=g.createElement(l.route.Component,null):l.route.element?b=l.route.element:b=c,g.createElement(Gz,{match:l,routeContext:{outlet:c,matches:m,isDataRoute:n!=null},children:b})};return n&&(l.route.ErrorBoundary||l.route.errorElement||u===0)?g.createElement(Xz,{location:n.location,revalidation:n.revalidation,component:p,error:d,children:v(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):v()},null)}function Xm(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Jz(e){let t=g.useContext(ga);return $e(t,Xm(e)),t}function Zz(e){let t=g.useContext(cc);return $e(t,Xm(e)),t}function e7(e){let t=g.useContext(zn);return $e(t,Xm(e)),t}function Gm(e){let t=e7(e),n=t.matches[t.matches.length-1];return $e(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function t7(){return Gm("useRouteId")}function ZS(){var r;let e=g.useContext(Km),t=Zz("useRouteError"),n=Gm("useRouteError");return e!==void 0?e:(r=t.errors)==null?void 0:r[n]}function n7(){let{router:e}=Jz("useNavigate"),t=Gm("useNavigate"),n=g.useRef(!1);return JS(()=>{n.current=!0}),g.useCallback(async(r,o={})=>{Ft(n.current,QS),n.current&&(typeof r=="number"?e.navigate(r):await e.navigate(r,{fromRouteId:t,...o}))},[e,t])}var eC={};function tC(e,t,n){!t&&!eC[e]&&(eC[e]=!0,Ft(!1,n))}var nC={};function rC(e,t){!e&&!nC[t]&&(nC[t]=!0,console.warn(t))}function oC(e){let t={hasErrorBoundary:e.hasErrorBoundary||e.ErrorBoundary!=null||e.errorElement!=null};return e.Component&&(e.element&&Ft(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(t,{element:g.createElement(e.Component),Component:void 0})),e.HydrateFallback&&(e.hydrateFallbackElement&&Ft(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(t,{hydrateFallbackElement:g.createElement(e.HydrateFallback),HydrateFallback:void 0})),e.ErrorBoundary&&(e.errorElement&&Ft(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(t,{errorElement:g.createElement(e.ErrorBoundary),ErrorBoundary:void 0})),t}var r7=class{constructor(){this.status="pending",this.promise=new Promise((e,t)=>{this.resolve=n=>{this.status==="pending"&&(this.status="resolved",e(n))},this.reject=n=>{this.status==="pending"&&(this.status="rejected",t(n))}})}};function o7({router:e,flushSync:t}){let[n,r]=g.useState(e.state),[o,a]=g.useState(),[i,s]=g.useState({isTransitioning:!1}),[c,l]=g.useState(),[u,d]=g.useState(),[f,p]=g.useState(),y=g.useRef(new Map),m=g.useCallback((_,{deletedFetchers:w,flushSync:j,viewTransitionOpts:E})=>{w.forEach(O=>y.current.delete(O)),_.fetchers.forEach((O,N)=>{O.data!==void 0&&y.current.set(N,O.data)}),rC(j===!1||t!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let S=e.window!=null&&e.window.document!=null&&typeof e.window.document.startViewTransition=="function";if(rC(E==null||S,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!E||!S){t&&j?t(()=>r(_)):g.startTransition(()=>r(_));return}if(t&&j){t(()=>{u&&(c&&c.resolve(),u.skipTransition()),s({isTransitioning:!0,flushSync:!0,currentLocation:E.currentLocation,nextLocation:E.nextLocation})});let O=e.window.document.startViewTransition(()=>{t(()=>r(_))});O.finished.finally(()=>{t(()=>{l(void 0),d(void 0),a(void 0),s({isTransitioning:!1})})}),t(()=>d(O));return}u?(c&&c.resolve(),u.skipTransition(),p({state:_,currentLocation:E.currentLocation,nextLocation:E.nextLocation})):(a(_),s({isTransitioning:!0,flushSync:!1,currentLocation:E.currentLocation,nextLocation:E.nextLocation}))},[e.window,t,u,c]);g.useLayoutEffect(()=>e.subscribe(m),[e,m]),g.useEffect(()=>{i.isTransitioning&&!i.flushSync&&l(new r7)},[i]),g.useEffect(()=>{if(c&&o&&e.window){let _=o,w=c.promise,j=e.window.document.startViewTransition(async()=>{g.startTransition(()=>r(_)),await w});j.finished.finally(()=>{l(void 0),d(void 0),a(void 0),s({isTransitioning:!1})}),d(j)}},[o,c,e.window]),g.useEffect(()=>{c&&o&&n.location.key===o.location.key&&c.resolve()},[c,u,n.location,o]),g.useEffect(()=>{!i.isTransitioning&&f&&(a(f.state),s({isTransitioning:!0,flushSync:!1,currentLocation:f.currentLocation,nextLocation:f.nextLocation}),p(void 0))},[i.isTransitioning,f]);let v=g.useMemo(()=>({createHref:e.createHref,encodeLocation:e.encodeLocation,go:_=>e.navigate(_),push:(_,w,j)=>e.navigate(_,{state:w,preventScrollReset:j==null?void 0:j.preventScrollReset}),replace:(_,w,j)=>e.navigate(_,{replace:!0,state:w,preventScrollReset:j==null?void 0:j.preventScrollReset})}),[e]),b=e.basename||"/",x=g.useMemo(()=>({router:e,navigator:v,static:!1,basename:b}),[e,v,b]);return g.createElement(g.Fragment,null,g.createElement(ga.Provider,{value:x},g.createElement(cc.Provider,{value:n},g.createElement(GS.Provider,{value:y.current},g.createElement(Ym.Provider,{value:i},g.createElement(l7,{basename:b,location:n.location,navigationType:n.historyAction,navigator:v},g.createElement(a7,{routes:e.routes,future:e.future,state:n})))))),null)}var a7=g.memo(i7);function i7({routes:e,future:t,state:n}){return qz(e,void 0,n,t)}function s7({to:e,replace:t,state:n,relative:r}){$e(ui(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=g.useContext(or);Ft(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=g.useContext(zn),{pathname:i}=Kr(),s=lc(),c=Wu(e,Hu(a),i,r==="path"),l=JSON.stringify(c);return g.useEffect(()=>{s(JSON.parse(l),{replace:t,state:n,relative:r})},[s,l,r,t,n]),null}function c7(e){return Hz(e.context)}function dc(e){$e(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function l7({basename:e="/",children:t=null,location:n,navigationType:r="POP",navigator:o,static:a=!1}){$e(!ui(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let i=e.replace(/^\/*/,"/"),s=g.useMemo(()=>({basename:i,navigator:o,static:a,future:{}}),[i,o,a]);typeof n=="string"&&(n=Yr(n));let{pathname:c="/",search:l="",hash:u="",state:d=null,key:f="default"}=n,p=g.useMemo(()=>{let y=nr(c,i);return y==null?null:{location:{pathname:y,search:l,hash:u,state:d,key:f},navigationType:r}},[i,c,l,u,d,f,r]);return Ft(p!=null,`<Router basename="${i}"> is not able to match the URL "${c}${l}${u}" because it does not start with the basename, so the <Router> won't render anything.`),p==null?null:g.createElement(or.Provider,{value:s},g.createElement(Xu.Provider,{children:t,value:p}))}function Qm(e,t=[]){let n=[];return g.Children.forEach(e,(r,o)=>{if(!g.isValidElement(r))return;let a=[...t,o];if(r.type===g.Fragment){n.push.apply(n,Qm(r.props.children,a));return}$e(r.type===dc,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),$e(!r.props.index||!r.props.children,"An index route cannot have child routes.");let i={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(i.children=Qm(r.props.children,a)),n.push(i)}),n}var u7=Qm,Gu="get",Qu="application/x-www-form-urlencoded";function Ju(e){return e!=null&&typeof e.tagName=="string"}function d7(e){return Ju(e)&&e.tagName.toLowerCase()==="button"}function f7(e){return Ju(e)&&e.tagName.toLowerCase()==="form"}function p7(e){return Ju(e)&&e.tagName.toLowerCase()==="input"}function h7(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function m7(e,t){return e.button===0&&(!t||t==="_self")&&!h7(e)}var Zu=null;function y7(){if(Zu===null)try{new FormData(document.createElement("form"),0),Zu=!1}catch{Zu=!0}return Zu}var g7=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Jm(e){return e!=null&&!g7.has(e)?(Ft(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Qu}"`),null):e}function v7(e,t){let n,r,o,a,i;if(f7(e)){let s=e.getAttribute("action");r=s?nr(s,t):null,n=e.getAttribute("method")||Gu,o=Jm(e.getAttribute("enctype"))||Qu,a=new FormData(e)}else if(d7(e)||p7(e)&&(e.type==="submit"||e.type==="image")){let s=e.form;if(s==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=e.getAttribute("formaction")||s.getAttribute("action");if(r=c?nr(c,t):null,n=e.getAttribute("formmethod")||s.getAttribute("method")||Gu,o=Jm(e.getAttribute("formenctype"))||Jm(s.getAttribute("enctype"))||Qu,a=new FormData(s,e),!y7()){let{name:l,type:u,value:d}=e;if(u==="image"){let f=l?`${l}.`:"";a.append(`${f}x`,"0"),a.append(`${f}y`,"0")}else l&&a.append(l,d)}}else{if(Ju(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Gu,r=null,o=Qu,i=e}return a&&o==="text/plain"&&(i=a,a=void 0),{action:r,method:n.toLowerCase(),encType:o,formData:a,body:i}}function Zm(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}async function b7(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module).then(async r=>(await r.__tla,r));return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function x7(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function w7(e,t,n){let r=await Promise.all(e.map(async o=>{let a=t.routes[o.route.id];if(a){let i=await b7(a,n);return i.links?i.links():[]}return[]}));return S7(r.flat(1).filter(x7).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function aC(e,t,n,r,o,a){let i=(c,l)=>n[l]?c.route.id!==n[l].route.id:!0,s=(c,l)=>{var u;return n[l].pathname!==c.pathname||((u=n[l].route.path)==null?void 0:u.endsWith("*"))&&n[l].params["*"]!==c.params["*"]};return a==="assets"?t.filter((c,l)=>i(c,l)||s(c,l)):a==="data"?t.filter((c,l)=>{var d;let u=r.routes[c.route.id];if(!u||!u.hasLoader)return!1;if(i(c,l)||s(c,l))return!0;if(c.route.shouldRevalidate){let f=c.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((d=n[0])==null?void 0:d.params)||{},nextUrl:new URL(e,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function _7(e,t){return j7(e.map(n=>{let r=t.routes[n.route.id];if(!r)return[];let o=[r.module];return r.imports&&(o=o.concat(r.imports)),o}).flat(1))}function j7(e){return[...new Set(e)]}function E7(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}function S7(e,t){let n=new Set;return new Set(t),e.reduce((r,o)=>{let a=JSON.stringify(E7(o));return n.has(a)||(n.add(a),r.push({key:a,link:o})),r},[])}function C7(e){let t=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return t.pathname==="/"?t.pathname="_root.data":t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function O7(){let e=g.useContext(ga);return Zm(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function M7(){let e=g.useContext(cc);return Zm(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var ey=g.createContext(void 0);ey.displayName="FrameworkContext";function iC(){let e=g.useContext(ey);return Zm(e,"You must render this element inside a <HydratedRouter> element"),e}function N7(e,t){let n=g.useContext(ey),[r,o]=g.useState(!1),[a,i]=g.useState(!1),{onFocus:s,onBlur:c,onMouseEnter:l,onMouseLeave:u,onTouchStart:d}=t,f=g.useRef(null);g.useEffect(()=>{if(e==="render"&&i(!0),e==="viewport"){let m=b=>{b.forEach(x=>{i(x.isIntersecting)})},v=new IntersectionObserver(m,{threshold:.5});return f.current&&v.observe(f.current),()=>{v.disconnect()}}},[e]),g.useEffect(()=>{if(r){let m=setTimeout(()=>{i(!0)},100);return()=>{clearTimeout(m)}}},[r]);let p=()=>{o(!0)},y=()=>{o(!1),i(!1)};return n?e!=="intent"?[a,f,{}]:[a,f,{onFocus:fc(s,p),onBlur:fc(c,y),onMouseEnter:fc(l,p),onMouseLeave:fc(u,y),onTouchStart:fc(d,p)}]:[!1,f,{}]}function fc(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function k7({page:e,...t}){let{router:n}=O7(),r=g.useMemo(()=>Do(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?g.createElement(A7,{page:e,matches:r,...t}):(console.warn(`Tried to prefetch ${e} but no routes matched.`),null)}function P7(e){let{manifest:t,routeModules:n}=iC(),[r,o]=g.useState([]);return g.useEffect(()=>{let a=!1;return w7(e,t,n).then(i=>{a||o(i)}),()=>{a=!0}},[e,t,n]),r}function A7({page:e,matches:t,...n}){let r=Kr(),{manifest:o,routeModules:a}=iC(),{loaderData:i,matches:s}=M7(),c=g.useMemo(()=>aC(e,t,s,o,r,"data"),[e,t,s,o,r]),l=g.useMemo(()=>aC(e,t,s,o,r,"assets"),[e,t,s,o,r]),u=g.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let p=new Set,y=!1;if(t.forEach(v=>{var x;let b=o.routes[v.route.id];!b||!b.hasLoader||(!c.some(_=>_.route.id===v.route.id)&&v.route.id in i&&((x=a[v.route.id])!=null&&x.shouldRevalidate)||b.hasClientLoader?y=!0:p.add(v.route.id))}),p.size===0)return[];let m=C7(e);return y&&p.size>0&&m.searchParams.set("_routes",t.filter(v=>p.has(v.route.id)).map(v=>v.route.id).join(",")),[m.pathname+m.search]},[i,r,o,c,t,e,a]),d=g.useMemo(()=>_7(l,o),[l,o]),f=P7(l);return g.createElement(g.Fragment,null,u.map(p=>g.createElement("link",{key:p,rel:"prefetch",as:"fetch",href:p,...n})),d.map(p=>g.createElement("link",{key:p,rel:"modulepreload",href:p,...n})),f.map(({key:p,link:y})=>g.createElement("link",{key:p,...y})))}function T7(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var sC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{sC&&(window.__reactRouterVersion="7.0.2")}catch{}function cC(e,t){return TS({basename:t==null?void 0:t.basename,future:t==null?void 0:t.future,history:q$({window:t==null?void 0:t.window}),hydrationData:(t==null?void 0:t.hydrationData)||lC(),routes:e,mapRouteProperties:oC,dataStrategy:t==null?void 0:t.dataStrategy,patchRoutesOnNavigation:t==null?void 0:t.patchRoutesOnNavigation,window:t==null?void 0:t.window}).initialize()}function R7(e,t){return TS({basename:t==null?void 0:t.basename,future:t==null?void 0:t.future,history:Y$({window:t==null?void 0:t.window}),hydrationData:lC(),routes:e,mapRouteProperties:oC,dataStrategy:t==null?void 0:t.dataStrategy,patchRoutesOnNavigation:t==null?void 0:t.patchRoutesOnNavigation,window:t==null?void 0:t.window}).initialize()}function lC(){let e=window==null?void 0:window.__staticRouterHydrationData;return e&&e.errors&&(e={...e,errors:I7(e.errors)}),e}function I7(e){if(!e)return null;let t=Object.entries(e),n={};for(let[r,o]of t)if(o&&o.__type==="RouteErrorResponse")n[r]=new qu(o.status,o.statusText,o.data,o.internal===!0);else if(o&&o.__type==="Error"){if(o.__subType){let a=window[o.__subType];if(typeof a=="function")try{let i=new a(o.message);i.stack="",n[r]=i}catch{}}if(n[r]==null){let a=new Error(o.message);a.stack="",n[r]=a}}else n[r]=o;return n}var uC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,dC=g.forwardRef(function({onClick:e,discover:t="render",prefetch:n="none",relative:r,reloadDocument:o,replace:a,state:i,target:s,to:c,preventScrollReset:l,viewTransition:u,...d},f){let{basename:p}=g.useContext(or),y=typeof c=="string"&&uC.test(c),m,v=!1;if(typeof c=="string"&&y&&(m=c,sC))try{let O=new URL(window.location.href),N=c.startsWith("//")?new URL(O.protocol+c):new URL(c),P=nr(N.pathname,p);N.origin===O.origin&&P!=null?c=P+N.search+N.hash:v=!0}catch{Ft(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let b=zz(c,{relative:r}),[x,_,w]=N7(n,d),j=B7(c,{replace:a,state:i,target:s,preventScrollReset:l,relative:r,viewTransition:u});function E(O){e&&e(O),O.defaultPrevented||j(O)}let S=g.createElement("a",{...d,...w,href:m||b,onClick:v||o?e:E,ref:T7(f,_),target:s,"data-discover":!y&&t==="render"?"true":void 0});return x&&!y?g.createElement(g.Fragment,null,S,g.createElement(k7,{page:b})):S});dC.displayName="Link";var D7=g.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:n="",end:r=!1,style:o,to:a,viewTransition:i,children:s,...c},l){let u=uc(a,{relative:c.relative}),d=Kr(),f=g.useContext(cc),{navigator:p,basename:y}=g.useContext(or),m=f!=null&&H7(u)&&i===!0,v=p.encodeLocation?p.encodeLocation(u).pathname:u.pathname,b=d.pathname,x=f&&f.navigation&&f.navigation.location?f.navigation.location.pathname:null;t||(b=b.toLowerCase(),x=x?x.toLowerCase():null,v=v.toLowerCase()),x&&y&&(x=nr(x,y)||x);const _=v!=="/"&&v.endsWith("/")?v.length-1:v.length;let w=b===v||!r&&b.startsWith(v)&&b.charAt(_)==="/",j=x!=null&&(x===v||!r&&x.startsWith(v)&&x.charAt(v.length)==="/"),E={isActive:w,isPending:j,isTransitioning:m},S=w?e:void 0,O;typeof n=="function"?O=n(E):O=[n,w?"active":null,j?"pending":null,m?"transitioning":null].filter(Boolean).join(" ");let N=typeof o=="function"?o(E):o;return g.createElement(dC,{...c,"aria-current":S,className:O,ref:l,style:N,to:a,viewTransition:i},typeof s=="function"?s(E):s)});D7.displayName="NavLink";var L7=g.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:r,replace:o,state:a,method:i=Gu,action:s,onSubmit:c,relative:l,preventScrollReset:u,viewTransition:d,...f},p)=>{let y=V7(),m=U7(s,{relative:l}),v=i.toLowerCase()==="get"?"get":"post",b=typeof s=="string"&&uC.test(s),x=_=>{if(c&&c(_),_.defaultPrevented)return;_.preventDefault();let w=_.nativeEvent.submitter,j=(w==null?void 0:w.getAttribute("formmethod"))||i;y(w||_.currentTarget,{fetcherKey:t,method:j,navigate:n,replace:o,state:a,relative:l,preventScrollReset:u,viewTransition:d})};return g.createElement("form",{ref:p,method:v,action:m,onSubmit:r?c:x,...f,"data-discover":!b&&e==="render"?"true":void 0})});L7.displayName="Form";function F7(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function fC(e){let t=g.useContext(ga);return $e(t,F7(e)),t}function B7(e,{target:t,replace:n,state:r,preventScrollReset:o,relative:a,viewTransition:i}={}){let s=lc(),c=Kr(),l=uc(e,{relative:a});return g.useCallback(u=>{if(m7(u,t)){u.preventDefault();let d=n!==void 0?n:qr(c)===qr(l);s(e,{replace:d,state:r,preventScrollReset:o,relative:a,viewTransition:i})}},[c,s,l,n,r,t,e,o,a,i])}var $7=0,z7=()=>`__${String(++$7)}__`;function V7(){let{router:e}=fC("useSubmit"),{basename:t}=g.useContext(or),n=t7();return g.useCallback(async(r,o={})=>{let{action:a,method:i,encType:s,formData:c,body:l}=v7(r,t);if(o.navigate===!1){let u=o.fetcherKey||z7();await e.fetch(u,n,o.action||a,{preventScrollReset:o.preventScrollReset,formData:c,body:l,formMethod:o.method||i,formEncType:o.encType||s,flushSync:o.flushSync})}else await e.navigate(o.action||a,{preventScrollReset:o.preventScrollReset,formData:c,body:l,formMethod:o.method||i,formEncType:o.encType||s,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[e,t,n])}function U7(e,{relative:t}={}){let{basename:n}=g.useContext(or),r=g.useContext(zn);$e(r,"useFormAction must be used inside a RouteContext");let[o]=r.matches.slice(-1),a={...uc(e||".",{relative:t})},i=Kr();if(e==null){a.search=i.search;let s=new URLSearchParams(a.search),c=s.getAll("index");if(c.some(l=>l==="")){s.delete("index"),c.filter(u=>u).forEach(u=>s.append("index",u));let l=s.toString();a.search=l?`?${l}`:""}}return(!e||e===".")&&o.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(a.pathname=a.pathname==="/"?n:Sr([n,a.pathname])),qr(a)}function H7(e,t={}){let n=g.useContext(Ym);$e(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=fC("useViewTransitionState"),o=uc(e,{relative:t.relative});if(!n.isTransitioning)return!1;let a=nr(n.currentLocation.pathname,r)||n.currentLocation.pathname,i=nr(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Uu(o.pathname,i)!=null||Uu(o.pathname,a)!=null}new TextEncoder;function W7(e){return g.createElement(o7,{flushSync:Su.flushSync,...e})}var q7=qxe.useId||(()=>{}),Y7=0;ht=function(e){const[t,n]=g.useState(q7());return vn(()=>{n(r=>r??String(Y7++))},[e]),t?`radix-${t}`:""};var ty="Collapsible",[K7,pC]=Bn(ty),[X7,ny]=K7(ty),hC=g.forwardRef((e,t)=>{const{__scopeCollapsible:n,open:r,defaultOpen:o,disabled:a,onOpenChange:i,...s}=e,[c=!1,l]=Zt({prop:r,defaultProp:o,onChange:i});return h.jsx(X7,{scope:n,disabled:a,contentId:ht(),open:c,onOpenToggle:g.useCallback(()=>l(u=>!u),[l]),children:h.jsx(Oe.div,{"data-state":iy(c),"data-disabled":a?"":void 0,...s,ref:t})})});hC.displayName=ty;var mC="CollapsibleTrigger",ry=g.forwardRef((e,t)=>{const{__scopeCollapsible:n,...r}=e,o=ny(mC,n);return h.jsx(Oe.button,{type:"button","aria-controls":o.contentId,"aria-expanded":o.open||!1,"data-state":iy(o.open),"data-disabled":o.disabled?"":void 0,disabled:o.disabled,...r,ref:t,onClick:he(e.onClick,o.onOpenToggle)})});ry.displayName=mC;var oy="CollapsibleContent",ay=g.forwardRef((e,t)=>{const{forceMount:n,...r}=e,o=ny(oy,e.__scopeCollapsible);return h.jsx(On,{present:n||o.open,children:({present:a})=>h.jsx(G7,{...r,ref:t,present:a})})});ay.displayName=oy;var G7=g.forwardRef((e,t)=>{const{__scopeCollapsible:n,present:r,children:o,...a}=e,i=ny(oy,n),[s,c]=g.useState(r),l=g.useRef(null),u=tt(t,l),d=g.useRef(0),f=d.current,p=g.useRef(0),y=p.current,m=i.open||s,v=g.useRef(m),b=g.useRef();return g.useEffect(()=>{const x=requestAnimationFrame(()=>v.current=!1);return()=>cancelAnimationFrame(x)},[]),vn(()=>{const x=l.current;if(x){b.current=b.current||{transitionDuration:x.style.transitionDuration,animationName:x.style.animationName},x.style.transitionDuration="0s",x.style.animationName="none";const _=x.getBoundingClientRect();d.current=_.height,p.current=_.width,v.current||(x.style.transitionDuration=b.current.transitionDuration,x.style.animationName=b.current.animationName),c(r)}},[i.open,r]),h.jsx(Oe.div,{"data-state":iy(i.open),"data-disabled":i.disabled?"":void 0,id:i.contentId,hidden:!m,...a,ref:u,style:{"--radix-collapsible-content-height":f?`${f}px`:void 0,"--radix-collapsible-content-width":y?`${y}px`:void 0,...e.style},children:m&&o})});function iy(e){return e?"open":"closed"}var yC=hC,Q7=ry,J7=ay;const Z7=yC,eV=ry,tV=ay,sy=768;function nV(){const[e,t]=g.useState(void 0);return g.useEffect(()=>{const n=window.matchMedia(`(max-width: ${sy-1}px)`),r=()=>{t(window.innerWidth<sy)};return n.addEventListener("change",r),t(window.innerWidth<sy),()=>n.removeEventListener("change",r)},[]),!!e}let pc;pc=Vr("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),ut=g.forwardRef(({className:e,variant:t,size:n,asChild:r=!1,...o},a)=>{const i=r?Ur:"button";return h.jsx(i,{className:Q(pc({variant:t,size:n,className:e})),ref:a,...o})}),ut.displayName="Button";const ln=g.forwardRef(({className:e,type:t,...n},r)=>h.jsx("input",{type:t,className:Q("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...n}));ln.displayName="Input";var rV="Separator",gC="horizontal",oV=["horizontal","vertical"],vC=g.forwardRef((e,t)=>{const{decorative:n,orientation:r=gC,...o}=e,a=aV(r)?r:gC,i=n?{role:"none"}:{"aria-orientation":a==="vertical"?a:void 0,role:"separator"};return h.jsx(Oe.div,{"data-orientation":a,...i,...o,ref:t})});vC.displayName=rV;function aV(e){return oV.includes(e)}Vh=vC;const hc=g.forwardRef(({className:e,orientation:t="horizontal",decorative:n=!0,...r},o)=>h.jsx(Vh,{ref:o,decorative:n,orientation:t,className:Q("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...r}));hc.displayName=Vh.displayName;var cy="focusScope.autoFocusOnMount",ly="focusScope.autoFocusOnUnmount",bC={bubbles:!1,cancelable:!0},iV="FocusScope",mc=g.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:o,onUnmountAutoFocus:a,...i}=e,[s,c]=g.useState(null),l=Ro(o),u=Ro(a),d=g.useRef(null),f=tt(t,m=>c(m)),p=g.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;g.useEffect(()=>{if(r){let m=function(_){if(p.paused||!s)return;const w=_.target;s.contains(w)?d.current=w:Fo(d.current,{select:!0})},v=function(_){if(p.paused||!s)return;const w=_.relatedTarget;w!==null&&(s.contains(w)||Fo(d.current,{select:!0}))},b=function(_){if(document.activeElement===document.body)for(const w of _)w.removedNodes.length>0&&Fo(s)};document.addEventListener("focusin",m),document.addEventListener("focusout",v);const x=new MutationObserver(b);return s&&x.observe(s,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",m),document.removeEventListener("focusout",v),x.disconnect()}}},[r,s,p.paused]),g.useEffect(()=>{if(s){_C.add(p);const m=document.activeElement;if(!s.contains(m)){const v=new CustomEvent(cy,bC);s.addEventListener(cy,l),s.dispatchEvent(v),v.defaultPrevented||(sV(fV(xC(s)),{select:!0}),document.activeElement===m&&Fo(s))}return()=>{s.removeEventListener(cy,l),setTimeout(()=>{const v=new CustomEvent(ly,bC);s.addEventListener(ly,u),s.dispatchEvent(v),v.defaultPrevented||Fo(m??document.body,{select:!0}),s.removeEventListener(ly,u),_C.remove(p)},0)}}},[s,l,u,p]);const y=g.useCallback(m=>{if(!n&&!r||p.paused)return;const v=m.key==="Tab"&&!m.altKey&&!m.ctrlKey&&!m.metaKey,b=document.activeElement;if(v&&b){const x=m.currentTarget,[_,w]=cV(x);_&&w?!m.shiftKey&&b===w?(m.preventDefault(),n&&Fo(_,{select:!0})):m.shiftKey&&b===_&&(m.preventDefault(),n&&Fo(w,{select:!0})):b===x&&m.preventDefault()}},[n,r,p.paused]);return h.jsx(Oe.div,{tabIndex:-1,...i,ref:f,onKeyDown:y})});mc.displayName=iV;function sV(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(Fo(r,{select:t}),document.activeElement!==n)return}function cV(e){const t=xC(e),n=wC(t,e),r=wC(t.reverse(),e);return[n,r]}function xC(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const o=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||o?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function wC(e,t){for(const n of e)if(!lV(n,{upTo:t}))return n}function lV(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function uV(e){return e instanceof HTMLInputElement&&"select"in e}function Fo(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&uV(e)&&t&&e.select()}}var _C=dV();function dV(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=jC(e,t),e.unshift(t)},remove(t){var n;e=jC(e,t),(n=e[0])==null||n.resume()}}}function jC(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function fV(e){return e.filter(t=>t.tagName!=="A")}var uy=0;function ed(){g.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??EC()),document.body.insertAdjacentElement("beforeend",e[1]??EC()),uy++,()=>{uy===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),uy--}},[])}function EC(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Cr=function(){return Cr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Cr.apply(this,arguments)};function SC(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n}function pV(e,t,n){if(n||arguments.length===2)for(var r=0,o=t.length,a;r<o;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))}var td="right-scroll-bar-position",nd="width-before-scroll-bar",hV="with-scroll-bars-hidden",mV="--removed-body-scroll-bar-size";function dy(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function yV(e,t){var n=g.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var o=n.value;o!==r&&(n.value=r,n.callback(r,o))}}}})[0];return n.callback=t,n.facade}var gV=typeof window<"u"?g.useLayoutEffect:g.useEffect,CC=new WeakMap;function vV(e,t){var n=yV(null,function(r){return e.forEach(function(o){return dy(o,r)})});return gV(function(){var r=CC.get(n);if(r){var o=new Set(r),a=new Set(e),i=n.current;o.forEach(function(s){a.has(s)||dy(s,null)}),a.forEach(function(s){o.has(s)||dy(s,i)})}CC.set(n,e)},[e]),n}function bV(e){return e}function xV(e,t){t===void 0&&(t=bV);var n=[],r=!1,o={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(a){var i=t(a,r);return n.push(i),function(){n=n.filter(function(s){return s!==i})}},assignSyncMedium:function(a){for(r=!0;n.length;){var i=n;n=[],i.forEach(a)}n={push:function(s){return a(s)},filter:function(){return n}}},assignMedium:function(a){r=!0;var i=[];if(n.length){var s=n;n=[],s.forEach(a),i=n}var c=function(){var u=i;i=[],u.forEach(a)},l=function(){return Promise.resolve().then(c)};l(),n={push:function(u){i.push(u),l()},filter:function(u){return i=i.filter(u),n}}}};return o}function wV(e){e===void 0&&(e={});var t=xV(null);return t.options=Cr({async:!0,ssr:!1},e),t}var OC=function(e){var t=e.sideCar,n=SC(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return g.createElement(r,Cr({},n))};OC.isSideCarExport=!0;function _V(e,t){return e.useMedium(t),OC}var MC=wV(),fy=function(){},rd=g.forwardRef(function(e,t){var n=g.useRef(null),r=g.useState({onScrollCapture:fy,onWheelCapture:fy,onTouchMoveCapture:fy}),o=r[0],a=r[1],i=e.forwardProps,s=e.children,c=e.className,l=e.removeScrollBar,u=e.enabled,d=e.shards,f=e.sideCar,p=e.noIsolation,y=e.inert,m=e.allowPinchZoom,v=e.as,b=v===void 0?"div":v,x=e.gapMode,_=SC(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),w=f,j=vV([n,t]),E=Cr(Cr({},_),o);return g.createElement(g.Fragment,null,u&&g.createElement(w,{sideCar:MC,removeScrollBar:l,shards:d,noIsolation:p,inert:y,setCallbacks:a,allowPinchZoom:!!m,lockRef:n,gapMode:x}),i?g.cloneElement(g.Children.only(s),Cr(Cr({},E),{ref:j})):g.createElement(b,Cr({},E,{className:c,ref:j}),s))});rd.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},rd.classNames={fullWidth:nd,zeroRight:td};var jV=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function EV(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=jV();return t&&e.setAttribute("nonce",t),e}function SV(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function CV(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var OV=function(){var e=0,t=null;return{add:function(n){e==0&&(t=EV())&&(SV(t,n),CV(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},MV=function(){var e=OV();return function(t,n){g.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},NC=function(){var e=MV(),t=function(n){var r=n.styles,o=n.dynamic;return e(r,o),null};return t},NV={left:0,top:0,right:0,gap:0},py=function(e){return parseInt(e||"",10)||0},kV=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],o=t[e==="padding"?"paddingRight":"marginRight"];return[py(n),py(r),py(o)]},PV=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return NV;var t=kV(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},AV=NC(),di="data-scroll-locked",TV=function(e,t,n,r){var o=e.left,a=e.top,i=e.right,s=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(hV,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(s,"px ").concat(r,`;
  }
  body[`).concat(di,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(o,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(i,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(s,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(s,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(td,` {
    right: `).concat(s,"px ").concat(r,`;
  }
  
  .`).concat(nd,` {
    margin-right: `).concat(s,"px ").concat(r,`;
  }
  
  .`).concat(td," .").concat(td,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(nd," .").concat(nd,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(di,`] {
    `).concat(mV,": ").concat(s,`px;
  }
`)},kC=function(){var e=parseInt(document.body.getAttribute(di)||"0",10);return isFinite(e)?e:0},RV=function(){g.useEffect(function(){return document.body.setAttribute(di,(kC()+1).toString()),function(){var e=kC()-1;e<=0?document.body.removeAttribute(di):document.body.setAttribute(di,e.toString())}},[])},IV=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,o=r===void 0?"margin":r;RV();var a=g.useMemo(function(){return PV(o)},[o]);return g.createElement(AV,{styles:TV(a,!t,o,n?"":"!important")})},hy=!1;if(typeof window<"u")try{var od=Object.defineProperty({},"passive",{get:function(){return hy=!0,!0}});window.addEventListener("test",od,od),window.removeEventListener("test",od,od)}catch{hy=!1}var fi=hy?{passive:!1}:!1,DV=function(e){return e.tagName==="TEXTAREA"},PC=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!DV(e)&&n[t]==="visible")},LV=function(e){return PC(e,"overflowY")},FV=function(e){return PC(e,"overflowX")},AC=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var o=TC(e,r);if(o){var a=RC(e,r),i=a[1],s=a[2];if(i>s)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},BV=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},$V=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},TC=function(e,t){return e==="v"?LV(t):FV(t)},RC=function(e,t){return e==="v"?BV(t):$V(t)},zV=function(e,t){return e==="h"&&t==="rtl"?-1:1},VV=function(e,t,n,r,o){var a=zV(e,window.getComputedStyle(t).direction),i=a*r,s=n.target,c=t.contains(s),l=!1,u=i>0,d=0,f=0;do{var p=RC(e,s),y=p[0],m=p[1],v=p[2],b=m-v-a*y;(y||b)&&TC(e,s)&&(d+=b,f+=y),s instanceof ShadowRoot?s=s.host:s=s.parentNode}while(!c&&s!==document.body||c&&(t.contains(s)||t===s));return(u&&(Math.abs(d)<1||!o)||!u&&(Math.abs(f)<1||!o))&&(l=!0),l},ad=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},IC=function(e){return[e.deltaX,e.deltaY]},DC=function(e){return e&&"current"in e?e.current:e},UV=function(e,t){return e[0]===t[0]&&e[1]===t[1]},HV=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},WV=0,pi=[];function qV(e){var t=g.useRef([]),n=g.useRef([0,0]),r=g.useRef(),o=g.useState(WV++)[0],a=g.useState(NC)[0],i=g.useRef(e);g.useEffect(function(){i.current=e},[e]),g.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(o));var m=pV([e.lockRef.current],(e.shards||[]).map(DC),!0).filter(Boolean);return m.forEach(function(v){return v.classList.add("allow-interactivity-".concat(o))}),function(){document.body.classList.remove("block-interactivity-".concat(o)),m.forEach(function(v){return v.classList.remove("allow-interactivity-".concat(o))})}}},[e.inert,e.lockRef.current,e.shards]);var s=g.useCallback(function(m,v){if("touches"in m&&m.touches.length===2||m.type==="wheel"&&m.ctrlKey)return!i.current.allowPinchZoom;var b=ad(m),x=n.current,_="deltaX"in m?m.deltaX:x[0]-b[0],w="deltaY"in m?m.deltaY:x[1]-b[1],j,E=m.target,S=Math.abs(_)>Math.abs(w)?"h":"v";if("touches"in m&&S==="h"&&E.type==="range")return!1;var O=AC(S,E);if(!O)return!0;if(O?j=S:(j=S==="v"?"h":"v",O=AC(S,E)),!O)return!1;if(!r.current&&"changedTouches"in m&&(_||w)&&(r.current=j),!j)return!0;var N=r.current||j;return VV(N,v,m,N==="h"?_:w,!0)},[]),c=g.useCallback(function(m){var v=m;if(!(!pi.length||pi[pi.length-1]!==a)){var b="deltaY"in v?IC(v):ad(v),x=t.current.filter(function(j){return j.name===v.type&&(j.target===v.target||v.target===j.shadowParent)&&UV(j.delta,b)})[0];if(x&&x.should){v.cancelable&&v.preventDefault();return}if(!x){var _=(i.current.shards||[]).map(DC).filter(Boolean).filter(function(j){return j.contains(v.target)}),w=_.length>0?s(v,_[0]):!i.current.noIsolation;w&&v.cancelable&&v.preventDefault()}}},[]),l=g.useCallback(function(m,v,b,x){var _={name:m,delta:v,target:b,should:x,shadowParent:YV(b)};t.current.push(_),setTimeout(function(){t.current=t.current.filter(function(w){return w!==_})},1)},[]),u=g.useCallback(function(m){n.current=ad(m),r.current=void 0},[]),d=g.useCallback(function(m){l(m.type,IC(m),m.target,s(m,e.lockRef.current))},[]),f=g.useCallback(function(m){l(m.type,ad(m),m.target,s(m,e.lockRef.current))},[]);g.useEffect(function(){return pi.push(a),e.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:f}),document.addEventListener("wheel",c,fi),document.addEventListener("touchmove",c,fi),document.addEventListener("touchstart",u,fi),function(){pi=pi.filter(function(m){return m!==a}),document.removeEventListener("wheel",c,fi),document.removeEventListener("touchmove",c,fi),document.removeEventListener("touchstart",u,fi)}},[]);var p=e.removeScrollBar,y=e.inert;return g.createElement(g.Fragment,null,y?g.createElement(a,{styles:HV(o)}):null,p?g.createElement(IV,{gapMode:e.gapMode}):null)}function YV(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const KV=_V(MC,qV);var yc=g.forwardRef(function(e,t){return g.createElement(rd,Cr({},e,{ref:t,sideCar:KV}))});yc.classNames=rd.classNames;var XV=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},hi=new WeakMap,id=new WeakMap,sd={},my=0,LC=function(e){return e&&(e.host||LC(e.parentNode))},GV=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=LC(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},QV=function(e,t,n,r){var o=GV(t,Array.isArray(e)?e:[e]);sd[n]||(sd[n]=new WeakMap);var a=sd[n],i=[],s=new Set,c=new Set(o),l=function(d){!d||s.has(d)||(s.add(d),l(d.parentNode))};o.forEach(l);var u=function(d){!d||c.has(d)||Array.prototype.forEach.call(d.children,function(f){if(s.has(f))u(f);else try{var p=f.getAttribute(r),y=p!==null&&p!=="false",m=(hi.get(f)||0)+1,v=(a.get(f)||0)+1;hi.set(f,m),a.set(f,v),i.push(f),m===1&&y&&id.set(f,!0),v===1&&f.setAttribute(n,"true"),y||f.setAttribute(r,"true")}catch(b){console.error("aria-hidden: cannot operate on ",f,b)}})};return u(t),s.clear(),my++,function(){i.forEach(function(d){var f=hi.get(d)-1,p=a.get(d)-1;hi.set(d,f),a.set(d,p),f||(id.has(d)||d.removeAttribute(r),id.delete(d)),p||d.removeAttribute(n)}),my--,my||(hi=new WeakMap,hi=new WeakMap,id=new WeakMap,sd={})}},cd=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),o=XV(e);return o?(r.push.apply(r,Array.from(o.querySelectorAll("[aria-live]"))),QV(r,o,n,"aria-hidden")):function(){return null}},yy="Dialog",[FC,BC]=Bn(yy),[JV,ar]=FC(yy),$C=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:o,onOpenChange:a,modal:i=!0}=e,s=g.useRef(null),c=g.useRef(null),[l=!1,u]=Zt({prop:r,defaultProp:o,onChange:a});return h.jsx(JV,{scope:t,triggerRef:s,contentRef:c,contentId:ht(),titleId:ht(),descriptionId:ht(),open:l,onOpenChange:u,onOpenToggle:g.useCallback(()=>u(d=>!d),[u]),modal:i,children:n})};$C.displayName=yy;var zC="DialogTrigger",VC=g.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=ar(zC,n),a=tt(t,o.triggerRef);return h.jsx(Oe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":by(o.open),...r,ref:a,onClick:he(e.onClick,o.onOpenToggle)})});VC.displayName=zC;var gy="DialogPortal",[ZV,UC]=FC(gy,{forceMount:void 0}),HC=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:o}=e,a=ar(gy,t);return h.jsx(ZV,{scope:t,forceMount:n,children:g.Children.map(r,i=>h.jsx(On,{present:n||a.open,children:h.jsx(Ou,{asChild:!0,container:o,children:i})}))})};HC.displayName=gy;var ld="DialogOverlay",WC=g.forwardRef((e,t)=>{const n=UC(ld,e.__scopeDialog),{forceMount:r=n.forceMount,...o}=e,a=ar(ld,e.__scopeDialog);return a.modal?h.jsx(On,{present:r||a.open,children:h.jsx(eU,{...o,ref:t})}):null});WC.displayName=ld;var eU=g.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=ar(ld,n);return h.jsx(yc,{as:Ur,allowPinchZoom:!0,shards:[o.contentRef],children:h.jsx(Oe.div,{"data-state":by(o.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),va="DialogContent",qC=g.forwardRef((e,t)=>{const n=UC(va,e.__scopeDialog),{forceMount:r=n.forceMount,...o}=e,a=ar(va,e.__scopeDialog);return h.jsx(On,{present:r||a.open,children:a.modal?h.jsx(tU,{...o,ref:t}):h.jsx(nU,{...o,ref:t})})});qC.displayName=va;var tU=g.forwardRef((e,t)=>{const n=ar(va,e.__scopeDialog),r=g.useRef(null),o=tt(t,n.contentRef,r);return g.useEffect(()=>{const a=r.current;if(a)return cd(a)},[]),h.jsx(YC,{...e,ref:o,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:he(e.onCloseAutoFocus,a=>{var i;a.preventDefault(),(i=n.triggerRef.current)==null||i.focus()}),onPointerDownOutside:he(e.onPointerDownOutside,a=>{const i=a.detail.originalEvent,s=i.button===0&&i.ctrlKey===!0;(i.button===2||s)&&a.preventDefault()}),onFocusOutside:he(e.onFocusOutside,a=>a.preventDefault())})}),nU=g.forwardRef((e,t)=>{const n=ar(va,e.__scopeDialog),r=g.useRef(!1),o=g.useRef(!1);return h.jsx(YC,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var i,s;(i=e.onCloseAutoFocus)==null||i.call(e,a),a.defaultPrevented||(r.current||((s=n.triggerRef.current)==null||s.focus()),a.preventDefault()),r.current=!1,o.current=!1},onInteractOutside:a=>{var s,c;(s=e.onInteractOutside)==null||s.call(e,a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const i=a.target;(c=n.triggerRef.current)!=null&&c.contains(i)&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&o.current&&a.preventDefault()}})}),YC=g.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:o,onCloseAutoFocus:a,...i}=e,s=ar(va,n),c=g.useRef(null),l=tt(t,c);return ed(),h.jsxs(h.Fragment,{children:[h.jsx(mc,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:o,onUnmountAutoFocus:a,children:h.jsx(Cu,{role:"dialog",id:s.contentId,"aria-describedby":s.descriptionId,"aria-labelledby":s.titleId,"data-state":by(s.open),...i,ref:l,onDismiss:()=>s.onOpenChange(!1)})}),h.jsxs(h.Fragment,{children:[h.jsx(eO,{titleId:s.titleId}),h.jsx(nO,{contentRef:c,descriptionId:s.descriptionId})]})]})}),vy="DialogTitle",KC=g.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=ar(vy,n);return h.jsx(Oe.h2,{id:o.titleId,...r,ref:t})});KC.displayName=vy;var XC="DialogDescription",GC=g.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=ar(XC,n);return h.jsx(Oe.p,{id:o.descriptionId,...r,ref:t})});GC.displayName=XC;var QC="DialogClose",JC=g.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=ar(QC,n);return h.jsx(Oe.button,{type:"button",...r,ref:t,onClick:he(e.onClick,()=>o.onOpenChange(!1))})});JC.displayName=QC;function by(e){return e?"open":"closed"}let xy,ZC,wy,eO,tO,nO,rO;xy="DialogTitleWarning",[ZC,wy]=Yxe(xy,{contentName:va,titleName:vy,docsSlug:"dialog"}),eO=({titleId:e})=>{const t=wy(xy),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return g.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},tO="DialogDescriptionWarning",nO=({contentRef:e,descriptionId:t})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${wy(tO).contentName}}.`;return g.useEffect(()=>{var o;const r=(o=e.current)==null?void 0:o.getAttribute("aria-describedby");t&&r&&(document.getElementById(t)||console.warn(n))},[n,e,t]),null},Qs=$C,rO=VC,Js=HC,fa=WC,pa=qC,ni=KC,ri=GC,ec=JC;const rU=Qs,oU=Js,oO=g.forwardRef(({className:e,...t},n)=>h.jsx(fa,{className:Q("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));oO.displayName=fa.displayName;const aU=Vr("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),aO=g.forwardRef(({side:e="right",className:t,children:n,...r},o)=>h.jsxs(oU,{children:[h.jsx(oO,{}),h.jsxs(pa,{ref:o,className:Q(aU({side:e}),t),...r,children:[n,h.jsxs(ec,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[h.jsx(de,{name:"x",className:"h-4 w-4"}),h.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));aO.displayName=pa.displayName;const iU=g.forwardRef(({className:e,...t},n)=>h.jsx(ni,{ref:n,className:Q("text-lg font-semibold text-foreground",e),...t}));iU.displayName=ni.displayName;const sU=g.forwardRef(({className:e,...t},n)=>h.jsx(ri,{ref:n,className:Q("text-sm text-muted-foreground",e),...t}));sU.displayName=ri.displayName;function iO({className:e,...t}){return h.jsx("div",{className:Q("animate-pulse rounded-md bg-muted",e),...t})}const cU=["top","right","bottom","left"],Or=Math.min,An=Math.max,ud=Math.round,dd=Math.floor,Bo=e=>({x:e,y:e}),lU={left:"right",right:"left",bottom:"top",top:"bottom"},uU={start:"end",end:"start"};function _y(e,t,n){return An(e,Or(t,n))}function Xr(e,t){return typeof e=="function"?e(t):e}function Gr(e){return e.split("-")[0]}function mi(e){return e.split("-")[1]}function jy(e){return e==="x"?"y":"x"}function Ey(e){return e==="y"?"height":"width"}function $o(e){return["top","bottom"].includes(Gr(e))?"y":"x"}function Sy(e){return jy($o(e))}function dU(e,t,n){n===void 0&&(n=!1);const r=mi(e),o=Sy(e),a=Ey(o);let i=o==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[a]>t.floating[a]&&(i=fd(i)),[i,fd(i)]}function fU(e){const t=fd(e);return[Cy(e),t,Cy(t)]}function Cy(e){return e.replace(/start|end/g,t=>uU[t])}function pU(e,t,n){const r=["left","right"],o=["right","left"],a=["top","bottom"],i=["bottom","top"];switch(e){case"top":case"bottom":return n?t?o:r:t?r:o;case"left":case"right":return t?a:i;default:return[]}}function hU(e,t,n,r){const o=mi(e);let a=pU(Gr(e),n==="start",r);return o&&(a=a.map(i=>i+"-"+o),t&&(a=a.concat(a.map(Cy)))),a}function fd(e){return e.replace(/left|right|bottom|top/g,t=>lU[t])}function mU(e){return{top:0,right:0,bottom:0,left:0,...e}}function sO(e){return typeof e!="number"?mU(e):{top:e,right:e,bottom:e,left:e}}function pd(e){const{x:t,y:n,width:r,height:o}=e;return{width:r,height:o,top:n,left:t,right:t+r,bottom:n+o,x:t,y:n}}function cO(e,t,n){let{reference:r,floating:o}=e;const a=$o(t),i=Sy(t),s=Ey(i),c=Gr(t),l=a==="y",u=r.x+r.width/2-o.width/2,d=r.y+r.height/2-o.height/2,f=r[s]/2-o[s]/2;let p;switch(c){case"top":p={x:u,y:r.y-o.height};break;case"bottom":p={x:u,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:d};break;case"left":p={x:r.x-o.width,y:d};break;default:p={x:r.x,y:r.y}}switch(mi(t)){case"start":p[i]-=f*(n&&l?-1:1);break;case"end":p[i]+=f*(n&&l?-1:1);break}return p}const yU=async(e,t,n)=>{const{placement:r="bottom",strategy:o="absolute",middleware:a=[],platform:i}=n,s=a.filter(Boolean),c=await(i.isRTL==null?void 0:i.isRTL(t));let l=await i.getElementRects({reference:e,floating:t,strategy:o}),{x:u,y:d}=cO(l,r,c),f=r,p={},y=0;for(let m=0;m<s.length;m++){const{name:v,fn:b}=s[m],{x,y:_,data:w,reset:j}=await b({x:u,y:d,initialPlacement:r,placement:f,strategy:o,middlewareData:p,rects:l,platform:i,elements:{reference:e,floating:t}});u=x??u,d=_??d,p={...p,[v]:{...p[v],...w}},j&&y<=50&&(y++,typeof j=="object"&&(j.placement&&(f=j.placement),j.rects&&(l=j.rects===!0?await i.getElementRects({reference:e,floating:t,strategy:o}):j.rects),{x:u,y:d}=cO(l,f,c)),m=-1)}return{x:u,y:d,placement:f,strategy:o,middlewareData:p}};async function gc(e,t){var n;t===void 0&&(t={});const{x:r,y:o,platform:a,rects:i,elements:s,strategy:c}=e,{boundary:l="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:f=!1,padding:p=0}=Xr(t,e),y=sO(p),m=s[f?d==="floating"?"reference":"floating":d],v=pd(await a.getClippingRect({element:(n=await(a.isElement==null?void 0:a.isElement(m)))==null||n?m:m.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(s.floating)),boundary:l,rootBoundary:u,strategy:c})),b=d==="floating"?{x:r,y:o,width:i.floating.width,height:i.floating.height}:i.reference,x=await(a.getOffsetParent==null?void 0:a.getOffsetParent(s.floating)),_=await(a.isElement==null?void 0:a.isElement(x))?await(a.getScale==null?void 0:a.getScale(x))||{x:1,y:1}:{x:1,y:1},w=pd(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:s,rect:b,offsetParent:x,strategy:c}):b);return{top:(v.top-w.top+y.top)/_.y,bottom:(w.bottom-v.bottom+y.bottom)/_.y,left:(v.left-w.left+y.left)/_.x,right:(w.right-v.right+y.right)/_.x}}const gU=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:o,rects:a,platform:i,elements:s,middlewareData:c}=t,{element:l,padding:u=0}=Xr(e,t)||{};if(l==null)return{};const d=sO(u),f={x:n,y:r},p=Sy(o),y=Ey(p),m=await i.getDimensions(l),v=p==="y",b=v?"top":"left",x=v?"bottom":"right",_=v?"clientHeight":"clientWidth",w=a.reference[y]+a.reference[p]-f[p]-a.floating[y],j=f[p]-a.reference[p],E=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l));let S=E?E[_]:0;(!S||!await(i.isElement==null?void 0:i.isElement(E)))&&(S=s.floating[_]||a.floating[y]);const O=w/2-j/2,N=S/2-m[y]/2-1,P=Or(d[b],N),k=Or(d[x],N),R=P,A=S-m[y]-k,C=S/2-m[y]/2+O,M=_y(R,C,A),T=!c.arrow&&mi(o)!=null&&C!==M&&a.reference[y]/2-(C<R?P:k)-m[y]/2<0,I=T?C<R?C-R:C-A:0;return{[p]:f[p]+I,data:{[p]:M,centerOffset:C-M-I,...T&&{alignmentOffset:I}},reset:T}}}),vU=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:o,middlewareData:a,rects:i,initialPlacement:s,platform:c,elements:l}=t,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:m=!0,...v}=Xr(e,t);if((n=a.arrow)!=null&&n.alignmentOffset)return{};const b=Gr(o),x=$o(s),_=Gr(s)===s,w=await(c.isRTL==null?void 0:c.isRTL(l.floating)),j=f||(_||!m?[fd(s)]:fU(s)),E=y!=="none";!f&&E&&j.push(...hU(s,m,y,w));const S=[s,...j],O=await gc(t,v),N=[];let P=((r=a.flip)==null?void 0:r.overflows)||[];if(u&&N.push(O[b]),d){const C=dU(o,i,w);N.push(O[C[0]],O[C[1]])}if(P=[...P,{placement:o,overflows:N}],!N.every(C=>C<=0)){var k,R;const C=(((k=a.flip)==null?void 0:k.index)||0)+1,M=S[C];if(M)return{data:{index:C,overflows:P},reset:{placement:M}};let T=(R=P.filter(I=>I.overflows[0]<=0).sort((I,L)=>I.overflows[1]-L.overflows[1])[0])==null?void 0:R.placement;if(!T)switch(p){case"bestFit":{var A;const I=(A=P.filter(L=>{if(E){const D=$o(L.placement);return D===x||D==="y"}return!0}).map(L=>[L.placement,L.overflows.filter(D=>D>0).reduce((D,$)=>D+$,0)]).sort((L,D)=>L[1]-D[1])[0])==null?void 0:A[0];I&&(T=I);break}case"initialPlacement":T=s;break}if(o!==T)return{reset:{placement:T}}}return{}}}};function lO(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function uO(e){return cU.some(t=>e[t]>=0)}const bU=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...o}=Xr(e,t);switch(r){case"referenceHidden":{const a=await gc(t,{...o,elementContext:"reference"}),i=lO(a,n.reference);return{data:{referenceHiddenOffsets:i,referenceHidden:uO(i)}}}case"escaped":{const a=await gc(t,{...o,altBoundary:!0}),i=lO(a,n.floating);return{data:{escapedOffsets:i,escaped:uO(i)}}}default:return{}}}}};async function xU(e,t){const{placement:n,platform:r,elements:o}=e,a=await(r.isRTL==null?void 0:r.isRTL(o.floating)),i=Gr(n),s=mi(n),c=$o(n)==="y",l=["left","top"].includes(i)?-1:1,u=a&&c?-1:1,d=Xr(t,e);let{mainAxis:f,crossAxis:p,alignmentAxis:y}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...d};return s&&typeof y=="number"&&(p=s==="end"?y*-1:y),c?{x:p*u,y:f*l}:{x:f*l,y:p*u}}const wU=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:o,y:a,placement:i,middlewareData:s}=t,c=await xU(t,e);return i===((n=s.offset)==null?void 0:n.placement)&&(r=s.arrow)!=null&&r.alignmentOffset?{}:{x:o+c.x,y:a+c.y,data:{...c,placement:i}}}}},_U=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:o}=t,{mainAxis:a=!0,crossAxis:i=!1,limiter:s={fn:v=>{let{x:b,y:x}=v;return{x:b,y:x}}},...c}=Xr(e,t),l={x:n,y:r},u=await gc(t,c),d=$o(Gr(o)),f=jy(d);let p=l[f],y=l[d];if(a){const v=f==="y"?"top":"left",b=f==="y"?"bottom":"right",x=p+u[v],_=p-u[b];p=_y(x,p,_)}if(i){const v=d==="y"?"top":"left",b=d==="y"?"bottom":"right",x=y+u[v],_=y-u[b];y=_y(x,y,_)}const m=s.fn({...t,[f]:p,[d]:y});return{...m,data:{x:m.x-n,y:m.y-r}}}}},jU=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:o,rects:a,middlewareData:i}=t,{offset:s=0,mainAxis:c=!0,crossAxis:l=!0}=Xr(e,t),u={x:n,y:r},d=$o(o),f=jy(d);let p=u[f],y=u[d];const m=Xr(s,t),v=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(c){const _=f==="y"?"height":"width",w=a.reference[f]-a.floating[_]+v.mainAxis,j=a.reference[f]+a.reference[_]-v.mainAxis;p<w?p=w:p>j&&(p=j)}if(l){var b,x;const _=f==="y"?"width":"height",w=["top","left"].includes(Gr(o)),j=a.reference[d]-a.floating[_]+(w&&((b=i.offset)==null?void 0:b[d])||0)+(w?0:v.crossAxis),E=a.reference[d]+a.reference[_]+(w?0:((x=i.offset)==null?void 0:x[d])||0)-(w?v.crossAxis:0);y<j?y=j:y>E&&(y=E)}return{[f]:p,[d]:y}}}},EU=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){const{placement:n,rects:r,platform:o,elements:a}=t,{apply:i=()=>{},...s}=Xr(e,t),c=await gc(t,s),l=Gr(n),u=mi(n),d=$o(n)==="y",{width:f,height:p}=r.floating;let y,m;l==="top"||l==="bottom"?(y=l,m=u===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(m=l,y=u==="end"?"top":"bottom");const v=p-c.top-c.bottom,b=f-c.left-c.right,x=Or(p-c[y],v),_=Or(f-c[m],b),w=!t.middlewareData.shift;let j=x,E=_;if(d?E=u||w?Or(_,b):b:j=u||w?Or(x,v):v,w&&!u){const O=An(c.left,0),N=An(c.right,0),P=An(c.top,0),k=An(c.bottom,0);d?E=f-2*(O!==0||N!==0?O+N:An(c.left,c.right)):j=p-2*(P!==0||k!==0?P+k:An(c.top,c.bottom))}await i({...t,availableWidth:E,availableHeight:j});const S=await o.getDimensions(a.floating);return f!==S.width||p!==S.height?{reset:{rects:!0}}:{}}}};function yi(e){return dO(e)?(e.nodeName||"").toLowerCase():"#document"}function Tn(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Qr(e){var t;return(t=(dO(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function dO(e){return e instanceof Node||e instanceof Tn(e).Node}function ir(e){return e instanceof Element||e instanceof Tn(e).Element}function Mr(e){return e instanceof HTMLElement||e instanceof Tn(e).HTMLElement}function fO(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Tn(e).ShadowRoot}function vc(e){const{overflow:t,overflowX:n,overflowY:r,display:o}=sr(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(o)}function SU(e){return["table","td","th"].includes(yi(e))}function hd(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function Oy(e){const t=My(),n=ir(e)?sr(e):e;return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function CU(e){let t=zo(e);for(;Mr(t)&&!gi(t);){if(Oy(t))return t;if(hd(t))return null;t=zo(t)}return null}function My(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function gi(e){return["html","body","#document"].includes(yi(e))}function sr(e){return Tn(e).getComputedStyle(e)}function md(e){return ir(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function zo(e){if(yi(e)==="html")return e;const t=e.assignedSlot||e.parentNode||fO(e)&&e.host||Qr(e);return fO(t)?t.host:t}function pO(e){const t=zo(e);return gi(t)?e.ownerDocument?e.ownerDocument.body:e.body:Mr(t)&&vc(t)?t:pO(t)}function bc(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const o=pO(e),a=o===((r=e.ownerDocument)==null?void 0:r.body),i=Tn(o);if(a){const s=Ny(i);return t.concat(i,i.visualViewport||[],vc(o)?o:[],s&&n?bc(s):[])}return t.concat(o,bc(o,[],n))}function Ny(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function hO(e){const t=sr(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const o=Mr(e),a=o?e.offsetWidth:n,i=o?e.offsetHeight:r,s=ud(n)!==a||ud(r)!==i;return s&&(n=a,r=i),{width:n,height:r,$:s}}function ky(e){return ir(e)?e:e.contextElement}function vi(e){const t=ky(e);if(!Mr(t))return Bo(1);const n=t.getBoundingClientRect(),{width:r,height:o,$:a}=hO(t);let i=(a?ud(n.width):n.width)/r,s=(a?ud(n.height):n.height)/o;return(!i||!Number.isFinite(i))&&(i=1),(!s||!Number.isFinite(s))&&(s=1),{x:i,y:s}}const OU=Bo(0);function mO(e){const t=Tn(e);return!My()||!t.visualViewport?OU:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function MU(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Tn(e)?!1:t}function ba(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const o=e.getBoundingClientRect(),a=ky(e);let i=Bo(1);t&&(r?ir(r)&&(i=vi(r)):i=vi(e));const s=MU(a,n,r)?mO(a):Bo(0);let c=(o.left+s.x)/i.x,l=(o.top+s.y)/i.y,u=o.width/i.x,d=o.height/i.y;if(a){const f=Tn(a),p=r&&ir(r)?Tn(r):r;let y=f,m=Ny(y);for(;m&&r&&p!==y;){const v=vi(m),b=m.getBoundingClientRect(),x=sr(m),_=b.left+(m.clientLeft+parseFloat(x.paddingLeft))*v.x,w=b.top+(m.clientTop+parseFloat(x.paddingTop))*v.y;c*=v.x,l*=v.y,u*=v.x,d*=v.y,c+=_,l+=w,y=Tn(m),m=Ny(y)}}return pd({width:u,height:d,x:c,y:l})}function NU(e){let{elements:t,rect:n,offsetParent:r,strategy:o}=e;const a=o==="fixed",i=Qr(r),s=t?hd(t.floating):!1;if(r===i||s&&a)return n;let c={scrollLeft:0,scrollTop:0},l=Bo(1);const u=Bo(0),d=Mr(r);if((d||!d&&!a)&&((yi(r)!=="body"||vc(i))&&(c=md(r)),Mr(r))){const f=ba(r);l=vi(r),u.x=f.x+r.clientLeft,u.y=f.y+r.clientTop}return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-c.scrollLeft*l.x+u.x,y:n.y*l.y-c.scrollTop*l.y+u.y}}function kU(e){return Array.from(e.getClientRects())}function yO(e){return ba(Qr(e)).left+md(e).scrollLeft}function PU(e){const t=Qr(e),n=md(e),r=e.ownerDocument.body,o=An(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),a=An(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let i=-n.scrollLeft+yO(e);const s=-n.scrollTop;return sr(r).direction==="rtl"&&(i+=An(t.clientWidth,r.clientWidth)-o),{width:o,height:a,x:i,y:s}}function AU(e,t){const n=Tn(e),r=Qr(e),o=n.visualViewport;let a=r.clientWidth,i=r.clientHeight,s=0,c=0;if(o){a=o.width,i=o.height;const l=My();(!l||l&&t==="fixed")&&(s=o.offsetLeft,c=o.offsetTop)}return{width:a,height:i,x:s,y:c}}function TU(e,t){const n=ba(e,!0,t==="fixed"),r=n.top+e.clientTop,o=n.left+e.clientLeft,a=Mr(e)?vi(e):Bo(1),i=e.clientWidth*a.x,s=e.clientHeight*a.y,c=o*a.x,l=r*a.y;return{width:i,height:s,x:c,y:l}}function gO(e,t,n){let r;if(t==="viewport")r=AU(e,n);else if(t==="document")r=PU(Qr(e));else if(ir(t))r=TU(t,n);else{const o=mO(e);r={...t,x:t.x-o.x,y:t.y-o.y}}return pd(r)}function vO(e,t){const n=zo(e);return n===t||!ir(n)||gi(n)?!1:sr(n).position==="fixed"||vO(n,t)}function RU(e,t){const n=t.get(e);if(n)return n;let r=bc(e,[],!1).filter(s=>ir(s)&&yi(s)!=="body"),o=null;const a=sr(e).position==="fixed";let i=a?zo(e):e;for(;ir(i)&&!gi(i);){const s=sr(i),c=Oy(i);!c&&s.position==="fixed"&&(o=null),(a?!c&&!o:!c&&s.position==="static"&&o&&["absolute","fixed"].includes(o.position)||vc(i)&&!c&&vO(e,i))?r=r.filter(l=>l!==i):o=s,i=zo(i)}return t.set(e,r),r}function IU(e){let{element:t,boundary:n,rootBoundary:r,strategy:o}=e;const a=[...n==="clippingAncestors"?hd(t)?[]:RU(t,this._c):[].concat(n),r],i=a[0],s=a.reduce((c,l)=>{const u=gO(t,l,o);return c.top=An(u.top,c.top),c.right=Or(u.right,c.right),c.bottom=Or(u.bottom,c.bottom),c.left=An(u.left,c.left),c},gO(t,i,o));return{width:s.right-s.left,height:s.bottom-s.top,x:s.left,y:s.top}}function DU(e){const{width:t,height:n}=hO(e);return{width:t,height:n}}function LU(e,t,n){const r=Mr(t),o=Qr(t),a=n==="fixed",i=ba(e,!0,a,t);let s={scrollLeft:0,scrollTop:0};const c=Bo(0);if(r||!r&&!a)if((yi(t)!=="body"||vc(o))&&(s=md(t)),r){const d=ba(t,!0,a,t);c.x=d.x+t.clientLeft,c.y=d.y+t.clientTop}else o&&(c.x=yO(o));const l=i.left+s.scrollLeft-c.x,u=i.top+s.scrollTop-c.y;return{x:l,y:u,width:i.width,height:i.height}}function Py(e){return sr(e).position==="static"}function bO(e,t){return!Mr(e)||sr(e).position==="fixed"?null:t?t(e):e.offsetParent}function xO(e,t){const n=Tn(e);if(hd(e))return n;if(!Mr(e)){let o=zo(e);for(;o&&!gi(o);){if(ir(o)&&!Py(o))return o;o=zo(o)}return n}let r=bO(e,t);for(;r&&SU(r)&&Py(r);)r=bO(r,t);return r&&gi(r)&&Py(r)&&!Oy(r)?n:r||CU(e)||n}const FU=async function(e){const t=this.getOffsetParent||xO,n=this.getDimensions,r=await n(e.floating);return{reference:LU(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function BU(e){return sr(e).direction==="rtl"}const $U={convertOffsetParentRelativeRectToViewportRelativeRect:NU,getDocumentElement:Qr,getClippingRect:IU,getOffsetParent:xO,getElementRects:FU,getClientRects:kU,getDimensions:DU,getScale:vi,isElement:ir,isRTL:BU};function zU(e,t){let n=null,r;const o=Qr(e);function a(){var s;clearTimeout(r),(s=n)==null||s.disconnect(),n=null}function i(s,c){s===void 0&&(s=!1),c===void 0&&(c=1),a();const{left:l,top:u,width:d,height:f}=e.getBoundingClientRect();if(s||t(),!d||!f)return;const p=dd(u),y=dd(o.clientWidth-(l+d)),m=dd(o.clientHeight-(u+f)),v=dd(l),b={rootMargin:-p+"px "+-y+"px "+-m+"px "+-v+"px",threshold:An(0,Or(1,c))||1};let x=!0;function _(w){const j=w[0].intersectionRatio;if(j!==c){if(!x)return i();j?i(!1,j):r=setTimeout(()=>{i(!1,1e-7)},1e3)}x=!1}try{n=new IntersectionObserver(_,{...b,root:o.ownerDocument})}catch{n=new IntersectionObserver(_,b)}n.observe(e)}return i(!0),a}RE=function(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:o=!0,ancestorResize:a=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:s=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,l=ky(e),u=o||a?[...l?bc(l):[],...bc(t)]:[];u.forEach(b=>{o&&b.addEventListener("scroll",n,{passive:!0}),a&&b.addEventListener("resize",n)});const d=l&&s?zU(l,n):null;let f=-1,p=null;i&&(p=new ResizeObserver(b=>{let[x]=b;x&&x.target===l&&p&&(p.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var _;(_=p)==null||_.observe(t)})),n()}),l&&!c&&p.observe(l),p.observe(t));let y,m=c?ba(e):null;c&&v();function v(){const b=ba(e);m&&(b.x!==m.x||b.y!==m.y||b.width!==m.width||b.height!==m.height)&&n(),m=b,y=requestAnimationFrame(v)}return n(),()=>{var b;u.forEach(x=>{o&&x.removeEventListener("scroll",n),a&&x.removeEventListener("resize",n)}),d==null||d(),(b=p)==null||b.disconnect(),p=null,c&&cancelAnimationFrame(y)}};let wO;PE=wU,KE=_U,AE=vU,GE=EU,wO=bU,Em=gU,XE=jU,TE=(e,t,n)=>{const r=new Map,o={platform:$U,...n},a={...o.platform,_c:r};return yU(e,t,{...o,platform:a})};var yd=typeof document<"u"?g.useLayoutEffect:g.useEffect;function gd(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,o;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!gd(e[r],t[r]))return!1;return!0}if(o=Object.keys(e),n=o.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,o[r]))return!1;for(r=n;r--!==0;){const a=o[r];if(!(a==="_owner"&&e.$$typeof)&&!gd(e[a],t[a]))return!1}return!0}return e!==e&&t!==t}function _O(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function jO(e,t){const n=_O(e);return Math.round(t*n)/n}function EO(e){const t=g.useRef(e);return yd(()=>{t.current=e}),t}function VU(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:o,elements:{reference:a,floating:i}={},transform:s=!0,whileElementsMounted:c,open:l}=e,[u,d]=g.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[f,p]=g.useState(r);gd(f,r)||p(r);const[y,m]=g.useState(null),[v,b]=g.useState(null),x=g.useCallback(I=>{I!==E.current&&(E.current=I,m(I))},[]),_=g.useCallback(I=>{I!==S.current&&(S.current=I,b(I))},[]),w=a||y,j=i||v,E=g.useRef(null),S=g.useRef(null),O=g.useRef(u),N=c!=null,P=EO(c),k=EO(o),R=g.useCallback(()=>{if(!E.current||!S.current)return;const I={placement:t,strategy:n,middleware:f};k.current&&(I.platform=k.current),TE(E.current,S.current,I).then(L=>{const D={...L,isPositioned:!0};A.current&&!gd(O.current,D)&&(O.current=D,Su.flushSync(()=>{d(D)}))})},[f,t,n,k]);yd(()=>{l===!1&&O.current.isPositioned&&(O.current.isPositioned=!1,d(I=>({...I,isPositioned:!1})))},[l]);const A=g.useRef(!1);yd(()=>(A.current=!0,()=>{A.current=!1}),[]),yd(()=>{if(w&&(E.current=w),j&&(S.current=j),w&&j){if(P.current)return P.current(w,j,R);R()}},[w,j,R,P,N]);const C=g.useMemo(()=>({reference:E,floating:S,setReference:x,setFloating:_}),[x,_]),M=g.useMemo(()=>({reference:w,floating:j}),[w,j]),T=g.useMemo(()=>{const I={position:n,left:0,top:0};if(!M.floating)return I;const L=jO(M.floating,u.x),D=jO(M.floating,u.y);return s?{...I,transform:"translate("+L+"px, "+D+"px)",..._O(M.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:L,top:D}},[n,s,M.floating,u.x,u.y]);return g.useMemo(()=>({...u,update:R,refs:C,elements:M,floatingStyles:T}),[u,R,C,M,T])}const UU=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:o}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?Em({element:r.current,padding:o}).fn(n):{}:r?Em({element:r,padding:o}).fn(n):{}}}},HU=(e,t)=>({...PE(e),options:[e,t]}),WU=(e,t)=>({...KE(e),options:[e,t]}),qU=(e,t)=>({...XE(e),options:[e,t]}),YU=(e,t)=>({...AE(e),options:[e,t]}),KU=(e,t)=>({...GE(e),options:[e,t]}),XU=(e,t)=>({...wO(e),options:[e,t]}),GU=(e,t)=>({...UU(e),options:[e,t]});var QU="Arrow",SO=g.forwardRef((e,t)=>{const{children:n,width:r=10,height:o=5,...a}=e;return h.jsx(Oe.svg,{...a,ref:t,width:r,height:o,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:h.jsx("polygon",{points:"0,0 30,0 15,10"})})});SO.displayName=QU;var JU=SO;function ZU(e,t=[]){let n=[];function r(a,i){const s=g.createContext(i),c=n.length;n=[...n,i];function l(d){const{scope:f,children:p,...y}=d,m=(f==null?void 0:f[e][c])||s,v=g.useMemo(()=>y,Object.values(y));return h.jsx(m.Provider,{value:v,children:p})}function u(d,f){const p=(f==null?void 0:f[e][c])||s,y=g.useContext(p);if(y)return y;if(i!==void 0)return i;throw new Error(`\`${d}\` must be used within \`${a}\``)}return l.displayName=a+"Provider",[l,u]}const o=()=>{const a=n.map(i=>g.createContext(i));return function(i){const s=(i==null?void 0:i[e])||a;return g.useMemo(()=>({[`__scope${e}`]:{...i,[e]:s}}),[i,s])}};return o.scopeName=e,[r,eH(o,...t)]}function eH(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(o){const a=r.reduce((i,{useScope:s,scopeName:c})=>{const l=s(o)[`__scope${c}`];return{...i,...l}},{});return g.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return n.scopeName=t.scopeName,n}function CO(e){const[t,n]=g.useState(void 0);return vn(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(o=>{if(!Array.isArray(o)||!o.length)return;const a=o[0];let i,s;if("borderBoxSize"in a){const c=a.borderBoxSize,l=Array.isArray(c)?c[0]:c;i=l.inlineSize,s=l.blockSize}else i=e.offsetWidth,s=e.offsetHeight;n({width:i,height:s})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var Ay="Popper",[OO,Vo]=ZU(Ay),[tH,MO]=OO(Ay),NO=e=>{const{__scopePopper:t,children:n}=e,[r,o]=g.useState(null);return h.jsx(tH,{scope:t,anchor:r,onAnchorChange:o,children:n})};NO.displayName=Ay;var kO="PopperAnchor",PO=g.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...o}=e,a=MO(kO,n),i=g.useRef(null),s=tt(t,i);return g.useEffect(()=>{a.onAnchorChange((r==null?void 0:r.current)||i.current)}),r?null:h.jsx(Oe.div,{...o,ref:s})});PO.displayName=kO;var Ty="PopperContent",[nH,rH]=OO(Ty),AO=g.forwardRef((e,t)=>{var Z,q,W,J,te,B;const{__scopePopper:n,side:r="bottom",sideOffset:o=0,align:a="center",alignOffset:i=0,arrowPadding:s=0,avoidCollisions:c=!0,collisionBoundary:l=[],collisionPadding:u=0,sticky:d="partial",hideWhenDetached:f=!1,updatePositionStrategy:p="optimized",onPlaced:y,...m}=e,v=MO(Ty,n),[b,x]=g.useState(null),_=tt(t,se=>x(se)),[w,j]=g.useState(null),E=CO(w),S=(E==null?void 0:E.width)??0,O=(E==null?void 0:E.height)??0,N=r+(a!=="center"?"-"+a:""),P=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},k=Array.isArray(l)?l:[l],R=k.length>0,A={padding:P,boundary:k.filter(aH),altBoundary:R},{refs:C,floatingStyles:M,placement:T,isPositioned:I,middlewareData:L}=VU({strategy:"fixed",placement:N,whileElementsMounted:(...se)=>RE(...se,{animationFrame:p==="always"}),elements:{reference:v.anchor},middleware:[HU({mainAxis:o+O,alignmentAxis:i}),c&&WU({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?qU():void 0,...A}),c&&YU({...A}),KU({...A,apply:({elements:se,rects:ce,availableWidth:ve,availableHeight:Te})=>{const{width:qe,height:Ye}=ce.reference,ze=se.floating.style;ze.setProperty("--radix-popper-available-width",`${ve}px`),ze.setProperty("--radix-popper-available-height",`${Te}px`),ze.setProperty("--radix-popper-anchor-width",`${qe}px`),ze.setProperty("--radix-popper-anchor-height",`${Ye}px`)}}),w&&GU({element:w,padding:s}),iH({arrowWidth:S,arrowHeight:O}),f&&XU({strategy:"referenceHidden",...A})]}),[D,$]=IO(T),U=Ro(y);vn(()=>{I&&(U==null||U())},[I,U]);const F=(Z=L.arrow)==null?void 0:Z.x,H=(q=L.arrow)==null?void 0:q.y,Y=((W=L.arrow)==null?void 0:W.centerOffset)!==0,[G,re]=g.useState();return vn(()=>{b&&re(window.getComputedStyle(b).zIndex)},[b]),h.jsx("div",{ref:C.setFloating,"data-radix-popper-content-wrapper":"",style:{...M,transform:I?M.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:G,"--radix-popper-transform-origin":[(J=L.transformOrigin)==null?void 0:J.x,(te=L.transformOrigin)==null?void 0:te.y].join(" "),...((B=L.hide)==null?void 0:B.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:h.jsx(nH,{scope:n,placedSide:D,onArrowChange:j,arrowX:F,arrowY:H,shouldHideArrow:Y,children:h.jsx(Oe.div,{"data-side":D,"data-align":$,...m,ref:_,style:{...m.style,animation:I?void 0:"none"}})})})});AO.displayName=Ty;var TO="PopperArrow",oH={top:"bottom",right:"left",bottom:"top",left:"right"},RO=g.forwardRef(function(e,t){const{__scopePopper:n,...r}=e,o=rH(TO,n),a=oH[o.placedSide];return h.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:h.jsx(JU,{...r,ref:t,style:{...r.style,display:"block"}})})});RO.displayName=TO;function aH(e){return e!==null}var iH=e=>({name:"transformOrigin",options:e,fn(t){var m,v,b;const{placement:n,rects:r,middlewareData:o}=t,a=((m=o.arrow)==null?void 0:m.centerOffset)!==0,i=a?0:e.arrowWidth,s=a?0:e.arrowHeight,[c,l]=IO(n),u={start:"0%",center:"50%",end:"100%"}[l],d=(((v=o.arrow)==null?void 0:v.x)??0)+i/2,f=(((b=o.arrow)==null?void 0:b.y)??0)+s/2;let p="",y="";return c==="bottom"?(p=a?u:`${d}px`,y=`${-s}px`):c==="top"?(p=a?u:`${d}px`,y=`${r.floating.height+s}px`):c==="right"?(p=`${-s}px`,y=a?u:`${f}px`):c==="left"&&(p=`${r.floating.width+s}px`,y=a?u:`${f}px`),{data:{x:p,y}}}});function IO(e){const[t,n="center"]=e.split("-");return[t,n]}var xc=NO,wc=PO,vd=AO,bd=RO,[xd,Swe]=Bn("Tooltip",[Vo]),wd=Vo(),DO="TooltipProvider",sH=700,Ry="tooltip.open",[cH,Iy]=xd(DO),LO=e=>{const{__scopeTooltip:t,delayDuration:n=sH,skipDelayDuration:r=300,disableHoverableContent:o=!1,children:a}=e,[i,s]=g.useState(!0),c=g.useRef(!1),l=g.useRef(0);return g.useEffect(()=>{const u=l.current;return()=>window.clearTimeout(u)},[]),h.jsx(cH,{scope:t,isOpenDelayed:i,delayDuration:n,onOpen:g.useCallback(()=>{window.clearTimeout(l.current),s(!1)},[]),onClose:g.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>s(!0),r)},[r]),isPointerInTransitRef:c,onPointerInTransitChange:g.useCallback(u=>{c.current=u},[]),disableHoverableContent:o,children:a})};LO.displayName=DO;var _d="Tooltip",[lH,_c]=xd(_d),FO=e=>{const{__scopeTooltip:t,children:n,open:r,defaultOpen:o=!1,onOpenChange:a,disableHoverableContent:i,delayDuration:s}=e,c=Iy(_d,e.__scopeTooltip),l=wd(t),[u,d]=g.useState(null),f=ht(),p=g.useRef(0),y=i??c.disableHoverableContent,m=s??c.delayDuration,v=g.useRef(!1),[b=!1,x]=Zt({prop:r,defaultProp:o,onChange:S=>{S?(c.onOpen(),document.dispatchEvent(new CustomEvent(Ry))):c.onClose(),a==null||a(S)}}),_=g.useMemo(()=>b?v.current?"delayed-open":"instant-open":"closed",[b]),w=g.useCallback(()=>{window.clearTimeout(p.current),p.current=0,v.current=!1,x(!0)},[x]),j=g.useCallback(()=>{window.clearTimeout(p.current),p.current=0,x(!1)},[x]),E=g.useCallback(()=>{window.clearTimeout(p.current),p.current=window.setTimeout(()=>{v.current=!0,x(!0),p.current=0},m)},[m,x]);return g.useEffect(()=>()=>{p.current&&(window.clearTimeout(p.current),p.current=0)},[]),h.jsx(xc,{...l,children:h.jsx(lH,{scope:t,contentId:f,open:b,stateAttribute:_,trigger:u,onTriggerChange:d,onTriggerEnter:g.useCallback(()=>{c.isOpenDelayed?E():w()},[c.isOpenDelayed,E,w]),onTriggerLeave:g.useCallback(()=>{y?j():(window.clearTimeout(p.current),p.current=0)},[j,y]),onOpen:w,onClose:j,disableHoverableContent:y,children:n})})};FO.displayName=_d;var Dy="TooltipTrigger",BO=g.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,o=_c(Dy,n),a=Iy(Dy,n),i=wd(n),s=g.useRef(null),c=tt(t,s,o.onTriggerChange),l=g.useRef(!1),u=g.useRef(!1),d=g.useCallback(()=>l.current=!1,[]);return g.useEffect(()=>()=>document.removeEventListener("pointerup",d),[d]),h.jsx(wc,{asChild:!0,...i,children:h.jsx(Oe.button,{"aria-describedby":o.open?o.contentId:void 0,"data-state":o.stateAttribute,...r,ref:c,onPointerMove:he(e.onPointerMove,f=>{f.pointerType!=="touch"&&!u.current&&!a.isPointerInTransitRef.current&&(o.onTriggerEnter(),u.current=!0)}),onPointerLeave:he(e.onPointerLeave,()=>{o.onTriggerLeave(),u.current=!1}),onPointerDown:he(e.onPointerDown,()=>{l.current=!0,document.addEventListener("pointerup",d,{once:!0})}),onFocus:he(e.onFocus,()=>{l.current||o.onOpen()}),onBlur:he(e.onBlur,o.onClose),onClick:he(e.onClick,o.onClose)})})});BO.displayName=Dy;var Ly="TooltipPortal",[uH,dH]=xd(Ly,{forceMount:void 0}),$O=e=>{const{__scopeTooltip:t,forceMount:n,children:r,container:o}=e,a=_c(Ly,t);return h.jsx(uH,{scope:t,forceMount:n,children:h.jsx(On,{present:n||a.open,children:h.jsx(Ou,{asChild:!0,container:o,children:r})})})};$O.displayName=Ly;var bi="TooltipContent",zO=g.forwardRef((e,t)=>{const n=dH(bi,e.__scopeTooltip),{forceMount:r=n.forceMount,side:o="top",...a}=e,i=_c(bi,e.__scopeTooltip);return h.jsx(On,{present:r||i.open,children:i.disableHoverableContent?h.jsx(VO,{side:o,...a,ref:t}):h.jsx(fH,{side:o,...a,ref:t})})}),fH=g.forwardRef((e,t)=>{const n=_c(bi,e.__scopeTooltip),r=Iy(bi,e.__scopeTooltip),o=g.useRef(null),a=tt(t,o),[i,s]=g.useState(null),{trigger:c,onClose:l}=n,u=o.current,{onPointerInTransitChange:d}=r,f=g.useCallback(()=>{s(null),d(!1)},[d]),p=g.useCallback((y,m)=>{const v=y.currentTarget,b={x:y.clientX,y:y.clientY},x=yH(b,v.getBoundingClientRect()),_=gH(b,x),w=vH(m.getBoundingClientRect()),j=xH([..._,...w]);s(j),d(!0)},[d]);return g.useEffect(()=>()=>f(),[f]),g.useEffect(()=>{if(c&&u){const y=v=>p(v,u),m=v=>p(v,c);return c.addEventListener("pointerleave",y),u.addEventListener("pointerleave",m),()=>{c.removeEventListener("pointerleave",y),u.removeEventListener("pointerleave",m)}}},[c,u,p,f]),g.useEffect(()=>{if(i){const y=m=>{const v=m.target,b={x:m.clientX,y:m.clientY},x=(c==null?void 0:c.contains(v))||(u==null?void 0:u.contains(v)),_=!bH(b,i);x?f():_&&(f(),l())};return document.addEventListener("pointermove",y),()=>document.removeEventListener("pointermove",y)}},[c,u,i,l,f]),h.jsx(VO,{...e,ref:a})}),[pH,hH]=xd(_d,{isInside:!1}),VO=g.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":o,onEscapeKeyDown:a,onPointerDownOutside:i,...s}=e,c=_c(bi,n),l=wd(n),{onClose:u}=c;return g.useEffect(()=>(document.addEventListener(Ry,u),()=>document.removeEventListener(Ry,u)),[u]),g.useEffect(()=>{if(c.trigger){const d=f=>{var p;(p=f.target)!=null&&p.contains(c.trigger)&&u()};return window.addEventListener("scroll",d,{capture:!0}),()=>window.removeEventListener("scroll",d,{capture:!0})}},[c.trigger,u]),h.jsx(Cu,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:i,onFocusOutside:d=>d.preventDefault(),onDismiss:u,children:h.jsxs(vd,{"data-state":c.stateAttribute,...l,...s,ref:t,style:{...s.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[h.jsx(y$,{children:r}),h.jsx(pH,{scope:n,isInside:!0,children:h.jsx(Kxe,{id:c.contentId,role:"tooltip",children:o||r})})]})})});zO.displayName=bi;var UO="TooltipArrow",mH=g.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,o=wd(n);return hH(UO,n).isInside?null:h.jsx(bd,{...o,...r,ref:t})});mH.displayName=UO;function yH(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),o=Math.abs(t.right-e.x),a=Math.abs(t.left-e.x);switch(Math.min(n,r,o,a)){case a:return"left";case o:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function gH(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function vH(e){const{top:t,right:n,bottom:r,left:o}=e;return[{x:o,y:t},{x:n,y:t},{x:n,y:r},{x:o,y:r}]}function bH(e,t){const{x:n,y:r}=e;let o=!1;for(let a=0,i=t.length-1;a<t.length;i=a++){const s=t[a].x,c=t[a].y,l=t[i].x,u=t[i].y;c>r!=u>r&&n<(l-s)*(r-c)/(u-c)+s&&(o=!o)}return o}function xH(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),wH(t)}function wH(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const o=e[r];for(;t.length>=2;){const a=t[t.length-1],i=t[t.length-2];if((a.x-i.x)*(o.y-i.y)>=(a.y-i.y)*(o.x-i.x))t.pop();else break}t.push(o)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const o=e[r];for(;n.length>=2;){const a=n[n.length-1],i=n[n.length-2];if((a.x-i.x)*(o.y-i.y)>=(a.y-i.y)*(o.x-i.x))n.pop();else break}n.push(o)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}IE=LO,DE=FO,LE=BO,O$=$O,sm=zO;const HO=IE,jd=DE,Ed=LE,jc=g.forwardRef(({className:e,sideOffset:t=4,...n},r)=>h.jsx(sm,{ref:r,sideOffset:t,className:Q("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n}));jc.displayName=sm.displayName;const _H="sidebar:state",jH=60*60*24*7,EH="16rem",SH="18rem",CH="3rem",OH="b",WO=g.createContext(null);function Ec(){const e=g.useContext(WO);if(!e)throw new Error("useSidebar must be used within a SidebarProvider.");return e}const Fy=g.forwardRef(({defaultOpen:e=!0,open:t,onOpenChange:n,className:r,style:o,children:a,...i},s)=>{const c=nV(),[l,u]=g.useState(!1),[d,f]=g.useState(e),p=t??d,y=g.useCallback(x=>{const _=typeof x=="function"?x(p):x;n?n(_):f(_),document.cookie=`${_H}=${_}; path=/; max-age=${jH}`},[n,p]),m=g.useCallback(()=>c?u(x=>!x):y(x=>!x),[c,y,u]);g.useEffect(()=>{const x=_=>{_.key===OH&&(_.metaKey||_.ctrlKey)&&(_.preventDefault(),m())};return window.addEventListener("keydown",x),()=>window.removeEventListener("keydown",x)},[m]);const v=p?"expanded":"collapsed",b=g.useMemo(()=>({state:v,open:p,setOpen:y,isMobile:c,openMobile:l,setOpenMobile:u,toggleSidebar:m}),[v,p,y,c,l,u,m]);return h.jsx(WO.Provider,{value:b,children:h.jsx(HO,{delayDuration:0,children:h.jsx("div",{style:{"--sidebar-width":EH,"--sidebar-width-icon":CH,...o},className:Q("group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar",r),ref:s,...i,children:a})})})});Fy.displayName="SidebarProvider";const By=g.forwardRef(({side:e="left",variant:t="sidebar",collapsible:n="offcanvas",className:r,children:o,...a},i)=>{const{isMobile:s,state:c,openMobile:l,setOpenMobile:u}=Ec();return n==="none"?h.jsx("div",{className:Q("flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground",r),ref:i,...a,children:o}):s?h.jsx(rU,{open:l,onOpenChange:u,...a,children:h.jsx(aO,{"data-sidebar":"sidebar","data-mobile":"true",className:"w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden",style:{"--sidebar-width":SH},side:e,children:h.jsx("div",{className:"flex h-full w-full flex-col",children:o})})}):h.jsxs("div",{ref:i,className:"group peer hidden md:block text-sidebar-foreground","data-state":c,"data-collapsible":c==="collapsed"?n:"","data-variant":t,"data-side":e,children:[h.jsx("div",{className:Q("duration-200 relative h-svh w-[--sidebar-width] bg-transparent transition-[width] ease-linear","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180",t==="floating"||t==="inset"?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon]")}),h.jsx("div",{className:Q("duration-200 fixed inset-y-0 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] ease-linear md:flex",e==="left"?"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]":"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]",t==="floating"||t==="inset"?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l",r),...a,children:h.jsx("div",{"data-sidebar":"sidebar",className:"flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow",children:o})})]})});By.displayName="Sidebar";const qO=g.forwardRef(({className:e,onClick:t,...n},r)=>{const{toggleSidebar:o}=Ec();return h.jsx(ut,{ref:r,"data-sidebar":"trigger",variant:"ghost",size:"icon",className:Q("h-7 w-7",e),onClick:a=>{t==null||t(a),o()},...n,children:h.jsx(de,{size:32,name:"panel-left"})})});qO.displayName="SidebarTrigger";const YO=g.forwardRef(({className:e,...t},n)=>{const{toggleSidebar:r}=Ec();return h.jsx("button",{ref:n,"data-sidebar":"rail","aria-label":"Toggle Sidebar",tabIndex:-1,onClick:r,title:"Toggle Sidebar",className:Q("absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] hover:after:bg-sidebar-border group-data-[side=left]:-right-4 group-data-[side=right]:left-0 sm:flex","[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize","[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize","group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar","[[data-side=left][data-collapsible=offcanvas]_&]:-right-2","[[data-side=right][data-collapsible=offcanvas]_&]:-left-2",e),...t})});YO.displayName="SidebarRail";const $y=g.forwardRef(({className:e,...t},n)=>h.jsx("main",{ref:n,className:Q("relative flex min-h-svh flex-1 flex-col bg-background","peer-data-[variant=inset]:min-h-[calc(100svh-theme(spacing.4))] md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow",e),...t}));$y.displayName="SidebarInset";const MH=g.forwardRef(({className:e,...t},n)=>h.jsx(ln,{ref:n,"data-sidebar":"input",className:Q("h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring",e),...t}));MH.displayName="SidebarInput";const NH=g.forwardRef(({className:e,...t},n)=>h.jsx("div",{ref:n,"data-sidebar":"header",className:Q("flex flex-col gap-2 p-2",e),...t}));NH.displayName="SidebarHeader";const KO=g.forwardRef(({className:e,...t},n)=>h.jsx("div",{ref:n,"data-sidebar":"footer",className:Q("flex flex-col gap-2 p-2",e),...t}));KO.displayName="SidebarFooter";const kH=g.forwardRef(({className:e,...t},n)=>h.jsx(hc,{ref:n,"data-sidebar":"separator",className:Q("mx-2 w-auto bg-sidebar-border",e),...t}));kH.displayName="SidebarSeparator";const zy=g.forwardRef(({className:e,...t},n)=>h.jsx("div",{ref:n,"data-sidebar":"content",className:Q("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",e),...t}));zy.displayName="SidebarContent";const Sc=g.forwardRef(({className:e,...t},n)=>h.jsx("div",{ref:n,"data-sidebar":"group",className:Q("relative flex w-full min-w-0 flex-col p-2",e),...t}));Sc.displayName="SidebarGroup";const Cc=g.forwardRef(({className:e,asChild:t=!1,...n},r)=>{const o=t?Ur:"div";return h.jsx(o,{ref:r,"data-sidebar":"group-label",className:Q("duration-200 flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opa] ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",e),...n})});Cc.displayName="SidebarGroupLabel";const PH=g.forwardRef(({className:e,asChild:t=!1,...n},r)=>{const o=t?Ur:"button";return h.jsx(o,{ref:r,"data-sidebar":"group-action",className:Q("absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","group-data-[collapsible=icon]:hidden",e),...n})});PH.displayName="SidebarGroupAction";const AH=g.forwardRef(({className:e,...t},n)=>h.jsx("div",{ref:n,"data-sidebar":"group-content",className:Q("w-full text-sm",e),...t}));AH.displayName="SidebarGroupContent";const xi=g.forwardRef(({className:e,...t},n)=>h.jsx("ul",{ref:n,"data-sidebar":"menu",className:Q("flex w-full min-w-0 flex-col gap-1",e),...t}));xi.displayName="SidebarMenu";const Jr=g.forwardRef(({className:e,...t},n)=>h.jsx("li",{ref:n,"data-sidebar":"menu-item",className:Q("group/menu-item relative",e),...t}));Jr.displayName="SidebarMenuItem";const TH=Vr("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:!p-0"}},defaultVariants:{variant:"default",size:"default"}}),Zr=g.forwardRef(({asChild:e=!1,isActive:t=!1,variant:n="default",size:r="default",tooltip:o,className:a,...i},s)=>{const c=e?Ur:"button",{isMobile:l,state:u}=Ec(),d=h.jsx(c,{ref:s,"data-sidebar":"menu-button","data-size":r,"data-active":t,className:Q(TH({variant:n,size:r}),a),...i});return o?(typeof o=="string"&&(o={children:o}),h.jsxs(jd,{children:[h.jsx(Ed,{asChild:!0,children:d}),h.jsx(jc,{side:"right",align:"center",hidden:u!=="collapsed"||l,...o})]})):d});Zr.displayName="SidebarMenuButton";const RH=g.forwardRef(({className:e,asChild:t=!1,showOnHover:n=!1,...r},o)=>{const a=t?Ur:"button";return h.jsx(a,{ref:o,"data-sidebar":"menu-action",className:Q("absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 peer-hover/menu-button:text-sidebar-accent-foreground [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",n&&"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0",e),...r})});RH.displayName="SidebarMenuAction";const IH=g.forwardRef(({className:e,...t},n)=>h.jsx("div",{ref:n,"data-sidebar":"menu-badge",className:Q("absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground select-none pointer-events-none","peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",e),...t}));IH.displayName="SidebarMenuBadge";const DH=g.forwardRef(({className:e,showIcon:t=!1,...n},r)=>{const o=g.useMemo(()=>`${Math.floor(Math.random()*40)+50}%`,[]);return h.jsxs("div",{ref:r,"data-sidebar":"menu-skeleton",className:Q("rounded-md h-8 flex gap-2 px-2 items-center",e),...n,children:[t&&h.jsx(iO,{className:"size-4 rounded-md","data-sidebar":"menu-skeleton-icon"}),h.jsx(iO,{className:"h-4 flex-1 max-w-[--skeleton-width]","data-sidebar":"menu-skeleton-text",style:{"--skeleton-width":o}})]})});DH.displayName="SidebarMenuSkeleton";const XO=g.forwardRef(({className:e,...t},n)=>h.jsx("ul",{ref:n,"data-sidebar":"menu-sub",className:Q("mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5","group-data-[collapsible=icon]:hidden",e),...t}));XO.displayName="SidebarMenuSub";const GO=g.forwardRef(({...e},t)=>h.jsx("li",{ref:t,...e}));GO.displayName="SidebarMenuSubItem";const QO=g.forwardRef(({asChild:e=!1,size:t="md",isActive:n,className:r,...o},a)=>{const i=e?Ur:"a";return h.jsx(i,{ref:a,"data-sidebar":"menu-sub-button","data-size":t,"data-active":n,className:Q("flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground","data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground",t==="sm"&&"text-xs",t==="md"&&"text-sm","group-data-[collapsible=icon]:hidden",r),...o})});QO.displayName="SidebarMenuSubButton";function LH({items:e}){const{t}=Pe("documents");return h.jsxs(Sc,{children:[h.jsx(Cc,{children:h.jsx("div",{className:"text-sm",children:t("title")})}),h.jsx(xi,{children:e.map(n=>{var r;return h.jsx(Z7,{asChild:!0,defaultOpen:n.isActive,className:"group/collapsible",children:h.jsxs(Jr,{children:[h.jsx(eV,{asChild:!0,children:h.jsxs(Zr,{className:"cursor-pointer",tooltip:t(n.title),children:[n.icon,h.jsx("span",{children:t(n.title)}),h.jsx(de,{name:"chevron-right",className:"ml-auto transition-transform duration-200 group-data-[state=open]/collapsible:rotate-90"})]})}),h.jsx(tV,{children:h.jsx(XO,{children:(r=n.items)==null?void 0:r.map(o=>h.jsx(GO,{className:"cursor-pointer",children:h.jsx(QO,{asChild:!0,children:h.jsx("span",{children:t(o.title)})})},t(o.title)))})})]})},n.title)})})]})}const Vy={application:"/application/:applicationId?",whiteboard:"/whiteboard/:sessionId?"},cr=(e,t)=>{const n=Vy[e];return t?Object.keys(t||{}).reduce((r,o)=>r.replace(`:${o}`,(t==null?void 0:t[o])||""),n):n.replace(/\/:[^/]+/g,"")},FH=g.memo(({text:e,colors:t={first:"#9E7AFF",second:"#FE8BBB"},className:n,sparklesCount:r=10,...o})=>{const[a,i]=g.useState([]);return g.useEffect(()=>{const s=()=>{const d=`${Math.random()*100}%`,f=`${Math.random()*100}%`,p=Math.random()>.5?t.first:t.second,y=Math.random()*2,m=Math.random()*1+.3,v=Math.random()*10+5;return{id:`${d}-${f}-${Date.now()}`,x:d,y:f,color:p,delay:y,scale:m,lifespan:v}},c=()=>{const d=Array.from({length:r},s);i(d)},l=()=>{i(d=>d.map(f=>f.lifespan<=0?s():{...f,lifespan:f.lifespan-.1}))};c();const u=setInterval(l,100);return()=>clearInterval(u)},[t.first,t.second]),h.jsx("div",{className:Q("text-6xl font-bold",n),...o,style:{"--sparkles-first-color":`${t.first}`,"--sparkles-second-color":`${t.second}`},children:h.jsxs("span",{className:"relative inline-block",children:[a.map(s=>h.jsx(BH,{...s},s.id)),h.jsx("strong",{children:e})]})})},(e,t)=>e.text===t.text),BH=({id:e,x:t,y:n,color:r,delay:o,scale:a})=>h.jsx(Mu.svg,{className:"pointer-events-none absolute z-20",initial:{opacity:0,left:t,top:n},animate:{opacity:[0,1,0],scale:[0,a,0],rotate:[75,120,150]},transition:{duration:.8,repeat:1/0,delay:o},width:"21",height:"21",viewBox:"0 0 21 21",children:h.jsx("path",{d:"M9.82531 0.843845C10.0553 0.215178 10.9446 0.215178 11.1746 0.843845L11.8618 2.72026C12.4006 4.19229 12.3916 6.39157 13.5 7.5C14.6084 8.60843 16.8077 8.59935 18.2797 9.13822L20.1561 9.82534C20.7858 10.0553 20.7858 10.9447 20.1561 11.1747L18.2797 11.8618C16.8077 12.4007 14.6084 12.3916 13.5 13.5C12.3916 14.6084 12.4006 16.8077 11.8618 18.2798L11.1746 20.1562C10.9446 20.7858 10.0553 20.7858 9.82531 20.1562L9.13819 18.2798C8.59932 16.8077 8.60843 14.6084 7.5 13.5C6.39157 12.3916 4.19225 12.4007 2.72023 11.8618L0.843814 11.1747C0.215148 10.9447 0.215148 10.0553 0.843814 9.82534L2.72023 9.13822C4.19225 8.59935 6.39157 8.60843 7.5 7.5C8.60843 6.39157 8.59932 4.19229 9.13819 2.72026L9.82531 0.843845Z",fill:r})},e);function $H({className:e,onClick:t}){const{t:n}=Pe("sidebar");return h.jsxs(Zr,{className:Q(e,"tw-w-full"),onClick:t,children:[h.jsx(de,{name:"frame"}),h.jsx(FH,{text:n("new_session"),className:"text-sm",sparklesCount:3})]})}const zH=()=>{const[e,t]=g.useState(!1),n=pt(i=>i.setCurrentSession),r=pt(i=>i.createSession),o=Nu(i=>i.setSelectedSessionId),a=g.useCallback(async i=>{try{t(!0);const s=await r(i);n(s),o(s.id)}finally{t(!1)}},[r,n,o]);return{loading:e,createSession:a}},Oc=Qs,VH=Js,JO=g.forwardRef(({className:e,...t},n)=>h.jsx(fa,{ref:n,className:Q("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));JO.displayName=fa.displayName;const wi=g.forwardRef(({className:e,children:t,...n},r)=>h.jsxs(VH,{children:[h.jsx(JO,{}),h.jsxs(pa,{ref:r,className:Q("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...n,children:[t,h.jsxs(ec,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[h.jsx(de,{name:"x",className:"h-4 w-4"}),h.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));wi.displayName=pa.displayName;const _i=({className:e,...t})=>h.jsx("div",{className:Q("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});_i.displayName="DialogHeader";const Uy=({className:e,...t})=>h.jsx("div",{className:Q("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Uy.displayName="DialogFooter";const ji=g.forwardRef(({className:e,...t},n)=>h.jsx(ni,{ref:n,className:Q("text-lg font-semibold leading-none tracking-tight",e),...t}));ji.displayName=ni.displayName;const Hy=g.forwardRef(({className:e,...t},n)=>h.jsx(ri,{ref:n,className:Q("text-sm text-muted-foreground",e),...t}));Hy.displayName=ri.displayName;var UH="Label",ZO=g.forwardRef((e,t)=>h.jsx(Oe.label,{...e,ref:t,onMouseDown:n=>{var r;n.target.closest("button, input, select, textarea")||((r=e.onMouseDown)==null||r.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));ZO.displayName=UH;var eM=ZO;let tM;tM=Vr("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Ge=g.forwardRef(({className:e,...t},n)=>h.jsx(eM,{ref:n,className:Q(tM(),e),...t})),Ge.displayName=eM.displayName;const HH=ei(()=>{const e=sn(),{t}=Pe("dialogs"),[n,r]=g.useState(""),{toast:o}=en(),{loading:a,createSession:i}=zH(),s=l=>{r(l.target.value)},c=async()=>{try{await i({name:n}),e.hide()}catch{o({variant:"destructive",description:t("create_session.errors.create_failed")})}};return h.jsx(Oc,{open:e.visible,onOpenChange:e.hide,children:h.jsxs(wi,{className:"sm:max-w-[425px]",children:[h.jsxs(_i,{children:[h.jsx(ji,{children:t("create_session.title")}),h.jsx(Hy,{children:t("create_session.description")})]}),h.jsx("div",{className:"grid gap-4 py-4",children:h.jsxs("div",{className:"flex flex-col space-y-1.5",children:[h.jsx(Ge,{className:"mb-2",htmlFor:"name",children:t("create_session.name")}),h.jsx(ln,{onChange:s,id:"name",value:n,placeholder:t("create_session.name_placeholder")})]})}),h.jsx(Uy,{children:h.jsx(ut,{onClick:c,disabled:a||!n,type:"submit",children:t("create_session.create")})})]})})}),WH=()=>{const[e,t]=g.useState(!1),n=pt(o=>o.deleteSession),r=g.useCallback(async o=>{try{t(!0),await n(o),await Promise.all([ue("FlowEdge").find({select:["id"],where:{session_id:o}}).then(a=>Promise.all(a.map(i=>ue("FlowEdge").delete(i.id)))),ue("FlowNode").find({select:["id"],where:{session_id:o}}).then(a=>Promise.all(a.map(i=>ue("FlowNode").delete(i.id))))])}finally{t(!1)}},[n]);return{loading:e,deleteSession:r}};var nM="AlertDialog",[qH,Cwe]=Bn(nM,[BC]),eo=BC(),rM=e=>{const{__scopeAlertDialog:t,...n}=e,r=eo(t);return h.jsx(Qs,{...r,...n,modal:!0})};rM.displayName=nM;var YH="AlertDialogTrigger",KH=g.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,o=eo(n);return h.jsx(rO,{...o,...r,ref:t})});KH.displayName=YH;var XH="AlertDialogPortal",oM=e=>{const{__scopeAlertDialog:t,...n}=e,r=eo(t);return h.jsx(Js,{...r,...n})};oM.displayName=XH;var GH="AlertDialogOverlay",aM=g.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,o=eo(n);return h.jsx(fa,{...o,...r,ref:t})});aM.displayName=GH;var Ei="AlertDialogContent",[QH,JH]=qH(Ei),iM=g.forwardRef((e,t)=>{const{__scopeAlertDialog:n,children:r,...o}=e,a=eo(n),i=g.useRef(null),s=tt(t,i),c=g.useRef(null);return h.jsx(ZC,{contentName:Ei,titleName:sM,docsSlug:"alert-dialog",children:h.jsx(QH,{scope:n,cancelRef:c,children:h.jsxs(pa,{role:"alertdialog",...a,...o,ref:s,onOpenAutoFocus:he(o.onOpenAutoFocus,l=>{var u;l.preventDefault(),(u=c.current)==null||u.focus({preventScroll:!0})}),onPointerDownOutside:l=>l.preventDefault(),onInteractOutside:l=>l.preventDefault(),children:[h.jsx(y$,{children:r}),h.jsx(hM,{contentRef:i})]})})})});iM.displayName=Ei;var sM="AlertDialogTitle",cM=g.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,o=eo(n);return h.jsx(ni,{...o,...r,ref:t})});cM.displayName=sM;var lM="AlertDialogDescription",uM=g.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,o=eo(n);return h.jsx(ri,{...o,...r,ref:t})});uM.displayName=lM;var ZH="AlertDialogAction",dM=g.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,o=eo(n);return h.jsx(ec,{...o,...r,ref:t})});dM.displayName=ZH;var fM="AlertDialogCancel",pM=g.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,{cancelRef:o}=JH(fM,n),a=eo(n),i=tt(t,o);return h.jsx(ec,{...a,...r,ref:i})});pM.displayName=fM;let hM;hM=({contentRef:e})=>{const t=`\`${Ei}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Ei}\` by passing a \`${lM}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Ei}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return g.useEffect(()=>{var n;document.getElementById((n=e.current)==null?void 0:n.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},BE=rM,FE=oM,vm=aM,bm=iM,_m=dM,jm=pM,xm=cM,wm=uM;const mM=BE,eW=FE,yM=g.forwardRef(({className:e,...t},n)=>h.jsx(vm,{className:Q("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));yM.displayName=vm.displayName;const Wy=g.forwardRef(({className:e,...t},n)=>h.jsxs(eW,{children:[h.jsx(yM,{}),h.jsx(bm,{ref:n,className:Q("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));Wy.displayName=bm.displayName;const qy=({className:e,...t})=>h.jsx("div",{className:Q("flex flex-col space-y-2 text-center sm:text-left",e),...t});qy.displayName="AlertDialogHeader";const Yy=({className:e,...t})=>h.jsx("div",{className:Q("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Yy.displayName="AlertDialogFooter";const Ky=g.forwardRef(({className:e,...t},n)=>h.jsx(xm,{ref:n,className:Q("text-lg font-semibold",e),...t}));Ky.displayName=xm.displayName;const Xy=g.forwardRef(({className:e,...t},n)=>h.jsx(wm,{ref:n,className:Q("text-sm text-muted-foreground",e),...t}));Xy.displayName=wm.displayName;const Gy=g.forwardRef(({className:e,...t},n)=>h.jsx(_m,{ref:n,className:Q(pc(),e),...t}));Gy.displayName=_m.displayName;const Qy=g.forwardRef(({className:e,...t},n)=>h.jsx(jm,{ref:n,className:Q(pc({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));Qy.displayName=jm.displayName;const gM=ei(({id:e})=>{const{t}=Pe("dialogs"),n=sn(),{toast:r}=en(),{deleteSession:o,loading:a}=WH(),i=async()=>{try{await o(e),n.hide()}catch{r({variant:"destructive",description:t("delete_session.errors.delete_failed")})}};return h.jsx(mM,{open:n.visible,onOpenChange:n.hide,children:h.jsxs(Wy,{children:[h.jsxs(qy,{children:[h.jsx(Ky,{children:t("delete_session.title")}),h.jsx(Xy,{children:t("delete_session.description")})]}),h.jsxs(Yy,{children:[h.jsx(Qy,{onClick:n.hide,children:t("delete_session.cancel")}),h.jsx(Gy,{disabled:a,onClick:i,children:t("delete_session.delete")})]})]})})});function tW({sessions:e,currentSession:t,setCurrentSession:n}){const{t:r}=Pe("sidebar"),o=lc(),a=sn(HH),i=sn(gM),s=g.useCallback(()=>{a.show({})},[a]),c=g.useCallback((u,d)=>{i.show({id:d}),u.preventDefault()},[i]),l=u=>{n(u),o(cr("whiteboard",{sessionId:u.id}))};return h.jsxs(Sc,{className:"group-data-[collapsible=icon]:hidden",children:[h.jsx(Cc,{children:h.jsx("div",{className:"text-sm",children:r("sessions")})}),h.jsxs(xi,{children:[h.jsx(Jr,{children:h.jsx($H,{onClick:s,className:"w-full"})}),e.map(u=>h.jsx(Jr,{className:"cursor-pointer",children:h.jsx(Zr,{asChild:!0,onClick:()=>l(u),children:h.jsxs("div",{className:"flex flex-row justify-between items-center",children:[h.jsxs("div",{className:"flex gap-2",children:[(t==null?void 0:t.id)===u.id?h.jsx(de,{size:16,color:"green",name:"check"}):h.jsx(de,{size:16,name:"chevron-right"}),h.jsx("span",{children:u.name})]}),h.jsx(de,{onClick:d=>c(d,u.id),size:16,name:"trash-2"})]})})},u.id)),e!=null&&e.length?h.jsx(Jr,{children:h.jsxs(Zr,{className:"text-sidebar-foreground/70",children:[h.jsx(de,{name:"ellipsis",className:"text-sidebar-foreground/70"}),h.jsx("span",{children:r("more_session")})]})}):null]})]})}var nW=g.createContext(void 0);Io=function(e){const t=g.useContext(nW);return e||t||"ltr"};function rW(e,t=[]){let n=[];function r(a,i){const s=g.createContext(i),c=n.length;n=[...n,i];function l(d){const{scope:f,children:p,...y}=d,m=(f==null?void 0:f[e][c])||s,v=g.useMemo(()=>y,Object.values(y));return h.jsx(m.Provider,{value:v,children:p})}function u(d,f){const p=(f==null?void 0:f[e][c])||s,y=g.useContext(p);if(y)return y;if(i!==void 0)return i;throw new Error(`\`${d}\` must be used within \`${a}\``)}return l.displayName=a+"Provider",[l,u]}const o=()=>{const a=n.map(i=>g.createContext(i));return function(i){const s=(i==null?void 0:i[e])||a;return g.useMemo(()=>({[`__scope${e}`]:{...i,[e]:s}}),[i,s])}};return o.scopeName=e,[r,oW(o,...t)]}function oW(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(o){const a=r.reduce((i,{useScope:s,scopeName:c})=>{const l=s(o)[`__scope${c}`];return{...i,...l}},{});return g.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return n.scopeName=t.scopeName,n}let Sd,vM,Mc,Cd,Jy,bM,xM,wM,_M,Zy;Sd="rovingFocusGroup.onEntryFocus",vM={bubbles:!1,cancelable:!0},Mc="RovingFocusGroup",[Cd,Jy,bM]=ku(Mc),[xM,Hr]=rW(Mc,[bM]),[wM,_M]=xM(Mc),Zy=g.forwardRef((e,t)=>h.jsx(Cd.Provider,{scope:e.__scopeRovingFocusGroup,children:h.jsx(Cd.Slot,{scope:e.__scopeRovingFocusGroup,children:h.jsx(aW,{...e,ref:t})})})),Zy.displayName=Mc;var aW=g.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:o=!1,dir:a,currentTabStopId:i,defaultCurrentTabStopId:s,onCurrentTabStopIdChange:c,onEntryFocus:l,preventScrollOnEntryFocus:u=!1,...d}=e,f=g.useRef(null),p=tt(t,f),y=Io(a),[m=null,v]=Zt({prop:i,defaultProp:s,onChange:c}),[b,x]=g.useState(!1),_=Ro(l),w=Jy(n),j=g.useRef(!1),[E,S]=g.useState(0);return g.useEffect(()=>{const O=f.current;if(O)return O.addEventListener(Sd,_),()=>O.removeEventListener(Sd,_)},[_]),h.jsx(wM,{scope:n,orientation:r,dir:y,loop:o,currentTabStopId:m,onItemFocus:g.useCallback(O=>v(O),[v]),onItemShiftTab:g.useCallback(()=>x(!0),[]),onFocusableItemAdd:g.useCallback(()=>S(O=>O+1),[]),onFocusableItemRemove:g.useCallback(()=>S(O=>O-1),[]),children:h.jsx(Oe.div,{tabIndex:b||E===0?-1:0,"data-orientation":r,...d,ref:p,style:{outline:"none",...e.style},onMouseDown:he(e.onMouseDown,()=>{j.current=!0}),onFocus:he(e.onFocus,O=>{const N=!j.current;if(O.target===O.currentTarget&&N&&!b){const P=new CustomEvent(Sd,vM);if(O.currentTarget.dispatchEvent(P),!P.defaultPrevented){const k=w().filter(M=>M.focusable),R=k.find(M=>M.active),A=k.find(M=>M.id===m),C=[R,A,...k].filter(Boolean).map(M=>M.ref.current);SM(C,u)}}j.current=!1}),onBlur:he(e.onBlur,()=>x(!1))})})}),jM="RovingFocusGroupItem",EM=g.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:o=!1,tabStopId:a,...i}=e,s=ht(),c=a||s,l=_M(jM,n),u=l.currentTabStopId===c,d=Jy(n),{onFocusableItemAdd:f,onFocusableItemRemove:p}=l;return g.useEffect(()=>{if(r)return f(),()=>p()},[r,f,p]),h.jsx(Cd.ItemSlot,{scope:n,id:c,focusable:r,active:o,children:h.jsx(Oe.span,{tabIndex:u?0:-1,"data-orientation":l.orientation,...i,ref:t,onMouseDown:he(e.onMouseDown,y=>{r?l.onItemFocus(c):y.preventDefault()}),onFocus:he(e.onFocus,()=>l.onItemFocus(c)),onKeyDown:he(e.onKeyDown,y=>{if(y.key==="Tab"&&y.shiftKey){l.onItemShiftTab();return}if(y.target!==y.currentTarget)return;const m=cW(y,l.orientation,l.dir);if(m!==void 0){if(y.metaKey||y.ctrlKey||y.altKey||y.shiftKey)return;y.preventDefault();let v=d().filter(b=>b.focusable).map(b=>b.ref.current);if(m==="last")v.reverse();else if(m==="prev"||m==="next"){m==="prev"&&v.reverse();const b=v.indexOf(y.currentTarget);v=l.loop?lW(v,b+1):v.slice(b+1)}setTimeout(()=>SM(v))}})})})});EM.displayName=jM;var iW={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function sW(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function cW(e,t,n){const r=sW(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return iW[r]}function SM(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function lW(e,t){return e.map((n,r)=>e[(t+r)%e.length])}let Od,CM,eg,OM,MM,NM,Si,Ci,kM,PM,Uo,Oi,tg,ng,to,AM,Mi,rg;Xs=Zy,Gs=EM,Od=["Enter"," "],CM=["ArrowDown","PageUp","Home"],eg=["ArrowUp","PageDown","End"],OM=[...CM,...eg],MM={ltr:[...Od,"ArrowRight"],rtl:[...Od,"ArrowLeft"]},NM={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Si="Menu",[Ci,kM,PM]=ku(Si),[Uo,Lu]=Bn(Si,[PM,Vo,Hr]),Oi=Vo(),tg=Hr(),[ng,to]=Uo(Si),[AM,Mi]=Uo(Si),rg=e=>{const{__scopeMenu:t,open:n=!1,children:r,dir:o,onOpenChange:a,modal:i=!0}=e,s=Oi(t),[c,l]=g.useState(null),u=g.useRef(!1),d=Ro(a),f=Io(o);return g.useEffect(()=>{const p=()=>{u.current=!0,document.addEventListener("pointerdown",y,{capture:!0,once:!0}),document.addEventListener("pointermove",y,{capture:!0,once:!0})},y=()=>u.current=!1;return document.addEventListener("keydown",p,{capture:!0}),()=>{document.removeEventListener("keydown",p,{capture:!0}),document.removeEventListener("pointerdown",y,{capture:!0}),document.removeEventListener("pointermove",y,{capture:!0})}},[]),h.jsx(xc,{...s,children:h.jsx(ng,{scope:t,open:n,onOpenChange:d,content:c,onContentChange:l,children:h.jsx(AM,{scope:t,onClose:g.useCallback(()=>d(!1),[d]),isUsingKeyboardRef:u,dir:f,modal:i,children:r})})})},rg.displayName=Si;var uW="MenuAnchor",og=g.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,o=Oi(n);return h.jsx(wc,{...o,...r,ref:t})});og.displayName=uW;var ag="MenuPortal",[dW,TM]=Uo(ag,{forceMount:void 0}),RM=e=>{const{__scopeMenu:t,forceMount:n,children:r,container:o}=e,a=to(ag,t);return h.jsx(dW,{scope:t,forceMount:n,children:h.jsx(On,{present:n||a.open,children:h.jsx(Ou,{asChild:!0,container:o,children:r})})})};RM.displayName=ag;var Vn="MenuContent",[fW,ig]=Uo(Vn),IM=g.forwardRef((e,t)=>{const n=TM(Vn,e.__scopeMenu),{forceMount:r=n.forceMount,...o}=e,a=to(Vn,e.__scopeMenu),i=Mi(Vn,e.__scopeMenu);return h.jsx(Ci.Provider,{scope:e.__scopeMenu,children:h.jsx(On,{present:r||a.open,children:h.jsx(Ci.Slot,{scope:e.__scopeMenu,children:i.modal?h.jsx(pW,{...o,ref:t}):h.jsx(hW,{...o,ref:t})})})})}),pW=g.forwardRef((e,t)=>{const n=to(Vn,e.__scopeMenu),r=g.useRef(null),o=tt(t,r);return g.useEffect(()=>{const a=r.current;if(a)return cd(a)},[]),h.jsx(sg,{...e,ref:o,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:he(e.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),hW=g.forwardRef((e,t)=>{const n=to(Vn,e.__scopeMenu);return h.jsx(sg,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),sg=g.forwardRef((e,t)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:o,onOpenAutoFocus:a,onCloseAutoFocus:i,disableOutsidePointerEvents:s,onEntryFocus:c,onEscapeKeyDown:l,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:f,onDismiss:p,disableOutsideScroll:y,...m}=e,v=to(Vn,n),b=Mi(Vn,n),x=Oi(n),_=tg(n),w=kM(n),[j,E]=g.useState(null),S=g.useRef(null),O=tt(t,S,v.onContentChange),N=g.useRef(0),P=g.useRef(""),k=g.useRef(0),R=g.useRef(null),A=g.useRef("right"),C=g.useRef(0),M=y?yc:g.Fragment,T=y?{as:Ur,allowPinchZoom:!0}:void 0,I=D=>{var Z,q;const $=P.current+D,U=w().filter(W=>!W.disabled),F=document.activeElement,H=(Z=U.find(W=>W.ref.current===F))==null?void 0:Z.textValue,Y=U.map(W=>W.textValue),G=CW(Y,$,H),re=(q=U.find(W=>W.textValue===G))==null?void 0:q.ref.current;(function W(J){P.current=J,window.clearTimeout(N.current),J!==""&&(N.current=window.setTimeout(()=>W(""),1e3))})($),re&&setTimeout(()=>re.focus())};g.useEffect(()=>()=>window.clearTimeout(N.current),[]),ed();const L=g.useCallback(D=>{var $,U;return A.current===(($=R.current)==null?void 0:$.side)&&MW(D,(U=R.current)==null?void 0:U.area)},[]);return h.jsx(fW,{scope:n,searchRef:P,onItemEnter:g.useCallback(D=>{L(D)&&D.preventDefault()},[L]),onItemLeave:g.useCallback(D=>{var $;L(D)||(($=S.current)==null||$.focus(),E(null))},[L]),onTriggerLeave:g.useCallback(D=>{L(D)&&D.preventDefault()},[L]),pointerGraceTimerRef:k,onPointerGraceIntentChange:g.useCallback(D=>{R.current=D},[]),children:h.jsx(M,{...T,children:h.jsx(mc,{asChild:!0,trapped:o,onMountAutoFocus:he(a,D=>{var $;D.preventDefault(),($=S.current)==null||$.focus({preventScroll:!0})}),onUnmountAutoFocus:i,children:h.jsx(Cu,{asChild:!0,disableOutsidePointerEvents:s,onEscapeKeyDown:l,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:f,onDismiss:p,children:h.jsx(Xs,{asChild:!0,..._,dir:b.dir,orientation:"vertical",loop:r,currentTabStopId:j,onCurrentTabStopIdChange:E,onEntryFocus:he(c,D=>{b.isUsingKeyboardRef.current||D.preventDefault()}),preventScrollOnEntryFocus:!0,children:h.jsx(vd,{role:"menu","aria-orientation":"vertical","data-state":ZM(v.open),"data-radix-menu-content":"",dir:b.dir,...x,...m,ref:O,style:{outline:"none",...m.style},onKeyDown:he(m.onKeyDown,D=>{const $=D.target.closest("[data-radix-menu-content]")===D.currentTarget,U=D.ctrlKey||D.altKey||D.metaKey,F=D.key.length===1;$&&(D.key==="Tab"&&D.preventDefault(),!U&&F&&I(D.key));const H=S.current;if(D.target!==H||!OM.includes(D.key))return;D.preventDefault();const Y=w().filter(G=>!G.disabled).map(G=>G.ref.current);eg.includes(D.key)&&Y.reverse(),EW(Y)}),onBlur:he(e.onBlur,D=>{D.currentTarget.contains(D.target)||(window.clearTimeout(N.current),P.current="")}),onPointerMove:he(e.onPointerMove,kc(D=>{const $=D.target,U=C.current!==D.clientX;if(D.currentTarget.contains($)&&U){const F=D.clientX>C.current?"right":"left";A.current=F,C.current=D.clientX}}))})})})})})})});IM.displayName=Vn;var mW="MenuGroup",cg=g.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return h.jsx(Oe.div,{role:"group",...r,ref:t})});cg.displayName=mW;var yW="MenuLabel",DM=g.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return h.jsx(Oe.div,{...r,ref:t})});DM.displayName=yW;var Md="MenuItem",LM="menu.itemSelect",Nd=g.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:r,...o}=e,a=g.useRef(null),i=Mi(Md,e.__scopeMenu),s=ig(Md,e.__scopeMenu),c=tt(t,a),l=g.useRef(!1),u=()=>{const d=a.current;if(!n&&d){const f=new CustomEvent(LM,{bubbles:!0,cancelable:!0});d.addEventListener(LM,p=>r==null?void 0:r(p),{once:!0}),Xxe(d,f),f.defaultPrevented?l.current=!1:i.onClose()}};return h.jsx(FM,{...o,ref:c,disabled:n,onClick:he(e.onClick,u),onPointerDown:d=>{var f;(f=e.onPointerDown)==null||f.call(e,d),l.current=!0},onPointerUp:he(e.onPointerUp,d=>{var f;l.current||((f=d.currentTarget)==null||f.click())}),onKeyDown:he(e.onKeyDown,d=>{const f=s.searchRef.current!=="";n||f&&d.key===" "||Od.includes(d.key)&&(d.currentTarget.click(),d.preventDefault())})})});Nd.displayName=Md;var FM=g.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:r=!1,textValue:o,...a}=e,i=ig(Md,n),s=tg(n),c=g.useRef(null),l=tt(t,c),[u,d]=g.useState(!1),[f,p]=g.useState("");return g.useEffect(()=>{const y=c.current;y&&p((y.textContent??"").trim())},[a.children]),h.jsx(Ci.ItemSlot,{scope:n,disabled:r,textValue:o??f,children:h.jsx(Gs,{asChild:!0,...s,focusable:!r,children:h.jsx(Oe.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...a,ref:l,onPointerMove:he(e.onPointerMove,kc(y=>{r?i.onItemLeave(y):(i.onItemEnter(y),y.defaultPrevented||y.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:he(e.onPointerLeave,kc(y=>i.onItemLeave(y))),onFocus:he(e.onFocus,()=>d(!0)),onBlur:he(e.onBlur,()=>d(!1))})})})}),gW="MenuCheckboxItem",BM=g.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:r,...o}=e;return h.jsx(HM,{scope:e.__scopeMenu,checked:n,children:h.jsx(Nd,{role:"menuitemcheckbox","aria-checked":kd(n)?"mixed":n,...o,ref:t,"data-state":dg(n),onSelect:he(o.onSelect,()=>r==null?void 0:r(kd(n)?!0:!n),{checkForDefaultPrevented:!1})})})});BM.displayName=gW;var $M="MenuRadioGroup",[vW,bW]=Uo($M,{value:void 0,onValueChange:()=>{}}),zM=g.forwardRef((e,t)=>{const{value:n,onValueChange:r,...o}=e,a=Ro(r);return h.jsx(vW,{scope:e.__scopeMenu,value:n,onValueChange:a,children:h.jsx(cg,{...o,ref:t})})});zM.displayName=$M;var VM="MenuRadioItem",UM=g.forwardRef((e,t)=>{const{value:n,...r}=e,o=bW(VM,e.__scopeMenu),a=n===o.value;return h.jsx(HM,{scope:e.__scopeMenu,checked:a,children:h.jsx(Nd,{role:"menuitemradio","aria-checked":a,...r,ref:t,"data-state":dg(a),onSelect:he(r.onSelect,()=>{var i;return(i=o.onValueChange)==null?void 0:i.call(o,n)},{checkForDefaultPrevented:!1})})})});UM.displayName=VM;var lg="MenuItemIndicator",[HM,xW]=Uo(lg,{checked:!1}),WM=g.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:r,...o}=e,a=xW(lg,n);return h.jsx(On,{present:r||kd(a.checked)||a.checked===!0,children:h.jsx(Oe.span,{...o,ref:t,"data-state":dg(a.checked)})})});WM.displayName=lg;var wW="MenuSeparator",qM=g.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return h.jsx(Oe.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});qM.displayName=wW;var _W="MenuArrow",YM=g.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,o=Oi(n);return h.jsx(bd,{...o,...r,ref:t})});YM.displayName=_W;var ug="MenuSub",[jW,KM]=Uo(ug),XM=e=>{const{__scopeMenu:t,children:n,open:r=!1,onOpenChange:o}=e,a=to(ug,t),i=Oi(t),[s,c]=g.useState(null),[l,u]=g.useState(null),d=Ro(o);return g.useEffect(()=>(a.open===!1&&d(!1),()=>d(!1)),[a.open,d]),h.jsx(xc,{...i,children:h.jsx(ng,{scope:t,open:r,onOpenChange:d,content:l,onContentChange:u,children:h.jsx(jW,{scope:t,contentId:ht(),triggerId:ht(),trigger:s,onTriggerChange:c,children:n})})})};XM.displayName=ug;var Nc="MenuSubTrigger",GM=g.forwardRef((e,t)=>{const n=to(Nc,e.__scopeMenu),r=Mi(Nc,e.__scopeMenu),o=KM(Nc,e.__scopeMenu),a=ig(Nc,e.__scopeMenu),i=g.useRef(null),{pointerGraceTimerRef:s,onPointerGraceIntentChange:c}=a,l={__scopeMenu:e.__scopeMenu},u=g.useCallback(()=>{i.current&&window.clearTimeout(i.current),i.current=null},[]);return g.useEffect(()=>u,[u]),g.useEffect(()=>{const d=s.current;return()=>{window.clearTimeout(d),c(null)}},[s,c]),h.jsx(og,{asChild:!0,...l,children:h.jsx(FM,{id:o.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":o.contentId,"data-state":ZM(n.open),...e,ref:g$(t,o.onTriggerChange),onClick:d=>{var f;(f=e.onClick)==null||f.call(e,d),!(e.disabled||d.defaultPrevented)&&(d.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:he(e.onPointerMove,kc(d=>{a.onItemEnter(d),!d.defaultPrevented&&!e.disabled&&!n.open&&!i.current&&(a.onPointerGraceIntentChange(null),i.current=window.setTimeout(()=>{n.onOpenChange(!0),u()},100))})),onPointerLeave:he(e.onPointerLeave,kc(d=>{var p,y;u();const f=(p=n.content)==null?void 0:p.getBoundingClientRect();if(f){const m=(y=n.content)==null?void 0:y.dataset.side,v=m==="right",b=v?-5:5,x=f[v?"left":"right"],_=f[v?"right":"left"];a.onPointerGraceIntentChange({area:[{x:d.clientX+b,y:d.clientY},{x,y:f.top},{x:_,y:f.top},{x:_,y:f.bottom},{x,y:f.bottom}],side:m}),window.clearTimeout(s.current),s.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(d),d.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:he(e.onKeyDown,d=>{var p;const f=a.searchRef.current!=="";e.disabled||f&&d.key===" "||MM[r.dir].includes(d.key)&&(n.onOpenChange(!0),(p=n.content)==null||p.focus(),d.preventDefault())})})})});GM.displayName=Nc;var QM="MenuSubContent",JM=g.forwardRef((e,t)=>{const n=TM(Vn,e.__scopeMenu),{forceMount:r=n.forceMount,...o}=e,a=to(Vn,e.__scopeMenu),i=Mi(Vn,e.__scopeMenu),s=KM(QM,e.__scopeMenu),c=g.useRef(null),l=tt(t,c);return h.jsx(Ci.Provider,{scope:e.__scopeMenu,children:h.jsx(On,{present:r||a.open,children:h.jsx(Ci.Slot,{scope:e.__scopeMenu,children:h.jsx(sg,{id:s.contentId,"aria-labelledby":s.triggerId,...o,ref:l,align:"start",side:i.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{var d;i.isUsingKeyboardRef.current&&((d=c.current)==null||d.focus()),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:he(e.onFocusOutside,u=>{u.target!==s.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:he(e.onEscapeKeyDown,u=>{i.onClose(),u.preventDefault()}),onKeyDown:he(e.onKeyDown,u=>{var p;const d=u.currentTarget.contains(u.target),f=NM[i.dir].includes(u.key);d&&f&&(a.onOpenChange(!1),(p=s.trigger)==null||p.focus(),u.preventDefault())})})})})})});JM.displayName=QM;function ZM(e){return e?"open":"closed"}function kd(e){return e==="indeterminate"}function dg(e){return kd(e)?"indeterminate":e?"checked":"unchecked"}function EW(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function SW(e,t){return e.map((n,r)=>e[(t+r)%e.length])}function CW(e,t,n){const r=t.length>1&&Array.from(t).every(s=>s===t[0])?t[0]:t,o=n?e.indexOf(n):-1;let a=SW(e,Math.max(o,0));r.length===1&&(a=a.filter(s=>s!==n));const i=a.find(s=>s.toLowerCase().startsWith(r.toLowerCase()));return i!==n?i:void 0}function OW(e,t){const{x:n,y:r}=e;let o=!1;for(let a=0,i=t.length-1;a<t.length;i=a++){const s=t[a].x,c=t[a].y,l=t[i].x,u=t[i].y;c>r!=u>r&&n<(l-s)*(r-c)/(u-c)+s&&(o=!o)}return o}function MW(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return OW(n,t)}function kc(e){return t=>t.pointerType==="mouse"?e(t):void 0}let Pd,eN,NW,Kt,tN,fg,pg;am=rg,Wh=og,om=RM,qh=IM,Yh=cg,Kh=DM,Xh=Nd,Gh=BM,Qh=zM,Jh=UM,Zh=WM,em=qM,tm=YM,$E=XM,nm=GM,rm=JM,Pd="DropdownMenu",[eN,NW]=Bn(Pd,[Lu]),Kt=Lu(),[tN,fg]=eN(Pd),pg=e=>{const{__scopeDropdownMenu:t,children:n,dir:r,open:o,defaultOpen:a,onOpenChange:i,modal:s=!0}=e,c=Kt(t),l=g.useRef(null),[u=!1,d]=Zt({prop:o,defaultProp:a,onChange:i});return h.jsx(tN,{scope:t,triggerId:ht(),triggerRef:l,contentId:ht(),open:u,onOpenChange:d,onOpenToggle:g.useCallback(()=>d(f=>!f),[d]),modal:s,children:h.jsx(am,{...c,open:u,onOpenChange:d,dir:r,modal:s,children:n})})},pg.displayName=Pd;var nN="DropdownMenuTrigger",rN=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...o}=e,a=fg(nN,n),i=Kt(n);return h.jsx(Wh,{asChild:!0,...i,children:h.jsx(Oe.button,{type:"button",id:a.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...o,ref:g$(t,a.triggerRef),onPointerDown:he(e.onPointerDown,s=>{!r&&s.button===0&&s.ctrlKey===!1&&(a.onOpenToggle(),a.open||s.preventDefault())}),onKeyDown:he(e.onKeyDown,s=>{r||(["Enter"," "].includes(s.key)&&a.onOpenToggle(),s.key==="ArrowDown"&&a.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(s.key)&&s.preventDefault())})})})});rN.displayName=nN;var kW="DropdownMenuPortal",oN=e=>{const{__scopeDropdownMenu:t,...n}=e,r=Kt(t);return h.jsx(om,{...r,...n})};oN.displayName=kW;var aN="DropdownMenuContent",iN=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=fg(aN,n),a=Kt(n),i=g.useRef(!1);return h.jsx(qh,{id:o.contentId,"aria-labelledby":o.triggerId,...a,...r,ref:t,onCloseAutoFocus:he(e.onCloseAutoFocus,s=>{var c;i.current||((c=o.triggerRef.current)==null||c.focus()),i.current=!1,s.preventDefault()}),onInteractOutside:he(e.onInteractOutside,s=>{const c=s.detail.originalEvent,l=c.button===0&&c.ctrlKey===!0,u=c.button===2||l;(!o.modal||u)&&(i.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});iN.displayName=aN;var PW="DropdownMenuGroup",sN=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=Kt(n);return h.jsx(Yh,{...o,...r,ref:t})});sN.displayName=PW;var AW="DropdownMenuLabel",cN=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=Kt(n);return h.jsx(Kh,{...o,...r,ref:t})});cN.displayName=AW;var TW="DropdownMenuItem",lN=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=Kt(n);return h.jsx(Xh,{...o,...r,ref:t})});lN.displayName=TW;var RW="DropdownMenuCheckboxItem",uN=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=Kt(n);return h.jsx(Gh,{...o,...r,ref:t})});uN.displayName=RW;var IW="DropdownMenuRadioGroup",dN=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=Kt(n);return h.jsx(Qh,{...o,...r,ref:t})});dN.displayName=IW;var DW="DropdownMenuRadioItem",fN=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=Kt(n);return h.jsx(Jh,{...o,...r,ref:t})});fN.displayName=DW;var LW="DropdownMenuItemIndicator",pN=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=Kt(n);return h.jsx(Zh,{...o,...r,ref:t})});pN.displayName=LW;var FW="DropdownMenuSeparator",hN=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=Kt(n);return h.jsx(em,{...o,...r,ref:t})});hN.displayName=FW;var BW="DropdownMenuArrow",$W=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=Kt(n);return h.jsx(tm,{...o,...r,ref:t})});$W.displayName=BW;var zW=e=>{const{__scopeDropdownMenu:t,children:n,open:r,onOpenChange:o,defaultOpen:a}=e,i=Kt(t),[s=!1,c]=Zt({prop:r,defaultProp:a,onChange:o});return h.jsx($E,{...i,open:s,onOpenChange:c,children:n})},VW="DropdownMenuSubTrigger",mN=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=Kt(n);return h.jsx(nm,{...o,...r,ref:t})});mN.displayName=VW;var UW="DropdownMenuSubContent",yN=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=Kt(n);return h.jsx(rm,{...o,...r,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});yN.displayName=UW,HE=pg,WE=rN,UE=oN,cm=iN,VE=sN,mm=cN,dm=lN,fm=uN,N$=dN,hm=fN,pm=pN,ym=hN,k$=zW,lm=mN,um=yN;const HW=HE,WW=WE,qW=VE,YW=g.forwardRef(({className:e,inset:t,children:n,...r},o)=>h.jsxs(lm,{ref:o,className:Q("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t&&"pl-8",e),...r,children:[n,h.jsx(de,{name:"chevron-right",className:"ml-auto"})]}));YW.displayName=lm.displayName;const KW=g.forwardRef(({className:e,...t},n)=>h.jsx(um,{ref:n,className:Q("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));KW.displayName=um.displayName;const gN=g.forwardRef(({className:e,sideOffset:t=4,...n},r)=>h.jsx(UE,{children:h.jsx(cm,{ref:r,sideOffset:t,className:Q("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));gN.displayName=cm.displayName;const vN=g.forwardRef(({className:e,inset:t,...n},r)=>h.jsx(dm,{ref:r,className:Q("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t&&"pl-8",e),...n}));vN.displayName=dm.displayName;const XW=g.forwardRef(({className:e,children:t,checked:n,...r},o)=>h.jsxs(fm,{ref:o,className:Q("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:n,...r,children:[h.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:h.jsx(pm,{children:h.jsx(de,{name:"check",className:"h-4 w-4"})})}),t]}));XW.displayName=fm.displayName;const GW=g.forwardRef(({className:e,children:t,...n},r)=>h.jsxs(hm,{ref:r,className:Q("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[h.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:h.jsx(pm,{children:h.jsx(de,{name:"circle",className:"h-4 w-4"})})}),t]}));GW.displayName=hm.displayName;const QW=g.forwardRef(({className:e,inset:t,...n},r)=>h.jsx(mm,{ref:r,className:Q("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...n}));QW.displayName=mm.displayName;const JW=g.forwardRef(({className:e,...t},n)=>h.jsx(ym,{ref:n,className:Q("-mx-1 my-1 h-px bg-muted",e),...t}));JW.displayName=ym.displayName;function ZW(){const{t:e}=Pe("sidebar"),{isMobile:t}=Ec();return h.jsx(xi,{children:h.jsx(Jr,{children:h.jsxs(HW,{children:[h.jsx(WW,{asChild:!0,children:h.jsxs(Zr,{size:"lg",className:"data-[state=open]:bg-sidebar-accent data-[state=open]:text-sidebar-accent-foreground",children:[h.jsx("div",{children:h.jsx(de,{name:"settings",size:28,className:"pr-2"})}),h.jsx(de,{name:"chevrons-up-down",className:"ml-auto size-4"})]})}),h.jsx(gN,{className:"w-[--radix-dropdown-menu-trigger-width] min-w-56 rounded-lg",side:t?"bottom":"right",align:"end",sideOffset:4,children:h.jsx(qW,{children:h.jsxs(vN,{children:[h.jsx(de,{name:"sparkles"}),e("contact")]})})})]})})})}const eq=Vr("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function tn({className:e,variant:t,...n}){return h.jsx("div",{className:Q(eq({variant:t}),e),...n})}function tq({applications:e,currentSession:t,setCurrentSession:n}){const{t:r}=Pe("sidebar"),o=lc(),a=sn(gM),i=g.useCallback((l,u)=>{a.show({id:u}),l.preventDefault()},[a]),s=l=>{n(l),o(cr("application",{applicationId:l.id}))},c=l=>{switch(l.main_source_type){case"Thread":return h.jsx(tn,{className:"ml-1",color:"blue",children:r("application_types.chat")});default:return null}};return h.jsxs(Sc,{className:"group-data-[collapsible=icon]:hidden pt-0",children:[h.jsx(Cc,{children:h.jsx("div",{className:"text-sm",children:r("applications")})}),h.jsxs(xi,{children:[e==null?void 0:e.map(l=>h.jsx(Jr,{className:"cursor-pointer",children:h.jsx(Zr,{asChild:!0,onClick:()=>s(l),children:h.jsxs("div",{className:"flex flex-row justify-between items-center !h-auto",children:[h.jsxs("div",{className:"flex gap-2",children:[(t==null?void 0:t.id)===l.id?h.jsx(de,{size:16,color:"green",name:"check"}):h.jsx(de,{size:16,name:"chevron-right"}),h.jsxs("span",{children:[l.name,c(l)]})]}),h.jsx(de,{onClick:u=>i(u,l.id),size:16,name:"trash-2"})]})})},l.id)),e?h.jsx(Jr,{children:h.jsxs(Zr,{className:"text-sidebar-foreground/70",children:[h.jsx(de,{name:"ellipsis",className:"text-sidebar-foreground/70"}),h.jsx("span",{children:r("more_session")})]})}):null]})]})}const nq={navMain:[{title:"playground.title",icon:h.jsx(de,{name:"square-terminal"}),isActive:!0,items:[{title:"playground.drag_and_drop"},{title:"playground.node_connections"},{title:"playground.delete_nodes"}]},{title:"model.title",url:"#",icon:h.jsx(de,{name:"bot"}),items:[{title:"model.llm"},{title:"model.embedding"}]},{title:"tutorial.title",icon:h.jsx(de,{name:"book-open"}),items:[{title:"tutorial.get_started"},{title:"tutorial.chat_with_llm"},{title:"tutorial.ai_structured_output"},{title:"tutorial.tool_calling"},{title:"tutorial.few_shot_example"},{title:"tutorial.vector_database"}]},{title:"application.title",icon:h.jsx(de,{name:"settings-2"}),items:[{title:"application.changelog"}]}]};function rq({sessions:e,applications:t,currentSession:n,setCurrentSession:r,...o}){return h.jsxs(By,{collapsible:"icon",...o,children:[h.jsx("div",{className:"h-1"}),h.jsxs(zy,{children:[h.jsx(tW,{sessions:e||[],currentSession:n,setCurrentSession:r}),h.jsx(tq,{applications:t||[],currentSession:n,setCurrentSession:r}),h.jsx(LH,{items:nq.navMain})]}),h.jsx(KO,{children:h.jsx(ZW,{})}),h.jsx(YO,{})]})}function oq(){const{t:e}=Pe("common"),t=Wz(),n=lc(),r=Kr(),o=g.useRef(r),a=Nu(f=>f.setTheme),i=Nu(f=>f.theme),s=pt(f=>f.currentSession),c=pt(f=>f.sessions),l=pt(f=>f.applications),u=pt(f=>f.setCurrentSession);o.current=r,g.useEffect(()=>{s!=null&&s.id&&(r.pathname.includes(cr("whiteboard"))?t.sessionId?t.sessionId&&t.sessionId!==(s==null?void 0:s.id)&&u(t.sessionId):n(cr("whiteboard",{sessionId:s==null?void 0:s.id})):r.pathname.includes(cr("application"))&&(t.applicationId?t.applicationId&&t.applicationId!==(s==null?void 0:s.id)&&u(t.applicationId):n(cr("application",{applicationId:s==null?void 0:s.id}))))},[s==null?void 0:s.id,r.pathname,n,t.applicationId,t.sessionId,u]),g.useEffect(()=>{u(t.sessionId||t.applicationId).then(f=>{f.type===hE.StandaloneApp&&o.current.pathname.includes(cr("whiteboard").replace("/",""))?n(cr("application",{applicationId:f.id})):f.type===hE.Whiteboard&&o.current.pathname.includes(cr("application").replace("/",""))&&n(cr("whiteboard",{sessionId:f.id}))})},[n,t.applicationId,t.sessionId,u]);const d=g.useCallback(()=>{a(i==="dark"?"light":"dark")},[i,a]);return h.jsxs(Fy,{defaultOpen:!1,children:[h.jsx(rq,{sessions:c,applications:l,currentSession:s,setCurrentSession:u}),h.jsxs($y,{className:"max-h-screen overflow-hidden",children:[h.jsxs("header",{className:"flex h-14 shrink-0 items-center gap-2 transition-[width,height] ease-linear justify-between",children:[h.jsxs("div",{className:"flex items-center gap-2 px-4",children:[h.jsx(qO,{}),h.jsx(Ge,{children:e("whiteboard")})]}),h.jsxs("div",{className:"flex items-center gap-2 px-4",children:[h.jsx(ut,{onClick:d,variant:"link",children:h.jsx(de,{size:18,name:i==="dark"?"moon":"sun"})}),h.jsx("a",{referrerPolicy:"no-referrer",target:"_blank",href:"https://github.com/zrg-team/NoLLMChat",children:h.jsx(de,{size:18,name:"github"})})]})]}),h.jsx(hc,{className:"shrink-0"}),h.jsx("div",{className:"flex flex-1 flex-col p-0 m-0 overflow-y-auto",children:h.jsx(c7,{})})]})]})}var hg="Avatar",[aq,Owe]=Bn(hg),[iq,bN]=aq(hg),xN=g.forwardRef((e,t)=>{const{__scopeAvatar:n,...r}=e,[o,a]=g.useState("idle");return h.jsx(iq,{scope:n,imageLoadingStatus:o,onImageLoadingStatusChange:a,children:h.jsx(Oe.span,{...r,ref:t})})});xN.displayName=hg;var wN="AvatarImage",_N=g.forwardRef((e,t)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:o=()=>{},...a}=e,i=bN(wN,n),s=sq(r,a.referrerPolicy),c=Ro(l=>{o(l),i.onImageLoadingStatusChange(l)});return vn(()=>{s!=="idle"&&c(s)},[s,c]),s==="loaded"?h.jsx(Oe.img,{...a,ref:t,src:r}):null});_N.displayName=wN;var jN="AvatarFallback",EN=g.forwardRef((e,t)=>{const{__scopeAvatar:n,delayMs:r,...o}=e,a=bN(jN,n),[i,s]=g.useState(r===void 0);return g.useEffect(()=>{if(r!==void 0){const c=window.setTimeout(()=>s(!0),r);return()=>window.clearTimeout(c)}},[r]),i&&a.imageLoadingStatus!=="loaded"?h.jsx(Oe.span,{...o,ref:t}):null});EN.displayName=jN;function sq(e,t){const[n,r]=g.useState("idle");return vn(()=>{if(!e){r("error");return}let o=!0;const a=new window.Image,i=s=>()=>{o&&r(s)};return r("loading"),a.onload=i("loaded"),a.onerror=i("error"),a.src=e,t&&(a.referrerPolicy=t),()=>{o=!1}},[e,t]),n}var SN=xN,CN=_N,ON=EN;const MN=g.forwardRef(({className:e,...t},n)=>h.jsx(SN,{ref:n,className:Q("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));MN.displayName=SN.displayName;const NN=g.forwardRef(({className:e,...t},n)=>h.jsx(CN,{ref:n,className:Q("aspect-square h-full w-full",e),...t}));NN.displayName=CN.displayName;const kN=g.forwardRef(({className:e,...t},n)=>h.jsx(ON,{ref:n,className:Q("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));kN.displayName=ON.displayName;function Ad(){return h.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",className:"text-foreground",children:[h.jsx("circle",{cx:"4",cy:"12",r:"2",fill:"currentColor",children:h.jsx("animate",{id:"spinner_qFRN",begin:"0;spinner_OcgL.end+0.25s",attributeName:"cy",calcMode:"spline",dur:"0.6s",values:"12;6;12",keySplines:".33,.66,.66,1;.33,0,.66,.33"})}),h.jsx("circle",{cx:"12",cy:"12",r:"2",fill:"currentColor",children:h.jsx("animate",{begin:"spinner_qFRN.begin+0.1s",attributeName:"cy",calcMode:"spline",dur:"0.6s",values:"12;6;12",keySplines:".33,.66,.66,1;.33,0,.66,.33"})}),h.jsx("circle",{cx:"20",cy:"12",r:"2",fill:"currentColor",children:h.jsx("animate",{id:"spinner_OcgL",begin:"spinner_qFRN.begin+0.2s",attributeName:"cy",calcMode:"spline",dur:"0.6s",values:"12;6;12",keySplines:".33,.66,.66,1;.33,0,.66,.33"})})]})}const cq=Vr("flex gap-2 max-w-[60%] items-end relative group",{variants:{variant:{received:"self-start",sent:"self-end flex-row-reverse"},layout:{default:"",ai:"max-w-full w-full items-center"}},defaultVariants:{variant:"received",layout:"default"}}),PN=g.forwardRef(({className:e,variant:t,layout:n,children:r,...o},a)=>h.jsx("div",{className:Q(cq({variant:t,layout:n,className:e}),"relative group"),ref:a,...o,children:g.Children.map(r,i=>g.isValidElement(i)&&typeof i.type!="string"?g.cloneElement(i,{variant:t,layout:n,className:o==null?void 0:o.innerclassname}):i)}));PN.displayName="ChatBubble";const lq=({src:e,fallback:t,className:n})=>h.jsxs(MN,{className:n,children:[h.jsx(NN,{src:e,alt:"Avatar"}),h.jsx(kN,{children:t})]}),uq=Vr("p-4",{variants:{variant:{received:"bg-secondary text-secondary-foreground rounded-r-lg rounded-tl-lg",sent:"bg-primary text-primary-foreground rounded-l-lg rounded-tr-lg"},layout:{default:"",ai:"border-t w-full rounded-none bg-transparent"}},defaultVariants:{variant:"received",layout:"default"}}),AN=g.forwardRef(({className:e,variant:t,layout:n,isLoading:r=!1,children:o,...a},i)=>h.jsx("div",{className:Q(uq({variant:t,layout:n,className:e}),"break-words max-w-full whitespace-pre-wrap"),ref:i,...a,children:r?h.jsx("div",{className:"flex items-center space-x-2",children:h.jsx(Ad,{})}):o}));AN.displayName="ChatBubbleMessage";const dq=({icon:e,onClick:t,className:n,variant:r="ghost",size:o="icon",...a})=>h.jsx(ut,{variant:r,size:o,className:n,onClick:t,...a,children:e}),fq=g.forwardRef(({variant:e,className:t,children:n,...r},o)=>h.jsx("div",{ref:o,className:Q("absolute top-1/2 -translate-y-1/2 flex opacity-0 group-hover:opacity-100 transition-opacity duration-200",e==="sent"?"-left-1 -translate-x-full flex-row-reverse":"-right-1 translate-x-full",t),...r,children:n}));fq.displayName="ChatBubbleActionWrapper";const TN=g.forwardRef(({className:e,children:t,...n},r)=>h.jsx("div",{className:Q("flex flex-col w-full h-full p-4 gap-6 overflow-y-auto",e),ref:r,...n,children:t}));TN.displayName="ChatMessageList";var RN="vercel.ai.error",pq=Symbol.for(RN),IN,hq=class R$ extends Error{constructor({name:t,message:n,cause:r}){super(n),this[IN]=!0,this.name=t,this.cause=r}static isInstance(t){return R$.hasMarker(t,RN)}static hasMarker(t,n){const r=Symbol.for(n);return t!=null&&typeof t=="object"&&r in t&&typeof t[r]=="boolean"&&t[r]===!0}};IN=pq;var Ni=hq;function DN(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}var LN="AI_InvalidArgumentError",FN=`vercel.ai.error.${LN}`,mq=Symbol.for(FN),BN,yq=class extends Ni{constructor({message:e,cause:t,argument:n}){super({name:LN,message:e,cause:t}),this[BN]=!0,this.argument=n}static isInstance(e){return Ni.hasMarker(e,FN)}};BN=mq;var $N="AI_JSONParseError",zN=`vercel.ai.error.${$N}`,gq=Symbol.for(zN),VN,UN=class extends Ni{constructor({text:e,cause:t}){super({name:$N,message:`JSON parsing failed: Text: ${e}.
Error message: ${DN(t)}`,cause:t}),this[VN]=!0,this.text=e}static isInstance(e){return Ni.hasMarker(e,zN)}};VN=gq;var HN="AI_TypeValidationError",WN=`vercel.ai.error.${HN}`,vq=Symbol.for(WN),qN,bq=class mS extends Ni{constructor({value:t,cause:n}){super({name:HN,message:`Type validation failed: Value: ${JSON.stringify(t)}.
Error message: ${DN(n)}`,cause:n}),this[qN]=!0,this.value=t}static isInstance(t){return Ni.hasMarker(t,WN)}static wrap({value:t,cause:n}){return mS.isInstance(n)&&n.value===t?n:new mS({value:t,cause:n})}};qN=vq;var YN=bq;let xq=(e,t=21)=>(n=t)=>{let r="",o=n;for(;o--;)r+=e[Math.random()*e.length|0];return r};var xa={exports:{}},KN;function wq(){if(KN)return xa.exports;KN=1;const e=typeof Ih<"u",t=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*:/,n=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/;function r(s,c,l){l==null&&c!==null&&typeof c=="object"&&(l=c,c=void 0),e&&Ih.isBuffer(s)&&(s=s.toString()),s&&s.charCodeAt(0)===65279&&(s=s.slice(1));const u=JSON.parse(s,c);if(u===null||typeof u!="object")return u;const d=l&&l.protoAction||"error",f=l&&l.constructorAction||"error";if(d==="ignore"&&f==="ignore")return u;if(d!=="ignore"&&f!=="ignore"){if(t.test(s)===!1&&n.test(s)===!1)return u}else if(d!=="ignore"&&f==="ignore"){if(t.test(s)===!1)return u}else if(n.test(s)===!1)return u;return o(u,{protoAction:d,constructorAction:f,safe:l&&l.safe})}function o(s,{protoAction:c="error",constructorAction:l="error",safe:u}={}){let d=[s];for(;d.length;){const f=d;d=[];for(const p of f){if(c!=="ignore"&&Object.prototype.hasOwnProperty.call(p,"__proto__")){if(u===!0)return null;if(c==="error")throw new SyntaxError("Object contains forbidden prototype property");delete p.__proto__}if(l!=="ignore"&&Object.prototype.hasOwnProperty.call(p,"constructor")&&Object.prototype.hasOwnProperty.call(p.constructor,"prototype")){if(u===!0)return null;if(l==="error")throw new SyntaxError("Object contains forbidden prototype property");delete p.constructor}for(const y in p){const m=p[y];m&&typeof m=="object"&&d.push(m)}}}return s}function a(s,c,l){const u=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return r(s,c,l)}finally{Error.stackTraceLimit=u}}function i(s,c){const l=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return r(s,c,{safe:!0})}catch{return null}finally{Error.stackTraceLimit=l}}return xa.exports=a,xa.exports.default=a,xa.exports.parse=a,xa.exports.safeParse=i,xa.exports.scan=o,xa.exports}var _q=wq();const jq=Xe(_q);var Eq=({prefix:e,size:t=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{const o=xq(n,t);if(e==null)return o;if(n.includes(r))throw new yq({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return a=>`${e}${r}${o(a)}`},XN=Eq(),mg=Symbol.for("vercel.ai.validator");function Sq(e){return{[mg]:!0,validate:e}}function Cq(e){return typeof e=="object"&&e!==null&&mg in e&&e[mg]===!0&&"validate"in e}function Oq(e){return Cq(e)?e:Mq(e)}function Mq(e){return Sq(t=>{const n=e.safeParse(t);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}})}function Nq({value:e,schema:t}){const n=Oq(t);try{if(n.validate==null)return{success:!0,value:e};const r=n.validate(e);return r.success?r:{success:!1,error:YN.wrap({value:e,cause:r.error})}}catch(r){return{success:!1,error:YN.wrap({value:e,cause:r})}}}function GN({text:e,schema:t}){try{const n=jq.parse(e);return t==null?{success:!0,value:n}:Nq({value:n,schema:t})}catch(n){return{success:!1,error:UN.isInstance(n)?n:new UN({text:e,cause:n})}}}var Td={code:"0",name:"text",parse:e=>{if(typeof e!="string")throw new Error('"text" parts expect a string value.');return{type:"text",value:e}}},Rd={code:"3",name:"error",parse:e=>{if(typeof e!="string")throw new Error('"error" parts expect a string value.');return{type:"error",value:e}}},Id={code:"4",name:"assistant_message",parse:e=>{if(e==null||typeof e!="object"||!("id"in e)||!("role"in e)||!("content"in e)||typeof e.id!="string"||typeof e.role!="string"||e.role!=="assistant"||!Array.isArray(e.content)||!e.content.every(t=>t!=null&&typeof t=="object"&&"type"in t&&t.type==="text"&&"text"in t&&t.text!=null&&typeof t.text=="object"&&"value"in t.text&&typeof t.text.value=="string"))throw new Error('"assistant_message" parts expect an object with an "id", "role", and "content" property.');return{type:"assistant_message",value:e}}},Dd={code:"5",name:"assistant_control_data",parse:e=>{if(e==null||typeof e!="object"||!("threadId"in e)||!("messageId"in e)||typeof e.threadId!="string"||typeof e.messageId!="string")throw new Error('"assistant_control_data" parts expect an object with a "threadId" and "messageId" property.');return{type:"assistant_control_data",value:{threadId:e.threadId,messageId:e.messageId}}}},Ld={code:"6",name:"data_message",parse:e=>{if(e==null||typeof e!="object"||!("role"in e)||!("data"in e)||typeof e.role!="string"||e.role!=="data")throw new Error('"data_message" parts expect an object with a "role" and "data" property.');return{type:"data_message",value:e}}},kq=[Td,Rd,Id,Dd,Ld];Td.code+"",Rd.code+"",Id.code+"",Dd.code+"",Ld.code+"",Td.name+"",Td.code,Rd.name+"",Rd.code,Id.name+"",Id.code,Dd.name+"",Dd.code,Ld.name+"",Ld.code,kq.map(e=>e.code);function Pq(e){const t=["ROOT"];let n=-1,r=null;function o(c,l,u){switch(c){case'"':{n=l,t.pop(),t.push(u),t.push("INSIDE_STRING");break}case"f":case"t":case"n":{n=l,r=l,t.pop(),t.push(u),t.push("INSIDE_LITERAL");break}case"-":{t.pop(),t.push(u),t.push("INSIDE_NUMBER");break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{n=l,t.pop(),t.push(u),t.push("INSIDE_NUMBER");break}case"{":{n=l,t.pop(),t.push(u),t.push("INSIDE_OBJECT_START");break}case"[":{n=l,t.pop(),t.push(u),t.push("INSIDE_ARRAY_START");break}}}function a(c,l){switch(c){case",":{t.pop(),t.push("INSIDE_OBJECT_AFTER_COMMA");break}case"}":{n=l,t.pop();break}}}function i(c,l){switch(c){case",":{t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{n=l,t.pop();break}}}for(let c=0;c<e.length;c++){const l=e[c];switch(t[t.length-1]){case"ROOT":o(l,c,"FINISH");break;case"INSIDE_OBJECT_START":{switch(l){case'"':{t.pop(),t.push("INSIDE_OBJECT_KEY");break}case"}":{n=c,t.pop();break}}break}case"INSIDE_OBJECT_AFTER_COMMA":{switch(l){case'"':{t.pop(),t.push("INSIDE_OBJECT_KEY");break}}break}case"INSIDE_OBJECT_KEY":{switch(l){case'"':{t.pop(),t.push("INSIDE_OBJECT_AFTER_KEY");break}}break}case"INSIDE_OBJECT_AFTER_KEY":{switch(l){case":":{t.pop(),t.push("INSIDE_OBJECT_BEFORE_VALUE");break}}break}case"INSIDE_OBJECT_BEFORE_VALUE":{o(l,c,"INSIDE_OBJECT_AFTER_VALUE");break}case"INSIDE_OBJECT_AFTER_VALUE":{a(l,c);break}case"INSIDE_STRING":{switch(l){case'"':{t.pop(),n=c;break}case"\\":{t.push("INSIDE_STRING_ESCAPE");break}default:n=c}break}case"INSIDE_ARRAY_START":{switch(l){case"]":{n=c,t.pop();break}default:{n=c,o(l,c,"INSIDE_ARRAY_AFTER_VALUE");break}}break}case"INSIDE_ARRAY_AFTER_VALUE":{switch(l){case",":{t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{n=c,t.pop();break}default:{n=c;break}}break}case"INSIDE_ARRAY_AFTER_COMMA":{o(l,c,"INSIDE_ARRAY_AFTER_VALUE");break}case"INSIDE_STRING_ESCAPE":{t.pop(),n=c;break}case"INSIDE_NUMBER":{switch(l){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{n=c;break}case"e":case"E":case"-":case".":break;case",":{t.pop(),t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&i(l,c),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&a(l,c);break}case"}":{t.pop(),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&a(l,c);break}case"]":{t.pop(),t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&i(l,c);break}default:{t.pop();break}}break}case"INSIDE_LITERAL":{const u=e.substring(r,c+1);!"false".startsWith(u)&&!"true".startsWith(u)&&!"null".startsWith(u)?(t.pop(),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"?a(l,c):t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&i(l,c)):n=c;break}}}let s=e.slice(0,n+1);for(let c=t.length-1;c>=0;c--)switch(t[c]){case"INSIDE_STRING":{s+='"';break}case"INSIDE_OBJECT_KEY":case"INSIDE_OBJECT_AFTER_KEY":case"INSIDE_OBJECT_AFTER_COMMA":case"INSIDE_OBJECT_START":case"INSIDE_OBJECT_BEFORE_VALUE":case"INSIDE_OBJECT_AFTER_VALUE":{s+="}";break}case"INSIDE_ARRAY_START":case"INSIDE_ARRAY_AFTER_COMMA":case"INSIDE_ARRAY_AFTER_VALUE":{s+="]";break}case"INSIDE_LITERAL":{const l=e.substring(r,e.length);"true".startsWith(l)?s+="true".slice(l.length):"false".startsWith(l)?s+="false".slice(l.length):"null".startsWith(l)&&(s+="null".slice(l.length))}}return s}function Aq(e){if(e===void 0)return{value:void 0,state:"undefined-input"};let t=GN({text:e});return t.success?{value:t.value,state:"successful-parse"}:(t=GN({text:Pq(e)}),t.success?{value:t.value,state:"repaired-parse"}:{value:void 0,state:"failed-parse"})}var Pc={code:"0",name:"text",parse:e=>{if(typeof e!="string")throw new Error('"text" parts expect a string value.');return{type:"text",value:e}}},Ac={code:"2",name:"data",parse:e=>{if(!Array.isArray(e))throw new Error('"data" parts expect an array value.');return{type:"data",value:e}}},Tc={code:"3",name:"error",parse:e=>{if(typeof e!="string")throw new Error('"error" parts expect a string value.');return{type:"error",value:e}}},Rc={code:"8",name:"message_annotations",parse:e=>{if(!Array.isArray(e))throw new Error('"message_annotations" parts expect an array value.');return{type:"message_annotations",value:e}}},Ic={code:"9",name:"tool_call",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("toolName"in e)||typeof e.toolName!="string"||!("args"in e)||typeof e.args!="object")throw new Error('"tool_call" parts expect an object with a "toolCallId", "toolName", and "args" property.');return{type:"tool_call",value:e}}},Dc={code:"a",name:"tool_result",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("result"in e))throw new Error('"tool_result" parts expect an object with a "toolCallId" and a "result" property.');return{type:"tool_result",value:e}}},Lc={code:"b",name:"tool_call_streaming_start",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("toolName"in e)||typeof e.toolName!="string")throw new Error('"tool_call_streaming_start" parts expect an object with a "toolCallId" and "toolName" property.');return{type:"tool_call_streaming_start",value:e}}},Fc={code:"c",name:"tool_call_delta",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("argsTextDelta"in e)||typeof e.argsTextDelta!="string")throw new Error('"tool_call_delta" parts expect an object with a "toolCallId" and "argsTextDelta" property.');return{type:"tool_call_delta",value:e}}},Bc={code:"d",name:"finish_message",parse:e=>{if(e==null||typeof e!="object"||!("finishReason"in e)||typeof e.finishReason!="string")throw new Error('"finish_message" parts expect an object with a "finishReason" property.');const t={finishReason:e.finishReason};return"usage"in e&&e.usage!=null&&typeof e.usage=="object"&&"promptTokens"in e.usage&&"completionTokens"in e.usage&&(t.usage={promptTokens:typeof e.usage.promptTokens=="number"?e.usage.promptTokens:Number.NaN,completionTokens:typeof e.usage.completionTokens=="number"?e.usage.completionTokens:Number.NaN}),{type:"finish_message",value:t}}},$c={code:"e",name:"finish_step",parse:e=>{if(e==null||typeof e!="object"||!("finishReason"in e)||typeof e.finishReason!="string")throw new Error('"finish_step" parts expect an object with a "finishReason" property.');const t={finishReason:e.finishReason,isContinued:!1};return"usage"in e&&e.usage!=null&&typeof e.usage=="object"&&"promptTokens"in e.usage&&"completionTokens"in e.usage&&(t.usage={promptTokens:typeof e.usage.promptTokens=="number"?e.usage.promptTokens:Number.NaN,completionTokens:typeof e.usage.completionTokens=="number"?e.usage.completionTokens:Number.NaN}),"isContinued"in e&&typeof e.isContinued=="boolean"&&(t.isContinued=e.isContinued),{type:"finish_step",value:t}}},Tq=[Pc,Ac,Tc,Rc,Ic,Dc,Lc,Fc,Bc,$c],Rq={[Pc.code]:Pc,[Ac.code]:Ac,[Tc.code]:Tc,[Rc.code]:Rc,[Ic.code]:Ic,[Dc.code]:Dc,[Lc.code]:Lc,[Fc.code]:Fc,[Bc.code]:Bc,[$c.code]:$c};Pc.name+"",Pc.code,Ac.name+"",Ac.code,Tc.name+"",Tc.code,Rc.name+"",Rc.code,Ic.name+"",Ic.code,Dc.name+"",Dc.code,Lc.name+"",Lc.code,Fc.name+"",Fc.code,Bc.name+"",Bc.code,$c.name+"",$c.code;var Iq=Tq.map(e=>e.code),Dq=e=>{const t=e.indexOf(":");if(t===-1)throw new Error("Failed to parse stream string. No separator found.");const n=e.slice(0,t);if(!Iq.includes(n))throw new Error(`Failed to parse stream string. Invalid code ${n}.`);const r=n,o=e.slice(t+1),a=JSON.parse(o);return Rq[r].parse(a)},Lq=10;function Fq(e,t){const n=new Uint8Array(t);let r=0;for(const o of e)n.set(o,r),r+=o.length;return e.length=0,n}async function Bq({stream:e,onTextPart:t,onDataPart:n,onErrorPart:r,onToolCallStreamingStartPart:o,onToolCallDeltaPart:a,onToolCallPart:i,onToolResultPart:s,onMessageAnnotationsPart:c,onFinishMessagePart:l,onFinishStepPart:u}){const d=e.getReader(),f=new TextDecoder,p=[];let y=0;for(;;){const{value:m}=await d.read();if(m&&(p.push(m),y+=m.length,m[m.length-1]!==Lq))continue;if(p.length===0)break;const v=Fq(p,y);y=0;const b=f.decode(v,{stream:!0}).split(`
`).filter(x=>x!=="").map(Dq);for(const{type:x,value:_}of b)switch(x){case"text":await(t==null?void 0:t(_));break;case"data":await(n==null?void 0:n(_));break;case"error":await(r==null?void 0:r(_));break;case"message_annotations":await(c==null?void 0:c(_));break;case"tool_call_streaming_start":await(o==null?void 0:o(_));break;case"tool_call_delta":await(a==null?void 0:a(_));break;case"tool_call":await(i==null?void 0:i(_));break;case"tool_result":await(s==null?void 0:s(_));break;case"finish_message":await(l==null?void 0:l(_));break;case"finish_step":await(u==null?void 0:u(_));break;default:{const w=x;throw new Error(`Unknown stream part type: ${w}`)}}}}function $q({promptTokens:e,completionTokens:t}){return{promptTokens:e,completionTokens:t,totalTokens:e+t}}async function zq({stream:e,update:t,onToolCall:n,onFinish:r,generateId:o=XN,getCurrentDate:a=()=>new Date}){const i=a();let s,c=!0;const l=[],u=[];let d;const f={};let p={completionTokens:NaN,promptTokens:NaN,totalTokens:NaN},y="unknown";function m(){const b=[...u];if(s==null){t(l,b);return}d!=null&&d.length&&(s.annotations=d);const x={...JSON.parse(JSON.stringify(s)),revisionId:o()};t([...l,x],b)}function v(){return(c||s==null)&&(s!=null&&l.push(s),c=!1,s={id:o(),role:"assistant",content:"",createdAt:i}),s}await Bq({stream:e,onTextPart(b){const x=v();s={...x,content:x.content+b},m()},onToolCallStreamingStartPart(b){const x=v();x.toolInvocations==null&&(x.toolInvocations=[]),f[b.toolCallId]={text:"",toolName:b.toolName,index:x.toolInvocations.length},x.toolInvocations.push({state:"partial-call",toolCallId:b.toolCallId,toolName:b.toolName,args:void 0}),m()},onToolCallDeltaPart(b){const x=v(),_=f[b.toolCallId];_.text+=b.argsTextDelta;const{value:w}=Aq(_.text);x.toolInvocations[_.index]={state:"partial-call",toolCallId:b.toolCallId,toolName:_.toolName,args:w},m()},async onToolCallPart(b){const x=v();if(f[b.toolCallId]!=null?x.toolInvocations[f[b.toolCallId].index]={state:"call",...b}:(x.toolInvocations==null&&(x.toolInvocations=[]),x.toolInvocations.push({state:"call",...b})),n){const _=await n({toolCall:b});_!=null&&(x.toolInvocations[x.toolInvocations.length-1]={state:"result",...b,result:_})}m()},onToolResultPart(b){const x=v().toolInvocations;if(x==null)throw new Error("tool_result must be preceded by a tool_call");const _=x.findIndex(w=>w.toolCallId===b.toolCallId);if(_===-1)throw new Error("tool_result must be preceded by a tool_call with the same toolCallId");x[_]={...x[_],state:"result",...b},m()},onDataPart(b){u.push(...b),m()},onMessageAnnotationsPart(b){d==null?d=[...b]:d.push(...b),m()},onFinishStepPart(b){c=!b.isContinued},onFinishMessagePart(b){y=b.finishReason,b.usage!=null&&(p=$q(b.usage))},onErrorPart(b){throw new Error(b)}}),r==null||r({message:s,finishReason:y,usage:p})}async function Vq({stream:e,onTextPart:t}){const n=e.pipeThrough(new TextDecoderStream).getReader();for(;;){const{done:r,value:o}=await n.read();if(r)break;await t(o)}}var Uq=()=>fetch;async function Hq({api:e,body:t,streamProtocol:n="data",credentials:r,headers:o,abortController:a,restoreMessagesOnFailure:i,onResponse:s,onUpdate:c,onFinish:l,onToolCall:u,generateId:d,fetch:f=Uq()}){var p,y;const m=await f(e,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json",...o},signal:(p=a==null?void 0:a())==null?void 0:p.signal,credentials:r}).catch(v=>{throw i(),v});if(s)try{await s(m)}catch(v){throw v}if(!m.ok)throw i(),new Error((y=await m.text())!=null?y:"Failed to fetch the chat response.");if(!m.body)throw new Error("The response body is empty.");switch(n){case"text":{const v={id:d(),createdAt:new Date,role:"assistant",content:""};await Vq({stream:m.body,onTextPart:b=>{v.content+=b,c([{...v}],[])}}),l==null||l(v,{usage:{completionTokens:NaN,promptTokens:NaN,totalTokens:NaN},finishReason:"unknown"});return}case"data":{await zq({stream:m.body,update:c,onToolCall:u,onFinish({message:v,finishReason:b,usage:x}){l&&v!=null&&l(v,{usage:x,finishReason:b})},generateId:d});return}default:{const v=n;throw new Error(`Unknown stream protocol: ${v}`)}}}var QN={exports:{}},yg={},JN;function Wq(){if(JN)return yg;JN=1;var e=v$();function t(d,f){return d===f&&(d!==0||1/d===1/f)||d!==d&&f!==f}var n=typeof Object.is=="function"?Object.is:t,r=e.useState,o=e.useEffect,a=e.useLayoutEffect,i=e.useDebugValue;function s(d,f){var p=f(),y=r({inst:{value:p,getSnapshot:f}}),m=y[0].inst,v=y[1];return a(function(){m.value=p,m.getSnapshot=f,c(m)&&v({inst:m})},[d,p,f]),o(function(){return c(m)&&v({inst:m}),d(function(){c(m)&&v({inst:m})})},[d]),i(p),p}function c(d){var f=d.getSnapshot;d=d.value;try{var p=f();return!n(d,p)}catch{return!0}}function l(d,f){return f()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?l:s;return yg.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:u,yg}var ZN;function e2(){return ZN||(ZN=1,QN.exports=Wq()),QN.exports}Du=e2();let no,un,Fd,Qe,lr,ro,t2,zc;A$=Xe(Du),no=()=>{},un=no(),Fd=Object,Qe=e=>e===un,lr=e=>typeof e=="function",ro=(e,t)=>({...e,...t}),t2=e=>lr(e.then),zc=new WeakMap;let qq=0;const Vc=e=>{const t=typeof e,n=e&&e.constructor,r=n==Date;let o,a;if(Fd(e)===e&&!r&&n!=RegExp){if(o=zc.get(e),o)return o;if(o=++qq+"~",zc.set(e,o),n==Array){for(o="@",a=0;a<e.length;a++)o+=Vc(e[a])+",";zc.set(e,o)}if(n==Fd){o="#";const i=Fd.keys(e).sort();for(;!Qe(a=i.pop());)Qe(e[a])||(o+=a+":"+Vc(e[a])+",");zc.set(e,o)}}else o=r?e.toJSON():t=="symbol"?e.toString():t=="string"?JSON.stringify(e):""+e;return o},oo=new WeakMap,gg={},Bd={},vg="undefined",$d=typeof window!=vg,bg=typeof document!=vg,Yq=()=>$d&&typeof window.requestAnimationFrame!=vg,n2=(e,t)=>{const n=oo.get(e);return[()=>!Qe(t)&&e.get(t)||gg,r=>{if(!Qe(t)){const o=e.get(t);t in Bd||(Bd[t]=o),n[5](t,ro(o,r),o||gg)}},n[6],()=>!Qe(t)&&t in Bd?Bd[t]:!Qe(t)&&e.get(t)||gg]};let xg=!0;const Kq=()=>xg,[wg,_g]=$d&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[no,no],Xq=()=>{const e=bg&&document.visibilityState;return Qe(e)||e!=="hidden"},Gq=e=>(bg&&document.addEventListener("visibilitychange",e),wg("focus",e),()=>{bg&&document.removeEventListener("visibilitychange",e),_g("focus",e)}),Qq=e=>{const t=()=>{xg=!0,e()},n=()=>{xg=!1};return wg("online",t),wg("offline",n),()=>{_g("online",t),_g("offline",n)}},Jq={isOnline:Kq,isVisible:Xq},Zq={initFocus:Gq,initReconnect:Qq},r2=!V.useId,Uc=!$d||"Deno"in window,eY=e=>Yq()?window.requestAnimationFrame(e):setTimeout(e,1),jg=Uc?g.useEffect:g.useLayoutEffect,Eg=typeof navigator<"u"&&navigator.connection,o2=!Uc&&Eg&&(["slow-2g","2g"].includes(Eg.effectiveType)||Eg.saveData),Sg=e=>{if(lr(e))try{e=e()}catch{e=""}const t=e;return e=typeof e=="string"?e:(Array.isArray(e)?e.length:e)?Vc(e):"",[e,t]};let tY=0;const Cg=()=>++tY,a2=0,i2=1,s2=2;var Hc={__proto__:null,ERROR_REVALIDATE_EVENT:3,FOCUS_EVENT:a2,MUTATE_EVENT:s2,RECONNECT_EVENT:i2};async function c2(...e){const[t,n,r,o]=e,a=ro({populateCache:!0,throwOnError:!0},typeof o=="boolean"?{revalidate:o}:o||{});let i=a.populateCache;const s=a.rollbackOnError;let c=a.optimisticData;const l=f=>typeof s=="function"?s(f):s!==!1,u=a.throwOnError;if(lr(n)){const f=n,p=[],y=t.keys();for(const m of y)!/^\$(inf|sub)\$/.test(m)&&f(t.get(m)._k)&&p.push(m);return Promise.all(p.map(d))}return d(n);async function d(f){const[p]=Sg(f);if(!p)return;const[y,m]=n2(t,p),[v,b,x,_]=oo.get(t),w=()=>{const A=v[p];return(lr(a.revalidate)?a.revalidate(y().data,f):a.revalidate!==!1)&&(delete x[p],delete _[p],A&&A[0])?A[0](s2).then(()=>y().data):y().data};if(e.length<3)return w();let j=r,E;const S=Cg();b[p]=[S,0];const O=!Qe(c),N=y(),P=N.data,k=N._c,R=Qe(k)?P:k;if(O&&(c=lr(c)?c(R,P):c,m({data:c,_c:R})),lr(j))try{j=j(R)}catch(A){E=A}if(j&&t2(j))if(j=await j.catch(A=>{E=A}),S!==b[p][0]){if(E)throw E;return j}else E&&O&&l(E)&&(i=!0,m({data:R,_c:un}));if(i&&!E)if(lr(i)){const A=i(j,R);m({data:A,error:un,_c:un})}else m({data:j,error:un,_c:un});if(b[p][1]=Cg(),Promise.resolve(w()).then(()=>{m({_c:un})}),E){if(u)throw E;return}return j}}const l2=(e,t)=>{for(const n in e)e[n][0]&&e[n][0](t)},nY=(e,t)=>{if(!oo.has(e)){const n=ro(Zq,t),r={},o=c2.bind(un,e);let a=no;const i={},s=(u,d)=>{const f=i[u]||[];return i[u]=f,f.push(d),()=>f.splice(f.indexOf(d),1)},c=(u,d,f)=>{e.set(u,d);const p=i[u];if(p)for(const y of p)y(d,f)},l=()=>{if(!oo.has(e)&&(oo.set(e,[r,{},{},{},o,c,s]),!Uc)){const u=n.initFocus(setTimeout.bind(un,l2.bind(un,r,a2))),d=n.initReconnect(setTimeout.bind(un,l2.bind(un,r,i2)));a=()=>{u&&u(),d&&d(),oo.delete(e)}}};return l(),[e,o,l,a]}return[e,oo.get(e)[4]]},rY=(e,t,n,r,o)=>{const a=n.errorRetryCount,i=o.retryCount,s=~~((Math.random()+.5)*(1<<(i<8?i:8)))*n.errorRetryInterval;!Qe(a)&&i>a||setTimeout(r,s,o)},oY=(e,t)=>Vc(e)==Vc(t),[u2,aY]=nY(new Map),iY=ro({onLoadingSlow:no,onSuccess:no,onError:no,onErrorRetry:rY,onDiscarded:no,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:o2?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:o2?5e3:3e3,compare:oY,isPaused:()=>!1,cache:u2,mutate:aY,fallback:{}},Jq),sY=(e,t)=>{const n=ro(e,t);if(t){const{use:r,fallback:o}=e,{use:a,fallback:i}=t;r&&a&&(n.use=r.concat(a)),o&&i&&(n.fallback=ro(o,i))}return n},cY=g.createContext({}),lY="$inf$",d2=$d&&window.__SWR_DEVTOOLS_USE__,uY=d2?window.__SWR_DEVTOOLS_USE__:[],dY=()=>{d2&&(window.__SWR_DEVTOOLS_REACT__=V)},fY=e=>lr(e[1])?[e[0],e[1],e[2]||{}]:[e[0],null,(e[1]===null?e[2]:e[1])||{}],pY=()=>ro(iY,g.useContext(cY)),hY=e=>(t,n,r)=>e(t,n&&((...o)=>{const[a]=Sg(t),[,,,i]=oo.get(u2);if(a.startsWith(lY))return n(...o);const s=i[a];return Qe(s)?n(...o):(delete i[a],s)}),r),mY=uY.concat(hY),yY=e=>function(...t){const n=pY(),[r,o,a]=fY(t),i=sY(n,a);let s=e;const{use:c}=i,l=(c||[]).concat(mY);for(let u=l.length;u--;)s=l[u](s);return s(r,o||i.fetcher||null,i)},gY=(e,t,n)=>{const r=t[e]||(t[e]=[]);return r.push(n),()=>{const o=r.indexOf(n);o>=0&&(r[o]=r[r.length-1],r.pop())}};dY();const f2=V.use||(e=>{if(e.status==="pending")throw e;if(e.status==="fulfilled")return e.value;throw e.status==="rejected"?e.reason:(e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t}),e)}),Og={dedupe:!0},vY=(e,t,n)=>{const{cache:r,compare:o,suspense:a,fallbackData:i,revalidateOnMount:s,revalidateIfStale:c,refreshInterval:l,refreshWhenHidden:u,refreshWhenOffline:d,keepPreviousData:f}=n,[p,y,m,v]=oo.get(r),[b,x]=Sg(e),_=g.useRef(!1),w=g.useRef(!1),j=g.useRef(b),E=g.useRef(t),S=g.useRef(n),O=()=>S.current,N=()=>O().isVisible()&&O().isOnline(),[P,k,R,A]=n2(r,b),C=g.useRef({}).current,M=Qe(i)?n.fallback[b]:i,T=(B,se)=>{for(const ce in C){const ve=ce;if(ve==="data"){if(!o(B[ve],se[ve])&&(!Qe(B[ve])||!o(G,se[ve])))return!1}else if(se[ve]!==B[ve])return!1}return!0},I=g.useMemo(()=>{const B=!b||!t?!1:Qe(s)?O().isPaused()||a?!1:Qe(c)?!0:c:s,se=ze=>{const at=ro(ze);return delete at._k,B?{isValidating:!0,isLoading:!0,...at}:at},ce=P(),ve=A(),Te=se(ce),qe=ce===ve?Te:se(ve);let Ye=Te;return[()=>{const ze=se(P());return T(ze,Ye)?(Ye.data=ze.data,Ye.isLoading=ze.isLoading,Ye.isValidating=ze.isValidating,Ye.error=ze.error,Ye):(Ye=ze,ze)},()=>qe]},[r,b]),L=Du.useSyncExternalStore(g.useCallback(B=>R(b,(se,ce)=>{T(ce,se)||B()}),[r,b]),I[0],I[1]),D=!_.current,$=p[b]&&p[b].length>0,U=L.data,F=Qe(U)?M:U,H=L.error,Y=g.useRef(F),G=f?Qe(U)?Y.current:U:F,re=$&&!Qe(H)?!1:D&&!Qe(s)?s:O().isPaused()?!1:a?Qe(F)?!1:c:Qe(F)||c,Z=!!(b&&t&&D&&re),q=Qe(L.isValidating)?Z:L.isValidating,W=Qe(L.isLoading)?Z:L.isLoading,J=g.useCallback(async B=>{const se=E.current;if(!b||!se||w.current||O().isPaused())return!1;let ce,ve,Te=!0;const qe=B||{},Ye=!m[b]||!qe.dedupe,ze=()=>r2?!w.current&&b===j.current&&_.current:b===j.current,at={isValidating:!1,isLoading:!1},He=()=>{k(at)},it=()=>{const Et=m[b];Et&&Et[1]===ve&&delete m[b]},Vt={isValidating:!0};Qe(P().data)&&(Vt.isLoading=!0);try{if(Ye&&(k(Vt),n.loadingTimeout&&Qe(P().data)&&setTimeout(()=>{Te&&ze()&&O().onLoadingSlow(b,n)},n.loadingTimeout),m[b]=[se(x),Cg()]),[ce,ve]=m[b],ce=await ce,Ye&&setTimeout(it,n.dedupingInterval),!m[b]||m[b][1]!==ve)return Ye&&ze()&&O().onDiscarded(b),!1;at.error=un;const Et=y[b];if(!Qe(Et)&&(ve<=Et[0]||ve<=Et[1]||Et[1]===0))return He(),Ye&&ze()&&O().onDiscarded(b),!1;const mt=P().data;at.data=o(mt,ce)?mt:ce,Ye&&ze()&&O().onSuccess(ce,b,n)}catch(Et){it();const mt=O(),{shouldRetryOnError:Tt}=mt;mt.isPaused()||(at.error=Et,Ye&&ze()&&(mt.onError(Et,b,mt),(Tt===!0||lr(Tt)&&Tt(Et))&&(!O().revalidateOnFocus||!O().revalidateOnReconnect||N())&&mt.onErrorRetry(Et,b,mt,gn=>{const wr=p[b];wr&&wr[0]&&wr[0](Hc.ERROR_REVALIDATE_EVENT,gn)},{retryCount:(qe.retryCount||0)+1,dedupe:!0})))}return Te=!1,He(),!0},[b,r]),te=g.useCallback((...B)=>c2(r,j.current,...B),[]);if(jg(()=>{E.current=t,S.current=n,Qe(U)||(Y.current=U)}),jg(()=>{if(!b)return;const B=J.bind(un,Og);let se=0;const ce=gY(b,p,(ve,Te={})=>{if(ve==Hc.FOCUS_EVENT){const qe=Date.now();O().revalidateOnFocus&&qe>se&&N()&&(se=qe+O().focusThrottleInterval,B())}else if(ve==Hc.RECONNECT_EVENT)O().revalidateOnReconnect&&N()&&B();else{if(ve==Hc.MUTATE_EVENT)return J();if(ve==Hc.ERROR_REVALIDATE_EVENT)return J(Te)}});return w.current=!1,j.current=b,_.current=!0,k({_k:x}),re&&(Qe(F)||Uc?B():eY(B)),()=>{w.current=!0,ce()}},[b]),jg(()=>{let B;function se(){const ve=lr(l)?l(P().data):l;ve&&B!==-1&&(B=setTimeout(ce,ve))}function ce(){!P().error&&(u||O().isVisible())&&(d||O().isOnline())?J(Og).then(se):se()}return se(),()=>{B&&(clearTimeout(B),B=-1)}},[l,u,d,b]),g.useDebugValue(G),a&&Qe(F)&&b){if(!r2&&Uc)throw new Error("Fallback data is required when using suspense in SSR.");E.current=t,S.current=n,w.current=!1;const B=v[b];if(!Qe(B)){const se=te(B);f2(se)}if(Qe(H)){const se=J(Og);Qe(G)||(se.status="fulfilled",se.value=!0),f2(se)}else throw H}return{mutate:te,get data(){return C.data=!0,G},get error(){return C.error=!0,H},get isValidating(){return C.isValidating=!0,q},get isLoading(){return C.isLoading=!0,W}}},zd=yY(vY);var Mg,p2;function bY(){if(p2)return Mg;p2=1;function e(t,n){if(typeof t!="function")throw new TypeError(`Expected the first argument to be a \`function\`, got \`${typeof t}\`.`);let r,o=0;return function(...a){clearTimeout(r);const i=Date.now(),s=i-o,c=n-s;c<=0?(o=i,t.apply(this,a)):r=setTimeout(()=>{o=Date.now(),t.apply(this,a)},c)}}return Mg=e,Mg}var xY=bY();const wY=Xe(xY);function h2(e,t){return t!=null?wY(e,t):e}var _Y=async(e,t,n,r,o,a,i,s,c,l,u,d,f,p,y,m,v)=>{var b;const x=i.current;n(t.messages,!1);const _=p?t.messages:t.messages.map(({role:j,content:E,experimental_attachments:S,data:O,annotations:N,toolInvocations:P})=>({role:j,content:E,...S!==void 0&&{experimental_attachments:S},...O!==void 0&&{data:O},...N!==void 0&&{annotations:N},...P!==void 0&&{toolInvocations:P}})),w=o.current;return await Hq({api:e,body:(b=y==null?void 0:y({messages:t.messages,requestData:t.data,requestBody:t.body}))!=null?b:{messages:_,data:t.data,...a.current.body,...t.body},streamProtocol:l,credentials:a.current.credentials,headers:{...a.current.headers,...t.headers},abortController:()=>s.current,restoreMessagesOnFailure(){v||n(x,!1)},onResponse:d,onUpdate(j,E){n([...t.messages,...j],!1),E!=null&&E.length&&r([...w??[],...E],!1)},onToolCall:f,onFinish:u,generateId:c,fetch:m})};function jY({api:e="/api/chat",id:t,initialMessages:n,initialInput:r="",sendExtraMessageFields:o,onToolCall:a,experimental_prepareRequestBody:i,maxSteps:s=1,streamProtocol:c="data",onResponse:l,onFinish:u,onError:d,credentials:f,headers:p,body:y,generateId:m=XN,fetch:v,keepLastMessageOnError:b=!0,experimental_throttle:x}={}){const _=g.useId(),w=t??_,j=typeof e=="string"?[e,w]:w,[E]=g.useState([]),{data:S,mutate:O}=zd([j,"messages"],null,{fallbackData:n??E}),N=g.useRef(S||[]);g.useEffect(()=>{N.current=S||[]},[S]);const{data:P,mutate:k}=zd([j,"streamData"],null),R=g.useRef(P);g.useEffect(()=>{R.current=P},[P]);const{data:A=!1,mutate:C}=zd([j,"loading"],null),{data:M=void 0,mutate:T}=zd([j,"error"],null),I=g.useRef(null),L=g.useRef({credentials:f,headers:p,body:y});g.useEffect(()=>{L.current={credentials:f,headers:p,body:y}},[f,p,y]);const D=g.useCallback(async q=>{const W=N.current.length;try{C(!0),T(void 0);const B=new AbortController;I.current=B,await _Y(e,q,h2(O,x),h2(k,x),R,L,N,I,m,c,u,l,a,o,i,v,b),I.current=null}catch(B){if(B.name==="AbortError")return I.current=null,null;d&&B instanceof Error&&d(B),T(B)}finally{C(!1)}const J=N.current,te=J[J.length-1];J.length>W&&te!=null&&s>1&&m2(te)&&EY(J)<s&&await D({messages:J})},[O,C,e,L,l,u,d,T,k,R,c,o,i,a,s,N,I,m,v,b,x]),$=g.useCallback(async(q,{data:W,headers:J,body:te,experimental_attachments:B}={})=>{var se,ce;q.id||(q.id=m());const ve=await y2(B),Te=N.current.concat({...q,id:(se=q.id)!=null?se:m(),createdAt:(ce=q.createdAt)!=null?ce:new Date,experimental_attachments:ve.length>0?ve:void 0});return D({messages:Te,headers:J,body:te,data:W})},[D,m]),U=g.useCallback(async({data:q,headers:W,body:J}={})=>{const te=N.current;if(te.length===0)return null;const B=te[te.length-1];return D({messages:B.role==="assistant"?te.slice(0,-1):te,headers:W,body:J,data:q})},[D]),F=g.useCallback(()=>{I.current&&(I.current.abort(),I.current=null)},[]),H=g.useCallback(q=>{typeof q=="function"&&(q=q(N.current)),O(q,!1),N.current=q},[O]),Y=g.useCallback(q=>{typeof q=="function"&&(q=q(R.current)),k(q,!1),R.current=q},[k]),[G,re]=g.useState(r),Z=g.useCallback(async(q,W={},J)=>{var te;if((te=q==null?void 0:q.preventDefault)==null||te.call(q),!G&&!W.allowEmptySubmit)return;J&&(L.current={...L.current,...J});const B=await y2(W.experimental_attachments),se={messages:!G&&!B.length&&W.allowEmptySubmit?N.current:N.current.concat({id:m(),createdAt:new Date,role:"user",content:G,experimental_attachments:B.length>0?B:void 0}),headers:W.headers,body:W.body,data:W.data};D(se),re("")},[G,m,D]);return{messages:S||[],setMessages:H,data:P,setData:Y,error:M,append:$,reload:U,stop:F,input:G,setInput:re,handleInputChange:q=>{re(q.target.value)},handleSubmit:Z,isLoading:A,addToolResult:({toolCallId:q,result:W})=>{const J=N.current.map((B,se,ce)=>se===ce.length-1&&B.role==="assistant"&&B.toolInvocations?{...B,toolInvocations:B.toolInvocations.map(ve=>ve.toolCallId===q?{...ve,result:W,state:"result"}:ve)}:B);O(J,!1);const te=J[J.length-1];m2(te)&&D({messages:J})}}}function m2(e){return e.role==="assistant"&&e.toolInvocations&&e.toolInvocations.length>0&&e.toolInvocations.every(t=>"result"in t)}function EY(e){let t=0;for(let n=e.length-1;n>=0&&e[n].role==="assistant";n--)t++;return t}async function y2(e){if(e==null)return[];if(e instanceof FileList)return Promise.all(Array.from(e).map(async t=>{const{name:n,type:r}=t,o=await new Promise((a,i)=>{const s=new FileReader;s.onload=c=>{var l;a((l=c.target)==null?void 0:l.result)},s.onerror=c=>i(c),s.readAsDataURL(t)});return{name:n,contentType:r,url:o}}));if(Array.isArray(e))return e;throw new Error("Invalid attachments type")}QE=jY;const ao=g.forwardRef(({className:e,...t},n)=>h.jsx("textarea",{className:Q("flex min-h-[100px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-0 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...t}));ao.displayName="Textarea";function SY({minHeight:e,maxHeight:t}){const n=g.useRef(null),r=g.useCallback(o=>{const a=n.current;if(!a)return;if(o){a.style.height=`${e}px`;return}a.style.height=`${e}px`;const i=Math.max(e,Math.min(a.scrollHeight,t??Number.POSITIVE_INFINITY));a.style.height=`${i}px`},[e,t]);return g.useEffect(()=>{const o=n.current;o&&(o.style.height=`${e}px`)},[e]),g.useEffect(()=>{const o=()=>r();return window.addEventListener("resize",o),()=>window.removeEventListener("resize",o)},[r]),{textareaRef:n,adjustHeight:r}}const CY=48,g2=164;function v2({onSubmit:e,disabled:t,enableTool:n,enableFile:r,placeholder:o,minHeight:a,maxHeight:i,className:s,onChange:c,value:l}){const[u,d]=g.useState(!1),[f,p]=g.useState(""),{textareaRef:y,adjustHeight:m}=SY({minHeight:a||CY,maxHeight:i||g2}),[v,b]=g.useState(!0),x=async _=>{try{d(!0),await e(f,_)}finally{d(!1)}};return h.jsx("div",{className:Q("w-full py-4 max-w-xl",s),children:h.jsx("div",{className:"relative w-full mx-auto",children:h.jsxs("div",{className:"relative flex flex-col",children:[h.jsx("div",{className:"overflow-y-auto",style:{maxHeight:`${i||g2}px`},children:h.jsx(ao,{id:"ai-input-04",value:(c?l:f)||"",disabled:t||u,placeholder:o,className:"w-full rounded-xl rounded-b-none px-4 py-3 bg-black/5 dark:bg-white/5 border-none dark:text-white placeholder:text-black/70 dark:placeholder:text-white/70 resize-none focus-visible:ring-0 leading-[1.2]",ref:y,onKeyDown:_=>{_.key==="Enter"&&!_.shiftKey&&(_.preventDefault(),x(_))},onChange:_=>{c||p(_.target.value),m(),c==null||c(_)}})}),h.jsxs("div",{className:"h-12 bg-black/5 dark:bg-white/5 rounded-b-xl",children:[h.jsxs("div",{className:"absolute left-3 bottom-3 flex items-center gap-2",children:[r?h.jsxs("label",{className:"cursor-pointer rounded-lg p-2 bg-black/5 dark:bg-white/5",children:[h.jsx("input",{type:"file",className:"hidden"}),h.jsx(de,{name:"paperclip",className:"w-4 h-4 text-black/40 dark:text-white/40 hover:text-black dark:hover:text-white transition-colors"})]}):void 0,n?h.jsxs("button",{type:"button",onClick:()=>{b(!v)},className:Q("rounded-full transition-all flex items-center gap-2 px-1.5 py-1 border h-8",v?"bg-sky-500/15 border-sky-400 text-sky-500":"bg-black/5 dark:bg-white/5 border-transparent text-black/40 dark:text-white/40 hover:text-black dark:hover:text-white"),children:[h.jsx("div",{className:"w-4 h-4 flex items-center justify-center flex-shrink-0",children:h.jsx(Mu.div,{animate:{rotate:v?180:0,scale:v?1.1:1},whileHover:{rotate:v?180:15,scale:1.1,transition:{type:"spring",stiffness:300,damping:10}},transition:{type:"spring",stiffness:260,damping:25},children:h.jsx(de,{name:"globe",className:Q("w-4 h-4",v?"text-sky-500":"text-inherit")})})}),h.jsx(B$,{children:v&&h.jsx(Mu.span,{initial:{width:0,opacity:0},animate:{width:"auto",opacity:1},exit:{width:0,opacity:0},transition:{duration:.2},className:"text-sm overflow-hidden whitespace-nowrap text-sky-500 flex-shrink-0",children:"Search"})})]}):void 0]}),h.jsx("div",{className:"absolute right-3 bottom-3",children:h.jsx("button",{type:"button",disabled:t||u,onClick:_=>{x(_)},className:Q("rounded-lg p-2",c&&l||f?"bg-sky-500/15 text-sky-500":"bg-black/5 dark:bg-white/5 text-black/40 dark:text-white/40 hover:text-black dark:hover:text-white"),children:h.jsx(de,{name:"send",className:"w-4 h-4"})})})]})]})})})}var Ng,b2;function OY(){if(b2)return Ng;b2=1;function e(){this.__data__=[],this.size=0}return Ng=e,Ng}var kg,x2;Ks=function(){if(x2)return kg;x2=1;function e(t,n){return t===n||t!==t&&n!==n}return kg=e,kg};var Pg,w2;function Vd(){if(w2)return Pg;w2=1;var e=Ks();function t(n,r){for(var o=n.length;o--;)if(e(n[o][0],r))return o;return-1}return Pg=t,Pg}var Ag,_2;function MY(){if(_2)return Ag;_2=1;var e=Vd(),t=Array.prototype,n=t.splice;function r(o){var a=this.__data__,i=e(a,o);if(i<0)return!1;var s=a.length-1;return i==s?a.pop():n.call(a,i,1),--this.size,!0}return Ag=r,Ag}var Tg,j2;function NY(){if(j2)return Tg;j2=1;var e=Vd();function t(n){var r=this.__data__,o=e(r,n);return o<0?void 0:r[o][1]}return Tg=t,Tg}var Rg,E2;function kY(){if(E2)return Rg;E2=1;var e=Vd();function t(n){return e(this.__data__,n)>-1}return Rg=t,Rg}var Ig,S2;function PY(){if(S2)return Ig;S2=1;var e=Vd();function t(n,r){var o=this.__data__,a=e(o,n);return a<0?(++this.size,o.push([n,r])):o[a][1]=r,this}return Ig=t,Ig}var Dg,C2;function Ud(){if(C2)return Dg;C2=1;var e=OY(),t=MY(),n=NY(),r=kY(),o=PY();function a(i){var s=-1,c=i==null?0:i.length;for(this.clear();++s<c;){var l=i[s];this.set(l[0],l[1])}}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=n,a.prototype.has=r,a.prototype.set=o,Dg=a,Dg}var Lg,O2;function AY(){if(O2)return Lg;O2=1;var e=Ud();function t(){this.__data__=new e,this.size=0}return Lg=t,Lg}var Fg,M2;function TY(){if(M2)return Fg;M2=1;function e(t){var n=this.__data__,r=n.delete(t);return this.size=n.size,r}return Fg=e,Fg}var Bg,N2;function RY(){if(N2)return Bg;N2=1;function e(t){return this.__data__.get(t)}return Bg=e,Bg}var $g,k2;function IY(){if(k2)return $g;k2=1;function e(t){return this.__data__.has(t)}return $g=e,$g}var zg,P2;function A2(){if(P2)return zg;P2=1;var e=typeof Ws=="object"&&Ws&&Ws.Object===Object&&Ws;return zg=e,zg}var Vg,T2;er=function(){if(T2)return Vg;T2=1;var e=A2(),t=typeof self=="object"&&self&&self.Object===Object&&self,n=e||t||Function("return this")();return Vg=n,Vg};var Ug,R2;ai=function(){if(R2)return Ug;R2=1;var e=er(),t=e.Symbol;return Ug=t,Ug};var Hg,I2;function DY(){if(I2)return Hg;I2=1;var e=ai(),t=Object.prototype,n=t.hasOwnProperty,r=t.toString,o=e?e.toStringTag:void 0;function a(i){var s=n.call(i,o),c=i[o];try{i[o]=void 0;var l=!0}catch{}var u=r.call(i);return l&&(s?i[o]=c:delete i[o]),u}return Hg=a,Hg}var Wg,D2;function LY(){if(D2)return Wg;D2=1;var e=Object.prototype,t=e.toString;function n(r){return t.call(r)}return Wg=n,Wg}var qg,L2;function io(){if(L2)return qg;L2=1;var e=ai(),t=DY(),n=LY(),r="[object Null]",o="[object Undefined]",a=e?e.toStringTag:void 0;function i(s){return s==null?s===void 0?o:r:a&&a in Object(s)?t(s):n(s)}return qg=i,qg}var Yg,F2;tr=function(){if(F2)return Yg;F2=1;function e(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}return Yg=e,Yg};var Kg,B2;Iu=function(){if(B2)return Kg;B2=1;var e=io(),t=tr(),n="[object AsyncFunction]",r="[object Function]",o="[object GeneratorFunction]",a="[object Proxy]";function i(s){if(!t(s))return!1;var c=e(s);return c==r||c==o||c==n||c==a}return Kg=i,Kg};var Xg,$2;function FY(){if($2)return Xg;$2=1;var e=er(),t=e["__core-js_shared__"];return Xg=t,Xg}var Gg,z2;function BY(){if(z2)return Gg;z2=1;var e=FY(),t=function(){var r=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function n(r){return!!t&&t in r}return Gg=n,Gg}var Qg,V2;function U2(){if(V2)return Qg;V2=1;var e=Function.prototype,t=e.toString;function n(r){if(r!=null){try{return t.call(r)}catch{}try{return r+""}catch{}}return""}return Qg=n,Qg}var Jg,H2;function $Y(){if(H2)return Jg;H2=1;var e=Iu(),t=BY(),n=tr(),r=U2(),o=/[\\^$.*+?()[\]{}|]/g,a=/^\[object .+?Constructor\]$/,i=Function.prototype,s=Object.prototype,c=i.toString,l=s.hasOwnProperty,u=RegExp("^"+c.call(l).replace(o,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function d(f){if(!n(f)||t(f))return!1;var p=e(f)?u:a;return p.test(r(f))}return Jg=d,Jg}var Zg,W2;function zY(){if(W2)return Zg;W2=1;function e(t,n){return t==null?void 0:t[n]}return Zg=e,Zg}var ev,q2;function wa(){if(q2)return ev;q2=1;var e=$Y(),t=zY();function n(r,o){var a=t(r,o);return e(a)?a:void 0}return ev=n,ev}var tv,Y2;function nv(){if(Y2)return tv;Y2=1;var e=wa(),t=er(),n=e(t,"Map");return tv=n,tv}var rv,K2;function Hd(){if(K2)return rv;K2=1;var e=wa(),t=e(Object,"create");return rv=t,rv}var ov,X2;function VY(){if(X2)return ov;X2=1;var e=Hd();function t(){this.__data__=e?e(null):{},this.size=0}return ov=t,ov}var av,G2;function UY(){if(G2)return av;G2=1;function e(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}return av=e,av}var iv,Q2;function HY(){if(Q2)return iv;Q2=1;var e=Hd(),t="__lodash_hash_undefined__",n=Object.prototype,r=n.hasOwnProperty;function o(a){var i=this.__data__;if(e){var s=i[a];return s===t?void 0:s}return r.call(i,a)?i[a]:void 0}return iv=o,iv}var sv,J2;function WY(){if(J2)return sv;J2=1;var e=Hd(),t=Object.prototype,n=t.hasOwnProperty;function r(o){var a=this.__data__;return e?a[o]!==void 0:n.call(a,o)}return sv=r,sv}var cv,Z2;function qY(){if(Z2)return cv;Z2=1;var e=Hd(),t="__lodash_hash_undefined__";function n(r,o){var a=this.__data__;return this.size+=this.has(r)?0:1,a[r]=e&&o===void 0?t:o,this}return cv=n,cv}var lv,ek;function YY(){if(ek)return lv;ek=1;var e=VY(),t=UY(),n=HY(),r=WY(),o=qY();function a(i){var s=-1,c=i==null?0:i.length;for(this.clear();++s<c;){var l=i[s];this.set(l[0],l[1])}}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=n,a.prototype.has=r,a.prototype.set=o,lv=a,lv}var uv,tk;function KY(){if(tk)return uv;tk=1;var e=YY(),t=Ud(),n=nv();function r(){this.size=0,this.__data__={hash:new e,map:new(n||t),string:new e}}return uv=r,uv}var dv,nk;function XY(){if(nk)return dv;nk=1;function e(t){var n=typeof t;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?t!=="__proto__":t===null}return dv=e,dv}var fv,rk;function Wd(){if(rk)return fv;rk=1;var e=XY();function t(n,r){var o=n.__data__;return e(r)?o[typeof r=="string"?"string":"hash"]:o.map}return fv=t,fv}var pv,ok;function GY(){if(ok)return pv;ok=1;var e=Wd();function t(n){var r=e(this,n).delete(n);return this.size-=r?1:0,r}return pv=t,pv}var hv,ak;function QY(){if(ak)return hv;ak=1;var e=Wd();function t(n){return e(this,n).get(n)}return hv=t,hv}var mv,ik;function JY(){if(ik)return mv;ik=1;var e=Wd();function t(n){return e(this,n).has(n)}return mv=t,mv}var yv,sk;function ZY(){if(sk)return yv;sk=1;var e=Wd();function t(n,r){var o=e(this,n),a=o.size;return o.set(n,r),this.size+=o.size==a?0:1,this}return yv=t,yv}var gv,ck;function vv(){if(ck)return gv;ck=1;var e=KY(),t=GY(),n=QY(),r=JY(),o=ZY();function a(i){var s=-1,c=i==null?0:i.length;for(this.clear();++s<c;){var l=i[s];this.set(l[0],l[1])}}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=n,a.prototype.has=r,a.prototype.set=o,gv=a,gv}var bv,lk;function eK(){if(lk)return bv;lk=1;var e=Ud(),t=nv(),n=vv(),r=200;function o(a,i){var s=this.__data__;if(s instanceof e){var c=s.__data__;if(!t||c.length<r-1)return c.push([a,i]),this.size=++s.size,this;s=this.__data__=new n(c)}return s.set(a,i),this.size=s.size,this}return bv=o,bv}var xv,uk;Rm=function(){if(uk)return xv;uk=1;var e=Ud(),t=AY(),n=TY(),r=RY(),o=IY(),a=eK();function i(s){var c=this.__data__=new e(s);this.size=c.size}return i.prototype.clear=t,i.prototype.delete=n,i.prototype.get=r,i.prototype.has=o,i.prototype.set=a,xv=i,xv};var wv,dk;function tK(){if(dk)return wv;dk=1;var e="__lodash_hash_undefined__";function t(n){return this.__data__.set(n,e),this}return wv=t,wv}var _v,fk;function nK(){if(fk)return _v;fk=1;function e(t){return this.__data__.has(t)}return _v=e,_v}var jv,pk;function hk(){if(pk)return jv;pk=1;var e=vv(),t=tK(),n=nK();function r(o){var a=-1,i=o==null?0:o.length;for(this.__data__=new e;++a<i;)this.add(o[a])}return r.prototype.add=r.prototype.push=t,r.prototype.has=n,jv=r,jv}var Ev,mk;function yk(){if(mk)return Ev;mk=1;function e(t,n){for(var r=-1,o=t==null?0:t.length;++r<o;)if(n(t[r],r,t))return!0;return!1}return Ev=e,Ev}var Sv,gk;function vk(){if(gk)return Sv;gk=1;function e(t,n){return t.has(n)}return Sv=e,Sv}var Cv,bk;function xk(){if(bk)return Cv;bk=1;var e=hk(),t=yk(),n=vk(),r=1,o=2;function a(i,s,c,l,u,d){var f=c&r,p=i.length,y=s.length;if(p!=y&&!(f&&y>p))return!1;var m=d.get(i),v=d.get(s);if(m&&v)return m==s&&v==i;var b=-1,x=!0,_=c&o?new e:void 0;for(d.set(i,s),d.set(s,i);++b<p;){var w=i[b],j=s[b];if(l)var E=f?l(j,w,b,s,i,d):l(w,j,b,i,s,d);if(E!==void 0){if(E)continue;x=!1;break}if(_){if(!t(s,function(S,O){if(!n(_,O)&&(w===S||u(w,S,c,l,d)))return _.push(O)})){x=!1;break}}else if(!(w===j||u(w,j,c,l,d))){x=!1;break}}return d.delete(i),d.delete(s),x}return Cv=a,Cv}var Ov,wk;lS=function(){if(wk)return Ov;wk=1;var e=er(),t=e.Uint8Array;return Ov=t,Ov};var Mv,_k;function rK(){if(_k)return Mv;_k=1;function e(t){var n=-1,r=Array(t.size);return t.forEach(function(o,a){r[++n]=[a,o]}),r}return Mv=e,Mv}var Nv,jk;function kv(){if(jk)return Nv;jk=1;function e(t){var n=-1,r=Array(t.size);return t.forEach(function(o){r[++n]=o}),r}return Nv=e,Nv}var Pv,Ek;function oK(){if(Ek)return Pv;Ek=1;var e=ai(),t=lS(),n=Ks(),r=xk(),o=rK(),a=kv(),i=1,s=2,c="[object Boolean]",l="[object Date]",u="[object Error]",d="[object Map]",f="[object Number]",p="[object RegExp]",y="[object Set]",m="[object String]",v="[object Symbol]",b="[object ArrayBuffer]",x="[object DataView]",_=e?e.prototype:void 0,w=_?_.valueOf:void 0;function j(E,S,O,N,P,k,R){switch(O){case x:if(E.byteLength!=S.byteLength||E.byteOffset!=S.byteOffset)return!1;E=E.buffer,S=S.buffer;case b:return!(E.byteLength!=S.byteLength||!k(new t(E),new t(S)));case c:case l:case f:return n(+E,+S);case u:return E.name==S.name&&E.message==S.message;case p:case m:return E==S+"";case d:var A=o;case y:var C=N&i;if(A||(A=a),E.size!=S.size&&!C)return!1;var M=R.get(E);if(M)return M==S;N|=s,R.set(E,S);var T=r(A(E),A(S),N,P,k,R);return R.delete(E),T;case v:if(w)return w.call(E)==w.call(S)}return!1}return Pv=j,Pv}var Av,Sk;function Tv(){if(Sk)return Av;Sk=1;function e(t,n){for(var r=-1,o=n.length,a=t.length;++r<o;)t[a+r]=n[r];return t}return Av=e,Av}var Rv,Ck;cn=function(){if(Ck)return Rv;Ck=1;var e=Array.isArray;return Rv=e,Rv};var Iv,Ok;function Mk(){if(Ok)return Iv;Ok=1;var e=Tv(),t=cn();function n(r,o,a){var i=o(r);return t(r)?i:e(i,a(r))}return Iv=n,Iv}var Dv,Nk;function aK(){if(Nk)return Dv;Nk=1;function e(t,n){for(var r=-1,o=t==null?0:t.length,a=0,i=[];++r<o;){var s=t[r];n(s,r,t)&&(i[a++]=s)}return i}return Dv=e,Dv}var Lv,kk;function Pk(){if(kk)return Lv;kk=1;function e(){return[]}return Lv=e,Lv}var Fv,Ak;Nm=function(){if(Ak)return Fv;Ak=1;var e=aK(),t=Pk(),n=Object.prototype,r=n.propertyIsEnumerable,o=Object.getOwnPropertySymbols,a=o?function(i){return i==null?[]:(i=Object(i),e(o(i),function(s){return r.call(i,s)}))}:t;return Fv=a,Fv};var Bv,Tk;function iK(){if(Tk)return Bv;Tk=1;function e(t,n){for(var r=-1,o=Array(t);++r<t;)o[r]=n(r);return o}return Bv=e,Bv}var $v,Rk;Er=function(){if(Rk)return $v;Rk=1;function e(t){return t!=null&&typeof t=="object"}return $v=e,$v};var zv,Ik;function sK(){if(Ik)return zv;Ik=1;var e=io(),t=Er(),n="[object Arguments]";function r(o){return t(o)&&e(o)==n}return zv=r,zv}var Vv,Dk;Ru=function(){if(Dk)return Vv;Dk=1;var e=sK(),t=Er(),n=Object.prototype,r=n.hasOwnProperty,o=n.propertyIsEnumerable,a=e(function(){return arguments}())?e:function(i){return t(i)&&r.call(i,"callee")&&!o.call(i,"callee")};return Vv=a,Vv};var qd={exports:{}},Uv,Lk;function cK(){if(Lk)return Uv;Lk=1;function e(){return!1}return Uv=e,Uv}qd.exports;var Fk;Im=function(){return Fk||(Fk=1,function(e,t){var n=er(),r=cK(),o=t&&!t.nodeType&&t,a=o&&!0&&e&&!e.nodeType&&e,i=a&&a.exports===o,s=i?n.Buffer:void 0,c=s?s.isBuffer:void 0,l=c||r;e.exports=l}(qd,qd.exports)),qd.exports};var Hv,Bk;function Yd(){if(Bk)return Hv;Bk=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function n(r,o){var a=typeof r;return o=o??e,!!o&&(a=="number"||a!="symbol"&&t.test(r))&&r>-1&&r%1==0&&r<o}return Hv=n,Hv}var Wv,$k;function qv(){if($k)return Wv;$k=1;var e=9007199254740991;function t(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=e}return Wv=t,Wv}var Yv,zk;function lK(){if(zk)return Yv;zk=1;var e=io(),t=qv(),n=Er(),r="[object Arguments]",o="[object Array]",a="[object Boolean]",i="[object Date]",s="[object Error]",c="[object Function]",l="[object Map]",u="[object Number]",d="[object Object]",f="[object RegExp]",p="[object Set]",y="[object String]",m="[object WeakMap]",v="[object ArrayBuffer]",b="[object DataView]",x="[object Float32Array]",_="[object Float64Array]",w="[object Int8Array]",j="[object Int16Array]",E="[object Int32Array]",S="[object Uint8Array]",O="[object Uint8ClampedArray]",N="[object Uint16Array]",P="[object Uint32Array]",k={};k[x]=k[_]=k[w]=k[j]=k[E]=k[S]=k[O]=k[N]=k[P]=!0,k[r]=k[o]=k[v]=k[a]=k[b]=k[i]=k[s]=k[c]=k[l]=k[u]=k[d]=k[f]=k[p]=k[y]=k[m]=!1;function R(A){return n(A)&&t(A.length)&&!!k[e(A)]}return Yv=R,Yv}var Kv,Vk;Tm=function(){if(Vk)return Kv;Vk=1;function e(t){return function(n){return t(n)}}return Kv=e,Kv};var Kd={exports:{}};Kd.exports;var Uk;dS=function(){return Uk||(Uk=1,function(e,t){var n=A2(),r=t&&!t.nodeType&&t,o=r&&!0&&e&&!e.nodeType&&e,a=o&&o.exports===r,i=a&&n.process,s=function(){try{var c=o&&o.require&&o.require("util").types;return c||i&&i.binding&&i.binding("util")}catch{}}();e.exports=s}(Kd,Kd.exports)),Kd.exports};var Xv,Hk;Bh=function(){if(Hk)return Xv;Hk=1;var e=lK(),t=Tm(),n=dS(),r=n&&n.isTypedArray,o=r?t(r):e;return Xv=o,Xv};var Gv,Wk;function qk(){if(Wk)return Gv;Wk=1;var e=iK(),t=Ru(),n=cn(),r=Im(),o=Yd(),a=Bh(),i=Object.prototype,s=i.hasOwnProperty;function c(l,u){var d=n(l),f=!d&&t(l),p=!d&&!f&&r(l),y=!d&&!f&&!p&&a(l),m=d||f||p||y,v=m?e(l.length,String):[],b=v.length;for(var x in l)(u||s.call(l,x))&&!(m&&(x=="length"||p&&(x=="offset"||x=="parent")||y&&(x=="buffer"||x=="byteLength"||x=="byteOffset")||o(x,b)))&&v.push(x);return v}return Gv=c,Gv}var Qv,Yk;Am=function(){if(Yk)return Qv;Yk=1;var e=Object.prototype;function t(n){var r=n&&n.constructor,o=typeof r=="function"&&r.prototype||e;return n===o}return Qv=t,Qv};var Jv,Kk;function Xk(){if(Kk)return Jv;Kk=1;function e(t,n){return function(r){return t(n(r))}}return Jv=e,Jv}var Zv,Gk;function uK(){if(Gk)return Zv;Gk=1;var e=Xk(),t=e(Object.keys,Object);return Zv=t,Zv}var e0,Qk;function dK(){if(Qk)return e0;Qk=1;var e=Am(),t=uK(),n=Object.prototype,r=n.hasOwnProperty;function o(a){if(!e(a))return t(a);var i=[];for(var s in Object(a))r.call(a,s)&&s!="constructor"&&i.push(s);return i}return e0=o,e0}var t0,Jk;da=function(){if(Jk)return t0;Jk=1;var e=Iu(),t=qv();function n(r){return r!=null&&t(r.length)&&!e(r)}return t0=n,t0};var n0,Zk;Zs=function(){if(Zk)return n0;Zk=1;var e=qk(),t=dK(),n=da();function r(o){return n(o)?e(o):t(o)}return n0=r,n0};var r0,eP;pS=function(){if(eP)return r0;eP=1;var e=Mk(),t=Nm(),n=Zs();function r(o){return e(o,n,t)}return r0=r,r0};var o0,tP;function fK(){if(tP)return o0;tP=1;var e=pS(),t=1,n=Object.prototype,r=n.hasOwnProperty;function o(a,i,s,c,l,u){var d=s&t,f=e(a),p=f.length,y=e(i),m=y.length;if(p!=m&&!d)return!1;for(var v=p;v--;){var b=f[v];if(!(d?b in i:r.call(i,b)))return!1}var x=u.get(a),_=u.get(i);if(x&&_)return x==i&&_==a;var w=!0;u.set(a,i),u.set(i,a);for(var j=d;++v<p;){b=f[v];var E=a[b],S=i[b];if(c)var O=d?c(S,E,b,i,a,u):c(E,S,b,a,i,u);if(!(O===void 0?E===S||l(E,S,s,c,u):O)){w=!1;break}j||(j=b=="constructor")}if(w&&!j){var N=a.constructor,P=i.constructor;N!=P&&"constructor"in a&&"constructor"in i&&!(typeof N=="function"&&N instanceof N&&typeof P=="function"&&P instanceof P)&&(w=!1)}return u.delete(a),u.delete(i),w}return o0=o,o0}var a0,nP;function pK(){if(nP)return a0;nP=1;var e=wa(),t=er(),n=e(t,"DataView");return a0=n,a0}var i0,rP;function hK(){if(rP)return i0;rP=1;var e=wa(),t=er(),n=e(t,"Promise");return i0=n,i0}var s0,oP;function aP(){if(oP)return s0;oP=1;var e=wa(),t=er(),n=e(t,"Set");return s0=n,s0}var c0,iP;function mK(){if(iP)return c0;iP=1;var e=wa(),t=er(),n=e(t,"WeakMap");return c0=n,c0}var l0,sP;uS=function(){if(sP)return l0;sP=1;var e=pK(),t=nv(),n=hK(),r=aP(),o=mK(),a=io(),i=U2(),s="[object Map]",c="[object Object]",l="[object Promise]",u="[object Set]",d="[object WeakMap]",f="[object DataView]",p=i(e),y=i(t),m=i(n),v=i(r),b=i(o),x=a;return(e&&x(new e(new ArrayBuffer(1)))!=f||t&&x(new t)!=s||n&&x(n.resolve())!=l||r&&x(new r)!=u||o&&x(new o)!=d)&&(x=function(_){var w=a(_),j=w==c?_.constructor:void 0,E=j?i(j):"";if(E)switch(E){case p:return f;case y:return s;case m:return l;case v:return u;case b:return d}return w}),l0=x,l0};var u0,cP;function yK(){if(cP)return u0;cP=1;var e=Rm(),t=xk(),n=oK(),r=fK(),o=uS(),a=cn(),i=Im(),s=Bh(),c=1,l="[object Arguments]",u="[object Array]",d="[object Object]",f=Object.prototype,p=f.hasOwnProperty;function y(m,v,b,x,_,w){var j=a(m),E=a(v),S=j?u:o(m),O=E?u:o(v);S=S==l?d:S,O=O==l?d:O;var N=S==d,P=O==d,k=S==O;if(k&&i(m)){if(!i(v))return!1;j=!0,N=!1}if(k&&!N)return w||(w=new e),j||s(m)?t(m,v,b,x,_,w):n(m,v,S,b,x,_,w);if(!(b&c)){var R=N&&p.call(m,"__wrapped__"),A=P&&p.call(v,"__wrapped__");if(R||A){var C=R?m.value():m,M=A?v.value():v;return w||(w=new e),_(C,M,b,x,w)}}return k?(w||(w=new e),r(m,v,b,x,_,w)):!1}return u0=y,u0}var d0,lP;function f0(){if(lP)return d0;lP=1;var e=yK(),t=Er();function n(r,o,a,i,s){return r===o?!0:r==null||o==null||!t(r)&&!t(o)?r!==r&&o!==o:e(r,o,a,i,n,s)}return d0=n,d0}var p0,uP;function gK(){if(uP)return p0;uP=1;var e=Rm(),t=f0(),n=1,r=2;function o(a,i,s,c){var l=s.length,u=l,d=!c;if(a==null)return!u;for(a=Object(a);l--;){var f=s[l];if(d&&f[2]?f[1]!==a[f[0]]:!(f[0]in a))return!1}for(;++l<u;){f=s[l];var p=f[0],y=a[p],m=f[1];if(d&&f[2]){if(y===void 0&&!(p in a))return!1}else{var v=new e;if(c)var b=c(y,m,p,a,i,v);if(!(b===void 0?t(m,y,n|r,c,v):b))return!1}}return!0}return p0=o,p0}var h0,dP;function fP(){if(dP)return h0;dP=1;var e=tr();function t(n){return n===n&&!e(n)}return h0=t,h0}var m0,pP;function vK(){if(pP)return m0;pP=1;var e=fP(),t=Zs();function n(r){for(var o=t(r),a=o.length;a--;){var i=o[a],s=r[i];o[a]=[i,s,e(s)]}return o}return m0=n,m0}var y0,hP;function mP(){if(hP)return y0;hP=1;function e(t,n){return function(r){return r==null?!1:r[t]===n&&(n!==void 0||t in Object(r))}}return y0=e,y0}var g0,yP;function bK(){if(yP)return g0;yP=1;var e=gK(),t=vK(),n=mP();function r(o){var a=t(o);return a.length==1&&a[0][2]?n(a[0][0],a[0][1]):function(i){return i===o||e(i,o,a)}}return g0=r,g0}var v0,gP;function ki(){if(gP)return v0;gP=1;var e=io(),t=Er(),n="[object Symbol]";function r(o){return typeof o=="symbol"||t(o)&&e(o)==n}return v0=r,v0}var b0,vP;function x0(){if(vP)return b0;vP=1;var e=cn(),t=ki(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function o(a,i){if(e(a))return!1;var s=typeof a;return s=="number"||s=="symbol"||s=="boolean"||a==null||t(a)?!0:r.test(a)||!n.test(a)||i!=null&&a in Object(i)}return b0=o,b0}var w0,bP;function xP(){if(bP)return w0;bP=1;var e=vv(),t="Expected a function";function n(r,o){if(typeof r!="function"||o!=null&&typeof o!="function")throw new TypeError(t);var a=function(){var i=arguments,s=o?o.apply(this,i):i[0],c=a.cache;if(c.has(s))return c.get(s);var l=r.apply(this,i);return a.cache=c.set(s,l)||c,l};return a.cache=new(n.Cache||e),a}return n.Cache=e,w0=n,w0}var _0,wP;function xK(){if(wP)return _0;wP=1;var e=xP(),t=500;function n(r){var o=e(r,function(i){return a.size===t&&a.clear(),i}),a=o.cache;return o}return _0=n,_0}var j0,_P;function wK(){if(_P)return j0;_P=1;var e=xK(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,r=e(function(o){var a=[];return o.charCodeAt(0)===46&&a.push(""),o.replace(t,function(i,s,c,l){a.push(c?l.replace(n,"$1"):s||i)}),a});return j0=r,j0}var E0,jP;Ys=function(){if(jP)return E0;jP=1;function e(t,n){for(var r=-1,o=t==null?0:t.length,a=Array(o);++r<o;)a[r]=n(t[r],r,t);return a}return E0=e,E0};var S0,EP;function _K(){if(EP)return S0;EP=1;var e=ai(),t=Ys(),n=cn(),r=ki(),o=1/0,a=e?e.prototype:void 0,i=a?a.toString:void 0;function s(c){if(typeof c=="string")return c;if(n(c))return t(c,s)+"";if(r(c))return i?i.call(c):"";var l=c+"";return l=="0"&&1/c==-o?"-0":l}return S0=s,S0}var C0,SP;function CP(){if(SP)return C0;SP=1;var e=_K();function t(n){return n==null?"":e(n)}return C0=t,C0}var O0,OP;nc=function(){if(OP)return O0;OP=1;var e=cn(),t=x0(),n=wK(),r=CP();function o(a,i){return e(a)?a:t(a,i)?[a]:n(r(a))}return O0=o,O0};var M0,MP;ii=function(){if(MP)return M0;MP=1;var e=ki(),t=1/0;function n(r){if(typeof r=="string"||e(r))return r;var o=r+"";return o=="0"&&1/r==-t?"-0":o}return M0=n,M0};var N0,NP;tc=function(){if(NP)return N0;NP=1;var e=nc(),t=ii();function n(r,o){o=e(o,r);for(var a=0,i=o.length;r!=null&&a<i;)r=r[t(o[a++])];return a&&a==i?r:void 0}return N0=n,N0};var k0,kP;function PP(){if(kP)return k0;kP=1;var e=tc();function t(n,r,o){var a=n==null?void 0:e(n,r);return a===void 0?o:a}return k0=t,k0}var P0,AP;function jK(){if(AP)return P0;AP=1;function e(t,n){return t!=null&&n in Object(t)}return P0=e,P0}var A0,TP;function EK(){if(TP)return A0;TP=1;var e=nc(),t=Ru(),n=cn(),r=Yd(),o=qv(),a=ii();function i(s,c,l){c=e(c,s);for(var u=-1,d=c.length,f=!1;++u<d;){var p=a(c[u]);if(!(f=s!=null&&l(s,p)))break;s=s[p]}return f||++u!=d?f:(d=s==null?0:s.length,!!d&&o(d)&&r(p,d)&&(n(s)||t(s)))}return A0=i,A0}var T0,RP;NE=function(){if(RP)return T0;RP=1;var e=jK(),t=EK();function n(r,o){return r!=null&&t(r,o,e)}return T0=n,T0};var R0,IP;function SK(){if(IP)return R0;IP=1;var e=f0(),t=PP(),n=NE(),r=x0(),o=fP(),a=mP(),i=ii(),s=1,c=2;function l(u,d){return r(u)&&o(d)?a(i(u),d):function(f){var p=t(f,u);return p===void 0&&p===d?n(f,u):e(d,p,s|c)}}return R0=l,R0}var I0,DP;function Pi(){if(DP)return I0;DP=1;function e(t){return t}return I0=e,I0}var D0,LP;function CK(){if(LP)return D0;LP=1;function e(t){return function(n){return n==null?void 0:n[t]}}return D0=e,D0}var L0,FP;function OK(){if(FP)return L0;FP=1;var e=tc();function t(n){return function(r){return e(r,n)}}return L0=t,L0}var F0,BP;function MK(){if(BP)return F0;BP=1;var e=CK(),t=OK(),n=x0(),r=ii();function o(a){return n(a)?e(r(a)):t(a)}return F0=o,F0}var B0,$P;function Nr(){if($P)return B0;$P=1;var e=bK(),t=SK(),n=Pi(),r=cn(),o=MK();function a(i){return typeof i=="function"?i:i==null?n:typeof i=="object"?r(i)?t(i[0],i[1]):e(i):o(i)}return B0=a,B0}var $0,zP;function NK(){if(zP)return $0;zP=1;var e="Expected a function";function t(n){if(typeof n!="function")throw new TypeError(e);return function(){var r=arguments;switch(r.length){case 0:return!n.call(this);case 1:return!n.call(this,r[0]);case 2:return!n.call(this,r[0],r[1]);case 3:return!n.call(this,r[0],r[1],r[2])}return!n.apply(this,r)}}return $0=t,$0}var z0,VP;function UP(){if(VP)return z0;VP=1;var e=wa(),t=function(){try{var n=e(Object,"defineProperty");return n({},"",{}),n}catch{}}();return z0=t,z0}var V0,HP;zh=function(){if(HP)return V0;HP=1;var e=UP();function t(n,r,o){r=="__proto__"&&e?e(n,r,{configurable:!0,enumerable:!0,value:o,writable:!0}):n[r]=o}return V0=t,V0};var U0,WP;fS=function(){if(WP)return U0;WP=1;var e=zh(),t=Ks(),n=Object.prototype,r=n.hasOwnProperty;function o(a,i,s){var c=a[i];(!(r.call(a,i)&&t(c,s))||s===void 0&&!(i in a))&&e(a,i,s)}return U0=o,U0};var H0,qP;function kK(){if(qP)return H0;qP=1;var e=fS(),t=nc(),n=Yd(),r=tr(),o=ii();function a(i,s,c,l){if(!r(i))return i;s=t(s,i);for(var u=-1,d=s.length,f=d-1,p=i;p!=null&&++u<d;){var y=o(s[u]),m=c;if(y==="__proto__"||y==="constructor"||y==="prototype")return i;if(u!=f){var v=p[y];m=l?l(v,y,p):void 0,m===void 0&&(m=r(v)?v:n(s[u+1])?[]:{})}e(p,y,m),p=p[y]}return i}return H0=a,H0}var W0,YP;ME=function(){if(YP)return W0;YP=1;var e=tc(),t=kK(),n=nc();function r(o,a,i){for(var s=-1,c=a.length,l={};++s<c;){var u=a[s],d=e(o,u);i(d,u)&&t(l,n(u,o),d)}return l}return W0=r,W0};var q0,KP;Pm=function(){if(KP)return q0;KP=1;var e=Xk(),t=e(Object.getPrototypeOf,Object);return q0=t,q0};var Y0,XP;cS=function(){if(XP)return Y0;XP=1;var e=Tv(),t=Pm(),n=Nm(),r=Pk(),o=Object.getOwnPropertySymbols,a=o?function(i){for(var s=[];i;)e(s,n(i)),i=t(i);return s}:r;return Y0=a,Y0};var K0,GP;function PK(){if(GP)return K0;GP=1;function e(t){var n=[];if(t!=null)for(var r in Object(t))n.push(r);return n}return K0=e,K0}var X0,QP;function AK(){if(QP)return X0;QP=1;var e=tr(),t=Am(),n=PK(),r=Object.prototype,o=r.hasOwnProperty;function a(i){if(!e(i))return n(i);var s=t(i),c=[];for(var l in i)l=="constructor"&&(s||!o.call(i,l))||c.push(l);return c}return X0=a,X0}var G0,JP;sS=function(){if(JP)return G0;JP=1;var e=qk(),t=AK(),n=da();function r(o){return n(o)?e(o,!0):t(o)}return G0=r,G0};var Q0,ZP;hS=function(){if(ZP)return Q0;ZP=1;var e=Mk(),t=cS(),n=sS();function r(o){return e(o,n,t)}return Q0=r,Q0};var J0,eA;function TK(){if(eA)return J0;eA=1;var e=Ys(),t=Nr(),n=ME(),r=hS();function o(a,i){if(a==null)return{};var s=e(r(a),function(c){return[c]});return i=t(i),n(a,s,function(c,l){return i(c,l[0])})}return J0=o,J0}var Z0,tA;function RK(){if(tA)return Z0;tA=1;var e=Nr(),t=NK(),n=TK();function r(o,a){return n(o,t(e(a)))}return Z0=r,Z0}var IK=RK();const Wc=Xe(IK);var eb,nA;function DK(){if(nA)return eb;nA=1;function e(t){return t===void 0}return eb=e,eb}var LK=DK();const qc=Xe(LK);function Rt(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=Rt(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var FK={value:()=>{}};function Xd(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Gd(n)}function Gd(e){this._=e}function BK(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",o=n.indexOf(".");if(o>=0&&(r=n.slice(o+1),n=n.slice(0,o)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Gd.prototype=Xd.prototype={constructor:Gd,on:function(e,t){var n=this._,r=BK(e+"",n),o,a=-1,i=r.length;if(arguments.length<2){for(;++a<i;)if((o=(e=r[a]).type)&&(o=$K(n[o],e.name)))return o;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<i;)if(o=(e=r[a]).type)n[o]=rA(n[o],e.name,t);else if(t==null)for(o in n)n[o]=rA(n[o],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Gd(e)},call:function(e,t){if((o=arguments.length-2)>0)for(var n=new Array(o),r=0,o,a;r<o;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],r=0,o=a.length;r<o;++r)a[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],o=0,a=r.length;o<a;++o)r[o].value.apply(t,n)}};function $K(e,t){for(var n=0,r=e.length,o;n<r;++n)if((o=e[n]).name===t)return o.value}function rA(e,t,n){for(var r=0,o=e.length;r<o;++r)if(e[r].name===t){e[r]=FK,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var tb="http://www.w3.org/1999/xhtml";const oA={svg:"http://www.w3.org/2000/svg",xhtml:tb,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Qd(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),oA.hasOwnProperty(t)?{space:oA[t],local:e}:e}function zK(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===tb&&t.documentElement.namespaceURI===tb?t.createElement(e):t.createElementNS(n,e)}}function VK(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function aA(e){var t=Qd(e);return(t.local?VK:zK)(t)}function UK(){}function nb(e){return e==null?UK:function(){return this.querySelector(e)}}function HK(e){typeof e!="function"&&(e=nb(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var a=t[o],i=a.length,s=r[o]=new Array(i),c,l,u=0;u<i;++u)(c=a[u])&&(l=e.call(c,c.__data__,u,a))&&("__data__"in c&&(l.__data__=c.__data__),s[u]=l);return new Rn(r,this._parents)}function WK(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function qK(){return[]}function iA(e){return e==null?qK:function(){return this.querySelectorAll(e)}}function YK(e){return function(){return WK(e.apply(this,arguments))}}function KK(e){typeof e=="function"?e=YK(e):e=iA(e);for(var t=this._groups,n=t.length,r=[],o=[],a=0;a<n;++a)for(var i=t[a],s=i.length,c,l=0;l<s;++l)(c=i[l])&&(r.push(e.call(c,c.__data__,l,i)),o.push(c));return new Rn(r,o)}function sA(e){return function(){return this.matches(e)}}function cA(e){return function(t){return t.matches(e)}}var XK=Array.prototype.find;function GK(e){return function(){return XK.call(this.children,e)}}function QK(){return this.firstElementChild}function JK(e){return this.select(e==null?QK:GK(typeof e=="function"?e:cA(e)))}var ZK=Array.prototype.filter;function eX(){return Array.from(this.children)}function tX(e){return function(){return ZK.call(this.children,e)}}function nX(e){return this.selectAll(e==null?eX:tX(typeof e=="function"?e:cA(e)))}function rX(e){typeof e!="function"&&(e=sA(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var a=t[o],i=a.length,s=r[o]=[],c,l=0;l<i;++l)(c=a[l])&&e.call(c,c.__data__,l,a)&&s.push(c);return new Rn(r,this._parents)}function lA(e){return new Array(e.length)}function oX(){return new Rn(this._enter||this._groups.map(lA),this._parents)}function Jd(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Jd.prototype={constructor:Jd,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function aX(e){return function(){return e}}function iX(e,t,n,r,o,a){for(var i=0,s,c=t.length,l=a.length;i<l;++i)(s=t[i])?(s.__data__=a[i],r[i]=s):n[i]=new Jd(e,a[i]);for(;i<c;++i)(s=t[i])&&(o[i]=s)}function sX(e,t,n,r,o,a,i){var s,c,l=new Map,u=t.length,d=a.length,f=new Array(u),p;for(s=0;s<u;++s)(c=t[s])&&(f[s]=p=i.call(c,c.__data__,s,t)+"",l.has(p)?o[s]=c:l.set(p,c));for(s=0;s<d;++s)p=i.call(e,a[s],s,a)+"",(c=l.get(p))?(r[s]=c,c.__data__=a[s],l.delete(p)):n[s]=new Jd(e,a[s]);for(s=0;s<u;++s)(c=t[s])&&l.get(f[s])===c&&(o[s]=c)}function cX(e){return e.__data__}function lX(e,t){if(!arguments.length)return Array.from(this,cX);var n=t?sX:iX,r=this._parents,o=this._groups;typeof e!="function"&&(e=aX(e));for(var a=o.length,i=new Array(a),s=new Array(a),c=new Array(a),l=0;l<a;++l){var u=r[l],d=o[l],f=d.length,p=uX(e.call(u,u&&u.__data__,l,r)),y=p.length,m=s[l]=new Array(y),v=i[l]=new Array(y),b=c[l]=new Array(f);n(u,d,m,v,b,p,t);for(var x=0,_=0,w,j;x<y;++x)if(w=m[x]){for(x>=_&&(_=x+1);!(j=v[_])&&++_<y;);w._next=j||null}}return i=new Rn(i,r),i._enter=s,i._exit=c,i}function uX(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function dX(){return new Rn(this._exit||this._groups.map(lA),this._parents)}function fX(e,t,n){var r=this.enter(),o=this,a=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(o=t(o),o&&(o=o.selection())),n==null?a.remove():n(a),r&&o?r.merge(o).order():o}function pX(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,o=n.length,a=r.length,i=Math.min(o,a),s=new Array(o),c=0;c<i;++c)for(var l=n[c],u=r[c],d=l.length,f=s[c]=new Array(d),p,y=0;y<d;++y)(p=l[y]||u[y])&&(f[y]=p);for(;c<o;++c)s[c]=n[c];return new Rn(s,this._parents)}function hX(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],o=r.length-1,a=r[o],i;--o>=0;)(i=r[o])&&(a&&i.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(i,a),a=i);return this}function mX(e){e||(e=yX);function t(d,f){return d&&f?e(d.__data__,f.__data__):!d-!f}for(var n=this._groups,r=n.length,o=new Array(r),a=0;a<r;++a){for(var i=n[a],s=i.length,c=o[a]=new Array(s),l,u=0;u<s;++u)(l=i[u])&&(c[u]=l);c.sort(t)}return new Rn(o,this._parents).order()}function yX(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function gX(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function vX(){return Array.from(this)}function bX(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,a=r.length;o<a;++o){var i=r[o];if(i)return i}return null}function xX(){let e=0;for(const t of this)++e;return e}function wX(){return!this.node()}function _X(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var o=t[n],a=0,i=o.length,s;a<i;++a)(s=o[a])&&e.call(s,s.__data__,a,o);return this}function jX(e){return function(){this.removeAttribute(e)}}function EX(e){return function(){this.removeAttributeNS(e.space,e.local)}}function SX(e,t){return function(){this.setAttribute(e,t)}}function CX(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function OX(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function MX(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function NX(e,t){var n=Qd(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?EX:jX:typeof t=="function"?n.local?MX:OX:n.local?CX:SX)(n,t))}function uA(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function kX(e){return function(){this.style.removeProperty(e)}}function PX(e,t,n){return function(){this.style.setProperty(e,t,n)}}function AX(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function TX(e,t,n){return arguments.length>1?this.each((t==null?kX:typeof t=="function"?AX:PX)(e,t,n??"")):Ai(this.node(),e)}function Ai(e,t){return e.style.getPropertyValue(t)||uA(e).getComputedStyle(e,null).getPropertyValue(t)}function RX(e){return function(){delete this[e]}}function IX(e,t){return function(){this[e]=t}}function DX(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function LX(e,t){return arguments.length>1?this.each((t==null?RX:typeof t=="function"?DX:IX)(e,t)):this.node()[e]}function dA(e){return e.trim().split(/^|\s+/)}function rb(e){return e.classList||new fA(e)}function fA(e){this._node=e,this._names=dA(e.getAttribute("class")||"")}fA.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function pA(e,t){for(var n=rb(e),r=-1,o=t.length;++r<o;)n.add(t[r])}function hA(e,t){for(var n=rb(e),r=-1,o=t.length;++r<o;)n.remove(t[r])}function FX(e){return function(){pA(this,e)}}function BX(e){return function(){hA(this,e)}}function $X(e,t){return function(){(t.apply(this,arguments)?pA:hA)(this,e)}}function zX(e,t){var n=dA(e+"");if(arguments.length<2){for(var r=rb(this.node()),o=-1,a=n.length;++o<a;)if(!r.contains(n[o]))return!1;return!0}return this.each((typeof t=="function"?$X:t?FX:BX)(n,t))}function VX(){this.textContent=""}function UX(e){return function(){this.textContent=e}}function HX(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function WX(e){return arguments.length?this.each(e==null?VX:(typeof e=="function"?HX:UX)(e)):this.node().textContent}function qX(){this.innerHTML=""}function YX(e){return function(){this.innerHTML=e}}function KX(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function XX(e){return arguments.length?this.each(e==null?qX:(typeof e=="function"?KX:YX)(e)):this.node().innerHTML}function GX(){this.nextSibling&&this.parentNode.appendChild(this)}function QX(){return this.each(GX)}function JX(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ZX(){return this.each(JX)}function eG(e){var t=typeof e=="function"?e:aA(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function tG(){return null}function nG(e,t){var n=typeof e=="function"?e:aA(e),r=t==null?tG:typeof t=="function"?t:nb(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function rG(){var e=this.parentNode;e&&e.removeChild(this)}function oG(){return this.each(rG)}function aG(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function iG(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function sG(e){return this.select(e?iG:aG)}function cG(e){return arguments.length?this.property("__data__",e):this.node().__data__}function lG(e){return function(t){e.call(this,t,this.__data__)}}function uG(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function dG(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,o=t.length,a;n<o;++n)a=t[n],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++r]=a;++r?t.length=r:delete this.__on}}}function fG(e,t,n){return function(){var r=this.__on,o,a=lG(t);if(r){for(var i=0,s=r.length;i<s;++i)if((o=r[i]).type===e.type&&o.name===e.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=a,o.options=n),o.value=t;return}}this.addEventListener(e.type,a,n),o={type:e.type,name:e.name,value:t,listener:a,options:n},r?r.push(o):this.__on=[o]}}function pG(e,t,n){var r=uG(e+""),o,a=r.length,i;if(arguments.length<2){var s=this.node().__on;if(s){for(var c=0,l=s.length,u;c<l;++c)for(o=0,u=s[c];o<a;++o)if((i=r[o]).type===u.type&&i.name===u.name)return u.value}return}for(s=t?fG:dG,o=0;o<a;++o)this.each(s(r[o],t,n));return this}function mA(e,t,n){var r=uA(e),o=r.CustomEvent;typeof o=="function"?o=new o(t,n):(o=r.document.createEvent("Event"),n?(o.initEvent(t,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}function hG(e,t){return function(){return mA(this,e,t)}}function mG(e,t){return function(){return mA(this,e,t.apply(this,arguments))}}function yG(e,t){return this.each((typeof t=="function"?mG:hG)(e,t))}function*gG(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,a=r.length,i;o<a;++o)(i=r[o])&&(yield i)}var yA=[null];function Rn(e,t){this._groups=e,this._parents=t}function Yc(){return new Rn([[document.documentElement]],yA)}function vG(){return this}Rn.prototype=Yc.prototype={constructor:Rn,select:HK,selectAll:KK,selectChild:JK,selectChildren:nX,filter:rX,data:lX,enter:oX,exit:dX,join:fX,merge:pX,selection:vG,order:hX,sort:mX,call:gX,nodes:vX,node:bX,size:xX,empty:wX,each:_X,attr:NX,style:TX,property:LX,classed:zX,text:WX,html:XX,raise:QX,lower:ZX,append:eG,insert:nG,remove:oG,clone:sG,datum:cG,on:pG,dispatch:yG,[Symbol.iterator]:gG};function In(e){return typeof e=="string"?new Rn([[document.querySelector(e)]],[document.documentElement]):new Rn([[e]],yA)}function bG(e){let t;for(;t=e.sourceEvent;)e=t;return e}function ur(e,t){if(e=bG(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}}return[e.pageX,e.pageY]}const xG={passive:!1},Kc={capture:!0,passive:!1};function ob(e){e.stopImmediatePropagation()}function Ti(e){e.preventDefault(),e.stopImmediatePropagation()}function gA(e){var t=e.document.documentElement,n=In(e).on("dragstart.drag",Ti,Kc);"onselectstart"in t?n.on("selectstart.drag",Ti,Kc):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function vA(e,t){var n=e.document.documentElement,r=In(e).on("dragstart.drag",null);t&&(r.on("click.drag",Ti,Kc),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Zd=e=>()=>e;function ab(e,{sourceEvent:t,subject:n,target:r,identifier:o,active:a,x:i,y:s,dx:c,dy:l,dispatch:u}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:i,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:l,enumerable:!0,configurable:!0},_:{value:u}})}ab.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function wG(e){return!e.ctrlKey&&!e.button}function _G(){return this.parentNode}function jG(e,t){return t??{x:e.x,y:e.y}}function EG(){return navigator.maxTouchPoints||"ontouchstart"in this}function bA(){var e=wG,t=_G,n=jG,r=EG,o={},a=Xd("start","drag","end"),i=0,s,c,l,u,d=0;function f(w){w.on("mousedown.drag",p).filter(r).on("touchstart.drag",v).on("touchmove.drag",b,xG).on("touchend.drag touchcancel.drag",x).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(w,j){if(!(u||!e.call(this,w,j))){var E=_(this,t.call(this,w,j),w,j,"mouse");E&&(In(w.view).on("mousemove.drag",y,Kc).on("mouseup.drag",m,Kc),gA(w.view),ob(w),l=!1,s=w.clientX,c=w.clientY,E("start",w))}}function y(w){if(Ti(w),!l){var j=w.clientX-s,E=w.clientY-c;l=j*j+E*E>d}o.mouse("drag",w)}function m(w){In(w.view).on("mousemove.drag mouseup.drag",null),vA(w.view,l),Ti(w),o.mouse("end",w)}function v(w,j){if(e.call(this,w,j)){var E=w.changedTouches,S=t.call(this,w,j),O=E.length,N,P;for(N=0;N<O;++N)(P=_(this,S,w,j,E[N].identifier,E[N]))&&(ob(w),P("start",w,E[N]))}}function b(w){var j=w.changedTouches,E=j.length,S,O;for(S=0;S<E;++S)(O=o[j[S].identifier])&&(Ti(w),O("drag",w,j[S]))}function x(w){var j=w.changedTouches,E=j.length,S,O;for(u&&clearTimeout(u),u=setTimeout(function(){u=null},500),S=0;S<E;++S)(O=o[j[S].identifier])&&(ob(w),O("end",w,j[S]))}function _(w,j,E,S,O,N){var P=a.copy(),k=ur(N||E,j),R,A,C;if((C=n.call(w,new ab("beforestart",{sourceEvent:E,target:f,identifier:O,active:i,x:k[0],y:k[1],dx:0,dy:0,dispatch:P}),S))!=null)return R=C.x-k[0]||0,A=C.y-k[1]||0,function M(T,I,L){var D=k,$;switch(T){case"start":o[O]=M,$=i++;break;case"end":delete o[O],--i;case"drag":k=ur(L||I,j),$=i;break}P.call(T,w,new ab(T,{sourceEvent:I,subject:C,target:f,identifier:O,active:$,x:k[0]+R,y:k[1]+A,dx:k[0]-D[0],dy:k[1]-D[1],dispatch:P}),S)}}return f.filter=function(w){return arguments.length?(e=typeof w=="function"?w:Zd(!!w),f):e},f.container=function(w){return arguments.length?(t=typeof w=="function"?w:Zd(w),f):t},f.subject=function(w){return arguments.length?(n=typeof w=="function"?w:Zd(w),f):n},f.touchable=function(w){return arguments.length?(r=typeof w=="function"?w:Zd(!!w),f):r},f.on=function(){var w=a.on.apply(a,arguments);return w===a?f:w},f.clickDistance=function(w){return arguments.length?(d=(w=+w)*w,f):Math.sqrt(d)},f}function ib(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function xA(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Xc(){}var Gc=.7,ef=1/Gc,Ri="\\s*([+-]?\\d+)\\s*",Qc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",kr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",SG=/^#([0-9a-f]{3,8})$/,CG=new RegExp(`^rgb\\(${Ri},${Ri},${Ri}\\)$`),OG=new RegExp(`^rgb\\(${kr},${kr},${kr}\\)$`),MG=new RegExp(`^rgba\\(${Ri},${Ri},${Ri},${Qc}\\)$`),NG=new RegExp(`^rgba\\(${kr},${kr},${kr},${Qc}\\)$`),kG=new RegExp(`^hsl\\(${Qc},${kr},${kr}\\)$`),PG=new RegExp(`^hsla\\(${Qc},${kr},${kr},${Qc}\\)$`),wA={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ib(Xc,_a,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:_A,formatHex:_A,formatHex8:AG,formatHsl:TG,formatRgb:jA,toString:jA});function _A(){return this.rgb().formatHex()}function AG(){return this.rgb().formatHex8()}function TG(){return MA(this).formatHsl()}function jA(){return this.rgb().formatRgb()}function _a(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=SG.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?EA(t):n===3?new xn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?tf(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?tf(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=CG.exec(e))?new xn(t[1],t[2],t[3],1):(t=OG.exec(e))?new xn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=MG.exec(e))?tf(t[1],t[2],t[3],t[4]):(t=NG.exec(e))?tf(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=kG.exec(e))?OA(t[1],t[2]/100,t[3]/100,1):(t=PG.exec(e))?OA(t[1],t[2]/100,t[3]/100,t[4]):wA.hasOwnProperty(e)?EA(wA[e]):e==="transparent"?new xn(NaN,NaN,NaN,0):null}function EA(e){return new xn(e>>16&255,e>>8&255,e&255,1)}function tf(e,t,n,r){return r<=0&&(e=t=n=NaN),new xn(e,t,n,r)}function RG(e){return e instanceof Xc||(e=_a(e)),e?(e=e.rgb(),new xn(e.r,e.g,e.b,e.opacity)):new xn}function sb(e,t,n,r){return arguments.length===1?RG(e):new xn(e,t,n,r??1)}function xn(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}ib(xn,sb,xA(Xc,{brighter(e){return e=e==null?ef:Math.pow(ef,e),new xn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Gc:Math.pow(Gc,e),new xn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new xn(ja(this.r),ja(this.g),ja(this.b),nf(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:SA,formatHex:SA,formatHex8:IG,formatRgb:CA,toString:CA}));function SA(){return`#${Ea(this.r)}${Ea(this.g)}${Ea(this.b)}`}function IG(){return`#${Ea(this.r)}${Ea(this.g)}${Ea(this.b)}${Ea((isNaN(this.opacity)?1:this.opacity)*255)}`}function CA(){const e=nf(this.opacity);return`${e===1?"rgb(":"rgba("}${ja(this.r)}, ${ja(this.g)}, ${ja(this.b)}${e===1?")":`, ${e})`}`}function nf(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function ja(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Ea(e){return e=ja(e),(e<16?"0":"")+e.toString(16)}function OA(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new dr(e,t,n,r)}function MA(e){if(e instanceof dr)return new dr(e.h,e.s,e.l,e.opacity);if(e instanceof Xc||(e=_a(e)),!e)return new dr;if(e instanceof dr)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,o=Math.min(t,n,r),a=Math.max(t,n,r),i=NaN,s=a-o,c=(a+o)/2;return s?(t===a?i=(n-r)/s+(n<r)*6:n===a?i=(r-t)/s+2:i=(t-n)/s+4,s/=c<.5?a+o:2-a-o,i*=60):s=c>0&&c<1?0:i,new dr(i,s,c,e.opacity)}function DG(e,t,n,r){return arguments.length===1?MA(e):new dr(e,t,n,r??1)}function dr(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}ib(dr,DG,xA(Xc,{brighter(e){return e=e==null?ef:Math.pow(ef,e),new dr(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Gc:Math.pow(Gc,e),new dr(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,o=2*n-r;return new xn(cb(e>=240?e-240:e+120,o,r),cb(e,o,r),cb(e<120?e+240:e-120,o,r),this.opacity)},clamp(){return new dr(NA(this.h),rf(this.s),rf(this.l),nf(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=nf(this.opacity);return`${e===1?"hsl(":"hsla("}${NA(this.h)}, ${rf(this.s)*100}%, ${rf(this.l)*100}%${e===1?")":`, ${e})`}`}}));function NA(e){return e=(e||0)%360,e<0?e+360:e}function rf(e){return Math.max(0,Math.min(1,e||0))}function cb(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const lb=e=>()=>e;function LG(e,t){return function(n){return e+n*t}}function FG(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function BG(e){return(e=+e)==1?kA:function(t,n){return n-t?FG(t,n,e):lb(isNaN(t)?n:t)}}function kA(e,t){var n=t-e;return n?LG(e,n):lb(isNaN(e)?t:e)}const of=function e(t){var n=BG(t);function r(o,a){var i=n((o=sb(o)).r,(a=sb(a)).r),s=n(o.g,a.g),c=n(o.b,a.b),l=kA(o.opacity,a.opacity);return function(u){return o.r=i(u),o.g=s(u),o.b=c(u),o.opacity=l(u),o+""}}return r.gamma=e,r}(1);function $G(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),o;return function(a){for(o=0;o<n;++o)r[o]=e[o]*(1-a)+t[o]*a;return r}}function zG(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function VG(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,o=new Array(r),a=new Array(n),i;for(i=0;i<r;++i)o[i]=Ii(e[i],t[i]);for(;i<n;++i)a[i]=t[i];return function(s){for(i=0;i<r;++i)a[i]=o[i](s);return a}}function UG(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function fr(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function HG(e,t){var n={},r={},o;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(o in t)o in e?n[o]=Ii(e[o],t[o]):r[o]=t[o];return function(a){for(o in n)r[o]=n[o](a);return r}}var ub=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,db=new RegExp(ub.source,"g");function WG(e){return function(){return e}}function qG(e){return function(t){return e(t)+""}}function PA(e,t){var n=ub.lastIndex=db.lastIndex=0,r,o,a,i=-1,s=[],c=[];for(e=e+"",t=t+"";(r=ub.exec(e))&&(o=db.exec(t));)(a=o.index)>n&&(a=t.slice(n,a),s[i]?s[i]+=a:s[++i]=a),(r=r[0])===(o=o[0])?s[i]?s[i]+=o:s[++i]=o:(s[++i]=null,c.push({i,x:fr(r,o)})),n=db.lastIndex;return n<t.length&&(a=t.slice(n),s[i]?s[i]+=a:s[++i]=a),s.length<2?c[0]?qG(c[0].x):WG(t):(t=c.length,function(l){for(var u=0,d;u<t;++u)s[(d=c[u]).i]=d.x(l);return s.join("")})}function Ii(e,t){var n=typeof t,r;return t==null||n==="boolean"?lb(t):(n==="number"?fr:n==="string"?(r=_a(t))?(t=r,of):PA:t instanceof _a?of:t instanceof Date?UG:zG(t)?$G:Array.isArray(t)?VG:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?HG:fr)(e,t)}function fb(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var AA=180/Math.PI,TA={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function RA(e,t,n,r,o,a){var i,s,c;return(i=Math.sqrt(e*e+t*t))&&(e/=i,t/=i),(c=e*n+t*r)&&(n-=e*c,r-=t*c),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,c/=s),e*r<t*n&&(e=-e,t=-t,c=-c,i=-i),{translateX:o,translateY:a,rotate:Math.atan2(t,e)*AA,skewX:Math.atan(c)*AA,scaleX:i,scaleY:s}}var af;function YG(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?TA:RA(t.a,t.b,t.c,t.d,t.e,t.f)}function KG(e){return e==null||(af||(af=document.createElementNS("http://www.w3.org/2000/svg","g")),af.setAttribute("transform",e),!(e=af.transform.baseVal.consolidate()))?TA:(e=e.matrix,RA(e.a,e.b,e.c,e.d,e.e,e.f))}function IA(e,t,n,r){function o(l){return l.length?l.pop()+" ":""}function a(l,u,d,f,p,y){if(l!==d||u!==f){var m=p.push("translate(",null,t,null,n);y.push({i:m-4,x:fr(l,d)},{i:m-2,x:fr(u,f)})}else(d||f)&&p.push("translate("+d+t+f+n)}function i(l,u,d,f){l!==u?(l-u>180?u+=360:u-l>180&&(l+=360),f.push({i:d.push(o(d)+"rotate(",null,r)-2,x:fr(l,u)})):u&&d.push(o(d)+"rotate("+u+r)}function s(l,u,d,f){l!==u?f.push({i:d.push(o(d)+"skewX(",null,r)-2,x:fr(l,u)}):u&&d.push(o(d)+"skewX("+u+r)}function c(l,u,d,f,p,y){if(l!==d||u!==f){var m=p.push(o(p)+"scale(",null,",",null,")");y.push({i:m-4,x:fr(l,d)},{i:m-2,x:fr(u,f)})}else(d!==1||f!==1)&&p.push(o(p)+"scale("+d+","+f+")")}return function(l,u){var d=[],f=[];return l=e(l),u=e(u),a(l.translateX,l.translateY,u.translateX,u.translateY,d,f),i(l.rotate,u.rotate,d,f),s(l.skewX,u.skewX,d,f),c(l.scaleX,l.scaleY,u.scaleX,u.scaleY,d,f),l=u=null,function(p){for(var y=-1,m=f.length,v;++y<m;)d[(v=f[y]).i]=v.x(p);return d.join("")}}}var XG=IA(YG,"px, ","px)","deg)"),GG=IA(KG,", ",")",")"),QG=1e-12;function DA(e){return((e=Math.exp(e))+1/e)/2}function JG(e){return((e=Math.exp(e))-1/e)/2}function ZG(e){return((e=Math.exp(2*e))-1)/(e+1)}const eQ=function e(t,n,r){function o(a,i){var s=a[0],c=a[1],l=a[2],u=i[0],d=i[1],f=i[2],p=u-s,y=d-c,m=p*p+y*y,v,b;if(m<QG)b=Math.log(f/l)/t,v=function(S){return[s+S*p,c+S*y,l*Math.exp(t*S*b)]};else{var x=Math.sqrt(m),_=(f*f-l*l+r*m)/(2*l*n*x),w=(f*f-l*l-r*m)/(2*f*n*x),j=Math.log(Math.sqrt(_*_+1)-_),E=Math.log(Math.sqrt(w*w+1)-w);b=(E-j)/t,v=function(S){var O=S*b,N=DA(j),P=l/(n*x)*(N*ZG(t*O+j)-JG(j));return[s+P*p,c+P*y,l*N/DA(t*O+j)]}}return v.duration=b*1e3*t/Math.SQRT2,v}return o.rho=function(a){var i=Math.max(.001,+a),s=i*i,c=s*s;return e(i,s,c)},o}(Math.SQRT2,2,4);function tQ(e,t){t===void 0&&(t=e,e=Ii);for(var n=0,r=t.length-1,o=t[0],a=new Array(r<0?0:r);n<r;)a[n]=e(o,o=t[++n]);return function(i){var s=Math.max(0,Math.min(r-1,Math.floor(i*=r)));return a[s](i-s)}}var Di=0,Jc=0,Zc=0,LA=1e3,sf,el,cf=0,Sa=0,lf=0,tl=typeof performance=="object"&&performance.now?performance:Date,FA=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function pb(){return Sa||(FA(nQ),Sa=tl.now()+lf)}function nQ(){Sa=0}function uf(){this._call=this._time=this._next=null}uf.prototype=BA.prototype={constructor:uf,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?pb():+n)+(t==null?0:+t),!this._next&&el!==this&&(el?el._next=this:sf=this,el=this),this._call=e,this._time=n,hb()},stop:function(){this._call&&(this._call=null,this._time=1/0,hb())}};function BA(e,t,n){var r=new uf;return r.restart(e,t,n),r}function rQ(){pb(),++Di;for(var e=sf,t;e;)(t=Sa-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Di}function $A(){Sa=(cf=tl.now())+lf,Di=Jc=0;try{rQ()}finally{Di=0,aQ(),Sa=0}}function oQ(){var e=tl.now(),t=e-cf;t>LA&&(lf-=t,cf=e)}function aQ(){for(var e,t=sf,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:sf=n);el=e,hb(r)}function hb(e){if(!Di){Jc&&(Jc=clearTimeout(Jc));var t=e-Sa;t>24?(e<1/0&&(Jc=setTimeout($A,e-tl.now()-lf)),Zc&&(Zc=clearInterval(Zc))):(Zc||(cf=tl.now(),Zc=setInterval(oQ,LA)),Di=1,FA($A))}}function zA(e,t,n){var r=new uf;return t=t==null?0:+t,r.restart(o=>{r.stop(),e(o+t)},t,n),r}var iQ=Xd("start","end","cancel","interrupt"),sQ=[],VA=0,UA=1,mb=2,df=3,HA=4,yb=5,ff=6;function pf(e,t,n,r,o,a){var i=e.__transition;if(!i)e.__transition={};else if(n in i)return;cQ(e,n,{name:t,index:r,group:o,on:iQ,tween:sQ,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:VA})}function gb(e,t){var n=pr(e,t);if(n.state>VA)throw new Error("too late; already scheduled");return n}function Pr(e,t){var n=pr(e,t);if(n.state>df)throw new Error("too late; already running");return n}function pr(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function cQ(e,t,n){var r=e.__transition,o;r[t]=n,n.timer=BA(a,0,n.time);function a(l){n.state=UA,n.timer.restart(i,n.delay,n.time),n.delay<=l&&i(l-n.delay)}function i(l){var u,d,f,p;if(n.state!==UA)return c();for(u in r)if(p=r[u],p.name===n.name){if(p.state===df)return zA(i);p.state===HA?(p.state=ff,p.timer.stop(),p.on.call("interrupt",e,e.__data__,p.index,p.group),delete r[u]):+u<t&&(p.state=ff,p.timer.stop(),p.on.call("cancel",e,e.__data__,p.index,p.group),delete r[u])}if(zA(function(){n.state===df&&(n.state=HA,n.timer.restart(s,n.delay,n.time),s(l))}),n.state=mb,n.on.call("start",e,e.__data__,n.index,n.group),n.state===mb){for(n.state=df,o=new Array(f=n.tween.length),u=0,d=-1;u<f;++u)(p=n.tween[u].value.call(e,e.__data__,n.index,n.group))&&(o[++d]=p);o.length=d+1}}function s(l){for(var u=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(c),n.state=yb,1),d=-1,f=o.length;++d<f;)o[d].call(e,u);n.state===yb&&(n.on.call("end",e,e.__data__,n.index,n.group),c())}function c(){n.state=ff,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function hf(e,t){var n=e.__transition,r,o,a=!0,i;if(n){t=t==null?null:t+"";for(i in n){if((r=n[i]).name!==t){a=!1;continue}o=r.state>mb&&r.state<yb,r.state=ff,r.timer.stop(),r.on.call(o?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[i]}a&&delete e.__transition}}function lQ(e){return this.each(function(){hf(this,e)})}function uQ(e,t){var n,r;return function(){var o=Pr(this,e),a=o.tween;if(a!==n){r=n=a;for(var i=0,s=r.length;i<s;++i)if(r[i].name===t){r=r.slice(),r.splice(i,1);break}}o.tween=r}}function dQ(e,t,n){var r,o;if(typeof n!="function")throw new Error;return function(){var a=Pr(this,e),i=a.tween;if(i!==r){o=(r=i).slice();for(var s={name:t,value:n},c=0,l=o.length;c<l;++c)if(o[c].name===t){o[c]=s;break}c===l&&o.push(s)}a.tween=o}}function fQ(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=pr(this.node(),n).tween,o=0,a=r.length,i;o<a;++o)if((i=r[o]).name===e)return i.value;return null}return this.each((t==null?uQ:dQ)(n,e,t))}function vb(e,t,n){var r=e._id;return e.each(function(){var o=Pr(this,r);(o.value||(o.value={}))[t]=n.apply(this,arguments)}),function(o){return pr(o,r).value[t]}}function WA(e,t){var n;return(typeof t=="number"?fr:t instanceof _a?of:(n=_a(t))?(t=n,of):PA)(e,t)}function pQ(e){return function(){this.removeAttribute(e)}}function hQ(e){return function(){this.removeAttributeNS(e.space,e.local)}}function mQ(e,t,n){var r,o=n+"",a;return function(){var i=this.getAttribute(e);return i===o?null:i===r?a:a=t(r=i,n)}}function yQ(e,t,n){var r,o=n+"",a;return function(){var i=this.getAttributeNS(e.space,e.local);return i===o?null:i===r?a:a=t(r=i,n)}}function gQ(e,t,n){var r,o,a;return function(){var i,s=n(this),c;return s==null?void this.removeAttribute(e):(i=this.getAttribute(e),c=s+"",i===c?null:i===r&&c===o?a:(o=c,a=t(r=i,s)))}}function vQ(e,t,n){var r,o,a;return function(){var i,s=n(this),c;return s==null?void this.removeAttributeNS(e.space,e.local):(i=this.getAttributeNS(e.space,e.local),c=s+"",i===c?null:i===r&&c===o?a:(o=c,a=t(r=i,s)))}}function bQ(e,t){var n=Qd(e),r=n==="transform"?GG:WA;return this.attrTween(e,typeof t=="function"?(n.local?vQ:gQ)(n,r,vb(this,"attr."+e,t)):t==null?(n.local?hQ:pQ)(n):(n.local?yQ:mQ)(n,r,t))}function xQ(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function wQ(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function _Q(e,t){var n,r;function o(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&wQ(e,a)),n}return o._value=t,o}function jQ(e,t){var n,r;function o(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&xQ(e,a)),n}return o._value=t,o}function EQ(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=Qd(e);return this.tween(n,(r.local?_Q:jQ)(r,t))}function SQ(e,t){return function(){gb(this,e).delay=+t.apply(this,arguments)}}function CQ(e,t){return t=+t,function(){gb(this,e).delay=t}}function OQ(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?SQ:CQ)(t,e)):pr(this.node(),t).delay}function MQ(e,t){return function(){Pr(this,e).duration=+t.apply(this,arguments)}}function NQ(e,t){return t=+t,function(){Pr(this,e).duration=t}}function kQ(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?MQ:NQ)(t,e)):pr(this.node(),t).duration}function PQ(e,t){if(typeof t!="function")throw new Error;return function(){Pr(this,e).ease=t}}function AQ(e){var t=this._id;return arguments.length?this.each(PQ(t,e)):pr(this.node(),t).ease}function TQ(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Pr(this,e).ease=n}}function RQ(e){if(typeof e!="function")throw new Error;return this.each(TQ(this._id,e))}function IQ(e){typeof e!="function"&&(e=sA(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var a=t[o],i=a.length,s=r[o]=[],c,l=0;l<i;++l)(c=a[l])&&e.call(c,c.__data__,l,a)&&s.push(c);return new so(r,this._parents,this._name,this._id)}function DQ(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,o=n.length,a=Math.min(r,o),i=new Array(r),s=0;s<a;++s)for(var c=t[s],l=n[s],u=c.length,d=i[s]=new Array(u),f,p=0;p<u;++p)(f=c[p]||l[p])&&(d[p]=f);for(;s<r;++s)i[s]=t[s];return new so(i,this._parents,this._name,this._id)}function LQ(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function FQ(e,t,n){var r,o,a=LQ(t)?gb:Pr;return function(){var i=a(this,e),s=i.on;s!==r&&(o=(r=s).copy()).on(t,n),i.on=o}}function BQ(e,t){var n=this._id;return arguments.length<2?pr(this.node(),n).on.on(e):this.each(FQ(n,e,t))}function $Q(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function zQ(){return this.on("end.remove",$Q(this._id))}function VQ(e){var t=this._name,n=this._id;typeof e!="function"&&(e=nb(e));for(var r=this._groups,o=r.length,a=new Array(o),i=0;i<o;++i)for(var s=r[i],c=s.length,l=a[i]=new Array(c),u,d,f=0;f<c;++f)(u=s[f])&&(d=e.call(u,u.__data__,f,s))&&("__data__"in u&&(d.__data__=u.__data__),l[f]=d,pf(l[f],t,n,f,l,pr(u,n)));return new so(a,this._parents,t,n)}function UQ(e){var t=this._name,n=this._id;typeof e!="function"&&(e=iA(e));for(var r=this._groups,o=r.length,a=[],i=[],s=0;s<o;++s)for(var c=r[s],l=c.length,u,d=0;d<l;++d)if(u=c[d]){for(var f=e.call(u,u.__data__,d,c),p,y=pr(u,n),m=0,v=f.length;m<v;++m)(p=f[m])&&pf(p,t,n,m,f,y);a.push(f),i.push(u)}return new so(a,i,t,n)}var HQ=Yc.prototype.constructor;function WQ(){return new HQ(this._groups,this._parents)}function qQ(e,t){var n,r,o;return function(){var a=Ai(this,e),i=(this.style.removeProperty(e),Ai(this,e));return a===i?null:a===n&&i===r?o:o=t(n=a,r=i)}}function qA(e){return function(){this.style.removeProperty(e)}}function YQ(e,t,n){var r,o=n+"",a;return function(){var i=Ai(this,e);return i===o?null:i===r?a:a=t(r=i,n)}}function KQ(e,t,n){var r,o,a;return function(){var i=Ai(this,e),s=n(this),c=s+"";return s==null&&(c=s=(this.style.removeProperty(e),Ai(this,e))),i===c?null:i===r&&c===o?a:(o=c,a=t(r=i,s))}}function XQ(e,t){var n,r,o,a="style."+t,i="end."+a,s;return function(){var c=Pr(this,e),l=c.on,u=c.value[a]==null?s||(s=qA(t)):void 0;(l!==n||o!==u)&&(r=(n=l).copy()).on(i,o=u),c.on=r}}function GQ(e,t,n){var r=(e+="")=="transform"?XG:WA;return t==null?this.styleTween(e,qQ(e,r)).on("end.style."+e,qA(e)):typeof t=="function"?this.styleTween(e,KQ(e,r,vb(this,"style."+e,t))).each(XQ(this._id,e)):this.styleTween(e,YQ(e,r,t),n).on("end.style."+e,null)}function QQ(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function JQ(e,t,n){var r,o;function a(){var i=t.apply(this,arguments);return i!==o&&(r=(o=i)&&QQ(e,i,n)),r}return a._value=t,a}function ZQ(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,JQ(e,t,n??""))}function eJ(e){return function(){this.textContent=e}}function tJ(e){return function(){var t=e(this);this.textContent=t??""}}function nJ(e){return this.tween("text",typeof e=="function"?tJ(vb(this,"text",e)):eJ(e==null?"":e+""))}function rJ(e){return function(t){this.textContent=e.call(this,t)}}function oJ(e){var t,n;function r(){var o=e.apply(this,arguments);return o!==n&&(t=(n=o)&&rJ(o)),t}return r._value=e,r}function aJ(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,oJ(e))}function iJ(){for(var e=this._name,t=this._id,n=YA(),r=this._groups,o=r.length,a=0;a<o;++a)for(var i=r[a],s=i.length,c,l=0;l<s;++l)if(c=i[l]){var u=pr(c,t);pf(c,e,n,l,i,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new so(r,this._parents,e,n)}function sJ(){var e,t,n=this,r=n._id,o=n.size();return new Promise(function(a,i){var s={value:i},c={value:function(){--o===0&&a()}};n.each(function(){var l=Pr(this,r),u=l.on;u!==e&&(t=(e=u).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(c)),l.on=t}),o===0&&a()})}var cJ=0;function so(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function YA(){return++cJ}var co=Yc.prototype;so.prototype={constructor:so,select:VQ,selectAll:UQ,selectChild:co.selectChild,selectChildren:co.selectChildren,filter:IQ,merge:DQ,selection:WQ,transition:iJ,call:co.call,nodes:co.nodes,node:co.node,size:co.size,empty:co.empty,each:co.each,on:BQ,attr:bQ,attrTween:EQ,style:GQ,styleTween:ZQ,text:nJ,textTween:aJ,remove:zQ,tween:fQ,delay:OQ,duration:kQ,ease:AQ,easeVarying:RQ,end:sJ,[Symbol.iterator]:co[Symbol.iterator]};function lJ(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var uJ={time:null,delay:0,duration:250,ease:lJ};function dJ(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function fJ(e){var t,n;e instanceof so?(t=e._id,e=e._name):(t=YA(),(n=uJ).time=pb(),e=e==null?null:e+"");for(var r=this._groups,o=r.length,a=0;a<o;++a)for(var i=r[a],s=i.length,c,l=0;l<s;++l)(c=i[l])&&pf(c,e,t,l,i,n||dJ(c,t));return new so(r,this._parents,e,t)}Yc.prototype.interrupt=lQ,Yc.prototype.transition=fJ;const mf=e=>()=>e;function pJ(e,{sourceEvent:t,target:n,transform:r,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:o}})}function lo(e,t,n){this.k=e,this.x=t,this.y=n}lo.prototype={constructor:lo,scale:function(e){return e===1?this:new lo(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new lo(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var yf=new lo(1,0,0);KA.prototype=lo.prototype;function KA(e){for(;!e.__zoom;)if(!(e=e.parentNode))return yf;return e.__zoom}function bb(e){e.stopImmediatePropagation()}function nl(e){e.preventDefault(),e.stopImmediatePropagation()}function hJ(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function mJ(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function XA(){return this.__zoom||yf}function yJ(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function gJ(){return navigator.maxTouchPoints||"ontouchstart"in this}function vJ(e,t,n){var r=e.invertX(t[0][0])-n[0][0],o=e.invertX(t[1][0])-n[1][0],a=e.invertY(t[0][1])-n[0][1],i=e.invertY(t[1][1])-n[1][1];return e.translate(o>r?(r+o)/2:Math.min(0,r)||Math.max(0,o),i>a?(a+i)/2:Math.min(0,a)||Math.max(0,i))}function GA(){var e=hJ,t=mJ,n=vJ,r=yJ,o=gJ,a=[0,1/0],i=[[-1/0,-1/0],[1/0,1/0]],s=250,c=eQ,l=Xd("start","zoom","end"),u,d,f,p=500,y=150,m=0,v=10;function b(C){C.property("__zoom",XA).on("wheel.zoom",O,{passive:!1}).on("mousedown.zoom",N).on("dblclick.zoom",P).filter(o).on("touchstart.zoom",k).on("touchmove.zoom",R).on("touchend.zoom touchcancel.zoom",A).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}b.transform=function(C,M,T,I){var L=C.selection?C.selection():C;L.property("__zoom",XA),C!==L?j(C,M,T,I):L.interrupt().each(function(){E(this,arguments).event(I).start().zoom(null,typeof M=="function"?M.apply(this,arguments):M).end()})},b.scaleBy=function(C,M,T,I){b.scaleTo(C,function(){var L=this.__zoom.k,D=typeof M=="function"?M.apply(this,arguments):M;return L*D},T,I)},b.scaleTo=function(C,M,T,I){b.transform(C,function(){var L=t.apply(this,arguments),D=this.__zoom,$=T==null?w(L):typeof T=="function"?T.apply(this,arguments):T,U=D.invert($),F=typeof M=="function"?M.apply(this,arguments):M;return n(_(x(D,F),$,U),L,i)},T,I)},b.translateBy=function(C,M,T,I){b.transform(C,function(){return n(this.__zoom.translate(typeof M=="function"?M.apply(this,arguments):M,typeof T=="function"?T.apply(this,arguments):T),t.apply(this,arguments),i)},null,I)},b.translateTo=function(C,M,T,I,L){b.transform(C,function(){var D=t.apply(this,arguments),$=this.__zoom,U=I==null?w(D):typeof I=="function"?I.apply(this,arguments):I;return n(yf.translate(U[0],U[1]).scale($.k).translate(typeof M=="function"?-M.apply(this,arguments):-M,typeof T=="function"?-T.apply(this,arguments):-T),D,i)},I,L)};function x(C,M){return M=Math.max(a[0],Math.min(a[1],M)),M===C.k?C:new lo(M,C.x,C.y)}function _(C,M,T){var I=M[0]-T[0]*C.k,L=M[1]-T[1]*C.k;return I===C.x&&L===C.y?C:new lo(C.k,I,L)}function w(C){return[(+C[0][0]+ +C[1][0])/2,(+C[0][1]+ +C[1][1])/2]}function j(C,M,T,I){C.on("start.zoom",function(){E(this,arguments).event(I).start()}).on("interrupt.zoom end.zoom",function(){E(this,arguments).event(I).end()}).tween("zoom",function(){var L=this,D=arguments,$=E(L,D).event(I),U=t.apply(L,D),F=T==null?w(U):typeof T=="function"?T.apply(L,D):T,H=Math.max(U[1][0]-U[0][0],U[1][1]-U[0][1]),Y=L.__zoom,G=typeof M=="function"?M.apply(L,D):M,re=c(Y.invert(F).concat(H/Y.k),G.invert(F).concat(H/G.k));return function(Z){if(Z===1)Z=G;else{var q=re(Z),W=H/q[2];Z=new lo(W,F[0]-q[0]*W,F[1]-q[1]*W)}$.zoom(null,Z)}})}function E(C,M,T){return!T&&C.__zooming||new S(C,M)}function S(C,M){this.that=C,this.args=M,this.active=0,this.sourceEvent=null,this.extent=t.apply(C,M),this.taps=0}S.prototype={event:function(C){return C&&(this.sourceEvent=C),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(C,M){return this.mouse&&C!=="mouse"&&(this.mouse[1]=M.invert(this.mouse[0])),this.touch0&&C!=="touch"&&(this.touch0[1]=M.invert(this.touch0[0])),this.touch1&&C!=="touch"&&(this.touch1[1]=M.invert(this.touch1[0])),this.that.__zoom=M,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(C){var M=In(this.that).datum();l.call(C,this.that,new pJ(C,{sourceEvent:this.sourceEvent,target:b,type:C,transform:this.that.__zoom,dispatch:l}),M)}};function O(C,...M){if(!e.apply(this,arguments))return;var T=E(this,M).event(C),I=this.__zoom,L=Math.max(a[0],Math.min(a[1],I.k*Math.pow(2,r.apply(this,arguments)))),D=ur(C);if(T.wheel)(T.mouse[0][0]!==D[0]||T.mouse[0][1]!==D[1])&&(T.mouse[1]=I.invert(T.mouse[0]=D)),clearTimeout(T.wheel);else{if(I.k===L)return;T.mouse=[D,I.invert(D)],hf(this),T.start()}nl(C),T.wheel=setTimeout($,y),T.zoom("mouse",n(_(x(I,L),T.mouse[0],T.mouse[1]),T.extent,i));function $(){T.wheel=null,T.end()}}function N(C,...M){if(f||!e.apply(this,arguments))return;var T=C.currentTarget,I=E(this,M,!0).event(C),L=In(C.view).on("mousemove.zoom",F,!0).on("mouseup.zoom",H,!0),D=ur(C,T),$=C.clientX,U=C.clientY;gA(C.view),bb(C),I.mouse=[D,this.__zoom.invert(D)],hf(this),I.start();function F(Y){if(nl(Y),!I.moved){var G=Y.clientX-$,re=Y.clientY-U;I.moved=G*G+re*re>m}I.event(Y).zoom("mouse",n(_(I.that.__zoom,I.mouse[0]=ur(Y,T),I.mouse[1]),I.extent,i))}function H(Y){L.on("mousemove.zoom mouseup.zoom",null),vA(Y.view,I.moved),nl(Y),I.event(Y).end()}}function P(C,...M){if(e.apply(this,arguments)){var T=this.__zoom,I=ur(C.changedTouches?C.changedTouches[0]:C,this),L=T.invert(I),D=T.k*(C.shiftKey?.5:2),$=n(_(x(T,D),I,L),t.apply(this,M),i);nl(C),s>0?In(this).transition().duration(s).call(j,$,I,C):In(this).call(b.transform,$,I,C)}}function k(C,...M){if(e.apply(this,arguments)){var T=C.touches,I=T.length,L=E(this,M,C.changedTouches.length===I).event(C),D,$,U,F;for(bb(C),$=0;$<I;++$)U=T[$],F=ur(U,this),F=[F,this.__zoom.invert(F),U.identifier],L.touch0?!L.touch1&&L.touch0[2]!==F[2]&&(L.touch1=F,L.taps=0):(L.touch0=F,D=!0,L.taps=1+!!u);u&&(u=clearTimeout(u)),D&&(L.taps<2&&(d=F[0],u=setTimeout(function(){u=null},p)),hf(this),L.start())}}function R(C,...M){if(this.__zooming){var T=E(this,M).event(C),I=C.changedTouches,L=I.length,D,$,U,F;for(nl(C),D=0;D<L;++D)$=I[D],U=ur($,this),T.touch0&&T.touch0[2]===$.identifier?T.touch0[0]=U:T.touch1&&T.touch1[2]===$.identifier&&(T.touch1[0]=U);if($=T.that.__zoom,T.touch1){var H=T.touch0[0],Y=T.touch0[1],G=T.touch1[0],re=T.touch1[1],Z=(Z=G[0]-H[0])*Z+(Z=G[1]-H[1])*Z,q=(q=re[0]-Y[0])*q+(q=re[1]-Y[1])*q;$=x($,Math.sqrt(Z/q)),U=[(H[0]+G[0])/2,(H[1]+G[1])/2],F=[(Y[0]+re[0])/2,(Y[1]+re[1])/2]}else if(T.touch0)U=T.touch0[0],F=T.touch0[1];else return;T.zoom("touch",n(_($,U,F),T.extent,i))}}function A(C,...M){if(this.__zooming){var T=E(this,M).event(C),I=C.changedTouches,L=I.length,D,$;for(bb(C),f&&clearTimeout(f),f=setTimeout(function(){f=null},p),D=0;D<L;++D)$=I[D],T.touch0&&T.touch0[2]===$.identifier?delete T.touch0:T.touch1&&T.touch1[2]===$.identifier&&delete T.touch1;if(T.touch1&&!T.touch0&&(T.touch0=T.touch1,delete T.touch1),T.touch0)T.touch0[1]=this.__zoom.invert(T.touch0[0]);else if(T.end(),T.taps===2&&($=ur($,this),Math.hypot(d[0]-$[0],d[1]-$[1])<v)){var U=In(this).on("dblclick.zoom");U&&U.apply(this,arguments)}}}return b.wheelDelta=function(C){return arguments.length?(r=typeof C=="function"?C:mf(+C),b):r},b.filter=function(C){return arguments.length?(e=typeof C=="function"?C:mf(!!C),b):e},b.touchable=function(C){return arguments.length?(o=typeof C=="function"?C:mf(!!C),b):o},b.extent=function(C){return arguments.length?(t=typeof C=="function"?C:mf([[+C[0][0],+C[0][1]],[+C[1][0],+C[1][1]]]),b):t},b.scaleExtent=function(C){return arguments.length?(a[0]=+C[0],a[1]=+C[1],b):[a[0],a[1]]},b.translateExtent=function(C){return arguments.length?(i[0][0]=+C[0][0],i[1][0]=+C[1][0],i[0][1]=+C[0][1],i[1][1]=+C[1][1],b):[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},b.constrain=function(C){return arguments.length?(n=C,b):n},b.duration=function(C){return arguments.length?(s=+C,b):s},b.interpolate=function(C){return arguments.length?(c=C,b):c},b.on=function(){var C=l.on.apply(l,arguments);return C===l?b:C},b.clickDistance=function(C){return arguments.length?(m=(C=+C)*C,b):Math.sqrt(m)},b.tapDistance=function(C){return arguments.length?(v=+C,b):v},b}const uo={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:n,targetHandle:r})=>`Couldn't create edge for ${e} handle id: "${e==="source"?n:r}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`},rl=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],QA=["Enter"," ","Escape"];var Li;(function(e){e.Strict="strict",e.Loose="loose"})(Li||(Li={}));var Ho;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Ho||(Ho={}));var ol;(function(e){e.Partial="partial",e.Full="full"})(ol||(ol={}));const JA={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var Wo;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Wo||(Wo={}));var gf;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(gf||(gf={}));var fe;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(fe||(fe={}));const ZA={[fe.Left]:fe.Right,[fe.Right]:fe.Left,[fe.Top]:fe.Bottom,[fe.Bottom]:fe.Top};function bJ(e,t){if(!e&&!t)return!0;if(!e||!t||e.size!==t.size)return!1;if(!e.size&&!t.size)return!0;for(const n of e.keys())if(!t.has(n))return!1;return!0}function eT(e,t,n){if(!n)return;const r=[];e.forEach((o,a)=>{t!=null&&t.has(a)||r.push(o)}),r.length&&n(r)}function tT(e){return e===null?null:e?"valid":"invalid"}const nT=e=>"id"in e&&"source"in e&&"target"in e,xJ=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),xb=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),al=(e,t=[0,0])=>{const{width:n,height:r}=fo(e),o=e.origin??t,a=n*o[0],i=r*o[1];return{x:e.position.x-a,y:e.position.y-i}},wJ=(e,t={nodeOrigin:[0,0],nodeLookup:void 0})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,o)=>{const a=typeof o=="string";let i=!t.nodeLookup&&!a?o:void 0;t.nodeLookup&&(i=a?t.nodeLookup.get(o):xb(o)?o:t.nodeLookup.get(o.id));const s=i?xf(i,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return vf(r,s)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return bf(n)},il=(e,t={})=>{if(e.size===0)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return e.forEach(r=>{if(t.filter===void 0||t.filter(r)){const o=xf(r);n=vf(n,o)}}),bf(n)},rT=(e,t,[n,r,o]=[0,0,1],a=!1,i=!1)=>{const s={...cl(t,[n,r,o]),width:t.width/o,height:t.height/o},c=[];for(const l of e.values()){const{measured:u,selectable:d=!0,hidden:f=!1}=l;if(i&&!d||f)continue;const p=u.width??l.width??l.initialWidth??null,y=u.height??l.height??l.initialHeight??null,m=sl(s,Bi(l)),v=(p??0)*(y??0),b=a&&m>0;(!l.internals.handleBounds||b||m>=v||l.dragging)&&c.push(l)}return c},_J=(e,t)=>{const n=new Set;return e.forEach(r=>{n.add(r.id)}),t.filter(r=>n.has(r.source)||n.has(r.target))};function wb(e,t){const n=new Map,r=t!=null&&t.nodes?new Set(t.nodes.map(o=>o.id)):null;return e.forEach(o=>{o.measured.width&&o.measured.height&&(t!=null&&t.includeHiddenNodes||!o.hidden)&&(!r||r.has(o.id))&&n.set(o.id,o)}),n}async function _b({nodes:e,width:t,height:n,panZoom:r,minZoom:o,maxZoom:a},i){if(e.size===0)return Promise.resolve(!1);const s=il(e),c=Eb(s,t,n,(i==null?void 0:i.minZoom)??o,(i==null?void 0:i.maxZoom)??a,(i==null?void 0:i.padding)??.1);return await r.setViewport(c,{duration:i==null?void 0:i.duration}),Promise.resolve(!0)}function oT({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:r=[0,0],nodeExtent:o,onError:a}){const i=n.get(e),s=i.parentId?n.get(i.parentId):void 0,{x:c,y:l}=s?s.internals.positionAbsolute:{x:0,y:0},u=i.origin??r;let d=o;if(i.extent==="parent"&&!i.expandParent)if(!s)a==null||a("005",uo.error005());else{const p=s.measured.width,y=s.measured.height;p&&y&&(d=[[c,l],[c+p,l+y]])}else s&&$i(i.extent)&&(d=[[i.extent[0][0]+c,i.extent[0][1]+l],[i.extent[1][0]+c,i.extent[1][1]+l]]);const f=$i(d)?Ca(t,d,i.measured):t;return{position:{x:f.x-c+i.measured.width*u[0],y:f.y-l+i.measured.height*u[1]},positionAbsolute:f}}async function jJ({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:r,onBeforeDelete:o}){const a=new Set(e.map(d=>d.id)),i=[];for(const d of n){if(d.deletable===!1)continue;const f=a.has(d.id),p=!f&&d.parentId&&i.find(y=>y.id===d.parentId);(f||p)&&i.push(d)}const s=new Set(t.map(d=>d.id)),c=r.filter(d=>d.deletable!==!1),l=_J(i,c);for(const d of c)s.has(d.id)&&!l.find(f=>f.id===d.id)&&l.push(d);if(!o)return{edges:l,nodes:i};const u=await o({nodes:i,edges:l});return typeof u=="boolean"?u?{edges:l,nodes:i}:{edges:[],nodes:[]}:u}const Fi=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),Ca=(e={x:0,y:0},t,n)=>({x:Fi(e.x,t[0][0],t[1][0]-((n==null?void 0:n.width)??0)),y:Fi(e.y,t[0][1],t[1][1]-((n==null?void 0:n.height)??0))});function aT(e,t,n){const{width:r,height:o}=fo(n),{x:a,y:i}=n.internals.positionAbsolute;return Ca(e,[[a,i],[a+r,i+o]],t)}const iT=(e,t,n)=>e<t?Fi(Math.abs(e-t),1,t)/t:e>n?-Fi(Math.abs(e-n),1,t)/t:0,sT=(e,t,n=15,r=40)=>{const o=iT(e.x,r,t.width-r)*n,a=iT(e.y,r,t.height-r)*n;return[o,a]},vf=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),jb=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),bf=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),Bi=(e,t=[0,0])=>{var o,a;const{x:n,y:r}=xb(e)?e.internals.positionAbsolute:al(e,t);return{x:n,y:r,width:((o=e.measured)==null?void 0:o.width)??e.width??e.initialWidth??0,height:((a=e.measured)==null?void 0:a.height)??e.height??e.initialHeight??0}},xf=(e,t=[0,0])=>{var o,a;const{x:n,y:r}=xb(e)?e.internals.positionAbsolute:al(e,t);return{x:n,y:r,x2:n+(((o=e.measured)==null?void 0:o.width)??e.width??e.initialWidth??0),y2:r+(((a=e.measured)==null?void 0:a.height)??e.height??e.initialHeight??0)}},cT=(e,t)=>bf(vf(jb(e),jb(t))),sl=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},lT=e=>hr(e.width)&&hr(e.height)&&hr(e.x)&&hr(e.y),hr=e=>!isNaN(e)&&isFinite(e),EJ=(e,t)=>{},wf=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),cl=({x:e,y:t},[n,r,o],a=!1,i=[1,1])=>{const s={x:(e-n)/o,y:(t-r)/o};return a?wf(s,i):s},uT=({x:e,y:t},[n,r,o])=>({x:e*o+n,y:t*o+r}),Eb=(e,t,n,r,o,a)=>{const i=t/(e.width*(1+a)),s=n/(e.height*(1+a)),c=Math.min(i,s),l=Fi(c,r,o),u=e.x+e.width/2,d=e.y+e.height/2,f=t/2-u*l,p=n/2-d*l;return{x:f,y:p,zoom:l}},_f=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function $i(e){return e!==void 0&&e!=="parent"}function fo(e){var t,n;return{width:((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth??0,height:((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight??0}}function dT(e){var t,n;return(((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth)!==void 0&&(((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight)!==void 0}function fT(e,t={width:0,height:0},n,r,o){const a={...e},i=r.get(n);if(i){const s=i.origin||o;a.x+=i.internals.positionAbsolute.x-(t.width??0)*s[0],a.y+=i.internals.positionAbsolute.y-(t.height??0)*s[1]}return a}function ll(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:r,containerBounds:o}){const{x:a,y:i}=po(e),s=cl({x:a-((o==null?void 0:o.left)??0),y:i-((o==null?void 0:o.top)??0)},r),{x:c,y:l}=n?wf(s,t):s;return{xSnapped:c,ySnapped:l,...s}}const jf=e=>({width:e.offsetWidth,height:e.offsetHeight}),pT=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},SJ=["INPUT","SELECT","TEXTAREA"];function Sb(e){var n,r;const t=((r=(n=e.composedPath)==null?void 0:n.call(e))==null?void 0:r[0])||e.target;return SJ.includes(t==null?void 0:t.nodeName)||(t==null?void 0:t.hasAttribute("contenteditable"))||!!(t!=null&&t.closest(".nokey"))}const hT=e=>"clientX"in e,po=(e,t)=>{var a,i;const n=hT(e),r=n?e.clientX:(a=e.touches)==null?void 0:a[0].clientX,o=n?e.clientY:(i=e.touches)==null?void 0:i[0].clientY;return{x:r-((t==null?void 0:t.left)??0),y:o-((t==null?void 0:t.top)??0)}},mT=(e,t,n,r,o)=>{const a=t.querySelectorAll(`.${e}`);return!a||!a.length?null:Array.from(a).map(i=>{const s=i.getBoundingClientRect();return{id:i.getAttribute("data-handleid"),type:e,nodeId:o,position:i.getAttribute("data-handlepos"),x:(s.left-n.left)/r,y:(s.top-n.top)/r,...jf(i)}})};function yT({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:o,sourceControlY:a,targetControlX:i,targetControlY:s}){const c=e*.125+o*.375+i*.375+n*.125,l=t*.125+a*.375+s*.375+r*.125,u=Math.abs(c-e),d=Math.abs(l-t);return[c,l,u,d]}function Ef(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function gT({pos:e,x1:t,y1:n,x2:r,y2:o,c:a}){switch(e){case fe.Left:return[t-Ef(t-r,a),n];case fe.Right:return[t+Ef(r-t,a),n];case fe.Top:return[t,n-Ef(n-o,a)];case fe.Bottom:return[t,n+Ef(o-n,a)]}}function vT({sourceX:e,sourceY:t,sourcePosition:n=fe.Bottom,targetX:r,targetY:o,targetPosition:a=fe.Top,curvature:i=.25}){const[s,c]=gT({pos:n,x1:e,y1:t,x2:r,y2:o,c:i}),[l,u]=gT({pos:a,x1:r,y1:o,x2:e,y2:t,c:i}),[d,f,p,y]=yT({sourceX:e,sourceY:t,targetX:r,targetY:o,sourceControlX:s,sourceControlY:c,targetControlX:l,targetControlY:u});return[`M${e},${t} C${s},${c} ${l},${u} ${r},${o}`,d,f,p,y]}function bT({sourceX:e,sourceY:t,targetX:n,targetY:r}){const o=Math.abs(n-e)/2,a=n<e?n+o:n-o,i=Math.abs(r-t)/2,s=r<t?r+i:r-i;return[a,s,o,i]}function CJ({sourceNode:e,targetNode:t,selected:n=!1,zIndex:r=0,elevateOnSelect:o=!1}){if(!o)return r;const a=n||t.selected||e.selected,i=Math.max(e.internals.z||0,t.internals.z||0,1e3);return r+(a?i:0)}function OJ({sourceNode:e,targetNode:t,width:n,height:r,transform:o}){const a=vf(xf(e),xf(t));a.x===a.x2&&(a.x2+=1),a.y===a.y2&&(a.y2+=1);const i={x:-o[0]/o[2],y:-o[1]/o[2],width:n/o[2],height:r/o[2]};return sl(i,bf(a))>0}const MJ=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`xy-edge__${e}${t||""}-${n}${r||""}`,NJ=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),xT=(e,t)=>{if(!e.source||!e.target)return t;let n;return nT(e)?n={...e}:n={...e,id:MJ(e)},NJ(n,t)?t:(n.sourceHandle===null&&delete n.sourceHandle,n.targetHandle===null&&delete n.targetHandle,t.concat(n))};function wT({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[o,a,i,s]=bT({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,o,a,i,s]}const _T={[fe.Left]:{x:-1,y:0},[fe.Right]:{x:1,y:0},[fe.Top]:{x:0,y:-1},[fe.Bottom]:{x:0,y:1}},kJ=({source:e,sourcePosition:t=fe.Bottom,target:n})=>t===fe.Left||t===fe.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},jT=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function PJ({source:e,sourcePosition:t=fe.Bottom,target:n,targetPosition:r=fe.Top,center:o,offset:a}){const i=_T[t],s=_T[r],c={x:e.x+i.x*a,y:e.y+i.y*a},l={x:n.x+s.x*a,y:n.y+s.y*a},u=kJ({source:c,sourcePosition:t,target:l}),d=u.x!==0?"x":"y",f=u[d];let p=[],y,m;const v={x:0,y:0},b={x:0,y:0},[x,_,w,j]=bT({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(i[d]*s[d]===-1){y=o.x??x,m=o.y??_;const E=[{x:y,y:c.y},{x:y,y:l.y}],S=[{x:c.x,y:m},{x:l.x,y:m}];i[d]===f?p=d==="x"?E:S:p=d==="x"?S:E}else{const E=[{x:c.x,y:l.y}],S=[{x:l.x,y:c.y}];if(d==="x"?p=i.x===f?S:E:p=i.y===f?E:S,t===r){const R=Math.abs(e[d]-n[d]);if(R<=a){const A=Math.min(a-1,a-R);i[d]===f?v[d]=(c[d]>e[d]?-1:1)*A:b[d]=(l[d]>n[d]?-1:1)*A}}if(t!==r){const R=d==="x"?"y":"x",A=i[d]===s[R],C=c[R]>l[R],M=c[R]<l[R];(i[d]===1&&(!A&&C||A&&M)||i[d]!==1&&(!A&&M||A&&C))&&(p=d==="x"?E:S)}const O={x:c.x+v.x,y:c.y+v.y},N={x:l.x+b.x,y:l.y+b.y},P=Math.max(Math.abs(O.x-p[0].x),Math.abs(N.x-p[0].x)),k=Math.max(Math.abs(O.y-p[0].y),Math.abs(N.y-p[0].y));P>=k?(y=(O.x+N.x)/2,m=p[0].y):(y=p[0].x,m=(O.y+N.y)/2)}return[[e,{x:c.x+v.x,y:c.y+v.y},...p,{x:l.x+b.x,y:l.y+b.y},n],y,m,w,j]}function AJ(e,t,n,r){const o=Math.min(jT(e,t)/2,jT(t,n)/2,r),{x:a,y:i}=t;if(e.x===a&&a===n.x||e.y===i&&i===n.y)return`L${a} ${i}`;if(e.y===i){const l=e.x<n.x?-1:1,u=e.y<n.y?1:-1;return`L ${a+o*l},${i}Q ${a},${i} ${a},${i+o*u}`}const s=e.x<n.x?1:-1,c=e.y<n.y?-1:1;return`L ${a},${i+o*c}Q ${a},${i} ${a+o*s},${i}`}function Cb({sourceX:e,sourceY:t,sourcePosition:n=fe.Bottom,targetX:r,targetY:o,targetPosition:a=fe.Top,borderRadius:i=5,centerX:s,centerY:c,offset:l=20}){const[u,d,f,p,y]=PJ({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:o},targetPosition:a,center:{x:s,y:c},offset:l});return[u.reduce((m,v,b)=>{let x="";return b>0&&b<u.length-1?x=AJ(u[b-1],v,u[b+1],i):x=`${b===0?"M":"L"}${v.x} ${v.y}`,m+=x,m},""),d,f,p,y]}function ET(e){var t;return e&&!!(e.internals.handleBounds||(t=e.handles)!=null&&t.length)&&!!(e.measured.width||e.width||e.initialWidth)}function TJ(e){var d;const{sourceNode:t,targetNode:n}=e;if(!ET(t)||!ET(n))return null;const r=t.internals.handleBounds||ST(t.handles),o=n.internals.handleBounds||ST(n.handles),a=CT((r==null?void 0:r.source)??[],e.sourceHandle),i=CT(e.connectionMode===Li.Strict?(o==null?void 0:o.target)??[]:((o==null?void 0:o.target)??[]).concat((o==null?void 0:o.source)??[]),e.targetHandle);if(!a||!i)return(d=e.onError)==null||d.call(e,"008",uo.error008(a?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const s=(a==null?void 0:a.position)||fe.Bottom,c=(i==null?void 0:i.position)||fe.Top,l=ul(t,a,s),u=ul(n,i,c);return{sourceX:l.x,sourceY:l.y,targetX:u.x,targetY:u.y,sourcePosition:s,targetPosition:c}}function ST(e){if(!e)return null;const t=[],n=[];for(const r of e)r.width=r.width??1,r.height=r.height??1,r.type==="source"?t.push(r):r.type==="target"&&n.push(r);return{source:t,target:n}}function ul(e,t,n=fe.Left,r=!1){const o=((t==null?void 0:t.x)??0)+e.internals.positionAbsolute.x,a=((t==null?void 0:t.y)??0)+e.internals.positionAbsolute.y,{width:i,height:s}=t??fo(e);if(r)return{x:o+i/2,y:a+s/2};switch((t==null?void 0:t.position)??n){case fe.Top:return{x:o+i/2,y:a};case fe.Right:return{x:o+i,y:a+s/2};case fe.Bottom:return{x:o+i/2,y:a+s};case fe.Left:return{x:o,y:a+s/2}}}function CT(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function Ob(e,t){return e?typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(n=>`${n}=${e[n]}`).join("&")}`:""}function RJ(e,{id:t,defaultColor:n,defaultMarkerStart:r,defaultMarkerEnd:o}){const a=new Set;return e.reduce((i,s)=>([s.markerStart||r,s.markerEnd||o].forEach(c=>{if(c&&typeof c=="object"){const l=Ob(c,t);a.has(l)||(i.push({id:l,color:c.color||n,...c}),a.add(l))}}),i),[]).sort((i,s)=>i.id.localeCompare(s.id))}const Mb={nodeOrigin:[0,0],nodeExtent:rl,elevateNodesOnSelect:!0,defaults:{}},IJ={...Mb,checkEquality:!0};function Nb(e,t){const n={...e};for(const r in t)t[r]!==void 0&&(n[r]=t[r]);return n}function DJ(e,t,n){const r=Nb(Mb,n);for(const o of e.values())if(o.parentId)Pb(o,e,t,r);else{const a=al(o,r.nodeOrigin),i=$i(o.extent)?o.extent:r.nodeExtent,s=Ca(a,i,fo(o));o.internals.positionAbsolute=s}}function kb(e,t,n,r){var s,c;const o=Nb(IJ,r),a=new Map(t),i=o!=null&&o.elevateNodesOnSelect?1e3:0;t.clear(),n.clear();for(const l of e){let u=a.get(l.id);if(o.checkEquality&&l===(u==null?void 0:u.internals.userNode))t.set(l.id,u);else{const d=al(l,o.nodeOrigin),f=$i(l.extent)?l.extent:o.nodeExtent,p=Ca(d,f,fo(l));u={...o.defaults,...l,measured:{width:(s=l.measured)==null?void 0:s.width,height:(c=l.measured)==null?void 0:c.height},internals:{positionAbsolute:p,handleBounds:l.measured?u==null?void 0:u.internals.handleBounds:void 0,z:OT(l,i),userNode:l}},t.set(l.id,u)}l.parentId&&Pb(u,t,n,r)}}function LJ(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function Pb(e,t,n,r){const{elevateNodesOnSelect:o,nodeOrigin:a,nodeExtent:i}=Nb(Mb,r),s=e.parentId,c=t.get(s);if(!c){console.warn(`Parent node ${s} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}LJ(e,n);const l=o?1e3:0,{x:u,y:d,z:f}=FJ(e,c,a,i,l),{positionAbsolute:p}=e.internals,y=u!==p.x||d!==p.y;(y||f!==e.internals.z)&&(e.internals={...e.internals,positionAbsolute:y?{x:u,y:d}:p,z:f})}function OT(e,t){return(hr(e.zIndex)?e.zIndex:0)+(e.selected?t:0)}function FJ(e,t,n,r,o){const{x:a,y:i}=t.internals.positionAbsolute,s=fo(e),c=al(e,n),l=$i(e.extent)?Ca(c,e.extent,s):c;let u=Ca({x:a+l.x,y:i+l.y},r,s);e.extent==="parent"&&(u=aT(u,s,t));const d=OT(e,o),f=t.internals.z??0;return{x:u.x,y:u.y,z:f>d?f:d}}function Ab(e,t,n,r=[0,0]){var i;const o=[],a=new Map;for(const s of e){const c=t.get(s.parentId);if(!c)continue;const l=((i=a.get(s.parentId))==null?void 0:i.expandedRect)??Bi(c),u=cT(l,s.rect);a.set(s.parentId,{expandedRect:u,parent:c})}return a.size>0&&a.forEach(({expandedRect:s,parent:c},l)=>{var _;const u=c.internals.positionAbsolute,d=fo(c),f=c.origin??r,p=s.x<u.x?Math.round(Math.abs(u.x-s.x)):0,y=s.y<u.y?Math.round(Math.abs(u.y-s.y)):0,m=Math.max(d.width,Math.round(s.width)),v=Math.max(d.height,Math.round(s.height)),b=(m-d.width)*f[0],x=(v-d.height)*f[1];(p>0||y>0||b||x)&&(o.push({id:l,type:"position",position:{x:c.position.x-p+b,y:c.position.y-y+x}}),(_=n.get(l))==null||_.forEach(w=>{e.some(j=>j.id===w.id)||o.push({id:w.id,type:"position",position:{x:w.position.x+p,y:w.position.y+y}})})),(d.width<s.width||d.height<s.height||p||y)&&o.push({id:l,type:"dimensions",setAttributes:!0,dimensions:{width:m+(p?f[0]*p-b:0),height:v+(y?f[1]*y-x:0)}})}),o}function BJ(e,t,n,r,o,a){const i=r==null?void 0:r.querySelector(".xyflow__viewport");let s=!1;if(!i)return{changes:[],updatedInternals:s};const c=[],l=window.getComputedStyle(i),{m22:u}=new window.DOMMatrixReadOnly(l.transform),d=[];for(const f of e.values()){const p=t.get(f.id);if(p)if(p.hidden)p.internals={...p.internals,handleBounds:void 0},s=!0;else{const y=jf(f.nodeElement),m=p.measured.width!==y.width||p.measured.height!==y.height;if(y.width&&y.height&&(m||!p.internals.handleBounds||f.force)){const v=f.nodeElement.getBoundingClientRect(),b=$i(p.extent)?p.extent:a;let{positionAbsolute:x}=p.internals;p.parentId&&p.extent==="parent"?x=aT(x,y,t.get(p.parentId)):b&&(x=Ca(x,b,y)),p.measured=y,p.internals={...p.internals,positionAbsolute:x,handleBounds:{source:mT("source",f.nodeElement,v,u,p.id),target:mT("target",f.nodeElement,v,u,p.id)}},p.parentId&&Pb(p,t,n,{nodeOrigin:o}),s=!0,m&&(c.push({id:p.id,type:"dimensions",dimensions:y}),p.expandParent&&p.parentId&&d.push({id:p.id,parentId:p.parentId,rect:Bi(p,o)}))}}}if(d.length>0){const f=Ab(d,t,n,o);c.push(...f)}return{changes:c,updatedInternals:s}}async function $J({delta:e,panZoom:t,transform:n,translateExtent:r,width:o,height:a}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const i=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[o,a]],r),s=!!i&&(i.x!==n[0]||i.y!==n[1]||i.k!==n[2]);return Promise.resolve(s)}function MT(e,t,n){e.clear(),t.clear();for(const r of n){const{source:o,target:a,sourceHandle:i=null,targetHandle:s=null}=r,c=`${o}-source-${i}`,l=`${a}-target-${s}`,u=e.get(c)||new Map,d=e.get(l)||new Map,f={edgeId:r.id,source:o,target:a,sourceHandle:i,targetHandle:s};t.set(r.id,r),e.set(c,u.set(`${a}-${s}`,f)),e.set(l,d.set(`${o}-${i}`,f))}}function NT(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return n?n.selected?!0:NT(n,t):!1}function kT(e,t,n){let r=e;do{if(r!=null&&r.matches(t))return!0;if(r===n)return!1;r=r.parentElement}while(r);return!1}function zJ(e,t,n,r){const o=new Map;for(const[a,i]of e)if((i.selected||i.id===r)&&(!i.parentId||!NT(i,e))&&(i.draggable||t&&typeof i.draggable>"u")){const s=e.get(a);s&&o.set(a,{id:a,position:s.position||{x:0,y:0},distance:{x:n.x-s.internals.positionAbsolute.x,y:n.y-s.internals.positionAbsolute.y},extent:s.extent,parentId:s.parentId,origin:s.origin,expandParent:s.expandParent,internals:{positionAbsolute:s.internals.positionAbsolute||{x:0,y:0}},measured:{width:s.measured.width??0,height:s.measured.height??0}})}return o}function Tb({nodeId:e,dragItems:t,nodeLookup:n,dragging:r=!0}){var i,s,c;const o=[];for(const[l,u]of t){const d=(i=n.get(l))==null?void 0:i.internals.userNode;d&&o.push({...d,position:u.position,dragging:r})}if(!e)return[o[0],o];const a=(s=n.get(e))==null?void 0:s.internals.userNode;return[a?{...a,position:((c=t.get(e))==null?void 0:c.position)||a.position,dragging:r}:o[0],o]}function VJ({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:r,onDragStop:o}){let a={x:null,y:null},i=0,s=new Map,c=!1,l={x:0,y:0},u=null,d=!1,f=null,p=!1;function y({noDragClassName:v,handleSelector:b,domNode:x,isSelectable:_,nodeId:w,nodeClickDistance:j=0}){f=In(x);function E({x:P,y:k},R){const{nodeLookup:A,nodeExtent:C,snapGrid:M,snapToGrid:T,nodeOrigin:I,onNodeDrag:L,onSelectionDrag:D,onError:$,updateNodePositions:U}=t();a={x:P,y:k};let F=!1,H={x:0,y:0,x2:0,y2:0};if(s.size>1&&C){const Y=il(s);H=jb(Y)}for(const[Y,G]of s){if(!A.has(Y))continue;let re={x:P-G.distance.x,y:k-G.distance.y};T&&(re=wf(re,M));let Z=[[C[0][0],C[0][1]],[C[1][0],C[1][1]]];if(s.size>1&&C&&!G.extent){const{positionAbsolute:J}=G.internals,te=J.x-H.x+C[0][0],B=J.x+G.measured.width-H.x2+C[1][0],se=J.y-H.y+C[0][1],ce=J.y+G.measured.height-H.y2+C[1][1];Z=[[te,se],[B,ce]]}const{position:q,positionAbsolute:W}=oT({nodeId:Y,nextPosition:re,nodeLookup:A,nodeExtent:Z,nodeOrigin:I,onError:$});F=F||G.position.x!==q.x||G.position.y!==q.y,G.position=q,G.internals.positionAbsolute=W}if(F&&(U(s,!0),R&&(r||L||!w&&D))){const[Y,G]=Tb({nodeId:w,dragItems:s,nodeLookup:A});r==null||r(R,s,Y,G),L==null||L(R,Y,G),w||(D==null||D(R,G))}}async function S(){if(!u)return;const{transform:P,panBy:k,autoPanSpeed:R}=t(),[A,C]=sT(l,u,R);(A!==0||C!==0)&&(a.x=(a.x??0)-A/P[2],a.y=(a.y??0)-C/P[2],await k({x:A,y:C})&&E(a,null)),i=requestAnimationFrame(S)}function O(P){var F;const{nodeLookup:k,multiSelectionActive:R,nodesDraggable:A,transform:C,snapGrid:M,snapToGrid:T,selectNodesOnDrag:I,onNodeDragStart:L,onSelectionDragStart:D,unselectNodesAndEdges:$}=t();d=!0,(!I||!_)&&!R&&w&&((F=k.get(w))!=null&&F.selected||$()),_&&I&&w&&(e==null||e(w));const U=ll(P.sourceEvent,{transform:C,snapGrid:M,snapToGrid:T,containerBounds:u});if(a=U,s=zJ(k,A,U,w),s.size>0&&(n||L||!w&&D)){const[H,Y]=Tb({nodeId:w,dragItems:s,nodeLookup:k});n==null||n(P.sourceEvent,s,H,Y),L==null||L(P.sourceEvent,H,Y),w||(D==null||D(P.sourceEvent,Y))}}const N=bA().clickDistance(j).on("start",P=>{const{domNode:k,nodeDragThreshold:R,transform:A,snapGrid:C,snapToGrid:M}=t();u=(k==null?void 0:k.getBoundingClientRect())||null,p=!1,R===0&&O(P),a=ll(P.sourceEvent,{transform:A,snapGrid:C,snapToGrid:M,containerBounds:u}),l=po(P.sourceEvent,u)}).on("drag",P=>{const{autoPanOnNodeDrag:k,transform:R,snapGrid:A,snapToGrid:C,nodeDragThreshold:M,nodeLookup:T}=t(),I=ll(P.sourceEvent,{transform:R,snapGrid:A,snapToGrid:C,containerBounds:u});if((P.sourceEvent.type==="touchmove"&&P.sourceEvent.touches.length>1||w&&!T.has(w))&&(p=!0),!p){if(!c&&k&&d&&(c=!0,S()),!d){const L=I.xSnapped-(a.x??0),D=I.ySnapped-(a.y??0);Math.sqrt(L*L+D*D)>M&&O(P)}(a.x!==I.xSnapped||a.y!==I.ySnapped)&&s&&d&&(l=po(P.sourceEvent,u),E(I,P.sourceEvent))}}).on("end",P=>{if(!(!d||p)&&(c=!1,d=!1,cancelAnimationFrame(i),s.size>0)){const{nodeLookup:k,updateNodePositions:R,onNodeDragStop:A,onSelectionDragStop:C}=t();if(R(s,!1),o||A||!w&&C){const[M,T]=Tb({nodeId:w,dragItems:s,nodeLookup:k,dragging:!1});o==null||o(P.sourceEvent,s,M,T),A==null||A(P.sourceEvent,M,T),w||(C==null||C(P.sourceEvent,T))}}}).filter(P=>{const k=P.target;return!P.button&&(!v||!kT(k,`.${v}`,x))&&(!b||kT(k,b,x))});f.call(N)}function m(){f==null||f.on(".drag",null)}return{update:y,destroy:m}}function UJ(e,t,n){const r=[],o={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const a of t.values())sl(o,Bi(a))>0&&r.push(a);return r}const HJ=250;function WJ(e,t,n,r){var s,c;let o=[],a=1/0;const i=UJ(e,n,t+HJ);for(const l of i){const u=[...((s=l.internals.handleBounds)==null?void 0:s.source)??[],...((c=l.internals.handleBounds)==null?void 0:c.target)??[]];for(const d of u){if(r.nodeId===d.nodeId&&r.type===d.type&&r.id===d.id)continue;const{x:f,y:p}=ul(l,d,d.position,!0),y=Math.sqrt(Math.pow(f-e.x,2)+Math.pow(p-e.y,2));y>t||(y<a?(o=[{...d,x:f,y:p}],a=y):y===a&&o.push({...d,x:f,y:p}))}}if(!o.length)return null;if(o.length>1){const l=r.type==="source"?"target":"source";return o.find(u=>u.type===l)??o[0]}return o[0]}function PT(e,t,n,r,o,a=!1){var l,u,d;const i=r.get(e);if(!i)return null;const s=o==="strict"?(l=i.internals.handleBounds)==null?void 0:l[t]:[...((u=i.internals.handleBounds)==null?void 0:u.source)??[],...((d=i.internals.handleBounds)==null?void 0:d.target)??[]],c=(n?s==null?void 0:s.find(f=>f.id===n):s==null?void 0:s[0])??null;return c&&a?{...c,...ul(i,c,c.position,!0)}:c}function AT(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function qJ(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}const TT=()=>!0;function YJ(e,{connectionMode:t,connectionRadius:n,handleId:r,nodeId:o,edgeUpdaterType:a,isTarget:i,domNode:s,nodeLookup:c,lib:l,autoPanOnConnect:u,flowId:d,panBy:f,cancelConnection:p,onConnectStart:y,onConnect:m,onConnectEnd:v,isValidConnection:b=TT,onReconnectEnd:x,updateConnection:_,getTransform:w,getFromHandle:j,autoPanSpeed:E}){const S=pT(e.target);let O=0,N;const{x:P,y:k}=po(e),R=S==null?void 0:S.elementFromPoint(P,k),A=AT(a,R),C=s==null?void 0:s.getBoundingClientRect();if(!C||!A)return;const M=PT(o,A,r,c,t);if(!M)return;let T=po(e,C),I=!1,L=null,D=!1,$=null;function U(){if(!u||!C)return;const[q,W]=sT(T,C,E);f({x:q,y:W}),O=requestAnimationFrame(U)}const F={...M,nodeId:o,type:A,position:M.position},H=c.get(o),Y={inProgress:!0,isValid:null,from:ul(H,F,fe.Left,!0),fromHandle:F,fromPosition:F.position,fromNode:H,to:T,toHandle:null,toPosition:ZA[F.position],toNode:null};_(Y);let G=Y;y==null||y(e,{nodeId:o,handleId:r,handleType:A});function re(q){if(!j()||!F){Z(q);return}const W=w();T=po(q,C),N=WJ(cl(T,W,!1,[1,1]),n,c,F),I||(U(),I=!0);const J=RT(q,{handle:N,connectionMode:t,fromNodeId:o,fromHandleId:r,fromType:i?"target":"source",isValidConnection:b,doc:S,lib:l,flowId:d,nodeLookup:c});$=J.handleDomNode,L=J.connection,D=qJ(!!N,J.isValid);const te={...G,isValid:D,to:N&&D?uT({x:N.x,y:N.y},W):T,toHandle:J.toHandle,toPosition:D&&J.toHandle?J.toHandle.position:ZA[F.position],toNode:J.toHandle?c.get(J.toHandle.nodeId):null};D&&N&&G.toHandle&&te.toHandle&&G.toHandle.type===te.toHandle.type&&G.toHandle.nodeId===te.toHandle.nodeId&&G.toHandle.id===te.toHandle.id&&G.to.x===te.to.x&&G.to.y===te.to.y||(_(te),G=te)}function Z(q){(N||$)&&L&&D&&(m==null||m(L));const{inProgress:W,...J}=G,te={...J,toPosition:G.toHandle?G.toPosition:null};v==null||v(q,te),a&&(x==null||x(q,te)),p(),cancelAnimationFrame(O),I=!1,D=!1,L=null,$=null,S.removeEventListener("mousemove",re),S.removeEventListener("mouseup",Z),S.removeEventListener("touchmove",re),S.removeEventListener("touchend",Z)}S.addEventListener("mousemove",re),S.addEventListener("mouseup",Z),S.addEventListener("touchmove",re),S.addEventListener("touchend",Z)}function RT(e,{handle:t,connectionMode:n,fromNodeId:r,fromHandleId:o,fromType:a,doc:i,lib:s,flowId:c,isValidConnection:l=TT,nodeLookup:u}){const d=a==="target",f=t?i.querySelector(`.${s}-flow__handle[data-id="${c}-${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`):null,{x:p,y}=po(e),m=i.elementFromPoint(p,y),v=m!=null&&m.classList.contains(`${s}-flow__handle`)?m:f,b={handleDomNode:v,isValid:!1,connection:null,toHandle:null};if(v){const x=AT(void 0,v),_=v.getAttribute("data-nodeid"),w=v.getAttribute("data-handleid"),j=v.classList.contains("connectable"),E=v.classList.contains("connectableend");if(!_||!x)return b;const S={source:d?_:r,sourceHandle:d?w:o,target:d?r:_,targetHandle:d?o:w};b.connection=S;const O=j&&E&&(n===Li.Strict?d&&x==="source"||!d&&x==="target":_!==r||w!==o);b.isValid=O&&l(S),b.toHandle=PT(_,x,w,u,n,!1)}return b}const Rb={onPointerDown:YJ,isValid:RT};function KJ({domNode:e,panZoom:t,getTransform:n,getViewScale:r}){const o=In(e);function a({translateExtent:s,width:c,height:l,zoomStep:u=10,pannable:d=!0,zoomable:f=!0,inversePan:p=!1}){const y=_=>{const w=n();if(_.sourceEvent.type!=="wheel"||!t)return;const j=-_.sourceEvent.deltaY*(_.sourceEvent.deltaMode===1?.05:_.sourceEvent.deltaMode?1:.002)*u,E=w[2]*Math.pow(2,j);t.scaleTo(E)};let m=[0,0];const v=_=>{(_.sourceEvent.type==="mousedown"||_.sourceEvent.type==="touchstart")&&(m=[_.sourceEvent.clientX??_.sourceEvent.touches[0].clientX,_.sourceEvent.clientY??_.sourceEvent.touches[0].clientY])},b=_=>{const w=n();if(_.sourceEvent.type!=="mousemove"&&_.sourceEvent.type!=="touchmove"||!t)return;const j=[_.sourceEvent.clientX??_.sourceEvent.touches[0].clientX,_.sourceEvent.clientY??_.sourceEvent.touches[0].clientY],E=[j[0]-m[0],j[1]-m[1]];m=j;const S=r()*Math.max(w[2],Math.log(w[2]))*(p?-1:1),O={x:w[0]-E[0]*S,y:w[1]-E[1]*S},N=[[0,0],[c,l]];t.setViewportConstrained({x:O.x,y:O.y,zoom:w[2]},N,s)},x=GA().on("start",v).on("zoom",d?b:null).on("zoom.wheel",f?y:null);o.call(x,{})}function i(){o.on("zoom",null)}return{update:a,destroy:i,pointer:ur}}const XJ=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,Sf=e=>({x:e.x,y:e.y,zoom:e.k}),Ib=({x:e,y:t,zoom:n})=>yf.translate(e,t).scale(n),zi=(e,t)=>e.target.closest(`.${t}`),IT=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),Db=(e,t=0,n=()=>{})=>{const r=typeof t=="number"&&t>0;return r||n(),r?e.transition().duration(t).on("end",n):e},DT=e=>{const t=e.ctrlKey&&_f()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function GJ({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:r,panOnScrollMode:o,panOnScrollSpeed:a,zoomOnPinch:i,onPanZoomStart:s,onPanZoom:c,onPanZoomEnd:l}){return u=>{if(zi(u,t))return!1;u.preventDefault(),u.stopImmediatePropagation();const d=n.property("__zoom").k||1;if(u.ctrlKey&&i){const v=ur(u),b=DT(u),x=d*Math.pow(2,b);r.scaleTo(n,x,v,u);return}const f=u.deltaMode===1?20:1;let p=o===Ho.Vertical?0:u.deltaX*f,y=o===Ho.Horizontal?0:u.deltaY*f;!_f()&&u.shiftKey&&o!==Ho.Vertical&&(p=u.deltaY*f,y=0),r.translateBy(n,-(p/d)*a,-(y/d)*a,{internal:!0});const m=Sf(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling||(e.isPanScrolling=!0,s==null||s(u,m)),e.isPanScrolling&&(c==null||c(u,m),e.panScrollTimeout=setTimeout(()=>{l==null||l(u,m),e.isPanScrolling=!1},150))}}function QJ({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(r,o){if(!t&&r.type==="wheel"&&!r.ctrlKey||zi(r,e))return null;r.preventDefault(),n.call(this,r,o)}}function JJ({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return r=>{var a,i,s;if((a=r.sourceEvent)!=null&&a.internal)return;const o=Sf(r.transform);e.mouseButton=((i=r.sourceEvent)==null?void 0:i.button)||0,e.isZoomingOrPanning=!0,e.prevViewport=o,((s=r.sourceEvent)==null?void 0:s.type)==="mousedown"&&t(!0),n&&(n==null||n(r.sourceEvent,o))}}function ZJ({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:r,onPanZoom:o}){return a=>{var i,s;e.usedRightMouseButton=!!(n&&IT(t,e.mouseButton??0)),(i=a.sourceEvent)!=null&&i.sync||r([a.transform.x,a.transform.y,a.transform.k]),o&&!((s=a.sourceEvent)!=null&&s.internal)&&(o==null||o(a.sourceEvent,Sf(a.transform)))}}function eZ({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:r,onPanZoomEnd:o,onPaneContextMenu:a}){return i=>{var s;if(!((s=i.sourceEvent)!=null&&s.internal)&&(e.isZoomingOrPanning=!1,a&&IT(t,e.mouseButton??0)&&!e.usedRightMouseButton&&i.sourceEvent&&a(i.sourceEvent),e.usedRightMouseButton=!1,r(!1),o&&XJ(e.prevViewport,i.transform))){const c=Sf(i.transform);e.prevViewport=c,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{o==null||o(i.sourceEvent,c)},n?150:0)}}}function tZ({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:r,panOnScroll:o,zoomOnDoubleClick:a,userSelectionActive:i,noWheelClassName:s,noPanClassName:c,lib:l}){return u=>{var y;const d=e||t,f=n&&u.ctrlKey;if(u.button===1&&u.type==="mousedown"&&(zi(u,`${l}-flow__node`)||zi(u,`${l}-flow__edge`)))return!0;if(!r&&!d&&!o&&!a&&!n||i||zi(u,s)&&u.type==="wheel"||zi(u,c)&&(u.type!=="wheel"||o&&u.type==="wheel"&&!e)||!n&&u.ctrlKey&&u.type==="wheel")return!1;if(!n&&u.type==="touchstart"&&((y=u.touches)==null?void 0:y.length)>1)return u.preventDefault(),!1;if(!d&&!o&&!f&&u.type==="wheel"||!r&&(u.type==="mousedown"||u.type==="touchstart")||Array.isArray(r)&&!r.includes(u.button)&&u.type==="mousedown")return!1;const p=Array.isArray(r)&&r.includes(u.button)||!u.button||u.button<=1;return(!u.ctrlKey||u.type==="wheel")&&p}}function nZ({domNode:e,minZoom:t,maxZoom:n,paneClickDistance:r,translateExtent:o,viewport:a,onPanZoom:i,onPanZoomStart:s,onPanZoomEnd:c,onDraggingChange:l}){const u={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},d=e.getBoundingClientRect(),f=GA().clickDistance(!hr(r)||r<0?0:r).scaleExtent([t,n]).translateExtent(o),p=In(e).call(f);_({x:a.x,y:a.y,zoom:Fi(a.zoom,t,n)},[[0,0],[d.width,d.height]],o);const y=p.on("wheel.zoom"),m=p.on("dblclick.zoom");f.wheelDelta(DT);function v(R,A){return p?new Promise(C=>{f==null||f.transform(Db(p,A==null?void 0:A.duration,()=>C(!0)),R)}):Promise.resolve(!1)}function b({noWheelClassName:R,noPanClassName:A,onPaneContextMenu:C,userSelectionActive:M,panOnScroll:T,panOnDrag:I,panOnScrollMode:L,panOnScrollSpeed:D,preventScrolling:$,zoomOnPinch:U,zoomOnScroll:F,zoomOnDoubleClick:H,zoomActivationKeyPressed:Y,lib:G,onTransformChange:re}){M&&!u.isZoomingOrPanning&&x();const Z=T&&!Y&&!M?GJ({zoomPanValues:u,noWheelClassName:R,d3Selection:p,d3Zoom:f,panOnScrollMode:L,panOnScrollSpeed:D,zoomOnPinch:U,onPanZoomStart:s,onPanZoom:i,onPanZoomEnd:c}):QJ({noWheelClassName:R,preventScrolling:$,d3ZoomHandler:y});if(p.on("wheel.zoom",Z,{passive:!1}),!M){const W=JJ({zoomPanValues:u,onDraggingChange:l,onPanZoomStart:s});f.on("start",W);const J=ZJ({zoomPanValues:u,panOnDrag:I,onPaneContextMenu:!!C,onPanZoom:i,onTransformChange:re});f.on("zoom",J);const te=eZ({zoomPanValues:u,panOnDrag:I,panOnScroll:T,onPaneContextMenu:C,onPanZoomEnd:c,onDraggingChange:l});f.on("end",te)}const q=tZ({zoomActivationKeyPressed:Y,panOnDrag:I,zoomOnScroll:F,panOnScroll:T,zoomOnDoubleClick:H,zoomOnPinch:U,userSelectionActive:M,noPanClassName:A,noWheelClassName:R,lib:G});f.filter(q),H?p.on("dblclick.zoom",m):p.on("dblclick.zoom",null)}function x(){f.on("zoom",null)}async function _(R,A,C){const M=Ib(R),T=f==null?void 0:f.constrain()(M,A,C);return T&&await v(T),new Promise(I=>I(T))}async function w(R,A){const C=Ib(R);return await v(C,A),new Promise(M=>M(C))}function j(R){if(p){const A=Ib(R),C=p.property("__zoom");(C.k!==R.zoom||C.x!==R.x||C.y!==R.y)&&(f==null||f.transform(p,A,null,{sync:!0}))}}function E(){const R=p?KA(p.node()):{x:0,y:0,k:1};return{x:R.x,y:R.y,zoom:R.k}}function S(R,A){return p?new Promise(C=>{f==null||f.scaleTo(Db(p,A==null?void 0:A.duration,()=>C(!0)),R)}):Promise.resolve(!1)}function O(R,A){return p?new Promise(C=>{f==null||f.scaleBy(Db(p,A==null?void 0:A.duration,()=>C(!0)),R)}):Promise.resolve(!1)}function N(R){f==null||f.scaleExtent(R)}function P(R){f==null||f.translateExtent(R)}function k(R){const A=!hr(R)||R<0?0:R;f==null||f.clickDistance(A)}return{update:b,destroy:x,setViewport:w,setViewportConstrained:_,getViewport:E,scaleTo:S,scaleBy:O,setScaleExtent:N,setTranslateExtent:P,syncViewport:j,setClickDistance:k}}var Vi;(function(e){e.Line="line",e.Handle="handle"})(Vi||(Vi={}));const rZ=["top-left","top-right","bottom-left","bottom-right"],oZ=["top","right","bottom","left"];function aZ({width:e,prevWidth:t,height:n,prevHeight:r,affectsX:o,affectsY:a}){const i=e-t,s=n-r,c=[i>0?1:i<0?-1:0,s>0?1:s<0?-1:0];return i&&o&&(c[0]=c[0]*-1),s&&a&&(c[1]=c[1]*-1),c}function iZ(e){const t=e.includes("right")||e.includes("left"),n=e.includes("bottom")||e.includes("top"),r=e.includes("left"),o=e.includes("top");return{isHorizontal:t,isVertical:n,affectsX:r,affectsY:o}}function qo(e,t){return Math.max(0,t-e)}function Yo(e,t){return Math.max(0,e-t)}function Cf(e,t,n){return Math.max(0,t-e,e-n)}function LT(e,t){return e?!t:t}function sZ(e,t,n,r,o,a,i,s){let{affectsX:c,affectsY:l}=t;const{isHorizontal:u,isVertical:d}=t,f=u&&d,{xSnapped:p,ySnapped:y}=n,{minWidth:m,maxWidth:v,minHeight:b,maxHeight:x}=r,{x:_,y:w,width:j,height:E,aspectRatio:S}=e;let O=Math.floor(u?p-e.pointerX:0),N=Math.floor(d?y-e.pointerY:0);const P=j+(c?-O:O),k=E+(l?-N:N),R=-a[0]*j,A=-a[1]*E;let C=Cf(P,m,v),M=Cf(k,b,x);if(i){let L=0,D=0;c&&O<0?L=qo(_+O+R,i[0][0]):!c&&O>0&&(L=Yo(_+P+R,i[1][0])),l&&N<0?D=qo(w+N+A,i[0][1]):!l&&N>0&&(D=Yo(w+k+A,i[1][1])),C=Math.max(C,L),M=Math.max(M,D)}if(s){let L=0,D=0;c&&O>0?L=Yo(_+O,s[0][0]):!c&&O<0&&(L=qo(_+P,s[1][0])),l&&N>0?D=Yo(w+N,s[0][1]):!l&&N<0&&(D=qo(w+k,s[1][1])),C=Math.max(C,L),M=Math.max(M,D)}if(o){if(u){const L=Cf(P/S,b,x)*S;if(C=Math.max(C,L),i){let D=0;!c&&!l||c&&!l&&f?D=Yo(w+A+P/S,i[1][1])*S:D=qo(w+A+(c?O:-O)/S,i[0][1])*S,C=Math.max(C,D)}if(s){let D=0;!c&&!l||c&&!l&&f?D=qo(w+P/S,s[1][1])*S:D=Yo(w+(c?O:-O)/S,s[0][1])*S,C=Math.max(C,D)}}if(d){const L=Cf(k*S,m,v)/S;if(M=Math.max(M,L),i){let D=0;!c&&!l||l&&!c&&f?D=Yo(_+k*S+R,i[1][0])/S:D=qo(_+(l?N:-N)*S+R,i[0][0])/S,M=Math.max(M,D)}if(s){let D=0;!c&&!l||l&&!c&&f?D=qo(_+k*S,s[1][0])/S:D=Yo(_+(l?N:-N)*S,s[0][0])/S,M=Math.max(M,D)}}}N=N+(N<0?M:-M),O=O+(O<0?C:-C),o&&(f?P>k*S?N=(LT(c,l)?-O:O)/S:O=(LT(c,l)?-N:N)*S:u?(N=O/S,l=c):(O=N*S,c=l));const T=c?_+O:_,I=l?w+N:w;return{width:j+(c?-O:O),height:E+(l?-N:N),x:a[0]*O*(c?-1:1)+T,y:a[1]*N*(l?-1:1)+I}}const FT={width:0,height:0,x:0,y:0},cZ={...FT,pointerX:0,pointerY:0,aspectRatio:1};function lZ(e){return[[0,0],[e.measured.width,e.measured.height]]}function uZ(e,t,n){const r=t.position.x+e.position.x,o=t.position.y+e.position.y,a=e.measured.width??0,i=e.measured.height??0,s=n[0]*a,c=n[1]*i;return[[r-s,o-c],[r+a-s,o+i-c]]}function dZ({domNode:e,nodeId:t,getStoreItems:n,onChange:r,onEnd:o}){const a=In(e);function i({controlPosition:c,boundaries:l,keepAspectRatio:u,onResizeStart:d,onResize:f,onResizeEnd:p,shouldResize:y}){let m={...FT},v={...cZ};const b=iZ(c);let x,_=null,w=[],j,E,S;const O=bA().on("start",N=>{const{nodeLookup:P,transform:k,snapGrid:R,snapToGrid:A,nodeOrigin:C,paneDomNode:M}=n();if(x=P.get(t),!x)return;_=(M==null?void 0:M.getBoundingClientRect())??null;const{xSnapped:T,ySnapped:I}=ll(N.sourceEvent,{transform:k,snapGrid:R,snapToGrid:A,containerBounds:_});m={width:x.measured.width??0,height:x.measured.height??0,x:x.position.x??0,y:x.position.y??0},v={...m,pointerX:T,pointerY:I,aspectRatio:m.width/m.height},j=void 0,x.parentId&&(x.extent==="parent"||x.expandParent)&&(j=P.get(x.parentId),E=j&&x.extent==="parent"?lZ(j):void 0),w=[],S=void 0;for(const[L,D]of P)if(D.parentId===t&&(w.push({id:L,position:{...D.position},extent:D.extent}),D.extent==="parent"||D.expandParent)){const $=uZ(D,x,D.origin??C);S?S=[[Math.min($[0][0],S[0][0]),Math.min($[0][1],S[0][1])],[Math.max($[1][0],S[1][0]),Math.max($[1][1],S[1][1])]]:S=$}d==null||d(N,{...m})}).on("drag",N=>{const{transform:P,snapGrid:k,snapToGrid:R,nodeOrigin:A}=n(),C=ll(N.sourceEvent,{transform:P,snapGrid:k,snapToGrid:R,containerBounds:_}),M=[];if(!x)return;const{x:T,y:I,width:L,height:D}=m,$={},U=x.origin??A,{width:F,height:H,x:Y,y:G}=sZ(v,b,C,l,u,U,E,S),re=F!==L,Z=H!==D,q=Y!==T&&re,W=G!==I&&Z;if(!q&&!W&&!re&&!Z)return;if((q||W||U[0]===1||U[1]===1)&&($.x=q?Y:m.x,$.y=W?G:m.y,m.x=$.x,m.y=$.y,w.length>0)){const B=Y-T,se=G-I;for(const ce of w)ce.position={x:ce.position.x-B+U[0]*(F-L),y:ce.position.y-se+U[1]*(H-D)},M.push(ce)}if((re||Z)&&($.width=re?F:m.width,$.height=Z?H:m.height,m.width=$.width,m.height=$.height),j&&x.expandParent){const B=U[0]*($.width??0);$.x&&$.x<B&&(m.x=B,v.x=v.x-($.x-B));const se=U[1]*($.height??0);$.y&&$.y<se&&(m.y=se,v.y=v.y-($.y-se))}const J=aZ({width:m.width,prevWidth:L,height:m.height,prevHeight:D,affectsX:b.affectsX,affectsY:b.affectsY}),te={...m,direction:J};(y==null?void 0:y(N,te))!==!1&&(f==null||f(N,te),r($,M))}).on("end",N=>{p==null||p(N,{...m}),o==null||o()});a.call(O)}function s(){a.on(".drag",null)}return{update:i,destroy:s}}var BT={exports:{}},Lb={},$T;function fZ(){if($T)return Lb;$T=1;var e=v$(),t=e2();function n(l,u){return l===u&&(l!==0||1/l===1/u)||l!==l&&u!==u}var r=typeof Object.is=="function"?Object.is:n,o=t.useSyncExternalStore,a=e.useRef,i=e.useEffect,s=e.useMemo,c=e.useDebugValue;return Lb.useSyncExternalStoreWithSelector=function(l,u,d,f,p){var y=a(null);if(y.current===null){var m={hasValue:!1,value:null};y.current=m}else m=y.current;y=s(function(){function b(E){if(!x){if(x=!0,_=E,E=f(E),p!==void 0&&m.hasValue){var S=m.value;if(p(S,E))return w=S}return w=E}if(S=w,r(_,E))return S;var O=f(E);return p!==void 0&&p(S,O)?S:(_=E,w=O)}var x=!1,_,w,j=d===void 0?null:d;return[function(){return b(u())},j===null?void 0:function(){return b(j())}]},[u,d,f,p]);var v=o(l,y[0],y[1]);return i(function(){m.hasValue=!0,m.value=v},[v]),c(v),v},Lb}var zT;function pZ(){return zT||(zT=1,BT.exports=fZ()),BT.exports}var hZ=pZ();let VT,Fb,UT,HT,WT,qT;CE=Xe(hZ),VT={BASE_URL:"/NoLLMChat/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_BASE_URL:"/NoLLMChat/",VITE_ROUTE_MODE:"hash"},Fb=e=>{let t;const n=new Set,r=(s,c)=>{const l=typeof s=="function"?s(t):s;if(!Object.is(l,t)){const u=t;t=c??(typeof l!="object"||l===null)?l:Object.assign({},t,l),n.forEach(d=>d(t,u))}},o=()=>t,a={setState:r,getState:o,getInitialState:()=>i,subscribe:s=>(n.add(s),()=>n.delete(s)),destroy:()=>{(VT?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},i=t=e(r,o,a);return a},UT=e=>e?Fb(e):Fb,{useDebugValue:HT}=V,{useSyncExternalStoreWithSelector:WT}=CE,qT=e=>e;function YT(e,t=qT,n){const r=WT(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return HT(r),r}const KT=(e,t)=>{const n=UT(e),r=(o,a=t)=>YT(n,o,a);return Object.assign(r,n),r},mZ=(e,t)=>e?KT(e,t):KT;function _t(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,o]of e)if(!Object.is(o,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}const Of=g.createContext(null),yZ=Of.Provider,XT=uo.error001();function Ve(e,t){const n=g.useContext(Of);if(n===null)throw new Error(XT);return YT(n,e,t)}function gt(){const e=g.useContext(Of);if(e===null)throw new Error(XT);return g.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])}const GT={display:"none"},gZ={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},QT="react-flow__node-desc",JT="react-flow__edge-desc",vZ="react-flow__aria-live",bZ=e=>e.ariaLiveMessage;function xZ({rfId:e}){const t=Ve(bZ);return h.jsx("div",{id:`${vZ}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:gZ,children:t})}function wZ({rfId:e,disableKeyboardA11y:t}){return h.jsxs(h.Fragment,{children:[h.jsxs("div",{id:`${QT}-${e}`,style:GT,children:["Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "]}),h.jsx("div",{id:`${JT}-${e}`,style:GT,children:"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."}),!t&&h.jsx(xZ,{rfId:e})]})}const _Z=e=>e.userSelectionActive?"none":"all";function Ui({position:e="top-left",children:t,className:n,style:r,...o}){const a=Ve(_Z),i=`${e}`.split("-");return h.jsx("div",{className:Rt(["react-flow__panel",n,...i]),style:{...r,pointerEvents:a},...o,children:t})}function jZ({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:h.jsx(Ui,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:h.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const EZ=e=>{const t=[],n=[];for(const[,r]of e.nodeLookup)r.selected&&t.push(r.internals.userNode);for(const[,r]of e.edgeLookup)r.selected&&n.push(r);return{selectedNodes:t,selectedEdges:n}},Mf=e=>e.id;function SZ(e,t){return _t(e.selectedNodes.map(Mf),t.selectedNodes.map(Mf))&&_t(e.selectedEdges.map(Mf),t.selectedEdges.map(Mf))}function CZ({onSelectionChange:e}){const t=gt(),{selectedNodes:n,selectedEdges:r}=Ve(EZ,SZ);return g.useEffect(()=>{const o={nodes:n,edges:r};e==null||e(o),t.getState().onSelectionChangeHandlers.forEach(a=>a(o))},[n,r,e]),null}const OZ=e=>!!e.onSelectionChangeHandlers;function MZ({onSelectionChange:e}){const t=Ve(OZ);return e||t?h.jsx(CZ,{onSelectionChange:e}):null}const ZT=[0,0],NZ={x:0,y:0,zoom:1},kZ=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","onBeforeDelete","debug","autoPanSpeed","paneClickDistance"],eR=[...kZ,"rfId"],PZ=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setPaneClickDistance:e.setPaneClickDistance}),tR={translateExtent:rl,nodeOrigin:ZT,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1",paneClickDistance:0};function AZ(e){const{setNodes:t,setEdges:n,setMinZoom:r,setMaxZoom:o,setTranslateExtent:a,setNodeExtent:i,reset:s,setDefaultNodesAndEdges:c,setPaneClickDistance:l}=Ve(PZ,_t),u=gt();g.useEffect(()=>(c(e.defaultNodes,e.defaultEdges),()=>{d.current=tR,s()}),[]);const d=g.useRef(tR);return g.useEffect(()=>{for(const f of eR){const p=e[f],y=d.current[f];p!==y&&(typeof e[f]>"u"||(f==="nodes"?t(p):f==="edges"?n(p):f==="minZoom"?r(p):f==="maxZoom"?o(p):f==="translateExtent"?a(p):f==="nodeExtent"?i(p):f==="paneClickDistance"?l(p):f==="fitView"?u.setState({fitViewOnInit:p}):f==="fitViewOptions"?u.setState({fitViewOnInitOptions:p}):u.setState({[f]:p})))}d.current=e},eR.map(f=>e[f])),null}function nR(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function TZ(e){var r;const[t,n]=g.useState(e==="system"?null:e);return g.useEffect(()=>{if(e!=="system"){n(e);return}const o=nR(),a=()=>n(o!=null&&o.matches?"dark":"light");return a(),o==null||o.addEventListener("change",a),()=>{o==null||o.removeEventListener("change",a)}},[e]),t!==null?t:(r=nR())!=null&&r.matches?"dark":"light"}const rR=typeof document<"u"?document:null;function dl(e=null,t={target:rR,actInsideInputWithModifier:!0}){const[n,r]=g.useState(!1),o=g.useRef(!1),a=g.useRef(new Set([])),[i,s]=g.useMemo(()=>{if(e!==null){const c=(Array.isArray(e)?e:[e]).filter(u=>typeof u=="string").map(u=>u.replace("+",`
`).replace(`

`,`
+`).split(`
`)),l=c.reduce((u,d)=>u.concat(...d),[]);return[c,l]}return[[],[]]},[e]);return g.useEffect(()=>{const c=(t==null?void 0:t.target)||rR;if(e!==null){const l=f=>{if(o.current=f.ctrlKey||f.metaKey||f.shiftKey,(!o.current||o.current&&!t.actInsideInputWithModifier)&&Sb(f))return!1;const p=aR(f.code,s);a.current.add(f[p]),oR(i,a.current,!1)&&(f.preventDefault(),r(!0))},u=f=>{if((!o.current||o.current&&!t.actInsideInputWithModifier)&&Sb(f))return!1;const p=aR(f.code,s);oR(i,a.current,!0)?(r(!1),a.current.clear()):a.current.delete(f[p]),f.key==="Meta"&&a.current.clear(),o.current=!1},d=()=>{a.current.clear(),r(!1)};return c==null||c.addEventListener("keydown",l),c==null||c.addEventListener("keyup",u),window.addEventListener("blur",d),window.addEventListener("contextmenu",d),()=>{c==null||c.removeEventListener("keydown",l),c==null||c.removeEventListener("keyup",u),window.removeEventListener("blur",d),window.removeEventListener("contextmenu",d)}}},[e,r]),n}function oR(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(o=>t.has(o)))}function aR(e,t){return t.includes(e)?"code":"key"}const RZ=()=>{const e=gt();return g.useMemo(()=>({zoomIn:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomOut:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1/1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomTo:(t,n)=>{const{panZoom:r}=e.getState();return r?r.scaleTo(t,{duration:n==null?void 0:n.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(t,n)=>{const{transform:[r,o,a],panZoom:i}=e.getState();return i?(await i.setViewport({x:t.x??r,y:t.y??o,zoom:t.zoom??a},{duration:n==null?void 0:n.duration}),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[t,n,r]=e.getState().transform;return{x:t,y:n,zoom:r}},fitView:t=>{const{nodeLookup:n,minZoom:r,maxZoom:o,panZoom:a,domNode:i}=e.getState();if(!a||!i)return Promise.resolve(!1);const s=wb(n,t),{width:c,height:l}=jf(i);return _b({nodes:s,width:c,height:l,minZoom:r,maxZoom:o,panZoom:a},t)},setCenter:async(t,n,r)=>{const{width:o,height:a,maxZoom:i,panZoom:s}=e.getState(),c=typeof(r==null?void 0:r.zoom)<"u"?r.zoom:i,l=o/2-t*c,u=a/2-n*c;return s?(await s.setViewport({x:l,y:u,zoom:c},{duration:r==null?void 0:r.duration}),Promise.resolve(!0)):Promise.resolve(!1)},fitBounds:async(t,n)=>{const{width:r,height:o,minZoom:a,maxZoom:i,panZoom:s}=e.getState(),c=Eb(t,r,o,a,i,(n==null?void 0:n.padding)??.1);return s?(await s.setViewport(c,{duration:n==null?void 0:n.duration}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(t,n={snapToGrid:!0})=>{const{transform:r,snapGrid:o,domNode:a}=e.getState();if(!a)return t;const{x:i,y:s}=a.getBoundingClientRect(),c={x:t.x-i,y:t.y-s};return cl(c,r,n.snapToGrid,o)},flowToScreenPosition:t=>{const{transform:n,domNode:r}=e.getState();if(!r)return t;const{x:o,y:a}=r.getBoundingClientRect(),i=uT(t,n);return{x:i.x+o,y:i.y+a}}}),[])};function iR(e,t){const n=[],r=new Map,o=[];for(const a of e)if(a.type==="add"){o.push(a);continue}else if(a.type==="remove"||a.type==="replace")r.set(a.id,[a]);else{const i=r.get(a.id);i?i.push(a):r.set(a.id,[a])}for(const a of t){const i=r.get(a.id);if(!i){n.push(a);continue}if(i[0].type==="remove")continue;if(i[0].type==="replace"){n.push({...i[0].item});continue}const s={...a};for(const c of i)IZ(c,s);n.push(s)}return o.length&&o.forEach(a=>{a.index!==void 0?n.splice(a.index,0,{...a.item}):n.push({...a.item})}),n}function IZ(e,t){switch(e.type){case"select":{t.selected=e.selected;break}case"position":{typeof e.position<"u"&&(t.position=e.position),typeof e.dragging<"u"&&(t.dragging=e.dragging);break}case"dimensions":{typeof e.dimensions<"u"&&(t.measured??(t.measured={}),t.measured.width=e.dimensions.width,t.measured.height=e.dimensions.height,e.setAttributes&&(t.width=e.dimensions.width,t.height=e.dimensions.height)),typeof e.resizing=="boolean"&&(t.resizing=e.resizing);break}}}function Oa(e,t){return iR(e,t)}function fl(e,t){return iR(e,t)}function Ma(e,t){return{id:e,type:"select",selected:t}}function Hi(e,t=new Set,n=!1){const r=[];for(const[o,a]of e){const i=t.has(o);!(a.selected===void 0&&!i)&&a.selected!==i&&(n&&(a.selected=i),r.push(Ma(a.id,i)))}return r}function sR({items:e=[],lookup:t}){var o;const n=[],r=new Map(e.map(a=>[a.id,a]));for(const[a,i]of e.entries()){const s=t.get(i.id),c=((o=s==null?void 0:s.internals)==null?void 0:o.userNode)??s;c!==void 0&&c!==i&&n.push({id:i.id,item:i,type:"replace"}),c===void 0&&n.push({item:i,type:"add",index:a})}for(const[a]of t)r.get(a)===void 0&&n.push({id:a,type:"remove"});return n}function cR(e){return{id:e.id,type:"remove"}}const lR=e=>xJ(e),DZ=e=>nT(e);function uR(e){return g.forwardRef(e)}const LZ=typeof window<"u"?g.useLayoutEffect:g.useEffect;function dR(e){const[t,n]=g.useState(BigInt(0)),[r]=g.useState(()=>FZ(()=>n(o=>o+BigInt(1))));return LZ(()=>{const o=r.get();o.length&&(e(o),r.reset())},[t]),r}function FZ(e){let t=[];return{get:()=>t,reset:()=>{t=[]},push:n=>{t.push(n),e()}}}const fR=g.createContext(null);function BZ({children:e}){const t=gt(),n=g.useCallback(s=>{const{nodes:c=[],setNodes:l,hasDefaultNodes:u,onNodesChange:d,nodeLookup:f}=t.getState();let p=c;for(const y of s)p=typeof y=="function"?y(p):y;u?l(p):d&&d(sR({items:p,lookup:f}))},[]),r=dR(n),o=g.useCallback(s=>{const{edges:c=[],setEdges:l,hasDefaultEdges:u,onEdgesChange:d,edgeLookup:f}=t.getState();let p=c;for(const y of s)p=typeof y=="function"?y(p):y;u?l(p):d&&d(sR({items:p,lookup:f}))},[]),a=dR(o),i=g.useMemo(()=>({nodeQueue:r,edgeQueue:a}),[]);return h.jsx(fR.Provider,{value:i,children:e})}function $Z(){const e=g.useContext(fR);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}const zZ=e=>!!e.panZoom;function Un(){const e=RZ(),t=gt(),n=$Z(),r=Ve(zZ),o=g.useMemo(()=>{const a=d=>t.getState().nodeLookup.get(d),i=d=>{n.nodeQueue.push(d)},s=d=>{n.edgeQueue.push(d)},c=d=>{var b,x;const{nodeLookup:f,nodeOrigin:p}=t.getState(),y=lR(d)?d:f.get(d.id),m=y.parentId?fT(y.position,y.measured,y.parentId,f,p):y.position,v={id:y.id,position:m,width:((b=y.measured)==null?void 0:b.width)??y.width,height:((x=y.measured)==null?void 0:x.height)??y.height,data:y.data};return Bi(v)},l=(d,f,p={replace:!1})=>{i(y=>y.map(m=>{if(m.id===d){const v=typeof f=="function"?f(m):f;return p.replace&&lR(v)?v:{...m,...v}}return m}))},u=(d,f,p={replace:!1})=>{s(y=>y.map(m=>{if(m.id===d){const v=typeof f=="function"?f(m):f;return p.replace&&DZ(v)?v:{...m,...v}}return m}))};return{getNodes:()=>t.getState().nodes.map(d=>({...d})),getNode:d=>{var f;return(f=a(d))==null?void 0:f.internals.userNode},getInternalNode:a,getEdges:()=>{const{edges:d=[]}=t.getState();return d.map(f=>({...f}))},getEdge:d=>t.getState().edgeLookup.get(d),setNodes:i,setEdges:s,addNodes:d=>{const f=Array.isArray(d)?d:[d];n.nodeQueue.push(p=>[...p,...f])},addEdges:d=>{const f=Array.isArray(d)?d:[d];n.edgeQueue.push(p=>[...p,...f])},toObject:()=>{const{nodes:d=[],edges:f=[],transform:p}=t.getState(),[y,m,v]=p;return{nodes:d.map(b=>({...b})),edges:f.map(b=>({...b})),viewport:{x:y,y:m,zoom:v}}},deleteElements:async({nodes:d=[],edges:f=[]})=>{const{nodes:p,edges:y,onNodesDelete:m,onEdgesDelete:v,triggerNodeChanges:b,triggerEdgeChanges:x,onDelete:_,onBeforeDelete:w}=t.getState(),{nodes:j,edges:E}=await jJ({nodesToRemove:d,edgesToRemove:f,nodes:p,edges:y,onBeforeDelete:w}),S=E.length>0,O=j.length>0;if(S){const N=E.map(cR);v==null||v(E),x(N)}if(O){const N=j.map(cR);m==null||m(j),b(N)}return(O||S)&&(_==null||_({nodes:j,edges:E})),{deletedNodes:j,deletedEdges:E}},getIntersectingNodes:(d,f=!0,p)=>{const y=lT(d),m=y?d:c(d),v=p!==void 0;return m?(p||t.getState().nodes).filter(b=>{const x=t.getState().nodeLookup.get(b.id);if(x&&!y&&(b.id===d.id||!x.internals.positionAbsolute))return!1;const _=Bi(v?b:x),w=sl(_,m);return f&&w>0||w>=m.width*m.height}):[]},isNodeIntersecting:(d,f,p=!0)=>{const y=lT(d)?d:c(d);if(!y)return!1;const m=sl(y,f);return p&&m>0||m>=y.width*y.height},updateNode:l,updateNodeData:(d,f,p={replace:!1})=>{l(d,y=>{const m=typeof f=="function"?f(y):f;return p.replace?{...y,data:m}:{...y,data:{...y.data,...m}}},p)},updateEdge:u,updateEdgeData:(d,f,p={replace:!1})=>{u(d,y=>{const m=typeof f=="function"?f(y):f;return p.replace?{...y,data:m}:{...y,data:{...y.data,...m}}},p)},getNodesBounds:d=>{const{nodeLookup:f,nodeOrigin:p}=t.getState();return wJ(d,{nodeLookup:f,nodeOrigin:p})},getHandleConnections:({type:d,id:f,nodeId:p})=>{var y;return Array.from(((y=t.getState().connectionLookup.get(`${p}-${d}-${f??null}`))==null?void 0:y.values())??[])}}},[]);return g.useMemo(()=>({...o,...e,viewportInitialized:r}),[r])}const pR=e=>e.selected,VZ={actInsideInputWithModifier:!1},UZ=typeof window<"u"?window:void 0;function HZ({deleteKeyCode:e,multiSelectionKeyCode:t}){const n=gt(),{deleteElements:r}=Un(),o=dl(e,VZ),a=dl(t,{target:UZ});g.useEffect(()=>{if(o){const{edges:i,nodes:s}=n.getState();r({nodes:s.filter(pR),edges:i.filter(pR)}),n.setState({nodesSelectionActive:!1})}},[o]),g.useEffect(()=>{n.setState({multiSelectionActive:a})},[a])}function WZ(e){const t=gt();g.useEffect(()=>{const n=()=>{var o,a;if(!e.current)return!1;const r=jf(e.current);(r.height===0||r.width===0)&&((a=(o=t.getState()).onError)==null||a.call(o,"004",uo.error004())),t.setState({width:r.width||500,height:r.height||500})};if(e.current){n(),window.addEventListener("resize",n);const r=new ResizeObserver(()=>n());return r.observe(e.current),()=>{window.removeEventListener("resize",n),r&&e.current&&r.unobserve(e.current)}}},[])}const Nf={position:"absolute",width:"100%",height:"100%",top:0,left:0},qZ=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib});function YZ({onPaneContextMenu:e,zoomOnScroll:t=!0,zoomOnPinch:n=!0,panOnScroll:r=!1,panOnScrollSpeed:o=.5,panOnScrollMode:a=Ho.Free,zoomOnDoubleClick:i=!0,panOnDrag:s=!0,defaultViewport:c,translateExtent:l,minZoom:u,maxZoom:d,zoomActivationKeyCode:f,preventScrolling:p=!0,children:y,noWheelClassName:m,noPanClassName:v,onViewportChange:b,isControlledViewport:x,paneClickDistance:_}){const w=gt(),j=g.useRef(null),{userSelectionActive:E,lib:S}=Ve(qZ,_t),O=dl(f),N=g.useRef();WZ(j);const P=g.useCallback(k=>{b==null||b({x:k[0],y:k[1],zoom:k[2]}),x||w.setState({transform:k})},[b,x]);return g.useEffect(()=>{if(j.current){N.current=nZ({domNode:j.current,minZoom:u,maxZoom:d,translateExtent:l,viewport:c,paneClickDistance:_,onDraggingChange:C=>w.setState({paneDragging:C}),onPanZoomStart:(C,M)=>{const{onViewportChangeStart:T,onMoveStart:I}=w.getState();I==null||I(C,M),T==null||T(M)},onPanZoom:(C,M)=>{const{onViewportChange:T,onMove:I}=w.getState();I==null||I(C,M),T==null||T(M)},onPanZoomEnd:(C,M)=>{const{onViewportChangeEnd:T,onMoveEnd:I}=w.getState();I==null||I(C,M),T==null||T(M)}});const{x:k,y:R,zoom:A}=N.current.getViewport();return w.setState({panZoom:N.current,transform:[k,R,A],domNode:j.current.closest(".react-flow")}),()=>{var C;(C=N.current)==null||C.destroy()}}},[]),g.useEffect(()=>{var k;(k=N.current)==null||k.update({onPaneContextMenu:e,zoomOnScroll:t,zoomOnPinch:n,panOnScroll:r,panOnScrollSpeed:o,panOnScrollMode:a,zoomOnDoubleClick:i,panOnDrag:s,zoomActivationKeyPressed:O,preventScrolling:p,noPanClassName:v,userSelectionActive:E,noWheelClassName:m,lib:S,onTransformChange:P})},[e,t,n,r,o,a,i,s,O,p,v,E,m,S,P]),h.jsx("div",{className:"react-flow__renderer",ref:j,style:Nf,children:y})}const KZ=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function XZ(){const{userSelectionActive:e,userSelectionRect:t}=Ve(KZ,_t);return e&&t?h.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}const Bb=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},GZ=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging});function QZ({isSelecting:e,selectionKeyPressed:t,selectionMode:n=ol.Full,panOnDrag:r,selectionOnDrag:o,onSelectionStart:a,onSelectionEnd:i,onPaneClick:s,onPaneContextMenu:c,onPaneScroll:l,onPaneMouseEnter:u,onPaneMouseMove:d,onPaneMouseLeave:f,children:p}){const y=g.useRef(null),m=gt(),v=g.useRef(0),b=g.useRef(0),x=g.useRef(),_=g.useRef(new Map),{userSelectionActive:w,elementsSelectable:j,dragging:E}=Ve(GZ,_t),S=j&&(e||w),O=g.useRef(!1),N=g.useRef(!1),P=()=>{m.setState({userSelectionActive:!1,userSelectionRect:null}),v.current=0,b.current=0},k=L=>{if(O.current){O.current=!1;return}s==null||s(L),m.getState().resetSelectedElements(),m.setState({nodesSelectionActive:!1})},R=L=>{if(Array.isArray(r)&&(r!=null&&r.includes(2))){L.preventDefault();return}c==null||c(L)},A=l?L=>l(L):void 0,C=L=>{var Y,G,re,Z;const{resetSelectedElements:D,domNode:$,edgeLookup:U}=m.getState();if(x.current=$==null?void 0:$.getBoundingClientRect(),!j||!e||L.button!==0||L.target!==y.current||!x.current)return;(G=(Y=L.target)==null?void 0:Y.setPointerCapture)==null||G.call(Y,L.pointerId),N.current=!0,O.current=!1,_.current=new Map;for(const[q,W]of U)_.current.set(W.source,((re=_.current.get(W.source))==null?void 0:re.add(q))||new Set([q])),_.current.set(W.target,((Z=_.current.get(W.target))==null?void 0:Z.add(q))||new Set([q]));const{x:F,y:H}=po(L.nativeEvent,x.current);D(),m.setState({userSelectionRect:{width:0,height:0,startX:F,startY:H,x:F,y:H}}),a==null||a(L)},M=L=>{const{userSelectionRect:D,edgeLookup:$,transform:U,nodeLookup:F,triggerNodeChanges:H,triggerEdgeChanges:Y}=m.getState();if(!x.current||!D)return;O.current=!0;const{x:G,y:re}=po(L.nativeEvent,x.current),{startX:Z,startY:q}=D,W={startX:Z,startY:q,x:G<Z?G:Z,y:re<q?re:q,width:Math.abs(G-Z),height:Math.abs(re-q)},J=rT(F,W,U,n===ol.Partial,!0),te=new Set,B=new Set;for(const se of J){B.add(se.id);const ce=_.current.get(se.id);if(ce)for(const ve of ce)te.add(ve)}if(v.current!==B.size){v.current=B.size;const se=Hi(F,B,!0);H(se)}if(b.current!==te.size){b.current=te.size;const se=Hi($,te);Y(se)}m.setState({userSelectionRect:W,userSelectionActive:!0,nodesSelectionActive:!1})},T=L=>{var $,U;if(L.button!==0||!N.current)return;(U=($=L.target)==null?void 0:$.releasePointerCapture)==null||U.call($,L.pointerId);const{userSelectionRect:D}=m.getState();!w&&D&&L.target===y.current&&(k==null||k(L)),v.current>0&&m.setState({nodesSelectionActive:!0}),P(),i==null||i(L),(t||o)&&(O.current=!1),N.current=!1},I=r===!0||Array.isArray(r)&&r.includes(0);return h.jsxs("div",{className:Rt(["react-flow__pane",{draggable:I,dragging:E,selection:e}]),onClick:S?void 0:Bb(k,y),onContextMenu:Bb(R,y),onWheel:Bb(A,y),onPointerEnter:S?void 0:u,onPointerDown:S?C:d,onPointerMove:S?M:d,onPointerUp:S?T:void 0,onPointerLeave:f,ref:y,style:Nf,children:[p,h.jsx(XZ,{})]})}function $b({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:o,unselectNodesAndEdges:a,multiSelectionActive:i,nodeLookup:s,onError:c}=t.getState(),l=s.get(e);if(!l){c==null||c("012",uo.error012(e));return}t.setState({nodesSelectionActive:!1}),l.selected?(n||l.selected&&i)&&(a({nodes:[l],edges:[]}),requestAnimationFrame(()=>{var u;return(u=r==null?void 0:r.current)==null?void 0:u.blur()})):o([e])}function hR({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:o,isSelectable:a,nodeClickDistance:i}){const s=gt(),[c,l]=g.useState(!1),u=g.useRef();return g.useEffect(()=>{u.current=VJ({getStoreItems:()=>s.getState(),onNodeMouseDown:d=>{$b({id:d,store:s,nodeRef:e})},onDragStart:()=>{l(!0)},onDragStop:()=>{l(!1)}})},[]),g.useEffect(()=>{var d,f;if(t)(d=u.current)==null||d.destroy();else if(e.current)return(f=u.current)==null||f.update({noDragClassName:n,handleSelector:r,domNode:e.current,isSelectable:a,nodeId:o,nodeClickDistance:i}),()=>{var p;(p=u.current)==null||p.destroy()}},[n,r,t,a,e,o]),c}const JZ=e=>t=>t.selected&&(t.draggable||e&&typeof t.draggable>"u");function mR(){const e=gt();return g.useCallback(t=>{const{nodeExtent:n,snapToGrid:r,snapGrid:o,nodesDraggable:a,onError:i,updateNodePositions:s,nodeLookup:c,nodeOrigin:l}=e.getState(),u=new Map,d=JZ(a),f=r?o[0]:5,p=r?o[1]:5,y=t.direction.x*f*t.factor,m=t.direction.y*p*t.factor;for(const[,v]of c){if(!d(v))continue;let b={x:v.internals.positionAbsolute.x+y,y:v.internals.positionAbsolute.y+m};r&&(b=wf(b,o));const{position:x,positionAbsolute:_}=oT({nodeId:v.id,nextPosition:b,nodeLookup:c,nodeExtent:n,nodeOrigin:l,onError:i});v.position=x,v.internals.positionAbsolute=_,u.set(v.id,v)}s(u)},[])}const zb=g.createContext(null),ZZ=zb.Provider;zb.Consumer;const Vb=()=>g.useContext(zb),eee=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),tee=(e,t,n)=>r=>{const{connectionClickStartHandle:o,connectionMode:a,connection:i}=r,{fromHandle:s,toHandle:c,isValid:l}=i,u=(c==null?void 0:c.nodeId)===e&&(c==null?void 0:c.id)===t&&(c==null?void 0:c.type)===n;return{connectingFrom:(s==null?void 0:s.nodeId)===e&&(s==null?void 0:s.id)===t&&(s==null?void 0:s.type)===n,connectingTo:u,clickConnecting:(o==null?void 0:o.nodeId)===e&&(o==null?void 0:o.id)===t&&(o==null?void 0:o.type)===n,isPossibleEndHandle:a===Li.Strict?(s==null?void 0:s.type)!==n:e!==(s==null?void 0:s.nodeId)||t!==(s==null?void 0:s.id),connectionInProcess:!!s,valid:u&&l}};function nee({type:e="source",position:t=fe.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:o=!0,isConnectableEnd:a=!0,id:i,onConnect:s,children:c,className:l,onMouseDown:u,onTouchStart:d,...f},p){var C,M;const y=i||null,m=e==="target",v=gt(),b=Vb(),{connectOnClick:x,noPanClassName:_,rfId:w}=Ve(eee,_t),{connectingFrom:j,connectingTo:E,clickConnecting:S,isPossibleEndHandle:O,connectionInProcess:N,valid:P}=Ve(tee(b,y,e),_t);b||((M=(C=v.getState()).onError)==null||M.call(C,"010",uo.error010()));const k=T=>{const{defaultEdgeOptions:I,onConnect:L,hasDefaultEdges:D}=v.getState(),$={...I,...T};if(D){const{edges:U,setEdges:F}=v.getState();F(xT($,U))}L==null||L($),s==null||s($)},R=T=>{if(!b)return;const I=hT(T.nativeEvent);if(o&&(I&&T.button===0||!I)){const L=v.getState();Rb.onPointerDown(T.nativeEvent,{autoPanOnConnect:L.autoPanOnConnect,connectionMode:L.connectionMode,connectionRadius:L.connectionRadius,domNode:L.domNode,nodeLookup:L.nodeLookup,lib:L.lib,isTarget:m,handleId:y,nodeId:b,flowId:L.rfId,panBy:L.panBy,cancelConnection:L.cancelConnection,onConnectStart:L.onConnectStart,onConnectEnd:L.onConnectEnd,updateConnection:L.updateConnection,onConnect:k,isValidConnection:n||L.isValidConnection,getTransform:()=>v.getState().transform,getFromHandle:()=>v.getState().connection.fromHandle,autoPanSpeed:L.autoPanSpeed})}I?u==null||u(T):d==null||d(T)},A=T=>{const{onClickConnectStart:I,onClickConnectEnd:L,connectionClickStartHandle:D,connectionMode:$,isValidConnection:U,lib:F,rfId:H,nodeLookup:Y,connection:G}=v.getState();if(!b||!D&&!o)return;if(!D){I==null||I(T.nativeEvent,{nodeId:b,handleId:y,handleType:e}),v.setState({connectionClickStartHandle:{nodeId:b,type:e,id:y}});return}const re=pT(T.target),Z=n||U,{connection:q,isValid:W}=Rb.isValid(T.nativeEvent,{handle:{nodeId:b,id:y,type:e},connectionMode:$,fromNodeId:D.nodeId,fromHandleId:D.id||null,fromType:D.type,isValidConnection:Z,flowId:H,doc:re,lib:F,nodeLookup:Y});W&&q&&k(q);const J=structuredClone(G);delete J.inProgress,J.toPosition=J.toHandle?J.toHandle.position:null,L==null||L(T,J),v.setState({connectionClickStartHandle:null})};return h.jsx("div",{"data-handleid":y,"data-nodeid":b,"data-handlepos":t,"data-id":`${w}-${b}-${y}-${e}`,className:Rt(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",_,l,{source:!m,target:m,connectable:r,connectablestart:o,connectableend:a,clickconnecting:S,connectingfrom:j,connectingto:E,valid:P,connectionindicator:r&&(!N||O)&&(N?a:o)}]),onMouseDown:R,onTouchStart:R,onClick:x?A:void 0,ref:p,...f,children:c})}const pl=g.memo(uR(nee));function ree({data:e,isConnectable:t,sourcePosition:n=fe.Bottom}){return h.jsxs(h.Fragment,{children:[e==null?void 0:e.label,h.jsx(pl,{type:"source",position:n,isConnectable:t})]})}function oee({data:e,isConnectable:t,targetPosition:n=fe.Top,sourcePosition:r=fe.Bottom}){return h.jsxs(h.Fragment,{children:[h.jsx(pl,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,h.jsx(pl,{type:"source",position:r,isConnectable:t})]})}function aee(){return null}function iee({data:e,isConnectable:t,targetPosition:n=fe.Top}){return h.jsxs(h.Fragment,{children:[h.jsx(pl,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label]})}const kf={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},yR={input:ree,default:oee,output:iee,group:aee};function see(e){var t,n,r,o;return e.internals.handleBounds===void 0?{width:e.width??e.initialWidth??((t=e.style)==null?void 0:t.width),height:e.height??e.initialHeight??((n=e.style)==null?void 0:n.height)}:{width:e.width??((r=e.style)==null?void 0:r.width),height:e.height??((o=e.style)==null?void 0:o.height)}}const cee=e=>{const{width:t,height:n,x:r,y:o}=il(e.nodeLookup,{filter:a=>!!a.selected});return{width:hr(t)?t:null,height:hr(n)?n:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${r}px,${o}px)`}};function lee({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=gt(),{width:o,height:a,transformString:i,userSelectionActive:s}=Ve(cee,_t),c=mR(),l=g.useRef(null);if(g.useEffect(()=>{var f;n||((f=l.current)==null||f.focus({preventScroll:!0}))},[n]),hR({nodeRef:l}),s||!o||!a)return null;const u=e?f=>{const p=r.getState().nodes.filter(y=>y.selected);e(f,p)}:void 0,d=f=>{Object.prototype.hasOwnProperty.call(kf,f.key)&&c({direction:kf[f.key],factor:f.shiftKey?4:1})};return h.jsx("div",{className:Rt(["react-flow__nodesselection","react-flow__container",t]),style:{transform:i},children:h.jsx("div",{ref:l,className:"react-flow__nodesselection-rect",onContextMenu:u,tabIndex:n?void 0:-1,onKeyDown:n?void 0:d,style:{width:o,height:a}})})}const gR=typeof window<"u"?window:void 0,uee=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function vR({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:o,onPaneContextMenu:a,onPaneScroll:i,paneClickDistance:s,deleteKeyCode:c,selectionKeyCode:l,selectionOnDrag:u,selectionMode:d,onSelectionStart:f,onSelectionEnd:p,multiSelectionKeyCode:y,panActivationKeyCode:m,zoomActivationKeyCode:v,elementsSelectable:b,zoomOnScroll:x,zoomOnPinch:_,panOnScroll:w,panOnScrollSpeed:j,panOnScrollMode:E,zoomOnDoubleClick:S,panOnDrag:O,defaultViewport:N,translateExtent:P,minZoom:k,maxZoom:R,preventScrolling:A,onSelectionContextMenu:C,noWheelClassName:M,noPanClassName:T,disableKeyboardA11y:I,onViewportChange:L,isControlledViewport:D}){const{nodesSelectionActive:$,userSelectionActive:U}=Ve(uee),F=dl(l,{target:gR}),H=dl(m,{target:gR}),Y=H||O,G=H||w,re=u&&Y!==!0,Z=F||U||re;return HZ({deleteKeyCode:c,multiSelectionKeyCode:y}),h.jsx(YZ,{onPaneContextMenu:a,elementsSelectable:b,zoomOnScroll:x,zoomOnPinch:_,panOnScroll:G,panOnScrollSpeed:j,panOnScrollMode:E,zoomOnDoubleClick:S,panOnDrag:!F&&Y,defaultViewport:N,translateExtent:P,minZoom:k,maxZoom:R,zoomActivationKeyCode:v,preventScrolling:A,noWheelClassName:M,noPanClassName:T,onViewportChange:L,isControlledViewport:D,paneClickDistance:s,children:h.jsxs(QZ,{onSelectionStart:f,onSelectionEnd:p,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:o,onPaneContextMenu:a,onPaneScroll:i,panOnDrag:Y,isSelecting:!!Z,selectionMode:d,selectionKeyPressed:F,selectionOnDrag:re,children:[e,$&&h.jsx(lee,{onSelectionContextMenu:C,noPanClassName:T,disableKeyboardA11y:I})]})})}vR.displayName="FlowRenderer";const dee=g.memo(vR),fee=e=>t=>e?rT(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map(n=>n.id):Array.from(t.nodeLookup.keys());function pee(e){return Ve(g.useCallback(fee(e),[e]),_t)}const hee=e=>e.updateNodeInternals;function mee(){const e=Ve(hee),[t]=g.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(n=>{const r=new Map;n.forEach(o=>{const a=o.target.getAttribute("data-id");r.set(a,{id:a,nodeElement:o.target,force:!0})}),e(r)}));return g.useEffect(()=>()=>{t==null||t.disconnect()},[t]),t}function yee({node:e,nodeType:t,hasDimensions:n,resizeObserver:r}){const o=gt(),a=g.useRef(null),i=g.useRef(null),s=g.useRef(e.sourcePosition),c=g.useRef(e.targetPosition),l=g.useRef(t),u=n&&!!e.internals.handleBounds;return g.useEffect(()=>{a.current&&!e.hidden&&(!u||i.current!==a.current)&&(i.current&&(r==null||r.unobserve(i.current)),r==null||r.observe(a.current),i.current=a.current)},[u,e.hidden]),g.useEffect(()=>()=>{i.current&&(r==null||r.unobserve(i.current),i.current=null)},[]),g.useEffect(()=>{if(a.current){const d=l.current!==t,f=s.current!==e.sourcePosition,p=c.current!==e.targetPosition;(d||f||p)&&(l.current=t,s.current=e.sourcePosition,c.current=e.targetPosition,o.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:a.current,force:!0}]])))}},[e.id,t,e.sourcePosition,e.targetPosition]),a}function gee({id:e,onClick:t,onMouseEnter:n,onMouseMove:r,onMouseLeave:o,onContextMenu:a,onDoubleClick:i,nodesDraggable:s,elementsSelectable:c,nodesConnectable:l,nodesFocusable:u,resizeObserver:d,noDragClassName:f,noPanClassName:p,disableKeyboardA11y:y,rfId:m,nodeTypes:v,nodeExtent:b,nodeClickDistance:x,onError:_}){const{node:w,internals:j,isParent:E}=Ve(q=>{const W=q.nodeLookup.get(e),J=q.parentLookup.has(e);return{node:W,internals:W.internals,isParent:J}},_t);let S=w.type||"default",O=(v==null?void 0:v[S])||yR[S];O===void 0&&(_==null||_("003",uo.error003(S)),S="default",O=yR.default);const N=!!(w.draggable||s&&typeof w.draggable>"u"),P=!!(w.selectable||c&&typeof w.selectable>"u"),k=!!(w.connectable||l&&typeof w.connectable>"u"),R=!!(w.focusable||u&&typeof w.focusable>"u"),A=gt(),C=dT(w),M=yee({node:w,nodeType:S,hasDimensions:C,resizeObserver:d}),T=hR({nodeRef:M,disabled:w.hidden||!N,noDragClassName:f,handleSelector:w.dragHandle,nodeId:e,isSelectable:P,nodeClickDistance:x}),I=mR();if(w.hidden)return null;const L=fo(w),D=see(w),$=P||N||t||n||r||o,U=n?q=>n(q,{...j.userNode}):void 0,F=r?q=>r(q,{...j.userNode}):void 0,H=o?q=>o(q,{...j.userNode}):void 0,Y=a?q=>a(q,{...j.userNode}):void 0,G=i?q=>i(q,{...j.userNode}):void 0,re=q=>{const{selectNodesOnDrag:W,nodeDragThreshold:J}=A.getState();P&&(!W||!N||J>0)&&$b({id:e,store:A,nodeRef:M}),t&&t(q,{...j.userNode})},Z=q=>{if(!(Sb(q.nativeEvent)||y))if(QA.includes(q.key)&&P){const W=q.key==="Escape";$b({id:e,store:A,unselect:W,nodeRef:M})}else N&&w.selected&&Object.prototype.hasOwnProperty.call(kf,q.key)&&(A.setState({ariaLiveMessage:`Moved selected node ${q.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~j.positionAbsolute.x}, y: ${~~j.positionAbsolute.y}`}),I({direction:kf[q.key],factor:q.shiftKey?4:1}))};return h.jsx("div",{className:Rt(["react-flow__node",`react-flow__node-${S}`,{[p]:N},w.className,{selected:w.selected,selectable:P,parent:E,draggable:N,dragging:T}]),ref:M,style:{zIndex:j.z,transform:`translate(${j.positionAbsolute.x}px,${j.positionAbsolute.y}px)`,pointerEvents:$?"all":"none",visibility:C?"visible":"hidden",...w.style,...D},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:U,onMouseMove:F,onMouseLeave:H,onContextMenu:Y,onClick:re,onDoubleClick:G,onKeyDown:R?Z:void 0,tabIndex:R?0:void 0,role:R?"button":void 0,"aria-describedby":y?void 0:`${QT}-${m}`,"aria-label":w.ariaLabel,children:h.jsx(ZZ,{value:e,children:h.jsx(O,{id:e,data:w.data,type:S,positionAbsoluteX:j.positionAbsolute.x,positionAbsoluteY:j.positionAbsolute.y,selected:w.selected,selectable:P,draggable:N,deletable:w.deletable??!0,isConnectable:k,sourcePosition:w.sourcePosition,targetPosition:w.targetPosition,dragging:T,dragHandle:w.dragHandle,zIndex:j.z,parentId:w.parentId,...L})})})}const vee=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function bR(e){const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:o,onError:a}=Ve(vee,_t),i=pee(e.onlyRenderVisibleElements),s=mee();return h.jsx("div",{className:"react-flow__nodes",style:Nf,children:i.map(c=>h.jsx(gee,{id:c,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:s,nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:o,nodeClickDistance:e.nodeClickDistance,onError:a},c))})}bR.displayName="NodeRenderer";const bee=g.memo(bR);function xee(e){return Ve(g.useCallback(t=>{if(!e)return t.edges.map(r=>r.id);const n=[];if(t.width&&t.height)for(const r of t.edges){const o=t.nodeLookup.get(r.source),a=t.nodeLookup.get(r.target);o&&a&&OJ({sourceNode:o,targetNode:a,width:t.width,height:t.height,transform:t.transform})&&n.push(r.id)}return n},[e]),_t)}const wee=({color:e="none",strokeWidth:t=1})=>h.jsx("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),_ee=({color:e="none",strokeWidth:t=1})=>h.jsx("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),xR={[gf.Arrow]:wee,[gf.ArrowClosed]:_ee};function jee(e){const t=gt();return g.useMemo(()=>{var n,r;return Object.prototype.hasOwnProperty.call(xR,e)?xR[e]:((r=(n=t.getState()).onError)==null||r.call(n,"009",uo.error009(e)),null)},[e])}const Eee=({id:e,type:t,color:n,width:r=12.5,height:o=12.5,markerUnits:a="strokeWidth",strokeWidth:i,orient:s="auto-start-reverse"})=>{const c=jee(t);return c?h.jsx("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${o}`,viewBox:"-10 -10 20 20",markerUnits:a,orient:s,refX:"0",refY:"0",children:h.jsx(c,{color:n,strokeWidth:i})}):null},wR=({defaultColor:e,rfId:t})=>{const n=Ve(a=>a.edges),r=Ve(a=>a.defaultEdgeOptions),o=g.useMemo(()=>RJ(n,{id:t,defaultColor:e,defaultMarkerStart:r==null?void 0:r.markerStart,defaultMarkerEnd:r==null?void 0:r.markerEnd}),[n,r,t,e]);return o.length?h.jsx("svg",{className:"react-flow__marker",children:h.jsx("defs",{children:o.map(a=>h.jsx(Eee,{id:a.id,type:a.type,color:a.color,width:a.width,height:a.height,markerUnits:a.markerUnits,strokeWidth:a.strokeWidth,orient:a.orient},a.id))})}):null};wR.displayName="MarkerDefinitions";var See=g.memo(wR);function _R({x:e,y:t,label:n,labelStyle:r={},labelShowBg:o=!0,labelBgStyle:a={},labelBgPadding:i=[2,4],labelBgBorderRadius:s=2,children:c,className:l,...u}){const[d,f]=g.useState({x:1,y:0,width:0,height:0}),p=Rt(["react-flow__edge-textwrapper",l]),y=g.useRef(null);return g.useEffect(()=>{if(y.current){const m=y.current.getBBox();f({x:m.x,y:m.y,width:m.width,height:m.height})}},[n]),typeof n>"u"||!n?null:h.jsxs("g",{transform:`translate(${e-d.width/2} ${t-d.height/2})`,className:p,visibility:d.width?"visible":"hidden",...u,children:[o&&h.jsx("rect",{width:d.width+2*i[0],x:-i[0],y:-i[1],height:d.height+2*i[1],className:"react-flow__edge-textbg",style:a,rx:s,ry:s}),h.jsx("text",{className:"react-flow__edge-text",y:d.height/2,dy:"0.3em",ref:y,style:r,children:n}),c]})}_R.displayName="EdgeText";const Cee=g.memo(_R);function Pf({id:e,path:t,labelX:n,labelY:r,label:o,labelStyle:a,labelShowBg:i,labelBgStyle:s,labelBgPadding:c,labelBgBorderRadius:l,style:u,markerEnd:d,markerStart:f,className:p,interactionWidth:y=20}){return h.jsxs(h.Fragment,{children:[h.jsx("path",{id:e,style:u,d:t,fill:"none",className:Rt(["react-flow__edge-path",p]),markerEnd:d,markerStart:f}),y&&h.jsx("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:y,className:"react-flow__edge-interaction"}),o&&hr(n)&&hr(r)?h.jsx(Cee,{x:n,y:r,label:o,labelStyle:a,labelShowBg:i,labelBgStyle:s,labelBgPadding:c,labelBgBorderRadius:l}):null]})}function jR({pos:e,x1:t,y1:n,x2:r,y2:o}){return e===fe.Left||e===fe.Right?[.5*(t+r),n]:[t,.5*(n+o)]}function ER({sourceX:e,sourceY:t,sourcePosition:n=fe.Bottom,targetX:r,targetY:o,targetPosition:a=fe.Top}){const[i,s]=jR({pos:n,x1:e,y1:t,x2:r,y2:o}),[c,l]=jR({pos:a,x1:r,y1:o,x2:e,y2:t}),[u,d,f,p]=yT({sourceX:e,sourceY:t,targetX:r,targetY:o,sourceControlX:i,sourceControlY:s,targetControlX:c,targetControlY:l});return[`M${e},${t} C${i},${s} ${c},${l} ${r},${o}`,u,d,f,p]}function SR(e){return g.memo(({id:t,sourceX:n,sourceY:r,targetX:o,targetY:a,sourcePosition:i=fe.Bottom,targetPosition:s=fe.Top,label:c,labelStyle:l,labelShowBg:u,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:p,style:y,markerEnd:m,markerStart:v,interactionWidth:b})=>{const[x,_,w]=ER({sourceX:n,sourceY:r,sourcePosition:i,targetX:o,targetY:a,targetPosition:s}),j=e.isInternal?void 0:t;return h.jsx(Pf,{id:j,path:x,labelX:_,labelY:w,label:c,labelStyle:l,labelShowBg:u,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:p,style:y,markerEnd:m,markerStart:v,interactionWidth:b})})}const Oee=SR({isInternal:!1}),CR=SR({isInternal:!0});Oee.displayName="SimpleBezierEdge",CR.displayName="SimpleBezierEdgeInternal";function OR(e){return g.memo(({id:t,sourceX:n,sourceY:r,targetX:o,targetY:a,label:i,labelStyle:s,labelShowBg:c,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:d,style:f,sourcePosition:p=fe.Bottom,targetPosition:y=fe.Top,markerEnd:m,markerStart:v,pathOptions:b,interactionWidth:x})=>{const[_,w,j]=Cb({sourceX:n,sourceY:r,sourcePosition:p,targetX:o,targetY:a,targetPosition:y,borderRadius:b==null?void 0:b.borderRadius,offset:b==null?void 0:b.offset}),E=e.isInternal?void 0:t;return h.jsx(Pf,{id:E,path:_,labelX:w,labelY:j,label:i,labelStyle:s,labelShowBg:c,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:d,style:f,markerEnd:m,markerStart:v,interactionWidth:x})})}const MR=OR({isInternal:!1}),NR=OR({isInternal:!0});MR.displayName="SmoothStepEdge",NR.displayName="SmoothStepEdgeInternal";function kR(e){return g.memo(({id:t,...n})=>{var o;const r=e.isInternal?void 0:t;return h.jsx(MR,{...n,id:r,pathOptions:g.useMemo(()=>{var a;return{borderRadius:0,offset:(a=n.pathOptions)==null?void 0:a.offset}},[(o=n.pathOptions)==null?void 0:o.offset])})})}const Mee=kR({isInternal:!1}),PR=kR({isInternal:!0});Mee.displayName="StepEdge",PR.displayName="StepEdgeInternal";function AR(e){return g.memo(({id:t,sourceX:n,sourceY:r,targetX:o,targetY:a,label:i,labelStyle:s,labelShowBg:c,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:d,style:f,markerEnd:p,markerStart:y,interactionWidth:m})=>{const[v,b,x]=wT({sourceX:n,sourceY:r,targetX:o,targetY:a}),_=e.isInternal?void 0:t;return h.jsx(Pf,{id:_,path:v,labelX:b,labelY:x,label:i,labelStyle:s,labelShowBg:c,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:d,style:f,markerEnd:p,markerStart:y,interactionWidth:m})})}const Nee=AR({isInternal:!1}),TR=AR({isInternal:!0});Nee.displayName="StraightEdge",TR.displayName="StraightEdgeInternal";function RR(e){return g.memo(({id:t,sourceX:n,sourceY:r,targetX:o,targetY:a,sourcePosition:i=fe.Bottom,targetPosition:s=fe.Top,label:c,labelStyle:l,labelShowBg:u,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:p,style:y,markerEnd:m,markerStart:v,pathOptions:b,interactionWidth:x})=>{const[_,w,j]=vT({sourceX:n,sourceY:r,sourcePosition:i,targetX:o,targetY:a,targetPosition:s,curvature:b==null?void 0:b.curvature}),E=e.isInternal?void 0:t;return h.jsx(Pf,{id:E,path:_,labelX:w,labelY:j,label:c,labelStyle:l,labelShowBg:u,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:p,style:y,markerEnd:m,markerStart:v,interactionWidth:x})})}const kee=RR({isInternal:!1}),IR=RR({isInternal:!0});kee.displayName="BezierEdge",IR.displayName="BezierEdgeInternal";const DR={default:IR,straight:TR,step:PR,smoothstep:NR,simplebezier:CR},LR={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},Pee=(e,t,n)=>n===fe.Left?e-t:n===fe.Right?e+t:e,Aee=(e,t,n)=>n===fe.Top?e-t:n===fe.Bottom?e+t:e,FR="react-flow__edgeupdater";function BR({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:o,onMouseEnter:a,onMouseOut:i,type:s}){return h.jsx("circle",{onMouseDown:o,onMouseEnter:a,onMouseOut:i,className:Rt([FR,`${FR}-${s}`]),cx:Pee(t,r,e),cy:Aee(n,r,e),r,stroke:"transparent",fill:"transparent"})}function Tee({isReconnectable:e,reconnectRadius:t,edge:n,sourceX:r,sourceY:o,targetX:a,targetY:i,sourcePosition:s,targetPosition:c,onReconnect:l,onReconnectStart:u,onReconnectEnd:d,setReconnecting:f,setUpdateHover:p}){const y=gt(),m=(w,j)=>{if(w.button!==0)return;const{autoPanOnConnect:E,domNode:S,isValidConnection:O,connectionMode:N,connectionRadius:P,lib:k,onConnectStart:R,onConnectEnd:A,cancelConnection:C,nodeLookup:M,rfId:T,panBy:I,updateConnection:L}=y.getState(),D=j.type==="target";f(!0),u==null||u(w,n,j.type);const $=(F,H)=>{f(!1),d==null||d(F,n,j.type,H)},U=F=>l==null?void 0:l(n,F);Rb.onPointerDown(w.nativeEvent,{autoPanOnConnect:E,connectionMode:N,connectionRadius:P,domNode:S,handleId:j.id,nodeId:j.nodeId,nodeLookup:M,isTarget:D,edgeUpdaterType:j.type,lib:k,flowId:T,cancelConnection:C,panBy:I,isValidConnection:O,onConnect:U,onConnectStart:R,onConnectEnd:A,onReconnectEnd:$,updateConnection:L,getTransform:()=>y.getState().transform,getFromHandle:()=>y.getState().connection.fromHandle})},v=w=>m(w,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),b=w=>m(w,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),x=()=>p(!0),_=()=>p(!1);return h.jsxs(h.Fragment,{children:[(e===!0||e==="source")&&h.jsx(BR,{position:s,centerX:r,centerY:o,radius:t,onMouseDown:v,onMouseEnter:x,onMouseOut:_,type:"source"}),(e===!0||e==="target")&&h.jsx(BR,{position:c,centerX:a,centerY:i,radius:t,onMouseDown:b,onMouseEnter:x,onMouseOut:_,type:"target"})]})}function Ree({id:e,edgesFocusable:t,edgesReconnectable:n,elementsSelectable:r,onClick:o,onDoubleClick:a,onContextMenu:i,onMouseEnter:s,onMouseMove:c,onMouseLeave:l,reconnectRadius:u,onReconnect:d,onReconnectStart:f,onReconnectEnd:p,rfId:y,edgeTypes:m,noPanClassName:v,onError:b,disableKeyboardA11y:x}){let _=Ve(B=>B.edgeLookup.get(e));const w=Ve(B=>B.defaultEdgeOptions);_=w?{...w,..._}:_;let j=_.type||"default",E=(m==null?void 0:m[j])||DR[j];E===void 0&&(b==null||b("011",uo.error011(j)),j="default",E=DR.default);const S=!!(_.focusable||t&&typeof _.focusable>"u"),O=typeof d<"u"&&(_.reconnectable||n&&typeof _.reconnectable>"u"),N=!!(_.selectable||r&&typeof _.selectable>"u"),P=g.useRef(null),[k,R]=g.useState(!1),[A,C]=g.useState(!1),M=gt(),{zIndex:T,sourceX:I,sourceY:L,targetX:D,targetY:$,sourcePosition:U,targetPosition:F}=Ve(g.useCallback(B=>{const se=B.nodeLookup.get(_.source),ce=B.nodeLookup.get(_.target);if(!se||!ce)return{zIndex:_.zIndex,...LR};const ve=TJ({id:e,sourceNode:se,targetNode:ce,sourceHandle:_.sourceHandle||null,targetHandle:_.targetHandle||null,connectionMode:B.connectionMode,onError:b});return{zIndex:CJ({selected:_.selected,zIndex:_.zIndex,sourceNode:se,targetNode:ce,elevateOnSelect:B.elevateEdgesOnSelect}),...ve||LR}},[_.source,_.target,_.sourceHandle,_.targetHandle,_.selected,_.zIndex]),_t),H=g.useMemo(()=>_.markerStart?`url('#${Ob(_.markerStart,y)}')`:void 0,[_.markerStart,y]),Y=g.useMemo(()=>_.markerEnd?`url('#${Ob(_.markerEnd,y)}')`:void 0,[_.markerEnd,y]);if(_.hidden||I===null||L===null||D===null||$===null)return null;const G=B=>{var Te;const{addSelectedEdges:se,unselectNodesAndEdges:ce,multiSelectionActive:ve}=M.getState();N&&(M.setState({nodesSelectionActive:!1}),_.selected&&ve?(ce({nodes:[],edges:[_]}),(Te=P.current)==null||Te.blur()):se([e])),o&&o(B,_)},re=a?B=>{a(B,{..._})}:void 0,Z=i?B=>{i(B,{..._})}:void 0,q=s?B=>{s(B,{..._})}:void 0,W=c?B=>{c(B,{..._})}:void 0,J=l?B=>{l(B,{..._})}:void 0,te=B=>{var se;if(!x&&QA.includes(B.key)&&N){const{unselectNodesAndEdges:ce,addSelectedEdges:ve}=M.getState();B.key==="Escape"?((se=P.current)==null||se.blur(),ce({edges:[_]})):ve([e])}};return h.jsx("svg",{style:{zIndex:T},children:h.jsxs("g",{className:Rt(["react-flow__edge",`react-flow__edge-${j}`,_.className,v,{selected:_.selected,animated:_.animated,inactive:!N&&!o,updating:k,selectable:N}]),onClick:G,onDoubleClick:re,onContextMenu:Z,onMouseEnter:q,onMouseMove:W,onMouseLeave:J,onKeyDown:S?te:void 0,tabIndex:S?0:void 0,role:S?"button":"img","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":_.ariaLabel===null?void 0:_.ariaLabel||`Edge from ${_.source} to ${_.target}`,"aria-describedby":S?`${JT}-${y}`:void 0,ref:P,children:[!A&&h.jsx(E,{id:e,source:_.source,target:_.target,type:_.type,selected:_.selected,animated:_.animated,selectable:N,deletable:_.deletable??!0,label:_.label,labelStyle:_.labelStyle,labelShowBg:_.labelShowBg,labelBgStyle:_.labelBgStyle,labelBgPadding:_.labelBgPadding,labelBgBorderRadius:_.labelBgBorderRadius,sourceX:I,sourceY:L,targetX:D,targetY:$,sourcePosition:U,targetPosition:F,data:_.data,style:_.style,sourceHandleId:_.sourceHandle,targetHandleId:_.targetHandle,markerStart:H,markerEnd:Y,pathOptions:"pathOptions"in _?_.pathOptions:void 0,interactionWidth:_.interactionWidth}),O&&h.jsx(Tee,{edge:_,isReconnectable:O,reconnectRadius:u,onReconnect:d,onReconnectStart:f,onReconnectEnd:p,sourceX:I,sourceY:L,targetX:D,targetY:$,sourcePosition:U,targetPosition:F,setUpdateHover:R,setReconnecting:C})]})})}const Iee=e=>({width:e.width,height:e.height,edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function $R({defaultMarkerColor:e,onlyRenderVisibleElements:t,rfId:n,edgeTypes:r,noPanClassName:o,onReconnect:a,onEdgeContextMenu:i,onEdgeMouseEnter:s,onEdgeMouseMove:c,onEdgeMouseLeave:l,onEdgeClick:u,reconnectRadius:d,onEdgeDoubleClick:f,onReconnectStart:p,onReconnectEnd:y,disableKeyboardA11y:m}){const{edgesFocusable:v,edgesReconnectable:b,elementsSelectable:x,onError:_}=Ve(Iee,_t),w=xee(t);return h.jsxs("div",{className:"react-flow__edges",children:[h.jsx(See,{defaultColor:e,rfId:n}),w.map(j=>h.jsx(Ree,{id:j,edgesFocusable:v,edgesReconnectable:b,elementsSelectable:x,noPanClassName:o,onReconnect:a,onContextMenu:i,onMouseEnter:s,onMouseMove:c,onMouseLeave:l,onClick:u,reconnectRadius:d,onDoubleClick:f,onReconnectStart:p,onReconnectEnd:y,rfId:n,onError:_,edgeTypes:r,disableKeyboardA11y:m},j))]})}$R.displayName="EdgeRenderer";const Dee=g.memo($R),Lee=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function Fee({children:e}){const t=Ve(Lee);return h.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:t},children:e})}function Bee(e){const t=Un(),n=g.useRef(!1);g.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const $ee=e=>{var t;return(t=e.panZoom)==null?void 0:t.syncViewport};function zee(e){const t=Ve($ee),n=gt();return g.useEffect(()=>{e&&(t==null||t(e),n.setState({transform:[e.x,e.y,e.zoom]}))},[e,t]),null}function Vee(e){return e.connection.inProgress?{...e.connection,to:cl(e.connection.to,e.transform)}:{...e.connection}}function Uee(e){return Vee}function Hee(e){const t=Uee();return Ve(t,_t)}const Wee=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function qee({containerStyle:e,style:t,type:n,component:r}){const{nodesConnectable:o,width:a,height:i,isValid:s,inProgress:c}=Ve(Wee,_t);return a&&o&&c?h.jsx("svg",{style:e,width:a,height:i,className:"react-flow__connectionline react-flow__container",children:h.jsx("g",{className:Rt(["react-flow__connection",tT(s)]),children:h.jsx(zR,{style:t,type:n,CustomComponent:r,isValid:s})})}):null}const zR=({style:e,type:t=Wo.Bezier,CustomComponent:n,isValid:r})=>{const{inProgress:o,from:a,fromNode:i,fromHandle:s,fromPosition:c,to:l,toNode:u,toHandle:d,toPosition:f}=Hee();if(!o)return;if(n)return h.jsx(n,{connectionLineType:t,connectionLineStyle:e,fromNode:i,fromHandle:s,fromX:a.x,fromY:a.y,toX:l.x,toY:l.y,fromPosition:c,toPosition:f,connectionStatus:tT(r),toNode:u,toHandle:d});let p="";const y={sourceX:a.x,sourceY:a.y,sourcePosition:c,targetX:l.x,targetY:l.y,targetPosition:f};switch(t){case Wo.Bezier:[p]=vT(y);break;case Wo.SimpleBezier:[p]=ER(y);break;case Wo.Step:[p]=Cb({...y,borderRadius:0});break;case Wo.SmoothStep:[p]=Cb(y);break;default:[p]=wT(y)}return h.jsx("path",{d:p,fill:"none",className:"react-flow__connection-path",style:e})};zR.displayName="ConnectionLine";const Yee={};function VR(e=Yee){g.useRef(e),gt(),g.useEffect(()=>{},[e])}function Kee(){gt(),g.useRef(!1),g.useEffect(()=>{},[])}function UR({nodeTypes:e,edgeTypes:t,onInit:n,onNodeClick:r,onEdgeClick:o,onNodeDoubleClick:a,onEdgeDoubleClick:i,onNodeMouseEnter:s,onNodeMouseMove:c,onNodeMouseLeave:l,onNodeContextMenu:u,onSelectionContextMenu:d,onSelectionStart:f,onSelectionEnd:p,connectionLineType:y,connectionLineStyle:m,connectionLineComponent:v,connectionLineContainerStyle:b,selectionKeyCode:x,selectionOnDrag:_,selectionMode:w,multiSelectionKeyCode:j,panActivationKeyCode:E,zoomActivationKeyCode:S,deleteKeyCode:O,onlyRenderVisibleElements:N,elementsSelectable:P,defaultViewport:k,translateExtent:R,minZoom:A,maxZoom:C,preventScrolling:M,defaultMarkerColor:T,zoomOnScroll:I,zoomOnPinch:L,panOnScroll:D,panOnScrollSpeed:$,panOnScrollMode:U,zoomOnDoubleClick:F,panOnDrag:H,onPaneClick:Y,onPaneMouseEnter:G,onPaneMouseMove:re,onPaneMouseLeave:Z,onPaneScroll:q,onPaneContextMenu:W,paneClickDistance:J,nodeClickDistance:te,onEdgeContextMenu:B,onEdgeMouseEnter:se,onEdgeMouseMove:ce,onEdgeMouseLeave:ve,reconnectRadius:Te,onReconnect:qe,onReconnectStart:Ye,onReconnectEnd:ze,noDragClassName:at,noWheelClassName:He,noPanClassName:it,disableKeyboardA11y:Vt,nodeExtent:Et,rfId:mt,viewport:Tt,onViewportChange:gn}){return VR(e),VR(t),Kee(),Bee(n),zee(Tt),h.jsx(dee,{onPaneClick:Y,onPaneMouseEnter:G,onPaneMouseMove:re,onPaneMouseLeave:Z,onPaneContextMenu:W,onPaneScroll:q,paneClickDistance:J,deleteKeyCode:O,selectionKeyCode:x,selectionOnDrag:_,selectionMode:w,onSelectionStart:f,onSelectionEnd:p,multiSelectionKeyCode:j,panActivationKeyCode:E,zoomActivationKeyCode:S,elementsSelectable:P,zoomOnScroll:I,zoomOnPinch:L,zoomOnDoubleClick:F,panOnScroll:D,panOnScrollSpeed:$,panOnScrollMode:U,panOnDrag:H,defaultViewport:k,translateExtent:R,minZoom:A,maxZoom:C,onSelectionContextMenu:d,preventScrolling:M,noDragClassName:at,noWheelClassName:He,noPanClassName:it,disableKeyboardA11y:Vt,onViewportChange:gn,isControlledViewport:!!Tt,children:h.jsxs(Fee,{children:[h.jsx(Dee,{edgeTypes:t,onEdgeClick:o,onEdgeDoubleClick:i,onReconnect:qe,onReconnectStart:Ye,onReconnectEnd:ze,onlyRenderVisibleElements:N,onEdgeContextMenu:B,onEdgeMouseEnter:se,onEdgeMouseMove:ce,onEdgeMouseLeave:ve,reconnectRadius:Te,defaultMarkerColor:T,noPanClassName:it,disableKeyboardA11y:Vt,rfId:mt}),h.jsx(qee,{style:m,type:y,component:v,containerStyle:b}),h.jsx("div",{className:"react-flow__edgelabel-renderer"}),h.jsx(bee,{nodeTypes:e,onNodeClick:r,onNodeDoubleClick:a,onNodeMouseEnter:s,onNodeMouseMove:c,onNodeMouseLeave:l,onNodeContextMenu:u,nodeClickDistance:te,onlyRenderVisibleElements:N,noPanClassName:it,noDragClassName:at,disableKeyboardA11y:Vt,nodeExtent:Et,rfId:mt}),h.jsx("div",{className:"react-flow__viewport-portal"})]})})}UR.displayName="GraphView";const Xee=g.memo(UR),HR=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:o,height:a,fitView:i,nodeOrigin:s,nodeExtent:c}={})=>{const l=new Map,u=new Map,d=new Map,f=new Map,p=r??t??[],y=n??e??[],m=s??[0,0],v=c??rl;MT(d,f,p),kb(y,l,u,{nodeOrigin:m,nodeExtent:v,elevateNodesOnSelect:!1});let b=[0,0,1];if(i&&o&&a){const x=il(l,{filter:E=>!!((E.width||E.initialWidth)&&(E.height||E.initialHeight))}),{x:_,y:w,zoom:j}=Eb(x,o,a,.5,2,.1);b=[_,w,j]}return{rfId:"1",width:0,height:0,transform:b,nodes:y,nodeLookup:l,parentLookup:u,edges:p,edgeLookup:f,connectionLookup:d,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:n!==void 0,hasDefaultEdges:r!==void 0,panZoom:null,minZoom:.5,maxZoom:2,translateExtent:rl,nodeExtent:v,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:Li.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:m,nodeDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,fitViewOnInit:!1,fitViewDone:!1,fitViewOnInitOptions:void 0,selectNodesOnDrag:!0,multiSelectionActive:!1,connection:{...JA},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanSpeed:15,connectionRadius:20,onError:EJ,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1}},Gee=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:o,height:a,fitView:i,nodeOrigin:s,nodeExtent:c})=>mZ((l,u)=>({...HR({nodes:e,edges:t,width:o,height:a,fitView:i,nodeOrigin:s,nodeExtent:c,defaultNodes:n,defaultEdges:r}),setNodes:d=>{const{nodeLookup:f,parentLookup:p,nodeOrigin:y,elevateNodesOnSelect:m}=u();kb(d,f,p,{nodeOrigin:y,nodeExtent:c,elevateNodesOnSelect:m,checkEquality:!0}),l({nodes:d})},setEdges:d=>{const{connectionLookup:f,edgeLookup:p}=u();MT(f,p,d),l({edges:d})},setDefaultNodesAndEdges:(d,f)=>{if(d){const{setNodes:p}=u();p(d),l({hasDefaultNodes:!0})}if(f){const{setEdges:p}=u();p(f),l({hasDefaultEdges:!0})}},updateNodeInternals:(d,f={triggerFitView:!0})=>{const{triggerNodeChanges:p,nodeLookup:y,parentLookup:m,fitViewOnInit:v,fitViewDone:b,fitViewOnInitOptions:x,domNode:_,nodeOrigin:w,nodeExtent:j,debug:E,fitViewSync:S}=u(),{changes:O,updatedInternals:N}=BJ(d,y,m,_,w,j);if(N){if(DJ(y,m,{nodeOrigin:w,nodeExtent:j}),f.triggerFitView){let P=b;!b&&v&&(P=S({...x,nodes:x==null?void 0:x.nodes})),l({fitViewDone:P})}else l({});(O==null?void 0:O.length)>0&&(E&&console.log("React Flow: trigger node changes",O),p==null||p(O))}},updateNodePositions:(d,f=!1)=>{const p=[],y=[];for(const[m,v]of d){const b={id:m,type:"position",position:v.position,dragging:f};v!=null&&v.expandParent&&(v!=null&&v.parentId)&&b.position&&(p.push({id:m,parentId:v.parentId,rect:{...v.internals.positionAbsolute,width:v.measured.width,height:v.measured.height}}),b.position.x=Math.max(0,b.position.x),b.position.y=Math.max(0,b.position.y)),y.push(b)}if(p.length>0){const{nodeLookup:m,parentLookup:v,nodeOrigin:b}=u(),x=Ab(p,m,v,b);y.push(...x)}u().triggerNodeChanges(y)},triggerNodeChanges:d=>{const{onNodesChange:f,setNodes:p,nodes:y,hasDefaultNodes:m,debug:v}=u();if(d!=null&&d.length){if(m){const b=Oa(d,y);p(b)}v&&console.log("React Flow: trigger node changes",d),f==null||f(d)}},triggerEdgeChanges:d=>{const{onEdgesChange:f,setEdges:p,edges:y,hasDefaultEdges:m,debug:v}=u();if(d!=null&&d.length){if(m){const b=fl(d,y);p(b)}v&&console.log("React Flow: trigger edge changes",d),f==null||f(d)}},addSelectedNodes:d=>{const{multiSelectionActive:f,edgeLookup:p,nodeLookup:y,triggerNodeChanges:m,triggerEdgeChanges:v}=u();if(f){const b=d.map(x=>Ma(x,!0));m(b);return}m(Hi(y,new Set([...d]),!0)),v(Hi(p))},addSelectedEdges:d=>{const{multiSelectionActive:f,edgeLookup:p,nodeLookup:y,triggerNodeChanges:m,triggerEdgeChanges:v}=u();if(f){const b=d.map(x=>Ma(x,!0));v(b);return}v(Hi(p,new Set([...d]))),m(Hi(y,new Set,!0))},unselectNodesAndEdges:({nodes:d,edges:f}={})=>{const{edges:p,nodes:y,nodeLookup:m,triggerNodeChanges:v,triggerEdgeChanges:b}=u(),x=d||y,_=f||p,w=x.map(E=>{const S=m.get(E.id);return S&&(S.selected=!1),Ma(E.id,!1)}),j=_.map(E=>Ma(E.id,!1));v(w),b(j)},setMinZoom:d=>{const{panZoom:f,maxZoom:p}=u();f==null||f.setScaleExtent([d,p]),l({minZoom:d})},setMaxZoom:d=>{const{panZoom:f,minZoom:p}=u();f==null||f.setScaleExtent([p,d]),l({maxZoom:d})},setTranslateExtent:d=>{var f;(f=u().panZoom)==null||f.setTranslateExtent(d),l({translateExtent:d})},setPaneClickDistance:d=>{var f;(f=u().panZoom)==null||f.setClickDistance(d)},resetSelectedElements:()=>{const{edges:d,nodes:f,triggerNodeChanges:p,triggerEdgeChanges:y}=u(),m=f.reduce((b,x)=>x.selected?[...b,Ma(x.id,!1)]:b,[]),v=d.reduce((b,x)=>x.selected?[...b,Ma(x.id,!1)]:b,[]);p(m),y(v)},setNodeExtent:d=>{const{nodes:f,nodeLookup:p,parentLookup:y,nodeOrigin:m,elevateNodesOnSelect:v,nodeExtent:b}=u();d[0][0]===b[0][0]&&d[0][1]===b[0][1]&&d[1][0]===b[1][0]&&d[1][1]===b[1][1]||(kb(f,p,y,{nodeOrigin:m,nodeExtent:d,elevateNodesOnSelect:v,checkEquality:!1}),l({nodeExtent:d}))},panBy:d=>{const{transform:f,width:p,height:y,panZoom:m,translateExtent:v}=u();return $J({delta:d,panZoom:m,transform:f,translateExtent:v,width:p,height:y})},fitView:d=>{const{panZoom:f,width:p,height:y,minZoom:m,maxZoom:v,nodeLookup:b}=u();if(!f)return Promise.resolve(!1);const x=wb(b,d);return _b({nodes:x,width:p,height:y,panZoom:f,minZoom:m,maxZoom:v},d)},fitViewSync:d=>{const{panZoom:f,width:p,height:y,minZoom:m,maxZoom:v,nodeLookup:b}=u();if(!f)return!1;const x=wb(b,d);return _b({nodes:x,width:p,height:y,panZoom:f,minZoom:m,maxZoom:v},d),x.size>0},cancelConnection:()=>{l({connection:{...JA}})},updateConnection:d=>{l({connection:d})},reset:()=>l({...HR()})}),Object.is);function Qee({initialNodes:e,initialEdges:t,defaultNodes:n,defaultEdges:r,initialWidth:o,initialHeight:a,fitView:i,nodeOrigin:s,nodeExtent:c,children:l}){const[u]=g.useState(()=>Gee({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:o,height:a,fitView:i,nodeOrigin:s,nodeExtent:c}));return h.jsx(yZ,{value:u,children:h.jsx(BZ,{children:l})})}function Jee({children:e,nodes:t,edges:n,defaultNodes:r,defaultEdges:o,width:a,height:i,fitView:s,nodeOrigin:c,nodeExtent:l}){return g.useContext(Of)?h.jsx(h.Fragment,{children:e}):h.jsx(Qee,{initialNodes:t,initialEdges:n,defaultNodes:r,defaultEdges:o,initialWidth:a,initialHeight:i,fitView:s,nodeOrigin:c,nodeExtent:l,children:e})}const Zee={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function ete({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:o,nodeTypes:a,edgeTypes:i,onNodeClick:s,onEdgeClick:c,onInit:l,onMove:u,onMoveStart:d,onMoveEnd:f,onConnect:p,onConnectStart:y,onConnectEnd:m,onClickConnectStart:v,onClickConnectEnd:b,onNodeMouseEnter:x,onNodeMouseMove:_,onNodeMouseLeave:w,onNodeContextMenu:j,onNodeDoubleClick:E,onNodeDragStart:S,onNodeDrag:O,onNodeDragStop:N,onNodesDelete:P,onEdgesDelete:k,onDelete:R,onSelectionChange:A,onSelectionDragStart:C,onSelectionDrag:M,onSelectionDragStop:T,onSelectionContextMenu:I,onSelectionStart:L,onSelectionEnd:D,onBeforeDelete:$,connectionMode:U,connectionLineType:F=Wo.Bezier,connectionLineStyle:H,connectionLineComponent:Y,connectionLineContainerStyle:G,deleteKeyCode:re="Backspace",selectionKeyCode:Z="Shift",selectionOnDrag:q=!1,selectionMode:W=ol.Full,panActivationKeyCode:J="Space",multiSelectionKeyCode:te=_f()?"Meta":"Control",zoomActivationKeyCode:B=_f()?"Meta":"Control",snapToGrid:se,snapGrid:ce,onlyRenderVisibleElements:ve=!1,selectNodesOnDrag:Te,nodesDraggable:qe,nodesConnectable:Ye,nodesFocusable:ze,nodeOrigin:at=ZT,edgesFocusable:He,edgesReconnectable:it,elementsSelectable:Vt=!0,defaultViewport:Et=NZ,minZoom:mt=.5,maxZoom:Tt=2,translateExtent:gn=rl,preventScrolling:wr=!0,nodeExtent:Qa,defaultMarkerColor:Qn="#b1b1b7",zoomOnScroll:la=!0,zoomOnPinch:X=!0,panOnScroll:ee=!1,panOnScrollSpeed:ie=.5,panOnScrollMode:pe=Ho.Free,zoomOnDoubleClick:Ne=!0,panOnDrag:Ot=!0,onPaneClick:xt,onPaneMouseEnter:Be,onPaneMouseMove:ge,onPaneMouseLeave:we,onPaneScroll:_e,onPaneContextMenu:je,paneClickDistance:Le=0,nodeClickDistance:ct=0,children:St,onReconnect:z,onReconnectStart:K,onReconnectEnd:ne,onEdgeContextMenu:le,onEdgeDoubleClick:Se,onEdgeMouseEnter:ke,onEdgeMouseMove:Ie,onEdgeMouseLeave:Ce,reconnectRadius:Me=10,onNodesChange:be,onEdgesChange:De,noDragClassName:Ue="nodrag",noWheelClassName:yt="nowheel",noPanClassName:wt="nopan",fitView:Ke,fitViewOptions:Sn,connectOnClick:Pt,attributionPosition:Ja,proOptions:_r,defaultEdgeOptions:ua,elevateNodesOnSelect:zr,elevateEdgesOnSelect:Eu,disableKeyboardA11y:Jn=!1,autoPanOnConnect:Vs,autoPanOnNodeDrag:Us,autoPanSpeed:Hs,connectionRadius:et,isValidConnection:Cn,onError:Za,style:Ct,id:To,nodeDragThreshold:Th,viewport:lE,onViewportChange:Pxe,width:Axe,height:Txe,colorMode:Rxe="light",debug:Ixe,...Dxe},Lxe){const uE=To||"1",Fxe=TZ(Rxe);return h.jsx("div",{...Dxe,style:{...Ct,...Zee},ref:Lxe,className:Rt(["react-flow",o,Fxe]),"data-testid":"rf__wrapper",id:To,children:h.jsxs(Jee,{nodes:e,edges:t,width:Axe,height:Txe,fitView:Ke,nodeOrigin:at,nodeExtent:Qa,children:[h.jsx(Xee,{onInit:l,onNodeClick:s,onEdgeClick:c,onNodeMouseEnter:x,onNodeMouseMove:_,onNodeMouseLeave:w,onNodeContextMenu:j,onNodeDoubleClick:E,nodeTypes:a,edgeTypes:i,connectionLineType:F,connectionLineStyle:H,connectionLineComponent:Y,connectionLineContainerStyle:G,selectionKeyCode:Z,selectionOnDrag:q,selectionMode:W,deleteKeyCode:re,multiSelectionKeyCode:te,panActivationKeyCode:J,zoomActivationKeyCode:B,onlyRenderVisibleElements:ve,defaultViewport:Et,translateExtent:gn,minZoom:mt,maxZoom:Tt,preventScrolling:wr,zoomOnScroll:la,zoomOnPinch:X,zoomOnDoubleClick:Ne,panOnScroll:ee,panOnScrollSpeed:ie,panOnScrollMode:pe,panOnDrag:Ot,onPaneClick:xt,onPaneMouseEnter:Be,onPaneMouseMove:ge,onPaneMouseLeave:we,onPaneScroll:_e,onPaneContextMenu:je,paneClickDistance:Le,nodeClickDistance:ct,onSelectionContextMenu:I,onSelectionStart:L,onSelectionEnd:D,onReconnect:z,onReconnectStart:K,onReconnectEnd:ne,onEdgeContextMenu:le,onEdgeDoubleClick:Se,onEdgeMouseEnter:ke,onEdgeMouseMove:Ie,onEdgeMouseLeave:Ce,reconnectRadius:Me,defaultMarkerColor:Qn,noDragClassName:Ue,noWheelClassName:yt,noPanClassName:wt,rfId:uE,disableKeyboardA11y:Jn,nodeExtent:Qa,viewport:lE,onViewportChange:Pxe}),h.jsx(AZ,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:p,onConnectStart:y,onConnectEnd:m,onClickConnectStart:v,onClickConnectEnd:b,nodesDraggable:qe,nodesConnectable:Ye,nodesFocusable:ze,edgesFocusable:He,edgesReconnectable:it,elementsSelectable:Vt,elevateNodesOnSelect:zr,elevateEdgesOnSelect:Eu,minZoom:mt,maxZoom:Tt,nodeExtent:Qa,onNodesChange:be,onEdgesChange:De,snapToGrid:se,snapGrid:ce,connectionMode:U,translateExtent:gn,connectOnClick:Pt,defaultEdgeOptions:ua,fitView:Ke,fitViewOptions:Sn,onNodesDelete:P,onEdgesDelete:k,onDelete:R,onNodeDragStart:S,onNodeDrag:O,onNodeDragStop:N,onSelectionDrag:M,onSelectionDragStart:C,onSelectionDragStop:T,onMove:u,onMoveStart:d,onMoveEnd:f,noPanClassName:wt,nodeOrigin:at,rfId:uE,autoPanOnConnect:Vs,autoPanOnNodeDrag:Us,autoPanSpeed:Hs,onError:Za,connectionRadius:et,isValidConnection:Cn,selectNodesOnDrag:Te,nodeDragThreshold:Th,onBeforeDelete:$,paneClickDistance:Le,debug:Ixe}),h.jsx(MZ,{onSelectionChange:A}),St,h.jsx(jZ,{proOptions:_r,position:Ja}),h.jsx(wZ,{rfId:uE,disableKeyboardA11y:Jn})]})})}var tte=uR(ete);const nte=e=>{var t;return(t=e.domNode)==null?void 0:t.querySelector(".react-flow__viewport-portal")};function rte({children:e}){const t=Ve(nte);return t?Su.createPortal(e,t):null}const ote=e=>e.nodes;function ate(){return Ve(ote,_t)}function Af({type:e,id:t=null,nodeId:n,onConnect:r,onDisconnect:o}){const a=Vb(),i=n??a,s=g.useRef(null),c=Ve(l=>l.connectionLookup.get(`${i}-${e}-${t}`),bJ);return g.useEffect(()=>{if(s.current&&s.current!==c){const l=c??new Map;eT(s.current,l,o),eT(l,s.current,r)}s.current=c??new Map},[c,r,o]),g.useMemo(()=>Array.from((c==null?void 0:c.values())??[]),[c])}Yt=function(e){return Ve(g.useCallback(t=>t.nodeLookup.get(e),[e]),_t)};function ite({dimensions:e,lineWidth:t,variant:n,className:r}){return h.jsx("path",{strokeWidth:t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:Rt(["react-flow__background-pattern",n,r])})}function ste({radius:e,className:t}){return h.jsx("circle",{cx:e,cy:e,r:e,className:Rt(["react-flow__background-pattern","dots",t])})}var ho;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(ho||(ho={}));const cte={[ho.Dots]:1,[ho.Lines]:1,[ho.Cross]:6},lte=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function WR({id:e,variant:t=ho.Dots,gap:n=20,size:r,lineWidth:o=1,offset:a=0,color:i,bgColor:s,style:c,className:l,patternClassName:u}){const d=g.useRef(null),{transform:f,patternId:p}=Ve(lte,_t),y=r||cte[t],m=t===ho.Dots,v=t===ho.Cross,b=Array.isArray(n)?n:[n,n],x=[b[0]*f[2]||1,b[1]*f[2]||1],_=y*f[2],w=Array.isArray(a)?a:[a,a],j=v?[_,_]:x,E=[w[0]*f[2]||1+j[0]/2,w[1]*f[2]||1+j[1]/2],S=`${p}${e||""}`;return h.jsxs("svg",{className:Rt(["react-flow__background",l]),style:{...c,...Nf,"--xy-background-color-props":s,"--xy-background-pattern-color-props":i},ref:d,"data-testid":"rf__background",children:[h.jsx("pattern",{id:S,x:f[0]%x[0],y:f[1]%x[1],width:x[0],height:x[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${E[0]},-${E[1]})`,children:m?h.jsx(ste,{radius:_/2,className:u}):h.jsx(ite,{dimensions:j,lineWidth:o,variant:t,className:u})}),h.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${S})`})]})}WR.displayName="Background";const ute=g.memo(WR);function dte(){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:h.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function fte(){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:h.jsx("path",{d:"M0 0h32v4.2H0z"})})}function pte(){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:h.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function hte(){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:h.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function mte(){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:h.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function Tf({children:e,className:t,...n}){return h.jsx("button",{type:"button",className:Rt(["react-flow__controls-button",t]),...n,children:e})}const yte=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom});function qR({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:o,onZoomIn:a,onZoomOut:i,onFitView:s,onInteractiveChange:c,className:l,children:u,position:d="bottom-left",orientation:f="vertical","aria-label":p="React Flow controls"}){const y=gt(),{isInteractive:m,minZoomReached:v,maxZoomReached:b}=Ve(yte,_t),{zoomIn:x,zoomOut:_,fitView:w}=Un(),j=()=>{x(),a==null||a()},E=()=>{_(),i==null||i()},S=()=>{w(o),s==null||s()},O=()=>{y.setState({nodesDraggable:!m,nodesConnectable:!m,elementsSelectable:!m}),c==null||c(!m)},N=f==="horizontal"?"horizontal":"vertical";return h.jsxs(Ui,{className:Rt(["react-flow__controls",N,l]),position:d,style:e,"data-testid":"rf__controls","aria-label":p,children:[t&&h.jsxs(h.Fragment,{children:[h.jsx(Tf,{onClick:j,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:b,children:h.jsx(dte,{})}),h.jsx(Tf,{onClick:E,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:v,children:h.jsx(fte,{})})]}),n&&h.jsx(Tf,{className:"react-flow__controls-fitview",onClick:S,title:"fit view","aria-label":"fit view",children:h.jsx(pte,{})}),r&&h.jsx(Tf,{className:"react-flow__controls-interactive",onClick:O,title:"toggle interactivity","aria-label":"toggle interactivity",children:m?h.jsx(mte,{}):h.jsx(hte,{})}),u]})}qR.displayName="Controls";const gte=g.memo(qR);function vte({id:e,x:t,y:n,width:r,height:o,style:a,color:i,strokeColor:s,strokeWidth:c,className:l,borderRadius:u,shapeRendering:d,selected:f,onClick:p}){const{background:y,backgroundColor:m}=a||{},v=i||y||m;return h.jsx("rect",{className:Rt(["react-flow__minimap-node",{selected:f},l]),x:t,y:n,rx:u,ry:u,width:r,height:o,style:{fill:v,stroke:s,strokeWidth:c},shapeRendering:d,onClick:p?b=>p(b,e):void 0})}const bte=g.memo(vte),xte=e=>e.nodes.map(t=>t.id),Ub=e=>e instanceof Function?e:()=>e;function wte({nodeStrokeColor:e,nodeColor:t,nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:o,nodeComponent:a=bte,onClick:i}){const s=Ve(xte,_t),c=Ub(t),l=Ub(e),u=Ub(n),d=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return h.jsx(h.Fragment,{children:s.map(f=>h.jsx(jte,{id:f,nodeColorFunc:c,nodeStrokeColorFunc:l,nodeClassNameFunc:u,nodeBorderRadius:r,nodeStrokeWidth:o,NodeComponent:a,onClick:i,shapeRendering:d},f))})}function _te({id:e,nodeColorFunc:t,nodeStrokeColorFunc:n,nodeClassNameFunc:r,nodeBorderRadius:o,nodeStrokeWidth:a,shapeRendering:i,NodeComponent:s,onClick:c}){const{node:l,x:u,y:d,width:f,height:p}=Ve(y=>{const m=y.nodeLookup.get(e),{x:v,y:b}=m.internals.positionAbsolute,{width:x,height:_}=fo(m);return{node:m,x:v,y:b,width:x,height:_}},_t);return!l||l.hidden||!dT(l)?null:h.jsx(s,{x:u,y:d,width:f,height:p,style:l.style,selected:!!l.selected,className:r(l),color:t(l),borderRadius:o,strokeColor:n(l),strokeWidth:a,shapeRendering:i,onClick:c,id:l.id})}const jte=g.memo(_te);var Ete=g.memo(wte);const Ste=200,Cte=150,Ote=e=>{const t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:t,boundingRect:e.nodeLookup.size>0?cT(il(e.nodeLookup),t):t,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height}},Mte="react-flow__minimap-desc";function YR({style:e,className:t,nodeStrokeColor:n,nodeColor:r,nodeClassName:o="",nodeBorderRadius:a=5,nodeStrokeWidth:i,nodeComponent:s,bgColor:c,maskColor:l,maskStrokeColor:u,maskStrokeWidth:d,position:f="bottom-right",onClick:p,onNodeClick:y,pannable:m=!1,zoomable:v=!1,ariaLabel:b="React Flow mini map",inversePan:x,zoomStep:_=10,offsetScale:w=5}){const j=gt(),E=g.useRef(null),{boundingRect:S,viewBB:O,rfId:N,panZoom:P,translateExtent:k,flowWidth:R,flowHeight:A}=Ve(Ote,_t),C=(e==null?void 0:e.width)??Ste,M=(e==null?void 0:e.height)??Cte,T=S.width/C,I=S.height/M,L=Math.max(T,I),D=L*C,$=L*M,U=w*L,F=S.x-(D-S.width)/2-U,H=S.y-($-S.height)/2-U,Y=D+U*2,G=$+U*2,re=`${Mte}-${N}`,Z=g.useRef(0),q=g.useRef();Z.current=L,g.useEffect(()=>{if(E.current&&P)return q.current=KJ({domNode:E.current,panZoom:P,getTransform:()=>j.getState().transform,getViewScale:()=>Z.current}),()=>{var te;(te=q.current)==null||te.destroy()}},[P]),g.useEffect(()=>{var te;(te=q.current)==null||te.update({translateExtent:k,width:R,height:A,inversePan:x,pannable:m,zoomStep:_,zoomable:v})},[m,v,x,_,k,R,A]);const W=p?te=>{var ce;const[B,se]=((ce=q.current)==null?void 0:ce.pointer(te))||[0,0];p(te,{x:B,y:se})}:void 0,J=y?g.useCallback((te,B)=>{const se=j.getState().nodeLookup.get(B);y(te,se)},[]):void 0;return h.jsx(Ui,{position:f,style:{...e,"--xy-minimap-background-color-props":typeof c=="string"?c:void 0,"--xy-minimap-mask-background-color-props":typeof l=="string"?l:void 0,"--xy-minimap-mask-stroke-color-props":typeof u=="string"?u:void 0,"--xy-minimap-mask-stroke-width-props":typeof d=="number"?d*L:void 0,"--xy-minimap-node-background-color-props":typeof r=="string"?r:void 0,"--xy-minimap-node-stroke-color-props":typeof n=="string"?n:void 0,"--xy-minimap-node-stroke-width-props":typeof i=="string"?i:void 0},className:Rt(["react-flow__minimap",t]),"data-testid":"rf__minimap",children:h.jsxs("svg",{width:C,height:M,viewBox:`${F} ${H} ${Y} ${G}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":re,ref:E,onClick:W,children:[b&&h.jsx("title",{id:re,children:b}),h.jsx(Ete,{onClick:J,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:a,nodeClassName:o,nodeStrokeWidth:i,nodeComponent:s}),h.jsx("path",{className:"react-flow__minimap-mask",d:`M${F-U},${H-U}h${Y+U*2}v${G+U*2}h${-Y-U*2}z
        M${O.x},${O.y}h${O.width}v${O.height}h${-O.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}YR.displayName="MiniMap";const Nte=g.memo(YR);function kte({nodeId:e,position:t,variant:n=Vi.Handle,className:r,style:o={},children:a,color:i,minWidth:s=10,minHeight:c=10,maxWidth:l=Number.MAX_VALUE,maxHeight:u=Number.MAX_VALUE,keepAspectRatio:d=!1,shouldResize:f,onResizeStart:p,onResize:y,onResizeEnd:m}){const v=Vb(),b=typeof e=="string"?e:v,x=gt(),_=g.useRef(null),w=n===Vi.Line?"right":"bottom-right",j=t??w,E=g.useRef(null);g.useEffect(()=>{if(!(!_.current||!b))return E.current||(E.current=dZ({domNode:_.current,nodeId:b,getStoreItems:()=>{const{nodeLookup:P,transform:k,snapGrid:R,snapToGrid:A,nodeOrigin:C,domNode:M}=x.getState();return{nodeLookup:P,transform:k,snapGrid:R,snapToGrid:A,nodeOrigin:C,paneDomNode:M}},onChange:(P,k)=>{const{triggerNodeChanges:R,nodeLookup:A,parentLookup:C,nodeOrigin:M}=x.getState(),T=[],I={x:P.x,y:P.y},L=A.get(b);if(L&&L.expandParent&&L.parentId){const D=L.origin??M,$=P.width??L.measured.width,U=P.height??L.measured.height,F={id:L.id,parentId:L.parentId,rect:{width:$,height:U,...fT({x:P.x??L.position.x,y:P.y??L.position.y},{width:$,height:U},L.parentId,A,D)}},H=Ab([F],A,C,M);T.push(...H),I.x=P.x?Math.max(D[0]*$,P.x):void 0,I.y=P.y?Math.max(D[1]*U,P.y):void 0}if(I.x!==void 0&&I.y!==void 0){const D={id:b,type:"position",position:{...I}};T.push(D)}if(P.width!==void 0&&P.height!==void 0){const D={id:b,type:"dimensions",resizing:!0,setAttributes:!0,dimensions:{width:P.width,height:P.height}};T.push(D)}for(const D of k){const $={...D,type:"position"};T.push($)}R(T)},onEnd:()=>{const P={id:b,type:"dimensions",resizing:!1};x.getState().triggerNodeChanges([P])}})),E.current.update({controlPosition:j,boundaries:{minWidth:s,minHeight:c,maxWidth:l,maxHeight:u},keepAspectRatio:d,onResizeStart:p,onResize:y,onResizeEnd:m,shouldResize:f}),()=>{var P;(P=E.current)==null||P.destroy()}},[j,s,c,l,u,d,p,y,m,f]);const S=j.split("-"),O=n===Vi.Line?"borderColor":"backgroundColor",N=i?{...o,[O]:i}:o;return h.jsx("div",{className:Rt(["react-flow__resize-control","nodrag",...S,n,r]),ref:_,style:N,children:a})}const KR=g.memo(kte);function Pte({nodeId:e,isVisible:t=!0,handleClassName:n,handleStyle:r,lineClassName:o,lineStyle:a,color:i,minWidth:s=10,minHeight:c=10,maxWidth:l=Number.MAX_VALUE,maxHeight:u=Number.MAX_VALUE,keepAspectRatio:d=!1,shouldResize:f,onResizeStart:p,onResize:y,onResizeEnd:m}){return t?h.jsxs(h.Fragment,{children:[oZ.map(v=>h.jsx(KR,{className:o,style:a,nodeId:e,position:v,variant:Vi.Line,color:i,minWidth:s,minHeight:c,maxWidth:l,maxHeight:u,onResizeStart:p,keepAspectRatio:d,shouldResize:f,onResize:y,onResizeEnd:m},v)),rZ.map(v=>h.jsx(KR,{className:n,style:r,nodeId:e,position:v,color:i,minWidth:s,minHeight:c,maxWidth:l,maxHeight:u,onResizeStart:p,keepAspectRatio:d,shouldResize:f,onResize:y,onResizeEnd:m},v))]}):null}var Hb,XR;function Ate(){if(XR)return Hb;XR=1;var e=function(b){return t(b)&&!n(b)};function t(b){return!!b&&typeof b=="object"}function n(b){var x=Object.prototype.toString.call(b);return x==="[object RegExp]"||x==="[object Date]"||a(b)}var r=typeof Symbol=="function"&&Symbol.for,o=r?Symbol.for("react.element"):60103;function a(b){return b.$$typeof===o}function i(b){return Array.isArray(b)?[]:{}}function s(b,x){return x.clone!==!1&&x.isMergeableObject(b)?m(i(b),b,x):b}function c(b,x,_){return b.concat(x).map(function(w){return s(w,_)})}function l(b,x){if(!x.customMerge)return m;var _=x.customMerge(b);return typeof _=="function"?_:m}function u(b){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(b).filter(function(x){return Object.propertyIsEnumerable.call(b,x)}):[]}function d(b){return Object.keys(b).concat(u(b))}function f(b,x){try{return x in b}catch{return!1}}function p(b,x){return f(b,x)&&!(Object.hasOwnProperty.call(b,x)&&Object.propertyIsEnumerable.call(b,x))}function y(b,x,_){var w={};return _.isMergeableObject(b)&&d(b).forEach(function(j){w[j]=s(b[j],_)}),d(x).forEach(function(j){p(b,j)||(f(b,j)&&_.isMergeableObject(x[j])?w[j]=l(j,_)(b[j],x[j],_):w[j]=s(x[j],_))}),w}function m(b,x,_){_=_||{},_.arrayMerge=_.arrayMerge||c,_.isMergeableObject=_.isMergeableObject||e,_.cloneUnlessOtherwiseSpecified=s;var w=Array.isArray(x),j=Array.isArray(b),E=w===j;return E?w?_.arrayMerge(b,x,_):y(b,x,_):s(x,_)}m.all=function(b,x){if(!Array.isArray(b))throw new Error("first argument should be an array");return b.reduce(function(_,w){return m(_,w,x)},{})};var v=m;return Hb=v,Hb}var Tte=Ate();const Rf=Xe(Tte);var GR={},QR;function Rte(){if(QR)return GR;QR=1;var e;return function(t){(function(n){var r=typeof globalThis=="object"?globalThis:typeof Ws=="object"?Ws:typeof self=="object"?self:typeof this=="object"?this:c(),o=a(t);typeof r.Reflect<"u"&&(o=a(r.Reflect,o)),n(o,r),typeof r.Reflect>"u"&&(r.Reflect=t);function a(l,u){return function(d,f){Object.defineProperty(l,d,{configurable:!0,writable:!0,value:f}),u&&u(d,f)}}function i(){try{return Function("return this;")()}catch{}}function s(){try{return(0,eval)("(function() { return this; })()")}catch{}}function c(){return i()||s()}})(function(n,r){var o=Object.prototype.hasOwnProperty,a=typeof Symbol=="function",i=a&&typeof Symbol.toPrimitive<"u"?Symbol.toPrimitive:"@@toPrimitive",s=a&&typeof Symbol.iterator<"u"?Symbol.iterator:"@@iterator",c=typeof Object.create=="function",l={__proto__:[]}instanceof Array,u=!c&&!l,d={create:c?function(){return la(Object.create(null))}:l?function(){return la({__proto__:null})}:function(){return la({})},has:u?function(X,ee){return o.call(X,ee)}:function(X,ee){return ee in X},get:u?function(X,ee){return o.call(X,ee)?X[ee]:void 0}:function(X,ee){return X[ee]}},f=Object.getPrototypeOf(Function),p=typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:wr(),y=typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:Qa(),m=typeof WeakMap=="function"?WeakMap:Qn(),v=a?Symbol.for("@reflect-metadata:registry"):void 0,b=Et(),x=mt(b);function _(X,ee,ie,pe){if(H(ie)){if(!B(X))throw new TypeError;if(!ce(ee))throw new TypeError;return A(X,ee)}else{if(!B(X))throw new TypeError;if(!re(ee))throw new TypeError;if(!re(pe)&&!H(pe)&&!Y(pe))throw new TypeError;return Y(pe)&&(pe=void 0),ie=te(ie),C(X,ee,ie,pe)}}n("decorate",_);function w(X,ee){function ie(pe,Ne){if(!re(pe))throw new TypeError;if(!H(Ne)&&!ve(Ne))throw new TypeError;D(X,ee,pe,Ne)}return ie}n("metadata",w);function j(X,ee,ie,pe){if(!re(ie))throw new TypeError;return H(pe)||(pe=te(pe)),D(X,ee,ie,pe)}n("defineMetadata",j);function E(X,ee,ie){if(!re(ee))throw new TypeError;return H(ie)||(ie=te(ie)),M(X,ee,ie)}n("hasMetadata",E);function S(X,ee,ie){if(!re(ee))throw new TypeError;return H(ie)||(ie=te(ie)),T(X,ee,ie)}n("hasOwnMetadata",S);function O(X,ee,ie){if(!re(ee))throw new TypeError;return H(ie)||(ie=te(ie)),I(X,ee,ie)}n("getMetadata",O);function N(X,ee,ie){if(!re(ee))throw new TypeError;return H(ie)||(ie=te(ie)),L(X,ee,ie)}n("getOwnMetadata",N);function P(X,ee){if(!re(X))throw new TypeError;return H(ee)||(ee=te(ee)),$(X,ee)}n("getMetadataKeys",P);function k(X,ee){if(!re(X))throw new TypeError;return H(ee)||(ee=te(ee)),U(X,ee)}n("getOwnMetadataKeys",k);function R(X,ee,ie){if(!re(ee))throw new TypeError;if(H(ie)||(ie=te(ie)),!re(ee))throw new TypeError;H(ie)||(ie=te(ie));var pe=gn(ee,ie,!1);return H(pe)?!1:pe.OrdinaryDeleteMetadata(X,ee,ie)}n("deleteMetadata",R);function A(X,ee){for(var ie=X.length-1;ie>=0;--ie){var pe=X[ie],Ne=pe(ee);if(!H(Ne)&&!Y(Ne)){if(!ce(Ne))throw new TypeError;ee=Ne}}return ee}function C(X,ee,ie,pe){for(var Ne=X.length-1;Ne>=0;--Ne){var Ot=X[Ne],xt=Ot(ee,ie,pe);if(!H(xt)&&!Y(xt)){if(!re(xt))throw new TypeError;pe=xt}}return pe}function M(X,ee,ie){var pe=T(X,ee,ie);if(pe)return!0;var Ne=it(ee);return Y(Ne)?!1:M(X,Ne,ie)}function T(X,ee,ie){var pe=gn(ee,ie,!1);return H(pe)?!1:W(pe.OrdinaryHasOwnMetadata(X,ee,ie))}function I(X,ee,ie){var pe=T(X,ee,ie);if(pe)return L(X,ee,ie);var Ne=it(ee);if(!Y(Ne))return I(X,Ne,ie)}function L(X,ee,ie){var pe=gn(ee,ie,!1);if(!H(pe))return pe.OrdinaryGetOwnMetadata(X,ee,ie)}function D(X,ee,ie,pe){var Ne=gn(ie,pe,!0);Ne.OrdinaryDefineOwnMetadata(X,ee,ie,pe)}function $(X,ee){var ie=U(X,ee),pe=it(X);if(pe===null)return ie;var Ne=$(pe,ee);if(Ne.length<=0)return ie;if(ie.length<=0)return Ne;for(var Ot=new y,xt=[],Be=0,ge=ie;Be<ge.length;Be++){var we=ge[Be],_e=Ot.has(we);_e||(Ot.add(we),xt.push(we))}for(var je=0,Le=Ne;je<Le.length;je++){var we=Le[je],_e=Ot.has(we);_e||(Ot.add(we),xt.push(we))}return xt}function U(X,ee){var ie=gn(X,ee,!1);return ie?ie.OrdinaryOwnMetadataKeys(X,ee):[]}function F(X){if(X===null)return 1;switch(typeof X){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return X===null?1:6;default:return 6}}function H(X){return X===void 0}function Y(X){return X===null}function G(X){return typeof X=="symbol"}function re(X){return typeof X=="object"?X!==null:typeof X=="function"}function Z(X,ee){switch(F(X)){case 0:return X;case 1:return X;case 2:return X;case 3:return X;case 4:return X;case 5:return X}var ie="string",pe=qe(X,i);if(pe!==void 0){var Ne=pe.call(X,ie);if(re(Ne))throw new TypeError;return Ne}return q(X)}function q(X,ee){var ie,pe;{var Ne=X.toString;if(se(Ne)){var pe=Ne.call(X);if(!re(pe))return pe}var ie=X.valueOf;if(se(ie)){var pe=ie.call(X);if(!re(pe))return pe}}throw new TypeError}function W(X){return!!X}function J(X){return""+X}function te(X){var ee=Z(X);return G(ee)?ee:J(ee)}function B(X){return Array.isArray?Array.isArray(X):X instanceof Object?X instanceof Array:Object.prototype.toString.call(X)==="[object Array]"}function se(X){return typeof X=="function"}function ce(X){return typeof X=="function"}function ve(X){switch(F(X)){case 3:return!0;case 4:return!0;default:return!1}}function Te(X,ee){return X===ee||X!==X&&ee!==ee}function qe(X,ee){var ie=X[ee];if(ie!=null){if(!se(ie))throw new TypeError;return ie}}function Ye(X){var ee=qe(X,s);if(!se(ee))throw new TypeError;var ie=ee.call(X);if(!re(ie))throw new TypeError;return ie}function ze(X){return X.value}function at(X){var ee=X.next();return ee.done?!1:ee}function He(X){var ee=X.return;ee&&ee.call(X)}function it(X){var ee=Object.getPrototypeOf(X);if(typeof X!="function"||X===f||ee!==f)return ee;var ie=X.prototype,pe=ie&&Object.getPrototypeOf(ie);if(pe==null||pe===Object.prototype)return ee;var Ne=pe.constructor;return typeof Ne!="function"||Ne===X?ee:Ne}function Vt(){var X;!H(v)&&typeof r.Reflect<"u"&&!(v in r.Reflect)&&typeof r.Reflect.defineMetadata=="function"&&(X=Tt(r.Reflect));var ee,ie,pe,Ne=new m,Ot={registerProvider:xt,getProvider:ge,setProvider:_e};return Ot;function xt(je){if(!Object.isExtensible(Ot))throw new Error("Cannot add provider to a frozen registry.");switch(!0){case X===je:break;case H(ee):ee=je;break;case ee===je:break;case H(ie):ie=je;break;case ie===je:break;default:pe===void 0&&(pe=new y),pe.add(je);break}}function Be(je,Le){if(!H(ee)){if(ee.isProviderFor(je,Le))return ee;if(!H(ie)){if(ie.isProviderFor(je,Le))return ee;if(!H(pe))for(var ct=Ye(pe);;){var St=at(ct);if(!St)return;var z=ze(St);if(z.isProviderFor(je,Le))return He(ct),z}}}if(!H(X)&&X.isProviderFor(je,Le))return X}function ge(je,Le){var ct=Ne.get(je),St;return H(ct)||(St=ct.get(Le)),H(St)&&(St=Be(je,Le),H(St)||(H(ct)&&(ct=new p,Ne.set(je,ct)),ct.set(Le,St))),St}function we(je){if(H(je))throw new TypeError;return ee===je||ie===je||!H(pe)&&pe.has(je)}function _e(je,Le,ct){if(!we(ct))throw new Error("Metadata provider not registered.");var St=ge(je,Le);if(St!==ct){if(!H(St))return!1;var z=Ne.get(je);H(z)&&(z=new p,Ne.set(je,z)),z.set(Le,ct)}return!0}}function Et(){var X;return!H(v)&&re(r.Reflect)&&Object.isExtensible(r.Reflect)&&(X=r.Reflect[v]),H(X)&&(X=Vt()),!H(v)&&re(r.Reflect)&&Object.isExtensible(r.Reflect)&&Object.defineProperty(r.Reflect,v,{enumerable:!1,configurable:!1,writable:!1,value:X}),X}function mt(X){var ee=new m,ie={isProviderFor:function(we,_e){var je=ee.get(we);return H(je)?!1:je.has(_e)},OrdinaryDefineOwnMetadata:xt,OrdinaryHasOwnMetadata:Ne,OrdinaryGetOwnMetadata:Ot,OrdinaryOwnMetadataKeys:Be,OrdinaryDeleteMetadata:ge};return b.registerProvider(ie),ie;function pe(we,_e,je){var Le=ee.get(we),ct=!1;if(H(Le)){if(!je)return;Le=new p,ee.set(we,Le),ct=!0}var St=Le.get(_e);if(H(St)){if(!je)return;if(St=new p,Le.set(_e,St),!X.setProvider(we,_e,ie))throw Le.delete(_e),ct&&ee.delete(we),new Error("Wrong provider for target.")}return St}function Ne(we,_e,je){var Le=pe(_e,je,!1);return H(Le)?!1:W(Le.has(we))}function Ot(we,_e,je){var Le=pe(_e,je,!1);if(!H(Le))return Le.get(we)}function xt(we,_e,je,Le){var ct=pe(je,Le,!0);ct.set(we,_e)}function Be(we,_e){var je=[],Le=pe(we,_e,!1);if(H(Le))return je;for(var ct=Le.keys(),St=Ye(ct),z=0;;){var K=at(St);if(!K)return je.length=z,je;var ne=ze(K);try{je[z]=ne}catch(le){try{He(St)}finally{throw le}}z++}}function ge(we,_e,je){var Le=pe(_e,je,!1);if(H(Le)||!Le.delete(we))return!1;if(Le.size===0){var ct=ee.get(_e);H(ct)||(ct.delete(je),ct.size===0&&ee.delete(ct))}return!0}}function Tt(X){var ee=X.defineMetadata,ie=X.hasOwnMetadata,pe=X.getOwnMetadata,Ne=X.getOwnMetadataKeys,Ot=X.deleteMetadata,xt=new m,Be={isProviderFor:function(ge,we){var _e=xt.get(ge);return!H(_e)&&_e.has(we)?!0:Ne(ge,we).length?(H(_e)&&(_e=new y,xt.set(ge,_e)),_e.add(we),!0):!1},OrdinaryDefineOwnMetadata:ee,OrdinaryHasOwnMetadata:ie,OrdinaryGetOwnMetadata:pe,OrdinaryOwnMetadataKeys:Ne,OrdinaryDeleteMetadata:Ot};return Be}function gn(X,ee,ie){var pe=b.getProvider(X,ee);if(!H(pe))return pe;if(ie){if(b.setProvider(X,ee,x))return x;throw new Error("Illegal state.")}}function wr(){var X={},ee=[],ie=function(){function Be(ge,we,_e){this._index=0,this._keys=ge,this._values=we,this._selector=_e}return Be.prototype["@@iterator"]=function(){return this},Be.prototype[s]=function(){return this},Be.prototype.next=function(){var ge=this._index;if(ge>=0&&ge<this._keys.length){var we=this._selector(this._keys[ge],this._values[ge]);return ge+1>=this._keys.length?(this._index=-1,this._keys=ee,this._values=ee):this._index++,{value:we,done:!1}}return{value:void 0,done:!0}},Be.prototype.throw=function(ge){throw this._index>=0&&(this._index=-1,this._keys=ee,this._values=ee),ge},Be.prototype.return=function(ge){return this._index>=0&&(this._index=-1,this._keys=ee,this._values=ee),{value:ge,done:!0}},Be}(),pe=function(){function Be(){this._keys=[],this._values=[],this._cacheKey=X,this._cacheIndex=-2}return Object.defineProperty(Be.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),Be.prototype.has=function(ge){return this._find(ge,!1)>=0},Be.prototype.get=function(ge){var we=this._find(ge,!1);return we>=0?this._values[we]:void 0},Be.prototype.set=function(ge,we){var _e=this._find(ge,!0);return this._values[_e]=we,this},Be.prototype.delete=function(ge){var we=this._find(ge,!1);if(we>=0){for(var _e=this._keys.length,je=we+1;je<_e;je++)this._keys[je-1]=this._keys[je],this._values[je-1]=this._values[je];return this._keys.length--,this._values.length--,Te(ge,this._cacheKey)&&(this._cacheKey=X,this._cacheIndex=-2),!0}return!1},Be.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=X,this._cacheIndex=-2},Be.prototype.keys=function(){return new ie(this._keys,this._values,Ne)},Be.prototype.values=function(){return new ie(this._keys,this._values,Ot)},Be.prototype.entries=function(){return new ie(this._keys,this._values,xt)},Be.prototype["@@iterator"]=function(){return this.entries()},Be.prototype[s]=function(){return this.entries()},Be.prototype._find=function(ge,we){if(!Te(this._cacheKey,ge)){this._cacheIndex=-1;for(var _e=0;_e<this._keys.length;_e++)if(Te(this._keys[_e],ge)){this._cacheIndex=_e;break}}return this._cacheIndex<0&&we&&(this._cacheIndex=this._keys.length,this._keys.push(ge),this._values.push(void 0)),this._cacheIndex},Be}();return pe;function Ne(Be,ge){return Be}function Ot(Be,ge){return ge}function xt(Be,ge){return[Be,ge]}}function Qa(){var X=function(){function ee(){this._map=new p}return Object.defineProperty(ee.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),ee.prototype.has=function(ie){return this._map.has(ie)},ee.prototype.add=function(ie){return this._map.set(ie,ie),this},ee.prototype.delete=function(ie){return this._map.delete(ie)},ee.prototype.clear=function(){this._map.clear()},ee.prototype.keys=function(){return this._map.keys()},ee.prototype.values=function(){return this._map.keys()},ee.prototype.entries=function(){return this._map.entries()},ee.prototype["@@iterator"]=function(){return this.keys()},ee.prototype[s]=function(){return this.keys()},ee}();return X}function Qn(){var X=16,ee=d.create(),ie=pe();return function(){function ge(){this._key=pe()}return ge.prototype.has=function(we){var _e=Ne(we,!1);return _e!==void 0?d.has(_e,this._key):!1},ge.prototype.get=function(we){var _e=Ne(we,!1);return _e!==void 0?d.get(_e,this._key):void 0},ge.prototype.set=function(we,_e){var je=Ne(we,!0);return je[this._key]=_e,this},ge.prototype.delete=function(we){var _e=Ne(we,!1);return _e!==void 0?delete _e[this._key]:!1},ge.prototype.clear=function(){this._key=pe()},ge}();function pe(){var ge;do ge="@@WeakMap@@"+Be();while(d.has(ee,ge));return ee[ge]=!0,ge}function Ne(ge,we){if(!o.call(ge,ie)){if(!we)return;Object.defineProperty(ge,ie,{value:d.create()})}return ge[ie]}function Ot(ge,we){for(var _e=0;_e<we;++_e)ge[_e]=Math.random()*255|0;return ge}function xt(ge){if(typeof Uint8Array=="function"){var we=new Uint8Array(ge);return typeof crypto<"u"?crypto.getRandomValues(we):typeof msCrypto<"u"?msCrypto.getRandomValues(we):Ot(we,ge),we}return Ot(new Array(ge),ge)}function Be(){var ge=xt(X);ge[6]=ge[6]&79|64,ge[8]=ge[8]&191|128;for(var we="",_e=0;_e<X;++_e){var je=ge[_e];(_e===4||_e===6||_e===8)&&(we+="-"),je<16&&(we+="0"),we+=je.toString(16).toLowerCase()}return we}}function la(X){return X.__=void 0,delete X.__,X}})}(e||(e={})),GR}Rte(),typeof window<"u"&&(window.Buffer=Gxe),typeof km<"u"&&typeof require<"u"&&(km.Buffer=require("buffer/").Buffer);class It{static isObject(t){return t!==null&&typeof t=="object"}static isObjectWithName(t){return t!==null&&typeof t=="object"&&t.name!==void 0}static assign(t,...n){for(const r of n)for(const o of Object.getOwnPropertyNames(r))t[o]=r[o]}static mixedListToArray(t){return t!==null&&typeof t=="object"?Object.keys(t).map(n=>t[n]):t}}class xe extends Error{get name(){return this.constructor.name}constructor(t){super(t),Object.setPrototypeOf?Object.setPrototypeOf(this,new.target.prototype):this.__proto__=new.target.prototype}}class Wi extends xe{constructor(){super("Locking not supported on given driver.")}}class Wb extends xe{constructor(){super('Cannot perform update query because update values are not defined. Call "qb.set(...)" method to specify updated values.')}}class dt{static isMssqlParameter(t){return this.check(t,"MssqlParameter")}static isEntityMetadata(t){return this.check(t,"EntityMetadata")}static isColumnMetadata(t){return this.check(t,"ColumnMetadata")}static isSelectQueryBuilder(t){return this.check(t,"SelectQueryBuilder")}static isInsertQueryBuilder(t){return this.check(t,"InsertQueryBuilder")}static isDeleteQueryBuilder(t){return this.check(t,"DeleteQueryBuilder")}static isUpdateQueryBuilder(t){return this.check(t,"UpdateQueryBuilder")}static isSoftDeleteQueryBuilder(t){return this.check(t,"SoftDeleteQueryBuilder")}static isRelationQueryBuilder(t){return this.check(t,"RelationQueryBuilder")}static isBrackets(t){return this.check(t,"Brackets")||this.check(t,"NotBrackets")}static isNotBrackets(t){return this.check(t,"NotBrackets")}static isSubject(t){return this.check(t,"Subject")}static isRdbmsSchemaBuilder(t){return this.check(t,"RdbmsSchemaBuilder")}static isMongoEntityManager(t){return this.check(t,"MongoEntityManager")}static isSqljsEntityManager(t){return this.check(t,"SqljsEntityManager")}static isEntitySchema(t){return this.check(t,"EntitySchema")}static isBaseEntityConstructor(t){return typeof t=="function"&&typeof t.hasId=="function"&&typeof t.save=="function"&&typeof t.useDataSource=="function"}static isFindOperator(t){return this.check(t,"FindOperator")||this.check(t,"EqualOperator")}static isEqualOperator(t){return this.check(t,"EqualOperator")}static isQuery(t){return this.check(t,"Query")}static isTable(t){return this.check(t,"Table")}static isTableCheck(t){return this.check(t,"TableCheck")}static isTableColumn(t){return this.check(t,"TableColumn")}static isTableExclusion(t){return this.check(t,"TableExclusion")}static isTableForeignKey(t){return this.check(t,"TableForeignKey")}static isTableIndex(t){return this.check(t,"TableIndex")}static isTableUnique(t){return this.check(t,"TableUnique")}static isView(t){return this.check(t,"View")}static isDataSource(t){return this.check(t,"DataSource")}static check(t,n){return typeof t=="object"&&t!==null&&t["@instanceof"]===Symbol.for(n)}}class Ite extends xe{constructor(t,n){super(),this.entityClass=t,this.criteria=n,this.message=`Could not find any entity of type "${this.stringifyTarget(t)}" matching: ${this.stringifyCriteria(n)}`}stringifyTarget(t){return dt.isEntitySchema(t)?t.options.name:typeof t=="function"||It.isObject(t)&&"name"in t?t.name:t}stringifyCriteria(t){try{return JSON.stringify(t,null,4)}catch{}return""+t}}class JR extends xe{constructor(t,n,r){super(`The optimistic lock on entity ${t} failed, version ${n} was expected, but is actually ${r}.`)}}class ZR extends xe{constructor(){super("Your database does not support LIMIT on UPDATE statements.")}}class Dte extends xe{constructor(t){super(`Entity "${t.name}" does not have delete date columns.`)}}class If extends xe{constructor(){super("OUTPUT or RETURNING clause only supported by Microsoft SQL Server or PostgreSQL or MariaDB databases.")}}class Ar extends xe{constructor(t,n){super(t),Object.setPrototypeOf(this,Ar.prototype),this.message=`Property "${t}" was not found in "${n.targetName}". Make sure your query is correct.`}}class Lte extends xe{constructor(t){super(`Entity ${t} does not have version or update date columns.`)}}class Fte extends xe{constructor(){super('Cannot perform insert query because values are not defined. Call "qb.values(...)" method to specify inserted values.')}}class hl extends xe{constructor(){super("The optimistic lock can be used only with getOne() method.")}}class Bte extends xe{constructor(t){super(),t.length===1?this.message=`Relation "${t[0]}" was not found; please check if it is correct and really exists in your entity.`:this.message=`Relations ${t.map(n=>`"${n}"`).join(", ")} were not found; please check if relations are correct and they exist in your entities.`}}class $te extends xe{constructor(){super("An open transaction is required for pessimistic lock.")}}class zte extends xe{constructor(){super("RDBMS does not support OFFSET without LIMIT in SELECT statements. You must use limit in conjunction with offset function (or take in conjunction with skip function if you are using pagination).")}}class eI{constructor(t){It.assign(this,t||{})}get target(){return this.metadata.target}get hasMetadata(){return!!this._metadata}set metadata(t){this._metadata=t}get metadata(){if(!this._metadata)throw new xe(`Cannot get entity metadata for the given alias "${this.name}"`);return this._metadata}}class Tr{static isAliasProperty(t){if(typeof t!="string"||t.indexOf(".")===-1)return!1;const[n,r]=t.split(".");return!(!n||!r||t.indexOf("(")!==-1||t.indexOf(")")!==-1)}}var qb={exports:{}},Yb={exports:{}},tI;function qi(){return tI||(tI=1,typeof Object.create=="function"?Yb.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:Yb.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}),Yb.exports}var Kb={exports:{}},nI;function Na(){return nI||(nI=1,function(e,t){var n=Qxe(),r=n.Buffer;function o(i,s){for(var c in i)s[c]=i[c]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?e.exports=n:(o(n,t),t.Buffer=a);function a(i,s,c){return r(i,s,c)}a.prototype=Object.create(r.prototype),o(r,a),a.from=function(i,s,c){if(typeof i=="number")throw new TypeError("Argument must not be a number");return r(i,s,c)},a.alloc=function(i,s,c){if(typeof i!="number")throw new TypeError("Argument must be a number");var l=r(i);return s!==void 0?typeof c=="string"?l.fill(s,c):l.fill(s):l.fill(0),l},a.allocUnsafe=function(i){if(typeof i!="number")throw new TypeError("Argument must be a number");return r(i)},a.allocUnsafeSlow=function(i){if(typeof i!="number")throw new TypeError("Argument must be a number");return n.SlowBuffer(i)}}(Kb,Kb.exports)),Kb.exports}var Xb,rI;function Yi(){if(rI)return Xb;rI=1;var e=Na().Buffer;function t(n,r){this._block=e.alloc(n),this._finalSize=r,this._blockSize=n,this._len=0}return t.prototype.update=function(n,r){typeof n=="string"&&(r=r||"utf8",n=e.from(n,r));for(var o=this._block,a=this._blockSize,i=n.length,s=this._len,c=0;c<i;){for(var l=s%a,u=Math.min(i-c,a-l),d=0;d<u;d++)o[l+d]=n[c+d];s+=u,c+=u,s%a===0&&this._update(o)}return this._len+=i,this},t.prototype.digest=function(n){var r=this._len%this._blockSize;this._block[r]=128,this._block.fill(0,r+1),r>=this._finalSize&&(this._update(this._block),this._block.fill(0));var o=this._len*8;if(o<=4294967295)this._block.writeUInt32BE(o,this._blockSize-4);else{var a=(o&4294967295)>>>0,i=(o-a)/4294967296;this._block.writeUInt32BE(i,this._blockSize-8),this._block.writeUInt32BE(a,this._blockSize-4)}this._update(this._block);var s=this._hash();return n?s.toString(n):s},t.prototype._update=function(){throw new Error("_update must be implemented by subclass")},Xb=t,Xb}var Gb,oI;function Vte(){if(oI)return Gb;oI=1;var e=qi(),t=Yi(),n=Na().Buffer,r=[1518500249,1859775393,-1894007588,-899497514],o=new Array(80);function a(){this.init(),this._w=o,t.call(this,64,56)}e(a,t),a.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function i(l){return l<<5|l>>>27}function s(l){return l<<30|l>>>2}function c(l,u,d,f){return l===0?u&d|~u&f:l===2?u&d|u&f|d&f:u^d^f}return a.prototype._update=function(l){for(var u=this._w,d=this._a|0,f=this._b|0,p=this._c|0,y=this._d|0,m=this._e|0,v=0;v<16;++v)u[v]=l.readInt32BE(v*4);for(;v<80;++v)u[v]=u[v-3]^u[v-8]^u[v-14]^u[v-16];for(var b=0;b<80;++b){var x=~~(b/20),_=i(d)+c(x,f,p,y)+m+u[b]+r[x]|0;m=y,y=p,p=s(f),f=d,d=_}this._a=d+this._a|0,this._b=f+this._b|0,this._c=p+this._c|0,this._d=y+this._d|0,this._e=m+this._e|0},a.prototype._hash=function(){var l=n.allocUnsafe(20);return l.writeInt32BE(this._a|0,0),l.writeInt32BE(this._b|0,4),l.writeInt32BE(this._c|0,8),l.writeInt32BE(this._d|0,12),l.writeInt32BE(this._e|0,16),l},Gb=a,Gb}var Qb,aI;function Ute(){if(aI)return Qb;aI=1;var e=qi(),t=Yi(),n=Na().Buffer,r=[1518500249,1859775393,-1894007588,-899497514],o=new Array(80);function a(){this.init(),this._w=o,t.call(this,64,56)}e(a,t),a.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function i(u){return u<<1|u>>>31}function s(u){return u<<5|u>>>27}function c(u){return u<<30|u>>>2}function l(u,d,f,p){return u===0?d&f|~d&p:u===2?d&f|d&p|f&p:d^f^p}return a.prototype._update=function(u){for(var d=this._w,f=this._a|0,p=this._b|0,y=this._c|0,m=this._d|0,v=this._e|0,b=0;b<16;++b)d[b]=u.readInt32BE(b*4);for(;b<80;++b)d[b]=i(d[b-3]^d[b-8]^d[b-14]^d[b-16]);for(var x=0;x<80;++x){var _=~~(x/20),w=s(f)+l(_,p,y,m)+v+d[x]+r[_]|0;v=m,m=y,y=c(p),p=f,f=w}this._a=f+this._a|0,this._b=p+this._b|0,this._c=y+this._c|0,this._d=m+this._d|0,this._e=v+this._e|0},a.prototype._hash=function(){var u=n.allocUnsafe(20);return u.writeInt32BE(this._a|0,0),u.writeInt32BE(this._b|0,4),u.writeInt32BE(this._c|0,8),u.writeInt32BE(this._d|0,12),u.writeInt32BE(this._e|0,16),u},Qb=a,Qb}var Jb,iI;function sI(){if(iI)return Jb;iI=1;var e=qi(),t=Yi(),n=Na().Buffer,r=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],o=new Array(64);function a(){this.init(),this._w=o,t.call(this,64,56)}e(a,t),a.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this};function i(f,p,y){return y^f&(p^y)}function s(f,p,y){return f&p|y&(f|p)}function c(f){return(f>>>2|f<<30)^(f>>>13|f<<19)^(f>>>22|f<<10)}function l(f){return(f>>>6|f<<26)^(f>>>11|f<<21)^(f>>>25|f<<7)}function u(f){return(f>>>7|f<<25)^(f>>>18|f<<14)^f>>>3}function d(f){return(f>>>17|f<<15)^(f>>>19|f<<13)^f>>>10}return a.prototype._update=function(f){for(var p=this._w,y=this._a|0,m=this._b|0,v=this._c|0,b=this._d|0,x=this._e|0,_=this._f|0,w=this._g|0,j=this._h|0,E=0;E<16;++E)p[E]=f.readInt32BE(E*4);for(;E<64;++E)p[E]=d(p[E-2])+p[E-7]+u(p[E-15])+p[E-16]|0;for(var S=0;S<64;++S){var O=j+l(x)+i(x,_,w)+r[S]+p[S]|0,N=c(y)+s(y,m,v)|0;j=w,w=_,_=x,x=b+O|0,b=v,v=m,m=y,y=O+N|0}this._a=y+this._a|0,this._b=m+this._b|0,this._c=v+this._c|0,this._d=b+this._d|0,this._e=x+this._e|0,this._f=_+this._f|0,this._g=w+this._g|0,this._h=j+this._h|0},a.prototype._hash=function(){var f=n.allocUnsafe(32);return f.writeInt32BE(this._a,0),f.writeInt32BE(this._b,4),f.writeInt32BE(this._c,8),f.writeInt32BE(this._d,12),f.writeInt32BE(this._e,16),f.writeInt32BE(this._f,20),f.writeInt32BE(this._g,24),f.writeInt32BE(this._h,28),f},Jb=a,Jb}var Zb,cI;function Hte(){if(cI)return Zb;cI=1;var e=qi(),t=sI(),n=Yi(),r=Na().Buffer,o=new Array(64);function a(){this.init(),this._w=o,n.call(this,64,56)}return e(a,t),a.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},a.prototype._hash=function(){var i=r.allocUnsafe(28);return i.writeInt32BE(this._a,0),i.writeInt32BE(this._b,4),i.writeInt32BE(this._c,8),i.writeInt32BE(this._d,12),i.writeInt32BE(this._e,16),i.writeInt32BE(this._f,20),i.writeInt32BE(this._g,24),i},Zb=a,Zb}var ex,lI;function uI(){if(lI)return ex;lI=1;var e=qi(),t=Yi(),n=Na().Buffer,r=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],o=new Array(160);function a(){this.init(),this._w=o,t.call(this,128,112)}e(a,t),a.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this};function i(m,v,b){return b^m&(v^b)}function s(m,v,b){return m&v|b&(m|v)}function c(m,v){return(m>>>28|v<<4)^(v>>>2|m<<30)^(v>>>7|m<<25)}function l(m,v){return(m>>>14|v<<18)^(m>>>18|v<<14)^(v>>>9|m<<23)}function u(m,v){return(m>>>1|v<<31)^(m>>>8|v<<24)^m>>>7}function d(m,v){return(m>>>1|v<<31)^(m>>>8|v<<24)^(m>>>7|v<<25)}function f(m,v){return(m>>>19|v<<13)^(v>>>29|m<<3)^m>>>6}function p(m,v){return(m>>>19|v<<13)^(v>>>29|m<<3)^(m>>>6|v<<26)}function y(m,v){return m>>>0<v>>>0?1:0}return a.prototype._update=function(m){for(var v=this._w,b=this._ah|0,x=this._bh|0,_=this._ch|0,w=this._dh|0,j=this._eh|0,E=this._fh|0,S=this._gh|0,O=this._hh|0,N=this._al|0,P=this._bl|0,k=this._cl|0,R=this._dl|0,A=this._el|0,C=this._fl|0,M=this._gl|0,T=this._hl|0,I=0;I<32;I+=2)v[I]=m.readInt32BE(I*4),v[I+1]=m.readInt32BE(I*4+4);for(;I<160;I+=2){var L=v[I-30],D=v[I-15*2+1],$=u(L,D),U=d(D,L);L=v[I-2*2],D=v[I-2*2+1];var F=f(L,D),H=p(D,L),Y=v[I-7*2],G=v[I-7*2+1],re=v[I-16*2],Z=v[I-16*2+1],q=U+G|0,W=$+Y+y(q,U)|0;q=q+H|0,W=W+F+y(q,H)|0,q=q+Z|0,W=W+re+y(q,Z)|0,v[I]=W,v[I+1]=q}for(var J=0;J<160;J+=2){W=v[J],q=v[J+1];var te=s(b,x,_),B=s(N,P,k),se=c(b,N),ce=c(N,b),ve=l(j,A),Te=l(A,j),qe=r[J],Ye=r[J+1],ze=i(j,E,S),at=i(A,C,M),He=T+Te|0,it=O+ve+y(He,T)|0;He=He+at|0,it=it+ze+y(He,at)|0,He=He+Ye|0,it=it+qe+y(He,Ye)|0,He=He+q|0,it=it+W+y(He,q)|0;var Vt=ce+B|0,Et=se+te+y(Vt,ce)|0;O=S,T=M,S=E,M=C,E=j,C=A,A=R+He|0,j=w+it+y(A,R)|0,w=_,R=k,_=x,k=P,x=b,P=N,N=He+Vt|0,b=it+Et+y(N,He)|0}this._al=this._al+N|0,this._bl=this._bl+P|0,this._cl=this._cl+k|0,this._dl=this._dl+R|0,this._el=this._el+A|0,this._fl=this._fl+C|0,this._gl=this._gl+M|0,this._hl=this._hl+T|0,this._ah=this._ah+b+y(this._al,N)|0,this._bh=this._bh+x+y(this._bl,P)|0,this._ch=this._ch+_+y(this._cl,k)|0,this._dh=this._dh+w+y(this._dl,R)|0,this._eh=this._eh+j+y(this._el,A)|0,this._fh=this._fh+E+y(this._fl,C)|0,this._gh=this._gh+S+y(this._gl,M)|0,this._hh=this._hh+O+y(this._hl,T)|0},a.prototype._hash=function(){var m=n.allocUnsafe(64);function v(b,x,_){m.writeInt32BE(b,_),m.writeInt32BE(x,_+4)}return v(this._ah,this._al,0),v(this._bh,this._bl,8),v(this._ch,this._cl,16),v(this._dh,this._dl,24),v(this._eh,this._el,32),v(this._fh,this._fl,40),v(this._gh,this._gl,48),v(this._hh,this._hl,56),m},ex=a,ex}var tx,dI;function Wte(){if(dI)return tx;dI=1;var e=qi(),t=uI(),n=Yi(),r=Na().Buffer,o=new Array(160);function a(){this.init(),this._w=o,n.call(this,128,112)}return e(a,t),a.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},a.prototype._hash=function(){var i=r.allocUnsafe(48);function s(c,l,u){i.writeInt32BE(c,u),i.writeInt32BE(l,u+4)}return s(this._ah,this._al,0),s(this._bh,this._bl,8),s(this._ch,this._cl,16),s(this._dh,this._dl,24),s(this._eh,this._el,32),s(this._fh,this._fl,40),i},tx=a,tx}var fI;function qte(){if(fI)return qb.exports;fI=1;var e=qb.exports=function(t){t=t.toLowerCase();var n=e[t];if(!n)throw new Error(t+" is not supported (we accept pull requests)");return new n};return e.sha=Vte(),e.sha1=Ute(),e.sha224=Hte(),e.sha256=sI(),e.sha384=Wte(),e.sha512=uI(),qb.exports}var Yte=qte();const Kte=Xe(Yte);function Xte(e,t={}){const{segmentLength:n=4,separator:r="__",termLength:o=2}=t;return e.split(r).reduce((a,i)=>{const s=i.replace(/([a-z\xE0-\xFF])([A-Z\xC0-\xDF])/g,"$1 $2").split(" "),c=s.length>1?o:n,l=s.map(u=>u.substr(0,c)).join("");return a.push(l),a},[]).join(r)}function Gte(e,t={}){const n=Kte("sha1");n.update(e,"utf8");const r=n.digest("hex");return t.length?r.slice(0,t.length):r}class Qte{static isGreaterOrEqual(t,n){const r=pI(t),o=pI(n);return r[0]>o[0]||r[0]===o[0]&&r[1]>o[1]||r[0]===o[0]&&r[1]===o[1]&&r[2]>=o[2]}}function pI(e=""){const t=[0,0,0];return e.split(".").forEach((n,r)=>t[r]=parseInt(n,10)),t}class ye{static isSQLiteFamily(t){return["sqlite","cordova","react-native","nativescript","sqljs","expo","better-sqlite3","capacitor"].includes(t.options.type)}static isMySQLFamily(t){return["mysql","mariadb"].includes(t.options.type)}static isReleaseVersionOrGreater(t,n){return t.version!=null&&Qte.isGreaterOrEqual(t.version,n)}static isPostgresFamily(t){return["postgres","aurora-postgres","cockroachdb"].includes(t.options.type)}static buildDriverOptions(t,n){if(t.url){const r=this.parseConnectionUrl(t.url);n&&n.useSid&&r.database&&(r.sid=r.database);for(const o of Object.keys(r))typeof r[o]>"u"&&delete r[o];return Object.assign({},t,r)}return Object.assign({},t)}static buildMongoDBDriverOptions(t,n){if(t.url){const r=this.parseMongoDBConnectionUrl(t.url);n&&n.useSid&&r.database&&(r.sid=r.database);for(const o of Object.keys(r))typeof r[o]>"u"&&delete r[o];return Object.assign({},t,r)}return Object.assign({},t)}static buildAlias({maxAliasLength:t},n,...r){const o=n&&n.joiner?n.joiner:"_";let a=r.length===1?r[0]:r.join(o);if(t&&t>0&&a.length>t){if(n&&n.shorten===!0){const i=Xte(a);if(i.length<t)return i}return Gte(a,{length:t})}return a}static buildColumnAlias({maxAliasLength:t},n,...r){return typeof n=="string"?(r.unshift(n),n={shorten:!1,joiner:"_"}):n=Object.assign({shorten:!1,joiner:"_"},n),this.buildAlias({maxAliasLength:t},n,...r)}static parseConnectionUrl(t){const n=t.split(":")[0],r=t.indexOf("//"),o=t.substr(r+2),a=o.indexOf("/"),i=a!==-1?o.substr(0,a):o;let s=a!==-1?o.substr(a+1):void 0;s&&s.indexOf("?")!==-1&&(s=s.substr(0,s.indexOf("?")));const c=i.lastIndexOf("@"),l=i.substr(0,c),u=i.substr(c+1);let d=l,f="";const p=l.indexOf(":");p!==-1&&(d=l.substr(0,p),f=l.substr(p+1));const[y,m]=u.split(":");return{type:n,host:y,username:decodeURIComponent(d),password:decodeURIComponent(f),port:m?parseInt(m):void 0,database:s||void 0}}static parseMongoDBConnectionUrl(t){const n=t.split(":")[0],r=t.indexOf("//"),o=t.substr(r+2),a=o.indexOf("/"),i=a!==-1?o.substr(0,a):o;let s=a!==-1?o.substr(a+1):void 0,c="",l,u,d,f,p={};if(s&&s.indexOf("?")!==-1){c=s.substr(s.indexOf("?")+1,s.length);const j=c.split("&");let E,S;j.forEach(O=>{E=O.split("=")[0],S=O.split("=")[1],p[E]=S}),f=p.replicaSet,s=s.substr(0,s.indexOf("?"))}const y=i.lastIndexOf("@"),m=i.substr(0,y),v=i.substr(y+1);let b=m,x="";const _=m.indexOf(":");_!==-1&&(b=m.substr(0,_),x=m.substr(_+1)),f?d=v:[l,u]=v.split(":");let w={type:n,host:l,hostReplicaSet:d,username:decodeURIComponent(b),password:decodeURIComponent(x),port:u?parseInt(u):void 0,database:s||void 0};for(const[j,E]of Object.entries(p))w[j]=E;return w}}class hI{constructor(t,n,r){this.connection=t,this.queryExpressionMap=n,this.isSelectedEvaluated=!1,this.relationEvaluated=!1,r&&It.assign(this,r)}get isMany(){return this.isMappingMany!==void 0?this.isMappingMany:this.relation?this.relation.isManyToMany||this.relation.isOneToMany:!1}get isSelected(){if(!this.isSelectedEvaluated){let t=()=>{for(const n of this.queryExpressionMap.selects)if(n.selection===this.alias.name||this.metadata&&this.metadata.columns.find(r=>n.selection===this.alias.name+"."+r.propertyPath))return!0;return!1};this.isSelectedCache=t(),this.isSelectedEvaluated=!0}return this.isSelectedCache}get tablePath(){return this.metadata?this.metadata.tablePath:this.entityOrProperty}get parentAlias(){if(Tr.isAliasProperty(this.entityOrProperty))return this.entityOrProperty.substr(0,this.entityOrProperty.indexOf("."))}get relationPropertyPath(){if(Tr.isAliasProperty(this.entityOrProperty))return this.entityOrProperty.substr(this.entityOrProperty.indexOf(".")+1)}get relation(){if(!this.relationEvaluated){let t=()=>{if(!Tr.isAliasProperty(this.entityOrProperty))return;const n=this.queryExpressionMap.findAliasByName(this.parentAlias);let r=n.metadata.findRelationWithPropertyPath(this.relationPropertyPath);if(r||n.metadata.parentEntityMetadata&&(r=n.metadata.parentEntityMetadata.findRelationWithPropertyPath(this.relationPropertyPath),r))return r;throw new xe(`Relation with property path ${this.relationPropertyPath} in entity was not found.`)};this.relationCache=t.bind(this)(),this.relationEvaluated=!0}return this.relationCache}get metadata(){if(this.relation)return this.relation.inverseEntityMetadata;if(this.connection.hasMetadata(this.entityOrProperty))return this.connection.getMetadata(this.entityOrProperty);if(this.mapAsEntity&&this.connection.hasMetadata(this.mapAsEntity))return this.connection.getMetadata(this.mapAsEntity)}get junctionAlias(){if(!this.relation)throw new xe("Cannot get junction table for join without relation.");if(typeof this.entityOrProperty!="string")throw new xe("Junction property is not defined.");const t=this.entityOrProperty.substr(0,this.entityOrProperty.indexOf("."));return this.relation.isOwning?ye.buildAlias(this.connection.driver,void 0,t,this.alias.name):ye.buildAlias(this.connection.driver,void 0,this.alias.name,t)}get mapToPropertyParentAlias(){if(this.mapToProperty)return this.mapToProperty.split(".")[0]}get mapToPropertyPropertyName(){if(this.mapToProperty)return this.mapToProperty.split(".")[1]}}class nx{constructor(t,n){this.queryExpressionMap=t,this.disableMixedMap=!1,It.assign(this,n||{})}get joinInverseSideMetadata(){return this.relation.inverseEntityMetadata}get parentAlias(){if(!Tr.isAliasProperty(this.relationName))throw new xe("Given value must be a string representation of alias property");return this.relationName.substr(0,this.relationName.indexOf("."))}get relationPropertyPath(){if(!Tr.isAliasProperty(this.relationName))throw new xe("Given value must be a string representation of alias property");return this.relationName.substr(this.relationName.indexOf(".")+1)}get relation(){if(!Tr.isAliasProperty(this.relationName))throw new xe("Given value must be a string representation of alias property");const t=this.queryExpressionMap.findAliasByName(this.parentAlias).metadata.findRelationWithPropertyPath(this.relationPropertyPath);if(!t)throw new xe(`Relation with property path ${this.relationPropertyPath} in entity was not found.`);return t}get junctionAlias(){const[t,n]=this.relationName.split(".");return t+"_"+n+"_rid"}get junctionMetadata(){return this.relation.junctionEntityMetadata}get mapToPropertyParentAlias(){return this.mapToProperty.substr(0,this.mapToProperty.indexOf("."))}get mapToPropertyPropertyPath(){return this.mapToProperty.substr(this.mapToProperty.indexOf(".")+1)}}class rx{constructor(t,n){this.expressionMap=t,It.assign(this,n||{})}get joinInverseSideMetadata(){return this.relation.inverseEntityMetadata}get parentAlias(){if(!Tr.isAliasProperty(this.relationName))throw new xe("Given value must be a string representation of alias property");return this.relationName.split(".")[0]}get relationProperty(){if(!Tr.isAliasProperty(this.relationName))throw new xe("Given value is a string representation of alias property");return this.relationName.split(".")[1]}get junctionAlias(){const[t,n]=this.relationName.split(".");return t+"_"+n+"_rc"}get relation(){if(!Tr.isAliasProperty(this.relationName))throw new xe("Given value is a string representation of alias property");const[t,n]=this.relationName.split("."),r=this.expressionMap.findAliasByName(t).metadata.findRelationWithPropertyPath(n);if(!r)throw new xe(`Relation with property path ${n} in entity was not found.`);return r}get metadata(){if(!Tr.isAliasProperty(this.relationName))throw new xe("Given value is a string representation of alias property");const t=this.relationName.split(".")[0];return this.expressionMap.findAliasByName(t).metadata}get mapToPropertyPropertyName(){return this.mapToProperty.split(".")[1]}}class ox{constructor(t){var n;this.connection=t,this.relationLoadStrategy="join",this.queryEntity=!1,this.aliases=[],this.queryType="select",this.selects=[],this.maxExecutionTime=0,this.selectDistinct=!1,this.selectDistinctOn=[],this.extraReturningColumns=[],this.onConflict="",this.onIgnore=!1,this.joinAttributes=[],this.relationIdAttributes=[],this.relationCountAttributes=[],this.wheres=[],this.havings=[],this.orderBys={},this.groupBys=[],this.withDeleted=!1,this.parameters={},this.disableEscaping=!0,this.enableRelationIdValues=!1,this.extraAppendedAndWhereCondition="",this.subQuery=!1,this.aliasNamePrefixingEnabled=!0,this.options=[],this.insertColumns=[],this.whereEntities=[],this.updateEntity=!0,this.callListeners=!0,this.useTransaction=!1,this.nativeParameters={},this.locallyGenerated={},this.commonTableExpressions=[],t.options.relationLoadStrategy&&(this.relationLoadStrategy=t.options.relationLoadStrategy),this.timeTravel=((n=t.options)==null?void 0:n.timeTravelQueries)||!1}get allOrderBys(){if(!Object.keys(this.orderBys).length&&this.mainAlias.hasMetadata&&this.options.indexOf("disable-global-order")===-1){const t=this.mainAlias.metadata.orderBy||{};return Object.keys(t).reduce((n,r)=>(n[this.mainAlias.name+"."+r]=t[r],n),{})}return this.orderBys}setMainAlias(t){return this.mainAlias=t,t}createAlias(t){let n=t.name;!n&&t.tablePath&&(n=t.tablePath),!n&&typeof t.target=="function"&&(n=t.target.name),!n&&typeof t.target=="string"&&(n=t.target);const r=new eI;return r.type=t.type,n&&(r.name=n),t.metadata&&(r.metadata=t.metadata),t.target&&!r.hasMetadata&&(r.metadata=this.connection.getMetadata(t.target)),t.tablePath&&(r.tablePath=t.tablePath),t.subQuery&&(r.subQuery=t.subQuery),this.aliases.push(r),r}findAliasByName(t){const n=this.aliases.find(r=>r.name===t);if(!n)throw new xe(`"${t}" alias was not found. Maybe you forgot to join it?`);return n}findColumnByAliasExpression(t){const[n,r]=t.split(".");return this.findAliasByName(n).metadata.findColumnWithPropertyName(r)}get relationMetadata(){if(!this.mainAlias)throw new xe("Entity to work with is not specified!");const t=this.mainAlias.metadata.findRelationWithPropertyPath(this.relationPropertyPath);if(!t)throw new xe(`Relation ${this.relationPropertyPath} was not found in entity ${this.mainAlias.name}`);return t}clone(){const t=new ox(this.connection);return t.queryType=this.queryType,t.selects=this.selects.map(n=>n),t.maxExecutionTime=this.maxExecutionTime,t.selectDistinct=this.selectDistinct,t.selectDistinctOn=this.selectDistinctOn,this.aliases.forEach(n=>t.aliases.push(new eI(n))),t.relationLoadStrategy=this.relationLoadStrategy,t.mainAlias=this.mainAlias,t.valuesSet=this.valuesSet,t.returning=this.returning,t.onConflict=this.onConflict,t.onIgnore=this.onIgnore,t.onUpdate=this.onUpdate,t.joinAttributes=this.joinAttributes.map(n=>new hI(this.connection,this,n)),t.relationIdAttributes=this.relationIdAttributes.map(n=>new nx(this,n)),t.relationCountAttributes=this.relationCountAttributes.map(n=>new rx(this,n)),t.wheres=this.wheres.map(n=>({...n})),t.havings=this.havings.map(n=>({...n})),t.orderBys=Object.assign({},this.orderBys),t.groupBys=this.groupBys.map(n=>n),t.limit=this.limit,t.offset=this.offset,t.skip=this.skip,t.take=this.take,t.lockMode=this.lockMode,t.onLocked=this.onLocked,t.lockVersion=this.lockVersion,t.lockTables=this.lockTables,t.withDeleted=this.withDeleted,t.parameters=Object.assign({},this.parameters),t.disableEscaping=this.disableEscaping,t.enableRelationIdValues=this.enableRelationIdValues,t.extraAppendedAndWhereCondition=this.extraAppendedAndWhereCondition,t.subQuery=this.subQuery,t.aliasNamePrefixingEnabled=this.aliasNamePrefixingEnabled,t.cache=this.cache,t.cacheId=this.cacheId,t.cacheDuration=this.cacheDuration,t.relationPropertyPath=this.relationPropertyPath,t.of=this.of,t.insertColumns=this.insertColumns,t.whereEntities=this.whereEntities,t.updateEntity=this.updateEntity,t.callListeners=this.callListeners,t.useTransaction=this.useTransaction,t.timeTravel=this.timeTravel,t.nativeParameters=Object.assign({},this.nativeParameters),t.comment=this.comment,t.commonTableExpressions=this.commonTableExpressions.map(n=>({alias:n.alias,queryBuilder:typeof n.queryBuilder=="string"?n.queryBuilder:n.queryBuilder.clone(),options:n.options})),t}}class mI{constructor(t){this["@instanceof"]=Symbol.for("Brackets"),this.whereFactory=t}}class ax{static transformFrom(t,n){return Array.isArray(t)?t.slice().reverse().reduce((r,o)=>o.from(r),n):t.from(n)}static transformTo(t,n){return Array.isArray(t)?t.reduce((r,o)=>o.to(r),n):t.to(n)}}class ml{constructor(t,n,r=!0,o=!1,a,i){this["@instanceof"]=Symbol.for("FindOperator"),this._type=t,this._value=n,this._useParameter=r,this._multipleParameters=o,this._getSql=a,this._objectLiteralParameters=i}get useParameter(){return dt.isFindOperator(this._value)?this._value.useParameter:this._useParameter}get multipleParameters(){return dt.isFindOperator(this._value)?this._value.multipleParameters:this._multipleParameters}get type(){return this._type}get value(){return dt.isFindOperator(this._value)?this._value.value:this._value}get objectLiteralParameters(){return dt.isFindOperator(this._value)?this._value.objectLiteralParameters:this._objectLiteralParameters}get child(){if(dt.isFindOperator(this._value))return this._value}get getSql(){return dt.isFindOperator(this._value)?this._value.getSql:this._getSql}transformValue(t){this._value instanceof ml?this._value.transformValue(t):this._value=Array.isArray(this._value)&&this._multipleParameters?this._value.map(n=>t&&ax.transformTo(t,n)):ax.transformTo(t,this._value)}}function mo(e){return new ml("in",e,!0,!0)}const Jte=/[.*+\-?^${}()|[\]\\]/g,Zte=e=>e.replace(Jte,"\\$&");class Nt{constructor(t,n){this["@instanceof"]=Symbol.for("QueryBuilder"),this.parameterIndex=0,dt.isDataSource(t)?(this.connection=t,this.queryRunner=n,this.expressionMap=new ox(this.connection)):(this.connection=t.connection,this.queryRunner=t.queryRunner,this.expressionMap=t.expressionMap.clone())}static registerQueryBuilderClass(t,n){Nt.queryBuilderRegistry[t]=n}get alias(){if(!this.expressionMap.mainAlias)throw new xe("Main alias is not set");return this.expressionMap.mainAlias.name}select(t,n){return this.expressionMap.queryType="select",Array.isArray(t)?this.expressionMap.selects=t.map(r=>({selection:r})):t&&(this.expressionMap.selects=[{selection:t,aliasName:n}]),dt.isSelectQueryBuilder(this)?this:Nt.queryBuilderRegistry.SelectQueryBuilder(this)}insert(){return this.expressionMap.queryType="insert",dt.isInsertQueryBuilder(this)?this:Nt.queryBuilderRegistry.InsertQueryBuilder(this)}update(t,n){const r=n||t;if(t=dt.isEntitySchema(t)?t.options.name:t,typeof t=="function"||typeof t=="string"){const o=this.createFromAlias(t);this.expressionMap.setMainAlias(o)}return this.expressionMap.queryType="update",this.expressionMap.valuesSet=r,dt.isUpdateQueryBuilder(this)?this:Nt.queryBuilderRegistry.UpdateQueryBuilder(this)}delete(){return this.expressionMap.queryType="delete",dt.isDeleteQueryBuilder(this)?this:Nt.queryBuilderRegistry.DeleteQueryBuilder(this)}softDelete(){return this.expressionMap.queryType="soft-delete",dt.isSoftDeleteQueryBuilder(this)?this:Nt.queryBuilderRegistry.SoftDeleteQueryBuilder(this)}restore(){return this.expressionMap.queryType="restore",dt.isSoftDeleteQueryBuilder(this)?this:Nt.queryBuilderRegistry.SoftDeleteQueryBuilder(this)}relation(t,n){const r=arguments.length===2?t:void 0,o=arguments.length===2?n:t;if(this.expressionMap.queryType="relation",this.expressionMap.relationPropertyPath=o,r){const a=this.createFromAlias(r);this.expressionMap.setMainAlias(a)}return dt.isRelationQueryBuilder(this)?this:Nt.queryBuilderRegistry.RelationQueryBuilder(this)}hasRelation(t,n){const r=this.connection.getMetadata(t);return(Array.isArray(n)?n:[n]).every(o=>!!r.findRelationWithPropertyPath(o))}hasParameter(t){var n;return((n=this.parentQueryBuilder)==null?void 0:n.hasParameter(t))||t in this.expressionMap.parameters}setParameter(t,n){if(typeof n=="function")throw new xe(`Function parameter isn't supported in the parameters. Please check "${t}" parameter.`);if(!t.match(/^([A-Za-z0-9_.]+)$/))throw new xe("QueryBuilder parameter keys may only contain numbers, letters, underscores, or periods.");return this.parentQueryBuilder&&this.parentQueryBuilder.setParameter(t,n),this.expressionMap.parameters[t]=n,this}setParameters(t){for(const[n,r]of Object.entries(t))this.setParameter(n,r);return this}createParameter(t){let n;do n=`orm_param_${this.parameterIndex++}`;while(this.hasParameter(n));return this.setParameter(n,t),`:${n}`}setNativeParameters(t){return this.parentQueryBuilder&&this.parentQueryBuilder.setNativeParameters(t),Object.keys(t).forEach(n=>{this.expressionMap.nativeParameters[n]=t[n]}),this}getParameters(){const t=Object.assign({},this.expressionMap.parameters);if(this.expressionMap.mainAlias&&this.expressionMap.mainAlias.hasMetadata){const n=this.expressionMap.mainAlias.metadata;if(n.discriminatorColumn&&n.parentEntityMetadata){const r=n.childEntityMetadatas.filter(o=>o.discriminatorColumn).map(o=>o.discriminatorValue);r.push(n.discriminatorValue),t.discriminatorColumnValues=r}}return t}printSql(){const[t,n]=this.getQueryAndParameters();return this.connection.logger.logQuery(t,n),this}getSql(){return this.getQueryAndParameters()[0]}getQueryAndParameters(){const t=this.getQuery(),n=this.getParameters();return this.connection.driver.escapeQueryWithParameters(t,n,this.expressionMap.nativeParameters)}async execute(){const[t,n]=this.getQueryAndParameters(),r=this.obtainQueryRunner();try{return await r.query(t,n)}finally{r!==this.queryRunner&&await r.release()}}createQueryBuilder(t){return new this.constructor(this.connection,t??this.queryRunner)}clone(){return new this.constructor(this)}comment(t){return this.expressionMap.comment=t,this}disableEscaping(){return this.expressionMap.disableEscaping=!1,this}escape(t){return this.expressionMap.disableEscaping?this.connection.driver.escape(t):t}setQueryRunner(t){return this.queryRunner=t,this}callListeners(t){return this.expressionMap.callListeners=t,this}useTransaction(t){return this.expressionMap.useTransaction=t,this}addCommonTableExpression(t,n,r){return this.expressionMap.commonTableExpressions.push({queryBuilder:t,alias:n,options:r||{}}),this}getTableName(t){return t.split(".").map(n=>n===""?n:this.escape(n)).join(".")}getMainTableName(){if(!this.expressionMap.mainAlias)throw new xe('Entity where values should be inserted is not specified. Call "qb.into(entity)" method to specify it.');return this.expressionMap.mainAlias.hasMetadata?this.expressionMap.mainAlias.metadata.tablePath:this.expressionMap.mainAlias.tablePath}createFromAlias(t,n){if(this.connection.hasMetadata(t)){const r=this.connection.getMetadata(t);return this.expressionMap.createAlias({type:"from",name:n,metadata:this.connection.getMetadata(t),tablePath:r.tablePath})}else{if(typeof t=="string"){const a=t.substr(0,1)==="("&&t.substr(-1)===")";return this.expressionMap.createAlias({type:"from",name:n,tablePath:a?void 0:t,subQuery:a?t:void 0})}const r=t(this.subQuery());this.setParameters(r.getParameters());const o=r.getQuery();return this.expressionMap.createAlias({type:"from",name:n,subQuery:o})}}replacePropertyNames(t){return t}replacePropertyNamesForTheWholeQuery(t){const n={};for(const a of this.expressionMap.aliases){if(!a.hasMetadata)continue;const i=this.expressionMap.aliasNamePrefixingEnabled&&a.name?`${a.name}.`:"";n[i]||(n[i]={});for(const s of a.metadata.relations)s.joinColumns.length>0&&(n[i][s.propertyPath]=s.joinColumns[0].databaseName);for(const s of a.metadata.relations){const c=[...s.joinColumns,...s.inverseJoinColumns];for(const l of c){const u=`${s.propertyPath}.${l.referencedColumn.propertyPath}`;n[i][u]=l.databaseName}}for(const s of a.metadata.columns)n[i][s.databaseName]=s.databaseName;for(const s of a.metadata.columns)n[i][s.propertyName]=s.databaseName;for(const s of a.metadata.columns)n[i][s.propertyPath]=s.databaseName}const r=Object.keys(n),o=r.map(a=>Zte(a)).join("|");return r.length>0&&(t=t.replace(new RegExp(`([ =(]|^.{0})${o?"("+o+")":""}([^ =(),]+)(?=[ =),]|.{0}$)`,"gm"),(...a)=>{let i,s,c;if(o){if(i=a[0],s=a[1],c=a[3],n[a[2]][c])return`${s}${this.escape(a[2].substring(0,a[2].length-1))}.${this.escape(n[a[2]][c])}`}else if(i=a[0],s=a[1],c=a[2],n[""][c])return`${s}${this.escape(n[""][c])}`;return i})),t}createComment(){return this.expressionMap.comment?`/* ${this.expressionMap.comment.replace(/\*\//g,"")} */ `:""}createTimeTravelQuery(){return this.expressionMap.queryType==="select"&&this.expressionMap.timeTravel?` AS OF SYSTEM TIME ${this.expressionMap.timeTravel}`:""}createWhereExpression(){const t=[],n=this.createWhereClausesExpression(this.expressionMap.wheres);if(n.length>0&&n!=="1=1"&&t.push(this.replacePropertyNames(n)),this.expressionMap.mainAlias.hasMetadata){const o=this.expressionMap.mainAlias.metadata;if(this.expressionMap.queryType==="select"&&!this.expressionMap.withDeleted&&o.deleteDateColumn){const a=this.expressionMap.aliasNamePrefixingEnabled?this.expressionMap.mainAlias.name+"."+o.deleteDateColumn.propertyName:o.deleteDateColumn.propertyName,i=`${this.replacePropertyNames(a)} IS NULL`;t.push(i)}if(o.discriminatorColumn&&o.parentEntityMetadata){const a=this.expressionMap.aliasNamePrefixingEnabled?this.expressionMap.mainAlias.name+"."+o.discriminatorColumn.databaseName:o.discriminatorColumn.databaseName,i=`${this.replacePropertyNames(a)} IN (:...discriminatorColumnValues)`;t.push(i)}}if(this.expressionMap.extraAppendedAndWhereCondition){const o=this.replacePropertyNames(this.expressionMap.extraAppendedAndWhereCondition);t.push(o)}let r="";return r+=this.createTimeTravelQuery(),t.length?t.length===1?r+=` WHERE ${t[0]}`:r+=` WHERE ( ${t.join(" ) AND ( ")} )`:r+="",r}createReturningExpression(t){const n=this.getReturningColumns(),r=this.connection.driver;if(typeof this.expressionMap.returning!="string"&&this.expressionMap.extraReturningColumns.length>0&&r.isReturningSqlSupported(t)&&n.push(...this.expressionMap.extraReturningColumns.filter(o=>n.indexOf(o)===-1)),n.length){let o=n.map(a=>{const i=this.escape(a.databaseName);return r.options.type==="mssql"?this.expressionMap.queryType==="insert"||this.expressionMap.queryType==="update"||this.expressionMap.queryType==="soft-delete"||this.expressionMap.queryType==="restore"?"INSERTED."+i:this.escape(this.getMainTableName())+"."+i:i}).join(", ");return r.options.type==="oracle"&&(o+=" INTO "+n.map(a=>this.createParameter({type:r.columnTypeToNativeParameter(a.type),dir:r.oracle.BIND_OUT})).join(", ")),r.options.type==="mssql"&&(this.expressionMap.queryType==="insert"||this.expressionMap.queryType==="update")&&(o+=" INTO @OutputTable"),o}else if(typeof this.expressionMap.returning=="string")return this.expressionMap.returning;return""}getReturningColumns(){const t=[];return Array.isArray(this.expressionMap.returning)&&this.expressionMap.returning.forEach(n=>{this.expressionMap.mainAlias.hasMetadata&&t.push(...this.expressionMap.mainAlias.metadata.findColumnsWithPropertyPath(n))}),t}createWhereClausesExpression(t){return t.map((n,r)=>{const o=this.createWhereConditionExpression(n.condition);switch(n.type){case"and":return(r>0?"AND ":"")+`${this.connection.options.isolateWhereStatements?"(":""}${o}${this.connection.options.isolateWhereStatements?")":""}`;case"or":return(r>0?"OR ":"")+`${this.connection.options.isolateWhereStatements?"(":""}${o}${this.connection.options.isolateWhereStatements?")":""}`}return o}).join(" ").trim()}createWhereConditionExpression(t,n=!1){if(typeof t=="string")return t;if(Array.isArray(t))return t.length===0?"1=1":t.length===1&&!n?this.createWhereClausesExpression(t):"("+this.createWhereClausesExpression(t)+")";const{driver:r}=this.connection;switch(t.operator){case"lessThan":return`${t.parameters[0]} < ${t.parameters[1]}`;case"lessThanOrEqual":return`${t.parameters[0]} <= ${t.parameters[1]}`;case"arrayContains":return`${t.parameters[0]} @> ${t.parameters[1]}`;case"jsonContains":return`${t.parameters[0]} ::jsonb @> ${t.parameters[1]}`;case"arrayContainedBy":return`${t.parameters[0]} <@ ${t.parameters[1]}`;case"arrayOverlap":return`${t.parameters[0]} && ${t.parameters[1]}`;case"moreThan":return`${t.parameters[0]} > ${t.parameters[1]}`;case"moreThanOrEqual":return`${t.parameters[0]} >= ${t.parameters[1]}`;case"notEqual":return`${t.parameters[0]} != ${t.parameters[1]}`;case"equal":return`${t.parameters[0]} = ${t.parameters[1]}`;case"ilike":return r.options.type==="postgres"||r.options.type==="cockroachdb"?`${t.parameters[0]} ILIKE ${t.parameters[1]}`:`UPPER(${t.parameters[0]}) LIKE UPPER(${t.parameters[1]})`;case"like":return`${t.parameters[0]} LIKE ${t.parameters[1]}`;case"between":return`${t.parameters[0]} BETWEEN ${t.parameters[1]} AND ${t.parameters[2]}`;case"in":return t.parameters.length<=1?"0=1":`${t.parameters[0]} IN (${t.parameters.slice(1).join(", ")})`;case"any":return r.options.type==="cockroachdb"?`${t.parameters[0]}::STRING = ANY(${t.parameters[1]}::STRING[])`:`${t.parameters[0]} = ANY(${t.parameters[1]})`;case"isNull":return`${t.parameters[0]} IS NULL`;case"not":return`NOT(${this.createWhereConditionExpression(t.condition)})`;case"brackets":return`${this.createWhereConditionExpression(t.condition,!0)}`;case"and":return"("+t.parameters.join(" AND ")+")";case"or":return"("+t.parameters.join(" OR ")+")"}throw new TypeError(`Unsupported FindOperator ${ml.constructor.name}`)}createCteExpression(){if(!this.hasCommonTableExpressions())return"";const t=this.connection.driver.cteCapabilities.requiresRecursiveHint;return"WITH "+this.expressionMap.commonTableExpressions.map(n=>{const r=typeof n.queryBuilder=="string"?n.queryBuilder:n.queryBuilder.getQuery();if(typeof n.queryBuilder!="string"){if(n.queryBuilder.hasCommonTableExpressions())throw new xe(`Nested CTEs aren't supported (CTE: ${n.alias})`);if(!this.connection.driver.cteCapabilities.writable&&!dt.isSelectQueryBuilder(n.queryBuilder))throw new xe(`Only select queries are supported in CTEs in ${this.connection.options.type} (CTE: ${n.alias})`);this.setParameters(n.queryBuilder.getParameters())}let o=this.escape(n.alias);if(n.options.columnNames){const s=n.options.columnNames.map(c=>this.escape(c));if(dt.isSelectQueryBuilder(n.queryBuilder)&&n.queryBuilder.expressionMap.selects.length&&n.options.columnNames.length!==n.queryBuilder.expressionMap.selects.length)throw new xe(`cte.options.columnNames length (${n.options.columnNames.length}) doesn't match subquery select list length ${n.queryBuilder.expressionMap.selects.length} (CTE: ${n.alias})`);o+=`(${s.join(", ")})`}const a=n.options.recursive&&t?"RECURSIVE":"";let i="";return this.connection.driver.cteCapabilities.materializedHint&&n.options.materialized!==void 0&&(i=n.options.materialized?"MATERIALIZED":"NOT MATERIALIZED"),[a,o,"AS",i,`(${r})`].filter(Boolean).join(" ")}).join(", ")+" "}getWhereInIdsCondition(t){const n=this.expressionMap.mainAlias.metadata,r=(Array.isArray(t)?t:[t]).map(o=>n.ensureEntityIdMap(o));if(!n.hasMultiplePrimaryKeys){const o=n.primaryColumns[0];if(!o.transformer&&!o.relationMetadata&&!o.embeddedMetadata)return{[o.propertyName]:mo(r.map(a=>o.getEntityValue(a,!1)))}}return new mI(o=>{for(const a of r)o.orWhere(new mI(i=>i.where(a)))})}getExistsCondition(t){const n=t.clone().orderBy().groupBy().offset(void 0).limit(void 0).skip(void 0).take(void 0).select("1").setOption("disable-global-order");return[`EXISTS (${n.getQuery()})`,n.getParameters()]}findColumnsForPropertyPath(t){let n=this.expressionMap.mainAlias;const r=[],o=t.split(".");for(;o.length>1;){const s=o[0];if(!(n!=null&&n.hasMetadata))break;if(n.metadata.hasEmbeddedWithPropertyPath(s)){o.unshift(`${o.shift()}.${o.shift()}`);continue}if(n.metadata.hasRelationWithPropertyPath(s)){const c=this.expressionMap.joinAttributes.find(l=>l.relationPropertyPath===s);if(!(c!=null&&c.alias)){const l=r.length>0?`${r.join(".")}.${s}`:s;throw new Error(`Cannot find alias for relation at ${l}`)}n=c.alias,r.push(...s.split(".")),o.shift();continue}break}if(!n)throw new Error(`Cannot find alias for property ${t}`);const a=o.join("."),i=n.metadata.findColumnsWithPropertyPath(a);if(!i.length)throw new Ar(t,n.metadata);return[n,r,i]}createPropertyPath(t,n,r=""){const o=[];for(const a of Object.keys(n)){const i=r?`${r}.${a}`:a;if(n[a]===null||typeof n[a]!="object"||dt.isFindOperator(n[a])){o.push(i);continue}if(t.hasEmbeddedWithPropertyPath(i)){const s=this.createPropertyPath(t,n[a],i);o.push(...s);continue}if(t.hasRelationWithPropertyPath(i)){const s=t.findRelationWithPropertyPath(i);if(s.relationType==="one-to-one"||s.relationType==="many-to-one"){const u=s.joinColumns.map(d=>d.referencedColumn).filter(d=>!!d);if(u.length>0&&u.every(d=>d.getEntityValue(n[a],!1))){o.push(i);continue}}if(s.relationType==="one-to-many"||s.relationType==="many-to-many")throw new Error(`Cannot query across ${s.relationType} for property ${i}`);const c=s.inverseEntityMetadata.primaryColumns;if(c.length>0&&c.every(u=>u.getEntityValue(n[a],!1))){const u=c.map(d=>`${i}.${d.propertyPath}`);o.push(...u);continue}const l=this.createPropertyPath(s.inverseEntityMetadata,n[a]).map(u=>`${i}.${u}`);o.push(...l);continue}o.push(i)}return o}*getPredicates(t){if(this.expressionMap.mainAlias.hasMetadata){const n=this.createPropertyPath(this.expressionMap.mainAlias.metadata,t);for(const r of n){const[o,a,i]=this.findColumnsForPropertyPath(r);for(const s of i){let c=t;for(const d of a){if(!c||!(d in c)){c={};break}c=c[d]}const l=this.expressionMap.aliasNamePrefixingEnabled?`${o.name}.${s.propertyPath}`:s.propertyPath,u=s.getEntityValue(c,!0);yield[l,u]}}}else for(const n of Object.keys(t)){const r=t[n];yield[this.expressionMap.aliasNamePrefixingEnabled?`${this.alias}.${n}`:n,r]}}getWherePredicateCondition(t,n){if(dt.isFindOperator(n)){let r=[];if(n.useParameter)if(n.objectLiteralParameters)this.setParameters(n.objectLiteralParameters);else if(n.multipleParameters)for(const o of n.value)r.push(this.createParameter(o));else r.push(this.createParameter(n.value));if(n.type==="raw")return n.getSql?n.getSql(t):{operator:"equal",parameters:[t,n.value]};if(n.type==="not")return n.child?{operator:n.type,condition:this.getWherePredicateCondition(t,n.child)}:{operator:"notEqual",parameters:[t,...r]};if(n.type==="and"){const o=n.value;return{operator:n.type,parameters:o.map(a=>this.createWhereConditionExpression(this.getWherePredicateCondition(t,a)))}}else if(n.type==="or"){const o=n.value;return{operator:n.type,parameters:o.map(a=>this.createWhereConditionExpression(this.getWherePredicateCondition(t,a)))}}else return{operator:n.type,parameters:[t,...r]}}else return{operator:"equal",parameters:[t,this.createParameter(n)]}}getWhereCondition(t){if(typeof t=="string")return t;if(dt.isBrackets(t)){const o=this.createQueryBuilder();return o.parentQueryBuilder=this,o.expressionMap.mainAlias=this.expressionMap.mainAlias,o.expressionMap.aliasNamePrefixingEnabled=this.expressionMap.aliasNamePrefixingEnabled,o.expressionMap.parameters=this.expressionMap.parameters,o.expressionMap.nativeParameters=this.expressionMap.nativeParameters,o.expressionMap.wheres=[],t.whereFactory(o),{operator:dt.isNotBrackets(t)?"not":"brackets",condition:o.expressionMap.wheres}}if(typeof t=="function")return t(this);const n=Array.isArray(t)?t:[t],r=[];for(const o of n){const a=[];for(const[i,s]of this.getPredicates(o))a.push({type:"and",condition:this.getWherePredicateCondition(i,s)});r.push({type:"or",condition:a})}return r.length===1?r[0].condition:r}obtainQueryRunner(){return this.queryRunner||this.connection.createQueryRunner()}hasCommonTableExpressions(){return this.expressionMap.commonTableExpressions.length>0}}Nt.queryBuilderRegistry={};class ene{static from(t){const n=new this;return n.raw=t.records,n.affected=t.affected,n}}class tne extends Nt{constructor(t,n){super(t,n),this["@instanceof"]=Symbol.for("DeleteQueryBuilder"),this.expressionMap.aliasNamePrefixingEnabled=!1}getQuery(){let t=this.createComment();return t+=this.createCteExpression(),t+=this.createDeleteExpression(),this.replacePropertyNamesForTheWholeQuery(t.trim())}async execute(){const[t,n]=this.getQueryAndParameters(),r=this.obtainQueryRunner();let o=!1;try{this.expressionMap.useTransaction===!0&&r.isTransactionActive===!1&&(await r.startTransaction(),o=!0),this.expressionMap.callListeners===!0&&this.expressionMap.mainAlias.hasMetadata&&await r.broadcaster.broadcast("BeforeRemove",this.expressionMap.mainAlias.metadata);const a=await r.query(t,n,!0),i=ene.from(a);return this.expressionMap.callListeners===!0&&this.expressionMap.mainAlias.hasMetadata&&await r.broadcaster.broadcast("AfterRemove",this.expressionMap.mainAlias.metadata),o&&await r.commitTransaction(),i}catch(a){if(o)try{await r.rollbackTransaction()}catch{}throw a}finally{r!==this.queryRunner&&await r.release()}}from(t,n){t=dt.isEntitySchema(t)?t.options.name:t;const r=this.createFromAlias(t,n);return this.expressionMap.setMainAlias(r),this}where(t,n){this.expressionMap.wheres=[];const r=this.getWhereCondition(t);return r&&(this.expressionMap.wheres=[{type:"simple",condition:r}]),n&&this.setParameters(n),this}andWhere(t,n){return this.expressionMap.wheres.push({type:"and",condition:this.getWhereCondition(t)}),n&&this.setParameters(n),this}orWhere(t,n){return this.expressionMap.wheres.push({type:"or",condition:this.getWhereCondition(t)}),n&&this.setParameters(n),this}whereInIds(t){return this.where(this.getWhereInIdsCondition(t))}andWhereInIds(t){return this.andWhere(this.getWhereInIdsCondition(t))}orWhereInIds(t){return this.orWhere(this.getWhereInIdsCondition(t))}output(t){return this.returning(t)}returning(t){if(!this.connection.driver.isReturningSqlSupported("delete"))throw new If;return this.expressionMap.returning=t,this}createDeleteExpression(){const t=this.getTableName(this.getMainTableName()),n=this.createWhereExpression(),r=this.createReturningExpression("delete");return r===""?`DELETE FROM ${t}${n}`:this.connection.driver.options.type==="mssql"?`DELETE FROM ${t} OUTPUT ${r}${n}`:`DELETE FROM ${t}${n} RETURNING ${r}`}}let Df;const nne=new Uint8Array(16);function rne(){if(!Df&&(Df=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Df))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Df(nne)}const Xt=[];for(let e=0;e<256;++e)Xt.push((e+256).toString(16).slice(1));function one(e,t=0){return Xt[e[t+0]]+Xt[e[t+1]]+Xt[e[t+2]]+Xt[e[t+3]]+"-"+Xt[e[t+4]]+Xt[e[t+5]]+"-"+Xt[e[t+6]]+Xt[e[t+7]]+"-"+Xt[e[t+8]]+Xt[e[t+9]]+"-"+Xt[e[t+10]]+Xt[e[t+11]]+Xt[e[t+12]]+Xt[e[t+13]]+Xt[e[t+14]]+Xt[e[t+15]]}const ane=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),yI={randomUUID:ane};function ine(e,t,n){if(yI.randomUUID&&!t&&!e)return yI.randomUUID();e=e||{};const r=e.random||(e.rng||rne)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,one(r)}class gI{constructor(){this.count=0,this.promises=[]}async wait(){return this.promises.length>0&&await Promise.all(this.promises),this}}class vI{constructor(){this.identifiers=[],this.generatedMaps=[]}static from(t){const n=new this;return n.raw=t.raw,n}}class ix{constructor(t,n){this.queryRunner=t,this.expressionMap=n}async update(t,n){const r=this.expressionMap.mainAlias.metadata;await Promise.all(n.map(async(o,a)=>{if(this.queryRunner.connection.driver.isReturningSqlSupported("update")){this.queryRunner.connection.driver.options.type==="oracle"&&Array.isArray(t.raw)&&this.expressionMap.extraReturningColumns.length>0&&(t.raw=t.raw.reduce((c,l,u)=>(c[this.expressionMap.extraReturningColumns[u].databaseName]=l[0],c),{}));const i=Array.isArray(t.raw)?t.raw[a]:t.raw,s=this.queryRunner.connection.driver.createGeneratedMap(r,i);s&&(this.queryRunner.manager.merge(r.target,o,s),t.generatedMaps.push(s))}else{const i=this.expressionMap.extraReturningColumns;if(i.length>0){const s=this.expressionMap.mainAlias.metadata.getEntityIdMap(o);if(!s)throw new xe("Cannot update entity because entity id is not set in the entity.");const c=await this.queryRunner.manager.createQueryBuilder().select(r.primaryColumns.map(l=>r.targetName+"."+l.propertyPath)).addSelect(i.map(l=>r.targetName+"."+l.propertyPath)).from(r.target,r.targetName).where(s).withDeleted().setOption("create-pojo").getOne();c&&(this.queryRunner.manager.merge(r.target,o,c),t.generatedMaps.push(c))}}}))}async insert(t,n){const r=this.expressionMap.mainAlias.metadata;let o=r.getInsertionReturningColumns();const a=this.queryRunner.connection.driver.isReturningSqlSupported("insert");o=o.filter(s=>s.isGenerated?a===!0:!0);const i=n.map((s,c)=>{this.queryRunner.connection.driver.options.type==="oracle"&&Array.isArray(t.raw)&&this.expressionMap.extraReturningColumns.length>0&&(t.raw=t.raw.reduce((d,f,p)=>(d[this.expressionMap.extraReturningColumns[p].databaseName]=f[0],d),{}));const l=Array.isArray(t.raw)?t.raw[c]:t.raw,u=this.queryRunner.connection.driver.createGeneratedMap(r,l,c,n.length)||{};return c in this.expressionMap.locallyGenerated&&this.queryRunner.manager.merge(r.target,u,this.expressionMap.locallyGenerated[c]),this.queryRunner.manager.merge(r.target,s,u),u});if(o.length>0&&!this.queryRunner.connection.driver.isReturningSqlSupported("insert")){const s=n.map(l=>{const u=r.getEntityIdMap(l);if(!u)throw new xe("Cannot update entity because entity id is not set in the entity.");return u}),c=await this.queryRunner.manager.createQueryBuilder().select(r.primaryColumns.map(l=>r.targetName+"."+l.propertyPath)).addSelect(o.map(l=>r.targetName+"."+l.propertyPath)).from(r.target,r.targetName).where(s).setOption("create-pojo").getMany();n.forEach((l,u)=>{this.queryRunner.manager.merge(r.target,i[u],c[u]),this.queryRunner.manager.merge(r.target,l,c[u])})}n.forEach((s,c)=>{const l=r.getEntityIdMap(s);t.identifiers.push(l),t.generatedMaps.push(i[c])})}getUpdationReturningColumns(){return this.expressionMap.mainAlias.metadata.columns.filter(t=>t.asExpression!==void 0||t.isUpdateDate||t.isVersion)}getSoftDeletionReturningColumns(){return this.expressionMap.mainAlias.metadata.columns.filter(t=>t.asExpression!==void 0||t.isUpdateDate||t.isVersion||t.isDeleteDate)}}class sne extends Nt{constructor(){super(...arguments),this["@instanceof"]=Symbol.for("InsertQueryBuilder")}getQuery(){let t=this.createComment();return t+=this.createCteExpression(),t+=this.createInsertExpression(),this.replacePropertyNamesForTheWholeQuery(t.trim())}async execute(){const t=this.getValueSets();if(t.length===0)return new vI;const n=this.obtainQueryRunner();let r=!1;try{if(this.expressionMap.useTransaction===!0&&n.isTransactionActive===!1&&(await n.startTransaction(),r=!0),this.expressionMap.callListeners===!0&&this.expressionMap.mainAlias.hasMetadata){const p=new gI;t.forEach(y=>{n.broadcaster.broadcastBeforeInsertEvent(p,this.expressionMap.mainAlias.metadata,y)}),await p.wait()}let o=null,a=null;const i=new ix(n,this.expressionMap),s=[];if(Array.isArray(this.expressionMap.returning)&&this.expressionMap.mainAlias.hasMetadata)for(const p of this.expressionMap.returning)s.push(...this.expressionMap.mainAlias.metadata.findColumnsWithPropertyPath(p));this.expressionMap.updateEntity===!0&&this.expressionMap.mainAlias.hasMetadata&&(t.length>1&&this.connection.driver.options.type==="oracle"||(this.expressionMap.extraReturningColumns=this.expressionMap.mainAlias.metadata.getInsertionReturningColumns()),s.push(...this.expressionMap.extraReturningColumns.filter(p=>!s.includes(p)))),s.length>0&&this.connection.driver.options.type==="mssql"&&(o=this.connection.driver.buildTableVariableDeclaration("@OutputTable",s),a="SELECT * FROM @OutputTable");const[c,l]=this.getQueryAndParameters(),u=[o,c,a].filter(p=>p!=null).join(`;

`),d=await n.query(u,l,!0),f=vI.from(d);if(this.expressionMap.updateEntity===!0&&this.expressionMap.mainAlias.hasMetadata&&await i.insert(f,t),this.expressionMap.callListeners===!0&&this.expressionMap.mainAlias.hasMetadata){const p=new gI;t.forEach(y=>{n.broadcaster.broadcastAfterInsertEvent(p,this.expressionMap.mainAlias.metadata,y)}),await p.wait()}return r&&await n.commitTransaction(),f}catch(o){if(r)try{await n.rollbackTransaction()}catch{}throw o}finally{n!==this.queryRunner&&await n.release()}}into(t,n){t=dt.isEntitySchema(t)?t.options.name:t;const r=this.createFromAlias(t);return this.expressionMap.setMainAlias(r),this.expressionMap.insertColumns=n||[],this}values(t){return this.expressionMap.valuesSet=t,this}output(t){return this.returning(t)}returning(t){if(!this.connection.driver.isReturningSqlSupported("insert"))throw new If;return this.expressionMap.returning=t,this}updateEntity(t){return this.expressionMap.updateEntity=t,this}onConflict(t){return this.expressionMap.onConflict=t,this}orIgnore(t=!0){return this.expressionMap.onIgnore=!!t,this}orUpdate(t,n,r){return Array.isArray(t)?(this.expressionMap.onUpdate={overwrite:t,conflict:n,skipUpdateIfNoValuesChanged:r==null?void 0:r.skipUpdateIfNoValuesChanged,indexPredicate:r==null?void 0:r.indexPredicate,upsertType:r==null?void 0:r.upsertType},this):(this.expressionMap.onUpdate={conflict:t==null?void 0:t.conflict_target,columns:t==null?void 0:t.columns,overwrite:t==null?void 0:t.overwrite,skipUpdateIfNoValuesChanged:r==null?void 0:r.skipUpdateIfNoValuesChanged,upsertType:r==null?void 0:r.upsertType},this)}createInsertExpression(){var i,s;const t=this.getTableName(this.getMainTableName()),n=this.createValuesExpression(),r=this.connection.driver.options.type==="oracle"&&this.getValueSets().length>1?null:this.createReturningExpression("insert"),o=this.createColumnNamesExpression();let a="INSERT ";if(((i=this.expressionMap.onUpdate)==null?void 0:i.upsertType)==="primary-key"&&(a="UPSERT "),(ye.isMySQLFamily(this.connection.driver)||this.connection.driver.options.type==="aurora-mysql")&&(a+=`${this.expressionMap.onIgnore?" IGNORE ":""}`),a+=`INTO ${t}`,this.alias!==this.getMainTableName()&&ye.isPostgresFamily(this.connection.driver)&&(a+=` AS "${this.alias}"`),o?a+=`(${o})`:!n&&(ye.isMySQLFamily(this.connection.driver)||this.connection.driver.options.type==="aurora-mysql")&&(a+="()"),r&&this.connection.driver.options.type==="mssql"&&(a+=` OUTPUT ${r}`),n?(this.connection.driver.options.type==="oracle"||this.connection.driver.options.type==="sap")&&this.getValueSets().length>1?a+=` ${n}`:a+=` VALUES ${n}`:ye.isMySQLFamily(this.connection.driver)||this.connection.driver.options.type==="aurora-mysql"?a+=" VALUES ()":a+=" DEFAULT VALUES",((s=this.expressionMap.onUpdate)==null?void 0:s.upsertType)!=="primary-key"){if(this.connection.driver.supportedUpsertTypes.includes("on-conflict-do-update")){if(this.expressionMap.onIgnore)a+=" ON CONFLICT DO NOTHING ";else if(this.expressionMap.onConflict)a+=` ON CONFLICT ${this.expressionMap.onConflict} `;else if(this.expressionMap.onUpdate){const{overwrite:c,columns:l,conflict:u,skipUpdateIfNoValuesChanged:d,indexPredicate:f}=this.expressionMap.onUpdate;let p="ON CONFLICT";if(Array.isArray(u)){if(p+=` ( ${u.map(m=>this.escape(m)).join(", ")} )`,f&&!ye.isPostgresFamily(this.connection.driver))throw new xe("indexPredicate option is not supported by the current database driver");f&&ye.isPostgresFamily(this.connection.driver)&&(p+=` WHERE ( ${f} )`)}else u&&(p+=` ON CONSTRAINT ${this.escape(u)}`);const y=[];Array.isArray(c)?y.push(...c.map(m=>`${this.escape(m)} = EXCLUDED.${this.escape(m)}`)):l&&y.push(...l.map(m=>`${this.escape(m)} = :${m}`)),y.length>0&&(a+=` ${p} DO UPDATE SET `,y.push(...this.expressionMap.mainAlias.metadata.columns.filter(m=>m.isUpdateDate&&!(c!=null&&c.includes(m.databaseName))&&!(this.connection.driver.options.type==="oracle"&&this.getValueSets().length>1||ye.isSQLiteFamily(this.connection.driver)||this.connection.driver.options.type==="sap"||this.connection.driver.options.type==="spanner")).map(m=>`${this.escape(m.databaseName)} = DEFAULT`)),a+=y.join(", "),a+=" "),Array.isArray(c)&&d&&ye.isPostgresFamily(this.connection.driver)&&(a+=" WHERE (",a+=c.map(m=>`${t}.${this.escape(m)} IS DISTINCT FROM EXCLUDED.${this.escape(m)}`).join(" OR "),a+=") ")}}else if(this.connection.driver.supportedUpsertTypes.includes("on-duplicate-key-update")){if(this.expressionMap.onUpdate){const{overwrite:c,columns:l}=this.expressionMap.onUpdate;Array.isArray(c)?(a+=" ON DUPLICATE KEY UPDATE ",a+=c.map(u=>`${this.escape(u)} = VALUES(${this.escape(u)})`).join(", "),a+=" "):Array.isArray(l)&&(a+=" ON DUPLICATE KEY UPDATE ",a+=l.map(u=>`${this.escape(u)} = :${u}`).join(", "),a+=" ")}}else if(this.expressionMap.onUpdate)throw new xe("onUpdate is not supported by the current database driver")}return r&&(ye.isPostgresFamily(this.connection.driver)||this.connection.driver.options.type==="oracle"||this.connection.driver.options.type==="cockroachdb"||ye.isMySQLFamily(this.connection.driver))&&(a+=` RETURNING ${r}`),this.connection.driver.options.type==="mssql"&&this.expressionMap.mainAlias.hasMetadata&&this.expressionMap.mainAlias.metadata.columns.filter(c=>this.expressionMap.insertColumns.length>0?this.expressionMap.insertColumns.indexOf(c.propertyPath)!==-1:c.isInsert).some(c=>this.isOverridingAutoIncrementBehavior(c))&&(a=`SET IDENTITY_INSERT ${t} ON; ${a}; SET IDENTITY_INSERT ${t} OFF`),a}getInsertedColumns(){return this.expressionMap.mainAlias.hasMetadata?this.expressionMap.mainAlias.metadata.columns.filter(t=>this.expressionMap.insertColumns.length?this.expressionMap.insertColumns.indexOf(t.propertyPath)!==-1:!(!t.isInsert||t.isGenerated&&t.generationStrategy==="increment"&&this.connection.driver.options.type!=="spanner"&&this.connection.driver.options.type!=="oracle"&&!ye.isSQLiteFamily(this.connection.driver)&&!ye.isMySQLFamily(this.connection.driver)&&this.connection.driver.options.type!=="aurora-mysql"&&!(this.connection.driver.options.type==="mssql"&&this.isOverridingAutoIncrementBehavior(t)))):[]}createColumnNamesExpression(){const t=this.getInsertedColumns();if(t.length>0)return t.map(n=>this.escape(n.databaseName)).join(", ");if(!this.expressionMap.mainAlias.hasMetadata&&!this.expressionMap.insertColumns.length){const n=this.getValueSets();if(n.length===1)return Object.keys(n[0]).map(r=>this.escape(r)).join(", ")}return this.expressionMap.insertColumns.map(n=>this.escape(n)).join(", ")}createValuesExpression(){const t=this.getValueSets(),n=this.getInsertedColumns();if(n.length>0){let r="";return t.forEach((o,a)=>{n.forEach((i,s)=>{s===0&&(this.connection.driver.options.type==="oracle"&&t.length>1||this.connection.driver.options.type==="sap"&&t.length>1?r+=" SELECT ":r+="(");let c=i.getEntityValue(o);if(typeof c!="function"&&(c=this.connection.driver.preparePersistentValue(c,i)),i.isVersion&&c===void 0)r+="1";else if(i.isDiscriminator)r+=this.createParameter(this.expressionMap.mainAlias.metadata.discriminatorValue);else if(i.isGenerated&&i.generationStrategy==="uuid"&&!this.connection.driver.isUUIDGenerationSupported()&&c===void 0)c=ine(),r+=this.createParameter(c),a in this.expressionMap.locallyGenerated||(this.expressionMap.locallyGenerated[a]={}),i.setEntityValue(this.expressionMap.locallyGenerated[a],c);else if(c===void 0)this.connection.driver.options.type==="oracle"&&t.length>1||ye.isSQLiteFamily(this.connection.driver)||this.connection.driver.options.type==="sap"||this.connection.driver.options.type==="spanner"?i.default!==void 0&&i.default!==null?r+=this.connection.driver.normalizeDefault(i):r+="NULL":r+="DEFAULT";else if(c===null&&this.connection.driver.options.type==="spanner")r+="NULL";else if(typeof c=="function")r+=c();else{this.connection.driver.options.type==="mssql"&&(c=this.connection.driver.parametrizeValue(i,c));const l=this.createParameter(c);if((ye.isMySQLFamily(this.connection.driver)||this.connection.driver.options.type==="aurora-mysql")&&this.connection.driver.spatialTypes.indexOf(i.type)!==-1){const u=this.connection.driver.options.legacySpatialSupport?"GeomFromText":"ST_GeomFromText";i.srid!=null?r+=`${u}(${l}, ${i.srid})`:r+=`${u}(${l})`}else ye.isPostgresFamily(this.connection.driver)&&this.connection.driver.spatialTypes.indexOf(i.type)!==-1?i.srid!=null?r+=`ST_SetSRID(ST_GeomFromGeoJSON(${l}), ${i.srid})::${i.type}`:r+=`ST_GeomFromGeoJSON(${l})::${i.type}`:this.connection.driver.options.type==="mssql"&&this.connection.driver.spatialTypes.indexOf(i.type)!==-1?r+=i.type+"::STGeomFromText("+l+", "+(i.srid||"0")+")":r+=l}s===n.length-1?a===t.length-1?this.connection.driver.options.type==="oracle"&&t.length>1?r+=" FROM DUAL ":this.connection.driver.options.type==="sap"&&t.length>1?r+=" FROM dummy ":r+=")":this.connection.driver.options.type==="oracle"&&t.length>1?r+=" FROM DUAL UNION ALL ":this.connection.driver.options.type==="sap"&&t.length>1?r+=" FROM dummy UNION ALL ":r+="), ":r+=", "})}),r==="()"?"":r}else{let r="";return t.forEach((o,a)=>{Object.keys(o).forEach((i,s)=>{s===0&&(r+="(");const c=o[i];typeof c=="function"?r+=c():c===void 0?this.connection.driver.options.type==="oracle"&&t.length>1||ye.isSQLiteFamily(this.connection.driver)||this.connection.driver.options.type==="sap"||this.connection.driver.options.type==="spanner"?r+="NULL":r+="DEFAULT":c===null&&this.connection.driver.options.type==="spanner"||(r+=this.createParameter(c)),s===Object.keys(o).length-1?a===t.length-1?r+=")":r+="), ":r+=", "})}),r==="()"?"":r}}getValueSets(){if(Array.isArray(this.expressionMap.valuesSet))return this.expressionMap.valuesSet;if(It.isObject(this.expressionMap.valuesSet))return[this.expressionMap.valuesSet];throw new Fte}isOverridingAutoIncrementBehavior(t){return t.isPrimary&&t.isGenerated&&t.generationStrategy==="increment"&&this.getValueSets().some(n=>t.getEntityValue(n)!==void 0&&t.getEntityValue(n)!==null)}}class bI{constructor(t,n){this.queryBuilder=t,this.expressionMap=n}async update(t){const n=this.expressionMap.relationMetadata;if(n.isManyToOne||n.isOneToOneOwner){const r=n.joinColumns.reduce((o,a)=>{const i=It.isObject(t)?a.referencedColumn.getEntityValue(t):t;return a.setEntityValue(o,i),o},{});if(!this.expressionMap.of||Array.isArray(this.expressionMap.of)&&!this.expressionMap.of.length)return;await this.queryBuilder.createQueryBuilder().update(n.entityMetadata.target).set(r).whereInIds(this.expressionMap.of).execute()}else if((n.isOneToOneNotOwner||n.isOneToMany)&&t===null){const r={};n.inverseRelation.joinColumns.forEach(c=>{r[c.propertyName]=null});const o=Array.isArray(this.expressionMap.of)?this.expressionMap.of:[this.expressionMap.of],a={},i=[];o.forEach((c,l)=>{n.inverseRelation.joinColumns.map((u,d)=>{const f="joinColumn_"+l+"_"+d;a[f]=It.isObject(c)?u.referencedColumn.getEntityValue(c):c,i.push(`${u.propertyPath} = :${f}`)})});const s=i.map(c=>"("+c+")").join(" OR ");if(!s)return;await this.queryBuilder.createQueryBuilder().update(n.inverseEntityMetadata.target).set(r).where(s).setParameters(a).execute()}else if(n.isOneToOneNotOwner||n.isOneToMany){if(Array.isArray(this.expressionMap.of))throw new xe("You cannot update relations of multiple entities with the same related object. Provide a single entity into .of method.");const r=this.expressionMap.of,o=n.inverseRelation.joinColumns.reduce((a,i)=>{const s=It.isObject(r)?i.referencedColumn.getEntityValue(r):r;return i.setEntityValue(a,s),a},{});if(!t||Array.isArray(t)&&!t.length)return;await this.queryBuilder.createQueryBuilder().update(n.inverseEntityMetadata.target).set(o).whereInIds(t).execute()}else{const r=n.junctionEntityMetadata,o=Array.isArray(this.expressionMap.of)?this.expressionMap.of:[this.expressionMap.of],a=Array.isArray(t)?t:[t],i=n.isManyToManyOwner?o:a,s=n.isManyToManyOwner?a:o,c=[];if(i.forEach(l=>{s.forEach(u=>{const d={};r.ownerColumns.forEach(f=>{d[f.databaseName]=It.isObject(l)?f.referencedColumn.getEntityValue(l):l}),r.inverseColumns.forEach(f=>{d[f.databaseName]=It.isObject(u)?f.referencedColumn.getEntityValue(u):u}),c.push(d)})}),!c.length)return;this.queryBuilder.connection.driver.options.type==="oracle"||this.queryBuilder.connection.driver.options.type==="sap"?await Promise.all(c.map(l=>this.queryBuilder.createQueryBuilder().insert().into(r.tableName).values(l).execute())):await this.queryBuilder.createQueryBuilder().insert().into(r.tableName).values(c).execute()}}}class cne{constructor(t,n){this.queryBuilder=t,this.expressionMap=n}async remove(t){const n=this.expressionMap.relationMetadata;if(n.isOneToMany){const r=Array.isArray(this.expressionMap.of)?this.expressionMap.of:[this.expressionMap.of],o=Array.isArray(t)?t:[t],a={};n.inverseRelation.joinColumns.forEach(l=>{a[l.propertyName]=null});const i={},s=[];r.forEach((l,u)=>{s.push(...o.map((d,f)=>[...n.inverseRelation.joinColumns.map((p,y)=>{const m="joinColumn_"+u+"_"+f+"_"+y;return i[m]=It.isObject(l)?p.referencedColumn.getEntityValue(l):l,`${p.propertyPath} = :${m}`}),...n.inverseRelation.entityMetadata.primaryColumns.map((p,y)=>{const m="primaryColumn_"+f+"_"+f+"_"+y;return i[m]=It.isObject(d)?p.getEntityValue(d):d,`${p.propertyPath} = :${m}`})].join(" AND ")))});const c=s.map(l=>"("+l+")").join(" OR ");if(!c)return;await this.queryBuilder.createQueryBuilder().update(n.inverseEntityMetadata.target).set(a).where(c).setParameters(i).execute()}else{const r=n.junctionEntityMetadata,o=Array.isArray(this.expressionMap.of)?this.expressionMap.of:[this.expressionMap.of],a=Array.isArray(t)?t:[t],i=n.isManyToManyOwner?o:a,s=n.isManyToManyOwner?a:o,c={},l=[];i.forEach((d,f)=>{l.push(...s.map((p,y)=>[...r.ownerColumns.map((m,v)=>{const b="firstValue_"+f+"_"+y+"_"+v;return c[b]=It.isObject(d)?m.referencedColumn.getEntityValue(d):d,`${m.databaseName} = :${b}`}),...r.inverseColumns.map((m,v)=>{const b="secondValue_"+f+"_"+y+"_"+v;return c[b]=It.isObject(p)?m.referencedColumn.getEntityValue(p):p,`${m.databaseName} = :${b}`})].join(" AND ")))});const u=l.map(d=>"("+d+")").join(" OR ");await this.queryBuilder.createQueryBuilder().delete().from(r.tableName).where(u).setParameters(c).execute()}}}class lne extends Nt{constructor(){super(...arguments),this["@instanceof"]=Symbol.for("RelationQueryBuilder")}getQuery(){return""}of(t){return this.expressionMap.of=t,this}async set(t){const n=this.expressionMap.relationMetadata;if(!this.expressionMap.of)throw new xe("Entity whose relation needs to be set is not set. Use .of method to define whose relation you want to set.");if(n.isManyToMany||n.isOneToMany)throw new xe(`Set operation is only supported for many-to-one and one-to-one relations. However given "${n.propertyPath}" has ${n.relationType} relation. Use .add() method instead.`);if(n.joinColumns&&n.joinColumns.length>1&&(!It.isObject(t)||Object.keys(t).length<n.joinColumns.length))throw new xe('Value to be set into the relation must be a map of relation ids, for example: .set({ firstName: "...", lastName: "..." })');return new bI(this,this.expressionMap).update(t)}async add(t){if(Array.isArray(t)&&t.length===0)return;const n=this.expressionMap.relationMetadata;if(!this.expressionMap.of)throw new xe("Entity whose relation needs to be set is not set. Use .of method to define whose relation you want to set.");if(n.isManyToOne||n.isOneToOne)throw new xe(`Add operation is only supported for many-to-many and one-to-many relations. However given "${n.propertyPath}" has ${n.relationType} relation. Use .set() method instead.`);if(n.joinColumns&&n.joinColumns.length>1&&(!It.isObject(t)||Object.keys(t).length<n.joinColumns.length))throw new xe('Value to be set into the relation must be a map of relation ids, for example: .set({ firstName: "...", lastName: "..." })');return new bI(this,this.expressionMap).update(t)}async remove(t){if(Array.isArray(t)&&t.length===0)return;const n=this.expressionMap.relationMetadata;if(!this.expressionMap.of)throw new xe("Entity whose relation needs to be set is not set. Use .of method to define whose relation you want to set.");if(n.isManyToOne||n.isOneToOne)throw new xe(`Add operation is only supported for many-to-many and one-to-many relations. However given "${n.propertyPath}" has ${n.relationType} relation. Use .set(null) method instead.`);return new cne(this,this.expressionMap).remove(t)}async addAndRemove(t,n){await this.remove(n),await this.add(t)}async loadOne(){return this.loadMany().then(t=>t[0])}async loadMany(){let t=this.expressionMap.of;if(!It.isObject(t)){const n=this.expressionMap.mainAlias.metadata;if(n.hasMultiplePrimaryKeys)throw new xe("Cannot load entity because only one primary key was specified, however entity contains multiple primary keys");t=n.primaryColumns[0].createValueMap(t)}return this.connection.relationLoader.load(this.expressionMap.relationMetadata,t,this.queryRunner)}}class Gt{static chunk(t,n){return Array.from(Array(Math.ceil(t.length/n)),(r,o)=>t.slice(o*n,o*n+n))}static splitClassesAndStrings(t){return[t.filter(n=>typeof n!="string"),t.filter(n=>typeof n=="string")]}static groupBy(t,n){return t.reduce((r,o)=>{const a=n(o);let i=r.find(s=>s.id===a);return i||(i={id:a,items:[]},r.push(i)),i.items.push(o),r},[])}static uniq(t,n){return t.reduce((r,o)=>{let a=!1;if(typeof n=="function"){const i=n(o);a=!!r.find(s=>n(s)===i)}else typeof n=="string"?a=!!r.find(i=>i[n]===o[n]):a=r.indexOf(o)!==-1;return a||r.push(o),r},[])}static isPlainObject(t){return t==null?!1:!t.constructor||t.constructor===Object}static mergeArrayKey(t,n,r,o){if(o.has(r)){t[n]=o.get(r);return}if(!(r instanceof Promise)){if(!this.isPlainObject(r)&&!Array.isArray(r)){t[n]=r;return}t[n]||(t[n]=Array.isArray(r)?[]:{}),o.set(r,t[n]),this.merge(t[n],r,o),o.delete(r)}}static mergeObjectKey(t,n,r,o){if(o.has(r)){Object.assign(t,{[n]:o.get(r)});return}if(!(r instanceof Promise)){if(!this.isPlainObject(r)&&!Array.isArray(r)){Object.assign(t,{[n]:r});return}t[n]||Object.assign(t,{[n]:Array.isArray(r)?[]:{}}),o.set(r,t[n]),this.merge(t[n],r,o),o.delete(r)}}static merge(t,n,r=new Map){if(this.isPlainObject(t)&&this.isPlainObject(n))for(const o of Object.keys(n))o!=="__proto__"&&this.mergeObjectKey(t,o,n[o],r);if(Array.isArray(t)&&Array.isArray(n))for(let o=0;o<n.length;o++)this.mergeArrayKey(t,o,n[o],r)}static mergeDeep(t,...n){if(!n.length)return t;for(const r of n)Gt.merge(t,r);return t}static deepCompare(...t){let n,r,o,a;if(arguments.length<1)return!0;for(n=1,r=arguments.length;n<r;n++)if(o=[],a=[],!this.compare2Objects(o,a,arguments[0],arguments[n]))return!1;return!0}static deepValue(t,n){const r=n.split(".");for(let o=0,a=r.length;o<a;o++)t=t[r[o]];return t}static replaceEmptyObjectsWithBooleans(t){for(let n in t)t[n]&&typeof t[n]=="object"&&(Object.keys(t[n]).length===0?t[n]=!0:this.replaceEmptyObjectsWithBooleans(t[n]))}static propertyPathsToTruthyObject(t){let n={};for(let r of t){const o=r.split(".");if(!o.length)continue;(!n[o[0]]||n[o[0]]===!0)&&(n[o[0]]={});let a=n[o[0]];for(let[i,s]of o.entries())i!==0&&(a[s]?a=a[s]:i===o.length-1?(a[s]={},a=null):(a[s]={},a=a[s]))}return this.replaceEmptyObjectsWithBooleans(n),n}static compareIds(t,n){return t==null||n===void 0||n===null?!1:(typeof t.id=="string"&&typeof n.id=="string"||typeof t.id=="number"&&typeof n.id=="number")&&Object.keys(t).length===1&&Object.keys(n).length===1?t.id===n.id:Gt.deepCompare(t,n)}static toBoolean(t){return typeof t=="boolean"?t:typeof t=="string"?t==="true"||t==="1":typeof t=="number"?t>0:!1}static zipObject(t,n){return t.reduce((r,o,a)=>(r[o]=n[a],r),{})}static isArraysEqual(t,n){return t.length!==n.length?!1:t.every(r=>n.indexOf(r)!==-1)}static areMutuallyExclusive(...t){return!t.some(n=>{const r=t.filter(o=>o!==n);return n.some(o=>r.some(a=>a.includes(o)))})}static parseSqlCheckExpression(t,n){const r=t.match(new RegExp(`"${n}" varchar CHECK\\s*\\(\\s*"${n}"\\s+IN\\s*`));if(r&&r.index){const o=t.substring(r.index+r[0].length);let a="",i="";const s=[];for(let c=0;c<o.length;c++){const l=o[c];switch(l){case",":a==""?(s.push(i),i=""):i+=l;break;case"'":a==l?o[c+1]===l?(i+=l,c+=1):a="":a=l;break;case")":if(a=="")return s.push(i),s;i+=l;break;default:a!=""&&(i+=l)}}}}static compare2Objects(t,n,r,o){let a;if(Number.isNaN(r)&&Number.isNaN(o)||r===o)return!0;if(r===null||o===null||r===void 0||o===void 0)return!1;if((typeof r.equals=="function"||typeof r.equals=="function")&&r.equals(o))return!0;if(typeof r=="function"&&typeof o=="function"||r instanceof Date&&o instanceof Date||r instanceof RegExp&&o instanceof RegExp||typeof r=="string"&&typeof o=="string"||typeof r=="number"&&typeof o=="number")return r.toString()===o.toString();if(!(typeof r=="object"&&typeof o=="object")||Object.prototype.isPrototypeOf.call(r,o)||Object.prototype.isPrototypeOf.call(o,r)||r.constructor!==o.constructor||r.prototype!==o.prototype||t.indexOf(r)>-1||n.indexOf(o)>-1)return!1;for(a in o)if(o.hasOwnProperty(a)!==r.hasOwnProperty(a)||typeof o[a]!=typeof r[a])return!1;for(a in r){if(o.hasOwnProperty(a)!==r.hasOwnProperty(a)||typeof o[a]!=typeof r[a])return!1;switch(typeof r[a]){case"object":case"function":if(t.push(r),n.push(o),!this.compare2Objects(t,n,r[a],o[a]))return!1;t.pop(),n.pop();break;default:if(r[a]!==o[a])return!1;break}}return!0}}class une{constructor(t,n,r,o,a){this.expressionMap=t,this.driver=n,this.rawRelationIdResults=r,this.rawRelationCountResults=o,this.queryRunner=a}transform(t,n){const r=this.group(t,n),o=[];return r.forEach(a=>{const i=this.transformRawResultsGroup(a,n);i!==void 0&&!Object.values(i).every(s=>s===null)&&o.push(i)}),o}group(t,n){const r=new Map,o=[];return n.metadata.tableType==="view"?o.push(...n.metadata.columns.map(a=>ye.buildAlias(this.driver,void 0,n.name,a.databaseName))):o.push(...n.metadata.primaryColumns.map(a=>ye.buildAlias(this.driver,void 0,n.name,a.databaseName))),t.forEach(a=>{const i=o.map(c=>{const l=a[c];return Ih.isBuffer(l)?l.toString("hex"):It.isObject(l)?JSON.stringify(l):l}).join("_"),s=r.get(i);s?s.push(a):r.set(i,[a])}),r}transformRawResultsGroup(t,n){let r=n.metadata;if(r.discriminatorColumn){const l=t.map(d=>d[ye.buildAlias(this.driver,void 0,n.name,n.metadata.discriminatorColumn.databaseName)]),u=r.childEntityMetadatas.find(d=>typeof l.find(f=>f===d.discriminatorValue)<"u");u&&(r=u)}let o=r.create(this.queryRunner,{fromDeserializer:!0,pojo:this.expressionMap.options.indexOf("create-pojo")!==-1});const a=this.transformColumns(t,n,o,r),i=this.transformJoins(t,o,n,r),s=this.transformRelationIds(t,n,o,r),c=this.transformRelationCounts(t,n,o);if(a||r.primaryColumns.filter(l=>l.isVirtual===!1).length===0&&(i||s||c))return o}transformColumns(t,n,r,o){let a=!1;return o.columns.forEach(i=>{if(o.childEntityMetadatas.length>0&&o.childEntityMetadatas.findIndex(c=>c.target===i.target)!==-1)return;const s=t[0][ye.buildAlias(this.driver,void 0,n.name,i.databaseName)];s===void 0||i.isVirtual||this.expressionMap.selects.find(c=>c.selection===n.name||c.selection===n.name+"."+i.propertyPath)&&(i.setEntityValue(r,this.driver.prepareHydratedValue(s,i)),s!==null&&(a=!0))}),a}transformJoins(t,n,r,o){let a=!1;return this.expressionMap.joinAttributes.forEach(i=>{if(!i.metadata||!i.isSelected||i.relation&&!o.relations.find(c=>c===i.relation))return;if(i.mapToProperty){if(i.mapToPropertyParentAlias!==r.name)return}else if(!i.relation||i.parentAlias!==r.name||i.relationPropertyPath!==i.relation.propertyPath)return;let s=this.transform(t,i.alias);s=i.isMany?s:s[0],s=!i.isMany&&s===void 0?null:s,s!==void 0&&(i.mapToPropertyPropertyName?n[i.mapToPropertyPropertyName]=s:i.relation.setEntityValue(n,s),a=!0)}),a}transformRelationIds(t,n,r,o){let a=!1;return this.rawRelationIdResults.forEach((i,s)=>{if(i.relationIdAttribute.parentAlias!==n.name)return;const c=i.relationIdAttribute.relation,l=this.createValueMapFromJoinColumns(c,i.relationIdAttribute.parentAlias,t);if(l==null)return;this.prepareDataForTransformRelationIds();const u=this.hashEntityIds(c,l),d=this.relationIdMaps[s][u]||[],f=i.relationIdAttribute.mapToPropertyPropertyPath.split("."),p=(y,m,v)=>{const b=y.shift();if(b&&y.length===0)return m[b]=v,m;if(b&&y.length>0)p(y,m[b],v);else return m};c.isOneToOne||c.isManyToOne?d[0]!==void 0&&(p(f,r,d[0]),a=!0):(p(f,r,d),a=a||d.length>0)}),a}transformRelationCounts(t,n,r){let o=!1;return this.rawRelationCountResults.filter(a=>a.relationCountAttribute.parentAlias===n.name).forEach(a=>{const i=a.relationCountAttribute.relation;let s;i.isOneToMany?s=i.inverseRelation.joinColumns[0].referencedColumn.databaseName:s=i.isOwning?i.joinColumns[0].referencedColumn.databaseName:i.inverseRelation.joinColumns[0].referencedColumn.databaseName;const c=t[0][ye.buildAlias(this.driver,void 0,n.name,s)];c!=null&&(r[a.relationCountAttribute.mapToPropertyPropertyName]=0,a.results.filter(l=>l.parentId===c).forEach(l=>{r[a.relationCountAttribute.mapToPropertyPropertyName]=parseInt(l.cnt),o=!0}))}),o}createValueMapFromJoinColumns(t,n,r){let o;return t.isManyToOne||t.isOneToOneOwner?o=t.entityMetadata.primaryColumns.map(a=>a):t.isOneToMany||t.isOneToOneNotOwner?o=t.inverseRelation.joinColumns.map(a=>a):t.isOwning?o=t.joinColumns.map(a=>a):o=t.inverseRelation.inverseJoinColumns.map(a=>a),o.reduce((a,i)=>(r.forEach(s=>{t.isManyToOne||t.isOneToOneOwner?a[i.databaseName]=this.driver.prepareHydratedValue(s[ye.buildAlias(this.driver,void 0,n,i.databaseName)],i):a[i.databaseName]=this.driver.prepareHydratedValue(s[ye.buildAlias(this.driver,void 0,n,i.referencedColumn.databaseName)],i.referencedColumn)}),a),{})}extractEntityPrimaryIds(t,n){let r;return t.isManyToOne||t.isOneToOneOwner?r=t.entityMetadata.primaryColumns.map(o=>o):t.isOneToMany||t.isOneToOneNotOwner?r=t.inverseRelation.joinColumns.map(o=>o):t.isOwning?r=t.joinColumns.map(o=>o):r=t.inverseRelation.inverseJoinColumns.map(o=>o),r.reduce((o,a)=>(o[a.databaseName]=n[a.databaseName],o),{})}prepareDataForTransformRelationIds(){this.relationIdMaps||(this.relationIdMaps=this.rawRelationIdResults.map(t=>{const n=t.relationIdAttribute.relation;let r;return n.isManyToOne||n.isOneToOneOwner?r=n.joinColumns:n.isOneToMany||n.isOneToOneNotOwner?r=n.inverseEntityMetadata.primaryColumns:n.isOwning?r=n.inverseJoinColumns:r=n.inverseRelation.joinColumns,t.results.reduce((o,a)=>{let i=r.reduce((s,c)=>{let l=a[c.databaseName];return n.isOneToMany||n.isOneToOneNotOwner?(c.isVirtual&&c.referencedColumn&&c.referencedColumn.propertyName!==c.propertyName&&(l=c.referencedColumn.createValueMap(l)),Gt.mergeDeep(s,c.createValueMap(l))):(!c.isPrimary&&c.referencedColumn.referencedColumn&&(l=c.referencedColumn.referencedColumn.createValueMap(l)),Gt.mergeDeep(s,c.referencedColumn.createValueMap(l)))},{});if(r.length===1&&!t.relationIdAttribute.disableMixedMap&&(n.isOneToMany||n.isOneToOneNotOwner?i=r[0].getEntityValue(i):i=r[0].referencedColumn.getEntityValue(i)),i!==void 0){const s=this.hashEntityIds(n,a);o[s]?o[s].push(i):o[s]=[i]}return o},{})}))}hashEntityIds(t,n){const r=this.extractEntityPrimaryIds(t,n);return JSON.stringify(r)}}let dne=class{constructor(e,t,n){this.connection=e,this.queryRunner=t,this.relationIdAttributes=n}async load(e){const t=this.relationIdAttributes.map(async n=>{if(n.relation.isManyToOne||n.relation.isOneToOneOwner){if(n.queryBuilderFactory)throw new xe("Additional condition can not be used with ManyToOne or OneToOne owner relations.");const r={},o=e.map(a=>{const i={},s=[];n.relation.joinColumns.forEach(l=>{i[l.databaseName]=this.connection.driver.prepareHydratedValue(a[ye.buildAlias(this.connection.driver,void 0,n.parentAlias,l.databaseName)],l.referencedColumn);const u=`${l.databaseName}:${i[l.databaseName]}`;s.indexOf(u)===-1&&s.push(u)}),n.relation.entityMetadata.primaryColumns.forEach(l=>{i[l.databaseName]=this.connection.driver.prepareHydratedValue(a[ye.buildAlias(this.connection.driver,void 0,n.parentAlias,l.databaseName)],l);const u=`${l.databaseName}:${i[l.databaseName]}`;s.indexOf(u)===-1&&s.push(u)}),s.sort();const c=s.join("::");return r[c]?null:(r[c]=!0,i)}).filter(a=>a);return{relationIdAttribute:n,results:o}}else if(n.relation.isOneToMany||n.relation.isOneToOneNotOwner){const r=n.relation,o=r.isOwning?r.joinColumns:r.inverseRelation.joinColumns,a=r.inverseEntityMetadata.target,i=r.inverseEntityMetadata.tableName,s=n.alias||i,c={},l={},u=e.map((p,y)=>{const m=[],v={},b=o.map(_=>{const w=_.databaseName+y,j=p[ye.buildAlias(this.connection.driver,void 0,n.parentAlias,_.referencedColumn.databaseName)],E=`${s}:${_.propertyPath}:${j}`;return m.indexOf(E)!==-1?"":(m.push(E),v[w]=j,s+"."+_.propertyPath+" = :"+w)}).filter(_=>_).join(" AND ");m.sort();const x=m.join("::");return c[x]?"":(c[x]=!0,Object.assign(l,v),b)}).filter(p=>p).map(p=>"("+p+")").join(" OR ");if(!u)return{relationIdAttribute:n,results:[]};const d=this.connection.createQueryBuilder(this.queryRunner);Gt.uniq([...o,...r.inverseRelation.entityMetadata.primaryColumns],p=>p.propertyPath).forEach(p=>{d.addSelect(s+"."+p.propertyPath,p.databaseName)}),d.from(a,s).where("("+u+")").setParameters(l),n.queryBuilderFactory&&n.queryBuilderFactory(d);const f=await d.getRawMany();return f.forEach(p=>{o.forEach(y=>{p[y.databaseName]=this.connection.driver.prepareHydratedValue(p[y.databaseName],y.referencedColumn)}),r.inverseRelation.entityMetadata.primaryColumns.forEach(y=>{p[y.databaseName]=this.connection.driver.prepareHydratedValue(p[y.databaseName],y)})}),{relationIdAttribute:n,results:f}}else{const r=n.relation,o=r.isOwning?r.joinColumns:r.inverseRelation.inverseJoinColumns,a=r.isOwning?r.inverseJoinColumns:r.inverseRelation.joinColumns,i=n.junctionAlias,s=n.joinInverseSideMetadata.tableName,c=n.alias||s,l=r.isOwning?r.junctionEntityMetadata.tableName:r.inverseRelation.junctionEntityMetadata.tableName,u=e.map(x=>o.reduce((_,w)=>(_[w.propertyPath]=x[ye.buildAlias(this.connection.driver,void 0,n.parentAlias,w.referencedColumn.databaseName)],_),{}));if(u.length===0)return{relationIdAttribute:n,results:[]};const d={},f={},p=u.map((x,_)=>{const w=[],j={},E=Object.keys(x).map(O=>{const N=O+_,P=x[O],k=`${i}:${O}:${P}`;return w.indexOf(k)!==-1?"":(w.push(k),j[N]=P,i+"."+O+" = :"+N)}).filter(O=>O).join(" AND ");w.sort();const S=w.join("::");return f[S]?"":(f[S]=!0,Object.assign(d,j),E)}).filter(x=>x),y=a.map(x=>i+"."+x.propertyPath+" = "+c+"."+x.referencedColumn.propertyPath).join(" AND "),m=p.map(x=>"("+x+" AND "+y+")").join(" OR "),v=this.connection.createQueryBuilder(this.queryRunner);a.forEach(x=>{v.addSelect(i+"."+x.propertyPath,x.databaseName).addOrderBy(i+"."+x.propertyPath)}),o.forEach(x=>{v.addSelect(i+"."+x.propertyPath,x.databaseName).addOrderBy(i+"."+x.propertyPath)}),v.from(s,c).innerJoin(l,i,m).setParameters(d),n.queryBuilderFactory&&n.queryBuilderFactory(v);const b=await v.getRawMany();return b.forEach(x=>{[...o,...a].forEach(_=>{x[_.databaseName]=this.connection.driver.prepareHydratedValue(x[_.databaseName],_.referencedColumn)})}),{relationIdAttribute:n,results:b}}});return Promise.all(t)}};class fne{constructor(t,n){this.connection=t,this.queryRunner=n}load(t,n,r){const o=Array.isArray(n)?n:[n],a=Array.isArray(r)?r:r?[r]:void 0;return t.isManyToMany?this.loadForManyToMany(t,o,a):t.isManyToOne||t.isOneToOneOwner?this.loadForManyToOneAndOneToOneOwner(t,o,a):this.loadForOneToManyAndOneToOneNotOwner(t,o,a)}async loadManyToManyRelationIdsAndGroup(t,n,r,o){const a=t.isManyToMany||t.isOneToMany,i=Array.isArray(n)?n:[n];if(!r&&(r=await this.connection.relationLoader.load(t,n,this.queryRunner,o),!r.length))return i.map(d=>({entity:d,related:a?[]:void 0}));const s=await this.load(t,n,r),c=Array.isArray(r)?r:[r];let l=[],u=[];return t.isManyToManyOwner?(l=t.junctionEntityMetadata.inverseColumns.map(d=>d.referencedColumn),u=t.junctionEntityMetadata.ownerColumns.map(d=>d.referencedColumn)):t.isManyToManyNotOwner?(l=t.junctionEntityMetadata.ownerColumns.map(d=>d.referencedColumn),u=t.junctionEntityMetadata.inverseColumns.map(d=>d.referencedColumn)):t.isManyToOne||t.isOneToOneOwner?(l=t.joinColumns.map(d=>d.referencedColumn),u=t.entityMetadata.primaryColumns):(t.isOneToMany||t.isOneToOneNotOwner)&&(l=t.inverseRelation.entityMetadata.primaryColumns,u=t.inverseRelation.joinColumns.map(d=>d.referencedColumn)),i.map(d=>{const f={entity:d,related:a?[]:void 0},p=s.filter(y=>u.every(m=>m.compareEntityValue(d,y[m.entityMetadata.name+"_"+m.propertyAliasName])));return p.length&&c.forEach(y=>{p.forEach(m=>{l.every(v=>v.compareEntityValue(y,m[ye.buildAlias(this.connection.driver,void 0,v.entityMetadata.name+"_"+t.propertyPath.replace(".","_")+"_"+v.propertyPath.replace(".","_"))]))&&(a?f.related.push(y):f.related=y)})}),f})}loadForManyToMany(t,n,r){const o=t.junctionEntityMetadata,a=o.name,i=t.isOwning?o.ownerColumns:o.inverseColumns,s=t.isOwning?o.inverseColumns:o.ownerColumns,c=this.connection.createQueryBuilder(this.queryRunner);i.forEach(f=>{const p=ye.buildAlias(this.connection.driver,void 0,f.referencedColumn.entityMetadata.name+"_"+f.referencedColumn.propertyPath.replace(".","_"));c.addSelect(a+"."+f.propertyPath,p)}),s.forEach(f=>{const p=ye.buildAlias(this.connection.driver,void 0,f.referencedColumn.entityMetadata.name+"_"+t.propertyPath.replace(".","_")+"_"+f.referencedColumn.propertyPath.replace(".","_"));c.addSelect(a+"."+f.propertyPath,p)});let l="";if(i.length===1){const f=n.map(p=>i[0].referencedColumn.getEntityValue(p));f.every(p=>typeof p=="number")?l=`${a}.${i[0].propertyPath} IN (${f.join(", ")})`:(c.setParameter("values1",f),l=a+"."+i[0].propertyPath+" IN (:...values1)")}else l="("+n.map((f,p)=>i.map(y=>{const m="entity1_"+p+"_"+y.propertyName;return c.setParameter(m,y.referencedColumn.getEntityValue(f)),a+"."+y.propertyPath+" = :"+m}).join(" AND ")).map(f=>"("+f+")").join(" OR ")+")";let u="";if(r)if(s.length===1){const f=r.map(p=>s[0].referencedColumn.getEntityValue(p));f.every(p=>typeof p=="number")?u=`${a}.${s[0].propertyPath} IN (${f.join(", ")})`:(c.setParameter("values2",f),u=a+"."+s[0].propertyPath+" IN (:...values2)")}else u="("+r.map((f,p)=>s.map(y=>{const m="entity2_"+p+"_"+y.propertyName;return c.setParameter(m,y.referencedColumn.getEntityValue(f)),a+"."+y.propertyPath+" = :"+m}).join(" AND ")).map(f=>"("+f+")").join(" OR ")+")";const d=[l,u].filter(f=>f.length>0).join(" AND ");return c.from(o.target,a).where(d).getRawMany()}loadForManyToOneAndOneToOneOwner(t,n,r){const o=t.entityMetadata.targetName,a=t.joinColumns.every(c=>!!t.entityMetadata.nonVirtualColumns.find(l=>l===c));if(r&&a){let c=[];if(n.forEach(l=>{let u={};t.entityMetadata.primaryColumns.forEach(d=>{const f=d.entityMetadata.name+"_"+d.propertyPath.replace(".","_");u[f]=d.getEntityValue(l)}),r.forEach(d=>{t.joinColumns.forEach(f=>{const p=f.getEntityValue(l),y=f.referencedColumn.getEntityValue(d);if(!(p===void 0||y===void 0)&&p===y){const m=f.referencedColumn.entityMetadata.name+"_"+t.propertyPath.replace(".","_")+"_"+f.referencedColumn.propertyPath.replace(".","_");u[m]=y}})}),Object.keys(u).length===t.entityMetadata.primaryColumns.length+t.joinColumns.length&&c.push(u)}),c.length===n.length)return Promise.resolve(c)}const i=this.connection.createQueryBuilder(this.queryRunner);t.entityMetadata.primaryColumns.forEach(c=>{const l=ye.buildAlias(this.connection.driver,void 0,c.entityMetadata.name+"_"+c.propertyPath.replace(".","_"));i.addSelect(o+"."+c.propertyPath,l)}),t.joinColumns.forEach(c=>{const l=ye.buildAlias(this.connection.driver,void 0,c.referencedColumn.entityMetadata.name+"_"+t.propertyPath.replace(".","_")+"_"+c.referencedColumn.propertyPath.replace(".","_"));i.addSelect(o+"."+c.propertyPath,l)});let s="";if(t.entityMetadata.primaryColumns.length===1){const c=n.map(l=>t.entityMetadata.primaryColumns[0].getEntityValue(l));c.every(l=>typeof l=="number")?s=`${o}.${t.entityMetadata.primaryColumns[0].propertyPath} IN (${c.join(", ")})`:(i.setParameter("values",c),s=o+"."+t.entityMetadata.primaryColumns[0].propertyPath+" IN (:...values)")}else s=n.map((c,l)=>t.entityMetadata.primaryColumns.map((u,d)=>{const f="entity"+l+"_"+d;return i.setParameter(f,u.getEntityValue(c)),o+"."+u.propertyPath+" = :"+f}).join(" AND ")).map(c=>"("+c+")").join(" OR ");return i.from(t.entityMetadata.target,o).where(s).getRawMany()}loadForOneToManyAndOneToOneNotOwner(t,n,r){if(t=t.inverseRelation,t.entityMetadata.primaryColumns.length===t.joinColumns.length&&t.entityMetadata.primaryColumns.every(s=>t.joinColumns.indexOf(s)!==-1))return Promise.resolve(n.map(s=>{const c={};return t.joinColumns.forEach(function(l){const u=l.referencedColumn.getEntityValue(s),d=l.referencedColumn.entityMetadata.name+"_"+l.referencedColumn.propertyPath.replace(".","_"),f=l.entityMetadata.name+"_"+t.inverseRelation.propertyPath.replace(".","_")+"_"+l.propertyPath.replace(".","_");c[d]=u,c[f]=u}),c}));const o=t.entityMetadata.targetName,a=this.connection.createQueryBuilder(this.queryRunner);t.entityMetadata.primaryColumns.forEach(s=>{const c=ye.buildAlias(this.connection.driver,void 0,s.entityMetadata.name+"_"+t.inverseRelation.propertyPath.replace(".","_")+"_"+s.propertyPath.replace(".","_"));a.addSelect(o+"."+s.propertyPath,c)}),t.joinColumns.forEach(s=>{const c=ye.buildAlias(this.connection.driver,void 0,s.referencedColumn.entityMetadata.name+"_"+s.referencedColumn.propertyPath.replace(".","_"));a.addSelect(o+"."+s.propertyPath,c)});let i="";if(t.joinColumns.length===1){const s=n.map(c=>t.joinColumns[0].referencedColumn.getEntityValue(c));s.every(c=>typeof c=="number")?i=`${o}.${t.joinColumns[0].propertyPath} IN (${s.join(", ")})`:(a.setParameter("values",s),i=o+"."+t.joinColumns[0].propertyPath+" IN (:...values)")}else i=n.map((s,c)=>t.joinColumns.map((l,u)=>{const d="entity"+c+"_"+u;return a.setParameter(d,l.referencedColumn.getEntityValue(s)),o+"."+l.propertyPath+" = :"+d}).join(" AND ")).map(s=>"("+s+")").join(" OR ");return a.from(t.entityMetadata.target,o).where(i).getRawMany()}}class pne{constructor(t){this.expressionMap=t}transform(){this.expressionMap.mainAlias&&this.expressionMap.mainAlias.metadata.relationIds.forEach(t=>{const n=this.metadataToAttribute(this.expressionMap.mainAlias.name,t);this.expressionMap.relationIdAttributes.push(n)}),this.expressionMap.joinAttributes.forEach(t=>{!t.metadata||t.metadata.isJunction||t.metadata.relationIds.forEach(n=>{const r=this.metadataToAttribute(t.alias.name,n);this.expressionMap.relationIdAttributes.push(r)})})}metadataToAttribute(t,n){return new nx(this.expressionMap,{relationName:t+"."+n.relation.propertyName,mapToProperty:t+"."+n.propertyName,alias:n.alias,queryBuilderFactory:n.queryBuilderFactory})}}class hne{constructor(t,n,r){this.connection=t,this.queryRunner=n,this.relationCountAttributes=r}async load(t){const n=(o,a,i)=>i.indexOf(o)===a,r=this.relationCountAttributes.map(async o=>{if(o.relation.isOneToMany){const a=o.relation,i=a.inverseRelation,s=i.joinColumns[0].referencedColumn.propertyName,c=a.inverseEntityMetadata.target,l=a.inverseEntityMetadata.tableName,u=o.alias||l,d=i.propertyName;let f=t.map(y=>y[o.parentAlias+"_"+s]).filter(y=>!!y);if(f=f.filter(n),f.length===0)return{relationCountAttribute:o,results:[]};const p=this.connection.createQueryBuilder(this.queryRunner);return p.select(u+"."+d,"parentId").addSelect("COUNT(*)","cnt").from(c,u).where(u+"."+d+" IN (:...ids)").addGroupBy(u+"."+d).setParameter("ids",f),o.queryBuilderFactory&&o.queryBuilderFactory(p),{relationCountAttribute:o,results:await p.getRawMany()}}else{let a,i,s,c;o.relation.isOwning?(a=o.relation.joinColumns[0].referencedColumn.databaseName,i=o.relation.inverseJoinColumns[0].referencedColumn.databaseName,s=o.relation.junctionEntityMetadata.columns[0],c=o.relation.junctionEntityMetadata.columns[1]):(a=o.relation.inverseRelation.inverseJoinColumns[0].referencedColumn.databaseName,i=o.relation.inverseRelation.joinColumns[0].referencedColumn.databaseName,s=o.relation.junctionEntityMetadata.columns[1],c=o.relation.junctionEntityMetadata.columns[0]);let l=t.map(v=>v[o.parentAlias+"_"+a]).filter(v=>!!v);if(l=l.filter(n),l.length===0)return{relationCountAttribute:o,results:[]};const u=o.junctionAlias,d=o.joinInverseSideMetadata.tableName,f=o.alias||d,p=o.relation.junctionEntityMetadata.tableName,y=u+"."+s.propertyName+" IN ("+l.map(v=>isNaN(v)?"'"+v+"'":v)+") AND "+u+"."+c.propertyName+" = "+f+"."+i,m=this.connection.createQueryBuilder(this.queryRunner);return m.select(u+"."+s.propertyName,"parentId").addSelect("COUNT("+m.escape(f)+"."+m.escape(i)+")","cnt").from(d,f).innerJoin(p,u,y).addGroupBy(u+"."+s.propertyName),o.queryBuilderFactory&&o.queryBuilderFactory(m),{relationCountAttribute:o,results:await m.getRawMany()}}});return Promise.all(r)}}class mne{constructor(t){this.expressionMap=t}transform(){this.expressionMap.mainAlias&&this.expressionMap.mainAlias.metadata.relationCounts.forEach(t=>{const n=this.metadataToAttribute(this.expressionMap.mainAlias.name,t);this.expressionMap.relationCountAttributes.push(n)}),this.expressionMap.joinAttributes.forEach(t=>{!t.metadata||t.metadata.isJunction||t.metadata.relationCounts.forEach(n=>{const r=this.metadataToAttribute(t.alias.name,n);this.expressionMap.relationCountAttributes.push(r)})})}metadataToAttribute(t,n){return new rx(this.expressionMap,{relationName:t+"."+n.relation.propertyName,mapToProperty:t+"."+n.propertyName,alias:n.alias,queryBuilderFactory:n.queryBuilderFactory})}}class sx{static isFindOneOptions(t){const n=t;return n&&(Array.isArray(n.select)||Array.isArray(n.relations)||typeof n.select=="object"||typeof n.relations=="object"||typeof n.where=="object"||typeof n.join=="object"||typeof n.order=="object"||typeof n.cache=="object"||typeof n.cache=="boolean"||typeof n.cache=="number"||typeof n.comment=="string"||typeof n.lock=="object"||typeof n.loadRelationIds=="object"||typeof n.loadRelationIds=="boolean"||typeof n.loadEagerRelations=="boolean"||typeof n.withDeleted=="boolean"||typeof n.relationLoadStrategy=="string"||typeof n.transaction=="boolean")}static isFindManyOptions(t){const n=t;return n&&(this.isFindOneOptions(n)||typeof n.skip=="number"||typeof n.take=="number"||typeof n.skip=="string"||typeof n.take=="string")}static extractFindManyOptionsAlias(t){if(this.isFindManyOptions(t)&&t.join)return t.join.alias}static applyOptionsToTreeQueryBuilder(t,n){if(n!=null&&n.relations){const r=[...n.relations];if(sx.applyRelationsRecursively(t,r,t.expressionMap.mainAlias.name,t.expressionMap.mainAlias.metadata,""),r.length>0)throw new Bte(r)}return t}static applyRelationsRecursively(t,n,r,o,a){let i=[];if(a){const s=new RegExp("^"+a.replace(".","\\.")+"\\.");i=n.filter(c=>c.match(s)).map(c=>o.findRelationWithPropertyPath(c.replace(s,""))).filter(c=>c)}else i=n.map(s=>o.findRelationWithPropertyPath(s)).filter(s=>s);i.forEach(s=>{let c=ye.buildAlias(t.connection.driver,{joiner:"__"},r,s.propertyPath);const l=r+"."+s.propertyPath;t.expressionMap.relationLoadStrategy==="query"?t.concatRelationMetadata(s):t.leftJoinAndSelect(l,c),n.splice(n.indexOf(a?a+"."+s.propertyPath:s.propertyPath),1);let u,d;if(t.expressionMap.relationLoadStrategy==="query")u=s.inverseEntityMetadata,d=c;else{const f=t.expressionMap.joinAttributes.find(p=>p.entityOrProperty===l);u=f.metadata,d=f.alias.name}if(!d||!u)throw new Ar(s.propertyPath,o);if(this.applyRelationsRecursively(t,n,d,u,a?a+"."+s.propertyPath:s.propertyPath),t.expressionMap.relationLoadStrategy==="join"){const f=o.relations.find(p=>p.propertyName===s.propertyPath);f&&this.joinEagerRelations(t,c,f.inverseEntityMetadata)}})}static joinEagerRelations(t,n,r){r.eagerRelations.forEach(o=>{let a=ye.buildAlias(t.connection.driver,{joiner:"__"},n,o.propertyName),i=!0;for(const l of t.expressionMap.joinAttributes)if(!(l.condition!==void 0||l.mapToProperty!==void 0||l.isMappingMany!==void 0||l.direction!=="LEFT"||l.entityOrProperty!==`${n}.${o.propertyPath}`)){i=!1,a=l.alias.name;break}const s=!!t.expressionMap.joinAttributes.find(l=>l.alias.name===a);i&&!s&&t.leftJoin(n+"."+o.propertyPath,a);let c=!0;for(const l of t.expressionMap.selects)if(!(l.aliasName!==void 0||l.virtual!==void 0||l.selection!==a)){c=!1;break}c&&t.addSelect(a),this.joinEagerRelations(t,a,o.inverseEntityMetadata)})}}class cx extends Nt{constructor(){super(...arguments),this["@instanceof"]=Symbol.for("SelectQueryBuilder"),this.findOptions={},this.selects=[],this.joins=[],this.conditions="",this.orderBys=[],this.relationMetadatas=[]}getQuery(){let t=this.createComment();return t+=this.createCteExpression(),t+=this.createSelectExpression(),t+=this.createJoinExpression(),t+=this.createWhereExpression(),t+=this.createGroupByExpression(),t+=this.createHavingExpression(),t+=this.createOrderByExpression(),t+=this.createLimitOffsetExpression(),t+=this.createLockExpression(),t=t.trim(),this.expressionMap.subQuery&&(t="("+t+")"),this.replacePropertyNamesForTheWholeQuery(t)}setFindOptions(t){return this.findOptions=t,this.applyFindOptions(),this}subQuery(){const t=this.createQueryBuilder();return t.expressionMap.subQuery=!0,t.parentQueryBuilder=this,t}select(t,n){if(this.expressionMap.queryType="select",Array.isArray(t))this.expressionMap.selects=t.map(r=>({selection:r}));else if(typeof t=="function"){const r=t(this.subQuery());this.setParameters(r.getParameters()),this.expressionMap.selects.push({selection:r.getQuery(),aliasName:n})}else t&&(this.expressionMap.selects=[{selection:t,aliasName:n}]);return this}addSelect(t,n){if(!t)return this;if(Array.isArray(t))this.expressionMap.selects=this.expressionMap.selects.concat(t.map(r=>({selection:r})));else if(typeof t=="function"){const r=t(this.subQuery());this.setParameters(r.getParameters()),this.expressionMap.selects.push({selection:r.getQuery(),aliasName:n})}else t&&this.expressionMap.selects.push({selection:t,aliasName:n});return this}maxExecutionTime(t){return this.expressionMap.maxExecutionTime=t,this}distinct(t=!0){return this.expressionMap.selectDistinct=t,this}distinctOn(t){return this.expressionMap.selectDistinctOn=t,this}fromDummy(){return this.from(this.connection.driver.dummyTableName??"(SELECT 1 AS dummy_column)","dummy_table")}from(t,n){const r=this.createFromAlias(t,n);return this.expressionMap.setMainAlias(r),this}addFrom(t,n){const r=this.createFromAlias(t,n);return this.expressionMap.mainAlias||this.expressionMap.setMainAlias(r),this}innerJoin(t,n,r,o){return this.join("INNER",t,n,r,o),this}leftJoin(t,n,r,o){return this.join("LEFT",t,n,r,o),this}innerJoinAndSelect(t,n,r,o){return this.addSelect(n),this.innerJoin(t,n,r,o),this}leftJoinAndSelect(t,n,r,o){return this.addSelect(n),this.leftJoin(t,n,r,o),this}innerJoinAndMapMany(t,n,r,o,a){return this.addSelect(r),this.join("INNER",n,r,o,a,t,!0),this}innerJoinAndMapOne(t,n,r,o,a,i){return this.addSelect(r),this.join("INNER",n,r,o,a,t,!1,i),this}leftJoinAndMapMany(t,n,r,o,a){return this.addSelect(r),this.join("LEFT",n,r,o,a,t,!0),this}leftJoinAndMapOne(t,n,r,o,a,i){return this.addSelect(r),this.join("LEFT",n,r,o,a,t,!1,i),this}loadRelationIdAndMap(t,n,r,o){const a=new nx(this.expressionMap);return a.mapToProperty=t,a.relationName=n,typeof r=="string"&&(a.alias=r),typeof r=="object"&&r.disableMixedMap&&(a.disableMixedMap=!0),a.queryBuilderFactory=o,this.expressionMap.relationIdAttributes.push(a),a.relation.junctionEntityMetadata&&this.expressionMap.createAlias({type:"other",name:a.junctionAlias,metadata:a.relation.junctionEntityMetadata}),this}loadRelationCountAndMap(t,n,r,o){const a=new rx(this.expressionMap);return a.mapToProperty=t,a.relationName=n,a.alias=r,a.queryBuilderFactory=o,this.expressionMap.relationCountAttributes.push(a),this.expressionMap.createAlias({type:"other",name:a.junctionAlias}),a.relation.junctionEntityMetadata&&this.expressionMap.createAlias({type:"other",name:a.junctionAlias,metadata:a.relation.junctionEntityMetadata}),this}loadAllRelationIds(t){return this.expressionMap.mainAlias.metadata.relations.forEach(n=>{t!==void 0&&t.relations!==void 0&&t.relations.indexOf(n.propertyPath)===-1||this.loadRelationIdAndMap(this.expressionMap.mainAlias.name+"."+n.propertyPath,this.expressionMap.mainAlias.name+"."+n.propertyPath,t)}),this}where(t,n){this.expressionMap.wheres=[];const r=this.getWhereCondition(t);return r&&(this.expressionMap.wheres=[{type:"simple",condition:r}]),n&&this.setParameters(n),this}andWhere(t,n){return this.expressionMap.wheres.push({type:"and",condition:this.getWhereCondition(t)}),n&&this.setParameters(n),this}orWhere(t,n){return this.expressionMap.wheres.push({type:"or",condition:this.getWhereCondition(t)}),n&&this.setParameters(n),this}whereExists(t){return this.where(...this.getExistsCondition(t))}andWhereExists(t){return this.andWhere(...this.getExistsCondition(t))}orWhereExists(t){return this.orWhere(...this.getExistsCondition(t))}whereInIds(t){return this.where(this.getWhereInIdsCondition(t))}andWhereInIds(t){return this.andWhere(this.getWhereInIdsCondition(t))}orWhereInIds(t){return this.orWhere(this.getWhereInIdsCondition(t))}having(t,n){return this.expressionMap.havings.push({type:"simple",condition:t}),n&&this.setParameters(n),this}andHaving(t,n){return this.expressionMap.havings.push({type:"and",condition:t}),n&&this.setParameters(n),this}orHaving(t,n){return this.expressionMap.havings.push({type:"or",condition:t}),n&&this.setParameters(n),this}groupBy(t){return t?this.expressionMap.groupBys=[t]:this.expressionMap.groupBys=[],this}addGroupBy(t){return this.expressionMap.groupBys.push(t),this}timeTravelQuery(t){return this.connection.driver.options.type==="cockroachdb"&&(t===void 0?this.expressionMap.timeTravel="follower_read_timestamp()":this.expressionMap.timeTravel=t),this}orderBy(t,n="ASC",r){if(n!==void 0&&n!=="ASC"&&n!=="DESC")throw new xe('SelectQueryBuilder.addOrderBy "order" can accept only "ASC" and "DESC" values.');if(r!==void 0&&r!=="NULLS FIRST"&&r!=="NULLS LAST")throw new xe('SelectQueryBuilder.addOrderBy "nulls" can accept only "NULLS FIRST" and "NULLS LAST" values.');return t?typeof t=="object"?this.expressionMap.orderBys=t:r?this.expressionMap.orderBys={[t]:{order:n,nulls:r}}:this.expressionMap.orderBys={[t]:n}:this.expressionMap.orderBys={},this}addOrderBy(t,n="ASC",r){if(n!==void 0&&n!=="ASC"&&n!=="DESC")throw new xe('SelectQueryBuilder.addOrderBy "order" can accept only "ASC" and "DESC" values.');if(r!==void 0&&r!=="NULLS FIRST"&&r!=="NULLS LAST")throw new xe('SelectQueryBuilder.addOrderBy "nulls" can accept only "NULLS FIRST" and "NULLS LAST" values.');return r?this.expressionMap.orderBys[t]={order:n,nulls:r}:this.expressionMap.orderBys[t]=n,this}limit(t){if(this.expressionMap.limit=this.normalizeNumber(t),this.expressionMap.limit!==void 0&&isNaN(this.expressionMap.limit))throw new xe('Provided "limit" value is not a number. Please provide a numeric value.');return this}offset(t){if(this.expressionMap.offset=this.normalizeNumber(t),this.expressionMap.offset!==void 0&&isNaN(this.expressionMap.offset))throw new xe('Provided "offset" value is not a number. Please provide a numeric value.');return this}take(t){if(this.expressionMap.take=this.normalizeNumber(t),this.expressionMap.take!==void 0&&isNaN(this.expressionMap.take))throw new xe('Provided "take" value is not a number. Please provide a numeric value.');return this}skip(t){if(this.expressionMap.skip=this.normalizeNumber(t),this.expressionMap.skip!==void 0&&isNaN(this.expressionMap.skip))throw new xe('Provided "skip" value is not a number. Please provide a numeric value.');return this}useIndex(t){return this.expressionMap.useIndex=t,this}setLock(t,n,r){return this.expressionMap.lockMode=t,this.expressionMap.lockVersion=n,this.expressionMap.lockTables=r,this}setOnLocked(t){return this.expressionMap.onLocked=t,this}withDeleted(){return this.expressionMap.withDeleted=!0,this}async getRawOne(){return(await this.getRawMany())[0]}async getRawMany(){if(this.expressionMap.lockMode==="optimistic")throw new hl;this.expressionMap.queryEntity=!1;const t=this.obtainQueryRunner();let n=!1;try{this.expressionMap.useTransaction===!0&&t.isTransactionActive===!1&&(await t.startTransaction(),n=!0);const r=await this.loadRawResults(t);return n&&await t.commitTransaction(),r}catch(r){if(n)try{await t.rollbackTransaction()}catch{}throw r}finally{t!==this.queryRunner&&await t.release()}}async getRawAndEntities(){const t=this.obtainQueryRunner();let n=!1;try{this.expressionMap.useTransaction===!0&&t.isTransactionActive===!1&&(await t.startTransaction(),n=!0),this.expressionMap.queryEntity=!0;const r=await this.executeEntitiesAndRawResults(t);return n&&await t.commitTransaction(),r}catch(r){if(n)try{await t.rollbackTransaction()}catch{}throw r}finally{t!==this.queryRunner&&await t.release()}}async getOne(){const t=(await this.getRawAndEntities()).entities[0];if(t&&this.expressionMap.lockMode==="optimistic"&&this.expressionMap.lockVersion){const n=this.expressionMap.mainAlias.metadata;if(this.expressionMap.lockVersion instanceof Date){const r=n.updateDateColumn.getEntityValue(t);if(r.getTime()!==this.expressionMap.lockVersion.getTime())throw new JR(n.name,this.expressionMap.lockVersion,r)}else{const r=n.versionColumn.getEntityValue(t);if(r!==this.expressionMap.lockVersion)throw new JR(n.name,this.expressionMap.lockVersion,r)}}return t===void 0?null:t}async getOneOrFail(){const t=await this.getOne();if(!t)throw new Ite(this.expressionMap.mainAlias.target,this.expressionMap.parameters);return t}async getMany(){if(this.expressionMap.lockMode==="optimistic")throw new hl;return(await this.getRawAndEntities()).entities}async getCount(){if(this.expressionMap.lockMode==="optimistic")throw new hl;const t=this.obtainQueryRunner();let n=!1;try{this.expressionMap.useTransaction===!0&&t.isTransactionActive===!1&&(await t.startTransaction(),n=!0),this.expressionMap.queryEntity=!1;const r=await this.executeCountQuery(t);return n&&await t.commitTransaction(),r}catch(r){if(n)try{await t.rollbackTransaction()}catch{}throw r}finally{t!==this.queryRunner&&await t.release()}}async getExists(){if(this.expressionMap.lockMode==="optimistic")throw new hl;const t=this.obtainQueryRunner();let n=!1;try{this.expressionMap.useTransaction===!0&&t.isTransactionActive===!1&&(await t.startTransaction(),n=!0),this.expressionMap.queryEntity=!1;const r=await this.executeExistsQuery(t);return n&&await t.commitTransaction(),r}catch(r){if(n)try{await t.rollbackTransaction()}catch{}throw r}finally{t!==this.queryRunner&&await t.release()}}async getManyAndCount(){if(this.expressionMap.lockMode==="optimistic")throw new hl;const t=this.obtainQueryRunner();let n=!1;try{this.expressionMap.useTransaction===!0&&t.isTransactionActive===!1&&(await t.startTransaction(),n=!0),this.expressionMap.queryEntity=!0;const r=await this.executeEntitiesAndRawResults(t);this.expressionMap.queryEntity=!1;const o=this.expressionMap.cacheId;this.expressionMap.cacheId=o&&`${o}-count`;const a=await this.executeCountQuery(t),i=[r.entities,a];return n&&await t.commitTransaction(),i}catch(r){if(n)try{await t.rollbackTransaction()}catch{}throw r}finally{t!==this.queryRunner&&await t.release()}}async stream(){this.expressionMap.queryEntity=!1;const[t,n]=this.getQueryAndParameters(),r=this.obtainQueryRunner();let o=!1;try{this.expressionMap.useTransaction===!0&&r.isTransactionActive===!1&&(await r.startTransaction(),o=!0);const a=()=>{if(r!==this.queryRunner)return r.release()},i=r.stream(t,n,a,a);return o&&await r.commitTransaction(),i}catch(a){if(o)try{await r.rollbackTransaction()}catch{}throw a}}cache(t,n){return typeof t=="boolean"?this.expressionMap.cache=t:typeof t=="number"?(this.expressionMap.cache=!0,this.expressionMap.cacheDuration=t):(typeof t=="string"||typeof t=="number")&&(this.expressionMap.cache=!0,this.expressionMap.cacheId=t),n&&(this.expressionMap.cacheDuration=n),this}setOption(t){return this.expressionMap.options.push(t),this}join(t,n,r,o,a,i,s,c){a&&this.setParameters(a);const l=new hI(this.connection,this.expressionMap);l.direction=t,l.mapAsEntity=c,l.mapToProperty=i,l.isMappingMany=s,l.entityOrProperty=n,l.condition=o,this.expressionMap.joinAttributes.push(l);const u=l.metadata;if(u){if(u.deleteDateColumn&&!this.expressionMap.withDeleted){const d=`${r}.${u.deleteDateColumn.propertyName} IS NULL`;l.condition=l.condition?` ${l.condition} AND ${d}`:`${d}`}l.alias=this.expressionMap.createAlias({type:"join",name:r,metadata:u}),l.relation&&l.relation.junctionEntityMetadata&&this.expressionMap.createAlias({type:"join",name:l.junctionAlias,metadata:l.relation.junctionEntityMetadata})}else{let d="";if(typeof n=="function"){const p=n(this.subQuery());this.setParameters(p.getParameters()),d=p.getQuery()}else d=n;const f=typeof n=="function"||n.substr(0,1)==="("&&n.substr(-1)===")";l.alias=this.expressionMap.createAlias({type:"join",name:r,tablePath:f===!1?n:void 0,subQuery:f===!0?d:void 0})}}createSelectExpression(){if(!this.expressionMap.mainAlias)throw new xe("Cannot build query because main alias is not set (call qb#from method)");const t=[],n=[];if(this.expressionMap.mainAlias.hasMetadata){const s=this.expressionMap.mainAlias.metadata;t.push(...this.buildEscapedEntityColumnSelects(this.expressionMap.mainAlias.name,s)),n.push(...this.findEntityColumnSelects(this.expressionMap.mainAlias.name,s))}this.expressionMap.joinAttributes.forEach(s=>{if(s.metadata)t.push(...this.buildEscapedEntityColumnSelects(s.alias.name,s.metadata)),n.push(...this.findEntityColumnSelects(s.alias.name,s.metadata));else if(this.expressionMap.selects.some(c=>c.selection===s.alias.name)){t.push({selection:this.escape(s.alias.name)+".*"});const c=this.expressionMap.selects.find(l=>l.selection===s.alias.name);n.push(c)}}),this.expressionMap.selects.filter(s=>n.indexOf(s)===-1).forEach(s=>t.push({selection:this.replacePropertyNames(s.selection),aliasName:s.aliasName})),t.length===0&&t.push({selection:"*"});let r="";this.expressionMap.useIndex&&ye.isMySQLFamily(this.connection.driver)&&(r=` USE INDEX (${this.expressionMap.useIndex})`);const o=this.expressionMap.aliases.filter(s=>s.type==="from"&&(s.tablePath||s.subQuery)).map(s=>s.subQuery?s.subQuery+" "+this.escape(s.name):this.getTableName(s.tablePath)+" "+this.escape(s.name)),a=this.createSelectDistinctExpression(),i=t.map(s=>s.selection+(s.aliasName?" AS "+this.escape(s.aliasName):"")).join(", ");return a+i+" FROM "+o.join(", ")+this.createTableLockExpression()+r}createSelectDistinctExpression(){const{selectDistinct:t,selectDistinctOn:n,maxExecutionTime:r}=this.expressionMap,{driver:o}=this.connection;let a="SELECT ";return r>0&&ye.isMySQLFamily(o)&&(a+=`/*+ MAX_EXECUTION_TIME(${this.expressionMap.maxExecutionTime}) */ `),ye.isPostgresFamily(o)&&n.length>0?a=`SELECT DISTINCT ON (${n.map(i=>this.replacePropertyNames(i)).join(", ")}) `:t&&(a="SELECT DISTINCT "),a}createJoinExpression(){return this.expressionMap.joinAttributes.map(t=>{const n=t.relation,r=t.tablePath,o=t.alias.name;let a=t.condition?" AND ("+t.condition+")":"";const i=t.parentAlias;if(!i||!n){const s=t.alias.subQuery?t.alias.subQuery:this.getTableName(r);return" "+t.direction+" JOIN "+s+" "+this.escape(o)+this.createTableLockExpression()+(t.condition?" ON "+this.replacePropertyNames(t.condition):"")}if(n.isManyToOne||n.isOneToOneOwner){const s=n.joinColumns.map(c=>o+"."+c.referencedColumn.propertyPath+"="+i+"."+n.propertyPath+"."+c.referencedColumn.propertyPath).join(" AND ");return" "+t.direction+" JOIN "+this.getTableName(r)+" "+this.escape(o)+this.createTableLockExpression()+" ON "+this.replacePropertyNames(s+a)}else if(n.isOneToMany||n.isOneToOneNotOwner){const s=n.inverseRelation.joinColumns.map(c=>(n.inverseEntityMetadata.tableType==="entity-child"&&n.inverseEntityMetadata.discriminatorColumn&&(a+=" AND "+o+"."+n.inverseEntityMetadata.discriminatorColumn.databaseName+"='"+n.inverseEntityMetadata.discriminatorValue+"'"),o+"."+n.inverseRelation.propertyPath+"."+c.referencedColumn.propertyPath+"="+i+"."+c.referencedColumn.propertyPath)).join(" AND ");if(!s)throw new xe(`Relation ${n.entityMetadata.name}.${n.propertyName} does not have join columns.`);return" "+t.direction+" JOIN "+this.getTableName(r)+" "+this.escape(o)+this.createTableLockExpression()+" ON "+this.replacePropertyNames(s+a)}else{const s=n.junctionEntityMetadata.tablePath,c=t.junctionAlias;let l="",u="";return n.isOwning?(l=n.joinColumns.map(d=>c+"."+d.propertyPath+"="+i+"."+d.referencedColumn.propertyPath).join(" AND "),u=n.inverseJoinColumns.map(d=>o+"."+d.referencedColumn.propertyPath+"="+c+"."+d.propertyPath).join(" AND ")):(l=n.inverseRelation.inverseJoinColumns.map(d=>c+"."+d.propertyPath+"="+i+"."+d.referencedColumn.propertyPath).join(" AND "),u=n.inverseRelation.joinColumns.map(d=>o+"."+d.referencedColumn.propertyPath+"="+c+"."+d.propertyPath).join(" AND "))," "+t.direction+" JOIN "+this.getTableName(s)+" "+this.escape(c)+this.createTableLockExpression()+" ON "+this.replacePropertyNames(l)+" "+t.direction+" JOIN "+this.getTableName(r)+" "+this.escape(o)+this.createTableLockExpression()+" ON "+this.replacePropertyNames(u+a)}}).join(" ")}createGroupByExpression(){return!this.expressionMap.groupBys||!this.expressionMap.groupBys.length?"":" GROUP BY "+this.replacePropertyNames(this.expressionMap.groupBys.join(", "))}createOrderByExpression(){const t=this.expressionMap.allOrderBys;return Object.keys(t).length===0?"":" ORDER BY "+Object.keys(t).map(n=>{const r=typeof t[n]=="string"?t[n]:t[n].order+" "+t[n].nulls,o=this.expressionMap.selects.find(a=>a.selection===n);if(o&&!o.aliasName&&n.indexOf(".")!==-1){const a=n.split("."),i=a[0],s=a.slice(1).join("."),c=this.expressionMap.aliases.find(l=>l.name===i);if(c){const l=c.metadata.findColumnWithPropertyPath(s);if(l){const u=ye.buildAlias(this.connection.driver,void 0,i,l.databaseName);return this.escape(u)+" "+r}}}return this.replacePropertyNames(n)+" "+r}).join(", ")}createLimitOffsetExpression(){let t=this.expressionMap.offset,n=this.expressionMap.limit;if(!t&&!n&&this.expressionMap.joinAttributes.length===0&&(t=this.expressionMap.skip,n=this.expressionMap.take),this.connection.driver.options.type==="mssql"){let r="";if((n||t)&&Object.keys(this.expressionMap.allOrderBys).length<=0&&(r=" ORDER BY (SELECT NULL)"),n&&t)return r+" OFFSET "+t+" ROWS FETCH NEXT "+n+" ROWS ONLY";if(n)return r+" OFFSET 0 ROWS FETCH NEXT "+n+" ROWS ONLY";if(t)return r+" OFFSET "+t+" ROWS"}else if(ye.isMySQLFamily(this.connection.driver)||this.connection.driver.options.type==="aurora-mysql"||this.connection.driver.options.type==="sap"||this.connection.driver.options.type==="spanner"){if(n&&t)return" LIMIT "+n+" OFFSET "+t;if(n)return" LIMIT "+n;if(t)throw new zte}else if(ye.isSQLiteFamily(this.connection.driver)){if(n&&t)return" LIMIT "+n+" OFFSET "+t;if(n)return" LIMIT "+n;if(t)return" LIMIT -1 OFFSET "+t}else if(this.connection.driver.options.type==="oracle"){if(n&&t)return" OFFSET "+t+" ROWS FETCH NEXT "+n+" ROWS ONLY";if(n)return" FETCH NEXT "+n+" ROWS ONLY";if(t)return" OFFSET "+t+" ROWS"}else{if(n&&t)return" LIMIT "+n+" OFFSET "+t;if(n)return" LIMIT "+n;if(t)return" OFFSET "+t}return""}createTableLockExpression(){if(this.connection.driver.options.type==="mssql")switch(this.expressionMap.lockMode){case"pessimistic_read":return" WITH (HOLDLOCK, ROWLOCK)";case"pessimistic_write":return" WITH (UPDLOCK, ROWLOCK)";case"dirty_read":return" WITH (NOLOCK)"}return""}createLockExpression(){const t=this.connection.driver;let n="";if(this.expressionMap.lockTables){if(!(ye.isPostgresFamily(t)||t.options.type==="cockroachdb"))throw new xe("Lock tables not supported in selected driver");if(this.expressionMap.lockTables.length<1)throw new xe("lockTables cannot be an empty array");n=" OF "+this.expressionMap.lockTables.join(", ")}let r="";switch(this.expressionMap.onLocked==="nowait"?r=" NOWAIT":this.expressionMap.onLocked==="skip_locked"&&(r=" SKIP LOCKED"),this.expressionMap.lockMode){case"pessimistic_read":if(t.options.type==="mysql"||t.options.type==="aurora-mysql")return ye.isReleaseVersionOrGreater(t,"8.0.0")?" FOR SHARE"+n+r:" LOCK IN SHARE MODE";if(t.options.type==="mariadb")return" LOCK IN SHARE MODE";if(ye.isPostgresFamily(t))return" FOR SHARE"+n+r;if(t.options.type==="oracle")return" FOR UPDATE";if(t.options.type==="mssql")return"";throw new Wi;case"pessimistic_write":if(ye.isMySQLFamily(t)||t.options.type==="aurora-mysql"||t.options.type==="oracle")return" FOR UPDATE"+r;if(ye.isPostgresFamily(t)||t.options.type==="cockroachdb")return" FOR UPDATE"+n+r;if(t.options.type==="mssql")return"";throw new Wi;case"pessimistic_partial_write":if(ye.isPostgresFamily(t))return" FOR UPDATE"+n+" SKIP LOCKED";if(ye.isMySQLFamily(t))return" FOR UPDATE SKIP LOCKED";throw new Wi;case"pessimistic_write_or_fail":if(ye.isPostgresFamily(t)||t.options.type==="cockroachdb")return" FOR UPDATE"+n+" NOWAIT";if(ye.isMySQLFamily(t))return" FOR UPDATE NOWAIT";throw new Wi;case"for_no_key_update":if(ye.isPostgresFamily(t)||t.options.type==="cockroachdb")return" FOR NO KEY UPDATE"+n+r;throw new Wi;case"for_key_share":if(ye.isPostgresFamily(t))return" FOR KEY SHARE"+n+r;throw new Wi;default:return""}}createHavingExpression(){if(!this.expressionMap.havings||!this.expressionMap.havings.length)return"";const t=this.expressionMap.havings.map((n,r)=>{switch(n.type){case"and":return(r>0?"AND ":"")+this.replacePropertyNames(n.condition);case"or":return(r>0?"OR ":"")+this.replacePropertyNames(n.condition);default:return this.replacePropertyNames(n.condition)}}).join(" ");return t.length?" HAVING "+t:""}buildEscapedEntityColumnSelects(t,n){const r=this.expressionMap.selects.some(l=>l.selection===t),o=[];if(r&&o.push(...n.columns.filter(l=>l.isSelect===!0)),o.push(...n.columns.filter(l=>this.expressionMap.selects.some(u=>u.selection===t+"."+l.propertyPath))),o.length===0)return[];const a=this.expressionMap.queryEntity?n.primaryColumns.filter(l=>o.indexOf(l)===-1):[],i=[...o,...a],s=[],c=this.escape(t);return i.forEach(l=>{let u=c+"."+this.escape(l.databaseName);l.isVirtualProperty&&l.query&&(u=`(${l.query(c)})`),this.connection.driver.spatialTypes.indexOf(l.type)!==-1&&((ye.isMySQLFamily(this.connection.driver)||this.connection.driver.options.type==="aurora-mysql")&&(u=`${this.connection.driver.options.legacySpatialSupport?"AsText":"ST_AsText"}(${u})`),ye.isPostgresFamily(this.connection.driver)&&(l.precision?u=`ST_AsGeoJSON(${u}, ${l.precision})::json`:u=`ST_AsGeoJSON(${u})::json`),this.connection.driver.options.type==="mssql"&&(u=`${u}.ToString()`));const d=this.expressionMap.selects.filter(f=>f.selection===t+"."+l.propertyPath);if(d.length)d.forEach(f=>{s.push({selection:u,aliasName:f.aliasName?f.aliasName:ye.buildAlias(this.connection.driver,void 0,t,l.databaseName),virtual:f.virtual})});else{if(l.isVirtualProperty)return;s.push({selection:u,aliasName:ye.buildAlias(this.connection.driver,void 0,t,l.databaseName),virtual:r})}}),s}findEntityColumnSelects(t,n){const r=this.expressionMap.selects.find(o=>o.selection===t);return r?[r]:this.expressionMap.selects.filter(o=>n.columns.some(a=>o.selection===t+"."+a.propertyPath))}computeCountExpression(){const t=this.expressionMap.mainAlias.name,n=this.expressionMap.mainAlias.metadata.primaryColumns,r=this.escape(t);if(this.expressionMap.joinAttributes.length===0&&this.expressionMap.relationIdAttributes.length===0&&this.expressionMap.relationCountAttributes.length===0)return"COUNT(1)";if(this.connection.driver.options.type==="cockroachdb"||ye.isPostgresFamily(this.connection.driver))return"COUNT(DISTINCT("+n.map(o=>`${r}.${this.escape(o.databaseName)}`).join(", ")+"))";if(ye.isMySQLFamily(this.connection.driver))return"COUNT(DISTINCT "+n.map(o=>`${r}.${this.escape(o.databaseName)}`).join(", ")+")";if(this.connection.driver.options.type==="mssql"){const o=n.map(a=>`${r}.${this.escape(a.databaseName)}`).join(", '|;|', ");return n.length===1?`COUNT(DISTINCT(${o}))`:`COUNT(DISTINCT(CONCAT(${o})))`}return this.connection.driver.options.type==="spanner"?n.length===1?`COUNT(DISTINCT(${r}.${this.escape(n[0].databaseName)}))`:`COUNT(DISTINCT(CONCAT(${n.map(o=>`CAST(${r}.${this.escape(o.databaseName)} AS STRING)`).join(", '|;|', ")})))`:"COUNT(DISTINCT("+n.map(o=>`${r}.${this.escape(o.databaseName)}`).join(" || '|;|' || ")+"))"}async executeCountQuery(t){const n=this.computeCountExpression(),r=await this.clone().orderBy().groupBy().offset(void 0).limit(void 0).skip(void 0).take(void 0).select(n,"cnt").setOption("disable-global-order").loadRawResults(t);return!r||!r[0]||!r[0].cnt?0:parseInt(r[0].cnt)}async executeExistsQuery(t){return(await this.connection.createQueryBuilder().fromDummy().select("1","row_exists").whereExists(this).limit(1).loadRawResults(t)).length>0}applyFindOptions(){if(this.expressionMap.mainAlias.metadata){if(this.findOptions.relationLoadStrategy&&(this.expressionMap.relationLoadStrategy=this.findOptions.relationLoadStrategy),this.findOptions.comment&&this.comment(this.findOptions.comment),this.findOptions.withDeleted&&this.withDeleted(),this.findOptions.select){const t=Array.isArray(this.findOptions.select)?Gt.propertyPathsToTruthyObject(this.findOptions.select):this.findOptions.select;this.buildSelect(t,this.expressionMap.mainAlias.metadata,this.expressionMap.mainAlias.name)}if(this.selects.length&&this.select(this.selects),this.selects=[],this.findOptions.relations){const t=Array.isArray(this.findOptions.relations)?Gt.propertyPathsToTruthyObject(this.findOptions.relations):this.findOptions.relations;this.buildRelations(t,typeof this.findOptions.select=="object"?this.findOptions.select:void 0,this.expressionMap.mainAlias.metadata,this.expressionMap.mainAlias.name),this.findOptions.loadEagerRelations!==!1&&this.expressionMap.relationLoadStrategy==="join"&&this.buildEagerRelations(t,typeof this.findOptions.select=="object"?this.findOptions.select:void 0,this.expressionMap.mainAlias.metadata,this.expressionMap.mainAlias.name)}if(this.selects.length&&this.addSelect(this.selects),this.findOptions.where&&(this.conditions=this.buildWhere(this.findOptions.where,this.expressionMap.mainAlias.metadata,this.expressionMap.mainAlias.name),this.conditions.length&&this.andWhere(this.conditions.substr(0,1)!=="("?"("+this.conditions+")":this.conditions)),this.findOptions.order&&this.buildOrder(this.findOptions.order,this.expressionMap.mainAlias.metadata,this.expressionMap.mainAlias.name),this.joins.length&&this.joins.forEach(t=>{t.select&&!t.selection?t.type==="inner"?this.innerJoinAndSelect(`${t.parentAlias}.${t.relationMetadata.propertyPath}`,t.alias):this.leftJoinAndSelect(`${t.parentAlias}.${t.relationMetadata.propertyPath}`,t.alias):t.type==="inner"?this.innerJoin(`${t.parentAlias}.${t.relationMetadata.propertyPath}`,t.alias):this.leftJoin(`${t.parentAlias}.${t.relationMetadata.propertyPath}`,t.alias)}),this.findOptions.skip!==void 0&&this.skip(this.findOptions.skip),this.findOptions.take!==void 0&&this.take(this.findOptions.take),typeof this.findOptions.cache=="number"?this.cache(this.findOptions.cache):typeof this.findOptions.cache=="boolean"?this.cache(this.findOptions.cache):typeof this.findOptions.cache=="object"&&this.cache(this.findOptions.cache.id,this.findOptions.cache.milliseconds),this.findOptions.join&&(this.findOptions.join.leftJoin&&Object.keys(this.findOptions.join.leftJoin).forEach(t=>{this.leftJoin(this.findOptions.join.leftJoin[t],t)}),this.findOptions.join.innerJoin&&Object.keys(this.findOptions.join.innerJoin).forEach(t=>{this.innerJoin(this.findOptions.join.innerJoin[t],t)}),this.findOptions.join.leftJoinAndSelect&&Object.keys(this.findOptions.join.leftJoinAndSelect).forEach(t=>{this.leftJoinAndSelect(this.findOptions.join.leftJoinAndSelect[t],t)}),this.findOptions.join.innerJoinAndSelect&&Object.keys(this.findOptions.join.innerJoinAndSelect).forEach(t=>{this.innerJoinAndSelect(this.findOptions.join.innerJoinAndSelect[t],t)})),this.findOptions.lock){if(this.findOptions.lock.mode==="optimistic")this.setLock(this.findOptions.lock.mode,this.findOptions.lock.version);else if(this.findOptions.lock.mode==="pessimistic_read"||this.findOptions.lock.mode==="pessimistic_write"||this.findOptions.lock.mode==="dirty_read"||this.findOptions.lock.mode==="pessimistic_partial_write"||this.findOptions.lock.mode==="pessimistic_write_or_fail"||this.findOptions.lock.mode==="for_no_key_update"||this.findOptions.lock.mode==="for_key_share"){const t=this.findOptions.lock.tables?this.findOptions.lock.tables.map(n=>{const r=this.expressionMap.aliases.find(o=>o.metadata.tableNameWithoutPrefix===n);if(!r)throw new xe(`"${n}" is not part of this query`);return this.escape(r.name)}):void 0;this.setLock(this.findOptions.lock.mode,void 0,t),this.findOptions.lock.onLocked&&this.setOnLocked(this.findOptions.lock.onLocked)}}this.findOptions.loadRelationIds===!0?this.loadAllRelationIds():typeof this.findOptions.loadRelationIds=="object"&&this.loadAllRelationIds(this.findOptions.loadRelationIds),this.findOptions.loadEagerRelations!==!1&&sx.joinEagerRelations(this,this.expressionMap.mainAlias.name,this.expressionMap.mainAlias.metadata),this.findOptions.transaction===!0&&(this.expressionMap.useTransaction=!0)}}concatRelationMetadata(t){this.relationMetadatas.push(t)}async executeEntitiesAndRawResults(t){if(!this.expressionMap.mainAlias)throw new xe('Alias is not set. Use "from" method to set an alias.');if((this.expressionMap.lockMode==="pessimistic_read"||this.expressionMap.lockMode==="pessimistic_write"||this.expressionMap.lockMode==="pessimistic_partial_write"||this.expressionMap.lockMode==="pessimistic_write_or_fail"||this.expressionMap.lockMode==="for_no_key_update"||this.expressionMap.lockMode==="for_key_share")&&!t.isTransactionActive)throw new $te;if(this.expressionMap.lockMode==="optimistic"){const i=this.expressionMap.mainAlias.metadata;if(!i.versionColumn&&!i.updateDateColumn)throw new Lte(i.name)}const n=new dne(this.connection,t,this.expressionMap.relationIdAttributes),r=new hne(this.connection,t,this.expressionMap.relationCountAttributes);new pne(this.expressionMap).transform(),new mne(this.expressionMap).transform();let o=[],a=[];if((this.expressionMap.skip||this.expressionMap.take)&&this.expressionMap.joinAttributes.length>0){const[i,s]=this.createOrderByCombinedWithSelectExpression("distinctAlias"),c=this.expressionMap.mainAlias.metadata,l=this.expressionMap.mainAlias.name,u=c.primaryColumns.map(p=>{const y=this.escape("distinctAlias"),m=this.escape(ye.buildAlias(this.connection.driver,void 0,l,p.databaseName));s[m]||(s[m]="ASC");const v=ye.buildAlias(this.connection.driver,void 0,"ids_"+l,p.databaseName);return`${y}.${m} AS ${this.escape(v)}`}),d=this.clone(),f=d.expressionMap.timeTravel;if(o=await new cx(this.connection,t).select(`DISTINCT ${u.join(", ")}`).addSelect(i).from(`(${d.orderBy().timeTravelQuery(!1).getQuery()})`,"distinctAlias").timeTravelQuery(f).offset(this.expressionMap.skip).limit(this.expressionMap.take).orderBy(s).cache(this.expressionMap.cache&&this.expressionMap.cacheId?`${this.expressionMap.cacheId}-pagination`:this.expressionMap.cache,this.expressionMap.cacheDuration).setParameters(this.getParameters()).setNativeParameters(this.expressionMap.nativeParameters).getRawMany(),o.length>0){let p="";const y={};if(c.hasMultiplePrimaryKeys)p=o.map((m,v)=>c.primaryColumns.map(b=>{const x=`orm_distinct_ids_${v}_${b.databaseName}`,_=ye.buildAlias(this.connection.driver,void 0,"ids_"+l,b.databaseName);return y[x]=m[_],`${l}.${b.propertyPath}=:${x}`}).join(" AND ")).join(" OR ");else{const m=ye.buildAlias(this.connection.driver,void 0,"ids_"+l,c.primaryColumns[0].databaseName),v=o.map(b=>b[m]);v.every(b=>typeof b=="number")?p=`${l}.${c.primaryColumns[0].propertyPath} IN (${v.join(", ")})`:(y.orm_distinct_ids=v,p=l+"."+c.primaryColumns[0].propertyPath+" IN (:...orm_distinct_ids)")}o=await this.clone().mergeExpressionMap({extraAppendedAndWhereCondition:p}).setParameters(y).loadRawResults(t)}}else o=await this.loadRawResults(t);if(o.length>0){const i=await n.load(o),s=await r.load(o);a=new une(this.expressionMap,this.connection.driver,i,s,this.queryRunner).transform(o,this.expressionMap.mainAlias),this.expressionMap.callListeners===!0&&this.expressionMap.mainAlias.hasMetadata&&await t.broadcaster.broadcast("Load",this.expressionMap.mainAlias.metadata,a)}if(this.expressionMap.relationLoadStrategy==="query"){const i=new fne(this.connection,t);await Promise.all(this.relationMetadatas.map(async s=>{const c=s.inverseEntityMetadata.target,l=s.inverseEntityMetadata.targetName,u=Array.isArray(this.findOptions.select)?Gt.propertyPathsToTruthyObject(this.findOptions.select):this.findOptions.select,d=Array.isArray(this.findOptions.relations)?Gt.propertyPathsToTruthyObject(this.findOptions.relations):this.findOptions.relations,f=this.createQueryBuilder(t).select(l).from(c,l).setFindOptions({select:u?Gt.deepValue(u,s.propertyPath):void 0,order:this.findOptions.order?Gt.deepValue(this.findOptions.order,s.propertyPath):void 0,relations:d?Gt.deepValue(d,s.propertyPath):void 0,withDeleted:this.findOptions.withDeleted,relationLoadStrategy:this.findOptions.relationLoadStrategy});if(a.length>0){const p=await i.loadManyToManyRelationIdsAndGroup(s,a,void 0,f);a.forEach(y=>{const m=p.find(v=>v.entity===y);if(m){const v=m.related===void 0?null:m.related;s.setEntityValue(y,v)}})}}))}return{raw:o,entities:a}}createOrderByCombinedWithSelectExpression(t){const n=this.expressionMap.allOrderBys,r=Object.keys(n).map(a=>{if(a.indexOf(".")!==-1){const i=a.split("."),s=i[0],c=i.slice(1).join("."),l=this.expressionMap.findAliasByName(s).metadata.findColumnWithPropertyPath(c);return this.escape(t)+"."+this.escape(ye.buildAlias(this.connection.driver,void 0,s,l.databaseName))}else return this.expressionMap.selects.find(i=>i.selection===a||i.aliasName===a)?this.escape(t)+"."+this.escape(a):""}).join(", "),o={};return Object.keys(n).forEach(a=>{if(a.indexOf(".")!==-1){const i=a.split("."),s=i[0],c=i.slice(1).join("."),l=this.expressionMap.findAliasByName(s).metadata.findColumnWithPropertyPath(c);o[this.escape(t)+"."+this.escape(ye.buildAlias(this.connection.driver,void 0,s,l.databaseName))]=n[a]}else this.expressionMap.selects.find(i=>i.selection===a||i.aliasName===a)?o[this.escape(t)+"."+this.escape(a)]=n[a]:o[a]=n[a]}),[r,o]}async loadRawResults(t){const[n,r]=this.getQueryAndParameters(),o=n+" -- PARAMETERS: "+JSON.stringify(r,(u,d)=>typeof d=="bigint"?d.toString():d),a=typeof this.connection.options.cache=="object"?this.connection.options.cache:{};let i;const s=a.alwaysEnabled&&this.expressionMap.cache!==!1||this.expressionMap.cache===!0;let c=!1;if(this.connection.queryResultCache&&s)try{if(i=await this.connection.queryResultCache.getFromCache({identifier:this.expressionMap.cacheId,query:o,duration:this.expressionMap.cacheDuration||a.duration||1e3},t),i&&!this.connection.queryResultCache.isExpired(i))return JSON.parse(i.result)}catch(u){if(!a.ignoreErrors)throw u;c=!0}const l=await t.query(n,r,!0);if(!c&&this.connection.queryResultCache&&s)try{await this.connection.queryResultCache.storeInCache({identifier:this.expressionMap.cacheId,query:o,time:new Date().getTime(),duration:this.expressionMap.cacheDuration||a.duration||1e3,result:JSON.stringify(l.records)},i,t)}catch(u){if(!a.ignoreErrors)throw u}return l.records}mergeExpressionMap(t){return It.assign(this.expressionMap,t),this}normalizeNumber(t){return typeof t=="number"||t===void 0||t===null?t:Number(t)}obtainQueryRunner(){return this.queryRunner||this.connection.createQueryRunner(this.connection.defaultReplicationModeForReads())}buildSelect(t,n,r,o){for(let a in t){if(t[a]===void 0||t[a]===!1)continue;const i=o?o+"."+a:a,s=n.findColumnWithPropertyPathStrict(i),c=n.findEmbeddedWithPropertyPath(i),l=n.findRelationWithPropertyPath(i);if(!c&&!s&&!l)throw new Ar(i,n);s?this.selects.push(r+"."+i):c&&this.buildSelect(t[a],n,r,i)}}buildRelations(t,n,r,o,a){t&&Object.keys(t).forEach(i=>{const s=t[i],c=a?a+"."+i:i,l=r.findEmbeddedWithPropertyPath(c),u=r.findRelationWithPropertyPath(c);if(!l&&!u)throw new Ar(c,r);if(l)this.buildRelations(s,typeof n=="object"?Gt.deepValue(n,l.propertyPath):void 0,r,o,c);else if(u){let d=o+"_"+c.replace(".","_");d=ye.buildAlias(this.connection.driver,{joiner:"__"},o,d),(s===!0||typeof s=="object")&&(this.expressionMap.relationLoadStrategy==="query"?this.concatRelationMetadata(u):(this.joins.push({type:"left",select:!0,selection:n&&typeof n[i]=="object"?n[i]:void 0,alias:d,parentAlias:o,relationMetadata:u}),n&&typeof n[i]=="object"&&this.buildSelect(n[i],u.inverseEntityMetadata,d))),typeof s=="object"&&this.expressionMap.relationLoadStrategy==="join"&&this.buildRelations(s,typeof n=="object"?Gt.deepValue(n,u.propertyPath):void 0,u.inverseEntityMetadata,d,void 0)}})}buildEagerRelations(t,n,r,o,a){t&&Object.keys(t).forEach(i=>{const s=t[i],c=a?a+"."+i:i,l=r.findEmbeddedWithPropertyPath(c),u=r.findRelationWithPropertyPath(c);if(!l&&!u)throw new Ar(c,r);if(l)this.buildEagerRelations(s,typeof n=="object"?Gt.deepValue(n,l.propertyPath):void 0,r,o,c);else if(u){let d=o+"_"+c.replace(".","_");d=ye.buildAlias(this.connection.driver,{joiner:"__"},o,d),(s===!0||typeof s=="object")&&u.inverseEntityMetadata.eagerRelations.forEach(f=>{let p=d+"_"+f.propertyPath.replace(".","_");p=ye.buildAlias(this.connection.driver,{joiner:"__"},d,p),this.joins.find(y=>y.alias===p)||this.joins.push({type:"left",select:!0,alias:p,parentAlias:d,selection:void 0,relationMetadata:f}),n&&typeof n[i]=="object"&&this.buildSelect(n[i],u.inverseEntityMetadata,d)}),typeof s=="object"&&this.buildEagerRelations(s,typeof n=="object"?Gt.deepValue(n,u.propertyPath):void 0,u.inverseEntityMetadata,d,void 0)}})}buildOrder(t,n,r,o){for(let a in t){if(t[a]===void 0)continue;const i=o?o+"."+a:a,s=n.findColumnWithPropertyPathStrict(i),c=n.findEmbeddedWithPropertyPath(i),l=n.findRelationWithPropertyPath(i);if(!c&&!s&&!l)throw new Ar(i,n);if(s){let u=typeof t[a]=="object"?t[a].direction:t[a];u=u==="DESC"||u==="desc"||u===-1?"DESC":"ASC";let d=typeof t[a]=="object"?t[a].nulls:void 0;d=(d==null?void 0:d.toLowerCase())==="first"?"NULLS FIRST":(d==null?void 0:d.toLowerCase())==="last"?"NULLS LAST":void 0;let f=`${r}.${i}`;this.addOrderBy(f,u,d)}else if(c)this.buildOrder(t[a],n,r,i);else if(l){let u=r+"_"+i.replace(".","_");u=ye.buildAlias(this.connection.driver,{joiner:"__"},r,u),this.joins.find(d=>d.alias===u)||this.joins.push({type:"left",select:!1,alias:u,parentAlias:r,selection:void 0,relationMetadata:l}),this.buildOrder(t[a],l.inverseEntityMetadata,u)}}}buildWhere(t,n,r,o){let a="";if(Array.isArray(t))t.length&&(a=t.map(i=>this.buildWhere(i,n,r,o)).filter(i=>!!i).map(i=>"("+i+")").join(" OR "));else{let i=[];for(let s in t){if(t[s]===void 0||t[s]===null)continue;const c=o?o+"."+s:s,l=n.findColumnWithPropertyPathStrict(c),u=n.findEmbeddedWithPropertyPath(c),d=n.findRelationWithPropertyPath(c);if(!u&&!l&&!d)throw new Ar(c,n);if(l){let f=`${r}.${c}`;l.isVirtualProperty&&l.query&&(f=`(${l.query(r)})`);let p=t[s];dt.isEqualOperator(t[s])&&(p=t[s].value),l.transformer&&(p instanceof ml?p.transformValue(l.transformer):p=ax.transformTo(l.transformer,p)),i.push(this.createWhereConditionExpression(this.getWherePredicateCondition(f,p)))}else if(u){const f=this.buildWhere(t[s],n,r,c);f&&i.push(f)}else if(d){if(typeof t[s]=="object"&&Object.keys(t[s]).every(f=>t[s][f]===void 0))continue;if(dt.isFindOperator(t[s]))if(t[s].type==="moreThan"||t[s].type==="lessThan"||t[s].type==="moreThanOrEqual"||t[s].type==="lessThanOrEqual"){let f="";t[s].type==="moreThan"?f=">":t[s].type==="lessThan"?f="<":t[s].type==="moreThanOrEqual"?f=">=":t[s].type==="lessThanOrEqual"&&(f="<=");const p=this.subQuery();if(d.isManyToManyOwner)p.select("COUNT(*)").from(d.joinTableName,d.joinTableName).where(d.joinColumns.map(y=>`${d.joinTableName}.${y.propertyName} = ${r}.${y.referencedColumn.propertyName}`).join(" AND "));else if(d.isManyToManyNotOwner)p.select("COUNT(*)").from(d.inverseRelation.joinTableName,d.inverseRelation.joinTableName).where(d.inverseRelation.inverseJoinColumns.map(y=>`${d.inverseRelation.joinTableName}.${y.propertyName} = ${r}.${y.referencedColumn.propertyName}`).join(" AND "));else if(d.isOneToMany)p.select("COUNT(*)").from(d.inverseEntityMetadata.target,d.inverseEntityMetadata.tableName).where(d.inverseRelation.joinColumns.map(y=>`${d.inverseEntityMetadata.tableName}.${y.propertyName} = ${r}.${y.referencedColumn.propertyName}`).join(" AND "));else throw new Error("This relation isn't supported by given find operator");this.andWhere(p.getSql()+" "+f+" "+parseInt(t[s].value))}else if(d.isManyToOne||d.isOneToOne&&d.isOneToOneOwner){const f=`${r}.${c}`;i.push(this.createWhereConditionExpression(this.getWherePredicateCondition(f,t[s])))}else throw new Error("This relation isn't supported by given find operator");else{let f=r+"_"+d.propertyPath.replace(".","_");f=ye.buildAlias(this.connection.driver,{joiner:"__"},r,f),this.joins.find(y=>y.alias===f)||this.joins.push({type:"left",select:!1,selection:void 0,alias:f,parentAlias:r,relationMetadata:d});const p=this.buildWhere(t[s],d.inverseEntityMetadata,f);p&&i.push(p)}}}a=i.length?"("+i.join(") AND (")+")":i.join(" AND ")}return a.length?"("+a+")":a}}class xI{constructor(){this.generatedMaps=[]}static from(t){const n=new this;return n.raw=t.records,n.affected=t.affected,n}}class yne extends Nt{constructor(t,n){super(t,n),this["@instanceof"]=Symbol.for("SoftDeleteQueryBuilder"),this.expressionMap.aliasNamePrefixingEnabled=!1}getQuery(){let t=this.createUpdateExpression();return t+=this.createCteExpression(),t+=this.createOrderByExpression(),t+=this.createLimitExpression(),this.replacePropertyNamesForTheWholeQuery(t.trim())}async execute(){const t=this.obtainQueryRunner();let n=!1;try{this.expressionMap.useTransaction===!0&&t.isTransactionActive===!1&&(await t.startTransaction(),n=!0),this.expressionMap.callListeners===!0&&this.expressionMap.mainAlias.hasMetadata&&(this.expressionMap.queryType==="soft-delete"?await t.broadcaster.broadcast("BeforeSoftRemove",this.expressionMap.mainAlias.metadata):this.expressionMap.queryType==="restore"&&await t.broadcaster.broadcast("BeforeRecover",this.expressionMap.mainAlias.metadata));const r=new ix(t,this.expressionMap);this.expressionMap.updateEntity===!0&&this.expressionMap.mainAlias.hasMetadata&&this.expressionMap.whereEntities.length>0&&(this.expressionMap.extraReturningColumns=r.getSoftDeletionReturningColumns());const[o,a]=this.getQueryAndParameters(),i=await t.query(o,a,!0),s=xI.from(i);return this.expressionMap.updateEntity===!0&&this.expressionMap.mainAlias.hasMetadata&&this.expressionMap.whereEntities.length>0&&await r.update(s,this.expressionMap.whereEntities),this.expressionMap.callListeners===!0&&this.expressionMap.mainAlias.hasMetadata&&(this.expressionMap.queryType==="soft-delete"?await t.broadcaster.broadcast("AfterSoftRemove",this.expressionMap.mainAlias.metadata):this.expressionMap.queryType==="restore"&&await t.broadcaster.broadcast("AfterRecover",this.expressionMap.mainAlias.metadata)),n&&await t.commitTransaction(),s}catch(r){if(n)try{await t.rollbackTransaction()}catch{}throw r}finally{t!==this.queryRunner&&await t.release()}}from(t,n){t=dt.isEntitySchema(t)?t.options.name:t;const r=this.createFromAlias(t,n);return this.expressionMap.setMainAlias(r),this}where(t,n){this.expressionMap.wheres=[];const r=this.getWhereCondition(t);return r&&(this.expressionMap.wheres=[{type:"simple",condition:r}]),n&&this.setParameters(n),this}andWhere(t,n){return this.expressionMap.wheres.push({type:"and",condition:this.getWhereCondition(t)}),n&&this.setParameters(n),this}orWhere(t,n){return this.expressionMap.wheres.push({type:"or",condition:this.getWhereCondition(t)}),n&&this.setParameters(n),this}whereInIds(t){return this.where(this.getWhereInIdsCondition(t))}andWhereInIds(t){return this.andWhere(this.getWhereInIdsCondition(t))}orWhereInIds(t){return this.orWhere(this.getWhereInIdsCondition(t))}output(t){return this.returning(t)}returning(t){if(!this.connection.driver.isReturningSqlSupported("update"))throw new If;return this.expressionMap.returning=t,this}orderBy(t,n="ASC",r){return t?typeof t=="object"?this.expressionMap.orderBys=t:r?this.expressionMap.orderBys={[t]:{order:n,nulls:r}}:this.expressionMap.orderBys={[t]:n}:this.expressionMap.orderBys={},this}addOrderBy(t,n="ASC",r){return r?this.expressionMap.orderBys[t]={order:n,nulls:r}:this.expressionMap.orderBys[t]=n,this}limit(t){return this.expressionMap.limit=t,this}whereEntity(t){if(!this.expressionMap.mainAlias.hasMetadata)throw new xe(".whereEntity method can only be used on queries which update real entity table.");this.expressionMap.wheres=[];const n=Array.isArray(t)?t:[t];return n.forEach(r=>{const o=this.expressionMap.mainAlias.metadata.getEntityIdMap(r);if(!o)throw new xe("Provided entity does not have ids set, cannot perform operation.");this.orWhereInIds(o)}),this.expressionMap.whereEntities=n,this}updateEntity(t){return this.expressionMap.updateEntity=t,this}createUpdateExpression(){const t=this.expressionMap.mainAlias.hasMetadata?this.expressionMap.mainAlias.metadata:void 0;if(!t)throw new xe(`Cannot get entity metadata for the given alias "${this.expressionMap.mainAlias}"`);if(!t.deleteDateColumn)throw new Dte(t);const n=[];switch(this.expressionMap.queryType){case"soft-delete":n.push(this.escape(t.deleteDateColumn.databaseName)+" = CURRENT_TIMESTAMP");break;case"restore":n.push(this.escape(t.deleteDateColumn.databaseName)+" = NULL");break;default:throw new xe('The queryType must be "soft-delete" or "restore"')}if(t.versionColumn&&n.push(this.escape(t.versionColumn.databaseName)+" = "+this.escape(t.versionColumn.databaseName)+" + 1"),t.updateDateColumn&&n.push(this.escape(t.updateDateColumn.databaseName)+" = CURRENT_TIMESTAMP"),n.length<=0)throw new Wb;const r=this.createWhereExpression(),o=this.createReturningExpression("update");return o===""?`UPDATE ${this.getTableName(this.getMainTableName())} SET ${n.join(", ")}${r}`:this.connection.driver.options.type==="mssql"?`UPDATE ${this.getTableName(this.getMainTableName())} SET ${n.join(", ")} OUTPUT ${o}${r}`:`UPDATE ${this.getTableName(this.getMainTableName())} SET ${n.join(", ")}${r} RETURNING ${o}`}createOrderByExpression(){const t=this.expressionMap.orderBys;return Object.keys(t).length>0?" ORDER BY "+Object.keys(t).map(n=>typeof t[n]=="string"?this.replacePropertyNames(n)+" "+t[n]:this.replacePropertyNames(n)+" "+t[n].order+" "+t[n].nulls).join(", "):""}createLimitExpression(){let t=this.expressionMap.limit;if(t){if(ye.isMySQLFamily(this.connection.driver))return" LIMIT "+t;throw new ZR}return""}}class gne extends Nt{constructor(t,n){super(t,n),this["@instanceof"]=Symbol.for("UpdateQueryBuilder"),this.expressionMap.aliasNamePrefixingEnabled=!1}getQuery(){let t=this.createComment();return t+=this.createCteExpression(),t+=this.createUpdateExpression(),t+=this.createOrderByExpression(),t+=this.createLimitExpression(),this.replacePropertyNamesForTheWholeQuery(t.trim())}async execute(){const t=this.obtainQueryRunner();let n=!1;try{this.expressionMap.useTransaction===!0&&t.isTransactionActive===!1&&(await t.startTransaction(),n=!0),this.expressionMap.callListeners===!0&&this.expressionMap.mainAlias.hasMetadata&&await t.broadcaster.broadcast("BeforeUpdate",this.expressionMap.mainAlias.metadata,this.expressionMap.valuesSet);let r=null,o=null;const a=new ix(t,this.expressionMap),i=[];if(Array.isArray(this.expressionMap.returning)&&this.expressionMap.mainAlias.hasMetadata)for(const f of this.expressionMap.returning)i.push(...this.expressionMap.mainAlias.metadata.findColumnsWithPropertyPath(f));this.expressionMap.updateEntity===!0&&this.expressionMap.mainAlias.hasMetadata&&this.expressionMap.whereEntities.length>0&&(this.expressionMap.extraReturningColumns=a.getUpdationReturningColumns(),i.push(...this.expressionMap.extraReturningColumns.filter(f=>!i.includes(f)))),i.length>0&&this.connection.driver.options.type==="mssql"&&(r=this.connection.driver.buildTableVariableDeclaration("@OutputTable",i),o="SELECT * FROM @OutputTable");const[s,c]=this.getQueryAndParameters(),l=[r,s,o],u=await t.query(l.filter(f=>f!=null).join(`;

`),c,!0),d=xI.from(u);return this.expressionMap.updateEntity===!0&&this.expressionMap.mainAlias.hasMetadata&&this.expressionMap.whereEntities.length>0&&await a.update(d,this.expressionMap.whereEntities),this.expressionMap.callListeners===!0&&this.expressionMap.mainAlias.hasMetadata&&await t.broadcaster.broadcast("AfterUpdate",this.expressionMap.mainAlias.metadata,this.expressionMap.valuesSet),n&&await t.commitTransaction(),d}catch(r){if(n)try{await t.rollbackTransaction()}catch{}throw r}finally{t!==this.queryRunner&&await t.release()}}set(t){return this.expressionMap.valuesSet=t,this}where(t,n){this.expressionMap.wheres=[];const r=this.getWhereCondition(t);return r&&(this.expressionMap.wheres=[{type:"simple",condition:r}]),n&&this.setParameters(n),this}andWhere(t,n){return this.expressionMap.wheres.push({type:"and",condition:this.getWhereCondition(t)}),n&&this.setParameters(n),this}orWhere(t,n){return this.expressionMap.wheres.push({type:"or",condition:this.getWhereCondition(t)}),n&&this.setParameters(n),this}whereInIds(t){return this.where(this.getWhereInIdsCondition(t))}andWhereInIds(t){return this.andWhere(this.getWhereInIdsCondition(t))}orWhereInIds(t){return this.orWhere(this.getWhereInIdsCondition(t))}output(t){return this.returning(t)}returning(t){if(!this.connection.driver.isReturningSqlSupported("update"))throw new If;return this.expressionMap.returning=t,this}orderBy(t,n="ASC",r){return t?typeof t=="object"?this.expressionMap.orderBys=t:r?this.expressionMap.orderBys={[t]:{order:n,nulls:r}}:this.expressionMap.orderBys={[t]:n}:this.expressionMap.orderBys={},this}addOrderBy(t,n="ASC",r){return r?this.expressionMap.orderBys[t]={order:n,nulls:r}:this.expressionMap.orderBys[t]=n,this}limit(t){return this.expressionMap.limit=t,this}whereEntity(t){if(!this.expressionMap.mainAlias.hasMetadata)throw new xe(".whereEntity method can only be used on queries which update real entity table.");this.expressionMap.wheres=[];const n=Array.isArray(t)?t:[t];return n.forEach(r=>{const o=this.expressionMap.mainAlias.metadata.getEntityIdMap(r);if(!o)throw new xe("Provided entity does not have ids set, cannot perform operation.");this.orWhereInIds(o)}),this.expressionMap.whereEntities=n,this}updateEntity(t){return this.expressionMap.updateEntity=t,this}createUpdateExpression(){const t=this.getValueSet(),n=this.expressionMap.mainAlias.hasMetadata?this.expressionMap.mainAlias.metadata:void 0,r={};for(let c in t)t[c]!==void 0&&(r[c]=t[c]);const o=[],a=[];if(n?(this.createPropertyPath(n,r).forEach(c=>{const l=n.findColumnsWithPropertyPath(c);if(l.length<=0)throw new Ar(c,n);l.forEach(u=>{if(!u.isUpdate||a.includes(u))return;a.push(u);let d=u.getEntityValue(r);if(u.referencedColumn&&typeof d=="object"&&!(d instanceof Date)&&d!==null&&!Ih.isBuffer(d)?d=u.referencedColumn.getEntityValue(d):typeof d!="function"&&(d=this.connection.driver.preparePersistentValue(d,u)),typeof d=="function")o.push(this.escape(u.databaseName)+" = "+d());else if((this.connection.driver.options.type==="sap"||this.connection.driver.options.type==="spanner")&&d===null)o.push(this.escape(u.databaseName)+" = NULL");else{this.connection.driver.options.type==="mssql"&&(d=this.connection.driver.parametrizeValue(u,d));const f=this.createParameter(d);let p=null;if((ye.isMySQLFamily(this.connection.driver)||this.connection.driver.options.type==="aurora-mysql")&&this.connection.driver.spatialTypes.indexOf(u.type)!==-1){const y=this.connection.driver.options.legacySpatialSupport?"GeomFromText":"ST_GeomFromText";u.srid!=null?p=`${y}(${f}, ${u.srid})`:p=`${y}(${f})`}else ye.isPostgresFamily(this.connection.driver)&&this.connection.driver.spatialTypes.indexOf(u.type)!==-1?u.srid!=null?p=`ST_SetSRID(ST_GeomFromGeoJSON(${f}), ${u.srid})::${u.type}`:p=`ST_GeomFromGeoJSON(${f})::${u.type}`:this.connection.driver.options.type==="mssql"&&this.connection.driver.spatialTypes.indexOf(u.type)!==-1?p=u.type+"::STGeomFromText("+f+", "+(u.srid||"0")+")":p=f;o.push(this.escape(u.databaseName)+" = "+p)}})}),(o.length>0||Object.keys(r).length===0)&&(n.versionColumn&&a.indexOf(n.versionColumn)===-1&&o.push(this.escape(n.versionColumn.databaseName)+" = "+this.escape(n.versionColumn.databaseName)+" + 1"),n.updateDateColumn&&a.indexOf(n.updateDateColumn)===-1&&o.push(this.escape(n.updateDateColumn.databaseName)+" = CURRENT_TIMESTAMP"))):Object.keys(r).map(c=>{let l=r[c];if(typeof l=="function")o.push(this.escape(c)+" = "+l());else if((this.connection.driver.options.type==="sap"||this.connection.driver.options.type==="spanner")&&l===null)o.push(this.escape(c)+" = NULL");else{const u=this.createParameter(l);o.push(this.escape(c)+" = "+u)}}),o.length<=0)throw new Wb;const i=this.createWhereExpression(),s=this.createReturningExpression("update");return s===""?`UPDATE ${this.getTableName(this.getMainTableName())} SET ${o.join(", ")}${i}`:this.connection.driver.options.type==="mssql"?`UPDATE ${this.getTableName(this.getMainTableName())} SET ${o.join(", ")} OUTPUT ${s}${i}`:`UPDATE ${this.getTableName(this.getMainTableName())} SET ${o.join(", ")}${i} RETURNING ${s}`}createOrderByExpression(){const t=this.expressionMap.orderBys;return Object.keys(t).length>0?" ORDER BY "+Object.keys(t).map(n=>typeof t[n]=="string"?this.replacePropertyNames(n)+" "+t[n]:this.replacePropertyNames(n)+" "+t[n].order+" "+t[n].nulls).join(", "):""}createLimitExpression(){let t=this.expressionMap.limit;if(t){if(ye.isMySQLFamily(this.connection.driver)||this.connection.driver.options.type==="aurora-mysql")return" LIMIT "+t;throw new ZR}return""}getValueSet(){if(typeof this.expressionMap.valuesSet=="object")return this.expressionMap.valuesSet;throw new Wb}}function vne(){Nt.registerQueryBuilderClass("DeleteQueryBuilder",e=>new tne(e)),Nt.registerQueryBuilderClass("InsertQueryBuilder",e=>new sne(e)),Nt.registerQueryBuilderClass("RelationQueryBuilder",e=>new lne(e)),Nt.registerQueryBuilderClass("SelectQueryBuilder",e=>new cx(e)),Nt.registerQueryBuilderClass("SoftDeleteQueryBuilder",e=>new yne(e)),Nt.registerQueryBuilderClass("UpdateQueryBuilder",e=>new gne(e))}var wI;(function(e){e.VIEW="VIEW",e.MATERIALIZED_VIEW="MATERIALIZED_VIEW",e.GENERATED_COLUMN="GENERATED_COLUMN"})(wI||(wI={}));var lx={exports:{}},ux,_I;function bne(){if(_I)return ux;_I=1;var e=1e3,t=e*60,n=t*60,r=n*24,o=r*7,a=r*365.25;ux=function(u,d){d=d||{};var f=typeof u;if(f==="string"&&u.length>0)return i(u);if(f==="number"&&isFinite(u))return d.long?c(u):s(u);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(u))};function i(u){if(u=String(u),!(u.length>100)){var d=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(u);if(d){var f=parseFloat(d[1]),p=(d[2]||"ms").toLowerCase();switch(p){case"years":case"year":case"yrs":case"yr":case"y":return f*a;case"weeks":case"week":case"w":return f*o;case"days":case"day":case"d":return f*r;case"hours":case"hour":case"hrs":case"hr":case"h":return f*n;case"minutes":case"minute":case"mins":case"min":case"m":return f*t;case"seconds":case"second":case"secs":case"sec":case"s":return f*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return f;default:return}}}}function s(u){var d=Math.abs(u);return d>=r?Math.round(u/r)+"d":d>=n?Math.round(u/n)+"h":d>=t?Math.round(u/t)+"m":d>=e?Math.round(u/e)+"s":u+"ms"}function c(u){var d=Math.abs(u);return d>=r?l(u,d,r,"day"):d>=n?l(u,d,n,"hour"):d>=t?l(u,d,t,"minute"):d>=e?l(u,d,e,"second"):u+" ms"}function l(u,d,f,p){var y=d>=f*1.5;return Math.round(u/f)+" "+p+(y?"s":"")}return ux}var dx,jI;function xne(){if(jI)return dx;jI=1;function e(t){r.debug=r,r.default=r,r.coerce=l,r.disable=i,r.enable=a,r.enabled=s,r.humanize=bne(),r.destroy=u,Object.keys(t).forEach(d=>{r[d]=t[d]}),r.names=[],r.skips=[],r.formatters={};function n(d){let f=0;for(let p=0;p<d.length;p++)f=(f<<5)-f+d.charCodeAt(p),f|=0;return r.colors[Math.abs(f)%r.colors.length]}r.selectColor=n;function r(d){let f,p=null,y,m;function v(...b){if(!v.enabled)return;const x=v,_=Number(new Date),w=_-(f||_);x.diff=w,x.prev=f,x.curr=_,f=_,b[0]=r.coerce(b[0]),typeof b[0]!="string"&&b.unshift("%O");let j=0;b[0]=b[0].replace(/%([a-zA-Z%])/g,(E,S)=>{if(E==="%%")return"%";j++;const O=r.formatters[S];if(typeof O=="function"){const N=b[j];E=O.call(x,N),b.splice(j,1),j--}return E}),r.formatArgs.call(x,b),(x.log||r.log).apply(x,b)}return v.namespace=d,v.useColors=r.useColors(),v.color=r.selectColor(d),v.extend=o,v.destroy=r.destroy,Object.defineProperty(v,"enabled",{enumerable:!0,configurable:!1,get:()=>p!==null?p:(y!==r.namespaces&&(y=r.namespaces,m=r.enabled(d)),m),set:b=>{p=b}}),typeof r.init=="function"&&r.init(v),v}function o(d,f){const p=r(this.namespace+(typeof f>"u"?":":f)+d);return p.log=this.log,p}function a(d){r.save(d),r.namespaces=d,r.names=[],r.skips=[];let f;const p=(typeof d=="string"?d:"").split(/[\s,]+/),y=p.length;for(f=0;f<y;f++)p[f]&&(d=p[f].replace(/\*/g,".*?"),d[0]==="-"?r.skips.push(new RegExp("^"+d.slice(1)+"$")):r.names.push(new RegExp("^"+d+"$")))}function i(){const d=[...r.names.map(c),...r.skips.map(c).map(f=>"-"+f)].join(",");return r.enable(""),d}function s(d){if(d[d.length-1]==="*")return!0;let f,p;for(f=0,p=r.skips.length;f<p;f++)if(r.skips[f].test(d))return!1;for(f=0,p=r.names.length;f<p;f++)if(r.names[f].test(d))return!0;return!1}function c(d){return d.toString().substring(2,d.toString().length-2).replace(/\.\*\?$/,"*")}function l(d){return d instanceof Error?d.stack||d.message:d}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}return dx=e,dx}var EI;function wne(){return EI||(EI=1,function(e,t){var n={};t.formatArgs=o,t.save=a,t.load=i,t.useColors=r,t.storage=s(),t.destroy=(()=>{let l=!1;return()=>{l||(l=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function r(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let l;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(l=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(l[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function o(l){if(l[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+l[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const u="color: "+this.color;l.splice(1,0,u,"color: inherit");let d=0,f=0;l[0].replace(/%[a-zA-Z%]/g,p=>{p!=="%%"&&(d++,p==="%c"&&(f=d))}),l.splice(f,0,u)}t.log=console.debug||console.log||(()=>{});function a(l){try{l?t.storage.setItem("debug",l):t.storage.removeItem("debug")}catch{}}function i(){let l;try{l=t.storage.getItem("debug")}catch{}return!l&&typeof b$<"u"&&"env"in b$&&(l=n.DEBUG),l}function s(){try{return localStorage}catch{}}e.exports=xne()(t);const{formatters:c}=e.exports;c.j=function(l){try{return JSON.stringify(l)}catch(u){return"[UnexpectedJSONParseError]: "+u.message}}}(lx,lx.exports)),lx.exports}wne(),vne();const SI=(e,t)=>({id:e.id,type:e.node_type,position:{x:e.x||0,y:e.y||0},width:e.width||void 0,height:e.height||void 0,data:{loading:!1,flowNode:e,...t}}),_ne=e=>({id:e.id,target:e.target,source:e.target,targetHandle:e.targetHandle,sourceHandle:e.sourceHandle}),CI=e=>({id:e.id,source:e.source,target:e.target,targetHandle:e.targetHandle,sourceHandle:e.sourceHandle}),jne=e=>e.filter(t=>"edgeId"in t?`${t.edgeId}`.startsWith("xy-edge__"):!1),fx=(e,t,n)=>{const r=[];return{changes:e.map(o=>{var c;const a=t.find(l=>o.id===l.id);a||r.push(o.id);const i=(c=n==null?void 0:n[o.source_type])==null?void 0:c.find(l=>(l==null?void 0:l.id)===o.source_id),s=SI(o,{...a==null?void 0:a.data,entity:i});return{type:a?"replace":"add",id:o.id,item:a?Rf({...a||{},data:void 0},Wc(s,qc)):s}}),newIds:[]}},px=(e,t)=>{const n=[],r=[],o=e.map(a=>{const i=t.find(s=>a.source===s.source&&a.target===s.target);return!i||i.id!==a.id?(i&&r.push(i.id),{type:"add",item:CI(a)}):(n.push(a.id),{type:"replace",item:CI(a)})});return t.forEach(a=>{n.includes(a.id)||r.push(a.id)}),{changes:o,updatedIds:n,deletedIds:r}},hx={width:440,height:360},Lf={width:380,height:650},yl={[ae.Toolbox]:"toolbox",[ae.SessionInfo]:"session-info",[ae.DefaultEmbeddingModel]:"default-embedding-model",[ae.ApplicationBar]:"application-bar"},Ene={id:yl[ae.Toolbox],type:ae.Toolbox,position:{x:10+Lf.width+20,y:10},measured:hx,data:{}},Sne={id:yl[ae.SessionInfo],type:ae.SessionInfo,position:{x:10,y:10},measured:Lf,data:{}},Cne={id:yl[ae.DefaultEmbeddingModel],type:ae.DefaultEmbeddingModel,position:{x:10+Lf.width+hx.width+40,y:10},data:{model:Jxe}},One={id:yl[ae.ApplicationBar],type:ae.ApplicationBar,position:{x:10+Lf.width+hx.width+40,y:80},data:{}},Mne=[Ene,Sne,Cne,One],Nne=[ae.Toolbox,ae.SessionInfo,ae.ApplicationBar,ae.EditorApp,ae.CodeContainerApp],OI={flowNodes:[],flowEdges:[],ready:!0,flowEdgeLoading:!1,flowNodeLoading:!1,syncedNodes:[],syncedEdges:[],syncNodeQueue:[],syncEdgeQueue:[],edges:[],nodes:Mne},mx=async e=>{const t=await ue("FlowNode").find(e),n=t.reduce((o,a)=>{var i;return o[a.source_type]||(o[a.source_type]=[]),(i=o[a.source_type])==null||i.push(a),o},{}),r={};return await Promise.all(Object.entries(n).map(async([o,a])=>{const i=o;r[i]=await ue(i).find({where:{id:mo(a.map(s=>s.source_id))}})})),{flowNodes:t,entityGroups:n,flowNodeDatas:r}},kne=(e,t)=>({reset:()=>{e(OI)},setNodes:n=>{if(typeof n=="function"){e({nodes:n(t().nodes)});return}e({nodes:n})},setEdges:n=>{if(typeof n=="function"){e({edges:n(t().edges)});return}e({edges:n})},updateNodes:n=>{const r=t().nodes;e({nodes:Oa(n,r)})},updateEdges:n=>{const r=t().edges;e({edges:fl(n,r)})},addConnectionToEdges:n=>{const r=t().edges;e({edges:xT(n,r)})},flowNodesToNodes:(n,r={})=>{const o=t().nodes,{changes:a}=fx(n,o,r);e({nodes:Oa(a,o)})},flowEdgesToEdges:n=>{const r=t().edges,{changes:o,updatedIds:a,deletedIds:i}=px(n,r);r.forEach(s=>{a.includes(s.id)||i.push(s.id)}),i.forEach(s=>{o.push({type:"remove",id:s})}),e({edges:fl(o,r)})},getNodes:n=>t().nodes.filter(r=>n.includes(r.id)),removeSyncNodeQueue:n=>{const{syncNodeQueue:r}=t();for(const o of n){const a=r.findIndex(i=>i.timestamp===o);a>-1&&r.splice(a,1)}e({syncNodeQueue:r})},removeSyncEdgeQueue:n=>{const{syncEdgeQueue:r}=t();for(const o of n){const a=r.findIndex(i=>i.timestamp===o);a>-1&&r.splice(a,1)}e({syncEdgeQueue:r})},pushSyncNodeQueue:(n,r)=>{const{syncNodeQueue:o}=t();e({syncNodeQueue:[...o,{query:r,timestamp:Date.now(),syncType:n}]})},pushSyncEdgeQueue:()=>{const{syncEdgeQueue:n}=t();e({syncEdgeQueue:[...n,{timestamp:Date.now()}]})},findFlowNodesWithSource:async(n,r)=>{try{e({flowNodeLoading:!0});const{flowNodes:o,flowNodeDatas:a}=await mx(n);if(r!=null&&r.clean)e({flowNodes:o,nodes:o.map(i=>{var c;const s=(c=a==null?void 0:a[i.source_type])==null?void 0:c.find(l=>l.id===i.source_id);return SI(i,{data:s})})});else{const i=t().flowNodes,s=o.map(u=>u.id),c=t().nodes,{changes:l}=fx(o,c,a);e({flowNodes:[...i.filter(u=>!s.includes(u.id)),...o],nodes:Oa(l,c)})}return o}finally{e({flowNodeLoading:!1})}},findFlowEdges:async(n,r)=>{try{e({flowEdgeLoading:!0});const o=await ue("FlowEdge").find(n),a=t().flowEdges,i=o.map(s=>s.id);if(r!=null&&r.clean)e({flowEdges:o,edges:o.map(s=>_ne(s))});else{const s=t().edges,{changes:c}=px(o,s);e({flowEdges:[...a.filter(l=>!i.includes(l.id)),...o],edges:fl(c,s)})}return o}finally{e({flowEdgeLoading:!1})}},deleteFlowNode:async n=>{try{if(!n.id&&!n.source_type&&!n.source_id)throw new Error("Missing flow node indentify");const r=await ue("FlowNode").findOne({where:n.id?{id:n.id}:{source_type:n.source_type,source_id:n.source_id}});if(r){await ue("FlowNode").delete(r.id);const o=t().flowNodes;r.source_type&&r.source_id&&await ue(r.source_type).delete(r.source_id).catch(i=>{jr("Failed to delete source entity",r.source_type,r.source_id,i)});const a=t().nodes;e({flowNodes:o.filter(i=>i.id!==r.id),nodes:Oa([{type:"remove",id:r.id}],a)})}}catch(r){jr("Failed to delete flow node",r)}},deleteFlowEdge:async n=>{try{if(!n.id&&!n.source&&!n.target)throw new Error("Missing flow edge indentify");const r=await ue("FlowEdge").findOne({where:n.id?{id:n.id}:{source:n.source,target:n.target}});if(r){await ue("FlowEdge").delete(r.id);const o=t().flowEdges;e({flowEdges:o.filter(a=>a.id!==r.id)})}}catch(r){jr("Failed to delete flow edge",r)}},updateFlowNode:async(n,r)=>{var o;try{if(!((o=pt.getState().currentSession)!=null&&o.id))throw new Error("Session not found");if(!n.id)throw new Error("Missing flow node indentify");await ue("FlowNode").update(n.id,n);const a=t().flowNodes.map(i=>i.id===n.id?{...i,...n}:i);e({flowNodes:r!=null&&r.silent?a:[...a]})}catch(a){jr("Failed to create or update flow node",a,n)}},createOrUpdateFlowNode:async(n,r)=>{var o;try{const a=pt.getState().currentSession;if(!(a!=null&&a.id))throw new Error("Session not found");if(!n.id&&(!n.source_type||!n.source_id))throw new Error("Missing flow node indentify");let i,s=n!=null&&n.id?t().flowNodes.find(p=>p.id===n.id):void 0;if(!s&&(n.id||n.source_type&&n.source_id)&&(s=await ue("FlowNode").findOne({where:n.id?{id:n.id}:{source_type:n.source_type,source_id:n.source_id}})),s)i=Rf(s,Wc(n,qc)),r!=null&&r.lazy?ue("FlowNode").update(s.id,i):await ue("FlowNode").update(s.id,i);else if(n.source_id&&n.source_type)i={...n,source_id:`${n.source_id}`,source_type:`${n.source_type}`,node_type:n.node_type||"NEW_MESSAGE",session_id:n.session_id||(a==null?void 0:a.id)},r!=null&&r.lazy?(i.id=Pu(),ue("FlowNode").save(i)):i=await ue("FlowNode").save(i);else throw new Error("Missing source id and type");let c;const l=t().nodes.find(p=>p.id===i.id);i.source_type&&!l?c=await ue(i.source_type).findOne({where:{id:n.source_id}}):i.source_type&&l&&(c=(o=l==null?void 0:l.data)==null?void 0:o.entity);const u=t().flowNodes,d=t().nodes,{changes:f}=fx([i],d,{[i.source_type]:[c]});return e({flowNodes:[...u.filter(p=>p.id!==i.id),i],nodes:Oa(f,d)}),i}catch(a){jr("Failed to create or update flow node",a,n)}},createOrUpdateFlowEdge:async(n,r)=>{try{const o=pt.getState().currentSession;if(!(o!=null&&o.id))throw new Error("Session not found");if(!n.id&&(!n.source||!n.target))throw new Error("Missing flow node indentify");let a,i=n!=null&&n.id?t().flowEdges.find(l=>l.id===n.id):void 0;if(i&&(n.id||n.source&&n.target)&&(i=await ue("FlowEdge").findOne({where:n.id?{id:n.id}:{source:n.source,target:n.target}})),i)a=Rf(i,Wc(n,qc)),r!=null&&r.lazy?ue("FlowEdge").update(i.id,a):await ue("FlowEdge").update(i.id,a);else if(n.source&&n.target)a={...n,source:`${n.source}`,target:`${n.target}`,session_id:n.session_id||(o==null?void 0:o.id)},r!=null&&r.lazy?(a.id=Pu(),ue("FlowEdge").save(a)):a=await ue("FlowEdge").save(a);else throw new Error("Missing source and target");const s=t().flowEdges,c=t().edges;return e({flowEdges:[...s.filter(l=>l.id!==a.id),a],edges:fl(px([a],c).changes,c)}),a}catch(o){jr("Failed to create or update flow node",o)}}}),Pne=()=>{var x;const[e,t]=g.useState(),[n,r]=g.useState(),[o,a]=g.useState(),[i,s]=g.useState(),c=g.useRef(),l=g.useRef({}),u=pt(_=>_.currentSession),d=Zn(_=>_.loadModel),f=g.useCallback(async _=>{var j;if(!u)return;const w=await ue("JSONData").findOne({where:{id:_.source_id,session_id:u==null?void 0:u.id}});w&&((j=c.current)==null||j.call(c,w.data?w.data:[]),s({node:_,enity:w}))},[u]),p=g.useCallback(async _=>{var P;const w=(_==null?void 0:_.sessionId)||(u==null?void 0:u.id),j=(_==null?void 0:_.threadNode)||(n==null?void 0:n.threadNode),E=(_==null?void 0:_.prompts)||(e==null?void 0:e.prompts);if(!w||!(j!=null&&j.id))return;const S=E==null?void 0:E.map(k=>{if(k.type!=="few_shot_example")switch(k.role){case"ai":case"assistant":case"tool":return{id:k.id,content:k.content,role:"assistant"};case"system":return{id:k.id,content:k.content,role:"system"};default:return{id:k.id,content:k.content,role:"user"}}}).filter(Boolean),O=await ue("JSONData").save({headers:"item",session_id:w,json:"",data:S});if(!O)return;const N=await ue("FlowNode").save({session_id:w,source_id:O.id,source_type:"JSONData",node_type:"JSON_DATA",x:0,y:0});if(N)return await ue("FlowEdge").save({session_id:w,source:j.id,target:N.id}),(P=c.current)==null||P.call(c,S),s({node:N,enity:O}),{jsonData:O,jsonDataNode:N}},[e==null?void 0:e.prompts,u==null?void 0:u.id,n==null?void 0:n.threadNode]),y=g.useCallback(async()=>{try{if(l.current.handling=u==null?void 0:u.id,!(u!=null&&u.id)||!(u!=null&&u.main_source_id)||(u==null?void 0:u.main_source_type)!=="Thread")return;const[_,w]=await Promise.all([ue("Thread").findOne({where:{id:u.main_source_id,session_id:u.id}}),ue("FlowNode").findOne({where:{source_id:u.main_source_id,source_type:"Thread",session_id:u.id}})]);if(!_||!w)return;const j=await ue("FlowEdge").find({where:{session_id:u.id,target:w.id}}),{flowNodes:E,flowNodeDatas:S}=await mx({where:{session_id:u.id,id:mo(j.map(C=>C.source))}}),O=(await ue("FlowEdge").find({where:{session_id:u.id}})).filter(C=>C.target===w.id).map(C=>{var T;const M=E.find(I=>I.id===C.source);return{connection:C,source:M,entity:(T=S==null?void 0:S[M.source_type])==null?void 0:T.find(I=>I.id===M.source_id)}}),N=O.find(C=>C.source.source_type==="LLM"),P=O.filter(C=>C.source.source_type==="Prompt"),k=O.find(C=>C.source.source_type==="Schema");if(!(N!=null&&N.entity))return;const R=await ue("FlowEdge").findOne({where:{session_id:u.id,source:w.id},order:{id:"DESC"}});if(R){const C=await ue("FlowNode").findOne({where:{id:R.target,session_id:u.id}});if(!C)return;await f(C)}else if(!await p({sessionId:u.id,threadNode:w,prompts:(P==null?void 0:P.map(C=>C.entity))||[]}))return;a({llm:N.entity,status:Mt.Started,progress:""}),r({thread:_,threadNode:w});const A=k==null?void 0:k.entity;if(A){const C=await ue("SchemaItem").find({where:{schema_id:A.id}});A.schema_items=C||[]}t({prompts:(P==null?void 0:P.map(C=>C.entity))||[],schema:A}),l.current.handled=u.id}finally{l.current.handling=void 0}},[p,u==null?void 0:u.id,u==null?void 0:u.main_source_id,u==null?void 0:u.main_source_type,f]),m=g.useCallback(async()=>{if(o!=null&&o.llm.name)try{a(_=>_&&{..._,status:Mt.Loading}),await d(o==null?void 0:o.llm.name,_=>{a(w=>w&&{...w,progress:_.text})}),a(_=>_&&{..._,status:Mt.Loaded,progress:""})}catch{a(_=>_&&{..._,status:Mt.Started,progress:""})}},[(x=o==null?void 0:o.llm)==null?void 0:x.name,d]),v=g.useCallback(_=>(c.current=_,()=>{c.current=void 0}),[]),b=g.useCallback(async _=>{!(i!=null&&i.node)||!(i!=null&&i.enity)||await ue("JSONData").save({...i.enity,data:_})},[i==null?void 0:i.enity,i==null?void 0:i.node]);return g.useEffect(()=>{l.current.handling||(l==null?void 0:l.current.handled)===(u==null?void 0:u.id)||y()},[u==null?void 0:u.id,y]),{...e,loadLLM:m,threadInfo:n,mainLLMInfo:o,currentDataNode:i,updateMessagesData:b,addNewDataNode:p,selectDataNode:f,onThreadMessagesLoaded:v}};class Ane extends Zxe{get lc_attributes(){return{partialVariables:void 0}}constructor(t){super(t),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompts",this._getPromptType()]}),Object.defineProperty(this,"inputVariables",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputParser",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"partialVariables",{enumerable:!0,configurable:!0,writable:!0,value:void 0});const{inputVariables:n}=t;if(n.includes("stop"))throw new Error("Cannot have an input variable named 'stop', as it is used internally, please rename.");Object.assign(this,t)}async mergePartialAndUserVariables(t){const n=this.partialVariables??{},r={};for(const[o,a]of Object.entries(n))typeof a=="string"?r[o]=a:r[o]=await a();return{...r,...t}}async invoke(t,n){return this._callWithConfig(r=>this.formatPromptValue(r),t,{...n,runType:"prompt"})}serialize(){throw new Error("Use .toJSON() instead")}static async deserialize(t){switch(t._type){case"prompt":{const{PromptTemplate:n}=await qt(async()=>{const{PromptTemplate:r}=await Promise.resolve().then(()=>bx);return{PromptTemplate:r}},[]);return n.deserialize(t)}case void 0:{const{PromptTemplate:n}=await qt(async()=>{const{PromptTemplate:r}=await Promise.resolve().then(()=>bx);return{PromptTemplate:r}},void 0);return n.deserialize({...t,_type:"prompt"})}case"few_shot":{const{FewShotPromptTemplate:n}=await qt(async()=>{const{FewShotPromptTemplate:r}=await import("./few_shot-KkkSpKfD.js").then(async o=>(await o.__tla,o));return{FewShotPromptTemplate:r}},__vite__mapDeps([0,1,2,3,4,5,6]));return n.deserialize(t)}default:throw new Error(`Invalid prompt type in config: ${t._type}`)}}}class Tne extends ewe{}class Rne extends Tne{static lc_name(){return"StringPromptValue"}constructor(t){super({value:t}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompt_values"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.value=t}toString(){return this.value}toChatMessages(){return[new Au(this.value)]}}aS=class extends Ane{async formatPromptValue(e){const t=await this.format(e);return new Rne(t)}};var Ine=Object.prototype.toString,Ki=Array.isArray||function(e){return Ine.call(e)==="[object Array]"};function yx(e){return typeof e=="function"}function Dne(e){return Ki(e)?"array":typeof e}function gx(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function MI(e,t){return e!=null&&typeof e=="object"&&t in e}function Lne(e,t){return e!=null&&typeof e!="object"&&e.hasOwnProperty&&e.hasOwnProperty(t)}var Fne=RegExp.prototype.test;function Bne(e,t){return Fne.call(e,t)}var $ne=/\S/;function zne(e){return!Bne($ne,e)}var Vne={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function Une(e){return String(e).replace(/[&<>"'`=\/]/g,function(t){return Vne[t]})}var Hne=/\s*/,Wne=/\s+/,NI=/\s*=/,qne=/\s*\}/,Yne=/#|\^|\/|>|\{|&|=|!/;function Kne(e,t){if(!e)return[];var n=!1,r=[],o=[],a=[],i=!1,s=!1,c="",l=0;function u(){if(i&&!s)for(;a.length;)delete o[a.pop()];else a=[];i=!1,s=!1}var d,f,p;function y(O){if(typeof O=="string"&&(O=O.split(Wne,2)),!Ki(O)||O.length!==2)throw new Error("Invalid tags: "+O);d=new RegExp(gx(O[0])+"\\s*"),f=new RegExp("\\s*"+gx(O[1])),p=new RegExp("\\s*"+gx("}"+O[1]))}y(t||wn.tags);for(var m=new gl(e),v,b,x,_,w,j;!m.eos();){if(v=m.pos,x=m.scanUntil(d),x)for(var E=0,S=x.length;E<S;++E)_=x.charAt(E),zne(_)?(a.push(o.length),c+=_):(s=!0,n=!0,c+=" "),o.push(["text",_,v,v+1]),v+=1,_===`
`&&(u(),c="",l=0,n=!1);if(!m.scan(d))break;if(i=!0,b=m.scan(Yne)||"name",m.scan(Hne),b==="="?(x=m.scanUntil(NI),m.scan(NI),m.scanUntil(f)):b==="{"?(x=m.scanUntil(p),m.scan(qne),m.scanUntil(f),b="&"):x=m.scanUntil(f),!m.scan(f))throw new Error("Unclosed tag at "+m.pos);if(b==">"?w=[b,x,v,m.pos,c,l,n]:w=[b,x,v,m.pos],l++,o.push(w),b==="#"||b==="^")r.push(w);else if(b==="/"){if(j=r.pop(),!j)throw new Error('Unopened section "'+x+'" at '+v);if(j[1]!==x)throw new Error('Unclosed section "'+j[1]+'" at '+v)}else b==="name"||b==="{"||b==="&"?s=!0:b==="="&&y(x)}if(u(),j=r.pop(),j)throw new Error('Unclosed section "'+j[1]+'" at '+m.pos);return Gne(Xne(o))}function Xne(e){for(var t=[],n,r,o=0,a=e.length;o<a;++o)n=e[o],n&&(n[0]==="text"&&r&&r[0]==="text"?(r[1]+=n[1],r[3]=n[3]):(t.push(n),r=n));return t}function Gne(e){for(var t=[],n=t,r=[],o,a,i=0,s=e.length;i<s;++i)switch(o=e[i],o[0]){case"#":case"^":n.push(o),r.push(o),n=o[4]=[];break;case"/":a=r.pop(),a[5]=o[2],n=r.length>0?r[r.length-1][4]:t;break;default:n.push(o)}return t}function gl(e){this.string=e,this.tail=e,this.pos=0}gl.prototype.eos=function(){return this.tail===""},gl.prototype.scan=function(e){var t=this.tail.match(e);if(!t||t.index!==0)return"";var n=t[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n},gl.prototype.scanUntil=function(e){var t=this.tail.search(e),n;switch(t){case-1:n=this.tail,this.tail="";break;case 0:n="";break;default:n=this.tail.substring(0,t),this.tail=this.tail.substring(t)}return this.pos+=n.length,n};function Xi(e,t){this.view=e,this.cache={".":this.view},this.parent=t}Xi.prototype.push=function(e){return new Xi(e,this)},Xi.prototype.lookup=function(e){var t=this.cache,n;if(t.hasOwnProperty(e))n=t[e];else{for(var r=this,o,a,i,s=!1;r;){if(e.indexOf(".")>0)for(o=r.view,a=e.split("."),i=0;o!=null&&i<a.length;)i===a.length-1&&(s=MI(o,a[i])||Lne(o,a[i])),o=o[a[i++]];else o=r.view[e],s=MI(r.view,e);if(s){n=o;break}r=r.parent}t[e]=n}return yx(n)&&(n=n.call(this.view)),n};function dn(){this.templateCache={_cache:{},set:function(e,t){this._cache[e]=t},get:function(e){return this._cache[e]},clear:function(){this._cache={}}}}dn.prototype.clearCache=function(){typeof this.templateCache<"u"&&this.templateCache.clear()},dn.prototype.parse=function(e,t){var n=this.templateCache,r=e+":"+(t||wn.tags).join(":"),o=typeof n<"u",a=o?n.get(r):void 0;return a==null&&(a=Kne(e,t),o&&n.set(r,a)),a},dn.prototype.render=function(e,t,n,r){var o=this.getConfigTags(r),a=this.parse(e,o),i=t instanceof Xi?t:new Xi(t,void 0);return this.renderTokens(a,i,n,e,r)},dn.prototype.renderTokens=function(e,t,n,r,o){for(var a="",i,s,c,l=0,u=e.length;l<u;++l)c=void 0,i=e[l],s=i[0],s==="#"?c=this.renderSection(i,t,n,r,o):s==="^"?c=this.renderInverted(i,t,n,r,o):s===">"?c=this.renderPartial(i,t,n,o):s==="&"?c=this.unescapedValue(i,t):s==="name"?c=this.escapedValue(i,t,o):s==="text"&&(c=this.rawValue(i)),c!==void 0&&(a+=c);return a},dn.prototype.renderSection=function(e,t,n,r,o){var a=this,i="",s=t.lookup(e[1]);function c(d){return a.render(d,t,n,o)}if(s){if(Ki(s))for(var l=0,u=s.length;l<u;++l)i+=this.renderTokens(e[4],t.push(s[l]),n,r,o);else if(typeof s=="object"||typeof s=="string"||typeof s=="number")i+=this.renderTokens(e[4],t.push(s),n,r,o);else if(yx(s)){if(typeof r!="string")throw new Error("Cannot use higher-order sections without the original template");s=s.call(t.view,r.slice(e[3],e[5]),c),s!=null&&(i+=s)}else i+=this.renderTokens(e[4],t,n,r,o);return i}},dn.prototype.renderInverted=function(e,t,n,r,o){var a=t.lookup(e[1]);if(!a||Ki(a)&&a.length===0)return this.renderTokens(e[4],t,n,r,o)},dn.prototype.indentPartial=function(e,t,n){for(var r=t.replace(/[^ \t]/g,""),o=e.split(`
`),a=0;a<o.length;a++)o[a].length&&(a>0||!n)&&(o[a]=r+o[a]);return o.join(`
`)},dn.prototype.renderPartial=function(e,t,n,r){if(n){var o=this.getConfigTags(r),a=yx(n)?n(e[1]):n[e[1]];if(a!=null){var i=e[6],s=e[5],c=e[4],l=a;s==0&&c&&(l=this.indentPartial(a,c,i));var u=this.parse(l,o);return this.renderTokens(u,t,n,l,r)}}},dn.prototype.unescapedValue=function(e,t){var n=t.lookup(e[1]);if(n!=null)return n},dn.prototype.escapedValue=function(e,t,n){var r=this.getConfigEscape(n)||wn.escape,o=t.lookup(e[1]);if(o!=null)return typeof o=="number"&&r===wn.escape?String(o):r(o)},dn.prototype.rawValue=function(e){return e[1]},dn.prototype.getConfigTags=function(e){return Ki(e)?e:e&&typeof e=="object"?e.tags:void 0},dn.prototype.getConfigEscape=function(e){if(e&&typeof e=="object"&&!Ki(e))return e.escape};var wn={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(e){vl.templateCache=e},get templateCache(){return vl.templateCache}},vl=new dn;wn.clearCache=function(){return vl.clearCache()},wn.parse=function(e,t){return vl.parse(e,t)},wn.render=function(e,t,n,r){if(typeof e!="string")throw new TypeError('Invalid template! Template should be a "string" but "'+Dne(e)+'" was given as the first argument for mustache#render(template, view, partials)');return vl.render(e,t,n,r)},wn.escape=Une,wn.Scanner=gl,wn.Context=Xi,wn.Writer=dn;function kI(){wn.escape=e=>e}let vx,PI,AI,TI,RI,Ff,II,DI;vx=e=>{const t=e.split(""),n=[],r=(a,i)=>{for(let s=i;s<t.length;s+=1)if(a.includes(t[s]))return s;return-1};let o=0;for(;o<t.length;)if(t[o]==="{"&&o+1<t.length&&t[o+1]==="{")n.push({type:"literal",text:"{"}),o+=2;else if(t[o]==="}"&&o+1<t.length&&t[o+1]==="}")n.push({type:"literal",text:"}"}),o+=2;else if(t[o]==="{"){const a=r("}",o);if(a<0)throw new Error("Unclosed '{' in template.");n.push({type:"variable",name:t.slice(o+1,a).join("")}),o=a+1}else{if(t[o]==="}")throw new Error("Single '}' in template.");{const a=r("{}",o),i=(a<0?t.slice(o):t.slice(o,a)).join("");n.push({type:"literal",text:i}),o=a<0?t.length:a}}return n},PI=e=>e.map(t=>t[0]==="name"?{type:"variable",name:t[1].includes(".")?t[1].split(".")[0]:t[1]}:["#","&","^",">"].includes(t[0])?{type:"variable",name:t[1]}:{type:"literal",text:t[1]}),AI=e=>{kI();const t=wn.parse(e);return PI(t)},TI=(e,t)=>vx(e).reduce((n,r)=>{if(r.type==="variable"){if(r.name in t)return n+t[r.name];throw new Error(`(f-string) Missing value for input ${r.name}`)}return n+r.text},""),RI=(e,t)=>(kI(),wn.render(e,t)),Ff={"f-string":TI,mustache:RI},II={"f-string":vx,mustache:AI},oi=(e,t,n)=>Ff[t](e,n),DI=(e,t)=>II[t](e),iS=(e,t,n)=>{if(!(t in Ff)){const r=Object.keys(Ff);throw new Error(`Invalid template format. Got \`${t}\`;
                         should be one of ${r}`)}try{const r=n.reduce((o,a)=>(o[a]="foo",o),{});Array.isArray(e)?e.forEach(o=>{if(o.type==="text")oi(o.text,t,r);else if(o.type==="image_url")if(typeof o.image_url=="string")oi(o.image_url,t,r);else{const a=o.image_url.url;oi(a,t,r)}else throw new Error(`Invalid message template received. ${JSON.stringify(o,null,2)}`)}):oi(e,t,r)}catch(r){throw new Error(`Invalid prompt schema: ${r.message}`)}},ha=class extends aS{static lc_name(){return"PromptTemplate"}constructor(e){if(super(e),Object.defineProperty(this,"template",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"templateFormat",{enumerable:!0,configurable:!0,writable:!0,value:"f-string"}),Object.defineProperty(this,"validateTemplate",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"additionalContentFields",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e.templateFormat==="mustache"&&e.validateTemplate===void 0&&(this.validateTemplate=!1),Object.assign(this,e),this.validateTemplate){if(this.templateFormat==="mustache")throw new Error("Mustache templates cannot be validated.");let t=this.inputVariables;this.partialVariables&&(t=t.concat(Object.keys(this.partialVariables))),iS(this.template,this.templateFormat,t)}}_getPromptType(){return"prompt"}async format(e){const t=await this.mergePartialAndUserVariables(e);return oi(this.template,this.templateFormat,t)}static fromExamples(e,t,n,r=`

`,o=""){const a=[o,...e,t].join(r);return new ha({inputVariables:n,template:a})}static fromTemplate(e,t){const{templateFormat:n="f-string",...r}=t??{},o=new Set;return DI(e,n).forEach(a=>{a.type==="variable"&&o.add(a.name)}),new ha({inputVariables:[...o],templateFormat:n,template:e,...r})}async partial(e){const t=this.inputVariables.filter(o=>!(o in e)),n={...this.partialVariables??{},...e},r={...this,inputVariables:t,partialVariables:n};return new ha(r)}serialize(){if(this.outputParser!==void 0)throw new Error("Cannot serialize a prompt template with an output parser");return{_type:this._getPromptType(),input_variables:this.inputVariables,template:this.template,template_format:this.templateFormat}}static async deserialize(e){if(!e.template)throw new Error("Prompt template must have a template");return new ha({inputVariables:e.input_variables,template:e.template,templateFormat:e.template_format})}};let bx,xx,LI,FI,BI,wx,$I,zI,VI,UI,HI,WI,qI,YI,KI,XI,Ko,Bf,Gi,At;bx=Object.freeze(Object.defineProperty({__proto__:null,PromptTemplate:ha},Symbol.toStringTag,{value:"Module"})),xx=e=>e?e.reduce((t,n)=>{var a,i,s,c,l;const r=(a=n.node.data)==null?void 0:a.entity,o=(c=(s=(i=n==null?void 0:n.connectedNodes)==null?void 0:i.find(u=>u.type===ae.Schema))==null?void 0:s.data)==null?void 0:c.entity;return r&&((l=o==null?void 0:o.schema_items)!=null&&l.length)&&t.push({name:r.name,description:r.description,schemaItems:o.schema_items}),t},[]):[],LI=()=>{const[e]=g.useState(!1),t=Tu(a=>a.similaritySearchWithScore),{stream:n}=Fm(),r=g.useCallback(async(a,i)=>{const{placeholders:s}=i||{};if(!(s!=null&&s.length))return[];const c=[];return await Promise.all(s.map(async l=>{var d,f,p,y,m,v;const u=(d=l.node.data)==null?void 0:d.entity;if(u)switch(u.placeholder_type){case si.VECTOR_DATABASE_RETREIVER:{const b=(f=l.connectedNodes)==null?void 0:f.find(_=>_.type===ae.VectorDatabase),x=(p=b==null?void 0:b.data)==null?void 0:p.entity;return(v=(m=(y=l.connectedNodes)==null?void 0:y.find(_=>_.type===ae.Prompt))==null?void 0:m.data)!=null&&v.entity,void 0}}})),c},[t]),o=g.useCallback(async(a,i,s,c,{schema:l,onMessageUpdate:u})=>{const{tools:d,placeholders:f}=s||{},p=[];f!=null&&f.length&&p.push(...await r(a,s));const y=i.map(v=>v.role==="system"?new x$(v.content):v.role==="user"?new Au(v.content):new Dh(v.content)),{content:m}=await n(y,{tools:xx(d),schemas:l?[l]:void 0,onMessageUpdate:({content:v})=>{u==null||u({nodeData:{loading:!0,content:v}})}});return u==null||u({nodeData:{content:m}}),m},[r,n]);return{loading:e,sendMessage:o}},FI=ei(({onDelete:e})=>{const{t}=Pe("dialogs"),[n,r]=g.useState(!1),o=sn(),{toast:a}=en(),i=async()=>{try{r(!0),await e(),o.hide()}catch{a({variant:"destructive",description:t("delete_chat_data_node.errors.delete_failed")})}finally{r(!1)}};return h.jsx(mM,{open:o.visible,onOpenChange:o.hide,children:h.jsxs(Wy,{children:[h.jsxs(qy,{children:[h.jsx(Ky,{children:t("delete_chat_data_node.title")}),h.jsx(Xy,{children:t("delete_chat_data_node.description")})]}),h.jsxs(Yy,{children:[h.jsx(Qy,{onClick:o.hide,children:t("delete_chat_data_node.cancel")}),h.jsx(Gy,{disabled:n,onClick:i,children:t("delete_chat_data_node.delete")})]})]})})}),Mn=g.memo(e=>{const{loading:t,...n}=e;return h.jsx(ut,{...n,disabled:e.disabled||t,children:t?h.jsx(de,{name:"loader-circle",className:"animate-spin"}):e.children})}),BI=e=>{const t=(n,r=null)=>{let o=`{
`;return n.filter(a=>a.parent_id===r).forEach(a=>{if(a.type==="object"){const i=e.filter(c=>c.parent_id===a.id),s=t(i,a.id);o+=`  ${a.name}${a.required?"":"?"}: ${s}
`}else o+=`  // ${a.description||""}
  ${a.name}${a.required?"":"?"}: ${a.type};
`}),o+="}",o};return t(e)},wx=e=>{const t=(r,o=null)=>{let a="";return r.filter(i=>i.parent_id===o).forEach(i=>{if(i.type==="object"){const s=t(r,i.id);a+=`    ${i.name}: z.object({
${s}    })${i.required?"":".optional()"}.describe('${i.description||""}'),
`}else a+=`    ${i.name}: z.${i.type}()${i.required?"":".optional()"}.describe('${i.description||""}'),
`}),a};let n=`const schema = z.object({
`;return n+=t(e),n+="});",n},$I=e=>g.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",fill:"none",height:192,viewBox:"0 0 150 150",width:192,...e},g.createElement("clipPath",{id:"a"},g.createElement("path",{d:"m0 0h150v150h-150z"})),g.createElement("g",{clipPath:"url(#a)"},g.createElement("path",{d:"m150 0h-150v150h150z",fill:"#29b5e8"}),g.createElement("path",{clipRule:"evenodd",d:"m130.375 67.2532-14.096 8.1221 14.096 8.0536c.843.4872 1.581 1.1357 2.174 1.9084.592.7727 1.026 1.6545 1.278 2.5951.251.9406.315 1.9215.188 2.8867-.128.9652-.444 1.8959-.931 2.7388-.488.843-1.136 1.5817-1.909 2.174s-1.654 1.0267-2.595 1.2782-1.921.3154-2.887.1878c-.965-.1275-1.896-.444-2.739-.9312l-25.2559-14.5496c-1.1575-.6696-2.1128-1.6394-2.765-2.8068-.6523-1.1674-.9773-2.4893-.9408-3.826.0198-.5792.1089-1.1538.2653-1.7117.517-1.8711 1.7458-3.4654 3.4234-4.4419l25.256-14.4983c.847-.4892 1.782-.8067 2.751-.9343.97-.1275 1.955-.0627 2.899.1909.945.2536 1.83.6909 2.605 1.287.775.596 1.425 1.3391 1.913 2.1866.49.8402.808 1.7693.935 2.7334.128.964.063 1.9439-.191 2.8826-.254.9388-.692 1.8177-1.288 2.5859-.597.7681-1.34 1.4101-2.186 1.8887zm-13.343 39.3698-25.2478-14.5243c-1.1296-.6483-2.4091-.9896-3.7115-.9902s-2.5823.3397-3.7124.987c-1.1301.6472-2.0712 1.579-2.7297 2.7026-.6585 1.1237-1.0115 2.4001-1.0239 3.7024v29.0135c.0654 1.928.8772 3.755 2.264 5.095 1.3869 1.341 3.2403 2.09 5.1691 2.09 1.9289 0 3.7823-.749 5.1691-2.09 1.3868-1.34 2.1986-3.167 2.264-5.095v-16.261l14.1301 8.122c.843.488 1.774.805 2.739.933.966.128 1.947.064 2.888-.187s1.823-.685 2.596-1.277c.774-.592 1.423-1.331 1.91-2.174.488-.843.805-1.773.933-2.739.128-.965.065-1.946-.186-2.887s-.685-1.824-1.277-2.597-1.331-1.422-2.174-1.91zm-29.0992-28.3806-10.527 10.3986c-.3601.3349-.8269.5319-1.318.5563h-3.0897c-.49-.0294-.9551-.2257-1.318-.5563l-10.4671-10.4329c-.3274-.3573-.521-.817-.5478-1.3009v-3.081c.0283-.4861.2215-.9481.5478-1.3095l10.4671-10.4329c.3637-.3281.829-.5214 1.318-.5477h3.0897c.4899.0228.9562.2166 1.318.5477l10.4928 10.4329c.3237.3623.514.8243.5392 1.3095v3.081c-.0237.483-.2143.9428-.5392 1.3009zm-8.3874-2.8928c-.0404-.499-.2485-.9696-.5905-1.3352l-3.0383-3.004c-.3641-.3275-.8291-.5207-1.318-.5478h-.1113c-.4867.0255-.9495.2191-1.3094.5478l-3.0383 3.004c-.3262.3676-.5165.8358-.5392 1.3266v.1113c.0215.4834.2124.9439.5392 1.3009l3.0554 2.9955c.3607.3274.823.5208 1.3094.5477h.1113c.4889-.027.9539-.2203 1.318-.5477l3.0383-3.0212c.3282-.3576.5244-.8166.5563-1.3009zm-47.4914-31.2217 25.2563 14.4811c1.1308.648 2.4115.989 3.7149.9889 1.3033 0 2.584-.3409 3.7148-.989 1.1309-.648 2.0725-1.5806 2.7314-2.7051.659-1.1245 1.0123-2.4018 1.0249-3.7051v-28.9879c-.0654-1.9277-.8772-3.7546-2.264-5.0952s-3.2402-2.0899-5.1691-2.0899c-1.9288 0-3.7822.7493-5.169 2.0899-1.3869 1.3406-2.1987 3.1675-2.2641 5.0952v16.2613l-14.1473-8.1307c-.8429-.4877-1.7737-.8047-2.7392-.9328-.9654-.1281-1.9466-.0647-2.8876.1864s-1.8232.6852-2.5965 1.2773c-.7732.5921-1.4222 1.3307-1.91 2.1736-.4878.843-.8048 1.7738-.9329 2.7392-.128.9655-.0647 1.9467.1864 2.8876.2512.941.6852 1.8233 1.2773 2.5965.5921.7733 1.3307 1.4223 2.1737 1.9101zm55.4252 15.4739c1.4914.118 2.9836-.2193 4.2793-.9671l25.2475-14.5496c.843-.4877 1.582-1.1368 2.174-1.91s1.026-1.6555 1.277-2.5965.315-1.9222.187-2.8876c-.128-.9655-.445-1.8962-.933-2.7392-.488-.8429-1.137-1.5816-1.91-2.1737-.774-.5921-1.656-1.0261-2.597-1.2772-1.9-.5072-3.924-.2387-5.627.7464l-14.1298 8.1991v-16.2613c-.0654-1.9277-.8772-3.7546-2.264-5.0952-1.3868-1.3405-3.2402-2.0899-5.1691-2.0899-1.9288 0-3.7822.7494-5.169 2.0899-1.3869 1.3406-2.1987 3.1675-2.2641 5.0952v29.0136c-.0023 1.8784.7086 3.6876 1.9892 5.0619 1.2805 1.3743 3.0351 2.2111 4.909 2.3412zm-25.8554 31.5298c-1.4916-.1213-2.9847.2162-4.2793.9671l-25.2905 14.4893c-1.7024.985-2.9438 2.607-3.451 4.507s-.2387 3.924.7465 5.627c.9851 1.702 2.6061 2.943 4.5065 3.451 1.9004.507 3.9244.238 5.6268-.747l14.1473-8.122v16.261c.0654 1.928.8772 3.755 2.2641 5.096 1.3868 1.34 3.2402 2.09 5.169 2.09 1.9289 0 3.7823-.75 5.1691-2.09 1.3868-1.341 2.1986-3.168 2.264-5.096v-29.0645c-.0038-1.869-.7144-3.6673-1.9891-5.0341s-3.0192-2.2009-4.8834-2.3348zm-6.8468-13.5825c.4875-1.6032.414-3.3247-.2083-4.8806-.6224-1.5559-1.7564-2.8532-3.2152-3.6779l-25.2306-14.541c-1.704-.976-3.7248-1.2385-5.6216-.7303-1.8968.5083-3.5155 1.7461-4.5032 3.4433-.4889.84-.8065 1.7686-.9343 2.732-.1278.9635-.0632 1.9428.1899 2.8811.2531.9384.6897 1.8173 1.2846 2.5858.595.7686 1.3364 1.4115 2.1814 1.8917l14.096 8.1221-14.096 8.0536c-.8429.4861-1.5819 1.1334-2.1746 1.9051-.5928.7717-1.0277 1.6526-1.2801 2.5923-.2523.9398-.317 1.9201-.1905 2.8849s.4418 1.8952.9279 2.7382c.4861.8429 1.1335 1.5819 1.9051 2.1746.7717.5928 1.6526 1.0277 2.5924 1.2801.9397.2523 1.92.317 2.8848.1905s1.8952-.4418 2.7382-.9279l25.2306-14.5496c1.6248-.9071 2.8451-2.3965 3.4149-4.168z",fill:"#fff",fillRule:"evenodd"}))),zI=e=>g.createElement("svg",{className:"mr-2 w-5 h-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",width:48,height:48,...e},g.createElement("path",{fill:"#fbc02d",d:"M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12 s5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24s8.955,20,20,20 s20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"}),g.createElement("path",{fill:"#e53935",d:"M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039 l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"}),g.createElement("path",{fill:"#4caf50",d:"M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36 c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"}),g.createElement("path",{fill:"#1565c0",d:"M43.611,20.083L43.595,20L42,20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571 c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z"})),VI=e=>g.createElement("svg",{className:"mr-2 w-5 h-5",width:1024,height:1024,viewBox:"0 0 1024 1024",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},g.createElement("path",{d:"M44.522 44.5217H489.739V489.739H44.522V44.5217Z",fill:"#F35325"}),g.createElement("path",{d:"M534.261 44.5217H979.478V489.739H534.261V44.5217Z",fill:"#81BC06"}),g.createElement("path",{d:"M44.522 534.261H489.739V979.478H44.522V534.261Z",fill:"#05A6F0"}),g.createElement("path",{d:"M534.261 534.261H979.478V979.478H534.261V534.261Z",fill:"#FFBA08"})),UI=e=>g.createElement("svg",{id:"Layer_1","data-name":"Layer 1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 287.56 191",...e},g.createElement("defs",null,g.createElement("style",null,".cls-1{fill:#0081fb;}.cls-2{fill:url(#linear-gradient);}.cls-3{fill:url(#linear-gradient-2);}"),g.createElement("linearGradient",{id:"linear-gradient",x1:62.34,y1:101.45,x2:260.34,y2:91.45,gradientTransform:"matrix(1, 0, 0, -1, 0, 192)",gradientUnits:"userSpaceOnUse"},g.createElement("stop",{offset:0,stopColor:"#0064e1"}),g.createElement("stop",{offset:.4,stopColor:"#0064e1"}),g.createElement("stop",{offset:.83,stopColor:"#0073ee"}),g.createElement("stop",{offset:1,stopColor:"#0082fb"})),g.createElement("linearGradient",{id:"linear-gradient-2",x1:41.42,y1:53,x2:41.42,y2:126,gradientTransform:"matrix(1, 0, 0, -1, 0, 192)",gradientUnits:"userSpaceOnUse"},g.createElement("stop",{offset:0,stopColor:"#0082fb"}),g.createElement("stop",{offset:1,stopColor:"#0064e0"}))),g.createElement("title",null,"facebook-meta"),g.createElement("path",{className:"cls-1",d:"M31.06,126c0,11,2.41,19.41,5.56,24.51A19,19,0,0,0,53.19,160c8.1,0,15.51-2,29.79-21.76,11.44-15.83,24.92-38,34-52l15.36-23.6c10.67-16.39,23-34.61,37.18-47C181.07,5.6,193.54,0,206.09,0c21.07,0,41.14,12.21,56.5,35.11,16.81,25.08,25,56.67,25,89.27,0,19.38-3.82,33.62-10.32,44.87C271,180.13,258.72,191,238.13,191V160c17.63,0,22-16.2,22-34.74,0-26.42-6.16-55.74-19.73-76.69-9.63-14.86-22.11-23.94-35.84-23.94-14.85,0-26.8,11.2-40.23,31.17-7.14,10.61-14.47,23.54-22.7,38.13l-9.06,16c-18.2,32.27-22.81,39.62-31.91,51.75C84.74,183,71.12,191,53.19,191c-21.27,0-34.72-9.21-43-23.09C3.34,156.6,0,141.76,0,124.85Z"}),g.createElement("path",{className:"cls-2",d:"M24.49,37.3C38.73,15.35,59.28,0,82.85,0c13.65,0,27.22,4,41.39,15.61,15.5,12.65,32,33.48,52.63,67.81l7.39,12.32c17.84,29.72,28,45,33.93,52.22,7.64,9.26,13,12,19.94,12,17.63,0,22-16.2,22-34.74l27.4-.86c0,19.38-3.82,33.62-10.32,44.87C271,180.13,258.72,191,238.13,191c-12.8,0-24.14-2.78-36.68-14.61-9.64-9.08-20.91-25.21-29.58-39.71L146.08,93.6c-12.94-21.62-24.81-37.74-31.68-45C107,40.71,97.51,31.23,82.35,31.23c-12.27,0-22.69,8.61-31.41,21.78Z"}),g.createElement("path",{className:"cls-3",d:"M82.35,31.23c-12.27,0-22.69,8.61-31.41,21.78C38.61,71.62,31.06,99.34,31.06,126c0,11,2.41,19.41,5.56,24.51L10.14,167.91C3.34,156.6,0,141.76,0,124.85,0,94.1,8.44,62.05,24.49,37.3,38.73,15.35,59.28,0,82.85,0Z"})),HI=e=>g.createElement("svg",{className:"mr-2 w-5 h-5",width:256,height:233,viewBox:"0 0 256 233",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},g.createElement("path",{d:"M186.182 0h46.545v46.545h-46.545z"}),g.createElement("path",{fill:"#f7d046",d:"M209.455 0H256v46.545h-46.545z"}),g.createElement("path",{d:"M0 0h46.545v46.545H0zm0 46.545h46.545V93.09H0zm0 46.546h46.545v46.545H0zm0 46.545h46.545v46.545H0zm0 46.546h46.545v46.545H0z"}),g.createElement("path",{fill:"#f7d046",d:"M23.273 0h46.545v46.545H23.273z"}),g.createElement("path",{fill:"#f2a73b",d:"M209.455 46.545H256V93.09h-46.545zm-186.182 0h46.545V93.09H23.273z"}),g.createElement("path",{d:"M139.636 46.545h46.545V93.09h-46.545z"}),g.createElement("path",{fill:"#f2a73b",d:"M162.909 46.545h46.545V93.09h-46.545zm-93.091 0h46.545V93.09H69.818z"}),g.createElement("path",{fill:"#ee792f",d:"M116.364 93.091h46.545v46.545h-46.545zm46.545 0h46.545v46.545h-46.545zm-93.091 0h46.545v46.545H69.818z"}),g.createElement("path",{d:"M93.091 139.636h46.545v46.545H93.091z"}),g.createElement("path",{fill:"#eb5829",d:"M116.364 139.636h46.545v46.545h-46.545z"}),g.createElement("path",{fill:"#ee792f",d:"M209.455 93.091H256v46.545h-46.545zm-186.182 0h46.545v46.545H23.273z"}),g.createElement("path",{d:"M186.182 139.636h46.545v46.545h-46.545z"}),g.createElement("path",{fill:"#eb5829",d:"M209.455 139.636H256v46.545h-46.545z"}),g.createElement("path",{d:"M186.182 186.182h46.545v46.545h-46.545z"}),g.createElement("path",{fill:"#eb5829",d:"M23.273 139.636h46.545v46.545H23.273z"}),g.createElement("path",{fill:"#ea3326",d:"M209.455 186.182H256v46.545h-46.545zm-186.182 0h46.545v46.545H23.273z"})),WI="/NoLLMChat/assets/qwen-B-gSh3_v.webp",qI="/NoLLMChat/assets/smollm-CikBjd4F.png",YI="/NoLLMChat/assets/stablelm-BquePdQ7.png",KI="/NoLLMChat/assets/nomic-BjJqoFji.webp",XI="/NoLLMChat/assets/joshua-ByaReJuI.webp",Ko=g.memo(({name:e,className:t,...n})=>(e=e.toLowerCase(),e.includes("gemma")?h.jsx(zI,{className:Q("w-5 h-5",t),...n}):e!=null&&e.includes("qwen")?h.jsx("img",{className:Q("w-5 h-5",t),src:WI,alt:"qwen",...n}):e!=null&&e.includes("phi")?h.jsx(VI,{className:Q("w-5 h-5",t),...n}):e!=null&&e.includes("llama")?h.jsx(UI,{className:Q("w-5 h-5",t),...n}):e!=null&&e.includes("smollm")?h.jsx("img",{className:Q("w-5 h-5",t),src:qI,alt:"smollm",...n}):e!=null&&e.includes("mistral")?h.jsx(HI,{className:Q("w-5 h-5",t),...n}):e!=null&&e.includes("snowflake")?h.jsx($I,{className:Q("w-5 h-5 rounded-full",t),...n}):e!=null&&e.includes("stablelm")?h.jsx("img",{className:Q("w-5 h-5 rounded-full",t),src:YI,alt:"stablelm",...n}):e!=null&&e.includes("nomic")?h.jsx("img",{className:Q("w-5 h-5 rounded-full",t),src:KI,alt:"nomic",...n}):e!=null&&e.includes("Xenova")||e!=null&&e.includes("janus")?h.jsx("img",{className:Q("w-5 h-5 rounded-full",t),src:XI,alt:"Xenova",...n}):h.jsx(de,{className:Q("w-5 h-5",t),name:"brain"}))),Bf=["Qwen2.5-1.5B-Instruct-q4f32_1-MLC","Qwen2.5-Coder-1.5B-Instruct-q4f16_1-MLC","stablelm-2-zephyr-1_6b-q4f16_1-MLC-1k","Phi-3.5-mini-instruct-q4f16_1-MLC-1k","Llama-3.2-3B-Instruct-q4f32_1-MLC"],Gi=g.memo(e=>{var s;const{name:t,model:n,isCached:r,isFunctionCalling:o}=e,{t:a}=Pe("atoms"),i=g.useCallback(c=>c===1?"llm_info.model_types.embedding":c===2?"llm_info.model_types.vlm":"llm_info.model_types.llm",[]);if(n)return h.jsxs(h.Fragment,{children:[h.jsx(tn,{className:"",children:a(i(n.model_type))}),Bf.some(c=>t&&c.includes(t))?h.jsx(tn,{className:"",variant:"outline",children:a("llm_info.recommended")}):null,r?h.jsx(tn,{className:"",variant:"outline",children:a("llm_info.cached")}):null,o?h.jsx(tn,{className:"",variant:"outline",children:a("llm_info.function_calling")}):null,n!=null&&n.low_resource_required?h.jsx(tn,{className:"",variant:"outline",children:a("llm_info.low_resource_required")}):null,(s=n==null?void 0:n.overrides)!=null&&s.context_window_size?h.jsxs(tn,{className:"",variant:"outline",children:[n.overrides.context_window_size.toLocaleString("en-US")," Tokens"]}):null,n!=null&&n.vram_required_MB?h.jsxs(tn,{className:"",variant:"outline",children:["VRAM: ",n.vram_required_MB.toLocaleString("en-US")," MB"]}):null]})}),At=g.forwardRef(({className:e,...t},n)=>h.jsx("div",{ref:n,className:Q("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t})),At.displayName="Card";const fn=g.forwardRef(({className:e,...t},n)=>h.jsx("div",{ref:n,className:Q("flex flex-col space-y-1.5 p-6",e),...t}));fn.displayName="CardHeader";const _n=g.forwardRef(({className:e,...t},n)=>h.jsx("h3",{ref:n,className:Q("text-2xl font-semibold leading-none tracking-tight",e),...t}));_n.displayName="CardTitle";const GI=g.forwardRef(({className:e,...t},n)=>h.jsx("p",{ref:n,className:Q("text-sm text-muted-foreground",e),...t}));GI.displayName="CardDescription";const pn=g.forwardRef(({className:e,...t},n)=>h.jsx("div",{ref:n,className:Q("p-6 pt-0",e),...t}));pn.displayName="CardContent";const Xo=g.forwardRef(({className:e,...t},n)=>h.jsx("div",{ref:n,className:Q("flex items-center p-6 pt-0",e),...t}));Xo.displayName="CardFooter";const Qne=g.memo(({llm:e,status:t,loadLLM:n,progress:r})=>{const{t:o}=Pe("flows"),[a,i]=g.useState();g.useEffect(()=>{a||!(e!=null&&e.name)||qt(()=>import("./index-DnLurQHa.js").then(async l=>(await l.__tla,l)),__vite__mapDeps([7,1,2,3,4,5,6])).then(async({hasModelInCache:l,functionCallingModelIds:u,prebuiltAppConfig:d})=>{const f=await l(e==null?void 0:e.name);i({hasCache:f,isFunctionCalling:u.includes(e==null?void 0:e.name),info:d.model_list.find(p=>p.model_id===(e==null?void 0:e.name))})})},[e==null?void 0:e.name,a]);const s=g.useCallback(async()=>{await(n==null?void 0:n())},[n]),c=g.useMemo(()=>{switch(t){case Mt.Downloading:return h.jsx(de,{className:"animate-spin w-7 h-7",name:"arrow-big-down-dash"});case Mt.Loaded:return h.jsx(Ko,{name:(e==null?void 0:e.name)||"brain",className:"w-7 h-7"});default:return h.jsx(Ko,{name:(e==null?void 0:e.name)||"brain",className:"w-7 h-7"})}},[e==null?void 0:e.name,t]);return h.jsx(At,{className:"flex justify-center !bg-inherit !p-2 max-w-full overflow-y-hidden !mb-2 m-2 !mt-0",children:h.jsxs("div",{className:"ml-2 pt-1 max-w-full",children:[h.jsxs("p",{className:"flex gap-2 items-center pr-6 !text-sm font-semibold",children:[c,`${(e==null?void 0:e.name)||""}`]}),h.jsxs("div",{className:"max-w-full mt-2 flex-wrap flex gap-1",children:[h.jsx(Gi,{model:a==null?void 0:a.info,isFunctionCalling:(a==null?void 0:a.isFunctionCalling)||!1,name:e==null?void 0:e.name,isCached:(a==null?void 0:a.hasCache)||!1}),t!==Mt.Loaded?r?h.jsx("div",{className:"text-sm break-words flex-wrap",children:r}):h.jsx(ut,{disabled:t===Mt.Loading,onClick:s,className:"mt-4 w-full",children:o(a!=null&&a.hasCache?"llm_node.load_model_button":"llm_node.download_model_button")}):void 0]})]})})}),Jne=e=>{const[t,n]=g.useState([]),r=pt(i=>i.currentSession),o=g.useCallback(async()=>{if(!e||!(r!=null&&r.id))return;const i=await ue("FlowEdge").find({where:{session_id:r.id,source:e.id},order:{id:"DESC"}}),{flowNodes:s,flowNodeDatas:c}=await mx({where:{session_id:r.id,id:mo(i.map(l=>l.target)),source_type:"JSONData"},order:{updated_at:"DESC"},select:["id","source_id","source_type","updated_at"]});n(s.reduce((l,u)=>{var f;const d=(f=c[u.source_type])==null?void 0:f.find(p=>p.id===u.source_id);return d&&l.push({node:u,entity:d}),l},[]))},[r==null?void 0:r.id,e]),a=g.useCallback(async i=>{await ue("FlowNode").delete(i.id),await ue("JSONData").delete(i.source_id);const s=await ue("FlowEdge").find({where:[{source:i.id},{target:i.id}]});await Promise.all(s.map(c=>ue("FlowEdge").delete(c.id))),o()},[o]);return g.useEffect(()=>{e&&o()},[o,e]),{chatList:t,deleteChat:a,getChatList:o}},Zne=g.lazy(()=>qt(()=>import("./index-TkYuoEXb.js").then(async e=>(await e.__tla,e)),__vite__mapDeps([8,9,1,2,10,11])));function ere({schema:e,mainLLMInfo:t,loadLLM:n,threadNode:r,onSelectThread:o,onAddNewThread:a,currentDataNode:i,...s}){var b,x;const{t:c}=Pe("applications"),[l,u]=g.useState(!1),d=sn(FI),{chatList:f,getChatList:p,deleteChat:y}=Jne(r),m=g.useCallback(async()=>{try{u(!0),await(a==null?void 0:a()),p()}finally{u(!1)}},[p,a]),v=g.useCallback(async(_,w)=>{_.stopPropagation(),d.show({onDelete:()=>y(w)})},[y,d]);return h.jsxs(By,{variant:"sidebar",side:"right",collapsible:"none",...s,children:[h.jsx("div",{className:"h-1"}),h.jsxs(Cc,{className:"justify-between",children:[h.jsx("div",{className:"text-sm pl-2",children:c("chat.history")}),h.jsx(Mn,{loading:l,onClick:m,variant:"link",className:"mr-[-6px]",children:h.jsx(de,{name:"circle-plus"})})]}),h.jsxs(zy,{children:[h.jsx(Sc,{className:"flex-1",children:h.jsx(xi,{children:f.map(({node:_},w)=>{var j;return h.jsx(Jr,{onClick:()=>o(_),children:h.jsx(Zr,{className:"cursor-pointer",children:h.jsxs("div",{className:"flex flex-row justify-between items-center w-full",children:[h.jsxs("div",{className:"flex gap-2",children:[h.jsx(de,{size:16,name:((j=i==null?void 0:i.node)==null?void 0:j.id)===_.id?"check":"chevron-right",className:"ml-auto transition-transform duration-200 group-data-[state=open]/collapsible:rotate-90"}),h.jsx("span",{children:`Thread ${w+1}`})]}),h.jsx(de,{onClick:E=>v(E,_),size:16,name:"trash-2"})]})})},_.id)})})}),(b=e==null?void 0:e.schema_items)!=null&&b.length?h.jsx("div",{className:"m-2 !mb-0",children:h.jsx(g.Suspense,{fallback:h.jsx(Ad,{}),children:h.jsx(Zne,{className:Q("overflow-hidden break-words whitespace-pre-wrap w-full rounded-lg"),source:(x=e==null?void 0:e.schema_items)!=null&&x.length?`\`\`\`javascript
${wx((e==null?void 0:e.schema_items)||[])}
\`\`\``:""})})}):void 0,h.jsx(Qne,{llm:t==null?void 0:t.llm,status:t==null?void 0:t.status,progress:t==null?void 0:t.progress,loadLLM:n})]})]})}const tre=g.lazy(()=>qt(()=>import("./index-TkYuoEXb.js").then(async e=>(await e.__tla,e)),__vite__mapDeps([8,9,1,2,10,11]))),nre=[{icon:vwe,label:"Copy"},{icon:xwe,label:"Refresh"},{icon:_we,label:"Volume"}],rre=g.memo(()=>{const{t:e}=Pe("applications"),t=g.useRef(!1),[n,r]=g.useState(!1),o=g.useCallback(()=>{setTimeout(()=>{S.current&&(S.current.scrollTop=S.current.scrollHeight)},50)},[]),{schema:a,threadInfo:i,mainLLMInfo:s,currentDataNode:c,loadLLM:l,addNewDataNode:u,selectDataNode:d,updateMessagesData:f,onThreadMessagesLoaded:p}=Pne(),{sendMessage:y}=LI(),{input:m,messages:v,isLoading:b,reload:x,setInput:_,handleSubmit:w,handleInputChange:j,setMessages:E}=QE({fetch:async(R,A)=>{try{r(!0);const C=JSON.parse(A==null?void 0:A.body),M=Pu(),T=C.messages[C.messages.length-1];return t.current=!0,E(I=>[...I,{id:Pu(),content:T.content,role:"user"},{id:M,content:"",role:"assistant"}]),await y(T.content,C.messages||[],void 0,[],{schema:a,onMessageUpdate(I){E(L=>{const D=[...L],$=D.findIndex(U=>U.id===M);return $!==-1&&(D[$]={...D[$],content:I.nodeData.content||""}),D}),t.current&&o()}}),E(I=>(f(I),I)),r(!1),_(""),t.current&&o(),new Response}finally{r(!1)}}}),S=g.useRef(null);g.useEffect(()=>{const R=p(A=>{E(A||[]),o()});return()=>{R()}},[E,p,o]);const O=async(R,A)=>(r(!0),await w(A),!0),N=g.useCallback(async(R,A,C)=>{if(R==="Refresh"){r(!0);try{await x()}catch(M){console.error("Error reloading:",M)}finally{r(!1)}}if(R==="Copy"){const M=C[A];M&&M.role==="assistant"&&navigator.clipboard.writeText(M.content)}if(R==="Volume"){const M=C[A];M!=null&&M.content&&await mE.speak((M==null?void 0:M.content)||"")}},[x]),P=g.useCallback(()=>t.current=!1,[]),k=g.useMemo(()=>v&&v.map((R,A)=>h.jsxs(PN,{innerclassname:R.role=="system"?"!bg-transparent font-semibold":void 0,variant:R.role=="user"?"sent":"received",children:[R.role==="system"?h.jsx("div",{className:"w-10 h-10"}):R.role==="assistant"?h.jsx(lq,{src:"",fallback:"\u{1F916}"}):void 0,h.jsxs(AN,{children:[n&&v.length-1===A&&(!R.content||a)?h.jsx(Ad,{}):h.jsxs(g.Suspense,{fallback:h.jsx(Ad,{}),children:[R.role==="system"?h.jsx(tn,{className:"!text-sm mb-1",children:"System"}):void 0,h.jsx(tre,{className:Q("[&_p]:leading-relaxed !max-w-full !bg-transparent !font-sans !text-sm"),style:{color:"unset !important"},source:R.content?a?`\`\`\`json
${R.content}
\`\`\``:R.content:""})]}),R.role==="assistant"&&v.length-1===A&&h.jsx("div",{className:"flex items-center mt-1.5 gap-1",children:!n&&h.jsx(h.Fragment,{children:nre.map((C,M)=>{const T=C.icon;return h.jsx(dq,{variant:"ghost",className:"size-5",icon:h.jsx(T,{className:"size-3"}),onClick:()=>N(C.label,A,v)},M)})})})]})]},A)),[v,n,a,N]);return h.jsxs(Fy,{onClick:P,className:"max-h-full !overflow-hidden !min-h-full",style:{minHeight:"unset"},defaultOpen:!0,children:[h.jsx($y,{className:"!max-h-full !overflow-hidden",style:{minHeight:"unset"},children:h.jsxs("main",{className:"flex h-full w-full max-w-2xl flex-col items-center mx-auto overflow-hidden",children:[h.jsx("div",{className:"flex-1 overflow-y-auto overflow-x-hidden min-w-full max-w-full",children:h.jsx(TN,{className:"!max-h-full",ref:S,children:k})}),h.jsx(v2,{className:"!max-w-2xl px-4",onSubmit:O,disabled:b||n||(s==null?void 0:s.status)!==Mt.Loaded,placeholder:e("chat.input_message_placeholder"),maxHeight:72,value:m,onChange:j})]})}),h.jsx(ere,{schema:a,currentDataNode:c,threadNode:i==null?void 0:i.threadNode,loadLLM:l,mainLLMInfo:s,onAddNewThread:u,onSelectThread:d})]})});function ore(){const e=pt(t=>t.currentSession);if(!e)return h.jsx(twe,{flickeringGrid:!0,className:"w-full h-full"});if(e.main_source_type==="Thread")return h.jsx(rre,{})}var $f="Menubar",[_x,are,ire]=ku($f),[QI,Nwe]=Bn($f,[ire,Hr]),hn=Lu(),JI=Hr(),[sre,jx]=QI($f),ZI=g.forwardRef((e,t)=>{const{__scopeMenubar:n,value:r,onValueChange:o,defaultValue:a,loop:i=!0,dir:s,...c}=e,l=Io(s),u=JI(n),[d="",f]=Zt({prop:r,onChange:o,defaultProp:a}),[p,y]=g.useState(null);return h.jsx(sre,{scope:n,value:d,onMenuOpen:g.useCallback(m=>{f(m),y(m)},[f]),onMenuClose:g.useCallback(()=>f(""),[f]),onMenuToggle:g.useCallback(m=>{f(v=>v?"":m),y(m)},[f]),dir:l,loop:i,children:h.jsx(_x.Provider,{scope:n,children:h.jsx(_x.Slot,{scope:n,children:h.jsx(Xs,{asChild:!0,...u,orientation:"horizontal",loop:i,dir:l,currentTabStopId:p,onCurrentTabStopIdChange:y,children:h.jsx(Oe.div,{role:"menubar",...c,ref:t})})})})})});ZI.displayName=$f;var Ex="MenubarMenu",[cre,e3]=QI(Ex),t3=e=>{const{__scopeMenubar:t,value:n,...r}=e,o=ht(),a=n||o||"LEGACY_REACT_AUTO_VALUE",i=jx(Ex,t),s=hn(t),c=g.useRef(null),l=g.useRef(!1),u=i.value===a;return g.useEffect(()=>{u||(l.current=!1)},[u]),h.jsx(cre,{scope:t,value:a,triggerId:ht(),triggerRef:c,contentId:ht(),wasKeyboardTriggerOpenRef:l,children:h.jsx(am,{...s,open:u,onOpenChange:d=>{d||i.onMenuClose()},modal:!1,dir:i.dir,...r})})};t3.displayName=Ex;var Sx="MenubarTrigger",n3=g.forwardRef((e,t)=>{const{__scopeMenubar:n,disabled:r=!1,...o}=e,a=JI(n),i=hn(n),s=jx(Sx,n),c=e3(Sx,n),l=g.useRef(null),u=tt(t,l,c.triggerRef),[d,f]=g.useState(!1),p=s.value===c.value;return h.jsx(_x.ItemSlot,{scope:n,value:c.value,disabled:r,children:h.jsx(Gs,{asChild:!0,...a,focusable:!r,tabStopId:c.value,children:h.jsx(Wh,{asChild:!0,...i,children:h.jsx(Oe.button,{type:"button",role:"menuitem",id:c.triggerId,"aria-haspopup":"menu","aria-expanded":p,"aria-controls":p?c.contentId:void 0,"data-highlighted":d?"":void 0,"data-state":p?"open":"closed","data-disabled":r?"":void 0,disabled:r,...o,ref:u,onPointerDown:he(e.onPointerDown,y=>{!r&&y.button===0&&y.ctrlKey===!1&&(s.onMenuOpen(c.value),p||y.preventDefault())}),onPointerEnter:he(e.onPointerEnter,()=>{var y;s.value&&!p&&(s.onMenuOpen(c.value),(y=l.current)==null||y.focus())}),onKeyDown:he(e.onKeyDown,y=>{r||(["Enter"," "].includes(y.key)&&s.onMenuToggle(c.value),y.key==="ArrowDown"&&s.onMenuOpen(c.value),["Enter"," ","ArrowDown"].includes(y.key)&&(c.wasKeyboardTriggerOpenRef.current=!0,y.preventDefault()))}),onFocus:he(e.onFocus,()=>f(!0)),onBlur:he(e.onBlur,()=>f(!1))})})})})});n3.displayName=Sx;var lre="MenubarPortal",r3=e=>{const{__scopeMenubar:t,...n}=e,r=hn(t);return h.jsx(om,{...r,...n})};r3.displayName=lre;var Cx="MenubarContent",o3=g.forwardRef((e,t)=>{const{__scopeMenubar:n,align:r="start",...o}=e,a=hn(n),i=jx(Cx,n),s=e3(Cx,n),c=are(n),l=g.useRef(!1);return h.jsx(qh,{id:s.contentId,"aria-labelledby":s.triggerId,"data-radix-menubar-content":"",...a,...o,ref:t,align:r,onCloseAutoFocus:he(e.onCloseAutoFocus,u=>{var d;!i.value&&!l.current&&((d=s.triggerRef.current)==null||d.focus()),l.current=!1,u.preventDefault()}),onFocusOutside:he(e.onFocusOutside,u=>{const d=u.target;c().some(f=>{var p;return(p=f.ref.current)==null?void 0:p.contains(d)})&&u.preventDefault()}),onInteractOutside:he(e.onInteractOutside,()=>{l.current=!0}),onEntryFocus:u=>{s.wasKeyboardTriggerOpenRef.current||u.preventDefault()},onKeyDown:he(e.onKeyDown,u=>{if(["ArrowRight","ArrowLeft"].includes(u.key)){const d=u.target,f=d.hasAttribute("data-radix-menubar-subtrigger"),p=d.closest("[data-radix-menubar-content]")!==u.currentTarget,y=(i.dir==="rtl"?"ArrowRight":"ArrowLeft")===u.key;if(!y&&f||p&&y)return;let m=c().filter(x=>!x.disabled).map(x=>x.value);y&&m.reverse();const v=m.indexOf(s.value);m=i.loop?Ere(m,v+1):m.slice(v+1);const[b]=m;b&&i.onMenuOpen(b)}},{checkForDefaultPrevented:!1}),style:{...e.style,"--radix-menubar-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-menubar-content-available-width":"var(--radix-popper-available-width)","--radix-menubar-content-available-height":"var(--radix-popper-available-height)","--radix-menubar-trigger-width":"var(--radix-popper-anchor-width)","--radix-menubar-trigger-height":"var(--radix-popper-anchor-height)"}})});o3.displayName=Cx;var ure="MenubarGroup",dre=g.forwardRef((e,t)=>{const{__scopeMenubar:n,...r}=e,o=hn(n);return h.jsx(Yh,{...o,...r,ref:t})});dre.displayName=ure;var fre="MenubarLabel",a3=g.forwardRef((e,t)=>{const{__scopeMenubar:n,...r}=e,o=hn(n);return h.jsx(Kh,{...o,...r,ref:t})});a3.displayName=fre;var pre="MenubarItem",i3=g.forwardRef((e,t)=>{const{__scopeMenubar:n,...r}=e,o=hn(n);return h.jsx(Xh,{...o,...r,ref:t})});i3.displayName=pre;var hre="MenubarCheckboxItem",s3=g.forwardRef((e,t)=>{const{__scopeMenubar:n,...r}=e,o=hn(n);return h.jsx(Gh,{...o,...r,ref:t})});s3.displayName=hre;var mre="MenubarRadioGroup",yre=g.forwardRef((e,t)=>{const{__scopeMenubar:n,...r}=e,o=hn(n);return h.jsx(Qh,{...o,...r,ref:t})});yre.displayName=mre;var gre="MenubarRadioItem",c3=g.forwardRef((e,t)=>{const{__scopeMenubar:n,...r}=e,o=hn(n);return h.jsx(Jh,{...o,...r,ref:t})});c3.displayName=gre;var vre="MenubarItemIndicator",l3=g.forwardRef((e,t)=>{const{__scopeMenubar:n,...r}=e,o=hn(n);return h.jsx(Zh,{...o,...r,ref:t})});l3.displayName=vre;var bre="MenubarSeparator",u3=g.forwardRef((e,t)=>{const{__scopeMenubar:n,...r}=e,o=hn(n);return h.jsx(em,{...o,...r,ref:t})});u3.displayName=bre;var xre="MenubarArrow",wre=g.forwardRef((e,t)=>{const{__scopeMenubar:n,...r}=e,o=hn(n);return h.jsx(tm,{...o,...r,ref:t})});wre.displayName=xre;var _re="MenubarSubTrigger",d3=g.forwardRef((e,t)=>{const{__scopeMenubar:n,...r}=e,o=hn(n);return h.jsx(nm,{"data-radix-menubar-subtrigger":"",...o,...r,ref:t})});d3.displayName=_re;var jre="MenubarSubContent",f3=g.forwardRef((e,t)=>{const{__scopeMenubar:n,...r}=e,o=hn(n);return h.jsx(rm,{...o,"data-radix-menubar-content":"",...r,ref:t,style:{...e.style,"--radix-menubar-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-menubar-content-available-width":"var(--radix-popper-available-width)","--radix-menubar-content-available-height":"var(--radix-popper-available-height)","--radix-menubar-trigger-width":"var(--radix-popper-anchor-width)","--radix-menubar-trigger-height":"var(--radix-popper-anchor-height)"}})});f3.displayName=jre;function Ere(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var p3=ZI,Sre=t3,h3=n3,Cre=r3,m3=o3,y3=a3,g3=i3,v3=s3,b3=c3,x3=l3,w3=u3,_3=d3,j3=f3;const Ox=Sre,E3=g.forwardRef(({className:e,...t},n)=>h.jsx(p3,{ref:n,className:Q("flex h-10 items-center space-x-1 rounded-md border bg-background p-1",e),...t}));E3.displayName=p3.displayName;const Mx=g.forwardRef(({className:e,...t},n)=>h.jsx(h3,{ref:n,className:Q("flex cursor-default select-none items-center rounded-sm px-3 py-1.5 text-sm font-medium outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground",e),...t}));Mx.displayName=h3.displayName;const Ore=g.forwardRef(({className:e,inset:t,children:n,...r},o)=>h.jsxs(_3,{ref:o,className:Q("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground",t&&"pl-8",e),...r,children:[n,h.jsx(de,{name:"chevron-right",className:"ml-auto h-4 w-4"})]}));Ore.displayName=_3.displayName;const Mre=g.forwardRef(({className:e,...t},n)=>h.jsx(j3,{ref:n,className:Q("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));Mre.displayName=j3.displayName;const S3=g.forwardRef(({className:e,align:t="start",alignOffset:n=-4,sideOffset:r=8,...o},a)=>h.jsx(Cre,{children:h.jsx(m3,{ref:a,align:t,alignOffset:n,sideOffset:r,className:Q("z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...o})}));S3.displayName=m3.displayName;const C3=g.forwardRef(({className:e,inset:t,...n},r)=>h.jsx(g3,{ref:r,className:Q("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...n}));C3.displayName=g3.displayName;const Nre=g.forwardRef(({className:e,children:t,checked:n,...r},o)=>h.jsxs(v3,{ref:o,className:Q("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:n,...r,children:[h.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:h.jsx(x3,{children:h.jsx(de,{name:"check",className:"h-4 w-4"})})}),t]}));Nre.displayName=v3.displayName;const kre=g.forwardRef(({className:e,children:t,...n},r)=>h.jsxs(b3,{ref:r,className:Q("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[h.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:h.jsx(x3,{children:h.jsx(de,{name:"circle",className:"h-2 w-2 fill-current"})})}),t]}));kre.displayName=b3.displayName;const Pre=g.forwardRef(({className:e,inset:t,...n},r)=>h.jsx(y3,{ref:r,className:Q("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...n}));Pre.displayName=y3.displayName;const Are=g.forwardRef(({className:e,...t},n)=>h.jsx(w3,{ref:n,className:Q("-mx-1 my-1 h-px bg-muted",e),...t}));Are.displayName=w3.displayName;let O3;Ae=nwe()(rwe(owe((e,t)=>({...OI,...kne(e,t)})))),O3=()=>{const e=pt(i=>{var s;return(s=i.currentSession)==null?void 0:s.id}),[t,n]=g.useState(!1),r=Ae(i=>i.pushSyncNodeQueue),o=Ae(i=>i.createOrUpdateFlowNode),a=g.useCallback(async(i,s)=>{try{if(!e)throw new Error("Session not found");n(!0);const c=await ue("LLM").findOne({where:{name:s.name,session_id:e}});return c?(r("LLM",{where:{source_type:"LLM",source_id:c.id}}),c):ue("LLM").save({name:`${s.name}`,status:Mt.Started,session_id:e,provider:Bu.WebLLM,metadata:JSON.stringify({}),model_type:s.model_type||rc.LLM,...s}).then(async l=>{var u,d,f;return await o({source_id:l.id,source_type:"LLM",node_type:ae.LLM,x:(u=i.position)==null?void 0:u.x,y:((d=i.position)==null?void 0:d.y)+(((f=i.measured)==null?void 0:f.height)||0)+30}),l})}finally{n(!1)}},[o,r,e]);return{loading:t,createDatabaseLLM:a}};var Nx="Popover",[M3,kwe]=Bn(Nx,[Vo]),bl=Vo(),[Tre,Go]=M3(Nx),N3=e=>{const{__scopePopover:t,children:n,open:r,defaultOpen:o,onOpenChange:a,modal:i=!1}=e,s=bl(t),c=g.useRef(null),[l,u]=g.useState(!1),[d=!1,f]=Zt({prop:r,defaultProp:o,onChange:a});return h.jsx(xc,{...s,children:h.jsx(Tre,{scope:t,contentId:ht(),triggerRef:c,open:d,onOpenChange:f,onOpenToggle:g.useCallback(()=>f(p=>!p),[f]),hasCustomAnchor:l,onCustomAnchorAdd:g.useCallback(()=>u(!0),[]),onCustomAnchorRemove:g.useCallback(()=>u(!1),[]),modal:i,children:n})})};N3.displayName=Nx;let kx;kx="PopoverAnchor",Sm=g.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,o=Go(kx,n),a=bl(n),{onCustomAnchorAdd:i,onCustomAnchorRemove:s}=o;return g.useEffect(()=>(i(),()=>s()),[i,s]),h.jsx(wc,{...a,...r,ref:t})}),Sm.displayName=kx;var k3="PopoverTrigger",Px=g.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,o=Go(k3,n),a=bl(n),i=tt(t,o.triggerRef),s=h.jsx(Oe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":I3(o.open),...r,ref:i,onClick:he(e.onClick,o.onOpenToggle)});return o.hasCustomAnchor?s:h.jsx(wc,{asChild:!0,...a,children:s})});Px.displayName=k3;var Ax="PopoverPortal",[Rre,Ire]=M3(Ax,{forceMount:void 0}),P3=e=>{const{__scopePopover:t,forceMount:n,children:r,container:o}=e,a=Go(Ax,t);return h.jsx(Rre,{scope:t,forceMount:n,children:h.jsx(On,{present:n||a.open,children:h.jsx(Ou,{asChild:!0,container:o,children:r})})})};P3.displayName=Ax;var Qi="PopoverContent",A3=g.forwardRef((e,t)=>{const n=Ire(Qi,e.__scopePopover),{forceMount:r=n.forceMount,...o}=e,a=Go(Qi,e.__scopePopover);return h.jsx(On,{present:r||a.open,children:a.modal?h.jsx(Dre,{...o,ref:t}):h.jsx(Lre,{...o,ref:t})})});A3.displayName=Qi;var Dre=g.forwardRef((e,t)=>{const n=Go(Qi,e.__scopePopover),r=g.useRef(null),o=tt(t,r),a=g.useRef(!1);return g.useEffect(()=>{const i=r.current;if(i)return cd(i)},[]),h.jsx(yc,{as:Ur,allowPinchZoom:!0,children:h.jsx(T3,{...e,ref:o,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:he(e.onCloseAutoFocus,i=>{var s;i.preventDefault(),a.current||((s=n.triggerRef.current)==null||s.focus())}),onPointerDownOutside:he(e.onPointerDownOutside,i=>{const s=i.detail.originalEvent,c=s.button===0&&s.ctrlKey===!0,l=s.button===2||c;a.current=l},{checkForDefaultPrevented:!1}),onFocusOutside:he(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1})})})}),Lre=g.forwardRef((e,t)=>{const n=Go(Qi,e.__scopePopover),r=g.useRef(!1),o=g.useRef(!1);return h.jsx(T3,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var i,s;(i=e.onCloseAutoFocus)==null||i.call(e,a),a.defaultPrevented||(r.current||((s=n.triggerRef.current)==null||s.focus()),a.preventDefault()),r.current=!1,o.current=!1},onInteractOutside:a=>{var s,c;(s=e.onInteractOutside)==null||s.call(e,a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const i=a.target;(c=n.triggerRef.current)!=null&&c.contains(i)&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&o.current&&a.preventDefault()}})}),T3=g.forwardRef((e,t)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:o,onCloseAutoFocus:a,disableOutsidePointerEvents:i,onEscapeKeyDown:s,onPointerDownOutside:c,onFocusOutside:l,onInteractOutside:u,...d}=e,f=Go(Qi,n),p=bl(n);return ed(),h.jsx(mc,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:o,onUnmountAutoFocus:a,children:h.jsx(Cu,{asChild:!0,disableOutsidePointerEvents:i,onInteractOutside:u,onEscapeKeyDown:s,onPointerDownOutside:c,onFocusOutside:l,onDismiss:()=>f.onOpenChange(!1),children:h.jsx(vd,{"data-state":I3(f.open),role:"dialog",id:f.contentId,...p,...d,ref:t,style:{...d.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),R3="PopoverClose",Fre=g.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,o=Go(R3,n);return h.jsx(Oe.button,{type:"button",...r,ref:t,onClick:he(e.onClick,()=>o.onOpenChange(!1))})});Fre.displayName=R3;var Bre="PopoverArrow",$re=g.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,o=bl(n);return h.jsx(bd,{...o,...r,ref:t})});$re.displayName=Bre;function I3(e){return e?"open":"closed"}qE=N3,M$=Sm,P$=Px,YE=P3,gm=A3;const zre=qE,D3=g.forwardRef(({className:e,align:t="center",sideOffset:n=4,...r},o)=>h.jsx(YE,{children:h.jsx(gm,{ref:o,align:t,sideOffset:n,className:Q("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));D3.displayName=gm.displayName;var L3=1,Vre=.9,Ure=.8,Hre=.17,Tx=.1,Rx=.999,Wre=.9999,qre=.99,Yre=/[\\\/_+.#"@\[\(\{&]/,Kre=/[\\\/_+.#"@\[\(\{&]/g,Xre=/[\s-]/,F3=/[\s-]/g;function Ix(e,t,n,r,o,a,i){if(a===t.length)return o===e.length?L3:qre;var s=`${o},${a}`;if(i[s]!==void 0)return i[s];for(var c=r.charAt(a),l=n.indexOf(c,o),u=0,d,f,p,y;l>=0;)d=Ix(e,t,n,r,l+1,a+1,i),d>u&&(l===o?d*=L3:Yre.test(e.charAt(l-1))?(d*=Ure,p=e.slice(o,l-1).match(Kre),p&&o>0&&(d*=Math.pow(Rx,p.length))):Xre.test(e.charAt(l-1))?(d*=Vre,y=e.slice(o,l-1).match(F3),y&&o>0&&(d*=Math.pow(Rx,y.length))):(d*=Hre,o>0&&(d*=Math.pow(Rx,l-o))),e.charAt(l)!==t.charAt(a)&&(d*=Wre)),(d<Tx&&n.charAt(l-1)===r.charAt(a+1)||r.charAt(a+1)===r.charAt(a)&&n.charAt(l-1)!==r.charAt(a))&&(f=Ix(e,t,n,r,l+1,a+2,i),f*Tx>d&&(d=f*Tx)),d>u&&(u=d),l=n.indexOf(c,l+1);return i[s]=u,u}function B3(e){return e.toLowerCase().replace(F3," ")}function Gre(e,t,n){return e=n&&n.length>0?`${e+" "+n.join(" ")}`:e,Ix(e,t,B3(e),B3(t),0,0,{})}var xl='[cmdk-group=""]',Dx='[cmdk-group-items=""]',Qre='[cmdk-group-heading=""]',Lx='[cmdk-item=""]',$3=`${Lx}:not([aria-disabled="true"])`,Fx="cmdk-item-select",ka="data-value",Jre=(e,t,n)=>Gre(e,t,n),z3=g.createContext(void 0),wl=()=>g.useContext(z3),V3=g.createContext(void 0),Bx=()=>g.useContext(V3),U3=g.createContext(void 0),H3=g.forwardRef((e,t)=>{let n=Ji(()=>{var F,H;return{search:"",value:(H=(F=e.value)!=null?F:e.defaultValue)!=null?H:"",filtered:{count:0,items:new Map,groups:new Set}}}),r=Ji(()=>new Set),o=Ji(()=>new Map),a=Ji(()=>new Map),i=Ji(()=>new Set),s=W3(e),{label:c,children:l,value:u,onValueChange:d,filter:f,shouldFilter:p,loop:y,disablePointerSelection:m=!1,vimBindings:v=!0,...b}=e,x=ht(),_=ht(),w=ht(),j=g.useRef(null),E=loe();Pa(()=>{if(u!==void 0){let F=u.trim();n.current.value=F,S.emit()}},[u]),Pa(()=>{E(6,A)},[]);let S=g.useMemo(()=>({subscribe:F=>(i.current.add(F),()=>i.current.delete(F)),snapshot:()=>n.current,setState:(F,H,Y)=>{var G,re,Z;if(!Object.is(n.current[F],H)){if(n.current[F]=H,F==="search")R(),P(),E(1,k);else if(F==="value"&&(Y||E(5,A),((G=s.current)==null?void 0:G.value)!==void 0)){let q=H??"";(Z=(re=s.current).onValueChange)==null||Z.call(re,q);return}S.emit()}},emit:()=>{i.current.forEach(F=>F())}}),[]),O=g.useMemo(()=>({value:(F,H,Y)=>{var G;H!==((G=a.current.get(F))==null?void 0:G.value)&&(a.current.set(F,{value:H,keywords:Y}),n.current.filtered.items.set(F,N(H,Y)),E(2,()=>{P(),S.emit()}))},item:(F,H)=>(r.current.add(F),H&&(o.current.has(H)?o.current.get(H).add(F):o.current.set(H,new Set([F]))),E(3,()=>{R(),P(),n.current.value||k(),S.emit()}),()=>{a.current.delete(F),r.current.delete(F),n.current.filtered.items.delete(F);let Y=C();E(4,()=>{R(),(Y==null?void 0:Y.getAttribute("id"))===F&&k(),S.emit()})}),group:F=>(o.current.has(F)||o.current.set(F,new Set),()=>{a.current.delete(F),o.current.delete(F)}),filter:()=>s.current.shouldFilter,label:c||e["aria-label"],getDisablePointerSelection:()=>s.current.disablePointerSelection,listId:x,inputId:w,labelId:_,listInnerRef:j}),[]);function N(F,H){var Y,G;let re=(G=(Y=s.current)==null?void 0:Y.filter)!=null?G:Jre;return F?re(F,n.current.search,H):0}function P(){if(!n.current.search||s.current.shouldFilter===!1)return;let F=n.current.filtered.items,H=[];n.current.filtered.groups.forEach(G=>{let re=o.current.get(G),Z=0;re.forEach(q=>{let W=F.get(q);Z=Math.max(W,Z)}),H.push([G,Z])});let Y=j.current;M().sort((G,re)=>{var Z,q;let W=G.getAttribute("id"),J=re.getAttribute("id");return((Z=F.get(J))!=null?Z:0)-((q=F.get(W))!=null?q:0)}).forEach(G=>{let re=G.closest(Dx);re?re.appendChild(G.parentElement===re?G:G.closest(`${Dx} > *`)):Y.appendChild(G.parentElement===Y?G:G.closest(`${Dx} > *`))}),H.sort((G,re)=>re[1]-G[1]).forEach(G=>{var re;let Z=(re=j.current)==null?void 0:re.querySelector(`${xl}[${ka}="${encodeURIComponent(G[0])}"]`);Z==null||Z.parentElement.appendChild(Z)})}function k(){let F=M().find(Y=>Y.getAttribute("aria-disabled")!=="true"),H=F==null?void 0:F.getAttribute(ka);S.setState("value",H||void 0)}function R(){var F,H,Y,G;if(!n.current.search||s.current.shouldFilter===!1){n.current.filtered.count=r.current.size;return}n.current.filtered.groups=new Set;let re=0;for(let Z of r.current){let q=(H=(F=a.current.get(Z))==null?void 0:F.value)!=null?H:"",W=(G=(Y=a.current.get(Z))==null?void 0:Y.keywords)!=null?G:[],J=N(q,W);n.current.filtered.items.set(Z,J),J>0&&re++}for(let[Z,q]of o.current)for(let W of q)if(n.current.filtered.items.get(W)>0){n.current.filtered.groups.add(Z);break}n.current.filtered.count=re}function A(){var F,H,Y;let G=C();G&&(((F=G.parentElement)==null?void 0:F.firstChild)===G&&((Y=(H=G.closest(xl))==null?void 0:H.querySelector(Qre))==null||Y.scrollIntoView({block:"nearest"})),G.scrollIntoView({block:"nearest"}))}function C(){var F;return(F=j.current)==null?void 0:F.querySelector(`${Lx}[aria-selected="true"]`)}function M(){var F;return Array.from(((F=j.current)==null?void 0:F.querySelectorAll($3))||[])}function T(F){let H=M()[F];H&&S.setState("value",H.getAttribute(ka))}function I(F){var H;let Y=C(),G=M(),re=G.findIndex(q=>q===Y),Z=G[re+F];(H=s.current)!=null&&H.loop&&(Z=re+F<0?G[G.length-1]:re+F===G.length?G[0]:G[re+F]),Z&&S.setState("value",Z.getAttribute(ka))}function L(F){let H=C(),Y=H==null?void 0:H.closest(xl),G;for(;Y&&!G;)Y=F>0?soe(Y,xl):coe(Y,xl),G=Y==null?void 0:Y.querySelector($3);G?S.setState("value",G.getAttribute(ka)):I(F)}let D=()=>T(M().length-1),$=F=>{F.preventDefault(),F.metaKey?D():F.altKey?L(1):I(1)},U=F=>{F.preventDefault(),F.metaKey?T(0):F.altKey?L(-1):I(-1)};return g.createElement(Oe.div,{ref:t,tabIndex:-1,...b,"cmdk-root":"",onKeyDown:F=>{var H;if((H=b.onKeyDown)==null||H.call(b,F),!F.defaultPrevented)switch(F.key){case"n":case"j":{v&&F.ctrlKey&&$(F);break}case"ArrowDown":{$(F);break}case"p":case"k":{v&&F.ctrlKey&&U(F);break}case"ArrowUp":{U(F);break}case"Home":{F.preventDefault(),T(0);break}case"End":{F.preventDefault(),D();break}case"Enter":if(!F.nativeEvent.isComposing&&F.keyCode!==229){F.preventDefault();let Y=C();if(Y){let G=new Event(Fx);Y.dispatchEvent(G)}}}}},g.createElement("label",{"cmdk-label":"",htmlFor:O.inputId,id:O.labelId,style:doe},c),zf(e,F=>g.createElement(V3.Provider,{value:S},g.createElement(z3.Provider,{value:O},F))))}),Zre=g.forwardRef((e,t)=>{var n,r;let o=ht(),a=g.useRef(null),i=g.useContext(U3),s=wl(),c=W3(e),l=(r=(n=c.current)==null?void 0:n.forceMount)!=null?r:i==null?void 0:i.forceMount;Pa(()=>{if(!l)return s.item(o,i==null?void 0:i.id)},[l]);let u=q3(o,a,[e.value,e.children,a],e.keywords),d=Bx(),f=Aa(E=>E.value&&E.value===u.current),p=Aa(E=>l||s.filter()===!1?!0:E.search?E.filtered.items.get(o)>0:!0);g.useEffect(()=>{let E=a.current;if(!(!E||e.disabled))return E.addEventListener(Fx,y),()=>E.removeEventListener(Fx,y)},[p,e.onSelect,e.disabled]);function y(){var E,S;m(),(S=(E=c.current).onSelect)==null||S.call(E,u.current)}function m(){d.setState("value",u.current,!0)}if(!p)return null;let{disabled:v,value:b,onSelect:x,forceMount:_,keywords:w,...j}=e;return g.createElement(Oe.div,{ref:_l([a,t]),...j,id:o,"cmdk-item":"",role:"option","aria-disabled":!!v,"aria-selected":!!f,"data-disabled":!!v,"data-selected":!!f,onPointerMove:v||s.getDisablePointerSelection()?void 0:m,onClick:v?void 0:y},e.children)}),eoe=g.forwardRef((e,t)=>{let{heading:n,children:r,forceMount:o,...a}=e,i=ht(),s=g.useRef(null),c=g.useRef(null),l=ht(),u=wl(),d=Aa(p=>o||u.filter()===!1?!0:p.search?p.filtered.groups.has(i):!0);Pa(()=>u.group(i),[]),q3(i,s,[e.value,e.heading,c]);let f=g.useMemo(()=>({id:i,forceMount:o}),[o]);return g.createElement(Oe.div,{ref:_l([s,t]),...a,"cmdk-group":"",role:"presentation",hidden:d?void 0:!0},n&&g.createElement("div",{ref:c,"cmdk-group-heading":"","aria-hidden":!0,id:l},n),zf(e,p=>g.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":n?l:void 0},g.createElement(U3.Provider,{value:f},p))))}),toe=g.forwardRef((e,t)=>{let{alwaysRender:n,...r}=e,o=g.useRef(null),a=Aa(i=>!i.search);return!n&&!a?null:g.createElement(Oe.div,{ref:_l([o,t]),...r,"cmdk-separator":"",role:"separator"})}),noe=g.forwardRef((e,t)=>{let{onValueChange:n,...r}=e,o=e.value!=null,a=Bx(),i=Aa(u=>u.search),s=Aa(u=>u.value),c=wl(),l=g.useMemo(()=>{var u;let d=(u=c.listInnerRef.current)==null?void 0:u.querySelector(`${Lx}[${ka}="${encodeURIComponent(s)}"]`);return d==null?void 0:d.getAttribute("id")},[]);return g.useEffect(()=>{e.value!=null&&a.setState("search",e.value)},[e.value]),g.createElement(Oe.input,{ref:t,...r,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":c.listId,"aria-labelledby":c.labelId,"aria-activedescendant":l,id:c.inputId,type:"text",value:o?e.value:i,onChange:u=>{o||a.setState("search",u.target.value),n==null||n(u.target.value)}})}),roe=g.forwardRef((e,t)=>{let{children:n,label:r="Suggestions",...o}=e,a=g.useRef(null),i=g.useRef(null),s=wl();return g.useEffect(()=>{if(i.current&&a.current){let c=i.current,l=a.current,u,d=new ResizeObserver(()=>{u=requestAnimationFrame(()=>{let f=c.offsetHeight;l.style.setProperty("--cmdk-list-height",f.toFixed(1)+"px")})});return d.observe(c),()=>{cancelAnimationFrame(u),d.unobserve(c)}}},[]),g.createElement(Oe.div,{ref:_l([a,t]),...o,"cmdk-list":"",role:"listbox","aria-label":r,id:s.listId},zf(e,c=>g.createElement("div",{ref:_l([i,s.listInnerRef]),"cmdk-list-sizer":""},c)))}),ooe=g.forwardRef((e,t)=>{let{open:n,onOpenChange:r,overlayClassName:o,contentClassName:a,container:i,...s}=e;return g.createElement(Qs,{open:n,onOpenChange:r},g.createElement(Js,{container:i},g.createElement(fa,{"cmdk-overlay":"",className:o}),g.createElement(pa,{"aria-label":e.label,"cmdk-dialog":"",className:a},g.createElement(H3,{ref:t,...s}))))}),aoe=g.forwardRef((e,t)=>Aa(n=>n.filtered.count===0)?g.createElement(Oe.div,{ref:t,...e,"cmdk-empty":"",role:"presentation"}):null),ioe=g.forwardRef((e,t)=>{let{progress:n,children:r,label:o="Loading...",...a}=e;return g.createElement(Oe.div,{ref:t,...a,"cmdk-loading":"",role:"progressbar","aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,"aria-label":o},zf(e,i=>g.createElement("div",{"aria-hidden":!0},i)))}),jn=Object.assign(H3,{List:roe,Item:Zre,Input:noe,Group:eoe,Separator:toe,Dialog:ooe,Empty:aoe,Loading:ioe});function soe(e,t){let n=e.nextElementSibling;for(;n;){if(n.matches(t))return n;n=n.nextElementSibling}}function coe(e,t){let n=e.previousElementSibling;for(;n;){if(n.matches(t))return n;n=n.previousElementSibling}}function W3(e){let t=g.useRef(e);return Pa(()=>{t.current=e}),t}var Pa=typeof window>"u"?g.useEffect:g.useLayoutEffect;function Ji(e){let t=g.useRef();return t.current===void 0&&(t.current=e()),t}function _l(e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}function Aa(e){let t=Bx(),n=()=>e(t.snapshot());return Du.useSyncExternalStore(t.subscribe,n,n)}function q3(e,t,n,r=[]){let o=g.useRef(),a=wl();return Pa(()=>{var i;let s=(()=>{var l;for(let u of n){if(typeof u=="string")return u.trim();if(typeof u=="object"&&"current"in u)return u.current?(l=u.current.textContent)==null?void 0:l.trim():o.current}})(),c=r.map(l=>l.trim());a.value(e,s,c),(i=t.current)==null||i.setAttribute(ka,s),o.current=s}),o}var loe=()=>{let[e,t]=g.useState(),n=Ji(()=>new Map);return Pa(()=>{n.current.forEach(r=>r()),n.current=new Map},[e]),(r,o)=>{n.current.set(r,o),t({})}};function uoe(e){let t=e.type;return typeof t=="function"?t(e.props):"render"in t?t.render(e.props):e}function zf({asChild:e,children:t},n){return e&&g.isValidElement(t)?g.cloneElement(uoe(t),{ref:t.ref},n(t.props.children)):n(t)}var doe={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const Y3=g.forwardRef(({className:e,...t},n)=>h.jsx(jn,{ref:n,className:Q("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",e),...t}));Y3.displayName=jn.displayName;const K3=g.forwardRef(({className:e,...t},n)=>h.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[h.jsx(de,{name:"search",className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),h.jsx(jn.Input,{ref:n,className:Q("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",e),...t})]}));K3.displayName=jn.Input.displayName;const X3=g.forwardRef(({className:e,...t},n)=>h.jsx(jn.List,{ref:n,className:Q("max-h-[300px] overflow-y-auto overflow-x-hidden",e),...t}));X3.displayName=jn.List.displayName;const G3=g.forwardRef((e,t)=>h.jsx(jn.Empty,{ref:t,className:"py-6 text-center text-sm",...e}));G3.displayName=jn.Empty.displayName;const Q3=g.forwardRef(({className:e,...t},n)=>h.jsx(jn.Group,{ref:n,className:Q("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",e),...t}));Q3.displayName=jn.Group.displayName;const foe=g.forwardRef(({className:e,...t},n)=>h.jsx(jn.Separator,{ref:n,className:Q("-mx-1 h-px bg-border",e),...t}));foe.displayName=jn.Separator.displayName;const J3=g.forwardRef(({className:e,...t},n)=>h.jsx(jn.Item,{ref:n,className:Q("relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",e),...t}));J3.displayName=jn.Item.displayName,Cm=function(e,[t,n]){return Math.min(n,Math.max(t,e))};function Z3(e){const t=g.useRef({value:e,previous:e});return g.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var poe=[" ","Enter","ArrowUp","ArrowDown"],hoe=[" ","Enter"],jl="Select",[Vf,Uf,moe]=ku(jl),[Zi,Pwe]=Bn(jl,[moe,Vo]),Hf=Vo(),[yoe,Qo]=Zi(jl),[goe,voe]=Zi(jl),eD=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:o,onOpenChange:a,value:i,defaultValue:s,onValueChange:c,dir:l,name:u,autoComplete:d,disabled:f,required:p,form:y}=e,m=Hf(t),[v,b]=g.useState(null),[x,_]=g.useState(null),[w,j]=g.useState(!1),E=Io(l),[S=!1,O]=Zt({prop:r,defaultProp:o,onChange:a}),[N,P]=Zt({prop:i,defaultProp:s,onChange:c}),k=g.useRef(null),R=v?y||!!v.closest("form"):!0,[A,C]=g.useState(new Set),M=Array.from(A).map(T=>T.props.value).join(";");return h.jsx(xc,{...m,children:h.jsxs(yoe,{required:p,scope:t,trigger:v,onTriggerChange:b,valueNode:x,onValueNodeChange:_,valueNodeHasChildren:w,onValueNodeHasChildrenChange:j,contentId:ht(),value:N,onValueChange:P,open:S,onOpenChange:O,dir:E,triggerPointerDownPosRef:k,disabled:f,children:[h.jsx(Vf.Provider,{scope:t,children:h.jsx(goe,{scope:e.__scopeSelect,onNativeOptionAdd:g.useCallback(T=>{C(I=>new Set(I).add(T))},[]),onNativeOptionRemove:g.useCallback(T=>{C(I=>{const L=new Set(I);return L.delete(T),L})},[]),children:n})}),R?h.jsxs(SD,{"aria-hidden":!0,required:p,tabIndex:-1,name:u,autoComplete:d,value:N,onChange:T=>P(T.target.value),disabled:f,form:y,children:[N===void 0?h.jsx("option",{value:""}):null,Array.from(A)]},M):null]})})};eD.displayName=jl;var tD="SelectTrigger",nD=g.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...o}=e,a=Hf(n),i=Qo(tD,n),s=i.disabled||r,c=tt(t,i.onTriggerChange),l=Uf(n),u=g.useRef("touch"),[d,f,p]=CD(m=>{const v=l().filter(_=>!_.disabled),b=v.find(_=>_.value===i.value),x=OD(v,m,b);x!==void 0&&i.onValueChange(x.value)}),y=m=>{s||(i.onOpenChange(!0),p()),m&&(i.triggerPointerDownPosRef.current={x:Math.round(m.pageX),y:Math.round(m.pageY)})};return h.jsx(wc,{asChild:!0,...a,children:h.jsx(Oe.button,{type:"button",role:"combobox","aria-controls":i.contentId,"aria-expanded":i.open,"aria-required":i.required,"aria-autocomplete":"none",dir:i.dir,"data-state":i.open?"open":"closed",disabled:s,"data-disabled":s?"":void 0,"data-placeholder":ED(i.value)?"":void 0,...o,ref:c,onClick:he(o.onClick,m=>{m.currentTarget.focus(),u.current!=="mouse"&&y(m)}),onPointerDown:he(o.onPointerDown,m=>{u.current=m.pointerType;const v=m.target;v.hasPointerCapture(m.pointerId)&&v.releasePointerCapture(m.pointerId),m.button===0&&m.ctrlKey===!1&&m.pointerType==="mouse"&&(y(m),m.preventDefault())}),onKeyDown:he(o.onKeyDown,m=>{const v=d.current!=="";!(m.ctrlKey||m.altKey||m.metaKey)&&m.key.length===1&&f(m.key),!(v&&m.key===" ")&&poe.includes(m.key)&&(y(),m.preventDefault())})})})});nD.displayName=tD;var rD="SelectValue",oD=g.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:o,children:a,placeholder:i="",...s}=e,c=Qo(rD,n),{onValueNodeHasChildrenChange:l}=c,u=a!==void 0,d=tt(t,c.onValueNodeChange);return vn(()=>{l(u)},[l,u]),h.jsx(Oe.span,{...s,ref:d,style:{pointerEvents:"none"},children:ED(c.value)?h.jsx(h.Fragment,{children:i}):a})});oD.displayName=rD;var boe="SelectIcon",aD=g.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...o}=e;return h.jsx(Oe.span,{"aria-hidden":!0,...o,ref:t,children:r||"\u25BC"})});aD.displayName=boe;var xoe="SelectPortal",iD=e=>h.jsx(Ou,{asChild:!0,...e});iD.displayName=xoe;var Ta="SelectContent",sD=g.forwardRef((e,t)=>{const n=Qo(Ta,e.__scopeSelect),[r,o]=g.useState();if(vn(()=>{o(new DocumentFragment)},[]),!n.open){const a=r;return a?Su.createPortal(h.jsx(cD,{scope:e.__scopeSelect,children:h.jsx(Vf.Slot,{scope:e.__scopeSelect,children:h.jsx("div",{children:e.children})})}),a):null}return h.jsx(lD,{...e,ref:t})});sD.displayName=Ta;var mr=10,[cD,Jo]=Zi(Ta),woe="SelectContentImpl",lD=g.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:o,onEscapeKeyDown:a,onPointerDownOutside:i,side:s,sideOffset:c,align:l,alignOffset:u,arrowPadding:d,collisionBoundary:f,collisionPadding:p,sticky:y,hideWhenDetached:m,avoidCollisions:v,...b}=e,x=Qo(Ta,n),[_,w]=g.useState(null),[j,E]=g.useState(null),S=tt(t,Z=>w(Z)),[O,N]=g.useState(null),[P,k]=g.useState(null),R=Uf(n),[A,C]=g.useState(!1),M=g.useRef(!1);g.useEffect(()=>{if(_)return cd(_)},[_]),ed();const T=g.useCallback(Z=>{const[q,...W]=R().map(B=>B.ref.current),[J]=W.slice(-1),te=document.activeElement;for(const B of Z)if(B===te||(B==null||B.scrollIntoView({block:"nearest"}),B===q&&j&&(j.scrollTop=0),B===J&&j&&(j.scrollTop=j.scrollHeight),B==null||B.focus(),document.activeElement!==te))return},[R,j]),I=g.useCallback(()=>T([O,_]),[T,O,_]);g.useEffect(()=>{A&&I()},[A,I]);const{onOpenChange:L,triggerPointerDownPosRef:D}=x;g.useEffect(()=>{if(_){let Z={x:0,y:0};const q=J=>{var te,B;Z={x:Math.abs(Math.round(J.pageX)-(((te=D.current)==null?void 0:te.x)??0)),y:Math.abs(Math.round(J.pageY)-(((B=D.current)==null?void 0:B.y)??0))}},W=J=>{Z.x<=10&&Z.y<=10?J.preventDefault():_.contains(J.target)||L(!1),document.removeEventListener("pointermove",q),D.current=null};return D.current!==null&&(document.addEventListener("pointermove",q),document.addEventListener("pointerup",W,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",q),document.removeEventListener("pointerup",W,{capture:!0})}}},[_,L,D]),g.useEffect(()=>{const Z=()=>L(!1);return window.addEventListener("blur",Z),window.addEventListener("resize",Z),()=>{window.removeEventListener("blur",Z),window.removeEventListener("resize",Z)}},[L]);const[$,U]=CD(Z=>{const q=R().filter(te=>!te.disabled),W=q.find(te=>te.ref.current===document.activeElement),J=OD(q,Z,W);J&&setTimeout(()=>J.ref.current.focus())}),F=g.useCallback((Z,q,W)=>{const J=!M.current&&!W;(x.value!==void 0&&x.value===q||J)&&(N(Z),J&&(M.current=!0))},[x.value]),H=g.useCallback(()=>_==null?void 0:_.focus(),[_]),Y=g.useCallback((Z,q,W)=>{const J=!M.current&&!W;(x.value!==void 0&&x.value===q||J)&&k(Z)},[x.value]),G=r==="popper"?$x:uD,re=G===$x?{side:s,sideOffset:c,align:l,alignOffset:u,arrowPadding:d,collisionBoundary:f,collisionPadding:p,sticky:y,hideWhenDetached:m,avoidCollisions:v}:{};return h.jsx(cD,{scope:n,content:_,viewport:j,onViewportChange:E,itemRefCallback:F,selectedItem:O,onItemLeave:H,itemTextRefCallback:Y,focusSelectedItem:I,selectedItemText:P,position:r,isPositioned:A,searchRef:$,children:h.jsx(yc,{as:Ur,allowPinchZoom:!0,children:h.jsx(mc,{asChild:!0,trapped:x.open,onMountAutoFocus:Z=>{Z.preventDefault()},onUnmountAutoFocus:he(o,Z=>{var q;(q=x.trigger)==null||q.focus({preventScroll:!0}),Z.preventDefault()}),children:h.jsx(Cu,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:i,onFocusOutside:Z=>Z.preventDefault(),onDismiss:()=>x.onOpenChange(!1),children:h.jsx(G,{role:"listbox",id:x.contentId,"data-state":x.open?"open":"closed",dir:x.dir,onContextMenu:Z=>Z.preventDefault(),...b,...re,onPlaced:()=>C(!0),ref:S,style:{display:"flex",flexDirection:"column",outline:"none",...b.style},onKeyDown:he(b.onKeyDown,Z=>{const q=Z.ctrlKey||Z.altKey||Z.metaKey;if(Z.key==="Tab"&&Z.preventDefault(),!q&&Z.key.length===1&&U(Z.key),["ArrowUp","ArrowDown","Home","End"].includes(Z.key)){let W=R().filter(J=>!J.disabled).map(J=>J.ref.current);if(["ArrowUp","End"].includes(Z.key)&&(W=W.slice().reverse()),["ArrowUp","ArrowDown"].includes(Z.key)){const J=Z.target,te=W.indexOf(J);W=W.slice(te+1)}setTimeout(()=>T(W)),Z.preventDefault()}})})})})})})});lD.displayName=woe;var _oe="SelectItemAlignedPosition",uD=g.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...o}=e,a=Qo(Ta,n),i=Jo(Ta,n),[s,c]=g.useState(null),[l,u]=g.useState(null),d=tt(t,S=>u(S)),f=Uf(n),p=g.useRef(!1),y=g.useRef(!0),{viewport:m,selectedItem:v,selectedItemText:b,focusSelectedItem:x}=i,_=g.useCallback(()=>{if(a.trigger&&a.valueNode&&s&&l&&m&&v&&b){const S=a.trigger.getBoundingClientRect(),O=l.getBoundingClientRect(),N=a.valueNode.getBoundingClientRect(),P=b.getBoundingClientRect();if(a.dir!=="rtl"){const J=P.left-O.left,te=N.left-J,B=S.left-te,se=S.width+B,ce=Math.max(se,O.width),ve=window.innerWidth-mr,Te=Cm(te,[mr,Math.max(mr,ve-ce)]);s.style.minWidth=se+"px",s.style.left=Te+"px"}else{const J=O.right-P.right,te=window.innerWidth-N.right-J,B=window.innerWidth-S.right-te,se=S.width+B,ce=Math.max(se,O.width),ve=window.innerWidth-mr,Te=Cm(te,[mr,Math.max(mr,ve-ce)]);s.style.minWidth=se+"px",s.style.right=Te+"px"}const k=f(),R=window.innerHeight-mr*2,A=m.scrollHeight,C=window.getComputedStyle(l),M=parseInt(C.borderTopWidth,10),T=parseInt(C.paddingTop,10),I=parseInt(C.borderBottomWidth,10),L=parseInt(C.paddingBottom,10),D=M+T+A+L+I,$=Math.min(v.offsetHeight*5,D),U=window.getComputedStyle(m),F=parseInt(U.paddingTop,10),H=parseInt(U.paddingBottom,10),Y=S.top+S.height/2-mr,G=R-Y,re=v.offsetHeight/2,Z=v.offsetTop+re,q=M+T+Z,W=D-q;if(q<=Y){const J=k.length>0&&v===k[k.length-1].ref.current;s.style.bottom="0px";const te=l.clientHeight-m.offsetTop-m.offsetHeight,B=Math.max(G,re+(J?H:0)+te+I),se=q+B;s.style.height=se+"px"}else{const J=k.length>0&&v===k[0].ref.current;s.style.top="0px";const te=Math.max(Y,M+m.offsetTop+(J?F:0)+re)+W;s.style.height=te+"px",m.scrollTop=q-Y+m.offsetTop}s.style.margin=`${mr}px 0`,s.style.minHeight=$+"px",s.style.maxHeight=R+"px",r==null||r(),requestAnimationFrame(()=>p.current=!0)}},[f,a.trigger,a.valueNode,s,l,m,v,b,a.dir,r]);vn(()=>_(),[_]);const[w,j]=g.useState();vn(()=>{l&&j(window.getComputedStyle(l).zIndex)},[l]);const E=g.useCallback(S=>{S&&y.current===!0&&(_(),x==null||x(),y.current=!1)},[_,x]);return h.jsx(Eoe,{scope:n,contentWrapper:s,shouldExpandOnScrollRef:p,onScrollButtonChange:E,children:h.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:w},children:h.jsx(Oe.div,{...o,ref:d,style:{boxSizing:"border-box",maxHeight:"100%",...o.style}})})})});uD.displayName=_oe;var joe="SelectPopperPosition",$x=g.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:o=mr,...a}=e,i=Hf(n);return h.jsx(vd,{...i,...a,ref:t,align:r,collisionPadding:o,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});$x.displayName=joe;var[Eoe,zx]=Zi(Ta,{}),Vx="SelectViewport",dD=g.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:r,...o}=e,a=Jo(Vx,n),i=zx(Vx,n),s=tt(t,a.onViewportChange),c=g.useRef(0);return h.jsxs(h.Fragment,{children:[h.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),h.jsx(Vf.Slot,{scope:n,children:h.jsx(Oe.div,{"data-radix-select-viewport":"",role:"presentation",...o,ref:s,style:{position:"relative",flex:1,overflow:"hidden auto",...o.style},onScroll:he(o.onScroll,l=>{const u=l.currentTarget,{contentWrapper:d,shouldExpandOnScrollRef:f}=i;if(f!=null&&f.current&&d){const p=Math.abs(c.current-u.scrollTop);if(p>0){const y=window.innerHeight-mr*2,m=parseFloat(d.style.minHeight),v=parseFloat(d.style.height),b=Math.max(m,v);if(b<y){const x=b+p,_=Math.min(y,x),w=x-_;d.style.height=_+"px",d.style.bottom==="0px"&&(u.scrollTop=w>0?w:0,d.style.justifyContent="flex-end")}}}c.current=u.scrollTop})})})]})});dD.displayName=Vx;var fD="SelectGroup",[Soe,Coe]=Zi(fD),Ooe=g.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,o=ht();return h.jsx(Soe,{scope:n,id:o,children:h.jsx(Oe.div,{role:"group","aria-labelledby":o,...r,ref:t})})});Ooe.displayName=fD;var pD="SelectLabel",hD=g.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,o=Coe(pD,n);return h.jsx(Oe.div,{id:o.id,...r,ref:t})});hD.displayName=pD;var Wf="SelectItem",[Moe,mD]=Zi(Wf),yD=g.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:o=!1,textValue:a,...i}=e,s=Qo(Wf,n),c=Jo(Wf,n),l=s.value===r,[u,d]=g.useState(a??""),[f,p]=g.useState(!1),y=tt(t,x=>{var _;return(_=c.itemRefCallback)==null?void 0:_.call(c,x,r,o)}),m=ht(),v=g.useRef("touch"),b=()=>{o||(s.onValueChange(r),s.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return h.jsx(Moe,{scope:n,value:r,disabled:o,textId:m,isSelected:l,onItemTextChange:g.useCallback(x=>{d(_=>_||((x==null?void 0:x.textContent)??"").trim())},[]),children:h.jsx(Vf.ItemSlot,{scope:n,value:r,disabled:o,textValue:u,children:h.jsx(Oe.div,{role:"option","aria-labelledby":m,"data-highlighted":f?"":void 0,"aria-selected":l&&f,"data-state":l?"checked":"unchecked","aria-disabled":o||void 0,"data-disabled":o?"":void 0,tabIndex:o?void 0:-1,...i,ref:y,onFocus:he(i.onFocus,()=>p(!0)),onBlur:he(i.onBlur,()=>p(!1)),onClick:he(i.onClick,()=>{v.current!=="mouse"&&b()}),onPointerUp:he(i.onPointerUp,()=>{v.current==="mouse"&&b()}),onPointerDown:he(i.onPointerDown,x=>{v.current=x.pointerType}),onPointerMove:he(i.onPointerMove,x=>{var _;v.current=x.pointerType,o?(_=c.onItemLeave)==null||_.call(c):v.current==="mouse"&&x.currentTarget.focus({preventScroll:!0})}),onPointerLeave:he(i.onPointerLeave,x=>{var _;x.currentTarget===document.activeElement&&((_=c.onItemLeave)==null||_.call(c))}),onKeyDown:he(i.onKeyDown,x=>{var _;((_=c.searchRef)==null?void 0:_.current)!==""&&x.key===" "||(hoe.includes(x.key)&&b(),x.key===" "&&x.preventDefault())})})})})});yD.displayName=Wf;var El="SelectItemText",gD=g.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:o,...a}=e,i=Qo(El,n),s=Jo(El,n),c=mD(El,n),l=voe(El,n),[u,d]=g.useState(null),f=tt(t,b=>d(b),c.onItemTextChange,b=>{var x;return(x=s.itemTextRefCallback)==null?void 0:x.call(s,b,c.value,c.disabled)}),p=u==null?void 0:u.textContent,y=g.useMemo(()=>h.jsx("option",{value:c.value,disabled:c.disabled,children:p},c.value),[c.disabled,c.value,p]),{onNativeOptionAdd:m,onNativeOptionRemove:v}=l;return vn(()=>(m(y),()=>v(y)),[m,v,y]),h.jsxs(h.Fragment,{children:[h.jsx(Oe.span,{id:c.textId,...a,ref:f}),c.isSelected&&i.valueNode&&!i.valueNodeHasChildren?Su.createPortal(a.children,i.valueNode):null]})});gD.displayName=El;var vD="SelectItemIndicator",bD=g.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return mD(vD,n).isSelected?h.jsx(Oe.span,{"aria-hidden":!0,...r,ref:t}):null});bD.displayName=vD;var Ux="SelectScrollUpButton",xD=g.forwardRef((e,t)=>{const n=Jo(Ux,e.__scopeSelect),r=zx(Ux,e.__scopeSelect),[o,a]=g.useState(!1),i=tt(t,r.onScrollButtonChange);return vn(()=>{if(n.viewport&&n.isPositioned){let s=function(){const l=c.scrollTop>0;a(l)};const c=n.viewport;return s(),c.addEventListener("scroll",s),()=>c.removeEventListener("scroll",s)}},[n.viewport,n.isPositioned]),o?h.jsx(_D,{...e,ref:i,onAutoScroll:()=>{const{viewport:s,selectedItem:c}=n;s&&c&&(s.scrollTop=s.scrollTop-c.offsetHeight)}}):null});xD.displayName=Ux;var Hx="SelectScrollDownButton",wD=g.forwardRef((e,t)=>{const n=Jo(Hx,e.__scopeSelect),r=zx(Hx,e.__scopeSelect),[o,a]=g.useState(!1),i=tt(t,r.onScrollButtonChange);return vn(()=>{if(n.viewport&&n.isPositioned){let s=function(){const l=c.scrollHeight-c.clientHeight,u=Math.ceil(c.scrollTop)<l;a(u)};const c=n.viewport;return s(),c.addEventListener("scroll",s),()=>c.removeEventListener("scroll",s)}},[n.viewport,n.isPositioned]),o?h.jsx(_D,{...e,ref:i,onAutoScroll:()=>{const{viewport:s,selectedItem:c}=n;s&&c&&(s.scrollTop=s.scrollTop+c.offsetHeight)}}):null});wD.displayName=Hx;var _D=g.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...o}=e,a=Jo("SelectScrollButton",n),i=g.useRef(null),s=Uf(n),c=g.useCallback(()=>{i.current!==null&&(window.clearInterval(i.current),i.current=null)},[]);return g.useEffect(()=>()=>c(),[c]),vn(()=>{var l,u;(u=(l=s().find(d=>d.ref.current===document.activeElement))==null?void 0:l.ref.current)==null||u.scrollIntoView({block:"nearest"})},[s]),h.jsx(Oe.div,{"aria-hidden":!0,...o,ref:t,style:{flexShrink:0,...o.style},onPointerDown:he(o.onPointerDown,()=>{i.current===null&&(i.current=window.setInterval(r,50))}),onPointerMove:he(o.onPointerMove,()=>{var l;(l=a.onItemLeave)==null||l.call(a),i.current===null&&(i.current=window.setInterval(r,50))}),onPointerLeave:he(o.onPointerLeave,()=>{c()})})}),Noe="SelectSeparator",jD=g.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return h.jsx(Oe.div,{"aria-hidden":!0,...r,ref:t})});jD.displayName=Noe;var Wx="SelectArrow",koe=g.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,o=Hf(n),a=Qo(Wx,n),i=Jo(Wx,n);return a.open&&i.position==="popper"?h.jsx(bd,{...o,...r,ref:t}):null});koe.displayName=Wx;function ED(e){return e===""||e===void 0}var SD=g.forwardRef((e,t)=>{const{value:n,...r}=e,o=g.useRef(null),a=tt(t,o),i=Z3(n);return g.useEffect(()=>{const s=o.current,c=window.HTMLSelectElement.prototype,l=Object.getOwnPropertyDescriptor(c,"value").set;if(i!==n&&l){const u=new Event("change",{bubbles:!0});l.call(s,n),s.dispatchEvent(u)}},[i,n]),h.jsx(awe,{asChild:!0,children:h.jsx("select",{...r,ref:a,defaultValue:n})})});SD.displayName="BubbleSelect";function CD(e){const t=Ro(e),n=g.useRef(""),r=g.useRef(0),o=g.useCallback(i=>{const s=n.current+i;t(s),function c(l){n.current=l,window.clearTimeout(r.current),l!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(s)},[t]),a=g.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return g.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,o,a]}function OD(e,t,n){const r=t.length>1&&Array.from(t).every(s=>s===t[0])?t[0]:t,o=n?e.indexOf(n):-1;let a=Poe(e,Math.max(o,0));r.length===1&&(a=a.filter(s=>s!==n));const i=a.find(s=>s.textValue.toLowerCase().startsWith(r.toLowerCase()));return i!==n?i:void 0}function Poe(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var Aoe=eD,MD=nD,Toe=oD,Roe=aD,Ioe=iD,ND=sD,Doe=dD,kD=hD,PD=yD,Loe=gD,Foe=bD,AD=xD,TD=wD,RD=jD;const yo=Aoe,go=Toe,Rr=g.forwardRef(({className:e,children:t,...n},r)=>h.jsxs(MD,{ref:r,className:Q("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...n,children:[t,h.jsx(Roe,{asChild:!0,children:h.jsx(de,{name:"chevron-down",className:"h-4 w-4 opacity-50"})})]}));Rr.displayName=MD.displayName;const ID=g.forwardRef(({className:e,...t},n)=>h.jsx(AD,{ref:n,className:Q("flex cursor-default items-center justify-center py-1",e),...t,children:h.jsx(de,{name:"chevron-up",className:"h-4 w-4"})}));ID.displayName=AD.displayName;const DD=g.forwardRef(({className:e,...t},n)=>h.jsx(TD,{ref:n,className:Q("flex cursor-default items-center justify-center py-1",e),...t,children:h.jsx(de,{name:"chevron-down",className:"h-4 w-4"})}));DD.displayName=TD.displayName;const Ir=g.forwardRef(({className:e,children:t,position:n="popper",...r},o)=>h.jsx(Ioe,{children:h.jsxs(ND,{ref:o,className:Q("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[h.jsx(ID,{}),h.jsx(Doe,{className:Q("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),h.jsx(DD,{})]})}));Ir.displayName=ND.displayName;const Boe=g.forwardRef(({className:e,...t},n)=>h.jsx(kD,{ref:n,className:Q("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));Boe.displayName=kD.displayName;const En=g.forwardRef(({className:e,children:t,...n},r)=>h.jsxs(PD,{ref:r,className:Q("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[h.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:h.jsx(Foe,{children:h.jsx(de,{name:"check",className:"h-4 w-4"})})}),h.jsx(Loe,{children:t})]}));En.displayName=PD.displayName;const $oe=g.forwardRef(({className:e,...t},n)=>h.jsx(RD,{ref:n,className:Q("-mx-1 my-1 h-px bg-muted",e),...t}));$oe.displayName=RD.displayName;const zoe=[Bu.WebLLM];function Voe(e){var C;const{id:t,setDialog:n}=e,{t:r}=Pe("components"),{toast:o}=en(),a=Yt(t),[i,s]=g.useState(""),[c,l]=g.useState(!1),[u,d]=g.useState(""),[f,p]=g.useState(Bu.WebLLM),[y,m]=g.useState(!1),[v,b]=g.useState(),x=Zn(M=>M.syncCachedLLMURLs),_=Zn(M=>M.cachedLLMURLs),{loading:w,createDatabaseLLM:j}=O3();g.useEffect(()=>{qt(()=>import("./index-DnLurQHa.js").then(async M=>(await M.__tla,M)),__vite__mapDeps([7,1,2,3,4,5,6])).then(async({functionCallingModelIds:M,prebuiltAppConfig:T})=>{const I=T.model_list;b({modelList:I,functionCallingModelIds:M})})},[]),g.useEffect(()=>{x()},[x]);const E=g.useMemo(()=>!(v!=null&&v.functionCallingModelIds)||!(v!=null&&v.modelList)?[]:((u?v==null?void 0:v.modelList.filter(M=>M.model_id.toLowerCase().includes(u.toLowerCase())):v==null?void 0:v.modelList)||[]).sort((M,T)=>{const I=_.some(H=>H.includes(M.model_id)),L=_.some(H=>H.includes(T.model_id));if(I&&!L)return-1;if(!I&&L)return 1;const D=Bf.includes(M.model_id),$=Bf.includes(T.model_id);if(D&&!$)return-1;if(!D&&$)return 1;const U=v==null?void 0:v.functionCallingModelIds.includes(M.model_id),F=v==null?void 0:v.functionCallingModelIds.includes(T.model_id);return U&&!F?-1:!U&&F?1:M.vram_required_MB&&T.vram_required_MB&&M.vram_required_MB!==T.vram_required_MB?M.vram_required_MB-T.vram_required_MB:M.model_id.localeCompare(T.model_id)}),[v==null?void 0:v.modelList,v==null?void 0:v.functionCallingModelIds,u,_]),S=g.useMemo(()=>{if(!(!i||!(v!=null&&v.modelList)))return v==null?void 0:v.modelList.find(M=>M.model_id===i)},[i,v==null?void 0:v.modelList]);g.useEffect(()=>{!(S!=null&&S.model_id)||!_||m(_.some(M=>M.includes(S.model_id)))},[_,S==null?void 0:S.model_id]);const O=g.useCallback(M=>M===1?rc.embedding:M===2?rc.VLM:rc.LLM,[]),N=g.useCallback(M=>{s(M),l(!1)},[]),P=g.useCallback(M=>{d(M)},[]),k=g.useCallback(M=>{p(M)},[]),R=async()=>{var M;if(a)try{await j(a,{name:i,model_type:O(S==null?void 0:S.model_type),function_calling:S!=null&&S.model_id?(M=v==null?void 0:v.functionCallingModelIds)==null?void 0:M.includes(S==null?void 0:S.model_id):!1}),n==null||n(!1)}catch{o({variant:"destructive",description:r("add_llm_card.errors.failed_to_create")})}finally{s("")}},A=g.useMemo(()=>E.map(M=>{var T;return h.jsxs(J3,{value:M.model_id,onSelect:N,children:[i===M.model_id?h.jsx(de,{name:"check",className:"mr-2 h-4 w-4"}):h.jsx("div",{className:"mr-2 h-4 w-4"}),h.jsxs("span",{className:"max-w-md",children:[h.jsxs("div",{className:"flex gap-2 mb-2",children:[h.jsx(Ko,{name:M.model_id}),M.model_id]}),h.jsx("div",{className:"flex max-w-full flex-wrap gap-1",children:h.jsx(Gi,{model:M,isFunctionCalling:((T=v==null?void 0:v.functionCallingModelIds)==null?void 0:T.includes(M.model_id))||!1,name:M.model_id,isCached:_.some(I=>I.includes(M.model_id))||!1})})]})]},M.model_id)}),[_,N,i,v==null?void 0:v.functionCallingModelIds,E]);return h.jsxs(At,{className:"max-w-lg",children:[h.jsx(fn,{children:h.jsx(_n,{children:r("add_llm_card.title")})}),h.jsxs(pn,{children:[h.jsxs("div",{className:"grid w-full gap-1.5",children:[h.jsx(Ge,{children:r("add_llm_card.provider")}),h.jsxs(yo,{value:f,onValueChange:k,children:[h.jsx(Rr,{className:"w-full mb-4",children:h.jsx(go,{placeholder:r("add_llm_card.provider_select_placeholder")})}),h.jsx(Ir,{children:Object.values(zoe).map(M=>h.jsx(En,{value:M,children:r(`add_llm_card.providers.${M.toLowerCase()}`)},M))})]}),h.jsx(Ge,{children:r("add_llm_card.model_name")}),h.jsxs(zre,{open:c,onOpenChange:l,children:[h.jsx(Px,{asChild:!0,children:h.jsxs(ut,{variant:"outline",role:"combobox","aria-expanded":c,className:"w-full justify-between",children:[i?S==null?void 0:S.model_id:r("add_llm_card.select_model_placeholder"),h.jsx(de,{name:"chevrons-up-down",className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),h.jsx(D3,{className:"w-full p-0",children:h.jsxs(Y3,{children:[h.jsx(K3,{onValueChange:P,placeholder:r("add_llm_card.search_placeholder")}),h.jsxs(X3,{children:[h.jsx(G3,{children:r("add_llm_card.no_model")}),h.jsx(Q3,{children:A})]})]})})]})]}),S?h.jsxs("div",{className:"mt-4",children:[h.jsxs("div",{className:"mt-4 text-sm text-muted-foreground center flex max-w-full flex-wrap gap-1",children:[h.jsx(Ko,{name:S.model_id,className:"mr-2"}),h.jsx(Gi,{model:S,isFunctionCalling:((C=v==null?void 0:v.functionCallingModelIds)==null?void 0:C.includes(S.model_id))||!1,name:S.model_id,isCached:_.some(M=>M.includes(S.model_id))||!1})]}),h.jsxs("div",{className:"mt-2 text-sm text-muted-foreground",children:[h.jsx("span",{className:"font-bold mr-2",children:r("add_llm_card.model_url")}),S.model]}),h.jsxs("div",{className:"mt-2 text-sm text-muted-foreground center flex",children:[h.jsx("span",{className:"font-bold mr-2",children:r("add_llm_card.model_lib_url")}),S.model_lib]}),h.jsxs("div",{className:"mt-2 text-sm text-muted-foreground center flex",children:[h.jsx("span",{className:"font-bold mr-2",children:r("add_llm_card.metadata")}),JSON.stringify(S.overrides)]})]}):null]}),h.jsx(Xo,{className:"flex justify-between",children:h.jsx(Mn,{loading:w,disabled:!(i!=null&&i.length),onClick:R,className:"w-full",children:r(y?"add_llm_card.button_add":"add_llm_card.button_download_and_add")})})]})}const LD=()=>{const e=pt(a=>{var i;return(i=a.currentSession)==null?void 0:i.id}),[t,n]=g.useState(!1),r=Ae(a=>a.createOrUpdateFlowNode),o=g.useCallback(async(a,i)=>{var s,c,l;try{if(!a||!e)throw new Error("Source or Session not found");n(!0);const u=((s=a.position)==null?void 0:s.x)||0,d=(((c=a.position)==null?void 0:c.y)||0)+(((l=a.measured)==null?void 0:l.height)||0),f=await ue("Prompt").save({content:i.content,prefix:i.prefix,role:i.role||Nn.System,status:Wr.Started,session_id:e,type:i.type||kn.Chat});if(!f)throw new Error("Failed to save prompt");if(!await r({source_id:f.id,source_type:"Prompt",node_type:ae.Prompt,x:u,y:d+20}))throw new Error("Failed to save prompt node")}finally{n(!1)}},[e,r]);return{loading:t,createPrompt:o}},Uoe={[kn.Chat]:{label:"add_prompt_card.prompt_types.chat",value:kn.Chat},[kn.FewShotExample]:{label:"add_prompt_card.prompt_types.few_shot_example",value:kn.FewShotExample}},Hoe={[Nn.System]:{label:"add_prompt_card.prompt_roles.system",value:Nn.System},[Nn.Human]:{label:"add_prompt_card.prompt_roles.human",value:Nn.Human},[Nn.AI]:{label:"add_prompt_card.prompt_roles.ai",value:Nn.AI}},qx=g.memo(({defaultPromptContent:e,defaultPromptRole:t,defaultPromptType:n,hidePromptRole:r,hidePromptType:o,loading:a,onSubmit:i})=>{const[s,c]=g.useState(e||""),[l,u]=g.useState(n||kn.Chat),[d,f]=g.useState(t),[p,y]=g.useState(""),{t:m}=Pe("components"),v=g.useCallback(j=>{c(j.target.value)},[]),b=g.useCallback(j=>{y(j.target.value)},[]),x=g.useCallback(j=>{j===kn.FewShotExample&&c(`Question: {input}
Answer: {output}`),u(j)},[]),_=g.useCallback(j=>{f(j)},[]),w=async()=>{await i({content:s,role:d,prefix:p,type:l})&&(c(""),f(void 0),u("chat"),y(""))};return h.jsxs("div",{children:[h.jsxs("div",{className:"grid w-full gap-1.5",children:[o?void 0:h.jsxs(h.Fragment,{children:[h.jsx(Ge,{children:m("add_prompt_card.prompt_type")}),h.jsxs(yo,{value:l,onValueChange:x,children:[h.jsx(Rr,{className:"w-full mb-4",children:h.jsx(go,{placeholder:m("add_prompt_card.type_select_placeholder")})}),h.jsx(Ir,{children:Object.values(Uoe).map(j=>h.jsx(En,{value:j.value,children:m(j.label)},j.value))})]})]}),r?void 0:h.jsxs(h.Fragment,{children:[h.jsx(Ge,{children:m("add_prompt_card.prompt_role")}),h.jsxs(yo,{value:d,onValueChange:_,children:[h.jsx(Rr,{className:"w-full mb-4",children:h.jsx(go,{placeholder:m("add_prompt_card.role_select_placeholder")})}),h.jsx(Ir,{children:Object.values(Hoe).map(j=>h.jsx(En,{value:j.value,children:m(j.label)},j.value))})]})]}),l===kn.FewShotExample&&h.jsxs(h.Fragment,{children:[h.jsx(Ge,{children:m("add_prompt_card.prompt_prefix")}),h.jsx(ao,{value:p,onChange:b,disabled:!1,className:"h-20",placeholder:m("add_prompt_card.placeholder"),id:"message"}),h.jsx(Ge,{children:m("add_prompt_card.prompt_content")}),h.jsxs("div",{className:"w-full border-0 text-gray-700 flex text-sm justify-end items-center",children:[h.jsx(de,{name:"info",className:"mr-2",size:14}),m("add_prompt_card.few_shot_example_note")]})]}),h.jsx(ao,{value:s,onChange:v,disabled:!1,placeholder:m("add_prompt_card.placeholder"),id:"message"})]}),h.jsx("div",{children:h.jsx(Mn,{loading:a,disabled:!(s!=null&&s.length),onClick:w,className:"w-full mt-4",children:m("add_prompt_card.button")})})]})}),Woe=g.memo(e=>{const{id:t,thread:n,setDialog:r}=e,{t:o}=Pe("components"),{toast:a}=en(),i=Yt(t),{createPrompt:s,loading:c}=LD(),l=async u=>{if(i)try{if(!(u!=null&&u.content))throw new Error("Prompt data is missing");await s(i,{...u,content:u.content,thread:n}),r==null||r(!1)}catch(d){a({variant:"destructive",title:`${d}`})}};return h.jsxs(At,{className:"mw-full",children:[h.jsx(fn,{children:h.jsx(_n,{children:o("add_prompt_card.title")})}),h.jsx(pn,{children:h.jsx(qx,{onSubmit:l,loading:c,defaultPromptRole:"system",defaultPromptType:"chat"})})]})}),qoe="0123456789abcdef",Yoe=[8,4,4,4,12];function Yx(){return Yoe.map(e=>iwe(qoe,e)()).join("-")}const Koe=()=>{const e=pt(i=>{var s;return(s=i.currentSession)==null?void 0:s.id}),[t,n]=g.useState(!1),r=Ae(i=>i.createOrUpdateFlowNode),o=g.useCallback((i,s,c,l)=>{var u;if(e){for(const d of s)(u=d.data)!=null&&u.length?o(i,d.data,c,d.id):c.push({name:d.name,type:d.type,enum:d.enum?JSON.stringify(d.enum):"",required:d.required,description:d.description,id:d.id||Yx(),parent_id:l,schema_id:i,session_id:e});return c}},[e]),a=g.useCallback(async(i,s)=>{var c,l,u;try{if(!i||!e)throw new Error("Source or Session not found");n(!0);const d=((c=i.position)==null?void 0:c.x)||0,f=(((l=i.position)==null?void 0:l.y)||0)+(((u=i.measured)==null?void 0:u.height)||0),p=await ue("Schema").save({name:"Untitled Schema",session_id:e});if(!p)throw new Error("Failed to save schema");const y=o(p.id,s,[],void 0);if(!(y!=null&&y.length))throw new Error("Failed to convert schema items");if(await ue("SchemaItem").save(y),!await r({source_id:p.id,source_type:"Schema",node_type:ae.Schema,x:d,y:f+20}))throw new Error("Failed to save schema node")}finally{n(!1)}},[e,o,r]);return{loading:t,createSchema:a}};var vo="Accordion",Xoe=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[Kx,Goe,Qoe]=ku(vo),[qf,Awe]=Bn(vo,[Qoe,pC]),Xx=pC(),FD=V.forwardRef((e,t)=>{const{type:n,...r}=e,o=r,a=r;return h.jsx(Kx.Provider,{scope:e.__scopeAccordion,children:n==="multiple"?h.jsx(tae,{...a,ref:t}):h.jsx(eae,{...o,ref:t})})});FD.displayName=vo;var[BD,Joe]=qf(vo),[$D,Zoe]=qf(vo,{collapsible:!1}),eae=V.forwardRef((e,t)=>{const{value:n,defaultValue:r,onValueChange:o=()=>{},collapsible:a=!1,...i}=e,[s,c]=Zt({prop:n,defaultProp:r,onChange:o});return h.jsx(BD,{scope:e.__scopeAccordion,value:s?[s]:[],onItemOpen:c,onItemClose:V.useCallback(()=>a&&c(""),[a,c]),children:h.jsx($D,{scope:e.__scopeAccordion,collapsible:a,children:h.jsx(zD,{...i,ref:t})})})}),tae=V.forwardRef((e,t)=>{const{value:n,defaultValue:r,onValueChange:o=()=>{},...a}=e,[i=[],s]=Zt({prop:n,defaultProp:r,onChange:o}),c=V.useCallback(u=>s((d=[])=>[...d,u]),[s]),l=V.useCallback(u=>s((d=[])=>d.filter(f=>f!==u)),[s]);return h.jsx(BD,{scope:e.__scopeAccordion,value:i,onItemOpen:c,onItemClose:l,children:h.jsx($D,{scope:e.__scopeAccordion,collapsible:!0,children:h.jsx(zD,{...a,ref:t})})})}),[nae,Yf]=qf(vo),zD=V.forwardRef((e,t)=>{const{__scopeAccordion:n,disabled:r,dir:o,orientation:a="vertical",...i}=e,s=V.useRef(null),c=tt(s,t),l=Goe(n),u=Io(o)==="ltr",d=he(e.onKeyDown,f=>{var S;if(!Xoe.includes(f.key))return;const p=f.target,y=l().filter(O=>{var N;return!((N=O.ref.current)!=null&&N.disabled)}),m=y.findIndex(O=>O.ref.current===p),v=y.length;if(m===-1)return;f.preventDefault();let b=m;const x=0,_=v-1,w=()=>{b=m+1,b>_&&(b=x)},j=()=>{b=m-1,b<x&&(b=_)};switch(f.key){case"Home":b=x;break;case"End":b=_;break;case"ArrowRight":a==="horizontal"&&(u?w():j());break;case"ArrowDown":a==="vertical"&&w();break;case"ArrowLeft":a==="horizontal"&&(u?j():w());break;case"ArrowUp":a==="vertical"&&j();break}const E=b%v;(S=y[E].ref.current)==null||S.focus()});return h.jsx(nae,{scope:n,disabled:r,direction:o,orientation:a,children:h.jsx(Kx.Slot,{scope:n,children:h.jsx(Oe.div,{...i,"data-orientation":a,ref:c,onKeyDown:r?void 0:d})})})}),Kf="AccordionItem",[rae,Gx]=qf(Kf),VD=V.forwardRef((e,t)=>{const{__scopeAccordion:n,value:r,...o}=e,a=Yf(Kf,n),i=Joe(Kf,n),s=Xx(n),c=ht(),l=r&&i.value.includes(r)||!1,u=a.disabled||e.disabled;return h.jsx(rae,{scope:n,open:l,disabled:u,triggerId:c,children:h.jsx(yC,{"data-orientation":a.orientation,"data-state":KD(l),...s,...o,ref:t,disabled:u,open:l,onOpenChange:d=>{d?i.onItemOpen(r):i.onItemClose(r)}})})});VD.displayName=Kf;var UD="AccordionHeader",HD=V.forwardRef((e,t)=>{const{__scopeAccordion:n,...r}=e,o=Yf(vo,n),a=Gx(UD,n);return h.jsx(Oe.h3,{"data-orientation":o.orientation,"data-state":KD(a.open),"data-disabled":a.disabled?"":void 0,...r,ref:t})});HD.displayName=UD;var Qx="AccordionTrigger",WD=V.forwardRef((e,t)=>{const{__scopeAccordion:n,...r}=e,o=Yf(vo,n),a=Gx(Qx,n),i=Zoe(Qx,n),s=Xx(n);return h.jsx(Kx.ItemSlot,{scope:n,children:h.jsx(Q7,{"aria-disabled":a.open&&!i.collapsible||void 0,"data-orientation":o.orientation,id:a.triggerId,...s,...r,ref:t})})});WD.displayName=Qx;var qD="AccordionContent",YD=V.forwardRef((e,t)=>{const{__scopeAccordion:n,...r}=e,o=Yf(vo,n),a=Gx(qD,n),i=Xx(n);return h.jsx(J7,{role:"region","aria-labelledby":a.triggerId,"data-orientation":o.orientation,...i,...r,ref:t,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...e.style}})});YD.displayName=qD;function KD(e){return e?"open":"closed"}let XD;ZE=FD,eS=VD,XD=HD,Om=WD,Mm=YD;const GD=ZE,Jx=g.forwardRef(({className:e,...t},n)=>h.jsx(eS,{ref:n,className:Q("border-b",e),...t}));Jx.displayName="AccordionItem";const Zx=g.forwardRef(({className:e,children:t,...n},r)=>h.jsx(XD,{className:"flex",children:h.jsxs(Om,{ref:r,className:Q("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",e),...n,children:[t,h.jsx(de,{name:"chevron-down",className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));Zx.displayName=Om.displayName;const ew=g.forwardRef(({className:e,children:t,...n},r)=>h.jsx(Mm,{ref:r,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...n,children:h.jsx("div",{className:Q("pb-4 pt-0",e),children:t})}));ew.displayName=Mm.displayName;var tw="Checkbox",[oae,Twe]=Bn(tw),[aae,iae]=oae(tw),QD=g.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:r,checked:o,defaultChecked:a,required:i,disabled:s,value:c="on",onCheckedChange:l,form:u,...d}=e,[f,p]=g.useState(null),y=tt(t,w=>p(w)),m=g.useRef(!1),v=f?u||!!f.closest("form"):!0,[b=!1,x]=Zt({prop:o,defaultProp:a,onChange:l}),_=g.useRef(b);return g.useEffect(()=>{const w=f==null?void 0:f.form;if(w){const j=()=>x(_.current);return w.addEventListener("reset",j),()=>w.removeEventListener("reset",j)}},[f,x]),h.jsxs(aae,{scope:n,state:b,disabled:s,children:[h.jsx(Oe.button,{type:"button",role:"checkbox","aria-checked":Zo(b)?"mixed":b,"aria-required":i,"data-state":e5(b),"data-disabled":s?"":void 0,disabled:s,value:c,...d,ref:y,onKeyDown:he(e.onKeyDown,w=>{w.key==="Enter"&&w.preventDefault()}),onClick:he(e.onClick,w=>{x(j=>Zo(j)?!0:!j),v&&(m.current=w.isPropagationStopped(),m.current||w.stopPropagation())})}),v&&h.jsx(sae,{control:f,bubbles:!m.current,name:r,value:c,checked:b,required:i,disabled:s,form:u,style:{transform:"translateX(-100%)"},defaultChecked:Zo(a)?!1:a})]})});QD.displayName=tw;var JD="CheckboxIndicator",ZD=g.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:r,...o}=e,a=iae(JD,n);return h.jsx(On,{present:r||Zo(a.state)||a.state===!0,children:h.jsx(Oe.span,{"data-state":e5(a.state),"data-disabled":a.disabled?"":void 0,...o,ref:t,style:{pointerEvents:"none",...e.style}})})});ZD.displayName=JD;var sae=e=>{const{control:t,checked:n,bubbles:r=!0,defaultChecked:o,...a}=e,i=g.useRef(null),s=Z3(n),c=CO(t);g.useEffect(()=>{const u=i.current,d=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(d,"checked").set;if(s!==n&&f){const p=new Event("click",{bubbles:r});u.indeterminate=Zo(n),f.call(u,Zo(n)?!1:n),u.dispatchEvent(p)}},[s,n,r]);const l=g.useRef(Zo(n)?!1:n);return h.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:o??l.current,...a,tabIndex:-1,ref:i,style:{...e.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function Zo(e){return e==="indeterminate"}function e5(e){return Zo(e)?"indeterminate":e?"checked":"unchecked"}im=QD,zE=ZD;const t5=g.forwardRef(({className:e,...t},n)=>h.jsx(im,{ref:n,className:Q("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:h.jsx(zE,{className:Q("flex items-center justify-center text-current"),children:h.jsx(de,{name:"check",className:"h-4 w-4"})})}));t5.displayName=im.displayName;const n5=g.memo(({setData:e,data:t,id:n})=>{const{t:r}=Pe("components"),[o,a]=g.useState({name:"",description:"",type:"string",required:!1,data:[]}),i=g.useMemo(()=>n&&t.find(m=>m.id===n)||o,[t,o,n]),s=g.useCallback(m=>{m.target.value&&!/^[a-zA-Z_][a-zA-Z0-9_]*$/.test(m.target.value)||(n?e(v=>[...v.map(b=>b.id===n?{...b,name:m.target.value||""}:b)]):a(v=>({...v,name:m.target.value||""})))},[n,e]),c=g.useCallback(m=>{n?e(v=>[...v.map(b=>b.id===n?{...b,description:m.target.value||""}:b)]):a(v=>({...v,description:m.target.value||""}))},[n,e]),l=g.useCallback(m=>{n?e(v=>[...v.map(b=>b.id===n?{...b,type:m||""}:b)]):a(v=>({...v,type:m||"string"}))},[n,e]),u=g.useCallback(m=>{n?e(v=>[...v.map(b=>b.id===n?{...b,required:!!m||!1}:b)]):a(v=>({...v,required:!!m||!1}))},[n,e]),d=g.useCallback(m=>{n?e(v=>[...v.map(b=>b.id===n?{...b,enum:m.target.value||""}:b)]):a(v=>({...v,enum:m.target.value||""}))},[n,e]),f=g.useCallback(()=>{if(t.find(m=>m.name===o.name))return qs({variant:"destructive",content:"Name already exists"});o.id=Yx(),e(m=>[...m,{...o}]),a({name:"",description:"",type:"string",required:!1,id:Yx(),parent:n||void 0,data:[]})},[t,o,e,n]),p=g.useCallback(m=>{e(v=>[...v.map(b=>b.id===n?{...b,data:m(b.data||[])}:b)])},[n,e]),y=["object","array"].includes(i.type);return h.jsxs("div",{className:"w-full p-1",children:[h.jsxs("div",{children:[h.jsx(Ge,{children:r("add_schema_card.field.name")}),h.jsx(ln,{id:"name",onChange:s,placeholder:r("add_schema_card.field.name_placeholder"),value:(i==null?void 0:i.name)||""})]}),h.jsxs("div",{children:[h.jsx(Ge,{children:r("add_schema_card.field.description")}),h.jsx(ln,{id:"description",placeholder:r("add_schema_card.field.description_placeholder"),onChange:c,value:(i==null?void 0:i.description)||""})]}),h.jsxs("div",{children:[h.jsx(Ge,{children:r("add_schema_card.field.type")}),h.jsxs(yo,{onValueChange:l,value:(i==null?void 0:i.type)||"",children:[h.jsx(Rr,{children:h.jsx(go,{placeholder:r("add_schema_card.field.type_placeholder")})}),h.jsxs(Ir,{children:[h.jsx(En,{value:"string",children:r("add_schema_card.types.string")}),h.jsx(En,{value:"boolean",children:r("add_schema_card.types.boolean")}),h.jsx(En,{value:"number",children:r("add_schema_card.types.number")}),h.jsx(En,{value:"object",children:r("add_schema_card.types.object")}),h.jsx(En,{value:"array",children:r("add_schema_card.types.array")})]})]})]}),h.jsxs("div",{className:"flex items-center h-10",children:[h.jsx(Ge,{children:r("add_schema_card.field.required")}),h.jsx(t5,{className:"ml-2","aria-label":"Select row",onCheckedChange:u,checked:i==null?void 0:i.required})]}),y?h.jsxs("div",{className:"mt-2 flex flex-col gap-2",children:[h.jsx(Ge,{children:r("add_schema_card.children")}),h.jsx(r5,{data:(i==null?void 0:i.data)||[],setData:p})]}):null,(i==null?void 0:i.type)==="enum"?h.jsxs("div",{className:"mt-2 flex flex-col gap-2",children:[h.jsx(Ge,{children:r("add_schema_card.field.enum")}),h.jsx(ln,{id:"enum",onChange:d,placeholder:"Enum"})]}):null,n?null:h.jsx("div",{className:"w-full flex justify-end mt-2",children:h.jsx(ut,{variant:"secondary",disabled:!i.name||!i.description||!i.type,onClick:f,className:"w-full",children:r("add_schema_card.field.add_field")})})]})}),r5=g.memo(({data:e,setData:t})=>h.jsxs(GD,{type:"single",collapsible:!0,children:[e.map(n=>h.jsxs(Jx,{value:`${n.id}`,children:[h.jsx(Zx,{children:n.name}),h.jsx(ew,{children:h.jsx(n5,{setData:t,data:e,id:n.id})})]},n.id||"new")),h.jsx(At,{className:"p-2 mt-4",children:h.jsx(n5,{setData:t,data:e})})]})),cae=g.memo(e=>{const{t}=Pe("components"),{id:n}=e,r=Yt(n),[o,a]=g.useState([]),{createSchema:i,loading:s}=Koe(),c=async()=>{if(r&&(o!=null&&o.length))try{await i(r,o),a([])}catch(l){qs({variant:"destructive",title:`${l}`})}};return h.jsxs(At,{className:"max-w-lg",children:[h.jsx(fn,{children:h.jsx(_n,{children:t("add_schema_card.title")})}),h.jsx(pn,{className:"min-w-96",children:h.jsx(r5,{setData:a,data:o})}),h.jsx(Xo,{className:"flex justify-between",children:h.jsx(Mn,{loading:s,disabled:!(o!=null&&o.length),onClick:c,className:"w-full",children:t("add_schema_card.create")})})]})}),o5=()=>{const e=pt(a=>{var i;return(i=a.currentSession)==null?void 0:i.id}),[t,n]=g.useState(!1),r=Ae(a=>a.createOrUpdateFlowNode),o=g.useCallback(async(a,i,s)=>{var c,l,u;try{if(!a||!e)throw new Error("Source or Session not found");n(!0);const d=((c=a.position)==null?void 0:c.x)||0,f=(((l=a.position)==null?void 0:l.y)||0)+(((u=a.measured)==null?void 0:u.height)||0),p=swe(i,s),y=await ue("CSVData").save({headers:p.headers,csv:p.data,session_id:e});if(!y)throw new Error("Failed to save");if(!await r({source_id:y.id,source_type:"CSVData",node_type:ae.CSVData,x:d,y:f+20}))throw new Error("Failed to save node")}finally{n(!1)}},[e,r]);return{loading:t,createCSVData:o}},Xf=g.forwardRef(({className:e,...t},n)=>h.jsx("div",{className:"relative w-full overflow-auto",children:h.jsx("table",{ref:n,className:Q("w-full caption-bottom text-sm",e),...t})}));Xf.displayName="Table";const Gf=g.forwardRef(({className:e,...t},n)=>h.jsx("thead",{ref:n,className:Q("[&_tr]:border-b",e),...t}));Gf.displayName="TableHeader";const Qf=g.forwardRef(({className:e,...t},n)=>h.jsx("tbody",{ref:n,className:Q("[&_tr:last-child]:border-0",e),...t}));Qf.displayName="TableBody";const lae=g.forwardRef(({className:e,...t},n)=>h.jsx("tfoot",{ref:n,className:Q("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));lae.displayName="TableFooter";const Ra=g.forwardRef(({className:e,...t},n)=>h.jsx("tr",{ref:n,className:Q("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));Ra.displayName="TableRow";const es=g.forwardRef(({className:e,...t},n)=>h.jsx("th",{ref:n,className:Q("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));es.displayName="TableHead";const ts=g.forwardRef(({className:e,...t},n)=>h.jsx("td",{ref:n,className:Q("align-middle [&:has([role=checkbox])]:pr-0",e),...t}));ts.displayName="TableCell";const uae=g.forwardRef(({className:e,...t},n)=>h.jsx("caption",{ref:n,className:Q("mt-4 text-sm text-muted-foreground",e),...t}));uae.displayName="TableCaption";function dae({data:e}){const{t}=Pe("components");return h.jsxs(Xf,{className:"w-full",children:[h.jsx(Gf,{children:h.jsxs(Ra,{children:[h.jsx(es,{children:t("add_few_shot_example_card.input")}),h.jsx(es,{children:t("add_few_shot_example_card.output")})]})}),h.jsx(Qf,{children:e==null?void 0:e.map((n,r)=>h.jsxs(Ra,{children:[h.jsx(ts,{className:"p-4",children:n.input}),h.jsx(ts,{className:"p-4",children:n.output})]},`${n.input}_${n.output}_${r}`))})]})}const fae=g.memo(e=>{const{id:t}=e,{t:n}=Pe("components"),[r,o]=g.useState([]),[a,i]=g.useState(""),[s,c]=g.useState(""),l=Yt(t),{createCSVData:u,loading:d}=o5(),f=()=>{o(y=>[...y,{input:a,output:s}]),i(""),c("")},p=async()=>{l&&await u(l,["input","output"],r.map(y=>[y.input,y.output]))};return h.jsxs(At,{className:"mw-full",children:[h.jsx(fn,{children:h.jsx(_n,{children:n("add_few_shot_example_card.title")})}),h.jsxs(pn,{children:[h.jsxs("div",{className:"flex flex-col space-y-1.5",children:[h.jsx(Ge,{htmlFor:"name",children:n("add_few_shot_example_card.input")}),h.jsx(ln,{value:a,onChange:y=>i(y.target.value||""),id:"name",placeholder:n("add_few_shot_example_card.input_placeholder")})]}),h.jsxs("div",{className:"flex flex-col space-y-1.5 mt-3",children:[h.jsx(Ge,{htmlFor:"name",children:n("add_few_shot_example_card.output")}),h.jsx(ao,{value:s,onChange:y=>c(y.target.value||""),placeholder:n("add_few_shot_example_card.output_placeholder")})]}),h.jsx("div",{className:"w-full flex mt-4 justify-end",children:h.jsx(ut,{disabled:!a||!s,onClick:f,className:"w-40",children:n("add_few_shot_example_card.add")})}),h.jsx(dae,{data:r||[]})]}),h.jsx(Xo,{className:"flex justify-between",children:h.jsx(Mn,{loading:d,disabled:!(r!=null&&r.length),onClick:p,className:"w-full",children:n("add_few_shot_example_card.create")})})]})}),pae=()=>{const e=pt(i=>{var s;return(s=i.currentSession)==null?void 0:s.id}),[t,n]=g.useState(!1),r=Ae(i=>i.createOrUpdateFlowNode),o=Ae(i=>i.createOrUpdateFlowEdge),a=g.useCallback(async(i,s,c)=>{var l,u,d;try{if(!i||!e)throw new Error("Source or Session not found");if(!s.name||!s.description)throw new Error("Name is required");n(!0);const f=((l=i.position)==null?void 0:l.x)||0,p=(((u=i.position)==null?void 0:u.y)||0)+(((d=i.measured)==null?void 0:d.height)||0),y=await ue("ToolDefinition").save({...s,name:`${s.name}`,description:`${s.description}`,session_id:e});if(!y)throw new Error("Failed create tool.");const m=await r({source_id:y.id,source_type:"ToolDefinition",node_type:ae.ToolDefinition,x:f,y:p+20});if(!m)throw new Error("Failed to save node");c!=null&&c.schemaNode&&await o({source:c.schemaNode.id,target:m.id})}finally{n(!1)}},[e,r,o]);return{loading:t,createTool:a}},hae=g.memo(e=>{const{t}=Pe("components"),{toast:n}=en(),{id:r}=e,o=Yt(r),[a,i]=g.useState(""),[s,c]=g.useState(""),{createTool:l,loading:u}=pae(),d=y=>{i(y.target.value)},f=y=>{c(y.target.value)},p=async()=>{if(o&&a&&s)try{await l(o,{name:a,description:s}),i(""),c("")}catch(y){jr(y),n({variant:"destructive",title:t("add_tool_card.errors.create_tool_failed")})}};return h.jsxs(At,{className:"mw-full",children:[h.jsx(fn,{children:h.jsx(_n,{children:t("add_tool_card.title")})}),h.jsxs(pn,{children:[h.jsxs("div",{className:"flex flex-col space-y-1.5",children:[h.jsx(Ge,{htmlFor:"name",children:t("add_tool_card.tool_name")}),h.jsx(ln,{onChange:d,id:"name",placeholder:t("add_tool_card.name_placeholder")})]}),h.jsxs("div",{className:"flex flex-col space-y-1.5 mt-3",children:[h.jsx(Ge,{htmlFor:"name",children:t("add_tool_card.tool_description")}),h.jsx(ao,{onChange:f,placeholder:t("add_tool_card.description_placeholder")})]})]}),h.jsx(Xo,{className:"flex justify-between",children:h.jsx(Mn,{loading:u,onClick:p,className:"w-full",children:t("add_tool_card.create")})})]})}),mae=()=>{const e=pt(i=>{var s;return(s=i.currentSession)==null?void 0:s.id}),[t,n]=g.useState(!1),r=Ae(i=>i.createOrUpdateFlowNode),o=Ae(i=>i.createOrUpdateFlowEdge),a=g.useCallback(async(i,s,c)=>{var l,u,d;try{if(!(s!=null&&s.name)||!i||!e)throw new Error("Source or Session not found");n(!0);const f=((l=i.position)==null?void 0:l.x)||0,p=(((u=i.position)==null?void 0:u.y)||0)+(((d=i.measured)==null?void 0:d.height)||0),y=await ue("JSONLData").save({headers:cwe(["content","embedding","metadata"]),jsonl:"",session_id:e});if(!y)throw new Error("Failed to save databaseSource");const m=await r({source_id:y.id,source_type:"JSONLData",node_type:ae.JSONLData,x:f+80,y:p+30});if(!m)throw new Error("Failed to save databaseSource node");const v=await ue("VectorDatabase").save({...s,name:`${s.name}`,type:s.type||lwe.Local,storage:s.storage||w$.DataNode,provider:s.provider||_$.Memory,session_id:e,metadata:c?JSON.stringify({textSplitter:c}):void 0});if(!v)throw new Error("Failed to save vectorDatabase");const b=await r({source_id:v.id,source_type:"VectorDatabase",node_type:ae.VectorDatabase,x:f,y:p+30});if(!b)throw new Error("Failed to save vectorDatabase node");return await o({source:m.id,target:b.id}),{vectorDatabase:v,vectorDatabaseNode:b}}finally{n(!1)}},[e,r,o]);return{loading:t,createVectorDatabase:a}},Sl=[_$.Memory],Cl=[w$.DataNode],yae=["TokenTextSplitter","CharacterTextSplitter","RecursiveCharacterTextSplitter"],gae=g.memo(e=>{const{t}=Pe("components"),{id:n}=e,r=Yt(n),{toast:o}=en(),[a,i]=g.useState(""),[s,c]=g.useState(Sl[0]),[l,u]=g.useState(Cl[0]),[d,f]=g.useState({}),{loading:p,createVectorDatabase:y}=mae(),m=g.useCallback(E=>{c(E)},[]),v=g.useCallback(E=>{u(E)},[]),b=g.useCallback(E=>{f(S=>({...S,type:E,chunkSize:500,chunkOverlap:40}))},[]),x=g.useCallback(E=>{i(E.target.value||"")},[]),_=g.useCallback(E=>{f(S=>({...S,chunkSize:Number(E.target.value)}))},[]),w=g.useCallback(E=>{f(S=>({...S,chunkOverlap:Number(E.target.value)}))},[]),j=async()=>{try{if(!r)return;await y(r,{name:a,provider:s,storage:l},d!=null&&d.type?{type:d.type,chunkSize:d.chunkSize||500,chunkOverlap:d.chunkOverlap||0}:void 0),i(""),f({})}catch{o({variant:"destructive",description:t("create_vector_database_card.errors.create_failed")})}};return h.jsxs(At,{className:"mw-full",children:[h.jsx(fn,{children:h.jsx(_n,{children:t("create_vector_database_card.title")})}),h.jsx(pn,{children:h.jsxs("div",{className:"grid w-full gap-1.5",children:[h.jsx(Ge,{children:t("create_vector_database_card.name")}),h.jsx(ln,{className:"mb-4",value:a,onChange:x}),(Cl==null?void 0:Cl.length)>1?h.jsxs(h.Fragment,{children:[h.jsx(Ge,{children:t("create_vector_database_card.storage_type")}),h.jsxs(yo,{value:l,onValueChange:v,children:[h.jsx(Rr,{className:"w-full mb-4",children:h.jsx(go,{placeholder:t("create_vector_database_card.provider_select_placeholder")})}),h.jsx(Ir,{children:Object.values(Cl).map(E=>h.jsx(En,{value:E,children:t(`create_vector_database_card.storage_types.${E.toLowerCase()}`)},E))})]})]}):void 0,(Sl==null?void 0:Sl.length)>1?h.jsxs(h.Fragment,{children:[h.jsx(Ge,{children:t("create_vector_database_card.provider")}),h.jsxs(yo,{value:s,onValueChange:m,children:[h.jsx(Rr,{className:"w-full mb-4",children:h.jsx(go,{placeholder:t("create_vector_database_card.provider_select_placeholder")})}),h.jsx(Ir,{children:Object.values(Sl).map(E=>h.jsx(En,{value:E,children:t(`create_vector_database_card.providers.${E.toLowerCase()}`)},E))})]})]}):void 0,h.jsx(Ge,{children:t("create_vector_database_card.text_splitter")}),h.jsxs(yo,{value:d.type,onValueChange:b,children:[h.jsx(Rr,{className:"w-full mb-4",children:h.jsx(go,{placeholder:t("create_vector_database_card.text_splitter_select_placeholder")})}),h.jsx(Ir,{children:Object.values(yae).map(E=>h.jsx(En,{value:E,children:t(`create_vector_database_card.text_splitters.${E.toLowerCase()}`)},E))})]}),d.type?h.jsxs(At,{children:[h.jsx(fn,{children:h.jsx(_n,{children:t("create_vector_database_card.text_splitter_configuration")})}),h.jsxs(pn,{children:[h.jsx(Ge,{children:t("create_vector_database_card.text_splitter_chunksize")}),h.jsx(ln,{value:d.chunkSize,onChange:_,placeholder:t("create_vector_database_card.text_splitter_chunksize_placeholder")}),h.jsx(Ge,{children:t("create_vector_database_card.text_splitter_chunkoverlap")}),h.jsx(ln,{value:d.chunkOverlap,onChange:w,placeholder:t("create_vector_database_card.text_splitter_chunkoverlap_placeholder")})]})]}):void 0]})}),h.jsx(Xo,{className:"flex justify-between",children:h.jsx(Mn,{disabled:!d.type||!a,loading:p,onClick:j,className:"w-full",children:t("create_vector_database_card.create")})})]})}),vae=e=>g.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"512.000000pt",height:"512.000000pt",viewBox:"64 64 384.000000 384.000000",preserveAspectRatio:"xMidYMid meet",fill:"#000000",...e},g.createElement("g",{transform:"translate(0.000000,512.000000) scale(0.100000,-0.100000)",stroke:"none"},g.createElement("path",{d:"M1953 3948 c-13 -21 -16 -289 -4 -369 15 -97 39 -193 62 -247 l18 -42 -69 -133 -69 -132 32 -22 c18 -12 40 -25 49 -28 24 -9 13 -25 -18 -25 -13 0 -24 -4 -24 -9 0 -13 40 -60 61 -71 10 -6 107 -15 215 -21 175 -9 198 -8 214 6 10 9 33 18 51 21 31 4 40 -1 92 -52 64 -63 70 -88 25 -114 -22 -12 -33 -12 -58 -3 -34 13 -41 0 -9 -17 24 -13 73 -5 89 15 10 12 17 11 43 -6 41 -24 59 -24 88 2 l24 20 -28 -17 c-26 -16 -31 -16 -62 -1 -58 27 -55 54 11 120 65 65 90 71 145 34 31 -20 41 -21 114 -15 44 4 129 10 190 14 107 6 110 7 142 39 39 39 42 55 8 55 -37 0 -31 17 14 40 22 11 42 24 46 30 7 11 -13 51 -90 184 -54 95 -54 95 -39 131 8 20 27 84 41 143 24 95 27 126 28 284 0 125 -4 180 -12 189 -30 30 -262 -126 -372 -250 l-62 -70 -42 16 c-67 25 -247 28 -332 6 l-70 -19 -86 86 c-96 96 -180 160 -272 207 -70 37 -73 38 -84 21z m1117 -261 c0 -2 -9 -14 -20 -27 -11 -13 -20 -19 -20 -15 0 5 7 17 17 27 15 17 23 22 23 15z m-830 -97 c6 -11 7 -20 2 -20 -6 0 -12 9 -15 20 -3 11 -3 20 -1 20 2 0 8 -9 14 -20z m744 -15 c-9 -14 -18 -25 -21 -25 -5 0 5 18 20 38 17 22 18 13 1 -13z m-654 -534 c0 -27 4 -61 10 -75 8 -21 7 -26 -6 -26 -38 0 -100 67 -119 128 -6 21 -4 22 54 22 l61 0 0 -49z m700 39 c0 -44 -80 -140 -117 -140 -12 0 -14 7 -9 31 3 17 6 51 6 75 l0 44 60 0 c35 0 60 -4 60 -10z m-587 -35 c15 -14 27 -30 27 -34 0 -18 -42 -60 -69 -69 -29 -10 -30 -10 -20 14 5 14 9 45 9 70 0 51 12 56 53 19z m411 -37 c3 -34 4 -64 1 -66 -15 -15 -85 53 -85 82 0 7 61 46 71 46 3 0 9 -28 13 -62z"}),g.createElement("path",{d:"M1590 3717 c0 -2 15 -16 33 -33 l32 -29 -29 33 c-28 30 -36 37 -36 29z"}),g.createElement("path",{d:"M1723 2863 c26 -2 68 -2 95 0 26 2 4 3 -48 3 -52 0 -74 -1 -47 -3z"}),g.createElement("path",{d:"M3403 2863 c31 -2 83 -2 115 0 31 2 5 3 -58 3 -63 0 -89 -1 -57 -3z"}),g.createElement("path",{d:"M3258 2853 c6 -2 18 -2 25 0 6 3 1 5 -13 5 -14 0 -19 -2 -12 -5z"}),g.createElement("path",{d:"M2010 2830 c4 -8 20 -26 35 -40 l27 -25 -24 -6 c-16 -4 -7 -7 32 -13 58 -7 245 20 305 44 30 12 30 12 7 21 -23 9 -190 25 -324 32 -57 2 -65 1 -58 -13z"}),g.createElement("path",{d:"M3165 2844 c-148 -9 -306 -28 -293 -35 8 -6 -3 -9 -32 -10 -39 -1 -36 -3 25 -11 39 -5 79 -13 90 -18 33 -15 173 -32 197 -24 13 4 37 7 53 7 29 0 29 0 3 4 -33 5 -35 14 -7 39 29 26 44 55 27 52 -7 -1 -35 -3 -63 -4z"}),g.createElement("path",{d:"M2300 2749 c-63 -10 -130 -19 -147 -20 -37 -3 -40 -7 -17 -24 14 -9 -3 -19 -100 -60 -63 -27 -114 -51 -112 -53 3 -2 57 19 121 47 l117 50 41 -30 c51 -37 105 -61 121 -53 6 3 -11 -14 -39 -38 -172 -148 -266 -262 -325 -392 -16 -35 -36 -66 -45 -70 -9 -3 -55 -6 -102 -6 -94 0 -130 -16 -158 -70 -20 -39 -19 -80 10 -341 32 -287 32 -264 -5 -242 -56 33 -110 97 -139 168 -43 104 -99 136 -175 100 -122 -58 -74 -289 92 -450 65 -63 155 -118 231 -140 l59 -18 6 -56 c4 -31 15 -71 26 -89 39 -64 1 -62 962 -62 848 0 874 1 905 20 61 37 61 34 119 556 58 521 58 539 12 581 -44 40 -62 43 -242 43 l-176 0 -40 82 c-73 146 -155 247 -294 356 l-77 61 43 22 c23 12 60 33 81 47 32 21 41 23 63 13 36 -16 44 -13 12 5 -32 17 -36 31 -10 37 9 3 -2 5 -24 6 -23 0 -77 7 -120 15 -90 16 -164 26 -164 21 0 -2 31 -13 70 -25 63 -20 69 -23 60 -41 -23 -42 -111 -99 -194 -124 -99 -30 -148 -31 -236 -5 -73 22 -182 87 -200 119 -12 23 -15 21 85 60 59 24 54 24 -95 0z m1414 -684 c35 -23 56 -65 56 -112 1 -65 -91 -906 -103 -947 -7 -22 -24 -48 -40 -60 -28 -21 -34 -21 -900 -24 -851 -2 -873 -2 -904 17 -18 11 -39 30 -47 43 -15 23 -39 208 -71 538 -9 85 -22 211 -30 280 -22 184 -21 194 19 238 34 37 35 37 133 43 54 4 494 6 979 4 823 -2 883 -4 908 -20z"}),g.createElement("path",{d:"M1973 2743 c9 -2 23 -2 30 0 6 3 -1 5 -18 5 -16 0 -22 -2 -12 -5z"}),g.createElement("path",{d:"M3263 2743 c9 -2 23 -2 30 0 6 3 -1 5 -18 5 -16 0 -22 -2 -12 -5z"}),g.createElement("path",{d:"M1908 2733 c6 -2 18 -2 25 0 6 3 1 5 -13 5 -14 0 -19 -2 -12 -5z"}),g.createElement("path",{d:"M2435 2730 c-3 -5 -1 -10 4 -10 6 0 11 5 11 10 0 6 -2 10 -4 10 -3 0 -8 -4 -11 -10z"}),g.createElement("path",{d:"M3328 2733 c6 -2 18 -2 25 0 6 3 1 5 -13 5 -14 0 -19 -2 -12 -5z"}),g.createElement("path",{d:"M1848 2723 c6 -2 18 -2 25 0 6 3 1 5 -13 5 -14 0 -19 -2 -12 -5z"}),g.createElement("path",{d:"M3383 2723 c9 -2 23 -2 30 0 6 3 -1 5 -18 5 -16 0 -22 -2 -12 -5z"}),g.createElement("path",{d:"M1798 2713 c6 -2 18 -2 25 0 6 3 1 5 -13 5 -14 0 -19 -2 -12 -5z"}),g.createElement("path",{d:"M3438 2713 c7 -3 16 -2 19 1 4 3 -2 6 -13 5 -11 0 -14 -3 -6 -6z"}),g.createElement("path",{d:"M1738 2703 c6 -2 18 -2 25 0 6 3 1 5 -13 5 -14 0 -19 -2 -12 -5z"}),g.createElement("path",{d:"M3488 2703 c7 -3 16 -2 19 1 4 3 -2 6 -13 5 -11 0 -14 -3 -6 -6z"}),g.createElement("path",{d:"M1688 2693 c6 -2 18 -2 25 0 6 3 1 5 -13 5 -14 0 -19 -2 -12 -5z"}),g.createElement("path",{d:"M3538 2693 c7 -3 16 -2 19 1 4 3 -2 6 -13 5 -11 0 -14 -3 -6 -6z"}),g.createElement("path",{d:"M3170 2660 c8 -5 20 -10 25 -10 6 0 3 5 -5 10 -8 5 -19 10 -25 10 -5 0 -3 -5 5 -10z"}),g.createElement("path",{d:"M3230 2635 c14 -8 30 -14 35 -14 6 0 -1 6 -15 14 -14 8 -29 14 -35 14 -5 0 1 -6 15 -14z"}),g.createElement("path",{d:"M3349 2584 c41 -19 76 -33 78 -31 4 5 -133 67 -145 66 -4 0 26 -16 67 -35z"}),g.createElement("path",{d:"M1860 2570 c-8 -5 -10 -10 -5 -10 6 0 17 5 25 10 8 5 11 10 5 10 -5 0 -17 -5 -25 -10z"}),g.createElement("path",{d:"M1764 2524 c-18 -14 -18 -14 6 -3 31 14 36 19 24 19 -6 0 -19 -7 -30 -16z"}),g.createElement("path",{d:"M3470 2530 c8 -5 20 -10 25 -10 6 0 3 5 -5 10 -8 5 -19 10 -25 10 -5 0 -3 -5 5 -10z"})));function bae({data:e}){const{t}=Pe("components");return h.jsxs(Xf,{className:"w-full",children:[h.jsx(Gf,{children:h.jsx(Ra,{children:h.jsx(es,{children:t("add_text_data.text")})})}),h.jsx(Qf,{children:e==null?void 0:e.map((n,r)=>h.jsx(Ra,{children:h.jsx(ts,{className:"p-4",children:n.text})},`${n.text}_${r}`))})]})}const xae=g.memo(e=>{const{id:t}=e,{t:n}=Pe("components"),[r,o]=g.useState([]),[a,i]=g.useState(""),s=Yt(t),{createCSVData:c,loading:l}=o5(),u=()=>{o(f=>[...f,{text:a}]),i("")},d=async()=>{s&&await c(s,["text"],r.map(f=>[f.text]))};return h.jsxs(At,{className:"mw-full",children:[h.jsx(fn,{children:h.jsx(_n,{children:n("add_text_data.title")})}),h.jsxs(pn,{children:[h.jsxs("div",{className:"flex flex-col space-y-1.5 mt-3",children:[h.jsx(Ge,{htmlFor:"name",children:n("add_text_data.text")}),h.jsx(ao,{value:a,onChange:f=>i(f.target.value||""),placeholder:n("add_text_data.text_placeholder")})]}),h.jsx("div",{className:"w-full flex mt-4 justify-end",children:h.jsx(ut,{disabled:!a,onClick:u,className:"w-40",children:n("add_text_data.add")})}),h.jsx(bae,{data:r||[]})]}),h.jsx(Xo,{className:"flex justify-between",children:h.jsx(Mn,{loading:l,disabled:!(r!=null&&r.length),onClick:d,className:"w-full",children:n("add_text_data.create")})})]})});var bo=(e=>(e.ADD_LLM="ADD_LLM",e.ADD_PROMPT="ADD_PROMPT",e.ADD_TOOL_DEFINITION="ADD_TOOL_DEFINITION",e.ADD_SCHEMA="ADD_SCHEMA",e.ADD_FEW_SHOT_EXAMPLE="ADD_FEW_SHOT_EXAMPLE",e.ADD_VECTOR_DATABASE="ADD_VECTOR_DATABASE",e.ADD_TEXT_DATA="ADD_TEXT_DATA",e))(bo||{});const wae=["ADD_LLM","ADD_PROMPT","ADD_SCHEMA","ADD_VECTOR_DATABASE",{key:"more",label:"more",icon:"ellipsis",children:["ADD_TOOL_DEFINITION","ADD_FEW_SHOT_EXAMPLE"]}],_ae=()=>{const e="_coolMode_effect",t=document.getElementById(e);if(t)return t;const n=document.createElement("div");return n.setAttribute("id",e),n.setAttribute("style","overflow:hidden; position:fixed; height:100%; top:0; left:0; right:0; bottom:0; pointer-events:none; z-index:2147483647"),document.body.appendChild(n),n};let a5=0;const jae=(e,t)=>{a5++;const n=(t==null?void 0:t.particle)||"circle",r=[15,20,25,35,45],o=45;let a=[],i=!1,s=0,c=0;const l=_ae();function u(){const S=(t==null?void 0:t.size)||r[Math.floor(Math.random()*r.length)],O=(t==null?void 0:t.speedHorz)||Math.random()*10,N=(t==null?void 0:t.speedUp)||Math.random()*25,P=Math.random()*360,k=Math.random()*35*(Math.random()<=.5?-1:1),R=c-S/2,A=s-S/2,C=Math.random()<=.5?-1:1,M=document.createElement("div");if(n==="circle"){const T="http://www.w3.org/2000/svg",I=document.createElementNS(T,"svg"),L=document.createElementNS(T,"circle");L.setAttributeNS(null,"cx",(S/2).toString()),L.setAttributeNS(null,"cy",(S/2).toString()),L.setAttributeNS(null,"r",(S/2).toString()),L.setAttributeNS(null,"fill",`hsl(${Math.random()*360}, 70%, 50%)`),I.appendChild(L),I.setAttribute("width",S.toString()),I.setAttribute("height",S.toString()),M.appendChild(I)}else M.innerHTML=`<img src="${n}" width="${S}" height="${S}" style="border-radius: 50%">`;M.style.position="absolute",M.style.transform=`translate3d(${A}px, ${R}px, 0px) rotate(${P}deg)`,l.appendChild(M),a.push({direction:C,element:M,left:A,size:S,speedHorz:O,speedUp:N,spinSpeed:k,spinVal:P,top:R})}function d(){a.forEach(S=>{S.left=S.left-S.speedHorz*S.direction,S.top=S.top-S.speedUp,S.speedUp=Math.min(S.size,S.speedUp-1),S.spinVal=S.spinVal+S.spinSpeed,S.top>=Math.max(window.innerHeight,document.body.clientHeight)+S.size&&(a=a.filter(O=>O!==S),S.element.remove()),S.element.setAttribute("style",["position:absolute","will-change:transform",`top:${S.top}px`,`left:${S.left}px`,`transform:rotate(${S.spinVal}deg)`].join(";"))})}let f,p=0;const y=30;function m(){const S=performance.now();i&&a.length<o&&S-p>y&&(u(),p=S),d(),f=requestAnimationFrame(m)}m();const v="ontouchstart"in window,b=v?"touchstart":"mousedown",x=v?"touchend":"mouseup",_=v?"touchmove":"mousemove",w=S=>{var O,N;"touches"in S?(s=(O=S.touches)==null?void 0:O[0].clientX,c=(N=S.touches)==null?void 0:N[0].clientY):(s=S.clientX,c=S.clientY)},j=S=>{w(S),i=!0},E=()=>{i=!1};return e.addEventListener(_,w,{passive:!0}),e.addEventListener(b,j,{passive:!0}),e.addEventListener(x,E,{passive:!0}),e.addEventListener("mouseleave",E,{passive:!0}),()=>{e.removeEventListener(_,w),e.removeEventListener(b,j),e.removeEventListener(x,E),e.removeEventListener("mouseleave",E);const S=setInterval(()=>{f&&a.length===0&&(cancelAnimationFrame(f),clearInterval(S),--a5===0&&l.remove())},500)}},Eae=({children:e,options:t})=>{const n=g.useRef(null);return g.useEffect(()=>{if(n.current)return jae(n.current,t)},[t]),V.cloneElement(e,{ref:n})},Sae=g.memo(e=>{const{t}=Pe("flows"),n=Nu(s=>s.theme),[r,o]=g.useState(`${bo.ADD_LLM}`),a=g.useMemo(()=>h.jsxs(E3,{children:[h.jsx(Ox,{children:h.jsx(Eae,{children:h.jsx(ut,{variant:"link",className:"!p-0 !pl-3",children:h.jsx(vae,{width:32,height:32,className:Q(n==="dark"?"fill-white":"fill-black")})})})}),wae.map(s=>typeof s=="object"?h.jsxs(Ox,{children:[h.jsx(Mx,{children:s.icon?h.jsx(de,{name:s.icon}):t(`supported_nodes.${s.label}`)}),h.jsx(S3,{children:s.children.map(c=>h.jsx(C3,{onClick:()=>o(c),children:t(`supported_nodes.${c.toLowerCase()}`)},c))})]},s.key):h.jsx(Ox,{children:h.jsx(Mx,{value:s,onClick:()=>o(s),children:t(`supported_nodes.${s.toLowerCase()}`)})},s))]}),[t,n]),i=g.useMemo(()=>{switch(r){case bo.ADD_LLM:return h.jsx(Voe,{...e});case bo.ADD_PROMPT:return h.jsx(Woe,{...e});case bo.ADD_SCHEMA:return h.jsx(cae,{...e});case bo.ADD_FEW_SHOT_EXAMPLE:return h.jsx(fae,{...e});case bo.ADD_TOOL_DEFINITION:return h.jsx(hae,{...e});case bo.ADD_VECTOR_DATABASE:return h.jsx(gae,{...e});case bo.ADD_TEXT_DATA:return h.jsx(xae,{...e})}},[e,r]);return h.jsxs(h.Fragment,{children:[a,h.jsx("div",{className:"mt-4",children:i})]})}),Cae=Vr("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),xo=g.forwardRef(({className:e,variant:t,...n},r)=>h.jsx("div",{ref:r,role:"alert",className:Q(Cae({variant:t}),e),...n}));xo.displayName="Alert";const wo=g.forwardRef(({className:e,...t},n)=>h.jsx("h5",{ref:n,className:Q("mb-1 font-medium leading-none tracking-tight",e),...t}));wo.displayName="AlertTitle";const ns=g.forwardRef(({className:e,...t},n)=>h.jsx("div",{ref:n,className:Q("text-sm [&_p]:leading-relaxed",e),...t}));ns.displayName="AlertDescription";let i5,s5,c5,nn,Jf,Je,l5,u5,d5,f5,Zf,nw,rw,ow,p5,aw,h5,m5,y5;i5=()=>{const[e,t]=g.useState(!1),n=pt(i=>i.currentSession),r=pt(i=>i.getLatestApplications),o=g.useCallback(async(i,s,c,l)=>{var f;const u=(f=s.data)==null?void 0:f.entity;let d=s.type?uwe[s.type]:void 0;if(d&&u&&s&&typeof u=="object"&&"id"in u&&!c.has(`${u.id}`)){d=d;const p=await ue(d).save({...u,...u&&typeof u=="object"&&"session_id"in u?{session_id:i.id}:{}});c.set(`${u.id}`,p.id);const y=await ue("FlowNode").save({...s.data.flowNode,session_id:i.id,id:void 0,source_type:d,source_id:p.id});return l.set(`${s.id}`,y.id),{entityName:d,entity:p,node:y}}},[]),a=g.useCallback(async(i,s)=>{try{if(!n)throw new Error("No current session");t(!0);const c=await ue("Session").save({type:hE.StandaloneApp,name:s.name||(n!=null&&n.name?`${n.name}`:"Standalone"),status:dwe.Started});if(!c)throw new Error("Failed create standalone session");const l=new Map,u=new Map,d=await o(c,i,l,u);if(!d)throw new Error("Failed to clone main node");await ue("Session").update(c.id,{main_node_id:d.node.id,main_source_id:d.entity.id,main_source_type:d.entityName});for(const{node:f,connectedNodes:p}of s.connections)if(await o(c,f,l,u),p)for(const y of p)await o(c,y,l,u);for(const{connections:f}of s.connections)for(const p of f){const y=u.get(`${p.source}`),m=u.get(`${p.target}`);if(!y||!m)throw new Error("Failed to get connected flow node id");await ue("FlowEdge").save({source:y,target:m,sourceHandle:p.sourceHandle,targetHandle:p.targetHandle,session_id:c.id})}return r(),!0}finally{t(!1)}},[o,n,r]);return{loading:e,createStandaloneSession:a}},s5=()=>{const[e,t]=g.useState(!1),n=Ae(a=>a.updateNodes),r=Ae(a=>a.updateEdges),o=g.useCallback(async a=>{try{t(!0),await ue("FlowNode").delete(a);const i=await ue("FlowEdge").find({where:[{source:a},{target:a}]});return await Promise.all(i.map(s=>ue("FlowEdge").delete(s.id))),await n([{id:a,type:"remove"}]),await r(i.map(s=>({id:s.id,type:"remove"}))),!0}catch{return!1}finally{t(!1)}},[r,n]);return{loading:e,deleteNodeFlow:o}},c5=ei(({cloneStandaloneSession:e})=>{const t=sn(),{t:n}=Pe("dialogs"),[r,o]=g.useState(""),{toast:a}=en(),i=c=>{o(c.target.value)},s=async()=>{try{t.hide(),await e(r)}catch{a({variant:"destructive",description:n("create_standalone_application.errors.create_failed")})}};return h.jsx(Oc,{open:t.visible,onOpenChange:t.hide,children:h.jsxs(wi,{className:"sm:max-w-[425px]",children:[h.jsxs(_i,{children:[h.jsx(ji,{children:n("create_session.title")}),h.jsx(Hy,{children:n("create_standalone_application.description")})]}),h.jsx("div",{className:"grid gap-4 py-4",children:h.jsxs("div",{className:"flex flex-col space-y-1.5",children:[h.jsx(Ge,{className:"mb-2",htmlFor:"name",children:n("create_standalone_application.name")}),h.jsx(ln,{onChange:i,id:"name",value:r,placeholder:n("create_standalone_application.name_placeholder")})]})}),h.jsx(Uy,{children:h.jsx(ut,{onClick:s,disabled:!r,type:"submit",children:n("create_standalone_application.create")})})]})})}),nn=g.memo(({id:e,className:t,enableToStandalone:n,getLinkedConnections:r})=>{const{t:o}=Pe("common"),{getNode:a}=Un(),{loading:i,deleteNodeFlow:s}=s5(),{createStandaloneSession:c}=i5(),{toast:l}=en(),u=sn(c5),d=g.useCallback(async()=>{try{await s(e),l({description:o("deleted")})}catch{l({description:o("errors.delete_failed"),variant:"destructive"})}},[s,e,l,o]),f=g.useCallback(async y=>{try{const m=a(e);if(!m)throw new Error("No current node");const v=(r==null?void 0:r(e))||[];await c(m,{name:y,connections:v}),l({description:o("standalone_session_created")})}catch(m){j$(m),l({description:o("errors.create_standalone_session_failed"),variant:"destructive"})}},[a,e,r,c,l,o]),p=g.useCallback(()=>{u.show({cloneStandaloneSession:f})},[f,u]);return h.jsxs("div",{className:Q("flex absolute z-[51] right-0 top-0 h-10",t),children:[n?h.jsx(ut,{className:"!rounded-none !px-2",onClick:p,variant:"ghost",children:h.jsx(de,{name:"package-plus",size:16})}):void 0,h.jsx(Mn,{loading:i,className:"!rounded-none !px-2",onClick:d,variant:"ghost",children:h.jsx(de,{name:"trash-2",size:16})})]})}),Jf=({className:e,size:t=200,duration:n=15,anchor:r=90,borderWidth:o=1.5,colorFrom:a="#ffaa40",colorTo:i="#9c40ff",delay:s=0})=>h.jsx("div",{style:{"--size":t,"--duration":n,"--anchor":r,"--border-width":o,"--color-from":a,"--color-to":i,"--delay":`-${s}s`},className:Q("pointer-events-none absolute inset-0 rounded-[inherit] [border:calc(var(--border-width)*1px)_solid_transparent]","![mask-clip:padding-box,border-box] ![mask-composite:intersect] [mask:linear-gradient(transparent,transparent),linear-gradient(white,white)]","after:absolute after:aspect-square after:w-[calc(var(--size)*1px)] after:animate-border-beam after:[animation-delay:var(--delay)] after:[background:linear-gradient(to_left,var(--color-from),var(--color-to),transparent)] after:[offset-anchor:calc(var(--anchor)*1%)_50%] after:[offset-path:rect(0_auto_auto_0_round_calc(var(--size)*1px))]",e)}),Je=g.memo(e=>{const{className:t,...n}=e;return h.jsx(pl,{className:Q("!w-2 !h-2 !border-none !rounded-full !bg-slate-700",e.position===fe.Top?"!top-[-2px]":"",t),...n})}),l5=()=>{const e=pt(i=>{var s;return(s=i.currentSession)==null?void 0:s.id}),[t,n]=g.useState(!1),r=Ae(i=>i.createOrUpdateFlowNode),o=Ae(i=>i.createOrUpdateFlowEdge),a=g.useCallback(async(i,s)=>{var c,l,u,d,f;n(!0);try{const p=(c=i.data)==null?void 0:c.entity;if(!p||!e)throw new Error("LLM or Session not found");const y=await((d=(u=(l=s==null?void 0:s.connectedNodes)==null?void 0:l.find(w=>w.type===ae.Schema))==null?void 0:u.data)==null?void 0:d.entity),m=i.position.x,v=i.position.y+(((f=i.measured)==null?void 0:f.height)||0),b=await ue("Thread").save({initial_llm_id:p.id,title:`New thread with ${p.name}`,status:$u.Started,messages:[],session_id:e,schema_id:y==null?void 0:y.id}),x=await r({source_id:b.id,source_type:"Thread",node_type:ae.Thread,x:m,y:v+60});if(!x)throw new Error("Failed to create thread node");const _=await o({source:i.id,target:x.id});return{thread:b,flowNode:x,flowEdge:_}}finally{n(!1)}},[o,r,e]);return{loading:t,createThread:a}},u5=(e,t)=>{var w;const{t:n}=Pe("flows"),{toast:r}=en(),[o,a]=g.useState(!1),[i,s]=g.useState(!1),c=Yt(e),l=Zn(j=>j.loadModel),{createThread:u,loading:d}=l5(),f=Ae(j=>j.updateNodes),p=Ae(j=>j.pushSyncNodeQueue),{getNode:y,getNodes:m,getHandleConnections:v}=Un(),b=g.useCallback(async()=>{try{if(s(!0),t.entity.id){const j=await ue("Thread").find({where:{initial_llm_id:t.entity.id}});p("Thread",{where:{source_type:"Thread",source_id:mo(j.map(E=>E.id))}})}}finally{s(!1)}},[(w=t==null?void 0:t.entity)==null?void 0:w.id,p]),x=g.useCallback(async()=>{try{if(a(!0),t.entity&&c){await(l==null?void 0:l(`${t.entity.name}`));const j=m().filter(E=>E.type===ae.LLM).map(E=>(E.data.status=Mt.Started,{id:E.id,type:"replace",item:E}));c.data.status=Mt.Loading,j.push({id:e,type:"replace",item:c}),f(j),await b()}}catch(j){jr(j),r({variant:"destructive",description:n("llm_node.errors.loading_model")})}finally{a(!1)}},[t.entity,m,e,l,c,b,n,r,f]),_=g.useCallback(async()=>{if(t.entity&&c){const j=v({type:"target",nodeId:c.id}).map(E=>y(E.source)).filter(Boolean);await(u==null?void 0:u(c,{connectedNodes:j}))}},[t.entity,c,v,u,y]);return{loadingModel:o,creatingThread:d,queringThreads:i,loadModel:x,createThread:_,queryThreads:b}},bn=(e,t)=>{const[n,r]=g.useState(!1),[o,a]=g.useState([]),{deleteElements:i,getNode:s}=Un();Af({type:"target",nodeId:e,onConnect:l=>{l!=null&&l.length&&a(u=>[...u,...jne(l)])}});const c=g.useCallback(async(l,u,d,f)=>{try{return await t({id:e,edgeId:l,source:u,target:d,connection:f})}catch{return{deleteEdgeId:l}}},[t,e]);g.useEffect(()=>{!(o!=null&&o.length)||n||(async()=>{try{r(!0);const l=[...o];a([]);const u=[],d=s(e);await Promise.all(l.map(async f=>{const p="edgeId"in f?f.edgeId:void 0,y=s(f.source);if(!y||!d)return;const m=await c(`${p}`,y,d,f);m!=null&&m.deleteEdgeId&&u.push(...Array.isArray(m.deleteEdgeId)?m.deleteEdgeId:[m.deleteEdgeId])})),u!=null&&u.length&&await i({edges:u.map(f=>({id:f}))})}finally{r(!1)}})()},[i,s,e,n,c,o])},d5=e=>{const t=g.useCallback(async()=>{},[]);bn(e,t)},f5=g.memo(e=>{var m,v,b,x;const{id:t,data:n,isConnectable:r}=e,[o,a]=g.useState(),{t:i}=Pe("flows"),{createThread:s,loadModel:c,queringThreads:l,queryThreads:u,loadingModel:d}=u5(t,n);d5(t);const f=[Mt.Loading,Mt.Downloading].includes(n.status);g.useEffect(()=>{var _;o||!((_=n==null?void 0:n.entity)!=null&&_.name)||qt(()=>import("./index-DnLurQHa.js").then(async w=>(await w.__tla,w)),__vite__mapDeps([7,1,2,3,4,5,6])).then(async({hasModelInCache:w,functionCallingModelIds:j,prebuiltAppConfig:E})=>{var O,N;const S=await w((O=n==null?void 0:n.entity)==null?void 0:O.name);a({hasCache:S,isFunctionCalling:j.includes((N=n==null?void 0:n.entity)==null?void 0:N.name),info:E.model_list.find(P=>{var k;return P.model_id===((k=n==null?void 0:n.entity)==null?void 0:k.name)})})})},[(m=n==null?void 0:n.entity)==null?void 0:m.name,o]);const p=g.useMemo(()=>{var _,w;switch(n.status){case Mt.Downloading:return h.jsx(de,{className:"animate-spin w-7 h-7",name:"arrow-big-down-dash"});case Mt.Loaded:return h.jsx(Ko,{name:((_=n.entity)==null?void 0:_.name)||"brain",className:"w-7 h-7"});case Mt.Loading:return h.jsx(de,{className:"animate-spin w-7 h-7",name:"loader-circle"});default:return h.jsx(Ko,{name:((w=n.entity)==null?void 0:w.name)||"brain",className:"w-7 h-7"})}},[(v=n.entity)==null?void 0:v.name,n.status]),y=g.useMemo(()=>f?null:d?h.jsx(ut,{disabled:!0,className:"w-full mt-4",children:h.jsx(de,{className:"animate-spin",size:24,name:"loader-circle"})}):n.status===Mt.Loaded?h.jsx(ut,{onClick:s,className:"mt-4 w-full",children:i("llm_node.create_thread_button")}):h.jsxs("div",{className:"flex gap-2 mt-4",children:[o!=null&&o.hasCache?h.jsx(Mn,{loading:l,onClick:u,children:h.jsx(de,{size:24,name:"message-square-more"})}):null,h.jsx(ut,{disabled:d,onClick:c,className:"w-full",children:i(o!=null&&o.hasCache?"llm_node.load_model_button":"llm_node.download_model_button")})]}),[f,d,n.status,o==null?void 0:o.hasCache,l,u,c,i,s]);return h.jsxs("div",{children:[h.jsxs("div",{children:[h.jsx(nn,{id:t}),h.jsxs(xo,{className:"flex justify-center",children:[p,h.jsxs("div",{className:"ml-2 pt-1 max-w-lg",children:[h.jsx(wo,{className:"flex gap-2 items-center pr-6",children:`${((b=n==null?void 0:n.entity)==null?void 0:b.name)||""}`}),h.jsx(ns,{className:"max-w-full",children:`${n.label||""}`}),h.jsx("div",{className:"max-w-full mt-2 flex-wrap flex gap-1",children:h.jsx(Gi,{model:o==null?void 0:o.info,isFunctionCalling:(o==null?void 0:o.isFunctionCalling)||!1,name:(x=n==null?void 0:n.entity)==null?void 0:x.name,isCached:(o==null?void 0:o.hasCache)||!1})}),y]})]}),f?h.jsx(Jf,{className:"rounded-lg"}):void 0]}),h.jsx(Je,{type:"source",position:fe.Bottom,id:"a",isConnectable:r})]})}),Zf=g.memo(({tags:e,disabled:t,loading:n,onSubmit:r})=>{const{t:o}=Pe("components"),a=async i=>{try{return await r(i),!0}catch{return!1}};return h.jsxs(At,{className:"min-w-80",children:[h.jsx(fn,{children:h.jsx(_n,{children:o("add_message_card.title")})}),h.jsxs(pn,{children:[h.jsx("div",{className:"grid w-full gap-1.5",children:h.jsx(v2,{onSubmit:a,disabled:t||n,placeholder:o("add_message_card.placeholder")})}),e?h.jsx("div",{className:"mt-2 gap-1 flex flex-wrap",children:e}):null]})]})}),nw=(e,t,n,r=[],o)=>{const a=e.map(i=>o.getNode(i));for(const i of a){if(!i)continue;const s=o.getHandleConnections({type:"target",nodeId:i.id});if(n.push(...s),i.type===ae.Thread){r.push(i.id),t.push(i);continue}else if(i.type!==ae.Message){r.push(i.id);continue}else if(r.includes(i.id))continue;r.push(i.id),t.push(i),s.length&&nw(s.map(c=>c.source),t,n,r,o)}return{nodes:t,connections:n}},rw=(e,t)=>{const n=t.getHandleConnections({nodeId:e.id,type:"target"}),r=n.map(d=>{const f=t.getNode(d.source);return f?{connections:t.getHandleConnections({nodeId:f.id,type:"target"}),node:f}:void 0}),o=r.filter(d=>{var f;return((f=d.node)==null?void 0:f.type)===ae.Prompt}),a=[];o!=null&&o.length&&o.forEach(d=>{var p;const f=(p=d.connections)==null?void 0:p.map(y=>t.getNode(y.source)).filter(Boolean);a.push({node:d.node,connections:d.connections,connectedNodes:f})});const i=r.filter(d=>{var f;return((f=d.node)==null?void 0:f.type)===ae.ToolDefinition}),s=[];i!=null&&i.length&&i.forEach(d=>{var p;const f=(p=d.connections)==null?void 0:p.map(y=>t.getNode(y.source)).filter(Boolean);f!=null&&f.find(y=>y.type===ae.Schema)&&s.push({node:d.node,connections:d.connections,connectedNodes:f})});const c=r.filter(d=>{var f;return((f=d.node)==null?void 0:f.type)===ae.PlaceHolder}),l=[];c!=null&&c.length&&c.forEach(d=>{var p;const f=(p=d.connections)==null?void 0:p.map(y=>t.getNode(y.source)).filter(Boolean);f&&l.push({node:d.node,connections:d.connections,connectedNodes:f})});const u=r.find(d=>{var f;return((f=d.node)==null?void 0:f.type)===ae.Schema});return{thread:{node:e,connections:n},llm:r.find(d=>{var f;return((f=d.node)==null?void 0:f.type)===ae.LLM}),schemas:u?[u]:[],prompts:a,tools:s,placeholders:l}},ow=e=>{const t=[];return e.forEach(n=>{var a,i,s;const{node:r,connectedNodes:o}=n;if((a=r.data)!=null&&a.entity){if(r.type===ae.Message){const c=r.data.entity;switch(c.role){case"human":t.push(new Au(c.content));break;case"ai":t.push(new Dh(c.content));break}}else if(r.type===ae.Prompt){const c=r.data.entity;let l=`${c.prefix?`${c.prefix}
`:""}`;if(c.type===kn.FewShotExample){const u=(s=(i=o.find(d=>d.type===ae.CSVData))==null?void 0:i.data)==null?void 0:s.entity;if(u){const{rows:d}=E$(u.headers,u.csv);d.forEach(f=>{l+=`${c.content.replace(/{([^{}]*)}/g,(p,y)=>`${f[y]}`)}
`})}}else l+=c.content;switch(c.suffix&&(l+=`
${c.suffix}`),c.role){case"human":t.push(new Au(l));break;case"system":t.push(new x$(l));break;default:t.push(new Dh(l));break}}}}),t},p5=(e,t)=>{const n=(e==null?void 0:e.filter(o=>o.type===ae.Message).map(o=>({node:o,connectedNodes:[]})).reverse())||[],r=[];return t.forEach(async o=>{r.unshift({node:o.node,connectedNodes:o.connectedNodes||[]})}),{history:ow(n),systems:ow(r)}},aw=({getNode:e,getHandleConnections:t})=>{const{t:n}=Pe("create_new_message"),[r,o]=g.useState(!1),a=Ae(y=>y.createOrUpdateFlowNode),i=Ae(y=>y.createOrUpdateFlowEdge),s=Tu(y=>y.similaritySearchWithScore),c=Zn(y=>y.getCurrentModelInfo),{stream:l}=Fm(),u=g.useCallback(async({content:y,threadId:m,sourceId:v,initialX:b,initialY:x,initialLLMId:_})=>{const w=await ue("Message").save({thread_id:m,content:y,role:Nn.Human,status:Wr.Started,llm_id:_});if(!w)throw new Error("Failed to save message");const j=await a({source_id:w.id,source_type:"Message",node_type:ae.Message,x:b,y:x+80});if(!j)throw new Error("Failed to save human message node");await i({source:v,target:j.id});const E=await ue("Message").save({thread_id:m,content:n("initial_ai_message"),role:Nn.AI,status:Wr.Inprogress,llm_id:_,parent_message_id:w.id});if(!E)throw new Error("Failed to save message");const S=await a({source_id:E.id,source_type:"Message",node_type:ae.Message,x:b,y:x+250});if(!S)throw new Error("Failed to save ai message node");return await i({source:j.id,target:S.id}),{aiMessage:E,humanMessage:w,aiMessageNode:S,humanMessageNode:j}},[i,a,n]),d=g.useCallback(async(y,m)=>{const{placeholders:v}=m;if(!(v!=null&&v.length))return[];const b=[];return await Promise.all(v.map(async x=>{var w,j,E,S,O,N,P,k,R,A,C,M;const _=(w=x.node.data)==null?void 0:w.entity;if(_)switch(_.placeholder_type){case si.VECTOR_DATABASE_RETREIVER:{const T=(j=x.connectedNodes)==null?void 0:j.find(Y=>Y.type===ae.VectorDatabase),I=(E=T==null?void 0:T.data)==null?void 0:E.entity,L=(N=(O=(S=x.connectedNodes)==null?void 0:S.find(Y=>Y.type===ae.Prompt))==null?void 0:O.data)==null?void 0:N.entity;if(!L||!I||!T)return;const D=(k=(P=t({nodeId:T.id,type:"target"}).map(Y=>e(Y.source)).find(Y=>(Y==null?void 0:Y.type)&&[ae.JSONLData,ae.CSVData].includes(Y==null?void 0:Y.type)))==null?void 0:P.data)==null?void 0:k.entity;if(!D)return;const $=(R=_.metadata)!=null&&R.k?+((A=_.metadata)==null?void 0:A.k):1;let U=(C=_.metadata)!=null&&C.minimalScore?+((M=_.metadata)==null?void 0:M.minimalScore):void 0;U&&U>1&&(U=U/100);const F=await s({databaseId:I.id,dataSourceId:D.id,dataSourceType:yE(D)},y.humanMessage.content,$);if(!F)return[];const H=new ha({template:L.content,inputVariables:["context"]});b.push(new Dh(await H.format({context:U?F.filter(([,Y])=>Y>=U).map(([Y])=>Y.pageContent).join(`
`):F.map(([Y])=>Y.pageContent).join(`
`)})))}}})),b},[t,e,s]),f=g.useCallback(async(y,m,v,{onMessageUpdate:b})=>{const{prompts:x,tools:_,schemas:w,placeholders:j}=m,E=[];j!=null&&j.length&&E.push(...await d(y,m));const{history:S,systems:O}=p5(v,x),N=[...O,...E,...S,new Au(y.humanMessage.content)],P=w.map(A=>{var C;return(C=A.node.data)==null?void 0:C.entity}).filter(Boolean),{lastChunk:k,content:R}=await l(N,{tools:xx(_),schemas:P,onMessageUpdate:({content:A})=>{b==null||b({id:y.aiMessageNode.id,nodeData:{loading:!0,content:A}})}});return y.aiMessage.content=R,y.aiMessage.metadata=JSON.stringify({message:k}),b==null||b({id:y.aiMessageNode.id,nodeData:{content:R,loading:!1,entity:y.aiMessage}}),y.aiMessage.id&&await ue("Message").update(y.aiMessage.id,{content:R,metadata:JSON.stringify({message:k})}),R},[d,l]),p=g.useCallback(async(y,m,v)=>{var E,S,O;const{nodes:b}=nw([y.id],[],[],[],{getNode:e,getHandleConnections:t}),x=b.find(N=>N.type===ae.Thread),_=x==null?void 0:x.data.entity;if(!y||!_||!x)throw new Error("Source or thread is not found");if(!await c())throw new Error("Model is not loaded yet");const w=rw(x,{getNode:e,getHandleConnections:t});if(!(w!=null&&w.thread))throw new Error("Thread node is not found");let j;try{o(!0);const N=((E=y.position)==null?void 0:E.x)||0,P=(((S=y.position)==null?void 0:S.y)||0)+(((O=y.measured)==null?void 0:O.height)||0);return j=await u({content:m,initialX:N,initialY:P,sourceId:y.id,threadId:_.id,initialLLMId:_.initial_llm_id}),await f(j,w,b,v),await ue("Message").update(`${j.aiMessage.id}`,{status:Wr.Success}),j.aiMessage.status=Wr.Success,v.onMessageUpdate({id:j.aiMessageNode.id,nodeData:{entity:j.aiMessage,loading:!1}}),!0}catch{j!=null&&j.aiMessage&&await ue("Message").update(`${j.aiMessage.id}`,{status:Wr.Failed,content:n("errors.ai_message_content_failed")}),j!=null&&j.aiMessageNode.id&&(v==null||v.onMessageUpdate({id:j.aiMessageNode.id,nodeData:{content:n("errors.ai_message_content_failed"),loading:!1}}))}finally{o(!1)}},[c,t,e,u,f,n]);return{loading:r,createMessage:p}},h5=(e,t)=>{const n=Yt(e),{t:r}=Pe("flows"),{getNode:o,getHandleConnections:a}=Un(),i=Ae(f=>f.updateNodes),{createMessage:s,loading:c}=aw({getNode:o,getHandleConnections:a}),l=g.useCallback(f=>{if(!f.id)return;const p=o(f.id);!p||!f.nodeData||i([{id:p.id,type:"replace",item:{...p,data:{...p.data,...Wc(f.nodeData,qc)}}}])},[o,i]),u=g.useCallback(async f=>{if(n&&t.entity)try{await s(n,f,{onMessageUpdate:l})}catch(p){if(p instanceof Error&&p.message.includes("LLM_NOT_LOADED_YET"))return qs({variant:"destructive",title:r("thread_node.errors.llm_not_loaded_yet")});qs({variant:"destructive",title:`${p}`})}},[n,t.entity,s,l,r]),d=g.useCallback(f=>{const p=o(f);if(!p)return[];const y=[],m=rw(p,{getNode:o,getHandleConnections:a});return m.thread&&y.push({node:m.thread.node,connectedNodes:[],connections:m.thread.connections}),m.prompts&&y.push(...m.prompts.map(v=>({node:v.node,connectedNodes:v.connectedNodes,connections:v.connections}))),m.schemas&&y.push(...m.schemas.map(v=>({node:v.node,connectedNodes:[],connections:v.connections}))),m.placeholders&&y.push(...m.placeholders.map(v=>({node:v.node,connectedNodes:[],connections:v.connections}))),m.llm&&y.push(m.llm),y},[a,o]);return{loading:c,createMessage:u,getLinkedConnections:d}},m5=e=>{const t=Ae(r=>r.createOrUpdateFlowEdge),n=g.useCallback(async({edgeId:r,source:o,target:a,connection:i})=>{try{if((o==null?void 0:o.type)===ae.Prompt&&(a==null?void 0:a.type)===ae.Thread){await t({source:i.source,target:i.target,sourceHandle:i.sourceHandle,targetHandle:i.targetHandle});return}else if((o==null?void 0:o.type)===ae.LLM&&(a==null?void 0:a.type)===ae.Thread){await t({source:i.source,target:i.target,sourceHandle:i.sourceHandle,targetHandle:i.targetHandle});return}else if((o==null?void 0:o.type)===ae.Schema&&(a==null?void 0:a.type)===ae.Thread){await t({source:i.source,target:i.target,sourceHandle:i.sourceHandle,targetHandle:i.targetHandle});const s=a.data.entity,c=a.data.entity;await ue("Thread").update(s.id,{schema_id:c.id});return}else if((o==null?void 0:o.type)===ae.ToolDefinition&&(a==null?void 0:a.type)===ae.Thread){await t({source:i.source,target:i.target,sourceHandle:i.sourceHandle,targetHandle:i.targetHandle});return}else if((o==null?void 0:o.type)===ae.VectorDatabase&&(a==null?void 0:a.type)===ae.Thread){await t({source:i.source,target:i.target,sourceHandle:i.sourceHandle,targetHandle:i.targetHandle});return}else if((o==null?void 0:o.type)===ae.PlaceHolder&&(a==null?void 0:a.type)===ae.Thread&&o.data.entity.placeholder_type===si.VECTOR_DATABASE_RETREIVER){await t({source:i.source,target:i.target,sourceHandle:i.sourceHandle,targetHandle:i.targetHandle});return}return{deleteEdgeId:r}}catch{return{deleteEdgeId:r}}},[t]);bn(e,n)},y5=g.memo(e=>{const{id:t,data:n,isConnectable:r}=e,{t:o}=Pe("flows"),[a,i]=g.useState(!1),s=Af({type:"source"}),c=Af({type:"target"}),{getNode:l}=Un(),{loading:u,createMessage:d,getLinkedConnections:f}=h5(t,n);m5(t);const p=g.useCallback(async(...b)=>(i(!1),await d(...b)),[d]),y=g.useMemo(()=>s.length>0,[s]),m=g.useCallback(()=>{i(b=>!b)},[]),v=g.useMemo(()=>{var x,_;const b=c.map((w,j)=>{var S;const E=l(w.source);if((E==null?void 0:E.type)===ae.Schema)return h.jsx(tn,{children:o("thread_node.structured_output")},`${j}`);if((E==null?void 0:E.type)===ae.Prompt){const O=E.data.entity;return h.jsx(tn,{children:o(O.type===kn.FewShotExample?"thread_node.prompts.few_shot_example":`thread_node.prompts.${O.role.toLowerCase()}`)},`${j}`)}else if((E==null?void 0:E.type)===ae.PlaceHolder&&((S=E.data.entity)==null?void 0:S.placeholder_type)===si.VECTOR_DATABASE_RETREIVER)return h.jsx(tn,{children:o("thread_node.vector_database_retriever")},`${j}`)}).filter(Boolean);return e.data.entity&&!((_=(x=e.data.entity)==null?void 0:x.messages)!=null&&_.length)&&!y?h.jsx(Zf,{disabled:u,loading:u,onSubmit:p,tags:b}):b!=null&&b.length?h.jsxs(At,{className:"p-4 pt-2",children:[h.jsx(_n,{className:"mb-2",children:o("thread_node.title")}),h.jsx("div",{className:"flex gap-1.5",children:b}),h.jsx("div",{className:"mt-4 w-full flex justify-end",children:h.jsxs(ut,{onClick:m,variant:"outline",children:[h.jsx(de,{name:a?"copy-minus":"copy-plus"}),o(a?"thread_node.hide":"thread_node.clone")]})})]}):h.jsx("div",{className:"w-12 h-10"})},[y,l,p,m,u,e.data.entity,a,o,c]);return h.jsxs("div",{children:[h.jsx(Je,{type:"target",position:fe.Top,isConnectable:r}),h.jsxs("div",{children:[h.jsx(nn,{id:t,enableToStandalone:!0,getLinkedConnections:f}),v,a?h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"w-[1px] absolute ml-[50%] h-[30px] bg-gray-500"}),h.jsx("div",{className:"absolute mt-[30px] w-full",children:h.jsx("div",{className:"ml-[10%] w-80 animate-in slide-in-from-bottom-5",children:h.jsx(Zf,{disabled:u,loading:u,onSubmit:p})})})]}):void 0]}),h.jsx(Je,{type:"source",position:fe.Bottom,id:"a",isConnectable:r})]})});function Oae({data:e,onNewThread:t,loading:n,showThread:r}){var a;const{t:o}=Pe("flows");return h.jsxs(xo,{className:"flex min-w-52",children:[h.jsx(de,{size:24,name:"user"}),h.jsxs("div",{className:"ml-2 max-w-full w-full",children:[h.jsx(wo,{children:"Human"}),h.jsx(ns,{children:`${e.content||((a=e.entity)==null?void 0:a.content)||""}`}),t?h.jsx("div",{className:"w-full mt-2 flex items-center justify-end",children:h.jsxs(ut,{onClick:t,disabled:n,variant:"outline",children:[h.jsx(de,{name:r?"minus":"plus",size:16}),o(r?"message_node.hide_thread":"message_node.new_thread")]})}):void 0]})]})}const Mae=g.lazy(()=>qt(()=>import("./index-TkYuoEXb.js").then(async e=>(await e.__tla,e)),__vite__mapDeps([8,9,1,2,10,11])));function Nae({data:e,onNewThread:t,loading:n,showThread:r}){var i,s,c,l,u,d,f,p;const{t:o}=Pe("flows"),a=g.useMemo(()=>{var y;try{return JSON.parse(((y=e==null?void 0:e.entity)==null?void 0:y.metadata)||"{}")}catch{return{}}},[(i=e==null?void 0:e.entity)==null?void 0:i.metadata]);return h.jsxs(xo,{className:"flex min-w-52",children:[h.jsx(de,{className:Q(e.loading?"animate-spin":void 0),size:24,name:e.loading?"loader-circle":"bot"}),h.jsx(de,{name:r?"minus":"plus",size:24}),h.jsxs("div",{className:"ml-2 w-full max-w-full",children:[h.jsx(wo,{children:o(`message_node.message_roles.${(c=(s=e.entity)==null?void 0:s.role)==null?void 0:c.toLowerCase()}`)}),h.jsx(g.Suspense,{fallback:h.jsx("div",{className:"h-full w-ful rounded-lg flex justify-center items-center",children:h.jsx(de,{name:"loader-circle",className:"animate-spin"})}),children:h.jsx(Mae,{className:"!text-sm [&_p]:leading-relaxed !max-w-full !bg-transparent !font-sans",source:`${e.content||((l=e.entity)==null?void 0:l.content)||""}`,style:{color:"unset !important"}})}),Array.isArray((u=a==null?void 0:a.message)==null?void 0:u.tool_calls)&&((f=(d=a==null?void 0:a.message)==null?void 0:d.tool_calls)!=null&&f.length)?(p=a==null?void 0:a.message)==null?void 0:p.tool_calls.map((y,m)=>h.jsx(tn,{children:o("message_node.tool_call",{name:y.name,args:Object.entries(y.args).map(([v,b])=>`"${v}": "${b}"`).join(", ")})},`${y.name}_${m}`)):null,t?h.jsx("div",{className:"w-full mt-2 flex items-center justify-end",children:h.jsxs(ut,{onClick:t,disabled:n,variant:"outline",children:[h.jsx(de,{name:r?"minus":"plus",size:16}),o(r?"message_node.hide_thread":"message_node.new_thread")]})}):void 0]}),e.loading?h.jsx(Jf,{size:350,duration:10}):void 0]})}const kae=e=>{const{t}=Pe("flows"),n=Yt(e),r=Ae(u=>u.updateNodes),{getNode:o,getHandleConnections:a}=Un(),{createMessage:i,loading:s}=aw({getNode:o,getHandleConnections:a}),c=g.useCallback(u=>{if(!u.id)return;const d=o(u.id);!d||!u.nodeData||r([{id:d.id,type:"replace",item:{...d,data:{...d.data,...Wc(u.nodeData,qc)}}}])},[o,r]),l=g.useCallback(async u=>{if(n)try{await i(n,u,{onMessageUpdate:c})}catch(d){if(d instanceof Error&&d.message.includes("LLM_NOT_LOADED_YET"))return qs({variant:"destructive",title:t("message_node.errors.llm_not_loaded_yet")});qs({variant:"destructive",title:t("message_node.errors.create_message")})}},[n,t,i,c]);return{loading:s,createMessage:l}},g5=()=>{const e=Ae(n=>n.createOrUpdateFlowNode),t=Ae(n=>n.createOrUpdateFlowEdge);return{createIdieMessage:g.useCallback(async(n,r,o,a)=>{var p,y,m,v,b;if(!n||!r)return;const i=(y=(p=a==null?void 0:a.promptNode)==null?void 0:p.data)==null?void 0:y.entity,s=((m=n.position)==null?void 0:m.x)||0,c=(((v=n.position)==null?void 0:v.y)||0)+(((b=n.measured)==null?void 0:b.height)||0),l=await ue("Message").save({thread_id:r.id,content:o,role:(i==null?void 0:i.role)||Nn.Human,status:Wr.Started,llm_id:r.initial_llm_id});if(!l)throw new Error("Failed to save message");const u=await e({source_id:l.id,source_type:"Message",node_type:ae.Message,x:s,y:c});if(!u)throw new Error("Failed to save message node");const d=await t({source:n.id,target:u.id});let f;return a!=null&&a.promptNode&&(f=await t({source:a==null?void 0:a.promptNode.id,target:u.id})),{message:l,edgeToPrompt:f,messageNode:u,messageEdge:d}},[e,t])}},Pae=e=>{const{createIdieMessage:t}=g5(),n=g.useCallback(async({edgeId:r,source:o,target:a})=>{var i,s;try{if((o==null?void 0:o.type)===ae.Prompt&&(a==null?void 0:a.type)===ae.Message){const c=(i=a==null?void 0:a.data)==null?void 0:i.entity,l=(s=o==null?void 0:o.data)==null?void 0:s.entity;if(!l||!c||!a)return{deleteEdgeId:r};await t(a,{id:c==null?void 0:c.thread_id,title:"",status:$u.Started,initial_llm_id:c.llm_id,session_id:l.session_id},l.content,{promptNode:o});return}return{deleteEdgeId:r}}catch{return{deleteEdgeId:r}}},[t]);bn(e,n)},Aae=g.memo(e=>{var _,w,j;const{id:t,data:n,isConnectable:r}=e,[o,a]=g.useState(!1),[i,s]=g.useState(!1),{t:c}=Pe("common"),l=Af({type:"source"}),{loading:u,createMessage:d}=kae(t),{toast:f}=en();Pae(t);const p=g.useCallback(async(...E)=>{const S=await d(...E);return a(!1),S},[d]),y=g.useMemo(()=>l.length===0,[l]),m=g.useCallback(()=>{var E;(E=n.entity)!=null&&E.content&&(navigator.clipboard.writeText(n.entity.content),f({description:c("copied")}))},[f,n,c]),v=g.useCallback(async()=>{var E;try{if(i)return await mE.stop(),s(!1);s(!0),await mE.speak(((E=n.entity)==null?void 0:E.content)||"")}catch{f({variant:"destructive",description:c("errors.speech_is_not_supported")})}finally{s(!1)}},[(_=n.entity)==null?void 0:_.content,i,c,f]),b=g.useCallback(()=>{a(E=>!E)},[]),x=g.useMemo(()=>{var E;if(!(!y&&!o||n.loading||u||((E=n==null?void 0:n.entity)==null?void 0:E.status)==="inprogress"))return h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"w-[1px] absolute ml-[50%] h-[30px] bg-gray-500"}),h.jsx("div",{className:"absolute mt-[30px] w-full",children:h.jsx("div",{className:"ml-[10%] w-80 animate-in slide-in-from-bottom-5",children:h.jsx(Zf,{disabled:u,loading:u,onSubmit:p})})})]})},[(w=n==null?void 0:n.entity)==null?void 0:w.status,n.loading,p,y,u,o]);return h.jsxs("div",{children:[h.jsx(Je,{type:"target",position:fe.Top,isConnectable:r}),h.jsxs("div",{className:"max-w-sm min-w-64",children:[h.jsxs("div",{className:"w-auto",children:[h.jsx(nn,{id:t}),h.jsx("div",{children:((j=n.entity)==null?void 0:j.role)===Nn.Human?h.jsx(Oae,{data:n,showThread:o,onNewThread:y?void 0:b}):h.jsx(Nae,{data:n,showThread:o,loading:u,onNewThread:y?void 0:b})}),h.jsx(ut,{onClick:v,className:"absolute top-0 right-[68px] !px-2 !rounded-none",variant:"ghost",children:h.jsx(de,{name:i?"circle-stop":"speech",size:16})}),h.jsx(ut,{onClick:m,className:"absolute top-0 right-[36px] !px-2 !rounded-none",variant:"ghost",children:h.jsx(de,{name:"copy",size:16})})]}),x]}),h.jsx(Je,{type:"source",position:fe.Bottom,id:"a",isConnectable:r})]})}),v5=ei(({title:e,content:t})=>{const n=sn();return h.jsx(Oc,{open:n.visible,onOpenChange:n.hide,children:h.jsxs(wi,{className:"sm:max-w-2xl",children:[h.jsx(_i,{children:h.jsxs("div",{className:"flex",children:[h.jsx(de,{name:"file",className:"mr-2 h-4 w-4"}),h.jsx(ji,{children:e})]})}),h.jsx("div",{className:"mx-auto w-full min-h-96 max-h-96 overflow-hidden",children:h.jsx("div",{className:"relative w-full h-full overflow-hidden rounded-xl p-1 border border-border",children:h.jsx("pre",{className:"break-all h-full overflow-y-auto bg-background font-mono text-xs w-full",children:t})})})]})})}),Tae=e=>{const t=Ae(o=>o.createOrUpdateFlowEdge),{createIdieMessage:n}=g5(),r=g.useCallback(async({edgeId:o,source:a,target:i})=>{var s,c,l,u;try{const d=(s=i==null?void 0:i.data)==null?void 0:s.entity,f=(c=a==null?void 0:a.data)==null?void 0:c.entity;if((a==null?void 0:a.type)===ae.Message&&(i==null?void 0:i.type)===ae.Prompt){const p=(l=a==null?void 0:a.data)==null?void 0:l.entity,y=(u=i==null?void 0:i.data)==null?void 0:u.entity;if(!y||!p||!i)return{deleteEdgeId:o};await n(a,{id:p==null?void 0:p.thread_id,title:"",status:$u.Started,initial_llm_id:p.llm_id,session_id:y.session_id},y.content,{promptNode:i});return}else if((a==null?void 0:a.type)===ae.CSVData&&(i==null?void 0:i.type)===ae.Prompt&&(d==null?void 0:d.type)===kn.FewShotExample&&(f!=null&&f.headers.includes("input"))&&(f!=null&&f.headers.includes("output"))){await t({source:a.id,target:i.id});return}return{deleteEdgeId:o}}catch{return{deleteEdgeId:o}}},[n,t]);bn(e,r)},Rae=g.memo(e=>{var l,u,d;const{id:t,data:n,isConnectable:r}=e;Tae(t);const o=sn(v5),a=g.useMemo(()=>{var f,p,y;return`${(f=n.entity)!=null&&f.prefix?`${(p=n.entity)==null?void 0:p.prefix}
`:""}${((y=n.entity)==null?void 0:y.content)||""}`},[(l=n.entity)==null?void 0:l.prefix,(u=n.entity)==null?void 0:u.content]),i=g.useMemo(()=>{var p;const f=/{(.*?)}/g;return((p=a.match(f))==null?void 0:p.map(y=>y.replace("{","").replace("}","")))||[]},[a]),s=a.length>990,c=()=>{o.show({title:"Prompt",content:a})};return h.jsxs("div",{className:"min-w-56",children:[h.jsx(Je,{type:"target",position:fe.Top,isConnectable:r}),h.jsxs("div",{children:[h.jsx(nn,{id:t}),h.jsxs(xo,{className:"flex justify-center max-w-72",variant:"default",children:[h.jsx(de,{size:24,name:"notepad-text"}),h.jsxs("div",{className:"ml-2 max-w-full break-words break-all",children:[h.jsx(wo,{children:`${((d=n.entity)==null?void 0:d.role)||""}`}),h.jsxs(ns,{onClick:s?c:void 0,children:[s?`${a.slice(0,990)}...`:a,s?h.jsx("span",{className:"float-right",children:h.jsx(de,{name:"chevron-right"})}):void 0]}),i!=null&&i.length?i.map((f,p)=>h.jsx(tn,{className:"mt-2 mr-1",variant:"default",children:f},p)):void 0]})]})]}),h.jsx(Je,{type:"source",position:fe.Bottom,id:"a",isConnectable:r})]})});var Iae=PP();const Hn=Xe(Iae);var iw,b5;function Dae(){if(b5)return iw;b5=1;function e(t){return t==null}return iw=e,iw}var Lae=Dae();const rt=Xe(Lae);var sw,x5;function Fae(){if(x5)return sw;x5=1;var e=io(),t=cn(),n=Er(),r="[object String]";function o(a){return typeof a=="string"||!t(a)&&n(a)&&e(a)==r}return sw=o,sw}var Bae=Fae();const Ol=Xe(Bae);var $ae=Iu();const We=Xe($ae);var zae=tr();const rs=Xe(zae);var w5={exports:{}},ot={},_5;function Vae(){if(_5)return ot;_5=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),i=Symbol.for("react.context"),s=Symbol.for("react.server_context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.suspense_list"),d=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.for("react.offscreen"),y;y=Symbol.for("react.module.reference");function m(v){if(typeof v=="object"&&v!==null){var b=v.$$typeof;switch(b){case e:switch(v=v.type,v){case n:case o:case r:case l:case u:return v;default:switch(v=v&&v.$$typeof,v){case s:case i:case c:case f:case d:case a:return v;default:return b}}case t:return b}}}return ot.ContextConsumer=i,ot.ContextProvider=a,ot.Element=e,ot.ForwardRef=c,ot.Fragment=n,ot.Lazy=f,ot.Memo=d,ot.Portal=t,ot.Profiler=o,ot.StrictMode=r,ot.Suspense=l,ot.SuspenseList=u,ot.isAsyncMode=function(){return!1},ot.isConcurrentMode=function(){return!1},ot.isContextConsumer=function(v){return m(v)===i},ot.isContextProvider=function(v){return m(v)===a},ot.isElement=function(v){return typeof v=="object"&&v!==null&&v.$$typeof===e},ot.isForwardRef=function(v){return m(v)===c},ot.isFragment=function(v){return m(v)===n},ot.isLazy=function(v){return m(v)===f},ot.isMemo=function(v){return m(v)===d},ot.isPortal=function(v){return m(v)===t},ot.isProfiler=function(v){return m(v)===o},ot.isStrictMode=function(v){return m(v)===r},ot.isSuspense=function(v){return m(v)===l},ot.isSuspenseList=function(v){return m(v)===u},ot.isValidElementType=function(v){return typeof v=="string"||typeof v=="function"||v===n||v===o||v===r||v===l||v===u||v===p||typeof v=="object"&&v!==null&&(v.$$typeof===f||v.$$typeof===d||v.$$typeof===a||v.$$typeof===i||v.$$typeof===c||v.$$typeof===y||v.getModuleId!==void 0)},ot.typeOf=m,ot}var j5;function Uae(){return j5||(j5=1,w5.exports=Vae()),w5.exports}var Hae=Uae(),cw,E5;function S5(){if(E5)return cw;E5=1;var e=io(),t=Er(),n="[object Number]";function r(o){return typeof o=="number"||t(o)&&e(o)==n}return cw=r,cw}var lw,C5;function Wae(){if(C5)return lw;C5=1;var e=S5();function t(n){return e(n)&&n!=+n}return lw=t,lw}var qae=Wae();const Ml=Xe(qae);var Yae=S5();const Kae=Xe(Yae);var yr=function(e){return e===0?0:e>0?1:-1},Ia=function(e){return Ol(e)&&e.indexOf("%")===e.length-1},me=function(e){return Kae(e)&&!Ml(e)},Bt=function(e){return me(e)||Ol(e)},Xae=0,ep=function(e){var t=++Xae;return"".concat(e||"").concat(t)},Da=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!me(e)&&!Ol(e))return n;var o;if(Ia(e)){var a=e.indexOf("%");o=t*parseFloat(e.slice(0,a))/100}else o=+e;return Ml(o)&&(o=n),r&&o>t&&(o=t),o},ea=function(e){if(!e)return null;var t=Object.keys(e);return t&&t.length?e[t[0]]:null},Gae=function(e){if(!Array.isArray(e))return!1;for(var t=e.length,n={},r=0;r<t;r++)if(!n[e[r]])n[e[r]]=!0;else return!0;return!1},os=function(e,t){return me(e)&&me(t)?function(n){return e+n*(t-e)}:function(){return t}};function uw(e,t,n){return!e||!e.length?null:e.find(function(r){return r&&(typeof t=="function"?t(r):Hn(r,t))===n})}function as(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var r in t)if({}.hasOwnProperty.call(t,r)&&!{}.hasOwnProperty.call(e,r))return!1;return!0}function dw(e){"@babel/helpers - typeof";return dw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dw(e)}var Qae=["viewBox","children"],Jae=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],O5=["points","pathLength"],fw={svg:Qae,polygon:O5,polyline:O5},pw=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],tp=function(e,t){if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(g.isValidElement(e)&&(n=e.props),!rs(n))return null;var r={};return Object.keys(n).forEach(function(o){pw.includes(o)&&(r[o]=t||function(a){return n[o](n,a)})}),r},Zae=function(e,t,n){return function(r){return e(t,n,r),null}},np=function(e,t,n){if(!rs(e)||dw(e)!=="object")return null;var r=null;return Object.keys(e).forEach(function(o){var a=e[o];pw.includes(o)&&typeof a=="function"&&(r||(r={}),r[o]=Zae(a,t,n))}),r},eie=["children"],tie=["children"];function M5(e,t){if(e==null)return{};var n=nie(e,t),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function nie(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var N5={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart"},_o=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},k5=null,hw=null,mw=function e(t){if(t===k5&&Array.isArray(hw))return hw;var n=[];return g.Children.forEach(t,function(r){rt(r)||(Hae.isFragment(r)?n=n.concat(e(r.props.children)):n.push(r))}),hw=n,k5=t,n};function gr(e,t){var n=[],r=[];return Array.isArray(t)?r=t.map(function(o){return _o(o)}):r=[_o(t)],mw(e).forEach(function(o){var a=Hn(o,"type.displayName")||Hn(o,"type.name");r.indexOf(a)!==-1&&n.push(o)}),n}function Dn(e,t){var n=gr(e,t);return n&&n[0]}var P5=function(e){if(!e||!e.props)return!1;var t=e.props,n=t.width,r=t.height;return!(!me(n)||n<=0||!me(r)||r<=0)},rie=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],oie=function(e){return e&&e.type&&Ol(e.type)&&rie.indexOf(e.type)>=0},aie=function(e,t,n,r){var o,a=(o=fw==null?void 0:fw[r])!==null&&o!==void 0?o:[];return!We(e)&&(r&&a.includes(t)||Jae.includes(t))||n&&pw.includes(t)},nt=function(e,t,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(g.isValidElement(e)&&(r=e.props),!rs(r))return null;var o={};return Object.keys(r).forEach(function(a){var i;aie((i=r)===null||i===void 0?void 0:i[a],a,t,n)&&(o[a]=r[a])}),o},yw=function e(t,n){if(t===n)return!0;var r=g.Children.count(t);if(r!==g.Children.count(n))return!1;if(r===0)return!0;if(r===1)return A5(Array.isArray(t)?t[0]:t,Array.isArray(n)?n[0]:n);for(var o=0;o<r;o++){var a=t[o],i=n[o];if(Array.isArray(a)||Array.isArray(i)){if(!e(a,i))return!1}else if(!A5(a,i))return!1}return!0},A5=function(e,t){if(rt(e)&&rt(t))return!0;if(!rt(e)&&!rt(t)){var n=e.props||{},r=n.children,o=M5(n,eie),a=t.props||{},i=a.children,s=M5(a,tie);return r&&i?as(o,s)&&yw(r,i):!r&&!i?as(o,s):!1}return!1},T5=function(e,t){var n=[],r={};return mw(e).forEach(function(o,a){if(oie(o))n.push(o);else if(o){var i=_o(o.type),s=t[i]||{},c=s.handler,l=s.once;if(c&&(!l||!r[i])){var u=c(o,i,a);n.push(u),r[i]=!0}}}),n},iie=function(e){var t=e&&e.type;return t&&N5[t]?N5[t]:null},sie=function(e,t){return mw(t).indexOf(e)},cie=["children","width","height","viewBox","className","style","title","desc"];function gw(){return gw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gw.apply(this,arguments)}function lie(e,t){if(e==null)return{};var n=uie(e,t),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function uie(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function vw(e){var t=e.children,n=e.width,r=e.height,o=e.viewBox,a=e.className,i=e.style,s=e.title,c=e.desc,l=lie(e,cie),u=o||{width:n,height:r,x:0,y:0},d=st("recharts-surface",a);return V.createElement("svg",gw({},nt(l,!0,"svg"),{className:d,width:n,height:r,style:i,viewBox:"".concat(u.x," ").concat(u.y," ").concat(u.width," ").concat(u.height)}),V.createElement("title",null,s),V.createElement("desc",null,c),t)}var die=["children","className"];function bw(){return bw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bw.apply(this,arguments)}function fie(e,t){if(e==null)return{};var n=pie(e,t),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function pie(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var Ut=V.forwardRef(function(e,t){var n=e.children,r=e.className,o=fie(e,die),a=st("recharts-layer",r);return V.createElement("g",bw({className:a},nt(o,!0),{ref:t}),n)}),jo=function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o]},xw,R5;Dm=function(){if(R5)return xw;R5=1;function e(t,n,r){var o=-1,a=t.length;n<0&&(n=-n>a?0:a+n),r=r>a?a:r,r<0&&(r+=a),a=n>r?0:r-n>>>0,n>>>=0;for(var i=Array(a);++o<a;)i[o]=t[o+n];return i}return xw=e,xw};var ww,I5;function hie(){if(I5)return ww;I5=1;var e=Dm();function t(n,r,o){var a=n.length;return o=o===void 0?a:o,!r&&o>=a?n:e(n,r,o)}return ww=t,ww}var _w,D5;function L5(){if(D5)return _w;D5=1;var e="\uD800-\uDFFF",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",o=t+n+r,a="\\ufe0e\\ufe0f",i="\\u200d",s=RegExp("["+i+e+o+a+"]");function c(l){return s.test(l)}return _w=c,_w}var jw,F5;function mie(){if(F5)return jw;F5=1;function e(t){return t.split("")}return jw=e,jw}var Ew,B5;function yie(){if(B5)return Ew;B5=1;var e="\uD800-\uDFFF",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",o=t+n+r,a="\\ufe0e\\ufe0f",i="["+e+"]",s="["+o+"]",c="\uD83C[\uDFFB-\uDFFF]",l="(?:"+s+"|"+c+")",u="[^"+e+"]",d="(?:\uD83C[\uDDE6-\uDDFF]){2}",f="[\uD800-\uDBFF][\uDC00-\uDFFF]",p="\\u200d",y=l+"?",m="["+a+"]?",v="(?:"+p+"(?:"+[u,d,f].join("|")+")"+m+y+")*",b=m+y+v,x="(?:"+[u+s+"?",s,d,f,i].join("|")+")",_=RegExp(c+"(?="+c+")|"+x+b,"g");function w(j){return j.match(_)||[]}return Ew=w,Ew}var Sw,$5;function gie(){if($5)return Sw;$5=1;var e=mie(),t=L5(),n=yie();function r(o){return t(o)?n(o):e(o)}return Sw=r,Sw}var Cw,z5;function vie(){if(z5)return Cw;z5=1;var e=hie(),t=L5(),n=gie(),r=CP();function o(a){return function(i){i=r(i);var s=t(i)?n(i):void 0,c=s?s[0]:i.charAt(0),l=s?e(s,1).join(""):i.slice(1);return c[a]()+l}}return Cw=o,Cw}var Ow,V5;function bie(){if(V5)return Ow;V5=1;var e=vie(),t=e("toUpperCase");return Ow=t,Ow}var xie=bie();const rp=Xe(xie);function vt(e){return function(){return e}}const U5=Math.cos,op=Math.sin,vr=Math.sqrt,ap=Math.PI,ip=2*ap,Mw=Math.PI,Nw=2*Mw,La=1e-6,wie=Nw-La;function H5(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function _ie(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return H5;const n=10**t;return function(r){this._+=r[0];for(let o=1,a=r.length;o<a;++o)this._+=Math.round(arguments[o]*n)/n+r[o]}}class jie{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?H5:_ie(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,o){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+o}`}bezierCurveTo(t,n,r,o,a,i){this._append`C${+t},${+n},${+r},${+o},${this._x1=+a},${this._y1=+i}`}arcTo(t,n,r,o,a){if(t=+t,n=+n,r=+r,o=+o,a=+a,a<0)throw new Error(`negative radius: ${a}`);let i=this._x1,s=this._y1,c=r-t,l=o-n,u=i-t,d=s-n,f=u*u+d*d;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(f>La)if(!(Math.abs(d*c-l*u)>La)||!a)this._append`L${this._x1=t},${this._y1=n}`;else{let p=r-i,y=o-s,m=c*c+l*l,v=p*p+y*y,b=Math.sqrt(m),x=Math.sqrt(f),_=a*Math.tan((Mw-Math.acos((m+f-v)/(2*b*x)))/2),w=_/x,j=_/b;Math.abs(w-1)>La&&this._append`L${t+w*u},${n+w*d}`,this._append`A${a},${a},0,0,${+(d*p>u*y)},${this._x1=t+j*c},${this._y1=n+j*l}`}}arc(t,n,r,o,a,i){if(t=+t,n=+n,r=+r,i=!!i,r<0)throw new Error(`negative radius: ${r}`);let s=r*Math.cos(o),c=r*Math.sin(o),l=t+s,u=n+c,d=1^i,f=i?o-a:a-o;this._x1===null?this._append`M${l},${u}`:(Math.abs(this._x1-l)>La||Math.abs(this._y1-u)>La)&&this._append`L${l},${u}`,r&&(f<0&&(f=f%Nw+Nw),f>wie?this._append`A${r},${r},0,1,${d},${t-s},${n-c}A${r},${r},0,1,${d},${this._x1=l},${this._y1=u}`:f>La&&this._append`A${r},${r},0,${+(f>=Mw)},${d},${this._x1=t+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(t,n,r,o){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+o}h${-r}Z`}toString(){return this._}}function kw(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new jie(t)}function Pw(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function W5(e){this._context=e}W5.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function sp(e){return new W5(e)}function q5(e){return e[0]}function Y5(e){return e[1]}function K5(e,t){var n=vt(!0),r=null,o=sp,a=null,i=kw(s);e=typeof e=="function"?e:e===void 0?q5:vt(e),t=typeof t=="function"?t:t===void 0?Y5:vt(t);function s(c){var l,u=(c=Pw(c)).length,d,f=!1,p;for(r==null&&(a=o(p=i())),l=0;l<=u;++l)!(l<u&&n(d=c[l],l,c))===f&&((f=!f)?a.lineStart():a.lineEnd()),f&&a.point(+e(d,l,c),+t(d,l,c));if(p)return a=null,p+""||null}return s.x=function(c){return arguments.length?(e=typeof c=="function"?c:vt(+c),s):e},s.y=function(c){return arguments.length?(t=typeof c=="function"?c:vt(+c),s):t},s.defined=function(c){return arguments.length?(n=typeof c=="function"?c:vt(!!c),s):n},s.curve=function(c){return arguments.length?(o=c,r!=null&&(a=o(r)),s):o},s.context=function(c){return arguments.length?(c==null?r=a=null:a=o(r=c),s):r},s}function cp(e,t,n){var r=null,o=vt(!0),a=null,i=sp,s=null,c=kw(l);e=typeof e=="function"?e:e===void 0?q5:vt(+e),t=typeof t=="function"?t:vt(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?Y5:vt(+n);function l(d){var f,p,y,m=(d=Pw(d)).length,v,b=!1,x,_=new Array(m),w=new Array(m);for(a==null&&(s=i(x=c())),f=0;f<=m;++f){if(!(f<m&&o(v=d[f],f,d))===b)if(b=!b)p=f,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),y=f-1;y>=p;--y)s.point(_[y],w[y]);s.lineEnd(),s.areaEnd()}b&&(_[f]=+e(v,f,d),w[f]=+t(v,f,d),s.point(r?+r(v,f,d):_[f],n?+n(v,f,d):w[f]))}if(x)return s=null,x+""||null}function u(){return K5().defined(o).curve(i).context(a)}return l.x=function(d){return arguments.length?(e=typeof d=="function"?d:vt(+d),r=null,l):e},l.x0=function(d){return arguments.length?(e=typeof d=="function"?d:vt(+d),l):e},l.x1=function(d){return arguments.length?(r=d==null?null:typeof d=="function"?d:vt(+d),l):r},l.y=function(d){return arguments.length?(t=typeof d=="function"?d:vt(+d),n=null,l):t},l.y0=function(d){return arguments.length?(t=typeof d=="function"?d:vt(+d),l):t},l.y1=function(d){return arguments.length?(n=d==null?null:typeof d=="function"?d:vt(+d),l):n},l.lineX0=l.lineY0=function(){return u().x(e).y(t)},l.lineY1=function(){return u().x(e).y(n)},l.lineX1=function(){return u().x(r).y(t)},l.defined=function(d){return arguments.length?(o=typeof d=="function"?d:vt(!!d),l):o},l.curve=function(d){return arguments.length?(i=d,a!=null&&(s=i(a)),l):i},l.context=function(d){return arguments.length?(d==null?a=s=null:s=i(a=d),l):a},l}class X5{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function Eie(e){return new X5(e,!0)}function Sie(e){return new X5(e,!1)}const Aw={draw(e,t){const n=vr(t/ap);e.moveTo(n,0),e.arc(0,0,n,0,ip)}},Cie={draw(e,t){const n=vr(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},G5=vr(1/3),Oie=G5*2,Mie={draw(e,t){const n=vr(t/Oie),r=n*G5;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},Nie={draw(e,t){const n=vr(t),r=-n/2;e.rect(r,r,n,n)}},kie=.8908130915292852,Q5=op(ap/10)/op(7*ap/10),Pie=op(ip/10)*Q5,Aie=-U5(ip/10)*Q5,Tie={draw(e,t){const n=vr(t*kie),r=Pie*n,o=Aie*n;e.moveTo(0,-n),e.lineTo(r,o);for(let a=1;a<5;++a){const i=ip*a/5,s=U5(i),c=op(i);e.lineTo(c*n,-s*n),e.lineTo(s*r-c*o,c*r+s*o)}e.closePath()}},Tw=vr(3),Rie={draw(e,t){const n=-vr(t/(Tw*3));e.moveTo(0,n*2),e.lineTo(-Tw*n,-n),e.lineTo(Tw*n,-n),e.closePath()}},Wn=-.5,qn=vr(3)/2,Rw=1/vr(12),Iie=(Rw/2+1)*3,Die={draw(e,t){const n=vr(t/Iie),r=n/2,o=n*Rw,a=r,i=n*Rw+n,s=-a,c=i;e.moveTo(r,o),e.lineTo(a,i),e.lineTo(s,c),e.lineTo(Wn*r-qn*o,qn*r+Wn*o),e.lineTo(Wn*a-qn*i,qn*a+Wn*i),e.lineTo(Wn*s-qn*c,qn*s+Wn*c),e.lineTo(Wn*r+qn*o,Wn*o-qn*r),e.lineTo(Wn*a+qn*i,Wn*i-qn*a),e.lineTo(Wn*s+qn*c,Wn*c-qn*s),e.closePath()}};function Lie(e,t){let n=null,r=kw(o);e=typeof e=="function"?e:vt(e||Aw),t=typeof t=="function"?t:vt(t===void 0?64:+t);function o(){let a;if(n||(n=a=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),a)return n=null,a+""||null}return o.type=function(a){return arguments.length?(e=typeof a=="function"?a:vt(a),o):e},o.size=function(a){return arguments.length?(t=typeof a=="function"?a:vt(+a),o):t},o.context=function(a){return arguments.length?(n=a??null,o):n},o}function lp(){}function up(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function J5(e){this._context=e}J5.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:up(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:up(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Fie(e){return new J5(e)}function Z5(e){this._context=e}Z5.prototype={areaStart:lp,areaEnd:lp,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:up(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Bie(e){return new Z5(e)}function e4(e){this._context=e}e4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:up(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function $ie(e){return new e4(e)}function t4(e){this._context=e}t4.prototype={areaStart:lp,areaEnd:lp,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function zie(e){return new t4(e)}function n4(e){return e<0?-1:1}function r4(e,t,n){var r=e._x1-e._x0,o=t-e._x1,a=(e._y1-e._y0)/(r||o<0&&-0),i=(n-e._y1)/(o||r<0&&-0),s=(a*o+i*r)/(r+o);return(n4(a)+n4(i))*Math.min(Math.abs(a),Math.abs(i),.5*Math.abs(s))||0}function o4(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function Iw(e,t,n){var r=e._x0,o=e._y0,a=e._x1,i=e._y1,s=(a-r)/3;e._context.bezierCurveTo(r+s,o+s*t,a-s,i-s*n,a,i)}function dp(e){this._context=e}dp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Iw(this,this._t0,o4(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Iw(this,o4(this,n=r4(this,e,t)),n);break;default:Iw(this,this._t0,n=r4(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function a4(e){this._context=new i4(e)}(a4.prototype=Object.create(dp.prototype)).point=function(e,t){dp.prototype.point.call(this,t,e)};function i4(e){this._context=e}i4.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,o,a){this._context.bezierCurveTo(t,e,r,n,a,o)}};function Vie(e){return new dp(e)}function Uie(e){return new a4(e)}function s4(e){this._context=e}s4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=c4(e),o=c4(t),a=0,i=1;i<n;++a,++i)this._context.bezierCurveTo(r[0][a],o[0][a],r[1][a],o[1][a],e[i],t[i]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function c4(e){var t,n=e.length-1,r,o=new Array(n),a=new Array(n),i=new Array(n);for(o[0]=0,a[0]=2,i[0]=e[0]+2*e[1],t=1;t<n-1;++t)o[t]=1,a[t]=4,i[t]=4*e[t]+2*e[t+1];for(o[n-1]=2,a[n-1]=7,i[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=o[t]/a[t-1],a[t]-=r,i[t]-=r*i[t-1];for(o[n-1]=i[n-1]/a[n-1],t=n-2;t>=0;--t)o[t]=(i[t]-o[t+1])/a[t];for(a[n-1]=(e[n]+o[n-1])/2,t=0;t<n-1;++t)a[t]=2*e[t+1]-o[t+1];return[o,a]}function Hie(e){return new s4(e)}function fp(e,t){this._context=e,this._t=t}fp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function Wie(e){return new fp(e,.5)}function qie(e){return new fp(e,0)}function Yie(e){return new fp(e,1)}function is(e,t){if((i=e.length)>1)for(var n=1,r,o,a=e[t[0]],i,s=a.length;n<i;++n)for(o=a,a=e[t[n]],r=0;r<s;++r)a[r][1]+=a[r][0]=isNaN(o[r][1])?o[r][0]:o[r][1]}function Dw(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function Kie(e,t){return e[t]}function Xie(e){const t=[];return t.key=e,t}function Gie(){var e=vt([]),t=Dw,n=is,r=Kie;function o(a){var i=Array.from(e.apply(this,arguments),Xie),s,c=i.length,l=-1,u;for(const d of a)for(s=0,++l;s<c;++s)(i[s][l]=[0,+r(d,i[s].key,l,a)]).data=d;for(s=0,u=Pw(t(i));s<c;++s)i[u[s]].index=s;return n(i,u),i}return o.keys=function(a){return arguments.length?(e=typeof a=="function"?a:vt(Array.from(a)),o):e},o.value=function(a){return arguments.length?(r=typeof a=="function"?a:vt(+a),o):r},o.order=function(a){return arguments.length?(t=a==null?Dw:typeof a=="function"?a:vt(Array.from(a)),o):t},o.offset=function(a){return arguments.length?(n=a??is,o):n},o}function Qie(e,t){if((r=e.length)>0){for(var n,r,o=0,a=e[0].length,i;o<a;++o){for(i=n=0;n<r;++n)i+=e[n][o][1]||0;if(i)for(n=0;n<r;++n)e[n][o][1]/=i}is(e,t)}}function Jie(e,t){if((o=e.length)>0){for(var n=0,r=e[t[0]],o,a=r.length;n<a;++n){for(var i=0,s=0;i<o;++i)s+=e[i][n][1]||0;r[n][1]+=r[n][0]=-s/2}is(e,t)}}function Zie(e,t){if(!(!((i=e.length)>0)||!((a=(o=e[t[0]]).length)>0))){for(var n=0,r=1,o,a,i;r<a;++r){for(var s=0,c=0,l=0;s<i;++s){for(var u=e[t[s]],d=u[r][1]||0,f=u[r-1][1]||0,p=(d-f)/2,y=0;y<s;++y){var m=e[t[y]],v=m[r][1]||0,b=m[r-1][1]||0;p+=v-b}c+=d,l+=p*d}o[r-1][1]+=o[r-1][0]=n,c&&(n-=l/c)}o[r-1][1]+=o[r-1][0]=n,is(e,t)}}function Nl(e){"@babel/helpers - typeof";return Nl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nl(e)}var ese=["type","size","sizeType"];function Lw(){return Lw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Lw.apply(this,arguments)}function l4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function u4(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?l4(Object(n),!0).forEach(function(r){tse(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l4(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function tse(e,t,n){return t=nse(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nse(e){var t=rse(e,"string");return Nl(t)=="symbol"?t:t+""}function rse(e,t){if(Nl(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Nl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ose(e,t){if(e==null)return{};var n=ase(e,t),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function ase(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var d4={symbolCircle:Aw,symbolCross:Cie,symbolDiamond:Mie,symbolSquare:Nie,symbolStar:Tie,symbolTriangle:Rie,symbolWye:Die},ise=Math.PI/180,sse=function(e){var t="symbol".concat(rp(e));return d4[t]||Aw},cse=function(e,t,n){if(t==="area")return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var r=18*ise;return 1.25*e*e*(Math.tan(r)-Math.tan(r*2)*Math.pow(Math.tan(r),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},lse=function(e,t){d4["symbol".concat(rp(e))]=t},Fw=function(e){var t=e.type,n=t===void 0?"circle":t,r=e.size,o=r===void 0?64:r,a=e.sizeType,i=a===void 0?"area":a,s=ose(e,ese),c=u4(u4({},s),{},{type:n,size:o,sizeType:i}),l=function(){var y=sse(n),m=Lie().type(y).size(cse(o,i,n));return m()},u=c.className,d=c.cx,f=c.cy,p=nt(c,!0);return d===+d&&f===+f&&o===+o?V.createElement("path",Lw({},p,{className:st("recharts-symbols",u),transform:"translate(".concat(d,", ").concat(f,")"),d:l()})):null};Fw.registerSymbol=lse;function ss(e){"@babel/helpers - typeof";return ss=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ss(e)}function Bw(){return Bw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Bw.apply(this,arguments)}function f4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function use(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?f4(Object(n),!0).forEach(function(r){kl(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f4(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function dse(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fse(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,h4(r.key),r)}}function pse(e,t,n){return t&&fse(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function hse(e,t,n){return t=pp(t),mse(e,p4()?Reflect.construct(t,n||[],pp(e).constructor):t.apply(e,n))}function mse(e,t){if(t&&(ss(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return yse(e)}function yse(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p4(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(p4=function(){return!!e})()}function pp(e){return pp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},pp(e)}function gse(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$w(e,t)}function $w(e,t){return $w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},$w(e,t)}function kl(e,t,n){return t=h4(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h4(e){var t=vse(e,"string");return ss(t)=="symbol"?t:t+""}function vse(e,t){if(ss(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(ss(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Yn=32,zw=function(e){function t(){return dse(this,t),hse(this,t,arguments)}return gse(t,e),pse(t,[{key:"renderIcon",value:function(n){var r=this.props.inactiveColor,o=Yn/2,a=Yn/6,i=Yn/3,s=n.inactive?r:n.color;if(n.type==="plainline")return V.createElement("line",{strokeWidth:4,fill:"none",stroke:s,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:o,x2:Yn,y2:o,className:"recharts-legend-icon"});if(n.type==="line")return V.createElement("path",{strokeWidth:4,fill:"none",stroke:s,d:"M0,".concat(o,"h").concat(i,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(2*i,",").concat(o,`
            H`).concat(Yn,"M").concat(2*i,",").concat(o,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(i,",").concat(o),className:"recharts-legend-icon"});if(n.type==="rect")return V.createElement("path",{stroke:"none",fill:s,d:"M0,".concat(Yn/8,"h").concat(Yn,"v").concat(Yn*3/4,"h").concat(-Yn,"z"),className:"recharts-legend-icon"});if(V.isValidElement(n.legendIcon)){var c=use({},n);return delete c.legendIcon,V.cloneElement(n.legendIcon,c)}return V.createElement(Fw,{fill:s,cx:o,cy:o,size:Yn,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,r=this.props,o=r.payload,a=r.iconSize,i=r.layout,s=r.formatter,c=r.inactiveColor,l={x:0,y:0,width:Yn,height:Yn},u={display:i==="horizontal"?"inline-block":"block",marginRight:10},d={display:"inline-block",verticalAlign:"middle",marginRight:4};return o.map(function(f,p){var y=f.formatter||s,m=st(kl(kl({"recharts-legend-item":!0},"legend-item-".concat(p),!0),"inactive",f.inactive));if(f.type==="none")return null;var v=We(f.value)?null:f.value;jo(!We(f.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var b=f.inactive?c:f.color;return V.createElement("li",Bw({className:m,style:u,key:"legend-item-".concat(p)},np(n.props,f,p)),V.createElement(vw,{width:a,height:a,viewBox:l,style:d},n.renderIcon(f)),V.createElement("span",{className:"recharts-legend-item-text",style:{color:b}},y?y(v,f,p):v))})}},{key:"render",value:function(){var n=this.props,r=n.payload,o=n.layout,a=n.align;if(!r||!r.length)return null;var i={padding:0,margin:0,textAlign:o==="horizontal"?a:"left"};return V.createElement("ul",{className:"recharts-default-legend",style:i},this.renderItems())}}])}(g.PureComponent);kl(zw,"displayName","Legend"),kl(zw,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var Vw,m4;function y4(){if(m4)return Vw;m4=1;function e(t,n,r,o){for(var a=t.length,i=r+(o?1:-1);o?i--:++i<a;)if(n(t[i],i,t))return i;return-1}return Vw=e,Vw}var Uw,g4;function bse(){if(g4)return Uw;g4=1;function e(t){return t!==t}return Uw=e,Uw}var Hw,v4;function xse(){if(v4)return Hw;v4=1;function e(t,n,r){for(var o=r-1,a=t.length;++o<a;)if(t[o]===n)return o;return-1}return Hw=e,Hw}var Ww,b4;function wse(){if(b4)return Ww;b4=1;var e=y4(),t=bse(),n=xse();function r(o,a,i){return a===a?n(o,a,i):e(o,t,i)}return Ww=r,Ww}var qw,x4;function _se(){if(x4)return qw;x4=1;var e=wse();function t(n,r){var o=n==null?0:n.length;return!!o&&e(n,r,0)>-1}return qw=t,qw}var Yw,w4;function jse(){if(w4)return Yw;w4=1;function e(t,n,r){for(var o=-1,a=t==null?0:t.length;++o<a;)if(r(n,t[o]))return!0;return!1}return Yw=e,Yw}var Kw,_4;function Ese(){if(_4)return Kw;_4=1;function e(){}return Kw=e,Kw}var Xw,j4;function Sse(){if(j4)return Xw;j4=1;var e=aP(),t=Ese(),n=kv(),r=1/0,o=e&&1/n(new e([,-0]))[1]==r?function(a){return new e(a)}:t;return Xw=o,Xw}var Gw,E4;function Cse(){if(E4)return Gw;E4=1;var e=hk(),t=_se(),n=jse(),r=vk(),o=Sse(),a=kv(),i=200;function s(c,l,u){var d=-1,f=t,p=c.length,y=!0,m=[],v=m;if(u)y=!1,f=n;else if(p>=i){var b=l?null:o(c);if(b)return a(b);y=!1,f=r,v=new e}else v=l?[]:m;e:for(;++d<p;){var x=c[d],_=l?l(x):x;if(x=u||x!==0?x:0,y&&_===_){for(var w=v.length;w--;)if(v[w]===_)continue e;l&&v.push(_),m.push(x)}else f(v,_,u)||(v!==m&&v.push(_),m.push(x))}return m}return Gw=s,Gw}var Qw,S4;function Ose(){if(S4)return Qw;S4=1;var e=Nr(),t=Cse();function n(r,o){return r&&r.length?t(r,e(o,2)):[]}return Qw=n,Qw}var Mse=Ose();const C4=Xe(Mse);function O4(e,t,n){return t===!0?C4(e,n):We(t)?C4(e,t):e}function cs(e){"@babel/helpers - typeof";return cs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cs(e)}var Nse=["ref"];function M4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Eo(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?M4(Object(n),!0).forEach(function(r){mp(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M4(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function kse(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function N4(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,P4(r.key),r)}}function Pse(e,t,n){return t&&N4(e.prototype,t),n&&N4(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ase(e,t,n){return t=hp(t),Tse(e,k4()?Reflect.construct(t,n||[],hp(e).constructor):t.apply(e,n))}function Tse(e,t){if(t&&(cs(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Rse(e)}function Rse(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k4(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(k4=function(){return!!e})()}function hp(e){return hp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},hp(e)}function Ise(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Jw(e,t)}function Jw(e,t){return Jw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Jw(e,t)}function mp(e,t,n){return t=P4(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function P4(e){var t=Dse(e,"string");return cs(t)=="symbol"?t:t+""}function Dse(e,t){if(cs(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(cs(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Lse(e,t){if(e==null)return{};var n=Fse(e,t),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Fse(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Bse(e){return e.value}function $se(e,t){if(V.isValidElement(e))return V.cloneElement(e,t);if(typeof e=="function")return V.createElement(e,t);t.ref;var n=Lse(t,Nse);return V.createElement(zw,n)}var A4=1,ls=function(e){function t(){var n;kse(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return n=Ase(this,t,[].concat(o)),mp(n,"lastBoundingBox",{width:-1,height:-1}),n}return Ise(t,e),Pse(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,r=this.getBBox();r?(Math.abs(r.width-this.lastBoundingBox.width)>A4||Math.abs(r.height-this.lastBoundingBox.height)>A4)&&(this.lastBoundingBox.width=r.width,this.lastBoundingBox.height=r.height,n&&n(r)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Eo({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var r=this.props,o=r.layout,a=r.align,i=r.verticalAlign,s=r.margin,c=r.chartWidth,l=r.chartHeight,u,d;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(a==="center"&&o==="vertical"){var f=this.getBBoxSnapshot();u={left:((c||0)-f.width)/2}}else u=a==="right"?{right:s&&s.right||0}:{left:s&&s.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(i==="middle"){var p=this.getBBoxSnapshot();d={top:((l||0)-p.height)/2}}else d=i==="bottom"?{bottom:s&&s.bottom||0}:{top:s&&s.top||0};return Eo(Eo({},u),d)}},{key:"render",value:function(){var n=this,r=this.props,o=r.content,a=r.width,i=r.height,s=r.wrapperStyle,c=r.payloadUniqBy,l=r.payload,u=Eo(Eo({position:"absolute",width:a||"auto",height:i||"auto"},this.getDefaultPosition(s)),s);return V.createElement("div",{className:"recharts-legend-wrapper",style:u,ref:function(d){n.wrapperNode=d}},$se(o,Eo(Eo({},this.props),{},{payload:O4(l,c,Bse)})))}}],[{key:"getWithHeight",value:function(n,r){var o=Eo(Eo({},this.defaultProps),n.props),a=o.layout;return a==="vertical"&&me(n.props.height)?{height:n.props.height}:a==="horizontal"?{width:n.props.width||r}:null}}])}(g.PureComponent);mp(ls,"displayName","Legend"),mp(ls,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var Zw,T4;function zse(){if(T4)return Zw;T4=1;var e=ai(),t=Ru(),n=cn(),r=e?e.isConcatSpreadable:void 0;function o(a){return n(a)||t(a)||!!(r&&a&&a[r])}return Zw=o,Zw}var e1,R4;Fh=function(){if(R4)return e1;R4=1;var e=Tv(),t=zse();function n(r,o,a,i,s){var c=-1,l=r.length;for(a||(a=t),s||(s=[]);++c<l;){var u=r[c];o>0&&a(u)?o>1?n(u,o-1,a,i,s):e(s,u):i||(s[s.length]=u)}return s}return e1=n,e1};var t1,I4;function Vse(){if(I4)return t1;I4=1;function e(t){return function(n,r,o){for(var a=-1,i=Object(n),s=o(n),c=s.length;c--;){var l=s[t?c:++a];if(r(i[l],l,i)===!1)break}return n}}return t1=e,t1}var n1,D4;_E=function(){if(D4)return n1;D4=1;var e=Vse(),t=e();return n1=t,n1};var r1,L4;function F4(){if(L4)return r1;L4=1;var e=_E(),t=Zs();function n(r,o){return r&&e(r,o,t)}return r1=n,r1}var o1,B4;function Use(){if(B4)return o1;B4=1;var e=da();function t(n,r){return function(o,a){if(o==null)return o;if(!e(o))return n(o,a);for(var i=o.length,s=r?i:-1,c=Object(o);(r?s--:++s<i)&&a(c[s],s,c)!==!1;);return o}}return o1=t,o1}var a1,$4;function i1(){if($4)return a1;$4=1;var e=F4(),t=Use(),n=t(e);return a1=n,a1}var s1,z4;function V4(){if(z4)return s1;z4=1;var e=i1(),t=da();function n(r,o){var a=-1,i=t(r)?Array(r.length):[];return e(r,function(s,c,l){i[++a]=o(s,c,l)}),i}return s1=n,s1}var c1,U4;function Hse(){if(U4)return c1;U4=1;function e(t,n){var r=t.length;for(t.sort(n);r--;)t[r]=t[r].value;return t}return c1=e,c1}var l1,H4;function Wse(){if(H4)return l1;H4=1;var e=ki();function t(n,r){if(n!==r){var o=n!==void 0,a=n===null,i=n===n,s=e(n),c=r!==void 0,l=r===null,u=r===r,d=e(r);if(!l&&!d&&!s&&n>r||s&&c&&u&&!l&&!d||a&&c&&u||!o&&u||!i)return 1;if(!a&&!s&&!d&&n<r||d&&o&&i&&!a&&!s||l&&o&&i||!c&&i||!u)return-1}return 0}return l1=t,l1}var u1,W4;function qse(){if(W4)return u1;W4=1;var e=Wse();function t(n,r,o){for(var a=-1,i=n.criteria,s=r.criteria,c=i.length,l=o.length;++a<c;){var u=e(i[a],s[a]);if(u){if(a>=l)return u;var d=o[a];return u*(d=="desc"?-1:1)}}return n.index-r.index}return u1=t,u1}var d1,q4;function Yse(){if(q4)return d1;q4=1;var e=Ys(),t=tc(),n=Nr(),r=V4(),o=Hse(),a=Tm(),i=qse(),s=Pi(),c=cn();function l(u,d,f){d.length?d=e(d,function(m){return c(m)?function(v){return t(v,m.length===1?m[0]:m)}:m}):d=[s];var p=-1;d=e(d,a(n));var y=r(u,function(m,v,b){var x=e(d,function(_){return _(m)});return{criteria:x,index:++p,value:m}});return o(y,function(m,v){return i(m,v,f)})}return d1=l,d1}var f1,Y4;kE=function(){if(Y4)return f1;Y4=1;function e(t,n,r){switch(r.length){case 0:return t.call(n);case 1:return t.call(n,r[0]);case 2:return t.call(n,r[0],r[1]);case 3:return t.call(n,r[0],r[1],r[2])}return t.apply(n,r)}return f1=e,f1};var p1,K4;wE=function(){if(K4)return p1;K4=1;var e=kE(),t=Math.max;function n(r,o,a){return o=t(o===void 0?r.length-1:o,0),function(){for(var i=arguments,s=-1,c=t(i.length-o,0),l=Array(c);++s<c;)l[s]=i[o+s];s=-1;for(var u=Array(o+1);++s<o;)u[s]=i[s];return u[o]=a(l),e(r,this,u)}}return p1=n,p1};var h1,X4;function Kse(){if(X4)return h1;X4=1;function e(t){return function(){return t}}return h1=e,h1}var m1,G4;function Xse(){if(G4)return m1;G4=1;var e=Kse(),t=UP(),n=Pi(),r=t?function(o,a){return t(o,"toString",{configurable:!0,enumerable:!1,value:e(a),writable:!0})}:n;return m1=r,m1}var y1,Q4;function Gse(){if(Q4)return y1;Q4=1;var e=800,t=16,n=Date.now;function r(o){var a=0,i=0;return function(){var s=n(),c=t-(s-i);if(i=s,c>0){if(++a>=e)return arguments[0]}else a=0;return o.apply(void 0,arguments)}}return y1=r,y1}var g1,J4;xE=function(){if(J4)return g1;J4=1;var e=Xse(),t=Gse(),n=t(e);return g1=n,g1};var v1,Z4;jE=function(){if(Z4)return v1;Z4=1;var e=Pi(),t=wE(),n=xE();function r(o,a){return n(t(o,a,e),o+"")}return v1=r,v1};var b1,eL;ti=function(){if(eL)return b1;eL=1;var e=Ks(),t=da(),n=Yd(),r=tr();function o(a,i,s){if(!r(s))return!1;var c=typeof i;return(c=="number"?t(s)&&n(i,s.length):c=="string"&&i in s)?e(s[i],a):!1}return b1=o,b1};var x1,tL;function Qse(){if(tL)return x1;tL=1;var e=Fh(),t=Yse(),n=jE(),r=ti(),o=n(function(a,i){if(a==null)return[];var s=i.length;return s>1&&r(a,i[0],i[1])?i=[]:s>2&&r(i[0],i[1],i[2])&&(i=[i[0]]),t(a,e(i,1),[])});return x1=o,x1}var Jse=Qse();const w1=Xe(Jse);function Pl(e){"@babel/helpers - typeof";return Pl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pl(e)}function _1(){return _1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_1.apply(this,arguments)}function Zse(e,t){return rce(e)||nce(e,t)||tce(e,t)||ece()}function ece(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tce(e,t){if(e){if(typeof e=="string")return nL(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nL(e,t)}}function nL(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function nce(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,o,a,i,s=[],c=!0,l=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(c=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(u){l=!0,o=u}finally{try{if(!c&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return s}}function rce(e){if(Array.isArray(e))return e}function rL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function j1(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?rL(Object(n),!0).forEach(function(r){oce(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rL(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function oce(e,t,n){return t=ace(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ace(e){var t=ice(e,"string");return Pl(t)=="symbol"?t:t+""}function ice(e,t){if(Pl(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Pl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function sce(e){return Array.isArray(e)&&Bt(e[0])&&Bt(e[1])?e.join(" ~ "):e}var cce=function(e){var t=e.separator,n=t===void 0?" : ":t,r=e.contentStyle,o=r===void 0?{}:r,a=e.itemStyle,i=a===void 0?{}:a,s=e.labelStyle,c=s===void 0?{}:s,l=e.payload,u=e.formatter,d=e.itemSorter,f=e.wrapperClassName,p=e.labelClassName,y=e.label,m=e.labelFormatter,v=e.accessibilityLayer,b=v===void 0?!1:v,x=function(){if(l&&l.length){var P={padding:0,margin:0},k=(d?w1(l,d):l).map(function(R,A){if(R.type==="none")return null;var C=j1({display:"block",paddingTop:4,paddingBottom:4,color:R.color||"#000"},i),M=R.formatter||u||sce,T=R.value,I=R.name,L=T,D=I;if(M&&L!=null&&D!=null){var $=M(T,I,R,A,l);if(Array.isArray($)){var U=Zse($,2);L=U[0],D=U[1]}else L=$}return V.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(A),style:C},Bt(D)?V.createElement("span",{className:"recharts-tooltip-item-name"},D):null,Bt(D)?V.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,V.createElement("span",{className:"recharts-tooltip-item-value"},L),V.createElement("span",{className:"recharts-tooltip-item-unit"},R.unit||""))});return V.createElement("ul",{className:"recharts-tooltip-item-list",style:P},k)}return null},_=j1({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},o),w=j1({margin:0},c),j=!rt(y),E=j?y:"",S=st("recharts-default-tooltip",f),O=st("recharts-tooltip-label",p);j&&m&&l!==void 0&&l!==null&&(E=m(y,l));var N=b?{role:"status","aria-live":"assertive"}:{};return V.createElement("div",_1({className:S,style:_},N),V.createElement("p",{className:O,style:w},V.isValidElement(E)?E:"".concat(E)),x())};function Al(e){"@babel/helpers - typeof";return Al=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Al(e)}function yp(e,t,n){return t=lce(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lce(e){var t=uce(e,"string");return Al(t)=="symbol"?t:t+""}function uce(e,t){if(Al(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Al(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Tl="recharts-tooltip-wrapper",dce={visibility:"hidden"};function fce(e){var t=e.coordinate,n=e.translateX,r=e.translateY;return st(Tl,yp(yp(yp(yp({},"".concat(Tl,"-right"),me(n)&&t&&me(t.x)&&n>=t.x),"".concat(Tl,"-left"),me(n)&&t&&me(t.x)&&n<t.x),"".concat(Tl,"-bottom"),me(r)&&t&&me(t.y)&&r>=t.y),"".concat(Tl,"-top"),me(r)&&t&&me(t.y)&&r<t.y))}function oL(e){var t=e.allowEscapeViewBox,n=e.coordinate,r=e.key,o=e.offsetTopLeft,a=e.position,i=e.reverseDirection,s=e.tooltipDimension,c=e.viewBox,l=e.viewBoxDimension;if(a&&me(a[r]))return a[r];var u=n[r]-s-o,d=n[r]+o;if(t[r])return i[r]?u:d;if(i[r]){var f=u,p=c[r];return f<p?Math.max(d,c[r]):Math.max(u,c[r])}var y=d+s,m=c[r]+l;return y>m?Math.max(u,c[r]):Math.max(d,c[r])}function pce(e){var t=e.translateX,n=e.translateY,r=e.useTranslate3d;return{transform:r?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}function hce(e){var t=e.allowEscapeViewBox,n=e.coordinate,r=e.offsetTopLeft,o=e.position,a=e.reverseDirection,i=e.tooltipBox,s=e.useTranslate3d,c=e.viewBox,l,u,d;return i.height>0&&i.width>0&&n?(u=oL({allowEscapeViewBox:t,coordinate:n,key:"x",offsetTopLeft:r,position:o,reverseDirection:a,tooltipDimension:i.width,viewBox:c,viewBoxDimension:c.width}),d=oL({allowEscapeViewBox:t,coordinate:n,key:"y",offsetTopLeft:r,position:o,reverseDirection:a,tooltipDimension:i.height,viewBox:c,viewBoxDimension:c.height}),l=pce({translateX:u,translateY:d,useTranslate3d:s})):l=dce,{cssProperties:l,cssClasses:fce({translateX:u,translateY:d,coordinate:n})}}function us(e){"@babel/helpers - typeof";return us=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},us(e)}function aL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function iL(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?aL(Object(n),!0).forEach(function(r){S1(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aL(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function mce(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yce(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,cL(r.key),r)}}function gce(e,t,n){return t&&yce(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function vce(e,t,n){return t=gp(t),bce(e,sL()?Reflect.construct(t,n||[],gp(e).constructor):t.apply(e,n))}function bce(e,t){if(t&&(us(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xce(e)}function xce(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(sL=function(){return!!e})()}function gp(e){return gp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},gp(e)}function wce(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&E1(e,t)}function E1(e,t){return E1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},E1(e,t)}function S1(e,t,n){return t=cL(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cL(e){var t=_ce(e,"string");return us(t)=="symbol"?t:t+""}function _ce(e,t){if(us(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(us(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var lL=1,jce=function(e){function t(){var n;mce(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return n=vce(this,t,[].concat(o)),S1(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),S1(n,"handleKeyDown",function(i){if(i.key==="Escape"){var s,c,l,u;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(s=(c=n.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&s!==void 0?s:0,y:(l=(u=n.props.coordinate)===null||u===void 0?void 0:u.y)!==null&&l!==void 0?l:0}})}}),n}return wce(t,e),gce(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>lL||Math.abs(n.height-this.state.lastBoundingBox.height)>lL)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,r;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,r=this.props,o=r.active,a=r.allowEscapeViewBox,i=r.animationDuration,s=r.animationEasing,c=r.children,l=r.coordinate,u=r.hasPayload,d=r.isAnimationActive,f=r.offset,p=r.position,y=r.reverseDirection,m=r.useTranslate3d,v=r.viewBox,b=r.wrapperStyle,x=hce({allowEscapeViewBox:a,coordinate:l,offsetTopLeft:f,position:p,reverseDirection:y,tooltipBox:this.state.lastBoundingBox,useTranslate3d:m,viewBox:v}),_=x.cssClasses,w=x.cssProperties,j=iL(iL({transition:d&&o?"transform ".concat(i,"ms ").concat(s):void 0},w),{},{pointerEvents:"none",visibility:!this.state.dismissed&&o&&u?"visible":"hidden",position:"absolute",top:0,left:0},b);return V.createElement("div",{tabIndex:-1,className:_,style:j,ref:function(E){n.wrapperNode=E}},c)}}])}(g.PureComponent),Ece=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},ta={isSsr:Ece(),get:function(e){return ta[e]},set:function(e,t){if(typeof e=="string")ta[e]=t;else{var n=Object.keys(e);n&&n.length&&n.forEach(function(r){ta[r]=e[r]})}}};function ds(e){"@babel/helpers - typeof";return ds=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ds(e)}function uL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function dL(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?uL(Object(n),!0).forEach(function(r){O1(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uL(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Sce(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Cce(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,pL(r.key),r)}}function Oce(e,t,n){return t&&Cce(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Mce(e,t,n){return t=vp(t),Nce(e,fL()?Reflect.construct(t,n||[],vp(e).constructor):t.apply(e,n))}function Nce(e,t){if(t&&(ds(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kce(e)}function kce(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(fL=function(){return!!e})()}function vp(e){return vp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},vp(e)}function Pce(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&C1(e,t)}function C1(e,t){return C1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},C1(e,t)}function O1(e,t,n){return t=pL(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pL(e){var t=Ace(e,"string");return ds(t)=="symbol"?t:t+""}function Ace(e,t){if(ds(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(ds(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Tce(e){return e.dataKey}function Rce(e,t){return V.isValidElement(e)?V.cloneElement(e,t):typeof e=="function"?V.createElement(e,t):V.createElement(cce,t)}var Dr=function(e){function t(){return Sce(this,t),Mce(this,t,arguments)}return Pce(t,e),Oce(t,[{key:"render",value:function(){var n=this,r=this.props,o=r.active,a=r.allowEscapeViewBox,i=r.animationDuration,s=r.animationEasing,c=r.content,l=r.coordinate,u=r.filterNull,d=r.isAnimationActive,f=r.offset,p=r.payload,y=r.payloadUniqBy,m=r.position,v=r.reverseDirection,b=r.useTranslate3d,x=r.viewBox,_=r.wrapperStyle,w=p??[];u&&w.length&&(w=O4(p.filter(function(E){return E.value!=null&&(E.hide!==!0||n.props.includeHidden)}),y,Tce));var j=w.length>0;return V.createElement(jce,{allowEscapeViewBox:a,animationDuration:i,animationEasing:s,isAnimationActive:d,active:o,coordinate:l,hasPayload:j,offset:f,position:m,reverseDirection:v,useTranslate3d:b,viewBox:x,wrapperStyle:_},Rce(c,dL(dL({},this.props),{},{payload:w})))}}])}(g.PureComponent);O1(Dr,"displayName","Tooltip"),O1(Dr,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!ta.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var M1,hL;function Ice(){if(hL)return M1;hL=1;var e=er(),t=function(){return e.Date.now()};return M1=t,M1}var N1,mL;function Dce(){if(mL)return N1;mL=1;var e=/\s/;function t(n){for(var r=n.length;r--&&e.test(n.charAt(r)););return r}return N1=t,N1}var k1,yL;function Lce(){if(yL)return k1;yL=1;var e=Dce(),t=/^\s+/;function n(r){return r&&r.slice(0,e(r)+1).replace(t,"")}return k1=n,k1}var P1,gL;function vL(){if(gL)return P1;gL=1;var e=Lce(),t=tr(),n=ki(),r=NaN,o=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,i=/^0o[0-7]+$/i,s=parseInt;function c(l){if(typeof l=="number")return l;if(n(l))return r;if(t(l)){var u=typeof l.valueOf=="function"?l.valueOf():l;l=t(u)?u+"":u}if(typeof l!="string")return l===0?l:+l;l=e(l);var d=a.test(l);return d||i.test(l)?s(l.slice(2),d?2:8):o.test(l)?r:+l}return P1=c,P1}var A1,bL;OE=function(){if(bL)return A1;bL=1;var e=tr(),t=Ice(),n=vL(),r="Expected a function",o=Math.max,a=Math.min;function i(s,c,l){var u,d,f,p,y,m,v=0,b=!1,x=!1,_=!0;if(typeof s!="function")throw new TypeError(r);c=n(c)||0,e(l)&&(b=!!l.leading,x="maxWait"in l,f=x?o(n(l.maxWait)||0,c):f,_="trailing"in l?!!l.trailing:_);function w(A){var C=u,M=d;return u=d=void 0,v=A,p=s.apply(M,C),p}function j(A){return v=A,y=setTimeout(O,c),b?w(A):p}function E(A){var C=A-m,M=A-v,T=c-C;return x?a(T,f-M):T}function S(A){var C=A-m,M=A-v;return m===void 0||C>=c||C<0||x&&M>=f}function O(){var A=t();if(S(A))return N(A);y=setTimeout(O,E(A))}function N(A){return y=void 0,_&&u?w(A):(u=d=void 0,p)}function P(){y!==void 0&&clearTimeout(y),v=0,u=m=d=y=void 0}function k(){return y===void 0?p:N(t())}function R(){var A=t(),C=S(A);if(u=arguments,d=this,m=A,C){if(y===void 0)return j(m);if(x)return clearTimeout(y),y=setTimeout(O,c),w(m)}return y===void 0&&(y=setTimeout(O,c)),p}return R.cancel=P,R.flush=k,R}return A1=i,A1};var T1,xL;function Fce(){if(xL)return T1;xL=1;var e=OE(),t=tr(),n="Expected a function";function r(o,a,i){var s=!0,c=!0;if(typeof o!="function")throw new TypeError(n);return t(i)&&(s="leading"in i?!!i.leading:s,c="trailing"in i?!!i.trailing:c),e(o,a,{leading:s,maxWait:a,trailing:c})}return T1=r,T1}var Bce=Fce();$h=Xe(Bce);function Rl(e){"@babel/helpers - typeof";return Rl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rl(e)}function wL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function bp(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?wL(Object(n),!0).forEach(function(r){$ce(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wL(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function $ce(e,t,n){return t=zce(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zce(e){var t=Vce(e,"string");return Rl(t)=="symbol"?t:t+""}function Vce(e,t){if(Rl(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Rl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Uce(e,t){return Yce(e)||qce(e,t)||Wce(e,t)||Hce()}function Hce(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Wce(e,t){if(e){if(typeof e=="string")return _L(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _L(e,t)}}function _L(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function qce(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,o,a,i,s=[],c=!0,l=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(c=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(u){l=!0,o=u}finally{try{if(!c&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return s}}function Yce(e){if(Array.isArray(e))return e}var Kce=g.forwardRef(function(e,t){var n=e.aspect,r=e.initialDimension,o=r===void 0?{width:-1,height:-1}:r,a=e.width,i=a===void 0?"100%":a,s=e.height,c=s===void 0?"100%":s,l=e.minWidth,u=l===void 0?0:l,d=e.minHeight,f=e.maxHeight,p=e.children,y=e.debounce,m=y===void 0?0:y,v=e.id,b=e.className,x=e.onResize,_=e.style,w=_===void 0?{}:_,j=g.useRef(null),E=g.useRef();E.current=x,g.useImperativeHandle(t,function(){return Object.defineProperty(j.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),j.current},configurable:!0})});var S=g.useState({containerWidth:o.width,containerHeight:o.height}),O=Uce(S,2),N=O[0],P=O[1],k=g.useCallback(function(A,C){P(function(M){var T=Math.round(A),I=Math.round(C);return M.containerWidth===T&&M.containerHeight===I?M:{containerWidth:T,containerHeight:I}})},[]);g.useEffect(function(){var A=function(L){var D,$=L[0].contentRect,U=$.width,F=$.height;k(U,F),(D=E.current)===null||D===void 0||D.call(E,U,F)};m>0&&(A=$h(A,m,{trailing:!0,leading:!1}));var C=new ResizeObserver(A),M=j.current.getBoundingClientRect(),T=M.width,I=M.height;return k(T,I),C.observe(j.current),function(){C.disconnect()}},[k,m]);var R=g.useMemo(function(){var A=N.containerWidth,C=N.containerHeight;if(A<0||C<0)return null;jo(Ia(i)||Ia(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,i,c),jo(!n||n>0,"The aspect(%s) must be greater than zero.",n);var M=Ia(i)?A:i,T=Ia(c)?C:c;n&&n>0&&(M?T=M/n:T&&(M=T*n),f&&T>f&&(T=f)),jo(M>0||T>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,M,T,i,c,u,d,n);var I=!Array.isArray(p)&&_o(p.type).endsWith("Chart");return V.Children.map(p,function(L){return V.isValidElement(L)?g.cloneElement(L,bp({width:M,height:T},I?{style:bp({height:"100%",width:"100%",maxHeight:T,maxWidth:M},L.props.style)}:{})):L})},[n,p,c,f,d,u,N,i]);return V.createElement("div",{id:v?"".concat(v):void 0,className:st("recharts-responsive-container",b),style:bp(bp({},w),{},{width:i,height:c,minWidth:u,minHeight:d,maxHeight:f}),ref:j},R)}),jL=function(e){return null};jL.displayName="Cell";function Il(e){"@babel/helpers - typeof";return Il=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Il(e)}function EL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function R1(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?EL(Object(n),!0).forEach(function(r){Xce(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):EL(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Xce(e,t,n){return t=Gce(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Gce(e){var t=Qce(e,"string");return Il(t)=="symbol"?t:t+""}function Qce(e,t){if(Il(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Il(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var fs={widthCache:{},cacheCount:0},Jce=2e3,Zce={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},SL="recharts_measurement_span";function ele(e){var t=R1({},e);return Object.keys(t).forEach(function(n){t[n]||delete t[n]}),t}var Dl=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||ta.isSsr)return{width:0,height:0};var n=ele(t),r=JSON.stringify({text:e,copyStyle:n});if(fs.widthCache[r])return fs.widthCache[r];try{var o=document.getElementById(SL);o||(o=document.createElement("span"),o.setAttribute("id",SL),o.setAttribute("aria-hidden","true"),document.body.appendChild(o));var a=R1(R1({},Zce),n);Object.assign(o.style,a),o.textContent="".concat(e);var i=o.getBoundingClientRect(),s={width:i.width,height:i.height};return fs.widthCache[r]=s,++fs.cacheCount>Jce&&(fs.cacheCount=0,fs.widthCache={}),s}catch{return{width:0,height:0}}},tle=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function Ll(e){"@babel/helpers - typeof";return Ll=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ll(e)}function xp(e,t){return ale(e)||ole(e,t)||rle(e,t)||nle()}function nle(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rle(e,t){if(e){if(typeof e=="string")return CL(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return CL(e,t)}}function CL(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ole(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,o,a,i,s=[],c=!0,l=!1;try{if(a=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(u){l=!0,o=u}finally{try{if(!c&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return s}}function ale(e){if(Array.isArray(e))return e}function ile(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function OL(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,cle(r.key),r)}}function sle(e,t,n){return t&&OL(e.prototype,t),n&&OL(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function cle(e){var t=lle(e,"string");return Ll(t)=="symbol"?t:t+""}function lle(e,t){if(Ll(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Ll(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var ML=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,NL=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,ule=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,dle=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,kL={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},fle=Object.keys(kL),ps="NaN";function ple(e,t){return e*kL[t]}var wp=function(){function e(t,n){ile(this,e),this.num=t,this.unit=n,this.num=t,this.unit=n,Number.isNaN(t)&&(this.unit=""),n!==""&&!ule.test(n)&&(this.num=NaN,this.unit=""),fle.includes(n)&&(this.num=ple(t,n),this.unit="px")}return sle(e,[{key:"add",value:function(t){return this.unit!==t.unit?new e(NaN,""):new e(this.num+t.num,this.unit)}},{key:"subtract",value:function(t){return this.unit!==t.unit?new e(NaN,""):new e(this.num-t.num,this.unit)}},{key:"multiply",value:function(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new e(NaN,""):new e(this.num*t.num,this.unit||t.unit)}},{key:"divide",value:function(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new e(NaN,""):new e(this.num/t.num,this.unit||t.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(t){var n,r=(n=dle.exec(t))!==null&&n!==void 0?n:[],o=xp(r,3),a=o[1],i=o[2];return new e(parseFloat(a),i??"")}}])}();function PL(e){if(e.includes(ps))return ps;for(var t=e;t.includes("*")||t.includes("/");){var n,r=(n=ML.exec(t))!==null&&n!==void 0?n:[],o=xp(r,4),a=o[1],i=o[2],s=o[3],c=wp.parse(a??""),l=wp.parse(s??""),u=i==="*"?c.multiply(l):c.divide(l);if(u.isNaN())return ps;t=t.replace(ML,u.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var d,f=(d=NL.exec(t))!==null&&d!==void 0?d:[],p=xp(f,4),y=p[1],m=p[2],v=p[3],b=wp.parse(y??""),x=wp.parse(v??""),_=m==="+"?b.add(x):b.subtract(x);if(_.isNaN())return ps;t=t.replace(NL,_.toString())}return t}var AL=/\(([^()]*)\)/;function hle(e){for(var t=e;t.includes("(");){var n=AL.exec(t),r=xp(n,2),o=r[1];t=t.replace(AL,PL(o))}return t}function mle(e){var t=e.replace(/\s+/g,"");return t=hle(t),t=PL(t),t}function yle(e){try{return mle(e)}catch{return ps}}function I1(e){var t=yle(e.slice(5,-1));return t===ps?"":t}var gle=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],vle=["dx","dy","angle","className","breakAll"];function D1(){return D1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},D1.apply(this,arguments)}function TL(e,t){if(e==null)return{};var n=ble(e,t),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function ble(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function RL(e,t){return jle(e)||_le(e,t)||wle(e,t)||xle()}function xle(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wle(e,t){if(e){if(typeof e=="string")return IL(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return IL(e,t)}}function IL(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _le(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,o,a,i,s=[],c=!0,l=!1;try{if(a=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(u){l=!0,o=u}finally{try{if(!c&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return s}}function jle(e){if(Array.isArray(e))return e}var DL=/[ \f\n\r\t\v\u2028\u2029]+/,LL=function(e){var t=e.children,n=e.breakAll,r=e.style;try{var o=[];rt(t)||(n?o=t.toString().split(""):o=t.toString().split(DL));var a=o.map(function(s){return{word:s,width:Dl(s,r).width}}),i=n?0:Dl("\xA0",r).width;return{wordsWithComputedWidth:a,spaceWidth:i}}catch{return null}},Ele=function(e,t,n,r,o){var a=e.maxLines,i=e.children,s=e.style,c=e.breakAll,l=me(a),u=i,d=function(){var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return A.reduce(function(C,M){var T=M.word,I=M.width,L=C[C.length-1];if(L&&(r==null||o||L.width+I+n<Number(r)))L.words.push(T),L.width+=I+n;else{var D={words:[T],width:I};C.push(D)}return C},[])},f=d(t),p=function(A){return A.reduce(function(C,M){return C.width>M.width?C:M})};if(!l)return f;for(var y="\u2026",m=function(A){var C=u.slice(0,A),M=LL({breakAll:c,style:s,children:C+y}).wordsWithComputedWidth,T=d(M),I=T.length>a||p(T).width>Number(r);return[I,T]},v=0,b=u.length-1,x=0,_;v<=b&&x<=u.length-1;){var w=Math.floor((v+b)/2),j=w-1,E=m(j),S=RL(E,2),O=S[0],N=S[1],P=m(w),k=RL(P,1),R=k[0];if(!O&&!R&&(v=w+1),O&&R&&(b=w-1),!O&&R){_=N;break}x++}return _||f},FL=function(e){var t=rt(e)?[]:e.toString().split(DL);return[{words:t}]},Sle=function(e){var t=e.width,n=e.scaleToFit,r=e.children,o=e.style,a=e.breakAll,i=e.maxLines;if((t||n)&&!ta.isSsr){var s,c,l=LL({breakAll:a,children:r,style:o});if(l){var u=l.wordsWithComputedWidth,d=l.spaceWidth;s=u,c=d}else return FL(r);return Ele({breakAll:a,children:r,maxLines:i,style:o},s,c,t,n)}return FL(r)},BL="#808080",_p=function(e){var t=e.x,n=t===void 0?0:t,r=e.y,o=r===void 0?0:r,a=e.lineHeight,i=a===void 0?"1em":a,s=e.capHeight,c=s===void 0?"0.71em":s,l=e.scaleToFit,u=l===void 0?!1:l,d=e.textAnchor,f=d===void 0?"start":d,p=e.verticalAnchor,y=p===void 0?"end":p,m=e.fill,v=m===void 0?BL:m,b=TL(e,gle),x=g.useMemo(function(){return Sle({breakAll:b.breakAll,children:b.children,maxLines:b.maxLines,scaleToFit:u,style:b.style,width:b.width})},[b.breakAll,b.children,b.maxLines,u,b.style,b.width]),_=b.dx,w=b.dy,j=b.angle,E=b.className,S=b.breakAll,O=TL(b,vle);if(!Bt(n)||!Bt(o))return null;var N=n+(me(_)?_:0),P=o+(me(w)?w:0),k;switch(y){case"start":k=I1("calc(".concat(c,")"));break;case"middle":k=I1("calc(".concat((x.length-1)/2," * -").concat(i," + (").concat(c," / 2))"));break;default:k=I1("calc(".concat(x.length-1," * -").concat(i,")"));break}var R=[];if(u){var A=x[0].width,C=b.width;R.push("scale(".concat((me(C)?C/A:1)/A,")"))}return j&&R.push("rotate(".concat(j,", ").concat(N,", ").concat(P,")")),R.length&&(O.transform=R.join(" ")),V.createElement("text",D1({},nt(O,!0),{x:N,y:P,className:st("recharts-text",E),textAnchor:f,fill:v.includes("url")?BL:v}),x.map(function(M,T){var I=M.words.join(S?"":" ");return V.createElement("tspan",{x:N,dy:T===0?k:i,key:"".concat(I,"-").concat(T)},I)}))};function na(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Cle(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function L1(e){let t,n,r;e.length!==2?(t=na,n=(s,c)=>na(e(s),c),r=(s,c)=>e(s)-c):(t=e===na||e===Cle?e:Ole,n=e,r=e);function o(s,c,l=0,u=s.length){if(l<u){if(t(c,c)!==0)return u;do{const d=l+u>>>1;n(s[d],c)<0?l=d+1:u=d}while(l<u)}return l}function a(s,c,l=0,u=s.length){if(l<u){if(t(c,c)!==0)return u;do{const d=l+u>>>1;n(s[d],c)<=0?l=d+1:u=d}while(l<u)}return l}function i(s,c,l=0,u=s.length){const d=o(s,c,l,u-1);return d>l&&r(s[d-1],c)>-r(s[d],c)?d-1:d}return{left:o,center:i,right:a}}function Ole(){return 0}function $L(e){return e===null?NaN:+e}function*Mle(e,t){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const Nle=L1(na),Fl=Nle.right;L1($L).center;class zL extends Map{constructor(t,n=Ale){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,o]of t)this.set(r,o)}get(t){return super.get(VL(this,t))}has(t){return super.has(VL(this,t))}set(t,n){return super.set(kle(this,t),n)}delete(t){return super.delete(Ple(this,t))}}function VL({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function kle({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function Ple({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function Ale(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Tle(e=na){if(e===na)return UL;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function UL(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const Rle=Math.sqrt(50),Ile=Math.sqrt(10),Dle=Math.sqrt(2);function jp(e,t,n){const r=(t-e)/Math.max(0,n),o=Math.floor(Math.log10(r)),a=r/Math.pow(10,o),i=a>=Rle?10:a>=Ile?5:a>=Dle?2:1;let s,c,l;return o<0?(l=Math.pow(10,-o)/i,s=Math.round(e*l),c=Math.round(t*l),s/l<e&&++s,c/l>t&&--c,l=-l):(l=Math.pow(10,o)*i,s=Math.round(e/l),c=Math.round(t/l),s*l<e&&++s,c*l>t&&--c),c<s&&.5<=n&&n<2?jp(e,t,n*2):[s,c,l]}function F1(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[o,a,i]=r?jp(t,e,n):jp(e,t,n);if(!(a>=o))return[];const s=a-o+1,c=new Array(s);if(r)if(i<0)for(let l=0;l<s;++l)c[l]=(a-l)/-i;else for(let l=0;l<s;++l)c[l]=(a-l)*i;else if(i<0)for(let l=0;l<s;++l)c[l]=(o+l)/-i;else for(let l=0;l<s;++l)c[l]=(o+l)*i;return c}function B1(e,t,n){return t=+t,e=+e,n=+n,jp(e,t,n)[2]}function $1(e,t,n){t=+t,e=+e,n=+n;const r=t<e,o=r?B1(t,e,n):B1(e,t,n);return(r?-1:1)*(o<0?1/-o:o)}function HL(e,t){let n;for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function WL(e,t){let n;for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function qL(e,t,n=0,r=1/0,o){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(o=o===void 0?UL:Tle(o);r>n;){if(r-n>600){const c=r-n+1,l=t-n+1,u=Math.log(c),d=.5*Math.exp(2*u/3),f=.5*Math.sqrt(u*d*(c-d)/c)*(l-c/2<0?-1:1),p=Math.max(n,Math.floor(t-l*d/c+f)),y=Math.min(r,Math.floor(t+(c-l)*d/c+f));qL(e,t,p,y,o)}const a=e[t];let i=n,s=r;for(Bl(e,n,t),o(e[r],a)>0&&Bl(e,n,r);i<s;){for(Bl(e,i,s),++i,--s;o(e[i],a)<0;)++i;for(;o(e[s],a)>0;)--s}o(e[n],a)===0?Bl(e,n,s):(++s,Bl(e,s,r)),s<=t&&(n=s+1),t<=s&&(r=s-1)}return e}function Bl(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function Lle(e,t,n){if(e=Float64Array.from(Mle(e)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return WL(e);if(t>=1)return HL(e);var r,o=(r-1)*t,a=Math.floor(o),i=HL(qL(e,a).subarray(0,a+1)),s=WL(e.subarray(a+1));return i+(s-i)*(o-a)}}function Fle(e,t,n=$L){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,o=(r-1)*t,a=Math.floor(o),i=+n(e[a],a,e),s=+n(e[a+1],a+1,e);return i+(s-i)*(o-a)}}function Ble(e,t,n){e=+e,t=+t,n=(o=arguments.length)<2?(t=e,e=0,1):o<3?1:+n;for(var r=-1,o=Math.max(0,Math.ceil((t-e)/n))|0,a=new Array(o);++r<o;)a[r]=e+r*n;return a}function Kn(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function So(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const z1=Symbol("implicit");function V1(){var e=new zL,t=[],n=[],r=z1;function o(a){let i=e.get(a);if(i===void 0){if(r!==z1)return r;e.set(a,i=t.push(a)-1)}return n[i%n.length]}return o.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new zL;for(const i of a)e.has(i)||e.set(i,t.push(i)-1);return o},o.range=function(a){return arguments.length?(n=Array.from(a),o):n.slice()},o.unknown=function(a){return arguments.length?(r=a,o):r},o.copy=function(){return V1(t,n).unknown(r)},Kn.apply(o,arguments),o}function $l(){var e=V1().unknown(void 0),t=e.domain,n=e.range,r=0,o=1,a,i,s=!1,c=0,l=0,u=.5;delete e.unknown;function d(){var f=t().length,p=o<r,y=p?o:r,m=p?r:o;a=(m-y)/Math.max(1,f-c+l*2),s&&(a=Math.floor(a)),y+=(m-y-a*(f-c))*u,i=a*(1-c),s&&(y=Math.round(y),i=Math.round(i));var v=Ble(f).map(function(b){return y+a*b});return n(p?v.reverse():v)}return e.domain=function(f){return arguments.length?(t(f),d()):t()},e.range=function(f){return arguments.length?([r,o]=f,r=+r,o=+o,d()):[r,o]},e.rangeRound=function(f){return[r,o]=f,r=+r,o=+o,s=!0,d()},e.bandwidth=function(){return i},e.step=function(){return a},e.round=function(f){return arguments.length?(s=!!f,d()):s},e.padding=function(f){return arguments.length?(c=Math.min(1,l=+f),d()):c},e.paddingInner=function(f){return arguments.length?(c=Math.min(1,f),d()):c},e.paddingOuter=function(f){return arguments.length?(l=+f,d()):l},e.align=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),d()):u},e.copy=function(){return $l(t(),[r,o]).round(s).paddingInner(c).paddingOuter(l).align(u)},Kn.apply(d(),arguments)}function YL(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return YL(t())},e}function zl(){return YL($l.apply(null,arguments).paddingInner(1))}function $le(e){return function(){return e}}function Ep(e){return+e}var KL=[0,1];function mn(e){return e}function U1(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:$le(isNaN(t)?NaN:.5)}function zle(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function Vle(e,t,n){var r=e[0],o=e[1],a=t[0],i=t[1];return o<r?(r=U1(o,r),a=n(i,a)):(r=U1(r,o),a=n(a,i)),function(s){return a(r(s))}}function Ule(e,t,n){var r=Math.min(e.length,t.length)-1,o=new Array(r),a=new Array(r),i=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++i<r;)o[i]=U1(e[i],e[i+1]),a[i]=n(t[i],t[i+1]);return function(s){var c=Fl(e,s,1,r)-1;return a[c](o[c](s))}}function Vl(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Sp(){var e=KL,t=KL,n=Ii,r,o,a,i=mn,s,c,l;function u(){var f=Math.min(e.length,t.length);return i!==mn&&(i=zle(e[0],e[f-1])),s=f>2?Ule:Vle,c=l=null,d}function d(f){return f==null||isNaN(f=+f)?a:(c||(c=s(e.map(r),t,n)))(r(i(f)))}return d.invert=function(f){return i(o((l||(l=s(t,e.map(r),fr)))(f)))},d.domain=function(f){return arguments.length?(e=Array.from(f,Ep),u()):e.slice()},d.range=function(f){return arguments.length?(t=Array.from(f),u()):t.slice()},d.rangeRound=function(f){return t=Array.from(f),n=fb,u()},d.clamp=function(f){return arguments.length?(i=f?!0:mn,u()):i!==mn},d.interpolate=function(f){return arguments.length?(n=f,u()):n},d.unknown=function(f){return arguments.length?(a=f,d):a},function(f,p){return r=f,o=p,u()}}function H1(){return Sp()(mn,mn)}function Hle(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Cp(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function hs(e){return e=Cp(Math.abs(e)),e?e[1]:NaN}function Wle(e,t){return function(n,r){for(var o=n.length,a=[],i=0,s=e[0],c=0;o>0&&s>0&&(c+s+1>r&&(s=Math.max(1,r-c)),a.push(n.substring(o-=s,o+s)),!((c+=s+1)>r));)s=e[i=(i+1)%e.length];return a.reverse().join(t)}}function qle(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var Yle=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ul(e){if(!(t=Yle.exec(e)))throw new Error("invalid format: "+e);var t;return new W1({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Ul.prototype=W1.prototype;function W1(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}W1.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Kle(e){e:for(var t=e.length,n=1,r=-1,o;n<t;++n)switch(e[n]){case".":r=o=n;break;case"0":r===0&&(r=n),o=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(o+1):e}var XL;function Xle(e,t){var n=Cp(e,t);if(!n)return e+"";var r=n[0],o=n[1],a=o-(XL=Math.max(-8,Math.min(8,Math.floor(o/3)))*3)+1,i=r.length;return a===i?r:a>i?r+new Array(a-i+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+Cp(e,Math.max(0,t+a-1))[0]}function GL(e,t){var n=Cp(e,t);if(!n)return e+"";var r=n[0],o=n[1];return o<0?"0."+new Array(-o).join("0")+r:r.length>o+1?r.slice(0,o+1)+"."+r.slice(o+1):r+new Array(o-r.length+2).join("0")}const QL={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Hle,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>GL(e*100,t),r:GL,s:Xle,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function JL(e){return e}var ZL=Array.prototype.map,e6=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function Gle(e){var t=e.grouping===void 0||e.thousands===void 0?JL:Wle(ZL.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",o=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?JL:qle(ZL.call(e.numerals,String)),i=e.percent===void 0?"%":e.percent+"",s=e.minus===void 0?"\u2212":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function l(d){d=Ul(d);var f=d.fill,p=d.align,y=d.sign,m=d.symbol,v=d.zero,b=d.width,x=d.comma,_=d.precision,w=d.trim,j=d.type;j==="n"?(x=!0,j="g"):QL[j]||(_===void 0&&(_=12),w=!0,j="g"),(v||f==="0"&&p==="=")&&(v=!0,f="0",p="=");var E=m==="$"?n:m==="#"&&/[boxX]/.test(j)?"0"+j.toLowerCase():"",S=m==="$"?r:/[%p]/.test(j)?i:"",O=QL[j],N=/[defgprs%]/.test(j);_=_===void 0?6:/[gprs]/.test(j)?Math.max(1,Math.min(21,_)):Math.max(0,Math.min(20,_));function P(k){var R=E,A=S,C,M,T;if(j==="c")A=O(k)+A,k="";else{k=+k;var I=k<0||1/k<0;if(k=isNaN(k)?c:O(Math.abs(k),_),w&&(k=Kle(k)),I&&+k==0&&y!=="+"&&(I=!1),R=(I?y==="("?y:s:y==="-"||y==="("?"":y)+R,A=(j==="s"?e6[8+XL/3]:"")+A+(I&&y==="("?")":""),N){for(C=-1,M=k.length;++C<M;)if(T=k.charCodeAt(C),48>T||T>57){A=(T===46?o+k.slice(C+1):k.slice(C))+A,k=k.slice(0,C);break}}}x&&!v&&(k=t(k,1/0));var L=R.length+k.length+A.length,D=L<b?new Array(b-L+1).join(f):"";switch(x&&v&&(k=t(D+k,D.length?b-A.length:1/0),D=""),p){case"<":k=R+k+A+D;break;case"=":k=R+D+k+A;break;case"^":k=D.slice(0,L=D.length>>1)+R+k+A+D.slice(L);break;default:k=D+R+k+A;break}return a(k)}return P.toString=function(){return d+""},P}function u(d,f){var p=l((d=Ul(d),d.type="f",d)),y=Math.max(-8,Math.min(8,Math.floor(hs(f)/3)))*3,m=Math.pow(10,-y),v=e6[8+y/3];return function(b){return p(m*b)+v}}return{format:l,formatPrefix:u}}var Op,q1,t6;Qle({thousands:",",grouping:[3],currency:["$",""]});function Qle(e){return Op=Gle(e),q1=Op.format,t6=Op.formatPrefix,Op}function Jle(e){return Math.max(0,-hs(Math.abs(e)))}function Zle(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(hs(t)/3)))*3-hs(Math.abs(e)))}function eue(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,hs(t)-hs(e))+1}function n6(e,t,n,r){var o=$1(e,t,n),a;switch(r=Ul(r??",f"),r.type){case"s":{var i=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(a=Zle(o,i))&&(r.precision=a),t6(r,i)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=eue(o,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=Jle(o))&&(r.precision=a-(r.type==="%")*2);break}}return q1(r)}function ra(e){var t=e.domain;return e.ticks=function(n){var r=t();return F1(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var o=t();return n6(o[0],o[o.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),o=0,a=r.length-1,i=r[o],s=r[a],c,l,u=10;for(s<i&&(l=i,i=s,s=l,l=o,o=a,a=l);u-- >0;){if(l=B1(i,s,n),l===c)return r[o]=i,r[a]=s,t(r);if(l>0)i=Math.floor(i/l)*l,s=Math.ceil(s/l)*l;else if(l<0)i=Math.ceil(i*l)/l,s=Math.floor(s*l)/l;else break;c=l}return e},e}function Mp(){var e=H1();return e.copy=function(){return Vl(e,Mp())},Kn.apply(e,arguments),ra(e)}function r6(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,Ep),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return r6(e).unknown(t)},e=arguments.length?Array.from(e,Ep):[0,1],ra(n)}function o6(e,t){e=e.slice();var n=0,r=e.length-1,o=e[n],a=e[r],i;return a<o&&(i=n,n=r,r=i,i=o,o=a,a=i),e[n]=t.floor(o),e[r]=t.ceil(a),e}function a6(e){return Math.log(e)}function i6(e){return Math.exp(e)}function tue(e){return-Math.log(-e)}function nue(e){return-Math.exp(-e)}function rue(e){return isFinite(e)?+("1e"+e):e<0?0:e}function oue(e){return e===10?rue:e===Math.E?Math.exp:t=>Math.pow(e,t)}function aue(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function s6(e){return(t,n)=>-e(-t,n)}function Y1(e){const t=e(a6,i6),n=t.domain;let r=10,o,a;function i(){return o=aue(r),a=oue(r),n()[0]<0?(o=s6(o),a=s6(a),e(tue,nue)):e(a6,i6),t}return t.base=function(s){return arguments.length?(r=+s,i()):r},t.domain=function(s){return arguments.length?(n(s),i()):n()},t.ticks=s=>{const c=n();let l=c[0],u=c[c.length-1];const d=u<l;d&&([l,u]=[u,l]);let f=o(l),p=o(u),y,m;const v=s==null?10:+s;let b=[];if(!(r%1)&&p-f<v){if(f=Math.floor(f),p=Math.ceil(p),l>0){for(;f<=p;++f)for(y=1;y<r;++y)if(m=f<0?y/a(-f):y*a(f),!(m<l)){if(m>u)break;b.push(m)}}else for(;f<=p;++f)for(y=r-1;y>=1;--y)if(m=f>0?y/a(-f):y*a(f),!(m<l)){if(m>u)break;b.push(m)}b.length*2<v&&(b=F1(l,u,v))}else b=F1(f,p,Math.min(p-f,v)).map(a);return d?b.reverse():b},t.tickFormat=(s,c)=>{if(s==null&&(s=10),c==null&&(c=r===10?"s":","),typeof c!="function"&&(!(r%1)&&(c=Ul(c)).precision==null&&(c.trim=!0),c=q1(c)),s===1/0)return c;const l=Math.max(1,r*s/t.ticks().length);return u=>{let d=u/a(Math.round(o(u)));return d*r<r-.5&&(d*=r),d<=l?c(u):""}},t.nice=()=>n(o6(n(),{floor:s=>a(Math.floor(o(s))),ceil:s=>a(Math.ceil(o(s)))})),t}function c6(){const e=Y1(Sp()).domain([1,10]);return e.copy=()=>Vl(e,c6()).base(e.base()),Kn.apply(e,arguments),e}function l6(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function u6(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function K1(e){var t=1,n=e(l6(t),u6(t));return n.constant=function(r){return arguments.length?e(l6(t=+r),u6(t)):t},ra(n)}function d6(){var e=K1(Sp());return e.copy=function(){return Vl(e,d6()).constant(e.constant())},Kn.apply(e,arguments)}function f6(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function iue(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function sue(e){return e<0?-e*e:e*e}function X1(e){var t=e(mn,mn),n=1;function r(){return n===1?e(mn,mn):n===.5?e(iue,sue):e(f6(n),f6(1/n))}return t.exponent=function(o){return arguments.length?(n=+o,r()):n},ra(t)}function G1(){var e=X1(Sp());return e.copy=function(){return Vl(e,G1()).exponent(e.exponent())},Kn.apply(e,arguments),e}function cue(){return G1.apply(null,arguments).exponent(.5)}function p6(e){return Math.sign(e)*e*e}function lue(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function h6(){var e=H1(),t=[0,1],n=!1,r;function o(a){var i=lue(e(a));return isNaN(i)?r:n?Math.round(i):i}return o.invert=function(a){return e.invert(p6(a))},o.domain=function(a){return arguments.length?(e.domain(a),o):e.domain()},o.range=function(a){return arguments.length?(e.range((t=Array.from(a,Ep)).map(p6)),o):t.slice()},o.rangeRound=function(a){return o.range(a).round(!0)},o.round=function(a){return arguments.length?(n=!!a,o):n},o.clamp=function(a){return arguments.length?(e.clamp(a),o):e.clamp()},o.unknown=function(a){return arguments.length?(r=a,o):r},o.copy=function(){return h6(e.domain(),t).round(n).clamp(e.clamp()).unknown(r)},Kn.apply(o,arguments),ra(o)}function m6(){var e=[],t=[],n=[],r;function o(){var i=0,s=Math.max(1,t.length);for(n=new Array(s-1);++i<s;)n[i-1]=Fle(e,i/s);return a}function a(i){return i==null||isNaN(i=+i)?r:t[Fl(n,i)]}return a.invertExtent=function(i){var s=t.indexOf(i);return s<0?[NaN,NaN]:[s>0?n[s-1]:e[0],s<n.length?n[s]:e[e.length-1]]},a.domain=function(i){if(!arguments.length)return e.slice();e=[];for(let s of i)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(na),o()},a.range=function(i){return arguments.length?(t=Array.from(i),o()):t.slice()},a.unknown=function(i){return arguments.length?(r=i,a):r},a.quantiles=function(){return n.slice()},a.copy=function(){return m6().domain(e).range(t).unknown(r)},Kn.apply(a,arguments)}function y6(){var e=0,t=1,n=1,r=[.5],o=[0,1],a;function i(c){return c!=null&&c<=c?o[Fl(r,c,0,n)]:a}function s(){var c=-1;for(r=new Array(n);++c<n;)r[c]=((c+1)*t-(c-n)*e)/(n+1);return i}return i.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,s()):[e,t]},i.range=function(c){return arguments.length?(n=(o=Array.from(c)).length-1,s()):o.slice()},i.invertExtent=function(c){var l=o.indexOf(c);return l<0?[NaN,NaN]:l<1?[e,r[0]]:l>=n?[r[n-1],t]:[r[l-1],r[l]]},i.unknown=function(c){return arguments.length&&(a=c),i},i.thresholds=function(){return r.slice()},i.copy=function(){return y6().domain([e,t]).range(o).unknown(a)},Kn.apply(ra(i),arguments)}function g6(){var e=[.5],t=[0,1],n,r=1;function o(a){return a!=null&&a<=a?t[Fl(e,a,0,r)]:n}return o.domain=function(a){return arguments.length?(e=Array.from(a),r=Math.min(e.length,t.length-1),o):e.slice()},o.range=function(a){return arguments.length?(t=Array.from(a),r=Math.min(e.length,t.length-1),o):t.slice()},o.invertExtent=function(a){var i=t.indexOf(a);return[e[i-1],e[i]]},o.unknown=function(a){return arguments.length?(n=a,o):n},o.copy=function(){return g6().domain(e).range(t).unknown(n)},Kn.apply(o,arguments)}const Q1=new Date,J1=new Date;function $t(e,t,n,r){function o(a){return e(a=arguments.length===0?new Date:new Date(+a)),a}return o.floor=a=>(e(a=new Date(+a)),a),o.ceil=a=>(e(a=new Date(a-1)),t(a,1),e(a),a),o.round=a=>{const i=o(a),s=o.ceil(a);return a-i<s-a?i:s},o.offset=(a,i)=>(t(a=new Date(+a),i==null?1:Math.floor(i)),a),o.range=(a,i,s)=>{const c=[];if(a=o.ceil(a),s=s==null?1:Math.floor(s),!(a<i)||!(s>0))return c;let l;do c.push(l=new Date(+a)),t(a,s),e(a);while(l<a&&a<i);return c},o.filter=a=>$t(i=>{if(i>=i)for(;e(i),!a(i);)i.setTime(i-1)},(i,s)=>{if(i>=i)if(s<0)for(;++s<=0;)for(;t(i,-1),!a(i););else for(;--s>=0;)for(;t(i,1),!a(i););}),n&&(o.count=(a,i)=>(Q1.setTime(+a),J1.setTime(+i),e(Q1),e(J1),Math.floor(n(Q1,J1))),o.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?o.filter(r?i=>r(i)%a===0:i=>o.count(0,i)%a===0):o)),o}const Np=$t(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Np.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?$t(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):Np),Np.range;const Co=1e3,Xn=Co*60,Oo=Xn*60,Mo=Oo*24,Z1=Mo*7,v6=Mo*30,e_=Mo*365,Fa=$t(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Co)},(e,t)=>(t-e)/Co,e=>e.getUTCSeconds());Fa.range;const t_=$t(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Co)},(e,t)=>{e.setTime(+e+t*Xn)},(e,t)=>(t-e)/Xn,e=>e.getMinutes());t_.range;const n_=$t(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Xn)},(e,t)=>(t-e)/Xn,e=>e.getUTCMinutes());n_.range;const r_=$t(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Co-e.getMinutes()*Xn)},(e,t)=>{e.setTime(+e+t*Oo)},(e,t)=>(t-e)/Oo,e=>e.getHours());r_.range;const o_=$t(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Oo)},(e,t)=>(t-e)/Oo,e=>e.getUTCHours());o_.range;const Hl=$t(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Xn)/Mo,e=>e.getDate()-1);Hl.range;const kp=$t(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Mo,e=>e.getUTCDate()-1);kp.range;const b6=$t(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Mo,e=>Math.floor(e/Mo));b6.range;function Ba(e){return $t(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Xn)/Z1)}const Pp=Ba(0),Ap=Ba(1),uue=Ba(2),due=Ba(3),ms=Ba(4),fue=Ba(5),pue=Ba(6);Pp.range,Ap.range,uue.range,due.range,ms.range,fue.range,pue.range;function $a(e){return $t(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/Z1)}const Tp=$a(0),Rp=$a(1),hue=$a(2),mue=$a(3),ys=$a(4),yue=$a(5),gue=$a(6);Tp.range,Rp.range,hue.range,mue.range,ys.range,yue.range,gue.range;const a_=$t(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());a_.range;const i_=$t(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());i_.range;const No=$t(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());No.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:$t(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)}),No.range;const ko=$t(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());ko.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:$t(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)}),ko.range;function x6(e,t,n,r,o,a){const i=[[Fa,1,Co],[Fa,5,5*Co],[Fa,15,15*Co],[Fa,30,30*Co],[a,1,Xn],[a,5,5*Xn],[a,15,15*Xn],[a,30,30*Xn],[o,1,Oo],[o,3,3*Oo],[o,6,6*Oo],[o,12,12*Oo],[r,1,Mo],[r,2,2*Mo],[n,1,Z1],[t,1,v6],[t,3,3*v6],[e,1,e_]];function s(l,u,d){const f=u<l;f&&([l,u]=[u,l]);const p=d&&typeof d.range=="function"?d:c(l,u,d),y=p?p.range(l,+u+1):[];return f?y.reverse():y}function c(l,u,d){const f=Math.abs(u-l)/d,p=L1(([,,v])=>v).right(i,f);if(p===i.length)return e.every($1(l/e_,u/e_,d));if(p===0)return Np.every(Math.max($1(l,u,d),1));const[y,m]=i[f/i[p-1][2]<i[p][2]/f?p-1:p];return y.every(m)}return[s,c]}const[vue,bue]=x6(ko,i_,Tp,b6,o_,n_),[xue,wue]=x6(No,a_,Pp,Hl,r_,t_);function s_(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function c_(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Wl(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function _ue(e){var t=e.dateTime,n=e.date,r=e.time,o=e.periods,a=e.days,i=e.shortDays,s=e.months,c=e.shortMonths,l=ql(o),u=Yl(o),d=ql(a),f=Yl(a),p=ql(i),y=Yl(i),m=ql(s),v=Yl(s),b=ql(c),x=Yl(c),_={a:I,A:L,b:D,B:$,c:null,d:C6,e:C6,f:Wue,g:tde,G:rde,H:Vue,I:Uue,j:Hue,L:O6,m:que,M:Yue,p:U,q:F,Q:T6,s:R6,S:Kue,u:Xue,U:Gue,V:Que,w:Jue,W:Zue,x:null,X:null,y:ede,Y:nde,Z:ode,"%":A6},w={a:H,A:Y,b:G,B:re,c:null,d:N6,e:N6,f:cde,g:vde,G:xde,H:ade,I:ide,j:sde,L:k6,m:lde,M:ude,p:Z,q,Q:T6,s:R6,S:dde,u:fde,U:pde,V:hde,w:mde,W:yde,x:null,X:null,y:gde,Y:bde,Z:wde,"%":A6},j={a:P,A:k,b:R,B:A,c:C,d:E6,e:E6,f:Fue,g:j6,G:_6,H:S6,I:S6,j:Rue,L:Lue,m:Tue,M:Iue,p:N,q:Aue,Q:$ue,s:zue,S:Due,u:Oue,U:Mue,V:Nue,w:Cue,W:kue,x:M,X:T,y:j6,Y:_6,Z:Pue,"%":Bue};_.x=E(n,_),_.X=E(r,_),_.c=E(t,_),w.x=E(n,w),w.X=E(r,w),w.c=E(t,w);function E(W,J){return function(te){var B=[],se=-1,ce=0,ve=W.length,Te,qe,Ye;for(te instanceof Date||(te=new Date(+te));++se<ve;)W.charCodeAt(se)===37&&(B.push(W.slice(ce,se)),(qe=w6[Te=W.charAt(++se)])!=null?Te=W.charAt(++se):qe=Te==="e"?" ":"0",(Ye=J[Te])&&(Te=Ye(te,qe)),B.push(Te),ce=se+1);return B.push(W.slice(ce,se)),B.join("")}}function S(W,J){return function(te){var B=Wl(1900,void 0,1),se=O(B,W,te+="",0),ce,ve;if(se!=te.length)return null;if("Q"in B)return new Date(B.Q);if("s"in B)return new Date(B.s*1e3+("L"in B?B.L:0));if(J&&!("Z"in B)&&(B.Z=0),"p"in B&&(B.H=B.H%12+B.p*12),B.m===void 0&&(B.m="q"in B?B.q:0),"V"in B){if(B.V<1||B.V>53)return null;"w"in B||(B.w=1),"Z"in B?(ce=c_(Wl(B.y,0,1)),ve=ce.getUTCDay(),ce=ve>4||ve===0?Rp.ceil(ce):Rp(ce),ce=kp.offset(ce,(B.V-1)*7),B.y=ce.getUTCFullYear(),B.m=ce.getUTCMonth(),B.d=ce.getUTCDate()+(B.w+6)%7):(ce=s_(Wl(B.y,0,1)),ve=ce.getDay(),ce=ve>4||ve===0?Ap.ceil(ce):Ap(ce),ce=Hl.offset(ce,(B.V-1)*7),B.y=ce.getFullYear(),B.m=ce.getMonth(),B.d=ce.getDate()+(B.w+6)%7)}else("W"in B||"U"in B)&&("w"in B||(B.w="u"in B?B.u%7:"W"in B?1:0),ve="Z"in B?c_(Wl(B.y,0,1)).getUTCDay():s_(Wl(B.y,0,1)).getDay(),B.m=0,B.d="W"in B?(B.w+6)%7+B.W*7-(ve+5)%7:B.w+B.U*7-(ve+6)%7);return"Z"in B?(B.H+=B.Z/100|0,B.M+=B.Z%100,c_(B)):s_(B)}}function O(W,J,te,B){for(var se=0,ce=J.length,ve=te.length,Te,qe;se<ce;){if(B>=ve)return-1;if(Te=J.charCodeAt(se++),Te===37){if(Te=J.charAt(se++),qe=j[Te in w6?J.charAt(se++):Te],!qe||(B=qe(W,te,B))<0)return-1}else if(Te!=te.charCodeAt(B++))return-1}return B}function N(W,J,te){var B=l.exec(J.slice(te));return B?(W.p=u.get(B[0].toLowerCase()),te+B[0].length):-1}function P(W,J,te){var B=p.exec(J.slice(te));return B?(W.w=y.get(B[0].toLowerCase()),te+B[0].length):-1}function k(W,J,te){var B=d.exec(J.slice(te));return B?(W.w=f.get(B[0].toLowerCase()),te+B[0].length):-1}function R(W,J,te){var B=b.exec(J.slice(te));return B?(W.m=x.get(B[0].toLowerCase()),te+B[0].length):-1}function A(W,J,te){var B=m.exec(J.slice(te));return B?(W.m=v.get(B[0].toLowerCase()),te+B[0].length):-1}function C(W,J,te){return O(W,t,J,te)}function M(W,J,te){return O(W,n,J,te)}function T(W,J,te){return O(W,r,J,te)}function I(W){return i[W.getDay()]}function L(W){return a[W.getDay()]}function D(W){return c[W.getMonth()]}function $(W){return s[W.getMonth()]}function U(W){return o[+(W.getHours()>=12)]}function F(W){return 1+~~(W.getMonth()/3)}function H(W){return i[W.getUTCDay()]}function Y(W){return a[W.getUTCDay()]}function G(W){return c[W.getUTCMonth()]}function re(W){return s[W.getUTCMonth()]}function Z(W){return o[+(W.getUTCHours()>=12)]}function q(W){return 1+~~(W.getUTCMonth()/3)}return{format:function(W){var J=E(W+="",_);return J.toString=function(){return W},J},parse:function(W){var J=S(W+="",!1);return J.toString=function(){return W},J},utcFormat:function(W){var J=E(W+="",w);return J.toString=function(){return W},J},utcParse:function(W){var J=S(W+="",!0);return J.toString=function(){return W},J}}}var w6={"-":"",_:" ",0:"0"},Ht=/^\s*\d+/,jue=/^%/,Eue=/[\\^$*+?|[\]().{}]/g;function Ze(e,t,n){var r=e<0?"-":"",o=(r?-e:e)+"",a=o.length;return r+(a<n?new Array(n-a+1).join(t)+o:o)}function Sue(e){return e.replace(Eue,"\\$&")}function ql(e){return new RegExp("^(?:"+e.map(Sue).join("|")+")","i")}function Yl(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function Cue(e,t,n){var r=Ht.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function Oue(e,t,n){var r=Ht.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function Mue(e,t,n){var r=Ht.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function Nue(e,t,n){var r=Ht.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function kue(e,t,n){var r=Ht.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function _6(e,t,n){var r=Ht.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function j6(e,t,n){var r=Ht.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Pue(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Aue(e,t,n){var r=Ht.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function Tue(e,t,n){var r=Ht.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function E6(e,t,n){var r=Ht.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function Rue(e,t,n){var r=Ht.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function S6(e,t,n){var r=Ht.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function Iue(e,t,n){var r=Ht.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function Due(e,t,n){var r=Ht.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function Lue(e,t,n){var r=Ht.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function Fue(e,t,n){var r=Ht.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Bue(e,t,n){var r=jue.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function $ue(e,t,n){var r=Ht.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function zue(e,t,n){var r=Ht.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function C6(e,t){return Ze(e.getDate(),t,2)}function Vue(e,t){return Ze(e.getHours(),t,2)}function Uue(e,t){return Ze(e.getHours()%12||12,t,2)}function Hue(e,t){return Ze(1+Hl.count(No(e),e),t,3)}function O6(e,t){return Ze(e.getMilliseconds(),t,3)}function Wue(e,t){return O6(e,t)+"000"}function que(e,t){return Ze(e.getMonth()+1,t,2)}function Yue(e,t){return Ze(e.getMinutes(),t,2)}function Kue(e,t){return Ze(e.getSeconds(),t,2)}function Xue(e){var t=e.getDay();return t===0?7:t}function Gue(e,t){return Ze(Pp.count(No(e)-1,e),t,2)}function M6(e){var t=e.getDay();return t>=4||t===0?ms(e):ms.ceil(e)}function Que(e,t){return e=M6(e),Ze(ms.count(No(e),e)+(No(e).getDay()===4),t,2)}function Jue(e){return e.getDay()}function Zue(e,t){return Ze(Ap.count(No(e)-1,e),t,2)}function ede(e,t){return Ze(e.getFullYear()%100,t,2)}function tde(e,t){return e=M6(e),Ze(e.getFullYear()%100,t,2)}function nde(e,t){return Ze(e.getFullYear()%1e4,t,4)}function rde(e,t){var n=e.getDay();return e=n>=4||n===0?ms(e):ms.ceil(e),Ze(e.getFullYear()%1e4,t,4)}function ode(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Ze(t/60|0,"0",2)+Ze(t%60,"0",2)}function N6(e,t){return Ze(e.getUTCDate(),t,2)}function ade(e,t){return Ze(e.getUTCHours(),t,2)}function ide(e,t){return Ze(e.getUTCHours()%12||12,t,2)}function sde(e,t){return Ze(1+kp.count(ko(e),e),t,3)}function k6(e,t){return Ze(e.getUTCMilliseconds(),t,3)}function cde(e,t){return k6(e,t)+"000"}function lde(e,t){return Ze(e.getUTCMonth()+1,t,2)}function ude(e,t){return Ze(e.getUTCMinutes(),t,2)}function dde(e,t){return Ze(e.getUTCSeconds(),t,2)}function fde(e){var t=e.getUTCDay();return t===0?7:t}function pde(e,t){return Ze(Tp.count(ko(e)-1,e),t,2)}function P6(e){var t=e.getUTCDay();return t>=4||t===0?ys(e):ys.ceil(e)}function hde(e,t){return e=P6(e),Ze(ys.count(ko(e),e)+(ko(e).getUTCDay()===4),t,2)}function mde(e){return e.getUTCDay()}function yde(e,t){return Ze(Rp.count(ko(e)-1,e),t,2)}function gde(e,t){return Ze(e.getUTCFullYear()%100,t,2)}function vde(e,t){return e=P6(e),Ze(e.getUTCFullYear()%100,t,2)}function bde(e,t){return Ze(e.getUTCFullYear()%1e4,t,4)}function xde(e,t){var n=e.getUTCDay();return e=n>=4||n===0?ys(e):ys.ceil(e),Ze(e.getUTCFullYear()%1e4,t,4)}function wde(){return"+0000"}function A6(){return"%"}function T6(e){return+e}function R6(e){return Math.floor(+e/1e3)}var gs,I6,D6;_de({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function _de(e){return gs=_ue(e),I6=gs.format,gs.parse,D6=gs.utcFormat,gs.utcParse,gs}function jde(e){return new Date(e)}function Ede(e){return e instanceof Date?+e:+new Date(+e)}function l_(e,t,n,r,o,a,i,s,c,l){var u=H1(),d=u.invert,f=u.domain,p=l(".%L"),y=l(":%S"),m=l("%I:%M"),v=l("%I %p"),b=l("%a %d"),x=l("%b %d"),_=l("%B"),w=l("%Y");function j(E){return(c(E)<E?p:s(E)<E?y:i(E)<E?m:a(E)<E?v:r(E)<E?o(E)<E?b:x:n(E)<E?_:w)(E)}return u.invert=function(E){return new Date(d(E))},u.domain=function(E){return arguments.length?f(Array.from(E,Ede)):f().map(jde)},u.ticks=function(E){var S=f();return e(S[0],S[S.length-1],E??10)},u.tickFormat=function(E,S){return S==null?j:l(S)},u.nice=function(E){var S=f();return(!E||typeof E.range!="function")&&(E=t(S[0],S[S.length-1],E??10)),E?f(o6(S,E)):u},u.copy=function(){return Vl(u,l_(e,t,n,r,o,a,i,s,c,l))},u}function Sde(){return Kn.apply(l_(xue,wue,No,a_,Pp,Hl,r_,t_,Fa,I6).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Cde(){return Kn.apply(l_(vue,bue,ko,i_,Tp,kp,o_,n_,Fa,D6).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Ip(){var e=0,t=1,n,r,o,a,i=mn,s=!1,c;function l(d){return d==null||isNaN(d=+d)?c:i(o===0?.5:(d=(a(d)-n)*o,s?Math.max(0,Math.min(1,d)):d))}l.domain=function(d){return arguments.length?([e,t]=d,n=a(e=+e),r=a(t=+t),o=n===r?0:1/(r-n),l):[e,t]},l.clamp=function(d){return arguments.length?(s=!!d,l):s},l.interpolator=function(d){return arguments.length?(i=d,l):i};function u(d){return function(f){var p,y;return arguments.length?([p,y]=f,i=d(p,y),l):[i(0),i(1)]}}return l.range=u(Ii),l.rangeRound=u(fb),l.unknown=function(d){return arguments.length?(c=d,l):c},function(d){return a=d,n=d(e),r=d(t),o=n===r?0:1/(r-n),l}}function oa(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function L6(){var e=ra(Ip()(mn));return e.copy=function(){return oa(e,L6())},So.apply(e,arguments)}function F6(){var e=Y1(Ip()).domain([1,10]);return e.copy=function(){return oa(e,F6()).base(e.base())},So.apply(e,arguments)}function B6(){var e=K1(Ip());return e.copy=function(){return oa(e,B6()).constant(e.constant())},So.apply(e,arguments)}function u_(){var e=X1(Ip());return e.copy=function(){return oa(e,u_()).exponent(e.exponent())},So.apply(e,arguments)}function Ode(){return u_.apply(null,arguments).exponent(.5)}function $6(){var e=[],t=mn;function n(r){if(r!=null&&!isNaN(r=+r))return t((Fl(e,r,1)-1)/(e.length-1))}return n.domain=function(r){if(!arguments.length)return e.slice();e=[];for(let o of r)o!=null&&!isNaN(o=+o)&&e.push(o);return e.sort(na),n},n.interpolator=function(r){return arguments.length?(t=r,n):t},n.range=function(){return e.map((r,o)=>t(o/(e.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(o,a)=>Lle(e,a/r))},n.copy=function(){return $6(t).domain(e)},So.apply(n,arguments)}function Dp(){var e=0,t=.5,n=1,r=1,o,a,i,s,c,l=mn,u,d=!1,f;function p(m){return isNaN(m=+m)?f:(m=.5+((m=+u(m))-a)*(r*m<r*a?s:c),l(d?Math.max(0,Math.min(1,m)):m))}p.domain=function(m){return arguments.length?([e,t,n]=m,o=u(e=+e),a=u(t=+t),i=u(n=+n),s=o===a?0:.5/(a-o),c=a===i?0:.5/(i-a),r=a<o?-1:1,p):[e,t,n]},p.clamp=function(m){return arguments.length?(d=!!m,p):d},p.interpolator=function(m){return arguments.length?(l=m,p):l};function y(m){return function(v){var b,x,_;return arguments.length?([b,x,_]=v,l=tQ(m,[b,x,_]),p):[l(0),l(.5),l(1)]}}return p.range=y(Ii),p.rangeRound=y(fb),p.unknown=function(m){return arguments.length?(f=m,p):f},function(m){return u=m,o=m(e),a=m(t),i=m(n),s=o===a?0:.5/(a-o),c=a===i?0:.5/(i-a),r=a<o?-1:1,p}}function z6(){var e=ra(Dp()(mn));return e.copy=function(){return oa(e,z6())},So.apply(e,arguments)}function V6(){var e=Y1(Dp()).domain([.1,1,10]);return e.copy=function(){return oa(e,V6()).base(e.base())},So.apply(e,arguments)}function U6(){var e=K1(Dp());return e.copy=function(){return oa(e,U6()).constant(e.constant())},So.apply(e,arguments)}function d_(){var e=X1(Dp());return e.copy=function(){return oa(e,d_()).exponent(e.exponent())},So.apply(e,arguments)}function Mde(){return d_.apply(null,arguments).exponent(.5)}const H6=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:$l,scaleDiverging:z6,scaleDivergingLog:V6,scaleDivergingPow:d_,scaleDivergingSqrt:Mde,scaleDivergingSymlog:U6,scaleIdentity:r6,scaleImplicit:z1,scaleLinear:Mp,scaleLog:c6,scaleOrdinal:V1,scalePoint:zl,scalePow:G1,scaleQuantile:m6,scaleQuantize:y6,scaleRadial:h6,scaleSequential:L6,scaleSequentialLog:F6,scaleSequentialPow:u_,scaleSequentialQuantile:$6,scaleSequentialSqrt:Ode,scaleSequentialSymlog:B6,scaleSqrt:cue,scaleSymlog:d6,scaleThreshold:g6,scaleTime:Sde,scaleUtc:Cde,tickFormat:n6},Symbol.toStringTag,{value:"Module"}));var f_,W6;function q6(){if(W6)return f_;W6=1;var e=ki();function t(n,r,o){for(var a=-1,i=n.length;++a<i;){var s=n[a],c=r(s);if(c!=null&&(l===void 0?c===c&&!e(c):o(c,l)))var l=c,u=s}return u}return f_=t,f_}var p_,Y6;function Nde(){if(Y6)return p_;Y6=1;function e(t,n){return t>n}return p_=e,p_}var h_,K6;function kde(){if(K6)return h_;K6=1;var e=q6(),t=Nde(),n=Pi();function r(o){return o&&o.length?e(o,n,t):void 0}return h_=r,h_}var Pde=kde();const Lp=Xe(Pde);var m_,X6;function Ade(){if(X6)return m_;X6=1;function e(t,n){return t<n}return m_=e,m_}var y_,G6;function Tde(){if(G6)return y_;G6=1;var e=q6(),t=Ade(),n=Pi();function r(o){return o&&o.length?e(o,n,t):void 0}return y_=r,y_}var Rde=Tde();const Fp=Xe(Rde);var g_,Q6;EE=function(){if(Q6)return g_;Q6=1;var e=Ys(),t=Nr(),n=V4(),r=cn();function o(a,i){var s=r(a)?e:n;return s(a,t(i,3))}return g_=o,g_};var v_,J6;function Ide(){if(J6)return v_;J6=1;var e=Fh(),t=EE();function n(r,o){return e(t(r,o),1)}return v_=n,v_}var Dde=Ide();const Lde=Xe(Dde);var b_,Z6;function Fde(){if(Z6)return b_;Z6=1;var e=f0();function t(n,r){return e(n,r)}return b_=t,b_}var Bde=Fde();const x_=Xe(Bde);var vs=1e9,$de={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},j_,jt=!0,Gn="[DecimalError] ",za=Gn+"Invalid argument: ",w_=Gn+"Exponent out of range: ",bs=Math.floor,Va=Math.pow,zde=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Ln,Wt=1e7,bt=7,e8=9007199254740991,Bp=bs(e8/bt),Ee={};Ee.absoluteValue=Ee.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e},Ee.comparedTo=Ee.cmp=function(e){var t,n,r,o,a=this;if(e=new a.constructor(e),a.s!==e.s)return a.s||-e.s;if(a.e!==e.e)return a.e>e.e^a.s<0?1:-1;for(r=a.d.length,o=e.d.length,t=0,n=r<o?r:o;t<n;++t)if(a.d[t]!==e.d[t])return a.d[t]>e.d[t]^a.s<0?1:-1;return r===o?0:r>o^a.s<0?1:-1},Ee.decimalPlaces=Ee.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*bt;if(t=e.d[t],t)for(;t%10==0;t/=10)n--;return n<0?0:n},Ee.dividedBy=Ee.div=function(e){return Po(this,new this.constructor(e))},Ee.dividedToIntegerBy=Ee.idiv=function(e){var t=this,n=t.constructor;return ft(Po(t,new n(e),0,1),n.precision)},Ee.equals=Ee.eq=function(e){return!this.cmp(e)},Ee.exponent=function(){return Dt(this)},Ee.greaterThan=Ee.gt=function(e){return this.cmp(e)>0},Ee.greaterThanOrEqualTo=Ee.gte=function(e){return this.cmp(e)>=0},Ee.isInteger=Ee.isint=function(){return this.e>this.d.length-2},Ee.isNegative=Ee.isneg=function(){return this.s<0},Ee.isPositive=Ee.ispos=function(){return this.s>0},Ee.isZero=function(){return this.s===0},Ee.lessThan=Ee.lt=function(e){return this.cmp(e)<0},Ee.lessThanOrEqualTo=Ee.lte=function(e){return this.cmp(e)<1},Ee.logarithm=Ee.log=function(e){var t,n=this,r=n.constructor,o=r.precision,a=o+5;if(e===void 0)e=new r(10);else if(e=new r(e),e.s<1||e.eq(Ln))throw Error(Gn+"NaN");if(n.s<1)throw Error(Gn+(n.s?"NaN":"-Infinity"));return n.eq(Ln)?new r(0):(jt=!1,t=Po(Kl(n,a),Kl(e,a),a),jt=!0,ft(t,o))},Ee.minus=Ee.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?o8(t,e):t8(t,(e.s=-e.s,e))},Ee.modulo=Ee.mod=function(e){var t,n=this,r=n.constructor,o=r.precision;if(e=new r(e),!e.s)throw Error(Gn+"NaN");return n.s?(jt=!1,t=Po(n,e,0,1).times(e),jt=!0,n.minus(t)):ft(new r(n),o)},Ee.naturalExponential=Ee.exp=function(){return n8(this)},Ee.naturalLogarithm=Ee.ln=function(){return Kl(this)},Ee.negated=Ee.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e},Ee.plus=Ee.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?t8(t,e):o8(t,(e.s=-e.s,e))},Ee.precision=Ee.sd=function(e){var t,n,r,o=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(za+e);if(t=Dt(o)+1,r=o.d.length-1,n=r*bt+1,r=o.d[r],r){for(;r%10==0;r/=10)n--;for(r=o.d[0];r>=10;r/=10)n++}return e&&t>n?t:n},Ee.squareRoot=Ee.sqrt=function(){var e,t,n,r,o,a,i,s=this,c=s.constructor;if(s.s<1){if(!s.s)return new c(0);throw Error(Gn+"NaN")}for(e=Dt(s),jt=!1,o=Math.sqrt(+s),o==0||o==1/0?(t=Fr(s.d),(t.length+e)%2==0&&(t+="0"),o=Math.sqrt(t),e=bs((e+1)/2)-(e<0||e%2),o==1/0?t="5e"+e:(t=o.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),r=new c(t)):r=new c(o.toString()),n=c.precision,o=i=n+3;;)if(a=r,r=a.plus(Po(s,a,i+2)).times(.5),Fr(a.d).slice(0,i)===(t=Fr(r.d)).slice(0,i)){if(t=t.slice(i-3,i+1),o==i&&t=="4999"){if(ft(a,n+1,0),a.times(a).eq(s)){r=a;break}}else if(t!="9999")break;i+=4}return jt=!0,ft(r,n)},Ee.times=Ee.mul=function(e){var t,n,r,o,a,i,s,c,l,u=this,d=u.constructor,f=u.d,p=(e=new d(e)).d;if(!u.s||!e.s)return new d(0);for(e.s*=u.s,n=u.e+e.e,c=f.length,l=p.length,c<l&&(a=f,f=p,p=a,i=c,c=l,l=i),a=[],i=c+l,r=i;r--;)a.push(0);for(r=l;--r>=0;){for(t=0,o=c+r;o>r;)s=a[o]+p[r]*f[o-r-1]+t,a[o--]=s%Wt|0,t=s/Wt|0;a[o]=(a[o]+t)%Wt|0}for(;!a[--i];)a.pop();return t?++n:a.shift(),e.d=a,e.e=n,jt?ft(e,d.precision):e},Ee.toDecimalPlaces=Ee.todp=function(e,t){var n=this,r=n.constructor;return n=new r(n),e===void 0?n:(Lr(e,0,vs),t===void 0?t=r.rounding:Lr(t,0,8),ft(n,e+Dt(n)+1,t))},Ee.toExponential=function(e,t){var n,r=this,o=r.constructor;return e===void 0?n=Ua(r,!0):(Lr(e,0,vs),t===void 0?t=o.rounding:Lr(t,0,8),r=ft(new o(r),e+1,t),n=Ua(r,!0,e+1)),n},Ee.toFixed=function(e,t){var n,r,o=this,a=o.constructor;return e===void 0?Ua(o):(Lr(e,0,vs),t===void 0?t=a.rounding:Lr(t,0,8),r=ft(new a(o),e+Dt(o)+1,t),n=Ua(r.abs(),!1,e+Dt(r)+1),o.isneg()&&!o.isZero()?"-"+n:n)},Ee.toInteger=Ee.toint=function(){var e=this,t=e.constructor;return ft(new t(e),Dt(e)+1,t.rounding)},Ee.toNumber=function(){return+this},Ee.toPower=Ee.pow=function(e){var t,n,r,o,a,i,s=this,c=s.constructor,l=12,u=+(e=new c(e));if(!e.s)return new c(Ln);if(s=new c(s),!s.s){if(e.s<1)throw Error(Gn+"Infinity");return s}if(s.eq(Ln))return s;if(r=c.precision,e.eq(Ln))return ft(s,r);if(t=e.e,n=e.d.length-1,i=t>=n,a=s.s,i){if((n=u<0?-u:u)<=e8){for(o=new c(Ln),t=Math.ceil(r/bt+4),jt=!1;n%2&&(o=o.times(s),a8(o.d,t)),n=bs(n/2),n!==0;)s=s.times(s),a8(s.d,t);return jt=!0,e.s<0?new c(Ln).div(o):ft(o,r)}}else if(a<0)throw Error(Gn+"NaN");return a=a<0&&e.d[Math.max(t,n)]&1?-1:1,s.s=1,jt=!1,o=e.times(Kl(s,r+l)),jt=!0,o=n8(o),o.s=a,o},Ee.toPrecision=function(e,t){var n,r,o=this,a=o.constructor;return e===void 0?(n=Dt(o),r=Ua(o,n<=a.toExpNeg||n>=a.toExpPos)):(Lr(e,1,vs),t===void 0?t=a.rounding:Lr(t,0,8),o=ft(new a(o),e,t),n=Dt(o),r=Ua(o,e<=n||n<=a.toExpNeg,e)),r},Ee.toSignificantDigits=Ee.tosd=function(e,t){var n=this,r=n.constructor;return e===void 0?(e=r.precision,t=r.rounding):(Lr(e,1,vs),t===void 0?t=r.rounding:Lr(t,0,8)),ft(new r(n),e,t)},Ee.toString=Ee.valueOf=Ee.val=Ee.toJSON=Ee[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Dt(e),n=e.constructor;return Ua(e,t<=n.toExpNeg||t>=n.toExpPos)};function t8(e,t){var n,r,o,a,i,s,c,l,u=e.constructor,d=u.precision;if(!e.s||!t.s)return t.s||(t=new u(e)),jt?ft(t,d):t;if(c=e.d,l=t.d,i=e.e,o=t.e,c=c.slice(),a=i-o,a){for(a<0?(r=c,a=-a,s=l.length):(r=l,o=i,s=c.length),i=Math.ceil(d/bt),s=i>s?i+1:s+1,a>s&&(a=s,r.length=1),r.reverse();a--;)r.push(0);r.reverse()}for(s=c.length,a=l.length,s-a<0&&(a=s,r=l,l=c,c=r),n=0;a;)n=(c[--a]=c[a]+l[a]+n)/Wt|0,c[a]%=Wt;for(n&&(c.unshift(n),++o),s=c.length;c[--s]==0;)c.pop();return t.d=c,t.e=o,jt?ft(t,d):t}function Lr(e,t,n){if(e!==~~e||e<t||e>n)throw Error(za+e)}function Fr(e){var t,n,r,o=e.length-1,a="",i=e[0];if(o>0){for(a+=i,t=1;t<o;t++)r=e[t]+"",n=bt-r.length,n&&(a+=aa(n)),a+=r;i=e[t],r=i+"",n=bt-r.length,n&&(a+=aa(n))}else if(i===0)return"0";for(;i%10===0;)i/=10;return a+i}var Po=function(){function e(r,o){var a,i=0,s=r.length;for(r=r.slice();s--;)a=r[s]*o+i,r[s]=a%Wt|0,i=a/Wt|0;return i&&r.unshift(i),r}function t(r,o,a,i){var s,c;if(a!=i)c=a>i?1:-1;else for(s=c=0;s<a;s++)if(r[s]!=o[s]){c=r[s]>o[s]?1:-1;break}return c}function n(r,o,a){for(var i=0;a--;)r[a]-=i,i=r[a]<o[a]?1:0,r[a]=i*Wt+r[a]-o[a];for(;!r[0]&&r.length>1;)r.shift()}return function(r,o,a,i){var s,c,l,u,d,f,p,y,m,v,b,x,_,w,j,E,S,O,N=r.constructor,P=r.s==o.s?1:-1,k=r.d,R=o.d;if(!r.s)return new N(r);if(!o.s)throw Error(Gn+"Division by zero");for(c=r.e-o.e,S=R.length,j=k.length,p=new N(P),y=p.d=[],l=0;R[l]==(k[l]||0);)++l;if(R[l]>(k[l]||0)&&--c,a==null?x=a=N.precision:i?x=a+(Dt(r)-Dt(o))+1:x=a,x<0)return new N(0);if(x=x/bt+2|0,l=0,S==1)for(u=0,R=R[0],x++;(l<j||u)&&x--;l++)_=u*Wt+(k[l]||0),y[l]=_/R|0,u=_%R|0;else{for(u=Wt/(R[0]+1)|0,u>1&&(R=e(R,u),k=e(k,u),S=R.length,j=k.length),w=S,m=k.slice(0,S),v=m.length;v<S;)m[v++]=0;O=R.slice(),O.unshift(0),E=R[0],R[1]>=Wt/2&&++E;do u=0,s=t(R,m,S,v),s<0?(b=m[0],S!=v&&(b=b*Wt+(m[1]||0)),u=b/E|0,u>1?(u>=Wt&&(u=Wt-1),d=e(R,u),f=d.length,v=m.length,s=t(d,m,f,v),s==1&&(u--,n(d,S<f?O:R,f))):(u==0&&(s=u=1),d=R.slice()),f=d.length,f<v&&d.unshift(0),n(m,d,v),s==-1&&(v=m.length,s=t(R,m,S,v),s<1&&(u++,n(m,S<v?O:R,v))),v=m.length):s===0&&(u++,m=[0]),y[l++]=u,s&&m[0]?m[v++]=k[w]||0:(m=[k[w]],v=1);while((w++<j||m[0]!==void 0)&&x--)}return y[0]||y.shift(),p.e=c,ft(p,i?a+Dt(p)+1:a)}}();function n8(e,t){var n,r,o,a,i,s,c=0,l=0,u=e.constructor,d=u.precision;if(Dt(e)>16)throw Error(w_+Dt(e));if(!e.s)return new u(Ln);for(t==null?(jt=!1,s=d):s=t,i=new u(.03125);e.abs().gte(.1);)e=e.times(i),l+=5;for(r=Math.log(Va(2,l))/Math.LN10*2+5|0,s+=r,n=o=a=new u(Ln),u.precision=s;;){if(o=ft(o.times(e),s),n=n.times(++c),i=a.plus(Po(o,n,s)),Fr(i.d).slice(0,s)===Fr(a.d).slice(0,s)){for(;l--;)a=ft(a.times(a),s);return u.precision=d,t==null?(jt=!0,ft(a,d)):a}a=i}}function Dt(e){for(var t=e.e*bt,n=e.d[0];n>=10;n/=10)t++;return t}function __(e,t,n){if(t>e.LN10.sd())throw jt=!0,n&&(e.precision=n),Error(Gn+"LN10 precision limit exceeded");return ft(new e(e.LN10),t)}function aa(e){for(var t="";e--;)t+="0";return t}function Kl(e,t){var n,r,o,a,i,s,c,l,u,d=1,f=10,p=e,y=p.d,m=p.constructor,v=m.precision;if(p.s<1)throw Error(Gn+(p.s?"NaN":"-Infinity"));if(p.eq(Ln))return new m(0);if(t==null?(jt=!1,l=v):l=t,p.eq(10))return t==null&&(jt=!0),__(m,l);if(l+=f,m.precision=l,n=Fr(y),r=n.charAt(0),a=Dt(p),Math.abs(a)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)p=p.times(e),n=Fr(p.d),r=n.charAt(0),d++;a=Dt(p),r>1?(p=new m("0."+n),a++):p=new m(r+"."+n.slice(1))}else return c=__(m,l+2,v).times(a+""),p=Kl(new m(r+"."+n.slice(1)),l-f).plus(c),m.precision=v,t==null?(jt=!0,ft(p,v)):p;for(s=i=p=Po(p.minus(Ln),p.plus(Ln),l),u=ft(p.times(p),l),o=3;;){if(i=ft(i.times(u),l),c=s.plus(Po(i,new m(o),l)),Fr(c.d).slice(0,l)===Fr(s.d).slice(0,l))return s=s.times(2),a!==0&&(s=s.plus(__(m,l+2,v).times(a+""))),s=Po(s,new m(d),l),m.precision=v,t==null?(jt=!0,ft(s,v)):s;s=c,o+=2}}function r8(e,t){var n,r,o;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;t.charCodeAt(r)===48;)++r;for(o=t.length;t.charCodeAt(o-1)===48;)--o;if(t=t.slice(r,o),t){if(o-=r,n=n-r-1,e.e=bs(n/bt),e.d=[],r=(n+1)%bt,n<0&&(r+=bt),r<o){for(r&&e.d.push(+t.slice(0,r)),o-=bt;r<o;)e.d.push(+t.slice(r,r+=bt));t=t.slice(r),r=bt-t.length}else r-=o;for(;r--;)t+="0";if(e.d.push(+t),jt&&(e.e>Bp||e.e<-Bp))throw Error(w_+n)}else e.s=0,e.e=0,e.d=[0];return e}function ft(e,t,n){var r,o,a,i,s,c,l,u,d=e.d;for(i=1,a=d[0];a>=10;a/=10)i++;if(r=t-i,r<0)r+=bt,o=t,l=d[u=0];else{if(u=Math.ceil((r+1)/bt),a=d.length,u>=a)return e;for(l=a=d[u],i=1;a>=10;a/=10)i++;r%=bt,o=r-bt+i}if(n!==void 0&&(a=Va(10,i-o-1),s=l/a%10|0,c=t<0||d[u+1]!==void 0||l%a,c=n<4?(s||c)&&(n==0||n==(e.s<0?3:2)):s>5||s==5&&(n==4||c||n==6&&(r>0?o>0?l/Va(10,i-o):0:d[u-1])%10&1||n==(e.s<0?8:7))),t<1||!d[0])return c?(a=Dt(e),d.length=1,t=t-a-1,d[0]=Va(10,(bt-t%bt)%bt),e.e=bs(-t/bt)||0):(d.length=1,d[0]=e.e=e.s=0),e;if(r==0?(d.length=u,a=1,u--):(d.length=u+1,a=Va(10,bt-r),d[u]=o>0?(l/Va(10,i-o)%Va(10,o)|0)*a:0),c)for(;;)if(u==0){(d[0]+=a)==Wt&&(d[0]=1,++e.e);break}else{if(d[u]+=a,d[u]!=Wt)break;d[u--]=0,a=1}for(r=d.length;d[--r]===0;)d.pop();if(jt&&(e.e>Bp||e.e<-Bp))throw Error(w_+Dt(e));return e}function o8(e,t){var n,r,o,a,i,s,c,l,u,d,f=e.constructor,p=f.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new f(e),jt?ft(t,p):t;if(c=e.d,d=t.d,r=t.e,l=e.e,c=c.slice(),i=l-r,i){for(u=i<0,u?(n=c,i=-i,s=d.length):(n=d,r=l,s=c.length),o=Math.max(Math.ceil(p/bt),s)+2,i>o&&(i=o,n.length=1),n.reverse(),o=i;o--;)n.push(0);n.reverse()}else{for(o=c.length,s=d.length,u=o<s,u&&(s=o),o=0;o<s;o++)if(c[o]!=d[o]){u=c[o]<d[o];break}i=0}for(u&&(n=c,c=d,d=n,t.s=-t.s),s=c.length,o=d.length-s;o>0;--o)c[s++]=0;for(o=d.length;o>i;){if(c[--o]<d[o]){for(a=o;a&&c[--a]===0;)c[a]=Wt-1;--c[a],c[o]+=Wt}c[o]-=d[o]}for(;c[--s]===0;)c.pop();for(;c[0]===0;c.shift())--r;return c[0]?(t.d=c,t.e=r,jt?ft(t,p):t):new f(0)}function Ua(e,t,n){var r,o=Dt(e),a=Fr(e.d),i=a.length;return t?(n&&(r=n-i)>0?a=a.charAt(0)+"."+a.slice(1)+aa(r):i>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(o<0?"e":"e+")+o):o<0?(a="0."+aa(-o-1)+a,n&&(r=n-i)>0&&(a+=aa(r))):o>=i?(a+=aa(o+1-i),n&&(r=n-o-1)>0&&(a=a+"."+aa(r))):((r=o+1)<i&&(a=a.slice(0,r)+"."+a.slice(r)),n&&(r=n-i)>0&&(o+1===i&&(a+="."),a+=aa(r))),e.s<0?"-"+a:a}function a8(e,t){if(e.length>t)return e.length=t,!0}function i8(e){var t,n,r;function o(a){var i=this;if(!(i instanceof o))return new o(a);if(i.constructor=o,a instanceof o){i.s=a.s,i.e=a.e,i.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(za+a);if(a>0)i.s=1;else if(a<0)a=-a,i.s=-1;else{i.s=0,i.e=0,i.d=[0];return}if(a===~~a&&a<1e7){i.e=0,i.d=[a];return}return r8(i,a.toString())}else if(typeof a!="string")throw Error(za+a);if(a.charCodeAt(0)===45?(a=a.slice(1),i.s=-1):i.s=1,zde.test(a))r8(i,a);else throw Error(za+a)}if(o.prototype=Ee,o.ROUND_UP=0,o.ROUND_DOWN=1,o.ROUND_CEIL=2,o.ROUND_FLOOR=3,o.ROUND_HALF_UP=4,o.ROUND_HALF_DOWN=5,o.ROUND_HALF_EVEN=6,o.ROUND_HALF_CEIL=7,o.ROUND_HALF_FLOOR=8,o.clone=i8,o.config=o.set=Vde,e===void 0&&(e={}),e)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<r.length;)e.hasOwnProperty(n=r[t++])||(e[n]=this[n]);return o.config(e),o}function Vde(e){if(!e||typeof e!="object")throw Error(Gn+"Object expected");var t,n,r,o=["precision",1,vs,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<o.length;t+=3)if((r=e[n=o[t]])!==void 0)if(bs(r)===r&&r>=o[t+1]&&r<=o[t+2])this[n]=r;else throw Error(za+n+": "+r);if((r=e[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(za+n+": "+r);return this}var j_=i8($de);Ln=new j_(1);const lt=j_;function Ude(e){return Yde(e)||qde(e)||Wde(e)||Hde()}function Hde(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Wde(e,t){if(e){if(typeof e=="string")return E_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return E_(e,t)}}function qde(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function Yde(e){if(Array.isArray(e))return E_(e)}function E_(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Kde=function(e){return e},s8={"@@functional/placeholder":!0},c8=function(e){return e===s8},l8=function(e){return function t(){return arguments.length===0||arguments.length===1&&c8(arguments.length<=0?void 0:arguments[0])?t:e.apply(void 0,arguments)}},Xde=function e(t,n){return t===1?n:l8(function(){for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];var i=o.filter(function(s){return s!==s8}).length;return i>=t?n.apply(void 0,o):e(t-i,l8(function(){for(var s=arguments.length,c=new Array(s),l=0;l<s;l++)c[l]=arguments[l];var u=o.map(function(d){return c8(d)?c.shift():d});return n.apply(void 0,Ude(u).concat(c))}))})},$p=function(e){return Xde(e.length,e)},S_=function(e,t){for(var n=[],r=e;r<t;++r)n[r-e]=r;return n},Gde=$p(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(n){return t[n]}).map(e)}),Qde=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!t.length)return Kde;var r=t.reverse(),o=r[0],a=r.slice(1);return function(){return a.reduce(function(i,s){return s(i)},o.apply(void 0,arguments))}},C_=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},u8=function(e){var t=null,n=null;return function(){for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return t&&o.every(function(i,s){return i===t[s]})||(t=o,n=e.apply(void 0,o)),n}};function Jde(e){var t;return e===0?t=1:t=Math.floor(new lt(e).abs().log(10).toNumber())+1,t}function Zde(e,t,n){for(var r=new lt(e),o=0,a=[];r.lt(t)&&o<1e5;)a.push(r.toNumber()),r=r.add(n),o++;return a}var efe=$p(function(e,t,n){var r=+e,o=+t;return r+n*(o-r)}),tfe=$p(function(e,t,n){var r=t-+e;return r=r||1/0,(n-e)/r}),nfe=$p(function(e,t,n){var r=t-+e;return r=r||1/0,Math.max(0,Math.min(1,(n-e)/r))});const zp={rangeStep:Zde,getDigitCount:Jde,interpolateNumber:efe,uninterpolateNumber:tfe,uninterpolateTruncation:nfe};function O_(e){return afe(e)||ofe(e)||d8(e)||rfe()}function rfe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ofe(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function afe(e){if(Array.isArray(e))return M_(e)}function Xl(e,t){return cfe(e)||sfe(e,t)||d8(e,t)||ife()}function ife(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function d8(e,t){if(e){if(typeof e=="string")return M_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return M_(e,t)}}function M_(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function sfe(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var n=[],r=!0,o=!1,a=void 0;try{for(var i=e[Symbol.iterator](),s;!(r=(s=i.next()).done)&&(n.push(s.value),!(t&&n.length===t));r=!0);}catch(c){o=!0,a=c}finally{try{!r&&i.return!=null&&i.return()}finally{if(o)throw a}}return n}}function cfe(e){if(Array.isArray(e))return e}function f8(e){var t=Xl(e,2),n=t[0],r=t[1],o=n,a=r;return n>r&&(o=r,a=n),[o,a]}function p8(e,t,n){if(e.lte(0))return new lt(0);var r=zp.getDigitCount(e.toNumber()),o=new lt(10).pow(r),a=e.div(o),i=r!==1?.05:.1,s=new lt(Math.ceil(a.div(i).toNumber())).add(n).mul(i),c=s.mul(o);return t?c:new lt(Math.ceil(c))}function lfe(e,t,n){var r=1,o=new lt(e);if(!o.isint()&&n){var a=Math.abs(e);a<1?(r=new lt(10).pow(zp.getDigitCount(e)-1),o=new lt(Math.floor(o.div(r).toNumber())).mul(r)):a>1&&(o=new lt(Math.floor(e)))}else e===0?o=new lt(Math.floor((t-1)/2)):n||(o=new lt(Math.floor(e)));var i=Math.floor((t-1)/2),s=Qde(Gde(function(c){return o.add(new lt(c-i).mul(r)).toNumber()}),S_);return s(0,t)}function h8(e,t,n,r){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(n-1)))return{step:new lt(0),tickMin:new lt(0),tickMax:new lt(0)};var a=p8(new lt(t).sub(e).div(n-1),r,o),i;e<=0&&t>=0?i=new lt(0):(i=new lt(e).add(t).div(2),i=i.sub(new lt(i).mod(a)));var s=Math.ceil(i.sub(e).div(a).toNumber()),c=Math.ceil(new lt(t).sub(i).div(a).toNumber()),l=s+c+1;return l>n?h8(e,t,n,r,o+1):(l<n&&(c=t>0?c+(n-l):c,s=t>0?s:s+(n-l)),{step:a,tickMin:i.sub(new lt(s).mul(a)),tickMax:i.add(new lt(c).mul(a))})}function ufe(e){var t=Xl(e,2),n=t[0],r=t[1],o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=Math.max(o,2),s=f8([n,r]),c=Xl(s,2),l=c[0],u=c[1];if(l===-1/0||u===1/0){var d=u===1/0?[l].concat(O_(S_(0,o-1).map(function(){return 1/0}))):[].concat(O_(S_(0,o-1).map(function(){return-1/0})),[u]);return n>r?C_(d):d}if(l===u)return lfe(l,o,a);var f=h8(l,u,i,a),p=f.step,y=f.tickMin,m=f.tickMax,v=zp.rangeStep(y,m.add(new lt(.1).mul(p)),p);return n>r?C_(v):v}function dfe(e,t){var n=Xl(e,2),r=n[0],o=n[1],a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=f8([r,o]),s=Xl(i,2),c=s[0],l=s[1];if(c===-1/0||l===1/0)return[r,o];if(c===l)return[c];var u=Math.max(t,2),d=p8(new lt(l).sub(c).div(u-1),a,0),f=[].concat(O_(zp.rangeStep(new lt(c),new lt(l).sub(new lt(.99).mul(d)),d)),[l]);return r>o?C_(f):f}var ffe=u8(ufe),pfe=u8(dfe),hfe="Invariant failed";function Ha(e,t){throw new Error(hfe)}var mfe=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function xs(e){"@babel/helpers - typeof";return xs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xs(e)}function Vp(){return Vp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Vp.apply(this,arguments)}function yfe(e,t){return xfe(e)||bfe(e,t)||vfe(e,t)||gfe()}function gfe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vfe(e,t){if(e){if(typeof e=="string")return m8(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m8(e,t)}}function m8(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function bfe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,o,a,i,s=[],c=!0,l=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(c=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(u){l=!0,o=u}finally{try{if(!c&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return s}}function xfe(e){if(Array.isArray(e))return e}function wfe(e,t){if(e==null)return{};var n=_fe(e,t),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function _fe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function jfe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Efe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,v8(r.key),r)}}function Sfe(e,t,n){return t&&Efe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Cfe(e,t,n){return t=Up(t),Ofe(e,y8()?Reflect.construct(t,n||[],Up(e).constructor):t.apply(e,n))}function Ofe(e,t){if(t&&(xs(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Mfe(e)}function Mfe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y8(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(y8=function(){return!!e})()}function Up(e){return Up=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Up(e)}function Nfe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&N_(e,t)}function N_(e,t){return N_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},N_(e,t)}function g8(e,t,n){return t=v8(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v8(e){var t=kfe(e,"string");return xs(t)=="symbol"?t:t+""}function kfe(e,t){if(xs(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(xs(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Hp=function(e){function t(){return jfe(this,t),Cfe(this,t,arguments)}return Nfe(t,e),Sfe(t,[{key:"render",value:function(){var n=this.props,r=n.offset,o=n.layout,a=n.width,i=n.dataKey,s=n.data,c=n.dataPointFormatter,l=n.xAxis,u=n.yAxis,d=wfe(n,mfe),f=nt(d,!1);this.props.direction==="x"&&l.type!=="number"&&Ha();var p=s.map(function(y){var m=c(y,i),v=m.x,b=m.y,x=m.value,_=m.errorVal;if(!_)return null;var w=[],j,E;if(Array.isArray(_)){var S=yfe(_,2);j=S[0],E=S[1]}else j=E=_;if(o==="vertical"){var O=l.scale,N=b+r,P=N+a,k=N-a,R=O(x-j),A=O(x+E);w.push({x1:A,y1:P,x2:A,y2:k}),w.push({x1:R,y1:N,x2:A,y2:N}),w.push({x1:R,y1:P,x2:R,y2:k})}else if(o==="horizontal"){var C=u.scale,M=v+r,T=M-a,I=M+a,L=C(x-j),D=C(x+E);w.push({x1:T,y1:D,x2:I,y2:D}),w.push({x1:M,y1:L,x2:M,y2:D}),w.push({x1:T,y1:L,x2:I,y2:L})}return V.createElement(Ut,Vp({className:"recharts-errorBar",key:"bar-".concat(w.map(function($){return"".concat($.x1,"-").concat($.x2,"-").concat($.y1,"-").concat($.y2)}))},f),w.map(function($){return V.createElement("line",Vp({},$,{key:"line-".concat($.x1,"-").concat($.x2,"-").concat($.y1,"-").concat($.y2)}))}))});return V.createElement(Ut,{className:"recharts-errorBars"},p)}}])}(V.Component);g8(Hp,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"}),g8(Hp,"displayName","ErrorBar");function Gl(e){"@babel/helpers - typeof";return Gl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gl(e)}function b8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Wa(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?b8(Object(n),!0).forEach(function(r){Pfe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b8(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Pfe(e,t,n){return t=Afe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Afe(e){var t=Tfe(e,"string");return Gl(t)=="symbol"?t:t+""}function Tfe(e,t){if(Gl(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Gl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var x8=function(e){var t=e.children,n=e.formattedGraphicalItems,r=e.legendWidth,o=e.legendContent,a=Dn(t,ls);if(!a)return null;var i=ls.defaultProps,s=i!==void 0?Wa(Wa({},i),a.props):{},c;return a.props&&a.props.payload?c=a.props&&a.props.payload:o==="children"?c=(n||[]).reduce(function(l,u){var d=u.item,f=u.props,p=f.sectors||f.data||[];return l.concat(p.map(function(y){return{type:a.props.iconType||d.props.legendType,value:y.name,color:y.fill,payload:y}}))},[]):c=(n||[]).map(function(l){var u=l.item,d=u.type.defaultProps,f=d!==void 0?Wa(Wa({},d),u.props):{},p=f.dataKey,y=f.name,m=f.legendType,v=f.hide;return{inactive:v,dataKey:p,type:s.iconType||m||"square",color:P_(u),value:y||p,payload:f}}),Wa(Wa(Wa({},s),ls.getWithHeight(a,r)),{},{payload:c,item:a})};function Ql(e){"@babel/helpers - typeof";return Ql=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ql(e)}function w8(e){return Lfe(e)||Dfe(e)||Ife(e)||Rfe()}function Rfe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ife(e,t){if(e){if(typeof e=="string")return k_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return k_(e,t)}}function Dfe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Lfe(e){if(Array.isArray(e))return k_(e)}function k_(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function kt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?_8(Object(n),!0).forEach(function(r){ws(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_8(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ws(e,t,n){return t=Ffe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ffe(e){var t=Bfe(e,"string");return Ql(t)=="symbol"?t:t+""}function Bfe(e,t){if(Ql(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Ql(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Br(e,t,n){return rt(e)||rt(t)?n:Bt(t)?Hn(e,t,n):We(t)?t(e):n}function Wp(e,t,n,r){var o=Lde(e,function(s){return Br(s,t)});if(n==="number"){var a=o.filter(function(s){return me(s)||parseFloat(s)});return a.length?[Fp(a),Lp(a)]:[1/0,-1/0]}var i=r?o.filter(function(s){return!rt(s)}):o;return i.map(function(s){return Bt(s)||s instanceof Date?s:""})}var $fe=function(e){var t,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,a=-1,i=(t=n==null?void 0:n.length)!==null&&t!==void 0?t:0;if(i<=1)return 0;if(o&&o.axisType==="angleAxis"&&Math.abs(Math.abs(o.range[1]-o.range[0])-360)<=1e-6)for(var s=o.range,c=0;c<i;c++){var l=c>0?r[c-1].coordinate:r[i-1].coordinate,u=r[c].coordinate,d=c>=i-1?r[0].coordinate:r[c+1].coordinate,f=void 0;if(yr(u-l)!==yr(d-u)){var p=[];if(yr(d-u)===yr(s[1]-s[0])){f=d;var y=u+s[1]-s[0];p[0]=Math.min(y,(y+l)/2),p[1]=Math.max(y,(y+l)/2)}else{f=l;var m=d+s[1]-s[0];p[0]=Math.min(u,(m+u)/2),p[1]=Math.max(u,(m+u)/2)}var v=[Math.min(u,(f+u)/2),Math.max(u,(f+u)/2)];if(e>v[0]&&e<=v[1]||e>=p[0]&&e<=p[1]){a=r[c].index;break}}else{var b=Math.min(l,d),x=Math.max(l,d);if(e>(b+u)/2&&e<=(x+u)/2){a=r[c].index;break}}}else for(var _=0;_<i;_++)if(_===0&&e<=(n[_].coordinate+n[_+1].coordinate)/2||_>0&&_<i-1&&e>(n[_].coordinate+n[_-1].coordinate)/2&&e<=(n[_].coordinate+n[_+1].coordinate)/2||_===i-1&&e>(n[_].coordinate+n[_-1].coordinate)/2){a=n[_].index;break}return a},P_=function(e){var t,n=e,r=n.type.displayName,o=(t=e.type)!==null&&t!==void 0&&t.defaultProps?kt(kt({},e.type.defaultProps),e.props):e.props,a=o.stroke,i=o.fill,s;switch(r){case"Line":s=a;break;case"Area":case"Radar":s=a&&a!=="none"?a:i;break;default:s=i;break}return s},zfe=function(e){var t=e.barSize,n=e.totalSize,r=e.stackGroups,o=r===void 0?{}:r;if(!o)return{};for(var a={},i=Object.keys(o),s=0,c=i.length;s<c;s++)for(var l=o[i[s]].stackGroups,u=Object.keys(l),d=0,f=u.length;d<f;d++){var p=l[u[d]],y=p.items,m=p.cateAxisId,v=y.filter(function(E){return _o(E.type).indexOf("Bar")>=0});if(v&&v.length){var b=v[0].type.defaultProps,x=b!==void 0?kt(kt({},b),v[0].props):v[0].props,_=x.barSize,w=x[m];a[w]||(a[w]=[]);var j=rt(_)?t:_;a[w].push({item:v[0],stackList:v.slice(1),barSize:rt(j)?void 0:Da(j,n,0)})}}return a},Vfe=function(e){var t=e.barGap,n=e.barCategoryGap,r=e.bandSize,o=e.sizeList,a=o===void 0?[]:o,i=e.maxBarSize,s=a.length;if(s<1)return null;var c=Da(t,r,0,!0),l,u=[];if(a[0].barSize===+a[0].barSize){var d=!1,f=r/s,p=a.reduce(function(_,w){return _+w.barSize||0},0);p+=(s-1)*c,p>=r&&(p-=(s-1)*c,c=0),p>=r&&f>0&&(d=!0,f*=.9,p=s*f);var y=(r-p)/2>>0,m={offset:y-c,size:0};l=a.reduce(function(_,w){var j={item:w.item,position:{offset:m.offset+m.size+c,size:d?f:w.barSize}},E=[].concat(w8(_),[j]);return m=E[E.length-1].position,w.stackList&&w.stackList.length&&w.stackList.forEach(function(S){E.push({item:S,position:m})}),E},u)}else{var v=Da(n,r,0,!0);r-2*v-(s-1)*c<=0&&(c=0);var b=(r-2*v-(s-1)*c)/s;b>1&&(b>>=0);var x=i===+i?Math.min(b,i):b;l=a.reduce(function(_,w,j){var E=[].concat(w8(_),[{item:w.item,position:{offset:v+(b+c)*j+(b-x)/2,size:x}}]);return w.stackList&&w.stackList.length&&w.stackList.forEach(function(S){E.push({item:S,position:E[E.length-1].position})}),E},u)}return l},Ufe=function(e,t,n,r){var o=n.children,a=n.width,i=n.margin,s=a-(i.left||0)-(i.right||0),c=x8({children:o,legendWidth:s});if(c){var l=r||{},u=l.width,d=l.height,f=c.align,p=c.verticalAlign,y=c.layout;if((y==="vertical"||y==="horizontal"&&p==="middle")&&f!=="center"&&me(e[f]))return kt(kt({},e),{},ws({},f,e[f]+(u||0)));if((y==="horizontal"||y==="vertical"&&f==="center")&&p!=="middle"&&me(e[p]))return kt(kt({},e),{},ws({},p,e[p]+(d||0)))}return e},Hfe=function(e,t,n){return rt(t)?!0:e==="horizontal"?t==="yAxis":e==="vertical"||n==="x"?t==="xAxis":n==="y"?t==="yAxis":!0},j8=function(e,t,n,r,o){var a=t.props.children,i=gr(a,Hp).filter(function(c){return Hfe(r,o,c.props.direction)});if(i&&i.length){var s=i.map(function(c){return c.props.dataKey});return e.reduce(function(c,l){var u=Br(l,n);if(rt(u))return c;var d=Array.isArray(u)?[Fp(u),Lp(u)]:[u,u],f=s.reduce(function(p,y){var m=Br(l,y,0),v=d[0]-Math.abs(Array.isArray(m)?m[0]:m),b=d[1]+Math.abs(Array.isArray(m)?m[1]:m);return[Math.min(v,p[0]),Math.max(b,p[1])]},[1/0,-1/0]);return[Math.min(f[0],c[0]),Math.max(f[1],c[1])]},[1/0,-1/0])}return null},Wfe=function(e,t,n,r,o){var a=t.map(function(i){return j8(e,i,n,o,r)}).filter(function(i){return!rt(i)});return a&&a.length?a.reduce(function(i,s){return[Math.min(i[0],s[0]),Math.max(i[1],s[1])]},[1/0,-1/0]):null},E8=function(e,t,n,r,o){var a=t.map(function(s){var c=s.props.dataKey;return n==="number"&&c&&j8(e,s,c,r)||Wp(e,c,n,o)});if(n==="number")return a.reduce(function(s,c){return[Math.min(s[0],c[0]),Math.max(s[1],c[1])]},[1/0,-1/0]);var i={};return a.reduce(function(s,c){for(var l=0,u=c.length;l<u;l++)i[c[l]]||(i[c[l]]=!0,s.push(c[l]));return s},[])},S8=function(e,t){return e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis"},C8=function(e,t,n,r){if(r)return e.map(function(s){return s.coordinate});var o,a,i=e.map(function(s){return s.coordinate===t&&(o=!0),s.coordinate===n&&(a=!0),s.coordinate});return o||i.push(t),a||i.push(n),i},Ao=function(e,t,n){if(!e)return null;var r=e.scale,o=e.duplicateDomain,a=e.type,i=e.range,s=e.realScaleType==="scaleBand"?r.bandwidth()/2:2,c=(t||n)&&a==="category"&&r.bandwidth?r.bandwidth()/s:0;if(c=e.axisType==="angleAxis"&&(i==null?void 0:i.length)>=2?yr(i[0]-i[1])*2*c:c,t&&(e.ticks||e.niceTicks)){var l=(e.ticks||e.niceTicks).map(function(u){var d=o?o.indexOf(u):u;return{coordinate:r(d)+c,value:u,offset:c}});return l.filter(function(u){return!Ml(u.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(u,d){return{coordinate:r(u)+c,value:u,index:d,offset:c}}):r.ticks&&!n?r.ticks(e.tickCount).map(function(u){return{coordinate:r(u)+c,value:u,offset:c}}):r.domain().map(function(u,d){return{coordinate:r(u)+c,value:o?o[u]:u,index:d,offset:c}})},A_=new WeakMap,qp=function(e,t){if(typeof t!="function")return e;A_.has(e)||A_.set(e,new WeakMap);var n=A_.get(e);if(n.has(t))return n.get(t);var r=function(){e.apply(void 0,arguments),t.apply(void 0,arguments)};return n.set(t,r),r},qfe=function(e,t,n){var r=e.scale,o=e.type,a=e.layout,i=e.axisType;if(r==="auto")return a==="radial"&&i==="radiusAxis"?{scale:$l(),realScaleType:"band"}:a==="radial"&&i==="angleAxis"?{scale:Mp(),realScaleType:"linear"}:o==="category"&&t&&(t.indexOf("LineChart")>=0||t.indexOf("AreaChart")>=0||t.indexOf("ComposedChart")>=0&&!n)?{scale:zl(),realScaleType:"point"}:o==="category"?{scale:$l(),realScaleType:"band"}:{scale:Mp(),realScaleType:"linear"};if(Ol(r)){var s="scale".concat(rp(r));return{scale:(H6[s]||zl)(),realScaleType:H6[s]?s:"point"}}return We(r)?{scale:r}:{scale:zl(),realScaleType:"point"}},O8=1e-4,Yfe=function(e){var t=e.domain();if(!(!t||t.length<=2)){var n=t.length,r=e.range(),o=Math.min(r[0],r[1])-O8,a=Math.max(r[0],r[1])+O8,i=e(t[0]),s=e(t[n-1]);(i<o||i>a||s<o||s>a)&&e.domain([t[0],t[n-1]])}},Kfe=function(e,t){if(!e)return null;for(var n=0,r=e.length;n<r;n++)if(e[n].item===t)return e[n].position;return null},Xfe=function(e,t){if(!t||t.length!==2||!me(t[0])||!me(t[1]))return e;var n=Math.min(t[0],t[1]),r=Math.max(t[0],t[1]),o=[e[0],e[1]];return(!me(e[0])||e[0]<n)&&(o[0]=n),(!me(e[1])||e[1]>r)&&(o[1]=r),o[0]>r&&(o[0]=r),o[1]<n&&(o[1]=n),o},Gfe=function(e){var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var o=0,a=0,i=0;i<t;++i){var s=Ml(e[i][n][1])?e[i][n][0]:e[i][n][1];s>=0?(e[i][n][0]=o,e[i][n][1]=o+s,o=e[i][n][1]):(e[i][n][0]=a,e[i][n][1]=a+s,a=e[i][n][1])}},Qfe=function(e){var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var o=0,a=0;a<t;++a){var i=Ml(e[a][n][1])?e[a][n][0]:e[a][n][1];i>=0?(e[a][n][0]=o,e[a][n][1]=o+i,o=e[a][n][1]):(e[a][n][0]=0,e[a][n][1]=0)}},Jfe={sign:Gfe,expand:Qie,none:is,silhouette:Jie,wiggle:Zie,positive:Qfe},Zfe=function(e,t,n){var r=t.map(function(i){return i.props.dataKey}),o=Jfe[n],a=Gie().keys(r).value(function(i,s){return+Br(i,s,0)}).order(Dw).offset(o);return a(e)},epe=function(e,t,n,r,o,a){if(!e)return null;var i=a?t.reverse():t,s={},c=i.reduce(function(u,d){var f,p=(f=d.type)!==null&&f!==void 0&&f.defaultProps?kt(kt({},d.type.defaultProps),d.props):d.props,y=p.stackId,m=p.hide;if(m)return u;var v=p[n],b=u[v]||{hasStack:!1,stackGroups:{}};if(Bt(y)){var x=b.stackGroups[y]||{numericAxisId:n,cateAxisId:r,items:[]};x.items.push(d),b.hasStack=!0,b.stackGroups[y]=x}else b.stackGroups[ep("_stackId_")]={numericAxisId:n,cateAxisId:r,items:[d]};return kt(kt({},u),{},ws({},v,b))},s),l={};return Object.keys(c).reduce(function(u,d){var f=c[d];if(f.hasStack){var p={};f.stackGroups=Object.keys(f.stackGroups).reduce(function(y,m){var v=f.stackGroups[m];return kt(kt({},y),{},ws({},m,{numericAxisId:n,cateAxisId:r,items:v.items,stackedData:Zfe(e,v.items,o)}))},p)}return kt(kt({},u),{},ws({},d,f))},l)},tpe=function(e,t){var n=t.realScaleType,r=t.type,o=t.tickCount,a=t.originalDomain,i=t.allowDecimals,s=n||t.scale;if(s!=="auto"&&s!=="linear")return null;if(o&&r==="number"&&a&&(a[0]==="auto"||a[1]==="auto")){var c=e.domain();if(!c.length)return null;var l=ffe(c,o,i);return e.domain([Fp(l),Lp(l)]),{niceTicks:l}}if(o&&r==="number"){var u=e.domain(),d=pfe(u,o,i);return{niceTicks:d}}return null},M8=function(e){var t=e.axis,n=e.ticks,r=e.offset,o=e.bandSize,a=e.entry,i=e.index;if(t.type==="category")return n[i]?n[i].coordinate+r:null;var s=Br(a,t.dataKey,t.domain[i]);return rt(s)?null:t.scale(s)-o/2+r},npe=function(e){var t=e.numericAxis,n=t.scale.domain();if(t.type==="number"){var r=Math.min(n[0],n[1]),o=Math.max(n[0],n[1]);return r<=0&&o>=0?0:o<0?o:r}return n[0]},rpe=function(e,t){var n,r=(n=e.type)!==null&&n!==void 0&&n.defaultProps?kt(kt({},e.type.defaultProps),e.props):e.props,o=r.stackId;if(Bt(o)){var a=t[o];if(a){var i=a.items.indexOf(e);return i>=0?a.stackedData[i]:null}}return null},ope=function(e){return e.reduce(function(t,n){return[Fp(n.concat([t[0]]).filter(me)),Lp(n.concat([t[1]]).filter(me))]},[1/0,-1/0])},N8=function(e,t,n){return Object.keys(e).reduce(function(r,o){var a=e[o],i=a.stackedData,s=i.reduce(function(c,l){var u=ope(l.slice(t,n+1));return[Math.min(c[0],u[0]),Math.max(c[1],u[1])]},[1/0,-1/0]);return[Math.min(s[0],r[0]),Math.max(s[1],r[1])]},[1/0,-1/0]).map(function(r){return r===1/0||r===-1/0?0:r})},k8=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,P8=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,T_=function(e,t,n){if(We(e))return e(t,n);if(!Array.isArray(e))return t;var r=[];if(me(e[0]))r[0]=n?e[0]:Math.min(e[0],t[0]);else if(k8.test(e[0])){var o=+k8.exec(e[0])[1];r[0]=t[0]-o}else We(e[0])?r[0]=e[0](t[0]):r[0]=t[0];if(me(e[1]))r[1]=n?e[1]:Math.max(e[1],t[1]);else if(P8.test(e[1])){var a=+P8.exec(e[1])[1];r[1]=t[1]+a}else We(e[1])?r[1]=e[1](t[1]):r[1]=t[1];return r},Yp=function(e,t,n){if(e&&e.scale&&e.scale.bandwidth){var r=e.scale.bandwidth();if(!n||r>0)return r}if(e&&t&&t.length>=2){for(var o=w1(t,function(u){return u.coordinate}),a=1/0,i=1,s=o.length;i<s;i++){var c=o[i],l=o[i-1];a=Math.min((c.coordinate||0)-(l.coordinate||0),a)}return a===1/0?0:a}return n?void 0:0},A8=function(e,t,n){return!e||!e.length||x_(e,Hn(n,"type.defaultProps.domain"))?t:e},T8=function(e,t){var n=e.type.defaultProps?kt(kt({},e.type.defaultProps),e.props):e.props,r=n.dataKey,o=n.name,a=n.unit,i=n.formatter,s=n.tooltipType,c=n.chartType,l=n.hide;return kt(kt({},nt(e,!1)),{},{dataKey:r,unit:a,formatter:i,name:o||r,color:P_(e),value:Br(t,r),type:s,payload:t,chartType:c,hide:l})};function Jl(e){"@babel/helpers - typeof";return Jl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jl(e)}function R8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function I8(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?R8(Object(n),!0).forEach(function(r){ape(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R8(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ape(e,t,n){return t=ipe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ipe(e){var t=spe(e,"string");return Jl(t)=="symbol"?t:t+""}function spe(e,t){if(Jl(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Jl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Kp=Math.PI/180,cpe=function(e){return e*180/Math.PI},Qt=function(e,t,n,r){return{x:e+Math.cos(-Kp*r)*n,y:t+Math.sin(-Kp*r)*n}},lpe=function(e,t){var n=e.x,r=e.y,o=t.x,a=t.y;return Math.sqrt(Math.pow(n-o,2)+Math.pow(r-a,2))},upe=function(e,t){var n=e.x,r=e.y,o=t.cx,a=t.cy,i=lpe({x:n,y:r},{x:o,y:a});if(i<=0)return{radius:i};var s=(n-o)/i,c=Math.acos(s);return r>a&&(c=2*Math.PI-c),{radius:i,angle:cpe(c),angleInRadian:c}},dpe=function(e){var t=e.startAngle,n=e.endAngle,r=Math.floor(t/360),o=Math.floor(n/360),a=Math.min(r,o);return{startAngle:t-a*360,endAngle:n-a*360}},fpe=function(e,t){var n=t.startAngle,r=t.endAngle,o=Math.floor(n/360),a=Math.floor(r/360),i=Math.min(o,a);return e+i*360},D8=function(e,t){var n=e.x,r=e.y,o=upe({x:n,y:r},t),a=o.radius,i=o.angle,s=t.innerRadius,c=t.outerRadius;if(a<s||a>c)return!1;if(a===0)return!0;var l=dpe(t),u=l.startAngle,d=l.endAngle,f=i,p;if(u<=d){for(;f>d;)f-=360;for(;f<u;)f+=360;p=f>=u&&f<=d}else{for(;f>u;)f-=360;for(;f<d;)f+=360;p=f>=d&&f<=u}return p?I8(I8({},t),{},{radius:a,angle:fpe(f,t)}):null};function Zl(e){"@babel/helpers - typeof";return Zl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zl(e)}var ppe=["offset"];function hpe(e){return vpe(e)||gpe(e)||ype(e)||mpe()}function mpe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ype(e,t){if(e){if(typeof e=="string")return R_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return R_(e,t)}}function gpe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function vpe(e){if(Array.isArray(e))return R_(e)}function R_(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function bpe(e,t){if(e==null)return{};var n=xpe(e,t),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function xpe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function L8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function zt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?L8(Object(n),!0).forEach(function(r){wpe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L8(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function wpe(e,t,n){return t=_pe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _pe(e){var t=jpe(e,"string");return Zl(t)=="symbol"?t:t+""}function jpe(e,t){if(Zl(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Zl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function eu(){return eu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},eu.apply(this,arguments)}var Epe=function(e){var t=e.value,n=e.formatter,r=rt(e.children)?t:e.children;return We(n)?n(r):r},Spe=function(e,t){var n=yr(t-e),r=Math.min(Math.abs(t-e),360);return n*r},Cpe=function(e,t,n){var r=e.position,o=e.viewBox,a=e.offset,i=e.className,s=o,c=s.cx,l=s.cy,u=s.innerRadius,d=s.outerRadius,f=s.startAngle,p=s.endAngle,y=s.clockWise,m=(u+d)/2,v=Spe(f,p),b=v>=0?1:-1,x,_;r==="insideStart"?(x=f+b*a,_=y):r==="insideEnd"?(x=p-b*a,_=!y):r==="end"&&(x=p+b*a,_=y),_=v<=0?_:!_;var w=Qt(c,l,m,x),j=Qt(c,l,m,x+(_?1:-1)*359),E="M".concat(w.x,",").concat(w.y,`
    A`).concat(m,",").concat(m,",0,1,").concat(_?0:1,`,
    `).concat(j.x,",").concat(j.y),S=rt(e.id)?ep("recharts-radial-line-"):e.id;return V.createElement("text",eu({},n,{dominantBaseline:"central",className:st("recharts-radial-bar-label",i)}),V.createElement("defs",null,V.createElement("path",{id:S,d:E})),V.createElement("textPath",{xlinkHref:"#".concat(S)},t))},Ope=function(e){var t=e.viewBox,n=e.offset,r=e.position,o=t,a=o.cx,i=o.cy,s=o.innerRadius,c=o.outerRadius,l=o.startAngle,u=o.endAngle,d=(l+u)/2;if(r==="outside"){var f=Qt(a,i,c+n,d),p=f.x,y=f.y;return{x:p,y,textAnchor:p>=a?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:a,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:a,y:i,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:a,y:i,textAnchor:"middle",verticalAnchor:"end"};var m=(s+c)/2,v=Qt(a,i,m,d),b=v.x,x=v.y;return{x:b,y:x,textAnchor:"middle",verticalAnchor:"middle"}},Mpe=function(e){var t=e.viewBox,n=e.parentViewBox,r=e.offset,o=e.position,a=t,i=a.x,s=a.y,c=a.width,l=a.height,u=l>=0?1:-1,d=u*r,f=u>0?"end":"start",p=u>0?"start":"end",y=c>=0?1:-1,m=y*r,v=y>0?"end":"start",b=y>0?"start":"end";if(o==="top"){var x={x:i+c/2,y:s-u*r,textAnchor:"middle",verticalAnchor:f};return zt(zt({},x),n?{height:Math.max(s-n.y,0),width:c}:{})}if(o==="bottom"){var _={x:i+c/2,y:s+l+d,textAnchor:"middle",verticalAnchor:p};return zt(zt({},_),n?{height:Math.max(n.y+n.height-(s+l),0),width:c}:{})}if(o==="left"){var w={x:i-m,y:s+l/2,textAnchor:v,verticalAnchor:"middle"};return zt(zt({},w),n?{width:Math.max(w.x-n.x,0),height:l}:{})}if(o==="right"){var j={x:i+c+m,y:s+l/2,textAnchor:b,verticalAnchor:"middle"};return zt(zt({},j),n?{width:Math.max(n.x+n.width-j.x,0),height:l}:{})}var E=n?{width:c,height:l}:{};return o==="insideLeft"?zt({x:i+m,y:s+l/2,textAnchor:b,verticalAnchor:"middle"},E):o==="insideRight"?zt({x:i+c-m,y:s+l/2,textAnchor:v,verticalAnchor:"middle"},E):o==="insideTop"?zt({x:i+c/2,y:s+d,textAnchor:"middle",verticalAnchor:p},E):o==="insideBottom"?zt({x:i+c/2,y:s+l-d,textAnchor:"middle",verticalAnchor:f},E):o==="insideTopLeft"?zt({x:i+m,y:s+d,textAnchor:b,verticalAnchor:p},E):o==="insideTopRight"?zt({x:i+c-m,y:s+d,textAnchor:v,verticalAnchor:p},E):o==="insideBottomLeft"?zt({x:i+m,y:s+l-d,textAnchor:b,verticalAnchor:f},E):o==="insideBottomRight"?zt({x:i+c-m,y:s+l-d,textAnchor:v,verticalAnchor:f},E):rs(o)&&(me(o.x)||Ia(o.x))&&(me(o.y)||Ia(o.y))?zt({x:i+Da(o.x,c),y:s+Da(o.y,l),textAnchor:"end",verticalAnchor:"end"},E):zt({x:i+c/2,y:s+l/2,textAnchor:"middle",verticalAnchor:"middle"},E)},Npe=function(e){return"cx"in e&&me(e.cx)};function rn(e){var t=e.offset,n=t===void 0?5:t,r=bpe(e,ppe),o=zt({offset:n},r),a=o.viewBox,i=o.position,s=o.value,c=o.children,l=o.content,u=o.className,d=u===void 0?"":u,f=o.textBreakAll;if(!a||rt(s)&&rt(c)&&!g.isValidElement(l)&&!We(l))return null;if(g.isValidElement(l))return g.cloneElement(l,o);var p;if(We(l)){if(p=g.createElement(l,o),g.isValidElement(p))return p}else p=Epe(o);var y=Npe(a),m=nt(o,!0);if(y&&(i==="insideStart"||i==="insideEnd"||i==="end"))return Cpe(o,p,m);var v=y?Ope(o):Mpe(o);return V.createElement(_p,eu({className:st("recharts-label",d)},m,v,{breakAll:f}),p)}rn.displayName="Label";var F8=function(e){var t=e.cx,n=e.cy,r=e.angle,o=e.startAngle,a=e.endAngle,i=e.r,s=e.radius,c=e.innerRadius,l=e.outerRadius,u=e.x,d=e.y,f=e.top,p=e.left,y=e.width,m=e.height,v=e.clockWise,b=e.labelViewBox;if(b)return b;if(me(y)&&me(m)){if(me(u)&&me(d))return{x:u,y:d,width:y,height:m};if(me(f)&&me(p))return{x:f,y:p,width:y,height:m}}return me(u)&&me(d)?{x:u,y:d,width:0,height:0}:me(t)&&me(n)?{cx:t,cy:n,startAngle:o||r||0,endAngle:a||r||0,innerRadius:c||0,outerRadius:l||s||i||0,clockWise:v}:e.viewBox?e.viewBox:{}},kpe=function(e,t){return e?e===!0?V.createElement(rn,{key:"label-implicit",viewBox:t}):Bt(e)?V.createElement(rn,{key:"label-implicit",viewBox:t,value:e}):g.isValidElement(e)?e.type===rn?g.cloneElement(e,{key:"label-implicit",viewBox:t}):V.createElement(rn,{key:"label-implicit",content:e,viewBox:t}):We(e)?V.createElement(rn,{key:"label-implicit",content:e,viewBox:t}):rs(e)?V.createElement(rn,eu({viewBox:t},e,{key:"label-implicit"})):null:null},Ppe=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var r=e.children,o=F8(e),a=gr(r,rn).map(function(s,c){return g.cloneElement(s,{viewBox:t||o,key:"label-".concat(c)})});if(!n)return a;var i=kpe(e.label,t||o);return[i].concat(hpe(a))};rn.parseViewBox=F8,rn.renderCallByParent=Ppe;var I_,B8;vE=function(){if(B8)return I_;B8=1;function e(t){var n=t==null?0:t.length;return n?t[n-1]:void 0}return I_=e,I_};var Ape=vE();SE=Xe(Ape);function tu(e){"@babel/helpers - typeof";return tu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tu(e)}var Tpe=["valueAccessor"],Rpe=["data","dataKey","clockWise","id","textBreakAll"];function Ipe(e){return Bpe(e)||Fpe(e)||Lpe(e)||Dpe()}function Dpe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Lpe(e,t){if(e){if(typeof e=="string")return D_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return D_(e,t)}}function Fpe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Bpe(e){if(Array.isArray(e))return D_(e)}function D_(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Xp(){return Xp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Xp.apply(this,arguments)}function $8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function z8(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?$8(Object(n),!0).forEach(function(r){$pe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$8(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function $pe(e,t,n){return t=zpe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zpe(e){var t=Vpe(e,"string");return tu(t)=="symbol"?t:t+""}function Vpe(e,t){if(tu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(tu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function V8(e,t){if(e==null)return{};var n=Upe(e,t),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Upe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var Hpe=function(e){return Array.isArray(e.value)?SE(e.value):e.value};function qa(e){var t=e.valueAccessor,n=t===void 0?Hpe:t,r=V8(e,Tpe),o=r.data,a=r.dataKey,i=r.clockWise,s=r.id,c=r.textBreakAll,l=V8(r,Rpe);return!o||!o.length?null:V.createElement(Ut,{className:"recharts-label-list"},o.map(function(u,d){var f=rt(a)?n(u,d):Br(u&&u.payload,a),p=rt(s)?{}:{id:"".concat(s,"-").concat(d)};return V.createElement(rn,Xp({},nt(u,!0),l,p,{parentViewBox:u.parentViewBox,value:f,textBreakAll:c,viewBox:rn.parseViewBox(rt(i)?u:z8(z8({},u),{},{clockWise:i})),key:"label-".concat(d),index:d}))}))}qa.displayName="LabelList";function Wpe(e,t){return e?e===!0?V.createElement(qa,{key:"labelList-implicit",data:t}):V.isValidElement(e)||We(e)?V.createElement(qa,{key:"labelList-implicit",data:t,content:e}):rs(e)?V.createElement(qa,Xp({data:t},e,{key:"labelList-implicit"})):null:null}function qpe(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var r=e.children,o=gr(r,qa).map(function(i,s){return g.cloneElement(i,{data:t,key:"labelList-".concat(s)})});if(!n)return o;var a=Wpe(e.label,t);return[a].concat(Ipe(o))}qa.renderCallByParent=qpe;function nu(e){"@babel/helpers - typeof";return nu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nu(e)}function L_(){return L_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},L_.apply(this,arguments)}function U8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function H8(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?U8(Object(n),!0).forEach(function(r){Ype(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U8(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Ype(e,t,n){return t=Kpe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Kpe(e){var t=Xpe(e,"string");return nu(t)=="symbol"?t:t+""}function Xpe(e,t){if(nu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(nu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Gpe=function(e,t){var n=yr(t-e),r=Math.min(Math.abs(t-e),359.999);return n*r},Gp=function(e){var t=e.cx,n=e.cy,r=e.radius,o=e.angle,a=e.sign,i=e.isExternal,s=e.cornerRadius,c=e.cornerIsExternal,l=s*(i?1:-1)+r,u=Math.asin(s/l)/Kp,d=c?o:o+a*u,f=Qt(t,n,l,d),p=Qt(t,n,r,d),y=c?o-a*u:o,m=Qt(t,n,l*Math.cos(u*Kp),y);return{center:f,circleTangency:p,lineTangency:m,theta:u}},W8=function(e){var t=e.cx,n=e.cy,r=e.innerRadius,o=e.outerRadius,a=e.startAngle,i=e.endAngle,s=Gpe(a,i),c=a+s,l=Qt(t,n,o,a),u=Qt(t,n,o,c),d="M ".concat(l.x,",").concat(l.y,`
    A `).concat(o,",").concat(o,`,0,
    `).concat(+(Math.abs(s)>180),",").concat(+(a>c),`,
    `).concat(u.x,",").concat(u.y,`
  `);if(r>0){var f=Qt(t,n,r,a),p=Qt(t,n,r,c);d+="L ".concat(p.x,",").concat(p.y,`
            A `).concat(r,",").concat(r,`,0,
            `).concat(+(Math.abs(s)>180),",").concat(+(a<=c),`,
            `).concat(f.x,",").concat(f.y," Z")}else d+="L ".concat(t,",").concat(n," Z");return d},Qpe=function(e){var t=e.cx,n=e.cy,r=e.innerRadius,o=e.outerRadius,a=e.cornerRadius,i=e.forceCornerRadius,s=e.cornerIsExternal,c=e.startAngle,l=e.endAngle,u=yr(l-c),d=Gp({cx:t,cy:n,radius:o,angle:c,sign:u,cornerRadius:a,cornerIsExternal:s}),f=d.circleTangency,p=d.lineTangency,y=d.theta,m=Gp({cx:t,cy:n,radius:o,angle:l,sign:-u,cornerRadius:a,cornerIsExternal:s}),v=m.circleTangency,b=m.lineTangency,x=m.theta,_=s?Math.abs(c-l):Math.abs(c-l)-y-x;if(_<0)return i?"M ".concat(p.x,",").concat(p.y,`
        a`).concat(a,",").concat(a,",0,0,1,").concat(a*2,`,0
        a`).concat(a,",").concat(a,",0,0,1,").concat(-a*2,`,0
      `):W8({cx:t,cy:n,innerRadius:r,outerRadius:o,startAngle:c,endAngle:l});var w="M ".concat(p.x,",").concat(p.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(u<0),",").concat(f.x,",").concat(f.y,`
    A`).concat(o,",").concat(o,",0,").concat(+(_>180),",").concat(+(u<0),",").concat(v.x,",").concat(v.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(u<0),",").concat(b.x,",").concat(b.y,`
  `);if(r>0){var j=Gp({cx:t,cy:n,radius:r,angle:c,sign:u,isExternal:!0,cornerRadius:a,cornerIsExternal:s}),E=j.circleTangency,S=j.lineTangency,O=j.theta,N=Gp({cx:t,cy:n,radius:r,angle:l,sign:-u,isExternal:!0,cornerRadius:a,cornerIsExternal:s}),P=N.circleTangency,k=N.lineTangency,R=N.theta,A=s?Math.abs(c-l):Math.abs(c-l)-O-R;if(A<0&&a===0)return"".concat(w,"L").concat(t,",").concat(n,"Z");w+="L".concat(k.x,",").concat(k.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(u<0),",").concat(P.x,",").concat(P.y,`
      A`).concat(r,",").concat(r,",0,").concat(+(A>180),",").concat(+(u>0),",").concat(E.x,",").concat(E.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(u<0),",").concat(S.x,",").concat(S.y,"Z")}else w+="L".concat(t,",").concat(n,"Z");return w},Jpe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},q8=function(e){var t=H8(H8({},Jpe),e),n=t.cx,r=t.cy,o=t.innerRadius,a=t.outerRadius,i=t.cornerRadius,s=t.forceCornerRadius,c=t.cornerIsExternal,l=t.startAngle,u=t.endAngle,d=t.className;if(a<o||l===u)return null;var f=st("recharts-sector",d),p=a-o,y=Da(i,p,0,!0),m;return y>0&&Math.abs(l-u)<360?m=Qpe({cx:n,cy:r,innerRadius:o,outerRadius:a,cornerRadius:Math.min(y,p/2),forceCornerRadius:s,cornerIsExternal:c,startAngle:l,endAngle:u}):m=W8({cx:n,cy:r,innerRadius:o,outerRadius:a,startAngle:l,endAngle:u}),V.createElement("path",L_({},nt(t,!0),{className:f,d:m,role:"img"}))};function ru(e){"@babel/helpers - typeof";return ru=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ru(e)}function F_(){return F_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},F_.apply(this,arguments)}function Y8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function K8(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Y8(Object(n),!0).forEach(function(r){Zpe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y8(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Zpe(e,t,n){return t=ehe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ehe(e){var t=the(e,"string");return ru(t)=="symbol"?t:t+""}function the(e,t){if(ru(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(ru(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var X8={curveBasisClosed:Bie,curveBasisOpen:$ie,curveBasis:Fie,curveBumpX:Eie,curveBumpY:Sie,curveLinearClosed:zie,curveLinear:sp,curveMonotoneX:Vie,curveMonotoneY:Uie,curveNatural:Hie,curveStep:Wie,curveStepAfter:Yie,curveStepBefore:qie},Qp=function(e){return e.x===+e.x&&e.y===+e.y},ou=function(e){return e.x},au=function(e){return e.y},nhe=function(e,t){if(We(e))return e;var n="curve".concat(rp(e));return(n==="curveMonotone"||n==="curveBump")&&t?X8["".concat(n).concat(t==="vertical"?"Y":"X")]:X8[n]||sp},rhe=function(e){var t=e.type,n=t===void 0?"linear":t,r=e.points,o=r===void 0?[]:r,a=e.baseLine,i=e.layout,s=e.connectNulls,c=s===void 0?!1:s,l=nhe(n,i),u=c?o.filter(function(y){return Qp(y)}):o,d;if(Array.isArray(a)){var f=c?a.filter(function(y){return Qp(y)}):a,p=u.map(function(y,m){return K8(K8({},y),{},{base:f[m]})});return i==="vertical"?d=cp().y(au).x1(ou).x0(function(y){return y.base.x}):d=cp().x(ou).y1(au).y0(function(y){return y.base.y}),d.defined(Qp).curve(l),d(p)}return i==="vertical"&&me(a)?d=cp().y(au).x1(ou).x0(a):me(a)?d=cp().x(ou).y1(au).y0(a):d=K5().x(ou).y(au),d.defined(Qp).curve(l),d(u)},G8=function(e){var t=e.className,n=e.points,r=e.path,o=e.pathRef;if((!n||!n.length)&&!r)return null;var a=n&&n.length?rhe(e):r;return V.createElement("path",F_({},nt(e,!1),tp(e),{className:st("recharts-curve",t),d:a,ref:o}))},Q8={exports:{}},B_,J8;function ohe(){if(J8)return B_;J8=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return B_=e,B_}var $_,Z8;function ahe(){if(Z8)return $_;Z8=1;var e=ohe();function t(){}function n(){}return n.resetWarningCache=t,$_=function(){function r(i,s,c,l,u,d){if(d!==e){var f=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw f.name="Invariant Violation",f}}r.isRequired=r;function o(){return r}var a={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:o,element:r,elementType:r,instanceOf:o,node:r,objectOf:o,oneOf:o,oneOfType:o,shape:o,exact:o,checkPropTypes:n,resetWarningCache:t};return a.PropTypes=a,a},$_}var eF;function ihe(){return eF||(eF=1,Q8.exports=ahe()()),Q8.exports}var she=ihe();const Fe=Xe(she);var che=Object.getOwnPropertyNames,lhe=Object.getOwnPropertySymbols,uhe=Object.prototype.hasOwnProperty;function tF(e,t){return function(n,r,o){return e(n,r,o)&&t(n,r,o)}}function Jp(e){return function(t,n,r){if(!t||!n||typeof t!="object"||typeof n!="object")return e(t,n,r);var o=r.cache,a=o.get(t),i=o.get(n);if(a&&i)return a===n&&i===t;o.set(t,n),o.set(n,t);var s=e(t,n,r);return o.delete(t),o.delete(n),s}}function nF(e){return che(e).concat(lhe(e))}var rF=Object.hasOwn||function(e,t){return uhe.call(e,t)};function _s(e,t){return e||t?e===t:e===t||e!==e&&t!==t}var oF="_owner",aF=Object.getOwnPropertyDescriptor,iF=Object.keys;function dhe(e,t,n){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(!n.equals(e[r],t[r],r,r,e,t,n))return!1;return!0}function fhe(e,t){return _s(e.getTime(),t.getTime())}function sF(e,t,n){if(e.size!==t.size)return!1;for(var r={},o=e.entries(),a=0,i,s;(i=o.next())&&!i.done;){for(var c=t.entries(),l=!1,u=0;(s=c.next())&&!s.done;){var d=i.value,f=d[0],p=d[1],y=s.value,m=y[0],v=y[1];!l&&!r[u]&&(l=n.equals(f,m,a,u,e,t,n)&&n.equals(p,v,f,m,e,t,n))&&(r[u]=!0),u++}if(!l)return!1;a++}return!0}function phe(e,t,n){var r=iF(e),o=r.length;if(iF(t).length!==o)return!1;for(var a;o-- >0;)if(a=r[o],a===oF&&(e.$$typeof||t.$$typeof)&&e.$$typeof!==t.$$typeof||!rF(t,a)||!n.equals(e[a],t[a],a,a,e,t,n))return!1;return!0}function iu(e,t,n){var r=nF(e),o=r.length;if(nF(t).length!==o)return!1;for(var a,i,s;o-- >0;)if(a=r[o],a===oF&&(e.$$typeof||t.$$typeof)&&e.$$typeof!==t.$$typeof||!rF(t,a)||!n.equals(e[a],t[a],a,a,e,t,n)||(i=aF(e,a),s=aF(t,a),(i||s)&&(!i||!s||i.configurable!==s.configurable||i.enumerable!==s.enumerable||i.writable!==s.writable)))return!1;return!0}function hhe(e,t){return _s(e.valueOf(),t.valueOf())}function mhe(e,t){return e.source===t.source&&e.flags===t.flags}function cF(e,t,n){if(e.size!==t.size)return!1;for(var r={},o=e.values(),a,i;(a=o.next())&&!a.done;){for(var s=t.values(),c=!1,l=0;(i=s.next())&&!i.done;)!c&&!r[l]&&(c=n.equals(a.value,i.value,a.value,i.value,e,t,n))&&(r[l]=!0),l++;if(!c)return!1}return!0}function yhe(e,t){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(e[n]!==t[n])return!1;return!0}var ghe="[object Arguments]",vhe="[object Boolean]",bhe="[object Date]",xhe="[object Map]",whe="[object Number]",_he="[object Object]",jhe="[object RegExp]",Ehe="[object Set]",She="[object String]",Che=Array.isArray,lF=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,uF=Object.assign,Ohe=Object.prototype.toString.call.bind(Object.prototype.toString);function Mhe(e){var t=e.areArraysEqual,n=e.areDatesEqual,r=e.areMapsEqual,o=e.areObjectsEqual,a=e.arePrimitiveWrappersEqual,i=e.areRegExpsEqual,s=e.areSetsEqual,c=e.areTypedArraysEqual;return function(l,u,d){if(l===u)return!0;if(l==null||u==null||typeof l!="object"||typeof u!="object")return l!==l&&u!==u;var f=l.constructor;if(f!==u.constructor)return!1;if(f===Object)return o(l,u,d);if(Che(l))return t(l,u,d);if(lF!=null&&lF(l))return c(l,u,d);if(f===Date)return n(l,u,d);if(f===RegExp)return i(l,u,d);if(f===Map)return r(l,u,d);if(f===Set)return s(l,u,d);var p=Ohe(l);return p===bhe?n(l,u,d):p===jhe?i(l,u,d):p===xhe?r(l,u,d):p===Ehe?s(l,u,d):p===_he?typeof l.then!="function"&&typeof u.then!="function"&&o(l,u,d):p===ghe?o(l,u,d):p===vhe||p===whe||p===She?a(l,u,d):!1}}function Nhe(e){var t=e.circular,n=e.createCustomConfig,r=e.strict,o={areArraysEqual:r?iu:dhe,areDatesEqual:fhe,areMapsEqual:r?tF(sF,iu):sF,areObjectsEqual:r?iu:phe,arePrimitiveWrappersEqual:hhe,areRegExpsEqual:mhe,areSetsEqual:r?tF(cF,iu):cF,areTypedArraysEqual:r?iu:yhe};if(n&&(o=uF({},o,n(o))),t){var a=Jp(o.areArraysEqual),i=Jp(o.areMapsEqual),s=Jp(o.areObjectsEqual),c=Jp(o.areSetsEqual);o=uF({},o,{areArraysEqual:a,areMapsEqual:i,areObjectsEqual:s,areSetsEqual:c})}return o}function khe(e){return function(t,n,r,o,a,i,s){return e(t,n,s)}}function Phe(e){var t=e.circular,n=e.comparator,r=e.createState,o=e.equals,a=e.strict;if(r)return function(s,c){var l=r(),u=l.cache,d=u===void 0?t?new WeakMap:void 0:u,f=l.meta;return n(s,c,{cache:d,equals:o,meta:f,strict:a})};if(t)return function(s,c){return n(s,c,{cache:new WeakMap,equals:o,meta:void 0,strict:a})};var i={cache:void 0,equals:o,meta:void 0,strict:a};return function(s,c){return n(s,c,i)}}var Ahe=ia();ia({strict:!0}),ia({circular:!0}),ia({circular:!0,strict:!0}),ia({createInternalComparator:function(){return _s}}),ia({strict:!0,createInternalComparator:function(){return _s}}),ia({circular:!0,createInternalComparator:function(){return _s}}),ia({circular:!0,createInternalComparator:function(){return _s},strict:!0});function ia(e){e===void 0&&(e={});var t=e.circular,n=t===void 0?!1:t,r=e.createInternalComparator,o=e.createState,a=e.strict,i=a===void 0?!1:a,s=Nhe(e),c=Mhe(s),l=r?r(c):khe(c);return Phe({circular:n,comparator:c,createState:o,equals:l,strict:i})}function The(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function dF(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,r=function o(a){n<0&&(n=a),a-n>t?(e(a),n=-1):The(o)};requestAnimationFrame(r)}function z_(e){"@babel/helpers - typeof";return z_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},z_(e)}function Rhe(e){return Fhe(e)||Lhe(e)||Dhe(e)||Ihe()}function Ihe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Dhe(e,t){if(e){if(typeof e=="string")return fF(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fF(e,t)}}function fF(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Lhe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Fhe(e){if(Array.isArray(e))return e}function Bhe(){var e={},t=function(){return null},n=!1,r=function o(a){if(!n){if(Array.isArray(a)){if(!a.length)return;var i=a,s=Rhe(i),c=s[0],l=s.slice(1);if(typeof c=="number"){dF(o.bind(null,l),c);return}o(c),dF(o.bind(null,l));return}z_(a)==="object"&&(e=a,t(e)),typeof a=="function"&&a()}};return{stop:function(){n=!0},start:function(o){n=!1,r(o)},subscribe:function(o){return t=o,function(){t=function(){return null}}}}}function su(e){"@babel/helpers - typeof";return su=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},su(e)}function pF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function hF(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?pF(Object(n),!0).forEach(function(r){mF(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pF(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function mF(e,t,n){return t=$he(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $he(e){var t=zhe(e,"string");return su(t)==="symbol"?t:String(t)}function zhe(e,t){if(su(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(su(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Vhe=function(e,t){return[Object.keys(e),Object.keys(t)].reduce(function(n,r){return n.filter(function(o){return r.includes(o)})})},Uhe=function(e){return e},Hhe=function(e){return e.replace(/([A-Z])/g,function(t){return"-".concat(t.toLowerCase())})},cu=function(e,t){return Object.keys(t).reduce(function(n,r){return hF(hF({},n),{},mF({},r,e(r,t[r])))},{})},yF=function(e,t,n){return e.map(function(r){return"".concat(Hhe(r)," ").concat(t,"ms ").concat(n)}).join(",")};function Whe(e,t){return Khe(e)||Yhe(e,t)||gF(e,t)||qhe()}function qhe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Yhe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,o,a,i,s=[],c=!0,l=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(c=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(u){l=!0,o=u}finally{try{if(!c&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return s}}function Khe(e){if(Array.isArray(e))return e}function Xhe(e){return Jhe(e)||Qhe(e)||gF(e)||Ghe()}function Ghe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gF(e,t){if(e){if(typeof e=="string")return V_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return V_(e,t)}}function Qhe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Jhe(e){if(Array.isArray(e))return V_(e)}function V_(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Zp=1e-4,vF=function(e,t){return[0,3*e,3*t-6*e,3*e-3*t+1]},bF=function(e,t){return e.map(function(n,r){return n*Math.pow(t,r)}).reduce(function(n,r){return n+r})},xF=function(e,t){return function(n){var r=vF(e,t);return bF(r,n)}},Zhe=function(e,t){return function(n){var r=vF(e,t),o=[].concat(Xhe(r.map(function(a,i){return a*i}).slice(1)),[0]);return bF(o,n)}},wF=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],o=t[1],a=t[2],i=t[3];if(t.length===1)switch(t[0]){case"linear":r=0,o=0,a=1,i=1;break;case"ease":r=.25,o=.1,a=.25,i=1;break;case"ease-in":r=.42,o=0,a=1,i=1;break;case"ease-out":r=.42,o=0,a=.58,i=1;break;case"ease-in-out":r=0,o=0,a=.58,i=1;break;default:{var s=t[0].split("(");if(s[0]==="cubic-bezier"&&s[1].split(")")[0].split(",").length===4){var c=s[1].split(")")[0].split(",").map(function(m){return parseFloat(m)}),l=Whe(c,4);r=l[0],o=l[1],a=l[2],i=l[3]}}}var u=xF(r,a),d=xF(o,i),f=Zhe(r,a),p=function(m){return m>1?1:m<0?0:m},y=function(m){for(var v=m>1?1:m,b=v,x=0;x<8;++x){var _=u(b)-v,w=f(b);if(Math.abs(_-v)<Zp||w<Zp)return d(b);b=p(b-_/w)}return d(b)};return y.isStepper=!1,y},eme=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.stiff,n=t===void 0?100:t,r=e.damping,o=r===void 0?8:r,a=e.dt,i=a===void 0?17:a,s=function(c,l,u){var d=-(c-l)*n,f=u*o,p=u+(d-f)*i/1e3,y=u*i/1e3+c;return Math.abs(y-l)<Zp&&Math.abs(p)<Zp?[l,0]:[y,p]};return s.isStepper=!0,s.dt=i,s},tme=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0];if(typeof r=="string")switch(r){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return wF(r);case"spring":return eme();default:if(r.split("(")[0]==="cubic-bezier")return wF(r)}return typeof r=="function"?r:null};function lu(e){"@babel/helpers - typeof";return lu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lu(e)}function _F(e){return ome(e)||rme(e)||EF(e)||nme()}function nme(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rme(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function ome(e){if(Array.isArray(e))return H_(e)}function jF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Jt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?jF(Object(n),!0).forEach(function(r){U_(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jF(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function U_(e,t,n){return t=ame(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ame(e){var t=ime(e,"string");return lu(t)==="symbol"?t:String(t)}function ime(e,t){if(lu(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(lu(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function sme(e,t){return ume(e)||lme(e,t)||EF(e,t)||cme()}function cme(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function EF(e,t){if(e){if(typeof e=="string")return H_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return H_(e,t)}}function H_(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function lme(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,o,a,i,s=[],c=!0,l=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(c=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(u){l=!0,o=u}finally{try{if(!c&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return s}}function ume(e){if(Array.isArray(e))return e}var eh=function(e,t,n){return e+(t-e)*n},W_=function(e){var t=e.from,n=e.to;return t!==n},dme=function e(t,n,r){var o=cu(function(a,i){if(W_(i)){var s=t(i.from,i.to,i.velocity),c=sme(s,2),l=c[0],u=c[1];return Jt(Jt({},i),{},{from:l,velocity:u})}return i},n);return r<1?cu(function(a,i){return W_(i)?Jt(Jt({},i),{},{velocity:eh(i.velocity,o[a].velocity,r),from:eh(i.from,o[a].from,r)}):i},n):e(t,o,r-1)};const fme=function(e,t,n,r,o){var a=Vhe(e,t),i=a.reduce(function(v,b){return Jt(Jt({},v),{},U_({},b,[e[b],t[b]]))},{}),s=a.reduce(function(v,b){return Jt(Jt({},v),{},U_({},b,{from:e[b],velocity:0,to:t[b]}))},{}),c=-1,l,u,d=function(){return null},f=function(){return cu(function(v,b){return b.from},s)},p=function(){return!Object.values(s).filter(W_).length},y=function(v){l||(l=v);var b=v-l,x=b/n.dt;s=dme(n,s,x),o(Jt(Jt(Jt({},e),t),f())),l=v,p()||(c=requestAnimationFrame(d))},m=function(v){u||(u=v);var b=(v-u)/r,x=cu(function(w,j){return eh.apply(void 0,_F(j).concat([n(b)]))},i);if(o(Jt(Jt(Jt({},e),t),x)),b<1)c=requestAnimationFrame(d);else{var _=cu(function(w,j){return eh.apply(void 0,_F(j).concat([n(1)]))},i);o(Jt(Jt(Jt({},e),t),_))}};return d=n.isStepper?y:m,function(){return requestAnimationFrame(d),function(){cancelAnimationFrame(c)}}};function js(e){"@babel/helpers - typeof";return js=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},js(e)}var pme=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function hme(e,t){if(e==null)return{};var n=mme(e,t),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function mme(e,t){if(e==null)return{};var n={},r=Object.keys(e),o,a;for(a=0;a<r.length;a++)o=r[a],!(t.indexOf(o)>=0)&&(n[o]=e[o]);return n}function q_(e){return bme(e)||vme(e)||gme(e)||yme()}function yme(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gme(e,t){if(e){if(typeof e=="string")return Y_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Y_(e,t)}}function vme(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function bme(e){if(Array.isArray(e))return Y_(e)}function Y_(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function SF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function br(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?SF(Object(n),!0).forEach(function(r){uu(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SF(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function uu(e,t,n){return t=CF(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xme(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wme(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,CF(r.key),r)}}function _me(e,t,n){return t&&wme(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function CF(e){var t=jme(e,"string");return js(t)==="symbol"?t:String(t)}function jme(e,t){if(js(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(js(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Eme(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&K_(e,t)}function K_(e,t){return K_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},K_(e,t)}function Sme(e){var t=Cme();return function(){var n=th(e),r;if(t){var o=th(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return X_(this,r)}}function X_(e,t){if(t&&(js(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return G_(e)}function G_(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Cme(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function th(e){return th=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},th(e)}var sa=function(e){Eme(n,e);var t=Sme(n);function n(r,o){var a;xme(this,n),a=t.call(this,r,o);var i=a.props,s=i.isActive,c=i.attributeName,l=i.from,u=i.to,d=i.steps,f=i.children,p=i.duration;if(a.handleStyleChange=a.handleStyleChange.bind(G_(a)),a.changeStyle=a.changeStyle.bind(G_(a)),!s||p<=0)return a.state={style:{}},typeof f=="function"&&(a.state={style:u}),X_(a);if(d&&d.length)a.state={style:d[0].style};else if(l){if(typeof f=="function")return a.state={style:l},X_(a);a.state={style:c?uu({},c,l):l}}else a.state={style:{}};return a}return _me(n,[{key:"componentDidMount",value:function(){var r=this.props,o=r.isActive,a=r.canBegin;this.mounted=!0,!(!o||!a)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(r){var o=this.props,a=o.isActive,i=o.canBegin,s=o.attributeName,c=o.shouldReAnimate,l=o.to,u=o.from,d=this.state.style;if(i){if(!a){var f={style:s?uu({},s,l):l};this.state&&d&&(s&&d[s]!==l||!s&&d!==l)&&this.setState(f);return}if(!(Ahe(r.to,l)&&r.canBegin&&r.isActive)){var p=!r.canBegin||!r.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var y=p||c?u:r.to;if(this.state&&d){var m={style:s?uu({},s,y):y};(s&&d[s]!==y||!s&&d!==y)&&this.setState(m)}this.runAnimation(br(br({},this.props),{},{from:y,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var r=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),r&&r()}},{key:"handleStyleChange",value:function(r){this.changeStyle(r)}},{key:"changeStyle",value:function(r){this.mounted&&this.setState({style:r})}},{key:"runJSAnimation",value:function(r){var o=this,a=r.from,i=r.to,s=r.duration,c=r.easing,l=r.begin,u=r.onAnimationEnd,d=r.onAnimationStart,f=fme(a,i,tme(c),s,this.changeStyle),p=function(){o.stopJSAnimation=f()};this.manager.start([d,l,p,s,u])}},{key:"runStepAnimation",value:function(r){var o=this,a=r.steps,i=r.begin,s=r.onAnimationStart,c=a[0],l=c.style,u=c.duration,d=u===void 0?0:u,f=function(p,y,m){if(m===0)return p;var v=y.duration,b=y.easing,x=b===void 0?"ease":b,_=y.style,w=y.properties,j=y.onAnimationEnd,E=m>0?a[m-1]:y,S=w||Object.keys(_);if(typeof x=="function"||x==="spring")return[].concat(q_(p),[o.runJSAnimation.bind(o,{from:E.style,to:_,duration:v,easing:x}),v]);var O=yF(S,v,x),N=br(br(br({},E.style),_),{},{transition:O});return[].concat(q_(p),[N,v,j]).filter(Uhe)};return this.manager.start([s].concat(q_(a.reduce(f,[l,Math.max(d,i)])),[r.onAnimationEnd]))}},{key:"runAnimation",value:function(r){this.manager||(this.manager=Bhe());var o=r.begin,a=r.duration,i=r.attributeName,s=r.to,c=r.easing,l=r.onAnimationStart,u=r.onAnimationEnd,d=r.steps,f=r.children,p=this.manager;if(this.unSubscribe=p.subscribe(this.handleStyleChange),typeof c=="function"||typeof f=="function"||c==="spring"){this.runJSAnimation(r);return}if(d.length>1){this.runStepAnimation(r);return}var y=i?uu({},i,s):s,m=yF(Object.keys(y),a,c);p.start([l,o,br(br({},y),{},{transition:m}),a,u])}},{key:"render",value:function(){var r=this.props,o=r.children;r.begin;var a=r.duration;r.attributeName,r.easing;var i=r.isActive;r.steps,r.from,r.to,r.canBegin,r.onAnimationEnd,r.shouldReAnimate,r.onAnimationReStart;var s=hme(r,pme),c=g.Children.count(o),l=this.state.style;if(typeof o=="function")return o(l);if(!i||c===0||a<=0)return o;var u=function(d){var f=d.props,p=f.style,y=p===void 0?{}:p,m=f.className,v=g.cloneElement(d,br(br({},s),{},{style:br(br({},y),l),className:m}));return v};return c===1?u(g.Children.only(o)):V.createElement("div",null,g.Children.map(o,function(d){return u(d)}))}}]),n}(g.PureComponent);sa.displayName="Animate",sa.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}},sa.propTypes={from:Fe.oneOfType([Fe.object,Fe.string]),to:Fe.oneOfType([Fe.object,Fe.string]),attributeName:Fe.string,duration:Fe.number,begin:Fe.number,easing:Fe.oneOfType([Fe.string,Fe.func]),steps:Fe.arrayOf(Fe.shape({duration:Fe.number.isRequired,style:Fe.object.isRequired,easing:Fe.oneOfType([Fe.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Fe.func]),properties:Fe.arrayOf("string"),onAnimationEnd:Fe.func})),children:Fe.oneOfType([Fe.node,Fe.func]),isActive:Fe.bool,canBegin:Fe.bool,onAnimationEnd:Fe.func,shouldReAnimate:Fe.bool,onAnimationStart:Fe.func,onAnimationReStart:Fe.func},Fe.object,Fe.object,Fe.object,Fe.element,Fe.object,Fe.object,Fe.object,Fe.oneOfType([Fe.array,Fe.element]),Fe.any;function du(e){"@babel/helpers - typeof";return du=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},du(e)}function nh(){return nh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nh.apply(this,arguments)}function Ome(e,t){return Pme(e)||kme(e,t)||Nme(e,t)||Mme()}function Mme(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Nme(e,t){if(e){if(typeof e=="string")return OF(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return OF(e,t)}}function OF(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function kme(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,o,a,i,s=[],c=!0,l=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(c=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(u){l=!0,o=u}finally{try{if(!c&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return s}}function Pme(e){if(Array.isArray(e))return e}function MF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function NF(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?MF(Object(n),!0).forEach(function(r){Ame(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):MF(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Ame(e,t,n){return t=Tme(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Tme(e){var t=Rme(e,"string");return du(t)=="symbol"?t:t+""}function Rme(e,t){if(du(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(du(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var kF=function(e,t,n,r,o){var a=Math.min(Math.abs(n)/2,Math.abs(r)/2),i=r>=0?1:-1,s=n>=0?1:-1,c=r>=0&&n>=0||r<0&&n<0?1:0,l;if(a>0&&o instanceof Array){for(var u=[0,0,0,0],d=0,f=4;d<f;d++)u[d]=o[d]>a?a:o[d];l="M".concat(e,",").concat(t+i*u[0]),u[0]>0&&(l+="A ".concat(u[0],",").concat(u[0],",0,0,").concat(c,",").concat(e+s*u[0],",").concat(t)),l+="L ".concat(e+n-s*u[1],",").concat(t),u[1]>0&&(l+="A ".concat(u[1],",").concat(u[1],",0,0,").concat(c,`,
        `).concat(e+n,",").concat(t+i*u[1])),l+="L ".concat(e+n,",").concat(t+r-i*u[2]),u[2]>0&&(l+="A ".concat(u[2],",").concat(u[2],",0,0,").concat(c,`,
        `).concat(e+n-s*u[2],",").concat(t+r)),l+="L ".concat(e+s*u[3],",").concat(t+r),u[3]>0&&(l+="A ".concat(u[3],",").concat(u[3],",0,0,").concat(c,`,
        `).concat(e,",").concat(t+r-i*u[3])),l+="Z"}else if(a>0&&o===+o&&o>0){var p=Math.min(a,o);l="M ".concat(e,",").concat(t+i*p,`
            A `).concat(p,",").concat(p,",0,0,").concat(c,",").concat(e+s*p,",").concat(t,`
            L `).concat(e+n-s*p,",").concat(t,`
            A `).concat(p,",").concat(p,",0,0,").concat(c,",").concat(e+n,",").concat(t+i*p,`
            L `).concat(e+n,",").concat(t+r-i*p,`
            A `).concat(p,",").concat(p,",0,0,").concat(c,",").concat(e+n-s*p,",").concat(t+r,`
            L `).concat(e+s*p,",").concat(t+r,`
            A `).concat(p,",").concat(p,",0,0,").concat(c,",").concat(e,",").concat(t+r-i*p," Z")}else l="M ".concat(e,",").concat(t," h ").concat(n," v ").concat(r," h ").concat(-n," Z");return l},Ime=function(e,t){if(!e||!t)return!1;var n=e.x,r=e.y,o=t.x,a=t.y,i=t.width,s=t.height;if(Math.abs(i)>0&&Math.abs(s)>0){var c=Math.min(o,o+i),l=Math.max(o,o+i),u=Math.min(a,a+s),d=Math.max(a,a+s);return n>=c&&n<=l&&r>=u&&r<=d}return!1},Dme={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Q_=function(e){var t=NF(NF({},Dme),e),n=g.useRef(),r=g.useState(-1),o=Ome(r,2),a=o[0],i=o[1];g.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var _=n.current.getTotalLength();_&&i(_)}catch{}},[]);var s=t.x,c=t.y,l=t.width,u=t.height,d=t.radius,f=t.className,p=t.animationEasing,y=t.animationDuration,m=t.animationBegin,v=t.isAnimationActive,b=t.isUpdateAnimationActive;if(s!==+s||c!==+c||l!==+l||u!==+u||l===0||u===0)return null;var x=st("recharts-rectangle",f);return b?V.createElement(sa,{canBegin:a>0,from:{width:l,height:u,x:s,y:c},to:{width:l,height:u,x:s,y:c},duration:y,animationEasing:p,isActive:b},function(_){var w=_.width,j=_.height,E=_.x,S=_.y;return V.createElement(sa,{canBegin:a>0,from:"0px ".concat(a===-1?1:a,"px"),to:"".concat(a,"px 0px"),attributeName:"strokeDasharray",begin:m,duration:y,isActive:v,easing:p},V.createElement("path",nh({},nt(t,!0),{className:x,d:kF(E,S,w,j,d),ref:n})))}):V.createElement("path",nh({},nt(t,!0),{className:x,d:kF(s,c,l,u,d)}))};function J_(){return J_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},J_.apply(this,arguments)}var PF=function(e){var t=e.cx,n=e.cy,r=e.r,o=e.className,a=st("recharts-dot",o);return t===+t&&n===+n&&r===+r?V.createElement("circle",J_({},nt(e,!1),tp(e),{className:a,cx:t,cy:n,r})):null};function fu(e){"@babel/helpers - typeof";return fu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fu(e)}var Lme=["x","y","top","left","width","height","className"];function Z_(){return Z_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Z_.apply(this,arguments)}function AF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Fme(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?AF(Object(n),!0).forEach(function(r){Bme(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):AF(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Bme(e,t,n){return t=$me(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $me(e){var t=zme(e,"string");return fu(t)=="symbol"?t:t+""}function zme(e,t){if(fu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(fu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Vme(e,t){if(e==null)return{};var n=Ume(e,t),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Ume(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var Hme=function(e,t,n,r,o,a){return"M".concat(e,",").concat(o,"v").concat(r,"M").concat(a,",").concat(t,"h").concat(n)},Wme=function(e){var t=e.x,n=t===void 0?0:t,r=e.y,o=r===void 0?0:r,a=e.top,i=a===void 0?0:a,s=e.left,c=s===void 0?0:s,l=e.width,u=l===void 0?0:l,d=e.height,f=d===void 0?0:d,p=e.className,y=Vme(e,Lme),m=Fme({x:n,y:o,top:i,left:c,width:u,height:f},y);return!me(n)||!me(o)||!me(u)||!me(f)||!me(i)||!me(c)?null:V.createElement("path",Z_({},nt(m,!0),{className:st("recharts-cross",p),d:Hme(n,o,u,f,i,c)}))},ej,TF;bE=function(){if(TF)return ej;TF=1;var e=io(),t=Pm(),n=Er(),r="[object Object]",o=Function.prototype,a=Object.prototype,i=o.toString,s=a.hasOwnProperty,c=i.call(Object);function l(u){if(!n(u)||e(u)!=r)return!1;var d=t(u);if(d===null)return!0;var f=s.call(d,"constructor")&&d.constructor;return typeof f=="function"&&f instanceof f&&i.call(f)==c}return ej=l,ej};var qme=bE();const Yme=Xe(qme);var tj,RF;function Kme(){if(RF)return tj;RF=1;var e=io(),t=Er(),n="[object Boolean]";function r(o){return o===!0||o===!1||t(o)&&e(o)==n}return tj=r,tj}var Xme=Kme();const Gme=Xe(Xme);function pu(e){"@babel/helpers - typeof";return pu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pu(e)}function rh(){return rh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rh.apply(this,arguments)}function Qme(e,t){return tye(e)||eye(e,t)||Zme(e,t)||Jme()}function Jme(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Zme(e,t){if(e){if(typeof e=="string")return IF(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return IF(e,t)}}function IF(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function eye(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,o,a,i,s=[],c=!0,l=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(c=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(u){l=!0,o=u}finally{try{if(!c&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return s}}function tye(e){if(Array.isArray(e))return e}function DF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function LF(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?DF(Object(n),!0).forEach(function(r){nye(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):DF(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function nye(e,t,n){return t=rye(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rye(e){var t=oye(e,"string");return pu(t)=="symbol"?t:t+""}function oye(e,t){if(pu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(pu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var FF=function(e,t,n,r,o){var a=n-r,i;return i="M ".concat(e,",").concat(t),i+="L ".concat(e+n,",").concat(t),i+="L ".concat(e+n-a/2,",").concat(t+o),i+="L ".concat(e+n-a/2-r,",").concat(t+o),i+="L ".concat(e,",").concat(t," Z"),i},aye={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},iye=function(e){var t=LF(LF({},aye),e),n=g.useRef(),r=g.useState(-1),o=Qme(r,2),a=o[0],i=o[1];g.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var x=n.current.getTotalLength();x&&i(x)}catch{}},[]);var s=t.x,c=t.y,l=t.upperWidth,u=t.lowerWidth,d=t.height,f=t.className,p=t.animationEasing,y=t.animationDuration,m=t.animationBegin,v=t.isUpdateAnimationActive;if(s!==+s||c!==+c||l!==+l||u!==+u||d!==+d||l===0&&u===0||d===0)return null;var b=st("recharts-trapezoid",f);return v?V.createElement(sa,{canBegin:a>0,from:{upperWidth:0,lowerWidth:0,height:d,x:s,y:c},to:{upperWidth:l,lowerWidth:u,height:d,x:s,y:c},duration:y,animationEasing:p,isActive:v},function(x){var _=x.upperWidth,w=x.lowerWidth,j=x.height,E=x.x,S=x.y;return V.createElement(sa,{canBegin:a>0,from:"0px ".concat(a===-1?1:a,"px"),to:"".concat(a,"px 0px"),attributeName:"strokeDasharray",begin:m,duration:y,easing:p},V.createElement("path",rh({},nt(t,!0),{className:b,d:FF(E,S,_,w,j),ref:n})))}):V.createElement("g",null,V.createElement("path",rh({},nt(t,!0),{className:b,d:FF(s,c,l,u,d)})))},sye=["option","shapeType","propTransformer","activeClassName","isActive"];function hu(e){"@babel/helpers - typeof";return hu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hu(e)}function cye(e,t){if(e==null)return{};var n=lye(e,t),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function lye(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function BF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function oh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?BF(Object(n),!0).forEach(function(r){uye(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):BF(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function uye(e,t,n){return t=dye(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dye(e){var t=fye(e,"string");return hu(t)=="symbol"?t:t+""}function fye(e,t){if(hu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(hu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function pye(e,t){return oh(oh({},t),e)}function hye(e,t){return e==="symbols"}function $F(e){var t=e.shapeType,n=e.elementProps;switch(t){case"rectangle":return V.createElement(Q_,n);case"trapezoid":return V.createElement(iye,n);case"sector":return V.createElement(q8,n);case"symbols":if(hye(t))return V.createElement(Fw,n);break;default:return null}}function mye(e){return g.isValidElement(e)?e.props:e}function yye(e){var t=e.option,n=e.shapeType,r=e.propTransformer,o=r===void 0?pye:r,a=e.activeClassName,i=a===void 0?"recharts-active-shape":a,s=e.isActive,c=cye(e,sye),l;if(g.isValidElement(t))l=g.cloneElement(t,oh(oh({},c),mye(t)));else if(We(t))l=t(c);else if(Yme(t)&&!Gme(t)){var u=o(t,c);l=V.createElement($F,{shapeType:n,elementProps:u})}else{var d=c;l=V.createElement($F,{shapeType:n,elementProps:d})}return s?V.createElement(Ut,{className:i},l):l}function ah(e,t){return t!=null&&"trapezoids"in e.props}function ih(e,t){return t!=null&&"sectors"in e.props}function mu(e,t){return t!=null&&"points"in e.props}function gye(e,t){var n,r,o=e.x===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.x)||e.x===t.x,a=e.y===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.y)||e.y===t.y;return o&&a}function vye(e,t){var n=e.endAngle===t.endAngle,r=e.startAngle===t.startAngle;return n&&r}function bye(e,t){var n=e.x===t.x,r=e.y===t.y,o=e.z===t.z;return n&&r&&o}function xye(e,t){var n;return ah(e,t)?n=gye:ih(e,t)?n=vye:mu(e,t)&&(n=bye),n}function wye(e,t){var n;return ah(e,t)?n="trapezoids":ih(e,t)?n="sectors":mu(e,t)&&(n="points"),n}function _ye(e,t){if(ah(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(ih(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return mu(e,t)?t.payload:{}}function jye(e){var t=e.activeTooltipItem,n=e.graphicalItem,r=e.itemData,o=wye(n,t),a=_ye(n,t),i=r.filter(function(c,l){var u=x_(a,c),d=n.props[o].filter(function(y){var m=xye(n,t);return m(y,t)}),f=n.props[o].indexOf(d[d.length-1]),p=l===f;return u&&p}),s=r.indexOf(i[i.length-1]);return s}var nj,zF;function Eye(){if(zF)return nj;zF=1;var e=Math.ceil,t=Math.max;function n(r,o,a,i){for(var s=-1,c=t(e((o-r)/(a||1)),0),l=Array(c);c--;)l[i?c:++s]=r,r+=a;return l}return nj=n,nj}var rj,VF;function UF(){if(VF)return rj;VF=1;var e=vL(),t=1/0,n=17976931348623157e292;function r(o){if(!o)return o===0?o:0;if(o=e(o),o===t||o===-t){var a=o<0?-1:1;return a*n}return o===o?o:0}return rj=r,rj}var oj,HF;function Sye(){if(HF)return oj;HF=1;var e=Eye(),t=ti(),n=UF();function r(o){return function(a,i,s){return s&&typeof s!="number"&&t(a,i,s)&&(i=s=void 0),a=n(a),i===void 0?(i=a,a=0):i=n(i),s=s===void 0?a<i?1:-1:n(s),e(a,i,s,o)}}return oj=r,oj}var aj,WF;function Cye(){if(WF)return aj;WF=1;var e=Sye(),t=e();return aj=t,aj}var Oye=Cye();const sh=Xe(Oye);function yu(e){"@babel/helpers - typeof";return yu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yu(e)}function qF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function YF(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?qF(Object(n),!0).forEach(function(r){KF(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qF(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function KF(e,t,n){return t=Mye(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Mye(e){var t=Nye(e,"string");return yu(t)=="symbol"?t:t+""}function Nye(e,t){if(yu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(yu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var kye=["Webkit","Moz","O","ms"],Pye=function(e,t){var n=e.replace(/(\w)/,function(o){return o.toUpperCase()}),r=kye.reduce(function(o,a){return YF(YF({},o),{},KF({},a+n,t))},{});return r[e]=t,r};function Es(e){"@babel/helpers - typeof";return Es=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Es(e)}function ch(){return ch=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ch.apply(this,arguments)}function XF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function ij(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?XF(Object(n),!0).forEach(function(r){Fn(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):XF(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Aye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function GF(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,JF(r.key),r)}}function Tye(e,t,n){return t&&GF(e.prototype,t),n&&GF(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Rye(e,t,n){return t=lh(t),Iye(e,QF()?Reflect.construct(t,n||[],lh(e).constructor):t.apply(e,n))}function Iye(e,t){if(t&&(Es(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Dye(e)}function Dye(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function QF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(QF=function(){return!!e})()}function lh(e){return lh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},lh(e)}function Lye(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&sj(e,t)}function sj(e,t){return sj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},sj(e,t)}function Fn(e,t,n){return t=JF(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function JF(e){var t=Fye(e,"string");return Es(t)=="symbol"?t:t+""}function Fye(e,t){if(Es(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Es(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Bye=function(e){var t=e.data,n=e.startIndex,r=e.endIndex,o=e.x,a=e.width,i=e.travellerWidth;if(!t||!t.length)return{};var s=t.length,c=zl().domain(sh(0,s)).range([o,o+a-i]),l=c.domain().map(function(u){return c(u)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:c(n),endX:c(r),scale:c,scaleValues:l}},ZF=function(e){return e.changedTouches&&!!e.changedTouches.length},Ss=function(e){function t(n){var r;return Aye(this,t),r=Rye(this,t,[n]),Fn(r,"handleDrag",function(o){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(o):r.state.isSlideMoving&&r.handleSlideDrag(o)}),Fn(r,"handleTouchMove",function(o){o.changedTouches!=null&&o.changedTouches.length>0&&r.handleDrag(o.changedTouches[0])}),Fn(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var o=r.props,a=o.endIndex,i=o.onDragEnd,s=o.startIndex;i==null||i({endIndex:a,startIndex:s})}),r.detachDragEndListener()}),Fn(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),Fn(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),Fn(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),Fn(r,"handleSlideDragStart",function(o){var a=ZF(o)?o.changedTouches[0]:o;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:a.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return Lye(t,e),Tye(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var r=n.startX,o=n.endX,a=this.state.scaleValues,i=this.props,s=i.gap,c=i.data,l=c.length-1,u=Math.min(r,o),d=Math.max(r,o),f=t.getIndexInRange(a,u),p=t.getIndexInRange(a,d);return{startIndex:f-f%s,endIndex:p===l?l:p-p%s}}},{key:"getTextOfTick",value:function(n){var r=this.props,o=r.data,a=r.tickFormatter,i=r.dataKey,s=Br(o[n],i,n);return We(a)?a(s,n):s}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var r=this.state,o=r.slideMoveStartX,a=r.startX,i=r.endX,s=this.props,c=s.x,l=s.width,u=s.travellerWidth,d=s.startIndex,f=s.endIndex,p=s.onChange,y=n.pageX-o;y>0?y=Math.min(y,c+l-u-i,c+l-u-a):y<0&&(y=Math.max(y,c-a,c-i));var m=this.getIndex({startX:a+y,endX:i+y});(m.startIndex!==d||m.endIndex!==f)&&p&&p(m),this.setState({startX:a+y,endX:i+y,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,r){var o=ZF(r)?r.changedTouches[0]:r;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:o.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var r=this.state,o=r.brushMoveStartX,a=r.movingTravellerId,i=r.endX,s=r.startX,c=this.state[a],l=this.props,u=l.x,d=l.width,f=l.travellerWidth,p=l.onChange,y=l.gap,m=l.data,v={startX:this.state.startX,endX:this.state.endX},b=n.pageX-o;b>0?b=Math.min(b,u+d-f-c):b<0&&(b=Math.max(b,u-c)),v[a]=c+b;var x=this.getIndex(v),_=x.startIndex,w=x.endIndex,j=function(){var E=m.length-1;return a==="startX"&&(i>s?_%y===0:w%y===0)||i<s&&w===E||a==="endX"&&(i>s?w%y===0:_%y===0)||i>s&&w===E};this.setState(Fn(Fn({},a,c+b),"brushMoveStartX",n.pageX),function(){p&&j()&&p(x)})}},{key:"handleTravellerMoveKeyboard",value:function(n,r){var o=this,a=this.state,i=a.scaleValues,s=a.startX,c=a.endX,l=this.state[r],u=i.indexOf(l);if(u!==-1){var d=u+n;if(!(d===-1||d>=i.length)){var f=i[d];r==="startX"&&f>=c||r==="endX"&&f<=s||this.setState(Fn({},r,f),function(){o.props.onChange(o.getIndex({startX:o.state.startX,endX:o.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,r=n.x,o=n.y,a=n.width,i=n.height,s=n.fill,c=n.stroke;return V.createElement("rect",{stroke:c,fill:s,x:r,y:o,width:a,height:i})}},{key:"renderPanorama",value:function(){var n=this.props,r=n.x,o=n.y,a=n.width,i=n.height,s=n.data,c=n.children,l=n.padding,u=g.Children.only(c);return u?V.cloneElement(u,{x:r,y:o,width:a,height:i,margin:l,compact:!0,data:s}):null}},{key:"renderTravellerLayer",value:function(n,r){var o,a,i=this,s=this.props,c=s.y,l=s.travellerWidth,u=s.height,d=s.traveller,f=s.ariaLabel,p=s.data,y=s.startIndex,m=s.endIndex,v=Math.max(n,this.props.x),b=ij(ij({},nt(this.props,!1)),{},{x:v,y:c,width:l,height:u}),x=f||"Min value: ".concat((o=p[y])===null||o===void 0?void 0:o.name,", Max value: ").concat((a=p[m])===null||a===void 0?void 0:a.name);return V.createElement(Ut,{tabIndex:0,role:"slider","aria-label":x,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[r],onTouchStart:this.travellerDragStartHandlers[r],onKeyDown:function(_){["ArrowLeft","ArrowRight"].includes(_.key)&&(_.preventDefault(),_.stopPropagation(),i.handleTravellerMoveKeyboard(_.key==="ArrowRight"?1:-1,r))},onFocus:function(){i.setState({isTravellerFocused:!0})},onBlur:function(){i.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(d,b))}},{key:"renderSlide",value:function(n,r){var o=this.props,a=o.y,i=o.height,s=o.stroke,c=o.travellerWidth,l=Math.min(n,r)+c,u=Math.max(Math.abs(r-n)-c,0);return V.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:s,fillOpacity:.2,x:l,y:a,width:u,height:i})}},{key:"renderText",value:function(){var n=this.props,r=n.startIndex,o=n.endIndex,a=n.y,i=n.height,s=n.travellerWidth,c=n.stroke,l=this.state,u=l.startX,d=l.endX,f=5,p={pointerEvents:"none",fill:c};return V.createElement(Ut,{className:"recharts-brush-texts"},V.createElement(_p,ch({textAnchor:"end",verticalAnchor:"middle",x:Math.min(u,d)-f,y:a+i/2},p),this.getTextOfTick(r)),V.createElement(_p,ch({textAnchor:"start",verticalAnchor:"middle",x:Math.max(u,d)+s+f,y:a+i/2},p),this.getTextOfTick(o)))}},{key:"render",value:function(){var n=this.props,r=n.data,o=n.className,a=n.children,i=n.x,s=n.y,c=n.width,l=n.height,u=n.alwaysShowText,d=this.state,f=d.startX,p=d.endX,y=d.isTextActive,m=d.isSlideMoving,v=d.isTravellerMoving,b=d.isTravellerFocused;if(!r||!r.length||!me(i)||!me(s)||!me(c)||!me(l)||c<=0||l<=0)return null;var x=st("recharts-brush",o),_=V.Children.count(a)===1,w=Pye("userSelect","none");return V.createElement(Ut,{className:x,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:w},this.renderBackground(),_&&this.renderPanorama(),this.renderSlide(f,p),this.renderTravellerLayer(f,"startX"),this.renderTravellerLayer(p,"endX"),(y||m||v||b||u)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var r=n.x,o=n.y,a=n.width,i=n.height,s=n.stroke,c=Math.floor(o+i/2)-1;return V.createElement(V.Fragment,null,V.createElement("rect",{x:r,y:o,width:a,height:i,fill:s,stroke:"none"}),V.createElement("line",{x1:r+1,y1:c,x2:r+a-1,y2:c,fill:"none",stroke:"#fff"}),V.createElement("line",{x1:r+1,y1:c+2,x2:r+a-1,y2:c+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,r){var o;return V.isValidElement(n)?o=V.cloneElement(n,r):We(n)?o=n(r):o=t.renderDefaultTraveller(r),o}},{key:"getDerivedStateFromProps",value:function(n,r){var o=n.data,a=n.width,i=n.x,s=n.travellerWidth,c=n.updateId,l=n.startIndex,u=n.endIndex;if(o!==r.prevData||c!==r.prevUpdateId)return ij({prevData:o,prevTravellerWidth:s,prevUpdateId:c,prevX:i,prevWidth:a},o&&o.length?Bye({data:o,width:a,x:i,travellerWidth:s,startIndex:l,endIndex:u}):{scale:null,scaleValues:null});if(r.scale&&(a!==r.prevWidth||i!==r.prevX||s!==r.prevTravellerWidth)){r.scale.range([i,i+a-s]);var d=r.scale.domain().map(function(f){return r.scale(f)});return{prevData:o,prevTravellerWidth:s,prevUpdateId:c,prevX:i,prevWidth:a,startX:r.scale(n.startIndex),endX:r.scale(n.endIndex),scaleValues:d}}return null}},{key:"getIndexInRange",value:function(n,r){for(var o=n.length,a=0,i=o-1;i-a>1;){var s=Math.floor((a+i)/2);n[s]>r?i=s:a=s}return r>=n[i]?i:a}}])}(g.PureComponent);Fn(Ss,"displayName","Brush"),Fn(Ss,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var cj,eB;function $ye(){if(eB)return cj;eB=1;var e=i1();function t(n,r){var o;return e(n,function(a,i,s){return o=r(a,i,s),!o}),!!o}return cj=t,cj}var lj,tB;function zye(){if(tB)return lj;tB=1;var e=yk(),t=Nr(),n=$ye(),r=cn(),o=ti();function a(i,s,c){var l=r(i)?e:n;return c&&o(i,s,c)&&(s=void 0),l(i,t(s,3))}return lj=a,lj}var Vye=zye();const Uye=Xe(Vye);var $r=function(e,t){var n=e.alwaysShow,r=e.ifOverflow;return n&&(r="extendDomain"),r===t},uj,nB;function Hye(){if(nB)return uj;nB=1;var e=zh(),t=F4(),n=Nr();function r(o,a){var i={};return a=n(a,3),t(o,function(s,c,l){e(i,c,a(s,c,l))}),i}return uj=r,uj}var Wye=Hye();const qye=Xe(Wye);var dj,rB;function Yye(){if(rB)return dj;rB=1;function e(t,n){for(var r=-1,o=t==null?0:t.length;++r<o;)if(!n(t[r],r,t))return!1;return!0}return dj=e,dj}var fj,oB;function Kye(){if(oB)return fj;oB=1;var e=i1();function t(n,r){var o=!0;return e(n,function(a,i,s){return o=!!r(a,i,s),o}),o}return fj=t,fj}var pj,aB;function Xye(){if(aB)return pj;aB=1;var e=Yye(),t=Kye(),n=Nr(),r=cn(),o=ti();function a(i,s,c){var l=r(i)?e:t;return c&&o(i,s,c)&&(s=void 0),l(i,n(s,3))}return pj=a,pj}var Gye=Xye();const iB=Xe(Gye);var Qye=["x","y"];function gu(e){"@babel/helpers - typeof";return gu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gu(e)}function hj(){return hj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},hj.apply(this,arguments)}function sB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function vu(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?sB(Object(n),!0).forEach(function(r){Jye(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Jye(e,t,n){return t=Zye(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Zye(e){var t=ege(e,"string");return gu(t)=="symbol"?t:t+""}function ege(e,t){if(gu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(gu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function tge(e,t){if(e==null)return{};var n=nge(e,t),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function nge(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function rge(e,t){var n=e.x,r=e.y,o=tge(e,Qye),a="".concat(n),i=parseInt(a,10),s="".concat(r),c=parseInt(s,10),l="".concat(t.height||o.height),u=parseInt(l,10),d="".concat(t.width||o.width),f=parseInt(d,10);return vu(vu(vu(vu(vu({},t),o),i?{x:i}:{}),c?{y:c}:{}),{},{height:u,width:f,name:t.name,radius:t.radius})}function cB(e){return V.createElement(yye,hj({shapeType:"rectangle",propTransformer:rge,activeClassName:"recharts-active-bar"},e))}var oge=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,r){if(typeof e=="number")return e;var o=typeof n=="number";return o?e(n,r):(o||Ha(),t)}},age=["value","background"],lB;function Cs(e){"@babel/helpers - typeof";return Cs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cs(e)}function ige(e,t){if(e==null)return{};var n=sge(e,t),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function sge(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function uh(){return uh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},uh.apply(this,arguments)}function uB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Lt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?uB(Object(n),!0).forEach(function(r){ca(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function cge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dB(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,pB(r.key),r)}}function lge(e,t,n){return t&&dB(e.prototype,t),n&&dB(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function uge(e,t,n){return t=dh(t),dge(e,fB()?Reflect.construct(t,n||[],dh(e).constructor):t.apply(e,n))}function dge(e,t){if(t&&(Cs(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fge(e)}function fge(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(fB=function(){return!!e})()}function dh(e){return dh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},dh(e)}function pge(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&mj(e,t)}function mj(e,t){return mj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},mj(e,t)}function ca(e,t,n){return t=pB(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pB(e){var t=hge(e,"string");return Cs(t)=="symbol"?t:t+""}function hge(e,t){if(Cs(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Cs(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ya=function(e){function t(){var n;cge(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return n=uge(this,t,[].concat(o)),ca(n,"state",{isAnimationFinished:!1}),ca(n,"id",ep("recharts-bar-")),ca(n,"handleAnimationEnd",function(){var i=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),i&&i()}),ca(n,"handleAnimationStart",function(){var i=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),i&&i()}),n}return pge(t,e),lge(t,[{key:"renderRectanglesStatically",value:function(n){var r=this,o=this.props,a=o.shape,i=o.dataKey,s=o.activeIndex,c=o.activeBar,l=nt(this.props,!1);return n&&n.map(function(u,d){var f=d===s,p=f?c:a,y=Lt(Lt(Lt({},l),u),{},{isActive:f,option:p,index:d,dataKey:i,onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd});return V.createElement(Ut,uh({className:"recharts-bar-rectangle"},np(r.props,u,d),{key:"rectangle-".concat(u==null?void 0:u.x,"-").concat(u==null?void 0:u.y,"-").concat(u==null?void 0:u.value)}),V.createElement(cB,y))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,r=this.props,o=r.data,a=r.layout,i=r.isAnimationActive,s=r.animationBegin,c=r.animationDuration,l=r.animationEasing,u=r.animationId,d=this.state.prevData;return V.createElement(sa,{begin:s,duration:c,isActive:i,easing:l,from:{t:0},to:{t:1},key:"bar-".concat(u),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(f){var p=f.t,y=o.map(function(m,v){var b=d&&d[v];if(b){var x=os(b.x,m.x),_=os(b.y,m.y),w=os(b.width,m.width),j=os(b.height,m.height);return Lt(Lt({},m),{},{x:x(p),y:_(p),width:w(p),height:j(p)})}if(a==="horizontal"){var E=os(0,m.height),S=E(p);return Lt(Lt({},m),{},{y:m.y+m.height-S,height:S})}var O=os(0,m.width),N=O(p);return Lt(Lt({},m),{},{width:N})});return V.createElement(Ut,null,n.renderRectanglesStatically(y))})}},{key:"renderRectangles",value:function(){var n=this.props,r=n.data,o=n.isAnimationActive,a=this.state.prevData;return o&&r&&r.length&&(!a||!x_(a,r))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(r)}},{key:"renderBackground",value:function(){var n=this,r=this.props,o=r.data,a=r.dataKey,i=r.activeIndex,s=nt(this.props.background,!1);return o.map(function(c,l){c.value;var u=c.background,d=ige(c,age);if(!u)return null;var f=Lt(Lt(Lt(Lt(Lt({},d),{},{fill:"#eee"},u),s),np(n.props,c,l)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:a,index:l,className:"recharts-bar-background-rectangle"});return V.createElement(cB,uh({key:"background-bar-".concat(l),option:n.props.background,isActive:l===i},f))})}},{key:"renderErrorBar",value:function(n,r){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var o=this.props,a=o.data,i=o.xAxis,s=o.yAxis,c=o.layout,l=o.children,u=gr(l,Hp);if(!u)return null;var d=c==="vertical"?a[0].height/2:a[0].width/2,f=function(y,m){var v=Array.isArray(y.value)?y.value[1]:y.value;return{x:y.x,y:y.y,value:v,errorVal:Br(y,m)}},p={clipPath:n?"url(#clipPath-".concat(r,")"):null};return V.createElement(Ut,p,u.map(function(y){return V.cloneElement(y,{key:"error-bar-".concat(r,"-").concat(y.props.dataKey),data:a,xAxis:i,yAxis:s,layout:c,offset:d,dataPointFormatter:f})}))}},{key:"render",value:function(){var n=this.props,r=n.hide,o=n.data,a=n.className,i=n.xAxis,s=n.yAxis,c=n.left,l=n.top,u=n.width,d=n.height,f=n.isAnimationActive,p=n.background,y=n.id;if(r||!o||!o.length)return null;var m=this.state.isAnimationFinished,v=st("recharts-bar",a),b=i&&i.allowDataOverflow,x=s&&s.allowDataOverflow,_=b||x,w=rt(y)?this.id:y;return V.createElement(Ut,{className:v},b||x?V.createElement("defs",null,V.createElement("clipPath",{id:"clipPath-".concat(w)},V.createElement("rect",{x:b?c:c-u/2,y:x?l:l-d/2,width:b?u:u*2,height:x?d:d*2}))):null,V.createElement(Ut,{className:"recharts-bar-rectangles",clipPath:_?"url(#clipPath-".concat(w,")"):null},p?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(_,w),(!f||m)&&qa.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(n,r){return n.animationId!==r.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:r.curData}:n.data!==r.curData?{curData:n.data}:null}}])}(g.PureComponent);lB=Ya,ca(Ya,"displayName","Bar"),ca(Ya,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!ta.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"}),ca(Ya,"getComposedData",function(e){var t=e.props,n=e.item,r=e.barPosition,o=e.bandSize,a=e.xAxis,i=e.yAxis,s=e.xAxisTicks,c=e.yAxisTicks,l=e.stackedData,u=e.dataStartIndex,d=e.displayedData,f=e.offset,p=Kfe(r,n);if(!p)return null;var y=t.layout,m=n.type.defaultProps,v=m!==void 0?Lt(Lt({},m),n.props):n.props,b=v.dataKey,x=v.children,_=v.minPointSize,w=y==="horizontal"?i:a,j=l?w.scale.domain():null,E=npe({numericAxis:w}),S=gr(x,jL),O=d.map(function(N,P){var k,R,A,C,M,T;l?k=Xfe(l[u+P],j):(k=Br(N,b),Array.isArray(k)||(k=[E,k]));var I=oge(_,lB.defaultProps.minPointSize)(k[1],P);if(y==="horizontal"){var L,D=[i.scale(k[0]),i.scale(k[1])],$=D[0],U=D[1];R=M8({axis:a,ticks:s,bandSize:o,offset:p.offset,entry:N,index:P}),A=(L=U??$)!==null&&L!==void 0?L:void 0,C=p.size;var F=$-U;if(M=Number.isNaN(F)?0:F,T={x:R,y:i.y,width:C,height:i.height},Math.abs(I)>0&&Math.abs(M)<Math.abs(I)){var H=yr(M||I)*(Math.abs(I)-Math.abs(M));A-=H,M+=H}}else{var Y=[a.scale(k[0]),a.scale(k[1])],G=Y[0],re=Y[1];if(R=G,A=M8({axis:i,ticks:c,bandSize:o,offset:p.offset,entry:N,index:P}),C=re-G,M=p.size,T={x:a.x,y:A,width:a.width,height:M},Math.abs(I)>0&&Math.abs(C)<Math.abs(I)){var Z=yr(C||I)*(Math.abs(I)-Math.abs(C));C+=Z}}return Lt(Lt(Lt({},N),{},{x:R,y:A,width:C,height:M,value:l?k:k[1],payload:N,background:T},S&&S[P]&&S[P].props),{},{tooltipPayload:[T8(n,N)],tooltipPosition:{x:R+C/2,y:A+M/2}})});return Lt({data:O,layout:y},f)});function bu(e){"@babel/helpers - typeof";return bu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bu(e)}function mge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hB(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,yB(r.key),r)}}function yge(e,t,n){return t&&hB(e.prototype,t),n&&hB(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function mB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function xr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?mB(Object(n),!0).forEach(function(r){fh(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function fh(e,t,n){return t=yB(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yB(e){var t=gge(e,"string");return bu(t)=="symbol"?t:t+""}function gge(e,t){if(bu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(bu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var vge=function(e,t,n,r,o){var a=e.width,i=e.height,s=e.layout,c=e.children,l=Object.keys(t),u={left:n.left,leftMirror:n.left,right:a-n.right,rightMirror:a-n.right,top:n.top,topMirror:n.top,bottom:i-n.bottom,bottomMirror:i-n.bottom},d=!!Dn(c,Ya);return l.reduce(function(f,p){var y=t[p],m=y.orientation,v=y.domain,b=y.padding,x=b===void 0?{}:b,_=y.mirror,w=y.reversed,j="".concat(m).concat(_?"Mirror":""),E,S,O,N,P;if(y.type==="number"&&(y.padding==="gap"||y.padding==="no-gap")){var k=v[1]-v[0],R=1/0,A=y.categoricalDomain.sort();if(A.forEach(function(H,Y){Y>0&&(R=Math.min((H||0)-(A[Y-1]||0),R))}),Number.isFinite(R)){var C=R/k,M=y.layout==="vertical"?n.height:n.width;if(y.padding==="gap"&&(E=C*M/2),y.padding==="no-gap"){var T=Da(e.barCategoryGap,C*M),I=C*M/2;E=I-T-(I-T)/M*T}}}r==="xAxis"?S=[n.left+(x.left||0)+(E||0),n.left+n.width-(x.right||0)-(E||0)]:r==="yAxis"?S=s==="horizontal"?[n.top+n.height-(x.bottom||0),n.top+(x.top||0)]:[n.top+(x.top||0)+(E||0),n.top+n.height-(x.bottom||0)-(E||0)]:S=y.range,w&&(S=[S[1],S[0]]);var L=qfe(y,o,d),D=L.scale,$=L.realScaleType;D.domain(v).range(S),Yfe(D);var U=tpe(D,xr(xr({},y),{},{realScaleType:$}));r==="xAxis"?(P=m==="top"&&!_||m==="bottom"&&_,O=n.left,N=u[j]-P*y.height):r==="yAxis"&&(P=m==="left"&&!_||m==="right"&&_,O=u[j]-P*y.width,N=n.top);var F=xr(xr(xr({},y),U),{},{realScaleType:$,x:O,y:N,scale:D,width:r==="xAxis"?n.width:y.width,height:r==="yAxis"?n.height:y.height});return F.bandSize=Yp(F,U),!y.hide&&r==="xAxis"?u[j]+=(P?-1:1)*F.height:y.hide||(u[j]+=(P?-1:1)*F.width),xr(xr({},f),{},fh({},p,F))},{})},gB=function(e,t){var n=e.x,r=e.y,o=t.x,a=t.y;return{x:Math.min(n,o),y:Math.min(r,a),width:Math.abs(o-n),height:Math.abs(a-r)}},bge=function(e){var t=e.x1,n=e.y1,r=e.x2,o=e.y2;return gB({x:t,y:n},{x:r,y:o})},vB=function(){function e(t){mge(this,e),this.scale=t}return yge(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.bandAware,o=n.position;if(t!==void 0){if(o)switch(o){case"start":return this.scale(t);case"middle":{var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+a}case"end":{var i=this.bandwidth?this.bandwidth():0;return this.scale(t)+i}default:return this.scale(t)}if(r){var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+s}return this.scale(t)}}},{key:"isInRange",value:function(t){var n=this.range(),r=n[0],o=n[n.length-1];return r<=o?t>=r&&t<=o:t>=o&&t<=r}}],[{key:"create",value:function(t){return new e(t)}}])}();fh(vB,"EPS",1e-4);var yj=function(e){var t=Object.keys(e).reduce(function(n,r){return xr(xr({},n),{},fh({},r,vB.create(e[r])))},{});return xr(xr({},t),{},{apply:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=r.bandAware,a=r.position;return qye(n,function(i,s){return t[s].apply(i,{bandAware:o,position:a})})},isInRange:function(n){return iB(n,function(r,o){return t[o].isInRange(r)})}})};function xge(e){return(e%180+180)%180}var wge=function(e){var t=e.width,n=e.height,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=xge(r),a=o*Math.PI/180,i=Math.atan(n/t),s=a>i&&a<Math.PI-i?n/Math.sin(a):t/Math.cos(a);return Math.abs(s)},gj,bB;function _ge(){if(bB)return gj;bB=1;var e=Nr(),t=da(),n=Zs();function r(o){return function(a,i,s){var c=Object(a);if(!t(a)){var l=e(i,3);a=n(a),i=function(d){return l(c[d],d,c)}}var u=o(a,i,s);return u>-1?c[l?a[u]:u]:void 0}}return gj=r,gj}var vj,xB;function wB(){if(xB)return vj;xB=1;var e=UF();function t(n){var r=e(n),o=r%1;return r===r?o?r-o:r:0}return vj=t,vj}var bj,_B;function jge(){if(_B)return bj;_B=1;var e=y4(),t=Nr(),n=wB(),r=Math.max;function o(a,i,s){var c=a==null?0:a.length;if(!c)return-1;var l=s==null?0:n(s);return l<0&&(l=r(c+l,0)),e(a,t(i,3),l)}return bj=o,bj}var xj,jB;function Ege(){if(jB)return xj;jB=1;var e=_ge(),t=jge(),n=e(t);return xj=n,xj}var Sge=Ege();const Cge=Xe(Sge);var Oge=xP(),Mge=Xe(Oge)(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),wj=g.createContext(void 0),_j=g.createContext(void 0),EB=g.createContext(void 0),SB=g.createContext({}),CB=g.createContext(void 0),OB=g.createContext(0),MB=g.createContext(0),NB=function(e){var t=e.state,n=t.xAxisMap,r=t.yAxisMap,o=t.offset,a=e.clipPathId,i=e.children,s=e.width,c=e.height,l=Mge(o);return V.createElement(wj.Provider,{value:n},V.createElement(_j.Provider,{value:r},V.createElement(SB.Provider,{value:o},V.createElement(EB.Provider,{value:l},V.createElement(CB.Provider,{value:a},V.createElement(OB.Provider,{value:c},V.createElement(MB.Provider,{value:s},i)))))))},Nge=function(){return g.useContext(CB)},kB=function(e){var t=g.useContext(wj);t==null&&Ha();var n=t[e];return n==null&&Ha(),n},kge=function(){var e=g.useContext(wj);return ea(e)},Pge=function(){var e=g.useContext(_j),t=Cge(e,function(n){return iB(n.domain,Number.isFinite)});return t||ea(e)},PB=function(e){var t=g.useContext(_j);t==null&&Ha();var n=t[e];return n==null&&Ha(),n},Age=function(){var e=g.useContext(EB);return e},Tge=function(){return g.useContext(SB)},jj=function(){return g.useContext(MB)},Ej=function(){return g.useContext(OB)};function Os(e){"@babel/helpers - typeof";return Os=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Os(e)}function Rge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ige(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,IB(r.key),r)}}function Dge(e,t,n){return t&&Ige(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Lge(e,t,n){return t=ph(t),Fge(e,AB()?Reflect.construct(t,n||[],ph(e).constructor):t.apply(e,n))}function Fge(e,t){if(t&&(Os(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Bge(e)}function Bge(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function AB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(AB=function(){return!!e})()}function ph(e){return ph=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ph(e)}function $ge(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Sj(e,t)}function Sj(e,t){return Sj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Sj(e,t)}function TB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function RB(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?TB(Object(n),!0).forEach(function(r){Cj(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):TB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Cj(e,t,n){return t=IB(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function IB(e){var t=zge(e,"string");return Os(t)=="symbol"?t:t+""}function zge(e,t){if(Os(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Os(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Vge(e,t){return qge(e)||Wge(e,t)||Hge(e,t)||Uge()}function Uge(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Hge(e,t){if(e){if(typeof e=="string")return DB(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return DB(e,t)}}function DB(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Wge(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,o,a,i,s=[],c=!0,l=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(c=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(u){l=!0,o=u}finally{try{if(!c&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return s}}function qge(e){if(Array.isArray(e))return e}function Oj(){return Oj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Oj.apply(this,arguments)}var Yge=function(e,t){var n;return V.isValidElement(e)?n=V.cloneElement(e,t):We(e)?n=e(t):n=V.createElement("line",Oj({},t,{className:"recharts-reference-line-line"})),n},Kge=function(e,t,n,r,o,a,i,s,c){var l=o.x,u=o.y,d=o.width,f=o.height;if(n){var p=c.y,y=e.y.apply(p,{position:a});if($r(c,"discard")&&!e.y.isInRange(y))return null;var m=[{x:l+d,y},{x:l,y}];return s==="left"?m.reverse():m}if(t){var v=c.x,b=e.x.apply(v,{position:a});if($r(c,"discard")&&!e.x.isInRange(b))return null;var x=[{x:b,y:u+f},{x:b,y:u}];return i==="top"?x.reverse():x}if(r){var _=c.segment,w=_.map(function(j){return e.apply(j,{position:a})});return $r(c,"discard")&&Uye(w,function(j){return!e.isInRange(j)})?null:w}return null};function Xge(e){var t=e.x,n=e.y,r=e.segment,o=e.xAxisId,a=e.yAxisId,i=e.shape,s=e.className,c=e.alwaysShow,l=Nge(),u=kB(o),d=PB(a),f=Age();if(!l||!f)return null;jo(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var p=yj({x:u.scale,y:d.scale}),y=Bt(t),m=Bt(n),v=r&&r.length===2,b=Kge(p,y,m,v,f,e.position,u.orientation,d.orientation,e);if(!b)return null;var x=Vge(b,2),_=x[0],w=_.x,j=_.y,E=x[1],S=E.x,O=E.y,N=$r(e,"hidden")?"url(#".concat(l,")"):void 0,P=RB(RB({clipPath:N},nt(e,!0)),{},{x1:w,y1:j,x2:S,y2:O});return V.createElement(Ut,{className:st("recharts-reference-line",s)},Yge(i,P),rn.renderCallByParent(e,bge({x1:w,y1:j,x2:S,y2:O})))}var Mj=function(e){function t(){return Rge(this,t),Lge(this,t,arguments)}return $ge(t,e),Dge(t,[{key:"render",value:function(){return V.createElement(Xge,this.props)}}])}(V.Component);Cj(Mj,"displayName","ReferenceLine"),Cj(Mj,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function Nj(){return Nj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Nj.apply(this,arguments)}function Ms(e){"@babel/helpers - typeof";return Ms=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ms(e)}function LB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function FB(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?LB(Object(n),!0).forEach(function(r){mh(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):LB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Gge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Qge(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,$B(r.key),r)}}function Jge(e,t,n){return t&&Qge(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Zge(e,t,n){return t=hh(t),eve(e,BB()?Reflect.construct(t,n||[],hh(e).constructor):t.apply(e,n))}function eve(e,t){if(t&&(Ms(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return tve(e)}function tve(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function BB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(BB=function(){return!!e})()}function hh(e){return hh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},hh(e)}function nve(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&kj(e,t)}function kj(e,t){return kj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},kj(e,t)}function mh(e,t,n){return t=$B(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $B(e){var t=rve(e,"string");return Ms(t)=="symbol"?t:t+""}function rve(e,t){if(Ms(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Ms(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ove=function(e){var t=e.x,n=e.y,r=e.xAxis,o=e.yAxis,a=yj({x:r.scale,y:o.scale}),i=a.apply({x:t,y:n},{bandAware:!0});return $r(e,"discard")&&!a.isInRange(i)?null:i},yh=function(e){function t(){return Gge(this,t),Zge(this,t,arguments)}return nve(t,e),Jge(t,[{key:"render",value:function(){var n=this.props,r=n.x,o=n.y,a=n.r,i=n.alwaysShow,s=n.clipPathId,c=Bt(r),l=Bt(o);if(jo(i===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!c||!l)return null;var u=ove(this.props);if(!u)return null;var d=u.x,f=u.y,p=this.props,y=p.shape,m=p.className,v=$r(this.props,"hidden")?"url(#".concat(s,")"):void 0,b=FB(FB({clipPath:v},nt(this.props,!0)),{},{cx:d,cy:f});return V.createElement(Ut,{className:st("recharts-reference-dot",m)},t.renderDot(y,b),rn.renderCallByParent(this.props,{x:d-a,y:f-a,width:2*a,height:2*a}))}}])}(V.Component);mh(yh,"displayName","ReferenceDot"),mh(yh,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1}),mh(yh,"renderDot",function(e,t){var n;return V.isValidElement(e)?n=V.cloneElement(e,t):We(e)?n=e(t):n=V.createElement(PF,Nj({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),n});function Pj(){return Pj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Pj.apply(this,arguments)}function Ns(e){"@babel/helpers - typeof";return Ns=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ns(e)}function zB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function VB(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?zB(Object(n),!0).forEach(function(r){vh(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ave(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ive(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,HB(r.key),r)}}function sve(e,t,n){return t&&ive(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function cve(e,t,n){return t=gh(t),lve(e,UB()?Reflect.construct(t,n||[],gh(e).constructor):t.apply(e,n))}function lve(e,t){if(t&&(Ns(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return uve(e)}function uve(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function UB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(UB=function(){return!!e})()}function gh(e){return gh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},gh(e)}function dve(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Aj(e,t)}function Aj(e,t){return Aj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Aj(e,t)}function vh(e,t,n){return t=HB(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function HB(e){var t=fve(e,"string");return Ns(t)=="symbol"?t:t+""}function fve(e,t){if(Ns(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Ns(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var pve=function(e,t,n,r,o){var a=o.x1,i=o.x2,s=o.y1,c=o.y2,l=o.xAxis,u=o.yAxis;if(!l||!u)return null;var d=yj({x:l.scale,y:u.scale}),f={x:e?d.x.apply(a,{position:"start"}):d.x.rangeMin,y:n?d.y.apply(s,{position:"start"}):d.y.rangeMin},p={x:t?d.x.apply(i,{position:"end"}):d.x.rangeMax,y:r?d.y.apply(c,{position:"end"}):d.y.rangeMax};return $r(o,"discard")&&(!d.isInRange(f)||!d.isInRange(p))?null:gB(f,p)},bh=function(e){function t(){return ave(this,t),cve(this,t,arguments)}return dve(t,e),sve(t,[{key:"render",value:function(){var n=this.props,r=n.x1,o=n.x2,a=n.y1,i=n.y2,s=n.className,c=n.alwaysShow,l=n.clipPathId;jo(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var u=Bt(r),d=Bt(o),f=Bt(a),p=Bt(i),y=this.props.shape;if(!u&&!d&&!f&&!p&&!y)return null;var m=pve(u,d,f,p,this.props);if(!m&&!y)return null;var v=$r(this.props,"hidden")?"url(#".concat(l,")"):void 0;return V.createElement(Ut,{className:st("recharts-reference-area",s)},t.renderRect(y,VB(VB({clipPath:v},nt(this.props,!0)),m)),rn.renderCallByParent(this.props,m))}}])}(V.Component);vh(bh,"displayName","ReferenceArea"),vh(bh,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1}),vh(bh,"renderRect",function(e,t){var n;return V.isValidElement(e)?n=V.cloneElement(e,t):We(e)?n=e(t):n=V.createElement(Q_,Pj({},t,{className:"recharts-reference-area-rect"})),n});function WB(e,t,n){if(t<1)return[];if(t===1&&n===void 0)return e;for(var r=[],o=0;o<e.length;o+=t)r.push(e[o]);return r}function hve(e,t,n){var r={width:e.width+t.width,height:e.height+t.height};return wge(r,n)}function mve(e,t,n){var r=n==="width",o=e.x,a=e.y,i=e.width,s=e.height;return t===1?{start:r?o:a,end:r?o+i:a+s}:{start:r?o+i:a+s,end:r?o:a}}function xh(e,t,n,r,o){if(e*t<e*r||e*t>e*o)return!1;var a=n();return e*(t-e*a/2-r)>=0&&e*(t+e*a/2-o)<=0}function yve(e,t){return WB(e,t+1)}function gve(e,t,n,r,o){for(var a=(r||[]).slice(),i=t.start,s=t.end,c=0,l=1,u=i,d=function(){var p=r==null?void 0:r[c];if(p===void 0)return{v:WB(r,l)};var y=c,m,v=function(){return m===void 0&&(m=n(p,y)),m},b=p.coordinate,x=c===0||xh(e,b,v,u,s);x||(c=0,u=i,l+=1),x&&(u=b+e*(v()/2+o),c+=l)},f;l<=a.length;)if(f=d(),f)return f.v;return[]}function xu(e){"@babel/helpers - typeof";return xu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xu(e)}function qB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function on(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?qB(Object(n),!0).forEach(function(r){vve(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function vve(e,t,n){return t=bve(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bve(e){var t=xve(e,"string");return xu(t)=="symbol"?t:t+""}function xve(e,t){if(xu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(xu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wve(e,t,n,r,o){for(var a=(r||[]).slice(),i=a.length,s=t.start,c=t.end,l=function(d){var f=a[d],p,y=function(){return p===void 0&&(p=n(f,d)),p};if(d===i-1){var m=e*(f.coordinate+e*y()/2-c);a[d]=f=on(on({},f),{},{tickCoord:m>0?f.coordinate-m*e:f.coordinate})}else a[d]=f=on(on({},f),{},{tickCoord:f.coordinate});var v=xh(e,f.tickCoord,y,s,c);v&&(c=f.tickCoord-e*(y()/2+o),a[d]=on(on({},f),{},{isShow:!0}))},u=i-1;u>=0;u--)l(u);return a}function _ve(e,t,n,r,o,a){var i=(r||[]).slice(),s=i.length,c=t.start,l=t.end;if(a){var u=r[s-1],d=n(u,s-1),f=e*(u.coordinate+e*d/2-l);i[s-1]=u=on(on({},u),{},{tickCoord:f>0?u.coordinate-f*e:u.coordinate});var p=xh(e,u.tickCoord,function(){return d},c,l);p&&(l=u.tickCoord-e*(d/2+o),i[s-1]=on(on({},u),{},{isShow:!0}))}for(var y=a?s-1:s,m=function(b){var x=i[b],_,w=function(){return _===void 0&&(_=n(x,b)),_};if(b===0){var j=e*(x.coordinate-e*w()/2-c);i[b]=x=on(on({},x),{},{tickCoord:j<0?x.coordinate-j*e:x.coordinate})}else i[b]=x=on(on({},x),{},{tickCoord:x.coordinate});var E=xh(e,x.tickCoord,w,c,l);E&&(c=x.tickCoord+e*(w()/2+o),i[b]=on(on({},x),{},{isShow:!0}))},v=0;v<y;v++)m(v);return i}function Tj(e,t,n){var r=e.tick,o=e.ticks,a=e.viewBox,i=e.minTickGap,s=e.orientation,c=e.interval,l=e.tickFormatter,u=e.unit,d=e.angle;if(!o||!o.length||!r)return[];if(me(c)||ta.isSsr)return yve(o,typeof c=="number"&&me(c)?c:0);var f=[],p=s==="top"||s==="bottom"?"width":"height",y=u&&p==="width"?Dl(u,{fontSize:t,letterSpacing:n}):{width:0,height:0},m=function(x,_){var w=We(l)?l(x.value,_):x.value;return p==="width"?hve(Dl(w,{fontSize:t,letterSpacing:n}),y,d):Dl(w,{fontSize:t,letterSpacing:n})[p]},v=o.length>=2?yr(o[1].coordinate-o[0].coordinate):1,b=mve(a,v,p);return c==="equidistantPreserveStart"?gve(v,b,m,o,i):(c==="preserveStart"||c==="preserveStartEnd"?f=_ve(v,b,m,o,i,c==="preserveStartEnd"):f=wve(v,b,m,o,i),f.filter(function(x){return x.isShow}))}var jve=["viewBox"],Eve=["viewBox"],Sve=["ticks"];function ks(e){"@babel/helpers - typeof";return ks=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ks(e)}function Ps(){return Ps=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ps.apply(this,arguments)}function YB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function yn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?YB(Object(n),!0).forEach(function(r){Dj(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):YB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Rj(e,t){if(e==null)return{};var n=Cve(e,t),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Cve(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Ove(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function KB(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,GB(r.key),r)}}function Mve(e,t,n){return t&&KB(e.prototype,t),n&&KB(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Nve(e,t,n){return t=wh(t),kve(e,XB()?Reflect.construct(t,n||[],wh(e).constructor):t.apply(e,n))}function kve(e,t){if(t&&(ks(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Pve(e)}function Pve(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function XB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(XB=function(){return!!e})()}function wh(e){return wh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},wh(e)}function Ave(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ij(e,t)}function Ij(e,t){return Ij=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Ij(e,t)}function Dj(e,t,n){return t=GB(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function GB(e){var t=Tve(e,"string");return ks(t)=="symbol"?t:t+""}function Tve(e,t){if(ks(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(ks(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var As=function(e){function t(n){var r;return Ove(this,t),r=Nve(this,t,[n]),r.state={fontSize:"",letterSpacing:""},r}return Ave(t,e),Mve(t,[{key:"shouldComponentUpdate",value:function(n,r){var o=n.viewBox,a=Rj(n,jve),i=this.props,s=i.viewBox,c=Rj(i,Eve);return!as(o,s)||!as(a,c)||!as(r,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var r=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];r&&this.setState({fontSize:window.getComputedStyle(r).fontSize,letterSpacing:window.getComputedStyle(r).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var r=this.props,o=r.x,a=r.y,i=r.width,s=r.height,c=r.orientation,l=r.tickSize,u=r.mirror,d=r.tickMargin,f,p,y,m,v,b,x=u?-1:1,_=n.tickSize||l,w=me(n.tickCoord)?n.tickCoord:n.coordinate;switch(c){case"top":f=p=n.coordinate,m=a+ +!u*s,y=m-x*_,b=y-x*d,v=w;break;case"left":y=m=n.coordinate,p=o+ +!u*i,f=p-x*_,v=f-x*d,b=w;break;case"right":y=m=n.coordinate,p=o+ +u*i,f=p+x*_,v=f+x*d,b=w;break;default:f=p=n.coordinate,m=a+ +u*s,y=m+x*_,b=y+x*d,v=w;break}return{line:{x1:f,y1:y,x2:p,y2:m},tick:{x:v,y:b}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,r=n.orientation,o=n.mirror,a;switch(r){case"left":a=o?"start":"end";break;case"right":a=o?"end":"start";break;default:a="middle";break}return a}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,r=n.orientation,o=n.mirror,a="end";switch(r){case"left":case"right":a="middle";break;case"top":a=o?"start":"end";break;default:a=o?"end":"start";break}return a}},{key:"renderAxisLine",value:function(){var n=this.props,r=n.x,o=n.y,a=n.width,i=n.height,s=n.orientation,c=n.mirror,l=n.axisLine,u=yn(yn(yn({},nt(this.props,!1)),nt(l,!1)),{},{fill:"none"});if(s==="top"||s==="bottom"){var d=+(s==="top"&&!c||s==="bottom"&&c);u=yn(yn({},u),{},{x1:r,y1:o+d*i,x2:r+a,y2:o+d*i})}else{var f=+(s==="left"&&!c||s==="right"&&c);u=yn(yn({},u),{},{x1:r+f*a,y1:o,x2:r+f*a,y2:o+i})}return V.createElement("line",Ps({},u,{className:st("recharts-cartesian-axis-line",Hn(l,"className"))}))}},{key:"renderTicks",value:function(n,r,o){var a=this,i=this.props,s=i.tickLine,c=i.stroke,l=i.tick,u=i.tickFormatter,d=i.unit,f=Tj(yn(yn({},this.props),{},{ticks:n}),r,o),p=this.getTickTextAnchor(),y=this.getTickVerticalAnchor(),m=nt(this.props,!1),v=nt(l,!1),b=yn(yn({},m),{},{fill:"none"},nt(s,!1)),x=f.map(function(_,w){var j=a.getTickLineCoord(_),E=j.line,S=j.tick,O=yn(yn(yn(yn({textAnchor:p,verticalAnchor:y},m),{},{stroke:"none",fill:c},v),S),{},{index:w,payload:_,visibleTicksCount:f.length,tickFormatter:u});return V.createElement(Ut,Ps({className:"recharts-cartesian-axis-tick",key:"tick-".concat(_.value,"-").concat(_.coordinate,"-").concat(_.tickCoord)},np(a.props,_,w)),s&&V.createElement("line",Ps({},b,E,{className:st("recharts-cartesian-axis-tick-line",Hn(s,"className"))})),l&&t.renderTickItem(l,O,"".concat(We(u)?u(_.value,w):_.value).concat(d||"")))});return V.createElement("g",{className:"recharts-cartesian-axis-ticks"},x)}},{key:"render",value:function(){var n=this,r=this.props,o=r.axisLine,a=r.width,i=r.height,s=r.ticksGenerator,c=r.className,l=r.hide;if(l)return null;var u=this.props,d=u.ticks,f=Rj(u,Sve),p=d;return We(s)&&(p=d&&d.length>0?s(this.props):s(f)),a<=0||i<=0||!p||!p.length?null:V.createElement(Ut,{className:st("recharts-cartesian-axis",c),ref:function(y){n.layerReference=y}},o&&this.renderAxisLine(),this.renderTicks(p,this.state.fontSize,this.state.letterSpacing),rn.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(n,r,o){var a;return V.isValidElement(n)?a=V.cloneElement(n,r):We(n)?a=n(r):a=V.createElement(_p,Ps({},r,{className:"recharts-cartesian-axis-tick-value"}),o),a}}])}(g.Component);Dj(As,"displayName","CartesianAxis"),Dj(As,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var Rve=["x1","y1","x2","y2","key"],Ive=["offset"];function Ka(e){"@babel/helpers - typeof";return Ka=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ka(e)}function QB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function an(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?QB(Object(n),!0).forEach(function(r){Dve(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):QB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Dve(e,t,n){return t=Lve(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Lve(e){var t=Fve(e,"string");return Ka(t)=="symbol"?t:t+""}function Fve(e,t){if(Ka(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Ka(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Xa(){return Xa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Xa.apply(this,arguments)}function JB(e,t){if(e==null)return{};var n=Bve(e,t),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Bve(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var $ve=function(e){var t=e.fill;if(!t||t==="none")return null;var n=e.fillOpacity,r=e.x,o=e.y,a=e.width,i=e.height,s=e.ry;return V.createElement("rect",{x:r,y:o,ry:s,width:a,height:i,stroke:"none",fill:t,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function ZB(e,t){var n;if(V.isValidElement(e))n=V.cloneElement(e,t);else if(We(e))n=e(t);else{var r=t.x1,o=t.y1,a=t.x2,i=t.y2,s=t.key,c=JB(t,Rve),l=nt(c,!1);l.offset;var u=JB(l,Ive);n=V.createElement("line",Xa({},u,{x1:r,y1:o,x2:a,y2:i,fill:"none",key:s}))}return n}function zve(e){var t=e.x,n=e.width,r=e.horizontal,o=r===void 0?!0:r,a=e.horizontalPoints;if(!o||!a||!a.length)return null;var i=a.map(function(s,c){var l=an(an({},e),{},{x1:t,y1:s,x2:t+n,y2:s,key:"line-".concat(c),index:c});return ZB(o,l)});return V.createElement("g",{className:"recharts-cartesian-grid-horizontal"},i)}function Vve(e){var t=e.y,n=e.height,r=e.vertical,o=r===void 0?!0:r,a=e.verticalPoints;if(!o||!a||!a.length)return null;var i=a.map(function(s,c){var l=an(an({},e),{},{x1:s,y1:t,x2:s,y2:t+n,key:"line-".concat(c),index:c});return ZB(o,l)});return V.createElement("g",{className:"recharts-cartesian-grid-vertical"},i)}function Uve(e){var t=e.horizontalFill,n=e.fillOpacity,r=e.x,o=e.y,a=e.width,i=e.height,s=e.horizontalPoints,c=e.horizontal,l=c===void 0?!0:c;if(!l||!t||!t.length)return null;var u=s.map(function(f){return Math.round(f+o-o)}).sort(function(f,p){return f-p});o!==u[0]&&u.unshift(0);var d=u.map(function(f,p){var y=!u[p+1],m=y?o+i-f:u[p+1]-f;if(m<=0)return null;var v=p%t.length;return V.createElement("rect",{key:"react-".concat(p),y:f,x:r,height:m,width:a,stroke:"none",fill:t[v],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return V.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function Hve(e){var t=e.vertical,n=t===void 0?!0:t,r=e.verticalFill,o=e.fillOpacity,a=e.x,i=e.y,s=e.width,c=e.height,l=e.verticalPoints;if(!n||!r||!r.length)return null;var u=l.map(function(f){return Math.round(f+a-a)}).sort(function(f,p){return f-p});a!==u[0]&&u.unshift(0);var d=u.map(function(f,p){var y=!u[p+1],m=y?a+s-f:u[p+1]-f;if(m<=0)return null;var v=p%r.length;return V.createElement("rect",{key:"react-".concat(p),x:f,y:i,width:m,height:c,stroke:"none",fill:r[v],fillOpacity:o,className:"recharts-cartesian-grid-bg"})});return V.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var Wve=function(e,t){var n=e.xAxis,r=e.width,o=e.height,a=e.offset;return C8(Tj(an(an(an({},As.defaultProps),n),{},{ticks:Ao(n,!0),viewBox:{x:0,y:0,width:r,height:o}})),a.left,a.left+a.width,t)},qve=function(e,t){var n=e.yAxis,r=e.width,o=e.height,a=e.offset;return C8(Tj(an(an(an({},As.defaultProps),n),{},{ticks:Ao(n,!0),viewBox:{x:0,y:0,width:r,height:o}})),a.top,a.top+a.height,t)},Ts={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function e9(e){var t,n,r,o,a,i,s=jj(),c=Ej(),l=Tge(),u=an(an({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:Ts.stroke,fill:(n=e.fill)!==null&&n!==void 0?n:Ts.fill,horizontal:(r=e.horizontal)!==null&&r!==void 0?r:Ts.horizontal,horizontalFill:(o=e.horizontalFill)!==null&&o!==void 0?o:Ts.horizontalFill,vertical:(a=e.vertical)!==null&&a!==void 0?a:Ts.vertical,verticalFill:(i=e.verticalFill)!==null&&i!==void 0?i:Ts.verticalFill,x:me(e.x)?e.x:l.left,y:me(e.y)?e.y:l.top,width:me(e.width)?e.width:l.width,height:me(e.height)?e.height:l.height}),d=u.x,f=u.y,p=u.width,y=u.height,m=u.syncWithTicks,v=u.horizontalValues,b=u.verticalValues,x=kge(),_=Pge();if(!me(p)||p<=0||!me(y)||y<=0||!me(d)||d!==+d||!me(f)||f!==+f)return null;var w=u.verticalCoordinatesGenerator||Wve,j=u.horizontalCoordinatesGenerator||qve,E=u.horizontalPoints,S=u.verticalPoints;if((!E||!E.length)&&We(j)){var O=v&&v.length,N=j({yAxis:_?an(an({},_),{},{ticks:O?v:_.ticks}):void 0,width:s,height:c,offset:l},O?!0:m);jo(Array.isArray(N),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Ka(N),"]")),Array.isArray(N)&&(E=N)}if((!S||!S.length)&&We(w)){var P=b&&b.length,k=w({xAxis:x?an(an({},x),{},{ticks:P?b:x.ticks}):void 0,width:s,height:c,offset:l},P?!0:m);jo(Array.isArray(k),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Ka(k),"]")),Array.isArray(k)&&(S=k)}return V.createElement("g",{className:"recharts-cartesian-grid"},V.createElement($ve,{fill:u.fill,fillOpacity:u.fillOpacity,x:u.x,y:u.y,width:u.width,height:u.height,ry:u.ry}),V.createElement(zve,Xa({},u,{offset:l,horizontalPoints:E,xAxis:x,yAxis:_})),V.createElement(Vve,Xa({},u,{offset:l,verticalPoints:S,xAxis:x,yAxis:_})),V.createElement(Uve,Xa({},u,{horizontalPoints:E})),V.createElement(Hve,Xa({},u,{verticalPoints:S})))}e9.displayName="CartesianGrid";function Rs(e){"@babel/helpers - typeof";return Rs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rs(e)}function Yve(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Kve(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r9(r.key),r)}}function Xve(e,t,n){return t&&Kve(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Gve(e,t,n){return t=_h(t),Qve(e,t9()?Reflect.construct(t,n||[],_h(e).constructor):t.apply(e,n))}function Qve(e,t){if(t&&(Rs(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Jve(e)}function Jve(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function t9(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(t9=function(){return!!e})()}function _h(e){return _h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},_h(e)}function Zve(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Lj(e,t)}function Lj(e,t){return Lj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Lj(e,t)}function n9(e,t,n){return t=r9(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r9(e){var t=e0e(e,"string");return Rs(t)=="symbol"?t:t+""}function e0e(e,t){if(Rs(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Rs(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Fj(){return Fj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Fj.apply(this,arguments)}function t0e(e){var t=e.xAxisId,n=jj(),r=Ej(),o=kB(t);return o==null?null:V.createElement(As,Fj({},o,{className:st("recharts-".concat(o.axisType," ").concat(o.axisType),o.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(a){return Ao(a,!0)}}))}var jh=function(e){function t(){return Yve(this,t),Gve(this,t,arguments)}return Zve(t,e),Xve(t,[{key:"render",value:function(){return V.createElement(t0e,this.props)}}])}(V.Component);n9(jh,"displayName","XAxis"),n9(jh,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Is(e){"@babel/helpers - typeof";return Is=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Is(e)}function n0e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r0e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,i9(r.key),r)}}function o0e(e,t,n){return t&&r0e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function a0e(e,t,n){return t=Eh(t),i0e(e,o9()?Reflect.construct(t,n||[],Eh(e).constructor):t.apply(e,n))}function i0e(e,t){if(t&&(Is(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return s0e(e)}function s0e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function o9(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(o9=function(){return!!e})()}function Eh(e){return Eh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Eh(e)}function c0e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Bj(e,t)}function Bj(e,t){return Bj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Bj(e,t)}function a9(e,t,n){return t=i9(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i9(e){var t=l0e(e,"string");return Is(t)=="symbol"?t:t+""}function l0e(e,t){if(Is(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Is(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $j(){return $j=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$j.apply(this,arguments)}var u0e=function(e){var t=e.yAxisId,n=jj(),r=Ej(),o=PB(t);return o==null?null:V.createElement(As,$j({},o,{className:st("recharts-".concat(o.axisType," ").concat(o.axisType),o.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(a){return Ao(a,!0)}}))},zj=function(e){function t(){return n0e(this,t),a0e(this,t,arguments)}return c0e(t,e),o0e(t,[{key:"render",value:function(){return V.createElement(u0e,this.props)}}])}(V.Component);a9(zj,"displayName","YAxis"),a9(zj,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function s9(e){return h0e(e)||p0e(e)||f0e(e)||d0e()}function d0e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function f0e(e,t){if(e){if(typeof e=="string")return Vj(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Vj(e,t)}}function p0e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function h0e(e){if(Array.isArray(e))return Vj(e)}function Vj(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Uj=function(e,t,n,r,o){var a=gr(e,Mj),i=gr(e,yh),s=[].concat(s9(a),s9(i)),c=gr(e,bh),l="".concat(r,"Id"),u=r[0],d=t;if(s.length&&(d=s.reduce(function(y,m){if(m.props[l]===n&&$r(m.props,"extendDomain")&&me(m.props[u])){var v=m.props[u];return[Math.min(y[0],v),Math.max(y[1],v)]}return y},d)),c.length){var f="".concat(u,"1"),p="".concat(u,"2");d=c.reduce(function(y,m){if(m.props[l]===n&&$r(m.props,"extendDomain")&&me(m.props[f])&&me(m.props[p])){var v=m.props[f],b=m.props[p];return[Math.min(y[0],v,b),Math.max(y[1],v,b)]}return y},d)}return o&&o.length&&(d=o.reduce(function(y,m){return me(m)?[Math.min(y[0],m),Math.max(y[1],m)]:y},d)),d},c9={exports:{}},l9;function m0e(){return l9||(l9=1,function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function o(c,l,u){this.fn=c,this.context=l,this.once=u||!1}function a(c,l,u,d,f){if(typeof u!="function")throw new TypeError("The listener must be a function");var p=new o(u,d||c,f),y=n?n+l:l;return c._events[y]?c._events[y].fn?c._events[y]=[c._events[y],p]:c._events[y].push(p):(c._events[y]=p,c._eventsCount++),c}function i(c,l){--c._eventsCount===0?c._events=new r:delete c._events[l]}function s(){this._events=new r,this._eventsCount=0}s.prototype.eventNames=function(){var c=[],l,u;if(this._eventsCount===0)return c;for(u in l=this._events)t.call(l,u)&&c.push(n?u.slice(1):u);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(l)):c},s.prototype.listeners=function(c){var l=n?n+c:c,u=this._events[l];if(!u)return[];if(u.fn)return[u.fn];for(var d=0,f=u.length,p=new Array(f);d<f;d++)p[d]=u[d].fn;return p},s.prototype.listenerCount=function(c){var l=n?n+c:c,u=this._events[l];return u?u.fn?1:u.length:0},s.prototype.emit=function(c,l,u,d,f,p){var y=n?n+c:c;if(!this._events[y])return!1;var m=this._events[y],v=arguments.length,b,x;if(m.fn){switch(m.once&&this.removeListener(c,m.fn,void 0,!0),v){case 1:return m.fn.call(m.context),!0;case 2:return m.fn.call(m.context,l),!0;case 3:return m.fn.call(m.context,l,u),!0;case 4:return m.fn.call(m.context,l,u,d),!0;case 5:return m.fn.call(m.context,l,u,d,f),!0;case 6:return m.fn.call(m.context,l,u,d,f,p),!0}for(x=1,b=new Array(v-1);x<v;x++)b[x-1]=arguments[x];m.fn.apply(m.context,b)}else{var _=m.length,w;for(x=0;x<_;x++)switch(m[x].once&&this.removeListener(c,m[x].fn,void 0,!0),v){case 1:m[x].fn.call(m[x].context);break;case 2:m[x].fn.call(m[x].context,l);break;case 3:m[x].fn.call(m[x].context,l,u);break;case 4:m[x].fn.call(m[x].context,l,u,d);break;default:if(!b)for(w=1,b=new Array(v-1);w<v;w++)b[w-1]=arguments[w];m[x].fn.apply(m[x].context,b)}}return!0},s.prototype.on=function(c,l,u){return a(this,c,l,u,!1)},s.prototype.once=function(c,l,u){return a(this,c,l,u,!0)},s.prototype.removeListener=function(c,l,u,d){var f=n?n+c:c;if(!this._events[f])return this;if(!l)return i(this,f),this;var p=this._events[f];if(p.fn)p.fn===l&&(!d||p.once)&&(!u||p.context===u)&&i(this,f);else{for(var y=0,m=[],v=p.length;y<v;y++)(p[y].fn!==l||d&&!p[y].once||u&&p[y].context!==u)&&m.push(p[y]);m.length?this._events[f]=m.length===1?m[0]:m:i(this,f)}return this},s.prototype.removeAllListeners=function(c){var l;return c?(l=n?n+c:c,this._events[l]&&i(this,l)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,e.exports=s}(c9)),c9.exports}var y0e=m0e();const g0e=Xe(y0e);var Hj=new g0e,Wj="recharts.syncMouseEvents";function wu(e){"@babel/helpers - typeof";return wu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wu(e)}function v0e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b0e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,u9(r.key),r)}}function x0e(e,t,n){return t&&b0e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function qj(e,t,n){return t=u9(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u9(e){var t=w0e(e,"string");return wu(t)=="symbol"?t:t+""}function w0e(e,t){if(wu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(wu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var _0e=function(){function e(){v0e(this,e),qj(this,"activeIndex",0),qj(this,"coordinateList",[]),qj(this,"layout","horizontal")}return x0e(e,[{key:"setDetails",value:function(t){var n,r=t.coordinateList,o=r===void 0?null:r,a=t.container,i=a===void 0?null:a,s=t.layout,c=s===void 0?null:s,l=t.offset,u=l===void 0?null:l,d=t.mouseHandlerCallback,f=d===void 0?null:d;this.coordinateList=(n=o??this.coordinateList)!==null&&n!==void 0?n:[],this.container=i??this.container,this.layout=c??this.layout,this.offset=u??this.offset,this.mouseHandlerCallback=f??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(t){if(this.coordinateList.length!==0)switch(t.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(t){this.activeIndex=t}},{key:"spoofMouse",value:function(){var t,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var r=this.container.getBoundingClientRect(),o=r.x,a=r.y,i=r.height,s=this.coordinateList[this.activeIndex].coordinate,c=((t=window)===null||t===void 0?void 0:t.scrollX)||0,l=((n=window)===null||n===void 0?void 0:n.scrollY)||0,u=o+s+c,d=a+this.offset.top+i/2+l;this.mouseHandlerCallback({pageX:u,pageY:d})}}}])}();function j0e(e,t,n){if(n==="number"&&t===!0&&Array.isArray(e)){var r=e==null?void 0:e[0],o=e==null?void 0:e[1];if(r&&o&&me(r)&&me(o))return!0}return!1}function E0e(e,t,n,r){var o=r/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-o:n.left+.5,y:e==="horizontal"?n.top+.5:t.y-o,width:e==="horizontal"?r:n.width-1,height:e==="horizontal"?n.height-1:r}}function d9(e){var t=e.cx,n=e.cy,r=e.radius,o=e.startAngle,a=e.endAngle,i=Qt(t,n,r,o),s=Qt(t,n,r,a);return{points:[i,s],cx:t,cy:n,radius:r,startAngle:o,endAngle:a}}function S0e(e,t,n){var r,o,a,i;if(e==="horizontal")r=t.x,a=r,o=n.top,i=n.top+n.height;else if(e==="vertical")o=t.y,i=o,r=n.left,a=n.left+n.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var s=t.cx,c=t.cy,l=t.innerRadius,u=t.outerRadius,d=t.angle,f=Qt(s,c,l,d),p=Qt(s,c,u,d);r=f.x,o=f.y,a=p.x,i=p.y}else return d9(t);return[{x:r,y:o},{x:a,y:i}]}function _u(e){"@babel/helpers - typeof";return _u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_u(e)}function f9(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Sh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?f9(Object(n),!0).forEach(function(r){C0e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f9(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function C0e(e,t,n){return t=O0e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O0e(e){var t=M0e(e,"string");return _u(t)=="symbol"?t:t+""}function M0e(e,t){if(_u(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(_u(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function N0e(e){var t,n,r=e.element,o=e.tooltipEventType,a=e.isActive,i=e.activeCoordinate,s=e.activePayload,c=e.offset,l=e.activeTooltipIndex,u=e.tooltipAxisBandSize,d=e.layout,f=e.chartName,p=(t=r.props.cursor)!==null&&t!==void 0?t:(n=r.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!r||!p||!a||!i||f!=="ScatterChart"&&o!=="axis")return null;var y,m=G8;if(f==="ScatterChart")y=i,m=Wme;else if(f==="BarChart")y=E0e(d,i,c,u),m=Q_;else if(d==="radial"){var v=d9(i),b=v.cx,x=v.cy,_=v.radius,w=v.startAngle,j=v.endAngle;y={cx:b,cy:x,startAngle:w,endAngle:j,innerRadius:_,outerRadius:_},m=q8}else y={points:S0e(d,i,c)},m=G8;var E=Sh(Sh(Sh(Sh({stroke:"#ccc",pointerEvents:"none"},c),y),nt(p,!1)),{},{payload:s,payloadIndex:l,className:st("recharts-tooltip-cursor",p.className)});return g.isValidElement(p)?g.cloneElement(p,E):g.createElement(m,E)}var k0e=["item"],P0e=["children","className","width","height","style","compact","title","desc"];function Ds(e){"@babel/helpers - typeof";return Ds=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ds(e)}function Ls(){return Ls=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ls.apply(this,arguments)}function p9(e,t){return R0e(e)||T0e(e,t)||y9(e,t)||A0e()}function A0e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function T0e(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,o,a,i,s=[],c=!0,l=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(c=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(u){l=!0,o=u}finally{try{if(!c&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return s}}function R0e(e){if(Array.isArray(e))return e}function h9(e,t){if(e==null)return{};var n=I0e(e,t),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function I0e(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function D0e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function L0e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,v9(r.key),r)}}function F0e(e,t,n){return t&&L0e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function B0e(e,t,n){return t=Ch(t),$0e(e,m9()?Reflect.construct(t,n||[],Ch(e).constructor):t.apply(e,n))}function $0e(e,t){if(t&&(Ds(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return z0e(e)}function z0e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m9(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(m9=function(){return!!e})()}function Ch(e){return Ch=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ch(e)}function V0e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Yj(e,t)}function Yj(e,t){return Yj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Yj(e,t)}function Fs(e){return W0e(e)||H0e(e)||y9(e)||U0e()}function U0e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function y9(e,t){if(e){if(typeof e=="string")return Kj(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Kj(e,t)}}function H0e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function W0e(e){if(Array.isArray(e))return Kj(e)}function Kj(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function g9(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function oe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?g9(Object(n),!0).forEach(function(r){Re(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g9(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Re(e,t,n){return t=v9(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v9(e){var t=q0e(e,"string");return Ds(t)=="symbol"?t:t+""}function q0e(e,t){if(Ds(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Ds(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Y0e={xAxis:["bottom","top"],yAxis:["left","right"]},K0e={width:"100%",height:"100%"},b9={x:0,y:0};function Oh(e){return e}var X0e=function(e,t){return t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius},G0e=function(e,t,n,r){var o=t.find(function(l){return l&&l.index===n});if(o){if(e==="horizontal")return{x:o.coordinate,y:r.y};if(e==="vertical")return{x:r.x,y:o.coordinate};if(e==="centric"){var a=o.coordinate,i=r.radius;return oe(oe(oe({},r),Qt(r.cx,r.cy,i,a)),{},{angle:a,radius:i})}var s=o.coordinate,c=r.angle;return oe(oe(oe({},r),Qt(r.cx,r.cy,s,c)),{},{angle:c,radius:s})}return b9},Mh=function(e,t){var n=t.graphicalItems,r=t.dataStartIndex,o=t.dataEndIndex,a=(n??[]).reduce(function(i,s){var c=s.props.data;return c&&c.length?[].concat(Fs(i),Fs(c)):i},[]);return a.length>0?a:e&&e.length&&me(r)&&me(o)?e.slice(r,o+1):[]};function x9(e){return e==="number"?[0,"auto"]:void 0}var Xj=function(e,t,n,r){var o=e.graphicalItems,a=e.tooltipAxis,i=Mh(t,e);return n<0||!o||!o.length||n>=i.length?null:o.reduce(function(s,c){var l,u=(l=c.props.data)!==null&&l!==void 0?l:t;u&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=n&&(u=u.slice(e.dataStartIndex,e.dataEndIndex+1));var d;if(a.dataKey&&!a.allowDuplicatedCategory){var f=u===void 0?i:u;d=uw(f,a.dataKey,r)}else d=u&&u[n]||i[n];return d?[].concat(Fs(s),[T8(c,d)]):s},[])},w9=function(e,t,n,r){var o=r||{x:e.chartX,y:e.chartY},a=X0e(o,n),i=e.orderedTooltipTicks,s=e.tooltipAxis,c=e.tooltipTicks,l=$fe(a,i,c,s);if(l>=0&&c){var u=c[l]&&c[l].value,d=Xj(e,t,l,u),f=G0e(n,i,l,o);return{activeTooltipIndex:l,activeLabel:u,activePayload:d,activeCoordinate:f}}return null},Q0e=function(e,t){var n=t.axes,r=t.graphicalItems,o=t.axisType,a=t.axisIdKey,i=t.stackGroups,s=t.dataStartIndex,c=t.dataEndIndex,l=e.layout,u=e.children,d=e.stackOffset,f=S8(l,o);return n.reduce(function(p,y){var m,v=y.type.defaultProps!==void 0?oe(oe({},y.type.defaultProps),y.props):y.props,b=v.type,x=v.dataKey,_=v.allowDataOverflow,w=v.allowDuplicatedCategory,j=v.scale,E=v.ticks,S=v.includeHidden,O=v[a];if(p[O])return p;var N=Mh(e.data,{graphicalItems:r.filter(function(U){var F,H=a in U.props?U.props[a]:(F=U.type.defaultProps)===null||F===void 0?void 0:F[a];return H===O}),dataStartIndex:s,dataEndIndex:c}),P=N.length,k,R,A;j0e(v.domain,_,b)&&(k=T_(v.domain,null,_),f&&(b==="number"||j!=="auto")&&(A=Wp(N,x,"category")));var C=x9(b);if(!k||k.length===0){var M,T=(M=v.domain)!==null&&M!==void 0?M:C;if(x){if(k=Wp(N,x,b),b==="category"&&f){var I=Gae(k);w&&I?(R=k,k=sh(0,P)):w||(k=A8(T,k,y).reduce(function(U,F){return U.indexOf(F)>=0?U:[].concat(Fs(U),[F])},[]))}else if(b==="category")w?k=k.filter(function(U){return U!==""&&!rt(U)}):k=A8(T,k,y).reduce(function(U,F){return U.indexOf(F)>=0||F===""||rt(F)?U:[].concat(Fs(U),[F])},[]);else if(b==="number"){var L=Wfe(N,r.filter(function(U){var F,H,Y=a in U.props?U.props[a]:(F=U.type.defaultProps)===null||F===void 0?void 0:F[a],G="hide"in U.props?U.props.hide:(H=U.type.defaultProps)===null||H===void 0?void 0:H.hide;return Y===O&&(S||!G)}),x,o,l);L&&(k=L)}f&&(b==="number"||j!=="auto")&&(A=Wp(N,x,"category"))}else f?k=sh(0,P):i&&i[O]&&i[O].hasStack&&b==="number"?k=d==="expand"?[0,1]:N8(i[O].stackGroups,s,c):k=E8(N,r.filter(function(U){var F=a in U.props?U.props[a]:U.type.defaultProps[a],H="hide"in U.props?U.props.hide:U.type.defaultProps.hide;return F===O&&(S||!H)}),b,l,!0);if(b==="number")k=Uj(u,k,O,o,E),T&&(k=T_(T,k,_));else if(b==="category"&&T){var D=T,$=k.every(function(U){return D.indexOf(U)>=0});$&&(k=D)}}return oe(oe({},p),{},Re({},O,oe(oe({},v),{},{axisType:o,domain:k,categoricalDomain:A,duplicateDomain:R,originalDomain:(m=v.domain)!==null&&m!==void 0?m:C,isCategorical:f,layout:l})))},{})},J0e=function(e,t){var n=t.graphicalItems,r=t.Axis,o=t.axisType,a=t.axisIdKey,i=t.stackGroups,s=t.dataStartIndex,c=t.dataEndIndex,l=e.layout,u=e.children,d=Mh(e.data,{graphicalItems:n,dataStartIndex:s,dataEndIndex:c}),f=d.length,p=S8(l,o),y=-1;return n.reduce(function(m,v){var b=v.type.defaultProps!==void 0?oe(oe({},v.type.defaultProps),v.props):v.props,x=b[a],_=x9("number");if(!m[x]){y++;var w;return p?w=sh(0,f):i&&i[x]&&i[x].hasStack?(w=N8(i[x].stackGroups,s,c),w=Uj(u,w,x,o)):(w=T_(_,E8(d,n.filter(function(j){var E,S,O=a in j.props?j.props[a]:(E=j.type.defaultProps)===null||E===void 0?void 0:E[a],N="hide"in j.props?j.props.hide:(S=j.type.defaultProps)===null||S===void 0?void 0:S.hide;return O===x&&!N}),"number",l),r.defaultProps.allowDataOverflow),w=Uj(u,w,x,o)),oe(oe({},m),{},Re({},x,oe(oe({axisType:o},r.defaultProps),{},{hide:!0,orientation:Hn(Y0e,"".concat(o,".").concat(y%2),null),domain:w,originalDomain:_,isCategorical:p,layout:l})))}return m},{})},Z0e=function(e,t){var n=t.axisType,r=n===void 0?"xAxis":n,o=t.AxisComp,a=t.graphicalItems,i=t.stackGroups,s=t.dataStartIndex,c=t.dataEndIndex,l=e.children,u="".concat(r,"Id"),d=gr(l,o),f={};return d&&d.length?f=Q0e(e,{axes:d,graphicalItems:a,axisType:r,axisIdKey:u,stackGroups:i,dataStartIndex:s,dataEndIndex:c}):a&&a.length&&(f=J0e(e,{Axis:o,graphicalItems:a,axisType:r,axisIdKey:u,stackGroups:i,dataStartIndex:s,dataEndIndex:c})),f},ebe=function(e){var t=ea(e),n=Ao(t,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:w1(n,function(r){return r.coordinate}),tooltipAxis:t,tooltipAxisBandSize:Yp(t,n)}},_9=function(e){var t=e.children,n=e.defaultShowTooltip,r=Dn(t,Ss),o=0,a=0;return e.data&&e.data.length!==0&&(a=e.data.length-1),r&&r.props&&(r.props.startIndex>=0&&(o=r.props.startIndex),r.props.endIndex>=0&&(a=r.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:o,dataEndIndex:a,activeTooltipIndex:-1,isTooltipActive:!!n}},tbe=function(e){return!e||!e.length?!1:e.some(function(t){var n=_o(t&&t.type);return n&&n.indexOf("Bar")>=0})},j9=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},nbe=function(e,t){var n=e.props,r=e.graphicalItems,o=e.xAxisMap,a=o===void 0?{}:o,i=e.yAxisMap,s=i===void 0?{}:i,c=n.width,l=n.height,u=n.children,d=n.margin||{},f=Dn(u,Ss),p=Dn(u,ls),y=Object.keys(s).reduce(function(w,j){var E=s[j],S=E.orientation;return!E.mirror&&!E.hide?oe(oe({},w),{},Re({},S,w[S]+E.width)):w},{left:d.left||0,right:d.right||0}),m=Object.keys(a).reduce(function(w,j){var E=a[j],S=E.orientation;return!E.mirror&&!E.hide?oe(oe({},w),{},Re({},S,Hn(w,"".concat(S))+E.height)):w},{top:d.top||0,bottom:d.bottom||0}),v=oe(oe({},m),y),b=v.bottom;f&&(v.bottom+=f.props.height||Ss.defaultProps.height),p&&t&&(v=Ufe(v,r,n,t));var x=c-v.left-v.right,_=l-v.top-v.bottom;return oe(oe({brushBottom:b},v),{},{width:Math.max(x,0),height:Math.max(_,0)})},rbe=function(e,t){if(t==="xAxis")return e[t].width;if(t==="yAxis")return e[t].height},obe=function(e){var t=e.chartName,n=e.GraphicalChild,r=e.defaultTooltipEventType,o=r===void 0?"axis":r,a=e.validateTooltipEventTypes,i=a===void 0?["axis"]:a,s=e.axisComponents,c=e.legendContent,l=e.formatAxisMap,u=e.defaultProps,d=function(m,v){var b=v.graphicalItems,x=v.stackGroups,_=v.offset,w=v.updateId,j=v.dataStartIndex,E=v.dataEndIndex,S=m.barSize,O=m.layout,N=m.barGap,P=m.barCategoryGap,k=m.maxBarSize,R=j9(O),A=R.numericAxisName,C=R.cateAxisName,M=tbe(b),T=[];return b.forEach(function(I,L){var D=Mh(m.data,{graphicalItems:[I],dataStartIndex:j,dataEndIndex:E}),$=I.type.defaultProps!==void 0?oe(oe({},I.type.defaultProps),I.props):I.props,U=$.dataKey,F=$.maxBarSize,H=$["".concat(A,"Id")],Y=$["".concat(C,"Id")],G={},re=s.reduce(function(ze,at){var He=v["".concat(at.axisType,"Map")],it=$["".concat(at.axisType,"Id")];He&&He[it]||at.axisType==="zAxis"||Ha();var Vt=He[it];return oe(oe({},ze),{},Re(Re({},at.axisType,Vt),"".concat(at.axisType,"Ticks"),Ao(Vt)))},G),Z=re[C],q=re["".concat(C,"Ticks")],W=x&&x[H]&&x[H].hasStack&&rpe(I,x[H].stackGroups),J=_o(I.type).indexOf("Bar")>=0,te=Yp(Z,q),B=[],se=M&&zfe({barSize:S,stackGroups:x,totalSize:rbe(re,C)});if(J){var ce,ve,Te=rt(F)?k:F,qe=(ce=(ve=Yp(Z,q,!0))!==null&&ve!==void 0?ve:Te)!==null&&ce!==void 0?ce:0;B=Vfe({barGap:N,barCategoryGap:P,bandSize:qe!==te?qe:te,sizeList:se[Y],maxBarSize:Te}),qe!==te&&(B=B.map(function(ze){return oe(oe({},ze),{},{position:oe(oe({},ze.position),{},{offset:ze.position.offset-qe/2})})}))}var Ye=I&&I.type&&I.type.getComposedData;Ye&&T.push({props:oe(oe({},Ye(oe(oe({},re),{},{displayedData:D,props:m,dataKey:U,item:I,bandSize:te,barPosition:B,offset:_,stackedData:W,layout:O,dataStartIndex:j,dataEndIndex:E}))),{},Re(Re(Re({key:I.key||"item-".concat(L)},A,re[A]),C,re[C]),"animationId",w)),childIndex:sie(I,m.children),item:I})}),T},f=function(m,v){var b=m.props,x=m.dataStartIndex,_=m.dataEndIndex,w=m.updateId;if(!P5({props:b}))return null;var j=b.children,E=b.layout,S=b.stackOffset,O=b.data,N=b.reverseStackOrder,P=j9(E),k=P.numericAxisName,R=P.cateAxisName,A=gr(j,n),C=epe(O,A,"".concat(k,"Id"),"".concat(R,"Id"),S,N),M=s.reduce(function($,U){var F="".concat(U.axisType,"Map");return oe(oe({},$),{},Re({},F,Z0e(b,oe(oe({},U),{},{graphicalItems:A,stackGroups:U.axisType===k&&C,dataStartIndex:x,dataEndIndex:_}))))},{}),T=nbe(oe(oe({},M),{},{props:b,graphicalItems:A}),v==null?void 0:v.legendBBox);Object.keys(M).forEach(function($){M[$]=l(b,M[$],T,$.replace("Map",""),t)});var I=M["".concat(R,"Map")],L=ebe(I),D=d(b,oe(oe({},M),{},{dataStartIndex:x,dataEndIndex:_,updateId:w,graphicalItems:A,stackGroups:C,offset:T}));return oe(oe({formattedGraphicalItems:D,graphicalItems:A,offset:T,stackGroups:C},L),M)},p=function(m){function v(b){var x,_,w;return D0e(this,v),w=B0e(this,v,[b]),Re(w,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Re(w,"accessibilityManager",new _0e),Re(w,"handleLegendBBoxUpdate",function(j){if(j){var E=w.state,S=E.dataStartIndex,O=E.dataEndIndex,N=E.updateId;w.setState(oe({legendBBox:j},f({props:w.props,dataStartIndex:S,dataEndIndex:O,updateId:N},oe(oe({},w.state),{},{legendBBox:j}))))}}),Re(w,"handleReceiveSyncEvent",function(j,E,S){if(w.props.syncId===j){if(S===w.eventEmitterSymbol&&typeof w.props.syncMethod!="function")return;w.applySyncEvent(E)}}),Re(w,"handleBrushChange",function(j){var E=j.startIndex,S=j.endIndex;if(E!==w.state.dataStartIndex||S!==w.state.dataEndIndex){var O=w.state.updateId;w.setState(function(){return oe({dataStartIndex:E,dataEndIndex:S},f({props:w.props,dataStartIndex:E,dataEndIndex:S,updateId:O},w.state))}),w.triggerSyncEvent({dataStartIndex:E,dataEndIndex:S})}}),Re(w,"handleMouseEnter",function(j){var E=w.getMouseInfo(j);if(E){var S=oe(oe({},E),{},{isTooltipActive:!0});w.setState(S),w.triggerSyncEvent(S);var O=w.props.onMouseEnter;We(O)&&O(S,j)}}),Re(w,"triggeredAfterMouseMove",function(j){var E=w.getMouseInfo(j),S=E?oe(oe({},E),{},{isTooltipActive:!0}):{isTooltipActive:!1};w.setState(S),w.triggerSyncEvent(S);var O=w.props.onMouseMove;We(O)&&O(S,j)}),Re(w,"handleItemMouseEnter",function(j){w.setState(function(){return{isTooltipActive:!0,activeItem:j,activePayload:j.tooltipPayload,activeCoordinate:j.tooltipPosition||{x:j.cx,y:j.cy}}})}),Re(w,"handleItemMouseLeave",function(){w.setState(function(){return{isTooltipActive:!1}})}),Re(w,"handleMouseMove",function(j){j.persist(),w.throttleTriggeredAfterMouseMove(j)}),Re(w,"handleMouseLeave",function(j){w.throttleTriggeredAfterMouseMove.cancel();var E={isTooltipActive:!1};w.setState(E),w.triggerSyncEvent(E);var S=w.props.onMouseLeave;We(S)&&S(E,j)}),Re(w,"handleOuterEvent",function(j){var E=iie(j),S=Hn(w.props,"".concat(E));if(E&&We(S)){var O,N;/.*touch.*/i.test(E)?N=w.getMouseInfo(j.changedTouches[0]):N=w.getMouseInfo(j),S((O=N)!==null&&O!==void 0?O:{},j)}}),Re(w,"handleClick",function(j){var E=w.getMouseInfo(j);if(E){var S=oe(oe({},E),{},{isTooltipActive:!0});w.setState(S),w.triggerSyncEvent(S);var O=w.props.onClick;We(O)&&O(S,j)}}),Re(w,"handleMouseDown",function(j){var E=w.props.onMouseDown;if(We(E)){var S=w.getMouseInfo(j);E(S,j)}}),Re(w,"handleMouseUp",function(j){var E=w.props.onMouseUp;if(We(E)){var S=w.getMouseInfo(j);E(S,j)}}),Re(w,"handleTouchMove",function(j){j.changedTouches!=null&&j.changedTouches.length>0&&w.throttleTriggeredAfterMouseMove(j.changedTouches[0])}),Re(w,"handleTouchStart",function(j){j.changedTouches!=null&&j.changedTouches.length>0&&w.handleMouseDown(j.changedTouches[0])}),Re(w,"handleTouchEnd",function(j){j.changedTouches!=null&&j.changedTouches.length>0&&w.handleMouseUp(j.changedTouches[0])}),Re(w,"triggerSyncEvent",function(j){w.props.syncId!==void 0&&Hj.emit(Wj,w.props.syncId,j,w.eventEmitterSymbol)}),Re(w,"applySyncEvent",function(j){var E=w.props,S=E.layout,O=E.syncMethod,N=w.state.updateId,P=j.dataStartIndex,k=j.dataEndIndex;if(j.dataStartIndex!==void 0||j.dataEndIndex!==void 0)w.setState(oe({dataStartIndex:P,dataEndIndex:k},f({props:w.props,dataStartIndex:P,dataEndIndex:k,updateId:N},w.state)));else if(j.activeTooltipIndex!==void 0){var R=j.chartX,A=j.chartY,C=j.activeTooltipIndex,M=w.state,T=M.offset,I=M.tooltipTicks;if(!T)return;if(typeof O=="function")C=O(I,j);else if(O==="value"){C=-1;for(var L=0;L<I.length;L++)if(I[L].value===j.activeLabel){C=L;break}}var D=oe(oe({},T),{},{x:T.left,y:T.top}),$=Math.min(R,D.x+D.width),U=Math.min(A,D.y+D.height),F=I[C]&&I[C].value,H=Xj(w.state,w.props.data,C),Y=I[C]?{x:S==="horizontal"?I[C].coordinate:$,y:S==="horizontal"?U:I[C].coordinate}:b9;w.setState(oe(oe({},j),{},{activeLabel:F,activeCoordinate:Y,activePayload:H,activeTooltipIndex:C}))}else w.setState(j)}),Re(w,"renderCursor",function(j){var E,S=w.state,O=S.isTooltipActive,N=S.activeCoordinate,P=S.activePayload,k=S.offset,R=S.activeTooltipIndex,A=S.tooltipAxisBandSize,C=w.getTooltipEventType(),M=(E=j.props.active)!==null&&E!==void 0?E:O,T=w.props.layout,I=j.key||"_recharts-cursor";return V.createElement(N0e,{key:I,activeCoordinate:N,activePayload:P,activeTooltipIndex:R,chartName:t,element:j,isActive:M,layout:T,offset:k,tooltipAxisBandSize:A,tooltipEventType:C})}),Re(w,"renderPolarAxis",function(j,E,S){var O=Hn(j,"type.axisType"),N=Hn(w.state,"".concat(O,"Map")),P=j.type.defaultProps,k=P!==void 0?oe(oe({},P),j.props):j.props,R=N&&N[k["".concat(O,"Id")]];return g.cloneElement(j,oe(oe({},R),{},{className:st(O,R.className),key:j.key||"".concat(E,"-").concat(S),ticks:Ao(R,!0)}))}),Re(w,"renderPolarGrid",function(j){var E=j.props,S=E.radialLines,O=E.polarAngles,N=E.polarRadius,P=w.state,k=P.radiusAxisMap,R=P.angleAxisMap,A=ea(k),C=ea(R),M=C.cx,T=C.cy,I=C.innerRadius,L=C.outerRadius;return g.cloneElement(j,{polarAngles:Array.isArray(O)?O:Ao(C,!0).map(function(D){return D.coordinate}),polarRadius:Array.isArray(N)?N:Ao(A,!0).map(function(D){return D.coordinate}),cx:M,cy:T,innerRadius:I,outerRadius:L,key:j.key||"polar-grid",radialLines:S})}),Re(w,"renderLegend",function(){var j=w.state.formattedGraphicalItems,E=w.props,S=E.children,O=E.width,N=E.height,P=w.props.margin||{},k=O-(P.left||0)-(P.right||0),R=x8({children:S,formattedGraphicalItems:j,legendWidth:k,legendContent:c});if(!R)return null;var A=R.item,C=h9(R,k0e);return g.cloneElement(A,oe(oe({},C),{},{chartWidth:O,chartHeight:N,margin:P,onBBoxUpdate:w.handleLegendBBoxUpdate}))}),Re(w,"renderTooltip",function(){var j,E=w.props,S=E.children,O=E.accessibilityLayer,N=Dn(S,Dr);if(!N)return null;var P=w.state,k=P.isTooltipActive,R=P.activeCoordinate,A=P.activePayload,C=P.activeLabel,M=P.offset,T=(j=N.props.active)!==null&&j!==void 0?j:k;return g.cloneElement(N,{viewBox:oe(oe({},M),{},{x:M.left,y:M.top}),active:T,label:C,payload:T?A:[],coordinate:R,accessibilityLayer:O})}),Re(w,"renderBrush",function(j){var E=w.props,S=E.margin,O=E.data,N=w.state,P=N.offset,k=N.dataStartIndex,R=N.dataEndIndex,A=N.updateId;return g.cloneElement(j,{key:j.key||"_recharts-brush",onChange:qp(w.handleBrushChange,j.props.onChange),data:O,x:me(j.props.x)?j.props.x:P.left,y:me(j.props.y)?j.props.y:P.top+P.height+P.brushBottom-(S.bottom||0),width:me(j.props.width)?j.props.width:P.width,startIndex:k,endIndex:R,updateId:"brush-".concat(A)})}),Re(w,"renderReferenceElement",function(j,E,S){if(!j)return null;var O=w,N=O.clipPathId,P=w.state,k=P.xAxisMap,R=P.yAxisMap,A=P.offset,C=j.type.defaultProps||{},M=j.props,T=M.xAxisId,I=T===void 0?C.xAxisId:T,L=M.yAxisId,D=L===void 0?C.yAxisId:L;return g.cloneElement(j,{key:j.key||"".concat(E,"-").concat(S),xAxis:k[I],yAxis:R[D],viewBox:{x:A.left,y:A.top,width:A.width,height:A.height},clipPathId:N})}),Re(w,"renderActivePoints",function(j){var E=j.item,S=j.activePoint,O=j.basePoint,N=j.childIndex,P=j.isRange,k=[],R=E.props.key,A=E.item.type.defaultProps!==void 0?oe(oe({},E.item.type.defaultProps),E.item.props):E.item.props,C=A.activeDot,M=A.dataKey,T=oe(oe({index:N,dataKey:M,cx:S.x,cy:S.y,r:4,fill:P_(E.item),strokeWidth:2,stroke:"#fff",payload:S.payload,value:S.value},nt(C,!1)),tp(C));return k.push(v.renderActiveDot(C,T,"".concat(R,"-activePoint-").concat(N))),O?k.push(v.renderActiveDot(C,oe(oe({},T),{},{cx:O.x,cy:O.y}),"".concat(R,"-basePoint-").concat(N))):P&&k.push(null),k}),Re(w,"renderGraphicChild",function(j,E,S){var O=w.filterFormatItem(j,E,S);if(!O)return null;var N=w.getTooltipEventType(),P=w.state,k=P.isTooltipActive,R=P.tooltipAxis,A=P.activeTooltipIndex,C=P.activeLabel,M=w.props.children,T=Dn(M,Dr),I=O.props,L=I.points,D=I.isRange,$=I.baseLine,U=O.item.type.defaultProps!==void 0?oe(oe({},O.item.type.defaultProps),O.item.props):O.item.props,F=U.activeDot,H=U.hide,Y=U.activeBar,G=U.activeShape,re=!!(!H&&k&&T&&(F||Y||G)),Z={};N!=="axis"&&T&&T.props.trigger==="click"?Z={onClick:qp(w.handleItemMouseEnter,j.props.onClick)}:N!=="axis"&&(Z={onMouseLeave:qp(w.handleItemMouseLeave,j.props.onMouseLeave),onMouseEnter:qp(w.handleItemMouseEnter,j.props.onMouseEnter)});var q=g.cloneElement(j,oe(oe({},O.props),Z));function W(He){return typeof R.dataKey=="function"?R.dataKey(He.payload):null}if(re)if(A>=0){var J,te;if(R.dataKey&&!R.allowDuplicatedCategory){var B=typeof R.dataKey=="function"?W:"payload.".concat(R.dataKey.toString());J=uw(L,B,C),te=D&&$&&uw($,B,C)}else J=L==null?void 0:L[A],te=D&&$&&$[A];if(G||Y){var se=j.props.activeIndex!==void 0?j.props.activeIndex:A;return[g.cloneElement(j,oe(oe(oe({},O.props),Z),{},{activeIndex:se})),null,null]}if(!rt(J))return[q].concat(Fs(w.renderActivePoints({item:O,activePoint:J,basePoint:te,childIndex:A,isRange:D})))}else{var ce,ve=(ce=w.getItemByXY(w.state.activeCoordinate))!==null&&ce!==void 0?ce:{graphicalItem:q},Te=ve.graphicalItem,qe=Te.item,Ye=qe===void 0?j:qe,ze=Te.childIndex,at=oe(oe(oe({},O.props),Z),{},{activeIndex:ze});return[g.cloneElement(Ye,at),null,null]}return D?[q,null,null]:[q,null]}),Re(w,"renderCustomized",function(j,E,S){return g.cloneElement(j,oe(oe({key:"recharts-customized-".concat(S)},w.props),w.state))}),Re(w,"renderMap",{CartesianGrid:{handler:Oh,once:!0},ReferenceArea:{handler:w.renderReferenceElement},ReferenceLine:{handler:Oh},ReferenceDot:{handler:w.renderReferenceElement},XAxis:{handler:Oh},YAxis:{handler:Oh},Brush:{handler:w.renderBrush,once:!0},Bar:{handler:w.renderGraphicChild},Line:{handler:w.renderGraphicChild},Area:{handler:w.renderGraphicChild},Radar:{handler:w.renderGraphicChild},RadialBar:{handler:w.renderGraphicChild},Scatter:{handler:w.renderGraphicChild},Pie:{handler:w.renderGraphicChild},Funnel:{handler:w.renderGraphicChild},Tooltip:{handler:w.renderCursor,once:!0},PolarGrid:{handler:w.renderPolarGrid,once:!0},PolarAngleAxis:{handler:w.renderPolarAxis},PolarRadiusAxis:{handler:w.renderPolarAxis},Customized:{handler:w.renderCustomized}}),w.clipPathId="".concat((x=b.id)!==null&&x!==void 0?x:ep("recharts"),"-clip"),w.throttleTriggeredAfterMouseMove=$h(w.triggeredAfterMouseMove,(_=b.throttleDelay)!==null&&_!==void 0?_:1e3/60),w.state={},w}return V0e(v,m),F0e(v,[{key:"componentDidMount",value:function(){var b,x;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(b=this.props.margin.left)!==null&&b!==void 0?b:0,top:(x=this.props.margin.top)!==null&&x!==void 0?x:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var b=this.props,x=b.children,_=b.data,w=b.height,j=b.layout,E=Dn(x,Dr);if(E){var S=E.props.defaultIndex;if(!(typeof S!="number"||S<0||S>this.state.tooltipTicks.length-1)){var O=this.state.tooltipTicks[S]&&this.state.tooltipTicks[S].value,N=Xj(this.state,_,S,O),P=this.state.tooltipTicks[S].coordinate,k=(this.state.offset.top+w)/2,R=j==="horizontal",A=R?{x:P,y:k}:{y:P,x:k},C=this.state.formattedGraphicalItems.find(function(T){var I=T.item;return I.type.name==="Scatter"});C&&(A=oe(oe({},A),C.props.points[S].tooltipPosition),N=C.props.points[S].tooltipPayload);var M={activeTooltipIndex:S,isTooltipActive:!0,activeLabel:O,activePayload:N,activeCoordinate:A};this.setState(M),this.renderCursor(E),this.accessibilityManager.setIndex(S)}}}},{key:"getSnapshotBeforeUpdate",value:function(b,x){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==x.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==b.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==b.margin){var _,w;this.accessibilityManager.setDetails({offset:{left:(_=this.props.margin.left)!==null&&_!==void 0?_:0,top:(w=this.props.margin.top)!==null&&w!==void 0?w:0}})}return null}},{key:"componentDidUpdate",value:function(b){yw([Dn(b.children,Dr)],[Dn(this.props.children,Dr)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var b=Dn(this.props.children,Dr);if(b&&typeof b.props.shared=="boolean"){var x=b.props.shared?"axis":"item";return i.indexOf(x)>=0?x:o}return o}},{key:"getMouseInfo",value:function(b){if(!this.container)return null;var x=this.container,_=x.getBoundingClientRect(),w=tle(_),j={chartX:Math.round(b.pageX-w.left),chartY:Math.round(b.pageY-w.top)},E=_.width/x.offsetWidth||1,S=this.inRange(j.chartX,j.chartY,E);if(!S)return null;var O=this.state,N=O.xAxisMap,P=O.yAxisMap,k=this.getTooltipEventType();if(k!=="axis"&&N&&P){var R=ea(N).scale,A=ea(P).scale,C=R&&R.invert?R.invert(j.chartX):null,M=A&&A.invert?A.invert(j.chartY):null;return oe(oe({},j),{},{xValue:C,yValue:M})}var T=w9(this.state,this.props.data,this.props.layout,S);return T?oe(oe({},j),T):null}},{key:"inRange",value:function(b,x){var _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,w=this.props.layout,j=b/_,E=x/_;if(w==="horizontal"||w==="vertical"){var S=this.state.offset,O=j>=S.left&&j<=S.left+S.width&&E>=S.top&&E<=S.top+S.height;return O?{x:j,y:E}:null}var N=this.state,P=N.angleAxisMap,k=N.radiusAxisMap;if(P&&k){var R=ea(P);return D8({x:j,y:E},R)}return null}},{key:"parseEventsOfWrapper",value:function(){var b=this.props.children,x=this.getTooltipEventType(),_=Dn(b,Dr),w={};_&&x==="axis"&&(_.props.trigger==="click"?w={onClick:this.handleClick}:w={onMouseEnter:this.handleMouseEnter,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd});var j=tp(this.props,this.handleOuterEvent);return oe(oe({},j),w)}},{key:"addListener",value:function(){Hj.on(Wj,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){Hj.removeListener(Wj,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(b,x,_){for(var w=this.state.formattedGraphicalItems,j=0,E=w.length;j<E;j++){var S=w[j];if(S.item===b||S.props.key===b.key||x===_o(S.item.type)&&_===S.childIndex)return S}return null}},{key:"renderClipPath",value:function(){var b=this.clipPathId,x=this.state.offset,_=x.left,w=x.top,j=x.height,E=x.width;return V.createElement("defs",null,V.createElement("clipPath",{id:b},V.createElement("rect",{x:_,y:w,height:j,width:E})))}},{key:"getXScales",value:function(){var b=this.state.xAxisMap;return b?Object.entries(b).reduce(function(x,_){var w=p9(_,2),j=w[0],E=w[1];return oe(oe({},x),{},Re({},j,E.scale))},{}):null}},{key:"getYScales",value:function(){var b=this.state.yAxisMap;return b?Object.entries(b).reduce(function(x,_){var w=p9(_,2),j=w[0],E=w[1];return oe(oe({},x),{},Re({},j,E.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(b){var x;return(x=this.state.xAxisMap)===null||x===void 0||(x=x[b])===null||x===void 0?void 0:x.scale}},{key:"getYScaleByAxisId",value:function(b){var x;return(x=this.state.yAxisMap)===null||x===void 0||(x=x[b])===null||x===void 0?void 0:x.scale}},{key:"getItemByXY",value:function(b){var x=this.state,_=x.formattedGraphicalItems,w=x.activeItem;if(_&&_.length)for(var j=0,E=_.length;j<E;j++){var S=_[j],O=S.props,N=S.item,P=N.type.defaultProps!==void 0?oe(oe({},N.type.defaultProps),N.props):N.props,k=_o(N.type);if(k==="Bar"){var R=(O.data||[]).find(function(T){return Ime(b,T)});if(R)return{graphicalItem:S,payload:R}}else if(k==="RadialBar"){var A=(O.data||[]).find(function(T){return D8(b,T)});if(A)return{graphicalItem:S,payload:A}}else if(ah(S,w)||ih(S,w)||mu(S,w)){var C=jye({graphicalItem:S,activeTooltipItem:w,itemData:P.data}),M=P.activeIndex===void 0?C:P.activeIndex;return{graphicalItem:oe(oe({},S),{},{childIndex:M}),payload:mu(S,w)?P.data[C]:S.props.data[C]}}}return null}},{key:"render",value:function(){var b=this;if(!P5(this))return null;var x=this.props,_=x.children,w=x.className,j=x.width,E=x.height,S=x.style,O=x.compact,N=x.title,P=x.desc,k=h9(x,P0e),R=nt(k,!1);if(O)return V.createElement(NB,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},V.createElement(vw,Ls({},R,{width:j,height:E,title:N,desc:P}),this.renderClipPath(),T5(_,this.renderMap)));if(this.props.accessibilityLayer){var A,C;R.tabIndex=(A=this.props.tabIndex)!==null&&A!==void 0?A:0,R.role=(C=this.props.role)!==null&&C!==void 0?C:"application",R.onKeyDown=function(T){b.accessibilityManager.keyboardEvent(T)},R.onFocus=function(){b.accessibilityManager.focus()}}var M=this.parseEventsOfWrapper();return V.createElement(NB,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},V.createElement("div",Ls({className:st("recharts-wrapper",w),style:oe({position:"relative",cursor:"default",width:j,height:E},S)},M,{ref:function(T){b.container=T}}),V.createElement(vw,Ls({},R,{width:j,height:E,title:N,desc:P,style:K0e}),this.renderClipPath(),T5(_,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(g.Component);Re(p,"displayName",t),Re(p,"defaultProps",oe({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},u)),Re(p,"getDerivedStateFromProps",function(m,v){var b=m.dataKey,x=m.data,_=m.children,w=m.width,j=m.height,E=m.layout,S=m.stackOffset,O=m.margin,N=v.dataStartIndex,P=v.dataEndIndex;if(v.updateId===void 0){var k=_9(m);return oe(oe(oe({},k),{},{updateId:0},f(oe(oe({props:m},k),{},{updateId:0}),v)),{},{prevDataKey:b,prevData:x,prevWidth:w,prevHeight:j,prevLayout:E,prevStackOffset:S,prevMargin:O,prevChildren:_})}if(b!==v.prevDataKey||x!==v.prevData||w!==v.prevWidth||j!==v.prevHeight||E!==v.prevLayout||S!==v.prevStackOffset||!as(O,v.prevMargin)){var R=_9(m),A={chartX:v.chartX,chartY:v.chartY,isTooltipActive:v.isTooltipActive},C=oe(oe({},w9(v,x,E)),{},{updateId:v.updateId+1}),M=oe(oe(oe({},R),A),C);return oe(oe(oe({},M),f(oe({props:m},M),v)),{},{prevDataKey:b,prevData:x,prevWidth:w,prevHeight:j,prevLayout:E,prevStackOffset:S,prevMargin:O,prevChildren:_})}if(!yw(_,v.prevChildren)){var T,I,L,D,$=Dn(_,Ss),U=$&&(T=(I=$.props)===null||I===void 0?void 0:I.startIndex)!==null&&T!==void 0?T:N,F=$&&(L=(D=$.props)===null||D===void 0?void 0:D.endIndex)!==null&&L!==void 0?L:P,H=U!==N||F!==P,Y=!rt(x),G=Y&&!H?v.updateId:v.updateId+1;return oe(oe({updateId:G},f(oe(oe({props:m},v),{},{updateId:G,dataStartIndex:U,dataEndIndex:F}),v)),{},{prevChildren:_,dataStartIndex:U,dataEndIndex:F})}return null}),Re(p,"renderActiveDot",function(m,v,b){var x;return g.isValidElement(m)?x=g.cloneElement(m,v):We(m)?x=m(v):x=V.createElement(PF,v),V.createElement(Ut,{className:"recharts-active-dot",key:b},x)});var y=g.forwardRef(function(m,v){return V.createElement(p,Ls({},m,{ref:v}))});return y.displayName=p.displayName,y},abe=obe({chartName:"BarChart",GraphicalChild:Ya,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:jh},{axisType:"yAxis",AxisComp:zj}],formatAxisMap:vge});const ibe={light:"",dark:".dark"},E9=g.createContext(null);function S9(){const e=g.useContext(E9);if(!e)throw new Error("useChart must be used within a <ChartContainer />");return e}const C9=g.forwardRef(({id:e,className:t,children:n,config:r,...o},a)=>{const i=g.useId(),s=`chart-${e||i.replace(/:/g,"")}`;return h.jsx(E9.Provider,{value:{config:r},children:h.jsxs("div",{"data-chart":s,ref:a,className:Q("flex aspect-video justify-center text-xs",t),...o,children:[h.jsx(sbe,{id:s,config:r}),h.jsx(Kce,{children:n})]})})});C9.displayName="Chart";const sbe=({id:e,config:t})=>{const n=Object.entries(t).filter(([r,o])=>o.theme||o.color);return n.length?h.jsx("style",{dangerouslySetInnerHTML:{__html:Object.entries(ibe).map(([r,o])=>`
${o} [data-chart=${e}] {
${n.map(([a,i])=>{var c;const s=((c=i.theme)==null?void 0:c[r])||i.color;return s?`  --color-${a}: ${s};`:null}).join(`
`)}
}
`).join(`
`)}}):null},cbe=Dr,O9=g.forwardRef(({active:e,payload:t,className:n,indicator:r="dot",hideLabel:o=!1,hideIndicator:a=!1,label:i,labelFormatter:s,labelClassName:c,formatter:l,color:u,nameKey:d,labelKey:f},p)=>{const{config:y}=S9(),m=g.useMemo(()=>{var j;if(o||!(t!=null&&t.length))return null;const[b]=t,x=`${f||b.dataKey||b.name||"value"}`,_=Gj(y,b,x),w=!f&&typeof i=="string"?((j=y[i])==null?void 0:j.label)||i:_==null?void 0:_.label;return s?h.jsx("div",{className:Q("font-medium",c),children:s(w,t)}):w?h.jsx("div",{className:Q("font-medium",c),children:w}):null},[i,s,t,o,c,y,f]);if(!e||!(t!=null&&t.length))return null;const v=t.length===1&&r!=="dot";return h.jsxs("div",{ref:p,className:Q("grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl",n),children:[v?null:m,h.jsx("div",{className:"grid gap-1.5",children:t.map((b,x)=>{const _=`${d||b.name||b.dataKey||"value"}`,w=Gj(y,b,_),j=u||b.payload.fill||b.color;return h.jsx("div",{className:Q("flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground",r==="dot"&&"items-center"),children:l&&(b==null?void 0:b.value)!==void 0&&b.name?l(b.value,b.name,b,x,b.payload):h.jsxs(h.Fragment,{children:[w!=null&&w.icon?h.jsx(w.icon,{}):!a&&h.jsx("div",{className:Q("shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]",{"h-2.5 w-2.5":r==="dot","w-1":r==="line","w-0 border-[1.5px] border-dashed bg-transparent":r==="dashed","my-0.5":v&&r==="dashed"}),style:{"--color-bg":j,"--color-border":j}}),h.jsxs("div",{className:Q("flex flex-1 justify-between leading-none",v?"items-end":"items-center"),children:[h.jsxs("div",{className:"grid gap-1.5",children:[v?m:null,h.jsx("span",{className:"text-muted-foreground",children:(w==null?void 0:w.label)||b.name})]}),b.value&&h.jsx("span",{className:"font-mono font-medium tabular-nums text-foreground",children:b.value.toLocaleString()})]})]})},b.dataKey)})})]})});O9.displayName="ChartTooltip";const lbe=g.forwardRef(({className:e,hideIcon:t=!1,payload:n,verticalAlign:r="bottom",nameKey:o},a)=>{const{config:i}=S9();return n!=null&&n.length?h.jsx("div",{ref:a,className:Q("flex items-center justify-center gap-4",r==="top"?"pb-3":"pt-3",e),children:n.map(s=>{const c=`${o||s.dataKey||"value"}`,l=Gj(i,s,c);return h.jsxs("div",{className:Q("flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground"),children:[l!=null&&l.icon&&!t?h.jsx(l.icon,{}):h.jsx("div",{className:"h-2 w-2 shrink-0 rounded-[2px]",style:{backgroundColor:s.color}}),l==null?void 0:l.label]},s.value)})}):null});lbe.displayName="ChartLegend";function Gj(e,t,n){if(typeof t!="object"||t===null)return;const r="payload"in t&&typeof t.payload=="object"&&t.payload!==null?t.payload:void 0;let o=n;return n in t&&typeof t[n]=="string"?o=t[n]:r&&n in r&&typeof r[n]=="string"&&(o=r[n]),o in e?e[o]:e[n]}const M9=e=>{const t=["Bytes","KB","MB","GB","TB"];if(e===void 0)return"Unknown size";if(e===0)return"0 Byte";const n=Math.floor(Math.log(e)/Math.log(1024));return`${Math.round(e/Math.pow(1024,n))} ${t[n]}`},ube=g.memo(()=>{const{t:e}=Pe("flows"),[t,n]=g.useState(),r=Zn(y=>y.cachedLLMURLs),o=pt(y=>y.currentSession),[a,i]=g.useState(),[s,c]=g.useState(""),[l,u]=g.useState(),d=g.useMemo(()=>({nodes:{label:e("session_info_node.entities.nodes"),color:"#2563eb"},edges:{label:e("session_info_node.entities.edges"),color:"#34d399"},threads:{label:e("session_info_node.entities.threads"),color:"#fbbf24"},llms:{label:e("session_info_node.entities.llms"),color:"#f87171"},prompts:{label:e("session_info_node.entities.prompts"),color:"#a78bfa"},tools:{label:e("session_info_node.entities.tools"),color:"#ffcccb"},schemas:{label:e("session_info_node.entities.schemas"),color:"#ffb6c1"},vectorDatabases:{label:e("session_info_node.entities.vector_databases"),color:"#ff69b4"},jsonlDatas:{label:e("session_info_node.entities.jsonl_data"),color:"#ff1493"},csvDatas:{label:e("session_info_node.entities.csv_data"),color:"#db7093"}}),[e]);g.useEffect(()=>{qt(async()=>{const{functionCallingModelIds:y,prebuiltAppConfig:m}=await import("./index-DnLurQHa.js").then(async v=>(await v.__tla,v));return{functionCallingModelIds:y,prebuiltAppConfig:m}},__vite__mapDeps([7,1,2,3,4,5,6])).then(({functionCallingModelIds:y,prebuiltAppConfig:m})=>{n(r==null?void 0:r.map(v=>{const b=m.model_list.find(x=>v.includes(x.model));if(b)return{model_id:(b==null?void 0:b.model_id)||"",info:b,isFunctionCalling:y.includes((b==null?void 0:b.model_id)||"")}}))})},[r,o==null?void 0:o.id]);const f=g.useCallback(async()=>{navigator.storage.estimate().then(y=>{y&&c(e("session_info_node.used_bytes",{used:M9(y.usage),total:M9(y==null?void 0:y.quota)}))}),o!=null&&o.id&&(Promise.all([ue("FlowNode").findOne({where:{session_id:o==null?void 0:o.id},order:{updated_at:"DESC"}}),ue("FlowEdge").findOne({where:{session_id:o==null?void 0:o.id},order:{updated_at:"DESC"}}),ue("Thread").findOne({where:{session_id:o==null?void 0:o.id},order:{updated_at:"DESC"}}),ue("Prompt").findOne({where:{session_id:o==null?void 0:o.id},order:{updated_at:"DESC"}}),ue("LLM").findOne({where:{session_id:o==null?void 0:o.id},order:{updated_at:"DESC"}}),ue("Schema").findOne({where:{session_id:o==null?void 0:o.id},order:{updated_at:"DESC"}}),ue("ToolDefinition").findOne({where:{session_id:o==null?void 0:o.id},order:{updated_at:"DESC"}}),ue("VectorDatabase").findOne({where:{session_id:o==null?void 0:o.id},order:{updated_at:"DESC"}}),ue("JSONLData").findOne({where:{session_id:o==null?void 0:o.id},order:{updated_at:"DESC"}}),ue("CSVData").findOne({where:{session_id:o==null?void 0:o.id},order:{updated_at:"DESC"}})]).then(y=>{const m=y.reduce((v,b)=>b!=null&&b.updated_at&&(!v||new Date(b.updated_at)>v)?new Date(b.updated_at):v,o.updated_at?new Date(o.updated_at):void 0);i(m)}),Promise.all([ue("FlowNode").count({where:{session_id:o==null?void 0:o.id}}),ue("FlowEdge").count({where:{session_id:o==null?void 0:o.id}}),ue("Thread").count({where:{session_id:o==null?void 0:o.id}}),ue("Prompt").count({where:{session_id:o==null?void 0:o.id}}),ue("LLM").count({where:{session_id:o==null?void 0:o.id}}),ue("ToolDefinition").count({where:{session_id:o==null?void 0:o.id}}),ue("Schema").count({where:{session_id:o==null?void 0:o.id}}),ue("VectorDatabase").count({where:{session_id:o==null?void 0:o.id}}),ue("JSONLData").count({where:{session_id:o==null?void 0:o.id}}),ue("CSVData").count({where:{session_id:o==null?void 0:o.id}})]).then(([y,m,v,b,x,_,w,j,E,S])=>{u([{name:e("session_info_node.count_info.title"),nodes:y||0,edges:m||0,threads:v||0,prompts:b||0,llms:x||0,tools:_||0,schemas:w||0,vectorDatabases:j||0,jsonlDatas:E||0,csvDatas:S||0}])}))},[o==null?void 0:o.id,o==null?void 0:o.updated_at,e]),p=g.useCallback(()=>{f()},[f]);return g.useEffect(()=>{f()},[f]),h.jsxs(At,{className:"w-96",children:[h.jsxs(fn,{children:[h.jsx(_n,{children:e("session_info_node.title")}),h.jsx(GI,{children:a||o!=null&&o.updated_at?fwe(a||(o==null?void 0:o.updated_at)).fromNow():""})]}),h.jsxs(pn,{className:"grid gap-4",children:[h.jsx("div",{className:"flex items-center space-x-4 rounded-md border p-4",children:h.jsxs("div",{className:"flex-1 space-y-1",children:[h.jsx("p",{className:"text-sm font-medium leading-none",children:e("session_info_node.disk_size")}),h.jsx("p",{className:"text-sm text-muted-foreground",children:s})]})}),h.jsx("div",{className:"flex items-center space-x-4 rounded-md border p-4",children:h.jsxs("div",{className:"flex-1 space-y-1",children:[h.jsxs("div",{className:"text-sm font-medium leading-none",children:[e("session_info_node.cached_llms"),h.jsx(tn,{className:"ml-2",children:(t==null?void 0:t.length)||0})]}),t==null?void 0:t.map(y=>h.jsxs("div",{className:"text-sm text-muted-foreground gap-1",children:[y==null?void 0:y.model_id,h.jsx("div",{className:"max-w-full gap-1 flex flex-wrap mt-1",children:h.jsx(Gi,{model:y==null?void 0:y.info,isFunctionCalling:(y==null?void 0:y.isFunctionCalling)||!1,isCached:!0})})]},y==null?void 0:y.model_id))]})}),h.jsx("div",{children:h.jsx(C9,{config:d,className:"min-h-28 w-full",children:h.jsxs(abe,{accessibilityLayer:!0,data:l,children:[h.jsx(e9,{vertical:!1}),h.jsx(jh,{dataKey:"name",tickLine:!1,tickMargin:10,axisLine:!1}),h.jsx(cbe,{content:h.jsx(O9,{})}),Object.entries(d).map(([y,m])=>h.jsx(Ya,{dataKey:y,fill:m.color,radius:4},y))]})})})]}),h.jsx(Xo,{children:h.jsxs(ut,{className:"w-full",onClick:p,children:[h.jsx(de,{size:24,name:"refresh-ccw"}),e("session_info_node.reload")]})})]})});var Qj="Tabs",[dbe,Iwe]=Bn(Qj,[Hr]),N9=Hr(),[fbe,Jj]=dbe(Qj),k9=g.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:o,defaultValue:a,orientation:i="horizontal",dir:s,activationMode:c="automatic",...l}=e,u=Io(s),[d,f]=Zt({prop:r,onChange:o,defaultProp:a});return h.jsx(fbe,{scope:n,baseId:ht(),value:d,onValueChange:f,orientation:i,dir:u,activationMode:c,children:h.jsx(Oe.div,{dir:u,"data-orientation":i,...l,ref:t})})});k9.displayName=Qj;var P9="TabsList",A9=g.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...o}=e,a=Jj(P9,n),i=N9(n);return h.jsx(Xs,{asChild:!0,...i,orientation:a.orientation,dir:a.dir,loop:r,children:h.jsx(Oe.div,{role:"tablist","aria-orientation":a.orientation,...o,ref:t})})});A9.displayName=P9;var T9="TabsTrigger",R9=g.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:o=!1,...a}=e,i=Jj(T9,n),s=N9(n),c=L9(i.baseId,r),l=F9(i.baseId,r),u=r===i.value;return h.jsx(Gs,{asChild:!0,...s,focusable:!o,active:u,children:h.jsx(Oe.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":l,"data-state":u?"active":"inactive","data-disabled":o?"":void 0,disabled:o,id:c,...a,ref:t,onMouseDown:he(e.onMouseDown,d=>{!o&&d.button===0&&d.ctrlKey===!1?i.onValueChange(r):d.preventDefault()}),onKeyDown:he(e.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&i.onValueChange(r)}),onFocus:he(e.onFocus,()=>{const d=i.activationMode!=="manual";!u&&!o&&d&&i.onValueChange(r)})})})});R9.displayName=T9;var I9="TabsContent",D9=g.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:o,children:a,...i}=e,s=Jj(I9,n),c=L9(s.baseId,r),l=F9(s.baseId,r),u=r===s.value,d=g.useRef(u);return g.useEffect(()=>{const f=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(f)},[]),h.jsx(On,{present:o||u,children:({present:f})=>h.jsx(Oe.div,{"data-state":u?"active":"inactive","data-orientation":s.orientation,role:"tabpanel","aria-labelledby":c,hidden:!f,id:l,tabIndex:0,...i,ref:t,style:{...e.style,animationDuration:d.current?"0s":void 0},children:f&&a})})});D9.displayName=I9;function L9(e,t){return`${e}-trigger-${t}`}function F9(e,t){return`${e}-content-${t}`}var pbe=k9,B9=A9,$9=R9,z9=D9;const V9=pbe,Zj=g.forwardRef(({className:e,...t},n)=>h.jsx(B9,{ref:n,className:Q("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));Zj.displayName=B9.displayName;const Bs=g.forwardRef(({className:e,...t},n)=>h.jsx($9,{ref:n,className:Q("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));Bs.displayName=$9.displayName;const $s=g.forwardRef(({className:e,...t},n)=>h.jsx(z9,{ref:n,className:Q("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));$s.displayName=z9.displayName;const hbe=e=>{const t=g.useCallback(async({edgeId:n})=>{try{return{deleteEdgeId:n}}catch{return{deleteEdgeId:n}}},[]);bn(e,t)},mbe=g.memo(e=>{var c,l;const{t}=Pe("flows"),{id:n,data:r,isConnectable:o}=e,a=g.useRef(!1),i=Yt(n),s=Ae(u=>u.updateNodes);return hbe(n),g.useEffect(()=>{var d;const u=r==null?void 0:r.entity;!u||!i||a.current||(d=u==null?void 0:u.schema_items)!=null&&d.length||r.loaded||(a.current=!0,ue("SchemaItem").find({where:{schema_id:u.id}}).then(f=>{s([{id:i.id,type:"replace",item:{...i,data:{...(i==null?void 0:i.data)||{},loaded:!0,entity:{...r.entity,schema_items:f}}}}])}).finally(()=>{a.current=!1}))},[r.entity,r.loaded,i,s]),h.jsxs("div",{children:[h.jsxs("div",{children:[h.jsx(nn,{id:n}),h.jsxs(V9,{defaultValue:"account",className:"w-[400px]",children:[h.jsxs(Zj,{className:"grid w-full grid-cols-2",children:[h.jsx(Bs,{value:"account",children:t("schema_node.typescript")}),h.jsx(Bs,{value:"password",children:t("schema_node.zod")})]}),h.jsx($s,{value:"account",children:h.jsx(At,{className:"p-4",children:h.jsx("pre",{className:"overflow-hidden break-words whitespace-pre-wrap",children:BI(((c=r==null?void 0:r.entity)==null?void 0:c.schema_items)||[])})})}),h.jsx($s,{value:"password",children:h.jsx(At,{className:"p-4 max-w-full",children:h.jsx("pre",{className:"overflow-hidden break-words whitespace-pre-wrap",children:wx(((l=r==null?void 0:r.entity)==null?void 0:l.schema_items)||[])})})})]})]}),h.jsx(Je,{type:"source",position:fe.Bottom,id:"a",isConnectable:o})]})}),U9=({className:e,...t})=>h.jsx("nav",{role:"navigation","aria-label":"pagination",className:Q("mx-auto flex w-full justify-center",e),...t});U9.displayName="Pagination";const H9=g.forwardRef(({className:e,...t},n)=>h.jsx("ul",{ref:n,className:Q("flex flex-row items-center gap-1",e),...t}));H9.displayName="PaginationContent";const zs=g.forwardRef(({className:e,...t},n)=>h.jsx("li",{ref:n,className:Q("",e),...t}));zs.displayName="PaginationItem";const Nh=({className:e,isActive:t,size:n="icon",...r})=>h.jsx("a",{"aria-current":t?"page":void 0,className:Q(pc({variant:t?"outline":"ghost",size:n}),e),...r});Nh.displayName="PaginationLink";const W9=({className:e,...t})=>{const{t:n}=Pe("atoms");return h.jsxs(Nh,{"aria-label":"Go to previous page",size:"default",className:Q("gap-1 pl-2.5",e),...t,children:[h.jsx(de,{name:"chevron-left",className:"h-4 w-4"}),h.jsx("span",{children:n("pagination.previous")})]})};W9.displayName="PaginationPrevious";const q9=({className:e,...t})=>{const{t:n}=Pe("atoms");return h.jsxs(Nh,{"aria-label":"Go to next page",size:"default",className:Q("gap-1 pr-2.5",e),...t,children:[h.jsx("span",{children:n("pagination.next")}),h.jsx(de,{name:"chevron-right",className:"h-4 w-4"})]})};q9.displayName="PaginationNext";const eE=({className:e,...t})=>{const{t:n}=Pe("atoms");return h.jsxs("span",{"aria-hidden":!0,className:Q("flex h-9 w-9 items-center justify-center",e),...t,children:[h.jsx(de,{name:"ellipsis",className:"h-4 w-4"}),h.jsx("span",{className:"sr-only",children:n("pagination.more_pages")})]})};eE.displayName="PaginationEllipsis";const Y9=g.memo(e=>{const{data:t,headers:n,limitLengthByColumns:r,showPerPage:o=7,paginationShowLimit:a=1,contentLengthLimit:i=64}=e,[s,c]=g.useState({page:1,maxPage:1}),l=sn(v5);g.useEffect(()=>{c(p=>({...p,maxPage:Math.ceil(t.length/o)}))},[t.length,o]);const u=g.useMemo(()=>t.slice((s.page-1)*o,s.page*o),[t,s.page,o]),d=g.useMemo(()=>{let p=!1,y=!1;return h.jsx(U9,{className:"mt-4 mb-4 ml-4 mr-4 w-full",children:h.jsxs(H9,{children:[s.page>1?h.jsx(zs,{onClick:()=>c(m=>({...m,page:m.page-1})),children:h.jsx(W9,{})}):null,Array.from({length:s.maxPage},(m,v)=>{const b=v+1,x=v===0||v===s.maxPage-1;return!x&&b>s.page+a&&y?null:!x&&b>s.page+a?(y=!0,h.jsx(zs,{children:h.jsx(eE,{})},v)):!x&&b<s.page-a&&p?null:!x&&b<s.page-a?(p=!0,h.jsx(zs,{children:h.jsx(eE,{})},v)):h.jsx(zs,{onClick:()=>c(_=>({..._,page:b})),children:h.jsx(Nh,{isActive:v+1===s.page,children:v+1})},v)}),s.page<s.maxPage?h.jsx(zs,{onClick:()=>c(m=>({...m,page:m.page+1})),children:h.jsx(q9,{})}):null]})})},[s.maxPage,s.page,a]),f=(p,y)=>{if(!p)return;const m=Array.isArray(p)?p:n.map(v=>p[v]);return h.jsxs(Ra,{children:[h.jsx(ts,{children:h.jsx("div",{className:"font-bold",children:y+1})}),m.map((v,b)=>{const x=typeof v=="string"?v:JSON.stringify(v),_=n[b],w=(r==null?void 0:r[_])||i,j=x.length>w;return h.jsx(ts,{className:"p-4",children:h.jsxs("div",{onClick:j?()=>l.show({title:_,content:x}):void 0,className:"flex gap-4",children:[j?`${x.substring(0,w)}...`:x,j?h.jsx(de,{className:"w-6 mt-[-2px]",name:"chevron-right"}):null]})},`${b}`)})]},`${y}`)};return h.jsxs(h.Fragment,{children:[h.jsxs(Xf,{className:"w-full",children:[h.jsx(Gf,{children:h.jsxs(Ra,{children:[h.jsx(es,{},"index"),n?n.map(p=>h.jsx(es,{children:h.jsx("div",{className:"font-bold",children:p})},p)):void 0]})}),h.jsx(Qf,{children:u!=null&&u.length?u==null?void 0:u.map(f):void 0})]}),d]})}),ybe=g.memo(e=>{var a,i;const{id:t,data:n,isConnectable:r}=e,o=g.useMemo(()=>{if(!(n!=null&&n.entity))return{headers:[],rows:[]};const s=S$(n.entity.csv);return{headers:gE(n.entity.headers),rows:s.map(c=>gE(c))}},[n==null?void 0:n.entity]);return h.jsxs("div",{children:[h.jsx(Je,{type:"target",position:fe.Top,isConnectable:r}),h.jsxs("div",{children:[h.jsx(nn,{id:t}),h.jsxs(At,{className:"min-w-32 min-h-16 p-4",children:[h.jsx(fn,{className:"!p-0",children:h.jsxs("div",{className:"pt-2 flex !flex-row",children:[h.jsx(de,{name:"file-spreadsheet",className:"mr-2"}),h.jsxs(Ge,{className:"!font-medium leading-none tracking-tight pr-8",children:[ae.CSVData," ",(a=o==null?void 0:o.rows)!=null&&a.length?`(${((i=o==null?void 0:o.rows)==null?void 0:i.length)||0})`:""]})]})}),h.jsx(pn,{className:"pb-0",children:h.jsx(Y9,{data:o.rows,headers:o.headers})})]})]}),h.jsx(Je,{type:"source",position:fe.Bottom,id:"a",isConnectable:r})]})}),gbe=e=>{const t=Ae(r=>r.createOrUpdateFlowEdge),n=g.useCallback(async({edgeId:r,source:o,target:a,connection:i})=>{try{if((o==null?void 0:o.type)===ae.Schema&&(a==null?void 0:a.type)===ae.ToolDefinition){await t({source:i.source,target:i.target,sourceHandle:i.sourceHandle,targetHandle:i.targetHandle});return}return{deleteEdgeId:r}}catch{return{deleteEdgeId:r}}},[t]);bn(e,n)},vbe=g.memo(({id:e,data:t,isConnectable:n})=>{var r,o;return gbe(e),h.jsxs("div",{children:[h.jsx(Je,{type:"target",position:fe.Top,isConnectable:n}),h.jsx("div",{children:h.jsxs(xo,{className:"flex justify-center",children:[h.jsx(de,{size:24,name:"wrench"}),h.jsxs("div",{className:"ml-2",children:[h.jsx(wo,{children:`${((r=t.entity)==null?void 0:r.name)||""}`}),h.jsx(ns,{children:`${((o=t.entity)==null?void 0:o.description)||""}`})]})]})}),h.jsx(Je,{type:"source",position:fe.Bottom,id:"a",isConnectable:n})]})}),bbe=e=>{const t=g.useCallback(async({edgeId:n})=>({deleteEdgeId:n}),[]);bn(e,t)},xbe=g.memo(e=>{const{id:t,data:n,isConnectable:r}=e;return bbe(t),h.jsxs("div",{children:[h.jsx(Je,{type:"target",position:fe.Top,isConnectable:r}),h.jsx("div",{children:h.jsxs(xo,{className:"flex justify-center max-w-80",variant:"default",children:[h.jsx(Ko,{name:n.model||"brain",className:"w-7 h-7"}),h.jsx("div",{className:"ml-2 pr-4 flex items-center",children:h.jsx(wo,{children:`${n.model||""}`})})]})}),h.jsx(Je,{type:"source",position:fe.Bottom,id:"a",isConnectable:r})]})});class wbe{async loadAndSplit(t){if(t===void 0)throw new Error("You must pass a text splitter to use this method.");const n=await this.load();return t.invoke(n)}}class _be extends wbe{constructor(t,{splitPages:n=!0,pdfjs:r=jbe,parsedItemSeparator:o=""}={}){super(),Object.defineProperty(this,"blob",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"splitPages",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"pdfjs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"parsedItemSeparator",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.blob=t,this.splitPages=n??this.splitPages,this.pdfjs=r,this.parsedItemSeparator=o}async load(){const{getDocument:t,version:n}=await this.pdfjs(),r=await t({data:new Uint8Array(await this.blob.arrayBuffer()),useWorkerFetch:!1,isEvalSupported:!1,useSystemFonts:!0}).promise,o=await r.getMetadata().catch(()=>null),a=[];for(let i=1;i<=r.numPages;i+=1){const s=await(await r.getPage(i)).getTextContent();if(s.items.length===0)continue;let c;const l=[];for(const d of s.items)"str"in d&&(c===d.transform[5]||!c?l.push(d.str):l.push(`
${d.str}`),c=d.transform[5]);const u=l.join(this.parsedItemSeparator);a.push(new Lh({pageContent:u,metadata:{pdf:{version:n,info:o==null?void 0:o.info,metadata:o==null?void 0:o.metadata,totalPages:r.numPages},loc:{pageNumber:i}}}))}return this.splitPages?a:a.length===0?[]:[new Lh({pageContent:a.map(i=>i.pageContent).join(`

`),metadata:{pdf:{version:n,info:o==null?void 0:o.info,metadata:o==null?void 0:o.metadata,totalPages:r.numPages}}})]}}async function jbe(){try{const{default:e}=await qt(async()=>{const{default:r}=await import("./pdf-Bkh7NtDr.js").then(async o=>(await o.__tla,o)).then(o=>o.p);return{default:r}},__vite__mapDeps([12,1,2])),{getDocument:t,version:n}=e;return{getDocument:t,version:n}}catch(e){throw console.error(e),new Error("Failed to load pdf-parse. Please install it with eg. `npm install pdf-parse`.")}}const Ebe=`Use the following pieces of context to answer the question at the end.
If you don't know the answer, just say that you don't know, don't try to make up an answer.
Use three sentences maximum and keep the answer as concise as possible.

{context}
`,Sbe=ei(e=>{const{source:t,documents:n}=e,r=sn(),{toast:o}=en(),{t:a}=Pe("dialogs"),{loading:i,createPrompt:s}=LD(),c=async l=>{try{if(!l.content||!l.content.includes("{context}")){o({title:a("create_vector_database_prompt.errors.fill_context"),variant:"destructive"});return}const u=l.content.replace("{context}",n.map(d=>`<document>${d.pageContent}</document>`).join(`
`));return await s(t,{...l,content:u}),r.hide(),!0}catch{o({title:a("create_vector_database_prompt.errors.create_failed"),variant:"destructive"})}};return h.jsx(Oc,{open:r.visible,onOpenChange:r.hide,children:h.jsxs(wi,{className:"sm:max-w-[425px]",children:[h.jsx(_i,{children:h.jsxs("div",{className:"flex",children:[h.jsx(de,{name:"file",className:"mr-2 h-4 w-4"}),h.jsx(ji,{children:a("create_vector_database_prompt.title")})]})}),h.jsxs("div",{className:"flex gap-4 py-4 flex-col",children:[h.jsx(qx,{onSubmit:c,loading:i,hidePromptType:!0,defaultPromptRole:"system",defaultPromptContent:Ebe}),h.jsxs("div",{className:"w-full border-0 text-gray-700 flex text-sm items-center",children:[h.jsx(de,{name:"info",className:"mr-2",size:14}),a("create_vector_database_prompt.fill_content_note")]})]})]})})}),Cbe=()=>{const e=pt(i=>{var s;return(s=i.currentSession)==null?void 0:s.id}),[t,n]=g.useState(!1),r=Ae(i=>i.createOrUpdateFlowNode),o=Ae(i=>i.createOrUpdateFlowEdge),a=g.useCallback(async({prompt:i,source:s,metadata:c})=>{var l,u,d,f;try{const p=(l=s==null?void 0:s.data)==null?void 0:l.entity;if(!p||!e)throw new Error("Source or Session not found");n(!0);const y=((u=s.position)==null?void 0:u.x)||0,m=(((d=s.position)==null?void 0:d.y)||0)+(((f=s.measured)==null?void 0:f.height)||0),v=await ue("Prompt").save({...i,status:(i==null?void 0:i.status)||Wr.Started,role:(i==null?void 0:i.role)||Nn.System,type:(i==null?void 0:i.type)||kn.Chat,content:(i==null?void 0:i.content)||"{context}",session_id:e});if(!v)throw new Error("Failed to save prompt");const b=await r({source_id:v.id,source_type:"Prompt",node_type:ae.Prompt,x:y,y:m+20});if(!b)throw new Error("Failed to save prompt node");const x=await ue("FlowNodePlaceholder").save({placeholder:`Retriever for ${p.name}`,placeholder_type:si.VECTOR_DATABASE_RETREIVER,session_id:e,metadata:c});if(!x)throw new Error("Failed to save node placeholder");const _=await r({source_id:x.id,source_type:"FlowNodePlaceholder",node_type:ae.PlaceHolder,x:y,y:m+40});if(!_)throw new Error("Failed to save node placeholder node");await o({source:b.id,target:_.id}),await o({source:s.id,target:_.id})}finally{n(!1)}},[e,r,o]);return{loading:t,createVectorDatabaseRetriever:a}},Obe=`Use the following pieces of context to answer the question at the end.
If you don't know the answer, just say that you don't know, don't try to make up an answer.
----------------
{context}
`,Mbe=ei(e=>{const{source:t}=e,n=sn(),{toast:r}=en(),{t:o}=Pe("dialogs"),[a,i]=g.useState(1),[s,c]=g.useState(void 0),{loading:l,createVectorDatabaseRetriever:u}=Cbe(),d=async y=>{try{const m=y.content;if(!m||!m.includes("{context}")){r({title:o("create_vector_database_retriever.errors.fill_context"),variant:"destructive"});return}return await u({source:t,prompt:{content:m},metadata:{k:a,minimalScore:s}}),n.hide(),!0}catch{r({title:o("create_vector_database_retriever.errors.create_failed"),variant:"destructive"})}},f=y=>{i(y.target.value?Number(y.target.value):void 0)},p=y=>{c(y.target.value?Number(y.target.value):void 0)};return h.jsx(Oc,{open:n.visible,onOpenChange:n.hide,children:h.jsxs(wi,{className:"sm:max-w-[425px]",children:[h.jsx(_i,{children:h.jsxs("div",{className:"flex",children:[h.jsx(de,{name:"file",className:"mr-2 h-4 w-4"}),h.jsx(ji,{children:o("create_vector_database_retriever.title")})]})}),h.jsxs("div",{className:"flex gap-4 py-4 flex-col",children:[h.jsx(qx,{onSubmit:d,loading:l,hidePromptType:!0,defaultPromptRole:"system",defaultPromptContent:Obe}),h.jsxs(At,{children:[h.jsx(fn,{children:h.jsx(_n,{children:o("create_vector_database_retriever.retriever_settings")})}),h.jsxs(pn,{children:[h.jsx(Ge,{children:o("create_vector_database_retriever.retriever_k")}),h.jsx(ln,{value:a||"",type:"number",onChange:f,placeholder:o("create_vector_database_retriever.retriever_k_placeholder")}),h.jsx(Ge,{children:o("create_vector_database_retriever.retriever_minimum_score")}),h.jsx(ln,{value:s||"",type:"number",onChange:p,placeholder:o("create_vector_database_retriever.retriever_minimum_score_placeholder")})]})]}),h.jsxs("div",{className:"w-full border-0 text-gray-700 flex text-sm items-center",children:[h.jsx(de,{name:"info",className:"mr-2",size:14}),o("create_vector_database_retriever.fill_content_note")]})]})]})})}),Nbe=e=>{const t=Ae(o=>o.createOrUpdateFlowEdge),n=Tu(o=>o.index),r=g.useCallback(async({edgeId:o,target:a,source:i})=>{var s,c;try{const l=(s=a==null?void 0:a.data)==null?void 0:s.entity;if((i==null?void 0:i.type)===ae.CSVData&&(a==null?void 0:a.type)===ae.VectorDatabase){const u=(c=i==null?void 0:i.data)==null?void 0:c.entity;if(!u||!l)return{deleteEdgeId:o};const{rows:d}=E$(u.headers,u.csv),f=d.map(p=>new Lh({pageContent:`${p.text}`}));await n({databaseId:l.id,dataSourceId:u.id,dataSourceType:"CSVData"},f),await t({source:i.id,target:a.id});return}return{deleteEdgeId:o}}catch{return{deleteEdgeId:o}}},[t,n]);bn(e,r)};var tE,K9;function kbe(){if(K9)return tE;K9=1;var e=Dm(),t=ti(),n=wB(),r=Math.ceil,o=Math.max;function a(i,s,c){(c?t(i,s,c):s===void 0)?s=1:s=o(n(s),0);var l=i==null?0:i.length;if(!l||s<1)return[];for(var u=0,d=0,f=Array(r(l/s));u<l;)f[d++]=e(i,u,u+=s);return f}return tE=a,tE}var Pbe=kbe();const Abe=Xe(Pbe),Tbe=e=>{var p,y;const[t,n]=g.useState(!1),{t:r}=Pe("flows"),{toast:o}=en(),a=Yt(e),{getNode:i,getHandleConnections:s}=Un(),c=Ae(m=>m.updateNodes),l=Tu(m=>m.index),u=Tu(m=>m.similaritySearchWithScore),d=g.useCallback(async(m,v)=>{var b,x,_;try{const w=(b=a==null?void 0:a.data)==null?void 0:b.entity;if(!w){o({variant:"destructive",title:r("vector_database_node.errors.vector_database_not_found")});return}const j=(_=(x=s({nodeId:e,type:"target"}).map(E=>i(E.source)).find(E=>(E==null?void 0:E.type)&&[ae.JSONLData,ae.CSVData].includes(E==null?void 0:E.type)))==null?void 0:x.data)==null?void 0:_.entity;if(!j&&w.storage==="DataNode"){o({variant:"destructive",title:r("vector_database_node.errors.data_node_not_found")});return}return n(!0),await u({databaseId:w.id,dataSourceId:j.id,dataSourceType:yE(j)},m,v==null?void 0:v.k)}catch{o({variant:"destructive",title:r("vector_database_node.errors.similarity_search_failed")})}finally{n(!1)}},[(p=a==null?void 0:a.data)==null?void 0:p.entity,s,e,u,o,r,i]),f=g.useCallback(async(m,v)=>{var b,x,_;try{const w=m.content?[new Lh({pageContent:m.content,id:m.id,metadata:{id:m.id}})]:m.documents;if(!(w!=null&&w.length)){o({variant:"destructive",title:r("vector_database_node.errors.content_not_found")});return}const j=(b=a==null?void 0:a.data)==null?void 0:b.entity;if(!j){o({variant:"destructive",title:r("vector_database_node.errors.vector_database_not_found")});return}const E=s({nodeId:e,type:"target"}).map(k=>i(k.source)).find(k=>(k==null?void 0:k.type)&&[ae.JSONLData,ae.CSVData].includes(k==null?void 0:k.type)),S=(x=E==null?void 0:E.data)==null?void 0:x.entity;if(!S&&j.storage==="DataNode"){o({variant:"destructive",title:r("vector_database_node.errors.data_node_not_found")});return}n(!0);const O=yE(S),N=Abe(w,10);let P=0;for(const k of N){if((_=v==null?void 0:v.onProgressReport)==null||_.call(v,{handling:k.length,handled:P,total:w.length}),await l({databaseId:j.id,dataSourceId:S.id,dataSourceType:O},k),O&&E){const R=await ue(O).findOne({where:{id:S.id}});c([{type:"replace",id:E.id,item:{...E,data:{...E.data,entity:R}}}])}P+=k.length}}catch{o({variant:"destructive",title:r("vector_database_node.errors.similarity_search_failed")})}finally{n(!1)}},[(y=a==null?void 0:a.data)==null?void 0:y.entity,s,e,l,o,r,i,c]);return{loading:t,indexData:f,similaritySearchWithScore:d}},Rbe=[1,2,3,4,5,6,7,8,9,10],Ibe=g.memo(e=>{const{t}=Pe("flows"),[n,r]=g.useState(""),[o,a]=g.useState([]),[i,s]=g.useState("1"),{loading:c,onSimilaritySearch:l,onCreatePrompt:u,onCreateRetriever:d}=e,f=async()=>{a(await l(n,+i)),r("")},p=async y=>{y.key==="Enter"&&!y.shiftKey&&(y.preventDefault(),f())};return h.jsxs("div",{className:"mt-4 max-w-full",children:[h.jsx("div",{className:"bg-black/5 dark:bg-white/5 rounded-xl relative",children:h.jsxs("div",{className:"relative px-2 py-1 pb-2",children:[h.jsxs(yo,{value:`${i}`,onValueChange:y=>s(y),children:[h.jsx(Rr,{className:"absolute left-0 !w-14 top-[2px] rounded-xl bg-transparent border-none focus:outline-none focus:ring-0 focus:border-opacity-0 focus:ring-transparent",children:h.jsx(go,{placeholder:t("vector_database_node.k_select_placeholder")})}),h.jsx(Ir,{children:Rbe.map(y=>h.jsx(En,{value:`${y}`,children:y},`${y}`))})]}),h.jsx(ao,{value:n,disabled:c,placeholder:t("vector_database_node.similarity_search_placeholder"),className:Q("w-full rounded-xl px-2 pl-11 border-none resize-none bg-transparent","min-h-8 max-h-8"),onKeyDown:p,onChange:y=>{r(y.target.value)}}),h.jsx("button",{type:"button",disabled:c,onClick:f,className:"absolute right-3 top-5 -translate-y-1/2 rounded-xl bg-black/5 dark:bg-white/5 p-1",children:h.jsx(de,{name:c?"loader-circle":"arrow-right",className:Q("w-4 h-4 dark:text-white",n?"opacity-100":"opacity-30",c?"animate-spin":"")})})]})}),h.jsx(GD,{type:"single",collapsible:!0,children:o==null?void 0:o.map(([y,m],v)=>h.jsxs(Jx,{value:`${v}`,children:[h.jsxs(Zx,{children:[`[${m.toFixed(2)}] ${y.pageContent}`.substring(0,32),"..."]}),h.jsx(ew,{children:y.pageContent})]},`${v}`))}),h.jsxs("div",{className:"w-full mt-4 flex flex-col gap-1",children:[h.jsx(ut,{disabled:c,onClick:d,className:"w-full",children:t("vector_database_node.to_retriever")}),o!=null&&o.length&&u?h.jsx(ut,{disabled:c,onClick:()=>u(o),className:"w-full",children:t("vector_database_node.create_prompt")}):void 0]})]})}),Dbe=g.memo(({loading:e,onCreateData:t})=>{const{t:n}=Pe("flows"),[r,o]=g.useState(""),[a,i]=g.useState(""),s=async()=>{a&&(await t({id:r,content:a}),o(""),i(""))};return h.jsxs("div",{className:"min-w-80",children:[h.jsxs("div",{className:"flex flex-col space-y-1.5 mt-3",children:[h.jsx(Ge,{htmlFor:"name",children:n("vector_database_node.add_text.id")}),h.jsx(ln,{value:r,disabled:e,onChange:c=>o(c.target.value||""),placeholder:n("vector_database_node.add_text.id_placeholder"),className:"mb-4"}),h.jsxs(Ge,{htmlFor:"name",children:[n("vector_database_node.add_text.content")," ",h.jsx("span",{className:"text-red-600",children:"*"})]}),h.jsx(ao,{value:a,disabled:e,onChange:c=>i(c.target.value||""),placeholder:n("vector_database_node.add_text.content_placeholder")})]}),h.jsx("div",{className:"flex justify-between mt-6",children:h.jsx(Mn,{loading:e,disabled:!(a!=null&&a.length),onClick:s,className:"w-full",children:n("vector_database_node.add_text.add")})})]})});function Lbe({accept:e,maxSize:t}){const{t:n}=Pe("atoms"),[r,o]=g.useState(""),[a,i]=g.useState(""),s=g.useRef(null),[c,l]=g.useState(0),u=f=>{var y;const p=(y=f.target.files)==null?void 0:y[0];d(p)},d=f=>{if(i(""),f){if(t&&f.size>t*1024*1024){i(n("file_upload_input.errors.max_size",{maxSize:t,fileSize:(f.size/1024/1024).toFixed(2)}));return}const p=e==null?void 0:e.split(",").map(y=>y.replace(".","").trim());if(e&&!f.type.match(e.replace("/*",""))&&!(p!=null&&p.some(y=>f.type.includes(y)))){i(n("file_upload_input.errors.accept",{accept:e}));return}return l(f.size),o(f.name),f}};return{fileName:r,error:a,fileInputRef:s,handleFileSelect:u,validateAndSetFile:d,clearFile:()=>{o(""),i(""),l(0),s.current&&(s.current.value="")},fileSize:c}}function Fbe({file:e,setFile:t,loading:n,progress:r,fileOptions:o}){const{toast:a}=en(),{t:i}=Pe("atoms"),[s,c]=g.useState(!1),{fileName:l,fileInputRef:u,clearFile:d,error:f,validateAndSetFile:p,fileSize:y}=Lbe({accept:(o==null?void 0:o.accept)||"image/*",maxSize:(o==null?void 0:o.maxSize)||3});g.useEffect(()=>{e||d()},[d,e]),g.useEffect(()=>{f&&a({title:f,variant:"destructive"})},[f,a]);function m(w){const j=p(w);j&&t(j)}function v(w){w.preventDefault(),c(!1);const j=w.dataTransfer.files[0];j&&m(j)}function b(w){var E;const j=(E=w.target.files)==null?void 0:E[0];j&&m(j)}function x(){d(),t(void 0)}const _=g.useMemo(()=>{if(!e)return h.jsx("div",{className:"w-16 h-16 rounded-lg bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center",children:h.jsx(de,{name:"file-text",className:"w-8 h-8 text-zinc-400"})});const w=e.type.startsWith("image/");return h.jsx("div",{className:"relative w-16 h-16 rounded-lg overflow-hidden",children:w?h.jsx("img",{src:URL.createObjectURL(e),alt:"Preview",className:"w-full h-full object-cover"}):h.jsx(de,{className:"w-14 h-14",name:"file-text"})})},[e]);return h.jsx(h.Fragment,{children:h.jsxs("div",{className:Q("relative group cursor-pointer","rounded-lg border-2 border-dashed","transition-colors duration-200",s?"border-indigo-500 bg-indigo-50/50 dark:bg-indigo-500/10":"border-zinc-200 dark:border-zinc-800"),onDragOver:w=>{w.preventDefault(),c(!0)},onDragLeave:()=>c(!1),onDrop:v,onClick:()=>{var w;return(w=u.current)==null?void 0:w.click()},onKeyDown:w=>{var j;(w.key==="Enter"||w.key===" ")&&(w.preventDefault(),(j=u.current)==null||j.click())},"aria-label":"Upload file",children:[h.jsx("input",{ref:u,type:"file",disabled:n||!!(r&&r<1),accept:(o==null?void 0:o.accept)||"image/*",onChange:b,className:"hidden"}),h.jsx("div",{className:"p-8 space-y-4",children:l?h.jsxs("div",{className:"flex items-center gap-4",children:[_,h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsxs("p",{className:"text-sm font-medium truncate",children:[l||"No file selected"," ",h.jsx("span",{className:"text-xs text-zinc-500 leading-5",children:y?`(${(y/1024/1024).toFixed(2)} MB)`:""})]}),r&&r<1?h.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[h.jsxs("p",{children:[(r*100).toFixed(2)," %"]}),h.jsx("div",{className:"h-1 flex-1 bg-zinc-100 dark:bg-zinc-800 rounded-full overflow-hidden items-center flex",children:h.jsx("div",{className:"h-full bg-indigo-500 transition-all duration-200",style:{width:`${r*100}%`}})})]}):void 0]}),h.jsx("button",{type:"button",disabled:n||!!(r&&r<1),onClick:w=>{w.stopPropagation(),x()},className:"p-1 hover:bg-zinc-100 dark:hover:bg-zinc-800 rounded",children:h.jsx(de,{name:"x",className:"w-5 h-5 text-zinc-400"})}),r&&r<1?h.jsx(Jf,{className:"rounded-lg"}):void 0]}):h.jsxs("div",{className:"flex flex-col items-center gap-2",children:[h.jsx(de,{name:"upload",className:"w-8 h-8 text-zinc-400 dark:text-zinc-500"}),h.jsx("p",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:i("file_upload_input.drop_file")})]})})]})})}function Bbe({onFileSubmit:e,fileOptions:t,progress:n,loading:r}){const{t:o}=Pe("flows"),[a,i]=g.useState(),s=async()=>{a&&(await e(a),i(void 0))};return h.jsxs("div",{className:"w-full max-w-md space-y-2 mt-4",children:[h.jsx("div",{className:"mb-6",children:h.jsx(Fbe,{progress:n,loading:r,fileOptions:t,setFile:i,file:a})}),h.jsx(Mn,{loading:r,disabled:!a,onClick:s,className:"w-full mt-4",children:o("vector_database_node.add_file.index")})]})}const $be=g.memo(e=>{var j;const{t}=Pe("flows"),[n,r]=g.useState(0),[o,a]=g.useState("search"),i=Yt(e.id),{id:s,data:c,isConnectable:l}=e,{loading:u,similaritySearchWithScore:d,indexData:f}=Tbe(s),p=sn(Sbe),y=sn(Mbe);Nbe(s);const m=g.useCallback(async(...E)=>{i&&await f(...E)},[f,i]),v=g.useCallback(async(E,S)=>{const O=E.trim(),N=await d(O,{k:S});if(N!=null&&N.length)return N},[d]),b=g.useCallback(E=>{p.show({source:i,documents:E.map(([S])=>S)})},[p,i]),x=g.useCallback(async()=>{y.show({source:i})},[y,i]),_=g.useCallback(async E=>{if(E.type.includes("text")||E.type.includes("txt")){const S=new FileReader;S.onload=async O=>{var P;const N=(P=O.target)==null?void 0:P.result;await m({content:N})},S.readAsText(E)}else if(E.type.endsWith("pdf")){const S=new Blob([E],{type:"application/pdf"}),O=await new _be(S,{pdfjs:async()=>{const N=await qt(()=>import("./pdf.min-DLpWDy8j.js").then(async P=>(await P.__tla,P)),__vite__mapDeps([13,1,2,3,4,5,6]));return await qt(()=>import("./pdf.worker.min-DMaI4WcM.js").then(async P=>(await P.__tla,P)),__vite__mapDeps([14,1,2,3,4,5,6])),N.GlobalWorkerOptions.workerSrc=new URL("pdfjs-dist/build/pdf.worker.min.js",import.meta.url).toString(),N},parsedItemSeparator:" "}).load();await m({documents:O},{onProgressReport:N=>{r((N.handled+N.handling)/N.total)}})}},[m]),w=g.useMemo(()=>{switch(o){case"search":return h.jsx($s,{value:"search",children:h.jsx(Ibe,{loading:u,onSimilaritySearch:v,onCreatePrompt:b,onCreateRetriever:x})});case"new":return h.jsx($s,{className:"min-w-80",value:"new",children:h.jsx(Dbe,{loading:u,onCreateData:m})});case"file":return h.jsx($s,{value:"file",children:h.jsx(Bbe,{loading:u,progress:n,onFileSubmit:_,fileOptions:{accept:".pdf,.txt,.text",maxSize:1}})})}},[m,b,x,_,v,u,o,n]);return h.jsxs("div",{className:"min-w-72 max-w-md",children:[h.jsx(Je,{type:"target",position:fe.Top,isConnectable:l}),h.jsxs("div",{className:"max-w-full",children:[h.jsx(nn,{id:s}),h.jsxs(xo,{className:"flex justify-center",variant:"default",children:[h.jsx(de,{size:24,name:"database-zap"}),h.jsxs("div",{className:"ml-2 max-w-full",children:[h.jsx(wo,{children:`${((j=c.entity)==null?void 0:j.name)||""}`}),h.jsxs(V9,{value:o,onValueChange:a,defaultValue:"search",className:"w-full mt-4",children:[h.jsxs(Zj,{className:"grid w-full grid-cols-3",children:[h.jsx(Bs,{value:"search",children:t("vector_database_node.search")}),h.jsx(Bs,{value:"new",children:t("vector_database_node.text")}),h.jsx(Bs,{value:"file",children:t("vector_database_node.file")})]}),w]})]})]})]}),h.jsx(Je,{type:"source",position:fe.Bottom,id:"a",isConnectable:l})]})}),zbe={embedding:32},Vbe=g.memo(e=>{var a,i,s;const{id:t,data:n,isConnectable:r}=e,o=g.useMemo(()=>{var u;if(!((u=n==null?void 0:n.entity)!=null&&u.jsonl))return{headers:[],rows:[]};const c=gE(n.entity.headers||""),l=S$(n.entity.jsonl);return{headers:c,rows:l.map(d=>{try{return JSON.parse(d)}catch{return[]}})}},[(a=n==null?void 0:n.entity)==null?void 0:a.jsonl,n.entity.headers]);return h.jsxs("div",{className:"min-w-80",children:[h.jsx(Je,{type:"target",position:fe.Top,isConnectable:r}),h.jsxs("div",{children:[h.jsx(nn,{id:t}),h.jsxs(At,{className:"min-w-32 min-h-16 p-4",children:[h.jsx(fn,{className:"!p-0",children:h.jsxs("div",{className:"pt-2 flex !flex-row",children:[h.jsx(de,{name:"file-json",className:"mr-2"}),h.jsxs(Ge,{className:"!font-medium leading-none tracking-tight pr-8",children:[ae.JSONLData," ",(i=o==null?void 0:o.rows)!=null&&i.length?`(${((s=o==null?void 0:o.rows)==null?void 0:s.length)||0})`:""]})]})}),h.jsx(pn,{className:"pb-0",children:h.jsx(Y9,{data:o.rows,headers:o.headers,limitLengthByColumns:zbe})})]})]}),h.jsx(Je,{type:"source",position:fe.Bottom,id:"a",isConnectable:r})]})}),X9=60,G9=140,Ube=Vr("supports-backdrop-blur:bg-white/10 supports-backdrop-blur:dark:bg-black/10 mx-auto flex h-[58px] w-max gap-2 rounded-lg border p-2 backdrop-blur-md"),Q9=V.forwardRef(({className:e,children:t,magnification:n=X9,distance:r=G9,direction:o="bottom",...a},i)=>{const s=Lm(1/0),c=()=>V.Children.map(t,l=>V.isValidElement(l)&&l.type===ju?V.cloneElement(l,{...l.props,mouseX:s,magnification:n,distance:r}):l);return h.jsx(Mu.div,{ref:i,onMouseMove:l=>s.set(l.pageX),onMouseLeave:()=>s.set(1/0),...a,className:Q(Ube({className:e}),{"items-start":o==="top","items-center":o==="middle","items-end":o==="bottom"}),children:c()})});Q9.displayName="Dock";const ju=({magnification:e=X9,distance:t=G9,mouseX:n,className:r,children:o,...a})=>{const i=g.useRef(null),s=vS(n||new pwe,u=>{var f;const d=((f=i.current)==null?void 0:f.getBoundingClientRect())??{x:0,width:0};return u-d.x-d.width/2}),c=vS(s,[-t,0,t],[40,e,40]),l=H$(c,{mass:.1,stiffness:150,damping:12});return h.jsx(Mu.div,{ref:i,style:{width:l},className:Q("flex aspect-square cursor-pointer items-center justify-center rounded-full",r),...a,children:o})};ju.displayName="DockIcon";const Hbe={[ae.Shape]:{width:100,height:100},[ae.CircleShape]:{width:100,height:100},[ae.TriangleShape]:{width:100,height:100},[ae.EditorApp]:{width:1240,height:400}},Wbe=e=>{const t=Yt(e),n=pt(s=>s.currentSession),[r,o]=g.useState(!1),a=Ae(s=>s.createOrUpdateFlowNode),i=g.useCallback(async s=>{var c,l,u;try{if(o(!0),t&&(n==null?void 0:n.id)){const d=((c=t.position)==null?void 0:c.x)||0,f=(((l=t.position)==null?void 0:l.y)||0)+(((u=t.measured)==null?void 0:u.height)||0),p=await ue("FlowNodeData").save({data:{},session_id:n.id});if(!p)throw new Error("Failed to save node data");if(!await a({node_type:s,data:{},source_id:p.id,source_type:"FlowNodeData",x:d,y:f+20,...Hbe[s]||{}}))throw new Error("Failed to save node")}}finally{o(!1)}},[a,n==null?void 0:n.id,t]);return{loading:r,createNode:i}},nE={applications:[{key:ae.EditorApp,icon:"notebook-text",label:"application_bar.note"},{key:ae.VSLiteApp,icon:"square-terminal",label:"application_bar.vslite"}],shapes:[{key:ae.Shape,icon:"square",label:"application_bar.square"},{key:ae.CircleShape,icon:"circle",label:"application_bar.circle"},{key:ae.TriangleShape,icon:"triangle",label:"application_bar.triangle"}],old:[{key:ae.CodeContainerApp,icon:"file-code-2",label:"application_bar.code_editor"}]},qbe=g.memo(e=>{const{t}=Pe("flows"),{toast:n}=en(),{loading:r,createNode:o}=Wbe(e.id),a=async i=>{try{if(r)return;await o(i)}catch{n({description:t("application_bar.errors.add_node_failed"),variant:"destructive"})}};return h.jsx(HO,{children:h.jsxs(Q9,{direction:"middle",children:[nE.applications.map(i=>h.jsx(ju,{children:h.jsxs(jd,{children:[h.jsx(Ed,{children:h.jsx(de,{onClick:()=>a(i.key),name:i.icon})}),h.jsx(jc,{children:h.jsx("p",{children:t(i.label)})})]})},i.label)),h.jsx(hc,{orientation:"vertical",className:"h-full"}),nE.shapes.map(i=>h.jsx(ju,{children:h.jsxs(jd,{children:[h.jsx(Ed,{children:h.jsx(de,{onClick:()=>a(i.key),name:i.icon})}),h.jsx(jc,{children:h.jsx("p",{children:t(i.label)})})]})},i.label)),h.jsx(hc,{orientation:"vertical",className:"h-full"}),nE.old.map(i=>h.jsx(ju,{children:h.jsxs(jd,{children:[h.jsx(Ed,{children:h.jsx(de,{onClick:()=>a(i.key),name:i.icon})}),h.jsx(jc,{children:h.jsx("p",{children:t(i.label)})})]})},i.label))]})})}),kh=g.memo(e=>{const{lineClassName:t,handleClassName:n,...r}=e;return h.jsx(Pte,{lineClassName:Q("!border-1.5",t),handleClassName:Q("!w-2 !h-2 !border-2 !rounded-full",n),...r})}),Ybe=e=>{const t=Ae(r=>r.createOrUpdateFlowEdge),n=g.useCallback(async({edgeId:r,source:o,target:a,connection:i})=>{try{if([ae.CircleShape,ae.TriangleShape].includes(o==null?void 0:o.type)&&(a==null?void 0:a.type)===ae.Shape){await t({source:i.source,target:i.target,sourceHandle:i.sourceHandle,targetHandle:i.targetHandle});return}return{deleteEdgeId:r}}catch{return{deleteEdgeId:r}}},[t]);bn(e,n)},Kbe=g.memo(e=>{const{id:t,selected:n,isConnectable:r}=e;return Ybe(t),h.jsxs(h.Fragment,{children:[h.jsx(kh,{isVisible:!!n,minWidth:40,minHeight:40}),h.jsx(Je,{type:"target",position:fe.Top,isConnectable:r}),h.jsx("div",{className:"min-w-10 min-h-10 w-full h-full bg-border border",children:h.jsx(nn,{id:t})}),h.jsx(Je,{type:"source",position:fe.Bottom,isConnectable:r})]})}),Xbe=e=>{const t=Ae(r=>r.createOrUpdateFlowEdge),n=g.useCallback(async({edgeId:r,source:o,target:a,connection:i})=>{try{if([ae.Shape,ae.TriangleShape].includes(o==null?void 0:o.type)&&(a==null?void 0:a.type)===ae.CircleShape){await t({source:i.source,target:i.target,sourceHandle:i.sourceHandle,targetHandle:i.targetHandle});return}return{deleteEdgeId:r}}catch{return{deleteEdgeId:r}}},[t]);bn(e,n)},Gbe=g.memo(e=>{const{id:t,selected:n,isConnectable:r}=e;return Xbe(t),h.jsxs(h.Fragment,{children:[h.jsx(kh,{isVisible:!!n,minWidth:40,minHeight:40}),h.jsx(Je,{type:"target",position:fe.Top,isConnectable:r}),h.jsx("div",{className:"min-w-10 min-h-10 w-full h-full bg-border rounded-full border",children:h.jsx(nn,{id:t})}),h.jsx(Je,{type:"source",position:fe.Bottom,isConnectable:r})]})}),Qbe=e=>{const t=Ae(r=>r.createOrUpdateFlowEdge),n=g.useCallback(async({edgeId:r,source:o,target:a,connection:i})=>{try{if([ae.CircleShape,ae.Shape].includes(o==null?void 0:o.type)&&(a==null?void 0:a.type)===ae.TriangleShape){await t({source:i.source,target:i.target,sourceHandle:i.sourceHandle,targetHandle:i.targetHandle});return}return{deleteEdgeId:r}}catch{return{deleteEdgeId:r}}},[t]);bn(e,n)},Jbe=g.memo(e=>{const{id:t,selected:n,width:r,height:o,isConnectable:a}=e;return Qbe(t),h.jsxs(h.Fragment,{children:[h.jsx(kh,{isVisible:!!n,minWidth:40,minHeight:40}),h.jsx(Je,{type:"target",position:fe.Top,isConnectable:a}),h.jsx("div",{className:"w-0 h-0 border-l-transparent border-r-transparent border-b-border",style:{borderLeftWidth:(r||0)/2,borderRightWidth:(r||0)/2,borderBottomWidth:o||0}}),h.jsx(nn,{id:t,className:"absolute top-0 right-0"}),h.jsx(Je,{type:"source",position:fe.Bottom,isConnectable:a})]})}),Zbe=e=>{const t=Ae(r=>r.createOrUpdateFlowEdge),n=g.useCallback(async({edgeId:r,source:o,target:a,connection:i})=>{try{if((o==null?void 0:o.type)===ae.LLM&&(a==null?void 0:a.type)===ae.EditorApp){await t({source:i.source,target:i.target,sourceHandle:i.sourceHandle,targetHandle:i.targetHandle});return}return{deleteEdgeId:r}}catch{return{deleteEdgeId:r}}},[t]);bn(e,n)},exe=e=>{const t=Yt(e),{t:n}=Pe("flows"),r=g.useRef(null),{toast:o}=en(),{getNode:a,getHandleConnections:i}=Un(),s=Zn(l=>l.stream),c=g.useCallback(async l=>{t&&(clearTimeout(r.current),r.current=setTimeout(async()=>{await ue("FlowNode").update(t.id,{data:l})},150))},[t]);return{createMessage:g.useCallback(async(l,u)=>{if(t){const d=i({nodeId:e,type:"target"}).find(p=>{var y;return((y=a(p.source))==null?void 0:y.type)===ae.LLM}),f=d?a(d==null?void 0:d.source):void 0;if(f){if(f.data.status!==Mt.Loaded)return o({variant:"destructive",description:n("editor_node.errors.llm_not_loaded_yet")})}else return o({variant:"destructive",description:n("editor_node.errors.llm_not_found")});try{const p=s(l);if(!p)throw new Error("Stream is not supported");const y=[];for await(const m of p)m&&Array.isArray(m)&&(y.push(...m.map(v=>v.content)),m!=null&&m.length&&(u==null||u(m.map(v=>v.content).join(""))));return y.join("")}catch(p){if(p instanceof Error&&p.message.includes("LLM_NOT_LOADED_YET"))return o({title:n("editor_node.errors.llm_not_loaded_yet")});o({variant:"destructive",title:n("editor_node.errors.stream_message_failed")})}}},[t,i,e,a,o,n,s]),updateEditorContent:c}},txe=g.lazy(()=>qt(()=>import("./PlateEditor-DaR2jKnM.js").then(async e=>(await e.__tla,e)),__vite__mapDeps([15,1,2,10,16,4,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,3,5,6,105]))),nxe=g.memo(e=>{var c;const{id:t,data:n,selected:r,isConnectable:o}=e;Zbe(t);const{createMessage:a,updateEditorContent:i}=exe(t),s=g.useCallback(l=>{i(l)},[i]);return h.jsxs("div",{className:"w-full min-w-[1240px] h-full",children:[h.jsx(kh,{isVisible:!!r,minWidth:1240,minHeight:400}),h.jsx(Je,{type:"target",position:fe.Top,isConnectable:o}),h.jsxs("div",{className:"min-w-10 min-h-10 w-full h-full rounded-lg border bg-background",children:[h.jsx(nn,{className:"!z-[100]",id:t}),h.jsx(g.Suspense,{fallback:h.jsx("div",{className:"h-full w-ful rounded-lg flex justify-center items-center",children:h.jsx(de,{name:"loader-circle",className:"animate-spin"})}),children:h.jsx("div",{className:"h-full w-ful rounded-lg","data-registry":"plate",children:h.jsx(txe,{defaultValue:(c=n==null?void 0:n.flowNode)==null?void 0:c.data,onValueChange:s,copilotStream:a})})})]}),h.jsx(Je,{type:"source",position:fe.Bottom,isConnectable:o})]})}),rxe=e=>{const t=g.useCallback(async({edgeId:n})=>{try{return{deleteEdgeId:n}}catch{return{deleteEdgeId:n}}},[]);bn(e,t)},oxe=g.memo(e=>{var i,s;const{id:t,data:n,isConnectable:r}=e,{t:o}=Pe("flows");rxe(t);let a="";switch((i=n.entity)==null?void 0:i.placeholder_type){case"VECTOR_DATABASE_RETREIVER":a=o("placeholder_node.vector_database_retriever");break}return h.jsxs("div",{children:[h.jsx(Je,{type:"target",position:fe.Top,isConnectable:r}),h.jsxs(xo,{className:"flex justify-center max-w-80",variant:"default",children:[h.jsx(nn,{id:t}),h.jsx(de,{name:"land-plot",className:"w-7 h-7"}),h.jsxs("div",{className:"ml-2 pr-4",children:[h.jsx(wo,{children:`${((s=n.entity)==null?void 0:s.placeholder)||""}`}),h.jsx(ns,{children:a?h.jsx(tn,{children:a}):void 0})]})]}),h.jsx(Je,{type:"source",position:fe.Bottom,id:"a",isConnectable:r})]})}),axe=g.lazy(()=>qt(()=>import("./CodeContainerApp-mxBwxCtz.js").then(async e=>(await e.__tla,e)).then(e=>e.C),__vite__mapDeps([106,1,2,104,107,9,108,4,109,110]))),ixe=g.memo(e=>{const{id:t,isConnectable:n}=e;return h.jsxs("div",{className:"w-[1380px] h-[600px]",children:[h.jsx(Je,{type:"target",position:fe.Top,isConnectable:n}),h.jsxs("div",{className:"w-full h-full rounded-lg border bg-card overflow-hidden",children:[h.jsx(nn,{id:t}),h.jsx(g.Suspense,{fallback:h.jsx("div",{className:"h-full w-full flex justify-center items-center",children:h.jsx(de,{name:"loader-circle",className:"animate-spin"})}),children:h.jsx(axe,{...e})})]}),h.jsx(Je,{type:"source",position:fe.Bottom,isConnectable:n})]})});tS=function(e,t=""){const n=[];for(const[r,o]of Object.entries(e)){const a=Pu(),i=[t,r].filter(Boolean).join("/"),s="file"in o&&"contents"in o.file?o.file:void 0,c={id:a,isSelectable:!0,content:typeof(s==null?void 0:s.contents)=="string"?s.contents:void 0,file:i,name:r,children:[]};"directory"in o&&(c.children=tS(o.directory,i)),n.push(c)}return n},nS=function(e){const t=e.trim().split(`
`),n={};return t.forEach(r=>{const{file:o,content:a}=JSON.parse(r),i=o.split("/");let s=n;for(let c=0;c<i.length;c++){const l=i[c];c===i.length-1?s[l]={file:{contents:a}}:(s[l]||(s[l]={directory:{}}),s=s[l].directory)}}),n},JE=function(e){const t=[];function n(r,o=[]){for(const[a,i]of Object.entries(r))if("file"in i){const s=[...o,a].join("/");if("contents"in i.file){const c=i.file.contents;t.push(JSON.stringify({file:s,content:c}))}}else"directory"in i&&n(i.directory,[...o,a])}return n(e),t.join(`
`)},rS=function(e,t,n){const r=t.replace(/^\.\//,"").split("/");let o=e;for(let a=0;a<r.length;a++){const i=r[a];if(a===r.length-1)i in o&&"file"in o[i]?o[i].file.contents=n:jr(`Path "${t}" is not a file.`);else if(i in o&&"directory"in o[i])o=o[i].directory;else return jr(`Path "${t}" does not exist.`),e}return e};let J9,Z9,e$,t$,n$,r$;J9=["vite-vue","shadcn-react-vite"],Z9=async e=>{switch(e){case"vite-vue":return qt(()=>import("./vite-vue-QLmMXcee.js"),[]).then(t=>t.VITE_VUE_BASE);case"shadcn-react-vite":return qt(()=>import("./shadcn-react-vite-eg07VqhU.js"),[]).then(t=>t.SHADCN_REACT_VITE_BASE);default:throw new Error(`Unknown source base: ${e}`)}},oS=g.memo(({className:e,onUpdateSourceBase:t})=>{const{t:n}=Pe("components"),[r,o]=g.useState();return h.jsxs(At,{className:Q("mw-full",e),children:[h.jsx(fn,{className:"p-4",children:h.jsx(_n,{children:n("add_source_base.title")})}),h.jsx(pn,{className:"p-4",children:h.jsxs("div",{className:"flex items-center justify-center w-full h-full flex-col",children:[h.jsxs(yo,{onValueChange:a=>o(a),children:[h.jsx(Rr,{className:"w-full mb-4",children:h.jsx(go,{placeholder:n("add_source_base.source_base_select_placeholder")})}),h.jsx(Ir,{children:J9.map(a=>h.jsx(En,{value:`${a}`,children:n(`add_source_base.sourcebases.${a.toLowerCase()}`)},`${a}`))})]}),h.jsx(ut,{className:"w-full",onClick:async()=>r&&t(await Z9(r)),children:n("add_source_base.update_source")})]})})]})}),e$=e=>(Yt(e),{updateCodeContainerData:g.useCallback(async(t,n)=>{await ue("FlowNode").update(t,{raw:JE(n)})},[])}),t$=g.lazy(()=>qt(()=>import("./index-gWENOuEU.js").then(async e=>(await e.__tla,e)),__vite__mapDeps([111,1,2,104,107,3,4,5,6,112]))),n$=g.memo(e=>{var l,u,d;const{id:t,isConnectable:n,data:r}=e,[o,a]=g.useState((l=r==null?void 0:r.flowNode)!=null&&l.raw?nS(r.flowNode.raw):void 0),{updateCodeContainerData:i}=e$(t),s=g.useCallback(async f=>{var p,y;(p=r==null?void 0:r.flowNode)!=null&&p.id&&(await i((y=r==null?void 0:r.flowNode)==null?void 0:y.id,f),a(f))},[(u=r==null?void 0:r.flowNode)==null?void 0:u.id,i]),c=g.useCallback(async(f,p)=>{a(y=>{var v;if(!y)return y;const m=rS(y,f,p);return i((v=r==null?void 0:r.flowNode)==null?void 0:v.id,m),m})},[(d=r==null?void 0:r.flowNode)==null?void 0:d.id,i]);return o?h.jsxs("div",{className:"w-[1380px] h-[600px]",children:[h.jsx(Je,{type:"target",position:fe.Top,isConnectable:n}),h.jsxs("div",{className:"w-full h-full rounded-lg border bg-card overflow-hidden",children:[h.jsx(nn,{id:t,className:"z-50"}),h.jsx(g.Suspense,{fallback:h.jsx("div",{className:"h-full w-full flex justify-center items-center",children:h.jsx(de,{name:"loader-circle",className:"animate-spin"})}),children:h.jsx(t$,{fileSystemTree:o,onUpdateFileContent:c})})]}),h.jsx(Je,{type:"source",position:fe.Bottom,isConnectable:n})]}):h.jsx("div",{className:"h-full flex justify-center items-center",children:h.jsx(oS,{className:"w-64",onUpdateSourceBase:s})})}),r$={[ae.LLM]:f5,[ae.Toolbox]:Sae,[ae.Thread]:y5,[ae.Message]:Aae,[ae.Prompt]:Rae,[ae.SessionInfo]:ube,[ae.Schema]:mbe,[ae.CSVData]:ybe,[ae.ToolDefinition]:vbe,[ae.DefaultEmbeddingModel]:xbe,[ae.VectorDatabase]:$be,[ae.JSONLData]:Vbe,[ae.ApplicationBar]:qbe,[ae.Shape]:Kbe,[ae.CircleShape]:Gbe,[ae.TriangleShape]:Jbe,[ae.EditorApp]:nxe,[ae.PlaceHolder]:oxe,[ae.CodeContainerApp]:ixe,[ae.VSLiteApp]:n$};function sxe(e,t=[]){let n=[];function r(a,i){const s=g.createContext(i),c=n.length;n=[...n,i];function l(d){const{scope:f,children:p,...y}=d,m=(f==null?void 0:f[e][c])||s,v=g.useMemo(()=>y,Object.values(y));return h.jsx(m.Provider,{value:v,children:p})}function u(d,f){const p=(f==null?void 0:f[e][c])||s,y=g.useContext(p);if(y)return y;if(i!==void 0)return i;throw new Error(`\`${d}\` must be used within \`${a}\``)}return l.displayName=a+"Provider",[l,u]}const o=()=>{const a=n.map(i=>g.createContext(i));return function(i){const s=(i==null?void 0:i[e])||a;return g.useMemo(()=>({[`__scope${e}`]:{...i,[e]:s}}),[i,s])}};return o.scopeName=e,[r,cxe(o,...t)]}function cxe(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(o){const a=r.reduce((i,{useScope:s,scopeName:c})=>{const l=s(o)[`__scope${c}`];return{...i,...l}},{});return g.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return n.scopeName=t.scopeName,n}var lxe="Toggle",rE=g.forwardRef((e,t)=>{const{pressed:n,defaultPressed:r=!1,onPressedChange:o,...a}=e,[i=!1,s]=Zt({prop:n,onChange:o,defaultProp:r});return h.jsx(Oe.button,{type:"button","aria-pressed":i,"data-state":i?"on":"off","data-disabled":e.disabled?"":void 0,...a,ref:t,onClick:he(e.onClick,()=>{e.disabled||s(!i)})})});rE.displayName=lxe;let oE,Ga,aE,iE,Ph;oE=rE,Ga="ToggleGroup",[aE,C$]=sxe(Ga,[Hr]),iE=Hr(),Ph=V.forwardRef((e,t)=>{const{type:n,...r}=e;if(n==="single"){const o=r;return h.jsx(uxe,{...o,ref:t})}if(n==="multiple"){const o=r;return h.jsx(dxe,{...o,ref:t})}throw new Error(`Missing prop \`type\` expected on \`${Ga}\``)}),Ph.displayName=Ga;var[o$,a$]=aE(Ga),uxe=V.forwardRef((e,t)=>{const{value:n,defaultValue:r,onValueChange:o=()=>{},...a}=e,[i,s]=Zt({prop:n,defaultProp:r,onChange:o});return h.jsx(o$,{scope:e.__scopeToggleGroup,type:"single",value:i?[i]:[],onItemActivate:s,onItemDeactivate:V.useCallback(()=>s(""),[s]),children:h.jsx(i$,{...a,ref:t})})}),dxe=V.forwardRef((e,t)=>{const{value:n,defaultValue:r,onValueChange:o=()=>{},...a}=e,[i=[],s]=Zt({prop:n,defaultProp:r,onChange:o}),c=V.useCallback(u=>s((d=[])=>[...d,u]),[s]),l=V.useCallback(u=>s((d=[])=>d.filter(f=>f!==u)),[s]);return h.jsx(o$,{scope:e.__scopeToggleGroup,type:"multiple",value:i,onItemActivate:c,onItemDeactivate:l,children:h.jsx(i$,{...a,ref:t})})});Ph.displayName=Ga;var[fxe,pxe]=aE(Ga),i$=V.forwardRef((e,t)=>{const{__scopeToggleGroup:n,disabled:r=!1,rovingFocus:o=!0,orientation:a,dir:i,loop:s=!0,...c}=e,l=iE(n),u=Io(i),d={role:"group",dir:u,...c};return h.jsx(fxe,{scope:n,rovingFocus:o,disabled:r,children:o?h.jsx(Xs,{asChild:!0,...l,orientation:a,dir:u,loop:s,children:h.jsx(Oe.div,{...d,ref:t})}):h.jsx(Oe.div,{...d,ref:t})})}),Ah="ToggleGroupItem",s$=V.forwardRef((e,t)=>{const n=a$(Ah,e.__scopeToggleGroup),r=pxe(Ah,e.__scopeToggleGroup),o=iE(e.__scopeToggleGroup),a=n.value.includes(e.value),i=r.disabled||e.disabled,s={...e,pressed:a,disabled:i},c=V.useRef(null);return r.rovingFocus?h.jsx(Gs,{asChild:!0,...o,focusable:!i,active:a,ref:c,children:h.jsx(sE,{...s,ref:t})}):h.jsx(sE,{...s,ref:t})});s$.displayName=Ah;let sE;sE=V.forwardRef((e,t)=>{const{__scopeToggleGroup:n,value:r,...o}=e,a=a$(Ah,n),i={role:"radio","aria-checked":e.pressed,"aria-pressed":void 0},s=a.type==="single"?i:void 0;return h.jsx(rE,{...s,...o,ref:t,onPressedChange:c=>{c?a.onItemActivate(r):a.onItemDeactivate(r)}})}),Uh=Ph,Hh=s$;const c$=Vr("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 gap-2",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground"},size:{default:"h-10 px-3 min-w-10",sm:"h-9 px-2.5 min-w-9",lg:"h-11 px-5 min-w-11"}},defaultVariants:{variant:"default",size:"default"}}),hxe=g.forwardRef(({className:e,variant:t,size:n,...r},o)=>h.jsx(oE,{ref:o,className:Q(c$({variant:t,size:n,className:e})),...r}));hxe.displayName=oE.displayName;const l$=g.createContext({size:"default",variant:"default"}),u$=g.forwardRef(({className:e,variant:t,size:n,children:r,...o},a)=>h.jsx(Uh,{ref:a,className:Q("flex items-center justify-center gap-1",e),...o,children:h.jsx(l$.Provider,{value:{variant:t,size:n},children:r})}));u$.displayName=Uh.displayName;const d$=g.forwardRef(({className:e,children:t,variant:n,size:r,...o},a)=>{const i=g.useContext(l$);return h.jsx(Hh,{ref:a,className:Q(c$({variant:i.variant||n,size:i.size||r}),e),...o,children:t})});d$.displayName=Hh.displayName;function mxe(){const e=Ve(t=>`x: ${t.transform[0].toFixed(2)}, y: ${t.transform[1].toFixed(2)}, zoom: ${t.transform[2].toFixed(2)}`);return h.jsx("div",{children:e})}function yxe({change:e}){var r,o,a,i;const t="id"in e?e.id:"-",{type:n}=e;return h.jsxs("div",{className:"mb-3",children:[h.jsxs("div",{children:["node id: ",t]}),h.jsxs("div",{children:[n==="add"?JSON.stringify(e.item,null,2):null,n==="dimensions"?`dimensions: ${(r=e.dimensions)==null?void 0:r.width} \xD7 ${(o=e.dimensions)==null?void 0:o.height}`:null,n==="position"?`position: ${(a=e.position)==null?void 0:a.x.toFixed(1)}, ${(i=e.position)==null?void 0:i.y.toFixed(1)}`:null,n==="remove"?"remove":null,n==="select"?e.selected?"select":"unselect":null]})]})}function gxe({limit:e=20}){const[t,n]=g.useState([]),r=gt(),o=g.useCallback(i=>{n(s=>[...i,...s].slice(0,e))},[e]);g.useEffect(()=>(r.setState({onNodesChange:o}),()=>r.setState({onNodesChange:void 0})),[o,r]);const a=()=>h.jsx("div",{children:"No Changes Triggered"});return h.jsx(h.Fragment,{children:t.length===0?h.jsx(a,{}):t.map((i,s)=>h.jsx(yxe,{change:i},s))})}function vxe(){const{getInternalNode:e}=Un(),t=ate();return h.jsx(rte,{children:h.jsx("div",{className:"text-secondary-foreground",children:t.map(n=>{var a,i;const r=e(n.id);if(!r)return null;const o=r==null?void 0:r.internals.positionAbsolute;return h.jsx(bxe,{id:n.id,selected:!!n.selected,type:n.type||"default",position:n.position,absPosition:o,width:((a=n.measured)==null?void 0:a.width)??0,height:((i=n.measured)==null?void 0:i.height)??0,data:n.data},n.id)})})})}function bxe({id:e,type:t,selected:n,position:r,absPosition:o,width:a,height:i,data:s}){if(!a||!i)return null;const c=`translate(${o.x}px, ${o.y+i}px)`,l=`${r.x.toFixed(1)}, ${r.y.toFixed(1)}`,u=`${a} \xD7 ${i}`,d=n?"Selected":"Not Selected";return h.jsxs("div",{style:{position:"absolute",transform:c,width:a*2},className:"text-xs",children:[h.jsxs("div",{children:["id: ",e]}),h.jsxs("div",{children:["type: ",t]}),h.jsxs("div",{children:["selected: ",d]}),h.jsxs("div",{children:["position: ",l]}),h.jsxs("div",{children:["dimensions: ",u]}),h.jsxs("div",{children:["data: ",JSON.stringify(s,null,2)]})]})}function xxe({tools:e}){return h.jsx(Ui,{position:"top-left",className:"bg-card p-1 border rounded shadow-sm",children:h.jsx(u$,{type:"multiple",children:e.map(({active:t,setActive:n,label:r,value:o})=>h.jsx(d$,{value:o,onClick:()=>n(a=>!a),"aria-pressed":t,className:"bg-card text-card-foreground transition-colors duration-300 hover:bg-secondary hover:text-secondary-foreground",children:r},o))})})}function f$(){const[e,t]=g.useState(!1),[n,r]=g.useState(!1),[o,a]=g.useState(!1),i=[{active:e,setActive:t,label:"Node Inspector",value:"node-inspector"},{active:n,setActive:r,label:"Change Logger",value:"change-logger"},{active:o,setActive:a,label:"Viewport Logger",value:"viewport-logger"}];return h.jsxs(h.Fragment,{children:[h.jsx(xxe,{tools:i}),n&&h.jsx(Ui,{className:"text-xs p-5 bg-white rounded shadow-md overflow-y-auto max-h-[50%] mt-20",position:"bottom-right",children:h.jsx(gxe,{})}),e&&h.jsx(vxe,{}),o&&h.jsx(Ui,{position:"bottom-left",className:"text-secondary-foreground",children:h.jsx(mxe,{})})]})}f$.displayName="DevTools";const wxe=()=>{const e=g.useRef({}),t=g.useRef({}),n=Ae(P=>P.flowEdges),r=pt(P=>P.currentSession),o=Ae(P=>P.setNodes),a=Ae(P=>P.updateNodes),i=Ae(P=>P.updateEdges),s=Ae(P=>P.addConnectionToEdges),c=Ae(P=>P.reset),l=Ae(P=>P.findFlowEdges),u=Ae(P=>P.deleteFlowNode),d=Ae(P=>P.deleteFlowEdge),f=Ae(P=>P.updateFlowNode),p=Ae(P=>P.getNodes),y=Ae(P=>P.findFlowNodesWithSource),m=g.useRef(n),v=g.useRef(),[b,x]=g.useState({loading:!1});m.current=n;const _=g.useCallback(async(P,k)=>{try{v.current=P,c(),await(k==null?void 0:k())}catch{v.current=void 0}},[c]),w=g.useCallback(async P=>{try{if(!(r!=null&&r.id))return;x(A=>({...A,loading:!0}));const k=await y({...P,where:{...P.where,session_id:r.id}}),R=await l({where:[{source:mo(k.map(A=>A.id))},{target:mo(k.map(A=>A.id))}]});return{flowNodes:k,flowEdges:R}}finally{x(k=>({...k,loading:!1}))}},[y,l,r==null?void 0:r.id]),j=g.useCallback(async P=>{var k,R;for(const A of P)if("id"in A&&Object.values(yl).includes(A.id)&&A.type!=="remove")a([A]);else if(A.type==="position"&&A.position&&!isNaN(A.position.x)&&!isNaN(A.position.y)){a([A]);const C=A.position.x,M=A.position.y;clearTimeout(e.current[A.id]),e.current[A.id]=setTimeout(async()=>{e.current[A.id]=void 0,await f({id:A.id,x:C,y:M},{silent:!0})},200)}else if(A.type==="remove"){const C=(k=p([A.id]))==null?void 0:k[0];if(!(C!=null&&C.type)||Nne.includes(C.type))return;await u({id:A.id})}else if(A.type==="dimensions"&&A.dimensions&&!isNaN(A.dimensions.width)&&!isNaN(A.dimensions.height)){const C=(R=p([A.id]))==null?void 0:R[0];if(!(C!=null&&C.width)&&!(C!=null&&C.height))return;a([A]),clearTimeout(t.current[A.id]);const M=A.dimensions.width,T=A.dimensions.height;t.current[A.id]=setTimeout(async()=>{await f({id:A.id,width:M,height:T},{silent:!0})},200)}else A.type==="select"&&a([A])},[a,f,p,u]),E=g.useCallback(P=>{Promise.all(P.map(async k=>{if(k.type==="remove")return d({id:k.id})})),i(P)},[d,i]),S=g.useCallback(P=>{s(P)},[s]),O=g.useCallback(()=>{var P;(P=m.current)==null||P.length},[]),N=g.useCallback(P=>{o(k=>{var M,T;let R;if(typeof P=="function"?R=P(k):R=P,!R)return k;const A=k==null?void 0:k.find(I=>I.id===R.id),C={id:R.id,item:A?Rf(A,R):{...R,position:{x:((M=R.position)==null?void 0:M.x)||0,y:((T=R.position)==null?void 0:T.y)||0}},type:A?"replace":"add"};return Oa([C],k)})},[o]);return{syncEdges:O,initialFlow:_,loadingState:b,prepareFlowInfo:w,updateNodeChanges:j,updateEdgeChanges:E,updateOrCreateNode:N,currentSessionIdRef:v,updateEdgeConnection:S}},_xe=e=>{const t=pt(u=>{var d;return(d=u.currentSession)==null?void 0:d.id}),{loadingState:n,prepareFlowInfo:r,syncEdges:o,initialFlow:a,currentSessionIdRef:i}=e,s=Ae(u=>u.ready),c=Ae(u=>u.removeSyncNodeQueue),l=Ae(u=>u.removeSyncEdgeQueue);g.useLayoutEffect(()=>{},[t]),g.useEffect(()=>{n.loading||!s||!t||i.current===t||a(t,async()=>{await r({where:{session_id:t}})})},[a,r,n.loading,i,s,t]),g.useEffect(()=>{const u=Ae.subscribe(f=>f.syncNodeQueue,async(f,p)=>{var v;const y=p.map(b=>b.timestamp),m=f.filter(b=>!y.includes(b.timestamp));if(m.length){c(m.map(b=>b.timestamp));for(const b of m){const x=await r(b.query);switch(b.syncType){case"Thread":{const _=(v=x==null?void 0:x.flowNodes)==null?void 0:v.map(w=>{if(w.source_id&&w.source_type==="Thread")return w.source_id}).filter(Boolean);if(_!=null&&_.length){const w=await ue("Message").find({where:{thread_id:mo(_)}});await r({where:{source_type:"Message",source_id:mo(w.map(j=>j.id))}})}}break}}}}),d=Ae.subscribe(f=>f.syncEdgeQueue,async(f,p)=>{const y=p.map(v=>v.timestamp),m=f.filter(v=>!y.includes(v.timestamp));m.length&&(l(m.map(v=>v.timestamp)),o())});return()=>{u(),d()}},[r,l,c,o])},jxe=()=>{const[e,t]=g.useState(!0),n=wxe(),r=Zn(u=>u.selectedModel),o=g.useRef(r),a=Zn(u=>u.setInitProgressCallback),{updateOrCreateNode:i,updateNodeChanges:s,updateEdgeChanges:c,updateEdgeConnection:l}=n;return _xe(n),o.current=r,g.useEffect(()=>{const u=a==null?void 0:a(d=>{if(!o.current)return;const f=`${o.current}`;i(p=>{const y=p==null?void 0:p.find(m=>{var v;return(v=m.data)!=null&&v.entity&&typeof m.data.entity=="object"&&"name"in m.data.entity?m.data.entity.name===f:!1});if(y)return y.data.label=d.text,y.data.status=Mt.Loading,d.progress===100&&(y.data.label="",y.data.status=Mt.Loaded),y})});return()=>{u==null||u()}},[a,i]),g.useMemo(()=>({updateNodeChanges:s,updateEdgeChanges:c,initializing:e,setInitializing:t,updateEdgeConnection:l}),[s,c,e,t,l])},Exe=()=>{const e=Nu(l=>l.theme),t=Ae(l=>l.nodes),n=Ae(l=>l.edges),{updateNodeChanges:r,updateEdgeChanges:o,updateEdgeConnection:a}=jxe(),i=g.useCallback(l=>{r(l)},[r]),s=g.useCallback(l=>{o(l)},[o]),c=g.useCallback(l=>{a(l)},[a]);return h.jsxs(tte,{nodes:t,edges:n,nodeTypes:r$,onNodesChange:i,onEdgesChange:s,onConnect:c,panOnScroll:!0,panOnScrollMode:Ho.Free,colorMode:e,fitView:!0,children:[h.jsx(ute,{variant:ho.Dots,gap:24,size:1}),h.jsx(gte,{}),h.jsx(Nte,{}),hwe?h.jsx(f$,{}):void 0]})},Sxe=g.memo(Exe);function Cxe(){return h.jsx(Sxe,{})}const Oxe="hash";function cE(){const e=ZS();return j$(e),h.jsx(ywe,{})}const Mxe=u7(h.jsxs(dc,{Component:oq,errorElement:h.jsx(cE,{}),children:[h.jsx(dc,{path:Vy.whiteboard,Component:Cxe,errorElement:h.jsx(cE,{})}),h.jsx(dc,{path:Vy.application,errorElement:h.jsx(cE,{}),Component:ore}),h.jsx(dc,{path:"*",element:h.jsx(s7,{to:cr("whiteboard")})})]})),Nxe=(e,t)=>{switch(Oxe){case"browser":return cC(e,t);case"hash":return R7(e);default:return cC(e,t)}},kxe=Nxe(Mxe,{basename:"/NoLLMChat/"});mwe("[BASE_URL]","/NoLLMChat/");let p$;p$=g.memo(()=>(g.useEffect(()=>{window.location.pathname.includes("/NoLLMChat/")||(window.location.href="/NoLLMChat/".replace("//","/"))},[]),h.jsx(W7,{router:kxe})),()=>!0),T$=Object.freeze(Object.defineProperty({__proto__:null,default:p$},Symbol.toStringTag,{value:"Module"}))});export{C$ as $,vE as A,bE as B,Fh as C,xE as D,wE as E,Ys as F,Ks as G,da as H,Ru as I,Iu as J,Bh as K,_E as L,jE as M,ti as N,EE as O,SE as P,CE as Q,OE as R,$h as S,ME as T,NE as U,kE as V,PE as W,AE as X,TE as Y,RE as Z,Hr as _,Ewe as __tla,zh as a,Du as a$,Io as a0,Xs as a1,Vh as a2,Gs as a3,Uh as a4,Hh as a5,IE as a6,DE as a7,LE as a8,O$ as a9,FE as aA,BE as aB,Lu as aC,Wh as aD,qh as aE,Yh as aF,Kh as aG,Xh as aH,Gh as aI,Qh as aJ,Jh as aK,Zh as aL,em as aM,tm as aN,nm as aO,rm as aP,om as aQ,am as aR,$E as aS,im as aT,zE as aU,M$ as aV,ht as aW,Qs as aX,Js as aY,fa as aZ,pa as a_,sm as aa,VE as ab,N$ as ac,cm as ad,lm as ae,um as af,UE as ag,dm as ah,fm as ai,pm as aj,hm as ak,mm as al,ym as am,HE as an,WE as ao,k$ as ap,qE as aq,P$ as ar,YE as as,gm as at,vm as au,bm as av,xm as aw,wm as ax,_m as ay,jm as az,Zs as b,ec as b0,ni as b1,ri as b2,A$ as b3,KE as b4,XE as b5,GE as b6,Em as b7,Sm as b8,QE as b9,Ae as ba,bn as bb,Yt as bc,JE as bd,Cm as be,ZE as bf,eS as bg,Om as bh,Mm as bi,ut as bj,tS as bk,nS as bl,rS as bm,oS as bn,Ge as bo,Mn as bp,aS as bq,iS as br,oi as bs,ha as bt,T$ as bu,sS as c,er as d,Nm as e,cS as f,km as g,lS as h,ai as i,tr as j,Pm as k,Am as l,uS as m,Er as n,dS as o,Tm as p,Rm as q,fS as r,pS as s,hS as t,Im as u,cn as v,tc as w,Dm as x,nc as y,ii as z};
