const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/few_shot-wqyXJ0Rz.js","assets/index-JDI20v-f.js","assets/index-C9EKNJRk.css","assets/index-CSFZaYIn.js","assets/pdf-Tm18kJnX.js","assets/pdf.min-DvqNLaJf.js","assets/pdf.worker.min-BGW7QZB1.js","assets/index-j8GSalR6.js","assets/objectWithoutPropertiesLoose-BjXSgPXB.js","assets/index-tci7oIVi.js","assets/index-Cr8Tc6mT.css","assets/index-BcNmvw95.js","assets/use-prevent-pitch-zoom-CtnzMCxu.js","assets/index-CLHb6RbV.js","assets/link-dYX_i9fT.js","assets/createLucideIcon-CelBvn8h.js","assets/trash-2-DnhbAn9C.js","assets/text-CPOdm9ZB.js","assets/external-link-BC6v-snP.js","assets/unlink-Ch5mKfhf.js","assets/index--CtKwnPv.js","assets/list-BrrYdvTd.js","assets/list-ordered-BNl5JHF9.js","assets/list-todo-CE9XIGhU.js","assets/indent-increase-Bhe2cSdP.js","assets/pilcrow-B8l65Skt.js","assets/heading-1-DSDNgtgq.js","assets/heading-2-Cvnfcswx.js","assets/heading-3-Bk5JLldM.js","assets/table-Dw_Md2bi.js","assets/file-code-Bc4Kq1JR.js","assets/quote-BnBfKJfr.js","assets/minus-CfMNLBpg.js","assets/square-BrMIWo3P.js","assets/chevron-right-B4UgT5YY.js","assets/image-B7mvr932.js","assets/table-of-contents-5BPsiYNv.js","assets/columns-3-BnWDQH6W.js","assets/link-2-DqFpwKqO.js","assets/calendar-C7RXHnY3.js","assets/plus-CNnAh9vl.js","assets/wrap-text-hSV8sBi6.js","assets/pen-CJb5piX9.js","assets/eye-CdJihnld.js","assets/indent-decrease-DbtANkDE.js","assets/pointer-DUA0WNAq.js","assets/wand-sparkles-CQ0_Kg1N.js","assets/bold-DNFipAOH.js","assets/italic-B0pk0qK_.js","assets/underline-BrKwfvLY.js","assets/strikethrough-o0tqqjwj.js","assets/code-xml-DBwuksol.js","assets/baseline-BeLajKw7.js","assets/paint-bucket-BGj4nBtI.js","assets/arrow-up-to-line-CgUxqvLW.js","assets/index-BCYu3EnN.css","assets/index-BcgE28pn.js","assets/check-BI5xvB3E.js","assets/circle-BSbnhCrM.js","assets/index-YVSxOmCs.js","assets/index-HSnfLTSA.css","assets/CodeContainerApp-BYfPJ6Nz.js","assets/DocumentViewer-3kJNN_Fs.js"])))=>i.map(i=>d[i]);
import{r as y,M as eS,j as p,u as cm,P as z_e,a as tS,L as V_e,m as U_e,c as H_e,f as v7,i as W_e,b as nS,d as b7,e as q_e,g as Y_e,h as un,l as Mr,k as cc,n as Bt,R as K_e,o as Pn,p as nn,q as Ne,s as ye,t as rr,v as lt,w as K,x as Zr,S as Uo,y as An,D as lm,z as X_e,A as um,B as le,C as x7,E as Q_e,F as Me,G as Hu,H as Ze,I as Wu,J as ja,K as Xt,N as $t,O as ce,Q as qu,T as w7,U as J_e,V as Z_e,W as _7,X as lc,Y as dm,Z as fm,_ as Qe,$ as j7,a0 as U,a1 as uc,a2 as G_e,a3 as eje,a4 as E7,a5 as oe,a6 as tje,a7 as Ea,a8 as nje,a9 as vt,aa as Yu,ab as rje,ac as bi,ad as Ku,ae as S7,af as Xu,ag as oje,ah as or,ai as pm,aj as aje,ak as ije,al as rS,am as oS,an as sje,ao as cje,ap as lje,aq as uje,ar as dje,as as dc,at as fje,au as pje,av as C7,aw as hje,ax as mje,ay as yje,az as gje,aA as O7,aB as aS,aC as ut,aD as vje,aE as iS,aF as bje,aG as xje,aH as wje,aI as _je,__tla as jje}from"./index-JDI20v-f.js";let mt,sS,hm,cS,lS,fc,mm,pc,Sa,Qu,Ju,ym,uS,dS,xi,fS,pS,hS,mS,gm,yS,gS,hc,vS,bS,xS,wS,vm,bm,xm,mc,yc,Ca,Oa,Zu,N7,gc,wi,_i,M7,k7,wm,_S,jS,ES,P7,_m,SS,jm,CS,Gr,A7,Ho,vc,bc,Em,Sm,Cm,Om,Nm,Mm,km,Pm,OS,NS,Gu,Am,MS,Tm,kS,PS,T7,AS,Rm,R7,TS,RS,IS,Im,DS,I7,Dm,Lm,Fm,LS,Bm,$m,zm,Vm,Um,Hm,FS,BS,xc,Wm,qm,Ym,Km,Xm,Qm,Jm,ed,Qt,Zm,$S,ji,Wo,D7,td,Gm,ey,wc,_c,L7,zS,Je,Ei,ty,ot,jn,Ae,dn,fn,ny,ry,VS,US,oy,ay,HS,iy,sy,WS,qS,YS,ar,cy,KS,XS,Si,ir,ly,uy,QS,kr,JS,dy,fy,ZS,GS,eC,py,pn,jc,hy,Ec,Ci,tC,Eje=Promise.all([(()=>{try{return jje}catch{}})()]).then(async()=>{class B7 extends y.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function $7({children:e,isPresent:t}){const n=y.useId(),r=y.useRef(null),o=y.useRef({width:0,height:0,top:0,left:0}),{nonce:a}=y.useContext(eS);return y.useInsertionEffect(()=>{const{width:i,height:s,top:c,left:l}=o.current;if(t||!r.current||!i||!s)return;r.current.dataset.motionPopId=n;const u=document.createElement("style");return a&&(u.nonce=a),document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${i}px !important;
            height: ${s}px !important;
            top: ${c}px !important;
            left: ${l}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[t]),p.jsx(B7,{isPresent:t,childRef:r,sizeRef:o,children:y.cloneElement(e,{ref:r})})}const z7=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:o,presenceAffectsLayout:a,mode:i})=>{const s=cm(V7),c=y.useId(),l=y.useCallback(d=>{s.set(d,!0);for(const f of s.values())if(!f)return;r&&r()},[s,r]),u=y.useMemo(()=>({id:c,initial:t,isPresent:n,custom:o,onExitComplete:l,register:d=>(s.set(d,!1),()=>s.delete(d))}),a?[Math.random(),l]:[n,l]);return y.useMemo(()=>{s.forEach((d,f)=>s.set(f,!1))},[n]),y.useEffect(()=>{!n&&!s.size&&r&&r()},[n]),i==="popLayout"&&(e=p.jsx($7,{isPresent:n,children:e})),p.jsx(z_e.Provider,{value:u,children:e})};function V7(){return new Map}const nd=e=>e.key||"";function rC(e){const t=[];return y.Children.forEach(e,n=>{y.isValidElement(n)&&t.push(n)}),t}const U7=({children:e,exitBeforeEnter:t,custom:n,initial:r=!0,onExitComplete:o,presenceAffectsLayout:a=!0,mode:i="sync"})=>{const s=y.useMemo(()=>rC(e),[e]),c=s.map(nd),l=y.useRef(!0),u=y.useRef(s),d=cm(()=>new Map),[f,h]=y.useState(s),[g,m]=y.useState(s);tS(()=>{l.current=!1,u.current=s;for(let x=0;x<g.length;x++){const _=nd(g[x]);c.includes(_)?d.delete(_):d.get(_)!==!0&&d.set(_,!1)}},[g,c.length,c.join("-")]);const v=[];if(s!==f){let x=[...s];for(let _=0;_<g.length;_++){const w=g[_],j=nd(w);c.includes(j)||(x.splice(_,0,w),v.push(w))}i==="wait"&&v.length&&(x=v),m(rC(x)),h(s);return}const{forceRender:b}=y.useContext(V_e);return p.jsx(p.Fragment,{children:g.map(x=>{const _=nd(x),w=s===g||c.includes(_),j=()=>{if(d.has(_))d.set(_,!0);else return;let E=!0;d.forEach(S=>{S||(E=!1)}),E&&(b==null||b(),m(u.current),o&&o())};return p.jsx(z7,{isPresent:w,initial:!l.current||r?void 0:!1,custom:w?void 0:n,presenceAffectsLayout:a,mode:i,onExitComplete:w?void 0:j,children:x},_)})})};function my(e){const t=cm(()=>U_e(e)),{isStatic:n}=y.useContext(eS);if(n){const[,r]=y.useState(e);y.useEffect(()=>t.on("change",r),[])}return t}function oC(e,t){const n=my(t()),r=()=>n.set(t());return r(),tS(()=>{const o=()=>v7.preRender(r,!1,!0),a=e.map(i=>i.on("change",o));return()=>{a.forEach(i=>i()),H_e(r)}}),n}const H7=e=>e&&typeof e=="object"&&e.mix,W7=e=>H7(e)?e.mix:void 0;function q7(...e){const t=!Array.isArray(e[0]),n=t?0:-1,r=e[0+n],o=e[1+n],a=e[2+n],i=e[3+n],s=W_e(o,a,{mixer:W7(a[0]),...i});return t?s(r):s}function Y7(e){nS.current=[],e();const t=oC(nS.current,e);return nS.current=void 0,t}function aC(e,t,n,r){if(typeof e=="function")return Y7(e);const o=typeof t=="function"?t:q7(t,n,r);return Array.isArray(e)?iC(e,o):iC([e],([a])=>o(a))}function iC(e,t){const n=cm(()=>[]);return oC(e,()=>{n.length=0;const r=e.length;for(let o=0;o<r;o++)n[o]=e[o].get();return t(n)})}function sC(e){return typeof e=="number"?e:parseFloat(e)}function K7(e,t={}){const{isStatic:n}=y.useContext(eS),r=y.useRef(null),o=my(b7(e)?sC(e.get()):e),a=y.useRef(o.get()),i=y.useRef(()=>{}),s=()=>{const l=r.current;l&&l.time===0&&l.sample(q_e.delta),c(),r.current=Y_e({keyframes:[o.get(),a.current],velocity:o.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...t,onUpdate:i.current})},c=()=>{r.current&&r.current.stop()};return y.useInsertionEffect(()=>o.attach((l,u)=>n?u(l):(a.current=l,i.current=u,v7.update(s),o.get()),c),[JSON.stringify(t)]),tS(()=>{if(b7(e))return e.on("change",l=>o.set(sC(l)))},[o]),o}var Ye=(e=>(e.Started="started",e.Downloading="downloading",e.Downloaded="downloaded",e.Loading="loading",e.Loaded="loaded",e))(Ye||{}),Sc=(e=>(e.LLM="LLM",e.embedding="embedding",e.VLM="VLM",e))(Sc||{}),rd=(e=>(e.WebLLM="WebLLM",e.OpenAI="OpenAI",e))(rd||{}),eo=(e=>(e.Started="started",e.Inprogress="inprogress",e.Success="success",e.Failed="failed",e))(eo||{}),Tn=(e=>(e.Human="human",e.User="user",e.AI="ai",e.System="system",e.Assistant="assistant",e.Tool="tool",e.FewShotExample="few_shot_example",e))(Tn||{}),od=(e=>(e.Started="started",e.Inprogress="inprogress",e.Done="done",e))(od||{}),Rn=(e=>(e.Chat="chat",e.FewShotExample="few_shot_example",e))(Rn||{}),Oi=(e=>(e.VECTOR_DATABASE_RETREIVER="VECTOR_DATABASE_RETREIVER",e))(Oi||{});let cC,yy;cC=async(e,t)=>{let n="",r="",o;const a=[];await e;for await(const i of e)i&&(Array.isArray(i)?(a.push(...i.map(s=>s.content)),a!=null&&a.length&&(r=a.join(""),t==null||t({chunk:i,content:r}))):(n=typeof i=="object"&&"content"in i?`${i.content}`:`${i}`,t==null||t({chunk:i,content:n})),o=i);return{lastChunk:o,content:n}},yy=()=>{const e=un(r=>r.toolsCallingStream),t=un(r=>r.structuredStream),n=un(r=>r.stream);return{stream:y.useCallback(async(r,{tools:o,schemas:a,onMessageUpdate:i,onMessageFinish:s})=>{var d;let c;if(a!=null&&a.length?(a&&(a==null?void 0:a.length)>1&&Mr("Multiple schemas are not supported. Only the first schema will be used."),c=t(((d=a==null?void 0:a[0])==null?void 0:d.schema_items)||[],r)):o!=null&&o.length?c=e(o,r):c=n(r),!c)throw new Error("Stream is not supported");const{lastChunk:l,content:u}=await cC(c,i);return s==null||s({content:u,lastChunk:l}),{lastChunk:l,content:u}},[n,t,e])}},mm=globalThis||void 0||self;var Cc={},lC;function X7(){if(lC)return Cc;lC=1,Object.defineProperty(Cc,"__esModule",{value:!0}),Cc.parse=i,Cc.serialize=l;const e=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,t=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,o=Object.prototype.toString,a=(()=>{const f=function(){};return f.prototype=Object.create(null),f})();function i(f,h){const g=new a,m=f.length;if(m<2)return g;const v=(h==null?void 0:h.decode)||u;let b=0;do{const x=f.indexOf("=",b);if(x===-1)break;const _=f.indexOf(";",b),w=_===-1?m:_;if(x>w){b=f.lastIndexOf(";",x-1)+1;continue}const j=s(f,b,x),E=c(f,x,j),S=f.slice(j,E);if(g[S]===void 0){let C=s(f,x+1,w),M=c(f,w,C);const N=v(f.slice(C,M));g[S]=N}b=w+1}while(b<m);return g}function s(f,h,g){do{const m=f.charCodeAt(h);if(m!==32&&m!==9)return h}while(++h<g);return g}function c(f,h,g){for(;h>g;){const m=f.charCodeAt(--h);if(m!==32&&m!==9)return h+1}return g}function l(f,h,g){const m=(g==null?void 0:g.encode)||encodeURIComponent;if(!e.test(f))throw new TypeError(`argument name is invalid: ${f}`);const v=m(h);if(!t.test(v))throw new TypeError(`argument val is invalid: ${h}`);let b=f+"="+v;if(!g)return b;if(g.maxAge!==void 0){if(!Number.isInteger(g.maxAge))throw new TypeError(`option maxAge is invalid: ${g.maxAge}`);b+="; Max-Age="+g.maxAge}if(g.domain){if(!n.test(g.domain))throw new TypeError(`option domain is invalid: ${g.domain}`);b+="; Domain="+g.domain}if(g.path){if(!r.test(g.path))throw new TypeError(`option path is invalid: ${g.path}`);b+="; Path="+g.path}if(g.expires){if(!d(g.expires)||!Number.isFinite(g.expires.valueOf()))throw new TypeError(`option expires is invalid: ${g.expires}`);b+="; Expires="+g.expires.toUTCString()}if(g.httpOnly&&(b+="; HttpOnly"),g.secure&&(b+="; Secure"),g.partitioned&&(b+="; Partitioned"),g.priority)switch(typeof g.priority=="string"?g.priority.toLowerCase():void 0){case"low":b+="; Priority=Low";break;case"medium":b+="; Priority=Medium";break;case"high":b+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${g.priority}`)}if(g.sameSite)switch(typeof g.sameSite=="string"?g.sameSite.toLowerCase():g.sameSite){case!0:case"strict":b+="; SameSite=Strict";break;case"lax":b+="; SameSite=Lax";break;case"none":b+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${g.sameSite}`)}return b}function u(f){if(f.indexOf("%")===-1)return f;try{return decodeURIComponent(f)}catch{return f}}function d(f){return o.call(f)==="[object Date]"}return Cc}X7();var uC="popstate";function Q7(e={}){function t(r,o){let{pathname:a,search:i,hash:s}=r.location;return Ni("",{pathname:a,search:i,hash:s},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(r,o){return typeof o=="string"?o:to(o)}return fC(t,n,null,e)}function J7(e={}){function t(o,a){let{pathname:i="/",search:s="",hash:c=""}=no(o.location.hash.substring(1));return!i.startsWith("/")&&!i.startsWith(".")&&(i="/"+i),Ni("",{pathname:i,search:s,hash:c},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(o,a){let i=o.document.querySelector("base"),s="";if(i&&i.getAttribute("href")){let c=o.location.href,l=c.indexOf("#");s=l===-1?c:c.slice(0,l)}return s+"#"+(typeof a=="string"?a:to(a))}function r(o,a){zt(o.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(a)})`)}return fC(t,n,r,e)}function ze(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function zt(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Z7(){return Math.random().toString(36).substring(2,10)}function dC(e,t){return{usr:e.state,key:e.key,idx:t}}function Ni(e,t,n=null,r){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?no(t):t,state:n,key:t&&t.key||r||Z7()}}function to({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function no(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function fC(e,t,n,r={}){let{window:o=document.defaultView,v5Compat:a=!1}=r,i=o.history,s="POP",c=null,l=u();l==null&&(l=0,i.replaceState({...i.state,idx:l},""));function u(){return(i.state||{idx:null}).idx}function d(){s="POP";let v=u(),b=v==null?null:v-l;l=v,c&&c({action:s,location:m.location,delta:b})}function f(v,b){s="PUSH";let x=Ni(m.location,v,b);n&&n(x,v),l=u()+1;let _=dC(x,l),w=m.createHref(x);try{i.pushState(_,"",w)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;o.location.assign(w)}a&&c&&c({action:s,location:m.location,delta:1})}function h(v,b){s="REPLACE";let x=Ni(m.location,v,b);n&&n(x,v),l=u();let _=dC(x,l),w=m.createHref(x);i.replaceState(_,"",w),a&&c&&c({action:s,location:m.location,delta:0})}function g(v){let b=o.location.origin!=="null"?o.location.origin:o.location.href,x=typeof v=="string"?v:to(v);return x=x.replace(/ $/,"%20"),ze(b,`No window.location.(origin|href) available to create URL for href: ${x}`),new URL(x,b)}let m={get action(){return s},get location(){return e(o,i)},listen(v){if(c)throw new Error("A history only accepts one active listener");return o.addEventListener(uC,d),c=v,()=>{o.removeEventListener(uC,d),c=null}},createHref(v){return t(o,v)},createURL:g,encodeLocation(v){let b=g(v);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:f,replace:h,go(v){return i.go(v)}};return m}var G7=new Set(["lazy","caseSensitive","path","id","index","children"]);function eV(e){return e.index===!0}function ad(e,t,n=[],r={}){return e.map((o,a)=>{let i=[...n,String(a)],s=typeof o.id=="string"?o.id:i.join("-");if(ze(o.index!==!0||!o.children,"Cannot specify children on an index route"),ze(!r[s],`Found a route id collision on id "${s}".  Route id's must be globally unique within Data Router usages`),eV(o)){let c={...o,...t(o),id:s};return r[s]=c,c}else{let c={...o,...t(o),id:s,children:void 0};return r[s]=c,o.children&&(c.children=ad(o.children,t,i,r)),c}})}function qo(e,t,n="/"){return id(e,t,n,!1)}function id(e,t,n,r){let o=typeof t=="string"?no(t):t,a=sr(o.pathname||"/",n);if(a==null)return null;let i=pC(e);nV(i);let s=null;for(let c=0;s==null&&c<i.length;++c){let l=pV(a);s=dV(i[c],l,r)}return s}function tV(e,t){let{route:n,pathname:r,params:o}=e;return{id:n.id,pathname:r,params:o,data:t[n.id],handle:n.handle}}function pC(e,t=[],n=[],r=""){let o=(a,i,s)=>{let c={relativePath:s===void 0?a.path||"":s,caseSensitive:a.caseSensitive===!0,childrenIndex:i,route:a};c.relativePath.startsWith("/")&&(ze(c.relativePath.startsWith(r),`Absolute route path "${c.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(r.length));let l=Pr([r,c.relativePath]),u=n.concat(c);a.children&&a.children.length>0&&(ze(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${l}".`),pC(a.children,t,u,l)),!(a.path==null&&!a.index)&&t.push({path:l,score:lV(l,a.index),routesMeta:u})};return e.forEach((a,i)=>{var s;if(a.path===""||!((s=a.path)!=null&&s.includes("?")))o(a,i);else for(let c of hC(a.path))o(a,i,c)}),t}function hC(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,o=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return o?[a,""]:[a];let i=hC(r.join("/")),s=[];return s.push(...i.map(c=>c===""?a:[a,c].join("/"))),o&&s.push(...i),s.map(c=>e.startsWith("/")&&c===""?"/":c)}function nV(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:uV(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var rV=/^:[\w-]+$/,oV=3,aV=2,iV=1,sV=10,cV=-2,mC=e=>e==="*";function lV(e,t){let n=e.split("/"),r=n.length;return n.some(mC)&&(r+=cV),t&&(r+=aV),n.filter(o=>!mC(o)).reduce((o,a)=>o+(rV.test(a)?oV:a===""?iV:sV),r)}function uV(e,t){return e.length===t.length&&e.slice(0,-1).every((n,r)=>n===t[r])?e[e.length-1]-t[t.length-1]:0}function dV(e,t,n=!1){let{routesMeta:r}=e,o={},a="/",i=[];for(let s=0;s<r.length;++s){let c=r[s],l=s===r.length-1,u=a==="/"?t:t.slice(a.length)||"/",d=sd({path:c.relativePath,caseSensitive:c.caseSensitive,end:l},u),f=c.route;if(!d&&l&&n&&!r[r.length-1].route.index&&(d=sd({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},u)),!d)return null;Object.assign(o,d.params),i.push({params:o,pathname:Pr([a,d.pathname]),pathnameBase:yV(Pr([a,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(a=Pr([a,d.pathnameBase]))}return i}function sd(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=fV(e.path,e.caseSensitive,e.end),o=t.match(n);if(!o)return null;let a=o[0],i=a.replace(/(.)\/+$/,"$1"),s=o.slice(1);return{params:r.reduce((c,{paramName:l,isOptional:u},d)=>{if(l==="*"){let h=s[d]||"";i=a.slice(0,a.length-h.length).replace(/(.)\/+$/,"$1")}const f=s[d];return u&&!f?c[l]=void 0:c[l]=(f||"").replace(/%2F/g,"/"),c},{}),pathname:a,pathnameBase:i,pattern:e}}function fV(e,t=!1,n=!0){zt(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],o="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,i,s)=>(r.push({paramName:i,isOptional:s!=null}),s?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),o+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":e!==""&&e!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,t?void 0:"i"),r]}function pV(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return zt(!1,`The URL path "${e}" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function sr(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function hV(e,t="/"){let{pathname:n,search:r="",hash:o=""}=typeof e=="string"?no(e):e;return{pathname:n?n.startsWith("/")?n:mV(n,t):t,search:gV(r),hash:vV(o)}}function mV(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function gy(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function yC(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function cd(e){let t=yC(e);return t.map((n,r)=>r===t.length-1?n.pathname:n.pathnameBase)}function ld(e,t,n,r=!1){let o;typeof e=="string"?o=no(e):(o={...e},ze(!o.pathname||!o.pathname.includes("?"),gy("?","pathname","search",o)),ze(!o.pathname||!o.pathname.includes("#"),gy("#","pathname","hash",o)),ze(!o.search||!o.search.includes("#"),gy("#","search","hash",o)));let a=e===""||o.pathname==="",i=a?"/":o.pathname,s;if(i==null)s=n;else{let d=t.length-1;if(!r&&i.startsWith("..")){let f=i.split("/");for(;f[0]==="..";)f.shift(),d-=1;o.pathname=f.join("/")}s=d>=0?t[d]:"/"}let c=hV(o,s),l=i&&i!=="/"&&i.endsWith("/"),u=(a||i===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(l||u)&&(c.pathname+="/"),c}var Pr=e=>e.join("/").replace(/\/\/+/g,"/"),yV=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),gV=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,vV=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,ud=class{constructor(e,t,n,r=!1){this.status=e,this.statusText=t||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function dd(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var gC=["POST","PUT","PATCH","DELETE"],bV=new Set(gC),xV=["GET",...gC],wV=new Set(xV),_V=new Set([301,302,303,307,308]),jV=new Set([307,308]),vy={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},EV={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Oc={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},by=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,SV=e=>({hasErrorBoundary:!!e.hasErrorBoundary}),vC="remix-router-transitions",bC=Symbol("ResetLoaderData");function xC(e){const t=e.window?e.window:typeof window<"u"?window:void 0,n=typeof t<"u"&&typeof t.document<"u"&&typeof t.document.createElement<"u";ze(e.routes.length>0,"You must provide a non-empty routes array to createRouter");let r=e.mapRouteProperties||SV,o={},a=ad(e.routes,r,void 0,o),i,s=e.basename||"/",c=e.dataStrategy||kV,l=e.patchRoutesOnNavigation,u={...e.future},d=null,f=new Set,h=null,g=null,m=null,v=e.hydrationData!=null,b=qo(a,e.history.location,s),x=null;if(b==null&&!l){let z=Hn(404,{pathname:e.history.location.pathname}),{matches:X,route:ne}=AC(a);b=X,x={[ne.id]:z}}b&&!e.hydrationData&&je(b,a,e.history.location.pathname).active&&(b=null);let _;if(b)if(b.some(z=>z.route.lazy))_=!1;else if(!b.some(z=>z.route.loader))_=!0;else{let z=e.hydrationData?e.hydrationData.loaderData:null,X=e.hydrationData?e.hydrationData.errors:null;if(X){let ne=b.findIndex(de=>X[de.route.id]!==void 0);_=b.slice(0,ne+1).every(de=>!wy(de.route,z,X))}else _=b.every(ne=>!wy(ne.route,z,X))}else{_=!1,b=[];let z=je(null,a,e.history.location.pathname);z.active&&z.matches&&(b=z.matches)}let w,j={historyAction:e.history.action,location:e.history.location,matches:b,initialized:_,navigation:vy,restoreScrollPosition:e.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||x,fetchers:new Map,blockers:new Map},E="POP",S=!1,C,M=!1,N=new Map,P=null,R=!1,A=!1,O=new Set,k=new Map,T=0,D=-1,I=new Map,L=new Set,B=new Map,V=new Map,F=new Set,H=new Map,Q,Y=null;function re(){if(d=e.history.listen(({action:z,location:X,delta:ne})=>{if(Q){Q(),Q=void 0;return}zt(H.size===0||ne!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let de=Mt({currentLocation:j.location,nextLocation:X,historyAction:z});if(de&&ne!=null){let Se=new Promise(Pe=>{Q=Pe});e.history.go(ne*-1),ke(de,{state:"blocked",location:X,proceed(){ke(de,{state:"proceeding",proceed:void 0,reset:void 0,location:X}),Se.then(()=>e.history.go(ne))},reset(){let Pe=new Map(j.blockers);Pe.set(de,Oc),W({blockers:Pe})}});return}return ie(z,X)}),n){zV(t,N);let z=()=>VV(t,N);t.addEventListener("pagehide",z),P=()=>t.removeEventListener("pagehide",z)}return j.initialized||ie("POP",j.location,{initialHydration:!0}),w}function G(){d&&d(),P&&P(),f.clear(),C&&C.abort(),j.fetchers.forEach((z,X)=>Or(X)),j.blockers.forEach((z,X)=>pe(X))}function q(z){return f.add(z),()=>f.delete(z)}function W(z,X={}){j={...j,...z};let ne=[],de=[];j.fetchers.forEach((Se,Pe)=>{Se.state==="idle"&&(F.has(Pe)?ne.push(Pe):de.push(Pe))}),[...f].forEach(Se=>Se(j,{deletedFetchers:ne,viewTransitionOpts:X.viewTransitionOpts,flushSync:X.flushSync===!0})),ne.forEach(Se=>Or(Se)),de.forEach(Se=>j.fetchers.delete(Se))}function Z(z,X,{flushSync:ne}={}){var be,De;let de=j.actionData!=null&&j.navigation.formMethod!=null&&cr(j.navigation.formMethod)&&j.navigation.state==="loading"&&((be=z.state)==null?void 0:be._isRedirect)!==!0,Se;X.actionData?Object.keys(X.actionData).length>0?Se=X.actionData:Se=null:de?Se=j.actionData:Se=null;let Pe=X.loaderData?kC(j.loaderData,X.loaderData,X.matches||[],X.errors):j.loaderData,Ie=j.blockers;Ie.size>0&&(Ie=new Map(Ie),Ie.forEach((We,gt)=>Ie.set(gt,Oc)));let Ce=S===!0||j.navigation.formMethod!=null&&cr(j.navigation.formMethod)&&((De=z.state)==null?void 0:De._isRedirect)!==!0;i&&(a=i,i=void 0),R||E==="POP"||(E==="PUSH"?e.history.push(z,z.state):E==="REPLACE"&&e.history.replace(z,z.state));let Oe;if(E==="POP"){let We=N.get(j.location.pathname);We&&We.has(z.pathname)?Oe={currentLocation:j.location,nextLocation:z}:N.has(z.pathname)&&(Oe={currentLocation:z,nextLocation:j.location})}else if(M){let We=N.get(j.location.pathname);We?We.add(z.pathname):(We=new Set([z.pathname]),N.set(j.location.pathname,We)),Oe={currentLocation:j.location,nextLocation:z}}W({...X,actionData:Se,loaderData:Pe,historyAction:E,location:z,initialized:!0,navigation:vy,revalidation:"idle",restoreScrollPosition:_e(z,X.matches||j.matches),preventScrollReset:Ce,blockers:Ie},{viewTransitionOpts:Oe,flushSync:ne===!0}),E="POP",S=!1,M=!1,R=!1,A=!1,Y==null||Y.resolve(),Y=null}async function ee(z,X){if(typeof z=="number"){e.history.go(z);return}let ne=xy(j.location,j.matches,s,z,X==null?void 0:X.fromRouteId,X==null?void 0:X.relative),{path:de,submission:Se,error:Pe}=wC(!1,ne,X),Ie=j.location,Ce=Ni(j.location,de,X&&X.state);Ce={...Ce,...e.history.encodeLocation(Ce)};let Oe=X&&X.replace!=null?X.replace:void 0,be="PUSH";Oe===!0?be="REPLACE":Oe===!1||Se!=null&&cr(Se.formMethod)&&Se.formAction===j.location.pathname+j.location.search&&(be="REPLACE");let De=X&&"preventScrollReset"in X?X.preventScrollReset===!0:void 0,We=(X&&X.flushSync)===!0,gt=Mt({currentLocation:Ie,nextLocation:Ce,historyAction:be});if(gt){ke(gt,{state:"blocked",location:Ce,proceed(){ke(gt,{state:"proceeding",proceed:void 0,reset:void 0,location:Ce}),ee(z,X)},reset(){let jt=new Map(j.blockers);jt.set(gt,Oc),W({blockers:jt})}});return}await ie(be,Ce,{submission:Se,pendingError:Pe,preventScrollReset:De,replace:X&&X.replace,enableViewTransition:X&&X.viewTransition,flushSync:We})}function $(){Y||(Y=UV()),Ct(),W({revalidation:"loading"});let z=Y.promise;return j.navigation.state==="submitting"?z:j.navigation.state==="idle"?(ie(j.historyAction,j.location,{startUninterruptedRevalidation:!0}),z):(ie(E||j.historyAction,j.navigation.location,{overrideNavigation:j.navigation,enableViewTransition:M===!0}),z)}async function ie(z,X,ne){C&&C.abort(),C=null,E=z,R=(ne&&ne.startUninterruptedRevalidation)===!0,we(j.location,j.matches),S=(ne&&ne.preventScrollReset)===!0,M=(ne&&ne.enableViewTransition)===!0;let de=i||a,Se=ne&&ne.overrideNavigation,Pe=qo(de,X,s),Ie=(ne&&ne.flushSync)===!0,Ce=je(Pe,de,X.pathname);if(Ce.active&&Ce.matches&&(Pe=Ce.matches),!Pe){let{error:Xe,notFoundMatches:Mn,route:At}=_t(X.pathname);Z(X,{matches:Mn,loaderData:{},errors:{[At.id]:Xe}},{flushSync:Ie});return}if(j.initialized&&!A&&DV(j.location,X)&&!(ne&&ne.submission&&cr(ne.submission.formMethod))){Z(X,{matches:Pe},{flushSync:Ie});return}C=new AbortController;let Oe=Mi(e.history,X,C.signal,ne&&ne.submission),be;if(ne&&ne.pendingError)be=[Na(Pe).route.id,{type:"error",error:ne.pendingError}];else if(ne&&ne.submission&&cr(ne.submission.formMethod)){let Xe=await ue(Oe,X,ne.submission,Pe,Ce.active,{replace:ne.replace,flushSync:Ie});if(Xe.shortCircuited)return;if(Xe.pendingActionResult){let[Mn,At]=Xe.pendingActionResult;if(In(At)&&dd(At.error)&&At.error.status===404){C=null,Z(X,{matches:Xe.matches,loaderData:{},errors:{[Mn]:At.error}});return}}Pe=Xe.matches||Pe,be=Xe.pendingActionResult,Se=Ey(X,ne.submission),Ie=!1,Ce.active=!1,Oe=Mi(e.history,Oe.url,Oe.signal)}let{shortCircuited:De,matches:We,loaderData:gt,errors:jt}=await me(Oe,X,Pe,Ce.active,Se,ne&&ne.submission,ne&&ne.fetcherSubmission,ne&&ne.replace,ne&&ne.initialHydration===!0,Ie,be);De||(C=null,Z(X,{matches:We||Pe,...PC(be),loaderData:gt,errors:jt}))}async function ue(z,X,ne,de,Se,Pe={}){Ct();let Ie=BV(X,ne);if(W({navigation:Ie},{flushSync:Pe.flushSync===!0}),Se){let be=await Fe(de,X.pathname,z.signal);if(be.type==="aborted")return{shortCircuited:!0};if(be.type==="error"){let De=Na(be.partialMatches).route.id;return{matches:be.partialMatches,pendingActionResult:[De,{type:"error",error:be.error}]}}else if(be.matches)de=be.matches;else{let{notFoundMatches:De,error:We,route:gt}=_t(X.pathname);return{matches:De,pendingActionResult:[gt.id,{type:"error",error:We}]}}}let Ce,Oe=Nc(de,X);if(!Oe.route.action&&!Oe.route.lazy)Ce={type:"error",error:Hn(405,{method:z.method,pathname:X.pathname,routeId:Oe.route.id})};else if(Ce=(await ct("action",j,z,[Oe],de,null))[Oe.route.id],z.signal.aborted)return{shortCircuited:!0};if(Ma(Ce)){let be;return Pe&&Pe.replace!=null?be=Pe.replace:be=OC(Ce.response.headers.get("Location"),new URL(z.url),s)===j.location.pathname+j.location.search,await qe(z,Ce,!0,{submission:ne,replace:be}),{shortCircuited:!0}}if(In(Ce)){let be=Na(de,Oe.route.id);return(Pe&&Pe.replace)!==!0&&(E="PUSH"),{matches:de,pendingActionResult:[be.route.id,Ce]}}return{matches:de,pendingActionResult:[Oe.route.id,Ce]}}async function me(z,X,ne,de,Se,Pe,Ie,Ce,Oe,be,De){let We=Se||Ey(X,Pe),gt=Pe||Ie||DC(We),jt=!R&&!Oe;if(de){if(jt){let kn=Te(De);W({navigation:We,...kn!==void 0?{actionData:kn}:{}},{flushSync:be})}let nt=await Fe(ne,X.pathname,z.signal);if(nt.type==="aborted")return{shortCircuited:!0};if(nt.type==="error"){let kn=Na(nt.partialMatches).route.id;return{matches:nt.partialMatches,loaderData:{},errors:{[kn]:nt.error}}}else if(nt.matches)ne=nt.matches;else{let{error:kn,notFoundMatches:vi,route:Nt}=_t(X.pathname);return{matches:vi,loaderData:{},errors:{[Nt.id]:kn}}}}let Xe=i||a,[Mn,At]=jC(e.history,j,ne,gt,X,Oe===!0,A,O,F,B,L,Xe,s,De);if(D=++T,Mn.length===0&&At.length===0){let nt=J();return Z(X,{matches:ne,loaderData:{},errors:De&&In(De[1])?{[De[0]]:De[1].error}:null,...PC(De),...nt?{fetchers:new Map(j.fetchers)}:{}},{flushSync:be}),{shortCircuited:!0}}if(jt){let nt={};if(!de){nt.navigation=We;let kn=Te(De);kn!==void 0&&(nt.actionData=kn)}At.length>0&&(nt.fetchers=Ue(At)),W(nt,{flushSync:be})}At.forEach(nt=>{tr(nt.key),nt.controller&&k.set(nt.key,nt.controller)});let gi=()=>At.forEach(nt=>tr(nt.key));C&&C.signal.addEventListener("abort",gi);let{loaderResults:Nr,fetcherResults:_a}=await Wt(j,ne,Mn,At,z);if(z.signal.aborted)return{shortCircuited:!0};C&&C.signal.removeEventListener("abort",gi),At.forEach(nt=>k.delete(nt.key));let Jr=fd(Nr);if(Jr)return await qe(z,Jr.result,!0,{replace:Ce}),{shortCircuited:!0};if(Jr=fd(_a),Jr)return L.add(Jr.key),await qe(z,Jr.result,!0,{replace:Ce}),{shortCircuited:!0};let{loaderData:Uu,errors:nr}=MC(j,ne,Nr,De,At,_a);Oe&&j.errors&&(nr={...j.errors,...nr});let ac=J(),ic=te(D),sc=ac||ic||At.length>0;return{matches:ne,loaderData:Uu,errors:nr,...sc?{fetchers:new Map(j.fetchers)}:{}}}function Te(z){if(z&&!In(z[1]))return{[z[0]]:z[1].data};if(j.actionData)return Object.keys(j.actionData).length===0?null:j.actionData}function Ue(z){return z.forEach(X=>{let ne=j.fetchers.get(X.key),de=Mc(void 0,ne?ne.data:void 0);j.fetchers.set(X.key,de)}),new Map(j.fetchers)}async function He(z,X,ne,de){tr(z);let Se=(de&&de.flushSync)===!0,Pe=i||a,Ie=xy(j.location,j.matches,s,ne,X,de==null?void 0:de.relative),Ce=qo(Pe,Ie,s),Oe=je(Ce,Pe,Ie);if(Oe.active&&Oe.matches&&(Ce=Oe.matches),!Ce){Rt(z,X,Hn(404,{pathname:Ie}),{flushSync:Se});return}let{path:be,submission:De,error:We}=wC(!0,Ie,de);if(We){Rt(z,X,We,{flushSync:Se});return}let gt=Nc(Ce,be),jt=(de&&de.preventScrollReset)===!0;if(De&&cr(De.formMethod)){await Le(z,X,be,gt,Ce,Oe.active,Se,jt,De);return}B.set(z,{routeId:X,path:be}),await st(z,X,be,gt,Ce,Oe.active,Se,jt,De)}async function Le(z,X,ne,de,Se,Pe,Ie,Ce,Oe){Ct(),B.delete(z);function be(Nt){if(!Nt.route.action&&!Nt.route.lazy){let Vo=Hn(405,{method:Oe.formMethod,pathname:ne,routeId:X});return Rt(z,X,Vo,{flushSync:Ie}),!0}return!1}if(!Pe&&be(de))return;let De=j.fetchers.get(z);yt(z,$V(Oe,De),{flushSync:Ie});let We=new AbortController,gt=Mi(e.history,ne,We.signal,Oe);if(Pe){let Nt=await Fe(Se,ne,gt.signal);if(Nt.type==="aborted")return;if(Nt.type==="error"){Rt(z,X,Nt.error,{flushSync:Ie});return}else if(Nt.matches){if(Se=Nt.matches,de=Nc(Se,ne),be(de))return}else{Rt(z,X,Hn(404,{pathname:ne}),{flushSync:Ie});return}}k.set(z,We);let jt=T,Xe=(await ct("action",j,gt,[de],Se,z))[de.route.id];if(gt.signal.aborted){k.get(z)===We&&k.delete(z);return}if(F.has(z)){if(Ma(Xe)||In(Xe)){yt(z,Yo(void 0));return}}else{if(Ma(Xe))if(k.delete(z),D>jt){yt(z,Yo(void 0));return}else return L.add(z),yt(z,Mc(Oe)),qe(gt,Xe,!1,{fetcherSubmission:Oe,preventScrollReset:Ce});if(In(Xe)){Rt(z,X,Xe.error);return}}let Mn=j.navigation.location||j.location,At=Mi(e.history,Mn,We.signal),gi=i||a,Nr=j.navigation.state!=="idle"?qo(gi,j.navigation.location,s):j.matches;ze(Nr,"Didn't find any matches after fetcher action");let _a=++T;I.set(z,_a);let Jr=Mc(Oe,Xe.data);j.fetchers.set(z,Jr);let[Uu,nr]=jC(e.history,j,Nr,Oe,Mn,!1,A,O,F,B,L,gi,s,[de.route.id,Xe]);nr.filter(Nt=>Nt.key!==z).forEach(Nt=>{let Vo=Nt.key,sm=j.fetchers.get(Vo),ZE=Mc(void 0,sm?sm.data:void 0);j.fetchers.set(Vo,ZE),tr(Vo),Nt.controller&&k.set(Vo,Nt.controller)}),W({fetchers:new Map(j.fetchers)});let ac=()=>nr.forEach(Nt=>tr(Nt.key));We.signal.addEventListener("abort",ac);let{loaderResults:ic,fetcherResults:sc}=await Wt(j,Nr,Uu,nr,At);if(We.signal.aborted)return;We.signal.removeEventListener("abort",ac),I.delete(z),k.delete(z),nr.forEach(Nt=>k.delete(Nt.key));let nt=fd(ic);if(nt)return qe(At,nt.result,!1,{preventScrollReset:Ce});if(nt=fd(sc),nt)return L.add(nt.key),qe(At,nt.result,!1,{preventScrollReset:Ce});let{loaderData:kn,errors:vi}=MC(j,Nr,ic,void 0,nr,sc);if(j.fetchers.has(z)){let Nt=Yo(Xe.data);j.fetchers.set(z,Nt)}te(_a),j.navigation.state==="loading"&&_a>D?(ze(E,"Expected pending action"),C&&C.abort(),Z(j.navigation.location,{matches:Nr,loaderData:kn,errors:vi,fetchers:new Map(j.fetchers)})):(W({errors:vi,loaderData:kC(j.loaderData,kn,Nr,vi),fetchers:new Map(j.fetchers)}),A=!1)}async function st(z,X,ne,de,Se,Pe,Ie,Ce,Oe){let be=j.fetchers.get(z);yt(z,Mc(Oe,be?be.data:void 0),{flushSync:Ie});let De=new AbortController,We=Mi(e.history,ne,De.signal);if(Pe){let Xe=await Fe(Se,ne,We.signal);if(Xe.type==="aborted")return;if(Xe.type==="error"){Rt(z,X,Xe.error,{flushSync:Ie});return}else if(Xe.matches)Se=Xe.matches,de=Nc(Se,ne);else{Rt(z,X,Hn(404,{pathname:ne}),{flushSync:Ie});return}}k.set(z,De);let gt=T,jt=(await ct("loader",j,We,[de],Se,z))[de.route.id];if(k.get(z)===De&&k.delete(z),!We.signal.aborted){if(F.has(z)){yt(z,Yo(void 0));return}if(Ma(jt))if(D>gt){yt(z,Yo(void 0));return}else{L.add(z),await qe(We,jt,!1,{preventScrollReset:Ce});return}if(In(jt)){Rt(z,X,jt.error);return}yt(z,Yo(jt.data))}}async function qe(z,X,ne,{submission:de,fetcherSubmission:Se,preventScrollReset:Pe,replace:Ie}={}){X.response.headers.has("X-Remix-Revalidate")&&(A=!0);let Ce=X.response.headers.get("Location");ze(Ce,"Expected a Location header on the redirect Response"),Ce=OC(Ce,new URL(z.url),s);let Oe=Ni(j.location,Ce,{_isRedirect:!0});if(n){let Xe=!1;if(X.response.headers.has("X-Remix-Reload-Document"))Xe=!0;else if(by.test(Ce)){const Mn=e.history.createURL(Ce);Xe=Mn.origin!==t.location.origin||sr(Mn.pathname,s)==null}if(Xe){Ie?t.location.replace(Ce):t.location.assign(Ce);return}}C=null;let be=Ie===!0||X.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:De,formAction:We,formEncType:gt}=j.navigation;!de&&!Se&&De&&We&&gt&&(de=DC(j.navigation));let jt=de||Se;if(jV.has(X.response.status)&&jt&&cr(jt.formMethod))await ie(be,Oe,{submission:{...jt,formAction:Ce},preventScrollReset:Pe||S,enableViewTransition:ne?M:void 0});else{let Xe=Ey(Oe,de);await ie(be,Oe,{overrideNavigation:Xe,fetcherSubmission:Se,preventScrollReset:Pe||S,enableViewTransition:ne?M:void 0})}}async function ct(z,X,ne,de,Se,Pe){let Ie,Ce={};try{Ie=await PV(c,z,X,ne,de,Se,Pe,o,r)}catch(Oe){return de.forEach(be=>{Ce[be.route.id]={type:"error",error:Oe}}),Ce}for(let[Oe,be]of Object.entries(Ie))if(LV(be)){let De=be.result;Ce[Oe]={type:"redirect",response:RV(De,ne,Oe,Se,s)}}else Ce[Oe]=await TV(be);return Ce}async function Wt(z,X,ne,de,Se){let Pe=ct("loader",z,Se,ne,X,null),Ie=Promise.all(de.map(async be=>{if(be.matches&&be.match&&be.controller){let De=(await ct("loader",z,Mi(e.history,be.path,be.controller.signal),[be.match],be.matches,be.key))[be.match.route.id];return{[be.key]:De}}else return Promise.resolve({[be.key]:{type:"error",error:Hn(404,{pathname:be.path})}})})),Ce=await Pe,Oe=(await Ie).reduce((be,De)=>Object.assign(be,De),{});return{loaderResults:Ce,fetcherResults:Oe}}function Ct(){A=!0,B.forEach((z,X)=>{k.has(X)&&O.add(X),tr(X)})}function yt(z,X,ne={}){j.fetchers.set(z,X),W({fetchers:new Map(j.fetchers)},{flushSync:(ne&&ne.flushSync)===!0})}function Rt(z,X,ne,de={}){let Se=Na(j.matches,X);Or(z),W({errors:{[Se.route.id]:ne},fetchers:new Map(j.fetchers)},{flushSync:(de&&de.flushSync)===!0})}function _n(z){return V.set(z,(V.get(z)||0)+1),F.has(z)&&F.delete(z),j.fetchers.get(z)||EV}function Or(z){let X=j.fetchers.get(z);k.has(z)&&!(X&&X.state==="loading"&&I.has(z))&&tr(z),B.delete(z),I.delete(z),L.delete(z),F.delete(z),O.delete(z),j.fetchers.delete(z)}function yi(z){let X=(V.get(z)||0)-1;X<=0?(V.delete(z),F.add(z)):V.set(z,X),W({fetchers:new Map(j.fetchers)})}function tr(z){let X=k.get(z);X&&(X.abort(),k.delete(z))}function wa(z){for(let X of z){let ne=_n(X),de=Yo(ne.data);j.fetchers.set(X,de)}}function J(){let z=[],X=!1;for(let ne of L){let de=j.fetchers.get(ne);ze(de,`Expected fetcher: ${ne}`),de.state==="loading"&&(L.delete(ne),z.push(ne),X=!0)}return wa(z),X}function te(z){let X=[];for(let[ne,de]of I)if(de<z){let Se=j.fetchers.get(ne);ze(Se,`Expected fetcher: ${ne}`),Se.state==="loading"&&(tr(ne),I.delete(ne),X.push(ne))}return wa(X),X.length>0}function se(z,X){let ne=j.blockers.get(z)||Oc;return H.get(z)!==X&&H.set(z,X),ne}function pe(z){j.blockers.delete(z),H.delete(z)}function ke(z,X){let ne=j.blockers.get(z)||Oc;ze(ne.state==="unblocked"&&X.state==="blocked"||ne.state==="blocked"&&X.state==="blocked"||ne.state==="blocked"&&X.state==="proceeding"||ne.state==="blocked"&&X.state==="unblocked"||ne.state==="proceeding"&&X.state==="unblocked",`Invalid blocker state transition: ${ne.state} -> ${X.state}`);let de=new Map(j.blockers);de.set(z,X),W({blockers:de})}function Mt({currentLocation:z,nextLocation:X,historyAction:ne}){if(H.size===0)return;H.size>1&&zt(!1,"A router only supports one blocker at a time");let de=Array.from(H.entries()),[Se,Pe]=de[de.length-1],Ie=j.blockers.get(Se);if(!(Ie&&Ie.state==="proceeding")&&Pe({currentLocation:z,nextLocation:X,historyAction:ne}))return Se}function _t(z){let X=Hn(404,{pathname:z}),ne=i||a,{matches:de,route:Se}=AC(ne);return{notFoundMatches:de,route:Se,error:X}}function $e(z,X,ne){if(h=z,m=X,g=ne||null,!v&&j.navigation===vy){v=!0;let de=_e(j.location,j.matches);de!=null&&W({restoreScrollPosition:de})}return()=>{h=null,m=null,g=null}}function ve(z,X){return g&&g(z,X.map(ne=>tV(ne,j.loaderData)))||z.key}function we(z,X){if(h&&m){let ne=ve(z,X);h[ne]=m()}}function _e(z,X){if(h){let ne=ve(z,X),de=h[ne];if(typeof de=="number")return de}return null}function je(z,X,ne){if(l)if(z){if(Object.keys(z[0].params).length>0)return{active:!0,matches:id(X,ne,s,!0)}}else return{active:!0,matches:id(X,ne,s,!0)||[]};return{active:!1,matches:null}}async function Fe(z,X,ne){if(!l)return{type:"success",matches:z};let de=z;for(;;){let Se=i==null,Pe=i||a,Ie=o;try{await l({path:X,matches:de,patch:(be,De)=>{ne.aborted||SC(be,De,Pe,Ie,r)}})}catch(be){return{type:"error",error:be,partialMatches:de}}finally{Se&&!ne.aborted&&(a=[...a])}if(ne.aborted)return{type:"aborted"};let Ce=qo(Pe,X,s);if(Ce)return{type:"success",matches:Ce};let Oe=id(Pe,X,s,!0);if(!Oe||de.length===Oe.length&&de.every((be,De)=>be.route.id===Oe[De].route.id))return{type:"success",matches:null};de=Oe}}function dt(z){o={},i=ad(z,r,void 0,o)}function Ot(z,X){let ne=i==null;SC(z,X,i||a,o,r),ne&&(a=[...a],W({}))}return w={get basename(){return s},get future(){return u},get state(){return j},get routes(){return a},get window(){return t},initialize:re,subscribe:q,enableScrollRestoration:$e,navigate:ee,fetch:He,revalidate:$,createHref:z=>e.history.createHref(z),encodeLocation:z=>e.history.encodeLocation(z),getFetcher:_n,deleteFetcher:yi,dispose:G,getBlocker:se,deleteBlocker:pe,patchRoutes:Ot,_internalFetchControllers:k,_internalSetRoutes:dt},w}function CV(e){return e!=null&&("formData"in e&&e.formData!=null||"body"in e&&e.body!==void 0)}function xy(e,t,n,r,o,a){let i,s;if(o){i=[];for(let l of t)if(i.push(l),l.route.id===o){s=l;break}}else i=t,s=t[t.length-1];let c=ld(r||".",cd(i),sr(e.pathname,n)||e.pathname,a==="path");if(r==null&&(c.search=e.search,c.hash=e.hash),(r==null||r===""||r===".")&&s){let l=jy(c.search);if(s.route.index&&!l)c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index";else if(!s.route.index&&l){let u=new URLSearchParams(c.search),d=u.getAll("index");u.delete("index"),d.filter(h=>h).forEach(h=>u.append("index",h));let f=u.toString();c.search=f?`?${f}`:""}}return n!=="/"&&(c.pathname=c.pathname==="/"?n:Pr([n,c.pathname])),to(c)}function wC(e,t,n){if(!n||!CV(n))return{path:t};if(n.formMethod&&!FV(n.formMethod))return{path:t,error:Hn(405,{method:n.formMethod})};let r=()=>({path:t,error:Hn(400,{type:"invalid-body"})}),o=(n.formMethod||"get").toUpperCase(),a=TC(t);if(n.body!==void 0){if(n.formEncType==="text/plain"){if(!cr(o))return r();let u=typeof n.body=="string"?n.body:n.body instanceof FormData||n.body instanceof URLSearchParams?Array.from(n.body.entries()).reduce((d,[f,h])=>`${d}${f}=${h}
`,""):String(n.body);return{path:t,submission:{formMethod:o,formAction:a,formEncType:n.formEncType,formData:void 0,json:void 0,text:u}}}else if(n.formEncType==="application/json"){if(!cr(o))return r();try{let u=typeof n.body=="string"?JSON.parse(n.body):n.body;return{path:t,submission:{formMethod:o,formAction:a,formEncType:n.formEncType,formData:void 0,json:u,text:void 0}}}catch{return r()}}}ze(typeof FormData=="function","FormData is not available in this environment");let i,s;if(n.formData)i=_y(n.formData),s=n.formData;else if(n.body instanceof FormData)i=_y(n.body),s=n.body;else if(n.body instanceof URLSearchParams)i=n.body,s=NC(i);else if(n.body==null)i=new URLSearchParams,s=new FormData;else try{i=new URLSearchParams(n.body),s=NC(i)}catch{return r()}let c={formMethod:o,formAction:a,formEncType:n&&n.formEncType||"application/x-www-form-urlencoded",formData:s,json:void 0,text:void 0};if(cr(c.formMethod))return{path:t,submission:c};let l=no(t);return e&&l.search&&jy(l.search)&&i.append("index",""),l.search=`?${i}`,{path:to(l),submission:c}}function _C(e,t,n=!1){let r=e.findIndex(o=>o.route.id===t);return r>=0?e.slice(0,n?r+1:r):e}function jC(e,t,n,r,o,a,i,s,c,l,u,d,f,h){let g=h?In(h[1])?h[1].error:h[1].data:void 0,m=e.createURL(t.location),v=e.createURL(o),b=n;a&&t.errors?b=_C(n,Object.keys(t.errors)[0],!0):h&&In(h[1])&&(b=_C(n,h[0]));let x=h?h[1].statusCode:void 0,_=x&&x>=400,w=b.filter((E,S)=>{let{route:C}=E;if(C.lazy)return!0;if(C.loader==null)return!1;if(a)return wy(C,t.loaderData,t.errors);if(OV(t.loaderData,t.matches[S],E))return!0;let M=t.matches[S],N=E;return EC(E,{currentUrl:m,currentParams:M.params,nextUrl:v,nextParams:N.params,...r,actionResult:g,actionStatus:x,defaultShouldRevalidate:_?!1:i||m.pathname+m.search===v.pathname+v.search||m.search!==v.search||NV(M,N)})}),j=[];return l.forEach((E,S)=>{if(a||!n.some(R=>R.route.id===E.routeId)||c.has(S))return;let C=qo(d,E.path,f);if(!C){j.push({key:S,routeId:E.routeId,path:E.path,matches:null,match:null,controller:null});return}let M=t.fetchers.get(S),N=Nc(C,E.path),P=!1;u.has(S)?P=!1:s.has(S)?(s.delete(S),P=!0):M&&M.state!=="idle"&&M.data===void 0?P=i:P=EC(N,{currentUrl:m,currentParams:t.matches[t.matches.length-1].params,nextUrl:v,nextParams:n[n.length-1].params,...r,actionResult:g,actionStatus:x,defaultShouldRevalidate:_?!1:i}),P&&j.push({key:S,routeId:E.routeId,path:E.path,matches:C,match:N,controller:new AbortController})}),[w,j]}function wy(e,t,n){if(e.lazy)return!0;if(!e.loader)return!1;let r=t!=null&&t[e.id]!==void 0,o=n!=null&&n[e.id]!==void 0;return!r&&o?!1:typeof e.loader=="function"&&e.loader.hydrate===!0?!0:!r&&!o}function OV(e,t,n){let r=!t||n.route.id!==t.route.id,o=!e.hasOwnProperty(n.route.id);return r||o}function NV(e,t){let n=e.route.path;return e.pathname!==t.pathname||n!=null&&n.endsWith("*")&&e.params["*"]!==t.params["*"]}function EC(e,t){if(e.route.shouldRevalidate){let n=e.route.shouldRevalidate(t);if(typeof n=="boolean")return n}return t.defaultShouldRevalidate}function SC(e,t,n,r,o){let a;if(e){let c=r[e];ze(c,`No route found to patch children into: routeId = ${e}`),c.children||(c.children=[]),a=c.children}else a=n;let i=t.filter(c=>!a.some(l=>CC(c,l))),s=ad(i,o,[e||"_","patch",String((a==null?void 0:a.length)||"0")],r);a.push(...s)}function CC(e,t){return"id"in e&&"id"in t&&e.id===t.id?!0:e.index===t.index&&e.path===t.path&&e.caseSensitive===t.caseSensitive?(!e.children||e.children.length===0)&&(!t.children||t.children.length===0)?!0:e.children.every((n,r)=>{var o;return(o=t.children)==null?void 0:o.some(a=>CC(n,a))}):!1}async function MV(e,t,n){if(!e.lazy)return;let r=await e.lazy();if(!e.lazy)return;let o=n[e.id];ze(o,"No route found in manifest");let a={};for(let i in r){let s=o[i]!==void 0&&i!=="hasErrorBoundary";zt(!s,`Route "${o.id}" has a static property "${i}" defined but its lazy function is also returning a value for this property. The lazy route property "${i}" will be ignored.`),!s&&!G7.has(i)&&(a[i]=r[i])}Object.assign(o,a),Object.assign(o,{...t(o),lazy:void 0})}async function kV({matches:e}){let t=e.filter(n=>n.shouldLoad);return(await Promise.all(t.map(n=>n.resolve()))).reduce((n,r,o)=>Object.assign(n,{[t[o].route.id]:r}),{})}async function PV(e,t,n,r,o,a,i,s,c,l){let u=a.map(h=>h.route.lazy?MV(h.route,c,s):void 0),d=a.map((h,g)=>{let m=u[g],v=o.some(b=>b.route.id===h.route.id);return{...h,shouldLoad:v,resolve:async b=>(b&&r.method==="GET"&&(h.route.lazy||h.route.loader)&&(v=!0),v?AV(t,r,h,m,b,l):Promise.resolve({type:"data",result:void 0}))}}),f=await e({matches:d,request:r,params:a[0].params,fetcherKey:i,context:l});try{await Promise.all(u)}catch{}return f}async function AV(e,t,n,r,o,a){let i,s,c=l=>{let u,d=new Promise((g,m)=>u=m);s=()=>u(),t.signal.addEventListener("abort",s);let f=g=>typeof l!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${e}" [routeId: ${n.route.id}]`)):l({request:t,params:n.params,context:a},...g!==void 0?[g]:[]),h=(async()=>{try{return{type:"data",result:await(o?o(g=>f(g)):f())}}catch(g){return{type:"error",result:g}}})();return Promise.race([h,d])};try{let l=n.route[e];if(r)if(l){let u,[d]=await Promise.all([c(l).catch(f=>{u=f}),r]);if(u!==void 0)throw u;i=d}else if(await r,l=n.route[e],l)i=await c(l);else if(e==="action"){let u=new URL(t.url),d=u.pathname+u.search;throw Hn(405,{method:t.method,pathname:d,routeId:n.route.id})}else return{type:"data",result:void 0};else if(l)i=await c(l);else{let u=new URL(t.url),d=u.pathname+u.search;throw Hn(404,{pathname:d})}}catch(l){return{type:"error",result:l}}finally{s&&t.signal.removeEventListener("abort",s)}return i}async function TV(e){var r,o,a,i;let{result:t,type:n}=e;if(IC(t)){let s;try{let c=t.headers.get("Content-Type");c&&/\bapplication\/json\b/.test(c)?t.body==null?s=null:s=await t.json():s=await t.text()}catch(c){return{type:"error",error:c}}return n==="error"?{type:"error",error:new ud(t.status,t.statusText,s),statusCode:t.status,headers:t.headers}:{type:"data",data:s,statusCode:t.status,headers:t.headers}}if(n==="error"){if(RC(t)){if(t.data instanceof Error)return{type:"error",error:t.data,statusCode:(r=t.init)==null?void 0:r.status};t=new ud(((o=t.init)==null?void 0:o.status)||500,void 0,t.data)}return{type:"error",error:t,statusCode:dd(t)?t.status:void 0}}return RC(t)?{type:"data",data:t.data,statusCode:(a=t.init)==null?void 0:a.status,headers:(i=t.init)!=null&&i.headers?new Headers(t.init.headers):void 0}:{type:"data",data:t}}function RV(e,t,n,r,o){let a=e.headers.get("Location");if(ze(a,"Redirects returned/thrown from loaders/actions must have a Location header"),!by.test(a)){let i=r.slice(0,r.findIndex(s=>s.route.id===n)+1);a=xy(new URL(t.url),i,o,a),e.headers.set("Location",a)}return e}function OC(e,t,n){if(by.test(e)){let r=e,o=r.startsWith("//")?new URL(t.protocol+r):new URL(r),a=sr(o.pathname,n)!=null;if(o.origin===t.origin&&a)return o.pathname+o.search+o.hash}return e}function Mi(e,t,n,r){let o=e.createURL(TC(t)).toString(),a={signal:n};if(r&&cr(r.formMethod)){let{formMethod:i,formEncType:s}=r;a.method=i.toUpperCase(),s==="application/json"?(a.headers=new Headers({"Content-Type":s}),a.body=JSON.stringify(r.json)):s==="text/plain"?a.body=r.text:s==="application/x-www-form-urlencoded"&&r.formData?a.body=_y(r.formData):a.body=r.formData}return new Request(o,a)}function _y(e){let t=new URLSearchParams;for(let[n,r]of e.entries())t.append(n,typeof r=="string"?r:r.name);return t}function NC(e){let t=new FormData;for(let[n,r]of e.entries())t.append(n,r);return t}function IV(e,t,n,r=!1,o=!1){let a={},i=null,s,c=!1,l={},u=n&&In(n[1])?n[1].error:void 0;return e.forEach(d=>{if(!(d.route.id in t))return;let f=d.route.id,h=t[f];if(ze(!Ma(h),"Cannot handle redirect results in processLoaderData"),In(h)){let g=h.error;if(u!==void 0&&(g=u,u=void 0),i=i||{},o)i[f]=g;else{let m=Na(e,f);i[m.route.id]==null&&(i[m.route.id]=g)}r||(a[f]=bC),c||(c=!0,s=dd(h.error)?h.error.status:500),h.headers&&(l[f]=h.headers)}else a[f]=h.data,h.statusCode&&h.statusCode!==200&&!c&&(s=h.statusCode),h.headers&&(l[f]=h.headers)}),u!==void 0&&n&&(i={[n[0]]:u},a[n[0]]=void 0),{loaderData:a,errors:i,statusCode:s||200,loaderHeaders:l}}function MC(e,t,n,r,o,a){let{loaderData:i,errors:s}=IV(t,n,r);return o.forEach(c=>{let{key:l,match:u,controller:d}=c,f=a[l];if(ze(f,"Did not find corresponding fetcher result"),!(d&&d.signal.aborted))if(In(f)){let h=Na(e.matches,u==null?void 0:u.route.id);s&&s[h.route.id]||(s={...s,[h.route.id]:f.error}),e.fetchers.delete(l)}else if(Ma(f))ze(!1,"Unhandled fetcher revalidation redirect");else{let h=Yo(f.data);e.fetchers.set(l,h)}}),{loaderData:i,errors:s}}function kC(e,t,n,r){let o=Object.entries(t).filter(([,a])=>a!==bC).reduce((a,[i,s])=>(a[i]=s,a),{});for(let a of n){let i=a.route.id;if(!t.hasOwnProperty(i)&&e.hasOwnProperty(i)&&a.route.loader&&(o[i]=e[i]),r&&r.hasOwnProperty(i))break}return o}function PC(e){return e?In(e[1])?{actionData:{}}:{actionData:{[e[0]]:e[1].data}}:{}}function Na(e,t){return(t?e.slice(0,e.findIndex(n=>n.route.id===t)+1):[...e]).reverse().find(n=>n.route.hasErrorBoundary===!0)||e[0]}function AC(e){let t=e.length===1?e[0]:e.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function Hn(e,{pathname:t,routeId:n,method:r,type:o,message:a}={}){let i="Unknown Server Error",s="Unknown @remix-run/router error";return e===400?(i="Bad Request",r&&t&&n?s=`You made a ${r} request to "${t}" but did not provide a \`loader\` for route "${n}", so there is no way to handle the request.`:o==="invalid-body"&&(s="Unable to encode submission body")):e===403?(i="Forbidden",s=`Route "${n}" does not match URL "${t}"`):e===404?(i="Not Found",s=`No route matches URL "${t}"`):e===405&&(i="Method Not Allowed",r&&t&&n?s=`You made a ${r.toUpperCase()} request to "${t}" but did not provide an \`action\` for route "${n}", so there is no way to handle the request.`:r&&(s=`Invalid request method "${r.toUpperCase()}"`)),new ud(e||500,i,new Error(s),!0)}function fd(e){let t=Object.entries(e);for(let n=t.length-1;n>=0;n--){let[r,o]=t[n];if(Ma(o))return{key:r,result:o}}}function TC(e){let t=typeof e=="string"?no(e):e;return to({...t,hash:""})}function DV(e,t){return e.pathname!==t.pathname||e.search!==t.search?!1:e.hash===""?t.hash!=="":e.hash===t.hash?!0:t.hash!==""}function LV(e){return IC(e.result)&&_V.has(e.result.status)}function In(e){return e.type==="error"}function Ma(e){return(e&&e.type)==="redirect"}function RC(e){return typeof e=="object"&&e!=null&&"type"in e&&"data"in e&&"init"in e&&e.type==="DataWithResponseInit"}function IC(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.headers=="object"&&typeof e.body<"u"}function FV(e){return wV.has(e.toUpperCase())}function cr(e){return bV.has(e.toUpperCase())}function jy(e){return new URLSearchParams(e).getAll("index").some(t=>t==="")}function Nc(e,t){let n=typeof t=="string"?no(t).search:t.search;if(e[e.length-1].route.index&&jy(n||""))return e[e.length-1];let r=yC(e);return r[r.length-1]}function DC(e){let{formMethod:t,formAction:n,formEncType:r,text:o,formData:a,json:i}=e;if(!(!t||!n||!r)){if(o!=null)return{formMethod:t,formAction:n,formEncType:r,formData:void 0,json:void 0,text:o};if(a!=null)return{formMethod:t,formAction:n,formEncType:r,formData:a,json:void 0,text:void 0};if(i!==void 0)return{formMethod:t,formAction:n,formEncType:r,formData:void 0,json:i,text:void 0}}}function Ey(e,t){return t?{state:"loading",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}:{state:"loading",location:e,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function BV(e,t){return{state:"submitting",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}}function Mc(e,t){return e?{state:"loading",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function $V(e,t){return{state:"submitting",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t?t.data:void 0}}function Yo(e){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function zV(e,t){try{let n=e.sessionStorage.getItem(vC);if(n){let r=JSON.parse(n);for(let[o,a]of Object.entries(r||{}))a&&Array.isArray(a)&&t.set(o,new Set(a||[]))}}catch{}}function VV(e,t){if(t.size>0){let n={};for(let[r,o]of t)n[r]=[...o];try{e.sessionStorage.setItem(vC,JSON.stringify(n))}catch(r){zt(!1,`Failed to save applied view transitions in sessionStorage (${r}).`)}}}function UV(){let e,t,n=new Promise((r,o)=>{e=async a=>{r(a);try{await n}catch{}},t=async a=>{o(a);try{await n}catch{}}});return{promise:n,resolve:e,reject:t}}var ka=y.createContext(null);ka.displayName="DataRouter";var kc=y.createContext(null);kc.displayName="DataRouterState";var Sy=y.createContext({isTransitioning:!1});Sy.displayName="ViewTransition";var LC=y.createContext(new Map);LC.displayName="Fetchers";var HV=y.createContext(null);HV.displayName="Await";var lr=y.createContext(null);lr.displayName="Navigation";var pd=y.createContext(null);pd.displayName="Location";var Wn=y.createContext({outlet:null,matches:[],isDataRoute:!1});Wn.displayName="Route";var Cy=y.createContext(null);Cy.displayName="RouteError";function WV(e,{relative:t}={}){ze(ki(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=y.useContext(lr),{hash:o,pathname:a,search:i}=Pc(e,{relative:t}),s=a;return n!=="/"&&(s=a==="/"?n:Pr([n,a])),r.createHref({pathname:s,search:i,hash:o})}function ki(){return y.useContext(pd)!=null}function Ar(){return ze(ki(),"useLocation() may be used only in the context of a <Router> component."),y.useContext(pd).location}var FC="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function BC(e){y.useContext(lr).static||y.useLayoutEffect(e)}function Pa(){let{isDataRoute:e}=y.useContext(Wn);return e?aU():qV()}function qV(){ze(ki(),"useNavigate() may be used only in the context of a <Router> component.");let e=y.useContext(ka),{basename:t,navigator:n}=y.useContext(lr),{matches:r}=y.useContext(Wn),{pathname:o}=Ar(),a=JSON.stringify(cd(r)),i=y.useRef(!1);return BC(()=>{i.current=!0}),y.useCallback((s,c={})=>{if(zt(i.current,FC),!i.current)return;if(typeof s=="number"){n.go(s);return}let l=ld(s,JSON.parse(a),o,c.relative==="path");e==null&&t!=="/"&&(l.pathname=l.pathname==="/"?t:Pr([t,l.pathname])),(c.replace?n.replace:n.push)(l,c.state,c)},[t,n,a,o,e])}var YV=y.createContext(null);function KV(e){let t=y.useContext(Wn).outlet;return t&&y.createElement(YV.Provider,{value:e},t)}function $C(){let{matches:e}=y.useContext(Wn),t=e[e.length-1];return t?t.params:{}}function Pc(e,{relative:t}={}){let{matches:n}=y.useContext(Wn),{pathname:r}=Ar(),o=JSON.stringify(cd(n));return y.useMemo(()=>ld(e,JSON.parse(o),r,t==="path"),[e,o,r,t])}function XV(e,t,n,r){ze(ki(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=y.useContext(lr),{matches:a}=y.useContext(Wn),i=a[a.length-1],s=i?i.params:{},c=i?i.pathname:"/",l=i?i.pathnameBase:"/",u=i&&i.route;{let v=u&&u.path||"";UC(c,!u||v.endsWith("*")||v.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${v}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${v}"> to <Route path="${v==="/"?"*":`${v}/*`}">.`)}let d=Ar(),f;f=d;let h=f.pathname||"/",g=h;if(l!=="/"){let v=l.replace(/^\//,"").split("/");g="/"+h.replace(/^\//,"").split("/").slice(v.length).join("/")}let m=qo(e,{pathname:g});return zt(u||m!=null,`No routes matched location "${f.pathname}${f.search}${f.hash}" `),zt(m==null||m[m.length-1].route.element!==void 0||m[m.length-1].route.Component!==void 0||m[m.length-1].route.lazy!==void 0,`Matched leaf route at location "${f.pathname}${f.search}${f.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),eU(m&&m.map(v=>Object.assign({},v,{params:Object.assign({},s,v.params),pathname:Pr([l,o.encodeLocation?o.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?l:Pr([l,o.encodeLocation?o.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),a,n,r)}function QV(){let e=zC(),t=dd(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},i=null;return console.error("Error handled by React Router default ErrorBoundary:",e),i=y.createElement(y.Fragment,null,y.createElement("p",null,"\u{1F4BF} Hey developer \u{1F44B}"),y.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",y.createElement("code",{style:a},"ErrorBoundary")," or"," ",y.createElement("code",{style:a},"errorElement")," prop on your route.")),y.createElement(y.Fragment,null,y.createElement("h2",null,"Unexpected Application Error!"),y.createElement("h3",{style:{fontStyle:"italic"}},t),n?y.createElement("pre",{style:o},n):null,i)}var JV=y.createElement(QV,null),ZV=class extends y.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?y.createElement(Wn.Provider,{value:this.props.routeContext},y.createElement(Cy.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function GV({routeContext:e,match:t,children:n}){let r=y.useContext(ka);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),y.createElement(Wn.Provider,{value:e},n)}function eU(e,t=[],n=null,r=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let o=e,a=n==null?void 0:n.errors;if(a!=null){let c=o.findIndex(l=>l.route.id&&(a==null?void 0:a[l.route.id])!==void 0);ze(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),o=o.slice(0,Math.min(o.length,c+1))}let i=!1,s=-1;if(n)for(let c=0;c<o.length;c++){let l=o[c];if((l.route.HydrateFallback||l.route.hydrateFallbackElement)&&(s=c),l.route.id){let{loaderData:u,errors:d}=n,f=l.route.loader&&!u.hasOwnProperty(l.route.id)&&(!d||d[l.route.id]===void 0);if(l.route.lazy||f){i=!0,s>=0?o=o.slice(0,s+1):o=[o[0]];break}}}return o.reduceRight((c,l,u)=>{let d,f=!1,h=null,g=null;n&&(d=a&&l.route.id?a[l.route.id]:void 0,h=l.route.errorElement||JV,i&&(s<0&&u===0?(UC("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),f=!0,g=null):s===u&&(f=!0,g=l.route.hydrateFallbackElement||null)));let m=t.concat(o.slice(0,u+1)),v=()=>{let b;return d?b=h:f?b=g:l.route.Component?b=y.createElement(l.route.Component,null):l.route.element?b=l.route.element:b=c,y.createElement(GV,{match:l,routeContext:{outlet:c,matches:m,isDataRoute:n!=null},children:b})};return n&&(l.route.ErrorBoundary||l.route.errorElement||u===0)?y.createElement(ZV,{location:n.location,revalidation:n.revalidation,component:h,error:d,children:v(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):v()},null)}function Oy(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function tU(e){let t=y.useContext(ka);return ze(t,Oy(e)),t}function nU(e){let t=y.useContext(kc);return ze(t,Oy(e)),t}function rU(e){let t=y.useContext(Wn);return ze(t,Oy(e)),t}function Ny(e){let t=rU(e),n=t.matches[t.matches.length-1];return ze(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function oU(){return Ny("useRouteId")}function zC(){var r;let e=y.useContext(Cy),t=nU("useRouteError"),n=Ny("useRouteError");return e!==void 0?e:(r=t.errors)==null?void 0:r[n]}function aU(){let{router:e}=tU("useNavigate"),t=Ny("useNavigate"),n=y.useRef(!1);return BC(()=>{n.current=!0}),y.useCallback(async(r,o={})=>{zt(n.current,FC),n.current&&(typeof r=="number"?e.navigate(r):await e.navigate(r,{fromRouteId:t,...o}))},[e,t])}var VC={};function UC(e,t,n){!t&&!VC[e]&&(VC[e]=!0,zt(!1,n))}var HC={};function WC(e,t){!e&&!HC[t]&&(HC[t]=!0,console.warn(t))}function qC(e){let t={hasErrorBoundary:e.hasErrorBoundary||e.ErrorBoundary!=null||e.errorElement!=null};return e.Component&&(e.element&&zt(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(t,{element:y.createElement(e.Component),Component:void 0})),e.HydrateFallback&&(e.hydrateFallbackElement&&zt(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(t,{hydrateFallbackElement:y.createElement(e.HydrateFallback),HydrateFallback:void 0})),e.ErrorBoundary&&(e.errorElement&&zt(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(t,{errorElement:y.createElement(e.ErrorBoundary),ErrorBoundary:void 0})),t}var iU=class{constructor(){this.status="pending",this.promise=new Promise((e,t)=>{this.resolve=n=>{this.status==="pending"&&(this.status="resolved",e(n))},this.reject=n=>{this.status==="pending"&&(this.status="rejected",t(n))}})}};function sU({router:e,flushSync:t}){let[n,r]=y.useState(e.state),[o,a]=y.useState(),[i,s]=y.useState({isTransitioning:!1}),[c,l]=y.useState(),[u,d]=y.useState(),[f,h]=y.useState(),g=y.useRef(new Map),m=y.useCallback((_,{deletedFetchers:w,flushSync:j,viewTransitionOpts:E})=>{w.forEach(C=>g.current.delete(C)),_.fetchers.forEach((C,M)=>{C.data!==void 0&&g.current.set(M,C.data)}),WC(j===!1||t!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let S=e.window!=null&&e.window.document!=null&&typeof e.window.document.startViewTransition=="function";if(WC(E==null||S,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!E||!S){t&&j?t(()=>r(_)):y.startTransition(()=>r(_));return}if(t&&j){t(()=>{u&&(c&&c.resolve(),u.skipTransition()),s({isTransitioning:!0,flushSync:!0,currentLocation:E.currentLocation,nextLocation:E.nextLocation})});let C=e.window.document.startViewTransition(()=>{t(()=>r(_))});C.finished.finally(()=>{t(()=>{l(void 0),d(void 0),a(void 0),s({isTransitioning:!1})})}),t(()=>d(C));return}u?(c&&c.resolve(),u.skipTransition(),h({state:_,currentLocation:E.currentLocation,nextLocation:E.nextLocation})):(a(_),s({isTransitioning:!0,flushSync:!1,currentLocation:E.currentLocation,nextLocation:E.nextLocation}))},[e.window,t,u,c]);y.useLayoutEffect(()=>e.subscribe(m),[e,m]),y.useEffect(()=>{i.isTransitioning&&!i.flushSync&&l(new iU)},[i]),y.useEffect(()=>{if(c&&o&&e.window){let _=o,w=c.promise,j=e.window.document.startViewTransition(async()=>{y.startTransition(()=>r(_)),await w});j.finished.finally(()=>{l(void 0),d(void 0),a(void 0),s({isTransitioning:!1})}),d(j)}},[o,c,e.window]),y.useEffect(()=>{c&&o&&n.location.key===o.location.key&&c.resolve()},[c,u,n.location,o]),y.useEffect(()=>{!i.isTransitioning&&f&&(a(f.state),s({isTransitioning:!0,flushSync:!1,currentLocation:f.currentLocation,nextLocation:f.nextLocation}),h(void 0))},[i.isTransitioning,f]);let v=y.useMemo(()=>({createHref:e.createHref,encodeLocation:e.encodeLocation,go:_=>e.navigate(_),push:(_,w,j)=>e.navigate(_,{state:w,preventScrollReset:j==null?void 0:j.preventScrollReset}),replace:(_,w,j)=>e.navigate(_,{replace:!0,state:w,preventScrollReset:j==null?void 0:j.preventScrollReset})}),[e]),b=e.basename||"/",x=y.useMemo(()=>({router:e,navigator:v,static:!1,basename:b}),[e,v,b]);return y.createElement(y.Fragment,null,y.createElement(ka.Provider,{value:x},y.createElement(kc.Provider,{value:n},y.createElement(LC.Provider,{value:g.current},y.createElement(Sy.Provider,{value:i},y.createElement(fU,{basename:b,location:n.location,navigationType:n.historyAction,navigator:v},y.createElement(cU,{routes:e.routes,future:e.future,state:n})))))),null)}var cU=y.memo(lU);function lU({routes:e,future:t,state:n}){return XV(e,void 0,n,t)}function uU({to:e,replace:t,state:n,relative:r}){ze(ki(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=y.useContext(lr);zt(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=y.useContext(Wn),{pathname:i}=Ar(),s=Pa(),c=ld(e,cd(a),i,r==="path"),l=JSON.stringify(c);return y.useEffect(()=>{s(JSON.parse(l),{replace:t,state:n,relative:r})},[s,l,r,t,n]),null}function dU(e){return KV(e.context)}function Ko(e){ze(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function fU({basename:e="/",children:t=null,location:n,navigationType:r="POP",navigator:o,static:a=!1}){ze(!ki(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let i=e.replace(/^\/*/,"/"),s=y.useMemo(()=>({basename:i,navigator:o,static:a,future:{}}),[i,o,a]);typeof n=="string"&&(n=no(n));let{pathname:c="/",search:l="",hash:u="",state:d=null,key:f="default"}=n,h=y.useMemo(()=>{let g=sr(c,i);return g==null?null:{location:{pathname:g,search:l,hash:u,state:d,key:f},navigationType:r}},[i,c,l,u,d,f,r]);return zt(h!=null,`<Router basename="${i}"> is not able to match the URL "${c}${l}${u}" because it does not start with the basename, so the <Router> won't render anything.`),h==null?null:y.createElement(lr.Provider,{value:s},y.createElement(pd.Provider,{children:t,value:h}))}function My(e,t=[]){let n=[];return y.Children.forEach(e,(r,o)=>{if(!y.isValidElement(r))return;let a=[...t,o];if(r.type===y.Fragment){n.push.apply(n,My(r.props.children,a));return}ze(r.type===Ko,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ze(!r.props.index||!r.props.children,"An index route cannot have child routes.");let i={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(i.children=My(r.props.children,a)),n.push(i)}),n}var pU=My,hd="get",md="application/x-www-form-urlencoded";function yd(e){return e!=null&&typeof e.tagName=="string"}function hU(e){return yd(e)&&e.tagName.toLowerCase()==="button"}function mU(e){return yd(e)&&e.tagName.toLowerCase()==="form"}function yU(e){return yd(e)&&e.tagName.toLowerCase()==="input"}function gU(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function vU(e,t){return e.button===0&&(!t||t==="_self")&&!gU(e)}var gd=null;function bU(){if(gd===null)try{new FormData(document.createElement("form"),0),gd=!1}catch{gd=!0}return gd}var xU=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ky(e){return e!=null&&!xU.has(e)?(zt(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${md}"`),null):e}function wU(e,t){let n,r,o,a,i;if(mU(e)){let s=e.getAttribute("action");r=s?sr(s,t):null,n=e.getAttribute("method")||hd,o=ky(e.getAttribute("enctype"))||md,a=new FormData(e)}else if(hU(e)||yU(e)&&(e.type==="submit"||e.type==="image")){let s=e.form;if(s==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=e.getAttribute("formaction")||s.getAttribute("action");if(r=c?sr(c,t):null,n=e.getAttribute("formmethod")||s.getAttribute("method")||hd,o=ky(e.getAttribute("formenctype"))||ky(s.getAttribute("enctype"))||md,a=new FormData(s,e),!bU()){let{name:l,type:u,value:d}=e;if(u==="image"){let f=l?`${l}.`:"";a.append(`${f}x`,"0"),a.append(`${f}y`,"0")}else l&&a.append(l,d)}}else{if(yd(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=hd,r=null,o=md,i=e}return a&&o==="text/plain"&&(i=a,a=void 0),{action:r,method:n.toLowerCase(),encType:o,formData:a,body:i}}function Py(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}async function _U(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module).then(async r=>(await r.__tla,r));return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function jU(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function EU(e,t,n){let r=await Promise.all(e.map(async o=>{let a=t.routes[o.route.id];if(a){let i=await _U(a,n);return i.links?i.links():[]}return[]}));return NU(r.flat(1).filter(jU).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function YC(e,t,n,r,o,a){let i=(c,l)=>n[l]?c.route.id!==n[l].route.id:!0,s=(c,l)=>{var u;return n[l].pathname!==c.pathname||((u=n[l].route.path)==null?void 0:u.endsWith("*"))&&n[l].params["*"]!==c.params["*"]};return a==="assets"?t.filter((c,l)=>i(c,l)||s(c,l)):a==="data"?t.filter((c,l)=>{var d;let u=r.routes[c.route.id];if(!u||!u.hasLoader)return!1;if(i(c,l)||s(c,l))return!0;if(c.route.shouldRevalidate){let f=c.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((d=n[0])==null?void 0:d.params)||{},nextUrl:new URL(e,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function SU(e,t){return CU(e.map(n=>{let r=t.routes[n.route.id];if(!r)return[];let o=[r.module];return r.imports&&(o=o.concat(r.imports)),o}).flat(1))}function CU(e){return[...new Set(e)]}function OU(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}function NU(e,t){let n=new Set;return new Set(t),e.reduce((r,o)=>{let a=JSON.stringify(OU(o));return n.has(a)||(n.add(a),r.push({key:a,link:o})),r},[])}function MU(e){let t=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return t.pathname==="/"?t.pathname="_root.data":t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function kU(){let e=y.useContext(ka);return Py(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function PU(){let e=y.useContext(kc);return Py(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var Ay=y.createContext(void 0);Ay.displayName="FrameworkContext";function KC(){let e=y.useContext(Ay);return Py(e,"You must render this element inside a <HydratedRouter> element"),e}function AU(e,t){let n=y.useContext(Ay),[r,o]=y.useState(!1),[a,i]=y.useState(!1),{onFocus:s,onBlur:c,onMouseEnter:l,onMouseLeave:u,onTouchStart:d}=t,f=y.useRef(null);y.useEffect(()=>{if(e==="render"&&i(!0),e==="viewport"){let m=b=>{b.forEach(x=>{i(x.isIntersecting)})},v=new IntersectionObserver(m,{threshold:.5});return f.current&&v.observe(f.current),()=>{v.disconnect()}}},[e]),y.useEffect(()=>{if(r){let m=setTimeout(()=>{i(!0)},100);return()=>{clearTimeout(m)}}},[r]);let h=()=>{o(!0)},g=()=>{o(!1),i(!1)};return n?e!=="intent"?[a,f,{}]:[a,f,{onFocus:Ac(s,h),onBlur:Ac(c,g),onMouseEnter:Ac(l,h),onMouseLeave:Ac(u,g),onTouchStart:Ac(d,h)}]:[!1,f,{}]}function Ac(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function TU({page:e,...t}){let{router:n}=kU(),r=y.useMemo(()=>qo(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?y.createElement(IU,{page:e,matches:r,...t}):(console.warn(`Tried to prefetch ${e} but no routes matched.`),null)}function RU(e){let{manifest:t,routeModules:n}=KC(),[r,o]=y.useState([]);return y.useEffect(()=>{let a=!1;return EU(e,t,n).then(i=>{a||o(i)}),()=>{a=!0}},[e,t,n]),r}function IU({page:e,matches:t,...n}){let r=Ar(),{manifest:o,routeModules:a}=KC(),{loaderData:i,matches:s}=PU(),c=y.useMemo(()=>YC(e,t,s,o,r,"data"),[e,t,s,o,r]),l=y.useMemo(()=>YC(e,t,s,o,r,"assets"),[e,t,s,o,r]),u=y.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let h=new Set,g=!1;if(t.forEach(v=>{var x;let b=o.routes[v.route.id];!b||!b.hasLoader||(!c.some(_=>_.route.id===v.route.id)&&v.route.id in i&&((x=a[v.route.id])!=null&&x.shouldRevalidate)||b.hasClientLoader?g=!0:h.add(v.route.id))}),h.size===0)return[];let m=MU(e);return g&&h.size>0&&m.searchParams.set("_routes",t.filter(v=>h.has(v.route.id)).map(v=>v.route.id).join(",")),[m.pathname+m.search]},[i,r,o,c,t,e,a]),d=y.useMemo(()=>SU(l,o),[l,o]),f=RU(l);return y.createElement(y.Fragment,null,u.map(h=>y.createElement("link",{key:h,rel:"prefetch",as:"fetch",href:h,...n})),d.map(h=>y.createElement("link",{key:h,rel:"modulepreload",href:h,...n})),f.map(({key:h,link:g})=>y.createElement("link",{key:h,...g})))}function DU(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var XC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{XC&&(window.__reactRouterVersion="7.0.2")}catch{}function QC(e,t){return xC({basename:t==null?void 0:t.basename,future:t==null?void 0:t.future,history:Q7({window:t==null?void 0:t.window}),hydrationData:(t==null?void 0:t.hydrationData)||JC(),routes:e,mapRouteProperties:qC,dataStrategy:t==null?void 0:t.dataStrategy,patchRoutesOnNavigation:t==null?void 0:t.patchRoutesOnNavigation,window:t==null?void 0:t.window}).initialize()}function LU(e,t){return xC({basename:t==null?void 0:t.basename,future:t==null?void 0:t.future,history:J7({window:t==null?void 0:t.window}),hydrationData:JC(),routes:e,mapRouteProperties:qC,dataStrategy:t==null?void 0:t.dataStrategy,patchRoutesOnNavigation:t==null?void 0:t.patchRoutesOnNavigation,window:t==null?void 0:t.window}).initialize()}function JC(){let e=window==null?void 0:window.__staticRouterHydrationData;return e&&e.errors&&(e={...e,errors:FU(e.errors)}),e}function FU(e){if(!e)return null;let t=Object.entries(e),n={};for(let[r,o]of t)if(o&&o.__type==="RouteErrorResponse")n[r]=new ud(o.status,o.statusText,o.data,o.internal===!0);else if(o&&o.__type==="Error"){if(o.__subType){let a=window[o.__subType];if(typeof a=="function")try{let i=new a(o.message);i.stack="",n[r]=i}catch{}}if(n[r]==null){let a=new Error(o.message);a.stack="",n[r]=a}}else n[r]=o;return n}var ZC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ty=y.forwardRef(function({onClick:e,discover:t="render",prefetch:n="none",relative:r,reloadDocument:o,replace:a,state:i,target:s,to:c,preventScrollReset:l,viewTransition:u,...d},f){let{basename:h}=y.useContext(lr),g=typeof c=="string"&&ZC.test(c),m,v=!1;if(typeof c=="string"&&g&&(m=c,XC))try{let C=new URL(window.location.href),M=c.startsWith("//")?new URL(C.protocol+c):new URL(c),N=sr(M.pathname,h);M.origin===C.origin&&N!=null?c=N+M.search+M.hash:v=!0}catch{zt(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let b=WV(c,{relative:r}),[x,_,w]=AU(n,d),j=VU(c,{replace:a,state:i,target:s,preventScrollReset:l,relative:r,viewTransition:u});function E(C){e&&e(C),C.defaultPrevented||j(C)}let S=y.createElement("a",{...d,...w,href:m||b,onClick:v||o?e:E,ref:DU(f,_),target:s,"data-discover":!g&&t==="render"?"true":void 0});return x&&!g?y.createElement(y.Fragment,null,S,y.createElement(TU,{page:b})):S});Ty.displayName="Link";var BU=y.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:n="",end:r=!1,style:o,to:a,viewTransition:i,children:s,...c},l){let u=Pc(a,{relative:c.relative}),d=Ar(),f=y.useContext(kc),{navigator:h,basename:g}=y.useContext(lr),m=f!=null&&YU(u)&&i===!0,v=h.encodeLocation?h.encodeLocation(u).pathname:u.pathname,b=d.pathname,x=f&&f.navigation&&f.navigation.location?f.navigation.location.pathname:null;t||(b=b.toLowerCase(),x=x?x.toLowerCase():null,v=v.toLowerCase()),x&&g&&(x=sr(x,g)||x);const _=v!=="/"&&v.endsWith("/")?v.length-1:v.length;let w=b===v||!r&&b.startsWith(v)&&b.charAt(_)==="/",j=x!=null&&(x===v||!r&&x.startsWith(v)&&x.charAt(v.length)==="/"),E={isActive:w,isPending:j,isTransitioning:m},S=w?e:void 0,C;typeof n=="function"?C=n(E):C=[n,w?"active":null,j?"pending":null,m?"transitioning":null].filter(Boolean).join(" ");let M=typeof o=="function"?o(E):o;return y.createElement(Ty,{...c,"aria-current":S,className:C,ref:l,style:M,to:a,viewTransition:i},typeof s=="function"?s(E):s)});BU.displayName="NavLink";var $U=y.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:r,replace:o,state:a,method:i=hd,action:s,onSubmit:c,relative:l,preventScrollReset:u,viewTransition:d,...f},h)=>{let g=WU(),m=qU(s,{relative:l}),v=i.toLowerCase()==="get"?"get":"post",b=typeof s=="string"&&ZC.test(s),x=_=>{if(c&&c(_),_.defaultPrevented)return;_.preventDefault();let w=_.nativeEvent.submitter,j=(w==null?void 0:w.getAttribute("formmethod"))||i;g(w||_.currentTarget,{fetcherKey:t,method:j,navigate:n,replace:o,state:a,relative:l,preventScrollReset:u,viewTransition:d})};return y.createElement("form",{ref:h,method:v,action:m,onSubmit:r?c:x,...f,"data-discover":!b&&e==="render"?"true":void 0})});$U.displayName="Form";function zU(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function GC(e){let t=y.useContext(ka);return ze(t,zU(e)),t}function VU(e,{target:t,replace:n,state:r,preventScrollReset:o,relative:a,viewTransition:i}={}){let s=Pa(),c=Ar(),l=Pc(e,{relative:a});return y.useCallback(u=>{if(vU(u,t)){u.preventDefault();let d=n!==void 0?n:to(c)===to(l);s(e,{replace:d,state:r,preventScrollReset:o,relative:a,viewTransition:i})}},[c,s,l,n,r,t,e,o,a,i])}var UU=0,HU=()=>`__${String(++UU)}__`;function WU(){let{router:e}=GC("useSubmit"),{basename:t}=y.useContext(lr),n=oU();return y.useCallback(async(r,o={})=>{let{action:a,method:i,encType:s,formData:c,body:l}=wU(r,t);if(o.navigate===!1){let u=o.fetcherKey||HU();await e.fetch(u,n,o.action||a,{preventScrollReset:o.preventScrollReset,formData:c,body:l,formMethod:o.method||i,formEncType:o.encType||s,flushSync:o.flushSync})}else await e.navigate(o.action||a,{preventScrollReset:o.preventScrollReset,formData:c,body:l,formMethod:o.method||i,formEncType:o.encType||s,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[e,t,n])}function qU(e,{relative:t}={}){let{basename:n}=y.useContext(lr),r=y.useContext(Wn);ze(r,"useFormAction must be used inside a RouteContext");let[o]=r.matches.slice(-1),a={...Pc(e||".",{relative:t})},i=Ar();if(e==null){a.search=i.search;let s=new URLSearchParams(a.search),c=s.getAll("index");if(c.some(l=>l==="")){s.delete("index"),c.filter(u=>u).forEach(u=>s.append("index",u));let l=s.toString();a.search=l?`?${l}`:""}}return(!e||e===".")&&o.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(a.pathname=a.pathname==="/"?n:Pr([n,a.pathname])),to(a)}function YU(e,t={}){let n=y.useContext(Sy);ze(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=GC("useViewTransitionState"),o=Pc(e,{relative:t.relative});if(!n.isTransitioning)return!1;let a=sr(n.currentLocation.pathname,r)||n.currentLocation.pathname,i=sr(n.nextLocation.pathname,r)||n.nextLocation.pathname;return sd(o.pathname,i)!=null||sd(o.pathname,a)!=null}new TextEncoder;function KU(e){return y.createElement(sU,{flushSync:cc.flushSync,...e})}var XU=K_e.useId||(()=>{}),QU=0;mt=function(e){const[t,n]=y.useState(XU());return Bt(()=>{e||n(r=>r??String(QU++))},[e]),e||(t?`radix-${t}`:"")};var Ry="Collapsible",[JU,eO]=Pn(Ry),[ZU,Iy]=JU(Ry),tO=y.forwardRef((e,t)=>{const{__scopeCollapsible:n,open:r,defaultOpen:o,disabled:a,onOpenChange:i,...s}=e,[c=!1,l]=nn({prop:r,defaultProp:o,onChange:i});return p.jsx(ZU,{scope:n,disabled:a,contentId:mt(),open:c,onOpenToggle:y.useCallback(()=>l(u=>!u),[l]),children:p.jsx(Ne.div,{"data-state":By(c),"data-disabled":a?"":void 0,...s,ref:t})})});tO.displayName=Ry;var nO="CollapsibleTrigger",Dy=y.forwardRef((e,t)=>{const{__scopeCollapsible:n,...r}=e,o=Iy(nO,n);return p.jsx(Ne.button,{type:"button","aria-controls":o.contentId,"aria-expanded":o.open||!1,"data-state":By(o.open),"data-disabled":o.disabled?"":void 0,disabled:o.disabled,...r,ref:t,onClick:ye(e.onClick,o.onOpenToggle)})});Dy.displayName=nO;var Ly="CollapsibleContent",Fy=y.forwardRef((e,t)=>{const{forceMount:n,...r}=e,o=Iy(Ly,e.__scopeCollapsible);return p.jsx(rr,{present:n||o.open,children:({present:a})=>p.jsx(GU,{...r,ref:t,present:a})})});Fy.displayName=Ly;var GU=y.forwardRef((e,t)=>{const{__scopeCollapsible:n,present:r,children:o,...a}=e,i=Iy(Ly,n),[s,c]=y.useState(r),l=y.useRef(null),u=lt(t,l),d=y.useRef(0),f=d.current,h=y.useRef(0),g=h.current,m=i.open||s,v=y.useRef(m),b=y.useRef();return y.useEffect(()=>{const x=requestAnimationFrame(()=>v.current=!1);return()=>cancelAnimationFrame(x)},[]),Bt(()=>{const x=l.current;if(x){b.current=b.current||{transitionDuration:x.style.transitionDuration,animationName:x.style.animationName},x.style.transitionDuration="0s",x.style.animationName="none";const _=x.getBoundingClientRect();d.current=_.height,h.current=_.width,v.current||(x.style.transitionDuration=b.current.transitionDuration,x.style.animationName=b.current.animationName),c(r)}},[i.open,r]),p.jsx(Ne.div,{"data-state":By(i.open),"data-disabled":i.disabled?"":void 0,id:i.contentId,hidden:!m,...a,ref:u,style:{"--radix-collapsible-content-height":f?`${f}px`:void 0,"--radix-collapsible-content-width":g?`${g}px`:void 0,...e.style},children:m&&o})});function By(e){return e?"open":"closed"}var rO=tO,eH=Dy,tH=Fy;const nH=rO,rH=Dy,oH=Fy,$y=768;function aH(){const[e,t]=y.useState(void 0);return y.useEffect(()=>{const n=window.matchMedia(`(max-width: ${$y-1}px)`),r=()=>{t(window.innerWidth<$y)};return n.addEventListener("change",r),t(window.innerWidth<$y),()=>n.removeEventListener("change",r)},[]),!!e}let Tc;Tc=Zr("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),ot=y.forwardRef(({className:e,variant:t,size:n,asChild:r=!1,...o},a)=>{const i=r?Uo:"button";return p.jsx(i,{className:K(Tc({variant:t,size:n,className:e})),ref:a,...o})}),ot.displayName="Button";const hn=y.forwardRef(({className:e,type:t,...n},r)=>p.jsx("input",{type:t,className:K("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...n}));hn.displayName="Input";var iH="Separator",oO="horizontal",sH=["horizontal","vertical"],aO=y.forwardRef((e,t)=>{const{decorative:n,orientation:r=oO,...o}=e,a=cH(r)?r:oO,i=n?{role:"none"}:{"aria-orientation":a==="vertical"?a:void 0,role:"separator"};return p.jsx(Ne.div,{"data-orientation":a,...i,...o,ref:t})});aO.displayName=iH;function cH(e){return sH.includes(e)}Rm=aO,Ei=y.forwardRef(({className:e,orientation:t="horizontal",decorative:n=!0,...r},o)=>p.jsx(Rm,{ref:o,decorative:n,orientation:t,className:K("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...r})),Ei.displayName=Rm.displayName;var zy="focusScope.autoFocusOnMount",Vy="focusScope.autoFocusOnUnmount",iO={bubbles:!1,cancelable:!0},lH="FocusScope",vd=y.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:o,onUnmountAutoFocus:a,...i}=e,[s,c]=y.useState(null),l=An(o),u=An(a),d=y.useRef(null),f=lt(t,m=>c(m)),h=y.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;y.useEffect(()=>{if(r){let m=function(_){if(h.paused||!s)return;const w=_.target;s.contains(w)?d.current=w:Xo(d.current,{select:!0})},v=function(_){if(h.paused||!s)return;const w=_.relatedTarget;w!==null&&(s.contains(w)||Xo(d.current,{select:!0}))},b=function(_){if(document.activeElement===document.body)for(const w of _)w.removedNodes.length>0&&Xo(s)};document.addEventListener("focusin",m),document.addEventListener("focusout",v);const x=new MutationObserver(b);return s&&x.observe(s,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",m),document.removeEventListener("focusout",v),x.disconnect()}}},[r,s,h.paused]),y.useEffect(()=>{if(s){lO.add(h);const m=document.activeElement;if(!s.contains(m)){const v=new CustomEvent(zy,iO);s.addEventListener(zy,l),s.dispatchEvent(v),v.defaultPrevented||(uH(mH(sO(s)),{select:!0}),document.activeElement===m&&Xo(s))}return()=>{s.removeEventListener(zy,l),setTimeout(()=>{const v=new CustomEvent(Vy,iO);s.addEventListener(Vy,u),s.dispatchEvent(v),v.defaultPrevented||Xo(m??document.body,{select:!0}),s.removeEventListener(Vy,u),lO.remove(h)},0)}}},[s,l,u,h]);const g=y.useCallback(m=>{if(!n&&!r||h.paused)return;const v=m.key==="Tab"&&!m.altKey&&!m.ctrlKey&&!m.metaKey,b=document.activeElement;if(v&&b){const x=m.currentTarget,[_,w]=dH(x);_&&w?!m.shiftKey&&b===w?(m.preventDefault(),n&&Xo(_,{select:!0})):m.shiftKey&&b===_&&(m.preventDefault(),n&&Xo(w,{select:!0})):b===x&&m.preventDefault()}},[n,r,h.paused]);return p.jsx(Ne.div,{tabIndex:-1,...i,ref:f,onKeyDown:g})});vd.displayName=lH;function uH(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(Xo(r,{select:t}),document.activeElement!==n)return}function dH(e){const t=sO(e),n=cO(t,e),r=cO(t.reverse(),e);return[n,r]}function sO(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const o=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||o?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function cO(e,t){for(const n of e)if(!fH(n,{upTo:t}))return n}function fH(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function pH(e){return e instanceof HTMLInputElement&&"select"in e}function Xo(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&pH(e)&&t&&e.select()}}var lO=hH();function hH(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=uO(e,t),e.unshift(t)},remove(t){var n;e=uO(e,t),(n=e[0])==null||n.resume()}}}function uO(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function mH(e){return e.filter(t=>t.tagName!=="A")}var Uy=0;_c=function(){y.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??dO()),document.body.insertAdjacentElement("beforeend",e[1]??dO()),Uy++,()=>{Uy===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),Uy--}},[])};function dO(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}Qt=function(){return Qt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Qt.apply(this,arguments)},ed=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n},Gm=function(e,t,n){if(n||arguments.length===2)for(var r=0,o=t.length,a;r<o;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))};var bd="right-scroll-bar-position",xd="width-before-scroll-bar",yH="with-scroll-bars-hidden",gH="--removed-body-scroll-bar-size";function Hy(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function vH(e,t){var n=y.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var o=n.value;o!==r&&(n.value=r,n.callback(r,o))}}}})[0];return n.callback=t,n.facade}var bH=typeof window<"u"?y.useLayoutEffect:y.useEffect,fO=new WeakMap;function xH(e,t){var n=vH(null,function(r){return e.forEach(function(o){return Hy(o,r)})});return bH(function(){var r=fO.get(n);if(r){var o=new Set(r),a=new Set(e),i=n.current;o.forEach(function(s){a.has(s)||Hy(s,null)}),a.forEach(function(s){o.has(s)||Hy(s,i)})}fO.set(n,e)},[e]),n}function wH(e){return e}function _H(e,t){t===void 0&&(t=wH);var n=[],r=!1,o={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(a){var i=t(a,r);return n.push(i),function(){n=n.filter(function(s){return s!==i})}},assignSyncMedium:function(a){for(r=!0;n.length;){var i=n;n=[],i.forEach(a)}n={push:function(s){return a(s)},filter:function(){return n}}},assignMedium:function(a){r=!0;var i=[];if(n.length){var s=n;n=[],s.forEach(a),i=n}var c=function(){var u=i;i=[],u.forEach(a)},l=function(){return Promise.resolve().then(c)};l(),n={push:function(u){i.push(u),l()},filter:function(u){return i=i.filter(u),n}}}};return o}Jm=function(e){e===void 0&&(e={});var t=_H(null);return t.options=Qt({async:!0,ssr:!1},e),t};var pO=function(e){var t=e.sideCar,n=ed(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return y.createElement(r,Qt({},n))};pO.isSideCarExport=!0,ey=function(e,t){return e.useMedium(t),pO};var hO=Jm(),Wy=function(){},wd=y.forwardRef(function(e,t){var n=y.useRef(null),r=y.useState({onScrollCapture:Wy,onWheelCapture:Wy,onTouchMoveCapture:Wy}),o=r[0],a=r[1],i=e.forwardProps,s=e.children,c=e.className,l=e.removeScrollBar,u=e.enabled,d=e.shards,f=e.sideCar,h=e.noIsolation,g=e.inert,m=e.allowPinchZoom,v=e.as,b=v===void 0?"div":v,x=e.gapMode,_=ed(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),w=f,j=xH([n,t]),E=Qt(Qt({},_),o);return y.createElement(y.Fragment,null,u&&y.createElement(w,{sideCar:hO,removeScrollBar:l,shards:d,noIsolation:h,inert:g,setCallbacks:a,allowPinchZoom:!!m,lockRef:n,gapMode:x}),i?y.cloneElement(y.Children.only(s),Qt(Qt({},E),{ref:j})):y.createElement(b,Qt({},E,{className:c,ref:j}),s))});wd.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},wd.classNames={fullWidth:xd,zeroRight:bd},Zm=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function jH(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=Zm();return t&&e.setAttribute("nonce",t),e}function EH(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function SH(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}let mO,yO,gO,_d,vO,bO,xO,Aa,wO,qy,_O,jO,jd;if(mO=function(){var e=0,t=null;return{add:function(n){e==0&&(t=jH())&&(EH(t,n),SH(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},yO=function(){var e=mO();return function(t,n){y.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},td=function(){var e=yO(),t=function(n){var r=n.styles,o=n.dynamic;return e(r,o),null};return t},gO={left:0,top:0,right:0,gap:0},_d=function(e){return parseInt(e||"",10)||0},vO=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],o=t[e==="padding"?"paddingRight":"marginRight"];return[_d(n),_d(r),_d(o)]},bO=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return gO;var t=vO(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},xO=td(),Aa="data-scroll-locked",wO=function(e,t,n,r){var o=e.left,a=e.top,i=e.right,s=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(yH,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(s,"px ").concat(r,`;
  }
  body[`).concat(Aa,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(o,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(i,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(s,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(s,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(bd,` {
    right: `).concat(s,"px ").concat(r,`;
  }
  
  .`).concat(xd,` {
    margin-right: `).concat(s,"px ").concat(r,`;
  }
  
  .`).concat(bd," .").concat(bd,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(xd," .").concat(xd,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Aa,`] {
    `).concat(gH,": ").concat(s,`px;
  }
`)},qy=function(){var e=parseInt(document.body.getAttribute(Aa)||"0",10);return isFinite(e)?e:0},_O=function(){y.useEffect(function(){return document.body.setAttribute(Aa,(qy()+1).toString()),function(){var e=qy()-1;e<=0?document.body.removeAttribute(Aa):document.body.setAttribute(Aa,e.toString())}},[])},jO=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,o=r===void 0?"margin":r;_O();var a=y.useMemo(function(){return bO(o)},[o]);return y.createElement(xO,{styles:wO(a,!t,o,n?"":"!important")})},jd=!1,typeof window<"u")try{var Ed=Object.defineProperty({},"passive",{get:function(){return jd=!0,!0}});window.addEventListener("test",Ed,Ed),window.removeEventListener("test",Ed,Ed)}catch{jd=!1}var Pi=jd?{passive:!1}:!1,CH=function(e){return e.tagName==="TEXTAREA"},EO=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!CH(e)&&n[t]==="visible")},OH=function(e){return EO(e,"overflowY")},NH=function(e){return EO(e,"overflowX")},SO=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var o=CO(e,r);if(o){var a=OO(e,r),i=a[1],s=a[2];if(i>s)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},MH=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},kH=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},CO=function(e,t){return e==="v"?OH(t):NH(t)},OO=function(e,t){return e==="v"?MH(t):kH(t)},PH=function(e,t){return e==="h"&&t==="rtl"?-1:1},AH=function(e,t,n,r,o){var a=PH(e,window.getComputedStyle(t).direction),i=a*r,s=n.target,c=t.contains(s),l=!1,u=i>0,d=0,f=0;do{var h=OO(e,s),g=h[0],m=h[1],v=h[2],b=m-v-a*g;(g||b)&&CO(e,s)&&(d+=b,f+=g),s instanceof ShadowRoot?s=s.host:s=s.parentNode}while(!c&&s!==document.body||c&&(t.contains(s)||t===s));return(u&&(Math.abs(d)<1||!o)||!u&&(Math.abs(f)<1||!o))&&(l=!0),l},Sd=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},NO=function(e){return[e.deltaX,e.deltaY]},MO=function(e){return e&&"current"in e?e.current:e},TH=function(e,t){return e[0]===t[0]&&e[1]===t[1]},RH=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},IH=0,Ai=[];function DH(e){var t=y.useRef([]),n=y.useRef([0,0]),r=y.useRef(),o=y.useState(IH++)[0],a=y.useState(td)[0],i=y.useRef(e);y.useEffect(function(){i.current=e},[e]),y.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(o));var m=Gm([e.lockRef.current],(e.shards||[]).map(MO),!0).filter(Boolean);return m.forEach(function(v){return v.classList.add("allow-interactivity-".concat(o))}),function(){document.body.classList.remove("block-interactivity-".concat(o)),m.forEach(function(v){return v.classList.remove("allow-interactivity-".concat(o))})}}},[e.inert,e.lockRef.current,e.shards]);var s=y.useCallback(function(m,v){if("touches"in m&&m.touches.length===2||m.type==="wheel"&&m.ctrlKey)return!i.current.allowPinchZoom;var b=Sd(m),x=n.current,_="deltaX"in m?m.deltaX:x[0]-b[0],w="deltaY"in m?m.deltaY:x[1]-b[1],j,E=m.target,S=Math.abs(_)>Math.abs(w)?"h":"v";if("touches"in m&&S==="h"&&E.type==="range")return!1;var C=SO(S,E);if(!C)return!0;if(C?j=S:(j=S==="v"?"h":"v",C=SO(S,E)),!C)return!1;if(!r.current&&"changedTouches"in m&&(_||w)&&(r.current=j),!j)return!0;var M=r.current||j;return AH(M,v,m,M==="h"?_:w,!0)},[]),c=y.useCallback(function(m){var v=m;if(!(!Ai.length||Ai[Ai.length-1]!==a)){var b="deltaY"in v?NO(v):Sd(v),x=t.current.filter(function(j){return j.name===v.type&&(j.target===v.target||v.target===j.shadowParent)&&TH(j.delta,b)})[0];if(x&&x.should){v.cancelable&&v.preventDefault();return}if(!x){var _=(i.current.shards||[]).map(MO).filter(Boolean).filter(function(j){return j.contains(v.target)}),w=_.length>0?s(v,_[0]):!i.current.noIsolation;w&&v.cancelable&&v.preventDefault()}}},[]),l=y.useCallback(function(m,v,b,x){var _={name:m,delta:v,target:b,should:x,shadowParent:LH(b)};t.current.push(_),setTimeout(function(){t.current=t.current.filter(function(w){return w!==_})},1)},[]),u=y.useCallback(function(m){n.current=Sd(m),r.current=void 0},[]),d=y.useCallback(function(m){l(m.type,NO(m),m.target,s(m,e.lockRef.current))},[]),f=y.useCallback(function(m){l(m.type,Sd(m),m.target,s(m,e.lockRef.current))},[]);y.useEffect(function(){return Ai.push(a),e.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:f}),document.addEventListener("wheel",c,Pi),document.addEventListener("touchmove",c,Pi),document.addEventListener("touchstart",u,Pi),function(){Ai=Ai.filter(function(m){return m!==a}),document.removeEventListener("wheel",c,Pi),document.removeEventListener("touchmove",c,Pi),document.removeEventListener("touchstart",u,Pi)}},[]);var h=e.removeScrollBar,g=e.inert;return y.createElement(y.Fragment,null,g?y.createElement(a,{styles:RH(o)}):null,h?y.createElement(jO,{gapMode:e.gapMode}):null)}function LH(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const FH=ey(hO,DH);var Cd=y.forwardRef(function(e,t){return y.createElement(wd,Qt({},e,{ref:t,sideCar:FH}))});Cd.classNames=wd.classNames;let kO,Ta,Rc,Ic,Od,Yy,PO,AO,Nd,Ky,Xy,TO,qn,Qy;kO=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Ta=new WeakMap,Rc=new WeakMap,Ic={},Od=0,Yy=function(e){return e&&(e.host||Yy(e.parentNode))},PO=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=Yy(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},AO=function(e,t,n,r){var o=PO(t,Array.isArray(e)?e:[e]);Ic[n]||(Ic[n]=new WeakMap);var a=Ic[n],i=[],s=new Set,c=new Set(o),l=function(d){!d||s.has(d)||(s.add(d),l(d.parentNode))};o.forEach(l);var u=function(d){!d||c.has(d)||Array.prototype.forEach.call(d.children,function(f){if(s.has(f))u(f);else try{var h=f.getAttribute(r),g=h!==null&&h!=="false",m=(Ta.get(f)||0)+1,v=(a.get(f)||0)+1;Ta.set(f,m),a.set(f,v),i.push(f),m===1&&g&&Rc.set(f,!0),v===1&&f.setAttribute(n,"true"),g||f.setAttribute(r,"true")}catch(b){console.error("aria-hidden: cannot operate on ",f,b)}})};return u(t),s.clear(),Od++,function(){i.forEach(function(d){var f=Ta.get(d)-1,h=a.get(d)-1;Ta.set(d,f),a.set(d,h),f||(Rc.has(d)||d.removeAttribute(r),Rc.delete(d)),h||d.removeAttribute(n)}),Od--,Od||(Ta=new WeakMap,Ta=new WeakMap,Rc=new WeakMap,Ic={})}},wc=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),o=kO(e);return o?(r.push.apply(r,Array.from(o.querySelectorAll("[aria-live]"))),AO(r,o,n,"aria-hidden")):function(){return null}},Nd="Dialog",[Ky,Xy]=Pn(Nd),[TO,qn]=Ky(Nd),Qy=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:o,onOpenChange:a,modal:i=!0}=e,s=y.useRef(null),c=y.useRef(null),[l=!1,u]=nn({prop:r,defaultProp:o,onChange:a});return p.jsx(TO,{scope:t,triggerRef:s,contentRef:c,contentId:mt(),titleId:mt(),descriptionId:mt(),open:l,onOpenChange:u,onOpenToggle:y.useCallback(()=>u(d=>!d),[u]),modal:i,children:n})},Qy.displayName=Nd;var RO="DialogTrigger",IO=y.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=qn(RO,n),a=lt(t,o.triggerRef);return p.jsx(Ne.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":Gy(o.open),...r,ref:a,onClick:ye(e.onClick,o.onOpenToggle)})});IO.displayName=RO;var Jy="DialogPortal",[BH,DO]=Ky(Jy,{forceMount:void 0}),LO=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:o}=e,a=qn(Jy,t);return p.jsx(BH,{scope:t,forceMount:n,children:y.Children.map(r,i=>p.jsx(rr,{present:n||a.open,children:p.jsx(um,{asChild:!0,container:o,children:i})}))})};LO.displayName=Jy;var Md="DialogOverlay",FO=y.forwardRef((e,t)=>{const n=DO(Md,e.__scopeDialog),{forceMount:r=n.forceMount,...o}=e,a=qn(Md,e.__scopeDialog);return a.modal?p.jsx(rr,{present:r||a.open,children:p.jsx($H,{...o,ref:t})}):null});FO.displayName=Md;var $H=y.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=qn(Md,n);return p.jsx(Cd,{as:Uo,allowPinchZoom:!0,shards:[o.contentRef],children:p.jsx(Ne.div,{"data-state":Gy(o.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),Ra="DialogContent",BO=y.forwardRef((e,t)=>{const n=DO(Ra,e.__scopeDialog),{forceMount:r=n.forceMount,...o}=e,a=qn(Ra,e.__scopeDialog);return p.jsx(rr,{present:r||a.open,children:a.modal?p.jsx(zH,{...o,ref:t}):p.jsx(VH,{...o,ref:t})})});BO.displayName=Ra;var zH=y.forwardRef((e,t)=>{const n=qn(Ra,e.__scopeDialog),r=y.useRef(null),o=lt(t,n.contentRef,r);return y.useEffect(()=>{const a=r.current;if(a)return wc(a)},[]),p.jsx($O,{...e,ref:o,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ye(e.onCloseAutoFocus,a=>{var i;a.preventDefault(),(i=n.triggerRef.current)==null||i.focus()}),onPointerDownOutside:ye(e.onPointerDownOutside,a=>{const i=a.detail.originalEvent,s=i.button===0&&i.ctrlKey===!0;(i.button===2||s)&&a.preventDefault()}),onFocusOutside:ye(e.onFocusOutside,a=>a.preventDefault())})}),VH=y.forwardRef((e,t)=>{const n=qn(Ra,e.__scopeDialog),r=y.useRef(!1),o=y.useRef(!1);return p.jsx($O,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var i,s;(i=e.onCloseAutoFocus)==null||i.call(e,a),a.defaultPrevented||(r.current||((s=n.triggerRef.current)==null||s.focus()),a.preventDefault()),r.current=!1,o.current=!1},onInteractOutside:a=>{var s,c;(s=e.onInteractOutside)==null||s.call(e,a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const i=a.target;(c=n.triggerRef.current)!=null&&c.contains(i)&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&o.current&&a.preventDefault()}})}),$O=y.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:o,onCloseAutoFocus:a,...i}=e,s=qn(Ra,n),c=y.useRef(null),l=lt(t,c);return _c(),p.jsxs(p.Fragment,{children:[p.jsx(vd,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:o,onUnmountAutoFocus:a,children:p.jsx(lm,{role:"dialog",id:s.contentId,"aria-describedby":s.descriptionId,"aria-labelledby":s.titleId,"data-state":Gy(s.open),...i,ref:l,onDismiss:()=>s.onOpenChange(!1)})}),p.jsxs(p.Fragment,{children:[p.jsx(YO,{titleId:s.titleId}),p.jsx(XO,{contentRef:c,descriptionId:s.descriptionId})]})]})}),Zy="DialogTitle",zO=y.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=qn(Zy,n);return p.jsx(Ne.h2,{id:o.titleId,...r,ref:t})});zO.displayName=Zy;var VO="DialogDescription",UO=y.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=qn(VO,n);return p.jsx(Ne.p,{id:o.descriptionId,...r,ref:t})});UO.displayName=VO;var HO="DialogClose",WO=y.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=qn(HO,n);return p.jsx(Ne.button,{type:"button",...r,ref:t,onClick:ye(e.onClick,()=>o.onOpenChange(!1))})});WO.displayName=HO;function Gy(e){return e?"open":"closed"}let eg,qO,tg,YO,KO,XO,QO;eg="DialogTitleWarning",[qO,tg]=X_e(eg,{contentName:Ra,titleName:Zy,docsSlug:"dialog"}),YO=({titleId:e})=>{const t=tg(eg),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return y.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},KO="DialogDescriptionWarning",XO=({contentRef:e,descriptionId:t})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${tg(KO).contentName}}.`;return y.useEffect(()=>{var o;const r=(o=e.current)==null?void 0:o.getAttribute("aria-describedby");t&&r&&(document.getElementById(t)||console.warn(n))},[n,e,t]),null},mc=Qy,QO=IO,yc=LO,Ca=FO,Oa=BO,wi=zO,_i=UO,gc=WO;const UH=mc,HH=yc,JO=y.forwardRef(({className:e,...t},n)=>p.jsx(Ca,{className:K("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));JO.displayName=Ca.displayName;const WH=Zr("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),ZO=y.forwardRef(({side:e="right",className:t,children:n,...r},o)=>p.jsxs(HH,{children:[p.jsx(JO,{}),p.jsxs(Oa,{ref:o,className:K(WH({side:e}),t),...r,children:[n,p.jsxs(gc,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[p.jsx(le,{name:"x",className:"h-4 w-4"}),p.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));ZO.displayName=Oa.displayName;const qH=y.forwardRef(({className:e,...t},n)=>p.jsx(wi,{ref:n,className:K("text-lg font-semibold text-foreground",e),...t}));qH.displayName=wi.displayName;const YH=y.forwardRef(({className:e,...t},n)=>p.jsx(_i,{ref:n,className:K("text-sm text-muted-foreground",e),...t}));YH.displayName=_i.displayName;function GO({className:e,...t}){return p.jsx("div",{className:K("animate-pulse rounded-md bg-muted",e),...t})}const KH=["top","right","bottom","left"],Tr=Math.min,Dn=Math.max,kd=Math.round,Pd=Math.floor,Qo=e=>({x:e,y:e}),XH={left:"right",right:"left",bottom:"top",top:"bottom"},QH={start:"end",end:"start"};function ng(e,t,n){return Dn(e,Tr(t,n))}function ro(e,t){return typeof e=="function"?e(t):e}function oo(e){return e.split("-")[0]}function Ti(e){return e.split("-")[1]}function rg(e){return e==="x"?"y":"x"}function og(e){return e==="y"?"height":"width"}function Jo(e){return["top","bottom"].includes(oo(e))?"y":"x"}function ag(e){return rg(Jo(e))}function JH(e,t,n){n===void 0&&(n=!1);const r=Ti(e),o=ag(e),a=og(o);let i=o==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[a]>t.floating[a]&&(i=Ad(i)),[i,Ad(i)]}function ZH(e){const t=Ad(e);return[ig(e),t,ig(t)]}function ig(e){return e.replace(/start|end/g,t=>QH[t])}function GH(e,t,n){const r=["left","right"],o=["right","left"],a=["top","bottom"],i=["bottom","top"];switch(e){case"top":case"bottom":return n?t?o:r:t?r:o;case"left":case"right":return t?a:i;default:return[]}}function eW(e,t,n,r){const o=Ti(e);let a=GH(oo(e),n==="start",r);return o&&(a=a.map(i=>i+"-"+o),t&&(a=a.concat(a.map(ig)))),a}function Ad(e){return e.replace(/left|right|bottom|top/g,t=>XH[t])}function tW(e){return{top:0,right:0,bottom:0,left:0,...e}}function eN(e){return typeof e!="number"?tW(e):{top:e,right:e,bottom:e,left:e}}function Td(e){const{x:t,y:n,width:r,height:o}=e;return{width:r,height:o,top:n,left:t,right:t+r,bottom:n+o,x:t,y:n}}function tN(e,t,n){let{reference:r,floating:o}=e;const a=Jo(t),i=ag(t),s=og(i),c=oo(t),l=a==="y",u=r.x+r.width/2-o.width/2,d=r.y+r.height/2-o.height/2,f=r[s]/2-o[s]/2;let h;switch(c){case"top":h={x:u,y:r.y-o.height};break;case"bottom":h={x:u,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:d};break;case"left":h={x:r.x-o.width,y:d};break;default:h={x:r.x,y:r.y}}switch(Ti(t)){case"start":h[i]-=f*(n&&l?-1:1);break;case"end":h[i]+=f*(n&&l?-1:1);break}return h}const nW=async(e,t,n)=>{const{placement:r="bottom",strategy:o="absolute",middleware:a=[],platform:i}=n,s=a.filter(Boolean),c=await(i.isRTL==null?void 0:i.isRTL(t));let l=await i.getElementRects({reference:e,floating:t,strategy:o}),{x:u,y:d}=tN(l,r,c),f=r,h={},g=0;for(let m=0;m<s.length;m++){const{name:v,fn:b}=s[m],{x,y:_,data:w,reset:j}=await b({x:u,y:d,initialPlacement:r,placement:f,strategy:o,middlewareData:h,rects:l,platform:i,elements:{reference:e,floating:t}});u=x??u,d=_??d,h={...h,[v]:{...h[v],...w}},j&&g<=50&&(g++,typeof j=="object"&&(j.placement&&(f=j.placement),j.rects&&(l=j.rects===!0?await i.getElementRects({reference:e,floating:t,strategy:o}):j.rects),{x:u,y:d}=tN(l,f,c)),m=-1)}return{x:u,y:d,placement:f,strategy:o,middlewareData:h}};async function Dc(e,t){var n;t===void 0&&(t={});const{x:r,y:o,platform:a,rects:i,elements:s,strategy:c}=e,{boundary:l="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:f=!1,padding:h=0}=ro(t,e),g=eN(h),m=s[f?d==="floating"?"reference":"floating":d],v=Td(await a.getClippingRect({element:(n=await(a.isElement==null?void 0:a.isElement(m)))==null||n?m:m.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(s.floating)),boundary:l,rootBoundary:u,strategy:c})),b=d==="floating"?{x:r,y:o,width:i.floating.width,height:i.floating.height}:i.reference,x=await(a.getOffsetParent==null?void 0:a.getOffsetParent(s.floating)),_=await(a.isElement==null?void 0:a.isElement(x))?await(a.getScale==null?void 0:a.getScale(x))||{x:1,y:1}:{x:1,y:1},w=Td(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:s,rect:b,offsetParent:x,strategy:c}):b);return{top:(v.top-w.top+g.top)/_.y,bottom:(w.bottom-v.bottom+g.bottom)/_.y,left:(v.left-w.left+g.left)/_.x,right:(w.right-v.right+g.right)/_.x}}const rW=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:o,rects:a,platform:i,elements:s,middlewareData:c}=t,{element:l,padding:u=0}=ro(e,t)||{};if(l==null)return{};const d=eN(u),f={x:n,y:r},h=ag(o),g=og(h),m=await i.getDimensions(l),v=h==="y",b=v?"top":"left",x=v?"bottom":"right",_=v?"clientHeight":"clientWidth",w=a.reference[g]+a.reference[h]-f[h]-a.floating[g],j=f[h]-a.reference[h],E=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l));let S=E?E[_]:0;(!S||!await(i.isElement==null?void 0:i.isElement(E)))&&(S=s.floating[_]||a.floating[g]);const C=w/2-j/2,M=S/2-m[g]/2-1,N=Tr(d[b],M),P=Tr(d[x],M),R=N,A=S-m[g]-P,O=S/2-m[g]/2+C,k=ng(R,O,A),T=!c.arrow&&Ti(o)!=null&&O!==k&&a.reference[g]/2-(O<R?N:P)-m[g]/2<0,D=T?O<R?O-R:O-A:0;return{[h]:f[h]+D,data:{[h]:k,centerOffset:O-k-D,...T&&{alignmentOffset:D}},reset:T}}}),oW=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:o,middlewareData:a,rects:i,initialPlacement:s,platform:c,elements:l}=t,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:m=!0,...v}=ro(e,t);if((n=a.arrow)!=null&&n.alignmentOffset)return{};const b=oo(o),x=Jo(s),_=oo(s)===s,w=await(c.isRTL==null?void 0:c.isRTL(l.floating)),j=f||(_||!m?[Ad(s)]:ZH(s)),E=g!=="none";!f&&E&&j.push(...eW(s,m,g,w));const S=[s,...j],C=await Dc(t,v),M=[];let N=((r=a.flip)==null?void 0:r.overflows)||[];if(u&&M.push(C[b]),d){const O=JH(o,i,w);M.push(C[O[0]],C[O[1]])}if(N=[...N,{placement:o,overflows:M}],!M.every(O=>O<=0)){var P,R;const O=(((P=a.flip)==null?void 0:P.index)||0)+1,k=S[O];if(k)return{data:{index:O,overflows:N},reset:{placement:k}};let T=(R=N.filter(D=>D.overflows[0]<=0).sort((D,I)=>D.overflows[1]-I.overflows[1])[0])==null?void 0:R.placement;if(!T)switch(h){case"bestFit":{var A;const D=(A=N.filter(I=>{if(E){const L=Jo(I.placement);return L===x||L==="y"}return!0}).map(I=>[I.placement,I.overflows.filter(L=>L>0).reduce((L,B)=>L+B,0)]).sort((I,L)=>I[1]-L[1])[0])==null?void 0:A[0];D&&(T=D);break}case"initialPlacement":T=s;break}if(o!==T)return{reset:{placement:T}}}return{}}}};function nN(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function rN(e){return KH.some(t=>e[t]>=0)}const aW=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...o}=ro(e,t);switch(r){case"referenceHidden":{const a=await Dc(t,{...o,elementContext:"reference"}),i=nN(a,n.reference);return{data:{referenceHiddenOffsets:i,referenceHidden:rN(i)}}}case"escaped":{const a=await Dc(t,{...o,altBoundary:!0}),i=nN(a,n.floating);return{data:{escapedOffsets:i,escaped:rN(i)}}}default:return{}}}}};async function iW(e,t){const{placement:n,platform:r,elements:o}=e,a=await(r.isRTL==null?void 0:r.isRTL(o.floating)),i=oo(n),s=Ti(n),c=Jo(n)==="y",l=["left","top"].includes(i)?-1:1,u=a&&c?-1:1,d=ro(t,e);let{mainAxis:f,crossAxis:h,alignmentAxis:g}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...d};return s&&typeof g=="number"&&(h=s==="end"?g*-1:g),c?{x:h*u,y:f*l}:{x:f*l,y:h*u}}const sW=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:o,y:a,placement:i,middlewareData:s}=t,c=await iW(t,e);return i===((n=s.offset)==null?void 0:n.placement)&&(r=s.arrow)!=null&&r.alignmentOffset?{}:{x:o+c.x,y:a+c.y,data:{...c,placement:i}}}}},cW=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:o}=t,{mainAxis:a=!0,crossAxis:i=!1,limiter:s={fn:v=>{let{x:b,y:x}=v;return{x:b,y:x}}},...c}=ro(e,t),l={x:n,y:r},u=await Dc(t,c),d=Jo(oo(o)),f=rg(d);let h=l[f],g=l[d];if(a){const v=f==="y"?"top":"left",b=f==="y"?"bottom":"right",x=h+u[v],_=h-u[b];h=ng(x,h,_)}if(i){const v=d==="y"?"top":"left",b=d==="y"?"bottom":"right",x=g+u[v],_=g-u[b];g=ng(x,g,_)}const m=s.fn({...t,[f]:h,[d]:g});return{...m,data:{x:m.x-n,y:m.y-r}}}}},lW=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:o,rects:a,middlewareData:i}=t,{offset:s=0,mainAxis:c=!0,crossAxis:l=!0}=ro(e,t),u={x:n,y:r},d=Jo(o),f=rg(d);let h=u[f],g=u[d];const m=ro(s,t),v=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(c){const _=f==="y"?"height":"width",w=a.reference[f]-a.floating[_]+v.mainAxis,j=a.reference[f]+a.reference[_]-v.mainAxis;h<w?h=w:h>j&&(h=j)}if(l){var b,x;const _=f==="y"?"width":"height",w=["top","left"].includes(oo(o)),j=a.reference[d]-a.floating[_]+(w&&((b=i.offset)==null?void 0:b[d])||0)+(w?0:v.crossAxis),E=a.reference[d]+a.reference[_]+(w?0:((x=i.offset)==null?void 0:x[d])||0)-(w?v.crossAxis:0);g<j?g=j:g>E&&(g=E)}return{[f]:h,[d]:g}}}},uW=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){const{placement:n,rects:r,platform:o,elements:a}=t,{apply:i=()=>{},...s}=ro(e,t),c=await Dc(t,s),l=oo(n),u=Ti(n),d=Jo(n)==="y",{width:f,height:h}=r.floating;let g,m;l==="top"||l==="bottom"?(g=l,m=u===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(m=l,g=u==="end"?"top":"bottom");const v=h-c.top-c.bottom,b=f-c.left-c.right,x=Tr(h-c[g],v),_=Tr(f-c[m],b),w=!t.middlewareData.shift;let j=x,E=_;if(d?E=u||w?Tr(_,b):b:j=u||w?Tr(x,v):v,w&&!u){const C=Dn(c.left,0),M=Dn(c.right,0),N=Dn(c.top,0),P=Dn(c.bottom,0);d?E=f-2*(C!==0||M!==0?C+M:Dn(c.left,c.right)):j=h-2*(N!==0||P!==0?N+P:Dn(c.top,c.bottom))}await i({...t,availableWidth:E,availableHeight:j});const S=await o.getDimensions(a.floating);return f!==S.width||h!==S.height?{reset:{rects:!0}}:{}}}};function Ri(e){return oN(e)?(e.nodeName||"").toLowerCase():"#document"}function Ln(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function ao(e){var t;return(t=(oN(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function oN(e){return e instanceof Node||e instanceof Ln(e).Node}function ur(e){return e instanceof Element||e instanceof Ln(e).Element}function Rr(e){return e instanceof HTMLElement||e instanceof Ln(e).HTMLElement}function aN(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Ln(e).ShadowRoot}function Lc(e){const{overflow:t,overflowX:n,overflowY:r,display:o}=dr(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(o)}function dW(e){return["table","td","th"].includes(Ri(e))}function Rd(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function sg(e){const t=cg(),n=ur(e)?dr(e):e;return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function fW(e){let t=Zo(e);for(;Rr(t)&&!Ii(t);){if(sg(t))return t;if(Rd(t))return null;t=Zo(t)}return null}function cg(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Ii(e){return["html","body","#document"].includes(Ri(e))}function dr(e){return Ln(e).getComputedStyle(e)}function Id(e){return ur(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Zo(e){if(Ri(e)==="html")return e;const t=e.assignedSlot||e.parentNode||aN(e)&&e.host||ao(e);return aN(t)?t.host:t}function iN(e){const t=Zo(e);return Ii(t)?e.ownerDocument?e.ownerDocument.body:e.body:Rr(t)&&Lc(t)?t:iN(t)}function Fc(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const o=iN(e),a=o===((r=e.ownerDocument)==null?void 0:r.body),i=Ln(o);if(a){const s=lg(i);return t.concat(i,i.visualViewport||[],Lc(o)?o:[],s&&n?Fc(s):[])}return t.concat(o,Fc(o,[],n))}function lg(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function sN(e){const t=dr(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const o=Rr(e),a=o?e.offsetWidth:n,i=o?e.offsetHeight:r,s=kd(n)!==a||kd(r)!==i;return s&&(n=a,r=i),{width:n,height:r,$:s}}function ug(e){return ur(e)?e:e.contextElement}function Di(e){const t=ug(e);if(!Rr(t))return Qo(1);const n=t.getBoundingClientRect(),{width:r,height:o,$:a}=sN(t);let i=(a?kd(n.width):n.width)/r,s=(a?kd(n.height):n.height)/o;return(!i||!Number.isFinite(i))&&(i=1),(!s||!Number.isFinite(s))&&(s=1),{x:i,y:s}}const pW=Qo(0);function cN(e){const t=Ln(e);return!cg()||!t.visualViewport?pW:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function hW(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Ln(e)?!1:t}function Ia(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const o=e.getBoundingClientRect(),a=ug(e);let i=Qo(1);t&&(r?ur(r)&&(i=Di(r)):i=Di(e));const s=hW(a,n,r)?cN(a):Qo(0);let c=(o.left+s.x)/i.x,l=(o.top+s.y)/i.y,u=o.width/i.x,d=o.height/i.y;if(a){const f=Ln(a),h=r&&ur(r)?Ln(r):r;let g=f,m=lg(g);for(;m&&r&&h!==g;){const v=Di(m),b=m.getBoundingClientRect(),x=dr(m),_=b.left+(m.clientLeft+parseFloat(x.paddingLeft))*v.x,w=b.top+(m.clientTop+parseFloat(x.paddingTop))*v.y;c*=v.x,l*=v.y,u*=v.x,d*=v.y,c+=_,l+=w,g=Ln(m),m=lg(g)}}return Td({width:u,height:d,x:c,y:l})}function mW(e){let{elements:t,rect:n,offsetParent:r,strategy:o}=e;const a=o==="fixed",i=ao(r),s=t?Rd(t.floating):!1;if(r===i||s&&a)return n;let c={scrollLeft:0,scrollTop:0},l=Qo(1);const u=Qo(0),d=Rr(r);if((d||!d&&!a)&&((Ri(r)!=="body"||Lc(i))&&(c=Id(r)),Rr(r))){const f=Ia(r);l=Di(r),u.x=f.x+r.clientLeft,u.y=f.y+r.clientTop}return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-c.scrollLeft*l.x+u.x,y:n.y*l.y-c.scrollTop*l.y+u.y}}function yW(e){return Array.from(e.getClientRects())}function lN(e){return Ia(ao(e)).left+Id(e).scrollLeft}function gW(e){const t=ao(e),n=Id(e),r=e.ownerDocument.body,o=Dn(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),a=Dn(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let i=-n.scrollLeft+lN(e);const s=-n.scrollTop;return dr(r).direction==="rtl"&&(i+=Dn(t.clientWidth,r.clientWidth)-o),{width:o,height:a,x:i,y:s}}function vW(e,t){const n=Ln(e),r=ao(e),o=n.visualViewport;let a=r.clientWidth,i=r.clientHeight,s=0,c=0;if(o){a=o.width,i=o.height;const l=cg();(!l||l&&t==="fixed")&&(s=o.offsetLeft,c=o.offsetTop)}return{width:a,height:i,x:s,y:c}}function bW(e,t){const n=Ia(e,!0,t==="fixed"),r=n.top+e.clientTop,o=n.left+e.clientLeft,a=Rr(e)?Di(e):Qo(1),i=e.clientWidth*a.x,s=e.clientHeight*a.y,c=o*a.x,l=r*a.y;return{width:i,height:s,x:c,y:l}}function uN(e,t,n){let r;if(t==="viewport")r=vW(e,n);else if(t==="document")r=gW(ao(e));else if(ur(t))r=bW(t,n);else{const o=cN(e);r={...t,x:t.x-o.x,y:t.y-o.y}}return Td(r)}function dN(e,t){const n=Zo(e);return n===t||!ur(n)||Ii(n)?!1:dr(n).position==="fixed"||dN(n,t)}function xW(e,t){const n=t.get(e);if(n)return n;let r=Fc(e,[],!1).filter(s=>ur(s)&&Ri(s)!=="body"),o=null;const a=dr(e).position==="fixed";let i=a?Zo(e):e;for(;ur(i)&&!Ii(i);){const s=dr(i),c=sg(i);!c&&s.position==="fixed"&&(o=null),(a?!c&&!o:!c&&s.position==="static"&&o&&["absolute","fixed"].includes(o.position)||Lc(i)&&!c&&dN(e,i))?r=r.filter(l=>l!==i):o=s,i=Zo(i)}return t.set(e,r),r}function wW(e){let{element:t,boundary:n,rootBoundary:r,strategy:o}=e;const a=[...n==="clippingAncestors"?Rd(t)?[]:xW(t,this._c):[].concat(n),r],i=a[0],s=a.reduce((c,l)=>{const u=uN(t,l,o);return c.top=Dn(u.top,c.top),c.right=Tr(u.right,c.right),c.bottom=Tr(u.bottom,c.bottom),c.left=Dn(u.left,c.left),c},uN(t,i,o));return{width:s.right-s.left,height:s.bottom-s.top,x:s.left,y:s.top}}function _W(e){const{width:t,height:n}=sN(e);return{width:t,height:n}}function jW(e,t,n){const r=Rr(t),o=ao(t),a=n==="fixed",i=Ia(e,!0,a,t);let s={scrollLeft:0,scrollTop:0};const c=Qo(0);if(r||!r&&!a)if((Ri(t)!=="body"||Lc(o))&&(s=Id(t)),r){const d=Ia(t,!0,a,t);c.x=d.x+t.clientLeft,c.y=d.y+t.clientTop}else o&&(c.x=lN(o));const l=i.left+s.scrollLeft-c.x,u=i.top+s.scrollTop-c.y;return{x:l,y:u,width:i.width,height:i.height}}function dg(e){return dr(e).position==="static"}function fN(e,t){return!Rr(e)||dr(e).position==="fixed"?null:t?t(e):e.offsetParent}function pN(e,t){const n=Ln(e);if(Rd(e))return n;if(!Rr(e)){let o=Zo(e);for(;o&&!Ii(o);){if(ur(o)&&!dg(o))return o;o=Zo(o)}return n}let r=fN(e,t);for(;r&&dW(r)&&dg(r);)r=fN(r,t);return r&&Ii(r)&&dg(r)&&!sg(r)?n:r||fW(e)||n}const EW=async function(e){const t=this.getOffsetParent||pN,n=this.getDimensions,r=await n(e.floating);return{reference:jW(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function SW(e){return dr(e).direction==="rtl"}const CW={convertOffsetParentRelativeRectToViewportRelativeRect:mW,getDocumentElement:ao,getClippingRect:wW,getOffsetParent:pN,getElementRects:EW,getClientRects:yW,getDimensions:_W,getScale:Di,isElement:ur,isRTL:SW};function OW(e,t){let n=null,r;const o=ao(e);function a(){var s;clearTimeout(r),(s=n)==null||s.disconnect(),n=null}function i(s,c){s===void 0&&(s=!1),c===void 0&&(c=1),a();const{left:l,top:u,width:d,height:f}=e.getBoundingClientRect();if(s||t(),!d||!f)return;const h=Pd(u),g=Pd(o.clientWidth-(l+d)),m=Pd(o.clientHeight-(u+f)),v=Pd(l),b={rootMargin:-h+"px "+-g+"px "+-m+"px "+-v+"px",threshold:Dn(0,Tr(1,c))||1};let x=!0;function _(w){const j=w[0].intersectionRatio;if(j!==c){if(!x)return i();j?i(!1,j):r=setTimeout(()=>{i(!1,1e-7)},1e3)}x=!1}try{n=new IntersectionObserver(_,{...b,root:o.ownerDocument})}catch{n=new IntersectionObserver(_,b)}n.observe(e)}return i(!0),a}vm=function(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:o=!0,ancestorResize:a=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:s=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,l=ug(e),u=o||a?[...l?Fc(l):[],...Fc(t)]:[];u.forEach(b=>{o&&b.addEventListener("scroll",n,{passive:!0}),a&&b.addEventListener("resize",n)});const d=l&&s?OW(l,n):null;let f=-1,h=null;i&&(h=new ResizeObserver(b=>{let[x]=b;x&&x.target===l&&h&&(h.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var _;(_=h)==null||_.observe(t)})),n()}),l&&!c&&h.observe(l),h.observe(t));let g,m=c?Ia(e):null;c&&v();function v(){const b=Ia(e);m&&(b.x!==m.x||b.y!==m.y||b.width!==m.width||b.height!==m.height)&&n(),m=b,g=requestAnimationFrame(v)}return n(),()=>{var b;u.forEach(x=>{o&&x.removeEventListener("scroll",n),a&&x.removeEventListener("resize",n)}),d==null||d(),(b=h)==null||b.disconnect(),h=null,c&&cancelAnimationFrame(g)}};let hN;bS=sW,TS=cW,xS=oW,IS=uW,hN=aW,Im=rW,RS=lW,wS=(e,t,n)=>{const r=new Map,o={platform:CW,...n},a={...o.platform,_c:r};return nW(e,t,{...o,platform:a})};var Dd=typeof document<"u"?y.useLayoutEffect:y.useEffect;function Ld(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,o;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!Ld(e[r],t[r]))return!1;return!0}if(o=Object.keys(e),n=o.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,o[r]))return!1;for(r=n;r--!==0;){const a=o[r];if(!(a==="_owner"&&e.$$typeof)&&!Ld(e[a],t[a]))return!1}return!0}return e!==e&&t!==t}function mN(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function yN(e,t){const n=mN(e);return Math.round(t*n)/n}function gN(e){const t=y.useRef(e);return Dd(()=>{t.current=e}),t}Am=function(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:o,elements:{reference:a,floating:i}={},transform:s=!0,whileElementsMounted:c,open:l}=e,[u,d]=y.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[f,h]=y.useState(r);Ld(f,r)||h(r);const[g,m]=y.useState(null),[v,b]=y.useState(null),x=y.useCallback(D=>{D!==E.current&&(E.current=D,m(D))},[]),_=y.useCallback(D=>{D!==S.current&&(S.current=D,b(D))},[]),w=a||g,j=i||v,E=y.useRef(null),S=y.useRef(null),C=y.useRef(u),M=c!=null,N=gN(c),P=gN(o),R=y.useCallback(()=>{if(!E.current||!S.current)return;const D={placement:t,strategy:n,middleware:f};P.current&&(D.platform=P.current),wS(E.current,S.current,D).then(I=>{const L={...I,isPositioned:!0};A.current&&!Ld(C.current,L)&&(C.current=L,cc.flushSync(()=>{d(L)}))})},[f,t,n,P]);Dd(()=>{l===!1&&C.current.isPositioned&&(C.current.isPositioned=!1,d(D=>({...D,isPositioned:!1})))},[l]);const A=y.useRef(!1);Dd(()=>(A.current=!0,()=>{A.current=!1}),[]),Dd(()=>{if(w&&(E.current=w),j&&(S.current=j),w&&j){if(N.current)return N.current(w,j,R);R()}},[w,j,R,N,M]);const O=y.useMemo(()=>({reference:E,floating:S,setReference:x,setFloating:_}),[x,_]),k=y.useMemo(()=>({reference:w,floating:j}),[w,j]),T=y.useMemo(()=>{const D={position:n,left:0,top:0};if(!k.floating)return D;const I=yN(k.floating,u.x),L=yN(k.floating,u.y);return s?{...D,transform:"translate("+I+"px, "+L+"px)",...mN(k.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:I,top:L}},[n,s,k.floating,u.x,u.y]);return y.useMemo(()=>({...u,update:R,refs:O,elements:k,floatingStyles:T}),[u,R,O,k,T])};let vN;vN=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:o}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?Im({element:r.current,padding:o}).fn(n):{}:r?Im({element:r,padding:o}).fn(n):{}}}},xm=(e,t)=>({...bS(e),options:[e,t]}),Wm=(e,t)=>({...TS(e),options:[e,t]}),qm=(e,t)=>({...RS(e),options:[e,t]}),Ym=(e,t)=>({...xS(e),options:[e,t]}),Km=(e,t)=>({...IS(e),options:[e,t]}),Qm=(e,t)=>({...hN(e),options:[e,t]}),Xm=(e,t)=>({...vN(e),options:[e,t]});var NW="Arrow",bN=y.forwardRef((e,t)=>{const{children:n,width:r=10,height:o=5,...a}=e;return p.jsx(Ne.svg,{...a,ref:t,width:r,height:o,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:p.jsx("polygon",{points:"0,0 30,0 15,10"})})});bN.displayName=NW;var MW=bN;function kW(e,t=[]){let n=[];function r(a,i){const s=y.createContext(i),c=n.length;n=[...n,i];function l(d){const{scope:f,children:h,...g}=d,m=(f==null?void 0:f[e][c])||s,v=y.useMemo(()=>g,Object.values(g));return p.jsx(m.Provider,{value:v,children:h})}function u(d,f){const h=(f==null?void 0:f[e][c])||s,g=y.useContext(h);if(g)return g;if(i!==void 0)return i;throw new Error(`\`${d}\` must be used within \`${a}\``)}return l.displayName=a+"Provider",[l,u]}const o=()=>{const a=n.map(i=>y.createContext(i));return function(i){const s=(i==null?void 0:i[e])||a;return y.useMemo(()=>({[`__scope${e}`]:{...i,[e]:s}}),[i,s])}};return o.scopeName=e,[r,PW(o,...t)]}function PW(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(o){const a=r.reduce((i,{useScope:s,scopeName:c})=>{const l=s(o)[`__scope${c}`];return{...i,...l}},{});return y.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return n.scopeName=t.scopeName,n}Gu=function(e){const[t,n]=y.useState(void 0);return Bt(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(o=>{if(!Array.isArray(o)||!o.length)return;const a=o[0];let i,s;if("borderBoxSize"in a){const c=a.borderBoxSize,l=Array.isArray(c)?c[0]:c;i=l.inlineSize,s=l.blockSize}else i=e.offsetWidth,s=e.offsetHeight;n({width:i,height:s})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t};var fg="Popper",[xN,Li]=kW(fg),[AW,wN]=xN(fg),_N=e=>{const{__scopePopper:t,children:n}=e,[r,o]=y.useState(null);return p.jsx(AW,{scope:t,anchor:r,onAnchorChange:o,children:n})};_N.displayName=fg;var jN="PopperAnchor",EN=y.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...o}=e,a=wN(jN,n),i=y.useRef(null),s=lt(t,i);return y.useEffect(()=>{a.onAnchorChange((r==null?void 0:r.current)||i.current)}),r?null:p.jsx(Ne.div,{...o,ref:s})});EN.displayName=jN;var pg="PopperContent",[TW,RW]=xN(pg),SN=y.forwardRef((e,t)=>{var G,q,W,Z,ee,$;const{__scopePopper:n,side:r="bottom",sideOffset:o=0,align:a="center",alignOffset:i=0,arrowPadding:s=0,avoidCollisions:c=!0,collisionBoundary:l=[],collisionPadding:u=0,sticky:d="partial",hideWhenDetached:f=!1,updatePositionStrategy:h="optimized",onPlaced:g,...m}=e,v=wN(pg,n),[b,x]=y.useState(null),_=lt(t,ie=>x(ie)),[w,j]=y.useState(null),E=Gu(w),S=(E==null?void 0:E.width)??0,C=(E==null?void 0:E.height)??0,M=r+(a!=="center"?"-"+a:""),N=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},P=Array.isArray(l)?l:[l],R=P.length>0,A={padding:N,boundary:P.filter(DW),altBoundary:R},{refs:O,floatingStyles:k,placement:T,isPositioned:D,middlewareData:I}=Am({strategy:"fixed",placement:M,whileElementsMounted:(...ie)=>vm(...ie,{animationFrame:h==="always"}),elements:{reference:v.anchor},middleware:[xm({mainAxis:o+C,alignmentAxis:i}),c&&Wm({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?qm():void 0,...A}),c&&Ym({...A}),Km({...A,apply:({elements:ie,rects:ue,availableWidth:me,availableHeight:Te})=>{const{width:Ue,height:He}=ue.reference,Le=ie.floating.style;Le.setProperty("--radix-popper-available-width",`${me}px`),Le.setProperty("--radix-popper-available-height",`${Te}px`),Le.setProperty("--radix-popper-anchor-width",`${Ue}px`),Le.setProperty("--radix-popper-anchor-height",`${He}px`)}}),w&&Xm({element:w,padding:s}),LW({arrowWidth:S,arrowHeight:C}),f&&Qm({strategy:"referenceHidden",...A})]}),[L,B]=NN(T),V=An(g);Bt(()=>{D&&(V==null||V())},[D,V]);const F=(G=I.arrow)==null?void 0:G.x,H=(q=I.arrow)==null?void 0:q.y,Q=((W=I.arrow)==null?void 0:W.centerOffset)!==0,[Y,re]=y.useState();return Bt(()=>{b&&re(window.getComputedStyle(b).zIndex)},[b]),p.jsx("div",{ref:O.setFloating,"data-radix-popper-content-wrapper":"",style:{...k,transform:D?k.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Y,"--radix-popper-transform-origin":[(Z=I.transformOrigin)==null?void 0:Z.x,(ee=I.transformOrigin)==null?void 0:ee.y].join(" "),...(($=I.hide)==null?void 0:$.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:p.jsx(TW,{scope:n,placedSide:L,onArrowChange:j,arrowX:F,arrowY:H,shouldHideArrow:Q,children:p.jsx(Ne.div,{"data-side":L,"data-align":B,...m,ref:_,style:{...m.style,animation:D?void 0:"none"}})})})});SN.displayName=pg;var CN="PopperArrow",IW={top:"bottom",right:"left",bottom:"top",left:"right"},ON=y.forwardRef(function(e,t){const{__scopePopper:n,...r}=e,o=RW(CN,n),a=IW[o.placedSide];return p.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:p.jsx(MW,{...r,ref:t,style:{...r.style,display:"block"}})})});ON.displayName=CN;function DW(e){return e!==null}var LW=e=>({name:"transformOrigin",options:e,fn(t){var m,v,b;const{placement:n,rects:r,middlewareData:o}=t,a=((m=o.arrow)==null?void 0:m.centerOffset)!==0,i=a?0:e.arrowWidth,s=a?0:e.arrowHeight,[c,l]=NN(n),u={start:"0%",center:"50%",end:"100%"}[l],d=(((v=o.arrow)==null?void 0:v.x)??0)+i/2,f=(((b=o.arrow)==null?void 0:b.y)??0)+s/2;let h="",g="";return c==="bottom"?(h=a?u:`${d}px`,g=`${-s}px`):c==="top"?(h=a?u:`${d}px`,g=`${r.floating.height+s}px`):c==="right"?(h=`${-s}px`,g=a?u:`${f}px`):c==="left"&&(h=`${r.floating.width+s}px`,g=a?u:`${f}px`),{data:{x:h,y:g}}}});function NN(e){const[t,n="center"]=e.split("-");return[t,n]}var Fd=_N,hg=EN,mg=SN,yg=ON,[Bd,Sje]=Pn("Tooltip",[Li]),$d=Li(),MN="TooltipProvider",FW=700,gg="tooltip.open",[BW,vg]=Bd(MN),kN=e=>{const{__scopeTooltip:t,delayDuration:n=FW,skipDelayDuration:r=300,disableHoverableContent:o=!1,children:a}=e,[i,s]=y.useState(!0),c=y.useRef(!1),l=y.useRef(0);return y.useEffect(()=>{const u=l.current;return()=>window.clearTimeout(u)},[]),p.jsx(BW,{scope:t,isOpenDelayed:i,delayDuration:n,onOpen:y.useCallback(()=>{window.clearTimeout(l.current),s(!1)},[]),onClose:y.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>s(!0),r)},[r]),isPointerInTransitRef:c,onPointerInTransitChange:y.useCallback(u=>{c.current=u},[]),disableHoverableContent:o,children:a})};kN.displayName=MN;var zd="Tooltip",[$W,Bc]=Bd(zd),PN=e=>{const{__scopeTooltip:t,children:n,open:r,defaultOpen:o=!1,onOpenChange:a,disableHoverableContent:i,delayDuration:s}=e,c=vg(zd,e.__scopeTooltip),l=$d(t),[u,d]=y.useState(null),f=mt(),h=y.useRef(0),g=i??c.disableHoverableContent,m=s??c.delayDuration,v=y.useRef(!1),[b=!1,x]=nn({prop:r,defaultProp:o,onChange:S=>{S?(c.onOpen(),document.dispatchEvent(new CustomEvent(gg))):c.onClose(),a==null||a(S)}}),_=y.useMemo(()=>b?v.current?"delayed-open":"instant-open":"closed",[b]),w=y.useCallback(()=>{window.clearTimeout(h.current),h.current=0,v.current=!1,x(!0)},[x]),j=y.useCallback(()=>{window.clearTimeout(h.current),h.current=0,x(!1)},[x]),E=y.useCallback(()=>{window.clearTimeout(h.current),h.current=window.setTimeout(()=>{v.current=!0,x(!0),h.current=0},m)},[m,x]);return y.useEffect(()=>()=>{h.current&&(window.clearTimeout(h.current),h.current=0)},[]),p.jsx(Fd,{...l,children:p.jsx($W,{scope:t,contentId:f,open:b,stateAttribute:_,trigger:u,onTriggerChange:d,onTriggerEnter:y.useCallback(()=>{c.isOpenDelayed?E():w()},[c.isOpenDelayed,E,w]),onTriggerLeave:y.useCallback(()=>{g?j():(window.clearTimeout(h.current),h.current=0)},[j,g]),onOpen:w,onClose:j,disableHoverableContent:g,children:n})})};PN.displayName=zd;var bg="TooltipTrigger",AN=y.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,o=Bc(bg,n),a=vg(bg,n),i=$d(n),s=y.useRef(null),c=lt(t,s,o.onTriggerChange),l=y.useRef(!1),u=y.useRef(!1),d=y.useCallback(()=>l.current=!1,[]);return y.useEffect(()=>()=>document.removeEventListener("pointerup",d),[d]),p.jsx(hg,{asChild:!0,...i,children:p.jsx(Ne.button,{"aria-describedby":o.open?o.contentId:void 0,"data-state":o.stateAttribute,...r,ref:c,onPointerMove:ye(e.onPointerMove,f=>{f.pointerType!=="touch"&&!u.current&&!a.isPointerInTransitRef.current&&(o.onTriggerEnter(),u.current=!0)}),onPointerLeave:ye(e.onPointerLeave,()=>{o.onTriggerLeave(),u.current=!1}),onPointerDown:ye(e.onPointerDown,()=>{l.current=!0,document.addEventListener("pointerup",d,{once:!0})}),onFocus:ye(e.onFocus,()=>{l.current||o.onOpen()}),onBlur:ye(e.onBlur,o.onClose),onClick:ye(e.onClick,o.onClose)})})});AN.displayName=bg;var xg="TooltipPortal",[zW,VW]=Bd(xg,{forceMount:void 0}),TN=e=>{const{__scopeTooltip:t,forceMount:n,children:r,container:o}=e,a=Bc(xg,t);return p.jsx(zW,{scope:t,forceMount:n,children:p.jsx(rr,{present:n||a.open,children:p.jsx(um,{asChild:!0,container:o,children:r})})})};TN.displayName=xg;var Fi="TooltipContent",RN=y.forwardRef((e,t)=>{const n=VW(Fi,e.__scopeTooltip),{forceMount:r=n.forceMount,side:o="top",...a}=e,i=Bc(Fi,e.__scopeTooltip);return p.jsx(rr,{present:r||i.open,children:i.disableHoverableContent?p.jsx(IN,{side:o,...a,ref:t}):p.jsx(UW,{side:o,...a,ref:t})})}),UW=y.forwardRef((e,t)=>{const n=Bc(Fi,e.__scopeTooltip),r=vg(Fi,e.__scopeTooltip),o=y.useRef(null),a=lt(t,o),[i,s]=y.useState(null),{trigger:c,onClose:l}=n,u=o.current,{onPointerInTransitChange:d}=r,f=y.useCallback(()=>{s(null),d(!1)},[d]),h=y.useCallback((g,m)=>{const v=g.currentTarget,b={x:g.clientX,y:g.clientY},x=YW(b,v.getBoundingClientRect()),_=KW(b,x),w=XW(m.getBoundingClientRect()),j=JW([..._,...w]);s(j),d(!0)},[d]);return y.useEffect(()=>()=>f(),[f]),y.useEffect(()=>{if(c&&u){const g=v=>h(v,u),m=v=>h(v,c);return c.addEventListener("pointerleave",g),u.addEventListener("pointerleave",m),()=>{c.removeEventListener("pointerleave",g),u.removeEventListener("pointerleave",m)}}},[c,u,h,f]),y.useEffect(()=>{if(i){const g=m=>{const v=m.target,b={x:m.clientX,y:m.clientY},x=(c==null?void 0:c.contains(v))||(u==null?void 0:u.contains(v)),_=!QW(b,i);x?f():_&&(f(),l())};return document.addEventListener("pointermove",g),()=>document.removeEventListener("pointermove",g)}},[c,u,i,l,f]),p.jsx(IN,{...e,ref:a})}),[HW,WW]=Bd(zd,{isInside:!1}),IN=y.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":o,onEscapeKeyDown:a,onPointerDownOutside:i,...s}=e,c=Bc(Fi,n),l=$d(n),{onClose:u}=c;return y.useEffect(()=>(document.addEventListener(gg,u),()=>document.removeEventListener(gg,u)),[u]),y.useEffect(()=>{if(c.trigger){const d=f=>{var h;(h=f.target)!=null&&h.contains(c.trigger)&&u()};return window.addEventListener("scroll",d,{capture:!0}),()=>window.removeEventListener("scroll",d,{capture:!0})}},[c.trigger,u]),p.jsx(lm,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:i,onFocusOutside:d=>d.preventDefault(),onDismiss:u,children:p.jsxs(mg,{"data-state":c.stateAttribute,...l,...s,ref:t,style:{...s.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[p.jsx(x7,{children:r}),p.jsx(HW,{scope:n,isInside:!0,children:p.jsx(Q_e,{id:c.contentId,role:"tooltip",children:o||r})})]})})});RN.displayName=Fi;var DN="TooltipArrow",qW=y.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,o=$d(n);return WW(DN,n).isInside?null:p.jsx(yg,{...o,...r,ref:t})});qW.displayName=DN;function YW(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),o=Math.abs(t.right-e.x),a=Math.abs(t.left-e.x);switch(Math.min(n,r,o,a)){case a:return"left";case o:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function KW(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function XW(e){const{top:t,right:n,bottom:r,left:o}=e;return[{x:o,y:t},{x:n,y:t},{x:n,y:r},{x:o,y:r}]}function QW(e,t){const{x:n,y:r}=e;let o=!1;for(let a=0,i=t.length-1;a<t.length;i=a++){const s=t[a].x,c=t[a].y,l=t[i].x,u=t[i].y;c>r!=u>r&&n<(l-s)*(r-c)/(u-c)+s&&(o=!o)}return o}function JW(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),ZW(t)}function ZW(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const o=e[r];for(;t.length>=2;){const a=t[t.length-1],i=t[t.length-2];if((a.x-i.x)*(o.y-i.y)>=(a.y-i.y)*(o.x-i.x))t.pop();else break}t.push(o)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const o=e[r];for(;n.length>=2;){const a=n[n.length-1],i=n[n.length-2];if((a.x-i.x)*(o.y-i.y)>=(a.y-i.y)*(o.x-i.x))n.pop();else break}n.push(o)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}_S=kN,jS=PN,ES=AN,P7=TN,_m=RN;const $c=_S,Ir=jS,Dr=ES,fr=y.forwardRef(({className:e,sideOffset:t=4,...n},r)=>p.jsx(_m,{ref:r,sideOffset:t,className:K("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n}));fr.displayName=_m.displayName;const GW="sidebar:state",eq=60*60*24*7,tq="16rem",nq="18rem",rq="3rem",oq="b",LN=y.createContext(null);function zc(){const e=y.useContext(LN);if(!e)throw new Error("useSidebar must be used within a SidebarProvider.");return e}const wg=y.forwardRef(({defaultOpen:e=!0,open:t,onOpenChange:n,className:r,style:o,children:a,...i},s)=>{const c=aH(),[l,u]=y.useState(!1),[d,f]=y.useState(e),h=t??d,g=y.useCallback(x=>{const _=typeof x=="function"?x(h):x;n?n(_):f(_),document.cookie=`${GW}=${_}; path=/; max-age=${eq}`},[n,h]),m=y.useCallback(()=>c?u(x=>!x):g(x=>!x),[c,g,u]);y.useEffect(()=>{const x=_=>{_.key===oq&&(_.metaKey||_.ctrlKey)&&(_.preventDefault(),m())};return window.addEventListener("keydown",x),()=>window.removeEventListener("keydown",x)},[m]);const v=h?"expanded":"collapsed",b=y.useMemo(()=>({state:v,open:h,setOpen:g,isMobile:c,openMobile:l,setOpenMobile:u,toggleSidebar:m}),[v,h,g,c,l,u,m]);return p.jsx(LN.Provider,{value:b,children:p.jsx($c,{delayDuration:0,children:p.jsx("div",{style:{"--sidebar-width":tq,"--sidebar-width-icon":rq,...o},className:K("group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar",r),ref:s,...i,children:a})})})});wg.displayName="SidebarProvider";const _g=y.forwardRef(({side:e="left",variant:t="sidebar",collapsible:n="offcanvas",className:r,children:o,...a},i)=>{const{isMobile:s,state:c,openMobile:l,setOpenMobile:u}=zc();return n==="none"?p.jsx("div",{className:K("flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground",r),ref:i,...a,children:o}):s?p.jsx(UH,{open:l,onOpenChange:u,...a,children:p.jsx(ZO,{"data-sidebar":"sidebar","data-mobile":"true",className:"w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden",style:{"--sidebar-width":nq},side:e,children:p.jsx("div",{className:"flex h-full w-full flex-col",children:o})})}):p.jsxs("div",{ref:i,className:"group peer hidden md:block text-sidebar-foreground","data-state":c,"data-collapsible":c==="collapsed"?n:"","data-variant":t,"data-side":e,children:[p.jsx("div",{className:K("duration-200 relative h-svh w-[--sidebar-width] bg-transparent transition-[width] ease-linear","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180",t==="floating"||t==="inset"?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon]")}),p.jsx("div",{className:K("duration-200 fixed inset-y-0 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] ease-linear md:flex",e==="left"?"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]":"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]",t==="floating"||t==="inset"?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l",r),...a,children:p.jsx("div",{"data-sidebar":"sidebar",className:"flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow",children:o})})]})});_g.displayName="Sidebar";const FN=y.forwardRef(({className:e,onClick:t,...n},r)=>{const{toggleSidebar:o}=zc();return p.jsx(ot,{ref:r,"data-sidebar":"trigger",variant:"ghost",size:"icon",className:K("h-7 w-7",e),onClick:a=>{t==null||t(a),o()},...n,children:p.jsx(le,{size:32,name:"panel-left"})})});FN.displayName="SidebarTrigger";const BN=y.forwardRef(({className:e,...t},n)=>{const{toggleSidebar:r}=zc();return p.jsx("button",{ref:n,"data-sidebar":"rail","aria-label":"Toggle Sidebar",tabIndex:-1,onClick:r,title:"Toggle Sidebar",className:K("absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] hover:after:bg-sidebar-border group-data-[side=left]:-right-4 group-data-[side=right]:left-0 sm:flex","[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize","[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize","group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar","[[data-side=left][data-collapsible=offcanvas]_&]:-right-2","[[data-side=right][data-collapsible=offcanvas]_&]:-left-2",e),...t})});BN.displayName="SidebarRail";const jg=y.forwardRef(({className:e,...t},n)=>p.jsx("main",{ref:n,className:K("relative flex min-h-svh flex-1 flex-col bg-background","peer-data-[variant=inset]:min-h-[calc(100svh-theme(spacing.4))] md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow",e),...t}));jg.displayName="SidebarInset";const aq=y.forwardRef(({className:e,...t},n)=>p.jsx(hn,{ref:n,"data-sidebar":"input",className:K("h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring",e),...t}));aq.displayName="SidebarInput";const iq=y.forwardRef(({className:e,...t},n)=>p.jsx("div",{ref:n,"data-sidebar":"header",className:K("flex flex-col gap-2 p-2",e),...t}));iq.displayName="SidebarHeader";const $N=y.forwardRef(({className:e,...t},n)=>p.jsx("div",{ref:n,"data-sidebar":"footer",className:K("flex flex-col gap-2 p-2",e),...t}));$N.displayName="SidebarFooter";const sq=y.forwardRef(({className:e,...t},n)=>p.jsx(Ei,{ref:n,"data-sidebar":"separator",className:K("mx-2 w-auto bg-sidebar-border",e),...t}));sq.displayName="SidebarSeparator";const Eg=y.forwardRef(({className:e,...t},n)=>p.jsx("div",{ref:n,"data-sidebar":"content",className:K("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",e),...t}));Eg.displayName="SidebarContent";const Vc=y.forwardRef(({className:e,...t},n)=>p.jsx("div",{ref:n,"data-sidebar":"group",className:K("relative flex w-full min-w-0 flex-col p-2",e),...t}));Vc.displayName="SidebarGroup";const Uc=y.forwardRef(({className:e,asChild:t=!1,...n},r)=>{const o=t?Uo:"div";return p.jsx(o,{ref:r,"data-sidebar":"group-label",className:K("duration-200 flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opa] ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",e),...n})});Uc.displayName="SidebarGroupLabel";const cq=y.forwardRef(({className:e,asChild:t=!1,...n},r)=>{const o=t?Uo:"button";return p.jsx(o,{ref:r,"data-sidebar":"group-action",className:K("absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","group-data-[collapsible=icon]:hidden",e),...n})});cq.displayName="SidebarGroupAction";const lq=y.forwardRef(({className:e,...t},n)=>p.jsx("div",{ref:n,"data-sidebar":"group-content",className:K("w-full text-sm",e),...t}));lq.displayName="SidebarGroupContent";const Bi=y.forwardRef(({className:e,...t},n)=>p.jsx("ul",{ref:n,"data-sidebar":"menu",className:K("flex w-full min-w-0 flex-col gap-1",e),...t}));Bi.displayName="SidebarMenu";const io=y.forwardRef(({className:e,...t},n)=>p.jsx("li",{ref:n,"data-sidebar":"menu-item",className:K("group/menu-item relative",e),...t}));io.displayName="SidebarMenuItem";const uq=Zr("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:!p-0"}},defaultVariants:{variant:"default",size:"default"}}),so=y.forwardRef(({asChild:e=!1,isActive:t=!1,variant:n="default",size:r="default",tooltip:o,className:a,...i},s)=>{const c=e?Uo:"button",{isMobile:l,state:u}=zc(),d=p.jsx(c,{ref:s,"data-sidebar":"menu-button","data-size":r,"data-active":t,className:K(uq({variant:n,size:r}),a),...i});return o?(typeof o=="string"&&(o={children:o}),p.jsxs(Ir,{children:[p.jsx(Dr,{asChild:!0,children:d}),p.jsx(fr,{side:"right",align:"center",hidden:u!=="collapsed"||l,...o})]})):d});so.displayName="SidebarMenuButton";const dq=y.forwardRef(({className:e,asChild:t=!1,showOnHover:n=!1,...r},o)=>{const a=t?Uo:"button";return p.jsx(a,{ref:o,"data-sidebar":"menu-action",className:K("absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 peer-hover/menu-button:text-sidebar-accent-foreground [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",n&&"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0",e),...r})});dq.displayName="SidebarMenuAction";const fq=y.forwardRef(({className:e,...t},n)=>p.jsx("div",{ref:n,"data-sidebar":"menu-badge",className:K("absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground select-none pointer-events-none","peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",e),...t}));fq.displayName="SidebarMenuBadge";const pq=y.forwardRef(({className:e,showIcon:t=!1,...n},r)=>{const o=y.useMemo(()=>`${Math.floor(Math.random()*40)+50}%`,[]);return p.jsxs("div",{ref:r,"data-sidebar":"menu-skeleton",className:K("rounded-md h-8 flex gap-2 px-2 items-center",e),...n,children:[t&&p.jsx(GO,{className:"size-4 rounded-md","data-sidebar":"menu-skeleton-icon"}),p.jsx(GO,{className:"h-4 flex-1 max-w-[--skeleton-width]","data-sidebar":"menu-skeleton-text",style:{"--skeleton-width":o}})]})});pq.displayName="SidebarMenuSkeleton";const zN=y.forwardRef(({className:e,...t},n)=>p.jsx("ul",{ref:n,"data-sidebar":"menu-sub",className:K("mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5","group-data-[collapsible=icon]:hidden",e),...t}));zN.displayName="SidebarMenuSub";const VN=y.forwardRef(({...e},t)=>p.jsx("li",{ref:t,...e}));VN.displayName="SidebarMenuSubItem";const UN=y.forwardRef(({asChild:e=!1,size:t="md",isActive:n,className:r,...o},a)=>{const i=e?Uo:"a";return p.jsx(i,{ref:a,"data-sidebar":"menu-sub-button","data-size":t,"data-active":n,className:K("flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground","data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground",t==="sm"&&"text-xs",t==="md"&&"text-sm","group-data-[collapsible=icon]:hidden",r),...o})});UN.displayName="SidebarMenuSubButton";const hq="hash",Vd={application:"/application/:applicationId?",whiteboard:"/whiteboard/:sessionId?",document:"/document/:documentId?"},Jt=(e,t)=>{let n=Vd[e];return t?n=Object.keys(t||{}).reduce((r,o)=>r.replace(`:${o}`,(t==null?void 0:t[o])||""),n):n=n.replace(/\/:[^/]+/g,""),n!=null&&n.endsWith("?")?n.slice(0,-1):n},mq=()=>{{const[,e]=window.location.hash.split("?");return new URLSearchParams(`?${e}`)}};function yq({items:e}){const{t}=Me("documents");return p.jsxs(Vc,{children:[p.jsx(Uc,{children:p.jsx("div",{className:"text-sm",children:t("title")})}),p.jsx(Bi,{children:e.map(n=>{var r;return p.jsx(nH,{asChild:!0,defaultOpen:n.isActive,className:"group/collapsible",children:p.jsxs(io,{children:[p.jsx(rH,{asChild:!0,children:p.jsxs(so,{className:"cursor-pointer",tooltip:t(n.title),children:[n.icon,p.jsx("span",{children:t(n.title)}),p.jsx(le,{name:"chevron-right",className:"ml-auto transition-transform duration-200 group-data-[state=open]/collapsible:rotate-90"})]})}),p.jsx(oH,{children:p.jsx(zN,{children:(r=n.items)==null?void 0:r.map(o=>p.jsx(VN,{className:"cursor-pointer",children:p.jsx(UN,{asChild:!0,children:p.jsx(Ty,{to:Jt("document",{documentId:o.id}),children:p.jsx("span",{children:t(o.title)})})})},t(o.title)))})})]})},n.title)})})]})}const gq=y.memo(({text:e,colors:t={first:"#9E7AFF",second:"#FE8BBB"},className:n,sparklesCount:r=10,...o})=>{const[a,i]=y.useState([]);return y.useEffect(()=>{const s=()=>{const d=`${Math.random()*100}%`,f=`${Math.random()*100}%`,h=Math.random()>.5?t.first:t.second,g=Math.random()*2,m=Math.random()*1+.3,v=Math.random()*10+5;return{id:`${d}-${f}-${Date.now()}`,x:d,y:f,color:h,delay:g,scale:m,lifespan:v}},c=()=>{const d=Array.from({length:r},s);i(d)},l=()=>{i(d=>d.map(f=>f.lifespan<=0?s():{...f,lifespan:f.lifespan-.1}))};c();const u=setInterval(l,100);return()=>clearInterval(u)},[t.first,t.second]),p.jsx("div",{className:K("text-6xl font-bold",n),...o,style:{"--sparkles-first-color":`${t.first}`,"--sparkles-second-color":`${t.second}`},children:p.jsxs("span",{className:"relative inline-block",children:[a.map(s=>p.jsx(vq,{...s},s.id)),p.jsx("strong",{children:e})]})})},(e,t)=>e.text===t.text),vq=({id:e,x:t,y:n,color:r,delay:o,scale:a})=>p.jsx(Hu.svg,{className:"pointer-events-none absolute z-20",initial:{opacity:0,left:t,top:n},animate:{opacity:[0,1,0],scale:[0,a,0],rotate:[75,120,150]},transition:{duration:.8,repeat:1/0,delay:o},width:"21",height:"21",viewBox:"0 0 21 21",children:p.jsx("path",{d:"M9.82531 0.843845C10.0553 0.215178 10.9446 0.215178 11.1746 0.843845L11.8618 2.72026C12.4006 4.19229 12.3916 6.39157 13.5 7.5C14.6084 8.60843 16.8077 8.59935 18.2797 9.13822L20.1561 9.82534C20.7858 10.0553 20.7858 10.9447 20.1561 11.1747L18.2797 11.8618C16.8077 12.4007 14.6084 12.3916 13.5 13.5C12.3916 14.6084 12.4006 16.8077 11.8618 18.2798L11.1746 20.1562C10.9446 20.7858 10.0553 20.7858 9.82531 20.1562L9.13819 18.2798C8.59932 16.8077 8.60843 14.6084 7.5 13.5C6.39157 12.3916 4.19225 12.4007 2.72023 11.8618L0.843814 11.1747C0.215148 10.9447 0.215148 10.0553 0.843814 9.82534L2.72023 9.13822C4.19225 8.59935 6.39157 8.60843 7.5 7.5C8.60843 6.39157 8.59932 4.19229 9.13819 2.72026L9.82531 0.843845Z",fill:r})},e);function bq({className:e,onClick:t}){const{t:n}=Me("sidebar");return p.jsxs(so,{className:K(e,"tw-w-full"),onClick:t,children:[p.jsx(le,{name:"frame"}),p.jsx(gq,{text:n("new_session"),className:"text-sm",sparklesCount:3})]})}const xq=()=>{const[e,t]=y.useState(!1),n=Ze(i=>i.setCurrentSession),r=Ze(i=>i.createSession),o=Wu(i=>i.setSelectedSessionId),a=y.useCallback(async i=>{try{t(!0);const s=await r(i);n(s),o(s.id)}finally{t(!1)}},[r,n,o]);return{loading:e,createSession:a}},$i=mc,wq=yc,HN=y.forwardRef(({className:e,...t},n)=>p.jsx(Ca,{ref:n,className:K("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));HN.displayName=Ca.displayName;const Da=y.forwardRef(({className:e,children:t,...n},r)=>p.jsxs(wq,{children:[p.jsx(HN,{}),p.jsxs(Oa,{ref:r,className:K("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...n,children:[t,p.jsxs(gc,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[p.jsx(le,{name:"x",className:"h-4 w-4"}),p.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Da.displayName=Oa.displayName;const La=({className:e,...t})=>p.jsx("div",{className:K("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});La.displayName="DialogHeader";const Sg=({className:e,...t})=>p.jsx("div",{className:K("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Sg.displayName="DialogFooter";const Fa=y.forwardRef(({className:e,...t},n)=>p.jsx(wi,{ref:n,className:K("text-lg font-semibold leading-none tracking-tight",e),...t}));Fa.displayName=wi.displayName;const Cg=y.forwardRef(({className:e,...t},n)=>p.jsx(_i,{ref:n,className:K("text-sm text-muted-foreground",e),...t}));Cg.displayName=_i.displayName;var _q="Label",WN=y.forwardRef((e,t)=>p.jsx(Ne.label,{...e,ref:t,onMouseDown:n=>{var r;n.target.closest("button, input, select, textarea")||((r=e.onMouseDown)==null||r.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));WN.displayName=_q;var qN=WN;let YN;YN=Zr("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Je=y.forwardRef(({className:e,...t},n)=>p.jsx(qN,{ref:n,className:K(YN(),e),...t})),Je.displayName=qN.displayName;const jq=ja(()=>{const e=Xt(),{t}=Me("dialogs"),[n,r]=y.useState(""),{toast:o}=$t(),{loading:a,createSession:i}=xq(),s=l=>{r(l.target.value)},c=async()=>{try{await i({name:n}),r(""),e.hide()}catch{o({variant:"destructive",description:t("create_session.errors.create_failed")})}};return p.jsx($i,{open:e.visible,onOpenChange:e.hide,children:p.jsxs(Da,{className:"sm:max-w-[425px]",children:[p.jsxs(La,{children:[p.jsx(Fa,{children:t("create_session.title")}),p.jsx(Cg,{children:t("create_session.description")})]}),p.jsx("div",{className:"grid gap-4 py-4",children:p.jsxs("div",{className:"flex flex-col space-y-1.5",children:[p.jsx(Je,{className:"mb-2",htmlFor:"name",children:t("create_session.name")}),p.jsx(hn,{onChange:s,id:"name",value:n,placeholder:t("create_session.name_placeholder")})]})}),p.jsx(Sg,{children:p.jsx(ot,{onClick:c,disabled:a||!n,type:"submit",children:t("create_session.create")})})]})})}),Eq=()=>{const[e,t]=y.useState(!1),n=Ze(o=>o.deleteSession),r=y.useCallback(async o=>{try{t(!0),await n(o),await Promise.all([ce("FlowEdge").find({select:["id"],where:{session_id:o}}).then(a=>Promise.all(a.map(i=>ce("FlowEdge").delete(i.id)))),ce("FlowNode").find({select:["id"],where:{session_id:o}}).then(a=>Promise.all(a.map(i=>ce("FlowNode").delete(i.id))))])}finally{t(!1)}},[n]);return{loading:e,deleteSession:r}};var KN="AlertDialog",[Sq,Cje]=Pn(KN,[Xy]),co=Xy(),XN=e=>{const{__scopeAlertDialog:t,...n}=e,r=co(t);return p.jsx(mc,{...r,...n,modal:!0})};XN.displayName=KN;var Cq="AlertDialogTrigger",Oq=y.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,o=co(n);return p.jsx(QO,{...o,...r,ref:t})});Oq.displayName=Cq;var Nq="AlertDialogPortal",QN=e=>{const{__scopeAlertDialog:t,...n}=e,r=co(t);return p.jsx(yc,{...r,...n})};QN.displayName=Nq;var Mq="AlertDialogOverlay",JN=y.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,o=co(n);return p.jsx(Ca,{...o,...r,ref:t})});JN.displayName=Mq;var zi="AlertDialogContent",[kq,Pq]=Sq(zi),ZN=y.forwardRef((e,t)=>{const{__scopeAlertDialog:n,children:r,...o}=e,a=co(n),i=y.useRef(null),s=lt(t,i),c=y.useRef(null);return p.jsx(qO,{contentName:zi,titleName:GN,docsSlug:"alert-dialog",children:p.jsx(kq,{scope:n,cancelRef:c,children:p.jsxs(Oa,{role:"alertdialog",...a,...o,ref:s,onOpenAutoFocus:ye(o.onOpenAutoFocus,l=>{var u;l.preventDefault(),(u=c.current)==null||u.focus({preventScroll:!0})}),onPointerDownOutside:l=>l.preventDefault(),onInteractOutside:l=>l.preventDefault(),children:[p.jsx(x7,{children:r}),p.jsx(iM,{contentRef:i})]})})})});ZN.displayName=zi;var GN="AlertDialogTitle",eM=y.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,o=co(n);return p.jsx(wi,{...o,...r,ref:t})});eM.displayName=GN;var tM="AlertDialogDescription",nM=y.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,o=co(n);return p.jsx(_i,{...o,...r,ref:t})});nM.displayName=tM;var Aq="AlertDialogAction",rM=y.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,o=co(n);return p.jsx(gc,{...o,...r,ref:t})});rM.displayName=Aq;var oM="AlertDialogCancel",aM=y.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,{cancelRef:o}=Pq(oM,n),a=co(n),i=lt(t,o);return p.jsx(gc,{...a,...r,ref:i})});aM.displayName=oM;let iM;iM=({contentRef:e})=>{const t=`\`${zi}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${zi}\` by passing a \`${tM}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${zi}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return y.useEffect(()=>{var n;document.getElementById((n=e.current)==null?void 0:n.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},NS=XN,OS=QN,Cm=JN,Om=ZN,km=rM,Pm=aM,Nm=eM,Mm=nM;const sM=NS,Tq=OS,cM=y.forwardRef(({className:e,...t},n)=>p.jsx(Cm,{className:K("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));cM.displayName=Cm.displayName;const Og=y.forwardRef(({className:e,...t},n)=>p.jsxs(Tq,{children:[p.jsx(cM,{}),p.jsx(Om,{ref:n,className:K("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));Og.displayName=Om.displayName;const Ng=({className:e,...t})=>p.jsx("div",{className:K("flex flex-col space-y-2 text-center sm:text-left",e),...t});Ng.displayName="AlertDialogHeader";const Mg=({className:e,...t})=>p.jsx("div",{className:K("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Mg.displayName="AlertDialogFooter";const kg=y.forwardRef(({className:e,...t},n)=>p.jsx(Nm,{ref:n,className:K("text-lg font-semibold",e),...t}));kg.displayName=Nm.displayName;const Pg=y.forwardRef(({className:e,...t},n)=>p.jsx(Mm,{ref:n,className:K("text-sm text-muted-foreground",e),...t}));Pg.displayName=Mm.displayName;const Ag=y.forwardRef(({className:e,...t},n)=>p.jsx(km,{ref:n,className:K(Tc(),e),...t}));Ag.displayName=km.displayName;const Tg=y.forwardRef(({className:e,...t},n)=>p.jsx(Pm,{ref:n,className:K(Tc({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));Tg.displayName=Pm.displayName;const lM=ja(({id:e})=>{const{t}=Me("dialogs"),n=Xt(),{toast:r}=$t(),{deleteSession:o,loading:a}=Eq(),i=async()=>{try{await o(e),n.hide()}catch{r({variant:"destructive",description:t("delete_session.errors.delete_failed")})}};return p.jsx(sM,{open:n.visible,onOpenChange:n.hide,children:p.jsxs(Og,{children:[p.jsxs(Ng,{children:[p.jsx(kg,{children:t("delete_session.title")}),p.jsx(Pg,{children:t("delete_session.description")})]}),p.jsxs(Mg,{children:[p.jsx(Tg,{onClick:n.hide,children:t("delete_session.cancel")}),p.jsx(Ag,{disabled:a,onClick:i,children:t("delete_session.delete")})]})]})})});function Rq({sessions:e,currentSession:t,setCurrentSession:n}){const{t:r}=Me("sidebar"),o=Pa(),a=Xt(jq),i=Xt(lM),s=y.useCallback(()=>{a.show({})},[a]),c=y.useCallback((u,d)=>{u.preventDefault(),u.stopPropagation(),i.show({id:d})},[i]),l=u=>{n(u),o(Jt("whiteboard",{sessionId:u.id}))};return p.jsxs(Vc,{className:"group-data-[collapsible=icon]:hidden",children:[p.jsx(Uc,{children:p.jsx("div",{className:"text-sm",children:r("sessions")})}),p.jsxs(Bi,{children:[p.jsx(io,{children:p.jsx(bq,{onClick:s,className:"w-full"})}),e.map(u=>p.jsx(io,{className:"cursor-pointer",children:p.jsx(so,{asChild:!0,onClick:()=>l(u),children:p.jsxs("div",{className:"flex flex-row justify-between items-center",children:[p.jsxs("div",{className:"flex gap-2",children:[(t==null?void 0:t.id)===u.id?p.jsx(le,{size:16,color:"green",name:"check"}):p.jsx(le,{size:16,name:"chevron-right"}),p.jsx("span",{children:u.name})]}),p.jsx(le,{onClick:d=>c(d,u.id),size:16,name:"trash-2",className:"!z-50"})]})})},u.id)),e!=null&&e.length?p.jsx(io,{children:p.jsxs(so,{className:"text-sidebar-foreground/70",children:[p.jsx(le,{name:"ellipsis",className:"text-sidebar-foreground/70"}),p.jsx("span",{children:r("more_session")})]})}):null]})]})}var Iq=y.createContext(void 0);Ho=function(e){const t=y.useContext(Iq);return e||t||"ltr"};function Dq(e,t=[]){let n=[];function r(a,i){const s=y.createContext(i),c=n.length;n=[...n,i];function l(d){const{scope:f,children:h,...g}=d,m=(f==null?void 0:f[e][c])||s,v=y.useMemo(()=>g,Object.values(g));return p.jsx(m.Provider,{value:v,children:h})}function u(d,f){const h=(f==null?void 0:f[e][c])||s,g=y.useContext(h);if(g)return g;if(i!==void 0)return i;throw new Error(`\`${d}\` must be used within \`${a}\``)}return l.displayName=a+"Provider",[l,u]}const o=()=>{const a=n.map(i=>y.createContext(i));return function(i){const s=(i==null?void 0:i[e])||a;return y.useMemo(()=>({[`__scope${e}`]:{...i,[e]:s}}),[i,s])}};return o.scopeName=e,[r,Lq(o,...t)]}function Lq(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(o){const a=r.reduce((i,{useScope:s,scopeName:c})=>{const l=s(o)[`__scope${c}`];return{...i,...l}},{});return y.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return n.scopeName=t.scopeName,n}let Ud,uM,Hc,Hd,Rg,dM,fM,pM,hM,Ig;Ud="rovingFocusGroup.onEntryFocus",uM={bubbles:!1,cancelable:!0},Hc="RovingFocusGroup",[Hd,Rg,dM]=qu(Hc),[fM,Gr]=Dq(Hc,[dM]),[pM,hM]=fM(Hc),Ig=y.forwardRef((e,t)=>p.jsx(Hd.Provider,{scope:e.__scopeRovingFocusGroup,children:p.jsx(Hd.Slot,{scope:e.__scopeRovingFocusGroup,children:p.jsx(Fq,{...e,ref:t})})})),Ig.displayName=Hc;var Fq=y.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:o=!1,dir:a,currentTabStopId:i,defaultCurrentTabStopId:s,onCurrentTabStopIdChange:c,onEntryFocus:l,preventScrollOnEntryFocus:u=!1,...d}=e,f=y.useRef(null),h=lt(t,f),g=Ho(a),[m=null,v]=nn({prop:i,defaultProp:s,onChange:c}),[b,x]=y.useState(!1),_=An(l),w=Rg(n),j=y.useRef(!1),[E,S]=y.useState(0);return y.useEffect(()=>{const C=f.current;if(C)return C.addEventListener(Ud,_),()=>C.removeEventListener(Ud,_)},[_]),p.jsx(pM,{scope:n,orientation:r,dir:g,loop:o,currentTabStopId:m,onItemFocus:y.useCallback(C=>v(C),[v]),onItemShiftTab:y.useCallback(()=>x(!0),[]),onFocusableItemAdd:y.useCallback(()=>S(C=>C+1),[]),onFocusableItemRemove:y.useCallback(()=>S(C=>C-1),[]),children:p.jsx(Ne.div,{tabIndex:b||E===0?-1:0,"data-orientation":r,...d,ref:h,style:{outline:"none",...e.style},onMouseDown:ye(e.onMouseDown,()=>{j.current=!0}),onFocus:ye(e.onFocus,C=>{const M=!j.current;if(C.target===C.currentTarget&&M&&!b){const N=new CustomEvent(Ud,uM);if(C.currentTarget.dispatchEvent(N),!N.defaultPrevented){const P=w().filter(k=>k.focusable),R=P.find(k=>k.active),A=P.find(k=>k.id===m),O=[R,A,...P].filter(Boolean).map(k=>k.ref.current);gM(O,u)}}j.current=!1}),onBlur:ye(e.onBlur,()=>x(!1))})})}),mM="RovingFocusGroupItem",yM=y.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:o=!1,tabStopId:a,...i}=e,s=mt(),c=a||s,l=hM(mM,n),u=l.currentTabStopId===c,d=Rg(n),{onFocusableItemAdd:f,onFocusableItemRemove:h}=l;return y.useEffect(()=>{if(r)return f(),()=>h()},[r,f,h]),p.jsx(Hd.ItemSlot,{scope:n,id:c,focusable:r,active:o,children:p.jsx(Ne.span,{tabIndex:u?0:-1,"data-orientation":l.orientation,...i,ref:t,onMouseDown:ye(e.onMouseDown,g=>{r?l.onItemFocus(c):g.preventDefault()}),onFocus:ye(e.onFocus,()=>l.onItemFocus(c)),onKeyDown:ye(e.onKeyDown,g=>{if(g.key==="Tab"&&g.shiftKey){l.onItemShiftTab();return}if(g.target!==g.currentTarget)return;const m=zq(g,l.orientation,l.dir);if(m!==void 0){if(g.metaKey||g.ctrlKey||g.altKey||g.shiftKey)return;g.preventDefault();let v=d().filter(b=>b.focusable).map(b=>b.ref.current);if(m==="last")v.reverse();else if(m==="prev"||m==="next"){m==="prev"&&v.reverse();const b=v.indexOf(g.currentTarget);v=l.loop?Vq(v,b+1):v.slice(b+1)}setTimeout(()=>gM(v))}})})})});yM.displayName=mM;var Bq={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function $q(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function zq(e,t,n){const r=$q(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return Bq[r]}function gM(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function Vq(e,t){return e.map((n,r)=>e[(t+r)%e.length])}let Wd,vM,Dg,bM,xM,wM,Vi,Ui,_M,jM,Go,qd,Hi,Lg,Fg,lo,EM,Wi,Bg;vc=Ig,bc=yM,Wd=["Enter"," "],vM=["ArrowDown","PageUp","Home"],Dg=["ArrowUp","PageDown","End"],bM=[...vM,...Dg],xM={ltr:[...Wd,"ArrowRight"],rtl:[...Wd,"ArrowLeft"]},wM={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Vi="Menu",[Ui,_M,jM]=qu(Vi),[Go,qd]=Pn(Vi,[jM,Li,Gr]),Hi=Li(),Lg=Gr(),[Fg,lo]=Go(Vi),[EM,Wi]=Go(Vi),Bg=e=>{const{__scopeMenu:t,open:n=!1,children:r,dir:o,onOpenChange:a,modal:i=!0}=e,s=Hi(t),[c,l]=y.useState(null),u=y.useRef(!1),d=An(a),f=Ho(o);return y.useEffect(()=>{const h=()=>{u.current=!0,document.addEventListener("pointerdown",g,{capture:!0,once:!0}),document.addEventListener("pointermove",g,{capture:!0,once:!0})},g=()=>u.current=!1;return document.addEventListener("keydown",h,{capture:!0}),()=>{document.removeEventListener("keydown",h,{capture:!0}),document.removeEventListener("pointerdown",g,{capture:!0}),document.removeEventListener("pointermove",g,{capture:!0})}},[]),p.jsx(Fd,{...s,children:p.jsx(Fg,{scope:t,open:n,onOpenChange:d,content:c,onContentChange:l,children:p.jsx(EM,{scope:t,onClose:y.useCallback(()=>d(!1),[d]),isUsingKeyboardRef:u,dir:f,modal:i,children:r})})})},Bg.displayName=Vi;var Uq="MenuAnchor",$g=y.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,o=Hi(n);return p.jsx(hg,{...o,...r,ref:t})});$g.displayName=Uq;var zg="MenuPortal",[Hq,SM]=Go(zg,{forceMount:void 0}),CM=e=>{const{__scopeMenu:t,forceMount:n,children:r,container:o}=e,a=lo(zg,t);return p.jsx(Hq,{scope:t,forceMount:n,children:p.jsx(rr,{present:n||a.open,children:p.jsx(um,{asChild:!0,container:o,children:r})})})};CM.displayName=zg;var Yn="MenuContent",[Wq,Vg]=Go(Yn),OM=y.forwardRef((e,t)=>{const n=SM(Yn,e.__scopeMenu),{forceMount:r=n.forceMount,...o}=e,a=lo(Yn,e.__scopeMenu),i=Wi(Yn,e.__scopeMenu);return p.jsx(Ui.Provider,{scope:e.__scopeMenu,children:p.jsx(rr,{present:r||a.open,children:p.jsx(Ui.Slot,{scope:e.__scopeMenu,children:i.modal?p.jsx(qq,{...o,ref:t}):p.jsx(Yq,{...o,ref:t})})})})}),qq=y.forwardRef((e,t)=>{const n=lo(Yn,e.__scopeMenu),r=y.useRef(null),o=lt(t,r);return y.useEffect(()=>{const a=r.current;if(a)return wc(a)},[]),p.jsx(Ug,{...e,ref:o,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:ye(e.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),Yq=y.forwardRef((e,t)=>{const n=lo(Yn,e.__scopeMenu);return p.jsx(Ug,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),Ug=y.forwardRef((e,t)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:o,onOpenAutoFocus:a,onCloseAutoFocus:i,disableOutsidePointerEvents:s,onEntryFocus:c,onEscapeKeyDown:l,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:f,onDismiss:h,disableOutsideScroll:g,...m}=e,v=lo(Yn,n),b=Wi(Yn,n),x=Hi(n),_=Lg(n),w=_M(n),[j,E]=y.useState(null),S=y.useRef(null),C=lt(t,S,v.onContentChange),M=y.useRef(0),N=y.useRef(""),P=y.useRef(0),R=y.useRef(null),A=y.useRef("right"),O=y.useRef(0),k=g?Cd:y.Fragment,T=g?{as:Uo,allowPinchZoom:!0}:void 0,D=L=>{var G,q;const B=N.current+L,V=w().filter(W=>!W.disabled),F=document.activeElement,H=(G=V.find(W=>W.ref.current===F))==null?void 0:G.textValue,Q=V.map(W=>W.textValue),Y=aY(Q,B,H),re=(q=V.find(W=>W.textValue===Y))==null?void 0:q.ref.current;(function W(Z){N.current=Z,window.clearTimeout(M.current),Z!==""&&(M.current=window.setTimeout(()=>W(""),1e3))})(B),re&&setTimeout(()=>re.focus())};y.useEffect(()=>()=>window.clearTimeout(M.current),[]),_c();const I=y.useCallback(L=>{var B,V;return A.current===((B=R.current)==null?void 0:B.side)&&sY(L,(V=R.current)==null?void 0:V.area)},[]);return p.jsx(Wq,{scope:n,searchRef:N,onItemEnter:y.useCallback(L=>{I(L)&&L.preventDefault()},[I]),onItemLeave:y.useCallback(L=>{var B;I(L)||((B=S.current)==null||B.focus(),E(null))},[I]),onTriggerLeave:y.useCallback(L=>{I(L)&&L.preventDefault()},[I]),pointerGraceTimerRef:P,onPointerGraceIntentChange:y.useCallback(L=>{R.current=L},[]),children:p.jsx(k,{...T,children:p.jsx(vd,{asChild:!0,trapped:o,onMountAutoFocus:ye(a,L=>{var B;L.preventDefault(),(B=S.current)==null||B.focus({preventScroll:!0})}),onUnmountAutoFocus:i,children:p.jsx(lm,{asChild:!0,disableOutsidePointerEvents:s,onEscapeKeyDown:l,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:f,onDismiss:h,children:p.jsx(vc,{asChild:!0,..._,dir:b.dir,orientation:"vertical",loop:r,currentTabStopId:j,onCurrentTabStopIdChange:E,onEntryFocus:ye(c,L=>{b.isUsingKeyboardRef.current||L.preventDefault()}),preventScrollOnEntryFocus:!0,children:p.jsx(mg,{role:"menu","aria-orientation":"vertical","data-state":WM(v.open),"data-radix-menu-content":"",dir:b.dir,...x,...m,ref:C,style:{outline:"none",...m.style},onKeyDown:ye(m.onKeyDown,L=>{const B=L.target.closest("[data-radix-menu-content]")===L.currentTarget,V=L.ctrlKey||L.altKey||L.metaKey,F=L.key.length===1;B&&(L.key==="Tab"&&L.preventDefault(),!V&&F&&D(L.key));const H=S.current;if(L.target!==H||!bM.includes(L.key))return;L.preventDefault();const Q=w().filter(Y=>!Y.disabled).map(Y=>Y.ref.current);Dg.includes(L.key)&&Q.reverse(),rY(Q)}),onBlur:ye(e.onBlur,L=>{L.currentTarget.contains(L.target)||(window.clearTimeout(M.current),N.current="")}),onPointerMove:ye(e.onPointerMove,qc(L=>{const B=L.target,V=O.current!==L.clientX;if(L.currentTarget.contains(B)&&V){const F=L.clientX>O.current?"right":"left";A.current=F,O.current=L.clientX}}))})})})})})})});OM.displayName=Yn;var Kq="MenuGroup",Hg=y.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return p.jsx(Ne.div,{role:"group",...r,ref:t})});Hg.displayName=Kq;var Xq="MenuLabel",NM=y.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return p.jsx(Ne.div,{...r,ref:t})});NM.displayName=Xq;var Yd="MenuItem",MM="menu.itemSelect",Kd=y.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:r,...o}=e,a=y.useRef(null),i=Wi(Yd,e.__scopeMenu),s=Vg(Yd,e.__scopeMenu),c=lt(t,a),l=y.useRef(!1),u=()=>{const d=a.current;if(!n&&d){const f=new CustomEvent(MM,{bubbles:!0,cancelable:!0});d.addEventListener(MM,h=>r==null?void 0:r(h),{once:!0}),J_e(d,f),f.defaultPrevented?l.current=!1:i.onClose()}};return p.jsx(kM,{...o,ref:c,disabled:n,onClick:ye(e.onClick,u),onPointerDown:d=>{var f;(f=e.onPointerDown)==null||f.call(e,d),l.current=!0},onPointerUp:ye(e.onPointerUp,d=>{var f;l.current||((f=d.currentTarget)==null||f.click())}),onKeyDown:ye(e.onKeyDown,d=>{const f=s.searchRef.current!=="";n||f&&d.key===" "||Wd.includes(d.key)&&(d.currentTarget.click(),d.preventDefault())})})});Kd.displayName=Yd;var kM=y.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:r=!1,textValue:o,...a}=e,i=Vg(Yd,n),s=Lg(n),c=y.useRef(null),l=lt(t,c),[u,d]=y.useState(!1),[f,h]=y.useState("");return y.useEffect(()=>{const g=c.current;g&&h((g.textContent??"").trim())},[a.children]),p.jsx(Ui.ItemSlot,{scope:n,disabled:r,textValue:o??f,children:p.jsx(bc,{asChild:!0,...s,focusable:!r,children:p.jsx(Ne.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...a,ref:l,onPointerMove:ye(e.onPointerMove,qc(g=>{r?i.onItemLeave(g):(i.onItemEnter(g),g.defaultPrevented||g.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:ye(e.onPointerLeave,qc(g=>i.onItemLeave(g))),onFocus:ye(e.onFocus,()=>d(!0)),onBlur:ye(e.onBlur,()=>d(!1))})})})}),Qq="MenuCheckboxItem",PM=y.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:r,...o}=e;return p.jsx(DM,{scope:e.__scopeMenu,checked:n,children:p.jsx(Kd,{role:"menuitemcheckbox","aria-checked":Xd(n)?"mixed":n,...o,ref:t,"data-state":Yg(n),onSelect:ye(o.onSelect,()=>r==null?void 0:r(Xd(n)?!0:!n),{checkForDefaultPrevented:!1})})})});PM.displayName=Qq;var AM="MenuRadioGroup",[Jq,Zq]=Go(AM,{value:void 0,onValueChange:()=>{}}),TM=y.forwardRef((e,t)=>{const{value:n,onValueChange:r,...o}=e,a=An(r);return p.jsx(Jq,{scope:e.__scopeMenu,value:n,onValueChange:a,children:p.jsx(Hg,{...o,ref:t})})});TM.displayName=AM;var RM="MenuRadioItem",IM=y.forwardRef((e,t)=>{const{value:n,...r}=e,o=Zq(RM,e.__scopeMenu),a=n===o.value;return p.jsx(DM,{scope:e.__scopeMenu,checked:a,children:p.jsx(Kd,{role:"menuitemradio","aria-checked":a,...r,ref:t,"data-state":Yg(a),onSelect:ye(r.onSelect,()=>{var i;return(i=o.onValueChange)==null?void 0:i.call(o,n)},{checkForDefaultPrevented:!1})})})});IM.displayName=RM;var Wg="MenuItemIndicator",[DM,Gq]=Go(Wg,{checked:!1}),LM=y.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:r,...o}=e,a=Gq(Wg,n);return p.jsx(rr,{present:r||Xd(a.checked)||a.checked===!0,children:p.jsx(Ne.span,{...o,ref:t,"data-state":Yg(a.checked)})})});LM.displayName=Wg;var eY="MenuSeparator",FM=y.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return p.jsx(Ne.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});FM.displayName=eY;var tY="MenuArrow",BM=y.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,o=Hi(n);return p.jsx(yg,{...o,...r,ref:t})});BM.displayName=tY;var qg="MenuSub",[nY,$M]=Go(qg),zM=e=>{const{__scopeMenu:t,children:n,open:r=!1,onOpenChange:o}=e,a=lo(qg,t),i=Hi(t),[s,c]=y.useState(null),[l,u]=y.useState(null),d=An(o);return y.useEffect(()=>(a.open===!1&&d(!1),()=>d(!1)),[a.open,d]),p.jsx(Fd,{...i,children:p.jsx(Fg,{scope:t,open:r,onOpenChange:d,content:l,onContentChange:u,children:p.jsx(nY,{scope:t,contentId:mt(),triggerId:mt(),trigger:s,onTriggerChange:c,children:n})})})};zM.displayName=qg;var Wc="MenuSubTrigger",VM=y.forwardRef((e,t)=>{const n=lo(Wc,e.__scopeMenu),r=Wi(Wc,e.__scopeMenu),o=$M(Wc,e.__scopeMenu),a=Vg(Wc,e.__scopeMenu),i=y.useRef(null),{pointerGraceTimerRef:s,onPointerGraceIntentChange:c}=a,l={__scopeMenu:e.__scopeMenu},u=y.useCallback(()=>{i.current&&window.clearTimeout(i.current),i.current=null},[]);return y.useEffect(()=>u,[u]),y.useEffect(()=>{const d=s.current;return()=>{window.clearTimeout(d),c(null)}},[s,c]),p.jsx($g,{asChild:!0,...l,children:p.jsx(kM,{id:o.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":o.contentId,"data-state":WM(n.open),...e,ref:w7(t,o.onTriggerChange),onClick:d=>{var f;(f=e.onClick)==null||f.call(e,d),!(e.disabled||d.defaultPrevented)&&(d.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:ye(e.onPointerMove,qc(d=>{a.onItemEnter(d),!d.defaultPrevented&&!e.disabled&&!n.open&&!i.current&&(a.onPointerGraceIntentChange(null),i.current=window.setTimeout(()=>{n.onOpenChange(!0),u()},100))})),onPointerLeave:ye(e.onPointerLeave,qc(d=>{var h,g;u();const f=(h=n.content)==null?void 0:h.getBoundingClientRect();if(f){const m=(g=n.content)==null?void 0:g.dataset.side,v=m==="right",b=v?-5:5,x=f[v?"left":"right"],_=f[v?"right":"left"];a.onPointerGraceIntentChange({area:[{x:d.clientX+b,y:d.clientY},{x,y:f.top},{x:_,y:f.top},{x:_,y:f.bottom},{x,y:f.bottom}],side:m}),window.clearTimeout(s.current),s.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(d),d.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:ye(e.onKeyDown,d=>{var h;const f=a.searchRef.current!=="";e.disabled||f&&d.key===" "||xM[r.dir].includes(d.key)&&(n.onOpenChange(!0),(h=n.content)==null||h.focus(),d.preventDefault())})})})});VM.displayName=Wc;var UM="MenuSubContent",HM=y.forwardRef((e,t)=>{const n=SM(Yn,e.__scopeMenu),{forceMount:r=n.forceMount,...o}=e,a=lo(Yn,e.__scopeMenu),i=Wi(Yn,e.__scopeMenu),s=$M(UM,e.__scopeMenu),c=y.useRef(null),l=lt(t,c);return p.jsx(Ui.Provider,{scope:e.__scopeMenu,children:p.jsx(rr,{present:r||a.open,children:p.jsx(Ui.Slot,{scope:e.__scopeMenu,children:p.jsx(Ug,{id:s.contentId,"aria-labelledby":s.triggerId,...o,ref:l,align:"start",side:i.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{var d;i.isUsingKeyboardRef.current&&((d=c.current)==null||d.focus()),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:ye(e.onFocusOutside,u=>{u.target!==s.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:ye(e.onEscapeKeyDown,u=>{i.onClose(),u.preventDefault()}),onKeyDown:ye(e.onKeyDown,u=>{var h;const d=u.currentTarget.contains(u.target),f=wM[i.dir].includes(u.key);d&&f&&(a.onOpenChange(!1),(h=s.trigger)==null||h.focus(),u.preventDefault())})})})})})});HM.displayName=UM;function WM(e){return e?"open":"closed"}function Xd(e){return e==="indeterminate"}function Yg(e){return Xd(e)?"indeterminate":e?"checked":"unchecked"}function rY(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function oY(e,t){return e.map((n,r)=>e[(t+r)%e.length])}function aY(e,t,n){const r=t.length>1&&Array.from(t).every(s=>s===t[0])?t[0]:t,o=n?e.indexOf(n):-1;let a=oY(e,Math.max(o,0));r.length===1&&(a=a.filter(s=>s!==n));const i=a.find(s=>s.toLowerCase().startsWith(r.toLowerCase()));return i!==n?i:void 0}function iY(e,t){const{x:n,y:r}=e;let o=!1;for(let a=0,i=t.length-1;a<t.length;i=a++){const s=t[a].x,c=t[a].y,l=t[i].x,u=t[i].y;c>r!=u>r&&n<(l-s)*(r-c)/(u-c)+s&&(o=!o)}return o}function sY(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return iY(n,t)}function qc(e){return t=>t.pointerType==="mouse"?e(t):void 0}var qM=Bg,YM=$g,KM=CM,XM=OM,QM=Hg,JM=NM,ZM=Kd,GM=PM,ek=TM,tk=IM,nk=LM,rk=FM,ok=BM,cY=zM,ak=VM,ik=HM,Kg="DropdownMenu",[lY,Oje]=Pn(Kg,[qd]),rn=qd(),[uY,sk]=lY(Kg),ck=e=>{const{__scopeDropdownMenu:t,children:n,dir:r,open:o,defaultOpen:a,onOpenChange:i,modal:s=!0}=e,c=rn(t),l=y.useRef(null),[u=!1,d]=nn({prop:o,defaultProp:a,onChange:i});return p.jsx(uY,{scope:t,triggerId:mt(),triggerRef:l,contentId:mt(),open:u,onOpenChange:d,onOpenToggle:y.useCallback(()=>d(f=>!f),[d]),modal:s,children:p.jsx(qM,{...c,open:u,onOpenChange:d,dir:r,modal:s,children:n})})};ck.displayName=Kg;var lk="DropdownMenuTrigger",uk=y.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...o}=e,a=sk(lk,n),i=rn(n);return p.jsx(YM,{asChild:!0,...i,children:p.jsx(Ne.button,{type:"button",id:a.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...o,ref:w7(t,a.triggerRef),onPointerDown:ye(e.onPointerDown,s=>{!r&&s.button===0&&s.ctrlKey===!1&&(a.onOpenToggle(),a.open||s.preventDefault())}),onKeyDown:ye(e.onKeyDown,s=>{r||(["Enter"," "].includes(s.key)&&a.onOpenToggle(),s.key==="ArrowDown"&&a.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(s.key)&&s.preventDefault())})})})});uk.displayName=lk;var dY="DropdownMenuPortal",dk=e=>{const{__scopeDropdownMenu:t,...n}=e,r=rn(t);return p.jsx(KM,{...r,...n})};dk.displayName=dY;var fk="DropdownMenuContent",pk=y.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=sk(fk,n),a=rn(n),i=y.useRef(!1);return p.jsx(XM,{id:o.contentId,"aria-labelledby":o.triggerId,...a,...r,ref:t,onCloseAutoFocus:ye(e.onCloseAutoFocus,s=>{var c;i.current||((c=o.triggerRef.current)==null||c.focus()),i.current=!1,s.preventDefault()}),onInteractOutside:ye(e.onInteractOutside,s=>{const c=s.detail.originalEvent,l=c.button===0&&c.ctrlKey===!0,u=c.button===2||l;(!o.modal||u)&&(i.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});pk.displayName=fk;var fY="DropdownMenuGroup",hk=y.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=rn(n);return p.jsx(QM,{...o,...r,ref:t})});hk.displayName=fY;var pY="DropdownMenuLabel",mk=y.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=rn(n);return p.jsx(JM,{...o,...r,ref:t})});mk.displayName=pY;var hY="DropdownMenuItem",yk=y.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=rn(n);return p.jsx(ZM,{...o,...r,ref:t})});yk.displayName=hY;var mY="DropdownMenuCheckboxItem",gk=y.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=rn(n);return p.jsx(GM,{...o,...r,ref:t})});gk.displayName=mY;var yY="DropdownMenuRadioGroup",vk=y.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=rn(n);return p.jsx(ek,{...o,...r,ref:t})});vk.displayName=yY;var gY="DropdownMenuRadioItem",bk=y.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=rn(n);return p.jsx(tk,{...o,...r,ref:t})});bk.displayName=gY;var vY="DropdownMenuItemIndicator",xk=y.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=rn(n);return p.jsx(nk,{...o,...r,ref:t})});xk.displayName=vY;var bY="DropdownMenuSeparator",wk=y.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=rn(n);return p.jsx(rk,{...o,...r,ref:t})});wk.displayName=bY;var xY="DropdownMenuArrow",wY=y.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=rn(n);return p.jsx(ok,{...o,...r,ref:t})});wY.displayName=xY;var _Y=e=>{const{__scopeDropdownMenu:t,children:n,open:r,onOpenChange:o,defaultOpen:a}=e,i=rn(t),[s=!1,c]=nn({prop:r,defaultProp:a,onChange:o});return p.jsx(cY,{...i,open:s,onOpenChange:c,children:n})},jY="DropdownMenuSubTrigger",_k=y.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=rn(n);return p.jsx(ak,{...o,...r,ref:t})});_k.displayName=jY;var EY="DropdownMenuSubContent",jk=y.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=rn(n);return p.jsx(ik,{...o,...r,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});jk.displayName=EY,FS=ck,BS=uk,LS=dk,Dm=pk,DS=hk,Um=mk,Bm=yk,$m=gk,I7=vk,Vm=bk,zm=xk,Hm=wk,k7=_Y,Lm=_k,Fm=jk;const SY=FS,CY=BS,OY=DS,NY=y.forwardRef(({className:e,inset:t,children:n,...r},o)=>p.jsxs(Lm,{ref:o,className:K("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t&&"pl-8",e),...r,children:[n,p.jsx(le,{name:"chevron-right",className:"ml-auto"})]}));NY.displayName=Lm.displayName;const MY=y.forwardRef(({className:e,...t},n)=>p.jsx(Fm,{ref:n,className:K("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));MY.displayName=Fm.displayName;const Ek=y.forwardRef(({className:e,sideOffset:t=4,...n},r)=>p.jsx(LS,{children:p.jsx(Dm,{ref:r,sideOffset:t,className:K("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));Ek.displayName=Dm.displayName;const Sk=y.forwardRef(({className:e,inset:t,...n},r)=>p.jsx(Bm,{ref:r,className:K("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t&&"pl-8",e),...n}));Sk.displayName=Bm.displayName;const kY=y.forwardRef(({className:e,children:t,checked:n,...r},o)=>p.jsxs($m,{ref:o,className:K("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:n,...r,children:[p.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:p.jsx(zm,{children:p.jsx(le,{name:"check",className:"h-4 w-4"})})}),t]}));kY.displayName=$m.displayName;const PY=y.forwardRef(({className:e,children:t,...n},r)=>p.jsxs(Vm,{ref:r,className:K("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[p.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:p.jsx(zm,{children:p.jsx(le,{name:"circle",className:"h-4 w-4"})})}),t]}));PY.displayName=Vm.displayName;const AY=y.forwardRef(({className:e,inset:t,...n},r)=>p.jsx(Um,{ref:r,className:K("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...n}));AY.displayName=Um.displayName;const TY=y.forwardRef(({className:e,...t},n)=>p.jsx(Hm,{ref:n,className:K("-mx-1 my-1 h-px bg-muted",e),...t}));TY.displayName=Hm.displayName;function RY(){const{t:e}=Me("sidebar"),{isMobile:t}=zc();return p.jsx(Bi,{children:p.jsx(io,{children:p.jsxs(SY,{children:[p.jsx(CY,{asChild:!0,children:p.jsxs(so,{size:"lg",className:"data-[state=open]:bg-sidebar-accent data-[state=open]:text-sidebar-accent-foreground",children:[p.jsx("div",{children:p.jsx(le,{name:"settings",size:28,className:"pr-2"})}),p.jsx(le,{name:"chevrons-up-down",className:"ml-auto size-4"})]})}),p.jsx(Ek,{className:"w-[--radix-dropdown-menu-trigger-width] min-w-56 rounded-lg",side:t?"bottom":"right",align:"end",sideOffset:4,children:p.jsx(OY,{children:p.jsxs(Sk,{children:[p.jsx(le,{name:"sparkles"}),e("contact")]})})})]})})})}const IY=Zr("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function on({className:e,variant:t,...n}){return p.jsx("div",{className:K(IY({variant:t}),e),...n})}function DY({applications:e,currentSession:t,setCurrentSession:n}){const{t:r}=Me("sidebar"),o=Pa(),a=Xt(lM),i=y.useCallback((l,u)=>{l.preventDefault(),l.stopPropagation(),a.show({id:u})},[a]),s=l=>{n(l),o(Jt("application",{applicationId:l.id}))},c=l=>{switch(l.main_source_type){case"Thread":return p.jsx(on,{className:"ml-1",color:"blue",children:r("application_types.chat")});default:return null}};return p.jsxs(Vc,{className:"group-data-[collapsible=icon]:hidden pt-0",children:[p.jsx(Uc,{children:p.jsx("div",{className:"text-sm",children:r("applications")})}),p.jsxs(Bi,{children:[e==null?void 0:e.map(l=>p.jsx(io,{className:"cursor-pointer",children:p.jsx(so,{asChild:!0,onClick:()=>s(l),children:p.jsxs("div",{className:"flex flex-row justify-between items-center !h-auto",children:[p.jsxs("div",{className:"flex gap-2",children:[(t==null?void 0:t.id)===l.id?p.jsx(le,{size:16,color:"green",name:"check"}):p.jsx(le,{size:16,name:"chevron-right"}),p.jsxs("span",{children:[l.name,c(l)]})]}),p.jsx(le,{onClick:u=>i(u,l.id),size:16,className:"!z-50",name:"trash-2"})]})})},l.id)),e?p.jsx(io,{children:p.jsxs(so,{className:"text-sidebar-foreground/70",children:[p.jsx(le,{name:"ellipsis",className:"text-sidebar-foreground/70"}),p.jsx("span",{children:r("more_session")})]})}):null]})]})}const LY={navMain:[{title:"playground.title",icon:p.jsx(le,{name:"square-terminal"}),isActive:!0,items:[{title:"playground.nodes",id:"nodes"},{title:"playground.connections",id:"connections"}]},{title:"model.title",url:"#",icon:p.jsx(le,{name:"bot"}),items:[{title:"model.llm",id:"llm"},{title:"model.embedding",id:"embedding"}]},{title:"tutorial.title",icon:p.jsx(le,{name:"book-open"}),items:[{title:"tutorial.get_started",id:"get-started"},{title:"tutorial.simple_workflow",id:"simple-workflow"},{title:"tutorial.ai_structured_output",id:"ai-structured-output"},{title:"tutorial.standalone_chat_application",id:"chat-application"},{title:"tutorial.standalone_editor_application",id:"editor-application"},{title:"tutorial.tool_calling",id:"tool-calling"},{title:"tutorial.vector_database",id:"vector-database"}]},{title:"application.title",icon:p.jsx(le,{name:"settings-2"}),items:[{title:"application.changelog",id:"changelog"}]}]};function FY({sessions:e,applications:t,currentSession:n,setCurrentSession:r,...o}){return p.jsxs(_g,{collapsible:"icon",...o,children:[p.jsx("div",{className:"h-1"}),p.jsxs(Eg,{children:[p.jsx(Rq,{sessions:e||[],currentSession:n,setCurrentSession:r}),p.jsx(DY,{applications:t||[],currentSession:n,setCurrentSession:r}),p.jsx(yq,{items:LY.navMain})]}),p.jsx($N,{children:p.jsx(RY,{})}),p.jsx(BN,{})]})}jn=y.memo(e=>{const{loading:t,...n}=e;return p.jsx(ot,{...n,disabled:e.disabled||t,children:t?p.jsx(le,{name:"loader-circle",className:"animate-spin"}):e.children})});function BY({className:e,onProcess:t=async()=>(await new Promise(o=>setTimeout(o,2e3)),Math.random()>.5),processDuration:n=2e3,...r}){const[o,a]=y.useState(!1),[i,s]=y.useState(null),[c,l]=y.useState(!1),[,u]=y.useState(0);y.useEffect(()=>{if(o){const f=Date.now(),h=setInterval(()=>{const g=(Date.now()-f)/n*100;g>=100?(clearInterval(h),u(100)):u(g)},10);return()=>clearInterval(h)}},[o,n]);async function d(){if(o)return;a(!0),s(null),u(0),await new Promise(h=>setTimeout(h,n));const f=t?await t():!0;s(f),a(!1),l(!0),setTimeout(()=>{s(null),u(0),l(!1)},2e3)}return p.jsx(ot,{className:K("relative group","transition-all duration-300",o&&"cursor-wait",e),variant:"ghost",onClick:d,disabled:o,...r,children:p.jsx("div",{className:K("w-full flex items-center justify-center gap-2",c&&"animate-[scale_300ms_ease-in-out]"),children:i===null?p.jsx(p.Fragment,{children:p.jsx(le,{name:"forward",className:K("w-4 h-4 transition-transform duration-200","group-hover:scale-110",o&&"animate-bounce")})}):i?p.jsx(p.Fragment,{children:p.jsx(le,{name:"check",className:"w-4 h-4 text-green-500"})}):p.jsx(p.Fragment,{children:p.jsx(le,{name:"x",className:"w-4 h-4 text-red-500"})})})})}const Lr="NOLLM",$Y="0123456789abcdef",zY=[8,4,4,4,12];function Yc(){return zY.map(e=>Z_e($Y,e)()).join("-")}const VY=()=>{const e=Ze(t=>t.currentSession);return{exportSession:y.useCallback(async()=>{if(!(e!=null&&e.id))return;const t={},n={},r=Object.keys(_7).filter(c=>c!=="Session");await Promise.all(r.map(c=>ce(c).find({where:{session_id:e.id}}).then(l=>{l.map(u=>{n[u.id]=u.id}),t[c]=l}))),Object.keys(n).forEach(c=>{n[c]=`[ID_${Yc()}]`});let o=JSON.stringify({[Lr]:{key:e.id,session:Object.entries(e).reduce((c,[l,u])=>((typeof u!="object"||u===null)&&(c[l]=u),u===void 0&&(c[l]=null),c),{}),ids:Object.keys(n)},...t});Object.keys(n).forEach(c=>{o=o.replace(new RegExp(c,"g"),n[c])}),o=o.replace(new RegExp(e.id,"g"),"[SESSION_ID]");const a=new Blob([o],{type:"application/json"}),i=URL.createObjectURL(a),s=document.createElement("a");s.href=i,s.download=`${e.name}_${new Date}.json`,s.click()},[e])}},UY=()=>{const[e,t]=y.useState(!1),n=Pa(),r=y.useCallback((a,{idMap:i,newSessionId:s,replaceItem:c})=>{const l=a;return{...Object.keys(l).reduce((u,d)=>(l[d]&&typeof l[d]=="string"&&i[l[d]]?u[d]=i[l[d]]:d==="session_id"&&s?u[d]=s:u[d]=l[d],u),{}),...c||{}}},[]),o=y.useCallback(async a=>{try{t(!0);const i=Object.keys(_7).filter(d=>d!==Lr);if(!Object.keys(a[Lr]).length||typeof a[Lr]!="object")throw new Error("Missing Metadata");if(!("session"in a[Lr])||!a[Lr].session)throw new Error("Missing Session Metadata");const s=a[Lr].session;if(!("ids"in a[Lr]))throw new Error("Missing Session ID");const c=a[Lr].ids.reduce((d,f)=>(d[f]=Yc(),d),{}),l=Object.keys(a).filter(d=>d!==Lr);if(!l.every(d=>i.includes(d)))throw new Error("Invalid JSON keys");if(!l.every(d=>Array.isArray(a[d])))throw new Error("Invalid JSON values");l.forEach(d=>{a[d].forEach(f=>{if("session_id"in f&&f.session_id!=="[SESSION_ID]")throw new Error("Invalid JSON values")})});const u=await ce("Session").save(r(s,{idMap:c,newSessionId:"",replaceItem:{id:void 0}}));if(!u)throw new Error("Failed to import session");await Promise.all(i.map(d=>{const f=a[d];if(!f||!f.length)return Promise.resolve();const h=f.map(g=>r(g,{idMap:c,newSessionId:u.id}));return ce(d).save(h)})),u.type===lc.Whiteboard?n(Jt("whiteboard",{sessionId:u.id})):u.type===lc.StandaloneApp&&n(Jt("application",{applicationId:u.id}))}finally{t(!1)}},[n,r]);return{loading:e,importSession:o}};function HY(){const{t:e}=Me("tooltips"),t=Ar(),n=Wu(f=>f.setTheme),r=Wu(f=>f.theme),{exportSession:o}=VY(),{loading:a,importSession:i}=UY(),s=y.useRef(null),c=y.useCallback(()=>{n(r==="dark"?"light":"dark")},[r,n]),l=y.useCallback(async()=>{try{return await o(),!0}catch(f){return dm(f),!1}},[o]),u=y.useCallback(async f=>{var h;try{const g=(h=f.target.files)==null?void 0:h[0];if(!g)return;const m=await new Promise((v,b)=>{const x=new FileReader;x.onload=_=>{var w;try{const j=(w=_.target)==null?void 0:w.result;v(JSON.parse(j))}catch(j){b(j)}},x.onerror=_=>{b(_)},x.readAsText(g)});await i(m)}catch(g){return dm(g),!1}},[i]),d=y.useMemo(()=>{if(t.pathname.includes(Jt("whiteboard")))return e("whiteboard");if(t.pathname.includes(Jt("application")))return e("apllication")},[t.pathname,e]);return p.jsxs("header",{className:"flex h-14 shrink-0 items-center gap-2 transition-[width,height] ease-linear justify-between",children:[p.jsxs("div",{className:"flex items-center gap-2 px-4",children:[p.jsx(FN,{}),p.jsx(Je,{children:d})]}),p.jsx("div",{className:"flex items-center pl-4 pr-2",children:p.jsxs($c,{children:[p.jsxs(Ir,{children:[p.jsx(Dr,{children:p.jsxs(jn,{loading:a,variant:"ghost",onClick:()=>{var f;return(f=s.current)==null?void 0:f.click()},children:[p.jsx(le,{size:18,name:"import"}),p.jsx("input",{ref:s,type:"file",accept:".json",onChange:u,className:"hidden"},`${Date.now()}`)]})}),p.jsx(fr,{children:p.jsx("p",{children:e("import")})})]}),p.jsxs(Ir,{children:[p.jsx(Dr,{children:p.jsx(BY,{onProcess:l})}),p.jsx(fr,{children:p.jsx("p",{children:e("export")})})]}),p.jsxs(Ir,{children:[p.jsx(Dr,{children:p.jsx(ot,{disabled:a,onClick:c,variant:"ghost",children:p.jsx(le,{size:18,name:r==="dark"?"moon":"sun"})})}),p.jsx(fr,{children:p.jsx("p",{children:e("theme")})})]}),p.jsxs(Ir,{children:[p.jsx(Dr,{children:p.jsx(ot,{variant:"link",children:p.jsx("a",{referrerPolicy:"no-referrer",target:"_blank",href:"https://github.com/zrg-team/NoLLMChat",children:p.jsx(le,{size:18,name:"github"})})})}),p.jsx(fr,{children:p.jsx("p",{children:"https://github.com/zrg-team/NoLLMChat"})})]})]})})]})}function Ck({requiredSession:e}){const t=$C(),n=Pa(),r=Ar(),o=y.useRef(r),a=Ze(l=>l.currentSession),i=Ze(l=>l.sessions),s=Ze(l=>l.applications),c=Ze(l=>l.setCurrentSession);return o.current=r,y.useEffect(()=>{!(a!=null&&a.id)||!e||(r.pathname.includes(Jt("whiteboard"))?t.sessionId?t.sessionId&&t.sessionId!==(a==null?void 0:a.id)&&c(t.sessionId):n(Jt("whiteboard",{sessionId:a==null?void 0:a.id})):r.pathname.includes(Jt("application"))&&(t.applicationId?t.applicationId&&t.applicationId!==(a==null?void 0:a.id)&&c(t.applicationId):n(Jt("application",{applicationId:a==null?void 0:a.id}))))},[a==null?void 0:a.id,r.pathname,n,t.applicationId,t.sessionId,e,c]),y.useEffect(()=>{e&&c(t.sessionId||t.applicationId).then(l=>{mq().has("flow")&&l.type===lc.StandaloneApp||(l.type===lc.StandaloneApp&&o.current.pathname.includes(Jt("whiteboard").replace("/",""))?n(Jt("application",{applicationId:l.id})):l.type===lc.Whiteboard&&o.current.pathname.includes(Jt("application").replace("/",""))&&n(Jt("whiteboard",{sessionId:l.id})))})},[n,t.applicationId,t.sessionId,e,c]),p.jsxs(wg,{defaultOpen:!1,children:[p.jsx(FY,{sessions:i,applications:s,currentSession:a,setCurrentSession:c}),p.jsxs(jg,{className:"max-h-screen overflow-hidden",children:[p.jsx(HY,{}),p.jsx(Ei,{className:"shrink-0"}),p.jsx("div",{className:"flex flex-1 flex-col p-0 m-0 overflow-y-auto",children:p.jsx(dU,{})})]})]})}const Ok=y.forwardRef(({className:e,children:t,...n},r)=>p.jsx("div",{className:K("flex flex-col w-full h-full p-4 gap-6 overflow-y-auto",e),ref:r,...n,children:t}));Ok.displayName="ChatMessageList";var Nk="vercel.ai.error",WY=Symbol.for(Nk),Mk,qY=class F7 extends Error{constructor({name:t,message:n,cause:r}){super(n),this[Mk]=!0,this.name=t,this.cause=r}static isInstance(t){return F7.hasMarker(t,Nk)}static hasMarker(t,n){const r=Symbol.for(n);return t!=null&&typeof t=="object"&&r in t&&typeof t[r]=="boolean"&&t[r]===!0}};Mk=WY;var qi=qY;function kk(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}var Pk="AI_InvalidArgumentError",Ak=`vercel.ai.error.${Pk}`,YY=Symbol.for(Ak),Tk,KY=class extends qi{constructor({message:e,cause:t,argument:n}){super({name:Pk,message:e,cause:t}),this[Tk]=!0,this.argument=n}static isInstance(e){return qi.hasMarker(e,Ak)}};Tk=YY;var Rk="AI_JSONParseError",Ik=`vercel.ai.error.${Rk}`,XY=Symbol.for(Ik),Dk,Lk=class extends qi{constructor({text:e,cause:t}){super({name:Rk,message:`JSON parsing failed: Text: ${e}.
Error message: ${kk(t)}`,cause:t}),this[Dk]=!0,this.text=e}static isInstance(e){return qi.hasMarker(e,Ik)}};Dk=XY;var Fk="AI_TypeValidationError",Bk=`vercel.ai.error.${Fk}`,QY=Symbol.for(Bk),$k,JY=class nC extends qi{constructor({value:t,cause:n}){super({name:Fk,message:`Type validation failed: Value: ${JSON.stringify(t)}.
Error message: ${kk(n)}`,cause:n}),this[$k]=!0,this.value=t}static isInstance(t){return qi.hasMarker(t,Bk)}static wrap({value:t,cause:n}){return nC.isInstance(n)&&n.value===t?n:new nC({value:t,cause:n})}};$k=QY;var zk=JY;let ZY=(e,t=21)=>(n=t)=>{let r="",o=n;for(;o--;)r+=e[Math.random()*e.length|0];return r};var Ba={exports:{}},Vk;function GY(){if(Vk)return Ba.exports;Vk=1;const e=typeof fm<"u",t=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*:/,n=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/;function r(s,c,l){l==null&&c!==null&&typeof c=="object"&&(l=c,c=void 0),e&&fm.isBuffer(s)&&(s=s.toString()),s&&s.charCodeAt(0)===65279&&(s=s.slice(1));const u=JSON.parse(s,c);if(u===null||typeof u!="object")return u;const d=l&&l.protoAction||"error",f=l&&l.constructorAction||"error";if(d==="ignore"&&f==="ignore")return u;if(d!=="ignore"&&f!=="ignore"){if(t.test(s)===!1&&n.test(s)===!1)return u}else if(d!=="ignore"&&f==="ignore"){if(t.test(s)===!1)return u}else if(n.test(s)===!1)return u;return o(u,{protoAction:d,constructorAction:f,safe:l&&l.safe})}function o(s,{protoAction:c="error",constructorAction:l="error",safe:u}={}){let d=[s];for(;d.length;){const f=d;d=[];for(const h of f){if(c!=="ignore"&&Object.prototype.hasOwnProperty.call(h,"__proto__")){if(u===!0)return null;if(c==="error")throw new SyntaxError("Object contains forbidden prototype property");delete h.__proto__}if(l!=="ignore"&&Object.prototype.hasOwnProperty.call(h,"constructor")&&Object.prototype.hasOwnProperty.call(h.constructor,"prototype")){if(u===!0)return null;if(l==="error")throw new SyntaxError("Object contains forbidden prototype property");delete h.constructor}for(const g in h){const m=h[g];m&&typeof m=="object"&&d.push(m)}}}return s}function a(s,c,l){const u=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return r(s,c,l)}finally{Error.stackTraceLimit=u}}function i(s,c){const l=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return r(s,c,{safe:!0})}catch{return null}finally{Error.stackTraceLimit=l}}return Ba.exports=a,Ba.exports.default=a,Ba.exports.parse=a,Ba.exports.safeParse=i,Ba.exports.scan=o,Ba.exports}var eK=GY();const tK=Qe(eK);var nK=({prefix:e,size:t=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{const o=ZY(n,t);if(e==null)return o;if(n.includes(r))throw new KY({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return a=>`${e}${r}${o(a)}`},Uk=nK(),Xg=Symbol.for("vercel.ai.validator");function rK(e){return{[Xg]:!0,validate:e}}function oK(e){return typeof e=="object"&&e!==null&&Xg in e&&e[Xg]===!0&&"validate"in e}function aK(e){return oK(e)?e:iK(e)}function iK(e){return rK(t=>{const n=e.safeParse(t);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}})}function sK({value:e,schema:t}){const n=aK(t);try{if(n.validate==null)return{success:!0,value:e};const r=n.validate(e);return r.success?r:{success:!1,error:zk.wrap({value:e,cause:r.error})}}catch(r){return{success:!1,error:zk.wrap({value:e,cause:r})}}}function Hk({text:e,schema:t}){try{const n=tK.parse(e);return t==null?{success:!0,value:n}:sK({value:n,schema:t})}catch(n){return{success:!1,error:Lk.isInstance(n)?n:new Lk({text:e,cause:n})}}}var Qd={code:"0",name:"text",parse:e=>{if(typeof e!="string")throw new Error('"text" parts expect a string value.');return{type:"text",value:e}}},Jd={code:"3",name:"error",parse:e=>{if(typeof e!="string")throw new Error('"error" parts expect a string value.');return{type:"error",value:e}}},Zd={code:"4",name:"assistant_message",parse:e=>{if(e==null||typeof e!="object"||!("id"in e)||!("role"in e)||!("content"in e)||typeof e.id!="string"||typeof e.role!="string"||e.role!=="assistant"||!Array.isArray(e.content)||!e.content.every(t=>t!=null&&typeof t=="object"&&"type"in t&&t.type==="text"&&"text"in t&&t.text!=null&&typeof t.text=="object"&&"value"in t.text&&typeof t.text.value=="string"))throw new Error('"assistant_message" parts expect an object with an "id", "role", and "content" property.');return{type:"assistant_message",value:e}}},Gd={code:"5",name:"assistant_control_data",parse:e=>{if(e==null||typeof e!="object"||!("threadId"in e)||!("messageId"in e)||typeof e.threadId!="string"||typeof e.messageId!="string")throw new Error('"assistant_control_data" parts expect an object with a "threadId" and "messageId" property.');return{type:"assistant_control_data",value:{threadId:e.threadId,messageId:e.messageId}}}},ef={code:"6",name:"data_message",parse:e=>{if(e==null||typeof e!="object"||!("role"in e)||!("data"in e)||typeof e.role!="string"||e.role!=="data")throw new Error('"data_message" parts expect an object with a "role" and "data" property.');return{type:"data_message",value:e}}},cK=[Qd,Jd,Zd,Gd,ef];Qd.code+"",Jd.code+"",Zd.code+"",Gd.code+"",ef.code+"",Qd.name+"",Qd.code,Jd.name+"",Jd.code,Zd.name+"",Zd.code,Gd.name+"",Gd.code,ef.name+"",ef.code,cK.map(e=>e.code);function lK(e){const t=["ROOT"];let n=-1,r=null;function o(c,l,u){switch(c){case'"':{n=l,t.pop(),t.push(u),t.push("INSIDE_STRING");break}case"f":case"t":case"n":{n=l,r=l,t.pop(),t.push(u),t.push("INSIDE_LITERAL");break}case"-":{t.pop(),t.push(u),t.push("INSIDE_NUMBER");break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{n=l,t.pop(),t.push(u),t.push("INSIDE_NUMBER");break}case"{":{n=l,t.pop(),t.push(u),t.push("INSIDE_OBJECT_START");break}case"[":{n=l,t.pop(),t.push(u),t.push("INSIDE_ARRAY_START");break}}}function a(c,l){switch(c){case",":{t.pop(),t.push("INSIDE_OBJECT_AFTER_COMMA");break}case"}":{n=l,t.pop();break}}}function i(c,l){switch(c){case",":{t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{n=l,t.pop();break}}}for(let c=0;c<e.length;c++){const l=e[c];switch(t[t.length-1]){case"ROOT":o(l,c,"FINISH");break;case"INSIDE_OBJECT_START":{switch(l){case'"':{t.pop(),t.push("INSIDE_OBJECT_KEY");break}case"}":{n=c,t.pop();break}}break}case"INSIDE_OBJECT_AFTER_COMMA":{switch(l){case'"':{t.pop(),t.push("INSIDE_OBJECT_KEY");break}}break}case"INSIDE_OBJECT_KEY":{switch(l){case'"':{t.pop(),t.push("INSIDE_OBJECT_AFTER_KEY");break}}break}case"INSIDE_OBJECT_AFTER_KEY":{switch(l){case":":{t.pop(),t.push("INSIDE_OBJECT_BEFORE_VALUE");break}}break}case"INSIDE_OBJECT_BEFORE_VALUE":{o(l,c,"INSIDE_OBJECT_AFTER_VALUE");break}case"INSIDE_OBJECT_AFTER_VALUE":{a(l,c);break}case"INSIDE_STRING":{switch(l){case'"':{t.pop(),n=c;break}case"\\":{t.push("INSIDE_STRING_ESCAPE");break}default:n=c}break}case"INSIDE_ARRAY_START":{switch(l){case"]":{n=c,t.pop();break}default:{n=c,o(l,c,"INSIDE_ARRAY_AFTER_VALUE");break}}break}case"INSIDE_ARRAY_AFTER_VALUE":{switch(l){case",":{t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{n=c,t.pop();break}default:{n=c;break}}break}case"INSIDE_ARRAY_AFTER_COMMA":{o(l,c,"INSIDE_ARRAY_AFTER_VALUE");break}case"INSIDE_STRING_ESCAPE":{t.pop(),n=c;break}case"INSIDE_NUMBER":{switch(l){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{n=c;break}case"e":case"E":case"-":case".":break;case",":{t.pop(),t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&i(l,c),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&a(l,c);break}case"}":{t.pop(),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&a(l,c);break}case"]":{t.pop(),t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&i(l,c);break}default:{t.pop();break}}break}case"INSIDE_LITERAL":{const u=e.substring(r,c+1);!"false".startsWith(u)&&!"true".startsWith(u)&&!"null".startsWith(u)?(t.pop(),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"?a(l,c):t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&i(l,c)):n=c;break}}}let s=e.slice(0,n+1);for(let c=t.length-1;c>=0;c--)switch(t[c]){case"INSIDE_STRING":{s+='"';break}case"INSIDE_OBJECT_KEY":case"INSIDE_OBJECT_AFTER_KEY":case"INSIDE_OBJECT_AFTER_COMMA":case"INSIDE_OBJECT_START":case"INSIDE_OBJECT_BEFORE_VALUE":case"INSIDE_OBJECT_AFTER_VALUE":{s+="}";break}case"INSIDE_ARRAY_START":case"INSIDE_ARRAY_AFTER_COMMA":case"INSIDE_ARRAY_AFTER_VALUE":{s+="]";break}case"INSIDE_LITERAL":{const l=e.substring(r,e.length);"true".startsWith(l)?s+="true".slice(l.length):"false".startsWith(l)?s+="false".slice(l.length):"null".startsWith(l)&&(s+="null".slice(l.length))}}return s}function uK(e){if(e===void 0)return{value:void 0,state:"undefined-input"};let t=Hk({text:e});return t.success?{value:t.value,state:"successful-parse"}:(t=Hk({text:lK(e)}),t.success?{value:t.value,state:"repaired-parse"}:{value:void 0,state:"failed-parse"})}var Kc={code:"0",name:"text",parse:e=>{if(typeof e!="string")throw new Error('"text" parts expect a string value.');return{type:"text",value:e}}},Xc={code:"2",name:"data",parse:e=>{if(!Array.isArray(e))throw new Error('"data" parts expect an array value.');return{type:"data",value:e}}},Qc={code:"3",name:"error",parse:e=>{if(typeof e!="string")throw new Error('"error" parts expect a string value.');return{type:"error",value:e}}},Jc={code:"8",name:"message_annotations",parse:e=>{if(!Array.isArray(e))throw new Error('"message_annotations" parts expect an array value.');return{type:"message_annotations",value:e}}},Zc={code:"9",name:"tool_call",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("toolName"in e)||typeof e.toolName!="string"||!("args"in e)||typeof e.args!="object")throw new Error('"tool_call" parts expect an object with a "toolCallId", "toolName", and "args" property.');return{type:"tool_call",value:e}}},Gc={code:"a",name:"tool_result",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("result"in e))throw new Error('"tool_result" parts expect an object with a "toolCallId" and a "result" property.');return{type:"tool_result",value:e}}},el={code:"b",name:"tool_call_streaming_start",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("toolName"in e)||typeof e.toolName!="string")throw new Error('"tool_call_streaming_start" parts expect an object with a "toolCallId" and "toolName" property.');return{type:"tool_call_streaming_start",value:e}}},tl={code:"c",name:"tool_call_delta",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("argsTextDelta"in e)||typeof e.argsTextDelta!="string")throw new Error('"tool_call_delta" parts expect an object with a "toolCallId" and "argsTextDelta" property.');return{type:"tool_call_delta",value:e}}},nl={code:"d",name:"finish_message",parse:e=>{if(e==null||typeof e!="object"||!("finishReason"in e)||typeof e.finishReason!="string")throw new Error('"finish_message" parts expect an object with a "finishReason" property.');const t={finishReason:e.finishReason};return"usage"in e&&e.usage!=null&&typeof e.usage=="object"&&"promptTokens"in e.usage&&"completionTokens"in e.usage&&(t.usage={promptTokens:typeof e.usage.promptTokens=="number"?e.usage.promptTokens:Number.NaN,completionTokens:typeof e.usage.completionTokens=="number"?e.usage.completionTokens:Number.NaN}),{type:"finish_message",value:t}}},rl={code:"e",name:"finish_step",parse:e=>{if(e==null||typeof e!="object"||!("finishReason"in e)||typeof e.finishReason!="string")throw new Error('"finish_step" parts expect an object with a "finishReason" property.');const t={finishReason:e.finishReason,isContinued:!1};return"usage"in e&&e.usage!=null&&typeof e.usage=="object"&&"promptTokens"in e.usage&&"completionTokens"in e.usage&&(t.usage={promptTokens:typeof e.usage.promptTokens=="number"?e.usage.promptTokens:Number.NaN,completionTokens:typeof e.usage.completionTokens=="number"?e.usage.completionTokens:Number.NaN}),"isContinued"in e&&typeof e.isContinued=="boolean"&&(t.isContinued=e.isContinued),{type:"finish_step",value:t}}},dK=[Kc,Xc,Qc,Jc,Zc,Gc,el,tl,nl,rl],fK={[Kc.code]:Kc,[Xc.code]:Xc,[Qc.code]:Qc,[Jc.code]:Jc,[Zc.code]:Zc,[Gc.code]:Gc,[el.code]:el,[tl.code]:tl,[nl.code]:nl,[rl.code]:rl};Kc.name+"",Kc.code,Xc.name+"",Xc.code,Qc.name+"",Qc.code,Jc.name+"",Jc.code,Zc.name+"",Zc.code,Gc.name+"",Gc.code,el.name+"",el.code,tl.name+"",tl.code,nl.name+"",nl.code,rl.name+"",rl.code;var pK=dK.map(e=>e.code),hK=e=>{const t=e.indexOf(":");if(t===-1)throw new Error("Failed to parse stream string. No separator found.");const n=e.slice(0,t);if(!pK.includes(n))throw new Error(`Failed to parse stream string. Invalid code ${n}.`);const r=n,o=e.slice(t+1),a=JSON.parse(o);return fK[r].parse(a)},mK=10;function yK(e,t){const n=new Uint8Array(t);let r=0;for(const o of e)n.set(o,r),r+=o.length;return e.length=0,n}async function gK({stream:e,onTextPart:t,onDataPart:n,onErrorPart:r,onToolCallStreamingStartPart:o,onToolCallDeltaPart:a,onToolCallPart:i,onToolResultPart:s,onMessageAnnotationsPart:c,onFinishMessagePart:l,onFinishStepPart:u}){const d=e.getReader(),f=new TextDecoder,h=[];let g=0;for(;;){const{value:m}=await d.read();if(m&&(h.push(m),g+=m.length,m[m.length-1]!==mK))continue;if(h.length===0)break;const v=yK(h,g);g=0;const b=f.decode(v,{stream:!0}).split(`
`).filter(x=>x!=="").map(hK);for(const{type:x,value:_}of b)switch(x){case"text":await(t==null?void 0:t(_));break;case"data":await(n==null?void 0:n(_));break;case"error":await(r==null?void 0:r(_));break;case"message_annotations":await(c==null?void 0:c(_));break;case"tool_call_streaming_start":await(o==null?void 0:o(_));break;case"tool_call_delta":await(a==null?void 0:a(_));break;case"tool_call":await(i==null?void 0:i(_));break;case"tool_result":await(s==null?void 0:s(_));break;case"finish_message":await(l==null?void 0:l(_));break;case"finish_step":await(u==null?void 0:u(_));break;default:{const w=x;throw new Error(`Unknown stream part type: ${w}`)}}}}function vK({promptTokens:e,completionTokens:t}){return{promptTokens:e,completionTokens:t,totalTokens:e+t}}async function bK({stream:e,update:t,onToolCall:n,onFinish:r,generateId:o=Uk,getCurrentDate:a=()=>new Date}){const i=a();let s,c=!0;const l=[],u=[];let d;const f={};let h={completionTokens:NaN,promptTokens:NaN,totalTokens:NaN},g="unknown";function m(){const b=[...u];if(s==null){t(l,b);return}d!=null&&d.length&&(s.annotations=d);const x={...JSON.parse(JSON.stringify(s)),revisionId:o()};t([...l,x],b)}function v(){return(c||s==null)&&(s!=null&&l.push(s),c=!1,s={id:o(),role:"assistant",content:"",createdAt:i}),s}await gK({stream:e,onTextPart(b){const x=v();s={...x,content:x.content+b},m()},onToolCallStreamingStartPart(b){const x=v();x.toolInvocations==null&&(x.toolInvocations=[]),f[b.toolCallId]={text:"",toolName:b.toolName,index:x.toolInvocations.length},x.toolInvocations.push({state:"partial-call",toolCallId:b.toolCallId,toolName:b.toolName,args:void 0}),m()},onToolCallDeltaPart(b){const x=v(),_=f[b.toolCallId];_.text+=b.argsTextDelta;const{value:w}=uK(_.text);x.toolInvocations[_.index]={state:"partial-call",toolCallId:b.toolCallId,toolName:_.toolName,args:w},m()},async onToolCallPart(b){const x=v();if(f[b.toolCallId]!=null?x.toolInvocations[f[b.toolCallId].index]={state:"call",...b}:(x.toolInvocations==null&&(x.toolInvocations=[]),x.toolInvocations.push({state:"call",...b})),n){const _=await n({toolCall:b});_!=null&&(x.toolInvocations[x.toolInvocations.length-1]={state:"result",...b,result:_})}m()},onToolResultPart(b){const x=v().toolInvocations;if(x==null)throw new Error("tool_result must be preceded by a tool_call");const _=x.findIndex(w=>w.toolCallId===b.toolCallId);if(_===-1)throw new Error("tool_result must be preceded by a tool_call with the same toolCallId");x[_]={...x[_],state:"result",...b},m()},onDataPart(b){u.push(...b),m()},onMessageAnnotationsPart(b){d==null?d=[...b]:d.push(...b),m()},onFinishStepPart(b){c=!b.isContinued},onFinishMessagePart(b){g=b.finishReason,b.usage!=null&&(h=vK(b.usage))},onErrorPart(b){throw new Error(b)}}),r==null||r({message:s,finishReason:g,usage:h})}async function xK({stream:e,onTextPart:t}){const n=e.pipeThrough(new TextDecoderStream).getReader();for(;;){const{done:r,value:o}=await n.read();if(r)break;await t(o)}}var wK=()=>fetch;async function _K({api:e,body:t,streamProtocol:n="data",credentials:r,headers:o,abortController:a,restoreMessagesOnFailure:i,onResponse:s,onUpdate:c,onFinish:l,onToolCall:u,generateId:d,fetch:f=wK()}){var h,g;const m=await f(e,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json",...o},signal:(h=a==null?void 0:a())==null?void 0:h.signal,credentials:r}).catch(v=>{throw i(),v});if(s)try{await s(m)}catch(v){throw v}if(!m.ok)throw i(),new Error((g=await m.text())!=null?g:"Failed to fetch the chat response.");if(!m.body)throw new Error("The response body is empty.");switch(n){case"text":{const v={id:d(),createdAt:new Date,role:"assistant",content:""};await xK({stream:m.body,onTextPart:b=>{v.content+=b,c([{...v}],[])}}),l==null||l(v,{usage:{completionTokens:NaN,promptTokens:NaN,totalTokens:NaN},finishReason:"unknown"});return}case"data":{await bK({stream:m.body,update:c,onToolCall:u,onFinish({message:v,finishReason:b,usage:x}){l&&v!=null&&l(v,{usage:x,finishReason:b})},generateId:d});return}default:{const v=n;throw new Error(`Unknown stream protocol: ${v}`)}}}var Wk={exports:{}},Qg={},qk;function jK(){if(qk)return Qg;qk=1;var e=j7();function t(d,f){return d===f&&(d!==0||1/d===1/f)||d!==d&&f!==f}var n=typeof Object.is=="function"?Object.is:t,r=e.useState,o=e.useEffect,a=e.useLayoutEffect,i=e.useDebugValue;function s(d,f){var h=f(),g=r({inst:{value:h,getSnapshot:f}}),m=g[0].inst,v=g[1];return a(function(){m.value=h,m.getSnapshot=f,c(m)&&v({inst:m})},[d,h,f]),o(function(){return c(m)&&v({inst:m}),d(function(){c(m)&&v({inst:m})})},[d]),i(h),h}function c(d){var f=d.getSnapshot;d=d.value;try{var h=f();return!n(d,h)}catch{return!0}}function l(d,f){return f()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?l:s;return Qg.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:u,Qg}var Yk;function Kk(){return Yk||(Yk=1,Wk.exports=jK()),Wk.exports}Zu=Kk();let uo,mn,tf,Ge,pr,fo,Xk,ol;R7=Qe(Zu),uo=()=>{},mn=uo(),tf=Object,Ge=e=>e===mn,pr=e=>typeof e=="function",fo=(e,t)=>({...e,...t}),Xk=e=>pr(e.then),ol=new WeakMap;let EK=0;const al=e=>{const t=typeof e,n=e&&e.constructor,r=n==Date;let o,a;if(tf(e)===e&&!r&&n!=RegExp){if(o=ol.get(e),o)return o;if(o=++EK+"~",ol.set(e,o),n==Array){for(o="@",a=0;a<e.length;a++)o+=al(e[a])+",";ol.set(e,o)}if(n==tf){o="#";const i=tf.keys(e).sort();for(;!Ge(a=i.pop());)Ge(e[a])||(o+=a+":"+al(e[a])+",");ol.set(e,o)}}else o=r?e.toJSON():t=="symbol"?e.toString():t=="string"?JSON.stringify(e):""+e;return o},po=new WeakMap,Jg={},nf={},Zg="undefined",rf=typeof window!=Zg,Gg=typeof document!=Zg,SK=()=>rf&&typeof window.requestAnimationFrame!=Zg,Qk=(e,t)=>{const n=po.get(e);return[()=>!Ge(t)&&e.get(t)||Jg,r=>{if(!Ge(t)){const o=e.get(t);t in nf||(nf[t]=o),n[5](t,fo(o,r),o||Jg)}},n[6],()=>!Ge(t)&&t in nf?nf[t]:!Ge(t)&&e.get(t)||Jg]};let ev=!0;const CK=()=>ev,[tv,nv]=rf&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[uo,uo],OK=()=>{const e=Gg&&document.visibilityState;return Ge(e)||e!=="hidden"},NK=e=>(Gg&&document.addEventListener("visibilitychange",e),tv("focus",e),()=>{Gg&&document.removeEventListener("visibilitychange",e),nv("focus",e)}),MK=e=>{const t=()=>{ev=!0,e()},n=()=>{ev=!1};return tv("online",t),tv("offline",n),()=>{nv("online",t),nv("offline",n)}},kK={isOnline:CK,isVisible:OK},PK={initFocus:NK,initReconnect:MK},Jk=!U.useId,il=!rf||"Deno"in window,AK=e=>SK()?window.requestAnimationFrame(e):setTimeout(e,1),rv=il?y.useEffect:y.useLayoutEffect,ov=typeof navigator<"u"&&navigator.connection,Zk=!il&&ov&&(["slow-2g","2g"].includes(ov.effectiveType)||ov.saveData),av=e=>{if(pr(e))try{e=e()}catch{e=""}const t=e;return e=typeof e=="string"?e:(Array.isArray(e)?e.length:e)?al(e):"",[e,t]};let TK=0;const iv=()=>++TK,Gk=0,eP=1,tP=2;var sl={__proto__:null,ERROR_REVALIDATE_EVENT:3,FOCUS_EVENT:Gk,MUTATE_EVENT:tP,RECONNECT_EVENT:eP};async function nP(...e){const[t,n,r,o]=e,a=fo({populateCache:!0,throwOnError:!0},typeof o=="boolean"?{revalidate:o}:o||{});let i=a.populateCache;const s=a.rollbackOnError;let c=a.optimisticData;const l=f=>typeof s=="function"?s(f):s!==!1,u=a.throwOnError;if(pr(n)){const f=n,h=[],g=t.keys();for(const m of g)!/^\$(inf|sub)\$/.test(m)&&f(t.get(m)._k)&&h.push(m);return Promise.all(h.map(d))}return d(n);async function d(f){const[h]=av(f);if(!h)return;const[g,m]=Qk(t,h),[v,b,x,_]=po.get(t),w=()=>{const A=v[h];return(pr(a.revalidate)?a.revalidate(g().data,f):a.revalidate!==!1)&&(delete x[h],delete _[h],A&&A[0])?A[0](tP).then(()=>g().data):g().data};if(e.length<3)return w();let j=r,E;const S=iv();b[h]=[S,0];const C=!Ge(c),M=g(),N=M.data,P=M._c,R=Ge(P)?N:P;if(C&&(c=pr(c)?c(R,N):c,m({data:c,_c:R})),pr(j))try{j=j(R)}catch(A){E=A}if(j&&Xk(j))if(j=await j.catch(A=>{E=A}),S!==b[h][0]){if(E)throw E;return j}else E&&C&&l(E)&&(i=!0,m({data:R,_c:mn}));if(i&&!E)if(pr(i)){const A=i(j,R);m({data:A,error:mn,_c:mn})}else m({data:j,error:mn,_c:mn});if(b[h][1]=iv(),Promise.resolve(w()).then(()=>{m({_c:mn})}),E){if(u)throw E;return}return j}}const rP=(e,t)=>{for(const n in e)e[n][0]&&e[n][0](t)},RK=(e,t)=>{if(!po.has(e)){const n=fo(PK,t),r={},o=nP.bind(mn,e);let a=uo;const i={},s=(u,d)=>{const f=i[u]||[];return i[u]=f,f.push(d),()=>f.splice(f.indexOf(d),1)},c=(u,d,f)=>{e.set(u,d);const h=i[u];if(h)for(const g of h)g(d,f)},l=()=>{if(!po.has(e)&&(po.set(e,[r,{},{},{},o,c,s]),!il)){const u=n.initFocus(setTimeout.bind(mn,rP.bind(mn,r,Gk))),d=n.initReconnect(setTimeout.bind(mn,rP.bind(mn,r,eP)));a=()=>{u&&u(),d&&d(),po.delete(e)}}};return l(),[e,o,l,a]}return[e,po.get(e)[4]]},IK=(e,t,n,r,o)=>{const a=n.errorRetryCount,i=o.retryCount,s=~~((Math.random()+.5)*(1<<(i<8?i:8)))*n.errorRetryInterval;!Ge(a)&&i>a||setTimeout(r,s,o)},DK=(e,t)=>al(e)==al(t),[oP,LK]=RK(new Map),FK=fo({onLoadingSlow:uo,onSuccess:uo,onError:uo,onErrorRetry:IK,onDiscarded:uo,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:Zk?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:Zk?5e3:3e3,compare:DK,isPaused:()=>!1,cache:oP,mutate:LK,fallback:{}},kK),BK=(e,t)=>{const n=fo(e,t);if(t){const{use:r,fallback:o}=e,{use:a,fallback:i}=t;r&&a&&(n.use=r.concat(a)),o&&i&&(n.fallback=fo(o,i))}return n},$K=y.createContext({}),zK="$inf$",aP=rf&&window.__SWR_DEVTOOLS_USE__,VK=aP?window.__SWR_DEVTOOLS_USE__:[],UK=()=>{aP&&(window.__SWR_DEVTOOLS_REACT__=U)},HK=e=>pr(e[1])?[e[0],e[1],e[2]||{}]:[e[0],null,(e[1]===null?e[2]:e[1])||{}],WK=()=>fo(FK,y.useContext($K)),qK=e=>(t,n,r)=>e(t,n&&((...o)=>{const[a]=av(t),[,,,i]=po.get(oP);if(a.startsWith(zK))return n(...o);const s=i[a];return Ge(s)?n(...o):(delete i[a],s)}),r),YK=VK.concat(qK),KK=e=>function(...t){const n=WK(),[r,o,a]=HK(t),i=BK(n,a);let s=e;const{use:c}=i,l=(c||[]).concat(YK);for(let u=l.length;u--;)s=l[u](s);return s(r,o||i.fetcher||null,i)},XK=(e,t,n)=>{const r=t[e]||(t[e]=[]);return r.push(n),()=>{const o=r.indexOf(n);o>=0&&(r[o]=r[r.length-1],r.pop())}};UK();const iP=U.use||(e=>{if(e.status==="pending")throw e;if(e.status==="fulfilled")return e.value;throw e.status==="rejected"?e.reason:(e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t}),e)}),sv={dedupe:!0},QK=(e,t,n)=>{const{cache:r,compare:o,suspense:a,fallbackData:i,revalidateOnMount:s,revalidateIfStale:c,refreshInterval:l,refreshWhenHidden:u,refreshWhenOffline:d,keepPreviousData:f}=n,[h,g,m,v]=po.get(r),[b,x]=av(e),_=y.useRef(!1),w=y.useRef(!1),j=y.useRef(b),E=y.useRef(t),S=y.useRef(n),C=()=>S.current,M=()=>C().isVisible()&&C().isOnline(),[N,P,R,A]=Qk(r,b),O=y.useRef({}).current,k=Ge(i)?n.fallback[b]:i,T=($,ie)=>{for(const ue in O){const me=ue;if(me==="data"){if(!o($[me],ie[me])&&(!Ge($[me])||!o(Y,ie[me])))return!1}else if(ie[me]!==$[me])return!1}return!0},D=y.useMemo(()=>{const $=!b||!t?!1:Ge(s)?C().isPaused()||a?!1:Ge(c)?!0:c:s,ie=Le=>{const st=fo(Le);return delete st._k,$?{isValidating:!0,isLoading:!0,...st}:st},ue=N(),me=A(),Te=ie(ue),Ue=ue===me?Te:ie(me);let He=Te;return[()=>{const Le=ie(N());return T(Le,He)?(He.data=Le.data,He.isLoading=Le.isLoading,He.isValidating=Le.isValidating,He.error=Le.error,He):(He=Le,Le)},()=>Ue]},[r,b]),I=Zu.useSyncExternalStore(y.useCallback($=>R(b,(ie,ue)=>{T(ue,ie)||$()}),[r,b]),D[0],D[1]),L=!_.current,B=h[b]&&h[b].length>0,V=I.data,F=Ge(V)?k:V,H=I.error,Q=y.useRef(F),Y=f?Ge(V)?Q.current:V:F,re=B&&!Ge(H)?!1:L&&!Ge(s)?s:C().isPaused()?!1:a?Ge(F)?!1:c:Ge(F)||c,G=!!(b&&t&&L&&re),q=Ge(I.isValidating)?G:I.isValidating,W=Ge(I.isLoading)?G:I.isLoading,Z=y.useCallback(async $=>{const ie=E.current;if(!b||!ie||w.current||C().isPaused())return!1;let ue,me,Te=!0;const Ue=$||{},He=!m[b]||!Ue.dedupe,Le=()=>Jk?!w.current&&b===j.current&&_.current:b===j.current,st={isValidating:!1,isLoading:!1},qe=()=>{P(st)},ct=()=>{const Ct=m[b];Ct&&Ct[1]===me&&delete m[b]},Wt={isValidating:!0};Ge(N().data)&&(Wt.isLoading=!0);try{if(He&&(P(Wt),n.loadingTimeout&&Ge(N().data)&&setTimeout(()=>{Te&&Le()&&C().onLoadingSlow(b,n)},n.loadingTimeout),m[b]=[ie(x),iv()]),[ue,me]=m[b],ue=await ue,He&&setTimeout(ct,n.dedupingInterval),!m[b]||m[b][1]!==me)return He&&Le()&&C().onDiscarded(b),!1;st.error=mn;const Ct=g[b];if(!Ge(Ct)&&(me<=Ct[0]||me<=Ct[1]||Ct[1]===0))return qe(),He&&Le()&&C().onDiscarded(b),!1;const yt=N().data;st.data=o(yt,ue)?yt:ue,He&&Le()&&C().onSuccess(ue,b,n)}catch(Ct){ct();const yt=C(),{shouldRetryOnError:Rt}=yt;yt.isPaused()||(st.error=Ct,He&&Le()&&(yt.onError(Ct,b,yt),(Rt===!0||pr(Rt)&&Rt(Ct))&&(!C().revalidateOnFocus||!C().revalidateOnReconnect||M())&&yt.onErrorRetry(Ct,b,yt,_n=>{const Or=h[b];Or&&Or[0]&&Or[0](sl.ERROR_REVALIDATE_EVENT,_n)},{retryCount:(Ue.retryCount||0)+1,dedupe:!0})))}return Te=!1,qe(),!0},[b,r]),ee=y.useCallback((...$)=>nP(r,j.current,...$),[]);if(rv(()=>{E.current=t,S.current=n,Ge(V)||(Q.current=V)}),rv(()=>{if(!b)return;const $=Z.bind(mn,sv);let ie=0;const ue=XK(b,h,(me,Te={})=>{if(me==sl.FOCUS_EVENT){const Ue=Date.now();C().revalidateOnFocus&&Ue>ie&&M()&&(ie=Ue+C().focusThrottleInterval,$())}else if(me==sl.RECONNECT_EVENT)C().revalidateOnReconnect&&M()&&$();else{if(me==sl.MUTATE_EVENT)return Z();if(me==sl.ERROR_REVALIDATE_EVENT)return Z(Te)}});return w.current=!1,j.current=b,_.current=!0,P({_k:x}),re&&(Ge(F)||il?$():AK($)),()=>{w.current=!0,ue()}},[b]),rv(()=>{let $;function ie(){const me=pr(l)?l(N().data):l;me&&$!==-1&&($=setTimeout(ue,me))}function ue(){!N().error&&(u||C().isVisible())&&(d||C().isOnline())?Z(sv).then(ie):ie()}return ie(),()=>{$&&(clearTimeout($),$=-1)}},[l,u,d,b]),y.useDebugValue(Y),a&&Ge(F)&&b){if(!Jk&&il)throw new Error("Fallback data is required when using suspense in SSR.");E.current=t,S.current=n,w.current=!1;const $=v[b];if(!Ge($)){const ie=ee($);iP(ie)}if(Ge(H)){const ie=Z(sv);Ge(Y)||(ie.status="fulfilled",ie.value=!0),iP(ie)}else throw H}return{mutate:ee,get data(){return O.data=!0,Y},get error(){return O.error=!0,H},get isValidating(){return O.isValidating=!0,q},get isLoading(){return O.isLoading=!0,W}}},of=KK(QK);var cv,sP;function JK(){if(sP)return cv;sP=1;function e(t,n){if(typeof t!="function")throw new TypeError(`Expected the first argument to be a \`function\`, got \`${typeof t}\`.`);let r,o=0;return function(...a){clearTimeout(r);const i=Date.now(),s=i-o,c=n-s;c<=0?(o=i,t.apply(this,a)):r=setTimeout(()=>{o=Date.now(),t.apply(this,a)},c)}}return cv=e,cv}var ZK=JK();const GK=Qe(ZK);function cP(e,t){return t!=null?GK(e,t):e}var eX=async(e,t,n,r,o,a,i,s,c,l,u,d,f,h,g,m,v)=>{var b;const x=i.current;n(t.messages,!1);const _=h?t.messages:t.messages.map(({role:j,content:E,experimental_attachments:S,data:C,annotations:M,toolInvocations:N})=>({role:j,content:E,...S!==void 0&&{experimental_attachments:S},...C!==void 0&&{data:C},...M!==void 0&&{annotations:M},...N!==void 0&&{toolInvocations:N}})),w=o.current;return await _K({api:e,body:(b=g==null?void 0:g({messages:t.messages,requestData:t.data,requestBody:t.body}))!=null?b:{messages:_,data:t.data,...a.current.body,...t.body},streamProtocol:l,credentials:a.current.credentials,headers:{...a.current.headers,...t.headers},abortController:()=>s.current,restoreMessagesOnFailure(){v||n(x,!1)},onResponse:d,onUpdate(j,E){n([...t.messages,...j],!1),E!=null&&E.length&&r([...w??[],...E],!1)},onToolCall:f,onFinish:u,generateId:c,fetch:m})};function tX({api:e="/api/chat",id:t,initialMessages:n,initialInput:r="",sendExtraMessageFields:o,onToolCall:a,experimental_prepareRequestBody:i,maxSteps:s=1,streamProtocol:c="data",onResponse:l,onFinish:u,onError:d,credentials:f,headers:h,body:g,generateId:m=Uk,fetch:v,keepLastMessageOnError:b=!0,experimental_throttle:x}={}){const _=y.useId(),w=t??_,j=typeof e=="string"?[e,w]:w,[E]=y.useState([]),{data:S,mutate:C}=of([j,"messages"],null,{fallbackData:n??E}),M=y.useRef(S||[]);y.useEffect(()=>{M.current=S||[]},[S]);const{data:N,mutate:P}=of([j,"streamData"],null),R=y.useRef(N);y.useEffect(()=>{R.current=N},[N]);const{data:A=!1,mutate:O}=of([j,"loading"],null),{data:k=void 0,mutate:T}=of([j,"error"],null),D=y.useRef(null),I=y.useRef({credentials:f,headers:h,body:g});y.useEffect(()=>{I.current={credentials:f,headers:h,body:g}},[f,h,g]);const L=y.useCallback(async q=>{const W=M.current.length;try{O(!0),T(void 0);const $=new AbortController;D.current=$,await eX(e,q,cP(C,x),cP(P,x),R,I,M,D,m,c,u,l,a,o,i,v,b),D.current=null}catch($){if($.name==="AbortError")return D.current=null,null;d&&$ instanceof Error&&d($),T($)}finally{O(!1)}const Z=M.current,ee=Z[Z.length-1];Z.length>W&&ee!=null&&s>1&&lP(ee)&&nX(Z)<s&&await L({messages:Z})},[C,O,e,I,l,u,d,T,P,R,c,o,i,a,s,M,D,m,v,b,x]),B=y.useCallback(async(q,{data:W,headers:Z,body:ee,experimental_attachments:$}={})=>{var ie,ue;q.id||(q.id=m());const me=await uP($),Te=M.current.concat({...q,id:(ie=q.id)!=null?ie:m(),createdAt:(ue=q.createdAt)!=null?ue:new Date,experimental_attachments:me.length>0?me:void 0});return L({messages:Te,headers:Z,body:ee,data:W})},[L,m]),V=y.useCallback(async({data:q,headers:W,body:Z}={})=>{const ee=M.current;if(ee.length===0)return null;const $=ee[ee.length-1];return L({messages:$.role==="assistant"?ee.slice(0,-1):ee,headers:W,body:Z,data:q})},[L]),F=y.useCallback(()=>{D.current&&(D.current.abort(),D.current=null)},[]),H=y.useCallback(q=>{typeof q=="function"&&(q=q(M.current)),C(q,!1),M.current=q},[C]),Q=y.useCallback(q=>{typeof q=="function"&&(q=q(R.current)),P(q,!1),R.current=q},[P]),[Y,re]=y.useState(r),G=y.useCallback(async(q,W={},Z)=>{var ee;if((ee=q==null?void 0:q.preventDefault)==null||ee.call(q),!Y&&!W.allowEmptySubmit)return;Z&&(I.current={...I.current,...Z});const $=await uP(W.experimental_attachments),ie={messages:!Y&&!$.length&&W.allowEmptySubmit?M.current:M.current.concat({id:m(),createdAt:new Date,role:"user",content:Y,experimental_attachments:$.length>0?$:void 0}),headers:W.headers,body:W.body,data:W.data};L(ie),re("")},[Y,m,L]);return{messages:S||[],setMessages:H,data:N,setData:Q,error:k,append:B,reload:V,stop:F,input:Y,setInput:re,handleInputChange:q=>{re(q.target.value)},handleSubmit:G,isLoading:A,addToolResult:({toolCallId:q,result:W})=>{const Z=M.current.map(($,ie,ue)=>ie===ue.length-1&&$.role==="assistant"&&$.toolInvocations?{...$,toolInvocations:$.toolInvocations.map(me=>me.toolCallId===q?{...me,result:W,state:"result"}:me)}:$);C(Z,!1);const ee=Z[Z.length-1];lP(ee)&&L({messages:Z})}}}function lP(e){return e.role==="assistant"&&e.toolInvocations&&e.toolInvocations.length>0&&e.toolInvocations.every(t=>"result"in t)}function nX(e){let t=0;for(let n=e.length-1;n>=0&&e[n].role==="assistant";n--)t++;return t}async function uP(e){if(e==null)return[];if(e instanceof FileList)return Promise.all(Array.from(e).map(async t=>{const{name:n,type:r}=t,o=await new Promise((a,i)=>{const s=new FileReader;s.onload=c=>{var l;a((l=c.target)==null?void 0:l.result)},s.onerror=c=>i(c),s.readAsDataURL(t)});return{name:n,contentType:r,url:o}}));if(Array.isArray(e))return e;throw new Error("Invalid attachments type")}SS=tX;const ho=y.forwardRef(({className:e,...t},n)=>p.jsx("textarea",{className:K("flex min-h-[100px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-0 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...t}));ho.displayName="Textarea";function rX({minHeight:e,maxHeight:t}){const n=y.useRef(null),r=y.useCallback(o=>{const a=n.current;if(!a)return;if(o){a.style.height=`${e}px`;return}a.style.height=`${e}px`;const i=Math.max(e,Math.min(a.scrollHeight,t??Number.POSITIVE_INFINITY));a.style.height=`${i}px`},[e,t]);return y.useEffect(()=>{const o=n.current;o&&(o.style.height=`${e}px`)},[e]),y.useEffect(()=>{const o=()=>r();return window.addEventListener("resize",o),()=>window.removeEventListener("resize",o)},[r]),{textareaRef:n,adjustHeight:r}}const oX=48,dP=164;function fP({onSubmit:e,disabled:t,enableTool:n,enableFile:r,placeholder:o,minHeight:a,maxHeight:i,className:s,onChange:c,value:l}){const[u,d]=y.useState(!1),[f,h]=y.useState(""),{textareaRef:g,adjustHeight:m}=rX({minHeight:a||oX,maxHeight:i||dP}),[v,b]=y.useState(!0),x=async _=>{try{d(!0),await e(f,_)}finally{d(!1)}};return p.jsx("div",{className:K("w-full py-4 max-w-xl",s),children:p.jsx("div",{className:"relative w-full mx-auto",children:p.jsxs("div",{className:"relative flex flex-col",children:[p.jsx("div",{className:"overflow-y-auto",style:{maxHeight:`${i||dP}px`},children:p.jsx(ho,{id:"ai-input-04",value:(c?l:f)||"",disabled:t||u,placeholder:o,className:"w-full rounded-xl rounded-b-none px-4 py-3 bg-black/5 dark:bg-white/5 border-none dark:text-white placeholder:text-black/70 dark:placeholder:text-white/70 resize-none focus-visible:ring-0 leading-[1.2]",ref:g,onKeyDown:_=>{_.key==="Enter"&&!_.shiftKey&&(_.preventDefault(),x(_))},onChange:_=>{c||h(_.target.value),m(),c==null||c(_)}})}),p.jsxs("div",{className:"h-12 bg-black/5 dark:bg-white/5 rounded-b-xl",children:[p.jsxs("div",{className:"absolute left-3 bottom-3 flex items-center gap-2",children:[r?p.jsxs("label",{className:"cursor-pointer rounded-lg p-2 bg-black/5 dark:bg-white/5",children:[p.jsx("input",{type:"file",className:"hidden"}),p.jsx(le,{name:"paperclip",className:"w-4 h-4 text-black/40 dark:text-white/40 hover:text-black dark:hover:text-white transition-colors"})]}):void 0,n?p.jsxs("button",{type:"button",onClick:()=>{b(!v)},className:K("rounded-full transition-all flex items-center gap-2 px-1.5 py-1 border h-8",v?"bg-sky-500/15 border-sky-400 text-sky-500":"bg-black/5 dark:bg-white/5 border-transparent text-black/40 dark:text-white/40 hover:text-black dark:hover:text-white"),children:[p.jsx("div",{className:"w-4 h-4 flex items-center justify-center flex-shrink-0",children:p.jsx(Hu.div,{animate:{rotate:v?180:0,scale:v?1.1:1},whileHover:{rotate:v?180:15,scale:1.1,transition:{type:"spring",stiffness:300,damping:10}},transition:{type:"spring",stiffness:260,damping:25},children:p.jsx(le,{name:"globe",className:K("w-4 h-4",v?"text-sky-500":"text-inherit")})})}),p.jsx(U7,{children:v&&p.jsx(Hu.span,{initial:{width:0,opacity:0},animate:{width:"auto",opacity:1},exit:{width:0,opacity:0},transition:{duration:.2},className:"text-sm overflow-hidden whitespace-nowrap text-sky-500 flex-shrink-0",children:"Search"})})]}):void 0]}),p.jsx("div",{className:"absolute right-3 bottom-3",children:p.jsx("button",{type:"button",disabled:t||u,onClick:_=>{x(_)},className:K("rounded-lg p-2",c&&l||f?"bg-sky-500/15 text-sky-500":"bg-black/5 dark:bg-white/5 text-black/40 dark:text-white/40 hover:text-black dark:hover:text-white"),children:p.jsx(le,{name:"send",className:"w-4 h-4"})})})]})]})})})}var lv,pP;function aX(){if(pP)return lv;pP=1;function e(){this.__data__=[],this.size=0}return lv=e,lv}var uv,hP;pc=function(){if(hP)return uv;hP=1;function e(t,n){return t===n||t!==t&&n!==n}return uv=e,uv};var dv,mP;function af(){if(mP)return dv;mP=1;var e=pc();function t(n,r){for(var o=n.length;o--;)if(e(n[o][0],r))return o;return-1}return dv=t,dv}var fv,yP;function iX(){if(yP)return fv;yP=1;var e=af(),t=Array.prototype,n=t.splice;function r(o){var a=this.__data__,i=e(a,o);if(i<0)return!1;var s=a.length-1;return i==s?a.pop():n.call(a,i,1),--this.size,!0}return fv=r,fv}var pv,gP;function sX(){if(gP)return pv;gP=1;var e=af();function t(n){var r=this.__data__,o=e(r,n);return o<0?void 0:r[o][1]}return pv=t,pv}var hv,vP;function cX(){if(vP)return hv;vP=1;var e=af();function t(n){return e(this.__data__,n)>-1}return hv=t,hv}var mv,bP;function lX(){if(bP)return mv;bP=1;var e=af();function t(n,r){var o=this.__data__,a=e(o,n);return a<0?(++this.size,o.push([n,r])):o[a][1]=r,this}return mv=t,mv}var yv,xP;function sf(){if(xP)return yv;xP=1;var e=aX(),t=iX(),n=sX(),r=cX(),o=lX();function a(i){var s=-1,c=i==null?0:i.length;for(this.clear();++s<c;){var l=i[s];this.set(l[0],l[1])}}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=n,a.prototype.has=r,a.prototype.set=o,yv=a,yv}var gv,wP;function uX(){if(wP)return gv;wP=1;var e=sf();function t(){this.__data__=new e,this.size=0}return gv=t,gv}var vv,_P;function dX(){if(_P)return vv;_P=1;function e(t){var n=this.__data__,r=n.delete(t);return this.size=n.size,r}return vv=e,vv}var bv,jP;function fX(){if(jP)return bv;jP=1;function e(t){return this.__data__.get(t)}return bv=e,bv}var xv,EP;function pX(){if(EP)return xv;EP=1;function e(t){return this.__data__.has(t)}return xv=e,xv}var wv,SP;function CP(){if(SP)return wv;SP=1;var e=typeof uc=="object"&&uc&&uc.Object===Object&&uc;return wv=e,wv}var _v,OP;ar=function(){if(OP)return _v;OP=1;var e=CP(),t=typeof self=="object"&&self&&self.Object===Object&&self,n=e||t||Function("return this")();return _v=n,_v};var jv,NP;Si=function(){if(NP)return jv;NP=1;var e=ar(),t=e.Symbol;return jv=t,jv};var Ev,MP;function hX(){if(MP)return Ev;MP=1;var e=Si(),t=Object.prototype,n=t.hasOwnProperty,r=t.toString,o=e?e.toStringTag:void 0;function a(i){var s=n.call(i,o),c=i[o];try{i[o]=void 0;var l=!0}catch{}var u=r.call(i);return l&&(s?i[o]=c:delete i[o]),u}return Ev=a,Ev}var Sv,kP;function mX(){if(kP)return Sv;kP=1;var e=Object.prototype,t=e.toString;function n(r){return t.call(r)}return Sv=n,Sv}var Cv,PP;function mo(){if(PP)return Cv;PP=1;var e=Si(),t=hX(),n=mX(),r="[object Null]",o="[object Undefined]",a=e?e.toStringTag:void 0;function i(s){return s==null?s===void 0?o:r:a&&a in Object(s)?t(s):n(s)}return Cv=i,Cv}var Ov,AP;ir=function(){if(AP)return Ov;AP=1;function e(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}return Ov=e,Ov};var Nv,TP;Ju=function(){if(TP)return Nv;TP=1;var e=mo(),t=ir(),n="[object AsyncFunction]",r="[object Function]",o="[object GeneratorFunction]",a="[object Proxy]";function i(s){if(!t(s))return!1;var c=e(s);return c==r||c==o||c==n||c==a}return Nv=i,Nv};var Mv,RP;function yX(){if(RP)return Mv;RP=1;var e=ar(),t=e["__core-js_shared__"];return Mv=t,Mv}var kv,IP;function gX(){if(IP)return kv;IP=1;var e=yX(),t=function(){var r=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function n(r){return!!t&&t in r}return kv=n,kv}var Pv,DP;function LP(){if(DP)return Pv;DP=1;var e=Function.prototype,t=e.toString;function n(r){if(r!=null){try{return t.call(r)}catch{}try{return r+""}catch{}}return""}return Pv=n,Pv}var Av,FP;function vX(){if(FP)return Av;FP=1;var e=Ju(),t=gX(),n=ir(),r=LP(),o=/[\\^$.*+?()[\]{}|]/g,a=/^\[object .+?Constructor\]$/,i=Function.prototype,s=Object.prototype,c=i.toString,l=s.hasOwnProperty,u=RegExp("^"+c.call(l).replace(o,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function d(f){if(!n(f)||t(f))return!1;var h=e(f)?u:a;return h.test(r(f))}return Av=d,Av}var Tv,BP;function bX(){if(BP)return Tv;BP=1;function e(t,n){return t==null?void 0:t[n]}return Tv=e,Tv}var Rv,$P;function $a(){if($P)return Rv;$P=1;var e=vX(),t=bX();function n(r,o){var a=t(r,o);return e(a)?a:void 0}return Rv=n,Rv}var Iv,zP;function Dv(){if(zP)return Iv;zP=1;var e=$a(),t=ar(),n=e(t,"Map");return Iv=n,Iv}var Lv,VP;function cf(){if(VP)return Lv;VP=1;var e=$a(),t=e(Object,"create");return Lv=t,Lv}var Fv,UP;function xX(){if(UP)return Fv;UP=1;var e=cf();function t(){this.__data__=e?e(null):{},this.size=0}return Fv=t,Fv}var Bv,HP;function wX(){if(HP)return Bv;HP=1;function e(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}return Bv=e,Bv}var $v,WP;function _X(){if(WP)return $v;WP=1;var e=cf(),t="__lodash_hash_undefined__",n=Object.prototype,r=n.hasOwnProperty;function o(a){var i=this.__data__;if(e){var s=i[a];return s===t?void 0:s}return r.call(i,a)?i[a]:void 0}return $v=o,$v}var zv,qP;function jX(){if(qP)return zv;qP=1;var e=cf(),t=Object.prototype,n=t.hasOwnProperty;function r(o){var a=this.__data__;return e?a[o]!==void 0:n.call(a,o)}return zv=r,zv}var Vv,YP;function EX(){if(YP)return Vv;YP=1;var e=cf(),t="__lodash_hash_undefined__";function n(r,o){var a=this.__data__;return this.size+=this.has(r)?0:1,a[r]=e&&o===void 0?t:o,this}return Vv=n,Vv}var Uv,KP;function SX(){if(KP)return Uv;KP=1;var e=xX(),t=wX(),n=_X(),r=jX(),o=EX();function a(i){var s=-1,c=i==null?0:i.length;for(this.clear();++s<c;){var l=i[s];this.set(l[0],l[1])}}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=n,a.prototype.has=r,a.prototype.set=o,Uv=a,Uv}var Hv,XP;function CX(){if(XP)return Hv;XP=1;var e=SX(),t=sf(),n=Dv();function r(){this.size=0,this.__data__={hash:new e,map:new(n||t),string:new e}}return Hv=r,Hv}var Wv,QP;function OX(){if(QP)return Wv;QP=1;function e(t){var n=typeof t;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?t!=="__proto__":t===null}return Wv=e,Wv}var qv,JP;function lf(){if(JP)return qv;JP=1;var e=OX();function t(n,r){var o=n.__data__;return e(r)?o[typeof r=="string"?"string":"hash"]:o.map}return qv=t,qv}var Yv,ZP;function NX(){if(ZP)return Yv;ZP=1;var e=lf();function t(n){var r=e(this,n).delete(n);return this.size-=r?1:0,r}return Yv=t,Yv}var Kv,GP;function MX(){if(GP)return Kv;GP=1;var e=lf();function t(n){return e(this,n).get(n)}return Kv=t,Kv}var Xv,eA;function kX(){if(eA)return Xv;eA=1;var e=lf();function t(n){return e(this,n).has(n)}return Xv=t,Xv}var Qv,tA;function PX(){if(tA)return Qv;tA=1;var e=lf();function t(n,r){var o=e(this,n),a=o.size;return o.set(n,r),this.size+=o.size==a?0:1,this}return Qv=t,Qv}var Jv,nA;function Zv(){if(nA)return Jv;nA=1;var e=CX(),t=NX(),n=MX(),r=kX(),o=PX();function a(i){var s=-1,c=i==null?0:i.length;for(this.clear();++s<c;){var l=i[s];this.set(l[0],l[1])}}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=n,a.prototype.has=r,a.prototype.set=o,Jv=a,Jv}var Gv,rA;function AX(){if(rA)return Gv;rA=1;var e=sf(),t=Dv(),n=Zv(),r=200;function o(a,i){var s=this.__data__;if(s instanceof e){var c=s.__data__;if(!t||c.length<r-1)return c.push([a,i]),this.size=++s.size,this;s=this.__data__=new n(c)}return s.set(a,i),this.size=s.size,this}return Gv=o,Gv}var e0,oA;fy=function(){if(oA)return e0;oA=1;var e=sf(),t=uX(),n=dX(),r=fX(),o=pX(),a=AX();function i(s){var c=this.__data__=new e(s);this.size=c.size}return i.prototype.clear=t,i.prototype.delete=n,i.prototype.get=r,i.prototype.has=o,i.prototype.set=a,e0=i,e0};var t0,aA;function TX(){if(aA)return t0;aA=1;var e="__lodash_hash_undefined__";function t(n){return this.__data__.set(n,e),this}return t0=t,t0}var n0,iA;function RX(){if(iA)return n0;iA=1;function e(t){return this.__data__.has(t)}return n0=e,n0}var r0,sA;function cA(){if(sA)return r0;sA=1;var e=Zv(),t=TX(),n=RX();function r(o){var a=-1,i=o==null?0:o.length;for(this.__data__=new e;++a<i;)this.add(o[a])}return r.prototype.add=r.prototype.push=t,r.prototype.has=n,r0=r,r0}var o0,lA;function uA(){if(lA)return o0;lA=1;function e(t,n){for(var r=-1,o=t==null?0:t.length;++r<o;)if(n(t[r],r,t))return!0;return!1}return o0=e,o0}var a0,dA;function fA(){if(dA)return a0;dA=1;function e(t,n){return t.has(n)}return a0=e,a0}var i0,pA;function hA(){if(pA)return i0;pA=1;var e=cA(),t=uA(),n=fA(),r=1,o=2;function a(i,s,c,l,u,d){var f=c&r,h=i.length,g=s.length;if(h!=g&&!(f&&g>h))return!1;var m=d.get(i),v=d.get(s);if(m&&v)return m==s&&v==i;var b=-1,x=!0,_=c&o?new e:void 0;for(d.set(i,s),d.set(s,i);++b<h;){var w=i[b],j=s[b];if(l)var E=f?l(j,w,b,s,i,d):l(w,j,b,i,s,d);if(E!==void 0){if(E)continue;x=!1;break}if(_){if(!t(s,function(S,C){if(!n(_,C)&&(w===S||u(w,S,c,l,d)))return _.push(C)})){x=!1;break}}else if(!(w===j||u(w,j,c,l,d))){x=!1;break}}return d.delete(i),d.delete(s),x}return i0=a,i0}var s0,mA;XS=function(){if(mA)return s0;mA=1;var e=ar(),t=e.Uint8Array;return s0=t,s0};var c0,yA;function IX(){if(yA)return c0;yA=1;function e(t){var n=-1,r=Array(t.size);return t.forEach(function(o,a){r[++n]=[a,o]}),r}return c0=e,c0}var l0,gA;function u0(){if(gA)return l0;gA=1;function e(t){var n=-1,r=Array(t.size);return t.forEach(function(o){r[++n]=o}),r}return l0=e,l0}var d0,vA;function DX(){if(vA)return d0;vA=1;var e=Si(),t=XS(),n=pc(),r=hA(),o=IX(),a=u0(),i=1,s=2,c="[object Boolean]",l="[object Date]",u="[object Error]",d="[object Map]",f="[object Number]",h="[object RegExp]",g="[object Set]",m="[object String]",v="[object Symbol]",b="[object ArrayBuffer]",x="[object DataView]",_=e?e.prototype:void 0,w=_?_.valueOf:void 0;function j(E,S,C,M,N,P,R){switch(C){case x:if(E.byteLength!=S.byteLength||E.byteOffset!=S.byteOffset)return!1;E=E.buffer,S=S.buffer;case b:return!(E.byteLength!=S.byteLength||!P(new t(E),new t(S)));case c:case l:case f:return n(+E,+S);case u:return E.name==S.name&&E.message==S.message;case h:case m:return E==S+"";case d:var A=o;case g:var O=M&i;if(A||(A=a),E.size!=S.size&&!O)return!1;var k=R.get(E);if(k)return k==S;M|=s,R.set(E,S);var T=r(A(E),A(S),M,N,P,R);return R.delete(E),T;case v:if(w)return w.call(E)==w.call(S)}return!1}return d0=j,d0}var f0,bA;function p0(){if(bA)return f0;bA=1;function e(t,n){for(var r=-1,o=n.length,a=t.length;++r<o;)t[a+r]=n[r];return t}return f0=e,f0}var h0,xA;pn=function(){if(xA)return h0;xA=1;var e=Array.isArray;return h0=e,h0};var m0,wA;function _A(){if(wA)return m0;wA=1;var e=p0(),t=pn();function n(r,o,a){var i=o(r);return t(r)?i:e(i,a(r))}return m0=n,m0}var y0,jA;function LX(){if(jA)return y0;jA=1;function e(t,n){for(var r=-1,o=t==null?0:t.length,a=0,i=[];++r<o;){var s=t[r];n(s,r,t)&&(i[a++]=s)}return i}return y0=e,y0}var g0,EA;function SA(){if(EA)return g0;EA=1;function e(){return[]}return g0=e,g0}var v0,CA;cy=function(){if(CA)return v0;CA=1;var e=LX(),t=SA(),n=Object.prototype,r=n.propertyIsEnumerable,o=Object.getOwnPropertySymbols,a=o?function(i){return i==null?[]:(i=Object(i),e(o(i),function(s){return r.call(i,s)}))}:t;return v0=a,v0};var b0,OA;function FX(){if(OA)return b0;OA=1;function e(t,n){for(var r=-1,o=Array(t);++r<t;)o[r]=n(r);return o}return b0=e,b0}var x0,NA;kr=function(){if(NA)return x0;NA=1;function e(t){return t!=null&&typeof t=="object"}return x0=e,x0};var w0,MA;function BX(){if(MA)return w0;MA=1;var e=mo(),t=kr(),n="[object Arguments]";function r(o){return t(o)&&e(o)==n}return w0=r,w0}var _0,kA;Qu=function(){if(kA)return _0;kA=1;var e=BX(),t=kr(),n=Object.prototype,r=n.hasOwnProperty,o=n.propertyIsEnumerable,a=e(function(){return arguments}())?e:function(i){return t(i)&&r.call(i,"callee")&&!o.call(i,"callee")};return _0=a,_0};var uf={exports:{}},j0,PA;function $X(){if(PA)return j0;PA=1;function e(){return!1}return j0=e,j0}uf.exports;var AA;py=function(){return AA||(AA=1,function(e,t){var n=ar(),r=$X(),o=t&&!t.nodeType&&t,a=o&&!0&&e&&!e.nodeType&&e,i=a&&a.exports===o,s=i?n.Buffer:void 0,c=s?s.isBuffer:void 0,l=c||r;e.exports=l}(uf,uf.exports)),uf.exports};var E0,TA;function df(){if(TA)return E0;TA=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function n(r,o){var a=typeof r;return o=o??e,!!o&&(a=="number"||a!="symbol"&&t.test(r))&&r>-1&&r%1==0&&r<o}return E0=n,E0}var S0,RA;function C0(){if(RA)return S0;RA=1;var e=9007199254740991;function t(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=e}return S0=t,S0}var O0,IA;function zX(){if(IA)return O0;IA=1;var e=mo(),t=C0(),n=kr(),r="[object Arguments]",o="[object Array]",a="[object Boolean]",i="[object Date]",s="[object Error]",c="[object Function]",l="[object Map]",u="[object Number]",d="[object Object]",f="[object RegExp]",h="[object Set]",g="[object String]",m="[object WeakMap]",v="[object ArrayBuffer]",b="[object DataView]",x="[object Float32Array]",_="[object Float64Array]",w="[object Int8Array]",j="[object Int16Array]",E="[object Int32Array]",S="[object Uint8Array]",C="[object Uint8ClampedArray]",M="[object Uint16Array]",N="[object Uint32Array]",P={};P[x]=P[_]=P[w]=P[j]=P[E]=P[S]=P[C]=P[M]=P[N]=!0,P[r]=P[o]=P[v]=P[a]=P[b]=P[i]=P[s]=P[c]=P[l]=P[u]=P[d]=P[f]=P[h]=P[g]=P[m]=!1;function R(A){return n(A)&&t(A.length)&&!!P[e(A)]}return O0=R,O0}var N0,DA;dy=function(){if(DA)return N0;DA=1;function e(t){return function(n){return t(n)}}return N0=e,N0};var ff={exports:{}};ff.exports;var LA;JS=function(){return LA||(LA=1,function(e,t){var n=CP(),r=t&&!t.nodeType&&t,o=r&&!0&&e&&!e.nodeType&&e,a=o&&o.exports===r,i=a&&n.process,s=function(){try{var c=o&&o.require&&o.require("util").types;return c||i&&i.binding&&i.binding("util")}catch{}}();e.exports=s}(ff,ff.exports)),ff.exports};var M0,FA;ym=function(){if(FA)return M0;FA=1;var e=zX(),t=dy(),n=JS(),r=n&&n.isTypedArray,o=r?t(r):e;return M0=o,M0};var k0,BA;function $A(){if(BA)return k0;BA=1;var e=FX(),t=Qu(),n=pn(),r=py(),o=df(),a=ym(),i=Object.prototype,s=i.hasOwnProperty;function c(l,u){var d=n(l),f=!d&&t(l),h=!d&&!f&&r(l),g=!d&&!f&&!h&&a(l),m=d||f||h||g,v=m?e(l.length,String):[],b=v.length;for(var x in l)(u||s.call(l,x))&&!(m&&(x=="length"||h&&(x=="offset"||x=="parent")||g&&(x=="buffer"||x=="byteLength"||x=="byteOffset")||o(x,b)))&&v.push(x);return v}return k0=c,k0}var P0,zA;uy=function(){if(zA)return P0;zA=1;var e=Object.prototype;function t(n){var r=n&&n.constructor,o=typeof r=="function"&&r.prototype||e;return n===o}return P0=t,P0};var A0,VA;function UA(){if(VA)return A0;VA=1;function e(t,n){return function(r){return t(n(r))}}return A0=e,A0}var T0,HA;function VX(){if(HA)return T0;HA=1;var e=UA(),t=e(Object.keys,Object);return T0=t,T0}var R0,WA;function UX(){if(WA)return R0;WA=1;var e=uy(),t=VX(),n=Object.prototype,r=n.hasOwnProperty;function o(a){if(!e(a))return t(a);var i=[];for(var s in Object(a))r.call(a,s)&&s!="constructor"&&i.push(s);return i}return R0=o,R0}var I0,qA;Sa=function(){if(qA)return I0;qA=1;var e=Ju(),t=C0();function n(r){return r!=null&&t(r.length)&&!e(r)}return I0=n,I0};var D0,YA;xc=function(){if(YA)return D0;YA=1;var e=$A(),t=UX(),n=Sa();function r(o){return n(o)?e(o):t(o)}return D0=r,D0};var L0,KA;ZS=function(){if(KA)return L0;KA=1;var e=_A(),t=cy(),n=xc();function r(o){return e(o,n,t)}return L0=r,L0};var F0,XA;function HX(){if(XA)return F0;XA=1;var e=ZS(),t=1,n=Object.prototype,r=n.hasOwnProperty;function o(a,i,s,c,l,u){var d=s&t,f=e(a),h=f.length,g=e(i),m=g.length;if(h!=m&&!d)return!1;for(var v=h;v--;){var b=f[v];if(!(d?b in i:r.call(i,b)))return!1}var x=u.get(a),_=u.get(i);if(x&&_)return x==i&&_==a;var w=!0;u.set(a,i),u.set(i,a);for(var j=d;++v<h;){b=f[v];var E=a[b],S=i[b];if(c)var C=d?c(S,E,b,i,a,u):c(E,S,b,a,i,u);if(!(C===void 0?E===S||l(E,S,s,c,u):C)){w=!1;break}j||(j=b=="constructor")}if(w&&!j){var M=a.constructor,N=i.constructor;M!=N&&"constructor"in a&&"constructor"in i&&!(typeof M=="function"&&M instanceof M&&typeof N=="function"&&N instanceof N)&&(w=!1)}return u.delete(a),u.delete(i),w}return F0=o,F0}var B0,QA;function WX(){if(QA)return B0;QA=1;var e=$a(),t=ar(),n=e(t,"DataView");return B0=n,B0}var $0,JA;function qX(){if(JA)return $0;JA=1;var e=$a(),t=ar(),n=e(t,"Promise");return $0=n,$0}var z0,ZA;function GA(){if(ZA)return z0;ZA=1;var e=$a(),t=ar(),n=e(t,"Set");return z0=n,z0}var V0,e2;function YX(){if(e2)return V0;e2=1;var e=$a(),t=ar(),n=e(t,"WeakMap");return V0=n,V0}var U0,t2;QS=function(){if(t2)return U0;t2=1;var e=WX(),t=Dv(),n=qX(),r=GA(),o=YX(),a=mo(),i=LP(),s="[object Map]",c="[object Object]",l="[object Promise]",u="[object Set]",d="[object WeakMap]",f="[object DataView]",h=i(e),g=i(t),m=i(n),v=i(r),b=i(o),x=a;return(e&&x(new e(new ArrayBuffer(1)))!=f||t&&x(new t)!=s||n&&x(n.resolve())!=l||r&&x(new r)!=u||o&&x(new o)!=d)&&(x=function(_){var w=a(_),j=w==c?_.constructor:void 0,E=j?i(j):"";if(E)switch(E){case h:return f;case g:return s;case m:return l;case v:return u;case b:return d}return w}),U0=x,U0};var H0,n2;function KX(){if(n2)return H0;n2=1;var e=fy(),t=hA(),n=DX(),r=HX(),o=QS(),a=pn(),i=py(),s=ym(),c=1,l="[object Arguments]",u="[object Array]",d="[object Object]",f=Object.prototype,h=f.hasOwnProperty;function g(m,v,b,x,_,w){var j=a(m),E=a(v),S=j?u:o(m),C=E?u:o(v);S=S==l?d:S,C=C==l?d:C;var M=S==d,N=C==d,P=S==C;if(P&&i(m)){if(!i(v))return!1;j=!0,M=!1}if(P&&!M)return w||(w=new e),j||s(m)?t(m,v,b,x,_,w):n(m,v,S,b,x,_,w);if(!(b&c)){var R=M&&h.call(m,"__wrapped__"),A=N&&h.call(v,"__wrapped__");if(R||A){var O=R?m.value():m,k=A?v.value():v;return w||(w=new e),_(O,k,b,x,w)}}return P?(w||(w=new e),r(m,v,b,x,_,w)):!1}return H0=g,H0}var W0,r2;function q0(){if(r2)return W0;r2=1;var e=KX(),t=kr();function n(r,o,a,i,s){return r===o?!0:r==null||o==null||!t(r)&&!t(o)?r!==r&&o!==o:e(r,o,a,i,n,s)}return W0=n,W0}var Y0,o2;function XX(){if(o2)return Y0;o2=1;var e=fy(),t=q0(),n=1,r=2;function o(a,i,s,c){var l=s.length,u=l,d=!c;if(a==null)return!u;for(a=Object(a);l--;){var f=s[l];if(d&&f[2]?f[1]!==a[f[0]]:!(f[0]in a))return!1}for(;++l<u;){f=s[l];var h=f[0],g=a[h],m=f[1];if(d&&f[2]){if(g===void 0&&!(h in a))return!1}else{var v=new e;if(c)var b=c(g,m,h,a,i,v);if(!(b===void 0?t(m,g,n|r,c,v):b))return!1}}return!0}return Y0=o,Y0}var K0,a2;function i2(){if(a2)return K0;a2=1;var e=ir();function t(n){return n===n&&!e(n)}return K0=t,K0}var X0,s2;function QX(){if(s2)return X0;s2=1;var e=i2(),t=xc();function n(r){for(var o=t(r),a=o.length;a--;){var i=o[a],s=r[i];o[a]=[i,s,e(s)]}return o}return X0=n,X0}var Q0,c2;function l2(){if(c2)return Q0;c2=1;function e(t,n){return function(r){return r==null?!1:r[t]===n&&(n!==void 0||t in Object(r))}}return Q0=e,Q0}var J0,u2;function JX(){if(u2)return J0;u2=1;var e=XX(),t=QX(),n=l2();function r(o){var a=t(o);return a.length==1&&a[0][2]?n(a[0][0],a[0][1]):function(i){return i===o||e(i,o,a)}}return J0=r,J0}var Z0,d2;function Yi(){if(d2)return Z0;d2=1;var e=mo(),t=kr(),n="[object Symbol]";function r(o){return typeof o=="symbol"||t(o)&&e(o)==n}return Z0=r,Z0}var G0,f2;function eb(){if(f2)return G0;f2=1;var e=pn(),t=Yi(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function o(a,i){if(e(a))return!1;var s=typeof a;return s=="number"||s=="symbol"||s=="boolean"||a==null||t(a)?!0:r.test(a)||!n.test(a)||i!=null&&a in Object(i)}return G0=o,G0}var tb,p2;function h2(){if(p2)return tb;p2=1;var e=Zv(),t="Expected a function";function n(r,o){if(typeof r!="function"||o!=null&&typeof o!="function")throw new TypeError(t);var a=function(){var i=arguments,s=o?o.apply(this,i):i[0],c=a.cache;if(c.has(s))return c.get(s);var l=r.apply(this,i);return a.cache=c.set(s,l)||c,l};return a.cache=new(n.Cache||e),a}return n.Cache=e,tb=n,tb}var nb,m2;function ZX(){if(m2)return nb;m2=1;var e=h2(),t=500;function n(r){var o=e(r,function(i){return a.size===t&&a.clear(),i}),a=o.cache;return o}return nb=n,nb}var rb,y2;function GX(){if(y2)return rb;y2=1;var e=ZX(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,r=e(function(o){var a=[];return o.charCodeAt(0)===46&&a.push(""),o.replace(t,function(i,s,c,l){a.push(c?l.replace(n,"$1"):s||i)}),a});return rb=r,rb}var ob,g2;fc=function(){if(g2)return ob;g2=1;function e(t,n){for(var r=-1,o=t==null?0:t.length,a=Array(o);++r<o;)a[r]=n(t[r],r,t);return a}return ob=e,ob};var ab,v2;function eQ(){if(v2)return ab;v2=1;var e=Si(),t=fc(),n=pn(),r=Yi(),o=1/0,a=e?e.prototype:void 0,i=a?a.toString:void 0;function s(c){if(typeof c=="string")return c;if(n(c))return t(c,s)+"";if(r(c))return i?i.call(c):"";var l=c+"";return l=="0"&&1/c==-o?"-0":l}return ab=s,ab}var ib,b2;function x2(){if(b2)return ib;b2=1;var e=eQ();function t(n){return n==null?"":e(n)}return ib=t,ib}var sb,w2;Ec=function(){if(w2)return sb;w2=1;var e=pn(),t=eb(),n=GX(),r=x2();function o(a,i){return e(a)?a:t(a,i)?[a]:n(r(a))}return sb=o,sb};var cb,_2;Ci=function(){if(_2)return cb;_2=1;var e=Yi(),t=1/0;function n(r){if(typeof r=="string"||e(r))return r;var o=r+"";return o=="0"&&1/r==-t?"-0":o}return cb=n,cb};var lb,j2;jc=function(){if(j2)return lb;j2=1;var e=Ec(),t=Ci();function n(r,o){o=e(o,r);for(var a=0,i=o.length;r!=null&&a<i;)r=r[t(o[a++])];return a&&a==i?r:void 0}return lb=n,lb};var ub,E2;function S2(){if(E2)return ub;E2=1;var e=jc();function t(n,r,o){var a=n==null?void 0:e(n,r);return a===void 0?o:a}return ub=t,ub}var db,C2;function tQ(){if(C2)return db;C2=1;function e(t,n){return t!=null&&n in Object(t)}return db=e,db}var fb,O2;function nQ(){if(O2)return fb;O2=1;var e=Ec(),t=Qu(),n=pn(),r=df(),o=C0(),a=Ci();function i(s,c,l){c=e(c,s);for(var u=-1,d=c.length,f=!1;++u<d;){var h=a(c[u]);if(!(f=s!=null&&l(s,h)))break;s=s[h]}return f||++u!=d?f:(d=s==null?0:s.length,!!d&&o(d)&&r(h,d)&&(n(s)||t(s)))}return fb=i,fb}var pb,N2;gS=function(){if(N2)return pb;N2=1;var e=tQ(),t=nQ();function n(r,o){return r!=null&&t(r,o,e)}return pb=n,pb};var hb,M2;function rQ(){if(M2)return hb;M2=1;var e=q0(),t=S2(),n=gS(),r=eb(),o=i2(),a=l2(),i=Ci(),s=1,c=2;function l(u,d){return r(u)&&o(d)?a(i(u),d):function(f){var h=t(f,u);return h===void 0&&h===d?n(f,u):e(d,h,s|c)}}return hb=l,hb}var mb,k2;function Ki(){if(k2)return mb;k2=1;function e(t){return t}return mb=e,mb}var yb,P2;function oQ(){if(P2)return yb;P2=1;function e(t){return function(n){return n==null?void 0:n[t]}}return yb=e,yb}var gb,A2;function aQ(){if(A2)return gb;A2=1;var e=jc();function t(n){return function(r){return e(r,n)}}return gb=t,gb}var vb,T2;function iQ(){if(T2)return vb;T2=1;var e=oQ(),t=aQ(),n=eb(),r=Ci();function o(a){return n(a)?e(r(a)):t(a)}return vb=o,vb}var bb,R2;function Fr(){if(R2)return bb;R2=1;var e=JX(),t=rQ(),n=Ki(),r=pn(),o=iQ();function a(i){return typeof i=="function"?i:i==null?n:typeof i=="object"?r(i)?t(i[0],i[1]):e(i):o(i)}return bb=a,bb}var xb,I2;function sQ(){if(I2)return xb;I2=1;var e="Expected a function";function t(n){if(typeof n!="function")throw new TypeError(e);return function(){var r=arguments;switch(r.length){case 0:return!n.call(this);case 1:return!n.call(this,r[0]);case 2:return!n.call(this,r[0],r[1]);case 3:return!n.call(this,r[0],r[1],r[2])}return!n.apply(this,r)}}return xb=t,xb}var wb,D2;function L2(){if(D2)return wb;D2=1;var e=$a(),t=function(){try{var n=e(Object,"defineProperty");return n({},"",{}),n}catch{}}();return wb=t,wb}var _b,F2;bm=function(){if(F2)return _b;F2=1;var e=L2();function t(n,r,o){r=="__proto__"&&e?e(n,r,{configurable:!0,enumerable:!0,value:o,writable:!0}):n[r]=o}return _b=t,_b};var jb,B2;GS=function(){if(B2)return jb;B2=1;var e=bm(),t=pc(),n=Object.prototype,r=n.hasOwnProperty;function o(a,i,s){var c=a[i];(!(r.call(a,i)&&t(c,s))||s===void 0&&!(i in a))&&e(a,i,s)}return jb=o,jb};var Eb,$2;function cQ(){if($2)return Eb;$2=1;var e=GS(),t=Ec(),n=df(),r=ir(),o=Ci();function a(i,s,c,l){if(!r(i))return i;s=t(s,i);for(var u=-1,d=s.length,f=d-1,h=i;h!=null&&++u<d;){var g=o(s[u]),m=c;if(g==="__proto__"||g==="constructor"||g==="prototype")return i;if(u!=f){var v=h[g];m=l?l(v,g,h):void 0,m===void 0&&(m=r(v)?v:n(s[u+1])?[]:{})}e(h,g,m),h=h[g]}return i}return Eb=a,Eb}var Sb,z2;yS=function(){if(z2)return Sb;z2=1;var e=jc(),t=cQ(),n=Ec();function r(o,a,i){for(var s=-1,c=a.length,l={};++s<c;){var u=a[s],d=e(o,u);i(d,u)&&t(l,n(u,o),d)}return l}return Sb=r,Sb};var Cb,V2;ly=function(){if(V2)return Cb;V2=1;var e=UA(),t=e(Object.getPrototypeOf,Object);return Cb=t,Cb};var Ob,U2;KS=function(){if(U2)return Ob;U2=1;var e=p0(),t=ly(),n=cy(),r=SA(),o=Object.getOwnPropertySymbols,a=o?function(i){for(var s=[];i;)e(s,n(i)),i=t(i);return s}:r;return Ob=a,Ob};var Nb,H2;function lQ(){if(H2)return Nb;H2=1;function e(t){var n=[];if(t!=null)for(var r in Object(t))n.push(r);return n}return Nb=e,Nb}var Mb,W2;function uQ(){if(W2)return Mb;W2=1;var e=ir(),t=uy(),n=lQ(),r=Object.prototype,o=r.hasOwnProperty;function a(i){if(!e(i))return n(i);var s=t(i),c=[];for(var l in i)l=="constructor"&&(s||!o.call(i,l))||c.push(l);return c}return Mb=a,Mb}var kb,q2;YS=function(){if(q2)return kb;q2=1;var e=$A(),t=uQ(),n=Sa();function r(o){return n(o)?e(o,!0):t(o)}return kb=r,kb};var Pb,Y2;eC=function(){if(Y2)return Pb;Y2=1;var e=_A(),t=KS(),n=YS();function r(o){return e(o,n,t)}return Pb=r,Pb};var Ab,K2;function dQ(){if(K2)return Ab;K2=1;var e=fc(),t=Fr(),n=yS(),r=eC();function o(a,i){if(a==null)return{};var s=e(r(a),function(c){return[c]});return i=t(i),n(a,s,function(c,l){return i(c,l[0])})}return Ab=o,Ab}var Tb,X2;function fQ(){if(X2)return Tb;X2=1;var e=Fr(),t=sQ(),n=dQ();function r(o,a){return n(o,t(e(a)))}return Tb=r,Tb}var pQ=fQ();const cl=Qe(pQ);var Rb,Q2;function hQ(){if(Q2)return Rb;Q2=1;function e(t){return t===void 0}return Rb=e,Rb}var mQ=hQ();const ll=Qe(mQ);function It(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=It(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var yQ={value:()=>{}};function pf(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new hf(n)}function hf(e){this._=e}function gQ(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",o=n.indexOf(".");if(o>=0&&(r=n.slice(o+1),n=n.slice(0,o)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}hf.prototype=pf.prototype={constructor:hf,on:function(e,t){var n=this._,r=gQ(e+"",n),o,a=-1,i=r.length;if(arguments.length<2){for(;++a<i;)if((o=(e=r[a]).type)&&(o=vQ(n[o],e.name)))return o;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<i;)if(o=(e=r[a]).type)n[o]=J2(n[o],e.name,t);else if(t==null)for(o in n)n[o]=J2(n[o],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new hf(e)},call:function(e,t){if((o=arguments.length-2)>0)for(var n=new Array(o),r=0,o,a;r<o;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],r=0,o=a.length;r<o;++r)a[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],o=0,a=r.length;o<a;++o)r[o].value.apply(t,n)}};function vQ(e,t){for(var n=0,r=e.length,o;n<r;++n)if((o=e[n]).name===t)return o.value}function J2(e,t,n){for(var r=0,o=e.length;r<o;++r)if(e[r].name===t){e[r]=yQ,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Ib="http://www.w3.org/1999/xhtml";const Z2={svg:"http://www.w3.org/2000/svg",xhtml:Ib,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function mf(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Z2.hasOwnProperty(t)?{space:Z2[t],local:e}:e}function bQ(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Ib&&t.documentElement.namespaceURI===Ib?t.createElement(e):t.createElementNS(n,e)}}function xQ(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function G2(e){var t=mf(e);return(t.local?xQ:bQ)(t)}function wQ(){}function Db(e){return e==null?wQ:function(){return this.querySelector(e)}}function _Q(e){typeof e!="function"&&(e=Db(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var a=t[o],i=a.length,s=r[o]=new Array(i),c,l,u=0;u<i;++u)(c=a[u])&&(l=e.call(c,c.__data__,u,a))&&("__data__"in c&&(l.__data__=c.__data__),s[u]=l);return new Fn(r,this._parents)}function jQ(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function EQ(){return[]}function eT(e){return e==null?EQ:function(){return this.querySelectorAll(e)}}function SQ(e){return function(){return jQ(e.apply(this,arguments))}}function CQ(e){typeof e=="function"?e=SQ(e):e=eT(e);for(var t=this._groups,n=t.length,r=[],o=[],a=0;a<n;++a)for(var i=t[a],s=i.length,c,l=0;l<s;++l)(c=i[l])&&(r.push(e.call(c,c.__data__,l,i)),o.push(c));return new Fn(r,o)}function tT(e){return function(){return this.matches(e)}}function nT(e){return function(t){return t.matches(e)}}var OQ=Array.prototype.find;function NQ(e){return function(){return OQ.call(this.children,e)}}function MQ(){return this.firstElementChild}function kQ(e){return this.select(e==null?MQ:NQ(typeof e=="function"?e:nT(e)))}var PQ=Array.prototype.filter;function AQ(){return Array.from(this.children)}function TQ(e){return function(){return PQ.call(this.children,e)}}function RQ(e){return this.selectAll(e==null?AQ:TQ(typeof e=="function"?e:nT(e)))}function IQ(e){typeof e!="function"&&(e=tT(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var a=t[o],i=a.length,s=r[o]=[],c,l=0;l<i;++l)(c=a[l])&&e.call(c,c.__data__,l,a)&&s.push(c);return new Fn(r,this._parents)}function rT(e){return new Array(e.length)}function DQ(){return new Fn(this._enter||this._groups.map(rT),this._parents)}function yf(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}yf.prototype={constructor:yf,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function LQ(e){return function(){return e}}function FQ(e,t,n,r,o,a){for(var i=0,s,c=t.length,l=a.length;i<l;++i)(s=t[i])?(s.__data__=a[i],r[i]=s):n[i]=new yf(e,a[i]);for(;i<c;++i)(s=t[i])&&(o[i]=s)}function BQ(e,t,n,r,o,a,i){var s,c,l=new Map,u=t.length,d=a.length,f=new Array(u),h;for(s=0;s<u;++s)(c=t[s])&&(f[s]=h=i.call(c,c.__data__,s,t)+"",l.has(h)?o[s]=c:l.set(h,c));for(s=0;s<d;++s)h=i.call(e,a[s],s,a)+"",(c=l.get(h))?(r[s]=c,c.__data__=a[s],l.delete(h)):n[s]=new yf(e,a[s]);for(s=0;s<u;++s)(c=t[s])&&l.get(f[s])===c&&(o[s]=c)}function $Q(e){return e.__data__}function zQ(e,t){if(!arguments.length)return Array.from(this,$Q);var n=t?BQ:FQ,r=this._parents,o=this._groups;typeof e!="function"&&(e=LQ(e));for(var a=o.length,i=new Array(a),s=new Array(a),c=new Array(a),l=0;l<a;++l){var u=r[l],d=o[l],f=d.length,h=VQ(e.call(u,u&&u.__data__,l,r)),g=h.length,m=s[l]=new Array(g),v=i[l]=new Array(g),b=c[l]=new Array(f);n(u,d,m,v,b,h,t);for(var x=0,_=0,w,j;x<g;++x)if(w=m[x]){for(x>=_&&(_=x+1);!(j=v[_])&&++_<g;);w._next=j||null}}return i=new Fn(i,r),i._enter=s,i._exit=c,i}function VQ(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function UQ(){return new Fn(this._exit||this._groups.map(rT),this._parents)}function HQ(e,t,n){var r=this.enter(),o=this,a=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(o=t(o),o&&(o=o.selection())),n==null?a.remove():n(a),r&&o?r.merge(o).order():o}function WQ(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,o=n.length,a=r.length,i=Math.min(o,a),s=new Array(o),c=0;c<i;++c)for(var l=n[c],u=r[c],d=l.length,f=s[c]=new Array(d),h,g=0;g<d;++g)(h=l[g]||u[g])&&(f[g]=h);for(;c<o;++c)s[c]=n[c];return new Fn(s,this._parents)}function qQ(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],o=r.length-1,a=r[o],i;--o>=0;)(i=r[o])&&(a&&i.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(i,a),a=i);return this}function YQ(e){e||(e=KQ);function t(d,f){return d&&f?e(d.__data__,f.__data__):!d-!f}for(var n=this._groups,r=n.length,o=new Array(r),a=0;a<r;++a){for(var i=n[a],s=i.length,c=o[a]=new Array(s),l,u=0;u<s;++u)(l=i[u])&&(c[u]=l);c.sort(t)}return new Fn(o,this._parents).order()}function KQ(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function XQ(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function QQ(){return Array.from(this)}function JQ(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,a=r.length;o<a;++o){var i=r[o];if(i)return i}return null}function ZQ(){let e=0;for(const t of this)++e;return e}function GQ(){return!this.node()}function eJ(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var o=t[n],a=0,i=o.length,s;a<i;++a)(s=o[a])&&e.call(s,s.__data__,a,o);return this}function tJ(e){return function(){this.removeAttribute(e)}}function nJ(e){return function(){this.removeAttributeNS(e.space,e.local)}}function rJ(e,t){return function(){this.setAttribute(e,t)}}function oJ(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function aJ(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function iJ(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function sJ(e,t){var n=mf(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?nJ:tJ:typeof t=="function"?n.local?iJ:aJ:n.local?oJ:rJ)(n,t))}function oT(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function cJ(e){return function(){this.style.removeProperty(e)}}function lJ(e,t,n){return function(){this.style.setProperty(e,t,n)}}function uJ(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function dJ(e,t,n){return arguments.length>1?this.each((t==null?cJ:typeof t=="function"?uJ:lJ)(e,t,n??"")):Xi(this.node(),e)}function Xi(e,t){return e.style.getPropertyValue(t)||oT(e).getComputedStyle(e,null).getPropertyValue(t)}function fJ(e){return function(){delete this[e]}}function pJ(e,t){return function(){this[e]=t}}function hJ(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function mJ(e,t){return arguments.length>1?this.each((t==null?fJ:typeof t=="function"?hJ:pJ)(e,t)):this.node()[e]}function aT(e){return e.trim().split(/^|\s+/)}function Lb(e){return e.classList||new iT(e)}function iT(e){this._node=e,this._names=aT(e.getAttribute("class")||"")}iT.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function sT(e,t){for(var n=Lb(e),r=-1,o=t.length;++r<o;)n.add(t[r])}function cT(e,t){for(var n=Lb(e),r=-1,o=t.length;++r<o;)n.remove(t[r])}function yJ(e){return function(){sT(this,e)}}function gJ(e){return function(){cT(this,e)}}function vJ(e,t){return function(){(t.apply(this,arguments)?sT:cT)(this,e)}}function bJ(e,t){var n=aT(e+"");if(arguments.length<2){for(var r=Lb(this.node()),o=-1,a=n.length;++o<a;)if(!r.contains(n[o]))return!1;return!0}return this.each((typeof t=="function"?vJ:t?yJ:gJ)(n,t))}function xJ(){this.textContent=""}function wJ(e){return function(){this.textContent=e}}function _J(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function jJ(e){return arguments.length?this.each(e==null?xJ:(typeof e=="function"?_J:wJ)(e)):this.node().textContent}function EJ(){this.innerHTML=""}function SJ(e){return function(){this.innerHTML=e}}function CJ(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function OJ(e){return arguments.length?this.each(e==null?EJ:(typeof e=="function"?CJ:SJ)(e)):this.node().innerHTML}function NJ(){this.nextSibling&&this.parentNode.appendChild(this)}function MJ(){return this.each(NJ)}function kJ(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function PJ(){return this.each(kJ)}function AJ(e){var t=typeof e=="function"?e:G2(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function TJ(){return null}function RJ(e,t){var n=typeof e=="function"?e:G2(e),r=t==null?TJ:typeof t=="function"?t:Db(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function IJ(){var e=this.parentNode;e&&e.removeChild(this)}function DJ(){return this.each(IJ)}function LJ(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function FJ(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function BJ(e){return this.select(e?FJ:LJ)}function $J(e){return arguments.length?this.property("__data__",e):this.node().__data__}function zJ(e){return function(t){e.call(this,t,this.__data__)}}function VJ(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function UJ(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,o=t.length,a;n<o;++n)a=t[n],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++r]=a;++r?t.length=r:delete this.__on}}}function HJ(e,t,n){return function(){var r=this.__on,o,a=zJ(t);if(r){for(var i=0,s=r.length;i<s;++i)if((o=r[i]).type===e.type&&o.name===e.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=a,o.options=n),o.value=t;return}}this.addEventListener(e.type,a,n),o={type:e.type,name:e.name,value:t,listener:a,options:n},r?r.push(o):this.__on=[o]}}function WJ(e,t,n){var r=VJ(e+""),o,a=r.length,i;if(arguments.length<2){var s=this.node().__on;if(s){for(var c=0,l=s.length,u;c<l;++c)for(o=0,u=s[c];o<a;++o)if((i=r[o]).type===u.type&&i.name===u.name)return u.value}return}for(s=t?HJ:UJ,o=0;o<a;++o)this.each(s(r[o],t,n));return this}function lT(e,t,n){var r=oT(e),o=r.CustomEvent;typeof o=="function"?o=new o(t,n):(o=r.document.createEvent("Event"),n?(o.initEvent(t,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}function qJ(e,t){return function(){return lT(this,e,t)}}function YJ(e,t){return function(){return lT(this,e,t.apply(this,arguments))}}function KJ(e,t){return this.each((typeof t=="function"?YJ:qJ)(e,t))}function*XJ(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,a=r.length,i;o<a;++o)(i=r[o])&&(yield i)}var uT=[null];function Fn(e,t){this._groups=e,this._parents=t}function ul(){return new Fn([[document.documentElement]],uT)}function QJ(){return this}Fn.prototype=ul.prototype={constructor:Fn,select:_Q,selectAll:CQ,selectChild:kQ,selectChildren:RQ,filter:IQ,data:zQ,enter:DQ,exit:UQ,join:HQ,merge:WQ,selection:QJ,order:qQ,sort:YQ,call:XQ,nodes:QQ,node:JQ,size:ZQ,empty:GQ,each:eJ,attr:sJ,style:dJ,property:mJ,classed:bJ,text:jJ,html:OJ,raise:MJ,lower:PJ,append:AJ,insert:RJ,remove:DJ,clone:BJ,datum:$J,on:WJ,dispatch:KJ,[Symbol.iterator]:XJ};function Bn(e){return typeof e=="string"?new Fn([[document.querySelector(e)]],[document.documentElement]):new Fn([[e]],uT)}function JJ(e){let t;for(;t=e.sourceEvent;)e=t;return e}function hr(e,t){if(e=JJ(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}}return[e.pageX,e.pageY]}const ZJ={passive:!1},dl={capture:!0,passive:!1};function Fb(e){e.stopImmediatePropagation()}function Qi(e){e.preventDefault(),e.stopImmediatePropagation()}function dT(e){var t=e.document.documentElement,n=Bn(e).on("dragstart.drag",Qi,dl);"onselectstart"in t?n.on("selectstart.drag",Qi,dl):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function fT(e,t){var n=e.document.documentElement,r=Bn(e).on("dragstart.drag",null);t&&(r.on("click.drag",Qi,dl),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const gf=e=>()=>e;function Bb(e,{sourceEvent:t,subject:n,target:r,identifier:o,active:a,x:i,y:s,dx:c,dy:l,dispatch:u}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:i,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:l,enumerable:!0,configurable:!0},_:{value:u}})}Bb.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function GJ(e){return!e.ctrlKey&&!e.button}function eZ(){return this.parentNode}function tZ(e,t){return t??{x:e.x,y:e.y}}function nZ(){return navigator.maxTouchPoints||"ontouchstart"in this}function pT(){var e=GJ,t=eZ,n=tZ,r=nZ,o={},a=pf("start","drag","end"),i=0,s,c,l,u,d=0;function f(w){w.on("mousedown.drag",h).filter(r).on("touchstart.drag",v).on("touchmove.drag",b,ZJ).on("touchend.drag touchcancel.drag",x).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(w,j){if(!(u||!e.call(this,w,j))){var E=_(this,t.call(this,w,j),w,j,"mouse");E&&(Bn(w.view).on("mousemove.drag",g,dl).on("mouseup.drag",m,dl),dT(w.view),Fb(w),l=!1,s=w.clientX,c=w.clientY,E("start",w))}}function g(w){if(Qi(w),!l){var j=w.clientX-s,E=w.clientY-c;l=j*j+E*E>d}o.mouse("drag",w)}function m(w){Bn(w.view).on("mousemove.drag mouseup.drag",null),fT(w.view,l),Qi(w),o.mouse("end",w)}function v(w,j){if(e.call(this,w,j)){var E=w.changedTouches,S=t.call(this,w,j),C=E.length,M,N;for(M=0;M<C;++M)(N=_(this,S,w,j,E[M].identifier,E[M]))&&(Fb(w),N("start",w,E[M]))}}function b(w){var j=w.changedTouches,E=j.length,S,C;for(S=0;S<E;++S)(C=o[j[S].identifier])&&(Qi(w),C("drag",w,j[S]))}function x(w){var j=w.changedTouches,E=j.length,S,C;for(u&&clearTimeout(u),u=setTimeout(function(){u=null},500),S=0;S<E;++S)(C=o[j[S].identifier])&&(Fb(w),C("end",w,j[S]))}function _(w,j,E,S,C,M){var N=a.copy(),P=hr(M||E,j),R,A,O;if((O=n.call(w,new Bb("beforestart",{sourceEvent:E,target:f,identifier:C,active:i,x:P[0],y:P[1],dx:0,dy:0,dispatch:N}),S))!=null)return R=O.x-P[0]||0,A=O.y-P[1]||0,function k(T,D,I){var L=P,B;switch(T){case"start":o[C]=k,B=i++;break;case"end":delete o[C],--i;case"drag":P=hr(I||D,j),B=i;break}N.call(T,w,new Bb(T,{sourceEvent:D,subject:O,target:f,identifier:C,active:B,x:P[0]+R,y:P[1]+A,dx:P[0]-L[0],dy:P[1]-L[1],dispatch:N}),S)}}return f.filter=function(w){return arguments.length?(e=typeof w=="function"?w:gf(!!w),f):e},f.container=function(w){return arguments.length?(t=typeof w=="function"?w:gf(w),f):t},f.subject=function(w){return arguments.length?(n=typeof w=="function"?w:gf(w),f):n},f.touchable=function(w){return arguments.length?(r=typeof w=="function"?w:gf(!!w),f):r},f.on=function(){var w=a.on.apply(a,arguments);return w===a?f:w},f.clickDistance=function(w){return arguments.length?(d=(w=+w)*w,f):Math.sqrt(d)},f}function $b(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function hT(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function fl(){}var pl=.7,vf=1/pl,Ji="\\s*([+-]?\\d+)\\s*",hl="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Br="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",rZ=/^#([0-9a-f]{3,8})$/,oZ=new RegExp(`^rgb\\(${Ji},${Ji},${Ji}\\)$`),aZ=new RegExp(`^rgb\\(${Br},${Br},${Br}\\)$`),iZ=new RegExp(`^rgba\\(${Ji},${Ji},${Ji},${hl}\\)$`),sZ=new RegExp(`^rgba\\(${Br},${Br},${Br},${hl}\\)$`),cZ=new RegExp(`^hsl\\(${hl},${Br},${Br}\\)$`),lZ=new RegExp(`^hsla\\(${hl},${Br},${Br},${hl}\\)$`),mT={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};$b(fl,za,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:yT,formatHex:yT,formatHex8:uZ,formatHsl:dZ,formatRgb:gT,toString:gT});function yT(){return this.rgb().formatHex()}function uZ(){return this.rgb().formatHex8()}function dZ(){return _T(this).formatHsl()}function gT(){return this.rgb().formatRgb()}function za(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=rZ.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?vT(t):n===3?new En(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?bf(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?bf(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=oZ.exec(e))?new En(t[1],t[2],t[3],1):(t=aZ.exec(e))?new En(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=iZ.exec(e))?bf(t[1],t[2],t[3],t[4]):(t=sZ.exec(e))?bf(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=cZ.exec(e))?wT(t[1],t[2]/100,t[3]/100,1):(t=lZ.exec(e))?wT(t[1],t[2]/100,t[3]/100,t[4]):mT.hasOwnProperty(e)?vT(mT[e]):e==="transparent"?new En(NaN,NaN,NaN,0):null}function vT(e){return new En(e>>16&255,e>>8&255,e&255,1)}function bf(e,t,n,r){return r<=0&&(e=t=n=NaN),new En(e,t,n,r)}function fZ(e){return e instanceof fl||(e=za(e)),e?(e=e.rgb(),new En(e.r,e.g,e.b,e.opacity)):new En}function zb(e,t,n,r){return arguments.length===1?fZ(e):new En(e,t,n,r??1)}function En(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}$b(En,zb,hT(fl,{brighter(e){return e=e==null?vf:Math.pow(vf,e),new En(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?pl:Math.pow(pl,e),new En(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new En(Va(this.r),Va(this.g),Va(this.b),xf(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:bT,formatHex:bT,formatHex8:pZ,formatRgb:xT,toString:xT}));function bT(){return`#${Ua(this.r)}${Ua(this.g)}${Ua(this.b)}`}function pZ(){return`#${Ua(this.r)}${Ua(this.g)}${Ua(this.b)}${Ua((isNaN(this.opacity)?1:this.opacity)*255)}`}function xT(){const e=xf(this.opacity);return`${e===1?"rgb(":"rgba("}${Va(this.r)}, ${Va(this.g)}, ${Va(this.b)}${e===1?")":`, ${e})`}`}function xf(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Va(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Ua(e){return e=Va(e),(e<16?"0":"")+e.toString(16)}function wT(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new mr(e,t,n,r)}function _T(e){if(e instanceof mr)return new mr(e.h,e.s,e.l,e.opacity);if(e instanceof fl||(e=za(e)),!e)return new mr;if(e instanceof mr)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,o=Math.min(t,n,r),a=Math.max(t,n,r),i=NaN,s=a-o,c=(a+o)/2;return s?(t===a?i=(n-r)/s+(n<r)*6:n===a?i=(r-t)/s+2:i=(t-n)/s+4,s/=c<.5?a+o:2-a-o,i*=60):s=c>0&&c<1?0:i,new mr(i,s,c,e.opacity)}function hZ(e,t,n,r){return arguments.length===1?_T(e):new mr(e,t,n,r??1)}function mr(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}$b(mr,hZ,hT(fl,{brighter(e){return e=e==null?vf:Math.pow(vf,e),new mr(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?pl:Math.pow(pl,e),new mr(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,o=2*n-r;return new En(Vb(e>=240?e-240:e+120,o,r),Vb(e,o,r),Vb(e<120?e+240:e-120,o,r),this.opacity)},clamp(){return new mr(jT(this.h),wf(this.s),wf(this.l),xf(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=xf(this.opacity);return`${e===1?"hsl(":"hsla("}${jT(this.h)}, ${wf(this.s)*100}%, ${wf(this.l)*100}%${e===1?")":`, ${e})`}`}}));function jT(e){return e=(e||0)%360,e<0?e+360:e}function wf(e){return Math.max(0,Math.min(1,e||0))}function Vb(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Ub=e=>()=>e;function mZ(e,t){return function(n){return e+n*t}}function yZ(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function gZ(e){return(e=+e)==1?ET:function(t,n){return n-t?yZ(t,n,e):Ub(isNaN(t)?n:t)}}function ET(e,t){var n=t-e;return n?mZ(e,n):Ub(isNaN(e)?t:e)}const _f=function e(t){var n=gZ(t);function r(o,a){var i=n((o=zb(o)).r,(a=zb(a)).r),s=n(o.g,a.g),c=n(o.b,a.b),l=ET(o.opacity,a.opacity);return function(u){return o.r=i(u),o.g=s(u),o.b=c(u),o.opacity=l(u),o+""}}return r.gamma=e,r}(1);function vZ(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),o;return function(a){for(o=0;o<n;++o)r[o]=e[o]*(1-a)+t[o]*a;return r}}function bZ(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function xZ(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,o=new Array(r),a=new Array(n),i;for(i=0;i<r;++i)o[i]=Zi(e[i],t[i]);for(;i<n;++i)a[i]=t[i];return function(s){for(i=0;i<r;++i)a[i]=o[i](s);return a}}function wZ(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function yr(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function _Z(e,t){var n={},r={},o;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(o in t)o in e?n[o]=Zi(e[o],t[o]):r[o]=t[o];return function(a){for(o in n)r[o]=n[o](a);return r}}var Hb=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Wb=new RegExp(Hb.source,"g");function jZ(e){return function(){return e}}function EZ(e){return function(t){return e(t)+""}}function ST(e,t){var n=Hb.lastIndex=Wb.lastIndex=0,r,o,a,i=-1,s=[],c=[];for(e=e+"",t=t+"";(r=Hb.exec(e))&&(o=Wb.exec(t));)(a=o.index)>n&&(a=t.slice(n,a),s[i]?s[i]+=a:s[++i]=a),(r=r[0])===(o=o[0])?s[i]?s[i]+=o:s[++i]=o:(s[++i]=null,c.push({i,x:yr(r,o)})),n=Wb.lastIndex;return n<t.length&&(a=t.slice(n),s[i]?s[i]+=a:s[++i]=a),s.length<2?c[0]?EZ(c[0].x):jZ(t):(t=c.length,function(l){for(var u=0,d;u<t;++u)s[(d=c[u]).i]=d.x(l);return s.join("")})}function Zi(e,t){var n=typeof t,r;return t==null||n==="boolean"?Ub(t):(n==="number"?yr:n==="string"?(r=za(t))?(t=r,_f):ST:t instanceof za?_f:t instanceof Date?wZ:bZ(t)?vZ:Array.isArray(t)?xZ:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?_Z:yr)(e,t)}function qb(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var CT=180/Math.PI,OT={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function NT(e,t,n,r,o,a){var i,s,c;return(i=Math.sqrt(e*e+t*t))&&(e/=i,t/=i),(c=e*n+t*r)&&(n-=e*c,r-=t*c),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,c/=s),e*r<t*n&&(e=-e,t=-t,c=-c,i=-i),{translateX:o,translateY:a,rotate:Math.atan2(t,e)*CT,skewX:Math.atan(c)*CT,scaleX:i,scaleY:s}}var jf;function SZ(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?OT:NT(t.a,t.b,t.c,t.d,t.e,t.f)}function CZ(e){return e==null||(jf||(jf=document.createElementNS("http://www.w3.org/2000/svg","g")),jf.setAttribute("transform",e),!(e=jf.transform.baseVal.consolidate()))?OT:(e=e.matrix,NT(e.a,e.b,e.c,e.d,e.e,e.f))}function MT(e,t,n,r){function o(l){return l.length?l.pop()+" ":""}function a(l,u,d,f,h,g){if(l!==d||u!==f){var m=h.push("translate(",null,t,null,n);g.push({i:m-4,x:yr(l,d)},{i:m-2,x:yr(u,f)})}else(d||f)&&h.push("translate("+d+t+f+n)}function i(l,u,d,f){l!==u?(l-u>180?u+=360:u-l>180&&(l+=360),f.push({i:d.push(o(d)+"rotate(",null,r)-2,x:yr(l,u)})):u&&d.push(o(d)+"rotate("+u+r)}function s(l,u,d,f){l!==u?f.push({i:d.push(o(d)+"skewX(",null,r)-2,x:yr(l,u)}):u&&d.push(o(d)+"skewX("+u+r)}function c(l,u,d,f,h,g){if(l!==d||u!==f){var m=h.push(o(h)+"scale(",null,",",null,")");g.push({i:m-4,x:yr(l,d)},{i:m-2,x:yr(u,f)})}else(d!==1||f!==1)&&h.push(o(h)+"scale("+d+","+f+")")}return function(l,u){var d=[],f=[];return l=e(l),u=e(u),a(l.translateX,l.translateY,u.translateX,u.translateY,d,f),i(l.rotate,u.rotate,d,f),s(l.skewX,u.skewX,d,f),c(l.scaleX,l.scaleY,u.scaleX,u.scaleY,d,f),l=u=null,function(h){for(var g=-1,m=f.length,v;++g<m;)d[(v=f[g]).i]=v.x(h);return d.join("")}}}var OZ=MT(SZ,"px, ","px)","deg)"),NZ=MT(CZ,", ",")",")"),MZ=1e-12;function kT(e){return((e=Math.exp(e))+1/e)/2}function kZ(e){return((e=Math.exp(e))-1/e)/2}function PZ(e){return((e=Math.exp(2*e))-1)/(e+1)}const AZ=function e(t,n,r){function o(a,i){var s=a[0],c=a[1],l=a[2],u=i[0],d=i[1],f=i[2],h=u-s,g=d-c,m=h*h+g*g,v,b;if(m<MZ)b=Math.log(f/l)/t,v=function(S){return[s+S*h,c+S*g,l*Math.exp(t*S*b)]};else{var x=Math.sqrt(m),_=(f*f-l*l+r*m)/(2*l*n*x),w=(f*f-l*l-r*m)/(2*f*n*x),j=Math.log(Math.sqrt(_*_+1)-_),E=Math.log(Math.sqrt(w*w+1)-w);b=(E-j)/t,v=function(S){var C=S*b,M=kT(j),N=l/(n*x)*(M*PZ(t*C+j)-kZ(j));return[s+N*h,c+N*g,l*M/kT(t*C+j)]}}return v.duration=b*1e3*t/Math.SQRT2,v}return o.rho=function(a){var i=Math.max(.001,+a),s=i*i,c=s*s;return e(i,s,c)},o}(Math.SQRT2,2,4);function TZ(e,t){t===void 0&&(t=e,e=Zi);for(var n=0,r=t.length-1,o=t[0],a=new Array(r<0?0:r);n<r;)a[n]=e(o,o=t[++n]);return function(i){var s=Math.max(0,Math.min(r-1,Math.floor(i*=r)));return a[s](i-s)}}var Gi=0,ml=0,yl=0,PT=1e3,Ef,gl,Sf=0,Ha=0,Cf=0,vl=typeof performance=="object"&&performance.now?performance:Date,AT=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Yb(){return Ha||(AT(RZ),Ha=vl.now()+Cf)}function RZ(){Ha=0}function Of(){this._call=this._time=this._next=null}Of.prototype=TT.prototype={constructor:Of,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Yb():+n)+(t==null?0:+t),!this._next&&gl!==this&&(gl?gl._next=this:Ef=this,gl=this),this._call=e,this._time=n,Kb()},stop:function(){this._call&&(this._call=null,this._time=1/0,Kb())}};function TT(e,t,n){var r=new Of;return r.restart(e,t,n),r}function IZ(){Yb(),++Gi;for(var e=Ef,t;e;)(t=Ha-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Gi}function RT(){Ha=(Sf=vl.now())+Cf,Gi=ml=0;try{IZ()}finally{Gi=0,LZ(),Ha=0}}function DZ(){var e=vl.now(),t=e-Sf;t>PT&&(Cf-=t,Sf=e)}function LZ(){for(var e,t=Ef,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Ef=n);gl=e,Kb(r)}function Kb(e){if(!Gi){ml&&(ml=clearTimeout(ml));var t=e-Ha;t>24?(e<1/0&&(ml=setTimeout(RT,e-vl.now()-Cf)),yl&&(yl=clearInterval(yl))):(yl||(Sf=vl.now(),yl=setInterval(DZ,PT)),Gi=1,AT(RT))}}function IT(e,t,n){var r=new Of;return t=t==null?0:+t,r.restart(o=>{r.stop(),e(o+t)},t,n),r}var FZ=pf("start","end","cancel","interrupt"),BZ=[],DT=0,LT=1,Xb=2,Nf=3,FT=4,Qb=5,Mf=6;function kf(e,t,n,r,o,a){var i=e.__transition;if(!i)e.__transition={};else if(n in i)return;$Z(e,n,{name:t,index:r,group:o,on:FZ,tween:BZ,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:DT})}function Jb(e,t){var n=gr(e,t);if(n.state>DT)throw new Error("too late; already scheduled");return n}function $r(e,t){var n=gr(e,t);if(n.state>Nf)throw new Error("too late; already running");return n}function gr(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function $Z(e,t,n){var r=e.__transition,o;r[t]=n,n.timer=TT(a,0,n.time);function a(l){n.state=LT,n.timer.restart(i,n.delay,n.time),n.delay<=l&&i(l-n.delay)}function i(l){var u,d,f,h;if(n.state!==LT)return c();for(u in r)if(h=r[u],h.name===n.name){if(h.state===Nf)return IT(i);h.state===FT?(h.state=Mf,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[u]):+u<t&&(h.state=Mf,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[u])}if(IT(function(){n.state===Nf&&(n.state=FT,n.timer.restart(s,n.delay,n.time),s(l))}),n.state=Xb,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Xb){for(n.state=Nf,o=new Array(f=n.tween.length),u=0,d=-1;u<f;++u)(h=n.tween[u].value.call(e,e.__data__,n.index,n.group))&&(o[++d]=h);o.length=d+1}}function s(l){for(var u=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(c),n.state=Qb,1),d=-1,f=o.length;++d<f;)o[d].call(e,u);n.state===Qb&&(n.on.call("end",e,e.__data__,n.index,n.group),c())}function c(){n.state=Mf,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function Pf(e,t){var n=e.__transition,r,o,a=!0,i;if(n){t=t==null?null:t+"";for(i in n){if((r=n[i]).name!==t){a=!1;continue}o=r.state>Xb&&r.state<Qb,r.state=Mf,r.timer.stop(),r.on.call(o?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[i]}a&&delete e.__transition}}function zZ(e){return this.each(function(){Pf(this,e)})}function VZ(e,t){var n,r;return function(){var o=$r(this,e),a=o.tween;if(a!==n){r=n=a;for(var i=0,s=r.length;i<s;++i)if(r[i].name===t){r=r.slice(),r.splice(i,1);break}}o.tween=r}}function UZ(e,t,n){var r,o;if(typeof n!="function")throw new Error;return function(){var a=$r(this,e),i=a.tween;if(i!==r){o=(r=i).slice();for(var s={name:t,value:n},c=0,l=o.length;c<l;++c)if(o[c].name===t){o[c]=s;break}c===l&&o.push(s)}a.tween=o}}function HZ(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=gr(this.node(),n).tween,o=0,a=r.length,i;o<a;++o)if((i=r[o]).name===e)return i.value;return null}return this.each((t==null?VZ:UZ)(n,e,t))}function Zb(e,t,n){var r=e._id;return e.each(function(){var o=$r(this,r);(o.value||(o.value={}))[t]=n.apply(this,arguments)}),function(o){return gr(o,r).value[t]}}function BT(e,t){var n;return(typeof t=="number"?yr:t instanceof za?_f:(n=za(t))?(t=n,_f):ST)(e,t)}function WZ(e){return function(){this.removeAttribute(e)}}function qZ(e){return function(){this.removeAttributeNS(e.space,e.local)}}function YZ(e,t,n){var r,o=n+"",a;return function(){var i=this.getAttribute(e);return i===o?null:i===r?a:a=t(r=i,n)}}function KZ(e,t,n){var r,o=n+"",a;return function(){var i=this.getAttributeNS(e.space,e.local);return i===o?null:i===r?a:a=t(r=i,n)}}function XZ(e,t,n){var r,o,a;return function(){var i,s=n(this),c;return s==null?void this.removeAttribute(e):(i=this.getAttribute(e),c=s+"",i===c?null:i===r&&c===o?a:(o=c,a=t(r=i,s)))}}function QZ(e,t,n){var r,o,a;return function(){var i,s=n(this),c;return s==null?void this.removeAttributeNS(e.space,e.local):(i=this.getAttributeNS(e.space,e.local),c=s+"",i===c?null:i===r&&c===o?a:(o=c,a=t(r=i,s)))}}function JZ(e,t){var n=mf(e),r=n==="transform"?NZ:BT;return this.attrTween(e,typeof t=="function"?(n.local?QZ:XZ)(n,r,Zb(this,"attr."+e,t)):t==null?(n.local?qZ:WZ)(n):(n.local?KZ:YZ)(n,r,t))}function ZZ(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function GZ(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function eG(e,t){var n,r;function o(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&GZ(e,a)),n}return o._value=t,o}function tG(e,t){var n,r;function o(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&ZZ(e,a)),n}return o._value=t,o}function nG(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=mf(e);return this.tween(n,(r.local?eG:tG)(r,t))}function rG(e,t){return function(){Jb(this,e).delay=+t.apply(this,arguments)}}function oG(e,t){return t=+t,function(){Jb(this,e).delay=t}}function aG(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?rG:oG)(t,e)):gr(this.node(),t).delay}function iG(e,t){return function(){$r(this,e).duration=+t.apply(this,arguments)}}function sG(e,t){return t=+t,function(){$r(this,e).duration=t}}function cG(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?iG:sG)(t,e)):gr(this.node(),t).duration}function lG(e,t){if(typeof t!="function")throw new Error;return function(){$r(this,e).ease=t}}function uG(e){var t=this._id;return arguments.length?this.each(lG(t,e)):gr(this.node(),t).ease}function dG(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;$r(this,e).ease=n}}function fG(e){if(typeof e!="function")throw new Error;return this.each(dG(this._id,e))}function pG(e){typeof e!="function"&&(e=tT(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var a=t[o],i=a.length,s=r[o]=[],c,l=0;l<i;++l)(c=a[l])&&e.call(c,c.__data__,l,a)&&s.push(c);return new yo(r,this._parents,this._name,this._id)}function hG(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,o=n.length,a=Math.min(r,o),i=new Array(r),s=0;s<a;++s)for(var c=t[s],l=n[s],u=c.length,d=i[s]=new Array(u),f,h=0;h<u;++h)(f=c[h]||l[h])&&(d[h]=f);for(;s<r;++s)i[s]=t[s];return new yo(i,this._parents,this._name,this._id)}function mG(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function yG(e,t,n){var r,o,a=mG(t)?Jb:$r;return function(){var i=a(this,e),s=i.on;s!==r&&(o=(r=s).copy()).on(t,n),i.on=o}}function gG(e,t){var n=this._id;return arguments.length<2?gr(this.node(),n).on.on(e):this.each(yG(n,e,t))}function vG(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function bG(){return this.on("end.remove",vG(this._id))}function xG(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Db(e));for(var r=this._groups,o=r.length,a=new Array(o),i=0;i<o;++i)for(var s=r[i],c=s.length,l=a[i]=new Array(c),u,d,f=0;f<c;++f)(u=s[f])&&(d=e.call(u,u.__data__,f,s))&&("__data__"in u&&(d.__data__=u.__data__),l[f]=d,kf(l[f],t,n,f,l,gr(u,n)));return new yo(a,this._parents,t,n)}function wG(e){var t=this._name,n=this._id;typeof e!="function"&&(e=eT(e));for(var r=this._groups,o=r.length,a=[],i=[],s=0;s<o;++s)for(var c=r[s],l=c.length,u,d=0;d<l;++d)if(u=c[d]){for(var f=e.call(u,u.__data__,d,c),h,g=gr(u,n),m=0,v=f.length;m<v;++m)(h=f[m])&&kf(h,t,n,m,f,g);a.push(f),i.push(u)}return new yo(a,i,t,n)}var _G=ul.prototype.constructor;function jG(){return new _G(this._groups,this._parents)}function EG(e,t){var n,r,o;return function(){var a=Xi(this,e),i=(this.style.removeProperty(e),Xi(this,e));return a===i?null:a===n&&i===r?o:o=t(n=a,r=i)}}function $T(e){return function(){this.style.removeProperty(e)}}function SG(e,t,n){var r,o=n+"",a;return function(){var i=Xi(this,e);return i===o?null:i===r?a:a=t(r=i,n)}}function CG(e,t,n){var r,o,a;return function(){var i=Xi(this,e),s=n(this),c=s+"";return s==null&&(c=s=(this.style.removeProperty(e),Xi(this,e))),i===c?null:i===r&&c===o?a:(o=c,a=t(r=i,s))}}function OG(e,t){var n,r,o,a="style."+t,i="end."+a,s;return function(){var c=$r(this,e),l=c.on,u=c.value[a]==null?s||(s=$T(t)):void 0;(l!==n||o!==u)&&(r=(n=l).copy()).on(i,o=u),c.on=r}}function NG(e,t,n){var r=(e+="")=="transform"?OZ:BT;return t==null?this.styleTween(e,EG(e,r)).on("end.style."+e,$T(e)):typeof t=="function"?this.styleTween(e,CG(e,r,Zb(this,"style."+e,t))).each(OG(this._id,e)):this.styleTween(e,SG(e,r,t),n).on("end.style."+e,null)}function MG(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function kG(e,t,n){var r,o;function a(){var i=t.apply(this,arguments);return i!==o&&(r=(o=i)&&MG(e,i,n)),r}return a._value=t,a}function PG(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,kG(e,t,n??""))}function AG(e){return function(){this.textContent=e}}function TG(e){return function(){var t=e(this);this.textContent=t??""}}function RG(e){return this.tween("text",typeof e=="function"?TG(Zb(this,"text",e)):AG(e==null?"":e+""))}function IG(e){return function(t){this.textContent=e.call(this,t)}}function DG(e){var t,n;function r(){var o=e.apply(this,arguments);return o!==n&&(t=(n=o)&&IG(o)),t}return r._value=e,r}function LG(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,DG(e))}function FG(){for(var e=this._name,t=this._id,n=zT(),r=this._groups,o=r.length,a=0;a<o;++a)for(var i=r[a],s=i.length,c,l=0;l<s;++l)if(c=i[l]){var u=gr(c,t);kf(c,e,n,l,i,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new yo(r,this._parents,e,n)}function BG(){var e,t,n=this,r=n._id,o=n.size();return new Promise(function(a,i){var s={value:i},c={value:function(){--o===0&&a()}};n.each(function(){var l=$r(this,r),u=l.on;u!==e&&(t=(e=u).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(c)),l.on=t}),o===0&&a()})}var $G=0;function yo(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function zT(){return++$G}var go=ul.prototype;yo.prototype={constructor:yo,select:xG,selectAll:wG,selectChild:go.selectChild,selectChildren:go.selectChildren,filter:pG,merge:hG,selection:jG,transition:FG,call:go.call,nodes:go.nodes,node:go.node,size:go.size,empty:go.empty,each:go.each,on:gG,attr:JZ,attrTween:nG,style:NG,styleTween:PG,text:RG,textTween:LG,remove:bG,tween:HZ,delay:aG,duration:cG,ease:uG,easeVarying:fG,end:BG,[Symbol.iterator]:go[Symbol.iterator]};function zG(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var VG={time:null,delay:0,duration:250,ease:zG};function UG(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function HG(e){var t,n;e instanceof yo?(t=e._id,e=e._name):(t=zT(),(n=VG).time=Yb(),e=e==null?null:e+"");for(var r=this._groups,o=r.length,a=0;a<o;++a)for(var i=r[a],s=i.length,c,l=0;l<s;++l)(c=i[l])&&kf(c,e,t,l,i,n||UG(c,t));return new yo(r,this._parents,e,t)}ul.prototype.interrupt=zZ,ul.prototype.transition=HG;const Af=e=>()=>e;function WG(e,{sourceEvent:t,target:n,transform:r,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:o}})}function vo(e,t,n){this.k=e,this.x=t,this.y=n}vo.prototype={constructor:vo,scale:function(e){return e===1?this:new vo(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new vo(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Tf=new vo(1,0,0);VT.prototype=vo.prototype;function VT(e){for(;!e.__zoom;)if(!(e=e.parentNode))return Tf;return e.__zoom}function Gb(e){e.stopImmediatePropagation()}function bl(e){e.preventDefault(),e.stopImmediatePropagation()}function qG(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function YG(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function UT(){return this.__zoom||Tf}function KG(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function XG(){return navigator.maxTouchPoints||"ontouchstart"in this}function QG(e,t,n){var r=e.invertX(t[0][0])-n[0][0],o=e.invertX(t[1][0])-n[1][0],a=e.invertY(t[0][1])-n[0][1],i=e.invertY(t[1][1])-n[1][1];return e.translate(o>r?(r+o)/2:Math.min(0,r)||Math.max(0,o),i>a?(a+i)/2:Math.min(0,a)||Math.max(0,i))}function HT(){var e=qG,t=YG,n=QG,r=KG,o=XG,a=[0,1/0],i=[[-1/0,-1/0],[1/0,1/0]],s=250,c=AZ,l=pf("start","zoom","end"),u,d,f,h=500,g=150,m=0,v=10;function b(O){O.property("__zoom",UT).on("wheel.zoom",C,{passive:!1}).on("mousedown.zoom",M).on("dblclick.zoom",N).filter(o).on("touchstart.zoom",P).on("touchmove.zoom",R).on("touchend.zoom touchcancel.zoom",A).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}b.transform=function(O,k,T,D){var I=O.selection?O.selection():O;I.property("__zoom",UT),O!==I?j(O,k,T,D):I.interrupt().each(function(){E(this,arguments).event(D).start().zoom(null,typeof k=="function"?k.apply(this,arguments):k).end()})},b.scaleBy=function(O,k,T,D){b.scaleTo(O,function(){var I=this.__zoom.k,L=typeof k=="function"?k.apply(this,arguments):k;return I*L},T,D)},b.scaleTo=function(O,k,T,D){b.transform(O,function(){var I=t.apply(this,arguments),L=this.__zoom,B=T==null?w(I):typeof T=="function"?T.apply(this,arguments):T,V=L.invert(B),F=typeof k=="function"?k.apply(this,arguments):k;return n(_(x(L,F),B,V),I,i)},T,D)},b.translateBy=function(O,k,T,D){b.transform(O,function(){return n(this.__zoom.translate(typeof k=="function"?k.apply(this,arguments):k,typeof T=="function"?T.apply(this,arguments):T),t.apply(this,arguments),i)},null,D)},b.translateTo=function(O,k,T,D,I){b.transform(O,function(){var L=t.apply(this,arguments),B=this.__zoom,V=D==null?w(L):typeof D=="function"?D.apply(this,arguments):D;return n(Tf.translate(V[0],V[1]).scale(B.k).translate(typeof k=="function"?-k.apply(this,arguments):-k,typeof T=="function"?-T.apply(this,arguments):-T),L,i)},D,I)};function x(O,k){return k=Math.max(a[0],Math.min(a[1],k)),k===O.k?O:new vo(k,O.x,O.y)}function _(O,k,T){var D=k[0]-T[0]*O.k,I=k[1]-T[1]*O.k;return D===O.x&&I===O.y?O:new vo(O.k,D,I)}function w(O){return[(+O[0][0]+ +O[1][0])/2,(+O[0][1]+ +O[1][1])/2]}function j(O,k,T,D){O.on("start.zoom",function(){E(this,arguments).event(D).start()}).on("interrupt.zoom end.zoom",function(){E(this,arguments).event(D).end()}).tween("zoom",function(){var I=this,L=arguments,B=E(I,L).event(D),V=t.apply(I,L),F=T==null?w(V):typeof T=="function"?T.apply(I,L):T,H=Math.max(V[1][0]-V[0][0],V[1][1]-V[0][1]),Q=I.__zoom,Y=typeof k=="function"?k.apply(I,L):k,re=c(Q.invert(F).concat(H/Q.k),Y.invert(F).concat(H/Y.k));return function(G){if(G===1)G=Y;else{var q=re(G),W=H/q[2];G=new vo(W,F[0]-q[0]*W,F[1]-q[1]*W)}B.zoom(null,G)}})}function E(O,k,T){return!T&&O.__zooming||new S(O,k)}function S(O,k){this.that=O,this.args=k,this.active=0,this.sourceEvent=null,this.extent=t.apply(O,k),this.taps=0}S.prototype={event:function(O){return O&&(this.sourceEvent=O),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(O,k){return this.mouse&&O!=="mouse"&&(this.mouse[1]=k.invert(this.mouse[0])),this.touch0&&O!=="touch"&&(this.touch0[1]=k.invert(this.touch0[0])),this.touch1&&O!=="touch"&&(this.touch1[1]=k.invert(this.touch1[0])),this.that.__zoom=k,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(O){var k=Bn(this.that).datum();l.call(O,this.that,new WG(O,{sourceEvent:this.sourceEvent,target:b,type:O,transform:this.that.__zoom,dispatch:l}),k)}};function C(O,...k){if(!e.apply(this,arguments))return;var T=E(this,k).event(O),D=this.__zoom,I=Math.max(a[0],Math.min(a[1],D.k*Math.pow(2,r.apply(this,arguments)))),L=hr(O);if(T.wheel)(T.mouse[0][0]!==L[0]||T.mouse[0][1]!==L[1])&&(T.mouse[1]=D.invert(T.mouse[0]=L)),clearTimeout(T.wheel);else{if(D.k===I)return;T.mouse=[L,D.invert(L)],Pf(this),T.start()}bl(O),T.wheel=setTimeout(B,g),T.zoom("mouse",n(_(x(D,I),T.mouse[0],T.mouse[1]),T.extent,i));function B(){T.wheel=null,T.end()}}function M(O,...k){if(f||!e.apply(this,arguments))return;var T=O.currentTarget,D=E(this,k,!0).event(O),I=Bn(O.view).on("mousemove.zoom",F,!0).on("mouseup.zoom",H,!0),L=hr(O,T),B=O.clientX,V=O.clientY;dT(O.view),Gb(O),D.mouse=[L,this.__zoom.invert(L)],Pf(this),D.start();function F(Q){if(bl(Q),!D.moved){var Y=Q.clientX-B,re=Q.clientY-V;D.moved=Y*Y+re*re>m}D.event(Q).zoom("mouse",n(_(D.that.__zoom,D.mouse[0]=hr(Q,T),D.mouse[1]),D.extent,i))}function H(Q){I.on("mousemove.zoom mouseup.zoom",null),fT(Q.view,D.moved),bl(Q),D.event(Q).end()}}function N(O,...k){if(e.apply(this,arguments)){var T=this.__zoom,D=hr(O.changedTouches?O.changedTouches[0]:O,this),I=T.invert(D),L=T.k*(O.shiftKey?.5:2),B=n(_(x(T,L),D,I),t.apply(this,k),i);bl(O),s>0?Bn(this).transition().duration(s).call(j,B,D,O):Bn(this).call(b.transform,B,D,O)}}function P(O,...k){if(e.apply(this,arguments)){var T=O.touches,D=T.length,I=E(this,k,O.changedTouches.length===D).event(O),L,B,V,F;for(Gb(O),B=0;B<D;++B)V=T[B],F=hr(V,this),F=[F,this.__zoom.invert(F),V.identifier],I.touch0?!I.touch1&&I.touch0[2]!==F[2]&&(I.touch1=F,I.taps=0):(I.touch0=F,L=!0,I.taps=1+!!u);u&&(u=clearTimeout(u)),L&&(I.taps<2&&(d=F[0],u=setTimeout(function(){u=null},h)),Pf(this),I.start())}}function R(O,...k){if(this.__zooming){var T=E(this,k).event(O),D=O.changedTouches,I=D.length,L,B,V,F;for(bl(O),L=0;L<I;++L)B=D[L],V=hr(B,this),T.touch0&&T.touch0[2]===B.identifier?T.touch0[0]=V:T.touch1&&T.touch1[2]===B.identifier&&(T.touch1[0]=V);if(B=T.that.__zoom,T.touch1){var H=T.touch0[0],Q=T.touch0[1],Y=T.touch1[0],re=T.touch1[1],G=(G=Y[0]-H[0])*G+(G=Y[1]-H[1])*G,q=(q=re[0]-Q[0])*q+(q=re[1]-Q[1])*q;B=x(B,Math.sqrt(G/q)),V=[(H[0]+Y[0])/2,(H[1]+Y[1])/2],F=[(Q[0]+re[0])/2,(Q[1]+re[1])/2]}else if(T.touch0)V=T.touch0[0],F=T.touch0[1];else return;T.zoom("touch",n(_(B,V,F),T.extent,i))}}function A(O,...k){if(this.__zooming){var T=E(this,k).event(O),D=O.changedTouches,I=D.length,L,B;for(Gb(O),f&&clearTimeout(f),f=setTimeout(function(){f=null},h),L=0;L<I;++L)B=D[L],T.touch0&&T.touch0[2]===B.identifier?delete T.touch0:T.touch1&&T.touch1[2]===B.identifier&&delete T.touch1;if(T.touch1&&!T.touch0&&(T.touch0=T.touch1,delete T.touch1),T.touch0)T.touch0[1]=this.__zoom.invert(T.touch0[0]);else if(T.end(),T.taps===2&&(B=hr(B,this),Math.hypot(d[0]-B[0],d[1]-B[1])<v)){var V=Bn(this).on("dblclick.zoom");V&&V.apply(this,arguments)}}}return b.wheelDelta=function(O){return arguments.length?(r=typeof O=="function"?O:Af(+O),b):r},b.filter=function(O){return arguments.length?(e=typeof O=="function"?O:Af(!!O),b):e},b.touchable=function(O){return arguments.length?(o=typeof O=="function"?O:Af(!!O),b):o},b.extent=function(O){return arguments.length?(t=typeof O=="function"?O:Af([[+O[0][0],+O[0][1]],[+O[1][0],+O[1][1]]]),b):t},b.scaleExtent=function(O){return arguments.length?(a[0]=+O[0],a[1]=+O[1],b):[a[0],a[1]]},b.translateExtent=function(O){return arguments.length?(i[0][0]=+O[0][0],i[1][0]=+O[1][0],i[0][1]=+O[0][1],i[1][1]=+O[1][1],b):[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},b.constrain=function(O){return arguments.length?(n=O,b):n},b.duration=function(O){return arguments.length?(s=+O,b):s},b.interpolate=function(O){return arguments.length?(c=O,b):c},b.on=function(){var O=l.on.apply(l,arguments);return O===l?b:O},b.clickDistance=function(O){return arguments.length?(m=(O=+O)*O,b):Math.sqrt(m)},b.tapDistance=function(O){return arguments.length?(v=+O,b):v},b}const bo={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:n,targetHandle:r})=>`Couldn't create edge for ${e} handle id: "${e==="source"?n:r}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`},xl=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],WT=["Enter"," ","Escape"];var es;(function(e){e.Strict="strict",e.Loose="loose"})(es||(es={}));var ea;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(ea||(ea={}));var wl;(function(e){e.Partial="partial",e.Full="full"})(wl||(wl={}));const qT={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var ta;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(ta||(ta={}));var Rf;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(Rf||(Rf={}));var fe;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(fe||(fe={}));const YT={[fe.Left]:fe.Right,[fe.Right]:fe.Left,[fe.Top]:fe.Bottom,[fe.Bottom]:fe.Top};function JG(e,t){if(!e&&!t)return!0;if(!e||!t||e.size!==t.size)return!1;if(!e.size&&!t.size)return!0;for(const n of e.keys())if(!t.has(n))return!1;return!0}function KT(e,t,n){if(!n)return;const r=[];e.forEach((o,a)=>{t!=null&&t.has(a)||r.push(o)}),r.length&&n(r)}function XT(e){return e===null?null:e?"valid":"invalid"}const QT=e=>"id"in e&&"source"in e&&"target"in e,ZG=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),ex=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),_l=(e,t=[0,0])=>{const{width:n,height:r}=xo(e),o=e.origin??t,a=n*o[0],i=r*o[1];return{x:e.position.x-a,y:e.position.y-i}},GG=(e,t={nodeOrigin:[0,0],nodeLookup:void 0})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,o)=>{const a=typeof o=="string";let i=!t.nodeLookup&&!a?o:void 0;t.nodeLookup&&(i=a?t.nodeLookup.get(o):ex(o)?o:t.nodeLookup.get(o.id));const s=i?Lf(i,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return If(r,s)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Df(n)},jl=(e,t={})=>{if(e.size===0)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return e.forEach(r=>{if(t.filter===void 0||t.filter(r)){const o=Lf(r);n=If(n,o)}}),Df(n)},JT=(e,t,[n,r,o]=[0,0,1],a=!1,i=!1)=>{const s={...Sl(t,[n,r,o]),width:t.width/o,height:t.height/o},c=[];for(const l of e.values()){const{measured:u,selectable:d=!0,hidden:f=!1}=l;if(i&&!d||f)continue;const h=u.width??l.width??l.initialWidth??null,g=u.height??l.height??l.initialHeight??null,m=El(s,ns(l)),v=(h??0)*(g??0),b=a&&m>0;(!l.internals.handleBounds||b||m>=v||l.dragging)&&c.push(l)}return c},eee=(e,t)=>{const n=new Set;return e.forEach(r=>{n.add(r.id)}),t.filter(r=>n.has(r.source)||n.has(r.target))};function tx(e,t){const n=new Map,r=t!=null&&t.nodes?new Set(t.nodes.map(o=>o.id)):null;return e.forEach(o=>{o.measured.width&&o.measured.height&&(t!=null&&t.includeHiddenNodes||!o.hidden)&&(!r||r.has(o.id))&&n.set(o.id,o)}),n}async function nx({nodes:e,width:t,height:n,panZoom:r,minZoom:o,maxZoom:a},i){if(e.size===0)return Promise.resolve(!1);const s=jl(e),c=ox(s,t,n,(i==null?void 0:i.minZoom)??o,(i==null?void 0:i.maxZoom)??a,(i==null?void 0:i.padding)??.1);return await r.setViewport(c,{duration:i==null?void 0:i.duration}),Promise.resolve(!0)}function ZT({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:r=[0,0],nodeExtent:o,onError:a}){const i=n.get(e),s=i.parentId?n.get(i.parentId):void 0,{x:c,y:l}=s?s.internals.positionAbsolute:{x:0,y:0},u=i.origin??r;let d=o;if(i.extent==="parent"&&!i.expandParent)if(!s)a==null||a("005",bo.error005());else{const h=s.measured.width,g=s.measured.height;h&&g&&(d=[[c,l],[c+h,l+g]])}else s&&rs(i.extent)&&(d=[[i.extent[0][0]+c,i.extent[0][1]+l],[i.extent[1][0]+c,i.extent[1][1]+l]]);const f=rs(d)?Wa(t,d,i.measured):t;return{position:{x:f.x-c+i.measured.width*u[0],y:f.y-l+i.measured.height*u[1]},positionAbsolute:f}}async function tee({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:r,onBeforeDelete:o}){const a=new Set(e.map(d=>d.id)),i=[];for(const d of n){if(d.deletable===!1)continue;const f=a.has(d.id),h=!f&&d.parentId&&i.find(g=>g.id===d.parentId);(f||h)&&i.push(d)}const s=new Set(t.map(d=>d.id)),c=r.filter(d=>d.deletable!==!1),l=eee(i,c);for(const d of c)s.has(d.id)&&!l.find(f=>f.id===d.id)&&l.push(d);if(!o)return{edges:l,nodes:i};const u=await o({nodes:i,edges:l});return typeof u=="boolean"?u?{edges:l,nodes:i}:{edges:[],nodes:[]}:u}const ts=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),Wa=(e={x:0,y:0},t,n)=>({x:ts(e.x,t[0][0],t[1][0]-((n==null?void 0:n.width)??0)),y:ts(e.y,t[0][1],t[1][1]-((n==null?void 0:n.height)??0))});function GT(e,t,n){const{width:r,height:o}=xo(n),{x:a,y:i}=n.internals.positionAbsolute;return Wa(e,[[a,i],[a+r,i+o]],t)}const eR=(e,t,n)=>e<t?ts(Math.abs(e-t),1,t)/t:e>n?-ts(Math.abs(e-n),1,t)/t:0,tR=(e,t,n=15,r=40)=>{const o=eR(e.x,r,t.width-r)*n,a=eR(e.y,r,t.height-r)*n;return[o,a]},If=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),rx=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),Df=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),ns=(e,t=[0,0])=>{var o,a;const{x:n,y:r}=ex(e)?e.internals.positionAbsolute:_l(e,t);return{x:n,y:r,width:((o=e.measured)==null?void 0:o.width)??e.width??e.initialWidth??0,height:((a=e.measured)==null?void 0:a.height)??e.height??e.initialHeight??0}},Lf=(e,t=[0,0])=>{var o,a;const{x:n,y:r}=ex(e)?e.internals.positionAbsolute:_l(e,t);return{x:n,y:r,x2:n+(((o=e.measured)==null?void 0:o.width)??e.width??e.initialWidth??0),y2:r+(((a=e.measured)==null?void 0:a.height)??e.height??e.initialHeight??0)}},nR=(e,t)=>Df(If(rx(e),rx(t))),El=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},rR=e=>vr(e.width)&&vr(e.height)&&vr(e.x)&&vr(e.y),vr=e=>!isNaN(e)&&isFinite(e),nee=(e,t)=>{},Ff=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),Sl=({x:e,y:t},[n,r,o],a=!1,i=[1,1])=>{const s={x:(e-n)/o,y:(t-r)/o};return a?Ff(s,i):s},oR=({x:e,y:t},[n,r,o])=>({x:e*o+n,y:t*o+r}),ox=(e,t,n,r,o,a)=>{const i=t/(e.width*(1+a)),s=n/(e.height*(1+a)),c=Math.min(i,s),l=ts(c,r,o),u=e.x+e.width/2,d=e.y+e.height/2,f=t/2-u*l,h=n/2-d*l;return{x:f,y:h,zoom:l}},Bf=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function rs(e){return e!==void 0&&e!=="parent"}function xo(e){var t,n;return{width:((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth??0,height:((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight??0}}function aR(e){var t,n;return(((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth)!==void 0&&(((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight)!==void 0}function iR(e,t={width:0,height:0},n,r,o){const a={...e},i=r.get(n);if(i){const s=i.origin||o;a.x+=i.internals.positionAbsolute.x-(t.width??0)*s[0],a.y+=i.internals.positionAbsolute.y-(t.height??0)*s[1]}return a}function Cl(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:r,containerBounds:o}){const{x:a,y:i}=wo(e),s=Sl({x:a-((o==null?void 0:o.left)??0),y:i-((o==null?void 0:o.top)??0)},r),{x:c,y:l}=n?Ff(s,t):s;return{xSnapped:c,ySnapped:l,...s}}const $f=e=>({width:e.offsetWidth,height:e.offsetHeight}),sR=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},ree=["INPUT","SELECT","TEXTAREA"];function ax(e){var n,r;const t=((r=(n=e.composedPath)==null?void 0:n.call(e))==null?void 0:r[0])||e.target;return ree.includes(t==null?void 0:t.nodeName)||(t==null?void 0:t.hasAttribute("contenteditable"))||!!(t!=null&&t.closest(".nokey"))}const cR=e=>"clientX"in e,wo=(e,t)=>{var a,i;const n=cR(e),r=n?e.clientX:(a=e.touches)==null?void 0:a[0].clientX,o=n?e.clientY:(i=e.touches)==null?void 0:i[0].clientY;return{x:r-((t==null?void 0:t.left)??0),y:o-((t==null?void 0:t.top)??0)}},lR=(e,t,n,r,o)=>{const a=t.querySelectorAll(`.${e}`);return!a||!a.length?null:Array.from(a).map(i=>{const s=i.getBoundingClientRect();return{id:i.getAttribute("data-handleid"),type:e,nodeId:o,position:i.getAttribute("data-handlepos"),x:(s.left-n.left)/r,y:(s.top-n.top)/r,...$f(i)}})};function uR({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:o,sourceControlY:a,targetControlX:i,targetControlY:s}){const c=e*.125+o*.375+i*.375+n*.125,l=t*.125+a*.375+s*.375+r*.125,u=Math.abs(c-e),d=Math.abs(l-t);return[c,l,u,d]}function zf(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function dR({pos:e,x1:t,y1:n,x2:r,y2:o,c:a}){switch(e){case fe.Left:return[t-zf(t-r,a),n];case fe.Right:return[t+zf(r-t,a),n];case fe.Top:return[t,n-zf(n-o,a)];case fe.Bottom:return[t,n+zf(o-n,a)]}}function fR({sourceX:e,sourceY:t,sourcePosition:n=fe.Bottom,targetX:r,targetY:o,targetPosition:a=fe.Top,curvature:i=.25}){const[s,c]=dR({pos:n,x1:e,y1:t,x2:r,y2:o,c:i}),[l,u]=dR({pos:a,x1:r,y1:o,x2:e,y2:t,c:i}),[d,f,h,g]=uR({sourceX:e,sourceY:t,targetX:r,targetY:o,sourceControlX:s,sourceControlY:c,targetControlX:l,targetControlY:u});return[`M${e},${t} C${s},${c} ${l},${u} ${r},${o}`,d,f,h,g]}function pR({sourceX:e,sourceY:t,targetX:n,targetY:r}){const o=Math.abs(n-e)/2,a=n<e?n+o:n-o,i=Math.abs(r-t)/2,s=r<t?r+i:r-i;return[a,s,o,i]}function oee({sourceNode:e,targetNode:t,selected:n=!1,zIndex:r=0,elevateOnSelect:o=!1}){if(!o)return r;const a=n||t.selected||e.selected,i=Math.max(e.internals.z||0,t.internals.z||0,1e3);return r+(a?i:0)}function aee({sourceNode:e,targetNode:t,width:n,height:r,transform:o}){const a=If(Lf(e),Lf(t));a.x===a.x2&&(a.x2+=1),a.y===a.y2&&(a.y2+=1);const i={x:-o[0]/o[2],y:-o[1]/o[2],width:n/o[2],height:r/o[2]};return El(i,Df(a))>0}const iee=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`xy-edge__${e}${t||""}-${n}${r||""}`,see=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),hR=(e,t)=>{if(!e.source||!e.target)return t;let n;return QT(e)?n={...e}:n={...e,id:iee(e)},see(n,t)?t:(n.sourceHandle===null&&delete n.sourceHandle,n.targetHandle===null&&delete n.targetHandle,t.concat(n))};function mR({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[o,a,i,s]=pR({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,o,a,i,s]}const yR={[fe.Left]:{x:-1,y:0},[fe.Right]:{x:1,y:0},[fe.Top]:{x:0,y:-1},[fe.Bottom]:{x:0,y:1}},cee=({source:e,sourcePosition:t=fe.Bottom,target:n})=>t===fe.Left||t===fe.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},gR=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function lee({source:e,sourcePosition:t=fe.Bottom,target:n,targetPosition:r=fe.Top,center:o,offset:a}){const i=yR[t],s=yR[r],c={x:e.x+i.x*a,y:e.y+i.y*a},l={x:n.x+s.x*a,y:n.y+s.y*a},u=cee({source:c,sourcePosition:t,target:l}),d=u.x!==0?"x":"y",f=u[d];let h=[],g,m;const v={x:0,y:0},b={x:0,y:0},[x,_,w,j]=pR({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(i[d]*s[d]===-1){g=o.x??x,m=o.y??_;const E=[{x:g,y:c.y},{x:g,y:l.y}],S=[{x:c.x,y:m},{x:l.x,y:m}];i[d]===f?h=d==="x"?E:S:h=d==="x"?S:E}else{const E=[{x:c.x,y:l.y}],S=[{x:l.x,y:c.y}];if(d==="x"?h=i.x===f?S:E:h=i.y===f?E:S,t===r){const R=Math.abs(e[d]-n[d]);if(R<=a){const A=Math.min(a-1,a-R);i[d]===f?v[d]=(c[d]>e[d]?-1:1)*A:b[d]=(l[d]>n[d]?-1:1)*A}}if(t!==r){const R=d==="x"?"y":"x",A=i[d]===s[R],O=c[R]>l[R],k=c[R]<l[R];(i[d]===1&&(!A&&O||A&&k)||i[d]!==1&&(!A&&k||A&&O))&&(h=d==="x"?E:S)}const C={x:c.x+v.x,y:c.y+v.y},M={x:l.x+b.x,y:l.y+b.y},N=Math.max(Math.abs(C.x-h[0].x),Math.abs(M.x-h[0].x)),P=Math.max(Math.abs(C.y-h[0].y),Math.abs(M.y-h[0].y));N>=P?(g=(C.x+M.x)/2,m=h[0].y):(g=h[0].x,m=(C.y+M.y)/2)}return[[e,{x:c.x+v.x,y:c.y+v.y},...h,{x:l.x+b.x,y:l.y+b.y},n],g,m,w,j]}function uee(e,t,n,r){const o=Math.min(gR(e,t)/2,gR(t,n)/2,r),{x:a,y:i}=t;if(e.x===a&&a===n.x||e.y===i&&i===n.y)return`L${a} ${i}`;if(e.y===i){const l=e.x<n.x?-1:1,u=e.y<n.y?1:-1;return`L ${a+o*l},${i}Q ${a},${i} ${a},${i+o*u}`}const s=e.x<n.x?1:-1,c=e.y<n.y?-1:1;return`L ${a},${i+o*c}Q ${a},${i} ${a+o*s},${i}`}function ix({sourceX:e,sourceY:t,sourcePosition:n=fe.Bottom,targetX:r,targetY:o,targetPosition:a=fe.Top,borderRadius:i=5,centerX:s,centerY:c,offset:l=20}){const[u,d,f,h,g]=lee({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:o},targetPosition:a,center:{x:s,y:c},offset:l});return[u.reduce((m,v,b)=>{let x="";return b>0&&b<u.length-1?x=uee(u[b-1],v,u[b+1],i):x=`${b===0?"M":"L"}${v.x} ${v.y}`,m+=x,m},""),d,f,h,g]}function vR(e){var t;return e&&!!(e.internals.handleBounds||(t=e.handles)!=null&&t.length)&&!!(e.measured.width||e.width||e.initialWidth)}function dee(e){var d;const{sourceNode:t,targetNode:n}=e;if(!vR(t)||!vR(n))return null;const r=t.internals.handleBounds||bR(t.handles),o=n.internals.handleBounds||bR(n.handles),a=xR((r==null?void 0:r.source)??[],e.sourceHandle),i=xR(e.connectionMode===es.Strict?(o==null?void 0:o.target)??[]:((o==null?void 0:o.target)??[]).concat((o==null?void 0:o.source)??[]),e.targetHandle);if(!a||!i)return(d=e.onError)==null||d.call(e,"008",bo.error008(a?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const s=(a==null?void 0:a.position)||fe.Bottom,c=(i==null?void 0:i.position)||fe.Top,l=Ol(t,a,s),u=Ol(n,i,c);return{sourceX:l.x,sourceY:l.y,targetX:u.x,targetY:u.y,sourcePosition:s,targetPosition:c}}function bR(e){if(!e)return null;const t=[],n=[];for(const r of e)r.width=r.width??1,r.height=r.height??1,r.type==="source"?t.push(r):r.type==="target"&&n.push(r);return{source:t,target:n}}function Ol(e,t,n=fe.Left,r=!1){const o=((t==null?void 0:t.x)??0)+e.internals.positionAbsolute.x,a=((t==null?void 0:t.y)??0)+e.internals.positionAbsolute.y,{width:i,height:s}=t??xo(e);if(r)return{x:o+i/2,y:a+s/2};switch((t==null?void 0:t.position)??n){case fe.Top:return{x:o+i/2,y:a};case fe.Right:return{x:o+i,y:a+s/2};case fe.Bottom:return{x:o+i/2,y:a+s};case fe.Left:return{x:o,y:a+s/2}}}function xR(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function sx(e,t){return e?typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(n=>`${n}=${e[n]}`).join("&")}`:""}function fee(e,{id:t,defaultColor:n,defaultMarkerStart:r,defaultMarkerEnd:o}){const a=new Set;return e.reduce((i,s)=>([s.markerStart||r,s.markerEnd||o].forEach(c=>{if(c&&typeof c=="object"){const l=sx(c,t);a.has(l)||(i.push({id:l,color:c.color||n,...c}),a.add(l))}}),i),[]).sort((i,s)=>i.id.localeCompare(s.id))}const cx={nodeOrigin:[0,0],nodeExtent:xl,elevateNodesOnSelect:!0,defaults:{}},pee={...cx,checkEquality:!0};function lx(e,t){const n={...e};for(const r in t)t[r]!==void 0&&(n[r]=t[r]);return n}function hee(e,t,n){const r=lx(cx,n);for(const o of e.values())if(o.parentId)dx(o,e,t,r);else{const a=_l(o,r.nodeOrigin),i=rs(o.extent)?o.extent:r.nodeExtent,s=Wa(a,i,xo(o));o.internals.positionAbsolute=s}}function ux(e,t,n,r){var s,c;const o=lx(pee,r),a=new Map(t),i=o!=null&&o.elevateNodesOnSelect?1e3:0;t.clear(),n.clear();for(const l of e){let u=a.get(l.id);if(o.checkEquality&&l===(u==null?void 0:u.internals.userNode))t.set(l.id,u);else{const d=_l(l,o.nodeOrigin),f=rs(l.extent)?l.extent:o.nodeExtent,h=Wa(d,f,xo(l));u={...o.defaults,...l,measured:{width:(s=l.measured)==null?void 0:s.width,height:(c=l.measured)==null?void 0:c.height},internals:{positionAbsolute:h,handleBounds:l.measured?u==null?void 0:u.internals.handleBounds:void 0,z:wR(l,i),userNode:l}},t.set(l.id,u)}l.parentId&&dx(u,t,n,r)}}function mee(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function dx(e,t,n,r){const{elevateNodesOnSelect:o,nodeOrigin:a,nodeExtent:i}=lx(cx,r),s=e.parentId,c=t.get(s);if(!c){console.warn(`Parent node ${s} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}mee(e,n);const l=o?1e3:0,{x:u,y:d,z:f}=yee(e,c,a,i,l),{positionAbsolute:h}=e.internals,g=u!==h.x||d!==h.y;(g||f!==e.internals.z)&&(e.internals={...e.internals,positionAbsolute:g?{x:u,y:d}:h,z:f})}function wR(e,t){return(vr(e.zIndex)?e.zIndex:0)+(e.selected?t:0)}function yee(e,t,n,r,o){const{x:a,y:i}=t.internals.positionAbsolute,s=xo(e),c=_l(e,n),l=rs(e.extent)?Wa(c,e.extent,s):c;let u=Wa({x:a+l.x,y:i+l.y},r,s);e.extent==="parent"&&(u=GT(u,s,t));const d=wR(e,o),f=t.internals.z??0;return{x:u.x,y:u.y,z:f>d?f:d}}function fx(e,t,n,r=[0,0]){var i;const o=[],a=new Map;for(const s of e){const c=t.get(s.parentId);if(!c)continue;const l=((i=a.get(s.parentId))==null?void 0:i.expandedRect)??ns(c),u=nR(l,s.rect);a.set(s.parentId,{expandedRect:u,parent:c})}return a.size>0&&a.forEach(({expandedRect:s,parent:c},l)=>{var _;const u=c.internals.positionAbsolute,d=xo(c),f=c.origin??r,h=s.x<u.x?Math.round(Math.abs(u.x-s.x)):0,g=s.y<u.y?Math.round(Math.abs(u.y-s.y)):0,m=Math.max(d.width,Math.round(s.width)),v=Math.max(d.height,Math.round(s.height)),b=(m-d.width)*f[0],x=(v-d.height)*f[1];(h>0||g>0||b||x)&&(o.push({id:l,type:"position",position:{x:c.position.x-h+b,y:c.position.y-g+x}}),(_=n.get(l))==null||_.forEach(w=>{e.some(j=>j.id===w.id)||o.push({id:w.id,type:"position",position:{x:w.position.x+h,y:w.position.y+g}})})),(d.width<s.width||d.height<s.height||h||g)&&o.push({id:l,type:"dimensions",setAttributes:!0,dimensions:{width:m+(h?f[0]*h-b:0),height:v+(g?f[1]*g-x:0)}})}),o}function gee(e,t,n,r,o,a){const i=r==null?void 0:r.querySelector(".xyflow__viewport");let s=!1;if(!i)return{changes:[],updatedInternals:s};const c=[],l=window.getComputedStyle(i),{m22:u}=new window.DOMMatrixReadOnly(l.transform),d=[];for(const f of e.values()){const h=t.get(f.id);if(h)if(h.hidden)h.internals={...h.internals,handleBounds:void 0},s=!0;else{const g=$f(f.nodeElement),m=h.measured.width!==g.width||h.measured.height!==g.height;if(g.width&&g.height&&(m||!h.internals.handleBounds||f.force)){const v=f.nodeElement.getBoundingClientRect(),b=rs(h.extent)?h.extent:a;let{positionAbsolute:x}=h.internals;h.parentId&&h.extent==="parent"?x=GT(x,g,t.get(h.parentId)):b&&(x=Wa(x,b,g)),h.measured=g,h.internals={...h.internals,positionAbsolute:x,handleBounds:{source:lR("source",f.nodeElement,v,u,h.id),target:lR("target",f.nodeElement,v,u,h.id)}},h.parentId&&dx(h,t,n,{nodeOrigin:o}),s=!0,m&&(c.push({id:h.id,type:"dimensions",dimensions:g}),h.expandParent&&h.parentId&&d.push({id:h.id,parentId:h.parentId,rect:ns(h,o)}))}}}if(d.length>0){const f=fx(d,t,n,o);c.push(...f)}return{changes:c,updatedInternals:s}}async function vee({delta:e,panZoom:t,transform:n,translateExtent:r,width:o,height:a}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const i=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[o,a]],r),s=!!i&&(i.x!==n[0]||i.y!==n[1]||i.k!==n[2]);return Promise.resolve(s)}function _R(e,t,n){e.clear(),t.clear();for(const r of n){const{source:o,target:a,sourceHandle:i=null,targetHandle:s=null}=r,c=`${o}-source-${i}`,l=`${a}-target-${s}`,u=e.get(c)||new Map,d=e.get(l)||new Map,f={edgeId:r.id,source:o,target:a,sourceHandle:i,targetHandle:s};t.set(r.id,r),e.set(c,u.set(`${a}-${s}`,f)),e.set(l,d.set(`${o}-${i}`,f))}}function jR(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return n?n.selected?!0:jR(n,t):!1}function ER(e,t,n){let r=e;do{if(r!=null&&r.matches(t))return!0;if(r===n)return!1;r=r.parentElement}while(r);return!1}function bee(e,t,n,r){const o=new Map;for(const[a,i]of e)if((i.selected||i.id===r)&&(!i.parentId||!jR(i,e))&&(i.draggable||t&&typeof i.draggable>"u")){const s=e.get(a);s&&o.set(a,{id:a,position:s.position||{x:0,y:0},distance:{x:n.x-s.internals.positionAbsolute.x,y:n.y-s.internals.positionAbsolute.y},extent:s.extent,parentId:s.parentId,origin:s.origin,expandParent:s.expandParent,internals:{positionAbsolute:s.internals.positionAbsolute||{x:0,y:0}},measured:{width:s.measured.width??0,height:s.measured.height??0}})}return o}function px({nodeId:e,dragItems:t,nodeLookup:n,dragging:r=!0}){var i,s,c;const o=[];for(const[l,u]of t){const d=(i=n.get(l))==null?void 0:i.internals.userNode;d&&o.push({...d,position:u.position,dragging:r})}if(!e)return[o[0],o];const a=(s=n.get(e))==null?void 0:s.internals.userNode;return[a?{...a,position:((c=t.get(e))==null?void 0:c.position)||a.position,dragging:r}:o[0],o]}function xee({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:r,onDragStop:o}){let a={x:null,y:null},i=0,s=new Map,c=!1,l={x:0,y:0},u=null,d=!1,f=null,h=!1;function g({noDragClassName:v,handleSelector:b,domNode:x,isSelectable:_,nodeId:w,nodeClickDistance:j=0}){f=Bn(x);function E({x:N,y:P},R){const{nodeLookup:A,nodeExtent:O,snapGrid:k,snapToGrid:T,nodeOrigin:D,onNodeDrag:I,onSelectionDrag:L,onError:B,updateNodePositions:V}=t();a={x:N,y:P};let F=!1,H={x:0,y:0,x2:0,y2:0};if(s.size>1&&O){const Q=jl(s);H=rx(Q)}for(const[Q,Y]of s){if(!A.has(Q))continue;let re={x:N-Y.distance.x,y:P-Y.distance.y};T&&(re=Ff(re,k));let G=[[O[0][0],O[0][1]],[O[1][0],O[1][1]]];if(s.size>1&&O&&!Y.extent){const{positionAbsolute:Z}=Y.internals,ee=Z.x-H.x+O[0][0],$=Z.x+Y.measured.width-H.x2+O[1][0],ie=Z.y-H.y+O[0][1],ue=Z.y+Y.measured.height-H.y2+O[1][1];G=[[ee,ie],[$,ue]]}const{position:q,positionAbsolute:W}=ZT({nodeId:Q,nextPosition:re,nodeLookup:A,nodeExtent:G,nodeOrigin:D,onError:B});F=F||Y.position.x!==q.x||Y.position.y!==q.y,Y.position=q,Y.internals.positionAbsolute=W}if(F&&(V(s,!0),R&&(r||I||!w&&L))){const[Q,Y]=px({nodeId:w,dragItems:s,nodeLookup:A});r==null||r(R,s,Q,Y),I==null||I(R,Q,Y),w||(L==null||L(R,Y))}}async function S(){if(!u)return;const{transform:N,panBy:P,autoPanSpeed:R}=t(),[A,O]=tR(l,u,R);(A!==0||O!==0)&&(a.x=(a.x??0)-A/N[2],a.y=(a.y??0)-O/N[2],await P({x:A,y:O})&&E(a,null)),i=requestAnimationFrame(S)}function C(N){var F;const{nodeLookup:P,multiSelectionActive:R,nodesDraggable:A,transform:O,snapGrid:k,snapToGrid:T,selectNodesOnDrag:D,onNodeDragStart:I,onSelectionDragStart:L,unselectNodesAndEdges:B}=t();d=!0,(!D||!_)&&!R&&w&&((F=P.get(w))!=null&&F.selected||B()),_&&D&&w&&(e==null||e(w));const V=Cl(N.sourceEvent,{transform:O,snapGrid:k,snapToGrid:T,containerBounds:u});if(a=V,s=bee(P,A,V,w),s.size>0&&(n||I||!w&&L)){const[H,Q]=px({nodeId:w,dragItems:s,nodeLookup:P});n==null||n(N.sourceEvent,s,H,Q),I==null||I(N.sourceEvent,H,Q),w||(L==null||L(N.sourceEvent,Q))}}const M=pT().clickDistance(j).on("start",N=>{const{domNode:P,nodeDragThreshold:R,transform:A,snapGrid:O,snapToGrid:k}=t();u=(P==null?void 0:P.getBoundingClientRect())||null,h=!1,R===0&&C(N),a=Cl(N.sourceEvent,{transform:A,snapGrid:O,snapToGrid:k,containerBounds:u}),l=wo(N.sourceEvent,u)}).on("drag",N=>{const{autoPanOnNodeDrag:P,transform:R,snapGrid:A,snapToGrid:O,nodeDragThreshold:k,nodeLookup:T}=t(),D=Cl(N.sourceEvent,{transform:R,snapGrid:A,snapToGrid:O,containerBounds:u});if((N.sourceEvent.type==="touchmove"&&N.sourceEvent.touches.length>1||w&&!T.has(w))&&(h=!0),!h){if(!c&&P&&d&&(c=!0,S()),!d){const I=D.xSnapped-(a.x??0),L=D.ySnapped-(a.y??0);Math.sqrt(I*I+L*L)>k&&C(N)}(a.x!==D.xSnapped||a.y!==D.ySnapped)&&s&&d&&(l=wo(N.sourceEvent,u),E(D,N.sourceEvent))}}).on("end",N=>{if(!(!d||h)&&(c=!1,d=!1,cancelAnimationFrame(i),s.size>0)){const{nodeLookup:P,updateNodePositions:R,onNodeDragStop:A,onSelectionDragStop:O}=t();if(R(s,!1),o||A||!w&&O){const[k,T]=px({nodeId:w,dragItems:s,nodeLookup:P,dragging:!1});o==null||o(N.sourceEvent,s,k,T),A==null||A(N.sourceEvent,k,T),w||(O==null||O(N.sourceEvent,T))}}}).filter(N=>{const P=N.target;return!N.button&&(!v||!ER(P,`.${v}`,x))&&(!b||ER(P,b,x))});f.call(M)}function m(){f==null||f.on(".drag",null)}return{update:g,destroy:m}}function wee(e,t,n){const r=[],o={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const a of t.values())El(o,ns(a))>0&&r.push(a);return r}const _ee=250;function jee(e,t,n,r){var s,c;let o=[],a=1/0;const i=wee(e,n,t+_ee);for(const l of i){const u=[...((s=l.internals.handleBounds)==null?void 0:s.source)??[],...((c=l.internals.handleBounds)==null?void 0:c.target)??[]];for(const d of u){if(r.nodeId===d.nodeId&&r.type===d.type&&r.id===d.id)continue;const{x:f,y:h}=Ol(l,d,d.position,!0),g=Math.sqrt(Math.pow(f-e.x,2)+Math.pow(h-e.y,2));g>t||(g<a?(o=[{...d,x:f,y:h}],a=g):g===a&&o.push({...d,x:f,y:h}))}}if(!o.length)return null;if(o.length>1){const l=r.type==="source"?"target":"source";return o.find(u=>u.type===l)??o[0]}return o[0]}function SR(e,t,n,r,o,a=!1){var l,u,d;const i=r.get(e);if(!i)return null;const s=o==="strict"?(l=i.internals.handleBounds)==null?void 0:l[t]:[...((u=i.internals.handleBounds)==null?void 0:u.source)??[],...((d=i.internals.handleBounds)==null?void 0:d.target)??[]],c=(n?s==null?void 0:s.find(f=>f.id===n):s==null?void 0:s[0])??null;return c&&a?{...c,...Ol(i,c,c.position,!0)}:c}function CR(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function Eee(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}const OR=()=>!0;function See(e,{connectionMode:t,connectionRadius:n,handleId:r,nodeId:o,edgeUpdaterType:a,isTarget:i,domNode:s,nodeLookup:c,lib:l,autoPanOnConnect:u,flowId:d,panBy:f,cancelConnection:h,onConnectStart:g,onConnect:m,onConnectEnd:v,isValidConnection:b=OR,onReconnectEnd:x,updateConnection:_,getTransform:w,getFromHandle:j,autoPanSpeed:E}){const S=sR(e.target);let C=0,M;const{x:N,y:P}=wo(e),R=S==null?void 0:S.elementFromPoint(N,P),A=CR(a,R),O=s==null?void 0:s.getBoundingClientRect();if(!O||!A)return;const k=SR(o,A,r,c,t);if(!k)return;let T=wo(e,O),D=!1,I=null,L=!1,B=null;function V(){if(!u||!O)return;const[q,W]=tR(T,O,E);f({x:q,y:W}),C=requestAnimationFrame(V)}const F={...k,nodeId:o,type:A,position:k.position},H=c.get(o),Q={inProgress:!0,isValid:null,from:Ol(H,F,fe.Left,!0),fromHandle:F,fromPosition:F.position,fromNode:H,to:T,toHandle:null,toPosition:YT[F.position],toNode:null};_(Q);let Y=Q;g==null||g(e,{nodeId:o,handleId:r,handleType:A});function re(q){if(!j()||!F){G(q);return}const W=w();T=wo(q,O),M=jee(Sl(T,W,!1,[1,1]),n,c,F),D||(V(),D=!0);const Z=NR(q,{handle:M,connectionMode:t,fromNodeId:o,fromHandleId:r,fromType:i?"target":"source",isValidConnection:b,doc:S,lib:l,flowId:d,nodeLookup:c});B=Z.handleDomNode,I=Z.connection,L=Eee(!!M,Z.isValid);const ee={...Y,isValid:L,to:M&&L?oR({x:M.x,y:M.y},W):T,toHandle:Z.toHandle,toPosition:L&&Z.toHandle?Z.toHandle.position:YT[F.position],toNode:Z.toHandle?c.get(Z.toHandle.nodeId):null};L&&M&&Y.toHandle&&ee.toHandle&&Y.toHandle.type===ee.toHandle.type&&Y.toHandle.nodeId===ee.toHandle.nodeId&&Y.toHandle.id===ee.toHandle.id&&Y.to.x===ee.to.x&&Y.to.y===ee.to.y||(_(ee),Y=ee)}function G(q){(M||B)&&I&&L&&(m==null||m(I));const{inProgress:W,...Z}=Y,ee={...Z,toPosition:Y.toHandle?Y.toPosition:null};v==null||v(q,ee),a&&(x==null||x(q,ee)),h(),cancelAnimationFrame(C),D=!1,L=!1,I=null,B=null,S.removeEventListener("mousemove",re),S.removeEventListener("mouseup",G),S.removeEventListener("touchmove",re),S.removeEventListener("touchend",G)}S.addEventListener("mousemove",re),S.addEventListener("mouseup",G),S.addEventListener("touchmove",re),S.addEventListener("touchend",G)}function NR(e,{handle:t,connectionMode:n,fromNodeId:r,fromHandleId:o,fromType:a,doc:i,lib:s,flowId:c,isValidConnection:l=OR,nodeLookup:u}){const d=a==="target",f=t?i.querySelector(`.${s}-flow__handle[data-id="${c}-${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`):null,{x:h,y:g}=wo(e),m=i.elementFromPoint(h,g),v=m!=null&&m.classList.contains(`${s}-flow__handle`)?m:f,b={handleDomNode:v,isValid:!1,connection:null,toHandle:null};if(v){const x=CR(void 0,v),_=v.getAttribute("data-nodeid"),w=v.getAttribute("data-handleid"),j=v.classList.contains("connectable"),E=v.classList.contains("connectableend");if(!_||!x)return b;const S={source:d?_:r,sourceHandle:d?w:o,target:d?r:_,targetHandle:d?o:w};b.connection=S;const C=j&&E&&(n===es.Strict?d&&x==="source"||!d&&x==="target":_!==r||w!==o);b.isValid=C&&l(S),b.toHandle=SR(_,x,w,u,n,!1)}return b}const hx={onPointerDown:See,isValid:NR};function Cee({domNode:e,panZoom:t,getTransform:n,getViewScale:r}){const o=Bn(e);function a({translateExtent:s,width:c,height:l,zoomStep:u=10,pannable:d=!0,zoomable:f=!0,inversePan:h=!1}){const g=_=>{const w=n();if(_.sourceEvent.type!=="wheel"||!t)return;const j=-_.sourceEvent.deltaY*(_.sourceEvent.deltaMode===1?.05:_.sourceEvent.deltaMode?1:.002)*u,E=w[2]*Math.pow(2,j);t.scaleTo(E)};let m=[0,0];const v=_=>{(_.sourceEvent.type==="mousedown"||_.sourceEvent.type==="touchstart")&&(m=[_.sourceEvent.clientX??_.sourceEvent.touches[0].clientX,_.sourceEvent.clientY??_.sourceEvent.touches[0].clientY])},b=_=>{const w=n();if(_.sourceEvent.type!=="mousemove"&&_.sourceEvent.type!=="touchmove"||!t)return;const j=[_.sourceEvent.clientX??_.sourceEvent.touches[0].clientX,_.sourceEvent.clientY??_.sourceEvent.touches[0].clientY],E=[j[0]-m[0],j[1]-m[1]];m=j;const S=r()*Math.max(w[2],Math.log(w[2]))*(h?-1:1),C={x:w[0]-E[0]*S,y:w[1]-E[1]*S},M=[[0,0],[c,l]];t.setViewportConstrained({x:C.x,y:C.y,zoom:w[2]},M,s)},x=HT().on("start",v).on("zoom",d?b:null).on("zoom.wheel",f?g:null);o.call(x,{})}function i(){o.on("zoom",null)}return{update:a,destroy:i,pointer:hr}}const Oee=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,Vf=e=>({x:e.x,y:e.y,zoom:e.k}),mx=({x:e,y:t,zoom:n})=>Tf.translate(e,t).scale(n),os=(e,t)=>e.target.closest(`.${t}`),MR=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),yx=(e,t=0,n=()=>{})=>{const r=typeof t=="number"&&t>0;return r||n(),r?e.transition().duration(t).on("end",n):e},kR=e=>{const t=e.ctrlKey&&Bf()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function Nee({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:r,panOnScrollMode:o,panOnScrollSpeed:a,zoomOnPinch:i,onPanZoomStart:s,onPanZoom:c,onPanZoomEnd:l}){return u=>{if(os(u,t))return!1;u.preventDefault(),u.stopImmediatePropagation();const d=n.property("__zoom").k||1;if(u.ctrlKey&&i){const v=hr(u),b=kR(u),x=d*Math.pow(2,b);r.scaleTo(n,x,v,u);return}const f=u.deltaMode===1?20:1;let h=o===ea.Vertical?0:u.deltaX*f,g=o===ea.Horizontal?0:u.deltaY*f;!Bf()&&u.shiftKey&&o!==ea.Vertical&&(h=u.deltaY*f,g=0),r.translateBy(n,-(h/d)*a,-(g/d)*a,{internal:!0});const m=Vf(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling||(e.isPanScrolling=!0,s==null||s(u,m)),e.isPanScrolling&&(c==null||c(u,m),e.panScrollTimeout=setTimeout(()=>{l==null||l(u,m),e.isPanScrolling=!1},150))}}function Mee({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(r,o){if(!t&&r.type==="wheel"&&!r.ctrlKey||os(r,e))return null;r.preventDefault(),n.call(this,r,o)}}function kee({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return r=>{var a,i,s;if((a=r.sourceEvent)!=null&&a.internal)return;const o=Vf(r.transform);e.mouseButton=((i=r.sourceEvent)==null?void 0:i.button)||0,e.isZoomingOrPanning=!0,e.prevViewport=o,((s=r.sourceEvent)==null?void 0:s.type)==="mousedown"&&t(!0),n&&(n==null||n(r.sourceEvent,o))}}function Pee({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:r,onPanZoom:o}){return a=>{var i,s;e.usedRightMouseButton=!!(n&&MR(t,e.mouseButton??0)),(i=a.sourceEvent)!=null&&i.sync||r([a.transform.x,a.transform.y,a.transform.k]),o&&!((s=a.sourceEvent)!=null&&s.internal)&&(o==null||o(a.sourceEvent,Vf(a.transform)))}}function Aee({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:r,onPanZoomEnd:o,onPaneContextMenu:a}){return i=>{var s;if(!((s=i.sourceEvent)!=null&&s.internal)&&(e.isZoomingOrPanning=!1,a&&MR(t,e.mouseButton??0)&&!e.usedRightMouseButton&&i.sourceEvent&&a(i.sourceEvent),e.usedRightMouseButton=!1,r(!1),o&&Oee(e.prevViewport,i.transform))){const c=Vf(i.transform);e.prevViewport=c,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{o==null||o(i.sourceEvent,c)},n?150:0)}}}function Tee({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:r,panOnScroll:o,zoomOnDoubleClick:a,userSelectionActive:i,noWheelClassName:s,noPanClassName:c,lib:l}){return u=>{var g;const d=e||t,f=n&&u.ctrlKey;if(u.button===1&&u.type==="mousedown"&&(os(u,`${l}-flow__node`)||os(u,`${l}-flow__edge`)))return!0;if(!r&&!d&&!o&&!a&&!n||i||os(u,s)&&u.type==="wheel"||os(u,c)&&(u.type!=="wheel"||o&&u.type==="wheel"&&!e)||!n&&u.ctrlKey&&u.type==="wheel")return!1;if(!n&&u.type==="touchstart"&&((g=u.touches)==null?void 0:g.length)>1)return u.preventDefault(),!1;if(!d&&!o&&!f&&u.type==="wheel"||!r&&(u.type==="mousedown"||u.type==="touchstart")||Array.isArray(r)&&!r.includes(u.button)&&u.type==="mousedown")return!1;const h=Array.isArray(r)&&r.includes(u.button)||!u.button||u.button<=1;return(!u.ctrlKey||u.type==="wheel")&&h}}function Ree({domNode:e,minZoom:t,maxZoom:n,paneClickDistance:r,translateExtent:o,viewport:a,onPanZoom:i,onPanZoomStart:s,onPanZoomEnd:c,onDraggingChange:l}){const u={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},d=e.getBoundingClientRect(),f=HT().clickDistance(!vr(r)||r<0?0:r).scaleExtent([t,n]).translateExtent(o),h=Bn(e).call(f);_({x:a.x,y:a.y,zoom:ts(a.zoom,t,n)},[[0,0],[d.width,d.height]],o);const g=h.on("wheel.zoom"),m=h.on("dblclick.zoom");f.wheelDelta(kR);function v(R,A){return h?new Promise(O=>{f==null||f.transform(yx(h,A==null?void 0:A.duration,()=>O(!0)),R)}):Promise.resolve(!1)}function b({noWheelClassName:R,noPanClassName:A,onPaneContextMenu:O,userSelectionActive:k,panOnScroll:T,panOnDrag:D,panOnScrollMode:I,panOnScrollSpeed:L,preventScrolling:B,zoomOnPinch:V,zoomOnScroll:F,zoomOnDoubleClick:H,zoomActivationKeyPressed:Q,lib:Y,onTransformChange:re}){k&&!u.isZoomingOrPanning&&x();const G=T&&!Q&&!k?Nee({zoomPanValues:u,noWheelClassName:R,d3Selection:h,d3Zoom:f,panOnScrollMode:I,panOnScrollSpeed:L,zoomOnPinch:V,onPanZoomStart:s,onPanZoom:i,onPanZoomEnd:c}):Mee({noWheelClassName:R,preventScrolling:B,d3ZoomHandler:g});if(h.on("wheel.zoom",G,{passive:!1}),!k){const W=kee({zoomPanValues:u,onDraggingChange:l,onPanZoomStart:s});f.on("start",W);const Z=Pee({zoomPanValues:u,panOnDrag:D,onPaneContextMenu:!!O,onPanZoom:i,onTransformChange:re});f.on("zoom",Z);const ee=Aee({zoomPanValues:u,panOnDrag:D,panOnScroll:T,onPaneContextMenu:O,onPanZoomEnd:c,onDraggingChange:l});f.on("end",ee)}const q=Tee({zoomActivationKeyPressed:Q,panOnDrag:D,zoomOnScroll:F,panOnScroll:T,zoomOnDoubleClick:H,zoomOnPinch:V,userSelectionActive:k,noPanClassName:A,noWheelClassName:R,lib:Y});f.filter(q),H?h.on("dblclick.zoom",m):h.on("dblclick.zoom",null)}function x(){f.on("zoom",null)}async function _(R,A,O){const k=mx(R),T=f==null?void 0:f.constrain()(k,A,O);return T&&await v(T),new Promise(D=>D(T))}async function w(R,A){const O=mx(R);return await v(O,A),new Promise(k=>k(O))}function j(R){if(h){const A=mx(R),O=h.property("__zoom");(O.k!==R.zoom||O.x!==R.x||O.y!==R.y)&&(f==null||f.transform(h,A,null,{sync:!0}))}}function E(){const R=h?VT(h.node()):{x:0,y:0,k:1};return{x:R.x,y:R.y,zoom:R.k}}function S(R,A){return h?new Promise(O=>{f==null||f.scaleTo(yx(h,A==null?void 0:A.duration,()=>O(!0)),R)}):Promise.resolve(!1)}function C(R,A){return h?new Promise(O=>{f==null||f.scaleBy(yx(h,A==null?void 0:A.duration,()=>O(!0)),R)}):Promise.resolve(!1)}function M(R){f==null||f.scaleExtent(R)}function N(R){f==null||f.translateExtent(R)}function P(R){const A=!vr(R)||R<0?0:R;f==null||f.clickDistance(A)}return{update:b,destroy:x,setViewport:w,setViewportConstrained:_,getViewport:E,scaleTo:S,scaleBy:C,setScaleExtent:M,setTranslateExtent:N,syncViewport:j,setClickDistance:P}}var as;(function(e){e.Line="line",e.Handle="handle"})(as||(as={}));const Iee=["top-left","top-right","bottom-left","bottom-right"],Dee=["top","right","bottom","left"];function Lee({width:e,prevWidth:t,height:n,prevHeight:r,affectsX:o,affectsY:a}){const i=e-t,s=n-r,c=[i>0?1:i<0?-1:0,s>0?1:s<0?-1:0];return i&&o&&(c[0]=c[0]*-1),s&&a&&(c[1]=c[1]*-1),c}function Fee(e){const t=e.includes("right")||e.includes("left"),n=e.includes("bottom")||e.includes("top"),r=e.includes("left"),o=e.includes("top");return{isHorizontal:t,isVertical:n,affectsX:r,affectsY:o}}function na(e,t){return Math.max(0,t-e)}function ra(e,t){return Math.max(0,e-t)}function Uf(e,t,n){return Math.max(0,t-e,e-n)}function PR(e,t){return e?!t:t}function Bee(e,t,n,r,o,a,i,s){let{affectsX:c,affectsY:l}=t;const{isHorizontal:u,isVertical:d}=t,f=u&&d,{xSnapped:h,ySnapped:g}=n,{minWidth:m,maxWidth:v,minHeight:b,maxHeight:x}=r,{x:_,y:w,width:j,height:E,aspectRatio:S}=e;let C=Math.floor(u?h-e.pointerX:0),M=Math.floor(d?g-e.pointerY:0);const N=j+(c?-C:C),P=E+(l?-M:M),R=-a[0]*j,A=-a[1]*E;let O=Uf(N,m,v),k=Uf(P,b,x);if(i){let I=0,L=0;c&&C<0?I=na(_+C+R,i[0][0]):!c&&C>0&&(I=ra(_+N+R,i[1][0])),l&&M<0?L=na(w+M+A,i[0][1]):!l&&M>0&&(L=ra(w+P+A,i[1][1])),O=Math.max(O,I),k=Math.max(k,L)}if(s){let I=0,L=0;c&&C>0?I=ra(_+C,s[0][0]):!c&&C<0&&(I=na(_+N,s[1][0])),l&&M>0?L=ra(w+M,s[0][1]):!l&&M<0&&(L=na(w+P,s[1][1])),O=Math.max(O,I),k=Math.max(k,L)}if(o){if(u){const I=Uf(N/S,b,x)*S;if(O=Math.max(O,I),i){let L=0;!c&&!l||c&&!l&&f?L=ra(w+A+N/S,i[1][1])*S:L=na(w+A+(c?C:-C)/S,i[0][1])*S,O=Math.max(O,L)}if(s){let L=0;!c&&!l||c&&!l&&f?L=na(w+N/S,s[1][1])*S:L=ra(w+(c?C:-C)/S,s[0][1])*S,O=Math.max(O,L)}}if(d){const I=Uf(P*S,m,v)/S;if(k=Math.max(k,I),i){let L=0;!c&&!l||l&&!c&&f?L=ra(_+P*S+R,i[1][0])/S:L=na(_+(l?M:-M)*S+R,i[0][0])/S,k=Math.max(k,L)}if(s){let L=0;!c&&!l||l&&!c&&f?L=na(_+P*S,s[1][0])/S:L=ra(_+(l?M:-M)*S,s[0][0])/S,k=Math.max(k,L)}}}M=M+(M<0?k:-k),C=C+(C<0?O:-O),o&&(f?N>P*S?M=(PR(c,l)?-C:C)/S:C=(PR(c,l)?-M:M)*S:u?(M=C/S,l=c):(C=M*S,c=l));const T=c?_+C:_,D=l?w+M:w;return{width:j+(c?-C:C),height:E+(l?-M:M),x:a[0]*C*(c?-1:1)+T,y:a[1]*M*(l?-1:1)+D}}const AR={width:0,height:0,x:0,y:0},$ee={...AR,pointerX:0,pointerY:0,aspectRatio:1};function zee(e){return[[0,0],[e.measured.width,e.measured.height]]}function Vee(e,t,n){const r=t.position.x+e.position.x,o=t.position.y+e.position.y,a=e.measured.width??0,i=e.measured.height??0,s=n[0]*a,c=n[1]*i;return[[r-s,o-c],[r+a-s,o+i-c]]}function Uee({domNode:e,nodeId:t,getStoreItems:n,onChange:r,onEnd:o}){const a=Bn(e);function i({controlPosition:c,boundaries:l,keepAspectRatio:u,onResizeStart:d,onResize:f,onResizeEnd:h,shouldResize:g}){let m={...AR},v={...$ee};const b=Fee(c);let x,_=null,w=[],j,E,S;const C=pT().on("start",M=>{const{nodeLookup:N,transform:P,snapGrid:R,snapToGrid:A,nodeOrigin:O,paneDomNode:k}=n();if(x=N.get(t),!x)return;_=(k==null?void 0:k.getBoundingClientRect())??null;const{xSnapped:T,ySnapped:D}=Cl(M.sourceEvent,{transform:P,snapGrid:R,snapToGrid:A,containerBounds:_});m={width:x.measured.width??0,height:x.measured.height??0,x:x.position.x??0,y:x.position.y??0},v={...m,pointerX:T,pointerY:D,aspectRatio:m.width/m.height},j=void 0,x.parentId&&(x.extent==="parent"||x.expandParent)&&(j=N.get(x.parentId),E=j&&x.extent==="parent"?zee(j):void 0),w=[],S=void 0;for(const[I,L]of N)if(L.parentId===t&&(w.push({id:I,position:{...L.position},extent:L.extent}),L.extent==="parent"||L.expandParent)){const B=Vee(L,x,L.origin??O);S?S=[[Math.min(B[0][0],S[0][0]),Math.min(B[0][1],S[0][1])],[Math.max(B[1][0],S[1][0]),Math.max(B[1][1],S[1][1])]]:S=B}d==null||d(M,{...m})}).on("drag",M=>{const{transform:N,snapGrid:P,snapToGrid:R,nodeOrigin:A}=n(),O=Cl(M.sourceEvent,{transform:N,snapGrid:P,snapToGrid:R,containerBounds:_}),k=[];if(!x)return;const{x:T,y:D,width:I,height:L}=m,B={},V=x.origin??A,{width:F,height:H,x:Q,y:Y}=Bee(v,b,O,l,u,V,E,S),re=F!==I,G=H!==L,q=Q!==T&&re,W=Y!==D&&G;if(!q&&!W&&!re&&!G)return;if((q||W||V[0]===1||V[1]===1)&&(B.x=q?Q:m.x,B.y=W?Y:m.y,m.x=B.x,m.y=B.y,w.length>0)){const $=Q-T,ie=Y-D;for(const ue of w)ue.position={x:ue.position.x-$+V[0]*(F-I),y:ue.position.y-ie+V[1]*(H-L)},k.push(ue)}if((re||G)&&(B.width=re?F:m.width,B.height=G?H:m.height,m.width=B.width,m.height=B.height),j&&x.expandParent){const $=V[0]*(B.width??0);B.x&&B.x<$&&(m.x=$,v.x=v.x-(B.x-$));const ie=V[1]*(B.height??0);B.y&&B.y<ie&&(m.y=ie,v.y=v.y-(B.y-ie))}const Z=Lee({width:m.width,prevWidth:I,height:m.height,prevHeight:L,affectsX:b.affectsX,affectsY:b.affectsY}),ee={...m,direction:Z};(g==null?void 0:g(M,ee))!==!1&&(f==null||f(M,ee),r(B,k))}).on("end",M=>{h==null||h(M,{...m}),o==null||o()});a.call(C)}function s(){a.on(".drag",null)}return{update:i,destroy:s}}var TR={exports:{}},gx={},RR;function Hee(){if(RR)return gx;RR=1;var e=j7(),t=Kk();function n(l,u){return l===u&&(l!==0||1/l===1/u)||l!==l&&u!==u}var r=typeof Object.is=="function"?Object.is:n,o=t.useSyncExternalStore,a=e.useRef,i=e.useEffect,s=e.useMemo,c=e.useDebugValue;return gx.useSyncExternalStoreWithSelector=function(l,u,d,f,h){var g=a(null);if(g.current===null){var m={hasValue:!1,value:null};g.current=m}else m=g.current;g=s(function(){function b(E){if(!x){if(x=!0,_=E,E=f(E),h!==void 0&&m.hasValue){var S=m.value;if(h(S,E))return w=S}return w=E}if(S=w,r(_,E))return S;var C=f(E);return h!==void 0&&h(S,C)?S:(_=E,w=C)}var x=!1,_,w,j=d===void 0?null:d;return[function(){return b(u())},j===null?void 0:function(){return b(j())}]},[u,d,f,h]);var v=o(l,g[0],g[1]);return i(function(){m.hasValue=!0,m.value=v},[v]),c(v),v},gx}var IR;function Wee(){return IR||(IR=1,TR.exports=Hee()),TR.exports}var qee=Wee();let DR,vx,LR,FR,BR,$R;hS=Qe(qee),DR={BASE_URL:"/NoLLMChat/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_BASE_URL:"/NoLLMChat/",VITE_ROUTE_MODE:"hash"},vx=e=>{let t;const n=new Set,r=(s,c)=>{const l=typeof s=="function"?s(t):s;if(!Object.is(l,t)){const u=t;t=c??(typeof l!="object"||l===null)?l:Object.assign({},t,l),n.forEach(d=>d(t,u))}},o=()=>t,a={setState:r,getState:o,getInitialState:()=>i,subscribe:s=>(n.add(s),()=>n.delete(s)),destroy:()=>{(DR?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},i=t=e(r,o,a);return a},LR=e=>e?vx(e):vx,{useDebugValue:FR}=U,{useSyncExternalStoreWithSelector:BR}=hS,$R=e=>e;function zR(e,t=$R,n){const r=BR(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return FR(r),r}const VR=(e,t)=>{const n=LR(e),r=(o,a=t)=>zR(n,o,a);return Object.assign(r,n),r},Yee=(e,t)=>e?VR(e,t):VR;function Et(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,o]of e)if(!Object.is(o,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}const Hf=y.createContext(null),Kee=Hf.Provider,UR=bo.error001();function Ve(e,t){const n=y.useContext(Hf);if(n===null)throw new Error(UR);return zR(n,e,t)}function bt(){const e=y.useContext(Hf);if(e===null)throw new Error(UR);return y.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])}const HR={display:"none"},Xee={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},WR="react-flow__node-desc",qR="react-flow__edge-desc",Qee="react-flow__aria-live",Jee=e=>e.ariaLiveMessage;function Zee({rfId:e}){const t=Ve(Jee);return p.jsx("div",{id:`${Qee}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:Xee,children:t})}function Gee({rfId:e,disableKeyboardA11y:t}){return p.jsxs(p.Fragment,{children:[p.jsxs("div",{id:`${WR}-${e}`,style:HR,children:["Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "]}),p.jsx("div",{id:`${qR}-${e}`,style:HR,children:"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."}),!t&&p.jsx(Zee,{rfId:e})]})}const ete=e=>e.userSelectionActive?"none":"all";function is({position:e="top-left",children:t,className:n,style:r,...o}){const a=Ve(ete),i=`${e}`.split("-");return p.jsx("div",{className:It(["react-flow__panel",n,...i]),style:{...r,pointerEvents:a},...o,children:t})}function tte({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:p.jsx(is,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:p.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const nte=e=>{const t=[],n=[];for(const[,r]of e.nodeLookup)r.selected&&t.push(r.internals.userNode);for(const[,r]of e.edgeLookup)r.selected&&n.push(r);return{selectedNodes:t,selectedEdges:n}},Wf=e=>e.id;function rte(e,t){return Et(e.selectedNodes.map(Wf),t.selectedNodes.map(Wf))&&Et(e.selectedEdges.map(Wf),t.selectedEdges.map(Wf))}function ote({onSelectionChange:e}){const t=bt(),{selectedNodes:n,selectedEdges:r}=Ve(nte,rte);return y.useEffect(()=>{const o={nodes:n,edges:r};e==null||e(o),t.getState().onSelectionChangeHandlers.forEach(a=>a(o))},[n,r,e]),null}const ate=e=>!!e.onSelectionChangeHandlers;function ite({onSelectionChange:e}){const t=Ve(ate);return e||t?p.jsx(ote,{onSelectionChange:e}):null}const YR=[0,0],ste={x:0,y:0,zoom:1},cte=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","onBeforeDelete","debug","autoPanSpeed","paneClickDistance"],KR=[...cte,"rfId"],lte=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setPaneClickDistance:e.setPaneClickDistance}),XR={translateExtent:xl,nodeOrigin:YR,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1",paneClickDistance:0};function ute(e){const{setNodes:t,setEdges:n,setMinZoom:r,setMaxZoom:o,setTranslateExtent:a,setNodeExtent:i,reset:s,setDefaultNodesAndEdges:c,setPaneClickDistance:l}=Ve(lte,Et),u=bt();y.useEffect(()=>(c(e.defaultNodes,e.defaultEdges),()=>{d.current=XR,s()}),[]);const d=y.useRef(XR);return y.useEffect(()=>{for(const f of KR){const h=e[f],g=d.current[f];h!==g&&(typeof e[f]>"u"||(f==="nodes"?t(h):f==="edges"?n(h):f==="minZoom"?r(h):f==="maxZoom"?o(h):f==="translateExtent"?a(h):f==="nodeExtent"?i(h):f==="paneClickDistance"?l(h):f==="fitView"?u.setState({fitViewOnInit:h}):f==="fitViewOptions"?u.setState({fitViewOnInitOptions:h}):u.setState({[f]:h})))}d.current=e},KR.map(f=>e[f])),null}function QR(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function dte(e){var r;const[t,n]=y.useState(e==="system"?null:e);return y.useEffect(()=>{if(e!=="system"){n(e);return}const o=QR(),a=()=>n(o!=null&&o.matches?"dark":"light");return a(),o==null||o.addEventListener("change",a),()=>{o==null||o.removeEventListener("change",a)}},[e]),t!==null?t:(r=QR())!=null&&r.matches?"dark":"light"}const JR=typeof document<"u"?document:null;function Nl(e=null,t={target:JR,actInsideInputWithModifier:!0}){const[n,r]=y.useState(!1),o=y.useRef(!1),a=y.useRef(new Set([])),[i,s]=y.useMemo(()=>{if(e!==null){const c=(Array.isArray(e)?e:[e]).filter(u=>typeof u=="string").map(u=>u.replace("+",`
`).replace(`

`,`
+`).split(`
`)),l=c.reduce((u,d)=>u.concat(...d),[]);return[c,l]}return[[],[]]},[e]);return y.useEffect(()=>{const c=(t==null?void 0:t.target)||JR;if(e!==null){const l=f=>{if(o.current=f.ctrlKey||f.metaKey||f.shiftKey,(!o.current||o.current&&!t.actInsideInputWithModifier)&&ax(f))return!1;const h=GR(f.code,s);a.current.add(f[h]),ZR(i,a.current,!1)&&(f.preventDefault(),r(!0))},u=f=>{if((!o.current||o.current&&!t.actInsideInputWithModifier)&&ax(f))return!1;const h=GR(f.code,s);ZR(i,a.current,!0)?(r(!1),a.current.clear()):a.current.delete(f[h]),f.key==="Meta"&&a.current.clear(),o.current=!1},d=()=>{a.current.clear(),r(!1)};return c==null||c.addEventListener("keydown",l),c==null||c.addEventListener("keyup",u),window.addEventListener("blur",d),window.addEventListener("contextmenu",d),()=>{c==null||c.removeEventListener("keydown",l),c==null||c.removeEventListener("keyup",u),window.removeEventListener("blur",d),window.removeEventListener("contextmenu",d)}}},[e,r]),n}function ZR(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(o=>t.has(o)))}function GR(e,t){return t.includes(e)?"code":"key"}const fte=()=>{const e=bt();return y.useMemo(()=>({zoomIn:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomOut:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1/1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomTo:(t,n)=>{const{panZoom:r}=e.getState();return r?r.scaleTo(t,{duration:n==null?void 0:n.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(t,n)=>{const{transform:[r,o,a],panZoom:i}=e.getState();return i?(await i.setViewport({x:t.x??r,y:t.y??o,zoom:t.zoom??a},{duration:n==null?void 0:n.duration}),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[t,n,r]=e.getState().transform;return{x:t,y:n,zoom:r}},fitView:t=>{const{nodeLookup:n,minZoom:r,maxZoom:o,panZoom:a,domNode:i}=e.getState();if(!a||!i)return Promise.resolve(!1);const s=tx(n,t),{width:c,height:l}=$f(i);return nx({nodes:s,width:c,height:l,minZoom:r,maxZoom:o,panZoom:a},t)},setCenter:async(t,n,r)=>{const{width:o,height:a,maxZoom:i,panZoom:s}=e.getState(),c=typeof(r==null?void 0:r.zoom)<"u"?r.zoom:i,l=o/2-t*c,u=a/2-n*c;return s?(await s.setViewport({x:l,y:u,zoom:c},{duration:r==null?void 0:r.duration}),Promise.resolve(!0)):Promise.resolve(!1)},fitBounds:async(t,n)=>{const{width:r,height:o,minZoom:a,maxZoom:i,panZoom:s}=e.getState(),c=ox(t,r,o,a,i,(n==null?void 0:n.padding)??.1);return s?(await s.setViewport(c,{duration:n==null?void 0:n.duration}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(t,n={snapToGrid:!0})=>{const{transform:r,snapGrid:o,domNode:a}=e.getState();if(!a)return t;const{x:i,y:s}=a.getBoundingClientRect(),c={x:t.x-i,y:t.y-s};return Sl(c,r,n.snapToGrid,o)},flowToScreenPosition:t=>{const{transform:n,domNode:r}=e.getState();if(!r)return t;const{x:o,y:a}=r.getBoundingClientRect(),i=oR(t,n);return{x:i.x+o,y:i.y+a}}}),[])};function eI(e,t){const n=[],r=new Map,o=[];for(const a of e)if(a.type==="add"){o.push(a);continue}else if(a.type==="remove"||a.type==="replace")r.set(a.id,[a]);else{const i=r.get(a.id);i?i.push(a):r.set(a.id,[a])}for(const a of t){const i=r.get(a.id);if(!i){n.push(a);continue}if(i[0].type==="remove")continue;if(i[0].type==="replace"){n.push({...i[0].item});continue}const s={...a};for(const c of i)pte(c,s);n.push(s)}return o.length&&o.forEach(a=>{a.index!==void 0?n.splice(a.index,0,{...a.item}):n.push({...a.item})}),n}function pte(e,t){switch(e.type){case"select":{t.selected=e.selected;break}case"position":{typeof e.position<"u"&&(t.position=e.position),typeof e.dragging<"u"&&(t.dragging=e.dragging);break}case"dimensions":{typeof e.dimensions<"u"&&(t.measured??(t.measured={}),t.measured.width=e.dimensions.width,t.measured.height=e.dimensions.height,e.setAttributes&&(t.width=e.dimensions.width,t.height=e.dimensions.height)),typeof e.resizing=="boolean"&&(t.resizing=e.resizing);break}}}function qa(e,t){return eI(e,t)}function Ml(e,t){return eI(e,t)}function Ya(e,t){return{id:e,type:"select",selected:t}}function ss(e,t=new Set,n=!1){const r=[];for(const[o,a]of e){const i=t.has(o);!(a.selected===void 0&&!i)&&a.selected!==i&&(n&&(a.selected=i),r.push(Ya(a.id,i)))}return r}function tI({items:e=[],lookup:t}){var o;const n=[],r=new Map(e.map(a=>[a.id,a]));for(const[a,i]of e.entries()){const s=t.get(i.id),c=((o=s==null?void 0:s.internals)==null?void 0:o.userNode)??s;c!==void 0&&c!==i&&n.push({id:i.id,item:i,type:"replace"}),c===void 0&&n.push({item:i,type:"add",index:a})}for(const[a]of t)r.get(a)===void 0&&n.push({id:a,type:"remove"});return n}function nI(e){return{id:e.id,type:"remove"}}const rI=e=>ZG(e),hte=e=>QT(e);function oI(e){return y.forwardRef(e)}const mte=typeof window<"u"?y.useLayoutEffect:y.useEffect;function aI(e){const[t,n]=y.useState(BigInt(0)),[r]=y.useState(()=>yte(()=>n(o=>o+BigInt(1))));return mte(()=>{const o=r.get();o.length&&(e(o),r.reset())},[t]),r}function yte(e){let t=[];return{get:()=>t,reset:()=>{t=[]},push:n=>{t.push(n),e()}}}const iI=y.createContext(null);function gte({children:e}){const t=bt(),n=y.useCallback(s=>{const{nodes:c=[],setNodes:l,hasDefaultNodes:u,onNodesChange:d,nodeLookup:f}=t.getState();let h=c;for(const g of s)h=typeof g=="function"?g(h):g;u?l(h):d&&d(tI({items:h,lookup:f}))},[]),r=aI(n),o=y.useCallback(s=>{const{edges:c=[],setEdges:l,hasDefaultEdges:u,onEdgesChange:d,edgeLookup:f}=t.getState();let h=c;for(const g of s)h=typeof g=="function"?g(h):g;u?l(h):d&&d(tI({items:h,lookup:f}))},[]),a=aI(o),i=y.useMemo(()=>({nodeQueue:r,edgeQueue:a}),[]);return p.jsx(iI.Provider,{value:i,children:e})}function vte(){const e=y.useContext(iI);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}const bte=e=>!!e.panZoom;function $n(){const e=fte(),t=bt(),n=vte(),r=Ve(bte),o=y.useMemo(()=>{const a=d=>t.getState().nodeLookup.get(d),i=d=>{n.nodeQueue.push(d)},s=d=>{n.edgeQueue.push(d)},c=d=>{var b,x;const{nodeLookup:f,nodeOrigin:h}=t.getState(),g=rI(d)?d:f.get(d.id),m=g.parentId?iR(g.position,g.measured,g.parentId,f,h):g.position,v={id:g.id,position:m,width:((b=g.measured)==null?void 0:b.width)??g.width,height:((x=g.measured)==null?void 0:x.height)??g.height,data:g.data};return ns(v)},l=(d,f,h={replace:!1})=>{i(g=>g.map(m=>{if(m.id===d){const v=typeof f=="function"?f(m):f;return h.replace&&rI(v)?v:{...m,...v}}return m}))},u=(d,f,h={replace:!1})=>{s(g=>g.map(m=>{if(m.id===d){const v=typeof f=="function"?f(m):f;return h.replace&&hte(v)?v:{...m,...v}}return m}))};return{getNodes:()=>t.getState().nodes.map(d=>({...d})),getNode:d=>{var f;return(f=a(d))==null?void 0:f.internals.userNode},getInternalNode:a,getEdges:()=>{const{edges:d=[]}=t.getState();return d.map(f=>({...f}))},getEdge:d=>t.getState().edgeLookup.get(d),setNodes:i,setEdges:s,addNodes:d=>{const f=Array.isArray(d)?d:[d];n.nodeQueue.push(h=>[...h,...f])},addEdges:d=>{const f=Array.isArray(d)?d:[d];n.edgeQueue.push(h=>[...h,...f])},toObject:()=>{const{nodes:d=[],edges:f=[],transform:h}=t.getState(),[g,m,v]=h;return{nodes:d.map(b=>({...b})),edges:f.map(b=>({...b})),viewport:{x:g,y:m,zoom:v}}},deleteElements:async({nodes:d=[],edges:f=[]})=>{const{nodes:h,edges:g,onNodesDelete:m,onEdgesDelete:v,triggerNodeChanges:b,triggerEdgeChanges:x,onDelete:_,onBeforeDelete:w}=t.getState(),{nodes:j,edges:E}=await tee({nodesToRemove:d,edgesToRemove:f,nodes:h,edges:g,onBeforeDelete:w}),S=E.length>0,C=j.length>0;if(S){const M=E.map(nI);v==null||v(E),x(M)}if(C){const M=j.map(nI);m==null||m(j),b(M)}return(C||S)&&(_==null||_({nodes:j,edges:E})),{deletedNodes:j,deletedEdges:E}},getIntersectingNodes:(d,f=!0,h)=>{const g=rR(d),m=g?d:c(d),v=h!==void 0;return m?(h||t.getState().nodes).filter(b=>{const x=t.getState().nodeLookup.get(b.id);if(x&&!g&&(b.id===d.id||!x.internals.positionAbsolute))return!1;const _=ns(v?b:x),w=El(_,m);return f&&w>0||w>=m.width*m.height}):[]},isNodeIntersecting:(d,f,h=!0)=>{const g=rR(d)?d:c(d);if(!g)return!1;const m=El(g,f);return h&&m>0||m>=g.width*g.height},updateNode:l,updateNodeData:(d,f,h={replace:!1})=>{l(d,g=>{const m=typeof f=="function"?f(g):f;return h.replace?{...g,data:m}:{...g,data:{...g.data,...m}}},h)},updateEdge:u,updateEdgeData:(d,f,h={replace:!1})=>{u(d,g=>{const m=typeof f=="function"?f(g):f;return h.replace?{...g,data:m}:{...g,data:{...g.data,...m}}},h)},getNodesBounds:d=>{const{nodeLookup:f,nodeOrigin:h}=t.getState();return GG(d,{nodeLookup:f,nodeOrigin:h})},getHandleConnections:({type:d,id:f,nodeId:h})=>{var g;return Array.from(((g=t.getState().connectionLookup.get(`${h}-${d}-${f??null}`))==null?void 0:g.values())??[])}}},[]);return y.useMemo(()=>({...o,...e,viewportInitialized:r}),[r])}const sI=e=>e.selected,xte={actInsideInputWithModifier:!1},wte=typeof window<"u"?window:void 0;function _te({deleteKeyCode:e,multiSelectionKeyCode:t}){const n=bt(),{deleteElements:r}=$n(),o=Nl(e,xte),a=Nl(t,{target:wte});y.useEffect(()=>{if(o){const{edges:i,nodes:s}=n.getState();r({nodes:s.filter(sI),edges:i.filter(sI)}),n.setState({nodesSelectionActive:!1})}},[o]),y.useEffect(()=>{n.setState({multiSelectionActive:a})},[a])}function jte(e){const t=bt();y.useEffect(()=>{const n=()=>{var o,a;if(!e.current)return!1;const r=$f(e.current);(r.height===0||r.width===0)&&((a=(o=t.getState()).onError)==null||a.call(o,"004",bo.error004())),t.setState({width:r.width||500,height:r.height||500})};if(e.current){n(),window.addEventListener("resize",n);const r=new ResizeObserver(()=>n());return r.observe(e.current),()=>{window.removeEventListener("resize",n),r&&e.current&&r.unobserve(e.current)}}},[])}const qf={position:"absolute",width:"100%",height:"100%",top:0,left:0},Ete=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib});function Ste({onPaneContextMenu:e,zoomOnScroll:t=!0,zoomOnPinch:n=!0,panOnScroll:r=!1,panOnScrollSpeed:o=.5,panOnScrollMode:a=ea.Free,zoomOnDoubleClick:i=!0,panOnDrag:s=!0,defaultViewport:c,translateExtent:l,minZoom:u,maxZoom:d,zoomActivationKeyCode:f,preventScrolling:h=!0,children:g,noWheelClassName:m,noPanClassName:v,onViewportChange:b,isControlledViewport:x,paneClickDistance:_}){const w=bt(),j=y.useRef(null),{userSelectionActive:E,lib:S}=Ve(Ete,Et),C=Nl(f),M=y.useRef();jte(j);const N=y.useCallback(P=>{b==null||b({x:P[0],y:P[1],zoom:P[2]}),x||w.setState({transform:P})},[b,x]);return y.useEffect(()=>{if(j.current){M.current=Ree({domNode:j.current,minZoom:u,maxZoom:d,translateExtent:l,viewport:c,paneClickDistance:_,onDraggingChange:O=>w.setState({paneDragging:O}),onPanZoomStart:(O,k)=>{const{onViewportChangeStart:T,onMoveStart:D}=w.getState();D==null||D(O,k),T==null||T(k)},onPanZoom:(O,k)=>{const{onViewportChange:T,onMove:D}=w.getState();D==null||D(O,k),T==null||T(k)},onPanZoomEnd:(O,k)=>{const{onViewportChangeEnd:T,onMoveEnd:D}=w.getState();D==null||D(O,k),T==null||T(k)}});const{x:P,y:R,zoom:A}=M.current.getViewport();return w.setState({panZoom:M.current,transform:[P,R,A],domNode:j.current.closest(".react-flow")}),()=>{var O;(O=M.current)==null||O.destroy()}}},[]),y.useEffect(()=>{var P;(P=M.current)==null||P.update({onPaneContextMenu:e,zoomOnScroll:t,zoomOnPinch:n,panOnScroll:r,panOnScrollSpeed:o,panOnScrollMode:a,zoomOnDoubleClick:i,panOnDrag:s,zoomActivationKeyPressed:C,preventScrolling:h,noPanClassName:v,userSelectionActive:E,noWheelClassName:m,lib:S,onTransformChange:N})},[e,t,n,r,o,a,i,s,C,h,v,E,m,S,N]),p.jsx("div",{className:"react-flow__renderer",ref:j,style:qf,children:g})}const Cte=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function Ote(){const{userSelectionActive:e,userSelectionRect:t}=Ve(Cte,Et);return e&&t?p.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}const bx=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},Nte=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging});function Mte({isSelecting:e,selectionKeyPressed:t,selectionMode:n=wl.Full,panOnDrag:r,selectionOnDrag:o,onSelectionStart:a,onSelectionEnd:i,onPaneClick:s,onPaneContextMenu:c,onPaneScroll:l,onPaneMouseEnter:u,onPaneMouseMove:d,onPaneMouseLeave:f,children:h}){const g=y.useRef(null),m=bt(),v=y.useRef(0),b=y.useRef(0),x=y.useRef(),_=y.useRef(new Map),{userSelectionActive:w,elementsSelectable:j,dragging:E}=Ve(Nte,Et),S=j&&(e||w),C=y.useRef(!1),M=y.useRef(!1),N=()=>{m.setState({userSelectionActive:!1,userSelectionRect:null}),v.current=0,b.current=0},P=I=>{if(C.current){C.current=!1;return}s==null||s(I),m.getState().resetSelectedElements(),m.setState({nodesSelectionActive:!1})},R=I=>{if(Array.isArray(r)&&(r!=null&&r.includes(2))){I.preventDefault();return}c==null||c(I)},A=l?I=>l(I):void 0,O=I=>{var Q,Y,re,G;const{resetSelectedElements:L,domNode:B,edgeLookup:V}=m.getState();if(x.current=B==null?void 0:B.getBoundingClientRect(),!j||!e||I.button!==0||I.target!==g.current||!x.current)return;(Y=(Q=I.target)==null?void 0:Q.setPointerCapture)==null||Y.call(Q,I.pointerId),M.current=!0,C.current=!1,_.current=new Map;for(const[q,W]of V)_.current.set(W.source,((re=_.current.get(W.source))==null?void 0:re.add(q))||new Set([q])),_.current.set(W.target,((G=_.current.get(W.target))==null?void 0:G.add(q))||new Set([q]));const{x:F,y:H}=wo(I.nativeEvent,x.current);L(),m.setState({userSelectionRect:{width:0,height:0,startX:F,startY:H,x:F,y:H}}),a==null||a(I)},k=I=>{const{userSelectionRect:L,edgeLookup:B,transform:V,nodeLookup:F,triggerNodeChanges:H,triggerEdgeChanges:Q}=m.getState();if(!x.current||!L)return;C.current=!0;const{x:Y,y:re}=wo(I.nativeEvent,x.current),{startX:G,startY:q}=L,W={startX:G,startY:q,x:Y<G?Y:G,y:re<q?re:q,width:Math.abs(Y-G),height:Math.abs(re-q)},Z=JT(F,W,V,n===wl.Partial,!0),ee=new Set,$=new Set;for(const ie of Z){$.add(ie.id);const ue=_.current.get(ie.id);if(ue)for(const me of ue)ee.add(me)}if(v.current!==$.size){v.current=$.size;const ie=ss(F,$,!0);H(ie)}if(b.current!==ee.size){b.current=ee.size;const ie=ss(B,ee);Q(ie)}m.setState({userSelectionRect:W,userSelectionActive:!0,nodesSelectionActive:!1})},T=I=>{var B,V;if(I.button!==0||!M.current)return;(V=(B=I.target)==null?void 0:B.releasePointerCapture)==null||V.call(B,I.pointerId);const{userSelectionRect:L}=m.getState();!w&&L&&I.target===g.current&&(P==null||P(I)),v.current>0&&m.setState({nodesSelectionActive:!0}),N(),i==null||i(I),(t||o)&&(C.current=!1),M.current=!1},D=r===!0||Array.isArray(r)&&r.includes(0);return p.jsxs("div",{className:It(["react-flow__pane",{draggable:D,dragging:E,selection:e}]),onClick:S?void 0:bx(P,g),onContextMenu:bx(R,g),onWheel:bx(A,g),onPointerEnter:S?void 0:u,onPointerDown:S?O:d,onPointerMove:S?k:d,onPointerUp:S?T:void 0,onPointerLeave:f,ref:g,style:qf,children:[h,p.jsx(Ote,{})]})}function xx({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:o,unselectNodesAndEdges:a,multiSelectionActive:i,nodeLookup:s,onError:c}=t.getState(),l=s.get(e);if(!l){c==null||c("012",bo.error012(e));return}t.setState({nodesSelectionActive:!1}),l.selected?(n||l.selected&&i)&&(a({nodes:[l],edges:[]}),requestAnimationFrame(()=>{var u;return(u=r==null?void 0:r.current)==null?void 0:u.blur()})):o([e])}function cI({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:o,isSelectable:a,nodeClickDistance:i}){const s=bt(),[c,l]=y.useState(!1),u=y.useRef();return y.useEffect(()=>{u.current=xee({getStoreItems:()=>s.getState(),onNodeMouseDown:d=>{xx({id:d,store:s,nodeRef:e})},onDragStart:()=>{l(!0)},onDragStop:()=>{l(!1)}})},[]),y.useEffect(()=>{var d,f;if(t)(d=u.current)==null||d.destroy();else if(e.current)return(f=u.current)==null||f.update({noDragClassName:n,handleSelector:r,domNode:e.current,isSelectable:a,nodeId:o,nodeClickDistance:i}),()=>{var h;(h=u.current)==null||h.destroy()}},[n,r,t,a,e,o]),c}const kte=e=>t=>t.selected&&(t.draggable||e&&typeof t.draggable>"u");function lI(){const e=bt();return y.useCallback(t=>{const{nodeExtent:n,snapToGrid:r,snapGrid:o,nodesDraggable:a,onError:i,updateNodePositions:s,nodeLookup:c,nodeOrigin:l}=e.getState(),u=new Map,d=kte(a),f=r?o[0]:5,h=r?o[1]:5,g=t.direction.x*f*t.factor,m=t.direction.y*h*t.factor;for(const[,v]of c){if(!d(v))continue;let b={x:v.internals.positionAbsolute.x+g,y:v.internals.positionAbsolute.y+m};r&&(b=Ff(b,o));const{position:x,positionAbsolute:_}=ZT({nodeId:v.id,nextPosition:b,nodeLookup:c,nodeExtent:n,nodeOrigin:l,onError:i});v.position=x,v.internals.positionAbsolute=_,u.set(v.id,v)}s(u)},[])}const wx=y.createContext(null),Pte=wx.Provider;wx.Consumer;const _x=()=>y.useContext(wx),Ate=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),Tte=(e,t,n)=>r=>{const{connectionClickStartHandle:o,connectionMode:a,connection:i}=r,{fromHandle:s,toHandle:c,isValid:l}=i,u=(c==null?void 0:c.nodeId)===e&&(c==null?void 0:c.id)===t&&(c==null?void 0:c.type)===n;return{connectingFrom:(s==null?void 0:s.nodeId)===e&&(s==null?void 0:s.id)===t&&(s==null?void 0:s.type)===n,connectingTo:u,clickConnecting:(o==null?void 0:o.nodeId)===e&&(o==null?void 0:o.id)===t&&(o==null?void 0:o.type)===n,isPossibleEndHandle:a===es.Strict?(s==null?void 0:s.type)!==n:e!==(s==null?void 0:s.nodeId)||t!==(s==null?void 0:s.id),connectionInProcess:!!s,valid:u&&l}};function Rte({type:e="source",position:t=fe.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:o=!0,isConnectableEnd:a=!0,id:i,onConnect:s,children:c,className:l,onMouseDown:u,onTouchStart:d,...f},h){var O,k;const g=i||null,m=e==="target",v=bt(),b=_x(),{connectOnClick:x,noPanClassName:_,rfId:w}=Ve(Ate,Et),{connectingFrom:j,connectingTo:E,clickConnecting:S,isPossibleEndHandle:C,connectionInProcess:M,valid:N}=Ve(Tte(b,g,e),Et);b||((k=(O=v.getState()).onError)==null||k.call(O,"010",bo.error010()));const P=T=>{const{defaultEdgeOptions:D,onConnect:I,hasDefaultEdges:L}=v.getState(),B={...D,...T};if(L){const{edges:V,setEdges:F}=v.getState();F(hR(B,V))}I==null||I(B),s==null||s(B)},R=T=>{if(!b)return;const D=cR(T.nativeEvent);if(o&&(D&&T.button===0||!D)){const I=v.getState();hx.onPointerDown(T.nativeEvent,{autoPanOnConnect:I.autoPanOnConnect,connectionMode:I.connectionMode,connectionRadius:I.connectionRadius,domNode:I.domNode,nodeLookup:I.nodeLookup,lib:I.lib,isTarget:m,handleId:g,nodeId:b,flowId:I.rfId,panBy:I.panBy,cancelConnection:I.cancelConnection,onConnectStart:I.onConnectStart,onConnectEnd:I.onConnectEnd,updateConnection:I.updateConnection,onConnect:P,isValidConnection:n||I.isValidConnection,getTransform:()=>v.getState().transform,getFromHandle:()=>v.getState().connection.fromHandle,autoPanSpeed:I.autoPanSpeed})}D?u==null||u(T):d==null||d(T)},A=T=>{const{onClickConnectStart:D,onClickConnectEnd:I,connectionClickStartHandle:L,connectionMode:B,isValidConnection:V,lib:F,rfId:H,nodeLookup:Q,connection:Y}=v.getState();if(!b||!L&&!o)return;if(!L){D==null||D(T.nativeEvent,{nodeId:b,handleId:g,handleType:e}),v.setState({connectionClickStartHandle:{nodeId:b,type:e,id:g}});return}const re=sR(T.target),G=n||V,{connection:q,isValid:W}=hx.isValid(T.nativeEvent,{handle:{nodeId:b,id:g,type:e},connectionMode:B,fromNodeId:L.nodeId,fromHandleId:L.id||null,fromType:L.type,isValidConnection:G,flowId:H,doc:re,lib:F,nodeLookup:Q});W&&q&&P(q);const Z=structuredClone(Y);delete Z.inProgress,Z.toPosition=Z.toHandle?Z.toHandle.position:null,I==null||I(T,Z),v.setState({connectionClickStartHandle:null})};return p.jsx("div",{"data-handleid":g,"data-nodeid":b,"data-handlepos":t,"data-id":`${w}-${b}-${g}-${e}`,className:It(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",_,l,{source:!m,target:m,connectable:r,connectablestart:o,connectableend:a,clickconnecting:S,connectingfrom:j,connectingto:E,valid:N,connectionindicator:r&&(!M||C)&&(M?a:o)}]),onMouseDown:R,onTouchStart:R,onClick:x?A:void 0,ref:h,...f,children:c})}const kl=y.memo(oI(Rte));function Ite({data:e,isConnectable:t,sourcePosition:n=fe.Bottom}){return p.jsxs(p.Fragment,{children:[e==null?void 0:e.label,p.jsx(kl,{type:"source",position:n,isConnectable:t})]})}function Dte({data:e,isConnectable:t,targetPosition:n=fe.Top,sourcePosition:r=fe.Bottom}){return p.jsxs(p.Fragment,{children:[p.jsx(kl,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,p.jsx(kl,{type:"source",position:r,isConnectable:t})]})}function Lte(){return null}function Fte({data:e,isConnectable:t,targetPosition:n=fe.Top}){return p.jsxs(p.Fragment,{children:[p.jsx(kl,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label]})}const Yf={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},uI={input:Ite,default:Dte,output:Fte,group:Lte};function Bte(e){var t,n,r,o;return e.internals.handleBounds===void 0?{width:e.width??e.initialWidth??((t=e.style)==null?void 0:t.width),height:e.height??e.initialHeight??((n=e.style)==null?void 0:n.height)}:{width:e.width??((r=e.style)==null?void 0:r.width),height:e.height??((o=e.style)==null?void 0:o.height)}}const $te=e=>{const{width:t,height:n,x:r,y:o}=jl(e.nodeLookup,{filter:a=>!!a.selected});return{width:vr(t)?t:null,height:vr(n)?n:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${r}px,${o}px)`}};function zte({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=bt(),{width:o,height:a,transformString:i,userSelectionActive:s}=Ve($te,Et),c=lI(),l=y.useRef(null);if(y.useEffect(()=>{var f;n||((f=l.current)==null||f.focus({preventScroll:!0}))},[n]),cI({nodeRef:l}),s||!o||!a)return null;const u=e?f=>{const h=r.getState().nodes.filter(g=>g.selected);e(f,h)}:void 0,d=f=>{Object.prototype.hasOwnProperty.call(Yf,f.key)&&c({direction:Yf[f.key],factor:f.shiftKey?4:1})};return p.jsx("div",{className:It(["react-flow__nodesselection","react-flow__container",t]),style:{transform:i},children:p.jsx("div",{ref:l,className:"react-flow__nodesselection-rect",onContextMenu:u,tabIndex:n?void 0:-1,onKeyDown:n?void 0:d,style:{width:o,height:a}})})}const dI=typeof window<"u"?window:void 0,Vte=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function fI({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:o,onPaneContextMenu:a,onPaneScroll:i,paneClickDistance:s,deleteKeyCode:c,selectionKeyCode:l,selectionOnDrag:u,selectionMode:d,onSelectionStart:f,onSelectionEnd:h,multiSelectionKeyCode:g,panActivationKeyCode:m,zoomActivationKeyCode:v,elementsSelectable:b,zoomOnScroll:x,zoomOnPinch:_,panOnScroll:w,panOnScrollSpeed:j,panOnScrollMode:E,zoomOnDoubleClick:S,panOnDrag:C,defaultViewport:M,translateExtent:N,minZoom:P,maxZoom:R,preventScrolling:A,onSelectionContextMenu:O,noWheelClassName:k,noPanClassName:T,disableKeyboardA11y:D,onViewportChange:I,isControlledViewport:L}){const{nodesSelectionActive:B,userSelectionActive:V}=Ve(Vte),F=Nl(l,{target:dI}),H=Nl(m,{target:dI}),Q=H||C,Y=H||w,re=u&&Q!==!0,G=F||V||re;return _te({deleteKeyCode:c,multiSelectionKeyCode:g}),p.jsx(Ste,{onPaneContextMenu:a,elementsSelectable:b,zoomOnScroll:x,zoomOnPinch:_,panOnScroll:Y,panOnScrollSpeed:j,panOnScrollMode:E,zoomOnDoubleClick:S,panOnDrag:!F&&Q,defaultViewport:M,translateExtent:N,minZoom:P,maxZoom:R,zoomActivationKeyCode:v,preventScrolling:A,noWheelClassName:k,noPanClassName:T,onViewportChange:I,isControlledViewport:L,paneClickDistance:s,children:p.jsxs(Mte,{onSelectionStart:f,onSelectionEnd:h,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:o,onPaneContextMenu:a,onPaneScroll:i,panOnDrag:Q,isSelecting:!!G,selectionMode:d,selectionKeyPressed:F,selectionOnDrag:re,children:[e,B&&p.jsx(zte,{onSelectionContextMenu:O,noPanClassName:T,disableKeyboardA11y:D})]})})}fI.displayName="FlowRenderer";const Ute=y.memo(fI),Hte=e=>t=>e?JT(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map(n=>n.id):Array.from(t.nodeLookup.keys());function Wte(e){return Ve(y.useCallback(Hte(e),[e]),Et)}const qte=e=>e.updateNodeInternals;function Yte(){const e=Ve(qte),[t]=y.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(n=>{const r=new Map;n.forEach(o=>{const a=o.target.getAttribute("data-id");r.set(a,{id:a,nodeElement:o.target,force:!0})}),e(r)}));return y.useEffect(()=>()=>{t==null||t.disconnect()},[t]),t}function Kte({node:e,nodeType:t,hasDimensions:n,resizeObserver:r}){const o=bt(),a=y.useRef(null),i=y.useRef(null),s=y.useRef(e.sourcePosition),c=y.useRef(e.targetPosition),l=y.useRef(t),u=n&&!!e.internals.handleBounds;return y.useEffect(()=>{a.current&&!e.hidden&&(!u||i.current!==a.current)&&(i.current&&(r==null||r.unobserve(i.current)),r==null||r.observe(a.current),i.current=a.current)},[u,e.hidden]),y.useEffect(()=>()=>{i.current&&(r==null||r.unobserve(i.current),i.current=null)},[]),y.useEffect(()=>{if(a.current){const d=l.current!==t,f=s.current!==e.sourcePosition,h=c.current!==e.targetPosition;(d||f||h)&&(l.current=t,s.current=e.sourcePosition,c.current=e.targetPosition,o.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:a.current,force:!0}]])))}},[e.id,t,e.sourcePosition,e.targetPosition]),a}function Xte({id:e,onClick:t,onMouseEnter:n,onMouseMove:r,onMouseLeave:o,onContextMenu:a,onDoubleClick:i,nodesDraggable:s,elementsSelectable:c,nodesConnectable:l,nodesFocusable:u,resizeObserver:d,noDragClassName:f,noPanClassName:h,disableKeyboardA11y:g,rfId:m,nodeTypes:v,nodeExtent:b,nodeClickDistance:x,onError:_}){const{node:w,internals:j,isParent:E}=Ve(q=>{const W=q.nodeLookup.get(e),Z=q.parentLookup.has(e);return{node:W,internals:W.internals,isParent:Z}},Et);let S=w.type||"default",C=(v==null?void 0:v[S])||uI[S];C===void 0&&(_==null||_("003",bo.error003(S)),S="default",C=uI.default);const M=!!(w.draggable||s&&typeof w.draggable>"u"),N=!!(w.selectable||c&&typeof w.selectable>"u"),P=!!(w.connectable||l&&typeof w.connectable>"u"),R=!!(w.focusable||u&&typeof w.focusable>"u"),A=bt(),O=aR(w),k=Kte({node:w,nodeType:S,hasDimensions:O,resizeObserver:d}),T=cI({nodeRef:k,disabled:w.hidden||!M,noDragClassName:f,handleSelector:w.dragHandle,nodeId:e,isSelectable:N,nodeClickDistance:x}),D=lI();if(w.hidden)return null;const I=xo(w),L=Bte(w),B=N||M||t||n||r||o,V=n?q=>n(q,{...j.userNode}):void 0,F=r?q=>r(q,{...j.userNode}):void 0,H=o?q=>o(q,{...j.userNode}):void 0,Q=a?q=>a(q,{...j.userNode}):void 0,Y=i?q=>i(q,{...j.userNode}):void 0,re=q=>{const{selectNodesOnDrag:W,nodeDragThreshold:Z}=A.getState();N&&(!W||!M||Z>0)&&xx({id:e,store:A,nodeRef:k}),t&&t(q,{...j.userNode})},G=q=>{if(!(ax(q.nativeEvent)||g))if(WT.includes(q.key)&&N){const W=q.key==="Escape";xx({id:e,store:A,unselect:W,nodeRef:k})}else M&&w.selected&&Object.prototype.hasOwnProperty.call(Yf,q.key)&&(A.setState({ariaLiveMessage:`Moved selected node ${q.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~j.positionAbsolute.x}, y: ${~~j.positionAbsolute.y}`}),D({direction:Yf[q.key],factor:q.shiftKey?4:1}))};return p.jsx("div",{className:It(["react-flow__node",`react-flow__node-${S}`,{[h]:M},w.className,{selected:w.selected,selectable:N,parent:E,draggable:M,dragging:T}]),ref:k,style:{zIndex:j.z,transform:`translate(${j.positionAbsolute.x}px,${j.positionAbsolute.y}px)`,pointerEvents:B?"all":"none",visibility:O?"visible":"hidden",...w.style,...L},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:V,onMouseMove:F,onMouseLeave:H,onContextMenu:Q,onClick:re,onDoubleClick:Y,onKeyDown:R?G:void 0,tabIndex:R?0:void 0,role:R?"button":void 0,"aria-describedby":g?void 0:`${WR}-${m}`,"aria-label":w.ariaLabel,children:p.jsx(Pte,{value:e,children:p.jsx(C,{id:e,data:w.data,type:S,positionAbsoluteX:j.positionAbsolute.x,positionAbsoluteY:j.positionAbsolute.y,selected:w.selected,selectable:N,draggable:M,deletable:w.deletable??!0,isConnectable:P,sourcePosition:w.sourcePosition,targetPosition:w.targetPosition,dragging:T,dragHandle:w.dragHandle,zIndex:j.z,parentId:w.parentId,...I})})})}const Qte=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function pI(e){const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:o,onError:a}=Ve(Qte,Et),i=Wte(e.onlyRenderVisibleElements),s=Yte();return p.jsx("div",{className:"react-flow__nodes",style:qf,children:i.map(c=>p.jsx(Xte,{id:c,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:s,nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:o,nodeClickDistance:e.nodeClickDistance,onError:a},c))})}pI.displayName="NodeRenderer";const Jte=y.memo(pI);function Zte(e){return Ve(y.useCallback(t=>{if(!e)return t.edges.map(r=>r.id);const n=[];if(t.width&&t.height)for(const r of t.edges){const o=t.nodeLookup.get(r.source),a=t.nodeLookup.get(r.target);o&&a&&aee({sourceNode:o,targetNode:a,width:t.width,height:t.height,transform:t.transform})&&n.push(r.id)}return n},[e]),Et)}const Gte=({color:e="none",strokeWidth:t=1})=>p.jsx("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),ene=({color:e="none",strokeWidth:t=1})=>p.jsx("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),hI={[Rf.Arrow]:Gte,[Rf.ArrowClosed]:ene};function tne(e){const t=bt();return y.useMemo(()=>{var n,r;return Object.prototype.hasOwnProperty.call(hI,e)?hI[e]:((r=(n=t.getState()).onError)==null||r.call(n,"009",bo.error009(e)),null)},[e])}const nne=({id:e,type:t,color:n,width:r=12.5,height:o=12.5,markerUnits:a="strokeWidth",strokeWidth:i,orient:s="auto-start-reverse"})=>{const c=tne(t);return c?p.jsx("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${o}`,viewBox:"-10 -10 20 20",markerUnits:a,orient:s,refX:"0",refY:"0",children:p.jsx(c,{color:n,strokeWidth:i})}):null},mI=({defaultColor:e,rfId:t})=>{const n=Ve(a=>a.edges),r=Ve(a=>a.defaultEdgeOptions),o=y.useMemo(()=>fee(n,{id:t,defaultColor:e,defaultMarkerStart:r==null?void 0:r.markerStart,defaultMarkerEnd:r==null?void 0:r.markerEnd}),[n,r,t,e]);return o.length?p.jsx("svg",{className:"react-flow__marker",children:p.jsx("defs",{children:o.map(a=>p.jsx(nne,{id:a.id,type:a.type,color:a.color,width:a.width,height:a.height,markerUnits:a.markerUnits,strokeWidth:a.strokeWidth,orient:a.orient},a.id))})}):null};mI.displayName="MarkerDefinitions";var rne=y.memo(mI);function yI({x:e,y:t,label:n,labelStyle:r={},labelShowBg:o=!0,labelBgStyle:a={},labelBgPadding:i=[2,4],labelBgBorderRadius:s=2,children:c,className:l,...u}){const[d,f]=y.useState({x:1,y:0,width:0,height:0}),h=It(["react-flow__edge-textwrapper",l]),g=y.useRef(null);return y.useEffect(()=>{if(g.current){const m=g.current.getBBox();f({x:m.x,y:m.y,width:m.width,height:m.height})}},[n]),typeof n>"u"||!n?null:p.jsxs("g",{transform:`translate(${e-d.width/2} ${t-d.height/2})`,className:h,visibility:d.width?"visible":"hidden",...u,children:[o&&p.jsx("rect",{width:d.width+2*i[0],x:-i[0],y:-i[1],height:d.height+2*i[1],className:"react-flow__edge-textbg",style:a,rx:s,ry:s}),p.jsx("text",{className:"react-flow__edge-text",y:d.height/2,dy:"0.3em",ref:g,style:r,children:n}),c]})}yI.displayName="EdgeText";const one=y.memo(yI);function Kf({id:e,path:t,labelX:n,labelY:r,label:o,labelStyle:a,labelShowBg:i,labelBgStyle:s,labelBgPadding:c,labelBgBorderRadius:l,style:u,markerEnd:d,markerStart:f,className:h,interactionWidth:g=20}){return p.jsxs(p.Fragment,{children:[p.jsx("path",{id:e,style:u,d:t,fill:"none",className:It(["react-flow__edge-path",h]),markerEnd:d,markerStart:f}),g&&p.jsx("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:g,className:"react-flow__edge-interaction"}),o&&vr(n)&&vr(r)?p.jsx(one,{x:n,y:r,label:o,labelStyle:a,labelShowBg:i,labelBgStyle:s,labelBgPadding:c,labelBgBorderRadius:l}):null]})}function gI({pos:e,x1:t,y1:n,x2:r,y2:o}){return e===fe.Left||e===fe.Right?[.5*(t+r),n]:[t,.5*(n+o)]}function vI({sourceX:e,sourceY:t,sourcePosition:n=fe.Bottom,targetX:r,targetY:o,targetPosition:a=fe.Top}){const[i,s]=gI({pos:n,x1:e,y1:t,x2:r,y2:o}),[c,l]=gI({pos:a,x1:r,y1:o,x2:e,y2:t}),[u,d,f,h]=uR({sourceX:e,sourceY:t,targetX:r,targetY:o,sourceControlX:i,sourceControlY:s,targetControlX:c,targetControlY:l});return[`M${e},${t} C${i},${s} ${c},${l} ${r},${o}`,u,d,f,h]}function bI(e){return y.memo(({id:t,sourceX:n,sourceY:r,targetX:o,targetY:a,sourcePosition:i=fe.Bottom,targetPosition:s=fe.Top,label:c,labelStyle:l,labelShowBg:u,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:h,style:g,markerEnd:m,markerStart:v,interactionWidth:b})=>{const[x,_,w]=vI({sourceX:n,sourceY:r,sourcePosition:i,targetX:o,targetY:a,targetPosition:s}),j=e.isInternal?void 0:t;return p.jsx(Kf,{id:j,path:x,labelX:_,labelY:w,label:c,labelStyle:l,labelShowBg:u,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:h,style:g,markerEnd:m,markerStart:v,interactionWidth:b})})}const ane=bI({isInternal:!1}),xI=bI({isInternal:!0});ane.displayName="SimpleBezierEdge",xI.displayName="SimpleBezierEdgeInternal";function wI(e){return y.memo(({id:t,sourceX:n,sourceY:r,targetX:o,targetY:a,label:i,labelStyle:s,labelShowBg:c,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:d,style:f,sourcePosition:h=fe.Bottom,targetPosition:g=fe.Top,markerEnd:m,markerStart:v,pathOptions:b,interactionWidth:x})=>{const[_,w,j]=ix({sourceX:n,sourceY:r,sourcePosition:h,targetX:o,targetY:a,targetPosition:g,borderRadius:b==null?void 0:b.borderRadius,offset:b==null?void 0:b.offset}),E=e.isInternal?void 0:t;return p.jsx(Kf,{id:E,path:_,labelX:w,labelY:j,label:i,labelStyle:s,labelShowBg:c,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:d,style:f,markerEnd:m,markerStart:v,interactionWidth:x})})}const _I=wI({isInternal:!1}),jI=wI({isInternal:!0});_I.displayName="SmoothStepEdge",jI.displayName="SmoothStepEdgeInternal";function EI(e){return y.memo(({id:t,...n})=>{var o;const r=e.isInternal?void 0:t;return p.jsx(_I,{...n,id:r,pathOptions:y.useMemo(()=>{var a;return{borderRadius:0,offset:(a=n.pathOptions)==null?void 0:a.offset}},[(o=n.pathOptions)==null?void 0:o.offset])})})}const ine=EI({isInternal:!1}),SI=EI({isInternal:!0});ine.displayName="StepEdge",SI.displayName="StepEdgeInternal";function CI(e){return y.memo(({id:t,sourceX:n,sourceY:r,targetX:o,targetY:a,label:i,labelStyle:s,labelShowBg:c,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:d,style:f,markerEnd:h,markerStart:g,interactionWidth:m})=>{const[v,b,x]=mR({sourceX:n,sourceY:r,targetX:o,targetY:a}),_=e.isInternal?void 0:t;return p.jsx(Kf,{id:_,path:v,labelX:b,labelY:x,label:i,labelStyle:s,labelShowBg:c,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:d,style:f,markerEnd:h,markerStart:g,interactionWidth:m})})}const sne=CI({isInternal:!1}),OI=CI({isInternal:!0});sne.displayName="StraightEdge",OI.displayName="StraightEdgeInternal";function NI(e){return y.memo(({id:t,sourceX:n,sourceY:r,targetX:o,targetY:a,sourcePosition:i=fe.Bottom,targetPosition:s=fe.Top,label:c,labelStyle:l,labelShowBg:u,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:h,style:g,markerEnd:m,markerStart:v,pathOptions:b,interactionWidth:x})=>{const[_,w,j]=fR({sourceX:n,sourceY:r,sourcePosition:i,targetX:o,targetY:a,targetPosition:s,curvature:b==null?void 0:b.curvature}),E=e.isInternal?void 0:t;return p.jsx(Kf,{id:E,path:_,labelX:w,labelY:j,label:c,labelStyle:l,labelShowBg:u,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:h,style:g,markerEnd:m,markerStart:v,interactionWidth:x})})}const cne=NI({isInternal:!1}),MI=NI({isInternal:!0});cne.displayName="BezierEdge",MI.displayName="BezierEdgeInternal";const kI={default:MI,straight:OI,step:SI,smoothstep:jI,simplebezier:xI},PI={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},lne=(e,t,n)=>n===fe.Left?e-t:n===fe.Right?e+t:e,une=(e,t,n)=>n===fe.Top?e-t:n===fe.Bottom?e+t:e,AI="react-flow__edgeupdater";function TI({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:o,onMouseEnter:a,onMouseOut:i,type:s}){return p.jsx("circle",{onMouseDown:o,onMouseEnter:a,onMouseOut:i,className:It([AI,`${AI}-${s}`]),cx:lne(t,r,e),cy:une(n,r,e),r,stroke:"transparent",fill:"transparent"})}function dne({isReconnectable:e,reconnectRadius:t,edge:n,sourceX:r,sourceY:o,targetX:a,targetY:i,sourcePosition:s,targetPosition:c,onReconnect:l,onReconnectStart:u,onReconnectEnd:d,setReconnecting:f,setUpdateHover:h}){const g=bt(),m=(w,j)=>{if(w.button!==0)return;const{autoPanOnConnect:E,domNode:S,isValidConnection:C,connectionMode:M,connectionRadius:N,lib:P,onConnectStart:R,onConnectEnd:A,cancelConnection:O,nodeLookup:k,rfId:T,panBy:D,updateConnection:I}=g.getState(),L=j.type==="target";f(!0),u==null||u(w,n,j.type);const B=(F,H)=>{f(!1),d==null||d(F,n,j.type,H)},V=F=>l==null?void 0:l(n,F);hx.onPointerDown(w.nativeEvent,{autoPanOnConnect:E,connectionMode:M,connectionRadius:N,domNode:S,handleId:j.id,nodeId:j.nodeId,nodeLookup:k,isTarget:L,edgeUpdaterType:j.type,lib:P,flowId:T,cancelConnection:O,panBy:D,isValidConnection:C,onConnect:V,onConnectStart:R,onConnectEnd:A,onReconnectEnd:B,updateConnection:I,getTransform:()=>g.getState().transform,getFromHandle:()=>g.getState().connection.fromHandle})},v=w=>m(w,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),b=w=>m(w,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),x=()=>h(!0),_=()=>h(!1);return p.jsxs(p.Fragment,{children:[(e===!0||e==="source")&&p.jsx(TI,{position:s,centerX:r,centerY:o,radius:t,onMouseDown:v,onMouseEnter:x,onMouseOut:_,type:"source"}),(e===!0||e==="target")&&p.jsx(TI,{position:c,centerX:a,centerY:i,radius:t,onMouseDown:b,onMouseEnter:x,onMouseOut:_,type:"target"})]})}function fne({id:e,edgesFocusable:t,edgesReconnectable:n,elementsSelectable:r,onClick:o,onDoubleClick:a,onContextMenu:i,onMouseEnter:s,onMouseMove:c,onMouseLeave:l,reconnectRadius:u,onReconnect:d,onReconnectStart:f,onReconnectEnd:h,rfId:g,edgeTypes:m,noPanClassName:v,onError:b,disableKeyboardA11y:x}){let _=Ve($=>$.edgeLookup.get(e));const w=Ve($=>$.defaultEdgeOptions);_=w?{...w,..._}:_;let j=_.type||"default",E=(m==null?void 0:m[j])||kI[j];E===void 0&&(b==null||b("011",bo.error011(j)),j="default",E=kI.default);const S=!!(_.focusable||t&&typeof _.focusable>"u"),C=typeof d<"u"&&(_.reconnectable||n&&typeof _.reconnectable>"u"),M=!!(_.selectable||r&&typeof _.selectable>"u"),N=y.useRef(null),[P,R]=y.useState(!1),[A,O]=y.useState(!1),k=bt(),{zIndex:T,sourceX:D,sourceY:I,targetX:L,targetY:B,sourcePosition:V,targetPosition:F}=Ve(y.useCallback($=>{const ie=$.nodeLookup.get(_.source),ue=$.nodeLookup.get(_.target);if(!ie||!ue)return{zIndex:_.zIndex,...PI};const me=dee({id:e,sourceNode:ie,targetNode:ue,sourceHandle:_.sourceHandle||null,targetHandle:_.targetHandle||null,connectionMode:$.connectionMode,onError:b});return{zIndex:oee({selected:_.selected,zIndex:_.zIndex,sourceNode:ie,targetNode:ue,elevateOnSelect:$.elevateEdgesOnSelect}),...me||PI}},[_.source,_.target,_.sourceHandle,_.targetHandle,_.selected,_.zIndex]),Et),H=y.useMemo(()=>_.markerStart?`url('#${sx(_.markerStart,g)}')`:void 0,[_.markerStart,g]),Q=y.useMemo(()=>_.markerEnd?`url('#${sx(_.markerEnd,g)}')`:void 0,[_.markerEnd,g]);if(_.hidden||D===null||I===null||L===null||B===null)return null;const Y=$=>{var Te;const{addSelectedEdges:ie,unselectNodesAndEdges:ue,multiSelectionActive:me}=k.getState();M&&(k.setState({nodesSelectionActive:!1}),_.selected&&me?(ue({nodes:[],edges:[_]}),(Te=N.current)==null||Te.blur()):ie([e])),o&&o($,_)},re=a?$=>{a($,{..._})}:void 0,G=i?$=>{i($,{..._})}:void 0,q=s?$=>{s($,{..._})}:void 0,W=c?$=>{c($,{..._})}:void 0,Z=l?$=>{l($,{..._})}:void 0,ee=$=>{var ie;if(!x&&WT.includes($.key)&&M){const{unselectNodesAndEdges:ue,addSelectedEdges:me}=k.getState();$.key==="Escape"?((ie=N.current)==null||ie.blur(),ue({edges:[_]})):me([e])}};return p.jsx("svg",{style:{zIndex:T},children:p.jsxs("g",{className:It(["react-flow__edge",`react-flow__edge-${j}`,_.className,v,{selected:_.selected,animated:_.animated,inactive:!M&&!o,updating:P,selectable:M}]),onClick:Y,onDoubleClick:re,onContextMenu:G,onMouseEnter:q,onMouseMove:W,onMouseLeave:Z,onKeyDown:S?ee:void 0,tabIndex:S?0:void 0,role:S?"button":"img","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":_.ariaLabel===null?void 0:_.ariaLabel||`Edge from ${_.source} to ${_.target}`,"aria-describedby":S?`${qR}-${g}`:void 0,ref:N,children:[!A&&p.jsx(E,{id:e,source:_.source,target:_.target,type:_.type,selected:_.selected,animated:_.animated,selectable:M,deletable:_.deletable??!0,label:_.label,labelStyle:_.labelStyle,labelShowBg:_.labelShowBg,labelBgStyle:_.labelBgStyle,labelBgPadding:_.labelBgPadding,labelBgBorderRadius:_.labelBgBorderRadius,sourceX:D,sourceY:I,targetX:L,targetY:B,sourcePosition:V,targetPosition:F,data:_.data,style:_.style,sourceHandleId:_.sourceHandle,targetHandleId:_.targetHandle,markerStart:H,markerEnd:Q,pathOptions:"pathOptions"in _?_.pathOptions:void 0,interactionWidth:_.interactionWidth}),C&&p.jsx(dne,{edge:_,isReconnectable:C,reconnectRadius:u,onReconnect:d,onReconnectStart:f,onReconnectEnd:h,sourceX:D,sourceY:I,targetX:L,targetY:B,sourcePosition:V,targetPosition:F,setUpdateHover:R,setReconnecting:O})]})})}const pne=e=>({width:e.width,height:e.height,edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function RI({defaultMarkerColor:e,onlyRenderVisibleElements:t,rfId:n,edgeTypes:r,noPanClassName:o,onReconnect:a,onEdgeContextMenu:i,onEdgeMouseEnter:s,onEdgeMouseMove:c,onEdgeMouseLeave:l,onEdgeClick:u,reconnectRadius:d,onEdgeDoubleClick:f,onReconnectStart:h,onReconnectEnd:g,disableKeyboardA11y:m}){const{edgesFocusable:v,edgesReconnectable:b,elementsSelectable:x,onError:_}=Ve(pne,Et),w=Zte(t);return p.jsxs("div",{className:"react-flow__edges",children:[p.jsx(rne,{defaultColor:e,rfId:n}),w.map(j=>p.jsx(fne,{id:j,edgesFocusable:v,edgesReconnectable:b,elementsSelectable:x,noPanClassName:o,onReconnect:a,onContextMenu:i,onMouseEnter:s,onMouseMove:c,onMouseLeave:l,onClick:u,reconnectRadius:d,onDoubleClick:f,onReconnectStart:h,onReconnectEnd:g,rfId:n,onError:_,edgeTypes:r,disableKeyboardA11y:m},j))]})}RI.displayName="EdgeRenderer";const hne=y.memo(RI),mne=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function yne({children:e}){const t=Ve(mne);return p.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:t},children:e})}function gne(e){const t=$n(),n=y.useRef(!1);y.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const vne=e=>{var t;return(t=e.panZoom)==null?void 0:t.syncViewport};function bne(e){const t=Ve(vne),n=bt();return y.useEffect(()=>{e&&(t==null||t(e),n.setState({transform:[e.x,e.y,e.zoom]}))},[e,t]),null}function xne(e){return e.connection.inProgress?{...e.connection,to:Sl(e.connection.to,e.transform)}:{...e.connection}}function wne(e){return xne}function _ne(e){const t=wne();return Ve(t,Et)}const jne=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function Ene({containerStyle:e,style:t,type:n,component:r}){const{nodesConnectable:o,width:a,height:i,isValid:s,inProgress:c}=Ve(jne,Et);return a&&o&&c?p.jsx("svg",{style:e,width:a,height:i,className:"react-flow__connectionline react-flow__container",children:p.jsx("g",{className:It(["react-flow__connection",XT(s)]),children:p.jsx(II,{style:t,type:n,CustomComponent:r,isValid:s})})}):null}const II=({style:e,type:t=ta.Bezier,CustomComponent:n,isValid:r})=>{const{inProgress:o,from:a,fromNode:i,fromHandle:s,fromPosition:c,to:l,toNode:u,toHandle:d,toPosition:f}=_ne();if(!o)return;if(n)return p.jsx(n,{connectionLineType:t,connectionLineStyle:e,fromNode:i,fromHandle:s,fromX:a.x,fromY:a.y,toX:l.x,toY:l.y,fromPosition:c,toPosition:f,connectionStatus:XT(r),toNode:u,toHandle:d});let h="";const g={sourceX:a.x,sourceY:a.y,sourcePosition:c,targetX:l.x,targetY:l.y,targetPosition:f};switch(t){case ta.Bezier:[h]=fR(g);break;case ta.SimpleBezier:[h]=vI(g);break;case ta.Step:[h]=ix({...g,borderRadius:0});break;case ta.SmoothStep:[h]=ix(g);break;default:[h]=mR(g)}return p.jsx("path",{d:h,fill:"none",className:"react-flow__connection-path",style:e})};II.displayName="ConnectionLine";const Sne={};function DI(e=Sne){y.useRef(e),bt(),y.useEffect(()=>{},[e])}function Cne(){bt(),y.useRef(!1),y.useEffect(()=>{},[])}function LI({nodeTypes:e,edgeTypes:t,onInit:n,onNodeClick:r,onEdgeClick:o,onNodeDoubleClick:a,onEdgeDoubleClick:i,onNodeMouseEnter:s,onNodeMouseMove:c,onNodeMouseLeave:l,onNodeContextMenu:u,onSelectionContextMenu:d,onSelectionStart:f,onSelectionEnd:h,connectionLineType:g,connectionLineStyle:m,connectionLineComponent:v,connectionLineContainerStyle:b,selectionKeyCode:x,selectionOnDrag:_,selectionMode:w,multiSelectionKeyCode:j,panActivationKeyCode:E,zoomActivationKeyCode:S,deleteKeyCode:C,onlyRenderVisibleElements:M,elementsSelectable:N,defaultViewport:P,translateExtent:R,minZoom:A,maxZoom:O,preventScrolling:k,defaultMarkerColor:T,zoomOnScroll:D,zoomOnPinch:I,panOnScroll:L,panOnScrollSpeed:B,panOnScrollMode:V,zoomOnDoubleClick:F,panOnDrag:H,onPaneClick:Q,onPaneMouseEnter:Y,onPaneMouseMove:re,onPaneMouseLeave:G,onPaneScroll:q,onPaneContextMenu:W,paneClickDistance:Z,nodeClickDistance:ee,onEdgeContextMenu:$,onEdgeMouseEnter:ie,onEdgeMouseMove:ue,onEdgeMouseLeave:me,reconnectRadius:Te,onReconnect:Ue,onReconnectStart:He,onReconnectEnd:Le,noDragClassName:st,noWheelClassName:qe,noPanClassName:ct,disableKeyboardA11y:Wt,nodeExtent:Ct,rfId:yt,viewport:Rt,onViewportChange:_n}){return DI(e),DI(t),Cne(),gne(n),bne(Rt),p.jsx(Ute,{onPaneClick:Q,onPaneMouseEnter:Y,onPaneMouseMove:re,onPaneMouseLeave:G,onPaneContextMenu:W,onPaneScroll:q,paneClickDistance:Z,deleteKeyCode:C,selectionKeyCode:x,selectionOnDrag:_,selectionMode:w,onSelectionStart:f,onSelectionEnd:h,multiSelectionKeyCode:j,panActivationKeyCode:E,zoomActivationKeyCode:S,elementsSelectable:N,zoomOnScroll:D,zoomOnPinch:I,zoomOnDoubleClick:F,panOnScroll:L,panOnScrollSpeed:B,panOnScrollMode:V,panOnDrag:H,defaultViewport:P,translateExtent:R,minZoom:A,maxZoom:O,onSelectionContextMenu:d,preventScrolling:k,noDragClassName:st,noWheelClassName:qe,noPanClassName:ct,disableKeyboardA11y:Wt,onViewportChange:_n,isControlledViewport:!!Rt,children:p.jsxs(yne,{children:[p.jsx(hne,{edgeTypes:t,onEdgeClick:o,onEdgeDoubleClick:i,onReconnect:Ue,onReconnectStart:He,onReconnectEnd:Le,onlyRenderVisibleElements:M,onEdgeContextMenu:$,onEdgeMouseEnter:ie,onEdgeMouseMove:ue,onEdgeMouseLeave:me,reconnectRadius:Te,defaultMarkerColor:T,noPanClassName:ct,disableKeyboardA11y:Wt,rfId:yt}),p.jsx(Ene,{style:m,type:g,component:v,containerStyle:b}),p.jsx("div",{className:"react-flow__edgelabel-renderer"}),p.jsx(Jte,{nodeTypes:e,onNodeClick:r,onNodeDoubleClick:a,onNodeMouseEnter:s,onNodeMouseMove:c,onNodeMouseLeave:l,onNodeContextMenu:u,nodeClickDistance:ee,onlyRenderVisibleElements:M,noPanClassName:ct,noDragClassName:st,disableKeyboardA11y:Wt,nodeExtent:Ct,rfId:yt}),p.jsx("div",{className:"react-flow__viewport-portal"})]})})}LI.displayName="GraphView";const One=y.memo(LI),FI=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:o,height:a,fitView:i,nodeOrigin:s,nodeExtent:c}={})=>{const l=new Map,u=new Map,d=new Map,f=new Map,h=r??t??[],g=n??e??[],m=s??[0,0],v=c??xl;_R(d,f,h),ux(g,l,u,{nodeOrigin:m,nodeExtent:v,elevateNodesOnSelect:!1});let b=[0,0,1];if(i&&o&&a){const x=jl(l,{filter:E=>!!((E.width||E.initialWidth)&&(E.height||E.initialHeight))}),{x:_,y:w,zoom:j}=ox(x,o,a,.5,2,.1);b=[_,w,j]}return{rfId:"1",width:0,height:0,transform:b,nodes:g,nodeLookup:l,parentLookup:u,edges:h,edgeLookup:f,connectionLookup:d,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:n!==void 0,hasDefaultEdges:r!==void 0,panZoom:null,minZoom:.5,maxZoom:2,translateExtent:xl,nodeExtent:v,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:es.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:m,nodeDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,fitViewOnInit:!1,fitViewDone:!1,fitViewOnInitOptions:void 0,selectNodesOnDrag:!0,multiSelectionActive:!1,connection:{...qT},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanSpeed:15,connectionRadius:20,onError:nee,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1}},Nne=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:o,height:a,fitView:i,nodeOrigin:s,nodeExtent:c})=>Yee((l,u)=>({...FI({nodes:e,edges:t,width:o,height:a,fitView:i,nodeOrigin:s,nodeExtent:c,defaultNodes:n,defaultEdges:r}),setNodes:d=>{const{nodeLookup:f,parentLookup:h,nodeOrigin:g,elevateNodesOnSelect:m}=u();ux(d,f,h,{nodeOrigin:g,nodeExtent:c,elevateNodesOnSelect:m,checkEquality:!0}),l({nodes:d})},setEdges:d=>{const{connectionLookup:f,edgeLookup:h}=u();_R(f,h,d),l({edges:d})},setDefaultNodesAndEdges:(d,f)=>{if(d){const{setNodes:h}=u();h(d),l({hasDefaultNodes:!0})}if(f){const{setEdges:h}=u();h(f),l({hasDefaultEdges:!0})}},updateNodeInternals:(d,f={triggerFitView:!0})=>{const{triggerNodeChanges:h,nodeLookup:g,parentLookup:m,fitViewOnInit:v,fitViewDone:b,fitViewOnInitOptions:x,domNode:_,nodeOrigin:w,nodeExtent:j,debug:E,fitViewSync:S}=u(),{changes:C,updatedInternals:M}=gee(d,g,m,_,w,j);if(M){if(hee(g,m,{nodeOrigin:w,nodeExtent:j}),f.triggerFitView){let N=b;!b&&v&&(N=S({...x,nodes:x==null?void 0:x.nodes})),l({fitViewDone:N})}else l({});(C==null?void 0:C.length)>0&&(E&&console.log("React Flow: trigger node changes",C),h==null||h(C))}},updateNodePositions:(d,f=!1)=>{const h=[],g=[];for(const[m,v]of d){const b={id:m,type:"position",position:v.position,dragging:f};v!=null&&v.expandParent&&(v!=null&&v.parentId)&&b.position&&(h.push({id:m,parentId:v.parentId,rect:{...v.internals.positionAbsolute,width:v.measured.width,height:v.measured.height}}),b.position.x=Math.max(0,b.position.x),b.position.y=Math.max(0,b.position.y)),g.push(b)}if(h.length>0){const{nodeLookup:m,parentLookup:v,nodeOrigin:b}=u(),x=fx(h,m,v,b);g.push(...x)}u().triggerNodeChanges(g)},triggerNodeChanges:d=>{const{onNodesChange:f,setNodes:h,nodes:g,hasDefaultNodes:m,debug:v}=u();if(d!=null&&d.length){if(m){const b=qa(d,g);h(b)}v&&console.log("React Flow: trigger node changes",d),f==null||f(d)}},triggerEdgeChanges:d=>{const{onEdgesChange:f,setEdges:h,edges:g,hasDefaultEdges:m,debug:v}=u();if(d!=null&&d.length){if(m){const b=Ml(d,g);h(b)}v&&console.log("React Flow: trigger edge changes",d),f==null||f(d)}},addSelectedNodes:d=>{const{multiSelectionActive:f,edgeLookup:h,nodeLookup:g,triggerNodeChanges:m,triggerEdgeChanges:v}=u();if(f){const b=d.map(x=>Ya(x,!0));m(b);return}m(ss(g,new Set([...d]),!0)),v(ss(h))},addSelectedEdges:d=>{const{multiSelectionActive:f,edgeLookup:h,nodeLookup:g,triggerNodeChanges:m,triggerEdgeChanges:v}=u();if(f){const b=d.map(x=>Ya(x,!0));v(b);return}v(ss(h,new Set([...d]))),m(ss(g,new Set,!0))},unselectNodesAndEdges:({nodes:d,edges:f}={})=>{const{edges:h,nodes:g,nodeLookup:m,triggerNodeChanges:v,triggerEdgeChanges:b}=u(),x=d||g,_=f||h,w=x.map(E=>{const S=m.get(E.id);return S&&(S.selected=!1),Ya(E.id,!1)}),j=_.map(E=>Ya(E.id,!1));v(w),b(j)},setMinZoom:d=>{const{panZoom:f,maxZoom:h}=u();f==null||f.setScaleExtent([d,h]),l({minZoom:d})},setMaxZoom:d=>{const{panZoom:f,minZoom:h}=u();f==null||f.setScaleExtent([h,d]),l({maxZoom:d})},setTranslateExtent:d=>{var f;(f=u().panZoom)==null||f.setTranslateExtent(d),l({translateExtent:d})},setPaneClickDistance:d=>{var f;(f=u().panZoom)==null||f.setClickDistance(d)},resetSelectedElements:()=>{const{edges:d,nodes:f,triggerNodeChanges:h,triggerEdgeChanges:g}=u(),m=f.reduce((b,x)=>x.selected?[...b,Ya(x.id,!1)]:b,[]),v=d.reduce((b,x)=>x.selected?[...b,Ya(x.id,!1)]:b,[]);h(m),g(v)},setNodeExtent:d=>{const{nodes:f,nodeLookup:h,parentLookup:g,nodeOrigin:m,elevateNodesOnSelect:v,nodeExtent:b}=u();d[0][0]===b[0][0]&&d[0][1]===b[0][1]&&d[1][0]===b[1][0]&&d[1][1]===b[1][1]||(ux(f,h,g,{nodeOrigin:m,nodeExtent:d,elevateNodesOnSelect:v,checkEquality:!1}),l({nodeExtent:d}))},panBy:d=>{const{transform:f,width:h,height:g,panZoom:m,translateExtent:v}=u();return vee({delta:d,panZoom:m,transform:f,translateExtent:v,width:h,height:g})},fitView:d=>{const{panZoom:f,width:h,height:g,minZoom:m,maxZoom:v,nodeLookup:b}=u();if(!f)return Promise.resolve(!1);const x=tx(b,d);return nx({nodes:x,width:h,height:g,panZoom:f,minZoom:m,maxZoom:v},d)},fitViewSync:d=>{const{panZoom:f,width:h,height:g,minZoom:m,maxZoom:v,nodeLookup:b}=u();if(!f)return!1;const x=tx(b,d);return nx({nodes:x,width:h,height:g,panZoom:f,minZoom:m,maxZoom:v},d),x.size>0},cancelConnection:()=>{l({connection:{...qT}})},updateConnection:d=>{l({connection:d})},reset:()=>l({...FI()})}),Object.is);function Mne({initialNodes:e,initialEdges:t,defaultNodes:n,defaultEdges:r,initialWidth:o,initialHeight:a,fitView:i,nodeOrigin:s,nodeExtent:c,children:l}){const[u]=y.useState(()=>Nne({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:o,height:a,fitView:i,nodeOrigin:s,nodeExtent:c}));return p.jsx(Kee,{value:u,children:p.jsx(gte,{children:l})})}function kne({children:e,nodes:t,edges:n,defaultNodes:r,defaultEdges:o,width:a,height:i,fitView:s,nodeOrigin:c,nodeExtent:l}){return y.useContext(Hf)?p.jsx(p.Fragment,{children:e}):p.jsx(Mne,{initialNodes:t,initialEdges:n,defaultNodes:r,defaultEdges:o,initialWidth:a,initialHeight:i,fitView:s,nodeOrigin:c,nodeExtent:l,children:e})}const Pne={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function Ane({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:o,nodeTypes:a,edgeTypes:i,onNodeClick:s,onEdgeClick:c,onInit:l,onMove:u,onMoveStart:d,onMoveEnd:f,onConnect:h,onConnectStart:g,onConnectEnd:m,onClickConnectStart:v,onClickConnectEnd:b,onNodeMouseEnter:x,onNodeMouseMove:_,onNodeMouseLeave:w,onNodeContextMenu:j,onNodeDoubleClick:E,onNodeDragStart:S,onNodeDrag:C,onNodeDragStop:M,onNodesDelete:N,onEdgesDelete:P,onDelete:R,onSelectionChange:A,onSelectionDragStart:O,onSelectionDrag:k,onSelectionDragStop:T,onSelectionContextMenu:D,onSelectionStart:I,onSelectionEnd:L,onBeforeDelete:B,connectionMode:V,connectionLineType:F=ta.Bezier,connectionLineStyle:H,connectionLineComponent:Q,connectionLineContainerStyle:Y,deleteKeyCode:re="Backspace",selectionKeyCode:G="Shift",selectionOnDrag:q=!1,selectionMode:W=wl.Full,panActivationKeyCode:Z="Space",multiSelectionKeyCode:ee=Bf()?"Meta":"Control",zoomActivationKeyCode:$=Bf()?"Meta":"Control",snapToGrid:ie,snapGrid:ue,onlyRenderVisibleElements:me=!1,selectNodesOnDrag:Te,nodesDraggable:Ue,nodesConnectable:He,nodesFocusable:Le,nodeOrigin:st=YR,edgesFocusable:qe,edgesReconnectable:ct,elementsSelectable:Wt=!0,defaultViewport:Ct=ste,minZoom:yt=.5,maxZoom:Rt=2,translateExtent:_n=xl,preventScrolling:Or=!0,nodeExtent:yi,defaultMarkerColor:tr="#b1b1b7",zoomOnScroll:wa=!0,zoomOnPinch:J=!0,panOnScroll:te=!1,panOnScrollSpeed:se=.5,panOnScrollMode:pe=ea.Free,zoomOnDoubleClick:ke=!0,panOnDrag:Mt=!0,onPaneClick:_t,onPaneMouseEnter:$e,onPaneMouseMove:ve,onPaneMouseLeave:we,onPaneScroll:_e,onPaneContextMenu:je,paneClickDistance:Fe=0,nodeClickDistance:dt=0,children:Ot,onReconnect:z,onReconnectStart:X,onReconnectEnd:ne,onEdgeContextMenu:de,onEdgeDoubleClick:Se,onEdgeMouseEnter:Pe,onEdgeMouseMove:Ie,onEdgeMouseLeave:Ce,reconnectRadius:Oe=10,onNodesChange:be,onEdgesChange:De,noDragClassName:We="nodrag",noWheelClassName:gt="nowheel",noPanClassName:jt="nopan",fitView:Xe,fitViewOptions:Mn,connectOnClick:At,attributionPosition:gi,proOptions:Nr,defaultEdgeOptions:_a,elevateNodesOnSelect:Jr,elevateEdgesOnSelect:Uu,disableKeyboardA11y:nr=!1,autoPanOnConnect:ac,autoPanOnNodeDrag:ic,autoPanSpeed:sc,connectionRadius:nt,isValidConnection:kn,onError:vi,style:Nt,id:Vo,nodeDragThreshold:sm,viewport:ZE,onViewportChange:T_e,width:R_e,height:I_e,colorMode:D_e="light",debug:L_e,...F_e},B_e){const GE=Vo||"1",$_e=dte(D_e);return p.jsx("div",{...F_e,style:{...Nt,...Pne},ref:B_e,className:It(["react-flow",o,$_e]),"data-testid":"rf__wrapper",id:Vo,children:p.jsxs(kne,{nodes:e,edges:t,width:R_e,height:I_e,fitView:Xe,nodeOrigin:st,nodeExtent:yi,children:[p.jsx(One,{onInit:l,onNodeClick:s,onEdgeClick:c,onNodeMouseEnter:x,onNodeMouseMove:_,onNodeMouseLeave:w,onNodeContextMenu:j,onNodeDoubleClick:E,nodeTypes:a,edgeTypes:i,connectionLineType:F,connectionLineStyle:H,connectionLineComponent:Q,connectionLineContainerStyle:Y,selectionKeyCode:G,selectionOnDrag:q,selectionMode:W,deleteKeyCode:re,multiSelectionKeyCode:ee,panActivationKeyCode:Z,zoomActivationKeyCode:$,onlyRenderVisibleElements:me,defaultViewport:Ct,translateExtent:_n,minZoom:yt,maxZoom:Rt,preventScrolling:Or,zoomOnScroll:wa,zoomOnPinch:J,zoomOnDoubleClick:ke,panOnScroll:te,panOnScrollSpeed:se,panOnScrollMode:pe,panOnDrag:Mt,onPaneClick:_t,onPaneMouseEnter:$e,onPaneMouseMove:ve,onPaneMouseLeave:we,onPaneScroll:_e,onPaneContextMenu:je,paneClickDistance:Fe,nodeClickDistance:dt,onSelectionContextMenu:D,onSelectionStart:I,onSelectionEnd:L,onReconnect:z,onReconnectStart:X,onReconnectEnd:ne,onEdgeContextMenu:de,onEdgeDoubleClick:Se,onEdgeMouseEnter:Pe,onEdgeMouseMove:Ie,onEdgeMouseLeave:Ce,reconnectRadius:Oe,defaultMarkerColor:tr,noDragClassName:We,noWheelClassName:gt,noPanClassName:jt,rfId:GE,disableKeyboardA11y:nr,nodeExtent:yi,viewport:ZE,onViewportChange:T_e}),p.jsx(ute,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:h,onConnectStart:g,onConnectEnd:m,onClickConnectStart:v,onClickConnectEnd:b,nodesDraggable:Ue,nodesConnectable:He,nodesFocusable:Le,edgesFocusable:qe,edgesReconnectable:ct,elementsSelectable:Wt,elevateNodesOnSelect:Jr,elevateEdgesOnSelect:Uu,minZoom:yt,maxZoom:Rt,nodeExtent:yi,onNodesChange:be,onEdgesChange:De,snapToGrid:ie,snapGrid:ue,connectionMode:V,translateExtent:_n,connectOnClick:At,defaultEdgeOptions:_a,fitView:Xe,fitViewOptions:Mn,onNodesDelete:N,onEdgesDelete:P,onDelete:R,onNodeDragStart:S,onNodeDrag:C,onNodeDragStop:M,onSelectionDrag:k,onSelectionDragStart:O,onSelectionDragStop:T,onMove:u,onMoveStart:d,onMoveEnd:f,noPanClassName:jt,nodeOrigin:st,rfId:GE,autoPanOnConnect:ac,autoPanOnNodeDrag:ic,autoPanSpeed:sc,onError:vi,connectionRadius:nt,isValidConnection:kn,selectNodesOnDrag:Te,nodeDragThreshold:sm,onBeforeDelete:B,paneClickDistance:Fe,debug:L_e}),p.jsx(ite,{onSelectionChange:A}),Ot,p.jsx(tte,{proOptions:Nr,position:gi}),p.jsx(Gee,{rfId:GE,disableKeyboardA11y:nr})]})})}var Tne=oI(Ane);const Rne=e=>{var t;return(t=e.domNode)==null?void 0:t.querySelector(".react-flow__viewport-portal")};function Ine({children:e}){const t=Ve(Rne);return t?cc.createPortal(e,t):null}const Dne=e=>e.nodes;function Lne(){return Ve(Dne,Et)}function Xf({type:e,id:t=null,nodeId:n,onConnect:r,onDisconnect:o}){const a=_x(),i=n??a,s=y.useRef(null),c=Ve(l=>l.connectionLookup.get(`${i}-${e}-${t}`),JG);return y.useEffect(()=>{if(s.current&&s.current!==c){const l=c??new Map;KT(s.current,l,o),KT(l,s.current,r)}s.current=c??new Map},[c,r,o]),y.useMemo(()=>Array.from((c==null?void 0:c.values())??[]),[c])}fn=function(e){return Ve(y.useCallback(t=>t.nodeLookup.get(e),[e]),Et)};function Fne({dimensions:e,lineWidth:t,variant:n,className:r}){return p.jsx("path",{strokeWidth:t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:It(["react-flow__background-pattern",n,r])})}function Bne({radius:e,className:t}){return p.jsx("circle",{cx:e,cy:e,r:e,className:It(["react-flow__background-pattern","dots",t])})}var _o;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(_o||(_o={}));const $ne={[_o.Dots]:1,[_o.Lines]:1,[_o.Cross]:6},zne=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function BI({id:e,variant:t=_o.Dots,gap:n=20,size:r,lineWidth:o=1,offset:a=0,color:i,bgColor:s,style:c,className:l,patternClassName:u}){const d=y.useRef(null),{transform:f,patternId:h}=Ve(zne,Et),g=r||$ne[t],m=t===_o.Dots,v=t===_o.Cross,b=Array.isArray(n)?n:[n,n],x=[b[0]*f[2]||1,b[1]*f[2]||1],_=g*f[2],w=Array.isArray(a)?a:[a,a],j=v?[_,_]:x,E=[w[0]*f[2]||1+j[0]/2,w[1]*f[2]||1+j[1]/2],S=`${h}${e||""}`;return p.jsxs("svg",{className:It(["react-flow__background",l]),style:{...c,...qf,"--xy-background-color-props":s,"--xy-background-pattern-color-props":i},ref:d,"data-testid":"rf__background",children:[p.jsx("pattern",{id:S,x:f[0]%x[0],y:f[1]%x[1],width:x[0],height:x[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${E[0]},-${E[1]})`,children:m?p.jsx(Bne,{radius:_/2,className:u}):p.jsx(Fne,{dimensions:j,lineWidth:o,variant:t,className:u})}),p.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${S})`})]})}BI.displayName="Background";const Vne=y.memo(BI);function Une(){return p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:p.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function Hne(){return p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:p.jsx("path",{d:"M0 0h32v4.2H0z"})})}function Wne(){return p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:p.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function qne(){return p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:p.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function Yne(){return p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:p.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function Qf({children:e,className:t,...n}){return p.jsx("button",{type:"button",className:It(["react-flow__controls-button",t]),...n,children:e})}const Kne=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom});function $I({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:o,onZoomIn:a,onZoomOut:i,onFitView:s,onInteractiveChange:c,className:l,children:u,position:d="bottom-left",orientation:f="vertical","aria-label":h="React Flow controls"}){const g=bt(),{isInteractive:m,minZoomReached:v,maxZoomReached:b}=Ve(Kne,Et),{zoomIn:x,zoomOut:_,fitView:w}=$n(),j=()=>{x(),a==null||a()},E=()=>{_(),i==null||i()},S=()=>{w(o),s==null||s()},C=()=>{g.setState({nodesDraggable:!m,nodesConnectable:!m,elementsSelectable:!m}),c==null||c(!m)},M=f==="horizontal"?"horizontal":"vertical";return p.jsxs(is,{className:It(["react-flow__controls",M,l]),position:d,style:e,"data-testid":"rf__controls","aria-label":h,children:[t&&p.jsxs(p.Fragment,{children:[p.jsx(Qf,{onClick:j,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:b,children:p.jsx(Une,{})}),p.jsx(Qf,{onClick:E,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:v,children:p.jsx(Hne,{})})]}),n&&p.jsx(Qf,{className:"react-flow__controls-fitview",onClick:S,title:"fit view","aria-label":"fit view",children:p.jsx(Wne,{})}),r&&p.jsx(Qf,{className:"react-flow__controls-interactive",onClick:C,title:"toggle interactivity","aria-label":"toggle interactivity",children:m?p.jsx(Yne,{}):p.jsx(qne,{})}),u]})}$I.displayName="Controls";const Xne=y.memo($I);function Qne({id:e,x:t,y:n,width:r,height:o,style:a,color:i,strokeColor:s,strokeWidth:c,className:l,borderRadius:u,shapeRendering:d,selected:f,onClick:h}){const{background:g,backgroundColor:m}=a||{},v=i||g||m;return p.jsx("rect",{className:It(["react-flow__minimap-node",{selected:f},l]),x:t,y:n,rx:u,ry:u,width:r,height:o,style:{fill:v,stroke:s,strokeWidth:c},shapeRendering:d,onClick:h?b=>h(b,e):void 0})}const Jne=y.memo(Qne),Zne=e=>e.nodes.map(t=>t.id),jx=e=>e instanceof Function?e:()=>e;function Gne({nodeStrokeColor:e,nodeColor:t,nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:o,nodeComponent:a=Jne,onClick:i}){const s=Ve(Zne,Et),c=jx(t),l=jx(e),u=jx(n),d=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return p.jsx(p.Fragment,{children:s.map(f=>p.jsx(tre,{id:f,nodeColorFunc:c,nodeStrokeColorFunc:l,nodeClassNameFunc:u,nodeBorderRadius:r,nodeStrokeWidth:o,NodeComponent:a,onClick:i,shapeRendering:d},f))})}function ere({id:e,nodeColorFunc:t,nodeStrokeColorFunc:n,nodeClassNameFunc:r,nodeBorderRadius:o,nodeStrokeWidth:a,shapeRendering:i,NodeComponent:s,onClick:c}){const{node:l,x:u,y:d,width:f,height:h}=Ve(g=>{const m=g.nodeLookup.get(e),{x:v,y:b}=m.internals.positionAbsolute,{width:x,height:_}=xo(m);return{node:m,x:v,y:b,width:x,height:_}},Et);return!l||l.hidden||!aR(l)?null:p.jsx(s,{x:u,y:d,width:f,height:h,style:l.style,selected:!!l.selected,className:r(l),color:t(l),borderRadius:o,strokeColor:n(l),strokeWidth:a,shapeRendering:i,onClick:c,id:l.id})}const tre=y.memo(ere);var nre=y.memo(Gne);const rre=200,ore=150,are=e=>{const t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:t,boundingRect:e.nodeLookup.size>0?nR(jl(e.nodeLookup),t):t,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height}},ire="react-flow__minimap-desc";function zI({style:e,className:t,nodeStrokeColor:n,nodeColor:r,nodeClassName:o="",nodeBorderRadius:a=5,nodeStrokeWidth:i,nodeComponent:s,bgColor:c,maskColor:l,maskStrokeColor:u,maskStrokeWidth:d,position:f="bottom-right",onClick:h,onNodeClick:g,pannable:m=!1,zoomable:v=!1,ariaLabel:b="React Flow mini map",inversePan:x,zoomStep:_=10,offsetScale:w=5}){const j=bt(),E=y.useRef(null),{boundingRect:S,viewBB:C,rfId:M,panZoom:N,translateExtent:P,flowWidth:R,flowHeight:A}=Ve(are,Et),O=(e==null?void 0:e.width)??rre,k=(e==null?void 0:e.height)??ore,T=S.width/O,D=S.height/k,I=Math.max(T,D),L=I*O,B=I*k,V=w*I,F=S.x-(L-S.width)/2-V,H=S.y-(B-S.height)/2-V,Q=L+V*2,Y=B+V*2,re=`${ire}-${M}`,G=y.useRef(0),q=y.useRef();G.current=I,y.useEffect(()=>{if(E.current&&N)return q.current=Cee({domNode:E.current,panZoom:N,getTransform:()=>j.getState().transform,getViewScale:()=>G.current}),()=>{var ee;(ee=q.current)==null||ee.destroy()}},[N]),y.useEffect(()=>{var ee;(ee=q.current)==null||ee.update({translateExtent:P,width:R,height:A,inversePan:x,pannable:m,zoomStep:_,zoomable:v})},[m,v,x,_,P,R,A]);const W=h?ee=>{var ue;const[$,ie]=((ue=q.current)==null?void 0:ue.pointer(ee))||[0,0];h(ee,{x:$,y:ie})}:void 0,Z=g?y.useCallback((ee,$)=>{const ie=j.getState().nodeLookup.get($);g(ee,ie)},[]):void 0;return p.jsx(is,{position:f,style:{...e,"--xy-minimap-background-color-props":typeof c=="string"?c:void 0,"--xy-minimap-mask-background-color-props":typeof l=="string"?l:void 0,"--xy-minimap-mask-stroke-color-props":typeof u=="string"?u:void 0,"--xy-minimap-mask-stroke-width-props":typeof d=="number"?d*I:void 0,"--xy-minimap-node-background-color-props":typeof r=="string"?r:void 0,"--xy-minimap-node-stroke-color-props":typeof n=="string"?n:void 0,"--xy-minimap-node-stroke-width-props":typeof i=="string"?i:void 0},className:It(["react-flow__minimap",t]),"data-testid":"rf__minimap",children:p.jsxs("svg",{width:O,height:k,viewBox:`${F} ${H} ${Q} ${Y}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":re,ref:E,onClick:W,children:[b&&p.jsx("title",{id:re,children:b}),p.jsx(nre,{onClick:Z,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:a,nodeClassName:o,nodeStrokeWidth:i,nodeComponent:s}),p.jsx("path",{className:"react-flow__minimap-mask",d:`M${F-V},${H-V}h${Q+V*2}v${Y+V*2}h${-Q-V*2}z
        M${C.x},${C.y}h${C.width}v${C.height}h${-C.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}zI.displayName="MiniMap";const sre=y.memo(zI);function cre({nodeId:e,position:t,variant:n=as.Handle,className:r,style:o={},children:a,color:i,minWidth:s=10,minHeight:c=10,maxWidth:l=Number.MAX_VALUE,maxHeight:u=Number.MAX_VALUE,keepAspectRatio:d=!1,shouldResize:f,onResizeStart:h,onResize:g,onResizeEnd:m}){const v=_x(),b=typeof e=="string"?e:v,x=bt(),_=y.useRef(null),w=n===as.Line?"right":"bottom-right",j=t??w,E=y.useRef(null);y.useEffect(()=>{if(!(!_.current||!b))return E.current||(E.current=Uee({domNode:_.current,nodeId:b,getStoreItems:()=>{const{nodeLookup:N,transform:P,snapGrid:R,snapToGrid:A,nodeOrigin:O,domNode:k}=x.getState();return{nodeLookup:N,transform:P,snapGrid:R,snapToGrid:A,nodeOrigin:O,paneDomNode:k}},onChange:(N,P)=>{const{triggerNodeChanges:R,nodeLookup:A,parentLookup:O,nodeOrigin:k}=x.getState(),T=[],D={x:N.x,y:N.y},I=A.get(b);if(I&&I.expandParent&&I.parentId){const L=I.origin??k,B=N.width??I.measured.width,V=N.height??I.measured.height,F={id:I.id,parentId:I.parentId,rect:{width:B,height:V,...iR({x:N.x??I.position.x,y:N.y??I.position.y},{width:B,height:V},I.parentId,A,L)}},H=fx([F],A,O,k);T.push(...H),D.x=N.x?Math.max(L[0]*B,N.x):void 0,D.y=N.y?Math.max(L[1]*V,N.y):void 0}if(D.x!==void 0&&D.y!==void 0){const L={id:b,type:"position",position:{...D}};T.push(L)}if(N.width!==void 0&&N.height!==void 0){const L={id:b,type:"dimensions",resizing:!0,setAttributes:!0,dimensions:{width:N.width,height:N.height}};T.push(L)}for(const L of P){const B={...L,type:"position"};T.push(B)}R(T)},onEnd:()=>{const N={id:b,type:"dimensions",resizing:!1};x.getState().triggerNodeChanges([N])}})),E.current.update({controlPosition:j,boundaries:{minWidth:s,minHeight:c,maxWidth:l,maxHeight:u},keepAspectRatio:d,onResizeStart:h,onResize:g,onResizeEnd:m,shouldResize:f}),()=>{var N;(N=E.current)==null||N.destroy()}},[j,s,c,l,u,d,h,g,m,f]);const S=j.split("-"),C=n===as.Line?"borderColor":"backgroundColor",M=i?{...o,[C]:i}:o;return p.jsx("div",{className:It(["react-flow__resize-control","nodrag",...S,n,r]),ref:_,style:M,children:a})}const VI=y.memo(cre);function lre({nodeId:e,isVisible:t=!0,handleClassName:n,handleStyle:r,lineClassName:o,lineStyle:a,color:i,minWidth:s=10,minHeight:c=10,maxWidth:l=Number.MAX_VALUE,maxHeight:u=Number.MAX_VALUE,keepAspectRatio:d=!1,shouldResize:f,onResizeStart:h,onResize:g,onResizeEnd:m}){return t?p.jsxs(p.Fragment,{children:[Dee.map(v=>p.jsx(VI,{className:o,style:a,nodeId:e,position:v,variant:as.Line,color:i,minWidth:s,minHeight:c,maxWidth:l,maxHeight:u,onResizeStart:h,keepAspectRatio:d,shouldResize:f,onResize:g,onResizeEnd:m},v)),Iee.map(v=>p.jsx(VI,{className:n,style:r,nodeId:e,position:v,color:i,minWidth:s,minHeight:c,maxWidth:l,maxHeight:u,onResizeStart:h,keepAspectRatio:d,shouldResize:f,onResize:g,onResizeEnd:m},v))]}):null}var Ex,UI;function ure(){if(UI)return Ex;UI=1;var e=function(b){return t(b)&&!n(b)};function t(b){return!!b&&typeof b=="object"}function n(b){var x=Object.prototype.toString.call(b);return x==="[object RegExp]"||x==="[object Date]"||a(b)}var r=typeof Symbol=="function"&&Symbol.for,o=r?Symbol.for("react.element"):60103;function a(b){return b.$$typeof===o}function i(b){return Array.isArray(b)?[]:{}}function s(b,x){return x.clone!==!1&&x.isMergeableObject(b)?m(i(b),b,x):b}function c(b,x,_){return b.concat(x).map(function(w){return s(w,_)})}function l(b,x){if(!x.customMerge)return m;var _=x.customMerge(b);return typeof _=="function"?_:m}function u(b){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(b).filter(function(x){return Object.propertyIsEnumerable.call(b,x)}):[]}function d(b){return Object.keys(b).concat(u(b))}function f(b,x){try{return x in b}catch{return!1}}function h(b,x){return f(b,x)&&!(Object.hasOwnProperty.call(b,x)&&Object.propertyIsEnumerable.call(b,x))}function g(b,x,_){var w={};return _.isMergeableObject(b)&&d(b).forEach(function(j){w[j]=s(b[j],_)}),d(x).forEach(function(j){h(b,j)||(f(b,j)&&_.isMergeableObject(x[j])?w[j]=l(j,_)(b[j],x[j],_):w[j]=s(x[j],_))}),w}function m(b,x,_){_=_||{},_.arrayMerge=_.arrayMerge||c,_.isMergeableObject=_.isMergeableObject||e,_.cloneUnlessOtherwiseSpecified=s;var w=Array.isArray(x),j=Array.isArray(b),E=w===j;return E?w?_.arrayMerge(b,x,_):g(b,x,_):s(x,_)}m.all=function(b,x){if(!Array.isArray(b))throw new Error("first argument should be an array");return b.reduce(function(_,w){return m(_,w,x)},{})};var v=m;return Ex=v,Ex}var dre=ure();const Jf=Qe(dre);var HI={},WI;function fre(){if(WI)return HI;WI=1;var e;return function(t){(function(n){var r=typeof globalThis=="object"?globalThis:typeof uc=="object"?uc:typeof self=="object"?self:typeof this=="object"?this:c(),o=a(t);typeof r.Reflect<"u"&&(o=a(r.Reflect,o)),n(o,r),typeof r.Reflect>"u"&&(r.Reflect=t);function a(l,u){return function(d,f){Object.defineProperty(l,d,{configurable:!0,writable:!0,value:f}),u&&u(d,f)}}function i(){try{return Function("return this;")()}catch{}}function s(){try{return(0,eval)("(function() { return this; })()")}catch{}}function c(){return i()||s()}})(function(n,r){var o=Object.prototype.hasOwnProperty,a=typeof Symbol=="function",i=a&&typeof Symbol.toPrimitive<"u"?Symbol.toPrimitive:"@@toPrimitive",s=a&&typeof Symbol.iterator<"u"?Symbol.iterator:"@@iterator",c=typeof Object.create=="function",l={__proto__:[]}instanceof Array,u=!c&&!l,d={create:c?function(){return wa(Object.create(null))}:l?function(){return wa({__proto__:null})}:function(){return wa({})},has:u?function(J,te){return o.call(J,te)}:function(J,te){return te in J},get:u?function(J,te){return o.call(J,te)?J[te]:void 0}:function(J,te){return J[te]}},f=Object.getPrototypeOf(Function),h=typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:Or(),g=typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:yi(),m=typeof WeakMap=="function"?WeakMap:tr(),v=a?Symbol.for("@reflect-metadata:registry"):void 0,b=Ct(),x=yt(b);function _(J,te,se,pe){if(H(se)){if(!$(J))throw new TypeError;if(!ue(te))throw new TypeError;return A(J,te)}else{if(!$(J))throw new TypeError;if(!re(te))throw new TypeError;if(!re(pe)&&!H(pe)&&!Q(pe))throw new TypeError;return Q(pe)&&(pe=void 0),se=ee(se),O(J,te,se,pe)}}n("decorate",_);function w(J,te){function se(pe,ke){if(!re(pe))throw new TypeError;if(!H(ke)&&!me(ke))throw new TypeError;L(J,te,pe,ke)}return se}n("metadata",w);function j(J,te,se,pe){if(!re(se))throw new TypeError;return H(pe)||(pe=ee(pe)),L(J,te,se,pe)}n("defineMetadata",j);function E(J,te,se){if(!re(te))throw new TypeError;return H(se)||(se=ee(se)),k(J,te,se)}n("hasMetadata",E);function S(J,te,se){if(!re(te))throw new TypeError;return H(se)||(se=ee(se)),T(J,te,se)}n("hasOwnMetadata",S);function C(J,te,se){if(!re(te))throw new TypeError;return H(se)||(se=ee(se)),D(J,te,se)}n("getMetadata",C);function M(J,te,se){if(!re(te))throw new TypeError;return H(se)||(se=ee(se)),I(J,te,se)}n("getOwnMetadata",M);function N(J,te){if(!re(J))throw new TypeError;return H(te)||(te=ee(te)),B(J,te)}n("getMetadataKeys",N);function P(J,te){if(!re(J))throw new TypeError;return H(te)||(te=ee(te)),V(J,te)}n("getOwnMetadataKeys",P);function R(J,te,se){if(!re(te))throw new TypeError;if(H(se)||(se=ee(se)),!re(te))throw new TypeError;H(se)||(se=ee(se));var pe=_n(te,se,!1);return H(pe)?!1:pe.OrdinaryDeleteMetadata(J,te,se)}n("deleteMetadata",R);function A(J,te){for(var se=J.length-1;se>=0;--se){var pe=J[se],ke=pe(te);if(!H(ke)&&!Q(ke)){if(!ue(ke))throw new TypeError;te=ke}}return te}function O(J,te,se,pe){for(var ke=J.length-1;ke>=0;--ke){var Mt=J[ke],_t=Mt(te,se,pe);if(!H(_t)&&!Q(_t)){if(!re(_t))throw new TypeError;pe=_t}}return pe}function k(J,te,se){var pe=T(J,te,se);if(pe)return!0;var ke=ct(te);return Q(ke)?!1:k(J,ke,se)}function T(J,te,se){var pe=_n(te,se,!1);return H(pe)?!1:W(pe.OrdinaryHasOwnMetadata(J,te,se))}function D(J,te,se){var pe=T(J,te,se);if(pe)return I(J,te,se);var ke=ct(te);if(!Q(ke))return D(J,ke,se)}function I(J,te,se){var pe=_n(te,se,!1);if(!H(pe))return pe.OrdinaryGetOwnMetadata(J,te,se)}function L(J,te,se,pe){var ke=_n(se,pe,!0);ke.OrdinaryDefineOwnMetadata(J,te,se,pe)}function B(J,te){var se=V(J,te),pe=ct(J);if(pe===null)return se;var ke=B(pe,te);if(ke.length<=0)return se;if(se.length<=0)return ke;for(var Mt=new g,_t=[],$e=0,ve=se;$e<ve.length;$e++){var we=ve[$e],_e=Mt.has(we);_e||(Mt.add(we),_t.push(we))}for(var je=0,Fe=ke;je<Fe.length;je++){var we=Fe[je],_e=Mt.has(we);_e||(Mt.add(we),_t.push(we))}return _t}function V(J,te){var se=_n(J,te,!1);return se?se.OrdinaryOwnMetadataKeys(J,te):[]}function F(J){if(J===null)return 1;switch(typeof J){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return J===null?1:6;default:return 6}}function H(J){return J===void 0}function Q(J){return J===null}function Y(J){return typeof J=="symbol"}function re(J){return typeof J=="object"?J!==null:typeof J=="function"}function G(J,te){switch(F(J)){case 0:return J;case 1:return J;case 2:return J;case 3:return J;case 4:return J;case 5:return J}var se="string",pe=Ue(J,i);if(pe!==void 0){var ke=pe.call(J,se);if(re(ke))throw new TypeError;return ke}return q(J)}function q(J,te){var se,pe;{var ke=J.toString;if(ie(ke)){var pe=ke.call(J);if(!re(pe))return pe}var se=J.valueOf;if(ie(se)){var pe=se.call(J);if(!re(pe))return pe}}throw new TypeError}function W(J){return!!J}function Z(J){return""+J}function ee(J){var te=G(J);return Y(te)?te:Z(te)}function $(J){return Array.isArray?Array.isArray(J):J instanceof Object?J instanceof Array:Object.prototype.toString.call(J)==="[object Array]"}function ie(J){return typeof J=="function"}function ue(J){return typeof J=="function"}function me(J){switch(F(J)){case 3:return!0;case 4:return!0;default:return!1}}function Te(J,te){return J===te||J!==J&&te!==te}function Ue(J,te){var se=J[te];if(se!=null){if(!ie(se))throw new TypeError;return se}}function He(J){var te=Ue(J,s);if(!ie(te))throw new TypeError;var se=te.call(J);if(!re(se))throw new TypeError;return se}function Le(J){return J.value}function st(J){var te=J.next();return te.done?!1:te}function qe(J){var te=J.return;te&&te.call(J)}function ct(J){var te=Object.getPrototypeOf(J);if(typeof J!="function"||J===f||te!==f)return te;var se=J.prototype,pe=se&&Object.getPrototypeOf(se);if(pe==null||pe===Object.prototype)return te;var ke=pe.constructor;return typeof ke!="function"||ke===J?te:ke}function Wt(){var J;!H(v)&&typeof r.Reflect<"u"&&!(v in r.Reflect)&&typeof r.Reflect.defineMetadata=="function"&&(J=Rt(r.Reflect));var te,se,pe,ke=new m,Mt={registerProvider:_t,getProvider:ve,setProvider:_e};return Mt;function _t(je){if(!Object.isExtensible(Mt))throw new Error("Cannot add provider to a frozen registry.");switch(!0){case J===je:break;case H(te):te=je;break;case te===je:break;case H(se):se=je;break;case se===je:break;default:pe===void 0&&(pe=new g),pe.add(je);break}}function $e(je,Fe){if(!H(te)){if(te.isProviderFor(je,Fe))return te;if(!H(se)){if(se.isProviderFor(je,Fe))return te;if(!H(pe))for(var dt=He(pe);;){var Ot=st(dt);if(!Ot)return;var z=Le(Ot);if(z.isProviderFor(je,Fe))return qe(dt),z}}}if(!H(J)&&J.isProviderFor(je,Fe))return J}function ve(je,Fe){var dt=ke.get(je),Ot;return H(dt)||(Ot=dt.get(Fe)),H(Ot)&&(Ot=$e(je,Fe),H(Ot)||(H(dt)&&(dt=new h,ke.set(je,dt)),dt.set(Fe,Ot))),Ot}function we(je){if(H(je))throw new TypeError;return te===je||se===je||!H(pe)&&pe.has(je)}function _e(je,Fe,dt){if(!we(dt))throw new Error("Metadata provider not registered.");var Ot=ve(je,Fe);if(Ot!==dt){if(!H(Ot))return!1;var z=ke.get(je);H(z)&&(z=new h,ke.set(je,z)),z.set(Fe,dt)}return!0}}function Ct(){var J;return!H(v)&&re(r.Reflect)&&Object.isExtensible(r.Reflect)&&(J=r.Reflect[v]),H(J)&&(J=Wt()),!H(v)&&re(r.Reflect)&&Object.isExtensible(r.Reflect)&&Object.defineProperty(r.Reflect,v,{enumerable:!1,configurable:!1,writable:!1,value:J}),J}function yt(J){var te=new m,se={isProviderFor:function(we,_e){var je=te.get(we);return H(je)?!1:je.has(_e)},OrdinaryDefineOwnMetadata:_t,OrdinaryHasOwnMetadata:ke,OrdinaryGetOwnMetadata:Mt,OrdinaryOwnMetadataKeys:$e,OrdinaryDeleteMetadata:ve};return b.registerProvider(se),se;function pe(we,_e,je){var Fe=te.get(we),dt=!1;if(H(Fe)){if(!je)return;Fe=new h,te.set(we,Fe),dt=!0}var Ot=Fe.get(_e);if(H(Ot)){if(!je)return;if(Ot=new h,Fe.set(_e,Ot),!J.setProvider(we,_e,se))throw Fe.delete(_e),dt&&te.delete(we),new Error("Wrong provider for target.")}return Ot}function ke(we,_e,je){var Fe=pe(_e,je,!1);return H(Fe)?!1:W(Fe.has(we))}function Mt(we,_e,je){var Fe=pe(_e,je,!1);if(!H(Fe))return Fe.get(we)}function _t(we,_e,je,Fe){var dt=pe(je,Fe,!0);dt.set(we,_e)}function $e(we,_e){var je=[],Fe=pe(we,_e,!1);if(H(Fe))return je;for(var dt=Fe.keys(),Ot=He(dt),z=0;;){var X=st(Ot);if(!X)return je.length=z,je;var ne=Le(X);try{je[z]=ne}catch(de){try{qe(Ot)}finally{throw de}}z++}}function ve(we,_e,je){var Fe=pe(_e,je,!1);if(H(Fe)||!Fe.delete(we))return!1;if(Fe.size===0){var dt=te.get(_e);H(dt)||(dt.delete(je),dt.size===0&&te.delete(dt))}return!0}}function Rt(J){var te=J.defineMetadata,se=J.hasOwnMetadata,pe=J.getOwnMetadata,ke=J.getOwnMetadataKeys,Mt=J.deleteMetadata,_t=new m,$e={isProviderFor:function(ve,we){var _e=_t.get(ve);return!H(_e)&&_e.has(we)?!0:ke(ve,we).length?(H(_e)&&(_e=new g,_t.set(ve,_e)),_e.add(we),!0):!1},OrdinaryDefineOwnMetadata:te,OrdinaryHasOwnMetadata:se,OrdinaryGetOwnMetadata:pe,OrdinaryOwnMetadataKeys:ke,OrdinaryDeleteMetadata:Mt};return $e}function _n(J,te,se){var pe=b.getProvider(J,te);if(!H(pe))return pe;if(se){if(b.setProvider(J,te,x))return x;throw new Error("Illegal state.")}}function Or(){var J={},te=[],se=function(){function $e(ve,we,_e){this._index=0,this._keys=ve,this._values=we,this._selector=_e}return $e.prototype["@@iterator"]=function(){return this},$e.prototype[s]=function(){return this},$e.prototype.next=function(){var ve=this._index;if(ve>=0&&ve<this._keys.length){var we=this._selector(this._keys[ve],this._values[ve]);return ve+1>=this._keys.length?(this._index=-1,this._keys=te,this._values=te):this._index++,{value:we,done:!1}}return{value:void 0,done:!0}},$e.prototype.throw=function(ve){throw this._index>=0&&(this._index=-1,this._keys=te,this._values=te),ve},$e.prototype.return=function(ve){return this._index>=0&&(this._index=-1,this._keys=te,this._values=te),{value:ve,done:!0}},$e}(),pe=function(){function $e(){this._keys=[],this._values=[],this._cacheKey=J,this._cacheIndex=-2}return Object.defineProperty($e.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),$e.prototype.has=function(ve){return this._find(ve,!1)>=0},$e.prototype.get=function(ve){var we=this._find(ve,!1);return we>=0?this._values[we]:void 0},$e.prototype.set=function(ve,we){var _e=this._find(ve,!0);return this._values[_e]=we,this},$e.prototype.delete=function(ve){var we=this._find(ve,!1);if(we>=0){for(var _e=this._keys.length,je=we+1;je<_e;je++)this._keys[je-1]=this._keys[je],this._values[je-1]=this._values[je];return this._keys.length--,this._values.length--,Te(ve,this._cacheKey)&&(this._cacheKey=J,this._cacheIndex=-2),!0}return!1},$e.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=J,this._cacheIndex=-2},$e.prototype.keys=function(){return new se(this._keys,this._values,ke)},$e.prototype.values=function(){return new se(this._keys,this._values,Mt)},$e.prototype.entries=function(){return new se(this._keys,this._values,_t)},$e.prototype["@@iterator"]=function(){return this.entries()},$e.prototype[s]=function(){return this.entries()},$e.prototype._find=function(ve,we){if(!Te(this._cacheKey,ve)){this._cacheIndex=-1;for(var _e=0;_e<this._keys.length;_e++)if(Te(this._keys[_e],ve)){this._cacheIndex=_e;break}}return this._cacheIndex<0&&we&&(this._cacheIndex=this._keys.length,this._keys.push(ve),this._values.push(void 0)),this._cacheIndex},$e}();return pe;function ke($e,ve){return $e}function Mt($e,ve){return ve}function _t($e,ve){return[$e,ve]}}function yi(){var J=function(){function te(){this._map=new h}return Object.defineProperty(te.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),te.prototype.has=function(se){return this._map.has(se)},te.prototype.add=function(se){return this._map.set(se,se),this},te.prototype.delete=function(se){return this._map.delete(se)},te.prototype.clear=function(){this._map.clear()},te.prototype.keys=function(){return this._map.keys()},te.prototype.values=function(){return this._map.keys()},te.prototype.entries=function(){return this._map.entries()},te.prototype["@@iterator"]=function(){return this.keys()},te.prototype[s]=function(){return this.keys()},te}();return J}function tr(){var J=16,te=d.create(),se=pe();return function(){function ve(){this._key=pe()}return ve.prototype.has=function(we){var _e=ke(we,!1);return _e!==void 0?d.has(_e,this._key):!1},ve.prototype.get=function(we){var _e=ke(we,!1);return _e!==void 0?d.get(_e,this._key):void 0},ve.prototype.set=function(we,_e){var je=ke(we,!0);return je[this._key]=_e,this},ve.prototype.delete=function(we){var _e=ke(we,!1);return _e!==void 0?delete _e[this._key]:!1},ve.prototype.clear=function(){this._key=pe()},ve}();function pe(){var ve;do ve="@@WeakMap@@"+$e();while(d.has(te,ve));return te[ve]=!0,ve}function ke(ve,we){if(!o.call(ve,se)){if(!we)return;Object.defineProperty(ve,se,{value:d.create()})}return ve[se]}function Mt(ve,we){for(var _e=0;_e<we;++_e)ve[_e]=Math.random()*255|0;return ve}function _t(ve){if(typeof Uint8Array=="function"){var we=new Uint8Array(ve);return typeof crypto<"u"?crypto.getRandomValues(we):typeof msCrypto<"u"?msCrypto.getRandomValues(we):Mt(we,ve),we}return Mt(new Array(ve),ve)}function $e(){var ve=_t(J);ve[6]=ve[6]&79|64,ve[8]=ve[8]&191|128;for(var we="",_e=0;_e<J;++_e){var je=ve[_e];(_e===4||_e===6||_e===8)&&(we+="-"),je<16&&(we+="0"),we+=je.toString(16).toLowerCase()}return we}}function wa(J){return J.__=void 0,delete J.__,J}})}(e||(e={})),HI}fre(),typeof window<"u"&&(window.Buffer=G_e),typeof mm<"u"&&typeof require<"u"&&(mm.Buffer=require("buffer/").Buffer);class Dt{static isObject(t){return t!==null&&typeof t=="object"}static isObjectWithName(t){return t!==null&&typeof t=="object"&&t.name!==void 0}static assign(t,...n){for(const r of n)for(const o of Object.getOwnPropertyNames(r))t[o]=r[o]}static mixedListToArray(t){return t!==null&&typeof t=="object"?Object.keys(t).map(n=>t[n]):t}}class xe extends Error{get name(){return this.constructor.name}constructor(t){super(t),Object.setPrototypeOf?Object.setPrototypeOf(this,new.target.prototype):this.__proto__=new.target.prototype}}class cs extends xe{constructor(){super("Locking not supported on given driver.")}}class Sx extends xe{constructor(){super('Cannot perform update query because update values are not defined. Call "qb.set(...)" method to specify updated values.')}}class pt{static isMssqlParameter(t){return this.check(t,"MssqlParameter")}static isEntityMetadata(t){return this.check(t,"EntityMetadata")}static isColumnMetadata(t){return this.check(t,"ColumnMetadata")}static isSelectQueryBuilder(t){return this.check(t,"SelectQueryBuilder")}static isInsertQueryBuilder(t){return this.check(t,"InsertQueryBuilder")}static isDeleteQueryBuilder(t){return this.check(t,"DeleteQueryBuilder")}static isUpdateQueryBuilder(t){return this.check(t,"UpdateQueryBuilder")}static isSoftDeleteQueryBuilder(t){return this.check(t,"SoftDeleteQueryBuilder")}static isRelationQueryBuilder(t){return this.check(t,"RelationQueryBuilder")}static isBrackets(t){return this.check(t,"Brackets")||this.check(t,"NotBrackets")}static isNotBrackets(t){return this.check(t,"NotBrackets")}static isSubject(t){return this.check(t,"Subject")}static isRdbmsSchemaBuilder(t){return this.check(t,"RdbmsSchemaBuilder")}static isMongoEntityManager(t){return this.check(t,"MongoEntityManager")}static isSqljsEntityManager(t){return this.check(t,"SqljsEntityManager")}static isEntitySchema(t){return this.check(t,"EntitySchema")}static isBaseEntityConstructor(t){return typeof t=="function"&&typeof t.hasId=="function"&&typeof t.save=="function"&&typeof t.useDataSource=="function"}static isFindOperator(t){return this.check(t,"FindOperator")||this.check(t,"EqualOperator")}static isEqualOperator(t){return this.check(t,"EqualOperator")}static isQuery(t){return this.check(t,"Query")}static isTable(t){return this.check(t,"Table")}static isTableCheck(t){return this.check(t,"TableCheck")}static isTableColumn(t){return this.check(t,"TableColumn")}static isTableExclusion(t){return this.check(t,"TableExclusion")}static isTableForeignKey(t){return this.check(t,"TableForeignKey")}static isTableIndex(t){return this.check(t,"TableIndex")}static isTableUnique(t){return this.check(t,"TableUnique")}static isView(t){return this.check(t,"View")}static isDataSource(t){return this.check(t,"DataSource")}static check(t,n){return typeof t=="object"&&t!==null&&t["@instanceof"]===Symbol.for(n)}}class pre extends xe{constructor(t,n){super(),this.entityClass=t,this.criteria=n,this.message=`Could not find any entity of type "${this.stringifyTarget(t)}" matching: ${this.stringifyCriteria(n)}`}stringifyTarget(t){return pt.isEntitySchema(t)?t.options.name:typeof t=="function"||Dt.isObject(t)&&"name"in t?t.name:t}stringifyCriteria(t){try{return JSON.stringify(t,null,4)}catch{}return""+t}}class qI extends xe{constructor(t,n,r){super(`The optimistic lock on entity ${t} failed, version ${n} was expected, but is actually ${r}.`)}}class YI extends xe{constructor(){super("Your database does not support LIMIT on UPDATE statements.")}}class hre extends xe{constructor(t){super(`Entity "${t.name}" does not have delete date columns.`)}}class Zf extends xe{constructor(){super("OUTPUT or RETURNING clause only supported by Microsoft SQL Server or PostgreSQL or MariaDB databases.")}}class zr extends xe{constructor(t,n){super(t),Object.setPrototypeOf(this,zr.prototype),this.message=`Property "${t}" was not found in "${n.targetName}". Make sure your query is correct.`}}class mre extends xe{constructor(t){super(`Entity ${t} does not have version or update date columns.`)}}class yre extends xe{constructor(){super('Cannot perform insert query because values are not defined. Call "qb.values(...)" method to specify inserted values.')}}class Pl extends xe{constructor(){super("The optimistic lock can be used only with getOne() method.")}}class gre extends xe{constructor(t){super(),t.length===1?this.message=`Relation "${t[0]}" was not found; please check if it is correct and really exists in your entity.`:this.message=`Relations ${t.map(n=>`"${n}"`).join(", ")} were not found; please check if relations are correct and they exist in your entities.`}}class vre extends xe{constructor(){super("An open transaction is required for pessimistic lock.")}}class bre extends xe{constructor(){super("RDBMS does not support OFFSET without LIMIT in SELECT statements. You must use limit in conjunction with offset function (or take in conjunction with skip function if you are using pagination).")}}class KI{constructor(t){Dt.assign(this,t||{})}get target(){return this.metadata.target}get hasMetadata(){return!!this._metadata}set metadata(t){this._metadata=t}get metadata(){if(!this._metadata)throw new xe(`Cannot get entity metadata for the given alias "${this.name}"`);return this._metadata}}class Vr{static isAliasProperty(t){if(typeof t!="string"||t.indexOf(".")===-1)return!1;const[n,r]=t.split(".");return!(!n||!r||t.indexOf("(")!==-1||t.indexOf(")")!==-1)}}var Cx={exports:{}},Ox={exports:{}},XI;function ls(){return XI||(XI=1,typeof Object.create=="function"?Ox.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:Ox.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}),Ox.exports}var Nx={exports:{}},QI;function Ka(){return QI||(QI=1,function(e,t){var n=eje(),r=n.Buffer;function o(i,s){for(var c in i)s[c]=i[c]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?e.exports=n:(o(n,t),t.Buffer=a);function a(i,s,c){return r(i,s,c)}a.prototype=Object.create(r.prototype),o(r,a),a.from=function(i,s,c){if(typeof i=="number")throw new TypeError("Argument must not be a number");return r(i,s,c)},a.alloc=function(i,s,c){if(typeof i!="number")throw new TypeError("Argument must be a number");var l=r(i);return s!==void 0?typeof c=="string"?l.fill(s,c):l.fill(s):l.fill(0),l},a.allocUnsafe=function(i){if(typeof i!="number")throw new TypeError("Argument must be a number");return r(i)},a.allocUnsafeSlow=function(i){if(typeof i!="number")throw new TypeError("Argument must be a number");return n.SlowBuffer(i)}}(Nx,Nx.exports)),Nx.exports}var Mx,JI;function us(){if(JI)return Mx;JI=1;var e=Ka().Buffer;function t(n,r){this._block=e.alloc(n),this._finalSize=r,this._blockSize=n,this._len=0}return t.prototype.update=function(n,r){typeof n=="string"&&(r=r||"utf8",n=e.from(n,r));for(var o=this._block,a=this._blockSize,i=n.length,s=this._len,c=0;c<i;){for(var l=s%a,u=Math.min(i-c,a-l),d=0;d<u;d++)o[l+d]=n[c+d];s+=u,c+=u,s%a===0&&this._update(o)}return this._len+=i,this},t.prototype.digest=function(n){var r=this._len%this._blockSize;this._block[r]=128,this._block.fill(0,r+1),r>=this._finalSize&&(this._update(this._block),this._block.fill(0));var o=this._len*8;if(o<=4294967295)this._block.writeUInt32BE(o,this._blockSize-4);else{var a=(o&4294967295)>>>0,i=(o-a)/4294967296;this._block.writeUInt32BE(i,this._blockSize-8),this._block.writeUInt32BE(a,this._blockSize-4)}this._update(this._block);var s=this._hash();return n?s.toString(n):s},t.prototype._update=function(){throw new Error("_update must be implemented by subclass")},Mx=t,Mx}var kx,ZI;function xre(){if(ZI)return kx;ZI=1;var e=ls(),t=us(),n=Ka().Buffer,r=[1518500249,1859775393,-1894007588,-899497514],o=new Array(80);function a(){this.init(),this._w=o,t.call(this,64,56)}e(a,t),a.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function i(l){return l<<5|l>>>27}function s(l){return l<<30|l>>>2}function c(l,u,d,f){return l===0?u&d|~u&f:l===2?u&d|u&f|d&f:u^d^f}return a.prototype._update=function(l){for(var u=this._w,d=this._a|0,f=this._b|0,h=this._c|0,g=this._d|0,m=this._e|0,v=0;v<16;++v)u[v]=l.readInt32BE(v*4);for(;v<80;++v)u[v]=u[v-3]^u[v-8]^u[v-14]^u[v-16];for(var b=0;b<80;++b){var x=~~(b/20),_=i(d)+c(x,f,h,g)+m+u[b]+r[x]|0;m=g,g=h,h=s(f),f=d,d=_}this._a=d+this._a|0,this._b=f+this._b|0,this._c=h+this._c|0,this._d=g+this._d|0,this._e=m+this._e|0},a.prototype._hash=function(){var l=n.allocUnsafe(20);return l.writeInt32BE(this._a|0,0),l.writeInt32BE(this._b|0,4),l.writeInt32BE(this._c|0,8),l.writeInt32BE(this._d|0,12),l.writeInt32BE(this._e|0,16),l},kx=a,kx}var Px,GI;function wre(){if(GI)return Px;GI=1;var e=ls(),t=us(),n=Ka().Buffer,r=[1518500249,1859775393,-1894007588,-899497514],o=new Array(80);function a(){this.init(),this._w=o,t.call(this,64,56)}e(a,t),a.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function i(u){return u<<1|u>>>31}function s(u){return u<<5|u>>>27}function c(u){return u<<30|u>>>2}function l(u,d,f,h){return u===0?d&f|~d&h:u===2?d&f|d&h|f&h:d^f^h}return a.prototype._update=function(u){for(var d=this._w,f=this._a|0,h=this._b|0,g=this._c|0,m=this._d|0,v=this._e|0,b=0;b<16;++b)d[b]=u.readInt32BE(b*4);for(;b<80;++b)d[b]=i(d[b-3]^d[b-8]^d[b-14]^d[b-16]);for(var x=0;x<80;++x){var _=~~(x/20),w=s(f)+l(_,h,g,m)+v+d[x]+r[_]|0;v=m,m=g,g=c(h),h=f,f=w}this._a=f+this._a|0,this._b=h+this._b|0,this._c=g+this._c|0,this._d=m+this._d|0,this._e=v+this._e|0},a.prototype._hash=function(){var u=n.allocUnsafe(20);return u.writeInt32BE(this._a|0,0),u.writeInt32BE(this._b|0,4),u.writeInt32BE(this._c|0,8),u.writeInt32BE(this._d|0,12),u.writeInt32BE(this._e|0,16),u},Px=a,Px}var Ax,eD;function tD(){if(eD)return Ax;eD=1;var e=ls(),t=us(),n=Ka().Buffer,r=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],o=new Array(64);function a(){this.init(),this._w=o,t.call(this,64,56)}e(a,t),a.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this};function i(f,h,g){return g^f&(h^g)}function s(f,h,g){return f&h|g&(f|h)}function c(f){return(f>>>2|f<<30)^(f>>>13|f<<19)^(f>>>22|f<<10)}function l(f){return(f>>>6|f<<26)^(f>>>11|f<<21)^(f>>>25|f<<7)}function u(f){return(f>>>7|f<<25)^(f>>>18|f<<14)^f>>>3}function d(f){return(f>>>17|f<<15)^(f>>>19|f<<13)^f>>>10}return a.prototype._update=function(f){for(var h=this._w,g=this._a|0,m=this._b|0,v=this._c|0,b=this._d|0,x=this._e|0,_=this._f|0,w=this._g|0,j=this._h|0,E=0;E<16;++E)h[E]=f.readInt32BE(E*4);for(;E<64;++E)h[E]=d(h[E-2])+h[E-7]+u(h[E-15])+h[E-16]|0;for(var S=0;S<64;++S){var C=j+l(x)+i(x,_,w)+r[S]+h[S]|0,M=c(g)+s(g,m,v)|0;j=w,w=_,_=x,x=b+C|0,b=v,v=m,m=g,g=C+M|0}this._a=g+this._a|0,this._b=m+this._b|0,this._c=v+this._c|0,this._d=b+this._d|0,this._e=x+this._e|0,this._f=_+this._f|0,this._g=w+this._g|0,this._h=j+this._h|0},a.prototype._hash=function(){var f=n.allocUnsafe(32);return f.writeInt32BE(this._a,0),f.writeInt32BE(this._b,4),f.writeInt32BE(this._c,8),f.writeInt32BE(this._d,12),f.writeInt32BE(this._e,16),f.writeInt32BE(this._f,20),f.writeInt32BE(this._g,24),f.writeInt32BE(this._h,28),f},Ax=a,Ax}var Tx,nD;function _re(){if(nD)return Tx;nD=1;var e=ls(),t=tD(),n=us(),r=Ka().Buffer,o=new Array(64);function a(){this.init(),this._w=o,n.call(this,64,56)}return e(a,t),a.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},a.prototype._hash=function(){var i=r.allocUnsafe(28);return i.writeInt32BE(this._a,0),i.writeInt32BE(this._b,4),i.writeInt32BE(this._c,8),i.writeInt32BE(this._d,12),i.writeInt32BE(this._e,16),i.writeInt32BE(this._f,20),i.writeInt32BE(this._g,24),i},Tx=a,Tx}var Rx,rD;function oD(){if(rD)return Rx;rD=1;var e=ls(),t=us(),n=Ka().Buffer,r=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],o=new Array(160);function a(){this.init(),this._w=o,t.call(this,128,112)}e(a,t),a.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this};function i(m,v,b){return b^m&(v^b)}function s(m,v,b){return m&v|b&(m|v)}function c(m,v){return(m>>>28|v<<4)^(v>>>2|m<<30)^(v>>>7|m<<25)}function l(m,v){return(m>>>14|v<<18)^(m>>>18|v<<14)^(v>>>9|m<<23)}function u(m,v){return(m>>>1|v<<31)^(m>>>8|v<<24)^m>>>7}function d(m,v){return(m>>>1|v<<31)^(m>>>8|v<<24)^(m>>>7|v<<25)}function f(m,v){return(m>>>19|v<<13)^(v>>>29|m<<3)^m>>>6}function h(m,v){return(m>>>19|v<<13)^(v>>>29|m<<3)^(m>>>6|v<<26)}function g(m,v){return m>>>0<v>>>0?1:0}return a.prototype._update=function(m){for(var v=this._w,b=this._ah|0,x=this._bh|0,_=this._ch|0,w=this._dh|0,j=this._eh|0,E=this._fh|0,S=this._gh|0,C=this._hh|0,M=this._al|0,N=this._bl|0,P=this._cl|0,R=this._dl|0,A=this._el|0,O=this._fl|0,k=this._gl|0,T=this._hl|0,D=0;D<32;D+=2)v[D]=m.readInt32BE(D*4),v[D+1]=m.readInt32BE(D*4+4);for(;D<160;D+=2){var I=v[D-30],L=v[D-15*2+1],B=u(I,L),V=d(L,I);I=v[D-2*2],L=v[D-2*2+1];var F=f(I,L),H=h(L,I),Q=v[D-7*2],Y=v[D-7*2+1],re=v[D-16*2],G=v[D-16*2+1],q=V+Y|0,W=B+Q+g(q,V)|0;q=q+H|0,W=W+F+g(q,H)|0,q=q+G|0,W=W+re+g(q,G)|0,v[D]=W,v[D+1]=q}for(var Z=0;Z<160;Z+=2){W=v[Z],q=v[Z+1];var ee=s(b,x,_),$=s(M,N,P),ie=c(b,M),ue=c(M,b),me=l(j,A),Te=l(A,j),Ue=r[Z],He=r[Z+1],Le=i(j,E,S),st=i(A,O,k),qe=T+Te|0,ct=C+me+g(qe,T)|0;qe=qe+st|0,ct=ct+Le+g(qe,st)|0,qe=qe+He|0,ct=ct+Ue+g(qe,He)|0,qe=qe+q|0,ct=ct+W+g(qe,q)|0;var Wt=ue+$|0,Ct=ie+ee+g(Wt,ue)|0;C=S,T=k,S=E,k=O,E=j,O=A,A=R+qe|0,j=w+ct+g(A,R)|0,w=_,R=P,_=x,P=N,x=b,N=M,M=qe+Wt|0,b=ct+Ct+g(M,qe)|0}this._al=this._al+M|0,this._bl=this._bl+N|0,this._cl=this._cl+P|0,this._dl=this._dl+R|0,this._el=this._el+A|0,this._fl=this._fl+O|0,this._gl=this._gl+k|0,this._hl=this._hl+T|0,this._ah=this._ah+b+g(this._al,M)|0,this._bh=this._bh+x+g(this._bl,N)|0,this._ch=this._ch+_+g(this._cl,P)|0,this._dh=this._dh+w+g(this._dl,R)|0,this._eh=this._eh+j+g(this._el,A)|0,this._fh=this._fh+E+g(this._fl,O)|0,this._gh=this._gh+S+g(this._gl,k)|0,this._hh=this._hh+C+g(this._hl,T)|0},a.prototype._hash=function(){var m=n.allocUnsafe(64);function v(b,x,_){m.writeInt32BE(b,_),m.writeInt32BE(x,_+4)}return v(this._ah,this._al,0),v(this._bh,this._bl,8),v(this._ch,this._cl,16),v(this._dh,this._dl,24),v(this._eh,this._el,32),v(this._fh,this._fl,40),v(this._gh,this._gl,48),v(this._hh,this._hl,56),m},Rx=a,Rx}var Ix,aD;function jre(){if(aD)return Ix;aD=1;var e=ls(),t=oD(),n=us(),r=Ka().Buffer,o=new Array(160);function a(){this.init(),this._w=o,n.call(this,128,112)}return e(a,t),a.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},a.prototype._hash=function(){var i=r.allocUnsafe(48);function s(c,l,u){i.writeInt32BE(c,u),i.writeInt32BE(l,u+4)}return s(this._ah,this._al,0),s(this._bh,this._bl,8),s(this._ch,this._cl,16),s(this._dh,this._dl,24),s(this._eh,this._el,32),s(this._fh,this._fl,40),i},Ix=a,Ix}var iD;function Ere(){if(iD)return Cx.exports;iD=1;var e=Cx.exports=function(t){t=t.toLowerCase();var n=e[t];if(!n)throw new Error(t+" is not supported (we accept pull requests)");return new n};return e.sha=xre(),e.sha1=wre(),e.sha224=_re(),e.sha256=tD(),e.sha384=jre(),e.sha512=oD(),Cx.exports}var Sre=Ere();const Cre=Qe(Sre);function Ore(e,t={}){const{segmentLength:n=4,separator:r="__",termLength:o=2}=t;return e.split(r).reduce((a,i)=>{const s=i.replace(/([a-z\xE0-\xFF])([A-Z\xC0-\xDF])/g,"$1 $2").split(" "),c=s.length>1?o:n,l=s.map(u=>u.substr(0,c)).join("");return a.push(l),a},[]).join(r)}function Nre(e,t={}){const n=Cre("sha1");n.update(e,"utf8");const r=n.digest("hex");return t.length?r.slice(0,t.length):r}class Mre{static isGreaterOrEqual(t,n){const r=sD(t),o=sD(n);return r[0]>o[0]||r[0]===o[0]&&r[1]>o[1]||r[0]===o[0]&&r[1]===o[1]&&r[2]>=o[2]}}function sD(e=""){const t=[0,0,0];return e.split(".").forEach((n,r)=>t[r]=parseInt(n,10)),t}class ge{static isSQLiteFamily(t){return["sqlite","cordova","react-native","nativescript","sqljs","expo","better-sqlite3","capacitor"].includes(t.options.type)}static isMySQLFamily(t){return["mysql","mariadb"].includes(t.options.type)}static isReleaseVersionOrGreater(t,n){return t.version!=null&&Mre.isGreaterOrEqual(t.version,n)}static isPostgresFamily(t){return["postgres","aurora-postgres","cockroachdb"].includes(t.options.type)}static buildDriverOptions(t,n){if(t.url){const r=this.parseConnectionUrl(t.url);n&&n.useSid&&r.database&&(r.sid=r.database);for(const o of Object.keys(r))typeof r[o]>"u"&&delete r[o];return Object.assign({},t,r)}return Object.assign({},t)}static buildMongoDBDriverOptions(t,n){if(t.url){const r=this.parseMongoDBConnectionUrl(t.url);n&&n.useSid&&r.database&&(r.sid=r.database);for(const o of Object.keys(r))typeof r[o]>"u"&&delete r[o];return Object.assign({},t,r)}return Object.assign({},t)}static buildAlias({maxAliasLength:t},n,...r){const o=n&&n.joiner?n.joiner:"_";let a=r.length===1?r[0]:r.join(o);if(t&&t>0&&a.length>t){if(n&&n.shorten===!0){const i=Ore(a);if(i.length<t)return i}return Nre(a,{length:t})}return a}static buildColumnAlias({maxAliasLength:t},n,...r){return typeof n=="string"?(r.unshift(n),n={shorten:!1,joiner:"_"}):n=Object.assign({shorten:!1,joiner:"_"},n),this.buildAlias({maxAliasLength:t},n,...r)}static parseConnectionUrl(t){const n=t.split(":")[0],r=t.indexOf("//"),o=t.substr(r+2),a=o.indexOf("/"),i=a!==-1?o.substr(0,a):o;let s=a!==-1?o.substr(a+1):void 0;s&&s.indexOf("?")!==-1&&(s=s.substr(0,s.indexOf("?")));const c=i.lastIndexOf("@"),l=i.substr(0,c),u=i.substr(c+1);let d=l,f="";const h=l.indexOf(":");h!==-1&&(d=l.substr(0,h),f=l.substr(h+1));const[g,m]=u.split(":");return{type:n,host:g,username:decodeURIComponent(d),password:decodeURIComponent(f),port:m?parseInt(m):void 0,database:s||void 0}}static parseMongoDBConnectionUrl(t){const n=t.split(":")[0],r=t.indexOf("//"),o=t.substr(r+2),a=o.indexOf("/"),i=a!==-1?o.substr(0,a):o;let s=a!==-1?o.substr(a+1):void 0,c="",l,u,d,f,h={};if(s&&s.indexOf("?")!==-1){c=s.substr(s.indexOf("?")+1,s.length);const j=c.split("&");let E,S;j.forEach(C=>{E=C.split("=")[0],S=C.split("=")[1],h[E]=S}),f=h.replicaSet,s=s.substr(0,s.indexOf("?"))}const g=i.lastIndexOf("@"),m=i.substr(0,g),v=i.substr(g+1);let b=m,x="";const _=m.indexOf(":");_!==-1&&(b=m.substr(0,_),x=m.substr(_+1)),f?d=v:[l,u]=v.split(":");let w={type:n,host:l,hostReplicaSet:d,username:decodeURIComponent(b),password:decodeURIComponent(x),port:u?parseInt(u):void 0,database:s||void 0};for(const[j,E]of Object.entries(h))w[j]=E;return w}}class cD{constructor(t,n,r){this.connection=t,this.queryExpressionMap=n,this.isSelectedEvaluated=!1,this.relationEvaluated=!1,r&&Dt.assign(this,r)}get isMany(){return this.isMappingMany!==void 0?this.isMappingMany:this.relation?this.relation.isManyToMany||this.relation.isOneToMany:!1}get isSelected(){if(!this.isSelectedEvaluated){let t=()=>{for(const n of this.queryExpressionMap.selects)if(n.selection===this.alias.name||this.metadata&&this.metadata.columns.find(r=>n.selection===this.alias.name+"."+r.propertyPath))return!0;return!1};this.isSelectedCache=t(),this.isSelectedEvaluated=!0}return this.isSelectedCache}get tablePath(){return this.metadata?this.metadata.tablePath:this.entityOrProperty}get parentAlias(){if(Vr.isAliasProperty(this.entityOrProperty))return this.entityOrProperty.substr(0,this.entityOrProperty.indexOf("."))}get relationPropertyPath(){if(Vr.isAliasProperty(this.entityOrProperty))return this.entityOrProperty.substr(this.entityOrProperty.indexOf(".")+1)}get relation(){if(!this.relationEvaluated){let t=()=>{if(!Vr.isAliasProperty(this.entityOrProperty))return;const n=this.queryExpressionMap.findAliasByName(this.parentAlias);let r=n.metadata.findRelationWithPropertyPath(this.relationPropertyPath);if(r||n.metadata.parentEntityMetadata&&(r=n.metadata.parentEntityMetadata.findRelationWithPropertyPath(this.relationPropertyPath),r))return r;throw new xe(`Relation with property path ${this.relationPropertyPath} in entity was not found.`)};this.relationCache=t.bind(this)(),this.relationEvaluated=!0}return this.relationCache}get metadata(){if(this.relation)return this.relation.inverseEntityMetadata;if(this.connection.hasMetadata(this.entityOrProperty))return this.connection.getMetadata(this.entityOrProperty);if(this.mapAsEntity&&this.connection.hasMetadata(this.mapAsEntity))return this.connection.getMetadata(this.mapAsEntity)}get junctionAlias(){if(!this.relation)throw new xe("Cannot get junction table for join without relation.");if(typeof this.entityOrProperty!="string")throw new xe("Junction property is not defined.");const t=this.entityOrProperty.substr(0,this.entityOrProperty.indexOf("."));return this.relation.isOwning?ge.buildAlias(this.connection.driver,void 0,t,this.alias.name):ge.buildAlias(this.connection.driver,void 0,this.alias.name,t)}get mapToPropertyParentAlias(){if(this.mapToProperty)return this.mapToProperty.split(".")[0]}get mapToPropertyPropertyName(){if(this.mapToProperty)return this.mapToProperty.split(".")[1]}}class Dx{constructor(t,n){this.queryExpressionMap=t,this.disableMixedMap=!1,Dt.assign(this,n||{})}get joinInverseSideMetadata(){return this.relation.inverseEntityMetadata}get parentAlias(){if(!Vr.isAliasProperty(this.relationName))throw new xe("Given value must be a string representation of alias property");return this.relationName.substr(0,this.relationName.indexOf("."))}get relationPropertyPath(){if(!Vr.isAliasProperty(this.relationName))throw new xe("Given value must be a string representation of alias property");return this.relationName.substr(this.relationName.indexOf(".")+1)}get relation(){if(!Vr.isAliasProperty(this.relationName))throw new xe("Given value must be a string representation of alias property");const t=this.queryExpressionMap.findAliasByName(this.parentAlias).metadata.findRelationWithPropertyPath(this.relationPropertyPath);if(!t)throw new xe(`Relation with property path ${this.relationPropertyPath} in entity was not found.`);return t}get junctionAlias(){const[t,n]=this.relationName.split(".");return t+"_"+n+"_rid"}get junctionMetadata(){return this.relation.junctionEntityMetadata}get mapToPropertyParentAlias(){return this.mapToProperty.substr(0,this.mapToProperty.indexOf("."))}get mapToPropertyPropertyPath(){return this.mapToProperty.substr(this.mapToProperty.indexOf(".")+1)}}class Lx{constructor(t,n){this.expressionMap=t,Dt.assign(this,n||{})}get joinInverseSideMetadata(){return this.relation.inverseEntityMetadata}get parentAlias(){if(!Vr.isAliasProperty(this.relationName))throw new xe("Given value must be a string representation of alias property");return this.relationName.split(".")[0]}get relationProperty(){if(!Vr.isAliasProperty(this.relationName))throw new xe("Given value is a string representation of alias property");return this.relationName.split(".")[1]}get junctionAlias(){const[t,n]=this.relationName.split(".");return t+"_"+n+"_rc"}get relation(){if(!Vr.isAliasProperty(this.relationName))throw new xe("Given value is a string representation of alias property");const[t,n]=this.relationName.split("."),r=this.expressionMap.findAliasByName(t).metadata.findRelationWithPropertyPath(n);if(!r)throw new xe(`Relation with property path ${n} in entity was not found.`);return r}get metadata(){if(!Vr.isAliasProperty(this.relationName))throw new xe("Given value is a string representation of alias property");const t=this.relationName.split(".")[0];return this.expressionMap.findAliasByName(t).metadata}get mapToPropertyPropertyName(){return this.mapToProperty.split(".")[1]}}class Fx{constructor(t){var n;this.connection=t,this.relationLoadStrategy="join",this.queryEntity=!1,this.aliases=[],this.queryType="select",this.selects=[],this.maxExecutionTime=0,this.selectDistinct=!1,this.selectDistinctOn=[],this.extraReturningColumns=[],this.onConflict="",this.onIgnore=!1,this.joinAttributes=[],this.relationIdAttributes=[],this.relationCountAttributes=[],this.wheres=[],this.havings=[],this.orderBys={},this.groupBys=[],this.withDeleted=!1,this.parameters={},this.disableEscaping=!0,this.enableRelationIdValues=!1,this.extraAppendedAndWhereCondition="",this.subQuery=!1,this.aliasNamePrefixingEnabled=!0,this.options=[],this.insertColumns=[],this.whereEntities=[],this.updateEntity=!0,this.callListeners=!0,this.useTransaction=!1,this.nativeParameters={},this.locallyGenerated={},this.commonTableExpressions=[],t.options.relationLoadStrategy&&(this.relationLoadStrategy=t.options.relationLoadStrategy),this.timeTravel=((n=t.options)==null?void 0:n.timeTravelQueries)||!1}get allOrderBys(){if(!Object.keys(this.orderBys).length&&this.mainAlias.hasMetadata&&this.options.indexOf("disable-global-order")===-1){const t=this.mainAlias.metadata.orderBy||{};return Object.keys(t).reduce((n,r)=>(n[this.mainAlias.name+"."+r]=t[r],n),{})}return this.orderBys}setMainAlias(t){return this.mainAlias=t,t}createAlias(t){let n=t.name;!n&&t.tablePath&&(n=t.tablePath),!n&&typeof t.target=="function"&&(n=t.target.name),!n&&typeof t.target=="string"&&(n=t.target);const r=new KI;return r.type=t.type,n&&(r.name=n),t.metadata&&(r.metadata=t.metadata),t.target&&!r.hasMetadata&&(r.metadata=this.connection.getMetadata(t.target)),t.tablePath&&(r.tablePath=t.tablePath),t.subQuery&&(r.subQuery=t.subQuery),this.aliases.push(r),r}findAliasByName(t){const n=this.aliases.find(r=>r.name===t);if(!n)throw new xe(`"${t}" alias was not found. Maybe you forgot to join it?`);return n}findColumnByAliasExpression(t){const[n,r]=t.split(".");return this.findAliasByName(n).metadata.findColumnWithPropertyName(r)}get relationMetadata(){if(!this.mainAlias)throw new xe("Entity to work with is not specified!");const t=this.mainAlias.metadata.findRelationWithPropertyPath(this.relationPropertyPath);if(!t)throw new xe(`Relation ${this.relationPropertyPath} was not found in entity ${this.mainAlias.name}`);return t}clone(){const t=new Fx(this.connection);return t.queryType=this.queryType,t.selects=this.selects.map(n=>n),t.maxExecutionTime=this.maxExecutionTime,t.selectDistinct=this.selectDistinct,t.selectDistinctOn=this.selectDistinctOn,this.aliases.forEach(n=>t.aliases.push(new KI(n))),t.relationLoadStrategy=this.relationLoadStrategy,t.mainAlias=this.mainAlias,t.valuesSet=this.valuesSet,t.returning=this.returning,t.onConflict=this.onConflict,t.onIgnore=this.onIgnore,t.onUpdate=this.onUpdate,t.joinAttributes=this.joinAttributes.map(n=>new cD(this.connection,this,n)),t.relationIdAttributes=this.relationIdAttributes.map(n=>new Dx(this,n)),t.relationCountAttributes=this.relationCountAttributes.map(n=>new Lx(this,n)),t.wheres=this.wheres.map(n=>({...n})),t.havings=this.havings.map(n=>({...n})),t.orderBys=Object.assign({},this.orderBys),t.groupBys=this.groupBys.map(n=>n),t.limit=this.limit,t.offset=this.offset,t.skip=this.skip,t.take=this.take,t.lockMode=this.lockMode,t.onLocked=this.onLocked,t.lockVersion=this.lockVersion,t.lockTables=this.lockTables,t.withDeleted=this.withDeleted,t.parameters=Object.assign({},this.parameters),t.disableEscaping=this.disableEscaping,t.enableRelationIdValues=this.enableRelationIdValues,t.extraAppendedAndWhereCondition=this.extraAppendedAndWhereCondition,t.subQuery=this.subQuery,t.aliasNamePrefixingEnabled=this.aliasNamePrefixingEnabled,t.cache=this.cache,t.cacheId=this.cacheId,t.cacheDuration=this.cacheDuration,t.relationPropertyPath=this.relationPropertyPath,t.of=this.of,t.insertColumns=this.insertColumns,t.whereEntities=this.whereEntities,t.updateEntity=this.updateEntity,t.callListeners=this.callListeners,t.useTransaction=this.useTransaction,t.timeTravel=this.timeTravel,t.nativeParameters=Object.assign({},this.nativeParameters),t.comment=this.comment,t.commonTableExpressions=this.commonTableExpressions.map(n=>({alias:n.alias,queryBuilder:typeof n.queryBuilder=="string"?n.queryBuilder:n.queryBuilder.clone(),options:n.options})),t}}class lD{constructor(t){this["@instanceof"]=Symbol.for("Brackets"),this.whereFactory=t}}class Bx{static transformFrom(t,n){return Array.isArray(t)?t.slice().reverse().reduce((r,o)=>o.from(r),n):t.from(n)}static transformTo(t,n){return Array.isArray(t)?t.reduce((r,o)=>o.to(r),n):t.to(n)}}class Al{constructor(t,n,r=!0,o=!1,a,i){this["@instanceof"]=Symbol.for("FindOperator"),this._type=t,this._value=n,this._useParameter=r,this._multipleParameters=o,this._getSql=a,this._objectLiteralParameters=i}get useParameter(){return pt.isFindOperator(this._value)?this._value.useParameter:this._useParameter}get multipleParameters(){return pt.isFindOperator(this._value)?this._value.multipleParameters:this._multipleParameters}get type(){return this._type}get value(){return pt.isFindOperator(this._value)?this._value.value:this._value}get objectLiteralParameters(){return pt.isFindOperator(this._value)?this._value.objectLiteralParameters:this._objectLiteralParameters}get child(){if(pt.isFindOperator(this._value))return this._value}get getSql(){return pt.isFindOperator(this._value)?this._value.getSql:this._getSql}transformValue(t){this._value instanceof Al?this._value.transformValue(t):this._value=Array.isArray(this._value)&&this._multipleParameters?this._value.map(n=>t&&Bx.transformTo(t,n)):Bx.transformTo(t,this._value)}}function Ur(e){return new Al("in",e,!0,!0)}const kre=/[.*+\-?^${}()|[\]\\]/g,Pre=e=>e.replace(kre,"\\$&");class kt{constructor(t,n){this["@instanceof"]=Symbol.for("QueryBuilder"),this.parameterIndex=0,pt.isDataSource(t)?(this.connection=t,this.queryRunner=n,this.expressionMap=new Fx(this.connection)):(this.connection=t.connection,this.queryRunner=t.queryRunner,this.expressionMap=t.expressionMap.clone())}static registerQueryBuilderClass(t,n){kt.queryBuilderRegistry[t]=n}get alias(){if(!this.expressionMap.mainAlias)throw new xe("Main alias is not set");return this.expressionMap.mainAlias.name}select(t,n){return this.expressionMap.queryType="select",Array.isArray(t)?this.expressionMap.selects=t.map(r=>({selection:r})):t&&(this.expressionMap.selects=[{selection:t,aliasName:n}]),pt.isSelectQueryBuilder(this)?this:kt.queryBuilderRegistry.SelectQueryBuilder(this)}insert(){return this.expressionMap.queryType="insert",pt.isInsertQueryBuilder(this)?this:kt.queryBuilderRegistry.InsertQueryBuilder(this)}update(t,n){const r=n||t;if(t=pt.isEntitySchema(t)?t.options.name:t,typeof t=="function"||typeof t=="string"){const o=this.createFromAlias(t);this.expressionMap.setMainAlias(o)}return this.expressionMap.queryType="update",this.expressionMap.valuesSet=r,pt.isUpdateQueryBuilder(this)?this:kt.queryBuilderRegistry.UpdateQueryBuilder(this)}delete(){return this.expressionMap.queryType="delete",pt.isDeleteQueryBuilder(this)?this:kt.queryBuilderRegistry.DeleteQueryBuilder(this)}softDelete(){return this.expressionMap.queryType="soft-delete",pt.isSoftDeleteQueryBuilder(this)?this:kt.queryBuilderRegistry.SoftDeleteQueryBuilder(this)}restore(){return this.expressionMap.queryType="restore",pt.isSoftDeleteQueryBuilder(this)?this:kt.queryBuilderRegistry.SoftDeleteQueryBuilder(this)}relation(t,n){const r=arguments.length===2?t:void 0,o=arguments.length===2?n:t;if(this.expressionMap.queryType="relation",this.expressionMap.relationPropertyPath=o,r){const a=this.createFromAlias(r);this.expressionMap.setMainAlias(a)}return pt.isRelationQueryBuilder(this)?this:kt.queryBuilderRegistry.RelationQueryBuilder(this)}hasRelation(t,n){const r=this.connection.getMetadata(t);return(Array.isArray(n)?n:[n]).every(o=>!!r.findRelationWithPropertyPath(o))}hasParameter(t){var n;return((n=this.parentQueryBuilder)==null?void 0:n.hasParameter(t))||t in this.expressionMap.parameters}setParameter(t,n){if(typeof n=="function")throw new xe(`Function parameter isn't supported in the parameters. Please check "${t}" parameter.`);if(!t.match(/^([A-Za-z0-9_.]+)$/))throw new xe("QueryBuilder parameter keys may only contain numbers, letters, underscores, or periods.");return this.parentQueryBuilder&&this.parentQueryBuilder.setParameter(t,n),this.expressionMap.parameters[t]=n,this}setParameters(t){for(const[n,r]of Object.entries(t))this.setParameter(n,r);return this}createParameter(t){let n;do n=`orm_param_${this.parameterIndex++}`;while(this.hasParameter(n));return this.setParameter(n,t),`:${n}`}setNativeParameters(t){return this.parentQueryBuilder&&this.parentQueryBuilder.setNativeParameters(t),Object.keys(t).forEach(n=>{this.expressionMap.nativeParameters[n]=t[n]}),this}getParameters(){const t=Object.assign({},this.expressionMap.parameters);if(this.expressionMap.mainAlias&&this.expressionMap.mainAlias.hasMetadata){const n=this.expressionMap.mainAlias.metadata;if(n.discriminatorColumn&&n.parentEntityMetadata){const r=n.childEntityMetadatas.filter(o=>o.discriminatorColumn).map(o=>o.discriminatorValue);r.push(n.discriminatorValue),t.discriminatorColumnValues=r}}return t}printSql(){const[t,n]=this.getQueryAndParameters();return this.connection.logger.logQuery(t,n),this}getSql(){return this.getQueryAndParameters()[0]}getQueryAndParameters(){const t=this.getQuery(),n=this.getParameters();return this.connection.driver.escapeQueryWithParameters(t,n,this.expressionMap.nativeParameters)}async execute(){const[t,n]=this.getQueryAndParameters(),r=this.obtainQueryRunner();try{return await r.query(t,n)}finally{r!==this.queryRunner&&await r.release()}}createQueryBuilder(t){return new this.constructor(this.connection,t??this.queryRunner)}clone(){return new this.constructor(this)}comment(t){return this.expressionMap.comment=t,this}disableEscaping(){return this.expressionMap.disableEscaping=!1,this}escape(t){return this.expressionMap.disableEscaping?this.connection.driver.escape(t):t}setQueryRunner(t){return this.queryRunner=t,this}callListeners(t){return this.expressionMap.callListeners=t,this}useTransaction(t){return this.expressionMap.useTransaction=t,this}addCommonTableExpression(t,n,r){return this.expressionMap.commonTableExpressions.push({queryBuilder:t,alias:n,options:r||{}}),this}getTableName(t){return t.split(".").map(n=>n===""?n:this.escape(n)).join(".")}getMainTableName(){if(!this.expressionMap.mainAlias)throw new xe('Entity where values should be inserted is not specified. Call "qb.into(entity)" method to specify it.');return this.expressionMap.mainAlias.hasMetadata?this.expressionMap.mainAlias.metadata.tablePath:this.expressionMap.mainAlias.tablePath}createFromAlias(t,n){if(this.connection.hasMetadata(t)){const r=this.connection.getMetadata(t);return this.expressionMap.createAlias({type:"from",name:n,metadata:this.connection.getMetadata(t),tablePath:r.tablePath})}else{if(typeof t=="string"){const a=t.substr(0,1)==="("&&t.substr(-1)===")";return this.expressionMap.createAlias({type:"from",name:n,tablePath:a?void 0:t,subQuery:a?t:void 0})}const r=t(this.subQuery());this.setParameters(r.getParameters());const o=r.getQuery();return this.expressionMap.createAlias({type:"from",name:n,subQuery:o})}}replacePropertyNames(t){return t}replacePropertyNamesForTheWholeQuery(t){const n={};for(const a of this.expressionMap.aliases){if(!a.hasMetadata)continue;const i=this.expressionMap.aliasNamePrefixingEnabled&&a.name?`${a.name}.`:"";n[i]||(n[i]={});for(const s of a.metadata.relations)s.joinColumns.length>0&&(n[i][s.propertyPath]=s.joinColumns[0].databaseName);for(const s of a.metadata.relations){const c=[...s.joinColumns,...s.inverseJoinColumns];for(const l of c){const u=`${s.propertyPath}.${l.referencedColumn.propertyPath}`;n[i][u]=l.databaseName}}for(const s of a.metadata.columns)n[i][s.databaseName]=s.databaseName;for(const s of a.metadata.columns)n[i][s.propertyName]=s.databaseName;for(const s of a.metadata.columns)n[i][s.propertyPath]=s.databaseName}const r=Object.keys(n),o=r.map(a=>Pre(a)).join("|");return r.length>0&&(t=t.replace(new RegExp(`([ =(]|^.{0})${o?"("+o+")":""}([^ =(),]+)(?=[ =),]|.{0}$)`,"gm"),(...a)=>{let i,s,c;if(o){if(i=a[0],s=a[1],c=a[3],n[a[2]][c])return`${s}${this.escape(a[2].substring(0,a[2].length-1))}.${this.escape(n[a[2]][c])}`}else if(i=a[0],s=a[1],c=a[2],n[""][c])return`${s}${this.escape(n[""][c])}`;return i})),t}createComment(){return this.expressionMap.comment?`/* ${this.expressionMap.comment.replace(/\*\//g,"")} */ `:""}createTimeTravelQuery(){return this.expressionMap.queryType==="select"&&this.expressionMap.timeTravel?` AS OF SYSTEM TIME ${this.expressionMap.timeTravel}`:""}createWhereExpression(){const t=[],n=this.createWhereClausesExpression(this.expressionMap.wheres);if(n.length>0&&n!=="1=1"&&t.push(this.replacePropertyNames(n)),this.expressionMap.mainAlias.hasMetadata){const o=this.expressionMap.mainAlias.metadata;if(this.expressionMap.queryType==="select"&&!this.expressionMap.withDeleted&&o.deleteDateColumn){const a=this.expressionMap.aliasNamePrefixingEnabled?this.expressionMap.mainAlias.name+"."+o.deleteDateColumn.propertyName:o.deleteDateColumn.propertyName,i=`${this.replacePropertyNames(a)} IS NULL`;t.push(i)}if(o.discriminatorColumn&&o.parentEntityMetadata){const a=this.expressionMap.aliasNamePrefixingEnabled?this.expressionMap.mainAlias.name+"."+o.discriminatorColumn.databaseName:o.discriminatorColumn.databaseName,i=`${this.replacePropertyNames(a)} IN (:...discriminatorColumnValues)`;t.push(i)}}if(this.expressionMap.extraAppendedAndWhereCondition){const o=this.replacePropertyNames(this.expressionMap.extraAppendedAndWhereCondition);t.push(o)}let r="";return r+=this.createTimeTravelQuery(),t.length?t.length===1?r+=` WHERE ${t[0]}`:r+=` WHERE ( ${t.join(" ) AND ( ")} )`:r+="",r}createReturningExpression(t){const n=this.getReturningColumns(),r=this.connection.driver;if(typeof this.expressionMap.returning!="string"&&this.expressionMap.extraReturningColumns.length>0&&r.isReturningSqlSupported(t)&&n.push(...this.expressionMap.extraReturningColumns.filter(o=>n.indexOf(o)===-1)),n.length){let o=n.map(a=>{const i=this.escape(a.databaseName);return r.options.type==="mssql"?this.expressionMap.queryType==="insert"||this.expressionMap.queryType==="update"||this.expressionMap.queryType==="soft-delete"||this.expressionMap.queryType==="restore"?"INSERTED."+i:this.escape(this.getMainTableName())+"."+i:i}).join(", ");return r.options.type==="oracle"&&(o+=" INTO "+n.map(a=>this.createParameter({type:r.columnTypeToNativeParameter(a.type),dir:r.oracle.BIND_OUT})).join(", ")),r.options.type==="mssql"&&(this.expressionMap.queryType==="insert"||this.expressionMap.queryType==="update")&&(o+=" INTO @OutputTable"),o}else if(typeof this.expressionMap.returning=="string")return this.expressionMap.returning;return""}getReturningColumns(){const t=[];return Array.isArray(this.expressionMap.returning)&&this.expressionMap.returning.forEach(n=>{this.expressionMap.mainAlias.hasMetadata&&t.push(...this.expressionMap.mainAlias.metadata.findColumnsWithPropertyPath(n))}),t}createWhereClausesExpression(t){return t.map((n,r)=>{const o=this.createWhereConditionExpression(n.condition);switch(n.type){case"and":return(r>0?"AND ":"")+`${this.connection.options.isolateWhereStatements?"(":""}${o}${this.connection.options.isolateWhereStatements?")":""}`;case"or":return(r>0?"OR ":"")+`${this.connection.options.isolateWhereStatements?"(":""}${o}${this.connection.options.isolateWhereStatements?")":""}`}return o}).join(" ").trim()}createWhereConditionExpression(t,n=!1){if(typeof t=="string")return t;if(Array.isArray(t))return t.length===0?"1=1":t.length===1&&!n?this.createWhereClausesExpression(t):"("+this.createWhereClausesExpression(t)+")";const{driver:r}=this.connection;switch(t.operator){case"lessThan":return`${t.parameters[0]} < ${t.parameters[1]}`;case"lessThanOrEqual":return`${t.parameters[0]} <= ${t.parameters[1]}`;case"arrayContains":return`${t.parameters[0]} @> ${t.parameters[1]}`;case"jsonContains":return`${t.parameters[0]} ::jsonb @> ${t.parameters[1]}`;case"arrayContainedBy":return`${t.parameters[0]} <@ ${t.parameters[1]}`;case"arrayOverlap":return`${t.parameters[0]} && ${t.parameters[1]}`;case"moreThan":return`${t.parameters[0]} > ${t.parameters[1]}`;case"moreThanOrEqual":return`${t.parameters[0]} >= ${t.parameters[1]}`;case"notEqual":return`${t.parameters[0]} != ${t.parameters[1]}`;case"equal":return`${t.parameters[0]} = ${t.parameters[1]}`;case"ilike":return r.options.type==="postgres"||r.options.type==="cockroachdb"?`${t.parameters[0]} ILIKE ${t.parameters[1]}`:`UPPER(${t.parameters[0]}) LIKE UPPER(${t.parameters[1]})`;case"like":return`${t.parameters[0]} LIKE ${t.parameters[1]}`;case"between":return`${t.parameters[0]} BETWEEN ${t.parameters[1]} AND ${t.parameters[2]}`;case"in":return t.parameters.length<=1?"0=1":`${t.parameters[0]} IN (${t.parameters.slice(1).join(", ")})`;case"any":return r.options.type==="cockroachdb"?`${t.parameters[0]}::STRING = ANY(${t.parameters[1]}::STRING[])`:`${t.parameters[0]} = ANY(${t.parameters[1]})`;case"isNull":return`${t.parameters[0]} IS NULL`;case"not":return`NOT(${this.createWhereConditionExpression(t.condition)})`;case"brackets":return`${this.createWhereConditionExpression(t.condition,!0)}`;case"and":return"("+t.parameters.join(" AND ")+")";case"or":return"("+t.parameters.join(" OR ")+")"}throw new TypeError(`Unsupported FindOperator ${Al.constructor.name}`)}createCteExpression(){if(!this.hasCommonTableExpressions())return"";const t=this.connection.driver.cteCapabilities.requiresRecursiveHint;return"WITH "+this.expressionMap.commonTableExpressions.map(n=>{const r=typeof n.queryBuilder=="string"?n.queryBuilder:n.queryBuilder.getQuery();if(typeof n.queryBuilder!="string"){if(n.queryBuilder.hasCommonTableExpressions())throw new xe(`Nested CTEs aren't supported (CTE: ${n.alias})`);if(!this.connection.driver.cteCapabilities.writable&&!pt.isSelectQueryBuilder(n.queryBuilder))throw new xe(`Only select queries are supported in CTEs in ${this.connection.options.type} (CTE: ${n.alias})`);this.setParameters(n.queryBuilder.getParameters())}let o=this.escape(n.alias);if(n.options.columnNames){const s=n.options.columnNames.map(c=>this.escape(c));if(pt.isSelectQueryBuilder(n.queryBuilder)&&n.queryBuilder.expressionMap.selects.length&&n.options.columnNames.length!==n.queryBuilder.expressionMap.selects.length)throw new xe(`cte.options.columnNames length (${n.options.columnNames.length}) doesn't match subquery select list length ${n.queryBuilder.expressionMap.selects.length} (CTE: ${n.alias})`);o+=`(${s.join(", ")})`}const a=n.options.recursive&&t?"RECURSIVE":"";let i="";return this.connection.driver.cteCapabilities.materializedHint&&n.options.materialized!==void 0&&(i=n.options.materialized?"MATERIALIZED":"NOT MATERIALIZED"),[a,o,"AS",i,`(${r})`].filter(Boolean).join(" ")}).join(", ")+" "}getWhereInIdsCondition(t){const n=this.expressionMap.mainAlias.metadata,r=(Array.isArray(t)?t:[t]).map(o=>n.ensureEntityIdMap(o));if(!n.hasMultiplePrimaryKeys){const o=n.primaryColumns[0];if(!o.transformer&&!o.relationMetadata&&!o.embeddedMetadata)return{[o.propertyName]:Ur(r.map(a=>o.getEntityValue(a,!1)))}}return new lD(o=>{for(const a of r)o.orWhere(new lD(i=>i.where(a)))})}getExistsCondition(t){const n=t.clone().orderBy().groupBy().offset(void 0).limit(void 0).skip(void 0).take(void 0).select("1").setOption("disable-global-order");return[`EXISTS (${n.getQuery()})`,n.getParameters()]}findColumnsForPropertyPath(t){let n=this.expressionMap.mainAlias;const r=[],o=t.split(".");for(;o.length>1;){const s=o[0];if(!(n!=null&&n.hasMetadata))break;if(n.metadata.hasEmbeddedWithPropertyPath(s)){o.unshift(`${o.shift()}.${o.shift()}`);continue}if(n.metadata.hasRelationWithPropertyPath(s)){const c=this.expressionMap.joinAttributes.find(l=>l.relationPropertyPath===s);if(!(c!=null&&c.alias)){const l=r.length>0?`${r.join(".")}.${s}`:s;throw new Error(`Cannot find alias for relation at ${l}`)}n=c.alias,r.push(...s.split(".")),o.shift();continue}break}if(!n)throw new Error(`Cannot find alias for property ${t}`);const a=o.join("."),i=n.metadata.findColumnsWithPropertyPath(a);if(!i.length)throw new zr(t,n.metadata);return[n,r,i]}createPropertyPath(t,n,r=""){const o=[];for(const a of Object.keys(n)){const i=r?`${r}.${a}`:a;if(n[a]===null||typeof n[a]!="object"||pt.isFindOperator(n[a])){o.push(i);continue}if(t.hasEmbeddedWithPropertyPath(i)){const s=this.createPropertyPath(t,n[a],i);o.push(...s);continue}if(t.hasRelationWithPropertyPath(i)){const s=t.findRelationWithPropertyPath(i);if(s.relationType==="one-to-one"||s.relationType==="many-to-one"){const u=s.joinColumns.map(d=>d.referencedColumn).filter(d=>!!d);if(u.length>0&&u.every(d=>d.getEntityValue(n[a],!1))){o.push(i);continue}}if(s.relationType==="one-to-many"||s.relationType==="many-to-many")throw new Error(`Cannot query across ${s.relationType} for property ${i}`);const c=s.inverseEntityMetadata.primaryColumns;if(c.length>0&&c.every(u=>u.getEntityValue(n[a],!1))){const u=c.map(d=>`${i}.${d.propertyPath}`);o.push(...u);continue}const l=this.createPropertyPath(s.inverseEntityMetadata,n[a]).map(u=>`${i}.${u}`);o.push(...l);continue}o.push(i)}return o}*getPredicates(t){if(this.expressionMap.mainAlias.hasMetadata){const n=this.createPropertyPath(this.expressionMap.mainAlias.metadata,t);for(const r of n){const[o,a,i]=this.findColumnsForPropertyPath(r);for(const s of i){let c=t;for(const d of a){if(!c||!(d in c)){c={};break}c=c[d]}const l=this.expressionMap.aliasNamePrefixingEnabled?`${o.name}.${s.propertyPath}`:s.propertyPath,u=s.getEntityValue(c,!0);yield[l,u]}}}else for(const n of Object.keys(t)){const r=t[n];yield[this.expressionMap.aliasNamePrefixingEnabled?`${this.alias}.${n}`:n,r]}}getWherePredicateCondition(t,n){if(pt.isFindOperator(n)){let r=[];if(n.useParameter)if(n.objectLiteralParameters)this.setParameters(n.objectLiteralParameters);else if(n.multipleParameters)for(const o of n.value)r.push(this.createParameter(o));else r.push(this.createParameter(n.value));if(n.type==="raw")return n.getSql?n.getSql(t):{operator:"equal",parameters:[t,n.value]};if(n.type==="not")return n.child?{operator:n.type,condition:this.getWherePredicateCondition(t,n.child)}:{operator:"notEqual",parameters:[t,...r]};if(n.type==="and"){const o=n.value;return{operator:n.type,parameters:o.map(a=>this.createWhereConditionExpression(this.getWherePredicateCondition(t,a)))}}else if(n.type==="or"){const o=n.value;return{operator:n.type,parameters:o.map(a=>this.createWhereConditionExpression(this.getWherePredicateCondition(t,a)))}}else return{operator:n.type,parameters:[t,...r]}}else return{operator:"equal",parameters:[t,this.createParameter(n)]}}getWhereCondition(t){if(typeof t=="string")return t;if(pt.isBrackets(t)){const o=this.createQueryBuilder();return o.parentQueryBuilder=this,o.expressionMap.mainAlias=this.expressionMap.mainAlias,o.expressionMap.aliasNamePrefixingEnabled=this.expressionMap.aliasNamePrefixingEnabled,o.expressionMap.parameters=this.expressionMap.parameters,o.expressionMap.nativeParameters=this.expressionMap.nativeParameters,o.expressionMap.wheres=[],t.whereFactory(o),{operator:pt.isNotBrackets(t)?"not":"brackets",condition:o.expressionMap.wheres}}if(typeof t=="function")return t(this);const n=Array.isArray(t)?t:[t],r=[];for(const o of n){const a=[];for(const[i,s]of this.getPredicates(o))a.push({type:"and",condition:this.getWherePredicateCondition(i,s)});r.push({type:"or",condition:a})}return r.length===1?r[0].condition:r}obtainQueryRunner(){return this.queryRunner||this.connection.createQueryRunner()}hasCommonTableExpressions(){return this.expressionMap.commonTableExpressions.length>0}}kt.queryBuilderRegistry={};class Are{static from(t){const n=new this;return n.raw=t.records,n.affected=t.affected,n}}class Tre extends kt{constructor(t,n){super(t,n),this["@instanceof"]=Symbol.for("DeleteQueryBuilder"),this.expressionMap.aliasNamePrefixingEnabled=!1}getQuery(){let t=this.createComment();return t+=this.createCteExpression(),t+=this.createDeleteExpression(),this.replacePropertyNamesForTheWholeQuery(t.trim())}async execute(){const[t,n]=this.getQueryAndParameters(),r=this.obtainQueryRunner();let o=!1;try{this.expressionMap.useTransaction===!0&&r.isTransactionActive===!1&&(await r.startTransaction(),o=!0),this.expressionMap.callListeners===!0&&this.expressionMap.mainAlias.hasMetadata&&await r.broadcaster.broadcast("BeforeRemove",this.expressionMap.mainAlias.metadata);const a=await r.query(t,n,!0),i=Are.from(a);return this.expressionMap.callListeners===!0&&this.expressionMap.mainAlias.hasMetadata&&await r.broadcaster.broadcast("AfterRemove",this.expressionMap.mainAlias.metadata),o&&await r.commitTransaction(),i}catch(a){if(o)try{await r.rollbackTransaction()}catch{}throw a}finally{r!==this.queryRunner&&await r.release()}}from(t,n){t=pt.isEntitySchema(t)?t.options.name:t;const r=this.createFromAlias(t,n);return this.expressionMap.setMainAlias(r),this}where(t,n){this.expressionMap.wheres=[];const r=this.getWhereCondition(t);return r&&(this.expressionMap.wheres=[{type:"simple",condition:r}]),n&&this.setParameters(n),this}andWhere(t,n){return this.expressionMap.wheres.push({type:"and",condition:this.getWhereCondition(t)}),n&&this.setParameters(n),this}orWhere(t,n){return this.expressionMap.wheres.push({type:"or",condition:this.getWhereCondition(t)}),n&&this.setParameters(n),this}whereInIds(t){return this.where(this.getWhereInIdsCondition(t))}andWhereInIds(t){return this.andWhere(this.getWhereInIdsCondition(t))}orWhereInIds(t){return this.orWhere(this.getWhereInIdsCondition(t))}output(t){return this.returning(t)}returning(t){if(!this.connection.driver.isReturningSqlSupported("delete"))throw new Zf;return this.expressionMap.returning=t,this}createDeleteExpression(){const t=this.getTableName(this.getMainTableName()),n=this.createWhereExpression(),r=this.createReturningExpression("delete");return r===""?`DELETE FROM ${t}${n}`:this.connection.driver.options.type==="mssql"?`DELETE FROM ${t} OUTPUT ${r}${n}`:`DELETE FROM ${t}${n} RETURNING ${r}`}}let Gf;const Rre=new Uint8Array(16);function Ire(){if(!Gf&&(Gf=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Gf))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Gf(Rre)}const Zt=[];for(let e=0;e<256;++e)Zt.push((e+256).toString(16).slice(1));function Dre(e,t=0){return Zt[e[t+0]]+Zt[e[t+1]]+Zt[e[t+2]]+Zt[e[t+3]]+"-"+Zt[e[t+4]]+Zt[e[t+5]]+"-"+Zt[e[t+6]]+Zt[e[t+7]]+"-"+Zt[e[t+8]]+Zt[e[t+9]]+"-"+Zt[e[t+10]]+Zt[e[t+11]]+Zt[e[t+12]]+Zt[e[t+13]]+Zt[e[t+14]]+Zt[e[t+15]]}const Lre=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),uD={randomUUID:Lre};function Fre(e,t,n){if(uD.randomUUID&&!t&&!e)return uD.randomUUID();e=e||{};const r=e.random||(e.rng||Ire)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,Dre(r)}class dD{constructor(){this.count=0,this.promises=[]}async wait(){return this.promises.length>0&&await Promise.all(this.promises),this}}class fD{constructor(){this.identifiers=[],this.generatedMaps=[]}static from(t){const n=new this;return n.raw=t.raw,n}}class $x{constructor(t,n){this.queryRunner=t,this.expressionMap=n}async update(t,n){const r=this.expressionMap.mainAlias.metadata;await Promise.all(n.map(async(o,a)=>{if(this.queryRunner.connection.driver.isReturningSqlSupported("update")){this.queryRunner.connection.driver.options.type==="oracle"&&Array.isArray(t.raw)&&this.expressionMap.extraReturningColumns.length>0&&(t.raw=t.raw.reduce((c,l,u)=>(c[this.expressionMap.extraReturningColumns[u].databaseName]=l[0],c),{}));const i=Array.isArray(t.raw)?t.raw[a]:t.raw,s=this.queryRunner.connection.driver.createGeneratedMap(r,i);s&&(this.queryRunner.manager.merge(r.target,o,s),t.generatedMaps.push(s))}else{const i=this.expressionMap.extraReturningColumns;if(i.length>0){const s=this.expressionMap.mainAlias.metadata.getEntityIdMap(o);if(!s)throw new xe("Cannot update entity because entity id is not set in the entity.");const c=await this.queryRunner.manager.createQueryBuilder().select(r.primaryColumns.map(l=>r.targetName+"."+l.propertyPath)).addSelect(i.map(l=>r.targetName+"."+l.propertyPath)).from(r.target,r.targetName).where(s).withDeleted().setOption("create-pojo").getOne();c&&(this.queryRunner.manager.merge(r.target,o,c),t.generatedMaps.push(c))}}}))}async insert(t,n){const r=this.expressionMap.mainAlias.metadata;let o=r.getInsertionReturningColumns();const a=this.queryRunner.connection.driver.isReturningSqlSupported("insert");o=o.filter(s=>s.isGenerated?a===!0:!0);const i=n.map((s,c)=>{this.queryRunner.connection.driver.options.type==="oracle"&&Array.isArray(t.raw)&&this.expressionMap.extraReturningColumns.length>0&&(t.raw=t.raw.reduce((d,f,h)=>(d[this.expressionMap.extraReturningColumns[h].databaseName]=f[0],d),{}));const l=Array.isArray(t.raw)?t.raw[c]:t.raw,u=this.queryRunner.connection.driver.createGeneratedMap(r,l,c,n.length)||{};return c in this.expressionMap.locallyGenerated&&this.queryRunner.manager.merge(r.target,u,this.expressionMap.locallyGenerated[c]),this.queryRunner.manager.merge(r.target,s,u),u});if(o.length>0&&!this.queryRunner.connection.driver.isReturningSqlSupported("insert")){const s=n.map(l=>{const u=r.getEntityIdMap(l);if(!u)throw new xe("Cannot update entity because entity id is not set in the entity.");return u}),c=await this.queryRunner.manager.createQueryBuilder().select(r.primaryColumns.map(l=>r.targetName+"."+l.propertyPath)).addSelect(o.map(l=>r.targetName+"."+l.propertyPath)).from(r.target,r.targetName).where(s).setOption("create-pojo").getMany();n.forEach((l,u)=>{this.queryRunner.manager.merge(r.target,i[u],c[u]),this.queryRunner.manager.merge(r.target,l,c[u])})}n.forEach((s,c)=>{const l=r.getEntityIdMap(s);t.identifiers.push(l),t.generatedMaps.push(i[c])})}getUpdationReturningColumns(){return this.expressionMap.mainAlias.metadata.columns.filter(t=>t.asExpression!==void 0||t.isUpdateDate||t.isVersion)}getSoftDeletionReturningColumns(){return this.expressionMap.mainAlias.metadata.columns.filter(t=>t.asExpression!==void 0||t.isUpdateDate||t.isVersion||t.isDeleteDate)}}class Bre extends kt{constructor(){super(...arguments),this["@instanceof"]=Symbol.for("InsertQueryBuilder")}getQuery(){let t=this.createComment();return t+=this.createCteExpression(),t+=this.createInsertExpression(),this.replacePropertyNamesForTheWholeQuery(t.trim())}async execute(){const t=this.getValueSets();if(t.length===0)return new fD;const n=this.obtainQueryRunner();let r=!1;try{if(this.expressionMap.useTransaction===!0&&n.isTransactionActive===!1&&(await n.startTransaction(),r=!0),this.expressionMap.callListeners===!0&&this.expressionMap.mainAlias.hasMetadata){const h=new dD;t.forEach(g=>{n.broadcaster.broadcastBeforeInsertEvent(h,this.expressionMap.mainAlias.metadata,g)}),await h.wait()}let o=null,a=null;const i=new $x(n,this.expressionMap),s=[];if(Array.isArray(this.expressionMap.returning)&&this.expressionMap.mainAlias.hasMetadata)for(const h of this.expressionMap.returning)s.push(...this.expressionMap.mainAlias.metadata.findColumnsWithPropertyPath(h));this.expressionMap.updateEntity===!0&&this.expressionMap.mainAlias.hasMetadata&&(t.length>1&&this.connection.driver.options.type==="oracle"||(this.expressionMap.extraReturningColumns=this.expressionMap.mainAlias.metadata.getInsertionReturningColumns()),s.push(...this.expressionMap.extraReturningColumns.filter(h=>!s.includes(h)))),s.length>0&&this.connection.driver.options.type==="mssql"&&(o=this.connection.driver.buildTableVariableDeclaration("@OutputTable",s),a="SELECT * FROM @OutputTable");const[c,l]=this.getQueryAndParameters(),u=[o,c,a].filter(h=>h!=null).join(`;

`),d=await n.query(u,l,!0),f=fD.from(d);if(this.expressionMap.updateEntity===!0&&this.expressionMap.mainAlias.hasMetadata&&await i.insert(f,t),this.expressionMap.callListeners===!0&&this.expressionMap.mainAlias.hasMetadata){const h=new dD;t.forEach(g=>{n.broadcaster.broadcastAfterInsertEvent(h,this.expressionMap.mainAlias.metadata,g)}),await h.wait()}return r&&await n.commitTransaction(),f}catch(o){if(r)try{await n.rollbackTransaction()}catch{}throw o}finally{n!==this.queryRunner&&await n.release()}}into(t,n){t=pt.isEntitySchema(t)?t.options.name:t;const r=this.createFromAlias(t);return this.expressionMap.setMainAlias(r),this.expressionMap.insertColumns=n||[],this}values(t){return this.expressionMap.valuesSet=t,this}output(t){return this.returning(t)}returning(t){if(!this.connection.driver.isReturningSqlSupported("insert"))throw new Zf;return this.expressionMap.returning=t,this}updateEntity(t){return this.expressionMap.updateEntity=t,this}onConflict(t){return this.expressionMap.onConflict=t,this}orIgnore(t=!0){return this.expressionMap.onIgnore=!!t,this}orUpdate(t,n,r){return Array.isArray(t)?(this.expressionMap.onUpdate={overwrite:t,conflict:n,skipUpdateIfNoValuesChanged:r==null?void 0:r.skipUpdateIfNoValuesChanged,indexPredicate:r==null?void 0:r.indexPredicate,upsertType:r==null?void 0:r.upsertType},this):(this.expressionMap.onUpdate={conflict:t==null?void 0:t.conflict_target,columns:t==null?void 0:t.columns,overwrite:t==null?void 0:t.overwrite,skipUpdateIfNoValuesChanged:r==null?void 0:r.skipUpdateIfNoValuesChanged,upsertType:r==null?void 0:r.upsertType},this)}createInsertExpression(){var i,s;const t=this.getTableName(this.getMainTableName()),n=this.createValuesExpression(),r=this.connection.driver.options.type==="oracle"&&this.getValueSets().length>1?null:this.createReturningExpression("insert"),o=this.createColumnNamesExpression();let a="INSERT ";if(((i=this.expressionMap.onUpdate)==null?void 0:i.upsertType)==="primary-key"&&(a="UPSERT "),(ge.isMySQLFamily(this.connection.driver)||this.connection.driver.options.type==="aurora-mysql")&&(a+=`${this.expressionMap.onIgnore?" IGNORE ":""}`),a+=`INTO ${t}`,this.alias!==this.getMainTableName()&&ge.isPostgresFamily(this.connection.driver)&&(a+=` AS "${this.alias}"`),o?a+=`(${o})`:!n&&(ge.isMySQLFamily(this.connection.driver)||this.connection.driver.options.type==="aurora-mysql")&&(a+="()"),r&&this.connection.driver.options.type==="mssql"&&(a+=` OUTPUT ${r}`),n?(this.connection.driver.options.type==="oracle"||this.connection.driver.options.type==="sap")&&this.getValueSets().length>1?a+=` ${n}`:a+=` VALUES ${n}`:ge.isMySQLFamily(this.connection.driver)||this.connection.driver.options.type==="aurora-mysql"?a+=" VALUES ()":a+=" DEFAULT VALUES",((s=this.expressionMap.onUpdate)==null?void 0:s.upsertType)!=="primary-key"){if(this.connection.driver.supportedUpsertTypes.includes("on-conflict-do-update")){if(this.expressionMap.onIgnore)a+=" ON CONFLICT DO NOTHING ";else if(this.expressionMap.onConflict)a+=` ON CONFLICT ${this.expressionMap.onConflict} `;else if(this.expressionMap.onUpdate){const{overwrite:c,columns:l,conflict:u,skipUpdateIfNoValuesChanged:d,indexPredicate:f}=this.expressionMap.onUpdate;let h="ON CONFLICT";if(Array.isArray(u)){if(h+=` ( ${u.map(m=>this.escape(m)).join(", ")} )`,f&&!ge.isPostgresFamily(this.connection.driver))throw new xe("indexPredicate option is not supported by the current database driver");f&&ge.isPostgresFamily(this.connection.driver)&&(h+=` WHERE ( ${f} )`)}else u&&(h+=` ON CONSTRAINT ${this.escape(u)}`);const g=[];Array.isArray(c)?g.push(...c.map(m=>`${this.escape(m)} = EXCLUDED.${this.escape(m)}`)):l&&g.push(...l.map(m=>`${this.escape(m)} = :${m}`)),g.length>0&&(a+=` ${h} DO UPDATE SET `,g.push(...this.expressionMap.mainAlias.metadata.columns.filter(m=>m.isUpdateDate&&!(c!=null&&c.includes(m.databaseName))&&!(this.connection.driver.options.type==="oracle"&&this.getValueSets().length>1||ge.isSQLiteFamily(this.connection.driver)||this.connection.driver.options.type==="sap"||this.connection.driver.options.type==="spanner")).map(m=>`${this.escape(m.databaseName)} = DEFAULT`)),a+=g.join(", "),a+=" "),Array.isArray(c)&&d&&ge.isPostgresFamily(this.connection.driver)&&(a+=" WHERE (",a+=c.map(m=>`${t}.${this.escape(m)} IS DISTINCT FROM EXCLUDED.${this.escape(m)}`).join(" OR "),a+=") ")}}else if(this.connection.driver.supportedUpsertTypes.includes("on-duplicate-key-update")){if(this.expressionMap.onUpdate){const{overwrite:c,columns:l}=this.expressionMap.onUpdate;Array.isArray(c)?(a+=" ON DUPLICATE KEY UPDATE ",a+=c.map(u=>`${this.escape(u)} = VALUES(${this.escape(u)})`).join(", "),a+=" "):Array.isArray(l)&&(a+=" ON DUPLICATE KEY UPDATE ",a+=l.map(u=>`${this.escape(u)} = :${u}`).join(", "),a+=" ")}}else if(this.expressionMap.onUpdate)throw new xe("onUpdate is not supported by the current database driver")}return r&&(ge.isPostgresFamily(this.connection.driver)||this.connection.driver.options.type==="oracle"||this.connection.driver.options.type==="cockroachdb"||ge.isMySQLFamily(this.connection.driver))&&(a+=` RETURNING ${r}`),this.connection.driver.options.type==="mssql"&&this.expressionMap.mainAlias.hasMetadata&&this.expressionMap.mainAlias.metadata.columns.filter(c=>this.expressionMap.insertColumns.length>0?this.expressionMap.insertColumns.indexOf(c.propertyPath)!==-1:c.isInsert).some(c=>this.isOverridingAutoIncrementBehavior(c))&&(a=`SET IDENTITY_INSERT ${t} ON; ${a}; SET IDENTITY_INSERT ${t} OFF`),a}getInsertedColumns(){return this.expressionMap.mainAlias.hasMetadata?this.expressionMap.mainAlias.metadata.columns.filter(t=>this.expressionMap.insertColumns.length?this.expressionMap.insertColumns.indexOf(t.propertyPath)!==-1:!(!t.isInsert||t.isGenerated&&t.generationStrategy==="increment"&&this.connection.driver.options.type!=="spanner"&&this.connection.driver.options.type!=="oracle"&&!ge.isSQLiteFamily(this.connection.driver)&&!ge.isMySQLFamily(this.connection.driver)&&this.connection.driver.options.type!=="aurora-mysql"&&!(this.connection.driver.options.type==="mssql"&&this.isOverridingAutoIncrementBehavior(t)))):[]}createColumnNamesExpression(){const t=this.getInsertedColumns();if(t.length>0)return t.map(n=>this.escape(n.databaseName)).join(", ");if(!this.expressionMap.mainAlias.hasMetadata&&!this.expressionMap.insertColumns.length){const n=this.getValueSets();if(n.length===1)return Object.keys(n[0]).map(r=>this.escape(r)).join(", ")}return this.expressionMap.insertColumns.map(n=>this.escape(n)).join(", ")}createValuesExpression(){const t=this.getValueSets(),n=this.getInsertedColumns();if(n.length>0){let r="";return t.forEach((o,a)=>{n.forEach((i,s)=>{s===0&&(this.connection.driver.options.type==="oracle"&&t.length>1||this.connection.driver.options.type==="sap"&&t.length>1?r+=" SELECT ":r+="(");let c=i.getEntityValue(o);if(typeof c!="function"&&(c=this.connection.driver.preparePersistentValue(c,i)),i.isVersion&&c===void 0)r+="1";else if(i.isDiscriminator)r+=this.createParameter(this.expressionMap.mainAlias.metadata.discriminatorValue);else if(i.isGenerated&&i.generationStrategy==="uuid"&&!this.connection.driver.isUUIDGenerationSupported()&&c===void 0)c=Fre(),r+=this.createParameter(c),a in this.expressionMap.locallyGenerated||(this.expressionMap.locallyGenerated[a]={}),i.setEntityValue(this.expressionMap.locallyGenerated[a],c);else if(c===void 0)this.connection.driver.options.type==="oracle"&&t.length>1||ge.isSQLiteFamily(this.connection.driver)||this.connection.driver.options.type==="sap"||this.connection.driver.options.type==="spanner"?i.default!==void 0&&i.default!==null?r+=this.connection.driver.normalizeDefault(i):r+="NULL":r+="DEFAULT";else if(c===null&&this.connection.driver.options.type==="spanner")r+="NULL";else if(typeof c=="function")r+=c();else{this.connection.driver.options.type==="mssql"&&(c=this.connection.driver.parametrizeValue(i,c));const l=this.createParameter(c);if((ge.isMySQLFamily(this.connection.driver)||this.connection.driver.options.type==="aurora-mysql")&&this.connection.driver.spatialTypes.indexOf(i.type)!==-1){const u=this.connection.driver.options.legacySpatialSupport?"GeomFromText":"ST_GeomFromText";i.srid!=null?r+=`${u}(${l}, ${i.srid})`:r+=`${u}(${l})`}else ge.isPostgresFamily(this.connection.driver)&&this.connection.driver.spatialTypes.indexOf(i.type)!==-1?i.srid!=null?r+=`ST_SetSRID(ST_GeomFromGeoJSON(${l}), ${i.srid})::${i.type}`:r+=`ST_GeomFromGeoJSON(${l})::${i.type}`:this.connection.driver.options.type==="mssql"&&this.connection.driver.spatialTypes.indexOf(i.type)!==-1?r+=i.type+"::STGeomFromText("+l+", "+(i.srid||"0")+")":r+=l}s===n.length-1?a===t.length-1?this.connection.driver.options.type==="oracle"&&t.length>1?r+=" FROM DUAL ":this.connection.driver.options.type==="sap"&&t.length>1?r+=" FROM dummy ":r+=")":this.connection.driver.options.type==="oracle"&&t.length>1?r+=" FROM DUAL UNION ALL ":this.connection.driver.options.type==="sap"&&t.length>1?r+=" FROM dummy UNION ALL ":r+="), ":r+=", "})}),r==="()"?"":r}else{let r="";return t.forEach((o,a)=>{Object.keys(o).forEach((i,s)=>{s===0&&(r+="(");const c=o[i];typeof c=="function"?r+=c():c===void 0?this.connection.driver.options.type==="oracle"&&t.length>1||ge.isSQLiteFamily(this.connection.driver)||this.connection.driver.options.type==="sap"||this.connection.driver.options.type==="spanner"?r+="NULL":r+="DEFAULT":c===null&&this.connection.driver.options.type==="spanner"||(r+=this.createParameter(c)),s===Object.keys(o).length-1?a===t.length-1?r+=")":r+="), ":r+=", "})}),r==="()"?"":r}}getValueSets(){if(Array.isArray(this.expressionMap.valuesSet))return this.expressionMap.valuesSet;if(Dt.isObject(this.expressionMap.valuesSet))return[this.expressionMap.valuesSet];throw new yre}isOverridingAutoIncrementBehavior(t){return t.isPrimary&&t.isGenerated&&t.generationStrategy==="increment"&&this.getValueSets().some(n=>t.getEntityValue(n)!==void 0&&t.getEntityValue(n)!==null)}}class pD{constructor(t,n){this.queryBuilder=t,this.expressionMap=n}async update(t){const n=this.expressionMap.relationMetadata;if(n.isManyToOne||n.isOneToOneOwner){const r=n.joinColumns.reduce((o,a)=>{const i=Dt.isObject(t)?a.referencedColumn.getEntityValue(t):t;return a.setEntityValue(o,i),o},{});if(!this.expressionMap.of||Array.isArray(this.expressionMap.of)&&!this.expressionMap.of.length)return;await this.queryBuilder.createQueryBuilder().update(n.entityMetadata.target).set(r).whereInIds(this.expressionMap.of).execute()}else if((n.isOneToOneNotOwner||n.isOneToMany)&&t===null){const r={};n.inverseRelation.joinColumns.forEach(c=>{r[c.propertyName]=null});const o=Array.isArray(this.expressionMap.of)?this.expressionMap.of:[this.expressionMap.of],a={},i=[];o.forEach((c,l)=>{n.inverseRelation.joinColumns.map((u,d)=>{const f="joinColumn_"+l+"_"+d;a[f]=Dt.isObject(c)?u.referencedColumn.getEntityValue(c):c,i.push(`${u.propertyPath} = :${f}`)})});const s=i.map(c=>"("+c+")").join(" OR ");if(!s)return;await this.queryBuilder.createQueryBuilder().update(n.inverseEntityMetadata.target).set(r).where(s).setParameters(a).execute()}else if(n.isOneToOneNotOwner||n.isOneToMany){if(Array.isArray(this.expressionMap.of))throw new xe("You cannot update relations of multiple entities with the same related object. Provide a single entity into .of method.");const r=this.expressionMap.of,o=n.inverseRelation.joinColumns.reduce((a,i)=>{const s=Dt.isObject(r)?i.referencedColumn.getEntityValue(r):r;return i.setEntityValue(a,s),a},{});if(!t||Array.isArray(t)&&!t.length)return;await this.queryBuilder.createQueryBuilder().update(n.inverseEntityMetadata.target).set(o).whereInIds(t).execute()}else{const r=n.junctionEntityMetadata,o=Array.isArray(this.expressionMap.of)?this.expressionMap.of:[this.expressionMap.of],a=Array.isArray(t)?t:[t],i=n.isManyToManyOwner?o:a,s=n.isManyToManyOwner?a:o,c=[];if(i.forEach(l=>{s.forEach(u=>{const d={};r.ownerColumns.forEach(f=>{d[f.databaseName]=Dt.isObject(l)?f.referencedColumn.getEntityValue(l):l}),r.inverseColumns.forEach(f=>{d[f.databaseName]=Dt.isObject(u)?f.referencedColumn.getEntityValue(u):u}),c.push(d)})}),!c.length)return;this.queryBuilder.connection.driver.options.type==="oracle"||this.queryBuilder.connection.driver.options.type==="sap"?await Promise.all(c.map(l=>this.queryBuilder.createQueryBuilder().insert().into(r.tableName).values(l).execute())):await this.queryBuilder.createQueryBuilder().insert().into(r.tableName).values(c).execute()}}}class $re{constructor(t,n){this.queryBuilder=t,this.expressionMap=n}async remove(t){const n=this.expressionMap.relationMetadata;if(n.isOneToMany){const r=Array.isArray(this.expressionMap.of)?this.expressionMap.of:[this.expressionMap.of],o=Array.isArray(t)?t:[t],a={};n.inverseRelation.joinColumns.forEach(l=>{a[l.propertyName]=null});const i={},s=[];r.forEach((l,u)=>{s.push(...o.map((d,f)=>[...n.inverseRelation.joinColumns.map((h,g)=>{const m="joinColumn_"+u+"_"+f+"_"+g;return i[m]=Dt.isObject(l)?h.referencedColumn.getEntityValue(l):l,`${h.propertyPath} = :${m}`}),...n.inverseRelation.entityMetadata.primaryColumns.map((h,g)=>{const m="primaryColumn_"+f+"_"+f+"_"+g;return i[m]=Dt.isObject(d)?h.getEntityValue(d):d,`${h.propertyPath} = :${m}`})].join(" AND ")))});const c=s.map(l=>"("+l+")").join(" OR ");if(!c)return;await this.queryBuilder.createQueryBuilder().update(n.inverseEntityMetadata.target).set(a).where(c).setParameters(i).execute()}else{const r=n.junctionEntityMetadata,o=Array.isArray(this.expressionMap.of)?this.expressionMap.of:[this.expressionMap.of],a=Array.isArray(t)?t:[t],i=n.isManyToManyOwner?o:a,s=n.isManyToManyOwner?a:o,c={},l=[];i.forEach((d,f)=>{l.push(...s.map((h,g)=>[...r.ownerColumns.map((m,v)=>{const b="firstValue_"+f+"_"+g+"_"+v;return c[b]=Dt.isObject(d)?m.referencedColumn.getEntityValue(d):d,`${m.databaseName} = :${b}`}),...r.inverseColumns.map((m,v)=>{const b="secondValue_"+f+"_"+g+"_"+v;return c[b]=Dt.isObject(h)?m.referencedColumn.getEntityValue(h):h,`${m.databaseName} = :${b}`})].join(" AND ")))});const u=l.map(d=>"("+d+")").join(" OR ");await this.queryBuilder.createQueryBuilder().delete().from(r.tableName).where(u).setParameters(c).execute()}}}class zre extends kt{constructor(){super(...arguments),this["@instanceof"]=Symbol.for("RelationQueryBuilder")}getQuery(){return""}of(t){return this.expressionMap.of=t,this}async set(t){const n=this.expressionMap.relationMetadata;if(!this.expressionMap.of)throw new xe("Entity whose relation needs to be set is not set. Use .of method to define whose relation you want to set.");if(n.isManyToMany||n.isOneToMany)throw new xe(`Set operation is only supported for many-to-one and one-to-one relations. However given "${n.propertyPath}" has ${n.relationType} relation. Use .add() method instead.`);if(n.joinColumns&&n.joinColumns.length>1&&(!Dt.isObject(t)||Object.keys(t).length<n.joinColumns.length))throw new xe('Value to be set into the relation must be a map of relation ids, for example: .set({ firstName: "...", lastName: "..." })');return new pD(this,this.expressionMap).update(t)}async add(t){if(Array.isArray(t)&&t.length===0)return;const n=this.expressionMap.relationMetadata;if(!this.expressionMap.of)throw new xe("Entity whose relation needs to be set is not set. Use .of method to define whose relation you want to set.");if(n.isManyToOne||n.isOneToOne)throw new xe(`Add operation is only supported for many-to-many and one-to-many relations. However given "${n.propertyPath}" has ${n.relationType} relation. Use .set() method instead.`);if(n.joinColumns&&n.joinColumns.length>1&&(!Dt.isObject(t)||Object.keys(t).length<n.joinColumns.length))throw new xe('Value to be set into the relation must be a map of relation ids, for example: .set({ firstName: "...", lastName: "..." })');return new pD(this,this.expressionMap).update(t)}async remove(t){if(Array.isArray(t)&&t.length===0)return;const n=this.expressionMap.relationMetadata;if(!this.expressionMap.of)throw new xe("Entity whose relation needs to be set is not set. Use .of method to define whose relation you want to set.");if(n.isManyToOne||n.isOneToOne)throw new xe(`Add operation is only supported for many-to-many and one-to-many relations. However given "${n.propertyPath}" has ${n.relationType} relation. Use .set(null) method instead.`);return new $re(this,this.expressionMap).remove(t)}async addAndRemove(t,n){await this.remove(n),await this.add(t)}async loadOne(){return this.loadMany().then(t=>t[0])}async loadMany(){let t=this.expressionMap.of;if(!Dt.isObject(t)){const n=this.expressionMap.mainAlias.metadata;if(n.hasMultiplePrimaryKeys)throw new xe("Cannot load entity because only one primary key was specified, however entity contains multiple primary keys");t=n.primaryColumns[0].createValueMap(t)}return this.connection.relationLoader.load(this.expressionMap.relationMetadata,t,this.queryRunner)}}class Gt{static chunk(t,n){return Array.from(Array(Math.ceil(t.length/n)),(r,o)=>t.slice(o*n,o*n+n))}static splitClassesAndStrings(t){return[t.filter(n=>typeof n!="string"),t.filter(n=>typeof n=="string")]}static groupBy(t,n){return t.reduce((r,o)=>{const a=n(o);let i=r.find(s=>s.id===a);return i||(i={id:a,items:[]},r.push(i)),i.items.push(o),r},[])}static uniq(t,n){return t.reduce((r,o)=>{let a=!1;if(typeof n=="function"){const i=n(o);a=!!r.find(s=>n(s)===i)}else typeof n=="string"?a=!!r.find(i=>i[n]===o[n]):a=r.indexOf(o)!==-1;return a||r.push(o),r},[])}static isPlainObject(t){return t==null?!1:!t.constructor||t.constructor===Object}static mergeArrayKey(t,n,r,o){if(o.has(r)){t[n]=o.get(r);return}if(!(r instanceof Promise)){if(!this.isPlainObject(r)&&!Array.isArray(r)){t[n]=r;return}t[n]||(t[n]=Array.isArray(r)?[]:{}),o.set(r,t[n]),this.merge(t[n],r,o),o.delete(r)}}static mergeObjectKey(t,n,r,o){if(o.has(r)){Object.assign(t,{[n]:o.get(r)});return}if(!(r instanceof Promise)){if(!this.isPlainObject(r)&&!Array.isArray(r)){Object.assign(t,{[n]:r});return}t[n]||Object.assign(t,{[n]:Array.isArray(r)?[]:{}}),o.set(r,t[n]),this.merge(t[n],r,o),o.delete(r)}}static merge(t,n,r=new Map){if(this.isPlainObject(t)&&this.isPlainObject(n))for(const o of Object.keys(n))o!=="__proto__"&&this.mergeObjectKey(t,o,n[o],r);if(Array.isArray(t)&&Array.isArray(n))for(let o=0;o<n.length;o++)this.mergeArrayKey(t,o,n[o],r)}static mergeDeep(t,...n){if(!n.length)return t;for(const r of n)Gt.merge(t,r);return t}static deepCompare(...t){let n,r,o,a;if(arguments.length<1)return!0;for(n=1,r=arguments.length;n<r;n++)if(o=[],a=[],!this.compare2Objects(o,a,arguments[0],arguments[n]))return!1;return!0}static deepValue(t,n){const r=n.split(".");for(let o=0,a=r.length;o<a;o++)t=t[r[o]];return t}static replaceEmptyObjectsWithBooleans(t){for(let n in t)t[n]&&typeof t[n]=="object"&&(Object.keys(t[n]).length===0?t[n]=!0:this.replaceEmptyObjectsWithBooleans(t[n]))}static propertyPathsToTruthyObject(t){let n={};for(let r of t){const o=r.split(".");if(!o.length)continue;(!n[o[0]]||n[o[0]]===!0)&&(n[o[0]]={});let a=n[o[0]];for(let[i,s]of o.entries())i!==0&&(a[s]?a=a[s]:i===o.length-1?(a[s]={},a=null):(a[s]={},a=a[s]))}return this.replaceEmptyObjectsWithBooleans(n),n}static compareIds(t,n){return t==null||n===void 0||n===null?!1:(typeof t.id=="string"&&typeof n.id=="string"||typeof t.id=="number"&&typeof n.id=="number")&&Object.keys(t).length===1&&Object.keys(n).length===1?t.id===n.id:Gt.deepCompare(t,n)}static toBoolean(t){return typeof t=="boolean"?t:typeof t=="string"?t==="true"||t==="1":typeof t=="number"?t>0:!1}static zipObject(t,n){return t.reduce((r,o,a)=>(r[o]=n[a],r),{})}static isArraysEqual(t,n){return t.length!==n.length?!1:t.every(r=>n.indexOf(r)!==-1)}static areMutuallyExclusive(...t){return!t.some(n=>{const r=t.filter(o=>o!==n);return n.some(o=>r.some(a=>a.includes(o)))})}static parseSqlCheckExpression(t,n){const r=t.match(new RegExp(`"${n}" varchar CHECK\\s*\\(\\s*"${n}"\\s+IN\\s*`));if(r&&r.index){const o=t.substring(r.index+r[0].length);let a="",i="";const s=[];for(let c=0;c<o.length;c++){const l=o[c];switch(l){case",":a==""?(s.push(i),i=""):i+=l;break;case"'":a==l?o[c+1]===l?(i+=l,c+=1):a="":a=l;break;case")":if(a=="")return s.push(i),s;i+=l;break;default:a!=""&&(i+=l)}}}}static compare2Objects(t,n,r,o){let a;if(Number.isNaN(r)&&Number.isNaN(o)||r===o)return!0;if(r===null||o===null||r===void 0||o===void 0)return!1;if((typeof r.equals=="function"||typeof r.equals=="function")&&r.equals(o))return!0;if(typeof r=="function"&&typeof o=="function"||r instanceof Date&&o instanceof Date||r instanceof RegExp&&o instanceof RegExp||typeof r=="string"&&typeof o=="string"||typeof r=="number"&&typeof o=="number")return r.toString()===o.toString();if(!(typeof r=="object"&&typeof o=="object")||Object.prototype.isPrototypeOf.call(r,o)||Object.prototype.isPrototypeOf.call(o,r)||r.constructor!==o.constructor||r.prototype!==o.prototype||t.indexOf(r)>-1||n.indexOf(o)>-1)return!1;for(a in o)if(o.hasOwnProperty(a)!==r.hasOwnProperty(a)||typeof o[a]!=typeof r[a])return!1;for(a in r){if(o.hasOwnProperty(a)!==r.hasOwnProperty(a)||typeof o[a]!=typeof r[a])return!1;switch(typeof r[a]){case"object":case"function":if(t.push(r),n.push(o),!this.compare2Objects(t,n,r[a],o[a]))return!1;t.pop(),n.pop();break;default:if(r[a]!==o[a])return!1;break}}return!0}}class Vre{constructor(t,n,r,o,a){this.expressionMap=t,this.driver=n,this.rawRelationIdResults=r,this.rawRelationCountResults=o,this.queryRunner=a}transform(t,n){const r=this.group(t,n),o=[];return r.forEach(a=>{const i=this.transformRawResultsGroup(a,n);i!==void 0&&!Object.values(i).every(s=>s===null)&&o.push(i)}),o}group(t,n){const r=new Map,o=[];return n.metadata.tableType==="view"?o.push(...n.metadata.columns.map(a=>ge.buildAlias(this.driver,void 0,n.name,a.databaseName))):o.push(...n.metadata.primaryColumns.map(a=>ge.buildAlias(this.driver,void 0,n.name,a.databaseName))),t.forEach(a=>{const i=o.map(c=>{const l=a[c];return fm.isBuffer(l)?l.toString("hex"):Dt.isObject(l)?JSON.stringify(l):l}).join("_"),s=r.get(i);s?s.push(a):r.set(i,[a])}),r}transformRawResultsGroup(t,n){let r=n.metadata;if(r.discriminatorColumn){const l=t.map(d=>d[ge.buildAlias(this.driver,void 0,n.name,n.metadata.discriminatorColumn.databaseName)]),u=r.childEntityMetadatas.find(d=>typeof l.find(f=>f===d.discriminatorValue)<"u");u&&(r=u)}let o=r.create(this.queryRunner,{fromDeserializer:!0,pojo:this.expressionMap.options.indexOf("create-pojo")!==-1});const a=this.transformColumns(t,n,o,r),i=this.transformJoins(t,o,n,r),s=this.transformRelationIds(t,n,o,r),c=this.transformRelationCounts(t,n,o);if(a||r.primaryColumns.filter(l=>l.isVirtual===!1).length===0&&(i||s||c))return o}transformColumns(t,n,r,o){let a=!1;return o.columns.forEach(i=>{if(o.childEntityMetadatas.length>0&&o.childEntityMetadatas.findIndex(c=>c.target===i.target)!==-1)return;const s=t[0][ge.buildAlias(this.driver,void 0,n.name,i.databaseName)];s===void 0||i.isVirtual||this.expressionMap.selects.find(c=>c.selection===n.name||c.selection===n.name+"."+i.propertyPath)&&(i.setEntityValue(r,this.driver.prepareHydratedValue(s,i)),s!==null&&(a=!0))}),a}transformJoins(t,n,r,o){let a=!1;return this.expressionMap.joinAttributes.forEach(i=>{if(!i.metadata||!i.isSelected||i.relation&&!o.relations.find(c=>c===i.relation))return;if(i.mapToProperty){if(i.mapToPropertyParentAlias!==r.name)return}else if(!i.relation||i.parentAlias!==r.name||i.relationPropertyPath!==i.relation.propertyPath)return;let s=this.transform(t,i.alias);s=i.isMany?s:s[0],s=!i.isMany&&s===void 0?null:s,s!==void 0&&(i.mapToPropertyPropertyName?n[i.mapToPropertyPropertyName]=s:i.relation.setEntityValue(n,s),a=!0)}),a}transformRelationIds(t,n,r,o){let a=!1;return this.rawRelationIdResults.forEach((i,s)=>{if(i.relationIdAttribute.parentAlias!==n.name)return;const c=i.relationIdAttribute.relation,l=this.createValueMapFromJoinColumns(c,i.relationIdAttribute.parentAlias,t);if(l==null)return;this.prepareDataForTransformRelationIds();const u=this.hashEntityIds(c,l),d=this.relationIdMaps[s][u]||[],f=i.relationIdAttribute.mapToPropertyPropertyPath.split("."),h=(g,m,v)=>{const b=g.shift();if(b&&g.length===0)return m[b]=v,m;if(b&&g.length>0)h(g,m[b],v);else return m};c.isOneToOne||c.isManyToOne?d[0]!==void 0&&(h(f,r,d[0]),a=!0):(h(f,r,d),a=a||d.length>0)}),a}transformRelationCounts(t,n,r){let o=!1;return this.rawRelationCountResults.filter(a=>a.relationCountAttribute.parentAlias===n.name).forEach(a=>{const i=a.relationCountAttribute.relation;let s;i.isOneToMany?s=i.inverseRelation.joinColumns[0].referencedColumn.databaseName:s=i.isOwning?i.joinColumns[0].referencedColumn.databaseName:i.inverseRelation.joinColumns[0].referencedColumn.databaseName;const c=t[0][ge.buildAlias(this.driver,void 0,n.name,s)];c!=null&&(r[a.relationCountAttribute.mapToPropertyPropertyName]=0,a.results.filter(l=>l.parentId===c).forEach(l=>{r[a.relationCountAttribute.mapToPropertyPropertyName]=parseInt(l.cnt),o=!0}))}),o}createValueMapFromJoinColumns(t,n,r){let o;return t.isManyToOne||t.isOneToOneOwner?o=t.entityMetadata.primaryColumns.map(a=>a):t.isOneToMany||t.isOneToOneNotOwner?o=t.inverseRelation.joinColumns.map(a=>a):t.isOwning?o=t.joinColumns.map(a=>a):o=t.inverseRelation.inverseJoinColumns.map(a=>a),o.reduce((a,i)=>(r.forEach(s=>{t.isManyToOne||t.isOneToOneOwner?a[i.databaseName]=this.driver.prepareHydratedValue(s[ge.buildAlias(this.driver,void 0,n,i.databaseName)],i):a[i.databaseName]=this.driver.prepareHydratedValue(s[ge.buildAlias(this.driver,void 0,n,i.referencedColumn.databaseName)],i.referencedColumn)}),a),{})}extractEntityPrimaryIds(t,n){let r;return t.isManyToOne||t.isOneToOneOwner?r=t.entityMetadata.primaryColumns.map(o=>o):t.isOneToMany||t.isOneToOneNotOwner?r=t.inverseRelation.joinColumns.map(o=>o):t.isOwning?r=t.joinColumns.map(o=>o):r=t.inverseRelation.inverseJoinColumns.map(o=>o),r.reduce((o,a)=>(o[a.databaseName]=n[a.databaseName],o),{})}prepareDataForTransformRelationIds(){this.relationIdMaps||(this.relationIdMaps=this.rawRelationIdResults.map(t=>{const n=t.relationIdAttribute.relation;let r;return n.isManyToOne||n.isOneToOneOwner?r=n.joinColumns:n.isOneToMany||n.isOneToOneNotOwner?r=n.inverseEntityMetadata.primaryColumns:n.isOwning?r=n.inverseJoinColumns:r=n.inverseRelation.joinColumns,t.results.reduce((o,a)=>{let i=r.reduce((s,c)=>{let l=a[c.databaseName];return n.isOneToMany||n.isOneToOneNotOwner?(c.isVirtual&&c.referencedColumn&&c.referencedColumn.propertyName!==c.propertyName&&(l=c.referencedColumn.createValueMap(l)),Gt.mergeDeep(s,c.createValueMap(l))):(!c.isPrimary&&c.referencedColumn.referencedColumn&&(l=c.referencedColumn.referencedColumn.createValueMap(l)),Gt.mergeDeep(s,c.referencedColumn.createValueMap(l)))},{});if(r.length===1&&!t.relationIdAttribute.disableMixedMap&&(n.isOneToMany||n.isOneToOneNotOwner?i=r[0].getEntityValue(i):i=r[0].referencedColumn.getEntityValue(i)),i!==void 0){const s=this.hashEntityIds(n,a);o[s]?o[s].push(i):o[s]=[i]}return o},{})}))}hashEntityIds(t,n){const r=this.extractEntityPrimaryIds(t,n);return JSON.stringify(r)}}let Ure=class{constructor(e,t,n){this.connection=e,this.queryRunner=t,this.relationIdAttributes=n}async load(e){const t=this.relationIdAttributes.map(async n=>{if(n.relation.isManyToOne||n.relation.isOneToOneOwner){if(n.queryBuilderFactory)throw new xe("Additional condition can not be used with ManyToOne or OneToOne owner relations.");const r={},o=e.map(a=>{const i={},s=[];n.relation.joinColumns.forEach(l=>{i[l.databaseName]=this.connection.driver.prepareHydratedValue(a[ge.buildAlias(this.connection.driver,void 0,n.parentAlias,l.databaseName)],l.referencedColumn);const u=`${l.databaseName}:${i[l.databaseName]}`;s.indexOf(u)===-1&&s.push(u)}),n.relation.entityMetadata.primaryColumns.forEach(l=>{i[l.databaseName]=this.connection.driver.prepareHydratedValue(a[ge.buildAlias(this.connection.driver,void 0,n.parentAlias,l.databaseName)],l);const u=`${l.databaseName}:${i[l.databaseName]}`;s.indexOf(u)===-1&&s.push(u)}),s.sort();const c=s.join("::");return r[c]?null:(r[c]=!0,i)}).filter(a=>a);return{relationIdAttribute:n,results:o}}else if(n.relation.isOneToMany||n.relation.isOneToOneNotOwner){const r=n.relation,o=r.isOwning?r.joinColumns:r.inverseRelation.joinColumns,a=r.inverseEntityMetadata.target,i=r.inverseEntityMetadata.tableName,s=n.alias||i,c={},l={},u=e.map((h,g)=>{const m=[],v={},b=o.map(_=>{const w=_.databaseName+g,j=h[ge.buildAlias(this.connection.driver,void 0,n.parentAlias,_.referencedColumn.databaseName)],E=`${s}:${_.propertyPath}:${j}`;return m.indexOf(E)!==-1?"":(m.push(E),v[w]=j,s+"."+_.propertyPath+" = :"+w)}).filter(_=>_).join(" AND ");m.sort();const x=m.join("::");return c[x]?"":(c[x]=!0,Object.assign(l,v),b)}).filter(h=>h).map(h=>"("+h+")").join(" OR ");if(!u)return{relationIdAttribute:n,results:[]};const d=this.connection.createQueryBuilder(this.queryRunner);Gt.uniq([...o,...r.inverseRelation.entityMetadata.primaryColumns],h=>h.propertyPath).forEach(h=>{d.addSelect(s+"."+h.propertyPath,h.databaseName)}),d.from(a,s).where("("+u+")").setParameters(l),n.queryBuilderFactory&&n.queryBuilderFactory(d);const f=await d.getRawMany();return f.forEach(h=>{o.forEach(g=>{h[g.databaseName]=this.connection.driver.prepareHydratedValue(h[g.databaseName],g.referencedColumn)}),r.inverseRelation.entityMetadata.primaryColumns.forEach(g=>{h[g.databaseName]=this.connection.driver.prepareHydratedValue(h[g.databaseName],g)})}),{relationIdAttribute:n,results:f}}else{const r=n.relation,o=r.isOwning?r.joinColumns:r.inverseRelation.inverseJoinColumns,a=r.isOwning?r.inverseJoinColumns:r.inverseRelation.joinColumns,i=n.junctionAlias,s=n.joinInverseSideMetadata.tableName,c=n.alias||s,l=r.isOwning?r.junctionEntityMetadata.tableName:r.inverseRelation.junctionEntityMetadata.tableName,u=e.map(x=>o.reduce((_,w)=>(_[w.propertyPath]=x[ge.buildAlias(this.connection.driver,void 0,n.parentAlias,w.referencedColumn.databaseName)],_),{}));if(u.length===0)return{relationIdAttribute:n,results:[]};const d={},f={},h=u.map((x,_)=>{const w=[],j={},E=Object.keys(x).map(C=>{const M=C+_,N=x[C],P=`${i}:${C}:${N}`;return w.indexOf(P)!==-1?"":(w.push(P),j[M]=N,i+"."+C+" = :"+M)}).filter(C=>C).join(" AND ");w.sort();const S=w.join("::");return f[S]?"":(f[S]=!0,Object.assign(d,j),E)}).filter(x=>x),g=a.map(x=>i+"."+x.propertyPath+" = "+c+"."+x.referencedColumn.propertyPath).join(" AND "),m=h.map(x=>"("+x+" AND "+g+")").join(" OR "),v=this.connection.createQueryBuilder(this.queryRunner);a.forEach(x=>{v.addSelect(i+"."+x.propertyPath,x.databaseName).addOrderBy(i+"."+x.propertyPath)}),o.forEach(x=>{v.addSelect(i+"."+x.propertyPath,x.databaseName).addOrderBy(i+"."+x.propertyPath)}),v.from(s,c).innerJoin(l,i,m).setParameters(d),n.queryBuilderFactory&&n.queryBuilderFactory(v);const b=await v.getRawMany();return b.forEach(x=>{[...o,...a].forEach(_=>{x[_.databaseName]=this.connection.driver.prepareHydratedValue(x[_.databaseName],_.referencedColumn)})}),{relationIdAttribute:n,results:b}}});return Promise.all(t)}};class Hre{constructor(t,n){this.connection=t,this.queryRunner=n}load(t,n,r){const o=Array.isArray(n)?n:[n],a=Array.isArray(r)?r:r?[r]:void 0;return t.isManyToMany?this.loadForManyToMany(t,o,a):t.isManyToOne||t.isOneToOneOwner?this.loadForManyToOneAndOneToOneOwner(t,o,a):this.loadForOneToManyAndOneToOneNotOwner(t,o,a)}async loadManyToManyRelationIdsAndGroup(t,n,r,o){const a=t.isManyToMany||t.isOneToMany,i=Array.isArray(n)?n:[n];if(!r&&(r=await this.connection.relationLoader.load(t,n,this.queryRunner,o),!r.length))return i.map(d=>({entity:d,related:a?[]:void 0}));const s=await this.load(t,n,r),c=Array.isArray(r)?r:[r];let l=[],u=[];return t.isManyToManyOwner?(l=t.junctionEntityMetadata.inverseColumns.map(d=>d.referencedColumn),u=t.junctionEntityMetadata.ownerColumns.map(d=>d.referencedColumn)):t.isManyToManyNotOwner?(l=t.junctionEntityMetadata.ownerColumns.map(d=>d.referencedColumn),u=t.junctionEntityMetadata.inverseColumns.map(d=>d.referencedColumn)):t.isManyToOne||t.isOneToOneOwner?(l=t.joinColumns.map(d=>d.referencedColumn),u=t.entityMetadata.primaryColumns):(t.isOneToMany||t.isOneToOneNotOwner)&&(l=t.inverseRelation.entityMetadata.primaryColumns,u=t.inverseRelation.joinColumns.map(d=>d.referencedColumn)),i.map(d=>{const f={entity:d,related:a?[]:void 0},h=s.filter(g=>u.every(m=>m.compareEntityValue(d,g[m.entityMetadata.name+"_"+m.propertyAliasName])));return h.length&&c.forEach(g=>{h.forEach(m=>{l.every(v=>v.compareEntityValue(g,m[ge.buildAlias(this.connection.driver,void 0,v.entityMetadata.name+"_"+t.propertyPath.replace(".","_")+"_"+v.propertyPath.replace(".","_"))]))&&(a?f.related.push(g):f.related=g)})}),f})}loadForManyToMany(t,n,r){const o=t.junctionEntityMetadata,a=o.name,i=t.isOwning?o.ownerColumns:o.inverseColumns,s=t.isOwning?o.inverseColumns:o.ownerColumns,c=this.connection.createQueryBuilder(this.queryRunner);i.forEach(f=>{const h=ge.buildAlias(this.connection.driver,void 0,f.referencedColumn.entityMetadata.name+"_"+f.referencedColumn.propertyPath.replace(".","_"));c.addSelect(a+"."+f.propertyPath,h)}),s.forEach(f=>{const h=ge.buildAlias(this.connection.driver,void 0,f.referencedColumn.entityMetadata.name+"_"+t.propertyPath.replace(".","_")+"_"+f.referencedColumn.propertyPath.replace(".","_"));c.addSelect(a+"."+f.propertyPath,h)});let l="";if(i.length===1){const f=n.map(h=>i[0].referencedColumn.getEntityValue(h));f.every(h=>typeof h=="number")?l=`${a}.${i[0].propertyPath} IN (${f.join(", ")})`:(c.setParameter("values1",f),l=a+"."+i[0].propertyPath+" IN (:...values1)")}else l="("+n.map((f,h)=>i.map(g=>{const m="entity1_"+h+"_"+g.propertyName;return c.setParameter(m,g.referencedColumn.getEntityValue(f)),a+"."+g.propertyPath+" = :"+m}).join(" AND ")).map(f=>"("+f+")").join(" OR ")+")";let u="";if(r)if(s.length===1){const f=r.map(h=>s[0].referencedColumn.getEntityValue(h));f.every(h=>typeof h=="number")?u=`${a}.${s[0].propertyPath} IN (${f.join(", ")})`:(c.setParameter("values2",f),u=a+"."+s[0].propertyPath+" IN (:...values2)")}else u="("+r.map((f,h)=>s.map(g=>{const m="entity2_"+h+"_"+g.propertyName;return c.setParameter(m,g.referencedColumn.getEntityValue(f)),a+"."+g.propertyPath+" = :"+m}).join(" AND ")).map(f=>"("+f+")").join(" OR ")+")";const d=[l,u].filter(f=>f.length>0).join(" AND ");return c.from(o.target,a).where(d).getRawMany()}loadForManyToOneAndOneToOneOwner(t,n,r){const o=t.entityMetadata.targetName,a=t.joinColumns.every(c=>!!t.entityMetadata.nonVirtualColumns.find(l=>l===c));if(r&&a){let c=[];if(n.forEach(l=>{let u={};t.entityMetadata.primaryColumns.forEach(d=>{const f=d.entityMetadata.name+"_"+d.propertyPath.replace(".","_");u[f]=d.getEntityValue(l)}),r.forEach(d=>{t.joinColumns.forEach(f=>{const h=f.getEntityValue(l),g=f.referencedColumn.getEntityValue(d);if(!(h===void 0||g===void 0)&&h===g){const m=f.referencedColumn.entityMetadata.name+"_"+t.propertyPath.replace(".","_")+"_"+f.referencedColumn.propertyPath.replace(".","_");u[m]=g}})}),Object.keys(u).length===t.entityMetadata.primaryColumns.length+t.joinColumns.length&&c.push(u)}),c.length===n.length)return Promise.resolve(c)}const i=this.connection.createQueryBuilder(this.queryRunner);t.entityMetadata.primaryColumns.forEach(c=>{const l=ge.buildAlias(this.connection.driver,void 0,c.entityMetadata.name+"_"+c.propertyPath.replace(".","_"));i.addSelect(o+"."+c.propertyPath,l)}),t.joinColumns.forEach(c=>{const l=ge.buildAlias(this.connection.driver,void 0,c.referencedColumn.entityMetadata.name+"_"+t.propertyPath.replace(".","_")+"_"+c.referencedColumn.propertyPath.replace(".","_"));i.addSelect(o+"."+c.propertyPath,l)});let s="";if(t.entityMetadata.primaryColumns.length===1){const c=n.map(l=>t.entityMetadata.primaryColumns[0].getEntityValue(l));c.every(l=>typeof l=="number")?s=`${o}.${t.entityMetadata.primaryColumns[0].propertyPath} IN (${c.join(", ")})`:(i.setParameter("values",c),s=o+"."+t.entityMetadata.primaryColumns[0].propertyPath+" IN (:...values)")}else s=n.map((c,l)=>t.entityMetadata.primaryColumns.map((u,d)=>{const f="entity"+l+"_"+d;return i.setParameter(f,u.getEntityValue(c)),o+"."+u.propertyPath+" = :"+f}).join(" AND ")).map(c=>"("+c+")").join(" OR ");return i.from(t.entityMetadata.target,o).where(s).getRawMany()}loadForOneToManyAndOneToOneNotOwner(t,n,r){if(t=t.inverseRelation,t.entityMetadata.primaryColumns.length===t.joinColumns.length&&t.entityMetadata.primaryColumns.every(s=>t.joinColumns.indexOf(s)!==-1))return Promise.resolve(n.map(s=>{const c={};return t.joinColumns.forEach(function(l){const u=l.referencedColumn.getEntityValue(s),d=l.referencedColumn.entityMetadata.name+"_"+l.referencedColumn.propertyPath.replace(".","_"),f=l.entityMetadata.name+"_"+t.inverseRelation.propertyPath.replace(".","_")+"_"+l.propertyPath.replace(".","_");c[d]=u,c[f]=u}),c}));const o=t.entityMetadata.targetName,a=this.connection.createQueryBuilder(this.queryRunner);t.entityMetadata.primaryColumns.forEach(s=>{const c=ge.buildAlias(this.connection.driver,void 0,s.entityMetadata.name+"_"+t.inverseRelation.propertyPath.replace(".","_")+"_"+s.propertyPath.replace(".","_"));a.addSelect(o+"."+s.propertyPath,c)}),t.joinColumns.forEach(s=>{const c=ge.buildAlias(this.connection.driver,void 0,s.referencedColumn.entityMetadata.name+"_"+s.referencedColumn.propertyPath.replace(".","_"));a.addSelect(o+"."+s.propertyPath,c)});let i="";if(t.joinColumns.length===1){const s=n.map(c=>t.joinColumns[0].referencedColumn.getEntityValue(c));s.every(c=>typeof c=="number")?i=`${o}.${t.joinColumns[0].propertyPath} IN (${s.join(", ")})`:(a.setParameter("values",s),i=o+"."+t.joinColumns[0].propertyPath+" IN (:...values)")}else i=n.map((s,c)=>t.joinColumns.map((l,u)=>{const d="entity"+c+"_"+u;return a.setParameter(d,l.referencedColumn.getEntityValue(s)),o+"."+l.propertyPath+" = :"+d}).join(" AND ")).map(s=>"("+s+")").join(" OR ");return a.from(t.entityMetadata.target,o).where(i).getRawMany()}}class Wre{constructor(t){this.expressionMap=t}transform(){this.expressionMap.mainAlias&&this.expressionMap.mainAlias.metadata.relationIds.forEach(t=>{const n=this.metadataToAttribute(this.expressionMap.mainAlias.name,t);this.expressionMap.relationIdAttributes.push(n)}),this.expressionMap.joinAttributes.forEach(t=>{!t.metadata||t.metadata.isJunction||t.metadata.relationIds.forEach(n=>{const r=this.metadataToAttribute(t.alias.name,n);this.expressionMap.relationIdAttributes.push(r)})})}metadataToAttribute(t,n){return new Dx(this.expressionMap,{relationName:t+"."+n.relation.propertyName,mapToProperty:t+"."+n.propertyName,alias:n.alias,queryBuilderFactory:n.queryBuilderFactory})}}class qre{constructor(t,n,r){this.connection=t,this.queryRunner=n,this.relationCountAttributes=r}async load(t){const n=(o,a,i)=>i.indexOf(o)===a,r=this.relationCountAttributes.map(async o=>{if(o.relation.isOneToMany){const a=o.relation,i=a.inverseRelation,s=i.joinColumns[0].referencedColumn.propertyName,c=a.inverseEntityMetadata.target,l=a.inverseEntityMetadata.tableName,u=o.alias||l,d=i.propertyName;let f=t.map(g=>g[o.parentAlias+"_"+s]).filter(g=>!!g);if(f=f.filter(n),f.length===0)return{relationCountAttribute:o,results:[]};const h=this.connection.createQueryBuilder(this.queryRunner);return h.select(u+"."+d,"parentId").addSelect("COUNT(*)","cnt").from(c,u).where(u+"."+d+" IN (:...ids)").addGroupBy(u+"."+d).setParameter("ids",f),o.queryBuilderFactory&&o.queryBuilderFactory(h),{relationCountAttribute:o,results:await h.getRawMany()}}else{let a,i,s,c;o.relation.isOwning?(a=o.relation.joinColumns[0].referencedColumn.databaseName,i=o.relation.inverseJoinColumns[0].referencedColumn.databaseName,s=o.relation.junctionEntityMetadata.columns[0],c=o.relation.junctionEntityMetadata.columns[1]):(a=o.relation.inverseRelation.inverseJoinColumns[0].referencedColumn.databaseName,i=o.relation.inverseRelation.joinColumns[0].referencedColumn.databaseName,s=o.relation.junctionEntityMetadata.columns[1],c=o.relation.junctionEntityMetadata.columns[0]);let l=t.map(v=>v[o.parentAlias+"_"+a]).filter(v=>!!v);if(l=l.filter(n),l.length===0)return{relationCountAttribute:o,results:[]};const u=o.junctionAlias,d=o.joinInverseSideMetadata.tableName,f=o.alias||d,h=o.relation.junctionEntityMetadata.tableName,g=u+"."+s.propertyName+" IN ("+l.map(v=>isNaN(v)?"'"+v+"'":v)+") AND "+u+"."+c.propertyName+" = "+f+"."+i,m=this.connection.createQueryBuilder(this.queryRunner);return m.select(u+"."+s.propertyName,"parentId").addSelect("COUNT("+m.escape(f)+"."+m.escape(i)+")","cnt").from(d,f).innerJoin(h,u,g).addGroupBy(u+"."+s.propertyName),o.queryBuilderFactory&&o.queryBuilderFactory(m),{relationCountAttribute:o,results:await m.getRawMany()}}});return Promise.all(r)}}class Yre{constructor(t){this.expressionMap=t}transform(){this.expressionMap.mainAlias&&this.expressionMap.mainAlias.metadata.relationCounts.forEach(t=>{const n=this.metadataToAttribute(this.expressionMap.mainAlias.name,t);this.expressionMap.relationCountAttributes.push(n)}),this.expressionMap.joinAttributes.forEach(t=>{!t.metadata||t.metadata.isJunction||t.metadata.relationCounts.forEach(n=>{const r=this.metadataToAttribute(t.alias.name,n);this.expressionMap.relationCountAttributes.push(r)})})}metadataToAttribute(t,n){return new Lx(this.expressionMap,{relationName:t+"."+n.relation.propertyName,mapToProperty:t+"."+n.propertyName,alias:n.alias,queryBuilderFactory:n.queryBuilderFactory})}}class zx{static isFindOneOptions(t){const n=t;return n&&(Array.isArray(n.select)||Array.isArray(n.relations)||typeof n.select=="object"||typeof n.relations=="object"||typeof n.where=="object"||typeof n.join=="object"||typeof n.order=="object"||typeof n.cache=="object"||typeof n.cache=="boolean"||typeof n.cache=="number"||typeof n.comment=="string"||typeof n.lock=="object"||typeof n.loadRelationIds=="object"||typeof n.loadRelationIds=="boolean"||typeof n.loadEagerRelations=="boolean"||typeof n.withDeleted=="boolean"||typeof n.relationLoadStrategy=="string"||typeof n.transaction=="boolean")}static isFindManyOptions(t){const n=t;return n&&(this.isFindOneOptions(n)||typeof n.skip=="number"||typeof n.take=="number"||typeof n.skip=="string"||typeof n.take=="string")}static extractFindManyOptionsAlias(t){if(this.isFindManyOptions(t)&&t.join)return t.join.alias}static applyOptionsToTreeQueryBuilder(t,n){if(n!=null&&n.relations){const r=[...n.relations];if(zx.applyRelationsRecursively(t,r,t.expressionMap.mainAlias.name,t.expressionMap.mainAlias.metadata,""),r.length>0)throw new gre(r)}return t}static applyRelationsRecursively(t,n,r,o,a){let i=[];if(a){const s=new RegExp("^"+a.replace(".","\\.")+"\\.");i=n.filter(c=>c.match(s)).map(c=>o.findRelationWithPropertyPath(c.replace(s,""))).filter(c=>c)}else i=n.map(s=>o.findRelationWithPropertyPath(s)).filter(s=>s);i.forEach(s=>{let c=ge.buildAlias(t.connection.driver,{joiner:"__"},r,s.propertyPath);const l=r+"."+s.propertyPath;t.expressionMap.relationLoadStrategy==="query"?t.concatRelationMetadata(s):t.leftJoinAndSelect(l,c),n.splice(n.indexOf(a?a+"."+s.propertyPath:s.propertyPath),1);let u,d;if(t.expressionMap.relationLoadStrategy==="query")u=s.inverseEntityMetadata,d=c;else{const f=t.expressionMap.joinAttributes.find(h=>h.entityOrProperty===l);u=f.metadata,d=f.alias.name}if(!d||!u)throw new zr(s.propertyPath,o);if(this.applyRelationsRecursively(t,n,d,u,a?a+"."+s.propertyPath:s.propertyPath),t.expressionMap.relationLoadStrategy==="join"){const f=o.relations.find(h=>h.propertyName===s.propertyPath);f&&this.joinEagerRelations(t,c,f.inverseEntityMetadata)}})}static joinEagerRelations(t,n,r){r.eagerRelations.forEach(o=>{let a=ge.buildAlias(t.connection.driver,{joiner:"__"},n,o.propertyName),i=!0;for(const l of t.expressionMap.joinAttributes)if(!(l.condition!==void 0||l.mapToProperty!==void 0||l.isMappingMany!==void 0||l.direction!=="LEFT"||l.entityOrProperty!==`${n}.${o.propertyPath}`)){i=!1,a=l.alias.name;break}const s=!!t.expressionMap.joinAttributes.find(l=>l.alias.name===a);i&&!s&&t.leftJoin(n+"."+o.propertyPath,a);let c=!0;for(const l of t.expressionMap.selects)if(!(l.aliasName!==void 0||l.virtual!==void 0||l.selection!==a)){c=!1;break}c&&t.addSelect(a),this.joinEagerRelations(t,a,o.inverseEntityMetadata)})}}class Vx extends kt{constructor(){super(...arguments),this["@instanceof"]=Symbol.for("SelectQueryBuilder"),this.findOptions={},this.selects=[],this.joins=[],this.conditions="",this.orderBys=[],this.relationMetadatas=[]}getQuery(){let t=this.createComment();return t+=this.createCteExpression(),t+=this.createSelectExpression(),t+=this.createJoinExpression(),t+=this.createWhereExpression(),t+=this.createGroupByExpression(),t+=this.createHavingExpression(),t+=this.createOrderByExpression(),t+=this.createLimitOffsetExpression(),t+=this.createLockExpression(),t=t.trim(),this.expressionMap.subQuery&&(t="("+t+")"),this.replacePropertyNamesForTheWholeQuery(t)}setFindOptions(t){return this.findOptions=t,this.applyFindOptions(),this}subQuery(){const t=this.createQueryBuilder();return t.expressionMap.subQuery=!0,t.parentQueryBuilder=this,t}select(t,n){if(this.expressionMap.queryType="select",Array.isArray(t))this.expressionMap.selects=t.map(r=>({selection:r}));else if(typeof t=="function"){const r=t(this.subQuery());this.setParameters(r.getParameters()),this.expressionMap.selects.push({selection:r.getQuery(),aliasName:n})}else t&&(this.expressionMap.selects=[{selection:t,aliasName:n}]);return this}addSelect(t,n){if(!t)return this;if(Array.isArray(t))this.expressionMap.selects=this.expressionMap.selects.concat(t.map(r=>({selection:r})));else if(typeof t=="function"){const r=t(this.subQuery());this.setParameters(r.getParameters()),this.expressionMap.selects.push({selection:r.getQuery(),aliasName:n})}else t&&this.expressionMap.selects.push({selection:t,aliasName:n});return this}maxExecutionTime(t){return this.expressionMap.maxExecutionTime=t,this}distinct(t=!0){return this.expressionMap.selectDistinct=t,this}distinctOn(t){return this.expressionMap.selectDistinctOn=t,this}fromDummy(){return this.from(this.connection.driver.dummyTableName??"(SELECT 1 AS dummy_column)","dummy_table")}from(t,n){const r=this.createFromAlias(t,n);return this.expressionMap.setMainAlias(r),this}addFrom(t,n){const r=this.createFromAlias(t,n);return this.expressionMap.mainAlias||this.expressionMap.setMainAlias(r),this}innerJoin(t,n,r,o){return this.join("INNER",t,n,r,o),this}leftJoin(t,n,r,o){return this.join("LEFT",t,n,r,o),this}innerJoinAndSelect(t,n,r,o){return this.addSelect(n),this.innerJoin(t,n,r,o),this}leftJoinAndSelect(t,n,r,o){return this.addSelect(n),this.leftJoin(t,n,r,o),this}innerJoinAndMapMany(t,n,r,o,a){return this.addSelect(r),this.join("INNER",n,r,o,a,t,!0),this}innerJoinAndMapOne(t,n,r,o,a,i){return this.addSelect(r),this.join("INNER",n,r,o,a,t,!1,i),this}leftJoinAndMapMany(t,n,r,o,a){return this.addSelect(r),this.join("LEFT",n,r,o,a,t,!0),this}leftJoinAndMapOne(t,n,r,o,a,i){return this.addSelect(r),this.join("LEFT",n,r,o,a,t,!1,i),this}loadRelationIdAndMap(t,n,r,o){const a=new Dx(this.expressionMap);return a.mapToProperty=t,a.relationName=n,typeof r=="string"&&(a.alias=r),typeof r=="object"&&r.disableMixedMap&&(a.disableMixedMap=!0),a.queryBuilderFactory=o,this.expressionMap.relationIdAttributes.push(a),a.relation.junctionEntityMetadata&&this.expressionMap.createAlias({type:"other",name:a.junctionAlias,metadata:a.relation.junctionEntityMetadata}),this}loadRelationCountAndMap(t,n,r,o){const a=new Lx(this.expressionMap);return a.mapToProperty=t,a.relationName=n,a.alias=r,a.queryBuilderFactory=o,this.expressionMap.relationCountAttributes.push(a),this.expressionMap.createAlias({type:"other",name:a.junctionAlias}),a.relation.junctionEntityMetadata&&this.expressionMap.createAlias({type:"other",name:a.junctionAlias,metadata:a.relation.junctionEntityMetadata}),this}loadAllRelationIds(t){return this.expressionMap.mainAlias.metadata.relations.forEach(n=>{t!==void 0&&t.relations!==void 0&&t.relations.indexOf(n.propertyPath)===-1||this.loadRelationIdAndMap(this.expressionMap.mainAlias.name+"."+n.propertyPath,this.expressionMap.mainAlias.name+"."+n.propertyPath,t)}),this}where(t,n){this.expressionMap.wheres=[];const r=this.getWhereCondition(t);return r&&(this.expressionMap.wheres=[{type:"simple",condition:r}]),n&&this.setParameters(n),this}andWhere(t,n){return this.expressionMap.wheres.push({type:"and",condition:this.getWhereCondition(t)}),n&&this.setParameters(n),this}orWhere(t,n){return this.expressionMap.wheres.push({type:"or",condition:this.getWhereCondition(t)}),n&&this.setParameters(n),this}whereExists(t){return this.where(...this.getExistsCondition(t))}andWhereExists(t){return this.andWhere(...this.getExistsCondition(t))}orWhereExists(t){return this.orWhere(...this.getExistsCondition(t))}whereInIds(t){return this.where(this.getWhereInIdsCondition(t))}andWhereInIds(t){return this.andWhere(this.getWhereInIdsCondition(t))}orWhereInIds(t){return this.orWhere(this.getWhereInIdsCondition(t))}having(t,n){return this.expressionMap.havings.push({type:"simple",condition:t}),n&&this.setParameters(n),this}andHaving(t,n){return this.expressionMap.havings.push({type:"and",condition:t}),n&&this.setParameters(n),this}orHaving(t,n){return this.expressionMap.havings.push({type:"or",condition:t}),n&&this.setParameters(n),this}groupBy(t){return t?this.expressionMap.groupBys=[t]:this.expressionMap.groupBys=[],this}addGroupBy(t){return this.expressionMap.groupBys.push(t),this}timeTravelQuery(t){return this.connection.driver.options.type==="cockroachdb"&&(t===void 0?this.expressionMap.timeTravel="follower_read_timestamp()":this.expressionMap.timeTravel=t),this}orderBy(t,n="ASC",r){if(n!==void 0&&n!=="ASC"&&n!=="DESC")throw new xe('SelectQueryBuilder.addOrderBy "order" can accept only "ASC" and "DESC" values.');if(r!==void 0&&r!=="NULLS FIRST"&&r!=="NULLS LAST")throw new xe('SelectQueryBuilder.addOrderBy "nulls" can accept only "NULLS FIRST" and "NULLS LAST" values.');return t?typeof t=="object"?this.expressionMap.orderBys=t:r?this.expressionMap.orderBys={[t]:{order:n,nulls:r}}:this.expressionMap.orderBys={[t]:n}:this.expressionMap.orderBys={},this}addOrderBy(t,n="ASC",r){if(n!==void 0&&n!=="ASC"&&n!=="DESC")throw new xe('SelectQueryBuilder.addOrderBy "order" can accept only "ASC" and "DESC" values.');if(r!==void 0&&r!=="NULLS FIRST"&&r!=="NULLS LAST")throw new xe('SelectQueryBuilder.addOrderBy "nulls" can accept only "NULLS FIRST" and "NULLS LAST" values.');return r?this.expressionMap.orderBys[t]={order:n,nulls:r}:this.expressionMap.orderBys[t]=n,this}limit(t){if(this.expressionMap.limit=this.normalizeNumber(t),this.expressionMap.limit!==void 0&&isNaN(this.expressionMap.limit))throw new xe('Provided "limit" value is not a number. Please provide a numeric value.');return this}offset(t){if(this.expressionMap.offset=this.normalizeNumber(t),this.expressionMap.offset!==void 0&&isNaN(this.expressionMap.offset))throw new xe('Provided "offset" value is not a number. Please provide a numeric value.');return this}take(t){if(this.expressionMap.take=this.normalizeNumber(t),this.expressionMap.take!==void 0&&isNaN(this.expressionMap.take))throw new xe('Provided "take" value is not a number. Please provide a numeric value.');return this}skip(t){if(this.expressionMap.skip=this.normalizeNumber(t),this.expressionMap.skip!==void 0&&isNaN(this.expressionMap.skip))throw new xe('Provided "skip" value is not a number. Please provide a numeric value.');return this}useIndex(t){return this.expressionMap.useIndex=t,this}setLock(t,n,r){return this.expressionMap.lockMode=t,this.expressionMap.lockVersion=n,this.expressionMap.lockTables=r,this}setOnLocked(t){return this.expressionMap.onLocked=t,this}withDeleted(){return this.expressionMap.withDeleted=!0,this}async getRawOne(){return(await this.getRawMany())[0]}async getRawMany(){if(this.expressionMap.lockMode==="optimistic")throw new Pl;this.expressionMap.queryEntity=!1;const t=this.obtainQueryRunner();let n=!1;try{this.expressionMap.useTransaction===!0&&t.isTransactionActive===!1&&(await t.startTransaction(),n=!0);const r=await this.loadRawResults(t);return n&&await t.commitTransaction(),r}catch(r){if(n)try{await t.rollbackTransaction()}catch{}throw r}finally{t!==this.queryRunner&&await t.release()}}async getRawAndEntities(){const t=this.obtainQueryRunner();let n=!1;try{this.expressionMap.useTransaction===!0&&t.isTransactionActive===!1&&(await t.startTransaction(),n=!0),this.expressionMap.queryEntity=!0;const r=await this.executeEntitiesAndRawResults(t);return n&&await t.commitTransaction(),r}catch(r){if(n)try{await t.rollbackTransaction()}catch{}throw r}finally{t!==this.queryRunner&&await t.release()}}async getOne(){const t=(await this.getRawAndEntities()).entities[0];if(t&&this.expressionMap.lockMode==="optimistic"&&this.expressionMap.lockVersion){const n=this.expressionMap.mainAlias.metadata;if(this.expressionMap.lockVersion instanceof Date){const r=n.updateDateColumn.getEntityValue(t);if(r.getTime()!==this.expressionMap.lockVersion.getTime())throw new qI(n.name,this.expressionMap.lockVersion,r)}else{const r=n.versionColumn.getEntityValue(t);if(r!==this.expressionMap.lockVersion)throw new qI(n.name,this.expressionMap.lockVersion,r)}}return t===void 0?null:t}async getOneOrFail(){const t=await this.getOne();if(!t)throw new pre(this.expressionMap.mainAlias.target,this.expressionMap.parameters);return t}async getMany(){if(this.expressionMap.lockMode==="optimistic")throw new Pl;return(await this.getRawAndEntities()).entities}async getCount(){if(this.expressionMap.lockMode==="optimistic")throw new Pl;const t=this.obtainQueryRunner();let n=!1;try{this.expressionMap.useTransaction===!0&&t.isTransactionActive===!1&&(await t.startTransaction(),n=!0),this.expressionMap.queryEntity=!1;const r=await this.executeCountQuery(t);return n&&await t.commitTransaction(),r}catch(r){if(n)try{await t.rollbackTransaction()}catch{}throw r}finally{t!==this.queryRunner&&await t.release()}}async getExists(){if(this.expressionMap.lockMode==="optimistic")throw new Pl;const t=this.obtainQueryRunner();let n=!1;try{this.expressionMap.useTransaction===!0&&t.isTransactionActive===!1&&(await t.startTransaction(),n=!0),this.expressionMap.queryEntity=!1;const r=await this.executeExistsQuery(t);return n&&await t.commitTransaction(),r}catch(r){if(n)try{await t.rollbackTransaction()}catch{}throw r}finally{t!==this.queryRunner&&await t.release()}}async getManyAndCount(){if(this.expressionMap.lockMode==="optimistic")throw new Pl;const t=this.obtainQueryRunner();let n=!1;try{this.expressionMap.useTransaction===!0&&t.isTransactionActive===!1&&(await t.startTransaction(),n=!0),this.expressionMap.queryEntity=!0;const r=await this.executeEntitiesAndRawResults(t);this.expressionMap.queryEntity=!1;const o=this.expressionMap.cacheId;this.expressionMap.cacheId=o&&`${o}-count`;const a=await this.executeCountQuery(t),i=[r.entities,a];return n&&await t.commitTransaction(),i}catch(r){if(n)try{await t.rollbackTransaction()}catch{}throw r}finally{t!==this.queryRunner&&await t.release()}}async stream(){this.expressionMap.queryEntity=!1;const[t,n]=this.getQueryAndParameters(),r=this.obtainQueryRunner();let o=!1;try{this.expressionMap.useTransaction===!0&&r.isTransactionActive===!1&&(await r.startTransaction(),o=!0);const a=()=>{if(r!==this.queryRunner)return r.release()},i=r.stream(t,n,a,a);return o&&await r.commitTransaction(),i}catch(a){if(o)try{await r.rollbackTransaction()}catch{}throw a}}cache(t,n){return typeof t=="boolean"?this.expressionMap.cache=t:typeof t=="number"?(this.expressionMap.cache=!0,this.expressionMap.cacheDuration=t):(typeof t=="string"||typeof t=="number")&&(this.expressionMap.cache=!0,this.expressionMap.cacheId=t),n&&(this.expressionMap.cacheDuration=n),this}setOption(t){return this.expressionMap.options.push(t),this}join(t,n,r,o,a,i,s,c){a&&this.setParameters(a);const l=new cD(this.connection,this.expressionMap);l.direction=t,l.mapAsEntity=c,l.mapToProperty=i,l.isMappingMany=s,l.entityOrProperty=n,l.condition=o,this.expressionMap.joinAttributes.push(l);const u=l.metadata;if(u){if(u.deleteDateColumn&&!this.expressionMap.withDeleted){const d=`${r}.${u.deleteDateColumn.propertyName} IS NULL`;l.condition=l.condition?` ${l.condition} AND ${d}`:`${d}`}l.alias=this.expressionMap.createAlias({type:"join",name:r,metadata:u}),l.relation&&l.relation.junctionEntityMetadata&&this.expressionMap.createAlias({type:"join",name:l.junctionAlias,metadata:l.relation.junctionEntityMetadata})}else{let d="";if(typeof n=="function"){const h=n(this.subQuery());this.setParameters(h.getParameters()),d=h.getQuery()}else d=n;const f=typeof n=="function"||n.substr(0,1)==="("&&n.substr(-1)===")";l.alias=this.expressionMap.createAlias({type:"join",name:r,tablePath:f===!1?n:void 0,subQuery:f===!0?d:void 0})}}createSelectExpression(){if(!this.expressionMap.mainAlias)throw new xe("Cannot build query because main alias is not set (call qb#from method)");const t=[],n=[];if(this.expressionMap.mainAlias.hasMetadata){const s=this.expressionMap.mainAlias.metadata;t.push(...this.buildEscapedEntityColumnSelects(this.expressionMap.mainAlias.name,s)),n.push(...this.findEntityColumnSelects(this.expressionMap.mainAlias.name,s))}this.expressionMap.joinAttributes.forEach(s=>{if(s.metadata)t.push(...this.buildEscapedEntityColumnSelects(s.alias.name,s.metadata)),n.push(...this.findEntityColumnSelects(s.alias.name,s.metadata));else if(this.expressionMap.selects.some(c=>c.selection===s.alias.name)){t.push({selection:this.escape(s.alias.name)+".*"});const c=this.expressionMap.selects.find(l=>l.selection===s.alias.name);n.push(c)}}),this.expressionMap.selects.filter(s=>n.indexOf(s)===-1).forEach(s=>t.push({selection:this.replacePropertyNames(s.selection),aliasName:s.aliasName})),t.length===0&&t.push({selection:"*"});let r="";this.expressionMap.useIndex&&ge.isMySQLFamily(this.connection.driver)&&(r=` USE INDEX (${this.expressionMap.useIndex})`);const o=this.expressionMap.aliases.filter(s=>s.type==="from"&&(s.tablePath||s.subQuery)).map(s=>s.subQuery?s.subQuery+" "+this.escape(s.name):this.getTableName(s.tablePath)+" "+this.escape(s.name)),a=this.createSelectDistinctExpression(),i=t.map(s=>s.selection+(s.aliasName?" AS "+this.escape(s.aliasName):"")).join(", ");return a+i+" FROM "+o.join(", ")+this.createTableLockExpression()+r}createSelectDistinctExpression(){const{selectDistinct:t,selectDistinctOn:n,maxExecutionTime:r}=this.expressionMap,{driver:o}=this.connection;let a="SELECT ";return r>0&&ge.isMySQLFamily(o)&&(a+=`/*+ MAX_EXECUTION_TIME(${this.expressionMap.maxExecutionTime}) */ `),ge.isPostgresFamily(o)&&n.length>0?a=`SELECT DISTINCT ON (${n.map(i=>this.replacePropertyNames(i)).join(", ")}) `:t&&(a="SELECT DISTINCT "),a}createJoinExpression(){return this.expressionMap.joinAttributes.map(t=>{const n=t.relation,r=t.tablePath,o=t.alias.name;let a=t.condition?" AND ("+t.condition+")":"";const i=t.parentAlias;if(!i||!n){const s=t.alias.subQuery?t.alias.subQuery:this.getTableName(r);return" "+t.direction+" JOIN "+s+" "+this.escape(o)+this.createTableLockExpression()+(t.condition?" ON "+this.replacePropertyNames(t.condition):"")}if(n.isManyToOne||n.isOneToOneOwner){const s=n.joinColumns.map(c=>o+"."+c.referencedColumn.propertyPath+"="+i+"."+n.propertyPath+"."+c.referencedColumn.propertyPath).join(" AND ");return" "+t.direction+" JOIN "+this.getTableName(r)+" "+this.escape(o)+this.createTableLockExpression()+" ON "+this.replacePropertyNames(s+a)}else if(n.isOneToMany||n.isOneToOneNotOwner){const s=n.inverseRelation.joinColumns.map(c=>(n.inverseEntityMetadata.tableType==="entity-child"&&n.inverseEntityMetadata.discriminatorColumn&&(a+=" AND "+o+"."+n.inverseEntityMetadata.discriminatorColumn.databaseName+"='"+n.inverseEntityMetadata.discriminatorValue+"'"),o+"."+n.inverseRelation.propertyPath+"."+c.referencedColumn.propertyPath+"="+i+"."+c.referencedColumn.propertyPath)).join(" AND ");if(!s)throw new xe(`Relation ${n.entityMetadata.name}.${n.propertyName} does not have join columns.`);return" "+t.direction+" JOIN "+this.getTableName(r)+" "+this.escape(o)+this.createTableLockExpression()+" ON "+this.replacePropertyNames(s+a)}else{const s=n.junctionEntityMetadata.tablePath,c=t.junctionAlias;let l="",u="";return n.isOwning?(l=n.joinColumns.map(d=>c+"."+d.propertyPath+"="+i+"."+d.referencedColumn.propertyPath).join(" AND "),u=n.inverseJoinColumns.map(d=>o+"."+d.referencedColumn.propertyPath+"="+c+"."+d.propertyPath).join(" AND ")):(l=n.inverseRelation.inverseJoinColumns.map(d=>c+"."+d.propertyPath+"="+i+"."+d.referencedColumn.propertyPath).join(" AND "),u=n.inverseRelation.joinColumns.map(d=>o+"."+d.referencedColumn.propertyPath+"="+c+"."+d.propertyPath).join(" AND "))," "+t.direction+" JOIN "+this.getTableName(s)+" "+this.escape(c)+this.createTableLockExpression()+" ON "+this.replacePropertyNames(l)+" "+t.direction+" JOIN "+this.getTableName(r)+" "+this.escape(o)+this.createTableLockExpression()+" ON "+this.replacePropertyNames(u+a)}}).join(" ")}createGroupByExpression(){return!this.expressionMap.groupBys||!this.expressionMap.groupBys.length?"":" GROUP BY "+this.replacePropertyNames(this.expressionMap.groupBys.join(", "))}createOrderByExpression(){const t=this.expressionMap.allOrderBys;return Object.keys(t).length===0?"":" ORDER BY "+Object.keys(t).map(n=>{const r=typeof t[n]=="string"?t[n]:t[n].order+" "+t[n].nulls,o=this.expressionMap.selects.find(a=>a.selection===n);if(o&&!o.aliasName&&n.indexOf(".")!==-1){const a=n.split("."),i=a[0],s=a.slice(1).join("."),c=this.expressionMap.aliases.find(l=>l.name===i);if(c){const l=c.metadata.findColumnWithPropertyPath(s);if(l){const u=ge.buildAlias(this.connection.driver,void 0,i,l.databaseName);return this.escape(u)+" "+r}}}return this.replacePropertyNames(n)+" "+r}).join(", ")}createLimitOffsetExpression(){let t=this.expressionMap.offset,n=this.expressionMap.limit;if(!t&&!n&&this.expressionMap.joinAttributes.length===0&&(t=this.expressionMap.skip,n=this.expressionMap.take),this.connection.driver.options.type==="mssql"){let r="";if((n||t)&&Object.keys(this.expressionMap.allOrderBys).length<=0&&(r=" ORDER BY (SELECT NULL)"),n&&t)return r+" OFFSET "+t+" ROWS FETCH NEXT "+n+" ROWS ONLY";if(n)return r+" OFFSET 0 ROWS FETCH NEXT "+n+" ROWS ONLY";if(t)return r+" OFFSET "+t+" ROWS"}else if(ge.isMySQLFamily(this.connection.driver)||this.connection.driver.options.type==="aurora-mysql"||this.connection.driver.options.type==="sap"||this.connection.driver.options.type==="spanner"){if(n&&t)return" LIMIT "+n+" OFFSET "+t;if(n)return" LIMIT "+n;if(t)throw new bre}else if(ge.isSQLiteFamily(this.connection.driver)){if(n&&t)return" LIMIT "+n+" OFFSET "+t;if(n)return" LIMIT "+n;if(t)return" LIMIT -1 OFFSET "+t}else if(this.connection.driver.options.type==="oracle"){if(n&&t)return" OFFSET "+t+" ROWS FETCH NEXT "+n+" ROWS ONLY";if(n)return" FETCH NEXT "+n+" ROWS ONLY";if(t)return" OFFSET "+t+" ROWS"}else{if(n&&t)return" LIMIT "+n+" OFFSET "+t;if(n)return" LIMIT "+n;if(t)return" OFFSET "+t}return""}createTableLockExpression(){if(this.connection.driver.options.type==="mssql")switch(this.expressionMap.lockMode){case"pessimistic_read":return" WITH (HOLDLOCK, ROWLOCK)";case"pessimistic_write":return" WITH (UPDLOCK, ROWLOCK)";case"dirty_read":return" WITH (NOLOCK)"}return""}createLockExpression(){const t=this.connection.driver;let n="";if(this.expressionMap.lockTables){if(!(ge.isPostgresFamily(t)||t.options.type==="cockroachdb"))throw new xe("Lock tables not supported in selected driver");if(this.expressionMap.lockTables.length<1)throw new xe("lockTables cannot be an empty array");n=" OF "+this.expressionMap.lockTables.join(", ")}let r="";switch(this.expressionMap.onLocked==="nowait"?r=" NOWAIT":this.expressionMap.onLocked==="skip_locked"&&(r=" SKIP LOCKED"),this.expressionMap.lockMode){case"pessimistic_read":if(t.options.type==="mysql"||t.options.type==="aurora-mysql")return ge.isReleaseVersionOrGreater(t,"8.0.0")?" FOR SHARE"+n+r:" LOCK IN SHARE MODE";if(t.options.type==="mariadb")return" LOCK IN SHARE MODE";if(ge.isPostgresFamily(t))return" FOR SHARE"+n+r;if(t.options.type==="oracle")return" FOR UPDATE";if(t.options.type==="mssql")return"";throw new cs;case"pessimistic_write":if(ge.isMySQLFamily(t)||t.options.type==="aurora-mysql"||t.options.type==="oracle")return" FOR UPDATE"+r;if(ge.isPostgresFamily(t)||t.options.type==="cockroachdb")return" FOR UPDATE"+n+r;if(t.options.type==="mssql")return"";throw new cs;case"pessimistic_partial_write":if(ge.isPostgresFamily(t))return" FOR UPDATE"+n+" SKIP LOCKED";if(ge.isMySQLFamily(t))return" FOR UPDATE SKIP LOCKED";throw new cs;case"pessimistic_write_or_fail":if(ge.isPostgresFamily(t)||t.options.type==="cockroachdb")return" FOR UPDATE"+n+" NOWAIT";if(ge.isMySQLFamily(t))return" FOR UPDATE NOWAIT";throw new cs;case"for_no_key_update":if(ge.isPostgresFamily(t)||t.options.type==="cockroachdb")return" FOR NO KEY UPDATE"+n+r;throw new cs;case"for_key_share":if(ge.isPostgresFamily(t))return" FOR KEY SHARE"+n+r;throw new cs;default:return""}}createHavingExpression(){if(!this.expressionMap.havings||!this.expressionMap.havings.length)return"";const t=this.expressionMap.havings.map((n,r)=>{switch(n.type){case"and":return(r>0?"AND ":"")+this.replacePropertyNames(n.condition);case"or":return(r>0?"OR ":"")+this.replacePropertyNames(n.condition);default:return this.replacePropertyNames(n.condition)}}).join(" ");return t.length?" HAVING "+t:""}buildEscapedEntityColumnSelects(t,n){const r=this.expressionMap.selects.some(l=>l.selection===t),o=[];if(r&&o.push(...n.columns.filter(l=>l.isSelect===!0)),o.push(...n.columns.filter(l=>this.expressionMap.selects.some(u=>u.selection===t+"."+l.propertyPath))),o.length===0)return[];const a=this.expressionMap.queryEntity?n.primaryColumns.filter(l=>o.indexOf(l)===-1):[],i=[...o,...a],s=[],c=this.escape(t);return i.forEach(l=>{let u=c+"."+this.escape(l.databaseName);l.isVirtualProperty&&l.query&&(u=`(${l.query(c)})`),this.connection.driver.spatialTypes.indexOf(l.type)!==-1&&((ge.isMySQLFamily(this.connection.driver)||this.connection.driver.options.type==="aurora-mysql")&&(u=`${this.connection.driver.options.legacySpatialSupport?"AsText":"ST_AsText"}(${u})`),ge.isPostgresFamily(this.connection.driver)&&(l.precision?u=`ST_AsGeoJSON(${u}, ${l.precision})::json`:u=`ST_AsGeoJSON(${u})::json`),this.connection.driver.options.type==="mssql"&&(u=`${u}.ToString()`));const d=this.expressionMap.selects.filter(f=>f.selection===t+"."+l.propertyPath);if(d.length)d.forEach(f=>{s.push({selection:u,aliasName:f.aliasName?f.aliasName:ge.buildAlias(this.connection.driver,void 0,t,l.databaseName),virtual:f.virtual})});else{if(l.isVirtualProperty)return;s.push({selection:u,aliasName:ge.buildAlias(this.connection.driver,void 0,t,l.databaseName),virtual:r})}}),s}findEntityColumnSelects(t,n){const r=this.expressionMap.selects.find(o=>o.selection===t);return r?[r]:this.expressionMap.selects.filter(o=>n.columns.some(a=>o.selection===t+"."+a.propertyPath))}computeCountExpression(){const t=this.expressionMap.mainAlias.name,n=this.expressionMap.mainAlias.metadata.primaryColumns,r=this.escape(t);if(this.expressionMap.joinAttributes.length===0&&this.expressionMap.relationIdAttributes.length===0&&this.expressionMap.relationCountAttributes.length===0)return"COUNT(1)";if(this.connection.driver.options.type==="cockroachdb"||ge.isPostgresFamily(this.connection.driver))return"COUNT(DISTINCT("+n.map(o=>`${r}.${this.escape(o.databaseName)}`).join(", ")+"))";if(ge.isMySQLFamily(this.connection.driver))return"COUNT(DISTINCT "+n.map(o=>`${r}.${this.escape(o.databaseName)}`).join(", ")+")";if(this.connection.driver.options.type==="mssql"){const o=n.map(a=>`${r}.${this.escape(a.databaseName)}`).join(", '|;|', ");return n.length===1?`COUNT(DISTINCT(${o}))`:`COUNT(DISTINCT(CONCAT(${o})))`}return this.connection.driver.options.type==="spanner"?n.length===1?`COUNT(DISTINCT(${r}.${this.escape(n[0].databaseName)}))`:`COUNT(DISTINCT(CONCAT(${n.map(o=>`CAST(${r}.${this.escape(o.databaseName)} AS STRING)`).join(", '|;|', ")})))`:"COUNT(DISTINCT("+n.map(o=>`${r}.${this.escape(o.databaseName)}`).join(" || '|;|' || ")+"))"}async executeCountQuery(t){const n=this.computeCountExpression(),r=await this.clone().orderBy().groupBy().offset(void 0).limit(void 0).skip(void 0).take(void 0).select(n,"cnt").setOption("disable-global-order").loadRawResults(t);return!r||!r[0]||!r[0].cnt?0:parseInt(r[0].cnt)}async executeExistsQuery(t){return(await this.connection.createQueryBuilder().fromDummy().select("1","row_exists").whereExists(this).limit(1).loadRawResults(t)).length>0}applyFindOptions(){if(this.expressionMap.mainAlias.metadata){if(this.findOptions.relationLoadStrategy&&(this.expressionMap.relationLoadStrategy=this.findOptions.relationLoadStrategy),this.findOptions.comment&&this.comment(this.findOptions.comment),this.findOptions.withDeleted&&this.withDeleted(),this.findOptions.select){const t=Array.isArray(this.findOptions.select)?Gt.propertyPathsToTruthyObject(this.findOptions.select):this.findOptions.select;this.buildSelect(t,this.expressionMap.mainAlias.metadata,this.expressionMap.mainAlias.name)}if(this.selects.length&&this.select(this.selects),this.selects=[],this.findOptions.relations){const t=Array.isArray(this.findOptions.relations)?Gt.propertyPathsToTruthyObject(this.findOptions.relations):this.findOptions.relations;this.buildRelations(t,typeof this.findOptions.select=="object"?this.findOptions.select:void 0,this.expressionMap.mainAlias.metadata,this.expressionMap.mainAlias.name),this.findOptions.loadEagerRelations!==!1&&this.expressionMap.relationLoadStrategy==="join"&&this.buildEagerRelations(t,typeof this.findOptions.select=="object"?this.findOptions.select:void 0,this.expressionMap.mainAlias.metadata,this.expressionMap.mainAlias.name)}if(this.selects.length&&this.addSelect(this.selects),this.findOptions.where&&(this.conditions=this.buildWhere(this.findOptions.where,this.expressionMap.mainAlias.metadata,this.expressionMap.mainAlias.name),this.conditions.length&&this.andWhere(this.conditions.substr(0,1)!=="("?"("+this.conditions+")":this.conditions)),this.findOptions.order&&this.buildOrder(this.findOptions.order,this.expressionMap.mainAlias.metadata,this.expressionMap.mainAlias.name),this.joins.length&&this.joins.forEach(t=>{t.select&&!t.selection?t.type==="inner"?this.innerJoinAndSelect(`${t.parentAlias}.${t.relationMetadata.propertyPath}`,t.alias):this.leftJoinAndSelect(`${t.parentAlias}.${t.relationMetadata.propertyPath}`,t.alias):t.type==="inner"?this.innerJoin(`${t.parentAlias}.${t.relationMetadata.propertyPath}`,t.alias):this.leftJoin(`${t.parentAlias}.${t.relationMetadata.propertyPath}`,t.alias)}),this.findOptions.skip!==void 0&&this.skip(this.findOptions.skip),this.findOptions.take!==void 0&&this.take(this.findOptions.take),typeof this.findOptions.cache=="number"?this.cache(this.findOptions.cache):typeof this.findOptions.cache=="boolean"?this.cache(this.findOptions.cache):typeof this.findOptions.cache=="object"&&this.cache(this.findOptions.cache.id,this.findOptions.cache.milliseconds),this.findOptions.join&&(this.findOptions.join.leftJoin&&Object.keys(this.findOptions.join.leftJoin).forEach(t=>{this.leftJoin(this.findOptions.join.leftJoin[t],t)}),this.findOptions.join.innerJoin&&Object.keys(this.findOptions.join.innerJoin).forEach(t=>{this.innerJoin(this.findOptions.join.innerJoin[t],t)}),this.findOptions.join.leftJoinAndSelect&&Object.keys(this.findOptions.join.leftJoinAndSelect).forEach(t=>{this.leftJoinAndSelect(this.findOptions.join.leftJoinAndSelect[t],t)}),this.findOptions.join.innerJoinAndSelect&&Object.keys(this.findOptions.join.innerJoinAndSelect).forEach(t=>{this.innerJoinAndSelect(this.findOptions.join.innerJoinAndSelect[t],t)})),this.findOptions.lock){if(this.findOptions.lock.mode==="optimistic")this.setLock(this.findOptions.lock.mode,this.findOptions.lock.version);else if(this.findOptions.lock.mode==="pessimistic_read"||this.findOptions.lock.mode==="pessimistic_write"||this.findOptions.lock.mode==="dirty_read"||this.findOptions.lock.mode==="pessimistic_partial_write"||this.findOptions.lock.mode==="pessimistic_write_or_fail"||this.findOptions.lock.mode==="for_no_key_update"||this.findOptions.lock.mode==="for_key_share"){const t=this.findOptions.lock.tables?this.findOptions.lock.tables.map(n=>{const r=this.expressionMap.aliases.find(o=>o.metadata.tableNameWithoutPrefix===n);if(!r)throw new xe(`"${n}" is not part of this query`);return this.escape(r.name)}):void 0;this.setLock(this.findOptions.lock.mode,void 0,t),this.findOptions.lock.onLocked&&this.setOnLocked(this.findOptions.lock.onLocked)}}this.findOptions.loadRelationIds===!0?this.loadAllRelationIds():typeof this.findOptions.loadRelationIds=="object"&&this.loadAllRelationIds(this.findOptions.loadRelationIds),this.findOptions.loadEagerRelations!==!1&&zx.joinEagerRelations(this,this.expressionMap.mainAlias.name,this.expressionMap.mainAlias.metadata),this.findOptions.transaction===!0&&(this.expressionMap.useTransaction=!0)}}concatRelationMetadata(t){this.relationMetadatas.push(t)}async executeEntitiesAndRawResults(t){if(!this.expressionMap.mainAlias)throw new xe('Alias is not set. Use "from" method to set an alias.');if((this.expressionMap.lockMode==="pessimistic_read"||this.expressionMap.lockMode==="pessimistic_write"||this.expressionMap.lockMode==="pessimistic_partial_write"||this.expressionMap.lockMode==="pessimistic_write_or_fail"||this.expressionMap.lockMode==="for_no_key_update"||this.expressionMap.lockMode==="for_key_share")&&!t.isTransactionActive)throw new vre;if(this.expressionMap.lockMode==="optimistic"){const i=this.expressionMap.mainAlias.metadata;if(!i.versionColumn&&!i.updateDateColumn)throw new mre(i.name)}const n=new Ure(this.connection,t,this.expressionMap.relationIdAttributes),r=new qre(this.connection,t,this.expressionMap.relationCountAttributes);new Wre(this.expressionMap).transform(),new Yre(this.expressionMap).transform();let o=[],a=[];if((this.expressionMap.skip||this.expressionMap.take)&&this.expressionMap.joinAttributes.length>0){const[i,s]=this.createOrderByCombinedWithSelectExpression("distinctAlias"),c=this.expressionMap.mainAlias.metadata,l=this.expressionMap.mainAlias.name,u=c.primaryColumns.map(h=>{const g=this.escape("distinctAlias"),m=this.escape(ge.buildAlias(this.connection.driver,void 0,l,h.databaseName));s[m]||(s[m]="ASC");const v=ge.buildAlias(this.connection.driver,void 0,"ids_"+l,h.databaseName);return`${g}.${m} AS ${this.escape(v)}`}),d=this.clone(),f=d.expressionMap.timeTravel;if(o=await new Vx(this.connection,t).select(`DISTINCT ${u.join(", ")}`).addSelect(i).from(`(${d.orderBy().timeTravelQuery(!1).getQuery()})`,"distinctAlias").timeTravelQuery(f).offset(this.expressionMap.skip).limit(this.expressionMap.take).orderBy(s).cache(this.expressionMap.cache&&this.expressionMap.cacheId?`${this.expressionMap.cacheId}-pagination`:this.expressionMap.cache,this.expressionMap.cacheDuration).setParameters(this.getParameters()).setNativeParameters(this.expressionMap.nativeParameters).getRawMany(),o.length>0){let h="";const g={};if(c.hasMultiplePrimaryKeys)h=o.map((m,v)=>c.primaryColumns.map(b=>{const x=`orm_distinct_ids_${v}_${b.databaseName}`,_=ge.buildAlias(this.connection.driver,void 0,"ids_"+l,b.databaseName);return g[x]=m[_],`${l}.${b.propertyPath}=:${x}`}).join(" AND ")).join(" OR ");else{const m=ge.buildAlias(this.connection.driver,void 0,"ids_"+l,c.primaryColumns[0].databaseName),v=o.map(b=>b[m]);v.every(b=>typeof b=="number")?h=`${l}.${c.primaryColumns[0].propertyPath} IN (${v.join(", ")})`:(g.orm_distinct_ids=v,h=l+"."+c.primaryColumns[0].propertyPath+" IN (:...orm_distinct_ids)")}o=await this.clone().mergeExpressionMap({extraAppendedAndWhereCondition:h}).setParameters(g).loadRawResults(t)}}else o=await this.loadRawResults(t);if(o.length>0){const i=await n.load(o),s=await r.load(o);a=new Vre(this.expressionMap,this.connection.driver,i,s,this.queryRunner).transform(o,this.expressionMap.mainAlias),this.expressionMap.callListeners===!0&&this.expressionMap.mainAlias.hasMetadata&&await t.broadcaster.broadcast("Load",this.expressionMap.mainAlias.metadata,a)}if(this.expressionMap.relationLoadStrategy==="query"){const i=new Hre(this.connection,t);await Promise.all(this.relationMetadatas.map(async s=>{const c=s.inverseEntityMetadata.target,l=s.inverseEntityMetadata.targetName,u=Array.isArray(this.findOptions.select)?Gt.propertyPathsToTruthyObject(this.findOptions.select):this.findOptions.select,d=Array.isArray(this.findOptions.relations)?Gt.propertyPathsToTruthyObject(this.findOptions.relations):this.findOptions.relations,f=this.createQueryBuilder(t).select(l).from(c,l).setFindOptions({select:u?Gt.deepValue(u,s.propertyPath):void 0,order:this.findOptions.order?Gt.deepValue(this.findOptions.order,s.propertyPath):void 0,relations:d?Gt.deepValue(d,s.propertyPath):void 0,withDeleted:this.findOptions.withDeleted,relationLoadStrategy:this.findOptions.relationLoadStrategy});if(a.length>0){const h=await i.loadManyToManyRelationIdsAndGroup(s,a,void 0,f);a.forEach(g=>{const m=h.find(v=>v.entity===g);if(m){const v=m.related===void 0?null:m.related;s.setEntityValue(g,v)}})}}))}return{raw:o,entities:a}}createOrderByCombinedWithSelectExpression(t){const n=this.expressionMap.allOrderBys,r=Object.keys(n).map(a=>{if(a.indexOf(".")!==-1){const i=a.split("."),s=i[0],c=i.slice(1).join("."),l=this.expressionMap.findAliasByName(s).metadata.findColumnWithPropertyPath(c);return this.escape(t)+"."+this.escape(ge.buildAlias(this.connection.driver,void 0,s,l.databaseName))}else return this.expressionMap.selects.find(i=>i.selection===a||i.aliasName===a)?this.escape(t)+"."+this.escape(a):""}).join(", "),o={};return Object.keys(n).forEach(a=>{if(a.indexOf(".")!==-1){const i=a.split("."),s=i[0],c=i.slice(1).join("."),l=this.expressionMap.findAliasByName(s).metadata.findColumnWithPropertyPath(c);o[this.escape(t)+"."+this.escape(ge.buildAlias(this.connection.driver,void 0,s,l.databaseName))]=n[a]}else this.expressionMap.selects.find(i=>i.selection===a||i.aliasName===a)?o[this.escape(t)+"."+this.escape(a)]=n[a]:o[a]=n[a]}),[r,o]}async loadRawResults(t){const[n,r]=this.getQueryAndParameters(),o=n+" -- PARAMETERS: "+JSON.stringify(r,(u,d)=>typeof d=="bigint"?d.toString():d),a=typeof this.connection.options.cache=="object"?this.connection.options.cache:{};let i;const s=a.alwaysEnabled&&this.expressionMap.cache!==!1||this.expressionMap.cache===!0;let c=!1;if(this.connection.queryResultCache&&s)try{if(i=await this.connection.queryResultCache.getFromCache({identifier:this.expressionMap.cacheId,query:o,duration:this.expressionMap.cacheDuration||a.duration||1e3},t),i&&!this.connection.queryResultCache.isExpired(i))return JSON.parse(i.result)}catch(u){if(!a.ignoreErrors)throw u;c=!0}const l=await t.query(n,r,!0);if(!c&&this.connection.queryResultCache&&s)try{await this.connection.queryResultCache.storeInCache({identifier:this.expressionMap.cacheId,query:o,time:new Date().getTime(),duration:this.expressionMap.cacheDuration||a.duration||1e3,result:JSON.stringify(l.records)},i,t)}catch(u){if(!a.ignoreErrors)throw u}return l.records}mergeExpressionMap(t){return Dt.assign(this.expressionMap,t),this}normalizeNumber(t){return typeof t=="number"||t===void 0||t===null?t:Number(t)}obtainQueryRunner(){return this.queryRunner||this.connection.createQueryRunner(this.connection.defaultReplicationModeForReads())}buildSelect(t,n,r,o){for(let a in t){if(t[a]===void 0||t[a]===!1)continue;const i=o?o+"."+a:a,s=n.findColumnWithPropertyPathStrict(i),c=n.findEmbeddedWithPropertyPath(i),l=n.findRelationWithPropertyPath(i);if(!c&&!s&&!l)throw new zr(i,n);s?this.selects.push(r+"."+i):c&&this.buildSelect(t[a],n,r,i)}}buildRelations(t,n,r,o,a){t&&Object.keys(t).forEach(i=>{const s=t[i],c=a?a+"."+i:i,l=r.findEmbeddedWithPropertyPath(c),u=r.findRelationWithPropertyPath(c);if(!l&&!u)throw new zr(c,r);if(l)this.buildRelations(s,typeof n=="object"?Gt.deepValue(n,l.propertyPath):void 0,r,o,c);else if(u){let d=o+"_"+c.replace(".","_");d=ge.buildAlias(this.connection.driver,{joiner:"__"},o,d),(s===!0||typeof s=="object")&&(this.expressionMap.relationLoadStrategy==="query"?this.concatRelationMetadata(u):(this.joins.push({type:"left",select:!0,selection:n&&typeof n[i]=="object"?n[i]:void 0,alias:d,parentAlias:o,relationMetadata:u}),n&&typeof n[i]=="object"&&this.buildSelect(n[i],u.inverseEntityMetadata,d))),typeof s=="object"&&this.expressionMap.relationLoadStrategy==="join"&&this.buildRelations(s,typeof n=="object"?Gt.deepValue(n,u.propertyPath):void 0,u.inverseEntityMetadata,d,void 0)}})}buildEagerRelations(t,n,r,o,a){t&&Object.keys(t).forEach(i=>{const s=t[i],c=a?a+"."+i:i,l=r.findEmbeddedWithPropertyPath(c),u=r.findRelationWithPropertyPath(c);if(!l&&!u)throw new zr(c,r);if(l)this.buildEagerRelations(s,typeof n=="object"?Gt.deepValue(n,l.propertyPath):void 0,r,o,c);else if(u){let d=o+"_"+c.replace(".","_");d=ge.buildAlias(this.connection.driver,{joiner:"__"},o,d),(s===!0||typeof s=="object")&&u.inverseEntityMetadata.eagerRelations.forEach(f=>{let h=d+"_"+f.propertyPath.replace(".","_");h=ge.buildAlias(this.connection.driver,{joiner:"__"},d,h),this.joins.find(g=>g.alias===h)||this.joins.push({type:"left",select:!0,alias:h,parentAlias:d,selection:void 0,relationMetadata:f}),n&&typeof n[i]=="object"&&this.buildSelect(n[i],u.inverseEntityMetadata,d)}),typeof s=="object"&&this.buildEagerRelations(s,typeof n=="object"?Gt.deepValue(n,u.propertyPath):void 0,u.inverseEntityMetadata,d,void 0)}})}buildOrder(t,n,r,o){for(let a in t){if(t[a]===void 0)continue;const i=o?o+"."+a:a,s=n.findColumnWithPropertyPathStrict(i),c=n.findEmbeddedWithPropertyPath(i),l=n.findRelationWithPropertyPath(i);if(!c&&!s&&!l)throw new zr(i,n);if(s){let u=typeof t[a]=="object"?t[a].direction:t[a];u=u==="DESC"||u==="desc"||u===-1?"DESC":"ASC";let d=typeof t[a]=="object"?t[a].nulls:void 0;d=(d==null?void 0:d.toLowerCase())==="first"?"NULLS FIRST":(d==null?void 0:d.toLowerCase())==="last"?"NULLS LAST":void 0;let f=`${r}.${i}`;this.addOrderBy(f,u,d)}else if(c)this.buildOrder(t[a],n,r,i);else if(l){let u=r+"_"+i.replace(".","_");u=ge.buildAlias(this.connection.driver,{joiner:"__"},r,u),this.joins.find(d=>d.alias===u)||this.joins.push({type:"left",select:!1,alias:u,parentAlias:r,selection:void 0,relationMetadata:l}),this.buildOrder(t[a],l.inverseEntityMetadata,u)}}}buildWhere(t,n,r,o){let a="";if(Array.isArray(t))t.length&&(a=t.map(i=>this.buildWhere(i,n,r,o)).filter(i=>!!i).map(i=>"("+i+")").join(" OR "));else{let i=[];for(let s in t){if(t[s]===void 0||t[s]===null)continue;const c=o?o+"."+s:s,l=n.findColumnWithPropertyPathStrict(c),u=n.findEmbeddedWithPropertyPath(c),d=n.findRelationWithPropertyPath(c);if(!u&&!l&&!d)throw new zr(c,n);if(l){let f=`${r}.${c}`;l.isVirtualProperty&&l.query&&(f=`(${l.query(r)})`);let h=t[s];pt.isEqualOperator(t[s])&&(h=t[s].value),l.transformer&&(h instanceof Al?h.transformValue(l.transformer):h=Bx.transformTo(l.transformer,h)),i.push(this.createWhereConditionExpression(this.getWherePredicateCondition(f,h)))}else if(u){const f=this.buildWhere(t[s],n,r,c);f&&i.push(f)}else if(d){if(typeof t[s]=="object"&&Object.keys(t[s]).every(f=>t[s][f]===void 0))continue;if(pt.isFindOperator(t[s]))if(t[s].type==="moreThan"||t[s].type==="lessThan"||t[s].type==="moreThanOrEqual"||t[s].type==="lessThanOrEqual"){let f="";t[s].type==="moreThan"?f=">":t[s].type==="lessThan"?f="<":t[s].type==="moreThanOrEqual"?f=">=":t[s].type==="lessThanOrEqual"&&(f="<=");const h=this.subQuery();if(d.isManyToManyOwner)h.select("COUNT(*)").from(d.joinTableName,d.joinTableName).where(d.joinColumns.map(g=>`${d.joinTableName}.${g.propertyName} = ${r}.${g.referencedColumn.propertyName}`).join(" AND "));else if(d.isManyToManyNotOwner)h.select("COUNT(*)").from(d.inverseRelation.joinTableName,d.inverseRelation.joinTableName).where(d.inverseRelation.inverseJoinColumns.map(g=>`${d.inverseRelation.joinTableName}.${g.propertyName} = ${r}.${g.referencedColumn.propertyName}`).join(" AND "));else if(d.isOneToMany)h.select("COUNT(*)").from(d.inverseEntityMetadata.target,d.inverseEntityMetadata.tableName).where(d.inverseRelation.joinColumns.map(g=>`${d.inverseEntityMetadata.tableName}.${g.propertyName} = ${r}.${g.referencedColumn.propertyName}`).join(" AND "));else throw new Error("This relation isn't supported by given find operator");this.andWhere(h.getSql()+" "+f+" "+parseInt(t[s].value))}else if(d.isManyToOne||d.isOneToOne&&d.isOneToOneOwner){const f=`${r}.${c}`;i.push(this.createWhereConditionExpression(this.getWherePredicateCondition(f,t[s])))}else throw new Error("This relation isn't supported by given find operator");else{let f=r+"_"+d.propertyPath.replace(".","_");f=ge.buildAlias(this.connection.driver,{joiner:"__"},r,f),this.joins.find(g=>g.alias===f)||this.joins.push({type:"left",select:!1,selection:void 0,alias:f,parentAlias:r,relationMetadata:d});const h=this.buildWhere(t[s],d.inverseEntityMetadata,f);h&&i.push(h)}}}a=i.length?"("+i.join(") AND (")+")":i.join(" AND ")}return a.length?"("+a+")":a}}class hD{constructor(){this.generatedMaps=[]}static from(t){const n=new this;return n.raw=t.records,n.affected=t.affected,n}}class Kre extends kt{constructor(t,n){super(t,n),this["@instanceof"]=Symbol.for("SoftDeleteQueryBuilder"),this.expressionMap.aliasNamePrefixingEnabled=!1}getQuery(){let t=this.createUpdateExpression();return t+=this.createCteExpression(),t+=this.createOrderByExpression(),t+=this.createLimitExpression(),this.replacePropertyNamesForTheWholeQuery(t.trim())}async execute(){const t=this.obtainQueryRunner();let n=!1;try{this.expressionMap.useTransaction===!0&&t.isTransactionActive===!1&&(await t.startTransaction(),n=!0),this.expressionMap.callListeners===!0&&this.expressionMap.mainAlias.hasMetadata&&(this.expressionMap.queryType==="soft-delete"?await t.broadcaster.broadcast("BeforeSoftRemove",this.expressionMap.mainAlias.metadata):this.expressionMap.queryType==="restore"&&await t.broadcaster.broadcast("BeforeRecover",this.expressionMap.mainAlias.metadata));const r=new $x(t,this.expressionMap);this.expressionMap.updateEntity===!0&&this.expressionMap.mainAlias.hasMetadata&&this.expressionMap.whereEntities.length>0&&(this.expressionMap.extraReturningColumns=r.getSoftDeletionReturningColumns());const[o,a]=this.getQueryAndParameters(),i=await t.query(o,a,!0),s=hD.from(i);return this.expressionMap.updateEntity===!0&&this.expressionMap.mainAlias.hasMetadata&&this.expressionMap.whereEntities.length>0&&await r.update(s,this.expressionMap.whereEntities),this.expressionMap.callListeners===!0&&this.expressionMap.mainAlias.hasMetadata&&(this.expressionMap.queryType==="soft-delete"?await t.broadcaster.broadcast("AfterSoftRemove",this.expressionMap.mainAlias.metadata):this.expressionMap.queryType==="restore"&&await t.broadcaster.broadcast("AfterRecover",this.expressionMap.mainAlias.metadata)),n&&await t.commitTransaction(),s}catch(r){if(n)try{await t.rollbackTransaction()}catch{}throw r}finally{t!==this.queryRunner&&await t.release()}}from(t,n){t=pt.isEntitySchema(t)?t.options.name:t;const r=this.createFromAlias(t,n);return this.expressionMap.setMainAlias(r),this}where(t,n){this.expressionMap.wheres=[];const r=this.getWhereCondition(t);return r&&(this.expressionMap.wheres=[{type:"simple",condition:r}]),n&&this.setParameters(n),this}andWhere(t,n){return this.expressionMap.wheres.push({type:"and",condition:this.getWhereCondition(t)}),n&&this.setParameters(n),this}orWhere(t,n){return this.expressionMap.wheres.push({type:"or",condition:this.getWhereCondition(t)}),n&&this.setParameters(n),this}whereInIds(t){return this.where(this.getWhereInIdsCondition(t))}andWhereInIds(t){return this.andWhere(this.getWhereInIdsCondition(t))}orWhereInIds(t){return this.orWhere(this.getWhereInIdsCondition(t))}output(t){return this.returning(t)}returning(t){if(!this.connection.driver.isReturningSqlSupported("update"))throw new Zf;return this.expressionMap.returning=t,this}orderBy(t,n="ASC",r){return t?typeof t=="object"?this.expressionMap.orderBys=t:r?this.expressionMap.orderBys={[t]:{order:n,nulls:r}}:this.expressionMap.orderBys={[t]:n}:this.expressionMap.orderBys={},this}addOrderBy(t,n="ASC",r){return r?this.expressionMap.orderBys[t]={order:n,nulls:r}:this.expressionMap.orderBys[t]=n,this}limit(t){return this.expressionMap.limit=t,this}whereEntity(t){if(!this.expressionMap.mainAlias.hasMetadata)throw new xe(".whereEntity method can only be used on queries which update real entity table.");this.expressionMap.wheres=[];const n=Array.isArray(t)?t:[t];return n.forEach(r=>{const o=this.expressionMap.mainAlias.metadata.getEntityIdMap(r);if(!o)throw new xe("Provided entity does not have ids set, cannot perform operation.");this.orWhereInIds(o)}),this.expressionMap.whereEntities=n,this}updateEntity(t){return this.expressionMap.updateEntity=t,this}createUpdateExpression(){const t=this.expressionMap.mainAlias.hasMetadata?this.expressionMap.mainAlias.metadata:void 0;if(!t)throw new xe(`Cannot get entity metadata for the given alias "${this.expressionMap.mainAlias}"`);if(!t.deleteDateColumn)throw new hre(t);const n=[];switch(this.expressionMap.queryType){case"soft-delete":n.push(this.escape(t.deleteDateColumn.databaseName)+" = CURRENT_TIMESTAMP");break;case"restore":n.push(this.escape(t.deleteDateColumn.databaseName)+" = NULL");break;default:throw new xe('The queryType must be "soft-delete" or "restore"')}if(t.versionColumn&&n.push(this.escape(t.versionColumn.databaseName)+" = "+this.escape(t.versionColumn.databaseName)+" + 1"),t.updateDateColumn&&n.push(this.escape(t.updateDateColumn.databaseName)+" = CURRENT_TIMESTAMP"),n.length<=0)throw new Sx;const r=this.createWhereExpression(),o=this.createReturningExpression("update");return o===""?`UPDATE ${this.getTableName(this.getMainTableName())} SET ${n.join(", ")}${r}`:this.connection.driver.options.type==="mssql"?`UPDATE ${this.getTableName(this.getMainTableName())} SET ${n.join(", ")} OUTPUT ${o}${r}`:`UPDATE ${this.getTableName(this.getMainTableName())} SET ${n.join(", ")}${r} RETURNING ${o}`}createOrderByExpression(){const t=this.expressionMap.orderBys;return Object.keys(t).length>0?" ORDER BY "+Object.keys(t).map(n=>typeof t[n]=="string"?this.replacePropertyNames(n)+" "+t[n]:this.replacePropertyNames(n)+" "+t[n].order+" "+t[n].nulls).join(", "):""}createLimitExpression(){let t=this.expressionMap.limit;if(t){if(ge.isMySQLFamily(this.connection.driver))return" LIMIT "+t;throw new YI}return""}}class Xre extends kt{constructor(t,n){super(t,n),this["@instanceof"]=Symbol.for("UpdateQueryBuilder"),this.expressionMap.aliasNamePrefixingEnabled=!1}getQuery(){let t=this.createComment();return t+=this.createCteExpression(),t+=this.createUpdateExpression(),t+=this.createOrderByExpression(),t+=this.createLimitExpression(),this.replacePropertyNamesForTheWholeQuery(t.trim())}async execute(){const t=this.obtainQueryRunner();let n=!1;try{this.expressionMap.useTransaction===!0&&t.isTransactionActive===!1&&(await t.startTransaction(),n=!0),this.expressionMap.callListeners===!0&&this.expressionMap.mainAlias.hasMetadata&&await t.broadcaster.broadcast("BeforeUpdate",this.expressionMap.mainAlias.metadata,this.expressionMap.valuesSet);let r=null,o=null;const a=new $x(t,this.expressionMap),i=[];if(Array.isArray(this.expressionMap.returning)&&this.expressionMap.mainAlias.hasMetadata)for(const f of this.expressionMap.returning)i.push(...this.expressionMap.mainAlias.metadata.findColumnsWithPropertyPath(f));this.expressionMap.updateEntity===!0&&this.expressionMap.mainAlias.hasMetadata&&this.expressionMap.whereEntities.length>0&&(this.expressionMap.extraReturningColumns=a.getUpdationReturningColumns(),i.push(...this.expressionMap.extraReturningColumns.filter(f=>!i.includes(f)))),i.length>0&&this.connection.driver.options.type==="mssql"&&(r=this.connection.driver.buildTableVariableDeclaration("@OutputTable",i),o="SELECT * FROM @OutputTable");const[s,c]=this.getQueryAndParameters(),l=[r,s,o],u=await t.query(l.filter(f=>f!=null).join(`;

`),c,!0),d=hD.from(u);return this.expressionMap.updateEntity===!0&&this.expressionMap.mainAlias.hasMetadata&&this.expressionMap.whereEntities.length>0&&await a.update(d,this.expressionMap.whereEntities),this.expressionMap.callListeners===!0&&this.expressionMap.mainAlias.hasMetadata&&await t.broadcaster.broadcast("AfterUpdate",this.expressionMap.mainAlias.metadata,this.expressionMap.valuesSet),n&&await t.commitTransaction(),d}catch(r){if(n)try{await t.rollbackTransaction()}catch{}throw r}finally{t!==this.queryRunner&&await t.release()}}set(t){return this.expressionMap.valuesSet=t,this}where(t,n){this.expressionMap.wheres=[];const r=this.getWhereCondition(t);return r&&(this.expressionMap.wheres=[{type:"simple",condition:r}]),n&&this.setParameters(n),this}andWhere(t,n){return this.expressionMap.wheres.push({type:"and",condition:this.getWhereCondition(t)}),n&&this.setParameters(n),this}orWhere(t,n){return this.expressionMap.wheres.push({type:"or",condition:this.getWhereCondition(t)}),n&&this.setParameters(n),this}whereInIds(t){return this.where(this.getWhereInIdsCondition(t))}andWhereInIds(t){return this.andWhere(this.getWhereInIdsCondition(t))}orWhereInIds(t){return this.orWhere(this.getWhereInIdsCondition(t))}output(t){return this.returning(t)}returning(t){if(!this.connection.driver.isReturningSqlSupported("update"))throw new Zf;return this.expressionMap.returning=t,this}orderBy(t,n="ASC",r){return t?typeof t=="object"?this.expressionMap.orderBys=t:r?this.expressionMap.orderBys={[t]:{order:n,nulls:r}}:this.expressionMap.orderBys={[t]:n}:this.expressionMap.orderBys={},this}addOrderBy(t,n="ASC",r){return r?this.expressionMap.orderBys[t]={order:n,nulls:r}:this.expressionMap.orderBys[t]=n,this}limit(t){return this.expressionMap.limit=t,this}whereEntity(t){if(!this.expressionMap.mainAlias.hasMetadata)throw new xe(".whereEntity method can only be used on queries which update real entity table.");this.expressionMap.wheres=[];const n=Array.isArray(t)?t:[t];return n.forEach(r=>{const o=this.expressionMap.mainAlias.metadata.getEntityIdMap(r);if(!o)throw new xe("Provided entity does not have ids set, cannot perform operation.");this.orWhereInIds(o)}),this.expressionMap.whereEntities=n,this}updateEntity(t){return this.expressionMap.updateEntity=t,this}createUpdateExpression(){const t=this.getValueSet(),n=this.expressionMap.mainAlias.hasMetadata?this.expressionMap.mainAlias.metadata:void 0,r={};for(let c in t)t[c]!==void 0&&(r[c]=t[c]);const o=[],a=[];if(n?(this.createPropertyPath(n,r).forEach(c=>{const l=n.findColumnsWithPropertyPath(c);if(l.length<=0)throw new zr(c,n);l.forEach(u=>{if(!u.isUpdate||a.includes(u))return;a.push(u);let d=u.getEntityValue(r);if(u.referencedColumn&&typeof d=="object"&&!(d instanceof Date)&&d!==null&&!fm.isBuffer(d)?d=u.referencedColumn.getEntityValue(d):typeof d!="function"&&(d=this.connection.driver.preparePersistentValue(d,u)),typeof d=="function")o.push(this.escape(u.databaseName)+" = "+d());else if((this.connection.driver.options.type==="sap"||this.connection.driver.options.type==="spanner")&&d===null)o.push(this.escape(u.databaseName)+" = NULL");else{this.connection.driver.options.type==="mssql"&&(d=this.connection.driver.parametrizeValue(u,d));const f=this.createParameter(d);let h=null;if((ge.isMySQLFamily(this.connection.driver)||this.connection.driver.options.type==="aurora-mysql")&&this.connection.driver.spatialTypes.indexOf(u.type)!==-1){const g=this.connection.driver.options.legacySpatialSupport?"GeomFromText":"ST_GeomFromText";u.srid!=null?h=`${g}(${f}, ${u.srid})`:h=`${g}(${f})`}else ge.isPostgresFamily(this.connection.driver)&&this.connection.driver.spatialTypes.indexOf(u.type)!==-1?u.srid!=null?h=`ST_SetSRID(ST_GeomFromGeoJSON(${f}), ${u.srid})::${u.type}`:h=`ST_GeomFromGeoJSON(${f})::${u.type}`:this.connection.driver.options.type==="mssql"&&this.connection.driver.spatialTypes.indexOf(u.type)!==-1?h=u.type+"::STGeomFromText("+f+", "+(u.srid||"0")+")":h=f;o.push(this.escape(u.databaseName)+" = "+h)}})}),(o.length>0||Object.keys(r).length===0)&&(n.versionColumn&&a.indexOf(n.versionColumn)===-1&&o.push(this.escape(n.versionColumn.databaseName)+" = "+this.escape(n.versionColumn.databaseName)+" + 1"),n.updateDateColumn&&a.indexOf(n.updateDateColumn)===-1&&o.push(this.escape(n.updateDateColumn.databaseName)+" = CURRENT_TIMESTAMP"))):Object.keys(r).map(c=>{let l=r[c];if(typeof l=="function")o.push(this.escape(c)+" = "+l());else if((this.connection.driver.options.type==="sap"||this.connection.driver.options.type==="spanner")&&l===null)o.push(this.escape(c)+" = NULL");else{const u=this.createParameter(l);o.push(this.escape(c)+" = "+u)}}),o.length<=0)throw new Sx;const i=this.createWhereExpression(),s=this.createReturningExpression("update");return s===""?`UPDATE ${this.getTableName(this.getMainTableName())} SET ${o.join(", ")}${i}`:this.connection.driver.options.type==="mssql"?`UPDATE ${this.getTableName(this.getMainTableName())} SET ${o.join(", ")} OUTPUT ${s}${i}`:`UPDATE ${this.getTableName(this.getMainTableName())} SET ${o.join(", ")}${i} RETURNING ${s}`}createOrderByExpression(){const t=this.expressionMap.orderBys;return Object.keys(t).length>0?" ORDER BY "+Object.keys(t).map(n=>typeof t[n]=="string"?this.replacePropertyNames(n)+" "+t[n]:this.replacePropertyNames(n)+" "+t[n].order+" "+t[n].nulls).join(", "):""}createLimitExpression(){let t=this.expressionMap.limit;if(t){if(ge.isMySQLFamily(this.connection.driver)||this.connection.driver.options.type==="aurora-mysql")return" LIMIT "+t;throw new YI}return""}getValueSet(){if(typeof this.expressionMap.valuesSet=="object")return this.expressionMap.valuesSet;throw new Sx}}function Qre(){kt.registerQueryBuilderClass("DeleteQueryBuilder",e=>new Tre(e)),kt.registerQueryBuilderClass("InsertQueryBuilder",e=>new Bre(e)),kt.registerQueryBuilderClass("RelationQueryBuilder",e=>new zre(e)),kt.registerQueryBuilderClass("SelectQueryBuilder",e=>new Vx(e)),kt.registerQueryBuilderClass("SoftDeleteQueryBuilder",e=>new Kre(e)),kt.registerQueryBuilderClass("UpdateQueryBuilder",e=>new Xre(e))}var mD;(function(e){e.VIEW="VIEW",e.MATERIALIZED_VIEW="MATERIALIZED_VIEW",e.GENERATED_COLUMN="GENERATED_COLUMN"})(mD||(mD={}));var Ux={exports:{}},Hx,yD;function Jre(){if(yD)return Hx;yD=1;var e=1e3,t=e*60,n=t*60,r=n*24,o=r*7,a=r*365.25;Hx=function(u,d){d=d||{};var f=typeof u;if(f==="string"&&u.length>0)return i(u);if(f==="number"&&isFinite(u))return d.long?c(u):s(u);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(u))};function i(u){if(u=String(u),!(u.length>100)){var d=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(u);if(d){var f=parseFloat(d[1]),h=(d[2]||"ms").toLowerCase();switch(h){case"years":case"year":case"yrs":case"yr":case"y":return f*a;case"weeks":case"week":case"w":return f*o;case"days":case"day":case"d":return f*r;case"hours":case"hour":case"hrs":case"hr":case"h":return f*n;case"minutes":case"minute":case"mins":case"min":case"m":return f*t;case"seconds":case"second":case"secs":case"sec":case"s":return f*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return f;default:return}}}}function s(u){var d=Math.abs(u);return d>=r?Math.round(u/r)+"d":d>=n?Math.round(u/n)+"h":d>=t?Math.round(u/t)+"m":d>=e?Math.round(u/e)+"s":u+"ms"}function c(u){var d=Math.abs(u);return d>=r?l(u,d,r,"day"):d>=n?l(u,d,n,"hour"):d>=t?l(u,d,t,"minute"):d>=e?l(u,d,e,"second"):u+" ms"}function l(u,d,f,h){var g=d>=f*1.5;return Math.round(u/f)+" "+h+(g?"s":"")}return Hx}var Wx,gD;function Zre(){if(gD)return Wx;gD=1;function e(t){r.debug=r,r.default=r,r.coerce=l,r.disable=i,r.enable=a,r.enabled=s,r.humanize=Jre(),r.destroy=u,Object.keys(t).forEach(d=>{r[d]=t[d]}),r.names=[],r.skips=[],r.formatters={};function n(d){let f=0;for(let h=0;h<d.length;h++)f=(f<<5)-f+d.charCodeAt(h),f|=0;return r.colors[Math.abs(f)%r.colors.length]}r.selectColor=n;function r(d){let f,h=null,g,m;function v(...b){if(!v.enabled)return;const x=v,_=Number(new Date),w=_-(f||_);x.diff=w,x.prev=f,x.curr=_,f=_,b[0]=r.coerce(b[0]),typeof b[0]!="string"&&b.unshift("%O");let j=0;b[0]=b[0].replace(/%([a-zA-Z%])/g,(E,S)=>{if(E==="%%")return"%";j++;const C=r.formatters[S];if(typeof C=="function"){const M=b[j];E=C.call(x,M),b.splice(j,1),j--}return E}),r.formatArgs.call(x,b),(x.log||r.log).apply(x,b)}return v.namespace=d,v.useColors=r.useColors(),v.color=r.selectColor(d),v.extend=o,v.destroy=r.destroy,Object.defineProperty(v,"enabled",{enumerable:!0,configurable:!1,get:()=>h!==null?h:(g!==r.namespaces&&(g=r.namespaces,m=r.enabled(d)),m),set:b=>{h=b}}),typeof r.init=="function"&&r.init(v),v}function o(d,f){const h=r(this.namespace+(typeof f>"u"?":":f)+d);return h.log=this.log,h}function a(d){r.save(d),r.namespaces=d,r.names=[],r.skips=[];let f;const h=(typeof d=="string"?d:"").split(/[\s,]+/),g=h.length;for(f=0;f<g;f++)h[f]&&(d=h[f].replace(/\*/g,".*?"),d[0]==="-"?r.skips.push(new RegExp("^"+d.slice(1)+"$")):r.names.push(new RegExp("^"+d+"$")))}function i(){const d=[...r.names.map(c),...r.skips.map(c).map(f=>"-"+f)].join(",");return r.enable(""),d}function s(d){if(d[d.length-1]==="*")return!0;let f,h;for(f=0,h=r.skips.length;f<h;f++)if(r.skips[f].test(d))return!1;for(f=0,h=r.names.length;f<h;f++)if(r.names[f].test(d))return!0;return!1}function c(d){return d.toString().substring(2,d.toString().length-2).replace(/\.\*\?$/,"*")}function l(d){return d instanceof Error?d.stack||d.message:d}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}return Wx=e,Wx}var vD;function Gre(){return vD||(vD=1,function(e,t){var n={};t.formatArgs=o,t.save=a,t.load=i,t.useColors=r,t.storage=s(),t.destroy=(()=>{let l=!1;return()=>{l||(l=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function r(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let l;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(l=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(l[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function o(l){if(l[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+l[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const u="color: "+this.color;l.splice(1,0,u,"color: inherit");let d=0,f=0;l[0].replace(/%[a-zA-Z%]/g,h=>{h!=="%%"&&(d++,h==="%c"&&(f=d))}),l.splice(f,0,u)}t.log=console.debug||console.log||(()=>{});function a(l){try{l?t.storage.setItem("debug",l):t.storage.removeItem("debug")}catch{}}function i(){let l;try{l=t.storage.getItem("debug")}catch{}return!l&&typeof E7<"u"&&"env"in E7&&(l=n.DEBUG),l}function s(){try{return localStorage}catch{}}e.exports=Zre()(t);const{formatters:c}=e.exports;c.j=function(l){try{return JSON.stringify(l)}catch(u){return"[UnexpectedJSONParseError]: "+u.message}}}(Ux,Ux.exports)),Ux.exports}Gre(),Qre();const bD=(e,t)=>({id:e.id,type:e.node_type,position:{x:e.x||0,y:e.y||0},width:e.width||void 0,height:e.height||void 0,data:{loading:!1,flowNode:e,...t}}),eoe=e=>({id:e.id,target:e.target,source:e.target,targetHandle:e.targetHandle,sourceHandle:e.sourceHandle}),xD=e=>({id:e.id,source:e.source,target:e.target,targetHandle:e.targetHandle,sourceHandle:e.sourceHandle}),toe=e=>e.filter(t=>"edgeId"in t?`${t.edgeId}`.startsWith("xy-edge__"):!1),qx=(e,t,n)=>{const r=[];return{changes:e.map(o=>{var c;const a=t.find(l=>o.id===l.id);a||r.push(o.id);const i=(c=n==null?void 0:n[o.source_type])==null?void 0:c.find(l=>(l==null?void 0:l.id)===o.source_id),s=bD(o,{...a==null?void 0:a.data,entity:i});return{type:a?"replace":"add",id:o.id,item:a?Jf({...a||{},data:void 0},cl(s,ll)):s}}),newIds:[]}},Yx=(e,t)=>{const n=[],r=[],o=e.map(a=>{const i=t.find(s=>a.source===s.source&&a.target===s.target);return!i||i.id!==a.id?(i&&r.push(i.id),{type:"add",item:xD(a)}):(n.push(a.id),{type:"replace",item:xD(a)})});return t.forEach(a=>{n.includes(a.id)||r.push(a.id)}),{changes:o,updatedIds:n,deletedIds:r}},Kx={width:440,height:360},ep={width:380,height:650},Tl={[oe.Toolbox]:"toolbox",[oe.SessionInfo]:"session-info",[oe.DefaultEmbeddingModel]:"default-embedding-model",[oe.ApplicationBar]:"application-bar"},noe={id:Tl[oe.Toolbox],type:oe.Toolbox,position:{x:10+ep.width+20,y:10},measured:Kx,data:{}},roe={id:Tl[oe.SessionInfo],type:oe.SessionInfo,position:{x:10,y:10},measured:ep,data:{}},ooe={id:Tl[oe.DefaultEmbeddingModel],type:oe.DefaultEmbeddingModel,position:{x:10+ep.width+Kx.width+40,y:10},data:{model:tje}},aoe={id:Tl[oe.ApplicationBar],type:oe.ApplicationBar,position:{x:10+ep.width+Kx.width+40,y:80},data:{}},ioe=[noe,roe,ooe,aoe],soe=[oe.Toolbox,oe.SessionInfo,oe.ApplicationBar,oe.EditorApp,oe.CodeContainerApp],wD={flowNodes:[],flowEdges:[],ready:!0,flowEdgeLoading:!1,flowNodeLoading:!1,syncedNodes:[],syncedEdges:[],syncNodeQueue:[],syncEdgeQueue:[],edges:[],nodes:ioe},tp=async e=>{const t=await ce("FlowNode").find(e),n=t.reduce((o,a)=>{var i;return o[a.source_type]||(o[a.source_type]=[]),(i=o[a.source_type])==null||i.push(a),o},{}),r={};return await Promise.all(Object.entries(n).map(async([o,a])=>{const i=o;r[i]=await ce(i).find({where:{id:Ur(a.map(s=>s.source_id))}})})),{flowNodes:t,entityGroups:n,flowNodeDatas:r}},coe=(e,t)=>({reset:()=>{e(wD)},setNodes:n=>{if(typeof n=="function"){e({nodes:n(t().nodes)});return}e({nodes:n})},setEdges:n=>{if(typeof n=="function"){e({edges:n(t().edges)});return}e({edges:n})},updateNodes:n=>{const r=t().nodes;e({nodes:qa(n,r)})},updateEdges:n=>{const r=t().edges;e({edges:Ml(n,r)})},addConnectionToEdges:n=>{const r=t().edges;e({edges:hR(n,r)})},flowNodesToNodes:(n,r={})=>{const o=t().nodes,{changes:a}=qx(n,o,r);e({nodes:qa(a,o)})},flowEdgesToEdges:n=>{const r=t().edges,{changes:o,updatedIds:a,deletedIds:i}=Yx(n,r);r.forEach(s=>{a.includes(s.id)||i.push(s.id)}),i.forEach(s=>{o.push({type:"remove",id:s})}),e({edges:Ml(o,r)})},getNodes:n=>t().nodes.filter(r=>n.includes(r.id)),removeSyncNodeQueue:n=>{const{syncNodeQueue:r}=t();for(const o of n){const a=r.findIndex(i=>i.timestamp===o);a>-1&&r.splice(a,1)}e({syncNodeQueue:r})},removeSyncEdgeQueue:n=>{const{syncEdgeQueue:r}=t();for(const o of n){const a=r.findIndex(i=>i.timestamp===o);a>-1&&r.splice(a,1)}e({syncEdgeQueue:r})},pushSyncNodeQueue:(n,r)=>{const{syncNodeQueue:o}=t();e({syncNodeQueue:[...o,{query:r,timestamp:Date.now(),syncType:n}]})},pushSyncEdgeQueue:()=>{const{syncEdgeQueue:n}=t();e({syncEdgeQueue:[...n,{timestamp:Date.now()}]})},findFlowNodesWithSource:async(n,r)=>{try{e({flowNodeLoading:!0});const{flowNodes:o,flowNodeDatas:a}=await tp(n);if(r!=null&&r.clean)e({flowNodes:o,nodes:o.map(i=>{var c;const s=(c=a==null?void 0:a[i.source_type])==null?void 0:c.find(l=>l.id===i.source_id);return bD(i,{data:s})})});else{const i=t().flowNodes,s=o.map(u=>u.id),c=t().nodes,{changes:l}=qx(o,c,a);e({flowNodes:[...i.filter(u=>!s.includes(u.id)),...o],nodes:qa(l,c)})}return o}finally{e({flowNodeLoading:!1})}},findFlowEdges:async(n,r)=>{try{e({flowEdgeLoading:!0});const o=await ce("FlowEdge").find(n),a=t().flowEdges,i=o.map(s=>s.id);if(r!=null&&r.clean)e({flowEdges:o,edges:o.map(s=>eoe(s))});else{const s=t().edges,{changes:c}=Yx(o,s);e({flowEdges:[...a.filter(l=>!i.includes(l.id)),...o],edges:Ml(c,s)})}return o}finally{e({flowEdgeLoading:!1})}},deleteFlowNode:async n=>{try{if(!n.id&&!n.source_type&&!n.source_id)throw new Error("Missing flow node indentify");const r=await ce("FlowNode").findOne({where:n.id?{id:n.id}:{source_type:n.source_type,source_id:n.source_id}});if(r){await ce("FlowNode").delete(r.id);const o=t().flowNodes;r.source_type&&r.source_id&&await ce(r.source_type).delete(r.source_id).catch(i=>{Mr("Failed to delete source entity",r.source_type,r.source_id,i)});const a=t().nodes;e({flowNodes:o.filter(i=>i.id!==r.id),nodes:qa([{type:"remove",id:r.id}],a)})}}catch(r){Mr("Failed to delete flow node",r)}},deleteFlowEdge:async n=>{try{if(!n.id&&!n.source&&!n.target)throw new Error("Missing flow edge indentify");const r=await ce("FlowEdge").findOne({where:n.id?{id:n.id}:{source:n.source,target:n.target}});if(r){await ce("FlowEdge").delete(r.id);const o=t().flowEdges;e({flowEdges:o.filter(a=>a.id!==r.id)})}}catch(r){Mr("Failed to delete flow edge",r)}},updateFlowNode:async(n,r)=>{var o;try{if(!((o=Ze.getState().currentSession)!=null&&o.id))throw new Error("Session not found");if(!n.id)throw new Error("Missing flow node indentify");await ce("FlowNode").update(n.id,n);const a=t().flowNodes.map(i=>i.id===n.id?{...i,...n}:i);e({flowNodes:r!=null&&r.silent?a:[...a]})}catch(a){Mr("Failed to create or update flow node",a,n)}},createOrUpdateFlowNode:async(n,r)=>{var o;try{const a=Ze.getState().currentSession;if(!(a!=null&&a.id))throw new Error("Session not found");if(!n.id&&(!n.source_type||!n.source_id))throw new Error("Missing flow node indentify");let i,s=n!=null&&n.id?t().flowNodes.find(h=>h.id===n.id):void 0;if(!s&&(n.id||n.source_type&&n.source_id)&&(s=await ce("FlowNode").findOne({where:n.id?{id:n.id}:{source_type:n.source_type,source_id:n.source_id}})),s)i=Jf(s,cl(n,ll)),r!=null&&r.lazy?ce("FlowNode").update(s.id,i):await ce("FlowNode").update(s.id,i);else if(n.source_id&&n.source_type)i={...n,source_id:`${n.source_id}`,source_type:`${n.source_type}`,node_type:n.node_type||"NEW_MESSAGE",session_id:n.session_id||(a==null?void 0:a.id)},r!=null&&r.lazy?(i.id=Ea(),ce("FlowNode").save(i)):i=await ce("FlowNode").save(i);else throw new Error("Missing source id and type");let c;const l=t().nodes.find(h=>h.id===i.id);i.source_type&&!l?c=await ce(i.source_type).findOne({where:{id:n.source_id}}):i.source_type&&l&&(c=(o=l==null?void 0:l.data)==null?void 0:o.entity);const u=t().flowNodes,d=t().nodes,{changes:f}=qx([i],d,{[i.source_type]:[c]});return e({flowNodes:[...u.filter(h=>h.id!==i.id),i],nodes:qa(f,d)}),i}catch(a){Mr("Failed to create or update flow node",a,n)}},createOrUpdateFlowEdge:async(n,r)=>{try{const o=Ze.getState().currentSession;if(!(o!=null&&o.id))throw new Error("Session not found");if(!n.id&&(!n.source||!n.target))throw new Error("Missing flow node indentify");let a,i=n!=null&&n.id?t().flowEdges.find(l=>l.id===n.id):void 0;if(i&&(n.id||n.source&&n.target)&&(i=await ce("FlowEdge").findOne({where:n.id?{id:n.id}:{source:n.source,target:n.target}})),i)a=Jf(i,cl(n,ll)),r!=null&&r.lazy?ce("FlowEdge").update(i.id,a):await ce("FlowEdge").update(i.id,a);else if(n.source&&n.target)a={...n,source:`${n.source}`,target:`${n.target}`,session_id:n.session_id||(o==null?void 0:o.id)},r!=null&&r.lazy?(a.id=Ea(),ce("FlowEdge").save(a)):a=await ce("FlowEdge").save(a);else throw new Error("Missing source and target");const s=t().flowEdges,c=t().edges;return e({flowEdges:[...s.filter(l=>l.id!==a.id),a],edges:Ml(Yx([a],c).changes,c)}),a}catch(o){Mr("Failed to create or update flow node",o)}}}),loe=()=>{var E;const[e,t]=y.useState(),[n,r]=y.useState(),[o,a]=y.useState(),[i,s]=y.useState([]),[c,l]=y.useState(),u=y.useRef(),d=y.useRef({}),f=Ze(S=>S.currentSession),h=un(S=>S.loadModel),g=y.useCallback(async S=>{var M;if(!f)return;const C=await ce("JSONData").findOne({where:{id:S.source_id,session_id:f==null?void 0:f.id}});C&&((M=u.current)==null||M.call(u,C.data?C.data:[]),l({node:S,enity:C}))},[f]),m=y.useCallback(async S=>{var O;const C=(S==null?void 0:S.sessionId)||(f==null?void 0:f.id),M=(S==null?void 0:S.threadNode)||(n==null?void 0:n.threadNode),N=(S==null?void 0:S.prompts)||(e==null?void 0:e.prompts);if(!C||!(M!=null&&M.id))return;const P=N==null?void 0:N.map(k=>{if(k.type!=="few_shot_example")switch(k.role){case"ai":case"assistant":case"tool":return{id:k.id,content:k.content,role:"assistant"};case"system":return{id:k.id,content:k.content,role:"system"};default:return{id:k.id,content:k.content,role:"user"}}}).filter(Boolean),R=await ce("JSONData").save({headers:"item",session_id:C,json:"",data:P});if(!R)return;const A=await ce("FlowNode").save({session_id:C,source_id:R.id,source_type:"JSONData",node_type:"JSON_DATA",x:0,y:0});if(A)return await ce("FlowEdge").save({session_id:C,source:M.id,target:A.id}),(O=u.current)==null||O.call(u,P),l({node:A,enity:R}),{jsonData:R,jsonDataNode:A}},[e==null?void 0:e.prompts,f==null?void 0:f.id,n==null?void 0:n.threadNode]),v=y.useCallback(async(S,C)=>{if(!f)return;const M=await ce("FlowEdge").findOne({where:{session_id:f.id,source:S.id},order:{id:"DESC"}});if(M){const N=await ce("FlowNode").findOne({where:{id:M.target,session_id:f.id}});if(!N)return;await g(N)}else if(!await m({sessionId:f.id,threadNode:S,prompts:C||[]}))return},[m,f,g]),b=y.useCallback(async S=>{if(S!=null&&S.length&&(f!=null&&f.id)){const C=(await Promise.all(S.map(async M=>ce("FlowEdge").find({where:{target:M.source.id}}).then(N=>tp({where:{session_id:f.id,id:Ur(N.map(P=>P.source))}}).then(P=>({...P,...M})))))).map(M=>{var O,k,T,D;const N=M.flowNodes.find(I=>I.source_type==="Prompt"),P=M.flowNodes.find(I=>I.source_type==="VectorDatabase");if(!P||!N)return;const R=(k=(O=M.flowNodeDatas)==null?void 0:O.Prompt)==null?void 0:k.find(I=>I.id===N.source_id),A=(D=(T=M.flowNodeDatas)==null?void 0:T.VectorDatabase)==null?void 0:D.find(I=>I.id===P.source_id);return{promptNode:N,vectorDatabaseNode:P,placeholderNode:M.source,placeholderEntity:M.entity,promptEntity:R,vectorDatabaseEntity:A}}).filter(Boolean);s(C)}},[f==null?void 0:f.id]),x=y.useCallback(async()=>{try{if(d.current.handling=f==null?void 0:f.id,!(f!=null&&f.id)||!(f!=null&&f.main_source_id)||(f==null?void 0:f.main_source_type)!=="Thread")return;const[S,C]=await Promise.all([ce("Thread").findOne({where:{id:f.main_source_id,session_id:f.id}}),ce("FlowNode").findOne({where:{id:f.main_node_id}})]);if(!S||!C)return;const M=await ce("FlowEdge").find({where:{session_id:f.id,target:C.id}}),{flowNodes:N,flowNodeDatas:P}=await tp({where:{session_id:f.id,id:Ur(M.map(I=>I.source))}}),R=(await ce("FlowEdge").find({where:{session_id:f.id}})).filter(I=>I.target===C.id).map(I=>{var B;const L=N.find(V=>V.id===I.source);return{connection:I,source:L,entity:(B=P==null?void 0:P[L.source_type])==null?void 0:B.find(V=>V.id===L.source_id)}}),A=R.find(I=>I.source.source_type==="LLM"),O=R.filter(I=>I.source.source_type==="Prompt"),k=R.find(I=>I.source.source_type==="Schema");if(!(A!=null&&A.entity))return;const T=R.filter(I=>I.source.source_type==="FlowNodePlaceholder");await b(T),await v(C,(O==null?void 0:O.map(I=>I.entity))||[]),a({llm:A.entity,status:Ye.Started,progress:""}),r({thread:S,threadNode:C});const D=k==null?void 0:k.entity;if(D){const I=await ce("SchemaItem").find({where:{schema_id:D.id}});D.schema_items=I||[]}t({prompts:(O==null?void 0:O.map(I=>I.entity))||[],schema:D}),d.current.handled=f.id}finally{d.current.handling=void 0}},[f==null?void 0:f.id,f==null?void 0:f.main_node_id,f==null?void 0:f.main_source_id,f==null?void 0:f.main_source_type,b,v]),_=y.useCallback(async()=>{if(o!=null&&o.llm.name)try{a(S=>S&&{...S,status:Ye.Loading}),await h(o==null?void 0:o.llm.name,S=>{a(C=>C&&{...C,progress:S.text})}),a(S=>S&&{...S,status:Ye.Loaded,progress:""})}catch{a(S=>S&&{...S,status:Ye.Started,progress:""})}},[(E=o==null?void 0:o.llm)==null?void 0:E.name,h]),w=y.useCallback(S=>(u.current=S,()=>{u.current=void 0}),[]),j=y.useCallback(async S=>{!(c!=null&&c.node)||!(c!=null&&c.enity)||await ce("JSONData").save({...c.enity,data:S})},[c==null?void 0:c.enity,c==null?void 0:c.node]);return y.useEffect(()=>{d.current.handling||(d==null?void 0:d.current.handled)===(f==null?void 0:f.id)||x()},[f==null?void 0:f.id,x]),{...e,loadLLM:_,threadInfo:n,mainLLMInfo:o,retriverInfo:i,currentDataNode:c,updateMessagesData:j,addNewDataNode:m,selectDataNode:g,onThreadMessagesLoaded:w}};class uoe extends nje{get lc_attributes(){return{partialVariables:void 0}}constructor(t){super(t),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompts",this._getPromptType()]}),Object.defineProperty(this,"inputVariables",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputParser",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"partialVariables",{enumerable:!0,configurable:!0,writable:!0,value:void 0});const{inputVariables:n}=t;if(n.includes("stop"))throw new Error("Cannot have an input variable named 'stop', as it is used internally, please rename.");Object.assign(this,t)}async mergePartialAndUserVariables(t){const n=this.partialVariables??{},r={};for(const[o,a]of Object.entries(n))typeof a=="string"?r[o]=a:r[o]=await a();return{...r,...t}}async invoke(t,n){return this._callWithConfig(r=>this.formatPromptValue(r),t,{...n,runType:"prompt"})}serialize(){throw new Error("Use .toJSON() instead")}static async deserialize(t){switch(t._type){case"prompt":{const{PromptTemplate:n}=await vt(async()=>{const{PromptTemplate:r}=await Promise.resolve().then(()=>PD);return{PromptTemplate:r}},[]);return n.deserialize(t)}case void 0:{const{PromptTemplate:n}=await vt(async()=>{const{PromptTemplate:r}=await Promise.resolve().then(()=>PD);return{PromptTemplate:r}},void 0);return n.deserialize({...t,_type:"prompt"})}case"few_shot":{const{FewShotPromptTemplate:n}=await vt(async()=>{const{FewShotPromptTemplate:r}=await import("./few_shot-wqyXJ0Rz.js").then(async o=>(await o.__tla,o));return{FewShotPromptTemplate:r}},__vite__mapDeps([0,1,2]));return n.deserialize(t)}default:throw new Error(`Invalid prompt type in config: ${t._type}`)}}}class doe extends rje{}class foe extends doe{static lc_name(){return"StringPromptValue"}constructor(t){super({value:t}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompt_values"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.value=t}toString(){return this.value}toChatMessages(){return[new Yu(this.value)]}}qS=class extends uoe{async formatPromptValue(e){const t=await this.format(e);return new foe(t)}};var poe=Object.prototype.toString,ds=Array.isArray||function(e){return poe.call(e)==="[object Array]"};function Xx(e){return typeof e=="function"}function hoe(e){return ds(e)?"array":typeof e}function Qx(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function _D(e,t){return e!=null&&typeof e=="object"&&t in e}function moe(e,t){return e!=null&&typeof e!="object"&&e.hasOwnProperty&&e.hasOwnProperty(t)}var yoe=RegExp.prototype.test;function goe(e,t){return yoe.call(e,t)}var voe=/\S/;function boe(e){return!goe(voe,e)}var xoe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function woe(e){return String(e).replace(/[&<>"'`=\/]/g,function(t){return xoe[t]})}var _oe=/\s*/,joe=/\s+/,jD=/\s*=/,Eoe=/\s*\}/,Soe=/#|\^|\/|>|\{|&|=|!/;function Coe(e,t){if(!e)return[];var n=!1,r=[],o=[],a=[],i=!1,s=!1,c="",l=0;function u(){if(i&&!s)for(;a.length;)delete o[a.pop()];else a=[];i=!1,s=!1}var d,f,h;function g(C){if(typeof C=="string"&&(C=C.split(joe,2)),!ds(C)||C.length!==2)throw new Error("Invalid tags: "+C);d=new RegExp(Qx(C[0])+"\\s*"),f=new RegExp("\\s*"+Qx(C[1])),h=new RegExp("\\s*"+Qx("}"+C[1]))}g(t||Sn.tags);for(var m=new Rl(e),v,b,x,_,w,j;!m.eos();){if(v=m.pos,x=m.scanUntil(d),x)for(var E=0,S=x.length;E<S;++E)_=x.charAt(E),boe(_)?(a.push(o.length),c+=_):(s=!0,n=!0,c+=" "),o.push(["text",_,v,v+1]),v+=1,_===`
`&&(u(),c="",l=0,n=!1);if(!m.scan(d))break;if(i=!0,b=m.scan(Soe)||"name",m.scan(_oe),b==="="?(x=m.scanUntil(jD),m.scan(jD),m.scanUntil(f)):b==="{"?(x=m.scanUntil(h),m.scan(Eoe),m.scanUntil(f),b="&"):x=m.scanUntil(f),!m.scan(f))throw new Error("Unclosed tag at "+m.pos);if(b==">"?w=[b,x,v,m.pos,c,l,n]:w=[b,x,v,m.pos],l++,o.push(w),b==="#"||b==="^")r.push(w);else if(b==="/"){if(j=r.pop(),!j)throw new Error('Unopened section "'+x+'" at '+v);if(j[1]!==x)throw new Error('Unclosed section "'+j[1]+'" at '+v)}else b==="name"||b==="{"||b==="&"?s=!0:b==="="&&g(x)}if(u(),j=r.pop(),j)throw new Error('Unclosed section "'+j[1]+'" at '+m.pos);return Noe(Ooe(o))}function Ooe(e){for(var t=[],n,r,o=0,a=e.length;o<a;++o)n=e[o],n&&(n[0]==="text"&&r&&r[0]==="text"?(r[1]+=n[1],r[3]=n[3]):(t.push(n),r=n));return t}function Noe(e){for(var t=[],n=t,r=[],o,a,i=0,s=e.length;i<s;++i)switch(o=e[i],o[0]){case"#":case"^":n.push(o),r.push(o),n=o[4]=[];break;case"/":a=r.pop(),a[5]=o[2],n=r.length>0?r[r.length-1][4]:t;break;default:n.push(o)}return t}function Rl(e){this.string=e,this.tail=e,this.pos=0}Rl.prototype.eos=function(){return this.tail===""},Rl.prototype.scan=function(e){var t=this.tail.match(e);if(!t||t.index!==0)return"";var n=t[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n},Rl.prototype.scanUntil=function(e){var t=this.tail.search(e),n;switch(t){case-1:n=this.tail,this.tail="";break;case 0:n="";break;default:n=this.tail.substring(0,t),this.tail=this.tail.substring(t)}return this.pos+=n.length,n};function fs(e,t){this.view=e,this.cache={".":this.view},this.parent=t}fs.prototype.push=function(e){return new fs(e,this)},fs.prototype.lookup=function(e){var t=this.cache,n;if(t.hasOwnProperty(e))n=t[e];else{for(var r=this,o,a,i,s=!1;r;){if(e.indexOf(".")>0)for(o=r.view,a=e.split("."),i=0;o!=null&&i<a.length;)i===a.length-1&&(s=_D(o,a[i])||moe(o,a[i])),o=o[a[i++]];else o=r.view[e],s=_D(r.view,e);if(s){n=o;break}r=r.parent}t[e]=n}return Xx(n)&&(n=n.call(this.view)),n};function yn(){this.templateCache={_cache:{},set:function(e,t){this._cache[e]=t},get:function(e){return this._cache[e]},clear:function(){this._cache={}}}}yn.prototype.clearCache=function(){typeof this.templateCache<"u"&&this.templateCache.clear()},yn.prototype.parse=function(e,t){var n=this.templateCache,r=e+":"+(t||Sn.tags).join(":"),o=typeof n<"u",a=o?n.get(r):void 0;return a==null&&(a=Coe(e,t),o&&n.set(r,a)),a},yn.prototype.render=function(e,t,n,r){var o=this.getConfigTags(r),a=this.parse(e,o),i=t instanceof fs?t:new fs(t,void 0);return this.renderTokens(a,i,n,e,r)},yn.prototype.renderTokens=function(e,t,n,r,o){for(var a="",i,s,c,l=0,u=e.length;l<u;++l)c=void 0,i=e[l],s=i[0],s==="#"?c=this.renderSection(i,t,n,r,o):s==="^"?c=this.renderInverted(i,t,n,r,o):s===">"?c=this.renderPartial(i,t,n,o):s==="&"?c=this.unescapedValue(i,t):s==="name"?c=this.escapedValue(i,t,o):s==="text"&&(c=this.rawValue(i)),c!==void 0&&(a+=c);return a},yn.prototype.renderSection=function(e,t,n,r,o){var a=this,i="",s=t.lookup(e[1]);function c(d){return a.render(d,t,n,o)}if(s){if(ds(s))for(var l=0,u=s.length;l<u;++l)i+=this.renderTokens(e[4],t.push(s[l]),n,r,o);else if(typeof s=="object"||typeof s=="string"||typeof s=="number")i+=this.renderTokens(e[4],t.push(s),n,r,o);else if(Xx(s)){if(typeof r!="string")throw new Error("Cannot use higher-order sections without the original template");s=s.call(t.view,r.slice(e[3],e[5]),c),s!=null&&(i+=s)}else i+=this.renderTokens(e[4],t,n,r,o);return i}},yn.prototype.renderInverted=function(e,t,n,r,o){var a=t.lookup(e[1]);if(!a||ds(a)&&a.length===0)return this.renderTokens(e[4],t,n,r,o)},yn.prototype.indentPartial=function(e,t,n){for(var r=t.replace(/[^ \t]/g,""),o=e.split(`
`),a=0;a<o.length;a++)o[a].length&&(a>0||!n)&&(o[a]=r+o[a]);return o.join(`
`)},yn.prototype.renderPartial=function(e,t,n,r){if(n){var o=this.getConfigTags(r),a=Xx(n)?n(e[1]):n[e[1]];if(a!=null){var i=e[6],s=e[5],c=e[4],l=a;s==0&&c&&(l=this.indentPartial(a,c,i));var u=this.parse(l,o);return this.renderTokens(u,t,n,l,r)}}},yn.prototype.unescapedValue=function(e,t){var n=t.lookup(e[1]);if(n!=null)return n},yn.prototype.escapedValue=function(e,t,n){var r=this.getConfigEscape(n)||Sn.escape,o=t.lookup(e[1]);if(o!=null)return typeof o=="number"&&r===Sn.escape?String(o):r(o)},yn.prototype.rawValue=function(e){return e[1]},yn.prototype.getConfigTags=function(e){return ds(e)?e:e&&typeof e=="object"?e.tags:void 0},yn.prototype.getConfigEscape=function(e){if(e&&typeof e=="object"&&!ds(e))return e.escape};var Sn={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(e){Il.templateCache=e},get templateCache(){return Il.templateCache}},Il=new yn;Sn.clearCache=function(){return Il.clearCache()},Sn.parse=function(e,t){return Il.parse(e,t)},Sn.render=function(e,t,n,r){if(typeof e!="string")throw new TypeError('Invalid template! Template should be a "string" but "'+hoe(e)+'" was given as the first argument for mustache#render(template, view, partials)');return Il.render(e,t,n,r)},Sn.escape=woe,Sn.Scanner=Rl,Sn.Context=fs,Sn.Writer=yn;function ED(){Sn.escape=e=>e}let Jx,SD,CD,OD,ND,np,MD,kD;Jx=e=>{const t=e.split(""),n=[],r=(a,i)=>{for(let s=i;s<t.length;s+=1)if(a.includes(t[s]))return s;return-1};let o=0;for(;o<t.length;)if(t[o]==="{"&&o+1<t.length&&t[o+1]==="{")n.push({type:"literal",text:"{"}),o+=2;else if(t[o]==="}"&&o+1<t.length&&t[o+1]==="}")n.push({type:"literal",text:"}"}),o+=2;else if(t[o]==="{"){const a=r("}",o);if(a<0)throw new Error("Unclosed '{' in template.");n.push({type:"variable",name:t.slice(o+1,a).join("")}),o=a+1}else{if(t[o]==="}")throw new Error("Single '}' in template.");{const a=r("{}",o),i=(a<0?t.slice(o):t.slice(o,a)).join("");n.push({type:"literal",text:i}),o=a<0?t.length:a}}return n},SD=e=>e.map(t=>t[0]==="name"?{type:"variable",name:t[1].includes(".")?t[1].split(".")[0]:t[1]}:["#","&","^",">"].includes(t[0])?{type:"variable",name:t[1]}:{type:"literal",text:t[1]}),CD=e=>{ED();const t=Sn.parse(e);return SD(t)},OD=(e,t)=>Jx(e).reduce((n,r)=>{if(r.type==="variable"){if(r.name in t)return n+t[r.name];throw new Error(`(f-string) Missing value for input ${r.name}`)}return n+r.text},""),ND=(e,t)=>(ED(),Sn.render(e,t)),np={"f-string":OD,mustache:ND},MD={"f-string":Jx,mustache:CD},ji=(e,t,n)=>np[t](e,n),kD=(e,t)=>MD[t](e),$S=(e,t,n)=>{if(!(t in np)){const r=Object.keys(np);throw new Error(`Invalid template format. Got \`${t}\`;
                         should be one of ${r}`)}try{const r=n.reduce((o,a)=>(o[a]="foo",o),{});Array.isArray(e)?e.forEach(o=>{if(o.type==="text")ji(o.text,t,r);else if(o.type==="image_url")if(typeof o.image_url=="string")ji(o.image_url,t,r);else{const a=o.image_url.url;ji(a,t,r)}else throw new Error(`Invalid message template received. ${JSON.stringify(o,null,2)}`)}):ji(e,t,r)}catch(r){throw new Error(`Invalid prompt schema: ${r.message}`)}},Wo=class extends qS{static lc_name(){return"PromptTemplate"}constructor(e){if(super(e),Object.defineProperty(this,"template",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"templateFormat",{enumerable:!0,configurable:!0,writable:!0,value:"f-string"}),Object.defineProperty(this,"validateTemplate",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"additionalContentFields",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e.templateFormat==="mustache"&&e.validateTemplate===void 0&&(this.validateTemplate=!1),Object.assign(this,e),this.validateTemplate){if(this.templateFormat==="mustache")throw new Error("Mustache templates cannot be validated.");let t=this.inputVariables;this.partialVariables&&(t=t.concat(Object.keys(this.partialVariables))),$S(this.template,this.templateFormat,t)}}_getPromptType(){return"prompt"}async format(e){const t=await this.mergePartialAndUserVariables(e);return ji(this.template,this.templateFormat,t)}static fromExamples(e,t,n,r=`

`,o=""){const a=[o,...e,t].join(r);return new Wo({inputVariables:n,template:a})}static fromTemplate(e,t){const{templateFormat:n="f-string",...r}=t??{},o=new Set;return kD(e,n).forEach(a=>{a.type==="variable"&&o.add(a.name)}),new Wo({inputVariables:[...o],templateFormat:n,template:e,...r})}async partial(e){const t=this.inputVariables.filter(o=>!(o in e)),n={...this.partialVariables??{},...e},r={...this,inputVariables:t,partialVariables:n};return new Wo(r)}serialize(){if(this.outputParser!==void 0)throw new Error("Cannot serialize a prompt template with an output parser");return{_type:this._getPromptType(),input_variables:this.inputVariables,template:this.template,template_format:this.templateFormat}}static async deserialize(e){if(!e.template)throw new Error("Prompt template must have a template");return new Wo({inputVariables:e.input_variables,template:e.template,templateFormat:e.template_format})}};const PD=Object.freeze(Object.defineProperty({__proto__:null,PromptTemplate:Wo},Symbol.toStringTag,{value:"Module"})),Moe=()=>{const[e]=y.useState(!1),t=bi(a=>a.similaritySearchWithScore),{stream:n}=yy(),r=y.useCallback(async(a,i)=>{if(!(i!=null&&i.length))return[];const s=[];return await Promise.all(i.map(async c=>{var u,d,f,h;const l=c.placeholderEntity;if(l)switch(l.placeholder_type){case Oi.VECTOR_DATABASE_RETREIVER:{if(!c.promptNode||!c.promptEntity||!c.vectorDatabaseNode||!c.vectorDatabaseEntity)return;const g=(u=l.metadata)!=null&&u.k?+((d=l.metadata)==null?void 0:d.k):1;let m=(f=l.metadata)!=null&&f.minimalScore?+((h=l.metadata)==null?void 0:h.minimalScore):void 0;m&&m>1&&(m=m/100);const v=await t({databaseId:c.vectorDatabaseEntity.id},a,g);if(!v)return[];const b=new Wo({template:c.promptEntity.content,inputVariables:["context"]});s.push(new Ku(await b.format({context:m?v.filter(([,x])=>x>=m).map(([x])=>x.pageContent).join(`
`):v.map(([x])=>x.pageContent).join(`
`)})))}}})),s},[t]),o=y.useCallback(async(a,i,{retriverInfo:s},{schema:c,onMessageUpdate:l,onResponseMessageCreate:u,onInjectedMessages:d})=>{const f=[];s!=null&&s.length&&(f.push(...await r(a,s)),d==null||d(f));const h=i.map(m=>m.role==="system"?new S7(m.content):m.role==="user"?new Yu(m.content):new Ku(m.content));u==null||u();const{content:g}=await n(h,{schemas:c?[c]:void 0,onMessageUpdate:({content:m})=>{l==null||l({nodeData:{loading:!0,content:m}})}});return l==null||l({nodeData:{content:g}}),g},[r,n]);return{loading:e,sendMessage:o}},koe=ja(({onDelete:e})=>{const{t}=Me("dialogs"),[n,r]=y.useState(!1),o=Xt(),{toast:a}=$t(),i=async()=>{try{r(!0),await e(),o.hide()}catch{a({variant:"destructive",description:t("delete_chat_data_node.errors.delete_failed")})}finally{r(!1)}};return p.jsx(sM,{open:o.visible,onOpenChange:o.hide,children:p.jsxs(Og,{children:[p.jsxs(Ng,{children:[p.jsx(kg,{children:t("delete_chat_data_node.title")}),p.jsx(Pg,{children:t("delete_chat_data_node.description")})]}),p.jsxs(Mg,{children:[p.jsx(Tg,{onClick:o.hide,children:t("delete_chat_data_node.cancel")}),p.jsx(Ag,{disabled:n,onClick:i,children:t("delete_chat_data_node.delete")})]})]})})}),Poe=e=>{const t=(n,r=null)=>{let o=`{
`;return n.filter(a=>a.parent_id===r).forEach(a=>{if(a.type==="object"){const i=e.filter(c=>c.parent_id===a.id),s=t(i,a.id);o+=`  ${a.name}${a.required?"":"?"}: ${s}
`}else o+=`  // ${a.description||""}
  ${a.name}${a.required?"":"?"}: ${a.type};
`}),o+="}",o};return t(e)},AD=e=>{const t=(r,o=null)=>{let a="";return r.filter(i=>i.parent_id===o).forEach(i=>{if(i.type==="object"){const s=t(r,i.id);a+=`    ${i.name}: z.object({
${s}    })${i.required?"":".optional()"}.describe('${i.description||""}'),
`}else a+=`    ${i.name}: z.${i.type}()${i.required?"":".optional()"}.describe('${i.description||""}'),
`}),a};let n=`const schema = z.object({
`;return n+=t(e),n+="});",n};function rp(){return p.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",className:"text-foreground",children:[p.jsx("circle",{cx:"4",cy:"12",r:"2",fill:"currentColor",children:p.jsx("animate",{id:"spinner_qFRN",begin:"0;spinner_OcgL.end+0.25s",attributeName:"cy",calcMode:"spline",dur:"0.6s",values:"12;6;12",keySplines:".33,.66,.66,1;.33,0,.66,.33"})}),p.jsx("circle",{cx:"12",cy:"12",r:"2",fill:"currentColor",children:p.jsx("animate",{begin:"spinner_qFRN.begin+0.1s",attributeName:"cy",calcMode:"spline",dur:"0.6s",values:"12;6;12",keySplines:".33,.66,.66,1;.33,0,.66,.33"})}),p.jsx("circle",{cx:"20",cy:"12",r:"2",fill:"currentColor",children:p.jsx("animate",{id:"spinner_OcgL",begin:"spinner_qFRN.begin+0.2s",attributeName:"cy",calcMode:"spline",dur:"0.6s",values:"12;6;12",keySplines:".33,.66,.66,1;.33,0,.66,.33"})})]})}const Aoe=e=>y.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",fill:"none",height:192,viewBox:"0 0 150 150",width:192,...e},y.createElement("clipPath",{id:"a"},y.createElement("path",{d:"m0 0h150v150h-150z"})),y.createElement("g",{clipPath:"url(#a)"},y.createElement("path",{d:"m150 0h-150v150h150z",fill:"#29b5e8"}),y.createElement("path",{clipRule:"evenodd",d:"m130.375 67.2532-14.096 8.1221 14.096 8.0536c.843.4872 1.581 1.1357 2.174 1.9084.592.7727 1.026 1.6545 1.278 2.5951.251.9406.315 1.9215.188 2.8867-.128.9652-.444 1.8959-.931 2.7388-.488.843-1.136 1.5817-1.909 2.174s-1.654 1.0267-2.595 1.2782-1.921.3154-2.887.1878c-.965-.1275-1.896-.444-2.739-.9312l-25.2559-14.5496c-1.1575-.6696-2.1128-1.6394-2.765-2.8068-.6523-1.1674-.9773-2.4893-.9408-3.826.0198-.5792.1089-1.1538.2653-1.7117.517-1.8711 1.7458-3.4654 3.4234-4.4419l25.256-14.4983c.847-.4892 1.782-.8067 2.751-.9343.97-.1275 1.955-.0627 2.899.1909.945.2536 1.83.6909 2.605 1.287.775.596 1.425 1.3391 1.913 2.1866.49.8402.808 1.7693.935 2.7334.128.964.063 1.9439-.191 2.8826-.254.9388-.692 1.8177-1.288 2.5859-.597.7681-1.34 1.4101-2.186 1.8887zm-13.343 39.3698-25.2478-14.5243c-1.1296-.6483-2.4091-.9896-3.7115-.9902s-2.5823.3397-3.7124.987c-1.1301.6472-2.0712 1.579-2.7297 2.7026-.6585 1.1237-1.0115 2.4001-1.0239 3.7024v29.0135c.0654 1.928.8772 3.755 2.264 5.095 1.3869 1.341 3.2403 2.09 5.1691 2.09 1.9289 0 3.7823-.749 5.1691-2.09 1.3868-1.34 2.1986-3.167 2.264-5.095v-16.261l14.1301 8.122c.843.488 1.774.805 2.739.933.966.128 1.947.064 2.888-.187s1.823-.685 2.596-1.277c.774-.592 1.423-1.331 1.91-2.174.488-.843.805-1.773.933-2.739.128-.965.065-1.946-.186-2.887s-.685-1.824-1.277-2.597-1.331-1.422-2.174-1.91zm-29.0992-28.3806-10.527 10.3986c-.3601.3349-.8269.5319-1.318.5563h-3.0897c-.49-.0294-.9551-.2257-1.318-.5563l-10.4671-10.4329c-.3274-.3573-.521-.817-.5478-1.3009v-3.081c.0283-.4861.2215-.9481.5478-1.3095l10.4671-10.4329c.3637-.3281.829-.5214 1.318-.5477h3.0897c.4899.0228.9562.2166 1.318.5477l10.4928 10.4329c.3237.3623.514.8243.5392 1.3095v3.081c-.0237.483-.2143.9428-.5392 1.3009zm-8.3874-2.8928c-.0404-.499-.2485-.9696-.5905-1.3352l-3.0383-3.004c-.3641-.3275-.8291-.5207-1.318-.5478h-.1113c-.4867.0255-.9495.2191-1.3094.5478l-3.0383 3.004c-.3262.3676-.5165.8358-.5392 1.3266v.1113c.0215.4834.2124.9439.5392 1.3009l3.0554 2.9955c.3607.3274.823.5208 1.3094.5477h.1113c.4889-.027.9539-.2203 1.318-.5477l3.0383-3.0212c.3282-.3576.5244-.8166.5563-1.3009zm-47.4914-31.2217 25.2563 14.4811c1.1308.648 2.4115.989 3.7149.9889 1.3033 0 2.584-.3409 3.7148-.989 1.1309-.648 2.0725-1.5806 2.7314-2.7051.659-1.1245 1.0123-2.4018 1.0249-3.7051v-28.9879c-.0654-1.9277-.8772-3.7546-2.264-5.0952s-3.2402-2.0899-5.1691-2.0899c-1.9288 0-3.7822.7493-5.169 2.0899-1.3869 1.3406-2.1987 3.1675-2.2641 5.0952v16.2613l-14.1473-8.1307c-.8429-.4877-1.7737-.8047-2.7392-.9328-.9654-.1281-1.9466-.0647-2.8876.1864s-1.8232.6852-2.5965 1.2773c-.7732.5921-1.4222 1.3307-1.91 2.1736-.4878.843-.8048 1.7738-.9329 2.7392-.128.9655-.0647 1.9467.1864 2.8876.2512.941.6852 1.8233 1.2773 2.5965.5921.7733 1.3307 1.4223 2.1737 1.9101zm55.4252 15.4739c1.4914.118 2.9836-.2193 4.2793-.9671l25.2475-14.5496c.843-.4877 1.582-1.1368 2.174-1.91s1.026-1.6555 1.277-2.5965.315-1.9222.187-2.8876c-.128-.9655-.445-1.8962-.933-2.7392-.488-.8429-1.137-1.5816-1.91-2.1737-.774-.5921-1.656-1.0261-2.597-1.2772-1.9-.5072-3.924-.2387-5.627.7464l-14.1298 8.1991v-16.2613c-.0654-1.9277-.8772-3.7546-2.264-5.0952-1.3868-1.3405-3.2402-2.0899-5.1691-2.0899-1.9288 0-3.7822.7494-5.169 2.0899-1.3869 1.3406-2.1987 3.1675-2.2641 5.0952v29.0136c-.0023 1.8784.7086 3.6876 1.9892 5.0619 1.2805 1.3743 3.0351 2.2111 4.909 2.3412zm-25.8554 31.5298c-1.4916-.1213-2.9847.2162-4.2793.9671l-25.2905 14.4893c-1.7024.985-2.9438 2.607-3.451 4.507s-.2387 3.924.7465 5.627c.9851 1.702 2.6061 2.943 4.5065 3.451 1.9004.507 3.9244.238 5.6268-.747l14.1473-8.122v16.261c.0654 1.928.8772 3.755 2.2641 5.096 1.3868 1.34 3.2402 2.09 5.169 2.09 1.9289 0 3.7823-.75 5.1691-2.09 1.3868-1.341 2.1986-3.168 2.264-5.096v-29.0645c-.0038-1.869-.7144-3.6673-1.9891-5.0341s-3.0192-2.2009-4.8834-2.3348zm-6.8468-13.5825c.4875-1.6032.414-3.3247-.2083-4.8806-.6224-1.5559-1.7564-2.8532-3.2152-3.6779l-25.2306-14.541c-1.704-.976-3.7248-1.2385-5.6216-.7303-1.8968.5083-3.5155 1.7461-4.5032 3.4433-.4889.84-.8065 1.7686-.9343 2.732-.1278.9635-.0632 1.9428.1899 2.8811.2531.9384.6897 1.8173 1.2846 2.5858.595.7686 1.3364 1.4115 2.1814 1.8917l14.096 8.1221-14.096 8.0536c-.8429.4861-1.5819 1.1334-2.1746 1.9051-.5928.7717-1.0277 1.6526-1.2801 2.5923-.2523.9398-.317 1.9201-.1905 2.8849s.4418 1.8952.9279 2.7382c.4861.8429 1.1335 1.5819 1.9051 2.1746.7717.5928 1.6526 1.0277 2.5924 1.2801.9397.2523 1.92.317 2.8848.1905s1.8952-.4418 2.7382-.9279l25.2306-14.5496c1.6248-.9071 2.8451-2.3965 3.4149-4.168z",fill:"#fff",fillRule:"evenodd"}))),Toe=e=>y.createElement("svg",{className:"mr-2 w-5 h-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",width:48,height:48,...e},y.createElement("path",{fill:"#fbc02d",d:"M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12 s5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24s8.955,20,20,20 s20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"}),y.createElement("path",{fill:"#e53935",d:"M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039 l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"}),y.createElement("path",{fill:"#4caf50",d:"M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36 c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"}),y.createElement("path",{fill:"#1565c0",d:"M43.611,20.083L43.595,20L42,20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571 c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z"})),Roe=e=>y.createElement("svg",{className:"mr-2 w-5 h-5",width:1024,height:1024,viewBox:"0 0 1024 1024",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},y.createElement("path",{d:"M44.522 44.5217H489.739V489.739H44.522V44.5217Z",fill:"#F35325"}),y.createElement("path",{d:"M534.261 44.5217H979.478V489.739H534.261V44.5217Z",fill:"#81BC06"}),y.createElement("path",{d:"M44.522 534.261H489.739V979.478H44.522V534.261Z",fill:"#05A6F0"}),y.createElement("path",{d:"M534.261 534.261H979.478V979.478H534.261V534.261Z",fill:"#FFBA08"})),Ioe=e=>y.createElement("svg",{id:"Layer_1","data-name":"Layer 1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 287.56 191",...e},y.createElement("defs",null,y.createElement("style",null,".cls-1{fill:#0081fb;}.cls-2{fill:url(#linear-gradient);}.cls-3{fill:url(#linear-gradient-2);}"),y.createElement("linearGradient",{id:"linear-gradient",x1:62.34,y1:101.45,x2:260.34,y2:91.45,gradientTransform:"matrix(1, 0, 0, -1, 0, 192)",gradientUnits:"userSpaceOnUse"},y.createElement("stop",{offset:0,stopColor:"#0064e1"}),y.createElement("stop",{offset:.4,stopColor:"#0064e1"}),y.createElement("stop",{offset:.83,stopColor:"#0073ee"}),y.createElement("stop",{offset:1,stopColor:"#0082fb"})),y.createElement("linearGradient",{id:"linear-gradient-2",x1:41.42,y1:53,x2:41.42,y2:126,gradientTransform:"matrix(1, 0, 0, -1, 0, 192)",gradientUnits:"userSpaceOnUse"},y.createElement("stop",{offset:0,stopColor:"#0082fb"}),y.createElement("stop",{offset:1,stopColor:"#0064e0"}))),y.createElement("title",null,"facebook-meta"),y.createElement("path",{className:"cls-1",d:"M31.06,126c0,11,2.41,19.41,5.56,24.51A19,19,0,0,0,53.19,160c8.1,0,15.51-2,29.79-21.76,11.44-15.83,24.92-38,34-52l15.36-23.6c10.67-16.39,23-34.61,37.18-47C181.07,5.6,193.54,0,206.09,0c21.07,0,41.14,12.21,56.5,35.11,16.81,25.08,25,56.67,25,89.27,0,19.38-3.82,33.62-10.32,44.87C271,180.13,258.72,191,238.13,191V160c17.63,0,22-16.2,22-34.74,0-26.42-6.16-55.74-19.73-76.69-9.63-14.86-22.11-23.94-35.84-23.94-14.85,0-26.8,11.2-40.23,31.17-7.14,10.61-14.47,23.54-22.7,38.13l-9.06,16c-18.2,32.27-22.81,39.62-31.91,51.75C84.74,183,71.12,191,53.19,191c-21.27,0-34.72-9.21-43-23.09C3.34,156.6,0,141.76,0,124.85Z"}),y.createElement("path",{className:"cls-2",d:"M24.49,37.3C38.73,15.35,59.28,0,82.85,0c13.65,0,27.22,4,41.39,15.61,15.5,12.65,32,33.48,52.63,67.81l7.39,12.32c17.84,29.72,28,45,33.93,52.22,7.64,9.26,13,12,19.94,12,17.63,0,22-16.2,22-34.74l27.4-.86c0,19.38-3.82,33.62-10.32,44.87C271,180.13,258.72,191,238.13,191c-12.8,0-24.14-2.78-36.68-14.61-9.64-9.08-20.91-25.21-29.58-39.71L146.08,93.6c-12.94-21.62-24.81-37.74-31.68-45C107,40.71,97.51,31.23,82.35,31.23c-12.27,0-22.69,8.61-31.41,21.78Z"}),y.createElement("path",{className:"cls-3",d:"M82.35,31.23c-12.27,0-22.69,8.61-31.41,21.78C38.61,71.62,31.06,99.34,31.06,126c0,11,2.41,19.41,5.56,24.51L10.14,167.91C3.34,156.6,0,141.76,0,124.85,0,94.1,8.44,62.05,24.49,37.3,38.73,15.35,59.28,0,82.85,0Z"})),Doe=e=>y.createElement("svg",{className:"mr-2 w-5 h-5",width:256,height:233,viewBox:"0 0 256 233",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},y.createElement("path",{d:"M186.182 0h46.545v46.545h-46.545z"}),y.createElement("path",{fill:"#f7d046",d:"M209.455 0H256v46.545h-46.545z"}),y.createElement("path",{d:"M0 0h46.545v46.545H0zm0 46.545h46.545V93.09H0zm0 46.546h46.545v46.545H0zm0 46.545h46.545v46.545H0zm0 46.546h46.545v46.545H0z"}),y.createElement("path",{fill:"#f7d046",d:"M23.273 0h46.545v46.545H23.273z"}),y.createElement("path",{fill:"#f2a73b",d:"M209.455 46.545H256V93.09h-46.545zm-186.182 0h46.545V93.09H23.273z"}),y.createElement("path",{d:"M139.636 46.545h46.545V93.09h-46.545z"}),y.createElement("path",{fill:"#f2a73b",d:"M162.909 46.545h46.545V93.09h-46.545zm-93.091 0h46.545V93.09H69.818z"}),y.createElement("path",{fill:"#ee792f",d:"M116.364 93.091h46.545v46.545h-46.545zm46.545 0h46.545v46.545h-46.545zm-93.091 0h46.545v46.545H69.818z"}),y.createElement("path",{d:"M93.091 139.636h46.545v46.545H93.091z"}),y.createElement("path",{fill:"#eb5829",d:"M116.364 139.636h46.545v46.545h-46.545z"}),y.createElement("path",{fill:"#ee792f",d:"M209.455 93.091H256v46.545h-46.545zm-186.182 0h46.545v46.545H23.273z"}),y.createElement("path",{d:"M186.182 139.636h46.545v46.545h-46.545z"}),y.createElement("path",{fill:"#eb5829",d:"M209.455 139.636H256v46.545h-46.545z"}),y.createElement("path",{d:"M186.182 186.182h46.545v46.545h-46.545z"}),y.createElement("path",{fill:"#eb5829",d:"M23.273 139.636h46.545v46.545H23.273z"}),y.createElement("path",{fill:"#ea3326",d:"M209.455 186.182H256v46.545h-46.545zm-186.182 0h46.545v46.545H23.273z"})),Loe="/NoLLMChat/assets/qwen-B-gSh3_v.webp",Foe="/NoLLMChat/assets/smollm-CikBjd4F.png",Boe="/NoLLMChat/assets/stablelm-BquePdQ7.png",$oe="/NoLLMChat/assets/nomic-BjJqoFji.webp",zoe="/NoLLMChat/assets/joshua-ByaReJuI.webp",jo=y.memo(({name:e,className:t,...n})=>(e=e.toLowerCase(),e.includes("gemma")?p.jsx(Toe,{className:K("w-5 h-5",t),...n}):e!=null&&e.includes("qwen")?p.jsx("img",{className:K("w-5 h-5",t),src:Loe,alt:"qwen",...n}):e!=null&&e.includes("phi")?p.jsx(Roe,{className:K("w-5 h-5",t),...n}):e!=null&&e.includes("llama")?p.jsx(Ioe,{className:K("w-5 h-5",t),...n}):e!=null&&e.includes("smollm")?p.jsx("img",{className:K("w-5 h-5",t),src:Foe,alt:"smollm",...n}):e!=null&&e.includes("mistral")?p.jsx(Doe,{className:K("w-5 h-5",t),...n}):e!=null&&e.includes("snowflake")?p.jsx(Aoe,{className:K("w-5 h-5 rounded-full",t),...n}):e!=null&&e.includes("stablelm")?p.jsx("img",{className:K("w-5 h-5 rounded-full",t),src:Boe,alt:"stablelm",...n}):e!=null&&e.includes("nomic")?p.jsx("img",{className:K("w-5 h-5 rounded-full",t),src:$oe,alt:"nomic",...n}):e!=null&&e.includes("Xenova")||e!=null&&e.includes("janus")?p.jsx("img",{className:K("w-5 h-5 rounded-full",t),src:zoe,alt:"Xenova",...n}):p.jsx(le,{className:K("w-5 h-5",t),name:"brain"}))),Zx=["Qwen2.5-1.5B-Instruct-q4f32_1-MLC","Qwen2.5-Coder-1.5B-Instruct-q4f16_1-MLC","stablelm-2-zephyr-1_6b-q4f16_1-MLC-1k","Phi-3.5-mini-instruct-q4f16_1-MLC-1k","Llama-3.2-3B-Instruct-q4f32_1-MLC"],Dl=y.memo(e=>{var s;const{name:t,model:n,isCached:r,isFunctionCalling:o}=e,{t:a}=Me("atoms"),i=y.useCallback(c=>c===1?"llm_info.model_types.embedding":c===2?"llm_info.model_types.vlm":"llm_info.model_types.llm",[]);if(n)return p.jsxs(p.Fragment,{children:[p.jsx(on,{className:"",children:a(i(n.model_type))}),Zx.some(c=>t&&c.includes(t))?p.jsx(on,{className:"",variant:"outline",children:a("llm_info.recommended")}):null,r?p.jsx(on,{className:"",variant:"outline",children:a("llm_info.cached")}):null,o?p.jsx(on,{className:"",variant:"outline",children:a("llm_info.function_calling")}):null,n!=null&&n.low_resource_required?p.jsx(on,{className:"",variant:"outline",children:a("llm_info.low_resource_required")}):null,(s=n==null?void 0:n.overrides)!=null&&s.context_window_size?p.jsxs(on,{className:"",variant:"outline",children:[n.overrides.context_window_size.toLocaleString("en-US")," Tokens"]}):null,n!=null&&n.vram_required_MB?p.jsxs(on,{className:"",variant:"outline",children:["VRAM: ",n.vram_required_MB.toLocaleString("en-US")," MB"]}):null]})}),Tt=y.forwardRef(({className:e,...t},n)=>p.jsx("div",{ref:n,className:K("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));Tt.displayName="Card";const gn=y.forwardRef(({className:e,...t},n)=>p.jsx("div",{ref:n,className:K("flex flex-col space-y-1.5 p-6",e),...t}));gn.displayName="CardHeader";const Cn=y.forwardRef(({className:e,...t},n)=>p.jsx("h3",{ref:n,className:K("text-2xl font-semibold leading-none tracking-tight",e),...t}));Cn.displayName="CardTitle";const TD=y.forwardRef(({className:e,...t},n)=>p.jsx("p",{ref:n,className:K("text-sm text-muted-foreground",e),...t}));TD.displayName="CardDescription";const vn=y.forwardRef(({className:e,...t},n)=>p.jsx("div",{ref:n,className:K("p-6 pt-0",e),...t}));vn.displayName="CardContent";const oa=y.forwardRef(({className:e,...t},n)=>p.jsx("div",{ref:n,className:K("flex items-center p-6 pt-0",e),...t}));oa.displayName="CardFooter";const Voe=y.memo(({llm:e,status:t,loadLLM:n,progress:r})=>{const{t:o}=Me("flows"),[a,i]=y.useState();y.useEffect(()=>{a||!(e!=null&&e.name)||vt(()=>import("./index-CSFZaYIn.js").then(async l=>(await l.__tla,l)),__vite__mapDeps([3,1,2])).then(async({hasModelInCache:l,functionCallingModelIds:u,prebuiltAppConfig:d})=>{const f=await l(e==null?void 0:e.name);i({hasCache:f,isFunctionCalling:u.includes(e==null?void 0:e.name),info:d.model_list.find(h=>h.model_id===(e==null?void 0:e.name))})})},[e==null?void 0:e.name,a]);const s=y.useCallback(async()=>{await(n==null?void 0:n())},[n]),c=y.useMemo(()=>{switch(t){case Ye.Downloading:return p.jsx(le,{className:"animate-spin w-7 h-7",name:"arrow-big-down-dash"});case Ye.Loaded:return p.jsx(jo,{name:(e==null?void 0:e.name)||"brain",className:"w-7 h-7"});default:return p.jsx(jo,{name:(e==null?void 0:e.name)||"brain",className:"w-7 h-7"})}},[e==null?void 0:e.name,t]);return p.jsx(Tt,{className:"flex justify-center !bg-inherit !p-2 max-w-full overflow-y-hidden !mb-2 m-2 !mt-0",children:p.jsxs("div",{className:"ml-2 pt-1 max-w-full",children:[p.jsxs("p",{className:"flex gap-2 items-center pr-6 !text-sm font-semibold",children:[c,`${(e==null?void 0:e.name)||""}`]}),p.jsxs("div",{className:"max-w-full mt-2 flex-wrap flex gap-1",children:[p.jsx(Dl,{model:a==null?void 0:a.info,isFunctionCalling:(a==null?void 0:a.isFunctionCalling)||!1,name:e==null?void 0:e.name,isCached:(a==null?void 0:a.hasCache)||!1}),t!==Ye.Loaded?r?p.jsx("div",{className:"text-sm break-words flex-wrap",children:r}):p.jsx(ot,{disabled:t===Ye.Loading,onClick:s,className:"mt-4 w-full",children:o(a!=null&&a.hasCache?"llm_node.load_model_button":"llm_node.download_model_button")}):void 0]})]})})}),Uoe=e=>{const[t,n]=y.useState([]),r=Ze(i=>i.currentSession),o=y.useCallback(async()=>{if(!e||!(r!=null&&r.id))return;const i=await ce("FlowEdge").find({where:{session_id:r.id,source:e.id},order:{id:"DESC"}}),{flowNodes:s,flowNodeDatas:c}=await tp({where:{session_id:r.id,id:Ur(i.map(l=>l.target)),source_type:"JSONData"},order:{updated_at:"DESC"},select:["id","source_id","source_type","updated_at"]});n(s.reduce((l,u)=>{var f;const d=(f=c[u.source_type])==null?void 0:f.find(h=>h.id===u.source_id);return d&&l.push({node:u,entity:d}),l},[]))},[r==null?void 0:r.id,e]),a=y.useCallback(async i=>{await ce("FlowNode").delete(i.id),await ce("JSONData").delete(i.source_id);const s=await ce("FlowEdge").find({where:[{source:i.id},{target:i.id}]});await Promise.all(s.map(c=>ce("FlowEdge").delete(c.id))),o()},[o]);return y.useEffect(()=>{e&&o()},[o,e]),{chatList:t,deleteChat:a,getChatList:o}};class Hoe{async loadAndSplit(t){if(t===void 0)throw new Error("You must pass a text splitter to use this method.");const n=await this.load();return t.invoke(n)}}class RD extends Hoe{constructor(t,{splitPages:n=!0,pdfjs:r=Woe,parsedItemSeparator:o=""}={}){super(),Object.defineProperty(this,"blob",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"splitPages",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"pdfjs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"parsedItemSeparator",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.blob=t,this.splitPages=n??this.splitPages,this.pdfjs=r,this.parsedItemSeparator=o}async load(){const{getDocument:t,version:n}=await this.pdfjs(),r=await t({data:new Uint8Array(await this.blob.arrayBuffer()),useWorkerFetch:!1,isEvalSupported:!1,useSystemFonts:!0}).promise,o=await r.getMetadata().catch(()=>null),a=[];for(let i=1;i<=r.numPages;i+=1){const s=await(await r.getPage(i)).getTextContent();if(s.items.length===0)continue;let c;const l=[];for(const d of s.items)"str"in d&&(c===d.transform[5]||!c?l.push(d.str):l.push(`
${d.str}`),c=d.transform[5]);const u=l.join(this.parsedItemSeparator);a.push(new Xu({pageContent:u,metadata:{pdf:{version:n,info:o==null?void 0:o.info,metadata:o==null?void 0:o.metadata,totalPages:r.numPages},loc:{pageNumber:i}}}))}return this.splitPages?a:a.length===0?[]:[new Xu({pageContent:a.map(i=>i.pageContent).join(`

`),metadata:{pdf:{version:n,info:o==null?void 0:o.info,metadata:o==null?void 0:o.metadata,totalPages:r.numPages}}})]}}async function Woe(){try{const{default:e}=await vt(async()=>{const{default:r}=await import("./pdf-Tm18kJnX.js").then(async o=>(await o.__tla,o)).then(o=>o.p);return{default:r}},__vite__mapDeps([4,1,2])),{getDocument:t,version:n}=e;return{getDocument:t,version:n}}catch(e){throw console.error(e),new Error("Failed to load pdf-parse. Please install it with eg. `npm install pdf-parse`.")}}var Gx="Tabs",[qoe,Mje]=Pn(Gx,[Gr]),ID=Gr(),[Yoe,ew]=qoe(Gx),DD=y.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:o,defaultValue:a,orientation:i="horizontal",dir:s,activationMode:c="automatic",...l}=e,u=Ho(s),[d,f]=nn({prop:r,onChange:o,defaultProp:a});return p.jsx(Yoe,{scope:n,baseId:mt(),value:d,onValueChange:f,orientation:i,dir:u,activationMode:c,children:p.jsx(Ne.div,{dir:u,"data-orientation":i,...l,ref:t})})});DD.displayName=Gx;var LD="TabsList",FD=y.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...o}=e,a=ew(LD,n),i=ID(n);return p.jsx(vc,{asChild:!0,...i,orientation:a.orientation,dir:a.dir,loop:r,children:p.jsx(Ne.div,{role:"tablist","aria-orientation":a.orientation,...o,ref:t})})});FD.displayName=LD;var BD="TabsTrigger",$D=y.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:o=!1,...a}=e,i=ew(BD,n),s=ID(n),c=UD(i.baseId,r),l=HD(i.baseId,r),u=r===i.value;return p.jsx(bc,{asChild:!0,...s,focusable:!o,active:u,children:p.jsx(Ne.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":l,"data-state":u?"active":"inactive","data-disabled":o?"":void 0,disabled:o,id:c,...a,ref:t,onMouseDown:ye(e.onMouseDown,d=>{!o&&d.button===0&&d.ctrlKey===!1?i.onValueChange(r):d.preventDefault()}),onKeyDown:ye(e.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&i.onValueChange(r)}),onFocus:ye(e.onFocus,()=>{const d=i.activationMode!=="manual";!u&&!o&&d&&i.onValueChange(r)})})})});$D.displayName=BD;var zD="TabsContent",VD=y.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:o,children:a,...i}=e,s=ew(zD,n),c=UD(s.baseId,r),l=HD(s.baseId,r),u=r===s.value,d=y.useRef(u);return y.useEffect(()=>{const f=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(f)},[]),p.jsx(rr,{present:o||u,children:({present:f})=>p.jsx(Ne.div,{"data-state":u?"active":"inactive","data-orientation":s.orientation,role:"tabpanel","aria-labelledby":c,hidden:!f,id:l,tabIndex:0,...i,ref:t,style:{...e.style,animationDuration:d.current?"0s":void 0},children:f&&a})})});VD.displayName=zD;function UD(e,t){return`${e}-trigger-${t}`}function HD(e,t){return`${e}-content-${t}`}var Koe=DD,WD=FD,qD=$D,YD=VD;const tw=Koe,op=y.forwardRef(({className:e,...t},n)=>p.jsx(WD,{ref:n,className:K("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));op.displayName=WD.displayName;const br=y.forwardRef(({className:e,...t},n)=>p.jsx(qD,{ref:n,className:K("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));br.displayName=qD.displayName;const xr=y.forwardRef(({className:e,...t},n)=>p.jsx(YD,{ref:n,className:K("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));xr.displayName=YD.displayName,ry=function(e,[t,n]){return Math.min(n,Math.max(t,e))};function KD(e){const t=y.useRef({value:e,previous:e});return y.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var Xoe=[" ","Enter","ArrowUp","ArrowDown"],Qoe=[" ","Enter"],Ll="Select",[ap,ip,Joe]=qu(Ll),[ps,kje]=Pn(Ll,[Joe,Li]),sp=Li(),[Zoe,aa]=ps(Ll),[Goe,eae]=ps(Ll),XD=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:o,onOpenChange:a,value:i,defaultValue:s,onValueChange:c,dir:l,name:u,autoComplete:d,disabled:f,required:h,form:g}=e,m=sp(t),[v,b]=y.useState(null),[x,_]=y.useState(null),[w,j]=y.useState(!1),E=Ho(l),[S=!1,C]=nn({prop:r,defaultProp:o,onChange:a}),[M,N]=nn({prop:i,defaultProp:s,onChange:c}),P=y.useRef(null),R=v?g||!!v.closest("form"):!0,[A,O]=y.useState(new Set),k=Array.from(A).map(T=>T.props.value).join(";");return p.jsx(Fd,{...m,children:p.jsxs(Zoe,{required:h,scope:t,trigger:v,onTriggerChange:b,valueNode:x,onValueNodeChange:_,valueNodeHasChildren:w,onValueNodeHasChildrenChange:j,contentId:mt(),value:M,onValueChange:N,open:S,onOpenChange:C,dir:E,triggerPointerDownPosRef:P,disabled:f,children:[p.jsx(ap.Provider,{scope:t,children:p.jsx(Goe,{scope:e.__scopeSelect,onNativeOptionAdd:y.useCallback(T=>{O(D=>new Set(D).add(T))},[]),onNativeOptionRemove:y.useCallback(T=>{O(D=>{const I=new Set(D);return I.delete(T),I})},[]),children:n})}),R?p.jsxs(x3,{"aria-hidden":!0,required:h,tabIndex:-1,name:u,autoComplete:d,value:M,onChange:T=>N(T.target.value),disabled:f,form:g,children:[M===void 0?p.jsx("option",{value:""}):null,Array.from(A)]},k):null]})})};XD.displayName=Ll;var QD="SelectTrigger",JD=y.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...o}=e,a=sp(n),i=aa(QD,n),s=i.disabled||r,c=lt(t,i.onTriggerChange),l=ip(n),u=y.useRef("touch"),[d,f,h]=w3(m=>{const v=l().filter(_=>!_.disabled),b=v.find(_=>_.value===i.value),x=_3(v,m,b);x!==void 0&&i.onValueChange(x.value)}),g=m=>{s||(i.onOpenChange(!0),h()),m&&(i.triggerPointerDownPosRef.current={x:Math.round(m.pageX),y:Math.round(m.pageY)})};return p.jsx(hg,{asChild:!0,...a,children:p.jsx(Ne.button,{type:"button",role:"combobox","aria-controls":i.contentId,"aria-expanded":i.open,"aria-required":i.required,"aria-autocomplete":"none",dir:i.dir,"data-state":i.open?"open":"closed",disabled:s,"data-disabled":s?"":void 0,"data-placeholder":b3(i.value)?"":void 0,...o,ref:c,onClick:ye(o.onClick,m=>{m.currentTarget.focus(),u.current!=="mouse"&&g(m)}),onPointerDown:ye(o.onPointerDown,m=>{u.current=m.pointerType;const v=m.target;v.hasPointerCapture(m.pointerId)&&v.releasePointerCapture(m.pointerId),m.button===0&&m.ctrlKey===!1&&m.pointerType==="mouse"&&(g(m),m.preventDefault())}),onKeyDown:ye(o.onKeyDown,m=>{const v=d.current!=="";!(m.ctrlKey||m.altKey||m.metaKey)&&m.key.length===1&&f(m.key),!(v&&m.key===" ")&&Xoe.includes(m.key)&&(g(),m.preventDefault())})})})});JD.displayName=QD;var ZD="SelectValue",GD=y.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:o,children:a,placeholder:i="",...s}=e,c=aa(ZD,n),{onValueNodeHasChildrenChange:l}=c,u=a!==void 0,d=lt(t,c.onValueNodeChange);return Bt(()=>{l(u)},[l,u]),p.jsx(Ne.span,{...s,ref:d,style:{pointerEvents:"none"},children:b3(c.value)?p.jsx(p.Fragment,{children:i}):a})});GD.displayName=ZD;var tae="SelectIcon",e3=y.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...o}=e;return p.jsx(Ne.span,{"aria-hidden":!0,...o,ref:t,children:r||"\u25BC"})});e3.displayName=tae;var nae="SelectPortal",t3=e=>p.jsx(um,{asChild:!0,...e});t3.displayName=nae;var Xa="SelectContent",n3=y.forwardRef((e,t)=>{const n=aa(Xa,e.__scopeSelect),[r,o]=y.useState();if(Bt(()=>{o(new DocumentFragment)},[]),!n.open){const a=r;return a?cc.createPortal(p.jsx(r3,{scope:e.__scopeSelect,children:p.jsx(ap.Slot,{scope:e.__scopeSelect,children:p.jsx("div",{children:e.children})})}),a):null}return p.jsx(o3,{...e,ref:t})});n3.displayName=Xa;var wr=10,[r3,ia]=ps(Xa),rae="SelectContentImpl",o3=y.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:o,onEscapeKeyDown:a,onPointerDownOutside:i,side:s,sideOffset:c,align:l,alignOffset:u,arrowPadding:d,collisionBoundary:f,collisionPadding:h,sticky:g,hideWhenDetached:m,avoidCollisions:v,...b}=e,x=aa(Xa,n),[_,w]=y.useState(null),[j,E]=y.useState(null),S=lt(t,G=>w(G)),[C,M]=y.useState(null),[N,P]=y.useState(null),R=ip(n),[A,O]=y.useState(!1),k=y.useRef(!1);y.useEffect(()=>{if(_)return wc(_)},[_]),_c();const T=y.useCallback(G=>{const[q,...W]=R().map($=>$.ref.current),[Z]=W.slice(-1),ee=document.activeElement;for(const $ of G)if($===ee||($==null||$.scrollIntoView({block:"nearest"}),$===q&&j&&(j.scrollTop=0),$===Z&&j&&(j.scrollTop=j.scrollHeight),$==null||$.focus(),document.activeElement!==ee))return},[R,j]),D=y.useCallback(()=>T([C,_]),[T,C,_]);y.useEffect(()=>{A&&D()},[A,D]);const{onOpenChange:I,triggerPointerDownPosRef:L}=x;y.useEffect(()=>{if(_){let G={x:0,y:0};const q=Z=>{var ee,$;G={x:Math.abs(Math.round(Z.pageX)-(((ee=L.current)==null?void 0:ee.x)??0)),y:Math.abs(Math.round(Z.pageY)-((($=L.current)==null?void 0:$.y)??0))}},W=Z=>{G.x<=10&&G.y<=10?Z.preventDefault():_.contains(Z.target)||I(!1),document.removeEventListener("pointermove",q),L.current=null};return L.current!==null&&(document.addEventListener("pointermove",q),document.addEventListener("pointerup",W,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",q),document.removeEventListener("pointerup",W,{capture:!0})}}},[_,I,L]),y.useEffect(()=>{const G=()=>I(!1);return window.addEventListener("blur",G),window.addEventListener("resize",G),()=>{window.removeEventListener("blur",G),window.removeEventListener("resize",G)}},[I]);const[B,V]=w3(G=>{const q=R().filter(ee=>!ee.disabled),W=q.find(ee=>ee.ref.current===document.activeElement),Z=_3(q,G,W);Z&&setTimeout(()=>Z.ref.current.focus())}),F=y.useCallback((G,q,W)=>{const Z=!k.current&&!W;(x.value!==void 0&&x.value===q||Z)&&(M(G),Z&&(k.current=!0))},[x.value]),H=y.useCallback(()=>_==null?void 0:_.focus(),[_]),Q=y.useCallback((G,q,W)=>{const Z=!k.current&&!W;(x.value!==void 0&&x.value===q||Z)&&P(G)},[x.value]),Y=r==="popper"?nw:a3,re=Y===nw?{side:s,sideOffset:c,align:l,alignOffset:u,arrowPadding:d,collisionBoundary:f,collisionPadding:h,sticky:g,hideWhenDetached:m,avoidCollisions:v}:{};return p.jsx(r3,{scope:n,content:_,viewport:j,onViewportChange:E,itemRefCallback:F,selectedItem:C,onItemLeave:H,itemTextRefCallback:Q,focusSelectedItem:D,selectedItemText:N,position:r,isPositioned:A,searchRef:B,children:p.jsx(Cd,{as:Uo,allowPinchZoom:!0,children:p.jsx(vd,{asChild:!0,trapped:x.open,onMountAutoFocus:G=>{G.preventDefault()},onUnmountAutoFocus:ye(o,G=>{var q;(q=x.trigger)==null||q.focus({preventScroll:!0}),G.preventDefault()}),children:p.jsx(lm,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:i,onFocusOutside:G=>G.preventDefault(),onDismiss:()=>x.onOpenChange(!1),children:p.jsx(Y,{role:"listbox",id:x.contentId,"data-state":x.open?"open":"closed",dir:x.dir,onContextMenu:G=>G.preventDefault(),...b,...re,onPlaced:()=>O(!0),ref:S,style:{display:"flex",flexDirection:"column",outline:"none",...b.style},onKeyDown:ye(b.onKeyDown,G=>{const q=G.ctrlKey||G.altKey||G.metaKey;if(G.key==="Tab"&&G.preventDefault(),!q&&G.key.length===1&&V(G.key),["ArrowUp","ArrowDown","Home","End"].includes(G.key)){let W=R().filter(Z=>!Z.disabled).map(Z=>Z.ref.current);if(["ArrowUp","End"].includes(G.key)&&(W=W.slice().reverse()),["ArrowUp","ArrowDown"].includes(G.key)){const Z=G.target,ee=W.indexOf(Z);W=W.slice(ee+1)}setTimeout(()=>T(W)),G.preventDefault()}})})})})})})});o3.displayName=rae;var oae="SelectItemAlignedPosition",a3=y.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...o}=e,a=aa(Xa,n),i=ia(Xa,n),[s,c]=y.useState(null),[l,u]=y.useState(null),d=lt(t,S=>u(S)),f=ip(n),h=y.useRef(!1),g=y.useRef(!0),{viewport:m,selectedItem:v,selectedItemText:b,focusSelectedItem:x}=i,_=y.useCallback(()=>{if(a.trigger&&a.valueNode&&s&&l&&m&&v&&b){const S=a.trigger.getBoundingClientRect(),C=l.getBoundingClientRect(),M=a.valueNode.getBoundingClientRect(),N=b.getBoundingClientRect();if(a.dir!=="rtl"){const Z=N.left-C.left,ee=M.left-Z,$=S.left-ee,ie=S.width+$,ue=Math.max(ie,C.width),me=window.innerWidth-wr,Te=ry(ee,[wr,Math.max(wr,me-ue)]);s.style.minWidth=ie+"px",s.style.left=Te+"px"}else{const Z=C.right-N.right,ee=window.innerWidth-M.right-Z,$=window.innerWidth-S.right-ee,ie=S.width+$,ue=Math.max(ie,C.width),me=window.innerWidth-wr,Te=ry(ee,[wr,Math.max(wr,me-ue)]);s.style.minWidth=ie+"px",s.style.right=Te+"px"}const P=f(),R=window.innerHeight-wr*2,A=m.scrollHeight,O=window.getComputedStyle(l),k=parseInt(O.borderTopWidth,10),T=parseInt(O.paddingTop,10),D=parseInt(O.borderBottomWidth,10),I=parseInt(O.paddingBottom,10),L=k+T+A+I+D,B=Math.min(v.offsetHeight*5,L),V=window.getComputedStyle(m),F=parseInt(V.paddingTop,10),H=parseInt(V.paddingBottom,10),Q=S.top+S.height/2-wr,Y=R-Q,re=v.offsetHeight/2,G=v.offsetTop+re,q=k+T+G,W=L-q;if(q<=Q){const Z=P.length>0&&v===P[P.length-1].ref.current;s.style.bottom="0px";const ee=l.clientHeight-m.offsetTop-m.offsetHeight,$=Math.max(Y,re+(Z?H:0)+ee+D),ie=q+$;s.style.height=ie+"px"}else{const Z=P.length>0&&v===P[0].ref.current;s.style.top="0px";const ee=Math.max(Q,k+m.offsetTop+(Z?F:0)+re)+W;s.style.height=ee+"px",m.scrollTop=q-Q+m.offsetTop}s.style.margin=`${wr}px 0`,s.style.minHeight=B+"px",s.style.maxHeight=R+"px",r==null||r(),requestAnimationFrame(()=>h.current=!0)}},[f,a.trigger,a.valueNode,s,l,m,v,b,a.dir,r]);Bt(()=>_(),[_]);const[w,j]=y.useState();Bt(()=>{l&&j(window.getComputedStyle(l).zIndex)},[l]);const E=y.useCallback(S=>{S&&g.current===!0&&(_(),x==null||x(),g.current=!1)},[_,x]);return p.jsx(iae,{scope:n,contentWrapper:s,shouldExpandOnScrollRef:h,onScrollButtonChange:E,children:p.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:w},children:p.jsx(Ne.div,{...o,ref:d,style:{boxSizing:"border-box",maxHeight:"100%",...o.style}})})})});a3.displayName=oae;var aae="SelectPopperPosition",nw=y.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:o=wr,...a}=e,i=sp(n);return p.jsx(mg,{...i,...a,ref:t,align:r,collisionPadding:o,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});nw.displayName=aae;var[iae,rw]=ps(Xa,{}),ow="SelectViewport",i3=y.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:r,...o}=e,a=ia(ow,n),i=rw(ow,n),s=lt(t,a.onViewportChange),c=y.useRef(0);return p.jsxs(p.Fragment,{children:[p.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),p.jsx(ap.Slot,{scope:n,children:p.jsx(Ne.div,{"data-radix-select-viewport":"",role:"presentation",...o,ref:s,style:{position:"relative",flex:1,overflow:"hidden auto",...o.style},onScroll:ye(o.onScroll,l=>{const u=l.currentTarget,{contentWrapper:d,shouldExpandOnScrollRef:f}=i;if(f!=null&&f.current&&d){const h=Math.abs(c.current-u.scrollTop);if(h>0){const g=window.innerHeight-wr*2,m=parseFloat(d.style.minHeight),v=parseFloat(d.style.height),b=Math.max(m,v);if(b<g){const x=b+h,_=Math.min(g,x),w=x-_;d.style.height=_+"px",d.style.bottom==="0px"&&(u.scrollTop=w>0?w:0,d.style.justifyContent="flex-end")}}}c.current=u.scrollTop})})})]})});i3.displayName=ow;var s3="SelectGroup",[sae,cae]=ps(s3),lae=y.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,o=mt();return p.jsx(sae,{scope:n,id:o,children:p.jsx(Ne.div,{role:"group","aria-labelledby":o,...r,ref:t})})});lae.displayName=s3;var c3="SelectLabel",l3=y.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,o=cae(c3,n);return p.jsx(Ne.div,{id:o.id,...r,ref:t})});l3.displayName=c3;var cp="SelectItem",[uae,u3]=ps(cp),d3=y.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:o=!1,textValue:a,...i}=e,s=aa(cp,n),c=ia(cp,n),l=s.value===r,[u,d]=y.useState(a??""),[f,h]=y.useState(!1),g=lt(t,x=>{var _;return(_=c.itemRefCallback)==null?void 0:_.call(c,x,r,o)}),m=mt(),v=y.useRef("touch"),b=()=>{o||(s.onValueChange(r),s.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return p.jsx(uae,{scope:n,value:r,disabled:o,textId:m,isSelected:l,onItemTextChange:y.useCallback(x=>{d(_=>_||((x==null?void 0:x.textContent)??"").trim())},[]),children:p.jsx(ap.ItemSlot,{scope:n,value:r,disabled:o,textValue:u,children:p.jsx(Ne.div,{role:"option","aria-labelledby":m,"data-highlighted":f?"":void 0,"aria-selected":l&&f,"data-state":l?"checked":"unchecked","aria-disabled":o||void 0,"data-disabled":o?"":void 0,tabIndex:o?void 0:-1,...i,ref:g,onFocus:ye(i.onFocus,()=>h(!0)),onBlur:ye(i.onBlur,()=>h(!1)),onClick:ye(i.onClick,()=>{v.current!=="mouse"&&b()}),onPointerUp:ye(i.onPointerUp,()=>{v.current==="mouse"&&b()}),onPointerDown:ye(i.onPointerDown,x=>{v.current=x.pointerType}),onPointerMove:ye(i.onPointerMove,x=>{var _;v.current=x.pointerType,o?(_=c.onItemLeave)==null||_.call(c):v.current==="mouse"&&x.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ye(i.onPointerLeave,x=>{var _;x.currentTarget===document.activeElement&&((_=c.onItemLeave)==null||_.call(c))}),onKeyDown:ye(i.onKeyDown,x=>{var _;((_=c.searchRef)==null?void 0:_.current)!==""&&x.key===" "||(Qoe.includes(x.key)&&b(),x.key===" "&&x.preventDefault())})})})})});d3.displayName=cp;var Fl="SelectItemText",f3=y.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:o,...a}=e,i=aa(Fl,n),s=ia(Fl,n),c=u3(Fl,n),l=eae(Fl,n),[u,d]=y.useState(null),f=lt(t,b=>d(b),c.onItemTextChange,b=>{var x;return(x=s.itemTextRefCallback)==null?void 0:x.call(s,b,c.value,c.disabled)}),h=u==null?void 0:u.textContent,g=y.useMemo(()=>p.jsx("option",{value:c.value,disabled:c.disabled,children:h},c.value),[c.disabled,c.value,h]),{onNativeOptionAdd:m,onNativeOptionRemove:v}=l;return Bt(()=>(m(g),()=>v(g)),[m,v,g]),p.jsxs(p.Fragment,{children:[p.jsx(Ne.span,{id:c.textId,...a,ref:f}),c.isSelected&&i.valueNode&&!i.valueNodeHasChildren?cc.createPortal(a.children,i.valueNode):null]})});f3.displayName=Fl;var p3="SelectItemIndicator",h3=y.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return u3(p3,n).isSelected?p.jsx(Ne.span,{"aria-hidden":!0,...r,ref:t}):null});h3.displayName=p3;var aw="SelectScrollUpButton",m3=y.forwardRef((e,t)=>{const n=ia(aw,e.__scopeSelect),r=rw(aw,e.__scopeSelect),[o,a]=y.useState(!1),i=lt(t,r.onScrollButtonChange);return Bt(()=>{if(n.viewport&&n.isPositioned){let s=function(){const l=c.scrollTop>0;a(l)};const c=n.viewport;return s(),c.addEventListener("scroll",s),()=>c.removeEventListener("scroll",s)}},[n.viewport,n.isPositioned]),o?p.jsx(g3,{...e,ref:i,onAutoScroll:()=>{const{viewport:s,selectedItem:c}=n;s&&c&&(s.scrollTop=s.scrollTop-c.offsetHeight)}}):null});m3.displayName=aw;var iw="SelectScrollDownButton",y3=y.forwardRef((e,t)=>{const n=ia(iw,e.__scopeSelect),r=rw(iw,e.__scopeSelect),[o,a]=y.useState(!1),i=lt(t,r.onScrollButtonChange);return Bt(()=>{if(n.viewport&&n.isPositioned){let s=function(){const l=c.scrollHeight-c.clientHeight,u=Math.ceil(c.scrollTop)<l;a(u)};const c=n.viewport;return s(),c.addEventListener("scroll",s),()=>c.removeEventListener("scroll",s)}},[n.viewport,n.isPositioned]),o?p.jsx(g3,{...e,ref:i,onAutoScroll:()=>{const{viewport:s,selectedItem:c}=n;s&&c&&(s.scrollTop=s.scrollTop+c.offsetHeight)}}):null});y3.displayName=iw;var g3=y.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...o}=e,a=ia("SelectScrollButton",n),i=y.useRef(null),s=ip(n),c=y.useCallback(()=>{i.current!==null&&(window.clearInterval(i.current),i.current=null)},[]);return y.useEffect(()=>()=>c(),[c]),Bt(()=>{var l,u;(u=(l=s().find(d=>d.ref.current===document.activeElement))==null?void 0:l.ref.current)==null||u.scrollIntoView({block:"nearest"})},[s]),p.jsx(Ne.div,{"aria-hidden":!0,...o,ref:t,style:{flexShrink:0,...o.style},onPointerDown:ye(o.onPointerDown,()=>{i.current===null&&(i.current=window.setInterval(r,50))}),onPointerMove:ye(o.onPointerMove,()=>{var l;(l=a.onItemLeave)==null||l.call(a),i.current===null&&(i.current=window.setInterval(r,50))}),onPointerLeave:ye(o.onPointerLeave,()=>{c()})})}),dae="SelectSeparator",v3=y.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return p.jsx(Ne.div,{"aria-hidden":!0,...r,ref:t})});v3.displayName=dae;var sw="SelectArrow",fae=y.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,o=sp(n),a=aa(sw,n),i=ia(sw,n);return a.open&&i.position==="popper"?p.jsx(yg,{...o,...r,ref:t}):null});fae.displayName=sw;function b3(e){return e===""||e===void 0}var x3=y.forwardRef((e,t)=>{const{value:n,...r}=e,o=y.useRef(null),a=lt(t,o),i=KD(n);return y.useEffect(()=>{const s=o.current,c=window.HTMLSelectElement.prototype,l=Object.getOwnPropertyDescriptor(c,"value").set;if(i!==n&&l){const u=new Event("change",{bubbles:!0});l.call(s,n),s.dispatchEvent(u)}},[i,n]),p.jsx(oje,{asChild:!0,children:p.jsx("select",{...r,ref:a,defaultValue:n})})});x3.displayName="BubbleSelect";function w3(e){const t=An(e),n=y.useRef(""),r=y.useRef(0),o=y.useCallback(i=>{const s=n.current+i;t(s),function c(l){n.current=l,window.clearTimeout(r.current),l!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(s)},[t]),a=y.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return y.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,o,a]}function _3(e,t,n){const r=t.length>1&&Array.from(t).every(s=>s===t[0])?t[0]:t,o=n?e.indexOf(n):-1;let a=pae(e,Math.max(o,0));r.length===1&&(a=a.filter(s=>s!==n));const i=a.find(s=>s.textValue.toLowerCase().startsWith(r.toLowerCase()));return i!==n?i:void 0}function pae(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var hae=XD,j3=JD,mae=GD,yae=e3,gae=t3,E3=n3,vae=i3,S3=l3,C3=d3,bae=f3,xae=h3,O3=m3,N3=y3,M3=v3;const Eo=hae,So=mae,Hr=y.forwardRef(({className:e,children:t,...n},r)=>p.jsxs(j3,{ref:r,className:K("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...n,children:[t,p.jsx(yae,{asChild:!0,children:p.jsx(le,{name:"chevron-down",className:"h-4 w-4 opacity-50"})})]}));Hr.displayName=j3.displayName;const k3=y.forwardRef(({className:e,...t},n)=>p.jsx(O3,{ref:n,className:K("flex cursor-default items-center justify-center py-1",e),...t,children:p.jsx(le,{name:"chevron-up",className:"h-4 w-4"})}));k3.displayName=O3.displayName;const P3=y.forwardRef(({className:e,...t},n)=>p.jsx(N3,{ref:n,className:K("flex cursor-default items-center justify-center py-1",e),...t,children:p.jsx(le,{name:"chevron-down",className:"h-4 w-4"})}));P3.displayName=N3.displayName;const Wr=y.forwardRef(({className:e,children:t,position:n="popper",...r},o)=>p.jsx(gae,{children:p.jsxs(E3,{ref:o,className:K("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[p.jsx(k3,{}),p.jsx(vae,{className:K("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),p.jsx(P3,{})]})}));Wr.displayName=E3.displayName;const wae=y.forwardRef(({className:e,...t},n)=>p.jsx(S3,{ref:n,className:K("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));wae.displayName=S3.displayName;const On=y.forwardRef(({className:e,children:t,...n},r)=>p.jsxs(C3,{ref:r,className:K("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[p.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:p.jsx(xae,{children:p.jsx(le,{name:"check",className:"h-4 w-4"})})}),p.jsx(bae,{children:t})]}));On.displayName=C3.displayName;const _ae=y.forwardRef(({className:e,...t},n)=>p.jsx(M3,{ref:n,className:K("-mx-1 my-1 h-px bg-muted",e),...t}));_ae.displayName=M3.displayName;var Co="Accordion",jae=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[cw,Eae,Sae]=qu(Co),[lp,Pje]=Pn(Co,[Sae,eO]),lw=eO(),A3=U.forwardRef((e,t)=>{const{type:n,...r}=e,o=r,a=r;return p.jsx(cw.Provider,{scope:e.__scopeAccordion,children:n==="multiple"?p.jsx(Mae,{...a,ref:t}):p.jsx(Nae,{...o,ref:t})})});A3.displayName=Co;var[T3,Cae]=lp(Co),[R3,Oae]=lp(Co,{collapsible:!1}),Nae=U.forwardRef((e,t)=>{const{value:n,defaultValue:r,onValueChange:o=()=>{},collapsible:a=!1,...i}=e,[s,c]=nn({prop:n,defaultProp:r,onChange:o});return p.jsx(T3,{scope:e.__scopeAccordion,value:s?[s]:[],onItemOpen:c,onItemClose:U.useCallback(()=>a&&c(""),[a,c]),children:p.jsx(R3,{scope:e.__scopeAccordion,collapsible:a,children:p.jsx(I3,{...i,ref:t})})})}),Mae=U.forwardRef((e,t)=>{const{value:n,defaultValue:r,onValueChange:o=()=>{},...a}=e,[i=[],s]=nn({prop:n,defaultProp:r,onChange:o}),c=U.useCallback(u=>s((d=[])=>[...d,u]),[s]),l=U.useCallback(u=>s((d=[])=>d.filter(f=>f!==u)),[s]);return p.jsx(T3,{scope:e.__scopeAccordion,value:i,onItemOpen:c,onItemClose:l,children:p.jsx(R3,{scope:e.__scopeAccordion,collapsible:!0,children:p.jsx(I3,{...a,ref:t})})})}),[kae,up]=lp(Co),I3=U.forwardRef((e,t)=>{const{__scopeAccordion:n,disabled:r,dir:o,orientation:a="vertical",...i}=e,s=U.useRef(null),c=lt(s,t),l=Eae(n),u=Ho(o)==="ltr",d=ye(e.onKeyDown,f=>{var S;if(!jae.includes(f.key))return;const h=f.target,g=l().filter(C=>{var M;return!((M=C.ref.current)!=null&&M.disabled)}),m=g.findIndex(C=>C.ref.current===h),v=g.length;if(m===-1)return;f.preventDefault();let b=m;const x=0,_=v-1,w=()=>{b=m+1,b>_&&(b=x)},j=()=>{b=m-1,b<x&&(b=_)};switch(f.key){case"Home":b=x;break;case"End":b=_;break;case"ArrowRight":a==="horizontal"&&(u?w():j());break;case"ArrowDown":a==="vertical"&&w();break;case"ArrowLeft":a==="horizontal"&&(u?j():w());break;case"ArrowUp":a==="vertical"&&j();break}const E=b%v;(S=g[E].ref.current)==null||S.focus()});return p.jsx(kae,{scope:n,disabled:r,direction:o,orientation:a,children:p.jsx(cw.Slot,{scope:n,children:p.jsx(Ne.div,{...i,"data-orientation":a,ref:c,onKeyDown:r?void 0:d})})})}),dp="AccordionItem",[Pae,uw]=lp(dp),D3=U.forwardRef((e,t)=>{const{__scopeAccordion:n,value:r,...o}=e,a=up(dp,n),i=Cae(dp,n),s=lw(n),c=mt(),l=r&&i.value.includes(r)||!1,u=a.disabled||e.disabled;return p.jsx(Pae,{scope:n,open:l,disabled:u,triggerId:c,children:p.jsx(rO,{"data-orientation":a.orientation,"data-state":V3(l),...s,...o,ref:t,disabled:u,open:l,onOpenChange:d=>{d?i.onItemOpen(r):i.onItemClose(r)}})})});D3.displayName=dp;var L3="AccordionHeader",F3=U.forwardRef((e,t)=>{const{__scopeAccordion:n,...r}=e,o=up(Co,n),a=uw(L3,n);return p.jsx(Ne.h3,{"data-orientation":o.orientation,"data-state":V3(a.open),"data-disabled":a.disabled?"":void 0,...r,ref:t})});F3.displayName=L3;var dw="AccordionTrigger",B3=U.forwardRef((e,t)=>{const{__scopeAccordion:n,...r}=e,o=up(Co,n),a=uw(dw,n),i=Oae(dw,n),s=lw(n);return p.jsx(cw.ItemSlot,{scope:n,children:p.jsx(eH,{"aria-disabled":a.open&&!i.collapsible||void 0,"data-orientation":o.orientation,id:a.triggerId,...s,...r,ref:t})})});B3.displayName=dw;var $3="AccordionContent",z3=U.forwardRef((e,t)=>{const{__scopeAccordion:n,...r}=e,o=up(Co,n),a=uw($3,n),i=lw(n);return p.jsx(tH,{role:"region","aria-labelledby":a.triggerId,"data-orientation":o.orientation,...i,...r,ref:t,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...e.style}})});z3.displayName=$3;function V3(e){return e?"open":"closed"}let U3;VS=A3,US=D3,U3=F3,oy=B3,ay=z3;const H3=VS,fw=y.forwardRef(({className:e,...t},n)=>p.jsx(US,{ref:n,className:K("border-b",e),...t}));fw.displayName="AccordionItem";const pw=y.forwardRef(({className:e,children:t,...n},r)=>p.jsx(U3,{className:"flex",children:p.jsxs(oy,{ref:r,className:K("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",e),...n,children:[t,p.jsx(le,{name:"chevron-down",className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));pw.displayName=oy.displayName;const hw=y.forwardRef(({className:e,children:t,...n},r)=>p.jsx(ay,{ref:r,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...n,children:p.jsx("div",{className:K("pb-4 pt-0",e),children:t})}));hw.displayName=ay.displayName;const Aae=[1,2,3,4,5,6,7,8,9,10],W3=y.memo(e=>{const{t}=Me("flows"),[n,r]=y.useState(""),[o,a]=y.useState([]),[i,s]=y.useState("1"),{loading:c,onSimilaritySearch:l,onCreatePrompt:u,onCreateRetriever:d}=e,f=async()=>{a(await l(n,+i)),r("")},h=async g=>{g.key==="Enter"&&!g.shiftKey&&(g.preventDefault(),f())};return p.jsxs("div",{className:"mt-4 max-w-full",children:[p.jsx("div",{className:"bg-black/5 dark:bg-white/5 rounded-xl relative",children:p.jsxs("div",{className:"relative px-2 py-1 pb-2",children:[p.jsxs(Eo,{value:`${i}`,onValueChange:g=>s(g),children:[p.jsx(Hr,{className:"absolute left-0 !w-14 top-[2px] rounded-xl bg-transparent border-none focus:outline-none focus:ring-0 focus:border-opacity-0 focus:ring-transparent",children:p.jsx(So,{placeholder:t("vector_database_node.k_select_placeholder")})}),p.jsx(Wr,{children:Aae.map(g=>p.jsx(On,{value:`${g}`,children:g},`${g}`))})]}),p.jsx(ho,{value:n,disabled:c,placeholder:t("vector_database_node.similarity_search_placeholder"),className:K("w-full rounded-xl px-2 pl-11 border-none resize-none bg-transparent","min-h-8 max-h-8"),onKeyDown:h,onChange:g=>{r(g.target.value)}}),p.jsx("button",{type:"button",disabled:c,onClick:f,className:"absolute right-3 top-5 -translate-y-1/2 rounded-xl bg-black/5 dark:bg-white/5 p-1",children:p.jsx(le,{name:c?"loader-circle":"arrow-right",className:K("w-4 h-4 dark:text-white",n?"opacity-100":"opacity-30",c?"animate-spin":"")})})]})}),p.jsx(H3,{type:"single",collapsible:!0,children:o==null?void 0:o.map(([g,m],v)=>p.jsxs(fw,{value:`${v}`,children:[p.jsxs(pw,{children:[`[${m.toFixed(2)}] ${g.pageContent}`.substring(0,32),"..."]}),p.jsx(hw,{children:g.pageContent})]},`${v}`))}),p.jsxs("div",{className:"w-full mt-4 flex flex-col gap-1",children:[d?p.jsx(ot,{disabled:c,onClick:d,className:"w-full",children:t("vector_database_node.to_retriever")}):void 0,o!=null&&o.length&&u?p.jsx(ot,{disabled:c,onClick:()=>u(o),className:"w-full",children:t("vector_database_node.create_prompt")}):void 0]})]})}),q3=y.memo(({loading:e,onCreateData:t})=>{const{t:n}=Me("flows"),[r,o]=y.useState(""),[a,i]=y.useState(""),s=async()=>{a&&(await t({id:r,content:a}),o(""),i(""))};return p.jsxs("div",{className:"min-w-80",children:[p.jsxs("div",{className:"flex flex-col space-y-1.5 mt-3",children:[p.jsx(Je,{htmlFor:"name",children:n("vector_database_node.add_text.id")}),p.jsx(hn,{value:r,disabled:e,onChange:c=>o(c.target.value||""),placeholder:n("vector_database_node.add_text.id_placeholder"),className:"mb-4"}),p.jsxs(Je,{htmlFor:"name",children:[n("vector_database_node.add_text.content")," ",p.jsx("span",{className:"text-red-600",children:"*"})]}),p.jsx(ho,{value:a,disabled:e,onChange:c=>i(c.target.value||""),placeholder:n("vector_database_node.add_text.content_placeholder")})]}),p.jsx("div",{className:"flex justify-between mt-6",children:p.jsx(jn,{loading:e,disabled:!(a!=null&&a.length),onClick:s,className:"w-full",children:n("vector_database_node.add_text.add")})})]})}),mw=({className:e,size:t=200,duration:n=15,anchor:r=90,borderWidth:o=1.5,colorFrom:a="#ffaa40",colorTo:i="#9c40ff",delay:s=0})=>p.jsx("div",{style:{"--size":t,"--duration":n,"--anchor":r,"--border-width":o,"--color-from":a,"--color-to":i,"--delay":`-${s}s`},className:K("pointer-events-none absolute inset-0 rounded-[inherit] [border:calc(var(--border-width)*1px)_solid_transparent]","![mask-clip:padding-box,border-box] ![mask-composite:intersect] [mask:linear-gradient(transparent,transparent),linear-gradient(white,white)]","after:absolute after:aspect-square after:w-[calc(var(--size)*1px)] after:animate-border-beam after:[animation-delay:var(--delay)] after:[background:linear-gradient(to_left,var(--color-from),var(--color-to),transparent)] after:[offset-anchor:calc(var(--anchor)*1%)_50%] after:[offset-path:rect(0_auto_auto_0_round_calc(var(--size)*1px))]",e)});function Tae({accept:e,maxSize:t}){const{t:n}=Me("atoms"),[r,o]=y.useState(""),[a,i]=y.useState(""),s=y.useRef(null),[c,l]=y.useState(0),u=f=>{var g;const h=(g=f.target.files)==null?void 0:g[0];d(h)},d=f=>{if(i(""),f){if(t&&f.size>t*1024*1024){i(n("file_upload_input.errors.max_size",{maxSize:t,fileSize:(f.size/1024/1024).toFixed(2)}));return}const h=e==null?void 0:e.split(",").map(g=>g.replace(".","").trim());if(e&&!f.type.match(e.replace("/*",""))&&!(h!=null&&h.some(g=>f.type.includes(g)))){i(n("file_upload_input.errors.accept",{accept:e}));return}return l(f.size),o(f.name),f}};return{fileName:r,error:a,fileInputRef:s,handleFileSelect:u,validateAndSetFile:d,clearFile:()=>{o(""),i(""),l(0),s.current&&(s.current.value="")},fileSize:c}}function Rae({file:e,setFile:t,loading:n,progress:r,fileOptions:o}){const{toast:a}=$t(),{t:i}=Me("atoms"),[s,c]=y.useState(!1),{fileName:l,fileInputRef:u,clearFile:d,error:f,validateAndSetFile:h,fileSize:g}=Tae({accept:(o==null?void 0:o.accept)||"image/*",maxSize:(o==null?void 0:o.maxSize)||3});y.useEffect(()=>{e||d()},[d,e]),y.useEffect(()=>{f&&a({title:f,variant:"destructive"})},[f,a]);function m(w){const j=h(w);j&&t(j)}function v(w){w.preventDefault(),c(!1);const j=w.dataTransfer.files[0];j&&m(j)}function b(w){var E;const j=(E=w.target.files)==null?void 0:E[0];j&&m(j)}function x(){d(),t(void 0)}const _=y.useMemo(()=>{if(!e)return p.jsx("div",{className:"w-16 h-16 rounded-lg bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center",children:p.jsx(le,{name:"file-text",className:"w-8 h-8 text-zinc-400"})});const w=e.type.startsWith("image/");return p.jsx("div",{className:"relative w-16 h-16 rounded-lg overflow-hidden",children:w?p.jsx("img",{src:URL.createObjectURL(e),alt:"Preview",className:"w-full h-full object-cover"}):p.jsx(le,{className:"w-14 h-14",name:"file-text"})})},[e]);return p.jsx(p.Fragment,{children:p.jsxs("div",{className:K("relative group cursor-pointer","rounded-lg border-2 border-dashed","transition-colors duration-200",s?"border-indigo-500 bg-indigo-50/50 dark:bg-indigo-500/10":"border-zinc-200 dark:border-zinc-800"),onDragOver:w=>{w.preventDefault(),c(!0)},onDragLeave:()=>c(!1),onDrop:v,onClick:()=>{var w;return(w=u.current)==null?void 0:w.click()},onKeyDown:w=>{var j;(w.key==="Enter"||w.key===" ")&&(w.preventDefault(),(j=u.current)==null||j.click())},"aria-label":"Upload file",children:[p.jsx("input",{ref:u,type:"file",disabled:n||!!(r&&r<1),accept:(o==null?void 0:o.accept)||"image/*",onChange:b,className:"hidden"}),p.jsx("div",{className:"p-8 space-y-4",children:l?p.jsxs("div",{className:"flex items-center gap-4",children:[_,p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsxs("p",{className:"text-sm font-medium truncate",children:[l||"No file selected"," ",p.jsx("span",{className:"text-xs text-zinc-500 leading-5",children:g?`(${(g/1024/1024).toFixed(2)} MB)`:""})]}),r&&r<1?p.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[p.jsxs("p",{children:[(r*100).toFixed(2)," %"]}),p.jsx("div",{className:"h-1 flex-1 bg-zinc-100 dark:bg-zinc-800 rounded-full overflow-hidden items-center flex",children:p.jsx("div",{className:"h-full bg-indigo-500 transition-all duration-200",style:{width:`${r*100}%`}})})]}):void 0]}),p.jsx("button",{type:"button",disabled:n||!!(r&&r<1),onClick:w=>{w.stopPropagation(),x()},className:"p-1 hover:bg-zinc-100 dark:hover:bg-zinc-800 rounded",children:p.jsx(le,{name:"x",className:"w-5 h-5 text-zinc-400"})}),r&&r<1?p.jsx(mw,{className:"rounded-lg"}):void 0]}):p.jsxs("div",{className:"flex flex-col items-center gap-2",children:[p.jsx(le,{name:"upload",className:"w-8 h-8 text-zinc-400 dark:text-zinc-500"}),p.jsx("p",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:i("file_upload_input.drop_file")})]})})]})})}function Y3({onFileSubmit:e,fileOptions:t,progress:n,loading:r}){const{t:o}=Me("flows"),[a,i]=y.useState(),s=async()=>{a&&(await e(a),i(void 0))};return p.jsxs("div",{className:"w-full max-w-full space-y-2 mt-4",children:[p.jsx("div",{className:"mb-6",children:p.jsx(Rae,{progress:n,loading:r,fileOptions:t,setFile:i,file:a})}),p.jsx(jn,{loading:r,disabled:!a,onClick:s,className:"w-full mt-4",children:o("vector_database_node.add_file.index")})]})}const fp=y.forwardRef(({className:e,...t},n)=>p.jsx("div",{className:"relative w-full overflow-auto",children:p.jsx("table",{ref:n,className:K("w-full caption-bottom text-sm",e),...t})}));fp.displayName="Table";const pp=y.forwardRef(({className:e,...t},n)=>p.jsx("thead",{ref:n,className:K("[&_tr]:border-b",e),...t}));pp.displayName="TableHeader";const hp=y.forwardRef(({className:e,...t},n)=>p.jsx("tbody",{ref:n,className:K("[&_tr:last-child]:border-0",e),...t}));hp.displayName="TableBody";const Iae=y.forwardRef(({className:e,...t},n)=>p.jsx("tfoot",{ref:n,className:K("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));Iae.displayName="TableFooter";const Qa=y.forwardRef(({className:e,...t},n)=>p.jsx("tr",{ref:n,className:K("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));Qa.displayName="TableRow";const hs=y.forwardRef(({className:e,...t},n)=>p.jsx("th",{ref:n,className:K("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));hs.displayName="TableHead";const ms=y.forwardRef(({className:e,...t},n)=>p.jsx("td",{ref:n,className:K("align-middle [&:has([role=checkbox])]:pr-0",e),...t}));ms.displayName="TableCell";const Dae=y.forwardRef(({className:e,...t},n)=>p.jsx("caption",{ref:n,className:K("mt-4 text-sm text-muted-foreground",e),...t}));Dae.displayName="TableCaption";const K3=({className:e,...t})=>p.jsx("nav",{role:"navigation","aria-label":"pagination",className:K("mx-auto flex w-full justify-center",e),...t});K3.displayName="Pagination";const X3=y.forwardRef(({className:e,...t},n)=>p.jsx("ul",{ref:n,className:K("flex flex-row items-center gap-1",e),...t}));X3.displayName="PaginationContent";const ys=y.forwardRef(({className:e,...t},n)=>p.jsx("li",{ref:n,className:K("",e),...t}));ys.displayName="PaginationItem";const mp=({className:e,isActive:t,size:n="icon",...r})=>p.jsx("a",{"aria-current":t?"page":void 0,className:K(Tc({variant:t?"outline":"ghost",size:n}),e),...r});mp.displayName="PaginationLink";const Q3=({className:e,...t})=>{const{t:n}=Me("atoms");return p.jsxs(mp,{"aria-label":"Go to previous page",size:"default",className:K("gap-1 pl-2.5",e),...t,children:[p.jsx(le,{name:"chevron-left",className:"h-4 w-4"}),p.jsx("span",{children:n("pagination.previous")})]})};Q3.displayName="PaginationPrevious";const J3=({className:e,...t})=>{const{t:n}=Me("atoms");return p.jsxs(mp,{"aria-label":"Go to next page",size:"default",className:K("gap-1 pr-2.5",e),...t,children:[p.jsx("span",{children:n("pagination.next")}),p.jsx(le,{name:"chevron-right",className:"h-4 w-4"})]})};J3.displayName="PaginationNext";const yw=({className:e,...t})=>{const{t:n}=Me("atoms");return p.jsxs("span",{"aria-hidden":!0,className:K("flex h-9 w-9 items-center justify-center",e),...t,children:[p.jsx(le,{name:"ellipsis",className:"h-4 w-4"}),p.jsx("span",{className:"sr-only",children:n("pagination.more_pages")})]})};yw.displayName="PaginationEllipsis";const Z3=ja(({title:e,content:t})=>{const n=Xt();return p.jsx($i,{open:n.visible,onOpenChange:n.hide,children:p.jsxs(Da,{className:"sm:max-w-2xl",children:[p.jsx(La,{children:p.jsxs("div",{className:"flex",children:[p.jsx(le,{name:"file",className:"mr-2 h-4 w-4"}),p.jsx(Fa,{children:e})]})}),p.jsx("div",{className:"mx-auto w-full min-h-96 max-h-96 overflow-hidden",children:p.jsx("div",{className:"relative w-full h-full overflow-hidden rounded-xl p-1 border border-border",children:p.jsx("pre",{className:"break-all h-full overflow-y-auto bg-background font-mono text-xs w-full",children:t})})})]})})}),yp=y.memo(e=>{const{data:t,headers:n,limitLengthByColumns:r,showPerPage:o=7,paginationShowLimit:a=1,contentLengthLimit:i=64}=e,[s,c]=y.useState({page:1,maxPage:1}),l=Xt(Z3);y.useEffect(()=>{c(h=>({...h,maxPage:Math.ceil(t.length/o)}))},[t.length,o]);const u=y.useMemo(()=>t.slice((s.page-1)*o,s.page*o),[t,s.page,o]),d=y.useMemo(()=>{let h=!1,g=!1;return p.jsx(K3,{className:"mt-4 mb-4 ml-4 mr-4 w-full",children:p.jsxs(X3,{children:[s.page>1?p.jsx(ys,{onClick:()=>c(m=>({...m,page:m.page-1})),children:p.jsx(Q3,{})}):null,Array.from({length:s.maxPage},(m,v)=>{const b=v+1,x=v===0||v===s.maxPage-1;return!x&&b>s.page+a&&g?null:!x&&b>s.page+a?(g=!0,p.jsx(ys,{children:p.jsx(yw,{})},v)):!x&&b<s.page-a&&h?null:!x&&b<s.page-a?(h=!0,p.jsx(ys,{children:p.jsx(yw,{})},v)):p.jsx(ys,{onClick:()=>c(_=>({..._,page:b})),children:p.jsx(mp,{isActive:v+1===s.page,children:v+1})},v)}),s.page<s.maxPage?p.jsx(ys,{onClick:()=>c(m=>({...m,page:m.page+1})),children:p.jsx(J3,{})}):null]})})},[s.maxPage,s.page,a]),f=(h,g)=>{if(!h)return;const m=Array.isArray(h)?h:n.map(v=>h[v]);return p.jsxs(Qa,{children:[p.jsx(ms,{children:p.jsx("div",{className:"font-bold",children:g+1})}),m.map((v,b)=>{const x=typeof v=="string"?v:JSON.stringify(v),_=n[b],w=(r==null?void 0:r[_])||i,j=x.length>w;return p.jsx(ms,{className:"p-4",children:p.jsxs("div",{onClick:j?()=>l.show({title:_,content:x}):void 0,className:"flex gap-4",children:[j?`${x.substring(0,w)}...`:x,j?p.jsx(le,{className:"w-6 mt-[-2px]",name:"chevron-right"}):null]})},`${b}`)})]},`${g}`)};return p.jsxs(p.Fragment,{children:[p.jsxs(fp,{className:"w-full",children:[p.jsx(pp,{children:p.jsxs(Qa,{children:[p.jsx(hs,{},"index"),n?n.map(h=>p.jsx(hs,{children:p.jsx("div",{className:"font-bold",children:h})},h)):void 0]})}),p.jsx(hp,{children:u!=null&&u.length?u==null?void 0:u.map(f):void 0})]}),d]})});var gw,G3;hy=function(){if(G3)return gw;G3=1;function e(t,n,r){var o=-1,a=t.length;n<0&&(n=-n>a?0:a+n),r=r>a?a:r,r<0&&(r+=a),a=n>r?0:r-n>>>0,n>>>=0;for(var i=Array(a);++o<a;)i[o]=t[o+n];return i}return gw=e,gw};var vw,e5;xi=function(){if(e5)return vw;e5=1;var e=pc(),t=Sa(),n=df(),r=ir();function o(a,i,s){if(!r(s))return!1;var c=typeof i;return(c=="number"?t(s)&&n(i,s.length):c=="string"&&i in s)?e(s[i],a):!1}return vw=o,vw};var bw,t5;function Lae(){if(t5)return bw;t5=1;var e=/\s/;function t(n){for(var r=n.length;r--&&e.test(n.charAt(r)););return r}return bw=t,bw}var xw,n5;function Fae(){if(n5)return xw;n5=1;var e=Lae(),t=/^\s+/;function n(r){return r&&r.slice(0,e(r)+1).replace(t,"")}return xw=n,xw}var ww,r5;function o5(){if(r5)return ww;r5=1;var e=Fae(),t=ir(),n=Yi(),r=NaN,o=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,i=/^0o[0-7]+$/i,s=parseInt;function c(l){if(typeof l=="number")return l;if(n(l))return r;if(t(l)){var u=typeof l.valueOf=="function"?l.valueOf():l;l=t(u)?u+"":u}if(typeof l!="string")return l===0?l:+l;l=e(l);var d=a.test(l);return d||i.test(l)?s(l.slice(2),d?2:8):o.test(l)?r:+l}return ww=c,ww}var _w,a5;function i5(){if(a5)return _w;a5=1;var e=o5(),t=1/0,n=17976931348623157e292;function r(o){if(!o)return o===0?o:0;if(o=e(o),o===t||o===-t){var a=o<0?-1:1;return a*n}return o===o?o:0}return _w=r,_w}var jw,s5;function c5(){if(s5)return jw;s5=1;var e=i5();function t(n){var r=e(n),o=r%1;return r===r?o?r-o:r:0}return jw=t,jw}var Ew,l5;function Bae(){if(l5)return Ew;l5=1;var e=hy(),t=xi(),n=c5(),r=Math.ceil,o=Math.max;function a(i,s,c){(c?t(i,s,c):s===void 0)?s=1:s=o(n(s),0);var l=i==null?0:i.length;if(!l||s<1)return[];for(var u=0,d=0,f=Array(r(l/s));u<l;)f[d++]=e(i,u,u+=s);return f}return Ew=a,Ew}var $ae=Bae();const Sw=Qe($ae),zae=()=>{const[e,t]=y.useState(!1),{t:n}=Me("flows"),{toast:r}=$t(),o=bi(c=>c.index),a=bi(c=>c.similaritySearchWithScore),i=y.useCallback(async(c,l)=>{try{if(!(l!=null&&l.vectorDatabase)){r({variant:"destructive",title:n("vector_database_node.errors.vector_database_not_found")});return}if((l==null?void 0:l.vectorDatabase.storage)===or.DataNode)throw new Error("DataNode storage is not supported for similarity search");return t(!0),await a({databaseId:l.vectorDatabase.id},c,l==null?void 0:l.k)}catch{r({variant:"destructive",title:n("vector_database_node.errors.similarity_search_failed")})}finally{t(!1)}},[a,r,n]),s=y.useCallback(async(c,l)=>{var u;try{t(!0);const d=c.content?[new Xu({pageContent:c.content,id:c.id,metadata:{id:c.id}})]:c.documents;if(!(d!=null&&d.length)){r({variant:"destructive",title:n("vector_database_node.errors.content_not_found")});return}if(!(l!=null&&l.vectorDatabase)){r({variant:"destructive",title:n("vector_database_node.errors.vector_database_not_found")});return}if((l==null?void 0:l.vectorDatabase.storage)===or.DataNode)throw new Error("DataNode storage is not supported for indexing");{const f=Sw(d,10);let h=0;for(const g of f)(u=l==null?void 0:l.onProgressReport)==null||u.call(l,{handling:g.length,handled:h,total:d.length}),await o({databaseId:l.vectorDatabase.id},g),h+=g.length}}catch{r({variant:"destructive",title:n("vector_database_node.errors.similarity_search_failed")})}finally{t(!1)}},[o,r,n]);return{loading:e,indexData:s,similaritySearchWithScore:i}},Vae=ja(({retriverInfo:e})=>{var m,v,b;const{t}=Me("applications"),{loading:n,similaritySearchWithScore:r,indexData:o}=zae(),[a,i]=y.useState("search"),[s,c]=y.useState(0),l=Xt(),u=y.useMemo(()=>{var w,j;if(!((w=e==null?void 0:e.vectorDatabaseEntity)!=null&&w.raw))return{headers:[],rows:[]};const x=["content","embedding","metadata"],_=pm((j=e==null?void 0:e.vectorDatabaseEntity)==null?void 0:j.raw);return{headers:x,rows:_.map(E=>{try{return JSON.parse(E)}catch{return[]}})}},[(m=e==null?void 0:e.vectorDatabaseEntity)==null?void 0:m.raw]),d=y.useCallback(async(...x)=>{const[_,w]=x;await o(_,{...w,vectorDatabase:e.vectorDatabaseEntity})},[o,e.vectorDatabaseEntity]),f=y.useCallback(async(x,_)=>{const w=x.trim(),j=await r(w,{k:_,vectorDatabase:e.vectorDatabaseEntity});if(j!=null&&j.length)return j},[e.vectorDatabaseEntity,r]),h=y.useCallback(async x=>{if(x.type.includes("text")||x.type.includes("txt")){const _=new FileReader;_.onload=async w=>{var E;const j=(E=w.target)==null?void 0:E.result;await d({content:j},{vectorDatabase:e.vectorDatabaseEntity})},_.readAsText(x)}else if(x.type.endsWith("pdf")){const _=new Blob([x],{type:"application/pdf"}),w=await new RD(_,{pdfjs:async()=>{const j=await vt(()=>import("./pdf.min-DvqNLaJf.js").then(async E=>(await E.__tla,E)),__vite__mapDeps([5,1,2]));return await vt(()=>import("./pdf.worker.min-BGW7QZB1.js").then(async E=>(await E.__tla,E)),__vite__mapDeps([6,1,2])),j.GlobalWorkerOptions.workerSrc=new URL("pdfjs-dist/build/pdf.worker.min.js",import.meta.url).toString(),j},parsedItemSeparator:" "}).load();await d({documents:w},{vectorDatabase:e.vectorDatabaseEntity,onProgressReport:j=>{c((j.handled+j.handling)/j.total)}})}},[d,e.vectorDatabaseEntity]),g=y.useMemo(()=>{switch(a){case"search":return p.jsx(xr,{value:"search",children:p.jsx(W3,{loading:n,onSimilaritySearch:f})});case"new":return p.jsx(xr,{className:"min-w-80",value:"new",children:p.jsx(q3,{loading:n,onCreateData:d})});case"file":return p.jsx(xr,{value:"file",children:p.jsx(Y3,{loading:n,progress:s,onFileSubmit:h,fileOptions:{accept:".pdf,.txt,.text",maxSize:1}})});case"view":return p.jsx(xr,{value:"view",className:"max-h-full overflow-auto",children:p.jsx(yp,{data:u.rows,headers:u.headers,limitLengthByColumns:{embedding:32}})})}},[d,h,f,n,a,s,u]);return p.jsx($i,{open:l.visible,onOpenChange:l.hide,children:p.jsxs(Da,{className:"max-w-3xl",children:[p.jsx(La,{children:p.jsxs("div",{className:"flex",children:[p.jsx(le,{name:"file",className:"mr-2 h-4 w-4"}),p.jsx(Fa,{children:t("chat.vector_database")})]})}),p.jsx("div",{className:"mx-auto w-full min-h-96 max-h-full overflow-hidden",children:p.jsx("div",{className:"w-full h-full",children:p.jsxs(tw,{value:a,onValueChange:i,defaultValue:"search",className:K("w-full h-full mt-4"),children:[p.jsxs(op,{className:K("grid w-full grid-cols-3",((v=e==null?void 0:e.vectorDatabaseEntity)==null?void 0:v.storage)===or.DatabaseNode?"grid-cols-4":"grid-cols-3"),children:[p.jsx(br,{value:"search",children:t("chat.search")}),p.jsx(br,{value:"new",children:t("chat.text")}),p.jsx(br,{value:"file",children:t("chat.file")}),((b=e==null?void 0:e.vectorDatabaseEntity)==null?void 0:b.storage)===or.DatabaseNode?p.jsx(br,{value:"view",children:t("chat.view")}):void 0]}),g]})})})]})})}),Uae=y.lazy(()=>vt(()=>import("./index-j8GSalR6.js").then(async e=>(await e.__tla,e)),__vite__mapDeps([7,8,1,2,9,10])));function Hae({schema:e,mainLLMInfo:t,loadLLM:n,retriverInfo:r,threadNode:o,onSelectThread:a,onAddNewThread:i,currentDataNode:s,...c}){var w,j;const{t:l}=Me("applications"),[u,d]=y.useState(!1),f=Xt(koe),h=Xt(Vae),{chatList:g,getChatList:m,deleteChat:v}=Uoe(o),b=y.useCallback(async()=>{try{d(!0),await(i==null?void 0:i()),m()}finally{d(!1)}},[m,i]),x=y.useCallback(()=>{h.show({retriverInfo:r[0]})},[r,h]),_=y.useCallback(async(E,S)=>{E.stopPropagation(),f.show({onDelete:()=>v(S)})},[v,f]);return p.jsxs(_g,{variant:"sidebar",side:"right",collapsible:"none",...c,children:[p.jsx("div",{className:"h-1"}),p.jsxs(Uc,{className:"justify-between",children:[p.jsx("div",{className:"text-sm pl-2",children:l("chat.history")}),p.jsx(jn,{loading:u,onClick:b,variant:"link",className:"mr-[-6px]",children:p.jsx(le,{name:"circle-plus"})})]}),p.jsxs(Eg,{children:[p.jsx(Vc,{className:"flex-1",children:p.jsx(Bi,{children:g.map(({node:E},S)=>{var C;return p.jsx(io,{onClick:()=>a(E),children:p.jsx(so,{className:"cursor-pointer",children:p.jsxs("div",{className:"flex flex-row justify-between items-center w-full",children:[p.jsxs("div",{className:"flex gap-2",children:[p.jsx(le,{size:16,name:((C=s==null?void 0:s.node)==null?void 0:C.id)===E.id?"check":"chevron-right",className:"ml-auto transition-transform duration-200 group-data-[state=open]/collapsible:rotate-90"}),p.jsx("span",{children:`Thread ${S+1}`})]}),p.jsx(le,{onClick:M=>_(M,E),size:16,name:"trash-2"})]})})},E.id)})})}),r!=null&&r.length?p.jsxs(Tt,{className:"m-2 p-2 max-w-full",children:[p.jsx("pre",{className:"overflow-auto",children:r.map((E,S)=>{var C;return p.jsx("span",{children:((C=E.promptEntity)==null?void 0:C.content)||""},`${S}`)})}),p.jsx(ot,{onClick:x,className:"w-full mt-4",children:l("chat.vector_database")})]}):void 0,(w=e==null?void 0:e.schema_items)!=null&&w.length?p.jsx("div",{className:"m-2 !mb-0",children:p.jsx(y.Suspense,{fallback:p.jsx(rp,{}),children:p.jsx(Uae,{className:K("overflow-hidden break-words whitespace-pre-wrap w-full rounded-lg"),source:(j=e==null?void 0:e.schema_items)!=null&&j.length?`\`\`\`javascript
${AD((e==null?void 0:e.schema_items)||[])}
\`\`\``:""})})}):void 0,p.jsx(Voe,{llm:t==null?void 0:t.llm,status:t==null?void 0:t.status,progress:t==null?void 0:t.progress,loadLLM:n})]})]})}var Wae=Object.defineProperty,qae=Object.defineProperties,Yae=Object.getOwnPropertyDescriptors,gp=Object.getOwnPropertySymbols,u5=Object.prototype.hasOwnProperty,d5=Object.prototype.propertyIsEnumerable,f5=(e,t,n)=>t in e?Wae(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,vp=(e,t)=>{for(var n in t||(t={}))u5.call(t,n)&&f5(e,n,t[n]);if(gp)for(var n of gp(t))d5.call(t,n)&&f5(e,n,t[n]);return e},Kae=(e,t)=>qae(e,Yae(t)),Xae=(e,t)=>{var n={};for(var r in e)u5.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&gp)for(var r of gp(e))t.indexOf(r)<0&&d5.call(e,r)&&(n[r]=e[r]);return n};hc=function(...e){return aje(ije(e))},AS=function(e,t){const n=e;return U.forwardRef(function(r,o){return U.createElement(n,Kae(vp(vp({ref:o},t),r),{className:hc(t.className,r.className)}))})},N7=function(e,...t){return AS(e,{className:hc(t)})},M7=function(e,t,n){const r=e;return U.forwardRef(function(o,a){const i=o,{className:s}=i,c=Xae(i,["className"]),l=vp({},c);return n&&n.forEach(u=>{c[u]!==void 0&&delete l[u]}),U.createElement(r,vp({ref:a,className:hc(t(c),s)},l))})};var Cw="Avatar",[Qae,Aje]=Pn(Cw),[Jae,p5]=Qae(Cw),h5=y.forwardRef((e,t)=>{const{__scopeAvatar:n,...r}=e,[o,a]=y.useState("idle");return p.jsx(Jae,{scope:n,imageLoadingStatus:o,onImageLoadingStatusChange:a,children:p.jsx(Ne.span,{...r,ref:t})})});h5.displayName=Cw;var m5="AvatarImage",y5=y.forwardRef((e,t)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:o=()=>{},...a}=e,i=p5(m5,n),s=Zae(r,a.referrerPolicy),c=An(l=>{o(l),i.onImageLoadingStatusChange(l)});return Bt(()=>{s!=="idle"&&c(s)},[s,c]),s==="loaded"?p.jsx(Ne.img,{...a,ref:t,src:r}):null});y5.displayName=m5;var g5="AvatarFallback",v5=y.forwardRef((e,t)=>{const{__scopeAvatar:n,delayMs:r,...o}=e,a=p5(g5,n),[i,s]=y.useState(r===void 0);return y.useEffect(()=>{if(r!==void 0){const c=window.setTimeout(()=>s(!0),r);return()=>window.clearTimeout(c)}},[r]),i&&a.imageLoadingStatus!=="loaded"?p.jsx(Ne.span,{...o,ref:t}):null});v5.displayName=g5;function Zae(e,t){const[n,r]=y.useState("idle");return Bt(()=>{if(!e){r("error");return}let o=!0;const a=new window.Image,i=s=>()=>{o&&r(s)};return r("loading"),a.onload=i("loaded"),a.onerror=i("error"),a.src=e,t&&(a.referrerPolicy=t),()=>{o=!1}},[e,t]),n}var b5=h5,x5=y5,w5=v5;const _5=y.forwardRef(({className:e,...t},n)=>p.jsx(b5,{ref:n,className:K("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));_5.displayName=b5.displayName;const j5=y.forwardRef(({className:e,...t},n)=>p.jsx(x5,{ref:n,className:K("aspect-square h-full w-full",e),...t}));j5.displayName=x5.displayName;const E5=y.forwardRef(({className:e,...t},n)=>p.jsx(w5,{ref:n,className:K("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));E5.displayName=w5.displayName;const Gae=Zr("flex gap-2 max-w-[60%] items-end relative group",{variants:{variant:{received:"self-start",sent:"self-end flex-row-reverse"},layout:{default:"",ai:"max-w-full w-full items-center"}},defaultVariants:{variant:"received",layout:"default"}}),S5=y.forwardRef(({className:e,variant:t,layout:n,children:r,...o},a)=>p.jsx("div",{className:K(Gae({variant:t,layout:n,className:e}),"relative group"),ref:a,...o,children:y.Children.map(r,i=>y.isValidElement(i)&&typeof i.type!="string"?y.cloneElement(i,{variant:t,layout:n,className:o==null?void 0:o.innerclassname}):i)}));S5.displayName="ChatBubble";const eie=({src:e,fallback:t,className:n})=>p.jsxs(_5,{className:n,children:[p.jsx(j5,{src:e,alt:"Avatar"}),p.jsx(E5,{children:t})]}),tie=Zr("p-4",{variants:{variant:{received:"bg-secondary text-secondary-foreground rounded-r-lg rounded-tl-lg",sent:"bg-primary text-primary-foreground rounded-l-lg rounded-tr-lg"},layout:{default:"",ai:"border-t w-full rounded-none bg-transparent"}},defaultVariants:{variant:"received",layout:"default"}}),C5=y.forwardRef(({className:e,variant:t,layout:n,isLoading:r=!1,children:o,...a},i)=>p.jsx("div",{className:K(tie({variant:t,layout:n,className:e}),"break-words max-w-full whitespace-pre-wrap"),ref:i,...a,children:r?p.jsx("div",{className:"flex items-center space-x-2",children:p.jsx(rp,{})}):o}));C5.displayName="ChatBubbleMessage";const nie=({icon:e,onClick:t,className:n,variant:r="ghost",size:o="icon",...a})=>p.jsx(ot,{variant:r,size:o,className:n,onClick:t,...a,children:e}),rie=y.forwardRef(({variant:e,className:t,children:n,...r},o)=>p.jsx("div",{ref:o,className:K("absolute top-1/2 -translate-y-1/2 flex opacity-0 group-hover:opacity-100 transition-opacity duration-200",e==="sent"?"-left-1 -translate-x-full flex-row-reverse":"-right-1 translate-x-full",t),...r,children:n}));rie.displayName="ChatBubbleActionWrapper";const oie=y.lazy(()=>vt(()=>import("./index-j8GSalR6.js").then(async e=>(await e.__tla,e)),__vite__mapDeps([7,8,1,2,9,10]))),aie=[{icon:"copy",label:"Copy"},{icon:"refresh-ccw",label:"Refresh"},{icon:"volume-2",label:"Volume"}],iie=y.memo(({message:e,index:t,isLastMessage:n,isGenerating:r,isSchema:o,onActionClick:a})=>p.jsxs(S5,{innerclassname:e.role=="system"?"!bg-transparent font-semibold":void 0,variant:e.role=="user"?"sent":"received",children:[e.role==="system"?p.jsx("div",{className:"w-10 h-10"}):e.role==="assistant"?p.jsx(eie,{src:"",fallback:e.data&&typeof e.data=="object"&&"injectedMessage"in e.data?"\u{1F4C2}":"\u{1F916}"}):void 0,p.jsxs(C5,{children:[r&&n&&(!e.content||o)?p.jsx(rp,{}):p.jsxs(y.Suspense,{fallback:p.jsx(rp,{}),children:[e.role==="system"?p.jsx(on,{className:"!text-sm mb-1",children:"System"}):void 0,p.jsx(oie,{className:hc("[&_p]:leading-relaxed !max-w-full !bg-transparent !font-sans !text-sm"),style:{color:"unset !important"},source:e.content?o?`\`\`\`json
${e.content}
\`\`\``:e.content:""})]}),e.role==="assistant"&&n&&p.jsx("div",{className:"flex items-center mt-1.5 gap-1",children:!r&&p.jsx(p.Fragment,{children:aie.map((i,s)=>p.jsx(nie,{variant:"ghost",className:"size-5",icon:p.jsx(le,{name:i.icon,className:"size-3"}),onClick:()=>a(i.label,e)},s))})})]})]},t),()=>!1),sie=y.memo(()=>{const{t:e}=Me("applications"),t=y.useRef(!1),[n,r]=y.useState(!1),o=y.useCallback(()=>{setTimeout(()=>{C.current&&(C.current.scrollTop=C.current.scrollHeight)},50)},[]),{schema:a,threadInfo:i,mainLLMInfo:s,retriverInfo:c,currentDataNode:l,loadLLM:u,addNewDataNode:d,selectDataNode:f,updateMessagesData:h,onThreadMessagesLoaded:g}=loe(),{sendMessage:m}=Moe(),{input:v,messages:b,isLoading:x,reload:_,setInput:w,handleSubmit:j,handleInputChange:E,setMessages:S}=SS({fetch:async(A,O)=>{try{r(!0);const k=JSON.parse(O==null?void 0:O.body),T=Ea(),D=k.messages[k.messages.length-1];return t.current=!0,S(I=>[...I,{id:Ea(),content:D.content,role:"user"}]),await m(D.content,k.messages||[],{retriverInfo:c},{schema:a,onInjectedMessages:I=>{I.length&&S(L=>[...L,...I.map(B=>B._getType()==="system"?{id:Ea(),content:`${B.content}`,role:"system",data:{injectedMessage:!0}}:B._getType()==="human"?{id:Ea(),content:`${B.content}`,role:"user",data:{injectedMessage:!0}}:{id:Ea(),content:`${B.content}`,role:"assistant",data:{injectedMessage:!0}})])},onResponseMessageCreate:I=>{S(L=>[...L,{id:T,content:I||"",role:"assistant"}])},onMessageUpdate:I=>{S(L=>{const B=[...L],V=B.findIndex(F=>F.id===T);return V!==-1&&(B[V]={...B[V],content:I.nodeData.content||""}),B}),t.current&&o()}}),S(I=>(h(I),I)),r(!1),w(""),t.current&&o(),new Response}finally{r(!1)}}}),C=y.useRef(null);y.useEffect(()=>{const A=g(O=>{S(O||[]),o()});return()=>{A()}},[S,g,o]);const M=async(A,O)=>(r(!0),await j(O),!0),N=y.useCallback(async(A,O)=>{if(A==="Refresh"){r(!0);try{await _()}finally{r(!1)}}A==="Copy"&&O&&O.role==="assistant"&&navigator.clipboard.writeText(O.content),A==="Volume"&&(O!=null&&O.content)&&await rS.speak((O==null?void 0:O.content)||"")},[_]),P=y.useCallback(()=>t.current=!1,[]),R=y.useMemo(()=>b&&b.map((A,O)=>p.jsx(iie,{message:A,index:O,isLastMessage:O===b.length-1,isGenerating:n,isSchema:!!a,onActionClick:N},A.id||`${O}`)),[b,n,a,N]);return p.jsxs(wg,{onClick:P,className:"max-h-full !overflow-hidden !min-h-full",style:{minHeight:"unset"},defaultOpen:!0,children:[p.jsx(jg,{className:"!max-h-full !overflow-hidden",style:{minHeight:"unset"},children:p.jsxs("main",{className:"flex h-full w-full max-w-2xl flex-col items-center mx-auto overflow-hidden",children:[p.jsx("div",{className:"flex-1 overflow-y-auto overflow-x-hidden min-w-full max-w-full",children:p.jsx(Ok,{className:"!max-h-full",ref:C,children:R})}),p.jsx(fP,{className:"!max-w-2xl px-4",onSubmit:M,disabled:x||n||(s==null?void 0:s.status)!==Ye.Loaded,placeholder:e("chat.input_message_placeholder"),maxHeight:72,value:v,onChange:E})]})}),p.jsx(Hae,{schema:a,currentDataNode:l,threadNode:i==null?void 0:i.threadNode,loadLLM:u,mainLLMInfo:s,retriverInfo:c,onAddNewThread:d,onSelectThread:f})]})}),cie=()=>{const[e,t]=y.useState(),n=Ze(l=>l.currentSession),{t:r}=Me("flows"),{toast:o}=$t(),a=un(l=>l.stream),i=un(l=>l.loadModel),s=y.useCallback(async(l,u)=>{if(n!=null&&n.main_node_id){if(!(e!=null&&e.llm))return o({variant:"destructive",description:r("editor_node.errors.llm_not_found")});(e==null?void 0:e.status)!==Ye.Loaded&&(await i(e.llm.name,d=>{t(f=>f&&{...f,progress:d.text})}),t(d=>d&&{...d,status:Ye.Loaded,progress:""}));try{const d=a(l);if(!d)throw new Error("Stream is not supported");const f=[];for await(const h of d)h&&Array.isArray(h)&&(f.push(...h.map(g=>g.content)),h!=null&&h.length&&(u==null||u(h.map(g=>g.content).join(""))));return f.join("")}catch(d){if(d instanceof Error&&d.message.includes("LLM_NOT_LOADED_YET"))return o({title:r("editor_node.errors.llm_not_loaded_yet")});o({variant:"destructive",title:r("editor_node.errors.stream_message_failed")})}}},[n==null?void 0:n.main_node_id,e==null?void 0:e.llm,e==null?void 0:e.status,o,r,i,a]),c=y.useCallback(async()=>{if(!(n!=null&&n.main_node_id))return;const l=await ce("FlowEdge").find({where:{target:n.main_node_id}}),u=(await ce("FlowNode").find({where:{id:Ur(l.map(f=>f.source))}})).find(f=>f.source_type===oe.LLM);if(!u)return;const d=await ce("LLM").findOne({where:{id:u.source_id}});d&&(await i(d.name,f=>{t(h=>h&&{...h,llm:d,progress:f.text})}),t({llm:d,status:Ye.Loaded}))},[n==null?void 0:n.main_node_id,i]);return y.useEffect(()=>{n!=null&&n.main_node_id&&c()},[n==null?void 0:n.main_node_id,c]),{mainLLMInfo:e,createMessage:s}},lie=()=>{const e=Ze(a=>a.currentSession),t=y.useRef(null),[n,r]=y.useState(),o=y.useCallback(async a=>{e!=null&&e.main_node_id&&(clearTimeout(t.current),t.current=setTimeout(async()=>{e!=null&&e.main_node_id&&await ce("FlowNode").update(e.main_node_id,{data:a})},150))},[e]);return y.useEffect(()=>{e!=null&&e.main_node_id&&ce("FlowNode").findOne({where:{id:e.main_node_id}}).then(a=>{r(a)})},[e]),{flowNode:n,updateEditorContent:o}},uie=y.lazy(()=>vt(()=>import("./index-BcNmvw95.js").then(async e=>(await e.__tla,e)),__vite__mapDeps([11,1,2,12,13,9,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55]))),die=y.memo(()=>{var a,i,s,c,l;const{flowNode:e,updateEditorContent:t}=lie(),{mainLLMInfo:n,createMessage:r}=cie(),o=y.useCallback(u=>{t(u)},[t]);return p.jsxs("div",{className:"h-full w-full relative","data-registry":"plate",children:[p.jsx($c,{children:p.jsx(Ir,{children:p.jsxs("div",{className:K("flex absolute !z-[51] right-1 top-0 max-w-28 h-9 items-center justify-center flex-row"),children:[(n==null?void 0:n.status)===Ye.Loaded&&((a=n==null?void 0:n.llm)!=null&&a.name)?p.jsx(jo,{name:(i=n==null?void 0:n.llm)==null?void 0:i.name,className:"w-5 h-5 mr-1"}):void 0,p.jsx(Dr,{className:"overflow-hidden !text-ellipsis w-full max-w-full max-h-full whitespace-nowrap text-sm",children:n!=null&&n.progress?n==null?void 0:n.progress:(n==null?void 0:n.status)===Ye.Loaded?(s=n==null?void 0:n.llm)==null?void 0:s.name:p.jsx(le,{size:16,name:"loader-circle",className:"animate-spin ml-2"})}),p.jsx(fr,{children:p.jsx("p",{children:(n==null?void 0:n.progress)||((c=n==null?void 0:n.llm)==null?void 0:c.name)||""})})]})})}),p.jsx(y.Suspense,{fallback:p.jsx("div",{className:"h-full w-ful !rounded-none flex justify-center items-center",children:p.jsx(le,{name:"loader-circle",className:"animate-spin"})}),children:e?p.jsx(uie,{defaultValue:e==null?void 0:e.data,onValueChange:o,copilotStream:r,hideDragIcon:!0,enableHistoryControl:!0},((l=n==null?void 0:n.llm)==null?void 0:l.name)||"default"):p.jsx("div",{className:"h-full w-full !rounded-none flex justify-center items-center",children:p.jsx(le,{name:"loader-circle",className:"animate-spin"})})})]})}),fie=()=>{const[e,t]=y.useState(!1),[n,r]=y.useState(),o=Ze(f=>f.currentSession),{t:a}=Me("flows"),{toast:i}=$t(),s=un(f=>f.stream),c=un(f=>f.loadModel),l=y.useCallback(async(f,h)=>{if(o!=null&&o.main_node_id){if(!(n!=null&&n.llm))return i({variant:"destructive",description:a("editor_node.errors.llm_not_found")});(n==null?void 0:n.status)!==Ye.Loaded&&(await c(n.llm.name,g=>{r(m=>m&&{...m,progress:g.text})}),r(g=>g&&{...g,status:Ye.Loaded,progress:""}));try{const g=s(f);if(!g)throw new Error("Stream is not supported");const m=[];for await(const v of g)v&&Array.isArray(v)&&(m.push(...v.map(b=>b.content)),v!=null&&v.length&&(h==null||h(v.map(b=>b.content).join(""))));return m.join("")}catch(g){if(g instanceof Error&&g.message.includes("LLM_NOT_LOADED_YET"))return i({title:a("editor_node.errors.llm_not_loaded_yet")});i({variant:"destructive",title:a("editor_node.errors.stream_message_failed")})}}},[o==null?void 0:o.main_node_id,n==null?void 0:n.llm,n==null?void 0:n.status,i,a,c,s]),u=y.useCallback(async()=>{try{if(t(!0),!(o!=null&&o.main_node_id))return;const f=await ce("FlowEdge").find({where:{target:o.main_node_id}}),h=(await ce("FlowNode").find({where:{id:Ur(f.map(m=>m.source))}})).find(m=>m.source_type===oe.LLM);if(!h)return;const g=await ce("LLM").findOne({where:{id:h.source_id}});if(!g)return;await c(g.name,m=>{r(v=>v&&{...v,llm:g,progress:m.text})}),r({llm:g,status:Ye.Loaded})}finally{t(!1)}},[o==null?void 0:o.main_node_id,c]),d=y.useCallback(async()=>{try{if(t(!0),!(n!=null&&n.llm))return;await c(n.llm.name,f=>{r(h=>h&&{...h,progress:f.text})}),r(f=>f&&{...f,status:Ye.Loaded,progress:""})}finally{t(!1)}},[c,n==null?void 0:n.llm]);return y.useEffect(()=>{o!=null&&o.main_node_id&&u()},[o==null?void 0:o.main_node_id,u]),{loading:e,mainLLMInfo:n,createMessage:l,loadCurrentModel:d}};HS=function(e,t=""){const n=[];for(const[r,o]of Object.entries(e)){const a=Ea(),i=[t,r].filter(Boolean).join("/"),s="file"in o&&"contents"in o.file?o.file:void 0,c={id:a,isSelectable:!0,content:typeof(s==null?void 0:s.contents)=="string"?s.contents:void 0,file:i,name:r,children:[]};"directory"in o&&(c.children=HS(o.directory,i)),n.push(c)}return n},iy=function(e){const t=e.trim().split(`
`),n={};return t.forEach(r=>{const{file:o,content:a}=JSON.parse(r),i=o.split("/");let s=n;for(let c=0;c<i.length;c++){const l=i[c];c===i.length-1?s[l]={file:{contents:a}}:(s[l]||(s[l]={directory:{}}),s=s[l].directory)}}),n},ny=function(e){const t=[];function n(r,o=[]){for(const[a,i]of Object.entries(r))if("file"in i){const s=[...o,a].join("/");if("contents"in i.file){const c=i.file.contents;t.push(JSON.stringify({file:s,content:c}))}}else"directory"in i&&n(i.directory,[...o,a])}return n(e),t.join(`
`)},sy=function(e,t,n){const r=t.replace(/^\.\//,"").split("/");let o=e;for(let a=0;a<r.length;a++){const i=r[a];if(a===r.length-1)i in o&&"file"in o[i]?o[i].file.contents=n:Mr(`Path "${t}" is not a file.`);else if(i in o&&"directory"in o[i])o=o[i].directory;else return Mr(`Path "${t}" does not exist.`),e}return e};const pie=()=>{const e=Ze(i=>i.currentSession),[t,n]=y.useState(),r=y.useCallback(async(i,s)=>{await ce("FlowNode").update(i,{raw:ny(s)})},[]),o=y.useCallback(async(i,s)=>{e!=null&&e.main_node_id&&n(c=>{if(!(e!=null&&e.main_node_id))return c;const l=sy(c||{},i,s);return r(e==null?void 0:e.main_node_id,l),l})},[e==null?void 0:e.main_node_id,r]),a=y.useCallback(async()=>{if(!(e!=null&&e.main_node_id))return;const i=await ce("FlowNode").findOne({where:{id:e==null?void 0:e.main_node_id}});i&&n(i.raw?iy(i.raw):{})},[e==null?void 0:e.main_node_id]);return y.useEffect(()=>{e!=null&&e.main_node_id&&a()},[e==null?void 0:e.main_node_id,a]),{fileSystemTree:t,updateCodeContainerFile:o,updateCodeContainerData:r}},hie=y.lazy(()=>vt(()=>import("./index-BcgE28pn.js").then(async e=>(await e.__tla,e)),__vite__mapDeps([56,1,2,12,20,34,15,57,58,59,60]))),mie=y.memo(()=>{var a,i,s,c;const{loading:e,mainLLMInfo:t,loadCurrentModel:n}=fie(),{fileSystemTree:r,updateCodeContainerFile:o}=pie();return p.jsxs("div",{className:"h-full w-full relative","data-registry":"plate",children:[p.jsx($c,{children:p.jsx(Ir,{children:p.jsxs("div",{className:K("flex absolute !z-[51] right-1 top-0 max-w-28 h-9 items-center justify-center flex-row"),children:[(t==null?void 0:t.status)===Ye.Loaded&&((a=t==null?void 0:t.llm)!=null&&a.name)?p.jsx(jo,{name:(i=t==null?void 0:t.llm)==null?void 0:i.name,className:"w-5 h-5 mr-1"}):void 0,p.jsxs(Dr,{className:"overflow-hidden !text-ellipsis w-full max-w-full max-h-full whitespace-nowrap text-sm",children:[t!=null&&t.progress?t.progress:(t==null?void 0:t.status)===Ye.Loaded?((s=t==null?void 0:t.llm)==null?void 0:s.name)||"":e?p.jsx(le,{size:16,name:"loader-circle",className:"animate-spin ml-2"}):void 0,t!=null&&t.llm&&(t==null?void 0:t.status)!==Ye.Loaded?p.jsx(le,{size:16,name:"loader-circle",onClick:n,className:"animate-spin ml-2"}):void 0]}),p.jsx(fr,{children:p.jsx("p",{children:(t==null?void 0:t.progress)||((c=t==null?void 0:t.llm)==null?void 0:c.name)||""})})]})})}),p.jsx(y.Suspense,{fallback:p.jsx("div",{className:"h-full w-full flex justify-center items-center",children:p.jsx(le,{name:"loader-circle",className:"animate-spin"})}),children:r!==void 0?p.jsx(hie,{autoLoad:!0,hideAppName:!0,llm:t==null?void 0:t.llm,fileSystemTree:r,onUpdateFileContent:o}):void 0})]})});function yie(){var t,n;const e=Ze(r=>r.currentSession);if(!e)return p.jsx(oS,{flickeringGrid:!0,className:"w-full h-full"});if(e.main_source_type==="Thread")return p.jsx(sie,{});if(((t=e.main_node)==null?void 0:t.node_type)==="EDITOR_APP")return p.jsx(die,{});if(((n=e.main_node)==null?void 0:n.node_type)==="VSLITE_APP")return p.jsx(mie,{})}var bp="Menubar",[Ow,gie,vie]=qu(bp),[O5,Tje]=Pn(bp,[vie,Gr]),bn=qd(),N5=Gr(),[bie,Nw]=O5(bp),M5=y.forwardRef((e,t)=>{const{__scopeMenubar:n,value:r,onValueChange:o,defaultValue:a,loop:i=!0,dir:s,...c}=e,l=Ho(s),u=N5(n),[d="",f]=nn({prop:r,onChange:o,defaultProp:a}),[h,g]=y.useState(null);return p.jsx(bie,{scope:n,value:d,onMenuOpen:y.useCallback(m=>{f(m),g(m)},[f]),onMenuClose:y.useCallback(()=>f(""),[f]),onMenuToggle:y.useCallback(m=>{f(v=>v?"":m),g(m)},[f]),dir:l,loop:i,children:p.jsx(Ow.Provider,{scope:n,children:p.jsx(Ow.Slot,{scope:n,children:p.jsx(vc,{asChild:!0,...u,orientation:"horizontal",loop:i,dir:l,currentTabStopId:h,onCurrentTabStopIdChange:g,children:p.jsx(Ne.div,{role:"menubar",...c,ref:t})})})})})});M5.displayName=bp;var Mw="MenubarMenu",[xie,k5]=O5(Mw),P5=e=>{const{__scopeMenubar:t,value:n,...r}=e,o=mt(),a=n||o||"LEGACY_REACT_AUTO_VALUE",i=Nw(Mw,t),s=bn(t),c=y.useRef(null),l=y.useRef(!1),u=i.value===a;return y.useEffect(()=>{u||(l.current=!1)},[u]),p.jsx(xie,{scope:t,value:a,triggerId:mt(),triggerRef:c,contentId:mt(),wasKeyboardTriggerOpenRef:l,children:p.jsx(qM,{...s,open:u,onOpenChange:d=>{d||i.onMenuClose()},modal:!1,dir:i.dir,...r})})};P5.displayName=Mw;var kw="MenubarTrigger",A5=y.forwardRef((e,t)=>{const{__scopeMenubar:n,disabled:r=!1,...o}=e,a=N5(n),i=bn(n),s=Nw(kw,n),c=k5(kw,n),l=y.useRef(null),u=lt(t,l,c.triggerRef),[d,f]=y.useState(!1),h=s.value===c.value;return p.jsx(Ow.ItemSlot,{scope:n,value:c.value,disabled:r,children:p.jsx(bc,{asChild:!0,...a,focusable:!r,tabStopId:c.value,children:p.jsx(YM,{asChild:!0,...i,children:p.jsx(Ne.button,{type:"button",role:"menuitem",id:c.triggerId,"aria-haspopup":"menu","aria-expanded":h,"aria-controls":h?c.contentId:void 0,"data-highlighted":d?"":void 0,"data-state":h?"open":"closed","data-disabled":r?"":void 0,disabled:r,...o,ref:u,onPointerDown:ye(e.onPointerDown,g=>{!r&&g.button===0&&g.ctrlKey===!1&&(s.onMenuOpen(c.value),h||g.preventDefault())}),onPointerEnter:ye(e.onPointerEnter,()=>{var g;s.value&&!h&&(s.onMenuOpen(c.value),(g=l.current)==null||g.focus())}),onKeyDown:ye(e.onKeyDown,g=>{r||(["Enter"," "].includes(g.key)&&s.onMenuToggle(c.value),g.key==="ArrowDown"&&s.onMenuOpen(c.value),["Enter"," ","ArrowDown"].includes(g.key)&&(c.wasKeyboardTriggerOpenRef.current=!0,g.preventDefault()))}),onFocus:ye(e.onFocus,()=>f(!0)),onBlur:ye(e.onBlur,()=>f(!1))})})})})});A5.displayName=kw;var wie="MenubarPortal",T5=e=>{const{__scopeMenubar:t,...n}=e,r=bn(t);return p.jsx(KM,{...r,...n})};T5.displayName=wie;var Pw="MenubarContent",R5=y.forwardRef((e,t)=>{const{__scopeMenubar:n,align:r="start",...o}=e,a=bn(n),i=Nw(Pw,n),s=k5(Pw,n),c=gie(n),l=y.useRef(!1);return p.jsx(XM,{id:s.contentId,"aria-labelledby":s.triggerId,"data-radix-menubar-content":"",...a,...o,ref:t,align:r,onCloseAutoFocus:ye(e.onCloseAutoFocus,u=>{var d;!i.value&&!l.current&&((d=s.triggerRef.current)==null||d.focus()),l.current=!1,u.preventDefault()}),onFocusOutside:ye(e.onFocusOutside,u=>{const d=u.target;c().some(f=>{var h;return(h=f.ref.current)==null?void 0:h.contains(d)})&&u.preventDefault()}),onInteractOutside:ye(e.onInteractOutside,()=>{l.current=!0}),onEntryFocus:u=>{s.wasKeyboardTriggerOpenRef.current||u.preventDefault()},onKeyDown:ye(e.onKeyDown,u=>{if(["ArrowRight","ArrowLeft"].includes(u.key)){const d=u.target,f=d.hasAttribute("data-radix-menubar-subtrigger"),h=d.closest("[data-radix-menubar-content]")!==u.currentTarget,g=(i.dir==="rtl"?"ArrowRight":"ArrowLeft")===u.key;if(!g&&f||h&&g)return;let m=c().filter(x=>!x.disabled).map(x=>x.value);g&&m.reverse();const v=m.indexOf(s.value);m=i.loop?Die(m,v+1):m.slice(v+1);const[b]=m;b&&i.onMenuOpen(b)}},{checkForDefaultPrevented:!1}),style:{...e.style,"--radix-menubar-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-menubar-content-available-width":"var(--radix-popper-available-width)","--radix-menubar-content-available-height":"var(--radix-popper-available-height)","--radix-menubar-trigger-width":"var(--radix-popper-anchor-width)","--radix-menubar-trigger-height":"var(--radix-popper-anchor-height)"}})});R5.displayName=Pw;var _ie="MenubarGroup",jie=y.forwardRef((e,t)=>{const{__scopeMenubar:n,...r}=e,o=bn(n);return p.jsx(QM,{...o,...r,ref:t})});jie.displayName=_ie;var Eie="MenubarLabel",I5=y.forwardRef((e,t)=>{const{__scopeMenubar:n,...r}=e,o=bn(n);return p.jsx(JM,{...o,...r,ref:t})});I5.displayName=Eie;var Sie="MenubarItem",D5=y.forwardRef((e,t)=>{const{__scopeMenubar:n,...r}=e,o=bn(n);return p.jsx(ZM,{...o,...r,ref:t})});D5.displayName=Sie;var Cie="MenubarCheckboxItem",L5=y.forwardRef((e,t)=>{const{__scopeMenubar:n,...r}=e,o=bn(n);return p.jsx(GM,{...o,...r,ref:t})});L5.displayName=Cie;var Oie="MenubarRadioGroup",Nie=y.forwardRef((e,t)=>{const{__scopeMenubar:n,...r}=e,o=bn(n);return p.jsx(ek,{...o,...r,ref:t})});Nie.displayName=Oie;var Mie="MenubarRadioItem",F5=y.forwardRef((e,t)=>{const{__scopeMenubar:n,...r}=e,o=bn(n);return p.jsx(tk,{...o,...r,ref:t})});F5.displayName=Mie;var kie="MenubarItemIndicator",B5=y.forwardRef((e,t)=>{const{__scopeMenubar:n,...r}=e,o=bn(n);return p.jsx(nk,{...o,...r,ref:t})});B5.displayName=kie;var Pie="MenubarSeparator",$5=y.forwardRef((e,t)=>{const{__scopeMenubar:n,...r}=e,o=bn(n);return p.jsx(rk,{...o,...r,ref:t})});$5.displayName=Pie;var Aie="MenubarArrow",Tie=y.forwardRef((e,t)=>{const{__scopeMenubar:n,...r}=e,o=bn(n);return p.jsx(ok,{...o,...r,ref:t})});Tie.displayName=Aie;var Rie="MenubarSubTrigger",z5=y.forwardRef((e,t)=>{const{__scopeMenubar:n,...r}=e,o=bn(n);return p.jsx(ak,{"data-radix-menubar-subtrigger":"",...o,...r,ref:t})});z5.displayName=Rie;var Iie="MenubarSubContent",V5=y.forwardRef((e,t)=>{const{__scopeMenubar:n,...r}=e,o=bn(n);return p.jsx(ik,{...o,"data-radix-menubar-content":"",...r,ref:t,style:{...e.style,"--radix-menubar-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-menubar-content-available-width":"var(--radix-popper-available-width)","--radix-menubar-content-available-height":"var(--radix-popper-available-height)","--radix-menubar-trigger-width":"var(--radix-popper-anchor-width)","--radix-menubar-trigger-height":"var(--radix-popper-anchor-height)"}})});V5.displayName=Iie;function Die(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var U5=M5,Lie=P5,H5=A5,Fie=T5,W5=R5,q5=I5,Y5=D5,K5=L5,X5=F5,Q5=B5,J5=$5,Z5=z5,G5=V5;const Aw=Lie,e4=y.forwardRef(({className:e,...t},n)=>p.jsx(U5,{ref:n,className:K("flex h-10 items-center space-x-1 rounded-md border bg-background p-1",e),...t}));e4.displayName=U5.displayName;const Tw=y.forwardRef(({className:e,...t},n)=>p.jsx(H5,{ref:n,className:K("flex cursor-default select-none items-center rounded-sm px-3 py-1.5 text-sm font-medium outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground",e),...t}));Tw.displayName=H5.displayName;const Bie=y.forwardRef(({className:e,inset:t,children:n,...r},o)=>p.jsxs(Z5,{ref:o,className:K("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground",t&&"pl-8",e),...r,children:[n,p.jsx(le,{name:"chevron-right",className:"ml-auto h-4 w-4"})]}));Bie.displayName=Z5.displayName;const $ie=y.forwardRef(({className:e,...t},n)=>p.jsx(G5,{ref:n,className:K("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));$ie.displayName=G5.displayName;const t4=y.forwardRef(({className:e,align:t="start",alignOffset:n=-4,sideOffset:r=8,...o},a)=>p.jsx(Fie,{children:p.jsx(W5,{ref:a,align:t,alignOffset:n,sideOffset:r,className:K("z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...o})}));t4.displayName=W5.displayName;const n4=y.forwardRef(({className:e,inset:t,...n},r)=>p.jsx(Y5,{ref:r,className:K("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...n}));n4.displayName=Y5.displayName;const zie=y.forwardRef(({className:e,children:t,checked:n,...r},o)=>p.jsxs(K5,{ref:o,className:K("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:n,...r,children:[p.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:p.jsx(Q5,{children:p.jsx(le,{name:"check",className:"h-4 w-4"})})}),t]}));zie.displayName=K5.displayName;const Vie=y.forwardRef(({className:e,children:t,...n},r)=>p.jsxs(X5,{ref:r,className:K("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[p.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:p.jsx(Q5,{children:p.jsx(le,{name:"circle",className:"h-2 w-2 fill-current"})})}),t]}));Vie.displayName=X5.displayName;const Uie=y.forwardRef(({className:e,inset:t,...n},r)=>p.jsx(q5,{ref:r,className:K("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...n}));Uie.displayName=q5.displayName;const Hie=y.forwardRef(({className:e,...t},n)=>p.jsx(J5,{ref:n,className:K("-mx-1 my-1 h-px bg-muted",e),...t}));Hie.displayName=J5.displayName;let r4;Ae=sje()(cje(lje((e,t)=>({...wD,...coe(e,t)})))),r4=()=>{const e=Ze(i=>{var s;return(s=i.currentSession)==null?void 0:s.id}),[t,n]=y.useState(!1),r=Ae(i=>i.pushSyncNodeQueue),o=Ae(i=>i.createOrUpdateFlowNode),a=y.useCallback(async(i,s)=>{try{if(!e)throw new Error("Session not found");n(!0);const c=await ce("LLM").findOne({where:{name:s.name,session_id:e}});return c?(r("LLM",{where:{source_type:"LLM",source_id:c.id}}),c):ce("LLM").save({name:`${s.name}`,status:Ye.Started,session_id:e,provider:rd.WebLLM,metadata:JSON.stringify({}),model_type:s.model_type||Sc.LLM,...s}).then(async l=>{var u,d,f;return await o({source_id:l.id,source_type:"LLM",node_type:oe.LLM,x:(u=i.position)==null?void 0:u.x,y:((d=i.position)==null?void 0:d.y)+(((f=i.measured)==null?void 0:f.height)||0)+30}),l})}finally{n(!1)}},[o,r,e]);return{loading:t,createDatabaseLLM:a}};function sa(e,t,{checkForDefaultPrevented:n=!0}={}){return function(r){if(e==null||e(r),n===!1||!r.defaultPrevented)return t==null?void 0:t(r)}}function o4(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function a4(...e){return t=>{let n=!1;const r=e.map(o=>{const a=o4(o,t);return!n&&typeof a=="function"&&(n=!0),a});if(n)return()=>{for(let o=0;o<r.length;o++){const a=r[o];typeof a=="function"?a():o4(e[o],null)}}}}function ca(...e){return y.useCallback(a4(...e),e)}var Rw=y.forwardRef((e,t)=>{const{children:n,...r}=e,o=y.Children.toArray(n),a=o.find(qie);if(a){const i=a.props.children,s=o.map(c=>c===a?y.Children.count(i)>1?y.Children.only(null):y.isValidElement(i)?i.props.children:null:c);return p.jsx(Iw,{...r,ref:t,children:y.isValidElement(i)?y.cloneElement(i,void 0,s):null})}return p.jsx(Iw,{...r,ref:t,children:n})});Rw.displayName="Slot";var Iw=y.forwardRef((e,t)=>{const{children:n,...r}=e;if(y.isValidElement(n)){const o=Kie(n);return y.cloneElement(n,{...Yie(r,n.props),ref:t?a4(t,o):o})}return y.Children.count(n)>1?y.Children.only(null):null});Iw.displayName="SlotClone";var Wie=({children:e})=>p.jsx(p.Fragment,{children:e});function qie(e){return y.isValidElement(e)&&e.type===Wie}function Yie(e,t){const n={...t};for(const r in t){const o=e[r],a=t[r];/^on[A-Z]/.test(r)?o&&a?n[r]=(...i)=>{a(...i),o(...i)}:o&&(n[r]=o):r==="style"?n[r]={...o,...a}:r==="className"&&(n[r]=[o,a].filter(Boolean).join(" "))}return{...e,...n}}function Kie(e){var r,o;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(o=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:o.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var Xie=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Oo=Xie.reduce((e,t)=>{const n=y.forwardRef((r,o)=>{const{asChild:a,...i}=r,s=a?Rw:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),p.jsx(s,{...i,ref:o})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function Qie(e,t){e&&cc.flushSync(()=>e.dispatchEvent(t))}var Jie="DismissableLayer",Dw="dismissableLayer.update",Zie="dismissableLayer.pointerDownOutside",Gie="dismissableLayer.focusOutside",i4,s4=y.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),c4=y.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:o,onFocusOutside:a,onInteractOutside:i,onDismiss:s,...c}=e,l=y.useContext(s4),[u,d]=y.useState(null),f=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,h]=y.useState({}),g=ca(t,S=>d(S)),m=Array.from(l.layers),[v]=[...l.layersWithOutsidePointerEventsDisabled].slice(-1),b=m.indexOf(v),x=u?m.indexOf(u):-1,_=l.layersWithOutsidePointerEventsDisabled.size>0,w=x>=b,j=nse(S=>{const C=S.target,M=[...l.branches].some(N=>N.contains(C));!w||M||(o==null||o(S),i==null||i(S),S.defaultPrevented||(s==null||s()))},f),E=rse(S=>{const C=S.target;[...l.branches].some(M=>M.contains(C))||(a==null||a(S),i==null||i(S),S.defaultPrevented||(s==null||s()))},f);return uje(S=>{x===l.layers.size-1&&(r==null||r(S),!S.defaultPrevented&&s&&(S.preventDefault(),s()))},f),y.useEffect(()=>{if(u)return n&&(l.layersWithOutsidePointerEventsDisabled.size===0&&(i4=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),l.layersWithOutsidePointerEventsDisabled.add(u)),l.layers.add(u),l4(),()=>{n&&l.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=i4)}},[u,f,n,l]),y.useEffect(()=>()=>{u&&(l.layers.delete(u),l.layersWithOutsidePointerEventsDisabled.delete(u),l4())},[u,l]),y.useEffect(()=>{const S=()=>h({});return document.addEventListener(Dw,S),()=>document.removeEventListener(Dw,S)},[]),p.jsx(Oo.div,{...c,ref:g,style:{pointerEvents:_?w?"auto":"none":void 0,...e.style},onFocusCapture:sa(e.onFocusCapture,E.onFocusCapture),onBlurCapture:sa(e.onBlurCapture,E.onBlurCapture),onPointerDownCapture:sa(e.onPointerDownCapture,j.onPointerDownCapture)})});c4.displayName=Jie;var ese="DismissableLayerBranch",tse=y.forwardRef((e,t)=>{const n=y.useContext(s4),r=y.useRef(null),o=ca(t,r);return y.useEffect(()=>{const a=r.current;if(a)return n.branches.add(a),()=>{n.branches.delete(a)}},[n.branches]),p.jsx(Oo.div,{...e,ref:o})});tse.displayName=ese;function nse(e,t=globalThis==null?void 0:globalThis.document){const n=An(e),r=y.useRef(!1),o=y.useRef(()=>{});return y.useEffect(()=>{const a=s=>{if(s.target&&!r.current){let c=function(){u4(Zie,n,l,{discrete:!0})};const l={originalEvent:s};s.pointerType==="touch"?(t.removeEventListener("click",o.current),o.current=c,t.addEventListener("click",o.current,{once:!0})):c()}else t.removeEventListener("click",o.current);r.current=!1},i=window.setTimeout(()=>{t.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(i),t.removeEventListener("pointerdown",a),t.removeEventListener("click",o.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function rse(e,t=globalThis==null?void 0:globalThis.document){const n=An(e),r=y.useRef(!1);return y.useEffect(()=>{const o=a=>{a.target&&!r.current&&u4(Gie,n,{originalEvent:a},{discrete:!1})};return t.addEventListener("focusin",o),()=>t.removeEventListener("focusin",o)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function l4(){const e=new CustomEvent(Dw);document.dispatchEvent(e)}function u4(e,t,n,{discrete:r}){const o=n.originalEvent.target,a=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&o.addEventListener(e,t,{once:!0}),r?Qie(o,a):o.dispatchEvent(a)}var Lw="focusScope.autoFocusOnMount",Fw="focusScope.autoFocusOnUnmount",d4={bubbles:!1,cancelable:!0},ose="FocusScope",f4=y.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:o,onUnmountAutoFocus:a,...i}=e,[s,c]=y.useState(null),l=An(o),u=An(a),d=y.useRef(null),f=ca(t,m=>c(m)),h=y.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;y.useEffect(()=>{if(r){let m=function(_){if(h.paused||!s)return;const w=_.target;s.contains(w)?d.current=w:la(d.current,{select:!0})},v=function(_){if(h.paused||!s)return;const w=_.relatedTarget;w!==null&&(s.contains(w)||la(d.current,{select:!0}))},b=function(_){if(document.activeElement===document.body)for(const w of _)w.removedNodes.length>0&&la(s)};document.addEventListener("focusin",m),document.addEventListener("focusout",v);const x=new MutationObserver(b);return s&&x.observe(s,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",m),document.removeEventListener("focusout",v),x.disconnect()}}},[r,s,h.paused]),y.useEffect(()=>{if(s){m4.add(h);const m=document.activeElement;if(!s.contains(m)){const v=new CustomEvent(Lw,d4);s.addEventListener(Lw,l),s.dispatchEvent(v),v.defaultPrevented||(ase(use(p4(s)),{select:!0}),document.activeElement===m&&la(s))}return()=>{s.removeEventListener(Lw,l),setTimeout(()=>{const v=new CustomEvent(Fw,d4);s.addEventListener(Fw,u),s.dispatchEvent(v),v.defaultPrevented||la(m??document.body,{select:!0}),s.removeEventListener(Fw,u),m4.remove(h)},0)}}},[s,l,u,h]);const g=y.useCallback(m=>{if(!n&&!r||h.paused)return;const v=m.key==="Tab"&&!m.altKey&&!m.ctrlKey&&!m.metaKey,b=document.activeElement;if(v&&b){const x=m.currentTarget,[_,w]=ise(x);_&&w?!m.shiftKey&&b===w?(m.preventDefault(),n&&la(_,{select:!0})):m.shiftKey&&b===_&&(m.preventDefault(),n&&la(w,{select:!0})):b===x&&m.preventDefault()}},[n,r,h.paused]);return p.jsx(Oo.div,{tabIndex:-1,...i,ref:f,onKeyDown:g})});f4.displayName=ose;function ase(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(la(r,{select:t}),document.activeElement!==n)return}function ise(e){const t=p4(e),n=h4(t,e),r=h4(t.reverse(),e);return[n,r]}function p4(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const o=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||o?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function h4(e,t){for(const n of e)if(!sse(n,{upTo:t}))return n}function sse(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function cse(e){return e instanceof HTMLInputElement&&"select"in e}function la(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&cse(e)&&t&&e.select()}}var m4=lse();function lse(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=y4(e,t),e.unshift(t)},remove(t){var n;e=y4(e,t),(n=e[0])==null||n.resume()}}}function y4(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function use(e){return e.filter(t=>t.tagName!=="A")}var dse="Arrow",g4=y.forwardRef((e,t)=>{const{children:n,width:r=10,height:o=5,...a}=e;return p.jsx(Oo.svg,{...a,ref:t,width:r,height:o,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:p.jsx("polygon",{points:"0,0 30,0 15,10"})})});g4.displayName=dse;var fse=g4,Bw="Popper",[v4,b4]=Pn(Bw),[pse,x4]=v4(Bw),w4=e=>{const{__scopePopper:t,children:n}=e,[r,o]=y.useState(null);return p.jsx(pse,{scope:t,anchor:r,onAnchorChange:o,children:n})};w4.displayName=Bw;var _4="PopperAnchor",j4=y.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...o}=e,a=x4(_4,n),i=y.useRef(null),s=ca(t,i);return y.useEffect(()=>{a.onAnchorChange((r==null?void 0:r.current)||i.current)}),r?null:p.jsx(Oo.div,{...o,ref:s})});j4.displayName=_4;var $w="PopperContent",[hse,mse]=v4($w),E4=y.forwardRef((e,t)=>{var G,q,W,Z,ee,$;const{__scopePopper:n,side:r="bottom",sideOffset:o=0,align:a="center",alignOffset:i=0,arrowPadding:s=0,avoidCollisions:c=!0,collisionBoundary:l=[],collisionPadding:u=0,sticky:d="partial",hideWhenDetached:f=!1,updatePositionStrategy:h="optimized",onPlaced:g,...m}=e,v=x4($w,n),[b,x]=y.useState(null),_=ca(t,ie=>x(ie)),[w,j]=y.useState(null),E=Gu(w),S=(E==null?void 0:E.width)??0,C=(E==null?void 0:E.height)??0,M=r+(a!=="center"?"-"+a:""),N=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},P=Array.isArray(l)?l:[l],R=P.length>0,A={padding:N,boundary:P.filter(gse),altBoundary:R},{refs:O,floatingStyles:k,placement:T,isPositioned:D,middlewareData:I}=Am({strategy:"fixed",placement:M,whileElementsMounted:(...ie)=>vm(...ie,{animationFrame:h==="always"}),elements:{reference:v.anchor},middleware:[xm({mainAxis:o+C,alignmentAxis:i}),c&&Wm({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?qm():void 0,...A}),c&&Ym({...A}),Km({...A,apply:({elements:ie,rects:ue,availableWidth:me,availableHeight:Te})=>{const{width:Ue,height:He}=ue.reference,Le=ie.floating.style;Le.setProperty("--radix-popper-available-width",`${me}px`),Le.setProperty("--radix-popper-available-height",`${Te}px`),Le.setProperty("--radix-popper-anchor-width",`${Ue}px`),Le.setProperty("--radix-popper-anchor-height",`${He}px`)}}),w&&Xm({element:w,padding:s}),vse({arrowWidth:S,arrowHeight:C}),f&&Qm({strategy:"referenceHidden",...A})]}),[L,B]=O4(T),V=An(g);Bt(()=>{D&&(V==null||V())},[D,V]);const F=(G=I.arrow)==null?void 0:G.x,H=(q=I.arrow)==null?void 0:q.y,Q=((W=I.arrow)==null?void 0:W.centerOffset)!==0,[Y,re]=y.useState();return Bt(()=>{b&&re(window.getComputedStyle(b).zIndex)},[b]),p.jsx("div",{ref:O.setFloating,"data-radix-popper-content-wrapper":"",style:{...k,transform:D?k.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Y,"--radix-popper-transform-origin":[(Z=I.transformOrigin)==null?void 0:Z.x,(ee=I.transformOrigin)==null?void 0:ee.y].join(" "),...(($=I.hide)==null?void 0:$.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:p.jsx(hse,{scope:n,placedSide:L,onArrowChange:j,arrowX:F,arrowY:H,shouldHideArrow:Q,children:p.jsx(Oo.div,{"data-side":L,"data-align":B,...m,ref:_,style:{...m.style,animation:D?void 0:"none"}})})})});E4.displayName=$w;var S4="PopperArrow",yse={top:"bottom",right:"left",bottom:"top",left:"right"},C4=y.forwardRef(function(e,t){const{__scopePopper:n,...r}=e,o=mse(S4,n),a=yse[o.placedSide];return p.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:p.jsx(fse,{...r,ref:t,style:{...r.style,display:"block"}})})});C4.displayName=S4;function gse(e){return e!==null}var vse=e=>({name:"transformOrigin",options:e,fn(t){var m,v,b;const{placement:n,rects:r,middlewareData:o}=t,a=((m=o.arrow)==null?void 0:m.centerOffset)!==0,i=a?0:e.arrowWidth,s=a?0:e.arrowHeight,[c,l]=O4(n),u={start:"0%",center:"50%",end:"100%"}[l],d=(((v=o.arrow)==null?void 0:v.x)??0)+i/2,f=(((b=o.arrow)==null?void 0:b.y)??0)+s/2;let h="",g="";return c==="bottom"?(h=a?u:`${d}px`,g=`${-s}px`):c==="top"?(h=a?u:`${d}px`,g=`${r.floating.height+s}px`):c==="right"?(h=`${-s}px`,g=a?u:`${f}px`):c==="left"&&(h=`${r.floating.width+s}px`,g=a?u:`${f}px`),{data:{x:h,y:g}}}});function O4(e){const[t,n="center"]=e.split("-");return[t,n]}var bse=w4,N4=j4,xse=E4,wse=C4,_se="Portal",M4=y.forwardRef((e,t)=>{var s;const{container:n,...r}=e,[o,a]=y.useState(!1);Bt(()=>a(!0),[]);const i=n||o&&((s=globalThis==null?void 0:globalThis.document)==null?void 0:s.body);return i?dje.createPortal(p.jsx(Oo.div,{...r,ref:t}),i):null});M4.displayName=_se;function jse(e,t){return y.useReducer((n,r)=>t[n][r]??n,e)}var zw=e=>{const{present:t,children:n}=e,r=Ese(t),o=typeof n=="function"?n({present:r.isPresent}):y.Children.only(n),a=ca(r.ref,Sse(o));return typeof n=="function"||r.isPresent?y.cloneElement(o,{ref:a}):null};zw.displayName="Presence";function Ese(e){const[t,n]=y.useState(),r=y.useRef({}),o=y.useRef(e),a=y.useRef("none"),i=e?"mounted":"unmounted",[s,c]=jse(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return y.useEffect(()=>{const l=xp(r.current);a.current=s==="mounted"?l:"none"},[s]),Bt(()=>{const l=r.current,u=o.current;if(u!==e){const d=a.current,f=xp(l);e?c("MOUNT"):f==="none"||(l==null?void 0:l.display)==="none"?c("UNMOUNT"):c(u&&d!==f?"ANIMATION_OUT":"UNMOUNT"),o.current=e}},[e,c]),Bt(()=>{if(t){let l;const u=t.ownerDocument.defaultView??window,d=h=>{const g=xp(r.current).includes(h.animationName);if(h.target===t&&g&&(c("ANIMATION_END"),!o.current)){const m=t.style.animationFillMode;t.style.animationFillMode="forwards",l=u.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=m)})}},f=h=>{h.target===t&&(a.current=xp(r.current))};return t.addEventListener("animationstart",f),t.addEventListener("animationcancel",d),t.addEventListener("animationend",d),()=>{u.clearTimeout(l),t.removeEventListener("animationstart",f),t.removeEventListener("animationcancel",d),t.removeEventListener("animationend",d)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(s),ref:y.useCallback(l=>{l&&(r.current=getComputedStyle(l)),n(l)},[])}}function xp(e){return(e==null?void 0:e.animationName)||"none"}function Sse(e){var r,o;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(o=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:o.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var wp="right-scroll-bar-position",_p="width-before-scroll-bar",Cse="with-scroll-bars-hidden",Ose="--removed-body-scroll-bar-size";function Vw(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function Nse(e,t){var n=y.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var o=n.value;o!==r&&(n.value=r,n.callback(r,o))}}}})[0];return n.callback=t,n.facade}var Mse=typeof window<"u"?y.useLayoutEffect:y.useEffect,k4=new WeakMap;function kse(e,t){var n=Nse(null,function(r){return e.forEach(function(o){return Vw(o,r)})});return Mse(function(){var r=k4.get(n);if(r){var o=new Set(r),a=new Set(e),i=n.current;o.forEach(function(s){a.has(s)||Vw(s,null)}),a.forEach(function(s){o.has(s)||Vw(s,i)})}k4.set(n,e)},[e]),n}var P4=Jm(),Uw=function(){},jp=y.forwardRef(function(e,t){var n=y.useRef(null),r=y.useState({onScrollCapture:Uw,onWheelCapture:Uw,onTouchMoveCapture:Uw}),o=r[0],a=r[1],i=e.forwardProps,s=e.children,c=e.className,l=e.removeScrollBar,u=e.enabled,d=e.shards,f=e.sideCar,h=e.noIsolation,g=e.inert,m=e.allowPinchZoom,v=e.as,b=v===void 0?"div":v,x=e.gapMode,_=ed(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),w=f,j=kse([n,t]),E=Qt(Qt({},_),o);return y.createElement(y.Fragment,null,u&&y.createElement(w,{sideCar:P4,removeScrollBar:l,shards:d,noIsolation:h,inert:g,setCallbacks:a,allowPinchZoom:!!m,lockRef:n,gapMode:x}),i?y.cloneElement(y.Children.only(s),Qt(Qt({},E),{ref:j})):y.createElement(b,Qt({},E,{className:c,ref:j}),s))});jp.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},jp.classNames={fullWidth:_p,zeroRight:wp};function Pse(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=Zm();return t&&e.setAttribute("nonce",t),e}function Ase(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function Tse(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var Rse=function(){var e=0,t=null;return{add:function(n){e==0&&(t=Pse())&&(Ase(t,n),Tse(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},Ise=function(){var e=Rse();return function(t,n){y.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},Dse=function(){var e=Ise(),t=function(n){var r=n.styles,o=n.dynamic;return e(r,o),null};return t},Lse={left:0,top:0,right:0,gap:0},Hw=function(e){return parseInt(e||"",10)||0},Fse=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],o=t[e==="padding"?"paddingRight":"marginRight"];return[Hw(n),Hw(r),Hw(o)]},Bse=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return Lse;var t=Fse(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},$se=Dse(),gs="data-scroll-locked",zse=function(e,t,n,r){var o=e.left,a=e.top,i=e.right,s=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(Cse,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(s,"px ").concat(r,`;
  }
  body[`).concat(gs,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(o,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(i,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(s,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(s,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(wp,` {
    right: `).concat(s,"px ").concat(r,`;
  }
  
  .`).concat(_p,` {
    margin-right: `).concat(s,"px ").concat(r,`;
  }
  
  .`).concat(wp," .").concat(wp,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(_p," .").concat(_p,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(gs,`] {
    `).concat(Ose,": ").concat(s,`px;
  }
`)},A4=function(){var e=parseInt(document.body.getAttribute(gs)||"0",10);return isFinite(e)?e:0},Vse=function(){y.useEffect(function(){return document.body.setAttribute(gs,(A4()+1).toString()),function(){var e=A4()-1;e<=0?document.body.removeAttribute(gs):document.body.setAttribute(gs,e.toString())}},[])},Use=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,o=r===void 0?"margin":r;Vse();var a=y.useMemo(function(){return Bse(o)},[o]);return y.createElement($se,{styles:zse(a,!t,o,n?"":"!important")})},Ww=!1;if(typeof window<"u")try{var Ep=Object.defineProperty({},"passive",{get:function(){return Ww=!0,!0}});window.addEventListener("test",Ep,Ep),window.removeEventListener("test",Ep,Ep)}catch{Ww=!1}var vs=Ww?{passive:!1}:!1,Hse=function(e){return e.tagName==="TEXTAREA"},T4=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!Hse(e)&&n[t]==="visible")},Wse=function(e){return T4(e,"overflowY")},qse=function(e){return T4(e,"overflowX")},R4=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var o=I4(e,r);if(o){var a=D4(e,r),i=a[1],s=a[2];if(i>s)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},Yse=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},Kse=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},I4=function(e,t){return e==="v"?Wse(t):qse(t)},D4=function(e,t){return e==="v"?Yse(t):Kse(t)},Xse=function(e,t){return e==="h"&&t==="rtl"?-1:1},Qse=function(e,t,n,r,o){var a=Xse(e,window.getComputedStyle(t).direction),i=a*r,s=n.target,c=t.contains(s),l=!1,u=i>0,d=0,f=0;do{var h=D4(e,s),g=h[0],m=h[1],v=h[2],b=m-v-a*g;(g||b)&&I4(e,s)&&(d+=b,f+=g),s instanceof ShadowRoot?s=s.host:s=s.parentNode}while(!c&&s!==document.body||c&&(t.contains(s)||t===s));return(u&&(Math.abs(d)<1||!o)||!u&&(Math.abs(f)<1||!o))&&(l=!0),l},Sp=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},L4=function(e){return[e.deltaX,e.deltaY]},F4=function(e){return e&&"current"in e?e.current:e},Jse=function(e,t){return e[0]===t[0]&&e[1]===t[1]},Zse=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},Gse=0,bs=[];function ece(e){var t=y.useRef([]),n=y.useRef([0,0]),r=y.useRef(),o=y.useState(Gse++)[0],a=y.useState(td)[0],i=y.useRef(e);y.useEffect(function(){i.current=e},[e]),y.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(o));var m=Gm([e.lockRef.current],(e.shards||[]).map(F4),!0).filter(Boolean);return m.forEach(function(v){return v.classList.add("allow-interactivity-".concat(o))}),function(){document.body.classList.remove("block-interactivity-".concat(o)),m.forEach(function(v){return v.classList.remove("allow-interactivity-".concat(o))})}}},[e.inert,e.lockRef.current,e.shards]);var s=y.useCallback(function(m,v){if("touches"in m&&m.touches.length===2||m.type==="wheel"&&m.ctrlKey)return!i.current.allowPinchZoom;var b=Sp(m),x=n.current,_="deltaX"in m?m.deltaX:x[0]-b[0],w="deltaY"in m?m.deltaY:x[1]-b[1],j,E=m.target,S=Math.abs(_)>Math.abs(w)?"h":"v";if("touches"in m&&S==="h"&&E.type==="range")return!1;var C=R4(S,E);if(!C)return!0;if(C?j=S:(j=S==="v"?"h":"v",C=R4(S,E)),!C)return!1;if(!r.current&&"changedTouches"in m&&(_||w)&&(r.current=j),!j)return!0;var M=r.current||j;return Qse(M,v,m,M==="h"?_:w,!0)},[]),c=y.useCallback(function(m){var v=m;if(!(!bs.length||bs[bs.length-1]!==a)){var b="deltaY"in v?L4(v):Sp(v),x=t.current.filter(function(j){return j.name===v.type&&(j.target===v.target||v.target===j.shadowParent)&&Jse(j.delta,b)})[0];if(x&&x.should){v.cancelable&&v.preventDefault();return}if(!x){var _=(i.current.shards||[]).map(F4).filter(Boolean).filter(function(j){return j.contains(v.target)}),w=_.length>0?s(v,_[0]):!i.current.noIsolation;w&&v.cancelable&&v.preventDefault()}}},[]),l=y.useCallback(function(m,v,b,x){var _={name:m,delta:v,target:b,should:x,shadowParent:tce(b)};t.current.push(_),setTimeout(function(){t.current=t.current.filter(function(w){return w!==_})},1)},[]),u=y.useCallback(function(m){n.current=Sp(m),r.current=void 0},[]),d=y.useCallback(function(m){l(m.type,L4(m),m.target,s(m,e.lockRef.current))},[]),f=y.useCallback(function(m){l(m.type,Sp(m),m.target,s(m,e.lockRef.current))},[]);y.useEffect(function(){return bs.push(a),e.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:f}),document.addEventListener("wheel",c,vs),document.addEventListener("touchmove",c,vs),document.addEventListener("touchstart",u,vs),function(){bs=bs.filter(function(m){return m!==a}),document.removeEventListener("wheel",c,vs),document.removeEventListener("touchmove",c,vs),document.removeEventListener("touchstart",u,vs)}},[]);var h=e.removeScrollBar,g=e.inert;return y.createElement(y.Fragment,null,g?y.createElement(a,{styles:Zse(o)}):null,h?y.createElement(Use,{gapMode:e.gapMode}):null)}function tce(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const nce=ey(P4,ece);var B4=y.forwardRef(function(e,t){return y.createElement(jp,Qt({},e,{ref:t,sideCar:nce}))});B4.classNames=jp.classNames;var qw="Popover",[$4,Rje]=Pn(qw,[b4]),Bl=b4(),[rce,ua]=$4(qw),z4=e=>{const{__scopePopover:t,children:n,open:r,defaultOpen:o,onOpenChange:a,modal:i=!1}=e,s=Bl(t),c=y.useRef(null),[l,u]=y.useState(!1),[d=!1,f]=nn({prop:r,defaultProp:o,onChange:a});return p.jsx(bse,{...s,children:p.jsx(rce,{scope:t,contentId:mt(),triggerRef:c,open:d,onOpenChange:f,onOpenToggle:y.useCallback(()=>f(h=>!h),[f]),hasCustomAnchor:l,onCustomAnchorAdd:y.useCallback(()=>u(!0),[]),onCustomAnchorRemove:y.useCallback(()=>u(!1),[]),modal:i,children:n})})};z4.displayName=qw;let Yw;Yw="PopoverAnchor",wm=y.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,o=ua(Yw,n),a=Bl(n),{onCustomAnchorAdd:i,onCustomAnchorRemove:s}=o;return y.useEffect(()=>(i(),()=>s()),[i,s]),p.jsx(N4,{...a,...r,ref:t})}),wm.displayName=Yw;var V4="PopoverTrigger",Kw=y.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,o=ua(V4,n),a=Bl(n),i=ca(t,o.triggerRef),s=p.jsx(Oo.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":Y4(o.open),...r,ref:i,onClick:sa(e.onClick,o.onOpenToggle)});return o.hasCustomAnchor?s:p.jsx(N4,{asChild:!0,...a,children:s})});Kw.displayName=V4;var Xw="PopoverPortal",[oce,ace]=$4(Xw,{forceMount:void 0}),U4=e=>{const{__scopePopover:t,forceMount:n,children:r,container:o}=e,a=ua(Xw,t);return p.jsx(oce,{scope:t,forceMount:n,children:p.jsx(zw,{present:n||a.open,children:p.jsx(M4,{asChild:!0,container:o,children:r})})})};U4.displayName=Xw;var xs="PopoverContent",H4=y.forwardRef((e,t)=>{const n=ace(xs,e.__scopePopover),{forceMount:r=n.forceMount,...o}=e,a=ua(xs,e.__scopePopover);return p.jsx(zw,{present:r||a.open,children:a.modal?p.jsx(ice,{...o,ref:t}):p.jsx(sce,{...o,ref:t})})});H4.displayName=xs;var ice=y.forwardRef((e,t)=>{const n=ua(xs,e.__scopePopover),r=y.useRef(null),o=ca(t,r),a=y.useRef(!1);return y.useEffect(()=>{const i=r.current;if(i)return wc(i)},[]),p.jsx(B4,{as:Rw,allowPinchZoom:!0,children:p.jsx(W4,{...e,ref:o,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:sa(e.onCloseAutoFocus,i=>{var s;i.preventDefault(),a.current||((s=n.triggerRef.current)==null||s.focus())}),onPointerDownOutside:sa(e.onPointerDownOutside,i=>{const s=i.detail.originalEvent,c=s.button===0&&s.ctrlKey===!0,l=s.button===2||c;a.current=l},{checkForDefaultPrevented:!1}),onFocusOutside:sa(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1})})})}),sce=y.forwardRef((e,t)=>{const n=ua(xs,e.__scopePopover),r=y.useRef(!1),o=y.useRef(!1);return p.jsx(W4,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var i,s;(i=e.onCloseAutoFocus)==null||i.call(e,a),a.defaultPrevented||(r.current||((s=n.triggerRef.current)==null||s.focus()),a.preventDefault()),r.current=!1,o.current=!1},onInteractOutside:a=>{var s,c;(s=e.onInteractOutside)==null||s.call(e,a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const i=a.target;(c=n.triggerRef.current)!=null&&c.contains(i)&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&o.current&&a.preventDefault()}})}),W4=y.forwardRef((e,t)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:o,onCloseAutoFocus:a,disableOutsidePointerEvents:i,onEscapeKeyDown:s,onPointerDownOutside:c,onFocusOutside:l,onInteractOutside:u,...d}=e,f=ua(xs,n),h=Bl(n);return _c(),p.jsx(f4,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:o,onUnmountAutoFocus:a,children:p.jsx(c4,{asChild:!0,disableOutsidePointerEvents:i,onInteractOutside:u,onEscapeKeyDown:s,onPointerDownOutside:c,onFocusOutside:l,onDismiss:()=>f.onOpenChange(!1),children:p.jsx(xse,{"data-state":Y4(f.open),role:"dialog",id:f.contentId,...h,...d,ref:t,style:{...d.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),q4="PopoverClose",cce=y.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,o=ua(q4,n);return p.jsx(Oo.button,{type:"button",...r,ref:t,onClick:sa(e.onClick,()=>o.onOpenChange(!1))})});cce.displayName=q4;var lce="PopoverArrow",uce=y.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,o=Bl(n);return p.jsx(wse,{...o,...r,ref:t})});uce.displayName=lce;function Y4(e){return e?"open":"closed"}kS=z4,T7=wm,PS=Kw,MS=U4,Tm=H4,zS=kS,L7=PS,ty=y.forwardRef(({className:e,align:t="center",sideOffset:n=4,...r},o)=>p.jsx(MS,{children:p.jsx(Tm,{ref:o,align:t,sideOffset:n,className:K("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})})),ty.displayName=Tm.displayName;var K4=1,dce=.9,fce=.8,pce=.17,Qw=.1,Jw=.999,hce=.9999,mce=.99,yce=/[\\\/_+.#"@\[\(\{&]/,gce=/[\\\/_+.#"@\[\(\{&]/g,vce=/[\s-]/,X4=/[\s-]/g;function Zw(e,t,n,r,o,a,i){if(a===t.length)return o===e.length?K4:mce;var s=`${o},${a}`;if(i[s]!==void 0)return i[s];for(var c=r.charAt(a),l=n.indexOf(c,o),u=0,d,f,h,g;l>=0;)d=Zw(e,t,n,r,l+1,a+1,i),d>u&&(l===o?d*=K4:yce.test(e.charAt(l-1))?(d*=fce,h=e.slice(o,l-1).match(gce),h&&o>0&&(d*=Math.pow(Jw,h.length))):vce.test(e.charAt(l-1))?(d*=dce,g=e.slice(o,l-1).match(X4),g&&o>0&&(d*=Math.pow(Jw,g.length))):(d*=pce,o>0&&(d*=Math.pow(Jw,l-o))),e.charAt(l)!==t.charAt(a)&&(d*=hce)),(d<Qw&&n.charAt(l-1)===r.charAt(a+1)||r.charAt(a+1)===r.charAt(a)&&n.charAt(l-1)!==r.charAt(a))&&(f=Zw(e,t,n,r,l+1,a+2,i),f*Qw>d&&(d=f*Qw)),d>u&&(u=d),l=n.indexOf(c,l+1);return i[s]=u,u}function Q4(e){return e.toLowerCase().replace(X4," ")}function bce(e,t,n){return e=n&&n.length>0?`${e+" "+n.join(" ")}`:e,Zw(e,t,Q4(e),Q4(t),0,0,{})}var $l='[cmdk-group=""]',Gw='[cmdk-group-items=""]',xce='[cmdk-group-heading=""]',e1='[cmdk-item=""]',J4=`${e1}:not([aria-disabled="true"])`,t1="cmdk-item-select",Ja="data-value",wce=(e,t,n)=>bce(e,t,n),Z4=y.createContext(void 0),zl=()=>y.useContext(Z4),G4=y.createContext(void 0),n1=()=>y.useContext(G4),eL=y.createContext(void 0),tL=y.forwardRef((e,t)=>{let n=ws(()=>{var F,H;return{search:"",value:(H=(F=e.value)!=null?F:e.defaultValue)!=null?H:"",filtered:{count:0,items:new Map,groups:new Set}}}),r=ws(()=>new Set),o=ws(()=>new Map),a=ws(()=>new Map),i=ws(()=>new Set),s=nL(e),{label:c,children:l,value:u,onValueChange:d,filter:f,shouldFilter:h,loop:g,disablePointerSelection:m=!1,vimBindings:v=!0,...b}=e,x=mt(),_=mt(),w=mt(),j=y.useRef(null),E=Ace();Za(()=>{if(u!==void 0){let F=u.trim();n.current.value=F,S.emit()}},[u]),Za(()=>{E(6,A)},[]);let S=y.useMemo(()=>({subscribe:F=>(i.current.add(F),()=>i.current.delete(F)),snapshot:()=>n.current,setState:(F,H,Q)=>{var Y,re,G;if(!Object.is(n.current[F],H)){if(n.current[F]=H,F==="search")R(),N(),E(1,P);else if(F==="value"&&(Q||E(5,A),((Y=s.current)==null?void 0:Y.value)!==void 0)){let q=H??"";(G=(re=s.current).onValueChange)==null||G.call(re,q);return}S.emit()}},emit:()=>{i.current.forEach(F=>F())}}),[]),C=y.useMemo(()=>({value:(F,H,Q)=>{var Y;H!==((Y=a.current.get(F))==null?void 0:Y.value)&&(a.current.set(F,{value:H,keywords:Q}),n.current.filtered.items.set(F,M(H,Q)),E(2,()=>{N(),S.emit()}))},item:(F,H)=>(r.current.add(F),H&&(o.current.has(H)?o.current.get(H).add(F):o.current.set(H,new Set([F]))),E(3,()=>{R(),N(),n.current.value||P(),S.emit()}),()=>{a.current.delete(F),r.current.delete(F),n.current.filtered.items.delete(F);let Q=O();E(4,()=>{R(),(Q==null?void 0:Q.getAttribute("id"))===F&&P(),S.emit()})}),group:F=>(o.current.has(F)||o.current.set(F,new Set),()=>{a.current.delete(F),o.current.delete(F)}),filter:()=>s.current.shouldFilter,label:c||e["aria-label"],getDisablePointerSelection:()=>s.current.disablePointerSelection,listId:x,inputId:w,labelId:_,listInnerRef:j}),[]);function M(F,H){var Q,Y;let re=(Y=(Q=s.current)==null?void 0:Q.filter)!=null?Y:wce;return F?re(F,n.current.search,H):0}function N(){if(!n.current.search||s.current.shouldFilter===!1)return;let F=n.current.filtered.items,H=[];n.current.filtered.groups.forEach(Y=>{let re=o.current.get(Y),G=0;re.forEach(q=>{let W=F.get(q);G=Math.max(W,G)}),H.push([Y,G])});let Q=j.current;k().sort((Y,re)=>{var G,q;let W=Y.getAttribute("id"),Z=re.getAttribute("id");return((G=F.get(Z))!=null?G:0)-((q=F.get(W))!=null?q:0)}).forEach(Y=>{let re=Y.closest(Gw);re?re.appendChild(Y.parentElement===re?Y:Y.closest(`${Gw} > *`)):Q.appendChild(Y.parentElement===Q?Y:Y.closest(`${Gw} > *`))}),H.sort((Y,re)=>re[1]-Y[1]).forEach(Y=>{var re;let G=(re=j.current)==null?void 0:re.querySelector(`${$l}[${Ja}="${encodeURIComponent(Y[0])}"]`);G==null||G.parentElement.appendChild(G)})}function P(){let F=k().find(Q=>Q.getAttribute("aria-disabled")!=="true"),H=F==null?void 0:F.getAttribute(Ja);S.setState("value",H||void 0)}function R(){var F,H,Q,Y;if(!n.current.search||s.current.shouldFilter===!1){n.current.filtered.count=r.current.size;return}n.current.filtered.groups=new Set;let re=0;for(let G of r.current){let q=(H=(F=a.current.get(G))==null?void 0:F.value)!=null?H:"",W=(Y=(Q=a.current.get(G))==null?void 0:Q.keywords)!=null?Y:[],Z=M(q,W);n.current.filtered.items.set(G,Z),Z>0&&re++}for(let[G,q]of o.current)for(let W of q)if(n.current.filtered.items.get(W)>0){n.current.filtered.groups.add(G);break}n.current.filtered.count=re}function A(){var F,H,Q;let Y=O();Y&&(((F=Y.parentElement)==null?void 0:F.firstChild)===Y&&((Q=(H=Y.closest($l))==null?void 0:H.querySelector(xce))==null||Q.scrollIntoView({block:"nearest"})),Y.scrollIntoView({block:"nearest"}))}function O(){var F;return(F=j.current)==null?void 0:F.querySelector(`${e1}[aria-selected="true"]`)}function k(){var F;return Array.from(((F=j.current)==null?void 0:F.querySelectorAll(J4))||[])}function T(F){let H=k()[F];H&&S.setState("value",H.getAttribute(Ja))}function D(F){var H;let Q=O(),Y=k(),re=Y.findIndex(q=>q===Q),G=Y[re+F];(H=s.current)!=null&&H.loop&&(G=re+F<0?Y[Y.length-1]:re+F===Y.length?Y[0]:Y[re+F]),G&&S.setState("value",G.getAttribute(Ja))}function I(F){let H=O(),Q=H==null?void 0:H.closest($l),Y;for(;Q&&!Y;)Q=F>0?kce(Q,$l):Pce(Q,$l),Y=Q==null?void 0:Q.querySelector(J4);Y?S.setState("value",Y.getAttribute(Ja)):D(F)}let L=()=>T(k().length-1),B=F=>{F.preventDefault(),F.metaKey?L():F.altKey?I(1):D(1)},V=F=>{F.preventDefault(),F.metaKey?T(0):F.altKey?I(-1):D(-1)};return y.createElement(Ne.div,{ref:t,tabIndex:-1,...b,"cmdk-root":"",onKeyDown:F=>{var H;if((H=b.onKeyDown)==null||H.call(b,F),!F.defaultPrevented)switch(F.key){case"n":case"j":{v&&F.ctrlKey&&B(F);break}case"ArrowDown":{B(F);break}case"p":case"k":{v&&F.ctrlKey&&V(F);break}case"ArrowUp":{V(F);break}case"Home":{F.preventDefault(),T(0);break}case"End":{F.preventDefault(),L();break}case"Enter":if(!F.nativeEvent.isComposing&&F.keyCode!==229){F.preventDefault();let Q=O();if(Q){let Y=new Event(t1);Q.dispatchEvent(Y)}}}}},y.createElement("label",{"cmdk-label":"",htmlFor:C.inputId,id:C.labelId,style:Rce},c),Cp(e,F=>y.createElement(G4.Provider,{value:S},y.createElement(Z4.Provider,{value:C},F))))}),_ce=y.forwardRef((e,t)=>{var n,r;let o=mt(),a=y.useRef(null),i=y.useContext(eL),s=zl(),c=nL(e),l=(r=(n=c.current)==null?void 0:n.forceMount)!=null?r:i==null?void 0:i.forceMount;Za(()=>{if(!l)return s.item(o,i==null?void 0:i.id)},[l]);let u=rL(o,a,[e.value,e.children,a],e.keywords),d=n1(),f=Ga(E=>E.value&&E.value===u.current),h=Ga(E=>l||s.filter()===!1?!0:E.search?E.filtered.items.get(o)>0:!0);y.useEffect(()=>{let E=a.current;if(!(!E||e.disabled))return E.addEventListener(t1,g),()=>E.removeEventListener(t1,g)},[h,e.onSelect,e.disabled]);function g(){var E,S;m(),(S=(E=c.current).onSelect)==null||S.call(E,u.current)}function m(){d.setState("value",u.current,!0)}if(!h)return null;let{disabled:v,value:b,onSelect:x,forceMount:_,keywords:w,...j}=e;return y.createElement(Ne.div,{ref:Vl([a,t]),...j,id:o,"cmdk-item":"",role:"option","aria-disabled":!!v,"aria-selected":!!f,"data-disabled":!!v,"data-selected":!!f,onPointerMove:v||s.getDisablePointerSelection()?void 0:m,onClick:v?void 0:g},e.children)}),jce=y.forwardRef((e,t)=>{let{heading:n,children:r,forceMount:o,...a}=e,i=mt(),s=y.useRef(null),c=y.useRef(null),l=mt(),u=zl(),d=Ga(h=>o||u.filter()===!1?!0:h.search?h.filtered.groups.has(i):!0);Za(()=>u.group(i),[]),rL(i,s,[e.value,e.heading,c]);let f=y.useMemo(()=>({id:i,forceMount:o}),[o]);return y.createElement(Ne.div,{ref:Vl([s,t]),...a,"cmdk-group":"",role:"presentation",hidden:d?void 0:!0},n&&y.createElement("div",{ref:c,"cmdk-group-heading":"","aria-hidden":!0,id:l},n),Cp(e,h=>y.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":n?l:void 0},y.createElement(eL.Provider,{value:f},h))))}),Ece=y.forwardRef((e,t)=>{let{alwaysRender:n,...r}=e,o=y.useRef(null),a=Ga(i=>!i.search);return!n&&!a?null:y.createElement(Ne.div,{ref:Vl([o,t]),...r,"cmdk-separator":"",role:"separator"})}),Sce=y.forwardRef((e,t)=>{let{onValueChange:n,...r}=e,o=e.value!=null,a=n1(),i=Ga(u=>u.search),s=Ga(u=>u.value),c=zl(),l=y.useMemo(()=>{var u;let d=(u=c.listInnerRef.current)==null?void 0:u.querySelector(`${e1}[${Ja}="${encodeURIComponent(s)}"]`);return d==null?void 0:d.getAttribute("id")},[]);return y.useEffect(()=>{e.value!=null&&a.setState("search",e.value)},[e.value]),y.createElement(Ne.input,{ref:t,...r,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":c.listId,"aria-labelledby":c.labelId,"aria-activedescendant":l,id:c.inputId,type:"text",value:o?e.value:i,onChange:u=>{o||a.setState("search",u.target.value),n==null||n(u.target.value)}})}),Cce=y.forwardRef((e,t)=>{let{children:n,label:r="Suggestions",...o}=e,a=y.useRef(null),i=y.useRef(null),s=zl();return y.useEffect(()=>{if(i.current&&a.current){let c=i.current,l=a.current,u,d=new ResizeObserver(()=>{u=requestAnimationFrame(()=>{let f=c.offsetHeight;l.style.setProperty("--cmdk-list-height",f.toFixed(1)+"px")})});return d.observe(c),()=>{cancelAnimationFrame(u),d.unobserve(c)}}},[]),y.createElement(Ne.div,{ref:Vl([a,t]),...o,"cmdk-list":"",role:"listbox","aria-label":r,id:s.listId},Cp(e,c=>y.createElement("div",{ref:Vl([i,s.listInnerRef]),"cmdk-list-sizer":""},c)))}),Oce=y.forwardRef((e,t)=>{let{open:n,onOpenChange:r,overlayClassName:o,contentClassName:a,container:i,...s}=e;return y.createElement(mc,{open:n,onOpenChange:r},y.createElement(yc,{container:i},y.createElement(Ca,{"cmdk-overlay":"",className:o}),y.createElement(Oa,{"aria-label":e.label,"cmdk-dialog":"",className:a},y.createElement(tL,{ref:t,...s}))))}),Nce=y.forwardRef((e,t)=>Ga(n=>n.filtered.count===0)?y.createElement(Ne.div,{ref:t,...e,"cmdk-empty":"",role:"presentation"}):null),Mce=y.forwardRef((e,t)=>{let{progress:n,children:r,label:o="Loading...",...a}=e;return y.createElement(Ne.div,{ref:t,...a,"cmdk-loading":"",role:"progressbar","aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,"aria-label":o},Cp(e,i=>y.createElement("div",{"aria-hidden":!0},i)))}),Nn=Object.assign(tL,{List:Cce,Item:_ce,Input:Sce,Group:jce,Separator:Ece,Dialog:Oce,Empty:Nce,Loading:Mce});function kce(e,t){let n=e.nextElementSibling;for(;n;){if(n.matches(t))return n;n=n.nextElementSibling}}function Pce(e,t){let n=e.previousElementSibling;for(;n;){if(n.matches(t))return n;n=n.previousElementSibling}}function nL(e){let t=y.useRef(e);return Za(()=>{t.current=e}),t}var Za=typeof window>"u"?y.useEffect:y.useLayoutEffect;function ws(e){let t=y.useRef();return t.current===void 0&&(t.current=e()),t}function Vl(e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}function Ga(e){let t=n1(),n=()=>e(t.snapshot());return Zu.useSyncExternalStore(t.subscribe,n,n)}function rL(e,t,n,r=[]){let o=y.useRef(),a=zl();return Za(()=>{var i;let s=(()=>{var l;for(let u of n){if(typeof u=="string")return u.trim();if(typeof u=="object"&&"current"in u)return u.current?(l=u.current.textContent)==null?void 0:l.trim():o.current}})(),c=r.map(l=>l.trim());a.value(e,s,c),(i=t.current)==null||i.setAttribute(Ja,s),o.current=s}),o}var Ace=()=>{let[e,t]=y.useState(),n=ws(()=>new Map);return Za(()=>{n.current.forEach(r=>r()),n.current=new Map},[e]),(r,o)=>{n.current.set(r,o),t({})}};function Tce(e){let t=e.type;return typeof t=="function"?t(e.props):"render"in t?t.render(e.props):e}function Cp({asChild:e,children:t},n){return e&&y.isValidElement(t)?y.cloneElement(Tce(t),{ref:t.ref},n(t.props.children)):n(t)}var Rce={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const oL=y.forwardRef(({className:e,...t},n)=>p.jsx(Nn,{ref:n,className:K("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",e),...t}));oL.displayName=Nn.displayName;const aL=y.forwardRef(({className:e,...t},n)=>p.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[p.jsx(le,{name:"search",className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),p.jsx(Nn.Input,{ref:n,className:K("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",e),...t})]}));aL.displayName=Nn.Input.displayName;const iL=y.forwardRef(({className:e,...t},n)=>p.jsx(Nn.List,{ref:n,className:K("max-h-[300px] overflow-y-auto overflow-x-hidden",e),...t}));iL.displayName=Nn.List.displayName;const sL=y.forwardRef((e,t)=>p.jsx(Nn.Empty,{ref:t,className:"py-6 text-center text-sm",...e}));sL.displayName=Nn.Empty.displayName;const cL=y.forwardRef(({className:e,...t},n)=>p.jsx(Nn.Group,{ref:n,className:K("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",e),...t}));cL.displayName=Nn.Group.displayName;const Ice=y.forwardRef(({className:e,...t},n)=>p.jsx(Nn.Separator,{ref:n,className:K("-mx-1 h-px bg-border",e),...t}));Ice.displayName=Nn.Separator.displayName;const lL=y.forwardRef(({className:e,...t},n)=>p.jsx(Nn.Item,{ref:n,className:K("relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",e),...t}));lL.displayName=Nn.Item.displayName;const Dce=[rd.WebLLM];function Lce(e){var O;const{id:t,setDialog:n}=e,{t:r}=Me("components"),{toast:o}=$t(),a=fn(t),[i,s]=y.useState(""),[c,l]=y.useState(!1),[u,d]=y.useState(""),[f,h]=y.useState(rd.WebLLM),[g,m]=y.useState(!1),[v,b]=y.useState(),x=un(k=>k.syncCachedLLMURLs),_=un(k=>k.cachedLLMURLs),{loading:w,createDatabaseLLM:j}=r4();y.useEffect(()=>{vt(()=>import("./index-CSFZaYIn.js").then(async k=>(await k.__tla,k)),__vite__mapDeps([3,1,2])).then(async({functionCallingModelIds:k,prebuiltAppConfig:T})=>{const D=T.model_list;b({modelList:D,functionCallingModelIds:k})})},[]),y.useEffect(()=>{x()},[x]);const E=y.useMemo(()=>!(v!=null&&v.functionCallingModelIds)||!(v!=null&&v.modelList)?[]:((u?v==null?void 0:v.modelList.filter(k=>k.model_id.toLowerCase().includes(u.toLowerCase())):v==null?void 0:v.modelList)||[]).sort((k,T)=>{const D=_.some(H=>H.includes(k.model_id)),I=_.some(H=>H.includes(T.model_id));if(D&&!I)return-1;if(!D&&I)return 1;const L=Zx.includes(k.model_id),B=Zx.includes(T.model_id);if(L&&!B)return-1;if(!L&&B)return 1;const V=v==null?void 0:v.functionCallingModelIds.includes(k.model_id),F=v==null?void 0:v.functionCallingModelIds.includes(T.model_id);return V&&!F?-1:!V&&F?1:k.vram_required_MB&&T.vram_required_MB&&k.vram_required_MB!==T.vram_required_MB?k.vram_required_MB-T.vram_required_MB:k.model_id.localeCompare(T.model_id)}),[v==null?void 0:v.modelList,v==null?void 0:v.functionCallingModelIds,u,_]),S=y.useMemo(()=>{if(!(!i||!(v!=null&&v.modelList)))return v==null?void 0:v.modelList.find(k=>k.model_id===i)},[i,v==null?void 0:v.modelList]);y.useEffect(()=>{!(S!=null&&S.model_id)||!_||m(_.some(k=>k.includes(S.model_id)))},[_,S==null?void 0:S.model_id]);const C=y.useCallback(k=>k===1?Sc.embedding:k===2?Sc.VLM:Sc.LLM,[]),M=y.useCallback(k=>{s(k),l(!1)},[]),N=y.useCallback(k=>{d(k)},[]),P=y.useCallback(k=>{h(k)},[]),R=async()=>{var k;if(a)try{await j(a,{name:i,model_type:C(S==null?void 0:S.model_type),function_calling:S!=null&&S.model_id?(k=v==null?void 0:v.functionCallingModelIds)==null?void 0:k.includes(S==null?void 0:S.model_id):!1}),n==null||n(!1)}catch{o({variant:"destructive",description:r("add_llm_card.errors.failed_to_create")})}finally{s("")}},A=y.useMemo(()=>E.map(k=>{var T;return p.jsxs(lL,{value:k.model_id,onSelect:M,children:[i===k.model_id?p.jsx(le,{name:"check",className:"mr-2 h-4 w-4"}):p.jsx("div",{className:"mr-2 h-4 w-4"}),p.jsxs("span",{className:"max-w-md",children:[p.jsxs("div",{className:"flex gap-2 mb-2",children:[p.jsx(jo,{name:k.model_id}),k.model_id]}),p.jsx("div",{className:"flex max-w-full flex-wrap gap-1",children:p.jsx(Dl,{model:k,isFunctionCalling:((T=v==null?void 0:v.functionCallingModelIds)==null?void 0:T.includes(k.model_id))||!1,name:k.model_id,isCached:_.some(D=>D.includes(k.model_id))||!1})})]})]},k.model_id)}),[_,M,i,v==null?void 0:v.functionCallingModelIds,E]);return p.jsxs(Tt,{className:"max-w-lg",children:[p.jsx(gn,{children:p.jsx(Cn,{children:r("add_llm_card.title")})}),p.jsxs(vn,{children:[p.jsxs("div",{className:"grid w-full gap-1.5",children:[p.jsx(Je,{children:r("add_llm_card.provider")}),p.jsxs(Eo,{value:f,onValueChange:P,children:[p.jsx(Hr,{className:"w-full mb-4",children:p.jsx(So,{placeholder:r("add_llm_card.provider_select_placeholder")})}),p.jsx(Wr,{children:Object.values(Dce).map(k=>p.jsx(On,{value:k,children:r(`add_llm_card.providers.${k.toLowerCase()}`)},k))})]}),p.jsx(Je,{children:r("add_llm_card.model_name")}),p.jsxs(zS,{open:c,onOpenChange:l,children:[p.jsx(Kw,{asChild:!0,children:p.jsxs(ot,{variant:"outline",role:"combobox","aria-expanded":c,className:"w-full justify-between",children:[i?S==null?void 0:S.model_id:r("add_llm_card.select_model_placeholder"),p.jsx(le,{name:"chevrons-up-down",className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),p.jsx(ty,{className:"w-full p-0",children:p.jsxs(oL,{children:[p.jsx(aL,{onValueChange:N,placeholder:r("add_llm_card.search_placeholder")}),p.jsxs(iL,{children:[p.jsx(sL,{children:r("add_llm_card.no_model")}),p.jsx(cL,{children:A})]})]})})]})]}),S?p.jsxs("div",{className:"mt-4",children:[p.jsxs("div",{className:"mt-4 text-sm text-muted-foreground center flex max-w-full flex-wrap gap-1",children:[p.jsx(jo,{name:S.model_id,className:"mr-2"}),p.jsx(Dl,{model:S,isFunctionCalling:((O=v==null?void 0:v.functionCallingModelIds)==null?void 0:O.includes(S.model_id))||!1,name:S.model_id,isCached:_.some(k=>k.includes(S.model_id))||!1})]}),p.jsxs("div",{className:"mt-2 text-sm text-muted-foreground",children:[p.jsx("span",{className:"font-bold mr-2",children:r("add_llm_card.model_url")}),S.model]}),p.jsxs("div",{className:"mt-2 text-sm text-muted-foreground center flex",children:[p.jsx("span",{className:"font-bold mr-2",children:r("add_llm_card.model_lib_url")}),S.model_lib]}),p.jsxs("div",{className:"mt-2 text-sm text-muted-foreground center flex",children:[p.jsx("span",{className:"font-bold mr-2",children:r("add_llm_card.metadata")}),JSON.stringify(S.overrides)]})]}):null]}),p.jsx(oa,{className:"flex justify-between",children:p.jsx(jn,{loading:w,disabled:!(i!=null&&i.length),onClick:R,className:"w-full",children:r(g?"add_llm_card.button_add":"add_llm_card.button_download_and_add")})})]})}const uL=()=>{const e=Ze(a=>{var i;return(i=a.currentSession)==null?void 0:i.id}),[t,n]=y.useState(!1),r=Ae(a=>a.createOrUpdateFlowNode),o=y.useCallback(async(a,i)=>{var s,c,l;try{if(!a||!e)throw new Error("Source or Session not found");n(!0);const u=((s=a.position)==null?void 0:s.x)||0,d=(((c=a.position)==null?void 0:c.y)||0)+(((l=a.measured)==null?void 0:l.height)||0),f=await ce("Prompt").save({content:i.content,prefix:i.prefix,role:i.role||Tn.System,status:eo.Started,session_id:e,type:i.type||Rn.Chat});if(!f)throw new Error("Failed to save prompt");if(!await r({source_id:f.id,source_type:"Prompt",node_type:oe.Prompt,x:u,y:d+20}))throw new Error("Failed to save prompt node")}finally{n(!1)}},[e,r]);return{loading:t,createPrompt:o}},Fce={[Rn.Chat]:{label:"add_prompt_card.prompt_types.chat",value:Rn.Chat},[Rn.FewShotExample]:{label:"add_prompt_card.prompt_types.few_shot_example",value:Rn.FewShotExample}},Bce={[Tn.System]:{label:"add_prompt_card.prompt_roles.system",value:Tn.System},[Tn.Human]:{label:"add_prompt_card.prompt_roles.human",value:Tn.Human},[Tn.AI]:{label:"add_prompt_card.prompt_roles.ai",value:Tn.AI}},r1=y.memo(({defaultPromptContent:e,defaultPromptRole:t,defaultPromptType:n,hidePromptRole:r,hidePromptType:o,loading:a,onSubmit:i})=>{const[s,c]=y.useState(e||""),[l,u]=y.useState(n||Rn.Chat),[d,f]=y.useState(t),[h,g]=y.useState(""),{t:m}=Me("components"),v=y.useCallback(j=>{c(j.target.value)},[]),b=y.useCallback(j=>{g(j.target.value)},[]),x=y.useCallback(j=>{j===Rn.FewShotExample&&c(`Question: {input}
Answer: {output}`),u(j)},[]),_=y.useCallback(j=>{f(j)},[]),w=async()=>{await i({content:s,role:d,prefix:h,type:l})&&(c(""),f(void 0),u("chat"),g(""))};return p.jsxs("div",{children:[p.jsxs("div",{className:"grid w-full gap-1.5",children:[o?void 0:p.jsxs(p.Fragment,{children:[p.jsx(Je,{children:m("add_prompt_card.prompt_type")}),p.jsxs(Eo,{value:l,onValueChange:x,children:[p.jsx(Hr,{className:"w-full mb-4",children:p.jsx(So,{placeholder:m("add_prompt_card.type_select_placeholder")})}),p.jsx(Wr,{children:Object.values(Fce).map(j=>p.jsx(On,{value:j.value,children:m(j.label)},j.value))})]})]}),r?void 0:p.jsxs(p.Fragment,{children:[p.jsx(Je,{children:m("add_prompt_card.prompt_role")}),p.jsxs(Eo,{value:d,onValueChange:_,children:[p.jsx(Hr,{className:"w-full mb-4",children:p.jsx(So,{placeholder:m("add_prompt_card.role_select_placeholder")})}),p.jsx(Wr,{children:Object.values(Bce).map(j=>p.jsx(On,{value:j.value,children:m(j.label)},j.value))})]})]}),l===Rn.FewShotExample&&p.jsxs(p.Fragment,{children:[p.jsx(Je,{children:m("add_prompt_card.prompt_prefix")}),p.jsx(ho,{value:h,onChange:b,disabled:!1,className:"h-20",placeholder:m("add_prompt_card.placeholder"),id:"message"}),p.jsx(Je,{children:m("add_prompt_card.prompt_content")}),p.jsxs("div",{className:"w-full border-0 text-gray-700 flex text-sm justify-end items-center",children:[p.jsx(le,{name:"info",className:"mr-2",size:14}),m("add_prompt_card.few_shot_example_note")]})]}),p.jsx(ho,{value:s,onChange:v,disabled:!1,placeholder:m("add_prompt_card.placeholder"),id:"message"})]}),p.jsx("div",{children:p.jsx(jn,{loading:a,disabled:!(s!=null&&s.length),onClick:w,className:"w-full mt-4",children:m("add_prompt_card.button")})})]})}),$ce=y.memo(e=>{const{id:t,thread:n,setDialog:r}=e,{t:o}=Me("components"),{toast:a}=$t(),i=fn(t),{createPrompt:s,loading:c}=uL(),l=async u=>{if(i)try{if(!(u!=null&&u.content))throw new Error("Prompt data is missing");await s(i,{...u,content:u.content,thread:n}),r==null||r(!1)}catch(d){a({variant:"destructive",title:`${d}`})}};return p.jsxs(Tt,{className:"mw-full",children:[p.jsx(gn,{children:p.jsx(Cn,{children:o("add_prompt_card.title")})}),p.jsx(vn,{children:p.jsx(r1,{onSubmit:l,loading:c,defaultPromptRole:"system",defaultPromptType:"chat"})})]})}),zce=()=>{const e=Ze(i=>{var s;return(s=i.currentSession)==null?void 0:s.id}),[t,n]=y.useState(!1),r=Ae(i=>i.createOrUpdateFlowNode),o=y.useCallback((i,s,c,l)=>{var u;if(e){for(const d of s)(u=d.data)!=null&&u.length?o(i,d.data,c,d.id):c.push({name:d.name,type:d.type,enum:d.enum?JSON.stringify(d.enum):"",required:d.required,description:d.description,id:d.id||Yc(),parent_id:l,schema_id:i,session_id:e});return c}},[e]),a=y.useCallback(async(i,s)=>{var c,l,u;try{if(!i||!e)throw new Error("Source or Session not found");n(!0);const d=((c=i.position)==null?void 0:c.x)||0,f=(((l=i.position)==null?void 0:l.y)||0)+(((u=i.measured)==null?void 0:u.height)||0),h=await ce("Schema").save({name:"Untitled Schema",session_id:e});if(!h)throw new Error("Failed to save schema");const g=o(h.id,s,[],void 0);if(!(g!=null&&g.length))throw new Error("Failed to convert schema items");if(await ce("SchemaItem").save(g),!await r({source_id:h.id,source_type:"Schema",node_type:oe.Schema,x:d,y:f+20}))throw new Error("Failed to save schema node")}finally{n(!1)}},[e,o,r]);return{loading:t,createSchema:a}};var o1="Checkbox",[Vce,Ije]=Pn(o1),[Uce,Hce]=Vce(o1),dL=y.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:r,checked:o,defaultChecked:a,required:i,disabled:s,value:c="on",onCheckedChange:l,form:u,...d}=e,[f,h]=y.useState(null),g=lt(t,w=>h(w)),m=y.useRef(!1),v=f?u||!!f.closest("form"):!0,[b=!1,x]=nn({prop:o,defaultProp:a,onChange:l}),_=y.useRef(b);return y.useEffect(()=>{const w=f==null?void 0:f.form;if(w){const j=()=>x(_.current);return w.addEventListener("reset",j),()=>w.removeEventListener("reset",j)}},[f,x]),p.jsxs(Uce,{scope:n,state:b,disabled:s,children:[p.jsx(Ne.button,{type:"button",role:"checkbox","aria-checked":da(b)?"mixed":b,"aria-required":i,"data-state":hL(b),"data-disabled":s?"":void 0,disabled:s,value:c,...d,ref:g,onKeyDown:ye(e.onKeyDown,w=>{w.key==="Enter"&&w.preventDefault()}),onClick:ye(e.onClick,w=>{x(j=>da(j)?!0:!j),v&&(m.current=w.isPropagationStopped(),m.current||w.stopPropagation())})}),v&&p.jsx(Wce,{control:f,bubbles:!m.current,name:r,value:c,checked:b,required:i,disabled:s,form:u,style:{transform:"translateX(-100%)"},defaultChecked:da(a)?!1:a})]})});dL.displayName=o1;var fL="CheckboxIndicator",pL=y.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:r,...o}=e,a=Hce(fL,n);return p.jsx(rr,{present:r||da(a.state)||a.state===!0,children:p.jsx(Ne.span,{"data-state":hL(a.state),"data-disabled":a.disabled?"":void 0,...o,ref:t,style:{pointerEvents:"none",...e.style}})})});pL.displayName=fL;var Wce=e=>{const{control:t,checked:n,bubbles:r=!0,defaultChecked:o,...a}=e,i=y.useRef(null),s=KD(n),c=Gu(t);y.useEffect(()=>{const u=i.current,d=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(d,"checked").set;if(s!==n&&f){const h=new Event("click",{bubbles:r});u.indeterminate=da(n),f.call(u,da(n)?!1:n),u.dispatchEvent(h)}},[s,n,r]);const l=y.useRef(da(n)?!1:n);return p.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:o??l.current,...a,tabIndex:-1,ref:i,style:{...e.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function da(e){return e==="indeterminate"}function hL(e){return da(e)?"indeterminate":e?"checked":"unchecked"}jm=dL,CS=pL;const mL=y.forwardRef(({className:e,...t},n)=>p.jsx(jm,{ref:n,className:K("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:p.jsx(CS,{className:K("flex items-center justify-center text-current"),children:p.jsx(le,{name:"check",className:"h-4 w-4"})})}));mL.displayName=jm.displayName;const yL=y.memo(({setData:e,data:t,id:n})=>{const{t:r}=Me("components"),[o,a]=y.useState({name:"",description:"",type:"string",required:!1,data:[]}),i=y.useMemo(()=>n&&t.find(m=>m.id===n)||o,[t,o,n]),s=y.useCallback(m=>{m.target.value&&!/^[a-zA-Z_][a-zA-Z0-9_]*$/.test(m.target.value)||(n?e(v=>[...v.map(b=>b.id===n?{...b,name:m.target.value||""}:b)]):a(v=>({...v,name:m.target.value||""})))},[n,e]),c=y.useCallback(m=>{n?e(v=>[...v.map(b=>b.id===n?{...b,description:m.target.value||""}:b)]):a(v=>({...v,description:m.target.value||""}))},[n,e]),l=y.useCallback(m=>{n?e(v=>[...v.map(b=>b.id===n?{...b,type:m||""}:b)]):a(v=>({...v,type:m||"string"}))},[n,e]),u=y.useCallback(m=>{n?e(v=>[...v.map(b=>b.id===n?{...b,required:!!m||!1}:b)]):a(v=>({...v,required:!!m||!1}))},[n,e]),d=y.useCallback(m=>{n?e(v=>[...v.map(b=>b.id===n?{...b,enum:m.target.value||""}:b)]):a(v=>({...v,enum:m.target.value||""}))},[n,e]),f=y.useCallback(()=>{if(t.find(m=>m.name===o.name))return dc({variant:"destructive",content:"Name already exists"});o.id=Yc(),e(m=>[...m,{...o}]),a({name:"",description:"",type:"string",required:!1,id:Yc(),parent:n||void 0,data:[]})},[t,o,e,n]),h=y.useCallback(m=>{e(v=>[...v.map(b=>b.id===n?{...b,data:m(b.data||[])}:b)])},[n,e]),g=["object","array"].includes(i.type);return p.jsxs("div",{className:"w-full p-1",children:[p.jsxs("div",{children:[p.jsx(Je,{children:r("add_schema_card.field.name")}),p.jsx(hn,{id:"name",onChange:s,placeholder:r("add_schema_card.field.name_placeholder"),value:(i==null?void 0:i.name)||""})]}),p.jsxs("div",{children:[p.jsx(Je,{children:r("add_schema_card.field.description")}),p.jsx(hn,{id:"description",placeholder:r("add_schema_card.field.description_placeholder"),onChange:c,value:(i==null?void 0:i.description)||""})]}),p.jsxs("div",{children:[p.jsx(Je,{children:r("add_schema_card.field.type")}),p.jsxs(Eo,{onValueChange:l,value:(i==null?void 0:i.type)||"",children:[p.jsx(Hr,{children:p.jsx(So,{placeholder:r("add_schema_card.field.type_placeholder")})}),p.jsxs(Wr,{children:[p.jsx(On,{value:"string",children:r("add_schema_card.types.string")}),p.jsx(On,{value:"boolean",children:r("add_schema_card.types.boolean")}),p.jsx(On,{value:"number",children:r("add_schema_card.types.number")}),p.jsx(On,{value:"object",children:r("add_schema_card.types.object")}),p.jsx(On,{value:"array",children:r("add_schema_card.types.array")})]})]})]}),p.jsxs("div",{className:"flex items-center h-10",children:[p.jsx(Je,{children:r("add_schema_card.field.required")}),p.jsx(mL,{className:"ml-2","aria-label":"Select row",onCheckedChange:u,checked:i==null?void 0:i.required})]}),g?p.jsxs("div",{className:"mt-2 flex flex-col gap-2",children:[p.jsx(Je,{children:r("add_schema_card.children")}),p.jsx(gL,{data:(i==null?void 0:i.data)||[],setData:h})]}):null,(i==null?void 0:i.type)==="enum"?p.jsxs("div",{className:"mt-2 flex flex-col gap-2",children:[p.jsx(Je,{children:r("add_schema_card.field.enum")}),p.jsx(hn,{id:"enum",onChange:d,placeholder:"Enum"})]}):null,n?null:p.jsx("div",{className:"w-full flex justify-end mt-2",children:p.jsx(ot,{variant:"secondary",disabled:!i.name||!i.description||!i.type,onClick:f,className:"w-full",children:r("add_schema_card.field.add_field")})})]})}),gL=y.memo(({data:e,setData:t})=>p.jsxs(H3,{type:"single",collapsible:!0,children:[e.map(n=>p.jsxs(fw,{value:`${n.id}`,children:[p.jsx(pw,{children:n.name}),p.jsx(hw,{children:p.jsx(yL,{setData:t,data:e,id:n.id})})]},n.id||"new")),p.jsx(Tt,{className:"p-2 mt-4",children:p.jsx(yL,{setData:t,data:e})})]})),qce=y.memo(e=>{const{t}=Me("components"),{id:n}=e,r=fn(n),[o,a]=y.useState([]),{createSchema:i,loading:s}=zce(),c=async()=>{if(r&&(o!=null&&o.length))try{await i(r,o),a([])}catch(l){dc({variant:"destructive",title:`${l}`})}};return p.jsxs(Tt,{className:"max-w-lg",children:[p.jsx(gn,{children:p.jsx(Cn,{children:t("add_schema_card.title")})}),p.jsx(vn,{className:"min-w-96",children:p.jsx(gL,{setData:a,data:o})}),p.jsx(oa,{className:"flex justify-between",children:p.jsx(jn,{loading:s,disabled:!(o!=null&&o.length),onClick:c,className:"w-full",children:t("add_schema_card.create")})})]})}),vL=()=>{const e=Ze(a=>{var i;return(i=a.currentSession)==null?void 0:i.id}),[t,n]=y.useState(!1),r=Ae(a=>a.createOrUpdateFlowNode),o=y.useCallback(async(a,i,s)=>{var c,l,u;try{if(!a||!e)throw new Error("Source or Session not found");n(!0);const d=((c=a.position)==null?void 0:c.x)||0,f=(((l=a.position)==null?void 0:l.y)||0)+(((u=a.measured)==null?void 0:u.height)||0),h=fje(i,s),g=await ce("CSVData").save({headers:h.headers,csv:h.data,session_id:e});if(!g)throw new Error("Failed to save");if(!await r({source_id:g.id,source_type:"CSVData",node_type:oe.CSVData,x:d,y:f+20}))throw new Error("Failed to save node")}finally{n(!1)}},[e,r]);return{loading:t,createCSVData:o}};function Yce({data:e}){const{t}=Me("components");return p.jsxs(fp,{className:"w-full",children:[p.jsx(pp,{children:p.jsxs(Qa,{children:[p.jsx(hs,{children:t("add_few_shot_example_card.input")}),p.jsx(hs,{children:t("add_few_shot_example_card.output")})]})}),p.jsx(hp,{children:e==null?void 0:e.map((n,r)=>p.jsxs(Qa,{children:[p.jsx(ms,{className:"p-4",children:n.input}),p.jsx(ms,{className:"p-4",children:n.output})]},`${n.input}_${n.output}_${r}`))})]})}const Kce=y.memo(e=>{const{id:t}=e,{t:n}=Me("components"),[r,o]=y.useState([]),[a,i]=y.useState(""),[s,c]=y.useState(""),l=fn(t),{createCSVData:u,loading:d}=vL(),f=()=>{o(g=>[...g,{input:a,output:s}]),i(""),c("")},h=async()=>{l&&await u(l,["input","output"],r.map(g=>[g.input,g.output]))};return p.jsxs(Tt,{className:"mw-full",children:[p.jsx(gn,{children:p.jsx(Cn,{children:n("add_few_shot_example_card.title")})}),p.jsxs(vn,{children:[p.jsxs("div",{className:"flex flex-col space-y-1.5",children:[p.jsx(Je,{htmlFor:"name",children:n("add_few_shot_example_card.input")}),p.jsx(hn,{value:a,onChange:g=>i(g.target.value||""),id:"name",placeholder:n("add_few_shot_example_card.input_placeholder")})]}),p.jsxs("div",{className:"flex flex-col space-y-1.5 mt-3",children:[p.jsx(Je,{htmlFor:"name",children:n("add_few_shot_example_card.output")}),p.jsx(ho,{value:s,onChange:g=>c(g.target.value||""),placeholder:n("add_few_shot_example_card.output_placeholder")})]}),p.jsx("div",{className:"w-full flex mt-4 justify-end",children:p.jsx(ot,{disabled:!a||!s,onClick:f,className:"w-40",children:n("add_few_shot_example_card.add")})}),p.jsx(Yce,{data:r||[]})]}),p.jsx(oa,{className:"flex justify-between",children:p.jsx(jn,{loading:d,disabled:!(r!=null&&r.length),onClick:h,className:"w-full",children:n("add_few_shot_example_card.create")})})]})}),Xce=()=>{const e=Ze(i=>{var s;return(s=i.currentSession)==null?void 0:s.id}),[t,n]=y.useState(!1),r=Ae(i=>i.createOrUpdateFlowNode),o=Ae(i=>i.createOrUpdateFlowEdge),a=y.useCallback(async(i,s,c)=>{var l,u,d;try{if(!i||!e)throw new Error("Source or Session not found");if(!s.name||!s.description)throw new Error("Name is required");n(!0);const f=((l=i.position)==null?void 0:l.x)||0,h=(((u=i.position)==null?void 0:u.y)||0)+(((d=i.measured)==null?void 0:d.height)||0),g=await ce("ToolDefinition").save({...s,name:`${s.name}`,description:`${s.description}`,session_id:e});if(!g)throw new Error("Failed create tool.");const m=await r({source_id:g.id,source_type:"ToolDefinition",node_type:oe.ToolDefinition,x:f,y:h+20});if(!m)throw new Error("Failed to save node");c!=null&&c.schemaNode&&await o({source:c.schemaNode.id,target:m.id})}finally{n(!1)}},[e,r,o]);return{loading:t,createTool:a}},Qce=y.memo(e=>{const{t}=Me("components"),{toast:n}=$t(),{id:r}=e,o=fn(r),[a,i]=y.useState(""),[s,c]=y.useState(""),{createTool:l,loading:u}=Xce(),d=g=>{i(g.target.value)},f=g=>{c(g.target.value)},h=async()=>{if(o&&a&&s)try{await l(o,{name:a,description:s}),i(""),c("")}catch(g){Mr(g),n({variant:"destructive",title:t("add_tool_card.errors.create_tool_failed")})}};return p.jsxs(Tt,{className:"mw-full",children:[p.jsx(gn,{children:p.jsx(Cn,{children:t("add_tool_card.title")})}),p.jsxs(vn,{children:[p.jsxs("div",{className:"flex flex-col space-y-1.5",children:[p.jsx(Je,{htmlFor:"name",children:t("add_tool_card.tool_name")}),p.jsx(hn,{onChange:d,id:"name",placeholder:t("add_tool_card.name_placeholder")})]}),p.jsxs("div",{className:"flex flex-col space-y-1.5 mt-3",children:[p.jsx(Je,{htmlFor:"name",children:t("add_tool_card.tool_description")}),p.jsx(ho,{onChange:f,placeholder:t("add_tool_card.description_placeholder")})]})]}),p.jsx(oa,{className:"flex justify-between",children:p.jsx(jn,{loading:u,onClick:h,className:"w-full",children:t("add_tool_card.create")})})]})}),Jce=()=>{const e=Ze(i=>{var s;return(s=i.currentSession)==null?void 0:s.id}),[t,n]=y.useState(!1),r=Ae(i=>i.createOrUpdateFlowNode),o=Ae(i=>i.createOrUpdateFlowEdge),a=y.useCallback(async(i,s,c)=>{var l,u,d;try{if(!(s!=null&&s.name)||!i||!e)throw new Error("Source or Session not found");n(!0);const f=((l=i.position)==null?void 0:l.x)||0,h=(((u=i.position)==null?void 0:u.y)||0)+(((d=i.measured)==null?void 0:d.height)||0),g=await ce("VectorDatabase").save({...s,name:`${s.name}`,type:s.type||pje.Local,storage:s.storage||or.DatabaseNode,raw:"",provider:s.provider||C7.Memory,session_id:e,metadata:c?JSON.stringify({textSplitter:c}):void 0});if(!g)throw new Error("Failed to save vectorDatabase");const m=await r({source_id:g.id,source_type:"VectorDatabase",node_type:oe.VectorDatabase,x:f,y:h+30});if(!m)throw new Error("Failed to save vectorDatabase node");if(s.storage===or.DataNode){const v=await ce("JSONLData").save({headers:hje(["content","embedding","metadata"]),jsonl:"",session_id:e});if(!v)throw new Error("Failed to save databaseSource");const b=await r({source_id:v.id,source_type:"JSONLData",node_type:oe.JSONLData,x:f+80,y:h+30});if(!b)throw new Error("Failed to save databaseSource node");await o({source:b.id,target:m.id})}return{vectorDatabase:g,vectorDatabaseNode:m}}finally{n(!1)}},[e,r,o]);return{loading:t,createVectorDatabase:a}},Ul=[C7.Memory],Hl=[or.DatabaseNode],Zce=["TokenTextSplitter","CharacterTextSplitter","RecursiveCharacterTextSplitter"],Gce=y.memo(e=>{const{t}=Me("components"),{id:n}=e,r=fn(n),{toast:o}=$t(),[a,i]=y.useState(""),[s,c]=y.useState(Ul[0]),[l,u]=y.useState(Hl[0]),[d,f]=y.useState({}),{loading:h,createVectorDatabase:g}=Jce(),m=y.useCallback(E=>{c(E)},[]),v=y.useCallback(E=>{u(E)},[]),b=y.useCallback(E=>{f(S=>({...S,type:E,chunkSize:500,chunkOverlap:40}))},[]),x=y.useCallback(E=>{i(E.target.value||"")},[]),_=y.useCallback(E=>{f(S=>({...S,chunkSize:Number(E.target.value)}))},[]),w=y.useCallback(E=>{f(S=>({...S,chunkOverlap:Number(E.target.value)}))},[]),j=async()=>{try{if(!r)return;await g(r,{name:a,provider:s,storage:l},d!=null&&d.type?{type:d.type,chunkSize:d.chunkSize||500,chunkOverlap:d.chunkOverlap||0}:void 0),i(""),f({})}catch{o({variant:"destructive",description:t("create_vector_database_card.errors.create_failed")})}};return p.jsxs(Tt,{className:"mw-full",children:[p.jsx(gn,{children:p.jsx(Cn,{children:t("create_vector_database_card.title")})}),p.jsx(vn,{children:p.jsxs("div",{className:"grid w-full gap-1.5",children:[p.jsx(Je,{children:t("create_vector_database_card.name")}),p.jsx(hn,{className:"mb-4",value:a,onChange:x}),(Hl==null?void 0:Hl.length)>1?p.jsxs(p.Fragment,{children:[p.jsx(Je,{children:t("create_vector_database_card.storage_type")}),p.jsxs(Eo,{value:l,onValueChange:v,children:[p.jsx(Hr,{className:"w-full mb-4",children:p.jsx(So,{placeholder:t("create_vector_database_card.provider_select_placeholder")})}),p.jsx(Wr,{children:Object.values(Hl).map(E=>p.jsx(On,{value:E,children:t(`create_vector_database_card.storage_types.${E.toLowerCase()}`)},E))})]})]}):void 0,(Ul==null?void 0:Ul.length)>1?p.jsxs(p.Fragment,{children:[p.jsx(Je,{children:t("create_vector_database_card.provider")}),p.jsxs(Eo,{value:s,onValueChange:m,children:[p.jsx(Hr,{className:"w-full mb-4",children:p.jsx(So,{placeholder:t("create_vector_database_card.provider_select_placeholder")})}),p.jsx(Wr,{children:Object.values(Ul).map(E=>p.jsx(On,{value:E,children:t(`create_vector_database_card.providers.${E.toLowerCase()}`)},E))})]})]}):void 0,p.jsx(Je,{children:t("create_vector_database_card.text_splitter")}),p.jsxs(Eo,{value:d.type,onValueChange:b,children:[p.jsx(Hr,{className:"w-full mb-4",children:p.jsx(So,{placeholder:t("create_vector_database_card.text_splitter_select_placeholder")})}),p.jsx(Wr,{children:Object.values(Zce).map(E=>p.jsx(On,{value:E,children:t(`create_vector_database_card.text_splitters.${E.toLowerCase()}`)},E))})]}),d.type?p.jsxs(Tt,{children:[p.jsx(gn,{children:p.jsx(Cn,{children:t("create_vector_database_card.text_splitter_configuration")})}),p.jsxs(vn,{children:[p.jsx(Je,{children:t("create_vector_database_card.text_splitter_chunksize")}),p.jsx(hn,{value:d.chunkSize,onChange:_,placeholder:t("create_vector_database_card.text_splitter_chunksize_placeholder")}),p.jsx(Je,{children:t("create_vector_database_card.text_splitter_chunkoverlap")}),p.jsx(hn,{value:d.chunkOverlap,onChange:w,placeholder:t("create_vector_database_card.text_splitter_chunkoverlap_placeholder")})]})]}):void 0]})}),p.jsx(oa,{className:"flex justify-between",children:p.jsx(jn,{disabled:!d.type||!a,loading:h,onClick:j,className:"w-full",children:t("create_vector_database_card.create")})})]})});function ele({data:e}){const{t}=Me("components");return p.jsxs(fp,{className:"w-full",children:[p.jsx(pp,{children:p.jsx(Qa,{children:p.jsx(hs,{children:t("add_text_data.text")})})}),p.jsx(hp,{children:e==null?void 0:e.map((n,r)=>p.jsx(Qa,{children:p.jsx(ms,{className:"p-4",children:n.text})},`${n.text}_${r}`))})]})}const tle=y.memo(e=>{const{id:t}=e,{t:n}=Me("components"),[r,o]=y.useState([]),[a,i]=y.useState(""),s=fn(t),{createCSVData:c,loading:l}=vL(),u=()=>{o(f=>[...f,{text:a}]),i("")},d=async()=>{s&&await c(s,["text"],r.map(f=>[f.text]))};return p.jsxs(Tt,{className:"mw-full",children:[p.jsx(gn,{children:p.jsx(Cn,{children:n("add_text_data.title")})}),p.jsxs(vn,{children:[p.jsxs("div",{className:"flex flex-col space-y-1.5 mt-3",children:[p.jsx(Je,{htmlFor:"name",children:n("add_text_data.text")}),p.jsx(ho,{value:a,onChange:f=>i(f.target.value||""),placeholder:n("add_text_data.text_placeholder")})]}),p.jsx("div",{className:"w-full flex mt-4 justify-end",children:p.jsx(ot,{disabled:!a,onClick:u,className:"w-40",children:n("add_text_data.add")})}),p.jsx(ele,{data:r||[]})]}),p.jsx(oa,{className:"flex justify-between",children:p.jsx(jn,{loading:l,disabled:!(r!=null&&r.length),onClick:d,className:"w-full",children:n("add_text_data.create")})})]})});var No=(e=>(e.ADD_LLM="ADD_LLM",e.ADD_PROMPT="ADD_PROMPT",e.ADD_TOOL_DEFINITION="ADD_TOOL_DEFINITION",e.ADD_SCHEMA="ADD_SCHEMA",e.ADD_FEW_SHOT_EXAMPLE="ADD_FEW_SHOT_EXAMPLE",e.ADD_VECTOR_DATABASE="ADD_VECTOR_DATABASE",e.ADD_TEXT_DATA="ADD_TEXT_DATA",e))(No||{});const nle=["ADD_LLM","ADD_PROMPT","ADD_SCHEMA","ADD_VECTOR_DATABASE",{key:"more",label:"more",icon:"ellipsis",children:["ADD_TOOL_DEFINITION","ADD_FEW_SHOT_EXAMPLE"]}],rle=()=>{const e="_coolMode_effect",t=document.getElementById(e);if(t)return t;const n=document.createElement("div");return n.setAttribute("id",e),n.setAttribute("style","overflow:hidden; position:fixed; height:100%; top:0; left:0; right:0; bottom:0; pointer-events:none; z-index:2147483647"),document.body.appendChild(n),n};let bL=0;const ole=(e,t)=>{bL++;const n=(t==null?void 0:t.particle)||"circle",r=[15,20,25,35,45],o=45;let a=[],i=!1,s=0,c=0;const l=rle();function u(){const S=(t==null?void 0:t.size)||r[Math.floor(Math.random()*r.length)],C=(t==null?void 0:t.speedHorz)||Math.random()*10,M=(t==null?void 0:t.speedUp)||Math.random()*25,N=Math.random()*360,P=Math.random()*35*(Math.random()<=.5?-1:1),R=c-S/2,A=s-S/2,O=Math.random()<=.5?-1:1,k=document.createElement("div");if(n==="circle"){const T="http://www.w3.org/2000/svg",D=document.createElementNS(T,"svg"),I=document.createElementNS(T,"circle");I.setAttributeNS(null,"cx",(S/2).toString()),I.setAttributeNS(null,"cy",(S/2).toString()),I.setAttributeNS(null,"r",(S/2).toString()),I.setAttributeNS(null,"fill",`hsl(${Math.random()*360}, 70%, 50%)`),D.appendChild(I),D.setAttribute("width",S.toString()),D.setAttribute("height",S.toString()),k.appendChild(D)}else k.innerHTML=`<img src="${n}" width="${S}" height="${S}" style="border-radius: 50%">`;k.style.position="absolute",k.style.transform=`translate3d(${A}px, ${R}px, 0px) rotate(${N}deg)`,l.appendChild(k),a.push({direction:O,element:k,left:A,size:S,speedHorz:C,speedUp:M,spinSpeed:P,spinVal:N,top:R})}function d(){a.forEach(S=>{S.left=S.left-S.speedHorz*S.direction,S.top=S.top-S.speedUp,S.speedUp=Math.min(S.size,S.speedUp-1),S.spinVal=S.spinVal+S.spinSpeed,S.top>=Math.max(window.innerHeight,document.body.clientHeight)+S.size&&(a=a.filter(C=>C!==S),S.element.remove()),S.element.setAttribute("style",["position:absolute","will-change:transform",`top:${S.top}px`,`left:${S.left}px`,`transform:rotate(${S.spinVal}deg)`].join(";"))})}let f,h=0;const g=30;function m(){const S=performance.now();i&&a.length<o&&S-h>g&&(u(),h=S),d(),f=requestAnimationFrame(m)}m();const v="ontouchstart"in window,b=v?"touchstart":"mousedown",x=v?"touchend":"mouseup",_=v?"touchmove":"mousemove",w=S=>{var C,M;"touches"in S?(s=(C=S.touches)==null?void 0:C[0].clientX,c=(M=S.touches)==null?void 0:M[0].clientY):(s=S.clientX,c=S.clientY)},j=S=>{w(S),i=!0},E=()=>{i=!1};return e.addEventListener(_,w,{passive:!0}),e.addEventListener(b,j,{passive:!0}),e.addEventListener(x,E,{passive:!0}),e.addEventListener("mouseleave",E,{passive:!0}),()=>{e.removeEventListener(_,w),e.removeEventListener(b,j),e.removeEventListener(x,E),e.removeEventListener("mouseleave",E);const S=setInterval(()=>{f&&a.length===0&&(cancelAnimationFrame(f),clearInterval(S),--bL===0&&l.remove())},500)}},ale=({children:e,options:t})=>{const n=y.useRef(null);return y.useEffect(()=>{if(n.current)return ole(n.current,t)},[t]),U.cloneElement(e,{ref:n})},ile=y.memo(e=>{const{t}=Me("flows"),n=Wu(s=>s.theme),[r,o]=y.useState(`${No.ADD_LLM}`),a=y.useMemo(()=>p.jsxs(e4,{children:[p.jsx(Aw,{children:p.jsx(ale,{children:p.jsx(ot,{variant:"link",className:"!p-0 !pl-3",children:p.jsx(mje,{width:32,height:32,className:K(n==="dark"?"fill-white":"fill-black")})})})}),nle.map(s=>typeof s=="object"?p.jsxs(Aw,{children:[p.jsx(Tw,{children:s.icon?p.jsx(le,{name:s.icon}):t(`supported_nodes.${s.label}`)}),p.jsx(t4,{children:s.children.map(c=>p.jsx(n4,{onClick:()=>o(c),children:t(`supported_nodes.${c.toLowerCase()}`)},c))})]},s.key):p.jsx(Aw,{children:p.jsx(Tw,{value:s,onClick:()=>o(s),children:t(`supported_nodes.${s.toLowerCase()}`)})},s))]}),[t,n]),i=y.useMemo(()=>{switch(r){case No.ADD_LLM:return p.jsx(Lce,{...e});case No.ADD_PROMPT:return p.jsx($ce,{...e});case No.ADD_SCHEMA:return p.jsx(qce,{...e});case No.ADD_FEW_SHOT_EXAMPLE:return p.jsx(Kce,{...e});case No.ADD_TOOL_DEFINITION:return p.jsx(Qce,{...e});case No.ADD_VECTOR_DATABASE:return p.jsx(Gce,{...e});case No.ADD_TEXT_DATA:return p.jsx(tle,{...e})}},[e,r]);return p.jsxs(p.Fragment,{children:[a,p.jsx("div",{className:"mt-4",children:i})]})}),sle=Zr("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Mo=y.forwardRef(({className:e,variant:t,...n},r)=>p.jsx("div",{ref:r,role:"alert",className:K(sle({variant:t}),e),...n}));Mo.displayName="Alert";const ko=y.forwardRef(({className:e,...t},n)=>p.jsx("h5",{ref:n,className:K("mb-1 font-medium leading-none tracking-tight",e),...t}));ko.displayName="AlertTitle";const _s=y.forwardRef(({className:e,...t},n)=>p.jsx("div",{ref:n,className:K("text-sm [&_p]:leading-relaxed",e),...t}));_s.displayName="AlertDescription";let xL,wL,_L,an,et,jL,EL,SL,CL,Op,a1,i1,s1,OL,NL,c1,ML,kL,PL;xL=()=>{const[e,t]=y.useState(!1),n=Pa(),r=Ze(s=>s.currentSession),o=Ze(s=>s.getLatestApplications),a=y.useCallback(async(s,c,l,u)=>{var h;const d=(h=c.data)==null?void 0:h.entity;let f=c.type?yje[c.type]:void 0;if(f&&d&&c&&typeof d=="object"&&"id"in d&&!l.has(`${d.id}`)&&!u.has(`${c.id}`)){f=f;const g=await ce(f).save({...d,...d&&typeof d=="object"&&"session_id"in d?{session_id:s.id}:{}});l.set(`${d.id}`,g.id);const m=await ce("FlowNode").findOne({where:{id:c.data.flowNode.id}}),v=await ce("FlowNode").save({...m||c.data.flowNode,session_id:s.id,id:void 0,source_type:f,source_id:g.id});return u.set(`${c.id}`,v.id),{entityName:f,entity:g,node:v}}else if(!u.has(`${c.id}`)){const g=await ce("FlowNode").findOne({where:{id:c.data.flowNode.id}}),m=await ce("FlowNode").save({...g||c.data.flowNode,node_type:c.type,session_id:s.id,id:void 0});return u.set(`${c.id}`,m.id),{node:m}}},[]),i=y.useCallback(async(s,c)=>{try{if(!r)throw new Error("No current session");t(!0);const l=await ce("Session").save({type:lc.StandaloneApp,name:c.name||(r!=null&&r.name?`${r.name}`:"Standalone"),status:gje.Started});if(!l)throw new Error("Failed create standalone session");const u=new Map,d=new Map,f=await a(l,s,u,d);if(!f)throw new Error("Failed to clone main node");await ce("Session").update(l.id,{main_node_id:f.node.id,main_source_id:f!=null&&f.entity?f.entity.id:void 0,main_source_type:f.entityName?f.entityName:void 0});for(const{node:h,connectedNodes:g}of c.connections)if(await a(l,h,u,d),g)for(const m of g)await a(l,m,u,d);for(const{connections:h}of c.connections)for(const g of h){const m=d.get(`${g.source}`),v=d.get(`${g.target}`);if(!m||!v)throw new Error("Failed to get connected flow node id");await ce("FlowEdge").save({source:m,target:v,sourceHandle:g.sourceHandle,targetHandle:g.targetHandle,session_id:l.id})}return o(),n(Jt("application",{applicationId:l.id})),!0}finally{t(!1)}},[a,r,o,n]);return{loading:e,createStandaloneSession:i}},wL=()=>{const[e,t]=y.useState(!1),n=Ae(a=>a.updateNodes),r=Ae(a=>a.updateEdges),o=y.useCallback(async a=>{try{t(!0),await ce("FlowNode").delete(a);const i=await ce("FlowEdge").find({where:[{source:a},{target:a}]});return await Promise.all(i.map(s=>ce("FlowEdge").delete(s.id))),await n([{id:a,type:"remove"}]),await r(i.map(s=>({id:s.id,type:"remove"}))),!0}catch{return!1}finally{t(!1)}},[r,n]);return{loading:e,deleteNodeFlow:o}},_L=ja(({cloneStandaloneSession:e})=>{const t=Xt(),{t:n}=Me("dialogs"),[r,o]=y.useState(""),{toast:a}=$t(),i=c=>{o(c.target.value)},s=async()=>{try{t.hide(),await e(r),o("")}catch{a({variant:"destructive",description:n("create_standalone_application.errors.create_failed")})}};return p.jsx($i,{open:t.visible,onOpenChange:t.hide,children:p.jsxs(Da,{className:"sm:max-w-[425px]",children:[p.jsxs(La,{children:[p.jsx(Fa,{children:n("create_session.title")}),p.jsx(Cg,{children:n("create_standalone_application.description")})]}),p.jsx("div",{className:"grid gap-4 py-4",children:p.jsxs("div",{className:"flex flex-col space-y-1.5",children:[p.jsx(Je,{className:"mb-2",htmlFor:"name",children:n("create_standalone_application.name")}),p.jsx(hn,{onChange:i,id:"name",value:r,placeholder:n("create_standalone_application.name_placeholder")})]})}),p.jsx(Sg,{children:p.jsx(ot,{onClick:s,disabled:!r,type:"submit",children:n("create_standalone_application.create")})})]})})}),an=y.memo(({id:e,className:t,enableToStandalone:n,getLinkedConnections:r})=>{const{t:o}=Me("common"),{getNode:a}=$n(),{loading:i,deleteNodeFlow:s}=wL(),{createStandaloneSession:c}=xL(),{toast:l}=$t(),u=Xt(_L),d=y.useCallback(async()=>{try{await s(e),l({description:o("deleted")})}catch{l({description:o("errors.delete_failed"),variant:"destructive"})}},[s,e,l,o]),f=y.useCallback(async g=>{try{const m=a(e);if(!m)throw new Error("No current node");const v=(r==null?void 0:r(e))||[];await c(m,{name:g,connections:v}),l({description:o("standalone_session_created")})}catch(m){dm(m),l({description:o("errors.create_standalone_session_failed"),variant:"destructive"})}},[a,e,r,c,l,o]),h=y.useCallback(()=>{u.show({cloneStandaloneSession:f})},[f,u]);return p.jsxs("div",{className:K("flex absolute z-[51] right-0 top-0 h-10",t),children:[n?p.jsx(ot,{className:"!rounded-none !px-2",onClick:h,variant:"ghost",children:p.jsx(le,{name:"package-plus",size:16})}):void 0,p.jsx(jn,{loading:i,className:"!rounded-none !px-2",onClick:d,variant:"ghost",children:p.jsx(le,{name:"trash-2",size:16})})]})}),et=y.memo(e=>{const{className:t,...n}=e;return p.jsx(kl,{className:K("!w-2 !h-2 !border-none !rounded-full !bg-slate-700",e.position===fe.Top?"!top-[-2px]":"",t),...n})}),jL=()=>{const e=Ze(i=>{var s;return(s=i.currentSession)==null?void 0:s.id}),[t,n]=y.useState(!1),r=Ae(i=>i.createOrUpdateFlowNode),o=Ae(i=>i.createOrUpdateFlowEdge),a=y.useCallback(async i=>{var s,c;n(!0);try{const l=(s=i.data)==null?void 0:s.entity;if(!l||!e)throw new Error("LLM or Session not found");const u=i.position.x,d=i.position.y+(((c=i.measured)==null?void 0:c.height)||0),f=await ce("Thread").save({initial_llm_id:l.id,title:`New thread with ${l.name}`,status:od.Started,messages:[],session_id:e}),h=await r({source_id:f.id,source_type:"Thread",node_type:oe.Thread,x:u,y:d+60});if(!h)throw new Error("Failed to create thread node");const g=await o({source:i.id,target:h.id});return{thread:f,flowNode:h,flowEdge:g}}finally{n(!1)}},[o,r,e]);return{loading:t,createThread:a}},EL=(e,t)=>{var x;const{t:n}=Me("flows"),{toast:r}=$t(),[o,a]=y.useState(!1),[i,s]=y.useState(!1),c=fn(e),l=un(_=>_.loadModel),{createThread:u,loading:d}=jL(),f=Ae(_=>_.updateNodes),h=Ae(_=>_.pushSyncNodeQueue),{getNodes:g}=$n(),m=y.useCallback(async()=>{try{if(s(!0),t.entity.id){const _=await ce("Thread").find({where:{initial_llm_id:t.entity.id}});h("Thread",{where:{source_type:"Thread",source_id:Ur(_.map(w=>w.id))}})}}finally{s(!1)}},[(x=t==null?void 0:t.entity)==null?void 0:x.id,h]),v=y.useCallback(async()=>{try{if(a(!0),t.entity&&c){await(l==null?void 0:l(`${t.entity.name}`,w=>{c.data.status=w.progress===100?Ye.Loaded:Ye.Loading,c.data.label=w.text,f([{id:e,type:"replace",item:c}])}));const _=g().filter(w=>w.type===oe.LLM).map(w=>(w.data.status=Ye.Started,{id:w.id,type:"replace",item:w}));c.data.label="",c.data.status=Ye.Loaded,_.push({id:e,type:"replace",item:c}),f(_),await m()}}catch(_){Mr(_),r({variant:"destructive",description:n("llm_node.errors.loading_model")})}finally{a(!1)}},[t.entity,g,e,l,c,m,n,r,f]),b=y.useCallback(async()=>{t.entity&&c&&await(u==null?void 0:u(c))},[t.entity,c,u]);return{loadingModel:o,creatingThread:d,queringThreads:i,loadModel:v,createThread:b,queryThreads:m}},dn=(e,t)=>{const[n,r]=y.useState(!1),[o,a]=y.useState([]),{deleteElements:i,getNode:s}=$n();Xf({type:"target",nodeId:e,onConnect:l=>{l!=null&&l.length&&a(u=>[...u,...toe(l)])}});const c=y.useCallback(async(l,u,d,f)=>{try{return await t({id:e,edgeId:l,source:u,target:d,connection:f})}catch{return{deleteEdgeId:l}}},[t,e]);y.useEffect(()=>{!(o!=null&&o.length)||n||(async()=>{try{r(!0);const l=[...o];a([]);const u=[],d=s(e);await Promise.all(l.map(async f=>{const h="edgeId"in f?f.edgeId:void 0,g=s(f.source);if(!g||!d)return;const m=await c(`${h}`,g,d,f);m!=null&&m.deleteEdgeId&&u.push(...Array.isArray(m.deleteEdgeId)?m.deleteEdgeId:[m.deleteEdgeId])})),u!=null&&u.length&&await i({edges:u.map(f=>({id:f}))})}finally{r(!1)}})()},[i,s,e,n,c,o])},SL=e=>{const t=y.useCallback(async()=>{},[]);dn(e,t)},CL=y.memo(e=>{var m,v,b,x;const{id:t,data:n,isConnectable:r}=e,[o,a]=y.useState(),{t:i}=Me("flows"),{createThread:s,loadModel:c,queringThreads:l,queryThreads:u,loadingModel:d}=EL(t,n);SL(t);const f=[Ye.Loading,Ye.Downloading].includes(n.status);y.useEffect(()=>{var _;o||!((_=n==null?void 0:n.entity)!=null&&_.name)||vt(()=>import("./index-CSFZaYIn.js").then(async w=>(await w.__tla,w)),__vite__mapDeps([3,1,2])).then(async({hasModelInCache:w,functionCallingModelIds:j,prebuiltAppConfig:E})=>{var C,M;const S=await w((C=n==null?void 0:n.entity)==null?void 0:C.name);a({hasCache:S,isFunctionCalling:j.includes((M=n==null?void 0:n.entity)==null?void 0:M.name),info:E.model_list.find(N=>{var P;return N.model_id===((P=n==null?void 0:n.entity)==null?void 0:P.name)})})})},[(m=n==null?void 0:n.entity)==null?void 0:m.name,o]);const h=y.useMemo(()=>{var _,w;switch(n.status){case Ye.Downloading:return p.jsx(le,{className:"animate-spin w-7 h-7",name:"arrow-big-down-dash"});case Ye.Loaded:return p.jsx(jo,{name:((_=n.entity)==null?void 0:_.name)||"brain",className:"w-7 h-7"});case Ye.Loading:return p.jsx(le,{className:"animate-spin w-7 h-7",name:"loader-circle"});default:return p.jsx(jo,{name:((w=n.entity)==null?void 0:w.name)||"brain",className:"w-7 h-7"})}},[(v=n.entity)==null?void 0:v.name,n.status]),g=y.useMemo(()=>f?null:d?p.jsx(ot,{disabled:!0,className:"w-full mt-4",children:p.jsx(le,{className:"animate-spin",size:24,name:"loader-circle"})}):n.status===Ye.Loaded?p.jsx(ot,{onClick:s,className:"mt-4 w-full",children:i("llm_node.create_thread_button")}):p.jsxs("div",{className:"flex gap-2 mt-4",children:[o!=null&&o.hasCache?p.jsx(jn,{loading:l,onClick:u,children:p.jsx(le,{size:24,name:"message-square-more"})}):null,p.jsx(ot,{disabled:d,onClick:c,className:"w-full",children:i(o!=null&&o.hasCache?"llm_node.load_model_button":"llm_node.download_model_button")})]}),[f,d,n.status,o==null?void 0:o.hasCache,l,u,c,i,s]);return p.jsxs("div",{children:[p.jsxs("div",{children:[p.jsx(an,{id:t}),p.jsxs(Mo,{className:"flex justify-center",children:[h,p.jsxs("div",{className:"ml-2 pt-1 max-w-lg",children:[p.jsx(ko,{className:"flex gap-2 items-center pr-6",children:`${((b=n==null?void 0:n.entity)==null?void 0:b.name)||""}`}),p.jsx(_s,{className:"max-w-full",children:`${n.label||""}`}),p.jsx("div",{className:"max-w-full mt-2 flex-wrap flex gap-1",children:p.jsx(Dl,{model:o==null?void 0:o.info,isFunctionCalling:(o==null?void 0:o.isFunctionCalling)||!1,name:(x=n==null?void 0:n.entity)==null?void 0:x.name,isCached:(o==null?void 0:o.hasCache)||!1})}),g]})]}),f?p.jsx(mw,{className:"rounded-lg"}):void 0]}),p.jsx(et,{type:"source",position:fe.Bottom,id:"a",isConnectable:r})]})}),Op=y.memo(({tags:e,disabled:t,loading:n,onSubmit:r})=>{const{t:o}=Me("components"),a=async i=>{try{return await r(i),!0}catch{return!1}};return p.jsxs(Tt,{className:"min-w-80",children:[p.jsx(gn,{children:p.jsx(Cn,{children:o("add_message_card.title")})}),p.jsxs(vn,{children:[p.jsx("div",{className:"grid w-full gap-1.5",children:p.jsx(fP,{onSubmit:a,disabled:t||n,placeholder:o("add_message_card.placeholder")})}),e?p.jsx("div",{className:"mt-2 gap-1 flex flex-wrap",children:e}):null]})]})}),a1=(e,t,n,r=[],o)=>{const a=e.map(i=>o.getNode(i));for(const i of a){if(!i)continue;const s=o.getHandleConnections({type:"target",nodeId:i.id});if(n.push(...s),i.type===oe.Thread){r.push(i.id),t.push(i);continue}else if(i.type!==oe.Message){r.push(i.id);continue}else if(r.includes(i.id))continue;r.push(i.id),t.push(i),s.length&&a1(s.map(c=>c.source),t,n,r,o)}return{nodes:t,connections:n}},i1=(e,t)=>{const n=t.getHandleConnections({nodeId:e.id,type:"target"}),r=n.map(d=>{const f=t.getNode(d.source);return f?{connections:t.getHandleConnections({nodeId:f.id,type:"target"}),node:f}:void 0}),o=r.filter(d=>{var f;return((f=d.node)==null?void 0:f.type)===oe.Prompt}),a=[];o!=null&&o.length&&o.forEach(d=>{var h;const f=(h=d.connections)==null?void 0:h.map(g=>t.getNode(g.source)).filter(Boolean);a.push({node:d.node,connections:d.connections,connectedNodes:f})});const i=r.filter(d=>{var f;return((f=d.node)==null?void 0:f.type)===oe.ToolDefinition}),s=[];i!=null&&i.length&&i.forEach(d=>{var h;const f=(h=d.connections)==null?void 0:h.map(g=>t.getNode(g.source)).filter(Boolean);f!=null&&f.find(g=>g.type===oe.Schema)&&s.push({node:d.node,connections:d.connections,connectedNodes:f})});const c=r.filter(d=>{var f;return((f=d.node)==null?void 0:f.type)===oe.PlaceHolder}),l=[];c!=null&&c.length&&c.forEach(d=>{var h;const f=(h=d.connections)==null?void 0:h.map(g=>t.getNode(g.source)).filter(Boolean);f&&l.push({node:d.node,connections:d.connections,connectedNodes:f})});const u=r.find(d=>{var f;return((f=d.node)==null?void 0:f.type)===oe.Schema});return{thread:{node:e,connections:n},llm:r.find(d=>{var f;return((f=d.node)==null?void 0:f.type)===oe.LLM}),schemas:u?[u]:[],prompts:a,tools:s,placeholders:l}},s1=e=>{const t=[];return e.forEach(n=>{var a,i,s;const{node:r,connectedNodes:o}=n;if((a=r.data)!=null&&a.entity){if(r.type===oe.Message){const c=r.data.entity;switch(c.role){case"human":t.push(new Yu(c.content));break;case"ai":t.push(new Ku(c.content));break}}else if(r.type===oe.Prompt){const c=r.data.entity;let l=`${c.prefix?`${c.prefix}
`:""}`;if(c.type===Rn.FewShotExample){const u=(s=(i=o.find(d=>d.type===oe.CSVData))==null?void 0:i.data)==null?void 0:s.entity;if(u){const{rows:d}=O7(u.headers,u.csv);d.forEach(f=>{l+=`${c.content.replace(/{([^{}]*)}/g,(h,g)=>`${f[g]}`)}
`})}}else l+=c.content;switch(c.suffix&&(l+=`
${c.suffix}`),c.role){case"human":t.push(new Yu(l));break;case"system":t.push(new S7(l));break;default:t.push(new Ku(l));break}}}}),t},OL=(e,t)=>{const n=(e==null?void 0:e.filter(o=>o.type===oe.Message).map(o=>({node:o,connectedNodes:[]})).reverse())||[],r=[];return t.forEach(async o=>{r.unshift({node:o.node,connectedNodes:o.connectedNodes||[]})}),{history:s1(n),systems:s1(r)}},NL=e=>e?e.reduce((t,n)=>{var a,i,s,c,l;const r=(a=n.node.data)==null?void 0:a.entity,o=(c=(s=(i=n==null?void 0:n.connectedNodes)==null?void 0:i.find(u=>u.type===oe.Schema))==null?void 0:s.data)==null?void 0:c.entity;return r&&((l=o==null?void 0:o.schema_items)!=null&&l.length)&&t.push({name:r.name,description:r.description,schemaItems:o.schema_items}),t},[]):[],c1=({getNode:e,getHandleConnections:t})=>{const{t:n}=Me("create_new_message"),[r,o]=y.useState(!1),a=Ze(m=>m.currentSession),i=Ae(m=>m.createOrUpdateFlowNode),s=Ae(m=>m.createOrUpdateFlowEdge),c=bi(m=>m.similaritySearchWithScore),l=un(m=>m.getCurrentModelInfo),{stream:u}=yy(),d=y.useCallback(async({content:m,threadId:v,sourceId:b,initialX:x,initialY:_,initialLLMId:w})=>{if(!a)throw new Error("Session is not found");const j=await ce("Message").save({thread_id:v,content:m,role:Tn.Human,status:eo.Started,llm_id:w,session_id:a.id});if(!j)throw new Error("Failed to save message");const E=await i({source_id:j.id,source_type:"Message",node_type:oe.Message,x,y:_+80});if(!E)throw new Error("Failed to save human message node");await s({source:b,target:E.id});const S=await ce("Message").save({thread_id:v,content:n("initial_ai_message"),role:Tn.AI,status:eo.Inprogress,llm_id:w,parent_message_id:j.id,session_id:a.id});if(!S)throw new Error("Failed to save message");const C=await i({source_id:S.id,source_type:"Message",node_type:oe.Message,x,y:_+250});if(!C)throw new Error("Failed to save ai message node");return await s({source:E.id,target:C.id}),{aiMessage:S,humanMessage:j,aiMessageNode:C,humanMessageNode:E}},[s,i,a,n]),f=y.useCallback(async(m,v)=>{const{placeholders:b}=v;if(!(b!=null&&b.length))return[];const x=[];return await Promise.all(b.map(async _=>{var j,E,S,C,M,N,P,R,A,O,k,T;const w=(j=_.node.data)==null?void 0:j.entity;if(w)switch(w.placeholder_type){case Oi.VECTOR_DATABASE_RETREIVER:{const D=(E=_.connectedNodes)==null?void 0:E.find(Q=>Q.type===oe.VectorDatabase),I=(S=D==null?void 0:D.data)==null?void 0:S.entity,L=(N=(M=(C=_.connectedNodes)==null?void 0:C.find(Q=>Q.type===oe.Prompt))==null?void 0:M.data)==null?void 0:N.entity;if(!L||!I||!D)return;const B=(P=w.metadata)!=null&&P.k?+((R=w.metadata)==null?void 0:R.k):1;let V=(A=w.metadata)!=null&&A.minimalScore?+((O=w.metadata)==null?void 0:O.minimalScore):void 0;V&&V>1&&(V=V/100);const F=[];if(I.storage===or.DataNode){const Q=(T=(k=t({nodeId:D.id,type:"target"}).map(Y=>e(Y.source)).find(Y=>(Y==null?void 0:Y.type)&&[oe.JSONLData,oe.CSVData].includes(Y==null?void 0:Y.type)))==null?void 0:k.data)==null?void 0:T.entity;if(!Q)return;F.push(...await c({databaseId:I.id,dataSourceId:Q.id,dataSourceType:aS(Q)},m.humanMessage.content,B))}else F.push(...await c({databaseId:I.id},m.humanMessage.content,B));if(!F)return[];const H=new Wo({template:L.content,inputVariables:["context"]});x.push(new Ku(await H.format({context:V?F.filter(([,Q])=>Q>=V).map(([Q])=>Q.pageContent).join(`
`):F.map(([Q])=>Q.pageContent).join(`
`)})))}}})),x},[t,e,c]),h=y.useCallback(async(m,v,b,{onMessageUpdate:x})=>{const{prompts:_,tools:w,schemas:j,placeholders:E}=v,S=[];E!=null&&E.length&&S.push(...await f(m,v));const{history:C,systems:M}=OL(b,_),N=[...M,...S,...C,new Yu(m.humanMessage.content)],P=j.map(O=>{var k;return(k=O.node.data)==null?void 0:k.entity}).filter(Boolean),{lastChunk:R,content:A}=await u(N,{tools:NL(w),schemas:P,onMessageUpdate:({content:O})=>{x==null||x({id:m.aiMessageNode.id,nodeData:{loading:!0,content:O}})}});return m.aiMessage.content=A,m.aiMessage.metadata=JSON.stringify({message:R}),x==null||x({id:m.aiMessageNode.id,nodeData:{content:A,loading:!1,entity:m.aiMessage}}),m.aiMessage.id&&await ce("Message").update(m.aiMessage.id,{content:A,metadata:JSON.stringify({message:R})}),A},[f,u]),g=y.useCallback(async(m,v,b)=>{var S,C,M;const{nodes:x}=a1([m.id],[],[],[],{getNode:e,getHandleConnections:t}),_=x.find(N=>N.type===oe.Thread),w=_==null?void 0:_.data.entity;if(!m||!w||!_)throw new Error("Source or thread is not found");if(!await l())throw new Error("Model is not loaded yet");const j=i1(_,{getNode:e,getHandleConnections:t});if(!(j!=null&&j.thread))throw new Error("Thread node is not found");let E;try{o(!0);const N=((S=m.position)==null?void 0:S.x)||0,P=(((C=m.position)==null?void 0:C.y)||0)+(((M=m.measured)==null?void 0:M.height)||0);return E=await d({content:v,initialX:N,initialY:P,sourceId:m.id,threadId:w.id,initialLLMId:w.initial_llm_id}),await h(E,j,x,b),await ce("Message").update(`${E.aiMessage.id}`,{status:eo.Success}),E.aiMessage.status=eo.Success,b.onMessageUpdate({id:E.aiMessageNode.id,nodeData:{entity:E.aiMessage,loading:!1}}),!0}catch{E!=null&&E.aiMessage&&await ce("Message").update(`${E.aiMessage.id}`,{status:eo.Failed,content:n("errors.ai_message_content_failed")}),E!=null&&E.aiMessageNode.id&&(b==null||b.onMessageUpdate({id:E.aiMessageNode.id,nodeData:{content:n("errors.ai_message_content_failed"),loading:!1}}))}finally{o(!1)}},[l,t,e,d,h,n]);return{loading:r,createMessage:g}},ML=(e,t)=>{const n=fn(e),{t:r}=Me("flows"),{getNode:o,getHandleConnections:a}=$n(),i=Ae(f=>f.updateNodes),{createMessage:s,loading:c}=c1({getNode:o,getHandleConnections:a}),l=y.useCallback(f=>{if(!f.id)return;const h=o(f.id);!h||!f.nodeData||i([{id:h.id,type:"replace",item:{...h,data:{...h.data,...cl(f.nodeData,ll)}}}])},[o,i]),u=y.useCallback(async f=>{if(n&&t.entity)try{await s(n,f,{onMessageUpdate:l})}catch(h){if(h instanceof Error&&h.message.includes("LLM_NOT_LOADED_YET"))return dc({variant:"destructive",title:r("thread_node.errors.llm_not_loaded_yet")});dc({variant:"destructive",title:`${h}`})}},[n,t.entity,s,l,r]),d=y.useCallback(f=>{const h=o(f);if(!h)return[];const g=[],m=i1(h,{getNode:o,getHandleConnections:a});return m.thread&&g.push({node:m.thread.node,connectedNodes:[],connections:m.thread.connections}),m.prompts&&g.push(...m.prompts.map(v=>({node:v.node,connectedNodes:v.connectedNodes,connections:v.connections}))),m.schemas&&g.push(...m.schemas.map(v=>({node:v.node,connectedNodes:[],connections:v.connections}))),m.placeholders&&m.placeholders.forEach(v=>{const b=v.connections.map(x=>o(x.source)).filter(Boolean);g.push({node:v.node,connectedNodes:b||[],connections:v.connections})}),m.llm&&g.push(m.llm),g},[a,o]);return{loading:c,createMessage:u,getLinkedConnections:d}},kL=e=>{const t=Ae(r=>r.createOrUpdateFlowEdge),n=y.useCallback(async({edgeId:r,source:o,target:a,connection:i})=>{try{if((o==null?void 0:o.type)===oe.Prompt&&(a==null?void 0:a.type)===oe.Thread){await t({source:i.source,target:i.target,sourceHandle:i.sourceHandle,targetHandle:i.targetHandle});return}else if((o==null?void 0:o.type)===oe.LLM&&(a==null?void 0:a.type)===oe.Thread){await t({source:i.source,target:i.target,sourceHandle:i.sourceHandle,targetHandle:i.targetHandle});return}else if((o==null?void 0:o.type)===oe.Schema&&(a==null?void 0:a.type)===oe.Thread){await t({source:i.source,target:i.target,sourceHandle:i.sourceHandle,targetHandle:i.targetHandle});return}else if((o==null?void 0:o.type)===oe.ToolDefinition&&(a==null?void 0:a.type)===oe.Thread){await t({source:i.source,target:i.target,sourceHandle:i.sourceHandle,targetHandle:i.targetHandle});return}else if((o==null?void 0:o.type)===oe.VectorDatabase&&(a==null?void 0:a.type)===oe.Thread){await t({source:i.source,target:i.target,sourceHandle:i.sourceHandle,targetHandle:i.targetHandle});return}else if((o==null?void 0:o.type)===oe.PlaceHolder&&(a==null?void 0:a.type)===oe.Thread&&o.data.entity.placeholder_type===Oi.VECTOR_DATABASE_RETREIVER){await t({source:i.source,target:i.target,sourceHandle:i.sourceHandle,targetHandle:i.targetHandle});return}return{deleteEdgeId:r}}catch{return{deleteEdgeId:r}}},[t]);dn(e,n)},PL=y.memo(e=>{const{id:t,data:n,isConnectable:r}=e,{t:o}=Me("flows"),[a,i]=y.useState(!1),s=Xf({type:"source"}),c=Xf({type:"target"}),{getNode:l}=$n(),{loading:u,createMessage:d,getLinkedConnections:f}=ML(t,n);kL(t);const h=y.useCallback(async(...b)=>(i(!1),await d(...b)),[d]),g=y.useMemo(()=>s.length>0,[s]),m=y.useCallback(()=>{i(b=>!b)},[]),v=y.useMemo(()=>{var x,_;const b=c.map((w,j)=>{var S;const E=l(w.source);if((E==null?void 0:E.type)===oe.Schema)return p.jsx(on,{children:o("thread_node.structured_output")},`${j}`);if((E==null?void 0:E.type)===oe.Prompt){const C=E.data.entity;return p.jsx(on,{children:o(C.type===Rn.FewShotExample?"thread_node.prompts.few_shot_example":`thread_node.prompts.${C.role.toLowerCase()}`)},`${j}`)}else if((E==null?void 0:E.type)===oe.PlaceHolder&&((S=E.data.entity)==null?void 0:S.placeholder_type)===Oi.VECTOR_DATABASE_RETREIVER)return p.jsx(on,{children:o("thread_node.vector_database_retriever")},`${j}`)}).filter(Boolean);return e.data.entity&&!((_=(x=e.data.entity)==null?void 0:x.messages)!=null&&_.length)&&!g?p.jsx(Op,{disabled:u,loading:u,onSubmit:h,tags:b}):b!=null&&b.length?p.jsxs(Tt,{className:"p-4 pt-2",children:[p.jsx(Cn,{className:"mb-2",children:o("thread_node.title")}),p.jsx("div",{className:"flex gap-1.5",children:b}),p.jsx("div",{className:"mt-4 w-full flex justify-end",children:p.jsxs(ot,{onClick:m,variant:"outline",children:[p.jsx(le,{name:a?"copy-minus":"copy-plus"}),o(a?"thread_node.hide":"thread_node.clone")]})})]}):p.jsx("div",{className:"w-12 h-10"})},[g,l,h,m,u,e.data.entity,a,o,c]);return p.jsxs("div",{children:[p.jsx(et,{type:"target",position:fe.Top,isConnectable:r}),p.jsxs("div",{children:[p.jsx(an,{id:t,enableToStandalone:!0,getLinkedConnections:f}),v,a?p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"w-[1px] absolute ml-[50%] h-[30px] bg-gray-500"}),p.jsx("div",{className:"absolute mt-[30px] w-full",children:p.jsx("div",{className:"ml-[10%] w-80 animate-in slide-in-from-bottom-5",children:p.jsx(Op,{disabled:u,loading:u,onSubmit:h})})})]}):void 0]}),p.jsx(et,{type:"source",position:fe.Bottom,id:"a",isConnectable:r})]})});function cle({data:e,onNewThread:t,loading:n,showThread:r}){var a;const{t:o}=Me("flows");return p.jsxs(Mo,{className:"flex min-w-52",children:[p.jsx(le,{size:24,name:"user"}),p.jsxs("div",{className:"ml-2 max-w-full w-full",children:[p.jsx(ko,{children:"Human"}),p.jsx(_s,{children:`${e.content||((a=e.entity)==null?void 0:a.content)||""}`}),t?p.jsx("div",{className:"w-full mt-2 flex items-center justify-end",children:p.jsxs(ot,{onClick:t,disabled:n,variant:"outline",children:[p.jsx(le,{name:r?"minus":"plus",size:16}),o(r?"message_node.hide_thread":"message_node.new_thread")]})}):void 0]})]})}const lle=y.lazy(()=>vt(()=>import("./index-j8GSalR6.js").then(async e=>(await e.__tla,e)),__vite__mapDeps([7,8,1,2,9,10])));function ule({data:e,onNewThread:t,loading:n,showThread:r}){var i,s,c,l,u,d,f,h;const{t:o}=Me("flows"),a=y.useMemo(()=>{var g;try{return JSON.parse(((g=e==null?void 0:e.entity)==null?void 0:g.metadata)||"{}")}catch{return{}}},[(i=e==null?void 0:e.entity)==null?void 0:i.metadata]);return p.jsxs(Mo,{className:"flex min-w-52",children:[p.jsx(le,{className:K(e.loading?"animate-spin":void 0),size:24,name:e.loading?"loader-circle":"bot"}),p.jsx(le,{name:r?"minus":"plus",size:24}),p.jsxs("div",{className:"ml-2 w-full max-w-full",children:[p.jsx(ko,{children:o(`message_node.message_roles.${(c=(s=e.entity)==null?void 0:s.role)==null?void 0:c.toLowerCase()}`)}),p.jsx(y.Suspense,{fallback:p.jsx("div",{className:"h-full w-ful rounded-lg flex justify-center items-center",children:p.jsx(le,{name:"loader-circle",className:"animate-spin"})}),children:p.jsx(lle,{className:"!text-sm [&_p]:leading-relaxed !max-w-full !bg-transparent !font-sans",source:`${e.content||((l=e.entity)==null?void 0:l.content)||""}`,style:{color:"unset !important"}})}),Array.isArray((u=a==null?void 0:a.message)==null?void 0:u.tool_calls)&&((f=(d=a==null?void 0:a.message)==null?void 0:d.tool_calls)!=null&&f.length)?(h=a==null?void 0:a.message)==null?void 0:h.tool_calls.map((g,m)=>p.jsx(on,{children:o("message_node.tool_call",{name:g.name,args:Object.entries(g.args).map(([v,b])=>`"${v}": "${b}"`).join(", ")})},`${g.name}_${m}`)):null,t?p.jsx("div",{className:"w-full mt-2 flex items-center justify-end",children:p.jsxs(ot,{onClick:t,disabled:n,variant:"outline",children:[p.jsx(le,{name:r?"minus":"plus",size:16}),o(r?"message_node.hide_thread":"message_node.new_thread")]})}):void 0]}),e.loading?p.jsx(mw,{size:350,duration:10}):void 0]})}const dle=e=>{const{t}=Me("flows"),n=fn(e),r=Ae(u=>u.updateNodes),{getNode:o,getHandleConnections:a}=$n(),{createMessage:i,loading:s}=c1({getNode:o,getHandleConnections:a}),c=y.useCallback(u=>{if(!u.id)return;const d=o(u.id);!d||!u.nodeData||r([{id:d.id,type:"replace",item:{...d,data:{...d.data,...cl(u.nodeData,ll)}}}])},[o,r]),l=y.useCallback(async u=>{if(n)try{await i(n,u,{onMessageUpdate:c})}catch(d){if(d instanceof Error&&d.message.includes("LLM_NOT_LOADED_YET"))return dc({variant:"destructive",title:t("message_node.errors.llm_not_loaded_yet")});dc({variant:"destructive",title:t("message_node.errors.create_message")})}},[n,t,i,c]);return{loading:s,createMessage:l}},AL=()=>{const e=Ze(r=>r.currentSession),t=Ae(r=>r.createOrUpdateFlowNode),n=Ae(r=>r.createOrUpdateFlowEdge);return{createIdieMessage:y.useCallback(async(r,o,a,i)=>{var g,m,v,b,x;if(!r||!o||!e)return;const s=(m=(g=i==null?void 0:i.promptNode)==null?void 0:g.data)==null?void 0:m.entity,c=((v=r.position)==null?void 0:v.x)||0,l=(((b=r.position)==null?void 0:b.y)||0)+(((x=r.measured)==null?void 0:x.height)||0),u=await ce("Message").save({thread_id:o.id,content:a,role:(s==null?void 0:s.role)||Tn.Human,status:eo.Started,llm_id:o.initial_llm_id,session_id:e.id});if(!u)throw new Error("Failed to save message");const d=await t({source_id:u.id,source_type:"Message",node_type:oe.Message,x:c,y:l});if(!d)throw new Error("Failed to save message node");const f=await n({source:r.id,target:d.id});let h;return i!=null&&i.promptNode&&(h=await n({source:i==null?void 0:i.promptNode.id,target:d.id})),{message:u,edgeToPrompt:h,messageNode:d,messageEdge:f}},[t,n])}},fle=e=>{const{createIdieMessage:t}=AL(),n=y.useCallback(async({edgeId:r,source:o,target:a})=>{var i,s;try{if((o==null?void 0:o.type)===oe.Prompt&&(a==null?void 0:a.type)===oe.Message){const c=(i=a==null?void 0:a.data)==null?void 0:i.entity,l=(s=o==null?void 0:o.data)==null?void 0:s.entity;if(!l||!c||!a)return{deleteEdgeId:r};await t(a,{id:c==null?void 0:c.thread_id,title:"",status:od.Started,initial_llm_id:c.llm_id,session_id:l.session_id},l.content,{promptNode:o});return}return{deleteEdgeId:r}}catch{return{deleteEdgeId:r}}},[t]);dn(e,n)},ple=y.memo(e=>{var _,w,j;const{id:t,data:n,isConnectable:r}=e,[o,a]=y.useState(!1),[i,s]=y.useState(!1),{t:c}=Me("common"),l=Xf({type:"source"}),{loading:u,createMessage:d}=dle(t),{toast:f}=$t();fle(t);const h=y.useCallback(async(...E)=>{const S=await d(...E);return a(!1),S},[d]),g=y.useMemo(()=>l.length===0,[l]),m=y.useCallback(()=>{var E;(E=n.entity)!=null&&E.content&&(navigator.clipboard.writeText(n.entity.content),f({description:c("copied")}))},[f,n,c]),v=y.useCallback(async()=>{var E;try{if(i)return await rS.stop(),s(!1);s(!0),await rS.speak(((E=n.entity)==null?void 0:E.content)||"")}catch{f({variant:"destructive",description:c("errors.speech_is_not_supported")})}finally{s(!1)}},[(_=n.entity)==null?void 0:_.content,i,c,f]),b=y.useCallback(()=>{a(E=>!E)},[]),x=y.useMemo(()=>{var E;if(!(!g&&!o||n.loading||u||((E=n==null?void 0:n.entity)==null?void 0:E.status)==="inprogress"))return p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"w-[1px] absolute ml-[50%] h-[30px] bg-gray-500"}),p.jsx("div",{className:"absolute mt-[30px] w-full",children:p.jsx("div",{className:"ml-[10%] w-80 animate-in slide-in-from-bottom-5",children:p.jsx(Op,{disabled:u,loading:u,onSubmit:h})})})]})},[(w=n==null?void 0:n.entity)==null?void 0:w.status,n.loading,h,g,u,o]);return p.jsxs("div",{children:[p.jsx(et,{type:"target",position:fe.Top,isConnectable:r}),p.jsxs("div",{className:"max-w-sm min-w-64",children:[p.jsxs("div",{className:"w-auto",children:[p.jsx(an,{id:t}),p.jsx("div",{children:((j=n.entity)==null?void 0:j.role)===Tn.Human?p.jsx(cle,{data:n,showThread:o,onNewThread:g?void 0:b}):p.jsx(ule,{data:n,showThread:o,loading:u,onNewThread:g?void 0:b})}),p.jsx(ot,{onClick:v,className:"absolute top-0 right-[68px] !px-2 !rounded-none",variant:"ghost",children:p.jsx(le,{name:i?"circle-stop":"speech",size:16})}),p.jsx(ot,{onClick:m,className:"absolute top-0 right-[36px] !px-2 !rounded-none",variant:"ghost",children:p.jsx(le,{name:"copy",size:16})})]}),x]}),p.jsx(et,{type:"source",position:fe.Bottom,id:"a",isConnectable:r})]})}),hle=e=>{const t=Ae(o=>o.createOrUpdateFlowEdge),{createIdieMessage:n}=AL(),r=y.useCallback(async({edgeId:o,source:a,target:i})=>{var s,c,l,u;try{const d=(s=i==null?void 0:i.data)==null?void 0:s.entity,f=(c=a==null?void 0:a.data)==null?void 0:c.entity;if((a==null?void 0:a.type)===oe.Message&&(i==null?void 0:i.type)===oe.Prompt){const h=(l=a==null?void 0:a.data)==null?void 0:l.entity,g=(u=i==null?void 0:i.data)==null?void 0:u.entity;if(!g||!h||!i)return{deleteEdgeId:o};await n(a,{id:h==null?void 0:h.thread_id,title:"",status:od.Started,initial_llm_id:h.llm_id,session_id:g.session_id},g.content,{promptNode:i});return}else if((a==null?void 0:a.type)===oe.CSVData&&(i==null?void 0:i.type)===oe.Prompt&&(d==null?void 0:d.type)===Rn.FewShotExample&&(f!=null&&f.headers.includes("input"))&&(f!=null&&f.headers.includes("output"))){await t({source:a.id,target:i.id});return}return{deleteEdgeId:o}}catch{return{deleteEdgeId:o}}},[n,t]);dn(e,r)},mle=y.memo(e=>{var l,u,d;const{id:t,data:n,isConnectable:r}=e;hle(t);const o=Xt(Z3),a=y.useMemo(()=>{var f,h,g;return`${(f=n.entity)!=null&&f.prefix?`${(h=n.entity)==null?void 0:h.prefix}
`:""}${((g=n.entity)==null?void 0:g.content)||""}`},[(l=n.entity)==null?void 0:l.prefix,(u=n.entity)==null?void 0:u.content]),i=y.useMemo(()=>{var h;const f=/{(.*?)}/g;return((h=a.match(f))==null?void 0:h.map(g=>g.replace("{","").replace("}","")))||[]},[a]),s=a.length>990,c=()=>{o.show({title:"Prompt",content:a})};return p.jsxs("div",{className:"min-w-56",children:[p.jsx(et,{type:"target",position:fe.Top,isConnectable:r}),p.jsxs("div",{children:[p.jsx(an,{id:t}),p.jsxs(Mo,{className:"flex justify-center max-w-72",variant:"default",children:[p.jsx(le,{size:24,name:"notepad-text"}),p.jsxs("div",{className:"ml-2 max-w-full break-words break-all",children:[p.jsx(ko,{children:`${((d=n.entity)==null?void 0:d.role)||""}`}),p.jsxs(_s,{onClick:s?c:void 0,children:[s?`${a.slice(0,990)}...`:a,s?p.jsx("span",{className:"float-right",children:p.jsx(le,{name:"chevron-right"})}):void 0]}),i!=null&&i.length?i.map((f,h)=>p.jsx(on,{className:"mt-2 mr-1",variant:"default",children:f},h)):void 0]})]})]}),p.jsx(et,{type:"source",position:fe.Bottom,id:"a",isConnectable:r})]})});var yle=S2();const Kn=Qe(yle);var l1,TL;function gle(){if(TL)return l1;TL=1;function e(t){return t==null}return l1=e,l1}var vle=gle();const at=Qe(vle);var u1,RL;function ble(){if(RL)return u1;RL=1;var e=mo(),t=pn(),n=kr(),r="[object String]";function o(a){return typeof a=="string"||!t(a)&&n(a)&&e(a)==r}return u1=o,u1}var xle=ble();const Wl=Qe(xle);var wle=Ju();const Ke=Qe(wle);var _le=ir();const js=Qe(_le);var IL={exports:{}},it={},DL;function jle(){if(DL)return it;DL=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),i=Symbol.for("react.context"),s=Symbol.for("react.server_context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.suspense_list"),d=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),h=Symbol.for("react.offscreen"),g;g=Symbol.for("react.module.reference");function m(v){if(typeof v=="object"&&v!==null){var b=v.$$typeof;switch(b){case e:switch(v=v.type,v){case n:case o:case r:case l:case u:return v;default:switch(v=v&&v.$$typeof,v){case s:case i:case c:case f:case d:case a:return v;default:return b}}case t:return b}}}return it.ContextConsumer=i,it.ContextProvider=a,it.Element=e,it.ForwardRef=c,it.Fragment=n,it.Lazy=f,it.Memo=d,it.Portal=t,it.Profiler=o,it.StrictMode=r,it.Suspense=l,it.SuspenseList=u,it.isAsyncMode=function(){return!1},it.isConcurrentMode=function(){return!1},it.isContextConsumer=function(v){return m(v)===i},it.isContextProvider=function(v){return m(v)===a},it.isElement=function(v){return typeof v=="object"&&v!==null&&v.$$typeof===e},it.isForwardRef=function(v){return m(v)===c},it.isFragment=function(v){return m(v)===n},it.isLazy=function(v){return m(v)===f},it.isMemo=function(v){return m(v)===d},it.isPortal=function(v){return m(v)===t},it.isProfiler=function(v){return m(v)===o},it.isStrictMode=function(v){return m(v)===r},it.isSuspense=function(v){return m(v)===l},it.isSuspenseList=function(v){return m(v)===u},it.isValidElementType=function(v){return typeof v=="string"||typeof v=="function"||v===n||v===o||v===r||v===l||v===u||v===h||typeof v=="object"&&v!==null&&(v.$$typeof===f||v.$$typeof===d||v.$$typeof===a||v.$$typeof===i||v.$$typeof===c||v.$$typeof===g||v.getModuleId!==void 0)},it.typeOf=m,it}var LL;function Ele(){return LL||(LL=1,IL.exports=jle()),IL.exports}var Sle=Ele(),d1,FL;function BL(){if(FL)return d1;FL=1;var e=mo(),t=kr(),n="[object Number]";function r(o){return typeof o=="number"||t(o)&&e(o)==n}return d1=r,d1}var f1,$L;function Cle(){if($L)return f1;$L=1;var e=BL();function t(n){return e(n)&&n!=+n}return f1=t,f1}var Ole=Cle();const ql=Qe(Ole);var Nle=BL();const Mle=Qe(Nle);var _r=function(e){return e===0?0:e>0?1:-1},ei=function(e){return Wl(e)&&e.indexOf("%")===e.length-1},he=function(e){return Mle(e)&&!ql(e)},Vt=function(e){return he(e)||Wl(e)},kle=0,Np=function(e){var t=++kle;return"".concat(e||"").concat(t)},ti=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!he(e)&&!Wl(e))return n;var o;if(ei(e)){var a=e.indexOf("%");o=t*parseFloat(e.slice(0,a))/100}else o=+e;return ql(o)&&(o=n),r&&o>t&&(o=t),o},fa=function(e){if(!e)return null;var t=Object.keys(e);return t&&t.length?e[t[0]]:null},Ple=function(e){if(!Array.isArray(e))return!1;for(var t=e.length,n={},r=0;r<t;r++)if(!n[e[r]])n[e[r]]=!0;else return!0;return!1},Es=function(e,t){return he(e)&&he(t)?function(n){return e+n*(t-e)}:function(){return t}};function p1(e,t,n){return!e||!e.length?null:e.find(function(r){return r&&(typeof t=="function"?t(r):Kn(r,t))===n})}function Ss(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var r in t)if({}.hasOwnProperty.call(t,r)&&!{}.hasOwnProperty.call(e,r))return!1;return!0}function h1(e){"@babel/helpers - typeof";return h1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h1(e)}var Ale=["viewBox","children"],Tle=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],zL=["points","pathLength"],m1={svg:Ale,polygon:zL,polyline:zL},y1=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Mp=function(e,t){if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(y.isValidElement(e)&&(n=e.props),!js(n))return null;var r={};return Object.keys(n).forEach(function(o){y1.includes(o)&&(r[o]=t||function(a){return n[o](n,a)})}),r},Rle=function(e,t,n){return function(r){return e(t,n,r),null}},kp=function(e,t,n){if(!js(e)||h1(e)!=="object")return null;var r=null;return Object.keys(e).forEach(function(o){var a=e[o];y1.includes(o)&&typeof a=="function"&&(r||(r={}),r[o]=Rle(a,t,n))}),r},Ile=["children"],Dle=["children"];function VL(e,t){if(e==null)return{};var n=Lle(e,t),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Lle(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var UL={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart"},Po=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},HL=null,g1=null,v1=function e(t){if(t===HL&&Array.isArray(g1))return g1;var n=[];return y.Children.forEach(t,function(r){at(r)||(Sle.isFragment(r)?n=n.concat(e(r.props.children)):n.push(r))}),g1=n,HL=t,n};function jr(e,t){var n=[],r=[];return Array.isArray(t)?r=t.map(function(o){return Po(o)}):r=[Po(t)],v1(e).forEach(function(o){var a=Kn(o,"type.displayName")||Kn(o,"type.name");r.indexOf(a)!==-1&&n.push(o)}),n}function zn(e,t){var n=jr(e,t);return n&&n[0]}var WL=function(e){if(!e||!e.props)return!1;var t=e.props,n=t.width,r=t.height;return!(!he(n)||n<=0||!he(r)||r<=0)},Fle=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],Ble=function(e){return e&&e.type&&Wl(e.type)&&Fle.indexOf(e.type)>=0},$le=function(e,t,n,r){var o,a=(o=m1==null?void 0:m1[r])!==null&&o!==void 0?o:[];return!Ke(e)&&(r&&a.includes(t)||Tle.includes(t))||n&&y1.includes(t)},rt=function(e,t,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(y.isValidElement(e)&&(r=e.props),!js(r))return null;var o={};return Object.keys(r).forEach(function(a){var i;$le((i=r)===null||i===void 0?void 0:i[a],a,t,n)&&(o[a]=r[a])}),o},b1=function e(t,n){if(t===n)return!0;var r=y.Children.count(t);if(r!==y.Children.count(n))return!1;if(r===0)return!0;if(r===1)return qL(Array.isArray(t)?t[0]:t,Array.isArray(n)?n[0]:n);for(var o=0;o<r;o++){var a=t[o],i=n[o];if(Array.isArray(a)||Array.isArray(i)){if(!e(a,i))return!1}else if(!qL(a,i))return!1}return!0},qL=function(e,t){if(at(e)&&at(t))return!0;if(!at(e)&&!at(t)){var n=e.props||{},r=n.children,o=VL(n,Ile),a=t.props||{},i=a.children,s=VL(a,Dle);return r&&i?Ss(o,s)&&b1(r,i):!r&&!i?Ss(o,s):!1}return!1},YL=function(e,t){var n=[],r={};return v1(e).forEach(function(o,a){if(Ble(o))n.push(o);else if(o){var i=Po(o.type),s=t[i]||{},c=s.handler,l=s.once;if(c&&(!l||!r[i])){var u=c(o,i,a);n.push(u),r[i]=!0}}}),n},zle=function(e){var t=e&&e.type;return t&&UL[t]?UL[t]:null},Vle=function(e,t){return v1(t).indexOf(e)},Ule=["children","width","height","viewBox","className","style","title","desc"];function x1(){return x1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},x1.apply(this,arguments)}function Hle(e,t){if(e==null)return{};var n=Wle(e,t),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Wle(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function w1(e){var t=e.children,n=e.width,r=e.height,o=e.viewBox,a=e.className,i=e.style,s=e.title,c=e.desc,l=Hle(e,Ule),u=o||{width:n,height:r,x:0,y:0},d=ut("recharts-surface",a);return U.createElement("svg",x1({},rt(l,!0,"svg"),{className:d,width:n,height:r,style:i,viewBox:"".concat(u.x," ").concat(u.y," ").concat(u.width," ").concat(u.height)}),U.createElement("title",null,s),U.createElement("desc",null,c),t)}var qle=["children","className"];function _1(){return _1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_1.apply(this,arguments)}function Yle(e,t){if(e==null)return{};var n=Kle(e,t),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Kle(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var qt=U.forwardRef(function(e,t){var n=e.children,r=e.className,o=Yle(e,qle),a=ut("recharts-layer",r);return U.createElement("g",_1({className:a},rt(o,!0),{ref:t}),n)}),Ao=function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o]},j1,KL;function Xle(){if(KL)return j1;KL=1;var e=hy();function t(n,r,o){var a=n.length;return o=o===void 0?a:o,!r&&o>=a?n:e(n,r,o)}return j1=t,j1}var E1,XL;function QL(){if(XL)return E1;XL=1;var e="\uD800-\uDFFF",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",o=t+n+r,a="\\ufe0e\\ufe0f",i="\\u200d",s=RegExp("["+i+e+o+a+"]");function c(l){return s.test(l)}return E1=c,E1}var S1,JL;function Qle(){if(JL)return S1;JL=1;function e(t){return t.split("")}return S1=e,S1}var C1,ZL;function Jle(){if(ZL)return C1;ZL=1;var e="\uD800-\uDFFF",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",o=t+n+r,a="\\ufe0e\\ufe0f",i="["+e+"]",s="["+o+"]",c="\uD83C[\uDFFB-\uDFFF]",l="(?:"+s+"|"+c+")",u="[^"+e+"]",d="(?:\uD83C[\uDDE6-\uDDFF]){2}",f="[\uD800-\uDBFF][\uDC00-\uDFFF]",h="\\u200d",g=l+"?",m="["+a+"]?",v="(?:"+h+"(?:"+[u,d,f].join("|")+")"+m+g+")*",b=m+g+v,x="(?:"+[u+s+"?",s,d,f,i].join("|")+")",_=RegExp(c+"(?="+c+")|"+x+b,"g");function w(j){return j.match(_)||[]}return C1=w,C1}var O1,GL;function Zle(){if(GL)return O1;GL=1;var e=Qle(),t=QL(),n=Jle();function r(o){return t(o)?n(o):e(o)}return O1=r,O1}var N1,e6;function Gle(){if(e6)return N1;e6=1;var e=Xle(),t=QL(),n=Zle(),r=x2();function o(a){return function(i){i=r(i);var s=t(i)?n(i):void 0,c=s?s[0]:i.charAt(0),l=s?e(s,1).join(""):i.slice(1);return c[a]()+l}}return N1=o,N1}var M1,t6;function eue(){if(t6)return M1;t6=1;var e=Gle(),t=e("toUpperCase");return M1=t,M1}var tue=eue();const Pp=Qe(tue);function xt(e){return function(){return e}}const n6=Math.cos,Ap=Math.sin,Er=Math.sqrt,Tp=Math.PI,Rp=2*Tp,k1=Math.PI,P1=2*k1,ni=1e-6,nue=P1-ni;function r6(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function rue(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return r6;const n=10**t;return function(r){this._+=r[0];for(let o=1,a=r.length;o<a;++o)this._+=Math.round(arguments[o]*n)/n+r[o]}}class oue{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?r6:rue(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,o){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+o}`}bezierCurveTo(t,n,r,o,a,i){this._append`C${+t},${+n},${+r},${+o},${this._x1=+a},${this._y1=+i}`}arcTo(t,n,r,o,a){if(t=+t,n=+n,r=+r,o=+o,a=+a,a<0)throw new Error(`negative radius: ${a}`);let i=this._x1,s=this._y1,c=r-t,l=o-n,u=i-t,d=s-n,f=u*u+d*d;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(f>ni)if(!(Math.abs(d*c-l*u)>ni)||!a)this._append`L${this._x1=t},${this._y1=n}`;else{let h=r-i,g=o-s,m=c*c+l*l,v=h*h+g*g,b=Math.sqrt(m),x=Math.sqrt(f),_=a*Math.tan((k1-Math.acos((m+f-v)/(2*b*x)))/2),w=_/x,j=_/b;Math.abs(w-1)>ni&&this._append`L${t+w*u},${n+w*d}`,this._append`A${a},${a},0,0,${+(d*h>u*g)},${this._x1=t+j*c},${this._y1=n+j*l}`}}arc(t,n,r,o,a,i){if(t=+t,n=+n,r=+r,i=!!i,r<0)throw new Error(`negative radius: ${r}`);let s=r*Math.cos(o),c=r*Math.sin(o),l=t+s,u=n+c,d=1^i,f=i?o-a:a-o;this._x1===null?this._append`M${l},${u}`:(Math.abs(this._x1-l)>ni||Math.abs(this._y1-u)>ni)&&this._append`L${l},${u}`,r&&(f<0&&(f=f%P1+P1),f>nue?this._append`A${r},${r},0,1,${d},${t-s},${n-c}A${r},${r},0,1,${d},${this._x1=l},${this._y1=u}`:f>ni&&this._append`A${r},${r},0,${+(f>=k1)},${d},${this._x1=t+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(t,n,r,o){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+o}h${-r}Z`}toString(){return this._}}function A1(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new oue(t)}function T1(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function o6(e){this._context=e}o6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Ip(e){return new o6(e)}function a6(e){return e[0]}function i6(e){return e[1]}function s6(e,t){var n=xt(!0),r=null,o=Ip,a=null,i=A1(s);e=typeof e=="function"?e:e===void 0?a6:xt(e),t=typeof t=="function"?t:t===void 0?i6:xt(t);function s(c){var l,u=(c=T1(c)).length,d,f=!1,h;for(r==null&&(a=o(h=i())),l=0;l<=u;++l)!(l<u&&n(d=c[l],l,c))===f&&((f=!f)?a.lineStart():a.lineEnd()),f&&a.point(+e(d,l,c),+t(d,l,c));if(h)return a=null,h+""||null}return s.x=function(c){return arguments.length?(e=typeof c=="function"?c:xt(+c),s):e},s.y=function(c){return arguments.length?(t=typeof c=="function"?c:xt(+c),s):t},s.defined=function(c){return arguments.length?(n=typeof c=="function"?c:xt(!!c),s):n},s.curve=function(c){return arguments.length?(o=c,r!=null&&(a=o(r)),s):o},s.context=function(c){return arguments.length?(c==null?r=a=null:a=o(r=c),s):r},s}function Dp(e,t,n){var r=null,o=xt(!0),a=null,i=Ip,s=null,c=A1(l);e=typeof e=="function"?e:e===void 0?a6:xt(+e),t=typeof t=="function"?t:xt(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?i6:xt(+n);function l(d){var f,h,g,m=(d=T1(d)).length,v,b=!1,x,_=new Array(m),w=new Array(m);for(a==null&&(s=i(x=c())),f=0;f<=m;++f){if(!(f<m&&o(v=d[f],f,d))===b)if(b=!b)h=f,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),g=f-1;g>=h;--g)s.point(_[g],w[g]);s.lineEnd(),s.areaEnd()}b&&(_[f]=+e(v,f,d),w[f]=+t(v,f,d),s.point(r?+r(v,f,d):_[f],n?+n(v,f,d):w[f]))}if(x)return s=null,x+""||null}function u(){return s6().defined(o).curve(i).context(a)}return l.x=function(d){return arguments.length?(e=typeof d=="function"?d:xt(+d),r=null,l):e},l.x0=function(d){return arguments.length?(e=typeof d=="function"?d:xt(+d),l):e},l.x1=function(d){return arguments.length?(r=d==null?null:typeof d=="function"?d:xt(+d),l):r},l.y=function(d){return arguments.length?(t=typeof d=="function"?d:xt(+d),n=null,l):t},l.y0=function(d){return arguments.length?(t=typeof d=="function"?d:xt(+d),l):t},l.y1=function(d){return arguments.length?(n=d==null?null:typeof d=="function"?d:xt(+d),l):n},l.lineX0=l.lineY0=function(){return u().x(e).y(t)},l.lineY1=function(){return u().x(e).y(n)},l.lineX1=function(){return u().x(r).y(t)},l.defined=function(d){return arguments.length?(o=typeof d=="function"?d:xt(!!d),l):o},l.curve=function(d){return arguments.length?(i=d,a!=null&&(s=i(a)),l):i},l.context=function(d){return arguments.length?(d==null?a=s=null:s=i(a=d),l):a},l}class c6{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function aue(e){return new c6(e,!0)}function iue(e){return new c6(e,!1)}const R1={draw(e,t){const n=Er(t/Tp);e.moveTo(n,0),e.arc(0,0,n,0,Rp)}},sue={draw(e,t){const n=Er(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},l6=Er(1/3),cue=l6*2,lue={draw(e,t){const n=Er(t/cue),r=n*l6;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},uue={draw(e,t){const n=Er(t),r=-n/2;e.rect(r,r,n,n)}},due=.8908130915292852,u6=Ap(Tp/10)/Ap(7*Tp/10),fue=Ap(Rp/10)*u6,pue=-n6(Rp/10)*u6,hue={draw(e,t){const n=Er(t*due),r=fue*n,o=pue*n;e.moveTo(0,-n),e.lineTo(r,o);for(let a=1;a<5;++a){const i=Rp*a/5,s=n6(i),c=Ap(i);e.lineTo(c*n,-s*n),e.lineTo(s*r-c*o,c*r+s*o)}e.closePath()}},I1=Er(3),mue={draw(e,t){const n=-Er(t/(I1*3));e.moveTo(0,n*2),e.lineTo(-I1*n,-n),e.lineTo(I1*n,-n),e.closePath()}},Xn=-.5,Qn=Er(3)/2,D1=1/Er(12),yue=(D1/2+1)*3,gue={draw(e,t){const n=Er(t/yue),r=n/2,o=n*D1,a=r,i=n*D1+n,s=-a,c=i;e.moveTo(r,o),e.lineTo(a,i),e.lineTo(s,c),e.lineTo(Xn*r-Qn*o,Qn*r+Xn*o),e.lineTo(Xn*a-Qn*i,Qn*a+Xn*i),e.lineTo(Xn*s-Qn*c,Qn*s+Xn*c),e.lineTo(Xn*r+Qn*o,Xn*o-Qn*r),e.lineTo(Xn*a+Qn*i,Xn*i-Qn*a),e.lineTo(Xn*s+Qn*c,Xn*c-Qn*s),e.closePath()}};function vue(e,t){let n=null,r=A1(o);e=typeof e=="function"?e:xt(e||R1),t=typeof t=="function"?t:xt(t===void 0?64:+t);function o(){let a;if(n||(n=a=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),a)return n=null,a+""||null}return o.type=function(a){return arguments.length?(e=typeof a=="function"?a:xt(a),o):e},o.size=function(a){return arguments.length?(t=typeof a=="function"?a:xt(+a),o):t},o.context=function(a){return arguments.length?(n=a??null,o):n},o}function Lp(){}function Fp(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function d6(e){this._context=e}d6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Fp(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Fp(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function bue(e){return new d6(e)}function f6(e){this._context=e}f6.prototype={areaStart:Lp,areaEnd:Lp,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Fp(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function xue(e){return new f6(e)}function p6(e){this._context=e}p6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Fp(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function wue(e){return new p6(e)}function h6(e){this._context=e}h6.prototype={areaStart:Lp,areaEnd:Lp,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function _ue(e){return new h6(e)}function m6(e){return e<0?-1:1}function y6(e,t,n){var r=e._x1-e._x0,o=t-e._x1,a=(e._y1-e._y0)/(r||o<0&&-0),i=(n-e._y1)/(o||r<0&&-0),s=(a*o+i*r)/(r+o);return(m6(a)+m6(i))*Math.min(Math.abs(a),Math.abs(i),.5*Math.abs(s))||0}function g6(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function L1(e,t,n){var r=e._x0,o=e._y0,a=e._x1,i=e._y1,s=(a-r)/3;e._context.bezierCurveTo(r+s,o+s*t,a-s,i-s*n,a,i)}function Bp(e){this._context=e}Bp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:L1(this,this._t0,g6(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,L1(this,g6(this,n=y6(this,e,t)),n);break;default:L1(this,this._t0,n=y6(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function v6(e){this._context=new b6(e)}(v6.prototype=Object.create(Bp.prototype)).point=function(e,t){Bp.prototype.point.call(this,t,e)};function b6(e){this._context=e}b6.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,o,a){this._context.bezierCurveTo(t,e,r,n,a,o)}};function jue(e){return new Bp(e)}function Eue(e){return new v6(e)}function x6(e){this._context=e}x6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=w6(e),o=w6(t),a=0,i=1;i<n;++a,++i)this._context.bezierCurveTo(r[0][a],o[0][a],r[1][a],o[1][a],e[i],t[i]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function w6(e){var t,n=e.length-1,r,o=new Array(n),a=new Array(n),i=new Array(n);for(o[0]=0,a[0]=2,i[0]=e[0]+2*e[1],t=1;t<n-1;++t)o[t]=1,a[t]=4,i[t]=4*e[t]+2*e[t+1];for(o[n-1]=2,a[n-1]=7,i[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=o[t]/a[t-1],a[t]-=r,i[t]-=r*i[t-1];for(o[n-1]=i[n-1]/a[n-1],t=n-2;t>=0;--t)o[t]=(i[t]-o[t+1])/a[t];for(a[n-1]=(e[n]+o[n-1])/2,t=0;t<n-1;++t)a[t]=2*e[t+1]-o[t+1];return[o,a]}function Sue(e){return new x6(e)}function $p(e,t){this._context=e,this._t=t}$p.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function Cue(e){return new $p(e,.5)}function Oue(e){return new $p(e,0)}function Nue(e){return new $p(e,1)}function Cs(e,t){if((i=e.length)>1)for(var n=1,r,o,a=e[t[0]],i,s=a.length;n<i;++n)for(o=a,a=e[t[n]],r=0;r<s;++r)a[r][1]+=a[r][0]=isNaN(o[r][1])?o[r][0]:o[r][1]}function F1(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function Mue(e,t){return e[t]}function kue(e){const t=[];return t.key=e,t}function Pue(){var e=xt([]),t=F1,n=Cs,r=Mue;function o(a){var i=Array.from(e.apply(this,arguments),kue),s,c=i.length,l=-1,u;for(const d of a)for(s=0,++l;s<c;++s)(i[s][l]=[0,+r(d,i[s].key,l,a)]).data=d;for(s=0,u=T1(t(i));s<c;++s)i[u[s]].index=s;return n(i,u),i}return o.keys=function(a){return arguments.length?(e=typeof a=="function"?a:xt(Array.from(a)),o):e},o.value=function(a){return arguments.length?(r=typeof a=="function"?a:xt(+a),o):r},o.order=function(a){return arguments.length?(t=a==null?F1:typeof a=="function"?a:xt(Array.from(a)),o):t},o.offset=function(a){return arguments.length?(n=a??Cs,o):n},o}function Aue(e,t){if((r=e.length)>0){for(var n,r,o=0,a=e[0].length,i;o<a;++o){for(i=n=0;n<r;++n)i+=e[n][o][1]||0;if(i)for(n=0;n<r;++n)e[n][o][1]/=i}Cs(e,t)}}function Tue(e,t){if((o=e.length)>0){for(var n=0,r=e[t[0]],o,a=r.length;n<a;++n){for(var i=0,s=0;i<o;++i)s+=e[i][n][1]||0;r[n][1]+=r[n][0]=-s/2}Cs(e,t)}}function Rue(e,t){if(!(!((i=e.length)>0)||!((a=(o=e[t[0]]).length)>0))){for(var n=0,r=1,o,a,i;r<a;++r){for(var s=0,c=0,l=0;s<i;++s){for(var u=e[t[s]],d=u[r][1]||0,f=u[r-1][1]||0,h=(d-f)/2,g=0;g<s;++g){var m=e[t[g]],v=m[r][1]||0,b=m[r-1][1]||0;h+=v-b}c+=d,l+=h*d}o[r-1][1]+=o[r-1][0]=n,c&&(n-=l/c)}o[r-1][1]+=o[r-1][0]=n,Cs(e,t)}}function Yl(e){"@babel/helpers - typeof";return Yl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yl(e)}var Iue=["type","size","sizeType"];function B1(){return B1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},B1.apply(this,arguments)}function _6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function j6(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?_6(Object(n),!0).forEach(function(r){Due(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_6(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Due(e,t,n){return t=Lue(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Lue(e){var t=Fue(e,"string");return Yl(t)=="symbol"?t:t+""}function Fue(e,t){if(Yl(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Yl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Bue(e,t){if(e==null)return{};var n=$ue(e,t),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function $ue(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var E6={symbolCircle:R1,symbolCross:sue,symbolDiamond:lue,symbolSquare:uue,symbolStar:hue,symbolTriangle:mue,symbolWye:gue},zue=Math.PI/180,Vue=function(e){var t="symbol".concat(Pp(e));return E6[t]||R1},Uue=function(e,t,n){if(t==="area")return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var r=18*zue;return 1.25*e*e*(Math.tan(r)-Math.tan(r*2)*Math.pow(Math.tan(r),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},Hue=function(e,t){E6["symbol".concat(Pp(e))]=t},$1=function(e){var t=e.type,n=t===void 0?"circle":t,r=e.size,o=r===void 0?64:r,a=e.sizeType,i=a===void 0?"area":a,s=Bue(e,Iue),c=j6(j6({},s),{},{type:n,size:o,sizeType:i}),l=function(){var g=Vue(n),m=vue().type(g).size(Uue(o,i,n));return m()},u=c.className,d=c.cx,f=c.cy,h=rt(c,!0);return d===+d&&f===+f&&o===+o?U.createElement("path",B1({},h,{className:ut("recharts-symbols",u),transform:"translate(".concat(d,", ").concat(f,")"),d:l()})):null};$1.registerSymbol=Hue;function Os(e){"@babel/helpers - typeof";return Os=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Os(e)}function z1(){return z1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},z1.apply(this,arguments)}function S6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Wue(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?S6(Object(n),!0).forEach(function(r){Kl(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S6(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function que(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Yue(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,O6(r.key),r)}}function Kue(e,t,n){return t&&Yue(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Xue(e,t,n){return t=zp(t),Que(e,C6()?Reflect.construct(t,n||[],zp(e).constructor):t.apply(e,n))}function Que(e,t){if(t&&(Os(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Jue(e)}function Jue(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(C6=function(){return!!e})()}function zp(e){return zp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},zp(e)}function Zue(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&V1(e,t)}function V1(e,t){return V1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},V1(e,t)}function Kl(e,t,n){return t=O6(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O6(e){var t=Gue(e,"string");return Os(t)=="symbol"?t:t+""}function Gue(e,t){if(Os(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Os(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Jn=32,U1=function(e){function t(){return que(this,t),Xue(this,t,arguments)}return Zue(t,e),Kue(t,[{key:"renderIcon",value:function(n){var r=this.props.inactiveColor,o=Jn/2,a=Jn/6,i=Jn/3,s=n.inactive?r:n.color;if(n.type==="plainline")return U.createElement("line",{strokeWidth:4,fill:"none",stroke:s,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:o,x2:Jn,y2:o,className:"recharts-legend-icon"});if(n.type==="line")return U.createElement("path",{strokeWidth:4,fill:"none",stroke:s,d:"M0,".concat(o,"h").concat(i,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(2*i,",").concat(o,`
            H`).concat(Jn,"M").concat(2*i,",").concat(o,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(i,",").concat(o),className:"recharts-legend-icon"});if(n.type==="rect")return U.createElement("path",{stroke:"none",fill:s,d:"M0,".concat(Jn/8,"h").concat(Jn,"v").concat(Jn*3/4,"h").concat(-Jn,"z"),className:"recharts-legend-icon"});if(U.isValidElement(n.legendIcon)){var c=Wue({},n);return delete c.legendIcon,U.cloneElement(n.legendIcon,c)}return U.createElement($1,{fill:s,cx:o,cy:o,size:Jn,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,r=this.props,o=r.payload,a=r.iconSize,i=r.layout,s=r.formatter,c=r.inactiveColor,l={x:0,y:0,width:Jn,height:Jn},u={display:i==="horizontal"?"inline-block":"block",marginRight:10},d={display:"inline-block",verticalAlign:"middle",marginRight:4};return o.map(function(f,h){var g=f.formatter||s,m=ut(Kl(Kl({"recharts-legend-item":!0},"legend-item-".concat(h),!0),"inactive",f.inactive));if(f.type==="none")return null;var v=Ke(f.value)?null:f.value;Ao(!Ke(f.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var b=f.inactive?c:f.color;return U.createElement("li",z1({className:m,style:u,key:"legend-item-".concat(h)},kp(n.props,f,h)),U.createElement(w1,{width:a,height:a,viewBox:l,style:d},n.renderIcon(f)),U.createElement("span",{className:"recharts-legend-item-text",style:{color:b}},g?g(v,f,h):v))})}},{key:"render",value:function(){var n=this.props,r=n.payload,o=n.layout,a=n.align;if(!r||!r.length)return null;var i={padding:0,margin:0,textAlign:o==="horizontal"?a:"left"};return U.createElement("ul",{className:"recharts-default-legend",style:i},this.renderItems())}}])}(y.PureComponent);Kl(U1,"displayName","Legend"),Kl(U1,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var H1,N6;function M6(){if(N6)return H1;N6=1;function e(t,n,r,o){for(var a=t.length,i=r+(o?1:-1);o?i--:++i<a;)if(n(t[i],i,t))return i;return-1}return H1=e,H1}var W1,k6;function ede(){if(k6)return W1;k6=1;function e(t){return t!==t}return W1=e,W1}var q1,P6;function tde(){if(P6)return q1;P6=1;function e(t,n,r){for(var o=r-1,a=t.length;++o<a;)if(t[o]===n)return o;return-1}return q1=e,q1}var Y1,A6;function nde(){if(A6)return Y1;A6=1;var e=M6(),t=ede(),n=tde();function r(o,a,i){return a===a?n(o,a,i):e(o,t,i)}return Y1=r,Y1}var K1,T6;function rde(){if(T6)return K1;T6=1;var e=nde();function t(n,r){var o=n==null?0:n.length;return!!o&&e(n,r,0)>-1}return K1=t,K1}var X1,R6;function ode(){if(R6)return X1;R6=1;function e(t,n,r){for(var o=-1,a=t==null?0:t.length;++o<a;)if(r(n,t[o]))return!0;return!1}return X1=e,X1}var Q1,I6;function ade(){if(I6)return Q1;I6=1;function e(){}return Q1=e,Q1}var J1,D6;function ide(){if(D6)return J1;D6=1;var e=GA(),t=ade(),n=u0(),r=1/0,o=e&&1/n(new e([,-0]))[1]==r?function(a){return new e(a)}:t;return J1=o,J1}var Z1,L6;function sde(){if(L6)return Z1;L6=1;var e=cA(),t=rde(),n=ode(),r=fA(),o=ide(),a=u0(),i=200;function s(c,l,u){var d=-1,f=t,h=c.length,g=!0,m=[],v=m;if(u)g=!1,f=n;else if(h>=i){var b=l?null:o(c);if(b)return a(b);g=!1,f=r,v=new e}else v=l?[]:m;e:for(;++d<h;){var x=c[d],_=l?l(x):x;if(x=u||x!==0?x:0,g&&_===_){for(var w=v.length;w--;)if(v[w]===_)continue e;l&&v.push(_),m.push(x)}else f(v,_,u)||(v!==m&&v.push(_),m.push(x))}return m}return Z1=s,Z1}var G1,F6;function cde(){if(F6)return G1;F6=1;var e=Fr(),t=sde();function n(r,o){return r&&r.length?t(r,e(o,2)):[]}return G1=n,G1}var lde=cde();const B6=Qe(lde);function $6(e,t,n){return t===!0?B6(e,n):Ke(t)?B6(e,t):e}function Ns(e){"@babel/helpers - typeof";return Ns=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ns(e)}var ude=["ref"];function z6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function To(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?z6(Object(n),!0).forEach(function(r){Up(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z6(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function dde(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function V6(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,H6(r.key),r)}}function fde(e,t,n){return t&&V6(e.prototype,t),n&&V6(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function pde(e,t,n){return t=Vp(t),hde(e,U6()?Reflect.construct(t,n||[],Vp(e).constructor):t.apply(e,n))}function hde(e,t){if(t&&(Ns(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return mde(e)}function mde(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function U6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(U6=function(){return!!e})()}function Vp(e){return Vp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Vp(e)}function yde(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&e_(e,t)}function e_(e,t){return e_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},e_(e,t)}function Up(e,t,n){return t=H6(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function H6(e){var t=gde(e,"string");return Ns(t)=="symbol"?t:t+""}function gde(e,t){if(Ns(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Ns(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vde(e,t){if(e==null)return{};var n=bde(e,t),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function bde(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function xde(e){return e.value}function wde(e,t){if(U.isValidElement(e))return U.cloneElement(e,t);if(typeof e=="function")return U.createElement(e,t);t.ref;var n=vde(t,ude);return U.createElement(U1,n)}var W6=1,Ms=function(e){function t(){var n;dde(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return n=pde(this,t,[].concat(o)),Up(n,"lastBoundingBox",{width:-1,height:-1}),n}return yde(t,e),fde(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,r=this.getBBox();r?(Math.abs(r.width-this.lastBoundingBox.width)>W6||Math.abs(r.height-this.lastBoundingBox.height)>W6)&&(this.lastBoundingBox.width=r.width,this.lastBoundingBox.height=r.height,n&&n(r)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?To({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var r=this.props,o=r.layout,a=r.align,i=r.verticalAlign,s=r.margin,c=r.chartWidth,l=r.chartHeight,u,d;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(a==="center"&&o==="vertical"){var f=this.getBBoxSnapshot();u={left:((c||0)-f.width)/2}}else u=a==="right"?{right:s&&s.right||0}:{left:s&&s.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(i==="middle"){var h=this.getBBoxSnapshot();d={top:((l||0)-h.height)/2}}else d=i==="bottom"?{bottom:s&&s.bottom||0}:{top:s&&s.top||0};return To(To({},u),d)}},{key:"render",value:function(){var n=this,r=this.props,o=r.content,a=r.width,i=r.height,s=r.wrapperStyle,c=r.payloadUniqBy,l=r.payload,u=To(To({position:"absolute",width:a||"auto",height:i||"auto"},this.getDefaultPosition(s)),s);return U.createElement("div",{className:"recharts-legend-wrapper",style:u,ref:function(d){n.wrapperNode=d}},wde(o,To(To({},this.props),{},{payload:$6(l,c,xde)})))}}],[{key:"getWithHeight",value:function(n,r){var o=To(To({},this.defaultProps),n.props),a=o.layout;return a==="vertical"&&he(n.props.height)?{height:n.props.height}:a==="horizontal"?{width:n.props.width||r}:null}}])}(y.PureComponent);Up(Ms,"displayName","Legend"),Up(Ms,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var t_,q6;function _de(){if(q6)return t_;q6=1;var e=Si(),t=Qu(),n=pn(),r=e?e.isConcatSpreadable:void 0;function o(a){return n(a)||t(a)||!!(r&&a&&a[r])}return t_=o,t_}var n_,Y6;hm=function(){if(Y6)return n_;Y6=1;var e=p0(),t=_de();function n(r,o,a,i,s){var c=-1,l=r.length;for(a||(a=t),s||(s=[]);++c<l;){var u=r[c];o>0&&a(u)?o>1?n(u,o-1,a,i,s):e(s,u):i||(s[s.length]=u)}return s}return n_=n,n_};var r_,K6;function jde(){if(K6)return r_;K6=1;function e(t){return function(n,r,o){for(var a=-1,i=Object(n),s=o(n),c=s.length;c--;){var l=s[t?c:++a];if(r(i[l],l,i)===!1)break}return n}}return r_=e,r_}var o_,X6;uS=function(){if(X6)return o_;X6=1;var e=jde(),t=e();return o_=t,o_};var a_,Q6;function J6(){if(Q6)return a_;Q6=1;var e=uS(),t=xc();function n(r,o){return r&&e(r,o,t)}return a_=n,a_}var i_,Z6;function Ede(){if(Z6)return i_;Z6=1;var e=Sa();function t(n,r){return function(o,a){if(o==null)return o;if(!e(o))return n(o,a);for(var i=o.length,s=r?i:-1,c=Object(o);(r?s--:++s<i)&&a(c[s],s,c)!==!1;);return o}}return i_=t,i_}var s_,G6;function c_(){if(G6)return s_;G6=1;var e=J6(),t=Ede(),n=t(e);return s_=n,s_}var l_,eF;function tF(){if(eF)return l_;eF=1;var e=c_(),t=Sa();function n(r,o){var a=-1,i=t(r)?Array(r.length):[];return e(r,function(s,c,l){i[++a]=o(s,c,l)}),i}return l_=n,l_}var u_,nF;function Sde(){if(nF)return u_;nF=1;function e(t,n){var r=t.length;for(t.sort(n);r--;)t[r]=t[r].value;return t}return u_=e,u_}var d_,rF;function Cde(){if(rF)return d_;rF=1;var e=Yi();function t(n,r){if(n!==r){var o=n!==void 0,a=n===null,i=n===n,s=e(n),c=r!==void 0,l=r===null,u=r===r,d=e(r);if(!l&&!d&&!s&&n>r||s&&c&&u&&!l&&!d||a&&c&&u||!o&&u||!i)return 1;if(!a&&!s&&!d&&n<r||d&&o&&i&&!a&&!s||l&&o&&i||!c&&i||!u)return-1}return 0}return d_=t,d_}var f_,oF;function Ode(){if(oF)return f_;oF=1;var e=Cde();function t(n,r,o){for(var a=-1,i=n.criteria,s=r.criteria,c=i.length,l=o.length;++a<c;){var u=e(i[a],s[a]);if(u){if(a>=l)return u;var d=o[a];return u*(d=="desc"?-1:1)}}return n.index-r.index}return f_=t,f_}var p_,aF;function Nde(){if(aF)return p_;aF=1;var e=fc(),t=jc(),n=Fr(),r=tF(),o=Sde(),a=dy(),i=Ode(),s=Ki(),c=pn();function l(u,d,f){d.length?d=e(d,function(m){return c(m)?function(v){return t(v,m.length===1?m[0]:m)}:m}):d=[s];var h=-1;d=e(d,a(n));var g=r(u,function(m,v,b){var x=e(d,function(_){return _(m)});return{criteria:x,index:++h,value:m}});return o(g,function(m,v){return i(m,v,f)})}return p_=l,p_}var h_,iF;vS=function(){if(iF)return h_;iF=1;function e(t,n,r){switch(r.length){case 0:return t.call(n);case 1:return t.call(n,r[0]);case 2:return t.call(n,r[0],r[1]);case 3:return t.call(n,r[0],r[1],r[2])}return t.apply(n,r)}return h_=e,h_};var m_,sF;lS=function(){if(sF)return m_;sF=1;var e=vS(),t=Math.max;function n(r,o,a){return o=t(o===void 0?r.length-1:o,0),function(){for(var i=arguments,s=-1,c=t(i.length-o,0),l=Array(c);++s<c;)l[s]=i[o+s];s=-1;for(var u=Array(o+1);++s<o;)u[s]=i[s];return u[o]=a(l),e(r,this,u)}}return m_=n,m_};var y_,cF;function Mde(){if(cF)return y_;cF=1;function e(t){return function(){return t}}return y_=e,y_}var g_,lF;function kde(){if(lF)return g_;lF=1;var e=Mde(),t=L2(),n=Ki(),r=t?function(o,a){return t(o,"toString",{configurable:!0,enumerable:!1,value:e(a),writable:!0})}:n;return g_=r,g_}var v_,uF;function Pde(){if(uF)return v_;uF=1;var e=800,t=16,n=Date.now;function r(o){var a=0,i=0;return function(){var s=n(),c=t-(s-i);if(i=s,c>0){if(++a>=e)return arguments[0]}else a=0;return o.apply(void 0,arguments)}}return v_=r,v_}var b_,dF;cS=function(){if(dF)return b_;dF=1;var e=kde(),t=Pde(),n=t(e);return b_=n,b_};var x_,fF;dS=function(){if(fF)return x_;fF=1;var e=Ki(),t=lS(),n=cS();function r(o,a){return n(t(o,a,e),o+"")}return x_=r,x_};var w_,pF;function Ade(){if(pF)return w_;pF=1;var e=hm(),t=Nde(),n=dS(),r=xi(),o=n(function(a,i){if(a==null)return[];var s=i.length;return s>1&&r(a,i[0],i[1])?i=[]:s>2&&r(i[0],i[1],i[2])&&(i=[i[0]]),t(a,e(i,1),[])});return w_=o,w_}var Tde=Ade();const __=Qe(Tde);function Xl(e){"@babel/helpers - typeof";return Xl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xl(e)}function j_(){return j_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},j_.apply(this,arguments)}function Rde(e,t){return Fde(e)||Lde(e,t)||Dde(e,t)||Ide()}function Ide(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Dde(e,t){if(e){if(typeof e=="string")return hF(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hF(e,t)}}function hF(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Lde(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,o,a,i,s=[],c=!0,l=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(c=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(u){l=!0,o=u}finally{try{if(!c&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return s}}function Fde(e){if(Array.isArray(e))return e}function mF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function E_(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?mF(Object(n),!0).forEach(function(r){Bde(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mF(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Bde(e,t,n){return t=$de(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $de(e){var t=zde(e,"string");return Xl(t)=="symbol"?t:t+""}function zde(e,t){if(Xl(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Xl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Vde(e){return Array.isArray(e)&&Vt(e[0])&&Vt(e[1])?e.join(" ~ "):e}var Ude=function(e){var t=e.separator,n=t===void 0?" : ":t,r=e.contentStyle,o=r===void 0?{}:r,a=e.itemStyle,i=a===void 0?{}:a,s=e.labelStyle,c=s===void 0?{}:s,l=e.payload,u=e.formatter,d=e.itemSorter,f=e.wrapperClassName,h=e.labelClassName,g=e.label,m=e.labelFormatter,v=e.accessibilityLayer,b=v===void 0?!1:v,x=function(){if(l&&l.length){var N={padding:0,margin:0},P=(d?__(l,d):l).map(function(R,A){if(R.type==="none")return null;var O=E_({display:"block",paddingTop:4,paddingBottom:4,color:R.color||"#000"},i),k=R.formatter||u||Vde,T=R.value,D=R.name,I=T,L=D;if(k&&I!=null&&L!=null){var B=k(T,D,R,A,l);if(Array.isArray(B)){var V=Rde(B,2);I=V[0],L=V[1]}else I=B}return U.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(A),style:O},Vt(L)?U.createElement("span",{className:"recharts-tooltip-item-name"},L):null,Vt(L)?U.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,U.createElement("span",{className:"recharts-tooltip-item-value"},I),U.createElement("span",{className:"recharts-tooltip-item-unit"},R.unit||""))});return U.createElement("ul",{className:"recharts-tooltip-item-list",style:N},P)}return null},_=E_({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},o),w=E_({margin:0},c),j=!at(g),E=j?g:"",S=ut("recharts-default-tooltip",f),C=ut("recharts-tooltip-label",h);j&&m&&l!==void 0&&l!==null&&(E=m(g,l));var M=b?{role:"status","aria-live":"assertive"}:{};return U.createElement("div",j_({className:S,style:_},M),U.createElement("p",{className:C,style:w},U.isValidElement(E)?E:"".concat(E)),x())};function Ql(e){"@babel/helpers - typeof";return Ql=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ql(e)}function Hp(e,t,n){return t=Hde(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Hde(e){var t=Wde(e,"string");return Ql(t)=="symbol"?t:t+""}function Wde(e,t){if(Ql(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Ql(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Jl="recharts-tooltip-wrapper",qde={visibility:"hidden"};function Yde(e){var t=e.coordinate,n=e.translateX,r=e.translateY;return ut(Jl,Hp(Hp(Hp(Hp({},"".concat(Jl,"-right"),he(n)&&t&&he(t.x)&&n>=t.x),"".concat(Jl,"-left"),he(n)&&t&&he(t.x)&&n<t.x),"".concat(Jl,"-bottom"),he(r)&&t&&he(t.y)&&r>=t.y),"".concat(Jl,"-top"),he(r)&&t&&he(t.y)&&r<t.y))}function yF(e){var t=e.allowEscapeViewBox,n=e.coordinate,r=e.key,o=e.offsetTopLeft,a=e.position,i=e.reverseDirection,s=e.tooltipDimension,c=e.viewBox,l=e.viewBoxDimension;if(a&&he(a[r]))return a[r];var u=n[r]-s-o,d=n[r]+o;if(t[r])return i[r]?u:d;if(i[r]){var f=u,h=c[r];return f<h?Math.max(d,c[r]):Math.max(u,c[r])}var g=d+s,m=c[r]+l;return g>m?Math.max(u,c[r]):Math.max(d,c[r])}function Kde(e){var t=e.translateX,n=e.translateY,r=e.useTranslate3d;return{transform:r?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}function Xde(e){var t=e.allowEscapeViewBox,n=e.coordinate,r=e.offsetTopLeft,o=e.position,a=e.reverseDirection,i=e.tooltipBox,s=e.useTranslate3d,c=e.viewBox,l,u,d;return i.height>0&&i.width>0&&n?(u=yF({allowEscapeViewBox:t,coordinate:n,key:"x",offsetTopLeft:r,position:o,reverseDirection:a,tooltipDimension:i.width,viewBox:c,viewBoxDimension:c.width}),d=yF({allowEscapeViewBox:t,coordinate:n,key:"y",offsetTopLeft:r,position:o,reverseDirection:a,tooltipDimension:i.height,viewBox:c,viewBoxDimension:c.height}),l=Kde({translateX:u,translateY:d,useTranslate3d:s})):l=qde,{cssProperties:l,cssClasses:Yde({translateX:u,translateY:d,coordinate:n})}}function ks(e){"@babel/helpers - typeof";return ks=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ks(e)}function gF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function vF(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?gF(Object(n),!0).forEach(function(r){C_(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gF(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Qde(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Jde(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,xF(r.key),r)}}function Zde(e,t,n){return t&&Jde(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Gde(e,t,n){return t=Wp(t),efe(e,bF()?Reflect.construct(t,n||[],Wp(e).constructor):t.apply(e,n))}function efe(e,t){if(t&&(ks(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return tfe(e)}function tfe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(bF=function(){return!!e})()}function Wp(e){return Wp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Wp(e)}function nfe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&S_(e,t)}function S_(e,t){return S_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},S_(e,t)}function C_(e,t,n){return t=xF(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xF(e){var t=rfe(e,"string");return ks(t)=="symbol"?t:t+""}function rfe(e,t){if(ks(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(ks(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var wF=1,ofe=function(e){function t(){var n;Qde(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return n=Gde(this,t,[].concat(o)),C_(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),C_(n,"handleKeyDown",function(i){if(i.key==="Escape"){var s,c,l,u;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(s=(c=n.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&s!==void 0?s:0,y:(l=(u=n.props.coordinate)===null||u===void 0?void 0:u.y)!==null&&l!==void 0?l:0}})}}),n}return nfe(t,e),Zde(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>wF||Math.abs(n.height-this.state.lastBoundingBox.height)>wF)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,r;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,r=this.props,o=r.active,a=r.allowEscapeViewBox,i=r.animationDuration,s=r.animationEasing,c=r.children,l=r.coordinate,u=r.hasPayload,d=r.isAnimationActive,f=r.offset,h=r.position,g=r.reverseDirection,m=r.useTranslate3d,v=r.viewBox,b=r.wrapperStyle,x=Xde({allowEscapeViewBox:a,coordinate:l,offsetTopLeft:f,position:h,reverseDirection:g,tooltipBox:this.state.lastBoundingBox,useTranslate3d:m,viewBox:v}),_=x.cssClasses,w=x.cssProperties,j=vF(vF({transition:d&&o?"transform ".concat(i,"ms ").concat(s):void 0},w),{},{pointerEvents:"none",visibility:!this.state.dismissed&&o&&u?"visible":"hidden",position:"absolute",top:0,left:0},b);return U.createElement("div",{tabIndex:-1,className:_,style:j,ref:function(E){n.wrapperNode=E}},c)}}])}(y.PureComponent),afe=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},pa={isSsr:afe(),get:function(e){return pa[e]},set:function(e,t){if(typeof e=="string")pa[e]=t;else{var n=Object.keys(e);n&&n.length&&n.forEach(function(r){pa[r]=e[r]})}}};function Ps(e){"@babel/helpers - typeof";return Ps=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ps(e)}function _F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function jF(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?_F(Object(n),!0).forEach(function(r){N_(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_F(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ife(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function sfe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,SF(r.key),r)}}function cfe(e,t,n){return t&&sfe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function lfe(e,t,n){return t=qp(t),ufe(e,EF()?Reflect.construct(t,n||[],qp(e).constructor):t.apply(e,n))}function ufe(e,t){if(t&&(Ps(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return dfe(e)}function dfe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function EF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(EF=function(){return!!e})()}function qp(e){return qp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},qp(e)}function ffe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&O_(e,t)}function O_(e,t){return O_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},O_(e,t)}function N_(e,t,n){return t=SF(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function SF(e){var t=pfe(e,"string");return Ps(t)=="symbol"?t:t+""}function pfe(e,t){if(Ps(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Ps(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hfe(e){return e.dataKey}function mfe(e,t){return U.isValidElement(e)?U.cloneElement(e,t):typeof e=="function"?U.createElement(e,t):U.createElement(Ude,t)}var qr=function(e){function t(){return ife(this,t),lfe(this,t,arguments)}return ffe(t,e),cfe(t,[{key:"render",value:function(){var n=this,r=this.props,o=r.active,a=r.allowEscapeViewBox,i=r.animationDuration,s=r.animationEasing,c=r.content,l=r.coordinate,u=r.filterNull,d=r.isAnimationActive,f=r.offset,h=r.payload,g=r.payloadUniqBy,m=r.position,v=r.reverseDirection,b=r.useTranslate3d,x=r.viewBox,_=r.wrapperStyle,w=h??[];u&&w.length&&(w=$6(h.filter(function(E){return E.value!=null&&(E.hide!==!0||n.props.includeHidden)}),g,hfe));var j=w.length>0;return U.createElement(ofe,{allowEscapeViewBox:a,animationDuration:i,animationEasing:s,isAnimationActive:d,active:o,coordinate:l,hasPayload:j,offset:f,position:m,reverseDirection:v,useTranslate3d:b,viewBox:x,wrapperStyle:_},mfe(c,jF(jF({},this.props),{},{payload:w})))}}])}(y.PureComponent);N_(qr,"displayName","Tooltip"),N_(qr,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!pa.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var M_,CF;function yfe(){if(CF)return M_;CF=1;var e=ar(),t=function(){return e.Date.now()};return M_=t,M_}var k_,OF;mS=function(){if(OF)return k_;OF=1;var e=ir(),t=yfe(),n=o5(),r="Expected a function",o=Math.max,a=Math.min;function i(s,c,l){var u,d,f,h,g,m,v=0,b=!1,x=!1,_=!0;if(typeof s!="function")throw new TypeError(r);c=n(c)||0,e(l)&&(b=!!l.leading,x="maxWait"in l,f=x?o(n(l.maxWait)||0,c):f,_="trailing"in l?!!l.trailing:_);function w(A){var O=u,k=d;return u=d=void 0,v=A,h=s.apply(k,O),h}function j(A){return v=A,g=setTimeout(C,c),b?w(A):h}function E(A){var O=A-m,k=A-v,T=c-O;return x?a(T,f-k):T}function S(A){var O=A-m,k=A-v;return m===void 0||O>=c||O<0||x&&k>=f}function C(){var A=t();if(S(A))return M(A);g=setTimeout(C,E(A))}function M(A){return g=void 0,_&&u?w(A):(u=d=void 0,h)}function N(){g!==void 0&&clearTimeout(g),v=0,u=m=d=g=void 0}function P(){return g===void 0?h:M(t())}function R(){var A=t(),O=S(A);if(u=arguments,d=this,m=A,O){if(g===void 0)return j(m);if(x)return clearTimeout(g),g=setTimeout(C,c),w(m)}return g===void 0&&(g=setTimeout(C,c)),h}return R.cancel=N,R.flush=P,R}return k_=i,k_};var P_,NF;function gfe(){if(NF)return P_;NF=1;var e=mS(),t=ir(),n="Expected a function";function r(o,a,i){var s=!0,c=!0;if(typeof o!="function")throw new TypeError(n);return t(i)&&(s="leading"in i?!!i.leading:s,c="trailing"in i?!!i.trailing:c),e(o,a,{leading:s,maxWait:a,trailing:c})}return P_=r,P_}var vfe=gfe();gm=Qe(vfe);function Zl(e){"@babel/helpers - typeof";return Zl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zl(e)}function MF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Yp(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?MF(Object(n),!0).forEach(function(r){bfe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):MF(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function bfe(e,t,n){return t=xfe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xfe(e){var t=wfe(e,"string");return Zl(t)=="symbol"?t:t+""}function wfe(e,t){if(Zl(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Zl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _fe(e,t){return Cfe(e)||Sfe(e,t)||Efe(e,t)||jfe()}function jfe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Efe(e,t){if(e){if(typeof e=="string")return kF(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return kF(e,t)}}function kF(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Sfe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,o,a,i,s=[],c=!0,l=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(c=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(u){l=!0,o=u}finally{try{if(!c&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return s}}function Cfe(e){if(Array.isArray(e))return e}var Ofe=y.forwardRef(function(e,t){var n=e.aspect,r=e.initialDimension,o=r===void 0?{width:-1,height:-1}:r,a=e.width,i=a===void 0?"100%":a,s=e.height,c=s===void 0?"100%":s,l=e.minWidth,u=l===void 0?0:l,d=e.minHeight,f=e.maxHeight,h=e.children,g=e.debounce,m=g===void 0?0:g,v=e.id,b=e.className,x=e.onResize,_=e.style,w=_===void 0?{}:_,j=y.useRef(null),E=y.useRef();E.current=x,y.useImperativeHandle(t,function(){return Object.defineProperty(j.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),j.current},configurable:!0})});var S=y.useState({containerWidth:o.width,containerHeight:o.height}),C=_fe(S,2),M=C[0],N=C[1],P=y.useCallback(function(A,O){N(function(k){var T=Math.round(A),D=Math.round(O);return k.containerWidth===T&&k.containerHeight===D?k:{containerWidth:T,containerHeight:D}})},[]);y.useEffect(function(){var A=function(I){var L,B=I[0].contentRect,V=B.width,F=B.height;P(V,F),(L=E.current)===null||L===void 0||L.call(E,V,F)};m>0&&(A=gm(A,m,{trailing:!0,leading:!1}));var O=new ResizeObserver(A),k=j.current.getBoundingClientRect(),T=k.width,D=k.height;return P(T,D),O.observe(j.current),function(){O.disconnect()}},[P,m]);var R=y.useMemo(function(){var A=M.containerWidth,O=M.containerHeight;if(A<0||O<0)return null;Ao(ei(i)||ei(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,i,c),Ao(!n||n>0,"The aspect(%s) must be greater than zero.",n);var k=ei(i)?A:i,T=ei(c)?O:c;n&&n>0&&(k?T=k/n:T&&(k=T*n),f&&T>f&&(T=f)),Ao(k>0||T>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,k,T,i,c,u,d,n);var D=!Array.isArray(h)&&Po(h.type).endsWith("Chart");return U.Children.map(h,function(I){return U.isValidElement(I)?y.cloneElement(I,Yp({width:k,height:T},D?{style:Yp({height:"100%",width:"100%",maxHeight:T,maxWidth:k},I.props.style)}:{})):I})},[n,h,c,f,d,u,M,i]);return U.createElement("div",{id:v?"".concat(v):void 0,className:ut("recharts-responsive-container",b),style:Yp(Yp({},w),{},{width:i,height:c,minWidth:u,minHeight:d,maxHeight:f}),ref:j},R)}),PF=function(e){return null};PF.displayName="Cell";function Gl(e){"@babel/helpers - typeof";return Gl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gl(e)}function AF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function A_(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?AF(Object(n),!0).forEach(function(r){Nfe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):AF(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Nfe(e,t,n){return t=Mfe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Mfe(e){var t=kfe(e,"string");return Gl(t)=="symbol"?t:t+""}function kfe(e,t){if(Gl(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Gl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var As={widthCache:{},cacheCount:0},Pfe=2e3,Afe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},TF="recharts_measurement_span";function Tfe(e){var t=A_({},e);return Object.keys(t).forEach(function(n){t[n]||delete t[n]}),t}var eu=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||pa.isSsr)return{width:0,height:0};var n=Tfe(t),r=JSON.stringify({text:e,copyStyle:n});if(As.widthCache[r])return As.widthCache[r];try{var o=document.getElementById(TF);o||(o=document.createElement("span"),o.setAttribute("id",TF),o.setAttribute("aria-hidden","true"),document.body.appendChild(o));var a=A_(A_({},Afe),n);Object.assign(o.style,a),o.textContent="".concat(e);var i=o.getBoundingClientRect(),s={width:i.width,height:i.height};return As.widthCache[r]=s,++As.cacheCount>Pfe&&(As.cacheCount=0,As.widthCache={}),s}catch{return{width:0,height:0}}},Rfe=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function tu(e){"@babel/helpers - typeof";return tu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tu(e)}function Kp(e,t){return Ffe(e)||Lfe(e,t)||Dfe(e,t)||Ife()}function Ife(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Dfe(e,t){if(e){if(typeof e=="string")return RF(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return RF(e,t)}}function RF(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Lfe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,o,a,i,s=[],c=!0,l=!1;try{if(a=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(u){l=!0,o=u}finally{try{if(!c&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return s}}function Ffe(e){if(Array.isArray(e))return e}function Bfe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function IF(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,zfe(r.key),r)}}function $fe(e,t,n){return t&&IF(e.prototype,t),n&&IF(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function zfe(e){var t=Vfe(e,"string");return tu(t)=="symbol"?t:t+""}function Vfe(e,t){if(tu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(tu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var DF=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,LF=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Ufe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Hfe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,FF={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Wfe=Object.keys(FF),Ts="NaN";function qfe(e,t){return e*FF[t]}var Xp=function(){function e(t,n){Bfe(this,e),this.num=t,this.unit=n,this.num=t,this.unit=n,Number.isNaN(t)&&(this.unit=""),n!==""&&!Ufe.test(n)&&(this.num=NaN,this.unit=""),Wfe.includes(n)&&(this.num=qfe(t,n),this.unit="px")}return $fe(e,[{key:"add",value:function(t){return this.unit!==t.unit?new e(NaN,""):new e(this.num+t.num,this.unit)}},{key:"subtract",value:function(t){return this.unit!==t.unit?new e(NaN,""):new e(this.num-t.num,this.unit)}},{key:"multiply",value:function(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new e(NaN,""):new e(this.num*t.num,this.unit||t.unit)}},{key:"divide",value:function(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new e(NaN,""):new e(this.num/t.num,this.unit||t.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(t){var n,r=(n=Hfe.exec(t))!==null&&n!==void 0?n:[],o=Kp(r,3),a=o[1],i=o[2];return new e(parseFloat(a),i??"")}}])}();function BF(e){if(e.includes(Ts))return Ts;for(var t=e;t.includes("*")||t.includes("/");){var n,r=(n=DF.exec(t))!==null&&n!==void 0?n:[],o=Kp(r,4),a=o[1],i=o[2],s=o[3],c=Xp.parse(a??""),l=Xp.parse(s??""),u=i==="*"?c.multiply(l):c.divide(l);if(u.isNaN())return Ts;t=t.replace(DF,u.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var d,f=(d=LF.exec(t))!==null&&d!==void 0?d:[],h=Kp(f,4),g=h[1],m=h[2],v=h[3],b=Xp.parse(g??""),x=Xp.parse(v??""),_=m==="+"?b.add(x):b.subtract(x);if(_.isNaN())return Ts;t=t.replace(LF,_.toString())}return t}var $F=/\(([^()]*)\)/;function Yfe(e){for(var t=e;t.includes("(");){var n=$F.exec(t),r=Kp(n,2),o=r[1];t=t.replace($F,BF(o))}return t}function Kfe(e){var t=e.replace(/\s+/g,"");return t=Yfe(t),t=BF(t),t}function Xfe(e){try{return Kfe(e)}catch{return Ts}}function T_(e){var t=Xfe(e.slice(5,-1));return t===Ts?"":t}var Qfe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Jfe=["dx","dy","angle","className","breakAll"];function R_(){return R_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},R_.apply(this,arguments)}function zF(e,t){if(e==null)return{};var n=Zfe(e,t),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Zfe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function VF(e,t){return npe(e)||tpe(e,t)||epe(e,t)||Gfe()}function Gfe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function epe(e,t){if(e){if(typeof e=="string")return UF(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return UF(e,t)}}function UF(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function tpe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,o,a,i,s=[],c=!0,l=!1;try{if(a=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(u){l=!0,o=u}finally{try{if(!c&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return s}}function npe(e){if(Array.isArray(e))return e}var HF=/[ \f\n\r\t\v\u2028\u2029]+/,WF=function(e){var t=e.children,n=e.breakAll,r=e.style;try{var o=[];at(t)||(n?o=t.toString().split(""):o=t.toString().split(HF));var a=o.map(function(s){return{word:s,width:eu(s,r).width}}),i=n?0:eu("\xA0",r).width;return{wordsWithComputedWidth:a,spaceWidth:i}}catch{return null}},rpe=function(e,t,n,r,o){var a=e.maxLines,i=e.children,s=e.style,c=e.breakAll,l=he(a),u=i,d=function(){var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return A.reduce(function(O,k){var T=k.word,D=k.width,I=O[O.length-1];if(I&&(r==null||o||I.width+D+n<Number(r)))I.words.push(T),I.width+=D+n;else{var L={words:[T],width:D};O.push(L)}return O},[])},f=d(t),h=function(A){return A.reduce(function(O,k){return O.width>k.width?O:k})};if(!l)return f;for(var g="\u2026",m=function(A){var O=u.slice(0,A),k=WF({breakAll:c,style:s,children:O+g}).wordsWithComputedWidth,T=d(k),D=T.length>a||h(T).width>Number(r);return[D,T]},v=0,b=u.length-1,x=0,_;v<=b&&x<=u.length-1;){var w=Math.floor((v+b)/2),j=w-1,E=m(j),S=VF(E,2),C=S[0],M=S[1],N=m(w),P=VF(N,1),R=P[0];if(!C&&!R&&(v=w+1),C&&R&&(b=w-1),!C&&R){_=M;break}x++}return _||f},qF=function(e){var t=at(e)?[]:e.toString().split(HF);return[{words:t}]},ope=function(e){var t=e.width,n=e.scaleToFit,r=e.children,o=e.style,a=e.breakAll,i=e.maxLines;if((t||n)&&!pa.isSsr){var s,c,l=WF({breakAll:a,children:r,style:o});if(l){var u=l.wordsWithComputedWidth,d=l.spaceWidth;s=u,c=d}else return qF(r);return rpe({breakAll:a,children:r,maxLines:i,style:o},s,c,t,n)}return qF(r)},YF="#808080",Qp=function(e){var t=e.x,n=t===void 0?0:t,r=e.y,o=r===void 0?0:r,a=e.lineHeight,i=a===void 0?"1em":a,s=e.capHeight,c=s===void 0?"0.71em":s,l=e.scaleToFit,u=l===void 0?!1:l,d=e.textAnchor,f=d===void 0?"start":d,h=e.verticalAnchor,g=h===void 0?"end":h,m=e.fill,v=m===void 0?YF:m,b=zF(e,Qfe),x=y.useMemo(function(){return ope({breakAll:b.breakAll,children:b.children,maxLines:b.maxLines,scaleToFit:u,style:b.style,width:b.width})},[b.breakAll,b.children,b.maxLines,u,b.style,b.width]),_=b.dx,w=b.dy,j=b.angle,E=b.className,S=b.breakAll,C=zF(b,Jfe);if(!Vt(n)||!Vt(o))return null;var M=n+(he(_)?_:0),N=o+(he(w)?w:0),P;switch(g){case"start":P=T_("calc(".concat(c,")"));break;case"middle":P=T_("calc(".concat((x.length-1)/2," * -").concat(i," + (").concat(c," / 2))"));break;default:P=T_("calc(".concat(x.length-1," * -").concat(i,")"));break}var R=[];if(u){var A=x[0].width,O=b.width;R.push("scale(".concat((he(O)?O/A:1)/A,")"))}return j&&R.push("rotate(".concat(j,", ").concat(M,", ").concat(N,")")),R.length&&(C.transform=R.join(" ")),U.createElement("text",R_({},rt(C,!0),{x:M,y:N,className:ut("recharts-text",E),textAnchor:f,fill:v.includes("url")?YF:v}),x.map(function(k,T){var D=k.words.join(S?"":" ");return U.createElement("tspan",{x:M,dy:T===0?P:i,key:"".concat(D,"-").concat(T)},D)}))};function ha(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function ape(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function I_(e){let t,n,r;e.length!==2?(t=ha,n=(s,c)=>ha(e(s),c),r=(s,c)=>e(s)-c):(t=e===ha||e===ape?e:ipe,n=e,r=e);function o(s,c,l=0,u=s.length){if(l<u){if(t(c,c)!==0)return u;do{const d=l+u>>>1;n(s[d],c)<0?l=d+1:u=d}while(l<u)}return l}function a(s,c,l=0,u=s.length){if(l<u){if(t(c,c)!==0)return u;do{const d=l+u>>>1;n(s[d],c)<=0?l=d+1:u=d}while(l<u)}return l}function i(s,c,l=0,u=s.length){const d=o(s,c,l,u-1);return d>l&&r(s[d-1],c)>-r(s[d],c)?d-1:d}return{left:o,center:i,right:a}}function ipe(){return 0}function KF(e){return e===null?NaN:+e}function*spe(e,t){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const cpe=I_(ha),nu=cpe.right;I_(KF).center;class XF extends Map{constructor(t,n=dpe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,o]of t)this.set(r,o)}get(t){return super.get(QF(this,t))}has(t){return super.has(QF(this,t))}set(t,n){return super.set(lpe(this,t),n)}delete(t){return super.delete(upe(this,t))}}function QF({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function lpe({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function upe({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function dpe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function fpe(e=ha){if(e===ha)return JF;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function JF(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const ppe=Math.sqrt(50),hpe=Math.sqrt(10),mpe=Math.sqrt(2);function Jp(e,t,n){const r=(t-e)/Math.max(0,n),o=Math.floor(Math.log10(r)),a=r/Math.pow(10,o),i=a>=ppe?10:a>=hpe?5:a>=mpe?2:1;let s,c,l;return o<0?(l=Math.pow(10,-o)/i,s=Math.round(e*l),c=Math.round(t*l),s/l<e&&++s,c/l>t&&--c,l=-l):(l=Math.pow(10,o)*i,s=Math.round(e/l),c=Math.round(t/l),s*l<e&&++s,c*l>t&&--c),c<s&&.5<=n&&n<2?Jp(e,t,n*2):[s,c,l]}function D_(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[o,a,i]=r?Jp(t,e,n):Jp(e,t,n);if(!(a>=o))return[];const s=a-o+1,c=new Array(s);if(r)if(i<0)for(let l=0;l<s;++l)c[l]=(a-l)/-i;else for(let l=0;l<s;++l)c[l]=(a-l)*i;else if(i<0)for(let l=0;l<s;++l)c[l]=(o+l)/-i;else for(let l=0;l<s;++l)c[l]=(o+l)*i;return c}function L_(e,t,n){return t=+t,e=+e,n=+n,Jp(e,t,n)[2]}function F_(e,t,n){t=+t,e=+e,n=+n;const r=t<e,o=r?L_(t,e,n):L_(e,t,n);return(r?-1:1)*(o<0?1/-o:o)}function ZF(e,t){let n;for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function GF(e,t){let n;for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function eB(e,t,n=0,r=1/0,o){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(o=o===void 0?JF:fpe(o);r>n;){if(r-n>600){const c=r-n+1,l=t-n+1,u=Math.log(c),d=.5*Math.exp(2*u/3),f=.5*Math.sqrt(u*d*(c-d)/c)*(l-c/2<0?-1:1),h=Math.max(n,Math.floor(t-l*d/c+f)),g=Math.min(r,Math.floor(t+(c-l)*d/c+f));eB(e,t,h,g,o)}const a=e[t];let i=n,s=r;for(ru(e,n,t),o(e[r],a)>0&&ru(e,n,r);i<s;){for(ru(e,i,s),++i,--s;o(e[i],a)<0;)++i;for(;o(e[s],a)>0;)--s}o(e[n],a)===0?ru(e,n,s):(++s,ru(e,s,r)),s<=t&&(n=s+1),t<=s&&(r=s-1)}return e}function ru(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function ype(e,t,n){if(e=Float64Array.from(spe(e)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return GF(e);if(t>=1)return ZF(e);var r,o=(r-1)*t,a=Math.floor(o),i=ZF(eB(e,a).subarray(0,a+1)),s=GF(e.subarray(a+1));return i+(s-i)*(o-a)}}function gpe(e,t,n=KF){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,o=(r-1)*t,a=Math.floor(o),i=+n(e[a],a,e),s=+n(e[a+1],a+1,e);return i+(s-i)*(o-a)}}function vpe(e,t,n){e=+e,t=+t,n=(o=arguments.length)<2?(t=e,e=0,1):o<3?1:+n;for(var r=-1,o=Math.max(0,Math.ceil((t-e)/n))|0,a=new Array(o);++r<o;)a[r]=e+r*n;return a}function Zn(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Ro(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const B_=Symbol("implicit");function $_(){var e=new XF,t=[],n=[],r=B_;function o(a){let i=e.get(a);if(i===void 0){if(r!==B_)return r;e.set(a,i=t.push(a)-1)}return n[i%n.length]}return o.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new XF;for(const i of a)e.has(i)||e.set(i,t.push(i)-1);return o},o.range=function(a){return arguments.length?(n=Array.from(a),o):n.slice()},o.unknown=function(a){return arguments.length?(r=a,o):r},o.copy=function(){return $_(t,n).unknown(r)},Zn.apply(o,arguments),o}function ou(){var e=$_().unknown(void 0),t=e.domain,n=e.range,r=0,o=1,a,i,s=!1,c=0,l=0,u=.5;delete e.unknown;function d(){var f=t().length,h=o<r,g=h?o:r,m=h?r:o;a=(m-g)/Math.max(1,f-c+l*2),s&&(a=Math.floor(a)),g+=(m-g-a*(f-c))*u,i=a*(1-c),s&&(g=Math.round(g),i=Math.round(i));var v=vpe(f).map(function(b){return g+a*b});return n(h?v.reverse():v)}return e.domain=function(f){return arguments.length?(t(f),d()):t()},e.range=function(f){return arguments.length?([r,o]=f,r=+r,o=+o,d()):[r,o]},e.rangeRound=function(f){return[r,o]=f,r=+r,o=+o,s=!0,d()},e.bandwidth=function(){return i},e.step=function(){return a},e.round=function(f){return arguments.length?(s=!!f,d()):s},e.padding=function(f){return arguments.length?(c=Math.min(1,l=+f),d()):c},e.paddingInner=function(f){return arguments.length?(c=Math.min(1,f),d()):c},e.paddingOuter=function(f){return arguments.length?(l=+f,d()):l},e.align=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),d()):u},e.copy=function(){return ou(t(),[r,o]).round(s).paddingInner(c).paddingOuter(l).align(u)},Zn.apply(d(),arguments)}function tB(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return tB(t())},e}function au(){return tB(ou.apply(null,arguments).paddingInner(1))}function bpe(e){return function(){return e}}function Zp(e){return+e}var nB=[0,1];function xn(e){return e}function z_(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:bpe(isNaN(t)?NaN:.5)}function xpe(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function wpe(e,t,n){var r=e[0],o=e[1],a=t[0],i=t[1];return o<r?(r=z_(o,r),a=n(i,a)):(r=z_(r,o),a=n(a,i)),function(s){return a(r(s))}}function _pe(e,t,n){var r=Math.min(e.length,t.length)-1,o=new Array(r),a=new Array(r),i=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++i<r;)o[i]=z_(e[i],e[i+1]),a[i]=n(t[i],t[i+1]);return function(s){var c=nu(e,s,1,r)-1;return a[c](o[c](s))}}function iu(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Gp(){var e=nB,t=nB,n=Zi,r,o,a,i=xn,s,c,l;function u(){var f=Math.min(e.length,t.length);return i!==xn&&(i=xpe(e[0],e[f-1])),s=f>2?_pe:wpe,c=l=null,d}function d(f){return f==null||isNaN(f=+f)?a:(c||(c=s(e.map(r),t,n)))(r(i(f)))}return d.invert=function(f){return i(o((l||(l=s(t,e.map(r),yr)))(f)))},d.domain=function(f){return arguments.length?(e=Array.from(f,Zp),u()):e.slice()},d.range=function(f){return arguments.length?(t=Array.from(f),u()):t.slice()},d.rangeRound=function(f){return t=Array.from(f),n=qb,u()},d.clamp=function(f){return arguments.length?(i=f?!0:xn,u()):i!==xn},d.interpolate=function(f){return arguments.length?(n=f,u()):n},d.unknown=function(f){return arguments.length?(a=f,d):a},function(f,h){return r=f,o=h,u()}}function V_(){return Gp()(xn,xn)}function jpe(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function eh(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Rs(e){return e=eh(Math.abs(e)),e?e[1]:NaN}function Epe(e,t){return function(n,r){for(var o=n.length,a=[],i=0,s=e[0],c=0;o>0&&s>0&&(c+s+1>r&&(s=Math.max(1,r-c)),a.push(n.substring(o-=s,o+s)),!((c+=s+1)>r));)s=e[i=(i+1)%e.length];return a.reverse().join(t)}}function Spe(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var Cpe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function su(e){if(!(t=Cpe.exec(e)))throw new Error("invalid format: "+e);var t;return new U_({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}su.prototype=U_.prototype;function U_(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}U_.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Ope(e){e:for(var t=e.length,n=1,r=-1,o;n<t;++n)switch(e[n]){case".":r=o=n;break;case"0":r===0&&(r=n),o=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(o+1):e}var rB;function Npe(e,t){var n=eh(e,t);if(!n)return e+"";var r=n[0],o=n[1],a=o-(rB=Math.max(-8,Math.min(8,Math.floor(o/3)))*3)+1,i=r.length;return a===i?r:a>i?r+new Array(a-i+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+eh(e,Math.max(0,t+a-1))[0]}function oB(e,t){var n=eh(e,t);if(!n)return e+"";var r=n[0],o=n[1];return o<0?"0."+new Array(-o).join("0")+r:r.length>o+1?r.slice(0,o+1)+"."+r.slice(o+1):r+new Array(o-r.length+2).join("0")}const aB={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:jpe,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>oB(e*100,t),r:oB,s:Npe,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function iB(e){return e}var sB=Array.prototype.map,cB=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function Mpe(e){var t=e.grouping===void 0||e.thousands===void 0?iB:Epe(sB.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",o=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?iB:Spe(sB.call(e.numerals,String)),i=e.percent===void 0?"%":e.percent+"",s=e.minus===void 0?"\u2212":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function l(d){d=su(d);var f=d.fill,h=d.align,g=d.sign,m=d.symbol,v=d.zero,b=d.width,x=d.comma,_=d.precision,w=d.trim,j=d.type;j==="n"?(x=!0,j="g"):aB[j]||(_===void 0&&(_=12),w=!0,j="g"),(v||f==="0"&&h==="=")&&(v=!0,f="0",h="=");var E=m==="$"?n:m==="#"&&/[boxX]/.test(j)?"0"+j.toLowerCase():"",S=m==="$"?r:/[%p]/.test(j)?i:"",C=aB[j],M=/[defgprs%]/.test(j);_=_===void 0?6:/[gprs]/.test(j)?Math.max(1,Math.min(21,_)):Math.max(0,Math.min(20,_));function N(P){var R=E,A=S,O,k,T;if(j==="c")A=C(P)+A,P="";else{P=+P;var D=P<0||1/P<0;if(P=isNaN(P)?c:C(Math.abs(P),_),w&&(P=Ope(P)),D&&+P==0&&g!=="+"&&(D=!1),R=(D?g==="("?g:s:g==="-"||g==="("?"":g)+R,A=(j==="s"?cB[8+rB/3]:"")+A+(D&&g==="("?")":""),M){for(O=-1,k=P.length;++O<k;)if(T=P.charCodeAt(O),48>T||T>57){A=(T===46?o+P.slice(O+1):P.slice(O))+A,P=P.slice(0,O);break}}}x&&!v&&(P=t(P,1/0));var I=R.length+P.length+A.length,L=I<b?new Array(b-I+1).join(f):"";switch(x&&v&&(P=t(L+P,L.length?b-A.length:1/0),L=""),h){case"<":P=R+P+A+L;break;case"=":P=R+L+P+A;break;case"^":P=L.slice(0,I=L.length>>1)+R+P+A+L.slice(I);break;default:P=L+R+P+A;break}return a(P)}return N.toString=function(){return d+""},N}function u(d,f){var h=l((d=su(d),d.type="f",d)),g=Math.max(-8,Math.min(8,Math.floor(Rs(f)/3)))*3,m=Math.pow(10,-g),v=cB[8+g/3];return function(b){return h(m*b)+v}}return{format:l,formatPrefix:u}}var th,H_,lB;kpe({thousands:",",grouping:[3],currency:["$",""]});function kpe(e){return th=Mpe(e),H_=th.format,lB=th.formatPrefix,th}function Ppe(e){return Math.max(0,-Rs(Math.abs(e)))}function Ape(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Rs(t)/3)))*3-Rs(Math.abs(e)))}function Tpe(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Rs(t)-Rs(e))+1}function uB(e,t,n,r){var o=F_(e,t,n),a;switch(r=su(r??",f"),r.type){case"s":{var i=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(a=Ape(o,i))&&(r.precision=a),lB(r,i)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=Tpe(o,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=Ppe(o))&&(r.precision=a-(r.type==="%")*2);break}}return H_(r)}function ma(e){var t=e.domain;return e.ticks=function(n){var r=t();return D_(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var o=t();return uB(o[0],o[o.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),o=0,a=r.length-1,i=r[o],s=r[a],c,l,u=10;for(s<i&&(l=i,i=s,s=l,l=o,o=a,a=l);u-- >0;){if(l=L_(i,s,n),l===c)return r[o]=i,r[a]=s,t(r);if(l>0)i=Math.floor(i/l)*l,s=Math.ceil(s/l)*l;else if(l<0)i=Math.ceil(i*l)/l,s=Math.floor(s*l)/l;else break;c=l}return e},e}function nh(){var e=V_();return e.copy=function(){return iu(e,nh())},Zn.apply(e,arguments),ma(e)}function dB(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,Zp),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return dB(e).unknown(t)},e=arguments.length?Array.from(e,Zp):[0,1],ma(n)}function fB(e,t){e=e.slice();var n=0,r=e.length-1,o=e[n],a=e[r],i;return a<o&&(i=n,n=r,r=i,i=o,o=a,a=i),e[n]=t.floor(o),e[r]=t.ceil(a),e}function pB(e){return Math.log(e)}function hB(e){return Math.exp(e)}function Rpe(e){return-Math.log(-e)}function Ipe(e){return-Math.exp(-e)}function Dpe(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Lpe(e){return e===10?Dpe:e===Math.E?Math.exp:t=>Math.pow(e,t)}function Fpe(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function mB(e){return(t,n)=>-e(-t,n)}function W_(e){const t=e(pB,hB),n=t.domain;let r=10,o,a;function i(){return o=Fpe(r),a=Lpe(r),n()[0]<0?(o=mB(o),a=mB(a),e(Rpe,Ipe)):e(pB,hB),t}return t.base=function(s){return arguments.length?(r=+s,i()):r},t.domain=function(s){return arguments.length?(n(s),i()):n()},t.ticks=s=>{const c=n();let l=c[0],u=c[c.length-1];const d=u<l;d&&([l,u]=[u,l]);let f=o(l),h=o(u),g,m;const v=s==null?10:+s;let b=[];if(!(r%1)&&h-f<v){if(f=Math.floor(f),h=Math.ceil(h),l>0){for(;f<=h;++f)for(g=1;g<r;++g)if(m=f<0?g/a(-f):g*a(f),!(m<l)){if(m>u)break;b.push(m)}}else for(;f<=h;++f)for(g=r-1;g>=1;--g)if(m=f>0?g/a(-f):g*a(f),!(m<l)){if(m>u)break;b.push(m)}b.length*2<v&&(b=D_(l,u,v))}else b=D_(f,h,Math.min(h-f,v)).map(a);return d?b.reverse():b},t.tickFormat=(s,c)=>{if(s==null&&(s=10),c==null&&(c=r===10?"s":","),typeof c!="function"&&(!(r%1)&&(c=su(c)).precision==null&&(c.trim=!0),c=H_(c)),s===1/0)return c;const l=Math.max(1,r*s/t.ticks().length);return u=>{let d=u/a(Math.round(o(u)));return d*r<r-.5&&(d*=r),d<=l?c(u):""}},t.nice=()=>n(fB(n(),{floor:s=>a(Math.floor(o(s))),ceil:s=>a(Math.ceil(o(s)))})),t}function yB(){const e=W_(Gp()).domain([1,10]);return e.copy=()=>iu(e,yB()).base(e.base()),Zn.apply(e,arguments),e}function gB(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function vB(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function q_(e){var t=1,n=e(gB(t),vB(t));return n.constant=function(r){return arguments.length?e(gB(t=+r),vB(t)):t},ma(n)}function bB(){var e=q_(Gp());return e.copy=function(){return iu(e,bB()).constant(e.constant())},Zn.apply(e,arguments)}function xB(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Bpe(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function $pe(e){return e<0?-e*e:e*e}function Y_(e){var t=e(xn,xn),n=1;function r(){return n===1?e(xn,xn):n===.5?e(Bpe,$pe):e(xB(n),xB(1/n))}return t.exponent=function(o){return arguments.length?(n=+o,r()):n},ma(t)}function K_(){var e=Y_(Gp());return e.copy=function(){return iu(e,K_()).exponent(e.exponent())},Zn.apply(e,arguments),e}function zpe(){return K_.apply(null,arguments).exponent(.5)}function wB(e){return Math.sign(e)*e*e}function Vpe(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function _B(){var e=V_(),t=[0,1],n=!1,r;function o(a){var i=Vpe(e(a));return isNaN(i)?r:n?Math.round(i):i}return o.invert=function(a){return e.invert(wB(a))},o.domain=function(a){return arguments.length?(e.domain(a),o):e.domain()},o.range=function(a){return arguments.length?(e.range((t=Array.from(a,Zp)).map(wB)),o):t.slice()},o.rangeRound=function(a){return o.range(a).round(!0)},o.round=function(a){return arguments.length?(n=!!a,o):n},o.clamp=function(a){return arguments.length?(e.clamp(a),o):e.clamp()},o.unknown=function(a){return arguments.length?(r=a,o):r},o.copy=function(){return _B(e.domain(),t).round(n).clamp(e.clamp()).unknown(r)},Zn.apply(o,arguments),ma(o)}function jB(){var e=[],t=[],n=[],r;function o(){var i=0,s=Math.max(1,t.length);for(n=new Array(s-1);++i<s;)n[i-1]=gpe(e,i/s);return a}function a(i){return i==null||isNaN(i=+i)?r:t[nu(n,i)]}return a.invertExtent=function(i){var s=t.indexOf(i);return s<0?[NaN,NaN]:[s>0?n[s-1]:e[0],s<n.length?n[s]:e[e.length-1]]},a.domain=function(i){if(!arguments.length)return e.slice();e=[];for(let s of i)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(ha),o()},a.range=function(i){return arguments.length?(t=Array.from(i),o()):t.slice()},a.unknown=function(i){return arguments.length?(r=i,a):r},a.quantiles=function(){return n.slice()},a.copy=function(){return jB().domain(e).range(t).unknown(r)},Zn.apply(a,arguments)}function EB(){var e=0,t=1,n=1,r=[.5],o=[0,1],a;function i(c){return c!=null&&c<=c?o[nu(r,c,0,n)]:a}function s(){var c=-1;for(r=new Array(n);++c<n;)r[c]=((c+1)*t-(c-n)*e)/(n+1);return i}return i.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,s()):[e,t]},i.range=function(c){return arguments.length?(n=(o=Array.from(c)).length-1,s()):o.slice()},i.invertExtent=function(c){var l=o.indexOf(c);return l<0?[NaN,NaN]:l<1?[e,r[0]]:l>=n?[r[n-1],t]:[r[l-1],r[l]]},i.unknown=function(c){return arguments.length&&(a=c),i},i.thresholds=function(){return r.slice()},i.copy=function(){return EB().domain([e,t]).range(o).unknown(a)},Zn.apply(ma(i),arguments)}function SB(){var e=[.5],t=[0,1],n,r=1;function o(a){return a!=null&&a<=a?t[nu(e,a,0,r)]:n}return o.domain=function(a){return arguments.length?(e=Array.from(a),r=Math.min(e.length,t.length-1),o):e.slice()},o.range=function(a){return arguments.length?(t=Array.from(a),r=Math.min(e.length,t.length-1),o):t.slice()},o.invertExtent=function(a){var i=t.indexOf(a);return[e[i-1],e[i]]},o.unknown=function(a){return arguments.length?(n=a,o):n},o.copy=function(){return SB().domain(e).range(t).unknown(n)},Zn.apply(o,arguments)}const X_=new Date,Q_=new Date;function Ut(e,t,n,r){function o(a){return e(a=arguments.length===0?new Date:new Date(+a)),a}return o.floor=a=>(e(a=new Date(+a)),a),o.ceil=a=>(e(a=new Date(a-1)),t(a,1),e(a),a),o.round=a=>{const i=o(a),s=o.ceil(a);return a-i<s-a?i:s},o.offset=(a,i)=>(t(a=new Date(+a),i==null?1:Math.floor(i)),a),o.range=(a,i,s)=>{const c=[];if(a=o.ceil(a),s=s==null?1:Math.floor(s),!(a<i)||!(s>0))return c;let l;do c.push(l=new Date(+a)),t(a,s),e(a);while(l<a&&a<i);return c},o.filter=a=>Ut(i=>{if(i>=i)for(;e(i),!a(i);)i.setTime(i-1)},(i,s)=>{if(i>=i)if(s<0)for(;++s<=0;)for(;t(i,-1),!a(i););else for(;--s>=0;)for(;t(i,1),!a(i););}),n&&(o.count=(a,i)=>(X_.setTime(+a),Q_.setTime(+i),e(X_),e(Q_),Math.floor(n(X_,Q_))),o.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?o.filter(r?i=>r(i)%a===0:i=>o.count(0,i)%a===0):o)),o}const rh=Ut(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);rh.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Ut(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):rh),rh.range;const Io=1e3,Gn=Io*60,Do=Gn*60,Lo=Do*24,J_=Lo*7,CB=Lo*30,Z_=Lo*365,ri=Ut(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Io)},(e,t)=>(t-e)/Io,e=>e.getUTCSeconds());ri.range;const G_=Ut(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Io)},(e,t)=>{e.setTime(+e+t*Gn)},(e,t)=>(t-e)/Gn,e=>e.getMinutes());G_.range;const ej=Ut(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Gn)},(e,t)=>(t-e)/Gn,e=>e.getUTCMinutes());ej.range;const tj=Ut(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Io-e.getMinutes()*Gn)},(e,t)=>{e.setTime(+e+t*Do)},(e,t)=>(t-e)/Do,e=>e.getHours());tj.range;const nj=Ut(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Do)},(e,t)=>(t-e)/Do,e=>e.getUTCHours());nj.range;const cu=Ut(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Gn)/Lo,e=>e.getDate()-1);cu.range;const oh=Ut(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Lo,e=>e.getUTCDate()-1);oh.range;const OB=Ut(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Lo,e=>Math.floor(e/Lo));OB.range;function oi(e){return Ut(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Gn)/J_)}const ah=oi(0),ih=oi(1),Upe=oi(2),Hpe=oi(3),Is=oi(4),Wpe=oi(5),qpe=oi(6);ah.range,ih.range,Upe.range,Hpe.range,Is.range,Wpe.range,qpe.range;function ai(e){return Ut(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/J_)}const sh=ai(0),ch=ai(1),Ype=ai(2),Kpe=ai(3),Ds=ai(4),Xpe=ai(5),Qpe=ai(6);sh.range,ch.range,Ype.range,Kpe.range,Ds.range,Xpe.range,Qpe.range;const rj=Ut(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());rj.range;const oj=Ut(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());oj.range;const Fo=Ut(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Fo.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Ut(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)}),Fo.range;const Bo=Ut(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Bo.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Ut(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)}),Bo.range;function NB(e,t,n,r,o,a){const i=[[ri,1,Io],[ri,5,5*Io],[ri,15,15*Io],[ri,30,30*Io],[a,1,Gn],[a,5,5*Gn],[a,15,15*Gn],[a,30,30*Gn],[o,1,Do],[o,3,3*Do],[o,6,6*Do],[o,12,12*Do],[r,1,Lo],[r,2,2*Lo],[n,1,J_],[t,1,CB],[t,3,3*CB],[e,1,Z_]];function s(l,u,d){const f=u<l;f&&([l,u]=[u,l]);const h=d&&typeof d.range=="function"?d:c(l,u,d),g=h?h.range(l,+u+1):[];return f?g.reverse():g}function c(l,u,d){const f=Math.abs(u-l)/d,h=I_(([,,v])=>v).right(i,f);if(h===i.length)return e.every(F_(l/Z_,u/Z_,d));if(h===0)return rh.every(Math.max(F_(l,u,d),1));const[g,m]=i[f/i[h-1][2]<i[h][2]/f?h-1:h];return g.every(m)}return[s,c]}const[Jpe,Zpe]=NB(Bo,oj,sh,OB,nj,ej),[Gpe,ehe]=NB(Fo,rj,ah,cu,tj,G_);function aj(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function ij(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function lu(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function the(e){var t=e.dateTime,n=e.date,r=e.time,o=e.periods,a=e.days,i=e.shortDays,s=e.months,c=e.shortMonths,l=uu(o),u=du(o),d=uu(a),f=du(a),h=uu(i),g=du(i),m=uu(s),v=du(s),b=uu(c),x=du(c),_={a:D,A:I,b:L,B,c:null,d:RB,e:RB,f:Ehe,g:Rhe,G:Dhe,H:whe,I:_he,j:jhe,L:IB,m:She,M:Che,p:V,q:F,Q:zB,s:VB,S:Ohe,u:Nhe,U:Mhe,V:khe,w:Phe,W:Ahe,x:null,X:null,y:The,Y:Ihe,Z:Lhe,"%":$B},w={a:H,A:Q,b:Y,B:re,c:null,d:LB,e:LB,f:zhe,g:Jhe,G:Ghe,H:Fhe,I:Bhe,j:$he,L:FB,m:Vhe,M:Uhe,p:G,q,Q:zB,s:VB,S:Hhe,u:Whe,U:qhe,V:Yhe,w:Khe,W:Xhe,x:null,X:null,y:Qhe,Y:Zhe,Z:eme,"%":$B},j={a:N,A:P,b:R,B:A,c:O,d:AB,e:AB,f:ghe,g:PB,G:kB,H:TB,I:TB,j:phe,L:yhe,m:fhe,M:hhe,p:M,q:dhe,Q:bhe,s:xhe,S:mhe,u:ihe,U:she,V:che,w:ahe,W:lhe,x:k,X:T,y:PB,Y:kB,Z:uhe,"%":vhe};_.x=E(n,_),_.X=E(r,_),_.c=E(t,_),w.x=E(n,w),w.X=E(r,w),w.c=E(t,w);function E(W,Z){return function(ee){var $=[],ie=-1,ue=0,me=W.length,Te,Ue,He;for(ee instanceof Date||(ee=new Date(+ee));++ie<me;)W.charCodeAt(ie)===37&&($.push(W.slice(ue,ie)),(Ue=MB[Te=W.charAt(++ie)])!=null?Te=W.charAt(++ie):Ue=Te==="e"?" ":"0",(He=Z[Te])&&(Te=He(ee,Ue)),$.push(Te),ue=ie+1);return $.push(W.slice(ue,ie)),$.join("")}}function S(W,Z){return function(ee){var $=lu(1900,void 0,1),ie=C($,W,ee+="",0),ue,me;if(ie!=ee.length)return null;if("Q"in $)return new Date($.Q);if("s"in $)return new Date($.s*1e3+("L"in $?$.L:0));if(Z&&!("Z"in $)&&($.Z=0),"p"in $&&($.H=$.H%12+$.p*12),$.m===void 0&&($.m="q"in $?$.q:0),"V"in $){if($.V<1||$.V>53)return null;"w"in $||($.w=1),"Z"in $?(ue=ij(lu($.y,0,1)),me=ue.getUTCDay(),ue=me>4||me===0?ch.ceil(ue):ch(ue),ue=oh.offset(ue,($.V-1)*7),$.y=ue.getUTCFullYear(),$.m=ue.getUTCMonth(),$.d=ue.getUTCDate()+($.w+6)%7):(ue=aj(lu($.y,0,1)),me=ue.getDay(),ue=me>4||me===0?ih.ceil(ue):ih(ue),ue=cu.offset(ue,($.V-1)*7),$.y=ue.getFullYear(),$.m=ue.getMonth(),$.d=ue.getDate()+($.w+6)%7)}else("W"in $||"U"in $)&&("w"in $||($.w="u"in $?$.u%7:"W"in $?1:0),me="Z"in $?ij(lu($.y,0,1)).getUTCDay():aj(lu($.y,0,1)).getDay(),$.m=0,$.d="W"in $?($.w+6)%7+$.W*7-(me+5)%7:$.w+$.U*7-(me+6)%7);return"Z"in $?($.H+=$.Z/100|0,$.M+=$.Z%100,ij($)):aj($)}}function C(W,Z,ee,$){for(var ie=0,ue=Z.length,me=ee.length,Te,Ue;ie<ue;){if($>=me)return-1;if(Te=Z.charCodeAt(ie++),Te===37){if(Te=Z.charAt(ie++),Ue=j[Te in MB?Z.charAt(ie++):Te],!Ue||($=Ue(W,ee,$))<0)return-1}else if(Te!=ee.charCodeAt($++))return-1}return $}function M(W,Z,ee){var $=l.exec(Z.slice(ee));return $?(W.p=u.get($[0].toLowerCase()),ee+$[0].length):-1}function N(W,Z,ee){var $=h.exec(Z.slice(ee));return $?(W.w=g.get($[0].toLowerCase()),ee+$[0].length):-1}function P(W,Z,ee){var $=d.exec(Z.slice(ee));return $?(W.w=f.get($[0].toLowerCase()),ee+$[0].length):-1}function R(W,Z,ee){var $=b.exec(Z.slice(ee));return $?(W.m=x.get($[0].toLowerCase()),ee+$[0].length):-1}function A(W,Z,ee){var $=m.exec(Z.slice(ee));return $?(W.m=v.get($[0].toLowerCase()),ee+$[0].length):-1}function O(W,Z,ee){return C(W,t,Z,ee)}function k(W,Z,ee){return C(W,n,Z,ee)}function T(W,Z,ee){return C(W,r,Z,ee)}function D(W){return i[W.getDay()]}function I(W){return a[W.getDay()]}function L(W){return c[W.getMonth()]}function B(W){return s[W.getMonth()]}function V(W){return o[+(W.getHours()>=12)]}function F(W){return 1+~~(W.getMonth()/3)}function H(W){return i[W.getUTCDay()]}function Q(W){return a[W.getUTCDay()]}function Y(W){return c[W.getUTCMonth()]}function re(W){return s[W.getUTCMonth()]}function G(W){return o[+(W.getUTCHours()>=12)]}function q(W){return 1+~~(W.getUTCMonth()/3)}return{format:function(W){var Z=E(W+="",_);return Z.toString=function(){return W},Z},parse:function(W){var Z=S(W+="",!1);return Z.toString=function(){return W},Z},utcFormat:function(W){var Z=E(W+="",w);return Z.toString=function(){return W},Z},utcParse:function(W){var Z=S(W+="",!0);return Z.toString=function(){return W},Z}}}var MB={"-":"",_:" ",0:"0"},Yt=/^\s*\d+/,nhe=/^%/,rhe=/[\\^$*+?|[\]().{}]/g;function tt(e,t,n){var r=e<0?"-":"",o=(r?-e:e)+"",a=o.length;return r+(a<n?new Array(n-a+1).join(t)+o:o)}function ohe(e){return e.replace(rhe,"\\$&")}function uu(e){return new RegExp("^(?:"+e.map(ohe).join("|")+")","i")}function du(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function ahe(e,t,n){var r=Yt.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function ihe(e,t,n){var r=Yt.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function she(e,t,n){var r=Yt.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function che(e,t,n){var r=Yt.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function lhe(e,t,n){var r=Yt.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function kB(e,t,n){var r=Yt.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function PB(e,t,n){var r=Yt.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function uhe(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function dhe(e,t,n){var r=Yt.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function fhe(e,t,n){var r=Yt.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function AB(e,t,n){var r=Yt.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function phe(e,t,n){var r=Yt.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function TB(e,t,n){var r=Yt.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function hhe(e,t,n){var r=Yt.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function mhe(e,t,n){var r=Yt.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function yhe(e,t,n){var r=Yt.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function ghe(e,t,n){var r=Yt.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function vhe(e,t,n){var r=nhe.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function bhe(e,t,n){var r=Yt.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function xhe(e,t,n){var r=Yt.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function RB(e,t){return tt(e.getDate(),t,2)}function whe(e,t){return tt(e.getHours(),t,2)}function _he(e,t){return tt(e.getHours()%12||12,t,2)}function jhe(e,t){return tt(1+cu.count(Fo(e),e),t,3)}function IB(e,t){return tt(e.getMilliseconds(),t,3)}function Ehe(e,t){return IB(e,t)+"000"}function She(e,t){return tt(e.getMonth()+1,t,2)}function Che(e,t){return tt(e.getMinutes(),t,2)}function Ohe(e,t){return tt(e.getSeconds(),t,2)}function Nhe(e){var t=e.getDay();return t===0?7:t}function Mhe(e,t){return tt(ah.count(Fo(e)-1,e),t,2)}function DB(e){var t=e.getDay();return t>=4||t===0?Is(e):Is.ceil(e)}function khe(e,t){return e=DB(e),tt(Is.count(Fo(e),e)+(Fo(e).getDay()===4),t,2)}function Phe(e){return e.getDay()}function Ahe(e,t){return tt(ih.count(Fo(e)-1,e),t,2)}function The(e,t){return tt(e.getFullYear()%100,t,2)}function Rhe(e,t){return e=DB(e),tt(e.getFullYear()%100,t,2)}function Ihe(e,t){return tt(e.getFullYear()%1e4,t,4)}function Dhe(e,t){var n=e.getDay();return e=n>=4||n===0?Is(e):Is.ceil(e),tt(e.getFullYear()%1e4,t,4)}function Lhe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+tt(t/60|0,"0",2)+tt(t%60,"0",2)}function LB(e,t){return tt(e.getUTCDate(),t,2)}function Fhe(e,t){return tt(e.getUTCHours(),t,2)}function Bhe(e,t){return tt(e.getUTCHours()%12||12,t,2)}function $he(e,t){return tt(1+oh.count(Bo(e),e),t,3)}function FB(e,t){return tt(e.getUTCMilliseconds(),t,3)}function zhe(e,t){return FB(e,t)+"000"}function Vhe(e,t){return tt(e.getUTCMonth()+1,t,2)}function Uhe(e,t){return tt(e.getUTCMinutes(),t,2)}function Hhe(e,t){return tt(e.getUTCSeconds(),t,2)}function Whe(e){var t=e.getUTCDay();return t===0?7:t}function qhe(e,t){return tt(sh.count(Bo(e)-1,e),t,2)}function BB(e){var t=e.getUTCDay();return t>=4||t===0?Ds(e):Ds.ceil(e)}function Yhe(e,t){return e=BB(e),tt(Ds.count(Bo(e),e)+(Bo(e).getUTCDay()===4),t,2)}function Khe(e){return e.getUTCDay()}function Xhe(e,t){return tt(ch.count(Bo(e)-1,e),t,2)}function Qhe(e,t){return tt(e.getUTCFullYear()%100,t,2)}function Jhe(e,t){return e=BB(e),tt(e.getUTCFullYear()%100,t,2)}function Zhe(e,t){return tt(e.getUTCFullYear()%1e4,t,4)}function Ghe(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Ds(e):Ds.ceil(e),tt(e.getUTCFullYear()%1e4,t,4)}function eme(){return"+0000"}function $B(){return"%"}function zB(e){return+e}function VB(e){return Math.floor(+e/1e3)}var Ls,UB,HB;tme({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function tme(e){return Ls=the(e),UB=Ls.format,Ls.parse,HB=Ls.utcFormat,Ls.utcParse,Ls}function nme(e){return new Date(e)}function rme(e){return e instanceof Date?+e:+new Date(+e)}function sj(e,t,n,r,o,a,i,s,c,l){var u=V_(),d=u.invert,f=u.domain,h=l(".%L"),g=l(":%S"),m=l("%I:%M"),v=l("%I %p"),b=l("%a %d"),x=l("%b %d"),_=l("%B"),w=l("%Y");function j(E){return(c(E)<E?h:s(E)<E?g:i(E)<E?m:a(E)<E?v:r(E)<E?o(E)<E?b:x:n(E)<E?_:w)(E)}return u.invert=function(E){return new Date(d(E))},u.domain=function(E){return arguments.length?f(Array.from(E,rme)):f().map(nme)},u.ticks=function(E){var S=f();return e(S[0],S[S.length-1],E??10)},u.tickFormat=function(E,S){return S==null?j:l(S)},u.nice=function(E){var S=f();return(!E||typeof E.range!="function")&&(E=t(S[0],S[S.length-1],E??10)),E?f(fB(S,E)):u},u.copy=function(){return iu(u,sj(e,t,n,r,o,a,i,s,c,l))},u}function ome(){return Zn.apply(sj(Gpe,ehe,Fo,rj,ah,cu,tj,G_,ri,UB).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function ame(){return Zn.apply(sj(Jpe,Zpe,Bo,oj,sh,oh,nj,ej,ri,HB).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function lh(){var e=0,t=1,n,r,o,a,i=xn,s=!1,c;function l(d){return d==null||isNaN(d=+d)?c:i(o===0?.5:(d=(a(d)-n)*o,s?Math.max(0,Math.min(1,d)):d))}l.domain=function(d){return arguments.length?([e,t]=d,n=a(e=+e),r=a(t=+t),o=n===r?0:1/(r-n),l):[e,t]},l.clamp=function(d){return arguments.length?(s=!!d,l):s},l.interpolator=function(d){return arguments.length?(i=d,l):i};function u(d){return function(f){var h,g;return arguments.length?([h,g]=f,i=d(h,g),l):[i(0),i(1)]}}return l.range=u(Zi),l.rangeRound=u(qb),l.unknown=function(d){return arguments.length?(c=d,l):c},function(d){return a=d,n=d(e),r=d(t),o=n===r?0:1/(r-n),l}}function ya(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function WB(){var e=ma(lh()(xn));return e.copy=function(){return ya(e,WB())},Ro.apply(e,arguments)}function qB(){var e=W_(lh()).domain([1,10]);return e.copy=function(){return ya(e,qB()).base(e.base())},Ro.apply(e,arguments)}function YB(){var e=q_(lh());return e.copy=function(){return ya(e,YB()).constant(e.constant())},Ro.apply(e,arguments)}function cj(){var e=Y_(lh());return e.copy=function(){return ya(e,cj()).exponent(e.exponent())},Ro.apply(e,arguments)}function ime(){return cj.apply(null,arguments).exponent(.5)}function KB(){var e=[],t=xn;function n(r){if(r!=null&&!isNaN(r=+r))return t((nu(e,r,1)-1)/(e.length-1))}return n.domain=function(r){if(!arguments.length)return e.slice();e=[];for(let o of r)o!=null&&!isNaN(o=+o)&&e.push(o);return e.sort(ha),n},n.interpolator=function(r){return arguments.length?(t=r,n):t},n.range=function(){return e.map((r,o)=>t(o/(e.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(o,a)=>ype(e,a/r))},n.copy=function(){return KB(t).domain(e)},Ro.apply(n,arguments)}function uh(){var e=0,t=.5,n=1,r=1,o,a,i,s,c,l=xn,u,d=!1,f;function h(m){return isNaN(m=+m)?f:(m=.5+((m=+u(m))-a)*(r*m<r*a?s:c),l(d?Math.max(0,Math.min(1,m)):m))}h.domain=function(m){return arguments.length?([e,t,n]=m,o=u(e=+e),a=u(t=+t),i=u(n=+n),s=o===a?0:.5/(a-o),c=a===i?0:.5/(i-a),r=a<o?-1:1,h):[e,t,n]},h.clamp=function(m){return arguments.length?(d=!!m,h):d},h.interpolator=function(m){return arguments.length?(l=m,h):l};function g(m){return function(v){var b,x,_;return arguments.length?([b,x,_]=v,l=TZ(m,[b,x,_]),h):[l(0),l(.5),l(1)]}}return h.range=g(Zi),h.rangeRound=g(qb),h.unknown=function(m){return arguments.length?(f=m,h):f},function(m){return u=m,o=m(e),a=m(t),i=m(n),s=o===a?0:.5/(a-o),c=a===i?0:.5/(i-a),r=a<o?-1:1,h}}function XB(){var e=ma(uh()(xn));return e.copy=function(){return ya(e,XB())},Ro.apply(e,arguments)}function QB(){var e=W_(uh()).domain([.1,1,10]);return e.copy=function(){return ya(e,QB()).base(e.base())},Ro.apply(e,arguments)}function JB(){var e=q_(uh());return e.copy=function(){return ya(e,JB()).constant(e.constant())},Ro.apply(e,arguments)}function lj(){var e=Y_(uh());return e.copy=function(){return ya(e,lj()).exponent(e.exponent())},Ro.apply(e,arguments)}function sme(){return lj.apply(null,arguments).exponent(.5)}const ZB=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:ou,scaleDiverging:XB,scaleDivergingLog:QB,scaleDivergingPow:lj,scaleDivergingSqrt:sme,scaleDivergingSymlog:JB,scaleIdentity:dB,scaleImplicit:B_,scaleLinear:nh,scaleLog:yB,scaleOrdinal:$_,scalePoint:au,scalePow:K_,scaleQuantile:jB,scaleQuantize:EB,scaleRadial:_B,scaleSequential:WB,scaleSequentialLog:qB,scaleSequentialPow:cj,scaleSequentialQuantile:KB,scaleSequentialSqrt:ime,scaleSequentialSymlog:YB,scaleSqrt:zpe,scaleSymlog:bB,scaleThreshold:SB,scaleTime:ome,scaleUtc:ame,tickFormat:uB},Symbol.toStringTag,{value:"Module"}));var uj,GB;function e8(){if(GB)return uj;GB=1;var e=Yi();function t(n,r,o){for(var a=-1,i=n.length;++a<i;){var s=n[a],c=r(s);if(c!=null&&(l===void 0?c===c&&!e(c):o(c,l)))var l=c,u=s}return u}return uj=t,uj}var dj,t8;function cme(){if(t8)return dj;t8=1;function e(t,n){return t>n}return dj=e,dj}var fj,n8;function lme(){if(n8)return fj;n8=1;var e=e8(),t=cme(),n=Ki();function r(o){return o&&o.length?e(o,n,t):void 0}return fj=r,fj}var ume=lme();const dh=Qe(ume);var pj,r8;function dme(){if(r8)return pj;r8=1;function e(t,n){return t<n}return pj=e,pj}var hj,o8;function fme(){if(o8)return hj;o8=1;var e=e8(),t=dme(),n=Ki();function r(o){return o&&o.length?e(o,n,t):void 0}return hj=r,hj}var pme=fme();const fh=Qe(pme);var mj,a8;fS=function(){if(a8)return mj;a8=1;var e=fc(),t=Fr(),n=tF(),r=pn();function o(a,i){var s=r(a)?e:n;return s(a,t(i,3))}return mj=o,mj};var yj,i8;function hme(){if(i8)return yj;i8=1;var e=hm(),t=fS();function n(r,o){return e(t(r,o),1)}return yj=n,yj}var mme=hme();const yme=Qe(mme);var gj,s8;function gme(){if(s8)return gj;s8=1;var e=q0();function t(n,r){return e(n,r)}return gj=t,gj}var vme=gme();const vj=Qe(vme);var Fs=1e9,bme={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},wj,St=!0,er="[DecimalError] ",ii=er+"Invalid argument: ",bj=er+"Exponent out of range: ",Bs=Math.floor,si=Math.pow,xme=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Vn,Kt=1e7,wt=7,c8=9007199254740991,ph=Bs(c8/wt),Ee={};Ee.absoluteValue=Ee.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e},Ee.comparedTo=Ee.cmp=function(e){var t,n,r,o,a=this;if(e=new a.constructor(e),a.s!==e.s)return a.s||-e.s;if(a.e!==e.e)return a.e>e.e^a.s<0?1:-1;for(r=a.d.length,o=e.d.length,t=0,n=r<o?r:o;t<n;++t)if(a.d[t]!==e.d[t])return a.d[t]>e.d[t]^a.s<0?1:-1;return r===o?0:r>o^a.s<0?1:-1},Ee.decimalPlaces=Ee.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*wt;if(t=e.d[t],t)for(;t%10==0;t/=10)n--;return n<0?0:n},Ee.dividedBy=Ee.div=function(e){return $o(this,new this.constructor(e))},Ee.dividedToIntegerBy=Ee.idiv=function(e){var t=this,n=t.constructor;return ht($o(t,new n(e),0,1),n.precision)},Ee.equals=Ee.eq=function(e){return!this.cmp(e)},Ee.exponent=function(){return Lt(this)},Ee.greaterThan=Ee.gt=function(e){return this.cmp(e)>0},Ee.greaterThanOrEqualTo=Ee.gte=function(e){return this.cmp(e)>=0},Ee.isInteger=Ee.isint=function(){return this.e>this.d.length-2},Ee.isNegative=Ee.isneg=function(){return this.s<0},Ee.isPositive=Ee.ispos=function(){return this.s>0},Ee.isZero=function(){return this.s===0},Ee.lessThan=Ee.lt=function(e){return this.cmp(e)<0},Ee.lessThanOrEqualTo=Ee.lte=function(e){return this.cmp(e)<1},Ee.logarithm=Ee.log=function(e){var t,n=this,r=n.constructor,o=r.precision,a=o+5;if(e===void 0)e=new r(10);else if(e=new r(e),e.s<1||e.eq(Vn))throw Error(er+"NaN");if(n.s<1)throw Error(er+(n.s?"NaN":"-Infinity"));return n.eq(Vn)?new r(0):(St=!1,t=$o(fu(n,a),fu(e,a),a),St=!0,ht(t,o))},Ee.minus=Ee.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?f8(t,e):l8(t,(e.s=-e.s,e))},Ee.modulo=Ee.mod=function(e){var t,n=this,r=n.constructor,o=r.precision;if(e=new r(e),!e.s)throw Error(er+"NaN");return n.s?(St=!1,t=$o(n,e,0,1).times(e),St=!0,n.minus(t)):ht(new r(n),o)},Ee.naturalExponential=Ee.exp=function(){return u8(this)},Ee.naturalLogarithm=Ee.ln=function(){return fu(this)},Ee.negated=Ee.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e},Ee.plus=Ee.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?l8(t,e):f8(t,(e.s=-e.s,e))},Ee.precision=Ee.sd=function(e){var t,n,r,o=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(ii+e);if(t=Lt(o)+1,r=o.d.length-1,n=r*wt+1,r=o.d[r],r){for(;r%10==0;r/=10)n--;for(r=o.d[0];r>=10;r/=10)n++}return e&&t>n?t:n},Ee.squareRoot=Ee.sqrt=function(){var e,t,n,r,o,a,i,s=this,c=s.constructor;if(s.s<1){if(!s.s)return new c(0);throw Error(er+"NaN")}for(e=Lt(s),St=!1,o=Math.sqrt(+s),o==0||o==1/0?(t=Kr(s.d),(t.length+e)%2==0&&(t+="0"),o=Math.sqrt(t),e=Bs((e+1)/2)-(e<0||e%2),o==1/0?t="5e"+e:(t=o.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),r=new c(t)):r=new c(o.toString()),n=c.precision,o=i=n+3;;)if(a=r,r=a.plus($o(s,a,i+2)).times(.5),Kr(a.d).slice(0,i)===(t=Kr(r.d)).slice(0,i)){if(t=t.slice(i-3,i+1),o==i&&t=="4999"){if(ht(a,n+1,0),a.times(a).eq(s)){r=a;break}}else if(t!="9999")break;i+=4}return St=!0,ht(r,n)},Ee.times=Ee.mul=function(e){var t,n,r,o,a,i,s,c,l,u=this,d=u.constructor,f=u.d,h=(e=new d(e)).d;if(!u.s||!e.s)return new d(0);for(e.s*=u.s,n=u.e+e.e,c=f.length,l=h.length,c<l&&(a=f,f=h,h=a,i=c,c=l,l=i),a=[],i=c+l,r=i;r--;)a.push(0);for(r=l;--r>=0;){for(t=0,o=c+r;o>r;)s=a[o]+h[r]*f[o-r-1]+t,a[o--]=s%Kt|0,t=s/Kt|0;a[o]=(a[o]+t)%Kt|0}for(;!a[--i];)a.pop();return t?++n:a.shift(),e.d=a,e.e=n,St?ht(e,d.precision):e},Ee.toDecimalPlaces=Ee.todp=function(e,t){var n=this,r=n.constructor;return n=new r(n),e===void 0?n:(Yr(e,0,Fs),t===void 0?t=r.rounding:Yr(t,0,8),ht(n,e+Lt(n)+1,t))},Ee.toExponential=function(e,t){var n,r=this,o=r.constructor;return e===void 0?n=ci(r,!0):(Yr(e,0,Fs),t===void 0?t=o.rounding:Yr(t,0,8),r=ht(new o(r),e+1,t),n=ci(r,!0,e+1)),n},Ee.toFixed=function(e,t){var n,r,o=this,a=o.constructor;return e===void 0?ci(o):(Yr(e,0,Fs),t===void 0?t=a.rounding:Yr(t,0,8),r=ht(new a(o),e+Lt(o)+1,t),n=ci(r.abs(),!1,e+Lt(r)+1),o.isneg()&&!o.isZero()?"-"+n:n)},Ee.toInteger=Ee.toint=function(){var e=this,t=e.constructor;return ht(new t(e),Lt(e)+1,t.rounding)},Ee.toNumber=function(){return+this},Ee.toPower=Ee.pow=function(e){var t,n,r,o,a,i,s=this,c=s.constructor,l=12,u=+(e=new c(e));if(!e.s)return new c(Vn);if(s=new c(s),!s.s){if(e.s<1)throw Error(er+"Infinity");return s}if(s.eq(Vn))return s;if(r=c.precision,e.eq(Vn))return ht(s,r);if(t=e.e,n=e.d.length-1,i=t>=n,a=s.s,i){if((n=u<0?-u:u)<=c8){for(o=new c(Vn),t=Math.ceil(r/wt+4),St=!1;n%2&&(o=o.times(s),p8(o.d,t)),n=Bs(n/2),n!==0;)s=s.times(s),p8(s.d,t);return St=!0,e.s<0?new c(Vn).div(o):ht(o,r)}}else if(a<0)throw Error(er+"NaN");return a=a<0&&e.d[Math.max(t,n)]&1?-1:1,s.s=1,St=!1,o=e.times(fu(s,r+l)),St=!0,o=u8(o),o.s=a,o},Ee.toPrecision=function(e,t){var n,r,o=this,a=o.constructor;return e===void 0?(n=Lt(o),r=ci(o,n<=a.toExpNeg||n>=a.toExpPos)):(Yr(e,1,Fs),t===void 0?t=a.rounding:Yr(t,0,8),o=ht(new a(o),e,t),n=Lt(o),r=ci(o,e<=n||n<=a.toExpNeg,e)),r},Ee.toSignificantDigits=Ee.tosd=function(e,t){var n=this,r=n.constructor;return e===void 0?(e=r.precision,t=r.rounding):(Yr(e,1,Fs),t===void 0?t=r.rounding:Yr(t,0,8)),ht(new r(n),e,t)},Ee.toString=Ee.valueOf=Ee.val=Ee.toJSON=Ee[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Lt(e),n=e.constructor;return ci(e,t<=n.toExpNeg||t>=n.toExpPos)};function l8(e,t){var n,r,o,a,i,s,c,l,u=e.constructor,d=u.precision;if(!e.s||!t.s)return t.s||(t=new u(e)),St?ht(t,d):t;if(c=e.d,l=t.d,i=e.e,o=t.e,c=c.slice(),a=i-o,a){for(a<0?(r=c,a=-a,s=l.length):(r=l,o=i,s=c.length),i=Math.ceil(d/wt),s=i>s?i+1:s+1,a>s&&(a=s,r.length=1),r.reverse();a--;)r.push(0);r.reverse()}for(s=c.length,a=l.length,s-a<0&&(a=s,r=l,l=c,c=r),n=0;a;)n=(c[--a]=c[a]+l[a]+n)/Kt|0,c[a]%=Kt;for(n&&(c.unshift(n),++o),s=c.length;c[--s]==0;)c.pop();return t.d=c,t.e=o,St?ht(t,d):t}function Yr(e,t,n){if(e!==~~e||e<t||e>n)throw Error(ii+e)}function Kr(e){var t,n,r,o=e.length-1,a="",i=e[0];if(o>0){for(a+=i,t=1;t<o;t++)r=e[t]+"",n=wt-r.length,n&&(a+=ga(n)),a+=r;i=e[t],r=i+"",n=wt-r.length,n&&(a+=ga(n))}else if(i===0)return"0";for(;i%10===0;)i/=10;return a+i}var $o=function(){function e(r,o){var a,i=0,s=r.length;for(r=r.slice();s--;)a=r[s]*o+i,r[s]=a%Kt|0,i=a/Kt|0;return i&&r.unshift(i),r}function t(r,o,a,i){var s,c;if(a!=i)c=a>i?1:-1;else for(s=c=0;s<a;s++)if(r[s]!=o[s]){c=r[s]>o[s]?1:-1;break}return c}function n(r,o,a){for(var i=0;a--;)r[a]-=i,i=r[a]<o[a]?1:0,r[a]=i*Kt+r[a]-o[a];for(;!r[0]&&r.length>1;)r.shift()}return function(r,o,a,i){var s,c,l,u,d,f,h,g,m,v,b,x,_,w,j,E,S,C,M=r.constructor,N=r.s==o.s?1:-1,P=r.d,R=o.d;if(!r.s)return new M(r);if(!o.s)throw Error(er+"Division by zero");for(c=r.e-o.e,S=R.length,j=P.length,h=new M(N),g=h.d=[],l=0;R[l]==(P[l]||0);)++l;if(R[l]>(P[l]||0)&&--c,a==null?x=a=M.precision:i?x=a+(Lt(r)-Lt(o))+1:x=a,x<0)return new M(0);if(x=x/wt+2|0,l=0,S==1)for(u=0,R=R[0],x++;(l<j||u)&&x--;l++)_=u*Kt+(P[l]||0),g[l]=_/R|0,u=_%R|0;else{for(u=Kt/(R[0]+1)|0,u>1&&(R=e(R,u),P=e(P,u),S=R.length,j=P.length),w=S,m=P.slice(0,S),v=m.length;v<S;)m[v++]=0;C=R.slice(),C.unshift(0),E=R[0],R[1]>=Kt/2&&++E;do u=0,s=t(R,m,S,v),s<0?(b=m[0],S!=v&&(b=b*Kt+(m[1]||0)),u=b/E|0,u>1?(u>=Kt&&(u=Kt-1),d=e(R,u),f=d.length,v=m.length,s=t(d,m,f,v),s==1&&(u--,n(d,S<f?C:R,f))):(u==0&&(s=u=1),d=R.slice()),f=d.length,f<v&&d.unshift(0),n(m,d,v),s==-1&&(v=m.length,s=t(R,m,S,v),s<1&&(u++,n(m,S<v?C:R,v))),v=m.length):s===0&&(u++,m=[0]),g[l++]=u,s&&m[0]?m[v++]=P[w]||0:(m=[P[w]],v=1);while((w++<j||m[0]!==void 0)&&x--)}return g[0]||g.shift(),h.e=c,ht(h,i?a+Lt(h)+1:a)}}();function u8(e,t){var n,r,o,a,i,s,c=0,l=0,u=e.constructor,d=u.precision;if(Lt(e)>16)throw Error(bj+Lt(e));if(!e.s)return new u(Vn);for(t==null?(St=!1,s=d):s=t,i=new u(.03125);e.abs().gte(.1);)e=e.times(i),l+=5;for(r=Math.log(si(2,l))/Math.LN10*2+5|0,s+=r,n=o=a=new u(Vn),u.precision=s;;){if(o=ht(o.times(e),s),n=n.times(++c),i=a.plus($o(o,n,s)),Kr(i.d).slice(0,s)===Kr(a.d).slice(0,s)){for(;l--;)a=ht(a.times(a),s);return u.precision=d,t==null?(St=!0,ht(a,d)):a}a=i}}function Lt(e){for(var t=e.e*wt,n=e.d[0];n>=10;n/=10)t++;return t}function xj(e,t,n){if(t>e.LN10.sd())throw St=!0,n&&(e.precision=n),Error(er+"LN10 precision limit exceeded");return ht(new e(e.LN10),t)}function ga(e){for(var t="";e--;)t+="0";return t}function fu(e,t){var n,r,o,a,i,s,c,l,u,d=1,f=10,h=e,g=h.d,m=h.constructor,v=m.precision;if(h.s<1)throw Error(er+(h.s?"NaN":"-Infinity"));if(h.eq(Vn))return new m(0);if(t==null?(St=!1,l=v):l=t,h.eq(10))return t==null&&(St=!0),xj(m,l);if(l+=f,m.precision=l,n=Kr(g),r=n.charAt(0),a=Lt(h),Math.abs(a)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)h=h.times(e),n=Kr(h.d),r=n.charAt(0),d++;a=Lt(h),r>1?(h=new m("0."+n),a++):h=new m(r+"."+n.slice(1))}else return c=xj(m,l+2,v).times(a+""),h=fu(new m(r+"."+n.slice(1)),l-f).plus(c),m.precision=v,t==null?(St=!0,ht(h,v)):h;for(s=i=h=$o(h.minus(Vn),h.plus(Vn),l),u=ht(h.times(h),l),o=3;;){if(i=ht(i.times(u),l),c=s.plus($o(i,new m(o),l)),Kr(c.d).slice(0,l)===Kr(s.d).slice(0,l))return s=s.times(2),a!==0&&(s=s.plus(xj(m,l+2,v).times(a+""))),s=$o(s,new m(d),l),m.precision=v,t==null?(St=!0,ht(s,v)):s;s=c,o+=2}}function d8(e,t){var n,r,o;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;t.charCodeAt(r)===48;)++r;for(o=t.length;t.charCodeAt(o-1)===48;)--o;if(t=t.slice(r,o),t){if(o-=r,n=n-r-1,e.e=Bs(n/wt),e.d=[],r=(n+1)%wt,n<0&&(r+=wt),r<o){for(r&&e.d.push(+t.slice(0,r)),o-=wt;r<o;)e.d.push(+t.slice(r,r+=wt));t=t.slice(r),r=wt-t.length}else r-=o;for(;r--;)t+="0";if(e.d.push(+t),St&&(e.e>ph||e.e<-ph))throw Error(bj+n)}else e.s=0,e.e=0,e.d=[0];return e}function ht(e,t,n){var r,o,a,i,s,c,l,u,d=e.d;for(i=1,a=d[0];a>=10;a/=10)i++;if(r=t-i,r<0)r+=wt,o=t,l=d[u=0];else{if(u=Math.ceil((r+1)/wt),a=d.length,u>=a)return e;for(l=a=d[u],i=1;a>=10;a/=10)i++;r%=wt,o=r-wt+i}if(n!==void 0&&(a=si(10,i-o-1),s=l/a%10|0,c=t<0||d[u+1]!==void 0||l%a,c=n<4?(s||c)&&(n==0||n==(e.s<0?3:2)):s>5||s==5&&(n==4||c||n==6&&(r>0?o>0?l/si(10,i-o):0:d[u-1])%10&1||n==(e.s<0?8:7))),t<1||!d[0])return c?(a=Lt(e),d.length=1,t=t-a-1,d[0]=si(10,(wt-t%wt)%wt),e.e=Bs(-t/wt)||0):(d.length=1,d[0]=e.e=e.s=0),e;if(r==0?(d.length=u,a=1,u--):(d.length=u+1,a=si(10,wt-r),d[u]=o>0?(l/si(10,i-o)%si(10,o)|0)*a:0),c)for(;;)if(u==0){(d[0]+=a)==Kt&&(d[0]=1,++e.e);break}else{if(d[u]+=a,d[u]!=Kt)break;d[u--]=0,a=1}for(r=d.length;d[--r]===0;)d.pop();if(St&&(e.e>ph||e.e<-ph))throw Error(bj+Lt(e));return e}function f8(e,t){var n,r,o,a,i,s,c,l,u,d,f=e.constructor,h=f.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new f(e),St?ht(t,h):t;if(c=e.d,d=t.d,r=t.e,l=e.e,c=c.slice(),i=l-r,i){for(u=i<0,u?(n=c,i=-i,s=d.length):(n=d,r=l,s=c.length),o=Math.max(Math.ceil(h/wt),s)+2,i>o&&(i=o,n.length=1),n.reverse(),o=i;o--;)n.push(0);n.reverse()}else{for(o=c.length,s=d.length,u=o<s,u&&(s=o),o=0;o<s;o++)if(c[o]!=d[o]){u=c[o]<d[o];break}i=0}for(u&&(n=c,c=d,d=n,t.s=-t.s),s=c.length,o=d.length-s;o>0;--o)c[s++]=0;for(o=d.length;o>i;){if(c[--o]<d[o]){for(a=o;a&&c[--a]===0;)c[a]=Kt-1;--c[a],c[o]+=Kt}c[o]-=d[o]}for(;c[--s]===0;)c.pop();for(;c[0]===0;c.shift())--r;return c[0]?(t.d=c,t.e=r,St?ht(t,h):t):new f(0)}function ci(e,t,n){var r,o=Lt(e),a=Kr(e.d),i=a.length;return t?(n&&(r=n-i)>0?a=a.charAt(0)+"."+a.slice(1)+ga(r):i>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(o<0?"e":"e+")+o):o<0?(a="0."+ga(-o-1)+a,n&&(r=n-i)>0&&(a+=ga(r))):o>=i?(a+=ga(o+1-i),n&&(r=n-o-1)>0&&(a=a+"."+ga(r))):((r=o+1)<i&&(a=a.slice(0,r)+"."+a.slice(r)),n&&(r=n-i)>0&&(o+1===i&&(a+="."),a+=ga(r))),e.s<0?"-"+a:a}function p8(e,t){if(e.length>t)return e.length=t,!0}function h8(e){var t,n,r;function o(a){var i=this;if(!(i instanceof o))return new o(a);if(i.constructor=o,a instanceof o){i.s=a.s,i.e=a.e,i.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(ii+a);if(a>0)i.s=1;else if(a<0)a=-a,i.s=-1;else{i.s=0,i.e=0,i.d=[0];return}if(a===~~a&&a<1e7){i.e=0,i.d=[a];return}return d8(i,a.toString())}else if(typeof a!="string")throw Error(ii+a);if(a.charCodeAt(0)===45?(a=a.slice(1),i.s=-1):i.s=1,xme.test(a))d8(i,a);else throw Error(ii+a)}if(o.prototype=Ee,o.ROUND_UP=0,o.ROUND_DOWN=1,o.ROUND_CEIL=2,o.ROUND_FLOOR=3,o.ROUND_HALF_UP=4,o.ROUND_HALF_DOWN=5,o.ROUND_HALF_EVEN=6,o.ROUND_HALF_CEIL=7,o.ROUND_HALF_FLOOR=8,o.clone=h8,o.config=o.set=wme,e===void 0&&(e={}),e)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<r.length;)e.hasOwnProperty(n=r[t++])||(e[n]=this[n]);return o.config(e),o}function wme(e){if(!e||typeof e!="object")throw Error(er+"Object expected");var t,n,r,o=["precision",1,Fs,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<o.length;t+=3)if((r=e[n=o[t]])!==void 0)if(Bs(r)===r&&r>=o[t+1]&&r<=o[t+2])this[n]=r;else throw Error(ii+n+": "+r);if((r=e[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(ii+n+": "+r);return this}var wj=h8(bme);Vn=new wj(1);const ft=wj;function _me(e){return Cme(e)||Sme(e)||Eme(e)||jme()}function jme(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Eme(e,t){if(e){if(typeof e=="string")return _j(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _j(e,t)}}function Sme(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function Cme(e){if(Array.isArray(e))return _j(e)}function _j(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ome=function(e){return e},m8={"@@functional/placeholder":!0},y8=function(e){return e===m8},g8=function(e){return function t(){return arguments.length===0||arguments.length===1&&y8(arguments.length<=0?void 0:arguments[0])?t:e.apply(void 0,arguments)}},Nme=function e(t,n){return t===1?n:g8(function(){for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];var i=o.filter(function(s){return s!==m8}).length;return i>=t?n.apply(void 0,o):e(t-i,g8(function(){for(var s=arguments.length,c=new Array(s),l=0;l<s;l++)c[l]=arguments[l];var u=o.map(function(d){return y8(d)?c.shift():d});return n.apply(void 0,_me(u).concat(c))}))})},hh=function(e){return Nme(e.length,e)},jj=function(e,t){for(var n=[],r=e;r<t;++r)n[r-e]=r;return n},Mme=hh(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(n){return t[n]}).map(e)}),kme=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!t.length)return Ome;var r=t.reverse(),o=r[0],a=r.slice(1);return function(){return a.reduce(function(i,s){return s(i)},o.apply(void 0,arguments))}},Ej=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},v8=function(e){var t=null,n=null;return function(){for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return t&&o.every(function(i,s){return i===t[s]})||(t=o,n=e.apply(void 0,o)),n}};function Pme(e){var t;return e===0?t=1:t=Math.floor(new ft(e).abs().log(10).toNumber())+1,t}function Ame(e,t,n){for(var r=new ft(e),o=0,a=[];r.lt(t)&&o<1e5;)a.push(r.toNumber()),r=r.add(n),o++;return a}var Tme=hh(function(e,t,n){var r=+e,o=+t;return r+n*(o-r)}),Rme=hh(function(e,t,n){var r=t-+e;return r=r||1/0,(n-e)/r}),Ime=hh(function(e,t,n){var r=t-+e;return r=r||1/0,Math.max(0,Math.min(1,(n-e)/r))});const mh={rangeStep:Ame,getDigitCount:Pme,interpolateNumber:Tme,uninterpolateNumber:Rme,uninterpolateTruncation:Ime};function Sj(e){return Fme(e)||Lme(e)||b8(e)||Dme()}function Dme(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Lme(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function Fme(e){if(Array.isArray(e))return Cj(e)}function pu(e,t){return zme(e)||$me(e,t)||b8(e,t)||Bme()}function Bme(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function b8(e,t){if(e){if(typeof e=="string")return Cj(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Cj(e,t)}}function Cj(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function $me(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var n=[],r=!0,o=!1,a=void 0;try{for(var i=e[Symbol.iterator](),s;!(r=(s=i.next()).done)&&(n.push(s.value),!(t&&n.length===t));r=!0);}catch(c){o=!0,a=c}finally{try{!r&&i.return!=null&&i.return()}finally{if(o)throw a}}return n}}function zme(e){if(Array.isArray(e))return e}function x8(e){var t=pu(e,2),n=t[0],r=t[1],o=n,a=r;return n>r&&(o=r,a=n),[o,a]}function w8(e,t,n){if(e.lte(0))return new ft(0);var r=mh.getDigitCount(e.toNumber()),o=new ft(10).pow(r),a=e.div(o),i=r!==1?.05:.1,s=new ft(Math.ceil(a.div(i).toNumber())).add(n).mul(i),c=s.mul(o);return t?c:new ft(Math.ceil(c))}function Vme(e,t,n){var r=1,o=new ft(e);if(!o.isint()&&n){var a=Math.abs(e);a<1?(r=new ft(10).pow(mh.getDigitCount(e)-1),o=new ft(Math.floor(o.div(r).toNumber())).mul(r)):a>1&&(o=new ft(Math.floor(e)))}else e===0?o=new ft(Math.floor((t-1)/2)):n||(o=new ft(Math.floor(e)));var i=Math.floor((t-1)/2),s=kme(Mme(function(c){return o.add(new ft(c-i).mul(r)).toNumber()}),jj);return s(0,t)}function _8(e,t,n,r){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(n-1)))return{step:new ft(0),tickMin:new ft(0),tickMax:new ft(0)};var a=w8(new ft(t).sub(e).div(n-1),r,o),i;e<=0&&t>=0?i=new ft(0):(i=new ft(e).add(t).div(2),i=i.sub(new ft(i).mod(a)));var s=Math.ceil(i.sub(e).div(a).toNumber()),c=Math.ceil(new ft(t).sub(i).div(a).toNumber()),l=s+c+1;return l>n?_8(e,t,n,r,o+1):(l<n&&(c=t>0?c+(n-l):c,s=t>0?s:s+(n-l)),{step:a,tickMin:i.sub(new ft(s).mul(a)),tickMax:i.add(new ft(c).mul(a))})}function Ume(e){var t=pu(e,2),n=t[0],r=t[1],o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=Math.max(o,2),s=x8([n,r]),c=pu(s,2),l=c[0],u=c[1];if(l===-1/0||u===1/0){var d=u===1/0?[l].concat(Sj(jj(0,o-1).map(function(){return 1/0}))):[].concat(Sj(jj(0,o-1).map(function(){return-1/0})),[u]);return n>r?Ej(d):d}if(l===u)return Vme(l,o,a);var f=_8(l,u,i,a),h=f.step,g=f.tickMin,m=f.tickMax,v=mh.rangeStep(g,m.add(new ft(.1).mul(h)),h);return n>r?Ej(v):v}function Hme(e,t){var n=pu(e,2),r=n[0],o=n[1],a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=x8([r,o]),s=pu(i,2),c=s[0],l=s[1];if(c===-1/0||l===1/0)return[r,o];if(c===l)return[c];var u=Math.max(t,2),d=w8(new ft(l).sub(c).div(u-1),a,0),f=[].concat(Sj(mh.rangeStep(new ft(c),new ft(l).sub(new ft(.99).mul(d)),d)),[l]);return r>o?Ej(f):f}var Wme=v8(Ume),qme=v8(Hme),Yme="Invariant failed";function li(e,t){throw new Error(Yme)}var Kme=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function $s(e){"@babel/helpers - typeof";return $s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$s(e)}function yh(){return yh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yh.apply(this,arguments)}function Xme(e,t){return Gme(e)||Zme(e,t)||Jme(e,t)||Qme()}function Qme(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Jme(e,t){if(e){if(typeof e=="string")return j8(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return j8(e,t)}}function j8(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Zme(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,o,a,i,s=[],c=!0,l=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(c=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(u){l=!0,o=u}finally{try{if(!c&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return s}}function Gme(e){if(Array.isArray(e))return e}function eye(e,t){if(e==null)return{};var n=tye(e,t),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function tye(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function nye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function rye(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,C8(r.key),r)}}function oye(e,t,n){return t&&rye(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function aye(e,t,n){return t=gh(t),iye(e,E8()?Reflect.construct(t,n||[],gh(e).constructor):t.apply(e,n))}function iye(e,t){if(t&&($s(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return sye(e)}function sye(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E8(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(E8=function(){return!!e})()}function gh(e){return gh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},gh(e)}function cye(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Oj(e,t)}function Oj(e,t){return Oj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Oj(e,t)}function S8(e,t,n){return t=C8(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function C8(e){var t=lye(e,"string");return $s(t)=="symbol"?t:t+""}function lye(e,t){if($s(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if($s(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var vh=function(e){function t(){return nye(this,t),aye(this,t,arguments)}return cye(t,e),oye(t,[{key:"render",value:function(){var n=this.props,r=n.offset,o=n.layout,a=n.width,i=n.dataKey,s=n.data,c=n.dataPointFormatter,l=n.xAxis,u=n.yAxis,d=eye(n,Kme),f=rt(d,!1);this.props.direction==="x"&&l.type!=="number"&&li();var h=s.map(function(g){var m=c(g,i),v=m.x,b=m.y,x=m.value,_=m.errorVal;if(!_)return null;var w=[],j,E;if(Array.isArray(_)){var S=Xme(_,2);j=S[0],E=S[1]}else j=E=_;if(o==="vertical"){var C=l.scale,M=b+r,N=M+a,P=M-a,R=C(x-j),A=C(x+E);w.push({x1:A,y1:N,x2:A,y2:P}),w.push({x1:R,y1:M,x2:A,y2:M}),w.push({x1:R,y1:N,x2:R,y2:P})}else if(o==="horizontal"){var O=u.scale,k=v+r,T=k-a,D=k+a,I=O(x-j),L=O(x+E);w.push({x1:T,y1:L,x2:D,y2:L}),w.push({x1:k,y1:I,x2:k,y2:L}),w.push({x1:T,y1:I,x2:D,y2:I})}return U.createElement(qt,yh({className:"recharts-errorBar",key:"bar-".concat(w.map(function(B){return"".concat(B.x1,"-").concat(B.x2,"-").concat(B.y1,"-").concat(B.y2)}))},f),w.map(function(B){return U.createElement("line",yh({},B,{key:"line-".concat(B.x1,"-").concat(B.x2,"-").concat(B.y1,"-").concat(B.y2)}))}))});return U.createElement(qt,{className:"recharts-errorBars"},h)}}])}(U.Component);S8(vh,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"}),S8(vh,"displayName","ErrorBar");function hu(e){"@babel/helpers - typeof";return hu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hu(e)}function O8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function ui(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?O8(Object(n),!0).forEach(function(r){uye(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O8(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function uye(e,t,n){return t=dye(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dye(e){var t=fye(e,"string");return hu(t)=="symbol"?t:t+""}function fye(e,t){if(hu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(hu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var N8=function(e){var t=e.children,n=e.formattedGraphicalItems,r=e.legendWidth,o=e.legendContent,a=zn(t,Ms);if(!a)return null;var i=Ms.defaultProps,s=i!==void 0?ui(ui({},i),a.props):{},c;return a.props&&a.props.payload?c=a.props&&a.props.payload:o==="children"?c=(n||[]).reduce(function(l,u){var d=u.item,f=u.props,h=f.sectors||f.data||[];return l.concat(h.map(function(g){return{type:a.props.iconType||d.props.legendType,value:g.name,color:g.fill,payload:g}}))},[]):c=(n||[]).map(function(l){var u=l.item,d=u.type.defaultProps,f=d!==void 0?ui(ui({},d),u.props):{},h=f.dataKey,g=f.name,m=f.legendType,v=f.hide;return{inactive:v,dataKey:h,type:s.iconType||m||"square",color:Mj(u),value:g||h,payload:f}}),ui(ui(ui({},s),Ms.getWithHeight(a,r)),{},{payload:c,item:a})};function mu(e){"@babel/helpers - typeof";return mu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mu(e)}function M8(e){return yye(e)||mye(e)||hye(e)||pye()}function pye(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hye(e,t){if(e){if(typeof e=="string")return Nj(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Nj(e,t)}}function mye(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function yye(e){if(Array.isArray(e))return Nj(e)}function Nj(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function k8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Pt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?k8(Object(n),!0).forEach(function(r){zs(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k8(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function zs(e,t,n){return t=gye(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gye(e){var t=vye(e,"string");return mu(t)=="symbol"?t:t+""}function vye(e,t){if(mu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(mu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Xr(e,t,n){return at(e)||at(t)?n:Vt(t)?Kn(e,t,n):Ke(t)?t(e):n}function bh(e,t,n,r){var o=yme(e,function(s){return Xr(s,t)});if(n==="number"){var a=o.filter(function(s){return he(s)||parseFloat(s)});return a.length?[fh(a),dh(a)]:[1/0,-1/0]}var i=r?o.filter(function(s){return!at(s)}):o;return i.map(function(s){return Vt(s)||s instanceof Date?s:""})}var bye=function(e){var t,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,a=-1,i=(t=n==null?void 0:n.length)!==null&&t!==void 0?t:0;if(i<=1)return 0;if(o&&o.axisType==="angleAxis"&&Math.abs(Math.abs(o.range[1]-o.range[0])-360)<=1e-6)for(var s=o.range,c=0;c<i;c++){var l=c>0?r[c-1].coordinate:r[i-1].coordinate,u=r[c].coordinate,d=c>=i-1?r[0].coordinate:r[c+1].coordinate,f=void 0;if(_r(u-l)!==_r(d-u)){var h=[];if(_r(d-u)===_r(s[1]-s[0])){f=d;var g=u+s[1]-s[0];h[0]=Math.min(g,(g+l)/2),h[1]=Math.max(g,(g+l)/2)}else{f=l;var m=d+s[1]-s[0];h[0]=Math.min(u,(m+u)/2),h[1]=Math.max(u,(m+u)/2)}var v=[Math.min(u,(f+u)/2),Math.max(u,(f+u)/2)];if(e>v[0]&&e<=v[1]||e>=h[0]&&e<=h[1]){a=r[c].index;break}}else{var b=Math.min(l,d),x=Math.max(l,d);if(e>(b+u)/2&&e<=(x+u)/2){a=r[c].index;break}}}else for(var _=0;_<i;_++)if(_===0&&e<=(n[_].coordinate+n[_+1].coordinate)/2||_>0&&_<i-1&&e>(n[_].coordinate+n[_-1].coordinate)/2&&e<=(n[_].coordinate+n[_+1].coordinate)/2||_===i-1&&e>(n[_].coordinate+n[_-1].coordinate)/2){a=n[_].index;break}return a},Mj=function(e){var t,n=e,r=n.type.displayName,o=(t=e.type)!==null&&t!==void 0&&t.defaultProps?Pt(Pt({},e.type.defaultProps),e.props):e.props,a=o.stroke,i=o.fill,s;switch(r){case"Line":s=a;break;case"Area":case"Radar":s=a&&a!=="none"?a:i;break;default:s=i;break}return s},xye=function(e){var t=e.barSize,n=e.totalSize,r=e.stackGroups,o=r===void 0?{}:r;if(!o)return{};for(var a={},i=Object.keys(o),s=0,c=i.length;s<c;s++)for(var l=o[i[s]].stackGroups,u=Object.keys(l),d=0,f=u.length;d<f;d++){var h=l[u[d]],g=h.items,m=h.cateAxisId,v=g.filter(function(E){return Po(E.type).indexOf("Bar")>=0});if(v&&v.length){var b=v[0].type.defaultProps,x=b!==void 0?Pt(Pt({},b),v[0].props):v[0].props,_=x.barSize,w=x[m];a[w]||(a[w]=[]);var j=at(_)?t:_;a[w].push({item:v[0],stackList:v.slice(1),barSize:at(j)?void 0:ti(j,n,0)})}}return a},wye=function(e){var t=e.barGap,n=e.barCategoryGap,r=e.bandSize,o=e.sizeList,a=o===void 0?[]:o,i=e.maxBarSize,s=a.length;if(s<1)return null;var c=ti(t,r,0,!0),l,u=[];if(a[0].barSize===+a[0].barSize){var d=!1,f=r/s,h=a.reduce(function(_,w){return _+w.barSize||0},0);h+=(s-1)*c,h>=r&&(h-=(s-1)*c,c=0),h>=r&&f>0&&(d=!0,f*=.9,h=s*f);var g=(r-h)/2>>0,m={offset:g-c,size:0};l=a.reduce(function(_,w){var j={item:w.item,position:{offset:m.offset+m.size+c,size:d?f:w.barSize}},E=[].concat(M8(_),[j]);return m=E[E.length-1].position,w.stackList&&w.stackList.length&&w.stackList.forEach(function(S){E.push({item:S,position:m})}),E},u)}else{var v=ti(n,r,0,!0);r-2*v-(s-1)*c<=0&&(c=0);var b=(r-2*v-(s-1)*c)/s;b>1&&(b>>=0);var x=i===+i?Math.min(b,i):b;l=a.reduce(function(_,w,j){var E=[].concat(M8(_),[{item:w.item,position:{offset:v+(b+c)*j+(b-x)/2,size:x}}]);return w.stackList&&w.stackList.length&&w.stackList.forEach(function(S){E.push({item:S,position:E[E.length-1].position})}),E},u)}return l},_ye=function(e,t,n,r){var o=n.children,a=n.width,i=n.margin,s=a-(i.left||0)-(i.right||0),c=N8({children:o,legendWidth:s});if(c){var l=r||{},u=l.width,d=l.height,f=c.align,h=c.verticalAlign,g=c.layout;if((g==="vertical"||g==="horizontal"&&h==="middle")&&f!=="center"&&he(e[f]))return Pt(Pt({},e),{},zs({},f,e[f]+(u||0)));if((g==="horizontal"||g==="vertical"&&f==="center")&&h!=="middle"&&he(e[h]))return Pt(Pt({},e),{},zs({},h,e[h]+(d||0)))}return e},jye=function(e,t,n){return at(t)?!0:e==="horizontal"?t==="yAxis":e==="vertical"||n==="x"?t==="xAxis":n==="y"?t==="yAxis":!0},P8=function(e,t,n,r,o){var a=t.props.children,i=jr(a,vh).filter(function(c){return jye(r,o,c.props.direction)});if(i&&i.length){var s=i.map(function(c){return c.props.dataKey});return e.reduce(function(c,l){var u=Xr(l,n);if(at(u))return c;var d=Array.isArray(u)?[fh(u),dh(u)]:[u,u],f=s.reduce(function(h,g){var m=Xr(l,g,0),v=d[0]-Math.abs(Array.isArray(m)?m[0]:m),b=d[1]+Math.abs(Array.isArray(m)?m[1]:m);return[Math.min(v,h[0]),Math.max(b,h[1])]},[1/0,-1/0]);return[Math.min(f[0],c[0]),Math.max(f[1],c[1])]},[1/0,-1/0])}return null},Eye=function(e,t,n,r,o){var a=t.map(function(i){return P8(e,i,n,o,r)}).filter(function(i){return!at(i)});return a&&a.length?a.reduce(function(i,s){return[Math.min(i[0],s[0]),Math.max(i[1],s[1])]},[1/0,-1/0]):null},A8=function(e,t,n,r,o){var a=t.map(function(s){var c=s.props.dataKey;return n==="number"&&c&&P8(e,s,c,r)||bh(e,c,n,o)});if(n==="number")return a.reduce(function(s,c){return[Math.min(s[0],c[0]),Math.max(s[1],c[1])]},[1/0,-1/0]);var i={};return a.reduce(function(s,c){for(var l=0,u=c.length;l<u;l++)i[c[l]]||(i[c[l]]=!0,s.push(c[l]));return s},[])},T8=function(e,t){return e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis"},R8=function(e,t,n,r){if(r)return e.map(function(s){return s.coordinate});var o,a,i=e.map(function(s){return s.coordinate===t&&(o=!0),s.coordinate===n&&(a=!0),s.coordinate});return o||i.push(t),a||i.push(n),i},zo=function(e,t,n){if(!e)return null;var r=e.scale,o=e.duplicateDomain,a=e.type,i=e.range,s=e.realScaleType==="scaleBand"?r.bandwidth()/2:2,c=(t||n)&&a==="category"&&r.bandwidth?r.bandwidth()/s:0;if(c=e.axisType==="angleAxis"&&(i==null?void 0:i.length)>=2?_r(i[0]-i[1])*2*c:c,t&&(e.ticks||e.niceTicks)){var l=(e.ticks||e.niceTicks).map(function(u){var d=o?o.indexOf(u):u;return{coordinate:r(d)+c,value:u,offset:c}});return l.filter(function(u){return!ql(u.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(u,d){return{coordinate:r(u)+c,value:u,index:d,offset:c}}):r.ticks&&!n?r.ticks(e.tickCount).map(function(u){return{coordinate:r(u)+c,value:u,offset:c}}):r.domain().map(function(u,d){return{coordinate:r(u)+c,value:o?o[u]:u,index:d,offset:c}})},kj=new WeakMap,xh=function(e,t){if(typeof t!="function")return e;kj.has(e)||kj.set(e,new WeakMap);var n=kj.get(e);if(n.has(t))return n.get(t);var r=function(){e.apply(void 0,arguments),t.apply(void 0,arguments)};return n.set(t,r),r},Sye=function(e,t,n){var r=e.scale,o=e.type,a=e.layout,i=e.axisType;if(r==="auto")return a==="radial"&&i==="radiusAxis"?{scale:ou(),realScaleType:"band"}:a==="radial"&&i==="angleAxis"?{scale:nh(),realScaleType:"linear"}:o==="category"&&t&&(t.indexOf("LineChart")>=0||t.indexOf("AreaChart")>=0||t.indexOf("ComposedChart")>=0&&!n)?{scale:au(),realScaleType:"point"}:o==="category"?{scale:ou(),realScaleType:"band"}:{scale:nh(),realScaleType:"linear"};if(Wl(r)){var s="scale".concat(Pp(r));return{scale:(ZB[s]||au)(),realScaleType:ZB[s]?s:"point"}}return Ke(r)?{scale:r}:{scale:au(),realScaleType:"point"}},I8=1e-4,Cye=function(e){var t=e.domain();if(!(!t||t.length<=2)){var n=t.length,r=e.range(),o=Math.min(r[0],r[1])-I8,a=Math.max(r[0],r[1])+I8,i=e(t[0]),s=e(t[n-1]);(i<o||i>a||s<o||s>a)&&e.domain([t[0],t[n-1]])}},Oye=function(e,t){if(!e)return null;for(var n=0,r=e.length;n<r;n++)if(e[n].item===t)return e[n].position;return null},Nye=function(e,t){if(!t||t.length!==2||!he(t[0])||!he(t[1]))return e;var n=Math.min(t[0],t[1]),r=Math.max(t[0],t[1]),o=[e[0],e[1]];return(!he(e[0])||e[0]<n)&&(o[0]=n),(!he(e[1])||e[1]>r)&&(o[1]=r),o[0]>r&&(o[0]=r),o[1]<n&&(o[1]=n),o},Mye=function(e){var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var o=0,a=0,i=0;i<t;++i){var s=ql(e[i][n][1])?e[i][n][0]:e[i][n][1];s>=0?(e[i][n][0]=o,e[i][n][1]=o+s,o=e[i][n][1]):(e[i][n][0]=a,e[i][n][1]=a+s,a=e[i][n][1])}},kye=function(e){var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var o=0,a=0;a<t;++a){var i=ql(e[a][n][1])?e[a][n][0]:e[a][n][1];i>=0?(e[a][n][0]=o,e[a][n][1]=o+i,o=e[a][n][1]):(e[a][n][0]=0,e[a][n][1]=0)}},Pye={sign:Mye,expand:Aue,none:Cs,silhouette:Tue,wiggle:Rue,positive:kye},Aye=function(e,t,n){var r=t.map(function(i){return i.props.dataKey}),o=Pye[n],a=Pue().keys(r).value(function(i,s){return+Xr(i,s,0)}).order(F1).offset(o);return a(e)},Tye=function(e,t,n,r,o,a){if(!e)return null;var i=a?t.reverse():t,s={},c=i.reduce(function(u,d){var f,h=(f=d.type)!==null&&f!==void 0&&f.defaultProps?Pt(Pt({},d.type.defaultProps),d.props):d.props,g=h.stackId,m=h.hide;if(m)return u;var v=h[n],b=u[v]||{hasStack:!1,stackGroups:{}};if(Vt(g)){var x=b.stackGroups[g]||{numericAxisId:n,cateAxisId:r,items:[]};x.items.push(d),b.hasStack=!0,b.stackGroups[g]=x}else b.stackGroups[Np("_stackId_")]={numericAxisId:n,cateAxisId:r,items:[d]};return Pt(Pt({},u),{},zs({},v,b))},s),l={};return Object.keys(c).reduce(function(u,d){var f=c[d];if(f.hasStack){var h={};f.stackGroups=Object.keys(f.stackGroups).reduce(function(g,m){var v=f.stackGroups[m];return Pt(Pt({},g),{},zs({},m,{numericAxisId:n,cateAxisId:r,items:v.items,stackedData:Aye(e,v.items,o)}))},h)}return Pt(Pt({},u),{},zs({},d,f))},l)},Rye=function(e,t){var n=t.realScaleType,r=t.type,o=t.tickCount,a=t.originalDomain,i=t.allowDecimals,s=n||t.scale;if(s!=="auto"&&s!=="linear")return null;if(o&&r==="number"&&a&&(a[0]==="auto"||a[1]==="auto")){var c=e.domain();if(!c.length)return null;var l=Wme(c,o,i);return e.domain([fh(l),dh(l)]),{niceTicks:l}}if(o&&r==="number"){var u=e.domain(),d=qme(u,o,i);return{niceTicks:d}}return null},D8=function(e){var t=e.axis,n=e.ticks,r=e.offset,o=e.bandSize,a=e.entry,i=e.index;if(t.type==="category")return n[i]?n[i].coordinate+r:null;var s=Xr(a,t.dataKey,t.domain[i]);return at(s)?null:t.scale(s)-o/2+r},Iye=function(e){var t=e.numericAxis,n=t.scale.domain();if(t.type==="number"){var r=Math.min(n[0],n[1]),o=Math.max(n[0],n[1]);return r<=0&&o>=0?0:o<0?o:r}return n[0]},Dye=function(e,t){var n,r=(n=e.type)!==null&&n!==void 0&&n.defaultProps?Pt(Pt({},e.type.defaultProps),e.props):e.props,o=r.stackId;if(Vt(o)){var a=t[o];if(a){var i=a.items.indexOf(e);return i>=0?a.stackedData[i]:null}}return null},Lye=function(e){return e.reduce(function(t,n){return[fh(n.concat([t[0]]).filter(he)),dh(n.concat([t[1]]).filter(he))]},[1/0,-1/0])},L8=function(e,t,n){return Object.keys(e).reduce(function(r,o){var a=e[o],i=a.stackedData,s=i.reduce(function(c,l){var u=Lye(l.slice(t,n+1));return[Math.min(c[0],u[0]),Math.max(c[1],u[1])]},[1/0,-1/0]);return[Math.min(s[0],r[0]),Math.max(s[1],r[1])]},[1/0,-1/0]).map(function(r){return r===1/0||r===-1/0?0:r})},F8=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,B8=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Pj=function(e,t,n){if(Ke(e))return e(t,n);if(!Array.isArray(e))return t;var r=[];if(he(e[0]))r[0]=n?e[0]:Math.min(e[0],t[0]);else if(F8.test(e[0])){var o=+F8.exec(e[0])[1];r[0]=t[0]-o}else Ke(e[0])?r[0]=e[0](t[0]):r[0]=t[0];if(he(e[1]))r[1]=n?e[1]:Math.max(e[1],t[1]);else if(B8.test(e[1])){var a=+B8.exec(e[1])[1];r[1]=t[1]+a}else Ke(e[1])?r[1]=e[1](t[1]):r[1]=t[1];return r},wh=function(e,t,n){if(e&&e.scale&&e.scale.bandwidth){var r=e.scale.bandwidth();if(!n||r>0)return r}if(e&&t&&t.length>=2){for(var o=__(t,function(u){return u.coordinate}),a=1/0,i=1,s=o.length;i<s;i++){var c=o[i],l=o[i-1];a=Math.min((c.coordinate||0)-(l.coordinate||0),a)}return a===1/0?0:a}return n?void 0:0},$8=function(e,t,n){return!e||!e.length||vj(e,Kn(n,"type.defaultProps.domain"))?t:e},z8=function(e,t){var n=e.type.defaultProps?Pt(Pt({},e.type.defaultProps),e.props):e.props,r=n.dataKey,o=n.name,a=n.unit,i=n.formatter,s=n.tooltipType,c=n.chartType,l=n.hide;return Pt(Pt({},rt(e,!1)),{},{dataKey:r,unit:a,formatter:i,name:o||r,color:Mj(e),value:Xr(t,r),type:s,payload:t,chartType:c,hide:l})};function yu(e){"@babel/helpers - typeof";return yu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yu(e)}function V8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function U8(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?V8(Object(n),!0).forEach(function(r){Fye(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V8(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Fye(e,t,n){return t=Bye(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Bye(e){var t=$ye(e,"string");return yu(t)=="symbol"?t:t+""}function $ye(e,t){if(yu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(yu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _h=Math.PI/180,zye=function(e){return e*180/Math.PI},en=function(e,t,n,r){return{x:e+Math.cos(-_h*r)*n,y:t+Math.sin(-_h*r)*n}},Vye=function(e,t){var n=e.x,r=e.y,o=t.x,a=t.y;return Math.sqrt(Math.pow(n-o,2)+Math.pow(r-a,2))},Uye=function(e,t){var n=e.x,r=e.y,o=t.cx,a=t.cy,i=Vye({x:n,y:r},{x:o,y:a});if(i<=0)return{radius:i};var s=(n-o)/i,c=Math.acos(s);return r>a&&(c=2*Math.PI-c),{radius:i,angle:zye(c),angleInRadian:c}},Hye=function(e){var t=e.startAngle,n=e.endAngle,r=Math.floor(t/360),o=Math.floor(n/360),a=Math.min(r,o);return{startAngle:t-a*360,endAngle:n-a*360}},Wye=function(e,t){var n=t.startAngle,r=t.endAngle,o=Math.floor(n/360),a=Math.floor(r/360),i=Math.min(o,a);return e+i*360},H8=function(e,t){var n=e.x,r=e.y,o=Uye({x:n,y:r},t),a=o.radius,i=o.angle,s=t.innerRadius,c=t.outerRadius;if(a<s||a>c)return!1;if(a===0)return!0;var l=Hye(t),u=l.startAngle,d=l.endAngle,f=i,h;if(u<=d){for(;f>d;)f-=360;for(;f<u;)f+=360;h=f>=u&&f<=d}else{for(;f>u;)f-=360;for(;f<d;)f+=360;h=f>=d&&f<=u}return h?U8(U8({},t),{},{radius:a,angle:Wye(f,t)}):null};function gu(e){"@babel/helpers - typeof";return gu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gu(e)}var qye=["offset"];function Yye(e){return Jye(e)||Qye(e)||Xye(e)||Kye()}function Kye(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xye(e,t){if(e){if(typeof e=="string")return Aj(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Aj(e,t)}}function Qye(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Jye(e){if(Array.isArray(e))return Aj(e)}function Aj(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Zye(e,t){if(e==null)return{};var n=Gye(e,t),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Gye(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function W8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Ht(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?W8(Object(n),!0).forEach(function(r){ege(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W8(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ege(e,t,n){return t=tge(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tge(e){var t=nge(e,"string");return gu(t)=="symbol"?t:t+""}function nge(e,t){if(gu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(gu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vu(){return vu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vu.apply(this,arguments)}var rge=function(e){var t=e.value,n=e.formatter,r=at(e.children)?t:e.children;return Ke(n)?n(r):r},oge=function(e,t){var n=_r(t-e),r=Math.min(Math.abs(t-e),360);return n*r},age=function(e,t,n){var r=e.position,o=e.viewBox,a=e.offset,i=e.className,s=o,c=s.cx,l=s.cy,u=s.innerRadius,d=s.outerRadius,f=s.startAngle,h=s.endAngle,g=s.clockWise,m=(u+d)/2,v=oge(f,h),b=v>=0?1:-1,x,_;r==="insideStart"?(x=f+b*a,_=g):r==="insideEnd"?(x=h-b*a,_=!g):r==="end"&&(x=h+b*a,_=g),_=v<=0?_:!_;var w=en(c,l,m,x),j=en(c,l,m,x+(_?1:-1)*359),E="M".concat(w.x,",").concat(w.y,`
    A`).concat(m,",").concat(m,",0,1,").concat(_?0:1,`,
    `).concat(j.x,",").concat(j.y),S=at(e.id)?Np("recharts-radial-line-"):e.id;return U.createElement("text",vu({},n,{dominantBaseline:"central",className:ut("recharts-radial-bar-label",i)}),U.createElement("defs",null,U.createElement("path",{id:S,d:E})),U.createElement("textPath",{xlinkHref:"#".concat(S)},t))},ige=function(e){var t=e.viewBox,n=e.offset,r=e.position,o=t,a=o.cx,i=o.cy,s=o.innerRadius,c=o.outerRadius,l=o.startAngle,u=o.endAngle,d=(l+u)/2;if(r==="outside"){var f=en(a,i,c+n,d),h=f.x,g=f.y;return{x:h,y:g,textAnchor:h>=a?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:a,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:a,y:i,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:a,y:i,textAnchor:"middle",verticalAnchor:"end"};var m=(s+c)/2,v=en(a,i,m,d),b=v.x,x=v.y;return{x:b,y:x,textAnchor:"middle",verticalAnchor:"middle"}},sge=function(e){var t=e.viewBox,n=e.parentViewBox,r=e.offset,o=e.position,a=t,i=a.x,s=a.y,c=a.width,l=a.height,u=l>=0?1:-1,d=u*r,f=u>0?"end":"start",h=u>0?"start":"end",g=c>=0?1:-1,m=g*r,v=g>0?"end":"start",b=g>0?"start":"end";if(o==="top"){var x={x:i+c/2,y:s-u*r,textAnchor:"middle",verticalAnchor:f};return Ht(Ht({},x),n?{height:Math.max(s-n.y,0),width:c}:{})}if(o==="bottom"){var _={x:i+c/2,y:s+l+d,textAnchor:"middle",verticalAnchor:h};return Ht(Ht({},_),n?{height:Math.max(n.y+n.height-(s+l),0),width:c}:{})}if(o==="left"){var w={x:i-m,y:s+l/2,textAnchor:v,verticalAnchor:"middle"};return Ht(Ht({},w),n?{width:Math.max(w.x-n.x,0),height:l}:{})}if(o==="right"){var j={x:i+c+m,y:s+l/2,textAnchor:b,verticalAnchor:"middle"};return Ht(Ht({},j),n?{width:Math.max(n.x+n.width-j.x,0),height:l}:{})}var E=n?{width:c,height:l}:{};return o==="insideLeft"?Ht({x:i+m,y:s+l/2,textAnchor:b,verticalAnchor:"middle"},E):o==="insideRight"?Ht({x:i+c-m,y:s+l/2,textAnchor:v,verticalAnchor:"middle"},E):o==="insideTop"?Ht({x:i+c/2,y:s+d,textAnchor:"middle",verticalAnchor:h},E):o==="insideBottom"?Ht({x:i+c/2,y:s+l-d,textAnchor:"middle",verticalAnchor:f},E):o==="insideTopLeft"?Ht({x:i+m,y:s+d,textAnchor:b,verticalAnchor:h},E):o==="insideTopRight"?Ht({x:i+c-m,y:s+d,textAnchor:v,verticalAnchor:h},E):o==="insideBottomLeft"?Ht({x:i+m,y:s+l-d,textAnchor:b,verticalAnchor:f},E):o==="insideBottomRight"?Ht({x:i+c-m,y:s+l-d,textAnchor:v,verticalAnchor:f},E):js(o)&&(he(o.x)||ei(o.x))&&(he(o.y)||ei(o.y))?Ht({x:i+ti(o.x,c),y:s+ti(o.y,l),textAnchor:"end",verticalAnchor:"end"},E):Ht({x:i+c/2,y:s+l/2,textAnchor:"middle",verticalAnchor:"middle"},E)},cge=function(e){return"cx"in e&&he(e.cx)};function sn(e){var t=e.offset,n=t===void 0?5:t,r=Zye(e,qye),o=Ht({offset:n},r),a=o.viewBox,i=o.position,s=o.value,c=o.children,l=o.content,u=o.className,d=u===void 0?"":u,f=o.textBreakAll;if(!a||at(s)&&at(c)&&!y.isValidElement(l)&&!Ke(l))return null;if(y.isValidElement(l))return y.cloneElement(l,o);var h;if(Ke(l)){if(h=y.createElement(l,o),y.isValidElement(h))return h}else h=rge(o);var g=cge(a),m=rt(o,!0);if(g&&(i==="insideStart"||i==="insideEnd"||i==="end"))return age(o,h,m);var v=g?ige(o):sge(o);return U.createElement(Qp,vu({className:ut("recharts-label",d)},m,v,{breakAll:f}),h)}sn.displayName="Label";var q8=function(e){var t=e.cx,n=e.cy,r=e.angle,o=e.startAngle,a=e.endAngle,i=e.r,s=e.radius,c=e.innerRadius,l=e.outerRadius,u=e.x,d=e.y,f=e.top,h=e.left,g=e.width,m=e.height,v=e.clockWise,b=e.labelViewBox;if(b)return b;if(he(g)&&he(m)){if(he(u)&&he(d))return{x:u,y:d,width:g,height:m};if(he(f)&&he(h))return{x:f,y:h,width:g,height:m}}return he(u)&&he(d)?{x:u,y:d,width:0,height:0}:he(t)&&he(n)?{cx:t,cy:n,startAngle:o||r||0,endAngle:a||r||0,innerRadius:c||0,outerRadius:l||s||i||0,clockWise:v}:e.viewBox?e.viewBox:{}},lge=function(e,t){return e?e===!0?U.createElement(sn,{key:"label-implicit",viewBox:t}):Vt(e)?U.createElement(sn,{key:"label-implicit",viewBox:t,value:e}):y.isValidElement(e)?e.type===sn?y.cloneElement(e,{key:"label-implicit",viewBox:t}):U.createElement(sn,{key:"label-implicit",content:e,viewBox:t}):Ke(e)?U.createElement(sn,{key:"label-implicit",content:e,viewBox:t}):js(e)?U.createElement(sn,vu({viewBox:t},e,{key:"label-implicit"})):null:null},uge=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var r=e.children,o=q8(e),a=jr(r,sn).map(function(s,c){return y.cloneElement(s,{viewBox:t||o,key:"label-".concat(c)})});if(!n)return a;var i=lge(e.label,t||o);return[i].concat(Yye(a))};sn.parseViewBox=q8,sn.renderCallByParent=uge;var Tj,Y8;tC=function(){if(Y8)return Tj;Y8=1;function e(t){var n=t==null?0:t.length;return n?t[n-1]:void 0}return Tj=e,Tj};var dge=tC();pS=Qe(dge);function bu(e){"@babel/helpers - typeof";return bu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bu(e)}var fge=["valueAccessor"],pge=["data","dataKey","clockWise","id","textBreakAll"];function hge(e){return vge(e)||gge(e)||yge(e)||mge()}function mge(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yge(e,t){if(e){if(typeof e=="string")return Rj(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Rj(e,t)}}function gge(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function vge(e){if(Array.isArray(e))return Rj(e)}function Rj(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function jh(){return jh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jh.apply(this,arguments)}function K8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function X8(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?K8(Object(n),!0).forEach(function(r){bge(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K8(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function bge(e,t,n){return t=xge(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xge(e){var t=wge(e,"string");return bu(t)=="symbol"?t:t+""}function wge(e,t){if(bu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(bu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Q8(e,t){if(e==null)return{};var n=_ge(e,t),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function _ge(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var jge=function(e){return Array.isArray(e.value)?pS(e.value):e.value};function di(e){var t=e.valueAccessor,n=t===void 0?jge:t,r=Q8(e,fge),o=r.data,a=r.dataKey,i=r.clockWise,s=r.id,c=r.textBreakAll,l=Q8(r,pge);return!o||!o.length?null:U.createElement(qt,{className:"recharts-label-list"},o.map(function(u,d){var f=at(a)?n(u,d):Xr(u&&u.payload,a),h=at(s)?{}:{id:"".concat(s,"-").concat(d)};return U.createElement(sn,jh({},rt(u,!0),l,h,{parentViewBox:u.parentViewBox,value:f,textBreakAll:c,viewBox:sn.parseViewBox(at(i)?u:X8(X8({},u),{},{clockWise:i})),key:"label-".concat(d),index:d}))}))}di.displayName="LabelList";function Ege(e,t){return e?e===!0?U.createElement(di,{key:"labelList-implicit",data:t}):U.isValidElement(e)||Ke(e)?U.createElement(di,{key:"labelList-implicit",data:t,content:e}):js(e)?U.createElement(di,jh({data:t},e,{key:"labelList-implicit"})):null:null}function Sge(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var r=e.children,o=jr(r,di).map(function(i,s){return y.cloneElement(i,{data:t,key:"labelList-".concat(s)})});if(!n)return o;var a=Ege(e.label,t);return[a].concat(hge(o))}di.renderCallByParent=Sge;function xu(e){"@babel/helpers - typeof";return xu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xu(e)}function Ij(){return Ij=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ij.apply(this,arguments)}function J8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Z8(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?J8(Object(n),!0).forEach(function(r){Cge(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J8(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Cge(e,t,n){return t=Oge(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Oge(e){var t=Nge(e,"string");return xu(t)=="symbol"?t:t+""}function Nge(e,t){if(xu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(xu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Mge=function(e,t){var n=_r(t-e),r=Math.min(Math.abs(t-e),359.999);return n*r},Eh=function(e){var t=e.cx,n=e.cy,r=e.radius,o=e.angle,a=e.sign,i=e.isExternal,s=e.cornerRadius,c=e.cornerIsExternal,l=s*(i?1:-1)+r,u=Math.asin(s/l)/_h,d=c?o:o+a*u,f=en(t,n,l,d),h=en(t,n,r,d),g=c?o-a*u:o,m=en(t,n,l*Math.cos(u*_h),g);return{center:f,circleTangency:h,lineTangency:m,theta:u}},G8=function(e){var t=e.cx,n=e.cy,r=e.innerRadius,o=e.outerRadius,a=e.startAngle,i=e.endAngle,s=Mge(a,i),c=a+s,l=en(t,n,o,a),u=en(t,n,o,c),d="M ".concat(l.x,",").concat(l.y,`
    A `).concat(o,",").concat(o,`,0,
    `).concat(+(Math.abs(s)>180),",").concat(+(a>c),`,
    `).concat(u.x,",").concat(u.y,`
  `);if(r>0){var f=en(t,n,r,a),h=en(t,n,r,c);d+="L ".concat(h.x,",").concat(h.y,`
            A `).concat(r,",").concat(r,`,0,
            `).concat(+(Math.abs(s)>180),",").concat(+(a<=c),`,
            `).concat(f.x,",").concat(f.y," Z")}else d+="L ".concat(t,",").concat(n," Z");return d},kge=function(e){var t=e.cx,n=e.cy,r=e.innerRadius,o=e.outerRadius,a=e.cornerRadius,i=e.forceCornerRadius,s=e.cornerIsExternal,c=e.startAngle,l=e.endAngle,u=_r(l-c),d=Eh({cx:t,cy:n,radius:o,angle:c,sign:u,cornerRadius:a,cornerIsExternal:s}),f=d.circleTangency,h=d.lineTangency,g=d.theta,m=Eh({cx:t,cy:n,radius:o,angle:l,sign:-u,cornerRadius:a,cornerIsExternal:s}),v=m.circleTangency,b=m.lineTangency,x=m.theta,_=s?Math.abs(c-l):Math.abs(c-l)-g-x;if(_<0)return i?"M ".concat(h.x,",").concat(h.y,`
        a`).concat(a,",").concat(a,",0,0,1,").concat(a*2,`,0
        a`).concat(a,",").concat(a,",0,0,1,").concat(-a*2,`,0
      `):G8({cx:t,cy:n,innerRadius:r,outerRadius:o,startAngle:c,endAngle:l});var w="M ".concat(h.x,",").concat(h.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(u<0),",").concat(f.x,",").concat(f.y,`
    A`).concat(o,",").concat(o,",0,").concat(+(_>180),",").concat(+(u<0),",").concat(v.x,",").concat(v.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(u<0),",").concat(b.x,",").concat(b.y,`
  `);if(r>0){var j=Eh({cx:t,cy:n,radius:r,angle:c,sign:u,isExternal:!0,cornerRadius:a,cornerIsExternal:s}),E=j.circleTangency,S=j.lineTangency,C=j.theta,M=Eh({cx:t,cy:n,radius:r,angle:l,sign:-u,isExternal:!0,cornerRadius:a,cornerIsExternal:s}),N=M.circleTangency,P=M.lineTangency,R=M.theta,A=s?Math.abs(c-l):Math.abs(c-l)-C-R;if(A<0&&a===0)return"".concat(w,"L").concat(t,",").concat(n,"Z");w+="L".concat(P.x,",").concat(P.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(u<0),",").concat(N.x,",").concat(N.y,`
      A`).concat(r,",").concat(r,",0,").concat(+(A>180),",").concat(+(u>0),",").concat(E.x,",").concat(E.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(u<0),",").concat(S.x,",").concat(S.y,"Z")}else w+="L".concat(t,",").concat(n,"Z");return w},Pge={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},e$=function(e){var t=Z8(Z8({},Pge),e),n=t.cx,r=t.cy,o=t.innerRadius,a=t.outerRadius,i=t.cornerRadius,s=t.forceCornerRadius,c=t.cornerIsExternal,l=t.startAngle,u=t.endAngle,d=t.className;if(a<o||l===u)return null;var f=ut("recharts-sector",d),h=a-o,g=ti(i,h,0,!0),m;return g>0&&Math.abs(l-u)<360?m=kge({cx:n,cy:r,innerRadius:o,outerRadius:a,cornerRadius:Math.min(g,h/2),forceCornerRadius:s,cornerIsExternal:c,startAngle:l,endAngle:u}):m=G8({cx:n,cy:r,innerRadius:o,outerRadius:a,startAngle:l,endAngle:u}),U.createElement("path",Ij({},rt(t,!0),{className:f,d:m,role:"img"}))};function wu(e){"@babel/helpers - typeof";return wu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wu(e)}function Dj(){return Dj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Dj.apply(this,arguments)}function t$(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function n$(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?t$(Object(n),!0).forEach(function(r){Age(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):t$(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Age(e,t,n){return t=Tge(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Tge(e){var t=Rge(e,"string");return wu(t)=="symbol"?t:t+""}function Rge(e,t){if(wu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(wu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var r$={curveBasisClosed:xue,curveBasisOpen:wue,curveBasis:bue,curveBumpX:aue,curveBumpY:iue,curveLinearClosed:_ue,curveLinear:Ip,curveMonotoneX:jue,curveMonotoneY:Eue,curveNatural:Sue,curveStep:Cue,curveStepAfter:Nue,curveStepBefore:Oue},Sh=function(e){return e.x===+e.x&&e.y===+e.y},_u=function(e){return e.x},ju=function(e){return e.y},Ige=function(e,t){if(Ke(e))return e;var n="curve".concat(Pp(e));return(n==="curveMonotone"||n==="curveBump")&&t?r$["".concat(n).concat(t==="vertical"?"Y":"X")]:r$[n]||Ip},Dge=function(e){var t=e.type,n=t===void 0?"linear":t,r=e.points,o=r===void 0?[]:r,a=e.baseLine,i=e.layout,s=e.connectNulls,c=s===void 0?!1:s,l=Ige(n,i),u=c?o.filter(function(g){return Sh(g)}):o,d;if(Array.isArray(a)){var f=c?a.filter(function(g){return Sh(g)}):a,h=u.map(function(g,m){return n$(n$({},g),{},{base:f[m]})});return i==="vertical"?d=Dp().y(ju).x1(_u).x0(function(g){return g.base.x}):d=Dp().x(_u).y1(ju).y0(function(g){return g.base.y}),d.defined(Sh).curve(l),d(h)}return i==="vertical"&&he(a)?d=Dp().y(ju).x1(_u).x0(a):he(a)?d=Dp().x(_u).y1(ju).y0(a):d=s6().x(_u).y(ju),d.defined(Sh).curve(l),d(u)},o$=function(e){var t=e.className,n=e.points,r=e.path,o=e.pathRef;if((!n||!n.length)&&!r)return null;var a=n&&n.length?Dge(e):r;return U.createElement("path",Dj({},rt(e,!1),Mp(e),{className:ut("recharts-curve",t),d:a,ref:o}))},a$={exports:{}},Lj,i$;function Lge(){if(i$)return Lj;i$=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Lj=e,Lj}var Fj,s$;function Fge(){if(s$)return Fj;s$=1;var e=Lge();function t(){}function n(){}return n.resetWarningCache=t,Fj=function(){function r(i,s,c,l,u,d){if(d!==e){var f=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw f.name="Invariant Violation",f}}r.isRequired=r;function o(){return r}var a={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:o,element:r,elementType:r,instanceOf:o,node:r,objectOf:o,oneOf:o,oneOfType:o,shape:o,exact:o,checkPropTypes:n,resetWarningCache:t};return a.PropTypes=a,a},Fj}var c$;function Bge(){return c$||(c$=1,a$.exports=Fge()()),a$.exports}var $ge=Bge();const Be=Qe($ge);var zge=Object.getOwnPropertyNames,Vge=Object.getOwnPropertySymbols,Uge=Object.prototype.hasOwnProperty;function l$(e,t){return function(n,r,o){return e(n,r,o)&&t(n,r,o)}}function Ch(e){return function(t,n,r){if(!t||!n||typeof t!="object"||typeof n!="object")return e(t,n,r);var o=r.cache,a=o.get(t),i=o.get(n);if(a&&i)return a===n&&i===t;o.set(t,n),o.set(n,t);var s=e(t,n,r);return o.delete(t),o.delete(n),s}}function u$(e){return zge(e).concat(Vge(e))}var d$=Object.hasOwn||function(e,t){return Uge.call(e,t)};function Vs(e,t){return e||t?e===t:e===t||e!==e&&t!==t}var f$="_owner",p$=Object.getOwnPropertyDescriptor,h$=Object.keys;function Hge(e,t,n){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(!n.equals(e[r],t[r],r,r,e,t,n))return!1;return!0}function Wge(e,t){return Vs(e.getTime(),t.getTime())}function m$(e,t,n){if(e.size!==t.size)return!1;for(var r={},o=e.entries(),a=0,i,s;(i=o.next())&&!i.done;){for(var c=t.entries(),l=!1,u=0;(s=c.next())&&!s.done;){var d=i.value,f=d[0],h=d[1],g=s.value,m=g[0],v=g[1];!l&&!r[u]&&(l=n.equals(f,m,a,u,e,t,n)&&n.equals(h,v,f,m,e,t,n))&&(r[u]=!0),u++}if(!l)return!1;a++}return!0}function qge(e,t,n){var r=h$(e),o=r.length;if(h$(t).length!==o)return!1;for(var a;o-- >0;)if(a=r[o],a===f$&&(e.$$typeof||t.$$typeof)&&e.$$typeof!==t.$$typeof||!d$(t,a)||!n.equals(e[a],t[a],a,a,e,t,n))return!1;return!0}function Eu(e,t,n){var r=u$(e),o=r.length;if(u$(t).length!==o)return!1;for(var a,i,s;o-- >0;)if(a=r[o],a===f$&&(e.$$typeof||t.$$typeof)&&e.$$typeof!==t.$$typeof||!d$(t,a)||!n.equals(e[a],t[a],a,a,e,t,n)||(i=p$(e,a),s=p$(t,a),(i||s)&&(!i||!s||i.configurable!==s.configurable||i.enumerable!==s.enumerable||i.writable!==s.writable)))return!1;return!0}function Yge(e,t){return Vs(e.valueOf(),t.valueOf())}function Kge(e,t){return e.source===t.source&&e.flags===t.flags}function y$(e,t,n){if(e.size!==t.size)return!1;for(var r={},o=e.values(),a,i;(a=o.next())&&!a.done;){for(var s=t.values(),c=!1,l=0;(i=s.next())&&!i.done;)!c&&!r[l]&&(c=n.equals(a.value,i.value,a.value,i.value,e,t,n))&&(r[l]=!0),l++;if(!c)return!1}return!0}function Xge(e,t){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(e[n]!==t[n])return!1;return!0}var Qge="[object Arguments]",Jge="[object Boolean]",Zge="[object Date]",Gge="[object Map]",eve="[object Number]",tve="[object Object]",nve="[object RegExp]",rve="[object Set]",ove="[object String]",ave=Array.isArray,g$=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,v$=Object.assign,ive=Object.prototype.toString.call.bind(Object.prototype.toString);function sve(e){var t=e.areArraysEqual,n=e.areDatesEqual,r=e.areMapsEqual,o=e.areObjectsEqual,a=e.arePrimitiveWrappersEqual,i=e.areRegExpsEqual,s=e.areSetsEqual,c=e.areTypedArraysEqual;return function(l,u,d){if(l===u)return!0;if(l==null||u==null||typeof l!="object"||typeof u!="object")return l!==l&&u!==u;var f=l.constructor;if(f!==u.constructor)return!1;if(f===Object)return o(l,u,d);if(ave(l))return t(l,u,d);if(g$!=null&&g$(l))return c(l,u,d);if(f===Date)return n(l,u,d);if(f===RegExp)return i(l,u,d);if(f===Map)return r(l,u,d);if(f===Set)return s(l,u,d);var h=ive(l);return h===Zge?n(l,u,d):h===nve?i(l,u,d):h===Gge?r(l,u,d):h===rve?s(l,u,d):h===tve?typeof l.then!="function"&&typeof u.then!="function"&&o(l,u,d):h===Qge?o(l,u,d):h===Jge||h===eve||h===ove?a(l,u,d):!1}}function cve(e){var t=e.circular,n=e.createCustomConfig,r=e.strict,o={areArraysEqual:r?Eu:Hge,areDatesEqual:Wge,areMapsEqual:r?l$(m$,Eu):m$,areObjectsEqual:r?Eu:qge,arePrimitiveWrappersEqual:Yge,areRegExpsEqual:Kge,areSetsEqual:r?l$(y$,Eu):y$,areTypedArraysEqual:r?Eu:Xge};if(n&&(o=v$({},o,n(o))),t){var a=Ch(o.areArraysEqual),i=Ch(o.areMapsEqual),s=Ch(o.areObjectsEqual),c=Ch(o.areSetsEqual);o=v$({},o,{areArraysEqual:a,areMapsEqual:i,areObjectsEqual:s,areSetsEqual:c})}return o}function lve(e){return function(t,n,r,o,a,i,s){return e(t,n,s)}}function uve(e){var t=e.circular,n=e.comparator,r=e.createState,o=e.equals,a=e.strict;if(r)return function(s,c){var l=r(),u=l.cache,d=u===void 0?t?new WeakMap:void 0:u,f=l.meta;return n(s,c,{cache:d,equals:o,meta:f,strict:a})};if(t)return function(s,c){return n(s,c,{cache:new WeakMap,equals:o,meta:void 0,strict:a})};var i={cache:void 0,equals:o,meta:void 0,strict:a};return function(s,c){return n(s,c,i)}}var dve=va();va({strict:!0}),va({circular:!0}),va({circular:!0,strict:!0}),va({createInternalComparator:function(){return Vs}}),va({strict:!0,createInternalComparator:function(){return Vs}}),va({circular:!0,createInternalComparator:function(){return Vs}}),va({circular:!0,createInternalComparator:function(){return Vs},strict:!0});function va(e){e===void 0&&(e={});var t=e.circular,n=t===void 0?!1:t,r=e.createInternalComparator,o=e.createState,a=e.strict,i=a===void 0?!1:a,s=cve(e),c=sve(s),l=r?r(c):lve(c);return uve({circular:n,comparator:c,createState:o,equals:l,strict:i})}function fve(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function b$(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,r=function o(a){n<0&&(n=a),a-n>t?(e(a),n=-1):fve(o)};requestAnimationFrame(r)}function Bj(e){"@babel/helpers - typeof";return Bj=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bj(e)}function pve(e){return gve(e)||yve(e)||mve(e)||hve()}function hve(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mve(e,t){if(e){if(typeof e=="string")return x$(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return x$(e,t)}}function x$(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function yve(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function gve(e){if(Array.isArray(e))return e}function vve(){var e={},t=function(){return null},n=!1,r=function o(a){if(!n){if(Array.isArray(a)){if(!a.length)return;var i=a,s=pve(i),c=s[0],l=s.slice(1);if(typeof c=="number"){b$(o.bind(null,l),c);return}o(c),b$(o.bind(null,l));return}Bj(a)==="object"&&(e=a,t(e)),typeof a=="function"&&a()}};return{stop:function(){n=!0},start:function(o){n=!1,r(o)},subscribe:function(o){return t=o,function(){t=function(){return null}}}}}function Su(e){"@babel/helpers - typeof";return Su=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Su(e)}function w$(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function _$(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?w$(Object(n),!0).forEach(function(r){j$(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w$(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function j$(e,t,n){return t=bve(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bve(e){var t=xve(e,"string");return Su(t)==="symbol"?t:String(t)}function xve(e,t){if(Su(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Su(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var wve=function(e,t){return[Object.keys(e),Object.keys(t)].reduce(function(n,r){return n.filter(function(o){return r.includes(o)})})},_ve=function(e){return e},jve=function(e){return e.replace(/([A-Z])/g,function(t){return"-".concat(t.toLowerCase())})},Cu=function(e,t){return Object.keys(t).reduce(function(n,r){return _$(_$({},n),{},j$({},r,e(r,t[r])))},{})},E$=function(e,t,n){return e.map(function(r){return"".concat(jve(r)," ").concat(t,"ms ").concat(n)}).join(",")};function Eve(e,t){return Ove(e)||Cve(e,t)||S$(e,t)||Sve()}function Sve(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Cve(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,o,a,i,s=[],c=!0,l=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(c=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(u){l=!0,o=u}finally{try{if(!c&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return s}}function Ove(e){if(Array.isArray(e))return e}function Nve(e){return Pve(e)||kve(e)||S$(e)||Mve()}function Mve(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function S$(e,t){if(e){if(typeof e=="string")return $j(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $j(e,t)}}function kve(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Pve(e){if(Array.isArray(e))return $j(e)}function $j(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Oh=1e-4,C$=function(e,t){return[0,3*e,3*t-6*e,3*e-3*t+1]},O$=function(e,t){return e.map(function(n,r){return n*Math.pow(t,r)}).reduce(function(n,r){return n+r})},N$=function(e,t){return function(n){var r=C$(e,t);return O$(r,n)}},Ave=function(e,t){return function(n){var r=C$(e,t),o=[].concat(Nve(r.map(function(a,i){return a*i}).slice(1)),[0]);return O$(o,n)}},M$=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],o=t[1],a=t[2],i=t[3];if(t.length===1)switch(t[0]){case"linear":r=0,o=0,a=1,i=1;break;case"ease":r=.25,o=.1,a=.25,i=1;break;case"ease-in":r=.42,o=0,a=1,i=1;break;case"ease-out":r=.42,o=0,a=.58,i=1;break;case"ease-in-out":r=0,o=0,a=.58,i=1;break;default:{var s=t[0].split("(");if(s[0]==="cubic-bezier"&&s[1].split(")")[0].split(",").length===4){var c=s[1].split(")")[0].split(",").map(function(m){return parseFloat(m)}),l=Eve(c,4);r=l[0],o=l[1],a=l[2],i=l[3]}}}var u=N$(r,a),d=N$(o,i),f=Ave(r,a),h=function(m){return m>1?1:m<0?0:m},g=function(m){for(var v=m>1?1:m,b=v,x=0;x<8;++x){var _=u(b)-v,w=f(b);if(Math.abs(_-v)<Oh||w<Oh)return d(b);b=h(b-_/w)}return d(b)};return g.isStepper=!1,g},Tve=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.stiff,n=t===void 0?100:t,r=e.damping,o=r===void 0?8:r,a=e.dt,i=a===void 0?17:a,s=function(c,l,u){var d=-(c-l)*n,f=u*o,h=u+(d-f)*i/1e3,g=u*i/1e3+c;return Math.abs(g-l)<Oh&&Math.abs(h)<Oh?[l,0]:[g,h]};return s.isStepper=!0,s.dt=i,s},Rve=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0];if(typeof r=="string")switch(r){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return M$(r);case"spring":return Tve();default:if(r.split("(")[0]==="cubic-bezier")return M$(r)}return typeof r=="function"?r:null};function Ou(e){"@babel/helpers - typeof";return Ou=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ou(e)}function k$(e){return Lve(e)||Dve(e)||A$(e)||Ive()}function Ive(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Dve(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Lve(e){if(Array.isArray(e))return Vj(e)}function P$(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function tn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?P$(Object(n),!0).forEach(function(r){zj(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P$(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function zj(e,t,n){return t=Fve(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fve(e){var t=Bve(e,"string");return Ou(t)==="symbol"?t:String(t)}function Bve(e,t){if(Ou(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Ou(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $ve(e,t){return Uve(e)||Vve(e,t)||A$(e,t)||zve()}function zve(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function A$(e,t){if(e){if(typeof e=="string")return Vj(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Vj(e,t)}}function Vj(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Vve(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,o,a,i,s=[],c=!0,l=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(c=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(u){l=!0,o=u}finally{try{if(!c&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return s}}function Uve(e){if(Array.isArray(e))return e}var Nh=function(e,t,n){return e+(t-e)*n},Uj=function(e){var t=e.from,n=e.to;return t!==n},Hve=function e(t,n,r){var o=Cu(function(a,i){if(Uj(i)){var s=t(i.from,i.to,i.velocity),c=$ve(s,2),l=c[0],u=c[1];return tn(tn({},i),{},{from:l,velocity:u})}return i},n);return r<1?Cu(function(a,i){return Uj(i)?tn(tn({},i),{},{velocity:Nh(i.velocity,o[a].velocity,r),from:Nh(i.from,o[a].from,r)}):i},n):e(t,o,r-1)};const Wve=function(e,t,n,r,o){var a=wve(e,t),i=a.reduce(function(v,b){return tn(tn({},v),{},zj({},b,[e[b],t[b]]))},{}),s=a.reduce(function(v,b){return tn(tn({},v),{},zj({},b,{from:e[b],velocity:0,to:t[b]}))},{}),c=-1,l,u,d=function(){return null},f=function(){return Cu(function(v,b){return b.from},s)},h=function(){return!Object.values(s).filter(Uj).length},g=function(v){l||(l=v);var b=v-l,x=b/n.dt;s=Hve(n,s,x),o(tn(tn(tn({},e),t),f())),l=v,h()||(c=requestAnimationFrame(d))},m=function(v){u||(u=v);var b=(v-u)/r,x=Cu(function(w,j){return Nh.apply(void 0,k$(j).concat([n(b)]))},i);if(o(tn(tn(tn({},e),t),x)),b<1)c=requestAnimationFrame(d);else{var _=Cu(function(w,j){return Nh.apply(void 0,k$(j).concat([n(1)]))},i);o(tn(tn(tn({},e),t),_))}};return d=n.isStepper?g:m,function(){return requestAnimationFrame(d),function(){cancelAnimationFrame(c)}}};function Us(e){"@babel/helpers - typeof";return Us=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Us(e)}var qve=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function Yve(e,t){if(e==null)return{};var n=Kve(e,t),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Kve(e,t){if(e==null)return{};var n={},r=Object.keys(e),o,a;for(a=0;a<r.length;a++)o=r[a],!(t.indexOf(o)>=0)&&(n[o]=e[o]);return n}function Hj(e){return Zve(e)||Jve(e)||Qve(e)||Xve()}function Xve(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qve(e,t){if(e){if(typeof e=="string")return Wj(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Wj(e,t)}}function Jve(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Zve(e){if(Array.isArray(e))return Wj(e)}function Wj(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function T$(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Sr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?T$(Object(n),!0).forEach(function(r){Nu(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T$(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Nu(e,t,n){return t=R$(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Gve(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function e0e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,R$(r.key),r)}}function t0e(e,t,n){return t&&e0e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function R$(e){var t=n0e(e,"string");return Us(t)==="symbol"?t:String(t)}function n0e(e,t){if(Us(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Us(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function r0e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qj(e,t)}function qj(e,t){return qj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},qj(e,t)}function o0e(e){var t=a0e();return function(){var n=Mh(e),r;if(t){var o=Mh(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Yj(this,r)}}function Yj(e,t){if(t&&(Us(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Kj(e)}function Kj(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a0e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Mh(e){return Mh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Mh(e)}var ba=function(e){r0e(n,e);var t=o0e(n);function n(r,o){var a;Gve(this,n),a=t.call(this,r,o);var i=a.props,s=i.isActive,c=i.attributeName,l=i.from,u=i.to,d=i.steps,f=i.children,h=i.duration;if(a.handleStyleChange=a.handleStyleChange.bind(Kj(a)),a.changeStyle=a.changeStyle.bind(Kj(a)),!s||h<=0)return a.state={style:{}},typeof f=="function"&&(a.state={style:u}),Yj(a);if(d&&d.length)a.state={style:d[0].style};else if(l){if(typeof f=="function")return a.state={style:l},Yj(a);a.state={style:c?Nu({},c,l):l}}else a.state={style:{}};return a}return t0e(n,[{key:"componentDidMount",value:function(){var r=this.props,o=r.isActive,a=r.canBegin;this.mounted=!0,!(!o||!a)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(r){var o=this.props,a=o.isActive,i=o.canBegin,s=o.attributeName,c=o.shouldReAnimate,l=o.to,u=o.from,d=this.state.style;if(i){if(!a){var f={style:s?Nu({},s,l):l};this.state&&d&&(s&&d[s]!==l||!s&&d!==l)&&this.setState(f);return}if(!(dve(r.to,l)&&r.canBegin&&r.isActive)){var h=!r.canBegin||!r.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var g=h||c?u:r.to;if(this.state&&d){var m={style:s?Nu({},s,g):g};(s&&d[s]!==g||!s&&d!==g)&&this.setState(m)}this.runAnimation(Sr(Sr({},this.props),{},{from:g,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var r=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),r&&r()}},{key:"handleStyleChange",value:function(r){this.changeStyle(r)}},{key:"changeStyle",value:function(r){this.mounted&&this.setState({style:r})}},{key:"runJSAnimation",value:function(r){var o=this,a=r.from,i=r.to,s=r.duration,c=r.easing,l=r.begin,u=r.onAnimationEnd,d=r.onAnimationStart,f=Wve(a,i,Rve(c),s,this.changeStyle),h=function(){o.stopJSAnimation=f()};this.manager.start([d,l,h,s,u])}},{key:"runStepAnimation",value:function(r){var o=this,a=r.steps,i=r.begin,s=r.onAnimationStart,c=a[0],l=c.style,u=c.duration,d=u===void 0?0:u,f=function(h,g,m){if(m===0)return h;var v=g.duration,b=g.easing,x=b===void 0?"ease":b,_=g.style,w=g.properties,j=g.onAnimationEnd,E=m>0?a[m-1]:g,S=w||Object.keys(_);if(typeof x=="function"||x==="spring")return[].concat(Hj(h),[o.runJSAnimation.bind(o,{from:E.style,to:_,duration:v,easing:x}),v]);var C=E$(S,v,x),M=Sr(Sr(Sr({},E.style),_),{},{transition:C});return[].concat(Hj(h),[M,v,j]).filter(_ve)};return this.manager.start([s].concat(Hj(a.reduce(f,[l,Math.max(d,i)])),[r.onAnimationEnd]))}},{key:"runAnimation",value:function(r){this.manager||(this.manager=vve());var o=r.begin,a=r.duration,i=r.attributeName,s=r.to,c=r.easing,l=r.onAnimationStart,u=r.onAnimationEnd,d=r.steps,f=r.children,h=this.manager;if(this.unSubscribe=h.subscribe(this.handleStyleChange),typeof c=="function"||typeof f=="function"||c==="spring"){this.runJSAnimation(r);return}if(d.length>1){this.runStepAnimation(r);return}var g=i?Nu({},i,s):s,m=E$(Object.keys(g),a,c);h.start([l,o,Sr(Sr({},g),{},{transition:m}),a,u])}},{key:"render",value:function(){var r=this.props,o=r.children;r.begin;var a=r.duration;r.attributeName,r.easing;var i=r.isActive;r.steps,r.from,r.to,r.canBegin,r.onAnimationEnd,r.shouldReAnimate,r.onAnimationReStart;var s=Yve(r,qve),c=y.Children.count(o),l=this.state.style;if(typeof o=="function")return o(l);if(!i||c===0||a<=0)return o;var u=function(d){var f=d.props,h=f.style,g=h===void 0?{}:h,m=f.className,v=y.cloneElement(d,Sr(Sr({},s),{},{style:Sr(Sr({},g),l),className:m}));return v};return c===1?u(y.Children.only(o)):U.createElement("div",null,y.Children.map(o,function(d){return u(d)}))}}]),n}(y.PureComponent);ba.displayName="Animate",ba.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}},ba.propTypes={from:Be.oneOfType([Be.object,Be.string]),to:Be.oneOfType([Be.object,Be.string]),attributeName:Be.string,duration:Be.number,begin:Be.number,easing:Be.oneOfType([Be.string,Be.func]),steps:Be.arrayOf(Be.shape({duration:Be.number.isRequired,style:Be.object.isRequired,easing:Be.oneOfType([Be.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Be.func]),properties:Be.arrayOf("string"),onAnimationEnd:Be.func})),children:Be.oneOfType([Be.node,Be.func]),isActive:Be.bool,canBegin:Be.bool,onAnimationEnd:Be.func,shouldReAnimate:Be.bool,onAnimationStart:Be.func,onAnimationReStart:Be.func},Be.object,Be.object,Be.object,Be.element,Be.object,Be.object,Be.object,Be.oneOfType([Be.array,Be.element]),Be.any;function Mu(e){"@babel/helpers - typeof";return Mu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mu(e)}function kh(){return kh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kh.apply(this,arguments)}function i0e(e,t){return u0e(e)||l0e(e,t)||c0e(e,t)||s0e()}function s0e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function c0e(e,t){if(e){if(typeof e=="string")return I$(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return I$(e,t)}}function I$(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l0e(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,o,a,i,s=[],c=!0,l=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(c=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(u){l=!0,o=u}finally{try{if(!c&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return s}}function u0e(e){if(Array.isArray(e))return e}function D$(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function L$(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?D$(Object(n),!0).forEach(function(r){d0e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D$(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function d0e(e,t,n){return t=f0e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f0e(e){var t=p0e(e,"string");return Mu(t)=="symbol"?t:t+""}function p0e(e,t){if(Mu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Mu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var F$=function(e,t,n,r,o){var a=Math.min(Math.abs(n)/2,Math.abs(r)/2),i=r>=0?1:-1,s=n>=0?1:-1,c=r>=0&&n>=0||r<0&&n<0?1:0,l;if(a>0&&o instanceof Array){for(var u=[0,0,0,0],d=0,f=4;d<f;d++)u[d]=o[d]>a?a:o[d];l="M".concat(e,",").concat(t+i*u[0]),u[0]>0&&(l+="A ".concat(u[0],",").concat(u[0],",0,0,").concat(c,",").concat(e+s*u[0],",").concat(t)),l+="L ".concat(e+n-s*u[1],",").concat(t),u[1]>0&&(l+="A ".concat(u[1],",").concat(u[1],",0,0,").concat(c,`,
        `).concat(e+n,",").concat(t+i*u[1])),l+="L ".concat(e+n,",").concat(t+r-i*u[2]),u[2]>0&&(l+="A ".concat(u[2],",").concat(u[2],",0,0,").concat(c,`,
        `).concat(e+n-s*u[2],",").concat(t+r)),l+="L ".concat(e+s*u[3],",").concat(t+r),u[3]>0&&(l+="A ".concat(u[3],",").concat(u[3],",0,0,").concat(c,`,
        `).concat(e,",").concat(t+r-i*u[3])),l+="Z"}else if(a>0&&o===+o&&o>0){var h=Math.min(a,o);l="M ".concat(e,",").concat(t+i*h,`
            A `).concat(h,",").concat(h,",0,0,").concat(c,",").concat(e+s*h,",").concat(t,`
            L `).concat(e+n-s*h,",").concat(t,`
            A `).concat(h,",").concat(h,",0,0,").concat(c,",").concat(e+n,",").concat(t+i*h,`
            L `).concat(e+n,",").concat(t+r-i*h,`
            A `).concat(h,",").concat(h,",0,0,").concat(c,",").concat(e+n-s*h,",").concat(t+r,`
            L `).concat(e+s*h,",").concat(t+r,`
            A `).concat(h,",").concat(h,",0,0,").concat(c,",").concat(e,",").concat(t+r-i*h," Z")}else l="M ".concat(e,",").concat(t," h ").concat(n," v ").concat(r," h ").concat(-n," Z");return l},h0e=function(e,t){if(!e||!t)return!1;var n=e.x,r=e.y,o=t.x,a=t.y,i=t.width,s=t.height;if(Math.abs(i)>0&&Math.abs(s)>0){var c=Math.min(o,o+i),l=Math.max(o,o+i),u=Math.min(a,a+s),d=Math.max(a,a+s);return n>=c&&n<=l&&r>=u&&r<=d}return!1},m0e={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Xj=function(e){var t=L$(L$({},m0e),e),n=y.useRef(),r=y.useState(-1),o=i0e(r,2),a=o[0],i=o[1];y.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var _=n.current.getTotalLength();_&&i(_)}catch{}},[]);var s=t.x,c=t.y,l=t.width,u=t.height,d=t.radius,f=t.className,h=t.animationEasing,g=t.animationDuration,m=t.animationBegin,v=t.isAnimationActive,b=t.isUpdateAnimationActive;if(s!==+s||c!==+c||l!==+l||u!==+u||l===0||u===0)return null;var x=ut("recharts-rectangle",f);return b?U.createElement(ba,{canBegin:a>0,from:{width:l,height:u,x:s,y:c},to:{width:l,height:u,x:s,y:c},duration:g,animationEasing:h,isActive:b},function(_){var w=_.width,j=_.height,E=_.x,S=_.y;return U.createElement(ba,{canBegin:a>0,from:"0px ".concat(a===-1?1:a,"px"),to:"".concat(a,"px 0px"),attributeName:"strokeDasharray",begin:m,duration:g,isActive:v,easing:h},U.createElement("path",kh({},rt(t,!0),{className:x,d:F$(E,S,w,j,d),ref:n})))}):U.createElement("path",kh({},rt(t,!0),{className:x,d:F$(s,c,l,u,d)}))};function Qj(){return Qj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Qj.apply(this,arguments)}var B$=function(e){var t=e.cx,n=e.cy,r=e.r,o=e.className,a=ut("recharts-dot",o);return t===+t&&n===+n&&r===+r?U.createElement("circle",Qj({},rt(e,!1),Mp(e),{className:a,cx:t,cy:n,r})):null};function ku(e){"@babel/helpers - typeof";return ku=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ku(e)}var y0e=["x","y","top","left","width","height","className"];function Jj(){return Jj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Jj.apply(this,arguments)}function $$(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function g0e(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?$$(Object(n),!0).forEach(function(r){v0e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$$(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function v0e(e,t,n){return t=b0e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b0e(e){var t=x0e(e,"string");return ku(t)=="symbol"?t:t+""}function x0e(e,t){if(ku(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(ku(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function w0e(e,t){if(e==null)return{};var n=_0e(e,t),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function _0e(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var j0e=function(e,t,n,r,o,a){return"M".concat(e,",").concat(o,"v").concat(r,"M").concat(a,",").concat(t,"h").concat(n)},E0e=function(e){var t=e.x,n=t===void 0?0:t,r=e.y,o=r===void 0?0:r,a=e.top,i=a===void 0?0:a,s=e.left,c=s===void 0?0:s,l=e.width,u=l===void 0?0:l,d=e.height,f=d===void 0?0:d,h=e.className,g=w0e(e,y0e),m=g0e({x:n,y:o,top:i,left:c,width:u,height:f},g);return!he(n)||!he(o)||!he(u)||!he(f)||!he(i)||!he(c)?null:U.createElement("path",Jj({},rt(m,!0),{className:ut("recharts-cross",h),d:j0e(n,o,u,f,i,c)}))},Zj,z$;sS=function(){if(z$)return Zj;z$=1;var e=mo(),t=ly(),n=kr(),r="[object Object]",o=Function.prototype,a=Object.prototype,i=o.toString,s=a.hasOwnProperty,c=i.call(Object);function l(u){if(!n(u)||e(u)!=r)return!1;var d=t(u);if(d===null)return!0;var f=s.call(d,"constructor")&&d.constructor;return typeof f=="function"&&f instanceof f&&i.call(f)==c}return Zj=l,Zj};var S0e=sS();const C0e=Qe(S0e);var Gj,V$;function O0e(){if(V$)return Gj;V$=1;var e=mo(),t=kr(),n="[object Boolean]";function r(o){return o===!0||o===!1||t(o)&&e(o)==n}return Gj=r,Gj}var N0e=O0e();const M0e=Qe(N0e);function Pu(e){"@babel/helpers - typeof";return Pu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pu(e)}function Ph(){return Ph=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ph.apply(this,arguments)}function k0e(e,t){return R0e(e)||T0e(e,t)||A0e(e,t)||P0e()}function P0e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function A0e(e,t){if(e){if(typeof e=="string")return U$(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return U$(e,t)}}function U$(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function T0e(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,o,a,i,s=[],c=!0,l=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(c=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(u){l=!0,o=u}finally{try{if(!c&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return s}}function R0e(e){if(Array.isArray(e))return e}function H$(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function W$(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?H$(Object(n),!0).forEach(function(r){I0e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H$(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function I0e(e,t,n){return t=D0e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function D0e(e){var t=L0e(e,"string");return Pu(t)=="symbol"?t:t+""}function L0e(e,t){if(Pu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Pu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var q$=function(e,t,n,r,o){var a=n-r,i;return i="M ".concat(e,",").concat(t),i+="L ".concat(e+n,",").concat(t),i+="L ".concat(e+n-a/2,",").concat(t+o),i+="L ".concat(e+n-a/2-r,",").concat(t+o),i+="L ".concat(e,",").concat(t," Z"),i},F0e={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},B0e=function(e){var t=W$(W$({},F0e),e),n=y.useRef(),r=y.useState(-1),o=k0e(r,2),a=o[0],i=o[1];y.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var x=n.current.getTotalLength();x&&i(x)}catch{}},[]);var s=t.x,c=t.y,l=t.upperWidth,u=t.lowerWidth,d=t.height,f=t.className,h=t.animationEasing,g=t.animationDuration,m=t.animationBegin,v=t.isUpdateAnimationActive;if(s!==+s||c!==+c||l!==+l||u!==+u||d!==+d||l===0&&u===0||d===0)return null;var b=ut("recharts-trapezoid",f);return v?U.createElement(ba,{canBegin:a>0,from:{upperWidth:0,lowerWidth:0,height:d,x:s,y:c},to:{upperWidth:l,lowerWidth:u,height:d,x:s,y:c},duration:g,animationEasing:h,isActive:v},function(x){var _=x.upperWidth,w=x.lowerWidth,j=x.height,E=x.x,S=x.y;return U.createElement(ba,{canBegin:a>0,from:"0px ".concat(a===-1?1:a,"px"),to:"".concat(a,"px 0px"),attributeName:"strokeDasharray",begin:m,duration:g,easing:h},U.createElement("path",Ph({},rt(t,!0),{className:b,d:q$(E,S,_,w,j),ref:n})))}):U.createElement("g",null,U.createElement("path",Ph({},rt(t,!0),{className:b,d:q$(s,c,l,u,d)})))},$0e=["option","shapeType","propTransformer","activeClassName","isActive"];function Au(e){"@babel/helpers - typeof";return Au=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Au(e)}function z0e(e,t){if(e==null)return{};var n=V0e(e,t),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function V0e(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Y$(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Ah(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Y$(Object(n),!0).forEach(function(r){U0e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y$(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function U0e(e,t,n){return t=H0e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function H0e(e){var t=W0e(e,"string");return Au(t)=="symbol"?t:t+""}function W0e(e,t){if(Au(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Au(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function q0e(e,t){return Ah(Ah({},t),e)}function Y0e(e,t){return e==="symbols"}function K$(e){var t=e.shapeType,n=e.elementProps;switch(t){case"rectangle":return U.createElement(Xj,n);case"trapezoid":return U.createElement(B0e,n);case"sector":return U.createElement(e$,n);case"symbols":if(Y0e(t))return U.createElement($1,n);break;default:return null}}function K0e(e){return y.isValidElement(e)?e.props:e}function X0e(e){var t=e.option,n=e.shapeType,r=e.propTransformer,o=r===void 0?q0e:r,a=e.activeClassName,i=a===void 0?"recharts-active-shape":a,s=e.isActive,c=z0e(e,$0e),l;if(y.isValidElement(t))l=y.cloneElement(t,Ah(Ah({},c),K0e(t)));else if(Ke(t))l=t(c);else if(C0e(t)&&!M0e(t)){var u=o(t,c);l=U.createElement(K$,{shapeType:n,elementProps:u})}else{var d=c;l=U.createElement(K$,{shapeType:n,elementProps:d})}return s?U.createElement(qt,{className:i},l):l}function Th(e,t){return t!=null&&"trapezoids"in e.props}function Rh(e,t){return t!=null&&"sectors"in e.props}function Tu(e,t){return t!=null&&"points"in e.props}function Q0e(e,t){var n,r,o=e.x===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.x)||e.x===t.x,a=e.y===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.y)||e.y===t.y;return o&&a}function J0e(e,t){var n=e.endAngle===t.endAngle,r=e.startAngle===t.startAngle;return n&&r}function Z0e(e,t){var n=e.x===t.x,r=e.y===t.y,o=e.z===t.z;return n&&r&&o}function G0e(e,t){var n;return Th(e,t)?n=Q0e:Rh(e,t)?n=J0e:Tu(e,t)&&(n=Z0e),n}function ebe(e,t){var n;return Th(e,t)?n="trapezoids":Rh(e,t)?n="sectors":Tu(e,t)&&(n="points"),n}function tbe(e,t){if(Th(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(Rh(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return Tu(e,t)?t.payload:{}}function nbe(e){var t=e.activeTooltipItem,n=e.graphicalItem,r=e.itemData,o=ebe(n,t),a=tbe(n,t),i=r.filter(function(c,l){var u=vj(a,c),d=n.props[o].filter(function(g){var m=G0e(n,t);return m(g,t)}),f=n.props[o].indexOf(d[d.length-1]),h=l===f;return u&&h}),s=r.indexOf(i[i.length-1]);return s}var eE,X$;function rbe(){if(X$)return eE;X$=1;var e=Math.ceil,t=Math.max;function n(r,o,a,i){for(var s=-1,c=t(e((o-r)/(a||1)),0),l=Array(c);c--;)l[i?c:++s]=r,r+=a;return l}return eE=n,eE}var tE,Q$;function obe(){if(Q$)return tE;Q$=1;var e=rbe(),t=xi(),n=i5();function r(o){return function(a,i,s){return s&&typeof s!="number"&&t(a,i,s)&&(i=s=void 0),a=n(a),i===void 0?(i=a,a=0):i=n(i),s=s===void 0?a<i?1:-1:n(s),e(a,i,s,o)}}return tE=r,tE}var nE,J$;function abe(){if(J$)return nE;J$=1;var e=obe(),t=e();return nE=t,nE}var ibe=abe();const Ih=Qe(ibe);function Ru(e){"@babel/helpers - typeof";return Ru=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ru(e)}function Z$(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function G$(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Z$(Object(n),!0).forEach(function(r){e9(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z$(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function e9(e,t,n){return t=sbe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sbe(e){var t=cbe(e,"string");return Ru(t)=="symbol"?t:t+""}function cbe(e,t){if(Ru(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Ru(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var lbe=["Webkit","Moz","O","ms"],ube=function(e,t){var n=e.replace(/(\w)/,function(o){return o.toUpperCase()}),r=lbe.reduce(function(o,a){return G$(G$({},o),{},e9({},a+n,t))},{});return r[e]=t,r};function Hs(e){"@babel/helpers - typeof";return Hs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hs(e)}function Dh(){return Dh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Dh.apply(this,arguments)}function t9(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function rE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?t9(Object(n),!0).forEach(function(r){Un(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):t9(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function dbe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n9(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,o9(r.key),r)}}function fbe(e,t,n){return t&&n9(e.prototype,t),n&&n9(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function pbe(e,t,n){return t=Lh(t),hbe(e,r9()?Reflect.construct(t,n||[],Lh(e).constructor):t.apply(e,n))}function hbe(e,t){if(t&&(Hs(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return mbe(e)}function mbe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function r9(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(r9=function(){return!!e})()}function Lh(e){return Lh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Lh(e)}function ybe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&oE(e,t)}function oE(e,t){return oE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},oE(e,t)}function Un(e,t,n){return t=o9(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o9(e){var t=gbe(e,"string");return Hs(t)=="symbol"?t:t+""}function gbe(e,t){if(Hs(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Hs(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var vbe=function(e){var t=e.data,n=e.startIndex,r=e.endIndex,o=e.x,a=e.width,i=e.travellerWidth;if(!t||!t.length)return{};var s=t.length,c=au().domain(Ih(0,s)).range([o,o+a-i]),l=c.domain().map(function(u){return c(u)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:c(n),endX:c(r),scale:c,scaleValues:l}},a9=function(e){return e.changedTouches&&!!e.changedTouches.length},Ws=function(e){function t(n){var r;return dbe(this,t),r=pbe(this,t,[n]),Un(r,"handleDrag",function(o){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(o):r.state.isSlideMoving&&r.handleSlideDrag(o)}),Un(r,"handleTouchMove",function(o){o.changedTouches!=null&&o.changedTouches.length>0&&r.handleDrag(o.changedTouches[0])}),Un(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var o=r.props,a=o.endIndex,i=o.onDragEnd,s=o.startIndex;i==null||i({endIndex:a,startIndex:s})}),r.detachDragEndListener()}),Un(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),Un(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),Un(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),Un(r,"handleSlideDragStart",function(o){var a=a9(o)?o.changedTouches[0]:o;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:a.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return ybe(t,e),fbe(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var r=n.startX,o=n.endX,a=this.state.scaleValues,i=this.props,s=i.gap,c=i.data,l=c.length-1,u=Math.min(r,o),d=Math.max(r,o),f=t.getIndexInRange(a,u),h=t.getIndexInRange(a,d);return{startIndex:f-f%s,endIndex:h===l?l:h-h%s}}},{key:"getTextOfTick",value:function(n){var r=this.props,o=r.data,a=r.tickFormatter,i=r.dataKey,s=Xr(o[n],i,n);return Ke(a)?a(s,n):s}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var r=this.state,o=r.slideMoveStartX,a=r.startX,i=r.endX,s=this.props,c=s.x,l=s.width,u=s.travellerWidth,d=s.startIndex,f=s.endIndex,h=s.onChange,g=n.pageX-o;g>0?g=Math.min(g,c+l-u-i,c+l-u-a):g<0&&(g=Math.max(g,c-a,c-i));var m=this.getIndex({startX:a+g,endX:i+g});(m.startIndex!==d||m.endIndex!==f)&&h&&h(m),this.setState({startX:a+g,endX:i+g,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,r){var o=a9(r)?r.changedTouches[0]:r;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:o.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var r=this.state,o=r.brushMoveStartX,a=r.movingTravellerId,i=r.endX,s=r.startX,c=this.state[a],l=this.props,u=l.x,d=l.width,f=l.travellerWidth,h=l.onChange,g=l.gap,m=l.data,v={startX:this.state.startX,endX:this.state.endX},b=n.pageX-o;b>0?b=Math.min(b,u+d-f-c):b<0&&(b=Math.max(b,u-c)),v[a]=c+b;var x=this.getIndex(v),_=x.startIndex,w=x.endIndex,j=function(){var E=m.length-1;return a==="startX"&&(i>s?_%g===0:w%g===0)||i<s&&w===E||a==="endX"&&(i>s?w%g===0:_%g===0)||i>s&&w===E};this.setState(Un(Un({},a,c+b),"brushMoveStartX",n.pageX),function(){h&&j()&&h(x)})}},{key:"handleTravellerMoveKeyboard",value:function(n,r){var o=this,a=this.state,i=a.scaleValues,s=a.startX,c=a.endX,l=this.state[r],u=i.indexOf(l);if(u!==-1){var d=u+n;if(!(d===-1||d>=i.length)){var f=i[d];r==="startX"&&f>=c||r==="endX"&&f<=s||this.setState(Un({},r,f),function(){o.props.onChange(o.getIndex({startX:o.state.startX,endX:o.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,r=n.x,o=n.y,a=n.width,i=n.height,s=n.fill,c=n.stroke;return U.createElement("rect",{stroke:c,fill:s,x:r,y:o,width:a,height:i})}},{key:"renderPanorama",value:function(){var n=this.props,r=n.x,o=n.y,a=n.width,i=n.height,s=n.data,c=n.children,l=n.padding,u=y.Children.only(c);return u?U.cloneElement(u,{x:r,y:o,width:a,height:i,margin:l,compact:!0,data:s}):null}},{key:"renderTravellerLayer",value:function(n,r){var o,a,i=this,s=this.props,c=s.y,l=s.travellerWidth,u=s.height,d=s.traveller,f=s.ariaLabel,h=s.data,g=s.startIndex,m=s.endIndex,v=Math.max(n,this.props.x),b=rE(rE({},rt(this.props,!1)),{},{x:v,y:c,width:l,height:u}),x=f||"Min value: ".concat((o=h[g])===null||o===void 0?void 0:o.name,", Max value: ").concat((a=h[m])===null||a===void 0?void 0:a.name);return U.createElement(qt,{tabIndex:0,role:"slider","aria-label":x,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[r],onTouchStart:this.travellerDragStartHandlers[r],onKeyDown:function(_){["ArrowLeft","ArrowRight"].includes(_.key)&&(_.preventDefault(),_.stopPropagation(),i.handleTravellerMoveKeyboard(_.key==="ArrowRight"?1:-1,r))},onFocus:function(){i.setState({isTravellerFocused:!0})},onBlur:function(){i.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(d,b))}},{key:"renderSlide",value:function(n,r){var o=this.props,a=o.y,i=o.height,s=o.stroke,c=o.travellerWidth,l=Math.min(n,r)+c,u=Math.max(Math.abs(r-n)-c,0);return U.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:s,fillOpacity:.2,x:l,y:a,width:u,height:i})}},{key:"renderText",value:function(){var n=this.props,r=n.startIndex,o=n.endIndex,a=n.y,i=n.height,s=n.travellerWidth,c=n.stroke,l=this.state,u=l.startX,d=l.endX,f=5,h={pointerEvents:"none",fill:c};return U.createElement(qt,{className:"recharts-brush-texts"},U.createElement(Qp,Dh({textAnchor:"end",verticalAnchor:"middle",x:Math.min(u,d)-f,y:a+i/2},h),this.getTextOfTick(r)),U.createElement(Qp,Dh({textAnchor:"start",verticalAnchor:"middle",x:Math.max(u,d)+s+f,y:a+i/2},h),this.getTextOfTick(o)))}},{key:"render",value:function(){var n=this.props,r=n.data,o=n.className,a=n.children,i=n.x,s=n.y,c=n.width,l=n.height,u=n.alwaysShowText,d=this.state,f=d.startX,h=d.endX,g=d.isTextActive,m=d.isSlideMoving,v=d.isTravellerMoving,b=d.isTravellerFocused;if(!r||!r.length||!he(i)||!he(s)||!he(c)||!he(l)||c<=0||l<=0)return null;var x=ut("recharts-brush",o),_=U.Children.count(a)===1,w=ube("userSelect","none");return U.createElement(qt,{className:x,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:w},this.renderBackground(),_&&this.renderPanorama(),this.renderSlide(f,h),this.renderTravellerLayer(f,"startX"),this.renderTravellerLayer(h,"endX"),(g||m||v||b||u)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var r=n.x,o=n.y,a=n.width,i=n.height,s=n.stroke,c=Math.floor(o+i/2)-1;return U.createElement(U.Fragment,null,U.createElement("rect",{x:r,y:o,width:a,height:i,fill:s,stroke:"none"}),U.createElement("line",{x1:r+1,y1:c,x2:r+a-1,y2:c,fill:"none",stroke:"#fff"}),U.createElement("line",{x1:r+1,y1:c+2,x2:r+a-1,y2:c+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,r){var o;return U.isValidElement(n)?o=U.cloneElement(n,r):Ke(n)?o=n(r):o=t.renderDefaultTraveller(r),o}},{key:"getDerivedStateFromProps",value:function(n,r){var o=n.data,a=n.width,i=n.x,s=n.travellerWidth,c=n.updateId,l=n.startIndex,u=n.endIndex;if(o!==r.prevData||c!==r.prevUpdateId)return rE({prevData:o,prevTravellerWidth:s,prevUpdateId:c,prevX:i,prevWidth:a},o&&o.length?vbe({data:o,width:a,x:i,travellerWidth:s,startIndex:l,endIndex:u}):{scale:null,scaleValues:null});if(r.scale&&(a!==r.prevWidth||i!==r.prevX||s!==r.prevTravellerWidth)){r.scale.range([i,i+a-s]);var d=r.scale.domain().map(function(f){return r.scale(f)});return{prevData:o,prevTravellerWidth:s,prevUpdateId:c,prevX:i,prevWidth:a,startX:r.scale(n.startIndex),endX:r.scale(n.endIndex),scaleValues:d}}return null}},{key:"getIndexInRange",value:function(n,r){for(var o=n.length,a=0,i=o-1;i-a>1;){var s=Math.floor((a+i)/2);n[s]>r?i=s:a=s}return r>=n[i]?i:a}}])}(y.PureComponent);Un(Ws,"displayName","Brush"),Un(Ws,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var aE,i9;function bbe(){if(i9)return aE;i9=1;var e=c_();function t(n,r){var o;return e(n,function(a,i,s){return o=r(a,i,s),!o}),!!o}return aE=t,aE}var iE,s9;function xbe(){if(s9)return iE;s9=1;var e=uA(),t=Fr(),n=bbe(),r=pn(),o=xi();function a(i,s,c){var l=r(i)?e:n;return c&&o(i,s,c)&&(s=void 0),l(i,t(s,3))}return iE=a,iE}var wbe=xbe();const _be=Qe(wbe);var Qr=function(e,t){var n=e.alwaysShow,r=e.ifOverflow;return n&&(r="extendDomain"),r===t},sE,c9;function jbe(){if(c9)return sE;c9=1;var e=bm(),t=J6(),n=Fr();function r(o,a){var i={};return a=n(a,3),t(o,function(s,c,l){e(i,c,a(s,c,l))}),i}return sE=r,sE}var Ebe=jbe();const Sbe=Qe(Ebe);var cE,l9;function Cbe(){if(l9)return cE;l9=1;function e(t,n){for(var r=-1,o=t==null?0:t.length;++r<o;)if(!n(t[r],r,t))return!1;return!0}return cE=e,cE}var lE,u9;function Obe(){if(u9)return lE;u9=1;var e=c_();function t(n,r){var o=!0;return e(n,function(a,i,s){return o=!!r(a,i,s),o}),o}return lE=t,lE}var uE,d9;function Nbe(){if(d9)return uE;d9=1;var e=Cbe(),t=Obe(),n=Fr(),r=pn(),o=xi();function a(i,s,c){var l=r(i)?e:t;return c&&o(i,s,c)&&(s=void 0),l(i,n(s,3))}return uE=a,uE}var Mbe=Nbe();const f9=Qe(Mbe);var kbe=["x","y"];function Iu(e){"@babel/helpers - typeof";return Iu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Iu(e)}function dE(){return dE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dE.apply(this,arguments)}function p9(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Du(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?p9(Object(n),!0).forEach(function(r){Pbe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p9(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Pbe(e,t,n){return t=Abe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Abe(e){var t=Tbe(e,"string");return Iu(t)=="symbol"?t:t+""}function Tbe(e,t){if(Iu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Iu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Rbe(e,t){if(e==null)return{};var n=Ibe(e,t),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Ibe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Dbe(e,t){var n=e.x,r=e.y,o=Rbe(e,kbe),a="".concat(n),i=parseInt(a,10),s="".concat(r),c=parseInt(s,10),l="".concat(t.height||o.height),u=parseInt(l,10),d="".concat(t.width||o.width),f=parseInt(d,10);return Du(Du(Du(Du(Du({},t),o),i?{x:i}:{}),c?{y:c}:{}),{},{height:u,width:f,name:t.name,radius:t.radius})}function h9(e){return U.createElement(X0e,dE({shapeType:"rectangle",propTransformer:Dbe,activeClassName:"recharts-active-bar"},e))}var Lbe=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,r){if(typeof e=="number")return e;var o=typeof n=="number";return o?e(n,r):(o||li(),t)}},Fbe=["value","background"],m9;function qs(e){"@babel/helpers - typeof";return qs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qs(e)}function Bbe(e,t){if(e==null)return{};var n=$be(e,t),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function $be(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Fh(){return Fh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Fh.apply(this,arguments)}function y9(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Ft(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?y9(Object(n),!0).forEach(function(r){xa(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y9(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function zbe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g9(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,b9(r.key),r)}}function Vbe(e,t,n){return t&&g9(e.prototype,t),n&&g9(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ube(e,t,n){return t=Bh(t),Hbe(e,v9()?Reflect.construct(t,n||[],Bh(e).constructor):t.apply(e,n))}function Hbe(e,t){if(t&&(qs(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Wbe(e)}function Wbe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v9(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(v9=function(){return!!e})()}function Bh(e){return Bh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Bh(e)}function qbe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fE(e,t)}function fE(e,t){return fE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},fE(e,t)}function xa(e,t,n){return t=b9(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b9(e){var t=Ybe(e,"string");return qs(t)=="symbol"?t:t+""}function Ybe(e,t){if(qs(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(qs(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var fi=function(e){function t(){var n;zbe(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return n=Ube(this,t,[].concat(o)),xa(n,"state",{isAnimationFinished:!1}),xa(n,"id",Np("recharts-bar-")),xa(n,"handleAnimationEnd",function(){var i=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),i&&i()}),xa(n,"handleAnimationStart",function(){var i=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),i&&i()}),n}return qbe(t,e),Vbe(t,[{key:"renderRectanglesStatically",value:function(n){var r=this,o=this.props,a=o.shape,i=o.dataKey,s=o.activeIndex,c=o.activeBar,l=rt(this.props,!1);return n&&n.map(function(u,d){var f=d===s,h=f?c:a,g=Ft(Ft(Ft({},l),u),{},{isActive:f,option:h,index:d,dataKey:i,onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd});return U.createElement(qt,Fh({className:"recharts-bar-rectangle"},kp(r.props,u,d),{key:"rectangle-".concat(u==null?void 0:u.x,"-").concat(u==null?void 0:u.y,"-").concat(u==null?void 0:u.value)}),U.createElement(h9,g))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,r=this.props,o=r.data,a=r.layout,i=r.isAnimationActive,s=r.animationBegin,c=r.animationDuration,l=r.animationEasing,u=r.animationId,d=this.state.prevData;return U.createElement(ba,{begin:s,duration:c,isActive:i,easing:l,from:{t:0},to:{t:1},key:"bar-".concat(u),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(f){var h=f.t,g=o.map(function(m,v){var b=d&&d[v];if(b){var x=Es(b.x,m.x),_=Es(b.y,m.y),w=Es(b.width,m.width),j=Es(b.height,m.height);return Ft(Ft({},m),{},{x:x(h),y:_(h),width:w(h),height:j(h)})}if(a==="horizontal"){var E=Es(0,m.height),S=E(h);return Ft(Ft({},m),{},{y:m.y+m.height-S,height:S})}var C=Es(0,m.width),M=C(h);return Ft(Ft({},m),{},{width:M})});return U.createElement(qt,null,n.renderRectanglesStatically(g))})}},{key:"renderRectangles",value:function(){var n=this.props,r=n.data,o=n.isAnimationActive,a=this.state.prevData;return o&&r&&r.length&&(!a||!vj(a,r))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(r)}},{key:"renderBackground",value:function(){var n=this,r=this.props,o=r.data,a=r.dataKey,i=r.activeIndex,s=rt(this.props.background,!1);return o.map(function(c,l){c.value;var u=c.background,d=Bbe(c,Fbe);if(!u)return null;var f=Ft(Ft(Ft(Ft(Ft({},d),{},{fill:"#eee"},u),s),kp(n.props,c,l)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:a,index:l,className:"recharts-bar-background-rectangle"});return U.createElement(h9,Fh({key:"background-bar-".concat(l),option:n.props.background,isActive:l===i},f))})}},{key:"renderErrorBar",value:function(n,r){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var o=this.props,a=o.data,i=o.xAxis,s=o.yAxis,c=o.layout,l=o.children,u=jr(l,vh);if(!u)return null;var d=c==="vertical"?a[0].height/2:a[0].width/2,f=function(g,m){var v=Array.isArray(g.value)?g.value[1]:g.value;return{x:g.x,y:g.y,value:v,errorVal:Xr(g,m)}},h={clipPath:n?"url(#clipPath-".concat(r,")"):null};return U.createElement(qt,h,u.map(function(g){return U.cloneElement(g,{key:"error-bar-".concat(r,"-").concat(g.props.dataKey),data:a,xAxis:i,yAxis:s,layout:c,offset:d,dataPointFormatter:f})}))}},{key:"render",value:function(){var n=this.props,r=n.hide,o=n.data,a=n.className,i=n.xAxis,s=n.yAxis,c=n.left,l=n.top,u=n.width,d=n.height,f=n.isAnimationActive,h=n.background,g=n.id;if(r||!o||!o.length)return null;var m=this.state.isAnimationFinished,v=ut("recharts-bar",a),b=i&&i.allowDataOverflow,x=s&&s.allowDataOverflow,_=b||x,w=at(g)?this.id:g;return U.createElement(qt,{className:v},b||x?U.createElement("defs",null,U.createElement("clipPath",{id:"clipPath-".concat(w)},U.createElement("rect",{x:b?c:c-u/2,y:x?l:l-d/2,width:b?u:u*2,height:x?d:d*2}))):null,U.createElement(qt,{className:"recharts-bar-rectangles",clipPath:_?"url(#clipPath-".concat(w,")"):null},h?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(_,w),(!f||m)&&di.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(n,r){return n.animationId!==r.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:r.curData}:n.data!==r.curData?{curData:n.data}:null}}])}(y.PureComponent);m9=fi,xa(fi,"displayName","Bar"),xa(fi,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!pa.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"}),xa(fi,"getComposedData",function(e){var t=e.props,n=e.item,r=e.barPosition,o=e.bandSize,a=e.xAxis,i=e.yAxis,s=e.xAxisTicks,c=e.yAxisTicks,l=e.stackedData,u=e.dataStartIndex,d=e.displayedData,f=e.offset,h=Oye(r,n);if(!h)return null;var g=t.layout,m=n.type.defaultProps,v=m!==void 0?Ft(Ft({},m),n.props):n.props,b=v.dataKey,x=v.children,_=v.minPointSize,w=g==="horizontal"?i:a,j=l?w.scale.domain():null,E=Iye({numericAxis:w}),S=jr(x,PF),C=d.map(function(M,N){var P,R,A,O,k,T;l?P=Nye(l[u+N],j):(P=Xr(M,b),Array.isArray(P)||(P=[E,P]));var D=Lbe(_,m9.defaultProps.minPointSize)(P[1],N);if(g==="horizontal"){var I,L=[i.scale(P[0]),i.scale(P[1])],B=L[0],V=L[1];R=D8({axis:a,ticks:s,bandSize:o,offset:h.offset,entry:M,index:N}),A=(I=V??B)!==null&&I!==void 0?I:void 0,O=h.size;var F=B-V;if(k=Number.isNaN(F)?0:F,T={x:R,y:i.y,width:O,height:i.height},Math.abs(D)>0&&Math.abs(k)<Math.abs(D)){var H=_r(k||D)*(Math.abs(D)-Math.abs(k));A-=H,k+=H}}else{var Q=[a.scale(P[0]),a.scale(P[1])],Y=Q[0],re=Q[1];if(R=Y,A=D8({axis:i,ticks:c,bandSize:o,offset:h.offset,entry:M,index:N}),O=re-Y,k=h.size,T={x:a.x,y:A,width:a.width,height:k},Math.abs(D)>0&&Math.abs(O)<Math.abs(D)){var G=_r(O||D)*(Math.abs(D)-Math.abs(O));O+=G}}return Ft(Ft(Ft({},M),{},{x:R,y:A,width:O,height:k,value:l?P:P[1],payload:M,background:T},S&&S[N]&&S[N].props),{},{tooltipPayload:[z8(n,M)],tooltipPosition:{x:R+O/2,y:A+k/2}})});return Ft({data:C,layout:g},f)});function Lu(e){"@babel/helpers - typeof";return Lu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lu(e)}function Kbe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function x9(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_9(r.key),r)}}function Xbe(e,t,n){return t&&x9(e.prototype,t),n&&x9(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function w9(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Cr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?w9(Object(n),!0).forEach(function(r){$h(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w9(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function $h(e,t,n){return t=_9(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _9(e){var t=Qbe(e,"string");return Lu(t)=="symbol"?t:t+""}function Qbe(e,t){if(Lu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Lu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Jbe=function(e,t,n,r,o){var a=e.width,i=e.height,s=e.layout,c=e.children,l=Object.keys(t),u={left:n.left,leftMirror:n.left,right:a-n.right,rightMirror:a-n.right,top:n.top,topMirror:n.top,bottom:i-n.bottom,bottomMirror:i-n.bottom},d=!!zn(c,fi);return l.reduce(function(f,h){var g=t[h],m=g.orientation,v=g.domain,b=g.padding,x=b===void 0?{}:b,_=g.mirror,w=g.reversed,j="".concat(m).concat(_?"Mirror":""),E,S,C,M,N;if(g.type==="number"&&(g.padding==="gap"||g.padding==="no-gap")){var P=v[1]-v[0],R=1/0,A=g.categoricalDomain.sort();if(A.forEach(function(H,Q){Q>0&&(R=Math.min((H||0)-(A[Q-1]||0),R))}),Number.isFinite(R)){var O=R/P,k=g.layout==="vertical"?n.height:n.width;if(g.padding==="gap"&&(E=O*k/2),g.padding==="no-gap"){var T=ti(e.barCategoryGap,O*k),D=O*k/2;E=D-T-(D-T)/k*T}}}r==="xAxis"?S=[n.left+(x.left||0)+(E||0),n.left+n.width-(x.right||0)-(E||0)]:r==="yAxis"?S=s==="horizontal"?[n.top+n.height-(x.bottom||0),n.top+(x.top||0)]:[n.top+(x.top||0)+(E||0),n.top+n.height-(x.bottom||0)-(E||0)]:S=g.range,w&&(S=[S[1],S[0]]);var I=Sye(g,o,d),L=I.scale,B=I.realScaleType;L.domain(v).range(S),Cye(L);var V=Rye(L,Cr(Cr({},g),{},{realScaleType:B}));r==="xAxis"?(N=m==="top"&&!_||m==="bottom"&&_,C=n.left,M=u[j]-N*g.height):r==="yAxis"&&(N=m==="left"&&!_||m==="right"&&_,C=u[j]-N*g.width,M=n.top);var F=Cr(Cr(Cr({},g),V),{},{realScaleType:B,x:C,y:M,scale:L,width:r==="xAxis"?n.width:g.width,height:r==="yAxis"?n.height:g.height});return F.bandSize=wh(F,V),!g.hide&&r==="xAxis"?u[j]+=(N?-1:1)*F.height:g.hide||(u[j]+=(N?-1:1)*F.width),Cr(Cr({},f),{},$h({},h,F))},{})},j9=function(e,t){var n=e.x,r=e.y,o=t.x,a=t.y;return{x:Math.min(n,o),y:Math.min(r,a),width:Math.abs(o-n),height:Math.abs(a-r)}},Zbe=function(e){var t=e.x1,n=e.y1,r=e.x2,o=e.y2;return j9({x:t,y:n},{x:r,y:o})},E9=function(){function e(t){Kbe(this,e),this.scale=t}return Xbe(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.bandAware,o=n.position;if(t!==void 0){if(o)switch(o){case"start":return this.scale(t);case"middle":{var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+a}case"end":{var i=this.bandwidth?this.bandwidth():0;return this.scale(t)+i}default:return this.scale(t)}if(r){var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+s}return this.scale(t)}}},{key:"isInRange",value:function(t){var n=this.range(),r=n[0],o=n[n.length-1];return r<=o?t>=r&&t<=o:t>=o&&t<=r}}],[{key:"create",value:function(t){return new e(t)}}])}();$h(E9,"EPS",1e-4);var pE=function(e){var t=Object.keys(e).reduce(function(n,r){return Cr(Cr({},n),{},$h({},r,E9.create(e[r])))},{});return Cr(Cr({},t),{},{apply:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=r.bandAware,a=r.position;return Sbe(n,function(i,s){return t[s].apply(i,{bandAware:o,position:a})})},isInRange:function(n){return f9(n,function(r,o){return t[o].isInRange(r)})}})};function Gbe(e){return(e%180+180)%180}var exe=function(e){var t=e.width,n=e.height,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=Gbe(r),a=o*Math.PI/180,i=Math.atan(n/t),s=a>i&&a<Math.PI-i?n/Math.sin(a):t/Math.cos(a);return Math.abs(s)},hE,S9;function txe(){if(S9)return hE;S9=1;var e=Fr(),t=Sa(),n=xc();function r(o){return function(a,i,s){var c=Object(a);if(!t(a)){var l=e(i,3);a=n(a),i=function(d){return l(c[d],d,c)}}var u=o(a,i,s);return u>-1?c[l?a[u]:u]:void 0}}return hE=r,hE}var mE,C9;function nxe(){if(C9)return mE;C9=1;var e=M6(),t=Fr(),n=c5(),r=Math.max;function o(a,i,s){var c=a==null?0:a.length;if(!c)return-1;var l=s==null?0:n(s);return l<0&&(l=r(c+l,0)),e(a,t(i,3),l)}return mE=o,mE}var yE,O9;function rxe(){if(O9)return yE;O9=1;var e=txe(),t=nxe(),n=e(t);return yE=n,yE}var oxe=rxe();const axe=Qe(oxe);var ixe=h2(),sxe=Qe(ixe)(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),gE=y.createContext(void 0),vE=y.createContext(void 0),N9=y.createContext(void 0),M9=y.createContext({}),k9=y.createContext(void 0),P9=y.createContext(0),A9=y.createContext(0),T9=function(e){var t=e.state,n=t.xAxisMap,r=t.yAxisMap,o=t.offset,a=e.clipPathId,i=e.children,s=e.width,c=e.height,l=sxe(o);return U.createElement(gE.Provider,{value:n},U.createElement(vE.Provider,{value:r},U.createElement(M9.Provider,{value:o},U.createElement(N9.Provider,{value:l},U.createElement(k9.Provider,{value:a},U.createElement(P9.Provider,{value:c},U.createElement(A9.Provider,{value:s},i)))))))},cxe=function(){return y.useContext(k9)},R9=function(e){var t=y.useContext(gE);t==null&&li();var n=t[e];return n==null&&li(),n},lxe=function(){var e=y.useContext(gE);return fa(e)},uxe=function(){var e=y.useContext(vE),t=axe(e,function(n){return f9(n.domain,Number.isFinite)});return t||fa(e)},I9=function(e){var t=y.useContext(vE);t==null&&li();var n=t[e];return n==null&&li(),n},dxe=function(){var e=y.useContext(N9);return e},fxe=function(){return y.useContext(M9)},bE=function(){return y.useContext(A9)},xE=function(){return y.useContext(P9)};function Ys(e){"@babel/helpers - typeof";return Ys=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ys(e)}function pxe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hxe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,B9(r.key),r)}}function mxe(e,t,n){return t&&hxe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function yxe(e,t,n){return t=zh(t),gxe(e,D9()?Reflect.construct(t,n||[],zh(e).constructor):t.apply(e,n))}function gxe(e,t){if(t&&(Ys(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vxe(e)}function vxe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function D9(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(D9=function(){return!!e})()}function zh(e){return zh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},zh(e)}function bxe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&wE(e,t)}function wE(e,t){return wE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},wE(e,t)}function L9(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function F9(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?L9(Object(n),!0).forEach(function(r){_E(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L9(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function _E(e,t,n){return t=B9(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function B9(e){var t=xxe(e,"string");return Ys(t)=="symbol"?t:t+""}function xxe(e,t){if(Ys(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Ys(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wxe(e,t){return Sxe(e)||Exe(e,t)||jxe(e,t)||_xe()}function _xe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jxe(e,t){if(e){if(typeof e=="string")return $9(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $9(e,t)}}function $9(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Exe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,o,a,i,s=[],c=!0,l=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(c=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(u){l=!0,o=u}finally{try{if(!c&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return s}}function Sxe(e){if(Array.isArray(e))return e}function jE(){return jE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jE.apply(this,arguments)}var Cxe=function(e,t){var n;return U.isValidElement(e)?n=U.cloneElement(e,t):Ke(e)?n=e(t):n=U.createElement("line",jE({},t,{className:"recharts-reference-line-line"})),n},Oxe=function(e,t,n,r,o,a,i,s,c){var l=o.x,u=o.y,d=o.width,f=o.height;if(n){var h=c.y,g=e.y.apply(h,{position:a});if(Qr(c,"discard")&&!e.y.isInRange(g))return null;var m=[{x:l+d,y:g},{x:l,y:g}];return s==="left"?m.reverse():m}if(t){var v=c.x,b=e.x.apply(v,{position:a});if(Qr(c,"discard")&&!e.x.isInRange(b))return null;var x=[{x:b,y:u+f},{x:b,y:u}];return i==="top"?x.reverse():x}if(r){var _=c.segment,w=_.map(function(j){return e.apply(j,{position:a})});return Qr(c,"discard")&&_be(w,function(j){return!e.isInRange(j)})?null:w}return null};function Nxe(e){var t=e.x,n=e.y,r=e.segment,o=e.xAxisId,a=e.yAxisId,i=e.shape,s=e.className,c=e.alwaysShow,l=cxe(),u=R9(o),d=I9(a),f=dxe();if(!l||!f)return null;Ao(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var h=pE({x:u.scale,y:d.scale}),g=Vt(t),m=Vt(n),v=r&&r.length===2,b=Oxe(h,g,m,v,f,e.position,u.orientation,d.orientation,e);if(!b)return null;var x=wxe(b,2),_=x[0],w=_.x,j=_.y,E=x[1],S=E.x,C=E.y,M=Qr(e,"hidden")?"url(#".concat(l,")"):void 0,N=F9(F9({clipPath:M},rt(e,!0)),{},{x1:w,y1:j,x2:S,y2:C});return U.createElement(qt,{className:ut("recharts-reference-line",s)},Cxe(i,N),sn.renderCallByParent(e,Zbe({x1:w,y1:j,x2:S,y2:C})))}var EE=function(e){function t(){return pxe(this,t),yxe(this,t,arguments)}return bxe(t,e),mxe(t,[{key:"render",value:function(){return U.createElement(Nxe,this.props)}}])}(U.Component);_E(EE,"displayName","ReferenceLine"),_E(EE,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function SE(){return SE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},SE.apply(this,arguments)}function Ks(e){"@babel/helpers - typeof";return Ks=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ks(e)}function z9(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function V9(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?z9(Object(n),!0).forEach(function(r){Uh(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z9(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Mxe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kxe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,H9(r.key),r)}}function Pxe(e,t,n){return t&&kxe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Axe(e,t,n){return t=Vh(t),Txe(e,U9()?Reflect.construct(t,n||[],Vh(e).constructor):t.apply(e,n))}function Txe(e,t){if(t&&(Ks(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Rxe(e)}function Rxe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function U9(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(U9=function(){return!!e})()}function Vh(e){return Vh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Vh(e)}function Ixe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&CE(e,t)}function CE(e,t){return CE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},CE(e,t)}function Uh(e,t,n){return t=H9(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function H9(e){var t=Dxe(e,"string");return Ks(t)=="symbol"?t:t+""}function Dxe(e,t){if(Ks(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Ks(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Lxe=function(e){var t=e.x,n=e.y,r=e.xAxis,o=e.yAxis,a=pE({x:r.scale,y:o.scale}),i=a.apply({x:t,y:n},{bandAware:!0});return Qr(e,"discard")&&!a.isInRange(i)?null:i},Hh=function(e){function t(){return Mxe(this,t),Axe(this,t,arguments)}return Ixe(t,e),Pxe(t,[{key:"render",value:function(){var n=this.props,r=n.x,o=n.y,a=n.r,i=n.alwaysShow,s=n.clipPathId,c=Vt(r),l=Vt(o);if(Ao(i===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!c||!l)return null;var u=Lxe(this.props);if(!u)return null;var d=u.x,f=u.y,h=this.props,g=h.shape,m=h.className,v=Qr(this.props,"hidden")?"url(#".concat(s,")"):void 0,b=V9(V9({clipPath:v},rt(this.props,!0)),{},{cx:d,cy:f});return U.createElement(qt,{className:ut("recharts-reference-dot",m)},t.renderDot(g,b),sn.renderCallByParent(this.props,{x:d-a,y:f-a,width:2*a,height:2*a}))}}])}(U.Component);Uh(Hh,"displayName","ReferenceDot"),Uh(Hh,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1}),Uh(Hh,"renderDot",function(e,t){var n;return U.isValidElement(e)?n=U.cloneElement(e,t):Ke(e)?n=e(t):n=U.createElement(B$,SE({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),n});function OE(){return OE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},OE.apply(this,arguments)}function Xs(e){"@babel/helpers - typeof";return Xs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xs(e)}function W9(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function q9(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?W9(Object(n),!0).forEach(function(r){qh(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W9(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Fxe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Bxe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,K9(r.key),r)}}function $xe(e,t,n){return t&&Bxe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function zxe(e,t,n){return t=Wh(t),Vxe(e,Y9()?Reflect.construct(t,n||[],Wh(e).constructor):t.apply(e,n))}function Vxe(e,t){if(t&&(Xs(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Uxe(e)}function Uxe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Y9(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Y9=function(){return!!e})()}function Wh(e){return Wh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Wh(e)}function Hxe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&NE(e,t)}function NE(e,t){return NE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},NE(e,t)}function qh(e,t,n){return t=K9(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function K9(e){var t=Wxe(e,"string");return Xs(t)=="symbol"?t:t+""}function Wxe(e,t){if(Xs(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Xs(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var qxe=function(e,t,n,r,o){var a=o.x1,i=o.x2,s=o.y1,c=o.y2,l=o.xAxis,u=o.yAxis;if(!l||!u)return null;var d=pE({x:l.scale,y:u.scale}),f={x:e?d.x.apply(a,{position:"start"}):d.x.rangeMin,y:n?d.y.apply(s,{position:"start"}):d.y.rangeMin},h={x:t?d.x.apply(i,{position:"end"}):d.x.rangeMax,y:r?d.y.apply(c,{position:"end"}):d.y.rangeMax};return Qr(o,"discard")&&(!d.isInRange(f)||!d.isInRange(h))?null:j9(f,h)},Yh=function(e){function t(){return Fxe(this,t),zxe(this,t,arguments)}return Hxe(t,e),$xe(t,[{key:"render",value:function(){var n=this.props,r=n.x1,o=n.x2,a=n.y1,i=n.y2,s=n.className,c=n.alwaysShow,l=n.clipPathId;Ao(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var u=Vt(r),d=Vt(o),f=Vt(a),h=Vt(i),g=this.props.shape;if(!u&&!d&&!f&&!h&&!g)return null;var m=qxe(u,d,f,h,this.props);if(!m&&!g)return null;var v=Qr(this.props,"hidden")?"url(#".concat(l,")"):void 0;return U.createElement(qt,{className:ut("recharts-reference-area",s)},t.renderRect(g,q9(q9({clipPath:v},rt(this.props,!0)),m)),sn.renderCallByParent(this.props,m))}}])}(U.Component);qh(Yh,"displayName","ReferenceArea"),qh(Yh,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1}),qh(Yh,"renderRect",function(e,t){var n;return U.isValidElement(e)?n=U.cloneElement(e,t):Ke(e)?n=e(t):n=U.createElement(Xj,OE({},t,{className:"recharts-reference-area-rect"})),n});function X9(e,t,n){if(t<1)return[];if(t===1&&n===void 0)return e;for(var r=[],o=0;o<e.length;o+=t)r.push(e[o]);return r}function Yxe(e,t,n){var r={width:e.width+t.width,height:e.height+t.height};return exe(r,n)}function Kxe(e,t,n){var r=n==="width",o=e.x,a=e.y,i=e.width,s=e.height;return t===1?{start:r?o:a,end:r?o+i:a+s}:{start:r?o+i:a+s,end:r?o:a}}function Kh(e,t,n,r,o){if(e*t<e*r||e*t>e*o)return!1;var a=n();return e*(t-e*a/2-r)>=0&&e*(t+e*a/2-o)<=0}function Xxe(e,t){return X9(e,t+1)}function Qxe(e,t,n,r,o){for(var a=(r||[]).slice(),i=t.start,s=t.end,c=0,l=1,u=i,d=function(){var h=r==null?void 0:r[c];if(h===void 0)return{v:X9(r,l)};var g=c,m,v=function(){return m===void 0&&(m=n(h,g)),m},b=h.coordinate,x=c===0||Kh(e,b,v,u,s);x||(c=0,u=i,l+=1),x&&(u=b+e*(v()/2+o),c+=l)},f;l<=a.length;)if(f=d(),f)return f.v;return[]}function Fu(e){"@babel/helpers - typeof";return Fu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fu(e)}function Q9(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function cn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Q9(Object(n),!0).forEach(function(r){Jxe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q9(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Jxe(e,t,n){return t=Zxe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Zxe(e){var t=Gxe(e,"string");return Fu(t)=="symbol"?t:t+""}function Gxe(e,t){if(Fu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Fu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ewe(e,t,n,r,o){for(var a=(r||[]).slice(),i=a.length,s=t.start,c=t.end,l=function(d){var f=a[d],h,g=function(){return h===void 0&&(h=n(f,d)),h};if(d===i-1){var m=e*(f.coordinate+e*g()/2-c);a[d]=f=cn(cn({},f),{},{tickCoord:m>0?f.coordinate-m*e:f.coordinate})}else a[d]=f=cn(cn({},f),{},{tickCoord:f.coordinate});var v=Kh(e,f.tickCoord,g,s,c);v&&(c=f.tickCoord-e*(g()/2+o),a[d]=cn(cn({},f),{},{isShow:!0}))},u=i-1;u>=0;u--)l(u);return a}function twe(e,t,n,r,o,a){var i=(r||[]).slice(),s=i.length,c=t.start,l=t.end;if(a){var u=r[s-1],d=n(u,s-1),f=e*(u.coordinate+e*d/2-l);i[s-1]=u=cn(cn({},u),{},{tickCoord:f>0?u.coordinate-f*e:u.coordinate});var h=Kh(e,u.tickCoord,function(){return d},c,l);h&&(l=u.tickCoord-e*(d/2+o),i[s-1]=cn(cn({},u),{},{isShow:!0}))}for(var g=a?s-1:s,m=function(b){var x=i[b],_,w=function(){return _===void 0&&(_=n(x,b)),_};if(b===0){var j=e*(x.coordinate-e*w()/2-c);i[b]=x=cn(cn({},x),{},{tickCoord:j<0?x.coordinate-j*e:x.coordinate})}else i[b]=x=cn(cn({},x),{},{tickCoord:x.coordinate});var E=Kh(e,x.tickCoord,w,c,l);E&&(c=x.tickCoord+e*(w()/2+o),i[b]=cn(cn({},x),{},{isShow:!0}))},v=0;v<g;v++)m(v);return i}function ME(e,t,n){var r=e.tick,o=e.ticks,a=e.viewBox,i=e.minTickGap,s=e.orientation,c=e.interval,l=e.tickFormatter,u=e.unit,d=e.angle;if(!o||!o.length||!r)return[];if(he(c)||pa.isSsr)return Xxe(o,typeof c=="number"&&he(c)?c:0);var f=[],h=s==="top"||s==="bottom"?"width":"height",g=u&&h==="width"?eu(u,{fontSize:t,letterSpacing:n}):{width:0,height:0},m=function(x,_){var w=Ke(l)?l(x.value,_):x.value;return h==="width"?Yxe(eu(w,{fontSize:t,letterSpacing:n}),g,d):eu(w,{fontSize:t,letterSpacing:n})[h]},v=o.length>=2?_r(o[1].coordinate-o[0].coordinate):1,b=Kxe(a,v,h);return c==="equidistantPreserveStart"?Qxe(v,b,m,o,i):(c==="preserveStart"||c==="preserveStartEnd"?f=twe(v,b,m,o,i,c==="preserveStartEnd"):f=ewe(v,b,m,o,i),f.filter(function(x){return x.isShow}))}var nwe=["viewBox"],rwe=["viewBox"],owe=["ticks"];function Qs(e){"@babel/helpers - typeof";return Qs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qs(e)}function Js(){return Js=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Js.apply(this,arguments)}function J9(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function wn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?J9(Object(n),!0).forEach(function(r){AE(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J9(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function kE(e,t){if(e==null)return{};var n=awe(e,t),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function awe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function iwe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Z9(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ez(r.key),r)}}function swe(e,t,n){return t&&Z9(e.prototype,t),n&&Z9(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function cwe(e,t,n){return t=Xh(t),lwe(e,G9()?Reflect.construct(t,n||[],Xh(e).constructor):t.apply(e,n))}function lwe(e,t){if(t&&(Qs(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return uwe(e)}function uwe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function G9(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(G9=function(){return!!e})()}function Xh(e){return Xh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Xh(e)}function dwe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&PE(e,t)}function PE(e,t){return PE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},PE(e,t)}function AE(e,t,n){return t=ez(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ez(e){var t=fwe(e,"string");return Qs(t)=="symbol"?t:t+""}function fwe(e,t){if(Qs(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Qs(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Zs=function(e){function t(n){var r;return iwe(this,t),r=cwe(this,t,[n]),r.state={fontSize:"",letterSpacing:""},r}return dwe(t,e),swe(t,[{key:"shouldComponentUpdate",value:function(n,r){var o=n.viewBox,a=kE(n,nwe),i=this.props,s=i.viewBox,c=kE(i,rwe);return!Ss(o,s)||!Ss(a,c)||!Ss(r,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var r=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];r&&this.setState({fontSize:window.getComputedStyle(r).fontSize,letterSpacing:window.getComputedStyle(r).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var r=this.props,o=r.x,a=r.y,i=r.width,s=r.height,c=r.orientation,l=r.tickSize,u=r.mirror,d=r.tickMargin,f,h,g,m,v,b,x=u?-1:1,_=n.tickSize||l,w=he(n.tickCoord)?n.tickCoord:n.coordinate;switch(c){case"top":f=h=n.coordinate,m=a+ +!u*s,g=m-x*_,b=g-x*d,v=w;break;case"left":g=m=n.coordinate,h=o+ +!u*i,f=h-x*_,v=f-x*d,b=w;break;case"right":g=m=n.coordinate,h=o+ +u*i,f=h+x*_,v=f+x*d,b=w;break;default:f=h=n.coordinate,m=a+ +u*s,g=m+x*_,b=g+x*d,v=w;break}return{line:{x1:f,y1:g,x2:h,y2:m},tick:{x:v,y:b}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,r=n.orientation,o=n.mirror,a;switch(r){case"left":a=o?"start":"end";break;case"right":a=o?"end":"start";break;default:a="middle";break}return a}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,r=n.orientation,o=n.mirror,a="end";switch(r){case"left":case"right":a="middle";break;case"top":a=o?"start":"end";break;default:a=o?"end":"start";break}return a}},{key:"renderAxisLine",value:function(){var n=this.props,r=n.x,o=n.y,a=n.width,i=n.height,s=n.orientation,c=n.mirror,l=n.axisLine,u=wn(wn(wn({},rt(this.props,!1)),rt(l,!1)),{},{fill:"none"});if(s==="top"||s==="bottom"){var d=+(s==="top"&&!c||s==="bottom"&&c);u=wn(wn({},u),{},{x1:r,y1:o+d*i,x2:r+a,y2:o+d*i})}else{var f=+(s==="left"&&!c||s==="right"&&c);u=wn(wn({},u),{},{x1:r+f*a,y1:o,x2:r+f*a,y2:o+i})}return U.createElement("line",Js({},u,{className:ut("recharts-cartesian-axis-line",Kn(l,"className"))}))}},{key:"renderTicks",value:function(n,r,o){var a=this,i=this.props,s=i.tickLine,c=i.stroke,l=i.tick,u=i.tickFormatter,d=i.unit,f=ME(wn(wn({},this.props),{},{ticks:n}),r,o),h=this.getTickTextAnchor(),g=this.getTickVerticalAnchor(),m=rt(this.props,!1),v=rt(l,!1),b=wn(wn({},m),{},{fill:"none"},rt(s,!1)),x=f.map(function(_,w){var j=a.getTickLineCoord(_),E=j.line,S=j.tick,C=wn(wn(wn(wn({textAnchor:h,verticalAnchor:g},m),{},{stroke:"none",fill:c},v),S),{},{index:w,payload:_,visibleTicksCount:f.length,tickFormatter:u});return U.createElement(qt,Js({className:"recharts-cartesian-axis-tick",key:"tick-".concat(_.value,"-").concat(_.coordinate,"-").concat(_.tickCoord)},kp(a.props,_,w)),s&&U.createElement("line",Js({},b,E,{className:ut("recharts-cartesian-axis-tick-line",Kn(s,"className"))})),l&&t.renderTickItem(l,C,"".concat(Ke(u)?u(_.value,w):_.value).concat(d||"")))});return U.createElement("g",{className:"recharts-cartesian-axis-ticks"},x)}},{key:"render",value:function(){var n=this,r=this.props,o=r.axisLine,a=r.width,i=r.height,s=r.ticksGenerator,c=r.className,l=r.hide;if(l)return null;var u=this.props,d=u.ticks,f=kE(u,owe),h=d;return Ke(s)&&(h=d&&d.length>0?s(this.props):s(f)),a<=0||i<=0||!h||!h.length?null:U.createElement(qt,{className:ut("recharts-cartesian-axis",c),ref:function(g){n.layerReference=g}},o&&this.renderAxisLine(),this.renderTicks(h,this.state.fontSize,this.state.letterSpacing),sn.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(n,r,o){var a;return U.isValidElement(n)?a=U.cloneElement(n,r):Ke(n)?a=n(r):a=U.createElement(Qp,Js({},r,{className:"recharts-cartesian-axis-tick-value"}),o),a}}])}(y.Component);AE(Zs,"displayName","CartesianAxis"),AE(Zs,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var pwe=["x1","y1","x2","y2","key"],hwe=["offset"];function pi(e){"@babel/helpers - typeof";return pi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pi(e)}function tz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function ln(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?tz(Object(n),!0).forEach(function(r){mwe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tz(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function mwe(e,t,n){return t=ywe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ywe(e){var t=gwe(e,"string");return pi(t)=="symbol"?t:t+""}function gwe(e,t){if(pi(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(pi(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hi(){return hi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},hi.apply(this,arguments)}function nz(e,t){if(e==null)return{};var n=vwe(e,t),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function vwe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var bwe=function(e){var t=e.fill;if(!t||t==="none")return null;var n=e.fillOpacity,r=e.x,o=e.y,a=e.width,i=e.height,s=e.ry;return U.createElement("rect",{x:r,y:o,ry:s,width:a,height:i,stroke:"none",fill:t,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function rz(e,t){var n;if(U.isValidElement(e))n=U.cloneElement(e,t);else if(Ke(e))n=e(t);else{var r=t.x1,o=t.y1,a=t.x2,i=t.y2,s=t.key,c=nz(t,pwe),l=rt(c,!1);l.offset;var u=nz(l,hwe);n=U.createElement("line",hi({},u,{x1:r,y1:o,x2:a,y2:i,fill:"none",key:s}))}return n}function xwe(e){var t=e.x,n=e.width,r=e.horizontal,o=r===void 0?!0:r,a=e.horizontalPoints;if(!o||!a||!a.length)return null;var i=a.map(function(s,c){var l=ln(ln({},e),{},{x1:t,y1:s,x2:t+n,y2:s,key:"line-".concat(c),index:c});return rz(o,l)});return U.createElement("g",{className:"recharts-cartesian-grid-horizontal"},i)}function wwe(e){var t=e.y,n=e.height,r=e.vertical,o=r===void 0?!0:r,a=e.verticalPoints;if(!o||!a||!a.length)return null;var i=a.map(function(s,c){var l=ln(ln({},e),{},{x1:s,y1:t,x2:s,y2:t+n,key:"line-".concat(c),index:c});return rz(o,l)});return U.createElement("g",{className:"recharts-cartesian-grid-vertical"},i)}function _we(e){var t=e.horizontalFill,n=e.fillOpacity,r=e.x,o=e.y,a=e.width,i=e.height,s=e.horizontalPoints,c=e.horizontal,l=c===void 0?!0:c;if(!l||!t||!t.length)return null;var u=s.map(function(f){return Math.round(f+o-o)}).sort(function(f,h){return f-h});o!==u[0]&&u.unshift(0);var d=u.map(function(f,h){var g=!u[h+1],m=g?o+i-f:u[h+1]-f;if(m<=0)return null;var v=h%t.length;return U.createElement("rect",{key:"react-".concat(h),y:f,x:r,height:m,width:a,stroke:"none",fill:t[v],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return U.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function jwe(e){var t=e.vertical,n=t===void 0?!0:t,r=e.verticalFill,o=e.fillOpacity,a=e.x,i=e.y,s=e.width,c=e.height,l=e.verticalPoints;if(!n||!r||!r.length)return null;var u=l.map(function(f){return Math.round(f+a-a)}).sort(function(f,h){return f-h});a!==u[0]&&u.unshift(0);var d=u.map(function(f,h){var g=!u[h+1],m=g?a+s-f:u[h+1]-f;if(m<=0)return null;var v=h%r.length;return U.createElement("rect",{key:"react-".concat(h),x:f,y:i,width:m,height:c,stroke:"none",fill:r[v],fillOpacity:o,className:"recharts-cartesian-grid-bg"})});return U.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var Ewe=function(e,t){var n=e.xAxis,r=e.width,o=e.height,a=e.offset;return R8(ME(ln(ln(ln({},Zs.defaultProps),n),{},{ticks:zo(n,!0),viewBox:{x:0,y:0,width:r,height:o}})),a.left,a.left+a.width,t)},Swe=function(e,t){var n=e.yAxis,r=e.width,o=e.height,a=e.offset;return R8(ME(ln(ln(ln({},Zs.defaultProps),n),{},{ticks:zo(n,!0),viewBox:{x:0,y:0,width:r,height:o}})),a.top,a.top+a.height,t)},Gs={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function oz(e){var t,n,r,o,a,i,s=bE(),c=xE(),l=fxe(),u=ln(ln({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:Gs.stroke,fill:(n=e.fill)!==null&&n!==void 0?n:Gs.fill,horizontal:(r=e.horizontal)!==null&&r!==void 0?r:Gs.horizontal,horizontalFill:(o=e.horizontalFill)!==null&&o!==void 0?o:Gs.horizontalFill,vertical:(a=e.vertical)!==null&&a!==void 0?a:Gs.vertical,verticalFill:(i=e.verticalFill)!==null&&i!==void 0?i:Gs.verticalFill,x:he(e.x)?e.x:l.left,y:he(e.y)?e.y:l.top,width:he(e.width)?e.width:l.width,height:he(e.height)?e.height:l.height}),d=u.x,f=u.y,h=u.width,g=u.height,m=u.syncWithTicks,v=u.horizontalValues,b=u.verticalValues,x=lxe(),_=uxe();if(!he(h)||h<=0||!he(g)||g<=0||!he(d)||d!==+d||!he(f)||f!==+f)return null;var w=u.verticalCoordinatesGenerator||Ewe,j=u.horizontalCoordinatesGenerator||Swe,E=u.horizontalPoints,S=u.verticalPoints;if((!E||!E.length)&&Ke(j)){var C=v&&v.length,M=j({yAxis:_?ln(ln({},_),{},{ticks:C?v:_.ticks}):void 0,width:s,height:c,offset:l},C?!0:m);Ao(Array.isArray(M),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(pi(M),"]")),Array.isArray(M)&&(E=M)}if((!S||!S.length)&&Ke(w)){var N=b&&b.length,P=w({xAxis:x?ln(ln({},x),{},{ticks:N?b:x.ticks}):void 0,width:s,height:c,offset:l},N?!0:m);Ao(Array.isArray(P),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(pi(P),"]")),Array.isArray(P)&&(S=P)}return U.createElement("g",{className:"recharts-cartesian-grid"},U.createElement(bwe,{fill:u.fill,fillOpacity:u.fillOpacity,x:u.x,y:u.y,width:u.width,height:u.height,ry:u.ry}),U.createElement(xwe,hi({},u,{offset:l,horizontalPoints:E,xAxis:x,yAxis:_})),U.createElement(wwe,hi({},u,{offset:l,verticalPoints:S,xAxis:x,yAxis:_})),U.createElement(_we,hi({},u,{horizontalPoints:E})),U.createElement(jwe,hi({},u,{verticalPoints:S})))}oz.displayName="CartesianGrid";function ec(e){"@babel/helpers - typeof";return ec=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ec(e)}function Cwe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Owe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,sz(r.key),r)}}function Nwe(e,t,n){return t&&Owe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Mwe(e,t,n){return t=Qh(t),kwe(e,az()?Reflect.construct(t,n||[],Qh(e).constructor):t.apply(e,n))}function kwe(e,t){if(t&&(ec(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Pwe(e)}function Pwe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function az(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(az=function(){return!!e})()}function Qh(e){return Qh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Qh(e)}function Awe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&TE(e,t)}function TE(e,t){return TE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},TE(e,t)}function iz(e,t,n){return t=sz(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sz(e){var t=Twe(e,"string");return ec(t)=="symbol"?t:t+""}function Twe(e,t){if(ec(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(ec(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function RE(){return RE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},RE.apply(this,arguments)}function Rwe(e){var t=e.xAxisId,n=bE(),r=xE(),o=R9(t);return o==null?null:U.createElement(Zs,RE({},o,{className:ut("recharts-".concat(o.axisType," ").concat(o.axisType),o.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(a){return zo(a,!0)}}))}var Jh=function(e){function t(){return Cwe(this,t),Mwe(this,t,arguments)}return Awe(t,e),Nwe(t,[{key:"render",value:function(){return U.createElement(Rwe,this.props)}}])}(U.Component);iz(Jh,"displayName","XAxis"),iz(Jh,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function tc(e){"@babel/helpers - typeof";return tc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tc(e)}function Iwe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Dwe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,uz(r.key),r)}}function Lwe(e,t,n){return t&&Dwe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Fwe(e,t,n){return t=Zh(t),Bwe(e,cz()?Reflect.construct(t,n||[],Zh(e).constructor):t.apply(e,n))}function Bwe(e,t){if(t&&(tc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $we(e)}function $we(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function cz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(cz=function(){return!!e})()}function Zh(e){return Zh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Zh(e)}function zwe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&IE(e,t)}function IE(e,t){return IE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},IE(e,t)}function lz(e,t,n){return t=uz(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function uz(e){var t=Vwe(e,"string");return tc(t)=="symbol"?t:t+""}function Vwe(e,t){if(tc(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(tc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function DE(){return DE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},DE.apply(this,arguments)}var Uwe=function(e){var t=e.yAxisId,n=bE(),r=xE(),o=I9(t);return o==null?null:U.createElement(Zs,DE({},o,{className:ut("recharts-".concat(o.axisType," ").concat(o.axisType),o.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(a){return zo(a,!0)}}))},LE=function(e){function t(){return Iwe(this,t),Fwe(this,t,arguments)}return zwe(t,e),Lwe(t,[{key:"render",value:function(){return U.createElement(Uwe,this.props)}}])}(U.Component);lz(LE,"displayName","YAxis"),lz(LE,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function dz(e){return Ywe(e)||qwe(e)||Wwe(e)||Hwe()}function Hwe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Wwe(e,t){if(e){if(typeof e=="string")return FE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return FE(e,t)}}function qwe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Ywe(e){if(Array.isArray(e))return FE(e)}function FE(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var BE=function(e,t,n,r,o){var a=jr(e,EE),i=jr(e,Hh),s=[].concat(dz(a),dz(i)),c=jr(e,Yh),l="".concat(r,"Id"),u=r[0],d=t;if(s.length&&(d=s.reduce(function(g,m){if(m.props[l]===n&&Qr(m.props,"extendDomain")&&he(m.props[u])){var v=m.props[u];return[Math.min(g[0],v),Math.max(g[1],v)]}return g},d)),c.length){var f="".concat(u,"1"),h="".concat(u,"2");d=c.reduce(function(g,m){if(m.props[l]===n&&Qr(m.props,"extendDomain")&&he(m.props[f])&&he(m.props[h])){var v=m.props[f],b=m.props[h];return[Math.min(g[0],v,b),Math.max(g[1],v,b)]}return g},d)}return o&&o.length&&(d=o.reduce(function(g,m){return he(m)?[Math.min(g[0],m),Math.max(g[1],m)]:g},d)),d},fz={exports:{}},pz;function Kwe(){return pz||(pz=1,function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function o(c,l,u){this.fn=c,this.context=l,this.once=u||!1}function a(c,l,u,d,f){if(typeof u!="function")throw new TypeError("The listener must be a function");var h=new o(u,d||c,f),g=n?n+l:l;return c._events[g]?c._events[g].fn?c._events[g]=[c._events[g],h]:c._events[g].push(h):(c._events[g]=h,c._eventsCount++),c}function i(c,l){--c._eventsCount===0?c._events=new r:delete c._events[l]}function s(){this._events=new r,this._eventsCount=0}s.prototype.eventNames=function(){var c=[],l,u;if(this._eventsCount===0)return c;for(u in l=this._events)t.call(l,u)&&c.push(n?u.slice(1):u);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(l)):c},s.prototype.listeners=function(c){var l=n?n+c:c,u=this._events[l];if(!u)return[];if(u.fn)return[u.fn];for(var d=0,f=u.length,h=new Array(f);d<f;d++)h[d]=u[d].fn;return h},s.prototype.listenerCount=function(c){var l=n?n+c:c,u=this._events[l];return u?u.fn?1:u.length:0},s.prototype.emit=function(c,l,u,d,f,h){var g=n?n+c:c;if(!this._events[g])return!1;var m=this._events[g],v=arguments.length,b,x;if(m.fn){switch(m.once&&this.removeListener(c,m.fn,void 0,!0),v){case 1:return m.fn.call(m.context),!0;case 2:return m.fn.call(m.context,l),!0;case 3:return m.fn.call(m.context,l,u),!0;case 4:return m.fn.call(m.context,l,u,d),!0;case 5:return m.fn.call(m.context,l,u,d,f),!0;case 6:return m.fn.call(m.context,l,u,d,f,h),!0}for(x=1,b=new Array(v-1);x<v;x++)b[x-1]=arguments[x];m.fn.apply(m.context,b)}else{var _=m.length,w;for(x=0;x<_;x++)switch(m[x].once&&this.removeListener(c,m[x].fn,void 0,!0),v){case 1:m[x].fn.call(m[x].context);break;case 2:m[x].fn.call(m[x].context,l);break;case 3:m[x].fn.call(m[x].context,l,u);break;case 4:m[x].fn.call(m[x].context,l,u,d);break;default:if(!b)for(w=1,b=new Array(v-1);w<v;w++)b[w-1]=arguments[w];m[x].fn.apply(m[x].context,b)}}return!0},s.prototype.on=function(c,l,u){return a(this,c,l,u,!1)},s.prototype.once=function(c,l,u){return a(this,c,l,u,!0)},s.prototype.removeListener=function(c,l,u,d){var f=n?n+c:c;if(!this._events[f])return this;if(!l)return i(this,f),this;var h=this._events[f];if(h.fn)h.fn===l&&(!d||h.once)&&(!u||h.context===u)&&i(this,f);else{for(var g=0,m=[],v=h.length;g<v;g++)(h[g].fn!==l||d&&!h[g].once||u&&h[g].context!==u)&&m.push(h[g]);m.length?this._events[f]=m.length===1?m[0]:m:i(this,f)}return this},s.prototype.removeAllListeners=function(c){var l;return c?(l=n?n+c:c,this._events[l]&&i(this,l)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,e.exports=s}(fz)),fz.exports}var Xwe=Kwe();const Qwe=Qe(Xwe);var $E=new Qwe,zE="recharts.syncMouseEvents";function Bu(e){"@babel/helpers - typeof";return Bu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bu(e)}function Jwe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Zwe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,hz(r.key),r)}}function Gwe(e,t,n){return t&&Zwe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function VE(e,t,n){return t=hz(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hz(e){var t=e1e(e,"string");return Bu(t)=="symbol"?t:t+""}function e1e(e,t){if(Bu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Bu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var t1e=function(){function e(){Jwe(this,e),VE(this,"activeIndex",0),VE(this,"coordinateList",[]),VE(this,"layout","horizontal")}return Gwe(e,[{key:"setDetails",value:function(t){var n,r=t.coordinateList,o=r===void 0?null:r,a=t.container,i=a===void 0?null:a,s=t.layout,c=s===void 0?null:s,l=t.offset,u=l===void 0?null:l,d=t.mouseHandlerCallback,f=d===void 0?null:d;this.coordinateList=(n=o??this.coordinateList)!==null&&n!==void 0?n:[],this.container=i??this.container,this.layout=c??this.layout,this.offset=u??this.offset,this.mouseHandlerCallback=f??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(t){if(this.coordinateList.length!==0)switch(t.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(t){this.activeIndex=t}},{key:"spoofMouse",value:function(){var t,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var r=this.container.getBoundingClientRect(),o=r.x,a=r.y,i=r.height,s=this.coordinateList[this.activeIndex].coordinate,c=((t=window)===null||t===void 0?void 0:t.scrollX)||0,l=((n=window)===null||n===void 0?void 0:n.scrollY)||0,u=o+s+c,d=a+this.offset.top+i/2+l;this.mouseHandlerCallback({pageX:u,pageY:d})}}}])}();function n1e(e,t,n){if(n==="number"&&t===!0&&Array.isArray(e)){var r=e==null?void 0:e[0],o=e==null?void 0:e[1];if(r&&o&&he(r)&&he(o))return!0}return!1}function r1e(e,t,n,r){var o=r/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-o:n.left+.5,y:e==="horizontal"?n.top+.5:t.y-o,width:e==="horizontal"?r:n.width-1,height:e==="horizontal"?n.height-1:r}}function mz(e){var t=e.cx,n=e.cy,r=e.radius,o=e.startAngle,a=e.endAngle,i=en(t,n,r,o),s=en(t,n,r,a);return{points:[i,s],cx:t,cy:n,radius:r,startAngle:o,endAngle:a}}function o1e(e,t,n){var r,o,a,i;if(e==="horizontal")r=t.x,a=r,o=n.top,i=n.top+n.height;else if(e==="vertical")o=t.y,i=o,r=n.left,a=n.left+n.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var s=t.cx,c=t.cy,l=t.innerRadius,u=t.outerRadius,d=t.angle,f=en(s,c,l,d),h=en(s,c,u,d);r=f.x,o=f.y,a=h.x,i=h.y}else return mz(t);return[{x:r,y:o},{x:a,y:i}]}function $u(e){"@babel/helpers - typeof";return $u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$u(e)}function yz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Gh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?yz(Object(n),!0).forEach(function(r){a1e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yz(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function a1e(e,t,n){return t=i1e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i1e(e){var t=s1e(e,"string");return $u(t)=="symbol"?t:t+""}function s1e(e,t){if($u(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if($u(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function c1e(e){var t,n,r=e.element,o=e.tooltipEventType,a=e.isActive,i=e.activeCoordinate,s=e.activePayload,c=e.offset,l=e.activeTooltipIndex,u=e.tooltipAxisBandSize,d=e.layout,f=e.chartName,h=(t=r.props.cursor)!==null&&t!==void 0?t:(n=r.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!r||!h||!a||!i||f!=="ScatterChart"&&o!=="axis")return null;var g,m=o$;if(f==="ScatterChart")g=i,m=E0e;else if(f==="BarChart")g=r1e(d,i,c,u),m=Xj;else if(d==="radial"){var v=mz(i),b=v.cx,x=v.cy,_=v.radius,w=v.startAngle,j=v.endAngle;g={cx:b,cy:x,startAngle:w,endAngle:j,innerRadius:_,outerRadius:_},m=e$}else g={points:o1e(d,i,c)},m=o$;var E=Gh(Gh(Gh(Gh({stroke:"#ccc",pointerEvents:"none"},c),g),rt(h,!1)),{},{payload:s,payloadIndex:l,className:ut("recharts-tooltip-cursor",h.className)});return y.isValidElement(h)?y.cloneElement(h,E):y.createElement(m,E)}var l1e=["item"],u1e=["children","className","width","height","style","compact","title","desc"];function nc(e){"@babel/helpers - typeof";return nc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nc(e)}function rc(){return rc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rc.apply(this,arguments)}function gz(e,t){return p1e(e)||f1e(e,t)||xz(e,t)||d1e()}function d1e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function f1e(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,o,a,i,s=[],c=!0,l=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(c=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(u){l=!0,o=u}finally{try{if(!c&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return s}}function p1e(e){if(Array.isArray(e))return e}function vz(e,t){if(e==null)return{};var n=h1e(e,t),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function h1e(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function m1e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y1e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_z(r.key),r)}}function g1e(e,t,n){return t&&y1e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function v1e(e,t,n){return t=em(t),b1e(e,bz()?Reflect.construct(t,n||[],em(e).constructor):t.apply(e,n))}function b1e(e,t){if(t&&(nc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return x1e(e)}function x1e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(bz=function(){return!!e})()}function em(e){return em=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},em(e)}function w1e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&UE(e,t)}function UE(e,t){return UE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},UE(e,t)}function oc(e){return E1e(e)||j1e(e)||xz(e)||_1e()}function _1e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xz(e,t){if(e){if(typeof e=="string")return HE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return HE(e,t)}}function j1e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function E1e(e){if(Array.isArray(e))return HE(e)}function HE(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function wz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function ae(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?wz(Object(n),!0).forEach(function(r){Re(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wz(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Re(e,t,n){return t=_z(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _z(e){var t=S1e(e,"string");return nc(t)=="symbol"?t:t+""}function S1e(e,t){if(nc(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(nc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var C1e={xAxis:["bottom","top"],yAxis:["left","right"]},O1e={width:"100%",height:"100%"},jz={x:0,y:0};function tm(e){return e}var N1e=function(e,t){return t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius},M1e=function(e,t,n,r){var o=t.find(function(l){return l&&l.index===n});if(o){if(e==="horizontal")return{x:o.coordinate,y:r.y};if(e==="vertical")return{x:r.x,y:o.coordinate};if(e==="centric"){var a=o.coordinate,i=r.radius;return ae(ae(ae({},r),en(r.cx,r.cy,i,a)),{},{angle:a,radius:i})}var s=o.coordinate,c=r.angle;return ae(ae(ae({},r),en(r.cx,r.cy,s,c)),{},{angle:c,radius:s})}return jz},nm=function(e,t){var n=t.graphicalItems,r=t.dataStartIndex,o=t.dataEndIndex,a=(n??[]).reduce(function(i,s){var c=s.props.data;return c&&c.length?[].concat(oc(i),oc(c)):i},[]);return a.length>0?a:e&&e.length&&he(r)&&he(o)?e.slice(r,o+1):[]};function Ez(e){return e==="number"?[0,"auto"]:void 0}var WE=function(e,t,n,r){var o=e.graphicalItems,a=e.tooltipAxis,i=nm(t,e);return n<0||!o||!o.length||n>=i.length?null:o.reduce(function(s,c){var l,u=(l=c.props.data)!==null&&l!==void 0?l:t;u&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=n&&(u=u.slice(e.dataStartIndex,e.dataEndIndex+1));var d;if(a.dataKey&&!a.allowDuplicatedCategory){var f=u===void 0?i:u;d=p1(f,a.dataKey,r)}else d=u&&u[n]||i[n];return d?[].concat(oc(s),[z8(c,d)]):s},[])},Sz=function(e,t,n,r){var o=r||{x:e.chartX,y:e.chartY},a=N1e(o,n),i=e.orderedTooltipTicks,s=e.tooltipAxis,c=e.tooltipTicks,l=bye(a,i,c,s);if(l>=0&&c){var u=c[l]&&c[l].value,d=WE(e,t,l,u),f=M1e(n,i,l,o);return{activeTooltipIndex:l,activeLabel:u,activePayload:d,activeCoordinate:f}}return null},k1e=function(e,t){var n=t.axes,r=t.graphicalItems,o=t.axisType,a=t.axisIdKey,i=t.stackGroups,s=t.dataStartIndex,c=t.dataEndIndex,l=e.layout,u=e.children,d=e.stackOffset,f=T8(l,o);return n.reduce(function(h,g){var m,v=g.type.defaultProps!==void 0?ae(ae({},g.type.defaultProps),g.props):g.props,b=v.type,x=v.dataKey,_=v.allowDataOverflow,w=v.allowDuplicatedCategory,j=v.scale,E=v.ticks,S=v.includeHidden,C=v[a];if(h[C])return h;var M=nm(e.data,{graphicalItems:r.filter(function(V){var F,H=a in V.props?V.props[a]:(F=V.type.defaultProps)===null||F===void 0?void 0:F[a];return H===C}),dataStartIndex:s,dataEndIndex:c}),N=M.length,P,R,A;n1e(v.domain,_,b)&&(P=Pj(v.domain,null,_),f&&(b==="number"||j!=="auto")&&(A=bh(M,x,"category")));var O=Ez(b);if(!P||P.length===0){var k,T=(k=v.domain)!==null&&k!==void 0?k:O;if(x){if(P=bh(M,x,b),b==="category"&&f){var D=Ple(P);w&&D?(R=P,P=Ih(0,N)):w||(P=$8(T,P,g).reduce(function(V,F){return V.indexOf(F)>=0?V:[].concat(oc(V),[F])},[]))}else if(b==="category")w?P=P.filter(function(V){return V!==""&&!at(V)}):P=$8(T,P,g).reduce(function(V,F){return V.indexOf(F)>=0||F===""||at(F)?V:[].concat(oc(V),[F])},[]);else if(b==="number"){var I=Eye(M,r.filter(function(V){var F,H,Q=a in V.props?V.props[a]:(F=V.type.defaultProps)===null||F===void 0?void 0:F[a],Y="hide"in V.props?V.props.hide:(H=V.type.defaultProps)===null||H===void 0?void 0:H.hide;return Q===C&&(S||!Y)}),x,o,l);I&&(P=I)}f&&(b==="number"||j!=="auto")&&(A=bh(M,x,"category"))}else f?P=Ih(0,N):i&&i[C]&&i[C].hasStack&&b==="number"?P=d==="expand"?[0,1]:L8(i[C].stackGroups,s,c):P=A8(M,r.filter(function(V){var F=a in V.props?V.props[a]:V.type.defaultProps[a],H="hide"in V.props?V.props.hide:V.type.defaultProps.hide;return F===C&&(S||!H)}),b,l,!0);if(b==="number")P=BE(u,P,C,o,E),T&&(P=Pj(T,P,_));else if(b==="category"&&T){var L=T,B=P.every(function(V){return L.indexOf(V)>=0});B&&(P=L)}}return ae(ae({},h),{},Re({},C,ae(ae({},v),{},{axisType:o,domain:P,categoricalDomain:A,duplicateDomain:R,originalDomain:(m=v.domain)!==null&&m!==void 0?m:O,isCategorical:f,layout:l})))},{})},P1e=function(e,t){var n=t.graphicalItems,r=t.Axis,o=t.axisType,a=t.axisIdKey,i=t.stackGroups,s=t.dataStartIndex,c=t.dataEndIndex,l=e.layout,u=e.children,d=nm(e.data,{graphicalItems:n,dataStartIndex:s,dataEndIndex:c}),f=d.length,h=T8(l,o),g=-1;return n.reduce(function(m,v){var b=v.type.defaultProps!==void 0?ae(ae({},v.type.defaultProps),v.props):v.props,x=b[a],_=Ez("number");if(!m[x]){g++;var w;return h?w=Ih(0,f):i&&i[x]&&i[x].hasStack?(w=L8(i[x].stackGroups,s,c),w=BE(u,w,x,o)):(w=Pj(_,A8(d,n.filter(function(j){var E,S,C=a in j.props?j.props[a]:(E=j.type.defaultProps)===null||E===void 0?void 0:E[a],M="hide"in j.props?j.props.hide:(S=j.type.defaultProps)===null||S===void 0?void 0:S.hide;return C===x&&!M}),"number",l),r.defaultProps.allowDataOverflow),w=BE(u,w,x,o)),ae(ae({},m),{},Re({},x,ae(ae({axisType:o},r.defaultProps),{},{hide:!0,orientation:Kn(C1e,"".concat(o,".").concat(g%2),null),domain:w,originalDomain:_,isCategorical:h,layout:l})))}return m},{})},A1e=function(e,t){var n=t.axisType,r=n===void 0?"xAxis":n,o=t.AxisComp,a=t.graphicalItems,i=t.stackGroups,s=t.dataStartIndex,c=t.dataEndIndex,l=e.children,u="".concat(r,"Id"),d=jr(l,o),f={};return d&&d.length?f=k1e(e,{axes:d,graphicalItems:a,axisType:r,axisIdKey:u,stackGroups:i,dataStartIndex:s,dataEndIndex:c}):a&&a.length&&(f=P1e(e,{Axis:o,graphicalItems:a,axisType:r,axisIdKey:u,stackGroups:i,dataStartIndex:s,dataEndIndex:c})),f},T1e=function(e){var t=fa(e),n=zo(t,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:__(n,function(r){return r.coordinate}),tooltipAxis:t,tooltipAxisBandSize:wh(t,n)}},Cz=function(e){var t=e.children,n=e.defaultShowTooltip,r=zn(t,Ws),o=0,a=0;return e.data&&e.data.length!==0&&(a=e.data.length-1),r&&r.props&&(r.props.startIndex>=0&&(o=r.props.startIndex),r.props.endIndex>=0&&(a=r.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:o,dataEndIndex:a,activeTooltipIndex:-1,isTooltipActive:!!n}},R1e=function(e){return!e||!e.length?!1:e.some(function(t){var n=Po(t&&t.type);return n&&n.indexOf("Bar")>=0})},Oz=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},I1e=function(e,t){var n=e.props,r=e.graphicalItems,o=e.xAxisMap,a=o===void 0?{}:o,i=e.yAxisMap,s=i===void 0?{}:i,c=n.width,l=n.height,u=n.children,d=n.margin||{},f=zn(u,Ws),h=zn(u,Ms),g=Object.keys(s).reduce(function(w,j){var E=s[j],S=E.orientation;return!E.mirror&&!E.hide?ae(ae({},w),{},Re({},S,w[S]+E.width)):w},{left:d.left||0,right:d.right||0}),m=Object.keys(a).reduce(function(w,j){var E=a[j],S=E.orientation;return!E.mirror&&!E.hide?ae(ae({},w),{},Re({},S,Kn(w,"".concat(S))+E.height)):w},{top:d.top||0,bottom:d.bottom||0}),v=ae(ae({},m),g),b=v.bottom;f&&(v.bottom+=f.props.height||Ws.defaultProps.height),h&&t&&(v=_ye(v,r,n,t));var x=c-v.left-v.right,_=l-v.top-v.bottom;return ae(ae({brushBottom:b},v),{},{width:Math.max(x,0),height:Math.max(_,0)})},D1e=function(e,t){if(t==="xAxis")return e[t].width;if(t==="yAxis")return e[t].height},L1e=function(e){var t=e.chartName,n=e.GraphicalChild,r=e.defaultTooltipEventType,o=r===void 0?"axis":r,a=e.validateTooltipEventTypes,i=a===void 0?["axis"]:a,s=e.axisComponents,c=e.legendContent,l=e.formatAxisMap,u=e.defaultProps,d=function(m,v){var b=v.graphicalItems,x=v.stackGroups,_=v.offset,w=v.updateId,j=v.dataStartIndex,E=v.dataEndIndex,S=m.barSize,C=m.layout,M=m.barGap,N=m.barCategoryGap,P=m.maxBarSize,R=Oz(C),A=R.numericAxisName,O=R.cateAxisName,k=R1e(b),T=[];return b.forEach(function(D,I){var L=nm(m.data,{graphicalItems:[D],dataStartIndex:j,dataEndIndex:E}),B=D.type.defaultProps!==void 0?ae(ae({},D.type.defaultProps),D.props):D.props,V=B.dataKey,F=B.maxBarSize,H=B["".concat(A,"Id")],Q=B["".concat(O,"Id")],Y={},re=s.reduce(function(Le,st){var qe=v["".concat(st.axisType,"Map")],ct=B["".concat(st.axisType,"Id")];qe&&qe[ct]||st.axisType==="zAxis"||li();var Wt=qe[ct];return ae(ae({},Le),{},Re(Re({},st.axisType,Wt),"".concat(st.axisType,"Ticks"),zo(Wt)))},Y),G=re[O],q=re["".concat(O,"Ticks")],W=x&&x[H]&&x[H].hasStack&&Dye(D,x[H].stackGroups),Z=Po(D.type).indexOf("Bar")>=0,ee=wh(G,q),$=[],ie=k&&xye({barSize:S,stackGroups:x,totalSize:D1e(re,O)});if(Z){var ue,me,Te=at(F)?P:F,Ue=(ue=(me=wh(G,q,!0))!==null&&me!==void 0?me:Te)!==null&&ue!==void 0?ue:0;$=wye({barGap:M,barCategoryGap:N,bandSize:Ue!==ee?Ue:ee,sizeList:ie[Q],maxBarSize:Te}),Ue!==ee&&($=$.map(function(Le){return ae(ae({},Le),{},{position:ae(ae({},Le.position),{},{offset:Le.position.offset-Ue/2})})}))}var He=D&&D.type&&D.type.getComposedData;He&&T.push({props:ae(ae({},He(ae(ae({},re),{},{displayedData:L,props:m,dataKey:V,item:D,bandSize:ee,barPosition:$,offset:_,stackedData:W,layout:C,dataStartIndex:j,dataEndIndex:E}))),{},Re(Re(Re({key:D.key||"item-".concat(I)},A,re[A]),O,re[O]),"animationId",w)),childIndex:Vle(D,m.children),item:D})}),T},f=function(m,v){var b=m.props,x=m.dataStartIndex,_=m.dataEndIndex,w=m.updateId;if(!WL({props:b}))return null;var j=b.children,E=b.layout,S=b.stackOffset,C=b.data,M=b.reverseStackOrder,N=Oz(E),P=N.numericAxisName,R=N.cateAxisName,A=jr(j,n),O=Tye(C,A,"".concat(P,"Id"),"".concat(R,"Id"),S,M),k=s.reduce(function(B,V){var F="".concat(V.axisType,"Map");return ae(ae({},B),{},Re({},F,A1e(b,ae(ae({},V),{},{graphicalItems:A,stackGroups:V.axisType===P&&O,dataStartIndex:x,dataEndIndex:_}))))},{}),T=I1e(ae(ae({},k),{},{props:b,graphicalItems:A}),v==null?void 0:v.legendBBox);Object.keys(k).forEach(function(B){k[B]=l(b,k[B],T,B.replace("Map",""),t)});var D=k["".concat(R,"Map")],I=T1e(D),L=d(b,ae(ae({},k),{},{dataStartIndex:x,dataEndIndex:_,updateId:w,graphicalItems:A,stackGroups:O,offset:T}));return ae(ae({formattedGraphicalItems:L,graphicalItems:A,offset:T,stackGroups:O},I),k)},h=function(m){function v(b){var x,_,w;return m1e(this,v),w=v1e(this,v,[b]),Re(w,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Re(w,"accessibilityManager",new t1e),Re(w,"handleLegendBBoxUpdate",function(j){if(j){var E=w.state,S=E.dataStartIndex,C=E.dataEndIndex,M=E.updateId;w.setState(ae({legendBBox:j},f({props:w.props,dataStartIndex:S,dataEndIndex:C,updateId:M},ae(ae({},w.state),{},{legendBBox:j}))))}}),Re(w,"handleReceiveSyncEvent",function(j,E,S){if(w.props.syncId===j){if(S===w.eventEmitterSymbol&&typeof w.props.syncMethod!="function")return;w.applySyncEvent(E)}}),Re(w,"handleBrushChange",function(j){var E=j.startIndex,S=j.endIndex;if(E!==w.state.dataStartIndex||S!==w.state.dataEndIndex){var C=w.state.updateId;w.setState(function(){return ae({dataStartIndex:E,dataEndIndex:S},f({props:w.props,dataStartIndex:E,dataEndIndex:S,updateId:C},w.state))}),w.triggerSyncEvent({dataStartIndex:E,dataEndIndex:S})}}),Re(w,"handleMouseEnter",function(j){var E=w.getMouseInfo(j);if(E){var S=ae(ae({},E),{},{isTooltipActive:!0});w.setState(S),w.triggerSyncEvent(S);var C=w.props.onMouseEnter;Ke(C)&&C(S,j)}}),Re(w,"triggeredAfterMouseMove",function(j){var E=w.getMouseInfo(j),S=E?ae(ae({},E),{},{isTooltipActive:!0}):{isTooltipActive:!1};w.setState(S),w.triggerSyncEvent(S);var C=w.props.onMouseMove;Ke(C)&&C(S,j)}),Re(w,"handleItemMouseEnter",function(j){w.setState(function(){return{isTooltipActive:!0,activeItem:j,activePayload:j.tooltipPayload,activeCoordinate:j.tooltipPosition||{x:j.cx,y:j.cy}}})}),Re(w,"handleItemMouseLeave",function(){w.setState(function(){return{isTooltipActive:!1}})}),Re(w,"handleMouseMove",function(j){j.persist(),w.throttleTriggeredAfterMouseMove(j)}),Re(w,"handleMouseLeave",function(j){w.throttleTriggeredAfterMouseMove.cancel();var E={isTooltipActive:!1};w.setState(E),w.triggerSyncEvent(E);var S=w.props.onMouseLeave;Ke(S)&&S(E,j)}),Re(w,"handleOuterEvent",function(j){var E=zle(j),S=Kn(w.props,"".concat(E));if(E&&Ke(S)){var C,M;/.*touch.*/i.test(E)?M=w.getMouseInfo(j.changedTouches[0]):M=w.getMouseInfo(j),S((C=M)!==null&&C!==void 0?C:{},j)}}),Re(w,"handleClick",function(j){var E=w.getMouseInfo(j);if(E){var S=ae(ae({},E),{},{isTooltipActive:!0});w.setState(S),w.triggerSyncEvent(S);var C=w.props.onClick;Ke(C)&&C(S,j)}}),Re(w,"handleMouseDown",function(j){var E=w.props.onMouseDown;if(Ke(E)){var S=w.getMouseInfo(j);E(S,j)}}),Re(w,"handleMouseUp",function(j){var E=w.props.onMouseUp;if(Ke(E)){var S=w.getMouseInfo(j);E(S,j)}}),Re(w,"handleTouchMove",function(j){j.changedTouches!=null&&j.changedTouches.length>0&&w.throttleTriggeredAfterMouseMove(j.changedTouches[0])}),Re(w,"handleTouchStart",function(j){j.changedTouches!=null&&j.changedTouches.length>0&&w.handleMouseDown(j.changedTouches[0])}),Re(w,"handleTouchEnd",function(j){j.changedTouches!=null&&j.changedTouches.length>0&&w.handleMouseUp(j.changedTouches[0])}),Re(w,"triggerSyncEvent",function(j){w.props.syncId!==void 0&&$E.emit(zE,w.props.syncId,j,w.eventEmitterSymbol)}),Re(w,"applySyncEvent",function(j){var E=w.props,S=E.layout,C=E.syncMethod,M=w.state.updateId,N=j.dataStartIndex,P=j.dataEndIndex;if(j.dataStartIndex!==void 0||j.dataEndIndex!==void 0)w.setState(ae({dataStartIndex:N,dataEndIndex:P},f({props:w.props,dataStartIndex:N,dataEndIndex:P,updateId:M},w.state)));else if(j.activeTooltipIndex!==void 0){var R=j.chartX,A=j.chartY,O=j.activeTooltipIndex,k=w.state,T=k.offset,D=k.tooltipTicks;if(!T)return;if(typeof C=="function")O=C(D,j);else if(C==="value"){O=-1;for(var I=0;I<D.length;I++)if(D[I].value===j.activeLabel){O=I;break}}var L=ae(ae({},T),{},{x:T.left,y:T.top}),B=Math.min(R,L.x+L.width),V=Math.min(A,L.y+L.height),F=D[O]&&D[O].value,H=WE(w.state,w.props.data,O),Q=D[O]?{x:S==="horizontal"?D[O].coordinate:B,y:S==="horizontal"?V:D[O].coordinate}:jz;w.setState(ae(ae({},j),{},{activeLabel:F,activeCoordinate:Q,activePayload:H,activeTooltipIndex:O}))}else w.setState(j)}),Re(w,"renderCursor",function(j){var E,S=w.state,C=S.isTooltipActive,M=S.activeCoordinate,N=S.activePayload,P=S.offset,R=S.activeTooltipIndex,A=S.tooltipAxisBandSize,O=w.getTooltipEventType(),k=(E=j.props.active)!==null&&E!==void 0?E:C,T=w.props.layout,D=j.key||"_recharts-cursor";return U.createElement(c1e,{key:D,activeCoordinate:M,activePayload:N,activeTooltipIndex:R,chartName:t,element:j,isActive:k,layout:T,offset:P,tooltipAxisBandSize:A,tooltipEventType:O})}),Re(w,"renderPolarAxis",function(j,E,S){var C=Kn(j,"type.axisType"),M=Kn(w.state,"".concat(C,"Map")),N=j.type.defaultProps,P=N!==void 0?ae(ae({},N),j.props):j.props,R=M&&M[P["".concat(C,"Id")]];return y.cloneElement(j,ae(ae({},R),{},{className:ut(C,R.className),key:j.key||"".concat(E,"-").concat(S),ticks:zo(R,!0)}))}),Re(w,"renderPolarGrid",function(j){var E=j.props,S=E.radialLines,C=E.polarAngles,M=E.polarRadius,N=w.state,P=N.radiusAxisMap,R=N.angleAxisMap,A=fa(P),O=fa(R),k=O.cx,T=O.cy,D=O.innerRadius,I=O.outerRadius;return y.cloneElement(j,{polarAngles:Array.isArray(C)?C:zo(O,!0).map(function(L){return L.coordinate}),polarRadius:Array.isArray(M)?M:zo(A,!0).map(function(L){return L.coordinate}),cx:k,cy:T,innerRadius:D,outerRadius:I,key:j.key||"polar-grid",radialLines:S})}),Re(w,"renderLegend",function(){var j=w.state.formattedGraphicalItems,E=w.props,S=E.children,C=E.width,M=E.height,N=w.props.margin||{},P=C-(N.left||0)-(N.right||0),R=N8({children:S,formattedGraphicalItems:j,legendWidth:P,legendContent:c});if(!R)return null;var A=R.item,O=vz(R,l1e);return y.cloneElement(A,ae(ae({},O),{},{chartWidth:C,chartHeight:M,margin:N,onBBoxUpdate:w.handleLegendBBoxUpdate}))}),Re(w,"renderTooltip",function(){var j,E=w.props,S=E.children,C=E.accessibilityLayer,M=zn(S,qr);if(!M)return null;var N=w.state,P=N.isTooltipActive,R=N.activeCoordinate,A=N.activePayload,O=N.activeLabel,k=N.offset,T=(j=M.props.active)!==null&&j!==void 0?j:P;return y.cloneElement(M,{viewBox:ae(ae({},k),{},{x:k.left,y:k.top}),active:T,label:O,payload:T?A:[],coordinate:R,accessibilityLayer:C})}),Re(w,"renderBrush",function(j){var E=w.props,S=E.margin,C=E.data,M=w.state,N=M.offset,P=M.dataStartIndex,R=M.dataEndIndex,A=M.updateId;return y.cloneElement(j,{key:j.key||"_recharts-brush",onChange:xh(w.handleBrushChange,j.props.onChange),data:C,x:he(j.props.x)?j.props.x:N.left,y:he(j.props.y)?j.props.y:N.top+N.height+N.brushBottom-(S.bottom||0),width:he(j.props.width)?j.props.width:N.width,startIndex:P,endIndex:R,updateId:"brush-".concat(A)})}),Re(w,"renderReferenceElement",function(j,E,S){if(!j)return null;var C=w,M=C.clipPathId,N=w.state,P=N.xAxisMap,R=N.yAxisMap,A=N.offset,O=j.type.defaultProps||{},k=j.props,T=k.xAxisId,D=T===void 0?O.xAxisId:T,I=k.yAxisId,L=I===void 0?O.yAxisId:I;return y.cloneElement(j,{key:j.key||"".concat(E,"-").concat(S),xAxis:P[D],yAxis:R[L],viewBox:{x:A.left,y:A.top,width:A.width,height:A.height},clipPathId:M})}),Re(w,"renderActivePoints",function(j){var E=j.item,S=j.activePoint,C=j.basePoint,M=j.childIndex,N=j.isRange,P=[],R=E.props.key,A=E.item.type.defaultProps!==void 0?ae(ae({},E.item.type.defaultProps),E.item.props):E.item.props,O=A.activeDot,k=A.dataKey,T=ae(ae({index:M,dataKey:k,cx:S.x,cy:S.y,r:4,fill:Mj(E.item),strokeWidth:2,stroke:"#fff",payload:S.payload,value:S.value},rt(O,!1)),Mp(O));return P.push(v.renderActiveDot(O,T,"".concat(R,"-activePoint-").concat(M))),C?P.push(v.renderActiveDot(O,ae(ae({},T),{},{cx:C.x,cy:C.y}),"".concat(R,"-basePoint-").concat(M))):N&&P.push(null),P}),Re(w,"renderGraphicChild",function(j,E,S){var C=w.filterFormatItem(j,E,S);if(!C)return null;var M=w.getTooltipEventType(),N=w.state,P=N.isTooltipActive,R=N.tooltipAxis,A=N.activeTooltipIndex,O=N.activeLabel,k=w.props.children,T=zn(k,qr),D=C.props,I=D.points,L=D.isRange,B=D.baseLine,V=C.item.type.defaultProps!==void 0?ae(ae({},C.item.type.defaultProps),C.item.props):C.item.props,F=V.activeDot,H=V.hide,Q=V.activeBar,Y=V.activeShape,re=!!(!H&&P&&T&&(F||Q||Y)),G={};M!=="axis"&&T&&T.props.trigger==="click"?G={onClick:xh(w.handleItemMouseEnter,j.props.onClick)}:M!=="axis"&&(G={onMouseLeave:xh(w.handleItemMouseLeave,j.props.onMouseLeave),onMouseEnter:xh(w.handleItemMouseEnter,j.props.onMouseEnter)});var q=y.cloneElement(j,ae(ae({},C.props),G));function W(qe){return typeof R.dataKey=="function"?R.dataKey(qe.payload):null}if(re)if(A>=0){var Z,ee;if(R.dataKey&&!R.allowDuplicatedCategory){var $=typeof R.dataKey=="function"?W:"payload.".concat(R.dataKey.toString());Z=p1(I,$,O),ee=L&&B&&p1(B,$,O)}else Z=I==null?void 0:I[A],ee=L&&B&&B[A];if(Y||Q){var ie=j.props.activeIndex!==void 0?j.props.activeIndex:A;return[y.cloneElement(j,ae(ae(ae({},C.props),G),{},{activeIndex:ie})),null,null]}if(!at(Z))return[q].concat(oc(w.renderActivePoints({item:C,activePoint:Z,basePoint:ee,childIndex:A,isRange:L})))}else{var ue,me=(ue=w.getItemByXY(w.state.activeCoordinate))!==null&&ue!==void 0?ue:{graphicalItem:q},Te=me.graphicalItem,Ue=Te.item,He=Ue===void 0?j:Ue,Le=Te.childIndex,st=ae(ae(ae({},C.props),G),{},{activeIndex:Le});return[y.cloneElement(He,st),null,null]}return L?[q,null,null]:[q,null]}),Re(w,"renderCustomized",function(j,E,S){return y.cloneElement(j,ae(ae({key:"recharts-customized-".concat(S)},w.props),w.state))}),Re(w,"renderMap",{CartesianGrid:{handler:tm,once:!0},ReferenceArea:{handler:w.renderReferenceElement},ReferenceLine:{handler:tm},ReferenceDot:{handler:w.renderReferenceElement},XAxis:{handler:tm},YAxis:{handler:tm},Brush:{handler:w.renderBrush,once:!0},Bar:{handler:w.renderGraphicChild},Line:{handler:w.renderGraphicChild},Area:{handler:w.renderGraphicChild},Radar:{handler:w.renderGraphicChild},RadialBar:{handler:w.renderGraphicChild},Scatter:{handler:w.renderGraphicChild},Pie:{handler:w.renderGraphicChild},Funnel:{handler:w.renderGraphicChild},Tooltip:{handler:w.renderCursor,once:!0},PolarGrid:{handler:w.renderPolarGrid,once:!0},PolarAngleAxis:{handler:w.renderPolarAxis},PolarRadiusAxis:{handler:w.renderPolarAxis},Customized:{handler:w.renderCustomized}}),w.clipPathId="".concat((x=b.id)!==null&&x!==void 0?x:Np("recharts"),"-clip"),w.throttleTriggeredAfterMouseMove=gm(w.triggeredAfterMouseMove,(_=b.throttleDelay)!==null&&_!==void 0?_:1e3/60),w.state={},w}return w1e(v,m),g1e(v,[{key:"componentDidMount",value:function(){var b,x;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(b=this.props.margin.left)!==null&&b!==void 0?b:0,top:(x=this.props.margin.top)!==null&&x!==void 0?x:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var b=this.props,x=b.children,_=b.data,w=b.height,j=b.layout,E=zn(x,qr);if(E){var S=E.props.defaultIndex;if(!(typeof S!="number"||S<0||S>this.state.tooltipTicks.length-1)){var C=this.state.tooltipTicks[S]&&this.state.tooltipTicks[S].value,M=WE(this.state,_,S,C),N=this.state.tooltipTicks[S].coordinate,P=(this.state.offset.top+w)/2,R=j==="horizontal",A=R?{x:N,y:P}:{y:N,x:P},O=this.state.formattedGraphicalItems.find(function(T){var D=T.item;return D.type.name==="Scatter"});O&&(A=ae(ae({},A),O.props.points[S].tooltipPosition),M=O.props.points[S].tooltipPayload);var k={activeTooltipIndex:S,isTooltipActive:!0,activeLabel:C,activePayload:M,activeCoordinate:A};this.setState(k),this.renderCursor(E),this.accessibilityManager.setIndex(S)}}}},{key:"getSnapshotBeforeUpdate",value:function(b,x){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==x.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==b.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==b.margin){var _,w;this.accessibilityManager.setDetails({offset:{left:(_=this.props.margin.left)!==null&&_!==void 0?_:0,top:(w=this.props.margin.top)!==null&&w!==void 0?w:0}})}return null}},{key:"componentDidUpdate",value:function(b){b1([zn(b.children,qr)],[zn(this.props.children,qr)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var b=zn(this.props.children,qr);if(b&&typeof b.props.shared=="boolean"){var x=b.props.shared?"axis":"item";return i.indexOf(x)>=0?x:o}return o}},{key:"getMouseInfo",value:function(b){if(!this.container)return null;var x=this.container,_=x.getBoundingClientRect(),w=Rfe(_),j={chartX:Math.round(b.pageX-w.left),chartY:Math.round(b.pageY-w.top)},E=_.width/x.offsetWidth||1,S=this.inRange(j.chartX,j.chartY,E);if(!S)return null;var C=this.state,M=C.xAxisMap,N=C.yAxisMap,P=this.getTooltipEventType();if(P!=="axis"&&M&&N){var R=fa(M).scale,A=fa(N).scale,O=R&&R.invert?R.invert(j.chartX):null,k=A&&A.invert?A.invert(j.chartY):null;return ae(ae({},j),{},{xValue:O,yValue:k})}var T=Sz(this.state,this.props.data,this.props.layout,S);return T?ae(ae({},j),T):null}},{key:"inRange",value:function(b,x){var _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,w=this.props.layout,j=b/_,E=x/_;if(w==="horizontal"||w==="vertical"){var S=this.state.offset,C=j>=S.left&&j<=S.left+S.width&&E>=S.top&&E<=S.top+S.height;return C?{x:j,y:E}:null}var M=this.state,N=M.angleAxisMap,P=M.radiusAxisMap;if(N&&P){var R=fa(N);return H8({x:j,y:E},R)}return null}},{key:"parseEventsOfWrapper",value:function(){var b=this.props.children,x=this.getTooltipEventType(),_=zn(b,qr),w={};_&&x==="axis"&&(_.props.trigger==="click"?w={onClick:this.handleClick}:w={onMouseEnter:this.handleMouseEnter,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd});var j=Mp(this.props,this.handleOuterEvent);return ae(ae({},j),w)}},{key:"addListener",value:function(){$E.on(zE,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){$E.removeListener(zE,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(b,x,_){for(var w=this.state.formattedGraphicalItems,j=0,E=w.length;j<E;j++){var S=w[j];if(S.item===b||S.props.key===b.key||x===Po(S.item.type)&&_===S.childIndex)return S}return null}},{key:"renderClipPath",value:function(){var b=this.clipPathId,x=this.state.offset,_=x.left,w=x.top,j=x.height,E=x.width;return U.createElement("defs",null,U.createElement("clipPath",{id:b},U.createElement("rect",{x:_,y:w,height:j,width:E})))}},{key:"getXScales",value:function(){var b=this.state.xAxisMap;return b?Object.entries(b).reduce(function(x,_){var w=gz(_,2),j=w[0],E=w[1];return ae(ae({},x),{},Re({},j,E.scale))},{}):null}},{key:"getYScales",value:function(){var b=this.state.yAxisMap;return b?Object.entries(b).reduce(function(x,_){var w=gz(_,2),j=w[0],E=w[1];return ae(ae({},x),{},Re({},j,E.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(b){var x;return(x=this.state.xAxisMap)===null||x===void 0||(x=x[b])===null||x===void 0?void 0:x.scale}},{key:"getYScaleByAxisId",value:function(b){var x;return(x=this.state.yAxisMap)===null||x===void 0||(x=x[b])===null||x===void 0?void 0:x.scale}},{key:"getItemByXY",value:function(b){var x=this.state,_=x.formattedGraphicalItems,w=x.activeItem;if(_&&_.length)for(var j=0,E=_.length;j<E;j++){var S=_[j],C=S.props,M=S.item,N=M.type.defaultProps!==void 0?ae(ae({},M.type.defaultProps),M.props):M.props,P=Po(M.type);if(P==="Bar"){var R=(C.data||[]).find(function(T){return h0e(b,T)});if(R)return{graphicalItem:S,payload:R}}else if(P==="RadialBar"){var A=(C.data||[]).find(function(T){return H8(b,T)});if(A)return{graphicalItem:S,payload:A}}else if(Th(S,w)||Rh(S,w)||Tu(S,w)){var O=nbe({graphicalItem:S,activeTooltipItem:w,itemData:N.data}),k=N.activeIndex===void 0?O:N.activeIndex;return{graphicalItem:ae(ae({},S),{},{childIndex:k}),payload:Tu(S,w)?N.data[O]:S.props.data[O]}}}return null}},{key:"render",value:function(){var b=this;if(!WL(this))return null;var x=this.props,_=x.children,w=x.className,j=x.width,E=x.height,S=x.style,C=x.compact,M=x.title,N=x.desc,P=vz(x,u1e),R=rt(P,!1);if(C)return U.createElement(T9,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},U.createElement(w1,rc({},R,{width:j,height:E,title:M,desc:N}),this.renderClipPath(),YL(_,this.renderMap)));if(this.props.accessibilityLayer){var A,O;R.tabIndex=(A=this.props.tabIndex)!==null&&A!==void 0?A:0,R.role=(O=this.props.role)!==null&&O!==void 0?O:"application",R.onKeyDown=function(T){b.accessibilityManager.keyboardEvent(T)},R.onFocus=function(){b.accessibilityManager.focus()}}var k=this.parseEventsOfWrapper();return U.createElement(T9,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},U.createElement("div",rc({className:ut("recharts-wrapper",w),style:ae({position:"relative",cursor:"default",width:j,height:E},S)},k,{ref:function(T){b.container=T}}),U.createElement(w1,rc({},R,{width:j,height:E,title:M,desc:N,style:O1e}),this.renderClipPath(),YL(_,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(y.Component);Re(h,"displayName",t),Re(h,"defaultProps",ae({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},u)),Re(h,"getDerivedStateFromProps",function(m,v){var b=m.dataKey,x=m.data,_=m.children,w=m.width,j=m.height,E=m.layout,S=m.stackOffset,C=m.margin,M=v.dataStartIndex,N=v.dataEndIndex;if(v.updateId===void 0){var P=Cz(m);return ae(ae(ae({},P),{},{updateId:0},f(ae(ae({props:m},P),{},{updateId:0}),v)),{},{prevDataKey:b,prevData:x,prevWidth:w,prevHeight:j,prevLayout:E,prevStackOffset:S,prevMargin:C,prevChildren:_})}if(b!==v.prevDataKey||x!==v.prevData||w!==v.prevWidth||j!==v.prevHeight||E!==v.prevLayout||S!==v.prevStackOffset||!Ss(C,v.prevMargin)){var R=Cz(m),A={chartX:v.chartX,chartY:v.chartY,isTooltipActive:v.isTooltipActive},O=ae(ae({},Sz(v,x,E)),{},{updateId:v.updateId+1}),k=ae(ae(ae({},R),A),O);return ae(ae(ae({},k),f(ae({props:m},k),v)),{},{prevDataKey:b,prevData:x,prevWidth:w,prevHeight:j,prevLayout:E,prevStackOffset:S,prevMargin:C,prevChildren:_})}if(!b1(_,v.prevChildren)){var T,D,I,L,B=zn(_,Ws),V=B&&(T=(D=B.props)===null||D===void 0?void 0:D.startIndex)!==null&&T!==void 0?T:M,F=B&&(I=(L=B.props)===null||L===void 0?void 0:L.endIndex)!==null&&I!==void 0?I:N,H=V!==M||F!==N,Q=!at(x),Y=Q&&!H?v.updateId:v.updateId+1;return ae(ae({updateId:Y},f(ae(ae({props:m},v),{},{updateId:Y,dataStartIndex:V,dataEndIndex:F}),v)),{},{prevChildren:_,dataStartIndex:V,dataEndIndex:F})}return null}),Re(h,"renderActiveDot",function(m,v,b){var x;return y.isValidElement(m)?x=y.cloneElement(m,v):Ke(m)?x=m(v):x=U.createElement(B$,v),U.createElement(qt,{className:"recharts-active-dot",key:b},x)});var g=y.forwardRef(function(m,v){return U.createElement(h,rc({},m,{ref:v}))});return g.displayName=h.displayName,g},F1e=L1e({chartName:"BarChart",GraphicalChild:fi,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:Jh},{axisType:"yAxis",AxisComp:LE}],formatAxisMap:Jbe});const B1e={light:"",dark:".dark"},Nz=y.createContext(null);function Mz(){const e=y.useContext(Nz);if(!e)throw new Error("useChart must be used within a <ChartContainer />");return e}const kz=y.forwardRef(({id:e,className:t,children:n,config:r,...o},a)=>{const i=y.useId(),s=`chart-${e||i.replace(/:/g,"")}`;return p.jsx(Nz.Provider,{value:{config:r},children:p.jsxs("div",{"data-chart":s,ref:a,className:K("flex aspect-video justify-center text-xs",t),...o,children:[p.jsx($1e,{id:s,config:r}),p.jsx(Ofe,{children:n})]})})});kz.displayName="Chart";const $1e=({id:e,config:t})=>{const n=Object.entries(t).filter(([r,o])=>o.theme||o.color);return n.length?p.jsx("style",{dangerouslySetInnerHTML:{__html:Object.entries(B1e).map(([r,o])=>`
${o} [data-chart=${e}] {
${n.map(([a,i])=>{var c;const s=((c=i.theme)==null?void 0:c[r])||i.color;return s?`  --color-${a}: ${s};`:null}).join(`
`)}
}
`).join(`
`)}}):null},z1e=qr,Pz=y.forwardRef(({active:e,payload:t,className:n,indicator:r="dot",hideLabel:o=!1,hideIndicator:a=!1,label:i,labelFormatter:s,labelClassName:c,formatter:l,color:u,nameKey:d,labelKey:f},h)=>{const{config:g}=Mz(),m=y.useMemo(()=>{var j;if(o||!(t!=null&&t.length))return null;const[b]=t,x=`${f||b.dataKey||b.name||"value"}`,_=qE(g,b,x),w=!f&&typeof i=="string"?((j=g[i])==null?void 0:j.label)||i:_==null?void 0:_.label;return s?p.jsx("div",{className:K("font-medium",c),children:s(w,t)}):w?p.jsx("div",{className:K("font-medium",c),children:w}):null},[i,s,t,o,c,g,f]);if(!e||!(t!=null&&t.length))return null;const v=t.length===1&&r!=="dot";return p.jsxs("div",{ref:h,className:K("grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl",n),children:[v?null:m,p.jsx("div",{className:"grid gap-1.5",children:t.map((b,x)=>{const _=`${d||b.name||b.dataKey||"value"}`,w=qE(g,b,_),j=u||b.payload.fill||b.color;return p.jsx("div",{className:K("flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground",r==="dot"&&"items-center"),children:l&&(b==null?void 0:b.value)!==void 0&&b.name?l(b.value,b.name,b,x,b.payload):p.jsxs(p.Fragment,{children:[w!=null&&w.icon?p.jsx(w.icon,{}):!a&&p.jsx("div",{className:K("shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]",{"h-2.5 w-2.5":r==="dot","w-1":r==="line","w-0 border-[1.5px] border-dashed bg-transparent":r==="dashed","my-0.5":v&&r==="dashed"}),style:{"--color-bg":j,"--color-border":j}}),p.jsxs("div",{className:K("flex flex-1 justify-between leading-none",v?"items-end":"items-center"),children:[p.jsxs("div",{className:"grid gap-1.5",children:[v?m:null,p.jsx("span",{className:"text-muted-foreground",children:(w==null?void 0:w.label)||b.name})]}),b.value&&p.jsx("span",{className:"font-mono font-medium tabular-nums text-foreground",children:b.value.toLocaleString()})]})]})},b.dataKey)})})]})});Pz.displayName="ChartTooltip";const V1e=y.forwardRef(({className:e,hideIcon:t=!1,payload:n,verticalAlign:r="bottom",nameKey:o},a)=>{const{config:i}=Mz();return n!=null&&n.length?p.jsx("div",{ref:a,className:K("flex items-center justify-center gap-4",r==="top"?"pb-3":"pt-3",e),children:n.map(s=>{const c=`${o||s.dataKey||"value"}`,l=qE(i,s,c);return p.jsxs("div",{className:K("flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground"),children:[l!=null&&l.icon&&!t?p.jsx(l.icon,{}):p.jsx("div",{className:"h-2 w-2 shrink-0 rounded-[2px]",style:{backgroundColor:s.color}}),l==null?void 0:l.label]},s.value)})}):null});V1e.displayName="ChartLegend";function qE(e,t,n){if(typeof t!="object"||t===null)return;const r="payload"in t&&typeof t.payload=="object"&&t.payload!==null?t.payload:void 0;let o=n;return n in t&&typeof t[n]=="string"?o=t[n]:r&&n in r&&typeof r[n]=="string"&&(o=r[n]),o in e?e[o]:e[n]}const Az=e=>{const t=["Bytes","KB","MB","GB","TB"];if(e===void 0)return"Unknown size";if(e===0)return"0 Byte";const n=Math.floor(Math.log(e)/Math.log(1024));return`${Math.round(e/Math.pow(1024,n))} ${t[n]}`},U1e=y.memo(()=>{const{t:e}=Me("flows"),[t,n]=y.useState(),r=un(g=>g.cachedLLMURLs),o=Ze(g=>g.currentSession),[a,i]=y.useState(),[s,c]=y.useState(""),[l,u]=y.useState(),d=y.useMemo(()=>({nodes:{label:e("session_info_node.entities.nodes"),color:"#2563eb"},edges:{label:e("session_info_node.entities.edges"),color:"#34d399"},threads:{label:e("session_info_node.entities.threads"),color:"#fbbf24"},llms:{label:e("session_info_node.entities.llms"),color:"#f87171"},prompts:{label:e("session_info_node.entities.prompts"),color:"#a78bfa"},tools:{label:e("session_info_node.entities.tools"),color:"#ffcccb"},schemas:{label:e("session_info_node.entities.schemas"),color:"#ffb6c1"},vectorDatabases:{label:e("session_info_node.entities.vector_databases"),color:"#ff69b4"},jsonlDatas:{label:e("session_info_node.entities.jsonl_data"),color:"#ff1493"},csvDatas:{label:e("session_info_node.entities.csv_data"),color:"#db7093"}}),[e]);y.useEffect(()=>{vt(async()=>{const{functionCallingModelIds:g,prebuiltAppConfig:m}=await import("./index-CSFZaYIn.js").then(async v=>(await v.__tla,v));return{functionCallingModelIds:g,prebuiltAppConfig:m}},__vite__mapDeps([3,1,2])).then(({functionCallingModelIds:g,prebuiltAppConfig:m})=>{n(r==null?void 0:r.map(v=>{const b=m.model_list.find(x=>v.includes(x.model));if(b)return{model_id:(b==null?void 0:b.model_id)||"",info:b,isFunctionCalling:g.includes((b==null?void 0:b.model_id)||"")}}))})},[r,o==null?void 0:o.id]);const f=y.useCallback(async()=>{navigator.storage.estimate().then(g=>{g&&c(e("session_info_node.used_bytes",{used:Az(g.usage),total:Az(g==null?void 0:g.quota)}))}),o!=null&&o.id&&(Promise.all([ce("FlowNode").findOne({where:{session_id:o==null?void 0:o.id},order:{updated_at:"DESC"}}),ce("FlowEdge").findOne({where:{session_id:o==null?void 0:o.id},order:{updated_at:"DESC"}}),ce("Thread").findOne({where:{session_id:o==null?void 0:o.id},order:{updated_at:"DESC"}}),ce("Prompt").findOne({where:{session_id:o==null?void 0:o.id},order:{updated_at:"DESC"}}),ce("LLM").findOne({where:{session_id:o==null?void 0:o.id},order:{updated_at:"DESC"}}),ce("Schema").findOne({where:{session_id:o==null?void 0:o.id},order:{updated_at:"DESC"}}),ce("ToolDefinition").findOne({where:{session_id:o==null?void 0:o.id},order:{updated_at:"DESC"}}),ce("VectorDatabase").findOne({where:{session_id:o==null?void 0:o.id},order:{updated_at:"DESC"}}),ce("JSONLData").findOne({where:{session_id:o==null?void 0:o.id},order:{updated_at:"DESC"}}),ce("CSVData").findOne({where:{session_id:o==null?void 0:o.id},order:{updated_at:"DESC"}})]).then(g=>{const m=g.reduce((v,b)=>b!=null&&b.updated_at&&(!v||new Date(b.updated_at)>v)?new Date(b.updated_at):v,o.updated_at?new Date(o.updated_at):void 0);i(m)}),Promise.all([ce("FlowNode").count({where:{session_id:o==null?void 0:o.id}}),ce("FlowEdge").count({where:{session_id:o==null?void 0:o.id}}),ce("Thread").count({where:{session_id:o==null?void 0:o.id}}),ce("Prompt").count({where:{session_id:o==null?void 0:o.id}}),ce("LLM").count({where:{session_id:o==null?void 0:o.id}}),ce("ToolDefinition").count({where:{session_id:o==null?void 0:o.id}}),ce("Schema").count({where:{session_id:o==null?void 0:o.id}}),ce("VectorDatabase").count({where:{session_id:o==null?void 0:o.id}}),ce("JSONLData").count({where:{session_id:o==null?void 0:o.id}}),ce("CSVData").count({where:{session_id:o==null?void 0:o.id}})]).then(([g,m,v,b,x,_,w,j,E,S])=>{u([{name:e("session_info_node.count_info.title"),nodes:g||0,edges:m||0,threads:v||0,prompts:b||0,llms:x||0,tools:_||0,schemas:w||0,vectorDatabases:j||0,jsonlDatas:E||0,csvDatas:S||0}])}))},[o==null?void 0:o.id,o==null?void 0:o.updated_at,e]),h=y.useCallback(()=>{f()},[f]);return y.useEffect(()=>{f()},[f]),p.jsxs(Tt,{className:"w-96",children:[p.jsxs(gn,{children:[p.jsx(Cn,{children:e("session_info_node.title")}),p.jsx(TD,{children:a||o!=null&&o.updated_at?vje(a||(o==null?void 0:o.updated_at)).fromNow():""})]}),p.jsxs(vn,{className:"grid gap-4",children:[p.jsx("div",{className:"flex items-center space-x-4 rounded-md border p-4",children:p.jsxs("div",{className:"flex-1 space-y-1",children:[p.jsx("p",{className:"text-sm font-medium leading-none",children:e("session_info_node.disk_size")}),p.jsx("p",{className:"text-sm text-muted-foreground",children:s})]})}),p.jsx("div",{className:"flex items-center space-x-4 rounded-md border p-4",children:p.jsxs("div",{className:"flex-1 space-y-1",children:[p.jsxs("div",{className:"text-sm font-medium leading-none",children:[e("session_info_node.cached_llms"),p.jsx(on,{className:"ml-2",children:(t==null?void 0:t.length)||0})]}),t==null?void 0:t.map(g=>p.jsxs("div",{className:"text-sm text-muted-foreground gap-1",children:[g==null?void 0:g.model_id,p.jsx("div",{className:"max-w-full gap-1 flex flex-wrap mt-1",children:p.jsx(Dl,{model:g==null?void 0:g.info,isFunctionCalling:(g==null?void 0:g.isFunctionCalling)||!1,isCached:!0})})]},g==null?void 0:g.model_id))]})}),p.jsx("div",{children:p.jsx(kz,{config:d,className:"min-h-28 w-full",children:p.jsxs(F1e,{accessibilityLayer:!0,data:l,children:[p.jsx(oz,{vertical:!1}),p.jsx(Jh,{dataKey:"name",tickLine:!1,tickMargin:10,axisLine:!1}),p.jsx(z1e,{content:p.jsx(Pz,{})}),Object.entries(d).map(([g,m])=>p.jsx(fi,{dataKey:g,fill:m.color,radius:4},g))]})})})]}),p.jsx(oa,{children:p.jsxs(ot,{className:"w-full",onClick:h,children:[p.jsx(le,{size:24,name:"refresh-ccw"}),e("session_info_node.reload")]})})]})}),H1e=e=>{const t=y.useCallback(async({edgeId:n})=>{try{return{deleteEdgeId:n}}catch{return{deleteEdgeId:n}}},[]);dn(e,t)},W1e=y.memo(e=>{var c,l;const{t}=Me("flows"),{id:n,data:r,isConnectable:o}=e,a=y.useRef(!1),i=fn(n),s=Ae(u=>u.updateNodes);return H1e(n),y.useEffect(()=>{var d;const u=r==null?void 0:r.entity;!u||!i||a.current||(d=u==null?void 0:u.schema_items)!=null&&d.length||r.loaded||(a.current=!0,ce("SchemaItem").find({where:{schema_id:u.id}}).then(f=>{s([{id:i.id,type:"replace",item:{...i,data:{...(i==null?void 0:i.data)||{},loaded:!0,entity:{...r.entity,schema_items:f}}}}])}).finally(()=>{a.current=!1}))},[r.entity,r.loaded,i,s]),p.jsxs("div",{children:[p.jsxs("div",{children:[p.jsx(an,{id:n}),p.jsxs(tw,{defaultValue:"account",className:"w-[400px]",children:[p.jsxs(op,{className:"grid w-full grid-cols-2",children:[p.jsx(br,{value:"account",children:t("schema_node.typescript")}),p.jsx(br,{value:"password",children:t("schema_node.zod")})]}),p.jsx(xr,{value:"account",children:p.jsx(Tt,{className:"p-4",children:p.jsx("pre",{className:"overflow-hidden break-words whitespace-pre-wrap",children:Poe(((c=r==null?void 0:r.entity)==null?void 0:c.schema_items)||[])})})}),p.jsx(xr,{value:"password",children:p.jsx(Tt,{className:"p-4 max-w-full",children:p.jsx("pre",{className:"overflow-hidden break-words whitespace-pre-wrap",children:AD(((l=r==null?void 0:r.entity)==null?void 0:l.schema_items)||[])})})})]})]}),p.jsx(et,{type:"source",position:fe.Bottom,id:"a",isConnectable:o})]})}),q1e=y.memo(e=>{var a,i;const{id:t,data:n,isConnectable:r}=e,o=y.useMemo(()=>{if(!(n!=null&&n.entity))return{headers:[],rows:[]};const s=pm(n.entity.csv);return{headers:iS(n.entity.headers),rows:s.map(c=>iS(c))}},[n==null?void 0:n.entity]);return p.jsxs("div",{children:[p.jsx(et,{type:"target",position:fe.Top,isConnectable:r}),p.jsxs("div",{children:[p.jsx(an,{id:t}),p.jsxs(Tt,{className:"min-w-32 min-h-16 p-4",children:[p.jsx(gn,{className:"!p-0",children:p.jsxs("div",{className:"pt-2 flex !flex-row",children:[p.jsx(le,{name:"file-spreadsheet",className:"mr-2"}),p.jsxs(Je,{className:"!font-medium leading-none tracking-tight pr-8",children:[oe.CSVData," ",(a=o==null?void 0:o.rows)!=null&&a.length?`(${((i=o==null?void 0:o.rows)==null?void 0:i.length)||0})`:""]})]})}),p.jsx(vn,{className:"pb-0",children:p.jsx(yp,{data:o.rows,headers:o.headers})})]})]}),p.jsx(et,{type:"source",position:fe.Bottom,id:"a",isConnectable:r})]})}),Y1e=e=>{const t=Ae(r=>r.createOrUpdateFlowEdge),n=y.useCallback(async({edgeId:r,source:o,target:a,connection:i})=>{try{if((o==null?void 0:o.type)===oe.Schema&&(a==null?void 0:a.type)===oe.ToolDefinition){await t({source:i.source,target:i.target,sourceHandle:i.sourceHandle,targetHandle:i.targetHandle});return}return{deleteEdgeId:r}}catch{return{deleteEdgeId:r}}},[t]);dn(e,n)},K1e=y.memo(({id:e,data:t,isConnectable:n})=>{var r,o;return Y1e(e),p.jsxs("div",{children:[p.jsx(et,{type:"target",position:fe.Top,isConnectable:n}),p.jsx("div",{children:p.jsxs(Mo,{className:"flex justify-center",children:[p.jsx(le,{size:24,name:"wrench"}),p.jsxs("div",{className:"ml-2",children:[p.jsx(ko,{children:`${((r=t.entity)==null?void 0:r.name)||""}`}),p.jsx(_s,{children:`${((o=t.entity)==null?void 0:o.description)||""}`})]})]})}),p.jsx(et,{type:"source",position:fe.Bottom,id:"a",isConnectable:n})]})}),X1e=e=>{const t=y.useCallback(async({edgeId:n})=>({deleteEdgeId:n}),[]);dn(e,t)},Q1e=y.memo(e=>{const{id:t,data:n,isConnectable:r}=e;return X1e(t),p.jsxs("div",{children:[p.jsx(et,{type:"target",position:fe.Top,isConnectable:r}),p.jsx("div",{children:p.jsxs(Mo,{className:"flex justify-center max-w-80",variant:"default",children:[p.jsx(jo,{name:n.model||"brain",className:"w-7 h-7"}),p.jsx("div",{className:"ml-2 pr-4 flex items-center",children:p.jsx(ko,{children:`${n.model||""}`})})]})}),p.jsx(et,{type:"source",position:fe.Bottom,id:"a",isConnectable:r})]})}),J1e=`Use the following pieces of context to answer the question at the end.
If you don't know the answer, just say that you don't know, don't try to make up an answer.
Use three sentences maximum and keep the answer as concise as possible.

{context}
`,Z1e=ja(e=>{const{source:t,documents:n}=e,r=Xt(),{toast:o}=$t(),{t:a}=Me("dialogs"),{loading:i,createPrompt:s}=uL(),c=async l=>{try{if(!l.content||!l.content.includes("{context}")){o({title:a("create_vector_database_prompt.errors.fill_context"),variant:"destructive"});return}const u=l.content.replace("{context}",n.map(d=>`<document>${d.pageContent}</document>`).join(`
`));return await s(t,{...l,content:u}),r.hide(),!0}catch{o({title:a("create_vector_database_prompt.errors.create_failed"),variant:"destructive"})}};return p.jsx($i,{open:r.visible,onOpenChange:r.hide,children:p.jsxs(Da,{className:"sm:max-w-[425px]",children:[p.jsx(La,{children:p.jsxs("div",{className:"flex",children:[p.jsx(le,{name:"file",className:"mr-2 h-4 w-4"}),p.jsx(Fa,{children:a("create_vector_database_prompt.title")})]})}),p.jsxs("div",{className:"flex gap-4 py-4 flex-col",children:[p.jsx(r1,{onSubmit:c,loading:i,hidePromptType:!0,defaultPromptRole:"system",defaultPromptContent:J1e}),p.jsxs("div",{className:"w-full border-0 text-gray-700 flex text-sm items-center",children:[p.jsx(le,{name:"info",className:"mr-2",size:14}),a("create_vector_database_prompt.fill_content_note")]})]})]})})}),G1e=()=>{const e=Ze(i=>{var s;return(s=i.currentSession)==null?void 0:s.id}),[t,n]=y.useState(!1),r=Ae(i=>i.createOrUpdateFlowNode),o=Ae(i=>i.createOrUpdateFlowEdge),a=y.useCallback(async({prompt:i,source:s,metadata:c})=>{var l,u,d,f;try{const h=(l=s==null?void 0:s.data)==null?void 0:l.entity;if(!h||!e)throw new Error("Source or Session not found");n(!0);const g=((u=s.position)==null?void 0:u.x)||0,m=(((d=s.position)==null?void 0:d.y)||0)+(((f=s.measured)==null?void 0:f.height)||0),v=await ce("Prompt").save({...i,status:(i==null?void 0:i.status)||eo.Started,role:(i==null?void 0:i.role)||Tn.System,type:(i==null?void 0:i.type)||Rn.Chat,content:(i==null?void 0:i.content)||"{context}",session_id:e});if(!v)throw new Error("Failed to save prompt");const b=await r({source_id:v.id,source_type:"Prompt",node_type:oe.Prompt,x:g,y:m+20});if(!b)throw new Error("Failed to save prompt node");const x=await ce("FlowNodePlaceholder").save({placeholder:`Retriever for ${h.name}`,placeholder_type:Oi.VECTOR_DATABASE_RETREIVER,session_id:e,metadata:c});if(!x)throw new Error("Failed to save node placeholder");const _=await r({source_id:x.id,source_type:"FlowNodePlaceholder",node_type:oe.PlaceHolder,x:g,y:m+40});if(!_)throw new Error("Failed to save node placeholder node");await o({source:b.id,target:_.id}),await o({source:s.id,target:_.id})}finally{n(!1)}},[e,r,o]);return{loading:t,createVectorDatabaseRetriever:a}},e_e=`Use the following pieces of context to answer the question at the end.
If you don't know the answer, just say that you don't know, don't try to make up an answer.
----------------
{context}
`,t_e=ja(e=>{const{source:t}=e,n=Xt(),{toast:r}=$t(),{t:o}=Me("dialogs"),[a,i]=y.useState(1),[s,c]=y.useState(void 0),{loading:l,createVectorDatabaseRetriever:u}=G1e(),d=async g=>{try{const m=g.content;if(!m||!m.includes("{context}")){r({title:o("create_vector_database_retriever.errors.fill_context"),variant:"destructive"});return}return await u({source:t,prompt:{content:m},metadata:{k:a,minimalScore:s}}),i(1),c(void 0),n.hide(),!0}catch{r({title:o("create_vector_database_retriever.errors.create_failed"),variant:"destructive"})}},f=g=>{i(g.target.value?Number(g.target.value):void 0)},h=g=>{c(g.target.value?Number(g.target.value):void 0)};return p.jsx($i,{open:n.visible,onOpenChange:n.hide,children:p.jsxs(Da,{className:"sm:max-w-[425px]",children:[p.jsx(La,{children:p.jsxs("div",{className:"flex",children:[p.jsx(le,{name:"file",className:"mr-2 h-4 w-4"}),p.jsx(Fa,{children:o("create_vector_database_retriever.title")})]})}),p.jsxs("div",{className:"flex gap-4 py-4 flex-col",children:[p.jsx(r1,{onSubmit:d,loading:l,hidePromptType:!0,defaultPromptRole:"system",defaultPromptContent:e_e}),p.jsxs(Tt,{children:[p.jsx(gn,{children:p.jsx(Cn,{children:o("create_vector_database_retriever.retriever_settings")})}),p.jsxs(vn,{children:[p.jsx(Je,{children:o("create_vector_database_retriever.retriever_k")}),p.jsx(hn,{value:a||"",type:"number",onChange:f,placeholder:o("create_vector_database_retriever.retriever_k_placeholder")}),p.jsx(Je,{children:o("create_vector_database_retriever.retriever_minimum_score")}),p.jsx(hn,{value:s||"",type:"number",onChange:h,placeholder:o("create_vector_database_retriever.retriever_minimum_score_placeholder")})]})]}),p.jsxs("div",{className:"w-full border-0 text-gray-700 flex text-sm items-center",children:[p.jsx(le,{name:"info",className:"mr-2",size:14}),o("create_vector_database_retriever.fill_content_note")]})]})]})})}),n_e=e=>{const t=Ae(o=>o.createOrUpdateFlowEdge),n=bi(o=>o.index),r=y.useCallback(async({edgeId:o,target:a,source:i})=>{var s,c;try{const l=(s=a==null?void 0:a.data)==null?void 0:s.entity;if((i==null?void 0:i.type)===oe.CSVData&&(a==null?void 0:a.type)===oe.VectorDatabase){const u=(c=i==null?void 0:i.data)==null?void 0:c.entity;if(!u||!l)return{deleteEdgeId:o};const{rows:d}=O7(u.headers,u.csv),f=d.map(h=>new Xu({pageContent:`${h.text}`}));await n({databaseId:l.id,dataSourceId:u.id,dataSourceType:"CSVData"},f),await t({source:i.id,target:a.id});return}return{deleteEdgeId:o}}catch{return{deleteEdgeId:o}}},[t,n]);dn(e,r)},r_e=e=>{const[t,n]=y.useState(!1),{t:r}=Me("flows"),{toast:o}=$t(),{getNode:a,getHandleConnections:i}=$n(),s=Ae(f=>f.updateNodes),c=bi(f=>f.index),l=bi(f=>f.similaritySearchWithScore),u=y.useCallback(async(f,h)=>{var g,m,v;try{const b=a(e);if(!b)return;const x=(g=b.data)==null?void 0:g.entity;if(!x){o({variant:"destructive",title:r("vector_database_node.errors.vector_database_not_found")});return}if(x.storage===or.DataNode){const _=(v=(m=i({nodeId:e,type:"target"}).map(w=>a(w.source)).find(w=>(w==null?void 0:w.type)&&[oe.JSONLData,oe.CSVData].includes(w==null?void 0:w.type)))==null?void 0:m.data)==null?void 0:v.entity;if(!_){o({variant:"destructive",title:r("vector_database_node.errors.data_node_not_found")});return}return n(!0),await l({databaseId:x.id,dataSourceId:_.id,dataSourceType:aS(_)},f,h==null?void 0:h.k)}else return n(!0),await l({databaseId:x.id},f,h==null?void 0:h.k)}catch{o({variant:"destructive",title:r("vector_database_node.errors.similarity_search_failed")})}finally{n(!1)}},[i,e,l,o,r,a]),d=y.useCallback(async(f,h)=>{var g,m,v,b;try{const x=a(e);if(!x)return;n(!0);const _=f.content?[new Xu({pageContent:f.content,id:f.id,metadata:{id:f.id}})]:f.documents;if(!(_!=null&&_.length)){o({variant:"destructive",title:r("vector_database_node.errors.content_not_found")});return}const w=(g=x.data)==null?void 0:g.entity;if(!w||!x){o({variant:"destructive",title:r("vector_database_node.errors.vector_database_not_found")});return}if(w.storage===or.DataNode){const j=i({nodeId:e,type:"target"}).map(N=>a(N.source)).find(N=>(N==null?void 0:N.type)&&[oe.JSONLData,oe.CSVData].includes(N==null?void 0:N.type)),E=(m=j==null?void 0:j.data)==null?void 0:m.entity;if(!E){o({variant:"destructive",title:r("vector_database_node.errors.data_node_not_found")});return}const S=aS(E),C=Sw(_,10);let M=0;for(const N of C){if((v=h==null?void 0:h.onProgressReport)==null||v.call(h,{handling:N.length,handled:M,total:_.length}),await c({databaseId:w.id,dataSourceId:E.id,dataSourceType:S},N),S&&j){const P=await ce(S).findOne({where:{id:E.id}});s([{type:"replace",id:j.id,item:{...j,data:{...j.data,entity:P}}}])}M+=N.length}}else{const j=Sw(_,10);let E=0;for(const S of j){(b=h==null?void 0:h.onProgressReport)==null||b.call(h,{handling:S.length,handled:E,total:_.length}),await c({databaseId:w.id},S);const C=await ce("VectorDatabase").findOne({where:{id:`${w.id}`}});s([{type:"replace",id:x.id,item:{...x,data:{...x.data,entity:C}}}]),E+=S.length}}}catch{o({variant:"destructive",title:r("vector_database_node.errors.similarity_search_failed")})}finally{n(!1)}},[i,e,c,o,r,a,s]);return{loading:t,indexData:d,similaritySearchWithScore:u}},o_e=y.memo(e=>{var E,S,C,M;const{t}=Me("flows"),[n,r]=y.useState(0),[o,a]=y.useState("search"),i=fn(e.id),{id:s,data:c,isConnectable:l}=e,{loading:u,similaritySearchWithScore:d,indexData:f}=r_e(s),h=Xt(Z1e),g=Xt(t_e);n_e(s);const m=y.useCallback(async(...N)=>{i&&await f(...N)},[f,i]),v=y.useCallback(async(N,P)=>{const R=N.trim(),A=await d(R,{k:P});if(A!=null&&A.length)return A},[d]),b=y.useCallback(N=>{h.show({source:i,documents:N.map(([P])=>P)})},[h,i]),x=y.useCallback(async()=>{g.show({source:i})},[g,i]),_=y.useCallback(async N=>{if(N.type.includes("text")||N.type.includes("txt")){const P=new FileReader;P.onload=async R=>{var O;const A=(O=R.target)==null?void 0:O.result;await m({content:A})},P.readAsText(N)}else if(N.type.endsWith("pdf")){const P=new Blob([N],{type:"application/pdf"}),R=await new RD(P,{pdfjs:async()=>{const A=await vt(()=>import("./pdf.min-DvqNLaJf.js").then(async O=>(await O.__tla,O)),__vite__mapDeps([5,1,2]));return await vt(()=>import("./pdf.worker.min-BGW7QZB1.js").then(async O=>(await O.__tla,O)),__vite__mapDeps([6,1,2])),A.GlobalWorkerOptions.workerSrc=new URL("pdfjs-dist/build/pdf.worker.min.js",import.meta.url).toString(),A},parsedItemSeparator:" "}).load();await m({documents:R},{onProgressReport:A=>{r((A.handled+A.handling)/A.total)}})}},[m]),w=y.useMemo(()=>{var R,A;if(!((R=c==null?void 0:c.entity)!=null&&R.raw))return{headers:[],rows:[]};const N=["content","embedding","metadata"],P=pm((A=c==null?void 0:c.entity)==null?void 0:A.raw);return{headers:N,rows:P.map(O=>{try{return JSON.parse(O)}catch{return[]}})}},[(E=c==null?void 0:c.entity)==null?void 0:E.raw]),j=y.useMemo(()=>{switch(o){case"search":return p.jsx(xr,{value:"search",children:p.jsx(W3,{loading:u,onSimilaritySearch:v,onCreatePrompt:b,onCreateRetriever:x})});case"new":return p.jsx(xr,{className:"min-w-80",value:"new",children:p.jsx(q3,{loading:u,onCreateData:m})});case"file":return p.jsx(xr,{value:"file",children:p.jsx(Y3,{loading:u,progress:n,onFileSubmit:_,fileOptions:{accept:".pdf,.txt,.text",maxSize:1}})});case"view":return p.jsx(xr,{value:"view",children:p.jsx(yp,{data:w.rows,headers:w.headers,limitLengthByColumns:{embedding:32}})})}},[m,b,x,_,v,u,o,n,w]);return p.jsxs("div",{className:"min-w-72",children:[p.jsx(et,{type:"target",position:fe.Top,isConnectable:l}),p.jsxs("div",{className:"max-w-full",children:[p.jsx(an,{id:s}),p.jsxs(Mo,{className:"flex justify-center",variant:"default",children:[p.jsx(le,{size:24,name:"database-zap"}),p.jsxs("div",{className:"ml-2 max-w-full",children:[p.jsx(ko,{children:`${((S=c.entity)==null?void 0:S.name)||""}`}),p.jsxs(tw,{value:o,onValueChange:a,defaultValue:"search",className:K("w-full mt-4"),children:[p.jsxs(op,{className:K("grid w-full grid-cols-3",((C=c.entity)==null?void 0:C.storage)===or.DatabaseNode?"grid-cols-4":"grid-cols-3"),children:[p.jsx(br,{value:"search",children:t("vector_database_node.search")}),p.jsx(br,{value:"new",children:t("vector_database_node.text")}),p.jsx(br,{value:"file",children:t("vector_database_node.file")}),((M=c.entity)==null?void 0:M.storage)===or.DatabaseNode?p.jsx(br,{value:"view",children:t("vector_database_node.view")}):void 0]}),j]})]})]})]}),p.jsx(et,{type:"source",position:fe.Bottom,id:"a",isConnectable:l})]})}),a_e={embedding:32},i_e=y.memo(e=>{var a,i,s;const{id:t,data:n,isConnectable:r}=e,o=y.useMemo(()=>{var u;if(!((u=n==null?void 0:n.entity)!=null&&u.jsonl))return{headers:[],rows:[]};const c=iS(n.entity.headers||""),l=pm(n.entity.jsonl);return{headers:c,rows:l.map(d=>{try{return JSON.parse(d)}catch{return[]}})}},[(a=n==null?void 0:n.entity)==null?void 0:a.jsonl,n.entity.headers]);return p.jsxs("div",{className:"min-w-80",children:[p.jsx(et,{type:"target",position:fe.Top,isConnectable:r}),p.jsxs("div",{children:[p.jsx(an,{id:t}),p.jsxs(Tt,{className:"min-w-32 min-h-16 p-4",children:[p.jsx(gn,{className:"!p-0",children:p.jsxs("div",{className:"pt-2 flex !flex-row",children:[p.jsx(le,{name:"file-json",className:"mr-2"}),p.jsxs(Je,{className:"!font-medium leading-none tracking-tight pr-8",children:[oe.JSONLData," ",(i=o==null?void 0:o.rows)!=null&&i.length?`(${((s=o==null?void 0:o.rows)==null?void 0:s.length)||0})`:""]})]})}),p.jsx(vn,{className:"pb-0",children:p.jsx(yp,{data:o.rows,headers:o.headers,limitLengthByColumns:a_e})})]})]}),p.jsx(et,{type:"source",position:fe.Bottom,id:"a",isConnectable:r})]})}),Tz=60,Rz=140,s_e=Zr("supports-backdrop-blur:bg-white/10 supports-backdrop-blur:dark:bg-black/10 mx-auto flex h-[58px] w-max gap-2 rounded-lg border p-2 backdrop-blur-md"),Iz=U.forwardRef(({className:e,children:t,magnification:n=Tz,distance:r=Rz,direction:o="bottom",...a},i)=>{const s=my(1/0),c=()=>U.Children.map(t,l=>U.isValidElement(l)&&l.type===zu?U.cloneElement(l,{...l.props,mouseX:s,magnification:n,distance:r}):l);return p.jsx(Hu.div,{ref:i,onMouseMove:l=>s.set(l.pageX),onMouseLeave:()=>s.set(1/0),...a,className:K(s_e({className:e}),{"items-start":o==="top","items-center":o==="middle","items-end":o==="bottom"}),children:c()})});Iz.displayName="Dock";const zu=({magnification:e=Tz,distance:t=Rz,mouseX:n,className:r,children:o,...a})=>{const i=y.useRef(null),s=aC(n||new bje,u=>{var f;const d=((f=i.current)==null?void 0:f.getBoundingClientRect())??{x:0,width:0};return u-d.x-d.width/2}),c=aC(s,[-t,0,t],[40,e,40]),l=K7(c,{mass:.1,stiffness:150,damping:12});return p.jsx(Hu.div,{ref:i,style:{width:l},className:K("flex aspect-square cursor-pointer items-center justify-center rounded-full",r),...a,children:o})};zu.displayName="DockIcon";let Dz,Lz,Fz,Bz,rm,$z,Vu,zz,Vz,Uz,Hz,Wz,qz,Yz,Kz,Xz,Qz,Jz,Zz,Gz,e7,t7,n7,r7,o7,a7,i7,s7;Dz=e=>y.createElement("svg",{viewBox:"0 0 256 254",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:256,height:254,preserveAspectRatio:"xMidYMid",...e},y.createElement("defs",null,y.createElement("linearGradient",{id:"c",x1:"50%",x2:"50%",y1:"0%",y2:"100%"},y.createElement("stop",{offset:"0%",stopColor:"#FFF"}),y.createElement("stop",{offset:"100%",stopColor:"#FFF",stopOpacity:0})),y.createElement("path",{id:"a",d:"M180.828 252.605a15.872 15.872 0 0 0 12.65-.486l52.501-25.262a15.94 15.94 0 0 0 9.025-14.364V41.197a15.939 15.939 0 0 0-9.025-14.363l-52.5-25.263a15.877 15.877 0 0 0-18.115 3.084L74.857 96.35l-43.78-33.232a10.614 10.614 0 0 0-13.56.603L3.476 76.494c-4.63 4.211-4.635 11.495-.012 15.713l37.967 34.638-37.967 34.637c-4.623 4.219-4.618 11.502.012 15.714l14.041 12.772a10.614 10.614 0 0 0 13.56.604l43.78-33.233 100.507 91.695a15.853 15.853 0 0 0 5.464 3.571Zm10.464-183.649-76.262 57.889 76.262 57.888V68.956Z"})),y.createElement("mask",{id:"b",fill:"#fff"},y.createElement("use",{xlinkHref:"#a"})),y.createElement("path",{fill:"#0065A9",d:"M246.135 26.873 193.593 1.575a15.885 15.885 0 0 0-18.123 3.08L3.466 161.482c-4.626 4.219-4.62 11.502.012 15.714l14.05 12.772a10.625 10.625 0 0 0 13.569.604L238.229 33.436c6.949-5.271 16.93-.315 16.93 8.407v-.61a15.938 15.938 0 0 0-9.024-14.36Z"}),y.createElement("path",{fill:"#007ACC",d:"m246.135 226.816-52.542 25.298a15.887 15.887 0 0 1-18.123-3.08L3.466 92.207c-4.626-4.218-4.62-11.502.012-15.713l14.05-12.773a10.625 10.625 0 0 1 13.569-.603l207.132 157.135c6.949 5.271 16.93.315 16.93-8.408v.611a15.939 15.939 0 0 1-9.024 14.36Z"}),y.createElement("path",{fill:"#1F9CF0",d:"M193.428 252.134a15.892 15.892 0 0 1-18.125-3.083c5.881 5.88 15.938 1.715 15.938-6.603V11.273c0-8.318-10.057-12.483-15.938-6.602a15.892 15.892 0 0 1 18.125-3.084l52.533 25.263a15.937 15.937 0 0 1 9.03 14.363V212.51c0 6.125-3.51 11.709-9.03 14.363l-52.533 25.262Z"}),y.createElement("path",{fill:"url(#c)",fillOpacity:.25,d:"M180.828 252.605a15.874 15.874 0 0 0 12.65-.486l52.5-25.263a15.938 15.938 0 0 0 9.026-14.363V41.197a15.939 15.939 0 0 0-9.025-14.363L193.477 1.57a15.877 15.877 0 0 0-18.114 3.084L74.857 96.35l-43.78-33.232a10.614 10.614 0 0 0-13.56.603L3.476 76.494c-4.63 4.211-4.635 11.495-.012 15.713l37.967 34.638-37.967 34.637c-4.623 4.219-4.618 11.502.012 15.714l14.041 12.772a10.614 10.614 0 0 0 13.56.604l43.78-33.233 100.506 91.695a15.857 15.857 0 0 0 5.465 3.571Zm10.464-183.65-76.262 57.89 76.262 57.888V68.956Z"})),Lz=e=>y.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-minus size-6",...e},y.createElement("path",{d:"M5 12h14"})),Fz={[oe.Shape]:{width:100,height:100},[oe.CircleShape]:{width:100,height:100},[oe.TriangleShape]:{width:100,height:100},[oe.EditorApp]:{width:1240,height:400}},Bz=e=>{const t=fn(e),n=Ze(s=>s.currentSession),[r,o]=y.useState(!1),a=Ae(s=>s.createOrUpdateFlowNode),i=y.useCallback(async s=>{var c,l,u;try{if(o(!0),t&&(n==null?void 0:n.id)){const d=((c=t.position)==null?void 0:c.x)||0,f=(((l=t.position)==null?void 0:l.y)||0)+(((u=t.measured)==null?void 0:u.height)||0),h=await ce("FlowNodeData").save({data:{},session_id:n.id});if(!h)throw new Error("Failed to save node data");if(!await a({node_type:s,data:{},source_id:h.id,source_type:"FlowNodeData",x:d,y:f+20,...Fz[s]||{}}))throw new Error("Failed to save node")}}finally{o(!1)}},[a,n==null?void 0:n.id,t]);return{loading:r,createNode:i}},rm={applications:[{key:oe.EditorApp,icon:Lz,label:"application_bar.editor"},{key:oe.VSLiteApp,icon:Dz,label:"application_bar.vslite"}],shapes:[{key:oe.Shape,icon:"square",label:"application_bar.square"},{key:oe.CircleShape,icon:"circle",label:"application_bar.circle"},{key:oe.TriangleShape,icon:"triangle",label:"application_bar.triangle"}],old:[{key:oe.CodeContainerApp,icon:"file-code-2",label:"application_bar.code_editor"}]},$z=y.memo(e=>{const{t}=Me("flows"),{toast:n}=$t(),{loading:r,createNode:o}=Bz(e.id),a=async i=>{try{if(r)return;await o(i)}catch{n({description:t("application_bar.errors.add_node_failed"),variant:"destructive"})}};return p.jsx($c,{children:p.jsxs(Iz,{direction:"middle",children:[rm.applications.map(i=>{const s=i.icon;return p.jsx(zu,{children:p.jsxs(Ir,{children:[p.jsx(Dr,{children:p.jsx(s,{width:20,height:20,onClick:()=>a(i.key)})}),p.jsx(fr,{children:p.jsx("p",{children:t(i.label)})})]})},i.label)}),p.jsx(Ei,{orientation:"vertical",className:"h-full"}),rm.shapes.map(i=>p.jsx(zu,{children:p.jsxs(Ir,{children:[p.jsx(Dr,{children:p.jsx(le,{onClick:()=>a(i.key),name:i.icon})}),p.jsx(fr,{children:p.jsx("p",{children:t(i.label)})})]})},i.label)),p.jsx(Ei,{orientation:"vertical",className:"h-full"}),rm.old.map(i=>p.jsx(zu,{children:p.jsxs(Ir,{children:[p.jsx(Dr,{children:p.jsx(le,{onClick:()=>a(i.key),name:i.icon})}),p.jsx(fr,{children:p.jsx("p",{children:t(i.label)})})]})},i.label))]})})}),Vu=y.memo(e=>{const{lineClassName:t,handleClassName:n,...r}=e;return p.jsx(lre,{lineClassName:K("!border-1.5",t),handleClassName:K("!w-2 !h-2 !border-2 !rounded-full",n),...r})}),zz=e=>{const t=Ae(r=>r.createOrUpdateFlowEdge),n=y.useCallback(async({edgeId:r,source:o,target:a,connection:i})=>{try{if([oe.CircleShape,oe.TriangleShape].includes(o==null?void 0:o.type)&&(a==null?void 0:a.type)===oe.Shape){await t({source:i.source,target:i.target,sourceHandle:i.sourceHandle,targetHandle:i.targetHandle});return}return{deleteEdgeId:r}}catch{return{deleteEdgeId:r}}},[t]);dn(e,n)},Vz=y.memo(e=>{const{id:t,selected:n,isConnectable:r}=e;return zz(t),p.jsxs(p.Fragment,{children:[p.jsx(Vu,{isVisible:!!n,minWidth:40,minHeight:40}),p.jsx(et,{type:"target",position:fe.Top,isConnectable:r}),p.jsx("div",{className:"min-w-10 min-h-10 w-full h-full bg-border border",children:p.jsx(an,{id:t})}),p.jsx(et,{type:"source",position:fe.Bottom,isConnectable:r})]})}),Uz=e=>{const t=Ae(r=>r.createOrUpdateFlowEdge),n=y.useCallback(async({edgeId:r,source:o,target:a,connection:i})=>{try{if([oe.Shape,oe.TriangleShape].includes(o==null?void 0:o.type)&&(a==null?void 0:a.type)===oe.CircleShape){await t({source:i.source,target:i.target,sourceHandle:i.sourceHandle,targetHandle:i.targetHandle});return}return{deleteEdgeId:r}}catch{return{deleteEdgeId:r}}},[t]);dn(e,n)},Hz=y.memo(e=>{const{id:t,selected:n,isConnectable:r}=e;return Uz(t),p.jsxs(p.Fragment,{children:[p.jsx(Vu,{isVisible:!!n,minWidth:40,minHeight:40}),p.jsx(et,{type:"target",position:fe.Top,isConnectable:r}),p.jsx("div",{className:"min-w-10 min-h-10 w-full h-full bg-border rounded-full border",children:p.jsx(an,{id:t})}),p.jsx(et,{type:"source",position:fe.Bottom,isConnectable:r})]})}),Wz=e=>{const t=Ae(r=>r.createOrUpdateFlowEdge),n=y.useCallback(async({edgeId:r,source:o,target:a,connection:i})=>{try{if([oe.CircleShape,oe.Shape].includes(o==null?void 0:o.type)&&(a==null?void 0:a.type)===oe.TriangleShape){await t({source:i.source,target:i.target,sourceHandle:i.sourceHandle,targetHandle:i.targetHandle});return}return{deleteEdgeId:r}}catch{return{deleteEdgeId:r}}},[t]);dn(e,n)},qz=y.memo(e=>{const{id:t,selected:n,width:r,height:o,isConnectable:a}=e;return Wz(t),p.jsxs(p.Fragment,{children:[p.jsx(Vu,{isVisible:!!n,minWidth:40,minHeight:40}),p.jsx(et,{type:"target",position:fe.Top,isConnectable:a}),p.jsx("div",{className:"w-0 h-0 border-l-transparent border-r-transparent border-b-border",style:{borderLeftWidth:(r||0)/2,borderRightWidth:(r||0)/2,borderBottomWidth:o||0}}),p.jsx(an,{id:t,className:"absolute top-0 right-0"}),p.jsx(et,{type:"source",position:fe.Bottom,isConnectable:a})]})}),Yz=e=>{const t=Ae(r=>r.createOrUpdateFlowEdge),n=y.useCallback(async({edgeId:r,source:o,target:a,connection:i})=>{try{if((o==null?void 0:o.type)===oe.LLM&&(a==null?void 0:a.type)===oe.EditorApp){await t({source:i.source,target:i.target,sourceHandle:i.sourceHandle,targetHandle:i.targetHandle});return}return{deleteEdgeId:r}}catch{return{deleteEdgeId:r}}},[t]);dn(e,n)},Kz=e=>{const t=fn(e),{t:n}=Me("flows"),r=y.useRef(null),{toast:o}=$t(),{getNode:a,getHandleConnections:i}=$n(),s=un(d=>d.stream),c=y.useCallback(async d=>{t&&(clearTimeout(r.current),r.current=setTimeout(async()=>{await ce("FlowNode").update(t.id,{data:d})},150))},[t]),l=y.useCallback(async(d,f)=>{if(t){const h=i({nodeId:e,type:"target"}).find(m=>{var v;return((v=a(m.source))==null?void 0:v.type)===oe.LLM}),g=h?a(h==null?void 0:h.source):void 0;if(g){if(g.data.status!==Ye.Loaded)return o({variant:"destructive",description:n("editor_node.errors.llm_not_loaded_yet")})}else return o({variant:"destructive",description:n("editor_node.errors.llm_not_found")});try{const m=s(d);if(!m)throw new Error("Stream is not supported");const v=[];for await(const b of m)b&&Array.isArray(b)&&(v.push(...b.map(x=>x.content)),b!=null&&b.length&&(f==null||f(b.map(x=>x.content).join(""))));return v.join("")}catch(m){if(m instanceof Error&&m.message.includes("LLM_NOT_LOADED_YET"))return o({title:n("editor_node.errors.llm_not_loaded_yet")});o({variant:"destructive",title:n("editor_node.errors.stream_message_failed")})}}},[t,i,e,a,o,n,s]),u=y.useCallback(d=>{if(!a(d))return[];const f=[];return i({nodeId:d,type:"target"}).forEach(h=>{const g=a(h.source);!g||g.type!==oe.LLM||f.push({node:g,connections:[h]})}),f},[i,a]);return{createMessage:l,updateEditorContent:c,getLinkedConnections:u}},Xz=y.lazy(()=>vt(()=>import("./index-BcNmvw95.js").then(async e=>(await e.__tla,e)),__vite__mapDeps([11,1,2,12,13,9,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55]))),Qz=y.memo(e=>{var l;const{id:t,data:n,selected:r,isConnectable:o}=e;Yz(t);const{createMessage:a,updateEditorContent:i,getLinkedConnections:s}=Kz(t),c=y.useCallback(u=>{i(u)},[i]);return p.jsxs("div",{className:"w-full min-w-[1240px] h-full",children:[p.jsx(Vu,{isVisible:!!r,minWidth:1240,minHeight:400}),p.jsx(et,{type:"target",position:fe.Top,isConnectable:o}),p.jsxs("div",{className:"min-w-10 min-h-10 w-full h-full rounded-lg border bg-background",children:[p.jsx(an,{className:"!z-[100]",id:t,enableToStandalone:!0,getLinkedConnections:s}),p.jsx(y.Suspense,{fallback:p.jsx("div",{className:"h-full w-ful rounded-lg flex justify-center items-center",children:p.jsx(le,{name:"loader-circle",className:"animate-spin"})}),children:p.jsx("div",{className:"h-full w-ful rounded-lg","data-registry":"plate",children:p.jsx(Xz,{defaultValue:(l=n==null?void 0:n.flowNode)==null?void 0:l.data,onValueChange:c,copilotStream:a})})})]}),p.jsx(et,{type:"source",position:fe.Bottom,isConnectable:o})]})}),Jz=e=>{const t=y.useCallback(async({edgeId:n})=>{try{return{deleteEdgeId:n}}catch{return{deleteEdgeId:n}}},[]);dn(e,t)},Zz=y.memo(e=>{var i,s;const{id:t,data:n,isConnectable:r}=e,{t:o}=Me("flows");Jz(t);let a="";switch((i=n.entity)==null?void 0:i.placeholder_type){case"VECTOR_DATABASE_RETREIVER":a=o("placeholder_node.vector_database_retriever");break}return p.jsxs("div",{children:[p.jsx(et,{type:"target",position:fe.Top,isConnectable:r}),p.jsxs(Mo,{className:"flex justify-center max-w-80",variant:"default",children:[p.jsx(an,{id:t}),p.jsx(le,{name:"land-plot",className:"w-7 h-7"}),p.jsxs("div",{className:"ml-2 pr-4",children:[p.jsx(ko,{children:`${((s=n.entity)==null?void 0:s.placeholder)||""}`}),p.jsx(_s,{children:a?p.jsx(on,{children:a}):void 0})]})]}),p.jsx(et,{type:"source",position:fe.Bottom,id:"a",isConnectable:r})]})}),Gz=y.lazy(()=>vt(()=>import("./CodeContainerApp-BYfPJ6Nz.js").then(async e=>(await e.__tla,e)).then(e=>e.C),__vite__mapDeps([61,1,2,12,59,8]))),e7=y.memo(e=>{const{id:t,isConnectable:n}=e;return p.jsxs("div",{className:"w-[1380px] h-[600px] rounded-lg border overflow-hidden shadow-sm",children:[p.jsx(et,{type:"target",position:fe.Top,isConnectable:n}),p.jsxs("div",{className:"w-full h-full rounded-lg border bg-card overflow-hidden",children:[p.jsx(an,{id:t}),p.jsx(y.Suspense,{fallback:p.jsx("div",{className:"h-full w-full flex justify-center items-center",children:p.jsx(le,{name:"loader-circle",className:"animate-spin"})}),children:p.jsx(Gz,{...e})})]}),p.jsx(et,{type:"source",position:fe.Bottom,isConnectable:n})]})}),t7=["empty-source","vite-vue","shadcn-react-vite","todo-app-react-vite","porfolio-nextjs"],n7=async e=>{switch(e){case"empty-source":return vt(()=>import("./empty-source-CB2n6D1i.js"),[]).then(t=>t.BASE);case"vite-vue":return vt(()=>import("./vite-vue-Bmz2z3Fo.js"),[]).then(t=>t.BASE);case"shadcn-react-vite":return vt(()=>import("./shadcn-react-vite-CDJ9BaE9.js"),[]).then(t=>t.BASE);case"todo-app-react-vite":return vt(()=>import("./todo-app-react-vite-BBWBkRjR.js"),[]).then(t=>t.BASE);case"porfolio-nextjs":return vt(()=>import("./porfolio-nextjs-DCkli5iW.js"),[]).then(t=>t.BASE);default:throw new Error(`Unknown source base: ${e}`)}},WS=y.memo(({className:e,onUpdateSourceBase:t})=>{const{t:n}=Me("components"),[r,o]=y.useState();return p.jsxs(Tt,{className:K("mw-full",e),children:[p.jsx(gn,{className:"p-4",children:p.jsx(Cn,{children:n("add_source_base.title")})}),p.jsx(vn,{className:"p-4",children:p.jsxs("div",{className:"flex items-center justify-center w-full h-full flex-col",children:[p.jsxs(Eo,{onValueChange:a=>o(a),children:[p.jsx(Hr,{className:"w-full mb-4",children:p.jsx(So,{placeholder:n("add_source_base.source_base_select_placeholder")})}),p.jsx(Wr,{children:t7.map(a=>p.jsx(On,{value:`${a}`,children:n(`add_source_base.sourcebases.${a.toLowerCase()}`)},`${a}`))})]}),p.jsx(ot,{className:"w-full",onClick:async()=>r&&t(await n7(r)),children:n("add_source_base.update_source")})]})})]})}),r7=()=>{const{getNode:e,getHandleConnections:t}=$n(),n=y.useCallback(async(r,o)=>{await ce("FlowNode").update(r,{raw:ny(o)})},[]);return{getLinkedConnections:y.useCallback(r=>{if(!e(r))return[];const o=[];return t({nodeId:r,type:"target"}).forEach(a=>{const i=e(a.source);!i||i.type!==oe.LLM||o.push({node:i,connections:[a]})}),o},[t,e]),updateCodeContainerData:n}},o7=e=>{const t=Ae(r=>r.createOrUpdateFlowEdge),n=y.useCallback(async({edgeId:r,source:o,target:a,connection:i})=>{try{if((o==null?void 0:o.type)===oe.LLM&&(a==null?void 0:a.type)===oe.VSLiteApp){await t({source:i.source,target:i.target,sourceHandle:i.sourceHandle,targetHandle:i.targetHandle});return}return{deleteEdgeId:r}}catch{return{deleteEdgeId:r}}},[t]);dn(e,n)},a7=y.lazy(()=>vt(()=>import("./index-BcgE28pn.js").then(async e=>(await e.__tla,e)),__vite__mapDeps([56,1,2,12,20,34,15,57,58,59,60]))),i7=y.memo(e=>{var u,d,f;const{id:t,isConnectable:n,data:r}=e,[o,a]=y.useState((u=r==null?void 0:r.flowNode)!=null&&u.raw?iy(r.flowNode.raw):void 0),{updateCodeContainerData:i,getLinkedConnections:s}=r7();o7(t);const c=y.useCallback(async h=>{var g,m;(g=r==null?void 0:r.flowNode)!=null&&g.id&&(await i((m=r==null?void 0:r.flowNode)==null?void 0:m.id,h),a(h))},[(d=r==null?void 0:r.flowNode)==null?void 0:d.id,i]),l=y.useCallback(async(h,g)=>{a(m=>{var b;const v=sy(m||{},h,g);return i((b=r==null?void 0:r.flowNode)==null?void 0:b.id,v),v})},[(f=r==null?void 0:r.flowNode)==null?void 0:f.id,i]);return o?p.jsxs("div",{className:"w-[1380px] h-[600px] rounded-lg border overflow-hidden shadow-sm",children:[p.jsx(et,{type:"target",position:fe.Top,isConnectable:n}),p.jsxs("div",{className:"w-full h-full rounded-lg border bg-card overflow-hidden",children:[p.jsx(an,{id:t,className:"z-50",enableToStandalone:!0,getLinkedConnections:s}),p.jsx(y.Suspense,{fallback:p.jsx("div",{className:"h-full w-full flex justify-center items-center",children:p.jsx(le,{name:"loader-circle",className:"animate-spin"})}),children:p.jsx(a7,{fileSystemTree:o,onUpdateFileContent:l})})]}),p.jsx(et,{type:"source",position:fe.Bottom,isConnectable:n})]}):p.jsx("div",{className:"h-full flex justify-center items-center",children:p.jsx(WS,{className:"w-64",onUpdateSourceBase:c})})}),s7={[oe.LLM]:CL,[oe.Toolbox]:ile,[oe.Thread]:PL,[oe.Message]:ple,[oe.Prompt]:mle,[oe.SessionInfo]:U1e,[oe.Schema]:W1e,[oe.CSVData]:q1e,[oe.ToolDefinition]:K1e,[oe.DefaultEmbeddingModel]:Q1e,[oe.VectorDatabase]:o_e,[oe.JSONLData]:i_e,[oe.ApplicationBar]:$z,[oe.Shape]:Vz,[oe.CircleShape]:Hz,[oe.TriangleShape]:qz,[oe.EditorApp]:Qz,[oe.PlaceHolder]:Zz,[oe.CodeContainerApp]:e7,[oe.VSLiteApp]:i7};function c_e(e,t=[]){let n=[];function r(a,i){const s=y.createContext(i),c=n.length;n=[...n,i];function l(d){const{scope:f,children:h,...g}=d,m=(f==null?void 0:f[e][c])||s,v=y.useMemo(()=>g,Object.values(g));return p.jsx(m.Provider,{value:v,children:h})}function u(d,f){const h=(f==null?void 0:f[e][c])||s,g=y.useContext(h);if(g)return g;if(i!==void 0)return i;throw new Error(`\`${d}\` must be used within \`${a}\``)}return l.displayName=a+"Provider",[l,u]}const o=()=>{const a=n.map(i=>y.createContext(i));return function(i){const s=(i==null?void 0:i[e])||a;return y.useMemo(()=>({[`__scope${e}`]:{...i,[e]:s}}),[i,s])}};return o.scopeName=e,[r,l_e(o,...t)]}function l_e(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(o){const a=r.reduce((i,{useScope:s,scopeName:c})=>{const l=s(o)[`__scope${c}`];return{...i,...l}},{});return y.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return n.scopeName=t.scopeName,n}var u_e="Toggle",YE=y.forwardRef((e,t)=>{const{pressed:n,defaultPressed:r=!1,onPressedChange:o,...a}=e,[i=!1,s]=nn({prop:n,onChange:o,defaultProp:r});return p.jsx(Ne.button,{type:"button","aria-pressed":i,"data-state":i?"on":"off","data-disabled":e.disabled?"":void 0,...a,ref:t,onClick:ye(e.onClick,()=>{e.disabled||s(!i)})})});YE.displayName=u_e;let KE,mi,XE,QE,om;KE=YE,mi="ToggleGroup",[XE,A7]=c_e(mi,[Gr]),QE=Gr(),om=U.forwardRef((e,t)=>{const{type:n,...r}=e;if(n==="single"){const o=r;return p.jsx(d_e,{...o,ref:t})}if(n==="multiple"){const o=r;return p.jsx(f_e,{...o,ref:t})}throw new Error(`Missing prop \`type\` expected on \`${mi}\``)}),om.displayName=mi;var[c7,l7]=XE(mi),d_e=U.forwardRef((e,t)=>{const{value:n,defaultValue:r,onValueChange:o=()=>{},...a}=e,[i,s]=nn({prop:n,defaultProp:r,onChange:o});return p.jsx(c7,{scope:e.__scopeToggleGroup,type:"single",value:i?[i]:[],onItemActivate:s,onItemDeactivate:U.useCallback(()=>s(""),[s]),children:p.jsx(u7,{...a,ref:t})})}),f_e=U.forwardRef((e,t)=>{const{value:n,defaultValue:r,onValueChange:o=()=>{},...a}=e,[i=[],s]=nn({prop:n,defaultProp:r,onChange:o}),c=U.useCallback(u=>s((d=[])=>[...d,u]),[s]),l=U.useCallback(u=>s((d=[])=>d.filter(f=>f!==u)),[s]);return p.jsx(c7,{scope:e.__scopeToggleGroup,type:"multiple",value:i,onItemActivate:c,onItemDeactivate:l,children:p.jsx(u7,{...a,ref:t})})});om.displayName=mi;var[p_e,h_e]=XE(mi),u7=U.forwardRef((e,t)=>{const{__scopeToggleGroup:n,disabled:r=!1,rovingFocus:o=!0,orientation:a,dir:i,loop:s=!0,...c}=e,l=QE(n),u=Ho(i),d={role:"group",dir:u,...c};return p.jsx(p_e,{scope:n,rovingFocus:o,disabled:r,children:o?p.jsx(vc,{asChild:!0,...l,orientation:a,dir:u,loop:s,children:p.jsx(Ne.div,{...d,ref:t})}):p.jsx(Ne.div,{...d,ref:t})})}),am="ToggleGroupItem",d7=U.forwardRef((e,t)=>{const n=l7(am,e.__scopeToggleGroup),r=h_e(am,e.__scopeToggleGroup),o=QE(e.__scopeToggleGroup),a=n.value.includes(e.value),i=r.disabled||e.disabled,s={...e,pressed:a,disabled:i},c=U.useRef(null);return r.rovingFocus?p.jsx(bc,{asChild:!0,...o,focusable:!i,active:a,ref:c,children:p.jsx(JE,{...s,ref:t})}):p.jsx(JE,{...s,ref:t})});d7.displayName=am;let JE;JE=U.forwardRef((e,t)=>{const{__scopeToggleGroup:n,value:r,...o}=e,a=l7(am,n),i={role:"radio","aria-checked":e.pressed,"aria-pressed":void 0},s=a.type==="single"?i:void 0;return p.jsx(YE,{...s,...o,ref:t,onPressedChange:c=>{c?a.onItemActivate(r):a.onItemDeactivate(r)}})}),Em=om,Sm=d7;const f7=Zr("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 gap-2",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground"},size:{default:"h-10 px-3 min-w-10",sm:"h-9 px-2.5 min-w-9",lg:"h-11 px-5 min-w-11"}},defaultVariants:{variant:"default",size:"default"}}),m_e=y.forwardRef(({className:e,variant:t,size:n,...r},o)=>p.jsx(KE,{ref:o,className:K(f7({variant:t,size:n,className:e})),...r}));m_e.displayName=KE.displayName;const p7=y.createContext({size:"default",variant:"default"}),h7=y.forwardRef(({className:e,variant:t,size:n,children:r,...o},a)=>p.jsx(Em,{ref:a,className:K("flex items-center justify-center gap-1",e),...o,children:p.jsx(p7.Provider,{value:{variant:t,size:n},children:r})}));h7.displayName=Em.displayName;const m7=y.forwardRef(({className:e,children:t,variant:n,size:r,...o},a)=>{const i=y.useContext(p7);return p.jsx(Sm,{ref:a,className:K(f7({variant:i.variant||n,size:i.size||r}),e),...o,children:t})});m7.displayName=Sm.displayName;function y_e(){const e=Ve(t=>`x: ${t.transform[0].toFixed(2)}, y: ${t.transform[1].toFixed(2)}, zoom: ${t.transform[2].toFixed(2)}`);return p.jsx("div",{children:e})}function g_e({change:e}){var r,o,a,i;const t="id"in e?e.id:"-",{type:n}=e;return p.jsxs("div",{className:"mb-3",children:[p.jsxs("div",{children:["node id: ",t]}),p.jsxs("div",{children:[n==="add"?JSON.stringify(e.item,null,2):null,n==="dimensions"?`dimensions: ${(r=e.dimensions)==null?void 0:r.width} \xD7 ${(o=e.dimensions)==null?void 0:o.height}`:null,n==="position"?`position: ${(a=e.position)==null?void 0:a.x.toFixed(1)}, ${(i=e.position)==null?void 0:i.y.toFixed(1)}`:null,n==="remove"?"remove":null,n==="select"?e.selected?"select":"unselect":null]})]})}function v_e({limit:e=20}){const[t,n]=y.useState([]),r=bt(),o=y.useCallback(i=>{n(s=>[...i,...s].slice(0,e))},[e]);y.useEffect(()=>(r.setState({onNodesChange:o}),()=>r.setState({onNodesChange:void 0})),[o,r]);const a=()=>p.jsx("div",{children:"No Changes Triggered"});return p.jsx(p.Fragment,{children:t.length===0?p.jsx(a,{}):t.map((i,s)=>p.jsx(g_e,{change:i},s))})}function b_e(){const{getInternalNode:e}=$n(),t=Lne();return p.jsx(Ine,{children:p.jsx("div",{className:"text-secondary-foreground",children:t.map(n=>{var a,i;const r=e(n.id);if(!r)return null;const o=r==null?void 0:r.internals.positionAbsolute;return p.jsx(x_e,{id:n.id,selected:!!n.selected,type:n.type||"default",position:n.position,absPosition:o,width:((a=n.measured)==null?void 0:a.width)??0,height:((i=n.measured)==null?void 0:i.height)??0,data:n.data},n.id)})})})}function x_e({id:e,type:t,selected:n,position:r,absPosition:o,width:a,height:i,data:s}){if(!a||!i)return null;const c=`translate(${o.x}px, ${o.y+i}px)`,l=`${r.x.toFixed(1)}, ${r.y.toFixed(1)}`,u=`${a} \xD7 ${i}`,d=n?"Selected":"Not Selected";return p.jsxs("div",{style:{position:"absolute",transform:c,width:a*2},className:"text-xs",children:[p.jsxs("div",{children:["id: ",e]}),p.jsxs("div",{children:["type: ",t]}),p.jsxs("div",{children:["selected: ",d]}),p.jsxs("div",{children:["position: ",l]}),p.jsxs("div",{children:["dimensions: ",u]}),p.jsxs("div",{children:["data: ",JSON.stringify(s,null,2)]})]})}function w_e({tools:e}){return p.jsx(is,{position:"top-left",className:"bg-card p-1 border rounded shadow-sm",children:p.jsx(h7,{type:"multiple",children:e.map(({active:t,setActive:n,label:r,value:o})=>p.jsx(m7,{value:o,onClick:()=>n(a=>!a),"aria-pressed":t,className:"bg-card text-card-foreground transition-colors duration-300 hover:bg-secondary hover:text-secondary-foreground",children:r},o))})})}function y7(){const[e,t]=y.useState(!1),[n,r]=y.useState(!1),[o,a]=y.useState(!1),i=[{active:e,setActive:t,label:"Node Inspector",value:"node-inspector"},{active:n,setActive:r,label:"Change Logger",value:"change-logger"},{active:o,setActive:a,label:"Viewport Logger",value:"viewport-logger"}];return p.jsxs(p.Fragment,{children:[p.jsx(w_e,{tools:i}),n&&p.jsx(is,{className:"text-xs p-5 bg-white rounded shadow-md overflow-y-auto max-h-[50%] mt-20",position:"bottom-right",children:p.jsx(v_e,{})}),e&&p.jsx(b_e,{}),o&&p.jsx(is,{position:"bottom-left",className:"text-secondary-foreground",children:p.jsx(y_e,{})})]})}y7.displayName="DevTools";const __e=()=>{const e=y.useRef({}),t=y.useRef({}),n=Ae(N=>N.flowEdges),r=Ze(N=>N.currentSession),o=Ae(N=>N.setNodes),a=Ae(N=>N.updateNodes),i=Ae(N=>N.updateEdges),s=Ae(N=>N.addConnectionToEdges),c=Ae(N=>N.reset),l=Ae(N=>N.findFlowEdges),u=Ae(N=>N.deleteFlowNode),d=Ae(N=>N.deleteFlowEdge),f=Ae(N=>N.updateFlowNode),h=Ae(N=>N.getNodes),g=Ae(N=>N.findFlowNodesWithSource),m=y.useRef(n),v=y.useRef(),[b,x]=y.useState({loading:!1});m.current=n;const _=y.useCallback(async(N,P)=>{try{v.current=N,c(),await(P==null?void 0:P())}catch{v.current=void 0}},[c]),w=y.useCallback(async N=>{try{if(!(r!=null&&r.id))return;x(A=>({...A,loading:!0}));const P=await g({...N,where:{...N.where,session_id:r.id}}),R=await l({where:[{source:Ur(P.map(A=>A.id))},{target:Ur(P.map(A=>A.id))}]});return{flowNodes:P,flowEdges:R}}finally{x(P=>({...P,loading:!1}))}},[g,l,r==null?void 0:r.id]),j=y.useCallback(async N=>{var P,R;for(const A of N)if("id"in A&&Object.values(Tl).includes(A.id)&&A.type!=="remove")a([A]);else if(A.type==="position"&&A.position&&!isNaN(A.position.x)&&!isNaN(A.position.y)){a([A]);const O=A.position.x,k=A.position.y;clearTimeout(e.current[A.id]),e.current[A.id]=setTimeout(async()=>{e.current[A.id]=void 0,await f({id:A.id,x:O,y:k},{silent:!0})},200)}else if(A.type==="remove"){const O=(P=h([A.id]))==null?void 0:P[0];if(!(O!=null&&O.type)||soe.includes(O.type))return;await u({id:A.id})}else if(A.type==="dimensions"&&A.dimensions&&!isNaN(A.dimensions.width)&&!isNaN(A.dimensions.height)){const O=(R=h([A.id]))==null?void 0:R[0];if(!(O!=null&&O.width)&&!(O!=null&&O.height))return;a([A]),clearTimeout(t.current[A.id]);const k=A.dimensions.width,T=A.dimensions.height;t.current[A.id]=setTimeout(async()=>{await f({id:A.id,width:k,height:T},{silent:!0})},200)}else A.type==="select"&&a([A])},[a,f,h,u]),E=y.useCallback(N=>{Promise.all(N.map(async P=>{if(P.type==="remove")return d({id:P.id})})),i(N)},[d,i]),S=y.useCallback(N=>{s(N)},[s]),C=y.useCallback(()=>{var N;(N=m.current)==null||N.length},[]),M=y.useCallback(N=>{o(P=>{var k,T;let R;if(typeof N=="function"?R=N(P):R=N,!R)return P;const A=P==null?void 0:P.find(D=>D.id===R.id),O={id:R.id,item:A?Jf(A,R):{...R,position:{x:((k=R.position)==null?void 0:k.x)||0,y:((T=R.position)==null?void 0:T.y)||0}},type:A?"replace":"add"};return qa([O],P)})},[o]);return{syncEdges:C,initialFlow:_,loadingState:b,prepareFlowInfo:w,updateNodeChanges:j,updateEdgeChanges:E,updateOrCreateNode:M,currentSessionIdRef:v,updateEdgeConnection:S}},j_e=e=>{const t=Ze(u=>{var d;return(d=u.currentSession)==null?void 0:d.id}),{loadingState:n,prepareFlowInfo:r,syncEdges:o,initialFlow:a,currentSessionIdRef:i}=e,s=Ae(u=>u.ready),c=Ae(u=>u.removeSyncNodeQueue),l=Ae(u=>u.removeSyncEdgeQueue);y.useLayoutEffect(()=>{},[t]),y.useEffect(()=>{n.loading||!s||!t||i.current===t||a(t,async()=>{await r({where:{session_id:t}})})},[a,r,n.loading,i,s,t]),y.useEffect(()=>{const u=Ae.subscribe(f=>f.syncNodeQueue,async(f,h)=>{const g=h.map(v=>v.timestamp),m=f.filter(v=>!g.includes(v.timestamp));m.length&&c(m.map(v=>v.timestamp))}),d=Ae.subscribe(f=>f.syncEdgeQueue,async(f,h)=>{const g=h.map(v=>v.timestamp),m=f.filter(v=>!g.includes(v.timestamp));m.length&&(l(m.map(v=>v.timestamp)),o())});return()=>{u(),d()}},[r,l,c,o])},E_e=()=>{const[e,t]=y.useState(!0),n=__e(),r=un(u=>u.selectedModel),o=y.useRef(r),a=un(u=>u.setInitProgressCallback),{updateOrCreateNode:i,updateNodeChanges:s,updateEdgeChanges:c,updateEdgeConnection:l}=n;return j_e(n),o.current=r,y.useEffect(()=>{const u=a==null?void 0:a(d=>{if(!o.current)return;const f=`${o.current}`;i(h=>{const g=h==null?void 0:h.find(m=>{var v;return(v=m.data)!=null&&v.entity&&typeof m.data.entity=="object"&&"name"in m.data.entity?m.data.entity.name===f:!1});if(g)return g.data.label=d.text,g.data.status=Ye.Loading,d.progress===100&&(g.data.label="",g.data.status=Ye.Loaded),g})});return()=>{u==null||u()}},[a,i]),y.useMemo(()=>({updateNodeChanges:s,updateEdgeChanges:c,initializing:e,setInitializing:t,updateEdgeConnection:l}),[s,c,e,t,l])},S_e=()=>{const e=Wu(l=>l.theme),t=Ae(l=>l.nodes),n=Ae(l=>l.edges),{updateNodeChanges:r,updateEdgeChanges:o,updateEdgeConnection:a}=E_e(),i=y.useCallback(l=>{r(l)},[r]),s=y.useCallback(l=>{o(l)},[o]),c=y.useCallback(l=>{a(l)},[a]);return p.jsxs(Tne,{nodes:t,edges:n,nodeTypes:s7,onNodesChange:i,onEdgesChange:s,onConnect:c,panOnScroll:!0,panOnScrollMode:ea.Free,colorMode:e,fitView:!0,children:[p.jsx(Vne,{variant:_o.Dots,gap:24,size:1}),p.jsx(Xne,{}),p.jsx(sre,{}),xje?p.jsx(y7,{}):void 0]})},C_e=y.memo(S_e);function O_e(){return p.jsx(C_e,{})}const N_e=y.lazy(()=>vt(()=>import("./DocumentViewer-3kJNN_Fs.js").then(async e=>(await e.__tla,e)),__vite__mapDeps([62,1,2,13]))),M_e=()=>{const{documentId:e}=$C();return p.jsx(y.Suspense,{fallback:p.jsx(oS,{flickeringGrid:!0,className:"w-full h-full"}),children:p.jsx(N_e,{name:e||""})})};function im(){const e=zC();return dm(e),p.jsx(_je,{})}const k_e=pU(p.jsxs(Ko,{errorElement:p.jsx(im,{}),children:[p.jsxs(Ko,{element:p.jsx(Ck,{requiredSession:!0}),children:[p.jsx(Ko,{path:Vd.whiteboard,Component:O_e,errorElement:p.jsx(im,{})}),p.jsx(Ko,{path:Vd.application,errorElement:p.jsx(im,{}),Component:yie}),p.jsx(Ko,{path:"*",element:p.jsx(uU,{to:Jt("whiteboard")})})]}),p.jsx(Ko,{element:p.jsx(Ck,{}),children:p.jsx(Ko,{path:Vd.document,errorElement:p.jsx(im,{}),Component:M_e})})]})),P_e=(e,t)=>{switch(hq){case"browser":return QC(e,t);case"hash":return LU(e);default:return QC(e,t)}},A_e=P_e(k_e,{basename:"/NoLLMChat/"});wje("[BASE_URL]","/NoLLMChat/");let g7;g7=y.memo(()=>{const e=!window.location.pathname.includes("/NoLLMChat/");return y.useLayoutEffect(()=>{e&&(window.location.href="/NoLLMChat/".replace("//","/"))},[e]),e?p.jsx(oS,{className:"w-screen h-screen",enableLogo:!0,typing:!0}):p.jsx(KU,{router:A_e})},()=>!0),D7=Object.freeze(Object.defineProperty({__proto__:null,default:g7},Symbol.toStringTag,{value:"Module"}))});export{mt as $,sS as A,hm as B,cS as C,lS as D,fc as E,mm as F,pc as G,Sa as H,Qu as I,Ju as J,ym as K,uS as L,dS as M,xi as N,fS as O,pS as P,hS as Q,mS as R,gm as S,yS as T,gS as U,hc as V,vS as W,bS as X,xS as Y,wS as Z,vm as _,Eje as __tla,bm as a,xm as a$,mc as a0,yc as a1,Ca as a2,Oa as a3,Zu as a4,N7 as a5,gc as a6,wi as a7,_i as a8,M7 as a9,k7 as aA,wm as aB,_S as aC,jS as aD,ES as aE,P7 as aF,_m as aG,SS as aH,jm as aI,CS as aJ,Gr as aK,A7 as aL,Ho as aM,vc as aN,bc as aO,Em as aP,Sm as aQ,Cm as aR,Om as aS,Nm as aT,Mm as aU,km as aV,Pm as aW,OS as aX,NS as aY,Gu as aZ,Am as a_,MS as aa,Tm as ab,kS as ac,PS as ad,T7 as ae,AS as af,Rm as ag,R7 as ah,TS as ai,RS as aj,IS as ak,Im as al,DS as am,I7 as an,Dm as ao,Lm as ap,Fm as aq,LS as ar,Bm as as,$m as at,zm as au,Vm as av,Um as aw,Hm as ax,FS as ay,BS as az,xc as b,Wm as b0,qm as b1,Ym as b2,Km as b3,Xm as b4,Qm as b5,Jm as b6,ed as b7,Qt as b8,Zm as b9,$S as bA,ji as bB,Wo as bC,D7 as bD,td as ba,Gm as bb,ey as bc,wc as bd,_c as be,L7 as bf,zS as bg,Je as bh,Ei as bi,ty as bj,ot as bk,jn as bl,Ae as bm,dn as bn,fn as bo,ny as bp,ry as bq,VS as br,US as bs,oy as bt,ay as bu,HS as bv,iy as bw,sy as bx,WS as by,qS as bz,YS as c,ar as d,cy as e,KS as f,XS as g,Si as h,ir as i,ly as j,uy as k,QS as l,kr as m,JS as n,dy as o,fy as p,ZS as q,GS as r,eC as s,py as t,pn as u,jc as v,hy as w,Ec as x,Ci as y,tC as z};
