const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/few_shot-D7f7wj7_.js","assets/index-BIaZ5uhV.js","assets/index-De0FbZ-L.css","assets/copy-1fQZvS53.js","assets/createLucideIcon-BKV4b_6z.js","assets/refresh-ccw-CotIeAUJ.js","assets/volume-2-D5N_PseF.js","assets/index-CsUvhQqZ.js","assets/index-C-EaPLZA.js","assets/objectWithoutPropertiesLoose-BjXSgPXB.js","assets/index-B-T4Olw5.js","assets/index-Cr8Tc6mT.css","assets/PlateEditor-B1zCAb0U.js","assets/chevron-down-DMibpHS2.js","assets/chevron-right-CMhFKmzM.js","assets/check-DYL2G6D6.js","assets/ellipsis-CvnEmM_w.js","assets/highlighter-BQe3W-Qb.js","assets/keyboard-DK5k1KKm.js","assets/superscript-CKoQautK.js","assets/subscript-CIfxqb_u.js","assets/align-left-2EZNLsYf.js","assets/align-center-B6dZs_ph.js","assets/align-right-oH1LO31k.js","assets/align-justify-Ce-VZXwa.js","assets/plus-DYcYU2l-.js","assets/eraser-DyCW0dQw.js","assets/star-B_ImZoXM.js","assets/flag-qY-fegYH.js","assets/apple-By6qCytW.js","assets/clock-B_GKVTDP.js","assets/leaf-0Y3CJ_AE.js","assets/lightbulb-BarUpv1C.js","assets/smile-2aUherYa.js","assets/compass-D3NYJaL6.js","assets/music-D_OwVmEk.js","assets/x-8nOmInW_.js","assets/search-DbBICNly.js","assets/external-link-D7vwIZSN.js","assets/redo-2-BZAtxufa.js","assets/undo-2-DR-u81Dp.js","assets/list-CAAKgTMK.js","assets/list-ordered-CgUKGTzQ.js","assets/list-todo-DyhEk8nU.js","assets/indent-increase-DrrHiwnm.js","assets/pilcrow-DqePtYVx.js","assets/heading-1-DzpSGBD-.js","assets/heading-2-QjSArwHo.js","assets/heading-3-owXvckJG.js","assets/table-B8MnyOpI.js","assets/file-code-BmyYv5ER.js","assets/quote-BlIZTy_c.js","assets/minus-QPxgGjlv.js","assets/square-Ba8nA3cO.js","assets/image-BzVjSXym.js","assets/table-of-contents-jT8Op5Bg.js","assets/columns-3-C5zwr04o.js","assets/link-2-B2nDL1z5.js","assets/calendar-DSYWqop0.js","assets/wrap-text-C5TXaw4z.js","assets/link-Do3OOOqJ.js","assets/pen-B2ekGrzt.js","assets/eye-uga21JgL.js","assets/indent-decrease-DElBXpCM.js","assets/trash-D32c_ASi.js","assets/rectangle-vertical-C0glujcr.js","assets/rectangle-horizontal-kCv0wm5K.js","assets/list-collapse-DLeStyji.js","assets/pointer-BN7P65io.js","assets/wand-sparkles-Bed0-Q3k.js","assets/bold-D5uGM3GC.js","assets/italic-PI5jGkBQ.js","assets/underline-NgtY-kq7.js","assets/strikethrough-y_gqBBsq.js","assets/code-xml-tEyvCRjK.js","assets/baseline-8WxS8MkO.js","assets/paint-bucket-BS-nzGJi.js","assets/arrow-up-to-line-9AFEe_uJ.js","assets/circle-CiXc4r9V.js","assets/text-BMDUUlPU.js","assets/unlink-CkrwiH9e.js","assets/arrow-left-D5Gm2S1x.js","assets/arrow-right-BWKFndjX.js","assets/download-DAqnXwm6.js","assets/chevrons-up-down-P5YUPFMG.js","assets/trash-2-BdTUfQy_.js","assets/chevron-left-Cu2NKZRL.js","assets/sparkles-Bw4H8Mnl.js","assets/combine-DZjkye44.js","assets/ungroup-DJ0Q4o40.js","assets/grip-vertical-C0wuNqef.js","assets/pen-line-DDjxOTUQ.js","assets/badge-help-CyRja53e.js","assets/wand-BvhQw9jZ.js","assets/list-end-DhbQ3aQU.js","assets/list-plus-BPXeKHjc.js","assets/list-minus-BU3HxlgC.js","assets/feather-DsL_ol5M.js","assets/album-DYBJHlth.js","assets/corner-up-left-LE4eSBDA.js","assets/loader-circle-CniQZWb8.js","assets/use-prevent-pitch-zoom-De5ve-hd.js","assets/PlateEditor-BQPW60dV.css","assets/index-ISt3onpd.js","assets/index-Da4Gwm6V.js","assets/index-HSnfLTSA.css","assets/pdf-C6S-iFsf.js","assets/pdf.min-L8z0EEji.js","assets/pdf.worker.min-CTaW6cJo.js","assets/CodeContainerApp-DJEe3ePI.js","assets/folder-open-Bekl2mdW.js","assets/folder-CAPO22jp.js","assets/file-C2YdeTlG.js"])))=>i.map(i=>d[i]);
import{r as g,M as vE,j as h,u as Lh,P as Xxe,a as bE,L as Qxe,m as Jxe,c as Gxe,f as I9,i as Zxe,b as xE,d as D9,e as ewe,g as twe,h as an,l as Er,k as Nu,n as xn,R as nwe,o as Vn,p as Zt,q as Oe,s as he,t as Mn,v as nt,w as K,x as Hr,S as Wr,y as Io,D as ku,z as rwe,A as Pu,B as de,C as L9,E as owe,F as ke,G as Au,H as ot,I as Tu,J as oi,K as sn,N as Ht,O as ce,Q as Ru,T as F9,U as awe,V as Fh,W as Bh,X as Xe,Y as B9,Z as U,_ as Xs,$ as iwe,a0 as swe,a1 as $9,a2 as re,a3 as cwe,a4 as Iu,a5 as lwe,a6 as At,a7 as Du,a8 as uwe,a9 as Lu,aa as z9,ab as $h,ac as wE,ad as V9,ae as dwe,af as fwe,ag as pwe,ah as hwe,ai as mwe,aj as Qs,ak as ywe,al as gwe,am as da,an as U9,ao as vwe,ap as bwe,aq as xwe,ar as wwe,as as H9,at as W9,au as _E,av as lt,aw as _we,ax as jE,ay as EE,az as zh,aA as jwe,aB as Ewe,aC as Swe,aD as Cwe,__tla as Owe}from"./index-BIaZ5uhV.js";import Mwe,{__tla as Nwe}from"./copy-1fQZvS53.js";import kwe,{__tla as Pwe}from"./refresh-ccw-CotIeAUJ.js";import Awe,{__tla as Twe}from"./volume-2-D5N_PseF.js";let q9,SE,Vh,CE,OE,Js,Uh,Gs,fa,Fu,Bu,Hh,ME,NE,ai,kE,PE,AE,TE,Wh,RE,IE,DE,LE,FE,BE,$E,qr,qh,$u,Do,Zs,Yh,ec,Kh,Xh,zE,VE,UE,Y9,HE,WE,zu,Qh,Jh,Gh,Zh,em,tm,nm,rm,om,am,im,sm,cm,lm,um,qE,dm,YE,K9,mt,tc,nc,pa,ha,fm,KE,X9,pm,hm,mm,XE,ym,gm,vm,bm,xm,wm,QE,JE,Q9,GE,J9,ZE,_m,jm,Em,Sm,Cm,Om,Mm,rc,oc,ii,si,G9,eS,tS,nS,Nm,km,rS,Qe,Nn,Ae,cn,ln,Pm,Am,oS,aS,Tm,Rm,ft,iS,Im,Dm,sS,cS,lS,ci,ma,Z9,uS,tr,Lm,dS,fS,li,nr,Fm,Bm,pS,Sr,hS,$m,zm,mS,yS,gS,Vm,un,ac,Um,ic,ui,vS,Rwe=Promise.all([(()=>{try{return Owe}catch{}})(),(()=>{try{return Nwe}catch{}})(),(()=>{try{return Pwe}catch{}})(),(()=>{try{return Twe}catch{}})()]).then(async()=>{class tz extends g.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function nz({children:e,isPresent:t}){const n=g.useId(),r=g.useRef(null),o=g.useRef({width:0,height:0,top:0,left:0}),{nonce:a}=g.useContext(vE);return g.useInsertionEffect(()=>{const{width:i,height:s,top:c,left:l}=o.current;if(t||!r.current||!i||!s)return;r.current.dataset.motionPopId=n;const u=document.createElement("style");return a&&(u.nonce=a),document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${i}px !important;
            height: ${s}px !important;
            top: ${c}px !important;
            left: ${l}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[t]),h.jsx(tz,{isPresent:t,childRef:r,sizeRef:o,children:g.cloneElement(e,{ref:r})})}const rz=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:o,presenceAffectsLayout:a,mode:i})=>{const s=Lh(oz),c=g.useId(),l=g.useCallback(d=>{s.set(d,!0);for(const f of s.values())if(!f)return;r&&r()},[s,r]),u=g.useMemo(()=>({id:c,initial:t,isPresent:n,custom:o,onExitComplete:l,register:d=>(s.set(d,!1),()=>s.delete(d))}),a?[Math.random(),l]:[n,l]);return g.useMemo(()=>{s.forEach((d,f)=>s.set(f,!1))},[n]),g.useEffect(()=>{!n&&!s.size&&r&&r()},[n]),i==="popLayout"&&(e=h.jsx(nz,{isPresent:n,children:e})),h.jsx(Xxe.Provider,{value:u,children:e})};function oz(){return new Map}const Vu=e=>e.key||"";function xS(e){const t=[];return g.Children.forEach(e,n=>{g.isValidElement(n)&&t.push(n)}),t}const az=({children:e,exitBeforeEnter:t,custom:n,initial:r=!0,onExitComplete:o,presenceAffectsLayout:a=!0,mode:i="sync"})=>{const s=g.useMemo(()=>xS(e),[e]),c=s.map(Vu),l=g.useRef(!0),u=g.useRef(s),d=Lh(()=>new Map),[f,p]=g.useState(s),[y,m]=g.useState(s);bE(()=>{l.current=!1,u.current=s;for(let x=0;x<y.length;x++){const _=Vu(y[x]);c.includes(_)?d.delete(_):d.get(_)!==!0&&d.set(_,!1)}},[y,c.length,c.join("-")]);const v=[];if(s!==f){let x=[...s];for(let _=0;_<y.length;_++){const w=y[_],j=Vu(w);c.includes(j)||(x.splice(_,0,w),v.push(w))}i==="wait"&&v.length&&(x=v),m(xS(x)),p(s);return}const{forceRender:b}=g.useContext(Qxe);return h.jsx(h.Fragment,{children:y.map(x=>{const _=Vu(x),w=s===y||c.includes(_),j=()=>{if(d.has(_))d.set(_,!0);else return;let E=!0;d.forEach(S=>{S||(E=!1)}),E&&(b==null||b(),m(u.current),o&&o())};return h.jsx(rz,{isPresent:w,initial:!l.current||r?void 0:!1,custom:w?void 0:n,presenceAffectsLayout:a,mode:i,onExitComplete:w?void 0:j,children:x},_)})})};function Hm(e){const t=Lh(()=>Jxe(e)),{isStatic:n}=g.useContext(vE);if(n){const[,r]=g.useState(e);g.useEffect(()=>t.on("change",r),[])}return t}function wS(e,t){const n=Hm(t()),r=()=>n.set(t());return r(),bE(()=>{const o=()=>I9.preRender(r,!1,!0),a=e.map(i=>i.on("change",o));return()=>{a.forEach(i=>i()),Gxe(r)}}),n}const iz=e=>e&&typeof e=="object"&&e.mix,sz=e=>iz(e)?e.mix:void 0;function cz(...e){const t=!Array.isArray(e[0]),n=t?0:-1,r=e[0+n],o=e[1+n],a=e[2+n],i=e[3+n],s=Zxe(o,a,{mixer:sz(a[0]),...i});return t?s(r):s}function lz(e){xE.current=[],e();const t=wS(xE.current,e);return xE.current=void 0,t}function _S(e,t,n,r){if(typeof e=="function")return lz(e);const o=typeof t=="function"?t:cz(t,n,r);return Array.isArray(e)?jS(e,o):jS([e],([a])=>o(a))}function jS(e,t){const n=Lh(()=>[]);return wS(e,()=>{n.length=0;const r=e.length;for(let o=0;o<r;o++)n[o]=e[o].get();return t(n)})}function ES(e){return typeof e=="number"?e:parseFloat(e)}function uz(e,t={}){const{isStatic:n}=g.useContext(vE),r=g.useRef(null),o=Hm(D9(e)?ES(e.get()):e),a=g.useRef(o.get()),i=g.useRef(()=>{}),s=()=>{const l=r.current;l&&l.time===0&&l.sample(ewe.delta),c(),r.current=twe({keyframes:[o.get(),a.current],velocity:o.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...t,onUpdate:i.current})},c=()=>{r.current&&r.current.stop()};return g.useInsertionEffect(()=>o.attach((l,u)=>n?u(l):(a.current=l,i.current=u,I9.update(s),o.get()),c),[JSON.stringify(t)]),bE(()=>{if(D9(e))return e.on("change",l=>o.set(ES(l)))},[o]),o}var Ze=(e=>(e.Started="started",e.Downloading="downloading",e.Downloaded="downloaded",e.Loading="loading",e.Loaded="loaded",e))(Ze||{}),sc=(e=>(e.LLM="LLM",e.embedding="embedding",e.VLM="VLM",e))(sc||{}),Uu=(e=>(e.WebLLM="WebLLM",e.OpenAI="OpenAI",e))(Uu||{}),Yr=(e=>(e.Started="started",e.Inprogress="inprogress",e.Success="success",e.Failed="failed",e))(Yr||{}),kn=(e=>(e.Human="human",e.User="user",e.AI="ai",e.System="system",e.Assistant="assistant",e.Tool="tool",e.FewShotExample="few_shot_example",e))(kn||{}),Hu=(e=>(e.Started="started",e.Inprogress="inprogress",e.Done="done",e))(Hu||{}),Pn=(e=>(e.Chat="chat",e.FewShotExample="few_shot_example",e))(Pn||{}),di=(e=>(e.VECTOR_DATABASE_RETREIVER="VECTOR_DATABASE_RETREIVER",e))(di||{});let SS,Wm;SS=async(e,t)=>{let n="",r="",o;const a=[];await e;for await(const i of e)i&&(Array.isArray(i)?(a.push(...i.map(s=>s.content)),a!=null&&a.length&&(r=a.join(""),t==null||t({chunk:i,content:r}))):(n=typeof i=="object"&&"content"in i?`${i.content}`:`${i}`,t==null||t({chunk:i,content:n})),o=i);return{lastChunk:o,content:n}},Wm=()=>{const e=an(r=>r.toolsCallingStream),t=an(r=>r.structuredStream),n=an(r=>r.stream);return{stream:g.useCallback(async(r,{tools:o,schemas:a,onMessageUpdate:i,onMessageFinish:s})=>{var d;let c;if(a!=null&&a.length?(a&&(a==null?void 0:a.length)>1&&Er("Multiple schemas are not supported. Only the first schema will be used."),c=t(((d=a==null?void 0:a[0])==null?void 0:d.schema_items)||[],r)):o!=null&&o.length?c=e(o,r):c=n(r),!c)throw new Error("Stream is not supported");const{lastChunk:l,content:u}=await SS(c,i);return s==null||s({content:u,lastChunk:l}),{lastChunk:l,content:u}},[n,t,e])}},Uh=globalThis||void 0||self;var cc={},CS;function dz(){if(CS)return cc;CS=1,Object.defineProperty(cc,"__esModule",{value:!0}),cc.parse=i,cc.serialize=l;const e=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,t=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,o=Object.prototype.toString,a=(()=>{const f=function(){};return f.prototype=Object.create(null),f})();function i(f,p){const y=new a,m=f.length;if(m<2)return y;const v=(p==null?void 0:p.decode)||u;let b=0;do{const x=f.indexOf("=",b);if(x===-1)break;const _=f.indexOf(";",b),w=_===-1?m:_;if(x>w){b=f.lastIndexOf(";",x-1)+1;continue}const j=s(f,b,x),E=c(f,x,j),S=f.slice(j,E);if(y[S]===void 0){let O=s(f,x+1,w),P=c(f,w,O);const M=v(f.slice(O,P));y[S]=M}b=w+1}while(b<m);return y}function s(f,p,y){do{const m=f.charCodeAt(p);if(m!==32&&m!==9)return p}while(++p<y);return y}function c(f,p,y){for(;p>y;){const m=f.charCodeAt(--p);if(m!==32&&m!==9)return p+1}return y}function l(f,p,y){const m=(y==null?void 0:y.encode)||encodeURIComponent;if(!e.test(f))throw new TypeError(`argument name is invalid: ${f}`);const v=m(p);if(!t.test(v))throw new TypeError(`argument val is invalid: ${p}`);let b=f+"="+v;if(!y)return b;if(y.maxAge!==void 0){if(!Number.isInteger(y.maxAge))throw new TypeError(`option maxAge is invalid: ${y.maxAge}`);b+="; Max-Age="+y.maxAge}if(y.domain){if(!n.test(y.domain))throw new TypeError(`option domain is invalid: ${y.domain}`);b+="; Domain="+y.domain}if(y.path){if(!r.test(y.path))throw new TypeError(`option path is invalid: ${y.path}`);b+="; Path="+y.path}if(y.expires){if(!d(y.expires)||!Number.isFinite(y.expires.valueOf()))throw new TypeError(`option expires is invalid: ${y.expires}`);b+="; Expires="+y.expires.toUTCString()}if(y.httpOnly&&(b+="; HttpOnly"),y.secure&&(b+="; Secure"),y.partitioned&&(b+="; Partitioned"),y.priority)switch(typeof y.priority=="string"?y.priority.toLowerCase():void 0){case"low":b+="; Priority=Low";break;case"medium":b+="; Priority=Medium";break;case"high":b+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${y.priority}`)}if(y.sameSite)switch(typeof y.sameSite=="string"?y.sameSite.toLowerCase():y.sameSite){case!0:case"strict":b+="; SameSite=Strict";break;case"lax":b+="; SameSite=Lax";break;case"none":b+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${y.sameSite}`)}return b}function u(f){if(f.indexOf("%")===-1)return f;try{return decodeURIComponent(f)}catch{return f}}function d(f){return o.call(f)==="[object Date]"}return cc}dz();var OS="popstate";function fz(e={}){function t(r,o){let{pathname:a,search:i,hash:s}=r.location;return fi("",{pathname:a,search:i,hash:s},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(r,o){return typeof o=="string"?o:Kr(o)}return NS(t,n,null,e)}function pz(e={}){function t(o,a){let{pathname:i="/",search:s="",hash:c=""}=Xr(o.location.hash.substring(1));return!i.startsWith("/")&&!i.startsWith(".")&&(i="/"+i),fi("",{pathname:i,search:s,hash:c},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(o,a){let i=o.document.querySelector("base"),s="";if(i&&i.getAttribute("href")){let c=o.location.href,l=c.indexOf("#");s=l===-1?c:c.slice(0,l)}return s+"#"+(typeof a=="string"?a:Kr(a))}function r(o,a){Bt(o.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(a)})`)}return NS(t,n,r,e)}function $e(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Bt(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function hz(){return Math.random().toString(36).substring(2,10)}function MS(e,t){return{usr:e.state,key:e.key,idx:t}}function fi(e,t,n=null,r){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Xr(t):t,state:n,key:t&&t.key||r||hz()}}function Kr({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Xr(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function NS(e,t,n,r={}){let{window:o=document.defaultView,v5Compat:a=!1}=r,i=o.history,s="POP",c=null,l=u();l==null&&(l=0,i.replaceState({...i.state,idx:l},""));function u(){return(i.state||{idx:null}).idx}function d(){s="POP";let v=u(),b=v==null?null:v-l;l=v,c&&c({action:s,location:m.location,delta:b})}function f(v,b){s="PUSH";let x=fi(m.location,v,b);n&&n(x,v),l=u()+1;let _=MS(x,l),w=m.createHref(x);try{i.pushState(_,"",w)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;o.location.assign(w)}a&&c&&c({action:s,location:m.location,delta:1})}function p(v,b){s="REPLACE";let x=fi(m.location,v,b);n&&n(x,v),l=u();let _=MS(x,l),w=m.createHref(x);i.replaceState(_,"",w),a&&c&&c({action:s,location:m.location,delta:0})}function y(v){let b=o.location.origin!=="null"?o.location.origin:o.location.href,x=typeof v=="string"?v:Kr(v);return x=x.replace(/ $/,"%20"),$e(b,`No window.location.(origin|href) available to create URL for href: ${x}`),new URL(x,b)}let m={get action(){return s},get location(){return e(o,i)},listen(v){if(c)throw new Error("A history only accepts one active listener");return o.addEventListener(OS,d),c=v,()=>{o.removeEventListener(OS,d),c=null}},createHref(v){return t(o,v)},createURL:y,encodeLocation(v){let b=y(v);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:f,replace:p,go(v){return i.go(v)}};return m}var mz=new Set(["lazy","caseSensitive","path","id","index","children"]);function yz(e){return e.index===!0}function Wu(e,t,n=[],r={}){return e.map((o,a)=>{let i=[...n,String(a)],s=typeof o.id=="string"?o.id:i.join("-");if($e(o.index!==!0||!o.children,"Cannot specify children on an index route"),$e(!r[s],`Found a route id collision on id "${s}".  Route id's must be globally unique within Data Router usages`),yz(o)){let c={...o,...t(o),id:s};return r[s]=c,c}else{let c={...o,...t(o),id:s,children:void 0};return r[s]=c,o.children&&(c.children=Wu(o.children,t,i,r)),c}})}function Lo(e,t,n="/"){return qu(e,t,n,!1)}function qu(e,t,n,r){let o=typeof t=="string"?Xr(t):t,a=rr(o.pathname||"/",n);if(a==null)return null;let i=kS(e);vz(i);let s=null;for(let c=0;s==null&&c<i.length;++c){let l=Nz(a);s=Oz(i[c],l,r)}return s}function gz(e,t){let{route:n,pathname:r,params:o}=e;return{id:n.id,pathname:r,params:o,data:t[n.id],handle:n.handle}}function kS(e,t=[],n=[],r=""){let o=(a,i,s)=>{let c={relativePath:s===void 0?a.path||"":s,caseSensitive:a.caseSensitive===!0,childrenIndex:i,route:a};c.relativePath.startsWith("/")&&($e(c.relativePath.startsWith(r),`Absolute route path "${c.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(r.length));let l=Cr([r,c.relativePath]),u=n.concat(c);a.children&&a.children.length>0&&($e(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${l}".`),kS(a.children,t,u,l)),!(a.path==null&&!a.index)&&t.push({path:l,score:Sz(l,a.index),routesMeta:u})};return e.forEach((a,i)=>{var s;if(a.path===""||!((s=a.path)!=null&&s.includes("?")))o(a,i);else for(let c of PS(a.path))o(a,i,c)}),t}function PS(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,o=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return o?[a,""]:[a];let i=PS(r.join("/")),s=[];return s.push(...i.map(c=>c===""?a:[a,c].join("/"))),o&&s.push(...i),s.map(c=>e.startsWith("/")&&c===""?"/":c)}function vz(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:Cz(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var bz=/^:[\w-]+$/,xz=3,wz=2,_z=1,jz=10,Ez=-2,AS=e=>e==="*";function Sz(e,t){let n=e.split("/"),r=n.length;return n.some(AS)&&(r+=Ez),t&&(r+=wz),n.filter(o=>!AS(o)).reduce((o,a)=>o+(bz.test(a)?xz:a===""?_z:jz),r)}function Cz(e,t){return e.length===t.length&&e.slice(0,-1).every((n,r)=>n===t[r])?e[e.length-1]-t[t.length-1]:0}function Oz(e,t,n=!1){let{routesMeta:r}=e,o={},a="/",i=[];for(let s=0;s<r.length;++s){let c=r[s],l=s===r.length-1,u=a==="/"?t:t.slice(a.length)||"/",d=Yu({path:c.relativePath,caseSensitive:c.caseSensitive,end:l},u),f=c.route;if(!d&&l&&n&&!r[r.length-1].route.index&&(d=Yu({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},u)),!d)return null;Object.assign(o,d.params),i.push({params:o,pathname:Cr([a,d.pathname]),pathnameBase:Az(Cr([a,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(a=Cr([a,d.pathnameBase]))}return i}function Yu(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=Mz(e.path,e.caseSensitive,e.end),o=t.match(n);if(!o)return null;let a=o[0],i=a.replace(/(.)\/+$/,"$1"),s=o.slice(1);return{params:r.reduce((c,{paramName:l,isOptional:u},d)=>{if(l==="*"){let p=s[d]||"";i=a.slice(0,a.length-p.length).replace(/(.)\/+$/,"$1")}const f=s[d];return u&&!f?c[l]=void 0:c[l]=(f||"").replace(/%2F/g,"/"),c},{}),pathname:a,pathnameBase:i,pattern:e}}function Mz(e,t=!1,n=!0){Bt(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],o="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,i,s)=>(r.push({paramName:i,isOptional:s!=null}),s?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),o+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":e!==""&&e!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,t?void 0:"i"),r]}function Nz(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Bt(!1,`The URL path "${e}" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function rr(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function kz(e,t="/"){let{pathname:n,search:r="",hash:o=""}=typeof e=="string"?Xr(e):e;return{pathname:n?n.startsWith("/")?n:Pz(n,t):t,search:Tz(r),hash:Rz(o)}}function Pz(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function qm(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function TS(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Ku(e){let t=TS(e);return t.map((n,r)=>r===t.length-1?n.pathname:n.pathnameBase)}function Xu(e,t,n,r=!1){let o;typeof e=="string"?o=Xr(e):(o={...e},$e(!o.pathname||!o.pathname.includes("?"),qm("?","pathname","search",o)),$e(!o.pathname||!o.pathname.includes("#"),qm("#","pathname","hash",o)),$e(!o.search||!o.search.includes("#"),qm("#","search","hash",o)));let a=e===""||o.pathname==="",i=a?"/":o.pathname,s;if(i==null)s=n;else{let d=t.length-1;if(!r&&i.startsWith("..")){let f=i.split("/");for(;f[0]==="..";)f.shift(),d-=1;o.pathname=f.join("/")}s=d>=0?t[d]:"/"}let c=kz(o,s),l=i&&i!=="/"&&i.endsWith("/"),u=(a||i===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(l||u)&&(c.pathname+="/"),c}var Cr=e=>e.join("/").replace(/\/\/+/g,"/"),Az=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Tz=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Rz=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,Qu=class{constructor(e,t,n,r=!1){this.status=e,this.statusText=t||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function Ju(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var RS=["POST","PUT","PATCH","DELETE"],Iz=new Set(RS),Dz=["GET",...RS],Lz=new Set(Dz),Fz=new Set([301,302,303,307,308]),Bz=new Set([307,308]),Ym={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},$z={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},lc={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},Km=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,zz=e=>({hasErrorBoundary:!!e.hasErrorBoundary}),IS="remix-router-transitions",DS=Symbol("ResetLoaderData");function LS(e){const t=e.window?e.window:typeof window<"u"?window:void 0,n=typeof t<"u"&&typeof t.document<"u"&&typeof t.document.createElement<"u";$e(e.routes.length>0,"You must provide a non-empty routes array to createRouter");let r=e.mapRouteProperties||zz,o={},a=Wu(e.routes,r,void 0,o),i,s=e.basename||"/",c=e.dataStrategy||qz,l=e.patchRoutesOnNavigation,u={...e.future},d=null,f=new Set,p=null,y=null,m=null,v=e.hydrationData!=null,b=Lo(a,e.history.location,s),x=null;if(b==null&&!l){let V=Un(404,{pathname:e.history.location.pathname}),{matches:Y,route:ne}=XS(a);b=Y,x={[ne.id]:V}}b&&!e.hydrationData&&je(b,a,e.history.location.pathname).active&&(b=null);let _;if(b)if(b.some(V=>V.route.lazy))_=!1;else if(!b.some(V=>V.route.loader))_=!0;else{let V=e.hydrationData?e.hydrationData.loaderData:null,Y=e.hydrationData?e.hydrationData.errors:null;if(Y){let ne=b.findIndex(ue=>Y[ue.route.id]!==void 0);_=b.slice(0,ne+1).every(ue=>!Qm(ue.route,V,Y))}else _=b.every(ne=>!Qm(ne.route,V,Y))}else{_=!1,b=[];let V=je(null,a,e.history.location.pathname);V.active&&V.matches&&(b=V.matches)}let w,j={historyAction:e.history.action,location:e.history.location,matches:b,initialized:_,navigation:Ym,restoreScrollPosition:e.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||x,fetchers:new Map,blockers:new Map},E="POP",S=!1,O,P=!1,M=new Map,k=null,R=!1,A=!1,C=new Set,N=new Map,T=0,I=-1,L=new Map,D=new Set,B=new Map,H=new Map,F=new Set,z=new Map,G,Q=null;function oe(){if(d=e.history.listen(({action:V,location:Y,delta:ne})=>{if(G){G(),G=void 0;return}Bt(z.size===0||ne!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let ue=Mt({currentLocation:j.location,nextLocation:Y,historyAction:V});if(ue&&ne!=null){let Se=new Promise(Pe=>{G=Pe});e.history.go(ne*-1),Ne(ue,{state:"blocked",location:Y,proceed(){Ne(ue,{state:"proceeding",proceed:void 0,reset:void 0,location:Y}),Se.then(()=>e.history.go(ne))},reset(){let Pe=new Map(j.blockers);Pe.set(ue,lc),W({blockers:Pe})}});return}return se(V,Y)}),n){r7(t,M);let V=()=>o7(t,M);t.addEventListener("pagehide",V),k=()=>t.removeEventListener("pagehide",V)}return j.initialized||se("POP",j.location,{initialHydration:!0}),w}function Z(){d&&d(),k&&k(),f.clear(),O&&O.abort(),j.fetchers.forEach((V,Y)=>_r(Y)),j.blockers.forEach((V,Y)=>pe(Y))}function q(V){return f.add(V),()=>f.delete(V)}function W(V,Y={}){j={...j,...V};let ne=[],ue=[];j.fetchers.forEach((Se,Pe)=>{Se.state==="idle"&&(F.has(Pe)?ne.push(Pe):ue.push(Pe))}),[...f].forEach(Se=>Se(j,{deletedFetchers:ne,viewTransitionOpts:Y.viewTransitionOpts,flushSync:Y.flushSync===!0})),ne.forEach(Se=>_r(Se)),ue.forEach(Se=>j.fetchers.delete(Se))}function J(V,Y,{flushSync:ne}={}){var be,De;let ue=j.actionData!=null&&j.navigation.formMethod!=null&&or(j.navigation.formMethod)&&j.navigation.state==="loading"&&((be=V.state)==null?void 0:be._isRedirect)!==!0,Se;Y.actionData?Object.keys(Y.actionData).length>0?Se=Y.actionData:Se=null:ue?Se=j.actionData:Se=null;let Pe=Y.loaderData?YS(j.loaderData,Y.loaderData,Y.matches||[],Y.errors):j.loaderData,Ie=j.blockers;Ie.size>0&&(Ie=new Map(Ie),Ie.forEach((Ue,gt)=>Ie.set(gt,lc)));let Ce=S===!0||j.navigation.formMethod!=null&&or(j.navigation.formMethod)&&((De=V.state)==null?void 0:De._isRedirect)!==!0;i&&(a=i,i=void 0),R||E==="POP"||(E==="PUSH"?e.history.push(V,V.state):E==="REPLACE"&&e.history.replace(V,V.state));let Me;if(E==="POP"){let Ue=M.get(j.location.pathname);Ue&&Ue.has(V.pathname)?Me={currentLocation:j.location,nextLocation:V}:M.has(V.pathname)&&(Me={currentLocation:V,nextLocation:j.location})}else if(P){let Ue=M.get(j.location.pathname);Ue?Ue.add(V.pathname):(Ue=new Set([V.pathname]),M.set(j.location.pathname,Ue)),Me={currentLocation:j.location,nextLocation:V}}W({...Y,actionData:Se,loaderData:Pe,historyAction:E,location:V,initialized:!0,navigation:Ym,revalidation:"idle",restoreScrollPosition:_e(V,Y.matches||j.matches),preventScrollReset:Ce,blockers:Ie},{viewTransitionOpts:Me,flushSync:ne===!0}),E="POP",S=!1,P=!1,R=!1,A=!1,Q==null||Q.resolve(),Q=null}async function te(V,Y){if(typeof V=="number"){e.history.go(V);return}let ne=Xm(j.location,j.matches,s,V,Y==null?void 0:Y.fromRouteId,Y==null?void 0:Y.relative),{path:ue,submission:Se,error:Pe}=FS(!1,ne,Y),Ie=j.location,Ce=fi(j.location,ue,Y&&Y.state);Ce={...Ce,...e.history.encodeLocation(Ce)};let Me=Y&&Y.replace!=null?Y.replace:void 0,be="PUSH";Me===!0?be="REPLACE":Me===!1||Se!=null&&or(Se.formMethod)&&Se.formAction===j.location.pathname+j.location.search&&(be="REPLACE");let De=Y&&"preventScrollReset"in Y?Y.preventScrollReset===!0:void 0,Ue=(Y&&Y.flushSync)===!0,gt=Mt({currentLocation:Ie,nextLocation:Ce,historyAction:be});if(gt){Ne(gt,{state:"blocked",location:Ce,proceed(){Ne(gt,{state:"proceeding",proceed:void 0,reset:void 0,location:Ce}),te(V,Y)},reset(){let _t=new Map(j.blockers);_t.set(gt,lc),W({blockers:_t})}});return}await se(be,Ce,{submission:Se,pendingError:Pe,preventScrollReset:De,replace:Y&&Y.replace,enableViewTransition:Y&&Y.viewTransition,flushSync:Ue})}function $(){Q||(Q=a7()),St(),W({revalidation:"loading"});let V=Q.promise;return j.navigation.state==="submitting"?V:j.navigation.state==="idle"?(se(j.historyAction,j.location,{startUninterruptedRevalidation:!0}),V):(se(E||j.historyAction,j.navigation.location,{overrideNavigation:j.navigation,enableViewTransition:P===!0}),V)}async function se(V,Y,ne){O&&O.abort(),O=null,E=V,R=(ne&&ne.startUninterruptedRevalidation)===!0,we(j.location,j.matches),S=(ne&&ne.preventScrollReset)===!0,P=(ne&&ne.enableViewTransition)===!0;let ue=i||a,Se=ne&&ne.overrideNavigation,Pe=Lo(ue,Y,s),Ie=(ne&&ne.flushSync)===!0,Ce=je(Pe,ue,Y.pathname);if(Ce.active&&Ce.matches&&(Pe=Ce.matches),!Pe){let{error:Ke,notFoundMatches:Cn,route:Pt}=wt(Y.pathname);J(Y,{matches:Cn,loaderData:{},errors:{[Pt.id]:Ke}},{flushSync:Ie});return}if(j.initialized&&!A&&Gz(j.location,Y)&&!(ne&&ne.submission&&or(ne.submission.formMethod))){J(Y,{matches:Pe},{flushSync:Ie});return}O=new AbortController;let Me=pi(e.history,Y,O.signal,ne&&ne.submission),be;if(ne&&ne.pendingError)be=[ya(Pe).route.id,{type:"error",error:ne.pendingError}];else if(ne&&ne.submission&&or(ne.submission.formMethod)){let Ke=await le(Me,Y,ne.submission,Pe,Ce.active,{replace:ne.replace,flushSync:Ie});if(Ke.shortCircuited)return;if(Ke.pendingActionResult){let[Cn,Pt]=Ke.pendingActionResult;if(An(Pt)&&Ju(Pt.error)&&Pt.error.status===404){O=null,J(Y,{matches:Ke.matches,loaderData:{},errors:{[Cn]:Pt.error}});return}}Pe=Ke.matches||Pe,be=Ke.pendingActionResult,Se=Zm(Y,ne.submission),Ie=!1,Ce.active=!1,Me=pi(e.history,Me.url,Me.signal)}let{shortCircuited:De,matches:Ue,loaderData:gt,errors:_t}=await ve(Me,Y,Pe,Ce.active,Se,ne&&ne.submission,ne&&ne.fetcherSubmission,ne&&ne.replace,ne&&ne.initialHydration===!0,Ie,be);De||(O=null,J(Y,{matches:Ue||Pe,...KS(be),loaderData:gt,errors:_t}))}async function le(V,Y,ne,ue,Se,Pe={}){St();let Ie=t7(Y,ne);if(W({navigation:Ie},{flushSync:Pe.flushSync===!0}),Se){let be=await Le(ue,Y.pathname,V.signal);if(be.type==="aborted")return{shortCircuited:!0};if(be.type==="error"){let De=ya(be.partialMatches).route.id;return{matches:be.partialMatches,pendingActionResult:[De,{type:"error",error:be.error}]}}else if(be.matches)ue=be.matches;else{let{notFoundMatches:De,error:Ue,route:gt}=wt(Y.pathname);return{matches:De,pendingActionResult:[gt.id,{type:"error",error:Ue}]}}}let Ce,Me=uc(ue,Y);if(!Me.route.action&&!Me.route.lazy)Ce={type:"error",error:Un(405,{method:V.method,pathname:Y.pathname,routeId:Me.route.id})};else if(Ce=(await ct("action",j,V,[Me],ue,null))[Me.route.id],V.signal.aborted)return{shortCircuited:!0};if(ga(Ce)){let be;return Pe&&Pe.replace!=null?be=Pe.replace:be=HS(Ce.response.headers.get("Location"),new URL(V.url),s)===j.location.pathname+j.location.search,await He(V,Ce,!0,{submission:ne,replace:be}),{shortCircuited:!0}}if(An(Ce)){let be=ya(ue,Me.route.id);return(Pe&&Pe.replace)!==!0&&(E="PUSH"),{matches:ue,pendingActionResult:[be.route.id,Ce]}}return{matches:ue,pendingActionResult:[Me.route.id,Ce]}}async function ve(V,Y,ne,ue,Se,Pe,Ie,Ce,Me,be,De){let Ue=Se||Zm(Y,Pe),gt=Pe||Ie||ZS(Ue),_t=!R&&!Me;if(ue){if(_t){let On=Te(De);W({navigation:Ue,...On!==void 0?{actionData:On}:{}},{flushSync:be})}let tt=await Le(ne,Y.pathname,V.signal);if(tt.type==="aborted")return{shortCircuited:!0};if(tt.type==="error"){let On=ya(tt.partialMatches).route.id;return{matches:tt.partialMatches,loaderData:{},errors:{[On]:tt.error}}}else if(tt.matches)ne=tt.matches;else{let{error:On,notFoundMatches:ri,route:Ot}=wt(Y.pathname);return{matches:ri,loaderData:{},errors:{[Ot.id]:On}}}}let Ke=i||a,[Cn,Pt]=$S(e.history,j,ne,gt,Y,Me===!0,A,C,F,B,D,Ke,s,De);if(I=++T,Cn.length===0&&Pt.length===0){let tt=X();return J(Y,{matches:ne,loaderData:{},errors:De&&An(De[1])?{[De[0]]:De[1].error}:null,...KS(De),...tt?{fetchers:new Map(j.fetchers)}:{}},{flushSync:be}),{shortCircuited:!0}}if(_t){let tt={};if(!ue){tt.navigation=Ue;let On=Te(De);On!==void 0&&(tt.actionData=On)}Pt.length>0&&(tt.fetchers=qe(Pt)),W(tt,{flushSync:be})}Pt.forEach(tt=>{Zn(tt.key),tt.controller&&N.set(tt.key,tt.controller)});let ni=()=>Pt.forEach(tt=>Zn(tt.key));O&&O.signal.addEventListener("abort",ni);let{loaderResults:jr,fetcherResults:ua}=await Ut(j,ne,Cn,Pt,V);if(V.signal.aborted)return{shortCircuited:!0};O&&O.signal.removeEventListener("abort",ni),Pt.forEach(tt=>N.delete(tt.key));let Ur=Gu(jr);if(Ur)return await He(V,Ur.result,!0,{replace:Ce}),{shortCircuited:!0};if(Ur=Gu(ua),Ur)return D.add(Ur.key),await He(V,Ur.result,!0,{replace:Ce}),{shortCircuited:!0};let{loaderData:Mu,errors:er}=qS(j,ne,jr,De,Pt,ua);Me&&j.errors&&(er={...j.errors,...er});let qs=X(),Ys=ee(I),Ks=qs||Ys||Pt.length>0;return{matches:ne,loaderData:Mu,errors:er,...Ks?{fetchers:new Map(j.fetchers)}:{}}}function Te(V){if(V&&!An(V[1]))return{[V[0]]:V[1].data};if(j.actionData)return Object.keys(j.actionData).length===0?null:j.actionData}function qe(V){return V.forEach(Y=>{let ne=j.fetchers.get(Y.key),ue=dc(void 0,ne?ne.data:void 0);j.fetchers.set(Y.key,ue)}),new Map(j.fetchers)}async function Ye(V,Y,ne,ue){Zn(V);let Se=(ue&&ue.flushSync)===!0,Pe=i||a,Ie=Xm(j.location,j.matches,s,ne,Y,ue==null?void 0:ue.relative),Ce=Lo(Pe,Ie,s),Me=je(Ce,Pe,Ie);if(Me.active&&Me.matches&&(Ce=Me.matches),!Ce){Rt(V,Y,Un(404,{pathname:Ie}),{flushSync:Se});return}let{path:be,submission:De,error:Ue}=FS(!0,Ie,ue);if(Ue){Rt(V,Y,Ue,{flushSync:Se});return}let gt=uc(Ce,be),_t=(ue&&ue.preventScrollReset)===!0;if(De&&or(De.formMethod)){await ze(V,Y,be,gt,Ce,Me.active,Se,_t,De);return}B.set(V,{routeId:Y,path:be}),await st(V,Y,be,gt,Ce,Me.active,Se,_t,De)}async function ze(V,Y,ne,ue,Se,Pe,Ie,Ce,Me){St(),B.delete(V);function be(Ot){if(!Ot.route.action&&!Ot.route.lazy){let Ro=Un(405,{method:Me.formMethod,pathname:ne,routeId:Y});return Rt(V,Y,Ro,{flushSync:Ie}),!0}return!1}if(!Pe&&be(ue))return;let De=j.fetchers.get(V);yt(V,n7(Me,De),{flushSync:Ie});let Ue=new AbortController,gt=pi(e.history,ne,Ue.signal,Me);if(Pe){let Ot=await Le(Se,ne,gt.signal);if(Ot.type==="aborted")return;if(Ot.type==="error"){Rt(V,Y,Ot.error,{flushSync:Ie});return}else if(Ot.matches){if(Se=Ot.matches,ue=uc(Se,ne),be(ue))return}else{Rt(V,Y,Un(404,{pathname:ne}),{flushSync:Ie});return}}N.set(V,Ue);let _t=T,Ke=(await ct("action",j,gt,[ue],Se,V))[ue.route.id];if(gt.signal.aborted){N.get(V)===Ue&&N.delete(V);return}if(F.has(V)){if(ga(Ke)||An(Ke)){yt(V,Fo(void 0));return}}else{if(ga(Ke))if(N.delete(V),I>_t){yt(V,Fo(void 0));return}else return D.add(V),yt(V,dc(Me)),He(gt,Ke,!1,{fetcherSubmission:Me,preventScrollReset:Ce});if(An(Ke)){Rt(V,Y,Ke.error);return}}let Cn=j.navigation.location||j.location,Pt=pi(e.history,Cn,Ue.signal),ni=i||a,jr=j.navigation.state!=="idle"?Lo(ni,j.navigation.location,s):j.matches;$e(jr,"Didn't find any matches after fetcher action");let ua=++T;L.set(V,ua);let Ur=dc(Me,Ke.data);j.fetchers.set(V,Ur);let[Mu,er]=$S(e.history,j,jr,Me,Cn,!1,A,C,F,B,D,ni,s,[ue.route.id,Ke]);er.filter(Ot=>Ot.key!==V).forEach(Ot=>{let Ro=Ot.key,Dh=j.fetchers.get(Ro),yE=dc(void 0,Dh?Dh.data:void 0);j.fetchers.set(Ro,yE),Zn(Ro),Ot.controller&&N.set(Ro,Ot.controller)}),W({fetchers:new Map(j.fetchers)});let qs=()=>er.forEach(Ot=>Zn(Ot.key));Ue.signal.addEventListener("abort",qs);let{loaderResults:Ys,fetcherResults:Ks}=await Ut(j,jr,Mu,er,Pt);if(Ue.signal.aborted)return;Ue.signal.removeEventListener("abort",qs),L.delete(V),N.delete(V),er.forEach(Ot=>N.delete(Ot.key));let tt=Gu(Ys);if(tt)return He(Pt,tt.result,!1,{preventScrollReset:Ce});if(tt=Gu(Ks),tt)return D.add(tt.key),He(Pt,tt.result,!1,{preventScrollReset:Ce});let{loaderData:On,errors:ri}=qS(j,jr,Ys,void 0,er,Ks);if(j.fetchers.has(V)){let Ot=Fo(Ke.data);j.fetchers.set(V,Ot)}ee(ua),j.navigation.state==="loading"&&ua>I?($e(E,"Expected pending action"),O&&O.abort(),J(j.navigation.location,{matches:jr,loaderData:On,errors:ri,fetchers:new Map(j.fetchers)})):(W({errors:ri,loaderData:YS(j.loaderData,On,jr,ri),fetchers:new Map(j.fetchers)}),A=!1)}async function st(V,Y,ne,ue,Se,Pe,Ie,Ce,Me){let be=j.fetchers.get(V);yt(V,dc(Me,be?be.data:void 0),{flushSync:Ie});let De=new AbortController,Ue=pi(e.history,ne,De.signal);if(Pe){let Ke=await Le(Se,ne,Ue.signal);if(Ke.type==="aborted")return;if(Ke.type==="error"){Rt(V,Y,Ke.error,{flushSync:Ie});return}else if(Ke.matches)Se=Ke.matches,ue=uc(Se,ne);else{Rt(V,Y,Un(404,{pathname:ne}),{flushSync:Ie});return}}N.set(V,De);let gt=T,_t=(await ct("loader",j,Ue,[ue],Se,V))[ue.route.id];if(N.get(V)===De&&N.delete(V),!Ue.signal.aborted){if(F.has(V)){yt(V,Fo(void 0));return}if(ga(_t))if(I>gt){yt(V,Fo(void 0));return}else{D.add(V),await He(Ue,_t,!1,{preventScrollReset:Ce});return}if(An(_t)){Rt(V,Y,_t.error);return}yt(V,Fo(_t.data))}}async function He(V,Y,ne,{submission:ue,fetcherSubmission:Se,preventScrollReset:Pe,replace:Ie}={}){Y.response.headers.has("X-Remix-Revalidate")&&(A=!0);let Ce=Y.response.headers.get("Location");$e(Ce,"Expected a Location header on the redirect Response"),Ce=HS(Ce,new URL(V.url),s);let Me=fi(j.location,Ce,{_isRedirect:!0});if(n){let Ke=!1;if(Y.response.headers.has("X-Remix-Reload-Document"))Ke=!0;else if(Km.test(Ce)){const Cn=e.history.createURL(Ce);Ke=Cn.origin!==t.location.origin||rr(Cn.pathname,s)==null}if(Ke){Ie?t.location.replace(Ce):t.location.assign(Ce);return}}O=null;let be=Ie===!0||Y.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:De,formAction:Ue,formEncType:gt}=j.navigation;!ue&&!Se&&De&&Ue&&gt&&(ue=ZS(j.navigation));let _t=ue||Se;if(Bz.has(Y.response.status)&&_t&&or(_t.formMethod))await se(be,Me,{submission:{..._t,formAction:Ce},preventScrollReset:Pe||S,enableViewTransition:ne?P:void 0});else{let Ke=Zm(Me,ue);await se(be,Me,{overrideNavigation:Ke,fetcherSubmission:Se,preventScrollReset:Pe||S,enableViewTransition:ne?P:void 0})}}async function ct(V,Y,ne,ue,Se,Pe){let Ie,Ce={};try{Ie=await Yz(c,V,Y,ne,ue,Se,Pe,o,r)}catch(Me){return ue.forEach(be=>{Ce[be.route.id]={type:"error",error:Me}}),Ce}for(let[Me,be]of Object.entries(Ie))if(Zz(be)){let De=be.result;Ce[Me]={type:"redirect",response:Qz(De,ne,Me,Se,s)}}else Ce[Me]=await Xz(be);return Ce}async function Ut(V,Y,ne,ue,Se){let Pe=ct("loader",V,Se,ne,Y,null),Ie=Promise.all(ue.map(async be=>{if(be.matches&&be.match&&be.controller){let De=(await ct("loader",V,pi(e.history,be.path,be.controller.signal),[be.match],be.matches,be.key))[be.match.route.id];return{[be.key]:De}}else return Promise.resolve({[be.key]:{type:"error",error:Un(404,{pathname:be.path})}})})),Ce=await Pe,Me=(await Ie).reduce((be,De)=>Object.assign(be,De),{});return{loaderResults:Ce,fetcherResults:Me}}function St(){A=!0,B.forEach((V,Y)=>{N.has(Y)&&C.add(Y),Zn(Y)})}function yt(V,Y,ne={}){j.fetchers.set(V,Y),W({fetchers:new Map(j.fetchers)},{flushSync:(ne&&ne.flushSync)===!0})}function Rt(V,Y,ne,ue={}){let Se=ya(j.matches,Y);_r(V),W({errors:{[Se.route.id]:ne},fetchers:new Map(j.fetchers)},{flushSync:(ue&&ue.flushSync)===!0})}function bn(V){return H.set(V,(H.get(V)||0)+1),F.has(V)&&F.delete(V),j.fetchers.get(V)||$z}function _r(V){let Y=j.fetchers.get(V);N.has(V)&&!(Y&&Y.state==="loading"&&L.has(V))&&Zn(V),B.delete(V),L.delete(V),D.delete(V),F.delete(V),C.delete(V),j.fetchers.delete(V)}function ti(V){let Y=(H.get(V)||0)-1;Y<=0?(H.delete(V),F.add(V)):H.set(V,Y),W({fetchers:new Map(j.fetchers)})}function Zn(V){let Y=N.get(V);Y&&(Y.abort(),N.delete(V))}function la(V){for(let Y of V){let ne=bn(Y),ue=Fo(ne.data);j.fetchers.set(Y,ue)}}function X(){let V=[],Y=!1;for(let ne of D){let ue=j.fetchers.get(ne);$e(ue,`Expected fetcher: ${ne}`),ue.state==="loading"&&(D.delete(ne),V.push(ne),Y=!0)}return la(V),Y}function ee(V){let Y=[];for(let[ne,ue]of L)if(ue<V){let Se=j.fetchers.get(ne);$e(Se,`Expected fetcher: ${ne}`),Se.state==="loading"&&(Zn(ne),L.delete(ne),Y.push(ne))}return la(Y),Y.length>0}function ie(V,Y){let ne=j.blockers.get(V)||lc;return z.get(V)!==Y&&z.set(V,Y),ne}function pe(V){j.blockers.delete(V),z.delete(V)}function Ne(V,Y){let ne=j.blockers.get(V)||lc;$e(ne.state==="unblocked"&&Y.state==="blocked"||ne.state==="blocked"&&Y.state==="blocked"||ne.state==="blocked"&&Y.state==="proceeding"||ne.state==="blocked"&&Y.state==="unblocked"||ne.state==="proceeding"&&Y.state==="unblocked",`Invalid blocker state transition: ${ne.state} -> ${Y.state}`);let ue=new Map(j.blockers);ue.set(V,Y),W({blockers:ue})}function Mt({currentLocation:V,nextLocation:Y,historyAction:ne}){if(z.size===0)return;z.size>1&&Bt(!1,"A router only supports one blocker at a time");let ue=Array.from(z.entries()),[Se,Pe]=ue[ue.length-1],Ie=j.blockers.get(Se);if(!(Ie&&Ie.state==="proceeding")&&Pe({currentLocation:V,nextLocation:Y,historyAction:ne}))return Se}function wt(V){let Y=Un(404,{pathname:V}),ne=i||a,{matches:ue,route:Se}=XS(ne);return{notFoundMatches:ue,route:Se,error:Y}}function Be(V,Y,ne){if(p=V,m=Y,y=ne||null,!v&&j.navigation===Ym){v=!0;let ue=_e(j.location,j.matches);ue!=null&&W({restoreScrollPosition:ue})}return()=>{p=null,m=null,y=null}}function ge(V,Y){return y&&y(V,Y.map(ne=>gz(ne,j.loaderData)))||V.key}function we(V,Y){if(p&&m){let ne=ge(V,Y);p[ne]=m()}}function _e(V,Y){if(p){let ne=ge(V,Y),ue=p[ne];if(typeof ue=="number")return ue}return null}function je(V,Y,ne){if(l)if(V){if(Object.keys(V[0].params).length>0)return{active:!0,matches:qu(Y,ne,s,!0)}}else return{active:!0,matches:qu(Y,ne,s,!0)||[]};return{active:!1,matches:null}}async function Le(V,Y,ne){if(!l)return{type:"success",matches:V};let ue=V;for(;;){let Se=i==null,Pe=i||a,Ie=o;try{await l({path:Y,matches:ue,patch:(be,De)=>{ne.aborted||VS(be,De,Pe,Ie,r)}})}catch(be){return{type:"error",error:be,partialMatches:ue}}finally{Se&&!ne.aborted&&(a=[...a])}if(ne.aborted)return{type:"aborted"};let Ce=Lo(Pe,Y,s);if(Ce)return{type:"success",matches:Ce};let Me=qu(Pe,Y,s,!0);if(!Me||ue.length===Me.length&&ue.every((be,De)=>be.route.id===Me[De].route.id))return{type:"success",matches:null};ue=Me}}function ut(V){o={},i=Wu(V,r,void 0,o)}function Ct(V,Y){let ne=i==null;VS(V,Y,i||a,o,r),ne&&(a=[...a],W({}))}return w={get basename(){return s},get future(){return u},get state(){return j},get routes(){return a},get window(){return t},initialize:oe,subscribe:q,enableScrollRestoration:Be,navigate:te,fetch:Ye,revalidate:$,createHref:V=>e.history.createHref(V),encodeLocation:V=>e.history.encodeLocation(V),getFetcher:bn,deleteFetcher:ti,dispose:Z,getBlocker:ie,deleteBlocker:pe,patchRoutes:Ct,_internalFetchControllers:N,_internalSetRoutes:ut},w}function Vz(e){return e!=null&&("formData"in e&&e.formData!=null||"body"in e&&e.body!==void 0)}function Xm(e,t,n,r,o,a){let i,s;if(o){i=[];for(let l of t)if(i.push(l),l.route.id===o){s=l;break}}else i=t,s=t[t.length-1];let c=Xu(r||".",Ku(i),rr(e.pathname,n)||e.pathname,a==="path");if(r==null&&(c.search=e.search,c.hash=e.hash),(r==null||r===""||r===".")&&s){let l=Gm(c.search);if(s.route.index&&!l)c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index";else if(!s.route.index&&l){let u=new URLSearchParams(c.search),d=u.getAll("index");u.delete("index"),d.filter(p=>p).forEach(p=>u.append("index",p));let f=u.toString();c.search=f?`?${f}`:""}}return n!=="/"&&(c.pathname=c.pathname==="/"?n:Cr([n,c.pathname])),Kr(c)}function FS(e,t,n){if(!n||!Vz(n))return{path:t};if(n.formMethod&&!e7(n.formMethod))return{path:t,error:Un(405,{method:n.formMethod})};let r=()=>({path:t,error:Un(400,{type:"invalid-body"})}),o=(n.formMethod||"get").toUpperCase(),a=QS(t);if(n.body!==void 0){if(n.formEncType==="text/plain"){if(!or(o))return r();let u=typeof n.body=="string"?n.body:n.body instanceof FormData||n.body instanceof URLSearchParams?Array.from(n.body.entries()).reduce((d,[f,p])=>`${d}${f}=${p}
`,""):String(n.body);return{path:t,submission:{formMethod:o,formAction:a,formEncType:n.formEncType,formData:void 0,json:void 0,text:u}}}else if(n.formEncType==="application/json"){if(!or(o))return r();try{let u=typeof n.body=="string"?JSON.parse(n.body):n.body;return{path:t,submission:{formMethod:o,formAction:a,formEncType:n.formEncType,formData:void 0,json:u,text:void 0}}}catch{return r()}}}$e(typeof FormData=="function","FormData is not available in this environment");let i,s;if(n.formData)i=Jm(n.formData),s=n.formData;else if(n.body instanceof FormData)i=Jm(n.body),s=n.body;else if(n.body instanceof URLSearchParams)i=n.body,s=WS(i);else if(n.body==null)i=new URLSearchParams,s=new FormData;else try{i=new URLSearchParams(n.body),s=WS(i)}catch{return r()}let c={formMethod:o,formAction:a,formEncType:n&&n.formEncType||"application/x-www-form-urlencoded",formData:s,json:void 0,text:void 0};if(or(c.formMethod))return{path:t,submission:c};let l=Xr(t);return e&&l.search&&Gm(l.search)&&i.append("index",""),l.search=`?${i}`,{path:Kr(l),submission:c}}function BS(e,t,n=!1){let r=e.findIndex(o=>o.route.id===t);return r>=0?e.slice(0,n?r+1:r):e}function $S(e,t,n,r,o,a,i,s,c,l,u,d,f,p){let y=p?An(p[1])?p[1].error:p[1].data:void 0,m=e.createURL(t.location),v=e.createURL(o),b=n;a&&t.errors?b=BS(n,Object.keys(t.errors)[0],!0):p&&An(p[1])&&(b=BS(n,p[0]));let x=p?p[1].statusCode:void 0,_=x&&x>=400,w=b.filter((E,S)=>{let{route:O}=E;if(O.lazy)return!0;if(O.loader==null)return!1;if(a)return Qm(O,t.loaderData,t.errors);if(Uz(t.loaderData,t.matches[S],E))return!0;let P=t.matches[S],M=E;return zS(E,{currentUrl:m,currentParams:P.params,nextUrl:v,nextParams:M.params,...r,actionResult:y,actionStatus:x,defaultShouldRevalidate:_?!1:i||m.pathname+m.search===v.pathname+v.search||m.search!==v.search||Hz(P,M)})}),j=[];return l.forEach((E,S)=>{if(a||!n.some(R=>R.route.id===E.routeId)||c.has(S))return;let O=Lo(d,E.path,f);if(!O){j.push({key:S,routeId:E.routeId,path:E.path,matches:null,match:null,controller:null});return}let P=t.fetchers.get(S),M=uc(O,E.path),k=!1;u.has(S)?k=!1:s.has(S)?(s.delete(S),k=!0):P&&P.state!=="idle"&&P.data===void 0?k=i:k=zS(M,{currentUrl:m,currentParams:t.matches[t.matches.length-1].params,nextUrl:v,nextParams:n[n.length-1].params,...r,actionResult:y,actionStatus:x,defaultShouldRevalidate:_?!1:i}),k&&j.push({key:S,routeId:E.routeId,path:E.path,matches:O,match:M,controller:new AbortController})}),[w,j]}function Qm(e,t,n){if(e.lazy)return!0;if(!e.loader)return!1;let r=t!=null&&t[e.id]!==void 0,o=n!=null&&n[e.id]!==void 0;return!r&&o?!1:typeof e.loader=="function"&&e.loader.hydrate===!0?!0:!r&&!o}function Uz(e,t,n){let r=!t||n.route.id!==t.route.id,o=!e.hasOwnProperty(n.route.id);return r||o}function Hz(e,t){let n=e.route.path;return e.pathname!==t.pathname||n!=null&&n.endsWith("*")&&e.params["*"]!==t.params["*"]}function zS(e,t){if(e.route.shouldRevalidate){let n=e.route.shouldRevalidate(t);if(typeof n=="boolean")return n}return t.defaultShouldRevalidate}function VS(e,t,n,r,o){let a;if(e){let c=r[e];$e(c,`No route found to patch children into: routeId = ${e}`),c.children||(c.children=[]),a=c.children}else a=n;let i=t.filter(c=>!a.some(l=>US(c,l))),s=Wu(i,o,[e||"_","patch",String((a==null?void 0:a.length)||"0")],r);a.push(...s)}function US(e,t){return"id"in e&&"id"in t&&e.id===t.id?!0:e.index===t.index&&e.path===t.path&&e.caseSensitive===t.caseSensitive?(!e.children||e.children.length===0)&&(!t.children||t.children.length===0)?!0:e.children.every((n,r)=>{var o;return(o=t.children)==null?void 0:o.some(a=>US(n,a))}):!1}async function Wz(e,t,n){if(!e.lazy)return;let r=await e.lazy();if(!e.lazy)return;let o=n[e.id];$e(o,"No route found in manifest");let a={};for(let i in r){let s=o[i]!==void 0&&i!=="hasErrorBoundary";Bt(!s,`Route "${o.id}" has a static property "${i}" defined but its lazy function is also returning a value for this property. The lazy route property "${i}" will be ignored.`),!s&&!mz.has(i)&&(a[i]=r[i])}Object.assign(o,a),Object.assign(o,{...t(o),lazy:void 0})}async function qz({matches:e}){let t=e.filter(n=>n.shouldLoad);return(await Promise.all(t.map(n=>n.resolve()))).reduce((n,r,o)=>Object.assign(n,{[t[o].route.id]:r}),{})}async function Yz(e,t,n,r,o,a,i,s,c,l){let u=a.map(p=>p.route.lazy?Wz(p.route,c,s):void 0),d=a.map((p,y)=>{let m=u[y],v=o.some(b=>b.route.id===p.route.id);return{...p,shouldLoad:v,resolve:async b=>(b&&r.method==="GET"&&(p.route.lazy||p.route.loader)&&(v=!0),v?Kz(t,r,p,m,b,l):Promise.resolve({type:"data",result:void 0}))}}),f=await e({matches:d,request:r,params:a[0].params,fetcherKey:i,context:l});try{await Promise.all(u)}catch{}return f}async function Kz(e,t,n,r,o,a){let i,s,c=l=>{let u,d=new Promise((y,m)=>u=m);s=()=>u(),t.signal.addEventListener("abort",s);let f=y=>typeof l!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${e}" [routeId: ${n.route.id}]`)):l({request:t,params:n.params,context:a},...y!==void 0?[y]:[]),p=(async()=>{try{return{type:"data",result:await(o?o(y=>f(y)):f())}}catch(y){return{type:"error",result:y}}})();return Promise.race([p,d])};try{let l=n.route[e];if(r)if(l){let u,[d]=await Promise.all([c(l).catch(f=>{u=f}),r]);if(u!==void 0)throw u;i=d}else if(await r,l=n.route[e],l)i=await c(l);else if(e==="action"){let u=new URL(t.url),d=u.pathname+u.search;throw Un(405,{method:t.method,pathname:d,routeId:n.route.id})}else return{type:"data",result:void 0};else if(l)i=await c(l);else{let u=new URL(t.url),d=u.pathname+u.search;throw Un(404,{pathname:d})}}catch(l){return{type:"error",result:l}}finally{s&&t.signal.removeEventListener("abort",s)}return i}async function Xz(e){var r,o,a,i;let{result:t,type:n}=e;if(GS(t)){let s;try{let c=t.headers.get("Content-Type");c&&/\bapplication\/json\b/.test(c)?t.body==null?s=null:s=await t.json():s=await t.text()}catch(c){return{type:"error",error:c}}return n==="error"?{type:"error",error:new Qu(t.status,t.statusText,s),statusCode:t.status,headers:t.headers}:{type:"data",data:s,statusCode:t.status,headers:t.headers}}if(n==="error"){if(JS(t)){if(t.data instanceof Error)return{type:"error",error:t.data,statusCode:(r=t.init)==null?void 0:r.status};t=new Qu(((o=t.init)==null?void 0:o.status)||500,void 0,t.data)}return{type:"error",error:t,statusCode:Ju(t)?t.status:void 0}}return JS(t)?{type:"data",data:t.data,statusCode:(a=t.init)==null?void 0:a.status,headers:(i=t.init)!=null&&i.headers?new Headers(t.init.headers):void 0}:{type:"data",data:t}}function Qz(e,t,n,r,o){let a=e.headers.get("Location");if($e(a,"Redirects returned/thrown from loaders/actions must have a Location header"),!Km.test(a)){let i=r.slice(0,r.findIndex(s=>s.route.id===n)+1);a=Xm(new URL(t.url),i,o,a),e.headers.set("Location",a)}return e}function HS(e,t,n){if(Km.test(e)){let r=e,o=r.startsWith("//")?new URL(t.protocol+r):new URL(r),a=rr(o.pathname,n)!=null;if(o.origin===t.origin&&a)return o.pathname+o.search+o.hash}return e}function pi(e,t,n,r){let o=e.createURL(QS(t)).toString(),a={signal:n};if(r&&or(r.formMethod)){let{formMethod:i,formEncType:s}=r;a.method=i.toUpperCase(),s==="application/json"?(a.headers=new Headers({"Content-Type":s}),a.body=JSON.stringify(r.json)):s==="text/plain"?a.body=r.text:s==="application/x-www-form-urlencoded"&&r.formData?a.body=Jm(r.formData):a.body=r.formData}return new Request(o,a)}function Jm(e){let t=new URLSearchParams;for(let[n,r]of e.entries())t.append(n,typeof r=="string"?r:r.name);return t}function WS(e){let t=new FormData;for(let[n,r]of e.entries())t.append(n,r);return t}function Jz(e,t,n,r=!1,o=!1){let a={},i=null,s,c=!1,l={},u=n&&An(n[1])?n[1].error:void 0;return e.forEach(d=>{if(!(d.route.id in t))return;let f=d.route.id,p=t[f];if($e(!ga(p),"Cannot handle redirect results in processLoaderData"),An(p)){let y=p.error;if(u!==void 0&&(y=u,u=void 0),i=i||{},o)i[f]=y;else{let m=ya(e,f);i[m.route.id]==null&&(i[m.route.id]=y)}r||(a[f]=DS),c||(c=!0,s=Ju(p.error)?p.error.status:500),p.headers&&(l[f]=p.headers)}else a[f]=p.data,p.statusCode&&p.statusCode!==200&&!c&&(s=p.statusCode),p.headers&&(l[f]=p.headers)}),u!==void 0&&n&&(i={[n[0]]:u},a[n[0]]=void 0),{loaderData:a,errors:i,statusCode:s||200,loaderHeaders:l}}function qS(e,t,n,r,o,a){let{loaderData:i,errors:s}=Jz(t,n,r);return o.forEach(c=>{let{key:l,match:u,controller:d}=c,f=a[l];if($e(f,"Did not find corresponding fetcher result"),!(d&&d.signal.aborted))if(An(f)){let p=ya(e.matches,u==null?void 0:u.route.id);s&&s[p.route.id]||(s={...s,[p.route.id]:f.error}),e.fetchers.delete(l)}else if(ga(f))$e(!1,"Unhandled fetcher revalidation redirect");else{let p=Fo(f.data);e.fetchers.set(l,p)}}),{loaderData:i,errors:s}}function YS(e,t,n,r){let o=Object.entries(t).filter(([,a])=>a!==DS).reduce((a,[i,s])=>(a[i]=s,a),{});for(let a of n){let i=a.route.id;if(!t.hasOwnProperty(i)&&e.hasOwnProperty(i)&&a.route.loader&&(o[i]=e[i]),r&&r.hasOwnProperty(i))break}return o}function KS(e){return e?An(e[1])?{actionData:{}}:{actionData:{[e[0]]:e[1].data}}:{}}function ya(e,t){return(t?e.slice(0,e.findIndex(n=>n.route.id===t)+1):[...e]).reverse().find(n=>n.route.hasErrorBoundary===!0)||e[0]}function XS(e){let t=e.length===1?e[0]:e.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function Un(e,{pathname:t,routeId:n,method:r,type:o,message:a}={}){let i="Unknown Server Error",s="Unknown @remix-run/router error";return e===400?(i="Bad Request",r&&t&&n?s=`You made a ${r} request to "${t}" but did not provide a \`loader\` for route "${n}", so there is no way to handle the request.`:o==="invalid-body"&&(s="Unable to encode submission body")):e===403?(i="Forbidden",s=`Route "${n}" does not match URL "${t}"`):e===404?(i="Not Found",s=`No route matches URL "${t}"`):e===405&&(i="Method Not Allowed",r&&t&&n?s=`You made a ${r.toUpperCase()} request to "${t}" but did not provide an \`action\` for route "${n}", so there is no way to handle the request.`:r&&(s=`Invalid request method "${r.toUpperCase()}"`)),new Qu(e||500,i,new Error(s),!0)}function Gu(e){let t=Object.entries(e);for(let n=t.length-1;n>=0;n--){let[r,o]=t[n];if(ga(o))return{key:r,result:o}}}function QS(e){let t=typeof e=="string"?Xr(e):e;return Kr({...t,hash:""})}function Gz(e,t){return e.pathname!==t.pathname||e.search!==t.search?!1:e.hash===""?t.hash!=="":e.hash===t.hash?!0:t.hash!==""}function Zz(e){return GS(e.result)&&Fz.has(e.result.status)}function An(e){return e.type==="error"}function ga(e){return(e&&e.type)==="redirect"}function JS(e){return typeof e=="object"&&e!=null&&"type"in e&&"data"in e&&"init"in e&&e.type==="DataWithResponseInit"}function GS(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.headers=="object"&&typeof e.body<"u"}function e7(e){return Lz.has(e.toUpperCase())}function or(e){return Iz.has(e.toUpperCase())}function Gm(e){return new URLSearchParams(e).getAll("index").some(t=>t==="")}function uc(e,t){let n=typeof t=="string"?Xr(t).search:t.search;if(e[e.length-1].route.index&&Gm(n||""))return e[e.length-1];let r=TS(e);return r[r.length-1]}function ZS(e){let{formMethod:t,formAction:n,formEncType:r,text:o,formData:a,json:i}=e;if(!(!t||!n||!r)){if(o!=null)return{formMethod:t,formAction:n,formEncType:r,formData:void 0,json:void 0,text:o};if(a!=null)return{formMethod:t,formAction:n,formEncType:r,formData:a,json:void 0,text:void 0};if(i!==void 0)return{formMethod:t,formAction:n,formEncType:r,formData:void 0,json:i,text:void 0}}}function Zm(e,t){return t?{state:"loading",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}:{state:"loading",location:e,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function t7(e,t){return{state:"submitting",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}}function dc(e,t){return e?{state:"loading",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function n7(e,t){return{state:"submitting",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t?t.data:void 0}}function Fo(e){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function r7(e,t){try{let n=e.sessionStorage.getItem(IS);if(n){let r=JSON.parse(n);for(let[o,a]of Object.entries(r||{}))a&&Array.isArray(a)&&t.set(o,new Set(a||[]))}}catch{}}function o7(e,t){if(t.size>0){let n={};for(let[r,o]of t)n[r]=[...o];try{e.sessionStorage.setItem(IS,JSON.stringify(n))}catch(r){Bt(!1,`Failed to save applied view transitions in sessionStorage (${r}).`)}}}function a7(){let e,t,n=new Promise((r,o)=>{e=async a=>{r(a);try{await n}catch{}},t=async a=>{o(a);try{await n}catch{}}});return{promise:n,resolve:e,reject:t}}var va=g.createContext(null);va.displayName="DataRouter";var fc=g.createContext(null);fc.displayName="DataRouterState";var ey=g.createContext({isTransitioning:!1});ey.displayName="ViewTransition";var eC=g.createContext(new Map);eC.displayName="Fetchers";var i7=g.createContext(null);i7.displayName="Await";var ar=g.createContext(null);ar.displayName="Navigation";var Zu=g.createContext(null);Zu.displayName="Location";var Hn=g.createContext({outlet:null,matches:[],isDataRoute:!1});Hn.displayName="Route";var ty=g.createContext(null);ty.displayName="RouteError";function s7(e,{relative:t}={}){$e(hi(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=g.useContext(ar),{hash:o,pathname:a,search:i}=hc(e,{relative:t}),s=a;return n!=="/"&&(s=a==="/"?n:Cr([n,a])),r.createHref({pathname:s,search:i,hash:o})}function hi(){return g.useContext(Zu)!=null}function Qr(){return $e(hi(),"useLocation() may be used only in the context of a <Router> component."),g.useContext(Zu).location}var tC="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function nC(e){g.useContext(ar).static||g.useLayoutEffect(e)}function pc(){let{isDataRoute:e}=g.useContext(Hn);return e?_7():c7()}function c7(){$e(hi(),"useNavigate() may be used only in the context of a <Router> component.");let e=g.useContext(va),{basename:t,navigator:n}=g.useContext(ar),{matches:r}=g.useContext(Hn),{pathname:o}=Qr(),a=JSON.stringify(Ku(r)),i=g.useRef(!1);return nC(()=>{i.current=!0}),g.useCallback((s,c={})=>{if(Bt(i.current,tC),!i.current)return;if(typeof s=="number"){n.go(s);return}let l=Xu(s,JSON.parse(a),o,c.relative==="path");e==null&&t!=="/"&&(l.pathname=l.pathname==="/"?t:Cr([t,l.pathname])),(c.replace?n.replace:n.push)(l,c.state,c)},[t,n,a,o,e])}var l7=g.createContext(null);function u7(e){let t=g.useContext(Hn).outlet;return t&&g.createElement(l7.Provider,{value:e},t)}function d7(){let{matches:e}=g.useContext(Hn),t=e[e.length-1];return t?t.params:{}}function hc(e,{relative:t}={}){let{matches:n}=g.useContext(Hn),{pathname:r}=Qr(),o=JSON.stringify(Ku(n));return g.useMemo(()=>Xu(e,JSON.parse(o),r,t==="path"),[e,o,r,t])}function f7(e,t,n,r){$e(hi(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=g.useContext(ar),{matches:a}=g.useContext(Hn),i=a[a.length-1],s=i?i.params:{},c=i?i.pathname:"/",l=i?i.pathnameBase:"/",u=i&&i.route;{let v=u&&u.path||"";aC(c,!u||v.endsWith("*")||v.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${v}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${v}"> to <Route path="${v==="/"?"*":`${v}/*`}">.`)}let d=Qr(),f;f=d;let p=f.pathname||"/",y=p;if(l!=="/"){let v=l.replace(/^\//,"").split("/");y="/"+p.replace(/^\//,"").split("/").slice(v.length).join("/")}let m=Lo(e,{pathname:y});return Bt(u||m!=null,`No routes matched location "${f.pathname}${f.search}${f.hash}" `),Bt(m==null||m[m.length-1].route.element!==void 0||m[m.length-1].route.Component!==void 0||m[m.length-1].route.lazy!==void 0,`Matched leaf route at location "${f.pathname}${f.search}${f.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),g7(m&&m.map(v=>Object.assign({},v,{params:Object.assign({},s,v.params),pathname:Cr([l,o.encodeLocation?o.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?l:Cr([l,o.encodeLocation?o.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),a,n,r)}function p7(){let e=rC(),t=Ju(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},i=null;return console.error("Error handled by React Router default ErrorBoundary:",e),i=g.createElement(g.Fragment,null,g.createElement("p",null,"\u{1F4BF} Hey developer \u{1F44B}"),g.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",g.createElement("code",{style:a},"ErrorBoundary")," or"," ",g.createElement("code",{style:a},"errorElement")," prop on your route.")),g.createElement(g.Fragment,null,g.createElement("h2",null,"Unexpected Application Error!"),g.createElement("h3",{style:{fontStyle:"italic"}},t),n?g.createElement("pre",{style:o},n):null,i)}var h7=g.createElement(p7,null),m7=class extends g.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?g.createElement(Hn.Provider,{value:this.props.routeContext},g.createElement(ty.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function y7({routeContext:e,match:t,children:n}){let r=g.useContext(va);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),g.createElement(Hn.Provider,{value:e},n)}function g7(e,t=[],n=null,r=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let o=e,a=n==null?void 0:n.errors;if(a!=null){let c=o.findIndex(l=>l.route.id&&(a==null?void 0:a[l.route.id])!==void 0);$e(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),o=o.slice(0,Math.min(o.length,c+1))}let i=!1,s=-1;if(n)for(let c=0;c<o.length;c++){let l=o[c];if((l.route.HydrateFallback||l.route.hydrateFallbackElement)&&(s=c),l.route.id){let{loaderData:u,errors:d}=n,f=l.route.loader&&!u.hasOwnProperty(l.route.id)&&(!d||d[l.route.id]===void 0);if(l.route.lazy||f){i=!0,s>=0?o=o.slice(0,s+1):o=[o[0]];break}}}return o.reduceRight((c,l,u)=>{let d,f=!1,p=null,y=null;n&&(d=a&&l.route.id?a[l.route.id]:void 0,p=l.route.errorElement||h7,i&&(s<0&&u===0?(aC("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),f=!0,y=null):s===u&&(f=!0,y=l.route.hydrateFallbackElement||null)));let m=t.concat(o.slice(0,u+1)),v=()=>{let b;return d?b=p:f?b=y:l.route.Component?b=g.createElement(l.route.Component,null):l.route.element?b=l.route.element:b=c,g.createElement(y7,{match:l,routeContext:{outlet:c,matches:m,isDataRoute:n!=null},children:b})};return n&&(l.route.ErrorBoundary||l.route.errorElement||u===0)?g.createElement(m7,{location:n.location,revalidation:n.revalidation,component:p,error:d,children:v(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):v()},null)}function ny(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function v7(e){let t=g.useContext(va);return $e(t,ny(e)),t}function b7(e){let t=g.useContext(fc);return $e(t,ny(e)),t}function x7(e){let t=g.useContext(Hn);return $e(t,ny(e)),t}function ry(e){let t=x7(e),n=t.matches[t.matches.length-1];return $e(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function w7(){return ry("useRouteId")}function rC(){var r;let e=g.useContext(ty),t=b7("useRouteError"),n=ry("useRouteError");return e!==void 0?e:(r=t.errors)==null?void 0:r[n]}function _7(){let{router:e}=v7("useNavigate"),t=ry("useNavigate"),n=g.useRef(!1);return nC(()=>{n.current=!0}),g.useCallback(async(r,o={})=>{Bt(n.current,tC),n.current&&(typeof r=="number"?e.navigate(r):await e.navigate(r,{fromRouteId:t,...o}))},[e,t])}var oC={};function aC(e,t,n){!t&&!oC[e]&&(oC[e]=!0,Bt(!1,n))}var iC={};function sC(e,t){!e&&!iC[t]&&(iC[t]=!0,console.warn(t))}function cC(e){let t={hasErrorBoundary:e.hasErrorBoundary||e.ErrorBoundary!=null||e.errorElement!=null};return e.Component&&(e.element&&Bt(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(t,{element:g.createElement(e.Component),Component:void 0})),e.HydrateFallback&&(e.hydrateFallbackElement&&Bt(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(t,{hydrateFallbackElement:g.createElement(e.HydrateFallback),HydrateFallback:void 0})),e.ErrorBoundary&&(e.errorElement&&Bt(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(t,{errorElement:g.createElement(e.ErrorBoundary),ErrorBoundary:void 0})),t}var j7=class{constructor(){this.status="pending",this.promise=new Promise((e,t)=>{this.resolve=n=>{this.status==="pending"&&(this.status="resolved",e(n))},this.reject=n=>{this.status==="pending"&&(this.status="rejected",t(n))}})}};function E7({router:e,flushSync:t}){let[n,r]=g.useState(e.state),[o,a]=g.useState(),[i,s]=g.useState({isTransitioning:!1}),[c,l]=g.useState(),[u,d]=g.useState(),[f,p]=g.useState(),y=g.useRef(new Map),m=g.useCallback((_,{deletedFetchers:w,flushSync:j,viewTransitionOpts:E})=>{w.forEach(O=>y.current.delete(O)),_.fetchers.forEach((O,P)=>{O.data!==void 0&&y.current.set(P,O.data)}),sC(j===!1||t!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let S=e.window!=null&&e.window.document!=null&&typeof e.window.document.startViewTransition=="function";if(sC(E==null||S,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!E||!S){t&&j?t(()=>r(_)):g.startTransition(()=>r(_));return}if(t&&j){t(()=>{u&&(c&&c.resolve(),u.skipTransition()),s({isTransitioning:!0,flushSync:!0,currentLocation:E.currentLocation,nextLocation:E.nextLocation})});let O=e.window.document.startViewTransition(()=>{t(()=>r(_))});O.finished.finally(()=>{t(()=>{l(void 0),d(void 0),a(void 0),s({isTransitioning:!1})})}),t(()=>d(O));return}u?(c&&c.resolve(),u.skipTransition(),p({state:_,currentLocation:E.currentLocation,nextLocation:E.nextLocation})):(a(_),s({isTransitioning:!0,flushSync:!1,currentLocation:E.currentLocation,nextLocation:E.nextLocation}))},[e.window,t,u,c]);g.useLayoutEffect(()=>e.subscribe(m),[e,m]),g.useEffect(()=>{i.isTransitioning&&!i.flushSync&&l(new j7)},[i]),g.useEffect(()=>{if(c&&o&&e.window){let _=o,w=c.promise,j=e.window.document.startViewTransition(async()=>{g.startTransition(()=>r(_)),await w});j.finished.finally(()=>{l(void 0),d(void 0),a(void 0),s({isTransitioning:!1})}),d(j)}},[o,c,e.window]),g.useEffect(()=>{c&&o&&n.location.key===o.location.key&&c.resolve()},[c,u,n.location,o]),g.useEffect(()=>{!i.isTransitioning&&f&&(a(f.state),s({isTransitioning:!0,flushSync:!1,currentLocation:f.currentLocation,nextLocation:f.nextLocation}),p(void 0))},[i.isTransitioning,f]);let v=g.useMemo(()=>({createHref:e.createHref,encodeLocation:e.encodeLocation,go:_=>e.navigate(_),push:(_,w,j)=>e.navigate(_,{state:w,preventScrollReset:j==null?void 0:j.preventScrollReset}),replace:(_,w,j)=>e.navigate(_,{replace:!0,state:w,preventScrollReset:j==null?void 0:j.preventScrollReset})}),[e]),b=e.basename||"/",x=g.useMemo(()=>({router:e,navigator:v,static:!1,basename:b}),[e,v,b]);return g.createElement(g.Fragment,null,g.createElement(va.Provider,{value:x},g.createElement(fc.Provider,{value:n},g.createElement(eC.Provider,{value:y.current},g.createElement(ey.Provider,{value:i},g.createElement(N7,{basename:b,location:n.location,navigationType:n.historyAction,navigator:v},g.createElement(S7,{routes:e.routes,future:e.future,state:n})))))),null)}var S7=g.memo(C7);function C7({routes:e,future:t,state:n}){return f7(e,void 0,n,t)}function O7({to:e,replace:t,state:n,relative:r}){$e(hi(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=g.useContext(ar);Bt(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=g.useContext(Hn),{pathname:i}=Qr(),s=pc(),c=Xu(e,Ku(a),i,r==="path"),l=JSON.stringify(c);return g.useEffect(()=>{s(JSON.parse(l),{replace:t,state:n,relative:r})},[s,l,r,t,n]),null}function M7(e){return u7(e.context)}function mc(e){$e(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function N7({basename:e="/",children:t=null,location:n,navigationType:r="POP",navigator:o,static:a=!1}){$e(!hi(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let i=e.replace(/^\/*/,"/"),s=g.useMemo(()=>({basename:i,navigator:o,static:a,future:{}}),[i,o,a]);typeof n=="string"&&(n=Xr(n));let{pathname:c="/",search:l="",hash:u="",state:d=null,key:f="default"}=n,p=g.useMemo(()=>{let y=rr(c,i);return y==null?null:{location:{pathname:y,search:l,hash:u,state:d,key:f},navigationType:r}},[i,c,l,u,d,f,r]);return Bt(p!=null,`<Router basename="${i}"> is not able to match the URL "${c}${l}${u}" because it does not start with the basename, so the <Router> won't render anything.`),p==null?null:g.createElement(ar.Provider,{value:s},g.createElement(Zu.Provider,{children:t,value:p}))}function oy(e,t=[]){let n=[];return g.Children.forEach(e,(r,o)=>{if(!g.isValidElement(r))return;let a=[...t,o];if(r.type===g.Fragment){n.push.apply(n,oy(r.props.children,a));return}$e(r.type===mc,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),$e(!r.props.index||!r.props.children,"An index route cannot have child routes.");let i={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(i.children=oy(r.props.children,a)),n.push(i)}),n}var k7=oy,ed="get",td="application/x-www-form-urlencoded";function nd(e){return e!=null&&typeof e.tagName=="string"}function P7(e){return nd(e)&&e.tagName.toLowerCase()==="button"}function A7(e){return nd(e)&&e.tagName.toLowerCase()==="form"}function T7(e){return nd(e)&&e.tagName.toLowerCase()==="input"}function R7(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function I7(e,t){return e.button===0&&(!t||t==="_self")&&!R7(e)}var rd=null;function D7(){if(rd===null)try{new FormData(document.createElement("form"),0),rd=!1}catch{rd=!0}return rd}var L7=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ay(e){return e!=null&&!L7.has(e)?(Bt(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${td}"`),null):e}function F7(e,t){let n,r,o,a,i;if(A7(e)){let s=e.getAttribute("action");r=s?rr(s,t):null,n=e.getAttribute("method")||ed,o=ay(e.getAttribute("enctype"))||td,a=new FormData(e)}else if(P7(e)||T7(e)&&(e.type==="submit"||e.type==="image")){let s=e.form;if(s==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=e.getAttribute("formaction")||s.getAttribute("action");if(r=c?rr(c,t):null,n=e.getAttribute("formmethod")||s.getAttribute("method")||ed,o=ay(e.getAttribute("formenctype"))||ay(s.getAttribute("enctype"))||td,a=new FormData(s,e),!D7()){let{name:l,type:u,value:d}=e;if(u==="image"){let f=l?`${l}.`:"";a.append(`${f}x`,"0"),a.append(`${f}y`,"0")}else l&&a.append(l,d)}}else{if(nd(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=ed,r=null,o=td,i=e}return a&&o==="text/plain"&&(i=a,a=void 0),{action:r,method:n.toLowerCase(),encType:o,formData:a,body:i}}function iy(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}async function B7(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module).then(async r=>(await r.__tla,r));return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function $7(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function z7(e,t,n){let r=await Promise.all(e.map(async o=>{let a=t.routes[o.route.id];if(a){let i=await B7(a,n);return i.links?i.links():[]}return[]}));return W7(r.flat(1).filter($7).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function lC(e,t,n,r,o,a){let i=(c,l)=>n[l]?c.route.id!==n[l].route.id:!0,s=(c,l)=>{var u;return n[l].pathname!==c.pathname||((u=n[l].route.path)==null?void 0:u.endsWith("*"))&&n[l].params["*"]!==c.params["*"]};return a==="assets"?t.filter((c,l)=>i(c,l)||s(c,l)):a==="data"?t.filter((c,l)=>{var d;let u=r.routes[c.route.id];if(!u||!u.hasLoader)return!1;if(i(c,l)||s(c,l))return!0;if(c.route.shouldRevalidate){let f=c.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((d=n[0])==null?void 0:d.params)||{},nextUrl:new URL(e,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function V7(e,t){return U7(e.map(n=>{let r=t.routes[n.route.id];if(!r)return[];let o=[r.module];return r.imports&&(o=o.concat(r.imports)),o}).flat(1))}function U7(e){return[...new Set(e)]}function H7(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}function W7(e,t){let n=new Set;return new Set(t),e.reduce((r,o)=>{let a=JSON.stringify(H7(o));return n.has(a)||(n.add(a),r.push({key:a,link:o})),r},[])}function q7(e){let t=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return t.pathname==="/"?t.pathname="_root.data":t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function Y7(){let e=g.useContext(va);return iy(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function K7(){let e=g.useContext(fc);return iy(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var sy=g.createContext(void 0);sy.displayName="FrameworkContext";function uC(){let e=g.useContext(sy);return iy(e,"You must render this element inside a <HydratedRouter> element"),e}function X7(e,t){let n=g.useContext(sy),[r,o]=g.useState(!1),[a,i]=g.useState(!1),{onFocus:s,onBlur:c,onMouseEnter:l,onMouseLeave:u,onTouchStart:d}=t,f=g.useRef(null);g.useEffect(()=>{if(e==="render"&&i(!0),e==="viewport"){let m=b=>{b.forEach(x=>{i(x.isIntersecting)})},v=new IntersectionObserver(m,{threshold:.5});return f.current&&v.observe(f.current),()=>{v.disconnect()}}},[e]),g.useEffect(()=>{if(r){let m=setTimeout(()=>{i(!0)},100);return()=>{clearTimeout(m)}}},[r]);let p=()=>{o(!0)},y=()=>{o(!1),i(!1)};return n?e!=="intent"?[a,f,{}]:[a,f,{onFocus:yc(s,p),onBlur:yc(c,y),onMouseEnter:yc(l,p),onMouseLeave:yc(u,y),onTouchStart:yc(d,p)}]:[!1,f,{}]}function yc(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function Q7({page:e,...t}){let{router:n}=Y7(),r=g.useMemo(()=>Lo(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?g.createElement(G7,{page:e,matches:r,...t}):(console.warn(`Tried to prefetch ${e} but no routes matched.`),null)}function J7(e){let{manifest:t,routeModules:n}=uC(),[r,o]=g.useState([]);return g.useEffect(()=>{let a=!1;return z7(e,t,n).then(i=>{a||o(i)}),()=>{a=!0}},[e,t,n]),r}function G7({page:e,matches:t,...n}){let r=Qr(),{manifest:o,routeModules:a}=uC(),{loaderData:i,matches:s}=K7(),c=g.useMemo(()=>lC(e,t,s,o,r,"data"),[e,t,s,o,r]),l=g.useMemo(()=>lC(e,t,s,o,r,"assets"),[e,t,s,o,r]),u=g.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let p=new Set,y=!1;if(t.forEach(v=>{var x;let b=o.routes[v.route.id];!b||!b.hasLoader||(!c.some(_=>_.route.id===v.route.id)&&v.route.id in i&&((x=a[v.route.id])!=null&&x.shouldRevalidate)||b.hasClientLoader?y=!0:p.add(v.route.id))}),p.size===0)return[];let m=q7(e);return y&&p.size>0&&m.searchParams.set("_routes",t.filter(v=>p.has(v.route.id)).map(v=>v.route.id).join(",")),[m.pathname+m.search]},[i,r,o,c,t,e,a]),d=g.useMemo(()=>V7(l,o),[l,o]),f=J7(l);return g.createElement(g.Fragment,null,u.map(p=>g.createElement("link",{key:p,rel:"prefetch",as:"fetch",href:p,...n})),d.map(p=>g.createElement("link",{key:p,rel:"modulepreload",href:p,...n})),f.map(({key:p,link:y})=>g.createElement("link",{key:p,...y})))}function Z7(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var dC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{dC&&(window.__reactRouterVersion="7.0.2")}catch{}function fC(e,t){return LS({basename:t==null?void 0:t.basename,future:t==null?void 0:t.future,history:fz({window:t==null?void 0:t.window}),hydrationData:(t==null?void 0:t.hydrationData)||pC(),routes:e,mapRouteProperties:cC,dataStrategy:t==null?void 0:t.dataStrategy,patchRoutesOnNavigation:t==null?void 0:t.patchRoutesOnNavigation,window:t==null?void 0:t.window}).initialize()}function eV(e,t){return LS({basename:t==null?void 0:t.basename,future:t==null?void 0:t.future,history:pz({window:t==null?void 0:t.window}),hydrationData:pC(),routes:e,mapRouteProperties:cC,dataStrategy:t==null?void 0:t.dataStrategy,patchRoutesOnNavigation:t==null?void 0:t.patchRoutesOnNavigation,window:t==null?void 0:t.window}).initialize()}function pC(){let e=window==null?void 0:window.__staticRouterHydrationData;return e&&e.errors&&(e={...e,errors:tV(e.errors)}),e}function tV(e){if(!e)return null;let t=Object.entries(e),n={};for(let[r,o]of t)if(o&&o.__type==="RouteErrorResponse")n[r]=new Qu(o.status,o.statusText,o.data,o.internal===!0);else if(o&&o.__type==="Error"){if(o.__subType){let a=window[o.__subType];if(typeof a=="function")try{let i=new a(o.message);i.stack="",n[r]=i}catch{}}if(n[r]==null){let a=new Error(o.message);a.stack="",n[r]=a}}else n[r]=o;return n}var hC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,mC=g.forwardRef(function({onClick:e,discover:t="render",prefetch:n="none",relative:r,reloadDocument:o,replace:a,state:i,target:s,to:c,preventScrollReset:l,viewTransition:u,...d},f){let{basename:p}=g.useContext(ar),y=typeof c=="string"&&hC.test(c),m,v=!1;if(typeof c=="string"&&y&&(m=c,dC))try{let O=new URL(window.location.href),P=c.startsWith("//")?new URL(O.protocol+c):new URL(c),M=rr(P.pathname,p);P.origin===O.origin&&M!=null?c=M+P.search+P.hash:v=!0}catch{Bt(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let b=s7(c,{relative:r}),[x,_,w]=X7(n,d),j=aV(c,{replace:a,state:i,target:s,preventScrollReset:l,relative:r,viewTransition:u});function E(O){e&&e(O),O.defaultPrevented||j(O)}let S=g.createElement("a",{...d,...w,href:m||b,onClick:v||o?e:E,ref:Z7(f,_),target:s,"data-discover":!y&&t==="render"?"true":void 0});return x&&!y?g.createElement(g.Fragment,null,S,g.createElement(Q7,{page:b})):S});mC.displayName="Link";var nV=g.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:n="",end:r=!1,style:o,to:a,viewTransition:i,children:s,...c},l){let u=hc(a,{relative:c.relative}),d=Qr(),f=g.useContext(fc),{navigator:p,basename:y}=g.useContext(ar),m=f!=null&&uV(u)&&i===!0,v=p.encodeLocation?p.encodeLocation(u).pathname:u.pathname,b=d.pathname,x=f&&f.navigation&&f.navigation.location?f.navigation.location.pathname:null;t||(b=b.toLowerCase(),x=x?x.toLowerCase():null,v=v.toLowerCase()),x&&y&&(x=rr(x,y)||x);const _=v!=="/"&&v.endsWith("/")?v.length-1:v.length;let w=b===v||!r&&b.startsWith(v)&&b.charAt(_)==="/",j=x!=null&&(x===v||!r&&x.startsWith(v)&&x.charAt(v.length)==="/"),E={isActive:w,isPending:j,isTransitioning:m},S=w?e:void 0,O;typeof n=="function"?O=n(E):O=[n,w?"active":null,j?"pending":null,m?"transitioning":null].filter(Boolean).join(" ");let P=typeof o=="function"?o(E):o;return g.createElement(mC,{...c,"aria-current":S,className:O,ref:l,style:P,to:a,viewTransition:i},typeof s=="function"?s(E):s)});nV.displayName="NavLink";var rV=g.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:r,replace:o,state:a,method:i=ed,action:s,onSubmit:c,relative:l,preventScrollReset:u,viewTransition:d,...f},p)=>{let y=cV(),m=lV(s,{relative:l}),v=i.toLowerCase()==="get"?"get":"post",b=typeof s=="string"&&hC.test(s),x=_=>{if(c&&c(_),_.defaultPrevented)return;_.preventDefault();let w=_.nativeEvent.submitter,j=(w==null?void 0:w.getAttribute("formmethod"))||i;y(w||_.currentTarget,{fetcherKey:t,method:j,navigate:n,replace:o,state:a,relative:l,preventScrollReset:u,viewTransition:d})};return g.createElement("form",{ref:p,method:v,action:m,onSubmit:r?c:x,...f,"data-discover":!b&&e==="render"?"true":void 0})});rV.displayName="Form";function oV(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function yC(e){let t=g.useContext(va);return $e(t,oV(e)),t}function aV(e,{target:t,replace:n,state:r,preventScrollReset:o,relative:a,viewTransition:i}={}){let s=pc(),c=Qr(),l=hc(e,{relative:a});return g.useCallback(u=>{if(I7(u,t)){u.preventDefault();let d=n!==void 0?n:Kr(c)===Kr(l);s(e,{replace:d,state:r,preventScrollReset:o,relative:a,viewTransition:i})}},[c,s,l,n,r,t,e,o,a,i])}var iV=0,sV=()=>`__${String(++iV)}__`;function cV(){let{router:e}=yC("useSubmit"),{basename:t}=g.useContext(ar),n=w7();return g.useCallback(async(r,o={})=>{let{action:a,method:i,encType:s,formData:c,body:l}=F7(r,t);if(o.navigate===!1){let u=o.fetcherKey||sV();await e.fetch(u,n,o.action||a,{preventScrollReset:o.preventScrollReset,formData:c,body:l,formMethod:o.method||i,formEncType:o.encType||s,flushSync:o.flushSync})}else await e.navigate(o.action||a,{preventScrollReset:o.preventScrollReset,formData:c,body:l,formMethod:o.method||i,formEncType:o.encType||s,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[e,t,n])}function lV(e,{relative:t}={}){let{basename:n}=g.useContext(ar),r=g.useContext(Hn);$e(r,"useFormAction must be used inside a RouteContext");let[o]=r.matches.slice(-1),a={...hc(e||".",{relative:t})},i=Qr();if(e==null){a.search=i.search;let s=new URLSearchParams(a.search),c=s.getAll("index");if(c.some(l=>l==="")){s.delete("index"),c.filter(u=>u).forEach(u=>s.append("index",u));let l=s.toString();a.search=l?`?${l}`:""}}return(!e||e===".")&&o.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(a.pathname=a.pathname==="/"?n:Cr([n,a.pathname])),Kr(a)}function uV(e,t={}){let n=g.useContext(ey);$e(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=yC("useViewTransitionState"),o=hc(e,{relative:t.relative});if(!n.isTransitioning)return!1;let a=rr(n.currentLocation.pathname,r)||n.currentLocation.pathname,i=rr(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Yu(o.pathname,i)!=null||Yu(o.pathname,a)!=null}new TextEncoder;function dV(e){return g.createElement(E7,{flushSync:Nu.flushSync,...e})}var fV=nwe.useId||(()=>{}),pV=0;mt=function(e){const[t,n]=g.useState(fV());return xn(()=>{n(r=>r??String(pV++))},[e]),t?`radix-${t}`:""};var cy="Collapsible",[hV,gC]=Vn(cy),[mV,ly]=hV(cy),vC=g.forwardRef((e,t)=>{const{__scopeCollapsible:n,open:r,defaultOpen:o,disabled:a,onOpenChange:i,...s}=e,[c=!1,l]=Zt({prop:r,defaultProp:o,onChange:i});return h.jsx(mV,{scope:n,disabled:a,contentId:mt(),open:c,onOpenToggle:g.useCallback(()=>l(u=>!u),[l]),children:h.jsx(Oe.div,{"data-state":py(c),"data-disabled":a?"":void 0,...s,ref:t})})});vC.displayName=cy;var bC="CollapsibleTrigger",uy=g.forwardRef((e,t)=>{const{__scopeCollapsible:n,...r}=e,o=ly(bC,n);return h.jsx(Oe.button,{type:"button","aria-controls":o.contentId,"aria-expanded":o.open||!1,"data-state":py(o.open),"data-disabled":o.disabled?"":void 0,disabled:o.disabled,...r,ref:t,onClick:he(e.onClick,o.onOpenToggle)})});uy.displayName=bC;var dy="CollapsibleContent",fy=g.forwardRef((e,t)=>{const{forceMount:n,...r}=e,o=ly(dy,e.__scopeCollapsible);return h.jsx(Mn,{present:n||o.open,children:({present:a})=>h.jsx(yV,{...r,ref:t,present:a})})});fy.displayName=dy;var yV=g.forwardRef((e,t)=>{const{__scopeCollapsible:n,present:r,children:o,...a}=e,i=ly(dy,n),[s,c]=g.useState(r),l=g.useRef(null),u=nt(t,l),d=g.useRef(0),f=d.current,p=g.useRef(0),y=p.current,m=i.open||s,v=g.useRef(m),b=g.useRef();return g.useEffect(()=>{const x=requestAnimationFrame(()=>v.current=!1);return()=>cancelAnimationFrame(x)},[]),xn(()=>{const x=l.current;if(x){b.current=b.current||{transitionDuration:x.style.transitionDuration,animationName:x.style.animationName},x.style.transitionDuration="0s",x.style.animationName="none";const _=x.getBoundingClientRect();d.current=_.height,p.current=_.width,v.current||(x.style.transitionDuration=b.current.transitionDuration,x.style.animationName=b.current.animationName),c(r)}},[i.open,r]),h.jsx(Oe.div,{"data-state":py(i.open),"data-disabled":i.disabled?"":void 0,id:i.contentId,hidden:!m,...a,ref:u,style:{"--radix-collapsible-content-height":f?`${f}px`:void 0,"--radix-collapsible-content-width":y?`${y}px`:void 0,...e.style},children:m&&o})});function py(e){return e?"open":"closed"}var xC=vC,gV=uy,vV=fy;const bV=xC,xV=uy,wV=fy,hy=768;function _V(){const[e,t]=g.useState(void 0);return g.useEffect(()=>{const n=window.matchMedia(`(max-width: ${hy-1}px)`),r=()=>{t(window.innerWidth<hy)};return n.addEventListener("change",r),t(window.innerWidth<hy),()=>n.removeEventListener("change",r)},[]),!!e}let gc;gc=Hr("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),ft=g.forwardRef(({className:e,variant:t,size:n,asChild:r=!1,...o},a)=>{const i=r?Wr:"button";return h.jsx(i,{className:K(gc({variant:t,size:n,className:e})),ref:a,...o})}),ft.displayName="Button";const dn=g.forwardRef(({className:e,type:t,...n},r)=>h.jsx("input",{type:t,className:K("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...n}));dn.displayName="Input";var jV="Separator",wC="horizontal",EV=["horizontal","vertical"],_C=g.forwardRef((e,t)=>{const{decorative:n,orientation:r=wC,...o}=e,a=SV(r)?r:wC,i=n?{role:"none"}:{"aria-orientation":a==="vertical"?a:void 0,role:"separator"};return h.jsx(Oe.div,{"data-orientation":a,...i,...o,ref:t})});_C.displayName=jV;function SV(e){return EV.includes(e)}Yh=_C;const vc=g.forwardRef(({className:e,orientation:t="horizontal",decorative:n=!0,...r},o)=>h.jsx(Yh,{ref:o,decorative:n,orientation:t,className:K("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...r}));vc.displayName=Yh.displayName;var my="focusScope.autoFocusOnMount",yy="focusScope.autoFocusOnUnmount",jC={bubbles:!1,cancelable:!0},CV="FocusScope",bc=g.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:o,onUnmountAutoFocus:a,...i}=e,[s,c]=g.useState(null),l=Io(o),u=Io(a),d=g.useRef(null),f=nt(t,m=>c(m)),p=g.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;g.useEffect(()=>{if(r){let m=function(_){if(p.paused||!s)return;const w=_.target;s.contains(w)?d.current=w:Bo(d.current,{select:!0})},v=function(_){if(p.paused||!s)return;const w=_.relatedTarget;w!==null&&(s.contains(w)||Bo(d.current,{select:!0}))},b=function(_){if(document.activeElement===document.body)for(const w of _)w.removedNodes.length>0&&Bo(s)};document.addEventListener("focusin",m),document.addEventListener("focusout",v);const x=new MutationObserver(b);return s&&x.observe(s,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",m),document.removeEventListener("focusout",v),x.disconnect()}}},[r,s,p.paused]),g.useEffect(()=>{if(s){CC.add(p);const m=document.activeElement;if(!s.contains(m)){const v=new CustomEvent(my,jC);s.addEventListener(my,l),s.dispatchEvent(v),v.defaultPrevented||(OV(AV(EC(s)),{select:!0}),document.activeElement===m&&Bo(s))}return()=>{s.removeEventListener(my,l),setTimeout(()=>{const v=new CustomEvent(yy,jC);s.addEventListener(yy,u),s.dispatchEvent(v),v.defaultPrevented||Bo(m??document.body,{select:!0}),s.removeEventListener(yy,u),CC.remove(p)},0)}}},[s,l,u,p]);const y=g.useCallback(m=>{if(!n&&!r||p.paused)return;const v=m.key==="Tab"&&!m.altKey&&!m.ctrlKey&&!m.metaKey,b=document.activeElement;if(v&&b){const x=m.currentTarget,[_,w]=MV(x);_&&w?!m.shiftKey&&b===w?(m.preventDefault(),n&&Bo(_,{select:!0})):m.shiftKey&&b===_&&(m.preventDefault(),n&&Bo(w,{select:!0})):b===x&&m.preventDefault()}},[n,r,p.paused]);return h.jsx(Oe.div,{tabIndex:-1,...i,ref:f,onKeyDown:y})});bc.displayName=CV;function OV(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(Bo(r,{select:t}),document.activeElement!==n)return}function MV(e){const t=EC(e),n=SC(t,e),r=SC(t.reverse(),e);return[n,r]}function EC(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const o=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||o?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function SC(e,t){for(const n of e)if(!NV(n,{upTo:t}))return n}function NV(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function kV(e){return e instanceof HTMLInputElement&&"select"in e}function Bo(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&kV(e)&&t&&e.select()}}var CC=PV();function PV(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=OC(e,t),e.unshift(t)},remove(t){var n;e=OC(e,t),(n=e[0])==null||n.resume()}}}function OC(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function AV(e){return e.filter(t=>t.tagName!=="A")}var gy=0;function od(){g.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??MC()),document.body.insertAdjacentElement("beforeend",e[1]??MC()),gy++,()=>{gy===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),gy--}},[])}function MC(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Or=function(){return Or=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Or.apply(this,arguments)};function NC(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n}function TV(e,t,n){if(n||arguments.length===2)for(var r=0,o=t.length,a;r<o;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))}var ad="right-scroll-bar-position",id="width-before-scroll-bar",RV="with-scroll-bars-hidden",IV="--removed-body-scroll-bar-size";function vy(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function DV(e,t){var n=g.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var o=n.value;o!==r&&(n.value=r,n.callback(r,o))}}}})[0];return n.callback=t,n.facade}var LV=typeof window<"u"?g.useLayoutEffect:g.useEffect,kC=new WeakMap;function FV(e,t){var n=DV(null,function(r){return e.forEach(function(o){return vy(o,r)})});return LV(function(){var r=kC.get(n);if(r){var o=new Set(r),a=new Set(e),i=n.current;o.forEach(function(s){a.has(s)||vy(s,null)}),a.forEach(function(s){o.has(s)||vy(s,i)})}kC.set(n,e)},[e]),n}function BV(e){return e}function $V(e,t){t===void 0&&(t=BV);var n=[],r=!1,o={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(a){var i=t(a,r);return n.push(i),function(){n=n.filter(function(s){return s!==i})}},assignSyncMedium:function(a){for(r=!0;n.length;){var i=n;n=[],i.forEach(a)}n={push:function(s){return a(s)},filter:function(){return n}}},assignMedium:function(a){r=!0;var i=[];if(n.length){var s=n;n=[],s.forEach(a),i=n}var c=function(){var u=i;i=[],u.forEach(a)},l=function(){return Promise.resolve().then(c)};l(),n={push:function(u){i.push(u),l()},filter:function(u){return i=i.filter(u),n}}}};return o}function zV(e){e===void 0&&(e={});var t=$V(null);return t.options=Or({async:!0,ssr:!1},e),t}var PC=function(e){var t=e.sideCar,n=NC(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return g.createElement(r,Or({},n))};PC.isSideCarExport=!0;function VV(e,t){return e.useMedium(t),PC}var AC=zV(),by=function(){},sd=g.forwardRef(function(e,t){var n=g.useRef(null),r=g.useState({onScrollCapture:by,onWheelCapture:by,onTouchMoveCapture:by}),o=r[0],a=r[1],i=e.forwardProps,s=e.children,c=e.className,l=e.removeScrollBar,u=e.enabled,d=e.shards,f=e.sideCar,p=e.noIsolation,y=e.inert,m=e.allowPinchZoom,v=e.as,b=v===void 0?"div":v,x=e.gapMode,_=NC(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),w=f,j=FV([n,t]),E=Or(Or({},_),o);return g.createElement(g.Fragment,null,u&&g.createElement(w,{sideCar:AC,removeScrollBar:l,shards:d,noIsolation:p,inert:y,setCallbacks:a,allowPinchZoom:!!m,lockRef:n,gapMode:x}),i?g.cloneElement(g.Children.only(s),Or(Or({},E),{ref:j})):g.createElement(b,Or({},E,{className:c,ref:j}),s))});sd.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},sd.classNames={fullWidth:id,zeroRight:ad};var UV=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function HV(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=UV();return t&&e.setAttribute("nonce",t),e}function WV(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function qV(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var YV=function(){var e=0,t=null;return{add:function(n){e==0&&(t=HV())&&(WV(t,n),qV(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},KV=function(){var e=YV();return function(t,n){g.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},TC=function(){var e=KV(),t=function(n){var r=n.styles,o=n.dynamic;return e(r,o),null};return t},XV={left:0,top:0,right:0,gap:0},xy=function(e){return parseInt(e||"",10)||0},QV=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],o=t[e==="padding"?"paddingRight":"marginRight"];return[xy(n),xy(r),xy(o)]},JV=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return XV;var t=QV(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},GV=TC(),mi="data-scroll-locked",ZV=function(e,t,n,r){var o=e.left,a=e.top,i=e.right,s=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(RV,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(s,"px ").concat(r,`;
  }
  body[`).concat(mi,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(o,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(i,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(s,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(s,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(ad,` {
    right: `).concat(s,"px ").concat(r,`;
  }
  
  .`).concat(id,` {
    margin-right: `).concat(s,"px ").concat(r,`;
  }
  
  .`).concat(ad," .").concat(ad,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(id," .").concat(id,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(mi,`] {
    `).concat(IV,": ").concat(s,`px;
  }
`)},RC=function(){var e=parseInt(document.body.getAttribute(mi)||"0",10);return isFinite(e)?e:0},eU=function(){g.useEffect(function(){return document.body.setAttribute(mi,(RC()+1).toString()),function(){var e=RC()-1;e<=0?document.body.removeAttribute(mi):document.body.setAttribute(mi,e.toString())}},[])},tU=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,o=r===void 0?"margin":r;eU();var a=g.useMemo(function(){return JV(o)},[o]);return g.createElement(GV,{styles:ZV(a,!t,o,n?"":"!important")})},wy=!1;if(typeof window<"u")try{var cd=Object.defineProperty({},"passive",{get:function(){return wy=!0,!0}});window.addEventListener("test",cd,cd),window.removeEventListener("test",cd,cd)}catch{wy=!1}var yi=wy?{passive:!1}:!1,nU=function(e){return e.tagName==="TEXTAREA"},IC=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!nU(e)&&n[t]==="visible")},rU=function(e){return IC(e,"overflowY")},oU=function(e){return IC(e,"overflowX")},DC=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var o=LC(e,r);if(o){var a=FC(e,r),i=a[1],s=a[2];if(i>s)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},aU=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},iU=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},LC=function(e,t){return e==="v"?rU(t):oU(t)},FC=function(e,t){return e==="v"?aU(t):iU(t)},sU=function(e,t){return e==="h"&&t==="rtl"?-1:1},cU=function(e,t,n,r,o){var a=sU(e,window.getComputedStyle(t).direction),i=a*r,s=n.target,c=t.contains(s),l=!1,u=i>0,d=0,f=0;do{var p=FC(e,s),y=p[0],m=p[1],v=p[2],b=m-v-a*y;(y||b)&&LC(e,s)&&(d+=b,f+=y),s instanceof ShadowRoot?s=s.host:s=s.parentNode}while(!c&&s!==document.body||c&&(t.contains(s)||t===s));return(u&&(Math.abs(d)<1||!o)||!u&&(Math.abs(f)<1||!o))&&(l=!0),l},ld=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},BC=function(e){return[e.deltaX,e.deltaY]},$C=function(e){return e&&"current"in e?e.current:e},lU=function(e,t){return e[0]===t[0]&&e[1]===t[1]},uU=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},dU=0,gi=[];function fU(e){var t=g.useRef([]),n=g.useRef([0,0]),r=g.useRef(),o=g.useState(dU++)[0],a=g.useState(TC)[0],i=g.useRef(e);g.useEffect(function(){i.current=e},[e]),g.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(o));var m=TV([e.lockRef.current],(e.shards||[]).map($C),!0).filter(Boolean);return m.forEach(function(v){return v.classList.add("allow-interactivity-".concat(o))}),function(){document.body.classList.remove("block-interactivity-".concat(o)),m.forEach(function(v){return v.classList.remove("allow-interactivity-".concat(o))})}}},[e.inert,e.lockRef.current,e.shards]);var s=g.useCallback(function(m,v){if("touches"in m&&m.touches.length===2||m.type==="wheel"&&m.ctrlKey)return!i.current.allowPinchZoom;var b=ld(m),x=n.current,_="deltaX"in m?m.deltaX:x[0]-b[0],w="deltaY"in m?m.deltaY:x[1]-b[1],j,E=m.target,S=Math.abs(_)>Math.abs(w)?"h":"v";if("touches"in m&&S==="h"&&E.type==="range")return!1;var O=DC(S,E);if(!O)return!0;if(O?j=S:(j=S==="v"?"h":"v",O=DC(S,E)),!O)return!1;if(!r.current&&"changedTouches"in m&&(_||w)&&(r.current=j),!j)return!0;var P=r.current||j;return cU(P,v,m,P==="h"?_:w,!0)},[]),c=g.useCallback(function(m){var v=m;if(!(!gi.length||gi[gi.length-1]!==a)){var b="deltaY"in v?BC(v):ld(v),x=t.current.filter(function(j){return j.name===v.type&&(j.target===v.target||v.target===j.shadowParent)&&lU(j.delta,b)})[0];if(x&&x.should){v.cancelable&&v.preventDefault();return}if(!x){var _=(i.current.shards||[]).map($C).filter(Boolean).filter(function(j){return j.contains(v.target)}),w=_.length>0?s(v,_[0]):!i.current.noIsolation;w&&v.cancelable&&v.preventDefault()}}},[]),l=g.useCallback(function(m,v,b,x){var _={name:m,delta:v,target:b,should:x,shadowParent:pU(b)};t.current.push(_),setTimeout(function(){t.current=t.current.filter(function(w){return w!==_})},1)},[]),u=g.useCallback(function(m){n.current=ld(m),r.current=void 0},[]),d=g.useCallback(function(m){l(m.type,BC(m),m.target,s(m,e.lockRef.current))},[]),f=g.useCallback(function(m){l(m.type,ld(m),m.target,s(m,e.lockRef.current))},[]);g.useEffect(function(){return gi.push(a),e.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:f}),document.addEventListener("wheel",c,yi),document.addEventListener("touchmove",c,yi),document.addEventListener("touchstart",u,yi),function(){gi=gi.filter(function(m){return m!==a}),document.removeEventListener("wheel",c,yi),document.removeEventListener("touchmove",c,yi),document.removeEventListener("touchstart",u,yi)}},[]);var p=e.removeScrollBar,y=e.inert;return g.createElement(g.Fragment,null,y?g.createElement(a,{styles:uU(o)}):null,p?g.createElement(tU,{gapMode:e.gapMode}):null)}function pU(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const hU=VV(AC,fU);var xc=g.forwardRef(function(e,t){return g.createElement(sd,Or({},e,{ref:t,sideCar:hU}))});xc.classNames=sd.classNames;var mU=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},vi=new WeakMap,ud=new WeakMap,dd={},_y=0,zC=function(e){return e&&(e.host||zC(e.parentNode))},yU=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=zC(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},gU=function(e,t,n,r){var o=yU(t,Array.isArray(e)?e:[e]);dd[n]||(dd[n]=new WeakMap);var a=dd[n],i=[],s=new Set,c=new Set(o),l=function(d){!d||s.has(d)||(s.add(d),l(d.parentNode))};o.forEach(l);var u=function(d){!d||c.has(d)||Array.prototype.forEach.call(d.children,function(f){if(s.has(f))u(f);else try{var p=f.getAttribute(r),y=p!==null&&p!=="false",m=(vi.get(f)||0)+1,v=(a.get(f)||0)+1;vi.set(f,m),a.set(f,v),i.push(f),m===1&&y&&ud.set(f,!0),v===1&&f.setAttribute(n,"true"),y||f.setAttribute(r,"true")}catch(b){console.error("aria-hidden: cannot operate on ",f,b)}})};return u(t),s.clear(),_y++,function(){i.forEach(function(d){var f=vi.get(d)-1,p=a.get(d)-1;vi.set(d,f),a.set(d,p),f||(ud.has(d)||d.removeAttribute(r),ud.delete(d)),p||d.removeAttribute(n)}),_y--,_y||(vi=new WeakMap,vi=new WeakMap,ud=new WeakMap,dd={})}},fd=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),o=mU(e);return o?(r.push.apply(r,Array.from(o.querySelectorAll("[aria-live]"))),gU(r,o,n,"aria-hidden")):function(){return null}},jy="Dialog",[VC,UC]=Vn(jy),[vU,ir]=VC(jy),HC=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:o,onOpenChange:a,modal:i=!0}=e,s=g.useRef(null),c=g.useRef(null),[l=!1,u]=Zt({prop:r,defaultProp:o,onChange:a});return h.jsx(vU,{scope:t,triggerRef:s,contentRef:c,contentId:mt(),titleId:mt(),descriptionId:mt(),open:l,onOpenChange:u,onOpenToggle:g.useCallback(()=>u(d=>!d),[u]),modal:i,children:n})};HC.displayName=jy;var WC="DialogTrigger",qC=g.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=ir(WC,n),a=nt(t,o.triggerRef);return h.jsx(Oe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":Cy(o.open),...r,ref:a,onClick:he(e.onClick,o.onOpenToggle)})});qC.displayName=WC;var Ey="DialogPortal",[bU,YC]=VC(Ey,{forceMount:void 0}),KC=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:o}=e,a=ir(Ey,t);return h.jsx(bU,{scope:t,forceMount:n,children:g.Children.map(r,i=>h.jsx(Mn,{present:n||a.open,children:h.jsx(Pu,{asChild:!0,container:o,children:i})}))})};KC.displayName=Ey;var pd="DialogOverlay",XC=g.forwardRef((e,t)=>{const n=YC(pd,e.__scopeDialog),{forceMount:r=n.forceMount,...o}=e,a=ir(pd,e.__scopeDialog);return a.modal?h.jsx(Mn,{present:r||a.open,children:h.jsx(xU,{...o,ref:t})}):null});XC.displayName=pd;var xU=g.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=ir(pd,n);return h.jsx(xc,{as:Wr,allowPinchZoom:!0,shards:[o.contentRef],children:h.jsx(Oe.div,{"data-state":Cy(o.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),ba="DialogContent",QC=g.forwardRef((e,t)=>{const n=YC(ba,e.__scopeDialog),{forceMount:r=n.forceMount,...o}=e,a=ir(ba,e.__scopeDialog);return h.jsx(Mn,{present:r||a.open,children:a.modal?h.jsx(wU,{...o,ref:t}):h.jsx(_U,{...o,ref:t})})});QC.displayName=ba;var wU=g.forwardRef((e,t)=>{const n=ir(ba,e.__scopeDialog),r=g.useRef(null),o=nt(t,n.contentRef,r);return g.useEffect(()=>{const a=r.current;if(a)return fd(a)},[]),h.jsx(JC,{...e,ref:o,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:he(e.onCloseAutoFocus,a=>{var i;a.preventDefault(),(i=n.triggerRef.current)==null||i.focus()}),onPointerDownOutside:he(e.onPointerDownOutside,a=>{const i=a.detail.originalEvent,s=i.button===0&&i.ctrlKey===!0;(i.button===2||s)&&a.preventDefault()}),onFocusOutside:he(e.onFocusOutside,a=>a.preventDefault())})}),_U=g.forwardRef((e,t)=>{const n=ir(ba,e.__scopeDialog),r=g.useRef(!1),o=g.useRef(!1);return h.jsx(JC,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var i,s;(i=e.onCloseAutoFocus)==null||i.call(e,a),a.defaultPrevented||(r.current||((s=n.triggerRef.current)==null||s.focus()),a.preventDefault()),r.current=!1,o.current=!1},onInteractOutside:a=>{var s,c;(s=e.onInteractOutside)==null||s.call(e,a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const i=a.target;(c=n.triggerRef.current)!=null&&c.contains(i)&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&o.current&&a.preventDefault()}})}),JC=g.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:o,onCloseAutoFocus:a,...i}=e,s=ir(ba,n),c=g.useRef(null),l=nt(t,c);return od(),h.jsxs(h.Fragment,{children:[h.jsx(bc,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:o,onUnmountAutoFocus:a,children:h.jsx(ku,{role:"dialog",id:s.contentId,"aria-describedby":s.descriptionId,"aria-labelledby":s.titleId,"data-state":Cy(s.open),...i,ref:l,onDismiss:()=>s.onOpenChange(!1)})}),h.jsxs(h.Fragment,{children:[h.jsx(oO,{titleId:s.titleId}),h.jsx(iO,{contentRef:c,descriptionId:s.descriptionId})]})]})}),Sy="DialogTitle",GC=g.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=ir(Sy,n);return h.jsx(Oe.h2,{id:o.titleId,...r,ref:t})});GC.displayName=Sy;var ZC="DialogDescription",eO=g.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=ir(ZC,n);return h.jsx(Oe.p,{id:o.descriptionId,...r,ref:t})});eO.displayName=ZC;var tO="DialogClose",nO=g.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=ir(tO,n);return h.jsx(Oe.button,{type:"button",...r,ref:t,onClick:he(e.onClick,()=>o.onOpenChange(!1))})});nO.displayName=tO;function Cy(e){return e?"open":"closed"}let Oy,rO,My,oO,aO,iO,sO;Oy="DialogTitleWarning",[rO,My]=rwe(Oy,{contentName:ba,titleName:Sy,docsSlug:"dialog"}),oO=({titleId:e})=>{const t=My(Oy),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return g.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},aO="DialogDescriptionWarning",iO=({contentRef:e,descriptionId:t})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${My(aO).contentName}}.`;return g.useEffect(()=>{var o;const r=(o=e.current)==null?void 0:o.getAttribute("aria-describedby");t&&r&&(document.getElementById(t)||console.warn(n))},[n,e,t]),null},tc=HC,sO=qC,nc=KC,pa=XC,ha=QC,ii=GC,si=eO,oc=nO;const jU=tc,EU=nc,cO=g.forwardRef(({className:e,...t},n)=>h.jsx(pa,{className:K("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));cO.displayName=pa.displayName;const SU=Hr("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),lO=g.forwardRef(({side:e="right",className:t,children:n,...r},o)=>h.jsxs(EU,{children:[h.jsx(cO,{}),h.jsxs(ha,{ref:o,className:K(SU({side:e}),t),...r,children:[n,h.jsxs(oc,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[h.jsx(de,{name:"x",className:"h-4 w-4"}),h.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));lO.displayName=ha.displayName;const CU=g.forwardRef(({className:e,...t},n)=>h.jsx(ii,{ref:n,className:K("text-lg font-semibold text-foreground",e),...t}));CU.displayName=ii.displayName;const OU=g.forwardRef(({className:e,...t},n)=>h.jsx(si,{ref:n,className:K("text-sm text-muted-foreground",e),...t}));OU.displayName=si.displayName;function uO({className:e,...t}){return h.jsx("div",{className:K("animate-pulse rounded-md bg-muted",e),...t})}const MU=["top","right","bottom","left"],Mr=Math.min,Tn=Math.max,hd=Math.round,md=Math.floor,$o=e=>({x:e,y:e}),NU={left:"right",right:"left",bottom:"top",top:"bottom"},kU={start:"end",end:"start"};function Ny(e,t,n){return Tn(e,Mr(t,n))}function Jr(e,t){return typeof e=="function"?e(t):e}function Gr(e){return e.split("-")[0]}function bi(e){return e.split("-")[1]}function ky(e){return e==="x"?"y":"x"}function Py(e){return e==="y"?"height":"width"}function zo(e){return["top","bottom"].includes(Gr(e))?"y":"x"}function Ay(e){return ky(zo(e))}function PU(e,t,n){n===void 0&&(n=!1);const r=bi(e),o=Ay(e),a=Py(o);let i=o==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[a]>t.floating[a]&&(i=yd(i)),[i,yd(i)]}function AU(e){const t=yd(e);return[Ty(e),t,Ty(t)]}function Ty(e){return e.replace(/start|end/g,t=>kU[t])}function TU(e,t,n){const r=["left","right"],o=["right","left"],a=["top","bottom"],i=["bottom","top"];switch(e){case"top":case"bottom":return n?t?o:r:t?r:o;case"left":case"right":return t?a:i;default:return[]}}function RU(e,t,n,r){const o=bi(e);let a=TU(Gr(e),n==="start",r);return o&&(a=a.map(i=>i+"-"+o),t&&(a=a.concat(a.map(Ty)))),a}function yd(e){return e.replace(/left|right|bottom|top/g,t=>NU[t])}function IU(e){return{top:0,right:0,bottom:0,left:0,...e}}function dO(e){return typeof e!="number"?IU(e):{top:e,right:e,bottom:e,left:e}}function gd(e){const{x:t,y:n,width:r,height:o}=e;return{width:r,height:o,top:n,left:t,right:t+r,bottom:n+o,x:t,y:n}}function fO(e,t,n){let{reference:r,floating:o}=e;const a=zo(t),i=Ay(t),s=Py(i),c=Gr(t),l=a==="y",u=r.x+r.width/2-o.width/2,d=r.y+r.height/2-o.height/2,f=r[s]/2-o[s]/2;let p;switch(c){case"top":p={x:u,y:r.y-o.height};break;case"bottom":p={x:u,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:d};break;case"left":p={x:r.x-o.width,y:d};break;default:p={x:r.x,y:r.y}}switch(bi(t)){case"start":p[i]-=f*(n&&l?-1:1);break;case"end":p[i]+=f*(n&&l?-1:1);break}return p}const DU=async(e,t,n)=>{const{placement:r="bottom",strategy:o="absolute",middleware:a=[],platform:i}=n,s=a.filter(Boolean),c=await(i.isRTL==null?void 0:i.isRTL(t));let l=await i.getElementRects({reference:e,floating:t,strategy:o}),{x:u,y:d}=fO(l,r,c),f=r,p={},y=0;for(let m=0;m<s.length;m++){const{name:v,fn:b}=s[m],{x,y:_,data:w,reset:j}=await b({x:u,y:d,initialPlacement:r,placement:f,strategy:o,middlewareData:p,rects:l,platform:i,elements:{reference:e,floating:t}});u=x??u,d=_??d,p={...p,[v]:{...p[v],...w}},j&&y<=50&&(y++,typeof j=="object"&&(j.placement&&(f=j.placement),j.rects&&(l=j.rects===!0?await i.getElementRects({reference:e,floating:t,strategy:o}):j.rects),{x:u,y:d}=fO(l,f,c)),m=-1)}return{x:u,y:d,placement:f,strategy:o,middlewareData:p}};async function wc(e,t){var n;t===void 0&&(t={});const{x:r,y:o,platform:a,rects:i,elements:s,strategy:c}=e,{boundary:l="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:f=!1,padding:p=0}=Jr(t,e),y=dO(p),m=s[f?d==="floating"?"reference":"floating":d],v=gd(await a.getClippingRect({element:(n=await(a.isElement==null?void 0:a.isElement(m)))==null||n?m:m.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(s.floating)),boundary:l,rootBoundary:u,strategy:c})),b=d==="floating"?{x:r,y:o,width:i.floating.width,height:i.floating.height}:i.reference,x=await(a.getOffsetParent==null?void 0:a.getOffsetParent(s.floating)),_=await(a.isElement==null?void 0:a.isElement(x))?await(a.getScale==null?void 0:a.getScale(x))||{x:1,y:1}:{x:1,y:1},w=gd(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:s,rect:b,offsetParent:x,strategy:c}):b);return{top:(v.top-w.top+y.top)/_.y,bottom:(w.bottom-v.bottom+y.bottom)/_.y,left:(v.left-w.left+y.left)/_.x,right:(w.right-v.right+y.right)/_.x}}const LU=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:o,rects:a,platform:i,elements:s,middlewareData:c}=t,{element:l,padding:u=0}=Jr(e,t)||{};if(l==null)return{};const d=dO(u),f={x:n,y:r},p=Ay(o),y=Py(p),m=await i.getDimensions(l),v=p==="y",b=v?"top":"left",x=v?"bottom":"right",_=v?"clientHeight":"clientWidth",w=a.reference[y]+a.reference[p]-f[p]-a.floating[y],j=f[p]-a.reference[p],E=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l));let S=E?E[_]:0;(!S||!await(i.isElement==null?void 0:i.isElement(E)))&&(S=s.floating[_]||a.floating[y]);const O=w/2-j/2,P=S/2-m[y]/2-1,M=Mr(d[b],P),k=Mr(d[x],P),R=M,A=S-m[y]-k,C=S/2-m[y]/2+O,N=Ny(R,C,A),T=!c.arrow&&bi(o)!=null&&C!==N&&a.reference[y]/2-(C<R?M:k)-m[y]/2<0,I=T?C<R?C-R:C-A:0;return{[p]:f[p]+I,data:{[p]:N,centerOffset:C-N-I,...T&&{alignmentOffset:I}},reset:T}}}),FU=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:o,middlewareData:a,rects:i,initialPlacement:s,platform:c,elements:l}=t,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:m=!0,...v}=Jr(e,t);if((n=a.arrow)!=null&&n.alignmentOffset)return{};const b=Gr(o),x=zo(s),_=Gr(s)===s,w=await(c.isRTL==null?void 0:c.isRTL(l.floating)),j=f||(_||!m?[yd(s)]:AU(s)),E=y!=="none";!f&&E&&j.push(...RU(s,m,y,w));const S=[s,...j],O=await wc(t,v),P=[];let M=((r=a.flip)==null?void 0:r.overflows)||[];if(u&&P.push(O[b]),d){const C=PU(o,i,w);P.push(O[C[0]],O[C[1]])}if(M=[...M,{placement:o,overflows:P}],!P.every(C=>C<=0)){var k,R;const C=(((k=a.flip)==null?void 0:k.index)||0)+1,N=S[C];if(N)return{data:{index:C,overflows:M},reset:{placement:N}};let T=(R=M.filter(I=>I.overflows[0]<=0).sort((I,L)=>I.overflows[1]-L.overflows[1])[0])==null?void 0:R.placement;if(!T)switch(p){case"bestFit":{var A;const I=(A=M.filter(L=>{if(E){const D=zo(L.placement);return D===x||D==="y"}return!0}).map(L=>[L.placement,L.overflows.filter(D=>D>0).reduce((D,B)=>D+B,0)]).sort((L,D)=>L[1]-D[1])[0])==null?void 0:A[0];I&&(T=I);break}case"initialPlacement":T=s;break}if(o!==T)return{reset:{placement:T}}}return{}}}};function pO(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function hO(e){return MU.some(t=>e[t]>=0)}const BU=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...o}=Jr(e,t);switch(r){case"referenceHidden":{const a=await wc(t,{...o,elementContext:"reference"}),i=pO(a,n.reference);return{data:{referenceHiddenOffsets:i,referenceHidden:hO(i)}}}case"escaped":{const a=await wc(t,{...o,altBoundary:!0}),i=pO(a,n.floating);return{data:{escapedOffsets:i,escaped:hO(i)}}}default:return{}}}}};async function $U(e,t){const{placement:n,platform:r,elements:o}=e,a=await(r.isRTL==null?void 0:r.isRTL(o.floating)),i=Gr(n),s=bi(n),c=zo(n)==="y",l=["left","top"].includes(i)?-1:1,u=a&&c?-1:1,d=Jr(t,e);let{mainAxis:f,crossAxis:p,alignmentAxis:y}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...d};return s&&typeof y=="number"&&(p=s==="end"?y*-1:y),c?{x:p*u,y:f*l}:{x:f*l,y:p*u}}const zU=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:o,y:a,placement:i,middlewareData:s}=t,c=await $U(t,e);return i===((n=s.offset)==null?void 0:n.placement)&&(r=s.arrow)!=null&&r.alignmentOffset?{}:{x:o+c.x,y:a+c.y,data:{...c,placement:i}}}}},VU=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:o}=t,{mainAxis:a=!0,crossAxis:i=!1,limiter:s={fn:v=>{let{x:b,y:x}=v;return{x:b,y:x}}},...c}=Jr(e,t),l={x:n,y:r},u=await wc(t,c),d=zo(Gr(o)),f=ky(d);let p=l[f],y=l[d];if(a){const v=f==="y"?"top":"left",b=f==="y"?"bottom":"right",x=p+u[v],_=p-u[b];p=Ny(x,p,_)}if(i){const v=d==="y"?"top":"left",b=d==="y"?"bottom":"right",x=y+u[v],_=y-u[b];y=Ny(x,y,_)}const m=s.fn({...t,[f]:p,[d]:y});return{...m,data:{x:m.x-n,y:m.y-r}}}}},UU=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:o,rects:a,middlewareData:i}=t,{offset:s=0,mainAxis:c=!0,crossAxis:l=!0}=Jr(e,t),u={x:n,y:r},d=zo(o),f=ky(d);let p=u[f],y=u[d];const m=Jr(s,t),v=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(c){const _=f==="y"?"height":"width",w=a.reference[f]-a.floating[_]+v.mainAxis,j=a.reference[f]+a.reference[_]-v.mainAxis;p<w?p=w:p>j&&(p=j)}if(l){var b,x;const _=f==="y"?"width":"height",w=["top","left"].includes(Gr(o)),j=a.reference[d]-a.floating[_]+(w&&((b=i.offset)==null?void 0:b[d])||0)+(w?0:v.crossAxis),E=a.reference[d]+a.reference[_]+(w?0:((x=i.offset)==null?void 0:x[d])||0)-(w?v.crossAxis:0);y<j?y=j:y>E&&(y=E)}return{[f]:p,[d]:y}}}},HU=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){const{placement:n,rects:r,platform:o,elements:a}=t,{apply:i=()=>{},...s}=Jr(e,t),c=await wc(t,s),l=Gr(n),u=bi(n),d=zo(n)==="y",{width:f,height:p}=r.floating;let y,m;l==="top"||l==="bottom"?(y=l,m=u===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(m=l,y=u==="end"?"top":"bottom");const v=p-c.top-c.bottom,b=f-c.left-c.right,x=Mr(p-c[y],v),_=Mr(f-c[m],b),w=!t.middlewareData.shift;let j=x,E=_;if(d?E=u||w?Mr(_,b):b:j=u||w?Mr(x,v):v,w&&!u){const O=Tn(c.left,0),P=Tn(c.right,0),M=Tn(c.top,0),k=Tn(c.bottom,0);d?E=f-2*(O!==0||P!==0?O+P:Tn(c.left,c.right)):j=p-2*(M!==0||k!==0?M+k:Tn(c.top,c.bottom))}await i({...t,availableWidth:E,availableHeight:j});const S=await o.getDimensions(a.floating);return f!==S.width||p!==S.height?{reset:{rects:!0}}:{}}}};function xi(e){return mO(e)?(e.nodeName||"").toLowerCase():"#document"}function Rn(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Zr(e){var t;return(t=(mO(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function mO(e){return e instanceof Node||e instanceof Rn(e).Node}function sr(e){return e instanceof Element||e instanceof Rn(e).Element}function Nr(e){return e instanceof HTMLElement||e instanceof Rn(e).HTMLElement}function yO(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Rn(e).ShadowRoot}function _c(e){const{overflow:t,overflowX:n,overflowY:r,display:o}=cr(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(o)}function WU(e){return["table","td","th"].includes(xi(e))}function vd(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function Ry(e){const t=Iy(),n=sr(e)?cr(e):e;return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function qU(e){let t=Vo(e);for(;Nr(t)&&!wi(t);){if(Ry(t))return t;if(vd(t))return null;t=Vo(t)}return null}function Iy(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function wi(e){return["html","body","#document"].includes(xi(e))}function cr(e){return Rn(e).getComputedStyle(e)}function bd(e){return sr(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Vo(e){if(xi(e)==="html")return e;const t=e.assignedSlot||e.parentNode||yO(e)&&e.host||Zr(e);return yO(t)?t.host:t}function gO(e){const t=Vo(e);return wi(t)?e.ownerDocument?e.ownerDocument.body:e.body:Nr(t)&&_c(t)?t:gO(t)}function jc(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const o=gO(e),a=o===((r=e.ownerDocument)==null?void 0:r.body),i=Rn(o);if(a){const s=Dy(i);return t.concat(i,i.visualViewport||[],_c(o)?o:[],s&&n?jc(s):[])}return t.concat(o,jc(o,[],n))}function Dy(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function vO(e){const t=cr(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const o=Nr(e),a=o?e.offsetWidth:n,i=o?e.offsetHeight:r,s=hd(n)!==a||hd(r)!==i;return s&&(n=a,r=i),{width:n,height:r,$:s}}function Ly(e){return sr(e)?e:e.contextElement}function _i(e){const t=Ly(e);if(!Nr(t))return $o(1);const n=t.getBoundingClientRect(),{width:r,height:o,$:a}=vO(t);let i=(a?hd(n.width):n.width)/r,s=(a?hd(n.height):n.height)/o;return(!i||!Number.isFinite(i))&&(i=1),(!s||!Number.isFinite(s))&&(s=1),{x:i,y:s}}const YU=$o(0);function bO(e){const t=Rn(e);return!Iy()||!t.visualViewport?YU:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function KU(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Rn(e)?!1:t}function xa(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const o=e.getBoundingClientRect(),a=Ly(e);let i=$o(1);t&&(r?sr(r)&&(i=_i(r)):i=_i(e));const s=KU(a,n,r)?bO(a):$o(0);let c=(o.left+s.x)/i.x,l=(o.top+s.y)/i.y,u=o.width/i.x,d=o.height/i.y;if(a){const f=Rn(a),p=r&&sr(r)?Rn(r):r;let y=f,m=Dy(y);for(;m&&r&&p!==y;){const v=_i(m),b=m.getBoundingClientRect(),x=cr(m),_=b.left+(m.clientLeft+parseFloat(x.paddingLeft))*v.x,w=b.top+(m.clientTop+parseFloat(x.paddingTop))*v.y;c*=v.x,l*=v.y,u*=v.x,d*=v.y,c+=_,l+=w,y=Rn(m),m=Dy(y)}}return gd({width:u,height:d,x:c,y:l})}function XU(e){let{elements:t,rect:n,offsetParent:r,strategy:o}=e;const a=o==="fixed",i=Zr(r),s=t?vd(t.floating):!1;if(r===i||s&&a)return n;let c={scrollLeft:0,scrollTop:0},l=$o(1);const u=$o(0),d=Nr(r);if((d||!d&&!a)&&((xi(r)!=="body"||_c(i))&&(c=bd(r)),Nr(r))){const f=xa(r);l=_i(r),u.x=f.x+r.clientLeft,u.y=f.y+r.clientTop}return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-c.scrollLeft*l.x+u.x,y:n.y*l.y-c.scrollTop*l.y+u.y}}function QU(e){return Array.from(e.getClientRects())}function xO(e){return xa(Zr(e)).left+bd(e).scrollLeft}function JU(e){const t=Zr(e),n=bd(e),r=e.ownerDocument.body,o=Tn(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),a=Tn(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let i=-n.scrollLeft+xO(e);const s=-n.scrollTop;return cr(r).direction==="rtl"&&(i+=Tn(t.clientWidth,r.clientWidth)-o),{width:o,height:a,x:i,y:s}}function GU(e,t){const n=Rn(e),r=Zr(e),o=n.visualViewport;let a=r.clientWidth,i=r.clientHeight,s=0,c=0;if(o){a=o.width,i=o.height;const l=Iy();(!l||l&&t==="fixed")&&(s=o.offsetLeft,c=o.offsetTop)}return{width:a,height:i,x:s,y:c}}function ZU(e,t){const n=xa(e,!0,t==="fixed"),r=n.top+e.clientTop,o=n.left+e.clientLeft,a=Nr(e)?_i(e):$o(1),i=e.clientWidth*a.x,s=e.clientHeight*a.y,c=o*a.x,l=r*a.y;return{width:i,height:s,x:c,y:l}}function wO(e,t,n){let r;if(t==="viewport")r=GU(e,n);else if(t==="document")r=JU(Zr(e));else if(sr(t))r=ZU(t,n);else{const o=bO(e);r={...t,x:t.x-o.x,y:t.y-o.y}}return gd(r)}function _O(e,t){const n=Vo(e);return n===t||!sr(n)||wi(n)?!1:cr(n).position==="fixed"||_O(n,t)}function eH(e,t){const n=t.get(e);if(n)return n;let r=jc(e,[],!1).filter(s=>sr(s)&&xi(s)!=="body"),o=null;const a=cr(e).position==="fixed";let i=a?Vo(e):e;for(;sr(i)&&!wi(i);){const s=cr(i),c=Ry(i);!c&&s.position==="fixed"&&(o=null),(a?!c&&!o:!c&&s.position==="static"&&o&&["absolute","fixed"].includes(o.position)||_c(i)&&!c&&_O(e,i))?r=r.filter(l=>l!==i):o=s,i=Vo(i)}return t.set(e,r),r}function tH(e){let{element:t,boundary:n,rootBoundary:r,strategy:o}=e;const a=[...n==="clippingAncestors"?vd(t)?[]:eH(t,this._c):[].concat(n),r],i=a[0],s=a.reduce((c,l)=>{const u=wO(t,l,o);return c.top=Tn(u.top,c.top),c.right=Mr(u.right,c.right),c.bottom=Mr(u.bottom,c.bottom),c.left=Tn(u.left,c.left),c},wO(t,i,o));return{width:s.right-s.left,height:s.bottom-s.top,x:s.left,y:s.top}}function nH(e){const{width:t,height:n}=vO(e);return{width:t,height:n}}function rH(e,t,n){const r=Nr(t),o=Zr(t),a=n==="fixed",i=xa(e,!0,a,t);let s={scrollLeft:0,scrollTop:0};const c=$o(0);if(r||!r&&!a)if((xi(t)!=="body"||_c(o))&&(s=bd(t)),r){const d=xa(t,!0,a,t);c.x=d.x+t.clientLeft,c.y=d.y+t.clientTop}else o&&(c.x=xO(o));const l=i.left+s.scrollLeft-c.x,u=i.top+s.scrollTop-c.y;return{x:l,y:u,width:i.width,height:i.height}}function Fy(e){return cr(e).position==="static"}function jO(e,t){return!Nr(e)||cr(e).position==="fixed"?null:t?t(e):e.offsetParent}function EO(e,t){const n=Rn(e);if(vd(e))return n;if(!Nr(e)){let o=Vo(e);for(;o&&!wi(o);){if(sr(o)&&!Fy(o))return o;o=Vo(o)}return n}let r=jO(e,t);for(;r&&WU(r)&&Fy(r);)r=jO(r,t);return r&&wi(r)&&Fy(r)&&!Ry(r)?n:r||qU(e)||n}const oH=async function(e){const t=this.getOffsetParent||EO,n=this.getDimensions,r=await n(e.floating);return{reference:rH(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function aH(e){return cr(e).direction==="rtl"}const iH={convertOffsetParentRelativeRectToViewportRelativeRect:XU,getDocumentElement:Zr,getClippingRect:tH,getOffsetParent:EO,getElementRects:oH,getClientRects:QU,getDimensions:nH,getScale:_i,isElement:sr,isRTL:aH};function sH(e,t){let n=null,r;const o=Zr(e);function a(){var s;clearTimeout(r),(s=n)==null||s.disconnect(),n=null}function i(s,c){s===void 0&&(s=!1),c===void 0&&(c=1),a();const{left:l,top:u,width:d,height:f}=e.getBoundingClientRect();if(s||t(),!d||!f)return;const p=md(u),y=md(o.clientWidth-(l+d)),m=md(o.clientHeight-(u+f)),v=md(l),b={rootMargin:-p+"px "+-y+"px "+-m+"px "+-v+"px",threshold:Tn(0,Mr(1,c))||1};let x=!0;function _(w){const j=w[0].intersectionRatio;if(j!==c){if(!x)return i();j?i(!1,j):r=setTimeout(()=>{i(!1,1e-7)},1e3)}x=!1}try{n=new IntersectionObserver(_,{...b,root:o.ownerDocument})}catch{n=new IntersectionObserver(_,b)}n.observe(e)}return i(!0),a}$E=function(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:o=!0,ancestorResize:a=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:s=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,l=Ly(e),u=o||a?[...l?jc(l):[],...jc(t)]:[];u.forEach(b=>{o&&b.addEventListener("scroll",n,{passive:!0}),a&&b.addEventListener("resize",n)});const d=l&&s?sH(l,n):null;let f=-1,p=null;i&&(p=new ResizeObserver(b=>{let[x]=b;x&&x.target===l&&p&&(p.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var _;(_=p)==null||_.observe(t)})),n()}),l&&!c&&p.observe(l),p.observe(t));let y,m=c?xa(e):null;c&&v();function v(){const b=xa(e);m&&(b.x!==m.x||b.y!==m.y||b.width!==m.width||b.height!==m.height)&&n(),m=b,y=requestAnimationFrame(v)}return n(),()=>{var b;u.forEach(x=>{o&&x.removeEventListener("scroll",n),a&&x.removeEventListener("resize",n)}),d==null||d(),(b=p)==null||b.disconnect(),p=null,c&&cancelAnimationFrame(y)}};let SO;LE=zU,eS=VU,FE=FU,nS=HU,SO=BU,Nm=LU,tS=UU,BE=(e,t,n)=>{const r=new Map,o={platform:iH,...n},a={...o.platform,_c:r};return DU(e,t,{...o,platform:a})};var xd=typeof document<"u"?g.useLayoutEffect:g.useEffect;function wd(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,o;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!wd(e[r],t[r]))return!1;return!0}if(o=Object.keys(e),n=o.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,o[r]))return!1;for(r=n;r--!==0;){const a=o[r];if(!(a==="_owner"&&e.$$typeof)&&!wd(e[a],t[a]))return!1}return!0}return e!==e&&t!==t}function CO(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function OO(e,t){const n=CO(e);return Math.round(t*n)/n}function MO(e){const t=g.useRef(e);return xd(()=>{t.current=e}),t}function cH(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:o,elements:{reference:a,floating:i}={},transform:s=!0,whileElementsMounted:c,open:l}=e,[u,d]=g.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[f,p]=g.useState(r);wd(f,r)||p(r);const[y,m]=g.useState(null),[v,b]=g.useState(null),x=g.useCallback(I=>{I!==E.current&&(E.current=I,m(I))},[]),_=g.useCallback(I=>{I!==S.current&&(S.current=I,b(I))},[]),w=a||y,j=i||v,E=g.useRef(null),S=g.useRef(null),O=g.useRef(u),P=c!=null,M=MO(c),k=MO(o),R=g.useCallback(()=>{if(!E.current||!S.current)return;const I={placement:t,strategy:n,middleware:f};k.current&&(I.platform=k.current),BE(E.current,S.current,I).then(L=>{const D={...L,isPositioned:!0};A.current&&!wd(O.current,D)&&(O.current=D,Nu.flushSync(()=>{d(D)}))})},[f,t,n,k]);xd(()=>{l===!1&&O.current.isPositioned&&(O.current.isPositioned=!1,d(I=>({...I,isPositioned:!1})))},[l]);const A=g.useRef(!1);xd(()=>(A.current=!0,()=>{A.current=!1}),[]),xd(()=>{if(w&&(E.current=w),j&&(S.current=j),w&&j){if(M.current)return M.current(w,j,R);R()}},[w,j,R,M,P]);const C=g.useMemo(()=>({reference:E,floating:S,setReference:x,setFloating:_}),[x,_]),N=g.useMemo(()=>({reference:w,floating:j}),[w,j]),T=g.useMemo(()=>{const I={position:n,left:0,top:0};if(!N.floating)return I;const L=OO(N.floating,u.x),D=OO(N.floating,u.y);return s?{...I,transform:"translate("+L+"px, "+D+"px)",...CO(N.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:L,top:D}},[n,s,N.floating,u.x,u.y]);return g.useMemo(()=>({...u,update:R,refs:C,elements:N,floatingStyles:T}),[u,R,C,N,T])}const lH=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:o}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?Nm({element:r.current,padding:o}).fn(n):{}:r?Nm({element:r,padding:o}).fn(n):{}}}},uH=(e,t)=>({...LE(e),options:[e,t]}),dH=(e,t)=>({...eS(e),options:[e,t]}),fH=(e,t)=>({...tS(e),options:[e,t]}),pH=(e,t)=>({...FE(e),options:[e,t]}),hH=(e,t)=>({...nS(e),options:[e,t]}),mH=(e,t)=>({...SO(e),options:[e,t]}),yH=(e,t)=>({...lH(e),options:[e,t]});var gH="Arrow",NO=g.forwardRef((e,t)=>{const{children:n,width:r=10,height:o=5,...a}=e;return h.jsx(Oe.svg,{...a,ref:t,width:r,height:o,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:h.jsx("polygon",{points:"0,0 30,0 15,10"})})});NO.displayName=gH;var vH=NO;function bH(e,t=[]){let n=[];function r(a,i){const s=g.createContext(i),c=n.length;n=[...n,i];function l(d){const{scope:f,children:p,...y}=d,m=(f==null?void 0:f[e][c])||s,v=g.useMemo(()=>y,Object.values(y));return h.jsx(m.Provider,{value:v,children:p})}function u(d,f){const p=(f==null?void 0:f[e][c])||s,y=g.useContext(p);if(y)return y;if(i!==void 0)return i;throw new Error(`\`${d}\` must be used within \`${a}\``)}return l.displayName=a+"Provider",[l,u]}const o=()=>{const a=n.map(i=>g.createContext(i));return function(i){const s=(i==null?void 0:i[e])||a;return g.useMemo(()=>({[`__scope${e}`]:{...i,[e]:s}}),[i,s])}};return o.scopeName=e,[r,xH(o,...t)]}function xH(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(o){const a=r.reduce((i,{useScope:s,scopeName:c})=>{const l=s(o)[`__scope${c}`];return{...i,...l}},{});return g.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return n.scopeName=t.scopeName,n}function kO(e){const[t,n]=g.useState(void 0);return xn(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(o=>{if(!Array.isArray(o)||!o.length)return;const a=o[0];let i,s;if("borderBoxSize"in a){const c=a.borderBoxSize,l=Array.isArray(c)?c[0]:c;i=l.inlineSize,s=l.blockSize}else i=e.offsetWidth,s=e.offsetHeight;n({width:i,height:s})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var By="Popper",[PO,Uo]=bH(By),[wH,AO]=PO(By),TO=e=>{const{__scopePopper:t,children:n}=e,[r,o]=g.useState(null);return h.jsx(wH,{scope:t,anchor:r,onAnchorChange:o,children:n})};TO.displayName=By;var RO="PopperAnchor",IO=g.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...o}=e,a=AO(RO,n),i=g.useRef(null),s=nt(t,i);return g.useEffect(()=>{a.onAnchorChange((r==null?void 0:r.current)||i.current)}),r?null:h.jsx(Oe.div,{...o,ref:s})});IO.displayName=RO;var $y="PopperContent",[_H,jH]=PO($y),DO=g.forwardRef((e,t)=>{var Z,q,W,J,te,$;const{__scopePopper:n,side:r="bottom",sideOffset:o=0,align:a="center",alignOffset:i=0,arrowPadding:s=0,avoidCollisions:c=!0,collisionBoundary:l=[],collisionPadding:u=0,sticky:d="partial",hideWhenDetached:f=!1,updatePositionStrategy:p="optimized",onPlaced:y,...m}=e,v=AO($y,n),[b,x]=g.useState(null),_=nt(t,se=>x(se)),[w,j]=g.useState(null),E=kO(w),S=(E==null?void 0:E.width)??0,O=(E==null?void 0:E.height)??0,P=r+(a!=="center"?"-"+a:""),M=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},k=Array.isArray(l)?l:[l],R=k.length>0,A={padding:M,boundary:k.filter(SH),altBoundary:R},{refs:C,floatingStyles:N,placement:T,isPositioned:I,middlewareData:L}=cH({strategy:"fixed",placement:P,whileElementsMounted:(...se)=>$E(...se,{animationFrame:p==="always"}),elements:{reference:v.anchor},middleware:[uH({mainAxis:o+O,alignmentAxis:i}),c&&dH({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?fH():void 0,...A}),c&&pH({...A}),hH({...A,apply:({elements:se,rects:le,availableWidth:ve,availableHeight:Te})=>{const{width:qe,height:Ye}=le.reference,ze=se.floating.style;ze.setProperty("--radix-popper-available-width",`${ve}px`),ze.setProperty("--radix-popper-available-height",`${Te}px`),ze.setProperty("--radix-popper-anchor-width",`${qe}px`),ze.setProperty("--radix-popper-anchor-height",`${Ye}px`)}}),w&&yH({element:w,padding:s}),CH({arrowWidth:S,arrowHeight:O}),f&&mH({strategy:"referenceHidden",...A})]}),[D,B]=BO(T),H=Io(y);xn(()=>{I&&(H==null||H())},[I,H]);const F=(Z=L.arrow)==null?void 0:Z.x,z=(q=L.arrow)==null?void 0:q.y,G=((W=L.arrow)==null?void 0:W.centerOffset)!==0,[Q,oe]=g.useState();return xn(()=>{b&&oe(window.getComputedStyle(b).zIndex)},[b]),h.jsx("div",{ref:C.setFloating,"data-radix-popper-content-wrapper":"",style:{...N,transform:I?N.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Q,"--radix-popper-transform-origin":[(J=L.transformOrigin)==null?void 0:J.x,(te=L.transformOrigin)==null?void 0:te.y].join(" "),...(($=L.hide)==null?void 0:$.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:h.jsx(_H,{scope:n,placedSide:D,onArrowChange:j,arrowX:F,arrowY:z,shouldHideArrow:G,children:h.jsx(Oe.div,{"data-side":D,"data-align":B,...m,ref:_,style:{...m.style,animation:I?void 0:"none"}})})})});DO.displayName=$y;var LO="PopperArrow",EH={top:"bottom",right:"left",bottom:"top",left:"right"},FO=g.forwardRef(function(e,t){const{__scopePopper:n,...r}=e,o=jH(LO,n),a=EH[o.placedSide];return h.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:h.jsx(vH,{...r,ref:t,style:{...r.style,display:"block"}})})});FO.displayName=LO;function SH(e){return e!==null}var CH=e=>({name:"transformOrigin",options:e,fn(t){var m,v,b;const{placement:n,rects:r,middlewareData:o}=t,a=((m=o.arrow)==null?void 0:m.centerOffset)!==0,i=a?0:e.arrowWidth,s=a?0:e.arrowHeight,[c,l]=BO(n),u={start:"0%",center:"50%",end:"100%"}[l],d=(((v=o.arrow)==null?void 0:v.x)??0)+i/2,f=(((b=o.arrow)==null?void 0:b.y)??0)+s/2;let p="",y="";return c==="bottom"?(p=a?u:`${d}px`,y=`${-s}px`):c==="top"?(p=a?u:`${d}px`,y=`${r.floating.height+s}px`):c==="right"?(p=`${-s}px`,y=a?u:`${f}px`):c==="left"&&(p=`${r.floating.width+s}px`,y=a?u:`${f}px`),{data:{x:p,y}}}});function BO(e){const[t,n="center"]=e.split("-");return[t,n]}var Ec=TO,Sc=IO,_d=DO,jd=FO,[Ed,Iwe]=Vn("Tooltip",[Uo]),Sd=Uo(),$O="TooltipProvider",OH=700,zy="tooltip.open",[MH,Vy]=Ed($O),zO=e=>{const{__scopeTooltip:t,delayDuration:n=OH,skipDelayDuration:r=300,disableHoverableContent:o=!1,children:a}=e,[i,s]=g.useState(!0),c=g.useRef(!1),l=g.useRef(0);return g.useEffect(()=>{const u=l.current;return()=>window.clearTimeout(u)},[]),h.jsx(MH,{scope:t,isOpenDelayed:i,delayDuration:n,onOpen:g.useCallback(()=>{window.clearTimeout(l.current),s(!1)},[]),onClose:g.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>s(!0),r)},[r]),isPointerInTransitRef:c,onPointerInTransitChange:g.useCallback(u=>{c.current=u},[]),disableHoverableContent:o,children:a})};zO.displayName=$O;var Cd="Tooltip",[NH,Cc]=Ed(Cd),VO=e=>{const{__scopeTooltip:t,children:n,open:r,defaultOpen:o=!1,onOpenChange:a,disableHoverableContent:i,delayDuration:s}=e,c=Vy(Cd,e.__scopeTooltip),l=Sd(t),[u,d]=g.useState(null),f=mt(),p=g.useRef(0),y=i??c.disableHoverableContent,m=s??c.delayDuration,v=g.useRef(!1),[b=!1,x]=Zt({prop:r,defaultProp:o,onChange:S=>{S?(c.onOpen(),document.dispatchEvent(new CustomEvent(zy))):c.onClose(),a==null||a(S)}}),_=g.useMemo(()=>b?v.current?"delayed-open":"instant-open":"closed",[b]),w=g.useCallback(()=>{window.clearTimeout(p.current),p.current=0,v.current=!1,x(!0)},[x]),j=g.useCallback(()=>{window.clearTimeout(p.current),p.current=0,x(!1)},[x]),E=g.useCallback(()=>{window.clearTimeout(p.current),p.current=window.setTimeout(()=>{v.current=!0,x(!0),p.current=0},m)},[m,x]);return g.useEffect(()=>()=>{p.current&&(window.clearTimeout(p.current),p.current=0)},[]),h.jsx(Ec,{...l,children:h.jsx(NH,{scope:t,contentId:f,open:b,stateAttribute:_,trigger:u,onTriggerChange:d,onTriggerEnter:g.useCallback(()=>{c.isOpenDelayed?E():w()},[c.isOpenDelayed,E,w]),onTriggerLeave:g.useCallback(()=>{y?j():(window.clearTimeout(p.current),p.current=0)},[j,y]),onOpen:w,onClose:j,disableHoverableContent:y,children:n})})};VO.displayName=Cd;var Uy="TooltipTrigger",UO=g.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,o=Cc(Uy,n),a=Vy(Uy,n),i=Sd(n),s=g.useRef(null),c=nt(t,s,o.onTriggerChange),l=g.useRef(!1),u=g.useRef(!1),d=g.useCallback(()=>l.current=!1,[]);return g.useEffect(()=>()=>document.removeEventListener("pointerup",d),[d]),h.jsx(Sc,{asChild:!0,...i,children:h.jsx(Oe.button,{"aria-describedby":o.open?o.contentId:void 0,"data-state":o.stateAttribute,...r,ref:c,onPointerMove:he(e.onPointerMove,f=>{f.pointerType!=="touch"&&!u.current&&!a.isPointerInTransitRef.current&&(o.onTriggerEnter(),u.current=!0)}),onPointerLeave:he(e.onPointerLeave,()=>{o.onTriggerLeave(),u.current=!1}),onPointerDown:he(e.onPointerDown,()=>{l.current=!0,document.addEventListener("pointerup",d,{once:!0})}),onFocus:he(e.onFocus,()=>{l.current||o.onOpen()}),onBlur:he(e.onBlur,o.onClose),onClick:he(e.onClick,o.onClose)})})});UO.displayName=Uy;var Hy="TooltipPortal",[kH,PH]=Ed(Hy,{forceMount:void 0}),HO=e=>{const{__scopeTooltip:t,forceMount:n,children:r,container:o}=e,a=Cc(Hy,t);return h.jsx(kH,{scope:t,forceMount:n,children:h.jsx(Mn,{present:n||a.open,children:h.jsx(Pu,{asChild:!0,container:o,children:r})})})};HO.displayName=Hy;var ji="TooltipContent",WO=g.forwardRef((e,t)=>{const n=PH(ji,e.__scopeTooltip),{forceMount:r=n.forceMount,side:o="top",...a}=e,i=Cc(ji,e.__scopeTooltip);return h.jsx(Mn,{present:r||i.open,children:i.disableHoverableContent?h.jsx(qO,{side:o,...a,ref:t}):h.jsx(AH,{side:o,...a,ref:t})})}),AH=g.forwardRef((e,t)=>{const n=Cc(ji,e.__scopeTooltip),r=Vy(ji,e.__scopeTooltip),o=g.useRef(null),a=nt(t,o),[i,s]=g.useState(null),{trigger:c,onClose:l}=n,u=o.current,{onPointerInTransitChange:d}=r,f=g.useCallback(()=>{s(null),d(!1)},[d]),p=g.useCallback((y,m)=>{const v=y.currentTarget,b={x:y.clientX,y:y.clientY},x=DH(b,v.getBoundingClientRect()),_=LH(b,x),w=FH(m.getBoundingClientRect()),j=$H([..._,...w]);s(j),d(!0)},[d]);return g.useEffect(()=>()=>f(),[f]),g.useEffect(()=>{if(c&&u){const y=v=>p(v,u),m=v=>p(v,c);return c.addEventListener("pointerleave",y),u.addEventListener("pointerleave",m),()=>{c.removeEventListener("pointerleave",y),u.removeEventListener("pointerleave",m)}}},[c,u,p,f]),g.useEffect(()=>{if(i){const y=m=>{const v=m.target,b={x:m.clientX,y:m.clientY},x=(c==null?void 0:c.contains(v))||(u==null?void 0:u.contains(v)),_=!BH(b,i);x?f():_&&(f(),l())};return document.addEventListener("pointermove",y),()=>document.removeEventListener("pointermove",y)}},[c,u,i,l,f]),h.jsx(qO,{...e,ref:a})}),[TH,RH]=Ed(Cd,{isInside:!1}),qO=g.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":o,onEscapeKeyDown:a,onPointerDownOutside:i,...s}=e,c=Cc(ji,n),l=Sd(n),{onClose:u}=c;return g.useEffect(()=>(document.addEventListener(zy,u),()=>document.removeEventListener(zy,u)),[u]),g.useEffect(()=>{if(c.trigger){const d=f=>{var p;(p=f.target)!=null&&p.contains(c.trigger)&&u()};return window.addEventListener("scroll",d,{capture:!0}),()=>window.removeEventListener("scroll",d,{capture:!0})}},[c.trigger,u]),h.jsx(ku,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:i,onFocusOutside:d=>d.preventDefault(),onDismiss:u,children:h.jsxs(_d,{"data-state":c.stateAttribute,...l,...s,ref:t,style:{...s.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[h.jsx(L9,{children:r}),h.jsx(TH,{scope:n,isInside:!0,children:h.jsx(owe,{id:c.contentId,role:"tooltip",children:o||r})})]})})});WO.displayName=ji;var YO="TooltipArrow",IH=g.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,o=Sd(n);return RH(YO,n).isInside?null:h.jsx(jd,{...o,...r,ref:t})});IH.displayName=YO;function DH(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),o=Math.abs(t.right-e.x),a=Math.abs(t.left-e.x);switch(Math.min(n,r,o,a)){case a:return"left";case o:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function LH(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function FH(e){const{top:t,right:n,bottom:r,left:o}=e;return[{x:o,y:t},{x:n,y:t},{x:n,y:r},{x:o,y:r}]}function BH(e,t){const{x:n,y:r}=e;let o=!1;for(let a=0,i=t.length-1;a<t.length;i=a++){const s=t[a].x,c=t[a].y,l=t[i].x,u=t[i].y;c>r!=u>r&&n<(l-s)*(r-c)/(u-c)+s&&(o=!o)}return o}function $H(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),zH(t)}function zH(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const o=e[r];for(;t.length>=2;){const a=t[t.length-1],i=t[t.length-2];if((a.x-i.x)*(o.y-i.y)>=(a.y-i.y)*(o.x-i.x))t.pop();else break}t.push(o)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const o=e[r];for(;n.length>=2;){const a=n[n.length-1],i=n[n.length-2];if((a.x-i.x)*(o.y-i.y)>=(a.y-i.y)*(o.x-i.x))n.pop();else break}n.push(o)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}zE=zO,VE=VO,UE=UO,Y9=HO,fm=WO;const Od=zE,Ei=VE,Si=UE,wa=g.forwardRef(({className:e,sideOffset:t=4,...n},r)=>h.jsx(fm,{ref:r,sideOffset:t,className:K("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n}));wa.displayName=fm.displayName;const VH="sidebar:state",UH=60*60*24*7,HH="16rem",WH="18rem",qH="3rem",YH="b",KO=g.createContext(null);function Oc(){const e=g.useContext(KO);if(!e)throw new Error("useSidebar must be used within a SidebarProvider.");return e}const Wy=g.forwardRef(({defaultOpen:e=!0,open:t,onOpenChange:n,className:r,style:o,children:a,...i},s)=>{const c=_V(),[l,u]=g.useState(!1),[d,f]=g.useState(e),p=t??d,y=g.useCallback(x=>{const _=typeof x=="function"?x(p):x;n?n(_):f(_),document.cookie=`${VH}=${_}; path=/; max-age=${UH}`},[n,p]),m=g.useCallback(()=>c?u(x=>!x):y(x=>!x),[c,y,u]);g.useEffect(()=>{const x=_=>{_.key===YH&&(_.metaKey||_.ctrlKey)&&(_.preventDefault(),m())};return window.addEventListener("keydown",x),()=>window.removeEventListener("keydown",x)},[m]);const v=p?"expanded":"collapsed",b=g.useMemo(()=>({state:v,open:p,setOpen:y,isMobile:c,openMobile:l,setOpenMobile:u,toggleSidebar:m}),[v,p,y,c,l,u,m]);return h.jsx(KO.Provider,{value:b,children:h.jsx(Od,{delayDuration:0,children:h.jsx("div",{style:{"--sidebar-width":HH,"--sidebar-width-icon":qH,...o},className:K("group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar",r),ref:s,...i,children:a})})})});Wy.displayName="SidebarProvider";const qy=g.forwardRef(({side:e="left",variant:t="sidebar",collapsible:n="offcanvas",className:r,children:o,...a},i)=>{const{isMobile:s,state:c,openMobile:l,setOpenMobile:u}=Oc();return n==="none"?h.jsx("div",{className:K("flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground",r),ref:i,...a,children:o}):s?h.jsx(jU,{open:l,onOpenChange:u,...a,children:h.jsx(lO,{"data-sidebar":"sidebar","data-mobile":"true",className:"w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden",style:{"--sidebar-width":WH},side:e,children:h.jsx("div",{className:"flex h-full w-full flex-col",children:o})})}):h.jsxs("div",{ref:i,className:"group peer hidden md:block text-sidebar-foreground","data-state":c,"data-collapsible":c==="collapsed"?n:"","data-variant":t,"data-side":e,children:[h.jsx("div",{className:K("duration-200 relative h-svh w-[--sidebar-width] bg-transparent transition-[width] ease-linear","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180",t==="floating"||t==="inset"?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon]")}),h.jsx("div",{className:K("duration-200 fixed inset-y-0 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] ease-linear md:flex",e==="left"?"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]":"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]",t==="floating"||t==="inset"?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l",r),...a,children:h.jsx("div",{"data-sidebar":"sidebar",className:"flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow",children:o})})]})});qy.displayName="Sidebar";const XO=g.forwardRef(({className:e,onClick:t,...n},r)=>{const{toggleSidebar:o}=Oc();return h.jsx(ft,{ref:r,"data-sidebar":"trigger",variant:"ghost",size:"icon",className:K("h-7 w-7",e),onClick:a=>{t==null||t(a),o()},...n,children:h.jsx(de,{size:32,name:"panel-left"})})});XO.displayName="SidebarTrigger";const QO=g.forwardRef(({className:e,...t},n)=>{const{toggleSidebar:r}=Oc();return h.jsx("button",{ref:n,"data-sidebar":"rail","aria-label":"Toggle Sidebar",tabIndex:-1,onClick:r,title:"Toggle Sidebar",className:K("absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] hover:after:bg-sidebar-border group-data-[side=left]:-right-4 group-data-[side=right]:left-0 sm:flex","[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize","[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize","group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar","[[data-side=left][data-collapsible=offcanvas]_&]:-right-2","[[data-side=right][data-collapsible=offcanvas]_&]:-left-2",e),...t})});QO.displayName="SidebarRail";const Yy=g.forwardRef(({className:e,...t},n)=>h.jsx("main",{ref:n,className:K("relative flex min-h-svh flex-1 flex-col bg-background","peer-data-[variant=inset]:min-h-[calc(100svh-theme(spacing.4))] md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow",e),...t}));Yy.displayName="SidebarInset";const KH=g.forwardRef(({className:e,...t},n)=>h.jsx(dn,{ref:n,"data-sidebar":"input",className:K("h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring",e),...t}));KH.displayName="SidebarInput";const XH=g.forwardRef(({className:e,...t},n)=>h.jsx("div",{ref:n,"data-sidebar":"header",className:K("flex flex-col gap-2 p-2",e),...t}));XH.displayName="SidebarHeader";const JO=g.forwardRef(({className:e,...t},n)=>h.jsx("div",{ref:n,"data-sidebar":"footer",className:K("flex flex-col gap-2 p-2",e),...t}));JO.displayName="SidebarFooter";const QH=g.forwardRef(({className:e,...t},n)=>h.jsx(vc,{ref:n,"data-sidebar":"separator",className:K("mx-2 w-auto bg-sidebar-border",e),...t}));QH.displayName="SidebarSeparator";const Ky=g.forwardRef(({className:e,...t},n)=>h.jsx("div",{ref:n,"data-sidebar":"content",className:K("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",e),...t}));Ky.displayName="SidebarContent";const Mc=g.forwardRef(({className:e,...t},n)=>h.jsx("div",{ref:n,"data-sidebar":"group",className:K("relative flex w-full min-w-0 flex-col p-2",e),...t}));Mc.displayName="SidebarGroup";const Nc=g.forwardRef(({className:e,asChild:t=!1,...n},r)=>{const o=t?Wr:"div";return h.jsx(o,{ref:r,"data-sidebar":"group-label",className:K("duration-200 flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opa] ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",e),...n})});Nc.displayName="SidebarGroupLabel";const JH=g.forwardRef(({className:e,asChild:t=!1,...n},r)=>{const o=t?Wr:"button";return h.jsx(o,{ref:r,"data-sidebar":"group-action",className:K("absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","group-data-[collapsible=icon]:hidden",e),...n})});JH.displayName="SidebarGroupAction";const GH=g.forwardRef(({className:e,...t},n)=>h.jsx("div",{ref:n,"data-sidebar":"group-content",className:K("w-full text-sm",e),...t}));GH.displayName="SidebarGroupContent";const Ci=g.forwardRef(({className:e,...t},n)=>h.jsx("ul",{ref:n,"data-sidebar":"menu",className:K("flex w-full min-w-0 flex-col gap-1",e),...t}));Ci.displayName="SidebarMenu";const eo=g.forwardRef(({className:e,...t},n)=>h.jsx("li",{ref:n,"data-sidebar":"menu-item",className:K("group/menu-item relative",e),...t}));eo.displayName="SidebarMenuItem";const ZH=Hr("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:!p-0"}},defaultVariants:{variant:"default",size:"default"}}),to=g.forwardRef(({asChild:e=!1,isActive:t=!1,variant:n="default",size:r="default",tooltip:o,className:a,...i},s)=>{const c=e?Wr:"button",{isMobile:l,state:u}=Oc(),d=h.jsx(c,{ref:s,"data-sidebar":"menu-button","data-size":r,"data-active":t,className:K(ZH({variant:n,size:r}),a),...i});return o?(typeof o=="string"&&(o={children:o}),h.jsxs(Ei,{children:[h.jsx(Si,{asChild:!0,children:d}),h.jsx(wa,{side:"right",align:"center",hidden:u!=="collapsed"||l,...o})]})):d});to.displayName="SidebarMenuButton";const eW=g.forwardRef(({className:e,asChild:t=!1,showOnHover:n=!1,...r},o)=>{const a=t?Wr:"button";return h.jsx(a,{ref:o,"data-sidebar":"menu-action",className:K("absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 peer-hover/menu-button:text-sidebar-accent-foreground [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",n&&"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0",e),...r})});eW.displayName="SidebarMenuAction";const tW=g.forwardRef(({className:e,...t},n)=>h.jsx("div",{ref:n,"data-sidebar":"menu-badge",className:K("absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground select-none pointer-events-none","peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",e),...t}));tW.displayName="SidebarMenuBadge";const nW=g.forwardRef(({className:e,showIcon:t=!1,...n},r)=>{const o=g.useMemo(()=>`${Math.floor(Math.random()*40)+50}%`,[]);return h.jsxs("div",{ref:r,"data-sidebar":"menu-skeleton",className:K("rounded-md h-8 flex gap-2 px-2 items-center",e),...n,children:[t&&h.jsx(uO,{className:"size-4 rounded-md","data-sidebar":"menu-skeleton-icon"}),h.jsx(uO,{className:"h-4 flex-1 max-w-[--skeleton-width]","data-sidebar":"menu-skeleton-text",style:{"--skeleton-width":o}})]})});nW.displayName="SidebarMenuSkeleton";const GO=g.forwardRef(({className:e,...t},n)=>h.jsx("ul",{ref:n,"data-sidebar":"menu-sub",className:K("mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5","group-data-[collapsible=icon]:hidden",e),...t}));GO.displayName="SidebarMenuSub";const ZO=g.forwardRef(({...e},t)=>h.jsx("li",{ref:t,...e}));ZO.displayName="SidebarMenuSubItem";const eM=g.forwardRef(({asChild:e=!1,size:t="md",isActive:n,className:r,...o},a)=>{const i=e?Wr:"a";return h.jsx(i,{ref:a,"data-sidebar":"menu-sub-button","data-size":t,"data-active":n,className:K("flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground","data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground",t==="sm"&&"text-xs",t==="md"&&"text-sm","group-data-[collapsible=icon]:hidden",r),...o})});eM.displayName="SidebarMenuSubButton";function rW({items:e}){const{t}=ke("documents");return h.jsxs(Mc,{children:[h.jsx(Nc,{children:h.jsx("div",{className:"text-sm",children:t("title")})}),h.jsx(Ci,{children:e.map(n=>{var r;return h.jsx(bV,{asChild:!0,defaultOpen:n.isActive,className:"group/collapsible",children:h.jsxs(eo,{children:[h.jsx(xV,{asChild:!0,children:h.jsxs(to,{className:"cursor-pointer",tooltip:t(n.title),children:[n.icon,h.jsx("span",{children:t(n.title)}),h.jsx(de,{name:"chevron-right",className:"ml-auto transition-transform duration-200 group-data-[state=open]/collapsible:rotate-90"})]})}),h.jsx(wV,{children:h.jsx(GO,{children:(r=n.items)==null?void 0:r.map(o=>h.jsx(ZO,{className:"cursor-pointer",children:h.jsx(eM,{asChild:!0,children:h.jsx("span",{children:t(o.title)})})},t(o.title)))})})]})},n.title)})})]})}const oW="hash",Xy={application:"/application/:applicationId?",whiteboard:"/whiteboard/:sessionId?"},In=(e,t)=>{const n=Xy[e];return t?Object.keys(t||{}).reduce((r,o)=>r.replace(`:${o}`,(t==null?void 0:t[o])||""),n):n.replace(/\/:[^/]+/g,"")},aW=()=>{{const[,e]=window.location.hash.split("?");return new URLSearchParams(`?${e}`)}},iW=g.memo(({text:e,colors:t={first:"#9E7AFF",second:"#FE8BBB"},className:n,sparklesCount:r=10,...o})=>{const[a,i]=g.useState([]);return g.useEffect(()=>{const s=()=>{const d=`${Math.random()*100}%`,f=`${Math.random()*100}%`,p=Math.random()>.5?t.first:t.second,y=Math.random()*2,m=Math.random()*1+.3,v=Math.random()*10+5;return{id:`${d}-${f}-${Date.now()}`,x:d,y:f,color:p,delay:y,scale:m,lifespan:v}},c=()=>{const d=Array.from({length:r},s);i(d)},l=()=>{i(d=>d.map(f=>f.lifespan<=0?s():{...f,lifespan:f.lifespan-.1}))};c();const u=setInterval(l,100);return()=>clearInterval(u)},[t.first,t.second]),h.jsx("div",{className:K("text-6xl font-bold",n),...o,style:{"--sparkles-first-color":`${t.first}`,"--sparkles-second-color":`${t.second}`},children:h.jsxs("span",{className:"relative inline-block",children:[a.map(s=>h.jsx(sW,{...s},s.id)),h.jsx("strong",{children:e})]})})},(e,t)=>e.text===t.text),sW=({id:e,x:t,y:n,color:r,delay:o,scale:a})=>h.jsx(Au.svg,{className:"pointer-events-none absolute z-20",initial:{opacity:0,left:t,top:n},animate:{opacity:[0,1,0],scale:[0,a,0],rotate:[75,120,150]},transition:{duration:.8,repeat:1/0,delay:o},width:"21",height:"21",viewBox:"0 0 21 21",children:h.jsx("path",{d:"M9.82531 0.843845C10.0553 0.215178 10.9446 0.215178 11.1746 0.843845L11.8618 2.72026C12.4006 4.19229 12.3916 6.39157 13.5 7.5C14.6084 8.60843 16.8077 8.59935 18.2797 9.13822L20.1561 9.82534C20.7858 10.0553 20.7858 10.9447 20.1561 11.1747L18.2797 11.8618C16.8077 12.4007 14.6084 12.3916 13.5 13.5C12.3916 14.6084 12.4006 16.8077 11.8618 18.2798L11.1746 20.1562C10.9446 20.7858 10.0553 20.7858 9.82531 20.1562L9.13819 18.2798C8.59932 16.8077 8.60843 14.6084 7.5 13.5C6.39157 12.3916 4.19225 12.4007 2.72023 11.8618L0.843814 11.1747C0.215148 10.9447 0.215148 10.0553 0.843814 9.82534L2.72023 9.13822C4.19225 8.59935 6.39157 8.60843 7.5 7.5C8.60843 6.39157 8.59932 4.19229 9.13819 2.72026L9.82531 0.843845Z",fill:r})},e);function cW({className:e,onClick:t}){const{t:n}=ke("sidebar");return h.jsxs(to,{className:K(e,"tw-w-full"),onClick:t,children:[h.jsx(de,{name:"frame"}),h.jsx(iW,{text:n("new_session"),className:"text-sm",sparklesCount:3})]})}const lW=()=>{const[e,t]=g.useState(!1),n=ot(i=>i.setCurrentSession),r=ot(i=>i.createSession),o=Tu(i=>i.setSelectedSessionId),a=g.useCallback(async i=>{try{t(!0);const s=await r(i);n(s),o(s.id)}finally{t(!1)}},[r,n,o]);return{loading:e,createSession:a}},kc=tc,uW=nc,tM=g.forwardRef(({className:e,...t},n)=>h.jsx(pa,{ref:n,className:K("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));tM.displayName=pa.displayName;const Oi=g.forwardRef(({className:e,children:t,...n},r)=>h.jsxs(uW,{children:[h.jsx(tM,{}),h.jsxs(ha,{ref:r,className:K("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...n,children:[t,h.jsxs(oc,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[h.jsx(de,{name:"x",className:"h-4 w-4"}),h.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Oi.displayName=ha.displayName;const Mi=({className:e,...t})=>h.jsx("div",{className:K("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});Mi.displayName="DialogHeader";const Qy=({className:e,...t})=>h.jsx("div",{className:K("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Qy.displayName="DialogFooter";const Ni=g.forwardRef(({className:e,...t},n)=>h.jsx(ii,{ref:n,className:K("text-lg font-semibold leading-none tracking-tight",e),...t}));Ni.displayName=ii.displayName;const Jy=g.forwardRef(({className:e,...t},n)=>h.jsx(si,{ref:n,className:K("text-sm text-muted-foreground",e),...t}));Jy.displayName=si.displayName;var dW="Label",nM=g.forwardRef((e,t)=>h.jsx(Oe.label,{...e,ref:t,onMouseDown:n=>{var r;n.target.closest("button, input, select, textarea")||((r=e.onMouseDown)==null||r.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));nM.displayName=dW;var rM=nM;let oM;oM=Hr("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Qe=g.forwardRef(({className:e,...t},n)=>h.jsx(rM,{ref:n,className:K(oM(),e),...t})),Qe.displayName=rM.displayName;const fW=oi(()=>{const e=sn(),{t}=ke("dialogs"),[n,r]=g.useState(""),{toast:o}=Ht(),{loading:a,createSession:i}=lW(),s=l=>{r(l.target.value)},c=async()=>{try{await i({name:n}),r(""),e.hide()}catch{o({variant:"destructive",description:t("create_session.errors.create_failed")})}};return h.jsx(kc,{open:e.visible,onOpenChange:e.hide,children:h.jsxs(Oi,{className:"sm:max-w-[425px]",children:[h.jsxs(Mi,{children:[h.jsx(Ni,{children:t("create_session.title")}),h.jsx(Jy,{children:t("create_session.description")})]}),h.jsx("div",{className:"grid gap-4 py-4",children:h.jsxs("div",{className:"flex flex-col space-y-1.5",children:[h.jsx(Qe,{className:"mb-2",htmlFor:"name",children:t("create_session.name")}),h.jsx(dn,{onChange:s,id:"name",value:n,placeholder:t("create_session.name_placeholder")})]})}),h.jsx(Qy,{children:h.jsx(ft,{onClick:c,disabled:a||!n,type:"submit",children:t("create_session.create")})})]})})}),pW=()=>{const[e,t]=g.useState(!1),n=ot(o=>o.deleteSession),r=g.useCallback(async o=>{try{t(!0),await n(o),await Promise.all([ce("FlowEdge").find({select:["id"],where:{session_id:o}}).then(a=>Promise.all(a.map(i=>ce("FlowEdge").delete(i.id)))),ce("FlowNode").find({select:["id"],where:{session_id:o}}).then(a=>Promise.all(a.map(i=>ce("FlowNode").delete(i.id))))])}finally{t(!1)}},[n]);return{loading:e,deleteSession:r}};var aM="AlertDialog",[hW,Dwe]=Vn(aM,[UC]),no=UC(),iM=e=>{const{__scopeAlertDialog:t,...n}=e,r=no(t);return h.jsx(tc,{...r,...n,modal:!0})};iM.displayName=aM;var mW="AlertDialogTrigger",yW=g.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,o=no(n);return h.jsx(sO,{...o,...r,ref:t})});yW.displayName=mW;var gW="AlertDialogPortal",sM=e=>{const{__scopeAlertDialog:t,...n}=e,r=no(t);return h.jsx(nc,{...r,...n})};sM.displayName=gW;var vW="AlertDialogOverlay",cM=g.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,o=no(n);return h.jsx(pa,{...o,...r,ref:t})});cM.displayName=vW;var ki="AlertDialogContent",[bW,xW]=hW(ki),lM=g.forwardRef((e,t)=>{const{__scopeAlertDialog:n,children:r,...o}=e,a=no(n),i=g.useRef(null),s=nt(t,i),c=g.useRef(null);return h.jsx(rO,{contentName:ki,titleName:uM,docsSlug:"alert-dialog",children:h.jsx(bW,{scope:n,cancelRef:c,children:h.jsxs(ha,{role:"alertdialog",...a,...o,ref:s,onOpenAutoFocus:he(o.onOpenAutoFocus,l=>{var u;l.preventDefault(),(u=c.current)==null||u.focus({preventScroll:!0})}),onPointerDownOutside:l=>l.preventDefault(),onInteractOutside:l=>l.preventDefault(),children:[h.jsx(L9,{children:r}),h.jsx(gM,{contentRef:i})]})})})});lM.displayName=ki;var uM="AlertDialogTitle",dM=g.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,o=no(n);return h.jsx(ii,{...o,...r,ref:t})});dM.displayName=uM;var fM="AlertDialogDescription",pM=g.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,o=no(n);return h.jsx(si,{...o,...r,ref:t})});pM.displayName=fM;var wW="AlertDialogAction",hM=g.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,o=no(n);return h.jsx(oc,{...o,...r,ref:t})});hM.displayName=wW;var mM="AlertDialogCancel",yM=g.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,{cancelRef:o}=xW(mM,n),a=no(n),i=nt(t,o);return h.jsx(oc,{...a,...r,ref:i})});yM.displayName=mM;let gM;gM=({contentRef:e})=>{const t=`\`${ki}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${ki}\` by passing a \`${fM}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${ki}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return g.useEffect(()=>{var n;document.getElementById((n=e.current)==null?void 0:n.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},WE=iM,HE=sM,jm=cM,Em=lM,Om=hM,Mm=yM,Sm=dM,Cm=pM;const vM=WE,_W=HE,bM=g.forwardRef(({className:e,...t},n)=>h.jsx(jm,{className:K("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));bM.displayName=jm.displayName;const Gy=g.forwardRef(({className:e,...t},n)=>h.jsxs(_W,{children:[h.jsx(bM,{}),h.jsx(Em,{ref:n,className:K("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));Gy.displayName=Em.displayName;const Zy=({className:e,...t})=>h.jsx("div",{className:K("flex flex-col space-y-2 text-center sm:text-left",e),...t});Zy.displayName="AlertDialogHeader";const eg=({className:e,...t})=>h.jsx("div",{className:K("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});eg.displayName="AlertDialogFooter";const tg=g.forwardRef(({className:e,...t},n)=>h.jsx(Sm,{ref:n,className:K("text-lg font-semibold",e),...t}));tg.displayName=Sm.displayName;const ng=g.forwardRef(({className:e,...t},n)=>h.jsx(Cm,{ref:n,className:K("text-sm text-muted-foreground",e),...t}));ng.displayName=Cm.displayName;const rg=g.forwardRef(({className:e,...t},n)=>h.jsx(Om,{ref:n,className:K(gc(),e),...t}));rg.displayName=Om.displayName;const og=g.forwardRef(({className:e,...t},n)=>h.jsx(Mm,{ref:n,className:K(gc({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));og.displayName=Mm.displayName;const xM=oi(({id:e})=>{const{t}=ke("dialogs"),n=sn(),{toast:r}=Ht(),{deleteSession:o,loading:a}=pW(),i=async()=>{try{await o(e),n.hide()}catch{r({variant:"destructive",description:t("delete_session.errors.delete_failed")})}};return h.jsx(vM,{open:n.visible,onOpenChange:n.hide,children:h.jsxs(Gy,{children:[h.jsxs(Zy,{children:[h.jsx(tg,{children:t("delete_session.title")}),h.jsx(ng,{children:t("delete_session.description")})]}),h.jsxs(eg,{children:[h.jsx(og,{onClick:n.hide,children:t("delete_session.cancel")}),h.jsx(rg,{disabled:a,onClick:i,children:t("delete_session.delete")})]})]})})});function jW({sessions:e,currentSession:t,setCurrentSession:n}){const{t:r}=ke("sidebar"),o=pc(),a=sn(fW),i=sn(xM),s=g.useCallback(()=>{a.show({})},[a]),c=g.useCallback((u,d)=>{u.preventDefault(),u.stopPropagation(),i.show({id:d})},[i]),l=u=>{n(u),o(In("whiteboard",{sessionId:u.id}))};return h.jsxs(Mc,{className:"group-data-[collapsible=icon]:hidden",children:[h.jsx(Nc,{children:h.jsx("div",{className:"text-sm",children:r("sessions")})}),h.jsxs(Ci,{children:[h.jsx(eo,{children:h.jsx(cW,{onClick:s,className:"w-full"})}),e.map(u=>h.jsx(eo,{className:"cursor-pointer",children:h.jsx(to,{asChild:!0,onClick:()=>l(u),children:h.jsxs("div",{className:"flex flex-row justify-between items-center",children:[h.jsxs("div",{className:"flex gap-2",children:[(t==null?void 0:t.id)===u.id?h.jsx(de,{size:16,color:"green",name:"check"}):h.jsx(de,{size:16,name:"chevron-right"}),h.jsx("span",{children:u.name})]}),h.jsx(de,{onClick:d=>c(d,u.id),size:16,name:"trash-2",className:"!z-50"})]})})},u.id)),e!=null&&e.length?h.jsx(eo,{children:h.jsxs(to,{className:"text-sidebar-foreground/70",children:[h.jsx(de,{name:"ellipsis",className:"text-sidebar-foreground/70"}),h.jsx("span",{children:r("more_session")})]})}):null]})]})}var EW=g.createContext(void 0);Do=function(e){const t=g.useContext(EW);return e||t||"ltr"};function SW(e,t=[]){let n=[];function r(a,i){const s=g.createContext(i),c=n.length;n=[...n,i];function l(d){const{scope:f,children:p,...y}=d,m=(f==null?void 0:f[e][c])||s,v=g.useMemo(()=>y,Object.values(y));return h.jsx(m.Provider,{value:v,children:p})}function u(d,f){const p=(f==null?void 0:f[e][c])||s,y=g.useContext(p);if(y)return y;if(i!==void 0)return i;throw new Error(`\`${d}\` must be used within \`${a}\``)}return l.displayName=a+"Provider",[l,u]}const o=()=>{const a=n.map(i=>g.createContext(i));return function(i){const s=(i==null?void 0:i[e])||a;return g.useMemo(()=>({[`__scope${e}`]:{...i,[e]:s}}),[i,s])}};return o.scopeName=e,[r,CW(o,...t)]}function CW(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(o){const a=r.reduce((i,{useScope:s,scopeName:c})=>{const l=s(o)[`__scope${c}`];return{...i,...l}},{});return g.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return n.scopeName=t.scopeName,n}let Md,wM,Pc,Nd,ag,_M,jM,EM,SM,ig;Md="rovingFocusGroup.onEntryFocus",wM={bubbles:!1,cancelable:!0},Pc="RovingFocusGroup",[Nd,ag,_M]=Ru(Pc),[jM,qr]=SW(Pc,[_M]),[EM,SM]=jM(Pc),ig=g.forwardRef((e,t)=>h.jsx(Nd.Provider,{scope:e.__scopeRovingFocusGroup,children:h.jsx(Nd.Slot,{scope:e.__scopeRovingFocusGroup,children:h.jsx(OW,{...e,ref:t})})})),ig.displayName=Pc;var OW=g.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:o=!1,dir:a,currentTabStopId:i,defaultCurrentTabStopId:s,onCurrentTabStopIdChange:c,onEntryFocus:l,preventScrollOnEntryFocus:u=!1,...d}=e,f=g.useRef(null),p=nt(t,f),y=Do(a),[m=null,v]=Zt({prop:i,defaultProp:s,onChange:c}),[b,x]=g.useState(!1),_=Io(l),w=ag(n),j=g.useRef(!1),[E,S]=g.useState(0);return g.useEffect(()=>{const O=f.current;if(O)return O.addEventListener(Md,_),()=>O.removeEventListener(Md,_)},[_]),h.jsx(EM,{scope:n,orientation:r,dir:y,loop:o,currentTabStopId:m,onItemFocus:g.useCallback(O=>v(O),[v]),onItemShiftTab:g.useCallback(()=>x(!0),[]),onFocusableItemAdd:g.useCallback(()=>S(O=>O+1),[]),onFocusableItemRemove:g.useCallback(()=>S(O=>O-1),[]),children:h.jsx(Oe.div,{tabIndex:b||E===0?-1:0,"data-orientation":r,...d,ref:p,style:{outline:"none",...e.style},onMouseDown:he(e.onMouseDown,()=>{j.current=!0}),onFocus:he(e.onFocus,O=>{const P=!j.current;if(O.target===O.currentTarget&&P&&!b){const M=new CustomEvent(Md,wM);if(O.currentTarget.dispatchEvent(M),!M.defaultPrevented){const k=w().filter(N=>N.focusable),R=k.find(N=>N.active),A=k.find(N=>N.id===m),C=[R,A,...k].filter(Boolean).map(N=>N.ref.current);MM(C,u)}}j.current=!1}),onBlur:he(e.onBlur,()=>x(!1))})})}),CM="RovingFocusGroupItem",OM=g.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:o=!1,tabStopId:a,...i}=e,s=mt(),c=a||s,l=SM(CM,n),u=l.currentTabStopId===c,d=ag(n),{onFocusableItemAdd:f,onFocusableItemRemove:p}=l;return g.useEffect(()=>{if(r)return f(),()=>p()},[r,f,p]),h.jsx(Nd.ItemSlot,{scope:n,id:c,focusable:r,active:o,children:h.jsx(Oe.span,{tabIndex:u?0:-1,"data-orientation":l.orientation,...i,ref:t,onMouseDown:he(e.onMouseDown,y=>{r?l.onItemFocus(c):y.preventDefault()}),onFocus:he(e.onFocus,()=>l.onItemFocus(c)),onKeyDown:he(e.onKeyDown,y=>{if(y.key==="Tab"&&y.shiftKey){l.onItemShiftTab();return}if(y.target!==y.currentTarget)return;const m=kW(y,l.orientation,l.dir);if(m!==void 0){if(y.metaKey||y.ctrlKey||y.altKey||y.shiftKey)return;y.preventDefault();let v=d().filter(b=>b.focusable).map(b=>b.ref.current);if(m==="last")v.reverse();else if(m==="prev"||m==="next"){m==="prev"&&v.reverse();const b=v.indexOf(y.currentTarget);v=l.loop?PW(v,b+1):v.slice(b+1)}setTimeout(()=>MM(v))}})})})});OM.displayName=CM;var MW={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function NW(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function kW(e,t,n){const r=NW(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return MW[r]}function MM(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function PW(e,t){return e.map((n,r)=>e[(t+r)%e.length])}let kd,NM,sg,kM,PM,AM,Pi,Ai,TM,RM,Ho,Ti,cg,lg,ro,IM,Ri,ug;Zs=ig,ec=OM,kd=["Enter"," "],NM=["ArrowDown","PageUp","Home"],sg=["ArrowUp","PageDown","End"],kM=[...NM,...sg],PM={ltr:[...kd,"ArrowRight"],rtl:[...kd,"ArrowLeft"]},AM={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Pi="Menu",[Ai,TM,RM]=Ru(Pi),[Ho,zu]=Vn(Pi,[RM,Uo,qr]),Ti=Uo(),cg=qr(),[lg,ro]=Ho(Pi),[IM,Ri]=Ho(Pi),ug=e=>{const{__scopeMenu:t,open:n=!1,children:r,dir:o,onOpenChange:a,modal:i=!0}=e,s=Ti(t),[c,l]=g.useState(null),u=g.useRef(!1),d=Io(a),f=Do(o);return g.useEffect(()=>{const p=()=>{u.current=!0,document.addEventListener("pointerdown",y,{capture:!0,once:!0}),document.addEventListener("pointermove",y,{capture:!0,once:!0})},y=()=>u.current=!1;return document.addEventListener("keydown",p,{capture:!0}),()=>{document.removeEventListener("keydown",p,{capture:!0}),document.removeEventListener("pointerdown",y,{capture:!0}),document.removeEventListener("pointermove",y,{capture:!0})}},[]),h.jsx(Ec,{...s,children:h.jsx(lg,{scope:t,open:n,onOpenChange:d,content:c,onContentChange:l,children:h.jsx(IM,{scope:t,onClose:g.useCallback(()=>d(!1),[d]),isUsingKeyboardRef:u,dir:f,modal:i,children:r})})})},ug.displayName=Pi;var AW="MenuAnchor",dg=g.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,o=Ti(n);return h.jsx(Sc,{...o,...r,ref:t})});dg.displayName=AW;var fg="MenuPortal",[TW,DM]=Ho(fg,{forceMount:void 0}),LM=e=>{const{__scopeMenu:t,forceMount:n,children:r,container:o}=e,a=ro(fg,t);return h.jsx(TW,{scope:t,forceMount:n,children:h.jsx(Mn,{present:n||a.open,children:h.jsx(Pu,{asChild:!0,container:o,children:r})})})};LM.displayName=fg;var Wn="MenuContent",[RW,pg]=Ho(Wn),FM=g.forwardRef((e,t)=>{const n=DM(Wn,e.__scopeMenu),{forceMount:r=n.forceMount,...o}=e,a=ro(Wn,e.__scopeMenu),i=Ri(Wn,e.__scopeMenu);return h.jsx(Ai.Provider,{scope:e.__scopeMenu,children:h.jsx(Mn,{present:r||a.open,children:h.jsx(Ai.Slot,{scope:e.__scopeMenu,children:i.modal?h.jsx(IW,{...o,ref:t}):h.jsx(DW,{...o,ref:t})})})})}),IW=g.forwardRef((e,t)=>{const n=ro(Wn,e.__scopeMenu),r=g.useRef(null),o=nt(t,r);return g.useEffect(()=>{const a=r.current;if(a)return fd(a)},[]),h.jsx(hg,{...e,ref:o,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:he(e.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),DW=g.forwardRef((e,t)=>{const n=ro(Wn,e.__scopeMenu);return h.jsx(hg,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),hg=g.forwardRef((e,t)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:o,onOpenAutoFocus:a,onCloseAutoFocus:i,disableOutsidePointerEvents:s,onEntryFocus:c,onEscapeKeyDown:l,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:f,onDismiss:p,disableOutsideScroll:y,...m}=e,v=ro(Wn,n),b=Ri(Wn,n),x=Ti(n),_=cg(n),w=TM(n),[j,E]=g.useState(null),S=g.useRef(null),O=nt(t,S,v.onContentChange),P=g.useRef(0),M=g.useRef(""),k=g.useRef(0),R=g.useRef(null),A=g.useRef("right"),C=g.useRef(0),N=y?xc:g.Fragment,T=y?{as:Wr,allowPinchZoom:!0}:void 0,I=D=>{var Z,q;const B=M.current+D,H=w().filter(W=>!W.disabled),F=document.activeElement,z=(Z=H.find(W=>W.ref.current===F))==null?void 0:Z.textValue,G=H.map(W=>W.textValue),Q=KW(G,B,z),oe=(q=H.find(W=>W.textValue===Q))==null?void 0:q.ref.current;(function W(J){M.current=J,window.clearTimeout(P.current),J!==""&&(P.current=window.setTimeout(()=>W(""),1e3))})(B),oe&&setTimeout(()=>oe.focus())};g.useEffect(()=>()=>window.clearTimeout(P.current),[]),od();const L=g.useCallback(D=>{var B,H;return A.current===((B=R.current)==null?void 0:B.side)&&QW(D,(H=R.current)==null?void 0:H.area)},[]);return h.jsx(RW,{scope:n,searchRef:M,onItemEnter:g.useCallback(D=>{L(D)&&D.preventDefault()},[L]),onItemLeave:g.useCallback(D=>{var B;L(D)||((B=S.current)==null||B.focus(),E(null))},[L]),onTriggerLeave:g.useCallback(D=>{L(D)&&D.preventDefault()},[L]),pointerGraceTimerRef:k,onPointerGraceIntentChange:g.useCallback(D=>{R.current=D},[]),children:h.jsx(N,{...T,children:h.jsx(bc,{asChild:!0,trapped:o,onMountAutoFocus:he(a,D=>{var B;D.preventDefault(),(B=S.current)==null||B.focus({preventScroll:!0})}),onUnmountAutoFocus:i,children:h.jsx(ku,{asChild:!0,disableOutsidePointerEvents:s,onEscapeKeyDown:l,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:f,onDismiss:p,children:h.jsx(Zs,{asChild:!0,..._,dir:b.dir,orientation:"vertical",loop:r,currentTabStopId:j,onCurrentTabStopIdChange:E,onEntryFocus:he(c,D=>{b.isUsingKeyboardRef.current||D.preventDefault()}),preventScrollOnEntryFocus:!0,children:h.jsx(_d,{role:"menu","aria-orientation":"vertical","data-state":nN(v.open),"data-radix-menu-content":"",dir:b.dir,...x,...m,ref:O,style:{outline:"none",...m.style},onKeyDown:he(m.onKeyDown,D=>{const B=D.target.closest("[data-radix-menu-content]")===D.currentTarget,H=D.ctrlKey||D.altKey||D.metaKey,F=D.key.length===1;B&&(D.key==="Tab"&&D.preventDefault(),!H&&F&&I(D.key));const z=S.current;if(D.target!==z||!kM.includes(D.key))return;D.preventDefault();const G=w().filter(Q=>!Q.disabled).map(Q=>Q.ref.current);sg.includes(D.key)&&G.reverse(),qW(G)}),onBlur:he(e.onBlur,D=>{D.currentTarget.contains(D.target)||(window.clearTimeout(P.current),M.current="")}),onPointerMove:he(e.onPointerMove,Tc(D=>{const B=D.target,H=C.current!==D.clientX;if(D.currentTarget.contains(B)&&H){const F=D.clientX>C.current?"right":"left";A.current=F,C.current=D.clientX}}))})})})})})})});FM.displayName=Wn;var LW="MenuGroup",mg=g.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return h.jsx(Oe.div,{role:"group",...r,ref:t})});mg.displayName=LW;var FW="MenuLabel",BM=g.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return h.jsx(Oe.div,{...r,ref:t})});BM.displayName=FW;var Pd="MenuItem",$M="menu.itemSelect",Ad=g.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:r,...o}=e,a=g.useRef(null),i=Ri(Pd,e.__scopeMenu),s=pg(Pd,e.__scopeMenu),c=nt(t,a),l=g.useRef(!1),u=()=>{const d=a.current;if(!n&&d){const f=new CustomEvent($M,{bubbles:!0,cancelable:!0});d.addEventListener($M,p=>r==null?void 0:r(p),{once:!0}),awe(d,f),f.defaultPrevented?l.current=!1:i.onClose()}};return h.jsx(zM,{...o,ref:c,disabled:n,onClick:he(e.onClick,u),onPointerDown:d=>{var f;(f=e.onPointerDown)==null||f.call(e,d),l.current=!0},onPointerUp:he(e.onPointerUp,d=>{var f;l.current||((f=d.currentTarget)==null||f.click())}),onKeyDown:he(e.onKeyDown,d=>{const f=s.searchRef.current!=="";n||f&&d.key===" "||kd.includes(d.key)&&(d.currentTarget.click(),d.preventDefault())})})});Ad.displayName=Pd;var zM=g.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:r=!1,textValue:o,...a}=e,i=pg(Pd,n),s=cg(n),c=g.useRef(null),l=nt(t,c),[u,d]=g.useState(!1),[f,p]=g.useState("");return g.useEffect(()=>{const y=c.current;y&&p((y.textContent??"").trim())},[a.children]),h.jsx(Ai.ItemSlot,{scope:n,disabled:r,textValue:o??f,children:h.jsx(ec,{asChild:!0,...s,focusable:!r,children:h.jsx(Oe.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...a,ref:l,onPointerMove:he(e.onPointerMove,Tc(y=>{r?i.onItemLeave(y):(i.onItemEnter(y),y.defaultPrevented||y.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:he(e.onPointerLeave,Tc(y=>i.onItemLeave(y))),onFocus:he(e.onFocus,()=>d(!0)),onBlur:he(e.onBlur,()=>d(!1))})})})}),BW="MenuCheckboxItem",VM=g.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:r,...o}=e;return h.jsx(YM,{scope:e.__scopeMenu,checked:n,children:h.jsx(Ad,{role:"menuitemcheckbox","aria-checked":Td(n)?"mixed":n,...o,ref:t,"data-state":vg(n),onSelect:he(o.onSelect,()=>r==null?void 0:r(Td(n)?!0:!n),{checkForDefaultPrevented:!1})})})});VM.displayName=BW;var UM="MenuRadioGroup",[$W,zW]=Ho(UM,{value:void 0,onValueChange:()=>{}}),HM=g.forwardRef((e,t)=>{const{value:n,onValueChange:r,...o}=e,a=Io(r);return h.jsx($W,{scope:e.__scopeMenu,value:n,onValueChange:a,children:h.jsx(mg,{...o,ref:t})})});HM.displayName=UM;var WM="MenuRadioItem",qM=g.forwardRef((e,t)=>{const{value:n,...r}=e,o=zW(WM,e.__scopeMenu),a=n===o.value;return h.jsx(YM,{scope:e.__scopeMenu,checked:a,children:h.jsx(Ad,{role:"menuitemradio","aria-checked":a,...r,ref:t,"data-state":vg(a),onSelect:he(r.onSelect,()=>{var i;return(i=o.onValueChange)==null?void 0:i.call(o,n)},{checkForDefaultPrevented:!1})})})});qM.displayName=WM;var yg="MenuItemIndicator",[YM,VW]=Ho(yg,{checked:!1}),KM=g.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:r,...o}=e,a=VW(yg,n);return h.jsx(Mn,{present:r||Td(a.checked)||a.checked===!0,children:h.jsx(Oe.span,{...o,ref:t,"data-state":vg(a.checked)})})});KM.displayName=yg;var UW="MenuSeparator",XM=g.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return h.jsx(Oe.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});XM.displayName=UW;var HW="MenuArrow",QM=g.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,o=Ti(n);return h.jsx(jd,{...o,...r,ref:t})});QM.displayName=HW;var gg="MenuSub",[WW,JM]=Ho(gg),GM=e=>{const{__scopeMenu:t,children:n,open:r=!1,onOpenChange:o}=e,a=ro(gg,t),i=Ti(t),[s,c]=g.useState(null),[l,u]=g.useState(null),d=Io(o);return g.useEffect(()=>(a.open===!1&&d(!1),()=>d(!1)),[a.open,d]),h.jsx(Ec,{...i,children:h.jsx(lg,{scope:t,open:r,onOpenChange:d,content:l,onContentChange:u,children:h.jsx(WW,{scope:t,contentId:mt(),triggerId:mt(),trigger:s,onTriggerChange:c,children:n})})})};GM.displayName=gg;var Ac="MenuSubTrigger",ZM=g.forwardRef((e,t)=>{const n=ro(Ac,e.__scopeMenu),r=Ri(Ac,e.__scopeMenu),o=JM(Ac,e.__scopeMenu),a=pg(Ac,e.__scopeMenu),i=g.useRef(null),{pointerGraceTimerRef:s,onPointerGraceIntentChange:c}=a,l={__scopeMenu:e.__scopeMenu},u=g.useCallback(()=>{i.current&&window.clearTimeout(i.current),i.current=null},[]);return g.useEffect(()=>u,[u]),g.useEffect(()=>{const d=s.current;return()=>{window.clearTimeout(d),c(null)}},[s,c]),h.jsx(dg,{asChild:!0,...l,children:h.jsx(zM,{id:o.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":o.contentId,"data-state":nN(n.open),...e,ref:F9(t,o.onTriggerChange),onClick:d=>{var f;(f=e.onClick)==null||f.call(e,d),!(e.disabled||d.defaultPrevented)&&(d.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:he(e.onPointerMove,Tc(d=>{a.onItemEnter(d),!d.defaultPrevented&&!e.disabled&&!n.open&&!i.current&&(a.onPointerGraceIntentChange(null),i.current=window.setTimeout(()=>{n.onOpenChange(!0),u()},100))})),onPointerLeave:he(e.onPointerLeave,Tc(d=>{var p,y;u();const f=(p=n.content)==null?void 0:p.getBoundingClientRect();if(f){const m=(y=n.content)==null?void 0:y.dataset.side,v=m==="right",b=v?-5:5,x=f[v?"left":"right"],_=f[v?"right":"left"];a.onPointerGraceIntentChange({area:[{x:d.clientX+b,y:d.clientY},{x,y:f.top},{x:_,y:f.top},{x:_,y:f.bottom},{x,y:f.bottom}],side:m}),window.clearTimeout(s.current),s.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(d),d.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:he(e.onKeyDown,d=>{var p;const f=a.searchRef.current!=="";e.disabled||f&&d.key===" "||PM[r.dir].includes(d.key)&&(n.onOpenChange(!0),(p=n.content)==null||p.focus(),d.preventDefault())})})})});ZM.displayName=Ac;var eN="MenuSubContent",tN=g.forwardRef((e,t)=>{const n=DM(Wn,e.__scopeMenu),{forceMount:r=n.forceMount,...o}=e,a=ro(Wn,e.__scopeMenu),i=Ri(Wn,e.__scopeMenu),s=JM(eN,e.__scopeMenu),c=g.useRef(null),l=nt(t,c);return h.jsx(Ai.Provider,{scope:e.__scopeMenu,children:h.jsx(Mn,{present:r||a.open,children:h.jsx(Ai.Slot,{scope:e.__scopeMenu,children:h.jsx(hg,{id:s.contentId,"aria-labelledby":s.triggerId,...o,ref:l,align:"start",side:i.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{var d;i.isUsingKeyboardRef.current&&((d=c.current)==null||d.focus()),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:he(e.onFocusOutside,u=>{u.target!==s.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:he(e.onEscapeKeyDown,u=>{i.onClose(),u.preventDefault()}),onKeyDown:he(e.onKeyDown,u=>{var p;const d=u.currentTarget.contains(u.target),f=AM[i.dir].includes(u.key);d&&f&&(a.onOpenChange(!1),(p=s.trigger)==null||p.focus(),u.preventDefault())})})})})})});tN.displayName=eN;function nN(e){return e?"open":"closed"}function Td(e){return e==="indeterminate"}function vg(e){return Td(e)?"indeterminate":e?"checked":"unchecked"}function qW(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function YW(e,t){return e.map((n,r)=>e[(t+r)%e.length])}function KW(e,t,n){const r=t.length>1&&Array.from(t).every(s=>s===t[0])?t[0]:t,o=n?e.indexOf(n):-1;let a=YW(e,Math.max(o,0));r.length===1&&(a=a.filter(s=>s!==n));const i=a.find(s=>s.toLowerCase().startsWith(r.toLowerCase()));return i!==n?i:void 0}function XW(e,t){const{x:n,y:r}=e;let o=!1;for(let a=0,i=t.length-1;a<t.length;i=a++){const s=t[a].x,c=t[a].y,l=t[i].x,u=t[i].y;c>r!=u>r&&n<(l-s)*(r-c)/(u-c)+s&&(o=!o)}return o}function QW(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return XW(n,t)}function Tc(e){return t=>t.pointerType==="mouse"?e(t):void 0}let Rd,rN,JW,Kt,oN,bg,xg;um=ug,Qh=dg,lm=LM,Jh=FM,Gh=mg,Zh=BM,em=Ad,tm=VM,nm=HM,rm=qM,om=KM,am=XM,im=QM,qE=GM,sm=ZM,cm=tN,Rd="DropdownMenu",[rN,JW]=Vn(Rd,[zu]),Kt=zu(),[oN,bg]=rN(Rd),xg=e=>{const{__scopeDropdownMenu:t,children:n,dir:r,open:o,defaultOpen:a,onOpenChange:i,modal:s=!0}=e,c=Kt(t),l=g.useRef(null),[u=!1,d]=Zt({prop:o,defaultProp:a,onChange:i});return h.jsx(oN,{scope:t,triggerId:mt(),triggerRef:l,contentId:mt(),open:u,onOpenChange:d,onOpenToggle:g.useCallback(()=>d(f=>!f),[d]),modal:s,children:h.jsx(um,{...c,open:u,onOpenChange:d,dir:r,modal:s,children:n})})},xg.displayName=Rd;var aN="DropdownMenuTrigger",iN=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...o}=e,a=bg(aN,n),i=Kt(n);return h.jsx(Qh,{asChild:!0,...i,children:h.jsx(Oe.button,{type:"button",id:a.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...o,ref:F9(t,a.triggerRef),onPointerDown:he(e.onPointerDown,s=>{!r&&s.button===0&&s.ctrlKey===!1&&(a.onOpenToggle(),a.open||s.preventDefault())}),onKeyDown:he(e.onKeyDown,s=>{r||(["Enter"," "].includes(s.key)&&a.onOpenToggle(),s.key==="ArrowDown"&&a.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(s.key)&&s.preventDefault())})})})});iN.displayName=aN;var GW="DropdownMenuPortal",sN=e=>{const{__scopeDropdownMenu:t,...n}=e,r=Kt(t);return h.jsx(lm,{...r,...n})};sN.displayName=GW;var cN="DropdownMenuContent",lN=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=bg(cN,n),a=Kt(n),i=g.useRef(!1);return h.jsx(Jh,{id:o.contentId,"aria-labelledby":o.triggerId,...a,...r,ref:t,onCloseAutoFocus:he(e.onCloseAutoFocus,s=>{var c;i.current||((c=o.triggerRef.current)==null||c.focus()),i.current=!1,s.preventDefault()}),onInteractOutside:he(e.onInteractOutside,s=>{const c=s.detail.originalEvent,l=c.button===0&&c.ctrlKey===!0,u=c.button===2||l;(!o.modal||u)&&(i.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});lN.displayName=cN;var ZW="DropdownMenuGroup",uN=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=Kt(n);return h.jsx(Gh,{...o,...r,ref:t})});uN.displayName=ZW;var eq="DropdownMenuLabel",dN=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=Kt(n);return h.jsx(Zh,{...o,...r,ref:t})});dN.displayName=eq;var tq="DropdownMenuItem",fN=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=Kt(n);return h.jsx(em,{...o,...r,ref:t})});fN.displayName=tq;var nq="DropdownMenuCheckboxItem",pN=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=Kt(n);return h.jsx(tm,{...o,...r,ref:t})});pN.displayName=nq;var rq="DropdownMenuRadioGroup",hN=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=Kt(n);return h.jsx(nm,{...o,...r,ref:t})});hN.displayName=rq;var oq="DropdownMenuRadioItem",mN=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=Kt(n);return h.jsx(rm,{...o,...r,ref:t})});mN.displayName=oq;var aq="DropdownMenuItemIndicator",yN=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=Kt(n);return h.jsx(om,{...o,...r,ref:t})});yN.displayName=aq;var iq="DropdownMenuSeparator",gN=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=Kt(n);return h.jsx(am,{...o,...r,ref:t})});gN.displayName=iq;var sq="DropdownMenuArrow",cq=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=Kt(n);return h.jsx(im,{...o,...r,ref:t})});cq.displayName=sq;var lq=e=>{const{__scopeDropdownMenu:t,children:n,open:r,onOpenChange:o,defaultOpen:a}=e,i=Kt(t),[s=!1,c]=Zt({prop:r,defaultProp:a,onChange:o});return h.jsx(qE,{...i,open:s,onOpenChange:c,children:n})},uq="DropdownMenuSubTrigger",vN=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=Kt(n);return h.jsx(sm,{...o,...r,ref:t})});vN.displayName=uq;var dq="DropdownMenuSubContent",bN=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=Kt(n);return h.jsx(cm,{...o,...r,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});bN.displayName=dq,QE=xg,JE=iN,XE=sN,pm=lN,KE=uN,xm=dN,ym=fN,gm=pN,X9=hN,bm=mN,vm=yN,wm=gN,Q9=lq,hm=vN,mm=bN;const fq=QE,pq=JE,hq=KE,mq=g.forwardRef(({className:e,inset:t,children:n,...r},o)=>h.jsxs(hm,{ref:o,className:K("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t&&"pl-8",e),...r,children:[n,h.jsx(de,{name:"chevron-right",className:"ml-auto"})]}));mq.displayName=hm.displayName;const yq=g.forwardRef(({className:e,...t},n)=>h.jsx(mm,{ref:n,className:K("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));yq.displayName=mm.displayName;const xN=g.forwardRef(({className:e,sideOffset:t=4,...n},r)=>h.jsx(XE,{children:h.jsx(pm,{ref:r,sideOffset:t,className:K("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));xN.displayName=pm.displayName;const wN=g.forwardRef(({className:e,inset:t,...n},r)=>h.jsx(ym,{ref:r,className:K("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t&&"pl-8",e),...n}));wN.displayName=ym.displayName;const gq=g.forwardRef(({className:e,children:t,checked:n,...r},o)=>h.jsxs(gm,{ref:o,className:K("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:n,...r,children:[h.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:h.jsx(vm,{children:h.jsx(de,{name:"check",className:"h-4 w-4"})})}),t]}));gq.displayName=gm.displayName;const vq=g.forwardRef(({className:e,children:t,...n},r)=>h.jsxs(bm,{ref:r,className:K("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[h.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:h.jsx(vm,{children:h.jsx(de,{name:"circle",className:"h-4 w-4"})})}),t]}));vq.displayName=bm.displayName;const bq=g.forwardRef(({className:e,inset:t,...n},r)=>h.jsx(xm,{ref:r,className:K("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...n}));bq.displayName=xm.displayName;const xq=g.forwardRef(({className:e,...t},n)=>h.jsx(wm,{ref:n,className:K("-mx-1 my-1 h-px bg-muted",e),...t}));xq.displayName=wm.displayName;function wq(){const{t:e}=ke("sidebar"),{isMobile:t}=Oc();return h.jsx(Ci,{children:h.jsx(eo,{children:h.jsxs(fq,{children:[h.jsx(pq,{asChild:!0,children:h.jsxs(to,{size:"lg",className:"data-[state=open]:bg-sidebar-accent data-[state=open]:text-sidebar-accent-foreground",children:[h.jsx("div",{children:h.jsx(de,{name:"settings",size:28,className:"pr-2"})}),h.jsx(de,{name:"chevrons-up-down",className:"ml-auto size-4"})]})}),h.jsx(xN,{className:"w-[--radix-dropdown-menu-trigger-width] min-w-56 rounded-lg",side:t?"bottom":"right",align:"end",sideOffset:4,children:h.jsx(hq,{children:h.jsxs(wN,{children:[h.jsx(de,{name:"sparkles"}),e("contact")]})})})]})})})}const _q=Hr("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function en({className:e,variant:t,...n}){return h.jsx("div",{className:K(_q({variant:t}),e),...n})}function jq({applications:e,currentSession:t,setCurrentSession:n}){const{t:r}=ke("sidebar"),o=pc(),a=sn(xM),i=g.useCallback((l,u)=>{l.preventDefault(),l.stopPropagation(),a.show({id:u})},[a]),s=l=>{n(l),o(In("application",{applicationId:l.id}))},c=l=>{switch(l.main_source_type){case"Thread":return h.jsx(en,{className:"ml-1",color:"blue",children:r("application_types.chat")});default:return null}};return h.jsxs(Mc,{className:"group-data-[collapsible=icon]:hidden pt-0",children:[h.jsx(Nc,{children:h.jsx("div",{className:"text-sm",children:r("applications")})}),h.jsxs(Ci,{children:[e==null?void 0:e.map(l=>h.jsx(eo,{className:"cursor-pointer",children:h.jsx(to,{asChild:!0,onClick:()=>s(l),children:h.jsxs("div",{className:"flex flex-row justify-between items-center !h-auto",children:[h.jsxs("div",{className:"flex gap-2",children:[(t==null?void 0:t.id)===l.id?h.jsx(de,{size:16,color:"green",name:"check"}):h.jsx(de,{size:16,name:"chevron-right"}),h.jsxs("span",{children:[l.name,c(l)]})]}),h.jsx(de,{onClick:u=>i(u,l.id),size:16,className:"!z-50",name:"trash-2"})]})})},l.id)),e?h.jsx(eo,{children:h.jsxs(to,{className:"text-sidebar-foreground/70",children:[h.jsx(de,{name:"ellipsis",className:"text-sidebar-foreground/70"}),h.jsx("span",{children:r("more_session")})]})}):null]})]})}const Eq={navMain:[{title:"playground.title",icon:h.jsx(de,{name:"square-terminal"}),isActive:!0,items:[{title:"playground.drag_and_drop"},{title:"playground.node_connections"},{title:"playground.delete_nodes"}]},{title:"model.title",url:"#",icon:h.jsx(de,{name:"bot"}),items:[{title:"model.llm"},{title:"model.embedding"}]},{title:"tutorial.title",icon:h.jsx(de,{name:"book-open"}),items:[{title:"tutorial.get_started"},{title:"tutorial.chat_with_llm"},{title:"tutorial.ai_structured_output"},{title:"tutorial.tool_calling"},{title:"tutorial.few_shot_example"},{title:"tutorial.vector_database"}]},{title:"application.title",icon:h.jsx(de,{name:"settings-2"}),items:[{title:"application.changelog"}]}]};function Sq({sessions:e,applications:t,currentSession:n,setCurrentSession:r,...o}){return h.jsxs(qy,{collapsible:"icon",...o,children:[h.jsx("div",{className:"h-1"}),h.jsxs(Ky,{children:[h.jsx(jW,{sessions:e||[],currentSession:n,setCurrentSession:r}),h.jsx(jq,{applications:t||[],currentSession:n,setCurrentSession:r}),h.jsx(rW,{items:Eq.navMain})]}),h.jsx(JO,{children:h.jsx(wq,{})}),h.jsx(QO,{})]})}function Cq(){const{t:e}=ke("common"),t=d7(),n=pc(),r=Qr(),o=g.useRef(r),a=Tu(p=>p.setTheme),i=Tu(p=>p.theme),s=ot(p=>p.currentSession),c=ot(p=>p.sessions),l=ot(p=>p.applications),u=ot(p=>p.setCurrentSession);o.current=r,g.useEffect(()=>{s!=null&&s.id&&(r.pathname.includes(In("whiteboard"))?t.sessionId?t.sessionId&&t.sessionId!==(s==null?void 0:s.id)&&u(t.sessionId):n(In("whiteboard",{sessionId:s==null?void 0:s.id})):r.pathname.includes(In("application"))&&(t.applicationId?t.applicationId&&t.applicationId!==(s==null?void 0:s.id)&&u(t.applicationId):n(In("application",{applicationId:s==null?void 0:s.id}))))},[s==null?void 0:s.id,r.pathname,n,t.applicationId,t.sessionId,u]),g.useEffect(()=>{u(t.sessionId||t.applicationId).then(p=>{aW().has("flow")&&p.type===Fh.StandaloneApp||(p.type===Fh.StandaloneApp&&o.current.pathname.includes(In("whiteboard").replace("/",""))?n(In("application",{applicationId:p.id})):p.type===Fh.Whiteboard&&o.current.pathname.includes(In("application").replace("/",""))&&n(In("whiteboard",{sessionId:p.id})))})},[n,t.applicationId,t.sessionId,u]);const d=g.useCallback(()=>{a(i==="dark"?"light":"dark")},[i,a]),f=g.useMemo(()=>{if(r.pathname.includes(In("whiteboard")))return e("whiteboard");if(r.pathname.includes(In("application")))return e("apllication")},[r.pathname,e]);return h.jsxs(Wy,{defaultOpen:!1,children:[h.jsx(Sq,{sessions:c,applications:l,currentSession:s,setCurrentSession:u}),h.jsxs(Yy,{className:"max-h-screen overflow-hidden",children:[h.jsxs("header",{className:"flex h-14 shrink-0 items-center gap-2 transition-[width,height] ease-linear justify-between",children:[h.jsxs("div",{className:"flex items-center gap-2 px-4",children:[h.jsx(XO,{}),h.jsx(Qe,{children:f})]}),h.jsxs("div",{className:"flex items-center gap-2 px-4",children:[h.jsx(ft,{onClick:d,variant:"link",children:h.jsx(de,{size:18,name:i==="dark"?"moon":"sun"})}),h.jsx("a",{referrerPolicy:"no-referrer",target:"_blank",href:"https://github.com/zrg-team/NoLLMChat",children:h.jsx(de,{size:18,name:"github"})})]})]}),h.jsx(vc,{className:"shrink-0"}),h.jsx("div",{className:"flex flex-1 flex-col p-0 m-0 overflow-y-auto",children:h.jsx(M7,{})})]})]})}var wg="Avatar",[Oq,Lwe]=Vn(wg),[Mq,_N]=Oq(wg),jN=g.forwardRef((e,t)=>{const{__scopeAvatar:n,...r}=e,[o,a]=g.useState("idle");return h.jsx(Mq,{scope:n,imageLoadingStatus:o,onImageLoadingStatusChange:a,children:h.jsx(Oe.span,{...r,ref:t})})});jN.displayName=wg;var EN="AvatarImage",SN=g.forwardRef((e,t)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:o=()=>{},...a}=e,i=_N(EN,n),s=Nq(r,a.referrerPolicy),c=Io(l=>{o(l),i.onImageLoadingStatusChange(l)});return xn(()=>{s!=="idle"&&c(s)},[s,c]),s==="loaded"?h.jsx(Oe.img,{...a,ref:t,src:r}):null});SN.displayName=EN;var CN="AvatarFallback",ON=g.forwardRef((e,t)=>{const{__scopeAvatar:n,delayMs:r,...o}=e,a=_N(CN,n),[i,s]=g.useState(r===void 0);return g.useEffect(()=>{if(r!==void 0){const c=window.setTimeout(()=>s(!0),r);return()=>window.clearTimeout(c)}},[r]),i&&a.imageLoadingStatus!=="loaded"?h.jsx(Oe.span,{...o,ref:t}):null});ON.displayName=CN;function Nq(e,t){const[n,r]=g.useState("idle");return xn(()=>{if(!e){r("error");return}let o=!0;const a=new window.Image,i=s=>()=>{o&&r(s)};return r("loading"),a.onload=i("loaded"),a.onerror=i("error"),a.src=e,t&&(a.referrerPolicy=t),()=>{o=!1}},[e,t]),n}var MN=jN,NN=SN,kN=ON;const PN=g.forwardRef(({className:e,...t},n)=>h.jsx(MN,{ref:n,className:K("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));PN.displayName=MN.displayName;const AN=g.forwardRef(({className:e,...t},n)=>h.jsx(NN,{ref:n,className:K("aspect-square h-full w-full",e),...t}));AN.displayName=NN.displayName;const TN=g.forwardRef(({className:e,...t},n)=>h.jsx(kN,{ref:n,className:K("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));TN.displayName=kN.displayName;function Id(){return h.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",className:"text-foreground",children:[h.jsx("circle",{cx:"4",cy:"12",r:"2",fill:"currentColor",children:h.jsx("animate",{id:"spinner_qFRN",begin:"0;spinner_OcgL.end+0.25s",attributeName:"cy",calcMode:"spline",dur:"0.6s",values:"12;6;12",keySplines:".33,.66,.66,1;.33,0,.66,.33"})}),h.jsx("circle",{cx:"12",cy:"12",r:"2",fill:"currentColor",children:h.jsx("animate",{begin:"spinner_qFRN.begin+0.1s",attributeName:"cy",calcMode:"spline",dur:"0.6s",values:"12;6;12",keySplines:".33,.66,.66,1;.33,0,.66,.33"})}),h.jsx("circle",{cx:"20",cy:"12",r:"2",fill:"currentColor",children:h.jsx("animate",{id:"spinner_OcgL",begin:"spinner_qFRN.begin+0.2s",attributeName:"cy",calcMode:"spline",dur:"0.6s",values:"12;6;12",keySplines:".33,.66,.66,1;.33,0,.66,.33"})})]})}const kq=Hr("flex gap-2 max-w-[60%] items-end relative group",{variants:{variant:{received:"self-start",sent:"self-end flex-row-reverse"},layout:{default:"",ai:"max-w-full w-full items-center"}},defaultVariants:{variant:"received",layout:"default"}}),RN=g.forwardRef(({className:e,variant:t,layout:n,children:r,...o},a)=>h.jsx("div",{className:K(kq({variant:t,layout:n,className:e}),"relative group"),ref:a,...o,children:g.Children.map(r,i=>g.isValidElement(i)&&typeof i.type!="string"?g.cloneElement(i,{variant:t,layout:n,className:o==null?void 0:o.innerclassname}):i)}));RN.displayName="ChatBubble";const Pq=({src:e,fallback:t,className:n})=>h.jsxs(PN,{className:n,children:[h.jsx(AN,{src:e,alt:"Avatar"}),h.jsx(TN,{children:t})]}),Aq=Hr("p-4",{variants:{variant:{received:"bg-secondary text-secondary-foreground rounded-r-lg rounded-tl-lg",sent:"bg-primary text-primary-foreground rounded-l-lg rounded-tr-lg"},layout:{default:"",ai:"border-t w-full rounded-none bg-transparent"}},defaultVariants:{variant:"received",layout:"default"}}),IN=g.forwardRef(({className:e,variant:t,layout:n,isLoading:r=!1,children:o,...a},i)=>h.jsx("div",{className:K(Aq({variant:t,layout:n,className:e}),"break-words max-w-full whitespace-pre-wrap"),ref:i,...a,children:r?h.jsx("div",{className:"flex items-center space-x-2",children:h.jsx(Id,{})}):o}));IN.displayName="ChatBubbleMessage";const Tq=({icon:e,onClick:t,className:n,variant:r="ghost",size:o="icon",...a})=>h.jsx(ft,{variant:r,size:o,className:n,onClick:t,...a,children:e}),Rq=g.forwardRef(({variant:e,className:t,children:n,...r},o)=>h.jsx("div",{ref:o,className:K("absolute top-1/2 -translate-y-1/2 flex opacity-0 group-hover:opacity-100 transition-opacity duration-200",e==="sent"?"-left-1 -translate-x-full flex-row-reverse":"-right-1 translate-x-full",t),...r,children:n}));Rq.displayName="ChatBubbleActionWrapper";const DN=g.forwardRef(({className:e,children:t,...n},r)=>h.jsx("div",{className:K("flex flex-col w-full h-full p-4 gap-6 overflow-y-auto",e),ref:r,...n,children:t}));DN.displayName="ChatMessageList";var LN="vercel.ai.error",Iq=Symbol.for(LN),FN,Dq=class ez extends Error{constructor({name:t,message:n,cause:r}){super(n),this[FN]=!0,this.name=t,this.cause=r}static isInstance(t){return ez.hasMarker(t,LN)}static hasMarker(t,n){const r=Symbol.for(n);return t!=null&&typeof t=="object"&&r in t&&typeof t[r]=="boolean"&&t[r]===!0}};FN=Iq;var Ii=Dq;function BN(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}var $N="AI_InvalidArgumentError",zN=`vercel.ai.error.${$N}`,Lq=Symbol.for(zN),VN,Fq=class extends Ii{constructor({message:e,cause:t,argument:n}){super({name:$N,message:e,cause:t}),this[VN]=!0,this.argument=n}static isInstance(e){return Ii.hasMarker(e,zN)}};VN=Lq;var UN="AI_JSONParseError",HN=`vercel.ai.error.${UN}`,Bq=Symbol.for(HN),WN,qN=class extends Ii{constructor({text:e,cause:t}){super({name:UN,message:`JSON parsing failed: Text: ${e}.
Error message: ${BN(t)}`,cause:t}),this[WN]=!0,this.text=e}static isInstance(e){return Ii.hasMarker(e,HN)}};WN=Bq;var YN="AI_TypeValidationError",KN=`vercel.ai.error.${YN}`,$q=Symbol.for(KN),XN,zq=class bS extends Ii{constructor({value:t,cause:n}){super({name:YN,message:`Type validation failed: Value: ${JSON.stringify(t)}.
Error message: ${BN(n)}`,cause:n}),this[XN]=!0,this.value=t}static isInstance(t){return Ii.hasMarker(t,KN)}static wrap({value:t,cause:n}){return bS.isInstance(n)&&n.value===t?n:new bS({value:t,cause:n})}};XN=$q;var QN=zq;let Vq=(e,t=21)=>(n=t)=>{let r="",o=n;for(;o--;)r+=e[Math.random()*e.length|0];return r};var _a={exports:{}},JN;function Uq(){if(JN)return _a.exports;JN=1;const e=typeof Bh<"u",t=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*:/,n=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/;function r(s,c,l){l==null&&c!==null&&typeof c=="object"&&(l=c,c=void 0),e&&Bh.isBuffer(s)&&(s=s.toString()),s&&s.charCodeAt(0)===65279&&(s=s.slice(1));const u=JSON.parse(s,c);if(u===null||typeof u!="object")return u;const d=l&&l.protoAction||"error",f=l&&l.constructorAction||"error";if(d==="ignore"&&f==="ignore")return u;if(d!=="ignore"&&f!=="ignore"){if(t.test(s)===!1&&n.test(s)===!1)return u}else if(d!=="ignore"&&f==="ignore"){if(t.test(s)===!1)return u}else if(n.test(s)===!1)return u;return o(u,{protoAction:d,constructorAction:f,safe:l&&l.safe})}function o(s,{protoAction:c="error",constructorAction:l="error",safe:u}={}){let d=[s];for(;d.length;){const f=d;d=[];for(const p of f){if(c!=="ignore"&&Object.prototype.hasOwnProperty.call(p,"__proto__")){if(u===!0)return null;if(c==="error")throw new SyntaxError("Object contains forbidden prototype property");delete p.__proto__}if(l!=="ignore"&&Object.prototype.hasOwnProperty.call(p,"constructor")&&Object.prototype.hasOwnProperty.call(p.constructor,"prototype")){if(u===!0)return null;if(l==="error")throw new SyntaxError("Object contains forbidden prototype property");delete p.constructor}for(const y in p){const m=p[y];m&&typeof m=="object"&&d.push(m)}}}return s}function a(s,c,l){const u=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return r(s,c,l)}finally{Error.stackTraceLimit=u}}function i(s,c){const l=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return r(s,c,{safe:!0})}catch{return null}finally{Error.stackTraceLimit=l}}return _a.exports=a,_a.exports.default=a,_a.exports.parse=a,_a.exports.safeParse=i,_a.exports.scan=o,_a.exports}var Hq=Uq();const Wq=Xe(Hq);var qq=({prefix:e,size:t=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{const o=Vq(n,t);if(e==null)return o;if(n.includes(r))throw new Fq({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return a=>`${e}${r}${o(a)}`},GN=qq(),_g=Symbol.for("vercel.ai.validator");function Yq(e){return{[_g]:!0,validate:e}}function Kq(e){return typeof e=="object"&&e!==null&&_g in e&&e[_g]===!0&&"validate"in e}function Xq(e){return Kq(e)?e:Qq(e)}function Qq(e){return Yq(t=>{const n=e.safeParse(t);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}})}function Jq({value:e,schema:t}){const n=Xq(t);try{if(n.validate==null)return{success:!0,value:e};const r=n.validate(e);return r.success?r:{success:!1,error:QN.wrap({value:e,cause:r.error})}}catch(r){return{success:!1,error:QN.wrap({value:e,cause:r})}}}function ZN({text:e,schema:t}){try{const n=Wq.parse(e);return t==null?{success:!0,value:n}:Jq({value:n,schema:t})}catch(n){return{success:!1,error:qN.isInstance(n)?n:new qN({text:e,cause:n})}}}var Dd={code:"0",name:"text",parse:e=>{if(typeof e!="string")throw new Error('"text" parts expect a string value.');return{type:"text",value:e}}},Ld={code:"3",name:"error",parse:e=>{if(typeof e!="string")throw new Error('"error" parts expect a string value.');return{type:"error",value:e}}},Fd={code:"4",name:"assistant_message",parse:e=>{if(e==null||typeof e!="object"||!("id"in e)||!("role"in e)||!("content"in e)||typeof e.id!="string"||typeof e.role!="string"||e.role!=="assistant"||!Array.isArray(e.content)||!e.content.every(t=>t!=null&&typeof t=="object"&&"type"in t&&t.type==="text"&&"text"in t&&t.text!=null&&typeof t.text=="object"&&"value"in t.text&&typeof t.text.value=="string"))throw new Error('"assistant_message" parts expect an object with an "id", "role", and "content" property.');return{type:"assistant_message",value:e}}},Bd={code:"5",name:"assistant_control_data",parse:e=>{if(e==null||typeof e!="object"||!("threadId"in e)||!("messageId"in e)||typeof e.threadId!="string"||typeof e.messageId!="string")throw new Error('"assistant_control_data" parts expect an object with a "threadId" and "messageId" property.');return{type:"assistant_control_data",value:{threadId:e.threadId,messageId:e.messageId}}}},$d={code:"6",name:"data_message",parse:e=>{if(e==null||typeof e!="object"||!("role"in e)||!("data"in e)||typeof e.role!="string"||e.role!=="data")throw new Error('"data_message" parts expect an object with a "role" and "data" property.');return{type:"data_message",value:e}}},Gq=[Dd,Ld,Fd,Bd,$d];Dd.code+"",Ld.code+"",Fd.code+"",Bd.code+"",$d.code+"",Dd.name+"",Dd.code,Ld.name+"",Ld.code,Fd.name+"",Fd.code,Bd.name+"",Bd.code,$d.name+"",$d.code,Gq.map(e=>e.code);function Zq(e){const t=["ROOT"];let n=-1,r=null;function o(c,l,u){switch(c){case'"':{n=l,t.pop(),t.push(u),t.push("INSIDE_STRING");break}case"f":case"t":case"n":{n=l,r=l,t.pop(),t.push(u),t.push("INSIDE_LITERAL");break}case"-":{t.pop(),t.push(u),t.push("INSIDE_NUMBER");break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{n=l,t.pop(),t.push(u),t.push("INSIDE_NUMBER");break}case"{":{n=l,t.pop(),t.push(u),t.push("INSIDE_OBJECT_START");break}case"[":{n=l,t.pop(),t.push(u),t.push("INSIDE_ARRAY_START");break}}}function a(c,l){switch(c){case",":{t.pop(),t.push("INSIDE_OBJECT_AFTER_COMMA");break}case"}":{n=l,t.pop();break}}}function i(c,l){switch(c){case",":{t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{n=l,t.pop();break}}}for(let c=0;c<e.length;c++){const l=e[c];switch(t[t.length-1]){case"ROOT":o(l,c,"FINISH");break;case"INSIDE_OBJECT_START":{switch(l){case'"':{t.pop(),t.push("INSIDE_OBJECT_KEY");break}case"}":{n=c,t.pop();break}}break}case"INSIDE_OBJECT_AFTER_COMMA":{switch(l){case'"':{t.pop(),t.push("INSIDE_OBJECT_KEY");break}}break}case"INSIDE_OBJECT_KEY":{switch(l){case'"':{t.pop(),t.push("INSIDE_OBJECT_AFTER_KEY");break}}break}case"INSIDE_OBJECT_AFTER_KEY":{switch(l){case":":{t.pop(),t.push("INSIDE_OBJECT_BEFORE_VALUE");break}}break}case"INSIDE_OBJECT_BEFORE_VALUE":{o(l,c,"INSIDE_OBJECT_AFTER_VALUE");break}case"INSIDE_OBJECT_AFTER_VALUE":{a(l,c);break}case"INSIDE_STRING":{switch(l){case'"':{t.pop(),n=c;break}case"\\":{t.push("INSIDE_STRING_ESCAPE");break}default:n=c}break}case"INSIDE_ARRAY_START":{switch(l){case"]":{n=c,t.pop();break}default:{n=c,o(l,c,"INSIDE_ARRAY_AFTER_VALUE");break}}break}case"INSIDE_ARRAY_AFTER_VALUE":{switch(l){case",":{t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{n=c,t.pop();break}default:{n=c;break}}break}case"INSIDE_ARRAY_AFTER_COMMA":{o(l,c,"INSIDE_ARRAY_AFTER_VALUE");break}case"INSIDE_STRING_ESCAPE":{t.pop(),n=c;break}case"INSIDE_NUMBER":{switch(l){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{n=c;break}case"e":case"E":case"-":case".":break;case",":{t.pop(),t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&i(l,c),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&a(l,c);break}case"}":{t.pop(),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&a(l,c);break}case"]":{t.pop(),t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&i(l,c);break}default:{t.pop();break}}break}case"INSIDE_LITERAL":{const u=e.substring(r,c+1);!"false".startsWith(u)&&!"true".startsWith(u)&&!"null".startsWith(u)?(t.pop(),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"?a(l,c):t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&i(l,c)):n=c;break}}}let s=e.slice(0,n+1);for(let c=t.length-1;c>=0;c--)switch(t[c]){case"INSIDE_STRING":{s+='"';break}case"INSIDE_OBJECT_KEY":case"INSIDE_OBJECT_AFTER_KEY":case"INSIDE_OBJECT_AFTER_COMMA":case"INSIDE_OBJECT_START":case"INSIDE_OBJECT_BEFORE_VALUE":case"INSIDE_OBJECT_AFTER_VALUE":{s+="}";break}case"INSIDE_ARRAY_START":case"INSIDE_ARRAY_AFTER_COMMA":case"INSIDE_ARRAY_AFTER_VALUE":{s+="]";break}case"INSIDE_LITERAL":{const l=e.substring(r,e.length);"true".startsWith(l)?s+="true".slice(l.length):"false".startsWith(l)?s+="false".slice(l.length):"null".startsWith(l)&&(s+="null".slice(l.length))}}return s}function eY(e){if(e===void 0)return{value:void 0,state:"undefined-input"};let t=ZN({text:e});return t.success?{value:t.value,state:"successful-parse"}:(t=ZN({text:Zq(e)}),t.success?{value:t.value,state:"repaired-parse"}:{value:void 0,state:"failed-parse"})}var Rc={code:"0",name:"text",parse:e=>{if(typeof e!="string")throw new Error('"text" parts expect a string value.');return{type:"text",value:e}}},Ic={code:"2",name:"data",parse:e=>{if(!Array.isArray(e))throw new Error('"data" parts expect an array value.');return{type:"data",value:e}}},Dc={code:"3",name:"error",parse:e=>{if(typeof e!="string")throw new Error('"error" parts expect a string value.');return{type:"error",value:e}}},Lc={code:"8",name:"message_annotations",parse:e=>{if(!Array.isArray(e))throw new Error('"message_annotations" parts expect an array value.');return{type:"message_annotations",value:e}}},Fc={code:"9",name:"tool_call",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("toolName"in e)||typeof e.toolName!="string"||!("args"in e)||typeof e.args!="object")throw new Error('"tool_call" parts expect an object with a "toolCallId", "toolName", and "args" property.');return{type:"tool_call",value:e}}},Bc={code:"a",name:"tool_result",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("result"in e))throw new Error('"tool_result" parts expect an object with a "toolCallId" and a "result" property.');return{type:"tool_result",value:e}}},$c={code:"b",name:"tool_call_streaming_start",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("toolName"in e)||typeof e.toolName!="string")throw new Error('"tool_call_streaming_start" parts expect an object with a "toolCallId" and "toolName" property.');return{type:"tool_call_streaming_start",value:e}}},zc={code:"c",name:"tool_call_delta",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("argsTextDelta"in e)||typeof e.argsTextDelta!="string")throw new Error('"tool_call_delta" parts expect an object with a "toolCallId" and "argsTextDelta" property.');return{type:"tool_call_delta",value:e}}},Vc={code:"d",name:"finish_message",parse:e=>{if(e==null||typeof e!="object"||!("finishReason"in e)||typeof e.finishReason!="string")throw new Error('"finish_message" parts expect an object with a "finishReason" property.');const t={finishReason:e.finishReason};return"usage"in e&&e.usage!=null&&typeof e.usage=="object"&&"promptTokens"in e.usage&&"completionTokens"in e.usage&&(t.usage={promptTokens:typeof e.usage.promptTokens=="number"?e.usage.promptTokens:Number.NaN,completionTokens:typeof e.usage.completionTokens=="number"?e.usage.completionTokens:Number.NaN}),{type:"finish_message",value:t}}},Uc={code:"e",name:"finish_step",parse:e=>{if(e==null||typeof e!="object"||!("finishReason"in e)||typeof e.finishReason!="string")throw new Error('"finish_step" parts expect an object with a "finishReason" property.');const t={finishReason:e.finishReason,isContinued:!1};return"usage"in e&&e.usage!=null&&typeof e.usage=="object"&&"promptTokens"in e.usage&&"completionTokens"in e.usage&&(t.usage={promptTokens:typeof e.usage.promptTokens=="number"?e.usage.promptTokens:Number.NaN,completionTokens:typeof e.usage.completionTokens=="number"?e.usage.completionTokens:Number.NaN}),"isContinued"in e&&typeof e.isContinued=="boolean"&&(t.isContinued=e.isContinued),{type:"finish_step",value:t}}},tY=[Rc,Ic,Dc,Lc,Fc,Bc,$c,zc,Vc,Uc],nY={[Rc.code]:Rc,[Ic.code]:Ic,[Dc.code]:Dc,[Lc.code]:Lc,[Fc.code]:Fc,[Bc.code]:Bc,[$c.code]:$c,[zc.code]:zc,[Vc.code]:Vc,[Uc.code]:Uc};Rc.name+"",Rc.code,Ic.name+"",Ic.code,Dc.name+"",Dc.code,Lc.name+"",Lc.code,Fc.name+"",Fc.code,Bc.name+"",Bc.code,$c.name+"",$c.code,zc.name+"",zc.code,Vc.name+"",Vc.code,Uc.name+"",Uc.code;var rY=tY.map(e=>e.code),oY=e=>{const t=e.indexOf(":");if(t===-1)throw new Error("Failed to parse stream string. No separator found.");const n=e.slice(0,t);if(!rY.includes(n))throw new Error(`Failed to parse stream string. Invalid code ${n}.`);const r=n,o=e.slice(t+1),a=JSON.parse(o);return nY[r].parse(a)},aY=10;function iY(e,t){const n=new Uint8Array(t);let r=0;for(const o of e)n.set(o,r),r+=o.length;return e.length=0,n}async function sY({stream:e,onTextPart:t,onDataPart:n,onErrorPart:r,onToolCallStreamingStartPart:o,onToolCallDeltaPart:a,onToolCallPart:i,onToolResultPart:s,onMessageAnnotationsPart:c,onFinishMessagePart:l,onFinishStepPart:u}){const d=e.getReader(),f=new TextDecoder,p=[];let y=0;for(;;){const{value:m}=await d.read();if(m&&(p.push(m),y+=m.length,m[m.length-1]!==aY))continue;if(p.length===0)break;const v=iY(p,y);y=0;const b=f.decode(v,{stream:!0}).split(`
`).filter(x=>x!=="").map(oY);for(const{type:x,value:_}of b)switch(x){case"text":await(t==null?void 0:t(_));break;case"data":await(n==null?void 0:n(_));break;case"error":await(r==null?void 0:r(_));break;case"message_annotations":await(c==null?void 0:c(_));break;case"tool_call_streaming_start":await(o==null?void 0:o(_));break;case"tool_call_delta":await(a==null?void 0:a(_));break;case"tool_call":await(i==null?void 0:i(_));break;case"tool_result":await(s==null?void 0:s(_));break;case"finish_message":await(l==null?void 0:l(_));break;case"finish_step":await(u==null?void 0:u(_));break;default:{const w=x;throw new Error(`Unknown stream part type: ${w}`)}}}}function cY({promptTokens:e,completionTokens:t}){return{promptTokens:e,completionTokens:t,totalTokens:e+t}}async function lY({stream:e,update:t,onToolCall:n,onFinish:r,generateId:o=GN,getCurrentDate:a=()=>new Date}){const i=a();let s,c=!0;const l=[],u=[];let d;const f={};let p={completionTokens:NaN,promptTokens:NaN,totalTokens:NaN},y="unknown";function m(){const b=[...u];if(s==null){t(l,b);return}d!=null&&d.length&&(s.annotations=d);const x={...JSON.parse(JSON.stringify(s)),revisionId:o()};t([...l,x],b)}function v(){return(c||s==null)&&(s!=null&&l.push(s),c=!1,s={id:o(),role:"assistant",content:"",createdAt:i}),s}await sY({stream:e,onTextPart(b){const x=v();s={...x,content:x.content+b},m()},onToolCallStreamingStartPart(b){const x=v();x.toolInvocations==null&&(x.toolInvocations=[]),f[b.toolCallId]={text:"",toolName:b.toolName,index:x.toolInvocations.length},x.toolInvocations.push({state:"partial-call",toolCallId:b.toolCallId,toolName:b.toolName,args:void 0}),m()},onToolCallDeltaPart(b){const x=v(),_=f[b.toolCallId];_.text+=b.argsTextDelta;const{value:w}=eY(_.text);x.toolInvocations[_.index]={state:"partial-call",toolCallId:b.toolCallId,toolName:_.toolName,args:w},m()},async onToolCallPart(b){const x=v();if(f[b.toolCallId]!=null?x.toolInvocations[f[b.toolCallId].index]={state:"call",...b}:(x.toolInvocations==null&&(x.toolInvocations=[]),x.toolInvocations.push({state:"call",...b})),n){const _=await n({toolCall:b});_!=null&&(x.toolInvocations[x.toolInvocations.length-1]={state:"result",...b,result:_})}m()},onToolResultPart(b){const x=v().toolInvocations;if(x==null)throw new Error("tool_result must be preceded by a tool_call");const _=x.findIndex(w=>w.toolCallId===b.toolCallId);if(_===-1)throw new Error("tool_result must be preceded by a tool_call with the same toolCallId");x[_]={...x[_],state:"result",...b},m()},onDataPart(b){u.push(...b),m()},onMessageAnnotationsPart(b){d==null?d=[...b]:d.push(...b),m()},onFinishStepPart(b){c=!b.isContinued},onFinishMessagePart(b){y=b.finishReason,b.usage!=null&&(p=cY(b.usage))},onErrorPart(b){throw new Error(b)}}),r==null||r({message:s,finishReason:y,usage:p})}async function uY({stream:e,onTextPart:t}){const n=e.pipeThrough(new TextDecoderStream).getReader();for(;;){const{done:r,value:o}=await n.read();if(r)break;await t(o)}}var dY=()=>fetch;async function fY({api:e,body:t,streamProtocol:n="data",credentials:r,headers:o,abortController:a,restoreMessagesOnFailure:i,onResponse:s,onUpdate:c,onFinish:l,onToolCall:u,generateId:d,fetch:f=dY()}){var p,y;const m=await f(e,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json",...o},signal:(p=a==null?void 0:a())==null?void 0:p.signal,credentials:r}).catch(v=>{throw i(),v});if(s)try{await s(m)}catch(v){throw v}if(!m.ok)throw i(),new Error((y=await m.text())!=null?y:"Failed to fetch the chat response.");if(!m.body)throw new Error("The response body is empty.");switch(n){case"text":{const v={id:d(),createdAt:new Date,role:"assistant",content:""};await uY({stream:m.body,onTextPart:b=>{v.content+=b,c([{...v}],[])}}),l==null||l(v,{usage:{completionTokens:NaN,promptTokens:NaN,totalTokens:NaN},finishReason:"unknown"});return}case"data":{await lY({stream:m.body,update:c,onToolCall:u,onFinish({message:v,finishReason:b,usage:x}){l&&v!=null&&l(v,{usage:x,finishReason:b})},generateId:d});return}default:{const v=n;throw new Error(`Unknown stream protocol: ${v}`)}}}var ek={exports:{}},jg={},tk;function pY(){if(tk)return jg;tk=1;var e=B9();function t(d,f){return d===f&&(d!==0||1/d===1/f)||d!==d&&f!==f}var n=typeof Object.is=="function"?Object.is:t,r=e.useState,o=e.useEffect,a=e.useLayoutEffect,i=e.useDebugValue;function s(d,f){var p=f(),y=r({inst:{value:p,getSnapshot:f}}),m=y[0].inst,v=y[1];return a(function(){m.value=p,m.getSnapshot=f,c(m)&&v({inst:m})},[d,p,f]),o(function(){return c(m)&&v({inst:m}),d(function(){c(m)&&v({inst:m})})},[d]),i(p),p}function c(d){var f=d.getSnapshot;d=d.value;try{var p=f();return!n(d,p)}catch{return!0}}function l(d,f){return f()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?l:s;return jg.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:u,jg}var nk;function rk(){return nk||(nk=1,ek.exports=pY()),ek.exports}$u=rk();let oo,fn,zd,Je,lr,ao,ok,Hc;G9=Xe($u),oo=()=>{},fn=oo(),zd=Object,Je=e=>e===fn,lr=e=>typeof e=="function",ao=(e,t)=>({...e,...t}),ok=e=>lr(e.then),Hc=new WeakMap;let hY=0;const Wc=e=>{const t=typeof e,n=e&&e.constructor,r=n==Date;let o,a;if(zd(e)===e&&!r&&n!=RegExp){if(o=Hc.get(e),o)return o;if(o=++hY+"~",Hc.set(e,o),n==Array){for(o="@",a=0;a<e.length;a++)o+=Wc(e[a])+",";Hc.set(e,o)}if(n==zd){o="#";const i=zd.keys(e).sort();for(;!Je(a=i.pop());)Je(e[a])||(o+=a+":"+Wc(e[a])+",");Hc.set(e,o)}}else o=r?e.toJSON():t=="symbol"?e.toString():t=="string"?JSON.stringify(e):""+e;return o},io=new WeakMap,Eg={},Vd={},Sg="undefined",Ud=typeof window!=Sg,Cg=typeof document!=Sg,mY=()=>Ud&&typeof window.requestAnimationFrame!=Sg,ak=(e,t)=>{const n=io.get(e);return[()=>!Je(t)&&e.get(t)||Eg,r=>{if(!Je(t)){const o=e.get(t);t in Vd||(Vd[t]=o),n[5](t,ao(o,r),o||Eg)}},n[6],()=>!Je(t)&&t in Vd?Vd[t]:!Je(t)&&e.get(t)||Eg]};let Og=!0;const yY=()=>Og,[Mg,Ng]=Ud&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[oo,oo],gY=()=>{const e=Cg&&document.visibilityState;return Je(e)||e!=="hidden"},vY=e=>(Cg&&document.addEventListener("visibilitychange",e),Mg("focus",e),()=>{Cg&&document.removeEventListener("visibilitychange",e),Ng("focus",e)}),bY=e=>{const t=()=>{Og=!0,e()},n=()=>{Og=!1};return Mg("online",t),Mg("offline",n),()=>{Ng("online",t),Ng("offline",n)}},xY={isOnline:yY,isVisible:gY},wY={initFocus:vY,initReconnect:bY},ik=!U.useId,qc=!Ud||"Deno"in window,_Y=e=>mY()?window.requestAnimationFrame(e):setTimeout(e,1),kg=qc?g.useEffect:g.useLayoutEffect,Pg=typeof navigator<"u"&&navigator.connection,sk=!qc&&Pg&&(["slow-2g","2g"].includes(Pg.effectiveType)||Pg.saveData),Ag=e=>{if(lr(e))try{e=e()}catch{e=""}const t=e;return e=typeof e=="string"?e:(Array.isArray(e)?e.length:e)?Wc(e):"",[e,t]};let jY=0;const Tg=()=>++jY,ck=0,lk=1,uk=2;var Yc={__proto__:null,ERROR_REVALIDATE_EVENT:3,FOCUS_EVENT:ck,MUTATE_EVENT:uk,RECONNECT_EVENT:lk};async function dk(...e){const[t,n,r,o]=e,a=ao({populateCache:!0,throwOnError:!0},typeof o=="boolean"?{revalidate:o}:o||{});let i=a.populateCache;const s=a.rollbackOnError;let c=a.optimisticData;const l=f=>typeof s=="function"?s(f):s!==!1,u=a.throwOnError;if(lr(n)){const f=n,p=[],y=t.keys();for(const m of y)!/^\$(inf|sub)\$/.test(m)&&f(t.get(m)._k)&&p.push(m);return Promise.all(p.map(d))}return d(n);async function d(f){const[p]=Ag(f);if(!p)return;const[y,m]=ak(t,p),[v,b,x,_]=io.get(t),w=()=>{const A=v[p];return(lr(a.revalidate)?a.revalidate(y().data,f):a.revalidate!==!1)&&(delete x[p],delete _[p],A&&A[0])?A[0](uk).then(()=>y().data):y().data};if(e.length<3)return w();let j=r,E;const S=Tg();b[p]=[S,0];const O=!Je(c),P=y(),M=P.data,k=P._c,R=Je(k)?M:k;if(O&&(c=lr(c)?c(R,M):c,m({data:c,_c:R})),lr(j))try{j=j(R)}catch(A){E=A}if(j&&ok(j))if(j=await j.catch(A=>{E=A}),S!==b[p][0]){if(E)throw E;return j}else E&&O&&l(E)&&(i=!0,m({data:R,_c:fn}));if(i&&!E)if(lr(i)){const A=i(j,R);m({data:A,error:fn,_c:fn})}else m({data:j,error:fn,_c:fn});if(b[p][1]=Tg(),Promise.resolve(w()).then(()=>{m({_c:fn})}),E){if(u)throw E;return}return j}}const fk=(e,t)=>{for(const n in e)e[n][0]&&e[n][0](t)},EY=(e,t)=>{if(!io.has(e)){const n=ao(wY,t),r={},o=dk.bind(fn,e);let a=oo;const i={},s=(u,d)=>{const f=i[u]||[];return i[u]=f,f.push(d),()=>f.splice(f.indexOf(d),1)},c=(u,d,f)=>{e.set(u,d);const p=i[u];if(p)for(const y of p)y(d,f)},l=()=>{if(!io.has(e)&&(io.set(e,[r,{},{},{},o,c,s]),!qc)){const u=n.initFocus(setTimeout.bind(fn,fk.bind(fn,r,ck))),d=n.initReconnect(setTimeout.bind(fn,fk.bind(fn,r,lk)));a=()=>{u&&u(),d&&d(),io.delete(e)}}};return l(),[e,o,l,a]}return[e,io.get(e)[4]]},SY=(e,t,n,r,o)=>{const a=n.errorRetryCount,i=o.retryCount,s=~~((Math.random()+.5)*(1<<(i<8?i:8)))*n.errorRetryInterval;!Je(a)&&i>a||setTimeout(r,s,o)},CY=(e,t)=>Wc(e)==Wc(t),[pk,OY]=EY(new Map),MY=ao({onLoadingSlow:oo,onSuccess:oo,onError:oo,onErrorRetry:SY,onDiscarded:oo,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:sk?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:sk?5e3:3e3,compare:CY,isPaused:()=>!1,cache:pk,mutate:OY,fallback:{}},xY),NY=(e,t)=>{const n=ao(e,t);if(t){const{use:r,fallback:o}=e,{use:a,fallback:i}=t;r&&a&&(n.use=r.concat(a)),o&&i&&(n.fallback=ao(o,i))}return n},kY=g.createContext({}),PY="$inf$",hk=Ud&&window.__SWR_DEVTOOLS_USE__,AY=hk?window.__SWR_DEVTOOLS_USE__:[],TY=()=>{hk&&(window.__SWR_DEVTOOLS_REACT__=U)},RY=e=>lr(e[1])?[e[0],e[1],e[2]||{}]:[e[0],null,(e[1]===null?e[2]:e[1])||{}],IY=()=>ao(MY,g.useContext(kY)),DY=e=>(t,n,r)=>e(t,n&&((...o)=>{const[a]=Ag(t),[,,,i]=io.get(pk);if(a.startsWith(PY))return n(...o);const s=i[a];return Je(s)?n(...o):(delete i[a],s)}),r),LY=AY.concat(DY),FY=e=>function(...t){const n=IY(),[r,o,a]=RY(t),i=NY(n,a);let s=e;const{use:c}=i,l=(c||[]).concat(LY);for(let u=l.length;u--;)s=l[u](s);return s(r,o||i.fetcher||null,i)},BY=(e,t,n)=>{const r=t[e]||(t[e]=[]);return r.push(n),()=>{const o=r.indexOf(n);o>=0&&(r[o]=r[r.length-1],r.pop())}};TY();const mk=U.use||(e=>{if(e.status==="pending")throw e;if(e.status==="fulfilled")return e.value;throw e.status==="rejected"?e.reason:(e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t}),e)}),Rg={dedupe:!0},$Y=(e,t,n)=>{const{cache:r,compare:o,suspense:a,fallbackData:i,revalidateOnMount:s,revalidateIfStale:c,refreshInterval:l,refreshWhenHidden:u,refreshWhenOffline:d,keepPreviousData:f}=n,[p,y,m,v]=io.get(r),[b,x]=Ag(e),_=g.useRef(!1),w=g.useRef(!1),j=g.useRef(b),E=g.useRef(t),S=g.useRef(n),O=()=>S.current,P=()=>O().isVisible()&&O().isOnline(),[M,k,R,A]=ak(r,b),C=g.useRef({}).current,N=Je(i)?n.fallback[b]:i,T=($,se)=>{for(const le in C){const ve=le;if(ve==="data"){if(!o($[ve],se[ve])&&(!Je($[ve])||!o(Q,se[ve])))return!1}else if(se[ve]!==$[ve])return!1}return!0},I=g.useMemo(()=>{const $=!b||!t?!1:Je(s)?O().isPaused()||a?!1:Je(c)?!0:c:s,se=ze=>{const st=ao(ze);return delete st._k,$?{isValidating:!0,isLoading:!0,...st}:st},le=M(),ve=A(),Te=se(le),qe=le===ve?Te:se(ve);let Ye=Te;return[()=>{const ze=se(M());return T(ze,Ye)?(Ye.data=ze.data,Ye.isLoading=ze.isLoading,Ye.isValidating=ze.isValidating,Ye.error=ze.error,Ye):(Ye=ze,ze)},()=>qe]},[r,b]),L=$u.useSyncExternalStore(g.useCallback($=>R(b,(se,le)=>{T(le,se)||$()}),[r,b]),I[0],I[1]),D=!_.current,B=p[b]&&p[b].length>0,H=L.data,F=Je(H)?N:H,z=L.error,G=g.useRef(F),Q=f?Je(H)?G.current:H:F,oe=B&&!Je(z)?!1:D&&!Je(s)?s:O().isPaused()?!1:a?Je(F)?!1:c:Je(F)||c,Z=!!(b&&t&&D&&oe),q=Je(L.isValidating)?Z:L.isValidating,W=Je(L.isLoading)?Z:L.isLoading,J=g.useCallback(async $=>{const se=E.current;if(!b||!se||w.current||O().isPaused())return!1;let le,ve,Te=!0;const qe=$||{},Ye=!m[b]||!qe.dedupe,ze=()=>ik?!w.current&&b===j.current&&_.current:b===j.current,st={isValidating:!1,isLoading:!1},He=()=>{k(st)},ct=()=>{const St=m[b];St&&St[1]===ve&&delete m[b]},Ut={isValidating:!0};Je(M().data)&&(Ut.isLoading=!0);try{if(Ye&&(k(Ut),n.loadingTimeout&&Je(M().data)&&setTimeout(()=>{Te&&ze()&&O().onLoadingSlow(b,n)},n.loadingTimeout),m[b]=[se(x),Tg()]),[le,ve]=m[b],le=await le,Ye&&setTimeout(ct,n.dedupingInterval),!m[b]||m[b][1]!==ve)return Ye&&ze()&&O().onDiscarded(b),!1;st.error=fn;const St=y[b];if(!Je(St)&&(ve<=St[0]||ve<=St[1]||St[1]===0))return He(),Ye&&ze()&&O().onDiscarded(b),!1;const yt=M().data;st.data=o(yt,le)?yt:le,Ye&&ze()&&O().onSuccess(le,b,n)}catch(St){ct();const yt=O(),{shouldRetryOnError:Rt}=yt;yt.isPaused()||(st.error=St,Ye&&ze()&&(yt.onError(St,b,yt),(Rt===!0||lr(Rt)&&Rt(St))&&(!O().revalidateOnFocus||!O().revalidateOnReconnect||P())&&yt.onErrorRetry(St,b,yt,bn=>{const _r=p[b];_r&&_r[0]&&_r[0](Yc.ERROR_REVALIDATE_EVENT,bn)},{retryCount:(qe.retryCount||0)+1,dedupe:!0})))}return Te=!1,He(),!0},[b,r]),te=g.useCallback((...$)=>dk(r,j.current,...$),[]);if(kg(()=>{E.current=t,S.current=n,Je(H)||(G.current=H)}),kg(()=>{if(!b)return;const $=J.bind(fn,Rg);let se=0;const le=BY(b,p,(ve,Te={})=>{if(ve==Yc.FOCUS_EVENT){const qe=Date.now();O().revalidateOnFocus&&qe>se&&P()&&(se=qe+O().focusThrottleInterval,$())}else if(ve==Yc.RECONNECT_EVENT)O().revalidateOnReconnect&&P()&&$();else{if(ve==Yc.MUTATE_EVENT)return J();if(ve==Yc.ERROR_REVALIDATE_EVENT)return J(Te)}});return w.current=!1,j.current=b,_.current=!0,k({_k:x}),oe&&(Je(F)||qc?$():_Y($)),()=>{w.current=!0,le()}},[b]),kg(()=>{let $;function se(){const ve=lr(l)?l(M().data):l;ve&&$!==-1&&($=setTimeout(le,ve))}function le(){!M().error&&(u||O().isVisible())&&(d||O().isOnline())?J(Rg).then(se):se()}return se(),()=>{$&&(clearTimeout($),$=-1)}},[l,u,d,b]),g.useDebugValue(Q),a&&Je(F)&&b){if(!ik&&qc)throw new Error("Fallback data is required when using suspense in SSR.");E.current=t,S.current=n,w.current=!1;const $=v[b];if(!Je($)){const se=te($);mk(se)}if(Je(z)){const se=J(Rg);Je(Q)||(se.status="fulfilled",se.value=!0),mk(se)}else throw z}return{mutate:te,get data(){return C.data=!0,Q},get error(){return C.error=!0,z},get isValidating(){return C.isValidating=!0,q},get isLoading(){return C.isLoading=!0,W}}},Hd=FY($Y);var Ig,yk;function zY(){if(yk)return Ig;yk=1;function e(t,n){if(typeof t!="function")throw new TypeError(`Expected the first argument to be a \`function\`, got \`${typeof t}\`.`);let r,o=0;return function(...a){clearTimeout(r);const i=Date.now(),s=i-o,c=n-s;c<=0?(o=i,t.apply(this,a)):r=setTimeout(()=>{o=Date.now(),t.apply(this,a)},c)}}return Ig=e,Ig}var VY=zY();const UY=Xe(VY);function gk(e,t){return t!=null?UY(e,t):e}var HY=async(e,t,n,r,o,a,i,s,c,l,u,d,f,p,y,m,v)=>{var b;const x=i.current;n(t.messages,!1);const _=p?t.messages:t.messages.map(({role:j,content:E,experimental_attachments:S,data:O,annotations:P,toolInvocations:M})=>({role:j,content:E,...S!==void 0&&{experimental_attachments:S},...O!==void 0&&{data:O},...P!==void 0&&{annotations:P},...M!==void 0&&{toolInvocations:M}})),w=o.current;return await fY({api:e,body:(b=y==null?void 0:y({messages:t.messages,requestData:t.data,requestBody:t.body}))!=null?b:{messages:_,data:t.data,...a.current.body,...t.body},streamProtocol:l,credentials:a.current.credentials,headers:{...a.current.headers,...t.headers},abortController:()=>s.current,restoreMessagesOnFailure(){v||n(x,!1)},onResponse:d,onUpdate(j,E){n([...t.messages,...j],!1),E!=null&&E.length&&r([...w??[],...E],!1)},onToolCall:f,onFinish:u,generateId:c,fetch:m})};function WY({api:e="/api/chat",id:t,initialMessages:n,initialInput:r="",sendExtraMessageFields:o,onToolCall:a,experimental_prepareRequestBody:i,maxSteps:s=1,streamProtocol:c="data",onResponse:l,onFinish:u,onError:d,credentials:f,headers:p,body:y,generateId:m=GN,fetch:v,keepLastMessageOnError:b=!0,experimental_throttle:x}={}){const _=g.useId(),w=t??_,j=typeof e=="string"?[e,w]:w,[E]=g.useState([]),{data:S,mutate:O}=Hd([j,"messages"],null,{fallbackData:n??E}),P=g.useRef(S||[]);g.useEffect(()=>{P.current=S||[]},[S]);const{data:M,mutate:k}=Hd([j,"streamData"],null),R=g.useRef(M);g.useEffect(()=>{R.current=M},[M]);const{data:A=!1,mutate:C}=Hd([j,"loading"],null),{data:N=void 0,mutate:T}=Hd([j,"error"],null),I=g.useRef(null),L=g.useRef({credentials:f,headers:p,body:y});g.useEffect(()=>{L.current={credentials:f,headers:p,body:y}},[f,p,y]);const D=g.useCallback(async q=>{const W=P.current.length;try{C(!0),T(void 0);const $=new AbortController;I.current=$,await HY(e,q,gk(O,x),gk(k,x),R,L,P,I,m,c,u,l,a,o,i,v,b),I.current=null}catch($){if($.name==="AbortError")return I.current=null,null;d&&$ instanceof Error&&d($),T($)}finally{C(!1)}const J=P.current,te=J[J.length-1];J.length>W&&te!=null&&s>1&&vk(te)&&qY(J)<s&&await D({messages:J})},[O,C,e,L,l,u,d,T,k,R,c,o,i,a,s,P,I,m,v,b,x]),B=g.useCallback(async(q,{data:W,headers:J,body:te,experimental_attachments:$}={})=>{var se,le;q.id||(q.id=m());const ve=await bk($),Te=P.current.concat({...q,id:(se=q.id)!=null?se:m(),createdAt:(le=q.createdAt)!=null?le:new Date,experimental_attachments:ve.length>0?ve:void 0});return D({messages:Te,headers:J,body:te,data:W})},[D,m]),H=g.useCallback(async({data:q,headers:W,body:J}={})=>{const te=P.current;if(te.length===0)return null;const $=te[te.length-1];return D({messages:$.role==="assistant"?te.slice(0,-1):te,headers:W,body:J,data:q})},[D]),F=g.useCallback(()=>{I.current&&(I.current.abort(),I.current=null)},[]),z=g.useCallback(q=>{typeof q=="function"&&(q=q(P.current)),O(q,!1),P.current=q},[O]),G=g.useCallback(q=>{typeof q=="function"&&(q=q(R.current)),k(q,!1),R.current=q},[k]),[Q,oe]=g.useState(r),Z=g.useCallback(async(q,W={},J)=>{var te;if((te=q==null?void 0:q.preventDefault)==null||te.call(q),!Q&&!W.allowEmptySubmit)return;J&&(L.current={...L.current,...J});const $=await bk(W.experimental_attachments),se={messages:!Q&&!$.length&&W.allowEmptySubmit?P.current:P.current.concat({id:m(),createdAt:new Date,role:"user",content:Q,experimental_attachments:$.length>0?$:void 0}),headers:W.headers,body:W.body,data:W.data};D(se),oe("")},[Q,m,D]);return{messages:S||[],setMessages:z,data:M,setData:G,error:N,append:B,reload:H,stop:F,input:Q,setInput:oe,handleInputChange:q=>{oe(q.target.value)},handleSubmit:Z,isLoading:A,addToolResult:({toolCallId:q,result:W})=>{const J=P.current.map(($,se,le)=>se===le.length-1&&$.role==="assistant"&&$.toolInvocations?{...$,toolInvocations:$.toolInvocations.map(ve=>ve.toolCallId===q?{...ve,result:W,state:"result"}:ve)}:$);O(J,!1);const te=J[J.length-1];vk(te)&&D({messages:J})}}}function vk(e){return e.role==="assistant"&&e.toolInvocations&&e.toolInvocations.length>0&&e.toolInvocations.every(t=>"result"in t)}function qY(e){let t=0;for(let n=e.length-1;n>=0&&e[n].role==="assistant";n--)t++;return t}async function bk(e){if(e==null)return[];if(e instanceof FileList)return Promise.all(Array.from(e).map(async t=>{const{name:n,type:r}=t,o=await new Promise((a,i)=>{const s=new FileReader;s.onload=c=>{var l;a((l=c.target)==null?void 0:l.result)},s.onerror=c=>i(c),s.readAsDataURL(t)});return{name:n,contentType:r,url:o}}));if(Array.isArray(e))return e;throw new Error("Invalid attachments type")}rS=WY;const so=g.forwardRef(({className:e,...t},n)=>h.jsx("textarea",{className:K("flex min-h-[100px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-0 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...t}));so.displayName="Textarea";function YY({minHeight:e,maxHeight:t}){const n=g.useRef(null),r=g.useCallback(o=>{const a=n.current;if(!a)return;if(o){a.style.height=`${e}px`;return}a.style.height=`${e}px`;const i=Math.max(e,Math.min(a.scrollHeight,t??Number.POSITIVE_INFINITY));a.style.height=`${i}px`},[e,t]);return g.useEffect(()=>{const o=n.current;o&&(o.style.height=`${e}px`)},[e]),g.useEffect(()=>{const o=()=>r();return window.addEventListener("resize",o),()=>window.removeEventListener("resize",o)},[r]),{textareaRef:n,adjustHeight:r}}const KY=48,xk=164;function wk({onSubmit:e,disabled:t,enableTool:n,enableFile:r,placeholder:o,minHeight:a,maxHeight:i,className:s,onChange:c,value:l}){const[u,d]=g.useState(!1),[f,p]=g.useState(""),{textareaRef:y,adjustHeight:m}=YY({minHeight:a||KY,maxHeight:i||xk}),[v,b]=g.useState(!0),x=async _=>{try{d(!0),await e(f,_)}finally{d(!1)}};return h.jsx("div",{className:K("w-full py-4 max-w-xl",s),children:h.jsx("div",{className:"relative w-full mx-auto",children:h.jsxs("div",{className:"relative flex flex-col",children:[h.jsx("div",{className:"overflow-y-auto",style:{maxHeight:`${i||xk}px`},children:h.jsx(so,{id:"ai-input-04",value:(c?l:f)||"",disabled:t||u,placeholder:o,className:"w-full rounded-xl rounded-b-none px-4 py-3 bg-black/5 dark:bg-white/5 border-none dark:text-white placeholder:text-black/70 dark:placeholder:text-white/70 resize-none focus-visible:ring-0 leading-[1.2]",ref:y,onKeyDown:_=>{_.key==="Enter"&&!_.shiftKey&&(_.preventDefault(),x(_))},onChange:_=>{c||p(_.target.value),m(),c==null||c(_)}})}),h.jsxs("div",{className:"h-12 bg-black/5 dark:bg-white/5 rounded-b-xl",children:[h.jsxs("div",{className:"absolute left-3 bottom-3 flex items-center gap-2",children:[r?h.jsxs("label",{className:"cursor-pointer rounded-lg p-2 bg-black/5 dark:bg-white/5",children:[h.jsx("input",{type:"file",className:"hidden"}),h.jsx(de,{name:"paperclip",className:"w-4 h-4 text-black/40 dark:text-white/40 hover:text-black dark:hover:text-white transition-colors"})]}):void 0,n?h.jsxs("button",{type:"button",onClick:()=>{b(!v)},className:K("rounded-full transition-all flex items-center gap-2 px-1.5 py-1 border h-8",v?"bg-sky-500/15 border-sky-400 text-sky-500":"bg-black/5 dark:bg-white/5 border-transparent text-black/40 dark:text-white/40 hover:text-black dark:hover:text-white"),children:[h.jsx("div",{className:"w-4 h-4 flex items-center justify-center flex-shrink-0",children:h.jsx(Au.div,{animate:{rotate:v?180:0,scale:v?1.1:1},whileHover:{rotate:v?180:15,scale:1.1,transition:{type:"spring",stiffness:300,damping:10}},transition:{type:"spring",stiffness:260,damping:25},children:h.jsx(de,{name:"globe",className:K("w-4 h-4",v?"text-sky-500":"text-inherit")})})}),h.jsx(az,{children:v&&h.jsx(Au.span,{initial:{width:0,opacity:0},animate:{width:"auto",opacity:1},exit:{width:0,opacity:0},transition:{duration:.2},className:"text-sm overflow-hidden whitespace-nowrap text-sky-500 flex-shrink-0",children:"Search"})})]}):void 0]}),h.jsx("div",{className:"absolute right-3 bottom-3",children:h.jsx("button",{type:"button",disabled:t||u,onClick:_=>{x(_)},className:K("rounded-lg p-2",c&&l||f?"bg-sky-500/15 text-sky-500":"bg-black/5 dark:bg-white/5 text-black/40 dark:text-white/40 hover:text-black dark:hover:text-white"),children:h.jsx(de,{name:"send",className:"w-4 h-4"})})})]})]})})})}var Dg,_k;function XY(){if(_k)return Dg;_k=1;function e(){this.__data__=[],this.size=0}return Dg=e,Dg}var Lg,jk;Gs=function(){if(jk)return Lg;jk=1;function e(t,n){return t===n||t!==t&&n!==n}return Lg=e,Lg};var Fg,Ek;function Wd(){if(Ek)return Fg;Ek=1;var e=Gs();function t(n,r){for(var o=n.length;o--;)if(e(n[o][0],r))return o;return-1}return Fg=t,Fg}var Bg,Sk;function QY(){if(Sk)return Bg;Sk=1;var e=Wd(),t=Array.prototype,n=t.splice;function r(o){var a=this.__data__,i=e(a,o);if(i<0)return!1;var s=a.length-1;return i==s?a.pop():n.call(a,i,1),--this.size,!0}return Bg=r,Bg}var $g,Ck;function JY(){if(Ck)return $g;Ck=1;var e=Wd();function t(n){var r=this.__data__,o=e(r,n);return o<0?void 0:r[o][1]}return $g=t,$g}var zg,Ok;function GY(){if(Ok)return zg;Ok=1;var e=Wd();function t(n){return e(this.__data__,n)>-1}return zg=t,zg}var Vg,Mk;function ZY(){if(Mk)return Vg;Mk=1;var e=Wd();function t(n,r){var o=this.__data__,a=e(o,n);return a<0?(++this.size,o.push([n,r])):o[a][1]=r,this}return Vg=t,Vg}var Ug,Nk;function qd(){if(Nk)return Ug;Nk=1;var e=XY(),t=QY(),n=JY(),r=GY(),o=ZY();function a(i){var s=-1,c=i==null?0:i.length;for(this.clear();++s<c;){var l=i[s];this.set(l[0],l[1])}}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=n,a.prototype.has=r,a.prototype.set=o,Ug=a,Ug}var Hg,kk;function eK(){if(kk)return Hg;kk=1;var e=qd();function t(){this.__data__=new e,this.size=0}return Hg=t,Hg}var Wg,Pk;function tK(){if(Pk)return Wg;Pk=1;function e(t){var n=this.__data__,r=n.delete(t);return this.size=n.size,r}return Wg=e,Wg}var qg,Ak;function nK(){if(Ak)return qg;Ak=1;function e(t){return this.__data__.get(t)}return qg=e,qg}var Yg,Tk;function rK(){if(Tk)return Yg;Tk=1;function e(t){return this.__data__.has(t)}return Yg=e,Yg}var Kg,Rk;function Ik(){if(Rk)return Kg;Rk=1;var e=typeof Xs=="object"&&Xs&&Xs.Object===Object&&Xs;return Kg=e,Kg}var Xg,Dk;tr=function(){if(Dk)return Xg;Dk=1;var e=Ik(),t=typeof self=="object"&&self&&self.Object===Object&&self,n=e||t||Function("return this")();return Xg=n,Xg};var Qg,Lk;li=function(){if(Lk)return Qg;Lk=1;var e=tr(),t=e.Symbol;return Qg=t,Qg};var Jg,Fk;function oK(){if(Fk)return Jg;Fk=1;var e=li(),t=Object.prototype,n=t.hasOwnProperty,r=t.toString,o=e?e.toStringTag:void 0;function a(i){var s=n.call(i,o),c=i[o];try{i[o]=void 0;var l=!0}catch{}var u=r.call(i);return l&&(s?i[o]=c:delete i[o]),u}return Jg=a,Jg}var Gg,Bk;function aK(){if(Bk)return Gg;Bk=1;var e=Object.prototype,t=e.toString;function n(r){return t.call(r)}return Gg=n,Gg}var Zg,$k;function co(){if($k)return Zg;$k=1;var e=li(),t=oK(),n=aK(),r="[object Null]",o="[object Undefined]",a=e?e.toStringTag:void 0;function i(s){return s==null?s===void 0?o:r:a&&a in Object(s)?t(s):n(s)}return Zg=i,Zg}var ev,zk;nr=function(){if(zk)return ev;zk=1;function e(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}return ev=e,ev};var tv,Vk;Bu=function(){if(Vk)return tv;Vk=1;var e=co(),t=nr(),n="[object AsyncFunction]",r="[object Function]",o="[object GeneratorFunction]",a="[object Proxy]";function i(s){if(!t(s))return!1;var c=e(s);return c==r||c==o||c==n||c==a}return tv=i,tv};var nv,Uk;function iK(){if(Uk)return nv;Uk=1;var e=tr(),t=e["__core-js_shared__"];return nv=t,nv}var rv,Hk;function sK(){if(Hk)return rv;Hk=1;var e=iK(),t=function(){var r=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function n(r){return!!t&&t in r}return rv=n,rv}var ov,Wk;function qk(){if(Wk)return ov;Wk=1;var e=Function.prototype,t=e.toString;function n(r){if(r!=null){try{return t.call(r)}catch{}try{return r+""}catch{}}return""}return ov=n,ov}var av,Yk;function cK(){if(Yk)return av;Yk=1;var e=Bu(),t=sK(),n=nr(),r=qk(),o=/[\\^$.*+?()[\]{}|]/g,a=/^\[object .+?Constructor\]$/,i=Function.prototype,s=Object.prototype,c=i.toString,l=s.hasOwnProperty,u=RegExp("^"+c.call(l).replace(o,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function d(f){if(!n(f)||t(f))return!1;var p=e(f)?u:a;return p.test(r(f))}return av=d,av}var iv,Kk;function lK(){if(Kk)return iv;Kk=1;function e(t,n){return t==null?void 0:t[n]}return iv=e,iv}var sv,Xk;function ja(){if(Xk)return sv;Xk=1;var e=cK(),t=lK();function n(r,o){var a=t(r,o);return e(a)?a:void 0}return sv=n,sv}var cv,Qk;function lv(){if(Qk)return cv;Qk=1;var e=ja(),t=tr(),n=e(t,"Map");return cv=n,cv}var uv,Jk;function Yd(){if(Jk)return uv;Jk=1;var e=ja(),t=e(Object,"create");return uv=t,uv}var dv,Gk;function uK(){if(Gk)return dv;Gk=1;var e=Yd();function t(){this.__data__=e?e(null):{},this.size=0}return dv=t,dv}var fv,Zk;function dK(){if(Zk)return fv;Zk=1;function e(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}return fv=e,fv}var pv,eP;function fK(){if(eP)return pv;eP=1;var e=Yd(),t="__lodash_hash_undefined__",n=Object.prototype,r=n.hasOwnProperty;function o(a){var i=this.__data__;if(e){var s=i[a];return s===t?void 0:s}return r.call(i,a)?i[a]:void 0}return pv=o,pv}var hv,tP;function pK(){if(tP)return hv;tP=1;var e=Yd(),t=Object.prototype,n=t.hasOwnProperty;function r(o){var a=this.__data__;return e?a[o]!==void 0:n.call(a,o)}return hv=r,hv}var mv,nP;function hK(){if(nP)return mv;nP=1;var e=Yd(),t="__lodash_hash_undefined__";function n(r,o){var a=this.__data__;return this.size+=this.has(r)?0:1,a[r]=e&&o===void 0?t:o,this}return mv=n,mv}var yv,rP;function mK(){if(rP)return yv;rP=1;var e=uK(),t=dK(),n=fK(),r=pK(),o=hK();function a(i){var s=-1,c=i==null?0:i.length;for(this.clear();++s<c;){var l=i[s];this.set(l[0],l[1])}}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=n,a.prototype.has=r,a.prototype.set=o,yv=a,yv}var gv,oP;function yK(){if(oP)return gv;oP=1;var e=mK(),t=qd(),n=lv();function r(){this.size=0,this.__data__={hash:new e,map:new(n||t),string:new e}}return gv=r,gv}var vv,aP;function gK(){if(aP)return vv;aP=1;function e(t){var n=typeof t;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?t!=="__proto__":t===null}return vv=e,vv}var bv,iP;function Kd(){if(iP)return bv;iP=1;var e=gK();function t(n,r){var o=n.__data__;return e(r)?o[typeof r=="string"?"string":"hash"]:o.map}return bv=t,bv}var xv,sP;function vK(){if(sP)return xv;sP=1;var e=Kd();function t(n){var r=e(this,n).delete(n);return this.size-=r?1:0,r}return xv=t,xv}var wv,cP;function bK(){if(cP)return wv;cP=1;var e=Kd();function t(n){return e(this,n).get(n)}return wv=t,wv}var _v,lP;function xK(){if(lP)return _v;lP=1;var e=Kd();function t(n){return e(this,n).has(n)}return _v=t,_v}var jv,uP;function wK(){if(uP)return jv;uP=1;var e=Kd();function t(n,r){var o=e(this,n),a=o.size;return o.set(n,r),this.size+=o.size==a?0:1,this}return jv=t,jv}var Ev,dP;function Sv(){if(dP)return Ev;dP=1;var e=yK(),t=vK(),n=bK(),r=xK(),o=wK();function a(i){var s=-1,c=i==null?0:i.length;for(this.clear();++s<c;){var l=i[s];this.set(l[0],l[1])}}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=n,a.prototype.has=r,a.prototype.set=o,Ev=a,Ev}var Cv,fP;function _K(){if(fP)return Cv;fP=1;var e=qd(),t=lv(),n=Sv(),r=200;function o(a,i){var s=this.__data__;if(s instanceof e){var c=s.__data__;if(!t||c.length<r-1)return c.push([a,i]),this.size=++s.size,this;s=this.__data__=new n(c)}return s.set(a,i),this.size=s.size,this}return Cv=o,Cv}var Ov,pP;zm=function(){if(pP)return Ov;pP=1;var e=qd(),t=eK(),n=tK(),r=nK(),o=rK(),a=_K();function i(s){var c=this.__data__=new e(s);this.size=c.size}return i.prototype.clear=t,i.prototype.delete=n,i.prototype.get=r,i.prototype.has=o,i.prototype.set=a,Ov=i,Ov};var Mv,hP;function jK(){if(hP)return Mv;hP=1;var e="__lodash_hash_undefined__";function t(n){return this.__data__.set(n,e),this}return Mv=t,Mv}var Nv,mP;function EK(){if(mP)return Nv;mP=1;function e(t){return this.__data__.has(t)}return Nv=e,Nv}var kv,yP;function gP(){if(yP)return kv;yP=1;var e=Sv(),t=jK(),n=EK();function r(o){var a=-1,i=o==null?0:o.length;for(this.__data__=new e;++a<i;)this.add(o[a])}return r.prototype.add=r.prototype.push=t,r.prototype.has=n,kv=r,kv}var Pv,vP;function bP(){if(vP)return Pv;vP=1;function e(t,n){for(var r=-1,o=t==null?0:t.length;++r<o;)if(n(t[r],r,t))return!0;return!1}return Pv=e,Pv}var Av,xP;function wP(){if(xP)return Av;xP=1;function e(t,n){return t.has(n)}return Av=e,Av}var Tv,_P;function jP(){if(_P)return Tv;_P=1;var e=gP(),t=bP(),n=wP(),r=1,o=2;function a(i,s,c,l,u,d){var f=c&r,p=i.length,y=s.length;if(p!=y&&!(f&&y>p))return!1;var m=d.get(i),v=d.get(s);if(m&&v)return m==s&&v==i;var b=-1,x=!0,_=c&o?new e:void 0;for(d.set(i,s),d.set(s,i);++b<p;){var w=i[b],j=s[b];if(l)var E=f?l(j,w,b,s,i,d):l(w,j,b,i,s,d);if(E!==void 0){if(E)continue;x=!1;break}if(_){if(!t(s,function(S,O){if(!n(_,O)&&(w===S||u(w,S,c,l,d)))return _.push(O)})){x=!1;break}}else if(!(w===j||u(w,j,c,l,d))){x=!1;break}}return d.delete(i),d.delete(s),x}return Tv=a,Tv}var Rv,EP;fS=function(){if(EP)return Rv;EP=1;var e=tr(),t=e.Uint8Array;return Rv=t,Rv};var Iv,SP;function SK(){if(SP)return Iv;SP=1;function e(t){var n=-1,r=Array(t.size);return t.forEach(function(o,a){r[++n]=[a,o]}),r}return Iv=e,Iv}var Dv,CP;function Lv(){if(CP)return Dv;CP=1;function e(t){var n=-1,r=Array(t.size);return t.forEach(function(o){r[++n]=o}),r}return Dv=e,Dv}var Fv,OP;function CK(){if(OP)return Fv;OP=1;var e=li(),t=fS(),n=Gs(),r=jP(),o=SK(),a=Lv(),i=1,s=2,c="[object Boolean]",l="[object Date]",u="[object Error]",d="[object Map]",f="[object Number]",p="[object RegExp]",y="[object Set]",m="[object String]",v="[object Symbol]",b="[object ArrayBuffer]",x="[object DataView]",_=e?e.prototype:void 0,w=_?_.valueOf:void 0;function j(E,S,O,P,M,k,R){switch(O){case x:if(E.byteLength!=S.byteLength||E.byteOffset!=S.byteOffset)return!1;E=E.buffer,S=S.buffer;case b:return!(E.byteLength!=S.byteLength||!k(new t(E),new t(S)));case c:case l:case f:return n(+E,+S);case u:return E.name==S.name&&E.message==S.message;case p:case m:return E==S+"";case d:var A=o;case y:var C=P&i;if(A||(A=a),E.size!=S.size&&!C)return!1;var N=R.get(E);if(N)return N==S;P|=s,R.set(E,S);var T=r(A(E),A(S),P,M,k,R);return R.delete(E),T;case v:if(w)return w.call(E)==w.call(S)}return!1}return Fv=j,Fv}var Bv,MP;function $v(){if(MP)return Bv;MP=1;function e(t,n){for(var r=-1,o=n.length,a=t.length;++r<o;)t[a+r]=n[r];return t}return Bv=e,Bv}var zv,NP;un=function(){if(NP)return zv;NP=1;var e=Array.isArray;return zv=e,zv};var Vv,kP;function PP(){if(kP)return Vv;kP=1;var e=$v(),t=un();function n(r,o,a){var i=o(r);return t(r)?i:e(i,a(r))}return Vv=n,Vv}var Uv,AP;function OK(){if(AP)return Uv;AP=1;function e(t,n){for(var r=-1,o=t==null?0:t.length,a=0,i=[];++r<o;){var s=t[r];n(s,r,t)&&(i[a++]=s)}return i}return Uv=e,Uv}var Hv,TP;function RP(){if(TP)return Hv;TP=1;function e(){return[]}return Hv=e,Hv}var Wv,IP;Lm=function(){if(IP)return Wv;IP=1;var e=OK(),t=RP(),n=Object.prototype,r=n.propertyIsEnumerable,o=Object.getOwnPropertySymbols,a=o?function(i){return i==null?[]:(i=Object(i),e(o(i),function(s){return r.call(i,s)}))}:t;return Wv=a,Wv};var qv,DP;function MK(){if(DP)return qv;DP=1;function e(t,n){for(var r=-1,o=Array(t);++r<t;)o[r]=n(r);return o}return qv=e,qv}var Yv,LP;Sr=function(){if(LP)return Yv;LP=1;function e(t){return t!=null&&typeof t=="object"}return Yv=e,Yv};var Kv,FP;function NK(){if(FP)return Kv;FP=1;var e=co(),t=Sr(),n="[object Arguments]";function r(o){return t(o)&&e(o)==n}return Kv=r,Kv}var Xv,BP;Fu=function(){if(BP)return Xv;BP=1;var e=NK(),t=Sr(),n=Object.prototype,r=n.hasOwnProperty,o=n.propertyIsEnumerable,a=e(function(){return arguments}())?e:function(i){return t(i)&&r.call(i,"callee")&&!o.call(i,"callee")};return Xv=a,Xv};var Xd={exports:{}},Qv,$P;function kK(){if($P)return Qv;$P=1;function e(){return!1}return Qv=e,Qv}Xd.exports;var zP;Vm=function(){return zP||(zP=1,function(e,t){var n=tr(),r=kK(),o=t&&!t.nodeType&&t,a=o&&!0&&e&&!e.nodeType&&e,i=a&&a.exports===o,s=i?n.Buffer:void 0,c=s?s.isBuffer:void 0,l=c||r;e.exports=l}(Xd,Xd.exports)),Xd.exports};var Jv,VP;function Qd(){if(VP)return Jv;VP=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function n(r,o){var a=typeof r;return o=o??e,!!o&&(a=="number"||a!="symbol"&&t.test(r))&&r>-1&&r%1==0&&r<o}return Jv=n,Jv}var Gv,UP;function Zv(){if(UP)return Gv;UP=1;var e=9007199254740991;function t(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=e}return Gv=t,Gv}var e0,HP;function PK(){if(HP)return e0;HP=1;var e=co(),t=Zv(),n=Sr(),r="[object Arguments]",o="[object Array]",a="[object Boolean]",i="[object Date]",s="[object Error]",c="[object Function]",l="[object Map]",u="[object Number]",d="[object Object]",f="[object RegExp]",p="[object Set]",y="[object String]",m="[object WeakMap]",v="[object ArrayBuffer]",b="[object DataView]",x="[object Float32Array]",_="[object Float64Array]",w="[object Int8Array]",j="[object Int16Array]",E="[object Int32Array]",S="[object Uint8Array]",O="[object Uint8ClampedArray]",P="[object Uint16Array]",M="[object Uint32Array]",k={};k[x]=k[_]=k[w]=k[j]=k[E]=k[S]=k[O]=k[P]=k[M]=!0,k[r]=k[o]=k[v]=k[a]=k[b]=k[i]=k[s]=k[c]=k[l]=k[u]=k[d]=k[f]=k[p]=k[y]=k[m]=!1;function R(A){return n(A)&&t(A.length)&&!!k[e(A)]}return e0=R,e0}var t0,WP;$m=function(){if(WP)return t0;WP=1;function e(t){return function(n){return t(n)}}return t0=e,t0};var Jd={exports:{}};Jd.exports;var qP;hS=function(){return qP||(qP=1,function(e,t){var n=Ik(),r=t&&!t.nodeType&&t,o=r&&!0&&e&&!e.nodeType&&e,a=o&&o.exports===r,i=a&&n.process,s=function(){try{var c=o&&o.require&&o.require("util").types;return c||i&&i.binding&&i.binding("util")}catch{}}();e.exports=s}(Jd,Jd.exports)),Jd.exports};var n0,YP;Hh=function(){if(YP)return n0;YP=1;var e=PK(),t=$m(),n=hS(),r=n&&n.isTypedArray,o=r?t(r):e;return n0=o,n0};var r0,KP;function XP(){if(KP)return r0;KP=1;var e=MK(),t=Fu(),n=un(),r=Vm(),o=Qd(),a=Hh(),i=Object.prototype,s=i.hasOwnProperty;function c(l,u){var d=n(l),f=!d&&t(l),p=!d&&!f&&r(l),y=!d&&!f&&!p&&a(l),m=d||f||p||y,v=m?e(l.length,String):[],b=v.length;for(var x in l)(u||s.call(l,x))&&!(m&&(x=="length"||p&&(x=="offset"||x=="parent")||y&&(x=="buffer"||x=="byteLength"||x=="byteOffset")||o(x,b)))&&v.push(x);return v}return r0=c,r0}var o0,QP;Bm=function(){if(QP)return o0;QP=1;var e=Object.prototype;function t(n){var r=n&&n.constructor,o=typeof r=="function"&&r.prototype||e;return n===o}return o0=t,o0};var a0,JP;function GP(){if(JP)return a0;JP=1;function e(t,n){return function(r){return t(n(r))}}return a0=e,a0}var i0,ZP;function AK(){if(ZP)return i0;ZP=1;var e=GP(),t=e(Object.keys,Object);return i0=t,i0}var s0,eA;function TK(){if(eA)return s0;eA=1;var e=Bm(),t=AK(),n=Object.prototype,r=n.hasOwnProperty;function o(a){if(!e(a))return t(a);var i=[];for(var s in Object(a))r.call(a,s)&&s!="constructor"&&i.push(s);return i}return s0=o,s0}var c0,tA;fa=function(){if(tA)return c0;tA=1;var e=Bu(),t=Zv();function n(r){return r!=null&&t(r.length)&&!e(r)}return c0=n,c0};var l0,nA;rc=function(){if(nA)return l0;nA=1;var e=XP(),t=TK(),n=fa();function r(o){return n(o)?e(o):t(o)}return l0=r,l0};var u0,rA;mS=function(){if(rA)return u0;rA=1;var e=PP(),t=Lm(),n=rc();function r(o){return e(o,n,t)}return u0=r,u0};var d0,oA;function RK(){if(oA)return d0;oA=1;var e=mS(),t=1,n=Object.prototype,r=n.hasOwnProperty;function o(a,i,s,c,l,u){var d=s&t,f=e(a),p=f.length,y=e(i),m=y.length;if(p!=m&&!d)return!1;for(var v=p;v--;){var b=f[v];if(!(d?b in i:r.call(i,b)))return!1}var x=u.get(a),_=u.get(i);if(x&&_)return x==i&&_==a;var w=!0;u.set(a,i),u.set(i,a);for(var j=d;++v<p;){b=f[v];var E=a[b],S=i[b];if(c)var O=d?c(S,E,b,i,a,u):c(E,S,b,a,i,u);if(!(O===void 0?E===S||l(E,S,s,c,u):O)){w=!1;break}j||(j=b=="constructor")}if(w&&!j){var P=a.constructor,M=i.constructor;P!=M&&"constructor"in a&&"constructor"in i&&!(typeof P=="function"&&P instanceof P&&typeof M=="function"&&M instanceof M)&&(w=!1)}return u.delete(a),u.delete(i),w}return d0=o,d0}var f0,aA;function IK(){if(aA)return f0;aA=1;var e=ja(),t=tr(),n=e(t,"DataView");return f0=n,f0}var p0,iA;function DK(){if(iA)return p0;iA=1;var e=ja(),t=tr(),n=e(t,"Promise");return p0=n,p0}var h0,sA;function cA(){if(sA)return h0;sA=1;var e=ja(),t=tr(),n=e(t,"Set");return h0=n,h0}var m0,lA;function LK(){if(lA)return m0;lA=1;var e=ja(),t=tr(),n=e(t,"WeakMap");return m0=n,m0}var y0,uA;pS=function(){if(uA)return y0;uA=1;var e=IK(),t=lv(),n=DK(),r=cA(),o=LK(),a=co(),i=qk(),s="[object Map]",c="[object Object]",l="[object Promise]",u="[object Set]",d="[object WeakMap]",f="[object DataView]",p=i(e),y=i(t),m=i(n),v=i(r),b=i(o),x=a;return(e&&x(new e(new ArrayBuffer(1)))!=f||t&&x(new t)!=s||n&&x(n.resolve())!=l||r&&x(new r)!=u||o&&x(new o)!=d)&&(x=function(_){var w=a(_),j=w==c?_.constructor:void 0,E=j?i(j):"";if(E)switch(E){case p:return f;case y:return s;case m:return l;case v:return u;case b:return d}return w}),y0=x,y0};var g0,dA;function FK(){if(dA)return g0;dA=1;var e=zm(),t=jP(),n=CK(),r=RK(),o=pS(),a=un(),i=Vm(),s=Hh(),c=1,l="[object Arguments]",u="[object Array]",d="[object Object]",f=Object.prototype,p=f.hasOwnProperty;function y(m,v,b,x,_,w){var j=a(m),E=a(v),S=j?u:o(m),O=E?u:o(v);S=S==l?d:S,O=O==l?d:O;var P=S==d,M=O==d,k=S==O;if(k&&i(m)){if(!i(v))return!1;j=!0,P=!1}if(k&&!P)return w||(w=new e),j||s(m)?t(m,v,b,x,_,w):n(m,v,S,b,x,_,w);if(!(b&c)){var R=P&&p.call(m,"__wrapped__"),A=M&&p.call(v,"__wrapped__");if(R||A){var C=R?m.value():m,N=A?v.value():v;return w||(w=new e),_(C,N,b,x,w)}}return k?(w||(w=new e),r(m,v,b,x,_,w)):!1}return g0=y,g0}var v0,fA;function b0(){if(fA)return v0;fA=1;var e=FK(),t=Sr();function n(r,o,a,i,s){return r===o?!0:r==null||o==null||!t(r)&&!t(o)?r!==r&&o!==o:e(r,o,a,i,n,s)}return v0=n,v0}var x0,pA;function BK(){if(pA)return x0;pA=1;var e=zm(),t=b0(),n=1,r=2;function o(a,i,s,c){var l=s.length,u=l,d=!c;if(a==null)return!u;for(a=Object(a);l--;){var f=s[l];if(d&&f[2]?f[1]!==a[f[0]]:!(f[0]in a))return!1}for(;++l<u;){f=s[l];var p=f[0],y=a[p],m=f[1];if(d&&f[2]){if(y===void 0&&!(p in a))return!1}else{var v=new e;if(c)var b=c(y,m,p,a,i,v);if(!(b===void 0?t(m,y,n|r,c,v):b))return!1}}return!0}return x0=o,x0}var w0,hA;function mA(){if(hA)return w0;hA=1;var e=nr();function t(n){return n===n&&!e(n)}return w0=t,w0}var _0,yA;function $K(){if(yA)return _0;yA=1;var e=mA(),t=rc();function n(r){for(var o=t(r),a=o.length;a--;){var i=o[a],s=r[i];o[a]=[i,s,e(s)]}return o}return _0=n,_0}var j0,gA;function vA(){if(gA)return j0;gA=1;function e(t,n){return function(r){return r==null?!1:r[t]===n&&(n!==void 0||t in Object(r))}}return j0=e,j0}var E0,bA;function zK(){if(bA)return E0;bA=1;var e=BK(),t=$K(),n=vA();function r(o){var a=t(o);return a.length==1&&a[0][2]?n(a[0][0],a[0][1]):function(i){return i===o||e(i,o,a)}}return E0=r,E0}var S0,xA;function Di(){if(xA)return S0;xA=1;var e=co(),t=Sr(),n="[object Symbol]";function r(o){return typeof o=="symbol"||t(o)&&e(o)==n}return S0=r,S0}var C0,wA;function O0(){if(wA)return C0;wA=1;var e=un(),t=Di(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function o(a,i){if(e(a))return!1;var s=typeof a;return s=="number"||s=="symbol"||s=="boolean"||a==null||t(a)?!0:r.test(a)||!n.test(a)||i!=null&&a in Object(i)}return C0=o,C0}var M0,_A;function jA(){if(_A)return M0;_A=1;var e=Sv(),t="Expected a function";function n(r,o){if(typeof r!="function"||o!=null&&typeof o!="function")throw new TypeError(t);var a=function(){var i=arguments,s=o?o.apply(this,i):i[0],c=a.cache;if(c.has(s))return c.get(s);var l=r.apply(this,i);return a.cache=c.set(s,l)||c,l};return a.cache=new(n.Cache||e),a}return n.Cache=e,M0=n,M0}var N0,EA;function VK(){if(EA)return N0;EA=1;var e=jA(),t=500;function n(r){var o=e(r,function(i){return a.size===t&&a.clear(),i}),a=o.cache;return o}return N0=n,N0}var k0,SA;function UK(){if(SA)return k0;SA=1;var e=VK(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,r=e(function(o){var a=[];return o.charCodeAt(0)===46&&a.push(""),o.replace(t,function(i,s,c,l){a.push(c?l.replace(n,"$1"):s||i)}),a});return k0=r,k0}var P0,CA;Js=function(){if(CA)return P0;CA=1;function e(t,n){for(var r=-1,o=t==null?0:t.length,a=Array(o);++r<o;)a[r]=n(t[r],r,t);return a}return P0=e,P0};var A0,OA;function HK(){if(OA)return A0;OA=1;var e=li(),t=Js(),n=un(),r=Di(),o=1/0,a=e?e.prototype:void 0,i=a?a.toString:void 0;function s(c){if(typeof c=="string")return c;if(n(c))return t(c,s)+"";if(r(c))return i?i.call(c):"";var l=c+"";return l=="0"&&1/c==-o?"-0":l}return A0=s,A0}var T0,MA;function NA(){if(MA)return T0;MA=1;var e=HK();function t(n){return n==null?"":e(n)}return T0=t,T0}var R0,kA;ic=function(){if(kA)return R0;kA=1;var e=un(),t=O0(),n=UK(),r=NA();function o(a,i){return e(a)?a:t(a,i)?[a]:n(r(a))}return R0=o,R0};var I0,PA;ui=function(){if(PA)return I0;PA=1;var e=Di(),t=1/0;function n(r){if(typeof r=="string"||e(r))return r;var o=r+"";return o=="0"&&1/r==-t?"-0":o}return I0=n,I0};var D0,AA;ac=function(){if(AA)return D0;AA=1;var e=ic(),t=ui();function n(r,o){o=e(o,r);for(var a=0,i=o.length;r!=null&&a<i;)r=r[t(o[a++])];return a&&a==i?r:void 0}return D0=n,D0};var L0,TA;function RA(){if(TA)return L0;TA=1;var e=ac();function t(n,r,o){var a=n==null?void 0:e(n,r);return a===void 0?o:a}return L0=t,L0}var F0,IA;function WK(){if(IA)return F0;IA=1;function e(t,n){return t!=null&&n in Object(t)}return F0=e,F0}var B0,DA;function qK(){if(DA)return B0;DA=1;var e=ic(),t=Fu(),n=un(),r=Qd(),o=Zv(),a=ui();function i(s,c,l){c=e(c,s);for(var u=-1,d=c.length,f=!1;++u<d;){var p=a(c[u]);if(!(f=s!=null&&l(s,p)))break;s=s[p]}return f||++u!=d?f:(d=s==null?0:s.length,!!d&&o(d)&&r(p,d)&&(n(s)||t(s)))}return B0=i,B0}var $0,LA;IE=function(){if(LA)return $0;LA=1;var e=WK(),t=qK();function n(r,o){return r!=null&&t(r,o,e)}return $0=n,$0};var z0,FA;function YK(){if(FA)return z0;FA=1;var e=b0(),t=RA(),n=IE(),r=O0(),o=mA(),a=vA(),i=ui(),s=1,c=2;function l(u,d){return r(u)&&o(d)?a(i(u),d):function(f){var p=t(f,u);return p===void 0&&p===d?n(f,u):e(d,p,s|c)}}return z0=l,z0}var V0,BA;function Li(){if(BA)return V0;BA=1;function e(t){return t}return V0=e,V0}var U0,$A;function KK(){if($A)return U0;$A=1;function e(t){return function(n){return n==null?void 0:n[t]}}return U0=e,U0}var H0,zA;function XK(){if(zA)return H0;zA=1;var e=ac();function t(n){return function(r){return e(r,n)}}return H0=t,H0}var W0,VA;function QK(){if(VA)return W0;VA=1;var e=KK(),t=XK(),n=O0(),r=ui();function o(a){return n(a)?e(r(a)):t(a)}return W0=o,W0}var q0,UA;function kr(){if(UA)return q0;UA=1;var e=zK(),t=YK(),n=Li(),r=un(),o=QK();function a(i){return typeof i=="function"?i:i==null?n:typeof i=="object"?r(i)?t(i[0],i[1]):e(i):o(i)}return q0=a,q0}var Y0,HA;function JK(){if(HA)return Y0;HA=1;var e="Expected a function";function t(n){if(typeof n!="function")throw new TypeError(e);return function(){var r=arguments;switch(r.length){case 0:return!n.call(this);case 1:return!n.call(this,r[0]);case 2:return!n.call(this,r[0],r[1]);case 3:return!n.call(this,r[0],r[1],r[2])}return!n.apply(this,r)}}return Y0=t,Y0}var K0,WA;function qA(){if(WA)return K0;WA=1;var e=ja(),t=function(){try{var n=e(Object,"defineProperty");return n({},"",{}),n}catch{}}();return K0=t,K0}var X0,YA;qh=function(){if(YA)return X0;YA=1;var e=qA();function t(n,r,o){r=="__proto__"&&e?e(n,r,{configurable:!0,enumerable:!0,value:o,writable:!0}):n[r]=o}return X0=t,X0};var Q0,KA;yS=function(){if(KA)return Q0;KA=1;var e=qh(),t=Gs(),n=Object.prototype,r=n.hasOwnProperty;function o(a,i,s){var c=a[i];(!(r.call(a,i)&&t(c,s))||s===void 0&&!(i in a))&&e(a,i,s)}return Q0=o,Q0};var J0,XA;function GK(){if(XA)return J0;XA=1;var e=yS(),t=ic(),n=Qd(),r=nr(),o=ui();function a(i,s,c,l){if(!r(i))return i;s=t(s,i);for(var u=-1,d=s.length,f=d-1,p=i;p!=null&&++u<d;){var y=o(s[u]),m=c;if(y==="__proto__"||y==="constructor"||y==="prototype")return i;if(u!=f){var v=p[y];m=l?l(v,y,p):void 0,m===void 0&&(m=r(v)?v:n(s[u+1])?[]:{})}e(p,y,m),p=p[y]}return i}return J0=a,J0}var G0,QA;RE=function(){if(QA)return G0;QA=1;var e=ac(),t=GK(),n=ic();function r(o,a,i){for(var s=-1,c=a.length,l={};++s<c;){var u=a[s],d=e(o,u);i(d,u)&&t(l,n(u,o),d)}return l}return G0=r,G0};var Z0,JA;Fm=function(){if(JA)return Z0;JA=1;var e=GP(),t=e(Object.getPrototypeOf,Object);return Z0=t,Z0};var eb,GA;dS=function(){if(GA)return eb;GA=1;var e=$v(),t=Fm(),n=Lm(),r=RP(),o=Object.getOwnPropertySymbols,a=o?function(i){for(var s=[];i;)e(s,n(i)),i=t(i);return s}:r;return eb=a,eb};var tb,ZA;function ZK(){if(ZA)return tb;ZA=1;function e(t){var n=[];if(t!=null)for(var r in Object(t))n.push(r);return n}return tb=e,tb}var nb,e2;function eX(){if(e2)return nb;e2=1;var e=nr(),t=Bm(),n=ZK(),r=Object.prototype,o=r.hasOwnProperty;function a(i){if(!e(i))return n(i);var s=t(i),c=[];for(var l in i)l=="constructor"&&(s||!o.call(i,l))||c.push(l);return c}return nb=a,nb}var rb,t2;uS=function(){if(t2)return rb;t2=1;var e=XP(),t=eX(),n=fa();function r(o){return n(o)?e(o,!0):t(o)}return rb=r,rb};var ob,n2;gS=function(){if(n2)return ob;n2=1;var e=PP(),t=dS(),n=uS();function r(o){return e(o,n,t)}return ob=r,ob};var ab,r2;function tX(){if(r2)return ab;r2=1;var e=Js(),t=kr(),n=RE(),r=gS();function o(a,i){if(a==null)return{};var s=e(r(a),function(c){return[c]});return i=t(i),n(a,s,function(c,l){return i(c,l[0])})}return ab=o,ab}var ib,o2;function nX(){if(o2)return ib;o2=1;var e=kr(),t=JK(),n=tX();function r(o,a){return n(o,t(e(a)))}return ib=r,ib}var rX=nX();const Kc=Xe(rX);var sb,a2;function oX(){if(a2)return sb;a2=1;function e(t){return t===void 0}return sb=e,sb}var aX=oX();const Xc=Xe(aX);function It(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=It(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var iX={value:()=>{}};function Gd(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Zd(n)}function Zd(e){this._=e}function sX(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",o=n.indexOf(".");if(o>=0&&(r=n.slice(o+1),n=n.slice(0,o)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Zd.prototype=Gd.prototype={constructor:Zd,on:function(e,t){var n=this._,r=sX(e+"",n),o,a=-1,i=r.length;if(arguments.length<2){for(;++a<i;)if((o=(e=r[a]).type)&&(o=cX(n[o],e.name)))return o;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<i;)if(o=(e=r[a]).type)n[o]=i2(n[o],e.name,t);else if(t==null)for(o in n)n[o]=i2(n[o],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Zd(e)},call:function(e,t){if((o=arguments.length-2)>0)for(var n=new Array(o),r=0,o,a;r<o;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],r=0,o=a.length;r<o;++r)a[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],o=0,a=r.length;o<a;++o)r[o].value.apply(t,n)}};function cX(e,t){for(var n=0,r=e.length,o;n<r;++n)if((o=e[n]).name===t)return o.value}function i2(e,t,n){for(var r=0,o=e.length;r<o;++r)if(e[r].name===t){e[r]=iX,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var cb="http://www.w3.org/1999/xhtml";const s2={svg:"http://www.w3.org/2000/svg",xhtml:cb,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ef(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),s2.hasOwnProperty(t)?{space:s2[t],local:e}:e}function lX(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===cb&&t.documentElement.namespaceURI===cb?t.createElement(e):t.createElementNS(n,e)}}function uX(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function c2(e){var t=ef(e);return(t.local?uX:lX)(t)}function dX(){}function lb(e){return e==null?dX:function(){return this.querySelector(e)}}function fX(e){typeof e!="function"&&(e=lb(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var a=t[o],i=a.length,s=r[o]=new Array(i),c,l,u=0;u<i;++u)(c=a[u])&&(l=e.call(c,c.__data__,u,a))&&("__data__"in c&&(l.__data__=c.__data__),s[u]=l);return new Dn(r,this._parents)}function pX(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function hX(){return[]}function l2(e){return e==null?hX:function(){return this.querySelectorAll(e)}}function mX(e){return function(){return pX(e.apply(this,arguments))}}function yX(e){typeof e=="function"?e=mX(e):e=l2(e);for(var t=this._groups,n=t.length,r=[],o=[],a=0;a<n;++a)for(var i=t[a],s=i.length,c,l=0;l<s;++l)(c=i[l])&&(r.push(e.call(c,c.__data__,l,i)),o.push(c));return new Dn(r,o)}function u2(e){return function(){return this.matches(e)}}function d2(e){return function(t){return t.matches(e)}}var gX=Array.prototype.find;function vX(e){return function(){return gX.call(this.children,e)}}function bX(){return this.firstElementChild}function xX(e){return this.select(e==null?bX:vX(typeof e=="function"?e:d2(e)))}var wX=Array.prototype.filter;function _X(){return Array.from(this.children)}function jX(e){return function(){return wX.call(this.children,e)}}function EX(e){return this.selectAll(e==null?_X:jX(typeof e=="function"?e:d2(e)))}function SX(e){typeof e!="function"&&(e=u2(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var a=t[o],i=a.length,s=r[o]=[],c,l=0;l<i;++l)(c=a[l])&&e.call(c,c.__data__,l,a)&&s.push(c);return new Dn(r,this._parents)}function f2(e){return new Array(e.length)}function CX(){return new Dn(this._enter||this._groups.map(f2),this._parents)}function tf(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}tf.prototype={constructor:tf,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function OX(e){return function(){return e}}function MX(e,t,n,r,o,a){for(var i=0,s,c=t.length,l=a.length;i<l;++i)(s=t[i])?(s.__data__=a[i],r[i]=s):n[i]=new tf(e,a[i]);for(;i<c;++i)(s=t[i])&&(o[i]=s)}function NX(e,t,n,r,o,a,i){var s,c,l=new Map,u=t.length,d=a.length,f=new Array(u),p;for(s=0;s<u;++s)(c=t[s])&&(f[s]=p=i.call(c,c.__data__,s,t)+"",l.has(p)?o[s]=c:l.set(p,c));for(s=0;s<d;++s)p=i.call(e,a[s],s,a)+"",(c=l.get(p))?(r[s]=c,c.__data__=a[s],l.delete(p)):n[s]=new tf(e,a[s]);for(s=0;s<u;++s)(c=t[s])&&l.get(f[s])===c&&(o[s]=c)}function kX(e){return e.__data__}function PX(e,t){if(!arguments.length)return Array.from(this,kX);var n=t?NX:MX,r=this._parents,o=this._groups;typeof e!="function"&&(e=OX(e));for(var a=o.length,i=new Array(a),s=new Array(a),c=new Array(a),l=0;l<a;++l){var u=r[l],d=o[l],f=d.length,p=AX(e.call(u,u&&u.__data__,l,r)),y=p.length,m=s[l]=new Array(y),v=i[l]=new Array(y),b=c[l]=new Array(f);n(u,d,m,v,b,p,t);for(var x=0,_=0,w,j;x<y;++x)if(w=m[x]){for(x>=_&&(_=x+1);!(j=v[_])&&++_<y;);w._next=j||null}}return i=new Dn(i,r),i._enter=s,i._exit=c,i}function AX(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function TX(){return new Dn(this._exit||this._groups.map(f2),this._parents)}function RX(e,t,n){var r=this.enter(),o=this,a=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(o=t(o),o&&(o=o.selection())),n==null?a.remove():n(a),r&&o?r.merge(o).order():o}function IX(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,o=n.length,a=r.length,i=Math.min(o,a),s=new Array(o),c=0;c<i;++c)for(var l=n[c],u=r[c],d=l.length,f=s[c]=new Array(d),p,y=0;y<d;++y)(p=l[y]||u[y])&&(f[y]=p);for(;c<o;++c)s[c]=n[c];return new Dn(s,this._parents)}function DX(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],o=r.length-1,a=r[o],i;--o>=0;)(i=r[o])&&(a&&i.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(i,a),a=i);return this}function LX(e){e||(e=FX);function t(d,f){return d&&f?e(d.__data__,f.__data__):!d-!f}for(var n=this._groups,r=n.length,o=new Array(r),a=0;a<r;++a){for(var i=n[a],s=i.length,c=o[a]=new Array(s),l,u=0;u<s;++u)(l=i[u])&&(c[u]=l);c.sort(t)}return new Dn(o,this._parents).order()}function FX(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function BX(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function $X(){return Array.from(this)}function zX(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,a=r.length;o<a;++o){var i=r[o];if(i)return i}return null}function VX(){let e=0;for(const t of this)++e;return e}function UX(){return!this.node()}function HX(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var o=t[n],a=0,i=o.length,s;a<i;++a)(s=o[a])&&e.call(s,s.__data__,a,o);return this}function WX(e){return function(){this.removeAttribute(e)}}function qX(e){return function(){this.removeAttributeNS(e.space,e.local)}}function YX(e,t){return function(){this.setAttribute(e,t)}}function KX(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function XX(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function QX(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function JX(e,t){var n=ef(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?qX:WX:typeof t=="function"?n.local?QX:XX:n.local?KX:YX)(n,t))}function p2(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function GX(e){return function(){this.style.removeProperty(e)}}function ZX(e,t,n){return function(){this.style.setProperty(e,t,n)}}function eQ(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function tQ(e,t,n){return arguments.length>1?this.each((t==null?GX:typeof t=="function"?eQ:ZX)(e,t,n??"")):Fi(this.node(),e)}function Fi(e,t){return e.style.getPropertyValue(t)||p2(e).getComputedStyle(e,null).getPropertyValue(t)}function nQ(e){return function(){delete this[e]}}function rQ(e,t){return function(){this[e]=t}}function oQ(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function aQ(e,t){return arguments.length>1?this.each((t==null?nQ:typeof t=="function"?oQ:rQ)(e,t)):this.node()[e]}function h2(e){return e.trim().split(/^|\s+/)}function ub(e){return e.classList||new m2(e)}function m2(e){this._node=e,this._names=h2(e.getAttribute("class")||"")}m2.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function y2(e,t){for(var n=ub(e),r=-1,o=t.length;++r<o;)n.add(t[r])}function g2(e,t){for(var n=ub(e),r=-1,o=t.length;++r<o;)n.remove(t[r])}function iQ(e){return function(){y2(this,e)}}function sQ(e){return function(){g2(this,e)}}function cQ(e,t){return function(){(t.apply(this,arguments)?y2:g2)(this,e)}}function lQ(e,t){var n=h2(e+"");if(arguments.length<2){for(var r=ub(this.node()),o=-1,a=n.length;++o<a;)if(!r.contains(n[o]))return!1;return!0}return this.each((typeof t=="function"?cQ:t?iQ:sQ)(n,t))}function uQ(){this.textContent=""}function dQ(e){return function(){this.textContent=e}}function fQ(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function pQ(e){return arguments.length?this.each(e==null?uQ:(typeof e=="function"?fQ:dQ)(e)):this.node().textContent}function hQ(){this.innerHTML=""}function mQ(e){return function(){this.innerHTML=e}}function yQ(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function gQ(e){return arguments.length?this.each(e==null?hQ:(typeof e=="function"?yQ:mQ)(e)):this.node().innerHTML}function vQ(){this.nextSibling&&this.parentNode.appendChild(this)}function bQ(){return this.each(vQ)}function xQ(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function wQ(){return this.each(xQ)}function _Q(e){var t=typeof e=="function"?e:c2(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function jQ(){return null}function EQ(e,t){var n=typeof e=="function"?e:c2(e),r=t==null?jQ:typeof t=="function"?t:lb(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function SQ(){var e=this.parentNode;e&&e.removeChild(this)}function CQ(){return this.each(SQ)}function OQ(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function MQ(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function NQ(e){return this.select(e?MQ:OQ)}function kQ(e){return arguments.length?this.property("__data__",e):this.node().__data__}function PQ(e){return function(t){e.call(this,t,this.__data__)}}function AQ(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function TQ(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,o=t.length,a;n<o;++n)a=t[n],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++r]=a;++r?t.length=r:delete this.__on}}}function RQ(e,t,n){return function(){var r=this.__on,o,a=PQ(t);if(r){for(var i=0,s=r.length;i<s;++i)if((o=r[i]).type===e.type&&o.name===e.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=a,o.options=n),o.value=t;return}}this.addEventListener(e.type,a,n),o={type:e.type,name:e.name,value:t,listener:a,options:n},r?r.push(o):this.__on=[o]}}function IQ(e,t,n){var r=AQ(e+""),o,a=r.length,i;if(arguments.length<2){var s=this.node().__on;if(s){for(var c=0,l=s.length,u;c<l;++c)for(o=0,u=s[c];o<a;++o)if((i=r[o]).type===u.type&&i.name===u.name)return u.value}return}for(s=t?RQ:TQ,o=0;o<a;++o)this.each(s(r[o],t,n));return this}function v2(e,t,n){var r=p2(e),o=r.CustomEvent;typeof o=="function"?o=new o(t,n):(o=r.document.createEvent("Event"),n?(o.initEvent(t,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}function DQ(e,t){return function(){return v2(this,e,t)}}function LQ(e,t){return function(){return v2(this,e,t.apply(this,arguments))}}function FQ(e,t){return this.each((typeof t=="function"?LQ:DQ)(e,t))}function*BQ(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,a=r.length,i;o<a;++o)(i=r[o])&&(yield i)}var b2=[null];function Dn(e,t){this._groups=e,this._parents=t}function Qc(){return new Dn([[document.documentElement]],b2)}function $Q(){return this}Dn.prototype=Qc.prototype={constructor:Dn,select:fX,selectAll:yX,selectChild:xX,selectChildren:EX,filter:SX,data:PX,enter:CX,exit:TX,join:RX,merge:IX,selection:$Q,order:DX,sort:LX,call:BX,nodes:$X,node:zX,size:VX,empty:UX,each:HX,attr:JX,style:tQ,property:aQ,classed:lQ,text:pQ,html:gQ,raise:bQ,lower:wQ,append:_Q,insert:EQ,remove:CQ,clone:NQ,datum:kQ,on:IQ,dispatch:FQ,[Symbol.iterator]:BQ};function Ln(e){return typeof e=="string"?new Dn([[document.querySelector(e)]],[document.documentElement]):new Dn([[e]],b2)}function zQ(e){let t;for(;t=e.sourceEvent;)e=t;return e}function ur(e,t){if(e=zQ(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}}return[e.pageX,e.pageY]}const VQ={passive:!1},Jc={capture:!0,passive:!1};function db(e){e.stopImmediatePropagation()}function Bi(e){e.preventDefault(),e.stopImmediatePropagation()}function x2(e){var t=e.document.documentElement,n=Ln(e).on("dragstart.drag",Bi,Jc);"onselectstart"in t?n.on("selectstart.drag",Bi,Jc):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function w2(e,t){var n=e.document.documentElement,r=Ln(e).on("dragstart.drag",null);t&&(r.on("click.drag",Bi,Jc),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const nf=e=>()=>e;function fb(e,{sourceEvent:t,subject:n,target:r,identifier:o,active:a,x:i,y:s,dx:c,dy:l,dispatch:u}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:i,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:l,enumerable:!0,configurable:!0},_:{value:u}})}fb.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function UQ(e){return!e.ctrlKey&&!e.button}function HQ(){return this.parentNode}function WQ(e,t){return t??{x:e.x,y:e.y}}function qQ(){return navigator.maxTouchPoints||"ontouchstart"in this}function _2(){var e=UQ,t=HQ,n=WQ,r=qQ,o={},a=Gd("start","drag","end"),i=0,s,c,l,u,d=0;function f(w){w.on("mousedown.drag",p).filter(r).on("touchstart.drag",v).on("touchmove.drag",b,VQ).on("touchend.drag touchcancel.drag",x).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(w,j){if(!(u||!e.call(this,w,j))){var E=_(this,t.call(this,w,j),w,j,"mouse");E&&(Ln(w.view).on("mousemove.drag",y,Jc).on("mouseup.drag",m,Jc),x2(w.view),db(w),l=!1,s=w.clientX,c=w.clientY,E("start",w))}}function y(w){if(Bi(w),!l){var j=w.clientX-s,E=w.clientY-c;l=j*j+E*E>d}o.mouse("drag",w)}function m(w){Ln(w.view).on("mousemove.drag mouseup.drag",null),w2(w.view,l),Bi(w),o.mouse("end",w)}function v(w,j){if(e.call(this,w,j)){var E=w.changedTouches,S=t.call(this,w,j),O=E.length,P,M;for(P=0;P<O;++P)(M=_(this,S,w,j,E[P].identifier,E[P]))&&(db(w),M("start",w,E[P]))}}function b(w){var j=w.changedTouches,E=j.length,S,O;for(S=0;S<E;++S)(O=o[j[S].identifier])&&(Bi(w),O("drag",w,j[S]))}function x(w){var j=w.changedTouches,E=j.length,S,O;for(u&&clearTimeout(u),u=setTimeout(function(){u=null},500),S=0;S<E;++S)(O=o[j[S].identifier])&&(db(w),O("end",w,j[S]))}function _(w,j,E,S,O,P){var M=a.copy(),k=ur(P||E,j),R,A,C;if((C=n.call(w,new fb("beforestart",{sourceEvent:E,target:f,identifier:O,active:i,x:k[0],y:k[1],dx:0,dy:0,dispatch:M}),S))!=null)return R=C.x-k[0]||0,A=C.y-k[1]||0,function N(T,I,L){var D=k,B;switch(T){case"start":o[O]=N,B=i++;break;case"end":delete o[O],--i;case"drag":k=ur(L||I,j),B=i;break}M.call(T,w,new fb(T,{sourceEvent:I,subject:C,target:f,identifier:O,active:B,x:k[0]+R,y:k[1]+A,dx:k[0]-D[0],dy:k[1]-D[1],dispatch:M}),S)}}return f.filter=function(w){return arguments.length?(e=typeof w=="function"?w:nf(!!w),f):e},f.container=function(w){return arguments.length?(t=typeof w=="function"?w:nf(w),f):t},f.subject=function(w){return arguments.length?(n=typeof w=="function"?w:nf(w),f):n},f.touchable=function(w){return arguments.length?(r=typeof w=="function"?w:nf(!!w),f):r},f.on=function(){var w=a.on.apply(a,arguments);return w===a?f:w},f.clickDistance=function(w){return arguments.length?(d=(w=+w)*w,f):Math.sqrt(d)},f}function pb(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function j2(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Gc(){}var Zc=.7,rf=1/Zc,$i="\\s*([+-]?\\d+)\\s*",el="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Pr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",YQ=/^#([0-9a-f]{3,8})$/,KQ=new RegExp(`^rgb\\(${$i},${$i},${$i}\\)$`),XQ=new RegExp(`^rgb\\(${Pr},${Pr},${Pr}\\)$`),QQ=new RegExp(`^rgba\\(${$i},${$i},${$i},${el}\\)$`),JQ=new RegExp(`^rgba\\(${Pr},${Pr},${Pr},${el}\\)$`),GQ=new RegExp(`^hsl\\(${el},${Pr},${Pr}\\)$`),ZQ=new RegExp(`^hsla\\(${el},${Pr},${Pr},${el}\\)$`),E2={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};pb(Gc,Ea,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:S2,formatHex:S2,formatHex8:eJ,formatHsl:tJ,formatRgb:C2,toString:C2});function S2(){return this.rgb().formatHex()}function eJ(){return this.rgb().formatHex8()}function tJ(){return P2(this).formatHsl()}function C2(){return this.rgb().formatRgb()}function Ea(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=YQ.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?O2(t):n===3?new wn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?of(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?of(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=KQ.exec(e))?new wn(t[1],t[2],t[3],1):(t=XQ.exec(e))?new wn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=QQ.exec(e))?of(t[1],t[2],t[3],t[4]):(t=JQ.exec(e))?of(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=GQ.exec(e))?k2(t[1],t[2]/100,t[3]/100,1):(t=ZQ.exec(e))?k2(t[1],t[2]/100,t[3]/100,t[4]):E2.hasOwnProperty(e)?O2(E2[e]):e==="transparent"?new wn(NaN,NaN,NaN,0):null}function O2(e){return new wn(e>>16&255,e>>8&255,e&255,1)}function of(e,t,n,r){return r<=0&&(e=t=n=NaN),new wn(e,t,n,r)}function nJ(e){return e instanceof Gc||(e=Ea(e)),e?(e=e.rgb(),new wn(e.r,e.g,e.b,e.opacity)):new wn}function hb(e,t,n,r){return arguments.length===1?nJ(e):new wn(e,t,n,r??1)}function wn(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}pb(wn,hb,j2(Gc,{brighter(e){return e=e==null?rf:Math.pow(rf,e),new wn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Zc:Math.pow(Zc,e),new wn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new wn(Sa(this.r),Sa(this.g),Sa(this.b),af(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:M2,formatHex:M2,formatHex8:rJ,formatRgb:N2,toString:N2}));function M2(){return`#${Ca(this.r)}${Ca(this.g)}${Ca(this.b)}`}function rJ(){return`#${Ca(this.r)}${Ca(this.g)}${Ca(this.b)}${Ca((isNaN(this.opacity)?1:this.opacity)*255)}`}function N2(){const e=af(this.opacity);return`${e===1?"rgb(":"rgba("}${Sa(this.r)}, ${Sa(this.g)}, ${Sa(this.b)}${e===1?")":`, ${e})`}`}function af(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Sa(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Ca(e){return e=Sa(e),(e<16?"0":"")+e.toString(16)}function k2(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new dr(e,t,n,r)}function P2(e){if(e instanceof dr)return new dr(e.h,e.s,e.l,e.opacity);if(e instanceof Gc||(e=Ea(e)),!e)return new dr;if(e instanceof dr)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,o=Math.min(t,n,r),a=Math.max(t,n,r),i=NaN,s=a-o,c=(a+o)/2;return s?(t===a?i=(n-r)/s+(n<r)*6:n===a?i=(r-t)/s+2:i=(t-n)/s+4,s/=c<.5?a+o:2-a-o,i*=60):s=c>0&&c<1?0:i,new dr(i,s,c,e.opacity)}function oJ(e,t,n,r){return arguments.length===1?P2(e):new dr(e,t,n,r??1)}function dr(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}pb(dr,oJ,j2(Gc,{brighter(e){return e=e==null?rf:Math.pow(rf,e),new dr(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Zc:Math.pow(Zc,e),new dr(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,o=2*n-r;return new wn(mb(e>=240?e-240:e+120,o,r),mb(e,o,r),mb(e<120?e+240:e-120,o,r),this.opacity)},clamp(){return new dr(A2(this.h),sf(this.s),sf(this.l),af(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=af(this.opacity);return`${e===1?"hsl(":"hsla("}${A2(this.h)}, ${sf(this.s)*100}%, ${sf(this.l)*100}%${e===1?")":`, ${e})`}`}}));function A2(e){return e=(e||0)%360,e<0?e+360:e}function sf(e){return Math.max(0,Math.min(1,e||0))}function mb(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const yb=e=>()=>e;function aJ(e,t){return function(n){return e+n*t}}function iJ(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function sJ(e){return(e=+e)==1?T2:function(t,n){return n-t?iJ(t,n,e):yb(isNaN(t)?n:t)}}function T2(e,t){var n=t-e;return n?aJ(e,n):yb(isNaN(e)?t:e)}const cf=function e(t){var n=sJ(t);function r(o,a){var i=n((o=hb(o)).r,(a=hb(a)).r),s=n(o.g,a.g),c=n(o.b,a.b),l=T2(o.opacity,a.opacity);return function(u){return o.r=i(u),o.g=s(u),o.b=c(u),o.opacity=l(u),o+""}}return r.gamma=e,r}(1);function cJ(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),o;return function(a){for(o=0;o<n;++o)r[o]=e[o]*(1-a)+t[o]*a;return r}}function lJ(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function uJ(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,o=new Array(r),a=new Array(n),i;for(i=0;i<r;++i)o[i]=zi(e[i],t[i]);for(;i<n;++i)a[i]=t[i];return function(s){for(i=0;i<r;++i)a[i]=o[i](s);return a}}function dJ(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function fr(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function fJ(e,t){var n={},r={},o;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(o in t)o in e?n[o]=zi(e[o],t[o]):r[o]=t[o];return function(a){for(o in n)r[o]=n[o](a);return r}}var gb=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,vb=new RegExp(gb.source,"g");function pJ(e){return function(){return e}}function hJ(e){return function(t){return e(t)+""}}function R2(e,t){var n=gb.lastIndex=vb.lastIndex=0,r,o,a,i=-1,s=[],c=[];for(e=e+"",t=t+"";(r=gb.exec(e))&&(o=vb.exec(t));)(a=o.index)>n&&(a=t.slice(n,a),s[i]?s[i]+=a:s[++i]=a),(r=r[0])===(o=o[0])?s[i]?s[i]+=o:s[++i]=o:(s[++i]=null,c.push({i,x:fr(r,o)})),n=vb.lastIndex;return n<t.length&&(a=t.slice(n),s[i]?s[i]+=a:s[++i]=a),s.length<2?c[0]?hJ(c[0].x):pJ(t):(t=c.length,function(l){for(var u=0,d;u<t;++u)s[(d=c[u]).i]=d.x(l);return s.join("")})}function zi(e,t){var n=typeof t,r;return t==null||n==="boolean"?yb(t):(n==="number"?fr:n==="string"?(r=Ea(t))?(t=r,cf):R2:t instanceof Ea?cf:t instanceof Date?dJ:lJ(t)?cJ:Array.isArray(t)?uJ:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?fJ:fr)(e,t)}function bb(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var I2=180/Math.PI,D2={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function L2(e,t,n,r,o,a){var i,s,c;return(i=Math.sqrt(e*e+t*t))&&(e/=i,t/=i),(c=e*n+t*r)&&(n-=e*c,r-=t*c),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,c/=s),e*r<t*n&&(e=-e,t=-t,c=-c,i=-i),{translateX:o,translateY:a,rotate:Math.atan2(t,e)*I2,skewX:Math.atan(c)*I2,scaleX:i,scaleY:s}}var lf;function mJ(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?D2:L2(t.a,t.b,t.c,t.d,t.e,t.f)}function yJ(e){return e==null||(lf||(lf=document.createElementNS("http://www.w3.org/2000/svg","g")),lf.setAttribute("transform",e),!(e=lf.transform.baseVal.consolidate()))?D2:(e=e.matrix,L2(e.a,e.b,e.c,e.d,e.e,e.f))}function F2(e,t,n,r){function o(l){return l.length?l.pop()+" ":""}function a(l,u,d,f,p,y){if(l!==d||u!==f){var m=p.push("translate(",null,t,null,n);y.push({i:m-4,x:fr(l,d)},{i:m-2,x:fr(u,f)})}else(d||f)&&p.push("translate("+d+t+f+n)}function i(l,u,d,f){l!==u?(l-u>180?u+=360:u-l>180&&(l+=360),f.push({i:d.push(o(d)+"rotate(",null,r)-2,x:fr(l,u)})):u&&d.push(o(d)+"rotate("+u+r)}function s(l,u,d,f){l!==u?f.push({i:d.push(o(d)+"skewX(",null,r)-2,x:fr(l,u)}):u&&d.push(o(d)+"skewX("+u+r)}function c(l,u,d,f,p,y){if(l!==d||u!==f){var m=p.push(o(p)+"scale(",null,",",null,")");y.push({i:m-4,x:fr(l,d)},{i:m-2,x:fr(u,f)})}else(d!==1||f!==1)&&p.push(o(p)+"scale("+d+","+f+")")}return function(l,u){var d=[],f=[];return l=e(l),u=e(u),a(l.translateX,l.translateY,u.translateX,u.translateY,d,f),i(l.rotate,u.rotate,d,f),s(l.skewX,u.skewX,d,f),c(l.scaleX,l.scaleY,u.scaleX,u.scaleY,d,f),l=u=null,function(p){for(var y=-1,m=f.length,v;++y<m;)d[(v=f[y]).i]=v.x(p);return d.join("")}}}var gJ=F2(mJ,"px, ","px)","deg)"),vJ=F2(yJ,", ",")",")"),bJ=1e-12;function B2(e){return((e=Math.exp(e))+1/e)/2}function xJ(e){return((e=Math.exp(e))-1/e)/2}function wJ(e){return((e=Math.exp(2*e))-1)/(e+1)}const _J=function e(t,n,r){function o(a,i){var s=a[0],c=a[1],l=a[2],u=i[0],d=i[1],f=i[2],p=u-s,y=d-c,m=p*p+y*y,v,b;if(m<bJ)b=Math.log(f/l)/t,v=function(S){return[s+S*p,c+S*y,l*Math.exp(t*S*b)]};else{var x=Math.sqrt(m),_=(f*f-l*l+r*m)/(2*l*n*x),w=(f*f-l*l-r*m)/(2*f*n*x),j=Math.log(Math.sqrt(_*_+1)-_),E=Math.log(Math.sqrt(w*w+1)-w);b=(E-j)/t,v=function(S){var O=S*b,P=B2(j),M=l/(n*x)*(P*wJ(t*O+j)-xJ(j));return[s+M*p,c+M*y,l*P/B2(t*O+j)]}}return v.duration=b*1e3*t/Math.SQRT2,v}return o.rho=function(a){var i=Math.max(.001,+a),s=i*i,c=s*s;return e(i,s,c)},o}(Math.SQRT2,2,4);function jJ(e,t){t===void 0&&(t=e,e=zi);for(var n=0,r=t.length-1,o=t[0],a=new Array(r<0?0:r);n<r;)a[n]=e(o,o=t[++n]);return function(i){var s=Math.max(0,Math.min(r-1,Math.floor(i*=r)));return a[s](i-s)}}var Vi=0,tl=0,nl=0,$2=1e3,uf,rl,df=0,Oa=0,ff=0,ol=typeof performance=="object"&&performance.now?performance:Date,z2=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function xb(){return Oa||(z2(EJ),Oa=ol.now()+ff)}function EJ(){Oa=0}function pf(){this._call=this._time=this._next=null}pf.prototype=V2.prototype={constructor:pf,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?xb():+n)+(t==null?0:+t),!this._next&&rl!==this&&(rl?rl._next=this:uf=this,rl=this),this._call=e,this._time=n,wb()},stop:function(){this._call&&(this._call=null,this._time=1/0,wb())}};function V2(e,t,n){var r=new pf;return r.restart(e,t,n),r}function SJ(){xb(),++Vi;for(var e=uf,t;e;)(t=Oa-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Vi}function U2(){Oa=(df=ol.now())+ff,Vi=tl=0;try{SJ()}finally{Vi=0,OJ(),Oa=0}}function CJ(){var e=ol.now(),t=e-df;t>$2&&(ff-=t,df=e)}function OJ(){for(var e,t=uf,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:uf=n);rl=e,wb(r)}function wb(e){if(!Vi){tl&&(tl=clearTimeout(tl));var t=e-Oa;t>24?(e<1/0&&(tl=setTimeout(U2,e-ol.now()-ff)),nl&&(nl=clearInterval(nl))):(nl||(df=ol.now(),nl=setInterval(CJ,$2)),Vi=1,z2(U2))}}function H2(e,t,n){var r=new pf;return t=t==null?0:+t,r.restart(o=>{r.stop(),e(o+t)},t,n),r}var MJ=Gd("start","end","cancel","interrupt"),NJ=[],W2=0,q2=1,_b=2,hf=3,Y2=4,jb=5,mf=6;function yf(e,t,n,r,o,a){var i=e.__transition;if(!i)e.__transition={};else if(n in i)return;kJ(e,n,{name:t,index:r,group:o,on:MJ,tween:NJ,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:W2})}function Eb(e,t){var n=pr(e,t);if(n.state>W2)throw new Error("too late; already scheduled");return n}function Ar(e,t){var n=pr(e,t);if(n.state>hf)throw new Error("too late; already running");return n}function pr(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function kJ(e,t,n){var r=e.__transition,o;r[t]=n,n.timer=V2(a,0,n.time);function a(l){n.state=q2,n.timer.restart(i,n.delay,n.time),n.delay<=l&&i(l-n.delay)}function i(l){var u,d,f,p;if(n.state!==q2)return c();for(u in r)if(p=r[u],p.name===n.name){if(p.state===hf)return H2(i);p.state===Y2?(p.state=mf,p.timer.stop(),p.on.call("interrupt",e,e.__data__,p.index,p.group),delete r[u]):+u<t&&(p.state=mf,p.timer.stop(),p.on.call("cancel",e,e.__data__,p.index,p.group),delete r[u])}if(H2(function(){n.state===hf&&(n.state=Y2,n.timer.restart(s,n.delay,n.time),s(l))}),n.state=_b,n.on.call("start",e,e.__data__,n.index,n.group),n.state===_b){for(n.state=hf,o=new Array(f=n.tween.length),u=0,d=-1;u<f;++u)(p=n.tween[u].value.call(e,e.__data__,n.index,n.group))&&(o[++d]=p);o.length=d+1}}function s(l){for(var u=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(c),n.state=jb,1),d=-1,f=o.length;++d<f;)o[d].call(e,u);n.state===jb&&(n.on.call("end",e,e.__data__,n.index,n.group),c())}function c(){n.state=mf,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function gf(e,t){var n=e.__transition,r,o,a=!0,i;if(n){t=t==null?null:t+"";for(i in n){if((r=n[i]).name!==t){a=!1;continue}o=r.state>_b&&r.state<jb,r.state=mf,r.timer.stop(),r.on.call(o?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[i]}a&&delete e.__transition}}function PJ(e){return this.each(function(){gf(this,e)})}function AJ(e,t){var n,r;return function(){var o=Ar(this,e),a=o.tween;if(a!==n){r=n=a;for(var i=0,s=r.length;i<s;++i)if(r[i].name===t){r=r.slice(),r.splice(i,1);break}}o.tween=r}}function TJ(e,t,n){var r,o;if(typeof n!="function")throw new Error;return function(){var a=Ar(this,e),i=a.tween;if(i!==r){o=(r=i).slice();for(var s={name:t,value:n},c=0,l=o.length;c<l;++c)if(o[c].name===t){o[c]=s;break}c===l&&o.push(s)}a.tween=o}}function RJ(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=pr(this.node(),n).tween,o=0,a=r.length,i;o<a;++o)if((i=r[o]).name===e)return i.value;return null}return this.each((t==null?AJ:TJ)(n,e,t))}function Sb(e,t,n){var r=e._id;return e.each(function(){var o=Ar(this,r);(o.value||(o.value={}))[t]=n.apply(this,arguments)}),function(o){return pr(o,r).value[t]}}function K2(e,t){var n;return(typeof t=="number"?fr:t instanceof Ea?cf:(n=Ea(t))?(t=n,cf):R2)(e,t)}function IJ(e){return function(){this.removeAttribute(e)}}function DJ(e){return function(){this.removeAttributeNS(e.space,e.local)}}function LJ(e,t,n){var r,o=n+"",a;return function(){var i=this.getAttribute(e);return i===o?null:i===r?a:a=t(r=i,n)}}function FJ(e,t,n){var r,o=n+"",a;return function(){var i=this.getAttributeNS(e.space,e.local);return i===o?null:i===r?a:a=t(r=i,n)}}function BJ(e,t,n){var r,o,a;return function(){var i,s=n(this),c;return s==null?void this.removeAttribute(e):(i=this.getAttribute(e),c=s+"",i===c?null:i===r&&c===o?a:(o=c,a=t(r=i,s)))}}function $J(e,t,n){var r,o,a;return function(){var i,s=n(this),c;return s==null?void this.removeAttributeNS(e.space,e.local):(i=this.getAttributeNS(e.space,e.local),c=s+"",i===c?null:i===r&&c===o?a:(o=c,a=t(r=i,s)))}}function zJ(e,t){var n=ef(e),r=n==="transform"?vJ:K2;return this.attrTween(e,typeof t=="function"?(n.local?$J:BJ)(n,r,Sb(this,"attr."+e,t)):t==null?(n.local?DJ:IJ)(n):(n.local?FJ:LJ)(n,r,t))}function VJ(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function UJ(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function HJ(e,t){var n,r;function o(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&UJ(e,a)),n}return o._value=t,o}function WJ(e,t){var n,r;function o(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&VJ(e,a)),n}return o._value=t,o}function qJ(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=ef(e);return this.tween(n,(r.local?HJ:WJ)(r,t))}function YJ(e,t){return function(){Eb(this,e).delay=+t.apply(this,arguments)}}function KJ(e,t){return t=+t,function(){Eb(this,e).delay=t}}function XJ(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?YJ:KJ)(t,e)):pr(this.node(),t).delay}function QJ(e,t){return function(){Ar(this,e).duration=+t.apply(this,arguments)}}function JJ(e,t){return t=+t,function(){Ar(this,e).duration=t}}function GJ(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?QJ:JJ)(t,e)):pr(this.node(),t).duration}function ZJ(e,t){if(typeof t!="function")throw new Error;return function(){Ar(this,e).ease=t}}function eG(e){var t=this._id;return arguments.length?this.each(ZJ(t,e)):pr(this.node(),t).ease}function tG(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Ar(this,e).ease=n}}function nG(e){if(typeof e!="function")throw new Error;return this.each(tG(this._id,e))}function rG(e){typeof e!="function"&&(e=u2(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var a=t[o],i=a.length,s=r[o]=[],c,l=0;l<i;++l)(c=a[l])&&e.call(c,c.__data__,l,a)&&s.push(c);return new lo(r,this._parents,this._name,this._id)}function oG(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,o=n.length,a=Math.min(r,o),i=new Array(r),s=0;s<a;++s)for(var c=t[s],l=n[s],u=c.length,d=i[s]=new Array(u),f,p=0;p<u;++p)(f=c[p]||l[p])&&(d[p]=f);for(;s<r;++s)i[s]=t[s];return new lo(i,this._parents,this._name,this._id)}function aG(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function iG(e,t,n){var r,o,a=aG(t)?Eb:Ar;return function(){var i=a(this,e),s=i.on;s!==r&&(o=(r=s).copy()).on(t,n),i.on=o}}function sG(e,t){var n=this._id;return arguments.length<2?pr(this.node(),n).on.on(e):this.each(iG(n,e,t))}function cG(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function lG(){return this.on("end.remove",cG(this._id))}function uG(e){var t=this._name,n=this._id;typeof e!="function"&&(e=lb(e));for(var r=this._groups,o=r.length,a=new Array(o),i=0;i<o;++i)for(var s=r[i],c=s.length,l=a[i]=new Array(c),u,d,f=0;f<c;++f)(u=s[f])&&(d=e.call(u,u.__data__,f,s))&&("__data__"in u&&(d.__data__=u.__data__),l[f]=d,yf(l[f],t,n,f,l,pr(u,n)));return new lo(a,this._parents,t,n)}function dG(e){var t=this._name,n=this._id;typeof e!="function"&&(e=l2(e));for(var r=this._groups,o=r.length,a=[],i=[],s=0;s<o;++s)for(var c=r[s],l=c.length,u,d=0;d<l;++d)if(u=c[d]){for(var f=e.call(u,u.__data__,d,c),p,y=pr(u,n),m=0,v=f.length;m<v;++m)(p=f[m])&&yf(p,t,n,m,f,y);a.push(f),i.push(u)}return new lo(a,i,t,n)}var fG=Qc.prototype.constructor;function pG(){return new fG(this._groups,this._parents)}function hG(e,t){var n,r,o;return function(){var a=Fi(this,e),i=(this.style.removeProperty(e),Fi(this,e));return a===i?null:a===n&&i===r?o:o=t(n=a,r=i)}}function X2(e){return function(){this.style.removeProperty(e)}}function mG(e,t,n){var r,o=n+"",a;return function(){var i=Fi(this,e);return i===o?null:i===r?a:a=t(r=i,n)}}function yG(e,t,n){var r,o,a;return function(){var i=Fi(this,e),s=n(this),c=s+"";return s==null&&(c=s=(this.style.removeProperty(e),Fi(this,e))),i===c?null:i===r&&c===o?a:(o=c,a=t(r=i,s))}}function gG(e,t){var n,r,o,a="style."+t,i="end."+a,s;return function(){var c=Ar(this,e),l=c.on,u=c.value[a]==null?s||(s=X2(t)):void 0;(l!==n||o!==u)&&(r=(n=l).copy()).on(i,o=u),c.on=r}}function vG(e,t,n){var r=(e+="")=="transform"?gJ:K2;return t==null?this.styleTween(e,hG(e,r)).on("end.style."+e,X2(e)):typeof t=="function"?this.styleTween(e,yG(e,r,Sb(this,"style."+e,t))).each(gG(this._id,e)):this.styleTween(e,mG(e,r,t),n).on("end.style."+e,null)}function bG(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function xG(e,t,n){var r,o;function a(){var i=t.apply(this,arguments);return i!==o&&(r=(o=i)&&bG(e,i,n)),r}return a._value=t,a}function wG(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,xG(e,t,n??""))}function _G(e){return function(){this.textContent=e}}function jG(e){return function(){var t=e(this);this.textContent=t??""}}function EG(e){return this.tween("text",typeof e=="function"?jG(Sb(this,"text",e)):_G(e==null?"":e+""))}function SG(e){return function(t){this.textContent=e.call(this,t)}}function CG(e){var t,n;function r(){var o=e.apply(this,arguments);return o!==n&&(t=(n=o)&&SG(o)),t}return r._value=e,r}function OG(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,CG(e))}function MG(){for(var e=this._name,t=this._id,n=Q2(),r=this._groups,o=r.length,a=0;a<o;++a)for(var i=r[a],s=i.length,c,l=0;l<s;++l)if(c=i[l]){var u=pr(c,t);yf(c,e,n,l,i,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new lo(r,this._parents,e,n)}function NG(){var e,t,n=this,r=n._id,o=n.size();return new Promise(function(a,i){var s={value:i},c={value:function(){--o===0&&a()}};n.each(function(){var l=Ar(this,r),u=l.on;u!==e&&(t=(e=u).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(c)),l.on=t}),o===0&&a()})}var kG=0;function lo(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Q2(){return++kG}var uo=Qc.prototype;lo.prototype={constructor:lo,select:uG,selectAll:dG,selectChild:uo.selectChild,selectChildren:uo.selectChildren,filter:rG,merge:oG,selection:pG,transition:MG,call:uo.call,nodes:uo.nodes,node:uo.node,size:uo.size,empty:uo.empty,each:uo.each,on:sG,attr:zJ,attrTween:qJ,style:vG,styleTween:wG,text:EG,textTween:OG,remove:lG,tween:RJ,delay:XJ,duration:GJ,ease:eG,easeVarying:nG,end:NG,[Symbol.iterator]:uo[Symbol.iterator]};function PG(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var AG={time:null,delay:0,duration:250,ease:PG};function TG(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function RG(e){var t,n;e instanceof lo?(t=e._id,e=e._name):(t=Q2(),(n=AG).time=xb(),e=e==null?null:e+"");for(var r=this._groups,o=r.length,a=0;a<o;++a)for(var i=r[a],s=i.length,c,l=0;l<s;++l)(c=i[l])&&yf(c,e,t,l,i,n||TG(c,t));return new lo(r,this._parents,e,t)}Qc.prototype.interrupt=PJ,Qc.prototype.transition=RG;const vf=e=>()=>e;function IG(e,{sourceEvent:t,target:n,transform:r,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:o}})}function fo(e,t,n){this.k=e,this.x=t,this.y=n}fo.prototype={constructor:fo,scale:function(e){return e===1?this:new fo(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new fo(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var bf=new fo(1,0,0);J2.prototype=fo.prototype;function J2(e){for(;!e.__zoom;)if(!(e=e.parentNode))return bf;return e.__zoom}function Cb(e){e.stopImmediatePropagation()}function al(e){e.preventDefault(),e.stopImmediatePropagation()}function DG(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function LG(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function G2(){return this.__zoom||bf}function FG(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function BG(){return navigator.maxTouchPoints||"ontouchstart"in this}function $G(e,t,n){var r=e.invertX(t[0][0])-n[0][0],o=e.invertX(t[1][0])-n[1][0],a=e.invertY(t[0][1])-n[0][1],i=e.invertY(t[1][1])-n[1][1];return e.translate(o>r?(r+o)/2:Math.min(0,r)||Math.max(0,o),i>a?(a+i)/2:Math.min(0,a)||Math.max(0,i))}function Z2(){var e=DG,t=LG,n=$G,r=FG,o=BG,a=[0,1/0],i=[[-1/0,-1/0],[1/0,1/0]],s=250,c=_J,l=Gd("start","zoom","end"),u,d,f,p=500,y=150,m=0,v=10;function b(C){C.property("__zoom",G2).on("wheel.zoom",O,{passive:!1}).on("mousedown.zoom",P).on("dblclick.zoom",M).filter(o).on("touchstart.zoom",k).on("touchmove.zoom",R).on("touchend.zoom touchcancel.zoom",A).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}b.transform=function(C,N,T,I){var L=C.selection?C.selection():C;L.property("__zoom",G2),C!==L?j(C,N,T,I):L.interrupt().each(function(){E(this,arguments).event(I).start().zoom(null,typeof N=="function"?N.apply(this,arguments):N).end()})},b.scaleBy=function(C,N,T,I){b.scaleTo(C,function(){var L=this.__zoom.k,D=typeof N=="function"?N.apply(this,arguments):N;return L*D},T,I)},b.scaleTo=function(C,N,T,I){b.transform(C,function(){var L=t.apply(this,arguments),D=this.__zoom,B=T==null?w(L):typeof T=="function"?T.apply(this,arguments):T,H=D.invert(B),F=typeof N=="function"?N.apply(this,arguments):N;return n(_(x(D,F),B,H),L,i)},T,I)},b.translateBy=function(C,N,T,I){b.transform(C,function(){return n(this.__zoom.translate(typeof N=="function"?N.apply(this,arguments):N,typeof T=="function"?T.apply(this,arguments):T),t.apply(this,arguments),i)},null,I)},b.translateTo=function(C,N,T,I,L){b.transform(C,function(){var D=t.apply(this,arguments),B=this.__zoom,H=I==null?w(D):typeof I=="function"?I.apply(this,arguments):I;return n(bf.translate(H[0],H[1]).scale(B.k).translate(typeof N=="function"?-N.apply(this,arguments):-N,typeof T=="function"?-T.apply(this,arguments):-T),D,i)},I,L)};function x(C,N){return N=Math.max(a[0],Math.min(a[1],N)),N===C.k?C:new fo(N,C.x,C.y)}function _(C,N,T){var I=N[0]-T[0]*C.k,L=N[1]-T[1]*C.k;return I===C.x&&L===C.y?C:new fo(C.k,I,L)}function w(C){return[(+C[0][0]+ +C[1][0])/2,(+C[0][1]+ +C[1][1])/2]}function j(C,N,T,I){C.on("start.zoom",function(){E(this,arguments).event(I).start()}).on("interrupt.zoom end.zoom",function(){E(this,arguments).event(I).end()}).tween("zoom",function(){var L=this,D=arguments,B=E(L,D).event(I),H=t.apply(L,D),F=T==null?w(H):typeof T=="function"?T.apply(L,D):T,z=Math.max(H[1][0]-H[0][0],H[1][1]-H[0][1]),G=L.__zoom,Q=typeof N=="function"?N.apply(L,D):N,oe=c(G.invert(F).concat(z/G.k),Q.invert(F).concat(z/Q.k));return function(Z){if(Z===1)Z=Q;else{var q=oe(Z),W=z/q[2];Z=new fo(W,F[0]-q[0]*W,F[1]-q[1]*W)}B.zoom(null,Z)}})}function E(C,N,T){return!T&&C.__zooming||new S(C,N)}function S(C,N){this.that=C,this.args=N,this.active=0,this.sourceEvent=null,this.extent=t.apply(C,N),this.taps=0}S.prototype={event:function(C){return C&&(this.sourceEvent=C),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(C,N){return this.mouse&&C!=="mouse"&&(this.mouse[1]=N.invert(this.mouse[0])),this.touch0&&C!=="touch"&&(this.touch0[1]=N.invert(this.touch0[0])),this.touch1&&C!=="touch"&&(this.touch1[1]=N.invert(this.touch1[0])),this.that.__zoom=N,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(C){var N=Ln(this.that).datum();l.call(C,this.that,new IG(C,{sourceEvent:this.sourceEvent,target:b,type:C,transform:this.that.__zoom,dispatch:l}),N)}};function O(C,...N){if(!e.apply(this,arguments))return;var T=E(this,N).event(C),I=this.__zoom,L=Math.max(a[0],Math.min(a[1],I.k*Math.pow(2,r.apply(this,arguments)))),D=ur(C);if(T.wheel)(T.mouse[0][0]!==D[0]||T.mouse[0][1]!==D[1])&&(T.mouse[1]=I.invert(T.mouse[0]=D)),clearTimeout(T.wheel);else{if(I.k===L)return;T.mouse=[D,I.invert(D)],gf(this),T.start()}al(C),T.wheel=setTimeout(B,y),T.zoom("mouse",n(_(x(I,L),T.mouse[0],T.mouse[1]),T.extent,i));function B(){T.wheel=null,T.end()}}function P(C,...N){if(f||!e.apply(this,arguments))return;var T=C.currentTarget,I=E(this,N,!0).event(C),L=Ln(C.view).on("mousemove.zoom",F,!0).on("mouseup.zoom",z,!0),D=ur(C,T),B=C.clientX,H=C.clientY;x2(C.view),Cb(C),I.mouse=[D,this.__zoom.invert(D)],gf(this),I.start();function F(G){if(al(G),!I.moved){var Q=G.clientX-B,oe=G.clientY-H;I.moved=Q*Q+oe*oe>m}I.event(G).zoom("mouse",n(_(I.that.__zoom,I.mouse[0]=ur(G,T),I.mouse[1]),I.extent,i))}function z(G){L.on("mousemove.zoom mouseup.zoom",null),w2(G.view,I.moved),al(G),I.event(G).end()}}function M(C,...N){if(e.apply(this,arguments)){var T=this.__zoom,I=ur(C.changedTouches?C.changedTouches[0]:C,this),L=T.invert(I),D=T.k*(C.shiftKey?.5:2),B=n(_(x(T,D),I,L),t.apply(this,N),i);al(C),s>0?Ln(this).transition().duration(s).call(j,B,I,C):Ln(this).call(b.transform,B,I,C)}}function k(C,...N){if(e.apply(this,arguments)){var T=C.touches,I=T.length,L=E(this,N,C.changedTouches.length===I).event(C),D,B,H,F;for(Cb(C),B=0;B<I;++B)H=T[B],F=ur(H,this),F=[F,this.__zoom.invert(F),H.identifier],L.touch0?!L.touch1&&L.touch0[2]!==F[2]&&(L.touch1=F,L.taps=0):(L.touch0=F,D=!0,L.taps=1+!!u);u&&(u=clearTimeout(u)),D&&(L.taps<2&&(d=F[0],u=setTimeout(function(){u=null},p)),gf(this),L.start())}}function R(C,...N){if(this.__zooming){var T=E(this,N).event(C),I=C.changedTouches,L=I.length,D,B,H,F;for(al(C),D=0;D<L;++D)B=I[D],H=ur(B,this),T.touch0&&T.touch0[2]===B.identifier?T.touch0[0]=H:T.touch1&&T.touch1[2]===B.identifier&&(T.touch1[0]=H);if(B=T.that.__zoom,T.touch1){var z=T.touch0[0],G=T.touch0[1],Q=T.touch1[0],oe=T.touch1[1],Z=(Z=Q[0]-z[0])*Z+(Z=Q[1]-z[1])*Z,q=(q=oe[0]-G[0])*q+(q=oe[1]-G[1])*q;B=x(B,Math.sqrt(Z/q)),H=[(z[0]+Q[0])/2,(z[1]+Q[1])/2],F=[(G[0]+oe[0])/2,(G[1]+oe[1])/2]}else if(T.touch0)H=T.touch0[0],F=T.touch0[1];else return;T.zoom("touch",n(_(B,H,F),T.extent,i))}}function A(C,...N){if(this.__zooming){var T=E(this,N).event(C),I=C.changedTouches,L=I.length,D,B;for(Cb(C),f&&clearTimeout(f),f=setTimeout(function(){f=null},p),D=0;D<L;++D)B=I[D],T.touch0&&T.touch0[2]===B.identifier?delete T.touch0:T.touch1&&T.touch1[2]===B.identifier&&delete T.touch1;if(T.touch1&&!T.touch0&&(T.touch0=T.touch1,delete T.touch1),T.touch0)T.touch0[1]=this.__zoom.invert(T.touch0[0]);else if(T.end(),T.taps===2&&(B=ur(B,this),Math.hypot(d[0]-B[0],d[1]-B[1])<v)){var H=Ln(this).on("dblclick.zoom");H&&H.apply(this,arguments)}}}return b.wheelDelta=function(C){return arguments.length?(r=typeof C=="function"?C:vf(+C),b):r},b.filter=function(C){return arguments.length?(e=typeof C=="function"?C:vf(!!C),b):e},b.touchable=function(C){return arguments.length?(o=typeof C=="function"?C:vf(!!C),b):o},b.extent=function(C){return arguments.length?(t=typeof C=="function"?C:vf([[+C[0][0],+C[0][1]],[+C[1][0],+C[1][1]]]),b):t},b.scaleExtent=function(C){return arguments.length?(a[0]=+C[0],a[1]=+C[1],b):[a[0],a[1]]},b.translateExtent=function(C){return arguments.length?(i[0][0]=+C[0][0],i[1][0]=+C[1][0],i[0][1]=+C[0][1],i[1][1]=+C[1][1],b):[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},b.constrain=function(C){return arguments.length?(n=C,b):n},b.duration=function(C){return arguments.length?(s=+C,b):s},b.interpolate=function(C){return arguments.length?(c=C,b):c},b.on=function(){var C=l.on.apply(l,arguments);return C===l?b:C},b.clickDistance=function(C){return arguments.length?(m=(C=+C)*C,b):Math.sqrt(m)},b.tapDistance=function(C){return arguments.length?(v=+C,b):v},b}const po={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:n,targetHandle:r})=>`Couldn't create edge for ${e} handle id: "${e==="source"?n:r}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`},il=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],eT=["Enter"," ","Escape"];var Ui;(function(e){e.Strict="strict",e.Loose="loose"})(Ui||(Ui={}));var Wo;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Wo||(Wo={}));var sl;(function(e){e.Partial="partial",e.Full="full"})(sl||(sl={}));const tT={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var qo;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(qo||(qo={}));var xf;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(xf||(xf={}));var fe;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(fe||(fe={}));const nT={[fe.Left]:fe.Right,[fe.Right]:fe.Left,[fe.Top]:fe.Bottom,[fe.Bottom]:fe.Top};function zG(e,t){if(!e&&!t)return!0;if(!e||!t||e.size!==t.size)return!1;if(!e.size&&!t.size)return!0;for(const n of e.keys())if(!t.has(n))return!1;return!0}function rT(e,t,n){if(!n)return;const r=[];e.forEach((o,a)=>{t!=null&&t.has(a)||r.push(o)}),r.length&&n(r)}function oT(e){return e===null?null:e?"valid":"invalid"}const aT=e=>"id"in e&&"source"in e&&"target"in e,VG=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),Ob=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),cl=(e,t=[0,0])=>{const{width:n,height:r}=ho(e),o=e.origin??t,a=n*o[0],i=r*o[1];return{x:e.position.x-a,y:e.position.y-i}},UG=(e,t={nodeOrigin:[0,0],nodeLookup:void 0})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,o)=>{const a=typeof o=="string";let i=!t.nodeLookup&&!a?o:void 0;t.nodeLookup&&(i=a?t.nodeLookup.get(o):Ob(o)?o:t.nodeLookup.get(o.id));const s=i?jf(i,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return wf(r,s)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return _f(n)},ll=(e,t={})=>{if(e.size===0)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return e.forEach(r=>{if(t.filter===void 0||t.filter(r)){const o=jf(r);n=wf(n,o)}}),_f(n)},iT=(e,t,[n,r,o]=[0,0,1],a=!1,i=!1)=>{const s={...dl(t,[n,r,o]),width:t.width/o,height:t.height/o},c=[];for(const l of e.values()){const{measured:u,selectable:d=!0,hidden:f=!1}=l;if(i&&!d||f)continue;const p=u.width??l.width??l.initialWidth??null,y=u.height??l.height??l.initialHeight??null,m=ul(s,Wi(l)),v=(p??0)*(y??0),b=a&&m>0;(!l.internals.handleBounds||b||m>=v||l.dragging)&&c.push(l)}return c},HG=(e,t)=>{const n=new Set;return e.forEach(r=>{n.add(r.id)}),t.filter(r=>n.has(r.source)||n.has(r.target))};function Mb(e,t){const n=new Map,r=t!=null&&t.nodes?new Set(t.nodes.map(o=>o.id)):null;return e.forEach(o=>{o.measured.width&&o.measured.height&&(t!=null&&t.includeHiddenNodes||!o.hidden)&&(!r||r.has(o.id))&&n.set(o.id,o)}),n}async function Nb({nodes:e,width:t,height:n,panZoom:r,minZoom:o,maxZoom:a},i){if(e.size===0)return Promise.resolve(!1);const s=ll(e),c=Pb(s,t,n,(i==null?void 0:i.minZoom)??o,(i==null?void 0:i.maxZoom)??a,(i==null?void 0:i.padding)??.1);return await r.setViewport(c,{duration:i==null?void 0:i.duration}),Promise.resolve(!0)}function sT({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:r=[0,0],nodeExtent:o,onError:a}){const i=n.get(e),s=i.parentId?n.get(i.parentId):void 0,{x:c,y:l}=s?s.internals.positionAbsolute:{x:0,y:0},u=i.origin??r;let d=o;if(i.extent==="parent"&&!i.expandParent)if(!s)a==null||a("005",po.error005());else{const p=s.measured.width,y=s.measured.height;p&&y&&(d=[[c,l],[c+p,l+y]])}else s&&qi(i.extent)&&(d=[[i.extent[0][0]+c,i.extent[0][1]+l],[i.extent[1][0]+c,i.extent[1][1]+l]]);const f=qi(d)?Ma(t,d,i.measured):t;return{position:{x:f.x-c+i.measured.width*u[0],y:f.y-l+i.measured.height*u[1]},positionAbsolute:f}}async function WG({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:r,onBeforeDelete:o}){const a=new Set(e.map(d=>d.id)),i=[];for(const d of n){if(d.deletable===!1)continue;const f=a.has(d.id),p=!f&&d.parentId&&i.find(y=>y.id===d.parentId);(f||p)&&i.push(d)}const s=new Set(t.map(d=>d.id)),c=r.filter(d=>d.deletable!==!1),l=HG(i,c);for(const d of c)s.has(d.id)&&!l.find(f=>f.id===d.id)&&l.push(d);if(!o)return{edges:l,nodes:i};const u=await o({nodes:i,edges:l});return typeof u=="boolean"?u?{edges:l,nodes:i}:{edges:[],nodes:[]}:u}const Hi=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),Ma=(e={x:0,y:0},t,n)=>({x:Hi(e.x,t[0][0],t[1][0]-((n==null?void 0:n.width)??0)),y:Hi(e.y,t[0][1],t[1][1]-((n==null?void 0:n.height)??0))});function cT(e,t,n){const{width:r,height:o}=ho(n),{x:a,y:i}=n.internals.positionAbsolute;return Ma(e,[[a,i],[a+r,i+o]],t)}const lT=(e,t,n)=>e<t?Hi(Math.abs(e-t),1,t)/t:e>n?-Hi(Math.abs(e-n),1,t)/t:0,uT=(e,t,n=15,r=40)=>{const o=lT(e.x,r,t.width-r)*n,a=lT(e.y,r,t.height-r)*n;return[o,a]},wf=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),kb=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),_f=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),Wi=(e,t=[0,0])=>{var o,a;const{x:n,y:r}=Ob(e)?e.internals.positionAbsolute:cl(e,t);return{x:n,y:r,width:((o=e.measured)==null?void 0:o.width)??e.width??e.initialWidth??0,height:((a=e.measured)==null?void 0:a.height)??e.height??e.initialHeight??0}},jf=(e,t=[0,0])=>{var o,a;const{x:n,y:r}=Ob(e)?e.internals.positionAbsolute:cl(e,t);return{x:n,y:r,x2:n+(((o=e.measured)==null?void 0:o.width)??e.width??e.initialWidth??0),y2:r+(((a=e.measured)==null?void 0:a.height)??e.height??e.initialHeight??0)}},dT=(e,t)=>_f(wf(kb(e),kb(t))),ul=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},fT=e=>hr(e.width)&&hr(e.height)&&hr(e.x)&&hr(e.y),hr=e=>!isNaN(e)&&isFinite(e),qG=(e,t)=>{},Ef=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),dl=({x:e,y:t},[n,r,o],a=!1,i=[1,1])=>{const s={x:(e-n)/o,y:(t-r)/o};return a?Ef(s,i):s},pT=({x:e,y:t},[n,r,o])=>({x:e*o+n,y:t*o+r}),Pb=(e,t,n,r,o,a)=>{const i=t/(e.width*(1+a)),s=n/(e.height*(1+a)),c=Math.min(i,s),l=Hi(c,r,o),u=e.x+e.width/2,d=e.y+e.height/2,f=t/2-u*l,p=n/2-d*l;return{x:f,y:p,zoom:l}},Sf=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function qi(e){return e!==void 0&&e!=="parent"}function ho(e){var t,n;return{width:((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth??0,height:((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight??0}}function hT(e){var t,n;return(((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth)!==void 0&&(((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight)!==void 0}function mT(e,t={width:0,height:0},n,r,o){const a={...e},i=r.get(n);if(i){const s=i.origin||o;a.x+=i.internals.positionAbsolute.x-(t.width??0)*s[0],a.y+=i.internals.positionAbsolute.y-(t.height??0)*s[1]}return a}function fl(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:r,containerBounds:o}){const{x:a,y:i}=mo(e),s=dl({x:a-((o==null?void 0:o.left)??0),y:i-((o==null?void 0:o.top)??0)},r),{x:c,y:l}=n?Ef(s,t):s;return{xSnapped:c,ySnapped:l,...s}}const Cf=e=>({width:e.offsetWidth,height:e.offsetHeight}),yT=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},YG=["INPUT","SELECT","TEXTAREA"];function Ab(e){var n,r;const t=((r=(n=e.composedPath)==null?void 0:n.call(e))==null?void 0:r[0])||e.target;return YG.includes(t==null?void 0:t.nodeName)||(t==null?void 0:t.hasAttribute("contenteditable"))||!!(t!=null&&t.closest(".nokey"))}const gT=e=>"clientX"in e,mo=(e,t)=>{var a,i;const n=gT(e),r=n?e.clientX:(a=e.touches)==null?void 0:a[0].clientX,o=n?e.clientY:(i=e.touches)==null?void 0:i[0].clientY;return{x:r-((t==null?void 0:t.left)??0),y:o-((t==null?void 0:t.top)??0)}},vT=(e,t,n,r,o)=>{const a=t.querySelectorAll(`.${e}`);return!a||!a.length?null:Array.from(a).map(i=>{const s=i.getBoundingClientRect();return{id:i.getAttribute("data-handleid"),type:e,nodeId:o,position:i.getAttribute("data-handlepos"),x:(s.left-n.left)/r,y:(s.top-n.top)/r,...Cf(i)}})};function bT({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:o,sourceControlY:a,targetControlX:i,targetControlY:s}){const c=e*.125+o*.375+i*.375+n*.125,l=t*.125+a*.375+s*.375+r*.125,u=Math.abs(c-e),d=Math.abs(l-t);return[c,l,u,d]}function Of(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function xT({pos:e,x1:t,y1:n,x2:r,y2:o,c:a}){switch(e){case fe.Left:return[t-Of(t-r,a),n];case fe.Right:return[t+Of(r-t,a),n];case fe.Top:return[t,n-Of(n-o,a)];case fe.Bottom:return[t,n+Of(o-n,a)]}}function wT({sourceX:e,sourceY:t,sourcePosition:n=fe.Bottom,targetX:r,targetY:o,targetPosition:a=fe.Top,curvature:i=.25}){const[s,c]=xT({pos:n,x1:e,y1:t,x2:r,y2:o,c:i}),[l,u]=xT({pos:a,x1:r,y1:o,x2:e,y2:t,c:i}),[d,f,p,y]=bT({sourceX:e,sourceY:t,targetX:r,targetY:o,sourceControlX:s,sourceControlY:c,targetControlX:l,targetControlY:u});return[`M${e},${t} C${s},${c} ${l},${u} ${r},${o}`,d,f,p,y]}function _T({sourceX:e,sourceY:t,targetX:n,targetY:r}){const o=Math.abs(n-e)/2,a=n<e?n+o:n-o,i=Math.abs(r-t)/2,s=r<t?r+i:r-i;return[a,s,o,i]}function KG({sourceNode:e,targetNode:t,selected:n=!1,zIndex:r=0,elevateOnSelect:o=!1}){if(!o)return r;const a=n||t.selected||e.selected,i=Math.max(e.internals.z||0,t.internals.z||0,1e3);return r+(a?i:0)}function XG({sourceNode:e,targetNode:t,width:n,height:r,transform:o}){const a=wf(jf(e),jf(t));a.x===a.x2&&(a.x2+=1),a.y===a.y2&&(a.y2+=1);const i={x:-o[0]/o[2],y:-o[1]/o[2],width:n/o[2],height:r/o[2]};return ul(i,_f(a))>0}const QG=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`xy-edge__${e}${t||""}-${n}${r||""}`,JG=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),jT=(e,t)=>{if(!e.source||!e.target)return t;let n;return aT(e)?n={...e}:n={...e,id:QG(e)},JG(n,t)?t:(n.sourceHandle===null&&delete n.sourceHandle,n.targetHandle===null&&delete n.targetHandle,t.concat(n))};function ET({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[o,a,i,s]=_T({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,o,a,i,s]}const ST={[fe.Left]:{x:-1,y:0},[fe.Right]:{x:1,y:0},[fe.Top]:{x:0,y:-1},[fe.Bottom]:{x:0,y:1}},GG=({source:e,sourcePosition:t=fe.Bottom,target:n})=>t===fe.Left||t===fe.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},CT=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function ZG({source:e,sourcePosition:t=fe.Bottom,target:n,targetPosition:r=fe.Top,center:o,offset:a}){const i=ST[t],s=ST[r],c={x:e.x+i.x*a,y:e.y+i.y*a},l={x:n.x+s.x*a,y:n.y+s.y*a},u=GG({source:c,sourcePosition:t,target:l}),d=u.x!==0?"x":"y",f=u[d];let p=[],y,m;const v={x:0,y:0},b={x:0,y:0},[x,_,w,j]=_T({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(i[d]*s[d]===-1){y=o.x??x,m=o.y??_;const E=[{x:y,y:c.y},{x:y,y:l.y}],S=[{x:c.x,y:m},{x:l.x,y:m}];i[d]===f?p=d==="x"?E:S:p=d==="x"?S:E}else{const E=[{x:c.x,y:l.y}],S=[{x:l.x,y:c.y}];if(d==="x"?p=i.x===f?S:E:p=i.y===f?E:S,t===r){const R=Math.abs(e[d]-n[d]);if(R<=a){const A=Math.min(a-1,a-R);i[d]===f?v[d]=(c[d]>e[d]?-1:1)*A:b[d]=(l[d]>n[d]?-1:1)*A}}if(t!==r){const R=d==="x"?"y":"x",A=i[d]===s[R],C=c[R]>l[R],N=c[R]<l[R];(i[d]===1&&(!A&&C||A&&N)||i[d]!==1&&(!A&&N||A&&C))&&(p=d==="x"?E:S)}const O={x:c.x+v.x,y:c.y+v.y},P={x:l.x+b.x,y:l.y+b.y},M=Math.max(Math.abs(O.x-p[0].x),Math.abs(P.x-p[0].x)),k=Math.max(Math.abs(O.y-p[0].y),Math.abs(P.y-p[0].y));M>=k?(y=(O.x+P.x)/2,m=p[0].y):(y=p[0].x,m=(O.y+P.y)/2)}return[[e,{x:c.x+v.x,y:c.y+v.y},...p,{x:l.x+b.x,y:l.y+b.y},n],y,m,w,j]}function eZ(e,t,n,r){const o=Math.min(CT(e,t)/2,CT(t,n)/2,r),{x:a,y:i}=t;if(e.x===a&&a===n.x||e.y===i&&i===n.y)return`L${a} ${i}`;if(e.y===i){const l=e.x<n.x?-1:1,u=e.y<n.y?1:-1;return`L ${a+o*l},${i}Q ${a},${i} ${a},${i+o*u}`}const s=e.x<n.x?1:-1,c=e.y<n.y?-1:1;return`L ${a},${i+o*c}Q ${a},${i} ${a+o*s},${i}`}function Tb({sourceX:e,sourceY:t,sourcePosition:n=fe.Bottom,targetX:r,targetY:o,targetPosition:a=fe.Top,borderRadius:i=5,centerX:s,centerY:c,offset:l=20}){const[u,d,f,p,y]=ZG({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:o},targetPosition:a,center:{x:s,y:c},offset:l});return[u.reduce((m,v,b)=>{let x="";return b>0&&b<u.length-1?x=eZ(u[b-1],v,u[b+1],i):x=`${b===0?"M":"L"}${v.x} ${v.y}`,m+=x,m},""),d,f,p,y]}function OT(e){var t;return e&&!!(e.internals.handleBounds||(t=e.handles)!=null&&t.length)&&!!(e.measured.width||e.width||e.initialWidth)}function tZ(e){var d;const{sourceNode:t,targetNode:n}=e;if(!OT(t)||!OT(n))return null;const r=t.internals.handleBounds||MT(t.handles),o=n.internals.handleBounds||MT(n.handles),a=NT((r==null?void 0:r.source)??[],e.sourceHandle),i=NT(e.connectionMode===Ui.Strict?(o==null?void 0:o.target)??[]:((o==null?void 0:o.target)??[]).concat((o==null?void 0:o.source)??[]),e.targetHandle);if(!a||!i)return(d=e.onError)==null||d.call(e,"008",po.error008(a?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const s=(a==null?void 0:a.position)||fe.Bottom,c=(i==null?void 0:i.position)||fe.Top,l=pl(t,a,s),u=pl(n,i,c);return{sourceX:l.x,sourceY:l.y,targetX:u.x,targetY:u.y,sourcePosition:s,targetPosition:c}}function MT(e){if(!e)return null;const t=[],n=[];for(const r of e)r.width=r.width??1,r.height=r.height??1,r.type==="source"?t.push(r):r.type==="target"&&n.push(r);return{source:t,target:n}}function pl(e,t,n=fe.Left,r=!1){const o=((t==null?void 0:t.x)??0)+e.internals.positionAbsolute.x,a=((t==null?void 0:t.y)??0)+e.internals.positionAbsolute.y,{width:i,height:s}=t??ho(e);if(r)return{x:o+i/2,y:a+s/2};switch((t==null?void 0:t.position)??n){case fe.Top:return{x:o+i/2,y:a};case fe.Right:return{x:o+i,y:a+s/2};case fe.Bottom:return{x:o+i/2,y:a+s};case fe.Left:return{x:o,y:a+s/2}}}function NT(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function Rb(e,t){return e?typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(n=>`${n}=${e[n]}`).join("&")}`:""}function nZ(e,{id:t,defaultColor:n,defaultMarkerStart:r,defaultMarkerEnd:o}){const a=new Set;return e.reduce((i,s)=>([s.markerStart||r,s.markerEnd||o].forEach(c=>{if(c&&typeof c=="object"){const l=Rb(c,t);a.has(l)||(i.push({id:l,color:c.color||n,...c}),a.add(l))}}),i),[]).sort((i,s)=>i.id.localeCompare(s.id))}const Ib={nodeOrigin:[0,0],nodeExtent:il,elevateNodesOnSelect:!0,defaults:{}},rZ={...Ib,checkEquality:!0};function Db(e,t){const n={...e};for(const r in t)t[r]!==void 0&&(n[r]=t[r]);return n}function oZ(e,t,n){const r=Db(Ib,n);for(const o of e.values())if(o.parentId)Fb(o,e,t,r);else{const a=cl(o,r.nodeOrigin),i=qi(o.extent)?o.extent:r.nodeExtent,s=Ma(a,i,ho(o));o.internals.positionAbsolute=s}}function Lb(e,t,n,r){var s,c;const o=Db(rZ,r),a=new Map(t),i=o!=null&&o.elevateNodesOnSelect?1e3:0;t.clear(),n.clear();for(const l of e){let u=a.get(l.id);if(o.checkEquality&&l===(u==null?void 0:u.internals.userNode))t.set(l.id,u);else{const d=cl(l,o.nodeOrigin),f=qi(l.extent)?l.extent:o.nodeExtent,p=Ma(d,f,ho(l));u={...o.defaults,...l,measured:{width:(s=l.measured)==null?void 0:s.width,height:(c=l.measured)==null?void 0:c.height},internals:{positionAbsolute:p,handleBounds:l.measured?u==null?void 0:u.internals.handleBounds:void 0,z:kT(l,i),userNode:l}},t.set(l.id,u)}l.parentId&&Fb(u,t,n,r)}}function aZ(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function Fb(e,t,n,r){const{elevateNodesOnSelect:o,nodeOrigin:a,nodeExtent:i}=Db(Ib,r),s=e.parentId,c=t.get(s);if(!c){console.warn(`Parent node ${s} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}aZ(e,n);const l=o?1e3:0,{x:u,y:d,z:f}=iZ(e,c,a,i,l),{positionAbsolute:p}=e.internals,y=u!==p.x||d!==p.y;(y||f!==e.internals.z)&&(e.internals={...e.internals,positionAbsolute:y?{x:u,y:d}:p,z:f})}function kT(e,t){return(hr(e.zIndex)?e.zIndex:0)+(e.selected?t:0)}function iZ(e,t,n,r,o){const{x:a,y:i}=t.internals.positionAbsolute,s=ho(e),c=cl(e,n),l=qi(e.extent)?Ma(c,e.extent,s):c;let u=Ma({x:a+l.x,y:i+l.y},r,s);e.extent==="parent"&&(u=cT(u,s,t));const d=kT(e,o),f=t.internals.z??0;return{x:u.x,y:u.y,z:f>d?f:d}}function Bb(e,t,n,r=[0,0]){var i;const o=[],a=new Map;for(const s of e){const c=t.get(s.parentId);if(!c)continue;const l=((i=a.get(s.parentId))==null?void 0:i.expandedRect)??Wi(c),u=dT(l,s.rect);a.set(s.parentId,{expandedRect:u,parent:c})}return a.size>0&&a.forEach(({expandedRect:s,parent:c},l)=>{var _;const u=c.internals.positionAbsolute,d=ho(c),f=c.origin??r,p=s.x<u.x?Math.round(Math.abs(u.x-s.x)):0,y=s.y<u.y?Math.round(Math.abs(u.y-s.y)):0,m=Math.max(d.width,Math.round(s.width)),v=Math.max(d.height,Math.round(s.height)),b=(m-d.width)*f[0],x=(v-d.height)*f[1];(p>0||y>0||b||x)&&(o.push({id:l,type:"position",position:{x:c.position.x-p+b,y:c.position.y-y+x}}),(_=n.get(l))==null||_.forEach(w=>{e.some(j=>j.id===w.id)||o.push({id:w.id,type:"position",position:{x:w.position.x+p,y:w.position.y+y}})})),(d.width<s.width||d.height<s.height||p||y)&&o.push({id:l,type:"dimensions",setAttributes:!0,dimensions:{width:m+(p?f[0]*p-b:0),height:v+(y?f[1]*y-x:0)}})}),o}function sZ(e,t,n,r,o,a){const i=r==null?void 0:r.querySelector(".xyflow__viewport");let s=!1;if(!i)return{changes:[],updatedInternals:s};const c=[],l=window.getComputedStyle(i),{m22:u}=new window.DOMMatrixReadOnly(l.transform),d=[];for(const f of e.values()){const p=t.get(f.id);if(p)if(p.hidden)p.internals={...p.internals,handleBounds:void 0},s=!0;else{const y=Cf(f.nodeElement),m=p.measured.width!==y.width||p.measured.height!==y.height;if(y.width&&y.height&&(m||!p.internals.handleBounds||f.force)){const v=f.nodeElement.getBoundingClientRect(),b=qi(p.extent)?p.extent:a;let{positionAbsolute:x}=p.internals;p.parentId&&p.extent==="parent"?x=cT(x,y,t.get(p.parentId)):b&&(x=Ma(x,b,y)),p.measured=y,p.internals={...p.internals,positionAbsolute:x,handleBounds:{source:vT("source",f.nodeElement,v,u,p.id),target:vT("target",f.nodeElement,v,u,p.id)}},p.parentId&&Fb(p,t,n,{nodeOrigin:o}),s=!0,m&&(c.push({id:p.id,type:"dimensions",dimensions:y}),p.expandParent&&p.parentId&&d.push({id:p.id,parentId:p.parentId,rect:Wi(p,o)}))}}}if(d.length>0){const f=Bb(d,t,n,o);c.push(...f)}return{changes:c,updatedInternals:s}}async function cZ({delta:e,panZoom:t,transform:n,translateExtent:r,width:o,height:a}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const i=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[o,a]],r),s=!!i&&(i.x!==n[0]||i.y!==n[1]||i.k!==n[2]);return Promise.resolve(s)}function PT(e,t,n){e.clear(),t.clear();for(const r of n){const{source:o,target:a,sourceHandle:i=null,targetHandle:s=null}=r,c=`${o}-source-${i}`,l=`${a}-target-${s}`,u=e.get(c)||new Map,d=e.get(l)||new Map,f={edgeId:r.id,source:o,target:a,sourceHandle:i,targetHandle:s};t.set(r.id,r),e.set(c,u.set(`${a}-${s}`,f)),e.set(l,d.set(`${o}-${i}`,f))}}function AT(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return n?n.selected?!0:AT(n,t):!1}function TT(e,t,n){let r=e;do{if(r!=null&&r.matches(t))return!0;if(r===n)return!1;r=r.parentElement}while(r);return!1}function lZ(e,t,n,r){const o=new Map;for(const[a,i]of e)if((i.selected||i.id===r)&&(!i.parentId||!AT(i,e))&&(i.draggable||t&&typeof i.draggable>"u")){const s=e.get(a);s&&o.set(a,{id:a,position:s.position||{x:0,y:0},distance:{x:n.x-s.internals.positionAbsolute.x,y:n.y-s.internals.positionAbsolute.y},extent:s.extent,parentId:s.parentId,origin:s.origin,expandParent:s.expandParent,internals:{positionAbsolute:s.internals.positionAbsolute||{x:0,y:0}},measured:{width:s.measured.width??0,height:s.measured.height??0}})}return o}function $b({nodeId:e,dragItems:t,nodeLookup:n,dragging:r=!0}){var i,s,c;const o=[];for(const[l,u]of t){const d=(i=n.get(l))==null?void 0:i.internals.userNode;d&&o.push({...d,position:u.position,dragging:r})}if(!e)return[o[0],o];const a=(s=n.get(e))==null?void 0:s.internals.userNode;return[a?{...a,position:((c=t.get(e))==null?void 0:c.position)||a.position,dragging:r}:o[0],o]}function uZ({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:r,onDragStop:o}){let a={x:null,y:null},i=0,s=new Map,c=!1,l={x:0,y:0},u=null,d=!1,f=null,p=!1;function y({noDragClassName:v,handleSelector:b,domNode:x,isSelectable:_,nodeId:w,nodeClickDistance:j=0}){f=Ln(x);function E({x:M,y:k},R){const{nodeLookup:A,nodeExtent:C,snapGrid:N,snapToGrid:T,nodeOrigin:I,onNodeDrag:L,onSelectionDrag:D,onError:B,updateNodePositions:H}=t();a={x:M,y:k};let F=!1,z={x:0,y:0,x2:0,y2:0};if(s.size>1&&C){const G=ll(s);z=kb(G)}for(const[G,Q]of s){if(!A.has(G))continue;let oe={x:M-Q.distance.x,y:k-Q.distance.y};T&&(oe=Ef(oe,N));let Z=[[C[0][0],C[0][1]],[C[1][0],C[1][1]]];if(s.size>1&&C&&!Q.extent){const{positionAbsolute:J}=Q.internals,te=J.x-z.x+C[0][0],$=J.x+Q.measured.width-z.x2+C[1][0],se=J.y-z.y+C[0][1],le=J.y+Q.measured.height-z.y2+C[1][1];Z=[[te,se],[$,le]]}const{position:q,positionAbsolute:W}=sT({nodeId:G,nextPosition:oe,nodeLookup:A,nodeExtent:Z,nodeOrigin:I,onError:B});F=F||Q.position.x!==q.x||Q.position.y!==q.y,Q.position=q,Q.internals.positionAbsolute=W}if(F&&(H(s,!0),R&&(r||L||!w&&D))){const[G,Q]=$b({nodeId:w,dragItems:s,nodeLookup:A});r==null||r(R,s,G,Q),L==null||L(R,G,Q),w||(D==null||D(R,Q))}}async function S(){if(!u)return;const{transform:M,panBy:k,autoPanSpeed:R}=t(),[A,C]=uT(l,u,R);(A!==0||C!==0)&&(a.x=(a.x??0)-A/M[2],a.y=(a.y??0)-C/M[2],await k({x:A,y:C})&&E(a,null)),i=requestAnimationFrame(S)}function O(M){var F;const{nodeLookup:k,multiSelectionActive:R,nodesDraggable:A,transform:C,snapGrid:N,snapToGrid:T,selectNodesOnDrag:I,onNodeDragStart:L,onSelectionDragStart:D,unselectNodesAndEdges:B}=t();d=!0,(!I||!_)&&!R&&w&&((F=k.get(w))!=null&&F.selected||B()),_&&I&&w&&(e==null||e(w));const H=fl(M.sourceEvent,{transform:C,snapGrid:N,snapToGrid:T,containerBounds:u});if(a=H,s=lZ(k,A,H,w),s.size>0&&(n||L||!w&&D)){const[z,G]=$b({nodeId:w,dragItems:s,nodeLookup:k});n==null||n(M.sourceEvent,s,z,G),L==null||L(M.sourceEvent,z,G),w||(D==null||D(M.sourceEvent,G))}}const P=_2().clickDistance(j).on("start",M=>{const{domNode:k,nodeDragThreshold:R,transform:A,snapGrid:C,snapToGrid:N}=t();u=(k==null?void 0:k.getBoundingClientRect())||null,p=!1,R===0&&O(M),a=fl(M.sourceEvent,{transform:A,snapGrid:C,snapToGrid:N,containerBounds:u}),l=mo(M.sourceEvent,u)}).on("drag",M=>{const{autoPanOnNodeDrag:k,transform:R,snapGrid:A,snapToGrid:C,nodeDragThreshold:N,nodeLookup:T}=t(),I=fl(M.sourceEvent,{transform:R,snapGrid:A,snapToGrid:C,containerBounds:u});if((M.sourceEvent.type==="touchmove"&&M.sourceEvent.touches.length>1||w&&!T.has(w))&&(p=!0),!p){if(!c&&k&&d&&(c=!0,S()),!d){const L=I.xSnapped-(a.x??0),D=I.ySnapped-(a.y??0);Math.sqrt(L*L+D*D)>N&&O(M)}(a.x!==I.xSnapped||a.y!==I.ySnapped)&&s&&d&&(l=mo(M.sourceEvent,u),E(I,M.sourceEvent))}}).on("end",M=>{if(!(!d||p)&&(c=!1,d=!1,cancelAnimationFrame(i),s.size>0)){const{nodeLookup:k,updateNodePositions:R,onNodeDragStop:A,onSelectionDragStop:C}=t();if(R(s,!1),o||A||!w&&C){const[N,T]=$b({nodeId:w,dragItems:s,nodeLookup:k,dragging:!1});o==null||o(M.sourceEvent,s,N,T),A==null||A(M.sourceEvent,N,T),w||(C==null||C(M.sourceEvent,T))}}}).filter(M=>{const k=M.target;return!M.button&&(!v||!TT(k,`.${v}`,x))&&(!b||TT(k,b,x))});f.call(P)}function m(){f==null||f.on(".drag",null)}return{update:y,destroy:m}}function dZ(e,t,n){const r=[],o={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const a of t.values())ul(o,Wi(a))>0&&r.push(a);return r}const fZ=250;function pZ(e,t,n,r){var s,c;let o=[],a=1/0;const i=dZ(e,n,t+fZ);for(const l of i){const u=[...((s=l.internals.handleBounds)==null?void 0:s.source)??[],...((c=l.internals.handleBounds)==null?void 0:c.target)??[]];for(const d of u){if(r.nodeId===d.nodeId&&r.type===d.type&&r.id===d.id)continue;const{x:f,y:p}=pl(l,d,d.position,!0),y=Math.sqrt(Math.pow(f-e.x,2)+Math.pow(p-e.y,2));y>t||(y<a?(o=[{...d,x:f,y:p}],a=y):y===a&&o.push({...d,x:f,y:p}))}}if(!o.length)return null;if(o.length>1){const l=r.type==="source"?"target":"source";return o.find(u=>u.type===l)??o[0]}return o[0]}function RT(e,t,n,r,o,a=!1){var l,u,d;const i=r.get(e);if(!i)return null;const s=o==="strict"?(l=i.internals.handleBounds)==null?void 0:l[t]:[...((u=i.internals.handleBounds)==null?void 0:u.source)??[],...((d=i.internals.handleBounds)==null?void 0:d.target)??[]],c=(n?s==null?void 0:s.find(f=>f.id===n):s==null?void 0:s[0])??null;return c&&a?{...c,...pl(i,c,c.position,!0)}:c}function IT(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function hZ(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}const DT=()=>!0;function mZ(e,{connectionMode:t,connectionRadius:n,handleId:r,nodeId:o,edgeUpdaterType:a,isTarget:i,domNode:s,nodeLookup:c,lib:l,autoPanOnConnect:u,flowId:d,panBy:f,cancelConnection:p,onConnectStart:y,onConnect:m,onConnectEnd:v,isValidConnection:b=DT,onReconnectEnd:x,updateConnection:_,getTransform:w,getFromHandle:j,autoPanSpeed:E}){const S=yT(e.target);let O=0,P;const{x:M,y:k}=mo(e),R=S==null?void 0:S.elementFromPoint(M,k),A=IT(a,R),C=s==null?void 0:s.getBoundingClientRect();if(!C||!A)return;const N=RT(o,A,r,c,t);if(!N)return;let T=mo(e,C),I=!1,L=null,D=!1,B=null;function H(){if(!u||!C)return;const[q,W]=uT(T,C,E);f({x:q,y:W}),O=requestAnimationFrame(H)}const F={...N,nodeId:o,type:A,position:N.position},z=c.get(o),G={inProgress:!0,isValid:null,from:pl(z,F,fe.Left,!0),fromHandle:F,fromPosition:F.position,fromNode:z,to:T,toHandle:null,toPosition:nT[F.position],toNode:null};_(G);let Q=G;y==null||y(e,{nodeId:o,handleId:r,handleType:A});function oe(q){if(!j()||!F){Z(q);return}const W=w();T=mo(q,C),P=pZ(dl(T,W,!1,[1,1]),n,c,F),I||(H(),I=!0);const J=LT(q,{handle:P,connectionMode:t,fromNodeId:o,fromHandleId:r,fromType:i?"target":"source",isValidConnection:b,doc:S,lib:l,flowId:d,nodeLookup:c});B=J.handleDomNode,L=J.connection,D=hZ(!!P,J.isValid);const te={...Q,isValid:D,to:P&&D?pT({x:P.x,y:P.y},W):T,toHandle:J.toHandle,toPosition:D&&J.toHandle?J.toHandle.position:nT[F.position],toNode:J.toHandle?c.get(J.toHandle.nodeId):null};D&&P&&Q.toHandle&&te.toHandle&&Q.toHandle.type===te.toHandle.type&&Q.toHandle.nodeId===te.toHandle.nodeId&&Q.toHandle.id===te.toHandle.id&&Q.to.x===te.to.x&&Q.to.y===te.to.y||(_(te),Q=te)}function Z(q){(P||B)&&L&&D&&(m==null||m(L));const{inProgress:W,...J}=Q,te={...J,toPosition:Q.toHandle?Q.toPosition:null};v==null||v(q,te),a&&(x==null||x(q,te)),p(),cancelAnimationFrame(O),I=!1,D=!1,L=null,B=null,S.removeEventListener("mousemove",oe),S.removeEventListener("mouseup",Z),S.removeEventListener("touchmove",oe),S.removeEventListener("touchend",Z)}S.addEventListener("mousemove",oe),S.addEventListener("mouseup",Z),S.addEventListener("touchmove",oe),S.addEventListener("touchend",Z)}function LT(e,{handle:t,connectionMode:n,fromNodeId:r,fromHandleId:o,fromType:a,doc:i,lib:s,flowId:c,isValidConnection:l=DT,nodeLookup:u}){const d=a==="target",f=t?i.querySelector(`.${s}-flow__handle[data-id="${c}-${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`):null,{x:p,y}=mo(e),m=i.elementFromPoint(p,y),v=m!=null&&m.classList.contains(`${s}-flow__handle`)?m:f,b={handleDomNode:v,isValid:!1,connection:null,toHandle:null};if(v){const x=IT(void 0,v),_=v.getAttribute("data-nodeid"),w=v.getAttribute("data-handleid"),j=v.classList.contains("connectable"),E=v.classList.contains("connectableend");if(!_||!x)return b;const S={source:d?_:r,sourceHandle:d?w:o,target:d?r:_,targetHandle:d?o:w};b.connection=S;const O=j&&E&&(n===Ui.Strict?d&&x==="source"||!d&&x==="target":_!==r||w!==o);b.isValid=O&&l(S),b.toHandle=RT(_,x,w,u,n,!1)}return b}const zb={onPointerDown:mZ,isValid:LT};function yZ({domNode:e,panZoom:t,getTransform:n,getViewScale:r}){const o=Ln(e);function a({translateExtent:s,width:c,height:l,zoomStep:u=10,pannable:d=!0,zoomable:f=!0,inversePan:p=!1}){const y=_=>{const w=n();if(_.sourceEvent.type!=="wheel"||!t)return;const j=-_.sourceEvent.deltaY*(_.sourceEvent.deltaMode===1?.05:_.sourceEvent.deltaMode?1:.002)*u,E=w[2]*Math.pow(2,j);t.scaleTo(E)};let m=[0,0];const v=_=>{(_.sourceEvent.type==="mousedown"||_.sourceEvent.type==="touchstart")&&(m=[_.sourceEvent.clientX??_.sourceEvent.touches[0].clientX,_.sourceEvent.clientY??_.sourceEvent.touches[0].clientY])},b=_=>{const w=n();if(_.sourceEvent.type!=="mousemove"&&_.sourceEvent.type!=="touchmove"||!t)return;const j=[_.sourceEvent.clientX??_.sourceEvent.touches[0].clientX,_.sourceEvent.clientY??_.sourceEvent.touches[0].clientY],E=[j[0]-m[0],j[1]-m[1]];m=j;const S=r()*Math.max(w[2],Math.log(w[2]))*(p?-1:1),O={x:w[0]-E[0]*S,y:w[1]-E[1]*S},P=[[0,0],[c,l]];t.setViewportConstrained({x:O.x,y:O.y,zoom:w[2]},P,s)},x=Z2().on("start",v).on("zoom",d?b:null).on("zoom.wheel",f?y:null);o.call(x,{})}function i(){o.on("zoom",null)}return{update:a,destroy:i,pointer:ur}}const gZ=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,Mf=e=>({x:e.x,y:e.y,zoom:e.k}),Vb=({x:e,y:t,zoom:n})=>bf.translate(e,t).scale(n),Yi=(e,t)=>e.target.closest(`.${t}`),FT=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),Ub=(e,t=0,n=()=>{})=>{const r=typeof t=="number"&&t>0;return r||n(),r?e.transition().duration(t).on("end",n):e},BT=e=>{const t=e.ctrlKey&&Sf()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function vZ({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:r,panOnScrollMode:o,panOnScrollSpeed:a,zoomOnPinch:i,onPanZoomStart:s,onPanZoom:c,onPanZoomEnd:l}){return u=>{if(Yi(u,t))return!1;u.preventDefault(),u.stopImmediatePropagation();const d=n.property("__zoom").k||1;if(u.ctrlKey&&i){const v=ur(u),b=BT(u),x=d*Math.pow(2,b);r.scaleTo(n,x,v,u);return}const f=u.deltaMode===1?20:1;let p=o===Wo.Vertical?0:u.deltaX*f,y=o===Wo.Horizontal?0:u.deltaY*f;!Sf()&&u.shiftKey&&o!==Wo.Vertical&&(p=u.deltaY*f,y=0),r.translateBy(n,-(p/d)*a,-(y/d)*a,{internal:!0});const m=Mf(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling||(e.isPanScrolling=!0,s==null||s(u,m)),e.isPanScrolling&&(c==null||c(u,m),e.panScrollTimeout=setTimeout(()=>{l==null||l(u,m),e.isPanScrolling=!1},150))}}function bZ({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(r,o){if(!t&&r.type==="wheel"&&!r.ctrlKey||Yi(r,e))return null;r.preventDefault(),n.call(this,r,o)}}function xZ({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return r=>{var a,i,s;if((a=r.sourceEvent)!=null&&a.internal)return;const o=Mf(r.transform);e.mouseButton=((i=r.sourceEvent)==null?void 0:i.button)||0,e.isZoomingOrPanning=!0,e.prevViewport=o,((s=r.sourceEvent)==null?void 0:s.type)==="mousedown"&&t(!0),n&&(n==null||n(r.sourceEvent,o))}}function wZ({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:r,onPanZoom:o}){return a=>{var i,s;e.usedRightMouseButton=!!(n&&FT(t,e.mouseButton??0)),(i=a.sourceEvent)!=null&&i.sync||r([a.transform.x,a.transform.y,a.transform.k]),o&&!((s=a.sourceEvent)!=null&&s.internal)&&(o==null||o(a.sourceEvent,Mf(a.transform)))}}function _Z({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:r,onPanZoomEnd:o,onPaneContextMenu:a}){return i=>{var s;if(!((s=i.sourceEvent)!=null&&s.internal)&&(e.isZoomingOrPanning=!1,a&&FT(t,e.mouseButton??0)&&!e.usedRightMouseButton&&i.sourceEvent&&a(i.sourceEvent),e.usedRightMouseButton=!1,r(!1),o&&gZ(e.prevViewport,i.transform))){const c=Mf(i.transform);e.prevViewport=c,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{o==null||o(i.sourceEvent,c)},n?150:0)}}}function jZ({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:r,panOnScroll:o,zoomOnDoubleClick:a,userSelectionActive:i,noWheelClassName:s,noPanClassName:c,lib:l}){return u=>{var y;const d=e||t,f=n&&u.ctrlKey;if(u.button===1&&u.type==="mousedown"&&(Yi(u,`${l}-flow__node`)||Yi(u,`${l}-flow__edge`)))return!0;if(!r&&!d&&!o&&!a&&!n||i||Yi(u,s)&&u.type==="wheel"||Yi(u,c)&&(u.type!=="wheel"||o&&u.type==="wheel"&&!e)||!n&&u.ctrlKey&&u.type==="wheel")return!1;if(!n&&u.type==="touchstart"&&((y=u.touches)==null?void 0:y.length)>1)return u.preventDefault(),!1;if(!d&&!o&&!f&&u.type==="wheel"||!r&&(u.type==="mousedown"||u.type==="touchstart")||Array.isArray(r)&&!r.includes(u.button)&&u.type==="mousedown")return!1;const p=Array.isArray(r)&&r.includes(u.button)||!u.button||u.button<=1;return(!u.ctrlKey||u.type==="wheel")&&p}}function EZ({domNode:e,minZoom:t,maxZoom:n,paneClickDistance:r,translateExtent:o,viewport:a,onPanZoom:i,onPanZoomStart:s,onPanZoomEnd:c,onDraggingChange:l}){const u={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},d=e.getBoundingClientRect(),f=Z2().clickDistance(!hr(r)||r<0?0:r).scaleExtent([t,n]).translateExtent(o),p=Ln(e).call(f);_({x:a.x,y:a.y,zoom:Hi(a.zoom,t,n)},[[0,0],[d.width,d.height]],o);const y=p.on("wheel.zoom"),m=p.on("dblclick.zoom");f.wheelDelta(BT);function v(R,A){return p?new Promise(C=>{f==null||f.transform(Ub(p,A==null?void 0:A.duration,()=>C(!0)),R)}):Promise.resolve(!1)}function b({noWheelClassName:R,noPanClassName:A,onPaneContextMenu:C,userSelectionActive:N,panOnScroll:T,panOnDrag:I,panOnScrollMode:L,panOnScrollSpeed:D,preventScrolling:B,zoomOnPinch:H,zoomOnScroll:F,zoomOnDoubleClick:z,zoomActivationKeyPressed:G,lib:Q,onTransformChange:oe}){N&&!u.isZoomingOrPanning&&x();const Z=T&&!G&&!N?vZ({zoomPanValues:u,noWheelClassName:R,d3Selection:p,d3Zoom:f,panOnScrollMode:L,panOnScrollSpeed:D,zoomOnPinch:H,onPanZoomStart:s,onPanZoom:i,onPanZoomEnd:c}):bZ({noWheelClassName:R,preventScrolling:B,d3ZoomHandler:y});if(p.on("wheel.zoom",Z,{passive:!1}),!N){const W=xZ({zoomPanValues:u,onDraggingChange:l,onPanZoomStart:s});f.on("start",W);const J=wZ({zoomPanValues:u,panOnDrag:I,onPaneContextMenu:!!C,onPanZoom:i,onTransformChange:oe});f.on("zoom",J);const te=_Z({zoomPanValues:u,panOnDrag:I,panOnScroll:T,onPaneContextMenu:C,onPanZoomEnd:c,onDraggingChange:l});f.on("end",te)}const q=jZ({zoomActivationKeyPressed:G,panOnDrag:I,zoomOnScroll:F,panOnScroll:T,zoomOnDoubleClick:z,zoomOnPinch:H,userSelectionActive:N,noPanClassName:A,noWheelClassName:R,lib:Q});f.filter(q),z?p.on("dblclick.zoom",m):p.on("dblclick.zoom",null)}function x(){f.on("zoom",null)}async function _(R,A,C){const N=Vb(R),T=f==null?void 0:f.constrain()(N,A,C);return T&&await v(T),new Promise(I=>I(T))}async function w(R,A){const C=Vb(R);return await v(C,A),new Promise(N=>N(C))}function j(R){if(p){const A=Vb(R),C=p.property("__zoom");(C.k!==R.zoom||C.x!==R.x||C.y!==R.y)&&(f==null||f.transform(p,A,null,{sync:!0}))}}function E(){const R=p?J2(p.node()):{x:0,y:0,k:1};return{x:R.x,y:R.y,zoom:R.k}}function S(R,A){return p?new Promise(C=>{f==null||f.scaleTo(Ub(p,A==null?void 0:A.duration,()=>C(!0)),R)}):Promise.resolve(!1)}function O(R,A){return p?new Promise(C=>{f==null||f.scaleBy(Ub(p,A==null?void 0:A.duration,()=>C(!0)),R)}):Promise.resolve(!1)}function P(R){f==null||f.scaleExtent(R)}function M(R){f==null||f.translateExtent(R)}function k(R){const A=!hr(R)||R<0?0:R;f==null||f.clickDistance(A)}return{update:b,destroy:x,setViewport:w,setViewportConstrained:_,getViewport:E,scaleTo:S,scaleBy:O,setScaleExtent:P,setTranslateExtent:M,syncViewport:j,setClickDistance:k}}var Ki;(function(e){e.Line="line",e.Handle="handle"})(Ki||(Ki={}));const SZ=["top-left","top-right","bottom-left","bottom-right"],CZ=["top","right","bottom","left"];function OZ({width:e,prevWidth:t,height:n,prevHeight:r,affectsX:o,affectsY:a}){const i=e-t,s=n-r,c=[i>0?1:i<0?-1:0,s>0?1:s<0?-1:0];return i&&o&&(c[0]=c[0]*-1),s&&a&&(c[1]=c[1]*-1),c}function MZ(e){const t=e.includes("right")||e.includes("left"),n=e.includes("bottom")||e.includes("top"),r=e.includes("left"),o=e.includes("top");return{isHorizontal:t,isVertical:n,affectsX:r,affectsY:o}}function Yo(e,t){return Math.max(0,t-e)}function Ko(e,t){return Math.max(0,e-t)}function Nf(e,t,n){return Math.max(0,t-e,e-n)}function $T(e,t){return e?!t:t}function NZ(e,t,n,r,o,a,i,s){let{affectsX:c,affectsY:l}=t;const{isHorizontal:u,isVertical:d}=t,f=u&&d,{xSnapped:p,ySnapped:y}=n,{minWidth:m,maxWidth:v,minHeight:b,maxHeight:x}=r,{x:_,y:w,width:j,height:E,aspectRatio:S}=e;let O=Math.floor(u?p-e.pointerX:0),P=Math.floor(d?y-e.pointerY:0);const M=j+(c?-O:O),k=E+(l?-P:P),R=-a[0]*j,A=-a[1]*E;let C=Nf(M,m,v),N=Nf(k,b,x);if(i){let L=0,D=0;c&&O<0?L=Yo(_+O+R,i[0][0]):!c&&O>0&&(L=Ko(_+M+R,i[1][0])),l&&P<0?D=Yo(w+P+A,i[0][1]):!l&&P>0&&(D=Ko(w+k+A,i[1][1])),C=Math.max(C,L),N=Math.max(N,D)}if(s){let L=0,D=0;c&&O>0?L=Ko(_+O,s[0][0]):!c&&O<0&&(L=Yo(_+M,s[1][0])),l&&P>0?D=Ko(w+P,s[0][1]):!l&&P<0&&(D=Yo(w+k,s[1][1])),C=Math.max(C,L),N=Math.max(N,D)}if(o){if(u){const L=Nf(M/S,b,x)*S;if(C=Math.max(C,L),i){let D=0;!c&&!l||c&&!l&&f?D=Ko(w+A+M/S,i[1][1])*S:D=Yo(w+A+(c?O:-O)/S,i[0][1])*S,C=Math.max(C,D)}if(s){let D=0;!c&&!l||c&&!l&&f?D=Yo(w+M/S,s[1][1])*S:D=Ko(w+(c?O:-O)/S,s[0][1])*S,C=Math.max(C,D)}}if(d){const L=Nf(k*S,m,v)/S;if(N=Math.max(N,L),i){let D=0;!c&&!l||l&&!c&&f?D=Ko(_+k*S+R,i[1][0])/S:D=Yo(_+(l?P:-P)*S+R,i[0][0])/S,N=Math.max(N,D)}if(s){let D=0;!c&&!l||l&&!c&&f?D=Yo(_+k*S,s[1][0])/S:D=Ko(_+(l?P:-P)*S,s[0][0])/S,N=Math.max(N,D)}}}P=P+(P<0?N:-N),O=O+(O<0?C:-C),o&&(f?M>k*S?P=($T(c,l)?-O:O)/S:O=($T(c,l)?-P:P)*S:u?(P=O/S,l=c):(O=P*S,c=l));const T=c?_+O:_,I=l?w+P:w;return{width:j+(c?-O:O),height:E+(l?-P:P),x:a[0]*O*(c?-1:1)+T,y:a[1]*P*(l?-1:1)+I}}const zT={width:0,height:0,x:0,y:0},kZ={...zT,pointerX:0,pointerY:0,aspectRatio:1};function PZ(e){return[[0,0],[e.measured.width,e.measured.height]]}function AZ(e,t,n){const r=t.position.x+e.position.x,o=t.position.y+e.position.y,a=e.measured.width??0,i=e.measured.height??0,s=n[0]*a,c=n[1]*i;return[[r-s,o-c],[r+a-s,o+i-c]]}function TZ({domNode:e,nodeId:t,getStoreItems:n,onChange:r,onEnd:o}){const a=Ln(e);function i({controlPosition:c,boundaries:l,keepAspectRatio:u,onResizeStart:d,onResize:f,onResizeEnd:p,shouldResize:y}){let m={...zT},v={...kZ};const b=MZ(c);let x,_=null,w=[],j,E,S;const O=_2().on("start",P=>{const{nodeLookup:M,transform:k,snapGrid:R,snapToGrid:A,nodeOrigin:C,paneDomNode:N}=n();if(x=M.get(t),!x)return;_=(N==null?void 0:N.getBoundingClientRect())??null;const{xSnapped:T,ySnapped:I}=fl(P.sourceEvent,{transform:k,snapGrid:R,snapToGrid:A,containerBounds:_});m={width:x.measured.width??0,height:x.measured.height??0,x:x.position.x??0,y:x.position.y??0},v={...m,pointerX:T,pointerY:I,aspectRatio:m.width/m.height},j=void 0,x.parentId&&(x.extent==="parent"||x.expandParent)&&(j=M.get(x.parentId),E=j&&x.extent==="parent"?PZ(j):void 0),w=[],S=void 0;for(const[L,D]of M)if(D.parentId===t&&(w.push({id:L,position:{...D.position},extent:D.extent}),D.extent==="parent"||D.expandParent)){const B=AZ(D,x,D.origin??C);S?S=[[Math.min(B[0][0],S[0][0]),Math.min(B[0][1],S[0][1])],[Math.max(B[1][0],S[1][0]),Math.max(B[1][1],S[1][1])]]:S=B}d==null||d(P,{...m})}).on("drag",P=>{const{transform:M,snapGrid:k,snapToGrid:R,nodeOrigin:A}=n(),C=fl(P.sourceEvent,{transform:M,snapGrid:k,snapToGrid:R,containerBounds:_}),N=[];if(!x)return;const{x:T,y:I,width:L,height:D}=m,B={},H=x.origin??A,{width:F,height:z,x:G,y:Q}=NZ(v,b,C,l,u,H,E,S),oe=F!==L,Z=z!==D,q=G!==T&&oe,W=Q!==I&&Z;if(!q&&!W&&!oe&&!Z)return;if((q||W||H[0]===1||H[1]===1)&&(B.x=q?G:m.x,B.y=W?Q:m.y,m.x=B.x,m.y=B.y,w.length>0)){const $=G-T,se=Q-I;for(const le of w)le.position={x:le.position.x-$+H[0]*(F-L),y:le.position.y-se+H[1]*(z-D)},N.push(le)}if((oe||Z)&&(B.width=oe?F:m.width,B.height=Z?z:m.height,m.width=B.width,m.height=B.height),j&&x.expandParent){const $=H[0]*(B.width??0);B.x&&B.x<$&&(m.x=$,v.x=v.x-(B.x-$));const se=H[1]*(B.height??0);B.y&&B.y<se&&(m.y=se,v.y=v.y-(B.y-se))}const J=OZ({width:m.width,prevWidth:L,height:m.height,prevHeight:D,affectsX:b.affectsX,affectsY:b.affectsY}),te={...m,direction:J};(y==null?void 0:y(P,te))!==!1&&(f==null||f(P,te),r(B,N))}).on("end",P=>{p==null||p(P,{...m}),o==null||o()});a.call(O)}function s(){a.on(".drag",null)}return{update:i,destroy:s}}var VT={exports:{}},Hb={},UT;function RZ(){if(UT)return Hb;UT=1;var e=B9(),t=rk();function n(l,u){return l===u&&(l!==0||1/l===1/u)||l!==l&&u!==u}var r=typeof Object.is=="function"?Object.is:n,o=t.useSyncExternalStore,a=e.useRef,i=e.useEffect,s=e.useMemo,c=e.useDebugValue;return Hb.useSyncExternalStoreWithSelector=function(l,u,d,f,p){var y=a(null);if(y.current===null){var m={hasValue:!1,value:null};y.current=m}else m=y.current;y=s(function(){function b(E){if(!x){if(x=!0,_=E,E=f(E),p!==void 0&&m.hasValue){var S=m.value;if(p(S,E))return w=S}return w=E}if(S=w,r(_,E))return S;var O=f(E);return p!==void 0&&p(S,O)?S:(_=E,w=O)}var x=!1,_,w,j=d===void 0?null:d;return[function(){return b(u())},j===null?void 0:function(){return b(j())}]},[u,d,f,p]);var v=o(l,y[0],y[1]);return i(function(){m.hasValue=!0,m.value=v},[v]),c(v),v},Hb}var HT;function IZ(){return HT||(HT=1,VT.exports=RZ()),VT.exports}var DZ=IZ();let WT,Wb,qT,YT,KT,XT;AE=Xe(DZ),WT={BASE_URL:"/NoLLMChat/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_BASE_URL:"/NoLLMChat/",VITE_ROUTE_MODE:"hash"},Wb=e=>{let t;const n=new Set,r=(s,c)=>{const l=typeof s=="function"?s(t):s;if(!Object.is(l,t)){const u=t;t=c??(typeof l!="object"||l===null)?l:Object.assign({},t,l),n.forEach(d=>d(t,u))}},o=()=>t,a={setState:r,getState:o,getInitialState:()=>i,subscribe:s=>(n.add(s),()=>n.delete(s)),destroy:()=>{(WT?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},i=t=e(r,o,a);return a},qT=e=>e?Wb(e):Wb,{useDebugValue:YT}=U,{useSyncExternalStoreWithSelector:KT}=AE,XT=e=>e;function QT(e,t=XT,n){const r=KT(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return YT(r),r}const JT=(e,t)=>{const n=qT(e),r=(o,a=t)=>QT(n,o,a);return Object.assign(r,n),r},LZ=(e,t)=>e?JT(e,t):JT;function jt(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,o]of e)if(!Object.is(o,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}const kf=g.createContext(null),FZ=kf.Provider,GT=po.error001();function Ve(e,t){const n=g.useContext(kf);if(n===null)throw new Error(GT);return QT(n,e,t)}function vt(){const e=g.useContext(kf);if(e===null)throw new Error(GT);return g.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])}const ZT={display:"none"},BZ={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},eR="react-flow__node-desc",tR="react-flow__edge-desc",$Z="react-flow__aria-live",zZ=e=>e.ariaLiveMessage;function VZ({rfId:e}){const t=Ve(zZ);return h.jsx("div",{id:`${$Z}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:BZ,children:t})}function UZ({rfId:e,disableKeyboardA11y:t}){return h.jsxs(h.Fragment,{children:[h.jsxs("div",{id:`${eR}-${e}`,style:ZT,children:["Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "]}),h.jsx("div",{id:`${tR}-${e}`,style:ZT,children:"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."}),!t&&h.jsx(VZ,{rfId:e})]})}const HZ=e=>e.userSelectionActive?"none":"all";function Xi({position:e="top-left",children:t,className:n,style:r,...o}){const a=Ve(HZ),i=`${e}`.split("-");return h.jsx("div",{className:It(["react-flow__panel",n,...i]),style:{...r,pointerEvents:a},...o,children:t})}function WZ({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:h.jsx(Xi,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:h.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const qZ=e=>{const t=[],n=[];for(const[,r]of e.nodeLookup)r.selected&&t.push(r.internals.userNode);for(const[,r]of e.edgeLookup)r.selected&&n.push(r);return{selectedNodes:t,selectedEdges:n}},Pf=e=>e.id;function YZ(e,t){return jt(e.selectedNodes.map(Pf),t.selectedNodes.map(Pf))&&jt(e.selectedEdges.map(Pf),t.selectedEdges.map(Pf))}function KZ({onSelectionChange:e}){const t=vt(),{selectedNodes:n,selectedEdges:r}=Ve(qZ,YZ);return g.useEffect(()=>{const o={nodes:n,edges:r};e==null||e(o),t.getState().onSelectionChangeHandlers.forEach(a=>a(o))},[n,r,e]),null}const XZ=e=>!!e.onSelectionChangeHandlers;function QZ({onSelectionChange:e}){const t=Ve(XZ);return e||t?h.jsx(KZ,{onSelectionChange:e}):null}const nR=[0,0],JZ={x:0,y:0,zoom:1},GZ=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","onBeforeDelete","debug","autoPanSpeed","paneClickDistance"],rR=[...GZ,"rfId"],ZZ=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setPaneClickDistance:e.setPaneClickDistance}),oR={translateExtent:il,nodeOrigin:nR,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1",paneClickDistance:0};function eee(e){const{setNodes:t,setEdges:n,setMinZoom:r,setMaxZoom:o,setTranslateExtent:a,setNodeExtent:i,reset:s,setDefaultNodesAndEdges:c,setPaneClickDistance:l}=Ve(ZZ,jt),u=vt();g.useEffect(()=>(c(e.defaultNodes,e.defaultEdges),()=>{d.current=oR,s()}),[]);const d=g.useRef(oR);return g.useEffect(()=>{for(const f of rR){const p=e[f],y=d.current[f];p!==y&&(typeof e[f]>"u"||(f==="nodes"?t(p):f==="edges"?n(p):f==="minZoom"?r(p):f==="maxZoom"?o(p):f==="translateExtent"?a(p):f==="nodeExtent"?i(p):f==="paneClickDistance"?l(p):f==="fitView"?u.setState({fitViewOnInit:p}):f==="fitViewOptions"?u.setState({fitViewOnInitOptions:p}):u.setState({[f]:p})))}d.current=e},rR.map(f=>e[f])),null}function aR(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function tee(e){var r;const[t,n]=g.useState(e==="system"?null:e);return g.useEffect(()=>{if(e!=="system"){n(e);return}const o=aR(),a=()=>n(o!=null&&o.matches?"dark":"light");return a(),o==null||o.addEventListener("change",a),()=>{o==null||o.removeEventListener("change",a)}},[e]),t!==null?t:(r=aR())!=null&&r.matches?"dark":"light"}const iR=typeof document<"u"?document:null;function hl(e=null,t={target:iR,actInsideInputWithModifier:!0}){const[n,r]=g.useState(!1),o=g.useRef(!1),a=g.useRef(new Set([])),[i,s]=g.useMemo(()=>{if(e!==null){const c=(Array.isArray(e)?e:[e]).filter(u=>typeof u=="string").map(u=>u.replace("+",`
`).replace(`

`,`
+`).split(`
`)),l=c.reduce((u,d)=>u.concat(...d),[]);return[c,l]}return[[],[]]},[e]);return g.useEffect(()=>{const c=(t==null?void 0:t.target)||iR;if(e!==null){const l=f=>{if(o.current=f.ctrlKey||f.metaKey||f.shiftKey,(!o.current||o.current&&!t.actInsideInputWithModifier)&&Ab(f))return!1;const p=cR(f.code,s);a.current.add(f[p]),sR(i,a.current,!1)&&(f.preventDefault(),r(!0))},u=f=>{if((!o.current||o.current&&!t.actInsideInputWithModifier)&&Ab(f))return!1;const p=cR(f.code,s);sR(i,a.current,!0)?(r(!1),a.current.clear()):a.current.delete(f[p]),f.key==="Meta"&&a.current.clear(),o.current=!1},d=()=>{a.current.clear(),r(!1)};return c==null||c.addEventListener("keydown",l),c==null||c.addEventListener("keyup",u),window.addEventListener("blur",d),window.addEventListener("contextmenu",d),()=>{c==null||c.removeEventListener("keydown",l),c==null||c.removeEventListener("keyup",u),window.removeEventListener("blur",d),window.removeEventListener("contextmenu",d)}}},[e,r]),n}function sR(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(o=>t.has(o)))}function cR(e,t){return t.includes(e)?"code":"key"}const nee=()=>{const e=vt();return g.useMemo(()=>({zoomIn:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomOut:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1/1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomTo:(t,n)=>{const{panZoom:r}=e.getState();return r?r.scaleTo(t,{duration:n==null?void 0:n.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(t,n)=>{const{transform:[r,o,a],panZoom:i}=e.getState();return i?(await i.setViewport({x:t.x??r,y:t.y??o,zoom:t.zoom??a},{duration:n==null?void 0:n.duration}),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[t,n,r]=e.getState().transform;return{x:t,y:n,zoom:r}},fitView:t=>{const{nodeLookup:n,minZoom:r,maxZoom:o,panZoom:a,domNode:i}=e.getState();if(!a||!i)return Promise.resolve(!1);const s=Mb(n,t),{width:c,height:l}=Cf(i);return Nb({nodes:s,width:c,height:l,minZoom:r,maxZoom:o,panZoom:a},t)},setCenter:async(t,n,r)=>{const{width:o,height:a,maxZoom:i,panZoom:s}=e.getState(),c=typeof(r==null?void 0:r.zoom)<"u"?r.zoom:i,l=o/2-t*c,u=a/2-n*c;return s?(await s.setViewport({x:l,y:u,zoom:c},{duration:r==null?void 0:r.duration}),Promise.resolve(!0)):Promise.resolve(!1)},fitBounds:async(t,n)=>{const{width:r,height:o,minZoom:a,maxZoom:i,panZoom:s}=e.getState(),c=Pb(t,r,o,a,i,(n==null?void 0:n.padding)??.1);return s?(await s.setViewport(c,{duration:n==null?void 0:n.duration}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(t,n={snapToGrid:!0})=>{const{transform:r,snapGrid:o,domNode:a}=e.getState();if(!a)return t;const{x:i,y:s}=a.getBoundingClientRect(),c={x:t.x-i,y:t.y-s};return dl(c,r,n.snapToGrid,o)},flowToScreenPosition:t=>{const{transform:n,domNode:r}=e.getState();if(!r)return t;const{x:o,y:a}=r.getBoundingClientRect(),i=pT(t,n);return{x:i.x+o,y:i.y+a}}}),[])};function lR(e,t){const n=[],r=new Map,o=[];for(const a of e)if(a.type==="add"){o.push(a);continue}else if(a.type==="remove"||a.type==="replace")r.set(a.id,[a]);else{const i=r.get(a.id);i?i.push(a):r.set(a.id,[a])}for(const a of t){const i=r.get(a.id);if(!i){n.push(a);continue}if(i[0].type==="remove")continue;if(i[0].type==="replace"){n.push({...i[0].item});continue}const s={...a};for(const c of i)ree(c,s);n.push(s)}return o.length&&o.forEach(a=>{a.index!==void 0?n.splice(a.index,0,{...a.item}):n.push({...a.item})}),n}function ree(e,t){switch(e.type){case"select":{t.selected=e.selected;break}case"position":{typeof e.position<"u"&&(t.position=e.position),typeof e.dragging<"u"&&(t.dragging=e.dragging);break}case"dimensions":{typeof e.dimensions<"u"&&(t.measured??(t.measured={}),t.measured.width=e.dimensions.width,t.measured.height=e.dimensions.height,e.setAttributes&&(t.width=e.dimensions.width,t.height=e.dimensions.height)),typeof e.resizing=="boolean"&&(t.resizing=e.resizing);break}}}function Na(e,t){return lR(e,t)}function ml(e,t){return lR(e,t)}function ka(e,t){return{id:e,type:"select",selected:t}}function Qi(e,t=new Set,n=!1){const r=[];for(const[o,a]of e){const i=t.has(o);!(a.selected===void 0&&!i)&&a.selected!==i&&(n&&(a.selected=i),r.push(ka(a.id,i)))}return r}function uR({items:e=[],lookup:t}){var o;const n=[],r=new Map(e.map(a=>[a.id,a]));for(const[a,i]of e.entries()){const s=t.get(i.id),c=((o=s==null?void 0:s.internals)==null?void 0:o.userNode)??s;c!==void 0&&c!==i&&n.push({id:i.id,item:i,type:"replace"}),c===void 0&&n.push({item:i,type:"add",index:a})}for(const[a]of t)r.get(a)===void 0&&n.push({id:a,type:"remove"});return n}function dR(e){return{id:e.id,type:"remove"}}const fR=e=>VG(e),oee=e=>aT(e);function pR(e){return g.forwardRef(e)}const aee=typeof window<"u"?g.useLayoutEffect:g.useEffect;function hR(e){const[t,n]=g.useState(BigInt(0)),[r]=g.useState(()=>iee(()=>n(o=>o+BigInt(1))));return aee(()=>{const o=r.get();o.length&&(e(o),r.reset())},[t]),r}function iee(e){let t=[];return{get:()=>t,reset:()=>{t=[]},push:n=>{t.push(n),e()}}}const mR=g.createContext(null);function see({children:e}){const t=vt(),n=g.useCallback(s=>{const{nodes:c=[],setNodes:l,hasDefaultNodes:u,onNodesChange:d,nodeLookup:f}=t.getState();let p=c;for(const y of s)p=typeof y=="function"?y(p):y;u?l(p):d&&d(uR({items:p,lookup:f}))},[]),r=hR(n),o=g.useCallback(s=>{const{edges:c=[],setEdges:l,hasDefaultEdges:u,onEdgesChange:d,edgeLookup:f}=t.getState();let p=c;for(const y of s)p=typeof y=="function"?y(p):y;u?l(p):d&&d(uR({items:p,lookup:f}))},[]),a=hR(o),i=g.useMemo(()=>({nodeQueue:r,edgeQueue:a}),[]);return h.jsx(mR.Provider,{value:i,children:e})}function cee(){const e=g.useContext(mR);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}const lee=e=>!!e.panZoom;function Fn(){const e=nee(),t=vt(),n=cee(),r=Ve(lee),o=g.useMemo(()=>{const a=d=>t.getState().nodeLookup.get(d),i=d=>{n.nodeQueue.push(d)},s=d=>{n.edgeQueue.push(d)},c=d=>{var b,x;const{nodeLookup:f,nodeOrigin:p}=t.getState(),y=fR(d)?d:f.get(d.id),m=y.parentId?mT(y.position,y.measured,y.parentId,f,p):y.position,v={id:y.id,position:m,width:((b=y.measured)==null?void 0:b.width)??y.width,height:((x=y.measured)==null?void 0:x.height)??y.height,data:y.data};return Wi(v)},l=(d,f,p={replace:!1})=>{i(y=>y.map(m=>{if(m.id===d){const v=typeof f=="function"?f(m):f;return p.replace&&fR(v)?v:{...m,...v}}return m}))},u=(d,f,p={replace:!1})=>{s(y=>y.map(m=>{if(m.id===d){const v=typeof f=="function"?f(m):f;return p.replace&&oee(v)?v:{...m,...v}}return m}))};return{getNodes:()=>t.getState().nodes.map(d=>({...d})),getNode:d=>{var f;return(f=a(d))==null?void 0:f.internals.userNode},getInternalNode:a,getEdges:()=>{const{edges:d=[]}=t.getState();return d.map(f=>({...f}))},getEdge:d=>t.getState().edgeLookup.get(d),setNodes:i,setEdges:s,addNodes:d=>{const f=Array.isArray(d)?d:[d];n.nodeQueue.push(p=>[...p,...f])},addEdges:d=>{const f=Array.isArray(d)?d:[d];n.edgeQueue.push(p=>[...p,...f])},toObject:()=>{const{nodes:d=[],edges:f=[],transform:p}=t.getState(),[y,m,v]=p;return{nodes:d.map(b=>({...b})),edges:f.map(b=>({...b})),viewport:{x:y,y:m,zoom:v}}},deleteElements:async({nodes:d=[],edges:f=[]})=>{const{nodes:p,edges:y,onNodesDelete:m,onEdgesDelete:v,triggerNodeChanges:b,triggerEdgeChanges:x,onDelete:_,onBeforeDelete:w}=t.getState(),{nodes:j,edges:E}=await WG({nodesToRemove:d,edgesToRemove:f,nodes:p,edges:y,onBeforeDelete:w}),S=E.length>0,O=j.length>0;if(S){const P=E.map(dR);v==null||v(E),x(P)}if(O){const P=j.map(dR);m==null||m(j),b(P)}return(O||S)&&(_==null||_({nodes:j,edges:E})),{deletedNodes:j,deletedEdges:E}},getIntersectingNodes:(d,f=!0,p)=>{const y=fT(d),m=y?d:c(d),v=p!==void 0;return m?(p||t.getState().nodes).filter(b=>{const x=t.getState().nodeLookup.get(b.id);if(x&&!y&&(b.id===d.id||!x.internals.positionAbsolute))return!1;const _=Wi(v?b:x),w=ul(_,m);return f&&w>0||w>=m.width*m.height}):[]},isNodeIntersecting:(d,f,p=!0)=>{const y=fT(d)?d:c(d);if(!y)return!1;const m=ul(y,f);return p&&m>0||m>=y.width*y.height},updateNode:l,updateNodeData:(d,f,p={replace:!1})=>{l(d,y=>{const m=typeof f=="function"?f(y):f;return p.replace?{...y,data:m}:{...y,data:{...y.data,...m}}},p)},updateEdge:u,updateEdgeData:(d,f,p={replace:!1})=>{u(d,y=>{const m=typeof f=="function"?f(y):f;return p.replace?{...y,data:m}:{...y,data:{...y.data,...m}}},p)},getNodesBounds:d=>{const{nodeLookup:f,nodeOrigin:p}=t.getState();return UG(d,{nodeLookup:f,nodeOrigin:p})},getHandleConnections:({type:d,id:f,nodeId:p})=>{var y;return Array.from(((y=t.getState().connectionLookup.get(`${p}-${d}-${f??null}`))==null?void 0:y.values())??[])}}},[]);return g.useMemo(()=>({...o,...e,viewportInitialized:r}),[r])}const yR=e=>e.selected,uee={actInsideInputWithModifier:!1},dee=typeof window<"u"?window:void 0;function fee({deleteKeyCode:e,multiSelectionKeyCode:t}){const n=vt(),{deleteElements:r}=Fn(),o=hl(e,uee),a=hl(t,{target:dee});g.useEffect(()=>{if(o){const{edges:i,nodes:s}=n.getState();r({nodes:s.filter(yR),edges:i.filter(yR)}),n.setState({nodesSelectionActive:!1})}},[o]),g.useEffect(()=>{n.setState({multiSelectionActive:a})},[a])}function pee(e){const t=vt();g.useEffect(()=>{const n=()=>{var o,a;if(!e.current)return!1;const r=Cf(e.current);(r.height===0||r.width===0)&&((a=(o=t.getState()).onError)==null||a.call(o,"004",po.error004())),t.setState({width:r.width||500,height:r.height||500})};if(e.current){n(),window.addEventListener("resize",n);const r=new ResizeObserver(()=>n());return r.observe(e.current),()=>{window.removeEventListener("resize",n),r&&e.current&&r.unobserve(e.current)}}},[])}const Af={position:"absolute",width:"100%",height:"100%",top:0,left:0},hee=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib});function mee({onPaneContextMenu:e,zoomOnScroll:t=!0,zoomOnPinch:n=!0,panOnScroll:r=!1,panOnScrollSpeed:o=.5,panOnScrollMode:a=Wo.Free,zoomOnDoubleClick:i=!0,panOnDrag:s=!0,defaultViewport:c,translateExtent:l,minZoom:u,maxZoom:d,zoomActivationKeyCode:f,preventScrolling:p=!0,children:y,noWheelClassName:m,noPanClassName:v,onViewportChange:b,isControlledViewport:x,paneClickDistance:_}){const w=vt(),j=g.useRef(null),{userSelectionActive:E,lib:S}=Ve(hee,jt),O=hl(f),P=g.useRef();pee(j);const M=g.useCallback(k=>{b==null||b({x:k[0],y:k[1],zoom:k[2]}),x||w.setState({transform:k})},[b,x]);return g.useEffect(()=>{if(j.current){P.current=EZ({domNode:j.current,minZoom:u,maxZoom:d,translateExtent:l,viewport:c,paneClickDistance:_,onDraggingChange:C=>w.setState({paneDragging:C}),onPanZoomStart:(C,N)=>{const{onViewportChangeStart:T,onMoveStart:I}=w.getState();I==null||I(C,N),T==null||T(N)},onPanZoom:(C,N)=>{const{onViewportChange:T,onMove:I}=w.getState();I==null||I(C,N),T==null||T(N)},onPanZoomEnd:(C,N)=>{const{onViewportChangeEnd:T,onMoveEnd:I}=w.getState();I==null||I(C,N),T==null||T(N)}});const{x:k,y:R,zoom:A}=P.current.getViewport();return w.setState({panZoom:P.current,transform:[k,R,A],domNode:j.current.closest(".react-flow")}),()=>{var C;(C=P.current)==null||C.destroy()}}},[]),g.useEffect(()=>{var k;(k=P.current)==null||k.update({onPaneContextMenu:e,zoomOnScroll:t,zoomOnPinch:n,panOnScroll:r,panOnScrollSpeed:o,panOnScrollMode:a,zoomOnDoubleClick:i,panOnDrag:s,zoomActivationKeyPressed:O,preventScrolling:p,noPanClassName:v,userSelectionActive:E,noWheelClassName:m,lib:S,onTransformChange:M})},[e,t,n,r,o,a,i,s,O,p,v,E,m,S,M]),h.jsx("div",{className:"react-flow__renderer",ref:j,style:Af,children:y})}const yee=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function gee(){const{userSelectionActive:e,userSelectionRect:t}=Ve(yee,jt);return e&&t?h.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}const qb=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},vee=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging});function bee({isSelecting:e,selectionKeyPressed:t,selectionMode:n=sl.Full,panOnDrag:r,selectionOnDrag:o,onSelectionStart:a,onSelectionEnd:i,onPaneClick:s,onPaneContextMenu:c,onPaneScroll:l,onPaneMouseEnter:u,onPaneMouseMove:d,onPaneMouseLeave:f,children:p}){const y=g.useRef(null),m=vt(),v=g.useRef(0),b=g.useRef(0),x=g.useRef(),_=g.useRef(new Map),{userSelectionActive:w,elementsSelectable:j,dragging:E}=Ve(vee,jt),S=j&&(e||w),O=g.useRef(!1),P=g.useRef(!1),M=()=>{m.setState({userSelectionActive:!1,userSelectionRect:null}),v.current=0,b.current=0},k=L=>{if(O.current){O.current=!1;return}s==null||s(L),m.getState().resetSelectedElements(),m.setState({nodesSelectionActive:!1})},R=L=>{if(Array.isArray(r)&&(r!=null&&r.includes(2))){L.preventDefault();return}c==null||c(L)},A=l?L=>l(L):void 0,C=L=>{var G,Q,oe,Z;const{resetSelectedElements:D,domNode:B,edgeLookup:H}=m.getState();if(x.current=B==null?void 0:B.getBoundingClientRect(),!j||!e||L.button!==0||L.target!==y.current||!x.current)return;(Q=(G=L.target)==null?void 0:G.setPointerCapture)==null||Q.call(G,L.pointerId),P.current=!0,O.current=!1,_.current=new Map;for(const[q,W]of H)_.current.set(W.source,((oe=_.current.get(W.source))==null?void 0:oe.add(q))||new Set([q])),_.current.set(W.target,((Z=_.current.get(W.target))==null?void 0:Z.add(q))||new Set([q]));const{x:F,y:z}=mo(L.nativeEvent,x.current);D(),m.setState({userSelectionRect:{width:0,height:0,startX:F,startY:z,x:F,y:z}}),a==null||a(L)},N=L=>{const{userSelectionRect:D,edgeLookup:B,transform:H,nodeLookup:F,triggerNodeChanges:z,triggerEdgeChanges:G}=m.getState();if(!x.current||!D)return;O.current=!0;const{x:Q,y:oe}=mo(L.nativeEvent,x.current),{startX:Z,startY:q}=D,W={startX:Z,startY:q,x:Q<Z?Q:Z,y:oe<q?oe:q,width:Math.abs(Q-Z),height:Math.abs(oe-q)},J=iT(F,W,H,n===sl.Partial,!0),te=new Set,$=new Set;for(const se of J){$.add(se.id);const le=_.current.get(se.id);if(le)for(const ve of le)te.add(ve)}if(v.current!==$.size){v.current=$.size;const se=Qi(F,$,!0);z(se)}if(b.current!==te.size){b.current=te.size;const se=Qi(B,te);G(se)}m.setState({userSelectionRect:W,userSelectionActive:!0,nodesSelectionActive:!1})},T=L=>{var B,H;if(L.button!==0||!P.current)return;(H=(B=L.target)==null?void 0:B.releasePointerCapture)==null||H.call(B,L.pointerId);const{userSelectionRect:D}=m.getState();!w&&D&&L.target===y.current&&(k==null||k(L)),v.current>0&&m.setState({nodesSelectionActive:!0}),M(),i==null||i(L),(t||o)&&(O.current=!1),P.current=!1},I=r===!0||Array.isArray(r)&&r.includes(0);return h.jsxs("div",{className:It(["react-flow__pane",{draggable:I,dragging:E,selection:e}]),onClick:S?void 0:qb(k,y),onContextMenu:qb(R,y),onWheel:qb(A,y),onPointerEnter:S?void 0:u,onPointerDown:S?C:d,onPointerMove:S?N:d,onPointerUp:S?T:void 0,onPointerLeave:f,ref:y,style:Af,children:[p,h.jsx(gee,{})]})}function Yb({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:o,unselectNodesAndEdges:a,multiSelectionActive:i,nodeLookup:s,onError:c}=t.getState(),l=s.get(e);if(!l){c==null||c("012",po.error012(e));return}t.setState({nodesSelectionActive:!1}),l.selected?(n||l.selected&&i)&&(a({nodes:[l],edges:[]}),requestAnimationFrame(()=>{var u;return(u=r==null?void 0:r.current)==null?void 0:u.blur()})):o([e])}function gR({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:o,isSelectable:a,nodeClickDistance:i}){const s=vt(),[c,l]=g.useState(!1),u=g.useRef();return g.useEffect(()=>{u.current=uZ({getStoreItems:()=>s.getState(),onNodeMouseDown:d=>{Yb({id:d,store:s,nodeRef:e})},onDragStart:()=>{l(!0)},onDragStop:()=>{l(!1)}})},[]),g.useEffect(()=>{var d,f;if(t)(d=u.current)==null||d.destroy();else if(e.current)return(f=u.current)==null||f.update({noDragClassName:n,handleSelector:r,domNode:e.current,isSelectable:a,nodeId:o,nodeClickDistance:i}),()=>{var p;(p=u.current)==null||p.destroy()}},[n,r,t,a,e,o]),c}const xee=e=>t=>t.selected&&(t.draggable||e&&typeof t.draggable>"u");function vR(){const e=vt();return g.useCallback(t=>{const{nodeExtent:n,snapToGrid:r,snapGrid:o,nodesDraggable:a,onError:i,updateNodePositions:s,nodeLookup:c,nodeOrigin:l}=e.getState(),u=new Map,d=xee(a),f=r?o[0]:5,p=r?o[1]:5,y=t.direction.x*f*t.factor,m=t.direction.y*p*t.factor;for(const[,v]of c){if(!d(v))continue;let b={x:v.internals.positionAbsolute.x+y,y:v.internals.positionAbsolute.y+m};r&&(b=Ef(b,o));const{position:x,positionAbsolute:_}=sT({nodeId:v.id,nextPosition:b,nodeLookup:c,nodeExtent:n,nodeOrigin:l,onError:i});v.position=x,v.internals.positionAbsolute=_,u.set(v.id,v)}s(u)},[])}const Kb=g.createContext(null),wee=Kb.Provider;Kb.Consumer;const Xb=()=>g.useContext(Kb),_ee=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),jee=(e,t,n)=>r=>{const{connectionClickStartHandle:o,connectionMode:a,connection:i}=r,{fromHandle:s,toHandle:c,isValid:l}=i,u=(c==null?void 0:c.nodeId)===e&&(c==null?void 0:c.id)===t&&(c==null?void 0:c.type)===n;return{connectingFrom:(s==null?void 0:s.nodeId)===e&&(s==null?void 0:s.id)===t&&(s==null?void 0:s.type)===n,connectingTo:u,clickConnecting:(o==null?void 0:o.nodeId)===e&&(o==null?void 0:o.id)===t&&(o==null?void 0:o.type)===n,isPossibleEndHandle:a===Ui.Strict?(s==null?void 0:s.type)!==n:e!==(s==null?void 0:s.nodeId)||t!==(s==null?void 0:s.id),connectionInProcess:!!s,valid:u&&l}};function Eee({type:e="source",position:t=fe.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:o=!0,isConnectableEnd:a=!0,id:i,onConnect:s,children:c,className:l,onMouseDown:u,onTouchStart:d,...f},p){var C,N;const y=i||null,m=e==="target",v=vt(),b=Xb(),{connectOnClick:x,noPanClassName:_,rfId:w}=Ve(_ee,jt),{connectingFrom:j,connectingTo:E,clickConnecting:S,isPossibleEndHandle:O,connectionInProcess:P,valid:M}=Ve(jee(b,y,e),jt);b||((N=(C=v.getState()).onError)==null||N.call(C,"010",po.error010()));const k=T=>{const{defaultEdgeOptions:I,onConnect:L,hasDefaultEdges:D}=v.getState(),B={...I,...T};if(D){const{edges:H,setEdges:F}=v.getState();F(jT(B,H))}L==null||L(B),s==null||s(B)},R=T=>{if(!b)return;const I=gT(T.nativeEvent);if(o&&(I&&T.button===0||!I)){const L=v.getState();zb.onPointerDown(T.nativeEvent,{autoPanOnConnect:L.autoPanOnConnect,connectionMode:L.connectionMode,connectionRadius:L.connectionRadius,domNode:L.domNode,nodeLookup:L.nodeLookup,lib:L.lib,isTarget:m,handleId:y,nodeId:b,flowId:L.rfId,panBy:L.panBy,cancelConnection:L.cancelConnection,onConnectStart:L.onConnectStart,onConnectEnd:L.onConnectEnd,updateConnection:L.updateConnection,onConnect:k,isValidConnection:n||L.isValidConnection,getTransform:()=>v.getState().transform,getFromHandle:()=>v.getState().connection.fromHandle,autoPanSpeed:L.autoPanSpeed})}I?u==null||u(T):d==null||d(T)},A=T=>{const{onClickConnectStart:I,onClickConnectEnd:L,connectionClickStartHandle:D,connectionMode:B,isValidConnection:H,lib:F,rfId:z,nodeLookup:G,connection:Q}=v.getState();if(!b||!D&&!o)return;if(!D){I==null||I(T.nativeEvent,{nodeId:b,handleId:y,handleType:e}),v.setState({connectionClickStartHandle:{nodeId:b,type:e,id:y}});return}const oe=yT(T.target),Z=n||H,{connection:q,isValid:W}=zb.isValid(T.nativeEvent,{handle:{nodeId:b,id:y,type:e},connectionMode:B,fromNodeId:D.nodeId,fromHandleId:D.id||null,fromType:D.type,isValidConnection:Z,flowId:z,doc:oe,lib:F,nodeLookup:G});W&&q&&k(q);const J=structuredClone(Q);delete J.inProgress,J.toPosition=J.toHandle?J.toHandle.position:null,L==null||L(T,J),v.setState({connectionClickStartHandle:null})};return h.jsx("div",{"data-handleid":y,"data-nodeid":b,"data-handlepos":t,"data-id":`${w}-${b}-${y}-${e}`,className:It(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",_,l,{source:!m,target:m,connectable:r,connectablestart:o,connectableend:a,clickconnecting:S,connectingfrom:j,connectingto:E,valid:M,connectionindicator:r&&(!P||O)&&(P?a:o)}]),onMouseDown:R,onTouchStart:R,onClick:x?A:void 0,ref:p,...f,children:c})}const yl=g.memo(pR(Eee));function See({data:e,isConnectable:t,sourcePosition:n=fe.Bottom}){return h.jsxs(h.Fragment,{children:[e==null?void 0:e.label,h.jsx(yl,{type:"source",position:n,isConnectable:t})]})}function Cee({data:e,isConnectable:t,targetPosition:n=fe.Top,sourcePosition:r=fe.Bottom}){return h.jsxs(h.Fragment,{children:[h.jsx(yl,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,h.jsx(yl,{type:"source",position:r,isConnectable:t})]})}function Oee(){return null}function Mee({data:e,isConnectable:t,targetPosition:n=fe.Top}){return h.jsxs(h.Fragment,{children:[h.jsx(yl,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label]})}const Tf={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},bR={input:See,default:Cee,output:Mee,group:Oee};function Nee(e){var t,n,r,o;return e.internals.handleBounds===void 0?{width:e.width??e.initialWidth??((t=e.style)==null?void 0:t.width),height:e.height??e.initialHeight??((n=e.style)==null?void 0:n.height)}:{width:e.width??((r=e.style)==null?void 0:r.width),height:e.height??((o=e.style)==null?void 0:o.height)}}const kee=e=>{const{width:t,height:n,x:r,y:o}=ll(e.nodeLookup,{filter:a=>!!a.selected});return{width:hr(t)?t:null,height:hr(n)?n:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${r}px,${o}px)`}};function Pee({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=vt(),{width:o,height:a,transformString:i,userSelectionActive:s}=Ve(kee,jt),c=vR(),l=g.useRef(null);if(g.useEffect(()=>{var f;n||((f=l.current)==null||f.focus({preventScroll:!0}))},[n]),gR({nodeRef:l}),s||!o||!a)return null;const u=e?f=>{const p=r.getState().nodes.filter(y=>y.selected);e(f,p)}:void 0,d=f=>{Object.prototype.hasOwnProperty.call(Tf,f.key)&&c({direction:Tf[f.key],factor:f.shiftKey?4:1})};return h.jsx("div",{className:It(["react-flow__nodesselection","react-flow__container",t]),style:{transform:i},children:h.jsx("div",{ref:l,className:"react-flow__nodesselection-rect",onContextMenu:u,tabIndex:n?void 0:-1,onKeyDown:n?void 0:d,style:{width:o,height:a}})})}const xR=typeof window<"u"?window:void 0,Aee=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function wR({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:o,onPaneContextMenu:a,onPaneScroll:i,paneClickDistance:s,deleteKeyCode:c,selectionKeyCode:l,selectionOnDrag:u,selectionMode:d,onSelectionStart:f,onSelectionEnd:p,multiSelectionKeyCode:y,panActivationKeyCode:m,zoomActivationKeyCode:v,elementsSelectable:b,zoomOnScroll:x,zoomOnPinch:_,panOnScroll:w,panOnScrollSpeed:j,panOnScrollMode:E,zoomOnDoubleClick:S,panOnDrag:O,defaultViewport:P,translateExtent:M,minZoom:k,maxZoom:R,preventScrolling:A,onSelectionContextMenu:C,noWheelClassName:N,noPanClassName:T,disableKeyboardA11y:I,onViewportChange:L,isControlledViewport:D}){const{nodesSelectionActive:B,userSelectionActive:H}=Ve(Aee),F=hl(l,{target:xR}),z=hl(m,{target:xR}),G=z||O,Q=z||w,oe=u&&G!==!0,Z=F||H||oe;return fee({deleteKeyCode:c,multiSelectionKeyCode:y}),h.jsx(mee,{onPaneContextMenu:a,elementsSelectable:b,zoomOnScroll:x,zoomOnPinch:_,panOnScroll:Q,panOnScrollSpeed:j,panOnScrollMode:E,zoomOnDoubleClick:S,panOnDrag:!F&&G,defaultViewport:P,translateExtent:M,minZoom:k,maxZoom:R,zoomActivationKeyCode:v,preventScrolling:A,noWheelClassName:N,noPanClassName:T,onViewportChange:L,isControlledViewport:D,paneClickDistance:s,children:h.jsxs(bee,{onSelectionStart:f,onSelectionEnd:p,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:o,onPaneContextMenu:a,onPaneScroll:i,panOnDrag:G,isSelecting:!!Z,selectionMode:d,selectionKeyPressed:F,selectionOnDrag:oe,children:[e,B&&h.jsx(Pee,{onSelectionContextMenu:C,noPanClassName:T,disableKeyboardA11y:I})]})})}wR.displayName="FlowRenderer";const Tee=g.memo(wR),Ree=e=>t=>e?iT(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map(n=>n.id):Array.from(t.nodeLookup.keys());function Iee(e){return Ve(g.useCallback(Ree(e),[e]),jt)}const Dee=e=>e.updateNodeInternals;function Lee(){const e=Ve(Dee),[t]=g.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(n=>{const r=new Map;n.forEach(o=>{const a=o.target.getAttribute("data-id");r.set(a,{id:a,nodeElement:o.target,force:!0})}),e(r)}));return g.useEffect(()=>()=>{t==null||t.disconnect()},[t]),t}function Fee({node:e,nodeType:t,hasDimensions:n,resizeObserver:r}){const o=vt(),a=g.useRef(null),i=g.useRef(null),s=g.useRef(e.sourcePosition),c=g.useRef(e.targetPosition),l=g.useRef(t),u=n&&!!e.internals.handleBounds;return g.useEffect(()=>{a.current&&!e.hidden&&(!u||i.current!==a.current)&&(i.current&&(r==null||r.unobserve(i.current)),r==null||r.observe(a.current),i.current=a.current)},[u,e.hidden]),g.useEffect(()=>()=>{i.current&&(r==null||r.unobserve(i.current),i.current=null)},[]),g.useEffect(()=>{if(a.current){const d=l.current!==t,f=s.current!==e.sourcePosition,p=c.current!==e.targetPosition;(d||f||p)&&(l.current=t,s.current=e.sourcePosition,c.current=e.targetPosition,o.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:a.current,force:!0}]])))}},[e.id,t,e.sourcePosition,e.targetPosition]),a}function Bee({id:e,onClick:t,onMouseEnter:n,onMouseMove:r,onMouseLeave:o,onContextMenu:a,onDoubleClick:i,nodesDraggable:s,elementsSelectable:c,nodesConnectable:l,nodesFocusable:u,resizeObserver:d,noDragClassName:f,noPanClassName:p,disableKeyboardA11y:y,rfId:m,nodeTypes:v,nodeExtent:b,nodeClickDistance:x,onError:_}){const{node:w,internals:j,isParent:E}=Ve(q=>{const W=q.nodeLookup.get(e),J=q.parentLookup.has(e);return{node:W,internals:W.internals,isParent:J}},jt);let S=w.type||"default",O=(v==null?void 0:v[S])||bR[S];O===void 0&&(_==null||_("003",po.error003(S)),S="default",O=bR.default);const P=!!(w.draggable||s&&typeof w.draggable>"u"),M=!!(w.selectable||c&&typeof w.selectable>"u"),k=!!(w.connectable||l&&typeof w.connectable>"u"),R=!!(w.focusable||u&&typeof w.focusable>"u"),A=vt(),C=hT(w),N=Fee({node:w,nodeType:S,hasDimensions:C,resizeObserver:d}),T=gR({nodeRef:N,disabled:w.hidden||!P,noDragClassName:f,handleSelector:w.dragHandle,nodeId:e,isSelectable:M,nodeClickDistance:x}),I=vR();if(w.hidden)return null;const L=ho(w),D=Nee(w),B=M||P||t||n||r||o,H=n?q=>n(q,{...j.userNode}):void 0,F=r?q=>r(q,{...j.userNode}):void 0,z=o?q=>o(q,{...j.userNode}):void 0,G=a?q=>a(q,{...j.userNode}):void 0,Q=i?q=>i(q,{...j.userNode}):void 0,oe=q=>{const{selectNodesOnDrag:W,nodeDragThreshold:J}=A.getState();M&&(!W||!P||J>0)&&Yb({id:e,store:A,nodeRef:N}),t&&t(q,{...j.userNode})},Z=q=>{if(!(Ab(q.nativeEvent)||y))if(eT.includes(q.key)&&M){const W=q.key==="Escape";Yb({id:e,store:A,unselect:W,nodeRef:N})}else P&&w.selected&&Object.prototype.hasOwnProperty.call(Tf,q.key)&&(A.setState({ariaLiveMessage:`Moved selected node ${q.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~j.positionAbsolute.x}, y: ${~~j.positionAbsolute.y}`}),I({direction:Tf[q.key],factor:q.shiftKey?4:1}))};return h.jsx("div",{className:It(["react-flow__node",`react-flow__node-${S}`,{[p]:P},w.className,{selected:w.selected,selectable:M,parent:E,draggable:P,dragging:T}]),ref:N,style:{zIndex:j.z,transform:`translate(${j.positionAbsolute.x}px,${j.positionAbsolute.y}px)`,pointerEvents:B?"all":"none",visibility:C?"visible":"hidden",...w.style,...D},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:H,onMouseMove:F,onMouseLeave:z,onContextMenu:G,onClick:oe,onDoubleClick:Q,onKeyDown:R?Z:void 0,tabIndex:R?0:void 0,role:R?"button":void 0,"aria-describedby":y?void 0:`${eR}-${m}`,"aria-label":w.ariaLabel,children:h.jsx(wee,{value:e,children:h.jsx(O,{id:e,data:w.data,type:S,positionAbsoluteX:j.positionAbsolute.x,positionAbsoluteY:j.positionAbsolute.y,selected:w.selected,selectable:M,draggable:P,deletable:w.deletable??!0,isConnectable:k,sourcePosition:w.sourcePosition,targetPosition:w.targetPosition,dragging:T,dragHandle:w.dragHandle,zIndex:j.z,parentId:w.parentId,...L})})})}const $ee=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function _R(e){const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:o,onError:a}=Ve($ee,jt),i=Iee(e.onlyRenderVisibleElements),s=Lee();return h.jsx("div",{className:"react-flow__nodes",style:Af,children:i.map(c=>h.jsx(Bee,{id:c,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:s,nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:o,nodeClickDistance:e.nodeClickDistance,onError:a},c))})}_R.displayName="NodeRenderer";const zee=g.memo(_R);function Vee(e){return Ve(g.useCallback(t=>{if(!e)return t.edges.map(r=>r.id);const n=[];if(t.width&&t.height)for(const r of t.edges){const o=t.nodeLookup.get(r.source),a=t.nodeLookup.get(r.target);o&&a&&XG({sourceNode:o,targetNode:a,width:t.width,height:t.height,transform:t.transform})&&n.push(r.id)}return n},[e]),jt)}const Uee=({color:e="none",strokeWidth:t=1})=>h.jsx("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),Hee=({color:e="none",strokeWidth:t=1})=>h.jsx("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),jR={[xf.Arrow]:Uee,[xf.ArrowClosed]:Hee};function Wee(e){const t=vt();return g.useMemo(()=>{var n,r;return Object.prototype.hasOwnProperty.call(jR,e)?jR[e]:((r=(n=t.getState()).onError)==null||r.call(n,"009",po.error009(e)),null)},[e])}const qee=({id:e,type:t,color:n,width:r=12.5,height:o=12.5,markerUnits:a="strokeWidth",strokeWidth:i,orient:s="auto-start-reverse"})=>{const c=Wee(t);return c?h.jsx("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${o}`,viewBox:"-10 -10 20 20",markerUnits:a,orient:s,refX:"0",refY:"0",children:h.jsx(c,{color:n,strokeWidth:i})}):null},ER=({defaultColor:e,rfId:t})=>{const n=Ve(a=>a.edges),r=Ve(a=>a.defaultEdgeOptions),o=g.useMemo(()=>nZ(n,{id:t,defaultColor:e,defaultMarkerStart:r==null?void 0:r.markerStart,defaultMarkerEnd:r==null?void 0:r.markerEnd}),[n,r,t,e]);return o.length?h.jsx("svg",{className:"react-flow__marker",children:h.jsx("defs",{children:o.map(a=>h.jsx(qee,{id:a.id,type:a.type,color:a.color,width:a.width,height:a.height,markerUnits:a.markerUnits,strokeWidth:a.strokeWidth,orient:a.orient},a.id))})}):null};ER.displayName="MarkerDefinitions";var Yee=g.memo(ER);function SR({x:e,y:t,label:n,labelStyle:r={},labelShowBg:o=!0,labelBgStyle:a={},labelBgPadding:i=[2,4],labelBgBorderRadius:s=2,children:c,className:l,...u}){const[d,f]=g.useState({x:1,y:0,width:0,height:0}),p=It(["react-flow__edge-textwrapper",l]),y=g.useRef(null);return g.useEffect(()=>{if(y.current){const m=y.current.getBBox();f({x:m.x,y:m.y,width:m.width,height:m.height})}},[n]),typeof n>"u"||!n?null:h.jsxs("g",{transform:`translate(${e-d.width/2} ${t-d.height/2})`,className:p,visibility:d.width?"visible":"hidden",...u,children:[o&&h.jsx("rect",{width:d.width+2*i[0],x:-i[0],y:-i[1],height:d.height+2*i[1],className:"react-flow__edge-textbg",style:a,rx:s,ry:s}),h.jsx("text",{className:"react-flow__edge-text",y:d.height/2,dy:"0.3em",ref:y,style:r,children:n}),c]})}SR.displayName="EdgeText";const Kee=g.memo(SR);function Rf({id:e,path:t,labelX:n,labelY:r,label:o,labelStyle:a,labelShowBg:i,labelBgStyle:s,labelBgPadding:c,labelBgBorderRadius:l,style:u,markerEnd:d,markerStart:f,className:p,interactionWidth:y=20}){return h.jsxs(h.Fragment,{children:[h.jsx("path",{id:e,style:u,d:t,fill:"none",className:It(["react-flow__edge-path",p]),markerEnd:d,markerStart:f}),y&&h.jsx("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:y,className:"react-flow__edge-interaction"}),o&&hr(n)&&hr(r)?h.jsx(Kee,{x:n,y:r,label:o,labelStyle:a,labelShowBg:i,labelBgStyle:s,labelBgPadding:c,labelBgBorderRadius:l}):null]})}function CR({pos:e,x1:t,y1:n,x2:r,y2:o}){return e===fe.Left||e===fe.Right?[.5*(t+r),n]:[t,.5*(n+o)]}function OR({sourceX:e,sourceY:t,sourcePosition:n=fe.Bottom,targetX:r,targetY:o,targetPosition:a=fe.Top}){const[i,s]=CR({pos:n,x1:e,y1:t,x2:r,y2:o}),[c,l]=CR({pos:a,x1:r,y1:o,x2:e,y2:t}),[u,d,f,p]=bT({sourceX:e,sourceY:t,targetX:r,targetY:o,sourceControlX:i,sourceControlY:s,targetControlX:c,targetControlY:l});return[`M${e},${t} C${i},${s} ${c},${l} ${r},${o}`,u,d,f,p]}function MR(e){return g.memo(({id:t,sourceX:n,sourceY:r,targetX:o,targetY:a,sourcePosition:i=fe.Bottom,targetPosition:s=fe.Top,label:c,labelStyle:l,labelShowBg:u,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:p,style:y,markerEnd:m,markerStart:v,interactionWidth:b})=>{const[x,_,w]=OR({sourceX:n,sourceY:r,sourcePosition:i,targetX:o,targetY:a,targetPosition:s}),j=e.isInternal?void 0:t;return h.jsx(Rf,{id:j,path:x,labelX:_,labelY:w,label:c,labelStyle:l,labelShowBg:u,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:p,style:y,markerEnd:m,markerStart:v,interactionWidth:b})})}const Xee=MR({isInternal:!1}),NR=MR({isInternal:!0});Xee.displayName="SimpleBezierEdge",NR.displayName="SimpleBezierEdgeInternal";function kR(e){return g.memo(({id:t,sourceX:n,sourceY:r,targetX:o,targetY:a,label:i,labelStyle:s,labelShowBg:c,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:d,style:f,sourcePosition:p=fe.Bottom,targetPosition:y=fe.Top,markerEnd:m,markerStart:v,pathOptions:b,interactionWidth:x})=>{const[_,w,j]=Tb({sourceX:n,sourceY:r,sourcePosition:p,targetX:o,targetY:a,targetPosition:y,borderRadius:b==null?void 0:b.borderRadius,offset:b==null?void 0:b.offset}),E=e.isInternal?void 0:t;return h.jsx(Rf,{id:E,path:_,labelX:w,labelY:j,label:i,labelStyle:s,labelShowBg:c,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:d,style:f,markerEnd:m,markerStart:v,interactionWidth:x})})}const PR=kR({isInternal:!1}),AR=kR({isInternal:!0});PR.displayName="SmoothStepEdge",AR.displayName="SmoothStepEdgeInternal";function TR(e){return g.memo(({id:t,...n})=>{var o;const r=e.isInternal?void 0:t;return h.jsx(PR,{...n,id:r,pathOptions:g.useMemo(()=>{var a;return{borderRadius:0,offset:(a=n.pathOptions)==null?void 0:a.offset}},[(o=n.pathOptions)==null?void 0:o.offset])})})}const Qee=TR({isInternal:!1}),RR=TR({isInternal:!0});Qee.displayName="StepEdge",RR.displayName="StepEdgeInternal";function IR(e){return g.memo(({id:t,sourceX:n,sourceY:r,targetX:o,targetY:a,label:i,labelStyle:s,labelShowBg:c,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:d,style:f,markerEnd:p,markerStart:y,interactionWidth:m})=>{const[v,b,x]=ET({sourceX:n,sourceY:r,targetX:o,targetY:a}),_=e.isInternal?void 0:t;return h.jsx(Rf,{id:_,path:v,labelX:b,labelY:x,label:i,labelStyle:s,labelShowBg:c,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:d,style:f,markerEnd:p,markerStart:y,interactionWidth:m})})}const Jee=IR({isInternal:!1}),DR=IR({isInternal:!0});Jee.displayName="StraightEdge",DR.displayName="StraightEdgeInternal";function LR(e){return g.memo(({id:t,sourceX:n,sourceY:r,targetX:o,targetY:a,sourcePosition:i=fe.Bottom,targetPosition:s=fe.Top,label:c,labelStyle:l,labelShowBg:u,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:p,style:y,markerEnd:m,markerStart:v,pathOptions:b,interactionWidth:x})=>{const[_,w,j]=wT({sourceX:n,sourceY:r,sourcePosition:i,targetX:o,targetY:a,targetPosition:s,curvature:b==null?void 0:b.curvature}),E=e.isInternal?void 0:t;return h.jsx(Rf,{id:E,path:_,labelX:w,labelY:j,label:c,labelStyle:l,labelShowBg:u,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:p,style:y,markerEnd:m,markerStart:v,interactionWidth:x})})}const Gee=LR({isInternal:!1}),FR=LR({isInternal:!0});Gee.displayName="BezierEdge",FR.displayName="BezierEdgeInternal";const BR={default:FR,straight:DR,step:RR,smoothstep:AR,simplebezier:NR},$R={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},Zee=(e,t,n)=>n===fe.Left?e-t:n===fe.Right?e+t:e,ete=(e,t,n)=>n===fe.Top?e-t:n===fe.Bottom?e+t:e,zR="react-flow__edgeupdater";function VR({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:o,onMouseEnter:a,onMouseOut:i,type:s}){return h.jsx("circle",{onMouseDown:o,onMouseEnter:a,onMouseOut:i,className:It([zR,`${zR}-${s}`]),cx:Zee(t,r,e),cy:ete(n,r,e),r,stroke:"transparent",fill:"transparent"})}function tte({isReconnectable:e,reconnectRadius:t,edge:n,sourceX:r,sourceY:o,targetX:a,targetY:i,sourcePosition:s,targetPosition:c,onReconnect:l,onReconnectStart:u,onReconnectEnd:d,setReconnecting:f,setUpdateHover:p}){const y=vt(),m=(w,j)=>{if(w.button!==0)return;const{autoPanOnConnect:E,domNode:S,isValidConnection:O,connectionMode:P,connectionRadius:M,lib:k,onConnectStart:R,onConnectEnd:A,cancelConnection:C,nodeLookup:N,rfId:T,panBy:I,updateConnection:L}=y.getState(),D=j.type==="target";f(!0),u==null||u(w,n,j.type);const B=(F,z)=>{f(!1),d==null||d(F,n,j.type,z)},H=F=>l==null?void 0:l(n,F);zb.onPointerDown(w.nativeEvent,{autoPanOnConnect:E,connectionMode:P,connectionRadius:M,domNode:S,handleId:j.id,nodeId:j.nodeId,nodeLookup:N,isTarget:D,edgeUpdaterType:j.type,lib:k,flowId:T,cancelConnection:C,panBy:I,isValidConnection:O,onConnect:H,onConnectStart:R,onConnectEnd:A,onReconnectEnd:B,updateConnection:L,getTransform:()=>y.getState().transform,getFromHandle:()=>y.getState().connection.fromHandle})},v=w=>m(w,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),b=w=>m(w,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),x=()=>p(!0),_=()=>p(!1);return h.jsxs(h.Fragment,{children:[(e===!0||e==="source")&&h.jsx(VR,{position:s,centerX:r,centerY:o,radius:t,onMouseDown:v,onMouseEnter:x,onMouseOut:_,type:"source"}),(e===!0||e==="target")&&h.jsx(VR,{position:c,centerX:a,centerY:i,radius:t,onMouseDown:b,onMouseEnter:x,onMouseOut:_,type:"target"})]})}function nte({id:e,edgesFocusable:t,edgesReconnectable:n,elementsSelectable:r,onClick:o,onDoubleClick:a,onContextMenu:i,onMouseEnter:s,onMouseMove:c,onMouseLeave:l,reconnectRadius:u,onReconnect:d,onReconnectStart:f,onReconnectEnd:p,rfId:y,edgeTypes:m,noPanClassName:v,onError:b,disableKeyboardA11y:x}){let _=Ve($=>$.edgeLookup.get(e));const w=Ve($=>$.defaultEdgeOptions);_=w?{...w,..._}:_;let j=_.type||"default",E=(m==null?void 0:m[j])||BR[j];E===void 0&&(b==null||b("011",po.error011(j)),j="default",E=BR.default);const S=!!(_.focusable||t&&typeof _.focusable>"u"),O=typeof d<"u"&&(_.reconnectable||n&&typeof _.reconnectable>"u"),P=!!(_.selectable||r&&typeof _.selectable>"u"),M=g.useRef(null),[k,R]=g.useState(!1),[A,C]=g.useState(!1),N=vt(),{zIndex:T,sourceX:I,sourceY:L,targetX:D,targetY:B,sourcePosition:H,targetPosition:F}=Ve(g.useCallback($=>{const se=$.nodeLookup.get(_.source),le=$.nodeLookup.get(_.target);if(!se||!le)return{zIndex:_.zIndex,...$R};const ve=tZ({id:e,sourceNode:se,targetNode:le,sourceHandle:_.sourceHandle||null,targetHandle:_.targetHandle||null,connectionMode:$.connectionMode,onError:b});return{zIndex:KG({selected:_.selected,zIndex:_.zIndex,sourceNode:se,targetNode:le,elevateOnSelect:$.elevateEdgesOnSelect}),...ve||$R}},[_.source,_.target,_.sourceHandle,_.targetHandle,_.selected,_.zIndex]),jt),z=g.useMemo(()=>_.markerStart?`url('#${Rb(_.markerStart,y)}')`:void 0,[_.markerStart,y]),G=g.useMemo(()=>_.markerEnd?`url('#${Rb(_.markerEnd,y)}')`:void 0,[_.markerEnd,y]);if(_.hidden||I===null||L===null||D===null||B===null)return null;const Q=$=>{var Te;const{addSelectedEdges:se,unselectNodesAndEdges:le,multiSelectionActive:ve}=N.getState();P&&(N.setState({nodesSelectionActive:!1}),_.selected&&ve?(le({nodes:[],edges:[_]}),(Te=M.current)==null||Te.blur()):se([e])),o&&o($,_)},oe=a?$=>{a($,{..._})}:void 0,Z=i?$=>{i($,{..._})}:void 0,q=s?$=>{s($,{..._})}:void 0,W=c?$=>{c($,{..._})}:void 0,J=l?$=>{l($,{..._})}:void 0,te=$=>{var se;if(!x&&eT.includes($.key)&&P){const{unselectNodesAndEdges:le,addSelectedEdges:ve}=N.getState();$.key==="Escape"?((se=M.current)==null||se.blur(),le({edges:[_]})):ve([e])}};return h.jsx("svg",{style:{zIndex:T},children:h.jsxs("g",{className:It(["react-flow__edge",`react-flow__edge-${j}`,_.className,v,{selected:_.selected,animated:_.animated,inactive:!P&&!o,updating:k,selectable:P}]),onClick:Q,onDoubleClick:oe,onContextMenu:Z,onMouseEnter:q,onMouseMove:W,onMouseLeave:J,onKeyDown:S?te:void 0,tabIndex:S?0:void 0,role:S?"button":"img","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":_.ariaLabel===null?void 0:_.ariaLabel||`Edge from ${_.source} to ${_.target}`,"aria-describedby":S?`${tR}-${y}`:void 0,ref:M,children:[!A&&h.jsx(E,{id:e,source:_.source,target:_.target,type:_.type,selected:_.selected,animated:_.animated,selectable:P,deletable:_.deletable??!0,label:_.label,labelStyle:_.labelStyle,labelShowBg:_.labelShowBg,labelBgStyle:_.labelBgStyle,labelBgPadding:_.labelBgPadding,labelBgBorderRadius:_.labelBgBorderRadius,sourceX:I,sourceY:L,targetX:D,targetY:B,sourcePosition:H,targetPosition:F,data:_.data,style:_.style,sourceHandleId:_.sourceHandle,targetHandleId:_.targetHandle,markerStart:z,markerEnd:G,pathOptions:"pathOptions"in _?_.pathOptions:void 0,interactionWidth:_.interactionWidth}),O&&h.jsx(tte,{edge:_,isReconnectable:O,reconnectRadius:u,onReconnect:d,onReconnectStart:f,onReconnectEnd:p,sourceX:I,sourceY:L,targetX:D,targetY:B,sourcePosition:H,targetPosition:F,setUpdateHover:R,setReconnecting:C})]})})}const rte=e=>({width:e.width,height:e.height,edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function UR({defaultMarkerColor:e,onlyRenderVisibleElements:t,rfId:n,edgeTypes:r,noPanClassName:o,onReconnect:a,onEdgeContextMenu:i,onEdgeMouseEnter:s,onEdgeMouseMove:c,onEdgeMouseLeave:l,onEdgeClick:u,reconnectRadius:d,onEdgeDoubleClick:f,onReconnectStart:p,onReconnectEnd:y,disableKeyboardA11y:m}){const{edgesFocusable:v,edgesReconnectable:b,elementsSelectable:x,onError:_}=Ve(rte,jt),w=Vee(t);return h.jsxs("div",{className:"react-flow__edges",children:[h.jsx(Yee,{defaultColor:e,rfId:n}),w.map(j=>h.jsx(nte,{id:j,edgesFocusable:v,edgesReconnectable:b,elementsSelectable:x,noPanClassName:o,onReconnect:a,onContextMenu:i,onMouseEnter:s,onMouseMove:c,onMouseLeave:l,onClick:u,reconnectRadius:d,onDoubleClick:f,onReconnectStart:p,onReconnectEnd:y,rfId:n,onError:_,edgeTypes:r,disableKeyboardA11y:m},j))]})}UR.displayName="EdgeRenderer";const ote=g.memo(UR),ate=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function ite({children:e}){const t=Ve(ate);return h.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:t},children:e})}function ste(e){const t=Fn(),n=g.useRef(!1);g.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const cte=e=>{var t;return(t=e.panZoom)==null?void 0:t.syncViewport};function lte(e){const t=Ve(cte),n=vt();return g.useEffect(()=>{e&&(t==null||t(e),n.setState({transform:[e.x,e.y,e.zoom]}))},[e,t]),null}function ute(e){return e.connection.inProgress?{...e.connection,to:dl(e.connection.to,e.transform)}:{...e.connection}}function dte(e){return ute}function fte(e){const t=dte();return Ve(t,jt)}const pte=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function hte({containerStyle:e,style:t,type:n,component:r}){const{nodesConnectable:o,width:a,height:i,isValid:s,inProgress:c}=Ve(pte,jt);return a&&o&&c?h.jsx("svg",{style:e,width:a,height:i,className:"react-flow__connectionline react-flow__container",children:h.jsx("g",{className:It(["react-flow__connection",oT(s)]),children:h.jsx(HR,{style:t,type:n,CustomComponent:r,isValid:s})})}):null}const HR=({style:e,type:t=qo.Bezier,CustomComponent:n,isValid:r})=>{const{inProgress:o,from:a,fromNode:i,fromHandle:s,fromPosition:c,to:l,toNode:u,toHandle:d,toPosition:f}=fte();if(!o)return;if(n)return h.jsx(n,{connectionLineType:t,connectionLineStyle:e,fromNode:i,fromHandle:s,fromX:a.x,fromY:a.y,toX:l.x,toY:l.y,fromPosition:c,toPosition:f,connectionStatus:oT(r),toNode:u,toHandle:d});let p="";const y={sourceX:a.x,sourceY:a.y,sourcePosition:c,targetX:l.x,targetY:l.y,targetPosition:f};switch(t){case qo.Bezier:[p]=wT(y);break;case qo.SimpleBezier:[p]=OR(y);break;case qo.Step:[p]=Tb({...y,borderRadius:0});break;case qo.SmoothStep:[p]=Tb(y);break;default:[p]=ET(y)}return h.jsx("path",{d:p,fill:"none",className:"react-flow__connection-path",style:e})};HR.displayName="ConnectionLine";const mte={};function WR(e=mte){g.useRef(e),vt(),g.useEffect(()=>{},[e])}function yte(){vt(),g.useRef(!1),g.useEffect(()=>{},[])}function qR({nodeTypes:e,edgeTypes:t,onInit:n,onNodeClick:r,onEdgeClick:o,onNodeDoubleClick:a,onEdgeDoubleClick:i,onNodeMouseEnter:s,onNodeMouseMove:c,onNodeMouseLeave:l,onNodeContextMenu:u,onSelectionContextMenu:d,onSelectionStart:f,onSelectionEnd:p,connectionLineType:y,connectionLineStyle:m,connectionLineComponent:v,connectionLineContainerStyle:b,selectionKeyCode:x,selectionOnDrag:_,selectionMode:w,multiSelectionKeyCode:j,panActivationKeyCode:E,zoomActivationKeyCode:S,deleteKeyCode:O,onlyRenderVisibleElements:P,elementsSelectable:M,defaultViewport:k,translateExtent:R,minZoom:A,maxZoom:C,preventScrolling:N,defaultMarkerColor:T,zoomOnScroll:I,zoomOnPinch:L,panOnScroll:D,panOnScrollSpeed:B,panOnScrollMode:H,zoomOnDoubleClick:F,panOnDrag:z,onPaneClick:G,onPaneMouseEnter:Q,onPaneMouseMove:oe,onPaneMouseLeave:Z,onPaneScroll:q,onPaneContextMenu:W,paneClickDistance:J,nodeClickDistance:te,onEdgeContextMenu:$,onEdgeMouseEnter:se,onEdgeMouseMove:le,onEdgeMouseLeave:ve,reconnectRadius:Te,onReconnect:qe,onReconnectStart:Ye,onReconnectEnd:ze,noDragClassName:st,noWheelClassName:He,noPanClassName:ct,disableKeyboardA11y:Ut,nodeExtent:St,rfId:yt,viewport:Rt,onViewportChange:bn}){return WR(e),WR(t),yte(),ste(n),lte(Rt),h.jsx(Tee,{onPaneClick:G,onPaneMouseEnter:Q,onPaneMouseMove:oe,onPaneMouseLeave:Z,onPaneContextMenu:W,onPaneScroll:q,paneClickDistance:J,deleteKeyCode:O,selectionKeyCode:x,selectionOnDrag:_,selectionMode:w,onSelectionStart:f,onSelectionEnd:p,multiSelectionKeyCode:j,panActivationKeyCode:E,zoomActivationKeyCode:S,elementsSelectable:M,zoomOnScroll:I,zoomOnPinch:L,zoomOnDoubleClick:F,panOnScroll:D,panOnScrollSpeed:B,panOnScrollMode:H,panOnDrag:z,defaultViewport:k,translateExtent:R,minZoom:A,maxZoom:C,onSelectionContextMenu:d,preventScrolling:N,noDragClassName:st,noWheelClassName:He,noPanClassName:ct,disableKeyboardA11y:Ut,onViewportChange:bn,isControlledViewport:!!Rt,children:h.jsxs(ite,{children:[h.jsx(ote,{edgeTypes:t,onEdgeClick:o,onEdgeDoubleClick:i,onReconnect:qe,onReconnectStart:Ye,onReconnectEnd:ze,onlyRenderVisibleElements:P,onEdgeContextMenu:$,onEdgeMouseEnter:se,onEdgeMouseMove:le,onEdgeMouseLeave:ve,reconnectRadius:Te,defaultMarkerColor:T,noPanClassName:ct,disableKeyboardA11y:Ut,rfId:yt}),h.jsx(hte,{style:m,type:y,component:v,containerStyle:b}),h.jsx("div",{className:"react-flow__edgelabel-renderer"}),h.jsx(zee,{nodeTypes:e,onNodeClick:r,onNodeDoubleClick:a,onNodeMouseEnter:s,onNodeMouseMove:c,onNodeMouseLeave:l,onNodeContextMenu:u,nodeClickDistance:te,onlyRenderVisibleElements:P,noPanClassName:ct,noDragClassName:st,disableKeyboardA11y:Ut,nodeExtent:St,rfId:yt}),h.jsx("div",{className:"react-flow__viewport-portal"})]})})}qR.displayName="GraphView";const gte=g.memo(qR),YR=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:o,height:a,fitView:i,nodeOrigin:s,nodeExtent:c}={})=>{const l=new Map,u=new Map,d=new Map,f=new Map,p=r??t??[],y=n??e??[],m=s??[0,0],v=c??il;PT(d,f,p),Lb(y,l,u,{nodeOrigin:m,nodeExtent:v,elevateNodesOnSelect:!1});let b=[0,0,1];if(i&&o&&a){const x=ll(l,{filter:E=>!!((E.width||E.initialWidth)&&(E.height||E.initialHeight))}),{x:_,y:w,zoom:j}=Pb(x,o,a,.5,2,.1);b=[_,w,j]}return{rfId:"1",width:0,height:0,transform:b,nodes:y,nodeLookup:l,parentLookup:u,edges:p,edgeLookup:f,connectionLookup:d,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:n!==void 0,hasDefaultEdges:r!==void 0,panZoom:null,minZoom:.5,maxZoom:2,translateExtent:il,nodeExtent:v,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:Ui.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:m,nodeDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,fitViewOnInit:!1,fitViewDone:!1,fitViewOnInitOptions:void 0,selectNodesOnDrag:!0,multiSelectionActive:!1,connection:{...tT},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanSpeed:15,connectionRadius:20,onError:qG,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1}},vte=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:o,height:a,fitView:i,nodeOrigin:s,nodeExtent:c})=>LZ((l,u)=>({...YR({nodes:e,edges:t,width:o,height:a,fitView:i,nodeOrigin:s,nodeExtent:c,defaultNodes:n,defaultEdges:r}),setNodes:d=>{const{nodeLookup:f,parentLookup:p,nodeOrigin:y,elevateNodesOnSelect:m}=u();Lb(d,f,p,{nodeOrigin:y,nodeExtent:c,elevateNodesOnSelect:m,checkEquality:!0}),l({nodes:d})},setEdges:d=>{const{connectionLookup:f,edgeLookup:p}=u();PT(f,p,d),l({edges:d})},setDefaultNodesAndEdges:(d,f)=>{if(d){const{setNodes:p}=u();p(d),l({hasDefaultNodes:!0})}if(f){const{setEdges:p}=u();p(f),l({hasDefaultEdges:!0})}},updateNodeInternals:(d,f={triggerFitView:!0})=>{const{triggerNodeChanges:p,nodeLookup:y,parentLookup:m,fitViewOnInit:v,fitViewDone:b,fitViewOnInitOptions:x,domNode:_,nodeOrigin:w,nodeExtent:j,debug:E,fitViewSync:S}=u(),{changes:O,updatedInternals:P}=sZ(d,y,m,_,w,j);if(P){if(oZ(y,m,{nodeOrigin:w,nodeExtent:j}),f.triggerFitView){let M=b;!b&&v&&(M=S({...x,nodes:x==null?void 0:x.nodes})),l({fitViewDone:M})}else l({});(O==null?void 0:O.length)>0&&(E&&console.log("React Flow: trigger node changes",O),p==null||p(O))}},updateNodePositions:(d,f=!1)=>{const p=[],y=[];for(const[m,v]of d){const b={id:m,type:"position",position:v.position,dragging:f};v!=null&&v.expandParent&&(v!=null&&v.parentId)&&b.position&&(p.push({id:m,parentId:v.parentId,rect:{...v.internals.positionAbsolute,width:v.measured.width,height:v.measured.height}}),b.position.x=Math.max(0,b.position.x),b.position.y=Math.max(0,b.position.y)),y.push(b)}if(p.length>0){const{nodeLookup:m,parentLookup:v,nodeOrigin:b}=u(),x=Bb(p,m,v,b);y.push(...x)}u().triggerNodeChanges(y)},triggerNodeChanges:d=>{const{onNodesChange:f,setNodes:p,nodes:y,hasDefaultNodes:m,debug:v}=u();if(d!=null&&d.length){if(m){const b=Na(d,y);p(b)}v&&console.log("React Flow: trigger node changes",d),f==null||f(d)}},triggerEdgeChanges:d=>{const{onEdgesChange:f,setEdges:p,edges:y,hasDefaultEdges:m,debug:v}=u();if(d!=null&&d.length){if(m){const b=ml(d,y);p(b)}v&&console.log("React Flow: trigger edge changes",d),f==null||f(d)}},addSelectedNodes:d=>{const{multiSelectionActive:f,edgeLookup:p,nodeLookup:y,triggerNodeChanges:m,triggerEdgeChanges:v}=u();if(f){const b=d.map(x=>ka(x,!0));m(b);return}m(Qi(y,new Set([...d]),!0)),v(Qi(p))},addSelectedEdges:d=>{const{multiSelectionActive:f,edgeLookup:p,nodeLookup:y,triggerNodeChanges:m,triggerEdgeChanges:v}=u();if(f){const b=d.map(x=>ka(x,!0));v(b);return}v(Qi(p,new Set([...d]))),m(Qi(y,new Set,!0))},unselectNodesAndEdges:({nodes:d,edges:f}={})=>{const{edges:p,nodes:y,nodeLookup:m,triggerNodeChanges:v,triggerEdgeChanges:b}=u(),x=d||y,_=f||p,w=x.map(E=>{const S=m.get(E.id);return S&&(S.selected=!1),ka(E.id,!1)}),j=_.map(E=>ka(E.id,!1));v(w),b(j)},setMinZoom:d=>{const{panZoom:f,maxZoom:p}=u();f==null||f.setScaleExtent([d,p]),l({minZoom:d})},setMaxZoom:d=>{const{panZoom:f,minZoom:p}=u();f==null||f.setScaleExtent([p,d]),l({maxZoom:d})},setTranslateExtent:d=>{var f;(f=u().panZoom)==null||f.setTranslateExtent(d),l({translateExtent:d})},setPaneClickDistance:d=>{var f;(f=u().panZoom)==null||f.setClickDistance(d)},resetSelectedElements:()=>{const{edges:d,nodes:f,triggerNodeChanges:p,triggerEdgeChanges:y}=u(),m=f.reduce((b,x)=>x.selected?[...b,ka(x.id,!1)]:b,[]),v=d.reduce((b,x)=>x.selected?[...b,ka(x.id,!1)]:b,[]);p(m),y(v)},setNodeExtent:d=>{const{nodes:f,nodeLookup:p,parentLookup:y,nodeOrigin:m,elevateNodesOnSelect:v,nodeExtent:b}=u();d[0][0]===b[0][0]&&d[0][1]===b[0][1]&&d[1][0]===b[1][0]&&d[1][1]===b[1][1]||(Lb(f,p,y,{nodeOrigin:m,nodeExtent:d,elevateNodesOnSelect:v,checkEquality:!1}),l({nodeExtent:d}))},panBy:d=>{const{transform:f,width:p,height:y,panZoom:m,translateExtent:v}=u();return cZ({delta:d,panZoom:m,transform:f,translateExtent:v,width:p,height:y})},fitView:d=>{const{panZoom:f,width:p,height:y,minZoom:m,maxZoom:v,nodeLookup:b}=u();if(!f)return Promise.resolve(!1);const x=Mb(b,d);return Nb({nodes:x,width:p,height:y,panZoom:f,minZoom:m,maxZoom:v},d)},fitViewSync:d=>{const{panZoom:f,width:p,height:y,minZoom:m,maxZoom:v,nodeLookup:b}=u();if(!f)return!1;const x=Mb(b,d);return Nb({nodes:x,width:p,height:y,panZoom:f,minZoom:m,maxZoom:v},d),x.size>0},cancelConnection:()=>{l({connection:{...tT}})},updateConnection:d=>{l({connection:d})},reset:()=>l({...YR()})}),Object.is);function bte({initialNodes:e,initialEdges:t,defaultNodes:n,defaultEdges:r,initialWidth:o,initialHeight:a,fitView:i,nodeOrigin:s,nodeExtent:c,children:l}){const[u]=g.useState(()=>vte({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:o,height:a,fitView:i,nodeOrigin:s,nodeExtent:c}));return h.jsx(FZ,{value:u,children:h.jsx(see,{children:l})})}function xte({children:e,nodes:t,edges:n,defaultNodes:r,defaultEdges:o,width:a,height:i,fitView:s,nodeOrigin:c,nodeExtent:l}){return g.useContext(kf)?h.jsx(h.Fragment,{children:e}):h.jsx(bte,{initialNodes:t,initialEdges:n,defaultNodes:r,defaultEdges:o,initialWidth:a,initialHeight:i,fitView:s,nodeOrigin:c,nodeExtent:l,children:e})}const wte={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function _te({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:o,nodeTypes:a,edgeTypes:i,onNodeClick:s,onEdgeClick:c,onInit:l,onMove:u,onMoveStart:d,onMoveEnd:f,onConnect:p,onConnectStart:y,onConnectEnd:m,onClickConnectStart:v,onClickConnectEnd:b,onNodeMouseEnter:x,onNodeMouseMove:_,onNodeMouseLeave:w,onNodeContextMenu:j,onNodeDoubleClick:E,onNodeDragStart:S,onNodeDrag:O,onNodeDragStop:P,onNodesDelete:M,onEdgesDelete:k,onDelete:R,onSelectionChange:A,onSelectionDragStart:C,onSelectionDrag:N,onSelectionDragStop:T,onSelectionContextMenu:I,onSelectionStart:L,onSelectionEnd:D,onBeforeDelete:B,connectionMode:H,connectionLineType:F=qo.Bezier,connectionLineStyle:z,connectionLineComponent:G,connectionLineContainerStyle:Q,deleteKeyCode:oe="Backspace",selectionKeyCode:Z="Shift",selectionOnDrag:q=!1,selectionMode:W=sl.Full,panActivationKeyCode:J="Space",multiSelectionKeyCode:te=Sf()?"Meta":"Control",zoomActivationKeyCode:$=Sf()?"Meta":"Control",snapToGrid:se,snapGrid:le,onlyRenderVisibleElements:ve=!1,selectNodesOnDrag:Te,nodesDraggable:qe,nodesConnectable:Ye,nodesFocusable:ze,nodeOrigin:st=nR,edgesFocusable:He,edgesReconnectable:ct,elementsSelectable:Ut=!0,defaultViewport:St=JZ,minZoom:yt=.5,maxZoom:Rt=2,translateExtent:bn=il,preventScrolling:_r=!0,nodeExtent:ti,defaultMarkerColor:Zn="#b1b1b7",zoomOnScroll:la=!0,zoomOnPinch:X=!0,panOnScroll:ee=!1,panOnScrollSpeed:ie=.5,panOnScrollMode:pe=Wo.Free,zoomOnDoubleClick:Ne=!0,panOnDrag:Mt=!0,onPaneClick:wt,onPaneMouseEnter:Be,onPaneMouseMove:ge,onPaneMouseLeave:we,onPaneScroll:_e,onPaneContextMenu:je,paneClickDistance:Le=0,nodeClickDistance:ut=0,children:Ct,onReconnect:V,onReconnectStart:Y,onReconnectEnd:ne,onEdgeContextMenu:ue,onEdgeDoubleClick:Se,onEdgeMouseEnter:Pe,onEdgeMouseMove:Ie,onEdgeMouseLeave:Ce,reconnectRadius:Me=10,onNodesChange:be,onEdgesChange:De,noDragClassName:Ue="nodrag",noWheelClassName:gt="nowheel",noPanClassName:_t="nopan",fitView:Ke,fitViewOptions:Cn,connectOnClick:Pt,attributionPosition:ni,proOptions:jr,defaultEdgeOptions:ua,elevateNodesOnSelect:Ur,elevateEdgesOnSelect:Mu,disableKeyboardA11y:er=!1,autoPanOnConnect:qs,autoPanOnNodeDrag:Ys,autoPanSpeed:Ks,connectionRadius:tt,isValidConnection:On,onError:ri,style:Ot,id:Ro,nodeDragThreshold:Dh,viewport:yE,onViewportChange:zxe,width:Vxe,height:Uxe,colorMode:Hxe="light",debug:Wxe,...qxe},Yxe){const gE=Ro||"1",Kxe=tee(Hxe);return h.jsx("div",{...qxe,style:{...Ot,...wte},ref:Yxe,className:It(["react-flow",o,Kxe]),"data-testid":"rf__wrapper",id:Ro,children:h.jsxs(xte,{nodes:e,edges:t,width:Vxe,height:Uxe,fitView:Ke,nodeOrigin:st,nodeExtent:ti,children:[h.jsx(gte,{onInit:l,onNodeClick:s,onEdgeClick:c,onNodeMouseEnter:x,onNodeMouseMove:_,onNodeMouseLeave:w,onNodeContextMenu:j,onNodeDoubleClick:E,nodeTypes:a,edgeTypes:i,connectionLineType:F,connectionLineStyle:z,connectionLineComponent:G,connectionLineContainerStyle:Q,selectionKeyCode:Z,selectionOnDrag:q,selectionMode:W,deleteKeyCode:oe,multiSelectionKeyCode:te,panActivationKeyCode:J,zoomActivationKeyCode:$,onlyRenderVisibleElements:ve,defaultViewport:St,translateExtent:bn,minZoom:yt,maxZoom:Rt,preventScrolling:_r,zoomOnScroll:la,zoomOnPinch:X,zoomOnDoubleClick:Ne,panOnScroll:ee,panOnScrollSpeed:ie,panOnScrollMode:pe,panOnDrag:Mt,onPaneClick:wt,onPaneMouseEnter:Be,onPaneMouseMove:ge,onPaneMouseLeave:we,onPaneScroll:_e,onPaneContextMenu:je,paneClickDistance:Le,nodeClickDistance:ut,onSelectionContextMenu:I,onSelectionStart:L,onSelectionEnd:D,onReconnect:V,onReconnectStart:Y,onReconnectEnd:ne,onEdgeContextMenu:ue,onEdgeDoubleClick:Se,onEdgeMouseEnter:Pe,onEdgeMouseMove:Ie,onEdgeMouseLeave:Ce,reconnectRadius:Me,defaultMarkerColor:Zn,noDragClassName:Ue,noWheelClassName:gt,noPanClassName:_t,rfId:gE,disableKeyboardA11y:er,nodeExtent:ti,viewport:yE,onViewportChange:zxe}),h.jsx(eee,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:p,onConnectStart:y,onConnectEnd:m,onClickConnectStart:v,onClickConnectEnd:b,nodesDraggable:qe,nodesConnectable:Ye,nodesFocusable:ze,edgesFocusable:He,edgesReconnectable:ct,elementsSelectable:Ut,elevateNodesOnSelect:Ur,elevateEdgesOnSelect:Mu,minZoom:yt,maxZoom:Rt,nodeExtent:ti,onNodesChange:be,onEdgesChange:De,snapToGrid:se,snapGrid:le,connectionMode:H,translateExtent:bn,connectOnClick:Pt,defaultEdgeOptions:ua,fitView:Ke,fitViewOptions:Cn,onNodesDelete:M,onEdgesDelete:k,onDelete:R,onNodeDragStart:S,onNodeDrag:O,onNodeDragStop:P,onSelectionDrag:N,onSelectionDragStart:C,onSelectionDragStop:T,onMove:u,onMoveStart:d,onMoveEnd:f,noPanClassName:_t,nodeOrigin:st,rfId:gE,autoPanOnConnect:qs,autoPanOnNodeDrag:Ys,autoPanSpeed:Ks,onError:ri,connectionRadius:tt,isValidConnection:On,selectNodesOnDrag:Te,nodeDragThreshold:Dh,onBeforeDelete:B,paneClickDistance:Le,debug:Wxe}),h.jsx(QZ,{onSelectionChange:A}),Ct,h.jsx(WZ,{proOptions:jr,position:ni}),h.jsx(UZ,{rfId:gE,disableKeyboardA11y:er})]})})}var jte=pR(_te);const Ete=e=>{var t;return(t=e.domNode)==null?void 0:t.querySelector(".react-flow__viewport-portal")};function Ste({children:e}){const t=Ve(Ete);return t?Nu.createPortal(e,t):null}const Cte=e=>e.nodes;function Ote(){return Ve(Cte,jt)}function If({type:e,id:t=null,nodeId:n,onConnect:r,onDisconnect:o}){const a=Xb(),i=n??a,s=g.useRef(null),c=Ve(l=>l.connectionLookup.get(`${i}-${e}-${t}`),zG);return g.useEffect(()=>{if(s.current&&s.current!==c){const l=c??new Map;rT(s.current,l,o),rT(l,s.current,r)}s.current=c??new Map},[c,r,o]),g.useMemo(()=>Array.from((c==null?void 0:c.values())??[]),[c])}ln=function(e){return Ve(g.useCallback(t=>t.nodeLookup.get(e),[e]),jt)};function Mte({dimensions:e,lineWidth:t,variant:n,className:r}){return h.jsx("path",{strokeWidth:t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:It(["react-flow__background-pattern",n,r])})}function Nte({radius:e,className:t}){return h.jsx("circle",{cx:e,cy:e,r:e,className:It(["react-flow__background-pattern","dots",t])})}var yo;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(yo||(yo={}));const kte={[yo.Dots]:1,[yo.Lines]:1,[yo.Cross]:6},Pte=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function KR({id:e,variant:t=yo.Dots,gap:n=20,size:r,lineWidth:o=1,offset:a=0,color:i,bgColor:s,style:c,className:l,patternClassName:u}){const d=g.useRef(null),{transform:f,patternId:p}=Ve(Pte,jt),y=r||kte[t],m=t===yo.Dots,v=t===yo.Cross,b=Array.isArray(n)?n:[n,n],x=[b[0]*f[2]||1,b[1]*f[2]||1],_=y*f[2],w=Array.isArray(a)?a:[a,a],j=v?[_,_]:x,E=[w[0]*f[2]||1+j[0]/2,w[1]*f[2]||1+j[1]/2],S=`${p}${e||""}`;return h.jsxs("svg",{className:It(["react-flow__background",l]),style:{...c,...Af,"--xy-background-color-props":s,"--xy-background-pattern-color-props":i},ref:d,"data-testid":"rf__background",children:[h.jsx("pattern",{id:S,x:f[0]%x[0],y:f[1]%x[1],width:x[0],height:x[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${E[0]},-${E[1]})`,children:m?h.jsx(Nte,{radius:_/2,className:u}):h.jsx(Mte,{dimensions:j,lineWidth:o,variant:t,className:u})}),h.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${S})`})]})}KR.displayName="Background";const Ate=g.memo(KR);function Tte(){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:h.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function Rte(){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:h.jsx("path",{d:"M0 0h32v4.2H0z"})})}function Ite(){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:h.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function Dte(){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:h.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function Lte(){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:h.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function Df({children:e,className:t,...n}){return h.jsx("button",{type:"button",className:It(["react-flow__controls-button",t]),...n,children:e})}const Fte=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom});function XR({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:o,onZoomIn:a,onZoomOut:i,onFitView:s,onInteractiveChange:c,className:l,children:u,position:d="bottom-left",orientation:f="vertical","aria-label":p="React Flow controls"}){const y=vt(),{isInteractive:m,minZoomReached:v,maxZoomReached:b}=Ve(Fte,jt),{zoomIn:x,zoomOut:_,fitView:w}=Fn(),j=()=>{x(),a==null||a()},E=()=>{_(),i==null||i()},S=()=>{w(o),s==null||s()},O=()=>{y.setState({nodesDraggable:!m,nodesConnectable:!m,elementsSelectable:!m}),c==null||c(!m)},P=f==="horizontal"?"horizontal":"vertical";return h.jsxs(Xi,{className:It(["react-flow__controls",P,l]),position:d,style:e,"data-testid":"rf__controls","aria-label":p,children:[t&&h.jsxs(h.Fragment,{children:[h.jsx(Df,{onClick:j,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:b,children:h.jsx(Tte,{})}),h.jsx(Df,{onClick:E,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:v,children:h.jsx(Rte,{})})]}),n&&h.jsx(Df,{className:"react-flow__controls-fitview",onClick:S,title:"fit view","aria-label":"fit view",children:h.jsx(Ite,{})}),r&&h.jsx(Df,{className:"react-flow__controls-interactive",onClick:O,title:"toggle interactivity","aria-label":"toggle interactivity",children:m?h.jsx(Lte,{}):h.jsx(Dte,{})}),u]})}XR.displayName="Controls";const Bte=g.memo(XR);function $te({id:e,x:t,y:n,width:r,height:o,style:a,color:i,strokeColor:s,strokeWidth:c,className:l,borderRadius:u,shapeRendering:d,selected:f,onClick:p}){const{background:y,backgroundColor:m}=a||{},v=i||y||m;return h.jsx("rect",{className:It(["react-flow__minimap-node",{selected:f},l]),x:t,y:n,rx:u,ry:u,width:r,height:o,style:{fill:v,stroke:s,strokeWidth:c},shapeRendering:d,onClick:p?b=>p(b,e):void 0})}const zte=g.memo($te),Vte=e=>e.nodes.map(t=>t.id),Qb=e=>e instanceof Function?e:()=>e;function Ute({nodeStrokeColor:e,nodeColor:t,nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:o,nodeComponent:a=zte,onClick:i}){const s=Ve(Vte,jt),c=Qb(t),l=Qb(e),u=Qb(n),d=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return h.jsx(h.Fragment,{children:s.map(f=>h.jsx(Wte,{id:f,nodeColorFunc:c,nodeStrokeColorFunc:l,nodeClassNameFunc:u,nodeBorderRadius:r,nodeStrokeWidth:o,NodeComponent:a,onClick:i,shapeRendering:d},f))})}function Hte({id:e,nodeColorFunc:t,nodeStrokeColorFunc:n,nodeClassNameFunc:r,nodeBorderRadius:o,nodeStrokeWidth:a,shapeRendering:i,NodeComponent:s,onClick:c}){const{node:l,x:u,y:d,width:f,height:p}=Ve(y=>{const m=y.nodeLookup.get(e),{x:v,y:b}=m.internals.positionAbsolute,{width:x,height:_}=ho(m);return{node:m,x:v,y:b,width:x,height:_}},jt);return!l||l.hidden||!hT(l)?null:h.jsx(s,{x:u,y:d,width:f,height:p,style:l.style,selected:!!l.selected,className:r(l),color:t(l),borderRadius:o,strokeColor:n(l),strokeWidth:a,shapeRendering:i,onClick:c,id:l.id})}const Wte=g.memo(Hte);var qte=g.memo(Ute);const Yte=200,Kte=150,Xte=e=>{const t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:t,boundingRect:e.nodeLookup.size>0?dT(ll(e.nodeLookup),t):t,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height}},Qte="react-flow__minimap-desc";function QR({style:e,className:t,nodeStrokeColor:n,nodeColor:r,nodeClassName:o="",nodeBorderRadius:a=5,nodeStrokeWidth:i,nodeComponent:s,bgColor:c,maskColor:l,maskStrokeColor:u,maskStrokeWidth:d,position:f="bottom-right",onClick:p,onNodeClick:y,pannable:m=!1,zoomable:v=!1,ariaLabel:b="React Flow mini map",inversePan:x,zoomStep:_=10,offsetScale:w=5}){const j=vt(),E=g.useRef(null),{boundingRect:S,viewBB:O,rfId:P,panZoom:M,translateExtent:k,flowWidth:R,flowHeight:A}=Ve(Xte,jt),C=(e==null?void 0:e.width)??Yte,N=(e==null?void 0:e.height)??Kte,T=S.width/C,I=S.height/N,L=Math.max(T,I),D=L*C,B=L*N,H=w*L,F=S.x-(D-S.width)/2-H,z=S.y-(B-S.height)/2-H,G=D+H*2,Q=B+H*2,oe=`${Qte}-${P}`,Z=g.useRef(0),q=g.useRef();Z.current=L,g.useEffect(()=>{if(E.current&&M)return q.current=yZ({domNode:E.current,panZoom:M,getTransform:()=>j.getState().transform,getViewScale:()=>Z.current}),()=>{var te;(te=q.current)==null||te.destroy()}},[M]),g.useEffect(()=>{var te;(te=q.current)==null||te.update({translateExtent:k,width:R,height:A,inversePan:x,pannable:m,zoomStep:_,zoomable:v})},[m,v,x,_,k,R,A]);const W=p?te=>{var le;const[$,se]=((le=q.current)==null?void 0:le.pointer(te))||[0,0];p(te,{x:$,y:se})}:void 0,J=y?g.useCallback((te,$)=>{const se=j.getState().nodeLookup.get($);y(te,se)},[]):void 0;return h.jsx(Xi,{position:f,style:{...e,"--xy-minimap-background-color-props":typeof c=="string"?c:void 0,"--xy-minimap-mask-background-color-props":typeof l=="string"?l:void 0,"--xy-minimap-mask-stroke-color-props":typeof u=="string"?u:void 0,"--xy-minimap-mask-stroke-width-props":typeof d=="number"?d*L:void 0,"--xy-minimap-node-background-color-props":typeof r=="string"?r:void 0,"--xy-minimap-node-stroke-color-props":typeof n=="string"?n:void 0,"--xy-minimap-node-stroke-width-props":typeof i=="string"?i:void 0},className:It(["react-flow__minimap",t]),"data-testid":"rf__minimap",children:h.jsxs("svg",{width:C,height:N,viewBox:`${F} ${z} ${G} ${Q}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":oe,ref:E,onClick:W,children:[b&&h.jsx("title",{id:oe,children:b}),h.jsx(qte,{onClick:J,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:a,nodeClassName:o,nodeStrokeWidth:i,nodeComponent:s}),h.jsx("path",{className:"react-flow__minimap-mask",d:`M${F-H},${z-H}h${G+H*2}v${Q+H*2}h${-G-H*2}z
        M${O.x},${O.y}h${O.width}v${O.height}h${-O.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}QR.displayName="MiniMap";const Jte=g.memo(QR);function Gte({nodeId:e,position:t,variant:n=Ki.Handle,className:r,style:o={},children:a,color:i,minWidth:s=10,minHeight:c=10,maxWidth:l=Number.MAX_VALUE,maxHeight:u=Number.MAX_VALUE,keepAspectRatio:d=!1,shouldResize:f,onResizeStart:p,onResize:y,onResizeEnd:m}){const v=Xb(),b=typeof e=="string"?e:v,x=vt(),_=g.useRef(null),w=n===Ki.Line?"right":"bottom-right",j=t??w,E=g.useRef(null);g.useEffect(()=>{if(!(!_.current||!b))return E.current||(E.current=TZ({domNode:_.current,nodeId:b,getStoreItems:()=>{const{nodeLookup:M,transform:k,snapGrid:R,snapToGrid:A,nodeOrigin:C,domNode:N}=x.getState();return{nodeLookup:M,transform:k,snapGrid:R,snapToGrid:A,nodeOrigin:C,paneDomNode:N}},onChange:(M,k)=>{const{triggerNodeChanges:R,nodeLookup:A,parentLookup:C,nodeOrigin:N}=x.getState(),T=[],I={x:M.x,y:M.y},L=A.get(b);if(L&&L.expandParent&&L.parentId){const D=L.origin??N,B=M.width??L.measured.width,H=M.height??L.measured.height,F={id:L.id,parentId:L.parentId,rect:{width:B,height:H,...mT({x:M.x??L.position.x,y:M.y??L.position.y},{width:B,height:H},L.parentId,A,D)}},z=Bb([F],A,C,N);T.push(...z),I.x=M.x?Math.max(D[0]*B,M.x):void 0,I.y=M.y?Math.max(D[1]*H,M.y):void 0}if(I.x!==void 0&&I.y!==void 0){const D={id:b,type:"position",position:{...I}};T.push(D)}if(M.width!==void 0&&M.height!==void 0){const D={id:b,type:"dimensions",resizing:!0,setAttributes:!0,dimensions:{width:M.width,height:M.height}};T.push(D)}for(const D of k){const B={...D,type:"position"};T.push(B)}R(T)},onEnd:()=>{const M={id:b,type:"dimensions",resizing:!1};x.getState().triggerNodeChanges([M])}})),E.current.update({controlPosition:j,boundaries:{minWidth:s,minHeight:c,maxWidth:l,maxHeight:u},keepAspectRatio:d,onResizeStart:p,onResize:y,onResizeEnd:m,shouldResize:f}),()=>{var M;(M=E.current)==null||M.destroy()}},[j,s,c,l,u,d,p,y,m,f]);const S=j.split("-"),O=n===Ki.Line?"borderColor":"backgroundColor",P=i?{...o,[O]:i}:o;return h.jsx("div",{className:It(["react-flow__resize-control","nodrag",...S,n,r]),ref:_,style:P,children:a})}const JR=g.memo(Gte);function Zte({nodeId:e,isVisible:t=!0,handleClassName:n,handleStyle:r,lineClassName:o,lineStyle:a,color:i,minWidth:s=10,minHeight:c=10,maxWidth:l=Number.MAX_VALUE,maxHeight:u=Number.MAX_VALUE,keepAspectRatio:d=!1,shouldResize:f,onResizeStart:p,onResize:y,onResizeEnd:m}){return t?h.jsxs(h.Fragment,{children:[CZ.map(v=>h.jsx(JR,{className:o,style:a,nodeId:e,position:v,variant:Ki.Line,color:i,minWidth:s,minHeight:c,maxWidth:l,maxHeight:u,onResizeStart:p,keepAspectRatio:d,shouldResize:f,onResize:y,onResizeEnd:m},v)),SZ.map(v=>h.jsx(JR,{className:n,style:r,nodeId:e,position:v,color:i,minWidth:s,minHeight:c,maxWidth:l,maxHeight:u,onResizeStart:p,keepAspectRatio:d,shouldResize:f,onResize:y,onResizeEnd:m},v))]}):null}var Jb,GR;function ene(){if(GR)return Jb;GR=1;var e=function(b){return t(b)&&!n(b)};function t(b){return!!b&&typeof b=="object"}function n(b){var x=Object.prototype.toString.call(b);return x==="[object RegExp]"||x==="[object Date]"||a(b)}var r=typeof Symbol=="function"&&Symbol.for,o=r?Symbol.for("react.element"):60103;function a(b){return b.$$typeof===o}function i(b){return Array.isArray(b)?[]:{}}function s(b,x){return x.clone!==!1&&x.isMergeableObject(b)?m(i(b),b,x):b}function c(b,x,_){return b.concat(x).map(function(w){return s(w,_)})}function l(b,x){if(!x.customMerge)return m;var _=x.customMerge(b);return typeof _=="function"?_:m}function u(b){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(b).filter(function(x){return Object.propertyIsEnumerable.call(b,x)}):[]}function d(b){return Object.keys(b).concat(u(b))}function f(b,x){try{return x in b}catch{return!1}}function p(b,x){return f(b,x)&&!(Object.hasOwnProperty.call(b,x)&&Object.propertyIsEnumerable.call(b,x))}function y(b,x,_){var w={};return _.isMergeableObject(b)&&d(b).forEach(function(j){w[j]=s(b[j],_)}),d(x).forEach(function(j){p(b,j)||(f(b,j)&&_.isMergeableObject(x[j])?w[j]=l(j,_)(b[j],x[j],_):w[j]=s(x[j],_))}),w}function m(b,x,_){_=_||{},_.arrayMerge=_.arrayMerge||c,_.isMergeableObject=_.isMergeableObject||e,_.cloneUnlessOtherwiseSpecified=s;var w=Array.isArray(x),j=Array.isArray(b),E=w===j;return E?w?_.arrayMerge(b,x,_):y(b,x,_):s(x,_)}m.all=function(b,x){if(!Array.isArray(b))throw new Error("first argument should be an array");return b.reduce(function(_,w){return m(_,w,x)},{})};var v=m;return Jb=v,Jb}var tne=ene();const Lf=Xe(tne);var ZR={},eI;function nne(){if(eI)return ZR;eI=1;var e;return function(t){(function(n){var r=typeof globalThis=="object"?globalThis:typeof Xs=="object"?Xs:typeof self=="object"?self:typeof this=="object"?this:c(),o=a(t);typeof r.Reflect<"u"&&(o=a(r.Reflect,o)),n(o,r),typeof r.Reflect>"u"&&(r.Reflect=t);function a(l,u){return function(d,f){Object.defineProperty(l,d,{configurable:!0,writable:!0,value:f}),u&&u(d,f)}}function i(){try{return Function("return this;")()}catch{}}function s(){try{return(0,eval)("(function() { return this; })()")}catch{}}function c(){return i()||s()}})(function(n,r){var o=Object.prototype.hasOwnProperty,a=typeof Symbol=="function",i=a&&typeof Symbol.toPrimitive<"u"?Symbol.toPrimitive:"@@toPrimitive",s=a&&typeof Symbol.iterator<"u"?Symbol.iterator:"@@iterator",c=typeof Object.create=="function",l={__proto__:[]}instanceof Array,u=!c&&!l,d={create:c?function(){return la(Object.create(null))}:l?function(){return la({__proto__:null})}:function(){return la({})},has:u?function(X,ee){return o.call(X,ee)}:function(X,ee){return ee in X},get:u?function(X,ee){return o.call(X,ee)?X[ee]:void 0}:function(X,ee){return X[ee]}},f=Object.getPrototypeOf(Function),p=typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:_r(),y=typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:ti(),m=typeof WeakMap=="function"?WeakMap:Zn(),v=a?Symbol.for("@reflect-metadata:registry"):void 0,b=St(),x=yt(b);function _(X,ee,ie,pe){if(z(ie)){if(!$(X))throw new TypeError;if(!le(ee))throw new TypeError;return A(X,ee)}else{if(!$(X))throw new TypeError;if(!oe(ee))throw new TypeError;if(!oe(pe)&&!z(pe)&&!G(pe))throw new TypeError;return G(pe)&&(pe=void 0),ie=te(ie),C(X,ee,ie,pe)}}n("decorate",_);function w(X,ee){function ie(pe,Ne){if(!oe(pe))throw new TypeError;if(!z(Ne)&&!ve(Ne))throw new TypeError;D(X,ee,pe,Ne)}return ie}n("metadata",w);function j(X,ee,ie,pe){if(!oe(ie))throw new TypeError;return z(pe)||(pe=te(pe)),D(X,ee,ie,pe)}n("defineMetadata",j);function E(X,ee,ie){if(!oe(ee))throw new TypeError;return z(ie)||(ie=te(ie)),N(X,ee,ie)}n("hasMetadata",E);function S(X,ee,ie){if(!oe(ee))throw new TypeError;return z(ie)||(ie=te(ie)),T(X,ee,ie)}n("hasOwnMetadata",S);function O(X,ee,ie){if(!oe(ee))throw new TypeError;return z(ie)||(ie=te(ie)),I(X,ee,ie)}n("getMetadata",O);function P(X,ee,ie){if(!oe(ee))throw new TypeError;return z(ie)||(ie=te(ie)),L(X,ee,ie)}n("getOwnMetadata",P);function M(X,ee){if(!oe(X))throw new TypeError;return z(ee)||(ee=te(ee)),B(X,ee)}n("getMetadataKeys",M);function k(X,ee){if(!oe(X))throw new TypeError;return z(ee)||(ee=te(ee)),H(X,ee)}n("getOwnMetadataKeys",k);function R(X,ee,ie){if(!oe(ee))throw new TypeError;if(z(ie)||(ie=te(ie)),!oe(ee))throw new TypeError;z(ie)||(ie=te(ie));var pe=bn(ee,ie,!1);return z(pe)?!1:pe.OrdinaryDeleteMetadata(X,ee,ie)}n("deleteMetadata",R);function A(X,ee){for(var ie=X.length-1;ie>=0;--ie){var pe=X[ie],Ne=pe(ee);if(!z(Ne)&&!G(Ne)){if(!le(Ne))throw new TypeError;ee=Ne}}return ee}function C(X,ee,ie,pe){for(var Ne=X.length-1;Ne>=0;--Ne){var Mt=X[Ne],wt=Mt(ee,ie,pe);if(!z(wt)&&!G(wt)){if(!oe(wt))throw new TypeError;pe=wt}}return pe}function N(X,ee,ie){var pe=T(X,ee,ie);if(pe)return!0;var Ne=ct(ee);return G(Ne)?!1:N(X,Ne,ie)}function T(X,ee,ie){var pe=bn(ee,ie,!1);return z(pe)?!1:W(pe.OrdinaryHasOwnMetadata(X,ee,ie))}function I(X,ee,ie){var pe=T(X,ee,ie);if(pe)return L(X,ee,ie);var Ne=ct(ee);if(!G(Ne))return I(X,Ne,ie)}function L(X,ee,ie){var pe=bn(ee,ie,!1);if(!z(pe))return pe.OrdinaryGetOwnMetadata(X,ee,ie)}function D(X,ee,ie,pe){var Ne=bn(ie,pe,!0);Ne.OrdinaryDefineOwnMetadata(X,ee,ie,pe)}function B(X,ee){var ie=H(X,ee),pe=ct(X);if(pe===null)return ie;var Ne=B(pe,ee);if(Ne.length<=0)return ie;if(ie.length<=0)return Ne;for(var Mt=new y,wt=[],Be=0,ge=ie;Be<ge.length;Be++){var we=ge[Be],_e=Mt.has(we);_e||(Mt.add(we),wt.push(we))}for(var je=0,Le=Ne;je<Le.length;je++){var we=Le[je],_e=Mt.has(we);_e||(Mt.add(we),wt.push(we))}return wt}function H(X,ee){var ie=bn(X,ee,!1);return ie?ie.OrdinaryOwnMetadataKeys(X,ee):[]}function F(X){if(X===null)return 1;switch(typeof X){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return X===null?1:6;default:return 6}}function z(X){return X===void 0}function G(X){return X===null}function Q(X){return typeof X=="symbol"}function oe(X){return typeof X=="object"?X!==null:typeof X=="function"}function Z(X,ee){switch(F(X)){case 0:return X;case 1:return X;case 2:return X;case 3:return X;case 4:return X;case 5:return X}var ie="string",pe=qe(X,i);if(pe!==void 0){var Ne=pe.call(X,ie);if(oe(Ne))throw new TypeError;return Ne}return q(X)}function q(X,ee){var ie,pe;{var Ne=X.toString;if(se(Ne)){var pe=Ne.call(X);if(!oe(pe))return pe}var ie=X.valueOf;if(se(ie)){var pe=ie.call(X);if(!oe(pe))return pe}}throw new TypeError}function W(X){return!!X}function J(X){return""+X}function te(X){var ee=Z(X);return Q(ee)?ee:J(ee)}function $(X){return Array.isArray?Array.isArray(X):X instanceof Object?X instanceof Array:Object.prototype.toString.call(X)==="[object Array]"}function se(X){return typeof X=="function"}function le(X){return typeof X=="function"}function ve(X){switch(F(X)){case 3:return!0;case 4:return!0;default:return!1}}function Te(X,ee){return X===ee||X!==X&&ee!==ee}function qe(X,ee){var ie=X[ee];if(ie!=null){if(!se(ie))throw new TypeError;return ie}}function Ye(X){var ee=qe(X,s);if(!se(ee))throw new TypeError;var ie=ee.call(X);if(!oe(ie))throw new TypeError;return ie}function ze(X){return X.value}function st(X){var ee=X.next();return ee.done?!1:ee}function He(X){var ee=X.return;ee&&ee.call(X)}function ct(X){var ee=Object.getPrototypeOf(X);if(typeof X!="function"||X===f||ee!==f)return ee;var ie=X.prototype,pe=ie&&Object.getPrototypeOf(ie);if(pe==null||pe===Object.prototype)return ee;var Ne=pe.constructor;return typeof Ne!="function"||Ne===X?ee:Ne}function Ut(){var X;!z(v)&&typeof r.Reflect<"u"&&!(v in r.Reflect)&&typeof r.Reflect.defineMetadata=="function"&&(X=Rt(r.Reflect));var ee,ie,pe,Ne=new m,Mt={registerProvider:wt,getProvider:ge,setProvider:_e};return Mt;function wt(je){if(!Object.isExtensible(Mt))throw new Error("Cannot add provider to a frozen registry.");switch(!0){case X===je:break;case z(ee):ee=je;break;case ee===je:break;case z(ie):ie=je;break;case ie===je:break;default:pe===void 0&&(pe=new y),pe.add(je);break}}function Be(je,Le){if(!z(ee)){if(ee.isProviderFor(je,Le))return ee;if(!z(ie)){if(ie.isProviderFor(je,Le))return ee;if(!z(pe))for(var ut=Ye(pe);;){var Ct=st(ut);if(!Ct)return;var V=ze(Ct);if(V.isProviderFor(je,Le))return He(ut),V}}}if(!z(X)&&X.isProviderFor(je,Le))return X}function ge(je,Le){var ut=Ne.get(je),Ct;return z(ut)||(Ct=ut.get(Le)),z(Ct)&&(Ct=Be(je,Le),z(Ct)||(z(ut)&&(ut=new p,Ne.set(je,ut)),ut.set(Le,Ct))),Ct}function we(je){if(z(je))throw new TypeError;return ee===je||ie===je||!z(pe)&&pe.has(je)}function _e(je,Le,ut){if(!we(ut))throw new Error("Metadata provider not registered.");var Ct=ge(je,Le);if(Ct!==ut){if(!z(Ct))return!1;var V=Ne.get(je);z(V)&&(V=new p,Ne.set(je,V)),V.set(Le,ut)}return!0}}function St(){var X;return!z(v)&&oe(r.Reflect)&&Object.isExtensible(r.Reflect)&&(X=r.Reflect[v]),z(X)&&(X=Ut()),!z(v)&&oe(r.Reflect)&&Object.isExtensible(r.Reflect)&&Object.defineProperty(r.Reflect,v,{enumerable:!1,configurable:!1,writable:!1,value:X}),X}function yt(X){var ee=new m,ie={isProviderFor:function(we,_e){var je=ee.get(we);return z(je)?!1:je.has(_e)},OrdinaryDefineOwnMetadata:wt,OrdinaryHasOwnMetadata:Ne,OrdinaryGetOwnMetadata:Mt,OrdinaryOwnMetadataKeys:Be,OrdinaryDeleteMetadata:ge};return b.registerProvider(ie),ie;function pe(we,_e,je){var Le=ee.get(we),ut=!1;if(z(Le)){if(!je)return;Le=new p,ee.set(we,Le),ut=!0}var Ct=Le.get(_e);if(z(Ct)){if(!je)return;if(Ct=new p,Le.set(_e,Ct),!X.setProvider(we,_e,ie))throw Le.delete(_e),ut&&ee.delete(we),new Error("Wrong provider for target.")}return Ct}function Ne(we,_e,je){var Le=pe(_e,je,!1);return z(Le)?!1:W(Le.has(we))}function Mt(we,_e,je){var Le=pe(_e,je,!1);if(!z(Le))return Le.get(we)}function wt(we,_e,je,Le){var ut=pe(je,Le,!0);ut.set(we,_e)}function Be(we,_e){var je=[],Le=pe(we,_e,!1);if(z(Le))return je;for(var ut=Le.keys(),Ct=Ye(ut),V=0;;){var Y=st(Ct);if(!Y)return je.length=V,je;var ne=ze(Y);try{je[V]=ne}catch(ue){try{He(Ct)}finally{throw ue}}V++}}function ge(we,_e,je){var Le=pe(_e,je,!1);if(z(Le)||!Le.delete(we))return!1;if(Le.size===0){var ut=ee.get(_e);z(ut)||(ut.delete(je),ut.size===0&&ee.delete(ut))}return!0}}function Rt(X){var ee=X.defineMetadata,ie=X.hasOwnMetadata,pe=X.getOwnMetadata,Ne=X.getOwnMetadataKeys,Mt=X.deleteMetadata,wt=new m,Be={isProviderFor:function(ge,we){var _e=wt.get(ge);return!z(_e)&&_e.has(we)?!0:Ne(ge,we).length?(z(_e)&&(_e=new y,wt.set(ge,_e)),_e.add(we),!0):!1},OrdinaryDefineOwnMetadata:ee,OrdinaryHasOwnMetadata:ie,OrdinaryGetOwnMetadata:pe,OrdinaryOwnMetadataKeys:Ne,OrdinaryDeleteMetadata:Mt};return Be}function bn(X,ee,ie){var pe=b.getProvider(X,ee);if(!z(pe))return pe;if(ie){if(b.setProvider(X,ee,x))return x;throw new Error("Illegal state.")}}function _r(){var X={},ee=[],ie=function(){function Be(ge,we,_e){this._index=0,this._keys=ge,this._values=we,this._selector=_e}return Be.prototype["@@iterator"]=function(){return this},Be.prototype[s]=function(){return this},Be.prototype.next=function(){var ge=this._index;if(ge>=0&&ge<this._keys.length){var we=this._selector(this._keys[ge],this._values[ge]);return ge+1>=this._keys.length?(this._index=-1,this._keys=ee,this._values=ee):this._index++,{value:we,done:!1}}return{value:void 0,done:!0}},Be.prototype.throw=function(ge){throw this._index>=0&&(this._index=-1,this._keys=ee,this._values=ee),ge},Be.prototype.return=function(ge){return this._index>=0&&(this._index=-1,this._keys=ee,this._values=ee),{value:ge,done:!0}},Be}(),pe=function(){function Be(){this._keys=[],this._values=[],this._cacheKey=X,this._cacheIndex=-2}return Object.defineProperty(Be.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),Be.prototype.has=function(ge){return this._find(ge,!1)>=0},Be.prototype.get=function(ge){var we=this._find(ge,!1);return we>=0?this._values[we]:void 0},Be.prototype.set=function(ge,we){var _e=this._find(ge,!0);return this._values[_e]=we,this},Be.prototype.delete=function(ge){var we=this._find(ge,!1);if(we>=0){for(var _e=this._keys.length,je=we+1;je<_e;je++)this._keys[je-1]=this._keys[je],this._values[je-1]=this._values[je];return this._keys.length--,this._values.length--,Te(ge,this._cacheKey)&&(this._cacheKey=X,this._cacheIndex=-2),!0}return!1},Be.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=X,this._cacheIndex=-2},Be.prototype.keys=function(){return new ie(this._keys,this._values,Ne)},Be.prototype.values=function(){return new ie(this._keys,this._values,Mt)},Be.prototype.entries=function(){return new ie(this._keys,this._values,wt)},Be.prototype["@@iterator"]=function(){return this.entries()},Be.prototype[s]=function(){return this.entries()},Be.prototype._find=function(ge,we){if(!Te(this._cacheKey,ge)){this._cacheIndex=-1;for(var _e=0;_e<this._keys.length;_e++)if(Te(this._keys[_e],ge)){this._cacheIndex=_e;break}}return this._cacheIndex<0&&we&&(this._cacheIndex=this._keys.length,this._keys.push(ge),this._values.push(void 0)),this._cacheIndex},Be}();return pe;function Ne(Be,ge){return Be}function Mt(Be,ge){return ge}function wt(Be,ge){return[Be,ge]}}function ti(){var X=function(){function ee(){this._map=new p}return Object.defineProperty(ee.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),ee.prototype.has=function(ie){return this._map.has(ie)},ee.prototype.add=function(ie){return this._map.set(ie,ie),this},ee.prototype.delete=function(ie){return this._map.delete(ie)},ee.prototype.clear=function(){this._map.clear()},ee.prototype.keys=function(){return this._map.keys()},ee.prototype.values=function(){return this._map.keys()},ee.prototype.entries=function(){return this._map.entries()},ee.prototype["@@iterator"]=function(){return this.keys()},ee.prototype[s]=function(){return this.keys()},ee}();return X}function Zn(){var X=16,ee=d.create(),ie=pe();return function(){function ge(){this._key=pe()}return ge.prototype.has=function(we){var _e=Ne(we,!1);return _e!==void 0?d.has(_e,this._key):!1},ge.prototype.get=function(we){var _e=Ne(we,!1);return _e!==void 0?d.get(_e,this._key):void 0},ge.prototype.set=function(we,_e){var je=Ne(we,!0);return je[this._key]=_e,this},ge.prototype.delete=function(we){var _e=Ne(we,!1);return _e!==void 0?delete _e[this._key]:!1},ge.prototype.clear=function(){this._key=pe()},ge}();function pe(){var ge;do ge="@@WeakMap@@"+Be();while(d.has(ee,ge));return ee[ge]=!0,ge}function Ne(ge,we){if(!o.call(ge,ie)){if(!we)return;Object.defineProperty(ge,ie,{value:d.create()})}return ge[ie]}function Mt(ge,we){for(var _e=0;_e<we;++_e)ge[_e]=Math.random()*255|0;return ge}function wt(ge){if(typeof Uint8Array=="function"){var we=new Uint8Array(ge);return typeof crypto<"u"?crypto.getRandomValues(we):typeof msCrypto<"u"?msCrypto.getRandomValues(we):Mt(we,ge),we}return Mt(new Array(ge),ge)}function Be(){var ge=wt(X);ge[6]=ge[6]&79|64,ge[8]=ge[8]&191|128;for(var we="",_e=0;_e<X;++_e){var je=ge[_e];(_e===4||_e===6||_e===8)&&(we+="-"),je<16&&(we+="0"),we+=je.toString(16).toLowerCase()}return we}}function la(X){return X.__=void 0,delete X.__,X}})}(e||(e={})),ZR}nne(),typeof window<"u"&&(window.Buffer=iwe),typeof Uh<"u"&&typeof require<"u"&&(Uh.Buffer=require("buffer/").Buffer);class Dt{static isObject(t){return t!==null&&typeof t=="object"}static isObjectWithName(t){return t!==null&&typeof t=="object"&&t.name!==void 0}static assign(t,...n){for(const r of n)for(const o of Object.getOwnPropertyNames(r))t[o]=r[o]}static mixedListToArray(t){return t!==null&&typeof t=="object"?Object.keys(t).map(n=>t[n]):t}}class xe extends Error{get name(){return this.constructor.name}constructor(t){super(t),Object.setPrototypeOf?Object.setPrototypeOf(this,new.target.prototype):this.__proto__=new.target.prototype}}class Ji extends xe{constructor(){super("Locking not supported on given driver.")}}class Gb extends xe{constructor(){super('Cannot perform update query because update values are not defined. Call "qb.set(...)" method to specify updated values.')}}class pt{static isMssqlParameter(t){return this.check(t,"MssqlParameter")}static isEntityMetadata(t){return this.check(t,"EntityMetadata")}static isColumnMetadata(t){return this.check(t,"ColumnMetadata")}static isSelectQueryBuilder(t){return this.check(t,"SelectQueryBuilder")}static isInsertQueryBuilder(t){return this.check(t,"InsertQueryBuilder")}static isDeleteQueryBuilder(t){return this.check(t,"DeleteQueryBuilder")}static isUpdateQueryBuilder(t){return this.check(t,"UpdateQueryBuilder")}static isSoftDeleteQueryBuilder(t){return this.check(t,"SoftDeleteQueryBuilder")}static isRelationQueryBuilder(t){return this.check(t,"RelationQueryBuilder")}static isBrackets(t){return this.check(t,"Brackets")||this.check(t,"NotBrackets")}static isNotBrackets(t){return this.check(t,"NotBrackets")}static isSubject(t){return this.check(t,"Subject")}static isRdbmsSchemaBuilder(t){return this.check(t,"RdbmsSchemaBuilder")}static isMongoEntityManager(t){return this.check(t,"MongoEntityManager")}static isSqljsEntityManager(t){return this.check(t,"SqljsEntityManager")}static isEntitySchema(t){return this.check(t,"EntitySchema")}static isBaseEntityConstructor(t){return typeof t=="function"&&typeof t.hasId=="function"&&typeof t.save=="function"&&typeof t.useDataSource=="function"}static isFindOperator(t){return this.check(t,"FindOperator")||this.check(t,"EqualOperator")}static isEqualOperator(t){return this.check(t,"EqualOperator")}static isQuery(t){return this.check(t,"Query")}static isTable(t){return this.check(t,"Table")}static isTableCheck(t){return this.check(t,"TableCheck")}static isTableColumn(t){return this.check(t,"TableColumn")}static isTableExclusion(t){return this.check(t,"TableExclusion")}static isTableForeignKey(t){return this.check(t,"TableForeignKey")}static isTableIndex(t){return this.check(t,"TableIndex")}static isTableUnique(t){return this.check(t,"TableUnique")}static isView(t){return this.check(t,"View")}static isDataSource(t){return this.check(t,"DataSource")}static check(t,n){return typeof t=="object"&&t!==null&&t["@instanceof"]===Symbol.for(n)}}class rne extends xe{constructor(t,n){super(),this.entityClass=t,this.criteria=n,this.message=`Could not find any entity of type "${this.stringifyTarget(t)}" matching: ${this.stringifyCriteria(n)}`}stringifyTarget(t){return pt.isEntitySchema(t)?t.options.name:typeof t=="function"||Dt.isObject(t)&&"name"in t?t.name:t}stringifyCriteria(t){try{return JSON.stringify(t,null,4)}catch{}return""+t}}class tI extends xe{constructor(t,n,r){super(`The optimistic lock on entity ${t} failed, version ${n} was expected, but is actually ${r}.`)}}class nI extends xe{constructor(){super("Your database does not support LIMIT on UPDATE statements.")}}class one extends xe{constructor(t){super(`Entity "${t.name}" does not have delete date columns.`)}}class Ff extends xe{constructor(){super("OUTPUT or RETURNING clause only supported by Microsoft SQL Server or PostgreSQL or MariaDB databases.")}}class Tr extends xe{constructor(t,n){super(t),Object.setPrototypeOf(this,Tr.prototype),this.message=`Property "${t}" was not found in "${n.targetName}". Make sure your query is correct.`}}class ane extends xe{constructor(t){super(`Entity ${t} does not have version or update date columns.`)}}class ine extends xe{constructor(){super('Cannot perform insert query because values are not defined. Call "qb.values(...)" method to specify inserted values.')}}class gl extends xe{constructor(){super("The optimistic lock can be used only with getOne() method.")}}class sne extends xe{constructor(t){super(),t.length===1?this.message=`Relation "${t[0]}" was not found; please check if it is correct and really exists in your entity.`:this.message=`Relations ${t.map(n=>`"${n}"`).join(", ")} were not found; please check if relations are correct and they exist in your entities.`}}class cne extends xe{constructor(){super("An open transaction is required for pessimistic lock.")}}class lne extends xe{constructor(){super("RDBMS does not support OFFSET without LIMIT in SELECT statements. You must use limit in conjunction with offset function (or take in conjunction with skip function if you are using pagination).")}}class rI{constructor(t){Dt.assign(this,t||{})}get target(){return this.metadata.target}get hasMetadata(){return!!this._metadata}set metadata(t){this._metadata=t}get metadata(){if(!this._metadata)throw new xe(`Cannot get entity metadata for the given alias "${this.name}"`);return this._metadata}}class Rr{static isAliasProperty(t){if(typeof t!="string"||t.indexOf(".")===-1)return!1;const[n,r]=t.split(".");return!(!n||!r||t.indexOf("(")!==-1||t.indexOf(")")!==-1)}}var Zb={exports:{}},ex={exports:{}},oI;function Gi(){return oI||(oI=1,typeof Object.create=="function"?ex.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:ex.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}),ex.exports}var tx={exports:{}},aI;function Pa(){return aI||(aI=1,function(e,t){var n=swe(),r=n.Buffer;function o(i,s){for(var c in i)s[c]=i[c]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?e.exports=n:(o(n,t),t.Buffer=a);function a(i,s,c){return r(i,s,c)}a.prototype=Object.create(r.prototype),o(r,a),a.from=function(i,s,c){if(typeof i=="number")throw new TypeError("Argument must not be a number");return r(i,s,c)},a.alloc=function(i,s,c){if(typeof i!="number")throw new TypeError("Argument must be a number");var l=r(i);return s!==void 0?typeof c=="string"?l.fill(s,c):l.fill(s):l.fill(0),l},a.allocUnsafe=function(i){if(typeof i!="number")throw new TypeError("Argument must be a number");return r(i)},a.allocUnsafeSlow=function(i){if(typeof i!="number")throw new TypeError("Argument must be a number");return n.SlowBuffer(i)}}(tx,tx.exports)),tx.exports}var nx,iI;function Zi(){if(iI)return nx;iI=1;var e=Pa().Buffer;function t(n,r){this._block=e.alloc(n),this._finalSize=r,this._blockSize=n,this._len=0}return t.prototype.update=function(n,r){typeof n=="string"&&(r=r||"utf8",n=e.from(n,r));for(var o=this._block,a=this._blockSize,i=n.length,s=this._len,c=0;c<i;){for(var l=s%a,u=Math.min(i-c,a-l),d=0;d<u;d++)o[l+d]=n[c+d];s+=u,c+=u,s%a===0&&this._update(o)}return this._len+=i,this},t.prototype.digest=function(n){var r=this._len%this._blockSize;this._block[r]=128,this._block.fill(0,r+1),r>=this._finalSize&&(this._update(this._block),this._block.fill(0));var o=this._len*8;if(o<=4294967295)this._block.writeUInt32BE(o,this._blockSize-4);else{var a=(o&4294967295)>>>0,i=(o-a)/4294967296;this._block.writeUInt32BE(i,this._blockSize-8),this._block.writeUInt32BE(a,this._blockSize-4)}this._update(this._block);var s=this._hash();return n?s.toString(n):s},t.prototype._update=function(){throw new Error("_update must be implemented by subclass")},nx=t,nx}var rx,sI;function une(){if(sI)return rx;sI=1;var e=Gi(),t=Zi(),n=Pa().Buffer,r=[1518500249,1859775393,-1894007588,-899497514],o=new Array(80);function a(){this.init(),this._w=o,t.call(this,64,56)}e(a,t),a.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function i(l){return l<<5|l>>>27}function s(l){return l<<30|l>>>2}function c(l,u,d,f){return l===0?u&d|~u&f:l===2?u&d|u&f|d&f:u^d^f}return a.prototype._update=function(l){for(var u=this._w,d=this._a|0,f=this._b|0,p=this._c|0,y=this._d|0,m=this._e|0,v=0;v<16;++v)u[v]=l.readInt32BE(v*4);for(;v<80;++v)u[v]=u[v-3]^u[v-8]^u[v-14]^u[v-16];for(var b=0;b<80;++b){var x=~~(b/20),_=i(d)+c(x,f,p,y)+m+u[b]+r[x]|0;m=y,y=p,p=s(f),f=d,d=_}this._a=d+this._a|0,this._b=f+this._b|0,this._c=p+this._c|0,this._d=y+this._d|0,this._e=m+this._e|0},a.prototype._hash=function(){var l=n.allocUnsafe(20);return l.writeInt32BE(this._a|0,0),l.writeInt32BE(this._b|0,4),l.writeInt32BE(this._c|0,8),l.writeInt32BE(this._d|0,12),l.writeInt32BE(this._e|0,16),l},rx=a,rx}var ox,cI;function dne(){if(cI)return ox;cI=1;var e=Gi(),t=Zi(),n=Pa().Buffer,r=[1518500249,1859775393,-1894007588,-899497514],o=new Array(80);function a(){this.init(),this._w=o,t.call(this,64,56)}e(a,t),a.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function i(u){return u<<1|u>>>31}function s(u){return u<<5|u>>>27}function c(u){return u<<30|u>>>2}function l(u,d,f,p){return u===0?d&f|~d&p:u===2?d&f|d&p|f&p:d^f^p}return a.prototype._update=function(u){for(var d=this._w,f=this._a|0,p=this._b|0,y=this._c|0,m=this._d|0,v=this._e|0,b=0;b<16;++b)d[b]=u.readInt32BE(b*4);for(;b<80;++b)d[b]=i(d[b-3]^d[b-8]^d[b-14]^d[b-16]);for(var x=0;x<80;++x){var _=~~(x/20),w=s(f)+l(_,p,y,m)+v+d[x]+r[_]|0;v=m,m=y,y=c(p),p=f,f=w}this._a=f+this._a|0,this._b=p+this._b|0,this._c=y+this._c|0,this._d=m+this._d|0,this._e=v+this._e|0},a.prototype._hash=function(){var u=n.allocUnsafe(20);return u.writeInt32BE(this._a|0,0),u.writeInt32BE(this._b|0,4),u.writeInt32BE(this._c|0,8),u.writeInt32BE(this._d|0,12),u.writeInt32BE(this._e|0,16),u},ox=a,ox}var ax,lI;function uI(){if(lI)return ax;lI=1;var e=Gi(),t=Zi(),n=Pa().Buffer,r=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],o=new Array(64);function a(){this.init(),this._w=o,t.call(this,64,56)}e(a,t),a.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this};function i(f,p,y){return y^f&(p^y)}function s(f,p,y){return f&p|y&(f|p)}function c(f){return(f>>>2|f<<30)^(f>>>13|f<<19)^(f>>>22|f<<10)}function l(f){return(f>>>6|f<<26)^(f>>>11|f<<21)^(f>>>25|f<<7)}function u(f){return(f>>>7|f<<25)^(f>>>18|f<<14)^f>>>3}function d(f){return(f>>>17|f<<15)^(f>>>19|f<<13)^f>>>10}return a.prototype._update=function(f){for(var p=this._w,y=this._a|0,m=this._b|0,v=this._c|0,b=this._d|0,x=this._e|0,_=this._f|0,w=this._g|0,j=this._h|0,E=0;E<16;++E)p[E]=f.readInt32BE(E*4);for(;E<64;++E)p[E]=d(p[E-2])+p[E-7]+u(p[E-15])+p[E-16]|0;for(var S=0;S<64;++S){var O=j+l(x)+i(x,_,w)+r[S]+p[S]|0,P=c(y)+s(y,m,v)|0;j=w,w=_,_=x,x=b+O|0,b=v,v=m,m=y,y=O+P|0}this._a=y+this._a|0,this._b=m+this._b|0,this._c=v+this._c|0,this._d=b+this._d|0,this._e=x+this._e|0,this._f=_+this._f|0,this._g=w+this._g|0,this._h=j+this._h|0},a.prototype._hash=function(){var f=n.allocUnsafe(32);return f.writeInt32BE(this._a,0),f.writeInt32BE(this._b,4),f.writeInt32BE(this._c,8),f.writeInt32BE(this._d,12),f.writeInt32BE(this._e,16),f.writeInt32BE(this._f,20),f.writeInt32BE(this._g,24),f.writeInt32BE(this._h,28),f},ax=a,ax}var ix,dI;function fne(){if(dI)return ix;dI=1;var e=Gi(),t=uI(),n=Zi(),r=Pa().Buffer,o=new Array(64);function a(){this.init(),this._w=o,n.call(this,64,56)}return e(a,t),a.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},a.prototype._hash=function(){var i=r.allocUnsafe(28);return i.writeInt32BE(this._a,0),i.writeInt32BE(this._b,4),i.writeInt32BE(this._c,8),i.writeInt32BE(this._d,12),i.writeInt32BE(this._e,16),i.writeInt32BE(this._f,20),i.writeInt32BE(this._g,24),i},ix=a,ix}var sx,fI;function pI(){if(fI)return sx;fI=1;var e=Gi(),t=Zi(),n=Pa().Buffer,r=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],o=new Array(160);function a(){this.init(),this._w=o,t.call(this,128,112)}e(a,t),a.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this};function i(m,v,b){return b^m&(v^b)}function s(m,v,b){return m&v|b&(m|v)}function c(m,v){return(m>>>28|v<<4)^(v>>>2|m<<30)^(v>>>7|m<<25)}function l(m,v){return(m>>>14|v<<18)^(m>>>18|v<<14)^(v>>>9|m<<23)}function u(m,v){return(m>>>1|v<<31)^(m>>>8|v<<24)^m>>>7}function d(m,v){return(m>>>1|v<<31)^(m>>>8|v<<24)^(m>>>7|v<<25)}function f(m,v){return(m>>>19|v<<13)^(v>>>29|m<<3)^m>>>6}function p(m,v){return(m>>>19|v<<13)^(v>>>29|m<<3)^(m>>>6|v<<26)}function y(m,v){return m>>>0<v>>>0?1:0}return a.prototype._update=function(m){for(var v=this._w,b=this._ah|0,x=this._bh|0,_=this._ch|0,w=this._dh|0,j=this._eh|0,E=this._fh|0,S=this._gh|0,O=this._hh|0,P=this._al|0,M=this._bl|0,k=this._cl|0,R=this._dl|0,A=this._el|0,C=this._fl|0,N=this._gl|0,T=this._hl|0,I=0;I<32;I+=2)v[I]=m.readInt32BE(I*4),v[I+1]=m.readInt32BE(I*4+4);for(;I<160;I+=2){var L=v[I-30],D=v[I-15*2+1],B=u(L,D),H=d(D,L);L=v[I-2*2],D=v[I-2*2+1];var F=f(L,D),z=p(D,L),G=v[I-7*2],Q=v[I-7*2+1],oe=v[I-16*2],Z=v[I-16*2+1],q=H+Q|0,W=B+G+y(q,H)|0;q=q+z|0,W=W+F+y(q,z)|0,q=q+Z|0,W=W+oe+y(q,Z)|0,v[I]=W,v[I+1]=q}for(var J=0;J<160;J+=2){W=v[J],q=v[J+1];var te=s(b,x,_),$=s(P,M,k),se=c(b,P),le=c(P,b),ve=l(j,A),Te=l(A,j),qe=r[J],Ye=r[J+1],ze=i(j,E,S),st=i(A,C,N),He=T+Te|0,ct=O+ve+y(He,T)|0;He=He+st|0,ct=ct+ze+y(He,st)|0,He=He+Ye|0,ct=ct+qe+y(He,Ye)|0,He=He+q|0,ct=ct+W+y(He,q)|0;var Ut=le+$|0,St=se+te+y(Ut,le)|0;O=S,T=N,S=E,N=C,E=j,C=A,A=R+He|0,j=w+ct+y(A,R)|0,w=_,R=k,_=x,k=M,x=b,M=P,P=He+Ut|0,b=ct+St+y(P,He)|0}this._al=this._al+P|0,this._bl=this._bl+M|0,this._cl=this._cl+k|0,this._dl=this._dl+R|0,this._el=this._el+A|0,this._fl=this._fl+C|0,this._gl=this._gl+N|0,this._hl=this._hl+T|0,this._ah=this._ah+b+y(this._al,P)|0,this._bh=this._bh+x+y(this._bl,M)|0,this._ch=this._ch+_+y(this._cl,k)|0,this._dh=this._dh+w+y(this._dl,R)|0,this._eh=this._eh+j+y(this._el,A)|0,this._fh=this._fh+E+y(this._fl,C)|0,this._gh=this._gh+S+y(this._gl,N)|0,this._hh=this._hh+O+y(this._hl,T)|0},a.prototype._hash=function(){var m=n.allocUnsafe(64);function v(b,x,_){m.writeInt32BE(b,_),m.writeInt32BE(x,_+4)}return v(this._ah,this._al,0),v(this._bh,this._bl,8),v(this._ch,this._cl,16),v(this._dh,this._dl,24),v(this._eh,this._el,32),v(this._fh,this._fl,40),v(this._gh,this._gl,48),v(this._hh,this._hl,56),m},sx=a,sx}var cx,hI;function pne(){if(hI)return cx;hI=1;var e=Gi(),t=pI(),n=Zi(),r=Pa().Buffer,o=new Array(160);function a(){this.init(),this._w=o,n.call(this,128,112)}return e(a,t),a.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},a.prototype._hash=function(){var i=r.allocUnsafe(48);function s(c,l,u){i.writeInt32BE(c,u),i.writeInt32BE(l,u+4)}return s(this._ah,this._al,0),s(this._bh,this._bl,8),s(this._ch,this._cl,16),s(this._dh,this._dl,24),s(this._eh,this._el,32),s(this._fh,this._fl,40),i},cx=a,cx}var mI;function hne(){if(mI)return Zb.exports;mI=1;var e=Zb.exports=function(t){t=t.toLowerCase();var n=e[t];if(!n)throw new Error(t+" is not supported (we accept pull requests)");return new n};return e.sha=une(),e.sha1=dne(),e.sha224=fne(),e.sha256=uI(),e.sha384=pne(),e.sha512=pI(),Zb.exports}var mne=hne();const yne=Xe(mne);function gne(e,t={}){const{segmentLength:n=4,separator:r="__",termLength:o=2}=t;return e.split(r).reduce((a,i)=>{const s=i.replace(/([a-z\xE0-\xFF])([A-Z\xC0-\xDF])/g,"$1 $2").split(" "),c=s.length>1?o:n,l=s.map(u=>u.substr(0,c)).join("");return a.push(l),a},[]).join(r)}function vne(e,t={}){const n=yne("sha1");n.update(e,"utf8");const r=n.digest("hex");return t.length?r.slice(0,t.length):r}class bne{static isGreaterOrEqual(t,n){const r=yI(t),o=yI(n);return r[0]>o[0]||r[0]===o[0]&&r[1]>o[1]||r[0]===o[0]&&r[1]===o[1]&&r[2]>=o[2]}}function yI(e=""){const t=[0,0,0];return e.split(".").forEach((n,r)=>t[r]=parseInt(n,10)),t}class ye{static isSQLiteFamily(t){return["sqlite","cordova","react-native","nativescript","sqljs","expo","better-sqlite3","capacitor"].includes(t.options.type)}static isMySQLFamily(t){return["mysql","mariadb"].includes(t.options.type)}static isReleaseVersionOrGreater(t,n){return t.version!=null&&bne.isGreaterOrEqual(t.version,n)}static isPostgresFamily(t){return["postgres","aurora-postgres","cockroachdb"].includes(t.options.type)}static buildDriverOptions(t,n){if(t.url){const r=this.parseConnectionUrl(t.url);n&&n.useSid&&r.database&&(r.sid=r.database);for(const o of Object.keys(r))typeof r[o]>"u"&&delete r[o];return Object.assign({},t,r)}return Object.assign({},t)}static buildMongoDBDriverOptions(t,n){if(t.url){const r=this.parseMongoDBConnectionUrl(t.url);n&&n.useSid&&r.database&&(r.sid=r.database);for(const o of Object.keys(r))typeof r[o]>"u"&&delete r[o];return Object.assign({},t,r)}return Object.assign({},t)}static buildAlias({maxAliasLength:t},n,...r){const o=n&&n.joiner?n.joiner:"_";let a=r.length===1?r[0]:r.join(o);if(t&&t>0&&a.length>t){if(n&&n.shorten===!0){const i=gne(a);if(i.length<t)return i}return vne(a,{length:t})}return a}static buildColumnAlias({maxAliasLength:t},n,...r){return typeof n=="string"?(r.unshift(n),n={shorten:!1,joiner:"_"}):n=Object.assign({shorten:!1,joiner:"_"},n),this.buildAlias({maxAliasLength:t},n,...r)}static parseConnectionUrl(t){const n=t.split(":")[0],r=t.indexOf("//"),o=t.substr(r+2),a=o.indexOf("/"),i=a!==-1?o.substr(0,a):o;let s=a!==-1?o.substr(a+1):void 0;s&&s.indexOf("?")!==-1&&(s=s.substr(0,s.indexOf("?")));const c=i.lastIndexOf("@"),l=i.substr(0,c),u=i.substr(c+1);let d=l,f="";const p=l.indexOf(":");p!==-1&&(d=l.substr(0,p),f=l.substr(p+1));const[y,m]=u.split(":");return{type:n,host:y,username:decodeURIComponent(d),password:decodeURIComponent(f),port:m?parseInt(m):void 0,database:s||void 0}}static parseMongoDBConnectionUrl(t){const n=t.split(":")[0],r=t.indexOf("//"),o=t.substr(r+2),a=o.indexOf("/"),i=a!==-1?o.substr(0,a):o;let s=a!==-1?o.substr(a+1):void 0,c="",l,u,d,f,p={};if(s&&s.indexOf("?")!==-1){c=s.substr(s.indexOf("?")+1,s.length);const j=c.split("&");let E,S;j.forEach(O=>{E=O.split("=")[0],S=O.split("=")[1],p[E]=S}),f=p.replicaSet,s=s.substr(0,s.indexOf("?"))}const y=i.lastIndexOf("@"),m=i.substr(0,y),v=i.substr(y+1);let b=m,x="";const _=m.indexOf(":");_!==-1&&(b=m.substr(0,_),x=m.substr(_+1)),f?d=v:[l,u]=v.split(":");let w={type:n,host:l,hostReplicaSet:d,username:decodeURIComponent(b),password:decodeURIComponent(x),port:u?parseInt(u):void 0,database:s||void 0};for(const[j,E]of Object.entries(p))w[j]=E;return w}}class gI{constructor(t,n,r){this.connection=t,this.queryExpressionMap=n,this.isSelectedEvaluated=!1,this.relationEvaluated=!1,r&&Dt.assign(this,r)}get isMany(){return this.isMappingMany!==void 0?this.isMappingMany:this.relation?this.relation.isManyToMany||this.relation.isOneToMany:!1}get isSelected(){if(!this.isSelectedEvaluated){let t=()=>{for(const n of this.queryExpressionMap.selects)if(n.selection===this.alias.name||this.metadata&&this.metadata.columns.find(r=>n.selection===this.alias.name+"."+r.propertyPath))return!0;return!1};this.isSelectedCache=t(),this.isSelectedEvaluated=!0}return this.isSelectedCache}get tablePath(){return this.metadata?this.metadata.tablePath:this.entityOrProperty}get parentAlias(){if(Rr.isAliasProperty(this.entityOrProperty))return this.entityOrProperty.substr(0,this.entityOrProperty.indexOf("."))}get relationPropertyPath(){if(Rr.isAliasProperty(this.entityOrProperty))return this.entityOrProperty.substr(this.entityOrProperty.indexOf(".")+1)}get relation(){if(!this.relationEvaluated){let t=()=>{if(!Rr.isAliasProperty(this.entityOrProperty))return;const n=this.queryExpressionMap.findAliasByName(this.parentAlias);let r=n.metadata.findRelationWithPropertyPath(this.relationPropertyPath);if(r||n.metadata.parentEntityMetadata&&(r=n.metadata.parentEntityMetadata.findRelationWithPropertyPath(this.relationPropertyPath),r))return r;throw new xe(`Relation with property path ${this.relationPropertyPath} in entity was not found.`)};this.relationCache=t.bind(this)(),this.relationEvaluated=!0}return this.relationCache}get metadata(){if(this.relation)return this.relation.inverseEntityMetadata;if(this.connection.hasMetadata(this.entityOrProperty))return this.connection.getMetadata(this.entityOrProperty);if(this.mapAsEntity&&this.connection.hasMetadata(this.mapAsEntity))return this.connection.getMetadata(this.mapAsEntity)}get junctionAlias(){if(!this.relation)throw new xe("Cannot get junction table for join without relation.");if(typeof this.entityOrProperty!="string")throw new xe("Junction property is not defined.");const t=this.entityOrProperty.substr(0,this.entityOrProperty.indexOf("."));return this.relation.isOwning?ye.buildAlias(this.connection.driver,void 0,t,this.alias.name):ye.buildAlias(this.connection.driver,void 0,this.alias.name,t)}get mapToPropertyParentAlias(){if(this.mapToProperty)return this.mapToProperty.split(".")[0]}get mapToPropertyPropertyName(){if(this.mapToProperty)return this.mapToProperty.split(".")[1]}}class lx{constructor(t,n){this.queryExpressionMap=t,this.disableMixedMap=!1,Dt.assign(this,n||{})}get joinInverseSideMetadata(){return this.relation.inverseEntityMetadata}get parentAlias(){if(!Rr.isAliasProperty(this.relationName))throw new xe("Given value must be a string representation of alias property");return this.relationName.substr(0,this.relationName.indexOf("."))}get relationPropertyPath(){if(!Rr.isAliasProperty(this.relationName))throw new xe("Given value must be a string representation of alias property");return this.relationName.substr(this.relationName.indexOf(".")+1)}get relation(){if(!Rr.isAliasProperty(this.relationName))throw new xe("Given value must be a string representation of alias property");const t=this.queryExpressionMap.findAliasByName(this.parentAlias).metadata.findRelationWithPropertyPath(this.relationPropertyPath);if(!t)throw new xe(`Relation with property path ${this.relationPropertyPath} in entity was not found.`);return t}get junctionAlias(){const[t,n]=this.relationName.split(".");return t+"_"+n+"_rid"}get junctionMetadata(){return this.relation.junctionEntityMetadata}get mapToPropertyParentAlias(){return this.mapToProperty.substr(0,this.mapToProperty.indexOf("."))}get mapToPropertyPropertyPath(){return this.mapToProperty.substr(this.mapToProperty.indexOf(".")+1)}}class ux{constructor(t,n){this.expressionMap=t,Dt.assign(this,n||{})}get joinInverseSideMetadata(){return this.relation.inverseEntityMetadata}get parentAlias(){if(!Rr.isAliasProperty(this.relationName))throw new xe("Given value must be a string representation of alias property");return this.relationName.split(".")[0]}get relationProperty(){if(!Rr.isAliasProperty(this.relationName))throw new xe("Given value is a string representation of alias property");return this.relationName.split(".")[1]}get junctionAlias(){const[t,n]=this.relationName.split(".");return t+"_"+n+"_rc"}get relation(){if(!Rr.isAliasProperty(this.relationName))throw new xe("Given value is a string representation of alias property");const[t,n]=this.relationName.split("."),r=this.expressionMap.findAliasByName(t).metadata.findRelationWithPropertyPath(n);if(!r)throw new xe(`Relation with property path ${n} in entity was not found.`);return r}get metadata(){if(!Rr.isAliasProperty(this.relationName))throw new xe("Given value is a string representation of alias property");const t=this.relationName.split(".")[0];return this.expressionMap.findAliasByName(t).metadata}get mapToPropertyPropertyName(){return this.mapToProperty.split(".")[1]}}class dx{constructor(t){var n;this.connection=t,this.relationLoadStrategy="join",this.queryEntity=!1,this.aliases=[],this.queryType="select",this.selects=[],this.maxExecutionTime=0,this.selectDistinct=!1,this.selectDistinctOn=[],this.extraReturningColumns=[],this.onConflict="",this.onIgnore=!1,this.joinAttributes=[],this.relationIdAttributes=[],this.relationCountAttributes=[],this.wheres=[],this.havings=[],this.orderBys={},this.groupBys=[],this.withDeleted=!1,this.parameters={},this.disableEscaping=!0,this.enableRelationIdValues=!1,this.extraAppendedAndWhereCondition="",this.subQuery=!1,this.aliasNamePrefixingEnabled=!0,this.options=[],this.insertColumns=[],this.whereEntities=[],this.updateEntity=!0,this.callListeners=!0,this.useTransaction=!1,this.nativeParameters={},this.locallyGenerated={},this.commonTableExpressions=[],t.options.relationLoadStrategy&&(this.relationLoadStrategy=t.options.relationLoadStrategy),this.timeTravel=((n=t.options)==null?void 0:n.timeTravelQueries)||!1}get allOrderBys(){if(!Object.keys(this.orderBys).length&&this.mainAlias.hasMetadata&&this.options.indexOf("disable-global-order")===-1){const t=this.mainAlias.metadata.orderBy||{};return Object.keys(t).reduce((n,r)=>(n[this.mainAlias.name+"."+r]=t[r],n),{})}return this.orderBys}setMainAlias(t){return this.mainAlias=t,t}createAlias(t){let n=t.name;!n&&t.tablePath&&(n=t.tablePath),!n&&typeof t.target=="function"&&(n=t.target.name),!n&&typeof t.target=="string"&&(n=t.target);const r=new rI;return r.type=t.type,n&&(r.name=n),t.metadata&&(r.metadata=t.metadata),t.target&&!r.hasMetadata&&(r.metadata=this.connection.getMetadata(t.target)),t.tablePath&&(r.tablePath=t.tablePath),t.subQuery&&(r.subQuery=t.subQuery),this.aliases.push(r),r}findAliasByName(t){const n=this.aliases.find(r=>r.name===t);if(!n)throw new xe(`"${t}" alias was not found. Maybe you forgot to join it?`);return n}findColumnByAliasExpression(t){const[n,r]=t.split(".");return this.findAliasByName(n).metadata.findColumnWithPropertyName(r)}get relationMetadata(){if(!this.mainAlias)throw new xe("Entity to work with is not specified!");const t=this.mainAlias.metadata.findRelationWithPropertyPath(this.relationPropertyPath);if(!t)throw new xe(`Relation ${this.relationPropertyPath} was not found in entity ${this.mainAlias.name}`);return t}clone(){const t=new dx(this.connection);return t.queryType=this.queryType,t.selects=this.selects.map(n=>n),t.maxExecutionTime=this.maxExecutionTime,t.selectDistinct=this.selectDistinct,t.selectDistinctOn=this.selectDistinctOn,this.aliases.forEach(n=>t.aliases.push(new rI(n))),t.relationLoadStrategy=this.relationLoadStrategy,t.mainAlias=this.mainAlias,t.valuesSet=this.valuesSet,t.returning=this.returning,t.onConflict=this.onConflict,t.onIgnore=this.onIgnore,t.onUpdate=this.onUpdate,t.joinAttributes=this.joinAttributes.map(n=>new gI(this.connection,this,n)),t.relationIdAttributes=this.relationIdAttributes.map(n=>new lx(this,n)),t.relationCountAttributes=this.relationCountAttributes.map(n=>new ux(this,n)),t.wheres=this.wheres.map(n=>({...n})),t.havings=this.havings.map(n=>({...n})),t.orderBys=Object.assign({},this.orderBys),t.groupBys=this.groupBys.map(n=>n),t.limit=this.limit,t.offset=this.offset,t.skip=this.skip,t.take=this.take,t.lockMode=this.lockMode,t.onLocked=this.onLocked,t.lockVersion=this.lockVersion,t.lockTables=this.lockTables,t.withDeleted=this.withDeleted,t.parameters=Object.assign({},this.parameters),t.disableEscaping=this.disableEscaping,t.enableRelationIdValues=this.enableRelationIdValues,t.extraAppendedAndWhereCondition=this.extraAppendedAndWhereCondition,t.subQuery=this.subQuery,t.aliasNamePrefixingEnabled=this.aliasNamePrefixingEnabled,t.cache=this.cache,t.cacheId=this.cacheId,t.cacheDuration=this.cacheDuration,t.relationPropertyPath=this.relationPropertyPath,t.of=this.of,t.insertColumns=this.insertColumns,t.whereEntities=this.whereEntities,t.updateEntity=this.updateEntity,t.callListeners=this.callListeners,t.useTransaction=this.useTransaction,t.timeTravel=this.timeTravel,t.nativeParameters=Object.assign({},this.nativeParameters),t.comment=this.comment,t.commonTableExpressions=this.commonTableExpressions.map(n=>({alias:n.alias,queryBuilder:typeof n.queryBuilder=="string"?n.queryBuilder:n.queryBuilder.clone(),options:n.options})),t}}class vI{constructor(t){this["@instanceof"]=Symbol.for("Brackets"),this.whereFactory=t}}class fx{static transformFrom(t,n){return Array.isArray(t)?t.slice().reverse().reduce((r,o)=>o.from(r),n):t.from(n)}static transformTo(t,n){return Array.isArray(t)?t.reduce((r,o)=>o.to(r),n):t.to(n)}}class vl{constructor(t,n,r=!0,o=!1,a,i){this["@instanceof"]=Symbol.for("FindOperator"),this._type=t,this._value=n,this._useParameter=r,this._multipleParameters=o,this._getSql=a,this._objectLiteralParameters=i}get useParameter(){return pt.isFindOperator(this._value)?this._value.useParameter:this._useParameter}get multipleParameters(){return pt.isFindOperator(this._value)?this._value.multipleParameters:this._multipleParameters}get type(){return this._type}get value(){return pt.isFindOperator(this._value)?this._value.value:this._value}get objectLiteralParameters(){return pt.isFindOperator(this._value)?this._value.objectLiteralParameters:this._objectLiteralParameters}get child(){if(pt.isFindOperator(this._value))return this._value}get getSql(){return pt.isFindOperator(this._value)?this._value.getSql:this._getSql}transformValue(t){this._value instanceof vl?this._value.transformValue(t):this._value=Array.isArray(this._value)&&this._multipleParameters?this._value.map(n=>t&&fx.transformTo(t,n)):fx.transformTo(t,this._value)}}function mr(e){return new vl("in",e,!0,!0)}const xne=/[.*+\-?^${}()|[\]\\]/g,wne=e=>e.replace(xne,"\\$&");class Nt{constructor(t,n){this["@instanceof"]=Symbol.for("QueryBuilder"),this.parameterIndex=0,pt.isDataSource(t)?(this.connection=t,this.queryRunner=n,this.expressionMap=new dx(this.connection)):(this.connection=t.connection,this.queryRunner=t.queryRunner,this.expressionMap=t.expressionMap.clone())}static registerQueryBuilderClass(t,n){Nt.queryBuilderRegistry[t]=n}get alias(){if(!this.expressionMap.mainAlias)throw new xe("Main alias is not set");return this.expressionMap.mainAlias.name}select(t,n){return this.expressionMap.queryType="select",Array.isArray(t)?this.expressionMap.selects=t.map(r=>({selection:r})):t&&(this.expressionMap.selects=[{selection:t,aliasName:n}]),pt.isSelectQueryBuilder(this)?this:Nt.queryBuilderRegistry.SelectQueryBuilder(this)}insert(){return this.expressionMap.queryType="insert",pt.isInsertQueryBuilder(this)?this:Nt.queryBuilderRegistry.InsertQueryBuilder(this)}update(t,n){const r=n||t;if(t=pt.isEntitySchema(t)?t.options.name:t,typeof t=="function"||typeof t=="string"){const o=this.createFromAlias(t);this.expressionMap.setMainAlias(o)}return this.expressionMap.queryType="update",this.expressionMap.valuesSet=r,pt.isUpdateQueryBuilder(this)?this:Nt.queryBuilderRegistry.UpdateQueryBuilder(this)}delete(){return this.expressionMap.queryType="delete",pt.isDeleteQueryBuilder(this)?this:Nt.queryBuilderRegistry.DeleteQueryBuilder(this)}softDelete(){return this.expressionMap.queryType="soft-delete",pt.isSoftDeleteQueryBuilder(this)?this:Nt.queryBuilderRegistry.SoftDeleteQueryBuilder(this)}restore(){return this.expressionMap.queryType="restore",pt.isSoftDeleteQueryBuilder(this)?this:Nt.queryBuilderRegistry.SoftDeleteQueryBuilder(this)}relation(t,n){const r=arguments.length===2?t:void 0,o=arguments.length===2?n:t;if(this.expressionMap.queryType="relation",this.expressionMap.relationPropertyPath=o,r){const a=this.createFromAlias(r);this.expressionMap.setMainAlias(a)}return pt.isRelationQueryBuilder(this)?this:Nt.queryBuilderRegistry.RelationQueryBuilder(this)}hasRelation(t,n){const r=this.connection.getMetadata(t);return(Array.isArray(n)?n:[n]).every(o=>!!r.findRelationWithPropertyPath(o))}hasParameter(t){var n;return((n=this.parentQueryBuilder)==null?void 0:n.hasParameter(t))||t in this.expressionMap.parameters}setParameter(t,n){if(typeof n=="function")throw new xe(`Function parameter isn't supported in the parameters. Please check "${t}" parameter.`);if(!t.match(/^([A-Za-z0-9_.]+)$/))throw new xe("QueryBuilder parameter keys may only contain numbers, letters, underscores, or periods.");return this.parentQueryBuilder&&this.parentQueryBuilder.setParameter(t,n),this.expressionMap.parameters[t]=n,this}setParameters(t){for(const[n,r]of Object.entries(t))this.setParameter(n,r);return this}createParameter(t){let n;do n=`orm_param_${this.parameterIndex++}`;while(this.hasParameter(n));return this.setParameter(n,t),`:${n}`}setNativeParameters(t){return this.parentQueryBuilder&&this.parentQueryBuilder.setNativeParameters(t),Object.keys(t).forEach(n=>{this.expressionMap.nativeParameters[n]=t[n]}),this}getParameters(){const t=Object.assign({},this.expressionMap.parameters);if(this.expressionMap.mainAlias&&this.expressionMap.mainAlias.hasMetadata){const n=this.expressionMap.mainAlias.metadata;if(n.discriminatorColumn&&n.parentEntityMetadata){const r=n.childEntityMetadatas.filter(o=>o.discriminatorColumn).map(o=>o.discriminatorValue);r.push(n.discriminatorValue),t.discriminatorColumnValues=r}}return t}printSql(){const[t,n]=this.getQueryAndParameters();return this.connection.logger.logQuery(t,n),this}getSql(){return this.getQueryAndParameters()[0]}getQueryAndParameters(){const t=this.getQuery(),n=this.getParameters();return this.connection.driver.escapeQueryWithParameters(t,n,this.expressionMap.nativeParameters)}async execute(){const[t,n]=this.getQueryAndParameters(),r=this.obtainQueryRunner();try{return await r.query(t,n)}finally{r!==this.queryRunner&&await r.release()}}createQueryBuilder(t){return new this.constructor(this.connection,t??this.queryRunner)}clone(){return new this.constructor(this)}comment(t){return this.expressionMap.comment=t,this}disableEscaping(){return this.expressionMap.disableEscaping=!1,this}escape(t){return this.expressionMap.disableEscaping?this.connection.driver.escape(t):t}setQueryRunner(t){return this.queryRunner=t,this}callListeners(t){return this.expressionMap.callListeners=t,this}useTransaction(t){return this.expressionMap.useTransaction=t,this}addCommonTableExpression(t,n,r){return this.expressionMap.commonTableExpressions.push({queryBuilder:t,alias:n,options:r||{}}),this}getTableName(t){return t.split(".").map(n=>n===""?n:this.escape(n)).join(".")}getMainTableName(){if(!this.expressionMap.mainAlias)throw new xe('Entity where values should be inserted is not specified. Call "qb.into(entity)" method to specify it.');return this.expressionMap.mainAlias.hasMetadata?this.expressionMap.mainAlias.metadata.tablePath:this.expressionMap.mainAlias.tablePath}createFromAlias(t,n){if(this.connection.hasMetadata(t)){const r=this.connection.getMetadata(t);return this.expressionMap.createAlias({type:"from",name:n,metadata:this.connection.getMetadata(t),tablePath:r.tablePath})}else{if(typeof t=="string"){const a=t.substr(0,1)==="("&&t.substr(-1)===")";return this.expressionMap.createAlias({type:"from",name:n,tablePath:a?void 0:t,subQuery:a?t:void 0})}const r=t(this.subQuery());this.setParameters(r.getParameters());const o=r.getQuery();return this.expressionMap.createAlias({type:"from",name:n,subQuery:o})}}replacePropertyNames(t){return t}replacePropertyNamesForTheWholeQuery(t){const n={};for(const a of this.expressionMap.aliases){if(!a.hasMetadata)continue;const i=this.expressionMap.aliasNamePrefixingEnabled&&a.name?`${a.name}.`:"";n[i]||(n[i]={});for(const s of a.metadata.relations)s.joinColumns.length>0&&(n[i][s.propertyPath]=s.joinColumns[0].databaseName);for(const s of a.metadata.relations){const c=[...s.joinColumns,...s.inverseJoinColumns];for(const l of c){const u=`${s.propertyPath}.${l.referencedColumn.propertyPath}`;n[i][u]=l.databaseName}}for(const s of a.metadata.columns)n[i][s.databaseName]=s.databaseName;for(const s of a.metadata.columns)n[i][s.propertyName]=s.databaseName;for(const s of a.metadata.columns)n[i][s.propertyPath]=s.databaseName}const r=Object.keys(n),o=r.map(a=>wne(a)).join("|");return r.length>0&&(t=t.replace(new RegExp(`([ =(]|^.{0})${o?"("+o+")":""}([^ =(),]+)(?=[ =),]|.{0}$)`,"gm"),(...a)=>{let i,s,c;if(o){if(i=a[0],s=a[1],c=a[3],n[a[2]][c])return`${s}${this.escape(a[2].substring(0,a[2].length-1))}.${this.escape(n[a[2]][c])}`}else if(i=a[0],s=a[1],c=a[2],n[""][c])return`${s}${this.escape(n[""][c])}`;return i})),t}createComment(){return this.expressionMap.comment?`/* ${this.expressionMap.comment.replace(/\*\//g,"")} */ `:""}createTimeTravelQuery(){return this.expressionMap.queryType==="select"&&this.expressionMap.timeTravel?` AS OF SYSTEM TIME ${this.expressionMap.timeTravel}`:""}createWhereExpression(){const t=[],n=this.createWhereClausesExpression(this.expressionMap.wheres);if(n.length>0&&n!=="1=1"&&t.push(this.replacePropertyNames(n)),this.expressionMap.mainAlias.hasMetadata){const o=this.expressionMap.mainAlias.metadata;if(this.expressionMap.queryType==="select"&&!this.expressionMap.withDeleted&&o.deleteDateColumn){const a=this.expressionMap.aliasNamePrefixingEnabled?this.expressionMap.mainAlias.name+"."+o.deleteDateColumn.propertyName:o.deleteDateColumn.propertyName,i=`${this.replacePropertyNames(a)} IS NULL`;t.push(i)}if(o.discriminatorColumn&&o.parentEntityMetadata){const a=this.expressionMap.aliasNamePrefixingEnabled?this.expressionMap.mainAlias.name+"."+o.discriminatorColumn.databaseName:o.discriminatorColumn.databaseName,i=`${this.replacePropertyNames(a)} IN (:...discriminatorColumnValues)`;t.push(i)}}if(this.expressionMap.extraAppendedAndWhereCondition){const o=this.replacePropertyNames(this.expressionMap.extraAppendedAndWhereCondition);t.push(o)}let r="";return r+=this.createTimeTravelQuery(),t.length?t.length===1?r+=` WHERE ${t[0]}`:r+=` WHERE ( ${t.join(" ) AND ( ")} )`:r+="",r}createReturningExpression(t){const n=this.getReturningColumns(),r=this.connection.driver;if(typeof this.expressionMap.returning!="string"&&this.expressionMap.extraReturningColumns.length>0&&r.isReturningSqlSupported(t)&&n.push(...this.expressionMap.extraReturningColumns.filter(o=>n.indexOf(o)===-1)),n.length){let o=n.map(a=>{const i=this.escape(a.databaseName);return r.options.type==="mssql"?this.expressionMap.queryType==="insert"||this.expressionMap.queryType==="update"||this.expressionMap.queryType==="soft-delete"||this.expressionMap.queryType==="restore"?"INSERTED."+i:this.escape(this.getMainTableName())+"."+i:i}).join(", ");return r.options.type==="oracle"&&(o+=" INTO "+n.map(a=>this.createParameter({type:r.columnTypeToNativeParameter(a.type),dir:r.oracle.BIND_OUT})).join(", ")),r.options.type==="mssql"&&(this.expressionMap.queryType==="insert"||this.expressionMap.queryType==="update")&&(o+=" INTO @OutputTable"),o}else if(typeof this.expressionMap.returning=="string")return this.expressionMap.returning;return""}getReturningColumns(){const t=[];return Array.isArray(this.expressionMap.returning)&&this.expressionMap.returning.forEach(n=>{this.expressionMap.mainAlias.hasMetadata&&t.push(...this.expressionMap.mainAlias.metadata.findColumnsWithPropertyPath(n))}),t}createWhereClausesExpression(t){return t.map((n,r)=>{const o=this.createWhereConditionExpression(n.condition);switch(n.type){case"and":return(r>0?"AND ":"")+`${this.connection.options.isolateWhereStatements?"(":""}${o}${this.connection.options.isolateWhereStatements?")":""}`;case"or":return(r>0?"OR ":"")+`${this.connection.options.isolateWhereStatements?"(":""}${o}${this.connection.options.isolateWhereStatements?")":""}`}return o}).join(" ").trim()}createWhereConditionExpression(t,n=!1){if(typeof t=="string")return t;if(Array.isArray(t))return t.length===0?"1=1":t.length===1&&!n?this.createWhereClausesExpression(t):"("+this.createWhereClausesExpression(t)+")";const{driver:r}=this.connection;switch(t.operator){case"lessThan":return`${t.parameters[0]} < ${t.parameters[1]}`;case"lessThanOrEqual":return`${t.parameters[0]} <= ${t.parameters[1]}`;case"arrayContains":return`${t.parameters[0]} @> ${t.parameters[1]}`;case"jsonContains":return`${t.parameters[0]} ::jsonb @> ${t.parameters[1]}`;case"arrayContainedBy":return`${t.parameters[0]} <@ ${t.parameters[1]}`;case"arrayOverlap":return`${t.parameters[0]} && ${t.parameters[1]}`;case"moreThan":return`${t.parameters[0]} > ${t.parameters[1]}`;case"moreThanOrEqual":return`${t.parameters[0]} >= ${t.parameters[1]}`;case"notEqual":return`${t.parameters[0]} != ${t.parameters[1]}`;case"equal":return`${t.parameters[0]} = ${t.parameters[1]}`;case"ilike":return r.options.type==="postgres"||r.options.type==="cockroachdb"?`${t.parameters[0]} ILIKE ${t.parameters[1]}`:`UPPER(${t.parameters[0]}) LIKE UPPER(${t.parameters[1]})`;case"like":return`${t.parameters[0]} LIKE ${t.parameters[1]}`;case"between":return`${t.parameters[0]} BETWEEN ${t.parameters[1]} AND ${t.parameters[2]}`;case"in":return t.parameters.length<=1?"0=1":`${t.parameters[0]} IN (${t.parameters.slice(1).join(", ")})`;case"any":return r.options.type==="cockroachdb"?`${t.parameters[0]}::STRING = ANY(${t.parameters[1]}::STRING[])`:`${t.parameters[0]} = ANY(${t.parameters[1]})`;case"isNull":return`${t.parameters[0]} IS NULL`;case"not":return`NOT(${this.createWhereConditionExpression(t.condition)})`;case"brackets":return`${this.createWhereConditionExpression(t.condition,!0)}`;case"and":return"("+t.parameters.join(" AND ")+")";case"or":return"("+t.parameters.join(" OR ")+")"}throw new TypeError(`Unsupported FindOperator ${vl.constructor.name}`)}createCteExpression(){if(!this.hasCommonTableExpressions())return"";const t=this.connection.driver.cteCapabilities.requiresRecursiveHint;return"WITH "+this.expressionMap.commonTableExpressions.map(n=>{const r=typeof n.queryBuilder=="string"?n.queryBuilder:n.queryBuilder.getQuery();if(typeof n.queryBuilder!="string"){if(n.queryBuilder.hasCommonTableExpressions())throw new xe(`Nested CTEs aren't supported (CTE: ${n.alias})`);if(!this.connection.driver.cteCapabilities.writable&&!pt.isSelectQueryBuilder(n.queryBuilder))throw new xe(`Only select queries are supported in CTEs in ${this.connection.options.type} (CTE: ${n.alias})`);this.setParameters(n.queryBuilder.getParameters())}let o=this.escape(n.alias);if(n.options.columnNames){const s=n.options.columnNames.map(c=>this.escape(c));if(pt.isSelectQueryBuilder(n.queryBuilder)&&n.queryBuilder.expressionMap.selects.length&&n.options.columnNames.length!==n.queryBuilder.expressionMap.selects.length)throw new xe(`cte.options.columnNames length (${n.options.columnNames.length}) doesn't match subquery select list length ${n.queryBuilder.expressionMap.selects.length} (CTE: ${n.alias})`);o+=`(${s.join(", ")})`}const a=n.options.recursive&&t?"RECURSIVE":"";let i="";return this.connection.driver.cteCapabilities.materializedHint&&n.options.materialized!==void 0&&(i=n.options.materialized?"MATERIALIZED":"NOT MATERIALIZED"),[a,o,"AS",i,`(${r})`].filter(Boolean).join(" ")}).join(", ")+" "}getWhereInIdsCondition(t){const n=this.expressionMap.mainAlias.metadata,r=(Array.isArray(t)?t:[t]).map(o=>n.ensureEntityIdMap(o));if(!n.hasMultiplePrimaryKeys){const o=n.primaryColumns[0];if(!o.transformer&&!o.relationMetadata&&!o.embeddedMetadata)return{[o.propertyName]:mr(r.map(a=>o.getEntityValue(a,!1)))}}return new vI(o=>{for(const a of r)o.orWhere(new vI(i=>i.where(a)))})}getExistsCondition(t){const n=t.clone().orderBy().groupBy().offset(void 0).limit(void 0).skip(void 0).take(void 0).select("1").setOption("disable-global-order");return[`EXISTS (${n.getQuery()})`,n.getParameters()]}findColumnsForPropertyPath(t){let n=this.expressionMap.mainAlias;const r=[],o=t.split(".");for(;o.length>1;){const s=o[0];if(!(n!=null&&n.hasMetadata))break;if(n.metadata.hasEmbeddedWithPropertyPath(s)){o.unshift(`${o.shift()}.${o.shift()}`);continue}if(n.metadata.hasRelationWithPropertyPath(s)){const c=this.expressionMap.joinAttributes.find(l=>l.relationPropertyPath===s);if(!(c!=null&&c.alias)){const l=r.length>0?`${r.join(".")}.${s}`:s;throw new Error(`Cannot find alias for relation at ${l}`)}n=c.alias,r.push(...s.split(".")),o.shift();continue}break}if(!n)throw new Error(`Cannot find alias for property ${t}`);const a=o.join("."),i=n.metadata.findColumnsWithPropertyPath(a);if(!i.length)throw new Tr(t,n.metadata);return[n,r,i]}createPropertyPath(t,n,r=""){const o=[];for(const a of Object.keys(n)){const i=r?`${r}.${a}`:a;if(n[a]===null||typeof n[a]!="object"||pt.isFindOperator(n[a])){o.push(i);continue}if(t.hasEmbeddedWithPropertyPath(i)){const s=this.createPropertyPath(t,n[a],i);o.push(...s);continue}if(t.hasRelationWithPropertyPath(i)){const s=t.findRelationWithPropertyPath(i);if(s.relationType==="one-to-one"||s.relationType==="many-to-one"){const u=s.joinColumns.map(d=>d.referencedColumn).filter(d=>!!d);if(u.length>0&&u.every(d=>d.getEntityValue(n[a],!1))){o.push(i);continue}}if(s.relationType==="one-to-many"||s.relationType==="many-to-many")throw new Error(`Cannot query across ${s.relationType} for property ${i}`);const c=s.inverseEntityMetadata.primaryColumns;if(c.length>0&&c.every(u=>u.getEntityValue(n[a],!1))){const u=c.map(d=>`${i}.${d.propertyPath}`);o.push(...u);continue}const l=this.createPropertyPath(s.inverseEntityMetadata,n[a]).map(u=>`${i}.${u}`);o.push(...l);continue}o.push(i)}return o}*getPredicates(t){if(this.expressionMap.mainAlias.hasMetadata){const n=this.createPropertyPath(this.expressionMap.mainAlias.metadata,t);for(const r of n){const[o,a,i]=this.findColumnsForPropertyPath(r);for(const s of i){let c=t;for(const d of a){if(!c||!(d in c)){c={};break}c=c[d]}const l=this.expressionMap.aliasNamePrefixingEnabled?`${o.name}.${s.propertyPath}`:s.propertyPath,u=s.getEntityValue(c,!0);yield[l,u]}}}else for(const n of Object.keys(t)){const r=t[n];yield[this.expressionMap.aliasNamePrefixingEnabled?`${this.alias}.${n}`:n,r]}}getWherePredicateCondition(t,n){if(pt.isFindOperator(n)){let r=[];if(n.useParameter)if(n.objectLiteralParameters)this.setParameters(n.objectLiteralParameters);else if(n.multipleParameters)for(const o of n.value)r.push(this.createParameter(o));else r.push(this.createParameter(n.value));if(n.type==="raw")return n.getSql?n.getSql(t):{operator:"equal",parameters:[t,n.value]};if(n.type==="not")return n.child?{operator:n.type,condition:this.getWherePredicateCondition(t,n.child)}:{operator:"notEqual",parameters:[t,...r]};if(n.type==="and"){const o=n.value;return{operator:n.type,parameters:o.map(a=>this.createWhereConditionExpression(this.getWherePredicateCondition(t,a)))}}else if(n.type==="or"){const o=n.value;return{operator:n.type,parameters:o.map(a=>this.createWhereConditionExpression(this.getWherePredicateCondition(t,a)))}}else return{operator:n.type,parameters:[t,...r]}}else return{operator:"equal",parameters:[t,this.createParameter(n)]}}getWhereCondition(t){if(typeof t=="string")return t;if(pt.isBrackets(t)){const o=this.createQueryBuilder();return o.parentQueryBuilder=this,o.expressionMap.mainAlias=this.expressionMap.mainAlias,o.expressionMap.aliasNamePrefixingEnabled=this.expressionMap.aliasNamePrefixingEnabled,o.expressionMap.parameters=this.expressionMap.parameters,o.expressionMap.nativeParameters=this.expressionMap.nativeParameters,o.expressionMap.wheres=[],t.whereFactory(o),{operator:pt.isNotBrackets(t)?"not":"brackets",condition:o.expressionMap.wheres}}if(typeof t=="function")return t(this);const n=Array.isArray(t)?t:[t],r=[];for(const o of n){const a=[];for(const[i,s]of this.getPredicates(o))a.push({type:"and",condition:this.getWherePredicateCondition(i,s)});r.push({type:"or",condition:a})}return r.length===1?r[0].condition:r}obtainQueryRunner(){return this.queryRunner||this.connection.createQueryRunner()}hasCommonTableExpressions(){return this.expressionMap.commonTableExpressions.length>0}}Nt.queryBuilderRegistry={};class _ne{static from(t){const n=new this;return n.raw=t.records,n.affected=t.affected,n}}class jne extends Nt{constructor(t,n){super(t,n),this["@instanceof"]=Symbol.for("DeleteQueryBuilder"),this.expressionMap.aliasNamePrefixingEnabled=!1}getQuery(){let t=this.createComment();return t+=this.createCteExpression(),t+=this.createDeleteExpression(),this.replacePropertyNamesForTheWholeQuery(t.trim())}async execute(){const[t,n]=this.getQueryAndParameters(),r=this.obtainQueryRunner();let o=!1;try{this.expressionMap.useTransaction===!0&&r.isTransactionActive===!1&&(await r.startTransaction(),o=!0),this.expressionMap.callListeners===!0&&this.expressionMap.mainAlias.hasMetadata&&await r.broadcaster.broadcast("BeforeRemove",this.expressionMap.mainAlias.metadata);const a=await r.query(t,n,!0),i=_ne.from(a);return this.expressionMap.callListeners===!0&&this.expressionMap.mainAlias.hasMetadata&&await r.broadcaster.broadcast("AfterRemove",this.expressionMap.mainAlias.metadata),o&&await r.commitTransaction(),i}catch(a){if(o)try{await r.rollbackTransaction()}catch{}throw a}finally{r!==this.queryRunner&&await r.release()}}from(t,n){t=pt.isEntitySchema(t)?t.options.name:t;const r=this.createFromAlias(t,n);return this.expressionMap.setMainAlias(r),this}where(t,n){this.expressionMap.wheres=[];const r=this.getWhereCondition(t);return r&&(this.expressionMap.wheres=[{type:"simple",condition:r}]),n&&this.setParameters(n),this}andWhere(t,n){return this.expressionMap.wheres.push({type:"and",condition:this.getWhereCondition(t)}),n&&this.setParameters(n),this}orWhere(t,n){return this.expressionMap.wheres.push({type:"or",condition:this.getWhereCondition(t)}),n&&this.setParameters(n),this}whereInIds(t){return this.where(this.getWhereInIdsCondition(t))}andWhereInIds(t){return this.andWhere(this.getWhereInIdsCondition(t))}orWhereInIds(t){return this.orWhere(this.getWhereInIdsCondition(t))}output(t){return this.returning(t)}returning(t){if(!this.connection.driver.isReturningSqlSupported("delete"))throw new Ff;return this.expressionMap.returning=t,this}createDeleteExpression(){const t=this.getTableName(this.getMainTableName()),n=this.createWhereExpression(),r=this.createReturningExpression("delete");return r===""?`DELETE FROM ${t}${n}`:this.connection.driver.options.type==="mssql"?`DELETE FROM ${t} OUTPUT ${r}${n}`:`DELETE FROM ${t}${n} RETURNING ${r}`}}let Bf;const Ene=new Uint8Array(16);function Sne(){if(!Bf&&(Bf=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Bf))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Bf(Ene)}const Xt=[];for(let e=0;e<256;++e)Xt.push((e+256).toString(16).slice(1));function Cne(e,t=0){return Xt[e[t+0]]+Xt[e[t+1]]+Xt[e[t+2]]+Xt[e[t+3]]+"-"+Xt[e[t+4]]+Xt[e[t+5]]+"-"+Xt[e[t+6]]+Xt[e[t+7]]+"-"+Xt[e[t+8]]+Xt[e[t+9]]+"-"+Xt[e[t+10]]+Xt[e[t+11]]+Xt[e[t+12]]+Xt[e[t+13]]+Xt[e[t+14]]+Xt[e[t+15]]}const One=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),bI={randomUUID:One};function Mne(e,t,n){if(bI.randomUUID&&!t&&!e)return bI.randomUUID();e=e||{};const r=e.random||(e.rng||Sne)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,Cne(r)}class xI{constructor(){this.count=0,this.promises=[]}async wait(){return this.promises.length>0&&await Promise.all(this.promises),this}}class wI{constructor(){this.identifiers=[],this.generatedMaps=[]}static from(t){const n=new this;return n.raw=t.raw,n}}class px{constructor(t,n){this.queryRunner=t,this.expressionMap=n}async update(t,n){const r=this.expressionMap.mainAlias.metadata;await Promise.all(n.map(async(o,a)=>{if(this.queryRunner.connection.driver.isReturningSqlSupported("update")){this.queryRunner.connection.driver.options.type==="oracle"&&Array.isArray(t.raw)&&this.expressionMap.extraReturningColumns.length>0&&(t.raw=t.raw.reduce((c,l,u)=>(c[this.expressionMap.extraReturningColumns[u].databaseName]=l[0],c),{}));const i=Array.isArray(t.raw)?t.raw[a]:t.raw,s=this.queryRunner.connection.driver.createGeneratedMap(r,i);s&&(this.queryRunner.manager.merge(r.target,o,s),t.generatedMaps.push(s))}else{const i=this.expressionMap.extraReturningColumns;if(i.length>0){const s=this.expressionMap.mainAlias.metadata.getEntityIdMap(o);if(!s)throw new xe("Cannot update entity because entity id is not set in the entity.");const c=await this.queryRunner.manager.createQueryBuilder().select(r.primaryColumns.map(l=>r.targetName+"."+l.propertyPath)).addSelect(i.map(l=>r.targetName+"."+l.propertyPath)).from(r.target,r.targetName).where(s).withDeleted().setOption("create-pojo").getOne();c&&(this.queryRunner.manager.merge(r.target,o,c),t.generatedMaps.push(c))}}}))}async insert(t,n){const r=this.expressionMap.mainAlias.metadata;let o=r.getInsertionReturningColumns();const a=this.queryRunner.connection.driver.isReturningSqlSupported("insert");o=o.filter(s=>s.isGenerated?a===!0:!0);const i=n.map((s,c)=>{this.queryRunner.connection.driver.options.type==="oracle"&&Array.isArray(t.raw)&&this.expressionMap.extraReturningColumns.length>0&&(t.raw=t.raw.reduce((d,f,p)=>(d[this.expressionMap.extraReturningColumns[p].databaseName]=f[0],d),{}));const l=Array.isArray(t.raw)?t.raw[c]:t.raw,u=this.queryRunner.connection.driver.createGeneratedMap(r,l,c,n.length)||{};return c in this.expressionMap.locallyGenerated&&this.queryRunner.manager.merge(r.target,u,this.expressionMap.locallyGenerated[c]),this.queryRunner.manager.merge(r.target,s,u),u});if(o.length>0&&!this.queryRunner.connection.driver.isReturningSqlSupported("insert")){const s=n.map(l=>{const u=r.getEntityIdMap(l);if(!u)throw new xe("Cannot update entity because entity id is not set in the entity.");return u}),c=await this.queryRunner.manager.createQueryBuilder().select(r.primaryColumns.map(l=>r.targetName+"."+l.propertyPath)).addSelect(o.map(l=>r.targetName+"."+l.propertyPath)).from(r.target,r.targetName).where(s).setOption("create-pojo").getMany();n.forEach((l,u)=>{this.queryRunner.manager.merge(r.target,i[u],c[u]),this.queryRunner.manager.merge(r.target,l,c[u])})}n.forEach((s,c)=>{const l=r.getEntityIdMap(s);t.identifiers.push(l),t.generatedMaps.push(i[c])})}getUpdationReturningColumns(){return this.expressionMap.mainAlias.metadata.columns.filter(t=>t.asExpression!==void 0||t.isUpdateDate||t.isVersion)}getSoftDeletionReturningColumns(){return this.expressionMap.mainAlias.metadata.columns.filter(t=>t.asExpression!==void 0||t.isUpdateDate||t.isVersion||t.isDeleteDate)}}class Nne extends Nt{constructor(){super(...arguments),this["@instanceof"]=Symbol.for("InsertQueryBuilder")}getQuery(){let t=this.createComment();return t+=this.createCteExpression(),t+=this.createInsertExpression(),this.replacePropertyNamesForTheWholeQuery(t.trim())}async execute(){const t=this.getValueSets();if(t.length===0)return new wI;const n=this.obtainQueryRunner();let r=!1;try{if(this.expressionMap.useTransaction===!0&&n.isTransactionActive===!1&&(await n.startTransaction(),r=!0),this.expressionMap.callListeners===!0&&this.expressionMap.mainAlias.hasMetadata){const p=new xI;t.forEach(y=>{n.broadcaster.broadcastBeforeInsertEvent(p,this.expressionMap.mainAlias.metadata,y)}),await p.wait()}let o=null,a=null;const i=new px(n,this.expressionMap),s=[];if(Array.isArray(this.expressionMap.returning)&&this.expressionMap.mainAlias.hasMetadata)for(const p of this.expressionMap.returning)s.push(...this.expressionMap.mainAlias.metadata.findColumnsWithPropertyPath(p));this.expressionMap.updateEntity===!0&&this.expressionMap.mainAlias.hasMetadata&&(t.length>1&&this.connection.driver.options.type==="oracle"||(this.expressionMap.extraReturningColumns=this.expressionMap.mainAlias.metadata.getInsertionReturningColumns()),s.push(...this.expressionMap.extraReturningColumns.filter(p=>!s.includes(p)))),s.length>0&&this.connection.driver.options.type==="mssql"&&(o=this.connection.driver.buildTableVariableDeclaration("@OutputTable",s),a="SELECT * FROM @OutputTable");const[c,l]=this.getQueryAndParameters(),u=[o,c,a].filter(p=>p!=null).join(`;

`),d=await n.query(u,l,!0),f=wI.from(d);if(this.expressionMap.updateEntity===!0&&this.expressionMap.mainAlias.hasMetadata&&await i.insert(f,t),this.expressionMap.callListeners===!0&&this.expressionMap.mainAlias.hasMetadata){const p=new xI;t.forEach(y=>{n.broadcaster.broadcastAfterInsertEvent(p,this.expressionMap.mainAlias.metadata,y)}),await p.wait()}return r&&await n.commitTransaction(),f}catch(o){if(r)try{await n.rollbackTransaction()}catch{}throw o}finally{n!==this.queryRunner&&await n.release()}}into(t,n){t=pt.isEntitySchema(t)?t.options.name:t;const r=this.createFromAlias(t);return this.expressionMap.setMainAlias(r),this.expressionMap.insertColumns=n||[],this}values(t){return this.expressionMap.valuesSet=t,this}output(t){return this.returning(t)}returning(t){if(!this.connection.driver.isReturningSqlSupported("insert"))throw new Ff;return this.expressionMap.returning=t,this}updateEntity(t){return this.expressionMap.updateEntity=t,this}onConflict(t){return this.expressionMap.onConflict=t,this}orIgnore(t=!0){return this.expressionMap.onIgnore=!!t,this}orUpdate(t,n,r){return Array.isArray(t)?(this.expressionMap.onUpdate={overwrite:t,conflict:n,skipUpdateIfNoValuesChanged:r==null?void 0:r.skipUpdateIfNoValuesChanged,indexPredicate:r==null?void 0:r.indexPredicate,upsertType:r==null?void 0:r.upsertType},this):(this.expressionMap.onUpdate={conflict:t==null?void 0:t.conflict_target,columns:t==null?void 0:t.columns,overwrite:t==null?void 0:t.overwrite,skipUpdateIfNoValuesChanged:r==null?void 0:r.skipUpdateIfNoValuesChanged,upsertType:r==null?void 0:r.upsertType},this)}createInsertExpression(){var i,s;const t=this.getTableName(this.getMainTableName()),n=this.createValuesExpression(),r=this.connection.driver.options.type==="oracle"&&this.getValueSets().length>1?null:this.createReturningExpression("insert"),o=this.createColumnNamesExpression();let a="INSERT ";if(((i=this.expressionMap.onUpdate)==null?void 0:i.upsertType)==="primary-key"&&(a="UPSERT "),(ye.isMySQLFamily(this.connection.driver)||this.connection.driver.options.type==="aurora-mysql")&&(a+=`${this.expressionMap.onIgnore?" IGNORE ":""}`),a+=`INTO ${t}`,this.alias!==this.getMainTableName()&&ye.isPostgresFamily(this.connection.driver)&&(a+=` AS "${this.alias}"`),o?a+=`(${o})`:!n&&(ye.isMySQLFamily(this.connection.driver)||this.connection.driver.options.type==="aurora-mysql")&&(a+="()"),r&&this.connection.driver.options.type==="mssql"&&(a+=` OUTPUT ${r}`),n?(this.connection.driver.options.type==="oracle"||this.connection.driver.options.type==="sap")&&this.getValueSets().length>1?a+=` ${n}`:a+=` VALUES ${n}`:ye.isMySQLFamily(this.connection.driver)||this.connection.driver.options.type==="aurora-mysql"?a+=" VALUES ()":a+=" DEFAULT VALUES",((s=this.expressionMap.onUpdate)==null?void 0:s.upsertType)!=="primary-key"){if(this.connection.driver.supportedUpsertTypes.includes("on-conflict-do-update")){if(this.expressionMap.onIgnore)a+=" ON CONFLICT DO NOTHING ";else if(this.expressionMap.onConflict)a+=` ON CONFLICT ${this.expressionMap.onConflict} `;else if(this.expressionMap.onUpdate){const{overwrite:c,columns:l,conflict:u,skipUpdateIfNoValuesChanged:d,indexPredicate:f}=this.expressionMap.onUpdate;let p="ON CONFLICT";if(Array.isArray(u)){if(p+=` ( ${u.map(m=>this.escape(m)).join(", ")} )`,f&&!ye.isPostgresFamily(this.connection.driver))throw new xe("indexPredicate option is not supported by the current database driver");f&&ye.isPostgresFamily(this.connection.driver)&&(p+=` WHERE ( ${f} )`)}else u&&(p+=` ON CONSTRAINT ${this.escape(u)}`);const y=[];Array.isArray(c)?y.push(...c.map(m=>`${this.escape(m)} = EXCLUDED.${this.escape(m)}`)):l&&y.push(...l.map(m=>`${this.escape(m)} = :${m}`)),y.length>0&&(a+=` ${p} DO UPDATE SET `,y.push(...this.expressionMap.mainAlias.metadata.columns.filter(m=>m.isUpdateDate&&!(c!=null&&c.includes(m.databaseName))&&!(this.connection.driver.options.type==="oracle"&&this.getValueSets().length>1||ye.isSQLiteFamily(this.connection.driver)||this.connection.driver.options.type==="sap"||this.connection.driver.options.type==="spanner")).map(m=>`${this.escape(m.databaseName)} = DEFAULT`)),a+=y.join(", "),a+=" "),Array.isArray(c)&&d&&ye.isPostgresFamily(this.connection.driver)&&(a+=" WHERE (",a+=c.map(m=>`${t}.${this.escape(m)} IS DISTINCT FROM EXCLUDED.${this.escape(m)}`).join(" OR "),a+=") ")}}else if(this.connection.driver.supportedUpsertTypes.includes("on-duplicate-key-update")){if(this.expressionMap.onUpdate){const{overwrite:c,columns:l}=this.expressionMap.onUpdate;Array.isArray(c)?(a+=" ON DUPLICATE KEY UPDATE ",a+=c.map(u=>`${this.escape(u)} = VALUES(${this.escape(u)})`).join(", "),a+=" "):Array.isArray(l)&&(a+=" ON DUPLICATE KEY UPDATE ",a+=l.map(u=>`${this.escape(u)} = :${u}`).join(", "),a+=" ")}}else if(this.expressionMap.onUpdate)throw new xe("onUpdate is not supported by the current database driver")}return r&&(ye.isPostgresFamily(this.connection.driver)||this.connection.driver.options.type==="oracle"||this.connection.driver.options.type==="cockroachdb"||ye.isMySQLFamily(this.connection.driver))&&(a+=` RETURNING ${r}`),this.connection.driver.options.type==="mssql"&&this.expressionMap.mainAlias.hasMetadata&&this.expressionMap.mainAlias.metadata.columns.filter(c=>this.expressionMap.insertColumns.length>0?this.expressionMap.insertColumns.indexOf(c.propertyPath)!==-1:c.isInsert).some(c=>this.isOverridingAutoIncrementBehavior(c))&&(a=`SET IDENTITY_INSERT ${t} ON; ${a}; SET IDENTITY_INSERT ${t} OFF`),a}getInsertedColumns(){return this.expressionMap.mainAlias.hasMetadata?this.expressionMap.mainAlias.metadata.columns.filter(t=>this.expressionMap.insertColumns.length?this.expressionMap.insertColumns.indexOf(t.propertyPath)!==-1:!(!t.isInsert||t.isGenerated&&t.generationStrategy==="increment"&&this.connection.driver.options.type!=="spanner"&&this.connection.driver.options.type!=="oracle"&&!ye.isSQLiteFamily(this.connection.driver)&&!ye.isMySQLFamily(this.connection.driver)&&this.connection.driver.options.type!=="aurora-mysql"&&!(this.connection.driver.options.type==="mssql"&&this.isOverridingAutoIncrementBehavior(t)))):[]}createColumnNamesExpression(){const t=this.getInsertedColumns();if(t.length>0)return t.map(n=>this.escape(n.databaseName)).join(", ");if(!this.expressionMap.mainAlias.hasMetadata&&!this.expressionMap.insertColumns.length){const n=this.getValueSets();if(n.length===1)return Object.keys(n[0]).map(r=>this.escape(r)).join(", ")}return this.expressionMap.insertColumns.map(n=>this.escape(n)).join(", ")}createValuesExpression(){const t=this.getValueSets(),n=this.getInsertedColumns();if(n.length>0){let r="";return t.forEach((o,a)=>{n.forEach((i,s)=>{s===0&&(this.connection.driver.options.type==="oracle"&&t.length>1||this.connection.driver.options.type==="sap"&&t.length>1?r+=" SELECT ":r+="(");let c=i.getEntityValue(o);if(typeof c!="function"&&(c=this.connection.driver.preparePersistentValue(c,i)),i.isVersion&&c===void 0)r+="1";else if(i.isDiscriminator)r+=this.createParameter(this.expressionMap.mainAlias.metadata.discriminatorValue);else if(i.isGenerated&&i.generationStrategy==="uuid"&&!this.connection.driver.isUUIDGenerationSupported()&&c===void 0)c=Mne(),r+=this.createParameter(c),a in this.expressionMap.locallyGenerated||(this.expressionMap.locallyGenerated[a]={}),i.setEntityValue(this.expressionMap.locallyGenerated[a],c);else if(c===void 0)this.connection.driver.options.type==="oracle"&&t.length>1||ye.isSQLiteFamily(this.connection.driver)||this.connection.driver.options.type==="sap"||this.connection.driver.options.type==="spanner"?i.default!==void 0&&i.default!==null?r+=this.connection.driver.normalizeDefault(i):r+="NULL":r+="DEFAULT";else if(c===null&&this.connection.driver.options.type==="spanner")r+="NULL";else if(typeof c=="function")r+=c();else{this.connection.driver.options.type==="mssql"&&(c=this.connection.driver.parametrizeValue(i,c));const l=this.createParameter(c);if((ye.isMySQLFamily(this.connection.driver)||this.connection.driver.options.type==="aurora-mysql")&&this.connection.driver.spatialTypes.indexOf(i.type)!==-1){const u=this.connection.driver.options.legacySpatialSupport?"GeomFromText":"ST_GeomFromText";i.srid!=null?r+=`${u}(${l}, ${i.srid})`:r+=`${u}(${l})`}else ye.isPostgresFamily(this.connection.driver)&&this.connection.driver.spatialTypes.indexOf(i.type)!==-1?i.srid!=null?r+=`ST_SetSRID(ST_GeomFromGeoJSON(${l}), ${i.srid})::${i.type}`:r+=`ST_GeomFromGeoJSON(${l})::${i.type}`:this.connection.driver.options.type==="mssql"&&this.connection.driver.spatialTypes.indexOf(i.type)!==-1?r+=i.type+"::STGeomFromText("+l+", "+(i.srid||"0")+")":r+=l}s===n.length-1?a===t.length-1?this.connection.driver.options.type==="oracle"&&t.length>1?r+=" FROM DUAL ":this.connection.driver.options.type==="sap"&&t.length>1?r+=" FROM dummy ":r+=")":this.connection.driver.options.type==="oracle"&&t.length>1?r+=" FROM DUAL UNION ALL ":this.connection.driver.options.type==="sap"&&t.length>1?r+=" FROM dummy UNION ALL ":r+="), ":r+=", "})}),r==="()"?"":r}else{let r="";return t.forEach((o,a)=>{Object.keys(o).forEach((i,s)=>{s===0&&(r+="(");const c=o[i];typeof c=="function"?r+=c():c===void 0?this.connection.driver.options.type==="oracle"&&t.length>1||ye.isSQLiteFamily(this.connection.driver)||this.connection.driver.options.type==="sap"||this.connection.driver.options.type==="spanner"?r+="NULL":r+="DEFAULT":c===null&&this.connection.driver.options.type==="spanner"||(r+=this.createParameter(c)),s===Object.keys(o).length-1?a===t.length-1?r+=")":r+="), ":r+=", "})}),r==="()"?"":r}}getValueSets(){if(Array.isArray(this.expressionMap.valuesSet))return this.expressionMap.valuesSet;if(Dt.isObject(this.expressionMap.valuesSet))return[this.expressionMap.valuesSet];throw new ine}isOverridingAutoIncrementBehavior(t){return t.isPrimary&&t.isGenerated&&t.generationStrategy==="increment"&&this.getValueSets().some(n=>t.getEntityValue(n)!==void 0&&t.getEntityValue(n)!==null)}}class _I{constructor(t,n){this.queryBuilder=t,this.expressionMap=n}async update(t){const n=this.expressionMap.relationMetadata;if(n.isManyToOne||n.isOneToOneOwner){const r=n.joinColumns.reduce((o,a)=>{const i=Dt.isObject(t)?a.referencedColumn.getEntityValue(t):t;return a.setEntityValue(o,i),o},{});if(!this.expressionMap.of||Array.isArray(this.expressionMap.of)&&!this.expressionMap.of.length)return;await this.queryBuilder.createQueryBuilder().update(n.entityMetadata.target).set(r).whereInIds(this.expressionMap.of).execute()}else if((n.isOneToOneNotOwner||n.isOneToMany)&&t===null){const r={};n.inverseRelation.joinColumns.forEach(c=>{r[c.propertyName]=null});const o=Array.isArray(this.expressionMap.of)?this.expressionMap.of:[this.expressionMap.of],a={},i=[];o.forEach((c,l)=>{n.inverseRelation.joinColumns.map((u,d)=>{const f="joinColumn_"+l+"_"+d;a[f]=Dt.isObject(c)?u.referencedColumn.getEntityValue(c):c,i.push(`${u.propertyPath} = :${f}`)})});const s=i.map(c=>"("+c+")").join(" OR ");if(!s)return;await this.queryBuilder.createQueryBuilder().update(n.inverseEntityMetadata.target).set(r).where(s).setParameters(a).execute()}else if(n.isOneToOneNotOwner||n.isOneToMany){if(Array.isArray(this.expressionMap.of))throw new xe("You cannot update relations of multiple entities with the same related object. Provide a single entity into .of method.");const r=this.expressionMap.of,o=n.inverseRelation.joinColumns.reduce((a,i)=>{const s=Dt.isObject(r)?i.referencedColumn.getEntityValue(r):r;return i.setEntityValue(a,s),a},{});if(!t||Array.isArray(t)&&!t.length)return;await this.queryBuilder.createQueryBuilder().update(n.inverseEntityMetadata.target).set(o).whereInIds(t).execute()}else{const r=n.junctionEntityMetadata,o=Array.isArray(this.expressionMap.of)?this.expressionMap.of:[this.expressionMap.of],a=Array.isArray(t)?t:[t],i=n.isManyToManyOwner?o:a,s=n.isManyToManyOwner?a:o,c=[];if(i.forEach(l=>{s.forEach(u=>{const d={};r.ownerColumns.forEach(f=>{d[f.databaseName]=Dt.isObject(l)?f.referencedColumn.getEntityValue(l):l}),r.inverseColumns.forEach(f=>{d[f.databaseName]=Dt.isObject(u)?f.referencedColumn.getEntityValue(u):u}),c.push(d)})}),!c.length)return;this.queryBuilder.connection.driver.options.type==="oracle"||this.queryBuilder.connection.driver.options.type==="sap"?await Promise.all(c.map(l=>this.queryBuilder.createQueryBuilder().insert().into(r.tableName).values(l).execute())):await this.queryBuilder.createQueryBuilder().insert().into(r.tableName).values(c).execute()}}}class kne{constructor(t,n){this.queryBuilder=t,this.expressionMap=n}async remove(t){const n=this.expressionMap.relationMetadata;if(n.isOneToMany){const r=Array.isArray(this.expressionMap.of)?this.expressionMap.of:[this.expressionMap.of],o=Array.isArray(t)?t:[t],a={};n.inverseRelation.joinColumns.forEach(l=>{a[l.propertyName]=null});const i={},s=[];r.forEach((l,u)=>{s.push(...o.map((d,f)=>[...n.inverseRelation.joinColumns.map((p,y)=>{const m="joinColumn_"+u+"_"+f+"_"+y;return i[m]=Dt.isObject(l)?p.referencedColumn.getEntityValue(l):l,`${p.propertyPath} = :${m}`}),...n.inverseRelation.entityMetadata.primaryColumns.map((p,y)=>{const m="primaryColumn_"+f+"_"+f+"_"+y;return i[m]=Dt.isObject(d)?p.getEntityValue(d):d,`${p.propertyPath} = :${m}`})].join(" AND ")))});const c=s.map(l=>"("+l+")").join(" OR ");if(!c)return;await this.queryBuilder.createQueryBuilder().update(n.inverseEntityMetadata.target).set(a).where(c).setParameters(i).execute()}else{const r=n.junctionEntityMetadata,o=Array.isArray(this.expressionMap.of)?this.expressionMap.of:[this.expressionMap.of],a=Array.isArray(t)?t:[t],i=n.isManyToManyOwner?o:a,s=n.isManyToManyOwner?a:o,c={},l=[];i.forEach((d,f)=>{l.push(...s.map((p,y)=>[...r.ownerColumns.map((m,v)=>{const b="firstValue_"+f+"_"+y+"_"+v;return c[b]=Dt.isObject(d)?m.referencedColumn.getEntityValue(d):d,`${m.databaseName} = :${b}`}),...r.inverseColumns.map((m,v)=>{const b="secondValue_"+f+"_"+y+"_"+v;return c[b]=Dt.isObject(p)?m.referencedColumn.getEntityValue(p):p,`${m.databaseName} = :${b}`})].join(" AND ")))});const u=l.map(d=>"("+d+")").join(" OR ");await this.queryBuilder.createQueryBuilder().delete().from(r.tableName).where(u).setParameters(c).execute()}}}class Pne extends Nt{constructor(){super(...arguments),this["@instanceof"]=Symbol.for("RelationQueryBuilder")}getQuery(){return""}of(t){return this.expressionMap.of=t,this}async set(t){const n=this.expressionMap.relationMetadata;if(!this.expressionMap.of)throw new xe("Entity whose relation needs to be set is not set. Use .of method to define whose relation you want to set.");if(n.isManyToMany||n.isOneToMany)throw new xe(`Set operation is only supported for many-to-one and one-to-one relations. However given "${n.propertyPath}" has ${n.relationType} relation. Use .add() method instead.`);if(n.joinColumns&&n.joinColumns.length>1&&(!Dt.isObject(t)||Object.keys(t).length<n.joinColumns.length))throw new xe('Value to be set into the relation must be a map of relation ids, for example: .set({ firstName: "...", lastName: "..." })');return new _I(this,this.expressionMap).update(t)}async add(t){if(Array.isArray(t)&&t.length===0)return;const n=this.expressionMap.relationMetadata;if(!this.expressionMap.of)throw new xe("Entity whose relation needs to be set is not set. Use .of method to define whose relation you want to set.");if(n.isManyToOne||n.isOneToOne)throw new xe(`Add operation is only supported for many-to-many and one-to-many relations. However given "${n.propertyPath}" has ${n.relationType} relation. Use .set() method instead.`);if(n.joinColumns&&n.joinColumns.length>1&&(!Dt.isObject(t)||Object.keys(t).length<n.joinColumns.length))throw new xe('Value to be set into the relation must be a map of relation ids, for example: .set({ firstName: "...", lastName: "..." })');return new _I(this,this.expressionMap).update(t)}async remove(t){if(Array.isArray(t)&&t.length===0)return;const n=this.expressionMap.relationMetadata;if(!this.expressionMap.of)throw new xe("Entity whose relation needs to be set is not set. Use .of method to define whose relation you want to set.");if(n.isManyToOne||n.isOneToOne)throw new xe(`Add operation is only supported for many-to-many and one-to-many relations. However given "${n.propertyPath}" has ${n.relationType} relation. Use .set(null) method instead.`);return new kne(this,this.expressionMap).remove(t)}async addAndRemove(t,n){await this.remove(n),await this.add(t)}async loadOne(){return this.loadMany().then(t=>t[0])}async loadMany(){let t=this.expressionMap.of;if(!Dt.isObject(t)){const n=this.expressionMap.mainAlias.metadata;if(n.hasMultiplePrimaryKeys)throw new xe("Cannot load entity because only one primary key was specified, however entity contains multiple primary keys");t=n.primaryColumns[0].createValueMap(t)}return this.connection.relationLoader.load(this.expressionMap.relationMetadata,t,this.queryRunner)}}class Qt{static chunk(t,n){return Array.from(Array(Math.ceil(t.length/n)),(r,o)=>t.slice(o*n,o*n+n))}static splitClassesAndStrings(t){return[t.filter(n=>typeof n!="string"),t.filter(n=>typeof n=="string")]}static groupBy(t,n){return t.reduce((r,o)=>{const a=n(o);let i=r.find(s=>s.id===a);return i||(i={id:a,items:[]},r.push(i)),i.items.push(o),r},[])}static uniq(t,n){return t.reduce((r,o)=>{let a=!1;if(typeof n=="function"){const i=n(o);a=!!r.find(s=>n(s)===i)}else typeof n=="string"?a=!!r.find(i=>i[n]===o[n]):a=r.indexOf(o)!==-1;return a||r.push(o),r},[])}static isPlainObject(t){return t==null?!1:!t.constructor||t.constructor===Object}static mergeArrayKey(t,n,r,o){if(o.has(r)){t[n]=o.get(r);return}if(!(r instanceof Promise)){if(!this.isPlainObject(r)&&!Array.isArray(r)){t[n]=r;return}t[n]||(t[n]=Array.isArray(r)?[]:{}),o.set(r,t[n]),this.merge(t[n],r,o),o.delete(r)}}static mergeObjectKey(t,n,r,o){if(o.has(r)){Object.assign(t,{[n]:o.get(r)});return}if(!(r instanceof Promise)){if(!this.isPlainObject(r)&&!Array.isArray(r)){Object.assign(t,{[n]:r});return}t[n]||Object.assign(t,{[n]:Array.isArray(r)?[]:{}}),o.set(r,t[n]),this.merge(t[n],r,o),o.delete(r)}}static merge(t,n,r=new Map){if(this.isPlainObject(t)&&this.isPlainObject(n))for(const o of Object.keys(n))o!=="__proto__"&&this.mergeObjectKey(t,o,n[o],r);if(Array.isArray(t)&&Array.isArray(n))for(let o=0;o<n.length;o++)this.mergeArrayKey(t,o,n[o],r)}static mergeDeep(t,...n){if(!n.length)return t;for(const r of n)Qt.merge(t,r);return t}static deepCompare(...t){let n,r,o,a;if(arguments.length<1)return!0;for(n=1,r=arguments.length;n<r;n++)if(o=[],a=[],!this.compare2Objects(o,a,arguments[0],arguments[n]))return!1;return!0}static deepValue(t,n){const r=n.split(".");for(let o=0,a=r.length;o<a;o++)t=t[r[o]];return t}static replaceEmptyObjectsWithBooleans(t){for(let n in t)t[n]&&typeof t[n]=="object"&&(Object.keys(t[n]).length===0?t[n]=!0:this.replaceEmptyObjectsWithBooleans(t[n]))}static propertyPathsToTruthyObject(t){let n={};for(let r of t){const o=r.split(".");if(!o.length)continue;(!n[o[0]]||n[o[0]]===!0)&&(n[o[0]]={});let a=n[o[0]];for(let[i,s]of o.entries())i!==0&&(a[s]?a=a[s]:i===o.length-1?(a[s]={},a=null):(a[s]={},a=a[s]))}return this.replaceEmptyObjectsWithBooleans(n),n}static compareIds(t,n){return t==null||n===void 0||n===null?!1:(typeof t.id=="string"&&typeof n.id=="string"||typeof t.id=="number"&&typeof n.id=="number")&&Object.keys(t).length===1&&Object.keys(n).length===1?t.id===n.id:Qt.deepCompare(t,n)}static toBoolean(t){return typeof t=="boolean"?t:typeof t=="string"?t==="true"||t==="1":typeof t=="number"?t>0:!1}static zipObject(t,n){return t.reduce((r,o,a)=>(r[o]=n[a],r),{})}static isArraysEqual(t,n){return t.length!==n.length?!1:t.every(r=>n.indexOf(r)!==-1)}static areMutuallyExclusive(...t){return!t.some(n=>{const r=t.filter(o=>o!==n);return n.some(o=>r.some(a=>a.includes(o)))})}static parseSqlCheckExpression(t,n){const r=t.match(new RegExp(`"${n}" varchar CHECK\\s*\\(\\s*"${n}"\\s+IN\\s*`));if(r&&r.index){const o=t.substring(r.index+r[0].length);let a="",i="";const s=[];for(let c=0;c<o.length;c++){const l=o[c];switch(l){case",":a==""?(s.push(i),i=""):i+=l;break;case"'":a==l?o[c+1]===l?(i+=l,c+=1):a="":a=l;break;case")":if(a=="")return s.push(i),s;i+=l;break;default:a!=""&&(i+=l)}}}}static compare2Objects(t,n,r,o){let a;if(Number.isNaN(r)&&Number.isNaN(o)||r===o)return!0;if(r===null||o===null||r===void 0||o===void 0)return!1;if((typeof r.equals=="function"||typeof r.equals=="function")&&r.equals(o))return!0;if(typeof r=="function"&&typeof o=="function"||r instanceof Date&&o instanceof Date||r instanceof RegExp&&o instanceof RegExp||typeof r=="string"&&typeof o=="string"||typeof r=="number"&&typeof o=="number")return r.toString()===o.toString();if(!(typeof r=="object"&&typeof o=="object")||Object.prototype.isPrototypeOf.call(r,o)||Object.prototype.isPrototypeOf.call(o,r)||r.constructor!==o.constructor||r.prototype!==o.prototype||t.indexOf(r)>-1||n.indexOf(o)>-1)return!1;for(a in o)if(o.hasOwnProperty(a)!==r.hasOwnProperty(a)||typeof o[a]!=typeof r[a])return!1;for(a in r){if(o.hasOwnProperty(a)!==r.hasOwnProperty(a)||typeof o[a]!=typeof r[a])return!1;switch(typeof r[a]){case"object":case"function":if(t.push(r),n.push(o),!this.compare2Objects(t,n,r[a],o[a]))return!1;t.pop(),n.pop();break;default:if(r[a]!==o[a])return!1;break}}return!0}}class Ane{constructor(t,n,r,o,a){this.expressionMap=t,this.driver=n,this.rawRelationIdResults=r,this.rawRelationCountResults=o,this.queryRunner=a}transform(t,n){const r=this.group(t,n),o=[];return r.forEach(a=>{const i=this.transformRawResultsGroup(a,n);i!==void 0&&!Object.values(i).every(s=>s===null)&&o.push(i)}),o}group(t,n){const r=new Map,o=[];return n.metadata.tableType==="view"?o.push(...n.metadata.columns.map(a=>ye.buildAlias(this.driver,void 0,n.name,a.databaseName))):o.push(...n.metadata.primaryColumns.map(a=>ye.buildAlias(this.driver,void 0,n.name,a.databaseName))),t.forEach(a=>{const i=o.map(c=>{const l=a[c];return Bh.isBuffer(l)?l.toString("hex"):Dt.isObject(l)?JSON.stringify(l):l}).join("_"),s=r.get(i);s?s.push(a):r.set(i,[a])}),r}transformRawResultsGroup(t,n){let r=n.metadata;if(r.discriminatorColumn){const l=t.map(d=>d[ye.buildAlias(this.driver,void 0,n.name,n.metadata.discriminatorColumn.databaseName)]),u=r.childEntityMetadatas.find(d=>typeof l.find(f=>f===d.discriminatorValue)<"u");u&&(r=u)}let o=r.create(this.queryRunner,{fromDeserializer:!0,pojo:this.expressionMap.options.indexOf("create-pojo")!==-1});const a=this.transformColumns(t,n,o,r),i=this.transformJoins(t,o,n,r),s=this.transformRelationIds(t,n,o,r),c=this.transformRelationCounts(t,n,o);if(a||r.primaryColumns.filter(l=>l.isVirtual===!1).length===0&&(i||s||c))return o}transformColumns(t,n,r,o){let a=!1;return o.columns.forEach(i=>{if(o.childEntityMetadatas.length>0&&o.childEntityMetadatas.findIndex(c=>c.target===i.target)!==-1)return;const s=t[0][ye.buildAlias(this.driver,void 0,n.name,i.databaseName)];s===void 0||i.isVirtual||this.expressionMap.selects.find(c=>c.selection===n.name||c.selection===n.name+"."+i.propertyPath)&&(i.setEntityValue(r,this.driver.prepareHydratedValue(s,i)),s!==null&&(a=!0))}),a}transformJoins(t,n,r,o){let a=!1;return this.expressionMap.joinAttributes.forEach(i=>{if(!i.metadata||!i.isSelected||i.relation&&!o.relations.find(c=>c===i.relation))return;if(i.mapToProperty){if(i.mapToPropertyParentAlias!==r.name)return}else if(!i.relation||i.parentAlias!==r.name||i.relationPropertyPath!==i.relation.propertyPath)return;let s=this.transform(t,i.alias);s=i.isMany?s:s[0],s=!i.isMany&&s===void 0?null:s,s!==void 0&&(i.mapToPropertyPropertyName?n[i.mapToPropertyPropertyName]=s:i.relation.setEntityValue(n,s),a=!0)}),a}transformRelationIds(t,n,r,o){let a=!1;return this.rawRelationIdResults.forEach((i,s)=>{if(i.relationIdAttribute.parentAlias!==n.name)return;const c=i.relationIdAttribute.relation,l=this.createValueMapFromJoinColumns(c,i.relationIdAttribute.parentAlias,t);if(l==null)return;this.prepareDataForTransformRelationIds();const u=this.hashEntityIds(c,l),d=this.relationIdMaps[s][u]||[],f=i.relationIdAttribute.mapToPropertyPropertyPath.split("."),p=(y,m,v)=>{const b=y.shift();if(b&&y.length===0)return m[b]=v,m;if(b&&y.length>0)p(y,m[b],v);else return m};c.isOneToOne||c.isManyToOne?d[0]!==void 0&&(p(f,r,d[0]),a=!0):(p(f,r,d),a=a||d.length>0)}),a}transformRelationCounts(t,n,r){let o=!1;return this.rawRelationCountResults.filter(a=>a.relationCountAttribute.parentAlias===n.name).forEach(a=>{const i=a.relationCountAttribute.relation;let s;i.isOneToMany?s=i.inverseRelation.joinColumns[0].referencedColumn.databaseName:s=i.isOwning?i.joinColumns[0].referencedColumn.databaseName:i.inverseRelation.joinColumns[0].referencedColumn.databaseName;const c=t[0][ye.buildAlias(this.driver,void 0,n.name,s)];c!=null&&(r[a.relationCountAttribute.mapToPropertyPropertyName]=0,a.results.filter(l=>l.parentId===c).forEach(l=>{r[a.relationCountAttribute.mapToPropertyPropertyName]=parseInt(l.cnt),o=!0}))}),o}createValueMapFromJoinColumns(t,n,r){let o;return t.isManyToOne||t.isOneToOneOwner?o=t.entityMetadata.primaryColumns.map(a=>a):t.isOneToMany||t.isOneToOneNotOwner?o=t.inverseRelation.joinColumns.map(a=>a):t.isOwning?o=t.joinColumns.map(a=>a):o=t.inverseRelation.inverseJoinColumns.map(a=>a),o.reduce((a,i)=>(r.forEach(s=>{t.isManyToOne||t.isOneToOneOwner?a[i.databaseName]=this.driver.prepareHydratedValue(s[ye.buildAlias(this.driver,void 0,n,i.databaseName)],i):a[i.databaseName]=this.driver.prepareHydratedValue(s[ye.buildAlias(this.driver,void 0,n,i.referencedColumn.databaseName)],i.referencedColumn)}),a),{})}extractEntityPrimaryIds(t,n){let r;return t.isManyToOne||t.isOneToOneOwner?r=t.entityMetadata.primaryColumns.map(o=>o):t.isOneToMany||t.isOneToOneNotOwner?r=t.inverseRelation.joinColumns.map(o=>o):t.isOwning?r=t.joinColumns.map(o=>o):r=t.inverseRelation.inverseJoinColumns.map(o=>o),r.reduce((o,a)=>(o[a.databaseName]=n[a.databaseName],o),{})}prepareDataForTransformRelationIds(){this.relationIdMaps||(this.relationIdMaps=this.rawRelationIdResults.map(t=>{const n=t.relationIdAttribute.relation;let r;return n.isManyToOne||n.isOneToOneOwner?r=n.joinColumns:n.isOneToMany||n.isOneToOneNotOwner?r=n.inverseEntityMetadata.primaryColumns:n.isOwning?r=n.inverseJoinColumns:r=n.inverseRelation.joinColumns,t.results.reduce((o,a)=>{let i=r.reduce((s,c)=>{let l=a[c.databaseName];return n.isOneToMany||n.isOneToOneNotOwner?(c.isVirtual&&c.referencedColumn&&c.referencedColumn.propertyName!==c.propertyName&&(l=c.referencedColumn.createValueMap(l)),Qt.mergeDeep(s,c.createValueMap(l))):(!c.isPrimary&&c.referencedColumn.referencedColumn&&(l=c.referencedColumn.referencedColumn.createValueMap(l)),Qt.mergeDeep(s,c.referencedColumn.createValueMap(l)))},{});if(r.length===1&&!t.relationIdAttribute.disableMixedMap&&(n.isOneToMany||n.isOneToOneNotOwner?i=r[0].getEntityValue(i):i=r[0].referencedColumn.getEntityValue(i)),i!==void 0){const s=this.hashEntityIds(n,a);o[s]?o[s].push(i):o[s]=[i]}return o},{})}))}hashEntityIds(t,n){const r=this.extractEntityPrimaryIds(t,n);return JSON.stringify(r)}}let Tne=class{constructor(e,t,n){this.connection=e,this.queryRunner=t,this.relationIdAttributes=n}async load(e){const t=this.relationIdAttributes.map(async n=>{if(n.relation.isManyToOne||n.relation.isOneToOneOwner){if(n.queryBuilderFactory)throw new xe("Additional condition can not be used with ManyToOne or OneToOne owner relations.");const r={},o=e.map(a=>{const i={},s=[];n.relation.joinColumns.forEach(l=>{i[l.databaseName]=this.connection.driver.prepareHydratedValue(a[ye.buildAlias(this.connection.driver,void 0,n.parentAlias,l.databaseName)],l.referencedColumn);const u=`${l.databaseName}:${i[l.databaseName]}`;s.indexOf(u)===-1&&s.push(u)}),n.relation.entityMetadata.primaryColumns.forEach(l=>{i[l.databaseName]=this.connection.driver.prepareHydratedValue(a[ye.buildAlias(this.connection.driver,void 0,n.parentAlias,l.databaseName)],l);const u=`${l.databaseName}:${i[l.databaseName]}`;s.indexOf(u)===-1&&s.push(u)}),s.sort();const c=s.join("::");return r[c]?null:(r[c]=!0,i)}).filter(a=>a);return{relationIdAttribute:n,results:o}}else if(n.relation.isOneToMany||n.relation.isOneToOneNotOwner){const r=n.relation,o=r.isOwning?r.joinColumns:r.inverseRelation.joinColumns,a=r.inverseEntityMetadata.target,i=r.inverseEntityMetadata.tableName,s=n.alias||i,c={},l={},u=e.map((p,y)=>{const m=[],v={},b=o.map(_=>{const w=_.databaseName+y,j=p[ye.buildAlias(this.connection.driver,void 0,n.parentAlias,_.referencedColumn.databaseName)],E=`${s}:${_.propertyPath}:${j}`;return m.indexOf(E)!==-1?"":(m.push(E),v[w]=j,s+"."+_.propertyPath+" = :"+w)}).filter(_=>_).join(" AND ");m.sort();const x=m.join("::");return c[x]?"":(c[x]=!0,Object.assign(l,v),b)}).filter(p=>p).map(p=>"("+p+")").join(" OR ");if(!u)return{relationIdAttribute:n,results:[]};const d=this.connection.createQueryBuilder(this.queryRunner);Qt.uniq([...o,...r.inverseRelation.entityMetadata.primaryColumns],p=>p.propertyPath).forEach(p=>{d.addSelect(s+"."+p.propertyPath,p.databaseName)}),d.from(a,s).where("("+u+")").setParameters(l),n.queryBuilderFactory&&n.queryBuilderFactory(d);const f=await d.getRawMany();return f.forEach(p=>{o.forEach(y=>{p[y.databaseName]=this.connection.driver.prepareHydratedValue(p[y.databaseName],y.referencedColumn)}),r.inverseRelation.entityMetadata.primaryColumns.forEach(y=>{p[y.databaseName]=this.connection.driver.prepareHydratedValue(p[y.databaseName],y)})}),{relationIdAttribute:n,results:f}}else{const r=n.relation,o=r.isOwning?r.joinColumns:r.inverseRelation.inverseJoinColumns,a=r.isOwning?r.inverseJoinColumns:r.inverseRelation.joinColumns,i=n.junctionAlias,s=n.joinInverseSideMetadata.tableName,c=n.alias||s,l=r.isOwning?r.junctionEntityMetadata.tableName:r.inverseRelation.junctionEntityMetadata.tableName,u=e.map(x=>o.reduce((_,w)=>(_[w.propertyPath]=x[ye.buildAlias(this.connection.driver,void 0,n.parentAlias,w.referencedColumn.databaseName)],_),{}));if(u.length===0)return{relationIdAttribute:n,results:[]};const d={},f={},p=u.map((x,_)=>{const w=[],j={},E=Object.keys(x).map(O=>{const P=O+_,M=x[O],k=`${i}:${O}:${M}`;return w.indexOf(k)!==-1?"":(w.push(k),j[P]=M,i+"."+O+" = :"+P)}).filter(O=>O).join(" AND ");w.sort();const S=w.join("::");return f[S]?"":(f[S]=!0,Object.assign(d,j),E)}).filter(x=>x),y=a.map(x=>i+"."+x.propertyPath+" = "+c+"."+x.referencedColumn.propertyPath).join(" AND "),m=p.map(x=>"("+x+" AND "+y+")").join(" OR "),v=this.connection.createQueryBuilder(this.queryRunner);a.forEach(x=>{v.addSelect(i+"."+x.propertyPath,x.databaseName).addOrderBy(i+"."+x.propertyPath)}),o.forEach(x=>{v.addSelect(i+"."+x.propertyPath,x.databaseName).addOrderBy(i+"."+x.propertyPath)}),v.from(s,c).innerJoin(l,i,m).setParameters(d),n.queryBuilderFactory&&n.queryBuilderFactory(v);const b=await v.getRawMany();return b.forEach(x=>{[...o,...a].forEach(_=>{x[_.databaseName]=this.connection.driver.prepareHydratedValue(x[_.databaseName],_.referencedColumn)})}),{relationIdAttribute:n,results:b}}});return Promise.all(t)}};class Rne{constructor(t,n){this.connection=t,this.queryRunner=n}load(t,n,r){const o=Array.isArray(n)?n:[n],a=Array.isArray(r)?r:r?[r]:void 0;return t.isManyToMany?this.loadForManyToMany(t,o,a):t.isManyToOne||t.isOneToOneOwner?this.loadForManyToOneAndOneToOneOwner(t,o,a):this.loadForOneToManyAndOneToOneNotOwner(t,o,a)}async loadManyToManyRelationIdsAndGroup(t,n,r,o){const a=t.isManyToMany||t.isOneToMany,i=Array.isArray(n)?n:[n];if(!r&&(r=await this.connection.relationLoader.load(t,n,this.queryRunner,o),!r.length))return i.map(d=>({entity:d,related:a?[]:void 0}));const s=await this.load(t,n,r),c=Array.isArray(r)?r:[r];let l=[],u=[];return t.isManyToManyOwner?(l=t.junctionEntityMetadata.inverseColumns.map(d=>d.referencedColumn),u=t.junctionEntityMetadata.ownerColumns.map(d=>d.referencedColumn)):t.isManyToManyNotOwner?(l=t.junctionEntityMetadata.ownerColumns.map(d=>d.referencedColumn),u=t.junctionEntityMetadata.inverseColumns.map(d=>d.referencedColumn)):t.isManyToOne||t.isOneToOneOwner?(l=t.joinColumns.map(d=>d.referencedColumn),u=t.entityMetadata.primaryColumns):(t.isOneToMany||t.isOneToOneNotOwner)&&(l=t.inverseRelation.entityMetadata.primaryColumns,u=t.inverseRelation.joinColumns.map(d=>d.referencedColumn)),i.map(d=>{const f={entity:d,related:a?[]:void 0},p=s.filter(y=>u.every(m=>m.compareEntityValue(d,y[m.entityMetadata.name+"_"+m.propertyAliasName])));return p.length&&c.forEach(y=>{p.forEach(m=>{l.every(v=>v.compareEntityValue(y,m[ye.buildAlias(this.connection.driver,void 0,v.entityMetadata.name+"_"+t.propertyPath.replace(".","_")+"_"+v.propertyPath.replace(".","_"))]))&&(a?f.related.push(y):f.related=y)})}),f})}loadForManyToMany(t,n,r){const o=t.junctionEntityMetadata,a=o.name,i=t.isOwning?o.ownerColumns:o.inverseColumns,s=t.isOwning?o.inverseColumns:o.ownerColumns,c=this.connection.createQueryBuilder(this.queryRunner);i.forEach(f=>{const p=ye.buildAlias(this.connection.driver,void 0,f.referencedColumn.entityMetadata.name+"_"+f.referencedColumn.propertyPath.replace(".","_"));c.addSelect(a+"."+f.propertyPath,p)}),s.forEach(f=>{const p=ye.buildAlias(this.connection.driver,void 0,f.referencedColumn.entityMetadata.name+"_"+t.propertyPath.replace(".","_")+"_"+f.referencedColumn.propertyPath.replace(".","_"));c.addSelect(a+"."+f.propertyPath,p)});let l="";if(i.length===1){const f=n.map(p=>i[0].referencedColumn.getEntityValue(p));f.every(p=>typeof p=="number")?l=`${a}.${i[0].propertyPath} IN (${f.join(", ")})`:(c.setParameter("values1",f),l=a+"."+i[0].propertyPath+" IN (:...values1)")}else l="("+n.map((f,p)=>i.map(y=>{const m="entity1_"+p+"_"+y.propertyName;return c.setParameter(m,y.referencedColumn.getEntityValue(f)),a+"."+y.propertyPath+" = :"+m}).join(" AND ")).map(f=>"("+f+")").join(" OR ")+")";let u="";if(r)if(s.length===1){const f=r.map(p=>s[0].referencedColumn.getEntityValue(p));f.every(p=>typeof p=="number")?u=`${a}.${s[0].propertyPath} IN (${f.join(", ")})`:(c.setParameter("values2",f),u=a+"."+s[0].propertyPath+" IN (:...values2)")}else u="("+r.map((f,p)=>s.map(y=>{const m="entity2_"+p+"_"+y.propertyName;return c.setParameter(m,y.referencedColumn.getEntityValue(f)),a+"."+y.propertyPath+" = :"+m}).join(" AND ")).map(f=>"("+f+")").join(" OR ")+")";const d=[l,u].filter(f=>f.length>0).join(" AND ");return c.from(o.target,a).where(d).getRawMany()}loadForManyToOneAndOneToOneOwner(t,n,r){const o=t.entityMetadata.targetName,a=t.joinColumns.every(c=>!!t.entityMetadata.nonVirtualColumns.find(l=>l===c));if(r&&a){let c=[];if(n.forEach(l=>{let u={};t.entityMetadata.primaryColumns.forEach(d=>{const f=d.entityMetadata.name+"_"+d.propertyPath.replace(".","_");u[f]=d.getEntityValue(l)}),r.forEach(d=>{t.joinColumns.forEach(f=>{const p=f.getEntityValue(l),y=f.referencedColumn.getEntityValue(d);if(!(p===void 0||y===void 0)&&p===y){const m=f.referencedColumn.entityMetadata.name+"_"+t.propertyPath.replace(".","_")+"_"+f.referencedColumn.propertyPath.replace(".","_");u[m]=y}})}),Object.keys(u).length===t.entityMetadata.primaryColumns.length+t.joinColumns.length&&c.push(u)}),c.length===n.length)return Promise.resolve(c)}const i=this.connection.createQueryBuilder(this.queryRunner);t.entityMetadata.primaryColumns.forEach(c=>{const l=ye.buildAlias(this.connection.driver,void 0,c.entityMetadata.name+"_"+c.propertyPath.replace(".","_"));i.addSelect(o+"."+c.propertyPath,l)}),t.joinColumns.forEach(c=>{const l=ye.buildAlias(this.connection.driver,void 0,c.referencedColumn.entityMetadata.name+"_"+t.propertyPath.replace(".","_")+"_"+c.referencedColumn.propertyPath.replace(".","_"));i.addSelect(o+"."+c.propertyPath,l)});let s="";if(t.entityMetadata.primaryColumns.length===1){const c=n.map(l=>t.entityMetadata.primaryColumns[0].getEntityValue(l));c.every(l=>typeof l=="number")?s=`${o}.${t.entityMetadata.primaryColumns[0].propertyPath} IN (${c.join(", ")})`:(i.setParameter("values",c),s=o+"."+t.entityMetadata.primaryColumns[0].propertyPath+" IN (:...values)")}else s=n.map((c,l)=>t.entityMetadata.primaryColumns.map((u,d)=>{const f="entity"+l+"_"+d;return i.setParameter(f,u.getEntityValue(c)),o+"."+u.propertyPath+" = :"+f}).join(" AND ")).map(c=>"("+c+")").join(" OR ");return i.from(t.entityMetadata.target,o).where(s).getRawMany()}loadForOneToManyAndOneToOneNotOwner(t,n,r){if(t=t.inverseRelation,t.entityMetadata.primaryColumns.length===t.joinColumns.length&&t.entityMetadata.primaryColumns.every(s=>t.joinColumns.indexOf(s)!==-1))return Promise.resolve(n.map(s=>{const c={};return t.joinColumns.forEach(function(l){const u=l.referencedColumn.getEntityValue(s),d=l.referencedColumn.entityMetadata.name+"_"+l.referencedColumn.propertyPath.replace(".","_"),f=l.entityMetadata.name+"_"+t.inverseRelation.propertyPath.replace(".","_")+"_"+l.propertyPath.replace(".","_");c[d]=u,c[f]=u}),c}));const o=t.entityMetadata.targetName,a=this.connection.createQueryBuilder(this.queryRunner);t.entityMetadata.primaryColumns.forEach(s=>{const c=ye.buildAlias(this.connection.driver,void 0,s.entityMetadata.name+"_"+t.inverseRelation.propertyPath.replace(".","_")+"_"+s.propertyPath.replace(".","_"));a.addSelect(o+"."+s.propertyPath,c)}),t.joinColumns.forEach(s=>{const c=ye.buildAlias(this.connection.driver,void 0,s.referencedColumn.entityMetadata.name+"_"+s.referencedColumn.propertyPath.replace(".","_"));a.addSelect(o+"."+s.propertyPath,c)});let i="";if(t.joinColumns.length===1){const s=n.map(c=>t.joinColumns[0].referencedColumn.getEntityValue(c));s.every(c=>typeof c=="number")?i=`${o}.${t.joinColumns[0].propertyPath} IN (${s.join(", ")})`:(a.setParameter("values",s),i=o+"."+t.joinColumns[0].propertyPath+" IN (:...values)")}else i=n.map((s,c)=>t.joinColumns.map((l,u)=>{const d="entity"+c+"_"+u;return a.setParameter(d,l.referencedColumn.getEntityValue(s)),o+"."+l.propertyPath+" = :"+d}).join(" AND ")).map(s=>"("+s+")").join(" OR ");return a.from(t.entityMetadata.target,o).where(i).getRawMany()}}class Ine{constructor(t){this.expressionMap=t}transform(){this.expressionMap.mainAlias&&this.expressionMap.mainAlias.metadata.relationIds.forEach(t=>{const n=this.metadataToAttribute(this.expressionMap.mainAlias.name,t);this.expressionMap.relationIdAttributes.push(n)}),this.expressionMap.joinAttributes.forEach(t=>{!t.metadata||t.metadata.isJunction||t.metadata.relationIds.forEach(n=>{const r=this.metadataToAttribute(t.alias.name,n);this.expressionMap.relationIdAttributes.push(r)})})}metadataToAttribute(t,n){return new lx(this.expressionMap,{relationName:t+"."+n.relation.propertyName,mapToProperty:t+"."+n.propertyName,alias:n.alias,queryBuilderFactory:n.queryBuilderFactory})}}class Dne{constructor(t,n,r){this.connection=t,this.queryRunner=n,this.relationCountAttributes=r}async load(t){const n=(o,a,i)=>i.indexOf(o)===a,r=this.relationCountAttributes.map(async o=>{if(o.relation.isOneToMany){const a=o.relation,i=a.inverseRelation,s=i.joinColumns[0].referencedColumn.propertyName,c=a.inverseEntityMetadata.target,l=a.inverseEntityMetadata.tableName,u=o.alias||l,d=i.propertyName;let f=t.map(y=>y[o.parentAlias+"_"+s]).filter(y=>!!y);if(f=f.filter(n),f.length===0)return{relationCountAttribute:o,results:[]};const p=this.connection.createQueryBuilder(this.queryRunner);return p.select(u+"."+d,"parentId").addSelect("COUNT(*)","cnt").from(c,u).where(u+"."+d+" IN (:...ids)").addGroupBy(u+"."+d).setParameter("ids",f),o.queryBuilderFactory&&o.queryBuilderFactory(p),{relationCountAttribute:o,results:await p.getRawMany()}}else{let a,i,s,c;o.relation.isOwning?(a=o.relation.joinColumns[0].referencedColumn.databaseName,i=o.relation.inverseJoinColumns[0].referencedColumn.databaseName,s=o.relation.junctionEntityMetadata.columns[0],c=o.relation.junctionEntityMetadata.columns[1]):(a=o.relation.inverseRelation.inverseJoinColumns[0].referencedColumn.databaseName,i=o.relation.inverseRelation.joinColumns[0].referencedColumn.databaseName,s=o.relation.junctionEntityMetadata.columns[1],c=o.relation.junctionEntityMetadata.columns[0]);let l=t.map(v=>v[o.parentAlias+"_"+a]).filter(v=>!!v);if(l=l.filter(n),l.length===0)return{relationCountAttribute:o,results:[]};const u=o.junctionAlias,d=o.joinInverseSideMetadata.tableName,f=o.alias||d,p=o.relation.junctionEntityMetadata.tableName,y=u+"."+s.propertyName+" IN ("+l.map(v=>isNaN(v)?"'"+v+"'":v)+") AND "+u+"."+c.propertyName+" = "+f+"."+i,m=this.connection.createQueryBuilder(this.queryRunner);return m.select(u+"."+s.propertyName,"parentId").addSelect("COUNT("+m.escape(f)+"."+m.escape(i)+")","cnt").from(d,f).innerJoin(p,u,y).addGroupBy(u+"."+s.propertyName),o.queryBuilderFactory&&o.queryBuilderFactory(m),{relationCountAttribute:o,results:await m.getRawMany()}}});return Promise.all(r)}}class Lne{constructor(t){this.expressionMap=t}transform(){this.expressionMap.mainAlias&&this.expressionMap.mainAlias.metadata.relationCounts.forEach(t=>{const n=this.metadataToAttribute(this.expressionMap.mainAlias.name,t);this.expressionMap.relationCountAttributes.push(n)}),this.expressionMap.joinAttributes.forEach(t=>{!t.metadata||t.metadata.isJunction||t.metadata.relationCounts.forEach(n=>{const r=this.metadataToAttribute(t.alias.name,n);this.expressionMap.relationCountAttributes.push(r)})})}metadataToAttribute(t,n){return new ux(this.expressionMap,{relationName:t+"."+n.relation.propertyName,mapToProperty:t+"."+n.propertyName,alias:n.alias,queryBuilderFactory:n.queryBuilderFactory})}}class hx{static isFindOneOptions(t){const n=t;return n&&(Array.isArray(n.select)||Array.isArray(n.relations)||typeof n.select=="object"||typeof n.relations=="object"||typeof n.where=="object"||typeof n.join=="object"||typeof n.order=="object"||typeof n.cache=="object"||typeof n.cache=="boolean"||typeof n.cache=="number"||typeof n.comment=="string"||typeof n.lock=="object"||typeof n.loadRelationIds=="object"||typeof n.loadRelationIds=="boolean"||typeof n.loadEagerRelations=="boolean"||typeof n.withDeleted=="boolean"||typeof n.relationLoadStrategy=="string"||typeof n.transaction=="boolean")}static isFindManyOptions(t){const n=t;return n&&(this.isFindOneOptions(n)||typeof n.skip=="number"||typeof n.take=="number"||typeof n.skip=="string"||typeof n.take=="string")}static extractFindManyOptionsAlias(t){if(this.isFindManyOptions(t)&&t.join)return t.join.alias}static applyOptionsToTreeQueryBuilder(t,n){if(n!=null&&n.relations){const r=[...n.relations];if(hx.applyRelationsRecursively(t,r,t.expressionMap.mainAlias.name,t.expressionMap.mainAlias.metadata,""),r.length>0)throw new sne(r)}return t}static applyRelationsRecursively(t,n,r,o,a){let i=[];if(a){const s=new RegExp("^"+a.replace(".","\\.")+"\\.");i=n.filter(c=>c.match(s)).map(c=>o.findRelationWithPropertyPath(c.replace(s,""))).filter(c=>c)}else i=n.map(s=>o.findRelationWithPropertyPath(s)).filter(s=>s);i.forEach(s=>{let c=ye.buildAlias(t.connection.driver,{joiner:"__"},r,s.propertyPath);const l=r+"."+s.propertyPath;t.expressionMap.relationLoadStrategy==="query"?t.concatRelationMetadata(s):t.leftJoinAndSelect(l,c),n.splice(n.indexOf(a?a+"."+s.propertyPath:s.propertyPath),1);let u,d;if(t.expressionMap.relationLoadStrategy==="query")u=s.inverseEntityMetadata,d=c;else{const f=t.expressionMap.joinAttributes.find(p=>p.entityOrProperty===l);u=f.metadata,d=f.alias.name}if(!d||!u)throw new Tr(s.propertyPath,o);if(this.applyRelationsRecursively(t,n,d,u,a?a+"."+s.propertyPath:s.propertyPath),t.expressionMap.relationLoadStrategy==="join"){const f=o.relations.find(p=>p.propertyName===s.propertyPath);f&&this.joinEagerRelations(t,c,f.inverseEntityMetadata)}})}static joinEagerRelations(t,n,r){r.eagerRelations.forEach(o=>{let a=ye.buildAlias(t.connection.driver,{joiner:"__"},n,o.propertyName),i=!0;for(const l of t.expressionMap.joinAttributes)if(!(l.condition!==void 0||l.mapToProperty!==void 0||l.isMappingMany!==void 0||l.direction!=="LEFT"||l.entityOrProperty!==`${n}.${o.propertyPath}`)){i=!1,a=l.alias.name;break}const s=!!t.expressionMap.joinAttributes.find(l=>l.alias.name===a);i&&!s&&t.leftJoin(n+"."+o.propertyPath,a);let c=!0;for(const l of t.expressionMap.selects)if(!(l.aliasName!==void 0||l.virtual!==void 0||l.selection!==a)){c=!1;break}c&&t.addSelect(a),this.joinEagerRelations(t,a,o.inverseEntityMetadata)})}}class mx extends Nt{constructor(){super(...arguments),this["@instanceof"]=Symbol.for("SelectQueryBuilder"),this.findOptions={},this.selects=[],this.joins=[],this.conditions="",this.orderBys=[],this.relationMetadatas=[]}getQuery(){let t=this.createComment();return t+=this.createCteExpression(),t+=this.createSelectExpression(),t+=this.createJoinExpression(),t+=this.createWhereExpression(),t+=this.createGroupByExpression(),t+=this.createHavingExpression(),t+=this.createOrderByExpression(),t+=this.createLimitOffsetExpression(),t+=this.createLockExpression(),t=t.trim(),this.expressionMap.subQuery&&(t="("+t+")"),this.replacePropertyNamesForTheWholeQuery(t)}setFindOptions(t){return this.findOptions=t,this.applyFindOptions(),this}subQuery(){const t=this.createQueryBuilder();return t.expressionMap.subQuery=!0,t.parentQueryBuilder=this,t}select(t,n){if(this.expressionMap.queryType="select",Array.isArray(t))this.expressionMap.selects=t.map(r=>({selection:r}));else if(typeof t=="function"){const r=t(this.subQuery());this.setParameters(r.getParameters()),this.expressionMap.selects.push({selection:r.getQuery(),aliasName:n})}else t&&(this.expressionMap.selects=[{selection:t,aliasName:n}]);return this}addSelect(t,n){if(!t)return this;if(Array.isArray(t))this.expressionMap.selects=this.expressionMap.selects.concat(t.map(r=>({selection:r})));else if(typeof t=="function"){const r=t(this.subQuery());this.setParameters(r.getParameters()),this.expressionMap.selects.push({selection:r.getQuery(),aliasName:n})}else t&&this.expressionMap.selects.push({selection:t,aliasName:n});return this}maxExecutionTime(t){return this.expressionMap.maxExecutionTime=t,this}distinct(t=!0){return this.expressionMap.selectDistinct=t,this}distinctOn(t){return this.expressionMap.selectDistinctOn=t,this}fromDummy(){return this.from(this.connection.driver.dummyTableName??"(SELECT 1 AS dummy_column)","dummy_table")}from(t,n){const r=this.createFromAlias(t,n);return this.expressionMap.setMainAlias(r),this}addFrom(t,n){const r=this.createFromAlias(t,n);return this.expressionMap.mainAlias||this.expressionMap.setMainAlias(r),this}innerJoin(t,n,r,o){return this.join("INNER",t,n,r,o),this}leftJoin(t,n,r,o){return this.join("LEFT",t,n,r,o),this}innerJoinAndSelect(t,n,r,o){return this.addSelect(n),this.innerJoin(t,n,r,o),this}leftJoinAndSelect(t,n,r,o){return this.addSelect(n),this.leftJoin(t,n,r,o),this}innerJoinAndMapMany(t,n,r,o,a){return this.addSelect(r),this.join("INNER",n,r,o,a,t,!0),this}innerJoinAndMapOne(t,n,r,o,a,i){return this.addSelect(r),this.join("INNER",n,r,o,a,t,!1,i),this}leftJoinAndMapMany(t,n,r,o,a){return this.addSelect(r),this.join("LEFT",n,r,o,a,t,!0),this}leftJoinAndMapOne(t,n,r,o,a,i){return this.addSelect(r),this.join("LEFT",n,r,o,a,t,!1,i),this}loadRelationIdAndMap(t,n,r,o){const a=new lx(this.expressionMap);return a.mapToProperty=t,a.relationName=n,typeof r=="string"&&(a.alias=r),typeof r=="object"&&r.disableMixedMap&&(a.disableMixedMap=!0),a.queryBuilderFactory=o,this.expressionMap.relationIdAttributes.push(a),a.relation.junctionEntityMetadata&&this.expressionMap.createAlias({type:"other",name:a.junctionAlias,metadata:a.relation.junctionEntityMetadata}),this}loadRelationCountAndMap(t,n,r,o){const a=new ux(this.expressionMap);return a.mapToProperty=t,a.relationName=n,a.alias=r,a.queryBuilderFactory=o,this.expressionMap.relationCountAttributes.push(a),this.expressionMap.createAlias({type:"other",name:a.junctionAlias}),a.relation.junctionEntityMetadata&&this.expressionMap.createAlias({type:"other",name:a.junctionAlias,metadata:a.relation.junctionEntityMetadata}),this}loadAllRelationIds(t){return this.expressionMap.mainAlias.metadata.relations.forEach(n=>{t!==void 0&&t.relations!==void 0&&t.relations.indexOf(n.propertyPath)===-1||this.loadRelationIdAndMap(this.expressionMap.mainAlias.name+"."+n.propertyPath,this.expressionMap.mainAlias.name+"."+n.propertyPath,t)}),this}where(t,n){this.expressionMap.wheres=[];const r=this.getWhereCondition(t);return r&&(this.expressionMap.wheres=[{type:"simple",condition:r}]),n&&this.setParameters(n),this}andWhere(t,n){return this.expressionMap.wheres.push({type:"and",condition:this.getWhereCondition(t)}),n&&this.setParameters(n),this}orWhere(t,n){return this.expressionMap.wheres.push({type:"or",condition:this.getWhereCondition(t)}),n&&this.setParameters(n),this}whereExists(t){return this.where(...this.getExistsCondition(t))}andWhereExists(t){return this.andWhere(...this.getExistsCondition(t))}orWhereExists(t){return this.orWhere(...this.getExistsCondition(t))}whereInIds(t){return this.where(this.getWhereInIdsCondition(t))}andWhereInIds(t){return this.andWhere(this.getWhereInIdsCondition(t))}orWhereInIds(t){return this.orWhere(this.getWhereInIdsCondition(t))}having(t,n){return this.expressionMap.havings.push({type:"simple",condition:t}),n&&this.setParameters(n),this}andHaving(t,n){return this.expressionMap.havings.push({type:"and",condition:t}),n&&this.setParameters(n),this}orHaving(t,n){return this.expressionMap.havings.push({type:"or",condition:t}),n&&this.setParameters(n),this}groupBy(t){return t?this.expressionMap.groupBys=[t]:this.expressionMap.groupBys=[],this}addGroupBy(t){return this.expressionMap.groupBys.push(t),this}timeTravelQuery(t){return this.connection.driver.options.type==="cockroachdb"&&(t===void 0?this.expressionMap.timeTravel="follower_read_timestamp()":this.expressionMap.timeTravel=t),this}orderBy(t,n="ASC",r){if(n!==void 0&&n!=="ASC"&&n!=="DESC")throw new xe('SelectQueryBuilder.addOrderBy "order" can accept only "ASC" and "DESC" values.');if(r!==void 0&&r!=="NULLS FIRST"&&r!=="NULLS LAST")throw new xe('SelectQueryBuilder.addOrderBy "nulls" can accept only "NULLS FIRST" and "NULLS LAST" values.');return t?typeof t=="object"?this.expressionMap.orderBys=t:r?this.expressionMap.orderBys={[t]:{order:n,nulls:r}}:this.expressionMap.orderBys={[t]:n}:this.expressionMap.orderBys={},this}addOrderBy(t,n="ASC",r){if(n!==void 0&&n!=="ASC"&&n!=="DESC")throw new xe('SelectQueryBuilder.addOrderBy "order" can accept only "ASC" and "DESC" values.');if(r!==void 0&&r!=="NULLS FIRST"&&r!=="NULLS LAST")throw new xe('SelectQueryBuilder.addOrderBy "nulls" can accept only "NULLS FIRST" and "NULLS LAST" values.');return r?this.expressionMap.orderBys[t]={order:n,nulls:r}:this.expressionMap.orderBys[t]=n,this}limit(t){if(this.expressionMap.limit=this.normalizeNumber(t),this.expressionMap.limit!==void 0&&isNaN(this.expressionMap.limit))throw new xe('Provided "limit" value is not a number. Please provide a numeric value.');return this}offset(t){if(this.expressionMap.offset=this.normalizeNumber(t),this.expressionMap.offset!==void 0&&isNaN(this.expressionMap.offset))throw new xe('Provided "offset" value is not a number. Please provide a numeric value.');return this}take(t){if(this.expressionMap.take=this.normalizeNumber(t),this.expressionMap.take!==void 0&&isNaN(this.expressionMap.take))throw new xe('Provided "take" value is not a number. Please provide a numeric value.');return this}skip(t){if(this.expressionMap.skip=this.normalizeNumber(t),this.expressionMap.skip!==void 0&&isNaN(this.expressionMap.skip))throw new xe('Provided "skip" value is not a number. Please provide a numeric value.');return this}useIndex(t){return this.expressionMap.useIndex=t,this}setLock(t,n,r){return this.expressionMap.lockMode=t,this.expressionMap.lockVersion=n,this.expressionMap.lockTables=r,this}setOnLocked(t){return this.expressionMap.onLocked=t,this}withDeleted(){return this.expressionMap.withDeleted=!0,this}async getRawOne(){return(await this.getRawMany())[0]}async getRawMany(){if(this.expressionMap.lockMode==="optimistic")throw new gl;this.expressionMap.queryEntity=!1;const t=this.obtainQueryRunner();let n=!1;try{this.expressionMap.useTransaction===!0&&t.isTransactionActive===!1&&(await t.startTransaction(),n=!0);const r=await this.loadRawResults(t);return n&&await t.commitTransaction(),r}catch(r){if(n)try{await t.rollbackTransaction()}catch{}throw r}finally{t!==this.queryRunner&&await t.release()}}async getRawAndEntities(){const t=this.obtainQueryRunner();let n=!1;try{this.expressionMap.useTransaction===!0&&t.isTransactionActive===!1&&(await t.startTransaction(),n=!0),this.expressionMap.queryEntity=!0;const r=await this.executeEntitiesAndRawResults(t);return n&&await t.commitTransaction(),r}catch(r){if(n)try{await t.rollbackTransaction()}catch{}throw r}finally{t!==this.queryRunner&&await t.release()}}async getOne(){const t=(await this.getRawAndEntities()).entities[0];if(t&&this.expressionMap.lockMode==="optimistic"&&this.expressionMap.lockVersion){const n=this.expressionMap.mainAlias.metadata;if(this.expressionMap.lockVersion instanceof Date){const r=n.updateDateColumn.getEntityValue(t);if(r.getTime()!==this.expressionMap.lockVersion.getTime())throw new tI(n.name,this.expressionMap.lockVersion,r)}else{const r=n.versionColumn.getEntityValue(t);if(r!==this.expressionMap.lockVersion)throw new tI(n.name,this.expressionMap.lockVersion,r)}}return t===void 0?null:t}async getOneOrFail(){const t=await this.getOne();if(!t)throw new rne(this.expressionMap.mainAlias.target,this.expressionMap.parameters);return t}async getMany(){if(this.expressionMap.lockMode==="optimistic")throw new gl;return(await this.getRawAndEntities()).entities}async getCount(){if(this.expressionMap.lockMode==="optimistic")throw new gl;const t=this.obtainQueryRunner();let n=!1;try{this.expressionMap.useTransaction===!0&&t.isTransactionActive===!1&&(await t.startTransaction(),n=!0),this.expressionMap.queryEntity=!1;const r=await this.executeCountQuery(t);return n&&await t.commitTransaction(),r}catch(r){if(n)try{await t.rollbackTransaction()}catch{}throw r}finally{t!==this.queryRunner&&await t.release()}}async getExists(){if(this.expressionMap.lockMode==="optimistic")throw new gl;const t=this.obtainQueryRunner();let n=!1;try{this.expressionMap.useTransaction===!0&&t.isTransactionActive===!1&&(await t.startTransaction(),n=!0),this.expressionMap.queryEntity=!1;const r=await this.executeExistsQuery(t);return n&&await t.commitTransaction(),r}catch(r){if(n)try{await t.rollbackTransaction()}catch{}throw r}finally{t!==this.queryRunner&&await t.release()}}async getManyAndCount(){if(this.expressionMap.lockMode==="optimistic")throw new gl;const t=this.obtainQueryRunner();let n=!1;try{this.expressionMap.useTransaction===!0&&t.isTransactionActive===!1&&(await t.startTransaction(),n=!0),this.expressionMap.queryEntity=!0;const r=await this.executeEntitiesAndRawResults(t);this.expressionMap.queryEntity=!1;const o=this.expressionMap.cacheId;this.expressionMap.cacheId=o&&`${o}-count`;const a=await this.executeCountQuery(t),i=[r.entities,a];return n&&await t.commitTransaction(),i}catch(r){if(n)try{await t.rollbackTransaction()}catch{}throw r}finally{t!==this.queryRunner&&await t.release()}}async stream(){this.expressionMap.queryEntity=!1;const[t,n]=this.getQueryAndParameters(),r=this.obtainQueryRunner();let o=!1;try{this.expressionMap.useTransaction===!0&&r.isTransactionActive===!1&&(await r.startTransaction(),o=!0);const a=()=>{if(r!==this.queryRunner)return r.release()},i=r.stream(t,n,a,a);return o&&await r.commitTransaction(),i}catch(a){if(o)try{await r.rollbackTransaction()}catch{}throw a}}cache(t,n){return typeof t=="boolean"?this.expressionMap.cache=t:typeof t=="number"?(this.expressionMap.cache=!0,this.expressionMap.cacheDuration=t):(typeof t=="string"||typeof t=="number")&&(this.expressionMap.cache=!0,this.expressionMap.cacheId=t),n&&(this.expressionMap.cacheDuration=n),this}setOption(t){return this.expressionMap.options.push(t),this}join(t,n,r,o,a,i,s,c){a&&this.setParameters(a);const l=new gI(this.connection,this.expressionMap);l.direction=t,l.mapAsEntity=c,l.mapToProperty=i,l.isMappingMany=s,l.entityOrProperty=n,l.condition=o,this.expressionMap.joinAttributes.push(l);const u=l.metadata;if(u){if(u.deleteDateColumn&&!this.expressionMap.withDeleted){const d=`${r}.${u.deleteDateColumn.propertyName} IS NULL`;l.condition=l.condition?` ${l.condition} AND ${d}`:`${d}`}l.alias=this.expressionMap.createAlias({type:"join",name:r,metadata:u}),l.relation&&l.relation.junctionEntityMetadata&&this.expressionMap.createAlias({type:"join",name:l.junctionAlias,metadata:l.relation.junctionEntityMetadata})}else{let d="";if(typeof n=="function"){const p=n(this.subQuery());this.setParameters(p.getParameters()),d=p.getQuery()}else d=n;const f=typeof n=="function"||n.substr(0,1)==="("&&n.substr(-1)===")";l.alias=this.expressionMap.createAlias({type:"join",name:r,tablePath:f===!1?n:void 0,subQuery:f===!0?d:void 0})}}createSelectExpression(){if(!this.expressionMap.mainAlias)throw new xe("Cannot build query because main alias is not set (call qb#from method)");const t=[],n=[];if(this.expressionMap.mainAlias.hasMetadata){const s=this.expressionMap.mainAlias.metadata;t.push(...this.buildEscapedEntityColumnSelects(this.expressionMap.mainAlias.name,s)),n.push(...this.findEntityColumnSelects(this.expressionMap.mainAlias.name,s))}this.expressionMap.joinAttributes.forEach(s=>{if(s.metadata)t.push(...this.buildEscapedEntityColumnSelects(s.alias.name,s.metadata)),n.push(...this.findEntityColumnSelects(s.alias.name,s.metadata));else if(this.expressionMap.selects.some(c=>c.selection===s.alias.name)){t.push({selection:this.escape(s.alias.name)+".*"});const c=this.expressionMap.selects.find(l=>l.selection===s.alias.name);n.push(c)}}),this.expressionMap.selects.filter(s=>n.indexOf(s)===-1).forEach(s=>t.push({selection:this.replacePropertyNames(s.selection),aliasName:s.aliasName})),t.length===0&&t.push({selection:"*"});let r="";this.expressionMap.useIndex&&ye.isMySQLFamily(this.connection.driver)&&(r=` USE INDEX (${this.expressionMap.useIndex})`);const o=this.expressionMap.aliases.filter(s=>s.type==="from"&&(s.tablePath||s.subQuery)).map(s=>s.subQuery?s.subQuery+" "+this.escape(s.name):this.getTableName(s.tablePath)+" "+this.escape(s.name)),a=this.createSelectDistinctExpression(),i=t.map(s=>s.selection+(s.aliasName?" AS "+this.escape(s.aliasName):"")).join(", ");return a+i+" FROM "+o.join(", ")+this.createTableLockExpression()+r}createSelectDistinctExpression(){const{selectDistinct:t,selectDistinctOn:n,maxExecutionTime:r}=this.expressionMap,{driver:o}=this.connection;let a="SELECT ";return r>0&&ye.isMySQLFamily(o)&&(a+=`/*+ MAX_EXECUTION_TIME(${this.expressionMap.maxExecutionTime}) */ `),ye.isPostgresFamily(o)&&n.length>0?a=`SELECT DISTINCT ON (${n.map(i=>this.replacePropertyNames(i)).join(", ")}) `:t&&(a="SELECT DISTINCT "),a}createJoinExpression(){return this.expressionMap.joinAttributes.map(t=>{const n=t.relation,r=t.tablePath,o=t.alias.name;let a=t.condition?" AND ("+t.condition+")":"";const i=t.parentAlias;if(!i||!n){const s=t.alias.subQuery?t.alias.subQuery:this.getTableName(r);return" "+t.direction+" JOIN "+s+" "+this.escape(o)+this.createTableLockExpression()+(t.condition?" ON "+this.replacePropertyNames(t.condition):"")}if(n.isManyToOne||n.isOneToOneOwner){const s=n.joinColumns.map(c=>o+"."+c.referencedColumn.propertyPath+"="+i+"."+n.propertyPath+"."+c.referencedColumn.propertyPath).join(" AND ");return" "+t.direction+" JOIN "+this.getTableName(r)+" "+this.escape(o)+this.createTableLockExpression()+" ON "+this.replacePropertyNames(s+a)}else if(n.isOneToMany||n.isOneToOneNotOwner){const s=n.inverseRelation.joinColumns.map(c=>(n.inverseEntityMetadata.tableType==="entity-child"&&n.inverseEntityMetadata.discriminatorColumn&&(a+=" AND "+o+"."+n.inverseEntityMetadata.discriminatorColumn.databaseName+"='"+n.inverseEntityMetadata.discriminatorValue+"'"),o+"."+n.inverseRelation.propertyPath+"."+c.referencedColumn.propertyPath+"="+i+"."+c.referencedColumn.propertyPath)).join(" AND ");if(!s)throw new xe(`Relation ${n.entityMetadata.name}.${n.propertyName} does not have join columns.`);return" "+t.direction+" JOIN "+this.getTableName(r)+" "+this.escape(o)+this.createTableLockExpression()+" ON "+this.replacePropertyNames(s+a)}else{const s=n.junctionEntityMetadata.tablePath,c=t.junctionAlias;let l="",u="";return n.isOwning?(l=n.joinColumns.map(d=>c+"."+d.propertyPath+"="+i+"."+d.referencedColumn.propertyPath).join(" AND "),u=n.inverseJoinColumns.map(d=>o+"."+d.referencedColumn.propertyPath+"="+c+"."+d.propertyPath).join(" AND ")):(l=n.inverseRelation.inverseJoinColumns.map(d=>c+"."+d.propertyPath+"="+i+"."+d.referencedColumn.propertyPath).join(" AND "),u=n.inverseRelation.joinColumns.map(d=>o+"."+d.referencedColumn.propertyPath+"="+c+"."+d.propertyPath).join(" AND "))," "+t.direction+" JOIN "+this.getTableName(s)+" "+this.escape(c)+this.createTableLockExpression()+" ON "+this.replacePropertyNames(l)+" "+t.direction+" JOIN "+this.getTableName(r)+" "+this.escape(o)+this.createTableLockExpression()+" ON "+this.replacePropertyNames(u+a)}}).join(" ")}createGroupByExpression(){return!this.expressionMap.groupBys||!this.expressionMap.groupBys.length?"":" GROUP BY "+this.replacePropertyNames(this.expressionMap.groupBys.join(", "))}createOrderByExpression(){const t=this.expressionMap.allOrderBys;return Object.keys(t).length===0?"":" ORDER BY "+Object.keys(t).map(n=>{const r=typeof t[n]=="string"?t[n]:t[n].order+" "+t[n].nulls,o=this.expressionMap.selects.find(a=>a.selection===n);if(o&&!o.aliasName&&n.indexOf(".")!==-1){const a=n.split("."),i=a[0],s=a.slice(1).join("."),c=this.expressionMap.aliases.find(l=>l.name===i);if(c){const l=c.metadata.findColumnWithPropertyPath(s);if(l){const u=ye.buildAlias(this.connection.driver,void 0,i,l.databaseName);return this.escape(u)+" "+r}}}return this.replacePropertyNames(n)+" "+r}).join(", ")}createLimitOffsetExpression(){let t=this.expressionMap.offset,n=this.expressionMap.limit;if(!t&&!n&&this.expressionMap.joinAttributes.length===0&&(t=this.expressionMap.skip,n=this.expressionMap.take),this.connection.driver.options.type==="mssql"){let r="";if((n||t)&&Object.keys(this.expressionMap.allOrderBys).length<=0&&(r=" ORDER BY (SELECT NULL)"),n&&t)return r+" OFFSET "+t+" ROWS FETCH NEXT "+n+" ROWS ONLY";if(n)return r+" OFFSET 0 ROWS FETCH NEXT "+n+" ROWS ONLY";if(t)return r+" OFFSET "+t+" ROWS"}else if(ye.isMySQLFamily(this.connection.driver)||this.connection.driver.options.type==="aurora-mysql"||this.connection.driver.options.type==="sap"||this.connection.driver.options.type==="spanner"){if(n&&t)return" LIMIT "+n+" OFFSET "+t;if(n)return" LIMIT "+n;if(t)throw new lne}else if(ye.isSQLiteFamily(this.connection.driver)){if(n&&t)return" LIMIT "+n+" OFFSET "+t;if(n)return" LIMIT "+n;if(t)return" LIMIT -1 OFFSET "+t}else if(this.connection.driver.options.type==="oracle"){if(n&&t)return" OFFSET "+t+" ROWS FETCH NEXT "+n+" ROWS ONLY";if(n)return" FETCH NEXT "+n+" ROWS ONLY";if(t)return" OFFSET "+t+" ROWS"}else{if(n&&t)return" LIMIT "+n+" OFFSET "+t;if(n)return" LIMIT "+n;if(t)return" OFFSET "+t}return""}createTableLockExpression(){if(this.connection.driver.options.type==="mssql")switch(this.expressionMap.lockMode){case"pessimistic_read":return" WITH (HOLDLOCK, ROWLOCK)";case"pessimistic_write":return" WITH (UPDLOCK, ROWLOCK)";case"dirty_read":return" WITH (NOLOCK)"}return""}createLockExpression(){const t=this.connection.driver;let n="";if(this.expressionMap.lockTables){if(!(ye.isPostgresFamily(t)||t.options.type==="cockroachdb"))throw new xe("Lock tables not supported in selected driver");if(this.expressionMap.lockTables.length<1)throw new xe("lockTables cannot be an empty array");n=" OF "+this.expressionMap.lockTables.join(", ")}let r="";switch(this.expressionMap.onLocked==="nowait"?r=" NOWAIT":this.expressionMap.onLocked==="skip_locked"&&(r=" SKIP LOCKED"),this.expressionMap.lockMode){case"pessimistic_read":if(t.options.type==="mysql"||t.options.type==="aurora-mysql")return ye.isReleaseVersionOrGreater(t,"8.0.0")?" FOR SHARE"+n+r:" LOCK IN SHARE MODE";if(t.options.type==="mariadb")return" LOCK IN SHARE MODE";if(ye.isPostgresFamily(t))return" FOR SHARE"+n+r;if(t.options.type==="oracle")return" FOR UPDATE";if(t.options.type==="mssql")return"";throw new Ji;case"pessimistic_write":if(ye.isMySQLFamily(t)||t.options.type==="aurora-mysql"||t.options.type==="oracle")return" FOR UPDATE"+r;if(ye.isPostgresFamily(t)||t.options.type==="cockroachdb")return" FOR UPDATE"+n+r;if(t.options.type==="mssql")return"";throw new Ji;case"pessimistic_partial_write":if(ye.isPostgresFamily(t))return" FOR UPDATE"+n+" SKIP LOCKED";if(ye.isMySQLFamily(t))return" FOR UPDATE SKIP LOCKED";throw new Ji;case"pessimistic_write_or_fail":if(ye.isPostgresFamily(t)||t.options.type==="cockroachdb")return" FOR UPDATE"+n+" NOWAIT";if(ye.isMySQLFamily(t))return" FOR UPDATE NOWAIT";throw new Ji;case"for_no_key_update":if(ye.isPostgresFamily(t)||t.options.type==="cockroachdb")return" FOR NO KEY UPDATE"+n+r;throw new Ji;case"for_key_share":if(ye.isPostgresFamily(t))return" FOR KEY SHARE"+n+r;throw new Ji;default:return""}}createHavingExpression(){if(!this.expressionMap.havings||!this.expressionMap.havings.length)return"";const t=this.expressionMap.havings.map((n,r)=>{switch(n.type){case"and":return(r>0?"AND ":"")+this.replacePropertyNames(n.condition);case"or":return(r>0?"OR ":"")+this.replacePropertyNames(n.condition);default:return this.replacePropertyNames(n.condition)}}).join(" ");return t.length?" HAVING "+t:""}buildEscapedEntityColumnSelects(t,n){const r=this.expressionMap.selects.some(l=>l.selection===t),o=[];if(r&&o.push(...n.columns.filter(l=>l.isSelect===!0)),o.push(...n.columns.filter(l=>this.expressionMap.selects.some(u=>u.selection===t+"."+l.propertyPath))),o.length===0)return[];const a=this.expressionMap.queryEntity?n.primaryColumns.filter(l=>o.indexOf(l)===-1):[],i=[...o,...a],s=[],c=this.escape(t);return i.forEach(l=>{let u=c+"."+this.escape(l.databaseName);l.isVirtualProperty&&l.query&&(u=`(${l.query(c)})`),this.connection.driver.spatialTypes.indexOf(l.type)!==-1&&((ye.isMySQLFamily(this.connection.driver)||this.connection.driver.options.type==="aurora-mysql")&&(u=`${this.connection.driver.options.legacySpatialSupport?"AsText":"ST_AsText"}(${u})`),ye.isPostgresFamily(this.connection.driver)&&(l.precision?u=`ST_AsGeoJSON(${u}, ${l.precision})::json`:u=`ST_AsGeoJSON(${u})::json`),this.connection.driver.options.type==="mssql"&&(u=`${u}.ToString()`));const d=this.expressionMap.selects.filter(f=>f.selection===t+"."+l.propertyPath);if(d.length)d.forEach(f=>{s.push({selection:u,aliasName:f.aliasName?f.aliasName:ye.buildAlias(this.connection.driver,void 0,t,l.databaseName),virtual:f.virtual})});else{if(l.isVirtualProperty)return;s.push({selection:u,aliasName:ye.buildAlias(this.connection.driver,void 0,t,l.databaseName),virtual:r})}}),s}findEntityColumnSelects(t,n){const r=this.expressionMap.selects.find(o=>o.selection===t);return r?[r]:this.expressionMap.selects.filter(o=>n.columns.some(a=>o.selection===t+"."+a.propertyPath))}computeCountExpression(){const t=this.expressionMap.mainAlias.name,n=this.expressionMap.mainAlias.metadata.primaryColumns,r=this.escape(t);if(this.expressionMap.joinAttributes.length===0&&this.expressionMap.relationIdAttributes.length===0&&this.expressionMap.relationCountAttributes.length===0)return"COUNT(1)";if(this.connection.driver.options.type==="cockroachdb"||ye.isPostgresFamily(this.connection.driver))return"COUNT(DISTINCT("+n.map(o=>`${r}.${this.escape(o.databaseName)}`).join(", ")+"))";if(ye.isMySQLFamily(this.connection.driver))return"COUNT(DISTINCT "+n.map(o=>`${r}.${this.escape(o.databaseName)}`).join(", ")+")";if(this.connection.driver.options.type==="mssql"){const o=n.map(a=>`${r}.${this.escape(a.databaseName)}`).join(", '|;|', ");return n.length===1?`COUNT(DISTINCT(${o}))`:`COUNT(DISTINCT(CONCAT(${o})))`}return this.connection.driver.options.type==="spanner"?n.length===1?`COUNT(DISTINCT(${r}.${this.escape(n[0].databaseName)}))`:`COUNT(DISTINCT(CONCAT(${n.map(o=>`CAST(${r}.${this.escape(o.databaseName)} AS STRING)`).join(", '|;|', ")})))`:"COUNT(DISTINCT("+n.map(o=>`${r}.${this.escape(o.databaseName)}`).join(" || '|;|' || ")+"))"}async executeCountQuery(t){const n=this.computeCountExpression(),r=await this.clone().orderBy().groupBy().offset(void 0).limit(void 0).skip(void 0).take(void 0).select(n,"cnt").setOption("disable-global-order").loadRawResults(t);return!r||!r[0]||!r[0].cnt?0:parseInt(r[0].cnt)}async executeExistsQuery(t){return(await this.connection.createQueryBuilder().fromDummy().select("1","row_exists").whereExists(this).limit(1).loadRawResults(t)).length>0}applyFindOptions(){if(this.expressionMap.mainAlias.metadata){if(this.findOptions.relationLoadStrategy&&(this.expressionMap.relationLoadStrategy=this.findOptions.relationLoadStrategy),this.findOptions.comment&&this.comment(this.findOptions.comment),this.findOptions.withDeleted&&this.withDeleted(),this.findOptions.select){const t=Array.isArray(this.findOptions.select)?Qt.propertyPathsToTruthyObject(this.findOptions.select):this.findOptions.select;this.buildSelect(t,this.expressionMap.mainAlias.metadata,this.expressionMap.mainAlias.name)}if(this.selects.length&&this.select(this.selects),this.selects=[],this.findOptions.relations){const t=Array.isArray(this.findOptions.relations)?Qt.propertyPathsToTruthyObject(this.findOptions.relations):this.findOptions.relations;this.buildRelations(t,typeof this.findOptions.select=="object"?this.findOptions.select:void 0,this.expressionMap.mainAlias.metadata,this.expressionMap.mainAlias.name),this.findOptions.loadEagerRelations!==!1&&this.expressionMap.relationLoadStrategy==="join"&&this.buildEagerRelations(t,typeof this.findOptions.select=="object"?this.findOptions.select:void 0,this.expressionMap.mainAlias.metadata,this.expressionMap.mainAlias.name)}if(this.selects.length&&this.addSelect(this.selects),this.findOptions.where&&(this.conditions=this.buildWhere(this.findOptions.where,this.expressionMap.mainAlias.metadata,this.expressionMap.mainAlias.name),this.conditions.length&&this.andWhere(this.conditions.substr(0,1)!=="("?"("+this.conditions+")":this.conditions)),this.findOptions.order&&this.buildOrder(this.findOptions.order,this.expressionMap.mainAlias.metadata,this.expressionMap.mainAlias.name),this.joins.length&&this.joins.forEach(t=>{t.select&&!t.selection?t.type==="inner"?this.innerJoinAndSelect(`${t.parentAlias}.${t.relationMetadata.propertyPath}`,t.alias):this.leftJoinAndSelect(`${t.parentAlias}.${t.relationMetadata.propertyPath}`,t.alias):t.type==="inner"?this.innerJoin(`${t.parentAlias}.${t.relationMetadata.propertyPath}`,t.alias):this.leftJoin(`${t.parentAlias}.${t.relationMetadata.propertyPath}`,t.alias)}),this.findOptions.skip!==void 0&&this.skip(this.findOptions.skip),this.findOptions.take!==void 0&&this.take(this.findOptions.take),typeof this.findOptions.cache=="number"?this.cache(this.findOptions.cache):typeof this.findOptions.cache=="boolean"?this.cache(this.findOptions.cache):typeof this.findOptions.cache=="object"&&this.cache(this.findOptions.cache.id,this.findOptions.cache.milliseconds),this.findOptions.join&&(this.findOptions.join.leftJoin&&Object.keys(this.findOptions.join.leftJoin).forEach(t=>{this.leftJoin(this.findOptions.join.leftJoin[t],t)}),this.findOptions.join.innerJoin&&Object.keys(this.findOptions.join.innerJoin).forEach(t=>{this.innerJoin(this.findOptions.join.innerJoin[t],t)}),this.findOptions.join.leftJoinAndSelect&&Object.keys(this.findOptions.join.leftJoinAndSelect).forEach(t=>{this.leftJoinAndSelect(this.findOptions.join.leftJoinAndSelect[t],t)}),this.findOptions.join.innerJoinAndSelect&&Object.keys(this.findOptions.join.innerJoinAndSelect).forEach(t=>{this.innerJoinAndSelect(this.findOptions.join.innerJoinAndSelect[t],t)})),this.findOptions.lock){if(this.findOptions.lock.mode==="optimistic")this.setLock(this.findOptions.lock.mode,this.findOptions.lock.version);else if(this.findOptions.lock.mode==="pessimistic_read"||this.findOptions.lock.mode==="pessimistic_write"||this.findOptions.lock.mode==="dirty_read"||this.findOptions.lock.mode==="pessimistic_partial_write"||this.findOptions.lock.mode==="pessimistic_write_or_fail"||this.findOptions.lock.mode==="for_no_key_update"||this.findOptions.lock.mode==="for_key_share"){const t=this.findOptions.lock.tables?this.findOptions.lock.tables.map(n=>{const r=this.expressionMap.aliases.find(o=>o.metadata.tableNameWithoutPrefix===n);if(!r)throw new xe(`"${n}" is not part of this query`);return this.escape(r.name)}):void 0;this.setLock(this.findOptions.lock.mode,void 0,t),this.findOptions.lock.onLocked&&this.setOnLocked(this.findOptions.lock.onLocked)}}this.findOptions.loadRelationIds===!0?this.loadAllRelationIds():typeof this.findOptions.loadRelationIds=="object"&&this.loadAllRelationIds(this.findOptions.loadRelationIds),this.findOptions.loadEagerRelations!==!1&&hx.joinEagerRelations(this,this.expressionMap.mainAlias.name,this.expressionMap.mainAlias.metadata),this.findOptions.transaction===!0&&(this.expressionMap.useTransaction=!0)}}concatRelationMetadata(t){this.relationMetadatas.push(t)}async executeEntitiesAndRawResults(t){if(!this.expressionMap.mainAlias)throw new xe('Alias is not set. Use "from" method to set an alias.');if((this.expressionMap.lockMode==="pessimistic_read"||this.expressionMap.lockMode==="pessimistic_write"||this.expressionMap.lockMode==="pessimistic_partial_write"||this.expressionMap.lockMode==="pessimistic_write_or_fail"||this.expressionMap.lockMode==="for_no_key_update"||this.expressionMap.lockMode==="for_key_share")&&!t.isTransactionActive)throw new cne;if(this.expressionMap.lockMode==="optimistic"){const i=this.expressionMap.mainAlias.metadata;if(!i.versionColumn&&!i.updateDateColumn)throw new ane(i.name)}const n=new Tne(this.connection,t,this.expressionMap.relationIdAttributes),r=new Dne(this.connection,t,this.expressionMap.relationCountAttributes);new Ine(this.expressionMap).transform(),new Lne(this.expressionMap).transform();let o=[],a=[];if((this.expressionMap.skip||this.expressionMap.take)&&this.expressionMap.joinAttributes.length>0){const[i,s]=this.createOrderByCombinedWithSelectExpression("distinctAlias"),c=this.expressionMap.mainAlias.metadata,l=this.expressionMap.mainAlias.name,u=c.primaryColumns.map(p=>{const y=this.escape("distinctAlias"),m=this.escape(ye.buildAlias(this.connection.driver,void 0,l,p.databaseName));s[m]||(s[m]="ASC");const v=ye.buildAlias(this.connection.driver,void 0,"ids_"+l,p.databaseName);return`${y}.${m} AS ${this.escape(v)}`}),d=this.clone(),f=d.expressionMap.timeTravel;if(o=await new mx(this.connection,t).select(`DISTINCT ${u.join(", ")}`).addSelect(i).from(`(${d.orderBy().timeTravelQuery(!1).getQuery()})`,"distinctAlias").timeTravelQuery(f).offset(this.expressionMap.skip).limit(this.expressionMap.take).orderBy(s).cache(this.expressionMap.cache&&this.expressionMap.cacheId?`${this.expressionMap.cacheId}-pagination`:this.expressionMap.cache,this.expressionMap.cacheDuration).setParameters(this.getParameters()).setNativeParameters(this.expressionMap.nativeParameters).getRawMany(),o.length>0){let p="";const y={};if(c.hasMultiplePrimaryKeys)p=o.map((m,v)=>c.primaryColumns.map(b=>{const x=`orm_distinct_ids_${v}_${b.databaseName}`,_=ye.buildAlias(this.connection.driver,void 0,"ids_"+l,b.databaseName);return y[x]=m[_],`${l}.${b.propertyPath}=:${x}`}).join(" AND ")).join(" OR ");else{const m=ye.buildAlias(this.connection.driver,void 0,"ids_"+l,c.primaryColumns[0].databaseName),v=o.map(b=>b[m]);v.every(b=>typeof b=="number")?p=`${l}.${c.primaryColumns[0].propertyPath} IN (${v.join(", ")})`:(y.orm_distinct_ids=v,p=l+"."+c.primaryColumns[0].propertyPath+" IN (:...orm_distinct_ids)")}o=await this.clone().mergeExpressionMap({extraAppendedAndWhereCondition:p}).setParameters(y).loadRawResults(t)}}else o=await this.loadRawResults(t);if(o.length>0){const i=await n.load(o),s=await r.load(o);a=new Ane(this.expressionMap,this.connection.driver,i,s,this.queryRunner).transform(o,this.expressionMap.mainAlias),this.expressionMap.callListeners===!0&&this.expressionMap.mainAlias.hasMetadata&&await t.broadcaster.broadcast("Load",this.expressionMap.mainAlias.metadata,a)}if(this.expressionMap.relationLoadStrategy==="query"){const i=new Rne(this.connection,t);await Promise.all(this.relationMetadatas.map(async s=>{const c=s.inverseEntityMetadata.target,l=s.inverseEntityMetadata.targetName,u=Array.isArray(this.findOptions.select)?Qt.propertyPathsToTruthyObject(this.findOptions.select):this.findOptions.select,d=Array.isArray(this.findOptions.relations)?Qt.propertyPathsToTruthyObject(this.findOptions.relations):this.findOptions.relations,f=this.createQueryBuilder(t).select(l).from(c,l).setFindOptions({select:u?Qt.deepValue(u,s.propertyPath):void 0,order:this.findOptions.order?Qt.deepValue(this.findOptions.order,s.propertyPath):void 0,relations:d?Qt.deepValue(d,s.propertyPath):void 0,withDeleted:this.findOptions.withDeleted,relationLoadStrategy:this.findOptions.relationLoadStrategy});if(a.length>0){const p=await i.loadManyToManyRelationIdsAndGroup(s,a,void 0,f);a.forEach(y=>{const m=p.find(v=>v.entity===y);if(m){const v=m.related===void 0?null:m.related;s.setEntityValue(y,v)}})}}))}return{raw:o,entities:a}}createOrderByCombinedWithSelectExpression(t){const n=this.expressionMap.allOrderBys,r=Object.keys(n).map(a=>{if(a.indexOf(".")!==-1){const i=a.split("."),s=i[0],c=i.slice(1).join("."),l=this.expressionMap.findAliasByName(s).metadata.findColumnWithPropertyPath(c);return this.escape(t)+"."+this.escape(ye.buildAlias(this.connection.driver,void 0,s,l.databaseName))}else return this.expressionMap.selects.find(i=>i.selection===a||i.aliasName===a)?this.escape(t)+"."+this.escape(a):""}).join(", "),o={};return Object.keys(n).forEach(a=>{if(a.indexOf(".")!==-1){const i=a.split("."),s=i[0],c=i.slice(1).join("."),l=this.expressionMap.findAliasByName(s).metadata.findColumnWithPropertyPath(c);o[this.escape(t)+"."+this.escape(ye.buildAlias(this.connection.driver,void 0,s,l.databaseName))]=n[a]}else this.expressionMap.selects.find(i=>i.selection===a||i.aliasName===a)?o[this.escape(t)+"."+this.escape(a)]=n[a]:o[a]=n[a]}),[r,o]}async loadRawResults(t){const[n,r]=this.getQueryAndParameters(),o=n+" -- PARAMETERS: "+JSON.stringify(r,(u,d)=>typeof d=="bigint"?d.toString():d),a=typeof this.connection.options.cache=="object"?this.connection.options.cache:{};let i;const s=a.alwaysEnabled&&this.expressionMap.cache!==!1||this.expressionMap.cache===!0;let c=!1;if(this.connection.queryResultCache&&s)try{if(i=await this.connection.queryResultCache.getFromCache({identifier:this.expressionMap.cacheId,query:o,duration:this.expressionMap.cacheDuration||a.duration||1e3},t),i&&!this.connection.queryResultCache.isExpired(i))return JSON.parse(i.result)}catch(u){if(!a.ignoreErrors)throw u;c=!0}const l=await t.query(n,r,!0);if(!c&&this.connection.queryResultCache&&s)try{await this.connection.queryResultCache.storeInCache({identifier:this.expressionMap.cacheId,query:o,time:new Date().getTime(),duration:this.expressionMap.cacheDuration||a.duration||1e3,result:JSON.stringify(l.records)},i,t)}catch(u){if(!a.ignoreErrors)throw u}return l.records}mergeExpressionMap(t){return Dt.assign(this.expressionMap,t),this}normalizeNumber(t){return typeof t=="number"||t===void 0||t===null?t:Number(t)}obtainQueryRunner(){return this.queryRunner||this.connection.createQueryRunner(this.connection.defaultReplicationModeForReads())}buildSelect(t,n,r,o){for(let a in t){if(t[a]===void 0||t[a]===!1)continue;const i=o?o+"."+a:a,s=n.findColumnWithPropertyPathStrict(i),c=n.findEmbeddedWithPropertyPath(i),l=n.findRelationWithPropertyPath(i);if(!c&&!s&&!l)throw new Tr(i,n);s?this.selects.push(r+"."+i):c&&this.buildSelect(t[a],n,r,i)}}buildRelations(t,n,r,o,a){t&&Object.keys(t).forEach(i=>{const s=t[i],c=a?a+"."+i:i,l=r.findEmbeddedWithPropertyPath(c),u=r.findRelationWithPropertyPath(c);if(!l&&!u)throw new Tr(c,r);if(l)this.buildRelations(s,typeof n=="object"?Qt.deepValue(n,l.propertyPath):void 0,r,o,c);else if(u){let d=o+"_"+c.replace(".","_");d=ye.buildAlias(this.connection.driver,{joiner:"__"},o,d),(s===!0||typeof s=="object")&&(this.expressionMap.relationLoadStrategy==="query"?this.concatRelationMetadata(u):(this.joins.push({type:"left",select:!0,selection:n&&typeof n[i]=="object"?n[i]:void 0,alias:d,parentAlias:o,relationMetadata:u}),n&&typeof n[i]=="object"&&this.buildSelect(n[i],u.inverseEntityMetadata,d))),typeof s=="object"&&this.expressionMap.relationLoadStrategy==="join"&&this.buildRelations(s,typeof n=="object"?Qt.deepValue(n,u.propertyPath):void 0,u.inverseEntityMetadata,d,void 0)}})}buildEagerRelations(t,n,r,o,a){t&&Object.keys(t).forEach(i=>{const s=t[i],c=a?a+"."+i:i,l=r.findEmbeddedWithPropertyPath(c),u=r.findRelationWithPropertyPath(c);if(!l&&!u)throw new Tr(c,r);if(l)this.buildEagerRelations(s,typeof n=="object"?Qt.deepValue(n,l.propertyPath):void 0,r,o,c);else if(u){let d=o+"_"+c.replace(".","_");d=ye.buildAlias(this.connection.driver,{joiner:"__"},o,d),(s===!0||typeof s=="object")&&u.inverseEntityMetadata.eagerRelations.forEach(f=>{let p=d+"_"+f.propertyPath.replace(".","_");p=ye.buildAlias(this.connection.driver,{joiner:"__"},d,p),this.joins.find(y=>y.alias===p)||this.joins.push({type:"left",select:!0,alias:p,parentAlias:d,selection:void 0,relationMetadata:f}),n&&typeof n[i]=="object"&&this.buildSelect(n[i],u.inverseEntityMetadata,d)}),typeof s=="object"&&this.buildEagerRelations(s,typeof n=="object"?Qt.deepValue(n,u.propertyPath):void 0,u.inverseEntityMetadata,d,void 0)}})}buildOrder(t,n,r,o){for(let a in t){if(t[a]===void 0)continue;const i=o?o+"."+a:a,s=n.findColumnWithPropertyPathStrict(i),c=n.findEmbeddedWithPropertyPath(i),l=n.findRelationWithPropertyPath(i);if(!c&&!s&&!l)throw new Tr(i,n);if(s){let u=typeof t[a]=="object"?t[a].direction:t[a];u=u==="DESC"||u==="desc"||u===-1?"DESC":"ASC";let d=typeof t[a]=="object"?t[a].nulls:void 0;d=(d==null?void 0:d.toLowerCase())==="first"?"NULLS FIRST":(d==null?void 0:d.toLowerCase())==="last"?"NULLS LAST":void 0;let f=`${r}.${i}`;this.addOrderBy(f,u,d)}else if(c)this.buildOrder(t[a],n,r,i);else if(l){let u=r+"_"+i.replace(".","_");u=ye.buildAlias(this.connection.driver,{joiner:"__"},r,u),this.joins.find(d=>d.alias===u)||this.joins.push({type:"left",select:!1,alias:u,parentAlias:r,selection:void 0,relationMetadata:l}),this.buildOrder(t[a],l.inverseEntityMetadata,u)}}}buildWhere(t,n,r,o){let a="";if(Array.isArray(t))t.length&&(a=t.map(i=>this.buildWhere(i,n,r,o)).filter(i=>!!i).map(i=>"("+i+")").join(" OR "));else{let i=[];for(let s in t){if(t[s]===void 0||t[s]===null)continue;const c=o?o+"."+s:s,l=n.findColumnWithPropertyPathStrict(c),u=n.findEmbeddedWithPropertyPath(c),d=n.findRelationWithPropertyPath(c);if(!u&&!l&&!d)throw new Tr(c,n);if(l){let f=`${r}.${c}`;l.isVirtualProperty&&l.query&&(f=`(${l.query(r)})`);let p=t[s];pt.isEqualOperator(t[s])&&(p=t[s].value),l.transformer&&(p instanceof vl?p.transformValue(l.transformer):p=fx.transformTo(l.transformer,p)),i.push(this.createWhereConditionExpression(this.getWherePredicateCondition(f,p)))}else if(u){const f=this.buildWhere(t[s],n,r,c);f&&i.push(f)}else if(d){if(typeof t[s]=="object"&&Object.keys(t[s]).every(f=>t[s][f]===void 0))continue;if(pt.isFindOperator(t[s]))if(t[s].type==="moreThan"||t[s].type==="lessThan"||t[s].type==="moreThanOrEqual"||t[s].type==="lessThanOrEqual"){let f="";t[s].type==="moreThan"?f=">":t[s].type==="lessThan"?f="<":t[s].type==="moreThanOrEqual"?f=">=":t[s].type==="lessThanOrEqual"&&(f="<=");const p=this.subQuery();if(d.isManyToManyOwner)p.select("COUNT(*)").from(d.joinTableName,d.joinTableName).where(d.joinColumns.map(y=>`${d.joinTableName}.${y.propertyName} = ${r}.${y.referencedColumn.propertyName}`).join(" AND "));else if(d.isManyToManyNotOwner)p.select("COUNT(*)").from(d.inverseRelation.joinTableName,d.inverseRelation.joinTableName).where(d.inverseRelation.inverseJoinColumns.map(y=>`${d.inverseRelation.joinTableName}.${y.propertyName} = ${r}.${y.referencedColumn.propertyName}`).join(" AND "));else if(d.isOneToMany)p.select("COUNT(*)").from(d.inverseEntityMetadata.target,d.inverseEntityMetadata.tableName).where(d.inverseRelation.joinColumns.map(y=>`${d.inverseEntityMetadata.tableName}.${y.propertyName} = ${r}.${y.referencedColumn.propertyName}`).join(" AND "));else throw new Error("This relation isn't supported by given find operator");this.andWhere(p.getSql()+" "+f+" "+parseInt(t[s].value))}else if(d.isManyToOne||d.isOneToOne&&d.isOneToOneOwner){const f=`${r}.${c}`;i.push(this.createWhereConditionExpression(this.getWherePredicateCondition(f,t[s])))}else throw new Error("This relation isn't supported by given find operator");else{let f=r+"_"+d.propertyPath.replace(".","_");f=ye.buildAlias(this.connection.driver,{joiner:"__"},r,f),this.joins.find(y=>y.alias===f)||this.joins.push({type:"left",select:!1,selection:void 0,alias:f,parentAlias:r,relationMetadata:d});const p=this.buildWhere(t[s],d.inverseEntityMetadata,f);p&&i.push(p)}}}a=i.length?"("+i.join(") AND (")+")":i.join(" AND ")}return a.length?"("+a+")":a}}class jI{constructor(){this.generatedMaps=[]}static from(t){const n=new this;return n.raw=t.records,n.affected=t.affected,n}}class Fne extends Nt{constructor(t,n){super(t,n),this["@instanceof"]=Symbol.for("SoftDeleteQueryBuilder"),this.expressionMap.aliasNamePrefixingEnabled=!1}getQuery(){let t=this.createUpdateExpression();return t+=this.createCteExpression(),t+=this.createOrderByExpression(),t+=this.createLimitExpression(),this.replacePropertyNamesForTheWholeQuery(t.trim())}async execute(){const t=this.obtainQueryRunner();let n=!1;try{this.expressionMap.useTransaction===!0&&t.isTransactionActive===!1&&(await t.startTransaction(),n=!0),this.expressionMap.callListeners===!0&&this.expressionMap.mainAlias.hasMetadata&&(this.expressionMap.queryType==="soft-delete"?await t.broadcaster.broadcast("BeforeSoftRemove",this.expressionMap.mainAlias.metadata):this.expressionMap.queryType==="restore"&&await t.broadcaster.broadcast("BeforeRecover",this.expressionMap.mainAlias.metadata));const r=new px(t,this.expressionMap);this.expressionMap.updateEntity===!0&&this.expressionMap.mainAlias.hasMetadata&&this.expressionMap.whereEntities.length>0&&(this.expressionMap.extraReturningColumns=r.getSoftDeletionReturningColumns());const[o,a]=this.getQueryAndParameters(),i=await t.query(o,a,!0),s=jI.from(i);return this.expressionMap.updateEntity===!0&&this.expressionMap.mainAlias.hasMetadata&&this.expressionMap.whereEntities.length>0&&await r.update(s,this.expressionMap.whereEntities),this.expressionMap.callListeners===!0&&this.expressionMap.mainAlias.hasMetadata&&(this.expressionMap.queryType==="soft-delete"?await t.broadcaster.broadcast("AfterSoftRemove",this.expressionMap.mainAlias.metadata):this.expressionMap.queryType==="restore"&&await t.broadcaster.broadcast("AfterRecover",this.expressionMap.mainAlias.metadata)),n&&await t.commitTransaction(),s}catch(r){if(n)try{await t.rollbackTransaction()}catch{}throw r}finally{t!==this.queryRunner&&await t.release()}}from(t,n){t=pt.isEntitySchema(t)?t.options.name:t;const r=this.createFromAlias(t,n);return this.expressionMap.setMainAlias(r),this}where(t,n){this.expressionMap.wheres=[];const r=this.getWhereCondition(t);return r&&(this.expressionMap.wheres=[{type:"simple",condition:r}]),n&&this.setParameters(n),this}andWhere(t,n){return this.expressionMap.wheres.push({type:"and",condition:this.getWhereCondition(t)}),n&&this.setParameters(n),this}orWhere(t,n){return this.expressionMap.wheres.push({type:"or",condition:this.getWhereCondition(t)}),n&&this.setParameters(n),this}whereInIds(t){return this.where(this.getWhereInIdsCondition(t))}andWhereInIds(t){return this.andWhere(this.getWhereInIdsCondition(t))}orWhereInIds(t){return this.orWhere(this.getWhereInIdsCondition(t))}output(t){return this.returning(t)}returning(t){if(!this.connection.driver.isReturningSqlSupported("update"))throw new Ff;return this.expressionMap.returning=t,this}orderBy(t,n="ASC",r){return t?typeof t=="object"?this.expressionMap.orderBys=t:r?this.expressionMap.orderBys={[t]:{order:n,nulls:r}}:this.expressionMap.orderBys={[t]:n}:this.expressionMap.orderBys={},this}addOrderBy(t,n="ASC",r){return r?this.expressionMap.orderBys[t]={order:n,nulls:r}:this.expressionMap.orderBys[t]=n,this}limit(t){return this.expressionMap.limit=t,this}whereEntity(t){if(!this.expressionMap.mainAlias.hasMetadata)throw new xe(".whereEntity method can only be used on queries which update real entity table.");this.expressionMap.wheres=[];const n=Array.isArray(t)?t:[t];return n.forEach(r=>{const o=this.expressionMap.mainAlias.metadata.getEntityIdMap(r);if(!o)throw new xe("Provided entity does not have ids set, cannot perform operation.");this.orWhereInIds(o)}),this.expressionMap.whereEntities=n,this}updateEntity(t){return this.expressionMap.updateEntity=t,this}createUpdateExpression(){const t=this.expressionMap.mainAlias.hasMetadata?this.expressionMap.mainAlias.metadata:void 0;if(!t)throw new xe(`Cannot get entity metadata for the given alias "${this.expressionMap.mainAlias}"`);if(!t.deleteDateColumn)throw new one(t);const n=[];switch(this.expressionMap.queryType){case"soft-delete":n.push(this.escape(t.deleteDateColumn.databaseName)+" = CURRENT_TIMESTAMP");break;case"restore":n.push(this.escape(t.deleteDateColumn.databaseName)+" = NULL");break;default:throw new xe('The queryType must be "soft-delete" or "restore"')}if(t.versionColumn&&n.push(this.escape(t.versionColumn.databaseName)+" = "+this.escape(t.versionColumn.databaseName)+" + 1"),t.updateDateColumn&&n.push(this.escape(t.updateDateColumn.databaseName)+" = CURRENT_TIMESTAMP"),n.length<=0)throw new Gb;const r=this.createWhereExpression(),o=this.createReturningExpression("update");return o===""?`UPDATE ${this.getTableName(this.getMainTableName())} SET ${n.join(", ")}${r}`:this.connection.driver.options.type==="mssql"?`UPDATE ${this.getTableName(this.getMainTableName())} SET ${n.join(", ")} OUTPUT ${o}${r}`:`UPDATE ${this.getTableName(this.getMainTableName())} SET ${n.join(", ")}${r} RETURNING ${o}`}createOrderByExpression(){const t=this.expressionMap.orderBys;return Object.keys(t).length>0?" ORDER BY "+Object.keys(t).map(n=>typeof t[n]=="string"?this.replacePropertyNames(n)+" "+t[n]:this.replacePropertyNames(n)+" "+t[n].order+" "+t[n].nulls).join(", "):""}createLimitExpression(){let t=this.expressionMap.limit;if(t){if(ye.isMySQLFamily(this.connection.driver))return" LIMIT "+t;throw new nI}return""}}class Bne extends Nt{constructor(t,n){super(t,n),this["@instanceof"]=Symbol.for("UpdateQueryBuilder"),this.expressionMap.aliasNamePrefixingEnabled=!1}getQuery(){let t=this.createComment();return t+=this.createCteExpression(),t+=this.createUpdateExpression(),t+=this.createOrderByExpression(),t+=this.createLimitExpression(),this.replacePropertyNamesForTheWholeQuery(t.trim())}async execute(){const t=this.obtainQueryRunner();let n=!1;try{this.expressionMap.useTransaction===!0&&t.isTransactionActive===!1&&(await t.startTransaction(),n=!0),this.expressionMap.callListeners===!0&&this.expressionMap.mainAlias.hasMetadata&&await t.broadcaster.broadcast("BeforeUpdate",this.expressionMap.mainAlias.metadata,this.expressionMap.valuesSet);let r=null,o=null;const a=new px(t,this.expressionMap),i=[];if(Array.isArray(this.expressionMap.returning)&&this.expressionMap.mainAlias.hasMetadata)for(const f of this.expressionMap.returning)i.push(...this.expressionMap.mainAlias.metadata.findColumnsWithPropertyPath(f));this.expressionMap.updateEntity===!0&&this.expressionMap.mainAlias.hasMetadata&&this.expressionMap.whereEntities.length>0&&(this.expressionMap.extraReturningColumns=a.getUpdationReturningColumns(),i.push(...this.expressionMap.extraReturningColumns.filter(f=>!i.includes(f)))),i.length>0&&this.connection.driver.options.type==="mssql"&&(r=this.connection.driver.buildTableVariableDeclaration("@OutputTable",i),o="SELECT * FROM @OutputTable");const[s,c]=this.getQueryAndParameters(),l=[r,s,o],u=await t.query(l.filter(f=>f!=null).join(`;

`),c,!0),d=jI.from(u);return this.expressionMap.updateEntity===!0&&this.expressionMap.mainAlias.hasMetadata&&this.expressionMap.whereEntities.length>0&&await a.update(d,this.expressionMap.whereEntities),this.expressionMap.callListeners===!0&&this.expressionMap.mainAlias.hasMetadata&&await t.broadcaster.broadcast("AfterUpdate",this.expressionMap.mainAlias.metadata,this.expressionMap.valuesSet),n&&await t.commitTransaction(),d}catch(r){if(n)try{await t.rollbackTransaction()}catch{}throw r}finally{t!==this.queryRunner&&await t.release()}}set(t){return this.expressionMap.valuesSet=t,this}where(t,n){this.expressionMap.wheres=[];const r=this.getWhereCondition(t);return r&&(this.expressionMap.wheres=[{type:"simple",condition:r}]),n&&this.setParameters(n),this}andWhere(t,n){return this.expressionMap.wheres.push({type:"and",condition:this.getWhereCondition(t)}),n&&this.setParameters(n),this}orWhere(t,n){return this.expressionMap.wheres.push({type:"or",condition:this.getWhereCondition(t)}),n&&this.setParameters(n),this}whereInIds(t){return this.where(this.getWhereInIdsCondition(t))}andWhereInIds(t){return this.andWhere(this.getWhereInIdsCondition(t))}orWhereInIds(t){return this.orWhere(this.getWhereInIdsCondition(t))}output(t){return this.returning(t)}returning(t){if(!this.connection.driver.isReturningSqlSupported("update"))throw new Ff;return this.expressionMap.returning=t,this}orderBy(t,n="ASC",r){return t?typeof t=="object"?this.expressionMap.orderBys=t:r?this.expressionMap.orderBys={[t]:{order:n,nulls:r}}:this.expressionMap.orderBys={[t]:n}:this.expressionMap.orderBys={},this}addOrderBy(t,n="ASC",r){return r?this.expressionMap.orderBys[t]={order:n,nulls:r}:this.expressionMap.orderBys[t]=n,this}limit(t){return this.expressionMap.limit=t,this}whereEntity(t){if(!this.expressionMap.mainAlias.hasMetadata)throw new xe(".whereEntity method can only be used on queries which update real entity table.");this.expressionMap.wheres=[];const n=Array.isArray(t)?t:[t];return n.forEach(r=>{const o=this.expressionMap.mainAlias.metadata.getEntityIdMap(r);if(!o)throw new xe("Provided entity does not have ids set, cannot perform operation.");this.orWhereInIds(o)}),this.expressionMap.whereEntities=n,this}updateEntity(t){return this.expressionMap.updateEntity=t,this}createUpdateExpression(){const t=this.getValueSet(),n=this.expressionMap.mainAlias.hasMetadata?this.expressionMap.mainAlias.metadata:void 0,r={};for(let c in t)t[c]!==void 0&&(r[c]=t[c]);const o=[],a=[];if(n?(this.createPropertyPath(n,r).forEach(c=>{const l=n.findColumnsWithPropertyPath(c);if(l.length<=0)throw new Tr(c,n);l.forEach(u=>{if(!u.isUpdate||a.includes(u))return;a.push(u);let d=u.getEntityValue(r);if(u.referencedColumn&&typeof d=="object"&&!(d instanceof Date)&&d!==null&&!Bh.isBuffer(d)?d=u.referencedColumn.getEntityValue(d):typeof d!="function"&&(d=this.connection.driver.preparePersistentValue(d,u)),typeof d=="function")o.push(this.escape(u.databaseName)+" = "+d());else if((this.connection.driver.options.type==="sap"||this.connection.driver.options.type==="spanner")&&d===null)o.push(this.escape(u.databaseName)+" = NULL");else{this.connection.driver.options.type==="mssql"&&(d=this.connection.driver.parametrizeValue(u,d));const f=this.createParameter(d);let p=null;if((ye.isMySQLFamily(this.connection.driver)||this.connection.driver.options.type==="aurora-mysql")&&this.connection.driver.spatialTypes.indexOf(u.type)!==-1){const y=this.connection.driver.options.legacySpatialSupport?"GeomFromText":"ST_GeomFromText";u.srid!=null?p=`${y}(${f}, ${u.srid})`:p=`${y}(${f})`}else ye.isPostgresFamily(this.connection.driver)&&this.connection.driver.spatialTypes.indexOf(u.type)!==-1?u.srid!=null?p=`ST_SetSRID(ST_GeomFromGeoJSON(${f}), ${u.srid})::${u.type}`:p=`ST_GeomFromGeoJSON(${f})::${u.type}`:this.connection.driver.options.type==="mssql"&&this.connection.driver.spatialTypes.indexOf(u.type)!==-1?p=u.type+"::STGeomFromText("+f+", "+(u.srid||"0")+")":p=f;o.push(this.escape(u.databaseName)+" = "+p)}})}),(o.length>0||Object.keys(r).length===0)&&(n.versionColumn&&a.indexOf(n.versionColumn)===-1&&o.push(this.escape(n.versionColumn.databaseName)+" = "+this.escape(n.versionColumn.databaseName)+" + 1"),n.updateDateColumn&&a.indexOf(n.updateDateColumn)===-1&&o.push(this.escape(n.updateDateColumn.databaseName)+" = CURRENT_TIMESTAMP"))):Object.keys(r).map(c=>{let l=r[c];if(typeof l=="function")o.push(this.escape(c)+" = "+l());else if((this.connection.driver.options.type==="sap"||this.connection.driver.options.type==="spanner")&&l===null)o.push(this.escape(c)+" = NULL");else{const u=this.createParameter(l);o.push(this.escape(c)+" = "+u)}}),o.length<=0)throw new Gb;const i=this.createWhereExpression(),s=this.createReturningExpression("update");return s===""?`UPDATE ${this.getTableName(this.getMainTableName())} SET ${o.join(", ")}${i}`:this.connection.driver.options.type==="mssql"?`UPDATE ${this.getTableName(this.getMainTableName())} SET ${o.join(", ")} OUTPUT ${s}${i}`:`UPDATE ${this.getTableName(this.getMainTableName())} SET ${o.join(", ")}${i} RETURNING ${s}`}createOrderByExpression(){const t=this.expressionMap.orderBys;return Object.keys(t).length>0?" ORDER BY "+Object.keys(t).map(n=>typeof t[n]=="string"?this.replacePropertyNames(n)+" "+t[n]:this.replacePropertyNames(n)+" "+t[n].order+" "+t[n].nulls).join(", "):""}createLimitExpression(){let t=this.expressionMap.limit;if(t){if(ye.isMySQLFamily(this.connection.driver)||this.connection.driver.options.type==="aurora-mysql")return" LIMIT "+t;throw new nI}return""}getValueSet(){if(typeof this.expressionMap.valuesSet=="object")return this.expressionMap.valuesSet;throw new Gb}}function $ne(){Nt.registerQueryBuilderClass("DeleteQueryBuilder",e=>new jne(e)),Nt.registerQueryBuilderClass("InsertQueryBuilder",e=>new Nne(e)),Nt.registerQueryBuilderClass("RelationQueryBuilder",e=>new Pne(e)),Nt.registerQueryBuilderClass("SelectQueryBuilder",e=>new mx(e)),Nt.registerQueryBuilderClass("SoftDeleteQueryBuilder",e=>new Fne(e)),Nt.registerQueryBuilderClass("UpdateQueryBuilder",e=>new Bne(e))}var EI;(function(e){e.VIEW="VIEW",e.MATERIALIZED_VIEW="MATERIALIZED_VIEW",e.GENERATED_COLUMN="GENERATED_COLUMN"})(EI||(EI={}));var yx={exports:{}},gx,SI;function zne(){if(SI)return gx;SI=1;var e=1e3,t=e*60,n=t*60,r=n*24,o=r*7,a=r*365.25;gx=function(u,d){d=d||{};var f=typeof u;if(f==="string"&&u.length>0)return i(u);if(f==="number"&&isFinite(u))return d.long?c(u):s(u);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(u))};function i(u){if(u=String(u),!(u.length>100)){var d=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(u);if(d){var f=parseFloat(d[1]),p=(d[2]||"ms").toLowerCase();switch(p){case"years":case"year":case"yrs":case"yr":case"y":return f*a;case"weeks":case"week":case"w":return f*o;case"days":case"day":case"d":return f*r;case"hours":case"hour":case"hrs":case"hr":case"h":return f*n;case"minutes":case"minute":case"mins":case"min":case"m":return f*t;case"seconds":case"second":case"secs":case"sec":case"s":return f*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return f;default:return}}}}function s(u){var d=Math.abs(u);return d>=r?Math.round(u/r)+"d":d>=n?Math.round(u/n)+"h":d>=t?Math.round(u/t)+"m":d>=e?Math.round(u/e)+"s":u+"ms"}function c(u){var d=Math.abs(u);return d>=r?l(u,d,r,"day"):d>=n?l(u,d,n,"hour"):d>=t?l(u,d,t,"minute"):d>=e?l(u,d,e,"second"):u+" ms"}function l(u,d,f,p){var y=d>=f*1.5;return Math.round(u/f)+" "+p+(y?"s":"")}return gx}var vx,CI;function Vne(){if(CI)return vx;CI=1;function e(t){r.debug=r,r.default=r,r.coerce=l,r.disable=i,r.enable=a,r.enabled=s,r.humanize=zne(),r.destroy=u,Object.keys(t).forEach(d=>{r[d]=t[d]}),r.names=[],r.skips=[],r.formatters={};function n(d){let f=0;for(let p=0;p<d.length;p++)f=(f<<5)-f+d.charCodeAt(p),f|=0;return r.colors[Math.abs(f)%r.colors.length]}r.selectColor=n;function r(d){let f,p=null,y,m;function v(...b){if(!v.enabled)return;const x=v,_=Number(new Date),w=_-(f||_);x.diff=w,x.prev=f,x.curr=_,f=_,b[0]=r.coerce(b[0]),typeof b[0]!="string"&&b.unshift("%O");let j=0;b[0]=b[0].replace(/%([a-zA-Z%])/g,(E,S)=>{if(E==="%%")return"%";j++;const O=r.formatters[S];if(typeof O=="function"){const P=b[j];E=O.call(x,P),b.splice(j,1),j--}return E}),r.formatArgs.call(x,b),(x.log||r.log).apply(x,b)}return v.namespace=d,v.useColors=r.useColors(),v.color=r.selectColor(d),v.extend=o,v.destroy=r.destroy,Object.defineProperty(v,"enabled",{enumerable:!0,configurable:!1,get:()=>p!==null?p:(y!==r.namespaces&&(y=r.namespaces,m=r.enabled(d)),m),set:b=>{p=b}}),typeof r.init=="function"&&r.init(v),v}function o(d,f){const p=r(this.namespace+(typeof f>"u"?":":f)+d);return p.log=this.log,p}function a(d){r.save(d),r.namespaces=d,r.names=[],r.skips=[];let f;const p=(typeof d=="string"?d:"").split(/[\s,]+/),y=p.length;for(f=0;f<y;f++)p[f]&&(d=p[f].replace(/\*/g,".*?"),d[0]==="-"?r.skips.push(new RegExp("^"+d.slice(1)+"$")):r.names.push(new RegExp("^"+d+"$")))}function i(){const d=[...r.names.map(c),...r.skips.map(c).map(f=>"-"+f)].join(",");return r.enable(""),d}function s(d){if(d[d.length-1]==="*")return!0;let f,p;for(f=0,p=r.skips.length;f<p;f++)if(r.skips[f].test(d))return!1;for(f=0,p=r.names.length;f<p;f++)if(r.names[f].test(d))return!0;return!1}function c(d){return d.toString().substring(2,d.toString().length-2).replace(/\.\*\?$/,"*")}function l(d){return d instanceof Error?d.stack||d.message:d}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}return vx=e,vx}var OI;function Une(){return OI||(OI=1,function(e,t){var n={};t.formatArgs=o,t.save=a,t.load=i,t.useColors=r,t.storage=s(),t.destroy=(()=>{let l=!1;return()=>{l||(l=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function r(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let l;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(l=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(l[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function o(l){if(l[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+l[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const u="color: "+this.color;l.splice(1,0,u,"color: inherit");let d=0,f=0;l[0].replace(/%[a-zA-Z%]/g,p=>{p!=="%%"&&(d++,p==="%c"&&(f=d))}),l.splice(f,0,u)}t.log=console.debug||console.log||(()=>{});function a(l){try{l?t.storage.setItem("debug",l):t.storage.removeItem("debug")}catch{}}function i(){let l;try{l=t.storage.getItem("debug")}catch{}return!l&&typeof $9<"u"&&"env"in $9&&(l=n.DEBUG),l}function s(){try{return localStorage}catch{}}e.exports=Vne()(t);const{formatters:c}=e.exports;c.j=function(l){try{return JSON.stringify(l)}catch(u){return"[UnexpectedJSONParseError]: "+u.message}}}(yx,yx.exports)),yx.exports}Une(),$ne();const MI=(e,t)=>({id:e.id,type:e.node_type,position:{x:e.x||0,y:e.y||0},width:e.width||void 0,height:e.height||void 0,data:{loading:!1,flowNode:e,...t}}),Hne=e=>({id:e.id,target:e.target,source:e.target,targetHandle:e.targetHandle,sourceHandle:e.sourceHandle}),NI=e=>({id:e.id,source:e.source,target:e.target,targetHandle:e.targetHandle,sourceHandle:e.sourceHandle}),Wne=e=>e.filter(t=>"edgeId"in t?`${t.edgeId}`.startsWith("xy-edge__"):!1),bx=(e,t,n)=>{const r=[];return{changes:e.map(o=>{var c;const a=t.find(l=>o.id===l.id);a||r.push(o.id);const i=(c=n==null?void 0:n[o.source_type])==null?void 0:c.find(l=>(l==null?void 0:l.id)===o.source_id),s=MI(o,{...a==null?void 0:a.data,entity:i});return{type:a?"replace":"add",id:o.id,item:a?Lf({...a||{},data:void 0},Kc(s,Xc)):s}}),newIds:[]}},xx=(e,t)=>{const n=[],r=[],o=e.map(a=>{const i=t.find(s=>a.source===s.source&&a.target===s.target);return!i||i.id!==a.id?(i&&r.push(i.id),{type:"add",item:NI(a)}):(n.push(a.id),{type:"replace",item:NI(a)})});return t.forEach(a=>{n.includes(a.id)||r.push(a.id)}),{changes:o,updatedIds:n,deletedIds:r}},wx={width:440,height:360},$f={width:380,height:650},bl={[re.Toolbox]:"toolbox",[re.SessionInfo]:"session-info",[re.DefaultEmbeddingModel]:"default-embedding-model",[re.ApplicationBar]:"application-bar"},qne={id:bl[re.Toolbox],type:re.Toolbox,position:{x:10+$f.width+20,y:10},measured:wx,data:{}},Yne={id:bl[re.SessionInfo],type:re.SessionInfo,position:{x:10,y:10},measured:$f,data:{}},Kne={id:bl[re.DefaultEmbeddingModel],type:re.DefaultEmbeddingModel,position:{x:10+$f.width+wx.width+40,y:10},data:{model:cwe}},Xne={id:bl[re.ApplicationBar],type:re.ApplicationBar,position:{x:10+$f.width+wx.width+40,y:80},data:{}},Qne=[qne,Yne,Kne,Xne],Jne=[re.Toolbox,re.SessionInfo,re.ApplicationBar,re.EditorApp,re.CodeContainerApp],kI={flowNodes:[],flowEdges:[],ready:!0,flowEdgeLoading:!1,flowNodeLoading:!1,syncedNodes:[],syncedEdges:[],syncNodeQueue:[],syncEdgeQueue:[],edges:[],nodes:Qne},_x=async e=>{const t=await ce("FlowNode").find(e),n=t.reduce((o,a)=>{var i;return o[a.source_type]||(o[a.source_type]=[]),(i=o[a.source_type])==null||i.push(a),o},{}),r={};return await Promise.all(Object.entries(n).map(async([o,a])=>{const i=o;r[i]=await ce(i).find({where:{id:mr(a.map(s=>s.source_id))}})})),{flowNodes:t,entityGroups:n,flowNodeDatas:r}},Gne=(e,t)=>({reset:()=>{e(kI)},setNodes:n=>{if(typeof n=="function"){e({nodes:n(t().nodes)});return}e({nodes:n})},setEdges:n=>{if(typeof n=="function"){e({edges:n(t().edges)});return}e({edges:n})},updateNodes:n=>{const r=t().nodes;e({nodes:Na(n,r)})},updateEdges:n=>{const r=t().edges;e({edges:ml(n,r)})},addConnectionToEdges:n=>{const r=t().edges;e({edges:jT(n,r)})},flowNodesToNodes:(n,r={})=>{const o=t().nodes,{changes:a}=bx(n,o,r);e({nodes:Na(a,o)})},flowEdgesToEdges:n=>{const r=t().edges,{changes:o,updatedIds:a,deletedIds:i}=xx(n,r);r.forEach(s=>{a.includes(s.id)||i.push(s.id)}),i.forEach(s=>{o.push({type:"remove",id:s})}),e({edges:ml(o,r)})},getNodes:n=>t().nodes.filter(r=>n.includes(r.id)),removeSyncNodeQueue:n=>{const{syncNodeQueue:r}=t();for(const o of n){const a=r.findIndex(i=>i.timestamp===o);a>-1&&r.splice(a,1)}e({syncNodeQueue:r})},removeSyncEdgeQueue:n=>{const{syncEdgeQueue:r}=t();for(const o of n){const a=r.findIndex(i=>i.timestamp===o);a>-1&&r.splice(a,1)}e({syncEdgeQueue:r})},pushSyncNodeQueue:(n,r)=>{const{syncNodeQueue:o}=t();e({syncNodeQueue:[...o,{query:r,timestamp:Date.now(),syncType:n}]})},pushSyncEdgeQueue:()=>{const{syncEdgeQueue:n}=t();e({syncEdgeQueue:[...n,{timestamp:Date.now()}]})},findFlowNodesWithSource:async(n,r)=>{try{e({flowNodeLoading:!0});const{flowNodes:o,flowNodeDatas:a}=await _x(n);if(r!=null&&r.clean)e({flowNodes:o,nodes:o.map(i=>{var c;const s=(c=a==null?void 0:a[i.source_type])==null?void 0:c.find(l=>l.id===i.source_id);return MI(i,{data:s})})});else{const i=t().flowNodes,s=o.map(u=>u.id),c=t().nodes,{changes:l}=bx(o,c,a);e({flowNodes:[...i.filter(u=>!s.includes(u.id)),...o],nodes:Na(l,c)})}return o}finally{e({flowNodeLoading:!1})}},findFlowEdges:async(n,r)=>{try{e({flowEdgeLoading:!0});const o=await ce("FlowEdge").find(n),a=t().flowEdges,i=o.map(s=>s.id);if(r!=null&&r.clean)e({flowEdges:o,edges:o.map(s=>Hne(s))});else{const s=t().edges,{changes:c}=xx(o,s);e({flowEdges:[...a.filter(l=>!i.includes(l.id)),...o],edges:ml(c,s)})}return o}finally{e({flowEdgeLoading:!1})}},deleteFlowNode:async n=>{try{if(!n.id&&!n.source_type&&!n.source_id)throw new Error("Missing flow node indentify");const r=await ce("FlowNode").findOne({where:n.id?{id:n.id}:{source_type:n.source_type,source_id:n.source_id}});if(r){await ce("FlowNode").delete(r.id);const o=t().flowNodes;r.source_type&&r.source_id&&await ce(r.source_type).delete(r.source_id).catch(i=>{Er("Failed to delete source entity",r.source_type,r.source_id,i)});const a=t().nodes;e({flowNodes:o.filter(i=>i.id!==r.id),nodes:Na([{type:"remove",id:r.id}],a)})}}catch(r){Er("Failed to delete flow node",r)}},deleteFlowEdge:async n=>{try{if(!n.id&&!n.source&&!n.target)throw new Error("Missing flow edge indentify");const r=await ce("FlowEdge").findOne({where:n.id?{id:n.id}:{source:n.source,target:n.target}});if(r){await ce("FlowEdge").delete(r.id);const o=t().flowEdges;e({flowEdges:o.filter(a=>a.id!==r.id)})}}catch(r){Er("Failed to delete flow edge",r)}},updateFlowNode:async(n,r)=>{var o;try{if(!((o=ot.getState().currentSession)!=null&&o.id))throw new Error("Session not found");if(!n.id)throw new Error("Missing flow node indentify");await ce("FlowNode").update(n.id,n);const a=t().flowNodes.map(i=>i.id===n.id?{...i,...n}:i);e({flowNodes:r!=null&&r.silent?a:[...a]})}catch(a){Er("Failed to create or update flow node",a,n)}},createOrUpdateFlowNode:async(n,r)=>{var o;try{const a=ot.getState().currentSession;if(!(a!=null&&a.id))throw new Error("Session not found");if(!n.id&&(!n.source_type||!n.source_id))throw new Error("Missing flow node indentify");let i,s=n!=null&&n.id?t().flowNodes.find(p=>p.id===n.id):void 0;if(!s&&(n.id||n.source_type&&n.source_id)&&(s=await ce("FlowNode").findOne({where:n.id?{id:n.id}:{source_type:n.source_type,source_id:n.source_id}})),s)i=Lf(s,Kc(n,Xc)),r!=null&&r.lazy?ce("FlowNode").update(s.id,i):await ce("FlowNode").update(s.id,i);else if(n.source_id&&n.source_type)i={...n,source_id:`${n.source_id}`,source_type:`${n.source_type}`,node_type:n.node_type||"NEW_MESSAGE",session_id:n.session_id||(a==null?void 0:a.id)},r!=null&&r.lazy?(i.id=Iu(),ce("FlowNode").save(i)):i=await ce("FlowNode").save(i);else throw new Error("Missing source id and type");let c;const l=t().nodes.find(p=>p.id===i.id);i.source_type&&!l?c=await ce(i.source_type).findOne({where:{id:n.source_id}}):i.source_type&&l&&(c=(o=l==null?void 0:l.data)==null?void 0:o.entity);const u=t().flowNodes,d=t().nodes,{changes:f}=bx([i],d,{[i.source_type]:[c]});return e({flowNodes:[...u.filter(p=>p.id!==i.id),i],nodes:Na(f,d)}),i}catch(a){Er("Failed to create or update flow node",a,n)}},createOrUpdateFlowEdge:async(n,r)=>{try{const o=ot.getState().currentSession;if(!(o!=null&&o.id))throw new Error("Session not found");if(!n.id&&(!n.source||!n.target))throw new Error("Missing flow node indentify");let a,i=n!=null&&n.id?t().flowEdges.find(l=>l.id===n.id):void 0;if(i&&(n.id||n.source&&n.target)&&(i=await ce("FlowEdge").findOne({where:n.id?{id:n.id}:{source:n.source,target:n.target}})),i)a=Lf(i,Kc(n,Xc)),r!=null&&r.lazy?ce("FlowEdge").update(i.id,a):await ce("FlowEdge").update(i.id,a);else if(n.source&&n.target)a={...n,source:`${n.source}`,target:`${n.target}`,session_id:n.session_id||(o==null?void 0:o.id)},r!=null&&r.lazy?(a.id=Iu(),ce("FlowEdge").save(a)):a=await ce("FlowEdge").save(a);else throw new Error("Missing source and target");const s=t().flowEdges,c=t().edges;return e({flowEdges:[...s.filter(l=>l.id!==a.id),a],edges:ml(xx([a],c).changes,c)}),a}catch(o){Er("Failed to create or update flow node",o)}}}),Zne=()=>{var x;const[e,t]=g.useState(),[n,r]=g.useState(),[o,a]=g.useState(),[i,s]=g.useState(),c=g.useRef(),l=g.useRef({}),u=ot(_=>_.currentSession),d=an(_=>_.loadModel),f=g.useCallback(async _=>{var j;if(!u)return;const w=await ce("JSONData").findOne({where:{id:_.source_id,session_id:u==null?void 0:u.id}});w&&((j=c.current)==null||j.call(c,w.data?w.data:[]),s({node:_,enity:w}))},[u]),p=g.useCallback(async _=>{var M;const w=(_==null?void 0:_.sessionId)||(u==null?void 0:u.id),j=(_==null?void 0:_.threadNode)||(n==null?void 0:n.threadNode),E=(_==null?void 0:_.prompts)||(e==null?void 0:e.prompts);if(!w||!(j!=null&&j.id))return;const S=E==null?void 0:E.map(k=>{if(k.type!=="few_shot_example")switch(k.role){case"ai":case"assistant":case"tool":return{id:k.id,content:k.content,role:"assistant"};case"system":return{id:k.id,content:k.content,role:"system"};default:return{id:k.id,content:k.content,role:"user"}}}).filter(Boolean),O=await ce("JSONData").save({headers:"item",session_id:w,json:"",data:S});if(!O)return;const P=await ce("FlowNode").save({session_id:w,source_id:O.id,source_type:"JSONData",node_type:"JSON_DATA",x:0,y:0});if(P)return await ce("FlowEdge").save({session_id:w,source:j.id,target:P.id}),(M=c.current)==null||M.call(c,S),s({node:P,enity:O}),{jsonData:O,jsonDataNode:P}},[e==null?void 0:e.prompts,u==null?void 0:u.id,n==null?void 0:n.threadNode]),y=g.useCallback(async()=>{try{if(l.current.handling=u==null?void 0:u.id,!(u!=null&&u.id)||!(u!=null&&u.main_source_id)||(u==null?void 0:u.main_source_type)!=="Thread")return;const[_,w]=await Promise.all([ce("Thread").findOne({where:{id:u.main_source_id,session_id:u.id}}),ce("FlowNode").findOne({where:{id:u.main_node_id}})]);if(!_||!w)return;const j=await ce("FlowEdge").find({where:{session_id:u.id,target:w.id}}),{flowNodes:E,flowNodeDatas:S}=await _x({where:{session_id:u.id,id:mr(j.map(C=>C.source))}}),O=(await ce("FlowEdge").find({where:{session_id:u.id}})).filter(C=>C.target===w.id).map(C=>{var T;const N=E.find(I=>I.id===C.source);return{connection:C,source:N,entity:(T=S==null?void 0:S[N.source_type])==null?void 0:T.find(I=>I.id===N.source_id)}}),P=O.find(C=>C.source.source_type==="LLM"),M=O.filter(C=>C.source.source_type==="Prompt"),k=O.find(C=>C.source.source_type==="Schema");if(!(P!=null&&P.entity))return;const R=await ce("FlowEdge").findOne({where:{session_id:u.id,source:w.id},order:{id:"DESC"}});if(R){const C=await ce("FlowNode").findOne({where:{id:R.target,session_id:u.id}});if(!C)return;await f(C)}else if(!await p({sessionId:u.id,threadNode:w,prompts:(M==null?void 0:M.map(C=>C.entity))||[]}))return;a({llm:P.entity,status:Ze.Started,progress:""}),r({thread:_,threadNode:w});const A=k==null?void 0:k.entity;if(A){const C=await ce("SchemaItem").find({where:{schema_id:A.id}});A.schema_items=C||[]}t({prompts:(M==null?void 0:M.map(C=>C.entity))||[],schema:A}),l.current.handled=u.id}finally{l.current.handling=void 0}},[p,u==null?void 0:u.id,u==null?void 0:u.main_node_id,u==null?void 0:u.main_source_id,u==null?void 0:u.main_source_type,f]),m=g.useCallback(async()=>{if(o!=null&&o.llm.name)try{a(_=>_&&{..._,status:Ze.Loading}),await d(o==null?void 0:o.llm.name,_=>{a(w=>w&&{...w,progress:_.text})}),a(_=>_&&{..._,status:Ze.Loaded,progress:""})}catch{a(_=>_&&{..._,status:Ze.Started,progress:""})}},[(x=o==null?void 0:o.llm)==null?void 0:x.name,d]),v=g.useCallback(_=>(c.current=_,()=>{c.current=void 0}),[]),b=g.useCallback(async _=>{!(i!=null&&i.node)||!(i!=null&&i.enity)||await ce("JSONData").save({...i.enity,data:_})},[i==null?void 0:i.enity,i==null?void 0:i.node]);return g.useEffect(()=>{l.current.handling||(l==null?void 0:l.current.handled)===(u==null?void 0:u.id)||y()},[u==null?void 0:u.id,y]),{...e,loadLLM:m,threadInfo:n,mainLLMInfo:o,currentDataNode:i,updateMessagesData:b,addNewDataNode:p,selectDataNode:f,onThreadMessagesLoaded:v}};class ere extends lwe{get lc_attributes(){return{partialVariables:void 0}}constructor(t){super(t),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompts",this._getPromptType()]}),Object.defineProperty(this,"inputVariables",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputParser",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"partialVariables",{enumerable:!0,configurable:!0,writable:!0,value:void 0});const{inputVariables:n}=t;if(n.includes("stop"))throw new Error("Cannot have an input variable named 'stop', as it is used internally, please rename.");Object.assign(this,t)}async mergePartialAndUserVariables(t){const n=this.partialVariables??{},r={};for(const[o,a]of Object.entries(n))typeof a=="string"?r[o]=a:r[o]=await a();return{...r,...t}}async invoke(t,n){return this._callWithConfig(r=>this.formatPromptValue(r),t,{...n,runType:"prompt"})}serialize(){throw new Error("Use .toJSON() instead")}static async deserialize(t){switch(t._type){case"prompt":{const{PromptTemplate:n}=await At(async()=>{const{PromptTemplate:r}=await Promise.resolve().then(()=>Cx);return{PromptTemplate:r}},[]);return n.deserialize(t)}case void 0:{const{PromptTemplate:n}=await At(async()=>{const{PromptTemplate:r}=await Promise.resolve().then(()=>Cx);return{PromptTemplate:r}},void 0);return n.deserialize({...t,_type:"prompt"})}case"few_shot":{const{FewShotPromptTemplate:n}=await At(async()=>{const{FewShotPromptTemplate:r}=await import("./few_shot-D7f7wj7_.js").then(async o=>(await o.__tla,o));return{FewShotPromptTemplate:r}},__vite__mapDeps([0,1,2,3,4,5,6]));return n.deserialize(t)}default:throw new Error(`Invalid prompt type in config: ${t._type}`)}}}class tre extends uwe{}class nre extends tre{static lc_name(){return"StringPromptValue"}constructor(t){super({value:t}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompt_values"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.value=t}toString(){return this.value}toChatMessages(){return[new Du(this.value)]}}cS=class extends ere{async formatPromptValue(e){const t=await this.format(e);return new nre(t)}};var rre=Object.prototype.toString,es=Array.isArray||function(e){return rre.call(e)==="[object Array]"};function jx(e){return typeof e=="function"}function ore(e){return es(e)?"array":typeof e}function Ex(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function PI(e,t){return e!=null&&typeof e=="object"&&t in e}function are(e,t){return e!=null&&typeof e!="object"&&e.hasOwnProperty&&e.hasOwnProperty(t)}var ire=RegExp.prototype.test;function sre(e,t){return ire.call(e,t)}var cre=/\S/;function lre(e){return!sre(cre,e)}var ure={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function dre(e){return String(e).replace(/[&<>"'`=\/]/g,function(t){return ure[t]})}var fre=/\s*/,pre=/\s+/,AI=/\s*=/,hre=/\s*\}/,mre=/#|\^|\/|>|\{|&|=|!/;function yre(e,t){if(!e)return[];var n=!1,r=[],o=[],a=[],i=!1,s=!1,c="",l=0;function u(){if(i&&!s)for(;a.length;)delete o[a.pop()];else a=[];i=!1,s=!1}var d,f,p;function y(O){if(typeof O=="string"&&(O=O.split(pre,2)),!es(O)||O.length!==2)throw new Error("Invalid tags: "+O);d=new RegExp(Ex(O[0])+"\\s*"),f=new RegExp("\\s*"+Ex(O[1])),p=new RegExp("\\s*"+Ex("}"+O[1]))}y(t||_n.tags);for(var m=new xl(e),v,b,x,_,w,j;!m.eos();){if(v=m.pos,x=m.scanUntil(d),x)for(var E=0,S=x.length;E<S;++E)_=x.charAt(E),lre(_)?(a.push(o.length),c+=_):(s=!0,n=!0,c+=" "),o.push(["text",_,v,v+1]),v+=1,_===`
`&&(u(),c="",l=0,n=!1);if(!m.scan(d))break;if(i=!0,b=m.scan(mre)||"name",m.scan(fre),b==="="?(x=m.scanUntil(AI),m.scan(AI),m.scanUntil(f)):b==="{"?(x=m.scanUntil(p),m.scan(hre),m.scanUntil(f),b="&"):x=m.scanUntil(f),!m.scan(f))throw new Error("Unclosed tag at "+m.pos);if(b==">"?w=[b,x,v,m.pos,c,l,n]:w=[b,x,v,m.pos],l++,o.push(w),b==="#"||b==="^")r.push(w);else if(b==="/"){if(j=r.pop(),!j)throw new Error('Unopened section "'+x+'" at '+v);if(j[1]!==x)throw new Error('Unclosed section "'+j[1]+'" at '+v)}else b==="name"||b==="{"||b==="&"?s=!0:b==="="&&y(x)}if(u(),j=r.pop(),j)throw new Error('Unclosed section "'+j[1]+'" at '+m.pos);return vre(gre(o))}function gre(e){for(var t=[],n,r,o=0,a=e.length;o<a;++o)n=e[o],n&&(n[0]==="text"&&r&&r[0]==="text"?(r[1]+=n[1],r[3]=n[3]):(t.push(n),r=n));return t}function vre(e){for(var t=[],n=t,r=[],o,a,i=0,s=e.length;i<s;++i)switch(o=e[i],o[0]){case"#":case"^":n.push(o),r.push(o),n=o[4]=[];break;case"/":a=r.pop(),a[5]=o[2],n=r.length>0?r[r.length-1][4]:t;break;default:n.push(o)}return t}function xl(e){this.string=e,this.tail=e,this.pos=0}xl.prototype.eos=function(){return this.tail===""},xl.prototype.scan=function(e){var t=this.tail.match(e);if(!t||t.index!==0)return"";var n=t[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n},xl.prototype.scanUntil=function(e){var t=this.tail.search(e),n;switch(t){case-1:n=this.tail,this.tail="";break;case 0:n="";break;default:n=this.tail.substring(0,t),this.tail=this.tail.substring(t)}return this.pos+=n.length,n};function ts(e,t){this.view=e,this.cache={".":this.view},this.parent=t}ts.prototype.push=function(e){return new ts(e,this)},ts.prototype.lookup=function(e){var t=this.cache,n;if(t.hasOwnProperty(e))n=t[e];else{for(var r=this,o,a,i,s=!1;r;){if(e.indexOf(".")>0)for(o=r.view,a=e.split("."),i=0;o!=null&&i<a.length;)i===a.length-1&&(s=PI(o,a[i])||are(o,a[i])),o=o[a[i++]];else o=r.view[e],s=PI(r.view,e);if(s){n=o;break}r=r.parent}t[e]=n}return jx(n)&&(n=n.call(this.view)),n};function pn(){this.templateCache={_cache:{},set:function(e,t){this._cache[e]=t},get:function(e){return this._cache[e]},clear:function(){this._cache={}}}}pn.prototype.clearCache=function(){typeof this.templateCache<"u"&&this.templateCache.clear()},pn.prototype.parse=function(e,t){var n=this.templateCache,r=e+":"+(t||_n.tags).join(":"),o=typeof n<"u",a=o?n.get(r):void 0;return a==null&&(a=yre(e,t),o&&n.set(r,a)),a},pn.prototype.render=function(e,t,n,r){var o=this.getConfigTags(r),a=this.parse(e,o),i=t instanceof ts?t:new ts(t,void 0);return this.renderTokens(a,i,n,e,r)},pn.prototype.renderTokens=function(e,t,n,r,o){for(var a="",i,s,c,l=0,u=e.length;l<u;++l)c=void 0,i=e[l],s=i[0],s==="#"?c=this.renderSection(i,t,n,r,o):s==="^"?c=this.renderInverted(i,t,n,r,o):s===">"?c=this.renderPartial(i,t,n,o):s==="&"?c=this.unescapedValue(i,t):s==="name"?c=this.escapedValue(i,t,o):s==="text"&&(c=this.rawValue(i)),c!==void 0&&(a+=c);return a},pn.prototype.renderSection=function(e,t,n,r,o){var a=this,i="",s=t.lookup(e[1]);function c(d){return a.render(d,t,n,o)}if(s){if(es(s))for(var l=0,u=s.length;l<u;++l)i+=this.renderTokens(e[4],t.push(s[l]),n,r,o);else if(typeof s=="object"||typeof s=="string"||typeof s=="number")i+=this.renderTokens(e[4],t.push(s),n,r,o);else if(jx(s)){if(typeof r!="string")throw new Error("Cannot use higher-order sections without the original template");s=s.call(t.view,r.slice(e[3],e[5]),c),s!=null&&(i+=s)}else i+=this.renderTokens(e[4],t,n,r,o);return i}},pn.prototype.renderInverted=function(e,t,n,r,o){var a=t.lookup(e[1]);if(!a||es(a)&&a.length===0)return this.renderTokens(e[4],t,n,r,o)},pn.prototype.indentPartial=function(e,t,n){for(var r=t.replace(/[^ \t]/g,""),o=e.split(`
`),a=0;a<o.length;a++)o[a].length&&(a>0||!n)&&(o[a]=r+o[a]);return o.join(`
`)},pn.prototype.renderPartial=function(e,t,n,r){if(n){var o=this.getConfigTags(r),a=jx(n)?n(e[1]):n[e[1]];if(a!=null){var i=e[6],s=e[5],c=e[4],l=a;s==0&&c&&(l=this.indentPartial(a,c,i));var u=this.parse(l,o);return this.renderTokens(u,t,n,l,r)}}},pn.prototype.unescapedValue=function(e,t){var n=t.lookup(e[1]);if(n!=null)return n},pn.prototype.escapedValue=function(e,t,n){var r=this.getConfigEscape(n)||_n.escape,o=t.lookup(e[1]);if(o!=null)return typeof o=="number"&&r===_n.escape?String(o):r(o)},pn.prototype.rawValue=function(e){return e[1]},pn.prototype.getConfigTags=function(e){return es(e)?e:e&&typeof e=="object"?e.tags:void 0},pn.prototype.getConfigEscape=function(e){if(e&&typeof e=="object"&&!es(e))return e.escape};var _n={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(e){wl.templateCache=e},get templateCache(){return wl.templateCache}},wl=new pn;_n.clearCache=function(){return wl.clearCache()},_n.parse=function(e,t){return wl.parse(e,t)},_n.render=function(e,t,n,r){if(typeof e!="string")throw new TypeError('Invalid template! Template should be a "string" but "'+ore(e)+'" was given as the first argument for mustache#render(template, view, partials)');return wl.render(e,t,n,r)},_n.escape=dre,_n.Scanner=xl,_n.Context=ts,_n.Writer=pn;function TI(){_n.escape=e=>e}let Sx,RI,II,DI,LI,zf,FI,BI;Sx=e=>{const t=e.split(""),n=[],r=(a,i)=>{for(let s=i;s<t.length;s+=1)if(a.includes(t[s]))return s;return-1};let o=0;for(;o<t.length;)if(t[o]==="{"&&o+1<t.length&&t[o+1]==="{")n.push({type:"literal",text:"{"}),o+=2;else if(t[o]==="}"&&o+1<t.length&&t[o+1]==="}")n.push({type:"literal",text:"}"}),o+=2;else if(t[o]==="{"){const a=r("}",o);if(a<0)throw new Error("Unclosed '{' in template.");n.push({type:"variable",name:t.slice(o+1,a).join("")}),o=a+1}else{if(t[o]==="}")throw new Error("Single '}' in template.");{const a=r("{}",o),i=(a<0?t.slice(o):t.slice(o,a)).join("");n.push({type:"literal",text:i}),o=a<0?t.length:a}}return n},RI=e=>e.map(t=>t[0]==="name"?{type:"variable",name:t[1].includes(".")?t[1].split(".")[0]:t[1]}:["#","&","^",">"].includes(t[0])?{type:"variable",name:t[1]}:{type:"literal",text:t[1]}),II=e=>{TI();const t=_n.parse(e);return RI(t)},DI=(e,t)=>Sx(e).reduce((n,r)=>{if(r.type==="variable"){if(r.name in t)return n+t[r.name];throw new Error(`(f-string) Missing value for input ${r.name}`)}return n+r.text},""),LI=(e,t)=>(TI(),_n.render(e,t)),zf={"f-string":DI,mustache:LI},FI={"f-string":Sx,mustache:II},ci=(e,t,n)=>zf[t](e,n),BI=(e,t)=>FI[t](e),lS=(e,t,n)=>{if(!(t in zf)){const r=Object.keys(zf);throw new Error(`Invalid template format. Got \`${t}\`;
                         should be one of ${r}`)}try{const r=n.reduce((o,a)=>(o[a]="foo",o),{});Array.isArray(e)?e.forEach(o=>{if(o.type==="text")ci(o.text,t,r);else if(o.type==="image_url")if(typeof o.image_url=="string")ci(o.image_url,t,r);else{const a=o.image_url.url;ci(a,t,r)}else throw new Error(`Invalid message template received. ${JSON.stringify(o,null,2)}`)}):ci(e,t,r)}catch(r){throw new Error(`Invalid prompt schema: ${r.message}`)}},ma=class extends cS{static lc_name(){return"PromptTemplate"}constructor(e){if(super(e),Object.defineProperty(this,"template",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"templateFormat",{enumerable:!0,configurable:!0,writable:!0,value:"f-string"}),Object.defineProperty(this,"validateTemplate",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"additionalContentFields",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e.templateFormat==="mustache"&&e.validateTemplate===void 0&&(this.validateTemplate=!1),Object.assign(this,e),this.validateTemplate){if(this.templateFormat==="mustache")throw new Error("Mustache templates cannot be validated.");let t=this.inputVariables;this.partialVariables&&(t=t.concat(Object.keys(this.partialVariables))),lS(this.template,this.templateFormat,t)}}_getPromptType(){return"prompt"}async format(e){const t=await this.mergePartialAndUserVariables(e);return ci(this.template,this.templateFormat,t)}static fromExamples(e,t,n,r=`

`,o=""){const a=[o,...e,t].join(r);return new ma({inputVariables:n,template:a})}static fromTemplate(e,t){const{templateFormat:n="f-string",...r}=t??{},o=new Set;return BI(e,n).forEach(a=>{a.type==="variable"&&o.add(a.name)}),new ma({inputVariables:[...o],templateFormat:n,template:e,...r})}async partial(e){const t=this.inputVariables.filter(o=>!(o in e)),n={...this.partialVariables??{},...e},r={...this,inputVariables:t,partialVariables:n};return new ma(r)}serialize(){if(this.outputParser!==void 0)throw new Error("Cannot serialize a prompt template with an output parser");return{_type:this._getPromptType(),input_variables:this.inputVariables,template:this.template,template_format:this.templateFormat}}static async deserialize(e){if(!e.template)throw new Error("Prompt template must have a template");return new ma({inputVariables:e.input_variables,template:e.template,templateFormat:e.template_format})}};let Cx,Ox,$I,zI,VI,Mx,UI,HI,WI,qI,YI,KI,XI,QI,JI,GI,Ir,Vf,ns,Tt;Cx=Object.freeze(Object.defineProperty({__proto__:null,PromptTemplate:ma},Symbol.toStringTag,{value:"Module"})),Ox=e=>e?e.reduce((t,n)=>{var a,i,s,c,l;const r=(a=n.node.data)==null?void 0:a.entity,o=(c=(s=(i=n==null?void 0:n.connectedNodes)==null?void 0:i.find(u=>u.type===re.Schema))==null?void 0:s.data)==null?void 0:c.entity;return r&&((l=o==null?void 0:o.schema_items)!=null&&l.length)&&t.push({name:r.name,description:r.description,schemaItems:o.schema_items}),t},[]):[],$I=()=>{const[e]=g.useState(!1),t=Lu(a=>a.similaritySearchWithScore),{stream:n}=Wm(),r=g.useCallback(async(a,i)=>{const{placeholders:s}=i||{};if(!(s!=null&&s.length))return[];const c=[];return await Promise.all(s.map(async l=>{var d,f,p,y,m,v;const u=(d=l.node.data)==null?void 0:d.entity;if(u)switch(u.placeholder_type){case di.VECTOR_DATABASE_RETREIVER:{const b=(f=l.connectedNodes)==null?void 0:f.find(_=>_.type===re.VectorDatabase),x=(p=b==null?void 0:b.data)==null?void 0:p.entity;return(v=(m=(y=l.connectedNodes)==null?void 0:y.find(_=>_.type===re.Prompt))==null?void 0:m.data)!=null&&v.entity,void 0}}})),c},[t]),o=g.useCallback(async(a,i,s,c,{schema:l,onMessageUpdate:u})=>{const{tools:d,placeholders:f}=s||{},p=[];f!=null&&f.length&&p.push(...await r(a,s));const y=i.map(v=>v.role==="system"?new z9(v.content):v.role==="user"?new Du(v.content):new $h(v.content)),{content:m}=await n(y,{tools:Ox(d),schemas:l?[l]:void 0,onMessageUpdate:({content:v})=>{u==null||u({nodeData:{loading:!0,content:v}})}});return u==null||u({nodeData:{content:m}}),m},[r,n]);return{loading:e,sendMessage:o}},zI=oi(({onDelete:e})=>{const{t}=ke("dialogs"),[n,r]=g.useState(!1),o=sn(),{toast:a}=Ht(),i=async()=>{try{r(!0),await e(),o.hide()}catch{a({variant:"destructive",description:t("delete_chat_data_node.errors.delete_failed")})}finally{r(!1)}};return h.jsx(vM,{open:o.visible,onOpenChange:o.hide,children:h.jsxs(Gy,{children:[h.jsxs(Zy,{children:[h.jsx(tg,{children:t("delete_chat_data_node.title")}),h.jsx(ng,{children:t("delete_chat_data_node.description")})]}),h.jsxs(eg,{children:[h.jsx(og,{onClick:o.hide,children:t("delete_chat_data_node.cancel")}),h.jsx(rg,{disabled:n,onClick:i,children:t("delete_chat_data_node.delete")})]})]})})}),Nn=g.memo(e=>{const{loading:t,...n}=e;return h.jsx(ft,{...n,disabled:e.disabled||t,children:t?h.jsx(de,{name:"loader-circle",className:"animate-spin"}):e.children})}),VI=e=>{const t=(n,r=null)=>{let o=`{
`;return n.filter(a=>a.parent_id===r).forEach(a=>{if(a.type==="object"){const i=e.filter(c=>c.parent_id===a.id),s=t(i,a.id);o+=`  ${a.name}${a.required?"":"?"}: ${s}
`}else o+=`  // ${a.description||""}
  ${a.name}${a.required?"":"?"}: ${a.type};
`}),o+="}",o};return t(e)},Mx=e=>{const t=(r,o=null)=>{let a="";return r.filter(i=>i.parent_id===o).forEach(i=>{if(i.type==="object"){const s=t(r,i.id);a+=`    ${i.name}: z.object({
${s}    })${i.required?"":".optional()"}.describe('${i.description||""}'),
`}else a+=`    ${i.name}: z.${i.type}()${i.required?"":".optional()"}.describe('${i.description||""}'),
`}),a};let n=`const schema = z.object({
`;return n+=t(e),n+="});",n},UI=e=>g.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",fill:"none",height:192,viewBox:"0 0 150 150",width:192,...e},g.createElement("clipPath",{id:"a"},g.createElement("path",{d:"m0 0h150v150h-150z"})),g.createElement("g",{clipPath:"url(#a)"},g.createElement("path",{d:"m150 0h-150v150h150z",fill:"#29b5e8"}),g.createElement("path",{clipRule:"evenodd",d:"m130.375 67.2532-14.096 8.1221 14.096 8.0536c.843.4872 1.581 1.1357 2.174 1.9084.592.7727 1.026 1.6545 1.278 2.5951.251.9406.315 1.9215.188 2.8867-.128.9652-.444 1.8959-.931 2.7388-.488.843-1.136 1.5817-1.909 2.174s-1.654 1.0267-2.595 1.2782-1.921.3154-2.887.1878c-.965-.1275-1.896-.444-2.739-.9312l-25.2559-14.5496c-1.1575-.6696-2.1128-1.6394-2.765-2.8068-.6523-1.1674-.9773-2.4893-.9408-3.826.0198-.5792.1089-1.1538.2653-1.7117.517-1.8711 1.7458-3.4654 3.4234-4.4419l25.256-14.4983c.847-.4892 1.782-.8067 2.751-.9343.97-.1275 1.955-.0627 2.899.1909.945.2536 1.83.6909 2.605 1.287.775.596 1.425 1.3391 1.913 2.1866.49.8402.808 1.7693.935 2.7334.128.964.063 1.9439-.191 2.8826-.254.9388-.692 1.8177-1.288 2.5859-.597.7681-1.34 1.4101-2.186 1.8887zm-13.343 39.3698-25.2478-14.5243c-1.1296-.6483-2.4091-.9896-3.7115-.9902s-2.5823.3397-3.7124.987c-1.1301.6472-2.0712 1.579-2.7297 2.7026-.6585 1.1237-1.0115 2.4001-1.0239 3.7024v29.0135c.0654 1.928.8772 3.755 2.264 5.095 1.3869 1.341 3.2403 2.09 5.1691 2.09 1.9289 0 3.7823-.749 5.1691-2.09 1.3868-1.34 2.1986-3.167 2.264-5.095v-16.261l14.1301 8.122c.843.488 1.774.805 2.739.933.966.128 1.947.064 2.888-.187s1.823-.685 2.596-1.277c.774-.592 1.423-1.331 1.91-2.174.488-.843.805-1.773.933-2.739.128-.965.065-1.946-.186-2.887s-.685-1.824-1.277-2.597-1.331-1.422-2.174-1.91zm-29.0992-28.3806-10.527 10.3986c-.3601.3349-.8269.5319-1.318.5563h-3.0897c-.49-.0294-.9551-.2257-1.318-.5563l-10.4671-10.4329c-.3274-.3573-.521-.817-.5478-1.3009v-3.081c.0283-.4861.2215-.9481.5478-1.3095l10.4671-10.4329c.3637-.3281.829-.5214 1.318-.5477h3.0897c.4899.0228.9562.2166 1.318.5477l10.4928 10.4329c.3237.3623.514.8243.5392 1.3095v3.081c-.0237.483-.2143.9428-.5392 1.3009zm-8.3874-2.8928c-.0404-.499-.2485-.9696-.5905-1.3352l-3.0383-3.004c-.3641-.3275-.8291-.5207-1.318-.5478h-.1113c-.4867.0255-.9495.2191-1.3094.5478l-3.0383 3.004c-.3262.3676-.5165.8358-.5392 1.3266v.1113c.0215.4834.2124.9439.5392 1.3009l3.0554 2.9955c.3607.3274.823.5208 1.3094.5477h.1113c.4889-.027.9539-.2203 1.318-.5477l3.0383-3.0212c.3282-.3576.5244-.8166.5563-1.3009zm-47.4914-31.2217 25.2563 14.4811c1.1308.648 2.4115.989 3.7149.9889 1.3033 0 2.584-.3409 3.7148-.989 1.1309-.648 2.0725-1.5806 2.7314-2.7051.659-1.1245 1.0123-2.4018 1.0249-3.7051v-28.9879c-.0654-1.9277-.8772-3.7546-2.264-5.0952s-3.2402-2.0899-5.1691-2.0899c-1.9288 0-3.7822.7493-5.169 2.0899-1.3869 1.3406-2.1987 3.1675-2.2641 5.0952v16.2613l-14.1473-8.1307c-.8429-.4877-1.7737-.8047-2.7392-.9328-.9654-.1281-1.9466-.0647-2.8876.1864s-1.8232.6852-2.5965 1.2773c-.7732.5921-1.4222 1.3307-1.91 2.1736-.4878.843-.8048 1.7738-.9329 2.7392-.128.9655-.0647 1.9467.1864 2.8876.2512.941.6852 1.8233 1.2773 2.5965.5921.7733 1.3307 1.4223 2.1737 1.9101zm55.4252 15.4739c1.4914.118 2.9836-.2193 4.2793-.9671l25.2475-14.5496c.843-.4877 1.582-1.1368 2.174-1.91s1.026-1.6555 1.277-2.5965.315-1.9222.187-2.8876c-.128-.9655-.445-1.8962-.933-2.7392-.488-.8429-1.137-1.5816-1.91-2.1737-.774-.5921-1.656-1.0261-2.597-1.2772-1.9-.5072-3.924-.2387-5.627.7464l-14.1298 8.1991v-16.2613c-.0654-1.9277-.8772-3.7546-2.264-5.0952-1.3868-1.3405-3.2402-2.0899-5.1691-2.0899-1.9288 0-3.7822.7494-5.169 2.0899-1.3869 1.3406-2.1987 3.1675-2.2641 5.0952v29.0136c-.0023 1.8784.7086 3.6876 1.9892 5.0619 1.2805 1.3743 3.0351 2.2111 4.909 2.3412zm-25.8554 31.5298c-1.4916-.1213-2.9847.2162-4.2793.9671l-25.2905 14.4893c-1.7024.985-2.9438 2.607-3.451 4.507s-.2387 3.924.7465 5.627c.9851 1.702 2.6061 2.943 4.5065 3.451 1.9004.507 3.9244.238 5.6268-.747l14.1473-8.122v16.261c.0654 1.928.8772 3.755 2.2641 5.096 1.3868 1.34 3.2402 2.09 5.169 2.09 1.9289 0 3.7823-.75 5.1691-2.09 1.3868-1.341 2.1986-3.168 2.264-5.096v-29.0645c-.0038-1.869-.7144-3.6673-1.9891-5.0341s-3.0192-2.2009-4.8834-2.3348zm-6.8468-13.5825c.4875-1.6032.414-3.3247-.2083-4.8806-.6224-1.5559-1.7564-2.8532-3.2152-3.6779l-25.2306-14.541c-1.704-.976-3.7248-1.2385-5.6216-.7303-1.8968.5083-3.5155 1.7461-4.5032 3.4433-.4889.84-.8065 1.7686-.9343 2.732-.1278.9635-.0632 1.9428.1899 2.8811.2531.9384.6897 1.8173 1.2846 2.5858.595.7686 1.3364 1.4115 2.1814 1.8917l14.096 8.1221-14.096 8.0536c-.8429.4861-1.5819 1.1334-2.1746 1.9051-.5928.7717-1.0277 1.6526-1.2801 2.5923-.2523.9398-.317 1.9201-.1905 2.8849s.4418 1.8952.9279 2.7382c.4861.8429 1.1335 1.5819 1.9051 2.1746.7717.5928 1.6526 1.0277 2.5924 1.2801.9397.2523 1.92.317 2.8848.1905s1.8952-.4418 2.7382-.9279l25.2306-14.5496c1.6248-.9071 2.8451-2.3965 3.4149-4.168z",fill:"#fff",fillRule:"evenodd"}))),HI=e=>g.createElement("svg",{className:"mr-2 w-5 h-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",width:48,height:48,...e},g.createElement("path",{fill:"#fbc02d",d:"M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12 s5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24s8.955,20,20,20 s20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"}),g.createElement("path",{fill:"#e53935",d:"M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039 l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"}),g.createElement("path",{fill:"#4caf50",d:"M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36 c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"}),g.createElement("path",{fill:"#1565c0",d:"M43.611,20.083L43.595,20L42,20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571 c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z"})),WI=e=>g.createElement("svg",{className:"mr-2 w-5 h-5",width:1024,height:1024,viewBox:"0 0 1024 1024",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},g.createElement("path",{d:"M44.522 44.5217H489.739V489.739H44.522V44.5217Z",fill:"#F35325"}),g.createElement("path",{d:"M534.261 44.5217H979.478V489.739H534.261V44.5217Z",fill:"#81BC06"}),g.createElement("path",{d:"M44.522 534.261H489.739V979.478H44.522V534.261Z",fill:"#05A6F0"}),g.createElement("path",{d:"M534.261 534.261H979.478V979.478H534.261V534.261Z",fill:"#FFBA08"})),qI=e=>g.createElement("svg",{id:"Layer_1","data-name":"Layer 1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 287.56 191",...e},g.createElement("defs",null,g.createElement("style",null,".cls-1{fill:#0081fb;}.cls-2{fill:url(#linear-gradient);}.cls-3{fill:url(#linear-gradient-2);}"),g.createElement("linearGradient",{id:"linear-gradient",x1:62.34,y1:101.45,x2:260.34,y2:91.45,gradientTransform:"matrix(1, 0, 0, -1, 0, 192)",gradientUnits:"userSpaceOnUse"},g.createElement("stop",{offset:0,stopColor:"#0064e1"}),g.createElement("stop",{offset:.4,stopColor:"#0064e1"}),g.createElement("stop",{offset:.83,stopColor:"#0073ee"}),g.createElement("stop",{offset:1,stopColor:"#0082fb"})),g.createElement("linearGradient",{id:"linear-gradient-2",x1:41.42,y1:53,x2:41.42,y2:126,gradientTransform:"matrix(1, 0, 0, -1, 0, 192)",gradientUnits:"userSpaceOnUse"},g.createElement("stop",{offset:0,stopColor:"#0082fb"}),g.createElement("stop",{offset:1,stopColor:"#0064e0"}))),g.createElement("title",null,"facebook-meta"),g.createElement("path",{className:"cls-1",d:"M31.06,126c0,11,2.41,19.41,5.56,24.51A19,19,0,0,0,53.19,160c8.1,0,15.51-2,29.79-21.76,11.44-15.83,24.92-38,34-52l15.36-23.6c10.67-16.39,23-34.61,37.18-47C181.07,5.6,193.54,0,206.09,0c21.07,0,41.14,12.21,56.5,35.11,16.81,25.08,25,56.67,25,89.27,0,19.38-3.82,33.62-10.32,44.87C271,180.13,258.72,191,238.13,191V160c17.63,0,22-16.2,22-34.74,0-26.42-6.16-55.74-19.73-76.69-9.63-14.86-22.11-23.94-35.84-23.94-14.85,0-26.8,11.2-40.23,31.17-7.14,10.61-14.47,23.54-22.7,38.13l-9.06,16c-18.2,32.27-22.81,39.62-31.91,51.75C84.74,183,71.12,191,53.19,191c-21.27,0-34.72-9.21-43-23.09C3.34,156.6,0,141.76,0,124.85Z"}),g.createElement("path",{className:"cls-2",d:"M24.49,37.3C38.73,15.35,59.28,0,82.85,0c13.65,0,27.22,4,41.39,15.61,15.5,12.65,32,33.48,52.63,67.81l7.39,12.32c17.84,29.72,28,45,33.93,52.22,7.64,9.26,13,12,19.94,12,17.63,0,22-16.2,22-34.74l27.4-.86c0,19.38-3.82,33.62-10.32,44.87C271,180.13,258.72,191,238.13,191c-12.8,0-24.14-2.78-36.68-14.61-9.64-9.08-20.91-25.21-29.58-39.71L146.08,93.6c-12.94-21.62-24.81-37.74-31.68-45C107,40.71,97.51,31.23,82.35,31.23c-12.27,0-22.69,8.61-31.41,21.78Z"}),g.createElement("path",{className:"cls-3",d:"M82.35,31.23c-12.27,0-22.69,8.61-31.41,21.78C38.61,71.62,31.06,99.34,31.06,126c0,11,2.41,19.41,5.56,24.51L10.14,167.91C3.34,156.6,0,141.76,0,124.85,0,94.1,8.44,62.05,24.49,37.3,38.73,15.35,59.28,0,82.85,0Z"})),YI=e=>g.createElement("svg",{className:"mr-2 w-5 h-5",width:256,height:233,viewBox:"0 0 256 233",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},g.createElement("path",{d:"M186.182 0h46.545v46.545h-46.545z"}),g.createElement("path",{fill:"#f7d046",d:"M209.455 0H256v46.545h-46.545z"}),g.createElement("path",{d:"M0 0h46.545v46.545H0zm0 46.545h46.545V93.09H0zm0 46.546h46.545v46.545H0zm0 46.545h46.545v46.545H0zm0 46.546h46.545v46.545H0z"}),g.createElement("path",{fill:"#f7d046",d:"M23.273 0h46.545v46.545H23.273z"}),g.createElement("path",{fill:"#f2a73b",d:"M209.455 46.545H256V93.09h-46.545zm-186.182 0h46.545V93.09H23.273z"}),g.createElement("path",{d:"M139.636 46.545h46.545V93.09h-46.545z"}),g.createElement("path",{fill:"#f2a73b",d:"M162.909 46.545h46.545V93.09h-46.545zm-93.091 0h46.545V93.09H69.818z"}),g.createElement("path",{fill:"#ee792f",d:"M116.364 93.091h46.545v46.545h-46.545zm46.545 0h46.545v46.545h-46.545zm-93.091 0h46.545v46.545H69.818z"}),g.createElement("path",{d:"M93.091 139.636h46.545v46.545H93.091z"}),g.createElement("path",{fill:"#eb5829",d:"M116.364 139.636h46.545v46.545h-46.545z"}),g.createElement("path",{fill:"#ee792f",d:"M209.455 93.091H256v46.545h-46.545zm-186.182 0h46.545v46.545H23.273z"}),g.createElement("path",{d:"M186.182 139.636h46.545v46.545h-46.545z"}),g.createElement("path",{fill:"#eb5829",d:"M209.455 139.636H256v46.545h-46.545z"}),g.createElement("path",{d:"M186.182 186.182h46.545v46.545h-46.545z"}),g.createElement("path",{fill:"#eb5829",d:"M23.273 139.636h46.545v46.545H23.273z"}),g.createElement("path",{fill:"#ea3326",d:"M209.455 186.182H256v46.545h-46.545zm-186.182 0h46.545v46.545H23.273z"})),KI="/NoLLMChat/assets/qwen-B-gSh3_v.webp",XI="/NoLLMChat/assets/smollm-CikBjd4F.png",QI="/NoLLMChat/assets/stablelm-BquePdQ7.png",JI="/NoLLMChat/assets/nomic-BjJqoFji.webp",GI="/NoLLMChat/assets/joshua-ByaReJuI.webp",Ir=g.memo(({name:e,className:t,...n})=>(e=e.toLowerCase(),e.includes("gemma")?h.jsx(HI,{className:K("w-5 h-5",t),...n}):e!=null&&e.includes("qwen")?h.jsx("img",{className:K("w-5 h-5",t),src:KI,alt:"qwen",...n}):e!=null&&e.includes("phi")?h.jsx(WI,{className:K("w-5 h-5",t),...n}):e!=null&&e.includes("llama")?h.jsx(qI,{className:K("w-5 h-5",t),...n}):e!=null&&e.includes("smollm")?h.jsx("img",{className:K("w-5 h-5",t),src:XI,alt:"smollm",...n}):e!=null&&e.includes("mistral")?h.jsx(YI,{className:K("w-5 h-5",t),...n}):e!=null&&e.includes("snowflake")?h.jsx(UI,{className:K("w-5 h-5 rounded-full",t),...n}):e!=null&&e.includes("stablelm")?h.jsx("img",{className:K("w-5 h-5 rounded-full",t),src:QI,alt:"stablelm",...n}):e!=null&&e.includes("nomic")?h.jsx("img",{className:K("w-5 h-5 rounded-full",t),src:JI,alt:"nomic",...n}):e!=null&&e.includes("Xenova")||e!=null&&e.includes("janus")?h.jsx("img",{className:K("w-5 h-5 rounded-full",t),src:GI,alt:"Xenova",...n}):h.jsx(de,{className:K("w-5 h-5",t),name:"brain"}))),Vf=["Qwen2.5-1.5B-Instruct-q4f32_1-MLC","Qwen2.5-Coder-1.5B-Instruct-q4f16_1-MLC","stablelm-2-zephyr-1_6b-q4f16_1-MLC-1k","Phi-3.5-mini-instruct-q4f16_1-MLC-1k","Llama-3.2-3B-Instruct-q4f32_1-MLC"],ns=g.memo(e=>{var s;const{name:t,model:n,isCached:r,isFunctionCalling:o}=e,{t:a}=ke("atoms"),i=g.useCallback(c=>c===1?"llm_info.model_types.embedding":c===2?"llm_info.model_types.vlm":"llm_info.model_types.llm",[]);if(n)return h.jsxs(h.Fragment,{children:[h.jsx(en,{className:"",children:a(i(n.model_type))}),Vf.some(c=>t&&c.includes(t))?h.jsx(en,{className:"",variant:"outline",children:a("llm_info.recommended")}):null,r?h.jsx(en,{className:"",variant:"outline",children:a("llm_info.cached")}):null,o?h.jsx(en,{className:"",variant:"outline",children:a("llm_info.function_calling")}):null,n!=null&&n.low_resource_required?h.jsx(en,{className:"",variant:"outline",children:a("llm_info.low_resource_required")}):null,(s=n==null?void 0:n.overrides)!=null&&s.context_window_size?h.jsxs(en,{className:"",variant:"outline",children:[n.overrides.context_window_size.toLocaleString("en-US")," Tokens"]}):null,n!=null&&n.vram_required_MB?h.jsxs(en,{className:"",variant:"outline",children:["VRAM: ",n.vram_required_MB.toLocaleString("en-US")," MB"]}):null]})}),Tt=g.forwardRef(({className:e,...t},n)=>h.jsx("div",{ref:n,className:K("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t})),Tt.displayName="Card";const hn=g.forwardRef(({className:e,...t},n)=>h.jsx("div",{ref:n,className:K("flex flex-col space-y-1.5 p-6",e),...t}));hn.displayName="CardHeader";const jn=g.forwardRef(({className:e,...t},n)=>h.jsx("h3",{ref:n,className:K("text-2xl font-semibold leading-none tracking-tight",e),...t}));jn.displayName="CardTitle";const ZI=g.forwardRef(({className:e,...t},n)=>h.jsx("p",{ref:n,className:K("text-sm text-muted-foreground",e),...t}));ZI.displayName="CardDescription";const mn=g.forwardRef(({className:e,...t},n)=>h.jsx("div",{ref:n,className:K("p-6 pt-0",e),...t}));mn.displayName="CardContent";const Xo=g.forwardRef(({className:e,...t},n)=>h.jsx("div",{ref:n,className:K("flex items-center p-6 pt-0",e),...t}));Xo.displayName="CardFooter";const bre=g.memo(({llm:e,status:t,loadLLM:n,progress:r})=>{const{t:o}=ke("flows"),[a,i]=g.useState();g.useEffect(()=>{a||!(e!=null&&e.name)||At(()=>import("./index-CsUvhQqZ.js").then(async l=>(await l.__tla,l)),__vite__mapDeps([7,1,2,3,4,5,6])).then(async({hasModelInCache:l,functionCallingModelIds:u,prebuiltAppConfig:d})=>{const f=await l(e==null?void 0:e.name);i({hasCache:f,isFunctionCalling:u.includes(e==null?void 0:e.name),info:d.model_list.find(p=>p.model_id===(e==null?void 0:e.name))})})},[e==null?void 0:e.name,a]);const s=g.useCallback(async()=>{await(n==null?void 0:n())},[n]),c=g.useMemo(()=>{switch(t){case Ze.Downloading:return h.jsx(de,{className:"animate-spin w-7 h-7",name:"arrow-big-down-dash"});case Ze.Loaded:return h.jsx(Ir,{name:(e==null?void 0:e.name)||"brain",className:"w-7 h-7"});default:return h.jsx(Ir,{name:(e==null?void 0:e.name)||"brain",className:"w-7 h-7"})}},[e==null?void 0:e.name,t]);return h.jsx(Tt,{className:"flex justify-center !bg-inherit !p-2 max-w-full overflow-y-hidden !mb-2 m-2 !mt-0",children:h.jsxs("div",{className:"ml-2 pt-1 max-w-full",children:[h.jsxs("p",{className:"flex gap-2 items-center pr-6 !text-sm font-semibold",children:[c,`${(e==null?void 0:e.name)||""}`]}),h.jsxs("div",{className:"max-w-full mt-2 flex-wrap flex gap-1",children:[h.jsx(ns,{model:a==null?void 0:a.info,isFunctionCalling:(a==null?void 0:a.isFunctionCalling)||!1,name:e==null?void 0:e.name,isCached:(a==null?void 0:a.hasCache)||!1}),t!==Ze.Loaded?r?h.jsx("div",{className:"text-sm break-words flex-wrap",children:r}):h.jsx(ft,{disabled:t===Ze.Loading,onClick:s,className:"mt-4 w-full",children:o(a!=null&&a.hasCache?"llm_node.load_model_button":"llm_node.download_model_button")}):void 0]})]})})}),xre=e=>{const[t,n]=g.useState([]),r=ot(i=>i.currentSession),o=g.useCallback(async()=>{if(!e||!(r!=null&&r.id))return;const i=await ce("FlowEdge").find({where:{session_id:r.id,source:e.id},order:{id:"DESC"}}),{flowNodes:s,flowNodeDatas:c}=await _x({where:{session_id:r.id,id:mr(i.map(l=>l.target)),source_type:"JSONData"},order:{updated_at:"DESC"},select:["id","source_id","source_type","updated_at"]});n(s.reduce((l,u)=>{var f;const d=(f=c[u.source_type])==null?void 0:f.find(p=>p.id===u.source_id);return d&&l.push({node:u,entity:d}),l},[]))},[r==null?void 0:r.id,e]),a=g.useCallback(async i=>{await ce("FlowNode").delete(i.id),await ce("JSONData").delete(i.source_id);const s=await ce("FlowEdge").find({where:[{source:i.id},{target:i.id}]});await Promise.all(s.map(c=>ce("FlowEdge").delete(c.id))),o()},[o]);return g.useEffect(()=>{e&&o()},[o,e]),{chatList:t,deleteChat:a,getChatList:o}},wre=g.lazy(()=>At(()=>import("./index-C-EaPLZA.js").then(async e=>(await e.__tla,e)),__vite__mapDeps([8,9,1,2,10,11])));function _re({schema:e,mainLLMInfo:t,loadLLM:n,threadNode:r,onSelectThread:o,onAddNewThread:a,currentDataNode:i,...s}){var b,x;const{t:c}=ke("applications"),[l,u]=g.useState(!1),d=sn(zI),{chatList:f,getChatList:p,deleteChat:y}=xre(r),m=g.useCallback(async()=>{try{u(!0),await(a==null?void 0:a()),p()}finally{u(!1)}},[p,a]),v=g.useCallback(async(_,w)=>{_.stopPropagation(),d.show({onDelete:()=>y(w)})},[y,d]);return h.jsxs(qy,{variant:"sidebar",side:"right",collapsible:"none",...s,children:[h.jsx("div",{className:"h-1"}),h.jsxs(Nc,{className:"justify-between",children:[h.jsx("div",{className:"text-sm pl-2",children:c("chat.history")}),h.jsx(Nn,{loading:l,onClick:m,variant:"link",className:"mr-[-6px]",children:h.jsx(de,{name:"circle-plus"})})]}),h.jsxs(Ky,{children:[h.jsx(Mc,{className:"flex-1",children:h.jsx(Ci,{children:f.map(({node:_},w)=>{var j;return h.jsx(eo,{onClick:()=>o(_),children:h.jsx(to,{className:"cursor-pointer",children:h.jsxs("div",{className:"flex flex-row justify-between items-center w-full",children:[h.jsxs("div",{className:"flex gap-2",children:[h.jsx(de,{size:16,name:((j=i==null?void 0:i.node)==null?void 0:j.id)===_.id?"check":"chevron-right",className:"ml-auto transition-transform duration-200 group-data-[state=open]/collapsible:rotate-90"}),h.jsx("span",{children:`Thread ${w+1}`})]}),h.jsx(de,{onClick:E=>v(E,_),size:16,name:"trash-2"})]})})},_.id)})})}),(b=e==null?void 0:e.schema_items)!=null&&b.length?h.jsx("div",{className:"m-2 !mb-0",children:h.jsx(g.Suspense,{fallback:h.jsx(Id,{}),children:h.jsx(wre,{className:K("overflow-hidden break-words whitespace-pre-wrap w-full rounded-lg"),source:(x=e==null?void 0:e.schema_items)!=null&&x.length?`\`\`\`javascript
${Mx((e==null?void 0:e.schema_items)||[])}
\`\`\``:""})})}):void 0,h.jsx(bre,{llm:t==null?void 0:t.llm,status:t==null?void 0:t.status,progress:t==null?void 0:t.progress,loadLLM:n})]})]})}const jre=g.lazy(()=>At(()=>import("./index-C-EaPLZA.js").then(async e=>(await e.__tla,e)),__vite__mapDeps([8,9,1,2,10,11]))),Ere=[{icon:Mwe,label:"Copy"},{icon:kwe,label:"Refresh"},{icon:Awe,label:"Volume"}],Sre=g.memo(()=>{const{t:e}=ke("applications"),t=g.useRef(!1),[n,r]=g.useState(!1),o=g.useCallback(()=>{setTimeout(()=>{S.current&&(S.current.scrollTop=S.current.scrollHeight)},50)},[]),{schema:a,threadInfo:i,mainLLMInfo:s,currentDataNode:c,loadLLM:l,addNewDataNode:u,selectDataNode:d,updateMessagesData:f,onThreadMessagesLoaded:p}=Zne(),{sendMessage:y}=$I(),{input:m,messages:v,isLoading:b,reload:x,setInput:_,handleSubmit:w,handleInputChange:j,setMessages:E}=rS({fetch:async(R,A)=>{try{r(!0);const C=JSON.parse(A==null?void 0:A.body),N=Iu(),T=C.messages[C.messages.length-1];return t.current=!0,E(I=>[...I,{id:Iu(),content:T.content,role:"user"},{id:N,content:"",role:"assistant"}]),await y(T.content,C.messages||[],void 0,[],{schema:a,onMessageUpdate(I){E(L=>{const D=[...L],B=D.findIndex(H=>H.id===N);return B!==-1&&(D[B]={...D[B],content:I.nodeData.content||""}),D}),t.current&&o()}}),E(I=>(f(I),I)),r(!1),_(""),t.current&&o(),new Response}finally{r(!1)}}}),S=g.useRef(null);g.useEffect(()=>{const R=p(A=>{E(A||[]),o()});return()=>{R()}},[E,p,o]);const O=async(R,A)=>(r(!0),await w(A),!0),P=g.useCallback(async(R,A,C)=>{if(R==="Refresh"){r(!0);try{await x()}finally{r(!1)}}if(R==="Copy"){const N=C[A];N&&N.role==="assistant"&&navigator.clipboard.writeText(N.content)}if(R==="Volume"){const N=C[A];N!=null&&N.content&&await wE.speak((N==null?void 0:N.content)||"")}},[x]),M=g.useCallback(()=>t.current=!1,[]),k=g.useMemo(()=>v&&v.map((R,A)=>h.jsxs(RN,{innerclassname:R.role=="system"?"!bg-transparent font-semibold":void 0,variant:R.role=="user"?"sent":"received",children:[R.role==="system"?h.jsx("div",{className:"w-10 h-10"}):R.role==="assistant"?h.jsx(Pq,{src:"",fallback:"\u{1F916}"}):void 0,h.jsxs(IN,{children:[n&&v.length-1===A&&(!R.content||a)?h.jsx(Id,{}):h.jsxs(g.Suspense,{fallback:h.jsx(Id,{}),children:[R.role==="system"?h.jsx(en,{className:"!text-sm mb-1",children:"System"}):void 0,h.jsx(jre,{className:K("[&_p]:leading-relaxed !max-w-full !bg-transparent !font-sans !text-sm"),style:{color:"unset !important"},source:R.content?a?`\`\`\`json
${R.content}
\`\`\``:R.content:""})]}),R.role==="assistant"&&v.length-1===A&&h.jsx("div",{className:"flex items-center mt-1.5 gap-1",children:!n&&h.jsx(h.Fragment,{children:Ere.map((C,N)=>{const T=C.icon;return h.jsx(Tq,{variant:"ghost",className:"size-5",icon:h.jsx(T,{className:"size-3"}),onClick:()=>P(C.label,A,v)},N)})})})]})]},A)),[v,n,a,P]);return h.jsxs(Wy,{onClick:M,className:"max-h-full !overflow-hidden !min-h-full",style:{minHeight:"unset"},defaultOpen:!0,children:[h.jsx(Yy,{className:"!max-h-full !overflow-hidden",style:{minHeight:"unset"},children:h.jsxs("main",{className:"flex h-full w-full max-w-2xl flex-col items-center mx-auto overflow-hidden",children:[h.jsx("div",{className:"flex-1 overflow-y-auto overflow-x-hidden min-w-full max-w-full",children:h.jsx(DN,{className:"!max-h-full",ref:S,children:k})}),h.jsx(wk,{className:"!max-w-2xl px-4",onSubmit:O,disabled:b||n||(s==null?void 0:s.status)!==Ze.Loaded,placeholder:e("chat.input_message_placeholder"),maxHeight:72,value:m,onChange:j})]})}),h.jsx(_re,{schema:a,currentDataNode:c,threadNode:i==null?void 0:i.threadNode,loadLLM:l,mainLLMInfo:s,onAddNewThread:u,onSelectThread:d})]})}),Cre=()=>{const[e,t]=g.useState(),n=ot(l=>l.currentSession),{t:r}=ke("flows"),{toast:o}=Ht(),a=an(l=>l.stream),i=an(l=>l.loadModel),s=g.useCallback(async(l,u)=>{if(n!=null&&n.main_node_id){if(!(e!=null&&e.llm))return o({variant:"destructive",description:r("editor_node.errors.llm_not_found")});(e==null?void 0:e.status)!==Ze.Loaded&&(await i(e.llm.name,d=>{t(f=>f&&{...f,progress:d.text})}),t(d=>d&&{...d,status:Ze.Loaded,progress:""}));try{const d=a(l);if(!d)throw new Error("Stream is not supported");const f=[];for await(const p of d)p&&Array.isArray(p)&&(f.push(...p.map(y=>y.content)),p!=null&&p.length&&(u==null||u(p.map(y=>y.content).join(""))));return f.join("")}catch(d){if(d instanceof Error&&d.message.includes("LLM_NOT_LOADED_YET"))return o({title:r("editor_node.errors.llm_not_loaded_yet")});o({variant:"destructive",title:r("editor_node.errors.stream_message_failed")})}}},[n==null?void 0:n.main_node_id,e==null?void 0:e.llm,e==null?void 0:e.status,o,r,i,a]),c=g.useCallback(async()=>{if(!(n!=null&&n.main_node_id))return;const l=await ce("FlowEdge").find({where:{target:n.main_node_id}}),u=(await ce("FlowNode").find({where:{id:mr(l.map(f=>f.source))}})).find(f=>f.source_type===re.LLM);if(!u)return;const d=await ce("LLM").findOne({where:{id:u.source_id}});d&&(await i(d.name,f=>{t(p=>p&&{...p,llm:d,progress:f.text})}),t({llm:d,status:Ze.Loaded}))},[n==null?void 0:n.main_node_id,i]);return g.useEffect(()=>{n!=null&&n.main_node_id&&c()},[n==null?void 0:n.main_node_id,c]),{mainLLMInfo:e,createMessage:s}},Ore=()=>{const e=ot(n=>n.currentSession),t=g.useRef(null);return{updateEditorContent:g.useCallback(async n=>{e!=null&&e.main_node_id&&(clearTimeout(t.current),t.current=setTimeout(async()=>{e!=null&&e.main_node_id&&await ce("FlowNode").update(e.main_node_id,{data:n})},150))},[e])}},Mre=g.lazy(()=>At(()=>import("./PlateEditor-B1zCAb0U.js").then(async e=>(await e.__tla,e)),__vite__mapDeps([12,1,2,10,13,4,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,3,5,6,102]))),Nre=g.memo(()=>{var o,a,i,s,c;const{updateEditorContent:e}=Ore(),{mainLLMInfo:t,createMessage:n}=Cre(),r=g.useCallback(l=>{e(l)},[e]);return h.jsxs("div",{className:"h-full w-full relative","data-registry":"plate",children:[h.jsx(Od,{children:h.jsx(Ei,{children:h.jsxs("div",{className:K("flex absolute !z-[51] right-1 top-0 max-w-28 h-9 items-center justify-center flex-row"),children:[(t==null?void 0:t.status)===Ze.Loaded&&((o=t==null?void 0:t.llm)!=null&&o.name)?h.jsx(Ir,{name:(a=t==null?void 0:t.llm)==null?void 0:a.name,className:"w-5 h-5 mr-1"}):void 0,h.jsx(Si,{className:"overflow-hidden !text-ellipsis w-full max-w-full max-h-full whitespace-nowrap text-sm",children:t!=null&&t.progress?t==null?void 0:t.progress:(t==null?void 0:t.status)===Ze.Loaded?(i=t==null?void 0:t.llm)==null?void 0:i.name:h.jsx(de,{size:16,name:"loader-circle",className:"animate-spin ml-2"})}),h.jsx(wa,{children:h.jsx("p",{children:(t==null?void 0:t.progress)||((s=t==null?void 0:t.llm)==null?void 0:s.name)||""})})]})})}),h.jsx(g.Suspense,{fallback:h.jsx("div",{className:"h-full w-ful !rounded-none flex justify-center items-center",children:h.jsx(de,{name:"loader-circle",className:"animate-spin"})}),children:h.jsx(Mre,{onValueChange:r,copilotStream:n,hideDragIcon:!0,enableHistoryControl:!0},((c=t==null?void 0:t.llm)==null?void 0:c.name)||"default")})]})}),kre=()=>{const[e,t]=g.useState(),n=ot(l=>l.currentSession),{t:r}=ke("flows"),{toast:o}=Ht(),a=an(l=>l.stream),i=an(l=>l.loadModel),s=g.useCallback(async(l,u)=>{if(n!=null&&n.main_node_id){if(!(e!=null&&e.llm))return o({variant:"destructive",description:r("editor_node.errors.llm_not_found")});(e==null?void 0:e.status)!==Ze.Loaded&&(await i(e.llm.name,d=>{t(f=>f&&{...f,progress:d.text})}),t(d=>d&&{...d,status:Ze.Loaded,progress:""}));try{const d=a(l);if(!d)throw new Error("Stream is not supported");const f=[];for await(const p of d)p&&Array.isArray(p)&&(f.push(...p.map(y=>y.content)),p!=null&&p.length&&(u==null||u(p.map(y=>y.content).join(""))));return f.join("")}catch(d){if(d instanceof Error&&d.message.includes("LLM_NOT_LOADED_YET"))return o({title:r("editor_node.errors.llm_not_loaded_yet")});o({variant:"destructive",title:r("editor_node.errors.stream_message_failed")})}}},[n==null?void 0:n.main_node_id,e==null?void 0:e.llm,e==null?void 0:e.status,o,r,i,a]),c=g.useCallback(async()=>{if(!(n!=null&&n.main_node_id))return;const l=await ce("FlowEdge").find({where:{target:n.main_node_id}}),u=(await ce("FlowNode").find({where:{id:mr(l.map(f=>f.source))}})).find(f=>f.source_type===re.LLM);if(!u)return;const d=await ce("LLM").findOne({where:{id:u.source_id}});d&&(await i(d.name,f=>{t(p=>p&&{...p,llm:d,progress:f.text})}),t({llm:d,status:Ze.Loaded}))},[n==null?void 0:n.main_node_id,i]);return g.useEffect(()=>{n!=null&&n.main_node_id&&c()},[n==null?void 0:n.main_node_id,c]),{mainLLMInfo:e,createMessage:s}};iS=function(e,t=""){const n=[];for(const[r,o]of Object.entries(e)){const a=Iu(),i=[t,r].filter(Boolean).join("/"),s="file"in o&&"contents"in o.file?o.file:void 0,c={id:a,isSelectable:!0,content:typeof(s==null?void 0:s.contents)=="string"?s.contents:void 0,file:i,name:r,children:[]};"directory"in o&&(c.children=iS(o.directory,i)),n.push(c)}return n},Im=function(e){const t=e.trim().split(`
`),n={};return t.forEach(r=>{const{file:o,content:a}=JSON.parse(r),i=o.split("/");let s=n;for(let c=0;c<i.length;c++){const l=i[c];c===i.length-1?s[l]={file:{contents:a}}:(s[l]||(s[l]={directory:{}}),s=s[l].directory)}}),n},Pm=function(e){const t=[];function n(r,o=[]){for(const[a,i]of Object.entries(r))if("file"in i){const s=[...o,a].join("/");if("contents"in i.file){const c=i.file.contents;t.push(JSON.stringify({file:s,content:c}))}}else"directory"in i&&n(i.directory,[...o,a])}return n(e),t.join(`
`)},Dm=function(e,t,n){const r=t.replace(/^\.\//,"").split("/");let o=e;for(let a=0;a<r.length;a++){const i=r[a];if(a===r.length-1)i in o&&"file"in o[i]?o[i].file.contents=n:Er(`Path "${t}" is not a file.`);else if(i in o&&"directory"in o[i])o=o[i].directory;else return Er(`Path "${t}" does not exist.`),e}return e};const Pre=()=>{const e=ot(i=>i.currentSession),[t,n]=g.useState(),r=g.useCallback(async(i,s)=>{await ce("FlowNode").update(i,{raw:Pm(s)})},[]),o=g.useCallback(async(i,s)=>{e!=null&&e.main_node_id&&n(c=>{if(!(e!=null&&e.main_node_id))return c;const l=Dm(c||{},i,s);return r(e==null?void 0:e.main_node_id,l),l})},[e==null?void 0:e.main_node_id,r]),a=g.useCallback(async()=>{if(!(e!=null&&e.main_node_id))return;const i=await ce("FlowNode").findOne({where:{id:e==null?void 0:e.main_node_id}});i&&n(i.raw?Im(i.raw):{})},[e==null?void 0:e.main_node_id]);return g.useEffect(()=>{e!=null&&e.main_node_id&&a()},[e==null?void 0:e.main_node_id,a]),{fileSystemTree:t,updateCodeContainerFile:o,updateCodeContainerData:r}},Are=g.lazy(()=>At(()=>import("./index-ISt3onpd.js").then(async e=>(await e.__tla,e)),__vite__mapDeps([103,1,2,101,104,3,4,5,6,105]))),Tre=g.memo(()=>{var r,o,a,i;const{mainLLMInfo:e}=kre(),{fileSystemTree:t,updateCodeContainerFile:n}=Pre();return h.jsxs("div",{className:"h-full w-full relative","data-registry":"plate",children:[h.jsx(Od,{children:h.jsx(Ei,{children:h.jsxs("div",{className:K("flex absolute !z-[51] right-1 top-0 max-w-28 h-9 items-center justify-center flex-row"),children:[(e==null?void 0:e.status)===Ze.Loaded&&((r=e==null?void 0:e.llm)!=null&&r.name)?h.jsx(Ir,{name:(o=e==null?void 0:e.llm)==null?void 0:o.name,className:"w-5 h-5 mr-1"}):void 0,h.jsx(Si,{className:"overflow-hidden !text-ellipsis w-full max-w-full max-h-full whitespace-nowrap text-sm",children:e!=null&&e.progress?e.progress:(e==null?void 0:e.status)===Ze.Loaded?((a=e==null?void 0:e.llm)==null?void 0:a.name)||"":h.jsx(de,{size:16,name:"loader-circle",className:"animate-spin ml-2"})}),h.jsx(wa,{children:h.jsx("p",{children:(e==null?void 0:e.progress)||((i=e==null?void 0:e.llm)==null?void 0:i.name)||""})})]})})}),h.jsx(g.Suspense,{fallback:h.jsx("div",{className:"h-full w-full flex justify-center items-center",children:h.jsx(de,{name:"loader-circle",className:"animate-spin"})}),children:t!==void 0?h.jsx(Are,{autoLoad:!0,hideAppName:!0,fileSystemTree:t,onUpdateFileContent:n}):void 0})]})});function Rre(){var t,n;const e=ot(r=>r.currentSession);if(!e)return h.jsx(V9,{flickeringGrid:!0,className:"w-full h-full"});if(e.main_source_type==="Thread")return h.jsx(Sre,{});if(((t=e.main_node)==null?void 0:t.node_type)==="EDITOR_APP")return h.jsx(Nre,{});if(((n=e.main_node)==null?void 0:n.node_type)==="VSLITE_APP")return h.jsx(Tre,{})}var Uf="Menubar",[Nx,Ire,Dre]=Ru(Uf),[eD,Bwe]=Vn(Uf,[Dre,qr]),yn=zu(),tD=qr(),[Lre,kx]=eD(Uf),nD=g.forwardRef((e,t)=>{const{__scopeMenubar:n,value:r,onValueChange:o,defaultValue:a,loop:i=!0,dir:s,...c}=e,l=Do(s),u=tD(n),[d="",f]=Zt({prop:r,onChange:o,defaultProp:a}),[p,y]=g.useState(null);return h.jsx(Lre,{scope:n,value:d,onMenuOpen:g.useCallback(m=>{f(m),y(m)},[f]),onMenuClose:g.useCallback(()=>f(""),[f]),onMenuToggle:g.useCallback(m=>{f(v=>v?"":m),y(m)},[f]),dir:l,loop:i,children:h.jsx(Nx.Provider,{scope:n,children:h.jsx(Nx.Slot,{scope:n,children:h.jsx(Zs,{asChild:!0,...u,orientation:"horizontal",loop:i,dir:l,currentTabStopId:p,onCurrentTabStopIdChange:y,children:h.jsx(Oe.div,{role:"menubar",...c,ref:t})})})})})});nD.displayName=Uf;var Px="MenubarMenu",[Fre,rD]=eD(Px),oD=e=>{const{__scopeMenubar:t,value:n,...r}=e,o=mt(),a=n||o||"LEGACY_REACT_AUTO_VALUE",i=kx(Px,t),s=yn(t),c=g.useRef(null),l=g.useRef(!1),u=i.value===a;return g.useEffect(()=>{u||(l.current=!1)},[u]),h.jsx(Fre,{scope:t,value:a,triggerId:mt(),triggerRef:c,contentId:mt(),wasKeyboardTriggerOpenRef:l,children:h.jsx(um,{...s,open:u,onOpenChange:d=>{d||i.onMenuClose()},modal:!1,dir:i.dir,...r})})};oD.displayName=Px;var Ax="MenubarTrigger",aD=g.forwardRef((e,t)=>{const{__scopeMenubar:n,disabled:r=!1,...o}=e,a=tD(n),i=yn(n),s=kx(Ax,n),c=rD(Ax,n),l=g.useRef(null),u=nt(t,l,c.triggerRef),[d,f]=g.useState(!1),p=s.value===c.value;return h.jsx(Nx.ItemSlot,{scope:n,value:c.value,disabled:r,children:h.jsx(ec,{asChild:!0,...a,focusable:!r,tabStopId:c.value,children:h.jsx(Qh,{asChild:!0,...i,children:h.jsx(Oe.button,{type:"button",role:"menuitem",id:c.triggerId,"aria-haspopup":"menu","aria-expanded":p,"aria-controls":p?c.contentId:void 0,"data-highlighted":d?"":void 0,"data-state":p?"open":"closed","data-disabled":r?"":void 0,disabled:r,...o,ref:u,onPointerDown:he(e.onPointerDown,y=>{!r&&y.button===0&&y.ctrlKey===!1&&(s.onMenuOpen(c.value),p||y.preventDefault())}),onPointerEnter:he(e.onPointerEnter,()=>{var y;s.value&&!p&&(s.onMenuOpen(c.value),(y=l.current)==null||y.focus())}),onKeyDown:he(e.onKeyDown,y=>{r||(["Enter"," "].includes(y.key)&&s.onMenuToggle(c.value),y.key==="ArrowDown"&&s.onMenuOpen(c.value),["Enter"," ","ArrowDown"].includes(y.key)&&(c.wasKeyboardTriggerOpenRef.current=!0,y.preventDefault()))}),onFocus:he(e.onFocus,()=>f(!0)),onBlur:he(e.onBlur,()=>f(!1))})})})})});aD.displayName=Ax;var Bre="MenubarPortal",iD=e=>{const{__scopeMenubar:t,...n}=e,r=yn(t);return h.jsx(lm,{...r,...n})};iD.displayName=Bre;var Tx="MenubarContent",sD=g.forwardRef((e,t)=>{const{__scopeMenubar:n,align:r="start",...o}=e,a=yn(n),i=kx(Tx,n),s=rD(Tx,n),c=Ire(n),l=g.useRef(!1);return h.jsx(Jh,{id:s.contentId,"aria-labelledby":s.triggerId,"data-radix-menubar-content":"",...a,...o,ref:t,align:r,onCloseAutoFocus:he(e.onCloseAutoFocus,u=>{var d;!i.value&&!l.current&&((d=s.triggerRef.current)==null||d.focus()),l.current=!1,u.preventDefault()}),onFocusOutside:he(e.onFocusOutside,u=>{const d=u.target;c().some(f=>{var p;return(p=f.ref.current)==null?void 0:p.contains(d)})&&u.preventDefault()}),onInteractOutside:he(e.onInteractOutside,()=>{l.current=!0}),onEntryFocus:u=>{s.wasKeyboardTriggerOpenRef.current||u.preventDefault()},onKeyDown:he(e.onKeyDown,u=>{if(["ArrowRight","ArrowLeft"].includes(u.key)){const d=u.target,f=d.hasAttribute("data-radix-menubar-subtrigger"),p=d.closest("[data-radix-menubar-content]")!==u.currentTarget,y=(i.dir==="rtl"?"ArrowRight":"ArrowLeft")===u.key;if(!y&&f||p&&y)return;let m=c().filter(x=>!x.disabled).map(x=>x.value);y&&m.reverse();const v=m.indexOf(s.value);m=i.loop?eoe(m,v+1):m.slice(v+1);const[b]=m;b&&i.onMenuOpen(b)}},{checkForDefaultPrevented:!1}),style:{...e.style,"--radix-menubar-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-menubar-content-available-width":"var(--radix-popper-available-width)","--radix-menubar-content-available-height":"var(--radix-popper-available-height)","--radix-menubar-trigger-width":"var(--radix-popper-anchor-width)","--radix-menubar-trigger-height":"var(--radix-popper-anchor-height)"}})});sD.displayName=Tx;var $re="MenubarGroup",zre=g.forwardRef((e,t)=>{const{__scopeMenubar:n,...r}=e,o=yn(n);return h.jsx(Gh,{...o,...r,ref:t})});zre.displayName=$re;var Vre="MenubarLabel",cD=g.forwardRef((e,t)=>{const{__scopeMenubar:n,...r}=e,o=yn(n);return h.jsx(Zh,{...o,...r,ref:t})});cD.displayName=Vre;var Ure="MenubarItem",lD=g.forwardRef((e,t)=>{const{__scopeMenubar:n,...r}=e,o=yn(n);return h.jsx(em,{...o,...r,ref:t})});lD.displayName=Ure;var Hre="MenubarCheckboxItem",uD=g.forwardRef((e,t)=>{const{__scopeMenubar:n,...r}=e,o=yn(n);return h.jsx(tm,{...o,...r,ref:t})});uD.displayName=Hre;var Wre="MenubarRadioGroup",qre=g.forwardRef((e,t)=>{const{__scopeMenubar:n,...r}=e,o=yn(n);return h.jsx(nm,{...o,...r,ref:t})});qre.displayName=Wre;var Yre="MenubarRadioItem",dD=g.forwardRef((e,t)=>{const{__scopeMenubar:n,...r}=e,o=yn(n);return h.jsx(rm,{...o,...r,ref:t})});dD.displayName=Yre;var Kre="MenubarItemIndicator",fD=g.forwardRef((e,t)=>{const{__scopeMenubar:n,...r}=e,o=yn(n);return h.jsx(om,{...o,...r,ref:t})});fD.displayName=Kre;var Xre="MenubarSeparator",pD=g.forwardRef((e,t)=>{const{__scopeMenubar:n,...r}=e,o=yn(n);return h.jsx(am,{...o,...r,ref:t})});pD.displayName=Xre;var Qre="MenubarArrow",Jre=g.forwardRef((e,t)=>{const{__scopeMenubar:n,...r}=e,o=yn(n);return h.jsx(im,{...o,...r,ref:t})});Jre.displayName=Qre;var Gre="MenubarSubTrigger",hD=g.forwardRef((e,t)=>{const{__scopeMenubar:n,...r}=e,o=yn(n);return h.jsx(sm,{"data-radix-menubar-subtrigger":"",...o,...r,ref:t})});hD.displayName=Gre;var Zre="MenubarSubContent",mD=g.forwardRef((e,t)=>{const{__scopeMenubar:n,...r}=e,o=yn(n);return h.jsx(cm,{...o,"data-radix-menubar-content":"",...r,ref:t,style:{...e.style,"--radix-menubar-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-menubar-content-available-width":"var(--radix-popper-available-width)","--radix-menubar-content-available-height":"var(--radix-popper-available-height)","--radix-menubar-trigger-width":"var(--radix-popper-anchor-width)","--radix-menubar-trigger-height":"var(--radix-popper-anchor-height)"}})});mD.displayName=Zre;function eoe(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var yD=nD,toe=oD,gD=aD,noe=iD,vD=sD,bD=cD,xD=lD,wD=uD,_D=dD,jD=fD,ED=pD,SD=hD,CD=mD;const Rx=toe,OD=g.forwardRef(({className:e,...t},n)=>h.jsx(yD,{ref:n,className:K("flex h-10 items-center space-x-1 rounded-md border bg-background p-1",e),...t}));OD.displayName=yD.displayName;const Ix=g.forwardRef(({className:e,...t},n)=>h.jsx(gD,{ref:n,className:K("flex cursor-default select-none items-center rounded-sm px-3 py-1.5 text-sm font-medium outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground",e),...t}));Ix.displayName=gD.displayName;const roe=g.forwardRef(({className:e,inset:t,children:n,...r},o)=>h.jsxs(SD,{ref:o,className:K("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground",t&&"pl-8",e),...r,children:[n,h.jsx(de,{name:"chevron-right",className:"ml-auto h-4 w-4"})]}));roe.displayName=SD.displayName;const ooe=g.forwardRef(({className:e,...t},n)=>h.jsx(CD,{ref:n,className:K("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));ooe.displayName=CD.displayName;const MD=g.forwardRef(({className:e,align:t="start",alignOffset:n=-4,sideOffset:r=8,...o},a)=>h.jsx(noe,{children:h.jsx(vD,{ref:a,align:t,alignOffset:n,sideOffset:r,className:K("z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...o})}));MD.displayName=vD.displayName;const ND=g.forwardRef(({className:e,inset:t,...n},r)=>h.jsx(xD,{ref:r,className:K("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...n}));ND.displayName=xD.displayName;const aoe=g.forwardRef(({className:e,children:t,checked:n,...r},o)=>h.jsxs(wD,{ref:o,className:K("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:n,...r,children:[h.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:h.jsx(jD,{children:h.jsx(de,{name:"check",className:"h-4 w-4"})})}),t]}));aoe.displayName=wD.displayName;const ioe=g.forwardRef(({className:e,children:t,...n},r)=>h.jsxs(_D,{ref:r,className:K("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[h.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:h.jsx(jD,{children:h.jsx(de,{name:"circle",className:"h-2 w-2 fill-current"})})}),t]}));ioe.displayName=_D.displayName;const soe=g.forwardRef(({className:e,inset:t,...n},r)=>h.jsx(bD,{ref:r,className:K("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...n}));soe.displayName=bD.displayName;const coe=g.forwardRef(({className:e,...t},n)=>h.jsx(ED,{ref:n,className:K("-mx-1 my-1 h-px bg-muted",e),...t}));coe.displayName=ED.displayName;let kD;Ae=dwe()(fwe(pwe((e,t)=>({...kI,...Gne(e,t)})))),kD=()=>{const e=ot(i=>{var s;return(s=i.currentSession)==null?void 0:s.id}),[t,n]=g.useState(!1),r=Ae(i=>i.pushSyncNodeQueue),o=Ae(i=>i.createOrUpdateFlowNode),a=g.useCallback(async(i,s)=>{try{if(!e)throw new Error("Session not found");n(!0);const c=await ce("LLM").findOne({where:{name:s.name,session_id:e}});return c?(r("LLM",{where:{source_type:"LLM",source_id:c.id}}),c):ce("LLM").save({name:`${s.name}`,status:Ze.Started,session_id:e,provider:Uu.WebLLM,metadata:JSON.stringify({}),model_type:s.model_type||sc.LLM,...s}).then(async l=>{var u,d,f;return await o({source_id:l.id,source_type:"LLM",node_type:re.LLM,x:(u=i.position)==null?void 0:u.x,y:((d=i.position)==null?void 0:d.y)+(((f=i.measured)==null?void 0:f.height)||0)+30}),l})}finally{n(!1)}},[o,r,e]);return{loading:t,createDatabaseLLM:a}};var Dx="Popover",[PD,$we]=Vn(Dx,[Uo]),_l=Uo(),[loe,Qo]=PD(Dx),AD=e=>{const{__scopePopover:t,children:n,open:r,defaultOpen:o,onOpenChange:a,modal:i=!1}=e,s=_l(t),c=g.useRef(null),[l,u]=g.useState(!1),[d=!1,f]=Zt({prop:r,defaultProp:o,onChange:a});return h.jsx(Ec,{...s,children:h.jsx(loe,{scope:t,contentId:mt(),triggerRef:c,open:d,onOpenChange:f,onOpenToggle:g.useCallback(()=>f(p=>!p),[f]),hasCustomAnchor:l,onCustomAnchorAdd:g.useCallback(()=>u(!0),[]),onCustomAnchorRemove:g.useCallback(()=>u(!1),[]),modal:i,children:n})})};AD.displayName=Dx;let Lx;Lx="PopoverAnchor",km=g.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,o=Qo(Lx,n),a=_l(n),{onCustomAnchorAdd:i,onCustomAnchorRemove:s}=o;return g.useEffect(()=>(i(),()=>s()),[i,s]),h.jsx(Sc,{...a,...r,ref:t})}),km.displayName=Lx;var TD="PopoverTrigger",Fx=g.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,o=Qo(TD,n),a=_l(n),i=nt(t,o.triggerRef),s=h.jsx(Oe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":FD(o.open),...r,ref:i,onClick:he(e.onClick,o.onOpenToggle)});return o.hasCustomAnchor?s:h.jsx(Sc,{asChild:!0,...a,children:s})});Fx.displayName=TD;var Bx="PopoverPortal",[uoe,doe]=PD(Bx,{forceMount:void 0}),RD=e=>{const{__scopePopover:t,forceMount:n,children:r,container:o}=e,a=Qo(Bx,t);return h.jsx(uoe,{scope:t,forceMount:n,children:h.jsx(Mn,{present:n||a.open,children:h.jsx(Pu,{asChild:!0,container:o,children:r})})})};RD.displayName=Bx;var rs="PopoverContent",ID=g.forwardRef((e,t)=>{const n=doe(rs,e.__scopePopover),{forceMount:r=n.forceMount,...o}=e,a=Qo(rs,e.__scopePopover);return h.jsx(Mn,{present:r||a.open,children:a.modal?h.jsx(foe,{...o,ref:t}):h.jsx(poe,{...o,ref:t})})});ID.displayName=rs;var foe=g.forwardRef((e,t)=>{const n=Qo(rs,e.__scopePopover),r=g.useRef(null),o=nt(t,r),a=g.useRef(!1);return g.useEffect(()=>{const i=r.current;if(i)return fd(i)},[]),h.jsx(xc,{as:Wr,allowPinchZoom:!0,children:h.jsx(DD,{...e,ref:o,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:he(e.onCloseAutoFocus,i=>{var s;i.preventDefault(),a.current||((s=n.triggerRef.current)==null||s.focus())}),onPointerDownOutside:he(e.onPointerDownOutside,i=>{const s=i.detail.originalEvent,c=s.button===0&&s.ctrlKey===!0,l=s.button===2||c;a.current=l},{checkForDefaultPrevented:!1}),onFocusOutside:he(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1})})})}),poe=g.forwardRef((e,t)=>{const n=Qo(rs,e.__scopePopover),r=g.useRef(!1),o=g.useRef(!1);return h.jsx(DD,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var i,s;(i=e.onCloseAutoFocus)==null||i.call(e,a),a.defaultPrevented||(r.current||((s=n.triggerRef.current)==null||s.focus()),a.preventDefault()),r.current=!1,o.current=!1},onInteractOutside:a=>{var s,c;(s=e.onInteractOutside)==null||s.call(e,a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const i=a.target;(c=n.triggerRef.current)!=null&&c.contains(i)&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&o.current&&a.preventDefault()}})}),DD=g.forwardRef((e,t)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:o,onCloseAutoFocus:a,disableOutsidePointerEvents:i,onEscapeKeyDown:s,onPointerDownOutside:c,onFocusOutside:l,onInteractOutside:u,...d}=e,f=Qo(rs,n),p=_l(n);return od(),h.jsx(bc,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:o,onUnmountAutoFocus:a,children:h.jsx(ku,{asChild:!0,disableOutsidePointerEvents:i,onInteractOutside:u,onEscapeKeyDown:s,onPointerDownOutside:c,onFocusOutside:l,onDismiss:()=>f.onOpenChange(!1),children:h.jsx(_d,{"data-state":FD(f.open),role:"dialog",id:f.contentId,...p,...d,ref:t,style:{...d.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),LD="PopoverClose",hoe=g.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,o=Qo(LD,n);return h.jsx(Oe.button,{type:"button",...r,ref:t,onClick:he(e.onClick,()=>o.onOpenChange(!1))})});hoe.displayName=LD;var moe="PopoverArrow",yoe=g.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,o=_l(n);return h.jsx(jd,{...o,...r,ref:t})});yoe.displayName=moe;function FD(e){return e?"open":"closed"}GE=AD,K9=km,J9=Fx,ZE=RD,_m=ID;const goe=GE,BD=g.forwardRef(({className:e,align:t="center",sideOffset:n=4,...r},o)=>h.jsx(ZE,{children:h.jsx(_m,{ref:o,align:t,sideOffset:n,className:K("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));BD.displayName=_m.displayName;var $D=1,voe=.9,boe=.8,xoe=.17,$x=.1,zx=.999,woe=.9999,_oe=.99,joe=/[\\\/_+.#"@\[\(\{&]/,Eoe=/[\\\/_+.#"@\[\(\{&]/g,Soe=/[\s-]/,zD=/[\s-]/g;function Vx(e,t,n,r,o,a,i){if(a===t.length)return o===e.length?$D:_oe;var s=`${o},${a}`;if(i[s]!==void 0)return i[s];for(var c=r.charAt(a),l=n.indexOf(c,o),u=0,d,f,p,y;l>=0;)d=Vx(e,t,n,r,l+1,a+1,i),d>u&&(l===o?d*=$D:joe.test(e.charAt(l-1))?(d*=boe,p=e.slice(o,l-1).match(Eoe),p&&o>0&&(d*=Math.pow(zx,p.length))):Soe.test(e.charAt(l-1))?(d*=voe,y=e.slice(o,l-1).match(zD),y&&o>0&&(d*=Math.pow(zx,y.length))):(d*=xoe,o>0&&(d*=Math.pow(zx,l-o))),e.charAt(l)!==t.charAt(a)&&(d*=woe)),(d<$x&&n.charAt(l-1)===r.charAt(a+1)||r.charAt(a+1)===r.charAt(a)&&n.charAt(l-1)!==r.charAt(a))&&(f=Vx(e,t,n,r,l+1,a+2,i),f*$x>d&&(d=f*$x)),d>u&&(u=d),l=n.indexOf(c,l+1);return i[s]=u,u}function VD(e){return e.toLowerCase().replace(zD," ")}function Coe(e,t,n){return e=n&&n.length>0?`${e+" "+n.join(" ")}`:e,Vx(e,t,VD(e),VD(t),0,0,{})}var jl='[cmdk-group=""]',Ux='[cmdk-group-items=""]',Ooe='[cmdk-group-heading=""]',Hx='[cmdk-item=""]',UD=`${Hx}:not([aria-disabled="true"])`,Wx="cmdk-item-select",Aa="data-value",Moe=(e,t,n)=>Coe(e,t,n),HD=g.createContext(void 0),El=()=>g.useContext(HD),WD=g.createContext(void 0),qx=()=>g.useContext(WD),qD=g.createContext(void 0),YD=g.forwardRef((e,t)=>{let n=os(()=>{var F,z;return{search:"",value:(z=(F=e.value)!=null?F:e.defaultValue)!=null?z:"",filtered:{count:0,items:new Map,groups:new Set}}}),r=os(()=>new Set),o=os(()=>new Map),a=os(()=>new Map),i=os(()=>new Set),s=KD(e),{label:c,children:l,value:u,onValueChange:d,filter:f,shouldFilter:p,loop:y,disablePointerSelection:m=!1,vimBindings:v=!0,...b}=e,x=mt(),_=mt(),w=mt(),j=g.useRef(null),E=Boe();Ta(()=>{if(u!==void 0){let F=u.trim();n.current.value=F,S.emit()}},[u]),Ta(()=>{E(6,A)},[]);let S=g.useMemo(()=>({subscribe:F=>(i.current.add(F),()=>i.current.delete(F)),snapshot:()=>n.current,setState:(F,z,G)=>{var Q,oe,Z;if(!Object.is(n.current[F],z)){if(n.current[F]=z,F==="search")R(),M(),E(1,k);else if(F==="value"&&(G||E(5,A),((Q=s.current)==null?void 0:Q.value)!==void 0)){let q=z??"";(Z=(oe=s.current).onValueChange)==null||Z.call(oe,q);return}S.emit()}},emit:()=>{i.current.forEach(F=>F())}}),[]),O=g.useMemo(()=>({value:(F,z,G)=>{var Q;z!==((Q=a.current.get(F))==null?void 0:Q.value)&&(a.current.set(F,{value:z,keywords:G}),n.current.filtered.items.set(F,P(z,G)),E(2,()=>{M(),S.emit()}))},item:(F,z)=>(r.current.add(F),z&&(o.current.has(z)?o.current.get(z).add(F):o.current.set(z,new Set([F]))),E(3,()=>{R(),M(),n.current.value||k(),S.emit()}),()=>{a.current.delete(F),r.current.delete(F),n.current.filtered.items.delete(F);let G=C();E(4,()=>{R(),(G==null?void 0:G.getAttribute("id"))===F&&k(),S.emit()})}),group:F=>(o.current.has(F)||o.current.set(F,new Set),()=>{a.current.delete(F),o.current.delete(F)}),filter:()=>s.current.shouldFilter,label:c||e["aria-label"],getDisablePointerSelection:()=>s.current.disablePointerSelection,listId:x,inputId:w,labelId:_,listInnerRef:j}),[]);function P(F,z){var G,Q;let oe=(Q=(G=s.current)==null?void 0:G.filter)!=null?Q:Moe;return F?oe(F,n.current.search,z):0}function M(){if(!n.current.search||s.current.shouldFilter===!1)return;let F=n.current.filtered.items,z=[];n.current.filtered.groups.forEach(Q=>{let oe=o.current.get(Q),Z=0;oe.forEach(q=>{let W=F.get(q);Z=Math.max(W,Z)}),z.push([Q,Z])});let G=j.current;N().sort((Q,oe)=>{var Z,q;let W=Q.getAttribute("id"),J=oe.getAttribute("id");return((Z=F.get(J))!=null?Z:0)-((q=F.get(W))!=null?q:0)}).forEach(Q=>{let oe=Q.closest(Ux);oe?oe.appendChild(Q.parentElement===oe?Q:Q.closest(`${Ux} > *`)):G.appendChild(Q.parentElement===G?Q:Q.closest(`${Ux} > *`))}),z.sort((Q,oe)=>oe[1]-Q[1]).forEach(Q=>{var oe;let Z=(oe=j.current)==null?void 0:oe.querySelector(`${jl}[${Aa}="${encodeURIComponent(Q[0])}"]`);Z==null||Z.parentElement.appendChild(Z)})}function k(){let F=N().find(G=>G.getAttribute("aria-disabled")!=="true"),z=F==null?void 0:F.getAttribute(Aa);S.setState("value",z||void 0)}function R(){var F,z,G,Q;if(!n.current.search||s.current.shouldFilter===!1){n.current.filtered.count=r.current.size;return}n.current.filtered.groups=new Set;let oe=0;for(let Z of r.current){let q=(z=(F=a.current.get(Z))==null?void 0:F.value)!=null?z:"",W=(Q=(G=a.current.get(Z))==null?void 0:G.keywords)!=null?Q:[],J=P(q,W);n.current.filtered.items.set(Z,J),J>0&&oe++}for(let[Z,q]of o.current)for(let W of q)if(n.current.filtered.items.get(W)>0){n.current.filtered.groups.add(Z);break}n.current.filtered.count=oe}function A(){var F,z,G;let Q=C();Q&&(((F=Q.parentElement)==null?void 0:F.firstChild)===Q&&((G=(z=Q.closest(jl))==null?void 0:z.querySelector(Ooe))==null||G.scrollIntoView({block:"nearest"})),Q.scrollIntoView({block:"nearest"}))}function C(){var F;return(F=j.current)==null?void 0:F.querySelector(`${Hx}[aria-selected="true"]`)}function N(){var F;return Array.from(((F=j.current)==null?void 0:F.querySelectorAll(UD))||[])}function T(F){let z=N()[F];z&&S.setState("value",z.getAttribute(Aa))}function I(F){var z;let G=C(),Q=N(),oe=Q.findIndex(q=>q===G),Z=Q[oe+F];(z=s.current)!=null&&z.loop&&(Z=oe+F<0?Q[Q.length-1]:oe+F===Q.length?Q[0]:Q[oe+F]),Z&&S.setState("value",Z.getAttribute(Aa))}function L(F){let z=C(),G=z==null?void 0:z.closest(jl),Q;for(;G&&!Q;)G=F>0?Loe(G,jl):Foe(G,jl),Q=G==null?void 0:G.querySelector(UD);Q?S.setState("value",Q.getAttribute(Aa)):I(F)}let D=()=>T(N().length-1),B=F=>{F.preventDefault(),F.metaKey?D():F.altKey?L(1):I(1)},H=F=>{F.preventDefault(),F.metaKey?T(0):F.altKey?L(-1):I(-1)};return g.createElement(Oe.div,{ref:t,tabIndex:-1,...b,"cmdk-root":"",onKeyDown:F=>{var z;if((z=b.onKeyDown)==null||z.call(b,F),!F.defaultPrevented)switch(F.key){case"n":case"j":{v&&F.ctrlKey&&B(F);break}case"ArrowDown":{B(F);break}case"p":case"k":{v&&F.ctrlKey&&H(F);break}case"ArrowUp":{H(F);break}case"Home":{F.preventDefault(),T(0);break}case"End":{F.preventDefault(),D();break}case"Enter":if(!F.nativeEvent.isComposing&&F.keyCode!==229){F.preventDefault();let G=C();if(G){let Q=new Event(Wx);G.dispatchEvent(Q)}}}}},g.createElement("label",{"cmdk-label":"",htmlFor:O.inputId,id:O.labelId,style:zoe},c),Hf(e,F=>g.createElement(WD.Provider,{value:S},g.createElement(HD.Provider,{value:O},F))))}),Noe=g.forwardRef((e,t)=>{var n,r;let o=mt(),a=g.useRef(null),i=g.useContext(qD),s=El(),c=KD(e),l=(r=(n=c.current)==null?void 0:n.forceMount)!=null?r:i==null?void 0:i.forceMount;Ta(()=>{if(!l)return s.item(o,i==null?void 0:i.id)},[l]);let u=XD(o,a,[e.value,e.children,a],e.keywords),d=qx(),f=Ra(E=>E.value&&E.value===u.current),p=Ra(E=>l||s.filter()===!1?!0:E.search?E.filtered.items.get(o)>0:!0);g.useEffect(()=>{let E=a.current;if(!(!E||e.disabled))return E.addEventListener(Wx,y),()=>E.removeEventListener(Wx,y)},[p,e.onSelect,e.disabled]);function y(){var E,S;m(),(S=(E=c.current).onSelect)==null||S.call(E,u.current)}function m(){d.setState("value",u.current,!0)}if(!p)return null;let{disabled:v,value:b,onSelect:x,forceMount:_,keywords:w,...j}=e;return g.createElement(Oe.div,{ref:Sl([a,t]),...j,id:o,"cmdk-item":"",role:"option","aria-disabled":!!v,"aria-selected":!!f,"data-disabled":!!v,"data-selected":!!f,onPointerMove:v||s.getDisablePointerSelection()?void 0:m,onClick:v?void 0:y},e.children)}),koe=g.forwardRef((e,t)=>{let{heading:n,children:r,forceMount:o,...a}=e,i=mt(),s=g.useRef(null),c=g.useRef(null),l=mt(),u=El(),d=Ra(p=>o||u.filter()===!1?!0:p.search?p.filtered.groups.has(i):!0);Ta(()=>u.group(i),[]),XD(i,s,[e.value,e.heading,c]);let f=g.useMemo(()=>({id:i,forceMount:o}),[o]);return g.createElement(Oe.div,{ref:Sl([s,t]),...a,"cmdk-group":"",role:"presentation",hidden:d?void 0:!0},n&&g.createElement("div",{ref:c,"cmdk-group-heading":"","aria-hidden":!0,id:l},n),Hf(e,p=>g.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":n?l:void 0},g.createElement(qD.Provider,{value:f},p))))}),Poe=g.forwardRef((e,t)=>{let{alwaysRender:n,...r}=e,o=g.useRef(null),a=Ra(i=>!i.search);return!n&&!a?null:g.createElement(Oe.div,{ref:Sl([o,t]),...r,"cmdk-separator":"",role:"separator"})}),Aoe=g.forwardRef((e,t)=>{let{onValueChange:n,...r}=e,o=e.value!=null,a=qx(),i=Ra(u=>u.search),s=Ra(u=>u.value),c=El(),l=g.useMemo(()=>{var u;let d=(u=c.listInnerRef.current)==null?void 0:u.querySelector(`${Hx}[${Aa}="${encodeURIComponent(s)}"]`);return d==null?void 0:d.getAttribute("id")},[]);return g.useEffect(()=>{e.value!=null&&a.setState("search",e.value)},[e.value]),g.createElement(Oe.input,{ref:t,...r,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":c.listId,"aria-labelledby":c.labelId,"aria-activedescendant":l,id:c.inputId,type:"text",value:o?e.value:i,onChange:u=>{o||a.setState("search",u.target.value),n==null||n(u.target.value)}})}),Toe=g.forwardRef((e,t)=>{let{children:n,label:r="Suggestions",...o}=e,a=g.useRef(null),i=g.useRef(null),s=El();return g.useEffect(()=>{if(i.current&&a.current){let c=i.current,l=a.current,u,d=new ResizeObserver(()=>{u=requestAnimationFrame(()=>{let f=c.offsetHeight;l.style.setProperty("--cmdk-list-height",f.toFixed(1)+"px")})});return d.observe(c),()=>{cancelAnimationFrame(u),d.unobserve(c)}}},[]),g.createElement(Oe.div,{ref:Sl([a,t]),...o,"cmdk-list":"",role:"listbox","aria-label":r,id:s.listId},Hf(e,c=>g.createElement("div",{ref:Sl([i,s.listInnerRef]),"cmdk-list-sizer":""},c)))}),Roe=g.forwardRef((e,t)=>{let{open:n,onOpenChange:r,overlayClassName:o,contentClassName:a,container:i,...s}=e;return g.createElement(tc,{open:n,onOpenChange:r},g.createElement(nc,{container:i},g.createElement(pa,{"cmdk-overlay":"",className:o}),g.createElement(ha,{"aria-label":e.label,"cmdk-dialog":"",className:a},g.createElement(YD,{ref:t,...s}))))}),Ioe=g.forwardRef((e,t)=>Ra(n=>n.filtered.count===0)?g.createElement(Oe.div,{ref:t,...e,"cmdk-empty":"",role:"presentation"}):null),Doe=g.forwardRef((e,t)=>{let{progress:n,children:r,label:o="Loading...",...a}=e;return g.createElement(Oe.div,{ref:t,...a,"cmdk-loading":"",role:"progressbar","aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,"aria-label":o},Hf(e,i=>g.createElement("div",{"aria-hidden":!0},i)))}),En=Object.assign(YD,{List:Toe,Item:Noe,Input:Aoe,Group:koe,Separator:Poe,Dialog:Roe,Empty:Ioe,Loading:Doe});function Loe(e,t){let n=e.nextElementSibling;for(;n;){if(n.matches(t))return n;n=n.nextElementSibling}}function Foe(e,t){let n=e.previousElementSibling;for(;n;){if(n.matches(t))return n;n=n.previousElementSibling}}function KD(e){let t=g.useRef(e);return Ta(()=>{t.current=e}),t}var Ta=typeof window>"u"?g.useEffect:g.useLayoutEffect;function os(e){let t=g.useRef();return t.current===void 0&&(t.current=e()),t}function Sl(e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}function Ra(e){let t=qx(),n=()=>e(t.snapshot());return $u.useSyncExternalStore(t.subscribe,n,n)}function XD(e,t,n,r=[]){let o=g.useRef(),a=El();return Ta(()=>{var i;let s=(()=>{var l;for(let u of n){if(typeof u=="string")return u.trim();if(typeof u=="object"&&"current"in u)return u.current?(l=u.current.textContent)==null?void 0:l.trim():o.current}})(),c=r.map(l=>l.trim());a.value(e,s,c),(i=t.current)==null||i.setAttribute(Aa,s),o.current=s}),o}var Boe=()=>{let[e,t]=g.useState(),n=os(()=>new Map);return Ta(()=>{n.current.forEach(r=>r()),n.current=new Map},[e]),(r,o)=>{n.current.set(r,o),t({})}};function $oe(e){let t=e.type;return typeof t=="function"?t(e.props):"render"in t?t.render(e.props):e}function Hf({asChild:e,children:t},n){return e&&g.isValidElement(t)?g.cloneElement($oe(t),{ref:t.ref},n(t.props.children)):n(t)}var zoe={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const QD=g.forwardRef(({className:e,...t},n)=>h.jsx(En,{ref:n,className:K("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",e),...t}));QD.displayName=En.displayName;const JD=g.forwardRef(({className:e,...t},n)=>h.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[h.jsx(de,{name:"search",className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),h.jsx(En.Input,{ref:n,className:K("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",e),...t})]}));JD.displayName=En.Input.displayName;const GD=g.forwardRef(({className:e,...t},n)=>h.jsx(En.List,{ref:n,className:K("max-h-[300px] overflow-y-auto overflow-x-hidden",e),...t}));GD.displayName=En.List.displayName;const ZD=g.forwardRef((e,t)=>h.jsx(En.Empty,{ref:t,className:"py-6 text-center text-sm",...e}));ZD.displayName=En.Empty.displayName;const e3=g.forwardRef(({className:e,...t},n)=>h.jsx(En.Group,{ref:n,className:K("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",e),...t}));e3.displayName=En.Group.displayName;const Voe=g.forwardRef(({className:e,...t},n)=>h.jsx(En.Separator,{ref:n,className:K("-mx-1 h-px bg-border",e),...t}));Voe.displayName=En.Separator.displayName;const t3=g.forwardRef(({className:e,...t},n)=>h.jsx(En.Item,{ref:n,className:K("relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",e),...t}));t3.displayName=En.Item.displayName,Am=function(e,[t,n]){return Math.min(n,Math.max(t,e))};function n3(e){const t=g.useRef({value:e,previous:e});return g.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var Uoe=[" ","Enter","ArrowUp","ArrowDown"],Hoe=[" ","Enter"],Cl="Select",[Wf,qf,Woe]=Ru(Cl),[as,zwe]=Vn(Cl,[Woe,Uo]),Yf=Uo(),[qoe,Jo]=as(Cl),[Yoe,Koe]=as(Cl),r3=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:o,onOpenChange:a,value:i,defaultValue:s,onValueChange:c,dir:l,name:u,autoComplete:d,disabled:f,required:p,form:y}=e,m=Yf(t),[v,b]=g.useState(null),[x,_]=g.useState(null),[w,j]=g.useState(!1),E=Do(l),[S=!1,O]=Zt({prop:r,defaultProp:o,onChange:a}),[P,M]=Zt({prop:i,defaultProp:s,onChange:c}),k=g.useRef(null),R=v?y||!!v.closest("form"):!0,[A,C]=g.useState(new Set),N=Array.from(A).map(T=>T.props.value).join(";");return h.jsx(Ec,{...m,children:h.jsxs(qoe,{required:p,scope:t,trigger:v,onTriggerChange:b,valueNode:x,onValueNodeChange:_,valueNodeHasChildren:w,onValueNodeHasChildrenChange:j,contentId:mt(),value:P,onValueChange:M,open:S,onOpenChange:O,dir:E,triggerPointerDownPosRef:k,disabled:f,children:[h.jsx(Wf.Provider,{scope:t,children:h.jsx(Yoe,{scope:e.__scopeSelect,onNativeOptionAdd:g.useCallback(T=>{C(I=>new Set(I).add(T))},[]),onNativeOptionRemove:g.useCallback(T=>{C(I=>{const L=new Set(I);return L.delete(T),L})},[]),children:n})}),R?h.jsxs(M3,{"aria-hidden":!0,required:p,tabIndex:-1,name:u,autoComplete:d,value:P,onChange:T=>M(T.target.value),disabled:f,form:y,children:[P===void 0?h.jsx("option",{value:""}):null,Array.from(A)]},N):null]})})};r3.displayName=Cl;var o3="SelectTrigger",a3=g.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...o}=e,a=Yf(n),i=Jo(o3,n),s=i.disabled||r,c=nt(t,i.onTriggerChange),l=qf(n),u=g.useRef("touch"),[d,f,p]=N3(m=>{const v=l().filter(_=>!_.disabled),b=v.find(_=>_.value===i.value),x=k3(v,m,b);x!==void 0&&i.onValueChange(x.value)}),y=m=>{s||(i.onOpenChange(!0),p()),m&&(i.triggerPointerDownPosRef.current={x:Math.round(m.pageX),y:Math.round(m.pageY)})};return h.jsx(Sc,{asChild:!0,...a,children:h.jsx(Oe.button,{type:"button",role:"combobox","aria-controls":i.contentId,"aria-expanded":i.open,"aria-required":i.required,"aria-autocomplete":"none",dir:i.dir,"data-state":i.open?"open":"closed",disabled:s,"data-disabled":s?"":void 0,"data-placeholder":O3(i.value)?"":void 0,...o,ref:c,onClick:he(o.onClick,m=>{m.currentTarget.focus(),u.current!=="mouse"&&y(m)}),onPointerDown:he(o.onPointerDown,m=>{u.current=m.pointerType;const v=m.target;v.hasPointerCapture(m.pointerId)&&v.releasePointerCapture(m.pointerId),m.button===0&&m.ctrlKey===!1&&m.pointerType==="mouse"&&(y(m),m.preventDefault())}),onKeyDown:he(o.onKeyDown,m=>{const v=d.current!=="";!(m.ctrlKey||m.altKey||m.metaKey)&&m.key.length===1&&f(m.key),!(v&&m.key===" ")&&Uoe.includes(m.key)&&(y(),m.preventDefault())})})})});a3.displayName=o3;var i3="SelectValue",s3=g.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:o,children:a,placeholder:i="",...s}=e,c=Jo(i3,n),{onValueNodeHasChildrenChange:l}=c,u=a!==void 0,d=nt(t,c.onValueNodeChange);return xn(()=>{l(u)},[l,u]),h.jsx(Oe.span,{...s,ref:d,style:{pointerEvents:"none"},children:O3(c.value)?h.jsx(h.Fragment,{children:i}):a})});s3.displayName=i3;var Xoe="SelectIcon",c3=g.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...o}=e;return h.jsx(Oe.span,{"aria-hidden":!0,...o,ref:t,children:r||"\u25BC"})});c3.displayName=Xoe;var Qoe="SelectPortal",l3=e=>h.jsx(Pu,{asChild:!0,...e});l3.displayName=Qoe;var Ia="SelectContent",u3=g.forwardRef((e,t)=>{const n=Jo(Ia,e.__scopeSelect),[r,o]=g.useState();if(xn(()=>{o(new DocumentFragment)},[]),!n.open){const a=r;return a?Nu.createPortal(h.jsx(d3,{scope:e.__scopeSelect,children:h.jsx(Wf.Slot,{scope:e.__scopeSelect,children:h.jsx("div",{children:e.children})})}),a):null}return h.jsx(f3,{...e,ref:t})});u3.displayName=Ia;var yr=10,[d3,Go]=as(Ia),Joe="SelectContentImpl",f3=g.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:o,onEscapeKeyDown:a,onPointerDownOutside:i,side:s,sideOffset:c,align:l,alignOffset:u,arrowPadding:d,collisionBoundary:f,collisionPadding:p,sticky:y,hideWhenDetached:m,avoidCollisions:v,...b}=e,x=Jo(Ia,n),[_,w]=g.useState(null),[j,E]=g.useState(null),S=nt(t,Z=>w(Z)),[O,P]=g.useState(null),[M,k]=g.useState(null),R=qf(n),[A,C]=g.useState(!1),N=g.useRef(!1);g.useEffect(()=>{if(_)return fd(_)},[_]),od();const T=g.useCallback(Z=>{const[q,...W]=R().map($=>$.ref.current),[J]=W.slice(-1),te=document.activeElement;for(const $ of Z)if($===te||($==null||$.scrollIntoView({block:"nearest"}),$===q&&j&&(j.scrollTop=0),$===J&&j&&(j.scrollTop=j.scrollHeight),$==null||$.focus(),document.activeElement!==te))return},[R,j]),I=g.useCallback(()=>T([O,_]),[T,O,_]);g.useEffect(()=>{A&&I()},[A,I]);const{onOpenChange:L,triggerPointerDownPosRef:D}=x;g.useEffect(()=>{if(_){let Z={x:0,y:0};const q=J=>{var te,$;Z={x:Math.abs(Math.round(J.pageX)-(((te=D.current)==null?void 0:te.x)??0)),y:Math.abs(Math.round(J.pageY)-((($=D.current)==null?void 0:$.y)??0))}},W=J=>{Z.x<=10&&Z.y<=10?J.preventDefault():_.contains(J.target)||L(!1),document.removeEventListener("pointermove",q),D.current=null};return D.current!==null&&(document.addEventListener("pointermove",q),document.addEventListener("pointerup",W,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",q),document.removeEventListener("pointerup",W,{capture:!0})}}},[_,L,D]),g.useEffect(()=>{const Z=()=>L(!1);return window.addEventListener("blur",Z),window.addEventListener("resize",Z),()=>{window.removeEventListener("blur",Z),window.removeEventListener("resize",Z)}},[L]);const[B,H]=N3(Z=>{const q=R().filter(te=>!te.disabled),W=q.find(te=>te.ref.current===document.activeElement),J=k3(q,Z,W);J&&setTimeout(()=>J.ref.current.focus())}),F=g.useCallback((Z,q,W)=>{const J=!N.current&&!W;(x.value!==void 0&&x.value===q||J)&&(P(Z),J&&(N.current=!0))},[x.value]),z=g.useCallback(()=>_==null?void 0:_.focus(),[_]),G=g.useCallback((Z,q,W)=>{const J=!N.current&&!W;(x.value!==void 0&&x.value===q||J)&&k(Z)},[x.value]),Q=r==="popper"?Yx:p3,oe=Q===Yx?{side:s,sideOffset:c,align:l,alignOffset:u,arrowPadding:d,collisionBoundary:f,collisionPadding:p,sticky:y,hideWhenDetached:m,avoidCollisions:v}:{};return h.jsx(d3,{scope:n,content:_,viewport:j,onViewportChange:E,itemRefCallback:F,selectedItem:O,onItemLeave:z,itemTextRefCallback:G,focusSelectedItem:I,selectedItemText:M,position:r,isPositioned:A,searchRef:B,children:h.jsx(xc,{as:Wr,allowPinchZoom:!0,children:h.jsx(bc,{asChild:!0,trapped:x.open,onMountAutoFocus:Z=>{Z.preventDefault()},onUnmountAutoFocus:he(o,Z=>{var q;(q=x.trigger)==null||q.focus({preventScroll:!0}),Z.preventDefault()}),children:h.jsx(ku,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:i,onFocusOutside:Z=>Z.preventDefault(),onDismiss:()=>x.onOpenChange(!1),children:h.jsx(Q,{role:"listbox",id:x.contentId,"data-state":x.open?"open":"closed",dir:x.dir,onContextMenu:Z=>Z.preventDefault(),...b,...oe,onPlaced:()=>C(!0),ref:S,style:{display:"flex",flexDirection:"column",outline:"none",...b.style},onKeyDown:he(b.onKeyDown,Z=>{const q=Z.ctrlKey||Z.altKey||Z.metaKey;if(Z.key==="Tab"&&Z.preventDefault(),!q&&Z.key.length===1&&H(Z.key),["ArrowUp","ArrowDown","Home","End"].includes(Z.key)){let W=R().filter(J=>!J.disabled).map(J=>J.ref.current);if(["ArrowUp","End"].includes(Z.key)&&(W=W.slice().reverse()),["ArrowUp","ArrowDown"].includes(Z.key)){const J=Z.target,te=W.indexOf(J);W=W.slice(te+1)}setTimeout(()=>T(W)),Z.preventDefault()}})})})})})})});f3.displayName=Joe;var Goe="SelectItemAlignedPosition",p3=g.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...o}=e,a=Jo(Ia,n),i=Go(Ia,n),[s,c]=g.useState(null),[l,u]=g.useState(null),d=nt(t,S=>u(S)),f=qf(n),p=g.useRef(!1),y=g.useRef(!0),{viewport:m,selectedItem:v,selectedItemText:b,focusSelectedItem:x}=i,_=g.useCallback(()=>{if(a.trigger&&a.valueNode&&s&&l&&m&&v&&b){const S=a.trigger.getBoundingClientRect(),O=l.getBoundingClientRect(),P=a.valueNode.getBoundingClientRect(),M=b.getBoundingClientRect();if(a.dir!=="rtl"){const J=M.left-O.left,te=P.left-J,$=S.left-te,se=S.width+$,le=Math.max(se,O.width),ve=window.innerWidth-yr,Te=Am(te,[yr,Math.max(yr,ve-le)]);s.style.minWidth=se+"px",s.style.left=Te+"px"}else{const J=O.right-M.right,te=window.innerWidth-P.right-J,$=window.innerWidth-S.right-te,se=S.width+$,le=Math.max(se,O.width),ve=window.innerWidth-yr,Te=Am(te,[yr,Math.max(yr,ve-le)]);s.style.minWidth=se+"px",s.style.right=Te+"px"}const k=f(),R=window.innerHeight-yr*2,A=m.scrollHeight,C=window.getComputedStyle(l),N=parseInt(C.borderTopWidth,10),T=parseInt(C.paddingTop,10),I=parseInt(C.borderBottomWidth,10),L=parseInt(C.paddingBottom,10),D=N+T+A+L+I,B=Math.min(v.offsetHeight*5,D),H=window.getComputedStyle(m),F=parseInt(H.paddingTop,10),z=parseInt(H.paddingBottom,10),G=S.top+S.height/2-yr,Q=R-G,oe=v.offsetHeight/2,Z=v.offsetTop+oe,q=N+T+Z,W=D-q;if(q<=G){const J=k.length>0&&v===k[k.length-1].ref.current;s.style.bottom="0px";const te=l.clientHeight-m.offsetTop-m.offsetHeight,$=Math.max(Q,oe+(J?z:0)+te+I),se=q+$;s.style.height=se+"px"}else{const J=k.length>0&&v===k[0].ref.current;s.style.top="0px";const te=Math.max(G,N+m.offsetTop+(J?F:0)+oe)+W;s.style.height=te+"px",m.scrollTop=q-G+m.offsetTop}s.style.margin=`${yr}px 0`,s.style.minHeight=B+"px",s.style.maxHeight=R+"px",r==null||r(),requestAnimationFrame(()=>p.current=!0)}},[f,a.trigger,a.valueNode,s,l,m,v,b,a.dir,r]);xn(()=>_(),[_]);const[w,j]=g.useState();xn(()=>{l&&j(window.getComputedStyle(l).zIndex)},[l]);const E=g.useCallback(S=>{S&&y.current===!0&&(_(),x==null||x(),y.current=!1)},[_,x]);return h.jsx(eae,{scope:n,contentWrapper:s,shouldExpandOnScrollRef:p,onScrollButtonChange:E,children:h.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:w},children:h.jsx(Oe.div,{...o,ref:d,style:{boxSizing:"border-box",maxHeight:"100%",...o.style}})})})});p3.displayName=Goe;var Zoe="SelectPopperPosition",Yx=g.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:o=yr,...a}=e,i=Yf(n);return h.jsx(_d,{...i,...a,ref:t,align:r,collisionPadding:o,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Yx.displayName=Zoe;var[eae,Kx]=as(Ia,{}),Xx="SelectViewport",h3=g.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:r,...o}=e,a=Go(Xx,n),i=Kx(Xx,n),s=nt(t,a.onViewportChange),c=g.useRef(0);return h.jsxs(h.Fragment,{children:[h.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),h.jsx(Wf.Slot,{scope:n,children:h.jsx(Oe.div,{"data-radix-select-viewport":"",role:"presentation",...o,ref:s,style:{position:"relative",flex:1,overflow:"hidden auto",...o.style},onScroll:he(o.onScroll,l=>{const u=l.currentTarget,{contentWrapper:d,shouldExpandOnScrollRef:f}=i;if(f!=null&&f.current&&d){const p=Math.abs(c.current-u.scrollTop);if(p>0){const y=window.innerHeight-yr*2,m=parseFloat(d.style.minHeight),v=parseFloat(d.style.height),b=Math.max(m,v);if(b<y){const x=b+p,_=Math.min(y,x),w=x-_;d.style.height=_+"px",d.style.bottom==="0px"&&(u.scrollTop=w>0?w:0,d.style.justifyContent="flex-end")}}}c.current=u.scrollTop})})})]})});h3.displayName=Xx;var m3="SelectGroup",[tae,nae]=as(m3),rae=g.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,o=mt();return h.jsx(tae,{scope:n,id:o,children:h.jsx(Oe.div,{role:"group","aria-labelledby":o,...r,ref:t})})});rae.displayName=m3;var y3="SelectLabel",g3=g.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,o=nae(y3,n);return h.jsx(Oe.div,{id:o.id,...r,ref:t})});g3.displayName=y3;var Kf="SelectItem",[oae,v3]=as(Kf),b3=g.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:o=!1,textValue:a,...i}=e,s=Jo(Kf,n),c=Go(Kf,n),l=s.value===r,[u,d]=g.useState(a??""),[f,p]=g.useState(!1),y=nt(t,x=>{var _;return(_=c.itemRefCallback)==null?void 0:_.call(c,x,r,o)}),m=mt(),v=g.useRef("touch"),b=()=>{o||(s.onValueChange(r),s.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return h.jsx(oae,{scope:n,value:r,disabled:o,textId:m,isSelected:l,onItemTextChange:g.useCallback(x=>{d(_=>_||((x==null?void 0:x.textContent)??"").trim())},[]),children:h.jsx(Wf.ItemSlot,{scope:n,value:r,disabled:o,textValue:u,children:h.jsx(Oe.div,{role:"option","aria-labelledby":m,"data-highlighted":f?"":void 0,"aria-selected":l&&f,"data-state":l?"checked":"unchecked","aria-disabled":o||void 0,"data-disabled":o?"":void 0,tabIndex:o?void 0:-1,...i,ref:y,onFocus:he(i.onFocus,()=>p(!0)),onBlur:he(i.onBlur,()=>p(!1)),onClick:he(i.onClick,()=>{v.current!=="mouse"&&b()}),onPointerUp:he(i.onPointerUp,()=>{v.current==="mouse"&&b()}),onPointerDown:he(i.onPointerDown,x=>{v.current=x.pointerType}),onPointerMove:he(i.onPointerMove,x=>{var _;v.current=x.pointerType,o?(_=c.onItemLeave)==null||_.call(c):v.current==="mouse"&&x.currentTarget.focus({preventScroll:!0})}),onPointerLeave:he(i.onPointerLeave,x=>{var _;x.currentTarget===document.activeElement&&((_=c.onItemLeave)==null||_.call(c))}),onKeyDown:he(i.onKeyDown,x=>{var _;((_=c.searchRef)==null?void 0:_.current)!==""&&x.key===" "||(Hoe.includes(x.key)&&b(),x.key===" "&&x.preventDefault())})})})})});b3.displayName=Kf;var Ol="SelectItemText",x3=g.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:o,...a}=e,i=Jo(Ol,n),s=Go(Ol,n),c=v3(Ol,n),l=Koe(Ol,n),[u,d]=g.useState(null),f=nt(t,b=>d(b),c.onItemTextChange,b=>{var x;return(x=s.itemTextRefCallback)==null?void 0:x.call(s,b,c.value,c.disabled)}),p=u==null?void 0:u.textContent,y=g.useMemo(()=>h.jsx("option",{value:c.value,disabled:c.disabled,children:p},c.value),[c.disabled,c.value,p]),{onNativeOptionAdd:m,onNativeOptionRemove:v}=l;return xn(()=>(m(y),()=>v(y)),[m,v,y]),h.jsxs(h.Fragment,{children:[h.jsx(Oe.span,{id:c.textId,...a,ref:f}),c.isSelected&&i.valueNode&&!i.valueNodeHasChildren?Nu.createPortal(a.children,i.valueNode):null]})});x3.displayName=Ol;var w3="SelectItemIndicator",_3=g.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return v3(w3,n).isSelected?h.jsx(Oe.span,{"aria-hidden":!0,...r,ref:t}):null});_3.displayName=w3;var Qx="SelectScrollUpButton",j3=g.forwardRef((e,t)=>{const n=Go(Qx,e.__scopeSelect),r=Kx(Qx,e.__scopeSelect),[o,a]=g.useState(!1),i=nt(t,r.onScrollButtonChange);return xn(()=>{if(n.viewport&&n.isPositioned){let s=function(){const l=c.scrollTop>0;a(l)};const c=n.viewport;return s(),c.addEventListener("scroll",s),()=>c.removeEventListener("scroll",s)}},[n.viewport,n.isPositioned]),o?h.jsx(S3,{...e,ref:i,onAutoScroll:()=>{const{viewport:s,selectedItem:c}=n;s&&c&&(s.scrollTop=s.scrollTop-c.offsetHeight)}}):null});j3.displayName=Qx;var Jx="SelectScrollDownButton",E3=g.forwardRef((e,t)=>{const n=Go(Jx,e.__scopeSelect),r=Kx(Jx,e.__scopeSelect),[o,a]=g.useState(!1),i=nt(t,r.onScrollButtonChange);return xn(()=>{if(n.viewport&&n.isPositioned){let s=function(){const l=c.scrollHeight-c.clientHeight,u=Math.ceil(c.scrollTop)<l;a(u)};const c=n.viewport;return s(),c.addEventListener("scroll",s),()=>c.removeEventListener("scroll",s)}},[n.viewport,n.isPositioned]),o?h.jsx(S3,{...e,ref:i,onAutoScroll:()=>{const{viewport:s,selectedItem:c}=n;s&&c&&(s.scrollTop=s.scrollTop+c.offsetHeight)}}):null});E3.displayName=Jx;var S3=g.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...o}=e,a=Go("SelectScrollButton",n),i=g.useRef(null),s=qf(n),c=g.useCallback(()=>{i.current!==null&&(window.clearInterval(i.current),i.current=null)},[]);return g.useEffect(()=>()=>c(),[c]),xn(()=>{var l,u;(u=(l=s().find(d=>d.ref.current===document.activeElement))==null?void 0:l.ref.current)==null||u.scrollIntoView({block:"nearest"})},[s]),h.jsx(Oe.div,{"aria-hidden":!0,...o,ref:t,style:{flexShrink:0,...o.style},onPointerDown:he(o.onPointerDown,()=>{i.current===null&&(i.current=window.setInterval(r,50))}),onPointerMove:he(o.onPointerMove,()=>{var l;(l=a.onItemLeave)==null||l.call(a),i.current===null&&(i.current=window.setInterval(r,50))}),onPointerLeave:he(o.onPointerLeave,()=>{c()})})}),aae="SelectSeparator",C3=g.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return h.jsx(Oe.div,{"aria-hidden":!0,...r,ref:t})});C3.displayName=aae;var Gx="SelectArrow",iae=g.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,o=Yf(n),a=Jo(Gx,n),i=Go(Gx,n);return a.open&&i.position==="popper"?h.jsx(jd,{...o,...r,ref:t}):null});iae.displayName=Gx;function O3(e){return e===""||e===void 0}var M3=g.forwardRef((e,t)=>{const{value:n,...r}=e,o=g.useRef(null),a=nt(t,o),i=n3(n);return g.useEffect(()=>{const s=o.current,c=window.HTMLSelectElement.prototype,l=Object.getOwnPropertyDescriptor(c,"value").set;if(i!==n&&l){const u=new Event("change",{bubbles:!0});l.call(s,n),s.dispatchEvent(u)}},[i,n]),h.jsx(hwe,{asChild:!0,children:h.jsx("select",{...r,ref:a,defaultValue:n})})});M3.displayName="BubbleSelect";function N3(e){const t=Io(e),n=g.useRef(""),r=g.useRef(0),o=g.useCallback(i=>{const s=n.current+i;t(s),function c(l){n.current=l,window.clearTimeout(r.current),l!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(s)},[t]),a=g.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return g.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,o,a]}function k3(e,t,n){const r=t.length>1&&Array.from(t).every(s=>s===t[0])?t[0]:t,o=n?e.indexOf(n):-1;let a=sae(e,Math.max(o,0));r.length===1&&(a=a.filter(s=>s!==n));const i=a.find(s=>s.textValue.toLowerCase().startsWith(r.toLowerCase()));return i!==n?i:void 0}function sae(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var cae=r3,P3=a3,lae=s3,uae=c3,dae=l3,A3=u3,fae=h3,T3=g3,R3=b3,pae=x3,hae=_3,I3=j3,D3=E3,L3=C3;const go=cae,vo=lae,Dr=g.forwardRef(({className:e,children:t,...n},r)=>h.jsxs(P3,{ref:r,className:K("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...n,children:[t,h.jsx(uae,{asChild:!0,children:h.jsx(de,{name:"chevron-down",className:"h-4 w-4 opacity-50"})})]}));Dr.displayName=P3.displayName;const F3=g.forwardRef(({className:e,...t},n)=>h.jsx(I3,{ref:n,className:K("flex cursor-default items-center justify-center py-1",e),...t,children:h.jsx(de,{name:"chevron-up",className:"h-4 w-4"})}));F3.displayName=I3.displayName;const B3=g.forwardRef(({className:e,...t},n)=>h.jsx(D3,{ref:n,className:K("flex cursor-default items-center justify-center py-1",e),...t,children:h.jsx(de,{name:"chevron-down",className:"h-4 w-4"})}));B3.displayName=D3.displayName;const Lr=g.forwardRef(({className:e,children:t,position:n="popper",...r},o)=>h.jsx(dae,{children:h.jsxs(A3,{ref:o,className:K("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[h.jsx(F3,{}),h.jsx(fae,{className:K("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),h.jsx(B3,{})]})}));Lr.displayName=A3.displayName;const mae=g.forwardRef(({className:e,...t},n)=>h.jsx(T3,{ref:n,className:K("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));mae.displayName=T3.displayName;const Sn=g.forwardRef(({className:e,children:t,...n},r)=>h.jsxs(R3,{ref:r,className:K("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[h.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:h.jsx(hae,{children:h.jsx(de,{name:"check",className:"h-4 w-4"})})}),h.jsx(pae,{children:t})]}));Sn.displayName=R3.displayName;const yae=g.forwardRef(({className:e,...t},n)=>h.jsx(L3,{ref:n,className:K("-mx-1 my-1 h-px bg-muted",e),...t}));yae.displayName=L3.displayName;const gae=[Uu.WebLLM];function vae(e){var C;const{id:t,setDialog:n}=e,{t:r}=ke("components"),{toast:o}=Ht(),a=ln(t),[i,s]=g.useState(""),[c,l]=g.useState(!1),[u,d]=g.useState(""),[f,p]=g.useState(Uu.WebLLM),[y,m]=g.useState(!1),[v,b]=g.useState(),x=an(N=>N.syncCachedLLMURLs),_=an(N=>N.cachedLLMURLs),{loading:w,createDatabaseLLM:j}=kD();g.useEffect(()=>{At(()=>import("./index-CsUvhQqZ.js").then(async N=>(await N.__tla,N)),__vite__mapDeps([7,1,2,3,4,5,6])).then(async({functionCallingModelIds:N,prebuiltAppConfig:T})=>{const I=T.model_list;b({modelList:I,functionCallingModelIds:N})})},[]),g.useEffect(()=>{x()},[x]);const E=g.useMemo(()=>!(v!=null&&v.functionCallingModelIds)||!(v!=null&&v.modelList)?[]:((u?v==null?void 0:v.modelList.filter(N=>N.model_id.toLowerCase().includes(u.toLowerCase())):v==null?void 0:v.modelList)||[]).sort((N,T)=>{const I=_.some(z=>z.includes(N.model_id)),L=_.some(z=>z.includes(T.model_id));if(I&&!L)return-1;if(!I&&L)return 1;const D=Vf.includes(N.model_id),B=Vf.includes(T.model_id);if(D&&!B)return-1;if(!D&&B)return 1;const H=v==null?void 0:v.functionCallingModelIds.includes(N.model_id),F=v==null?void 0:v.functionCallingModelIds.includes(T.model_id);return H&&!F?-1:!H&&F?1:N.vram_required_MB&&T.vram_required_MB&&N.vram_required_MB!==T.vram_required_MB?N.vram_required_MB-T.vram_required_MB:N.model_id.localeCompare(T.model_id)}),[v==null?void 0:v.modelList,v==null?void 0:v.functionCallingModelIds,u,_]),S=g.useMemo(()=>{if(!(!i||!(v!=null&&v.modelList)))return v==null?void 0:v.modelList.find(N=>N.model_id===i)},[i,v==null?void 0:v.modelList]);g.useEffect(()=>{!(S!=null&&S.model_id)||!_||m(_.some(N=>N.includes(S.model_id)))},[_,S==null?void 0:S.model_id]);const O=g.useCallback(N=>N===1?sc.embedding:N===2?sc.VLM:sc.LLM,[]),P=g.useCallback(N=>{s(N),l(!1)},[]),M=g.useCallback(N=>{d(N)},[]),k=g.useCallback(N=>{p(N)},[]),R=async()=>{var N;if(a)try{await j(a,{name:i,model_type:O(S==null?void 0:S.model_type),function_calling:S!=null&&S.model_id?(N=v==null?void 0:v.functionCallingModelIds)==null?void 0:N.includes(S==null?void 0:S.model_id):!1}),n==null||n(!1)}catch{o({variant:"destructive",description:r("add_llm_card.errors.failed_to_create")})}finally{s("")}},A=g.useMemo(()=>E.map(N=>{var T;return h.jsxs(t3,{value:N.model_id,onSelect:P,children:[i===N.model_id?h.jsx(de,{name:"check",className:"mr-2 h-4 w-4"}):h.jsx("div",{className:"mr-2 h-4 w-4"}),h.jsxs("span",{className:"max-w-md",children:[h.jsxs("div",{className:"flex gap-2 mb-2",children:[h.jsx(Ir,{name:N.model_id}),N.model_id]}),h.jsx("div",{className:"flex max-w-full flex-wrap gap-1",children:h.jsx(ns,{model:N,isFunctionCalling:((T=v==null?void 0:v.functionCallingModelIds)==null?void 0:T.includes(N.model_id))||!1,name:N.model_id,isCached:_.some(I=>I.includes(N.model_id))||!1})})]})]},N.model_id)}),[_,P,i,v==null?void 0:v.functionCallingModelIds,E]);return h.jsxs(Tt,{className:"max-w-lg",children:[h.jsx(hn,{children:h.jsx(jn,{children:r("add_llm_card.title")})}),h.jsxs(mn,{children:[h.jsxs("div",{className:"grid w-full gap-1.5",children:[h.jsx(Qe,{children:r("add_llm_card.provider")}),h.jsxs(go,{value:f,onValueChange:k,children:[h.jsx(Dr,{className:"w-full mb-4",children:h.jsx(vo,{placeholder:r("add_llm_card.provider_select_placeholder")})}),h.jsx(Lr,{children:Object.values(gae).map(N=>h.jsx(Sn,{value:N,children:r(`add_llm_card.providers.${N.toLowerCase()}`)},N))})]}),h.jsx(Qe,{children:r("add_llm_card.model_name")}),h.jsxs(goe,{open:c,onOpenChange:l,children:[h.jsx(Fx,{asChild:!0,children:h.jsxs(ft,{variant:"outline",role:"combobox","aria-expanded":c,className:"w-full justify-between",children:[i?S==null?void 0:S.model_id:r("add_llm_card.select_model_placeholder"),h.jsx(de,{name:"chevrons-up-down",className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),h.jsx(BD,{className:"w-full p-0",children:h.jsxs(QD,{children:[h.jsx(JD,{onValueChange:M,placeholder:r("add_llm_card.search_placeholder")}),h.jsxs(GD,{children:[h.jsx(ZD,{children:r("add_llm_card.no_model")}),h.jsx(e3,{children:A})]})]})})]})]}),S?h.jsxs("div",{className:"mt-4",children:[h.jsxs("div",{className:"mt-4 text-sm text-muted-foreground center flex max-w-full flex-wrap gap-1",children:[h.jsx(Ir,{name:S.model_id,className:"mr-2"}),h.jsx(ns,{model:S,isFunctionCalling:((C=v==null?void 0:v.functionCallingModelIds)==null?void 0:C.includes(S.model_id))||!1,name:S.model_id,isCached:_.some(N=>N.includes(S.model_id))||!1})]}),h.jsxs("div",{className:"mt-2 text-sm text-muted-foreground",children:[h.jsx("span",{className:"font-bold mr-2",children:r("add_llm_card.model_url")}),S.model]}),h.jsxs("div",{className:"mt-2 text-sm text-muted-foreground center flex",children:[h.jsx("span",{className:"font-bold mr-2",children:r("add_llm_card.model_lib_url")}),S.model_lib]}),h.jsxs("div",{className:"mt-2 text-sm text-muted-foreground center flex",children:[h.jsx("span",{className:"font-bold mr-2",children:r("add_llm_card.metadata")}),JSON.stringify(S.overrides)]})]}):null]}),h.jsx(Xo,{className:"flex justify-between",children:h.jsx(Nn,{loading:w,disabled:!(i!=null&&i.length),onClick:R,className:"w-full",children:r(y?"add_llm_card.button_add":"add_llm_card.button_download_and_add")})})]})}const $3=()=>{const e=ot(a=>{var i;return(i=a.currentSession)==null?void 0:i.id}),[t,n]=g.useState(!1),r=Ae(a=>a.createOrUpdateFlowNode),o=g.useCallback(async(a,i)=>{var s,c,l;try{if(!a||!e)throw new Error("Source or Session not found");n(!0);const u=((s=a.position)==null?void 0:s.x)||0,d=(((c=a.position)==null?void 0:c.y)||0)+(((l=a.measured)==null?void 0:l.height)||0),f=await ce("Prompt").save({content:i.content,prefix:i.prefix,role:i.role||kn.System,status:Yr.Started,session_id:e,type:i.type||Pn.Chat});if(!f)throw new Error("Failed to save prompt");if(!await r({source_id:f.id,source_type:"Prompt",node_type:re.Prompt,x:u,y:d+20}))throw new Error("Failed to save prompt node")}finally{n(!1)}},[e,r]);return{loading:t,createPrompt:o}},bae={[Pn.Chat]:{label:"add_prompt_card.prompt_types.chat",value:Pn.Chat},[Pn.FewShotExample]:{label:"add_prompt_card.prompt_types.few_shot_example",value:Pn.FewShotExample}},xae={[kn.System]:{label:"add_prompt_card.prompt_roles.system",value:kn.System},[kn.Human]:{label:"add_prompt_card.prompt_roles.human",value:kn.Human},[kn.AI]:{label:"add_prompt_card.prompt_roles.ai",value:kn.AI}},Zx=g.memo(({defaultPromptContent:e,defaultPromptRole:t,defaultPromptType:n,hidePromptRole:r,hidePromptType:o,loading:a,onSubmit:i})=>{const[s,c]=g.useState(e||""),[l,u]=g.useState(n||Pn.Chat),[d,f]=g.useState(t),[p,y]=g.useState(""),{t:m}=ke("components"),v=g.useCallback(j=>{c(j.target.value)},[]),b=g.useCallback(j=>{y(j.target.value)},[]),x=g.useCallback(j=>{j===Pn.FewShotExample&&c(`Question: {input}
Answer: {output}`),u(j)},[]),_=g.useCallback(j=>{f(j)},[]),w=async()=>{await i({content:s,role:d,prefix:p,type:l})&&(c(""),f(void 0),u("chat"),y(""))};return h.jsxs("div",{children:[h.jsxs("div",{className:"grid w-full gap-1.5",children:[o?void 0:h.jsxs(h.Fragment,{children:[h.jsx(Qe,{children:m("add_prompt_card.prompt_type")}),h.jsxs(go,{value:l,onValueChange:x,children:[h.jsx(Dr,{className:"w-full mb-4",children:h.jsx(vo,{placeholder:m("add_prompt_card.type_select_placeholder")})}),h.jsx(Lr,{children:Object.values(bae).map(j=>h.jsx(Sn,{value:j.value,children:m(j.label)},j.value))})]})]}),r?void 0:h.jsxs(h.Fragment,{children:[h.jsx(Qe,{children:m("add_prompt_card.prompt_role")}),h.jsxs(go,{value:d,onValueChange:_,children:[h.jsx(Dr,{className:"w-full mb-4",children:h.jsx(vo,{placeholder:m("add_prompt_card.role_select_placeholder")})}),h.jsx(Lr,{children:Object.values(xae).map(j=>h.jsx(Sn,{value:j.value,children:m(j.label)},j.value))})]})]}),l===Pn.FewShotExample&&h.jsxs(h.Fragment,{children:[h.jsx(Qe,{children:m("add_prompt_card.prompt_prefix")}),h.jsx(so,{value:p,onChange:b,disabled:!1,className:"h-20",placeholder:m("add_prompt_card.placeholder"),id:"message"}),h.jsx(Qe,{children:m("add_prompt_card.prompt_content")}),h.jsxs("div",{className:"w-full border-0 text-gray-700 flex text-sm justify-end items-center",children:[h.jsx(de,{name:"info",className:"mr-2",size:14}),m("add_prompt_card.few_shot_example_note")]})]}),h.jsx(so,{value:s,onChange:v,disabled:!1,placeholder:m("add_prompt_card.placeholder"),id:"message"})]}),h.jsx("div",{children:h.jsx(Nn,{loading:a,disabled:!(s!=null&&s.length),onClick:w,className:"w-full mt-4",children:m("add_prompt_card.button")})})]})}),wae=g.memo(e=>{const{id:t,thread:n,setDialog:r}=e,{t:o}=ke("components"),{toast:a}=Ht(),i=ln(t),{createPrompt:s,loading:c}=$3(),l=async u=>{if(i)try{if(!(u!=null&&u.content))throw new Error("Prompt data is missing");await s(i,{...u,content:u.content,thread:n}),r==null||r(!1)}catch(d){a({variant:"destructive",title:`${d}`})}};return h.jsxs(Tt,{className:"mw-full",children:[h.jsx(hn,{children:h.jsx(jn,{children:o("add_prompt_card.title")})}),h.jsx(mn,{children:h.jsx(Zx,{onSubmit:l,loading:c,defaultPromptRole:"system",defaultPromptType:"chat"})})]})}),_ae="0123456789abcdef",jae=[8,4,4,4,12];function ew(){return jae.map(e=>mwe(_ae,e)()).join("-")}const Eae=()=>{const e=ot(i=>{var s;return(s=i.currentSession)==null?void 0:s.id}),[t,n]=g.useState(!1),r=Ae(i=>i.createOrUpdateFlowNode),o=g.useCallback((i,s,c,l)=>{var u;if(e){for(const d of s)(u=d.data)!=null&&u.length?o(i,d.data,c,d.id):c.push({name:d.name,type:d.type,enum:d.enum?JSON.stringify(d.enum):"",required:d.required,description:d.description,id:d.id||ew(),parent_id:l,schema_id:i,session_id:e});return c}},[e]),a=g.useCallback(async(i,s)=>{var c,l,u;try{if(!i||!e)throw new Error("Source or Session not found");n(!0);const d=((c=i.position)==null?void 0:c.x)||0,f=(((l=i.position)==null?void 0:l.y)||0)+(((u=i.measured)==null?void 0:u.height)||0),p=await ce("Schema").save({name:"Untitled Schema",session_id:e});if(!p)throw new Error("Failed to save schema");const y=o(p.id,s,[],void 0);if(!(y!=null&&y.length))throw new Error("Failed to convert schema items");if(await ce("SchemaItem").save(y),!await r({source_id:p.id,source_type:"Schema",node_type:re.Schema,x:d,y:f+20}))throw new Error("Failed to save schema node")}finally{n(!1)}},[e,o,r]);return{loading:t,createSchema:a}};var bo="Accordion",Sae=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[tw,Cae,Oae]=Ru(bo),[Xf,Vwe]=Vn(bo,[Oae,gC]),nw=gC(),z3=U.forwardRef((e,t)=>{const{type:n,...r}=e,o=r,a=r;return h.jsx(tw.Provider,{scope:e.__scopeAccordion,children:n==="multiple"?h.jsx(Pae,{...a,ref:t}):h.jsx(kae,{...o,ref:t})})});z3.displayName=bo;var[V3,Mae]=Xf(bo),[U3,Nae]=Xf(bo,{collapsible:!1}),kae=U.forwardRef((e,t)=>{const{value:n,defaultValue:r,onValueChange:o=()=>{},collapsible:a=!1,...i}=e,[s,c]=Zt({prop:n,defaultProp:r,onChange:o});return h.jsx(V3,{scope:e.__scopeAccordion,value:s?[s]:[],onItemOpen:c,onItemClose:U.useCallback(()=>a&&c(""),[a,c]),children:h.jsx(U3,{scope:e.__scopeAccordion,collapsible:a,children:h.jsx(H3,{...i,ref:t})})})}),Pae=U.forwardRef((e,t)=>{const{value:n,defaultValue:r,onValueChange:o=()=>{},...a}=e,[i=[],s]=Zt({prop:n,defaultProp:r,onChange:o}),c=U.useCallback(u=>s((d=[])=>[...d,u]),[s]),l=U.useCallback(u=>s((d=[])=>d.filter(f=>f!==u)),[s]);return h.jsx(V3,{scope:e.__scopeAccordion,value:i,onItemOpen:c,onItemClose:l,children:h.jsx(U3,{scope:e.__scopeAccordion,collapsible:!0,children:h.jsx(H3,{...a,ref:t})})})}),[Aae,Qf]=Xf(bo),H3=U.forwardRef((e,t)=>{const{__scopeAccordion:n,disabled:r,dir:o,orientation:a="vertical",...i}=e,s=U.useRef(null),c=nt(s,t),l=Cae(n),u=Do(o)==="ltr",d=he(e.onKeyDown,f=>{var S;if(!Sae.includes(f.key))return;const p=f.target,y=l().filter(O=>{var P;return!((P=O.ref.current)!=null&&P.disabled)}),m=y.findIndex(O=>O.ref.current===p),v=y.length;if(m===-1)return;f.preventDefault();let b=m;const x=0,_=v-1,w=()=>{b=m+1,b>_&&(b=x)},j=()=>{b=m-1,b<x&&(b=_)};switch(f.key){case"Home":b=x;break;case"End":b=_;break;case"ArrowRight":a==="horizontal"&&(u?w():j());break;case"ArrowDown":a==="vertical"&&w();break;case"ArrowLeft":a==="horizontal"&&(u?j():w());break;case"ArrowUp":a==="vertical"&&j();break}const E=b%v;(S=y[E].ref.current)==null||S.focus()});return h.jsx(Aae,{scope:n,disabled:r,direction:o,orientation:a,children:h.jsx(tw.Slot,{scope:n,children:h.jsx(Oe.div,{...i,"data-orientation":a,ref:c,onKeyDown:r?void 0:d})})})}),Jf="AccordionItem",[Tae,rw]=Xf(Jf),W3=U.forwardRef((e,t)=>{const{__scopeAccordion:n,value:r,...o}=e,a=Qf(Jf,n),i=Mae(Jf,n),s=nw(n),c=mt(),l=r&&i.value.includes(r)||!1,u=a.disabled||e.disabled;return h.jsx(Tae,{scope:n,open:l,disabled:u,triggerId:c,children:h.jsx(xC,{"data-orientation":a.orientation,"data-state":J3(l),...s,...o,ref:t,disabled:u,open:l,onOpenChange:d=>{d?i.onItemOpen(r):i.onItemClose(r)}})})});W3.displayName=Jf;var q3="AccordionHeader",Y3=U.forwardRef((e,t)=>{const{__scopeAccordion:n,...r}=e,o=Qf(bo,n),a=rw(q3,n);return h.jsx(Oe.h3,{"data-orientation":o.orientation,"data-state":J3(a.open),"data-disabled":a.disabled?"":void 0,...r,ref:t})});Y3.displayName=q3;var ow="AccordionTrigger",K3=U.forwardRef((e,t)=>{const{__scopeAccordion:n,...r}=e,o=Qf(bo,n),a=rw(ow,n),i=Nae(ow,n),s=nw(n);return h.jsx(tw.ItemSlot,{scope:n,children:h.jsx(gV,{"aria-disabled":a.open&&!i.collapsible||void 0,"data-orientation":o.orientation,id:a.triggerId,...s,...r,ref:t})})});K3.displayName=ow;var X3="AccordionContent",Q3=U.forwardRef((e,t)=>{const{__scopeAccordion:n,...r}=e,o=Qf(bo,n),a=rw(X3,n),i=nw(n);return h.jsx(vV,{role:"region","aria-labelledby":a.triggerId,"data-orientation":o.orientation,...i,...r,ref:t,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...e.style}})});Q3.displayName=X3;function J3(e){return e?"open":"closed"}let G3;oS=z3,aS=W3,G3=Y3,Tm=K3,Rm=Q3;const Z3=oS,aw=g.forwardRef(({className:e,...t},n)=>h.jsx(aS,{ref:n,className:K("border-b",e),...t}));aw.displayName="AccordionItem";const iw=g.forwardRef(({className:e,children:t,...n},r)=>h.jsx(G3,{className:"flex",children:h.jsxs(Tm,{ref:r,className:K("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",e),...n,children:[t,h.jsx(de,{name:"chevron-down",className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));iw.displayName=Tm.displayName;const sw=g.forwardRef(({className:e,children:t,...n},r)=>h.jsx(Rm,{ref:r,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...n,children:h.jsx("div",{className:K("pb-4 pt-0",e),children:t})}));sw.displayName=Rm.displayName;var cw="Checkbox",[Rae,Uwe]=Vn(cw),[Iae,Dae]=Rae(cw),e5=g.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:r,checked:o,defaultChecked:a,required:i,disabled:s,value:c="on",onCheckedChange:l,form:u,...d}=e,[f,p]=g.useState(null),y=nt(t,w=>p(w)),m=g.useRef(!1),v=f?u||!!f.closest("form"):!0,[b=!1,x]=Zt({prop:o,defaultProp:a,onChange:l}),_=g.useRef(b);return g.useEffect(()=>{const w=f==null?void 0:f.form;if(w){const j=()=>x(_.current);return w.addEventListener("reset",j),()=>w.removeEventListener("reset",j)}},[f,x]),h.jsxs(Iae,{scope:n,state:b,disabled:s,children:[h.jsx(Oe.button,{type:"button",role:"checkbox","aria-checked":Zo(b)?"mixed":b,"aria-required":i,"data-state":r5(b),"data-disabled":s?"":void 0,disabled:s,value:c,...d,ref:y,onKeyDown:he(e.onKeyDown,w=>{w.key==="Enter"&&w.preventDefault()}),onClick:he(e.onClick,w=>{x(j=>Zo(j)?!0:!j),v&&(m.current=w.isPropagationStopped(),m.current||w.stopPropagation())})}),v&&h.jsx(Lae,{control:f,bubbles:!m.current,name:r,value:c,checked:b,required:i,disabled:s,form:u,style:{transform:"translateX(-100%)"},defaultChecked:Zo(a)?!1:a})]})});e5.displayName=cw;var t5="CheckboxIndicator",n5=g.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:r,...o}=e,a=Dae(t5,n);return h.jsx(Mn,{present:r||Zo(a.state)||a.state===!0,children:h.jsx(Oe.span,{"data-state":r5(a.state),"data-disabled":a.disabled?"":void 0,...o,ref:t,style:{pointerEvents:"none",...e.style}})})});n5.displayName=t5;var Lae=e=>{const{control:t,checked:n,bubbles:r=!0,defaultChecked:o,...a}=e,i=g.useRef(null),s=n3(n),c=kO(t);g.useEffect(()=>{const u=i.current,d=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(d,"checked").set;if(s!==n&&f){const p=new Event("click",{bubbles:r});u.indeterminate=Zo(n),f.call(u,Zo(n)?!1:n),u.dispatchEvent(p)}},[s,n,r]);const l=g.useRef(Zo(n)?!1:n);return h.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:o??l.current,...a,tabIndex:-1,ref:i,style:{...e.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function Zo(e){return e==="indeterminate"}function r5(e){return Zo(e)?"indeterminate":e?"checked":"unchecked"}dm=e5,YE=n5;const o5=g.forwardRef(({className:e,...t},n)=>h.jsx(dm,{ref:n,className:K("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:h.jsx(YE,{className:K("flex items-center justify-center text-current"),children:h.jsx(de,{name:"check",className:"h-4 w-4"})})}));o5.displayName=dm.displayName;const a5=g.memo(({setData:e,data:t,id:n})=>{const{t:r}=ke("components"),[o,a]=g.useState({name:"",description:"",type:"string",required:!1,data:[]}),i=g.useMemo(()=>n&&t.find(m=>m.id===n)||o,[t,o,n]),s=g.useCallback(m=>{m.target.value&&!/^[a-zA-Z_][a-zA-Z0-9_]*$/.test(m.target.value)||(n?e(v=>[...v.map(b=>b.id===n?{...b,name:m.target.value||""}:b)]):a(v=>({...v,name:m.target.value||""})))},[n,e]),c=g.useCallback(m=>{n?e(v=>[...v.map(b=>b.id===n?{...b,description:m.target.value||""}:b)]):a(v=>({...v,description:m.target.value||""}))},[n,e]),l=g.useCallback(m=>{n?e(v=>[...v.map(b=>b.id===n?{...b,type:m||""}:b)]):a(v=>({...v,type:m||"string"}))},[n,e]),u=g.useCallback(m=>{n?e(v=>[...v.map(b=>b.id===n?{...b,required:!!m||!1}:b)]):a(v=>({...v,required:!!m||!1}))},[n,e]),d=g.useCallback(m=>{n?e(v=>[...v.map(b=>b.id===n?{...b,enum:m.target.value||""}:b)]):a(v=>({...v,enum:m.target.value||""}))},[n,e]),f=g.useCallback(()=>{if(t.find(m=>m.name===o.name))return Qs({variant:"destructive",content:"Name already exists"});o.id=ew(),e(m=>[...m,{...o}]),a({name:"",description:"",type:"string",required:!1,id:ew(),parent:n||void 0,data:[]})},[t,o,e,n]),p=g.useCallback(m=>{e(v=>[...v.map(b=>b.id===n?{...b,data:m(b.data||[])}:b)])},[n,e]),y=["object","array"].includes(i.type);return h.jsxs("div",{className:"w-full p-1",children:[h.jsxs("div",{children:[h.jsx(Qe,{children:r("add_schema_card.field.name")}),h.jsx(dn,{id:"name",onChange:s,placeholder:r("add_schema_card.field.name_placeholder"),value:(i==null?void 0:i.name)||""})]}),h.jsxs("div",{children:[h.jsx(Qe,{children:r("add_schema_card.field.description")}),h.jsx(dn,{id:"description",placeholder:r("add_schema_card.field.description_placeholder"),onChange:c,value:(i==null?void 0:i.description)||""})]}),h.jsxs("div",{children:[h.jsx(Qe,{children:r("add_schema_card.field.type")}),h.jsxs(go,{onValueChange:l,value:(i==null?void 0:i.type)||"",children:[h.jsx(Dr,{children:h.jsx(vo,{placeholder:r("add_schema_card.field.type_placeholder")})}),h.jsxs(Lr,{children:[h.jsx(Sn,{value:"string",children:r("add_schema_card.types.string")}),h.jsx(Sn,{value:"boolean",children:r("add_schema_card.types.boolean")}),h.jsx(Sn,{value:"number",children:r("add_schema_card.types.number")}),h.jsx(Sn,{value:"object",children:r("add_schema_card.types.object")}),h.jsx(Sn,{value:"array",children:r("add_schema_card.types.array")})]})]})]}),h.jsxs("div",{className:"flex items-center h-10",children:[h.jsx(Qe,{children:r("add_schema_card.field.required")}),h.jsx(o5,{className:"ml-2","aria-label":"Select row",onCheckedChange:u,checked:i==null?void 0:i.required})]}),y?h.jsxs("div",{className:"mt-2 flex flex-col gap-2",children:[h.jsx(Qe,{children:r("add_schema_card.children")}),h.jsx(i5,{data:(i==null?void 0:i.data)||[],setData:p})]}):null,(i==null?void 0:i.type)==="enum"?h.jsxs("div",{className:"mt-2 flex flex-col gap-2",children:[h.jsx(Qe,{children:r("add_schema_card.field.enum")}),h.jsx(dn,{id:"enum",onChange:d,placeholder:"Enum"})]}):null,n?null:h.jsx("div",{className:"w-full flex justify-end mt-2",children:h.jsx(ft,{variant:"secondary",disabled:!i.name||!i.description||!i.type,onClick:f,className:"w-full",children:r("add_schema_card.field.add_field")})})]})}),i5=g.memo(({data:e,setData:t})=>h.jsxs(Z3,{type:"single",collapsible:!0,children:[e.map(n=>h.jsxs(aw,{value:`${n.id}`,children:[h.jsx(iw,{children:n.name}),h.jsx(sw,{children:h.jsx(a5,{setData:t,data:e,id:n.id})})]},n.id||"new")),h.jsx(Tt,{className:"p-2 mt-4",children:h.jsx(a5,{setData:t,data:e})})]})),Fae=g.memo(e=>{const{t}=ke("components"),{id:n}=e,r=ln(n),[o,a]=g.useState([]),{createSchema:i,loading:s}=Eae(),c=async()=>{if(r&&(o!=null&&o.length))try{await i(r,o),a([])}catch(l){Qs({variant:"destructive",title:`${l}`})}};return h.jsxs(Tt,{className:"max-w-lg",children:[h.jsx(hn,{children:h.jsx(jn,{children:t("add_schema_card.title")})}),h.jsx(mn,{className:"min-w-96",children:h.jsx(i5,{setData:a,data:o})}),h.jsx(Xo,{className:"flex justify-between",children:h.jsx(Nn,{loading:s,disabled:!(o!=null&&o.length),onClick:c,className:"w-full",children:t("add_schema_card.create")})})]})}),s5=()=>{const e=ot(a=>{var i;return(i=a.currentSession)==null?void 0:i.id}),[t,n]=g.useState(!1),r=Ae(a=>a.createOrUpdateFlowNode),o=g.useCallback(async(a,i,s)=>{var c,l,u;try{if(!a||!e)throw new Error("Source or Session not found");n(!0);const d=((c=a.position)==null?void 0:c.x)||0,f=(((l=a.position)==null?void 0:l.y)||0)+(((u=a.measured)==null?void 0:u.height)||0),p=ywe(i,s),y=await ce("CSVData").save({headers:p.headers,csv:p.data,session_id:e});if(!y)throw new Error("Failed to save");if(!await r({source_id:y.id,source_type:"CSVData",node_type:re.CSVData,x:d,y:f+20}))throw new Error("Failed to save node")}finally{n(!1)}},[e,r]);return{loading:t,createCSVData:o}},Gf=g.forwardRef(({className:e,...t},n)=>h.jsx("div",{className:"relative w-full overflow-auto",children:h.jsx("table",{ref:n,className:K("w-full caption-bottom text-sm",e),...t})}));Gf.displayName="Table";const Zf=g.forwardRef(({className:e,...t},n)=>h.jsx("thead",{ref:n,className:K("[&_tr]:border-b",e),...t}));Zf.displayName="TableHeader";const ep=g.forwardRef(({className:e,...t},n)=>h.jsx("tbody",{ref:n,className:K("[&_tr:last-child]:border-0",e),...t}));ep.displayName="TableBody";const Bae=g.forwardRef(({className:e,...t},n)=>h.jsx("tfoot",{ref:n,className:K("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));Bae.displayName="TableFooter";const Da=g.forwardRef(({className:e,...t},n)=>h.jsx("tr",{ref:n,className:K("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));Da.displayName="TableRow";const is=g.forwardRef(({className:e,...t},n)=>h.jsx("th",{ref:n,className:K("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));is.displayName="TableHead";const ss=g.forwardRef(({className:e,...t},n)=>h.jsx("td",{ref:n,className:K("align-middle [&:has([role=checkbox])]:pr-0",e),...t}));ss.displayName="TableCell";const $ae=g.forwardRef(({className:e,...t},n)=>h.jsx("caption",{ref:n,className:K("mt-4 text-sm text-muted-foreground",e),...t}));$ae.displayName="TableCaption";function zae({data:e}){const{t}=ke("components");return h.jsxs(Gf,{className:"w-full",children:[h.jsx(Zf,{children:h.jsxs(Da,{children:[h.jsx(is,{children:t("add_few_shot_example_card.input")}),h.jsx(is,{children:t("add_few_shot_example_card.output")})]})}),h.jsx(ep,{children:e==null?void 0:e.map((n,r)=>h.jsxs(Da,{children:[h.jsx(ss,{className:"p-4",children:n.input}),h.jsx(ss,{className:"p-4",children:n.output})]},`${n.input}_${n.output}_${r}`))})]})}const Vae=g.memo(e=>{const{id:t}=e,{t:n}=ke("components"),[r,o]=g.useState([]),[a,i]=g.useState(""),[s,c]=g.useState(""),l=ln(t),{createCSVData:u,loading:d}=s5(),f=()=>{o(y=>[...y,{input:a,output:s}]),i(""),c("")},p=async()=>{l&&await u(l,["input","output"],r.map(y=>[y.input,y.output]))};return h.jsxs(Tt,{className:"mw-full",children:[h.jsx(hn,{children:h.jsx(jn,{children:n("add_few_shot_example_card.title")})}),h.jsxs(mn,{children:[h.jsxs("div",{className:"flex flex-col space-y-1.5",children:[h.jsx(Qe,{htmlFor:"name",children:n("add_few_shot_example_card.input")}),h.jsx(dn,{value:a,onChange:y=>i(y.target.value||""),id:"name",placeholder:n("add_few_shot_example_card.input_placeholder")})]}),h.jsxs("div",{className:"flex flex-col space-y-1.5 mt-3",children:[h.jsx(Qe,{htmlFor:"name",children:n("add_few_shot_example_card.output")}),h.jsx(so,{value:s,onChange:y=>c(y.target.value||""),placeholder:n("add_few_shot_example_card.output_placeholder")})]}),h.jsx("div",{className:"w-full flex mt-4 justify-end",children:h.jsx(ft,{disabled:!a||!s,onClick:f,className:"w-40",children:n("add_few_shot_example_card.add")})}),h.jsx(zae,{data:r||[]})]}),h.jsx(Xo,{className:"flex justify-between",children:h.jsx(Nn,{loading:d,disabled:!(r!=null&&r.length),onClick:p,className:"w-full",children:n("add_few_shot_example_card.create")})})]})}),Uae=()=>{const e=ot(i=>{var s;return(s=i.currentSession)==null?void 0:s.id}),[t,n]=g.useState(!1),r=Ae(i=>i.createOrUpdateFlowNode),o=Ae(i=>i.createOrUpdateFlowEdge),a=g.useCallback(async(i,s,c)=>{var l,u,d;try{if(!i||!e)throw new Error("Source or Session not found");if(!s.name||!s.description)throw new Error("Name is required");n(!0);const f=((l=i.position)==null?void 0:l.x)||0,p=(((u=i.position)==null?void 0:u.y)||0)+(((d=i.measured)==null?void 0:d.height)||0),y=await ce("ToolDefinition").save({...s,name:`${s.name}`,description:`${s.description}`,session_id:e});if(!y)throw new Error("Failed create tool.");const m=await r({source_id:y.id,source_type:"ToolDefinition",node_type:re.ToolDefinition,x:f,y:p+20});if(!m)throw new Error("Failed to save node");c!=null&&c.schemaNode&&await o({source:c.schemaNode.id,target:m.id})}finally{n(!1)}},[e,r,o]);return{loading:t,createTool:a}},Hae=g.memo(e=>{const{t}=ke("components"),{toast:n}=Ht(),{id:r}=e,o=ln(r),[a,i]=g.useState(""),[s,c]=g.useState(""),{createTool:l,loading:u}=Uae(),d=y=>{i(y.target.value)},f=y=>{c(y.target.value)},p=async()=>{if(o&&a&&s)try{await l(o,{name:a,description:s}),i(""),c("")}catch(y){Er(y),n({variant:"destructive",title:t("add_tool_card.errors.create_tool_failed")})}};return h.jsxs(Tt,{className:"mw-full",children:[h.jsx(hn,{children:h.jsx(jn,{children:t("add_tool_card.title")})}),h.jsxs(mn,{children:[h.jsxs("div",{className:"flex flex-col space-y-1.5",children:[h.jsx(Qe,{htmlFor:"name",children:t("add_tool_card.tool_name")}),h.jsx(dn,{onChange:d,id:"name",placeholder:t("add_tool_card.name_placeholder")})]}),h.jsxs("div",{className:"flex flex-col space-y-1.5 mt-3",children:[h.jsx(Qe,{htmlFor:"name",children:t("add_tool_card.tool_description")}),h.jsx(so,{onChange:f,placeholder:t("add_tool_card.description_placeholder")})]})]}),h.jsx(Xo,{className:"flex justify-between",children:h.jsx(Nn,{loading:u,onClick:p,className:"w-full",children:t("add_tool_card.create")})})]})}),Wae=()=>{const e=ot(i=>{var s;return(s=i.currentSession)==null?void 0:s.id}),[t,n]=g.useState(!1),r=Ae(i=>i.createOrUpdateFlowNode),o=Ae(i=>i.createOrUpdateFlowEdge),a=g.useCallback(async(i,s,c)=>{var l,u,d;try{if(!(s!=null&&s.name)||!i||!e)throw new Error("Source or Session not found");n(!0);const f=((l=i.position)==null?void 0:l.x)||0,p=(((u=i.position)==null?void 0:u.y)||0)+(((d=i.measured)==null?void 0:d.height)||0),y=await ce("VectorDatabase").save({...s,name:`${s.name}`,type:s.type||gwe.Local,storage:s.storage||da.DatabaseNode,raw:"",provider:s.provider||U9.Memory,session_id:e,metadata:c?JSON.stringify({textSplitter:c}):void 0});if(!y)throw new Error("Failed to save vectorDatabase");const m=await r({source_id:y.id,source_type:"VectorDatabase",node_type:re.VectorDatabase,x:f,y:p+30});if(!m)throw new Error("Failed to save vectorDatabase node");if(s.storage===da.DataNode){const v=await ce("JSONLData").save({headers:vwe(["content","embedding","metadata"]),jsonl:"",session_id:e});if(!v)throw new Error("Failed to save databaseSource");const b=await r({source_id:v.id,source_type:"JSONLData",node_type:re.JSONLData,x:f+80,y:p+30});if(!b)throw new Error("Failed to save databaseSource node");await o({source:b.id,target:m.id})}return{vectorDatabase:y,vectorDatabaseNode:m}}finally{n(!1)}},[e,r,o]);return{loading:t,createVectorDatabase:a}},Ml=[U9.Memory],Nl=[da.DatabaseNode],qae=["TokenTextSplitter","CharacterTextSplitter","RecursiveCharacterTextSplitter"],Yae=g.memo(e=>{const{t}=ke("components"),{id:n}=e,r=ln(n),{toast:o}=Ht(),[a,i]=g.useState(""),[s,c]=g.useState(Ml[0]),[l,u]=g.useState(Nl[0]),[d,f]=g.useState({}),{loading:p,createVectorDatabase:y}=Wae(),m=g.useCallback(E=>{c(E)},[]),v=g.useCallback(E=>{u(E)},[]),b=g.useCallback(E=>{f(S=>({...S,type:E,chunkSize:500,chunkOverlap:40}))},[]),x=g.useCallback(E=>{i(E.target.value||"")},[]),_=g.useCallback(E=>{f(S=>({...S,chunkSize:Number(E.target.value)}))},[]),w=g.useCallback(E=>{f(S=>({...S,chunkOverlap:Number(E.target.value)}))},[]),j=async()=>{try{if(!r)return;await y(r,{name:a,provider:s,storage:l},d!=null&&d.type?{type:d.type,chunkSize:d.chunkSize||500,chunkOverlap:d.chunkOverlap||0}:void 0),i(""),f({})}catch{o({variant:"destructive",description:t("create_vector_database_card.errors.create_failed")})}};return h.jsxs(Tt,{className:"mw-full",children:[h.jsx(hn,{children:h.jsx(jn,{children:t("create_vector_database_card.title")})}),h.jsx(mn,{children:h.jsxs("div",{className:"grid w-full gap-1.5",children:[h.jsx(Qe,{children:t("create_vector_database_card.name")}),h.jsx(dn,{className:"mb-4",value:a,onChange:x}),(Nl==null?void 0:Nl.length)>1?h.jsxs(h.Fragment,{children:[h.jsx(Qe,{children:t("create_vector_database_card.storage_type")}),h.jsxs(go,{value:l,onValueChange:v,children:[h.jsx(Dr,{className:"w-full mb-4",children:h.jsx(vo,{placeholder:t("create_vector_database_card.provider_select_placeholder")})}),h.jsx(Lr,{children:Object.values(Nl).map(E=>h.jsx(Sn,{value:E,children:t(`create_vector_database_card.storage_types.${E.toLowerCase()}`)},E))})]})]}):void 0,(Ml==null?void 0:Ml.length)>1?h.jsxs(h.Fragment,{children:[h.jsx(Qe,{children:t("create_vector_database_card.provider")}),h.jsxs(go,{value:s,onValueChange:m,children:[h.jsx(Dr,{className:"w-full mb-4",children:h.jsx(vo,{placeholder:t("create_vector_database_card.provider_select_placeholder")})}),h.jsx(Lr,{children:Object.values(Ml).map(E=>h.jsx(Sn,{value:E,children:t(`create_vector_database_card.providers.${E.toLowerCase()}`)},E))})]})]}):void 0,h.jsx(Qe,{children:t("create_vector_database_card.text_splitter")}),h.jsxs(go,{value:d.type,onValueChange:b,children:[h.jsx(Dr,{className:"w-full mb-4",children:h.jsx(vo,{placeholder:t("create_vector_database_card.text_splitter_select_placeholder")})}),h.jsx(Lr,{children:Object.values(qae).map(E=>h.jsx(Sn,{value:E,children:t(`create_vector_database_card.text_splitters.${E.toLowerCase()}`)},E))})]}),d.type?h.jsxs(Tt,{children:[h.jsx(hn,{children:h.jsx(jn,{children:t("create_vector_database_card.text_splitter_configuration")})}),h.jsxs(mn,{children:[h.jsx(Qe,{children:t("create_vector_database_card.text_splitter_chunksize")}),h.jsx(dn,{value:d.chunkSize,onChange:_,placeholder:t("create_vector_database_card.text_splitter_chunksize_placeholder")}),h.jsx(Qe,{children:t("create_vector_database_card.text_splitter_chunkoverlap")}),h.jsx(dn,{value:d.chunkOverlap,onChange:w,placeholder:t("create_vector_database_card.text_splitter_chunkoverlap_placeholder")})]})]}):void 0]})}),h.jsx(Xo,{className:"flex justify-between",children:h.jsx(Nn,{disabled:!d.type||!a,loading:p,onClick:j,className:"w-full",children:t("create_vector_database_card.create")})})]})});function Kae({data:e}){const{t}=ke("components");return h.jsxs(Gf,{className:"w-full",children:[h.jsx(Zf,{children:h.jsx(Da,{children:h.jsx(is,{children:t("add_text_data.text")})})}),h.jsx(ep,{children:e==null?void 0:e.map((n,r)=>h.jsx(Da,{children:h.jsx(ss,{className:"p-4",children:n.text})},`${n.text}_${r}`))})]})}const Xae=g.memo(e=>{const{id:t}=e,{t:n}=ke("components"),[r,o]=g.useState([]),[a,i]=g.useState(""),s=ln(t),{createCSVData:c,loading:l}=s5(),u=()=>{o(f=>[...f,{text:a}]),i("")},d=async()=>{s&&await c(s,["text"],r.map(f=>[f.text]))};return h.jsxs(Tt,{className:"mw-full",children:[h.jsx(hn,{children:h.jsx(jn,{children:n("add_text_data.title")})}),h.jsxs(mn,{children:[h.jsxs("div",{className:"flex flex-col space-y-1.5 mt-3",children:[h.jsx(Qe,{htmlFor:"name",children:n("add_text_data.text")}),h.jsx(so,{value:a,onChange:f=>i(f.target.value||""),placeholder:n("add_text_data.text_placeholder")})]}),h.jsx("div",{className:"w-full flex mt-4 justify-end",children:h.jsx(ft,{disabled:!a,onClick:u,className:"w-40",children:n("add_text_data.add")})}),h.jsx(Kae,{data:r||[]})]}),h.jsx(Xo,{className:"flex justify-between",children:h.jsx(Nn,{loading:l,disabled:!(r!=null&&r.length),onClick:d,className:"w-full",children:n("add_text_data.create")})})]})});var xo=(e=>(e.ADD_LLM="ADD_LLM",e.ADD_PROMPT="ADD_PROMPT",e.ADD_TOOL_DEFINITION="ADD_TOOL_DEFINITION",e.ADD_SCHEMA="ADD_SCHEMA",e.ADD_FEW_SHOT_EXAMPLE="ADD_FEW_SHOT_EXAMPLE",e.ADD_VECTOR_DATABASE="ADD_VECTOR_DATABASE",e.ADD_TEXT_DATA="ADD_TEXT_DATA",e))(xo||{});const Qae=["ADD_LLM","ADD_PROMPT","ADD_SCHEMA","ADD_VECTOR_DATABASE",{key:"more",label:"more",icon:"ellipsis",children:["ADD_TOOL_DEFINITION","ADD_FEW_SHOT_EXAMPLE"]}],Jae=()=>{const e="_coolMode_effect",t=document.getElementById(e);if(t)return t;const n=document.createElement("div");return n.setAttribute("id",e),n.setAttribute("style","overflow:hidden; position:fixed; height:100%; top:0; left:0; right:0; bottom:0; pointer-events:none; z-index:2147483647"),document.body.appendChild(n),n};let c5=0;const Gae=(e,t)=>{c5++;const n=(t==null?void 0:t.particle)||"circle",r=[15,20,25,35,45],o=45;let a=[],i=!1,s=0,c=0;const l=Jae();function u(){const S=(t==null?void 0:t.size)||r[Math.floor(Math.random()*r.length)],O=(t==null?void 0:t.speedHorz)||Math.random()*10,P=(t==null?void 0:t.speedUp)||Math.random()*25,M=Math.random()*360,k=Math.random()*35*(Math.random()<=.5?-1:1),R=c-S/2,A=s-S/2,C=Math.random()<=.5?-1:1,N=document.createElement("div");if(n==="circle"){const T="http://www.w3.org/2000/svg",I=document.createElementNS(T,"svg"),L=document.createElementNS(T,"circle");L.setAttributeNS(null,"cx",(S/2).toString()),L.setAttributeNS(null,"cy",(S/2).toString()),L.setAttributeNS(null,"r",(S/2).toString()),L.setAttributeNS(null,"fill",`hsl(${Math.random()*360}, 70%, 50%)`),I.appendChild(L),I.setAttribute("width",S.toString()),I.setAttribute("height",S.toString()),N.appendChild(I)}else N.innerHTML=`<img src="${n}" width="${S}" height="${S}" style="border-radius: 50%">`;N.style.position="absolute",N.style.transform=`translate3d(${A}px, ${R}px, 0px) rotate(${M}deg)`,l.appendChild(N),a.push({direction:C,element:N,left:A,size:S,speedHorz:O,speedUp:P,spinSpeed:k,spinVal:M,top:R})}function d(){a.forEach(S=>{S.left=S.left-S.speedHorz*S.direction,S.top=S.top-S.speedUp,S.speedUp=Math.min(S.size,S.speedUp-1),S.spinVal=S.spinVal+S.spinSpeed,S.top>=Math.max(window.innerHeight,document.body.clientHeight)+S.size&&(a=a.filter(O=>O!==S),S.element.remove()),S.element.setAttribute("style",["position:absolute","will-change:transform",`top:${S.top}px`,`left:${S.left}px`,`transform:rotate(${S.spinVal}deg)`].join(";"))})}let f,p=0;const y=30;function m(){const S=performance.now();i&&a.length<o&&S-p>y&&(u(),p=S),d(),f=requestAnimationFrame(m)}m();const v="ontouchstart"in window,b=v?"touchstart":"mousedown",x=v?"touchend":"mouseup",_=v?"touchmove":"mousemove",w=S=>{var O,P;"touches"in S?(s=(O=S.touches)==null?void 0:O[0].clientX,c=(P=S.touches)==null?void 0:P[0].clientY):(s=S.clientX,c=S.clientY)},j=S=>{w(S),i=!0},E=()=>{i=!1};return e.addEventListener(_,w,{passive:!0}),e.addEventListener(b,j,{passive:!0}),e.addEventListener(x,E,{passive:!0}),e.addEventListener("mouseleave",E,{passive:!0}),()=>{e.removeEventListener(_,w),e.removeEventListener(b,j),e.removeEventListener(x,E),e.removeEventListener("mouseleave",E);const S=setInterval(()=>{f&&a.length===0&&(cancelAnimationFrame(f),clearInterval(S),--c5===0&&l.remove())},500)}},Zae=({children:e,options:t})=>{const n=g.useRef(null);return g.useEffect(()=>{if(n.current)return Gae(n.current,t)},[t]),U.cloneElement(e,{ref:n})},eie=g.memo(e=>{const{t}=ke("flows"),n=Tu(s=>s.theme),[r,o]=g.useState(`${xo.ADD_LLM}`),a=g.useMemo(()=>h.jsxs(OD,{children:[h.jsx(Rx,{children:h.jsx(Zae,{children:h.jsx(ft,{variant:"link",className:"!p-0 !pl-3",children:h.jsx(bwe,{width:32,height:32,className:K(n==="dark"?"fill-white":"fill-black")})})})}),Qae.map(s=>typeof s=="object"?h.jsxs(Rx,{children:[h.jsx(Ix,{children:s.icon?h.jsx(de,{name:s.icon}):t(`supported_nodes.${s.label}`)}),h.jsx(MD,{children:s.children.map(c=>h.jsx(ND,{onClick:()=>o(c),children:t(`supported_nodes.${c.toLowerCase()}`)},c))})]},s.key):h.jsx(Rx,{children:h.jsx(Ix,{value:s,onClick:()=>o(s),children:t(`supported_nodes.${s.toLowerCase()}`)})},s))]}),[t,n]),i=g.useMemo(()=>{switch(r){case xo.ADD_LLM:return h.jsx(vae,{...e});case xo.ADD_PROMPT:return h.jsx(wae,{...e});case xo.ADD_SCHEMA:return h.jsx(Fae,{...e});case xo.ADD_FEW_SHOT_EXAMPLE:return h.jsx(Vae,{...e});case xo.ADD_TOOL_DEFINITION:return h.jsx(Hae,{...e});case xo.ADD_VECTOR_DATABASE:return h.jsx(Yae,{...e});case xo.ADD_TEXT_DATA:return h.jsx(Xae,{...e})}},[e,r]);return h.jsxs(h.Fragment,{children:[a,h.jsx("div",{className:"mt-4",children:i})]})}),tie=Hr("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),wo=g.forwardRef(({className:e,variant:t,...n},r)=>h.jsx("div",{ref:r,role:"alert",className:K(tie({variant:t}),e),...n}));wo.displayName="Alert";const _o=g.forwardRef(({className:e,...t},n)=>h.jsx("h5",{ref:n,className:K("mb-1 font-medium leading-none tracking-tight",e),...t}));_o.displayName="AlertTitle";const cs=g.forwardRef(({className:e,...t},n)=>h.jsx("div",{ref:n,className:K("text-sm [&_p]:leading-relaxed",e),...t}));cs.displayName="AlertDescription";let l5,u5,d5,tn,tp,Ge,f5,p5,h5,m5,np,lw,uw,dw,y5,fw,g5,v5,b5;l5=()=>{const[e,t]=g.useState(!1),n=ot(i=>i.currentSession),r=ot(i=>i.getLatestApplications),o=g.useCallback(async(i,s,c,l)=>{var f;const u=(f=s.data)==null?void 0:f.entity;let d=s.type?xwe[s.type]:void 0;if(d&&u&&s&&typeof u=="object"&&"id"in u&&!c.has(`${u.id}`)&&!l.has(`${s.id}`)){d=d;const p=await ce(d).save({...u,...u&&typeof u=="object"&&"session_id"in u?{session_id:i.id}:{}});c.set(`${u.id}`,p.id);const y=await ce("FlowNode").findOne({where:{id:s.data.flowNode.id}}),m=await ce("FlowNode").save({...y||s.data.flowNode,session_id:i.id,id:void 0,source_type:d,source_id:p.id});return l.set(`${s.id}`,m.id),{entityName:d,entity:p,node:m}}else if(!l.has(`${s.id}`)){const p=await ce("FlowNode").findOne({where:{id:s.data.flowNode.id}}),y=await ce("FlowNode").save({...p||s.data.flowNode,node_type:s.type,session_id:i.id,id:void 0});return l.set(`${s.id}`,y.id),{node:y}}},[]),a=g.useCallback(async(i,s)=>{try{if(!n)throw new Error("No current session");t(!0);const c=await ce("Session").save({type:Fh.StandaloneApp,name:s.name||(n!=null&&n.name?`${n.name}`:"Standalone"),status:wwe.Started});if(!c)throw new Error("Failed create standalone session");const l=new Map,u=new Map,d=await o(c,i,l,u);if(!d)throw new Error("Failed to clone main node");await ce("Session").update(c.id,{main_node_id:d.node.id,main_source_id:d!=null&&d.entity?d.entity.id:void 0,main_source_type:d.entityName?d.entityName:void 0});for(const{node:f,connectedNodes:p}of s.connections)if(await o(c,f,l,u),p)for(const y of p)await o(c,y,l,u);for(const{connections:f}of s.connections)for(const p of f){const y=u.get(`${p.source}`),m=u.get(`${p.target}`);if(!y||!m)throw new Error("Failed to get connected flow node id");await ce("FlowEdge").save({source:y,target:m,sourceHandle:p.sourceHandle,targetHandle:p.targetHandle,session_id:c.id})}return r(),!0}finally{t(!1)}},[o,n,r]);return{loading:e,createStandaloneSession:a}},u5=()=>{const[e,t]=g.useState(!1),n=Ae(a=>a.updateNodes),r=Ae(a=>a.updateEdges),o=g.useCallback(async a=>{try{t(!0),await ce("FlowNode").delete(a);const i=await ce("FlowEdge").find({where:[{source:a},{target:a}]});return await Promise.all(i.map(s=>ce("FlowEdge").delete(s.id))),await n([{id:a,type:"remove"}]),await r(i.map(s=>({id:s.id,type:"remove"}))),!0}catch{return!1}finally{t(!1)}},[r,n]);return{loading:e,deleteNodeFlow:o}},d5=oi(({cloneStandaloneSession:e})=>{const t=sn(),{t:n}=ke("dialogs"),[r,o]=g.useState(""),{toast:a}=Ht(),i=c=>{o(c.target.value)},s=async()=>{try{t.hide(),await e(r),o("")}catch{a({variant:"destructive",description:n("create_standalone_application.errors.create_failed")})}};return h.jsx(kc,{open:t.visible,onOpenChange:t.hide,children:h.jsxs(Oi,{className:"sm:max-w-[425px]",children:[h.jsxs(Mi,{children:[h.jsx(Ni,{children:n("create_session.title")}),h.jsx(Jy,{children:n("create_standalone_application.description")})]}),h.jsx("div",{className:"grid gap-4 py-4",children:h.jsxs("div",{className:"flex flex-col space-y-1.5",children:[h.jsx(Qe,{className:"mb-2",htmlFor:"name",children:n("create_standalone_application.name")}),h.jsx(dn,{onChange:i,id:"name",value:r,placeholder:n("create_standalone_application.name_placeholder")})]})}),h.jsx(Qy,{children:h.jsx(ft,{onClick:s,disabled:!r,type:"submit",children:n("create_standalone_application.create")})})]})})}),tn=g.memo(({id:e,className:t,enableToStandalone:n,getLinkedConnections:r})=>{const{t:o}=ke("common"),{getNode:a}=Fn(),{loading:i,deleteNodeFlow:s}=u5(),{createStandaloneSession:c}=l5(),{toast:l}=Ht(),u=sn(d5),d=g.useCallback(async()=>{try{await s(e),l({description:o("deleted")})}catch{l({description:o("errors.delete_failed"),variant:"destructive"})}},[s,e,l,o]),f=g.useCallback(async y=>{try{const m=a(e);if(!m)throw new Error("No current node");const v=(r==null?void 0:r(e))||[];await c(m,{name:y,connections:v}),l({description:o("standalone_session_created")})}catch(m){H9(m),l({description:o("errors.create_standalone_session_failed"),variant:"destructive"})}},[a,e,r,c,l,o]),p=g.useCallback(()=>{u.show({cloneStandaloneSession:f})},[f,u]);return h.jsxs("div",{className:K("flex absolute z-[51] right-0 top-0 h-10",t),children:[n?h.jsx(ft,{className:"!rounded-none !px-2",onClick:p,variant:"ghost",children:h.jsx(de,{name:"package-plus",size:16})}):void 0,h.jsx(Nn,{loading:i,className:"!rounded-none !px-2",onClick:d,variant:"ghost",children:h.jsx(de,{name:"trash-2",size:16})})]})}),tp=({className:e,size:t=200,duration:n=15,anchor:r=90,borderWidth:o=1.5,colorFrom:a="#ffaa40",colorTo:i="#9c40ff",delay:s=0})=>h.jsx("div",{style:{"--size":t,"--duration":n,"--anchor":r,"--border-width":o,"--color-from":a,"--color-to":i,"--delay":`-${s}s`},className:K("pointer-events-none absolute inset-0 rounded-[inherit] [border:calc(var(--border-width)*1px)_solid_transparent]","![mask-clip:padding-box,border-box] ![mask-composite:intersect] [mask:linear-gradient(transparent,transparent),linear-gradient(white,white)]","after:absolute after:aspect-square after:w-[calc(var(--size)*1px)] after:animate-border-beam after:[animation-delay:var(--delay)] after:[background:linear-gradient(to_left,var(--color-from),var(--color-to),transparent)] after:[offset-anchor:calc(var(--anchor)*1%)_50%] after:[offset-path:rect(0_auto_auto_0_round_calc(var(--size)*1px))]",e)}),Ge=g.memo(e=>{const{className:t,...n}=e;return h.jsx(yl,{className:K("!w-2 !h-2 !border-none !rounded-full !bg-slate-700",e.position===fe.Top?"!top-[-2px]":"",t),...n})}),f5=()=>{const e=ot(i=>{var s;return(s=i.currentSession)==null?void 0:s.id}),[t,n]=g.useState(!1),r=Ae(i=>i.createOrUpdateFlowNode),o=Ae(i=>i.createOrUpdateFlowEdge),a=g.useCallback(async(i,s)=>{var c,l,u,d,f;n(!0);try{const p=(c=i.data)==null?void 0:c.entity;if(!p||!e)throw new Error("LLM or Session not found");const y=await((d=(u=(l=s==null?void 0:s.connectedNodes)==null?void 0:l.find(w=>w.type===re.Schema))==null?void 0:u.data)==null?void 0:d.entity),m=i.position.x,v=i.position.y+(((f=i.measured)==null?void 0:f.height)||0),b=await ce("Thread").save({initial_llm_id:p.id,title:`New thread with ${p.name}`,status:Hu.Started,messages:[],session_id:e,schema_id:y==null?void 0:y.id}),x=await r({source_id:b.id,source_type:"Thread",node_type:re.Thread,x:m,y:v+60});if(!x)throw new Error("Failed to create thread node");const _=await o({source:i.id,target:x.id});return{thread:b,flowNode:x,flowEdge:_}}finally{n(!1)}},[o,r,e]);return{loading:t,createThread:a}},p5=(e,t)=>{var w;const{t:n}=ke("flows"),{toast:r}=Ht(),[o,a]=g.useState(!1),[i,s]=g.useState(!1),c=ln(e),l=an(j=>j.loadModel),{createThread:u,loading:d}=f5(),f=Ae(j=>j.updateNodes),p=Ae(j=>j.pushSyncNodeQueue),{getNode:y,getNodes:m,getHandleConnections:v}=Fn(),b=g.useCallback(async()=>{try{if(s(!0),t.entity.id){const j=await ce("Thread").find({where:{initial_llm_id:t.entity.id}});p("Thread",{where:{source_type:"Thread",source_id:mr(j.map(E=>E.id))}})}}finally{s(!1)}},[(w=t==null?void 0:t.entity)==null?void 0:w.id,p]),x=g.useCallback(async()=>{try{if(a(!0),t.entity&&c){await(l==null?void 0:l(`${t.entity.name}`));const j=m().filter(E=>E.type===re.LLM).map(E=>(E.data.status=Ze.Started,{id:E.id,type:"replace",item:E}));c.data.status=Ze.Loading,j.push({id:e,type:"replace",item:c}),f(j),await b()}}catch(j){Er(j),r({variant:"destructive",description:n("llm_node.errors.loading_model")})}finally{a(!1)}},[t.entity,m,e,l,c,b,n,r,f]),_=g.useCallback(async()=>{if(t.entity&&c){const j=v({type:"target",nodeId:c.id}).map(E=>y(E.source)).filter(Boolean);await(u==null?void 0:u(c,{connectedNodes:j}))}},[t.entity,c,v,u,y]);return{loadingModel:o,creatingThread:d,queringThreads:i,loadModel:x,createThread:_,queryThreads:b}},cn=(e,t)=>{const[n,r]=g.useState(!1),[o,a]=g.useState([]),{deleteElements:i,getNode:s}=Fn();If({type:"target",nodeId:e,onConnect:l=>{l!=null&&l.length&&a(u=>[...u,...Wne(l)])}});const c=g.useCallback(async(l,u,d,f)=>{try{return await t({id:e,edgeId:l,source:u,target:d,connection:f})}catch{return{deleteEdgeId:l}}},[t,e]);g.useEffect(()=>{!(o!=null&&o.length)||n||(async()=>{try{r(!0);const l=[...o];a([]);const u=[],d=s(e);await Promise.all(l.map(async f=>{const p="edgeId"in f?f.edgeId:void 0,y=s(f.source);if(!y||!d)return;const m=await c(`${p}`,y,d,f);m!=null&&m.deleteEdgeId&&u.push(...Array.isArray(m.deleteEdgeId)?m.deleteEdgeId:[m.deleteEdgeId])})),u!=null&&u.length&&await i({edges:u.map(f=>({id:f}))})}finally{r(!1)}})()},[i,s,e,n,c,o])},h5=e=>{const t=g.useCallback(async()=>{},[]);cn(e,t)},m5=g.memo(e=>{var m,v,b,x;const{id:t,data:n,isConnectable:r}=e,[o,a]=g.useState(),{t:i}=ke("flows"),{createThread:s,loadModel:c,queringThreads:l,queryThreads:u,loadingModel:d}=p5(t,n);h5(t);const f=[Ze.Loading,Ze.Downloading].includes(n.status);g.useEffect(()=>{var _;o||!((_=n==null?void 0:n.entity)!=null&&_.name)||At(()=>import("./index-CsUvhQqZ.js").then(async w=>(await w.__tla,w)),__vite__mapDeps([7,1,2,3,4,5,6])).then(async({hasModelInCache:w,functionCallingModelIds:j,prebuiltAppConfig:E})=>{var O,P;const S=await w((O=n==null?void 0:n.entity)==null?void 0:O.name);a({hasCache:S,isFunctionCalling:j.includes((P=n==null?void 0:n.entity)==null?void 0:P.name),info:E.model_list.find(M=>{var k;return M.model_id===((k=n==null?void 0:n.entity)==null?void 0:k.name)})})})},[(m=n==null?void 0:n.entity)==null?void 0:m.name,o]);const p=g.useMemo(()=>{var _,w;switch(n.status){case Ze.Downloading:return h.jsx(de,{className:"animate-spin w-7 h-7",name:"arrow-big-down-dash"});case Ze.Loaded:return h.jsx(Ir,{name:((_=n.entity)==null?void 0:_.name)||"brain",className:"w-7 h-7"});case Ze.Loading:return h.jsx(de,{className:"animate-spin w-7 h-7",name:"loader-circle"});default:return h.jsx(Ir,{name:((w=n.entity)==null?void 0:w.name)||"brain",className:"w-7 h-7"})}},[(v=n.entity)==null?void 0:v.name,n.status]),y=g.useMemo(()=>f?null:d?h.jsx(ft,{disabled:!0,className:"w-full mt-4",children:h.jsx(de,{className:"animate-spin",size:24,name:"loader-circle"})}):n.status===Ze.Loaded?h.jsx(ft,{onClick:s,className:"mt-4 w-full",children:i("llm_node.create_thread_button")}):h.jsxs("div",{className:"flex gap-2 mt-4",children:[o!=null&&o.hasCache?h.jsx(Nn,{loading:l,onClick:u,children:h.jsx(de,{size:24,name:"message-square-more"})}):null,h.jsx(ft,{disabled:d,onClick:c,className:"w-full",children:i(o!=null&&o.hasCache?"llm_node.load_model_button":"llm_node.download_model_button")})]}),[f,d,n.status,o==null?void 0:o.hasCache,l,u,c,i,s]);return h.jsxs("div",{children:[h.jsxs("div",{children:[h.jsx(tn,{id:t}),h.jsxs(wo,{className:"flex justify-center",children:[p,h.jsxs("div",{className:"ml-2 pt-1 max-w-lg",children:[h.jsx(_o,{className:"flex gap-2 items-center pr-6",children:`${((b=n==null?void 0:n.entity)==null?void 0:b.name)||""}`}),h.jsx(cs,{className:"max-w-full",children:`${n.label||""}`}),h.jsx("div",{className:"max-w-full mt-2 flex-wrap flex gap-1",children:h.jsx(ns,{model:o==null?void 0:o.info,isFunctionCalling:(o==null?void 0:o.isFunctionCalling)||!1,name:(x=n==null?void 0:n.entity)==null?void 0:x.name,isCached:(o==null?void 0:o.hasCache)||!1})}),y]})]}),f?h.jsx(tp,{className:"rounded-lg"}):void 0]}),h.jsx(Ge,{type:"source",position:fe.Bottom,id:"a",isConnectable:r})]})}),np=g.memo(({tags:e,disabled:t,loading:n,onSubmit:r})=>{const{t:o}=ke("components"),a=async i=>{try{return await r(i),!0}catch{return!1}};return h.jsxs(Tt,{className:"min-w-80",children:[h.jsx(hn,{children:h.jsx(jn,{children:o("add_message_card.title")})}),h.jsxs(mn,{children:[h.jsx("div",{className:"grid w-full gap-1.5",children:h.jsx(wk,{onSubmit:a,disabled:t||n,placeholder:o("add_message_card.placeholder")})}),e?h.jsx("div",{className:"mt-2 gap-1 flex flex-wrap",children:e}):null]})]})}),lw=(e,t,n,r=[],o)=>{const a=e.map(i=>o.getNode(i));for(const i of a){if(!i)continue;const s=o.getHandleConnections({type:"target",nodeId:i.id});if(n.push(...s),i.type===re.Thread){r.push(i.id),t.push(i);continue}else if(i.type!==re.Message){r.push(i.id);continue}else if(r.includes(i.id))continue;r.push(i.id),t.push(i),s.length&&lw(s.map(c=>c.source),t,n,r,o)}return{nodes:t,connections:n}},uw=(e,t)=>{const n=t.getHandleConnections({nodeId:e.id,type:"target"}),r=n.map(d=>{const f=t.getNode(d.source);return f?{connections:t.getHandleConnections({nodeId:f.id,type:"target"}),node:f}:void 0}),o=r.filter(d=>{var f;return((f=d.node)==null?void 0:f.type)===re.Prompt}),a=[];o!=null&&o.length&&o.forEach(d=>{var p;const f=(p=d.connections)==null?void 0:p.map(y=>t.getNode(y.source)).filter(Boolean);a.push({node:d.node,connections:d.connections,connectedNodes:f})});const i=r.filter(d=>{var f;return((f=d.node)==null?void 0:f.type)===re.ToolDefinition}),s=[];i!=null&&i.length&&i.forEach(d=>{var p;const f=(p=d.connections)==null?void 0:p.map(y=>t.getNode(y.source)).filter(Boolean);f!=null&&f.find(y=>y.type===re.Schema)&&s.push({node:d.node,connections:d.connections,connectedNodes:f})});const c=r.filter(d=>{var f;return((f=d.node)==null?void 0:f.type)===re.PlaceHolder}),l=[];c!=null&&c.length&&c.forEach(d=>{var p;const f=(p=d.connections)==null?void 0:p.map(y=>t.getNode(y.source)).filter(Boolean);f&&l.push({node:d.node,connections:d.connections,connectedNodes:f})});const u=r.find(d=>{var f;return((f=d.node)==null?void 0:f.type)===re.Schema});return{thread:{node:e,connections:n},llm:r.find(d=>{var f;return((f=d.node)==null?void 0:f.type)===re.LLM}),schemas:u?[u]:[],prompts:a,tools:s,placeholders:l}},dw=e=>{const t=[];return e.forEach(n=>{var a,i,s;const{node:r,connectedNodes:o}=n;if((a=r.data)!=null&&a.entity){if(r.type===re.Message){const c=r.data.entity;switch(c.role){case"human":t.push(new Du(c.content));break;case"ai":t.push(new $h(c.content));break}}else if(r.type===re.Prompt){const c=r.data.entity;let l=`${c.prefix?`${c.prefix}
`:""}`;if(c.type===Pn.FewShotExample){const u=(s=(i=o.find(d=>d.type===re.CSVData))==null?void 0:i.data)==null?void 0:s.entity;if(u){const{rows:d}=W9(u.headers,u.csv);d.forEach(f=>{l+=`${c.content.replace(/{([^{}]*)}/g,(p,y)=>`${f[y]}`)}
`})}}else l+=c.content;switch(c.suffix&&(l+=`
${c.suffix}`),c.role){case"human":t.push(new Du(l));break;case"system":t.push(new z9(l));break;default:t.push(new $h(l));break}}}}),t},y5=(e,t)=>{const n=(e==null?void 0:e.filter(o=>o.type===re.Message).map(o=>({node:o,connectedNodes:[]})).reverse())||[],r=[];return t.forEach(async o=>{r.unshift({node:o.node,connectedNodes:o.connectedNodes||[]})}),{history:dw(n),systems:dw(r)}},fw=({getNode:e,getHandleConnections:t})=>{const{t:n}=ke("create_new_message"),[r,o]=g.useState(!1),a=Ae(y=>y.createOrUpdateFlowNode),i=Ae(y=>y.createOrUpdateFlowEdge),s=Lu(y=>y.similaritySearchWithScore),c=an(y=>y.getCurrentModelInfo),{stream:l}=Wm(),u=g.useCallback(async({content:y,threadId:m,sourceId:v,initialX:b,initialY:x,initialLLMId:_})=>{const w=await ce("Message").save({thread_id:m,content:y,role:kn.Human,status:Yr.Started,llm_id:_});if(!w)throw new Error("Failed to save message");const j=await a({source_id:w.id,source_type:"Message",node_type:re.Message,x:b,y:x+80});if(!j)throw new Error("Failed to save human message node");await i({source:v,target:j.id});const E=await ce("Message").save({thread_id:m,content:n("initial_ai_message"),role:kn.AI,status:Yr.Inprogress,llm_id:_,parent_message_id:w.id});if(!E)throw new Error("Failed to save message");const S=await a({source_id:E.id,source_type:"Message",node_type:re.Message,x:b,y:x+250});if(!S)throw new Error("Failed to save ai message node");return await i({source:j.id,target:S.id}),{aiMessage:E,humanMessage:w,aiMessageNode:S,humanMessageNode:j}},[i,a,n]),d=g.useCallback(async(y,m)=>{const{placeholders:v}=m;if(!(v!=null&&v.length))return[];const b=[];return await Promise.all(v.map(async x=>{var w,j,E,S,O,P,M,k,R,A,C,N;const _=(w=x.node.data)==null?void 0:w.entity;if(_)switch(_.placeholder_type){case di.VECTOR_DATABASE_RETREIVER:{const T=(j=x.connectedNodes)==null?void 0:j.find(z=>z.type===re.VectorDatabase),I=(E=T==null?void 0:T.data)==null?void 0:E.entity,L=(P=(O=(S=x.connectedNodes)==null?void 0:S.find(z=>z.type===re.Prompt))==null?void 0:O.data)==null?void 0:P.entity;if(!L||!I||!T)return;const D=(M=_.metadata)!=null&&M.k?+((k=_.metadata)==null?void 0:k.k):1;let B=(R=_.metadata)!=null&&R.minimalScore?+((A=_.metadata)==null?void 0:A.minimalScore):void 0;B&&B>1&&(B=B/100);const H=[];if(I.storage===da.DataNode){const z=(N=(C=t({nodeId:T.id,type:"target"}).map(G=>e(G.source)).find(G=>(G==null?void 0:G.type)&&[re.JSONLData,re.CSVData].includes(G==null?void 0:G.type)))==null?void 0:C.data)==null?void 0:N.entity;if(!z)return;H.push(...await s({databaseId:I.id,dataSourceId:z.id,dataSourceType:_E(z)},y.humanMessage.content,D))}else H.push(...await s({databaseId:I.id},y.humanMessage.content,D));if(!H)return[];const F=new ma({template:L.content,inputVariables:["context"]});b.push(new $h(await F.format({context:B?H.filter(([,z])=>z>=B).map(([z])=>z.pageContent).join(`
`):H.map(([z])=>z.pageContent).join(`
`)})))}}})),b},[t,e,s]),f=g.useCallback(async(y,m,v,{onMessageUpdate:b})=>{const{prompts:x,tools:_,schemas:w,placeholders:j}=m,E=[];j!=null&&j.length&&E.push(...await d(y,m));const{history:S,systems:O}=y5(v,x),P=[...O,...E,...S,new Du(y.humanMessage.content)],M=w.map(A=>{var C;return(C=A.node.data)==null?void 0:C.entity}).filter(Boolean),{lastChunk:k,content:R}=await l(P,{tools:Ox(_),schemas:M,onMessageUpdate:({content:A})=>{b==null||b({id:y.aiMessageNode.id,nodeData:{loading:!0,content:A}})}});return y.aiMessage.content=R,y.aiMessage.metadata=JSON.stringify({message:k}),b==null||b({id:y.aiMessageNode.id,nodeData:{content:R,loading:!1,entity:y.aiMessage}}),y.aiMessage.id&&await ce("Message").update(y.aiMessage.id,{content:R,metadata:JSON.stringify({message:k})}),R},[d,l]),p=g.useCallback(async(y,m,v)=>{var E,S,O;const{nodes:b}=lw([y.id],[],[],[],{getNode:e,getHandleConnections:t}),x=b.find(P=>P.type===re.Thread),_=x==null?void 0:x.data.entity;if(!y||!_||!x)throw new Error("Source or thread is not found");if(!await c())throw new Error("Model is not loaded yet");const w=uw(x,{getNode:e,getHandleConnections:t});if(!(w!=null&&w.thread))throw new Error("Thread node is not found");let j;try{o(!0);const P=((E=y.position)==null?void 0:E.x)||0,M=(((S=y.position)==null?void 0:S.y)||0)+(((O=y.measured)==null?void 0:O.height)||0);return j=await u({content:m,initialX:P,initialY:M,sourceId:y.id,threadId:_.id,initialLLMId:_.initial_llm_id}),await f(j,w,b,v),await ce("Message").update(`${j.aiMessage.id}`,{status:Yr.Success}),j.aiMessage.status=Yr.Success,v.onMessageUpdate({id:j.aiMessageNode.id,nodeData:{entity:j.aiMessage,loading:!1}}),!0}catch{j!=null&&j.aiMessage&&await ce("Message").update(`${j.aiMessage.id}`,{status:Yr.Failed,content:n("errors.ai_message_content_failed")}),j!=null&&j.aiMessageNode.id&&(v==null||v.onMessageUpdate({id:j.aiMessageNode.id,nodeData:{content:n("errors.ai_message_content_failed"),loading:!1}}))}finally{o(!1)}},[c,t,e,u,f,n]);return{loading:r,createMessage:p}},g5=(e,t)=>{const n=ln(e),{t:r}=ke("flows"),{getNode:o,getHandleConnections:a}=Fn(),i=Ae(f=>f.updateNodes),{createMessage:s,loading:c}=fw({getNode:o,getHandleConnections:a}),l=g.useCallback(f=>{if(!f.id)return;const p=o(f.id);!p||!f.nodeData||i([{id:p.id,type:"replace",item:{...p,data:{...p.data,...Kc(f.nodeData,Xc)}}}])},[o,i]),u=g.useCallback(async f=>{if(n&&t.entity)try{await s(n,f,{onMessageUpdate:l})}catch(p){if(p instanceof Error&&p.message.includes("LLM_NOT_LOADED_YET"))return Qs({variant:"destructive",title:r("thread_node.errors.llm_not_loaded_yet")});Qs({variant:"destructive",title:`${p}`})}},[n,t.entity,s,l,r]),d=g.useCallback(f=>{const p=o(f);if(!p)return[];const y=[],m=uw(p,{getNode:o,getHandleConnections:a});return m.thread&&y.push({node:m.thread.node,connectedNodes:[],connections:m.thread.connections}),m.prompts&&y.push(...m.prompts.map(v=>({node:v.node,connectedNodes:v.connectedNodes,connections:v.connections}))),m.schemas&&y.push(...m.schemas.map(v=>({node:v.node,connectedNodes:[],connections:v.connections}))),m.placeholders&&m.placeholders.forEach(v=>{y.push({node:v.node,connectedNodes:[],connections:v.connections})}),m.llm&&y.push(m.llm),y},[a,o]);return{loading:c,createMessage:u,getLinkedConnections:d}},v5=e=>{const t=Ae(r=>r.createOrUpdateFlowEdge),n=g.useCallback(async({edgeId:r,source:o,target:a,connection:i})=>{try{if((o==null?void 0:o.type)===re.Prompt&&(a==null?void 0:a.type)===re.Thread){await t({source:i.source,target:i.target,sourceHandle:i.sourceHandle,targetHandle:i.targetHandle});return}else if((o==null?void 0:o.type)===re.LLM&&(a==null?void 0:a.type)===re.Thread){await t({source:i.source,target:i.target,sourceHandle:i.sourceHandle,targetHandle:i.targetHandle});return}else if((o==null?void 0:o.type)===re.Schema&&(a==null?void 0:a.type)===re.Thread){await t({source:i.source,target:i.target,sourceHandle:i.sourceHandle,targetHandle:i.targetHandle});const s=a.data.entity,c=a.data.entity;await ce("Thread").update(s.id,{schema_id:c.id});return}else if((o==null?void 0:o.type)===re.ToolDefinition&&(a==null?void 0:a.type)===re.Thread){await t({source:i.source,target:i.target,sourceHandle:i.sourceHandle,targetHandle:i.targetHandle});return}else if((o==null?void 0:o.type)===re.VectorDatabase&&(a==null?void 0:a.type)===re.Thread){await t({source:i.source,target:i.target,sourceHandle:i.sourceHandle,targetHandle:i.targetHandle});return}else if((o==null?void 0:o.type)===re.PlaceHolder&&(a==null?void 0:a.type)===re.Thread&&o.data.entity.placeholder_type===di.VECTOR_DATABASE_RETREIVER){await t({source:i.source,target:i.target,sourceHandle:i.sourceHandle,targetHandle:i.targetHandle});return}return{deleteEdgeId:r}}catch{return{deleteEdgeId:r}}},[t]);cn(e,n)},b5=g.memo(e=>{const{id:t,data:n,isConnectable:r}=e,{t:o}=ke("flows"),[a,i]=g.useState(!1),s=If({type:"source"}),c=If({type:"target"}),{getNode:l}=Fn(),{loading:u,createMessage:d,getLinkedConnections:f}=g5(t,n);v5(t);const p=g.useCallback(async(...b)=>(i(!1),await d(...b)),[d]),y=g.useMemo(()=>s.length>0,[s]),m=g.useCallback(()=>{i(b=>!b)},[]),v=g.useMemo(()=>{var x,_;const b=c.map((w,j)=>{var S;const E=l(w.source);if((E==null?void 0:E.type)===re.Schema)return h.jsx(en,{children:o("thread_node.structured_output")},`${j}`);if((E==null?void 0:E.type)===re.Prompt){const O=E.data.entity;return h.jsx(en,{children:o(O.type===Pn.FewShotExample?"thread_node.prompts.few_shot_example":`thread_node.prompts.${O.role.toLowerCase()}`)},`${j}`)}else if((E==null?void 0:E.type)===re.PlaceHolder&&((S=E.data.entity)==null?void 0:S.placeholder_type)===di.VECTOR_DATABASE_RETREIVER)return h.jsx(en,{children:o("thread_node.vector_database_retriever")},`${j}`)}).filter(Boolean);return e.data.entity&&!((_=(x=e.data.entity)==null?void 0:x.messages)!=null&&_.length)&&!y?h.jsx(np,{disabled:u,loading:u,onSubmit:p,tags:b}):b!=null&&b.length?h.jsxs(Tt,{className:"p-4 pt-2",children:[h.jsx(jn,{className:"mb-2",children:o("thread_node.title")}),h.jsx("div",{className:"flex gap-1.5",children:b}),h.jsx("div",{className:"mt-4 w-full flex justify-end",children:h.jsxs(ft,{onClick:m,variant:"outline",children:[h.jsx(de,{name:a?"copy-minus":"copy-plus"}),o(a?"thread_node.hide":"thread_node.clone")]})})]}):h.jsx("div",{className:"w-12 h-10"})},[y,l,p,m,u,e.data.entity,a,o,c]);return h.jsxs("div",{children:[h.jsx(Ge,{type:"target",position:fe.Top,isConnectable:r}),h.jsxs("div",{children:[h.jsx(tn,{id:t,enableToStandalone:!0,getLinkedConnections:f}),v,a?h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"w-[1px] absolute ml-[50%] h-[30px] bg-gray-500"}),h.jsx("div",{className:"absolute mt-[30px] w-full",children:h.jsx("div",{className:"ml-[10%] w-80 animate-in slide-in-from-bottom-5",children:h.jsx(np,{disabled:u,loading:u,onSubmit:p})})})]}):void 0]}),h.jsx(Ge,{type:"source",position:fe.Bottom,id:"a",isConnectable:r})]})});function nie({data:e,onNewThread:t,loading:n,showThread:r}){var a;const{t:o}=ke("flows");return h.jsxs(wo,{className:"flex min-w-52",children:[h.jsx(de,{size:24,name:"user"}),h.jsxs("div",{className:"ml-2 max-w-full w-full",children:[h.jsx(_o,{children:"Human"}),h.jsx(cs,{children:`${e.content||((a=e.entity)==null?void 0:a.content)||""}`}),t?h.jsx("div",{className:"w-full mt-2 flex items-center justify-end",children:h.jsxs(ft,{onClick:t,disabled:n,variant:"outline",children:[h.jsx(de,{name:r?"minus":"plus",size:16}),o(r?"message_node.hide_thread":"message_node.new_thread")]})}):void 0]})]})}const rie=g.lazy(()=>At(()=>import("./index-C-EaPLZA.js").then(async e=>(await e.__tla,e)),__vite__mapDeps([8,9,1,2,10,11])));function oie({data:e,onNewThread:t,loading:n,showThread:r}){var i,s,c,l,u,d,f,p;const{t:o}=ke("flows"),a=g.useMemo(()=>{var y;try{return JSON.parse(((y=e==null?void 0:e.entity)==null?void 0:y.metadata)||"{}")}catch{return{}}},[(i=e==null?void 0:e.entity)==null?void 0:i.metadata]);return h.jsxs(wo,{className:"flex min-w-52",children:[h.jsx(de,{className:K(e.loading?"animate-spin":void 0),size:24,name:e.loading?"loader-circle":"bot"}),h.jsx(de,{name:r?"minus":"plus",size:24}),h.jsxs("div",{className:"ml-2 w-full max-w-full",children:[h.jsx(_o,{children:o(`message_node.message_roles.${(c=(s=e.entity)==null?void 0:s.role)==null?void 0:c.toLowerCase()}`)}),h.jsx(g.Suspense,{fallback:h.jsx("div",{className:"h-full w-ful rounded-lg flex justify-center items-center",children:h.jsx(de,{name:"loader-circle",className:"animate-spin"})}),children:h.jsx(rie,{className:"!text-sm [&_p]:leading-relaxed !max-w-full !bg-transparent !font-sans",source:`${e.content||((l=e.entity)==null?void 0:l.content)||""}`,style:{color:"unset !important"}})}),Array.isArray((u=a==null?void 0:a.message)==null?void 0:u.tool_calls)&&((f=(d=a==null?void 0:a.message)==null?void 0:d.tool_calls)!=null&&f.length)?(p=a==null?void 0:a.message)==null?void 0:p.tool_calls.map((y,m)=>h.jsx(en,{children:o("message_node.tool_call",{name:y.name,args:Object.entries(y.args).map(([v,b])=>`"${v}": "${b}"`).join(", ")})},`${y.name}_${m}`)):null,t?h.jsx("div",{className:"w-full mt-2 flex items-center justify-end",children:h.jsxs(ft,{onClick:t,disabled:n,variant:"outline",children:[h.jsx(de,{name:r?"minus":"plus",size:16}),o(r?"message_node.hide_thread":"message_node.new_thread")]})}):void 0]}),e.loading?h.jsx(tp,{size:350,duration:10}):void 0]})}const aie=e=>{const{t}=ke("flows"),n=ln(e),r=Ae(u=>u.updateNodes),{getNode:o,getHandleConnections:a}=Fn(),{createMessage:i,loading:s}=fw({getNode:o,getHandleConnections:a}),c=g.useCallback(u=>{if(!u.id)return;const d=o(u.id);!d||!u.nodeData||r([{id:d.id,type:"replace",item:{...d,data:{...d.data,...Kc(u.nodeData,Xc)}}}])},[o,r]),l=g.useCallback(async u=>{if(n)try{await i(n,u,{onMessageUpdate:c})}catch(d){if(d instanceof Error&&d.message.includes("LLM_NOT_LOADED_YET"))return Qs({variant:"destructive",title:t("message_node.errors.llm_not_loaded_yet")});Qs({variant:"destructive",title:t("message_node.errors.create_message")})}},[n,t,i,c]);return{loading:s,createMessage:l}},x5=()=>{const e=Ae(n=>n.createOrUpdateFlowNode),t=Ae(n=>n.createOrUpdateFlowEdge);return{createIdieMessage:g.useCallback(async(n,r,o,a)=>{var p,y,m,v,b;if(!n||!r)return;const i=(y=(p=a==null?void 0:a.promptNode)==null?void 0:p.data)==null?void 0:y.entity,s=((m=n.position)==null?void 0:m.x)||0,c=(((v=n.position)==null?void 0:v.y)||0)+(((b=n.measured)==null?void 0:b.height)||0),l=await ce("Message").save({thread_id:r.id,content:o,role:(i==null?void 0:i.role)||kn.Human,status:Yr.Started,llm_id:r.initial_llm_id});if(!l)throw new Error("Failed to save message");const u=await e({source_id:l.id,source_type:"Message",node_type:re.Message,x:s,y:c});if(!u)throw new Error("Failed to save message node");const d=await t({source:n.id,target:u.id});let f;return a!=null&&a.promptNode&&(f=await t({source:a==null?void 0:a.promptNode.id,target:u.id})),{message:l,edgeToPrompt:f,messageNode:u,messageEdge:d}},[e,t])}},iie=e=>{const{createIdieMessage:t}=x5(),n=g.useCallback(async({edgeId:r,source:o,target:a})=>{var i,s;try{if((o==null?void 0:o.type)===re.Prompt&&(a==null?void 0:a.type)===re.Message){const c=(i=a==null?void 0:a.data)==null?void 0:i.entity,l=(s=o==null?void 0:o.data)==null?void 0:s.entity;if(!l||!c||!a)return{deleteEdgeId:r};await t(a,{id:c==null?void 0:c.thread_id,title:"",status:Hu.Started,initial_llm_id:c.llm_id,session_id:l.session_id},l.content,{promptNode:o});return}return{deleteEdgeId:r}}catch{return{deleteEdgeId:r}}},[t]);cn(e,n)},sie=g.memo(e=>{var _,w,j;const{id:t,data:n,isConnectable:r}=e,[o,a]=g.useState(!1),[i,s]=g.useState(!1),{t:c}=ke("common"),l=If({type:"source"}),{loading:u,createMessage:d}=aie(t),{toast:f}=Ht();iie(t);const p=g.useCallback(async(...E)=>{const S=await d(...E);return a(!1),S},[d]),y=g.useMemo(()=>l.length===0,[l]),m=g.useCallback(()=>{var E;(E=n.entity)!=null&&E.content&&(navigator.clipboard.writeText(n.entity.content),f({description:c("copied")}))},[f,n,c]),v=g.useCallback(async()=>{var E;try{if(i)return await wE.stop(),s(!1);s(!0),await wE.speak(((E=n.entity)==null?void 0:E.content)||"")}catch{f({variant:"destructive",description:c("errors.speech_is_not_supported")})}finally{s(!1)}},[(_=n.entity)==null?void 0:_.content,i,c,f]),b=g.useCallback(()=>{a(E=>!E)},[]),x=g.useMemo(()=>{var E;if(!(!y&&!o||n.loading||u||((E=n==null?void 0:n.entity)==null?void 0:E.status)==="inprogress"))return h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"w-[1px] absolute ml-[50%] h-[30px] bg-gray-500"}),h.jsx("div",{className:"absolute mt-[30px] w-full",children:h.jsx("div",{className:"ml-[10%] w-80 animate-in slide-in-from-bottom-5",children:h.jsx(np,{disabled:u,loading:u,onSubmit:p})})})]})},[(w=n==null?void 0:n.entity)==null?void 0:w.status,n.loading,p,y,u,o]);return h.jsxs("div",{children:[h.jsx(Ge,{type:"target",position:fe.Top,isConnectable:r}),h.jsxs("div",{className:"max-w-sm min-w-64",children:[h.jsxs("div",{className:"w-auto",children:[h.jsx(tn,{id:t}),h.jsx("div",{children:((j=n.entity)==null?void 0:j.role)===kn.Human?h.jsx(nie,{data:n,showThread:o,onNewThread:y?void 0:b}):h.jsx(oie,{data:n,showThread:o,loading:u,onNewThread:y?void 0:b})}),h.jsx(ft,{onClick:v,className:"absolute top-0 right-[68px] !px-2 !rounded-none",variant:"ghost",children:h.jsx(de,{name:i?"circle-stop":"speech",size:16})}),h.jsx(ft,{onClick:m,className:"absolute top-0 right-[36px] !px-2 !rounded-none",variant:"ghost",children:h.jsx(de,{name:"copy",size:16})})]}),x]}),h.jsx(Ge,{type:"source",position:fe.Bottom,id:"a",isConnectable:r})]})}),w5=oi(({title:e,content:t})=>{const n=sn();return h.jsx(kc,{open:n.visible,onOpenChange:n.hide,children:h.jsxs(Oi,{className:"sm:max-w-2xl",children:[h.jsx(Mi,{children:h.jsxs("div",{className:"flex",children:[h.jsx(de,{name:"file",className:"mr-2 h-4 w-4"}),h.jsx(Ni,{children:e})]})}),h.jsx("div",{className:"mx-auto w-full min-h-96 max-h-96 overflow-hidden",children:h.jsx("div",{className:"relative w-full h-full overflow-hidden rounded-xl p-1 border border-border",children:h.jsx("pre",{className:"break-all h-full overflow-y-auto bg-background font-mono text-xs w-full",children:t})})})]})})}),cie=e=>{const t=Ae(o=>o.createOrUpdateFlowEdge),{createIdieMessage:n}=x5(),r=g.useCallback(async({edgeId:o,source:a,target:i})=>{var s,c,l,u;try{const d=(s=i==null?void 0:i.data)==null?void 0:s.entity,f=(c=a==null?void 0:a.data)==null?void 0:c.entity;if((a==null?void 0:a.type)===re.Message&&(i==null?void 0:i.type)===re.Prompt){const p=(l=a==null?void 0:a.data)==null?void 0:l.entity,y=(u=i==null?void 0:i.data)==null?void 0:u.entity;if(!y||!p||!i)return{deleteEdgeId:o};await n(a,{id:p==null?void 0:p.thread_id,title:"",status:Hu.Started,initial_llm_id:p.llm_id,session_id:y.session_id},y.content,{promptNode:i});return}else if((a==null?void 0:a.type)===re.CSVData&&(i==null?void 0:i.type)===re.Prompt&&(d==null?void 0:d.type)===Pn.FewShotExample&&(f!=null&&f.headers.includes("input"))&&(f!=null&&f.headers.includes("output"))){await t({source:a.id,target:i.id});return}return{deleteEdgeId:o}}catch{return{deleteEdgeId:o}}},[n,t]);cn(e,r)},lie=g.memo(e=>{var l,u,d;const{id:t,data:n,isConnectable:r}=e;cie(t);const o=sn(w5),a=g.useMemo(()=>{var f,p,y;return`${(f=n.entity)!=null&&f.prefix?`${(p=n.entity)==null?void 0:p.prefix}
`:""}${((y=n.entity)==null?void 0:y.content)||""}`},[(l=n.entity)==null?void 0:l.prefix,(u=n.entity)==null?void 0:u.content]),i=g.useMemo(()=>{var p;const f=/{(.*?)}/g;return((p=a.match(f))==null?void 0:p.map(y=>y.replace("{","").replace("}","")))||[]},[a]),s=a.length>990,c=()=>{o.show({title:"Prompt",content:a})};return h.jsxs("div",{className:"min-w-56",children:[h.jsx(Ge,{type:"target",position:fe.Top,isConnectable:r}),h.jsxs("div",{children:[h.jsx(tn,{id:t}),h.jsxs(wo,{className:"flex justify-center max-w-72",variant:"default",children:[h.jsx(de,{size:24,name:"notepad-text"}),h.jsxs("div",{className:"ml-2 max-w-full break-words break-all",children:[h.jsx(_o,{children:`${((d=n.entity)==null?void 0:d.role)||""}`}),h.jsxs(cs,{onClick:s?c:void 0,children:[s?`${a.slice(0,990)}...`:a,s?h.jsx("span",{className:"float-right",children:h.jsx(de,{name:"chevron-right"})}):void 0]}),i!=null&&i.length?i.map((f,p)=>h.jsx(en,{className:"mt-2 mr-1",variant:"default",children:f},p)):void 0]})]})]}),h.jsx(Ge,{type:"source",position:fe.Bottom,id:"a",isConnectable:r})]})});var uie=RA();const qn=Xe(uie);var pw,_5;function die(){if(_5)return pw;_5=1;function e(t){return t==null}return pw=e,pw}var fie=die();const at=Xe(fie);var hw,j5;function pie(){if(j5)return hw;j5=1;var e=co(),t=un(),n=Sr(),r="[object String]";function o(a){return typeof a=="string"||!t(a)&&n(a)&&e(a)==r}return hw=o,hw}var hie=pie();const kl=Xe(hie);var mie=Bu();const We=Xe(mie);var yie=nr();const ls=Xe(yie);var E5={exports:{}},it={},S5;function gie(){if(S5)return it;S5=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),i=Symbol.for("react.context"),s=Symbol.for("react.server_context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.suspense_list"),d=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.for("react.offscreen"),y;y=Symbol.for("react.module.reference");function m(v){if(typeof v=="object"&&v!==null){var b=v.$$typeof;switch(b){case e:switch(v=v.type,v){case n:case o:case r:case l:case u:return v;default:switch(v=v&&v.$$typeof,v){case s:case i:case c:case f:case d:case a:return v;default:return b}}case t:return b}}}return it.ContextConsumer=i,it.ContextProvider=a,it.Element=e,it.ForwardRef=c,it.Fragment=n,it.Lazy=f,it.Memo=d,it.Portal=t,it.Profiler=o,it.StrictMode=r,it.Suspense=l,it.SuspenseList=u,it.isAsyncMode=function(){return!1},it.isConcurrentMode=function(){return!1},it.isContextConsumer=function(v){return m(v)===i},it.isContextProvider=function(v){return m(v)===a},it.isElement=function(v){return typeof v=="object"&&v!==null&&v.$$typeof===e},it.isForwardRef=function(v){return m(v)===c},it.isFragment=function(v){return m(v)===n},it.isLazy=function(v){return m(v)===f},it.isMemo=function(v){return m(v)===d},it.isPortal=function(v){return m(v)===t},it.isProfiler=function(v){return m(v)===o},it.isStrictMode=function(v){return m(v)===r},it.isSuspense=function(v){return m(v)===l},it.isSuspenseList=function(v){return m(v)===u},it.isValidElementType=function(v){return typeof v=="string"||typeof v=="function"||v===n||v===o||v===r||v===l||v===u||v===p||typeof v=="object"&&v!==null&&(v.$$typeof===f||v.$$typeof===d||v.$$typeof===a||v.$$typeof===i||v.$$typeof===c||v.$$typeof===y||v.getModuleId!==void 0)},it.typeOf=m,it}var C5;function vie(){return C5||(C5=1,E5.exports=gie()),E5.exports}var bie=vie(),mw,O5;function M5(){if(O5)return mw;O5=1;var e=co(),t=Sr(),n="[object Number]";function r(o){return typeof o=="number"||t(o)&&e(o)==n}return mw=r,mw}var yw,N5;function xie(){if(N5)return yw;N5=1;var e=M5();function t(n){return e(n)&&n!=+n}return yw=t,yw}var wie=xie();const Pl=Xe(wie);var _ie=M5();const jie=Xe(_ie);var gr=function(e){return e===0?0:e>0?1:-1},La=function(e){return kl(e)&&e.indexOf("%")===e.length-1},me=function(e){return jie(e)&&!Pl(e)},$t=function(e){return me(e)||kl(e)},Eie=0,rp=function(e){var t=++Eie;return"".concat(e||"").concat(t)},Fa=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!me(e)&&!kl(e))return n;var o;if(La(e)){var a=e.indexOf("%");o=t*parseFloat(e.slice(0,a))/100}else o=+e;return Pl(o)&&(o=n),r&&o>t&&(o=t),o},ea=function(e){if(!e)return null;var t=Object.keys(e);return t&&t.length?e[t[0]]:null},Sie=function(e){if(!Array.isArray(e))return!1;for(var t=e.length,n={},r=0;r<t;r++)if(!n[e[r]])n[e[r]]=!0;else return!0;return!1},us=function(e,t){return me(e)&&me(t)?function(n){return e+n*(t-e)}:function(){return t}};function gw(e,t,n){return!e||!e.length?null:e.find(function(r){return r&&(typeof t=="function"?t(r):qn(r,t))===n})}function ds(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var r in t)if({}.hasOwnProperty.call(t,r)&&!{}.hasOwnProperty.call(e,r))return!1;return!0}function vw(e){"@babel/helpers - typeof";return vw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vw(e)}var Cie=["viewBox","children"],Oie=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],k5=["points","pathLength"],bw={svg:Cie,polygon:k5,polyline:k5},xw=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],op=function(e,t){if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(g.isValidElement(e)&&(n=e.props),!ls(n))return null;var r={};return Object.keys(n).forEach(function(o){xw.includes(o)&&(r[o]=t||function(a){return n[o](n,a)})}),r},Mie=function(e,t,n){return function(r){return e(t,n,r),null}},ap=function(e,t,n){if(!ls(e)||vw(e)!=="object")return null;var r=null;return Object.keys(e).forEach(function(o){var a=e[o];xw.includes(o)&&typeof a=="function"&&(r||(r={}),r[o]=Mie(a,t,n))}),r},Nie=["children"],kie=["children"];function P5(e,t){if(e==null)return{};var n=Pie(e,t),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Pie(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var A5={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart"},jo=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},T5=null,ww=null,_w=function e(t){if(t===T5&&Array.isArray(ww))return ww;var n=[];return g.Children.forEach(t,function(r){at(r)||(bie.isFragment(r)?n=n.concat(e(r.props.children)):n.push(r))}),ww=n,T5=t,n};function vr(e,t){var n=[],r=[];return Array.isArray(t)?r=t.map(function(o){return jo(o)}):r=[jo(t)],_w(e).forEach(function(o){var a=qn(o,"type.displayName")||qn(o,"type.name");r.indexOf(a)!==-1&&n.push(o)}),n}function Bn(e,t){var n=vr(e,t);return n&&n[0]}var R5=function(e){if(!e||!e.props)return!1;var t=e.props,n=t.width,r=t.height;return!(!me(n)||n<=0||!me(r)||r<=0)},Aie=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],Tie=function(e){return e&&e.type&&kl(e.type)&&Aie.indexOf(e.type)>=0},Rie=function(e,t,n,r){var o,a=(o=bw==null?void 0:bw[r])!==null&&o!==void 0?o:[];return!We(e)&&(r&&a.includes(t)||Oie.includes(t))||n&&xw.includes(t)},rt=function(e,t,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(g.isValidElement(e)&&(r=e.props),!ls(r))return null;var o={};return Object.keys(r).forEach(function(a){var i;Rie((i=r)===null||i===void 0?void 0:i[a],a,t,n)&&(o[a]=r[a])}),o},jw=function e(t,n){if(t===n)return!0;var r=g.Children.count(t);if(r!==g.Children.count(n))return!1;if(r===0)return!0;if(r===1)return I5(Array.isArray(t)?t[0]:t,Array.isArray(n)?n[0]:n);for(var o=0;o<r;o++){var a=t[o],i=n[o];if(Array.isArray(a)||Array.isArray(i)){if(!e(a,i))return!1}else if(!I5(a,i))return!1}return!0},I5=function(e,t){if(at(e)&&at(t))return!0;if(!at(e)&&!at(t)){var n=e.props||{},r=n.children,o=P5(n,Nie),a=t.props||{},i=a.children,s=P5(a,kie);return r&&i?ds(o,s)&&jw(r,i):!r&&!i?ds(o,s):!1}return!1},D5=function(e,t){var n=[],r={};return _w(e).forEach(function(o,a){if(Tie(o))n.push(o);else if(o){var i=jo(o.type),s=t[i]||{},c=s.handler,l=s.once;if(c&&(!l||!r[i])){var u=c(o,i,a);n.push(u),r[i]=!0}}}),n},Iie=function(e){var t=e&&e.type;return t&&A5[t]?A5[t]:null},Die=function(e,t){return _w(t).indexOf(e)},Lie=["children","width","height","viewBox","className","style","title","desc"];function Ew(){return Ew=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ew.apply(this,arguments)}function Fie(e,t){if(e==null)return{};var n=Bie(e,t),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Bie(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Sw(e){var t=e.children,n=e.width,r=e.height,o=e.viewBox,a=e.className,i=e.style,s=e.title,c=e.desc,l=Fie(e,Lie),u=o||{width:n,height:r,x:0,y:0},d=lt("recharts-surface",a);return U.createElement("svg",Ew({},rt(l,!0,"svg"),{className:d,width:n,height:r,style:i,viewBox:"".concat(u.x," ").concat(u.y," ").concat(u.width," ").concat(u.height)}),U.createElement("title",null,s),U.createElement("desc",null,c),t)}var $ie=["children","className"];function Cw(){return Cw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Cw.apply(this,arguments)}function zie(e,t){if(e==null)return{};var n=Vie(e,t),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Vie(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var Wt=U.forwardRef(function(e,t){var n=e.children,r=e.className,o=zie(e,$ie),a=lt("recharts-layer",r);return U.createElement("g",Cw({className:a},rt(o,!0),{ref:t}),n)}),Eo=function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o]},Ow,L5;Um=function(){if(L5)return Ow;L5=1;function e(t,n,r){var o=-1,a=t.length;n<0&&(n=-n>a?0:a+n),r=r>a?a:r,r<0&&(r+=a),a=n>r?0:r-n>>>0,n>>>=0;for(var i=Array(a);++o<a;)i[o]=t[o+n];return i}return Ow=e,Ow};var Mw,F5;function Uie(){if(F5)return Mw;F5=1;var e=Um();function t(n,r,o){var a=n.length;return o=o===void 0?a:o,!r&&o>=a?n:e(n,r,o)}return Mw=t,Mw}var Nw,B5;function $5(){if(B5)return Nw;B5=1;var e="\uD800-\uDFFF",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",o=t+n+r,a="\\ufe0e\\ufe0f",i="\\u200d",s=RegExp("["+i+e+o+a+"]");function c(l){return s.test(l)}return Nw=c,Nw}var kw,z5;function Hie(){if(z5)return kw;z5=1;function e(t){return t.split("")}return kw=e,kw}var Pw,V5;function Wie(){if(V5)return Pw;V5=1;var e="\uD800-\uDFFF",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",o=t+n+r,a="\\ufe0e\\ufe0f",i="["+e+"]",s="["+o+"]",c="\uD83C[\uDFFB-\uDFFF]",l="(?:"+s+"|"+c+")",u="[^"+e+"]",d="(?:\uD83C[\uDDE6-\uDDFF]){2}",f="[\uD800-\uDBFF][\uDC00-\uDFFF]",p="\\u200d",y=l+"?",m="["+a+"]?",v="(?:"+p+"(?:"+[u,d,f].join("|")+")"+m+y+")*",b=m+y+v,x="(?:"+[u+s+"?",s,d,f,i].join("|")+")",_=RegExp(c+"(?="+c+")|"+x+b,"g");function w(j){return j.match(_)||[]}return Pw=w,Pw}var Aw,U5;function qie(){if(U5)return Aw;U5=1;var e=Hie(),t=$5(),n=Wie();function r(o){return t(o)?n(o):e(o)}return Aw=r,Aw}var Tw,H5;function Yie(){if(H5)return Tw;H5=1;var e=Uie(),t=$5(),n=qie(),r=NA();function o(a){return function(i){i=r(i);var s=t(i)?n(i):void 0,c=s?s[0]:i.charAt(0),l=s?e(s,1).join(""):i.slice(1);return c[a]()+l}}return Tw=o,Tw}var Rw,W5;function Kie(){if(W5)return Rw;W5=1;var e=Yie(),t=e("toUpperCase");return Rw=t,Rw}var Xie=Kie();const ip=Xe(Xie);function bt(e){return function(){return e}}const q5=Math.cos,sp=Math.sin,br=Math.sqrt,cp=Math.PI,lp=2*cp,Iw=Math.PI,Dw=2*Iw,Ba=1e-6,Qie=Dw-Ba;function Y5(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function Jie(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return Y5;const n=10**t;return function(r){this._+=r[0];for(let o=1,a=r.length;o<a;++o)this._+=Math.round(arguments[o]*n)/n+r[o]}}class Gie{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?Y5:Jie(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,o){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+o}`}bezierCurveTo(t,n,r,o,a,i){this._append`C${+t},${+n},${+r},${+o},${this._x1=+a},${this._y1=+i}`}arcTo(t,n,r,o,a){if(t=+t,n=+n,r=+r,o=+o,a=+a,a<0)throw new Error(`negative radius: ${a}`);let i=this._x1,s=this._y1,c=r-t,l=o-n,u=i-t,d=s-n,f=u*u+d*d;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(f>Ba)if(!(Math.abs(d*c-l*u)>Ba)||!a)this._append`L${this._x1=t},${this._y1=n}`;else{let p=r-i,y=o-s,m=c*c+l*l,v=p*p+y*y,b=Math.sqrt(m),x=Math.sqrt(f),_=a*Math.tan((Iw-Math.acos((m+f-v)/(2*b*x)))/2),w=_/x,j=_/b;Math.abs(w-1)>Ba&&this._append`L${t+w*u},${n+w*d}`,this._append`A${a},${a},0,0,${+(d*p>u*y)},${this._x1=t+j*c},${this._y1=n+j*l}`}}arc(t,n,r,o,a,i){if(t=+t,n=+n,r=+r,i=!!i,r<0)throw new Error(`negative radius: ${r}`);let s=r*Math.cos(o),c=r*Math.sin(o),l=t+s,u=n+c,d=1^i,f=i?o-a:a-o;this._x1===null?this._append`M${l},${u}`:(Math.abs(this._x1-l)>Ba||Math.abs(this._y1-u)>Ba)&&this._append`L${l},${u}`,r&&(f<0&&(f=f%Dw+Dw),f>Qie?this._append`A${r},${r},0,1,${d},${t-s},${n-c}A${r},${r},0,1,${d},${this._x1=l},${this._y1=u}`:f>Ba&&this._append`A${r},${r},0,${+(f>=Iw)},${d},${this._x1=t+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(t,n,r,o){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+o}h${-r}Z`}toString(){return this._}}function Lw(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new Gie(t)}function Fw(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function K5(e){this._context=e}K5.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function up(e){return new K5(e)}function X5(e){return e[0]}function Q5(e){return e[1]}function J5(e,t){var n=bt(!0),r=null,o=up,a=null,i=Lw(s);e=typeof e=="function"?e:e===void 0?X5:bt(e),t=typeof t=="function"?t:t===void 0?Q5:bt(t);function s(c){var l,u=(c=Fw(c)).length,d,f=!1,p;for(r==null&&(a=o(p=i())),l=0;l<=u;++l)!(l<u&&n(d=c[l],l,c))===f&&((f=!f)?a.lineStart():a.lineEnd()),f&&a.point(+e(d,l,c),+t(d,l,c));if(p)return a=null,p+""||null}return s.x=function(c){return arguments.length?(e=typeof c=="function"?c:bt(+c),s):e},s.y=function(c){return arguments.length?(t=typeof c=="function"?c:bt(+c),s):t},s.defined=function(c){return arguments.length?(n=typeof c=="function"?c:bt(!!c),s):n},s.curve=function(c){return arguments.length?(o=c,r!=null&&(a=o(r)),s):o},s.context=function(c){return arguments.length?(c==null?r=a=null:a=o(r=c),s):r},s}function dp(e,t,n){var r=null,o=bt(!0),a=null,i=up,s=null,c=Lw(l);e=typeof e=="function"?e:e===void 0?X5:bt(+e),t=typeof t=="function"?t:bt(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?Q5:bt(+n);function l(d){var f,p,y,m=(d=Fw(d)).length,v,b=!1,x,_=new Array(m),w=new Array(m);for(a==null&&(s=i(x=c())),f=0;f<=m;++f){if(!(f<m&&o(v=d[f],f,d))===b)if(b=!b)p=f,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),y=f-1;y>=p;--y)s.point(_[y],w[y]);s.lineEnd(),s.areaEnd()}b&&(_[f]=+e(v,f,d),w[f]=+t(v,f,d),s.point(r?+r(v,f,d):_[f],n?+n(v,f,d):w[f]))}if(x)return s=null,x+""||null}function u(){return J5().defined(o).curve(i).context(a)}return l.x=function(d){return arguments.length?(e=typeof d=="function"?d:bt(+d),r=null,l):e},l.x0=function(d){return arguments.length?(e=typeof d=="function"?d:bt(+d),l):e},l.x1=function(d){return arguments.length?(r=d==null?null:typeof d=="function"?d:bt(+d),l):r},l.y=function(d){return arguments.length?(t=typeof d=="function"?d:bt(+d),n=null,l):t},l.y0=function(d){return arguments.length?(t=typeof d=="function"?d:bt(+d),l):t},l.y1=function(d){return arguments.length?(n=d==null?null:typeof d=="function"?d:bt(+d),l):n},l.lineX0=l.lineY0=function(){return u().x(e).y(t)},l.lineY1=function(){return u().x(e).y(n)},l.lineX1=function(){return u().x(r).y(t)},l.defined=function(d){return arguments.length?(o=typeof d=="function"?d:bt(!!d),l):o},l.curve=function(d){return arguments.length?(i=d,a!=null&&(s=i(a)),l):i},l.context=function(d){return arguments.length?(d==null?a=s=null:s=i(a=d),l):a},l}class G5{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function Zie(e){return new G5(e,!0)}function ese(e){return new G5(e,!1)}const Bw={draw(e,t){const n=br(t/cp);e.moveTo(n,0),e.arc(0,0,n,0,lp)}},tse={draw(e,t){const n=br(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},Z5=br(1/3),nse=Z5*2,rse={draw(e,t){const n=br(t/nse),r=n*Z5;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},ose={draw(e,t){const n=br(t),r=-n/2;e.rect(r,r,n,n)}},ase=.8908130915292852,e4=sp(cp/10)/sp(7*cp/10),ise=sp(lp/10)*e4,sse=-q5(lp/10)*e4,cse={draw(e,t){const n=br(t*ase),r=ise*n,o=sse*n;e.moveTo(0,-n),e.lineTo(r,o);for(let a=1;a<5;++a){const i=lp*a/5,s=q5(i),c=sp(i);e.lineTo(c*n,-s*n),e.lineTo(s*r-c*o,c*r+s*o)}e.closePath()}},$w=br(3),lse={draw(e,t){const n=-br(t/($w*3));e.moveTo(0,n*2),e.lineTo(-$w*n,-n),e.lineTo($w*n,-n),e.closePath()}},Yn=-.5,Kn=br(3)/2,zw=1/br(12),use=(zw/2+1)*3,dse={draw(e,t){const n=br(t/use),r=n/2,o=n*zw,a=r,i=n*zw+n,s=-a,c=i;e.moveTo(r,o),e.lineTo(a,i),e.lineTo(s,c),e.lineTo(Yn*r-Kn*o,Kn*r+Yn*o),e.lineTo(Yn*a-Kn*i,Kn*a+Yn*i),e.lineTo(Yn*s-Kn*c,Kn*s+Yn*c),e.lineTo(Yn*r+Kn*o,Yn*o-Kn*r),e.lineTo(Yn*a+Kn*i,Yn*i-Kn*a),e.lineTo(Yn*s+Kn*c,Yn*c-Kn*s),e.closePath()}};function fse(e,t){let n=null,r=Lw(o);e=typeof e=="function"?e:bt(e||Bw),t=typeof t=="function"?t:bt(t===void 0?64:+t);function o(){let a;if(n||(n=a=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),a)return n=null,a+""||null}return o.type=function(a){return arguments.length?(e=typeof a=="function"?a:bt(a),o):e},o.size=function(a){return arguments.length?(t=typeof a=="function"?a:bt(+a),o):t},o.context=function(a){return arguments.length?(n=a??null,o):n},o}function fp(){}function pp(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function t4(e){this._context=e}t4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:pp(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:pp(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function pse(e){return new t4(e)}function n4(e){this._context=e}n4.prototype={areaStart:fp,areaEnd:fp,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:pp(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function hse(e){return new n4(e)}function r4(e){this._context=e}r4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:pp(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function mse(e){return new r4(e)}function o4(e){this._context=e}o4.prototype={areaStart:fp,areaEnd:fp,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function yse(e){return new o4(e)}function a4(e){return e<0?-1:1}function i4(e,t,n){var r=e._x1-e._x0,o=t-e._x1,a=(e._y1-e._y0)/(r||o<0&&-0),i=(n-e._y1)/(o||r<0&&-0),s=(a*o+i*r)/(r+o);return(a4(a)+a4(i))*Math.min(Math.abs(a),Math.abs(i),.5*Math.abs(s))||0}function s4(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function Vw(e,t,n){var r=e._x0,o=e._y0,a=e._x1,i=e._y1,s=(a-r)/3;e._context.bezierCurveTo(r+s,o+s*t,a-s,i-s*n,a,i)}function hp(e){this._context=e}hp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Vw(this,this._t0,s4(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Vw(this,s4(this,n=i4(this,e,t)),n);break;default:Vw(this,this._t0,n=i4(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function c4(e){this._context=new l4(e)}(c4.prototype=Object.create(hp.prototype)).point=function(e,t){hp.prototype.point.call(this,t,e)};function l4(e){this._context=e}l4.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,o,a){this._context.bezierCurveTo(t,e,r,n,a,o)}};function gse(e){return new hp(e)}function vse(e){return new c4(e)}function u4(e){this._context=e}u4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=d4(e),o=d4(t),a=0,i=1;i<n;++a,++i)this._context.bezierCurveTo(r[0][a],o[0][a],r[1][a],o[1][a],e[i],t[i]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function d4(e){var t,n=e.length-1,r,o=new Array(n),a=new Array(n),i=new Array(n);for(o[0]=0,a[0]=2,i[0]=e[0]+2*e[1],t=1;t<n-1;++t)o[t]=1,a[t]=4,i[t]=4*e[t]+2*e[t+1];for(o[n-1]=2,a[n-1]=7,i[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=o[t]/a[t-1],a[t]-=r,i[t]-=r*i[t-1];for(o[n-1]=i[n-1]/a[n-1],t=n-2;t>=0;--t)o[t]=(i[t]-o[t+1])/a[t];for(a[n-1]=(e[n]+o[n-1])/2,t=0;t<n-1;++t)a[t]=2*e[t+1]-o[t+1];return[o,a]}function bse(e){return new u4(e)}function mp(e,t){this._context=e,this._t=t}mp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function xse(e){return new mp(e,.5)}function wse(e){return new mp(e,0)}function _se(e){return new mp(e,1)}function fs(e,t){if((i=e.length)>1)for(var n=1,r,o,a=e[t[0]],i,s=a.length;n<i;++n)for(o=a,a=e[t[n]],r=0;r<s;++r)a[r][1]+=a[r][0]=isNaN(o[r][1])?o[r][0]:o[r][1]}function Uw(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function jse(e,t){return e[t]}function Ese(e){const t=[];return t.key=e,t}function Sse(){var e=bt([]),t=Uw,n=fs,r=jse;function o(a){var i=Array.from(e.apply(this,arguments),Ese),s,c=i.length,l=-1,u;for(const d of a)for(s=0,++l;s<c;++s)(i[s][l]=[0,+r(d,i[s].key,l,a)]).data=d;for(s=0,u=Fw(t(i));s<c;++s)i[u[s]].index=s;return n(i,u),i}return o.keys=function(a){return arguments.length?(e=typeof a=="function"?a:bt(Array.from(a)),o):e},o.value=function(a){return arguments.length?(r=typeof a=="function"?a:bt(+a),o):r},o.order=function(a){return arguments.length?(t=a==null?Uw:typeof a=="function"?a:bt(Array.from(a)),o):t},o.offset=function(a){return arguments.length?(n=a??fs,o):n},o}function Cse(e,t){if((r=e.length)>0){for(var n,r,o=0,a=e[0].length,i;o<a;++o){for(i=n=0;n<r;++n)i+=e[n][o][1]||0;if(i)for(n=0;n<r;++n)e[n][o][1]/=i}fs(e,t)}}function Ose(e,t){if((o=e.length)>0){for(var n=0,r=e[t[0]],o,a=r.length;n<a;++n){for(var i=0,s=0;i<o;++i)s+=e[i][n][1]||0;r[n][1]+=r[n][0]=-s/2}fs(e,t)}}function Mse(e,t){if(!(!((i=e.length)>0)||!((a=(o=e[t[0]]).length)>0))){for(var n=0,r=1,o,a,i;r<a;++r){for(var s=0,c=0,l=0;s<i;++s){for(var u=e[t[s]],d=u[r][1]||0,f=u[r-1][1]||0,p=(d-f)/2,y=0;y<s;++y){var m=e[t[y]],v=m[r][1]||0,b=m[r-1][1]||0;p+=v-b}c+=d,l+=p*d}o[r-1][1]+=o[r-1][0]=n,c&&(n-=l/c)}o[r-1][1]+=o[r-1][0]=n,fs(e,t)}}function Al(e){"@babel/helpers - typeof";return Al=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Al(e)}var Nse=["type","size","sizeType"];function Hw(){return Hw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Hw.apply(this,arguments)}function f4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function p4(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?f4(Object(n),!0).forEach(function(r){kse(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f4(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function kse(e,t,n){return t=Pse(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Pse(e){var t=Ase(e,"string");return Al(t)=="symbol"?t:t+""}function Ase(e,t){if(Al(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Al(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Tse(e,t){if(e==null)return{};var n=Rse(e,t),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Rse(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var h4={symbolCircle:Bw,symbolCross:tse,symbolDiamond:rse,symbolSquare:ose,symbolStar:cse,symbolTriangle:lse,symbolWye:dse},Ise=Math.PI/180,Dse=function(e){var t="symbol".concat(ip(e));return h4[t]||Bw},Lse=function(e,t,n){if(t==="area")return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var r=18*Ise;return 1.25*e*e*(Math.tan(r)-Math.tan(r*2)*Math.pow(Math.tan(r),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},Fse=function(e,t){h4["symbol".concat(ip(e))]=t},Ww=function(e){var t=e.type,n=t===void 0?"circle":t,r=e.size,o=r===void 0?64:r,a=e.sizeType,i=a===void 0?"area":a,s=Tse(e,Nse),c=p4(p4({},s),{},{type:n,size:o,sizeType:i}),l=function(){var y=Dse(n),m=fse().type(y).size(Lse(o,i,n));return m()},u=c.className,d=c.cx,f=c.cy,p=rt(c,!0);return d===+d&&f===+f&&o===+o?U.createElement("path",Hw({},p,{className:lt("recharts-symbols",u),transform:"translate(".concat(d,", ").concat(f,")"),d:l()})):null};Ww.registerSymbol=Fse;function ps(e){"@babel/helpers - typeof";return ps=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ps(e)}function qw(){return qw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qw.apply(this,arguments)}function m4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Bse(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?m4(Object(n),!0).forEach(function(r){Tl(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m4(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function $se(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zse(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,g4(r.key),r)}}function Vse(e,t,n){return t&&zse(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Use(e,t,n){return t=yp(t),Hse(e,y4()?Reflect.construct(t,n||[],yp(e).constructor):t.apply(e,n))}function Hse(e,t){if(t&&(ps(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Wse(e)}function Wse(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y4(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(y4=function(){return!!e})()}function yp(e){return yp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},yp(e)}function qse(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Yw(e,t)}function Yw(e,t){return Yw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Yw(e,t)}function Tl(e,t,n){return t=g4(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g4(e){var t=Yse(e,"string");return ps(t)=="symbol"?t:t+""}function Yse(e,t){if(ps(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(ps(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Xn=32,Kw=function(e){function t(){return $se(this,t),Use(this,t,arguments)}return qse(t,e),Vse(t,[{key:"renderIcon",value:function(n){var r=this.props.inactiveColor,o=Xn/2,a=Xn/6,i=Xn/3,s=n.inactive?r:n.color;if(n.type==="plainline")return U.createElement("line",{strokeWidth:4,fill:"none",stroke:s,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:o,x2:Xn,y2:o,className:"recharts-legend-icon"});if(n.type==="line")return U.createElement("path",{strokeWidth:4,fill:"none",stroke:s,d:"M0,".concat(o,"h").concat(i,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(2*i,",").concat(o,`
            H`).concat(Xn,"M").concat(2*i,",").concat(o,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(i,",").concat(o),className:"recharts-legend-icon"});if(n.type==="rect")return U.createElement("path",{stroke:"none",fill:s,d:"M0,".concat(Xn/8,"h").concat(Xn,"v").concat(Xn*3/4,"h").concat(-Xn,"z"),className:"recharts-legend-icon"});if(U.isValidElement(n.legendIcon)){var c=Bse({},n);return delete c.legendIcon,U.cloneElement(n.legendIcon,c)}return U.createElement(Ww,{fill:s,cx:o,cy:o,size:Xn,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,r=this.props,o=r.payload,a=r.iconSize,i=r.layout,s=r.formatter,c=r.inactiveColor,l={x:0,y:0,width:Xn,height:Xn},u={display:i==="horizontal"?"inline-block":"block",marginRight:10},d={display:"inline-block",verticalAlign:"middle",marginRight:4};return o.map(function(f,p){var y=f.formatter||s,m=lt(Tl(Tl({"recharts-legend-item":!0},"legend-item-".concat(p),!0),"inactive",f.inactive));if(f.type==="none")return null;var v=We(f.value)?null:f.value;Eo(!We(f.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var b=f.inactive?c:f.color;return U.createElement("li",qw({className:m,style:u,key:"legend-item-".concat(p)},ap(n.props,f,p)),U.createElement(Sw,{width:a,height:a,viewBox:l,style:d},n.renderIcon(f)),U.createElement("span",{className:"recharts-legend-item-text",style:{color:b}},y?y(v,f,p):v))})}},{key:"render",value:function(){var n=this.props,r=n.payload,o=n.layout,a=n.align;if(!r||!r.length)return null;var i={padding:0,margin:0,textAlign:o==="horizontal"?a:"left"};return U.createElement("ul",{className:"recharts-default-legend",style:i},this.renderItems())}}])}(g.PureComponent);Tl(Kw,"displayName","Legend"),Tl(Kw,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var Xw,v4;function b4(){if(v4)return Xw;v4=1;function e(t,n,r,o){for(var a=t.length,i=r+(o?1:-1);o?i--:++i<a;)if(n(t[i],i,t))return i;return-1}return Xw=e,Xw}var Qw,x4;function Kse(){if(x4)return Qw;x4=1;function e(t){return t!==t}return Qw=e,Qw}var Jw,w4;function Xse(){if(w4)return Jw;w4=1;function e(t,n,r){for(var o=r-1,a=t.length;++o<a;)if(t[o]===n)return o;return-1}return Jw=e,Jw}var Gw,_4;function Qse(){if(_4)return Gw;_4=1;var e=b4(),t=Kse(),n=Xse();function r(o,a,i){return a===a?n(o,a,i):e(o,t,i)}return Gw=r,Gw}var Zw,j4;function Jse(){if(j4)return Zw;j4=1;var e=Qse();function t(n,r){var o=n==null?0:n.length;return!!o&&e(n,r,0)>-1}return Zw=t,Zw}var e1,E4;function Gse(){if(E4)return e1;E4=1;function e(t,n,r){for(var o=-1,a=t==null?0:t.length;++o<a;)if(r(n,t[o]))return!0;return!1}return e1=e,e1}var t1,S4;function Zse(){if(S4)return t1;S4=1;function e(){}return t1=e,t1}var n1,C4;function ece(){if(C4)return n1;C4=1;var e=cA(),t=Zse(),n=Lv(),r=1/0,o=e&&1/n(new e([,-0]))[1]==r?function(a){return new e(a)}:t;return n1=o,n1}var r1,O4;function tce(){if(O4)return r1;O4=1;var e=gP(),t=Jse(),n=Gse(),r=wP(),o=ece(),a=Lv(),i=200;function s(c,l,u){var d=-1,f=t,p=c.length,y=!0,m=[],v=m;if(u)y=!1,f=n;else if(p>=i){var b=l?null:o(c);if(b)return a(b);y=!1,f=r,v=new e}else v=l?[]:m;e:for(;++d<p;){var x=c[d],_=l?l(x):x;if(x=u||x!==0?x:0,y&&_===_){for(var w=v.length;w--;)if(v[w]===_)continue e;l&&v.push(_),m.push(x)}else f(v,_,u)||(v!==m&&v.push(_),m.push(x))}return m}return r1=s,r1}var o1,M4;function nce(){if(M4)return o1;M4=1;var e=kr(),t=tce();function n(r,o){return r&&r.length?t(r,e(o,2)):[]}return o1=n,o1}var rce=nce();const N4=Xe(rce);function k4(e,t,n){return t===!0?N4(e,n):We(t)?N4(e,t):e}function hs(e){"@babel/helpers - typeof";return hs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hs(e)}var oce=["ref"];function P4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function So(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?P4(Object(n),!0).forEach(function(r){vp(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P4(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ace(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function A4(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,R4(r.key),r)}}function ice(e,t,n){return t&&A4(e.prototype,t),n&&A4(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function sce(e,t,n){return t=gp(t),cce(e,T4()?Reflect.construct(t,n||[],gp(e).constructor):t.apply(e,n))}function cce(e,t){if(t&&(hs(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return lce(e)}function lce(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T4(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(T4=function(){return!!e})()}function gp(e){return gp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},gp(e)}function uce(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a1(e,t)}function a1(e,t){return a1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},a1(e,t)}function vp(e,t,n){return t=R4(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R4(e){var t=dce(e,"string");return hs(t)=="symbol"?t:t+""}function dce(e,t){if(hs(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(hs(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fce(e,t){if(e==null)return{};var n=pce(e,t),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function pce(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function hce(e){return e.value}function mce(e,t){if(U.isValidElement(e))return U.cloneElement(e,t);if(typeof e=="function")return U.createElement(e,t);t.ref;var n=fce(t,oce);return U.createElement(Kw,n)}var I4=1,ms=function(e){function t(){var n;ace(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return n=sce(this,t,[].concat(o)),vp(n,"lastBoundingBox",{width:-1,height:-1}),n}return uce(t,e),ice(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,r=this.getBBox();r?(Math.abs(r.width-this.lastBoundingBox.width)>I4||Math.abs(r.height-this.lastBoundingBox.height)>I4)&&(this.lastBoundingBox.width=r.width,this.lastBoundingBox.height=r.height,n&&n(r)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?So({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var r=this.props,o=r.layout,a=r.align,i=r.verticalAlign,s=r.margin,c=r.chartWidth,l=r.chartHeight,u,d;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(a==="center"&&o==="vertical"){var f=this.getBBoxSnapshot();u={left:((c||0)-f.width)/2}}else u=a==="right"?{right:s&&s.right||0}:{left:s&&s.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(i==="middle"){var p=this.getBBoxSnapshot();d={top:((l||0)-p.height)/2}}else d=i==="bottom"?{bottom:s&&s.bottom||0}:{top:s&&s.top||0};return So(So({},u),d)}},{key:"render",value:function(){var n=this,r=this.props,o=r.content,a=r.width,i=r.height,s=r.wrapperStyle,c=r.payloadUniqBy,l=r.payload,u=So(So({position:"absolute",width:a||"auto",height:i||"auto"},this.getDefaultPosition(s)),s);return U.createElement("div",{className:"recharts-legend-wrapper",style:u,ref:function(d){n.wrapperNode=d}},mce(o,So(So({},this.props),{},{payload:k4(l,c,hce)})))}}],[{key:"getWithHeight",value:function(n,r){var o=So(So({},this.defaultProps),n.props),a=o.layout;return a==="vertical"&&me(n.props.height)?{height:n.props.height}:a==="horizontal"?{width:n.props.width||r}:null}}])}(g.PureComponent);vp(ms,"displayName","Legend"),vp(ms,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var i1,D4;function yce(){if(D4)return i1;D4=1;var e=li(),t=Fu(),n=un(),r=e?e.isConcatSpreadable:void 0;function o(a){return n(a)||t(a)||!!(r&&a&&a[r])}return i1=o,i1}var s1,L4;Vh=function(){if(L4)return s1;L4=1;var e=$v(),t=yce();function n(r,o,a,i,s){var c=-1,l=r.length;for(a||(a=t),s||(s=[]);++c<l;){var u=r[c];o>0&&a(u)?o>1?n(u,o-1,a,i,s):e(s,u):i||(s[s.length]=u)}return s}return s1=n,s1};var c1,F4;function gce(){if(F4)return c1;F4=1;function e(t){return function(n,r,o){for(var a=-1,i=Object(n),s=o(n),c=s.length;c--;){var l=s[t?c:++a];if(r(i[l],l,i)===!1)break}return n}}return c1=e,c1}var l1,B4;ME=function(){if(B4)return l1;B4=1;var e=gce(),t=e();return l1=t,l1};var u1,$4;function z4(){if($4)return u1;$4=1;var e=ME(),t=rc();function n(r,o){return r&&e(r,o,t)}return u1=n,u1}var d1,V4;function vce(){if(V4)return d1;V4=1;var e=fa();function t(n,r){return function(o,a){if(o==null)return o;if(!e(o))return n(o,a);for(var i=o.length,s=r?i:-1,c=Object(o);(r?s--:++s<i)&&a(c[s],s,c)!==!1;);return o}}return d1=t,d1}var f1,U4;function p1(){if(U4)return f1;U4=1;var e=z4(),t=vce(),n=t(e);return f1=n,f1}var h1,H4;function W4(){if(H4)return h1;H4=1;var e=p1(),t=fa();function n(r,o){var a=-1,i=t(r)?Array(r.length):[];return e(r,function(s,c,l){i[++a]=o(s,c,l)}),i}return h1=n,h1}var m1,q4;function bce(){if(q4)return m1;q4=1;function e(t,n){var r=t.length;for(t.sort(n);r--;)t[r]=t[r].value;return t}return m1=e,m1}var y1,Y4;function xce(){if(Y4)return y1;Y4=1;var e=Di();function t(n,r){if(n!==r){var o=n!==void 0,a=n===null,i=n===n,s=e(n),c=r!==void 0,l=r===null,u=r===r,d=e(r);if(!l&&!d&&!s&&n>r||s&&c&&u&&!l&&!d||a&&c&&u||!o&&u||!i)return 1;if(!a&&!s&&!d&&n<r||d&&o&&i&&!a&&!s||l&&o&&i||!c&&i||!u)return-1}return 0}return y1=t,y1}var g1,K4;function wce(){if(K4)return g1;K4=1;var e=xce();function t(n,r,o){for(var a=-1,i=n.criteria,s=r.criteria,c=i.length,l=o.length;++a<c;){var u=e(i[a],s[a]);if(u){if(a>=l)return u;var d=o[a];return u*(d=="desc"?-1:1)}}return n.index-r.index}return g1=t,g1}var v1,X4;function _ce(){if(X4)return v1;X4=1;var e=Js(),t=ac(),n=kr(),r=W4(),o=bce(),a=$m(),i=wce(),s=Li(),c=un();function l(u,d,f){d.length?d=e(d,function(m){return c(m)?function(v){return t(v,m.length===1?m[0]:m)}:m}):d=[s];var p=-1;d=e(d,a(n));var y=r(u,function(m,v,b){var x=e(d,function(_){return _(m)});return{criteria:x,index:++p,value:m}});return o(y,function(m,v){return i(m,v,f)})}return v1=l,v1}var b1,Q4;DE=function(){if(Q4)return b1;Q4=1;function e(t,n,r){switch(r.length){case 0:return t.call(n);case 1:return t.call(n,r[0]);case 2:return t.call(n,r[0],r[1]);case 3:return t.call(n,r[0],r[1],r[2])}return t.apply(n,r)}return b1=e,b1};var x1,J4;OE=function(){if(J4)return x1;J4=1;var e=DE(),t=Math.max;function n(r,o,a){return o=t(o===void 0?r.length-1:o,0),function(){for(var i=arguments,s=-1,c=t(i.length-o,0),l=Array(c);++s<c;)l[s]=i[o+s];s=-1;for(var u=Array(o+1);++s<o;)u[s]=i[s];return u[o]=a(l),e(r,this,u)}}return x1=n,x1};var w1,G4;function jce(){if(G4)return w1;G4=1;function e(t){return function(){return t}}return w1=e,w1}var _1,Z4;function Ece(){if(Z4)return _1;Z4=1;var e=jce(),t=qA(),n=Li(),r=t?function(o,a){return t(o,"toString",{configurable:!0,enumerable:!1,value:e(a),writable:!0})}:n;return _1=r,_1}var j1,eL;function Sce(){if(eL)return j1;eL=1;var e=800,t=16,n=Date.now;function r(o){var a=0,i=0;return function(){var s=n(),c=t-(s-i);if(i=s,c>0){if(++a>=e)return arguments[0]}else a=0;return o.apply(void 0,arguments)}}return j1=r,j1}var E1,tL;CE=function(){if(tL)return E1;tL=1;var e=Ece(),t=Sce(),n=t(e);return E1=n,E1};var S1,nL;NE=function(){if(nL)return S1;nL=1;var e=Li(),t=OE(),n=CE();function r(o,a){return n(t(o,a,e),o+"")}return S1=r,S1};var C1,rL;ai=function(){if(rL)return C1;rL=1;var e=Gs(),t=fa(),n=Qd(),r=nr();function o(a,i,s){if(!r(s))return!1;var c=typeof i;return(c=="number"?t(s)&&n(i,s.length):c=="string"&&i in s)?e(s[i],a):!1}return C1=o,C1};var O1,oL;function Cce(){if(oL)return O1;oL=1;var e=Vh(),t=_ce(),n=NE(),r=ai(),o=n(function(a,i){if(a==null)return[];var s=i.length;return s>1&&r(a,i[0],i[1])?i=[]:s>2&&r(i[0],i[1],i[2])&&(i=[i[0]]),t(a,e(i,1),[])});return O1=o,O1}var Oce=Cce();const M1=Xe(Oce);function Rl(e){"@babel/helpers - typeof";return Rl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rl(e)}function N1(){return N1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},N1.apply(this,arguments)}function Mce(e,t){return Ace(e)||Pce(e,t)||kce(e,t)||Nce()}function Nce(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kce(e,t){if(e){if(typeof e=="string")return aL(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return aL(e,t)}}function aL(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Pce(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,o,a,i,s=[],c=!0,l=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(c=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(u){l=!0,o=u}finally{try{if(!c&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return s}}function Ace(e){if(Array.isArray(e))return e}function iL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function k1(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?iL(Object(n),!0).forEach(function(r){Tce(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iL(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Tce(e,t,n){return t=Rce(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Rce(e){var t=Ice(e,"string");return Rl(t)=="symbol"?t:t+""}function Ice(e,t){if(Rl(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Rl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Dce(e){return Array.isArray(e)&&$t(e[0])&&$t(e[1])?e.join(" ~ "):e}var Lce=function(e){var t=e.separator,n=t===void 0?" : ":t,r=e.contentStyle,o=r===void 0?{}:r,a=e.itemStyle,i=a===void 0?{}:a,s=e.labelStyle,c=s===void 0?{}:s,l=e.payload,u=e.formatter,d=e.itemSorter,f=e.wrapperClassName,p=e.labelClassName,y=e.label,m=e.labelFormatter,v=e.accessibilityLayer,b=v===void 0?!1:v,x=function(){if(l&&l.length){var M={padding:0,margin:0},k=(d?M1(l,d):l).map(function(R,A){if(R.type==="none")return null;var C=k1({display:"block",paddingTop:4,paddingBottom:4,color:R.color||"#000"},i),N=R.formatter||u||Dce,T=R.value,I=R.name,L=T,D=I;if(N&&L!=null&&D!=null){var B=N(T,I,R,A,l);if(Array.isArray(B)){var H=Mce(B,2);L=H[0],D=H[1]}else L=B}return U.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(A),style:C},$t(D)?U.createElement("span",{className:"recharts-tooltip-item-name"},D):null,$t(D)?U.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,U.createElement("span",{className:"recharts-tooltip-item-value"},L),U.createElement("span",{className:"recharts-tooltip-item-unit"},R.unit||""))});return U.createElement("ul",{className:"recharts-tooltip-item-list",style:M},k)}return null},_=k1({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},o),w=k1({margin:0},c),j=!at(y),E=j?y:"",S=lt("recharts-default-tooltip",f),O=lt("recharts-tooltip-label",p);j&&m&&l!==void 0&&l!==null&&(E=m(y,l));var P=b?{role:"status","aria-live":"assertive"}:{};return U.createElement("div",N1({className:S,style:_},P),U.createElement("p",{className:O,style:w},U.isValidElement(E)?E:"".concat(E)),x())};function Il(e){"@babel/helpers - typeof";return Il=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Il(e)}function bp(e,t,n){return t=Fce(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fce(e){var t=Bce(e,"string");return Il(t)=="symbol"?t:t+""}function Bce(e,t){if(Il(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Il(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Dl="recharts-tooltip-wrapper",$ce={visibility:"hidden"};function zce(e){var t=e.coordinate,n=e.translateX,r=e.translateY;return lt(Dl,bp(bp(bp(bp({},"".concat(Dl,"-right"),me(n)&&t&&me(t.x)&&n>=t.x),"".concat(Dl,"-left"),me(n)&&t&&me(t.x)&&n<t.x),"".concat(Dl,"-bottom"),me(r)&&t&&me(t.y)&&r>=t.y),"".concat(Dl,"-top"),me(r)&&t&&me(t.y)&&r<t.y))}function sL(e){var t=e.allowEscapeViewBox,n=e.coordinate,r=e.key,o=e.offsetTopLeft,a=e.position,i=e.reverseDirection,s=e.tooltipDimension,c=e.viewBox,l=e.viewBoxDimension;if(a&&me(a[r]))return a[r];var u=n[r]-s-o,d=n[r]+o;if(t[r])return i[r]?u:d;if(i[r]){var f=u,p=c[r];return f<p?Math.max(d,c[r]):Math.max(u,c[r])}var y=d+s,m=c[r]+l;return y>m?Math.max(u,c[r]):Math.max(d,c[r])}function Vce(e){var t=e.translateX,n=e.translateY,r=e.useTranslate3d;return{transform:r?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}function Uce(e){var t=e.allowEscapeViewBox,n=e.coordinate,r=e.offsetTopLeft,o=e.position,a=e.reverseDirection,i=e.tooltipBox,s=e.useTranslate3d,c=e.viewBox,l,u,d;return i.height>0&&i.width>0&&n?(u=sL({allowEscapeViewBox:t,coordinate:n,key:"x",offsetTopLeft:r,position:o,reverseDirection:a,tooltipDimension:i.width,viewBox:c,viewBoxDimension:c.width}),d=sL({allowEscapeViewBox:t,coordinate:n,key:"y",offsetTopLeft:r,position:o,reverseDirection:a,tooltipDimension:i.height,viewBox:c,viewBoxDimension:c.height}),l=Vce({translateX:u,translateY:d,useTranslate3d:s})):l=$ce,{cssProperties:l,cssClasses:zce({translateX:u,translateY:d,coordinate:n})}}function ys(e){"@babel/helpers - typeof";return ys=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ys(e)}function cL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function lL(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?cL(Object(n),!0).forEach(function(r){A1(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cL(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Hce(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Wce(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,dL(r.key),r)}}function qce(e,t,n){return t&&Wce(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Yce(e,t,n){return t=xp(t),Kce(e,uL()?Reflect.construct(t,n||[],xp(e).constructor):t.apply(e,n))}function Kce(e,t){if(t&&(ys(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Xce(e)}function Xce(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function uL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(uL=function(){return!!e})()}function xp(e){return xp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},xp(e)}function Qce(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&P1(e,t)}function P1(e,t){return P1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},P1(e,t)}function A1(e,t,n){return t=dL(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dL(e){var t=Jce(e,"string");return ys(t)=="symbol"?t:t+""}function Jce(e,t){if(ys(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(ys(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var fL=1,Gce=function(e){function t(){var n;Hce(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return n=Yce(this,t,[].concat(o)),A1(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),A1(n,"handleKeyDown",function(i){if(i.key==="Escape"){var s,c,l,u;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(s=(c=n.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&s!==void 0?s:0,y:(l=(u=n.props.coordinate)===null||u===void 0?void 0:u.y)!==null&&l!==void 0?l:0}})}}),n}return Qce(t,e),qce(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>fL||Math.abs(n.height-this.state.lastBoundingBox.height)>fL)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,r;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,r=this.props,o=r.active,a=r.allowEscapeViewBox,i=r.animationDuration,s=r.animationEasing,c=r.children,l=r.coordinate,u=r.hasPayload,d=r.isAnimationActive,f=r.offset,p=r.position,y=r.reverseDirection,m=r.useTranslate3d,v=r.viewBox,b=r.wrapperStyle,x=Uce({allowEscapeViewBox:a,coordinate:l,offsetTopLeft:f,position:p,reverseDirection:y,tooltipBox:this.state.lastBoundingBox,useTranslate3d:m,viewBox:v}),_=x.cssClasses,w=x.cssProperties,j=lL(lL({transition:d&&o?"transform ".concat(i,"ms ").concat(s):void 0},w),{},{pointerEvents:"none",visibility:!this.state.dismissed&&o&&u?"visible":"hidden",position:"absolute",top:0,left:0},b);return U.createElement("div",{tabIndex:-1,className:_,style:j,ref:function(E){n.wrapperNode=E}},c)}}])}(g.PureComponent),Zce=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},ta={isSsr:Zce(),get:function(e){return ta[e]},set:function(e,t){if(typeof e=="string")ta[e]=t;else{var n=Object.keys(e);n&&n.length&&n.forEach(function(r){ta[r]=e[r]})}}};function gs(e){"@babel/helpers - typeof";return gs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gs(e)}function pL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function hL(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?pL(Object(n),!0).forEach(function(r){R1(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pL(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ele(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tle(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,yL(r.key),r)}}function nle(e,t,n){return t&&tle(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function rle(e,t,n){return t=wp(t),ole(e,mL()?Reflect.construct(t,n||[],wp(e).constructor):t.apply(e,n))}function ole(e,t){if(t&&(gs(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ale(e)}function ale(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(mL=function(){return!!e})()}function wp(e){return wp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},wp(e)}function ile(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&T1(e,t)}function T1(e,t){return T1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},T1(e,t)}function R1(e,t,n){return t=yL(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yL(e){var t=sle(e,"string");return gs(t)=="symbol"?t:t+""}function sle(e,t){if(gs(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(gs(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function cle(e){return e.dataKey}function lle(e,t){return U.isValidElement(e)?U.cloneElement(e,t):typeof e=="function"?U.createElement(e,t):U.createElement(Lce,t)}var Fr=function(e){function t(){return ele(this,t),rle(this,t,arguments)}return ile(t,e),nle(t,[{key:"render",value:function(){var n=this,r=this.props,o=r.active,a=r.allowEscapeViewBox,i=r.animationDuration,s=r.animationEasing,c=r.content,l=r.coordinate,u=r.filterNull,d=r.isAnimationActive,f=r.offset,p=r.payload,y=r.payloadUniqBy,m=r.position,v=r.reverseDirection,b=r.useTranslate3d,x=r.viewBox,_=r.wrapperStyle,w=p??[];u&&w.length&&(w=k4(p.filter(function(E){return E.value!=null&&(E.hide!==!0||n.props.includeHidden)}),y,cle));var j=w.length>0;return U.createElement(Gce,{allowEscapeViewBox:a,animationDuration:i,animationEasing:s,isAnimationActive:d,active:o,coordinate:l,hasPayload:j,offset:f,position:m,reverseDirection:v,useTranslate3d:b,viewBox:x,wrapperStyle:_},lle(c,hL(hL({},this.props),{},{payload:w})))}}])}(g.PureComponent);R1(Fr,"displayName","Tooltip"),R1(Fr,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!ta.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var I1,gL;function ule(){if(gL)return I1;gL=1;var e=tr(),t=function(){return e.Date.now()};return I1=t,I1}var D1,vL;function dle(){if(vL)return D1;vL=1;var e=/\s/;function t(n){for(var r=n.length;r--&&e.test(n.charAt(r)););return r}return D1=t,D1}var L1,bL;function fle(){if(bL)return L1;bL=1;var e=dle(),t=/^\s+/;function n(r){return r&&r.slice(0,e(r)+1).replace(t,"")}return L1=n,L1}var F1,xL;function wL(){if(xL)return F1;xL=1;var e=fle(),t=nr(),n=Di(),r=NaN,o=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,i=/^0o[0-7]+$/i,s=parseInt;function c(l){if(typeof l=="number")return l;if(n(l))return r;if(t(l)){var u=typeof l.valueOf=="function"?l.valueOf():l;l=t(u)?u+"":u}if(typeof l!="string")return l===0?l:+l;l=e(l);var d=a.test(l);return d||i.test(l)?s(l.slice(2),d?2:8):o.test(l)?r:+l}return F1=c,F1}var B1,_L;TE=function(){if(_L)return B1;_L=1;var e=nr(),t=ule(),n=wL(),r="Expected a function",o=Math.max,a=Math.min;function i(s,c,l){var u,d,f,p,y,m,v=0,b=!1,x=!1,_=!0;if(typeof s!="function")throw new TypeError(r);c=n(c)||0,e(l)&&(b=!!l.leading,x="maxWait"in l,f=x?o(n(l.maxWait)||0,c):f,_="trailing"in l?!!l.trailing:_);function w(A){var C=u,N=d;return u=d=void 0,v=A,p=s.apply(N,C),p}function j(A){return v=A,y=setTimeout(O,c),b?w(A):p}function E(A){var C=A-m,N=A-v,T=c-C;return x?a(T,f-N):T}function S(A){var C=A-m,N=A-v;return m===void 0||C>=c||C<0||x&&N>=f}function O(){var A=t();if(S(A))return P(A);y=setTimeout(O,E(A))}function P(A){return y=void 0,_&&u?w(A):(u=d=void 0,p)}function M(){y!==void 0&&clearTimeout(y),v=0,u=m=d=y=void 0}function k(){return y===void 0?p:P(t())}function R(){var A=t(),C=S(A);if(u=arguments,d=this,m=A,C){if(y===void 0)return j(m);if(x)return clearTimeout(y),y=setTimeout(O,c),w(m)}return y===void 0&&(y=setTimeout(O,c)),p}return R.cancel=M,R.flush=k,R}return B1=i,B1};var $1,jL;function ple(){if(jL)return $1;jL=1;var e=TE(),t=nr(),n="Expected a function";function r(o,a,i){var s=!0,c=!0;if(typeof o!="function")throw new TypeError(n);return t(i)&&(s="leading"in i?!!i.leading:s,c="trailing"in i?!!i.trailing:c),e(o,a,{leading:s,maxWait:a,trailing:c})}return $1=r,$1}var hle=ple();Wh=Xe(hle);function Ll(e){"@babel/helpers - typeof";return Ll=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ll(e)}function EL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function _p(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?EL(Object(n),!0).forEach(function(r){mle(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):EL(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function mle(e,t,n){return t=yle(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yle(e){var t=gle(e,"string");return Ll(t)=="symbol"?t:t+""}function gle(e,t){if(Ll(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Ll(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vle(e,t){return _le(e)||wle(e,t)||xle(e,t)||ble()}function ble(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xle(e,t){if(e){if(typeof e=="string")return SL(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return SL(e,t)}}function SL(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function wle(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,o,a,i,s=[],c=!0,l=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(c=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(u){l=!0,o=u}finally{try{if(!c&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return s}}function _le(e){if(Array.isArray(e))return e}var jle=g.forwardRef(function(e,t){var n=e.aspect,r=e.initialDimension,o=r===void 0?{width:-1,height:-1}:r,a=e.width,i=a===void 0?"100%":a,s=e.height,c=s===void 0?"100%":s,l=e.minWidth,u=l===void 0?0:l,d=e.minHeight,f=e.maxHeight,p=e.children,y=e.debounce,m=y===void 0?0:y,v=e.id,b=e.className,x=e.onResize,_=e.style,w=_===void 0?{}:_,j=g.useRef(null),E=g.useRef();E.current=x,g.useImperativeHandle(t,function(){return Object.defineProperty(j.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),j.current},configurable:!0})});var S=g.useState({containerWidth:o.width,containerHeight:o.height}),O=vle(S,2),P=O[0],M=O[1],k=g.useCallback(function(A,C){M(function(N){var T=Math.round(A),I=Math.round(C);return N.containerWidth===T&&N.containerHeight===I?N:{containerWidth:T,containerHeight:I}})},[]);g.useEffect(function(){var A=function(L){var D,B=L[0].contentRect,H=B.width,F=B.height;k(H,F),(D=E.current)===null||D===void 0||D.call(E,H,F)};m>0&&(A=Wh(A,m,{trailing:!0,leading:!1}));var C=new ResizeObserver(A),N=j.current.getBoundingClientRect(),T=N.width,I=N.height;return k(T,I),C.observe(j.current),function(){C.disconnect()}},[k,m]);var R=g.useMemo(function(){var A=P.containerWidth,C=P.containerHeight;if(A<0||C<0)return null;Eo(La(i)||La(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,i,c),Eo(!n||n>0,"The aspect(%s) must be greater than zero.",n);var N=La(i)?A:i,T=La(c)?C:c;n&&n>0&&(N?T=N/n:T&&(N=T*n),f&&T>f&&(T=f)),Eo(N>0||T>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,N,T,i,c,u,d,n);var I=!Array.isArray(p)&&jo(p.type).endsWith("Chart");return U.Children.map(p,function(L){return U.isValidElement(L)?g.cloneElement(L,_p({width:N,height:T},I?{style:_p({height:"100%",width:"100%",maxHeight:T,maxWidth:N},L.props.style)}:{})):L})},[n,p,c,f,d,u,P,i]);return U.createElement("div",{id:v?"".concat(v):void 0,className:lt("recharts-responsive-container",b),style:_p(_p({},w),{},{width:i,height:c,minWidth:u,minHeight:d,maxHeight:f}),ref:j},R)}),CL=function(e){return null};CL.displayName="Cell";function Fl(e){"@babel/helpers - typeof";return Fl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fl(e)}function OL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function z1(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?OL(Object(n),!0).forEach(function(r){Ele(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):OL(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Ele(e,t,n){return t=Sle(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Sle(e){var t=Cle(e,"string");return Fl(t)=="symbol"?t:t+""}function Cle(e,t){if(Fl(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Fl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var vs={widthCache:{},cacheCount:0},Ole=2e3,Mle={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},ML="recharts_measurement_span";function Nle(e){var t=z1({},e);return Object.keys(t).forEach(function(n){t[n]||delete t[n]}),t}var Bl=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||ta.isSsr)return{width:0,height:0};var n=Nle(t),r=JSON.stringify({text:e,copyStyle:n});if(vs.widthCache[r])return vs.widthCache[r];try{var o=document.getElementById(ML);o||(o=document.createElement("span"),o.setAttribute("id",ML),o.setAttribute("aria-hidden","true"),document.body.appendChild(o));var a=z1(z1({},Mle),n);Object.assign(o.style,a),o.textContent="".concat(e);var i=o.getBoundingClientRect(),s={width:i.width,height:i.height};return vs.widthCache[r]=s,++vs.cacheCount>Ole&&(vs.cacheCount=0,vs.widthCache={}),s}catch{return{width:0,height:0}}},kle=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function $l(e){"@babel/helpers - typeof";return $l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$l(e)}function jp(e,t){return Rle(e)||Tle(e,t)||Ale(e,t)||Ple()}function Ple(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ale(e,t){if(e){if(typeof e=="string")return NL(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return NL(e,t)}}function NL(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Tle(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,o,a,i,s=[],c=!0,l=!1;try{if(a=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(u){l=!0,o=u}finally{try{if(!c&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return s}}function Rle(e){if(Array.isArray(e))return e}function Ile(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kL(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Lle(r.key),r)}}function Dle(e,t,n){return t&&kL(e.prototype,t),n&&kL(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Lle(e){var t=Fle(e,"string");return $l(t)=="symbol"?t:t+""}function Fle(e,t){if($l(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if($l(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var PL=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,AL=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Ble=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,$le=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,TL={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},zle=Object.keys(TL),bs="NaN";function Vle(e,t){return e*TL[t]}var Ep=function(){function e(t,n){Ile(this,e),this.num=t,this.unit=n,this.num=t,this.unit=n,Number.isNaN(t)&&(this.unit=""),n!==""&&!Ble.test(n)&&(this.num=NaN,this.unit=""),zle.includes(n)&&(this.num=Vle(t,n),this.unit="px")}return Dle(e,[{key:"add",value:function(t){return this.unit!==t.unit?new e(NaN,""):new e(this.num+t.num,this.unit)}},{key:"subtract",value:function(t){return this.unit!==t.unit?new e(NaN,""):new e(this.num-t.num,this.unit)}},{key:"multiply",value:function(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new e(NaN,""):new e(this.num*t.num,this.unit||t.unit)}},{key:"divide",value:function(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new e(NaN,""):new e(this.num/t.num,this.unit||t.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(t){var n,r=(n=$le.exec(t))!==null&&n!==void 0?n:[],o=jp(r,3),a=o[1],i=o[2];return new e(parseFloat(a),i??"")}}])}();function RL(e){if(e.includes(bs))return bs;for(var t=e;t.includes("*")||t.includes("/");){var n,r=(n=PL.exec(t))!==null&&n!==void 0?n:[],o=jp(r,4),a=o[1],i=o[2],s=o[3],c=Ep.parse(a??""),l=Ep.parse(s??""),u=i==="*"?c.multiply(l):c.divide(l);if(u.isNaN())return bs;t=t.replace(PL,u.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var d,f=(d=AL.exec(t))!==null&&d!==void 0?d:[],p=jp(f,4),y=p[1],m=p[2],v=p[3],b=Ep.parse(y??""),x=Ep.parse(v??""),_=m==="+"?b.add(x):b.subtract(x);if(_.isNaN())return bs;t=t.replace(AL,_.toString())}return t}var IL=/\(([^()]*)\)/;function Ule(e){for(var t=e;t.includes("(");){var n=IL.exec(t),r=jp(n,2),o=r[1];t=t.replace(IL,RL(o))}return t}function Hle(e){var t=e.replace(/\s+/g,"");return t=Ule(t),t=RL(t),t}function Wle(e){try{return Hle(e)}catch{return bs}}function V1(e){var t=Wle(e.slice(5,-1));return t===bs?"":t}var qle=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Yle=["dx","dy","angle","className","breakAll"];function U1(){return U1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},U1.apply(this,arguments)}function DL(e,t){if(e==null)return{};var n=Kle(e,t),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Kle(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function LL(e,t){return Gle(e)||Jle(e,t)||Qle(e,t)||Xle()}function Xle(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qle(e,t){if(e){if(typeof e=="string")return FL(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return FL(e,t)}}function FL(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Jle(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,o,a,i,s=[],c=!0,l=!1;try{if(a=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(u){l=!0,o=u}finally{try{if(!c&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return s}}function Gle(e){if(Array.isArray(e))return e}var BL=/[ \f\n\r\t\v\u2028\u2029]+/,$L=function(e){var t=e.children,n=e.breakAll,r=e.style;try{var o=[];at(t)||(n?o=t.toString().split(""):o=t.toString().split(BL));var a=o.map(function(s){return{word:s,width:Bl(s,r).width}}),i=n?0:Bl("\xA0",r).width;return{wordsWithComputedWidth:a,spaceWidth:i}}catch{return null}},Zle=function(e,t,n,r,o){var a=e.maxLines,i=e.children,s=e.style,c=e.breakAll,l=me(a),u=i,d=function(){var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return A.reduce(function(C,N){var T=N.word,I=N.width,L=C[C.length-1];if(L&&(r==null||o||L.width+I+n<Number(r)))L.words.push(T),L.width+=I+n;else{var D={words:[T],width:I};C.push(D)}return C},[])},f=d(t),p=function(A){return A.reduce(function(C,N){return C.width>N.width?C:N})};if(!l)return f;for(var y="\u2026",m=function(A){var C=u.slice(0,A),N=$L({breakAll:c,style:s,children:C+y}).wordsWithComputedWidth,T=d(N),I=T.length>a||p(T).width>Number(r);return[I,T]},v=0,b=u.length-1,x=0,_;v<=b&&x<=u.length-1;){var w=Math.floor((v+b)/2),j=w-1,E=m(j),S=LL(E,2),O=S[0],P=S[1],M=m(w),k=LL(M,1),R=k[0];if(!O&&!R&&(v=w+1),O&&R&&(b=w-1),!O&&R){_=P;break}x++}return _||f},zL=function(e){var t=at(e)?[]:e.toString().split(BL);return[{words:t}]},eue=function(e){var t=e.width,n=e.scaleToFit,r=e.children,o=e.style,a=e.breakAll,i=e.maxLines;if((t||n)&&!ta.isSsr){var s,c,l=$L({breakAll:a,children:r,style:o});if(l){var u=l.wordsWithComputedWidth,d=l.spaceWidth;s=u,c=d}else return zL(r);return Zle({breakAll:a,children:r,maxLines:i,style:o},s,c,t,n)}return zL(r)},VL="#808080",Sp=function(e){var t=e.x,n=t===void 0?0:t,r=e.y,o=r===void 0?0:r,a=e.lineHeight,i=a===void 0?"1em":a,s=e.capHeight,c=s===void 0?"0.71em":s,l=e.scaleToFit,u=l===void 0?!1:l,d=e.textAnchor,f=d===void 0?"start":d,p=e.verticalAnchor,y=p===void 0?"end":p,m=e.fill,v=m===void 0?VL:m,b=DL(e,qle),x=g.useMemo(function(){return eue({breakAll:b.breakAll,children:b.children,maxLines:b.maxLines,scaleToFit:u,style:b.style,width:b.width})},[b.breakAll,b.children,b.maxLines,u,b.style,b.width]),_=b.dx,w=b.dy,j=b.angle,E=b.className,S=b.breakAll,O=DL(b,Yle);if(!$t(n)||!$t(o))return null;var P=n+(me(_)?_:0),M=o+(me(w)?w:0),k;switch(y){case"start":k=V1("calc(".concat(c,")"));break;case"middle":k=V1("calc(".concat((x.length-1)/2," * -").concat(i," + (").concat(c," / 2))"));break;default:k=V1("calc(".concat(x.length-1," * -").concat(i,")"));break}var R=[];if(u){var A=x[0].width,C=b.width;R.push("scale(".concat((me(C)?C/A:1)/A,")"))}return j&&R.push("rotate(".concat(j,", ").concat(P,", ").concat(M,")")),R.length&&(O.transform=R.join(" ")),U.createElement("text",U1({},rt(O,!0),{x:P,y:M,className:lt("recharts-text",E),textAnchor:f,fill:v.includes("url")?VL:v}),x.map(function(N,T){var I=N.words.join(S?"":" ");return U.createElement("tspan",{x:P,dy:T===0?k:i,key:"".concat(I,"-").concat(T)},I)}))};function na(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function tue(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function H1(e){let t,n,r;e.length!==2?(t=na,n=(s,c)=>na(e(s),c),r=(s,c)=>e(s)-c):(t=e===na||e===tue?e:nue,n=e,r=e);function o(s,c,l=0,u=s.length){if(l<u){if(t(c,c)!==0)return u;do{const d=l+u>>>1;n(s[d],c)<0?l=d+1:u=d}while(l<u)}return l}function a(s,c,l=0,u=s.length){if(l<u){if(t(c,c)!==0)return u;do{const d=l+u>>>1;n(s[d],c)<=0?l=d+1:u=d}while(l<u)}return l}function i(s,c,l=0,u=s.length){const d=o(s,c,l,u-1);return d>l&&r(s[d-1],c)>-r(s[d],c)?d-1:d}return{left:o,center:i,right:a}}function nue(){return 0}function UL(e){return e===null?NaN:+e}function*rue(e,t){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const oue=H1(na),zl=oue.right;H1(UL).center;class HL extends Map{constructor(t,n=sue){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,o]of t)this.set(r,o)}get(t){return super.get(WL(this,t))}has(t){return super.has(WL(this,t))}set(t,n){return super.set(aue(this,t),n)}delete(t){return super.delete(iue(this,t))}}function WL({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function aue({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function iue({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function sue(e){return e!==null&&typeof e=="object"?e.valueOf():e}function cue(e=na){if(e===na)return qL;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function qL(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const lue=Math.sqrt(50),uue=Math.sqrt(10),due=Math.sqrt(2);function Cp(e,t,n){const r=(t-e)/Math.max(0,n),o=Math.floor(Math.log10(r)),a=r/Math.pow(10,o),i=a>=lue?10:a>=uue?5:a>=due?2:1;let s,c,l;return o<0?(l=Math.pow(10,-o)/i,s=Math.round(e*l),c=Math.round(t*l),s/l<e&&++s,c/l>t&&--c,l=-l):(l=Math.pow(10,o)*i,s=Math.round(e/l),c=Math.round(t/l),s*l<e&&++s,c*l>t&&--c),c<s&&.5<=n&&n<2?Cp(e,t,n*2):[s,c,l]}function W1(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[o,a,i]=r?Cp(t,e,n):Cp(e,t,n);if(!(a>=o))return[];const s=a-o+1,c=new Array(s);if(r)if(i<0)for(let l=0;l<s;++l)c[l]=(a-l)/-i;else for(let l=0;l<s;++l)c[l]=(a-l)*i;else if(i<0)for(let l=0;l<s;++l)c[l]=(o+l)/-i;else for(let l=0;l<s;++l)c[l]=(o+l)*i;return c}function q1(e,t,n){return t=+t,e=+e,n=+n,Cp(e,t,n)[2]}function Y1(e,t,n){t=+t,e=+e,n=+n;const r=t<e,o=r?q1(t,e,n):q1(e,t,n);return(r?-1:1)*(o<0?1/-o:o)}function YL(e,t){let n;for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function KL(e,t){let n;for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function XL(e,t,n=0,r=1/0,o){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(o=o===void 0?qL:cue(o);r>n;){if(r-n>600){const c=r-n+1,l=t-n+1,u=Math.log(c),d=.5*Math.exp(2*u/3),f=.5*Math.sqrt(u*d*(c-d)/c)*(l-c/2<0?-1:1),p=Math.max(n,Math.floor(t-l*d/c+f)),y=Math.min(r,Math.floor(t+(c-l)*d/c+f));XL(e,t,p,y,o)}const a=e[t];let i=n,s=r;for(Vl(e,n,t),o(e[r],a)>0&&Vl(e,n,r);i<s;){for(Vl(e,i,s),++i,--s;o(e[i],a)<0;)++i;for(;o(e[s],a)>0;)--s}o(e[n],a)===0?Vl(e,n,s):(++s,Vl(e,s,r)),s<=t&&(n=s+1),t<=s&&(r=s-1)}return e}function Vl(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function fue(e,t,n){if(e=Float64Array.from(rue(e)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return KL(e);if(t>=1)return YL(e);var r,o=(r-1)*t,a=Math.floor(o),i=YL(XL(e,a).subarray(0,a+1)),s=KL(e.subarray(a+1));return i+(s-i)*(o-a)}}function pue(e,t,n=UL){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,o=(r-1)*t,a=Math.floor(o),i=+n(e[a],a,e),s=+n(e[a+1],a+1,e);return i+(s-i)*(o-a)}}function hue(e,t,n){e=+e,t=+t,n=(o=arguments.length)<2?(t=e,e=0,1):o<3?1:+n;for(var r=-1,o=Math.max(0,Math.ceil((t-e)/n))|0,a=new Array(o);++r<o;)a[r]=e+r*n;return a}function Qn(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Co(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const K1=Symbol("implicit");function X1(){var e=new HL,t=[],n=[],r=K1;function o(a){let i=e.get(a);if(i===void 0){if(r!==K1)return r;e.set(a,i=t.push(a)-1)}return n[i%n.length]}return o.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new HL;for(const i of a)e.has(i)||e.set(i,t.push(i)-1);return o},o.range=function(a){return arguments.length?(n=Array.from(a),o):n.slice()},o.unknown=function(a){return arguments.length?(r=a,o):r},o.copy=function(){return X1(t,n).unknown(r)},Qn.apply(o,arguments),o}function Ul(){var e=X1().unknown(void 0),t=e.domain,n=e.range,r=0,o=1,a,i,s=!1,c=0,l=0,u=.5;delete e.unknown;function d(){var f=t().length,p=o<r,y=p?o:r,m=p?r:o;a=(m-y)/Math.max(1,f-c+l*2),s&&(a=Math.floor(a)),y+=(m-y-a*(f-c))*u,i=a*(1-c),s&&(y=Math.round(y),i=Math.round(i));var v=hue(f).map(function(b){return y+a*b});return n(p?v.reverse():v)}return e.domain=function(f){return arguments.length?(t(f),d()):t()},e.range=function(f){return arguments.length?([r,o]=f,r=+r,o=+o,d()):[r,o]},e.rangeRound=function(f){return[r,o]=f,r=+r,o=+o,s=!0,d()},e.bandwidth=function(){return i},e.step=function(){return a},e.round=function(f){return arguments.length?(s=!!f,d()):s},e.padding=function(f){return arguments.length?(c=Math.min(1,l=+f),d()):c},e.paddingInner=function(f){return arguments.length?(c=Math.min(1,f),d()):c},e.paddingOuter=function(f){return arguments.length?(l=+f,d()):l},e.align=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),d()):u},e.copy=function(){return Ul(t(),[r,o]).round(s).paddingInner(c).paddingOuter(l).align(u)},Qn.apply(d(),arguments)}function QL(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return QL(t())},e}function Hl(){return QL(Ul.apply(null,arguments).paddingInner(1))}function mue(e){return function(){return e}}function Op(e){return+e}var JL=[0,1];function gn(e){return e}function Q1(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:mue(isNaN(t)?NaN:.5)}function yue(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function gue(e,t,n){var r=e[0],o=e[1],a=t[0],i=t[1];return o<r?(r=Q1(o,r),a=n(i,a)):(r=Q1(r,o),a=n(a,i)),function(s){return a(r(s))}}function vue(e,t,n){var r=Math.min(e.length,t.length)-1,o=new Array(r),a=new Array(r),i=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++i<r;)o[i]=Q1(e[i],e[i+1]),a[i]=n(t[i],t[i+1]);return function(s){var c=zl(e,s,1,r)-1;return a[c](o[c](s))}}function Wl(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Mp(){var e=JL,t=JL,n=zi,r,o,a,i=gn,s,c,l;function u(){var f=Math.min(e.length,t.length);return i!==gn&&(i=yue(e[0],e[f-1])),s=f>2?vue:gue,c=l=null,d}function d(f){return f==null||isNaN(f=+f)?a:(c||(c=s(e.map(r),t,n)))(r(i(f)))}return d.invert=function(f){return i(o((l||(l=s(t,e.map(r),fr)))(f)))},d.domain=function(f){return arguments.length?(e=Array.from(f,Op),u()):e.slice()},d.range=function(f){return arguments.length?(t=Array.from(f),u()):t.slice()},d.rangeRound=function(f){return t=Array.from(f),n=bb,u()},d.clamp=function(f){return arguments.length?(i=f?!0:gn,u()):i!==gn},d.interpolate=function(f){return arguments.length?(n=f,u()):n},d.unknown=function(f){return arguments.length?(a=f,d):a},function(f,p){return r=f,o=p,u()}}function J1(){return Mp()(gn,gn)}function bue(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Np(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function xs(e){return e=Np(Math.abs(e)),e?e[1]:NaN}function xue(e,t){return function(n,r){for(var o=n.length,a=[],i=0,s=e[0],c=0;o>0&&s>0&&(c+s+1>r&&(s=Math.max(1,r-c)),a.push(n.substring(o-=s,o+s)),!((c+=s+1)>r));)s=e[i=(i+1)%e.length];return a.reverse().join(t)}}function wue(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var _ue=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ql(e){if(!(t=_ue.exec(e)))throw new Error("invalid format: "+e);var t;return new G1({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}ql.prototype=G1.prototype;function G1(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}G1.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function jue(e){e:for(var t=e.length,n=1,r=-1,o;n<t;++n)switch(e[n]){case".":r=o=n;break;case"0":r===0&&(r=n),o=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(o+1):e}var GL;function Eue(e,t){var n=Np(e,t);if(!n)return e+"";var r=n[0],o=n[1],a=o-(GL=Math.max(-8,Math.min(8,Math.floor(o/3)))*3)+1,i=r.length;return a===i?r:a>i?r+new Array(a-i+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+Np(e,Math.max(0,t+a-1))[0]}function ZL(e,t){var n=Np(e,t);if(!n)return e+"";var r=n[0],o=n[1];return o<0?"0."+new Array(-o).join("0")+r:r.length>o+1?r.slice(0,o+1)+"."+r.slice(o+1):r+new Array(o-r.length+2).join("0")}const eF={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:bue,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>ZL(e*100,t),r:ZL,s:Eue,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function tF(e){return e}var nF=Array.prototype.map,rF=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function Sue(e){var t=e.grouping===void 0||e.thousands===void 0?tF:xue(nF.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",o=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?tF:wue(nF.call(e.numerals,String)),i=e.percent===void 0?"%":e.percent+"",s=e.minus===void 0?"\u2212":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function l(d){d=ql(d);var f=d.fill,p=d.align,y=d.sign,m=d.symbol,v=d.zero,b=d.width,x=d.comma,_=d.precision,w=d.trim,j=d.type;j==="n"?(x=!0,j="g"):eF[j]||(_===void 0&&(_=12),w=!0,j="g"),(v||f==="0"&&p==="=")&&(v=!0,f="0",p="=");var E=m==="$"?n:m==="#"&&/[boxX]/.test(j)?"0"+j.toLowerCase():"",S=m==="$"?r:/[%p]/.test(j)?i:"",O=eF[j],P=/[defgprs%]/.test(j);_=_===void 0?6:/[gprs]/.test(j)?Math.max(1,Math.min(21,_)):Math.max(0,Math.min(20,_));function M(k){var R=E,A=S,C,N,T;if(j==="c")A=O(k)+A,k="";else{k=+k;var I=k<0||1/k<0;if(k=isNaN(k)?c:O(Math.abs(k),_),w&&(k=jue(k)),I&&+k==0&&y!=="+"&&(I=!1),R=(I?y==="("?y:s:y==="-"||y==="("?"":y)+R,A=(j==="s"?rF[8+GL/3]:"")+A+(I&&y==="("?")":""),P){for(C=-1,N=k.length;++C<N;)if(T=k.charCodeAt(C),48>T||T>57){A=(T===46?o+k.slice(C+1):k.slice(C))+A,k=k.slice(0,C);break}}}x&&!v&&(k=t(k,1/0));var L=R.length+k.length+A.length,D=L<b?new Array(b-L+1).join(f):"";switch(x&&v&&(k=t(D+k,D.length?b-A.length:1/0),D=""),p){case"<":k=R+k+A+D;break;case"=":k=R+D+k+A;break;case"^":k=D.slice(0,L=D.length>>1)+R+k+A+D.slice(L);break;default:k=D+R+k+A;break}return a(k)}return M.toString=function(){return d+""},M}function u(d,f){var p=l((d=ql(d),d.type="f",d)),y=Math.max(-8,Math.min(8,Math.floor(xs(f)/3)))*3,m=Math.pow(10,-y),v=rF[8+y/3];return function(b){return p(m*b)+v}}return{format:l,formatPrefix:u}}var kp,Z1,oF;Cue({thousands:",",grouping:[3],currency:["$",""]});function Cue(e){return kp=Sue(e),Z1=kp.format,oF=kp.formatPrefix,kp}function Oue(e){return Math.max(0,-xs(Math.abs(e)))}function Mue(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(xs(t)/3)))*3-xs(Math.abs(e)))}function Nue(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,xs(t)-xs(e))+1}function aF(e,t,n,r){var o=Y1(e,t,n),a;switch(r=ql(r??",f"),r.type){case"s":{var i=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(a=Mue(o,i))&&(r.precision=a),oF(r,i)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=Nue(o,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=Oue(o))&&(r.precision=a-(r.type==="%")*2);break}}return Z1(r)}function ra(e){var t=e.domain;return e.ticks=function(n){var r=t();return W1(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var o=t();return aF(o[0],o[o.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),o=0,a=r.length-1,i=r[o],s=r[a],c,l,u=10;for(s<i&&(l=i,i=s,s=l,l=o,o=a,a=l);u-- >0;){if(l=q1(i,s,n),l===c)return r[o]=i,r[a]=s,t(r);if(l>0)i=Math.floor(i/l)*l,s=Math.ceil(s/l)*l;else if(l<0)i=Math.ceil(i*l)/l,s=Math.floor(s*l)/l;else break;c=l}return e},e}function Pp(){var e=J1();return e.copy=function(){return Wl(e,Pp())},Qn.apply(e,arguments),ra(e)}function iF(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,Op),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return iF(e).unknown(t)},e=arguments.length?Array.from(e,Op):[0,1],ra(n)}function sF(e,t){e=e.slice();var n=0,r=e.length-1,o=e[n],a=e[r],i;return a<o&&(i=n,n=r,r=i,i=o,o=a,a=i),e[n]=t.floor(o),e[r]=t.ceil(a),e}function cF(e){return Math.log(e)}function lF(e){return Math.exp(e)}function kue(e){return-Math.log(-e)}function Pue(e){return-Math.exp(-e)}function Aue(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Tue(e){return e===10?Aue:e===Math.E?Math.exp:t=>Math.pow(e,t)}function Rue(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function uF(e){return(t,n)=>-e(-t,n)}function e_(e){const t=e(cF,lF),n=t.domain;let r=10,o,a;function i(){return o=Rue(r),a=Tue(r),n()[0]<0?(o=uF(o),a=uF(a),e(kue,Pue)):e(cF,lF),t}return t.base=function(s){return arguments.length?(r=+s,i()):r},t.domain=function(s){return arguments.length?(n(s),i()):n()},t.ticks=s=>{const c=n();let l=c[0],u=c[c.length-1];const d=u<l;d&&([l,u]=[u,l]);let f=o(l),p=o(u),y,m;const v=s==null?10:+s;let b=[];if(!(r%1)&&p-f<v){if(f=Math.floor(f),p=Math.ceil(p),l>0){for(;f<=p;++f)for(y=1;y<r;++y)if(m=f<0?y/a(-f):y*a(f),!(m<l)){if(m>u)break;b.push(m)}}else for(;f<=p;++f)for(y=r-1;y>=1;--y)if(m=f>0?y/a(-f):y*a(f),!(m<l)){if(m>u)break;b.push(m)}b.length*2<v&&(b=W1(l,u,v))}else b=W1(f,p,Math.min(p-f,v)).map(a);return d?b.reverse():b},t.tickFormat=(s,c)=>{if(s==null&&(s=10),c==null&&(c=r===10?"s":","),typeof c!="function"&&(!(r%1)&&(c=ql(c)).precision==null&&(c.trim=!0),c=Z1(c)),s===1/0)return c;const l=Math.max(1,r*s/t.ticks().length);return u=>{let d=u/a(Math.round(o(u)));return d*r<r-.5&&(d*=r),d<=l?c(u):""}},t.nice=()=>n(sF(n(),{floor:s=>a(Math.floor(o(s))),ceil:s=>a(Math.ceil(o(s)))})),t}function dF(){const e=e_(Mp()).domain([1,10]);return e.copy=()=>Wl(e,dF()).base(e.base()),Qn.apply(e,arguments),e}function fF(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function pF(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function t_(e){var t=1,n=e(fF(t),pF(t));return n.constant=function(r){return arguments.length?e(fF(t=+r),pF(t)):t},ra(n)}function hF(){var e=t_(Mp());return e.copy=function(){return Wl(e,hF()).constant(e.constant())},Qn.apply(e,arguments)}function mF(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Iue(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Due(e){return e<0?-e*e:e*e}function n_(e){var t=e(gn,gn),n=1;function r(){return n===1?e(gn,gn):n===.5?e(Iue,Due):e(mF(n),mF(1/n))}return t.exponent=function(o){return arguments.length?(n=+o,r()):n},ra(t)}function r_(){var e=n_(Mp());return e.copy=function(){return Wl(e,r_()).exponent(e.exponent())},Qn.apply(e,arguments),e}function Lue(){return r_.apply(null,arguments).exponent(.5)}function yF(e){return Math.sign(e)*e*e}function Fue(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function gF(){var e=J1(),t=[0,1],n=!1,r;function o(a){var i=Fue(e(a));return isNaN(i)?r:n?Math.round(i):i}return o.invert=function(a){return e.invert(yF(a))},o.domain=function(a){return arguments.length?(e.domain(a),o):e.domain()},o.range=function(a){return arguments.length?(e.range((t=Array.from(a,Op)).map(yF)),o):t.slice()},o.rangeRound=function(a){return o.range(a).round(!0)},o.round=function(a){return arguments.length?(n=!!a,o):n},o.clamp=function(a){return arguments.length?(e.clamp(a),o):e.clamp()},o.unknown=function(a){return arguments.length?(r=a,o):r},o.copy=function(){return gF(e.domain(),t).round(n).clamp(e.clamp()).unknown(r)},Qn.apply(o,arguments),ra(o)}function vF(){var e=[],t=[],n=[],r;function o(){var i=0,s=Math.max(1,t.length);for(n=new Array(s-1);++i<s;)n[i-1]=pue(e,i/s);return a}function a(i){return i==null||isNaN(i=+i)?r:t[zl(n,i)]}return a.invertExtent=function(i){var s=t.indexOf(i);return s<0?[NaN,NaN]:[s>0?n[s-1]:e[0],s<n.length?n[s]:e[e.length-1]]},a.domain=function(i){if(!arguments.length)return e.slice();e=[];for(let s of i)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(na),o()},a.range=function(i){return arguments.length?(t=Array.from(i),o()):t.slice()},a.unknown=function(i){return arguments.length?(r=i,a):r},a.quantiles=function(){return n.slice()},a.copy=function(){return vF().domain(e).range(t).unknown(r)},Qn.apply(a,arguments)}function bF(){var e=0,t=1,n=1,r=[.5],o=[0,1],a;function i(c){return c!=null&&c<=c?o[zl(r,c,0,n)]:a}function s(){var c=-1;for(r=new Array(n);++c<n;)r[c]=((c+1)*t-(c-n)*e)/(n+1);return i}return i.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,s()):[e,t]},i.range=function(c){return arguments.length?(n=(o=Array.from(c)).length-1,s()):o.slice()},i.invertExtent=function(c){var l=o.indexOf(c);return l<0?[NaN,NaN]:l<1?[e,r[0]]:l>=n?[r[n-1],t]:[r[l-1],r[l]]},i.unknown=function(c){return arguments.length&&(a=c),i},i.thresholds=function(){return r.slice()},i.copy=function(){return bF().domain([e,t]).range(o).unknown(a)},Qn.apply(ra(i),arguments)}function xF(){var e=[.5],t=[0,1],n,r=1;function o(a){return a!=null&&a<=a?t[zl(e,a,0,r)]:n}return o.domain=function(a){return arguments.length?(e=Array.from(a),r=Math.min(e.length,t.length-1),o):e.slice()},o.range=function(a){return arguments.length?(t=Array.from(a),r=Math.min(e.length,t.length-1),o):t.slice()},o.invertExtent=function(a){var i=t.indexOf(a);return[e[i-1],e[i]]},o.unknown=function(a){return arguments.length?(n=a,o):n},o.copy=function(){return xF().domain(e).range(t).unknown(n)},Qn.apply(o,arguments)}const o_=new Date,a_=new Date;function zt(e,t,n,r){function o(a){return e(a=arguments.length===0?new Date:new Date(+a)),a}return o.floor=a=>(e(a=new Date(+a)),a),o.ceil=a=>(e(a=new Date(a-1)),t(a,1),e(a),a),o.round=a=>{const i=o(a),s=o.ceil(a);return a-i<s-a?i:s},o.offset=(a,i)=>(t(a=new Date(+a),i==null?1:Math.floor(i)),a),o.range=(a,i,s)=>{const c=[];if(a=o.ceil(a),s=s==null?1:Math.floor(s),!(a<i)||!(s>0))return c;let l;do c.push(l=new Date(+a)),t(a,s),e(a);while(l<a&&a<i);return c},o.filter=a=>zt(i=>{if(i>=i)for(;e(i),!a(i);)i.setTime(i-1)},(i,s)=>{if(i>=i)if(s<0)for(;++s<=0;)for(;t(i,-1),!a(i););else for(;--s>=0;)for(;t(i,1),!a(i););}),n&&(o.count=(a,i)=>(o_.setTime(+a),a_.setTime(+i),e(o_),e(a_),Math.floor(n(o_,a_))),o.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?o.filter(r?i=>r(i)%a===0:i=>o.count(0,i)%a===0):o)),o}const Ap=zt(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Ap.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?zt(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):Ap),Ap.range;const Oo=1e3,Jn=Oo*60,Mo=Jn*60,No=Mo*24,i_=No*7,wF=No*30,s_=No*365,$a=zt(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Oo)},(e,t)=>(t-e)/Oo,e=>e.getUTCSeconds());$a.range;const c_=zt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Oo)},(e,t)=>{e.setTime(+e+t*Jn)},(e,t)=>(t-e)/Jn,e=>e.getMinutes());c_.range;const l_=zt(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Jn)},(e,t)=>(t-e)/Jn,e=>e.getUTCMinutes());l_.range;const u_=zt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Oo-e.getMinutes()*Jn)},(e,t)=>{e.setTime(+e+t*Mo)},(e,t)=>(t-e)/Mo,e=>e.getHours());u_.range;const d_=zt(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Mo)},(e,t)=>(t-e)/Mo,e=>e.getUTCHours());d_.range;const Yl=zt(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Jn)/No,e=>e.getDate()-1);Yl.range;const Tp=zt(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/No,e=>e.getUTCDate()-1);Tp.range;const _F=zt(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/No,e=>Math.floor(e/No));_F.range;function za(e){return zt(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Jn)/i_)}const Rp=za(0),Ip=za(1),Bue=za(2),$ue=za(3),ws=za(4),zue=za(5),Vue=za(6);Rp.range,Ip.range,Bue.range,$ue.range,ws.range,zue.range,Vue.range;function Va(e){return zt(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/i_)}const Dp=Va(0),Lp=Va(1),Uue=Va(2),Hue=Va(3),_s=Va(4),Wue=Va(5),que=Va(6);Dp.range,Lp.range,Uue.range,Hue.range,_s.range,Wue.range,que.range;const f_=zt(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());f_.range;const p_=zt(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());p_.range;const ko=zt(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());ko.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:zt(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)}),ko.range;const Po=zt(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Po.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:zt(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)}),Po.range;function jF(e,t,n,r,o,a){const i=[[$a,1,Oo],[$a,5,5*Oo],[$a,15,15*Oo],[$a,30,30*Oo],[a,1,Jn],[a,5,5*Jn],[a,15,15*Jn],[a,30,30*Jn],[o,1,Mo],[o,3,3*Mo],[o,6,6*Mo],[o,12,12*Mo],[r,1,No],[r,2,2*No],[n,1,i_],[t,1,wF],[t,3,3*wF],[e,1,s_]];function s(l,u,d){const f=u<l;f&&([l,u]=[u,l]);const p=d&&typeof d.range=="function"?d:c(l,u,d),y=p?p.range(l,+u+1):[];return f?y.reverse():y}function c(l,u,d){const f=Math.abs(u-l)/d,p=H1(([,,v])=>v).right(i,f);if(p===i.length)return e.every(Y1(l/s_,u/s_,d));if(p===0)return Ap.every(Math.max(Y1(l,u,d),1));const[y,m]=i[f/i[p-1][2]<i[p][2]/f?p-1:p];return y.every(m)}return[s,c]}const[Yue,Kue]=jF(Po,p_,Dp,_F,d_,l_),[Xue,Que]=jF(ko,f_,Rp,Yl,u_,c_);function h_(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function m_(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Kl(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function Jue(e){var t=e.dateTime,n=e.date,r=e.time,o=e.periods,a=e.days,i=e.shortDays,s=e.months,c=e.shortMonths,l=Xl(o),u=Ql(o),d=Xl(a),f=Ql(a),p=Xl(i),y=Ql(i),m=Xl(s),v=Ql(s),b=Xl(c),x=Ql(c),_={a:I,A:L,b:D,B,c:null,d:NF,e:NF,f:xde,g:kde,G:Ade,H:gde,I:vde,j:bde,L:kF,m:wde,M:_de,p:H,q:F,Q:DF,s:LF,S:jde,u:Ede,U:Sde,V:Cde,w:Ode,W:Mde,x:null,X:null,y:Nde,Y:Pde,Z:Tde,"%":IF},w={a:z,A:G,b:Q,B:oe,c:null,d:AF,e:AF,f:Lde,g:Yde,G:Xde,H:Rde,I:Ide,j:Dde,L:TF,m:Fde,M:Bde,p:Z,q,Q:DF,s:LF,S:$de,u:zde,U:Vde,V:Ude,w:Hde,W:Wde,x:null,X:null,y:qde,Y:Kde,Z:Qde,"%":IF},j={a:M,A:k,b:R,B:A,c:C,d:OF,e:OF,f:pde,g:CF,G:SF,H:MF,I:MF,j:lde,L:fde,m:cde,M:ude,p:P,q:sde,Q:mde,s:yde,S:dde,u:nde,U:rde,V:ode,w:tde,W:ade,x:N,X:T,y:CF,Y:SF,Z:ide,"%":hde};_.x=E(n,_),_.X=E(r,_),_.c=E(t,_),w.x=E(n,w),w.X=E(r,w),w.c=E(t,w);function E(W,J){return function(te){var $=[],se=-1,le=0,ve=W.length,Te,qe,Ye;for(te instanceof Date||(te=new Date(+te));++se<ve;)W.charCodeAt(se)===37&&($.push(W.slice(le,se)),(qe=EF[Te=W.charAt(++se)])!=null?Te=W.charAt(++se):qe=Te==="e"?" ":"0",(Ye=J[Te])&&(Te=Ye(te,qe)),$.push(Te),le=se+1);return $.push(W.slice(le,se)),$.join("")}}function S(W,J){return function(te){var $=Kl(1900,void 0,1),se=O($,W,te+="",0),le,ve;if(se!=te.length)return null;if("Q"in $)return new Date($.Q);if("s"in $)return new Date($.s*1e3+("L"in $?$.L:0));if(J&&!("Z"in $)&&($.Z=0),"p"in $&&($.H=$.H%12+$.p*12),$.m===void 0&&($.m="q"in $?$.q:0),"V"in $){if($.V<1||$.V>53)return null;"w"in $||($.w=1),"Z"in $?(le=m_(Kl($.y,0,1)),ve=le.getUTCDay(),le=ve>4||ve===0?Lp.ceil(le):Lp(le),le=Tp.offset(le,($.V-1)*7),$.y=le.getUTCFullYear(),$.m=le.getUTCMonth(),$.d=le.getUTCDate()+($.w+6)%7):(le=h_(Kl($.y,0,1)),ve=le.getDay(),le=ve>4||ve===0?Ip.ceil(le):Ip(le),le=Yl.offset(le,($.V-1)*7),$.y=le.getFullYear(),$.m=le.getMonth(),$.d=le.getDate()+($.w+6)%7)}else("W"in $||"U"in $)&&("w"in $||($.w="u"in $?$.u%7:"W"in $?1:0),ve="Z"in $?m_(Kl($.y,0,1)).getUTCDay():h_(Kl($.y,0,1)).getDay(),$.m=0,$.d="W"in $?($.w+6)%7+$.W*7-(ve+5)%7:$.w+$.U*7-(ve+6)%7);return"Z"in $?($.H+=$.Z/100|0,$.M+=$.Z%100,m_($)):h_($)}}function O(W,J,te,$){for(var se=0,le=J.length,ve=te.length,Te,qe;se<le;){if($>=ve)return-1;if(Te=J.charCodeAt(se++),Te===37){if(Te=J.charAt(se++),qe=j[Te in EF?J.charAt(se++):Te],!qe||($=qe(W,te,$))<0)return-1}else if(Te!=te.charCodeAt($++))return-1}return $}function P(W,J,te){var $=l.exec(J.slice(te));return $?(W.p=u.get($[0].toLowerCase()),te+$[0].length):-1}function M(W,J,te){var $=p.exec(J.slice(te));return $?(W.w=y.get($[0].toLowerCase()),te+$[0].length):-1}function k(W,J,te){var $=d.exec(J.slice(te));return $?(W.w=f.get($[0].toLowerCase()),te+$[0].length):-1}function R(W,J,te){var $=b.exec(J.slice(te));return $?(W.m=x.get($[0].toLowerCase()),te+$[0].length):-1}function A(W,J,te){var $=m.exec(J.slice(te));return $?(W.m=v.get($[0].toLowerCase()),te+$[0].length):-1}function C(W,J,te){return O(W,t,J,te)}function N(W,J,te){return O(W,n,J,te)}function T(W,J,te){return O(W,r,J,te)}function I(W){return i[W.getDay()]}function L(W){return a[W.getDay()]}function D(W){return c[W.getMonth()]}function B(W){return s[W.getMonth()]}function H(W){return o[+(W.getHours()>=12)]}function F(W){return 1+~~(W.getMonth()/3)}function z(W){return i[W.getUTCDay()]}function G(W){return a[W.getUTCDay()]}function Q(W){return c[W.getUTCMonth()]}function oe(W){return s[W.getUTCMonth()]}function Z(W){return o[+(W.getUTCHours()>=12)]}function q(W){return 1+~~(W.getUTCMonth()/3)}return{format:function(W){var J=E(W+="",_);return J.toString=function(){return W},J},parse:function(W){var J=S(W+="",!1);return J.toString=function(){return W},J},utcFormat:function(W){var J=E(W+="",w);return J.toString=function(){return W},J},utcParse:function(W){var J=S(W+="",!0);return J.toString=function(){return W},J}}}var EF={"-":"",_:" ",0:"0"},qt=/^\s*\d+/,Gue=/^%/,Zue=/[\\^$*+?|[\]().{}]/g;function et(e,t,n){var r=e<0?"-":"",o=(r?-e:e)+"",a=o.length;return r+(a<n?new Array(n-a+1).join(t)+o:o)}function ede(e){return e.replace(Zue,"\\$&")}function Xl(e){return new RegExp("^(?:"+e.map(ede).join("|")+")","i")}function Ql(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function tde(e,t,n){var r=qt.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function nde(e,t,n){var r=qt.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function rde(e,t,n){var r=qt.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function ode(e,t,n){var r=qt.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function ade(e,t,n){var r=qt.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function SF(e,t,n){var r=qt.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function CF(e,t,n){var r=qt.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function ide(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function sde(e,t,n){var r=qt.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function cde(e,t,n){var r=qt.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function OF(e,t,n){var r=qt.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function lde(e,t,n){var r=qt.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function MF(e,t,n){var r=qt.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function ude(e,t,n){var r=qt.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function dde(e,t,n){var r=qt.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function fde(e,t,n){var r=qt.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function pde(e,t,n){var r=qt.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function hde(e,t,n){var r=Gue.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function mde(e,t,n){var r=qt.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function yde(e,t,n){var r=qt.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function NF(e,t){return et(e.getDate(),t,2)}function gde(e,t){return et(e.getHours(),t,2)}function vde(e,t){return et(e.getHours()%12||12,t,2)}function bde(e,t){return et(1+Yl.count(ko(e),e),t,3)}function kF(e,t){return et(e.getMilliseconds(),t,3)}function xde(e,t){return kF(e,t)+"000"}function wde(e,t){return et(e.getMonth()+1,t,2)}function _de(e,t){return et(e.getMinutes(),t,2)}function jde(e,t){return et(e.getSeconds(),t,2)}function Ede(e){var t=e.getDay();return t===0?7:t}function Sde(e,t){return et(Rp.count(ko(e)-1,e),t,2)}function PF(e){var t=e.getDay();return t>=4||t===0?ws(e):ws.ceil(e)}function Cde(e,t){return e=PF(e),et(ws.count(ko(e),e)+(ko(e).getDay()===4),t,2)}function Ode(e){return e.getDay()}function Mde(e,t){return et(Ip.count(ko(e)-1,e),t,2)}function Nde(e,t){return et(e.getFullYear()%100,t,2)}function kde(e,t){return e=PF(e),et(e.getFullYear()%100,t,2)}function Pde(e,t){return et(e.getFullYear()%1e4,t,4)}function Ade(e,t){var n=e.getDay();return e=n>=4||n===0?ws(e):ws.ceil(e),et(e.getFullYear()%1e4,t,4)}function Tde(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+et(t/60|0,"0",2)+et(t%60,"0",2)}function AF(e,t){return et(e.getUTCDate(),t,2)}function Rde(e,t){return et(e.getUTCHours(),t,2)}function Ide(e,t){return et(e.getUTCHours()%12||12,t,2)}function Dde(e,t){return et(1+Tp.count(Po(e),e),t,3)}function TF(e,t){return et(e.getUTCMilliseconds(),t,3)}function Lde(e,t){return TF(e,t)+"000"}function Fde(e,t){return et(e.getUTCMonth()+1,t,2)}function Bde(e,t){return et(e.getUTCMinutes(),t,2)}function $de(e,t){return et(e.getUTCSeconds(),t,2)}function zde(e){var t=e.getUTCDay();return t===0?7:t}function Vde(e,t){return et(Dp.count(Po(e)-1,e),t,2)}function RF(e){var t=e.getUTCDay();return t>=4||t===0?_s(e):_s.ceil(e)}function Ude(e,t){return e=RF(e),et(_s.count(Po(e),e)+(Po(e).getUTCDay()===4),t,2)}function Hde(e){return e.getUTCDay()}function Wde(e,t){return et(Lp.count(Po(e)-1,e),t,2)}function qde(e,t){return et(e.getUTCFullYear()%100,t,2)}function Yde(e,t){return e=RF(e),et(e.getUTCFullYear()%100,t,2)}function Kde(e,t){return et(e.getUTCFullYear()%1e4,t,4)}function Xde(e,t){var n=e.getUTCDay();return e=n>=4||n===0?_s(e):_s.ceil(e),et(e.getUTCFullYear()%1e4,t,4)}function Qde(){return"+0000"}function IF(){return"%"}function DF(e){return+e}function LF(e){return Math.floor(+e/1e3)}var js,FF,BF;Jde({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Jde(e){return js=Jue(e),FF=js.format,js.parse,BF=js.utcFormat,js.utcParse,js}function Gde(e){return new Date(e)}function Zde(e){return e instanceof Date?+e:+new Date(+e)}function y_(e,t,n,r,o,a,i,s,c,l){var u=J1(),d=u.invert,f=u.domain,p=l(".%L"),y=l(":%S"),m=l("%I:%M"),v=l("%I %p"),b=l("%a %d"),x=l("%b %d"),_=l("%B"),w=l("%Y");function j(E){return(c(E)<E?p:s(E)<E?y:i(E)<E?m:a(E)<E?v:r(E)<E?o(E)<E?b:x:n(E)<E?_:w)(E)}return u.invert=function(E){return new Date(d(E))},u.domain=function(E){return arguments.length?f(Array.from(E,Zde)):f().map(Gde)},u.ticks=function(E){var S=f();return e(S[0],S[S.length-1],E??10)},u.tickFormat=function(E,S){return S==null?j:l(S)},u.nice=function(E){var S=f();return(!E||typeof E.range!="function")&&(E=t(S[0],S[S.length-1],E??10)),E?f(sF(S,E)):u},u.copy=function(){return Wl(u,y_(e,t,n,r,o,a,i,s,c,l))},u}function efe(){return Qn.apply(y_(Xue,Que,ko,f_,Rp,Yl,u_,c_,$a,FF).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function tfe(){return Qn.apply(y_(Yue,Kue,Po,p_,Dp,Tp,d_,l_,$a,BF).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Fp(){var e=0,t=1,n,r,o,a,i=gn,s=!1,c;function l(d){return d==null||isNaN(d=+d)?c:i(o===0?.5:(d=(a(d)-n)*o,s?Math.max(0,Math.min(1,d)):d))}l.domain=function(d){return arguments.length?([e,t]=d,n=a(e=+e),r=a(t=+t),o=n===r?0:1/(r-n),l):[e,t]},l.clamp=function(d){return arguments.length?(s=!!d,l):s},l.interpolator=function(d){return arguments.length?(i=d,l):i};function u(d){return function(f){var p,y;return arguments.length?([p,y]=f,i=d(p,y),l):[i(0),i(1)]}}return l.range=u(zi),l.rangeRound=u(bb),l.unknown=function(d){return arguments.length?(c=d,l):c},function(d){return a=d,n=d(e),r=d(t),o=n===r?0:1/(r-n),l}}function oa(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function $F(){var e=ra(Fp()(gn));return e.copy=function(){return oa(e,$F())},Co.apply(e,arguments)}function zF(){var e=e_(Fp()).domain([1,10]);return e.copy=function(){return oa(e,zF()).base(e.base())},Co.apply(e,arguments)}function VF(){var e=t_(Fp());return e.copy=function(){return oa(e,VF()).constant(e.constant())},Co.apply(e,arguments)}function g_(){var e=n_(Fp());return e.copy=function(){return oa(e,g_()).exponent(e.exponent())},Co.apply(e,arguments)}function nfe(){return g_.apply(null,arguments).exponent(.5)}function UF(){var e=[],t=gn;function n(r){if(r!=null&&!isNaN(r=+r))return t((zl(e,r,1)-1)/(e.length-1))}return n.domain=function(r){if(!arguments.length)return e.slice();e=[];for(let o of r)o!=null&&!isNaN(o=+o)&&e.push(o);return e.sort(na),n},n.interpolator=function(r){return arguments.length?(t=r,n):t},n.range=function(){return e.map((r,o)=>t(o/(e.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(o,a)=>fue(e,a/r))},n.copy=function(){return UF(t).domain(e)},Co.apply(n,arguments)}function Bp(){var e=0,t=.5,n=1,r=1,o,a,i,s,c,l=gn,u,d=!1,f;function p(m){return isNaN(m=+m)?f:(m=.5+((m=+u(m))-a)*(r*m<r*a?s:c),l(d?Math.max(0,Math.min(1,m)):m))}p.domain=function(m){return arguments.length?([e,t,n]=m,o=u(e=+e),a=u(t=+t),i=u(n=+n),s=o===a?0:.5/(a-o),c=a===i?0:.5/(i-a),r=a<o?-1:1,p):[e,t,n]},p.clamp=function(m){return arguments.length?(d=!!m,p):d},p.interpolator=function(m){return arguments.length?(l=m,p):l};function y(m){return function(v){var b,x,_;return arguments.length?([b,x,_]=v,l=jJ(m,[b,x,_]),p):[l(0),l(.5),l(1)]}}return p.range=y(zi),p.rangeRound=y(bb),p.unknown=function(m){return arguments.length?(f=m,p):f},function(m){return u=m,o=m(e),a=m(t),i=m(n),s=o===a?0:.5/(a-o),c=a===i?0:.5/(i-a),r=a<o?-1:1,p}}function HF(){var e=ra(Bp()(gn));return e.copy=function(){return oa(e,HF())},Co.apply(e,arguments)}function WF(){var e=e_(Bp()).domain([.1,1,10]);return e.copy=function(){return oa(e,WF()).base(e.base())},Co.apply(e,arguments)}function qF(){var e=t_(Bp());return e.copy=function(){return oa(e,qF()).constant(e.constant())},Co.apply(e,arguments)}function v_(){var e=n_(Bp());return e.copy=function(){return oa(e,v_()).exponent(e.exponent())},Co.apply(e,arguments)}function rfe(){return v_.apply(null,arguments).exponent(.5)}const YF=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Ul,scaleDiverging:HF,scaleDivergingLog:WF,scaleDivergingPow:v_,scaleDivergingSqrt:rfe,scaleDivergingSymlog:qF,scaleIdentity:iF,scaleImplicit:K1,scaleLinear:Pp,scaleLog:dF,scaleOrdinal:X1,scalePoint:Hl,scalePow:r_,scaleQuantile:vF,scaleQuantize:bF,scaleRadial:gF,scaleSequential:$F,scaleSequentialLog:zF,scaleSequentialPow:g_,scaleSequentialQuantile:UF,scaleSequentialSqrt:nfe,scaleSequentialSymlog:VF,scaleSqrt:Lue,scaleSymlog:hF,scaleThreshold:xF,scaleTime:efe,scaleUtc:tfe,tickFormat:aF},Symbol.toStringTag,{value:"Module"}));var b_,KF;function XF(){if(KF)return b_;KF=1;var e=Di();function t(n,r,o){for(var a=-1,i=n.length;++a<i;){var s=n[a],c=r(s);if(c!=null&&(l===void 0?c===c&&!e(c):o(c,l)))var l=c,u=s}return u}return b_=t,b_}var x_,QF;function ofe(){if(QF)return x_;QF=1;function e(t,n){return t>n}return x_=e,x_}var w_,JF;function afe(){if(JF)return w_;JF=1;var e=XF(),t=ofe(),n=Li();function r(o){return o&&o.length?e(o,n,t):void 0}return w_=r,w_}var ife=afe();const $p=Xe(ife);var __,GF;function sfe(){if(GF)return __;GF=1;function e(t,n){return t<n}return __=e,__}var j_,ZF;function cfe(){if(ZF)return j_;ZF=1;var e=XF(),t=sfe(),n=Li();function r(o){return o&&o.length?e(o,n,t):void 0}return j_=r,j_}var lfe=cfe();const zp=Xe(lfe);var E_,eB;kE=function(){if(eB)return E_;eB=1;var e=Js(),t=kr(),n=W4(),r=un();function o(a,i){var s=r(a)?e:n;return s(a,t(i,3))}return E_=o,E_};var S_,tB;function ufe(){if(tB)return S_;tB=1;var e=Vh(),t=kE();function n(r,o){return e(t(r,o),1)}return S_=n,S_}var dfe=ufe();const ffe=Xe(dfe);var C_,nB;function pfe(){if(nB)return C_;nB=1;var e=b0();function t(n,r){return e(n,r)}return C_=t,C_}var hfe=pfe();const O_=Xe(hfe);var Es=1e9,mfe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},k_,Et=!0,Gn="[DecimalError] ",Ua=Gn+"Invalid argument: ",M_=Gn+"Exponent out of range: ",Ss=Math.floor,Ha=Math.pow,yfe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,$n,Yt=1e7,xt=7,rB=9007199254740991,Vp=Ss(rB/xt),Ee={};Ee.absoluteValue=Ee.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e},Ee.comparedTo=Ee.cmp=function(e){var t,n,r,o,a=this;if(e=new a.constructor(e),a.s!==e.s)return a.s||-e.s;if(a.e!==e.e)return a.e>e.e^a.s<0?1:-1;for(r=a.d.length,o=e.d.length,t=0,n=r<o?r:o;t<n;++t)if(a.d[t]!==e.d[t])return a.d[t]>e.d[t]^a.s<0?1:-1;return r===o?0:r>o^a.s<0?1:-1},Ee.decimalPlaces=Ee.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*xt;if(t=e.d[t],t)for(;t%10==0;t/=10)n--;return n<0?0:n},Ee.dividedBy=Ee.div=function(e){return Ao(this,new this.constructor(e))},Ee.dividedToIntegerBy=Ee.idiv=function(e){var t=this,n=t.constructor;return ht(Ao(t,new n(e),0,1),n.precision)},Ee.equals=Ee.eq=function(e){return!this.cmp(e)},Ee.exponent=function(){return Lt(this)},Ee.greaterThan=Ee.gt=function(e){return this.cmp(e)>0},Ee.greaterThanOrEqualTo=Ee.gte=function(e){return this.cmp(e)>=0},Ee.isInteger=Ee.isint=function(){return this.e>this.d.length-2},Ee.isNegative=Ee.isneg=function(){return this.s<0},Ee.isPositive=Ee.ispos=function(){return this.s>0},Ee.isZero=function(){return this.s===0},Ee.lessThan=Ee.lt=function(e){return this.cmp(e)<0},Ee.lessThanOrEqualTo=Ee.lte=function(e){return this.cmp(e)<1},Ee.logarithm=Ee.log=function(e){var t,n=this,r=n.constructor,o=r.precision,a=o+5;if(e===void 0)e=new r(10);else if(e=new r(e),e.s<1||e.eq($n))throw Error(Gn+"NaN");if(n.s<1)throw Error(Gn+(n.s?"NaN":"-Infinity"));return n.eq($n)?new r(0):(Et=!1,t=Ao(Jl(n,a),Jl(e,a),a),Et=!0,ht(t,o))},Ee.minus=Ee.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?sB(t,e):oB(t,(e.s=-e.s,e))},Ee.modulo=Ee.mod=function(e){var t,n=this,r=n.constructor,o=r.precision;if(e=new r(e),!e.s)throw Error(Gn+"NaN");return n.s?(Et=!1,t=Ao(n,e,0,1).times(e),Et=!0,n.minus(t)):ht(new r(n),o)},Ee.naturalExponential=Ee.exp=function(){return aB(this)},Ee.naturalLogarithm=Ee.ln=function(){return Jl(this)},Ee.negated=Ee.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e},Ee.plus=Ee.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?oB(t,e):sB(t,(e.s=-e.s,e))},Ee.precision=Ee.sd=function(e){var t,n,r,o=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Ua+e);if(t=Lt(o)+1,r=o.d.length-1,n=r*xt+1,r=o.d[r],r){for(;r%10==0;r/=10)n--;for(r=o.d[0];r>=10;r/=10)n++}return e&&t>n?t:n},Ee.squareRoot=Ee.sqrt=function(){var e,t,n,r,o,a,i,s=this,c=s.constructor;if(s.s<1){if(!s.s)return new c(0);throw Error(Gn+"NaN")}for(e=Lt(s),Et=!1,o=Math.sqrt(+s),o==0||o==1/0?(t=$r(s.d),(t.length+e)%2==0&&(t+="0"),o=Math.sqrt(t),e=Ss((e+1)/2)-(e<0||e%2),o==1/0?t="5e"+e:(t=o.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),r=new c(t)):r=new c(o.toString()),n=c.precision,o=i=n+3;;)if(a=r,r=a.plus(Ao(s,a,i+2)).times(.5),$r(a.d).slice(0,i)===(t=$r(r.d)).slice(0,i)){if(t=t.slice(i-3,i+1),o==i&&t=="4999"){if(ht(a,n+1,0),a.times(a).eq(s)){r=a;break}}else if(t!="9999")break;i+=4}return Et=!0,ht(r,n)},Ee.times=Ee.mul=function(e){var t,n,r,o,a,i,s,c,l,u=this,d=u.constructor,f=u.d,p=(e=new d(e)).d;if(!u.s||!e.s)return new d(0);for(e.s*=u.s,n=u.e+e.e,c=f.length,l=p.length,c<l&&(a=f,f=p,p=a,i=c,c=l,l=i),a=[],i=c+l,r=i;r--;)a.push(0);for(r=l;--r>=0;){for(t=0,o=c+r;o>r;)s=a[o]+p[r]*f[o-r-1]+t,a[o--]=s%Yt|0,t=s/Yt|0;a[o]=(a[o]+t)%Yt|0}for(;!a[--i];)a.pop();return t?++n:a.shift(),e.d=a,e.e=n,Et?ht(e,d.precision):e},Ee.toDecimalPlaces=Ee.todp=function(e,t){var n=this,r=n.constructor;return n=new r(n),e===void 0?n:(Br(e,0,Es),t===void 0?t=r.rounding:Br(t,0,8),ht(n,e+Lt(n)+1,t))},Ee.toExponential=function(e,t){var n,r=this,o=r.constructor;return e===void 0?n=Wa(r,!0):(Br(e,0,Es),t===void 0?t=o.rounding:Br(t,0,8),r=ht(new o(r),e+1,t),n=Wa(r,!0,e+1)),n},Ee.toFixed=function(e,t){var n,r,o=this,a=o.constructor;return e===void 0?Wa(o):(Br(e,0,Es),t===void 0?t=a.rounding:Br(t,0,8),r=ht(new a(o),e+Lt(o)+1,t),n=Wa(r.abs(),!1,e+Lt(r)+1),o.isneg()&&!o.isZero()?"-"+n:n)},Ee.toInteger=Ee.toint=function(){var e=this,t=e.constructor;return ht(new t(e),Lt(e)+1,t.rounding)},Ee.toNumber=function(){return+this},Ee.toPower=Ee.pow=function(e){var t,n,r,o,a,i,s=this,c=s.constructor,l=12,u=+(e=new c(e));if(!e.s)return new c($n);if(s=new c(s),!s.s){if(e.s<1)throw Error(Gn+"Infinity");return s}if(s.eq($n))return s;if(r=c.precision,e.eq($n))return ht(s,r);if(t=e.e,n=e.d.length-1,i=t>=n,a=s.s,i){if((n=u<0?-u:u)<=rB){for(o=new c($n),t=Math.ceil(r/xt+4),Et=!1;n%2&&(o=o.times(s),cB(o.d,t)),n=Ss(n/2),n!==0;)s=s.times(s),cB(s.d,t);return Et=!0,e.s<0?new c($n).div(o):ht(o,r)}}else if(a<0)throw Error(Gn+"NaN");return a=a<0&&e.d[Math.max(t,n)]&1?-1:1,s.s=1,Et=!1,o=e.times(Jl(s,r+l)),Et=!0,o=aB(o),o.s=a,o},Ee.toPrecision=function(e,t){var n,r,o=this,a=o.constructor;return e===void 0?(n=Lt(o),r=Wa(o,n<=a.toExpNeg||n>=a.toExpPos)):(Br(e,1,Es),t===void 0?t=a.rounding:Br(t,0,8),o=ht(new a(o),e,t),n=Lt(o),r=Wa(o,e<=n||n<=a.toExpNeg,e)),r},Ee.toSignificantDigits=Ee.tosd=function(e,t){var n=this,r=n.constructor;return e===void 0?(e=r.precision,t=r.rounding):(Br(e,1,Es),t===void 0?t=r.rounding:Br(t,0,8)),ht(new r(n),e,t)},Ee.toString=Ee.valueOf=Ee.val=Ee.toJSON=Ee[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Lt(e),n=e.constructor;return Wa(e,t<=n.toExpNeg||t>=n.toExpPos)};function oB(e,t){var n,r,o,a,i,s,c,l,u=e.constructor,d=u.precision;if(!e.s||!t.s)return t.s||(t=new u(e)),Et?ht(t,d):t;if(c=e.d,l=t.d,i=e.e,o=t.e,c=c.slice(),a=i-o,a){for(a<0?(r=c,a=-a,s=l.length):(r=l,o=i,s=c.length),i=Math.ceil(d/xt),s=i>s?i+1:s+1,a>s&&(a=s,r.length=1),r.reverse();a--;)r.push(0);r.reverse()}for(s=c.length,a=l.length,s-a<0&&(a=s,r=l,l=c,c=r),n=0;a;)n=(c[--a]=c[a]+l[a]+n)/Yt|0,c[a]%=Yt;for(n&&(c.unshift(n),++o),s=c.length;c[--s]==0;)c.pop();return t.d=c,t.e=o,Et?ht(t,d):t}function Br(e,t,n){if(e!==~~e||e<t||e>n)throw Error(Ua+e)}function $r(e){var t,n,r,o=e.length-1,a="",i=e[0];if(o>0){for(a+=i,t=1;t<o;t++)r=e[t]+"",n=xt-r.length,n&&(a+=aa(n)),a+=r;i=e[t],r=i+"",n=xt-r.length,n&&(a+=aa(n))}else if(i===0)return"0";for(;i%10===0;)i/=10;return a+i}var Ao=function(){function e(r,o){var a,i=0,s=r.length;for(r=r.slice();s--;)a=r[s]*o+i,r[s]=a%Yt|0,i=a/Yt|0;return i&&r.unshift(i),r}function t(r,o,a,i){var s,c;if(a!=i)c=a>i?1:-1;else for(s=c=0;s<a;s++)if(r[s]!=o[s]){c=r[s]>o[s]?1:-1;break}return c}function n(r,o,a){for(var i=0;a--;)r[a]-=i,i=r[a]<o[a]?1:0,r[a]=i*Yt+r[a]-o[a];for(;!r[0]&&r.length>1;)r.shift()}return function(r,o,a,i){var s,c,l,u,d,f,p,y,m,v,b,x,_,w,j,E,S,O,P=r.constructor,M=r.s==o.s?1:-1,k=r.d,R=o.d;if(!r.s)return new P(r);if(!o.s)throw Error(Gn+"Division by zero");for(c=r.e-o.e,S=R.length,j=k.length,p=new P(M),y=p.d=[],l=0;R[l]==(k[l]||0);)++l;if(R[l]>(k[l]||0)&&--c,a==null?x=a=P.precision:i?x=a+(Lt(r)-Lt(o))+1:x=a,x<0)return new P(0);if(x=x/xt+2|0,l=0,S==1)for(u=0,R=R[0],x++;(l<j||u)&&x--;l++)_=u*Yt+(k[l]||0),y[l]=_/R|0,u=_%R|0;else{for(u=Yt/(R[0]+1)|0,u>1&&(R=e(R,u),k=e(k,u),S=R.length,j=k.length),w=S,m=k.slice(0,S),v=m.length;v<S;)m[v++]=0;O=R.slice(),O.unshift(0),E=R[0],R[1]>=Yt/2&&++E;do u=0,s=t(R,m,S,v),s<0?(b=m[0],S!=v&&(b=b*Yt+(m[1]||0)),u=b/E|0,u>1?(u>=Yt&&(u=Yt-1),d=e(R,u),f=d.length,v=m.length,s=t(d,m,f,v),s==1&&(u--,n(d,S<f?O:R,f))):(u==0&&(s=u=1),d=R.slice()),f=d.length,f<v&&d.unshift(0),n(m,d,v),s==-1&&(v=m.length,s=t(R,m,S,v),s<1&&(u++,n(m,S<v?O:R,v))),v=m.length):s===0&&(u++,m=[0]),y[l++]=u,s&&m[0]?m[v++]=k[w]||0:(m=[k[w]],v=1);while((w++<j||m[0]!==void 0)&&x--)}return y[0]||y.shift(),p.e=c,ht(p,i?a+Lt(p)+1:a)}}();function aB(e,t){var n,r,o,a,i,s,c=0,l=0,u=e.constructor,d=u.precision;if(Lt(e)>16)throw Error(M_+Lt(e));if(!e.s)return new u($n);for(t==null?(Et=!1,s=d):s=t,i=new u(.03125);e.abs().gte(.1);)e=e.times(i),l+=5;for(r=Math.log(Ha(2,l))/Math.LN10*2+5|0,s+=r,n=o=a=new u($n),u.precision=s;;){if(o=ht(o.times(e),s),n=n.times(++c),i=a.plus(Ao(o,n,s)),$r(i.d).slice(0,s)===$r(a.d).slice(0,s)){for(;l--;)a=ht(a.times(a),s);return u.precision=d,t==null?(Et=!0,ht(a,d)):a}a=i}}function Lt(e){for(var t=e.e*xt,n=e.d[0];n>=10;n/=10)t++;return t}function N_(e,t,n){if(t>e.LN10.sd())throw Et=!0,n&&(e.precision=n),Error(Gn+"LN10 precision limit exceeded");return ht(new e(e.LN10),t)}function aa(e){for(var t="";e--;)t+="0";return t}function Jl(e,t){var n,r,o,a,i,s,c,l,u,d=1,f=10,p=e,y=p.d,m=p.constructor,v=m.precision;if(p.s<1)throw Error(Gn+(p.s?"NaN":"-Infinity"));if(p.eq($n))return new m(0);if(t==null?(Et=!1,l=v):l=t,p.eq(10))return t==null&&(Et=!0),N_(m,l);if(l+=f,m.precision=l,n=$r(y),r=n.charAt(0),a=Lt(p),Math.abs(a)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)p=p.times(e),n=$r(p.d),r=n.charAt(0),d++;a=Lt(p),r>1?(p=new m("0."+n),a++):p=new m(r+"."+n.slice(1))}else return c=N_(m,l+2,v).times(a+""),p=Jl(new m(r+"."+n.slice(1)),l-f).plus(c),m.precision=v,t==null?(Et=!0,ht(p,v)):p;for(s=i=p=Ao(p.minus($n),p.plus($n),l),u=ht(p.times(p),l),o=3;;){if(i=ht(i.times(u),l),c=s.plus(Ao(i,new m(o),l)),$r(c.d).slice(0,l)===$r(s.d).slice(0,l))return s=s.times(2),a!==0&&(s=s.plus(N_(m,l+2,v).times(a+""))),s=Ao(s,new m(d),l),m.precision=v,t==null?(Et=!0,ht(s,v)):s;s=c,o+=2}}function iB(e,t){var n,r,o;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;t.charCodeAt(r)===48;)++r;for(o=t.length;t.charCodeAt(o-1)===48;)--o;if(t=t.slice(r,o),t){if(o-=r,n=n-r-1,e.e=Ss(n/xt),e.d=[],r=(n+1)%xt,n<0&&(r+=xt),r<o){for(r&&e.d.push(+t.slice(0,r)),o-=xt;r<o;)e.d.push(+t.slice(r,r+=xt));t=t.slice(r),r=xt-t.length}else r-=o;for(;r--;)t+="0";if(e.d.push(+t),Et&&(e.e>Vp||e.e<-Vp))throw Error(M_+n)}else e.s=0,e.e=0,e.d=[0];return e}function ht(e,t,n){var r,o,a,i,s,c,l,u,d=e.d;for(i=1,a=d[0];a>=10;a/=10)i++;if(r=t-i,r<0)r+=xt,o=t,l=d[u=0];else{if(u=Math.ceil((r+1)/xt),a=d.length,u>=a)return e;for(l=a=d[u],i=1;a>=10;a/=10)i++;r%=xt,o=r-xt+i}if(n!==void 0&&(a=Ha(10,i-o-1),s=l/a%10|0,c=t<0||d[u+1]!==void 0||l%a,c=n<4?(s||c)&&(n==0||n==(e.s<0?3:2)):s>5||s==5&&(n==4||c||n==6&&(r>0?o>0?l/Ha(10,i-o):0:d[u-1])%10&1||n==(e.s<0?8:7))),t<1||!d[0])return c?(a=Lt(e),d.length=1,t=t-a-1,d[0]=Ha(10,(xt-t%xt)%xt),e.e=Ss(-t/xt)||0):(d.length=1,d[0]=e.e=e.s=0),e;if(r==0?(d.length=u,a=1,u--):(d.length=u+1,a=Ha(10,xt-r),d[u]=o>0?(l/Ha(10,i-o)%Ha(10,o)|0)*a:0),c)for(;;)if(u==0){(d[0]+=a)==Yt&&(d[0]=1,++e.e);break}else{if(d[u]+=a,d[u]!=Yt)break;d[u--]=0,a=1}for(r=d.length;d[--r]===0;)d.pop();if(Et&&(e.e>Vp||e.e<-Vp))throw Error(M_+Lt(e));return e}function sB(e,t){var n,r,o,a,i,s,c,l,u,d,f=e.constructor,p=f.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new f(e),Et?ht(t,p):t;if(c=e.d,d=t.d,r=t.e,l=e.e,c=c.slice(),i=l-r,i){for(u=i<0,u?(n=c,i=-i,s=d.length):(n=d,r=l,s=c.length),o=Math.max(Math.ceil(p/xt),s)+2,i>o&&(i=o,n.length=1),n.reverse(),o=i;o--;)n.push(0);n.reverse()}else{for(o=c.length,s=d.length,u=o<s,u&&(s=o),o=0;o<s;o++)if(c[o]!=d[o]){u=c[o]<d[o];break}i=0}for(u&&(n=c,c=d,d=n,t.s=-t.s),s=c.length,o=d.length-s;o>0;--o)c[s++]=0;for(o=d.length;o>i;){if(c[--o]<d[o]){for(a=o;a&&c[--a]===0;)c[a]=Yt-1;--c[a],c[o]+=Yt}c[o]-=d[o]}for(;c[--s]===0;)c.pop();for(;c[0]===0;c.shift())--r;return c[0]?(t.d=c,t.e=r,Et?ht(t,p):t):new f(0)}function Wa(e,t,n){var r,o=Lt(e),a=$r(e.d),i=a.length;return t?(n&&(r=n-i)>0?a=a.charAt(0)+"."+a.slice(1)+aa(r):i>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(o<0?"e":"e+")+o):o<0?(a="0."+aa(-o-1)+a,n&&(r=n-i)>0&&(a+=aa(r))):o>=i?(a+=aa(o+1-i),n&&(r=n-o-1)>0&&(a=a+"."+aa(r))):((r=o+1)<i&&(a=a.slice(0,r)+"."+a.slice(r)),n&&(r=n-i)>0&&(o+1===i&&(a+="."),a+=aa(r))),e.s<0?"-"+a:a}function cB(e,t){if(e.length>t)return e.length=t,!0}function lB(e){var t,n,r;function o(a){var i=this;if(!(i instanceof o))return new o(a);if(i.constructor=o,a instanceof o){i.s=a.s,i.e=a.e,i.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(Ua+a);if(a>0)i.s=1;else if(a<0)a=-a,i.s=-1;else{i.s=0,i.e=0,i.d=[0];return}if(a===~~a&&a<1e7){i.e=0,i.d=[a];return}return iB(i,a.toString())}else if(typeof a!="string")throw Error(Ua+a);if(a.charCodeAt(0)===45?(a=a.slice(1),i.s=-1):i.s=1,yfe.test(a))iB(i,a);else throw Error(Ua+a)}if(o.prototype=Ee,o.ROUND_UP=0,o.ROUND_DOWN=1,o.ROUND_CEIL=2,o.ROUND_FLOOR=3,o.ROUND_HALF_UP=4,o.ROUND_HALF_DOWN=5,o.ROUND_HALF_EVEN=6,o.ROUND_HALF_CEIL=7,o.ROUND_HALF_FLOOR=8,o.clone=lB,o.config=o.set=gfe,e===void 0&&(e={}),e)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<r.length;)e.hasOwnProperty(n=r[t++])||(e[n]=this[n]);return o.config(e),o}function gfe(e){if(!e||typeof e!="object")throw Error(Gn+"Object expected");var t,n,r,o=["precision",1,Es,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<o.length;t+=3)if((r=e[n=o[t]])!==void 0)if(Ss(r)===r&&r>=o[t+1]&&r<=o[t+2])this[n]=r;else throw Error(Ua+n+": "+r);if((r=e[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(Ua+n+": "+r);return this}var k_=lB(mfe);$n=new k_(1);const dt=k_;function vfe(e){return _fe(e)||wfe(e)||xfe(e)||bfe()}function bfe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xfe(e,t){if(e){if(typeof e=="string")return P_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return P_(e,t)}}function wfe(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function _fe(e){if(Array.isArray(e))return P_(e)}function P_(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var jfe=function(e){return e},uB={"@@functional/placeholder":!0},dB=function(e){return e===uB},fB=function(e){return function t(){return arguments.length===0||arguments.length===1&&dB(arguments.length<=0?void 0:arguments[0])?t:e.apply(void 0,arguments)}},Efe=function e(t,n){return t===1?n:fB(function(){for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];var i=o.filter(function(s){return s!==uB}).length;return i>=t?n.apply(void 0,o):e(t-i,fB(function(){for(var s=arguments.length,c=new Array(s),l=0;l<s;l++)c[l]=arguments[l];var u=o.map(function(d){return dB(d)?c.shift():d});return n.apply(void 0,vfe(u).concat(c))}))})},Up=function(e){return Efe(e.length,e)},A_=function(e,t){for(var n=[],r=e;r<t;++r)n[r-e]=r;return n},Sfe=Up(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(n){return t[n]}).map(e)}),Cfe=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!t.length)return jfe;var r=t.reverse(),o=r[0],a=r.slice(1);return function(){return a.reduce(function(i,s){return s(i)},o.apply(void 0,arguments))}},T_=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},pB=function(e){var t=null,n=null;return function(){for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return t&&o.every(function(i,s){return i===t[s]})||(t=o,n=e.apply(void 0,o)),n}};function Ofe(e){var t;return e===0?t=1:t=Math.floor(new dt(e).abs().log(10).toNumber())+1,t}function Mfe(e,t,n){for(var r=new dt(e),o=0,a=[];r.lt(t)&&o<1e5;)a.push(r.toNumber()),r=r.add(n),o++;return a}var Nfe=Up(function(e,t,n){var r=+e,o=+t;return r+n*(o-r)}),kfe=Up(function(e,t,n){var r=t-+e;return r=r||1/0,(n-e)/r}),Pfe=Up(function(e,t,n){var r=t-+e;return r=r||1/0,Math.max(0,Math.min(1,(n-e)/r))});const Hp={rangeStep:Mfe,getDigitCount:Ofe,interpolateNumber:Nfe,uninterpolateNumber:kfe,uninterpolateTruncation:Pfe};function R_(e){return Rfe(e)||Tfe(e)||hB(e)||Afe()}function Afe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Tfe(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function Rfe(e){if(Array.isArray(e))return I_(e)}function Gl(e,t){return Lfe(e)||Dfe(e,t)||hB(e,t)||Ife()}function Ife(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hB(e,t){if(e){if(typeof e=="string")return I_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return I_(e,t)}}function I_(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Dfe(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var n=[],r=!0,o=!1,a=void 0;try{for(var i=e[Symbol.iterator](),s;!(r=(s=i.next()).done)&&(n.push(s.value),!(t&&n.length===t));r=!0);}catch(c){o=!0,a=c}finally{try{!r&&i.return!=null&&i.return()}finally{if(o)throw a}}return n}}function Lfe(e){if(Array.isArray(e))return e}function mB(e){var t=Gl(e,2),n=t[0],r=t[1],o=n,a=r;return n>r&&(o=r,a=n),[o,a]}function yB(e,t,n){if(e.lte(0))return new dt(0);var r=Hp.getDigitCount(e.toNumber()),o=new dt(10).pow(r),a=e.div(o),i=r!==1?.05:.1,s=new dt(Math.ceil(a.div(i).toNumber())).add(n).mul(i),c=s.mul(o);return t?c:new dt(Math.ceil(c))}function Ffe(e,t,n){var r=1,o=new dt(e);if(!o.isint()&&n){var a=Math.abs(e);a<1?(r=new dt(10).pow(Hp.getDigitCount(e)-1),o=new dt(Math.floor(o.div(r).toNumber())).mul(r)):a>1&&(o=new dt(Math.floor(e)))}else e===0?o=new dt(Math.floor((t-1)/2)):n||(o=new dt(Math.floor(e)));var i=Math.floor((t-1)/2),s=Cfe(Sfe(function(c){return o.add(new dt(c-i).mul(r)).toNumber()}),A_);return s(0,t)}function gB(e,t,n,r){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(n-1)))return{step:new dt(0),tickMin:new dt(0),tickMax:new dt(0)};var a=yB(new dt(t).sub(e).div(n-1),r,o),i;e<=0&&t>=0?i=new dt(0):(i=new dt(e).add(t).div(2),i=i.sub(new dt(i).mod(a)));var s=Math.ceil(i.sub(e).div(a).toNumber()),c=Math.ceil(new dt(t).sub(i).div(a).toNumber()),l=s+c+1;return l>n?gB(e,t,n,r,o+1):(l<n&&(c=t>0?c+(n-l):c,s=t>0?s:s+(n-l)),{step:a,tickMin:i.sub(new dt(s).mul(a)),tickMax:i.add(new dt(c).mul(a))})}function Bfe(e){var t=Gl(e,2),n=t[0],r=t[1],o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=Math.max(o,2),s=mB([n,r]),c=Gl(s,2),l=c[0],u=c[1];if(l===-1/0||u===1/0){var d=u===1/0?[l].concat(R_(A_(0,o-1).map(function(){return 1/0}))):[].concat(R_(A_(0,o-1).map(function(){return-1/0})),[u]);return n>r?T_(d):d}if(l===u)return Ffe(l,o,a);var f=gB(l,u,i,a),p=f.step,y=f.tickMin,m=f.tickMax,v=Hp.rangeStep(y,m.add(new dt(.1).mul(p)),p);return n>r?T_(v):v}function $fe(e,t){var n=Gl(e,2),r=n[0],o=n[1],a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=mB([r,o]),s=Gl(i,2),c=s[0],l=s[1];if(c===-1/0||l===1/0)return[r,o];if(c===l)return[c];var u=Math.max(t,2),d=yB(new dt(l).sub(c).div(u-1),a,0),f=[].concat(R_(Hp.rangeStep(new dt(c),new dt(l).sub(new dt(.99).mul(d)),d)),[l]);return r>o?T_(f):f}var zfe=pB(Bfe),Vfe=pB($fe),Ufe="Invariant failed";function qa(e,t){throw new Error(Ufe)}var Hfe=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Cs(e){"@babel/helpers - typeof";return Cs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cs(e)}function Wp(){return Wp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Wp.apply(this,arguments)}function Wfe(e,t){return Xfe(e)||Kfe(e,t)||Yfe(e,t)||qfe()}function qfe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Yfe(e,t){if(e){if(typeof e=="string")return vB(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vB(e,t)}}function vB(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Kfe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,o,a,i,s=[],c=!0,l=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(c=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(u){l=!0,o=u}finally{try{if(!c&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return s}}function Xfe(e){if(Array.isArray(e))return e}function Qfe(e,t){if(e==null)return{};var n=Jfe(e,t),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Jfe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Gfe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Zfe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,wB(r.key),r)}}function epe(e,t,n){return t&&Zfe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function tpe(e,t,n){return t=qp(t),npe(e,bB()?Reflect.construct(t,n||[],qp(e).constructor):t.apply(e,n))}function npe(e,t){if(t&&(Cs(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return rpe(e)}function rpe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(bB=function(){return!!e})()}function qp(e){return qp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},qp(e)}function ope(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&D_(e,t)}function D_(e,t){return D_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},D_(e,t)}function xB(e,t,n){return t=wB(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wB(e){var t=ape(e,"string");return Cs(t)=="symbol"?t:t+""}function ape(e,t){if(Cs(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Cs(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Yp=function(e){function t(){return Gfe(this,t),tpe(this,t,arguments)}return ope(t,e),epe(t,[{key:"render",value:function(){var n=this.props,r=n.offset,o=n.layout,a=n.width,i=n.dataKey,s=n.data,c=n.dataPointFormatter,l=n.xAxis,u=n.yAxis,d=Qfe(n,Hfe),f=rt(d,!1);this.props.direction==="x"&&l.type!=="number"&&qa();var p=s.map(function(y){var m=c(y,i),v=m.x,b=m.y,x=m.value,_=m.errorVal;if(!_)return null;var w=[],j,E;if(Array.isArray(_)){var S=Wfe(_,2);j=S[0],E=S[1]}else j=E=_;if(o==="vertical"){var O=l.scale,P=b+r,M=P+a,k=P-a,R=O(x-j),A=O(x+E);w.push({x1:A,y1:M,x2:A,y2:k}),w.push({x1:R,y1:P,x2:A,y2:P}),w.push({x1:R,y1:M,x2:R,y2:k})}else if(o==="horizontal"){var C=u.scale,N=v+r,T=N-a,I=N+a,L=C(x-j),D=C(x+E);w.push({x1:T,y1:D,x2:I,y2:D}),w.push({x1:N,y1:L,x2:N,y2:D}),w.push({x1:T,y1:L,x2:I,y2:L})}return U.createElement(Wt,Wp({className:"recharts-errorBar",key:"bar-".concat(w.map(function(B){return"".concat(B.x1,"-").concat(B.x2,"-").concat(B.y1,"-").concat(B.y2)}))},f),w.map(function(B){return U.createElement("line",Wp({},B,{key:"line-".concat(B.x1,"-").concat(B.x2,"-").concat(B.y1,"-").concat(B.y2)}))}))});return U.createElement(Wt,{className:"recharts-errorBars"},p)}}])}(U.Component);xB(Yp,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"}),xB(Yp,"displayName","ErrorBar");function Zl(e){"@babel/helpers - typeof";return Zl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zl(e)}function _B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Ya(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?_B(Object(n),!0).forEach(function(r){ipe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_B(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ipe(e,t,n){return t=spe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function spe(e){var t=cpe(e,"string");return Zl(t)=="symbol"?t:t+""}function cpe(e,t){if(Zl(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Zl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var jB=function(e){var t=e.children,n=e.formattedGraphicalItems,r=e.legendWidth,o=e.legendContent,a=Bn(t,ms);if(!a)return null;var i=ms.defaultProps,s=i!==void 0?Ya(Ya({},i),a.props):{},c;return a.props&&a.props.payload?c=a.props&&a.props.payload:o==="children"?c=(n||[]).reduce(function(l,u){var d=u.item,f=u.props,p=f.sectors||f.data||[];return l.concat(p.map(function(y){return{type:a.props.iconType||d.props.legendType,value:y.name,color:y.fill,payload:y}}))},[]):c=(n||[]).map(function(l){var u=l.item,d=u.type.defaultProps,f=d!==void 0?Ya(Ya({},d),u.props):{},p=f.dataKey,y=f.name,m=f.legendType,v=f.hide;return{inactive:v,dataKey:p,type:s.iconType||m||"square",color:F_(u),value:y||p,payload:f}}),Ya(Ya(Ya({},s),ms.getWithHeight(a,r)),{},{payload:c,item:a})};function eu(e){"@babel/helpers - typeof";return eu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},eu(e)}function EB(e){return fpe(e)||dpe(e)||upe(e)||lpe()}function lpe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function upe(e,t){if(e){if(typeof e=="string")return L_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return L_(e,t)}}function dpe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function fpe(e){if(Array.isArray(e))return L_(e)}function L_(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function SB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function kt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?SB(Object(n),!0).forEach(function(r){Os(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Os(e,t,n){return t=ppe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ppe(e){var t=hpe(e,"string");return eu(t)=="symbol"?t:t+""}function hpe(e,t){if(eu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(eu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function zr(e,t,n){return at(e)||at(t)?n:$t(t)?qn(e,t,n):We(t)?t(e):n}function Kp(e,t,n,r){var o=ffe(e,function(s){return zr(s,t)});if(n==="number"){var a=o.filter(function(s){return me(s)||parseFloat(s)});return a.length?[zp(a),$p(a)]:[1/0,-1/0]}var i=r?o.filter(function(s){return!at(s)}):o;return i.map(function(s){return $t(s)||s instanceof Date?s:""})}var mpe=function(e){var t,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,a=-1,i=(t=n==null?void 0:n.length)!==null&&t!==void 0?t:0;if(i<=1)return 0;if(o&&o.axisType==="angleAxis"&&Math.abs(Math.abs(o.range[1]-o.range[0])-360)<=1e-6)for(var s=o.range,c=0;c<i;c++){var l=c>0?r[c-1].coordinate:r[i-1].coordinate,u=r[c].coordinate,d=c>=i-1?r[0].coordinate:r[c+1].coordinate,f=void 0;if(gr(u-l)!==gr(d-u)){var p=[];if(gr(d-u)===gr(s[1]-s[0])){f=d;var y=u+s[1]-s[0];p[0]=Math.min(y,(y+l)/2),p[1]=Math.max(y,(y+l)/2)}else{f=l;var m=d+s[1]-s[0];p[0]=Math.min(u,(m+u)/2),p[1]=Math.max(u,(m+u)/2)}var v=[Math.min(u,(f+u)/2),Math.max(u,(f+u)/2)];if(e>v[0]&&e<=v[1]||e>=p[0]&&e<=p[1]){a=r[c].index;break}}else{var b=Math.min(l,d),x=Math.max(l,d);if(e>(b+u)/2&&e<=(x+u)/2){a=r[c].index;break}}}else for(var _=0;_<i;_++)if(_===0&&e<=(n[_].coordinate+n[_+1].coordinate)/2||_>0&&_<i-1&&e>(n[_].coordinate+n[_-1].coordinate)/2&&e<=(n[_].coordinate+n[_+1].coordinate)/2||_===i-1&&e>(n[_].coordinate+n[_-1].coordinate)/2){a=n[_].index;break}return a},F_=function(e){var t,n=e,r=n.type.displayName,o=(t=e.type)!==null&&t!==void 0&&t.defaultProps?kt(kt({},e.type.defaultProps),e.props):e.props,a=o.stroke,i=o.fill,s;switch(r){case"Line":s=a;break;case"Area":case"Radar":s=a&&a!=="none"?a:i;break;default:s=i;break}return s},ype=function(e){var t=e.barSize,n=e.totalSize,r=e.stackGroups,o=r===void 0?{}:r;if(!o)return{};for(var a={},i=Object.keys(o),s=0,c=i.length;s<c;s++)for(var l=o[i[s]].stackGroups,u=Object.keys(l),d=0,f=u.length;d<f;d++){var p=l[u[d]],y=p.items,m=p.cateAxisId,v=y.filter(function(E){return jo(E.type).indexOf("Bar")>=0});if(v&&v.length){var b=v[0].type.defaultProps,x=b!==void 0?kt(kt({},b),v[0].props):v[0].props,_=x.barSize,w=x[m];a[w]||(a[w]=[]);var j=at(_)?t:_;a[w].push({item:v[0],stackList:v.slice(1),barSize:at(j)?void 0:Fa(j,n,0)})}}return a},gpe=function(e){var t=e.barGap,n=e.barCategoryGap,r=e.bandSize,o=e.sizeList,a=o===void 0?[]:o,i=e.maxBarSize,s=a.length;if(s<1)return null;var c=Fa(t,r,0,!0),l,u=[];if(a[0].barSize===+a[0].barSize){var d=!1,f=r/s,p=a.reduce(function(_,w){return _+w.barSize||0},0);p+=(s-1)*c,p>=r&&(p-=(s-1)*c,c=0),p>=r&&f>0&&(d=!0,f*=.9,p=s*f);var y=(r-p)/2>>0,m={offset:y-c,size:0};l=a.reduce(function(_,w){var j={item:w.item,position:{offset:m.offset+m.size+c,size:d?f:w.barSize}},E=[].concat(EB(_),[j]);return m=E[E.length-1].position,w.stackList&&w.stackList.length&&w.stackList.forEach(function(S){E.push({item:S,position:m})}),E},u)}else{var v=Fa(n,r,0,!0);r-2*v-(s-1)*c<=0&&(c=0);var b=(r-2*v-(s-1)*c)/s;b>1&&(b>>=0);var x=i===+i?Math.min(b,i):b;l=a.reduce(function(_,w,j){var E=[].concat(EB(_),[{item:w.item,position:{offset:v+(b+c)*j+(b-x)/2,size:x}}]);return w.stackList&&w.stackList.length&&w.stackList.forEach(function(S){E.push({item:S,position:E[E.length-1].position})}),E},u)}return l},vpe=function(e,t,n,r){var o=n.children,a=n.width,i=n.margin,s=a-(i.left||0)-(i.right||0),c=jB({children:o,legendWidth:s});if(c){var l=r||{},u=l.width,d=l.height,f=c.align,p=c.verticalAlign,y=c.layout;if((y==="vertical"||y==="horizontal"&&p==="middle")&&f!=="center"&&me(e[f]))return kt(kt({},e),{},Os({},f,e[f]+(u||0)));if((y==="horizontal"||y==="vertical"&&f==="center")&&p!=="middle"&&me(e[p]))return kt(kt({},e),{},Os({},p,e[p]+(d||0)))}return e},bpe=function(e,t,n){return at(t)?!0:e==="horizontal"?t==="yAxis":e==="vertical"||n==="x"?t==="xAxis":n==="y"?t==="yAxis":!0},CB=function(e,t,n,r,o){var a=t.props.children,i=vr(a,Yp).filter(function(c){return bpe(r,o,c.props.direction)});if(i&&i.length){var s=i.map(function(c){return c.props.dataKey});return e.reduce(function(c,l){var u=zr(l,n);if(at(u))return c;var d=Array.isArray(u)?[zp(u),$p(u)]:[u,u],f=s.reduce(function(p,y){var m=zr(l,y,0),v=d[0]-Math.abs(Array.isArray(m)?m[0]:m),b=d[1]+Math.abs(Array.isArray(m)?m[1]:m);return[Math.min(v,p[0]),Math.max(b,p[1])]},[1/0,-1/0]);return[Math.min(f[0],c[0]),Math.max(f[1],c[1])]},[1/0,-1/0])}return null},xpe=function(e,t,n,r,o){var a=t.map(function(i){return CB(e,i,n,o,r)}).filter(function(i){return!at(i)});return a&&a.length?a.reduce(function(i,s){return[Math.min(i[0],s[0]),Math.max(i[1],s[1])]},[1/0,-1/0]):null},OB=function(e,t,n,r,o){var a=t.map(function(s){var c=s.props.dataKey;return n==="number"&&c&&CB(e,s,c,r)||Kp(e,c,n,o)});if(n==="number")return a.reduce(function(s,c){return[Math.min(s[0],c[0]),Math.max(s[1],c[1])]},[1/0,-1/0]);var i={};return a.reduce(function(s,c){for(var l=0,u=c.length;l<u;l++)i[c[l]]||(i[c[l]]=!0,s.push(c[l]));return s},[])},MB=function(e,t){return e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis"},NB=function(e,t,n,r){if(r)return e.map(function(s){return s.coordinate});var o,a,i=e.map(function(s){return s.coordinate===t&&(o=!0),s.coordinate===n&&(a=!0),s.coordinate});return o||i.push(t),a||i.push(n),i},To=function(e,t,n){if(!e)return null;var r=e.scale,o=e.duplicateDomain,a=e.type,i=e.range,s=e.realScaleType==="scaleBand"?r.bandwidth()/2:2,c=(t||n)&&a==="category"&&r.bandwidth?r.bandwidth()/s:0;if(c=e.axisType==="angleAxis"&&(i==null?void 0:i.length)>=2?gr(i[0]-i[1])*2*c:c,t&&(e.ticks||e.niceTicks)){var l=(e.ticks||e.niceTicks).map(function(u){var d=o?o.indexOf(u):u;return{coordinate:r(d)+c,value:u,offset:c}});return l.filter(function(u){return!Pl(u.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(u,d){return{coordinate:r(u)+c,value:u,index:d,offset:c}}):r.ticks&&!n?r.ticks(e.tickCount).map(function(u){return{coordinate:r(u)+c,value:u,offset:c}}):r.domain().map(function(u,d){return{coordinate:r(u)+c,value:o?o[u]:u,index:d,offset:c}})},B_=new WeakMap,Xp=function(e,t){if(typeof t!="function")return e;B_.has(e)||B_.set(e,new WeakMap);var n=B_.get(e);if(n.has(t))return n.get(t);var r=function(){e.apply(void 0,arguments),t.apply(void 0,arguments)};return n.set(t,r),r},wpe=function(e,t,n){var r=e.scale,o=e.type,a=e.layout,i=e.axisType;if(r==="auto")return a==="radial"&&i==="radiusAxis"?{scale:Ul(),realScaleType:"band"}:a==="radial"&&i==="angleAxis"?{scale:Pp(),realScaleType:"linear"}:o==="category"&&t&&(t.indexOf("LineChart")>=0||t.indexOf("AreaChart")>=0||t.indexOf("ComposedChart")>=0&&!n)?{scale:Hl(),realScaleType:"point"}:o==="category"?{scale:Ul(),realScaleType:"band"}:{scale:Pp(),realScaleType:"linear"};if(kl(r)){var s="scale".concat(ip(r));return{scale:(YF[s]||Hl)(),realScaleType:YF[s]?s:"point"}}return We(r)?{scale:r}:{scale:Hl(),realScaleType:"point"}},kB=1e-4,_pe=function(e){var t=e.domain();if(!(!t||t.length<=2)){var n=t.length,r=e.range(),o=Math.min(r[0],r[1])-kB,a=Math.max(r[0],r[1])+kB,i=e(t[0]),s=e(t[n-1]);(i<o||i>a||s<o||s>a)&&e.domain([t[0],t[n-1]])}},jpe=function(e,t){if(!e)return null;for(var n=0,r=e.length;n<r;n++)if(e[n].item===t)return e[n].position;return null},Epe=function(e,t){if(!t||t.length!==2||!me(t[0])||!me(t[1]))return e;var n=Math.min(t[0],t[1]),r=Math.max(t[0],t[1]),o=[e[0],e[1]];return(!me(e[0])||e[0]<n)&&(o[0]=n),(!me(e[1])||e[1]>r)&&(o[1]=r),o[0]>r&&(o[0]=r),o[1]<n&&(o[1]=n),o},Spe=function(e){var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var o=0,a=0,i=0;i<t;++i){var s=Pl(e[i][n][1])?e[i][n][0]:e[i][n][1];s>=0?(e[i][n][0]=o,e[i][n][1]=o+s,o=e[i][n][1]):(e[i][n][0]=a,e[i][n][1]=a+s,a=e[i][n][1])}},Cpe=function(e){var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var o=0,a=0;a<t;++a){var i=Pl(e[a][n][1])?e[a][n][0]:e[a][n][1];i>=0?(e[a][n][0]=o,e[a][n][1]=o+i,o=e[a][n][1]):(e[a][n][0]=0,e[a][n][1]=0)}},Ope={sign:Spe,expand:Cse,none:fs,silhouette:Ose,wiggle:Mse,positive:Cpe},Mpe=function(e,t,n){var r=t.map(function(i){return i.props.dataKey}),o=Ope[n],a=Sse().keys(r).value(function(i,s){return+zr(i,s,0)}).order(Uw).offset(o);return a(e)},Npe=function(e,t,n,r,o,a){if(!e)return null;var i=a?t.reverse():t,s={},c=i.reduce(function(u,d){var f,p=(f=d.type)!==null&&f!==void 0&&f.defaultProps?kt(kt({},d.type.defaultProps),d.props):d.props,y=p.stackId,m=p.hide;if(m)return u;var v=p[n],b=u[v]||{hasStack:!1,stackGroups:{}};if($t(y)){var x=b.stackGroups[y]||{numericAxisId:n,cateAxisId:r,items:[]};x.items.push(d),b.hasStack=!0,b.stackGroups[y]=x}else b.stackGroups[rp("_stackId_")]={numericAxisId:n,cateAxisId:r,items:[d]};return kt(kt({},u),{},Os({},v,b))},s),l={};return Object.keys(c).reduce(function(u,d){var f=c[d];if(f.hasStack){var p={};f.stackGroups=Object.keys(f.stackGroups).reduce(function(y,m){var v=f.stackGroups[m];return kt(kt({},y),{},Os({},m,{numericAxisId:n,cateAxisId:r,items:v.items,stackedData:Mpe(e,v.items,o)}))},p)}return kt(kt({},u),{},Os({},d,f))},l)},kpe=function(e,t){var n=t.realScaleType,r=t.type,o=t.tickCount,a=t.originalDomain,i=t.allowDecimals,s=n||t.scale;if(s!=="auto"&&s!=="linear")return null;if(o&&r==="number"&&a&&(a[0]==="auto"||a[1]==="auto")){var c=e.domain();if(!c.length)return null;var l=zfe(c,o,i);return e.domain([zp(l),$p(l)]),{niceTicks:l}}if(o&&r==="number"){var u=e.domain(),d=Vfe(u,o,i);return{niceTicks:d}}return null},PB=function(e){var t=e.axis,n=e.ticks,r=e.offset,o=e.bandSize,a=e.entry,i=e.index;if(t.type==="category")return n[i]?n[i].coordinate+r:null;var s=zr(a,t.dataKey,t.domain[i]);return at(s)?null:t.scale(s)-o/2+r},Ppe=function(e){var t=e.numericAxis,n=t.scale.domain();if(t.type==="number"){var r=Math.min(n[0],n[1]),o=Math.max(n[0],n[1]);return r<=0&&o>=0?0:o<0?o:r}return n[0]},Ape=function(e,t){var n,r=(n=e.type)!==null&&n!==void 0&&n.defaultProps?kt(kt({},e.type.defaultProps),e.props):e.props,o=r.stackId;if($t(o)){var a=t[o];if(a){var i=a.items.indexOf(e);return i>=0?a.stackedData[i]:null}}return null},Tpe=function(e){return e.reduce(function(t,n){return[zp(n.concat([t[0]]).filter(me)),$p(n.concat([t[1]]).filter(me))]},[1/0,-1/0])},AB=function(e,t,n){return Object.keys(e).reduce(function(r,o){var a=e[o],i=a.stackedData,s=i.reduce(function(c,l){var u=Tpe(l.slice(t,n+1));return[Math.min(c[0],u[0]),Math.max(c[1],u[1])]},[1/0,-1/0]);return[Math.min(s[0],r[0]),Math.max(s[1],r[1])]},[1/0,-1/0]).map(function(r){return r===1/0||r===-1/0?0:r})},TB=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,RB=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,$_=function(e,t,n){if(We(e))return e(t,n);if(!Array.isArray(e))return t;var r=[];if(me(e[0]))r[0]=n?e[0]:Math.min(e[0],t[0]);else if(TB.test(e[0])){var o=+TB.exec(e[0])[1];r[0]=t[0]-o}else We(e[0])?r[0]=e[0](t[0]):r[0]=t[0];if(me(e[1]))r[1]=n?e[1]:Math.max(e[1],t[1]);else if(RB.test(e[1])){var a=+RB.exec(e[1])[1];r[1]=t[1]+a}else We(e[1])?r[1]=e[1](t[1]):r[1]=t[1];return r},Qp=function(e,t,n){if(e&&e.scale&&e.scale.bandwidth){var r=e.scale.bandwidth();if(!n||r>0)return r}if(e&&t&&t.length>=2){for(var o=M1(t,function(u){return u.coordinate}),a=1/0,i=1,s=o.length;i<s;i++){var c=o[i],l=o[i-1];a=Math.min((c.coordinate||0)-(l.coordinate||0),a)}return a===1/0?0:a}return n?void 0:0},IB=function(e,t,n){return!e||!e.length||O_(e,qn(n,"type.defaultProps.domain"))?t:e},DB=function(e,t){var n=e.type.defaultProps?kt(kt({},e.type.defaultProps),e.props):e.props,r=n.dataKey,o=n.name,a=n.unit,i=n.formatter,s=n.tooltipType,c=n.chartType,l=n.hide;return kt(kt({},rt(e,!1)),{},{dataKey:r,unit:a,formatter:i,name:o||r,color:F_(e),value:zr(t,r),type:s,payload:t,chartType:c,hide:l})};function tu(e){"@babel/helpers - typeof";return tu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tu(e)}function LB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function FB(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?LB(Object(n),!0).forEach(function(r){Rpe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):LB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Rpe(e,t,n){return t=Ipe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ipe(e){var t=Dpe(e,"string");return tu(t)=="symbol"?t:t+""}function Dpe(e,t){if(tu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(tu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Jp=Math.PI/180,Lpe=function(e){return e*180/Math.PI},Jt=function(e,t,n,r){return{x:e+Math.cos(-Jp*r)*n,y:t+Math.sin(-Jp*r)*n}},Fpe=function(e,t){var n=e.x,r=e.y,o=t.x,a=t.y;return Math.sqrt(Math.pow(n-o,2)+Math.pow(r-a,2))},Bpe=function(e,t){var n=e.x,r=e.y,o=t.cx,a=t.cy,i=Fpe({x:n,y:r},{x:o,y:a});if(i<=0)return{radius:i};var s=(n-o)/i,c=Math.acos(s);return r>a&&(c=2*Math.PI-c),{radius:i,angle:Lpe(c),angleInRadian:c}},$pe=function(e){var t=e.startAngle,n=e.endAngle,r=Math.floor(t/360),o=Math.floor(n/360),a=Math.min(r,o);return{startAngle:t-a*360,endAngle:n-a*360}},zpe=function(e,t){var n=t.startAngle,r=t.endAngle,o=Math.floor(n/360),a=Math.floor(r/360),i=Math.min(o,a);return e+i*360},BB=function(e,t){var n=e.x,r=e.y,o=Bpe({x:n,y:r},t),a=o.radius,i=o.angle,s=t.innerRadius,c=t.outerRadius;if(a<s||a>c)return!1;if(a===0)return!0;var l=$pe(t),u=l.startAngle,d=l.endAngle,f=i,p;if(u<=d){for(;f>d;)f-=360;for(;f<u;)f+=360;p=f>=u&&f<=d}else{for(;f>u;)f-=360;for(;f<d;)f+=360;p=f>=d&&f<=u}return p?FB(FB({},t),{},{radius:a,angle:zpe(f,t)}):null};function nu(e){"@babel/helpers - typeof";return nu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nu(e)}var Vpe=["offset"];function Upe(e){return Ype(e)||qpe(e)||Wpe(e)||Hpe()}function Hpe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Wpe(e,t){if(e){if(typeof e=="string")return z_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return z_(e,t)}}function qpe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Ype(e){if(Array.isArray(e))return z_(e)}function z_(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Kpe(e,t){if(e==null)return{};var n=Xpe(e,t),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Xpe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function $B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Vt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?$B(Object(n),!0).forEach(function(r){Qpe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$B(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Qpe(e,t,n){return t=Jpe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Jpe(e){var t=Gpe(e,"string");return nu(t)=="symbol"?t:t+""}function Gpe(e,t){if(nu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(nu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ru(){return ru=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ru.apply(this,arguments)}var Zpe=function(e){var t=e.value,n=e.formatter,r=at(e.children)?t:e.children;return We(n)?n(r):r},ehe=function(e,t){var n=gr(t-e),r=Math.min(Math.abs(t-e),360);return n*r},the=function(e,t,n){var r=e.position,o=e.viewBox,a=e.offset,i=e.className,s=o,c=s.cx,l=s.cy,u=s.innerRadius,d=s.outerRadius,f=s.startAngle,p=s.endAngle,y=s.clockWise,m=(u+d)/2,v=ehe(f,p),b=v>=0?1:-1,x,_;r==="insideStart"?(x=f+b*a,_=y):r==="insideEnd"?(x=p-b*a,_=!y):r==="end"&&(x=p+b*a,_=y),_=v<=0?_:!_;var w=Jt(c,l,m,x),j=Jt(c,l,m,x+(_?1:-1)*359),E="M".concat(w.x,",").concat(w.y,`
    A`).concat(m,",").concat(m,",0,1,").concat(_?0:1,`,
    `).concat(j.x,",").concat(j.y),S=at(e.id)?rp("recharts-radial-line-"):e.id;return U.createElement("text",ru({},n,{dominantBaseline:"central",className:lt("recharts-radial-bar-label",i)}),U.createElement("defs",null,U.createElement("path",{id:S,d:E})),U.createElement("textPath",{xlinkHref:"#".concat(S)},t))},nhe=function(e){var t=e.viewBox,n=e.offset,r=e.position,o=t,a=o.cx,i=o.cy,s=o.innerRadius,c=o.outerRadius,l=o.startAngle,u=o.endAngle,d=(l+u)/2;if(r==="outside"){var f=Jt(a,i,c+n,d),p=f.x,y=f.y;return{x:p,y,textAnchor:p>=a?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:a,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:a,y:i,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:a,y:i,textAnchor:"middle",verticalAnchor:"end"};var m=(s+c)/2,v=Jt(a,i,m,d),b=v.x,x=v.y;return{x:b,y:x,textAnchor:"middle",verticalAnchor:"middle"}},rhe=function(e){var t=e.viewBox,n=e.parentViewBox,r=e.offset,o=e.position,a=t,i=a.x,s=a.y,c=a.width,l=a.height,u=l>=0?1:-1,d=u*r,f=u>0?"end":"start",p=u>0?"start":"end",y=c>=0?1:-1,m=y*r,v=y>0?"end":"start",b=y>0?"start":"end";if(o==="top"){var x={x:i+c/2,y:s-u*r,textAnchor:"middle",verticalAnchor:f};return Vt(Vt({},x),n?{height:Math.max(s-n.y,0),width:c}:{})}if(o==="bottom"){var _={x:i+c/2,y:s+l+d,textAnchor:"middle",verticalAnchor:p};return Vt(Vt({},_),n?{height:Math.max(n.y+n.height-(s+l),0),width:c}:{})}if(o==="left"){var w={x:i-m,y:s+l/2,textAnchor:v,verticalAnchor:"middle"};return Vt(Vt({},w),n?{width:Math.max(w.x-n.x,0),height:l}:{})}if(o==="right"){var j={x:i+c+m,y:s+l/2,textAnchor:b,verticalAnchor:"middle"};return Vt(Vt({},j),n?{width:Math.max(n.x+n.width-j.x,0),height:l}:{})}var E=n?{width:c,height:l}:{};return o==="insideLeft"?Vt({x:i+m,y:s+l/2,textAnchor:b,verticalAnchor:"middle"},E):o==="insideRight"?Vt({x:i+c-m,y:s+l/2,textAnchor:v,verticalAnchor:"middle"},E):o==="insideTop"?Vt({x:i+c/2,y:s+d,textAnchor:"middle",verticalAnchor:p},E):o==="insideBottom"?Vt({x:i+c/2,y:s+l-d,textAnchor:"middle",verticalAnchor:f},E):o==="insideTopLeft"?Vt({x:i+m,y:s+d,textAnchor:b,verticalAnchor:p},E):o==="insideTopRight"?Vt({x:i+c-m,y:s+d,textAnchor:v,verticalAnchor:p},E):o==="insideBottomLeft"?Vt({x:i+m,y:s+l-d,textAnchor:b,verticalAnchor:f},E):o==="insideBottomRight"?Vt({x:i+c-m,y:s+l-d,textAnchor:v,verticalAnchor:f},E):ls(o)&&(me(o.x)||La(o.x))&&(me(o.y)||La(o.y))?Vt({x:i+Fa(o.x,c),y:s+Fa(o.y,l),textAnchor:"end",verticalAnchor:"end"},E):Vt({x:i+c/2,y:s+l/2,textAnchor:"middle",verticalAnchor:"middle"},E)},ohe=function(e){return"cx"in e&&me(e.cx)};function nn(e){var t=e.offset,n=t===void 0?5:t,r=Kpe(e,Vpe),o=Vt({offset:n},r),a=o.viewBox,i=o.position,s=o.value,c=o.children,l=o.content,u=o.className,d=u===void 0?"":u,f=o.textBreakAll;if(!a||at(s)&&at(c)&&!g.isValidElement(l)&&!We(l))return null;if(g.isValidElement(l))return g.cloneElement(l,o);var p;if(We(l)){if(p=g.createElement(l,o),g.isValidElement(p))return p}else p=Zpe(o);var y=ohe(a),m=rt(o,!0);if(y&&(i==="insideStart"||i==="insideEnd"||i==="end"))return the(o,p,m);var v=y?nhe(o):rhe(o);return U.createElement(Sp,ru({className:lt("recharts-label",d)},m,v,{breakAll:f}),p)}nn.displayName="Label";var zB=function(e){var t=e.cx,n=e.cy,r=e.angle,o=e.startAngle,a=e.endAngle,i=e.r,s=e.radius,c=e.innerRadius,l=e.outerRadius,u=e.x,d=e.y,f=e.top,p=e.left,y=e.width,m=e.height,v=e.clockWise,b=e.labelViewBox;if(b)return b;if(me(y)&&me(m)){if(me(u)&&me(d))return{x:u,y:d,width:y,height:m};if(me(f)&&me(p))return{x:f,y:p,width:y,height:m}}return me(u)&&me(d)?{x:u,y:d,width:0,height:0}:me(t)&&me(n)?{cx:t,cy:n,startAngle:o||r||0,endAngle:a||r||0,innerRadius:c||0,outerRadius:l||s||i||0,clockWise:v}:e.viewBox?e.viewBox:{}},ahe=function(e,t){return e?e===!0?U.createElement(nn,{key:"label-implicit",viewBox:t}):$t(e)?U.createElement(nn,{key:"label-implicit",viewBox:t,value:e}):g.isValidElement(e)?e.type===nn?g.cloneElement(e,{key:"label-implicit",viewBox:t}):U.createElement(nn,{key:"label-implicit",content:e,viewBox:t}):We(e)?U.createElement(nn,{key:"label-implicit",content:e,viewBox:t}):ls(e)?U.createElement(nn,ru({viewBox:t},e,{key:"label-implicit"})):null:null},ihe=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var r=e.children,o=zB(e),a=vr(r,nn).map(function(s,c){return g.cloneElement(s,{viewBox:t||o,key:"label-".concat(c)})});if(!n)return a;var i=ahe(e.label,t||o);return[i].concat(Upe(a))};nn.parseViewBox=zB,nn.renderCallByParent=ihe;var V_,VB;vS=function(){if(VB)return V_;VB=1;function e(t){var n=t==null?0:t.length;return n?t[n-1]:void 0}return V_=e,V_};var she=vS();PE=Xe(she);function ou(e){"@babel/helpers - typeof";return ou=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ou(e)}var che=["valueAccessor"],lhe=["data","dataKey","clockWise","id","textBreakAll"];function uhe(e){return hhe(e)||phe(e)||fhe(e)||dhe()}function dhe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fhe(e,t){if(e){if(typeof e=="string")return U_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return U_(e,t)}}function phe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function hhe(e){if(Array.isArray(e))return U_(e)}function U_(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Gp(){return Gp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Gp.apply(this,arguments)}function UB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function HB(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?UB(Object(n),!0).forEach(function(r){mhe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):UB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function mhe(e,t,n){return t=yhe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yhe(e){var t=ghe(e,"string");return ou(t)=="symbol"?t:t+""}function ghe(e,t){if(ou(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(ou(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function WB(e,t){if(e==null)return{};var n=vhe(e,t),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function vhe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var bhe=function(e){return Array.isArray(e.value)?PE(e.value):e.value};function Ka(e){var t=e.valueAccessor,n=t===void 0?bhe:t,r=WB(e,che),o=r.data,a=r.dataKey,i=r.clockWise,s=r.id,c=r.textBreakAll,l=WB(r,lhe);return!o||!o.length?null:U.createElement(Wt,{className:"recharts-label-list"},o.map(function(u,d){var f=at(a)?n(u,d):zr(u&&u.payload,a),p=at(s)?{}:{id:"".concat(s,"-").concat(d)};return U.createElement(nn,Gp({},rt(u,!0),l,p,{parentViewBox:u.parentViewBox,value:f,textBreakAll:c,viewBox:nn.parseViewBox(at(i)?u:HB(HB({},u),{},{clockWise:i})),key:"label-".concat(d),index:d}))}))}Ka.displayName="LabelList";function xhe(e,t){return e?e===!0?U.createElement(Ka,{key:"labelList-implicit",data:t}):U.isValidElement(e)||We(e)?U.createElement(Ka,{key:"labelList-implicit",data:t,content:e}):ls(e)?U.createElement(Ka,Gp({data:t},e,{key:"labelList-implicit"})):null:null}function whe(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var r=e.children,o=vr(r,Ka).map(function(i,s){return g.cloneElement(i,{data:t,key:"labelList-".concat(s)})});if(!n)return o;var a=xhe(e.label,t);return[a].concat(uhe(o))}Ka.renderCallByParent=whe;function au(e){"@babel/helpers - typeof";return au=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},au(e)}function H_(){return H_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},H_.apply(this,arguments)}function qB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function YB(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?qB(Object(n),!0).forEach(function(r){_he(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function _he(e,t,n){return t=jhe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jhe(e){var t=Ehe(e,"string");return au(t)=="symbol"?t:t+""}function Ehe(e,t){if(au(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(au(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var She=function(e,t){var n=gr(t-e),r=Math.min(Math.abs(t-e),359.999);return n*r},Zp=function(e){var t=e.cx,n=e.cy,r=e.radius,o=e.angle,a=e.sign,i=e.isExternal,s=e.cornerRadius,c=e.cornerIsExternal,l=s*(i?1:-1)+r,u=Math.asin(s/l)/Jp,d=c?o:o+a*u,f=Jt(t,n,l,d),p=Jt(t,n,r,d),y=c?o-a*u:o,m=Jt(t,n,l*Math.cos(u*Jp),y);return{center:f,circleTangency:p,lineTangency:m,theta:u}},KB=function(e){var t=e.cx,n=e.cy,r=e.innerRadius,o=e.outerRadius,a=e.startAngle,i=e.endAngle,s=She(a,i),c=a+s,l=Jt(t,n,o,a),u=Jt(t,n,o,c),d="M ".concat(l.x,",").concat(l.y,`
    A `).concat(o,",").concat(o,`,0,
    `).concat(+(Math.abs(s)>180),",").concat(+(a>c),`,
    `).concat(u.x,",").concat(u.y,`
  `);if(r>0){var f=Jt(t,n,r,a),p=Jt(t,n,r,c);d+="L ".concat(p.x,",").concat(p.y,`
            A `).concat(r,",").concat(r,`,0,
            `).concat(+(Math.abs(s)>180),",").concat(+(a<=c),`,
            `).concat(f.x,",").concat(f.y," Z")}else d+="L ".concat(t,",").concat(n," Z");return d},Che=function(e){var t=e.cx,n=e.cy,r=e.innerRadius,o=e.outerRadius,a=e.cornerRadius,i=e.forceCornerRadius,s=e.cornerIsExternal,c=e.startAngle,l=e.endAngle,u=gr(l-c),d=Zp({cx:t,cy:n,radius:o,angle:c,sign:u,cornerRadius:a,cornerIsExternal:s}),f=d.circleTangency,p=d.lineTangency,y=d.theta,m=Zp({cx:t,cy:n,radius:o,angle:l,sign:-u,cornerRadius:a,cornerIsExternal:s}),v=m.circleTangency,b=m.lineTangency,x=m.theta,_=s?Math.abs(c-l):Math.abs(c-l)-y-x;if(_<0)return i?"M ".concat(p.x,",").concat(p.y,`
        a`).concat(a,",").concat(a,",0,0,1,").concat(a*2,`,0
        a`).concat(a,",").concat(a,",0,0,1,").concat(-a*2,`,0
      `):KB({cx:t,cy:n,innerRadius:r,outerRadius:o,startAngle:c,endAngle:l});var w="M ".concat(p.x,",").concat(p.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(u<0),",").concat(f.x,",").concat(f.y,`
    A`).concat(o,",").concat(o,",0,").concat(+(_>180),",").concat(+(u<0),",").concat(v.x,",").concat(v.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(u<0),",").concat(b.x,",").concat(b.y,`
  `);if(r>0){var j=Zp({cx:t,cy:n,radius:r,angle:c,sign:u,isExternal:!0,cornerRadius:a,cornerIsExternal:s}),E=j.circleTangency,S=j.lineTangency,O=j.theta,P=Zp({cx:t,cy:n,radius:r,angle:l,sign:-u,isExternal:!0,cornerRadius:a,cornerIsExternal:s}),M=P.circleTangency,k=P.lineTangency,R=P.theta,A=s?Math.abs(c-l):Math.abs(c-l)-O-R;if(A<0&&a===0)return"".concat(w,"L").concat(t,",").concat(n,"Z");w+="L".concat(k.x,",").concat(k.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(u<0),",").concat(M.x,",").concat(M.y,`
      A`).concat(r,",").concat(r,",0,").concat(+(A>180),",").concat(+(u>0),",").concat(E.x,",").concat(E.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(u<0),",").concat(S.x,",").concat(S.y,"Z")}else w+="L".concat(t,",").concat(n,"Z");return w},Ohe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},XB=function(e){var t=YB(YB({},Ohe),e),n=t.cx,r=t.cy,o=t.innerRadius,a=t.outerRadius,i=t.cornerRadius,s=t.forceCornerRadius,c=t.cornerIsExternal,l=t.startAngle,u=t.endAngle,d=t.className;if(a<o||l===u)return null;var f=lt("recharts-sector",d),p=a-o,y=Fa(i,p,0,!0),m;return y>0&&Math.abs(l-u)<360?m=Che({cx:n,cy:r,innerRadius:o,outerRadius:a,cornerRadius:Math.min(y,p/2),forceCornerRadius:s,cornerIsExternal:c,startAngle:l,endAngle:u}):m=KB({cx:n,cy:r,innerRadius:o,outerRadius:a,startAngle:l,endAngle:u}),U.createElement("path",H_({},rt(t,!0),{className:f,d:m,role:"img"}))};function iu(e){"@babel/helpers - typeof";return iu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},iu(e)}function W_(){return W_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},W_.apply(this,arguments)}function QB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function JB(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?QB(Object(n),!0).forEach(function(r){Mhe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):QB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Mhe(e,t,n){return t=Nhe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Nhe(e){var t=khe(e,"string");return iu(t)=="symbol"?t:t+""}function khe(e,t){if(iu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(iu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var GB={curveBasisClosed:hse,curveBasisOpen:mse,curveBasis:pse,curveBumpX:Zie,curveBumpY:ese,curveLinearClosed:yse,curveLinear:up,curveMonotoneX:gse,curveMonotoneY:vse,curveNatural:bse,curveStep:xse,curveStepAfter:_se,curveStepBefore:wse},eh=function(e){return e.x===+e.x&&e.y===+e.y},su=function(e){return e.x},cu=function(e){return e.y},Phe=function(e,t){if(We(e))return e;var n="curve".concat(ip(e));return(n==="curveMonotone"||n==="curveBump")&&t?GB["".concat(n).concat(t==="vertical"?"Y":"X")]:GB[n]||up},Ahe=function(e){var t=e.type,n=t===void 0?"linear":t,r=e.points,o=r===void 0?[]:r,a=e.baseLine,i=e.layout,s=e.connectNulls,c=s===void 0?!1:s,l=Phe(n,i),u=c?o.filter(function(y){return eh(y)}):o,d;if(Array.isArray(a)){var f=c?a.filter(function(y){return eh(y)}):a,p=u.map(function(y,m){return JB(JB({},y),{},{base:f[m]})});return i==="vertical"?d=dp().y(cu).x1(su).x0(function(y){return y.base.x}):d=dp().x(su).y1(cu).y0(function(y){return y.base.y}),d.defined(eh).curve(l),d(p)}return i==="vertical"&&me(a)?d=dp().y(cu).x1(su).x0(a):me(a)?d=dp().x(su).y1(cu).y0(a):d=J5().x(su).y(cu),d.defined(eh).curve(l),d(u)},ZB=function(e){var t=e.className,n=e.points,r=e.path,o=e.pathRef;if((!n||!n.length)&&!r)return null;var a=n&&n.length?Ahe(e):r;return U.createElement("path",W_({},rt(e,!1),op(e),{className:lt("recharts-curve",t),d:a,ref:o}))},e6={exports:{}},q_,t6;function The(){if(t6)return q_;t6=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return q_=e,q_}var Y_,n6;function Rhe(){if(n6)return Y_;n6=1;var e=The();function t(){}function n(){}return n.resetWarningCache=t,Y_=function(){function r(i,s,c,l,u,d){if(d!==e){var f=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw f.name="Invariant Violation",f}}r.isRequired=r;function o(){return r}var a={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:o,element:r,elementType:r,instanceOf:o,node:r,objectOf:o,oneOf:o,oneOfType:o,shape:o,exact:o,checkPropTypes:n,resetWarningCache:t};return a.PropTypes=a,a},Y_}var r6;function Ihe(){return r6||(r6=1,e6.exports=Rhe()()),e6.exports}var Dhe=Ihe();const Fe=Xe(Dhe);var Lhe=Object.getOwnPropertyNames,Fhe=Object.getOwnPropertySymbols,Bhe=Object.prototype.hasOwnProperty;function o6(e,t){return function(n,r,o){return e(n,r,o)&&t(n,r,o)}}function th(e){return function(t,n,r){if(!t||!n||typeof t!="object"||typeof n!="object")return e(t,n,r);var o=r.cache,a=o.get(t),i=o.get(n);if(a&&i)return a===n&&i===t;o.set(t,n),o.set(n,t);var s=e(t,n,r);return o.delete(t),o.delete(n),s}}function a6(e){return Lhe(e).concat(Fhe(e))}var i6=Object.hasOwn||function(e,t){return Bhe.call(e,t)};function Ms(e,t){return e||t?e===t:e===t||e!==e&&t!==t}var s6="_owner",c6=Object.getOwnPropertyDescriptor,l6=Object.keys;function $he(e,t,n){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(!n.equals(e[r],t[r],r,r,e,t,n))return!1;return!0}function zhe(e,t){return Ms(e.getTime(),t.getTime())}function u6(e,t,n){if(e.size!==t.size)return!1;for(var r={},o=e.entries(),a=0,i,s;(i=o.next())&&!i.done;){for(var c=t.entries(),l=!1,u=0;(s=c.next())&&!s.done;){var d=i.value,f=d[0],p=d[1],y=s.value,m=y[0],v=y[1];!l&&!r[u]&&(l=n.equals(f,m,a,u,e,t,n)&&n.equals(p,v,f,m,e,t,n))&&(r[u]=!0),u++}if(!l)return!1;a++}return!0}function Vhe(e,t,n){var r=l6(e),o=r.length;if(l6(t).length!==o)return!1;for(var a;o-- >0;)if(a=r[o],a===s6&&(e.$$typeof||t.$$typeof)&&e.$$typeof!==t.$$typeof||!i6(t,a)||!n.equals(e[a],t[a],a,a,e,t,n))return!1;return!0}function lu(e,t,n){var r=a6(e),o=r.length;if(a6(t).length!==o)return!1;for(var a,i,s;o-- >0;)if(a=r[o],a===s6&&(e.$$typeof||t.$$typeof)&&e.$$typeof!==t.$$typeof||!i6(t,a)||!n.equals(e[a],t[a],a,a,e,t,n)||(i=c6(e,a),s=c6(t,a),(i||s)&&(!i||!s||i.configurable!==s.configurable||i.enumerable!==s.enumerable||i.writable!==s.writable)))return!1;return!0}function Uhe(e,t){return Ms(e.valueOf(),t.valueOf())}function Hhe(e,t){return e.source===t.source&&e.flags===t.flags}function d6(e,t,n){if(e.size!==t.size)return!1;for(var r={},o=e.values(),a,i;(a=o.next())&&!a.done;){for(var s=t.values(),c=!1,l=0;(i=s.next())&&!i.done;)!c&&!r[l]&&(c=n.equals(a.value,i.value,a.value,i.value,e,t,n))&&(r[l]=!0),l++;if(!c)return!1}return!0}function Whe(e,t){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(e[n]!==t[n])return!1;return!0}var qhe="[object Arguments]",Yhe="[object Boolean]",Khe="[object Date]",Xhe="[object Map]",Qhe="[object Number]",Jhe="[object Object]",Ghe="[object RegExp]",Zhe="[object Set]",eme="[object String]",tme=Array.isArray,f6=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,p6=Object.assign,nme=Object.prototype.toString.call.bind(Object.prototype.toString);function rme(e){var t=e.areArraysEqual,n=e.areDatesEqual,r=e.areMapsEqual,o=e.areObjectsEqual,a=e.arePrimitiveWrappersEqual,i=e.areRegExpsEqual,s=e.areSetsEqual,c=e.areTypedArraysEqual;return function(l,u,d){if(l===u)return!0;if(l==null||u==null||typeof l!="object"||typeof u!="object")return l!==l&&u!==u;var f=l.constructor;if(f!==u.constructor)return!1;if(f===Object)return o(l,u,d);if(tme(l))return t(l,u,d);if(f6!=null&&f6(l))return c(l,u,d);if(f===Date)return n(l,u,d);if(f===RegExp)return i(l,u,d);if(f===Map)return r(l,u,d);if(f===Set)return s(l,u,d);var p=nme(l);return p===Khe?n(l,u,d):p===Ghe?i(l,u,d):p===Xhe?r(l,u,d):p===Zhe?s(l,u,d):p===Jhe?typeof l.then!="function"&&typeof u.then!="function"&&o(l,u,d):p===qhe?o(l,u,d):p===Yhe||p===Qhe||p===eme?a(l,u,d):!1}}function ome(e){var t=e.circular,n=e.createCustomConfig,r=e.strict,o={areArraysEqual:r?lu:$he,areDatesEqual:zhe,areMapsEqual:r?o6(u6,lu):u6,areObjectsEqual:r?lu:Vhe,arePrimitiveWrappersEqual:Uhe,areRegExpsEqual:Hhe,areSetsEqual:r?o6(d6,lu):d6,areTypedArraysEqual:r?lu:Whe};if(n&&(o=p6({},o,n(o))),t){var a=th(o.areArraysEqual),i=th(o.areMapsEqual),s=th(o.areObjectsEqual),c=th(o.areSetsEqual);o=p6({},o,{areArraysEqual:a,areMapsEqual:i,areObjectsEqual:s,areSetsEqual:c})}return o}function ame(e){return function(t,n,r,o,a,i,s){return e(t,n,s)}}function ime(e){var t=e.circular,n=e.comparator,r=e.createState,o=e.equals,a=e.strict;if(r)return function(s,c){var l=r(),u=l.cache,d=u===void 0?t?new WeakMap:void 0:u,f=l.meta;return n(s,c,{cache:d,equals:o,meta:f,strict:a})};if(t)return function(s,c){return n(s,c,{cache:new WeakMap,equals:o,meta:void 0,strict:a})};var i={cache:void 0,equals:o,meta:void 0,strict:a};return function(s,c){return n(s,c,i)}}var sme=ia();ia({strict:!0}),ia({circular:!0}),ia({circular:!0,strict:!0}),ia({createInternalComparator:function(){return Ms}}),ia({strict:!0,createInternalComparator:function(){return Ms}}),ia({circular:!0,createInternalComparator:function(){return Ms}}),ia({circular:!0,createInternalComparator:function(){return Ms},strict:!0});function ia(e){e===void 0&&(e={});var t=e.circular,n=t===void 0?!1:t,r=e.createInternalComparator,o=e.createState,a=e.strict,i=a===void 0?!1:a,s=ome(e),c=rme(s),l=r?r(c):ame(c);return ime({circular:n,comparator:c,createState:o,equals:l,strict:i})}function cme(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function h6(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,r=function o(a){n<0&&(n=a),a-n>t?(e(a),n=-1):cme(o)};requestAnimationFrame(r)}function K_(e){"@babel/helpers - typeof";return K_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},K_(e)}function lme(e){return pme(e)||fme(e)||dme(e)||ume()}function ume(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dme(e,t){if(e){if(typeof e=="string")return m6(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m6(e,t)}}function m6(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function fme(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function pme(e){if(Array.isArray(e))return e}function hme(){var e={},t=function(){return null},n=!1,r=function o(a){if(!n){if(Array.isArray(a)){if(!a.length)return;var i=a,s=lme(i),c=s[0],l=s.slice(1);if(typeof c=="number"){h6(o.bind(null,l),c);return}o(c),h6(o.bind(null,l));return}K_(a)==="object"&&(e=a,t(e)),typeof a=="function"&&a()}};return{stop:function(){n=!0},start:function(o){n=!1,r(o)},subscribe:function(o){return t=o,function(){t=function(){return null}}}}}function uu(e){"@babel/helpers - typeof";return uu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},uu(e)}function y6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function g6(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?y6(Object(n),!0).forEach(function(r){v6(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y6(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function v6(e,t,n){return t=mme(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mme(e){var t=yme(e,"string");return uu(t)==="symbol"?t:String(t)}function yme(e,t){if(uu(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(uu(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var gme=function(e,t){return[Object.keys(e),Object.keys(t)].reduce(function(n,r){return n.filter(function(o){return r.includes(o)})})},vme=function(e){return e},bme=function(e){return e.replace(/([A-Z])/g,function(t){return"-".concat(t.toLowerCase())})},du=function(e,t){return Object.keys(t).reduce(function(n,r){return g6(g6({},n),{},v6({},r,e(r,t[r])))},{})},b6=function(e,t,n){return e.map(function(r){return"".concat(bme(r)," ").concat(t,"ms ").concat(n)}).join(",")};function xme(e,t){return jme(e)||_me(e,t)||x6(e,t)||wme()}function wme(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _me(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,o,a,i,s=[],c=!0,l=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(c=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(u){l=!0,o=u}finally{try{if(!c&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return s}}function jme(e){if(Array.isArray(e))return e}function Eme(e){return Ome(e)||Cme(e)||x6(e)||Sme()}function Sme(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function x6(e,t){if(e){if(typeof e=="string")return X_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return X_(e,t)}}function Cme(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Ome(e){if(Array.isArray(e))return X_(e)}function X_(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var nh=1e-4,w6=function(e,t){return[0,3*e,3*t-6*e,3*e-3*t+1]},_6=function(e,t){return e.map(function(n,r){return n*Math.pow(t,r)}).reduce(function(n,r){return n+r})},j6=function(e,t){return function(n){var r=w6(e,t);return _6(r,n)}},Mme=function(e,t){return function(n){var r=w6(e,t),o=[].concat(Eme(r.map(function(a,i){return a*i}).slice(1)),[0]);return _6(o,n)}},E6=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],o=t[1],a=t[2],i=t[3];if(t.length===1)switch(t[0]){case"linear":r=0,o=0,a=1,i=1;break;case"ease":r=.25,o=.1,a=.25,i=1;break;case"ease-in":r=.42,o=0,a=1,i=1;break;case"ease-out":r=.42,o=0,a=.58,i=1;break;case"ease-in-out":r=0,o=0,a=.58,i=1;break;default:{var s=t[0].split("(");if(s[0]==="cubic-bezier"&&s[1].split(")")[0].split(",").length===4){var c=s[1].split(")")[0].split(",").map(function(m){return parseFloat(m)}),l=xme(c,4);r=l[0],o=l[1],a=l[2],i=l[3]}}}var u=j6(r,a),d=j6(o,i),f=Mme(r,a),p=function(m){return m>1?1:m<0?0:m},y=function(m){for(var v=m>1?1:m,b=v,x=0;x<8;++x){var _=u(b)-v,w=f(b);if(Math.abs(_-v)<nh||w<nh)return d(b);b=p(b-_/w)}return d(b)};return y.isStepper=!1,y},Nme=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.stiff,n=t===void 0?100:t,r=e.damping,o=r===void 0?8:r,a=e.dt,i=a===void 0?17:a,s=function(c,l,u){var d=-(c-l)*n,f=u*o,p=u+(d-f)*i/1e3,y=u*i/1e3+c;return Math.abs(y-l)<nh&&Math.abs(p)<nh?[l,0]:[y,p]};return s.isStepper=!0,s.dt=i,s},kme=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0];if(typeof r=="string")switch(r){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return E6(r);case"spring":return Nme();default:if(r.split("(")[0]==="cubic-bezier")return E6(r)}return typeof r=="function"?r:null};function fu(e){"@babel/helpers - typeof";return fu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fu(e)}function S6(e){return Tme(e)||Ame(e)||O6(e)||Pme()}function Pme(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ame(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Tme(e){if(Array.isArray(e))return J_(e)}function C6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Gt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?C6(Object(n),!0).forEach(function(r){Q_(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C6(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Q_(e,t,n){return t=Rme(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Rme(e){var t=Ime(e,"string");return fu(t)==="symbol"?t:String(t)}function Ime(e,t){if(fu(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(fu(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Dme(e,t){return Bme(e)||Fme(e,t)||O6(e,t)||Lme()}function Lme(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function O6(e,t){if(e){if(typeof e=="string")return J_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return J_(e,t)}}function J_(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Fme(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,o,a,i,s=[],c=!0,l=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(c=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(u){l=!0,o=u}finally{try{if(!c&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return s}}function Bme(e){if(Array.isArray(e))return e}var rh=function(e,t,n){return e+(t-e)*n},G_=function(e){var t=e.from,n=e.to;return t!==n},$me=function e(t,n,r){var o=du(function(a,i){if(G_(i)){var s=t(i.from,i.to,i.velocity),c=Dme(s,2),l=c[0],u=c[1];return Gt(Gt({},i),{},{from:l,velocity:u})}return i},n);return r<1?du(function(a,i){return G_(i)?Gt(Gt({},i),{},{velocity:rh(i.velocity,o[a].velocity,r),from:rh(i.from,o[a].from,r)}):i},n):e(t,o,r-1)};const zme=function(e,t,n,r,o){var a=gme(e,t),i=a.reduce(function(v,b){return Gt(Gt({},v),{},Q_({},b,[e[b],t[b]]))},{}),s=a.reduce(function(v,b){return Gt(Gt({},v),{},Q_({},b,{from:e[b],velocity:0,to:t[b]}))},{}),c=-1,l,u,d=function(){return null},f=function(){return du(function(v,b){return b.from},s)},p=function(){return!Object.values(s).filter(G_).length},y=function(v){l||(l=v);var b=v-l,x=b/n.dt;s=$me(n,s,x),o(Gt(Gt(Gt({},e),t),f())),l=v,p()||(c=requestAnimationFrame(d))},m=function(v){u||(u=v);var b=(v-u)/r,x=du(function(w,j){return rh.apply(void 0,S6(j).concat([n(b)]))},i);if(o(Gt(Gt(Gt({},e),t),x)),b<1)c=requestAnimationFrame(d);else{var _=du(function(w,j){return rh.apply(void 0,S6(j).concat([n(1)]))},i);o(Gt(Gt(Gt({},e),t),_))}};return d=n.isStepper?y:m,function(){return requestAnimationFrame(d),function(){cancelAnimationFrame(c)}}};function Ns(e){"@babel/helpers - typeof";return Ns=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ns(e)}var Vme=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function Ume(e,t){if(e==null)return{};var n=Hme(e,t),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Hme(e,t){if(e==null)return{};var n={},r=Object.keys(e),o,a;for(a=0;a<r.length;a++)o=r[a],!(t.indexOf(o)>=0)&&(n[o]=e[o]);return n}function Z_(e){return Kme(e)||Yme(e)||qme(e)||Wme()}function Wme(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qme(e,t){if(e){if(typeof e=="string")return ej(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ej(e,t)}}function Yme(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Kme(e){if(Array.isArray(e))return ej(e)}function ej(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function M6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function xr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?M6(Object(n),!0).forEach(function(r){pu(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M6(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function pu(e,t,n){return t=N6(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Xme(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Qme(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,N6(r.key),r)}}function Jme(e,t,n){return t&&Qme(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function N6(e){var t=Gme(e,"string");return Ns(t)==="symbol"?t:String(t)}function Gme(e,t){if(Ns(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Ns(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Zme(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tj(e,t)}function tj(e,t){return tj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},tj(e,t)}function eye(e){var t=tye();return function(){var n=oh(e),r;if(t){var o=oh(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return nj(this,r)}}function nj(e,t){if(t&&(Ns(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return rj(e)}function rj(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tye(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function oh(e){return oh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},oh(e)}var sa=function(e){Zme(n,e);var t=eye(n);function n(r,o){var a;Xme(this,n),a=t.call(this,r,o);var i=a.props,s=i.isActive,c=i.attributeName,l=i.from,u=i.to,d=i.steps,f=i.children,p=i.duration;if(a.handleStyleChange=a.handleStyleChange.bind(rj(a)),a.changeStyle=a.changeStyle.bind(rj(a)),!s||p<=0)return a.state={style:{}},typeof f=="function"&&(a.state={style:u}),nj(a);if(d&&d.length)a.state={style:d[0].style};else if(l){if(typeof f=="function")return a.state={style:l},nj(a);a.state={style:c?pu({},c,l):l}}else a.state={style:{}};return a}return Jme(n,[{key:"componentDidMount",value:function(){var r=this.props,o=r.isActive,a=r.canBegin;this.mounted=!0,!(!o||!a)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(r){var o=this.props,a=o.isActive,i=o.canBegin,s=o.attributeName,c=o.shouldReAnimate,l=o.to,u=o.from,d=this.state.style;if(i){if(!a){var f={style:s?pu({},s,l):l};this.state&&d&&(s&&d[s]!==l||!s&&d!==l)&&this.setState(f);return}if(!(sme(r.to,l)&&r.canBegin&&r.isActive)){var p=!r.canBegin||!r.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var y=p||c?u:r.to;if(this.state&&d){var m={style:s?pu({},s,y):y};(s&&d[s]!==y||!s&&d!==y)&&this.setState(m)}this.runAnimation(xr(xr({},this.props),{},{from:y,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var r=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),r&&r()}},{key:"handleStyleChange",value:function(r){this.changeStyle(r)}},{key:"changeStyle",value:function(r){this.mounted&&this.setState({style:r})}},{key:"runJSAnimation",value:function(r){var o=this,a=r.from,i=r.to,s=r.duration,c=r.easing,l=r.begin,u=r.onAnimationEnd,d=r.onAnimationStart,f=zme(a,i,kme(c),s,this.changeStyle),p=function(){o.stopJSAnimation=f()};this.manager.start([d,l,p,s,u])}},{key:"runStepAnimation",value:function(r){var o=this,a=r.steps,i=r.begin,s=r.onAnimationStart,c=a[0],l=c.style,u=c.duration,d=u===void 0?0:u,f=function(p,y,m){if(m===0)return p;var v=y.duration,b=y.easing,x=b===void 0?"ease":b,_=y.style,w=y.properties,j=y.onAnimationEnd,E=m>0?a[m-1]:y,S=w||Object.keys(_);if(typeof x=="function"||x==="spring")return[].concat(Z_(p),[o.runJSAnimation.bind(o,{from:E.style,to:_,duration:v,easing:x}),v]);var O=b6(S,v,x),P=xr(xr(xr({},E.style),_),{},{transition:O});return[].concat(Z_(p),[P,v,j]).filter(vme)};return this.manager.start([s].concat(Z_(a.reduce(f,[l,Math.max(d,i)])),[r.onAnimationEnd]))}},{key:"runAnimation",value:function(r){this.manager||(this.manager=hme());var o=r.begin,a=r.duration,i=r.attributeName,s=r.to,c=r.easing,l=r.onAnimationStart,u=r.onAnimationEnd,d=r.steps,f=r.children,p=this.manager;if(this.unSubscribe=p.subscribe(this.handleStyleChange),typeof c=="function"||typeof f=="function"||c==="spring"){this.runJSAnimation(r);return}if(d.length>1){this.runStepAnimation(r);return}var y=i?pu({},i,s):s,m=b6(Object.keys(y),a,c);p.start([l,o,xr(xr({},y),{},{transition:m}),a,u])}},{key:"render",value:function(){var r=this.props,o=r.children;r.begin;var a=r.duration;r.attributeName,r.easing;var i=r.isActive;r.steps,r.from,r.to,r.canBegin,r.onAnimationEnd,r.shouldReAnimate,r.onAnimationReStart;var s=Ume(r,Vme),c=g.Children.count(o),l=this.state.style;if(typeof o=="function")return o(l);if(!i||c===0||a<=0)return o;var u=function(d){var f=d.props,p=f.style,y=p===void 0?{}:p,m=f.className,v=g.cloneElement(d,xr(xr({},s),{},{style:xr(xr({},y),l),className:m}));return v};return c===1?u(g.Children.only(o)):U.createElement("div",null,g.Children.map(o,function(d){return u(d)}))}}]),n}(g.PureComponent);sa.displayName="Animate",sa.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}},sa.propTypes={from:Fe.oneOfType([Fe.object,Fe.string]),to:Fe.oneOfType([Fe.object,Fe.string]),attributeName:Fe.string,duration:Fe.number,begin:Fe.number,easing:Fe.oneOfType([Fe.string,Fe.func]),steps:Fe.arrayOf(Fe.shape({duration:Fe.number.isRequired,style:Fe.object.isRequired,easing:Fe.oneOfType([Fe.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Fe.func]),properties:Fe.arrayOf("string"),onAnimationEnd:Fe.func})),children:Fe.oneOfType([Fe.node,Fe.func]),isActive:Fe.bool,canBegin:Fe.bool,onAnimationEnd:Fe.func,shouldReAnimate:Fe.bool,onAnimationStart:Fe.func,onAnimationReStart:Fe.func},Fe.object,Fe.object,Fe.object,Fe.element,Fe.object,Fe.object,Fe.object,Fe.oneOfType([Fe.array,Fe.element]),Fe.any;function hu(e){"@babel/helpers - typeof";return hu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hu(e)}function ah(){return ah=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ah.apply(this,arguments)}function nye(e,t){return iye(e)||aye(e,t)||oye(e,t)||rye()}function rye(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oye(e,t){if(e){if(typeof e=="string")return k6(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return k6(e,t)}}function k6(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function aye(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,o,a,i,s=[],c=!0,l=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(c=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(u){l=!0,o=u}finally{try{if(!c&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return s}}function iye(e){if(Array.isArray(e))return e}function P6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function A6(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?P6(Object(n),!0).forEach(function(r){sye(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P6(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function sye(e,t,n){return t=cye(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cye(e){var t=lye(e,"string");return hu(t)=="symbol"?t:t+""}function lye(e,t){if(hu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(hu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var T6=function(e,t,n,r,o){var a=Math.min(Math.abs(n)/2,Math.abs(r)/2),i=r>=0?1:-1,s=n>=0?1:-1,c=r>=0&&n>=0||r<0&&n<0?1:0,l;if(a>0&&o instanceof Array){for(var u=[0,0,0,0],d=0,f=4;d<f;d++)u[d]=o[d]>a?a:o[d];l="M".concat(e,",").concat(t+i*u[0]),u[0]>0&&(l+="A ".concat(u[0],",").concat(u[0],",0,0,").concat(c,",").concat(e+s*u[0],",").concat(t)),l+="L ".concat(e+n-s*u[1],",").concat(t),u[1]>0&&(l+="A ".concat(u[1],",").concat(u[1],",0,0,").concat(c,`,
        `).concat(e+n,",").concat(t+i*u[1])),l+="L ".concat(e+n,",").concat(t+r-i*u[2]),u[2]>0&&(l+="A ".concat(u[2],",").concat(u[2],",0,0,").concat(c,`,
        `).concat(e+n-s*u[2],",").concat(t+r)),l+="L ".concat(e+s*u[3],",").concat(t+r),u[3]>0&&(l+="A ".concat(u[3],",").concat(u[3],",0,0,").concat(c,`,
        `).concat(e,",").concat(t+r-i*u[3])),l+="Z"}else if(a>0&&o===+o&&o>0){var p=Math.min(a,o);l="M ".concat(e,",").concat(t+i*p,`
            A `).concat(p,",").concat(p,",0,0,").concat(c,",").concat(e+s*p,",").concat(t,`
            L `).concat(e+n-s*p,",").concat(t,`
            A `).concat(p,",").concat(p,",0,0,").concat(c,",").concat(e+n,",").concat(t+i*p,`
            L `).concat(e+n,",").concat(t+r-i*p,`
            A `).concat(p,",").concat(p,",0,0,").concat(c,",").concat(e+n-s*p,",").concat(t+r,`
            L `).concat(e+s*p,",").concat(t+r,`
            A `).concat(p,",").concat(p,",0,0,").concat(c,",").concat(e,",").concat(t+r-i*p," Z")}else l="M ".concat(e,",").concat(t," h ").concat(n," v ").concat(r," h ").concat(-n," Z");return l},uye=function(e,t){if(!e||!t)return!1;var n=e.x,r=e.y,o=t.x,a=t.y,i=t.width,s=t.height;if(Math.abs(i)>0&&Math.abs(s)>0){var c=Math.min(o,o+i),l=Math.max(o,o+i),u=Math.min(a,a+s),d=Math.max(a,a+s);return n>=c&&n<=l&&r>=u&&r<=d}return!1},dye={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},oj=function(e){var t=A6(A6({},dye),e),n=g.useRef(),r=g.useState(-1),o=nye(r,2),a=o[0],i=o[1];g.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var _=n.current.getTotalLength();_&&i(_)}catch{}},[]);var s=t.x,c=t.y,l=t.width,u=t.height,d=t.radius,f=t.className,p=t.animationEasing,y=t.animationDuration,m=t.animationBegin,v=t.isAnimationActive,b=t.isUpdateAnimationActive;if(s!==+s||c!==+c||l!==+l||u!==+u||l===0||u===0)return null;var x=lt("recharts-rectangle",f);return b?U.createElement(sa,{canBegin:a>0,from:{width:l,height:u,x:s,y:c},to:{width:l,height:u,x:s,y:c},duration:y,animationEasing:p,isActive:b},function(_){var w=_.width,j=_.height,E=_.x,S=_.y;return U.createElement(sa,{canBegin:a>0,from:"0px ".concat(a===-1?1:a,"px"),to:"".concat(a,"px 0px"),attributeName:"strokeDasharray",begin:m,duration:y,isActive:v,easing:p},U.createElement("path",ah({},rt(t,!0),{className:x,d:T6(E,S,w,j,d),ref:n})))}):U.createElement("path",ah({},rt(t,!0),{className:x,d:T6(s,c,l,u,d)}))};function aj(){return aj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},aj.apply(this,arguments)}var R6=function(e){var t=e.cx,n=e.cy,r=e.r,o=e.className,a=lt("recharts-dot",o);return t===+t&&n===+n&&r===+r?U.createElement("circle",aj({},rt(e,!1),op(e),{className:a,cx:t,cy:n,r})):null};function mu(e){"@babel/helpers - typeof";return mu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mu(e)}var fye=["x","y","top","left","width","height","className"];function ij(){return ij=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ij.apply(this,arguments)}function I6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function pye(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?I6(Object(n),!0).forEach(function(r){hye(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I6(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function hye(e,t,n){return t=mye(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mye(e){var t=yye(e,"string");return mu(t)=="symbol"?t:t+""}function yye(e,t){if(mu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(mu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function gye(e,t){if(e==null)return{};var n=vye(e,t),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function vye(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var bye=function(e,t,n,r,o,a){return"M".concat(e,",").concat(o,"v").concat(r,"M").concat(a,",").concat(t,"h").concat(n)},xye=function(e){var t=e.x,n=t===void 0?0:t,r=e.y,o=r===void 0?0:r,a=e.top,i=a===void 0?0:a,s=e.left,c=s===void 0?0:s,l=e.width,u=l===void 0?0:l,d=e.height,f=d===void 0?0:d,p=e.className,y=gye(e,fye),m=pye({x:n,y:o,top:i,left:c,width:u,height:f},y);return!me(n)||!me(o)||!me(u)||!me(f)||!me(i)||!me(c)?null:U.createElement("path",ij({},rt(m,!0),{className:lt("recharts-cross",p),d:bye(n,o,u,f,i,c)}))},sj,D6;SE=function(){if(D6)return sj;D6=1;var e=co(),t=Fm(),n=Sr(),r="[object Object]",o=Function.prototype,a=Object.prototype,i=o.toString,s=a.hasOwnProperty,c=i.call(Object);function l(u){if(!n(u)||e(u)!=r)return!1;var d=t(u);if(d===null)return!0;var f=s.call(d,"constructor")&&d.constructor;return typeof f=="function"&&f instanceof f&&i.call(f)==c}return sj=l,sj};var wye=SE();const _ye=Xe(wye);var cj,L6;function jye(){if(L6)return cj;L6=1;var e=co(),t=Sr(),n="[object Boolean]";function r(o){return o===!0||o===!1||t(o)&&e(o)==n}return cj=r,cj}var Eye=jye();const Sye=Xe(Eye);function yu(e){"@babel/helpers - typeof";return yu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yu(e)}function ih(){return ih=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ih.apply(this,arguments)}function Cye(e,t){return kye(e)||Nye(e,t)||Mye(e,t)||Oye()}function Oye(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Mye(e,t){if(e){if(typeof e=="string")return F6(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return F6(e,t)}}function F6(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Nye(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,o,a,i,s=[],c=!0,l=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(c=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(u){l=!0,o=u}finally{try{if(!c&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return s}}function kye(e){if(Array.isArray(e))return e}function B6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function $6(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?B6(Object(n),!0).forEach(function(r){Pye(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B6(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Pye(e,t,n){return t=Aye(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Aye(e){var t=Tye(e,"string");return yu(t)=="symbol"?t:t+""}function Tye(e,t){if(yu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(yu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var z6=function(e,t,n,r,o){var a=n-r,i;return i="M ".concat(e,",").concat(t),i+="L ".concat(e+n,",").concat(t),i+="L ".concat(e+n-a/2,",").concat(t+o),i+="L ".concat(e+n-a/2-r,",").concat(t+o),i+="L ".concat(e,",").concat(t," Z"),i},Rye={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Iye=function(e){var t=$6($6({},Rye),e),n=g.useRef(),r=g.useState(-1),o=Cye(r,2),a=o[0],i=o[1];g.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var x=n.current.getTotalLength();x&&i(x)}catch{}},[]);var s=t.x,c=t.y,l=t.upperWidth,u=t.lowerWidth,d=t.height,f=t.className,p=t.animationEasing,y=t.animationDuration,m=t.animationBegin,v=t.isUpdateAnimationActive;if(s!==+s||c!==+c||l!==+l||u!==+u||d!==+d||l===0&&u===0||d===0)return null;var b=lt("recharts-trapezoid",f);return v?U.createElement(sa,{canBegin:a>0,from:{upperWidth:0,lowerWidth:0,height:d,x:s,y:c},to:{upperWidth:l,lowerWidth:u,height:d,x:s,y:c},duration:y,animationEasing:p,isActive:v},function(x){var _=x.upperWidth,w=x.lowerWidth,j=x.height,E=x.x,S=x.y;return U.createElement(sa,{canBegin:a>0,from:"0px ".concat(a===-1?1:a,"px"),to:"".concat(a,"px 0px"),attributeName:"strokeDasharray",begin:m,duration:y,easing:p},U.createElement("path",ih({},rt(t,!0),{className:b,d:z6(E,S,_,w,j),ref:n})))}):U.createElement("g",null,U.createElement("path",ih({},rt(t,!0),{className:b,d:z6(s,c,l,u,d)})))},Dye=["option","shapeType","propTransformer","activeClassName","isActive"];function gu(e){"@babel/helpers - typeof";return gu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gu(e)}function Lye(e,t){if(e==null)return{};var n=Fye(e,t),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Fye(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function V6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function sh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?V6(Object(n),!0).forEach(function(r){Bye(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V6(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Bye(e,t,n){return t=$ye(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $ye(e){var t=zye(e,"string");return gu(t)=="symbol"?t:t+""}function zye(e,t){if(gu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(gu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Vye(e,t){return sh(sh({},t),e)}function Uye(e,t){return e==="symbols"}function U6(e){var t=e.shapeType,n=e.elementProps;switch(t){case"rectangle":return U.createElement(oj,n);case"trapezoid":return U.createElement(Iye,n);case"sector":return U.createElement(XB,n);case"symbols":if(Uye(t))return U.createElement(Ww,n);break;default:return null}}function Hye(e){return g.isValidElement(e)?e.props:e}function Wye(e){var t=e.option,n=e.shapeType,r=e.propTransformer,o=r===void 0?Vye:r,a=e.activeClassName,i=a===void 0?"recharts-active-shape":a,s=e.isActive,c=Lye(e,Dye),l;if(g.isValidElement(t))l=g.cloneElement(t,sh(sh({},c),Hye(t)));else if(We(t))l=t(c);else if(_ye(t)&&!Sye(t)){var u=o(t,c);l=U.createElement(U6,{shapeType:n,elementProps:u})}else{var d=c;l=U.createElement(U6,{shapeType:n,elementProps:d})}return s?U.createElement(Wt,{className:i},l):l}function ch(e,t){return t!=null&&"trapezoids"in e.props}function lh(e,t){return t!=null&&"sectors"in e.props}function vu(e,t){return t!=null&&"points"in e.props}function qye(e,t){var n,r,o=e.x===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.x)||e.x===t.x,a=e.y===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.y)||e.y===t.y;return o&&a}function Yye(e,t){var n=e.endAngle===t.endAngle,r=e.startAngle===t.startAngle;return n&&r}function Kye(e,t){var n=e.x===t.x,r=e.y===t.y,o=e.z===t.z;return n&&r&&o}function Xye(e,t){var n;return ch(e,t)?n=qye:lh(e,t)?n=Yye:vu(e,t)&&(n=Kye),n}function Qye(e,t){var n;return ch(e,t)?n="trapezoids":lh(e,t)?n="sectors":vu(e,t)&&(n="points"),n}function Jye(e,t){if(ch(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(lh(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return vu(e,t)?t.payload:{}}function Gye(e){var t=e.activeTooltipItem,n=e.graphicalItem,r=e.itemData,o=Qye(n,t),a=Jye(n,t),i=r.filter(function(c,l){var u=O_(a,c),d=n.props[o].filter(function(y){var m=Xye(n,t);return m(y,t)}),f=n.props[o].indexOf(d[d.length-1]),p=l===f;return u&&p}),s=r.indexOf(i[i.length-1]);return s}var lj,H6;function Zye(){if(H6)return lj;H6=1;var e=Math.ceil,t=Math.max;function n(r,o,a,i){for(var s=-1,c=t(e((o-r)/(a||1)),0),l=Array(c);c--;)l[i?c:++s]=r,r+=a;return l}return lj=n,lj}var uj,W6;function q6(){if(W6)return uj;W6=1;var e=wL(),t=1/0,n=17976931348623157e292;function r(o){if(!o)return o===0?o:0;if(o=e(o),o===t||o===-t){var a=o<0?-1:1;return a*n}return o===o?o:0}return uj=r,uj}var dj,Y6;function ege(){if(Y6)return dj;Y6=1;var e=Zye(),t=ai(),n=q6();function r(o){return function(a,i,s){return s&&typeof s!="number"&&t(a,i,s)&&(i=s=void 0),a=n(a),i===void 0?(i=a,a=0):i=n(i),s=s===void 0?a<i?1:-1:n(s),e(a,i,s,o)}}return dj=r,dj}var fj,K6;function tge(){if(K6)return fj;K6=1;var e=ege(),t=e();return fj=t,fj}var nge=tge();const uh=Xe(nge);function bu(e){"@babel/helpers - typeof";return bu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bu(e)}function X6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Q6(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?X6(Object(n),!0).forEach(function(r){J6(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X6(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function J6(e,t,n){return t=rge(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rge(e){var t=oge(e,"string");return bu(t)=="symbol"?t:t+""}function oge(e,t){if(bu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(bu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var age=["Webkit","Moz","O","ms"],ige=function(e,t){var n=e.replace(/(\w)/,function(o){return o.toUpperCase()}),r=age.reduce(function(o,a){return Q6(Q6({},o),{},J6({},a+n,t))},{});return r[e]=t,r};function ks(e){"@babel/helpers - typeof";return ks=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ks(e)}function dh(){return dh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dh.apply(this,arguments)}function G6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function pj(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?G6(Object(n),!0).forEach(function(r){zn(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G6(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function sge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Z6(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,t$(r.key),r)}}function cge(e,t,n){return t&&Z6(e.prototype,t),n&&Z6(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function lge(e,t,n){return t=fh(t),uge(e,e$()?Reflect.construct(t,n||[],fh(e).constructor):t.apply(e,n))}function uge(e,t){if(t&&(ks(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return dge(e)}function dge(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function e$(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(e$=function(){return!!e})()}function fh(e){return fh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},fh(e)}function fge(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hj(e,t)}function hj(e,t){return hj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},hj(e,t)}function zn(e,t,n){return t=t$(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function t$(e){var t=pge(e,"string");return ks(t)=="symbol"?t:t+""}function pge(e,t){if(ks(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(ks(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var hge=function(e){var t=e.data,n=e.startIndex,r=e.endIndex,o=e.x,a=e.width,i=e.travellerWidth;if(!t||!t.length)return{};var s=t.length,c=Hl().domain(uh(0,s)).range([o,o+a-i]),l=c.domain().map(function(u){return c(u)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:c(n),endX:c(r),scale:c,scaleValues:l}},n$=function(e){return e.changedTouches&&!!e.changedTouches.length},Ps=function(e){function t(n){var r;return sge(this,t),r=lge(this,t,[n]),zn(r,"handleDrag",function(o){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(o):r.state.isSlideMoving&&r.handleSlideDrag(o)}),zn(r,"handleTouchMove",function(o){o.changedTouches!=null&&o.changedTouches.length>0&&r.handleDrag(o.changedTouches[0])}),zn(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var o=r.props,a=o.endIndex,i=o.onDragEnd,s=o.startIndex;i==null||i({endIndex:a,startIndex:s})}),r.detachDragEndListener()}),zn(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),zn(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),zn(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),zn(r,"handleSlideDragStart",function(o){var a=n$(o)?o.changedTouches[0]:o;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:a.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return fge(t,e),cge(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var r=n.startX,o=n.endX,a=this.state.scaleValues,i=this.props,s=i.gap,c=i.data,l=c.length-1,u=Math.min(r,o),d=Math.max(r,o),f=t.getIndexInRange(a,u),p=t.getIndexInRange(a,d);return{startIndex:f-f%s,endIndex:p===l?l:p-p%s}}},{key:"getTextOfTick",value:function(n){var r=this.props,o=r.data,a=r.tickFormatter,i=r.dataKey,s=zr(o[n],i,n);return We(a)?a(s,n):s}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var r=this.state,o=r.slideMoveStartX,a=r.startX,i=r.endX,s=this.props,c=s.x,l=s.width,u=s.travellerWidth,d=s.startIndex,f=s.endIndex,p=s.onChange,y=n.pageX-o;y>0?y=Math.min(y,c+l-u-i,c+l-u-a):y<0&&(y=Math.max(y,c-a,c-i));var m=this.getIndex({startX:a+y,endX:i+y});(m.startIndex!==d||m.endIndex!==f)&&p&&p(m),this.setState({startX:a+y,endX:i+y,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,r){var o=n$(r)?r.changedTouches[0]:r;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:o.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var r=this.state,o=r.brushMoveStartX,a=r.movingTravellerId,i=r.endX,s=r.startX,c=this.state[a],l=this.props,u=l.x,d=l.width,f=l.travellerWidth,p=l.onChange,y=l.gap,m=l.data,v={startX:this.state.startX,endX:this.state.endX},b=n.pageX-o;b>0?b=Math.min(b,u+d-f-c):b<0&&(b=Math.max(b,u-c)),v[a]=c+b;var x=this.getIndex(v),_=x.startIndex,w=x.endIndex,j=function(){var E=m.length-1;return a==="startX"&&(i>s?_%y===0:w%y===0)||i<s&&w===E||a==="endX"&&(i>s?w%y===0:_%y===0)||i>s&&w===E};this.setState(zn(zn({},a,c+b),"brushMoveStartX",n.pageX),function(){p&&j()&&p(x)})}},{key:"handleTravellerMoveKeyboard",value:function(n,r){var o=this,a=this.state,i=a.scaleValues,s=a.startX,c=a.endX,l=this.state[r],u=i.indexOf(l);if(u!==-1){var d=u+n;if(!(d===-1||d>=i.length)){var f=i[d];r==="startX"&&f>=c||r==="endX"&&f<=s||this.setState(zn({},r,f),function(){o.props.onChange(o.getIndex({startX:o.state.startX,endX:o.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,r=n.x,o=n.y,a=n.width,i=n.height,s=n.fill,c=n.stroke;return U.createElement("rect",{stroke:c,fill:s,x:r,y:o,width:a,height:i})}},{key:"renderPanorama",value:function(){var n=this.props,r=n.x,o=n.y,a=n.width,i=n.height,s=n.data,c=n.children,l=n.padding,u=g.Children.only(c);return u?U.cloneElement(u,{x:r,y:o,width:a,height:i,margin:l,compact:!0,data:s}):null}},{key:"renderTravellerLayer",value:function(n,r){var o,a,i=this,s=this.props,c=s.y,l=s.travellerWidth,u=s.height,d=s.traveller,f=s.ariaLabel,p=s.data,y=s.startIndex,m=s.endIndex,v=Math.max(n,this.props.x),b=pj(pj({},rt(this.props,!1)),{},{x:v,y:c,width:l,height:u}),x=f||"Min value: ".concat((o=p[y])===null||o===void 0?void 0:o.name,", Max value: ").concat((a=p[m])===null||a===void 0?void 0:a.name);return U.createElement(Wt,{tabIndex:0,role:"slider","aria-label":x,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[r],onTouchStart:this.travellerDragStartHandlers[r],onKeyDown:function(_){["ArrowLeft","ArrowRight"].includes(_.key)&&(_.preventDefault(),_.stopPropagation(),i.handleTravellerMoveKeyboard(_.key==="ArrowRight"?1:-1,r))},onFocus:function(){i.setState({isTravellerFocused:!0})},onBlur:function(){i.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(d,b))}},{key:"renderSlide",value:function(n,r){var o=this.props,a=o.y,i=o.height,s=o.stroke,c=o.travellerWidth,l=Math.min(n,r)+c,u=Math.max(Math.abs(r-n)-c,0);return U.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:s,fillOpacity:.2,x:l,y:a,width:u,height:i})}},{key:"renderText",value:function(){var n=this.props,r=n.startIndex,o=n.endIndex,a=n.y,i=n.height,s=n.travellerWidth,c=n.stroke,l=this.state,u=l.startX,d=l.endX,f=5,p={pointerEvents:"none",fill:c};return U.createElement(Wt,{className:"recharts-brush-texts"},U.createElement(Sp,dh({textAnchor:"end",verticalAnchor:"middle",x:Math.min(u,d)-f,y:a+i/2},p),this.getTextOfTick(r)),U.createElement(Sp,dh({textAnchor:"start",verticalAnchor:"middle",x:Math.max(u,d)+s+f,y:a+i/2},p),this.getTextOfTick(o)))}},{key:"render",value:function(){var n=this.props,r=n.data,o=n.className,a=n.children,i=n.x,s=n.y,c=n.width,l=n.height,u=n.alwaysShowText,d=this.state,f=d.startX,p=d.endX,y=d.isTextActive,m=d.isSlideMoving,v=d.isTravellerMoving,b=d.isTravellerFocused;if(!r||!r.length||!me(i)||!me(s)||!me(c)||!me(l)||c<=0||l<=0)return null;var x=lt("recharts-brush",o),_=U.Children.count(a)===1,w=ige("userSelect","none");return U.createElement(Wt,{className:x,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:w},this.renderBackground(),_&&this.renderPanorama(),this.renderSlide(f,p),this.renderTravellerLayer(f,"startX"),this.renderTravellerLayer(p,"endX"),(y||m||v||b||u)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var r=n.x,o=n.y,a=n.width,i=n.height,s=n.stroke,c=Math.floor(o+i/2)-1;return U.createElement(U.Fragment,null,U.createElement("rect",{x:r,y:o,width:a,height:i,fill:s,stroke:"none"}),U.createElement("line",{x1:r+1,y1:c,x2:r+a-1,y2:c,fill:"none",stroke:"#fff"}),U.createElement("line",{x1:r+1,y1:c+2,x2:r+a-1,y2:c+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,r){var o;return U.isValidElement(n)?o=U.cloneElement(n,r):We(n)?o=n(r):o=t.renderDefaultTraveller(r),o}},{key:"getDerivedStateFromProps",value:function(n,r){var o=n.data,a=n.width,i=n.x,s=n.travellerWidth,c=n.updateId,l=n.startIndex,u=n.endIndex;if(o!==r.prevData||c!==r.prevUpdateId)return pj({prevData:o,prevTravellerWidth:s,prevUpdateId:c,prevX:i,prevWidth:a},o&&o.length?hge({data:o,width:a,x:i,travellerWidth:s,startIndex:l,endIndex:u}):{scale:null,scaleValues:null});if(r.scale&&(a!==r.prevWidth||i!==r.prevX||s!==r.prevTravellerWidth)){r.scale.range([i,i+a-s]);var d=r.scale.domain().map(function(f){return r.scale(f)});return{prevData:o,prevTravellerWidth:s,prevUpdateId:c,prevX:i,prevWidth:a,startX:r.scale(n.startIndex),endX:r.scale(n.endIndex),scaleValues:d}}return null}},{key:"getIndexInRange",value:function(n,r){for(var o=n.length,a=0,i=o-1;i-a>1;){var s=Math.floor((a+i)/2);n[s]>r?i=s:a=s}return r>=n[i]?i:a}}])}(g.PureComponent);zn(Ps,"displayName","Brush"),zn(Ps,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var mj,r$;function mge(){if(r$)return mj;r$=1;var e=p1();function t(n,r){var o;return e(n,function(a,i,s){return o=r(a,i,s),!o}),!!o}return mj=t,mj}var yj,o$;function yge(){if(o$)return yj;o$=1;var e=bP(),t=kr(),n=mge(),r=un(),o=ai();function a(i,s,c){var l=r(i)?e:n;return c&&o(i,s,c)&&(s=void 0),l(i,t(s,3))}return yj=a,yj}var gge=yge();const vge=Xe(gge);var Vr=function(e,t){var n=e.alwaysShow,r=e.ifOverflow;return n&&(r="extendDomain"),r===t},gj,a$;function bge(){if(a$)return gj;a$=1;var e=qh(),t=z4(),n=kr();function r(o,a){var i={};return a=n(a,3),t(o,function(s,c,l){e(i,c,a(s,c,l))}),i}return gj=r,gj}var xge=bge();const wge=Xe(xge);var vj,i$;function _ge(){if(i$)return vj;i$=1;function e(t,n){for(var r=-1,o=t==null?0:t.length;++r<o;)if(!n(t[r],r,t))return!1;return!0}return vj=e,vj}var bj,s$;function jge(){if(s$)return bj;s$=1;var e=p1();function t(n,r){var o=!0;return e(n,function(a,i,s){return o=!!r(a,i,s),o}),o}return bj=t,bj}var xj,c$;function Ege(){if(c$)return xj;c$=1;var e=_ge(),t=jge(),n=kr(),r=un(),o=ai();function a(i,s,c){var l=r(i)?e:t;return c&&o(i,s,c)&&(s=void 0),l(i,n(s,3))}return xj=a,xj}var Sge=Ege();const l$=Xe(Sge);var Cge=["x","y"];function xu(e){"@babel/helpers - typeof";return xu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xu(e)}function wj(){return wj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wj.apply(this,arguments)}function u$(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function wu(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?u$(Object(n),!0).forEach(function(r){Oge(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u$(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Oge(e,t,n){return t=Mge(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Mge(e){var t=Nge(e,"string");return xu(t)=="symbol"?t:t+""}function Nge(e,t){if(xu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(xu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function kge(e,t){if(e==null)return{};var n=Pge(e,t),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Pge(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Age(e,t){var n=e.x,r=e.y,o=kge(e,Cge),a="".concat(n),i=parseInt(a,10),s="".concat(r),c=parseInt(s,10),l="".concat(t.height||o.height),u=parseInt(l,10),d="".concat(t.width||o.width),f=parseInt(d,10);return wu(wu(wu(wu(wu({},t),o),i?{x:i}:{}),c?{y:c}:{}),{},{height:u,width:f,name:t.name,radius:t.radius})}function d$(e){return U.createElement(Wye,wj({shapeType:"rectangle",propTransformer:Age,activeClassName:"recharts-active-bar"},e))}var Tge=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,r){if(typeof e=="number")return e;var o=typeof n=="number";return o?e(n,r):(o||qa(),t)}},Rge=["value","background"],f$;function As(e){"@babel/helpers - typeof";return As=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},As(e)}function Ige(e,t){if(e==null)return{};var n=Dge(e,t),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Dge(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function ph(){return ph=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ph.apply(this,arguments)}function p$(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Ft(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?p$(Object(n),!0).forEach(function(r){ca(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p$(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Lge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h$(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,y$(r.key),r)}}function Fge(e,t,n){return t&&h$(e.prototype,t),n&&h$(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Bge(e,t,n){return t=hh(t),$ge(e,m$()?Reflect.construct(t,n||[],hh(e).constructor):t.apply(e,n))}function $ge(e,t){if(t&&(As(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zge(e)}function zge(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m$(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(m$=function(){return!!e})()}function hh(e){return hh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},hh(e)}function Vge(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_j(e,t)}function _j(e,t){return _j=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},_j(e,t)}function ca(e,t,n){return t=y$(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y$(e){var t=Uge(e,"string");return As(t)=="symbol"?t:t+""}function Uge(e,t){if(As(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(As(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Xa=function(e){function t(){var n;Lge(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return n=Bge(this,t,[].concat(o)),ca(n,"state",{isAnimationFinished:!1}),ca(n,"id",rp("recharts-bar-")),ca(n,"handleAnimationEnd",function(){var i=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),i&&i()}),ca(n,"handleAnimationStart",function(){var i=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),i&&i()}),n}return Vge(t,e),Fge(t,[{key:"renderRectanglesStatically",value:function(n){var r=this,o=this.props,a=o.shape,i=o.dataKey,s=o.activeIndex,c=o.activeBar,l=rt(this.props,!1);return n&&n.map(function(u,d){var f=d===s,p=f?c:a,y=Ft(Ft(Ft({},l),u),{},{isActive:f,option:p,index:d,dataKey:i,onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd});return U.createElement(Wt,ph({className:"recharts-bar-rectangle"},ap(r.props,u,d),{key:"rectangle-".concat(u==null?void 0:u.x,"-").concat(u==null?void 0:u.y,"-").concat(u==null?void 0:u.value)}),U.createElement(d$,y))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,r=this.props,o=r.data,a=r.layout,i=r.isAnimationActive,s=r.animationBegin,c=r.animationDuration,l=r.animationEasing,u=r.animationId,d=this.state.prevData;return U.createElement(sa,{begin:s,duration:c,isActive:i,easing:l,from:{t:0},to:{t:1},key:"bar-".concat(u),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(f){var p=f.t,y=o.map(function(m,v){var b=d&&d[v];if(b){var x=us(b.x,m.x),_=us(b.y,m.y),w=us(b.width,m.width),j=us(b.height,m.height);return Ft(Ft({},m),{},{x:x(p),y:_(p),width:w(p),height:j(p)})}if(a==="horizontal"){var E=us(0,m.height),S=E(p);return Ft(Ft({},m),{},{y:m.y+m.height-S,height:S})}var O=us(0,m.width),P=O(p);return Ft(Ft({},m),{},{width:P})});return U.createElement(Wt,null,n.renderRectanglesStatically(y))})}},{key:"renderRectangles",value:function(){var n=this.props,r=n.data,o=n.isAnimationActive,a=this.state.prevData;return o&&r&&r.length&&(!a||!O_(a,r))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(r)}},{key:"renderBackground",value:function(){var n=this,r=this.props,o=r.data,a=r.dataKey,i=r.activeIndex,s=rt(this.props.background,!1);return o.map(function(c,l){c.value;var u=c.background,d=Ige(c,Rge);if(!u)return null;var f=Ft(Ft(Ft(Ft(Ft({},d),{},{fill:"#eee"},u),s),ap(n.props,c,l)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:a,index:l,className:"recharts-bar-background-rectangle"});return U.createElement(d$,ph({key:"background-bar-".concat(l),option:n.props.background,isActive:l===i},f))})}},{key:"renderErrorBar",value:function(n,r){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var o=this.props,a=o.data,i=o.xAxis,s=o.yAxis,c=o.layout,l=o.children,u=vr(l,Yp);if(!u)return null;var d=c==="vertical"?a[0].height/2:a[0].width/2,f=function(y,m){var v=Array.isArray(y.value)?y.value[1]:y.value;return{x:y.x,y:y.y,value:v,errorVal:zr(y,m)}},p={clipPath:n?"url(#clipPath-".concat(r,")"):null};return U.createElement(Wt,p,u.map(function(y){return U.cloneElement(y,{key:"error-bar-".concat(r,"-").concat(y.props.dataKey),data:a,xAxis:i,yAxis:s,layout:c,offset:d,dataPointFormatter:f})}))}},{key:"render",value:function(){var n=this.props,r=n.hide,o=n.data,a=n.className,i=n.xAxis,s=n.yAxis,c=n.left,l=n.top,u=n.width,d=n.height,f=n.isAnimationActive,p=n.background,y=n.id;if(r||!o||!o.length)return null;var m=this.state.isAnimationFinished,v=lt("recharts-bar",a),b=i&&i.allowDataOverflow,x=s&&s.allowDataOverflow,_=b||x,w=at(y)?this.id:y;return U.createElement(Wt,{className:v},b||x?U.createElement("defs",null,U.createElement("clipPath",{id:"clipPath-".concat(w)},U.createElement("rect",{x:b?c:c-u/2,y:x?l:l-d/2,width:b?u:u*2,height:x?d:d*2}))):null,U.createElement(Wt,{className:"recharts-bar-rectangles",clipPath:_?"url(#clipPath-".concat(w,")"):null},p?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(_,w),(!f||m)&&Ka.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(n,r){return n.animationId!==r.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:r.curData}:n.data!==r.curData?{curData:n.data}:null}}])}(g.PureComponent);f$=Xa,ca(Xa,"displayName","Bar"),ca(Xa,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!ta.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"}),ca(Xa,"getComposedData",function(e){var t=e.props,n=e.item,r=e.barPosition,o=e.bandSize,a=e.xAxis,i=e.yAxis,s=e.xAxisTicks,c=e.yAxisTicks,l=e.stackedData,u=e.dataStartIndex,d=e.displayedData,f=e.offset,p=jpe(r,n);if(!p)return null;var y=t.layout,m=n.type.defaultProps,v=m!==void 0?Ft(Ft({},m),n.props):n.props,b=v.dataKey,x=v.children,_=v.minPointSize,w=y==="horizontal"?i:a,j=l?w.scale.domain():null,E=Ppe({numericAxis:w}),S=vr(x,CL),O=d.map(function(P,M){var k,R,A,C,N,T;l?k=Epe(l[u+M],j):(k=zr(P,b),Array.isArray(k)||(k=[E,k]));var I=Tge(_,f$.defaultProps.minPointSize)(k[1],M);if(y==="horizontal"){var L,D=[i.scale(k[0]),i.scale(k[1])],B=D[0],H=D[1];R=PB({axis:a,ticks:s,bandSize:o,offset:p.offset,entry:P,index:M}),A=(L=H??B)!==null&&L!==void 0?L:void 0,C=p.size;var F=B-H;if(N=Number.isNaN(F)?0:F,T={x:R,y:i.y,width:C,height:i.height},Math.abs(I)>0&&Math.abs(N)<Math.abs(I)){var z=gr(N||I)*(Math.abs(I)-Math.abs(N));A-=z,N+=z}}else{var G=[a.scale(k[0]),a.scale(k[1])],Q=G[0],oe=G[1];if(R=Q,A=PB({axis:i,ticks:c,bandSize:o,offset:p.offset,entry:P,index:M}),C=oe-Q,N=p.size,T={x:a.x,y:A,width:a.width,height:N},Math.abs(I)>0&&Math.abs(C)<Math.abs(I)){var Z=gr(C||I)*(Math.abs(I)-Math.abs(C));C+=Z}}return Ft(Ft(Ft({},P),{},{x:R,y:A,width:C,height:N,value:l?k:k[1],payload:P,background:T},S&&S[M]&&S[M].props),{},{tooltipPayload:[DB(n,P)],tooltipPosition:{x:R+C/2,y:A+N/2}})});return Ft({data:O,layout:y},f)});function _u(e){"@babel/helpers - typeof";return _u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_u(e)}function Hge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g$(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,b$(r.key),r)}}function Wge(e,t,n){return t&&g$(e.prototype,t),n&&g$(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function v$(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function wr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?v$(Object(n),!0).forEach(function(r){mh(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v$(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function mh(e,t,n){return t=b$(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b$(e){var t=qge(e,"string");return _u(t)=="symbol"?t:t+""}function qge(e,t){if(_u(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(_u(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Yge=function(e,t,n,r,o){var a=e.width,i=e.height,s=e.layout,c=e.children,l=Object.keys(t),u={left:n.left,leftMirror:n.left,right:a-n.right,rightMirror:a-n.right,top:n.top,topMirror:n.top,bottom:i-n.bottom,bottomMirror:i-n.bottom},d=!!Bn(c,Xa);return l.reduce(function(f,p){var y=t[p],m=y.orientation,v=y.domain,b=y.padding,x=b===void 0?{}:b,_=y.mirror,w=y.reversed,j="".concat(m).concat(_?"Mirror":""),E,S,O,P,M;if(y.type==="number"&&(y.padding==="gap"||y.padding==="no-gap")){var k=v[1]-v[0],R=1/0,A=y.categoricalDomain.sort();if(A.forEach(function(z,G){G>0&&(R=Math.min((z||0)-(A[G-1]||0),R))}),Number.isFinite(R)){var C=R/k,N=y.layout==="vertical"?n.height:n.width;if(y.padding==="gap"&&(E=C*N/2),y.padding==="no-gap"){var T=Fa(e.barCategoryGap,C*N),I=C*N/2;E=I-T-(I-T)/N*T}}}r==="xAxis"?S=[n.left+(x.left||0)+(E||0),n.left+n.width-(x.right||0)-(E||0)]:r==="yAxis"?S=s==="horizontal"?[n.top+n.height-(x.bottom||0),n.top+(x.top||0)]:[n.top+(x.top||0)+(E||0),n.top+n.height-(x.bottom||0)-(E||0)]:S=y.range,w&&(S=[S[1],S[0]]);var L=wpe(y,o,d),D=L.scale,B=L.realScaleType;D.domain(v).range(S),_pe(D);var H=kpe(D,wr(wr({},y),{},{realScaleType:B}));r==="xAxis"?(M=m==="top"&&!_||m==="bottom"&&_,O=n.left,P=u[j]-M*y.height):r==="yAxis"&&(M=m==="left"&&!_||m==="right"&&_,O=u[j]-M*y.width,P=n.top);var F=wr(wr(wr({},y),H),{},{realScaleType:B,x:O,y:P,scale:D,width:r==="xAxis"?n.width:y.width,height:r==="yAxis"?n.height:y.height});return F.bandSize=Qp(F,H),!y.hide&&r==="xAxis"?u[j]+=(M?-1:1)*F.height:y.hide||(u[j]+=(M?-1:1)*F.width),wr(wr({},f),{},mh({},p,F))},{})},x$=function(e,t){var n=e.x,r=e.y,o=t.x,a=t.y;return{x:Math.min(n,o),y:Math.min(r,a),width:Math.abs(o-n),height:Math.abs(a-r)}},Kge=function(e){var t=e.x1,n=e.y1,r=e.x2,o=e.y2;return x$({x:t,y:n},{x:r,y:o})},w$=function(){function e(t){Hge(this,e),this.scale=t}return Wge(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.bandAware,o=n.position;if(t!==void 0){if(o)switch(o){case"start":return this.scale(t);case"middle":{var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+a}case"end":{var i=this.bandwidth?this.bandwidth():0;return this.scale(t)+i}default:return this.scale(t)}if(r){var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+s}return this.scale(t)}}},{key:"isInRange",value:function(t){var n=this.range(),r=n[0],o=n[n.length-1];return r<=o?t>=r&&t<=o:t>=o&&t<=r}}],[{key:"create",value:function(t){return new e(t)}}])}();mh(w$,"EPS",1e-4);var jj=function(e){var t=Object.keys(e).reduce(function(n,r){return wr(wr({},n),{},mh({},r,w$.create(e[r])))},{});return wr(wr({},t),{},{apply:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=r.bandAware,a=r.position;return wge(n,function(i,s){return t[s].apply(i,{bandAware:o,position:a})})},isInRange:function(n){return l$(n,function(r,o){return t[o].isInRange(r)})}})};function Xge(e){return(e%180+180)%180}var Qge=function(e){var t=e.width,n=e.height,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=Xge(r),a=o*Math.PI/180,i=Math.atan(n/t),s=a>i&&a<Math.PI-i?n/Math.sin(a):t/Math.cos(a);return Math.abs(s)},Ej,_$;function Jge(){if(_$)return Ej;_$=1;var e=kr(),t=fa(),n=rc();function r(o){return function(a,i,s){var c=Object(a);if(!t(a)){var l=e(i,3);a=n(a),i=function(d){return l(c[d],d,c)}}var u=o(a,i,s);return u>-1?c[l?a[u]:u]:void 0}}return Ej=r,Ej}var Sj,j$;function E$(){if(j$)return Sj;j$=1;var e=q6();function t(n){var r=e(n),o=r%1;return r===r?o?r-o:r:0}return Sj=t,Sj}var Cj,S$;function Gge(){if(S$)return Cj;S$=1;var e=b4(),t=kr(),n=E$(),r=Math.max;function o(a,i,s){var c=a==null?0:a.length;if(!c)return-1;var l=s==null?0:n(s);return l<0&&(l=r(c+l,0)),e(a,t(i,3),l)}return Cj=o,Cj}var Oj,C$;function Zge(){if(C$)return Oj;C$=1;var e=Jge(),t=Gge(),n=e(t);return Oj=n,Oj}var eve=Zge();const tve=Xe(eve);var nve=jA(),rve=Xe(nve)(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),Mj=g.createContext(void 0),Nj=g.createContext(void 0),O$=g.createContext(void 0),M$=g.createContext({}),N$=g.createContext(void 0),k$=g.createContext(0),P$=g.createContext(0),A$=function(e){var t=e.state,n=t.xAxisMap,r=t.yAxisMap,o=t.offset,a=e.clipPathId,i=e.children,s=e.width,c=e.height,l=rve(o);return U.createElement(Mj.Provider,{value:n},U.createElement(Nj.Provider,{value:r},U.createElement(M$.Provider,{value:o},U.createElement(O$.Provider,{value:l},U.createElement(N$.Provider,{value:a},U.createElement(k$.Provider,{value:c},U.createElement(P$.Provider,{value:s},i)))))))},ove=function(){return g.useContext(N$)},T$=function(e){var t=g.useContext(Mj);t==null&&qa();var n=t[e];return n==null&&qa(),n},ave=function(){var e=g.useContext(Mj);return ea(e)},ive=function(){var e=g.useContext(Nj),t=tve(e,function(n){return l$(n.domain,Number.isFinite)});return t||ea(e)},R$=function(e){var t=g.useContext(Nj);t==null&&qa();var n=t[e];return n==null&&qa(),n},sve=function(){var e=g.useContext(O$);return e},cve=function(){return g.useContext(M$)},kj=function(){return g.useContext(P$)},Pj=function(){return g.useContext(k$)};function Ts(e){"@babel/helpers - typeof";return Ts=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ts(e)}function lve(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function uve(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,F$(r.key),r)}}function dve(e,t,n){return t&&uve(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function fve(e,t,n){return t=yh(t),pve(e,I$()?Reflect.construct(t,n||[],yh(e).constructor):t.apply(e,n))}function pve(e,t){if(t&&(Ts(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return hve(e)}function hve(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function I$(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(I$=function(){return!!e})()}function yh(e){return yh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},yh(e)}function mve(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Aj(e,t)}function Aj(e,t){return Aj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Aj(e,t)}function D$(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function L$(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?D$(Object(n),!0).forEach(function(r){Tj(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D$(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Tj(e,t,n){return t=F$(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function F$(e){var t=yve(e,"string");return Ts(t)=="symbol"?t:t+""}function yve(e,t){if(Ts(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Ts(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function gve(e,t){return wve(e)||xve(e,t)||bve(e,t)||vve()}function vve(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bve(e,t){if(e){if(typeof e=="string")return B$(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return B$(e,t)}}function B$(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function xve(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,o,a,i,s=[],c=!0,l=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(c=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(u){l=!0,o=u}finally{try{if(!c&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return s}}function wve(e){if(Array.isArray(e))return e}function Rj(){return Rj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Rj.apply(this,arguments)}var _ve=function(e,t){var n;return U.isValidElement(e)?n=U.cloneElement(e,t):We(e)?n=e(t):n=U.createElement("line",Rj({},t,{className:"recharts-reference-line-line"})),n},jve=function(e,t,n,r,o,a,i,s,c){var l=o.x,u=o.y,d=o.width,f=o.height;if(n){var p=c.y,y=e.y.apply(p,{position:a});if(Vr(c,"discard")&&!e.y.isInRange(y))return null;var m=[{x:l+d,y},{x:l,y}];return s==="left"?m.reverse():m}if(t){var v=c.x,b=e.x.apply(v,{position:a});if(Vr(c,"discard")&&!e.x.isInRange(b))return null;var x=[{x:b,y:u+f},{x:b,y:u}];return i==="top"?x.reverse():x}if(r){var _=c.segment,w=_.map(function(j){return e.apply(j,{position:a})});return Vr(c,"discard")&&vge(w,function(j){return!e.isInRange(j)})?null:w}return null};function Eve(e){var t=e.x,n=e.y,r=e.segment,o=e.xAxisId,a=e.yAxisId,i=e.shape,s=e.className,c=e.alwaysShow,l=ove(),u=T$(o),d=R$(a),f=sve();if(!l||!f)return null;Eo(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var p=jj({x:u.scale,y:d.scale}),y=$t(t),m=$t(n),v=r&&r.length===2,b=jve(p,y,m,v,f,e.position,u.orientation,d.orientation,e);if(!b)return null;var x=gve(b,2),_=x[0],w=_.x,j=_.y,E=x[1],S=E.x,O=E.y,P=Vr(e,"hidden")?"url(#".concat(l,")"):void 0,M=L$(L$({clipPath:P},rt(e,!0)),{},{x1:w,y1:j,x2:S,y2:O});return U.createElement(Wt,{className:lt("recharts-reference-line",s)},_ve(i,M),nn.renderCallByParent(e,Kge({x1:w,y1:j,x2:S,y2:O})))}var Ij=function(e){function t(){return lve(this,t),fve(this,t,arguments)}return mve(t,e),dve(t,[{key:"render",value:function(){return U.createElement(Eve,this.props)}}])}(U.Component);Tj(Ij,"displayName","ReferenceLine"),Tj(Ij,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function Dj(){return Dj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Dj.apply(this,arguments)}function Rs(e){"@babel/helpers - typeof";return Rs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rs(e)}function $$(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function z$(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?$$(Object(n),!0).forEach(function(r){vh(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$$(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Sve(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Cve(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,U$(r.key),r)}}function Ove(e,t,n){return t&&Cve(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Mve(e,t,n){return t=gh(t),Nve(e,V$()?Reflect.construct(t,n||[],gh(e).constructor):t.apply(e,n))}function Nve(e,t){if(t&&(Rs(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kve(e)}function kve(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function V$(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(V$=function(){return!!e})()}function gh(e){return gh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},gh(e)}function Pve(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Lj(e,t)}function Lj(e,t){return Lj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Lj(e,t)}function vh(e,t,n){return t=U$(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function U$(e){var t=Ave(e,"string");return Rs(t)=="symbol"?t:t+""}function Ave(e,t){if(Rs(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Rs(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Tve=function(e){var t=e.x,n=e.y,r=e.xAxis,o=e.yAxis,a=jj({x:r.scale,y:o.scale}),i=a.apply({x:t,y:n},{bandAware:!0});return Vr(e,"discard")&&!a.isInRange(i)?null:i},bh=function(e){function t(){return Sve(this,t),Mve(this,t,arguments)}return Pve(t,e),Ove(t,[{key:"render",value:function(){var n=this.props,r=n.x,o=n.y,a=n.r,i=n.alwaysShow,s=n.clipPathId,c=$t(r),l=$t(o);if(Eo(i===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!c||!l)return null;var u=Tve(this.props);if(!u)return null;var d=u.x,f=u.y,p=this.props,y=p.shape,m=p.className,v=Vr(this.props,"hidden")?"url(#".concat(s,")"):void 0,b=z$(z$({clipPath:v},rt(this.props,!0)),{},{cx:d,cy:f});return U.createElement(Wt,{className:lt("recharts-reference-dot",m)},t.renderDot(y,b),nn.renderCallByParent(this.props,{x:d-a,y:f-a,width:2*a,height:2*a}))}}])}(U.Component);vh(bh,"displayName","ReferenceDot"),vh(bh,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1}),vh(bh,"renderDot",function(e,t){var n;return U.isValidElement(e)?n=U.cloneElement(e,t):We(e)?n=e(t):n=U.createElement(R6,Dj({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),n});function Fj(){return Fj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Fj.apply(this,arguments)}function Is(e){"@babel/helpers - typeof";return Is=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Is(e)}function H$(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function W$(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?H$(Object(n),!0).forEach(function(r){wh(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H$(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Rve(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ive(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Y$(r.key),r)}}function Dve(e,t,n){return t&&Ive(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Lve(e,t,n){return t=xh(t),Fve(e,q$()?Reflect.construct(t,n||[],xh(e).constructor):t.apply(e,n))}function Fve(e,t){if(t&&(Is(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Bve(e)}function Bve(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function q$(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(q$=function(){return!!e})()}function xh(e){return xh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},xh(e)}function $ve(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Bj(e,t)}function Bj(e,t){return Bj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Bj(e,t)}function wh(e,t,n){return t=Y$(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Y$(e){var t=zve(e,"string");return Is(t)=="symbol"?t:t+""}function zve(e,t){if(Is(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Is(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Vve=function(e,t,n,r,o){var a=o.x1,i=o.x2,s=o.y1,c=o.y2,l=o.xAxis,u=o.yAxis;if(!l||!u)return null;var d=jj({x:l.scale,y:u.scale}),f={x:e?d.x.apply(a,{position:"start"}):d.x.rangeMin,y:n?d.y.apply(s,{position:"start"}):d.y.rangeMin},p={x:t?d.x.apply(i,{position:"end"}):d.x.rangeMax,y:r?d.y.apply(c,{position:"end"}):d.y.rangeMax};return Vr(o,"discard")&&(!d.isInRange(f)||!d.isInRange(p))?null:x$(f,p)},_h=function(e){function t(){return Rve(this,t),Lve(this,t,arguments)}return $ve(t,e),Dve(t,[{key:"render",value:function(){var n=this.props,r=n.x1,o=n.x2,a=n.y1,i=n.y2,s=n.className,c=n.alwaysShow,l=n.clipPathId;Eo(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var u=$t(r),d=$t(o),f=$t(a),p=$t(i),y=this.props.shape;if(!u&&!d&&!f&&!p&&!y)return null;var m=Vve(u,d,f,p,this.props);if(!m&&!y)return null;var v=Vr(this.props,"hidden")?"url(#".concat(l,")"):void 0;return U.createElement(Wt,{className:lt("recharts-reference-area",s)},t.renderRect(y,W$(W$({clipPath:v},rt(this.props,!0)),m)),nn.renderCallByParent(this.props,m))}}])}(U.Component);wh(_h,"displayName","ReferenceArea"),wh(_h,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1}),wh(_h,"renderRect",function(e,t){var n;return U.isValidElement(e)?n=U.cloneElement(e,t):We(e)?n=e(t):n=U.createElement(oj,Fj({},t,{className:"recharts-reference-area-rect"})),n});function K$(e,t,n){if(t<1)return[];if(t===1&&n===void 0)return e;for(var r=[],o=0;o<e.length;o+=t)r.push(e[o]);return r}function Uve(e,t,n){var r={width:e.width+t.width,height:e.height+t.height};return Qge(r,n)}function Hve(e,t,n){var r=n==="width",o=e.x,a=e.y,i=e.width,s=e.height;return t===1?{start:r?o:a,end:r?o+i:a+s}:{start:r?o+i:a+s,end:r?o:a}}function jh(e,t,n,r,o){if(e*t<e*r||e*t>e*o)return!1;var a=n();return e*(t-e*a/2-r)>=0&&e*(t+e*a/2-o)<=0}function Wve(e,t){return K$(e,t+1)}function qve(e,t,n,r,o){for(var a=(r||[]).slice(),i=t.start,s=t.end,c=0,l=1,u=i,d=function(){var p=r==null?void 0:r[c];if(p===void 0)return{v:K$(r,l)};var y=c,m,v=function(){return m===void 0&&(m=n(p,y)),m},b=p.coordinate,x=c===0||jh(e,b,v,u,s);x||(c=0,u=i,l+=1),x&&(u=b+e*(v()/2+o),c+=l)},f;l<=a.length;)if(f=d(),f)return f.v;return[]}function ju(e){"@babel/helpers - typeof";return ju=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ju(e)}function X$(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function rn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?X$(Object(n),!0).forEach(function(r){Yve(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X$(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Yve(e,t,n){return t=Kve(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Kve(e){var t=Xve(e,"string");return ju(t)=="symbol"?t:t+""}function Xve(e,t){if(ju(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(ju(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Qve(e,t,n,r,o){for(var a=(r||[]).slice(),i=a.length,s=t.start,c=t.end,l=function(d){var f=a[d],p,y=function(){return p===void 0&&(p=n(f,d)),p};if(d===i-1){var m=e*(f.coordinate+e*y()/2-c);a[d]=f=rn(rn({},f),{},{tickCoord:m>0?f.coordinate-m*e:f.coordinate})}else a[d]=f=rn(rn({},f),{},{tickCoord:f.coordinate});var v=jh(e,f.tickCoord,y,s,c);v&&(c=f.tickCoord-e*(y()/2+o),a[d]=rn(rn({},f),{},{isShow:!0}))},u=i-1;u>=0;u--)l(u);return a}function Jve(e,t,n,r,o,a){var i=(r||[]).slice(),s=i.length,c=t.start,l=t.end;if(a){var u=r[s-1],d=n(u,s-1),f=e*(u.coordinate+e*d/2-l);i[s-1]=u=rn(rn({},u),{},{tickCoord:f>0?u.coordinate-f*e:u.coordinate});var p=jh(e,u.tickCoord,function(){return d},c,l);p&&(l=u.tickCoord-e*(d/2+o),i[s-1]=rn(rn({},u),{},{isShow:!0}))}for(var y=a?s-1:s,m=function(b){var x=i[b],_,w=function(){return _===void 0&&(_=n(x,b)),_};if(b===0){var j=e*(x.coordinate-e*w()/2-c);i[b]=x=rn(rn({},x),{},{tickCoord:j<0?x.coordinate-j*e:x.coordinate})}else i[b]=x=rn(rn({},x),{},{tickCoord:x.coordinate});var E=jh(e,x.tickCoord,w,c,l);E&&(c=x.tickCoord+e*(w()/2+o),i[b]=rn(rn({},x),{},{isShow:!0}))},v=0;v<y;v++)m(v);return i}function $j(e,t,n){var r=e.tick,o=e.ticks,a=e.viewBox,i=e.minTickGap,s=e.orientation,c=e.interval,l=e.tickFormatter,u=e.unit,d=e.angle;if(!o||!o.length||!r)return[];if(me(c)||ta.isSsr)return Wve(o,typeof c=="number"&&me(c)?c:0);var f=[],p=s==="top"||s==="bottom"?"width":"height",y=u&&p==="width"?Bl(u,{fontSize:t,letterSpacing:n}):{width:0,height:0},m=function(x,_){var w=We(l)?l(x.value,_):x.value;return p==="width"?Uve(Bl(w,{fontSize:t,letterSpacing:n}),y,d):Bl(w,{fontSize:t,letterSpacing:n})[p]},v=o.length>=2?gr(o[1].coordinate-o[0].coordinate):1,b=Hve(a,v,p);return c==="equidistantPreserveStart"?qve(v,b,m,o,i):(c==="preserveStart"||c==="preserveStartEnd"?f=Jve(v,b,m,o,i,c==="preserveStartEnd"):f=Qve(v,b,m,o,i),f.filter(function(x){return x.isShow}))}var Gve=["viewBox"],Zve=["viewBox"],e0e=["ticks"];function Ds(e){"@babel/helpers - typeof";return Ds=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ds(e)}function Ls(){return Ls=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ls.apply(this,arguments)}function Q$(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function vn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Q$(Object(n),!0).forEach(function(r){Uj(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q$(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function zj(e,t){if(e==null)return{};var n=t0e(e,t),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function t0e(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function n0e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function J$(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Z$(r.key),r)}}function r0e(e,t,n){return t&&J$(e.prototype,t),n&&J$(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function o0e(e,t,n){return t=Eh(t),a0e(e,G$()?Reflect.construct(t,n||[],Eh(e).constructor):t.apply(e,n))}function a0e(e,t){if(t&&(Ds(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return i0e(e)}function i0e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function G$(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(G$=function(){return!!e})()}function Eh(e){return Eh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Eh(e)}function s0e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Vj(e,t)}function Vj(e,t){return Vj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Vj(e,t)}function Uj(e,t,n){return t=Z$(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Z$(e){var t=c0e(e,"string");return Ds(t)=="symbol"?t:t+""}function c0e(e,t){if(Ds(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Ds(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Fs=function(e){function t(n){var r;return n0e(this,t),r=o0e(this,t,[n]),r.state={fontSize:"",letterSpacing:""},r}return s0e(t,e),r0e(t,[{key:"shouldComponentUpdate",value:function(n,r){var o=n.viewBox,a=zj(n,Gve),i=this.props,s=i.viewBox,c=zj(i,Zve);return!ds(o,s)||!ds(a,c)||!ds(r,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var r=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];r&&this.setState({fontSize:window.getComputedStyle(r).fontSize,letterSpacing:window.getComputedStyle(r).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var r=this.props,o=r.x,a=r.y,i=r.width,s=r.height,c=r.orientation,l=r.tickSize,u=r.mirror,d=r.tickMargin,f,p,y,m,v,b,x=u?-1:1,_=n.tickSize||l,w=me(n.tickCoord)?n.tickCoord:n.coordinate;switch(c){case"top":f=p=n.coordinate,m=a+ +!u*s,y=m-x*_,b=y-x*d,v=w;break;case"left":y=m=n.coordinate,p=o+ +!u*i,f=p-x*_,v=f-x*d,b=w;break;case"right":y=m=n.coordinate,p=o+ +u*i,f=p+x*_,v=f+x*d,b=w;break;default:f=p=n.coordinate,m=a+ +u*s,y=m+x*_,b=y+x*d,v=w;break}return{line:{x1:f,y1:y,x2:p,y2:m},tick:{x:v,y:b}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,r=n.orientation,o=n.mirror,a;switch(r){case"left":a=o?"start":"end";break;case"right":a=o?"end":"start";break;default:a="middle";break}return a}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,r=n.orientation,o=n.mirror,a="end";switch(r){case"left":case"right":a="middle";break;case"top":a=o?"start":"end";break;default:a=o?"end":"start";break}return a}},{key:"renderAxisLine",value:function(){var n=this.props,r=n.x,o=n.y,a=n.width,i=n.height,s=n.orientation,c=n.mirror,l=n.axisLine,u=vn(vn(vn({},rt(this.props,!1)),rt(l,!1)),{},{fill:"none"});if(s==="top"||s==="bottom"){var d=+(s==="top"&&!c||s==="bottom"&&c);u=vn(vn({},u),{},{x1:r,y1:o+d*i,x2:r+a,y2:o+d*i})}else{var f=+(s==="left"&&!c||s==="right"&&c);u=vn(vn({},u),{},{x1:r+f*a,y1:o,x2:r+f*a,y2:o+i})}return U.createElement("line",Ls({},u,{className:lt("recharts-cartesian-axis-line",qn(l,"className"))}))}},{key:"renderTicks",value:function(n,r,o){var a=this,i=this.props,s=i.tickLine,c=i.stroke,l=i.tick,u=i.tickFormatter,d=i.unit,f=$j(vn(vn({},this.props),{},{ticks:n}),r,o),p=this.getTickTextAnchor(),y=this.getTickVerticalAnchor(),m=rt(this.props,!1),v=rt(l,!1),b=vn(vn({},m),{},{fill:"none"},rt(s,!1)),x=f.map(function(_,w){var j=a.getTickLineCoord(_),E=j.line,S=j.tick,O=vn(vn(vn(vn({textAnchor:p,verticalAnchor:y},m),{},{stroke:"none",fill:c},v),S),{},{index:w,payload:_,visibleTicksCount:f.length,tickFormatter:u});return U.createElement(Wt,Ls({className:"recharts-cartesian-axis-tick",key:"tick-".concat(_.value,"-").concat(_.coordinate,"-").concat(_.tickCoord)},ap(a.props,_,w)),s&&U.createElement("line",Ls({},b,E,{className:lt("recharts-cartesian-axis-tick-line",qn(s,"className"))})),l&&t.renderTickItem(l,O,"".concat(We(u)?u(_.value,w):_.value).concat(d||"")))});return U.createElement("g",{className:"recharts-cartesian-axis-ticks"},x)}},{key:"render",value:function(){var n=this,r=this.props,o=r.axisLine,a=r.width,i=r.height,s=r.ticksGenerator,c=r.className,l=r.hide;if(l)return null;var u=this.props,d=u.ticks,f=zj(u,e0e),p=d;return We(s)&&(p=d&&d.length>0?s(this.props):s(f)),a<=0||i<=0||!p||!p.length?null:U.createElement(Wt,{className:lt("recharts-cartesian-axis",c),ref:function(y){n.layerReference=y}},o&&this.renderAxisLine(),this.renderTicks(p,this.state.fontSize,this.state.letterSpacing),nn.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(n,r,o){var a;return U.isValidElement(n)?a=U.cloneElement(n,r):We(n)?a=n(r):a=U.createElement(Sp,Ls({},r,{className:"recharts-cartesian-axis-tick-value"}),o),a}}])}(g.Component);Uj(Fs,"displayName","CartesianAxis"),Uj(Fs,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var l0e=["x1","y1","x2","y2","key"],u0e=["offset"];function Qa(e){"@babel/helpers - typeof";return Qa=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qa(e)}function e8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function on(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?e8(Object(n),!0).forEach(function(r){d0e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):e8(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function d0e(e,t,n){return t=f0e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f0e(e){var t=p0e(e,"string");return Qa(t)=="symbol"?t:t+""}function p0e(e,t){if(Qa(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Qa(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ja(){return Ja=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ja.apply(this,arguments)}function t8(e,t){if(e==null)return{};var n=h0e(e,t),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function h0e(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var m0e=function(e){var t=e.fill;if(!t||t==="none")return null;var n=e.fillOpacity,r=e.x,o=e.y,a=e.width,i=e.height,s=e.ry;return U.createElement("rect",{x:r,y:o,ry:s,width:a,height:i,stroke:"none",fill:t,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function n8(e,t){var n;if(U.isValidElement(e))n=U.cloneElement(e,t);else if(We(e))n=e(t);else{var r=t.x1,o=t.y1,a=t.x2,i=t.y2,s=t.key,c=t8(t,l0e),l=rt(c,!1);l.offset;var u=t8(l,u0e);n=U.createElement("line",Ja({},u,{x1:r,y1:o,x2:a,y2:i,fill:"none",key:s}))}return n}function y0e(e){var t=e.x,n=e.width,r=e.horizontal,o=r===void 0?!0:r,a=e.horizontalPoints;if(!o||!a||!a.length)return null;var i=a.map(function(s,c){var l=on(on({},e),{},{x1:t,y1:s,x2:t+n,y2:s,key:"line-".concat(c),index:c});return n8(o,l)});return U.createElement("g",{className:"recharts-cartesian-grid-horizontal"},i)}function g0e(e){var t=e.y,n=e.height,r=e.vertical,o=r===void 0?!0:r,a=e.verticalPoints;if(!o||!a||!a.length)return null;var i=a.map(function(s,c){var l=on(on({},e),{},{x1:s,y1:t,x2:s,y2:t+n,key:"line-".concat(c),index:c});return n8(o,l)});return U.createElement("g",{className:"recharts-cartesian-grid-vertical"},i)}function v0e(e){var t=e.horizontalFill,n=e.fillOpacity,r=e.x,o=e.y,a=e.width,i=e.height,s=e.horizontalPoints,c=e.horizontal,l=c===void 0?!0:c;if(!l||!t||!t.length)return null;var u=s.map(function(f){return Math.round(f+o-o)}).sort(function(f,p){return f-p});o!==u[0]&&u.unshift(0);var d=u.map(function(f,p){var y=!u[p+1],m=y?o+i-f:u[p+1]-f;if(m<=0)return null;var v=p%t.length;return U.createElement("rect",{key:"react-".concat(p),y:f,x:r,height:m,width:a,stroke:"none",fill:t[v],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return U.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function b0e(e){var t=e.vertical,n=t===void 0?!0:t,r=e.verticalFill,o=e.fillOpacity,a=e.x,i=e.y,s=e.width,c=e.height,l=e.verticalPoints;if(!n||!r||!r.length)return null;var u=l.map(function(f){return Math.round(f+a-a)}).sort(function(f,p){return f-p});a!==u[0]&&u.unshift(0);var d=u.map(function(f,p){var y=!u[p+1],m=y?a+s-f:u[p+1]-f;if(m<=0)return null;var v=p%r.length;return U.createElement("rect",{key:"react-".concat(p),x:f,y:i,width:m,height:c,stroke:"none",fill:r[v],fillOpacity:o,className:"recharts-cartesian-grid-bg"})});return U.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var x0e=function(e,t){var n=e.xAxis,r=e.width,o=e.height,a=e.offset;return NB($j(on(on(on({},Fs.defaultProps),n),{},{ticks:To(n,!0),viewBox:{x:0,y:0,width:r,height:o}})),a.left,a.left+a.width,t)},w0e=function(e,t){var n=e.yAxis,r=e.width,o=e.height,a=e.offset;return NB($j(on(on(on({},Fs.defaultProps),n),{},{ticks:To(n,!0),viewBox:{x:0,y:0,width:r,height:o}})),a.top,a.top+a.height,t)},Bs={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function r8(e){var t,n,r,o,a,i,s=kj(),c=Pj(),l=cve(),u=on(on({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:Bs.stroke,fill:(n=e.fill)!==null&&n!==void 0?n:Bs.fill,horizontal:(r=e.horizontal)!==null&&r!==void 0?r:Bs.horizontal,horizontalFill:(o=e.horizontalFill)!==null&&o!==void 0?o:Bs.horizontalFill,vertical:(a=e.vertical)!==null&&a!==void 0?a:Bs.vertical,verticalFill:(i=e.verticalFill)!==null&&i!==void 0?i:Bs.verticalFill,x:me(e.x)?e.x:l.left,y:me(e.y)?e.y:l.top,width:me(e.width)?e.width:l.width,height:me(e.height)?e.height:l.height}),d=u.x,f=u.y,p=u.width,y=u.height,m=u.syncWithTicks,v=u.horizontalValues,b=u.verticalValues,x=ave(),_=ive();if(!me(p)||p<=0||!me(y)||y<=0||!me(d)||d!==+d||!me(f)||f!==+f)return null;var w=u.verticalCoordinatesGenerator||x0e,j=u.horizontalCoordinatesGenerator||w0e,E=u.horizontalPoints,S=u.verticalPoints;if((!E||!E.length)&&We(j)){var O=v&&v.length,P=j({yAxis:_?on(on({},_),{},{ticks:O?v:_.ticks}):void 0,width:s,height:c,offset:l},O?!0:m);Eo(Array.isArray(P),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Qa(P),"]")),Array.isArray(P)&&(E=P)}if((!S||!S.length)&&We(w)){var M=b&&b.length,k=w({xAxis:x?on(on({},x),{},{ticks:M?b:x.ticks}):void 0,width:s,height:c,offset:l},M?!0:m);Eo(Array.isArray(k),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Qa(k),"]")),Array.isArray(k)&&(S=k)}return U.createElement("g",{className:"recharts-cartesian-grid"},U.createElement(m0e,{fill:u.fill,fillOpacity:u.fillOpacity,x:u.x,y:u.y,width:u.width,height:u.height,ry:u.ry}),U.createElement(y0e,Ja({},u,{offset:l,horizontalPoints:E,xAxis:x,yAxis:_})),U.createElement(g0e,Ja({},u,{offset:l,verticalPoints:S,xAxis:x,yAxis:_})),U.createElement(v0e,Ja({},u,{horizontalPoints:E})),U.createElement(b0e,Ja({},u,{verticalPoints:S})))}r8.displayName="CartesianGrid";function $s(e){"@babel/helpers - typeof";return $s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$s(e)}function _0e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function j0e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,i8(r.key),r)}}function E0e(e,t,n){return t&&j0e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function S0e(e,t,n){return t=Sh(t),C0e(e,o8()?Reflect.construct(t,n||[],Sh(e).constructor):t.apply(e,n))}function C0e(e,t){if(t&&($s(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return O0e(e)}function O0e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function o8(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(o8=function(){return!!e})()}function Sh(e){return Sh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Sh(e)}function M0e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Hj(e,t)}function Hj(e,t){return Hj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Hj(e,t)}function a8(e,t,n){return t=i8(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i8(e){var t=N0e(e,"string");return $s(t)=="symbol"?t:t+""}function N0e(e,t){if($s(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if($s(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Wj(){return Wj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Wj.apply(this,arguments)}function k0e(e){var t=e.xAxisId,n=kj(),r=Pj(),o=T$(t);return o==null?null:U.createElement(Fs,Wj({},o,{className:lt("recharts-".concat(o.axisType," ").concat(o.axisType),o.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(a){return To(a,!0)}}))}var Ch=function(e){function t(){return _0e(this,t),S0e(this,t,arguments)}return M0e(t,e),E0e(t,[{key:"render",value:function(){return U.createElement(k0e,this.props)}}])}(U.Component);a8(Ch,"displayName","XAxis"),a8(Ch,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function zs(e){"@babel/helpers - typeof";return zs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zs(e)}function P0e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function A0e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,l8(r.key),r)}}function T0e(e,t,n){return t&&A0e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function R0e(e,t,n){return t=Oh(t),I0e(e,s8()?Reflect.construct(t,n||[],Oh(e).constructor):t.apply(e,n))}function I0e(e,t){if(t&&(zs(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return D0e(e)}function D0e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s8(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(s8=function(){return!!e})()}function Oh(e){return Oh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Oh(e)}function L0e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qj(e,t)}function qj(e,t){return qj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},qj(e,t)}function c8(e,t,n){return t=l8(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l8(e){var t=F0e(e,"string");return zs(t)=="symbol"?t:t+""}function F0e(e,t){if(zs(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(zs(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Yj(){return Yj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Yj.apply(this,arguments)}var B0e=function(e){var t=e.yAxisId,n=kj(),r=Pj(),o=R$(t);return o==null?null:U.createElement(Fs,Yj({},o,{className:lt("recharts-".concat(o.axisType," ").concat(o.axisType),o.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(a){return To(a,!0)}}))},Kj=function(e){function t(){return P0e(this,t),R0e(this,t,arguments)}return L0e(t,e),T0e(t,[{key:"render",value:function(){return U.createElement(B0e,this.props)}}])}(U.Component);c8(Kj,"displayName","YAxis"),c8(Kj,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function u8(e){return U0e(e)||V0e(e)||z0e(e)||$0e()}function $0e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function z0e(e,t){if(e){if(typeof e=="string")return Xj(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Xj(e,t)}}function V0e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function U0e(e){if(Array.isArray(e))return Xj(e)}function Xj(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Qj=function(e,t,n,r,o){var a=vr(e,Ij),i=vr(e,bh),s=[].concat(u8(a),u8(i)),c=vr(e,_h),l="".concat(r,"Id"),u=r[0],d=t;if(s.length&&(d=s.reduce(function(y,m){if(m.props[l]===n&&Vr(m.props,"extendDomain")&&me(m.props[u])){var v=m.props[u];return[Math.min(y[0],v),Math.max(y[1],v)]}return y},d)),c.length){var f="".concat(u,"1"),p="".concat(u,"2");d=c.reduce(function(y,m){if(m.props[l]===n&&Vr(m.props,"extendDomain")&&me(m.props[f])&&me(m.props[p])){var v=m.props[f],b=m.props[p];return[Math.min(y[0],v,b),Math.max(y[1],v,b)]}return y},d)}return o&&o.length&&(d=o.reduce(function(y,m){return me(m)?[Math.min(y[0],m),Math.max(y[1],m)]:y},d)),d},d8={exports:{}},f8;function H0e(){return f8||(f8=1,function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function o(c,l,u){this.fn=c,this.context=l,this.once=u||!1}function a(c,l,u,d,f){if(typeof u!="function")throw new TypeError("The listener must be a function");var p=new o(u,d||c,f),y=n?n+l:l;return c._events[y]?c._events[y].fn?c._events[y]=[c._events[y],p]:c._events[y].push(p):(c._events[y]=p,c._eventsCount++),c}function i(c,l){--c._eventsCount===0?c._events=new r:delete c._events[l]}function s(){this._events=new r,this._eventsCount=0}s.prototype.eventNames=function(){var c=[],l,u;if(this._eventsCount===0)return c;for(u in l=this._events)t.call(l,u)&&c.push(n?u.slice(1):u);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(l)):c},s.prototype.listeners=function(c){var l=n?n+c:c,u=this._events[l];if(!u)return[];if(u.fn)return[u.fn];for(var d=0,f=u.length,p=new Array(f);d<f;d++)p[d]=u[d].fn;return p},s.prototype.listenerCount=function(c){var l=n?n+c:c,u=this._events[l];return u?u.fn?1:u.length:0},s.prototype.emit=function(c,l,u,d,f,p){var y=n?n+c:c;if(!this._events[y])return!1;var m=this._events[y],v=arguments.length,b,x;if(m.fn){switch(m.once&&this.removeListener(c,m.fn,void 0,!0),v){case 1:return m.fn.call(m.context),!0;case 2:return m.fn.call(m.context,l),!0;case 3:return m.fn.call(m.context,l,u),!0;case 4:return m.fn.call(m.context,l,u,d),!0;case 5:return m.fn.call(m.context,l,u,d,f),!0;case 6:return m.fn.call(m.context,l,u,d,f,p),!0}for(x=1,b=new Array(v-1);x<v;x++)b[x-1]=arguments[x];m.fn.apply(m.context,b)}else{var _=m.length,w;for(x=0;x<_;x++)switch(m[x].once&&this.removeListener(c,m[x].fn,void 0,!0),v){case 1:m[x].fn.call(m[x].context);break;case 2:m[x].fn.call(m[x].context,l);break;case 3:m[x].fn.call(m[x].context,l,u);break;case 4:m[x].fn.call(m[x].context,l,u,d);break;default:if(!b)for(w=1,b=new Array(v-1);w<v;w++)b[w-1]=arguments[w];m[x].fn.apply(m[x].context,b)}}return!0},s.prototype.on=function(c,l,u){return a(this,c,l,u,!1)},s.prototype.once=function(c,l,u){return a(this,c,l,u,!0)},s.prototype.removeListener=function(c,l,u,d){var f=n?n+c:c;if(!this._events[f])return this;if(!l)return i(this,f),this;var p=this._events[f];if(p.fn)p.fn===l&&(!d||p.once)&&(!u||p.context===u)&&i(this,f);else{for(var y=0,m=[],v=p.length;y<v;y++)(p[y].fn!==l||d&&!p[y].once||u&&p[y].context!==u)&&m.push(p[y]);m.length?this._events[f]=m.length===1?m[0]:m:i(this,f)}return this},s.prototype.removeAllListeners=function(c){var l;return c?(l=n?n+c:c,this._events[l]&&i(this,l)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,e.exports=s}(d8)),d8.exports}var W0e=H0e();const q0e=Xe(W0e);var Jj=new q0e,Gj="recharts.syncMouseEvents";function Eu(e){"@babel/helpers - typeof";return Eu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Eu(e)}function Y0e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function K0e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,p8(r.key),r)}}function X0e(e,t,n){return t&&K0e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Zj(e,t,n){return t=p8(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p8(e){var t=Q0e(e,"string");return Eu(t)=="symbol"?t:t+""}function Q0e(e,t){if(Eu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Eu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var J0e=function(){function e(){Y0e(this,e),Zj(this,"activeIndex",0),Zj(this,"coordinateList",[]),Zj(this,"layout","horizontal")}return X0e(e,[{key:"setDetails",value:function(t){var n,r=t.coordinateList,o=r===void 0?null:r,a=t.container,i=a===void 0?null:a,s=t.layout,c=s===void 0?null:s,l=t.offset,u=l===void 0?null:l,d=t.mouseHandlerCallback,f=d===void 0?null:d;this.coordinateList=(n=o??this.coordinateList)!==null&&n!==void 0?n:[],this.container=i??this.container,this.layout=c??this.layout,this.offset=u??this.offset,this.mouseHandlerCallback=f??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(t){if(this.coordinateList.length!==0)switch(t.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(t){this.activeIndex=t}},{key:"spoofMouse",value:function(){var t,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var r=this.container.getBoundingClientRect(),o=r.x,a=r.y,i=r.height,s=this.coordinateList[this.activeIndex].coordinate,c=((t=window)===null||t===void 0?void 0:t.scrollX)||0,l=((n=window)===null||n===void 0?void 0:n.scrollY)||0,u=o+s+c,d=a+this.offset.top+i/2+l;this.mouseHandlerCallback({pageX:u,pageY:d})}}}])}();function G0e(e,t,n){if(n==="number"&&t===!0&&Array.isArray(e)){var r=e==null?void 0:e[0],o=e==null?void 0:e[1];if(r&&o&&me(r)&&me(o))return!0}return!1}function Z0e(e,t,n,r){var o=r/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-o:n.left+.5,y:e==="horizontal"?n.top+.5:t.y-o,width:e==="horizontal"?r:n.width-1,height:e==="horizontal"?n.height-1:r}}function h8(e){var t=e.cx,n=e.cy,r=e.radius,o=e.startAngle,a=e.endAngle,i=Jt(t,n,r,o),s=Jt(t,n,r,a);return{points:[i,s],cx:t,cy:n,radius:r,startAngle:o,endAngle:a}}function ebe(e,t,n){var r,o,a,i;if(e==="horizontal")r=t.x,a=r,o=n.top,i=n.top+n.height;else if(e==="vertical")o=t.y,i=o,r=n.left,a=n.left+n.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var s=t.cx,c=t.cy,l=t.innerRadius,u=t.outerRadius,d=t.angle,f=Jt(s,c,l,d),p=Jt(s,c,u,d);r=f.x,o=f.y,a=p.x,i=p.y}else return h8(t);return[{x:r,y:o},{x:a,y:i}]}function Su(e){"@babel/helpers - typeof";return Su=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Su(e)}function m8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Mh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?m8(Object(n),!0).forEach(function(r){tbe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m8(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function tbe(e,t,n){return t=nbe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nbe(e){var t=rbe(e,"string");return Su(t)=="symbol"?t:t+""}function rbe(e,t){if(Su(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Su(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function obe(e){var t,n,r=e.element,o=e.tooltipEventType,a=e.isActive,i=e.activeCoordinate,s=e.activePayload,c=e.offset,l=e.activeTooltipIndex,u=e.tooltipAxisBandSize,d=e.layout,f=e.chartName,p=(t=r.props.cursor)!==null&&t!==void 0?t:(n=r.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!r||!p||!a||!i||f!=="ScatterChart"&&o!=="axis")return null;var y,m=ZB;if(f==="ScatterChart")y=i,m=xye;else if(f==="BarChart")y=Z0e(d,i,c,u),m=oj;else if(d==="radial"){var v=h8(i),b=v.cx,x=v.cy,_=v.radius,w=v.startAngle,j=v.endAngle;y={cx:b,cy:x,startAngle:w,endAngle:j,innerRadius:_,outerRadius:_},m=XB}else y={points:ebe(d,i,c)},m=ZB;var E=Mh(Mh(Mh(Mh({stroke:"#ccc",pointerEvents:"none"},c),y),rt(p,!1)),{},{payload:s,payloadIndex:l,className:lt("recharts-tooltip-cursor",p.className)});return g.isValidElement(p)?g.cloneElement(p,E):g.createElement(m,E)}var abe=["item"],ibe=["children","className","width","height","style","compact","title","desc"];function Vs(e){"@babel/helpers - typeof";return Vs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vs(e)}function Us(){return Us=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Us.apply(this,arguments)}function y8(e,t){return lbe(e)||cbe(e,t)||b8(e,t)||sbe()}function sbe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cbe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,o,a,i,s=[],c=!0,l=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(c=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(u){l=!0,o=u}finally{try{if(!c&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return s}}function lbe(e){if(Array.isArray(e))return e}function g8(e,t){if(e==null)return{};var n=ube(e,t),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function ube(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function dbe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fbe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,w8(r.key),r)}}function pbe(e,t,n){return t&&fbe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function hbe(e,t,n){return t=Nh(t),mbe(e,v8()?Reflect.construct(t,n||[],Nh(e).constructor):t.apply(e,n))}function mbe(e,t){if(t&&(Vs(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ybe(e)}function ybe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v8(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(v8=function(){return!!e})()}function Nh(e){return Nh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Nh(e)}function gbe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&eE(e,t)}function eE(e,t){return eE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},eE(e,t)}function Hs(e){return xbe(e)||bbe(e)||b8(e)||vbe()}function vbe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function b8(e,t){if(e){if(typeof e=="string")return tE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tE(e,t)}}function bbe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function xbe(e){if(Array.isArray(e))return tE(e)}function tE(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function x8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function ae(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?x8(Object(n),!0).forEach(function(r){Re(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x8(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Re(e,t,n){return t=w8(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w8(e){var t=wbe(e,"string");return Vs(t)=="symbol"?t:t+""}function wbe(e,t){if(Vs(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Vs(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _be={xAxis:["bottom","top"],yAxis:["left","right"]},jbe={width:"100%",height:"100%"},_8={x:0,y:0};function kh(e){return e}var Ebe=function(e,t){return t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius},Sbe=function(e,t,n,r){var o=t.find(function(l){return l&&l.index===n});if(o){if(e==="horizontal")return{x:o.coordinate,y:r.y};if(e==="vertical")return{x:r.x,y:o.coordinate};if(e==="centric"){var a=o.coordinate,i=r.radius;return ae(ae(ae({},r),Jt(r.cx,r.cy,i,a)),{},{angle:a,radius:i})}var s=o.coordinate,c=r.angle;return ae(ae(ae({},r),Jt(r.cx,r.cy,s,c)),{},{angle:c,radius:s})}return _8},Ph=function(e,t){var n=t.graphicalItems,r=t.dataStartIndex,o=t.dataEndIndex,a=(n??[]).reduce(function(i,s){var c=s.props.data;return c&&c.length?[].concat(Hs(i),Hs(c)):i},[]);return a.length>0?a:e&&e.length&&me(r)&&me(o)?e.slice(r,o+1):[]};function j8(e){return e==="number"?[0,"auto"]:void 0}var nE=function(e,t,n,r){var o=e.graphicalItems,a=e.tooltipAxis,i=Ph(t,e);return n<0||!o||!o.length||n>=i.length?null:o.reduce(function(s,c){var l,u=(l=c.props.data)!==null&&l!==void 0?l:t;u&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=n&&(u=u.slice(e.dataStartIndex,e.dataEndIndex+1));var d;if(a.dataKey&&!a.allowDuplicatedCategory){var f=u===void 0?i:u;d=gw(f,a.dataKey,r)}else d=u&&u[n]||i[n];return d?[].concat(Hs(s),[DB(c,d)]):s},[])},E8=function(e,t,n,r){var o=r||{x:e.chartX,y:e.chartY},a=Ebe(o,n),i=e.orderedTooltipTicks,s=e.tooltipAxis,c=e.tooltipTicks,l=mpe(a,i,c,s);if(l>=0&&c){var u=c[l]&&c[l].value,d=nE(e,t,l,u),f=Sbe(n,i,l,o);return{activeTooltipIndex:l,activeLabel:u,activePayload:d,activeCoordinate:f}}return null},Cbe=function(e,t){var n=t.axes,r=t.graphicalItems,o=t.axisType,a=t.axisIdKey,i=t.stackGroups,s=t.dataStartIndex,c=t.dataEndIndex,l=e.layout,u=e.children,d=e.stackOffset,f=MB(l,o);return n.reduce(function(p,y){var m,v=y.type.defaultProps!==void 0?ae(ae({},y.type.defaultProps),y.props):y.props,b=v.type,x=v.dataKey,_=v.allowDataOverflow,w=v.allowDuplicatedCategory,j=v.scale,E=v.ticks,S=v.includeHidden,O=v[a];if(p[O])return p;var P=Ph(e.data,{graphicalItems:r.filter(function(H){var F,z=a in H.props?H.props[a]:(F=H.type.defaultProps)===null||F===void 0?void 0:F[a];return z===O}),dataStartIndex:s,dataEndIndex:c}),M=P.length,k,R,A;G0e(v.domain,_,b)&&(k=$_(v.domain,null,_),f&&(b==="number"||j!=="auto")&&(A=Kp(P,x,"category")));var C=j8(b);if(!k||k.length===0){var N,T=(N=v.domain)!==null&&N!==void 0?N:C;if(x){if(k=Kp(P,x,b),b==="category"&&f){var I=Sie(k);w&&I?(R=k,k=uh(0,M)):w||(k=IB(T,k,y).reduce(function(H,F){return H.indexOf(F)>=0?H:[].concat(Hs(H),[F])},[]))}else if(b==="category")w?k=k.filter(function(H){return H!==""&&!at(H)}):k=IB(T,k,y).reduce(function(H,F){return H.indexOf(F)>=0||F===""||at(F)?H:[].concat(Hs(H),[F])},[]);else if(b==="number"){var L=xpe(P,r.filter(function(H){var F,z,G=a in H.props?H.props[a]:(F=H.type.defaultProps)===null||F===void 0?void 0:F[a],Q="hide"in H.props?H.props.hide:(z=H.type.defaultProps)===null||z===void 0?void 0:z.hide;return G===O&&(S||!Q)}),x,o,l);L&&(k=L)}f&&(b==="number"||j!=="auto")&&(A=Kp(P,x,"category"))}else f?k=uh(0,M):i&&i[O]&&i[O].hasStack&&b==="number"?k=d==="expand"?[0,1]:AB(i[O].stackGroups,s,c):k=OB(P,r.filter(function(H){var F=a in H.props?H.props[a]:H.type.defaultProps[a],z="hide"in H.props?H.props.hide:H.type.defaultProps.hide;return F===O&&(S||!z)}),b,l,!0);if(b==="number")k=Qj(u,k,O,o,E),T&&(k=$_(T,k,_));else if(b==="category"&&T){var D=T,B=k.every(function(H){return D.indexOf(H)>=0});B&&(k=D)}}return ae(ae({},p),{},Re({},O,ae(ae({},v),{},{axisType:o,domain:k,categoricalDomain:A,duplicateDomain:R,originalDomain:(m=v.domain)!==null&&m!==void 0?m:C,isCategorical:f,layout:l})))},{})},Obe=function(e,t){var n=t.graphicalItems,r=t.Axis,o=t.axisType,a=t.axisIdKey,i=t.stackGroups,s=t.dataStartIndex,c=t.dataEndIndex,l=e.layout,u=e.children,d=Ph(e.data,{graphicalItems:n,dataStartIndex:s,dataEndIndex:c}),f=d.length,p=MB(l,o),y=-1;return n.reduce(function(m,v){var b=v.type.defaultProps!==void 0?ae(ae({},v.type.defaultProps),v.props):v.props,x=b[a],_=j8("number");if(!m[x]){y++;var w;return p?w=uh(0,f):i&&i[x]&&i[x].hasStack?(w=AB(i[x].stackGroups,s,c),w=Qj(u,w,x,o)):(w=$_(_,OB(d,n.filter(function(j){var E,S,O=a in j.props?j.props[a]:(E=j.type.defaultProps)===null||E===void 0?void 0:E[a],P="hide"in j.props?j.props.hide:(S=j.type.defaultProps)===null||S===void 0?void 0:S.hide;return O===x&&!P}),"number",l),r.defaultProps.allowDataOverflow),w=Qj(u,w,x,o)),ae(ae({},m),{},Re({},x,ae(ae({axisType:o},r.defaultProps),{},{hide:!0,orientation:qn(_be,"".concat(o,".").concat(y%2),null),domain:w,originalDomain:_,isCategorical:p,layout:l})))}return m},{})},Mbe=function(e,t){var n=t.axisType,r=n===void 0?"xAxis":n,o=t.AxisComp,a=t.graphicalItems,i=t.stackGroups,s=t.dataStartIndex,c=t.dataEndIndex,l=e.children,u="".concat(r,"Id"),d=vr(l,o),f={};return d&&d.length?f=Cbe(e,{axes:d,graphicalItems:a,axisType:r,axisIdKey:u,stackGroups:i,dataStartIndex:s,dataEndIndex:c}):a&&a.length&&(f=Obe(e,{Axis:o,graphicalItems:a,axisType:r,axisIdKey:u,stackGroups:i,dataStartIndex:s,dataEndIndex:c})),f},Nbe=function(e){var t=ea(e),n=To(t,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:M1(n,function(r){return r.coordinate}),tooltipAxis:t,tooltipAxisBandSize:Qp(t,n)}},S8=function(e){var t=e.children,n=e.defaultShowTooltip,r=Bn(t,Ps),o=0,a=0;return e.data&&e.data.length!==0&&(a=e.data.length-1),r&&r.props&&(r.props.startIndex>=0&&(o=r.props.startIndex),r.props.endIndex>=0&&(a=r.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:o,dataEndIndex:a,activeTooltipIndex:-1,isTooltipActive:!!n}},kbe=function(e){return!e||!e.length?!1:e.some(function(t){var n=jo(t&&t.type);return n&&n.indexOf("Bar")>=0})},C8=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},Pbe=function(e,t){var n=e.props,r=e.graphicalItems,o=e.xAxisMap,a=o===void 0?{}:o,i=e.yAxisMap,s=i===void 0?{}:i,c=n.width,l=n.height,u=n.children,d=n.margin||{},f=Bn(u,Ps),p=Bn(u,ms),y=Object.keys(s).reduce(function(w,j){var E=s[j],S=E.orientation;return!E.mirror&&!E.hide?ae(ae({},w),{},Re({},S,w[S]+E.width)):w},{left:d.left||0,right:d.right||0}),m=Object.keys(a).reduce(function(w,j){var E=a[j],S=E.orientation;return!E.mirror&&!E.hide?ae(ae({},w),{},Re({},S,qn(w,"".concat(S))+E.height)):w},{top:d.top||0,bottom:d.bottom||0}),v=ae(ae({},m),y),b=v.bottom;f&&(v.bottom+=f.props.height||Ps.defaultProps.height),p&&t&&(v=vpe(v,r,n,t));var x=c-v.left-v.right,_=l-v.top-v.bottom;return ae(ae({brushBottom:b},v),{},{width:Math.max(x,0),height:Math.max(_,0)})},Abe=function(e,t){if(t==="xAxis")return e[t].width;if(t==="yAxis")return e[t].height},Tbe=function(e){var t=e.chartName,n=e.GraphicalChild,r=e.defaultTooltipEventType,o=r===void 0?"axis":r,a=e.validateTooltipEventTypes,i=a===void 0?["axis"]:a,s=e.axisComponents,c=e.legendContent,l=e.formatAxisMap,u=e.defaultProps,d=function(m,v){var b=v.graphicalItems,x=v.stackGroups,_=v.offset,w=v.updateId,j=v.dataStartIndex,E=v.dataEndIndex,S=m.barSize,O=m.layout,P=m.barGap,M=m.barCategoryGap,k=m.maxBarSize,R=C8(O),A=R.numericAxisName,C=R.cateAxisName,N=kbe(b),T=[];return b.forEach(function(I,L){var D=Ph(m.data,{graphicalItems:[I],dataStartIndex:j,dataEndIndex:E}),B=I.type.defaultProps!==void 0?ae(ae({},I.type.defaultProps),I.props):I.props,H=B.dataKey,F=B.maxBarSize,z=B["".concat(A,"Id")],G=B["".concat(C,"Id")],Q={},oe=s.reduce(function(ze,st){var He=v["".concat(st.axisType,"Map")],ct=B["".concat(st.axisType,"Id")];He&&He[ct]||st.axisType==="zAxis"||qa();var Ut=He[ct];return ae(ae({},ze),{},Re(Re({},st.axisType,Ut),"".concat(st.axisType,"Ticks"),To(Ut)))},Q),Z=oe[C],q=oe["".concat(C,"Ticks")],W=x&&x[z]&&x[z].hasStack&&Ape(I,x[z].stackGroups),J=jo(I.type).indexOf("Bar")>=0,te=Qp(Z,q),$=[],se=N&&ype({barSize:S,stackGroups:x,totalSize:Abe(oe,C)});if(J){var le,ve,Te=at(F)?k:F,qe=(le=(ve=Qp(Z,q,!0))!==null&&ve!==void 0?ve:Te)!==null&&le!==void 0?le:0;$=gpe({barGap:P,barCategoryGap:M,bandSize:qe!==te?qe:te,sizeList:se[G],maxBarSize:Te}),qe!==te&&($=$.map(function(ze){return ae(ae({},ze),{},{position:ae(ae({},ze.position),{},{offset:ze.position.offset-qe/2})})}))}var Ye=I&&I.type&&I.type.getComposedData;Ye&&T.push({props:ae(ae({},Ye(ae(ae({},oe),{},{displayedData:D,props:m,dataKey:H,item:I,bandSize:te,barPosition:$,offset:_,stackedData:W,layout:O,dataStartIndex:j,dataEndIndex:E}))),{},Re(Re(Re({key:I.key||"item-".concat(L)},A,oe[A]),C,oe[C]),"animationId",w)),childIndex:Die(I,m.children),item:I})}),T},f=function(m,v){var b=m.props,x=m.dataStartIndex,_=m.dataEndIndex,w=m.updateId;if(!R5({props:b}))return null;var j=b.children,E=b.layout,S=b.stackOffset,O=b.data,P=b.reverseStackOrder,M=C8(E),k=M.numericAxisName,R=M.cateAxisName,A=vr(j,n),C=Npe(O,A,"".concat(k,"Id"),"".concat(R,"Id"),S,P),N=s.reduce(function(B,H){var F="".concat(H.axisType,"Map");return ae(ae({},B),{},Re({},F,Mbe(b,ae(ae({},H),{},{graphicalItems:A,stackGroups:H.axisType===k&&C,dataStartIndex:x,dataEndIndex:_}))))},{}),T=Pbe(ae(ae({},N),{},{props:b,graphicalItems:A}),v==null?void 0:v.legendBBox);Object.keys(N).forEach(function(B){N[B]=l(b,N[B],T,B.replace("Map",""),t)});var I=N["".concat(R,"Map")],L=Nbe(I),D=d(b,ae(ae({},N),{},{dataStartIndex:x,dataEndIndex:_,updateId:w,graphicalItems:A,stackGroups:C,offset:T}));return ae(ae({formattedGraphicalItems:D,graphicalItems:A,offset:T,stackGroups:C},L),N)},p=function(m){function v(b){var x,_,w;return dbe(this,v),w=hbe(this,v,[b]),Re(w,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Re(w,"accessibilityManager",new J0e),Re(w,"handleLegendBBoxUpdate",function(j){if(j){var E=w.state,S=E.dataStartIndex,O=E.dataEndIndex,P=E.updateId;w.setState(ae({legendBBox:j},f({props:w.props,dataStartIndex:S,dataEndIndex:O,updateId:P},ae(ae({},w.state),{},{legendBBox:j}))))}}),Re(w,"handleReceiveSyncEvent",function(j,E,S){if(w.props.syncId===j){if(S===w.eventEmitterSymbol&&typeof w.props.syncMethod!="function")return;w.applySyncEvent(E)}}),Re(w,"handleBrushChange",function(j){var E=j.startIndex,S=j.endIndex;if(E!==w.state.dataStartIndex||S!==w.state.dataEndIndex){var O=w.state.updateId;w.setState(function(){return ae({dataStartIndex:E,dataEndIndex:S},f({props:w.props,dataStartIndex:E,dataEndIndex:S,updateId:O},w.state))}),w.triggerSyncEvent({dataStartIndex:E,dataEndIndex:S})}}),Re(w,"handleMouseEnter",function(j){var E=w.getMouseInfo(j);if(E){var S=ae(ae({},E),{},{isTooltipActive:!0});w.setState(S),w.triggerSyncEvent(S);var O=w.props.onMouseEnter;We(O)&&O(S,j)}}),Re(w,"triggeredAfterMouseMove",function(j){var E=w.getMouseInfo(j),S=E?ae(ae({},E),{},{isTooltipActive:!0}):{isTooltipActive:!1};w.setState(S),w.triggerSyncEvent(S);var O=w.props.onMouseMove;We(O)&&O(S,j)}),Re(w,"handleItemMouseEnter",function(j){w.setState(function(){return{isTooltipActive:!0,activeItem:j,activePayload:j.tooltipPayload,activeCoordinate:j.tooltipPosition||{x:j.cx,y:j.cy}}})}),Re(w,"handleItemMouseLeave",function(){w.setState(function(){return{isTooltipActive:!1}})}),Re(w,"handleMouseMove",function(j){j.persist(),w.throttleTriggeredAfterMouseMove(j)}),Re(w,"handleMouseLeave",function(j){w.throttleTriggeredAfterMouseMove.cancel();var E={isTooltipActive:!1};w.setState(E),w.triggerSyncEvent(E);var S=w.props.onMouseLeave;We(S)&&S(E,j)}),Re(w,"handleOuterEvent",function(j){var E=Iie(j),S=qn(w.props,"".concat(E));if(E&&We(S)){var O,P;/.*touch.*/i.test(E)?P=w.getMouseInfo(j.changedTouches[0]):P=w.getMouseInfo(j),S((O=P)!==null&&O!==void 0?O:{},j)}}),Re(w,"handleClick",function(j){var E=w.getMouseInfo(j);if(E){var S=ae(ae({},E),{},{isTooltipActive:!0});w.setState(S),w.triggerSyncEvent(S);var O=w.props.onClick;We(O)&&O(S,j)}}),Re(w,"handleMouseDown",function(j){var E=w.props.onMouseDown;if(We(E)){var S=w.getMouseInfo(j);E(S,j)}}),Re(w,"handleMouseUp",function(j){var E=w.props.onMouseUp;if(We(E)){var S=w.getMouseInfo(j);E(S,j)}}),Re(w,"handleTouchMove",function(j){j.changedTouches!=null&&j.changedTouches.length>0&&w.throttleTriggeredAfterMouseMove(j.changedTouches[0])}),Re(w,"handleTouchStart",function(j){j.changedTouches!=null&&j.changedTouches.length>0&&w.handleMouseDown(j.changedTouches[0])}),Re(w,"handleTouchEnd",function(j){j.changedTouches!=null&&j.changedTouches.length>0&&w.handleMouseUp(j.changedTouches[0])}),Re(w,"triggerSyncEvent",function(j){w.props.syncId!==void 0&&Jj.emit(Gj,w.props.syncId,j,w.eventEmitterSymbol)}),Re(w,"applySyncEvent",function(j){var E=w.props,S=E.layout,O=E.syncMethod,P=w.state.updateId,M=j.dataStartIndex,k=j.dataEndIndex;if(j.dataStartIndex!==void 0||j.dataEndIndex!==void 0)w.setState(ae({dataStartIndex:M,dataEndIndex:k},f({props:w.props,dataStartIndex:M,dataEndIndex:k,updateId:P},w.state)));else if(j.activeTooltipIndex!==void 0){var R=j.chartX,A=j.chartY,C=j.activeTooltipIndex,N=w.state,T=N.offset,I=N.tooltipTicks;if(!T)return;if(typeof O=="function")C=O(I,j);else if(O==="value"){C=-1;for(var L=0;L<I.length;L++)if(I[L].value===j.activeLabel){C=L;break}}var D=ae(ae({},T),{},{x:T.left,y:T.top}),B=Math.min(R,D.x+D.width),H=Math.min(A,D.y+D.height),F=I[C]&&I[C].value,z=nE(w.state,w.props.data,C),G=I[C]?{x:S==="horizontal"?I[C].coordinate:B,y:S==="horizontal"?H:I[C].coordinate}:_8;w.setState(ae(ae({},j),{},{activeLabel:F,activeCoordinate:G,activePayload:z,activeTooltipIndex:C}))}else w.setState(j)}),Re(w,"renderCursor",function(j){var E,S=w.state,O=S.isTooltipActive,P=S.activeCoordinate,M=S.activePayload,k=S.offset,R=S.activeTooltipIndex,A=S.tooltipAxisBandSize,C=w.getTooltipEventType(),N=(E=j.props.active)!==null&&E!==void 0?E:O,T=w.props.layout,I=j.key||"_recharts-cursor";return U.createElement(obe,{key:I,activeCoordinate:P,activePayload:M,activeTooltipIndex:R,chartName:t,element:j,isActive:N,layout:T,offset:k,tooltipAxisBandSize:A,tooltipEventType:C})}),Re(w,"renderPolarAxis",function(j,E,S){var O=qn(j,"type.axisType"),P=qn(w.state,"".concat(O,"Map")),M=j.type.defaultProps,k=M!==void 0?ae(ae({},M),j.props):j.props,R=P&&P[k["".concat(O,"Id")]];return g.cloneElement(j,ae(ae({},R),{},{className:lt(O,R.className),key:j.key||"".concat(E,"-").concat(S),ticks:To(R,!0)}))}),Re(w,"renderPolarGrid",function(j){var E=j.props,S=E.radialLines,O=E.polarAngles,P=E.polarRadius,M=w.state,k=M.radiusAxisMap,R=M.angleAxisMap,A=ea(k),C=ea(R),N=C.cx,T=C.cy,I=C.innerRadius,L=C.outerRadius;return g.cloneElement(j,{polarAngles:Array.isArray(O)?O:To(C,!0).map(function(D){return D.coordinate}),polarRadius:Array.isArray(P)?P:To(A,!0).map(function(D){return D.coordinate}),cx:N,cy:T,innerRadius:I,outerRadius:L,key:j.key||"polar-grid",radialLines:S})}),Re(w,"renderLegend",function(){var j=w.state.formattedGraphicalItems,E=w.props,S=E.children,O=E.width,P=E.height,M=w.props.margin||{},k=O-(M.left||0)-(M.right||0),R=jB({children:S,formattedGraphicalItems:j,legendWidth:k,legendContent:c});if(!R)return null;var A=R.item,C=g8(R,abe);return g.cloneElement(A,ae(ae({},C),{},{chartWidth:O,chartHeight:P,margin:M,onBBoxUpdate:w.handleLegendBBoxUpdate}))}),Re(w,"renderTooltip",function(){var j,E=w.props,S=E.children,O=E.accessibilityLayer,P=Bn(S,Fr);if(!P)return null;var M=w.state,k=M.isTooltipActive,R=M.activeCoordinate,A=M.activePayload,C=M.activeLabel,N=M.offset,T=(j=P.props.active)!==null&&j!==void 0?j:k;return g.cloneElement(P,{viewBox:ae(ae({},N),{},{x:N.left,y:N.top}),active:T,label:C,payload:T?A:[],coordinate:R,accessibilityLayer:O})}),Re(w,"renderBrush",function(j){var E=w.props,S=E.margin,O=E.data,P=w.state,M=P.offset,k=P.dataStartIndex,R=P.dataEndIndex,A=P.updateId;return g.cloneElement(j,{key:j.key||"_recharts-brush",onChange:Xp(w.handleBrushChange,j.props.onChange),data:O,x:me(j.props.x)?j.props.x:M.left,y:me(j.props.y)?j.props.y:M.top+M.height+M.brushBottom-(S.bottom||0),width:me(j.props.width)?j.props.width:M.width,startIndex:k,endIndex:R,updateId:"brush-".concat(A)})}),Re(w,"renderReferenceElement",function(j,E,S){if(!j)return null;var O=w,P=O.clipPathId,M=w.state,k=M.xAxisMap,R=M.yAxisMap,A=M.offset,C=j.type.defaultProps||{},N=j.props,T=N.xAxisId,I=T===void 0?C.xAxisId:T,L=N.yAxisId,D=L===void 0?C.yAxisId:L;return g.cloneElement(j,{key:j.key||"".concat(E,"-").concat(S),xAxis:k[I],yAxis:R[D],viewBox:{x:A.left,y:A.top,width:A.width,height:A.height},clipPathId:P})}),Re(w,"renderActivePoints",function(j){var E=j.item,S=j.activePoint,O=j.basePoint,P=j.childIndex,M=j.isRange,k=[],R=E.props.key,A=E.item.type.defaultProps!==void 0?ae(ae({},E.item.type.defaultProps),E.item.props):E.item.props,C=A.activeDot,N=A.dataKey,T=ae(ae({index:P,dataKey:N,cx:S.x,cy:S.y,r:4,fill:F_(E.item),strokeWidth:2,stroke:"#fff",payload:S.payload,value:S.value},rt(C,!1)),op(C));return k.push(v.renderActiveDot(C,T,"".concat(R,"-activePoint-").concat(P))),O?k.push(v.renderActiveDot(C,ae(ae({},T),{},{cx:O.x,cy:O.y}),"".concat(R,"-basePoint-").concat(P))):M&&k.push(null),k}),Re(w,"renderGraphicChild",function(j,E,S){var O=w.filterFormatItem(j,E,S);if(!O)return null;var P=w.getTooltipEventType(),M=w.state,k=M.isTooltipActive,R=M.tooltipAxis,A=M.activeTooltipIndex,C=M.activeLabel,N=w.props.children,T=Bn(N,Fr),I=O.props,L=I.points,D=I.isRange,B=I.baseLine,H=O.item.type.defaultProps!==void 0?ae(ae({},O.item.type.defaultProps),O.item.props):O.item.props,F=H.activeDot,z=H.hide,G=H.activeBar,Q=H.activeShape,oe=!!(!z&&k&&T&&(F||G||Q)),Z={};P!=="axis"&&T&&T.props.trigger==="click"?Z={onClick:Xp(w.handleItemMouseEnter,j.props.onClick)}:P!=="axis"&&(Z={onMouseLeave:Xp(w.handleItemMouseLeave,j.props.onMouseLeave),onMouseEnter:Xp(w.handleItemMouseEnter,j.props.onMouseEnter)});var q=g.cloneElement(j,ae(ae({},O.props),Z));function W(He){return typeof R.dataKey=="function"?R.dataKey(He.payload):null}if(oe)if(A>=0){var J,te;if(R.dataKey&&!R.allowDuplicatedCategory){var $=typeof R.dataKey=="function"?W:"payload.".concat(R.dataKey.toString());J=gw(L,$,C),te=D&&B&&gw(B,$,C)}else J=L==null?void 0:L[A],te=D&&B&&B[A];if(Q||G){var se=j.props.activeIndex!==void 0?j.props.activeIndex:A;return[g.cloneElement(j,ae(ae(ae({},O.props),Z),{},{activeIndex:se})),null,null]}if(!at(J))return[q].concat(Hs(w.renderActivePoints({item:O,activePoint:J,basePoint:te,childIndex:A,isRange:D})))}else{var le,ve=(le=w.getItemByXY(w.state.activeCoordinate))!==null&&le!==void 0?le:{graphicalItem:q},Te=ve.graphicalItem,qe=Te.item,Ye=qe===void 0?j:qe,ze=Te.childIndex,st=ae(ae(ae({},O.props),Z),{},{activeIndex:ze});return[g.cloneElement(Ye,st),null,null]}return D?[q,null,null]:[q,null]}),Re(w,"renderCustomized",function(j,E,S){return g.cloneElement(j,ae(ae({key:"recharts-customized-".concat(S)},w.props),w.state))}),Re(w,"renderMap",{CartesianGrid:{handler:kh,once:!0},ReferenceArea:{handler:w.renderReferenceElement},ReferenceLine:{handler:kh},ReferenceDot:{handler:w.renderReferenceElement},XAxis:{handler:kh},YAxis:{handler:kh},Brush:{handler:w.renderBrush,once:!0},Bar:{handler:w.renderGraphicChild},Line:{handler:w.renderGraphicChild},Area:{handler:w.renderGraphicChild},Radar:{handler:w.renderGraphicChild},RadialBar:{handler:w.renderGraphicChild},Scatter:{handler:w.renderGraphicChild},Pie:{handler:w.renderGraphicChild},Funnel:{handler:w.renderGraphicChild},Tooltip:{handler:w.renderCursor,once:!0},PolarGrid:{handler:w.renderPolarGrid,once:!0},PolarAngleAxis:{handler:w.renderPolarAxis},PolarRadiusAxis:{handler:w.renderPolarAxis},Customized:{handler:w.renderCustomized}}),w.clipPathId="".concat((x=b.id)!==null&&x!==void 0?x:rp("recharts"),"-clip"),w.throttleTriggeredAfterMouseMove=Wh(w.triggeredAfterMouseMove,(_=b.throttleDelay)!==null&&_!==void 0?_:1e3/60),w.state={},w}return gbe(v,m),pbe(v,[{key:"componentDidMount",value:function(){var b,x;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(b=this.props.margin.left)!==null&&b!==void 0?b:0,top:(x=this.props.margin.top)!==null&&x!==void 0?x:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var b=this.props,x=b.children,_=b.data,w=b.height,j=b.layout,E=Bn(x,Fr);if(E){var S=E.props.defaultIndex;if(!(typeof S!="number"||S<0||S>this.state.tooltipTicks.length-1)){var O=this.state.tooltipTicks[S]&&this.state.tooltipTicks[S].value,P=nE(this.state,_,S,O),M=this.state.tooltipTicks[S].coordinate,k=(this.state.offset.top+w)/2,R=j==="horizontal",A=R?{x:M,y:k}:{y:M,x:k},C=this.state.formattedGraphicalItems.find(function(T){var I=T.item;return I.type.name==="Scatter"});C&&(A=ae(ae({},A),C.props.points[S].tooltipPosition),P=C.props.points[S].tooltipPayload);var N={activeTooltipIndex:S,isTooltipActive:!0,activeLabel:O,activePayload:P,activeCoordinate:A};this.setState(N),this.renderCursor(E),this.accessibilityManager.setIndex(S)}}}},{key:"getSnapshotBeforeUpdate",value:function(b,x){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==x.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==b.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==b.margin){var _,w;this.accessibilityManager.setDetails({offset:{left:(_=this.props.margin.left)!==null&&_!==void 0?_:0,top:(w=this.props.margin.top)!==null&&w!==void 0?w:0}})}return null}},{key:"componentDidUpdate",value:function(b){jw([Bn(b.children,Fr)],[Bn(this.props.children,Fr)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var b=Bn(this.props.children,Fr);if(b&&typeof b.props.shared=="boolean"){var x=b.props.shared?"axis":"item";return i.indexOf(x)>=0?x:o}return o}},{key:"getMouseInfo",value:function(b){if(!this.container)return null;var x=this.container,_=x.getBoundingClientRect(),w=kle(_),j={chartX:Math.round(b.pageX-w.left),chartY:Math.round(b.pageY-w.top)},E=_.width/x.offsetWidth||1,S=this.inRange(j.chartX,j.chartY,E);if(!S)return null;var O=this.state,P=O.xAxisMap,M=O.yAxisMap,k=this.getTooltipEventType();if(k!=="axis"&&P&&M){var R=ea(P).scale,A=ea(M).scale,C=R&&R.invert?R.invert(j.chartX):null,N=A&&A.invert?A.invert(j.chartY):null;return ae(ae({},j),{},{xValue:C,yValue:N})}var T=E8(this.state,this.props.data,this.props.layout,S);return T?ae(ae({},j),T):null}},{key:"inRange",value:function(b,x){var _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,w=this.props.layout,j=b/_,E=x/_;if(w==="horizontal"||w==="vertical"){var S=this.state.offset,O=j>=S.left&&j<=S.left+S.width&&E>=S.top&&E<=S.top+S.height;return O?{x:j,y:E}:null}var P=this.state,M=P.angleAxisMap,k=P.radiusAxisMap;if(M&&k){var R=ea(M);return BB({x:j,y:E},R)}return null}},{key:"parseEventsOfWrapper",value:function(){var b=this.props.children,x=this.getTooltipEventType(),_=Bn(b,Fr),w={};_&&x==="axis"&&(_.props.trigger==="click"?w={onClick:this.handleClick}:w={onMouseEnter:this.handleMouseEnter,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd});var j=op(this.props,this.handleOuterEvent);return ae(ae({},j),w)}},{key:"addListener",value:function(){Jj.on(Gj,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){Jj.removeListener(Gj,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(b,x,_){for(var w=this.state.formattedGraphicalItems,j=0,E=w.length;j<E;j++){var S=w[j];if(S.item===b||S.props.key===b.key||x===jo(S.item.type)&&_===S.childIndex)return S}return null}},{key:"renderClipPath",value:function(){var b=this.clipPathId,x=this.state.offset,_=x.left,w=x.top,j=x.height,E=x.width;return U.createElement("defs",null,U.createElement("clipPath",{id:b},U.createElement("rect",{x:_,y:w,height:j,width:E})))}},{key:"getXScales",value:function(){var b=this.state.xAxisMap;return b?Object.entries(b).reduce(function(x,_){var w=y8(_,2),j=w[0],E=w[1];return ae(ae({},x),{},Re({},j,E.scale))},{}):null}},{key:"getYScales",value:function(){var b=this.state.yAxisMap;return b?Object.entries(b).reduce(function(x,_){var w=y8(_,2),j=w[0],E=w[1];return ae(ae({},x),{},Re({},j,E.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(b){var x;return(x=this.state.xAxisMap)===null||x===void 0||(x=x[b])===null||x===void 0?void 0:x.scale}},{key:"getYScaleByAxisId",value:function(b){var x;return(x=this.state.yAxisMap)===null||x===void 0||(x=x[b])===null||x===void 0?void 0:x.scale}},{key:"getItemByXY",value:function(b){var x=this.state,_=x.formattedGraphicalItems,w=x.activeItem;if(_&&_.length)for(var j=0,E=_.length;j<E;j++){var S=_[j],O=S.props,P=S.item,M=P.type.defaultProps!==void 0?ae(ae({},P.type.defaultProps),P.props):P.props,k=jo(P.type);if(k==="Bar"){var R=(O.data||[]).find(function(T){return uye(b,T)});if(R)return{graphicalItem:S,payload:R}}else if(k==="RadialBar"){var A=(O.data||[]).find(function(T){return BB(b,T)});if(A)return{graphicalItem:S,payload:A}}else if(ch(S,w)||lh(S,w)||vu(S,w)){var C=Gye({graphicalItem:S,activeTooltipItem:w,itemData:M.data}),N=M.activeIndex===void 0?C:M.activeIndex;return{graphicalItem:ae(ae({},S),{},{childIndex:N}),payload:vu(S,w)?M.data[C]:S.props.data[C]}}}return null}},{key:"render",value:function(){var b=this;if(!R5(this))return null;var x=this.props,_=x.children,w=x.className,j=x.width,E=x.height,S=x.style,O=x.compact,P=x.title,M=x.desc,k=g8(x,ibe),R=rt(k,!1);if(O)return U.createElement(A$,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},U.createElement(Sw,Us({},R,{width:j,height:E,title:P,desc:M}),this.renderClipPath(),D5(_,this.renderMap)));if(this.props.accessibilityLayer){var A,C;R.tabIndex=(A=this.props.tabIndex)!==null&&A!==void 0?A:0,R.role=(C=this.props.role)!==null&&C!==void 0?C:"application",R.onKeyDown=function(T){b.accessibilityManager.keyboardEvent(T)},R.onFocus=function(){b.accessibilityManager.focus()}}var N=this.parseEventsOfWrapper();return U.createElement(A$,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},U.createElement("div",Us({className:lt("recharts-wrapper",w),style:ae({position:"relative",cursor:"default",width:j,height:E},S)},N,{ref:function(T){b.container=T}}),U.createElement(Sw,Us({},R,{width:j,height:E,title:P,desc:M,style:jbe}),this.renderClipPath(),D5(_,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(g.Component);Re(p,"displayName",t),Re(p,"defaultProps",ae({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},u)),Re(p,"getDerivedStateFromProps",function(m,v){var b=m.dataKey,x=m.data,_=m.children,w=m.width,j=m.height,E=m.layout,S=m.stackOffset,O=m.margin,P=v.dataStartIndex,M=v.dataEndIndex;if(v.updateId===void 0){var k=S8(m);return ae(ae(ae({},k),{},{updateId:0},f(ae(ae({props:m},k),{},{updateId:0}),v)),{},{prevDataKey:b,prevData:x,prevWidth:w,prevHeight:j,prevLayout:E,prevStackOffset:S,prevMargin:O,prevChildren:_})}if(b!==v.prevDataKey||x!==v.prevData||w!==v.prevWidth||j!==v.prevHeight||E!==v.prevLayout||S!==v.prevStackOffset||!ds(O,v.prevMargin)){var R=S8(m),A={chartX:v.chartX,chartY:v.chartY,isTooltipActive:v.isTooltipActive},C=ae(ae({},E8(v,x,E)),{},{updateId:v.updateId+1}),N=ae(ae(ae({},R),A),C);return ae(ae(ae({},N),f(ae({props:m},N),v)),{},{prevDataKey:b,prevData:x,prevWidth:w,prevHeight:j,prevLayout:E,prevStackOffset:S,prevMargin:O,prevChildren:_})}if(!jw(_,v.prevChildren)){var T,I,L,D,B=Bn(_,Ps),H=B&&(T=(I=B.props)===null||I===void 0?void 0:I.startIndex)!==null&&T!==void 0?T:P,F=B&&(L=(D=B.props)===null||D===void 0?void 0:D.endIndex)!==null&&L!==void 0?L:M,z=H!==P||F!==M,G=!at(x),Q=G&&!z?v.updateId:v.updateId+1;return ae(ae({updateId:Q},f(ae(ae({props:m},v),{},{updateId:Q,dataStartIndex:H,dataEndIndex:F}),v)),{},{prevChildren:_,dataStartIndex:H,dataEndIndex:F})}return null}),Re(p,"renderActiveDot",function(m,v,b){var x;return g.isValidElement(m)?x=g.cloneElement(m,v):We(m)?x=m(v):x=U.createElement(R6,v),U.createElement(Wt,{className:"recharts-active-dot",key:b},x)});var y=g.forwardRef(function(m,v){return U.createElement(p,Us({},m,{ref:v}))});return y.displayName=p.displayName,y},Rbe=Tbe({chartName:"BarChart",GraphicalChild:Xa,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:Ch},{axisType:"yAxis",AxisComp:Kj}],formatAxisMap:Yge});const Ibe={light:"",dark:".dark"},O8=g.createContext(null);function M8(){const e=g.useContext(O8);if(!e)throw new Error("useChart must be used within a <ChartContainer />");return e}const N8=g.forwardRef(({id:e,className:t,children:n,config:r,...o},a)=>{const i=g.useId(),s=`chart-${e||i.replace(/:/g,"")}`;return h.jsx(O8.Provider,{value:{config:r},children:h.jsxs("div",{"data-chart":s,ref:a,className:K("flex aspect-video justify-center text-xs",t),...o,children:[h.jsx(Dbe,{id:s,config:r}),h.jsx(jle,{children:n})]})})});N8.displayName="Chart";const Dbe=({id:e,config:t})=>{const n=Object.entries(t).filter(([r,o])=>o.theme||o.color);return n.length?h.jsx("style",{dangerouslySetInnerHTML:{__html:Object.entries(Ibe).map(([r,o])=>`
${o} [data-chart=${e}] {
${n.map(([a,i])=>{var c;const s=((c=i.theme)==null?void 0:c[r])||i.color;return s?`  --color-${a}: ${s};`:null}).join(`
`)}
}
`).join(`
`)}}):null},Lbe=Fr,k8=g.forwardRef(({active:e,payload:t,className:n,indicator:r="dot",hideLabel:o=!1,hideIndicator:a=!1,label:i,labelFormatter:s,labelClassName:c,formatter:l,color:u,nameKey:d,labelKey:f},p)=>{const{config:y}=M8(),m=g.useMemo(()=>{var j;if(o||!(t!=null&&t.length))return null;const[b]=t,x=`${f||b.dataKey||b.name||"value"}`,_=rE(y,b,x),w=!f&&typeof i=="string"?((j=y[i])==null?void 0:j.label)||i:_==null?void 0:_.label;return s?h.jsx("div",{className:K("font-medium",c),children:s(w,t)}):w?h.jsx("div",{className:K("font-medium",c),children:w}):null},[i,s,t,o,c,y,f]);if(!e||!(t!=null&&t.length))return null;const v=t.length===1&&r!=="dot";return h.jsxs("div",{ref:p,className:K("grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl",n),children:[v?null:m,h.jsx("div",{className:"grid gap-1.5",children:t.map((b,x)=>{const _=`${d||b.name||b.dataKey||"value"}`,w=rE(y,b,_),j=u||b.payload.fill||b.color;return h.jsx("div",{className:K("flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground",r==="dot"&&"items-center"),children:l&&(b==null?void 0:b.value)!==void 0&&b.name?l(b.value,b.name,b,x,b.payload):h.jsxs(h.Fragment,{children:[w!=null&&w.icon?h.jsx(w.icon,{}):!a&&h.jsx("div",{className:K("shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]",{"h-2.5 w-2.5":r==="dot","w-1":r==="line","w-0 border-[1.5px] border-dashed bg-transparent":r==="dashed","my-0.5":v&&r==="dashed"}),style:{"--color-bg":j,"--color-border":j}}),h.jsxs("div",{className:K("flex flex-1 justify-between leading-none",v?"items-end":"items-center"),children:[h.jsxs("div",{className:"grid gap-1.5",children:[v?m:null,h.jsx("span",{className:"text-muted-foreground",children:(w==null?void 0:w.label)||b.name})]}),b.value&&h.jsx("span",{className:"font-mono font-medium tabular-nums text-foreground",children:b.value.toLocaleString()})]})]})},b.dataKey)})})]})});k8.displayName="ChartTooltip";const Fbe=g.forwardRef(({className:e,hideIcon:t=!1,payload:n,verticalAlign:r="bottom",nameKey:o},a)=>{const{config:i}=M8();return n!=null&&n.length?h.jsx("div",{ref:a,className:K("flex items-center justify-center gap-4",r==="top"?"pb-3":"pt-3",e),children:n.map(s=>{const c=`${o||s.dataKey||"value"}`,l=rE(i,s,c);return h.jsxs("div",{className:K("flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground"),children:[l!=null&&l.icon&&!t?h.jsx(l.icon,{}):h.jsx("div",{className:"h-2 w-2 shrink-0 rounded-[2px]",style:{backgroundColor:s.color}}),l==null?void 0:l.label]},s.value)})}):null});Fbe.displayName="ChartLegend";function rE(e,t,n){if(typeof t!="object"||t===null)return;const r="payload"in t&&typeof t.payload=="object"&&t.payload!==null?t.payload:void 0;let o=n;return n in t&&typeof t[n]=="string"?o=t[n]:r&&n in r&&typeof r[n]=="string"&&(o=r[n]),o in e?e[o]:e[n]}const P8=e=>{const t=["Bytes","KB","MB","GB","TB"];if(e===void 0)return"Unknown size";if(e===0)return"0 Byte";const n=Math.floor(Math.log(e)/Math.log(1024));return`${Math.round(e/Math.pow(1024,n))} ${t[n]}`},Bbe=g.memo(()=>{const{t:e}=ke("flows"),[t,n]=g.useState(),r=an(y=>y.cachedLLMURLs),o=ot(y=>y.currentSession),[a,i]=g.useState(),[s,c]=g.useState(""),[l,u]=g.useState(),d=g.useMemo(()=>({nodes:{label:e("session_info_node.entities.nodes"),color:"#2563eb"},edges:{label:e("session_info_node.entities.edges"),color:"#34d399"},threads:{label:e("session_info_node.entities.threads"),color:"#fbbf24"},llms:{label:e("session_info_node.entities.llms"),color:"#f87171"},prompts:{label:e("session_info_node.entities.prompts"),color:"#a78bfa"},tools:{label:e("session_info_node.entities.tools"),color:"#ffcccb"},schemas:{label:e("session_info_node.entities.schemas"),color:"#ffb6c1"},vectorDatabases:{label:e("session_info_node.entities.vector_databases"),color:"#ff69b4"},jsonlDatas:{label:e("session_info_node.entities.jsonl_data"),color:"#ff1493"},csvDatas:{label:e("session_info_node.entities.csv_data"),color:"#db7093"}}),[e]);g.useEffect(()=>{At(async()=>{const{functionCallingModelIds:y,prebuiltAppConfig:m}=await import("./index-CsUvhQqZ.js").then(async v=>(await v.__tla,v));return{functionCallingModelIds:y,prebuiltAppConfig:m}},__vite__mapDeps([7,1,2,3,4,5,6])).then(({functionCallingModelIds:y,prebuiltAppConfig:m})=>{n(r==null?void 0:r.map(v=>{const b=m.model_list.find(x=>v.includes(x.model));if(b)return{model_id:(b==null?void 0:b.model_id)||"",info:b,isFunctionCalling:y.includes((b==null?void 0:b.model_id)||"")}}))})},[r,o==null?void 0:o.id]);const f=g.useCallback(async()=>{navigator.storage.estimate().then(y=>{y&&c(e("session_info_node.used_bytes",{used:P8(y.usage),total:P8(y==null?void 0:y.quota)}))}),o!=null&&o.id&&(Promise.all([ce("FlowNode").findOne({where:{session_id:o==null?void 0:o.id},order:{updated_at:"DESC"}}),ce("FlowEdge").findOne({where:{session_id:o==null?void 0:o.id},order:{updated_at:"DESC"}}),ce("Thread").findOne({where:{session_id:o==null?void 0:o.id},order:{updated_at:"DESC"}}),ce("Prompt").findOne({where:{session_id:o==null?void 0:o.id},order:{updated_at:"DESC"}}),ce("LLM").findOne({where:{session_id:o==null?void 0:o.id},order:{updated_at:"DESC"}}),ce("Schema").findOne({where:{session_id:o==null?void 0:o.id},order:{updated_at:"DESC"}}),ce("ToolDefinition").findOne({where:{session_id:o==null?void 0:o.id},order:{updated_at:"DESC"}}),ce("VectorDatabase").findOne({where:{session_id:o==null?void 0:o.id},order:{updated_at:"DESC"}}),ce("JSONLData").findOne({where:{session_id:o==null?void 0:o.id},order:{updated_at:"DESC"}}),ce("CSVData").findOne({where:{session_id:o==null?void 0:o.id},order:{updated_at:"DESC"}})]).then(y=>{const m=y.reduce((v,b)=>b!=null&&b.updated_at&&(!v||new Date(b.updated_at)>v)?new Date(b.updated_at):v,o.updated_at?new Date(o.updated_at):void 0);i(m)}),Promise.all([ce("FlowNode").count({where:{session_id:o==null?void 0:o.id}}),ce("FlowEdge").count({where:{session_id:o==null?void 0:o.id}}),ce("Thread").count({where:{session_id:o==null?void 0:o.id}}),ce("Prompt").count({where:{session_id:o==null?void 0:o.id}}),ce("LLM").count({where:{session_id:o==null?void 0:o.id}}),ce("ToolDefinition").count({where:{session_id:o==null?void 0:o.id}}),ce("Schema").count({where:{session_id:o==null?void 0:o.id}}),ce("VectorDatabase").count({where:{session_id:o==null?void 0:o.id}}),ce("JSONLData").count({where:{session_id:o==null?void 0:o.id}}),ce("CSVData").count({where:{session_id:o==null?void 0:o.id}})]).then(([y,m,v,b,x,_,w,j,E,S])=>{u([{name:e("session_info_node.count_info.title"),nodes:y||0,edges:m||0,threads:v||0,prompts:b||0,llms:x||0,tools:_||0,schemas:w||0,vectorDatabases:j||0,jsonlDatas:E||0,csvDatas:S||0}])}))},[o==null?void 0:o.id,o==null?void 0:o.updated_at,e]),p=g.useCallback(()=>{f()},[f]);return g.useEffect(()=>{f()},[f]),h.jsxs(Tt,{className:"w-96",children:[h.jsxs(hn,{children:[h.jsx(jn,{children:e("session_info_node.title")}),h.jsx(ZI,{children:a||o!=null&&o.updated_at?_we(a||(o==null?void 0:o.updated_at)).fromNow():""})]}),h.jsxs(mn,{className:"grid gap-4",children:[h.jsx("div",{className:"flex items-center space-x-4 rounded-md border p-4",children:h.jsxs("div",{className:"flex-1 space-y-1",children:[h.jsx("p",{className:"text-sm font-medium leading-none",children:e("session_info_node.disk_size")}),h.jsx("p",{className:"text-sm text-muted-foreground",children:s})]})}),h.jsx("div",{className:"flex items-center space-x-4 rounded-md border p-4",children:h.jsxs("div",{className:"flex-1 space-y-1",children:[h.jsxs("div",{className:"text-sm font-medium leading-none",children:[e("session_info_node.cached_llms"),h.jsx(en,{className:"ml-2",children:(t==null?void 0:t.length)||0})]}),t==null?void 0:t.map(y=>h.jsxs("div",{className:"text-sm text-muted-foreground gap-1",children:[y==null?void 0:y.model_id,h.jsx("div",{className:"max-w-full gap-1 flex flex-wrap mt-1",children:h.jsx(ns,{model:y==null?void 0:y.info,isFunctionCalling:(y==null?void 0:y.isFunctionCalling)||!1,isCached:!0})})]},y==null?void 0:y.model_id))]})}),h.jsx("div",{children:h.jsx(N8,{config:d,className:"min-h-28 w-full",children:h.jsxs(Rbe,{accessibilityLayer:!0,data:l,children:[h.jsx(r8,{vertical:!1}),h.jsx(Ch,{dataKey:"name",tickLine:!1,tickMargin:10,axisLine:!1}),h.jsx(Lbe,{content:h.jsx(k8,{})}),Object.entries(d).map(([y,m])=>h.jsx(Xa,{dataKey:y,fill:m.color,radius:4},y))]})})})]}),h.jsx(Xo,{children:h.jsxs(ft,{className:"w-full",onClick:p,children:[h.jsx(de,{size:24,name:"refresh-ccw"}),e("session_info_node.reload")]})})]})});var oE="Tabs",[$be,Wwe]=Vn(oE,[qr]),A8=qr(),[zbe,aE]=$be(oE),T8=g.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:o,defaultValue:a,orientation:i="horizontal",dir:s,activationMode:c="automatic",...l}=e,u=Do(s),[d,f]=Zt({prop:r,onChange:o,defaultProp:a});return h.jsx(zbe,{scope:n,baseId:mt(),value:d,onValueChange:f,orientation:i,dir:u,activationMode:c,children:h.jsx(Oe.div,{dir:u,"data-orientation":i,...l,ref:t})})});T8.displayName=oE;var R8="TabsList",I8=g.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...o}=e,a=aE(R8,n),i=A8(n);return h.jsx(Zs,{asChild:!0,...i,orientation:a.orientation,dir:a.dir,loop:r,children:h.jsx(Oe.div,{role:"tablist","aria-orientation":a.orientation,...o,ref:t})})});I8.displayName=R8;var D8="TabsTrigger",L8=g.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:o=!1,...a}=e,i=aE(D8,n),s=A8(n),c=$8(i.baseId,r),l=z8(i.baseId,r),u=r===i.value;return h.jsx(ec,{asChild:!0,...s,focusable:!o,active:u,children:h.jsx(Oe.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":l,"data-state":u?"active":"inactive","data-disabled":o?"":void 0,disabled:o,id:c,...a,ref:t,onMouseDown:he(e.onMouseDown,d=>{!o&&d.button===0&&d.ctrlKey===!1?i.onValueChange(r):d.preventDefault()}),onKeyDown:he(e.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&i.onValueChange(r)}),onFocus:he(e.onFocus,()=>{const d=i.activationMode!=="manual";!u&&!o&&d&&i.onValueChange(r)})})})});L8.displayName=D8;var F8="TabsContent",B8=g.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:o,children:a,...i}=e,s=aE(F8,n),c=$8(s.baseId,r),l=z8(s.baseId,r),u=r===s.value,d=g.useRef(u);return g.useEffect(()=>{const f=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(f)},[]),h.jsx(Mn,{present:o||u,children:({present:f})=>h.jsx(Oe.div,{"data-state":u?"active":"inactive","data-orientation":s.orientation,role:"tabpanel","aria-labelledby":c,hidden:!f,id:l,tabIndex:0,...i,ref:t,style:{...e.style,animationDuration:d.current?"0s":void 0},children:f&&a})})});B8.displayName=F8;function $8(e,t){return`${e}-trigger-${t}`}function z8(e,t){return`${e}-content-${t}`}var Vbe=T8,V8=I8,U8=L8,H8=B8;const W8=Vbe,iE=g.forwardRef(({className:e,...t},n)=>h.jsx(V8,{ref:n,className:K("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));iE.displayName=V8.displayName;const Ga=g.forwardRef(({className:e,...t},n)=>h.jsx(U8,{ref:n,className:K("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));Ga.displayName=U8.displayName;const Za=g.forwardRef(({className:e,...t},n)=>h.jsx(H8,{ref:n,className:K("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));Za.displayName=H8.displayName;const Ube=e=>{const t=g.useCallback(async({edgeId:n})=>{try{return{deleteEdgeId:n}}catch{return{deleteEdgeId:n}}},[]);cn(e,t)},Hbe=g.memo(e=>{var c,l;const{t}=ke("flows"),{id:n,data:r,isConnectable:o}=e,a=g.useRef(!1),i=ln(n),s=Ae(u=>u.updateNodes);return Ube(n),g.useEffect(()=>{var d;const u=r==null?void 0:r.entity;!u||!i||a.current||(d=u==null?void 0:u.schema_items)!=null&&d.length||r.loaded||(a.current=!0,ce("SchemaItem").find({where:{schema_id:u.id}}).then(f=>{s([{id:i.id,type:"replace",item:{...i,data:{...(i==null?void 0:i.data)||{},loaded:!0,entity:{...r.entity,schema_items:f}}}}])}).finally(()=>{a.current=!1}))},[r.entity,r.loaded,i,s]),h.jsxs("div",{children:[h.jsxs("div",{children:[h.jsx(tn,{id:n}),h.jsxs(W8,{defaultValue:"account",className:"w-[400px]",children:[h.jsxs(iE,{className:"grid w-full grid-cols-2",children:[h.jsx(Ga,{value:"account",children:t("schema_node.typescript")}),h.jsx(Ga,{value:"password",children:t("schema_node.zod")})]}),h.jsx(Za,{value:"account",children:h.jsx(Tt,{className:"p-4",children:h.jsx("pre",{className:"overflow-hidden break-words whitespace-pre-wrap",children:VI(((c=r==null?void 0:r.entity)==null?void 0:c.schema_items)||[])})})}),h.jsx(Za,{value:"password",children:h.jsx(Tt,{className:"p-4 max-w-full",children:h.jsx("pre",{className:"overflow-hidden break-words whitespace-pre-wrap",children:Mx(((l=r==null?void 0:r.entity)==null?void 0:l.schema_items)||[])})})})]})]}),h.jsx(Ge,{type:"source",position:fe.Bottom,id:"a",isConnectable:o})]})}),q8=({className:e,...t})=>h.jsx("nav",{role:"navigation","aria-label":"pagination",className:K("mx-auto flex w-full justify-center",e),...t});q8.displayName="Pagination";const Y8=g.forwardRef(({className:e,...t},n)=>h.jsx("ul",{ref:n,className:K("flex flex-row items-center gap-1",e),...t}));Y8.displayName="PaginationContent";const Ws=g.forwardRef(({className:e,...t},n)=>h.jsx("li",{ref:n,className:K("",e),...t}));Ws.displayName="PaginationItem";const Ah=({className:e,isActive:t,size:n="icon",...r})=>h.jsx("a",{"aria-current":t?"page":void 0,className:K(gc({variant:t?"outline":"ghost",size:n}),e),...r});Ah.displayName="PaginationLink";const K8=({className:e,...t})=>{const{t:n}=ke("atoms");return h.jsxs(Ah,{"aria-label":"Go to previous page",size:"default",className:K("gap-1 pl-2.5",e),...t,children:[h.jsx(de,{name:"chevron-left",className:"h-4 w-4"}),h.jsx("span",{children:n("pagination.previous")})]})};K8.displayName="PaginationPrevious";const X8=({className:e,...t})=>{const{t:n}=ke("atoms");return h.jsxs(Ah,{"aria-label":"Go to next page",size:"default",className:K("gap-1 pr-2.5",e),...t,children:[h.jsx("span",{children:n("pagination.next")}),h.jsx(de,{name:"chevron-right",className:"h-4 w-4"})]})};X8.displayName="PaginationNext";const sE=({className:e,...t})=>{const{t:n}=ke("atoms");return h.jsxs("span",{"aria-hidden":!0,className:K("flex h-9 w-9 items-center justify-center",e),...t,children:[h.jsx(de,{name:"ellipsis",className:"h-4 w-4"}),h.jsx("span",{className:"sr-only",children:n("pagination.more_pages")})]})};sE.displayName="PaginationEllipsis";const cE=g.memo(e=>{const{data:t,headers:n,limitLengthByColumns:r,showPerPage:o=7,paginationShowLimit:a=1,contentLengthLimit:i=64}=e,[s,c]=g.useState({page:1,maxPage:1}),l=sn(w5);g.useEffect(()=>{c(p=>({...p,maxPage:Math.ceil(t.length/o)}))},[t.length,o]);const u=g.useMemo(()=>t.slice((s.page-1)*o,s.page*o),[t,s.page,o]),d=g.useMemo(()=>{let p=!1,y=!1;return h.jsx(q8,{className:"mt-4 mb-4 ml-4 mr-4 w-full",children:h.jsxs(Y8,{children:[s.page>1?h.jsx(Ws,{onClick:()=>c(m=>({...m,page:m.page-1})),children:h.jsx(K8,{})}):null,Array.from({length:s.maxPage},(m,v)=>{const b=v+1,x=v===0||v===s.maxPage-1;return!x&&b>s.page+a&&y?null:!x&&b>s.page+a?(y=!0,h.jsx(Ws,{children:h.jsx(sE,{})},v)):!x&&b<s.page-a&&p?null:!x&&b<s.page-a?(p=!0,h.jsx(Ws,{children:h.jsx(sE,{})},v)):h.jsx(Ws,{onClick:()=>c(_=>({..._,page:b})),children:h.jsx(Ah,{isActive:v+1===s.page,children:v+1})},v)}),s.page<s.maxPage?h.jsx(Ws,{onClick:()=>c(m=>({...m,page:m.page+1})),children:h.jsx(X8,{})}):null]})})},[s.maxPage,s.page,a]),f=(p,y)=>{if(!p)return;const m=Array.isArray(p)?p:n.map(v=>p[v]);return h.jsxs(Da,{children:[h.jsx(ss,{children:h.jsx("div",{className:"font-bold",children:y+1})}),m.map((v,b)=>{const x=typeof v=="string"?v:JSON.stringify(v),_=n[b],w=(r==null?void 0:r[_])||i,j=x.length>w;return h.jsx(ss,{className:"p-4",children:h.jsxs("div",{onClick:j?()=>l.show({title:_,content:x}):void 0,className:"flex gap-4",children:[j?`${x.substring(0,w)}...`:x,j?h.jsx(de,{className:"w-6 mt-[-2px]",name:"chevron-right"}):null]})},`${b}`)})]},`${y}`)};return h.jsxs(h.Fragment,{children:[h.jsxs(Gf,{className:"w-full",children:[h.jsx(Zf,{children:h.jsxs(Da,{children:[h.jsx(is,{},"index"),n?n.map(p=>h.jsx(is,{children:h.jsx("div",{className:"font-bold",children:p})},p)):void 0]})}),h.jsx(ep,{children:u!=null&&u.length?u==null?void 0:u.map(f):void 0})]}),d]})}),Wbe=g.memo(e=>{var a,i;const{id:t,data:n,isConnectable:r}=e,o=g.useMemo(()=>{if(!(n!=null&&n.entity))return{headers:[],rows:[]};const s=jE(n.entity.csv);return{headers:EE(n.entity.headers),rows:s.map(c=>EE(c))}},[n==null?void 0:n.entity]);return h.jsxs("div",{children:[h.jsx(Ge,{type:"target",position:fe.Top,isConnectable:r}),h.jsxs("div",{children:[h.jsx(tn,{id:t}),h.jsxs(Tt,{className:"min-w-32 min-h-16 p-4",children:[h.jsx(hn,{className:"!p-0",children:h.jsxs("div",{className:"pt-2 flex !flex-row",children:[h.jsx(de,{name:"file-spreadsheet",className:"mr-2"}),h.jsxs(Qe,{className:"!font-medium leading-none tracking-tight pr-8",children:[re.CSVData," ",(a=o==null?void 0:o.rows)!=null&&a.length?`(${((i=o==null?void 0:o.rows)==null?void 0:i.length)||0})`:""]})]})}),h.jsx(mn,{className:"pb-0",children:h.jsx(cE,{data:o.rows,headers:o.headers})})]})]}),h.jsx(Ge,{type:"source",position:fe.Bottom,id:"a",isConnectable:r})]})}),qbe=e=>{const t=Ae(r=>r.createOrUpdateFlowEdge),n=g.useCallback(async({edgeId:r,source:o,target:a,connection:i})=>{try{if((o==null?void 0:o.type)===re.Schema&&(a==null?void 0:a.type)===re.ToolDefinition){await t({source:i.source,target:i.target,sourceHandle:i.sourceHandle,targetHandle:i.targetHandle});return}return{deleteEdgeId:r}}catch{return{deleteEdgeId:r}}},[t]);cn(e,n)},Ybe=g.memo(({id:e,data:t,isConnectable:n})=>{var r,o;return qbe(e),h.jsxs("div",{children:[h.jsx(Ge,{type:"target",position:fe.Top,isConnectable:n}),h.jsx("div",{children:h.jsxs(wo,{className:"flex justify-center",children:[h.jsx(de,{size:24,name:"wrench"}),h.jsxs("div",{className:"ml-2",children:[h.jsx(_o,{children:`${((r=t.entity)==null?void 0:r.name)||""}`}),h.jsx(cs,{children:`${((o=t.entity)==null?void 0:o.description)||""}`})]})]})}),h.jsx(Ge,{type:"source",position:fe.Bottom,id:"a",isConnectable:n})]})}),Kbe=e=>{const t=g.useCallback(async({edgeId:n})=>({deleteEdgeId:n}),[]);cn(e,t)},Xbe=g.memo(e=>{const{id:t,data:n,isConnectable:r}=e;return Kbe(t),h.jsxs("div",{children:[h.jsx(Ge,{type:"target",position:fe.Top,isConnectable:r}),h.jsx("div",{children:h.jsxs(wo,{className:"flex justify-center max-w-80",variant:"default",children:[h.jsx(Ir,{name:n.model||"brain",className:"w-7 h-7"}),h.jsx("div",{className:"ml-2 pr-4 flex items-center",children:h.jsx(_o,{children:`${n.model||""}`})})]})}),h.jsx(Ge,{type:"source",position:fe.Bottom,id:"a",isConnectable:r})]})});class Qbe{async loadAndSplit(t){if(t===void 0)throw new Error("You must pass a text splitter to use this method.");const n=await this.load();return t.invoke(n)}}class Jbe extends Qbe{constructor(t,{splitPages:n=!0,pdfjs:r=Gbe,parsedItemSeparator:o=""}={}){super(),Object.defineProperty(this,"blob",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"splitPages",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"pdfjs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"parsedItemSeparator",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.blob=t,this.splitPages=n??this.splitPages,this.pdfjs=r,this.parsedItemSeparator=o}async load(){const{getDocument:t,version:n}=await this.pdfjs(),r=await t({data:new Uint8Array(await this.blob.arrayBuffer()),useWorkerFetch:!1,isEvalSupported:!1,useSystemFonts:!0}).promise,o=await r.getMetadata().catch(()=>null),a=[];for(let i=1;i<=r.numPages;i+=1){const s=await(await r.getPage(i)).getTextContent();if(s.items.length===0)continue;let c;const l=[];for(const d of s.items)"str"in d&&(c===d.transform[5]||!c?l.push(d.str):l.push(`
${d.str}`),c=d.transform[5]);const u=l.join(this.parsedItemSeparator);a.push(new zh({pageContent:u,metadata:{pdf:{version:n,info:o==null?void 0:o.info,metadata:o==null?void 0:o.metadata,totalPages:r.numPages},loc:{pageNumber:i}}}))}return this.splitPages?a:a.length===0?[]:[new zh({pageContent:a.map(i=>i.pageContent).join(`

`),metadata:{pdf:{version:n,info:o==null?void 0:o.info,metadata:o==null?void 0:o.metadata,totalPages:r.numPages}}})]}}async function Gbe(){try{const{default:e}=await At(async()=>{const{default:r}=await import("./pdf-C6S-iFsf.js").then(async o=>(await o.__tla,o)).then(o=>o.p);return{default:r}},__vite__mapDeps([106,1,2])),{getDocument:t,version:n}=e;return{getDocument:t,version:n}}catch(e){throw console.error(e),new Error("Failed to load pdf-parse. Please install it with eg. `npm install pdf-parse`.")}}const Zbe=`Use the following pieces of context to answer the question at the end.
If you don't know the answer, just say that you don't know, don't try to make up an answer.
Use three sentences maximum and keep the answer as concise as possible.

{context}
`,exe=oi(e=>{const{source:t,documents:n}=e,r=sn(),{toast:o}=Ht(),{t:a}=ke("dialogs"),{loading:i,createPrompt:s}=$3(),c=async l=>{try{if(!l.content||!l.content.includes("{context}")){o({title:a("create_vector_database_prompt.errors.fill_context"),variant:"destructive"});return}const u=l.content.replace("{context}",n.map(d=>`<document>${d.pageContent}</document>`).join(`
`));return await s(t,{...l,content:u}),r.hide(),!0}catch{o({title:a("create_vector_database_prompt.errors.create_failed"),variant:"destructive"})}};return h.jsx(kc,{open:r.visible,onOpenChange:r.hide,children:h.jsxs(Oi,{className:"sm:max-w-[425px]",children:[h.jsx(Mi,{children:h.jsxs("div",{className:"flex",children:[h.jsx(de,{name:"file",className:"mr-2 h-4 w-4"}),h.jsx(Ni,{children:a("create_vector_database_prompt.title")})]})}),h.jsxs("div",{className:"flex gap-4 py-4 flex-col",children:[h.jsx(Zx,{onSubmit:c,loading:i,hidePromptType:!0,defaultPromptRole:"system",defaultPromptContent:Zbe}),h.jsxs("div",{className:"w-full border-0 text-gray-700 flex text-sm items-center",children:[h.jsx(de,{name:"info",className:"mr-2",size:14}),a("create_vector_database_prompt.fill_content_note")]})]})]})})}),txe=()=>{const e=ot(i=>{var s;return(s=i.currentSession)==null?void 0:s.id}),[t,n]=g.useState(!1),r=Ae(i=>i.createOrUpdateFlowNode),o=Ae(i=>i.createOrUpdateFlowEdge),a=g.useCallback(async({prompt:i,source:s,metadata:c})=>{var l,u,d,f;try{const p=(l=s==null?void 0:s.data)==null?void 0:l.entity;if(!p||!e)throw new Error("Source or Session not found");n(!0);const y=((u=s.position)==null?void 0:u.x)||0,m=(((d=s.position)==null?void 0:d.y)||0)+(((f=s.measured)==null?void 0:f.height)||0),v=await ce("Prompt").save({...i,status:(i==null?void 0:i.status)||Yr.Started,role:(i==null?void 0:i.role)||kn.System,type:(i==null?void 0:i.type)||Pn.Chat,content:(i==null?void 0:i.content)||"{context}",session_id:e});if(!v)throw new Error("Failed to save prompt");const b=await r({source_id:v.id,source_type:"Prompt",node_type:re.Prompt,x:y,y:m+20});if(!b)throw new Error("Failed to save prompt node");const x=await ce("FlowNodePlaceholder").save({placeholder:`Retriever for ${p.name}`,placeholder_type:di.VECTOR_DATABASE_RETREIVER,session_id:e,metadata:c});if(!x)throw new Error("Failed to save node placeholder");const _=await r({source_id:x.id,source_type:"FlowNodePlaceholder",node_type:re.PlaceHolder,x:y,y:m+40});if(!_)throw new Error("Failed to save node placeholder node");await o({source:b.id,target:_.id}),await o({source:s.id,target:_.id})}finally{n(!1)}},[e,r,o]);return{loading:t,createVectorDatabaseRetriever:a}},nxe=`Use the following pieces of context to answer the question at the end.
If you don't know the answer, just say that you don't know, don't try to make up an answer.
----------------
{context}
`,rxe=oi(e=>{const{source:t}=e,n=sn(),{toast:r}=Ht(),{t:o}=ke("dialogs"),[a,i]=g.useState(1),[s,c]=g.useState(void 0),{loading:l,createVectorDatabaseRetriever:u}=txe(),d=async y=>{try{const m=y.content;if(!m||!m.includes("{context}")){r({title:o("create_vector_database_retriever.errors.fill_context"),variant:"destructive"});return}return await u({source:t,prompt:{content:m},metadata:{k:a,minimalScore:s}}),i(1),c(void 0),n.hide(),!0}catch{r({title:o("create_vector_database_retriever.errors.create_failed"),variant:"destructive"})}},f=y=>{i(y.target.value?Number(y.target.value):void 0)},p=y=>{c(y.target.value?Number(y.target.value):void 0)};return h.jsx(kc,{open:n.visible,onOpenChange:n.hide,children:h.jsxs(Oi,{className:"sm:max-w-[425px]",children:[h.jsx(Mi,{children:h.jsxs("div",{className:"flex",children:[h.jsx(de,{name:"file",className:"mr-2 h-4 w-4"}),h.jsx(Ni,{children:o("create_vector_database_retriever.title")})]})}),h.jsxs("div",{className:"flex gap-4 py-4 flex-col",children:[h.jsx(Zx,{onSubmit:d,loading:l,hidePromptType:!0,defaultPromptRole:"system",defaultPromptContent:nxe}),h.jsxs(Tt,{children:[h.jsx(hn,{children:h.jsx(jn,{children:o("create_vector_database_retriever.retriever_settings")})}),h.jsxs(mn,{children:[h.jsx(Qe,{children:o("create_vector_database_retriever.retriever_k")}),h.jsx(dn,{value:a||"",type:"number",onChange:f,placeholder:o("create_vector_database_retriever.retriever_k_placeholder")}),h.jsx(Qe,{children:o("create_vector_database_retriever.retriever_minimum_score")}),h.jsx(dn,{value:s||"",type:"number",onChange:p,placeholder:o("create_vector_database_retriever.retriever_minimum_score_placeholder")})]})]}),h.jsxs("div",{className:"w-full border-0 text-gray-700 flex text-sm items-center",children:[h.jsx(de,{name:"info",className:"mr-2",size:14}),o("create_vector_database_retriever.fill_content_note")]})]})]})})}),oxe=e=>{const t=Ae(o=>o.createOrUpdateFlowEdge),n=Lu(o=>o.index),r=g.useCallback(async({edgeId:o,target:a,source:i})=>{var s,c;try{const l=(s=a==null?void 0:a.data)==null?void 0:s.entity;if((i==null?void 0:i.type)===re.CSVData&&(a==null?void 0:a.type)===re.VectorDatabase){const u=(c=i==null?void 0:i.data)==null?void 0:c.entity;if(!u||!l)return{deleteEdgeId:o};const{rows:d}=W9(u.headers,u.csv),f=d.map(p=>new zh({pageContent:`${p.text}`}));await n({databaseId:l.id,dataSourceId:u.id,dataSourceType:"CSVData"},f),await t({source:i.id,target:a.id});return}return{deleteEdgeId:o}}catch{return{deleteEdgeId:o}}},[t,n]);cn(e,r)};var lE,Q8;function axe(){if(Q8)return lE;Q8=1;var e=Um(),t=ai(),n=E$(),r=Math.ceil,o=Math.max;function a(i,s,c){(c?t(i,s,c):s===void 0)?s=1:s=o(n(s),0);var l=i==null?0:i.length;if(!l||s<1)return[];for(var u=0,d=0,f=Array(r(l/s));u<l;)f[d++]=e(i,u,u+=s);return f}return lE=a,lE}var ixe=axe();const J8=Xe(ixe),sxe=e=>{const[t,n]=g.useState(!1),{t:r}=ke("flows"),{toast:o}=Ht(),{getNode:a,getHandleConnections:i}=Fn(),s=Ae(f=>f.updateNodes),c=Lu(f=>f.index),l=Lu(f=>f.similaritySearchWithScore),u=g.useCallback(async(f,p)=>{var y,m,v;try{const b=a(e);if(!b)return;const x=(y=b.data)==null?void 0:y.entity;if(!x){o({variant:"destructive",title:r("vector_database_node.errors.vector_database_not_found")});return}if(x.storage===da.DataNode){const _=(v=(m=i({nodeId:e,type:"target"}).map(w=>a(w.source)).find(w=>(w==null?void 0:w.type)&&[re.JSONLData,re.CSVData].includes(w==null?void 0:w.type)))==null?void 0:m.data)==null?void 0:v.entity;if(!_){o({variant:"destructive",title:r("vector_database_node.errors.data_node_not_found")});return}return n(!0),await l({databaseId:x.id,dataSourceId:_.id,dataSourceType:_E(_)},f,p==null?void 0:p.k)}else return n(!0),await l({databaseId:x.id},f,p==null?void 0:p.k)}catch{o({variant:"destructive",title:r("vector_database_node.errors.similarity_search_failed")})}finally{n(!1)}},[i,e,l,o,r,a]),d=g.useCallback(async(f,p)=>{var y,m,v,b;try{const x=a(e);if(!x)return;n(!0);const _=f.content?[new zh({pageContent:f.content,id:f.id,metadata:{id:f.id}})]:f.documents;if(!(_!=null&&_.length)){o({variant:"destructive",title:r("vector_database_node.errors.content_not_found")});return}const w=(y=x.data)==null?void 0:y.entity;if(!w||!x){o({variant:"destructive",title:r("vector_database_node.errors.vector_database_not_found")});return}if(w.storage===da.DataNode){const j=i({nodeId:e,type:"target"}).map(M=>a(M.source)).find(M=>(M==null?void 0:M.type)&&[re.JSONLData,re.CSVData].includes(M==null?void 0:M.type)),E=(m=j==null?void 0:j.data)==null?void 0:m.entity;if(!E){o({variant:"destructive",title:r("vector_database_node.errors.data_node_not_found")});return}const S=_E(E),O=J8(_,10);let P=0;for(const M of O){if((v=p==null?void 0:p.onProgressReport)==null||v.call(p,{handling:M.length,handled:P,total:_.length}),await c({databaseId:w.id,dataSourceId:E.id,dataSourceType:S},M),S&&j){const k=await ce(S).findOne({where:{id:E.id}});s([{type:"replace",id:j.id,item:{...j,data:{...j.data,entity:k}}}])}P+=M.length}}else{const j=J8(_,10);let E=0;for(const S of j){(b=p==null?void 0:p.onProgressReport)==null||b.call(p,{handling:S.length,handled:E,total:_.length}),await c({databaseId:w.id},S);const O=await ce("VectorDatabase").findOne({where:{id:`${w.id}`}});s([{type:"replace",id:x.id,item:{...x,data:{...x.data,entity:O}}}]),E+=S.length}}}catch{o({variant:"destructive",title:r("vector_database_node.errors.similarity_search_failed")})}finally{n(!1)}},[i,e,c,o,r,a,s]);return{loading:t,indexData:d,similaritySearchWithScore:u}},cxe=[1,2,3,4,5,6,7,8,9,10],lxe=g.memo(e=>{const{t}=ke("flows"),[n,r]=g.useState(""),[o,a]=g.useState([]),[i,s]=g.useState("1"),{loading:c,onSimilaritySearch:l,onCreatePrompt:u,onCreateRetriever:d}=e,f=async()=>{a(await l(n,+i)),r("")},p=async y=>{y.key==="Enter"&&!y.shiftKey&&(y.preventDefault(),f())};return h.jsxs("div",{className:"mt-4 max-w-full",children:[h.jsx("div",{className:"bg-black/5 dark:bg-white/5 rounded-xl relative",children:h.jsxs("div",{className:"relative px-2 py-1 pb-2",children:[h.jsxs(go,{value:`${i}`,onValueChange:y=>s(y),children:[h.jsx(Dr,{className:"absolute left-0 !w-14 top-[2px] rounded-xl bg-transparent border-none focus:outline-none focus:ring-0 focus:border-opacity-0 focus:ring-transparent",children:h.jsx(vo,{placeholder:t("vector_database_node.k_select_placeholder")})}),h.jsx(Lr,{children:cxe.map(y=>h.jsx(Sn,{value:`${y}`,children:y},`${y}`))})]}),h.jsx(so,{value:n,disabled:c,placeholder:t("vector_database_node.similarity_search_placeholder"),className:K("w-full rounded-xl px-2 pl-11 border-none resize-none bg-transparent","min-h-8 max-h-8"),onKeyDown:p,onChange:y=>{r(y.target.value)}}),h.jsx("button",{type:"button",disabled:c,onClick:f,className:"absolute right-3 top-5 -translate-y-1/2 rounded-xl bg-black/5 dark:bg-white/5 p-1",children:h.jsx(de,{name:c?"loader-circle":"arrow-right",className:K("w-4 h-4 dark:text-white",n?"opacity-100":"opacity-30",c?"animate-spin":"")})})]})}),h.jsx(Z3,{type:"single",collapsible:!0,children:o==null?void 0:o.map(([y,m],v)=>h.jsxs(aw,{value:`${v}`,children:[h.jsxs(iw,{children:[`[${m.toFixed(2)}] ${y.pageContent}`.substring(0,32),"..."]}),h.jsx(sw,{children:y.pageContent})]},`${v}`))}),h.jsxs("div",{className:"w-full mt-4 flex flex-col gap-1",children:[h.jsx(ft,{disabled:c,onClick:d,className:"w-full",children:t("vector_database_node.to_retriever")}),o!=null&&o.length&&u?h.jsx(ft,{disabled:c,onClick:()=>u(o),className:"w-full",children:t("vector_database_node.create_prompt")}):void 0]})]})}),uxe=g.memo(({loading:e,onCreateData:t})=>{const{t:n}=ke("flows"),[r,o]=g.useState(""),[a,i]=g.useState(""),s=async()=>{a&&(await t({id:r,content:a}),o(""),i(""))};return h.jsxs("div",{className:"min-w-80",children:[h.jsxs("div",{className:"flex flex-col space-y-1.5 mt-3",children:[h.jsx(Qe,{htmlFor:"name",children:n("vector_database_node.add_text.id")}),h.jsx(dn,{value:r,disabled:e,onChange:c=>o(c.target.value||""),placeholder:n("vector_database_node.add_text.id_placeholder"),className:"mb-4"}),h.jsxs(Qe,{htmlFor:"name",children:[n("vector_database_node.add_text.content")," ",h.jsx("span",{className:"text-red-600",children:"*"})]}),h.jsx(so,{value:a,disabled:e,onChange:c=>i(c.target.value||""),placeholder:n("vector_database_node.add_text.content_placeholder")})]}),h.jsx("div",{className:"flex justify-between mt-6",children:h.jsx(Nn,{loading:e,disabled:!(a!=null&&a.length),onClick:s,className:"w-full",children:n("vector_database_node.add_text.add")})})]})});function dxe({accept:e,maxSize:t}){const{t:n}=ke("atoms"),[r,o]=g.useState(""),[a,i]=g.useState(""),s=g.useRef(null),[c,l]=g.useState(0),u=f=>{var y;const p=(y=f.target.files)==null?void 0:y[0];d(p)},d=f=>{if(i(""),f){if(t&&f.size>t*1024*1024){i(n("file_upload_input.errors.max_size",{maxSize:t,fileSize:(f.size/1024/1024).toFixed(2)}));return}const p=e==null?void 0:e.split(",").map(y=>y.replace(".","").trim());if(e&&!f.type.match(e.replace("/*",""))&&!(p!=null&&p.some(y=>f.type.includes(y)))){i(n("file_upload_input.errors.accept",{accept:e}));return}return l(f.size),o(f.name),f}};return{fileName:r,error:a,fileInputRef:s,handleFileSelect:u,validateAndSetFile:d,clearFile:()=>{o(""),i(""),l(0),s.current&&(s.current.value="")},fileSize:c}}function fxe({file:e,setFile:t,loading:n,progress:r,fileOptions:o}){const{toast:a}=Ht(),{t:i}=ke("atoms"),[s,c]=g.useState(!1),{fileName:l,fileInputRef:u,clearFile:d,error:f,validateAndSetFile:p,fileSize:y}=dxe({accept:(o==null?void 0:o.accept)||"image/*",maxSize:(o==null?void 0:o.maxSize)||3});g.useEffect(()=>{e||d()},[d,e]),g.useEffect(()=>{f&&a({title:f,variant:"destructive"})},[f,a]);function m(w){const j=p(w);j&&t(j)}function v(w){w.preventDefault(),c(!1);const j=w.dataTransfer.files[0];j&&m(j)}function b(w){var E;const j=(E=w.target.files)==null?void 0:E[0];j&&m(j)}function x(){d(),t(void 0)}const _=g.useMemo(()=>{if(!e)return h.jsx("div",{className:"w-16 h-16 rounded-lg bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center",children:h.jsx(de,{name:"file-text",className:"w-8 h-8 text-zinc-400"})});const w=e.type.startsWith("image/");return h.jsx("div",{className:"relative w-16 h-16 rounded-lg overflow-hidden",children:w?h.jsx("img",{src:URL.createObjectURL(e),alt:"Preview",className:"w-full h-full object-cover"}):h.jsx(de,{className:"w-14 h-14",name:"file-text"})})},[e]);return h.jsx(h.Fragment,{children:h.jsxs("div",{className:K("relative group cursor-pointer","rounded-lg border-2 border-dashed","transition-colors duration-200",s?"border-indigo-500 bg-indigo-50/50 dark:bg-indigo-500/10":"border-zinc-200 dark:border-zinc-800"),onDragOver:w=>{w.preventDefault(),c(!0)},onDragLeave:()=>c(!1),onDrop:v,onClick:()=>{var w;return(w=u.current)==null?void 0:w.click()},onKeyDown:w=>{var j;(w.key==="Enter"||w.key===" ")&&(w.preventDefault(),(j=u.current)==null||j.click())},"aria-label":"Upload file",children:[h.jsx("input",{ref:u,type:"file",disabled:n||!!(r&&r<1),accept:(o==null?void 0:o.accept)||"image/*",onChange:b,className:"hidden"}),h.jsx("div",{className:"p-8 space-y-4",children:l?h.jsxs("div",{className:"flex items-center gap-4",children:[_,h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsxs("p",{className:"text-sm font-medium truncate",children:[l||"No file selected"," ",h.jsx("span",{className:"text-xs text-zinc-500 leading-5",children:y?`(${(y/1024/1024).toFixed(2)} MB)`:""})]}),r&&r<1?h.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[h.jsxs("p",{children:[(r*100).toFixed(2)," %"]}),h.jsx("div",{className:"h-1 flex-1 bg-zinc-100 dark:bg-zinc-800 rounded-full overflow-hidden items-center flex",children:h.jsx("div",{className:"h-full bg-indigo-500 transition-all duration-200",style:{width:`${r*100}%`}})})]}):void 0]}),h.jsx("button",{type:"button",disabled:n||!!(r&&r<1),onClick:w=>{w.stopPropagation(),x()},className:"p-1 hover:bg-zinc-100 dark:hover:bg-zinc-800 rounded",children:h.jsx(de,{name:"x",className:"w-5 h-5 text-zinc-400"})}),r&&r<1?h.jsx(tp,{className:"rounded-lg"}):void 0]}):h.jsxs("div",{className:"flex flex-col items-center gap-2",children:[h.jsx(de,{name:"upload",className:"w-8 h-8 text-zinc-400 dark:text-zinc-500"}),h.jsx("p",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:i("file_upload_input.drop_file")})]})})]})})}function pxe({onFileSubmit:e,fileOptions:t,progress:n,loading:r}){const{t:o}=ke("flows"),[a,i]=g.useState(),s=async()=>{a&&(await e(a),i(void 0))};return h.jsxs("div",{className:"w-full max-w-md space-y-2 mt-4",children:[h.jsx("div",{className:"mb-6",children:h.jsx(fxe,{progress:n,loading:r,fileOptions:t,setFile:i,file:a})}),h.jsx(Nn,{loading:r,disabled:!a,onClick:s,className:"w-full mt-4",children:o("vector_database_node.add_file.index")})]})}const hxe=g.memo(e=>{var E,S,O,P;const{t}=ke("flows"),[n,r]=g.useState(0),[o,a]=g.useState("search"),i=ln(e.id),{id:s,data:c,isConnectable:l}=e,{loading:u,similaritySearchWithScore:d,indexData:f}=sxe(s),p=sn(exe),y=sn(rxe);oxe(s);const m=g.useCallback(async(...M)=>{i&&await f(...M)},[f,i]),v=g.useCallback(async(M,k)=>{const R=M.trim(),A=await d(R,{k});if(A!=null&&A.length)return A},[d]),b=g.useCallback(M=>{p.show({source:i,documents:M.map(([k])=>k)})},[p,i]),x=g.useCallback(async()=>{y.show({source:i})},[y,i]),_=g.useCallback(async M=>{if(M.type.includes("text")||M.type.includes("txt")){const k=new FileReader;k.onload=async R=>{var C;const A=(C=R.target)==null?void 0:C.result;await m({content:A})},k.readAsText(M)}else if(M.type.endsWith("pdf")){const k=new Blob([M],{type:"application/pdf"}),R=await new Jbe(k,{pdfjs:async()=>{const A=await At(()=>import("./pdf.min-L8z0EEji.js").then(async C=>(await C.__tla,C)),__vite__mapDeps([107,1,2,3,4,5,6]));return await At(()=>import("./pdf.worker.min-CTaW6cJo.js").then(async C=>(await C.__tla,C)),__vite__mapDeps([108,1,2,3,4,5,6])),A.GlobalWorkerOptions.workerSrc=new URL("pdfjs-dist/build/pdf.worker.min.js",import.meta.url).toString(),A},parsedItemSeparator:" "}).load();await m({documents:R},{onProgressReport:A=>{r((A.handled+A.handling)/A.total)}})}},[m]),w=g.useMemo(()=>{var R,A;if(!((R=c==null?void 0:c.entity)!=null&&R.raw))return{headers:[],rows:[]};const M=["content","embedding","metadata"],k=jE((A=c==null?void 0:c.entity)==null?void 0:A.raw);return{headers:M,rows:k.map(C=>{try{return JSON.parse(C)}catch{return[]}})}},[(E=c==null?void 0:c.entity)==null?void 0:E.raw]),j=g.useMemo(()=>{switch(o){case"search":return h.jsx(Za,{value:"search",children:h.jsx(lxe,{loading:u,onSimilaritySearch:v,onCreatePrompt:b,onCreateRetriever:x})});case"new":return h.jsx(Za,{className:"min-w-80",value:"new",children:h.jsx(uxe,{loading:u,onCreateData:m})});case"file":return h.jsx(Za,{value:"file",children:h.jsx(pxe,{loading:u,progress:n,onFileSubmit:_,fileOptions:{accept:".pdf,.txt,.text",maxSize:1}})});case"view":return h.jsx(Za,{value:"view",children:h.jsx(cE,{data:w.rows,headers:w.headers,limitLengthByColumns:{embedding:32}})})}},[m,b,x,_,v,u,o,n,w]);return h.jsxs("div",{className:"min-w-72",children:[h.jsx(Ge,{type:"target",position:fe.Top,isConnectable:l}),h.jsxs("div",{className:"max-w-full",children:[h.jsx(tn,{id:s}),h.jsxs(wo,{className:"flex justify-center",variant:"default",children:[h.jsx(de,{size:24,name:"database-zap"}),h.jsxs("div",{className:"ml-2 max-w-full",children:[h.jsx(_o,{children:`${((S=c.entity)==null?void 0:S.name)||""}`}),h.jsxs(W8,{value:o,onValueChange:a,defaultValue:"search",className:K("w-full mt-4"),children:[h.jsxs(iE,{className:K("grid w-full grid-cols-3",((O=c.entity)==null?void 0:O.storage)===da.DatabaseNode?"grid-cols-4":"grid-cols-3"),children:[h.jsx(Ga,{value:"search",children:t("vector_database_node.search")}),h.jsx(Ga,{value:"new",children:t("vector_database_node.text")}),h.jsx(Ga,{value:"file",children:t("vector_database_node.file")}),((P=c.entity)==null?void 0:P.storage)===da.DatabaseNode?h.jsx(Ga,{value:"view",children:t("vector_database_node.view")}):void 0]}),j]})]})]})]}),h.jsx(Ge,{type:"source",position:fe.Bottom,id:"a",isConnectable:l})]})}),mxe={embedding:32},yxe=g.memo(e=>{var a,i,s;const{id:t,data:n,isConnectable:r}=e,o=g.useMemo(()=>{var u;if(!((u=n==null?void 0:n.entity)!=null&&u.jsonl))return{headers:[],rows:[]};const c=EE(n.entity.headers||""),l=jE(n.entity.jsonl);return{headers:c,rows:l.map(d=>{try{return JSON.parse(d)}catch{return[]}})}},[(a=n==null?void 0:n.entity)==null?void 0:a.jsonl,n.entity.headers]);return h.jsxs("div",{className:"min-w-80",children:[h.jsx(Ge,{type:"target",position:fe.Top,isConnectable:r}),h.jsxs("div",{children:[h.jsx(tn,{id:t}),h.jsxs(Tt,{className:"min-w-32 min-h-16 p-4",children:[h.jsx(hn,{className:"!p-0",children:h.jsxs("div",{className:"pt-2 flex !flex-row",children:[h.jsx(de,{name:"file-json",className:"mr-2"}),h.jsxs(Qe,{className:"!font-medium leading-none tracking-tight pr-8",children:[re.JSONLData," ",(i=o==null?void 0:o.rows)!=null&&i.length?`(${((s=o==null?void 0:o.rows)==null?void 0:s.length)||0})`:""]})]})}),h.jsx(mn,{className:"pb-0",children:h.jsx(cE,{data:o.rows,headers:o.headers,limitLengthByColumns:mxe})})]})]}),h.jsx(Ge,{type:"source",position:fe.Bottom,id:"a",isConnectable:r})]})}),G8=60,Z8=140,gxe=Hr("supports-backdrop-blur:bg-white/10 supports-backdrop-blur:dark:bg-black/10 mx-auto flex h-[58px] w-max gap-2 rounded-lg border p-2 backdrop-blur-md"),e9=U.forwardRef(({className:e,children:t,magnification:n=G8,distance:r=Z8,direction:o="bottom",...a},i)=>{const s=Hm(1/0),c=()=>U.Children.map(t,l=>U.isValidElement(l)&&l.type===Cu?U.cloneElement(l,{...l.props,mouseX:s,magnification:n,distance:r}):l);return h.jsx(Au.div,{ref:i,onMouseMove:l=>s.set(l.pageX),onMouseLeave:()=>s.set(1/0),...a,className:K(gxe({className:e}),{"items-start":o==="top","items-center":o==="middle","items-end":o==="bottom"}),children:c()})});e9.displayName="Dock";const Cu=({magnification:e=G8,distance:t=Z8,mouseX:n,className:r,children:o,...a})=>{const i=g.useRef(null),s=_S(n||new jwe,u=>{var f;const d=((f=i.current)==null?void 0:f.getBoundingClientRect())??{x:0,width:0};return u-d.x-d.width/2}),c=_S(s,[-t,0,t],[40,e,40]),l=uz(c,{mass:.1,stiffness:150,damping:12});return h.jsx(Au.div,{ref:i,style:{width:l},className:K("flex aspect-square cursor-pointer items-center justify-center rounded-full",r),...a,children:o})};Cu.displayName="DockIcon";let t9,n9,Th,r9,Ou,o9,a9,i9,s9,c9,l9,u9,d9,f9,p9,h9,m9,y9,g9,v9,b9,x9,w9,_9,j9,E9;t9={[re.Shape]:{width:100,height:100},[re.CircleShape]:{width:100,height:100},[re.TriangleShape]:{width:100,height:100},[re.EditorApp]:{width:1240,height:400}},n9=e=>{const t=ln(e),n=ot(s=>s.currentSession),[r,o]=g.useState(!1),a=Ae(s=>s.createOrUpdateFlowNode),i=g.useCallback(async s=>{var c,l,u;try{if(o(!0),t&&(n==null?void 0:n.id)){const d=((c=t.position)==null?void 0:c.x)||0,f=(((l=t.position)==null?void 0:l.y)||0)+(((u=t.measured)==null?void 0:u.height)||0),p=await ce("FlowNodeData").save({data:{},session_id:n.id});if(!p)throw new Error("Failed to save node data");if(!await a({node_type:s,data:{},source_id:p.id,source_type:"FlowNodeData",x:d,y:f+20,...t9[s]||{}}))throw new Error("Failed to save node")}}finally{o(!1)}},[a,n==null?void 0:n.id,t]);return{loading:r,createNode:i}},Th={applications:[{key:re.EditorApp,icon:"notebook-text",label:"application_bar.note"},{key:re.VSLiteApp,icon:"square-terminal",label:"application_bar.vslite"}],shapes:[{key:re.Shape,icon:"square",label:"application_bar.square"},{key:re.CircleShape,icon:"circle",label:"application_bar.circle"},{key:re.TriangleShape,icon:"triangle",label:"application_bar.triangle"}],old:[{key:re.CodeContainerApp,icon:"file-code-2",label:"application_bar.code_editor"}]},r9=g.memo(e=>{const{t}=ke("flows"),{toast:n}=Ht(),{loading:r,createNode:o}=n9(e.id),a=async i=>{try{if(r)return;await o(i)}catch{n({description:t("application_bar.errors.add_node_failed"),variant:"destructive"})}};return h.jsx(Od,{children:h.jsxs(e9,{direction:"middle",children:[Th.applications.map(i=>h.jsx(Cu,{children:h.jsxs(Ei,{children:[h.jsx(Si,{children:h.jsx(de,{onClick:()=>a(i.key),name:i.icon})}),h.jsx(wa,{children:h.jsx("p",{children:t(i.label)})})]})},i.label)),h.jsx(vc,{orientation:"vertical",className:"h-full"}),Th.shapes.map(i=>h.jsx(Cu,{children:h.jsxs(Ei,{children:[h.jsx(Si,{children:h.jsx(de,{onClick:()=>a(i.key),name:i.icon})}),h.jsx(wa,{children:h.jsx("p",{children:t(i.label)})})]})},i.label)),h.jsx(vc,{orientation:"vertical",className:"h-full"}),Th.old.map(i=>h.jsx(Cu,{children:h.jsxs(Ei,{children:[h.jsx(Si,{children:h.jsx(de,{onClick:()=>a(i.key),name:i.icon})}),h.jsx(wa,{children:h.jsx("p",{children:t(i.label)})})]})},i.label))]})})}),Ou=g.memo(e=>{const{lineClassName:t,handleClassName:n,...r}=e;return h.jsx(Zte,{lineClassName:K("!border-1.5",t),handleClassName:K("!w-2 !h-2 !border-2 !rounded-full",n),...r})}),o9=e=>{const t=Ae(r=>r.createOrUpdateFlowEdge),n=g.useCallback(async({edgeId:r,source:o,target:a,connection:i})=>{try{if([re.CircleShape,re.TriangleShape].includes(o==null?void 0:o.type)&&(a==null?void 0:a.type)===re.Shape){await t({source:i.source,target:i.target,sourceHandle:i.sourceHandle,targetHandle:i.targetHandle});return}return{deleteEdgeId:r}}catch{return{deleteEdgeId:r}}},[t]);cn(e,n)},a9=g.memo(e=>{const{id:t,selected:n,isConnectable:r}=e;return o9(t),h.jsxs(h.Fragment,{children:[h.jsx(Ou,{isVisible:!!n,minWidth:40,minHeight:40}),h.jsx(Ge,{type:"target",position:fe.Top,isConnectable:r}),h.jsx("div",{className:"min-w-10 min-h-10 w-full h-full bg-border border",children:h.jsx(tn,{id:t})}),h.jsx(Ge,{type:"source",position:fe.Bottom,isConnectable:r})]})}),i9=e=>{const t=Ae(r=>r.createOrUpdateFlowEdge),n=g.useCallback(async({edgeId:r,source:o,target:a,connection:i})=>{try{if([re.Shape,re.TriangleShape].includes(o==null?void 0:o.type)&&(a==null?void 0:a.type)===re.CircleShape){await t({source:i.source,target:i.target,sourceHandle:i.sourceHandle,targetHandle:i.targetHandle});return}return{deleteEdgeId:r}}catch{return{deleteEdgeId:r}}},[t]);cn(e,n)},s9=g.memo(e=>{const{id:t,selected:n,isConnectable:r}=e;return i9(t),h.jsxs(h.Fragment,{children:[h.jsx(Ou,{isVisible:!!n,minWidth:40,minHeight:40}),h.jsx(Ge,{type:"target",position:fe.Top,isConnectable:r}),h.jsx("div",{className:"min-w-10 min-h-10 w-full h-full bg-border rounded-full border",children:h.jsx(tn,{id:t})}),h.jsx(Ge,{type:"source",position:fe.Bottom,isConnectable:r})]})}),c9=e=>{const t=Ae(r=>r.createOrUpdateFlowEdge),n=g.useCallback(async({edgeId:r,source:o,target:a,connection:i})=>{try{if([re.CircleShape,re.Shape].includes(o==null?void 0:o.type)&&(a==null?void 0:a.type)===re.TriangleShape){await t({source:i.source,target:i.target,sourceHandle:i.sourceHandle,targetHandle:i.targetHandle});return}return{deleteEdgeId:r}}catch{return{deleteEdgeId:r}}},[t]);cn(e,n)},l9=g.memo(e=>{const{id:t,selected:n,width:r,height:o,isConnectable:a}=e;return c9(t),h.jsxs(h.Fragment,{children:[h.jsx(Ou,{isVisible:!!n,minWidth:40,minHeight:40}),h.jsx(Ge,{type:"target",position:fe.Top,isConnectable:a}),h.jsx("div",{className:"w-0 h-0 border-l-transparent border-r-transparent border-b-border",style:{borderLeftWidth:(r||0)/2,borderRightWidth:(r||0)/2,borderBottomWidth:o||0}}),h.jsx(tn,{id:t,className:"absolute top-0 right-0"}),h.jsx(Ge,{type:"source",position:fe.Bottom,isConnectable:a})]})}),u9=e=>{const t=Ae(r=>r.createOrUpdateFlowEdge),n=g.useCallback(async({edgeId:r,source:o,target:a,connection:i})=>{try{if((o==null?void 0:o.type)===re.LLM&&(a==null?void 0:a.type)===re.EditorApp){await t({source:i.source,target:i.target,sourceHandle:i.sourceHandle,targetHandle:i.targetHandle});return}return{deleteEdgeId:r}}catch{return{deleteEdgeId:r}}},[t]);cn(e,n)},d9=e=>{const t=ln(e),{t:n}=ke("flows"),r=g.useRef(null),{toast:o}=Ht(),{getNode:a,getHandleConnections:i}=Fn(),s=an(d=>d.stream),c=g.useCallback(async d=>{t&&(clearTimeout(r.current),r.current=setTimeout(async()=>{await ce("FlowNode").update(t.id,{data:d})},150))},[t]),l=g.useCallback(async(d,f)=>{if(t){const p=i({nodeId:e,type:"target"}).find(m=>{var v;return((v=a(m.source))==null?void 0:v.type)===re.LLM}),y=p?a(p==null?void 0:p.source):void 0;if(y){if(y.data.status!==Ze.Loaded)return o({variant:"destructive",description:n("editor_node.errors.llm_not_loaded_yet")})}else return o({variant:"destructive",description:n("editor_node.errors.llm_not_found")});try{const m=s(d);if(!m)throw new Error("Stream is not supported");const v=[];for await(const b of m)b&&Array.isArray(b)&&(v.push(...b.map(x=>x.content)),b!=null&&b.length&&(f==null||f(b.map(x=>x.content).join(""))));return v.join("")}catch(m){if(m instanceof Error&&m.message.includes("LLM_NOT_LOADED_YET"))return o({title:n("editor_node.errors.llm_not_loaded_yet")});o({variant:"destructive",title:n("editor_node.errors.stream_message_failed")})}}},[t,i,e,a,o,n,s]),u=g.useCallback(d=>{if(!a(d))return[];const f=[];return i({nodeId:d,type:"target"}).forEach(p=>{const y=a(p.source);!y||y.type!==re.LLM||f.push({node:y,connections:[p]})}),f},[i,a]);return{createMessage:l,updateEditorContent:c,getLinkedConnections:u}},f9=g.lazy(()=>At(()=>import("./PlateEditor-B1zCAb0U.js").then(async e=>(await e.__tla,e)),__vite__mapDeps([12,1,2,10,13,4,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,3,5,6,102]))),p9=g.memo(e=>{var l;const{id:t,data:n,selected:r,isConnectable:o}=e;u9(t);const{createMessage:a,updateEditorContent:i,getLinkedConnections:s}=d9(t),c=g.useCallback(u=>{i(u)},[i]);return h.jsxs("div",{className:"w-full min-w-[1240px] h-full",children:[h.jsx(Ou,{isVisible:!!r,minWidth:1240,minHeight:400}),h.jsx(Ge,{type:"target",position:fe.Top,isConnectable:o}),h.jsxs("div",{className:"min-w-10 min-h-10 w-full h-full rounded-lg border bg-background",children:[h.jsx(tn,{className:"!z-[100]",id:t,enableToStandalone:!0,getLinkedConnections:s}),h.jsx(g.Suspense,{fallback:h.jsx("div",{className:"h-full w-ful rounded-lg flex justify-center items-center",children:h.jsx(de,{name:"loader-circle",className:"animate-spin"})}),children:h.jsx("div",{className:"h-full w-ful rounded-lg","data-registry":"plate",children:h.jsx(f9,{defaultValue:(l=n==null?void 0:n.flowNode)==null?void 0:l.data,onValueChange:c,copilotStream:a})})})]}),h.jsx(Ge,{type:"source",position:fe.Bottom,isConnectable:o})]})}),h9=e=>{const t=g.useCallback(async({edgeId:n})=>{try{return{deleteEdgeId:n}}catch{return{deleteEdgeId:n}}},[]);cn(e,t)},m9=g.memo(e=>{var i,s;const{id:t,data:n,isConnectable:r}=e,{t:o}=ke("flows");h9(t);let a="";switch((i=n.entity)==null?void 0:i.placeholder_type){case"VECTOR_DATABASE_RETREIVER":a=o("placeholder_node.vector_database_retriever");break}return h.jsxs("div",{children:[h.jsx(Ge,{type:"target",position:fe.Top,isConnectable:r}),h.jsxs(wo,{className:"flex justify-center max-w-80",variant:"default",children:[h.jsx(tn,{id:t}),h.jsx(de,{name:"land-plot",className:"w-7 h-7"}),h.jsxs("div",{className:"ml-2 pr-4",children:[h.jsx(_o,{children:`${((s=n.entity)==null?void 0:s.placeholder)||""}`}),h.jsx(cs,{children:a?h.jsx(en,{children:a}):void 0})]})]}),h.jsx(Ge,{type:"source",position:fe.Bottom,id:"a",isConnectable:r})]})}),y9=g.lazy(()=>At(()=>import("./CodeContainerApp-DJEe3ePI.js").then(async e=>(await e.__tla,e)).then(e=>e.C),__vite__mapDeps([109,1,2,101,104,9,110,4,111,112]))),g9=g.memo(e=>{const{id:t,isConnectable:n}=e;return h.jsxs("div",{className:"w-[1380px] h-[600px] rounded-lg border overflow-hidden shadow-sm",children:[h.jsx(Ge,{type:"target",position:fe.Top,isConnectable:n}),h.jsxs("div",{className:"w-full h-full rounded-lg border bg-card overflow-hidden",children:[h.jsx(tn,{id:t}),h.jsx(g.Suspense,{fallback:h.jsx("div",{className:"h-full w-full flex justify-center items-center",children:h.jsx(de,{name:"loader-circle",className:"animate-spin"})}),children:h.jsx(y9,{...e})})]}),h.jsx(Ge,{type:"source",position:fe.Bottom,isConnectable:n})]})}),v9=["vite-vue","shadcn-react-vite","todo-app-react-vite","porfolio-nextjs"],b9=async e=>{switch(e){case"vite-vue":return At(()=>import("./vite-vue-Bmz2z3Fo.js"),[]).then(t=>t.BASE);case"shadcn-react-vite":return At(()=>import("./shadcn-react-vite-CDJ9BaE9.js"),[]).then(t=>t.BASE);case"todo-app-react-vite":return At(()=>import("./todo-app-react-vite-BBWBkRjR.js"),[]).then(t=>t.BASE);case"porfolio-nextjs":return At(()=>import("./porfolio-nextjs-Y_dlzAA8.js"),[]).then(t=>t.BASE);default:throw new Error(`Unknown source base: ${e}`)}},sS=g.memo(({className:e,onUpdateSourceBase:t})=>{const{t:n}=ke("components"),[r,o]=g.useState();return h.jsxs(Tt,{className:K("mw-full",e),children:[h.jsx(hn,{className:"p-4",children:h.jsx(jn,{children:n("add_source_base.title")})}),h.jsx(mn,{className:"p-4",children:h.jsxs("div",{className:"flex items-center justify-center w-full h-full flex-col",children:[h.jsxs(go,{onValueChange:a=>o(a),children:[h.jsx(Dr,{className:"w-full mb-4",children:h.jsx(vo,{placeholder:n("add_source_base.source_base_select_placeholder")})}),h.jsx(Lr,{children:v9.map(a=>h.jsx(Sn,{value:`${a}`,children:n(`add_source_base.sourcebases.${a.toLowerCase()}`)},`${a}`))})]}),h.jsx(ft,{className:"w-full",onClick:async()=>r&&t(await b9(r)),children:n("add_source_base.update_source")})]})})]})}),x9=()=>{const{getNode:e,getHandleConnections:t}=Fn(),n=g.useCallback(async(r,o)=>{await ce("FlowNode").update(r,{raw:Pm(o)})},[]);return{getLinkedConnections:g.useCallback(r=>{if(!e(r))return[];const o=[];return t({nodeId:r,type:"target"}).forEach(a=>{const i=e(a.source);!i||i.type!==re.LLM||o.push({node:i,connections:[a]})}),o},[t,e]),updateCodeContainerData:n}},w9=e=>{const t=Ae(r=>r.createOrUpdateFlowEdge),n=g.useCallback(async({edgeId:r,source:o,target:a,connection:i})=>{try{if((o==null?void 0:o.type)===re.LLM&&(a==null?void 0:a.type)===re.VSLiteApp){await t({source:i.source,target:i.target,sourceHandle:i.sourceHandle,targetHandle:i.targetHandle});return}return{deleteEdgeId:r}}catch{return{deleteEdgeId:r}}},[t]);cn(e,n)},_9=g.lazy(()=>At(()=>import("./index-ISt3onpd.js").then(async e=>(await e.__tla,e)),__vite__mapDeps([103,1,2,101,104,3,4,5,6,105]))),j9=g.memo(e=>{var u,d,f;const{id:t,isConnectable:n,data:r}=e,[o,a]=g.useState((u=r==null?void 0:r.flowNode)!=null&&u.raw?Im(r.flowNode.raw):void 0),{updateCodeContainerData:i,getLinkedConnections:s}=x9();w9(t);const c=g.useCallback(async p=>{var y,m;(y=r==null?void 0:r.flowNode)!=null&&y.id&&(await i((m=r==null?void 0:r.flowNode)==null?void 0:m.id,p),a(p))},[(d=r==null?void 0:r.flowNode)==null?void 0:d.id,i]),l=g.useCallback(async(p,y)=>{a(m=>{var b;const v=Dm(m||{},p,y);return i((b=r==null?void 0:r.flowNode)==null?void 0:b.id,v),v})},[(f=r==null?void 0:r.flowNode)==null?void 0:f.id,i]);return o?h.jsxs("div",{className:"w-[1380px] h-[600px] rounded-lg border overflow-hidden shadow-sm",children:[h.jsx(Ge,{type:"target",position:fe.Top,isConnectable:n}),h.jsxs("div",{className:"w-full h-full rounded-lg border bg-card overflow-hidden",children:[h.jsx(tn,{id:t,className:"z-50",enableToStandalone:!0,getLinkedConnections:s}),h.jsx(g.Suspense,{fallback:h.jsx("div",{className:"h-full w-full flex justify-center items-center",children:h.jsx(de,{name:"loader-circle",className:"animate-spin"})}),children:h.jsx(_9,{fileSystemTree:o,onUpdateFileContent:l})})]}),h.jsx(Ge,{type:"source",position:fe.Bottom,isConnectable:n})]}):h.jsx("div",{className:"h-full flex justify-center items-center",children:h.jsx(sS,{className:"w-64",onUpdateSourceBase:c})})}),E9={[re.LLM]:m5,[re.Toolbox]:eie,[re.Thread]:b5,[re.Message]:sie,[re.Prompt]:lie,[re.SessionInfo]:Bbe,[re.Schema]:Hbe,[re.CSVData]:Wbe,[re.ToolDefinition]:Ybe,[re.DefaultEmbeddingModel]:Xbe,[re.VectorDatabase]:hxe,[re.JSONLData]:yxe,[re.ApplicationBar]:r9,[re.Shape]:a9,[re.CircleShape]:s9,[re.TriangleShape]:l9,[re.EditorApp]:p9,[re.PlaceHolder]:m9,[re.CodeContainerApp]:g9,[re.VSLiteApp]:j9};function vxe(e,t=[]){let n=[];function r(a,i){const s=g.createContext(i),c=n.length;n=[...n,i];function l(d){const{scope:f,children:p,...y}=d,m=(f==null?void 0:f[e][c])||s,v=g.useMemo(()=>y,Object.values(y));return h.jsx(m.Provider,{value:v,children:p})}function u(d,f){const p=(f==null?void 0:f[e][c])||s,y=g.useContext(p);if(y)return y;if(i!==void 0)return i;throw new Error(`\`${d}\` must be used within \`${a}\``)}return l.displayName=a+"Provider",[l,u]}const o=()=>{const a=n.map(i=>g.createContext(i));return function(i){const s=(i==null?void 0:i[e])||a;return g.useMemo(()=>({[`__scope${e}`]:{...i,[e]:s}}),[i,s])}};return o.scopeName=e,[r,bxe(o,...t)]}function bxe(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(o){const a=r.reduce((i,{useScope:s,scopeName:c})=>{const l=s(o)[`__scope${c}`];return{...i,...l}},{});return g.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return n.scopeName=t.scopeName,n}var xxe="Toggle",uE=g.forwardRef((e,t)=>{const{pressed:n,defaultPressed:r=!1,onPressedChange:o,...a}=e,[i=!1,s]=Zt({prop:n,onChange:o,defaultProp:r});return h.jsx(Oe.button,{type:"button","aria-pressed":i,"data-state":i?"on":"off","data-disabled":e.disabled?"":void 0,...a,ref:t,onClick:he(e.onClick,()=>{e.disabled||s(!i)})})});uE.displayName=xxe;let dE,ei,fE,pE,Rh;dE=uE,ei="ToggleGroup",[fE,q9]=vxe(ei,[qr]),pE=qr(),Rh=U.forwardRef((e,t)=>{const{type:n,...r}=e;if(n==="single"){const o=r;return h.jsx(wxe,{...o,ref:t})}if(n==="multiple"){const o=r;return h.jsx(_xe,{...o,ref:t})}throw new Error(`Missing prop \`type\` expected on \`${ei}\``)}),Rh.displayName=ei;var[S9,C9]=fE(ei),wxe=U.forwardRef((e,t)=>{const{value:n,defaultValue:r,onValueChange:o=()=>{},...a}=e,[i,s]=Zt({prop:n,defaultProp:r,onChange:o});return h.jsx(S9,{scope:e.__scopeToggleGroup,type:"single",value:i?[i]:[],onItemActivate:s,onItemDeactivate:U.useCallback(()=>s(""),[s]),children:h.jsx(O9,{...a,ref:t})})}),_xe=U.forwardRef((e,t)=>{const{value:n,defaultValue:r,onValueChange:o=()=>{},...a}=e,[i=[],s]=Zt({prop:n,defaultProp:r,onChange:o}),c=U.useCallback(u=>s((d=[])=>[...d,u]),[s]),l=U.useCallback(u=>s((d=[])=>d.filter(f=>f!==u)),[s]);return h.jsx(S9,{scope:e.__scopeToggleGroup,type:"multiple",value:i,onItemActivate:c,onItemDeactivate:l,children:h.jsx(O9,{...a,ref:t})})});Rh.displayName=ei;var[jxe,Exe]=fE(ei),O9=U.forwardRef((e,t)=>{const{__scopeToggleGroup:n,disabled:r=!1,rovingFocus:o=!0,orientation:a,dir:i,loop:s=!0,...c}=e,l=pE(n),u=Do(i),d={role:"group",dir:u,...c};return h.jsx(jxe,{scope:n,rovingFocus:o,disabled:r,children:o?h.jsx(Zs,{asChild:!0,...l,orientation:a,dir:u,loop:s,children:h.jsx(Oe.div,{...d,ref:t})}):h.jsx(Oe.div,{...d,ref:t})})}),Ih="ToggleGroupItem",M9=U.forwardRef((e,t)=>{const n=C9(Ih,e.__scopeToggleGroup),r=Exe(Ih,e.__scopeToggleGroup),o=pE(e.__scopeToggleGroup),a=n.value.includes(e.value),i=r.disabled||e.disabled,s={...e,pressed:a,disabled:i},c=U.useRef(null);return r.rovingFocus?h.jsx(ec,{asChild:!0,...o,focusable:!i,active:a,ref:c,children:h.jsx(hE,{...s,ref:t})}):h.jsx(hE,{...s,ref:t})});M9.displayName=Ih;let hE;hE=U.forwardRef((e,t)=>{const{__scopeToggleGroup:n,value:r,...o}=e,a=C9(Ih,n),i={role:"radio","aria-checked":e.pressed,"aria-pressed":void 0},s=a.type==="single"?i:void 0;return h.jsx(uE,{...s,...o,ref:t,onPressedChange:c=>{c?a.onItemActivate(r):a.onItemDeactivate(r)}})}),Kh=Rh,Xh=M9;const N9=Hr("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 gap-2",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground"},size:{default:"h-10 px-3 min-w-10",sm:"h-9 px-2.5 min-w-9",lg:"h-11 px-5 min-w-11"}},defaultVariants:{variant:"default",size:"default"}}),Sxe=g.forwardRef(({className:e,variant:t,size:n,...r},o)=>h.jsx(dE,{ref:o,className:K(N9({variant:t,size:n,className:e})),...r}));Sxe.displayName=dE.displayName;const k9=g.createContext({size:"default",variant:"default"}),P9=g.forwardRef(({className:e,variant:t,size:n,children:r,...o},a)=>h.jsx(Kh,{ref:a,className:K("flex items-center justify-center gap-1",e),...o,children:h.jsx(k9.Provider,{value:{variant:t,size:n},children:r})}));P9.displayName=Kh.displayName;const A9=g.forwardRef(({className:e,children:t,variant:n,size:r,...o},a)=>{const i=g.useContext(k9);return h.jsx(Xh,{ref:a,className:K(N9({variant:i.variant||n,size:i.size||r}),e),...o,children:t})});A9.displayName=Xh.displayName;function Cxe(){const e=Ve(t=>`x: ${t.transform[0].toFixed(2)}, y: ${t.transform[1].toFixed(2)}, zoom: ${t.transform[2].toFixed(2)}`);return h.jsx("div",{children:e})}function Oxe({change:e}){var r,o,a,i;const t="id"in e?e.id:"-",{type:n}=e;return h.jsxs("div",{className:"mb-3",children:[h.jsxs("div",{children:["node id: ",t]}),h.jsxs("div",{children:[n==="add"?JSON.stringify(e.item,null,2):null,n==="dimensions"?`dimensions: ${(r=e.dimensions)==null?void 0:r.width} \xD7 ${(o=e.dimensions)==null?void 0:o.height}`:null,n==="position"?`position: ${(a=e.position)==null?void 0:a.x.toFixed(1)}, ${(i=e.position)==null?void 0:i.y.toFixed(1)}`:null,n==="remove"?"remove":null,n==="select"?e.selected?"select":"unselect":null]})]})}function Mxe({limit:e=20}){const[t,n]=g.useState([]),r=vt(),o=g.useCallback(i=>{n(s=>[...i,...s].slice(0,e))},[e]);g.useEffect(()=>(r.setState({onNodesChange:o}),()=>r.setState({onNodesChange:void 0})),[o,r]);const a=()=>h.jsx("div",{children:"No Changes Triggered"});return h.jsx(h.Fragment,{children:t.length===0?h.jsx(a,{}):t.map((i,s)=>h.jsx(Oxe,{change:i},s))})}function Nxe(){const{getInternalNode:e}=Fn(),t=Ote();return h.jsx(Ste,{children:h.jsx("div",{className:"text-secondary-foreground",children:t.map(n=>{var a,i;const r=e(n.id);if(!r)return null;const o=r==null?void 0:r.internals.positionAbsolute;return h.jsx(kxe,{id:n.id,selected:!!n.selected,type:n.type||"default",position:n.position,absPosition:o,width:((a=n.measured)==null?void 0:a.width)??0,height:((i=n.measured)==null?void 0:i.height)??0,data:n.data},n.id)})})})}function kxe({id:e,type:t,selected:n,position:r,absPosition:o,width:a,height:i,data:s}){if(!a||!i)return null;const c=`translate(${o.x}px, ${o.y+i}px)`,l=`${r.x.toFixed(1)}, ${r.y.toFixed(1)}`,u=`${a} \xD7 ${i}`,d=n?"Selected":"Not Selected";return h.jsxs("div",{style:{position:"absolute",transform:c,width:a*2},className:"text-xs",children:[h.jsxs("div",{children:["id: ",e]}),h.jsxs("div",{children:["type: ",t]}),h.jsxs("div",{children:["selected: ",d]}),h.jsxs("div",{children:["position: ",l]}),h.jsxs("div",{children:["dimensions: ",u]}),h.jsxs("div",{children:["data: ",JSON.stringify(s,null,2)]})]})}function Pxe({tools:e}){return h.jsx(Xi,{position:"top-left",className:"bg-card p-1 border rounded shadow-sm",children:h.jsx(P9,{type:"multiple",children:e.map(({active:t,setActive:n,label:r,value:o})=>h.jsx(A9,{value:o,onClick:()=>n(a=>!a),"aria-pressed":t,className:"bg-card text-card-foreground transition-colors duration-300 hover:bg-secondary hover:text-secondary-foreground",children:r},o))})})}function T9(){const[e,t]=g.useState(!1),[n,r]=g.useState(!1),[o,a]=g.useState(!1),i=[{active:e,setActive:t,label:"Node Inspector",value:"node-inspector"},{active:n,setActive:r,label:"Change Logger",value:"change-logger"},{active:o,setActive:a,label:"Viewport Logger",value:"viewport-logger"}];return h.jsxs(h.Fragment,{children:[h.jsx(Pxe,{tools:i}),n&&h.jsx(Xi,{className:"text-xs p-5 bg-white rounded shadow-md overflow-y-auto max-h-[50%] mt-20",position:"bottom-right",children:h.jsx(Mxe,{})}),e&&h.jsx(Nxe,{}),o&&h.jsx(Xi,{position:"bottom-left",className:"text-secondary-foreground",children:h.jsx(Cxe,{})})]})}T9.displayName="DevTools";const Axe=()=>{const e=g.useRef({}),t=g.useRef({}),n=Ae(M=>M.flowEdges),r=ot(M=>M.currentSession),o=Ae(M=>M.setNodes),a=Ae(M=>M.updateNodes),i=Ae(M=>M.updateEdges),s=Ae(M=>M.addConnectionToEdges),c=Ae(M=>M.reset),l=Ae(M=>M.findFlowEdges),u=Ae(M=>M.deleteFlowNode),d=Ae(M=>M.deleteFlowEdge),f=Ae(M=>M.updateFlowNode),p=Ae(M=>M.getNodes),y=Ae(M=>M.findFlowNodesWithSource),m=g.useRef(n),v=g.useRef(),[b,x]=g.useState({loading:!1});m.current=n;const _=g.useCallback(async(M,k)=>{try{v.current=M,c(),await(k==null?void 0:k())}catch{v.current=void 0}},[c]),w=g.useCallback(async M=>{try{if(!(r!=null&&r.id))return;x(A=>({...A,loading:!0}));const k=await y({...M,where:{...M.where,session_id:r.id}}),R=await l({where:[{source:mr(k.map(A=>A.id))},{target:mr(k.map(A=>A.id))}]});return{flowNodes:k,flowEdges:R}}finally{x(k=>({...k,loading:!1}))}},[y,l,r==null?void 0:r.id]),j=g.useCallback(async M=>{var k,R;for(const A of M)if("id"in A&&Object.values(bl).includes(A.id)&&A.type!=="remove")a([A]);else if(A.type==="position"&&A.position&&!isNaN(A.position.x)&&!isNaN(A.position.y)){a([A]);const C=A.position.x,N=A.position.y;clearTimeout(e.current[A.id]),e.current[A.id]=setTimeout(async()=>{e.current[A.id]=void 0,await f({id:A.id,x:C,y:N},{silent:!0})},200)}else if(A.type==="remove"){const C=(k=p([A.id]))==null?void 0:k[0];if(!(C!=null&&C.type)||Jne.includes(C.type))return;await u({id:A.id})}else if(A.type==="dimensions"&&A.dimensions&&!isNaN(A.dimensions.width)&&!isNaN(A.dimensions.height)){const C=(R=p([A.id]))==null?void 0:R[0];if(!(C!=null&&C.width)&&!(C!=null&&C.height))return;a([A]),clearTimeout(t.current[A.id]);const N=A.dimensions.width,T=A.dimensions.height;t.current[A.id]=setTimeout(async()=>{await f({id:A.id,width:N,height:T},{silent:!0})},200)}else A.type==="select"&&a([A])},[a,f,p,u]),E=g.useCallback(M=>{Promise.all(M.map(async k=>{if(k.type==="remove")return d({id:k.id})})),i(M)},[d,i]),S=g.useCallback(M=>{s(M)},[s]),O=g.useCallback(()=>{var M;(M=m.current)==null||M.length},[]),P=g.useCallback(M=>{o(k=>{var N,T;let R;if(typeof M=="function"?R=M(k):R=M,!R)return k;const A=k==null?void 0:k.find(I=>I.id===R.id),C={id:R.id,item:A?Lf(A,R):{...R,position:{x:((N=R.position)==null?void 0:N.x)||0,y:((T=R.position)==null?void 0:T.y)||0}},type:A?"replace":"add"};return Na([C],k)})},[o]);return{syncEdges:O,initialFlow:_,loadingState:b,prepareFlowInfo:w,updateNodeChanges:j,updateEdgeChanges:E,updateOrCreateNode:P,currentSessionIdRef:v,updateEdgeConnection:S}},Txe=e=>{const t=ot(u=>{var d;return(d=u.currentSession)==null?void 0:d.id}),{loadingState:n,prepareFlowInfo:r,syncEdges:o,initialFlow:a,currentSessionIdRef:i}=e,s=Ae(u=>u.ready),c=Ae(u=>u.removeSyncNodeQueue),l=Ae(u=>u.removeSyncEdgeQueue);g.useLayoutEffect(()=>{},[t]),g.useEffect(()=>{n.loading||!s||!t||i.current===t||a(t,async()=>{await r({where:{session_id:t}})})},[a,r,n.loading,i,s,t]),g.useEffect(()=>{const u=Ae.subscribe(f=>f.syncNodeQueue,async(f,p)=>{var v;const y=p.map(b=>b.timestamp),m=f.filter(b=>!y.includes(b.timestamp));if(m.length){c(m.map(b=>b.timestamp));for(const b of m){const x=await r(b.query);switch(b.syncType){case"Thread":{const _=(v=x==null?void 0:x.flowNodes)==null?void 0:v.map(w=>{if(w.source_id&&w.source_type==="Thread")return w.source_id}).filter(Boolean);if(_!=null&&_.length){const w=await ce("Message").find({where:{thread_id:mr(_)}});await r({where:{source_type:"Message",source_id:mr(w.map(j=>j.id))}})}}break}}}}),d=Ae.subscribe(f=>f.syncEdgeQueue,async(f,p)=>{const y=p.map(v=>v.timestamp),m=f.filter(v=>!y.includes(v.timestamp));m.length&&(l(m.map(v=>v.timestamp)),o())});return()=>{u(),d()}},[r,l,c,o])},Rxe=()=>{const[e,t]=g.useState(!0),n=Axe(),r=an(u=>u.selectedModel),o=g.useRef(r),a=an(u=>u.setInitProgressCallback),{updateOrCreateNode:i,updateNodeChanges:s,updateEdgeChanges:c,updateEdgeConnection:l}=n;return Txe(n),o.current=r,g.useEffect(()=>{const u=a==null?void 0:a(d=>{if(!o.current)return;const f=`${o.current}`;i(p=>{const y=p==null?void 0:p.find(m=>{var v;return(v=m.data)!=null&&v.entity&&typeof m.data.entity=="object"&&"name"in m.data.entity?m.data.entity.name===f:!1});if(y)return y.data.label=d.text,y.data.status=Ze.Loading,d.progress===100&&(y.data.label="",y.data.status=Ze.Loaded),y})});return()=>{u==null||u()}},[a,i]),g.useMemo(()=>({updateNodeChanges:s,updateEdgeChanges:c,initializing:e,setInitializing:t,updateEdgeConnection:l}),[s,c,e,t,l])},Ixe=()=>{const e=Tu(l=>l.theme),t=Ae(l=>l.nodes),n=Ae(l=>l.edges),{updateNodeChanges:r,updateEdgeChanges:o,updateEdgeConnection:a}=Rxe(),i=g.useCallback(l=>{r(l)},[r]),s=g.useCallback(l=>{o(l)},[o]),c=g.useCallback(l=>{a(l)},[a]);return h.jsxs(jte,{nodes:t,edges:n,nodeTypes:E9,onNodesChange:i,onEdgesChange:s,onConnect:c,panOnScroll:!0,panOnScrollMode:Wo.Free,colorMode:e,fitView:!0,children:[h.jsx(Ate,{variant:yo.Dots,gap:24,size:1}),h.jsx(Bte,{}),h.jsx(Jte,{}),Ewe?h.jsx(T9,{}):void 0]})},Dxe=g.memo(Ixe);function Lxe(){return h.jsx(Dxe,{})}function mE(){const e=rC();return H9(e),h.jsx(Cwe,{})}const Fxe=k7(h.jsxs(mc,{Component:Cq,errorElement:h.jsx(mE,{}),children:[h.jsx(mc,{path:Xy.whiteboard,Component:Lxe,errorElement:h.jsx(mE,{})}),h.jsx(mc,{path:Xy.application,errorElement:h.jsx(mE,{}),Component:Rre}),h.jsx(mc,{path:"*",element:h.jsx(O7,{to:In("whiteboard")})})]})),Bxe=(e,t)=>{switch(oW){case"browser":return fC(e,t);case"hash":return eV(e);default:return fC(e,t)}},$xe=Bxe(Fxe,{basename:"/NoLLMChat/"});Swe("[BASE_URL]","/NoLLMChat/");let R9;R9=g.memo(()=>{const e=!window.location.pathname.includes("/NoLLMChat/");return g.useLayoutEffect(()=>{e&&(window.location.href="/NoLLMChat/".replace("//","/"))},[e]),e?h.jsx(V9,{className:"w-screen h-screen",enableLogo:!0,typing:!0}):h.jsx(dV,{router:$xe})},()=>!0),Z9=Object.freeze(Object.defineProperty({__proto__:null,default:R9},Symbol.toStringTag,{value:"Module"}))});export{q9 as $,SE as A,Vh as B,CE as C,OE as D,Js as E,Uh as F,Gs as G,fa as H,Fu as I,Bu as J,Hh as K,ME as L,NE as M,ai as N,kE as O,PE as P,AE as Q,TE as R,Wh as S,RE as T,IE as U,DE as V,LE as W,FE as X,BE as Y,$E as Z,qr as _,Rwe as __tla,qh as a,$u as a$,Do as a0,Zs as a1,Yh as a2,ec as a3,Kh as a4,Xh as a5,zE as a6,VE as a7,UE as a8,Y9 as a9,HE as aA,WE as aB,zu as aC,Qh as aD,Jh as aE,Gh as aF,Zh as aG,em as aH,tm as aI,nm as aJ,rm as aK,om as aL,am as aM,im as aN,sm as aO,cm as aP,lm as aQ,um as aR,qE as aS,dm as aT,YE as aU,K9 as aV,mt as aW,tc as aX,nc as aY,pa as aZ,ha as a_,fm as aa,KE as ab,X9 as ac,pm as ad,hm as ae,mm as af,XE as ag,ym as ah,gm as ai,vm as aj,bm as ak,xm as al,wm as am,QE as an,JE as ao,Q9 as ap,GE as aq,J9 as ar,ZE as as,_m as at,jm as au,Em as av,Sm as aw,Cm as ax,Om as ay,Mm as az,rc as b,oc as b0,ii as b1,si as b2,G9 as b3,eS as b4,tS as b5,nS as b6,Nm as b7,km as b8,rS as b9,Qe as ba,Nn as bb,Ae as bc,cn as bd,ln as be,Pm as bf,Am as bg,oS as bh,aS as bi,Tm as bj,Rm as bk,ft as bl,iS as bm,Im as bn,Dm as bo,sS as bp,cS as bq,lS as br,ci as bs,ma as bt,Z9 as bu,uS as c,tr as d,Lm as e,dS as f,fS as g,li as h,nr as i,Fm as j,Bm as k,pS as l,Sr as m,hS as n,$m as o,zm as p,mS as q,yS as r,gS as s,Vm as t,un as u,ac as v,Um as w,ic as x,ui as y,vS as z};
