const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/few_shot-CefJPzX-.js","assets/index-DbjMxE6o.js","assets/index-B7JTfCGt.css","assets/copy-COVC0hu6.js","assets/createLucideIcon-q-TAMcMa.js","assets/refresh-ccw-Dl016HEg.js","assets/volume-2-3Z_hjg3L.js","assets/index-D7zprebX.js","assets/index-DOJvyzuh.js","assets/objectWithoutPropertiesLoose-BjXSgPXB.js","assets/index-Sowiy0uU.js","assets/index-Cr8Tc6mT.css","assets/pdf-xbqmmcSf.js","assets/pdf.min-BmcZ7_QX.js","assets/pdf.worker.min-DmjRoT18.js","assets/PlateEditor-CM7GTHu8.js","assets/chevron-down-Cko1Ut6F.js","assets/chevron-right-BcfU25rt.js","assets/check-YXIQ3NAi.js","assets/ellipsis-BlBJRPSh.js","assets/highlighter-DGIWsI6H.js","assets/keyboard-B_IhXATJ.js","assets/superscript-DyxZrfbN.js","assets/subscript-ftZPQs9s.js","assets/align-left-DIVuejXD.js","assets/align-center-CQqpzFEM.js","assets/align-right-BiM8lsy2.js","assets/align-justify-BJ1a4yOl.js","assets/plus-o_bQJjLX.js","assets/eraser-M0NJbe9p.js","assets/star-CDeGeKhv.js","assets/flag-rnQzXY15.js","assets/apple-B9QZSEyG.js","assets/clock-YnBjKBnE.js","assets/leaf-BNlZoiQu.js","assets/lightbulb-CMsKGKG_.js","assets/smile-Cdv5maXZ.js","assets/compass-DVRkWEdb.js","assets/music-DMvgpxcC.js","assets/x-6naiT1Xc.js","assets/search-DdMEfYgO.js","assets/external-link-kJNXfvo2.js","assets/redo-2-aKyT3Q3S.js","assets/undo-2-CSIXVrcY.js","assets/list-BX37CJsY.js","assets/list-ordered-HvA8WFZ7.js","assets/list-todo-Cr8o3ZnC.js","assets/indent-increase-B63q1Orj.js","assets/pilcrow-D65sz0kB.js","assets/heading-1-D7iYxs6S.js","assets/heading-2-EqItLt4I.js","assets/heading-3-rWmCITf_.js","assets/table-Dt4IW6Z5.js","assets/file-code-BSywpoLz.js","assets/quote-CH1o0E8g.js","assets/minus-DgraGOQG.js","assets/square-3BZoP5v5.js","assets/image-Dr4pZMz0.js","assets/table-of-contents-EqXLHYHW.js","assets/columns-3-DPfW6_td.js","assets/link-2-CKa-QuIH.js","assets/calendar-BovWoQQn.js","assets/wrap-text-CvuDGNfl.js","assets/link-CHp4XN3k.js","assets/pen-aE4x0VXH.js","assets/eye-_hNLWgbs.js","assets/indent-decrease-BuzBq9AX.js","assets/trash-DO2VEteF.js","assets/rectangle-vertical-D0UaPsHc.js","assets/rectangle-horizontal-DGAzmGBf.js","assets/list-collapse-DkfhqBP2.js","assets/pointer-qgiEka5y.js","assets/wand-sparkles-BFxH0j2o.js","assets/bold-6wTiKg1v.js","assets/italic-C4UYm_FJ.js","assets/underline-Chm7zkgm.js","assets/strikethrough-DlRAqw39.js","assets/code-xml-CxK8zGMs.js","assets/baseline-CjghWAe6.js","assets/paint-bucket-DLSOYyX6.js","assets/arrow-up-to-line-CnA3_7Jo.js","assets/circle-g0pdC5ZZ.js","assets/text-DZCKltf9.js","assets/unlink-CHV0nt3R.js","assets/arrow-left-BB5b0Icy.js","assets/arrow-right-DCqgcyhf.js","assets/download-HNaAX33p.js","assets/chevrons-up-down-C-1WES_8.js","assets/trash-2-DYbrlyAs.js","assets/chevron-left-BngplW91.js","assets/sparkles-CDHfyt7l.js","assets/combine-Dcv8iPrH.js","assets/ungroup-BYJ4VeZo.js","assets/grip-vertical-M1BkuZ_v.js","assets/pen-line-Ck48w2NP.js","assets/badge-help-CEZMzQRM.js","assets/wand-Cu3Uaaj6.js","assets/list-end-CCsrT1WI.js","assets/list-plus-BLo6Flv_.js","assets/list-minus-C8uyCS20.js","assets/feather-Bo1DUFcU.js","assets/album-CYameSQE.js","assets/corner-up-left-D7vc4-2f.js","assets/loader-circle-BytNS5W_.js","assets/use-prevent-pitch-zoom-ClBdS4LL.js","assets/PlateEditor-BQPW60dV.css","assets/CodeContainerApp-UXO66lvG.js","assets/index-C9I4Fqu8.js","assets/folder-open-F2UW4rQe.js","assets/folder-D_Gej_PX.js","assets/file-DVtfjRtQ.js","assets/index-DFjBx4x8.js","assets/index-HSnfLTSA.css"])))=>i.map(i=>d[i]);
import{r as g,M as eE,j as h,u as Ah,P as Dxe,a as tE,L as Lxe,m as Fxe,c as Bxe,f as n$,i as $xe,b as nE,d as r$,e as zxe,g as Vxe,h as Zn,F as ae,k as Eu,l as gn,R as Uxe,n as Fn,o as Jt,p as Oe,q as he,s as Cn,t as tt,v as J,w as Ur,S as Hr,x as Ro,D as Su,y as Hxe,z as Cu,A as de,B as o$,C as Wxe,E as Ae,G as Ou,H as pt,I as Mu,J as Us,K as On,N as on,O as ue,Q as Nu,T as a$,U as qxe,V as rE,W as Th,X as Xe,Y as i$,Z as V,_ as Hs,$ as Yxe,a0 as Kxe,a1 as s$,a2 as Xxe,a3 as Wr,a4 as Pu,a5 as Gxe,a6 as Zt,a7 as ku,a8 as Qxe,a9 as Au,aa as c$,ab as Rh,ac as oE,ad as Jxe,ae as Zxe,af as ewe,ag as twe,ah as nwe,ai as rwe,aj as Ws,ak as owe,al as awe,am as iwe,an as l$,ao as u$,ap as swe,aq as cwe,ar as d$,as as f$,at as aE,au as st,av as lwe,aw as p$,ax as iE,ay as Ih,az as uwe,aA as dwe,aB as fwe,aC as pwe,__tla as hwe}from"./index-DbjMxE6o.js";import mwe,{__tla as ywe}from"./copy-COVC0hu6.js";import gwe,{__tla as vwe}from"./refresh-ccw-Dl016HEg.js";import bwe,{__tla as xwe}from"./volume-2-3Z_hjg3L.js";let h$,sE,cE,Dh,lE,uE,qs,Ys,ua,Tu,Ru,Lh,dE,fE,ei,pE,hE,mE,yE,Fh,gE,vE,bE,xE,wE,_E,jE,qr,Bh,Iu,Io,Ks,$h,Xs,zh,Vh,EE,SE,CE,m$,OE,ME,Du,Uh,Hh,Wh,qh,Yh,Kh,Xh,Gh,Qh,Jh,Zh,em,tm,nm,rm,NE,om,PE,y$,ht,Gs,Qs,da,fa,am,kE,g$,im,sm,cm,AE,lm,um,dm,fm,pm,hm,TE,RE,v$,IE,b$,DE,mm,ym,gm,vm,bm,xm,wm,Js,Zs,ti,ni,x$,LE,FE,BE,_m,jm,$E,ke,vn,qt,zE,Em,VE,UE,Sm,Cm,ut,HE,WE,qE,YE,Ge,Bn,KE,XE,ri,pa,w$,GE,er,Om,QE,Mm,JE,oi,tr,Nm,Pm,ZE,jr,eS,km,Am,tS,nS,rS,Tm,an,ec,Rm,tc,ai,wwe=Promise.all([(()=>{try{return hwe}catch{}})(),(()=>{try{return ywe}catch{}})(),(()=>{try{return vwe}catch{}})(),(()=>{try{return xwe}catch{}})()]).then(async()=>{class j$ extends g.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function E$({children:e,isPresent:t}){const n=g.useId(),r=g.useRef(null),o=g.useRef({width:0,height:0,top:0,left:0}),{nonce:a}=g.useContext(eE);return g.useInsertionEffect(()=>{const{width:i,height:s,top:c,left:l}=o.current;if(t||!r.current||!i||!s)return;r.current.dataset.motionPopId=n;const u=document.createElement("style");return a&&(u.nonce=a),document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${i}px !important;
            height: ${s}px !important;
            top: ${c}px !important;
            left: ${l}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[t]),h.jsx(j$,{isPresent:t,childRef:r,sizeRef:o,children:g.cloneElement(e,{ref:r})})}const S$=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:o,presenceAffectsLayout:a,mode:i})=>{const s=Ah(C$),c=g.useId(),l=g.useCallback(d=>{s.set(d,!0);for(const f of s.values())if(!f)return;r&&r()},[s,r]),u=g.useMemo(()=>({id:c,initial:t,isPresent:n,custom:o,onExitComplete:l,register:d=>(s.set(d,!1),()=>s.delete(d))}),a?[Math.random(),l]:[n,l]);return g.useMemo(()=>{s.forEach((d,f)=>s.set(f,!1))},[n]),g.useEffect(()=>{!n&&!s.size&&r&&r()},[n]),i==="popLayout"&&(e=h.jsx(E$,{isPresent:n,children:e})),h.jsx(Dxe.Provider,{value:u,children:e})};function C$(){return new Map}const Lu=e=>e.key||"";function aS(e){const t=[];return g.Children.forEach(e,n=>{g.isValidElement(n)&&t.push(n)}),t}const O$=({children:e,exitBeforeEnter:t,custom:n,initial:r=!0,onExitComplete:o,presenceAffectsLayout:a=!0,mode:i="sync"})=>{const s=g.useMemo(()=>aS(e),[e]),c=s.map(Lu),l=g.useRef(!0),u=g.useRef(s),d=Ah(()=>new Map),[f,p]=g.useState(s),[y,m]=g.useState(s);tE(()=>{l.current=!1,u.current=s;for(let x=0;x<y.length;x++){const j=Lu(y[x]);c.includes(j)?d.delete(j):d.get(j)!==!0&&d.set(j,!1)}},[y,c.length,c.join("-")]);const v=[];if(s!==f){let x=[...s];for(let j=0;j<y.length;j++){const w=y[j],_=Lu(w);c.includes(_)||(x.splice(j,0,w),v.push(w))}i==="wait"&&v.length&&(x=v),m(aS(x)),p(s);return}const{forceRender:b}=g.useContext(Lxe);return h.jsx(h.Fragment,{children:y.map(x=>{const j=Lu(x),w=s===y||c.includes(j),_=()=>{if(d.has(j))d.set(j,!0);else return;let E=!0;d.forEach(S=>{S||(E=!1)}),E&&(b==null||b(),m(u.current),o&&o())};return h.jsx(S$,{isPresent:w,initial:!l.current||r?void 0:!1,custom:w?void 0:n,presenceAffectsLayout:a,mode:i,onExitComplete:w?void 0:_,children:x},j)})})};function Im(e){const t=Ah(()=>Fxe(e)),{isStatic:n}=g.useContext(eE);if(n){const[,r]=g.useState(e);g.useEffect(()=>t.on("change",r),[])}return t}function iS(e,t){const n=Im(t()),r=()=>n.set(t());return r(),tE(()=>{const o=()=>n$.preRender(r,!1,!0),a=e.map(i=>i.on("change",o));return()=>{a.forEach(i=>i()),Bxe(r)}}),n}const M$=e=>e&&typeof e=="object"&&e.mix,N$=e=>M$(e)?e.mix:void 0;function P$(...e){const t=!Array.isArray(e[0]),n=t?0:-1,r=e[0+n],o=e[1+n],a=e[2+n],i=e[3+n],s=$xe(o,a,{mixer:N$(a[0]),...i});return t?s(r):s}function k$(e){nE.current=[],e();const t=iS(nE.current,e);return nE.current=void 0,t}function sS(e,t,n,r){if(typeof e=="function")return k$(e);const o=typeof t=="function"?t:P$(t,n,r);return Array.isArray(e)?cS(e,o):cS([e],([a])=>o(a))}function cS(e,t){const n=Ah(()=>[]);return iS(e,()=>{n.length=0;const r=e.length;for(let o=0;o<r;o++)n[o]=e[o].get();return t(n)})}function lS(e){return typeof e=="number"?e:parseFloat(e)}function A$(e,t={}){const{isStatic:n}=g.useContext(eE),r=g.useRef(null),o=Im(r$(e)?lS(e.get()):e),a=g.useRef(o.get()),i=g.useRef(()=>{}),s=()=>{const l=r.current;l&&l.time===0&&l.sample(zxe.delta),c(),r.current=Vxe({keyframes:[o.get(),a.current],velocity:o.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...t,onUpdate:i.current})},c=()=>{r.current&&r.current.stop()};return g.useInsertionEffect(()=>o.attach((l,u)=>n?u(l):(a.current=l,i.current=u,n$.update(s),o.get()),c),[JSON.stringify(t)]),tE(()=>{if(r$(e))return e.on("change",l=>o.set(lS(l)))},[o]),o}var Mt=(e=>(e.Started="started",e.Downloading="downloading",e.Downloaded="downloaded",e.Loading="loading",e.Loaded="loaded",e))(Mt||{}),nc=(e=>(e.LLM="LLM",e.embedding="embedding",e.VLM="VLM",e))(nc||{}),Fu=(e=>(e.WebLLM="WebLLM",e.OpenAI="OpenAI",e))(Fu||{}),Yr=(e=>(e.Started="started",e.Inprogress="inprogress",e.Success="success",e.Failed="failed",e))(Yr||{}),Mn=(e=>(e.Human="human",e.User="user",e.AI="ai",e.System="system",e.Assistant="assistant",e.Tool="tool",e.FewShotExample="few_shot_example",e))(Mn||{}),Bu=(e=>(e.Started="started",e.Inprogress="inprogress",e.Done="done",e))(Bu||{}),Nn=(e=>(e.Chat="chat",e.FewShotExample="few_shot_example",e))(Nn||{}),ii=(e=>(e.VECTOR_DATABASE_RETREIVER="VECTOR_DATABASE_RETREIVER",e))(ii||{});let uS,Dm;uS=async(e,t)=>{let n="",r="",o;const a=[];await e;for await(const i of e)i&&(Array.isArray(i)?(a.push(...i.map(s=>s.content)),a!=null&&a.length&&(r=a.join(""),t==null||t({chunk:i,content:r}))):(n=typeof i=="object"&&"content"in i?`${i.content}`:`${i}`,t==null||t({chunk:i,content:n})),o=i);return{lastChunk:o,content:n}},Dm=()=>{const e=Zn(r=>r.toolsCallingStream),t=Zn(r=>r.structuredStream),n=Zn(r=>r.stream);return{stream:g.useCallback(async(r,{tools:o,schemas:a,onMessageUpdate:i,onMessageFinish:s})=>{var d,f,p,y;a&&(a==null?void 0:a.length)>1;let c;if(a!=null&&a.length){const m=(p=(f=(d=a==null?void 0:a[0])==null?void 0:d.node)==null?void 0:f.data)==null?void 0:p.entity;if(!((y=m==null?void 0:m.schema_items)!=null&&y.length))throw new Error("Schema is not found");c=t(m.schema_items,r)}else o!=null&&o.length?c=e(o.reduce((m,v)=>{var j,w,_,E,S;const b=(j=v.node.data)==null?void 0:j.entity,x=(E=(_=(w=v==null?void 0:v.connectedNodes)==null?void 0:w.find(C=>C.type===ae.Schema))==null?void 0:_.data)==null?void 0:E.entity;return b&&((S=x==null?void 0:x.schema_items)!=null&&S.length)&&m.push({name:b.name,description:b.description,schemaItems:x.schema_items}),m},[]),r):c=n(r);if(!c)throw new Error("Stream is not supported");const{lastChunk:l,content:u}=await uS(c,i);return s==null||s({content:u,lastChunk:l}),{lastChunk:l,content:u}},[n,t,e])}},Mm=globalThis||void 0||self;var rc={},dS;function T$(){if(dS)return rc;dS=1,Object.defineProperty(rc,"__esModule",{value:!0}),rc.parse=i,rc.serialize=l;const e=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,t=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,o=Object.prototype.toString,a=(()=>{const f=function(){};return f.prototype=Object.create(null),f})();function i(f,p){const y=new a,m=f.length;if(m<2)return y;const v=(p==null?void 0:p.decode)||u;let b=0;do{const x=f.indexOf("=",b);if(x===-1)break;const j=f.indexOf(";",b),w=j===-1?m:j;if(x>w){b=f.lastIndexOf(";",x-1)+1;continue}const _=s(f,b,x),E=c(f,x,_),S=f.slice(_,E);if(y[S]===void 0){let C=s(f,x+1,w),M=c(f,w,C);const P=v(f.slice(C,M));y[S]=P}b=w+1}while(b<m);return y}function s(f,p,y){do{const m=f.charCodeAt(p);if(m!==32&&m!==9)return p}while(++p<y);return y}function c(f,p,y){for(;p>y;){const m=f.charCodeAt(--p);if(m!==32&&m!==9)return p+1}return y}function l(f,p,y){const m=(y==null?void 0:y.encode)||encodeURIComponent;if(!e.test(f))throw new TypeError(`argument name is invalid: ${f}`);const v=m(p);if(!t.test(v))throw new TypeError(`argument val is invalid: ${p}`);let b=f+"="+v;if(!y)return b;if(y.maxAge!==void 0){if(!Number.isInteger(y.maxAge))throw new TypeError(`option maxAge is invalid: ${y.maxAge}`);b+="; Max-Age="+y.maxAge}if(y.domain){if(!n.test(y.domain))throw new TypeError(`option domain is invalid: ${y.domain}`);b+="; Domain="+y.domain}if(y.path){if(!r.test(y.path))throw new TypeError(`option path is invalid: ${y.path}`);b+="; Path="+y.path}if(y.expires){if(!d(y.expires)||!Number.isFinite(y.expires.valueOf()))throw new TypeError(`option expires is invalid: ${y.expires}`);b+="; Expires="+y.expires.toUTCString()}if(y.httpOnly&&(b+="; HttpOnly"),y.secure&&(b+="; Secure"),y.partitioned&&(b+="; Partitioned"),y.priority)switch(typeof y.priority=="string"?y.priority.toLowerCase():void 0){case"low":b+="; Priority=Low";break;case"medium":b+="; Priority=Medium";break;case"high":b+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${y.priority}`)}if(y.sameSite)switch(typeof y.sameSite=="string"?y.sameSite.toLowerCase():y.sameSite){case!0:case"strict":b+="; SameSite=Strict";break;case"lax":b+="; SameSite=Lax";break;case"none":b+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${y.sameSite}`)}return b}function u(f){if(f.indexOf("%")===-1)return f;try{return decodeURIComponent(f)}catch{return f}}function d(f){return o.call(f)==="[object Date]"}return rc}T$();var fS="popstate";function R$(e={}){function t(r,o){let{pathname:a,search:i,hash:s}=r.location;return si("",{pathname:a,search:i,hash:s},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(r,o){return typeof o=="string"?o:Kr(o)}return hS(t,n,null,e)}function I$(e={}){function t(o,a){let{pathname:i="/",search:s="",hash:c=""}=Xr(o.location.hash.substring(1));return!i.startsWith("/")&&!i.startsWith(".")&&(i="/"+i),si("",{pathname:i,search:s,hash:c},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(o,a){let i=o.document.querySelector("base"),s="";if(i&&i.getAttribute("href")){let c=o.location.href,l=c.indexOf("#");s=l===-1?c:c.slice(0,l)}return s+"#"+(typeof a=="string"?a:Kr(a))}function r(o,a){Lt(o.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(a)})`)}return hS(t,n,r,e)}function $e(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Lt(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function D$(){return Math.random().toString(36).substring(2,10)}function pS(e,t){return{usr:e.state,key:e.key,idx:t}}function si(e,t,n=null,r){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Xr(t):t,state:n,key:t&&t.key||r||D$()}}function Kr({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Xr(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function hS(e,t,n,r={}){let{window:o=document.defaultView,v5Compat:a=!1}=r,i=o.history,s="POP",c=null,l=u();l==null&&(l=0,i.replaceState({...i.state,idx:l},""));function u(){return(i.state||{idx:null}).idx}function d(){s="POP";let v=u(),b=v==null?null:v-l;l=v,c&&c({action:s,location:m.location,delta:b})}function f(v,b){s="PUSH";let x=si(m.location,v,b);n&&n(x,v),l=u()+1;let j=pS(x,l),w=m.createHref(x);try{i.pushState(j,"",w)}catch(_){if(_ instanceof DOMException&&_.name==="DataCloneError")throw _;o.location.assign(w)}a&&c&&c({action:s,location:m.location,delta:1})}function p(v,b){s="REPLACE";let x=si(m.location,v,b);n&&n(x,v),l=u();let j=pS(x,l),w=m.createHref(x);i.replaceState(j,"",w),a&&c&&c({action:s,location:m.location,delta:0})}function y(v){let b=o.location.origin!=="null"?o.location.origin:o.location.href,x=typeof v=="string"?v:Kr(v);return x=x.replace(/ $/,"%20"),$e(b,`No window.location.(origin|href) available to create URL for href: ${x}`),new URL(x,b)}let m={get action(){return s},get location(){return e(o,i)},listen(v){if(c)throw new Error("A history only accepts one active listener");return o.addEventListener(fS,d),c=v,()=>{o.removeEventListener(fS,d),c=null}},createHref(v){return t(o,v)},createURL:y,encodeLocation(v){let b=y(v);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:f,replace:p,go(v){return i.go(v)}};return m}var L$=new Set(["lazy","caseSensitive","path","id","index","children"]);function F$(e){return e.index===!0}function $u(e,t,n=[],r={}){return e.map((o,a)=>{let i=[...n,String(a)],s=typeof o.id=="string"?o.id:i.join("-");if($e(o.index!==!0||!o.children,"Cannot specify children on an index route"),$e(!r[s],`Found a route id collision on id "${s}".  Route id's must be globally unique within Data Router usages`),F$(o)){let c={...o,...t(o),id:s};return r[s]=c,c}else{let c={...o,...t(o),id:s,children:void 0};return r[s]=c,o.children&&(c.children=$u(o.children,t,i,r)),c}})}function Do(e,t,n="/"){return zu(e,t,n,!1)}function zu(e,t,n,r){let o=typeof t=="string"?Xr(t):t,a=nr(o.pathname||"/",n);if(a==null)return null;let i=mS(e);$$(i);let s=null;for(let c=0;s==null&&c<i.length;++c){let l=Q$(a);s=X$(i[c],l,r)}return s}function B$(e,t){let{route:n,pathname:r,params:o}=e;return{id:n.id,pathname:r,params:o,data:t[n.id],handle:n.handle}}function mS(e,t=[],n=[],r=""){let o=(a,i,s)=>{let c={relativePath:s===void 0?a.path||"":s,caseSensitive:a.caseSensitive===!0,childrenIndex:i,route:a};c.relativePath.startsWith("/")&&($e(c.relativePath.startsWith(r),`Absolute route path "${c.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(r.length));let l=Er([r,c.relativePath]),u=n.concat(c);a.children&&a.children.length>0&&($e(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${l}".`),mS(a.children,t,u,l)),!(a.path==null&&!a.index)&&t.push({path:l,score:Y$(l,a.index),routesMeta:u})};return e.forEach((a,i)=>{var s;if(a.path===""||!((s=a.path)!=null&&s.includes("?")))o(a,i);else for(let c of yS(a.path))o(a,i,c)}),t}function yS(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,o=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return o?[a,""]:[a];let i=yS(r.join("/")),s=[];return s.push(...i.map(c=>c===""?a:[a,c].join("/"))),o&&s.push(...i),s.map(c=>e.startsWith("/")&&c===""?"/":c)}function $$(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:K$(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var z$=/^:[\w-]+$/,V$=3,U$=2,H$=1,W$=10,q$=-2,gS=e=>e==="*";function Y$(e,t){let n=e.split("/"),r=n.length;return n.some(gS)&&(r+=q$),t&&(r+=U$),n.filter(o=>!gS(o)).reduce((o,a)=>o+(z$.test(a)?V$:a===""?H$:W$),r)}function K$(e,t){return e.length===t.length&&e.slice(0,-1).every((n,r)=>n===t[r])?e[e.length-1]-t[t.length-1]:0}function X$(e,t,n=!1){let{routesMeta:r}=e,o={},a="/",i=[];for(let s=0;s<r.length;++s){let c=r[s],l=s===r.length-1,u=a==="/"?t:t.slice(a.length)||"/",d=Vu({path:c.relativePath,caseSensitive:c.caseSensitive,end:l},u),f=c.route;if(!d&&l&&n&&!r[r.length-1].route.index&&(d=Vu({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},u)),!d)return null;Object.assign(o,d.params),i.push({params:o,pathname:Er([a,d.pathname]),pathnameBase:ez(Er([a,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(a=Er([a,d.pathnameBase]))}return i}function Vu(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=G$(e.path,e.caseSensitive,e.end),o=t.match(n);if(!o)return null;let a=o[0],i=a.replace(/(.)\/+$/,"$1"),s=o.slice(1);return{params:r.reduce((c,{paramName:l,isOptional:u},d)=>{if(l==="*"){let p=s[d]||"";i=a.slice(0,a.length-p.length).replace(/(.)\/+$/,"$1")}const f=s[d];return u&&!f?c[l]=void 0:c[l]=(f||"").replace(/%2F/g,"/"),c},{}),pathname:a,pathnameBase:i,pattern:e}}function G$(e,t=!1,n=!0){Lt(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],o="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,i,s)=>(r.push({paramName:i,isOptional:s!=null}),s?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),o+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":e!==""&&e!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,t?void 0:"i"),r]}function Q$(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Lt(!1,`The URL path "${e}" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function nr(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function J$(e,t="/"){let{pathname:n,search:r="",hash:o=""}=typeof e=="string"?Xr(e):e;return{pathname:n?n.startsWith("/")?n:Z$(n,t):t,search:tz(r),hash:nz(o)}}function Z$(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function Lm(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function vS(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Uu(e){let t=vS(e);return t.map((n,r)=>r===t.length-1?n.pathname:n.pathnameBase)}function Hu(e,t,n,r=!1){let o;typeof e=="string"?o=Xr(e):(o={...e},$e(!o.pathname||!o.pathname.includes("?"),Lm("?","pathname","search",o)),$e(!o.pathname||!o.pathname.includes("#"),Lm("#","pathname","hash",o)),$e(!o.search||!o.search.includes("#"),Lm("#","search","hash",o)));let a=e===""||o.pathname==="",i=a?"/":o.pathname,s;if(i==null)s=n;else{let d=t.length-1;if(!r&&i.startsWith("..")){let f=i.split("/");for(;f[0]==="..";)f.shift(),d-=1;o.pathname=f.join("/")}s=d>=0?t[d]:"/"}let c=J$(o,s),l=i&&i!=="/"&&i.endsWith("/"),u=(a||i===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(l||u)&&(c.pathname+="/"),c}var Er=e=>e.join("/").replace(/\/\/+/g,"/"),ez=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),tz=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,nz=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,Wu=class{constructor(e,t,n,r=!1){this.status=e,this.statusText=t||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function qu(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var bS=["POST","PUT","PATCH","DELETE"],rz=new Set(bS),oz=["GET",...bS],az=new Set(oz),iz=new Set([301,302,303,307,308]),sz=new Set([307,308]),Fm={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},cz={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},oc={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},Bm=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,lz=e=>({hasErrorBoundary:!!e.hasErrorBoundary}),xS="remix-router-transitions",wS=Symbol("ResetLoaderData");function _S(e){const t=e.window?e.window:typeof window<"u"?window:void 0,n=typeof t<"u"&&typeof t.document<"u"&&typeof t.document.createElement<"u";$e(e.routes.length>0,"You must provide a non-empty routes array to createRouter");let r=e.mapRouteProperties||lz,o={},a=$u(e.routes,r,void 0,o),i,s=e.basename||"/",c=e.dataStrategy||hz,l=e.patchRoutesOnNavigation,u={...e.future},d=null,f=new Set,p=null,y=null,m=null,v=e.hydrationData!=null,b=Do(a,e.history.location,s),x=null;if(b==null&&!l){let $=$n(404,{pathname:e.history.location.pathname}),{matches:K,route:ne}=RS(a);b=K,x={[ne.id]:$}}b&&!e.hydrationData&&je(b,a,e.history.location.pathname).active&&(b=null);let j;if(b)if(b.some($=>$.route.lazy))j=!1;else if(!b.some($=>$.route.loader))j=!0;else{let $=e.hydrationData?e.hydrationData.loaderData:null,K=e.hydrationData?e.hydrationData.errors:null;if(K){let ne=b.findIndex(le=>K[le.route.id]!==void 0);j=b.slice(0,ne+1).every(le=>!zm(le.route,$,K))}else j=b.every(ne=>!zm(ne.route,$,K))}else{j=!1,b=[];let $=je(null,a,e.history.location.pathname);$.active&&$.matches&&(b=$.matches)}let w,_={historyAction:e.history.action,location:e.history.location,matches:b,initialized:j,navigation:Fm,restoreScrollPosition:e.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||x,fetchers:new Map,blockers:new Map},E="POP",S=!1,C,M=!1,P=new Map,N=null,R=!1,A=!1,O=new Set,k=new Map,T=0,I=-1,L=new Map,D=new Set,z=new Map,H=new Map,F=new Set,U=new Map,Y,G=null;function re(){if(d=e.history.listen(({action:$,location:K,delta:ne})=>{if(Y){Y(),Y=void 0;return}Lt(U.size===0||ne!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let le=Ot({currentLocation:_.location,nextLocation:K,historyAction:$});if(le&&ne!=null){let Se=new Promise(Pe=>{Y=Pe});e.history.go(ne*-1),Ne(le,{state:"blocked",location:K,proceed(){Ne(le,{state:"proceeding",proceed:void 0,reset:void 0,location:K}),Se.then(()=>e.history.go(ne))},reset(){let Pe=new Map(_.blockers);Pe.set(le,oc),W({blockers:Pe})}});return}return se($,K)}),n){Sz(t,P);let $=()=>Cz(t,P);t.addEventListener("pagehide",$),N=()=>t.removeEventListener("pagehide",$)}return _.initialized||se("POP",_.location,{initialHydration:!0}),w}function Z(){d&&d(),N&&N(),f.clear(),C&&C.abort(),_.fetchers.forEach(($,K)=>wr(K)),_.blockers.forEach(($,K)=>pe(K))}function q($){return f.add($),()=>f.delete($)}function W($,K={}){_={..._,...$};let ne=[],le=[];_.fetchers.forEach((Se,Pe)=>{Se.state==="idle"&&(F.has(Pe)?ne.push(Pe):le.push(Pe))}),[...f].forEach(Se=>Se(_,{deletedFetchers:ne,viewTransitionOpts:K.viewTransitionOpts,flushSync:K.flushSync===!0})),ne.forEach(Se=>wr(Se)),le.forEach(Se=>_.fetchers.delete(Se))}function Q($,K,{flushSync:ne}={}){var be,De;let le=_.actionData!=null&&_.navigation.formMethod!=null&&rr(_.navigation.formMethod)&&_.navigation.state==="loading"&&((be=$.state)==null?void 0:be._isRedirect)!==!0,Se;K.actionData?Object.keys(K.actionData).length>0?Se=K.actionData:Se=null:le?Se=_.actionData:Se=null;let Pe=K.loaderData?AS(_.loaderData,K.loaderData,K.matches||[],K.errors):_.loaderData,Ie=_.blockers;Ie.size>0&&(Ie=new Map(Ie),Ie.forEach((Ue,yt)=>Ie.set(yt,oc)));let Ce=S===!0||_.navigation.formMethod!=null&&rr(_.navigation.formMethod)&&((De=$.state)==null?void 0:De._isRedirect)!==!0;i&&(a=i,i=void 0),R||E==="POP"||(E==="PUSH"?e.history.push($,$.state):E==="REPLACE"&&e.history.replace($,$.state));let Me;if(E==="POP"){let Ue=P.get(_.location.pathname);Ue&&Ue.has($.pathname)?Me={currentLocation:_.location,nextLocation:$}:P.has($.pathname)&&(Me={currentLocation:$,nextLocation:_.location})}else if(M){let Ue=P.get(_.location.pathname);Ue?Ue.add($.pathname):(Ue=new Set([$.pathname]),P.set(_.location.pathname,Ue)),Me={currentLocation:_.location,nextLocation:$}}W({...K,actionData:Se,loaderData:Pe,historyAction:E,location:$,initialized:!0,navigation:Fm,revalidation:"idle",restoreScrollPosition:_e($,K.matches||_.matches),preventScrollReset:Ce,blockers:Ie},{viewTransitionOpts:Me,flushSync:ne===!0}),E="POP",S=!1,M=!1,R=!1,A=!1,G==null||G.resolve(),G=null}async function te($,K){if(typeof $=="number"){e.history.go($);return}let ne=$m(_.location,_.matches,s,$,K==null?void 0:K.fromRouteId,K==null?void 0:K.relative),{path:le,submission:Se,error:Pe}=jS(!1,ne,K),Ie=_.location,Ce=si(_.location,le,K&&K.state);Ce={...Ce,...e.history.encodeLocation(Ce)};let Me=K&&K.replace!=null?K.replace:void 0,be="PUSH";Me===!0?be="REPLACE":Me===!1||Se!=null&&rr(Se.formMethod)&&Se.formAction===_.location.pathname+_.location.search&&(be="REPLACE");let De=K&&"preventScrollReset"in K?K.preventScrollReset===!0:void 0,Ue=(K&&K.flushSync)===!0,yt=Ot({currentLocation:Ie,nextLocation:Ce,historyAction:be});if(yt){Ne(yt,{state:"blocked",location:Ce,proceed(){Ne(yt,{state:"proceeding",proceed:void 0,reset:void 0,location:Ce}),te($,K)},reset(){let wt=new Map(_.blockers);wt.set(yt,oc),W({blockers:wt})}});return}await se(be,Ce,{submission:Se,pendingError:Pe,preventScrollReset:De,replace:K&&K.replace,enableViewTransition:K&&K.viewTransition,flushSync:Ue})}function B(){G||(G=Oz()),Et(),W({revalidation:"loading"});let $=G.promise;return _.navigation.state==="submitting"?$:_.navigation.state==="idle"?(se(_.historyAction,_.location,{startUninterruptedRevalidation:!0}),$):(se(E||_.historyAction,_.navigation.location,{overrideNavigation:_.navigation,enableViewTransition:M===!0}),$)}async function se($,K,ne){C&&C.abort(),C=null,E=$,R=(ne&&ne.startUninterruptedRevalidation)===!0,we(_.location,_.matches),S=(ne&&ne.preventScrollReset)===!0,M=(ne&&ne.enableViewTransition)===!0;let le=i||a,Se=ne&&ne.overrideNavigation,Pe=Do(le,K,s),Ie=(ne&&ne.flushSync)===!0,Ce=je(Pe,le,K.pathname);if(Ce.active&&Ce.matches&&(Pe=Ce.matches),!Pe){let{error:Ke,notFoundMatches:En,route:kt}=xt(K.pathname);Q(K,{matches:En,loaderData:{},errors:{[kt.id]:Ke}},{flushSync:Ie});return}if(_.initialized&&!A&&xz(_.location,K)&&!(ne&&ne.submission&&rr(ne.submission.formMethod))){Q(K,{matches:Pe},{flushSync:Ie});return}C=new AbortController;let Me=ci(e.history,K,C.signal,ne&&ne.submission),be;if(ne&&ne.pendingError)be=[ha(Pe).route.id,{type:"error",error:ne.pendingError}];else if(ne&&ne.submission&&rr(ne.submission.formMethod)){let Ke=await ce(Me,K,ne.submission,Pe,Ce.active,{replace:ne.replace,flushSync:Ie});if(Ke.shortCircuited)return;if(Ke.pendingActionResult){let[En,kt]=Ke.pendingActionResult;if(Pn(kt)&&qu(kt.error)&&kt.error.status===404){C=null,Q(K,{matches:Ke.matches,loaderData:{},errors:{[En]:kt.error}});return}}Pe=Ke.matches||Pe,be=Ke.pendingActionResult,Se=Hm(K,ne.submission),Ie=!1,Ce.active=!1,Me=ci(e.history,Me.url,Me.signal)}let{shortCircuited:De,matches:Ue,loaderData:yt,errors:wt}=await ve(Me,K,Pe,Ce.active,Se,ne&&ne.submission,ne&&ne.fetcherSubmission,ne&&ne.replace,ne&&ne.initialHydration===!0,Ie,be);De||(C=null,Q(K,{matches:Ue||Pe,...TS(be),loaderData:yt,errors:wt}))}async function ce($,K,ne,le,Se,Pe={}){Et();let Ie=jz(K,ne);if(W({navigation:Ie},{flushSync:Pe.flushSync===!0}),Se){let be=await Le(le,K.pathname,$.signal);if(be.type==="aborted")return{shortCircuited:!0};if(be.type==="error"){let De=ha(be.partialMatches).route.id;return{matches:be.partialMatches,pendingActionResult:[De,{type:"error",error:be.error}]}}else if(be.matches)le=be.matches;else{let{notFoundMatches:De,error:Ue,route:yt}=xt(K.pathname);return{matches:De,pendingActionResult:[yt.id,{type:"error",error:Ue}]}}}let Ce,Me=ac(le,K);if(!Me.route.action&&!Me.route.lazy)Ce={type:"error",error:$n(405,{method:$.method,pathname:K.pathname,routeId:Me.route.id})};else if(Ce=(await it("action",_,$,[Me],le,null))[Me.route.id],$.signal.aborted)return{shortCircuited:!0};if(ma(Ce)){let be;return Pe&&Pe.replace!=null?be=Pe.replace:be=NS(Ce.response.headers.get("Location"),new URL($.url),s)===_.location.pathname+_.location.search,await He($,Ce,!0,{submission:ne,replace:be}),{shortCircuited:!0}}if(Pn(Ce)){let be=ha(le,Me.route.id);return(Pe&&Pe.replace)!==!0&&(E="PUSH"),{matches:le,pendingActionResult:[be.route.id,Ce]}}return{matches:le,pendingActionResult:[Me.route.id,Ce]}}async function ve($,K,ne,le,Se,Pe,Ie,Ce,Me,be,De){let Ue=Se||Hm(K,Pe),yt=Pe||Ie||FS(Ue),wt=!R&&!Me;if(le){if(wt){let Sn=Te(De);W({navigation:Ue,...Sn!==void 0?{actionData:Sn}:{}},{flushSync:be})}let et=await Le(ne,K.pathname,$.signal);if(et.type==="aborted")return{shortCircuited:!0};if(et.type==="error"){let Sn=ha(et.partialMatches).route.id;return{matches:et.partialMatches,loaderData:{},errors:{[Sn]:et.error}}}else if(et.matches)ne=et.matches;else{let{error:Sn,notFoundMatches:Za,route:Ct}=xt(K.pathname);return{matches:Za,loaderData:{},errors:{[Ct.id]:Sn}}}}let Ke=i||a,[En,kt]=SS(e.history,_,ne,yt,K,Me===!0,A,O,F,z,D,Ke,s,De);if(I=++T,En.length===0&&kt.length===0){let et=X();return Q(K,{matches:ne,loaderData:{},errors:De&&Pn(De[1])?{[De[0]]:De[1].error}:null,...TS(De),...et?{fetchers:new Map(_.fetchers)}:{}},{flushSync:be}),{shortCircuited:!0}}if(wt){let et={};if(!le){et.navigation=Ue;let Sn=Te(De);Sn!==void 0&&(et.actionData=Sn)}kt.length>0&&(et.fetchers=qe(kt)),W(et,{flushSync:be})}kt.forEach(et=>{Qn(et.key),et.controller&&k.set(et.key,et.controller)});let Ja=()=>kt.forEach(et=>Qn(et.key));C&&C.signal.addEventListener("abort",Ja);let{loaderResults:_r,fetcherResults:la}=await Vt(_,ne,En,kt,$);if($.signal.aborted)return{shortCircuited:!0};C&&C.signal.removeEventListener("abort",Ja),kt.forEach(et=>k.delete(et.key));let Vr=Yu(_r);if(Vr)return await He($,Vr.result,!0,{replace:Ce}),{shortCircuited:!0};if(Vr=Yu(la),Vr)return D.add(Vr.key),await He($,Vr.result,!0,{replace:Ce}),{shortCircuited:!0};let{loaderData:ju,errors:Jn}=kS(_,ne,_r,De,kt,la);Me&&_.errors&&(Jn={..._.errors,...Jn});let $s=X(),zs=ee(I),Vs=$s||zs||kt.length>0;return{matches:ne,loaderData:ju,errors:Jn,...Vs?{fetchers:new Map(_.fetchers)}:{}}}function Te($){if($&&!Pn($[1]))return{[$[0]]:$[1].data};if(_.actionData)return Object.keys(_.actionData).length===0?null:_.actionData}function qe($){return $.forEach(K=>{let ne=_.fetchers.get(K.key),le=ic(void 0,ne?ne.data:void 0);_.fetchers.set(K.key,le)}),new Map(_.fetchers)}async function Ye($,K,ne,le){Qn($);let Se=(le&&le.flushSync)===!0,Pe=i||a,Ie=$m(_.location,_.matches,s,ne,K,le==null?void 0:le.relative),Ce=Do(Pe,Ie,s),Me=je(Ce,Pe,Ie);if(Me.active&&Me.matches&&(Ce=Me.matches),!Ce){At($,K,$n(404,{pathname:Ie}),{flushSync:Se});return}let{path:be,submission:De,error:Ue}=jS(!0,Ie,le);if(Ue){At($,K,Ue,{flushSync:Se});return}let yt=ac(Ce,be),wt=(le&&le.preventScrollReset)===!0;if(De&&rr(De.formMethod)){await ze($,K,be,yt,Ce,Me.active,Se,wt,De);return}z.set($,{routeId:K,path:be}),await at($,K,be,yt,Ce,Me.active,Se,wt,De)}async function ze($,K,ne,le,Se,Pe,Ie,Ce,Me){Et(),z.delete($);function be(Ct){if(!Ct.route.action&&!Ct.route.lazy){let To=$n(405,{method:Me.formMethod,pathname:ne,routeId:K});return At($,K,To,{flushSync:Ie}),!0}return!1}if(!Pe&&be(le))return;let De=_.fetchers.get($);mt($,Ez(Me,De),{flushSync:Ie});let Ue=new AbortController,yt=ci(e.history,ne,Ue.signal,Me);if(Pe){let Ct=await Le(Se,ne,yt.signal);if(Ct.type==="aborted")return;if(Ct.type==="error"){At($,K,Ct.error,{flushSync:Ie});return}else if(Ct.matches){if(Se=Ct.matches,le=ac(Se,ne),be(le))return}else{At($,K,$n(404,{pathname:ne}),{flushSync:Ie});return}}k.set($,Ue);let wt=T,Ke=(await it("action",_,yt,[le],Se,$))[le.route.id];if(yt.signal.aborted){k.get($)===Ue&&k.delete($);return}if(F.has($)){if(ma(Ke)||Pn(Ke)){mt($,Lo(void 0));return}}else{if(ma(Ke))if(k.delete($),I>wt){mt($,Lo(void 0));return}else return D.add($),mt($,ic(Me)),He(yt,Ke,!1,{fetcherSubmission:Me,preventScrollReset:Ce});if(Pn(Ke)){At($,K,Ke.error);return}}let En=_.navigation.location||_.location,kt=ci(e.history,En,Ue.signal),Ja=i||a,_r=_.navigation.state!=="idle"?Do(Ja,_.navigation.location,s):_.matches;$e(_r,"Didn't find any matches after fetcher action");let la=++T;L.set($,la);let Vr=ic(Me,Ke.data);_.fetchers.set($,Vr);let[ju,Jn]=SS(e.history,_,_r,Me,En,!1,A,O,F,z,D,Ja,s,[le.route.id,Ke]);Jn.filter(Ct=>Ct.key!==$).forEach(Ct=>{let To=Ct.key,kh=_.fetchers.get(To),Jj=ic(void 0,kh?kh.data:void 0);_.fetchers.set(To,Jj),Qn(To),Ct.controller&&k.set(To,Ct.controller)}),W({fetchers:new Map(_.fetchers)});let $s=()=>Jn.forEach(Ct=>Qn(Ct.key));Ue.signal.addEventListener("abort",$s);let{loaderResults:zs,fetcherResults:Vs}=await Vt(_,_r,ju,Jn,kt);if(Ue.signal.aborted)return;Ue.signal.removeEventListener("abort",$s),L.delete($),k.delete($),Jn.forEach(Ct=>k.delete(Ct.key));let et=Yu(zs);if(et)return He(kt,et.result,!1,{preventScrollReset:Ce});if(et=Yu(Vs),et)return D.add(et.key),He(kt,et.result,!1,{preventScrollReset:Ce});let{loaderData:Sn,errors:Za}=kS(_,_r,zs,void 0,Jn,Vs);if(_.fetchers.has($)){let Ct=Lo(Ke.data);_.fetchers.set($,Ct)}ee(la),_.navigation.state==="loading"&&la>I?($e(E,"Expected pending action"),C&&C.abort(),Q(_.navigation.location,{matches:_r,loaderData:Sn,errors:Za,fetchers:new Map(_.fetchers)})):(W({errors:Za,loaderData:AS(_.loaderData,Sn,_r,Za),fetchers:new Map(_.fetchers)}),A=!1)}async function at($,K,ne,le,Se,Pe,Ie,Ce,Me){let be=_.fetchers.get($);mt($,ic(Me,be?be.data:void 0),{flushSync:Ie});let De=new AbortController,Ue=ci(e.history,ne,De.signal);if(Pe){let Ke=await Le(Se,ne,Ue.signal);if(Ke.type==="aborted")return;if(Ke.type==="error"){At($,K,Ke.error,{flushSync:Ie});return}else if(Ke.matches)Se=Ke.matches,le=ac(Se,ne);else{At($,K,$n(404,{pathname:ne}),{flushSync:Ie});return}}k.set($,De);let yt=T,wt=(await it("loader",_,Ue,[le],Se,$))[le.route.id];if(k.get($)===De&&k.delete($),!Ue.signal.aborted){if(F.has($)){mt($,Lo(void 0));return}if(ma(wt))if(I>yt){mt($,Lo(void 0));return}else{D.add($),await He(Ue,wt,!1,{preventScrollReset:Ce});return}if(Pn(wt)){At($,K,wt.error);return}mt($,Lo(wt.data))}}async function He($,K,ne,{submission:le,fetcherSubmission:Se,preventScrollReset:Pe,replace:Ie}={}){K.response.headers.has("X-Remix-Revalidate")&&(A=!0);let Ce=K.response.headers.get("Location");$e(Ce,"Expected a Location header on the redirect Response"),Ce=NS(Ce,new URL($.url),s);let Me=si(_.location,Ce,{_isRedirect:!0});if(n){let Ke=!1;if(K.response.headers.has("X-Remix-Reload-Document"))Ke=!0;else if(Bm.test(Ce)){const En=e.history.createURL(Ce);Ke=En.origin!==t.location.origin||nr(En.pathname,s)==null}if(Ke){Ie?t.location.replace(Ce):t.location.assign(Ce);return}}C=null;let be=Ie===!0||K.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:De,formAction:Ue,formEncType:yt}=_.navigation;!le&&!Se&&De&&Ue&&yt&&(le=FS(_.navigation));let wt=le||Se;if(sz.has(K.response.status)&&wt&&rr(wt.formMethod))await se(be,Me,{submission:{...wt,formAction:Ce},preventScrollReset:Pe||S,enableViewTransition:ne?M:void 0});else{let Ke=Hm(Me,le);await se(be,Me,{overrideNavigation:Ke,fetcherSubmission:Se,preventScrollReset:Pe||S,enableViewTransition:ne?M:void 0})}}async function it($,K,ne,le,Se,Pe){let Ie,Ce={};try{Ie=await mz(c,$,K,ne,le,Se,Pe,o,r)}catch(Me){return le.forEach(be=>{Ce[be.route.id]={type:"error",error:Me}}),Ce}for(let[Me,be]of Object.entries(Ie))if(wz(be)){let De=be.result;Ce[Me]={type:"redirect",response:vz(De,ne,Me,Se,s)}}else Ce[Me]=await gz(be);return Ce}async function Vt($,K,ne,le,Se){let Pe=it("loader",$,Se,ne,K,null),Ie=Promise.all(le.map(async be=>{if(be.matches&&be.match&&be.controller){let De=(await it("loader",$,ci(e.history,be.path,be.controller.signal),[be.match],be.matches,be.key))[be.match.route.id];return{[be.key]:De}}else return Promise.resolve({[be.key]:{type:"error",error:$n(404,{pathname:be.path})}})})),Ce=await Pe,Me=(await Ie).reduce((be,De)=>Object.assign(be,De),{});return{loaderResults:Ce,fetcherResults:Me}}function Et(){A=!0,z.forEach(($,K)=>{k.has(K)&&O.add(K),Qn(K)})}function mt($,K,ne={}){_.fetchers.set($,K),W({fetchers:new Map(_.fetchers)},{flushSync:(ne&&ne.flushSync)===!0})}function At($,K,ne,le={}){let Se=ha(_.matches,K);wr($),W({errors:{[Se.route.id]:ne},fetchers:new Map(_.fetchers)},{flushSync:(le&&le.flushSync)===!0})}function yn($){return H.set($,(H.get($)||0)+1),F.has($)&&F.delete($),_.fetchers.get($)||cz}function wr($){let K=_.fetchers.get($);k.has($)&&!(K&&K.state==="loading"&&L.has($))&&Qn($),z.delete($),L.delete($),D.delete($),F.delete($),O.delete($),_.fetchers.delete($)}function Qa($){let K=(H.get($)||0)-1;K<=0?(H.delete($),F.add($)):H.set($,K),W({fetchers:new Map(_.fetchers)})}function Qn($){let K=k.get($);K&&(K.abort(),k.delete($))}function ca($){for(let K of $){let ne=yn(K),le=Lo(ne.data);_.fetchers.set(K,le)}}function X(){let $=[],K=!1;for(let ne of D){let le=_.fetchers.get(ne);$e(le,`Expected fetcher: ${ne}`),le.state==="loading"&&(D.delete(ne),$.push(ne),K=!0)}return ca($),K}function ee($){let K=[];for(let[ne,le]of L)if(le<$){let Se=_.fetchers.get(ne);$e(Se,`Expected fetcher: ${ne}`),Se.state==="loading"&&(Qn(ne),L.delete(ne),K.push(ne))}return ca(K),K.length>0}function ie($,K){let ne=_.blockers.get($)||oc;return U.get($)!==K&&U.set($,K),ne}function pe($){_.blockers.delete($),U.delete($)}function Ne($,K){let ne=_.blockers.get($)||oc;$e(ne.state==="unblocked"&&K.state==="blocked"||ne.state==="blocked"&&K.state==="blocked"||ne.state==="blocked"&&K.state==="proceeding"||ne.state==="blocked"&&K.state==="unblocked"||ne.state==="proceeding"&&K.state==="unblocked",`Invalid blocker state transition: ${ne.state} -> ${K.state}`);let le=new Map(_.blockers);le.set($,K),W({blockers:le})}function Ot({currentLocation:$,nextLocation:K,historyAction:ne}){if(U.size===0)return;U.size>1&&Lt(!1,"A router only supports one blocker at a time");let le=Array.from(U.entries()),[Se,Pe]=le[le.length-1],Ie=_.blockers.get(Se);if(!(Ie&&Ie.state==="proceeding")&&Pe({currentLocation:$,nextLocation:K,historyAction:ne}))return Se}function xt($){let K=$n(404,{pathname:$}),ne=i||a,{matches:le,route:Se}=RS(ne);return{notFoundMatches:le,route:Se,error:K}}function Be($,K,ne){if(p=$,m=K,y=ne||null,!v&&_.navigation===Fm){v=!0;let le=_e(_.location,_.matches);le!=null&&W({restoreScrollPosition:le})}return()=>{p=null,m=null,y=null}}function ge($,K){return y&&y($,K.map(ne=>B$(ne,_.loaderData)))||$.key}function we($,K){if(p&&m){let ne=ge($,K);p[ne]=m()}}function _e($,K){if(p){let ne=ge($,K),le=p[ne];if(typeof le=="number")return le}return null}function je($,K,ne){if(l)if($){if(Object.keys($[0].params).length>0)return{active:!0,matches:zu(K,ne,s,!0)}}else return{active:!0,matches:zu(K,ne,s,!0)||[]};return{active:!1,matches:null}}async function Le($,K,ne){if(!l)return{type:"success",matches:$};let le=$;for(;;){let Se=i==null,Pe=i||a,Ie=o;try{await l({path:K,matches:le,patch:(be,De)=>{ne.aborted||OS(be,De,Pe,Ie,r)}})}catch(be){return{type:"error",error:be,partialMatches:le}}finally{Se&&!ne.aborted&&(a=[...a])}if(ne.aborted)return{type:"aborted"};let Ce=Do(Pe,K,s);if(Ce)return{type:"success",matches:Ce};let Me=zu(Pe,K,s,!0);if(!Me||le.length===Me.length&&le.every((be,De)=>be.route.id===Me[De].route.id))return{type:"success",matches:null};le=Me}}function ct($){o={},i=$u($,r,void 0,o)}function St($,K){let ne=i==null;OS($,K,i||a,o,r),ne&&(a=[...a],W({}))}return w={get basename(){return s},get future(){return u},get state(){return _},get routes(){return a},get window(){return t},initialize:re,subscribe:q,enableScrollRestoration:Be,navigate:te,fetch:Ye,revalidate:B,createHref:$=>e.history.createHref($),encodeLocation:$=>e.history.encodeLocation($),getFetcher:yn,deleteFetcher:Qa,dispose:Z,getBlocker:ie,deleteBlocker:pe,patchRoutes:St,_internalFetchControllers:k,_internalSetRoutes:ct},w}function uz(e){return e!=null&&("formData"in e&&e.formData!=null||"body"in e&&e.body!==void 0)}function $m(e,t,n,r,o,a){let i,s;if(o){i=[];for(let l of t)if(i.push(l),l.route.id===o){s=l;break}}else i=t,s=t[t.length-1];let c=Hu(r||".",Uu(i),nr(e.pathname,n)||e.pathname,a==="path");if(r==null&&(c.search=e.search,c.hash=e.hash),(r==null||r===""||r===".")&&s){let l=Um(c.search);if(s.route.index&&!l)c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index";else if(!s.route.index&&l){let u=new URLSearchParams(c.search),d=u.getAll("index");u.delete("index"),d.filter(p=>p).forEach(p=>u.append("index",p));let f=u.toString();c.search=f?`?${f}`:""}}return n!=="/"&&(c.pathname=c.pathname==="/"?n:Er([n,c.pathname])),Kr(c)}function jS(e,t,n){if(!n||!uz(n))return{path:t};if(n.formMethod&&!_z(n.formMethod))return{path:t,error:$n(405,{method:n.formMethod})};let r=()=>({path:t,error:$n(400,{type:"invalid-body"})}),o=(n.formMethod||"get").toUpperCase(),a=IS(t);if(n.body!==void 0){if(n.formEncType==="text/plain"){if(!rr(o))return r();let u=typeof n.body=="string"?n.body:n.body instanceof FormData||n.body instanceof URLSearchParams?Array.from(n.body.entries()).reduce((d,[f,p])=>`${d}${f}=${p}
`,""):String(n.body);return{path:t,submission:{formMethod:o,formAction:a,formEncType:n.formEncType,formData:void 0,json:void 0,text:u}}}else if(n.formEncType==="application/json"){if(!rr(o))return r();try{let u=typeof n.body=="string"?JSON.parse(n.body):n.body;return{path:t,submission:{formMethod:o,formAction:a,formEncType:n.formEncType,formData:void 0,json:u,text:void 0}}}catch{return r()}}}$e(typeof FormData=="function","FormData is not available in this environment");let i,s;if(n.formData)i=Vm(n.formData),s=n.formData;else if(n.body instanceof FormData)i=Vm(n.body),s=n.body;else if(n.body instanceof URLSearchParams)i=n.body,s=PS(i);else if(n.body==null)i=new URLSearchParams,s=new FormData;else try{i=new URLSearchParams(n.body),s=PS(i)}catch{return r()}let c={formMethod:o,formAction:a,formEncType:n&&n.formEncType||"application/x-www-form-urlencoded",formData:s,json:void 0,text:void 0};if(rr(c.formMethod))return{path:t,submission:c};let l=Xr(t);return e&&l.search&&Um(l.search)&&i.append("index",""),l.search=`?${i}`,{path:Kr(l),submission:c}}function ES(e,t,n=!1){let r=e.findIndex(o=>o.route.id===t);return r>=0?e.slice(0,n?r+1:r):e}function SS(e,t,n,r,o,a,i,s,c,l,u,d,f,p){let y=p?Pn(p[1])?p[1].error:p[1].data:void 0,m=e.createURL(t.location),v=e.createURL(o),b=n;a&&t.errors?b=ES(n,Object.keys(t.errors)[0],!0):p&&Pn(p[1])&&(b=ES(n,p[0]));let x=p?p[1].statusCode:void 0,j=x&&x>=400,w=b.filter((E,S)=>{let{route:C}=E;if(C.lazy)return!0;if(C.loader==null)return!1;if(a)return zm(C,t.loaderData,t.errors);if(dz(t.loaderData,t.matches[S],E))return!0;let M=t.matches[S],P=E;return CS(E,{currentUrl:m,currentParams:M.params,nextUrl:v,nextParams:P.params,...r,actionResult:y,actionStatus:x,defaultShouldRevalidate:j?!1:i||m.pathname+m.search===v.pathname+v.search||m.search!==v.search||fz(M,P)})}),_=[];return l.forEach((E,S)=>{if(a||!n.some(R=>R.route.id===E.routeId)||c.has(S))return;let C=Do(d,E.path,f);if(!C){_.push({key:S,routeId:E.routeId,path:E.path,matches:null,match:null,controller:null});return}let M=t.fetchers.get(S),P=ac(C,E.path),N=!1;u.has(S)?N=!1:s.has(S)?(s.delete(S),N=!0):M&&M.state!=="idle"&&M.data===void 0?N=i:N=CS(P,{currentUrl:m,currentParams:t.matches[t.matches.length-1].params,nextUrl:v,nextParams:n[n.length-1].params,...r,actionResult:y,actionStatus:x,defaultShouldRevalidate:j?!1:i}),N&&_.push({key:S,routeId:E.routeId,path:E.path,matches:C,match:P,controller:new AbortController})}),[w,_]}function zm(e,t,n){if(e.lazy)return!0;if(!e.loader)return!1;let r=t!=null&&t[e.id]!==void 0,o=n!=null&&n[e.id]!==void 0;return!r&&o?!1:typeof e.loader=="function"&&e.loader.hydrate===!0?!0:!r&&!o}function dz(e,t,n){let r=!t||n.route.id!==t.route.id,o=!e.hasOwnProperty(n.route.id);return r||o}function fz(e,t){let n=e.route.path;return e.pathname!==t.pathname||n!=null&&n.endsWith("*")&&e.params["*"]!==t.params["*"]}function CS(e,t){if(e.route.shouldRevalidate){let n=e.route.shouldRevalidate(t);if(typeof n=="boolean")return n}return t.defaultShouldRevalidate}function OS(e,t,n,r,o){let a;if(e){let c=r[e];$e(c,`No route found to patch children into: routeId = ${e}`),c.children||(c.children=[]),a=c.children}else a=n;let i=t.filter(c=>!a.some(l=>MS(c,l))),s=$u(i,o,[e||"_","patch",String((a==null?void 0:a.length)||"0")],r);a.push(...s)}function MS(e,t){return"id"in e&&"id"in t&&e.id===t.id?!0:e.index===t.index&&e.path===t.path&&e.caseSensitive===t.caseSensitive?(!e.children||e.children.length===0)&&(!t.children||t.children.length===0)?!0:e.children.every((n,r)=>{var o;return(o=t.children)==null?void 0:o.some(a=>MS(n,a))}):!1}async function pz(e,t,n){if(!e.lazy)return;let r=await e.lazy();if(!e.lazy)return;let o=n[e.id];$e(o,"No route found in manifest");let a={};for(let i in r){let s=o[i]!==void 0&&i!=="hasErrorBoundary";Lt(!s,`Route "${o.id}" has a static property "${i}" defined but its lazy function is also returning a value for this property. The lazy route property "${i}" will be ignored.`),!s&&!L$.has(i)&&(a[i]=r[i])}Object.assign(o,a),Object.assign(o,{...t(o),lazy:void 0})}async function hz({matches:e}){let t=e.filter(n=>n.shouldLoad);return(await Promise.all(t.map(n=>n.resolve()))).reduce((n,r,o)=>Object.assign(n,{[t[o].route.id]:r}),{})}async function mz(e,t,n,r,o,a,i,s,c,l){let u=a.map(p=>p.route.lazy?pz(p.route,c,s):void 0),d=a.map((p,y)=>{let m=u[y],v=o.some(b=>b.route.id===p.route.id);return{...p,shouldLoad:v,resolve:async b=>(b&&r.method==="GET"&&(p.route.lazy||p.route.loader)&&(v=!0),v?yz(t,r,p,m,b,l):Promise.resolve({type:"data",result:void 0}))}}),f=await e({matches:d,request:r,params:a[0].params,fetcherKey:i,context:l});try{await Promise.all(u)}catch{}return f}async function yz(e,t,n,r,o,a){let i,s,c=l=>{let u,d=new Promise((y,m)=>u=m);s=()=>u(),t.signal.addEventListener("abort",s);let f=y=>typeof l!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${e}" [routeId: ${n.route.id}]`)):l({request:t,params:n.params,context:a},...y!==void 0?[y]:[]),p=(async()=>{try{return{type:"data",result:await(o?o(y=>f(y)):f())}}catch(y){return{type:"error",result:y}}})();return Promise.race([p,d])};try{let l=n.route[e];if(r)if(l){let u,[d]=await Promise.all([c(l).catch(f=>{u=f}),r]);if(u!==void 0)throw u;i=d}else if(await r,l=n.route[e],l)i=await c(l);else if(e==="action"){let u=new URL(t.url),d=u.pathname+u.search;throw $n(405,{method:t.method,pathname:d,routeId:n.route.id})}else return{type:"data",result:void 0};else if(l)i=await c(l);else{let u=new URL(t.url),d=u.pathname+u.search;throw $n(404,{pathname:d})}}catch(l){return{type:"error",result:l}}finally{s&&t.signal.removeEventListener("abort",s)}return i}async function gz(e){var r,o,a,i;let{result:t,type:n}=e;if(LS(t)){let s;try{let c=t.headers.get("Content-Type");c&&/\bapplication\/json\b/.test(c)?t.body==null?s=null:s=await t.json():s=await t.text()}catch(c){return{type:"error",error:c}}return n==="error"?{type:"error",error:new Wu(t.status,t.statusText,s),statusCode:t.status,headers:t.headers}:{type:"data",data:s,statusCode:t.status,headers:t.headers}}if(n==="error"){if(DS(t)){if(t.data instanceof Error)return{type:"error",error:t.data,statusCode:(r=t.init)==null?void 0:r.status};t=new Wu(((o=t.init)==null?void 0:o.status)||500,void 0,t.data)}return{type:"error",error:t,statusCode:qu(t)?t.status:void 0}}return DS(t)?{type:"data",data:t.data,statusCode:(a=t.init)==null?void 0:a.status,headers:(i=t.init)!=null&&i.headers?new Headers(t.init.headers):void 0}:{type:"data",data:t}}function vz(e,t,n,r,o){let a=e.headers.get("Location");if($e(a,"Redirects returned/thrown from loaders/actions must have a Location header"),!Bm.test(a)){let i=r.slice(0,r.findIndex(s=>s.route.id===n)+1);a=$m(new URL(t.url),i,o,a),e.headers.set("Location",a)}return e}function NS(e,t,n){if(Bm.test(e)){let r=e,o=r.startsWith("//")?new URL(t.protocol+r):new URL(r),a=nr(o.pathname,n)!=null;if(o.origin===t.origin&&a)return o.pathname+o.search+o.hash}return e}function ci(e,t,n,r){let o=e.createURL(IS(t)).toString(),a={signal:n};if(r&&rr(r.formMethod)){let{formMethod:i,formEncType:s}=r;a.method=i.toUpperCase(),s==="application/json"?(a.headers=new Headers({"Content-Type":s}),a.body=JSON.stringify(r.json)):s==="text/plain"?a.body=r.text:s==="application/x-www-form-urlencoded"&&r.formData?a.body=Vm(r.formData):a.body=r.formData}return new Request(o,a)}function Vm(e){let t=new URLSearchParams;for(let[n,r]of e.entries())t.append(n,typeof r=="string"?r:r.name);return t}function PS(e){let t=new FormData;for(let[n,r]of e.entries())t.append(n,r);return t}function bz(e,t,n,r=!1,o=!1){let a={},i=null,s,c=!1,l={},u=n&&Pn(n[1])?n[1].error:void 0;return e.forEach(d=>{if(!(d.route.id in t))return;let f=d.route.id,p=t[f];if($e(!ma(p),"Cannot handle redirect results in processLoaderData"),Pn(p)){let y=p.error;if(u!==void 0&&(y=u,u=void 0),i=i||{},o)i[f]=y;else{let m=ha(e,f);i[m.route.id]==null&&(i[m.route.id]=y)}r||(a[f]=wS),c||(c=!0,s=qu(p.error)?p.error.status:500),p.headers&&(l[f]=p.headers)}else a[f]=p.data,p.statusCode&&p.statusCode!==200&&!c&&(s=p.statusCode),p.headers&&(l[f]=p.headers)}),u!==void 0&&n&&(i={[n[0]]:u},a[n[0]]=void 0),{loaderData:a,errors:i,statusCode:s||200,loaderHeaders:l}}function kS(e,t,n,r,o,a){let{loaderData:i,errors:s}=bz(t,n,r);return o.forEach(c=>{let{key:l,match:u,controller:d}=c,f=a[l];if($e(f,"Did not find corresponding fetcher result"),!(d&&d.signal.aborted))if(Pn(f)){let p=ha(e.matches,u==null?void 0:u.route.id);s&&s[p.route.id]||(s={...s,[p.route.id]:f.error}),e.fetchers.delete(l)}else if(ma(f))$e(!1,"Unhandled fetcher revalidation redirect");else{let p=Lo(f.data);e.fetchers.set(l,p)}}),{loaderData:i,errors:s}}function AS(e,t,n,r){let o=Object.entries(t).filter(([,a])=>a!==wS).reduce((a,[i,s])=>(a[i]=s,a),{});for(let a of n){let i=a.route.id;if(!t.hasOwnProperty(i)&&e.hasOwnProperty(i)&&a.route.loader&&(o[i]=e[i]),r&&r.hasOwnProperty(i))break}return o}function TS(e){return e?Pn(e[1])?{actionData:{}}:{actionData:{[e[0]]:e[1].data}}:{}}function ha(e,t){return(t?e.slice(0,e.findIndex(n=>n.route.id===t)+1):[...e]).reverse().find(n=>n.route.hasErrorBoundary===!0)||e[0]}function RS(e){let t=e.length===1?e[0]:e.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function $n(e,{pathname:t,routeId:n,method:r,type:o,message:a}={}){let i="Unknown Server Error",s="Unknown @remix-run/router error";return e===400?(i="Bad Request",r&&t&&n?s=`You made a ${r} request to "${t}" but did not provide a \`loader\` for route "${n}", so there is no way to handle the request.`:o==="invalid-body"&&(s="Unable to encode submission body")):e===403?(i="Forbidden",s=`Route "${n}" does not match URL "${t}"`):e===404?(i="Not Found",s=`No route matches URL "${t}"`):e===405&&(i="Method Not Allowed",r&&t&&n?s=`You made a ${r.toUpperCase()} request to "${t}" but did not provide an \`action\` for route "${n}", so there is no way to handle the request.`:r&&(s=`Invalid request method "${r.toUpperCase()}"`)),new Wu(e||500,i,new Error(s),!0)}function Yu(e){let t=Object.entries(e);for(let n=t.length-1;n>=0;n--){let[r,o]=t[n];if(ma(o))return{key:r,result:o}}}function IS(e){let t=typeof e=="string"?Xr(e):e;return Kr({...t,hash:""})}function xz(e,t){return e.pathname!==t.pathname||e.search!==t.search?!1:e.hash===""?t.hash!=="":e.hash===t.hash?!0:t.hash!==""}function wz(e){return LS(e.result)&&iz.has(e.result.status)}function Pn(e){return e.type==="error"}function ma(e){return(e&&e.type)==="redirect"}function DS(e){return typeof e=="object"&&e!=null&&"type"in e&&"data"in e&&"init"in e&&e.type==="DataWithResponseInit"}function LS(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.headers=="object"&&typeof e.body<"u"}function _z(e){return az.has(e.toUpperCase())}function rr(e){return rz.has(e.toUpperCase())}function Um(e){return new URLSearchParams(e).getAll("index").some(t=>t==="")}function ac(e,t){let n=typeof t=="string"?Xr(t).search:t.search;if(e[e.length-1].route.index&&Um(n||""))return e[e.length-1];let r=vS(e);return r[r.length-1]}function FS(e){let{formMethod:t,formAction:n,formEncType:r,text:o,formData:a,json:i}=e;if(!(!t||!n||!r)){if(o!=null)return{formMethod:t,formAction:n,formEncType:r,formData:void 0,json:void 0,text:o};if(a!=null)return{formMethod:t,formAction:n,formEncType:r,formData:a,json:void 0,text:void 0};if(i!==void 0)return{formMethod:t,formAction:n,formEncType:r,formData:void 0,json:i,text:void 0}}}function Hm(e,t){return t?{state:"loading",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}:{state:"loading",location:e,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function jz(e,t){return{state:"submitting",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}}function ic(e,t){return e?{state:"loading",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function Ez(e,t){return{state:"submitting",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t?t.data:void 0}}function Lo(e){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function Sz(e,t){try{let n=e.sessionStorage.getItem(xS);if(n){let r=JSON.parse(n);for(let[o,a]of Object.entries(r||{}))a&&Array.isArray(a)&&t.set(o,new Set(a||[]))}}catch{}}function Cz(e,t){if(t.size>0){let n={};for(let[r,o]of t)n[r]=[...o];try{e.sessionStorage.setItem(xS,JSON.stringify(n))}catch(r){Lt(!1,`Failed to save applied view transitions in sessionStorage (${r}).`)}}}function Oz(){let e,t,n=new Promise((r,o)=>{e=async a=>{r(a);try{await n}catch{}},t=async a=>{o(a);try{await n}catch{}}});return{promise:n,resolve:e,reject:t}}var ya=g.createContext(null);ya.displayName="DataRouter";var sc=g.createContext(null);sc.displayName="DataRouterState";var Wm=g.createContext({isTransitioning:!1});Wm.displayName="ViewTransition";var BS=g.createContext(new Map);BS.displayName="Fetchers";var Mz=g.createContext(null);Mz.displayName="Await";var or=g.createContext(null);or.displayName="Navigation";var Ku=g.createContext(null);Ku.displayName="Location";var zn=g.createContext({outlet:null,matches:[],isDataRoute:!1});zn.displayName="Route";var qm=g.createContext(null);qm.displayName="RouteError";function Nz(e,{relative:t}={}){$e(li(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=g.useContext(or),{hash:o,pathname:a,search:i}=lc(e,{relative:t}),s=a;return n!=="/"&&(s=a==="/"?n:Er([n,a])),r.createHref({pathname:s,search:i,hash:o})}function li(){return g.useContext(Ku)!=null}function Gr(){return $e(li(),"useLocation() may be used only in the context of a <Router> component."),g.useContext(Ku).location}var $S="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function zS(e){g.useContext(or).static||g.useLayoutEffect(e)}function cc(){let{isDataRoute:e}=g.useContext(zn);return e?Hz():Pz()}function Pz(){$e(li(),"useNavigate() may be used only in the context of a <Router> component.");let e=g.useContext(ya),{basename:t,navigator:n}=g.useContext(or),{matches:r}=g.useContext(zn),{pathname:o}=Gr(),a=JSON.stringify(Uu(r)),i=g.useRef(!1);return zS(()=>{i.current=!0}),g.useCallback((s,c={})=>{if(Lt(i.current,$S),!i.current)return;if(typeof s=="number"){n.go(s);return}let l=Hu(s,JSON.parse(a),o,c.relative==="path");e==null&&t!=="/"&&(l.pathname=l.pathname==="/"?t:Er([t,l.pathname])),(c.replace?n.replace:n.push)(l,c.state,c)},[t,n,a,o,e])}var kz=g.createContext(null);function Az(e){let t=g.useContext(zn).outlet;return t&&g.createElement(kz.Provider,{value:e},t)}function Tz(){let{matches:e}=g.useContext(zn),t=e[e.length-1];return t?t.params:{}}function lc(e,{relative:t}={}){let{matches:n}=g.useContext(zn),{pathname:r}=Gr(),o=JSON.stringify(Uu(n));return g.useMemo(()=>Hu(e,JSON.parse(o),r,t==="path"),[e,o,r,t])}function Rz(e,t,n,r){$e(li(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=g.useContext(or),{matches:a}=g.useContext(zn),i=a[a.length-1],s=i?i.params:{},c=i?i.pathname:"/",l=i?i.pathnameBase:"/",u=i&&i.route;{let v=u&&u.path||"";HS(c,!u||v.endsWith("*")||v.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${v}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${v}"> to <Route path="${v==="/"?"*":`${v}/*`}">.`)}let d=Gr(),f;f=d;let p=f.pathname||"/",y=p;if(l!=="/"){let v=l.replace(/^\//,"").split("/");y="/"+p.replace(/^\//,"").split("/").slice(v.length).join("/")}let m=Do(e,{pathname:y});return Lt(u||m!=null,`No routes matched location "${f.pathname}${f.search}${f.hash}" `),Lt(m==null||m[m.length-1].route.element!==void 0||m[m.length-1].route.Component!==void 0||m[m.length-1].route.lazy!==void 0,`Matched leaf route at location "${f.pathname}${f.search}${f.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),Bz(m&&m.map(v=>Object.assign({},v,{params:Object.assign({},s,v.params),pathname:Er([l,o.encodeLocation?o.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?l:Er([l,o.encodeLocation?o.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),a,n,r)}function Iz(){let e=VS(),t=qu(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},i=null;return console.error("Error handled by React Router default ErrorBoundary:",e),i=g.createElement(g.Fragment,null,g.createElement("p",null,"\u{1F4BF} Hey developer \u{1F44B}"),g.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",g.createElement("code",{style:a},"ErrorBoundary")," or"," ",g.createElement("code",{style:a},"errorElement")," prop on your route.")),g.createElement(g.Fragment,null,g.createElement("h2",null,"Unexpected Application Error!"),g.createElement("h3",{style:{fontStyle:"italic"}},t),n?g.createElement("pre",{style:o},n):null,i)}var Dz=g.createElement(Iz,null),Lz=class extends g.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?g.createElement(zn.Provider,{value:this.props.routeContext},g.createElement(qm.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Fz({routeContext:e,match:t,children:n}){let r=g.useContext(ya);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),g.createElement(zn.Provider,{value:e},n)}function Bz(e,t=[],n=null,r=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let o=e,a=n==null?void 0:n.errors;if(a!=null){let c=o.findIndex(l=>l.route.id&&(a==null?void 0:a[l.route.id])!==void 0);$e(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),o=o.slice(0,Math.min(o.length,c+1))}let i=!1,s=-1;if(n)for(let c=0;c<o.length;c++){let l=o[c];if((l.route.HydrateFallback||l.route.hydrateFallbackElement)&&(s=c),l.route.id){let{loaderData:u,errors:d}=n,f=l.route.loader&&!u.hasOwnProperty(l.route.id)&&(!d||d[l.route.id]===void 0);if(l.route.lazy||f){i=!0,s>=0?o=o.slice(0,s+1):o=[o[0]];break}}}return o.reduceRight((c,l,u)=>{let d,f=!1,p=null,y=null;n&&(d=a&&l.route.id?a[l.route.id]:void 0,p=l.route.errorElement||Dz,i&&(s<0&&u===0?(HS("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),f=!0,y=null):s===u&&(f=!0,y=l.route.hydrateFallbackElement||null)));let m=t.concat(o.slice(0,u+1)),v=()=>{let b;return d?b=p:f?b=y:l.route.Component?b=g.createElement(l.route.Component,null):l.route.element?b=l.route.element:b=c,g.createElement(Fz,{match:l,routeContext:{outlet:c,matches:m,isDataRoute:n!=null},children:b})};return n&&(l.route.ErrorBoundary||l.route.errorElement||u===0)?g.createElement(Lz,{location:n.location,revalidation:n.revalidation,component:p,error:d,children:v(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):v()},null)}function Ym(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function $z(e){let t=g.useContext(ya);return $e(t,Ym(e)),t}function zz(e){let t=g.useContext(sc);return $e(t,Ym(e)),t}function Vz(e){let t=g.useContext(zn);return $e(t,Ym(e)),t}function Km(e){let t=Vz(e),n=t.matches[t.matches.length-1];return $e(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function Uz(){return Km("useRouteId")}function VS(){var r;let e=g.useContext(qm),t=zz("useRouteError"),n=Km("useRouteError");return e!==void 0?e:(r=t.errors)==null?void 0:r[n]}function Hz(){let{router:e}=$z("useNavigate"),t=Km("useNavigate"),n=g.useRef(!1);return zS(()=>{n.current=!0}),g.useCallback(async(r,o={})=>{Lt(n.current,$S),n.current&&(typeof r=="number"?e.navigate(r):await e.navigate(r,{fromRouteId:t,...o}))},[e,t])}var US={};function HS(e,t,n){!t&&!US[e]&&(US[e]=!0,Lt(!1,n))}var WS={};function qS(e,t){!e&&!WS[t]&&(WS[t]=!0,console.warn(t))}function YS(e){let t={hasErrorBoundary:e.hasErrorBoundary||e.ErrorBoundary!=null||e.errorElement!=null};return e.Component&&(e.element&&Lt(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(t,{element:g.createElement(e.Component),Component:void 0})),e.HydrateFallback&&(e.hydrateFallbackElement&&Lt(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(t,{hydrateFallbackElement:g.createElement(e.HydrateFallback),HydrateFallback:void 0})),e.ErrorBoundary&&(e.errorElement&&Lt(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(t,{errorElement:g.createElement(e.ErrorBoundary),ErrorBoundary:void 0})),t}var Wz=class{constructor(){this.status="pending",this.promise=new Promise((e,t)=>{this.resolve=n=>{this.status==="pending"&&(this.status="resolved",e(n))},this.reject=n=>{this.status==="pending"&&(this.status="rejected",t(n))}})}};function qz({router:e,flushSync:t}){let[n,r]=g.useState(e.state),[o,a]=g.useState(),[i,s]=g.useState({isTransitioning:!1}),[c,l]=g.useState(),[u,d]=g.useState(),[f,p]=g.useState(),y=g.useRef(new Map),m=g.useCallback((j,{deletedFetchers:w,flushSync:_,viewTransitionOpts:E})=>{w.forEach(C=>y.current.delete(C)),j.fetchers.forEach((C,M)=>{C.data!==void 0&&y.current.set(M,C.data)}),qS(_===!1||t!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let S=e.window!=null&&e.window.document!=null&&typeof e.window.document.startViewTransition=="function";if(qS(E==null||S,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!E||!S){t&&_?t(()=>r(j)):g.startTransition(()=>r(j));return}if(t&&_){t(()=>{u&&(c&&c.resolve(),u.skipTransition()),s({isTransitioning:!0,flushSync:!0,currentLocation:E.currentLocation,nextLocation:E.nextLocation})});let C=e.window.document.startViewTransition(()=>{t(()=>r(j))});C.finished.finally(()=>{t(()=>{l(void 0),d(void 0),a(void 0),s({isTransitioning:!1})})}),t(()=>d(C));return}u?(c&&c.resolve(),u.skipTransition(),p({state:j,currentLocation:E.currentLocation,nextLocation:E.nextLocation})):(a(j),s({isTransitioning:!0,flushSync:!1,currentLocation:E.currentLocation,nextLocation:E.nextLocation}))},[e.window,t,u,c]);g.useLayoutEffect(()=>e.subscribe(m),[e,m]),g.useEffect(()=>{i.isTransitioning&&!i.flushSync&&l(new Wz)},[i]),g.useEffect(()=>{if(c&&o&&e.window){let j=o,w=c.promise,_=e.window.document.startViewTransition(async()=>{g.startTransition(()=>r(j)),await w});_.finished.finally(()=>{l(void 0),d(void 0),a(void 0),s({isTransitioning:!1})}),d(_)}},[o,c,e.window]),g.useEffect(()=>{c&&o&&n.location.key===o.location.key&&c.resolve()},[c,u,n.location,o]),g.useEffect(()=>{!i.isTransitioning&&f&&(a(f.state),s({isTransitioning:!0,flushSync:!1,currentLocation:f.currentLocation,nextLocation:f.nextLocation}),p(void 0))},[i.isTransitioning,f]);let v=g.useMemo(()=>({createHref:e.createHref,encodeLocation:e.encodeLocation,go:j=>e.navigate(j),push:(j,w,_)=>e.navigate(j,{state:w,preventScrollReset:_==null?void 0:_.preventScrollReset}),replace:(j,w,_)=>e.navigate(j,{replace:!0,state:w,preventScrollReset:_==null?void 0:_.preventScrollReset})}),[e]),b=e.basename||"/",x=g.useMemo(()=>({router:e,navigator:v,static:!1,basename:b}),[e,v,b]);return g.createElement(g.Fragment,null,g.createElement(ya.Provider,{value:x},g.createElement(sc.Provider,{value:n},g.createElement(BS.Provider,{value:y.current},g.createElement(Wm.Provider,{value:i},g.createElement(Qz,{basename:b,location:n.location,navigationType:n.historyAction,navigator:v},g.createElement(Yz,{routes:e.routes,future:e.future,state:n})))))),null)}var Yz=g.memo(Kz);function Kz({routes:e,future:t,state:n}){return Rz(e,void 0,n,t)}function Xz({to:e,replace:t,state:n,relative:r}){$e(li(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=g.useContext(or);Lt(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=g.useContext(zn),{pathname:i}=Gr(),s=cc(),c=Hu(e,Uu(a),i,r==="path"),l=JSON.stringify(c);return g.useEffect(()=>{s(JSON.parse(l),{replace:t,state:n,relative:r})},[s,l,r,t,n]),null}function Gz(e){return Az(e.context)}function uc(e){$e(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Qz({basename:e="/",children:t=null,location:n,navigationType:r="POP",navigator:o,static:a=!1}){$e(!li(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let i=e.replace(/^\/*/,"/"),s=g.useMemo(()=>({basename:i,navigator:o,static:a,future:{}}),[i,o,a]);typeof n=="string"&&(n=Xr(n));let{pathname:c="/",search:l="",hash:u="",state:d=null,key:f="default"}=n,p=g.useMemo(()=>{let y=nr(c,i);return y==null?null:{location:{pathname:y,search:l,hash:u,state:d,key:f},navigationType:r}},[i,c,l,u,d,f,r]);return Lt(p!=null,`<Router basename="${i}"> is not able to match the URL "${c}${l}${u}" because it does not start with the basename, so the <Router> won't render anything.`),p==null?null:g.createElement(or.Provider,{value:s},g.createElement(Ku.Provider,{children:t,value:p}))}function Xm(e,t=[]){let n=[];return g.Children.forEach(e,(r,o)=>{if(!g.isValidElement(r))return;let a=[...t,o];if(r.type===g.Fragment){n.push.apply(n,Xm(r.props.children,a));return}$e(r.type===uc,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),$e(!r.props.index||!r.props.children,"An index route cannot have child routes.");let i={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(i.children=Xm(r.props.children,a)),n.push(i)}),n}var Jz=Xm,Xu="get",Gu="application/x-www-form-urlencoded";function Qu(e){return e!=null&&typeof e.tagName=="string"}function Zz(e){return Qu(e)&&e.tagName.toLowerCase()==="button"}function e7(e){return Qu(e)&&e.tagName.toLowerCase()==="form"}function t7(e){return Qu(e)&&e.tagName.toLowerCase()==="input"}function n7(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function r7(e,t){return e.button===0&&(!t||t==="_self")&&!n7(e)}var Ju=null;function o7(){if(Ju===null)try{new FormData(document.createElement("form"),0),Ju=!1}catch{Ju=!0}return Ju}var a7=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Gm(e){return e!=null&&!a7.has(e)?(Lt(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Gu}"`),null):e}function i7(e,t){let n,r,o,a,i;if(e7(e)){let s=e.getAttribute("action");r=s?nr(s,t):null,n=e.getAttribute("method")||Xu,o=Gm(e.getAttribute("enctype"))||Gu,a=new FormData(e)}else if(Zz(e)||t7(e)&&(e.type==="submit"||e.type==="image")){let s=e.form;if(s==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=e.getAttribute("formaction")||s.getAttribute("action");if(r=c?nr(c,t):null,n=e.getAttribute("formmethod")||s.getAttribute("method")||Xu,o=Gm(e.getAttribute("formenctype"))||Gm(s.getAttribute("enctype"))||Gu,a=new FormData(s,e),!o7()){let{name:l,type:u,value:d}=e;if(u==="image"){let f=l?`${l}.`:"";a.append(`${f}x`,"0"),a.append(`${f}y`,"0")}else l&&a.append(l,d)}}else{if(Qu(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Xu,r=null,o=Gu,i=e}return a&&o==="text/plain"&&(i=a,a=void 0),{action:r,method:n.toLowerCase(),encType:o,formData:a,body:i}}function Qm(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}async function s7(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module).then(async r=>(await r.__tla,r));return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function c7(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function l7(e,t,n){let r=await Promise.all(e.map(async o=>{let a=t.routes[o.route.id];if(a){let i=await s7(a,n);return i.links?i.links():[]}return[]}));return p7(r.flat(1).filter(c7).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function KS(e,t,n,r,o,a){let i=(c,l)=>n[l]?c.route.id!==n[l].route.id:!0,s=(c,l)=>{var u;return n[l].pathname!==c.pathname||((u=n[l].route.path)==null?void 0:u.endsWith("*"))&&n[l].params["*"]!==c.params["*"]};return a==="assets"?t.filter((c,l)=>i(c,l)||s(c,l)):a==="data"?t.filter((c,l)=>{var d;let u=r.routes[c.route.id];if(!u||!u.hasLoader)return!1;if(i(c,l)||s(c,l))return!0;if(c.route.shouldRevalidate){let f=c.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((d=n[0])==null?void 0:d.params)||{},nextUrl:new URL(e,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function u7(e,t){return d7(e.map(n=>{let r=t.routes[n.route.id];if(!r)return[];let o=[r.module];return r.imports&&(o=o.concat(r.imports)),o}).flat(1))}function d7(e){return[...new Set(e)]}function f7(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}function p7(e,t){let n=new Set;return new Set(t),e.reduce((r,o)=>{let a=JSON.stringify(f7(o));return n.has(a)||(n.add(a),r.push({key:a,link:o})),r},[])}function h7(e){let t=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return t.pathname==="/"?t.pathname="_root.data":t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function m7(){let e=g.useContext(ya);return Qm(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function y7(){let e=g.useContext(sc);return Qm(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var Jm=g.createContext(void 0);Jm.displayName="FrameworkContext";function XS(){let e=g.useContext(Jm);return Qm(e,"You must render this element inside a <HydratedRouter> element"),e}function g7(e,t){let n=g.useContext(Jm),[r,o]=g.useState(!1),[a,i]=g.useState(!1),{onFocus:s,onBlur:c,onMouseEnter:l,onMouseLeave:u,onTouchStart:d}=t,f=g.useRef(null);g.useEffect(()=>{if(e==="render"&&i(!0),e==="viewport"){let m=b=>{b.forEach(x=>{i(x.isIntersecting)})},v=new IntersectionObserver(m,{threshold:.5});return f.current&&v.observe(f.current),()=>{v.disconnect()}}},[e]),g.useEffect(()=>{if(r){let m=setTimeout(()=>{i(!0)},100);return()=>{clearTimeout(m)}}},[r]);let p=()=>{o(!0)},y=()=>{o(!1),i(!1)};return n?e!=="intent"?[a,f,{}]:[a,f,{onFocus:dc(s,p),onBlur:dc(c,y),onMouseEnter:dc(l,p),onMouseLeave:dc(u,y),onTouchStart:dc(d,p)}]:[!1,f,{}]}function dc(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function v7({page:e,...t}){let{router:n}=m7(),r=g.useMemo(()=>Do(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?g.createElement(x7,{page:e,matches:r,...t}):(console.warn(`Tried to prefetch ${e} but no routes matched.`),null)}function b7(e){let{manifest:t,routeModules:n}=XS(),[r,o]=g.useState([]);return g.useEffect(()=>{let a=!1;return l7(e,t,n).then(i=>{a||o(i)}),()=>{a=!0}},[e,t,n]),r}function x7({page:e,matches:t,...n}){let r=Gr(),{manifest:o,routeModules:a}=XS(),{loaderData:i,matches:s}=y7(),c=g.useMemo(()=>KS(e,t,s,o,r,"data"),[e,t,s,o,r]),l=g.useMemo(()=>KS(e,t,s,o,r,"assets"),[e,t,s,o,r]),u=g.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let p=new Set,y=!1;if(t.forEach(v=>{var x;let b=o.routes[v.route.id];!b||!b.hasLoader||(!c.some(j=>j.route.id===v.route.id)&&v.route.id in i&&((x=a[v.route.id])!=null&&x.shouldRevalidate)||b.hasClientLoader?y=!0:p.add(v.route.id))}),p.size===0)return[];let m=h7(e);return y&&p.size>0&&m.searchParams.set("_routes",t.filter(v=>p.has(v.route.id)).map(v=>v.route.id).join(",")),[m.pathname+m.search]},[i,r,o,c,t,e,a]),d=g.useMemo(()=>u7(l,o),[l,o]),f=b7(l);return g.createElement(g.Fragment,null,u.map(p=>g.createElement("link",{key:p,rel:"prefetch",as:"fetch",href:p,...n})),d.map(p=>g.createElement("link",{key:p,rel:"modulepreload",href:p,...n})),f.map(({key:p,link:y})=>g.createElement("link",{key:p,...y})))}function w7(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var GS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{GS&&(window.__reactRouterVersion="7.0.2")}catch{}function QS(e,t){return _S({basename:t==null?void 0:t.basename,future:t==null?void 0:t.future,history:R$({window:t==null?void 0:t.window}),hydrationData:(t==null?void 0:t.hydrationData)||JS(),routes:e,mapRouteProperties:YS,dataStrategy:t==null?void 0:t.dataStrategy,patchRoutesOnNavigation:t==null?void 0:t.patchRoutesOnNavigation,window:t==null?void 0:t.window}).initialize()}function _7(e,t){return _S({basename:t==null?void 0:t.basename,future:t==null?void 0:t.future,history:I$({window:t==null?void 0:t.window}),hydrationData:JS(),routes:e,mapRouteProperties:YS,dataStrategy:t==null?void 0:t.dataStrategy,patchRoutesOnNavigation:t==null?void 0:t.patchRoutesOnNavigation,window:t==null?void 0:t.window}).initialize()}function JS(){let e=window==null?void 0:window.__staticRouterHydrationData;return e&&e.errors&&(e={...e,errors:j7(e.errors)}),e}function j7(e){if(!e)return null;let t=Object.entries(e),n={};for(let[r,o]of t)if(o&&o.__type==="RouteErrorResponse")n[r]=new Wu(o.status,o.statusText,o.data,o.internal===!0);else if(o&&o.__type==="Error"){if(o.__subType){let a=window[o.__subType];if(typeof a=="function")try{let i=new a(o.message);i.stack="",n[r]=i}catch{}}if(n[r]==null){let a=new Error(o.message);a.stack="",n[r]=a}}else n[r]=o;return n}var ZS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,eC=g.forwardRef(function({onClick:e,discover:t="render",prefetch:n="none",relative:r,reloadDocument:o,replace:a,state:i,target:s,to:c,preventScrollReset:l,viewTransition:u,...d},f){let{basename:p}=g.useContext(or),y=typeof c=="string"&&ZS.test(c),m,v=!1;if(typeof c=="string"&&y&&(m=c,GS))try{let C=new URL(window.location.href),M=c.startsWith("//")?new URL(C.protocol+c):new URL(c),P=nr(M.pathname,p);M.origin===C.origin&&P!=null?c=P+M.search+M.hash:v=!0}catch{Lt(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let b=Nz(c,{relative:r}),[x,j,w]=g7(n,d),_=O7(c,{replace:a,state:i,target:s,preventScrollReset:l,relative:r,viewTransition:u});function E(C){e&&e(C),C.defaultPrevented||_(C)}let S=g.createElement("a",{...d,...w,href:m||b,onClick:v||o?e:E,ref:w7(f,j),target:s,"data-discover":!y&&t==="render"?"true":void 0});return x&&!y?g.createElement(g.Fragment,null,S,g.createElement(v7,{page:b})):S});eC.displayName="Link";var E7=g.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:n="",end:r=!1,style:o,to:a,viewTransition:i,children:s,...c},l){let u=lc(a,{relative:c.relative}),d=Gr(),f=g.useContext(sc),{navigator:p,basename:y}=g.useContext(or),m=f!=null&&A7(u)&&i===!0,v=p.encodeLocation?p.encodeLocation(u).pathname:u.pathname,b=d.pathname,x=f&&f.navigation&&f.navigation.location?f.navigation.location.pathname:null;t||(b=b.toLowerCase(),x=x?x.toLowerCase():null,v=v.toLowerCase()),x&&y&&(x=nr(x,y)||x);const j=v!=="/"&&v.endsWith("/")?v.length-1:v.length;let w=b===v||!r&&b.startsWith(v)&&b.charAt(j)==="/",_=x!=null&&(x===v||!r&&x.startsWith(v)&&x.charAt(v.length)==="/"),E={isActive:w,isPending:_,isTransitioning:m},S=w?e:void 0,C;typeof n=="function"?C=n(E):C=[n,w?"active":null,_?"pending":null,m?"transitioning":null].filter(Boolean).join(" ");let M=typeof o=="function"?o(E):o;return g.createElement(eC,{...c,"aria-current":S,className:C,ref:l,style:M,to:a,viewTransition:i},typeof s=="function"?s(E):s)});E7.displayName="NavLink";var S7=g.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:r,replace:o,state:a,method:i=Xu,action:s,onSubmit:c,relative:l,preventScrollReset:u,viewTransition:d,...f},p)=>{let y=P7(),m=k7(s,{relative:l}),v=i.toLowerCase()==="get"?"get":"post",b=typeof s=="string"&&ZS.test(s),x=j=>{if(c&&c(j),j.defaultPrevented)return;j.preventDefault();let w=j.nativeEvent.submitter,_=(w==null?void 0:w.getAttribute("formmethod"))||i;y(w||j.currentTarget,{fetcherKey:t,method:_,navigate:n,replace:o,state:a,relative:l,preventScrollReset:u,viewTransition:d})};return g.createElement("form",{ref:p,method:v,action:m,onSubmit:r?c:x,...f,"data-discover":!b&&e==="render"?"true":void 0})});S7.displayName="Form";function C7(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function tC(e){let t=g.useContext(ya);return $e(t,C7(e)),t}function O7(e,{target:t,replace:n,state:r,preventScrollReset:o,relative:a,viewTransition:i}={}){let s=cc(),c=Gr(),l=lc(e,{relative:a});return g.useCallback(u=>{if(r7(u,t)){u.preventDefault();let d=n!==void 0?n:Kr(c)===Kr(l);s(e,{replace:d,state:r,preventScrollReset:o,relative:a,viewTransition:i})}},[c,s,l,n,r,t,e,o,a,i])}var M7=0,N7=()=>`__${String(++M7)}__`;function P7(){let{router:e}=tC("useSubmit"),{basename:t}=g.useContext(or),n=Uz();return g.useCallback(async(r,o={})=>{let{action:a,method:i,encType:s,formData:c,body:l}=i7(r,t);if(o.navigate===!1){let u=o.fetcherKey||N7();await e.fetch(u,n,o.action||a,{preventScrollReset:o.preventScrollReset,formData:c,body:l,formMethod:o.method||i,formEncType:o.encType||s,flushSync:o.flushSync})}else await e.navigate(o.action||a,{preventScrollReset:o.preventScrollReset,formData:c,body:l,formMethod:o.method||i,formEncType:o.encType||s,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[e,t,n])}function k7(e,{relative:t}={}){let{basename:n}=g.useContext(or),r=g.useContext(zn);$e(r,"useFormAction must be used inside a RouteContext");let[o]=r.matches.slice(-1),a={...lc(e||".",{relative:t})},i=Gr();if(e==null){a.search=i.search;let s=new URLSearchParams(a.search),c=s.getAll("index");if(c.some(l=>l==="")){s.delete("index"),c.filter(u=>u).forEach(u=>s.append("index",u));let l=s.toString();a.search=l?`?${l}`:""}}return(!e||e===".")&&o.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(a.pathname=a.pathname==="/"?n:Er([n,a.pathname])),Kr(a)}function A7(e,t={}){let n=g.useContext(Wm);$e(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=tC("useViewTransitionState"),o=lc(e,{relative:t.relative});if(!n.isTransitioning)return!1;let a=nr(n.currentLocation.pathname,r)||n.currentLocation.pathname,i=nr(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Vu(o.pathname,i)!=null||Vu(o.pathname,a)!=null}new TextEncoder;function T7(e){return g.createElement(qz,{flushSync:Eu.flushSync,...e})}var R7=Uxe.useId||(()=>{}),I7=0;ht=function(e){const[t,n]=g.useState(R7());return gn(()=>{n(r=>r??String(I7++))},[e]),t?`radix-${t}`:""};var Zm="Collapsible",[D7,nC]=Fn(Zm),[L7,ey]=D7(Zm),rC=g.forwardRef((e,t)=>{const{__scopeCollapsible:n,open:r,defaultOpen:o,disabled:a,onOpenChange:i,...s}=e,[c=!1,l]=Jt({prop:r,defaultProp:o,onChange:i});return h.jsx(L7,{scope:n,disabled:a,contentId:ht(),open:c,onOpenToggle:g.useCallback(()=>l(u=>!u),[l]),children:h.jsx(Oe.div,{"data-state":oy(c),"data-disabled":a?"":void 0,...s,ref:t})})});rC.displayName=Zm;var oC="CollapsibleTrigger",ty=g.forwardRef((e,t)=>{const{__scopeCollapsible:n,...r}=e,o=ey(oC,n);return h.jsx(Oe.button,{type:"button","aria-controls":o.contentId,"aria-expanded":o.open||!1,"data-state":oy(o.open),"data-disabled":o.disabled?"":void 0,disabled:o.disabled,...r,ref:t,onClick:he(e.onClick,o.onOpenToggle)})});ty.displayName=oC;var ny="CollapsibleContent",ry=g.forwardRef((e,t)=>{const{forceMount:n,...r}=e,o=ey(ny,e.__scopeCollapsible);return h.jsx(Cn,{present:n||o.open,children:({present:a})=>h.jsx(F7,{...r,ref:t,present:a})})});ry.displayName=ny;var F7=g.forwardRef((e,t)=>{const{__scopeCollapsible:n,present:r,children:o,...a}=e,i=ey(ny,n),[s,c]=g.useState(r),l=g.useRef(null),u=tt(t,l),d=g.useRef(0),f=d.current,p=g.useRef(0),y=p.current,m=i.open||s,v=g.useRef(m),b=g.useRef();return g.useEffect(()=>{const x=requestAnimationFrame(()=>v.current=!1);return()=>cancelAnimationFrame(x)},[]),gn(()=>{const x=l.current;if(x){b.current=b.current||{transitionDuration:x.style.transitionDuration,animationName:x.style.animationName},x.style.transitionDuration="0s",x.style.animationName="none";const j=x.getBoundingClientRect();d.current=j.height,p.current=j.width,v.current||(x.style.transitionDuration=b.current.transitionDuration,x.style.animationName=b.current.animationName),c(r)}},[i.open,r]),h.jsx(Oe.div,{"data-state":oy(i.open),"data-disabled":i.disabled?"":void 0,id:i.contentId,hidden:!m,...a,ref:u,style:{"--radix-collapsible-content-height":f?`${f}px`:void 0,"--radix-collapsible-content-width":y?`${y}px`:void 0,...e.style},children:m&&o})});function oy(e){return e?"open":"closed"}var aC=rC,B7=ty,$7=ry;const z7=aC,V7=ty,U7=ry,ay=768;function H7(){const[e,t]=g.useState(void 0);return g.useEffect(()=>{const n=window.matchMedia(`(max-width: ${ay-1}px)`),r=()=>{t(window.innerWidth<ay)};return n.addEventListener("change",r),t(window.innerWidth<ay),()=>n.removeEventListener("change",r)},[]),!!e}let fc;fc=Ur("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),ut=g.forwardRef(({className:e,variant:t,size:n,asChild:r=!1,...o},a)=>{const i=r?Hr:"button";return h.jsx(i,{className:J(fc({variant:t,size:n,className:e})),ref:a,...o})}),ut.displayName="Button";const sn=g.forwardRef(({className:e,type:t,...n},r)=>h.jsx("input",{type:t,className:J("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...n}));sn.displayName="Input";var W7="Separator",iC="horizontal",q7=["horizontal","vertical"],sC=g.forwardRef((e,t)=>{const{decorative:n,orientation:r=iC,...o}=e,a=Y7(r)?r:iC,i=n?{role:"none"}:{"aria-orientation":a==="vertical"?a:void 0,role:"separator"};return h.jsx(Oe.div,{"data-orientation":a,...i,...o,ref:t})});sC.displayName=W7;function Y7(e){return q7.includes(e)}$h=sC;const pc=g.forwardRef(({className:e,orientation:t="horizontal",decorative:n=!0,...r},o)=>h.jsx($h,{ref:o,decorative:n,orientation:t,className:J("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...r}));pc.displayName=$h.displayName;var iy="focusScope.autoFocusOnMount",sy="focusScope.autoFocusOnUnmount",cC={bubbles:!1,cancelable:!0},K7="FocusScope",hc=g.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:o,onUnmountAutoFocus:a,...i}=e,[s,c]=g.useState(null),l=Ro(o),u=Ro(a),d=g.useRef(null),f=tt(t,m=>c(m)),p=g.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;g.useEffect(()=>{if(r){let m=function(j){if(p.paused||!s)return;const w=j.target;s.contains(w)?d.current=w:Fo(d.current,{select:!0})},v=function(j){if(p.paused||!s)return;const w=j.relatedTarget;w!==null&&(s.contains(w)||Fo(d.current,{select:!0}))},b=function(j){if(document.activeElement===document.body)for(const w of j)w.removedNodes.length>0&&Fo(s)};document.addEventListener("focusin",m),document.addEventListener("focusout",v);const x=new MutationObserver(b);return s&&x.observe(s,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",m),document.removeEventListener("focusout",v),x.disconnect()}}},[r,s,p.paused]),g.useEffect(()=>{if(s){dC.add(p);const m=document.activeElement;if(!s.contains(m)){const v=new CustomEvent(iy,cC);s.addEventListener(iy,l),s.dispatchEvent(v),v.defaultPrevented||(X7(eV(lC(s)),{select:!0}),document.activeElement===m&&Fo(s))}return()=>{s.removeEventListener(iy,l),setTimeout(()=>{const v=new CustomEvent(sy,cC);s.addEventListener(sy,u),s.dispatchEvent(v),v.defaultPrevented||Fo(m??document.body,{select:!0}),s.removeEventListener(sy,u),dC.remove(p)},0)}}},[s,l,u,p]);const y=g.useCallback(m=>{if(!n&&!r||p.paused)return;const v=m.key==="Tab"&&!m.altKey&&!m.ctrlKey&&!m.metaKey,b=document.activeElement;if(v&&b){const x=m.currentTarget,[j,w]=G7(x);j&&w?!m.shiftKey&&b===w?(m.preventDefault(),n&&Fo(j,{select:!0})):m.shiftKey&&b===j&&(m.preventDefault(),n&&Fo(w,{select:!0})):b===x&&m.preventDefault()}},[n,r,p.paused]);return h.jsx(Oe.div,{tabIndex:-1,...i,ref:f,onKeyDown:y})});hc.displayName=K7;function X7(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(Fo(r,{select:t}),document.activeElement!==n)return}function G7(e){const t=lC(e),n=uC(t,e),r=uC(t.reverse(),e);return[n,r]}function lC(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const o=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||o?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function uC(e,t){for(const n of e)if(!Q7(n,{upTo:t}))return n}function Q7(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function J7(e){return e instanceof HTMLInputElement&&"select"in e}function Fo(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&J7(e)&&t&&e.select()}}var dC=Z7();function Z7(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=fC(e,t),e.unshift(t)},remove(t){var n;e=fC(e,t),(n=e[0])==null||n.resume()}}}function fC(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function eV(e){return e.filter(t=>t.tagName!=="A")}var cy=0;function Zu(){g.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??pC()),document.body.insertAdjacentElement("beforeend",e[1]??pC()),cy++,()=>{cy===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),cy--}},[])}function pC(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Sr=function(){return Sr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Sr.apply(this,arguments)};function hC(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n}function tV(e,t,n){if(n||arguments.length===2)for(var r=0,o=t.length,a;r<o;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))}var ed="right-scroll-bar-position",td="width-before-scroll-bar",nV="with-scroll-bars-hidden",rV="--removed-body-scroll-bar-size";function ly(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function oV(e,t){var n=g.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var o=n.value;o!==r&&(n.value=r,n.callback(r,o))}}}})[0];return n.callback=t,n.facade}var aV=typeof window<"u"?g.useLayoutEffect:g.useEffect,mC=new WeakMap;function iV(e,t){var n=oV(null,function(r){return e.forEach(function(o){return ly(o,r)})});return aV(function(){var r=mC.get(n);if(r){var o=new Set(r),a=new Set(e),i=n.current;o.forEach(function(s){a.has(s)||ly(s,null)}),a.forEach(function(s){o.has(s)||ly(s,i)})}mC.set(n,e)},[e]),n}function sV(e){return e}function cV(e,t){t===void 0&&(t=sV);var n=[],r=!1,o={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(a){var i=t(a,r);return n.push(i),function(){n=n.filter(function(s){return s!==i})}},assignSyncMedium:function(a){for(r=!0;n.length;){var i=n;n=[],i.forEach(a)}n={push:function(s){return a(s)},filter:function(){return n}}},assignMedium:function(a){r=!0;var i=[];if(n.length){var s=n;n=[],s.forEach(a),i=n}var c=function(){var u=i;i=[],u.forEach(a)},l=function(){return Promise.resolve().then(c)};l(),n={push:function(u){i.push(u),l()},filter:function(u){return i=i.filter(u),n}}}};return o}function lV(e){e===void 0&&(e={});var t=cV(null);return t.options=Sr({async:!0,ssr:!1},e),t}var yC=function(e){var t=e.sideCar,n=hC(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return g.createElement(r,Sr({},n))};yC.isSideCarExport=!0;function uV(e,t){return e.useMedium(t),yC}var gC=lV(),uy=function(){},nd=g.forwardRef(function(e,t){var n=g.useRef(null),r=g.useState({onScrollCapture:uy,onWheelCapture:uy,onTouchMoveCapture:uy}),o=r[0],a=r[1],i=e.forwardProps,s=e.children,c=e.className,l=e.removeScrollBar,u=e.enabled,d=e.shards,f=e.sideCar,p=e.noIsolation,y=e.inert,m=e.allowPinchZoom,v=e.as,b=v===void 0?"div":v,x=e.gapMode,j=hC(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),w=f,_=iV([n,t]),E=Sr(Sr({},j),o);return g.createElement(g.Fragment,null,u&&g.createElement(w,{sideCar:gC,removeScrollBar:l,shards:d,noIsolation:p,inert:y,setCallbacks:a,allowPinchZoom:!!m,lockRef:n,gapMode:x}),i?g.cloneElement(g.Children.only(s),Sr(Sr({},E),{ref:_})):g.createElement(b,Sr({},E,{className:c,ref:_}),s))});nd.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},nd.classNames={fullWidth:td,zeroRight:ed};var dV=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function fV(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=dV();return t&&e.setAttribute("nonce",t),e}function pV(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function hV(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var mV=function(){var e=0,t=null;return{add:function(n){e==0&&(t=fV())&&(pV(t,n),hV(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},yV=function(){var e=mV();return function(t,n){g.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},vC=function(){var e=yV(),t=function(n){var r=n.styles,o=n.dynamic;return e(r,o),null};return t},gV={left:0,top:0,right:0,gap:0},dy=function(e){return parseInt(e||"",10)||0},vV=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],o=t[e==="padding"?"paddingRight":"marginRight"];return[dy(n),dy(r),dy(o)]},bV=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return gV;var t=vV(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},xV=vC(),ui="data-scroll-locked",wV=function(e,t,n,r){var o=e.left,a=e.top,i=e.right,s=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(nV,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(s,"px ").concat(r,`;
  }
  body[`).concat(ui,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(o,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(i,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(s,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(s,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(ed,` {
    right: `).concat(s,"px ").concat(r,`;
  }
  
  .`).concat(td,` {
    margin-right: `).concat(s,"px ").concat(r,`;
  }
  
  .`).concat(ed," .").concat(ed,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(td," .").concat(td,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(ui,`] {
    `).concat(rV,": ").concat(s,`px;
  }
`)},bC=function(){var e=parseInt(document.body.getAttribute(ui)||"0",10);return isFinite(e)?e:0},_V=function(){g.useEffect(function(){return document.body.setAttribute(ui,(bC()+1).toString()),function(){var e=bC()-1;e<=0?document.body.removeAttribute(ui):document.body.setAttribute(ui,e.toString())}},[])},jV=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,o=r===void 0?"margin":r;_V();var a=g.useMemo(function(){return bV(o)},[o]);return g.createElement(xV,{styles:wV(a,!t,o,n?"":"!important")})},fy=!1;if(typeof window<"u")try{var rd=Object.defineProperty({},"passive",{get:function(){return fy=!0,!0}});window.addEventListener("test",rd,rd),window.removeEventListener("test",rd,rd)}catch{fy=!1}var di=fy?{passive:!1}:!1,EV=function(e){return e.tagName==="TEXTAREA"},xC=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!EV(e)&&n[t]==="visible")},SV=function(e){return xC(e,"overflowY")},CV=function(e){return xC(e,"overflowX")},wC=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var o=_C(e,r);if(o){var a=jC(e,r),i=a[1],s=a[2];if(i>s)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},OV=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},MV=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},_C=function(e,t){return e==="v"?SV(t):CV(t)},jC=function(e,t){return e==="v"?OV(t):MV(t)},NV=function(e,t){return e==="h"&&t==="rtl"?-1:1},PV=function(e,t,n,r,o){var a=NV(e,window.getComputedStyle(t).direction),i=a*r,s=n.target,c=t.contains(s),l=!1,u=i>0,d=0,f=0;do{var p=jC(e,s),y=p[0],m=p[1],v=p[2],b=m-v-a*y;(y||b)&&_C(e,s)&&(d+=b,f+=y),s instanceof ShadowRoot?s=s.host:s=s.parentNode}while(!c&&s!==document.body||c&&(t.contains(s)||t===s));return(u&&(Math.abs(d)<1||!o)||!u&&(Math.abs(f)<1||!o))&&(l=!0),l},od=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},EC=function(e){return[e.deltaX,e.deltaY]},SC=function(e){return e&&"current"in e?e.current:e},kV=function(e,t){return e[0]===t[0]&&e[1]===t[1]},AV=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},TV=0,fi=[];function RV(e){var t=g.useRef([]),n=g.useRef([0,0]),r=g.useRef(),o=g.useState(TV++)[0],a=g.useState(vC)[0],i=g.useRef(e);g.useEffect(function(){i.current=e},[e]),g.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(o));var m=tV([e.lockRef.current],(e.shards||[]).map(SC),!0).filter(Boolean);return m.forEach(function(v){return v.classList.add("allow-interactivity-".concat(o))}),function(){document.body.classList.remove("block-interactivity-".concat(o)),m.forEach(function(v){return v.classList.remove("allow-interactivity-".concat(o))})}}},[e.inert,e.lockRef.current,e.shards]);var s=g.useCallback(function(m,v){if("touches"in m&&m.touches.length===2||m.type==="wheel"&&m.ctrlKey)return!i.current.allowPinchZoom;var b=od(m),x=n.current,j="deltaX"in m?m.deltaX:x[0]-b[0],w="deltaY"in m?m.deltaY:x[1]-b[1],_,E=m.target,S=Math.abs(j)>Math.abs(w)?"h":"v";if("touches"in m&&S==="h"&&E.type==="range")return!1;var C=wC(S,E);if(!C)return!0;if(C?_=S:(_=S==="v"?"h":"v",C=wC(S,E)),!C)return!1;if(!r.current&&"changedTouches"in m&&(j||w)&&(r.current=_),!_)return!0;var M=r.current||_;return PV(M,v,m,M==="h"?j:w,!0)},[]),c=g.useCallback(function(m){var v=m;if(!(!fi.length||fi[fi.length-1]!==a)){var b="deltaY"in v?EC(v):od(v),x=t.current.filter(function(_){return _.name===v.type&&(_.target===v.target||v.target===_.shadowParent)&&kV(_.delta,b)})[0];if(x&&x.should){v.cancelable&&v.preventDefault();return}if(!x){var j=(i.current.shards||[]).map(SC).filter(Boolean).filter(function(_){return _.contains(v.target)}),w=j.length>0?s(v,j[0]):!i.current.noIsolation;w&&v.cancelable&&v.preventDefault()}}},[]),l=g.useCallback(function(m,v,b,x){var j={name:m,delta:v,target:b,should:x,shadowParent:IV(b)};t.current.push(j),setTimeout(function(){t.current=t.current.filter(function(w){return w!==j})},1)},[]),u=g.useCallback(function(m){n.current=od(m),r.current=void 0},[]),d=g.useCallback(function(m){l(m.type,EC(m),m.target,s(m,e.lockRef.current))},[]),f=g.useCallback(function(m){l(m.type,od(m),m.target,s(m,e.lockRef.current))},[]);g.useEffect(function(){return fi.push(a),e.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:f}),document.addEventListener("wheel",c,di),document.addEventListener("touchmove",c,di),document.addEventListener("touchstart",u,di),function(){fi=fi.filter(function(m){return m!==a}),document.removeEventListener("wheel",c,di),document.removeEventListener("touchmove",c,di),document.removeEventListener("touchstart",u,di)}},[]);var p=e.removeScrollBar,y=e.inert;return g.createElement(g.Fragment,null,y?g.createElement(a,{styles:AV(o)}):null,p?g.createElement(jV,{gapMode:e.gapMode}):null)}function IV(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const DV=uV(gC,RV);var mc=g.forwardRef(function(e,t){return g.createElement(nd,Sr({},e,{ref:t,sideCar:DV}))});mc.classNames=nd.classNames;var LV=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},pi=new WeakMap,ad=new WeakMap,id={},py=0,CC=function(e){return e&&(e.host||CC(e.parentNode))},FV=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=CC(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},BV=function(e,t,n,r){var o=FV(t,Array.isArray(e)?e:[e]);id[n]||(id[n]=new WeakMap);var a=id[n],i=[],s=new Set,c=new Set(o),l=function(d){!d||s.has(d)||(s.add(d),l(d.parentNode))};o.forEach(l);var u=function(d){!d||c.has(d)||Array.prototype.forEach.call(d.children,function(f){if(s.has(f))u(f);else try{var p=f.getAttribute(r),y=p!==null&&p!=="false",m=(pi.get(f)||0)+1,v=(a.get(f)||0)+1;pi.set(f,m),a.set(f,v),i.push(f),m===1&&y&&ad.set(f,!0),v===1&&f.setAttribute(n,"true"),y||f.setAttribute(r,"true")}catch(b){console.error("aria-hidden: cannot operate on ",f,b)}})};return u(t),s.clear(),py++,function(){i.forEach(function(d){var f=pi.get(d)-1,p=a.get(d)-1;pi.set(d,f),a.set(d,p),f||(ad.has(d)||d.removeAttribute(r),ad.delete(d)),p||d.removeAttribute(n)}),py--,py||(pi=new WeakMap,pi=new WeakMap,ad=new WeakMap,id={})}},sd=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),o=LV(e);return o?(r.push.apply(r,Array.from(o.querySelectorAll("[aria-live]"))),BV(r,o,n,"aria-hidden")):function(){return null}},hy="Dialog",[OC,MC]=Fn(hy),[$V,ar]=OC(hy),NC=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:o,onOpenChange:a,modal:i=!0}=e,s=g.useRef(null),c=g.useRef(null),[l=!1,u]=Jt({prop:r,defaultProp:o,onChange:a});return h.jsx($V,{scope:t,triggerRef:s,contentRef:c,contentId:ht(),titleId:ht(),descriptionId:ht(),open:l,onOpenChange:u,onOpenToggle:g.useCallback(()=>u(d=>!d),[u]),modal:i,children:n})};NC.displayName=hy;var PC="DialogTrigger",kC=g.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=ar(PC,n),a=tt(t,o.triggerRef);return h.jsx(Oe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":gy(o.open),...r,ref:a,onClick:he(e.onClick,o.onOpenToggle)})});kC.displayName=PC;var my="DialogPortal",[zV,AC]=OC(my,{forceMount:void 0}),TC=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:o}=e,a=ar(my,t);return h.jsx(zV,{scope:t,forceMount:n,children:g.Children.map(r,i=>h.jsx(Cn,{present:n||a.open,children:h.jsx(Cu,{asChild:!0,container:o,children:i})}))})};TC.displayName=my;var cd="DialogOverlay",RC=g.forwardRef((e,t)=>{const n=AC(cd,e.__scopeDialog),{forceMount:r=n.forceMount,...o}=e,a=ar(cd,e.__scopeDialog);return a.modal?h.jsx(Cn,{present:r||a.open,children:h.jsx(VV,{...o,ref:t})}):null});RC.displayName=cd;var VV=g.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=ar(cd,n);return h.jsx(mc,{as:Hr,allowPinchZoom:!0,shards:[o.contentRef],children:h.jsx(Oe.div,{"data-state":gy(o.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),ga="DialogContent",IC=g.forwardRef((e,t)=>{const n=AC(ga,e.__scopeDialog),{forceMount:r=n.forceMount,...o}=e,a=ar(ga,e.__scopeDialog);return h.jsx(Cn,{present:r||a.open,children:a.modal?h.jsx(UV,{...o,ref:t}):h.jsx(HV,{...o,ref:t})})});IC.displayName=ga;var UV=g.forwardRef((e,t)=>{const n=ar(ga,e.__scopeDialog),r=g.useRef(null),o=tt(t,n.contentRef,r);return g.useEffect(()=>{const a=r.current;if(a)return sd(a)},[]),h.jsx(DC,{...e,ref:o,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:he(e.onCloseAutoFocus,a=>{var i;a.preventDefault(),(i=n.triggerRef.current)==null||i.focus()}),onPointerDownOutside:he(e.onPointerDownOutside,a=>{const i=a.detail.originalEvent,s=i.button===0&&i.ctrlKey===!0;(i.button===2||s)&&a.preventDefault()}),onFocusOutside:he(e.onFocusOutside,a=>a.preventDefault())})}),HV=g.forwardRef((e,t)=>{const n=ar(ga,e.__scopeDialog),r=g.useRef(!1),o=g.useRef(!1);return h.jsx(DC,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var i,s;(i=e.onCloseAutoFocus)==null||i.call(e,a),a.defaultPrevented||(r.current||((s=n.triggerRef.current)==null||s.focus()),a.preventDefault()),r.current=!1,o.current=!1},onInteractOutside:a=>{var s,c;(s=e.onInteractOutside)==null||s.call(e,a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const i=a.target;(c=n.triggerRef.current)!=null&&c.contains(i)&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&o.current&&a.preventDefault()}})}),DC=g.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:o,onCloseAutoFocus:a,...i}=e,s=ar(ga,n),c=g.useRef(null),l=tt(t,c);return Zu(),h.jsxs(h.Fragment,{children:[h.jsx(hc,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:o,onUnmountAutoFocus:a,children:h.jsx(Su,{role:"dialog",id:s.contentId,"aria-describedby":s.descriptionId,"aria-labelledby":s.titleId,"data-state":gy(s.open),...i,ref:l,onDismiss:()=>s.onOpenChange(!1)})}),h.jsxs(h.Fragment,{children:[h.jsx(UC,{titleId:s.titleId}),h.jsx(WC,{contentRef:c,descriptionId:s.descriptionId})]})]})}),yy="DialogTitle",LC=g.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=ar(yy,n);return h.jsx(Oe.h2,{id:o.titleId,...r,ref:t})});LC.displayName=yy;var FC="DialogDescription",BC=g.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=ar(FC,n);return h.jsx(Oe.p,{id:o.descriptionId,...r,ref:t})});BC.displayName=FC;var $C="DialogClose",zC=g.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,o=ar($C,n);return h.jsx(Oe.button,{type:"button",...r,ref:t,onClick:he(e.onClick,()=>o.onOpenChange(!1))})});zC.displayName=$C;function gy(e){return e?"open":"closed"}let vy,VC,by,UC,HC,WC,qC;vy="DialogTitleWarning",[VC,by]=Hxe(vy,{contentName:ga,titleName:yy,docsSlug:"dialog"}),UC=({titleId:e})=>{const t=by(vy),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return g.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},HC="DialogDescriptionWarning",WC=({contentRef:e,descriptionId:t})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${by(HC).contentName}}.`;return g.useEffect(()=>{var o;const r=(o=e.current)==null?void 0:o.getAttribute("aria-describedby");t&&r&&(document.getElementById(t)||console.warn(n))},[n,e,t]),null},Gs=NC,qC=kC,Qs=TC,da=RC,fa=IC,ti=LC,ni=BC,Zs=zC;const WV=Gs,qV=Qs,YC=g.forwardRef(({className:e,...t},n)=>h.jsx(da,{className:J("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));YC.displayName=da.displayName;const YV=Ur("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),KC=g.forwardRef(({side:e="right",className:t,children:n,...r},o)=>h.jsxs(qV,{children:[h.jsx(YC,{}),h.jsxs(fa,{ref:o,className:J(YV({side:e}),t),...r,children:[n,h.jsxs(Zs,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[h.jsx(de,{name:"x",className:"h-4 w-4"}),h.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));KC.displayName=fa.displayName;const KV=g.forwardRef(({className:e,...t},n)=>h.jsx(ti,{ref:n,className:J("text-lg font-semibold text-foreground",e),...t}));KV.displayName=ti.displayName;const XV=g.forwardRef(({className:e,...t},n)=>h.jsx(ni,{ref:n,className:J("text-sm text-muted-foreground",e),...t}));XV.displayName=ni.displayName;function XC({className:e,...t}){return h.jsx("div",{className:J("animate-pulse rounded-md bg-muted",e),...t})}const GV=["top","right","bottom","left"],Cr=Math.min,kn=Math.max,ld=Math.round,ud=Math.floor,Bo=e=>({x:e,y:e}),QV={left:"right",right:"left",bottom:"top",top:"bottom"},JV={start:"end",end:"start"};function xy(e,t,n){return kn(e,Cr(t,n))}function Qr(e,t){return typeof e=="function"?e(t):e}function Jr(e){return e.split("-")[0]}function hi(e){return e.split("-")[1]}function wy(e){return e==="x"?"y":"x"}function _y(e){return e==="y"?"height":"width"}function $o(e){return["top","bottom"].includes(Jr(e))?"y":"x"}function jy(e){return wy($o(e))}function ZV(e,t,n){n===void 0&&(n=!1);const r=hi(e),o=jy(e),a=_y(o);let i=o==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[a]>t.floating[a]&&(i=dd(i)),[i,dd(i)]}function eU(e){const t=dd(e);return[Ey(e),t,Ey(t)]}function Ey(e){return e.replace(/start|end/g,t=>JV[t])}function tU(e,t,n){const r=["left","right"],o=["right","left"],a=["top","bottom"],i=["bottom","top"];switch(e){case"top":case"bottom":return n?t?o:r:t?r:o;case"left":case"right":return t?a:i;default:return[]}}function nU(e,t,n,r){const o=hi(e);let a=tU(Jr(e),n==="start",r);return o&&(a=a.map(i=>i+"-"+o),t&&(a=a.concat(a.map(Ey)))),a}function dd(e){return e.replace(/left|right|bottom|top/g,t=>QV[t])}function rU(e){return{top:0,right:0,bottom:0,left:0,...e}}function GC(e){return typeof e!="number"?rU(e):{top:e,right:e,bottom:e,left:e}}function fd(e){const{x:t,y:n,width:r,height:o}=e;return{width:r,height:o,top:n,left:t,right:t+r,bottom:n+o,x:t,y:n}}function QC(e,t,n){let{reference:r,floating:o}=e;const a=$o(t),i=jy(t),s=_y(i),c=Jr(t),l=a==="y",u=r.x+r.width/2-o.width/2,d=r.y+r.height/2-o.height/2,f=r[s]/2-o[s]/2;let p;switch(c){case"top":p={x:u,y:r.y-o.height};break;case"bottom":p={x:u,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:d};break;case"left":p={x:r.x-o.width,y:d};break;default:p={x:r.x,y:r.y}}switch(hi(t)){case"start":p[i]-=f*(n&&l?-1:1);break;case"end":p[i]+=f*(n&&l?-1:1);break}return p}const oU=async(e,t,n)=>{const{placement:r="bottom",strategy:o="absolute",middleware:a=[],platform:i}=n,s=a.filter(Boolean),c=await(i.isRTL==null?void 0:i.isRTL(t));let l=await i.getElementRects({reference:e,floating:t,strategy:o}),{x:u,y:d}=QC(l,r,c),f=r,p={},y=0;for(let m=0;m<s.length;m++){const{name:v,fn:b}=s[m],{x,y:j,data:w,reset:_}=await b({x:u,y:d,initialPlacement:r,placement:f,strategy:o,middlewareData:p,rects:l,platform:i,elements:{reference:e,floating:t}});u=x??u,d=j??d,p={...p,[v]:{...p[v],...w}},_&&y<=50&&(y++,typeof _=="object"&&(_.placement&&(f=_.placement),_.rects&&(l=_.rects===!0?await i.getElementRects({reference:e,floating:t,strategy:o}):_.rects),{x:u,y:d}=QC(l,f,c)),m=-1)}return{x:u,y:d,placement:f,strategy:o,middlewareData:p}};async function yc(e,t){var n;t===void 0&&(t={});const{x:r,y:o,platform:a,rects:i,elements:s,strategy:c}=e,{boundary:l="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:f=!1,padding:p=0}=Qr(t,e),y=GC(p),m=s[f?d==="floating"?"reference":"floating":d],v=fd(await a.getClippingRect({element:(n=await(a.isElement==null?void 0:a.isElement(m)))==null||n?m:m.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(s.floating)),boundary:l,rootBoundary:u,strategy:c})),b=d==="floating"?{x:r,y:o,width:i.floating.width,height:i.floating.height}:i.reference,x=await(a.getOffsetParent==null?void 0:a.getOffsetParent(s.floating)),j=await(a.isElement==null?void 0:a.isElement(x))?await(a.getScale==null?void 0:a.getScale(x))||{x:1,y:1}:{x:1,y:1},w=fd(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:s,rect:b,offsetParent:x,strategy:c}):b);return{top:(v.top-w.top+y.top)/j.y,bottom:(w.bottom-v.bottom+y.bottom)/j.y,left:(v.left-w.left+y.left)/j.x,right:(w.right-v.right+y.right)/j.x}}const aU=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:o,rects:a,platform:i,elements:s,middlewareData:c}=t,{element:l,padding:u=0}=Qr(e,t)||{};if(l==null)return{};const d=GC(u),f={x:n,y:r},p=jy(o),y=_y(p),m=await i.getDimensions(l),v=p==="y",b=v?"top":"left",x=v?"bottom":"right",j=v?"clientHeight":"clientWidth",w=a.reference[y]+a.reference[p]-f[p]-a.floating[y],_=f[p]-a.reference[p],E=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l));let S=E?E[j]:0;(!S||!await(i.isElement==null?void 0:i.isElement(E)))&&(S=s.floating[j]||a.floating[y]);const C=w/2-_/2,M=S/2-m[y]/2-1,P=Cr(d[b],M),N=Cr(d[x],M),R=P,A=S-m[y]-N,O=S/2-m[y]/2+C,k=xy(R,O,A),T=!c.arrow&&hi(o)!=null&&O!==k&&a.reference[y]/2-(O<R?P:N)-m[y]/2<0,I=T?O<R?O-R:O-A:0;return{[p]:f[p]+I,data:{[p]:k,centerOffset:O-k-I,...T&&{alignmentOffset:I}},reset:T}}}),iU=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:o,middlewareData:a,rects:i,initialPlacement:s,platform:c,elements:l}=t,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:m=!0,...v}=Qr(e,t);if((n=a.arrow)!=null&&n.alignmentOffset)return{};const b=Jr(o),x=$o(s),j=Jr(s)===s,w=await(c.isRTL==null?void 0:c.isRTL(l.floating)),_=f||(j||!m?[dd(s)]:eU(s)),E=y!=="none";!f&&E&&_.push(...nU(s,m,y,w));const S=[s,..._],C=await yc(t,v),M=[];let P=((r=a.flip)==null?void 0:r.overflows)||[];if(u&&M.push(C[b]),d){const O=ZV(o,i,w);M.push(C[O[0]],C[O[1]])}if(P=[...P,{placement:o,overflows:M}],!M.every(O=>O<=0)){var N,R;const O=(((N=a.flip)==null?void 0:N.index)||0)+1,k=S[O];if(k)return{data:{index:O,overflows:P},reset:{placement:k}};let T=(R=P.filter(I=>I.overflows[0]<=0).sort((I,L)=>I.overflows[1]-L.overflows[1])[0])==null?void 0:R.placement;if(!T)switch(p){case"bestFit":{var A;const I=(A=P.filter(L=>{if(E){const D=$o(L.placement);return D===x||D==="y"}return!0}).map(L=>[L.placement,L.overflows.filter(D=>D>0).reduce((D,z)=>D+z,0)]).sort((L,D)=>L[1]-D[1])[0])==null?void 0:A[0];I&&(T=I);break}case"initialPlacement":T=s;break}if(o!==T)return{reset:{placement:T}}}return{}}}};function JC(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function ZC(e){return GV.some(t=>e[t]>=0)}const sU=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...o}=Qr(e,t);switch(r){case"referenceHidden":{const a=await yc(t,{...o,elementContext:"reference"}),i=JC(a,n.reference);return{data:{referenceHiddenOffsets:i,referenceHidden:ZC(i)}}}case"escaped":{const a=await yc(t,{...o,altBoundary:!0}),i=JC(a,n.floating);return{data:{escapedOffsets:i,escaped:ZC(i)}}}default:return{}}}}};async function cU(e,t){const{placement:n,platform:r,elements:o}=e,a=await(r.isRTL==null?void 0:r.isRTL(o.floating)),i=Jr(n),s=hi(n),c=$o(n)==="y",l=["left","top"].includes(i)?-1:1,u=a&&c?-1:1,d=Qr(t,e);let{mainAxis:f,crossAxis:p,alignmentAxis:y}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...d};return s&&typeof y=="number"&&(p=s==="end"?y*-1:y),c?{x:p*u,y:f*l}:{x:f*l,y:p*u}}const lU=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:o,y:a,placement:i,middlewareData:s}=t,c=await cU(t,e);return i===((n=s.offset)==null?void 0:n.placement)&&(r=s.arrow)!=null&&r.alignmentOffset?{}:{x:o+c.x,y:a+c.y,data:{...c,placement:i}}}}},uU=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:o}=t,{mainAxis:a=!0,crossAxis:i=!1,limiter:s={fn:v=>{let{x:b,y:x}=v;return{x:b,y:x}}},...c}=Qr(e,t),l={x:n,y:r},u=await yc(t,c),d=$o(Jr(o)),f=wy(d);let p=l[f],y=l[d];if(a){const v=f==="y"?"top":"left",b=f==="y"?"bottom":"right",x=p+u[v],j=p-u[b];p=xy(x,p,j)}if(i){const v=d==="y"?"top":"left",b=d==="y"?"bottom":"right",x=y+u[v],j=y-u[b];y=xy(x,y,j)}const m=s.fn({...t,[f]:p,[d]:y});return{...m,data:{x:m.x-n,y:m.y-r}}}}},dU=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:o,rects:a,middlewareData:i}=t,{offset:s=0,mainAxis:c=!0,crossAxis:l=!0}=Qr(e,t),u={x:n,y:r},d=$o(o),f=wy(d);let p=u[f],y=u[d];const m=Qr(s,t),v=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(c){const j=f==="y"?"height":"width",w=a.reference[f]-a.floating[j]+v.mainAxis,_=a.reference[f]+a.reference[j]-v.mainAxis;p<w?p=w:p>_&&(p=_)}if(l){var b,x;const j=f==="y"?"width":"height",w=["top","left"].includes(Jr(o)),_=a.reference[d]-a.floating[j]+(w&&((b=i.offset)==null?void 0:b[d])||0)+(w?0:v.crossAxis),E=a.reference[d]+a.reference[j]+(w?0:((x=i.offset)==null?void 0:x[d])||0)-(w?v.crossAxis:0);y<_?y=_:y>E&&(y=E)}return{[f]:p,[d]:y}}}},fU=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){const{placement:n,rects:r,platform:o,elements:a}=t,{apply:i=()=>{},...s}=Qr(e,t),c=await yc(t,s),l=Jr(n),u=hi(n),d=$o(n)==="y",{width:f,height:p}=r.floating;let y,m;l==="top"||l==="bottom"?(y=l,m=u===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(m=l,y=u==="end"?"top":"bottom");const v=p-c.top-c.bottom,b=f-c.left-c.right,x=Cr(p-c[y],v),j=Cr(f-c[m],b),w=!t.middlewareData.shift;let _=x,E=j;if(d?E=u||w?Cr(j,b):b:_=u||w?Cr(x,v):v,w&&!u){const C=kn(c.left,0),M=kn(c.right,0),P=kn(c.top,0),N=kn(c.bottom,0);d?E=f-2*(C!==0||M!==0?C+M:kn(c.left,c.right)):_=p-2*(P!==0||N!==0?P+N:kn(c.top,c.bottom))}await i({...t,availableWidth:E,availableHeight:_});const S=await o.getDimensions(a.floating);return f!==S.width||p!==S.height?{reset:{rects:!0}}:{}}}};function mi(e){return eO(e)?(e.nodeName||"").toLowerCase():"#document"}function An(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Zr(e){var t;return(t=(eO(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function eO(e){return e instanceof Node||e instanceof An(e).Node}function ir(e){return e instanceof Element||e instanceof An(e).Element}function Or(e){return e instanceof HTMLElement||e instanceof An(e).HTMLElement}function tO(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof An(e).ShadowRoot}function gc(e){const{overflow:t,overflowX:n,overflowY:r,display:o}=sr(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(o)}function pU(e){return["table","td","th"].includes(mi(e))}function pd(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function Sy(e){const t=Cy(),n=ir(e)?sr(e):e;return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function hU(e){let t=zo(e);for(;Or(t)&&!yi(t);){if(Sy(t))return t;if(pd(t))return null;t=zo(t)}return null}function Cy(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function yi(e){return["html","body","#document"].includes(mi(e))}function sr(e){return An(e).getComputedStyle(e)}function hd(e){return ir(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function zo(e){if(mi(e)==="html")return e;const t=e.assignedSlot||e.parentNode||tO(e)&&e.host||Zr(e);return tO(t)?t.host:t}function nO(e){const t=zo(e);return yi(t)?e.ownerDocument?e.ownerDocument.body:e.body:Or(t)&&gc(t)?t:nO(t)}function vc(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const o=nO(e),a=o===((r=e.ownerDocument)==null?void 0:r.body),i=An(o);if(a){const s=Oy(i);return t.concat(i,i.visualViewport||[],gc(o)?o:[],s&&n?vc(s):[])}return t.concat(o,vc(o,[],n))}function Oy(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function rO(e){const t=sr(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const o=Or(e),a=o?e.offsetWidth:n,i=o?e.offsetHeight:r,s=ld(n)!==a||ld(r)!==i;return s&&(n=a,r=i),{width:n,height:r,$:s}}function My(e){return ir(e)?e:e.contextElement}function gi(e){const t=My(e);if(!Or(t))return Bo(1);const n=t.getBoundingClientRect(),{width:r,height:o,$:a}=rO(t);let i=(a?ld(n.width):n.width)/r,s=(a?ld(n.height):n.height)/o;return(!i||!Number.isFinite(i))&&(i=1),(!s||!Number.isFinite(s))&&(s=1),{x:i,y:s}}const mU=Bo(0);function oO(e){const t=An(e);return!Cy()||!t.visualViewport?mU:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function yU(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==An(e)?!1:t}function va(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const o=e.getBoundingClientRect(),a=My(e);let i=Bo(1);t&&(r?ir(r)&&(i=gi(r)):i=gi(e));const s=yU(a,n,r)?oO(a):Bo(0);let c=(o.left+s.x)/i.x,l=(o.top+s.y)/i.y,u=o.width/i.x,d=o.height/i.y;if(a){const f=An(a),p=r&&ir(r)?An(r):r;let y=f,m=Oy(y);for(;m&&r&&p!==y;){const v=gi(m),b=m.getBoundingClientRect(),x=sr(m),j=b.left+(m.clientLeft+parseFloat(x.paddingLeft))*v.x,w=b.top+(m.clientTop+parseFloat(x.paddingTop))*v.y;c*=v.x,l*=v.y,u*=v.x,d*=v.y,c+=j,l+=w,y=An(m),m=Oy(y)}}return fd({width:u,height:d,x:c,y:l})}function gU(e){let{elements:t,rect:n,offsetParent:r,strategy:o}=e;const a=o==="fixed",i=Zr(r),s=t?pd(t.floating):!1;if(r===i||s&&a)return n;let c={scrollLeft:0,scrollTop:0},l=Bo(1);const u=Bo(0),d=Or(r);if((d||!d&&!a)&&((mi(r)!=="body"||gc(i))&&(c=hd(r)),Or(r))){const f=va(r);l=gi(r),u.x=f.x+r.clientLeft,u.y=f.y+r.clientTop}return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-c.scrollLeft*l.x+u.x,y:n.y*l.y-c.scrollTop*l.y+u.y}}function vU(e){return Array.from(e.getClientRects())}function aO(e){return va(Zr(e)).left+hd(e).scrollLeft}function bU(e){const t=Zr(e),n=hd(e),r=e.ownerDocument.body,o=kn(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),a=kn(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let i=-n.scrollLeft+aO(e);const s=-n.scrollTop;return sr(r).direction==="rtl"&&(i+=kn(t.clientWidth,r.clientWidth)-o),{width:o,height:a,x:i,y:s}}function xU(e,t){const n=An(e),r=Zr(e),o=n.visualViewport;let a=r.clientWidth,i=r.clientHeight,s=0,c=0;if(o){a=o.width,i=o.height;const l=Cy();(!l||l&&t==="fixed")&&(s=o.offsetLeft,c=o.offsetTop)}return{width:a,height:i,x:s,y:c}}function wU(e,t){const n=va(e,!0,t==="fixed"),r=n.top+e.clientTop,o=n.left+e.clientLeft,a=Or(e)?gi(e):Bo(1),i=e.clientWidth*a.x,s=e.clientHeight*a.y,c=o*a.x,l=r*a.y;return{width:i,height:s,x:c,y:l}}function iO(e,t,n){let r;if(t==="viewport")r=xU(e,n);else if(t==="document")r=bU(Zr(e));else if(ir(t))r=wU(t,n);else{const o=oO(e);r={...t,x:t.x-o.x,y:t.y-o.y}}return fd(r)}function sO(e,t){const n=zo(e);return n===t||!ir(n)||yi(n)?!1:sr(n).position==="fixed"||sO(n,t)}function _U(e,t){const n=t.get(e);if(n)return n;let r=vc(e,[],!1).filter(s=>ir(s)&&mi(s)!=="body"),o=null;const a=sr(e).position==="fixed";let i=a?zo(e):e;for(;ir(i)&&!yi(i);){const s=sr(i),c=Sy(i);!c&&s.position==="fixed"&&(o=null),(a?!c&&!o:!c&&s.position==="static"&&o&&["absolute","fixed"].includes(o.position)||gc(i)&&!c&&sO(e,i))?r=r.filter(l=>l!==i):o=s,i=zo(i)}return t.set(e,r),r}function jU(e){let{element:t,boundary:n,rootBoundary:r,strategy:o}=e;const a=[...n==="clippingAncestors"?pd(t)?[]:_U(t,this._c):[].concat(n),r],i=a[0],s=a.reduce((c,l)=>{const u=iO(t,l,o);return c.top=kn(u.top,c.top),c.right=Cr(u.right,c.right),c.bottom=Cr(u.bottom,c.bottom),c.left=kn(u.left,c.left),c},iO(t,i,o));return{width:s.right-s.left,height:s.bottom-s.top,x:s.left,y:s.top}}function EU(e){const{width:t,height:n}=rO(e);return{width:t,height:n}}function SU(e,t,n){const r=Or(t),o=Zr(t),a=n==="fixed",i=va(e,!0,a,t);let s={scrollLeft:0,scrollTop:0};const c=Bo(0);if(r||!r&&!a)if((mi(t)!=="body"||gc(o))&&(s=hd(t)),r){const d=va(t,!0,a,t);c.x=d.x+t.clientLeft,c.y=d.y+t.clientTop}else o&&(c.x=aO(o));const l=i.left+s.scrollLeft-c.x,u=i.top+s.scrollTop-c.y;return{x:l,y:u,width:i.width,height:i.height}}function Ny(e){return sr(e).position==="static"}function cO(e,t){return!Or(e)||sr(e).position==="fixed"?null:t?t(e):e.offsetParent}function lO(e,t){const n=An(e);if(pd(e))return n;if(!Or(e)){let o=zo(e);for(;o&&!yi(o);){if(ir(o)&&!Ny(o))return o;o=zo(o)}return n}let r=cO(e,t);for(;r&&pU(r)&&Ny(r);)r=cO(r,t);return r&&yi(r)&&Ny(r)&&!Sy(r)?n:r||hU(e)||n}const CU=async function(e){const t=this.getOffsetParent||lO,n=this.getDimensions,r=await n(e.floating);return{reference:SU(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function OU(e){return sr(e).direction==="rtl"}const MU={convertOffsetParentRelativeRectToViewportRelativeRect:gU,getDocumentElement:Zr,getClippingRect:jU,getOffsetParent:lO,getElementRects:CU,getClientRects:vU,getDimensions:EU,getScale:gi,isElement:ir,isRTL:OU};function NU(e,t){let n=null,r;const o=Zr(e);function a(){var s;clearTimeout(r),(s=n)==null||s.disconnect(),n=null}function i(s,c){s===void 0&&(s=!1),c===void 0&&(c=1),a();const{left:l,top:u,width:d,height:f}=e.getBoundingClientRect();if(s||t(),!d||!f)return;const p=ud(u),y=ud(o.clientWidth-(l+d)),m=ud(o.clientHeight-(u+f)),v=ud(l),b={rootMargin:-p+"px "+-y+"px "+-m+"px "+-v+"px",threshold:kn(0,Cr(1,c))||1};let x=!0;function j(w){const _=w[0].intersectionRatio;if(_!==c){if(!x)return i();_?i(!1,_):r=setTimeout(()=>{i(!1,1e-7)},1e3)}x=!1}try{n=new IntersectionObserver(j,{...b,root:o.ownerDocument})}catch{n=new IntersectionObserver(j,b)}n.observe(e)}return i(!0),a}jE=function(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:o=!0,ancestorResize:a=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:s=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,l=My(e),u=o||a?[...l?vc(l):[],...vc(t)]:[];u.forEach(b=>{o&&b.addEventListener("scroll",n,{passive:!0}),a&&b.addEventListener("resize",n)});const d=l&&s?NU(l,n):null;let f=-1,p=null;i&&(p=new ResizeObserver(b=>{let[x]=b;x&&x.target===l&&p&&(p.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var j;(j=p)==null||j.observe(t)})),n()}),l&&!c&&p.observe(l),p.observe(t));let y,m=c?va(e):null;c&&v();function v(){const b=va(e);m&&(b.x!==m.x||b.y!==m.y||b.width!==m.width||b.height!==m.height)&&n(),m=b,y=requestAnimationFrame(v)}return n(),()=>{var b;u.forEach(x=>{o&&x.removeEventListener("scroll",n),a&&x.removeEventListener("resize",n)}),d==null||d(),(b=p)==null||b.disconnect(),p=null,c&&cancelAnimationFrame(y)}};let uO;xE=lU,LE=uU,wE=iU,BE=fU,uO=sU,_m=aU,FE=dU,_E=(e,t,n)=>{const r=new Map,o={platform:MU,...n},a={...o.platform,_c:r};return oU(e,t,{...o,platform:a})};var md=typeof document<"u"?g.useLayoutEffect:g.useEffect;function yd(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,o;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!yd(e[r],t[r]))return!1;return!0}if(o=Object.keys(e),n=o.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,o[r]))return!1;for(r=n;r--!==0;){const a=o[r];if(!(a==="_owner"&&e.$$typeof)&&!yd(e[a],t[a]))return!1}return!0}return e!==e&&t!==t}function dO(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function fO(e,t){const n=dO(e);return Math.round(t*n)/n}function pO(e){const t=g.useRef(e);return md(()=>{t.current=e}),t}function PU(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:o,elements:{reference:a,floating:i}={},transform:s=!0,whileElementsMounted:c,open:l}=e,[u,d]=g.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[f,p]=g.useState(r);yd(f,r)||p(r);const[y,m]=g.useState(null),[v,b]=g.useState(null),x=g.useCallback(I=>{I!==E.current&&(E.current=I,m(I))},[]),j=g.useCallback(I=>{I!==S.current&&(S.current=I,b(I))},[]),w=a||y,_=i||v,E=g.useRef(null),S=g.useRef(null),C=g.useRef(u),M=c!=null,P=pO(c),N=pO(o),R=g.useCallback(()=>{if(!E.current||!S.current)return;const I={placement:t,strategy:n,middleware:f};N.current&&(I.platform=N.current),_E(E.current,S.current,I).then(L=>{const D={...L,isPositioned:!0};A.current&&!yd(C.current,D)&&(C.current=D,Eu.flushSync(()=>{d(D)}))})},[f,t,n,N]);md(()=>{l===!1&&C.current.isPositioned&&(C.current.isPositioned=!1,d(I=>({...I,isPositioned:!1})))},[l]);const A=g.useRef(!1);md(()=>(A.current=!0,()=>{A.current=!1}),[]),md(()=>{if(w&&(E.current=w),_&&(S.current=_),w&&_){if(P.current)return P.current(w,_,R);R()}},[w,_,R,P,M]);const O=g.useMemo(()=>({reference:E,floating:S,setReference:x,setFloating:j}),[x,j]),k=g.useMemo(()=>({reference:w,floating:_}),[w,_]),T=g.useMemo(()=>{const I={position:n,left:0,top:0};if(!k.floating)return I;const L=fO(k.floating,u.x),D=fO(k.floating,u.y);return s?{...I,transform:"translate("+L+"px, "+D+"px)",...dO(k.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:L,top:D}},[n,s,k.floating,u.x,u.y]);return g.useMemo(()=>({...u,update:R,refs:O,elements:k,floatingStyles:T}),[u,R,O,k,T])}const kU=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:o}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?_m({element:r.current,padding:o}).fn(n):{}:r?_m({element:r,padding:o}).fn(n):{}}}},AU=(e,t)=>({...xE(e),options:[e,t]}),TU=(e,t)=>({...LE(e),options:[e,t]}),RU=(e,t)=>({...FE(e),options:[e,t]}),IU=(e,t)=>({...wE(e),options:[e,t]}),DU=(e,t)=>({...BE(e),options:[e,t]}),LU=(e,t)=>({...uO(e),options:[e,t]}),FU=(e,t)=>({...kU(e),options:[e,t]});var BU="Arrow",hO=g.forwardRef((e,t)=>{const{children:n,width:r=10,height:o=5,...a}=e;return h.jsx(Oe.svg,{...a,ref:t,width:r,height:o,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:h.jsx("polygon",{points:"0,0 30,0 15,10"})})});hO.displayName=BU;var $U=hO;function zU(e,t=[]){let n=[];function r(a,i){const s=g.createContext(i),c=n.length;n=[...n,i];function l(d){const{scope:f,children:p,...y}=d,m=(f==null?void 0:f[e][c])||s,v=g.useMemo(()=>y,Object.values(y));return h.jsx(m.Provider,{value:v,children:p})}function u(d,f){const p=(f==null?void 0:f[e][c])||s,y=g.useContext(p);if(y)return y;if(i!==void 0)return i;throw new Error(`\`${d}\` must be used within \`${a}\``)}return l.displayName=a+"Provider",[l,u]}const o=()=>{const a=n.map(i=>g.createContext(i));return function(i){const s=(i==null?void 0:i[e])||a;return g.useMemo(()=>({[`__scope${e}`]:{...i,[e]:s}}),[i,s])}};return o.scopeName=e,[r,VU(o,...t)]}function VU(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(o){const a=r.reduce((i,{useScope:s,scopeName:c})=>{const l=s(o)[`__scope${c}`];return{...i,...l}},{});return g.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return n.scopeName=t.scopeName,n}function mO(e){const[t,n]=g.useState(void 0);return gn(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(o=>{if(!Array.isArray(o)||!o.length)return;const a=o[0];let i,s;if("borderBoxSize"in a){const c=a.borderBoxSize,l=Array.isArray(c)?c[0]:c;i=l.inlineSize,s=l.blockSize}else i=e.offsetWidth,s=e.offsetHeight;n({width:i,height:s})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var Py="Popper",[yO,Vo]=zU(Py),[UU,gO]=yO(Py),vO=e=>{const{__scopePopper:t,children:n}=e,[r,o]=g.useState(null);return h.jsx(UU,{scope:t,anchor:r,onAnchorChange:o,children:n})};vO.displayName=Py;var bO="PopperAnchor",xO=g.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...o}=e,a=gO(bO,n),i=g.useRef(null),s=tt(t,i);return g.useEffect(()=>{a.onAnchorChange((r==null?void 0:r.current)||i.current)}),r?null:h.jsx(Oe.div,{...o,ref:s})});xO.displayName=bO;var ky="PopperContent",[HU,WU]=yO(ky),wO=g.forwardRef((e,t)=>{var Z,q,W,Q,te,B;const{__scopePopper:n,side:r="bottom",sideOffset:o=0,align:a="center",alignOffset:i=0,arrowPadding:s=0,avoidCollisions:c=!0,collisionBoundary:l=[],collisionPadding:u=0,sticky:d="partial",hideWhenDetached:f=!1,updatePositionStrategy:p="optimized",onPlaced:y,...m}=e,v=gO(ky,n),[b,x]=g.useState(null),j=tt(t,se=>x(se)),[w,_]=g.useState(null),E=mO(w),S=(E==null?void 0:E.width)??0,C=(E==null?void 0:E.height)??0,M=r+(a!=="center"?"-"+a:""),P=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},N=Array.isArray(l)?l:[l],R=N.length>0,A={padding:P,boundary:N.filter(YU),altBoundary:R},{refs:O,floatingStyles:k,placement:T,isPositioned:I,middlewareData:L}=PU({strategy:"fixed",placement:M,whileElementsMounted:(...se)=>jE(...se,{animationFrame:p==="always"}),elements:{reference:v.anchor},middleware:[AU({mainAxis:o+C,alignmentAxis:i}),c&&TU({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?RU():void 0,...A}),c&&IU({...A}),DU({...A,apply:({elements:se,rects:ce,availableWidth:ve,availableHeight:Te})=>{const{width:qe,height:Ye}=ce.reference,ze=se.floating.style;ze.setProperty("--radix-popper-available-width",`${ve}px`),ze.setProperty("--radix-popper-available-height",`${Te}px`),ze.setProperty("--radix-popper-anchor-width",`${qe}px`),ze.setProperty("--radix-popper-anchor-height",`${Ye}px`)}}),w&&FU({element:w,padding:s}),KU({arrowWidth:S,arrowHeight:C}),f&&LU({strategy:"referenceHidden",...A})]}),[D,z]=EO(T),H=Ro(y);gn(()=>{I&&(H==null||H())},[I,H]);const F=(Z=L.arrow)==null?void 0:Z.x,U=(q=L.arrow)==null?void 0:q.y,Y=((W=L.arrow)==null?void 0:W.centerOffset)!==0,[G,re]=g.useState();return gn(()=>{b&&re(window.getComputedStyle(b).zIndex)},[b]),h.jsx("div",{ref:O.setFloating,"data-radix-popper-content-wrapper":"",style:{...k,transform:I?k.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:G,"--radix-popper-transform-origin":[(Q=L.transformOrigin)==null?void 0:Q.x,(te=L.transformOrigin)==null?void 0:te.y].join(" "),...((B=L.hide)==null?void 0:B.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:h.jsx(HU,{scope:n,placedSide:D,onArrowChange:_,arrowX:F,arrowY:U,shouldHideArrow:Y,children:h.jsx(Oe.div,{"data-side":D,"data-align":z,...m,ref:j,style:{...m.style,animation:I?void 0:"none"}})})})});wO.displayName=ky;var _O="PopperArrow",qU={top:"bottom",right:"left",bottom:"top",left:"right"},jO=g.forwardRef(function(e,t){const{__scopePopper:n,...r}=e,o=WU(_O,n),a=qU[o.placedSide];return h.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:h.jsx($U,{...r,ref:t,style:{...r.style,display:"block"}})})});jO.displayName=_O;function YU(e){return e!==null}var KU=e=>({name:"transformOrigin",options:e,fn(t){var m,v,b;const{placement:n,rects:r,middlewareData:o}=t,a=((m=o.arrow)==null?void 0:m.centerOffset)!==0,i=a?0:e.arrowWidth,s=a?0:e.arrowHeight,[c,l]=EO(n),u={start:"0%",center:"50%",end:"100%"}[l],d=(((v=o.arrow)==null?void 0:v.x)??0)+i/2,f=(((b=o.arrow)==null?void 0:b.y)??0)+s/2;let p="",y="";return c==="bottom"?(p=a?u:`${d}px`,y=`${-s}px`):c==="top"?(p=a?u:`${d}px`,y=`${r.floating.height+s}px`):c==="right"?(p=`${-s}px`,y=a?u:`${f}px`):c==="left"&&(p=`${r.floating.width+s}px`,y=a?u:`${f}px`),{data:{x:p,y}}}});function EO(e){const[t,n="center"]=e.split("-");return[t,n]}var bc=vO,xc=xO,gd=wO,vd=jO,[bd,_we]=Fn("Tooltip",[Vo]),xd=Vo(),SO="TooltipProvider",XU=700,Ay="tooltip.open",[GU,Ty]=bd(SO),CO=e=>{const{__scopeTooltip:t,delayDuration:n=XU,skipDelayDuration:r=300,disableHoverableContent:o=!1,children:a}=e,[i,s]=g.useState(!0),c=g.useRef(!1),l=g.useRef(0);return g.useEffect(()=>{const u=l.current;return()=>window.clearTimeout(u)},[]),h.jsx(GU,{scope:t,isOpenDelayed:i,delayDuration:n,onOpen:g.useCallback(()=>{window.clearTimeout(l.current),s(!1)},[]),onClose:g.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>s(!0),r)},[r]),isPointerInTransitRef:c,onPointerInTransitChange:g.useCallback(u=>{c.current=u},[]),disableHoverableContent:o,children:a})};CO.displayName=SO;var wd="Tooltip",[QU,wc]=bd(wd),OO=e=>{const{__scopeTooltip:t,children:n,open:r,defaultOpen:o=!1,onOpenChange:a,disableHoverableContent:i,delayDuration:s}=e,c=Ty(wd,e.__scopeTooltip),l=xd(t),[u,d]=g.useState(null),f=ht(),p=g.useRef(0),y=i??c.disableHoverableContent,m=s??c.delayDuration,v=g.useRef(!1),[b=!1,x]=Jt({prop:r,defaultProp:o,onChange:S=>{S?(c.onOpen(),document.dispatchEvent(new CustomEvent(Ay))):c.onClose(),a==null||a(S)}}),j=g.useMemo(()=>b?v.current?"delayed-open":"instant-open":"closed",[b]),w=g.useCallback(()=>{window.clearTimeout(p.current),p.current=0,v.current=!1,x(!0)},[x]),_=g.useCallback(()=>{window.clearTimeout(p.current),p.current=0,x(!1)},[x]),E=g.useCallback(()=>{window.clearTimeout(p.current),p.current=window.setTimeout(()=>{v.current=!0,x(!0),p.current=0},m)},[m,x]);return g.useEffect(()=>()=>{p.current&&(window.clearTimeout(p.current),p.current=0)},[]),h.jsx(bc,{...l,children:h.jsx(QU,{scope:t,contentId:f,open:b,stateAttribute:j,trigger:u,onTriggerChange:d,onTriggerEnter:g.useCallback(()=>{c.isOpenDelayed?E():w()},[c.isOpenDelayed,E,w]),onTriggerLeave:g.useCallback(()=>{y?_():(window.clearTimeout(p.current),p.current=0)},[_,y]),onOpen:w,onClose:_,disableHoverableContent:y,children:n})})};OO.displayName=wd;var Ry="TooltipTrigger",MO=g.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,o=wc(Ry,n),a=Ty(Ry,n),i=xd(n),s=g.useRef(null),c=tt(t,s,o.onTriggerChange),l=g.useRef(!1),u=g.useRef(!1),d=g.useCallback(()=>l.current=!1,[]);return g.useEffect(()=>()=>document.removeEventListener("pointerup",d),[d]),h.jsx(xc,{asChild:!0,...i,children:h.jsx(Oe.button,{"aria-describedby":o.open?o.contentId:void 0,"data-state":o.stateAttribute,...r,ref:c,onPointerMove:he(e.onPointerMove,f=>{f.pointerType!=="touch"&&!u.current&&!a.isPointerInTransitRef.current&&(o.onTriggerEnter(),u.current=!0)}),onPointerLeave:he(e.onPointerLeave,()=>{o.onTriggerLeave(),u.current=!1}),onPointerDown:he(e.onPointerDown,()=>{l.current=!0,document.addEventListener("pointerup",d,{once:!0})}),onFocus:he(e.onFocus,()=>{l.current||o.onOpen()}),onBlur:he(e.onBlur,o.onClose),onClick:he(e.onClick,o.onClose)})})});MO.displayName=Ry;var Iy="TooltipPortal",[JU,ZU]=bd(Iy,{forceMount:void 0}),NO=e=>{const{__scopeTooltip:t,forceMount:n,children:r,container:o}=e,a=wc(Iy,t);return h.jsx(JU,{scope:t,forceMount:n,children:h.jsx(Cn,{present:n||a.open,children:h.jsx(Cu,{asChild:!0,container:o,children:r})})})};NO.displayName=Iy;var vi="TooltipContent",PO=g.forwardRef((e,t)=>{const n=ZU(vi,e.__scopeTooltip),{forceMount:r=n.forceMount,side:o="top",...a}=e,i=wc(vi,e.__scopeTooltip);return h.jsx(Cn,{present:r||i.open,children:i.disableHoverableContent?h.jsx(kO,{side:o,...a,ref:t}):h.jsx(eH,{side:o,...a,ref:t})})}),eH=g.forwardRef((e,t)=>{const n=wc(vi,e.__scopeTooltip),r=Ty(vi,e.__scopeTooltip),o=g.useRef(null),a=tt(t,o),[i,s]=g.useState(null),{trigger:c,onClose:l}=n,u=o.current,{onPointerInTransitChange:d}=r,f=g.useCallback(()=>{s(null),d(!1)},[d]),p=g.useCallback((y,m)=>{const v=y.currentTarget,b={x:y.clientX,y:y.clientY},x=oH(b,v.getBoundingClientRect()),j=aH(b,x),w=iH(m.getBoundingClientRect()),_=cH([...j,...w]);s(_),d(!0)},[d]);return g.useEffect(()=>()=>f(),[f]),g.useEffect(()=>{if(c&&u){const y=v=>p(v,u),m=v=>p(v,c);return c.addEventListener("pointerleave",y),u.addEventListener("pointerleave",m),()=>{c.removeEventListener("pointerleave",y),u.removeEventListener("pointerleave",m)}}},[c,u,p,f]),g.useEffect(()=>{if(i){const y=m=>{const v=m.target,b={x:m.clientX,y:m.clientY},x=(c==null?void 0:c.contains(v))||(u==null?void 0:u.contains(v)),j=!sH(b,i);x?f():j&&(f(),l())};return document.addEventListener("pointermove",y),()=>document.removeEventListener("pointermove",y)}},[c,u,i,l,f]),h.jsx(kO,{...e,ref:a})}),[tH,nH]=bd(wd,{isInside:!1}),kO=g.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":o,onEscapeKeyDown:a,onPointerDownOutside:i,...s}=e,c=wc(vi,n),l=xd(n),{onClose:u}=c;return g.useEffect(()=>(document.addEventListener(Ay,u),()=>document.removeEventListener(Ay,u)),[u]),g.useEffect(()=>{if(c.trigger){const d=f=>{var p;(p=f.target)!=null&&p.contains(c.trigger)&&u()};return window.addEventListener("scroll",d,{capture:!0}),()=>window.removeEventListener("scroll",d,{capture:!0})}},[c.trigger,u]),h.jsx(Su,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:i,onFocusOutside:d=>d.preventDefault(),onDismiss:u,children:h.jsxs(gd,{"data-state":c.stateAttribute,...l,...s,ref:t,style:{...s.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[h.jsx(o$,{children:r}),h.jsx(tH,{scope:n,isInside:!0,children:h.jsx(Wxe,{id:c.contentId,role:"tooltip",children:o||r})})]})})});PO.displayName=vi;var AO="TooltipArrow",rH=g.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,o=xd(n);return nH(AO,n).isInside?null:h.jsx(vd,{...o,...r,ref:t})});rH.displayName=AO;function oH(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),o=Math.abs(t.right-e.x),a=Math.abs(t.left-e.x);switch(Math.min(n,r,o,a)){case a:return"left";case o:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function aH(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function iH(e){const{top:t,right:n,bottom:r,left:o}=e;return[{x:o,y:t},{x:n,y:t},{x:n,y:r},{x:o,y:r}]}function sH(e,t){const{x:n,y:r}=e;let o=!1;for(let a=0,i=t.length-1;a<t.length;i=a++){const s=t[a].x,c=t[a].y,l=t[i].x,u=t[i].y;c>r!=u>r&&n<(l-s)*(r-c)/(u-c)+s&&(o=!o)}return o}function cH(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),lH(t)}function lH(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const o=e[r];for(;t.length>=2;){const a=t[t.length-1],i=t[t.length-2];if((a.x-i.x)*(o.y-i.y)>=(a.y-i.y)*(o.x-i.x))t.pop();else break}t.push(o)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const o=e[r];for(;n.length>=2;){const a=n[n.length-1],i=n[n.length-2];if((a.x-i.x)*(o.y-i.y)>=(a.y-i.y)*(o.x-i.x))n.pop();else break}n.push(o)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}EE=CO,SE=OO,CE=MO,m$=NO,am=PO;const TO=EE,_d=SE,jd=CE,_c=g.forwardRef(({className:e,sideOffset:t=4,...n},r)=>h.jsx(am,{ref:r,sideOffset:t,className:J("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n}));_c.displayName=am.displayName;const uH="sidebar:state",dH=60*60*24*7,fH="16rem",pH="18rem",hH="3rem",mH="b",RO=g.createContext(null);function jc(){const e=g.useContext(RO);if(!e)throw new Error("useSidebar must be used within a SidebarProvider.");return e}const Dy=g.forwardRef(({defaultOpen:e=!0,open:t,onOpenChange:n,className:r,style:o,children:a,...i},s)=>{const c=H7(),[l,u]=g.useState(!1),[d,f]=g.useState(e),p=t??d,y=g.useCallback(x=>{const j=typeof x=="function"?x(p):x;n?n(j):f(j),document.cookie=`${uH}=${j}; path=/; max-age=${dH}`},[n,p]),m=g.useCallback(()=>c?u(x=>!x):y(x=>!x),[c,y,u]);g.useEffect(()=>{const x=j=>{j.key===mH&&(j.metaKey||j.ctrlKey)&&(j.preventDefault(),m())};return window.addEventListener("keydown",x),()=>window.removeEventListener("keydown",x)},[m]);const v=p?"expanded":"collapsed",b=g.useMemo(()=>({state:v,open:p,setOpen:y,isMobile:c,openMobile:l,setOpenMobile:u,toggleSidebar:m}),[v,p,y,c,l,u,m]);return h.jsx(RO.Provider,{value:b,children:h.jsx(TO,{delayDuration:0,children:h.jsx("div",{style:{"--sidebar-width":fH,"--sidebar-width-icon":hH,...o},className:J("group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar",r),ref:s,...i,children:a})})})});Dy.displayName="SidebarProvider";const Ly=g.forwardRef(({side:e="left",variant:t="sidebar",collapsible:n="offcanvas",className:r,children:o,...a},i)=>{const{isMobile:s,state:c,openMobile:l,setOpenMobile:u}=jc();return n==="none"?h.jsx("div",{className:J("flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground",r),ref:i,...a,children:o}):s?h.jsx(WV,{open:l,onOpenChange:u,...a,children:h.jsx(KC,{"data-sidebar":"sidebar","data-mobile":"true",className:"w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden",style:{"--sidebar-width":pH},side:e,children:h.jsx("div",{className:"flex h-full w-full flex-col",children:o})})}):h.jsxs("div",{ref:i,className:"group peer hidden md:block text-sidebar-foreground","data-state":c,"data-collapsible":c==="collapsed"?n:"","data-variant":t,"data-side":e,children:[h.jsx("div",{className:J("duration-200 relative h-svh w-[--sidebar-width] bg-transparent transition-[width] ease-linear","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180",t==="floating"||t==="inset"?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon]")}),h.jsx("div",{className:J("duration-200 fixed inset-y-0 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] ease-linear md:flex",e==="left"?"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]":"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]",t==="floating"||t==="inset"?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l",r),...a,children:h.jsx("div",{"data-sidebar":"sidebar",className:"flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow",children:o})})]})});Ly.displayName="Sidebar";const IO=g.forwardRef(({className:e,onClick:t,...n},r)=>{const{toggleSidebar:o}=jc();return h.jsx(ut,{ref:r,"data-sidebar":"trigger",variant:"ghost",size:"icon",className:J("h-7 w-7",e),onClick:a=>{t==null||t(a),o()},...n,children:h.jsx(de,{size:32,name:"panel-left"})})});IO.displayName="SidebarTrigger";const DO=g.forwardRef(({className:e,...t},n)=>{const{toggleSidebar:r}=jc();return h.jsx("button",{ref:n,"data-sidebar":"rail","aria-label":"Toggle Sidebar",tabIndex:-1,onClick:r,title:"Toggle Sidebar",className:J("absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] hover:after:bg-sidebar-border group-data-[side=left]:-right-4 group-data-[side=right]:left-0 sm:flex","[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize","[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize","group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar","[[data-side=left][data-collapsible=offcanvas]_&]:-right-2","[[data-side=right][data-collapsible=offcanvas]_&]:-left-2",e),...t})});DO.displayName="SidebarRail";const Fy=g.forwardRef(({className:e,...t},n)=>h.jsx("main",{ref:n,className:J("relative flex min-h-svh flex-1 flex-col bg-background","peer-data-[variant=inset]:min-h-[calc(100svh-theme(spacing.4))] md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow",e),...t}));Fy.displayName="SidebarInset";const yH=g.forwardRef(({className:e,...t},n)=>h.jsx(sn,{ref:n,"data-sidebar":"input",className:J("h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring",e),...t}));yH.displayName="SidebarInput";const gH=g.forwardRef(({className:e,...t},n)=>h.jsx("div",{ref:n,"data-sidebar":"header",className:J("flex flex-col gap-2 p-2",e),...t}));gH.displayName="SidebarHeader";const LO=g.forwardRef(({className:e,...t},n)=>h.jsx("div",{ref:n,"data-sidebar":"footer",className:J("flex flex-col gap-2 p-2",e),...t}));LO.displayName="SidebarFooter";const vH=g.forwardRef(({className:e,...t},n)=>h.jsx(pc,{ref:n,"data-sidebar":"separator",className:J("mx-2 w-auto bg-sidebar-border",e),...t}));vH.displayName="SidebarSeparator";const By=g.forwardRef(({className:e,...t},n)=>h.jsx("div",{ref:n,"data-sidebar":"content",className:J("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",e),...t}));By.displayName="SidebarContent";const Ec=g.forwardRef(({className:e,...t},n)=>h.jsx("div",{ref:n,"data-sidebar":"group",className:J("relative flex w-full min-w-0 flex-col p-2",e),...t}));Ec.displayName="SidebarGroup";const Ed=g.forwardRef(({className:e,asChild:t=!1,...n},r)=>{const o=t?Hr:"div";return h.jsx(o,{ref:r,"data-sidebar":"group-label",className:J("duration-200 flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opa] ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",e),...n})});Ed.displayName="SidebarGroupLabel";const bH=g.forwardRef(({className:e,asChild:t=!1,...n},r)=>{const o=t?Hr:"button";return h.jsx(o,{ref:r,"data-sidebar":"group-action",className:J("absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","group-data-[collapsible=icon]:hidden",e),...n})});bH.displayName="SidebarGroupAction";const xH=g.forwardRef(({className:e,...t},n)=>h.jsx("div",{ref:n,"data-sidebar":"group-content",className:J("w-full text-sm",e),...t}));xH.displayName="SidebarGroupContent";const bi=g.forwardRef(({className:e,...t},n)=>h.jsx("ul",{ref:n,"data-sidebar":"menu",className:J("flex w-full min-w-0 flex-col gap-1",e),...t}));bi.displayName="SidebarMenu";const eo=g.forwardRef(({className:e,...t},n)=>h.jsx("li",{ref:n,"data-sidebar":"menu-item",className:J("group/menu-item relative",e),...t}));eo.displayName="SidebarMenuItem";const wH=Ur("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:!p-0"}},defaultVariants:{variant:"default",size:"default"}}),to=g.forwardRef(({asChild:e=!1,isActive:t=!1,variant:n="default",size:r="default",tooltip:o,className:a,...i},s)=>{const c=e?Hr:"button",{isMobile:l,state:u}=jc(),d=h.jsx(c,{ref:s,"data-sidebar":"menu-button","data-size":r,"data-active":t,className:J(wH({variant:n,size:r}),a),...i});return o?(typeof o=="string"&&(o={children:o}),h.jsxs(_d,{children:[h.jsx(jd,{asChild:!0,children:d}),h.jsx(_c,{side:"right",align:"center",hidden:u!=="collapsed"||l,...o})]})):d});to.displayName="SidebarMenuButton";const _H=g.forwardRef(({className:e,asChild:t=!1,showOnHover:n=!1,...r},o)=>{const a=t?Hr:"button";return h.jsx(a,{ref:o,"data-sidebar":"menu-action",className:J("absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 peer-hover/menu-button:text-sidebar-accent-foreground [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",n&&"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0",e),...r})});_H.displayName="SidebarMenuAction";const jH=g.forwardRef(({className:e,...t},n)=>h.jsx("div",{ref:n,"data-sidebar":"menu-badge",className:J("absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground select-none pointer-events-none","peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",e),...t}));jH.displayName="SidebarMenuBadge";const EH=g.forwardRef(({className:e,showIcon:t=!1,...n},r)=>{const o=g.useMemo(()=>`${Math.floor(Math.random()*40)+50}%`,[]);return h.jsxs("div",{ref:r,"data-sidebar":"menu-skeleton",className:J("rounded-md h-8 flex gap-2 px-2 items-center",e),...n,children:[t&&h.jsx(XC,{className:"size-4 rounded-md","data-sidebar":"menu-skeleton-icon"}),h.jsx(XC,{className:"h-4 flex-1 max-w-[--skeleton-width]","data-sidebar":"menu-skeleton-text",style:{"--skeleton-width":o}})]})});EH.displayName="SidebarMenuSkeleton";const FO=g.forwardRef(({className:e,...t},n)=>h.jsx("ul",{ref:n,"data-sidebar":"menu-sub",className:J("mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5","group-data-[collapsible=icon]:hidden",e),...t}));FO.displayName="SidebarMenuSub";const BO=g.forwardRef(({...e},t)=>h.jsx("li",{ref:t,...e}));BO.displayName="SidebarMenuSubItem";const $O=g.forwardRef(({asChild:e=!1,size:t="md",isActive:n,className:r,...o},a)=>{const i=e?Hr:"a";return h.jsx(i,{ref:a,"data-sidebar":"menu-sub-button","data-size":t,"data-active":n,className:J("flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground","data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground",t==="sm"&&"text-xs",t==="md"&&"text-sm","group-data-[collapsible=icon]:hidden",r),...o})});$O.displayName="SidebarMenuSubButton";function SH({items:e}){const{t}=Ae("documents");return h.jsxs(Ec,{children:[h.jsx(Ed,{children:h.jsx("div",{className:"text-sm",children:t("title")})}),h.jsx(bi,{children:e.map(n=>{var r;return h.jsx(z7,{asChild:!0,defaultOpen:n.isActive,className:"group/collapsible",children:h.jsxs(eo,{children:[h.jsx(V7,{asChild:!0,children:h.jsxs(to,{className:"cursor-pointer",tooltip:t(n.title),children:[n.icon,h.jsx("span",{children:t(n.title)}),h.jsx(de,{name:"chevron-right",className:"ml-auto transition-transform duration-200 group-data-[state=open]/collapsible:rotate-90"})]})}),h.jsx(U7,{children:h.jsx(FO,{children:(r=n.items)==null?void 0:r.map(o=>h.jsx(BO,{className:"cursor-pointer",children:h.jsx($O,{asChild:!0,children:h.jsx("span",{children:t(o.title)})})},t(o.title)))})})]})},n.title)})})]})}const $y={application:"/application/:applicationId?",whiteboard:"/whiteboard/:sessionId?"},cr=(e,t)=>{const n=$y[e];return t?Object.keys(t||{}).reduce((r,o)=>r.replace(`:${o}`,(t==null?void 0:t[o])||""),n):n.replace(/\/:[^/]+/g,"")},CH=g.memo(({text:e,colors:t={first:"#9E7AFF",second:"#FE8BBB"},className:n,sparklesCount:r=10,...o})=>{const[a,i]=g.useState([]);return g.useEffect(()=>{const s=()=>{const d=`${Math.random()*100}%`,f=`${Math.random()*100}%`,p=Math.random()>.5?t.first:t.second,y=Math.random()*2,m=Math.random()*1+.3,v=Math.random()*10+5;return{id:`${d}-${f}-${Date.now()}`,x:d,y:f,color:p,delay:y,scale:m,lifespan:v}},c=()=>{const d=Array.from({length:r},s);i(d)},l=()=>{i(d=>d.map(f=>f.lifespan<=0?s():{...f,lifespan:f.lifespan-.1}))};c();const u=setInterval(l,100);return()=>clearInterval(u)},[t.first,t.second]),h.jsx("div",{className:J("text-6xl font-bold",n),...o,style:{"--sparkles-first-color":`${t.first}`,"--sparkles-second-color":`${t.second}`},children:h.jsxs("span",{className:"relative inline-block",children:[a.map(s=>h.jsx(OH,{...s},s.id)),h.jsx("strong",{children:e})]})})},(e,t)=>e.text===t.text),OH=({id:e,x:t,y:n,color:r,delay:o,scale:a})=>h.jsx(Ou.svg,{className:"pointer-events-none absolute z-20",initial:{opacity:0,left:t,top:n},animate:{opacity:[0,1,0],scale:[0,a,0],rotate:[75,120,150]},transition:{duration:.8,repeat:1/0,delay:o},width:"21",height:"21",viewBox:"0 0 21 21",children:h.jsx("path",{d:"M9.82531 0.843845C10.0553 0.215178 10.9446 0.215178 11.1746 0.843845L11.8618 2.72026C12.4006 4.19229 12.3916 6.39157 13.5 7.5C14.6084 8.60843 16.8077 8.59935 18.2797 9.13822L20.1561 9.82534C20.7858 10.0553 20.7858 10.9447 20.1561 11.1747L18.2797 11.8618C16.8077 12.4007 14.6084 12.3916 13.5 13.5C12.3916 14.6084 12.4006 16.8077 11.8618 18.2798L11.1746 20.1562C10.9446 20.7858 10.0553 20.7858 9.82531 20.1562L9.13819 18.2798C8.59932 16.8077 8.60843 14.6084 7.5 13.5C6.39157 12.3916 4.19225 12.4007 2.72023 11.8618L0.843814 11.1747C0.215148 10.9447 0.215148 10.0553 0.843814 9.82534L2.72023 9.13822C4.19225 8.59935 6.39157 8.60843 7.5 7.5C8.60843 6.39157 8.59932 4.19229 9.13819 2.72026L9.82531 0.843845Z",fill:r})},e);function MH({className:e,onClick:t}){const{t:n}=Ae("sidebar");return h.jsxs(to,{className:J(e,"tw-w-full"),onClick:t,children:[h.jsx(de,{name:"frame"}),h.jsx(CH,{text:n("new_session"),className:"text-sm",sparklesCount:3})]})}const NH=()=>{const[e,t]=g.useState(!1),n=pt(i=>i.setCurrentSession),r=pt(i=>i.createSession),o=Mu(i=>i.setSelectedSessionId),a=g.useCallback(async i=>{try{t(!0);const s=await r(i);n(s),o(s.id)}finally{t(!1)}},[r,n,o]);return{loading:e,createSession:a}},Sc=Gs,PH=Qs,zO=g.forwardRef(({className:e,...t},n)=>h.jsx(da,{ref:n,className:J("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));zO.displayName=da.displayName;const xi=g.forwardRef(({className:e,children:t,...n},r)=>h.jsxs(PH,{children:[h.jsx(zO,{}),h.jsxs(fa,{ref:r,className:J("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...n,children:[t,h.jsxs(Zs,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[h.jsx(de,{name:"x",className:"h-4 w-4"}),h.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));xi.displayName=fa.displayName;const wi=({className:e,...t})=>h.jsx("div",{className:J("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});wi.displayName="DialogHeader";const zy=({className:e,...t})=>h.jsx("div",{className:J("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});zy.displayName="DialogFooter";const _i=g.forwardRef(({className:e,...t},n)=>h.jsx(ti,{ref:n,className:J("text-lg font-semibold leading-none tracking-tight",e),...t}));_i.displayName=ti.displayName;const Vy=g.forwardRef(({className:e,...t},n)=>h.jsx(ni,{ref:n,className:J("text-sm text-muted-foreground",e),...t}));Vy.displayName=ni.displayName;var kH="Label",VO=g.forwardRef((e,t)=>h.jsx(Oe.label,{...e,ref:t,onMouseDown:n=>{var r;n.target.closest("button, input, select, textarea")||((r=e.onMouseDown)==null||r.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));VO.displayName=kH;var UO=VO;let HO;HO=Ur("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Ge=g.forwardRef(({className:e,...t},n)=>h.jsx(UO,{ref:n,className:J(HO(),e),...t})),Ge.displayName=UO.displayName;const AH=Us(()=>{const e=On(),{t}=Ae("dialogs"),[n,r]=g.useState(""),{toast:o}=on(),{loading:a,createSession:i}=NH(),s=l=>{r(l.target.value)},c=async()=>{try{await i({name:n}),e.hide()}catch{o({variant:"destructive",description:t("create_session.errors.create_failed")})}};return h.jsx(Sc,{open:e.visible,onOpenChange:e.hide,children:h.jsxs(xi,{className:"sm:max-w-[425px]",children:[h.jsxs(wi,{children:[h.jsx(_i,{children:t("create_session.title")}),h.jsx(Vy,{children:t("create_session.description")})]}),h.jsx("div",{className:"grid gap-4 py-4",children:h.jsxs("div",{className:"flex flex-col space-y-1.5",children:[h.jsx(Ge,{className:"mb-2",htmlFor:"name",children:t("create_session.name")}),h.jsx(sn,{onChange:s,id:"name",value:n,placeholder:t("create_session.name_placeholder")})]})}),h.jsx(zy,{children:h.jsx(ut,{onClick:c,disabled:a||!n,type:"submit",children:t("create_session.create")})})]})})}),TH=()=>{const[e,t]=g.useState(!1),n=pt(o=>o.deleteSession),r=g.useCallback(async o=>{try{t(!0),await n(o),await Promise.all([ue("FlowEdge").find({select:["id"],where:{session_id:o}}).then(a=>Promise.all(a.map(i=>ue("FlowEdge").delete(i.id)))),ue("FlowNode").find({select:["id"],where:{session_id:o}}).then(a=>Promise.all(a.map(i=>ue("FlowNode").delete(i.id))))])}finally{t(!1)}},[n]);return{loading:e,deleteSession:r}};var WO="AlertDialog",[RH,jwe]=Fn(WO,[MC]),no=MC(),qO=e=>{const{__scopeAlertDialog:t,...n}=e,r=no(t);return h.jsx(Gs,{...r,...n,modal:!0})};qO.displayName=WO;var IH="AlertDialogTrigger",DH=g.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,o=no(n);return h.jsx(qC,{...o,...r,ref:t})});DH.displayName=IH;var LH="AlertDialogPortal",YO=e=>{const{__scopeAlertDialog:t,...n}=e,r=no(t);return h.jsx(Qs,{...r,...n})};YO.displayName=LH;var FH="AlertDialogOverlay",KO=g.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,o=no(n);return h.jsx(da,{...o,...r,ref:t})});KO.displayName=FH;var ji="AlertDialogContent",[BH,$H]=RH(ji),XO=g.forwardRef((e,t)=>{const{__scopeAlertDialog:n,children:r,...o}=e,a=no(n),i=g.useRef(null),s=tt(t,i),c=g.useRef(null);return h.jsx(VC,{contentName:ji,titleName:GO,docsSlug:"alert-dialog",children:h.jsx(BH,{scope:n,cancelRef:c,children:h.jsxs(fa,{role:"alertdialog",...a,...o,ref:s,onOpenAutoFocus:he(o.onOpenAutoFocus,l=>{var u;l.preventDefault(),(u=c.current)==null||u.focus({preventScroll:!0})}),onPointerDownOutside:l=>l.preventDefault(),onInteractOutside:l=>l.preventDefault(),children:[h.jsx(o$,{children:r}),h.jsx(rM,{contentRef:i})]})})})});XO.displayName=ji;var GO="AlertDialogTitle",QO=g.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,o=no(n);return h.jsx(ti,{...o,...r,ref:t})});QO.displayName=GO;var JO="AlertDialogDescription",ZO=g.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,o=no(n);return h.jsx(ni,{...o,...r,ref:t})});ZO.displayName=JO;var zH="AlertDialogAction",eM=g.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,o=no(n);return h.jsx(Zs,{...o,...r,ref:t})});eM.displayName=zH;var tM="AlertDialogCancel",nM=g.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,{cancelRef:o}=$H(tM,n),a=no(n),i=tt(t,o);return h.jsx(Zs,{...a,...r,ref:i})});nM.displayName=tM;let rM;rM=({contentRef:e})=>{const t=`\`${ji}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${ji}\` by passing a \`${JO}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${ji}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return g.useEffect(()=>{var n;document.getElementById((n=e.current)==null?void 0:n.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},ME=qO,OE=YO,ym=KO,gm=XO,xm=eM,wm=nM,vm=QO,bm=ZO;const VH=ME,UH=OE,oM=g.forwardRef(({className:e,...t},n)=>h.jsx(ym,{className:J("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));oM.displayName=ym.displayName;const aM=g.forwardRef(({className:e,...t},n)=>h.jsxs(UH,{children:[h.jsx(oM,{}),h.jsx(gm,{ref:n,className:J("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));aM.displayName=gm.displayName;const iM=({className:e,...t})=>h.jsx("div",{className:J("flex flex-col space-y-2 text-center sm:text-left",e),...t});iM.displayName="AlertDialogHeader";const sM=({className:e,...t})=>h.jsx("div",{className:J("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});sM.displayName="AlertDialogFooter";const cM=g.forwardRef(({className:e,...t},n)=>h.jsx(vm,{ref:n,className:J("text-lg font-semibold",e),...t}));cM.displayName=vm.displayName;const lM=g.forwardRef(({className:e,...t},n)=>h.jsx(bm,{ref:n,className:J("text-sm text-muted-foreground",e),...t}));lM.displayName=bm.displayName;const uM=g.forwardRef(({className:e,...t},n)=>h.jsx(xm,{ref:n,className:J(fc(),e),...t}));uM.displayName=xm.displayName;const dM=g.forwardRef(({className:e,...t},n)=>h.jsx(wm,{ref:n,className:J(fc({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));dM.displayName=wm.displayName;const fM=Us(({id:e})=>{const{t}=Ae("dialogs"),n=On(),{toast:r}=on(),{deleteSession:o}=TH(),a=async()=>{try{await o(e),n.hide()}catch{r({variant:"destructive",description:t("delete_session.errors.delete_failed")})}};return h.jsx(VH,{open:n.visible,onOpenChange:n.hide,children:h.jsxs(aM,{children:[h.jsxs(iM,{children:[h.jsx(cM,{children:t("delete_session.title")}),h.jsx(lM,{children:t("delete_session.description")})]}),h.jsxs(sM,{children:[h.jsx(dM,{onClick:n.hide,children:t("delete_session.cancel")}),h.jsx(uM,{onClick:a,children:t("delete_session.delete")})]})]})})});function HH({sessions:e,currentSession:t,setCurrentSession:n}){const{t:r}=Ae("sidebar"),o=cc(),a=On(AH),i=On(fM),s=g.useCallback(()=>{a.show({})},[a]),c=g.useCallback((u,d)=>{i.show({id:d}),u.preventDefault()},[i]),l=u=>{n(u),o(cr("whiteboard",{sessionId:u.id}))};return h.jsxs(Ec,{className:"group-data-[collapsible=icon]:hidden",children:[h.jsx(Ed,{children:h.jsx("div",{className:"text-sm",children:r("sessions")})}),h.jsxs(bi,{children:[h.jsx(eo,{children:h.jsx(MH,{onClick:s,className:"w-full"})}),e.map(u=>h.jsx(eo,{className:"cursor-pointer",children:h.jsx(to,{asChild:!0,onClick:()=>l(u),children:h.jsxs("div",{className:"flex flex-row justify-between items-center",children:[h.jsxs("div",{className:"flex gap-2",children:[(t==null?void 0:t.id)===u.id?h.jsx(de,{size:16,color:"green",name:"check"}):h.jsx(de,{size:16,name:"chevron-right"}),h.jsx("span",{children:u.name})]}),h.jsx(de,{onClick:d=>c(d,u.id),size:16,name:"trash-2"})]})})},u.id)),e!=null&&e.length?h.jsx(eo,{children:h.jsxs(to,{className:"text-sidebar-foreground/70",children:[h.jsx(de,{name:"ellipsis",className:"text-sidebar-foreground/70"}),h.jsx("span",{children:r("more_session")})]})}):null]})]})}var WH=g.createContext(void 0);Io=function(e){const t=g.useContext(WH);return e||t||"ltr"};function qH(e,t=[]){let n=[];function r(a,i){const s=g.createContext(i),c=n.length;n=[...n,i];function l(d){const{scope:f,children:p,...y}=d,m=(f==null?void 0:f[e][c])||s,v=g.useMemo(()=>y,Object.values(y));return h.jsx(m.Provider,{value:v,children:p})}function u(d,f){const p=(f==null?void 0:f[e][c])||s,y=g.useContext(p);if(y)return y;if(i!==void 0)return i;throw new Error(`\`${d}\` must be used within \`${a}\``)}return l.displayName=a+"Provider",[l,u]}const o=()=>{const a=n.map(i=>g.createContext(i));return function(i){const s=(i==null?void 0:i[e])||a;return g.useMemo(()=>({[`__scope${e}`]:{...i,[e]:s}}),[i,s])}};return o.scopeName=e,[r,YH(o,...t)]}function YH(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(o){const a=r.reduce((i,{useScope:s,scopeName:c})=>{const l=s(o)[`__scope${c}`];return{...i,...l}},{});return g.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return n.scopeName=t.scopeName,n}let Sd,pM,Cc,Cd,Uy,hM,mM,yM,gM,Hy;Sd="rovingFocusGroup.onEntryFocus",pM={bubbles:!1,cancelable:!0},Cc="RovingFocusGroup",[Cd,Uy,hM]=Nu(Cc),[mM,qr]=qH(Cc,[hM]),[yM,gM]=mM(Cc),Hy=g.forwardRef((e,t)=>h.jsx(Cd.Provider,{scope:e.__scopeRovingFocusGroup,children:h.jsx(Cd.Slot,{scope:e.__scopeRovingFocusGroup,children:h.jsx(KH,{...e,ref:t})})})),Hy.displayName=Cc;var KH=g.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:o=!1,dir:a,currentTabStopId:i,defaultCurrentTabStopId:s,onCurrentTabStopIdChange:c,onEntryFocus:l,preventScrollOnEntryFocus:u=!1,...d}=e,f=g.useRef(null),p=tt(t,f),y=Io(a),[m=null,v]=Jt({prop:i,defaultProp:s,onChange:c}),[b,x]=g.useState(!1),j=Ro(l),w=Uy(n),_=g.useRef(!1),[E,S]=g.useState(0);return g.useEffect(()=>{const C=f.current;if(C)return C.addEventListener(Sd,j),()=>C.removeEventListener(Sd,j)},[j]),h.jsx(yM,{scope:n,orientation:r,dir:y,loop:o,currentTabStopId:m,onItemFocus:g.useCallback(C=>v(C),[v]),onItemShiftTab:g.useCallback(()=>x(!0),[]),onFocusableItemAdd:g.useCallback(()=>S(C=>C+1),[]),onFocusableItemRemove:g.useCallback(()=>S(C=>C-1),[]),children:h.jsx(Oe.div,{tabIndex:b||E===0?-1:0,"data-orientation":r,...d,ref:p,style:{outline:"none",...e.style},onMouseDown:he(e.onMouseDown,()=>{_.current=!0}),onFocus:he(e.onFocus,C=>{const M=!_.current;if(C.target===C.currentTarget&&M&&!b){const P=new CustomEvent(Sd,pM);if(C.currentTarget.dispatchEvent(P),!P.defaultPrevented){const N=w().filter(k=>k.focusable),R=N.find(k=>k.active),A=N.find(k=>k.id===m),O=[R,A,...N].filter(Boolean).map(k=>k.ref.current);xM(O,u)}}_.current=!1}),onBlur:he(e.onBlur,()=>x(!1))})})}),vM="RovingFocusGroupItem",bM=g.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:o=!1,tabStopId:a,...i}=e,s=ht(),c=a||s,l=gM(vM,n),u=l.currentTabStopId===c,d=Uy(n),{onFocusableItemAdd:f,onFocusableItemRemove:p}=l;return g.useEffect(()=>{if(r)return f(),()=>p()},[r,f,p]),h.jsx(Cd.ItemSlot,{scope:n,id:c,focusable:r,active:o,children:h.jsx(Oe.span,{tabIndex:u?0:-1,"data-orientation":l.orientation,...i,ref:t,onMouseDown:he(e.onMouseDown,y=>{r?l.onItemFocus(c):y.preventDefault()}),onFocus:he(e.onFocus,()=>l.onItemFocus(c)),onKeyDown:he(e.onKeyDown,y=>{if(y.key==="Tab"&&y.shiftKey){l.onItemShiftTab();return}if(y.target!==y.currentTarget)return;const m=QH(y,l.orientation,l.dir);if(m!==void 0){if(y.metaKey||y.ctrlKey||y.altKey||y.shiftKey)return;y.preventDefault();let v=d().filter(b=>b.focusable).map(b=>b.ref.current);if(m==="last")v.reverse();else if(m==="prev"||m==="next"){m==="prev"&&v.reverse();const b=v.indexOf(y.currentTarget);v=l.loop?JH(v,b+1):v.slice(b+1)}setTimeout(()=>xM(v))}})})})});bM.displayName=vM;var XH={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function GH(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function QH(e,t,n){const r=GH(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return XH[r]}function xM(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function JH(e,t){return e.map((n,r)=>e[(t+r)%e.length])}let Od,wM,Wy,_M,jM,EM,Ei,Si,SM,CM,Uo,Ci,qy,Yy,ro,OM,Oi,Ky;Ks=Hy,Xs=bM,Od=["Enter"," "],wM=["ArrowDown","PageUp","Home"],Wy=["ArrowUp","PageDown","End"],_M=[...wM,...Wy],jM={ltr:[...Od,"ArrowRight"],rtl:[...Od,"ArrowLeft"]},EM={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Ei="Menu",[Si,SM,CM]=Nu(Ei),[Uo,Du]=Fn(Ei,[CM,Vo,qr]),Ci=Vo(),qy=qr(),[Yy,ro]=Uo(Ei),[OM,Oi]=Uo(Ei),Ky=e=>{const{__scopeMenu:t,open:n=!1,children:r,dir:o,onOpenChange:a,modal:i=!0}=e,s=Ci(t),[c,l]=g.useState(null),u=g.useRef(!1),d=Ro(a),f=Io(o);return g.useEffect(()=>{const p=()=>{u.current=!0,document.addEventListener("pointerdown",y,{capture:!0,once:!0}),document.addEventListener("pointermove",y,{capture:!0,once:!0})},y=()=>u.current=!1;return document.addEventListener("keydown",p,{capture:!0}),()=>{document.removeEventListener("keydown",p,{capture:!0}),document.removeEventListener("pointerdown",y,{capture:!0}),document.removeEventListener("pointermove",y,{capture:!0})}},[]),h.jsx(bc,{...s,children:h.jsx(Yy,{scope:t,open:n,onOpenChange:d,content:c,onContentChange:l,children:h.jsx(OM,{scope:t,onClose:g.useCallback(()=>d(!1),[d]),isUsingKeyboardRef:u,dir:f,modal:i,children:r})})})},Ky.displayName=Ei;var ZH="MenuAnchor",Xy=g.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,o=Ci(n);return h.jsx(xc,{...o,...r,ref:t})});Xy.displayName=ZH;var Gy="MenuPortal",[eW,MM]=Uo(Gy,{forceMount:void 0}),NM=e=>{const{__scopeMenu:t,forceMount:n,children:r,container:o}=e,a=ro(Gy,t);return h.jsx(eW,{scope:t,forceMount:n,children:h.jsx(Cn,{present:n||a.open,children:h.jsx(Cu,{asChild:!0,container:o,children:r})})})};NM.displayName=Gy;var Vn="MenuContent",[tW,Qy]=Uo(Vn),PM=g.forwardRef((e,t)=>{const n=MM(Vn,e.__scopeMenu),{forceMount:r=n.forceMount,...o}=e,a=ro(Vn,e.__scopeMenu),i=Oi(Vn,e.__scopeMenu);return h.jsx(Si.Provider,{scope:e.__scopeMenu,children:h.jsx(Cn,{present:r||a.open,children:h.jsx(Si.Slot,{scope:e.__scopeMenu,children:i.modal?h.jsx(nW,{...o,ref:t}):h.jsx(rW,{...o,ref:t})})})})}),nW=g.forwardRef((e,t)=>{const n=ro(Vn,e.__scopeMenu),r=g.useRef(null),o=tt(t,r);return g.useEffect(()=>{const a=r.current;if(a)return sd(a)},[]),h.jsx(Jy,{...e,ref:o,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:he(e.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),rW=g.forwardRef((e,t)=>{const n=ro(Vn,e.__scopeMenu);return h.jsx(Jy,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),Jy=g.forwardRef((e,t)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:o,onOpenAutoFocus:a,onCloseAutoFocus:i,disableOutsidePointerEvents:s,onEntryFocus:c,onEscapeKeyDown:l,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:f,onDismiss:p,disableOutsideScroll:y,...m}=e,v=ro(Vn,n),b=Oi(Vn,n),x=Ci(n),j=qy(n),w=SM(n),[_,E]=g.useState(null),S=g.useRef(null),C=tt(t,S,v.onContentChange),M=g.useRef(0),P=g.useRef(""),N=g.useRef(0),R=g.useRef(null),A=g.useRef("right"),O=g.useRef(0),k=y?mc:g.Fragment,T=y?{as:Hr,allowPinchZoom:!0}:void 0,I=D=>{var Z,q;const z=P.current+D,H=w().filter(W=>!W.disabled),F=document.activeElement,U=(Z=H.find(W=>W.ref.current===F))==null?void 0:Z.textValue,Y=H.map(W=>W.textValue),G=mW(Y,z,U),re=(q=H.find(W=>W.textValue===G))==null?void 0:q.ref.current;(function W(Q){P.current=Q,window.clearTimeout(M.current),Q!==""&&(M.current=window.setTimeout(()=>W(""),1e3))})(z),re&&setTimeout(()=>re.focus())};g.useEffect(()=>()=>window.clearTimeout(M.current),[]),Zu();const L=g.useCallback(D=>{var z,H;return A.current===((z=R.current)==null?void 0:z.side)&&gW(D,(H=R.current)==null?void 0:H.area)},[]);return h.jsx(tW,{scope:n,searchRef:P,onItemEnter:g.useCallback(D=>{L(D)&&D.preventDefault()},[L]),onItemLeave:g.useCallback(D=>{var z;L(D)||((z=S.current)==null||z.focus(),E(null))},[L]),onTriggerLeave:g.useCallback(D=>{L(D)&&D.preventDefault()},[L]),pointerGraceTimerRef:N,onPointerGraceIntentChange:g.useCallback(D=>{R.current=D},[]),children:h.jsx(k,{...T,children:h.jsx(hc,{asChild:!0,trapped:o,onMountAutoFocus:he(a,D=>{var z;D.preventDefault(),(z=S.current)==null||z.focus({preventScroll:!0})}),onUnmountAutoFocus:i,children:h.jsx(Su,{asChild:!0,disableOutsidePointerEvents:s,onEscapeKeyDown:l,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:f,onDismiss:p,children:h.jsx(Ks,{asChild:!0,...j,dir:b.dir,orientation:"vertical",loop:r,currentTabStopId:_,onCurrentTabStopIdChange:E,onEntryFocus:he(c,D=>{b.isUsingKeyboardRef.current||D.preventDefault()}),preventScrollOnEntryFocus:!0,children:h.jsx(gd,{role:"menu","aria-orientation":"vertical","data-state":KM(v.open),"data-radix-menu-content":"",dir:b.dir,...x,...m,ref:C,style:{outline:"none",...m.style},onKeyDown:he(m.onKeyDown,D=>{const z=D.target.closest("[data-radix-menu-content]")===D.currentTarget,H=D.ctrlKey||D.altKey||D.metaKey,F=D.key.length===1;z&&(D.key==="Tab"&&D.preventDefault(),!H&&F&&I(D.key));const U=S.current;if(D.target!==U||!_M.includes(D.key))return;D.preventDefault();const Y=w().filter(G=>!G.disabled).map(G=>G.ref.current);Wy.includes(D.key)&&Y.reverse(),pW(Y)}),onBlur:he(e.onBlur,D=>{D.currentTarget.contains(D.target)||(window.clearTimeout(M.current),P.current="")}),onPointerMove:he(e.onPointerMove,Mc(D=>{const z=D.target,H=O.current!==D.clientX;if(D.currentTarget.contains(z)&&H){const F=D.clientX>O.current?"right":"left";A.current=F,O.current=D.clientX}}))})})})})})})});PM.displayName=Vn;var oW="MenuGroup",Zy=g.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return h.jsx(Oe.div,{role:"group",...r,ref:t})});Zy.displayName=oW;var aW="MenuLabel",kM=g.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return h.jsx(Oe.div,{...r,ref:t})});kM.displayName=aW;var Md="MenuItem",AM="menu.itemSelect",Nd=g.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:r,...o}=e,a=g.useRef(null),i=Oi(Md,e.__scopeMenu),s=Qy(Md,e.__scopeMenu),c=tt(t,a),l=g.useRef(!1),u=()=>{const d=a.current;if(!n&&d){const f=new CustomEvent(AM,{bubbles:!0,cancelable:!0});d.addEventListener(AM,p=>r==null?void 0:r(p),{once:!0}),qxe(d,f),f.defaultPrevented?l.current=!1:i.onClose()}};return h.jsx(TM,{...o,ref:c,disabled:n,onClick:he(e.onClick,u),onPointerDown:d=>{var f;(f=e.onPointerDown)==null||f.call(e,d),l.current=!0},onPointerUp:he(e.onPointerUp,d=>{var f;l.current||((f=d.currentTarget)==null||f.click())}),onKeyDown:he(e.onKeyDown,d=>{const f=s.searchRef.current!=="";n||f&&d.key===" "||Od.includes(d.key)&&(d.currentTarget.click(),d.preventDefault())})})});Nd.displayName=Md;var TM=g.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:r=!1,textValue:o,...a}=e,i=Qy(Md,n),s=qy(n),c=g.useRef(null),l=tt(t,c),[u,d]=g.useState(!1),[f,p]=g.useState("");return g.useEffect(()=>{const y=c.current;y&&p((y.textContent??"").trim())},[a.children]),h.jsx(Si.ItemSlot,{scope:n,disabled:r,textValue:o??f,children:h.jsx(Xs,{asChild:!0,...s,focusable:!r,children:h.jsx(Oe.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...a,ref:l,onPointerMove:he(e.onPointerMove,Mc(y=>{r?i.onItemLeave(y):(i.onItemEnter(y),y.defaultPrevented||y.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:he(e.onPointerLeave,Mc(y=>i.onItemLeave(y))),onFocus:he(e.onFocus,()=>d(!0)),onBlur:he(e.onBlur,()=>d(!1))})})})}),iW="MenuCheckboxItem",RM=g.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:r,...o}=e;return h.jsx(BM,{scope:e.__scopeMenu,checked:n,children:h.jsx(Nd,{role:"menuitemcheckbox","aria-checked":Pd(n)?"mixed":n,...o,ref:t,"data-state":ng(n),onSelect:he(o.onSelect,()=>r==null?void 0:r(Pd(n)?!0:!n),{checkForDefaultPrevented:!1})})})});RM.displayName=iW;var IM="MenuRadioGroup",[sW,cW]=Uo(IM,{value:void 0,onValueChange:()=>{}}),DM=g.forwardRef((e,t)=>{const{value:n,onValueChange:r,...o}=e,a=Ro(r);return h.jsx(sW,{scope:e.__scopeMenu,value:n,onValueChange:a,children:h.jsx(Zy,{...o,ref:t})})});DM.displayName=IM;var LM="MenuRadioItem",FM=g.forwardRef((e,t)=>{const{value:n,...r}=e,o=cW(LM,e.__scopeMenu),a=n===o.value;return h.jsx(BM,{scope:e.__scopeMenu,checked:a,children:h.jsx(Nd,{role:"menuitemradio","aria-checked":a,...r,ref:t,"data-state":ng(a),onSelect:he(r.onSelect,()=>{var i;return(i=o.onValueChange)==null?void 0:i.call(o,n)},{checkForDefaultPrevented:!1})})})});FM.displayName=LM;var eg="MenuItemIndicator",[BM,lW]=Uo(eg,{checked:!1}),$M=g.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:r,...o}=e,a=lW(eg,n);return h.jsx(Cn,{present:r||Pd(a.checked)||a.checked===!0,children:h.jsx(Oe.span,{...o,ref:t,"data-state":ng(a.checked)})})});$M.displayName=eg;var uW="MenuSeparator",zM=g.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return h.jsx(Oe.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});zM.displayName=uW;var dW="MenuArrow",VM=g.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,o=Ci(n);return h.jsx(vd,{...o,...r,ref:t})});VM.displayName=dW;var tg="MenuSub",[fW,UM]=Uo(tg),HM=e=>{const{__scopeMenu:t,children:n,open:r=!1,onOpenChange:o}=e,a=ro(tg,t),i=Ci(t),[s,c]=g.useState(null),[l,u]=g.useState(null),d=Ro(o);return g.useEffect(()=>(a.open===!1&&d(!1),()=>d(!1)),[a.open,d]),h.jsx(bc,{...i,children:h.jsx(Yy,{scope:t,open:r,onOpenChange:d,content:l,onContentChange:u,children:h.jsx(fW,{scope:t,contentId:ht(),triggerId:ht(),trigger:s,onTriggerChange:c,children:n})})})};HM.displayName=tg;var Oc="MenuSubTrigger",WM=g.forwardRef((e,t)=>{const n=ro(Oc,e.__scopeMenu),r=Oi(Oc,e.__scopeMenu),o=UM(Oc,e.__scopeMenu),a=Qy(Oc,e.__scopeMenu),i=g.useRef(null),{pointerGraceTimerRef:s,onPointerGraceIntentChange:c}=a,l={__scopeMenu:e.__scopeMenu},u=g.useCallback(()=>{i.current&&window.clearTimeout(i.current),i.current=null},[]);return g.useEffect(()=>u,[u]),g.useEffect(()=>{const d=s.current;return()=>{window.clearTimeout(d),c(null)}},[s,c]),h.jsx(Xy,{asChild:!0,...l,children:h.jsx(TM,{id:o.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":o.contentId,"data-state":KM(n.open),...e,ref:a$(t,o.onTriggerChange),onClick:d=>{var f;(f=e.onClick)==null||f.call(e,d),!(e.disabled||d.defaultPrevented)&&(d.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:he(e.onPointerMove,Mc(d=>{a.onItemEnter(d),!d.defaultPrevented&&!e.disabled&&!n.open&&!i.current&&(a.onPointerGraceIntentChange(null),i.current=window.setTimeout(()=>{n.onOpenChange(!0),u()},100))})),onPointerLeave:he(e.onPointerLeave,Mc(d=>{var p,y;u();const f=(p=n.content)==null?void 0:p.getBoundingClientRect();if(f){const m=(y=n.content)==null?void 0:y.dataset.side,v=m==="right",b=v?-5:5,x=f[v?"left":"right"],j=f[v?"right":"left"];a.onPointerGraceIntentChange({area:[{x:d.clientX+b,y:d.clientY},{x,y:f.top},{x:j,y:f.top},{x:j,y:f.bottom},{x,y:f.bottom}],side:m}),window.clearTimeout(s.current),s.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(d),d.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:he(e.onKeyDown,d=>{var p;const f=a.searchRef.current!=="";e.disabled||f&&d.key===" "||jM[r.dir].includes(d.key)&&(n.onOpenChange(!0),(p=n.content)==null||p.focus(),d.preventDefault())})})})});WM.displayName=Oc;var qM="MenuSubContent",YM=g.forwardRef((e,t)=>{const n=MM(Vn,e.__scopeMenu),{forceMount:r=n.forceMount,...o}=e,a=ro(Vn,e.__scopeMenu),i=Oi(Vn,e.__scopeMenu),s=UM(qM,e.__scopeMenu),c=g.useRef(null),l=tt(t,c);return h.jsx(Si.Provider,{scope:e.__scopeMenu,children:h.jsx(Cn,{present:r||a.open,children:h.jsx(Si.Slot,{scope:e.__scopeMenu,children:h.jsx(Jy,{id:s.contentId,"aria-labelledby":s.triggerId,...o,ref:l,align:"start",side:i.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{var d;i.isUsingKeyboardRef.current&&((d=c.current)==null||d.focus()),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:he(e.onFocusOutside,u=>{u.target!==s.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:he(e.onEscapeKeyDown,u=>{i.onClose(),u.preventDefault()}),onKeyDown:he(e.onKeyDown,u=>{var p;const d=u.currentTarget.contains(u.target),f=EM[i.dir].includes(u.key);d&&f&&(a.onOpenChange(!1),(p=s.trigger)==null||p.focus(),u.preventDefault())})})})})})});YM.displayName=qM;function KM(e){return e?"open":"closed"}function Pd(e){return e==="indeterminate"}function ng(e){return Pd(e)?"indeterminate":e?"checked":"unchecked"}function pW(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function hW(e,t){return e.map((n,r)=>e[(t+r)%e.length])}function mW(e,t,n){const r=t.length>1&&Array.from(t).every(s=>s===t[0])?t[0]:t,o=n?e.indexOf(n):-1;let a=hW(e,Math.max(o,0));r.length===1&&(a=a.filter(s=>s!==n));const i=a.find(s=>s.toLowerCase().startsWith(r.toLowerCase()));return i!==n?i:void 0}function yW(e,t){const{x:n,y:r}=e;let o=!1;for(let a=0,i=t.length-1;a<t.length;i=a++){const s=t[a].x,c=t[a].y,l=t[i].x,u=t[i].y;c>r!=u>r&&n<(l-s)*(r-c)/(u-c)+s&&(o=!o)}return o}function gW(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return yW(n,t)}function Mc(e){return t=>t.pointerType==="mouse"?e(t):void 0}let kd,XM,vW,Yt,GM,rg,og;rm=Ky,Uh=Xy,nm=NM,Hh=PM,Wh=Zy,qh=kM,Yh=Nd,Kh=RM,Xh=DM,Gh=FM,Qh=$M,Jh=zM,Zh=VM,NE=HM,em=WM,tm=YM,kd="DropdownMenu",[XM,vW]=Fn(kd,[Du]),Yt=Du(),[GM,rg]=XM(kd),og=e=>{const{__scopeDropdownMenu:t,children:n,dir:r,open:o,defaultOpen:a,onOpenChange:i,modal:s=!0}=e,c=Yt(t),l=g.useRef(null),[u=!1,d]=Jt({prop:o,defaultProp:a,onChange:i});return h.jsx(GM,{scope:t,triggerId:ht(),triggerRef:l,contentId:ht(),open:u,onOpenChange:d,onOpenToggle:g.useCallback(()=>d(f=>!f),[d]),modal:s,children:h.jsx(rm,{...c,open:u,onOpenChange:d,dir:r,modal:s,children:n})})},og.displayName=kd;var QM="DropdownMenuTrigger",JM=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...o}=e,a=rg(QM,n),i=Yt(n);return h.jsx(Uh,{asChild:!0,...i,children:h.jsx(Oe.button,{type:"button",id:a.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...o,ref:a$(t,a.triggerRef),onPointerDown:he(e.onPointerDown,s=>{!r&&s.button===0&&s.ctrlKey===!1&&(a.onOpenToggle(),a.open||s.preventDefault())}),onKeyDown:he(e.onKeyDown,s=>{r||(["Enter"," "].includes(s.key)&&a.onOpenToggle(),s.key==="ArrowDown"&&a.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(s.key)&&s.preventDefault())})})})});JM.displayName=QM;var bW="DropdownMenuPortal",ZM=e=>{const{__scopeDropdownMenu:t,...n}=e,r=Yt(t);return h.jsx(nm,{...r,...n})};ZM.displayName=bW;var eN="DropdownMenuContent",tN=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=rg(eN,n),a=Yt(n),i=g.useRef(!1);return h.jsx(Hh,{id:o.contentId,"aria-labelledby":o.triggerId,...a,...r,ref:t,onCloseAutoFocus:he(e.onCloseAutoFocus,s=>{var c;i.current||((c=o.triggerRef.current)==null||c.focus()),i.current=!1,s.preventDefault()}),onInteractOutside:he(e.onInteractOutside,s=>{const c=s.detail.originalEvent,l=c.button===0&&c.ctrlKey===!0,u=c.button===2||l;(!o.modal||u)&&(i.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});tN.displayName=eN;var xW="DropdownMenuGroup",nN=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=Yt(n);return h.jsx(Wh,{...o,...r,ref:t})});nN.displayName=xW;var wW="DropdownMenuLabel",rN=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=Yt(n);return h.jsx(qh,{...o,...r,ref:t})});rN.displayName=wW;var _W="DropdownMenuItem",oN=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=Yt(n);return h.jsx(Yh,{...o,...r,ref:t})});oN.displayName=_W;var jW="DropdownMenuCheckboxItem",aN=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=Yt(n);return h.jsx(Kh,{...o,...r,ref:t})});aN.displayName=jW;var EW="DropdownMenuRadioGroup",iN=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=Yt(n);return h.jsx(Xh,{...o,...r,ref:t})});iN.displayName=EW;var SW="DropdownMenuRadioItem",sN=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=Yt(n);return h.jsx(Gh,{...o,...r,ref:t})});sN.displayName=SW;var CW="DropdownMenuItemIndicator",cN=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=Yt(n);return h.jsx(Qh,{...o,...r,ref:t})});cN.displayName=CW;var OW="DropdownMenuSeparator",lN=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=Yt(n);return h.jsx(Jh,{...o,...r,ref:t})});lN.displayName=OW;var MW="DropdownMenuArrow",NW=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=Yt(n);return h.jsx(Zh,{...o,...r,ref:t})});NW.displayName=MW;var PW=e=>{const{__scopeDropdownMenu:t,children:n,open:r,onOpenChange:o,defaultOpen:a}=e,i=Yt(t),[s=!1,c]=Jt({prop:r,defaultProp:a,onChange:o});return h.jsx(NE,{...i,open:s,onOpenChange:c,children:n})},kW="DropdownMenuSubTrigger",uN=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=Yt(n);return h.jsx(em,{...o,...r,ref:t})});uN.displayName=kW;var AW="DropdownMenuSubContent",dN=g.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=Yt(n);return h.jsx(tm,{...o,...r,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});dN.displayName=AW,TE=og,RE=JM,AE=ZM,im=tN,kE=nN,pm=rN,lm=oN,um=aN,g$=iN,fm=sN,dm=cN,hm=lN,v$=PW,sm=uN,cm=dN;const TW=TE,RW=RE,IW=kE,DW=g.forwardRef(({className:e,inset:t,children:n,...r},o)=>h.jsxs(sm,{ref:o,className:J("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t&&"pl-8",e),...r,children:[n,h.jsx(de,{name:"chevron-right",className:"ml-auto"})]}));DW.displayName=sm.displayName;const LW=g.forwardRef(({className:e,...t},n)=>h.jsx(cm,{ref:n,className:J("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));LW.displayName=cm.displayName;const fN=g.forwardRef(({className:e,sideOffset:t=4,...n},r)=>h.jsx(AE,{children:h.jsx(im,{ref:r,sideOffset:t,className:J("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));fN.displayName=im.displayName;const pN=g.forwardRef(({className:e,inset:t,...n},r)=>h.jsx(lm,{ref:r,className:J("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t&&"pl-8",e),...n}));pN.displayName=lm.displayName;const FW=g.forwardRef(({className:e,children:t,checked:n,...r},o)=>h.jsxs(um,{ref:o,className:J("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:n,...r,children:[h.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:h.jsx(dm,{children:h.jsx(de,{name:"check",className:"h-4 w-4"})})}),t]}));FW.displayName=um.displayName;const BW=g.forwardRef(({className:e,children:t,...n},r)=>h.jsxs(fm,{ref:r,className:J("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[h.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:h.jsx(dm,{children:h.jsx(de,{name:"circle",className:"h-4 w-4"})})}),t]}));BW.displayName=fm.displayName;const $W=g.forwardRef(({className:e,inset:t,...n},r)=>h.jsx(pm,{ref:r,className:J("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...n}));$W.displayName=pm.displayName;const zW=g.forwardRef(({className:e,...t},n)=>h.jsx(hm,{ref:n,className:J("-mx-1 my-1 h-px bg-muted",e),...t}));zW.displayName=hm.displayName;function VW(){const{t:e}=Ae("sidebar"),{isMobile:t}=jc();return h.jsx(bi,{children:h.jsx(eo,{children:h.jsxs(TW,{children:[h.jsx(RW,{asChild:!0,children:h.jsxs(to,{size:"lg",className:"data-[state=open]:bg-sidebar-accent data-[state=open]:text-sidebar-accent-foreground",children:[h.jsx("div",{children:h.jsx(de,{name:"settings",size:28,className:"pr-2"})}),h.jsx(de,{name:"chevrons-up-down",className:"ml-auto size-4"})]})}),h.jsx(fN,{className:"w-[--radix-dropdown-menu-trigger-width] min-w-56 rounded-lg",side:t?"bottom":"right",align:"end",sideOffset:4,children:h.jsx(IW,{children:h.jsxs(pN,{children:[h.jsx(de,{name:"sparkles"}),e("contact")]})})})]})})})}const UW=Ur("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function cn({className:e,variant:t,...n}){return h.jsx("div",{className:J(UW({variant:t}),e),...n})}function HW({applications:e,currentSession:t,setCurrentSession:n}){const{t:r}=Ae("sidebar"),o=cc(),a=On(fM),i=g.useCallback((l,u)=>{a.show({id:u}),l.preventDefault()},[a]),s=l=>{n(l),o(cr("application",{applicationId:l.id}))},c=l=>{switch(l.main_source_type){case"Thread":return h.jsx(cn,{className:"ml-1",color:"blue",children:r("application_types.chat")});default:return null}};return h.jsxs(Ec,{className:"group-data-[collapsible=icon]:hidden pt-0",children:[h.jsx(Ed,{children:h.jsx("div",{className:"text-sm",children:r("applications")})}),h.jsxs(bi,{children:[e==null?void 0:e.map(l=>h.jsx(eo,{className:"cursor-pointer",children:h.jsx(to,{asChild:!0,onClick:()=>s(l),children:h.jsxs("div",{className:"flex flex-row justify-between items-center !h-auto",children:[h.jsxs("div",{className:"flex gap-2",children:[(t==null?void 0:t.id)===l.id?h.jsx(de,{size:16,color:"green",name:"check"}):h.jsx(de,{size:16,name:"chevron-right"}),h.jsxs("span",{children:[l.name,c(l)]})]}),h.jsx(de,{onClick:u=>i(u,l.id),size:16,name:"trash-2"})]})})},l.id)),e?h.jsx(eo,{children:h.jsxs(to,{className:"text-sidebar-foreground/70",children:[h.jsx(de,{name:"ellipsis",className:"text-sidebar-foreground/70"}),h.jsx("span",{children:r("more_session")})]})}):null]})]})}const WW={navMain:[{title:"playground.title",icon:h.jsx(de,{name:"square-terminal"}),isActive:!0,items:[{title:"playground.drag_and_drop"},{title:"playground.node_connections"},{title:"playground.delete_nodes"}]},{title:"model.title",url:"#",icon:h.jsx(de,{name:"bot"}),items:[{title:"model.llm"},{title:"model.embedding"}]},{title:"tutorial.title",icon:h.jsx(de,{name:"book-open"}),items:[{title:"tutorial.get_started"},{title:"tutorial.chat_with_llm"},{title:"tutorial.ai_structured_output"},{title:"tutorial.tool_calling"},{title:"tutorial.few_shot_example"},{title:"tutorial.vector_database"}]},{title:"application.title",icon:h.jsx(de,{name:"settings-2"}),items:[{title:"application.changelog"}]}]};function qW({sessions:e,applications:t,currentSession:n,setCurrentSession:r,...o}){return h.jsxs(Ly,{collapsible:"icon",...o,children:[h.jsx("div",{className:"h-1"}),h.jsxs(By,{children:[h.jsx(HH,{sessions:e||[],currentSession:n,setCurrentSession:r}),h.jsx(HW,{applications:t||[],currentSession:n,setCurrentSession:r}),h.jsx(SH,{items:WW.navMain})]}),h.jsx(LO,{children:h.jsx(VW,{})}),h.jsx(DO,{})]})}function YW(){const{t:e}=Ae("common"),t=Tz(),n=cc(),r=Gr(),o=Mu(d=>d.setTheme),a=Mu(d=>d.theme),i=pt(d=>d.currentSession),s=pt(d=>d.sessions),c=pt(d=>d.applications),l=pt(d=>d.setCurrentSession);g.useEffect(()=>{i!=null&&i.id&&(r.pathname.includes(cr("whiteboard"))?t.sessionId?t.sessionId&&t.sessionId!==(i==null?void 0:i.id)&&l(t.sessionId):n(cr("whiteboard",{sessionId:i==null?void 0:i.id})):r.pathname.includes(cr("application"))&&(t.applicationId?t.applicationId&&t.applicationId!==(i==null?void 0:i.id)&&l(t.applicationId):n(cr("application",{applicationId:i==null?void 0:i.id}))))},[i==null?void 0:i.id,r.pathname,n,t.applicationId,t.sessionId,l]),g.useEffect(()=>{l(t.sessionId||t.applicationId).then(d=>{d.type===rE.StandaloneApp&&window.location.pathname.includes(cr("whiteboard").replace("/",""))?n(cr("application",{applicationId:d.id})):d.type===rE.Whiteboard&&window.location.pathname.includes(cr("application").replace("/",""))&&n(cr("whiteboard",{sessionId:d.id}))})},[n,t.applicationId,t.sessionId,l]);const u=g.useCallback(()=>{o(a==="dark"?"light":"dark")},[a,o]);return h.jsxs(Dy,{defaultOpen:!1,children:[h.jsx(qW,{sessions:s,applications:c,currentSession:i,setCurrentSession:l}),h.jsxs(Fy,{className:"max-h-screen overflow-hidden",children:[h.jsxs("header",{className:"flex h-14 shrink-0 items-center gap-2 transition-[width,height] ease-linear justify-between",children:[h.jsxs("div",{className:"flex items-center gap-2 px-4",children:[h.jsx(IO,{}),h.jsx(Ge,{children:e("whiteboard")})]}),h.jsxs("div",{className:"flex items-center gap-2 px-4",children:[h.jsx(ut,{onClick:u,variant:"link",children:h.jsx(de,{size:18,name:a==="dark"?"moon":"sun"})}),h.jsx("a",{referrerPolicy:"no-referrer",target:"_blank",href:"https://github.com/zrg-team/NoLLMChat",children:h.jsx(de,{size:18,name:"github"})})]})]}),h.jsx(pc,{className:"shrink-0"}),h.jsx("div",{className:"flex flex-1 flex-col p-0 m-0 overflow-y-auto",children:h.jsx(Gz,{})})]})]})}var ag="Avatar",[KW,Ewe]=Fn(ag),[XW,hN]=KW(ag),mN=g.forwardRef((e,t)=>{const{__scopeAvatar:n,...r}=e,[o,a]=g.useState("idle");return h.jsx(XW,{scope:n,imageLoadingStatus:o,onImageLoadingStatusChange:a,children:h.jsx(Oe.span,{...r,ref:t})})});mN.displayName=ag;var yN="AvatarImage",gN=g.forwardRef((e,t)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:o=()=>{},...a}=e,i=hN(yN,n),s=GW(r,a.referrerPolicy),c=Ro(l=>{o(l),i.onImageLoadingStatusChange(l)});return gn(()=>{s!=="idle"&&c(s)},[s,c]),s==="loaded"?h.jsx(Oe.img,{...a,ref:t,src:r}):null});gN.displayName=yN;var vN="AvatarFallback",bN=g.forwardRef((e,t)=>{const{__scopeAvatar:n,delayMs:r,...o}=e,a=hN(vN,n),[i,s]=g.useState(r===void 0);return g.useEffect(()=>{if(r!==void 0){const c=window.setTimeout(()=>s(!0),r);return()=>window.clearTimeout(c)}},[r]),i&&a.imageLoadingStatus!=="loaded"?h.jsx(Oe.span,{...o,ref:t}):null});bN.displayName=vN;function GW(e,t){const[n,r]=g.useState("idle");return gn(()=>{if(!e){r("error");return}let o=!0;const a=new window.Image,i=s=>()=>{o&&r(s)};return r("loading"),a.onload=i("loaded"),a.onerror=i("error"),a.src=e,t&&(a.referrerPolicy=t),()=>{o=!1}},[e,t]),n}var xN=mN,wN=gN,_N=bN;const jN=g.forwardRef(({className:e,...t},n)=>h.jsx(xN,{ref:n,className:J("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));jN.displayName=xN.displayName;const EN=g.forwardRef(({className:e,...t},n)=>h.jsx(wN,{ref:n,className:J("aspect-square h-full w-full",e),...t}));EN.displayName=wN.displayName;const SN=g.forwardRef(({className:e,...t},n)=>h.jsx(_N,{ref:n,className:J("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));SN.displayName=_N.displayName;function CN(){return h.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",className:"text-foreground",children:[h.jsx("circle",{cx:"4",cy:"12",r:"2",fill:"currentColor",children:h.jsx("animate",{id:"spinner_qFRN",begin:"0;spinner_OcgL.end+0.25s",attributeName:"cy",calcMode:"spline",dur:"0.6s",values:"12;6;12",keySplines:".33,.66,.66,1;.33,0,.66,.33"})}),h.jsx("circle",{cx:"12",cy:"12",r:"2",fill:"currentColor",children:h.jsx("animate",{begin:"spinner_qFRN.begin+0.1s",attributeName:"cy",calcMode:"spline",dur:"0.6s",values:"12;6;12",keySplines:".33,.66,.66,1;.33,0,.66,.33"})}),h.jsx("circle",{cx:"20",cy:"12",r:"2",fill:"currentColor",children:h.jsx("animate",{id:"spinner_OcgL",begin:"spinner_qFRN.begin+0.2s",attributeName:"cy",calcMode:"spline",dur:"0.6s",values:"12;6;12",keySplines:".33,.66,.66,1;.33,0,.66,.33"})})]})}const QW=Ur("flex gap-2 max-w-[60%] items-end relative group",{variants:{variant:{received:"self-start",sent:"self-end flex-row-reverse"},layout:{default:"",ai:"max-w-full w-full items-center"}},defaultVariants:{variant:"received",layout:"default"}}),ON=g.forwardRef(({className:e,variant:t,layout:n,children:r,...o},a)=>h.jsx("div",{className:J(QW({variant:t,layout:n,className:e}),"relative group"),ref:a,...o,children:g.Children.map(r,i=>g.isValidElement(i)&&typeof i.type!="string"?g.cloneElement(i,{variant:t,layout:n}):i)}));ON.displayName="ChatBubble";const JW=({src:e,fallback:t,className:n})=>h.jsxs(jN,{className:n,children:[h.jsx(EN,{src:e,alt:"Avatar"}),h.jsx(SN,{children:t})]}),ZW=Ur("p-4",{variants:{variant:{received:"bg-secondary text-secondary-foreground rounded-r-lg rounded-tl-lg",sent:"bg-primary text-primary-foreground rounded-l-lg rounded-tr-lg"},layout:{default:"",ai:"border-t w-full rounded-none bg-transparent"}},defaultVariants:{variant:"received",layout:"default"}}),MN=g.forwardRef(({className:e,variant:t,layout:n,isLoading:r=!1,children:o,...a},i)=>h.jsx("div",{className:J(ZW({variant:t,layout:n,className:e}),"break-words max-w-full whitespace-pre-wrap"),ref:i,...a,children:r?h.jsx("div",{className:"flex items-center space-x-2",children:h.jsx(CN,{})}):o}));MN.displayName="ChatBubbleMessage";const eq=({icon:e,onClick:t,className:n,variant:r="ghost",size:o="icon",...a})=>h.jsx(ut,{variant:r,size:o,className:n,onClick:t,...a,children:e}),tq=g.forwardRef(({variant:e,className:t,children:n,...r},o)=>h.jsx("div",{ref:o,className:J("absolute top-1/2 -translate-y-1/2 flex opacity-0 group-hover:opacity-100 transition-opacity duration-200",e==="sent"?"-left-1 -translate-x-full flex-row-reverse":"-right-1 translate-x-full",t),...r,children:n}));tq.displayName="ChatBubbleActionWrapper";const NN=g.forwardRef(({className:e,children:t,...n},r)=>h.jsx("div",{className:J("flex flex-col w-full h-full p-4 gap-6 overflow-y-auto",e),ref:r,...n,children:t}));NN.displayName="ChatMessageList";var PN="vercel.ai.error",nq=Symbol.for(PN),kN,rq=class _$ extends Error{constructor({name:t,message:n,cause:r}){super(n),this[kN]=!0,this.name=t,this.cause=r}static isInstance(t){return _$.hasMarker(t,PN)}static hasMarker(t,n){const r=Symbol.for(n);return t!=null&&typeof t=="object"&&r in t&&typeof t[r]=="boolean"&&t[r]===!0}};kN=nq;var Mi=rq;function AN(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}var TN="AI_InvalidArgumentError",RN=`vercel.ai.error.${TN}`,oq=Symbol.for(RN),IN,aq=class extends Mi{constructor({message:e,cause:t,argument:n}){super({name:TN,message:e,cause:t}),this[IN]=!0,this.argument=n}static isInstance(e){return Mi.hasMarker(e,RN)}};IN=oq;var DN="AI_JSONParseError",LN=`vercel.ai.error.${DN}`,iq=Symbol.for(LN),FN,BN=class extends Mi{constructor({text:e,cause:t}){super({name:DN,message:`JSON parsing failed: Text: ${e}.
Error message: ${AN(t)}`,cause:t}),this[FN]=!0,this.text=e}static isInstance(e){return Mi.hasMarker(e,LN)}};FN=iq;var $N="AI_TypeValidationError",zN=`vercel.ai.error.${$N}`,sq=Symbol.for(zN),VN,cq=class oS extends Mi{constructor({value:t,cause:n}){super({name:$N,message:`Type validation failed: Value: ${JSON.stringify(t)}.
Error message: ${AN(n)}`,cause:n}),this[VN]=!0,this.value=t}static isInstance(t){return Mi.hasMarker(t,zN)}static wrap({value:t,cause:n}){return oS.isInstance(n)&&n.value===t?n:new oS({value:t,cause:n})}};VN=sq;var UN=cq;let lq=(e,t=21)=>(n=t)=>{let r="",o=n;for(;o--;)r+=e[Math.random()*e.length|0];return r};var ba={exports:{}},HN;function uq(){if(HN)return ba.exports;HN=1;const e=typeof Th<"u",t=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*:/,n=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/;function r(s,c,l){l==null&&c!==null&&typeof c=="object"&&(l=c,c=void 0),e&&Th.isBuffer(s)&&(s=s.toString()),s&&s.charCodeAt(0)===65279&&(s=s.slice(1));const u=JSON.parse(s,c);if(u===null||typeof u!="object")return u;const d=l&&l.protoAction||"error",f=l&&l.constructorAction||"error";if(d==="ignore"&&f==="ignore")return u;if(d!=="ignore"&&f!=="ignore"){if(t.test(s)===!1&&n.test(s)===!1)return u}else if(d!=="ignore"&&f==="ignore"){if(t.test(s)===!1)return u}else if(n.test(s)===!1)return u;return o(u,{protoAction:d,constructorAction:f,safe:l&&l.safe})}function o(s,{protoAction:c="error",constructorAction:l="error",safe:u}={}){let d=[s];for(;d.length;){const f=d;d=[];for(const p of f){if(c!=="ignore"&&Object.prototype.hasOwnProperty.call(p,"__proto__")){if(u===!0)return null;if(c==="error")throw new SyntaxError("Object contains forbidden prototype property");delete p.__proto__}if(l!=="ignore"&&Object.prototype.hasOwnProperty.call(p,"constructor")&&Object.prototype.hasOwnProperty.call(p.constructor,"prototype")){if(u===!0)return null;if(l==="error")throw new SyntaxError("Object contains forbidden prototype property");delete p.constructor}for(const y in p){const m=p[y];m&&typeof m=="object"&&d.push(m)}}}return s}function a(s,c,l){const u=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return r(s,c,l)}finally{Error.stackTraceLimit=u}}function i(s,c){const l=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return r(s,c,{safe:!0})}catch{return null}finally{Error.stackTraceLimit=l}}return ba.exports=a,ba.exports.default=a,ba.exports.parse=a,ba.exports.safeParse=i,ba.exports.scan=o,ba.exports}var dq=uq();const fq=Xe(dq);var pq=({prefix:e,size:t=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{const o=lq(n,t);if(e==null)return o;if(n.includes(r))throw new aq({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return a=>`${e}${r}${o(a)}`},WN=pq(),ig=Symbol.for("vercel.ai.validator");function hq(e){return{[ig]:!0,validate:e}}function mq(e){return typeof e=="object"&&e!==null&&ig in e&&e[ig]===!0&&"validate"in e}function yq(e){return mq(e)?e:gq(e)}function gq(e){return hq(t=>{const n=e.safeParse(t);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}})}function vq({value:e,schema:t}){const n=yq(t);try{if(n.validate==null)return{success:!0,value:e};const r=n.validate(e);return r.success?r:{success:!1,error:UN.wrap({value:e,cause:r.error})}}catch(r){return{success:!1,error:UN.wrap({value:e,cause:r})}}}function qN({text:e,schema:t}){try{const n=fq.parse(e);return t==null?{success:!0,value:n}:vq({value:n,schema:t})}catch(n){return{success:!1,error:BN.isInstance(n)?n:new BN({text:e,cause:n})}}}var Ad={code:"0",name:"text",parse:e=>{if(typeof e!="string")throw new Error('"text" parts expect a string value.');return{type:"text",value:e}}},Td={code:"3",name:"error",parse:e=>{if(typeof e!="string")throw new Error('"error" parts expect a string value.');return{type:"error",value:e}}},Rd={code:"4",name:"assistant_message",parse:e=>{if(e==null||typeof e!="object"||!("id"in e)||!("role"in e)||!("content"in e)||typeof e.id!="string"||typeof e.role!="string"||e.role!=="assistant"||!Array.isArray(e.content)||!e.content.every(t=>t!=null&&typeof t=="object"&&"type"in t&&t.type==="text"&&"text"in t&&t.text!=null&&typeof t.text=="object"&&"value"in t.text&&typeof t.text.value=="string"))throw new Error('"assistant_message" parts expect an object with an "id", "role", and "content" property.');return{type:"assistant_message",value:e}}},Id={code:"5",name:"assistant_control_data",parse:e=>{if(e==null||typeof e!="object"||!("threadId"in e)||!("messageId"in e)||typeof e.threadId!="string"||typeof e.messageId!="string")throw new Error('"assistant_control_data" parts expect an object with a "threadId" and "messageId" property.');return{type:"assistant_control_data",value:{threadId:e.threadId,messageId:e.messageId}}}},Dd={code:"6",name:"data_message",parse:e=>{if(e==null||typeof e!="object"||!("role"in e)||!("data"in e)||typeof e.role!="string"||e.role!=="data")throw new Error('"data_message" parts expect an object with a "role" and "data" property.');return{type:"data_message",value:e}}},bq=[Ad,Td,Rd,Id,Dd];Ad.code+"",Td.code+"",Rd.code+"",Id.code+"",Dd.code+"",Ad.name+"",Ad.code,Td.name+"",Td.code,Rd.name+"",Rd.code,Id.name+"",Id.code,Dd.name+"",Dd.code,bq.map(e=>e.code);function xq(e){const t=["ROOT"];let n=-1,r=null;function o(c,l,u){switch(c){case'"':{n=l,t.pop(),t.push(u),t.push("INSIDE_STRING");break}case"f":case"t":case"n":{n=l,r=l,t.pop(),t.push(u),t.push("INSIDE_LITERAL");break}case"-":{t.pop(),t.push(u),t.push("INSIDE_NUMBER");break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{n=l,t.pop(),t.push(u),t.push("INSIDE_NUMBER");break}case"{":{n=l,t.pop(),t.push(u),t.push("INSIDE_OBJECT_START");break}case"[":{n=l,t.pop(),t.push(u),t.push("INSIDE_ARRAY_START");break}}}function a(c,l){switch(c){case",":{t.pop(),t.push("INSIDE_OBJECT_AFTER_COMMA");break}case"}":{n=l,t.pop();break}}}function i(c,l){switch(c){case",":{t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{n=l,t.pop();break}}}for(let c=0;c<e.length;c++){const l=e[c];switch(t[t.length-1]){case"ROOT":o(l,c,"FINISH");break;case"INSIDE_OBJECT_START":{switch(l){case'"':{t.pop(),t.push("INSIDE_OBJECT_KEY");break}case"}":{n=c,t.pop();break}}break}case"INSIDE_OBJECT_AFTER_COMMA":{switch(l){case'"':{t.pop(),t.push("INSIDE_OBJECT_KEY");break}}break}case"INSIDE_OBJECT_KEY":{switch(l){case'"':{t.pop(),t.push("INSIDE_OBJECT_AFTER_KEY");break}}break}case"INSIDE_OBJECT_AFTER_KEY":{switch(l){case":":{t.pop(),t.push("INSIDE_OBJECT_BEFORE_VALUE");break}}break}case"INSIDE_OBJECT_BEFORE_VALUE":{o(l,c,"INSIDE_OBJECT_AFTER_VALUE");break}case"INSIDE_OBJECT_AFTER_VALUE":{a(l,c);break}case"INSIDE_STRING":{switch(l){case'"':{t.pop(),n=c;break}case"\\":{t.push("INSIDE_STRING_ESCAPE");break}default:n=c}break}case"INSIDE_ARRAY_START":{switch(l){case"]":{n=c,t.pop();break}default:{n=c,o(l,c,"INSIDE_ARRAY_AFTER_VALUE");break}}break}case"INSIDE_ARRAY_AFTER_VALUE":{switch(l){case",":{t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{n=c,t.pop();break}default:{n=c;break}}break}case"INSIDE_ARRAY_AFTER_COMMA":{o(l,c,"INSIDE_ARRAY_AFTER_VALUE");break}case"INSIDE_STRING_ESCAPE":{t.pop(),n=c;break}case"INSIDE_NUMBER":{switch(l){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{n=c;break}case"e":case"E":case"-":case".":break;case",":{t.pop(),t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&i(l,c),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&a(l,c);break}case"}":{t.pop(),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&a(l,c);break}case"]":{t.pop(),t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&i(l,c);break}default:{t.pop();break}}break}case"INSIDE_LITERAL":{const u=e.substring(r,c+1);!"false".startsWith(u)&&!"true".startsWith(u)&&!"null".startsWith(u)?(t.pop(),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"?a(l,c):t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&i(l,c)):n=c;break}}}let s=e.slice(0,n+1);for(let c=t.length-1;c>=0;c--)switch(t[c]){case"INSIDE_STRING":{s+='"';break}case"INSIDE_OBJECT_KEY":case"INSIDE_OBJECT_AFTER_KEY":case"INSIDE_OBJECT_AFTER_COMMA":case"INSIDE_OBJECT_START":case"INSIDE_OBJECT_BEFORE_VALUE":case"INSIDE_OBJECT_AFTER_VALUE":{s+="}";break}case"INSIDE_ARRAY_START":case"INSIDE_ARRAY_AFTER_COMMA":case"INSIDE_ARRAY_AFTER_VALUE":{s+="]";break}case"INSIDE_LITERAL":{const l=e.substring(r,e.length);"true".startsWith(l)?s+="true".slice(l.length):"false".startsWith(l)?s+="false".slice(l.length):"null".startsWith(l)&&(s+="null".slice(l.length))}}return s}function wq(e){if(e===void 0)return{value:void 0,state:"undefined-input"};let t=qN({text:e});return t.success?{value:t.value,state:"successful-parse"}:(t=qN({text:xq(e)}),t.success?{value:t.value,state:"repaired-parse"}:{value:void 0,state:"failed-parse"})}var Nc={code:"0",name:"text",parse:e=>{if(typeof e!="string")throw new Error('"text" parts expect a string value.');return{type:"text",value:e}}},Pc={code:"2",name:"data",parse:e=>{if(!Array.isArray(e))throw new Error('"data" parts expect an array value.');return{type:"data",value:e}}},kc={code:"3",name:"error",parse:e=>{if(typeof e!="string")throw new Error('"error" parts expect a string value.');return{type:"error",value:e}}},Ac={code:"8",name:"message_annotations",parse:e=>{if(!Array.isArray(e))throw new Error('"message_annotations" parts expect an array value.');return{type:"message_annotations",value:e}}},Tc={code:"9",name:"tool_call",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("toolName"in e)||typeof e.toolName!="string"||!("args"in e)||typeof e.args!="object")throw new Error('"tool_call" parts expect an object with a "toolCallId", "toolName", and "args" property.');return{type:"tool_call",value:e}}},Rc={code:"a",name:"tool_result",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("result"in e))throw new Error('"tool_result" parts expect an object with a "toolCallId" and a "result" property.');return{type:"tool_result",value:e}}},Ic={code:"b",name:"tool_call_streaming_start",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("toolName"in e)||typeof e.toolName!="string")throw new Error('"tool_call_streaming_start" parts expect an object with a "toolCallId" and "toolName" property.');return{type:"tool_call_streaming_start",value:e}}},Dc={code:"c",name:"tool_call_delta",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("argsTextDelta"in e)||typeof e.argsTextDelta!="string")throw new Error('"tool_call_delta" parts expect an object with a "toolCallId" and "argsTextDelta" property.');return{type:"tool_call_delta",value:e}}},Lc={code:"d",name:"finish_message",parse:e=>{if(e==null||typeof e!="object"||!("finishReason"in e)||typeof e.finishReason!="string")throw new Error('"finish_message" parts expect an object with a "finishReason" property.');const t={finishReason:e.finishReason};return"usage"in e&&e.usage!=null&&typeof e.usage=="object"&&"promptTokens"in e.usage&&"completionTokens"in e.usage&&(t.usage={promptTokens:typeof e.usage.promptTokens=="number"?e.usage.promptTokens:Number.NaN,completionTokens:typeof e.usage.completionTokens=="number"?e.usage.completionTokens:Number.NaN}),{type:"finish_message",value:t}}},Fc={code:"e",name:"finish_step",parse:e=>{if(e==null||typeof e!="object"||!("finishReason"in e)||typeof e.finishReason!="string")throw new Error('"finish_step" parts expect an object with a "finishReason" property.');const t={finishReason:e.finishReason,isContinued:!1};return"usage"in e&&e.usage!=null&&typeof e.usage=="object"&&"promptTokens"in e.usage&&"completionTokens"in e.usage&&(t.usage={promptTokens:typeof e.usage.promptTokens=="number"?e.usage.promptTokens:Number.NaN,completionTokens:typeof e.usage.completionTokens=="number"?e.usage.completionTokens:Number.NaN}),"isContinued"in e&&typeof e.isContinued=="boolean"&&(t.isContinued=e.isContinued),{type:"finish_step",value:t}}},_q=[Nc,Pc,kc,Ac,Tc,Rc,Ic,Dc,Lc,Fc],jq={[Nc.code]:Nc,[Pc.code]:Pc,[kc.code]:kc,[Ac.code]:Ac,[Tc.code]:Tc,[Rc.code]:Rc,[Ic.code]:Ic,[Dc.code]:Dc,[Lc.code]:Lc,[Fc.code]:Fc};Nc.name+"",Nc.code,Pc.name+"",Pc.code,kc.name+"",kc.code,Ac.name+"",Ac.code,Tc.name+"",Tc.code,Rc.name+"",Rc.code,Ic.name+"",Ic.code,Dc.name+"",Dc.code,Lc.name+"",Lc.code,Fc.name+"",Fc.code;var Eq=_q.map(e=>e.code),Sq=e=>{const t=e.indexOf(":");if(t===-1)throw new Error("Failed to parse stream string. No separator found.");const n=e.slice(0,t);if(!Eq.includes(n))throw new Error(`Failed to parse stream string. Invalid code ${n}.`);const r=n,o=e.slice(t+1),a=JSON.parse(o);return jq[r].parse(a)},Cq=10;function Oq(e,t){const n=new Uint8Array(t);let r=0;for(const o of e)n.set(o,r),r+=o.length;return e.length=0,n}async function Mq({stream:e,onTextPart:t,onDataPart:n,onErrorPart:r,onToolCallStreamingStartPart:o,onToolCallDeltaPart:a,onToolCallPart:i,onToolResultPart:s,onMessageAnnotationsPart:c,onFinishMessagePart:l,onFinishStepPart:u}){const d=e.getReader(),f=new TextDecoder,p=[];let y=0;for(;;){const{value:m}=await d.read();if(m&&(p.push(m),y+=m.length,m[m.length-1]!==Cq))continue;if(p.length===0)break;const v=Oq(p,y);y=0;const b=f.decode(v,{stream:!0}).split(`
`).filter(x=>x!=="").map(Sq);for(const{type:x,value:j}of b)switch(x){case"text":await(t==null?void 0:t(j));break;case"data":await(n==null?void 0:n(j));break;case"error":await(r==null?void 0:r(j));break;case"message_annotations":await(c==null?void 0:c(j));break;case"tool_call_streaming_start":await(o==null?void 0:o(j));break;case"tool_call_delta":await(a==null?void 0:a(j));break;case"tool_call":await(i==null?void 0:i(j));break;case"tool_result":await(s==null?void 0:s(j));break;case"finish_message":await(l==null?void 0:l(j));break;case"finish_step":await(u==null?void 0:u(j));break;default:{const w=x;throw new Error(`Unknown stream part type: ${w}`)}}}}function Nq({promptTokens:e,completionTokens:t}){return{promptTokens:e,completionTokens:t,totalTokens:e+t}}async function Pq({stream:e,update:t,onToolCall:n,onFinish:r,generateId:o=WN,getCurrentDate:a=()=>new Date}){const i=a();let s,c=!0;const l=[],u=[];let d;const f={};let p={completionTokens:NaN,promptTokens:NaN,totalTokens:NaN},y="unknown";function m(){const b=[...u];if(s==null){t(l,b);return}d!=null&&d.length&&(s.annotations=d);const x={...JSON.parse(JSON.stringify(s)),revisionId:o()};t([...l,x],b)}function v(){return(c||s==null)&&(s!=null&&l.push(s),c=!1,s={id:o(),role:"assistant",content:"",createdAt:i}),s}await Mq({stream:e,onTextPart(b){const x=v();s={...x,content:x.content+b},m()},onToolCallStreamingStartPart(b){const x=v();x.toolInvocations==null&&(x.toolInvocations=[]),f[b.toolCallId]={text:"",toolName:b.toolName,index:x.toolInvocations.length},x.toolInvocations.push({state:"partial-call",toolCallId:b.toolCallId,toolName:b.toolName,args:void 0}),m()},onToolCallDeltaPart(b){const x=v(),j=f[b.toolCallId];j.text+=b.argsTextDelta;const{value:w}=wq(j.text);x.toolInvocations[j.index]={state:"partial-call",toolCallId:b.toolCallId,toolName:j.toolName,args:w},m()},async onToolCallPart(b){const x=v();if(f[b.toolCallId]!=null?x.toolInvocations[f[b.toolCallId].index]={state:"call",...b}:(x.toolInvocations==null&&(x.toolInvocations=[]),x.toolInvocations.push({state:"call",...b})),n){const j=await n({toolCall:b});j!=null&&(x.toolInvocations[x.toolInvocations.length-1]={state:"result",...b,result:j})}m()},onToolResultPart(b){const x=v().toolInvocations;if(x==null)throw new Error("tool_result must be preceded by a tool_call");const j=x.findIndex(w=>w.toolCallId===b.toolCallId);if(j===-1)throw new Error("tool_result must be preceded by a tool_call with the same toolCallId");x[j]={...x[j],state:"result",...b},m()},onDataPart(b){u.push(...b),m()},onMessageAnnotationsPart(b){d==null?d=[...b]:d.push(...b),m()},onFinishStepPart(b){c=!b.isContinued},onFinishMessagePart(b){y=b.finishReason,b.usage!=null&&(p=Nq(b.usage))},onErrorPart(b){throw new Error(b)}}),r==null||r({message:s,finishReason:y,usage:p})}async function kq({stream:e,onTextPart:t}){const n=e.pipeThrough(new TextDecoderStream).getReader();for(;;){const{done:r,value:o}=await n.read();if(r)break;await t(o)}}var Aq=()=>fetch;async function Tq({api:e,body:t,streamProtocol:n="data",credentials:r,headers:o,abortController:a,restoreMessagesOnFailure:i,onResponse:s,onUpdate:c,onFinish:l,onToolCall:u,generateId:d,fetch:f=Aq()}){var p,y;const m=await f(e,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json",...o},signal:(p=a==null?void 0:a())==null?void 0:p.signal,credentials:r}).catch(v=>{throw i(),v});if(s)try{await s(m)}catch(v){throw v}if(!m.ok)throw i(),new Error((y=await m.text())!=null?y:"Failed to fetch the chat response.");if(!m.body)throw new Error("The response body is empty.");switch(n){case"text":{const v={id:d(),createdAt:new Date,role:"assistant",content:""};await kq({stream:m.body,onTextPart:b=>{v.content+=b,c([{...v}],[])}}),l==null||l(v,{usage:{completionTokens:NaN,promptTokens:NaN,totalTokens:NaN},finishReason:"unknown"});return}case"data":{await Pq({stream:m.body,update:c,onToolCall:u,onFinish({message:v,finishReason:b,usage:x}){l&&v!=null&&l(v,{usage:x,finishReason:b})},generateId:d});return}default:{const v=n;throw new Error(`Unknown stream protocol: ${v}`)}}}var YN={exports:{}},sg={},KN;function Rq(){if(KN)return sg;KN=1;var e=i$();function t(d,f){return d===f&&(d!==0||1/d===1/f)||d!==d&&f!==f}var n=typeof Object.is=="function"?Object.is:t,r=e.useState,o=e.useEffect,a=e.useLayoutEffect,i=e.useDebugValue;function s(d,f){var p=f(),y=r({inst:{value:p,getSnapshot:f}}),m=y[0].inst,v=y[1];return a(function(){m.value=p,m.getSnapshot=f,c(m)&&v({inst:m})},[d,p,f]),o(function(){return c(m)&&v({inst:m}),d(function(){c(m)&&v({inst:m})})},[d]),i(p),p}function c(d){var f=d.getSnapshot;d=d.value;try{var p=f();return!n(d,p)}catch{return!0}}function l(d,f){return f()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?l:s;return sg.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:u,sg}var XN;function GN(){return XN||(XN=1,YN.exports=Rq()),YN.exports}Iu=GN();let oo,ln,Ld,Qe,lr,ao,QN,Bc;x$=Xe(Iu),oo=()=>{},ln=oo(),Ld=Object,Qe=e=>e===ln,lr=e=>typeof e=="function",ao=(e,t)=>({...e,...t}),QN=e=>lr(e.then),Bc=new WeakMap;let Iq=0;const $c=e=>{const t=typeof e,n=e&&e.constructor,r=n==Date;let o,a;if(Ld(e)===e&&!r&&n!=RegExp){if(o=Bc.get(e),o)return o;if(o=++Iq+"~",Bc.set(e,o),n==Array){for(o="@",a=0;a<e.length;a++)o+=$c(e[a])+",";Bc.set(e,o)}if(n==Ld){o="#";const i=Ld.keys(e).sort();for(;!Qe(a=i.pop());)Qe(e[a])||(o+=a+":"+$c(e[a])+",");Bc.set(e,o)}}else o=r?e.toJSON():t=="symbol"?e.toString():t=="string"?JSON.stringify(e):""+e;return o},io=new WeakMap,cg={},Fd={},lg="undefined",Bd=typeof window!=lg,ug=typeof document!=lg,Dq=()=>Bd&&typeof window.requestAnimationFrame!=lg,JN=(e,t)=>{const n=io.get(e);return[()=>!Qe(t)&&e.get(t)||cg,r=>{if(!Qe(t)){const o=e.get(t);t in Fd||(Fd[t]=o),n[5](t,ao(o,r),o||cg)}},n[6],()=>!Qe(t)&&t in Fd?Fd[t]:!Qe(t)&&e.get(t)||cg]};let dg=!0;const Lq=()=>dg,[fg,pg]=Bd&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[oo,oo],Fq=()=>{const e=ug&&document.visibilityState;return Qe(e)||e!=="hidden"},Bq=e=>(ug&&document.addEventListener("visibilitychange",e),fg("focus",e),()=>{ug&&document.removeEventListener("visibilitychange",e),pg("focus",e)}),$q=e=>{const t=()=>{dg=!0,e()},n=()=>{dg=!1};return fg("online",t),fg("offline",n),()=>{pg("online",t),pg("offline",n)}},zq={isOnline:Lq,isVisible:Fq},Vq={initFocus:Bq,initReconnect:$q},ZN=!V.useId,zc=!Bd||"Deno"in window,Uq=e=>Dq()?window.requestAnimationFrame(e):setTimeout(e,1),hg=zc?g.useEffect:g.useLayoutEffect,mg=typeof navigator<"u"&&navigator.connection,e2=!zc&&mg&&(["slow-2g","2g"].includes(mg.effectiveType)||mg.saveData),yg=e=>{if(lr(e))try{e=e()}catch{e=""}const t=e;return e=typeof e=="string"?e:(Array.isArray(e)?e.length:e)?$c(e):"",[e,t]};let Hq=0;const gg=()=>++Hq,t2=0,n2=1,r2=2;var Vc={__proto__:null,ERROR_REVALIDATE_EVENT:3,FOCUS_EVENT:t2,MUTATE_EVENT:r2,RECONNECT_EVENT:n2};async function o2(...e){const[t,n,r,o]=e,a=ao({populateCache:!0,throwOnError:!0},typeof o=="boolean"?{revalidate:o}:o||{});let i=a.populateCache;const s=a.rollbackOnError;let c=a.optimisticData;const l=f=>typeof s=="function"?s(f):s!==!1,u=a.throwOnError;if(lr(n)){const f=n,p=[],y=t.keys();for(const m of y)!/^\$(inf|sub)\$/.test(m)&&f(t.get(m)._k)&&p.push(m);return Promise.all(p.map(d))}return d(n);async function d(f){const[p]=yg(f);if(!p)return;const[y,m]=JN(t,p),[v,b,x,j]=io.get(t),w=()=>{const A=v[p];return(lr(a.revalidate)?a.revalidate(y().data,f):a.revalidate!==!1)&&(delete x[p],delete j[p],A&&A[0])?A[0](r2).then(()=>y().data):y().data};if(e.length<3)return w();let _=r,E;const S=gg();b[p]=[S,0];const C=!Qe(c),M=y(),P=M.data,N=M._c,R=Qe(N)?P:N;if(C&&(c=lr(c)?c(R,P):c,m({data:c,_c:R})),lr(_))try{_=_(R)}catch(A){E=A}if(_&&QN(_))if(_=await _.catch(A=>{E=A}),S!==b[p][0]){if(E)throw E;return _}else E&&C&&l(E)&&(i=!0,m({data:R,_c:ln}));if(i&&!E)if(lr(i)){const A=i(_,R);m({data:A,error:ln,_c:ln})}else m({data:_,error:ln,_c:ln});if(b[p][1]=gg(),Promise.resolve(w()).then(()=>{m({_c:ln})}),E){if(u)throw E;return}return _}}const a2=(e,t)=>{for(const n in e)e[n][0]&&e[n][0](t)},Wq=(e,t)=>{if(!io.has(e)){const n=ao(Vq,t),r={},o=o2.bind(ln,e);let a=oo;const i={},s=(u,d)=>{const f=i[u]||[];return i[u]=f,f.push(d),()=>f.splice(f.indexOf(d),1)},c=(u,d,f)=>{e.set(u,d);const p=i[u];if(p)for(const y of p)y(d,f)},l=()=>{if(!io.has(e)&&(io.set(e,[r,{},{},{},o,c,s]),!zc)){const u=n.initFocus(setTimeout.bind(ln,a2.bind(ln,r,t2))),d=n.initReconnect(setTimeout.bind(ln,a2.bind(ln,r,n2)));a=()=>{u&&u(),d&&d(),io.delete(e)}}};return l(),[e,o,l,a]}return[e,io.get(e)[4]]},qq=(e,t,n,r,o)=>{const a=n.errorRetryCount,i=o.retryCount,s=~~((Math.random()+.5)*(1<<(i<8?i:8)))*n.errorRetryInterval;!Qe(a)&&i>a||setTimeout(r,s,o)},Yq=(e,t)=>$c(e)==$c(t),[i2,Kq]=Wq(new Map),Xq=ao({onLoadingSlow:oo,onSuccess:oo,onError:oo,onErrorRetry:qq,onDiscarded:oo,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:e2?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:e2?5e3:3e3,compare:Yq,isPaused:()=>!1,cache:i2,mutate:Kq,fallback:{}},zq),Gq=(e,t)=>{const n=ao(e,t);if(t){const{use:r,fallback:o}=e,{use:a,fallback:i}=t;r&&a&&(n.use=r.concat(a)),o&&i&&(n.fallback=ao(o,i))}return n},Qq=g.createContext({}),Jq="$inf$",s2=Bd&&window.__SWR_DEVTOOLS_USE__,Zq=s2?window.__SWR_DEVTOOLS_USE__:[],eY=()=>{s2&&(window.__SWR_DEVTOOLS_REACT__=V)},tY=e=>lr(e[1])?[e[0],e[1],e[2]||{}]:[e[0],null,(e[1]===null?e[2]:e[1])||{}],nY=()=>ao(Xq,g.useContext(Qq)),rY=e=>(t,n,r)=>e(t,n&&((...o)=>{const[a]=yg(t),[,,,i]=io.get(i2);if(a.startsWith(Jq))return n(...o);const s=i[a];return Qe(s)?n(...o):(delete i[a],s)}),r),oY=Zq.concat(rY),aY=e=>function(...t){const n=nY(),[r,o,a]=tY(t),i=Gq(n,a);let s=e;const{use:c}=i,l=(c||[]).concat(oY);for(let u=l.length;u--;)s=l[u](s);return s(r,o||i.fetcher||null,i)},iY=(e,t,n)=>{const r=t[e]||(t[e]=[]);return r.push(n),()=>{const o=r.indexOf(n);o>=0&&(r[o]=r[r.length-1],r.pop())}};eY();const c2=V.use||(e=>{if(e.status==="pending")throw e;if(e.status==="fulfilled")return e.value;throw e.status==="rejected"?e.reason:(e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t}),e)}),vg={dedupe:!0},sY=(e,t,n)=>{const{cache:r,compare:o,suspense:a,fallbackData:i,revalidateOnMount:s,revalidateIfStale:c,refreshInterval:l,refreshWhenHidden:u,refreshWhenOffline:d,keepPreviousData:f}=n,[p,y,m,v]=io.get(r),[b,x]=yg(e),j=g.useRef(!1),w=g.useRef(!1),_=g.useRef(b),E=g.useRef(t),S=g.useRef(n),C=()=>S.current,M=()=>C().isVisible()&&C().isOnline(),[P,N,R,A]=JN(r,b),O=g.useRef({}).current,k=Qe(i)?n.fallback[b]:i,T=(B,se)=>{for(const ce in O){const ve=ce;if(ve==="data"){if(!o(B[ve],se[ve])&&(!Qe(B[ve])||!o(G,se[ve])))return!1}else if(se[ve]!==B[ve])return!1}return!0},I=g.useMemo(()=>{const B=!b||!t?!1:Qe(s)?C().isPaused()||a?!1:Qe(c)?!0:c:s,se=ze=>{const at=ao(ze);return delete at._k,B?{isValidating:!0,isLoading:!0,...at}:at},ce=P(),ve=A(),Te=se(ce),qe=ce===ve?Te:se(ve);let Ye=Te;return[()=>{const ze=se(P());return T(ze,Ye)?(Ye.data=ze.data,Ye.isLoading=ze.isLoading,Ye.isValidating=ze.isValidating,Ye.error=ze.error,Ye):(Ye=ze,ze)},()=>qe]},[r,b]),L=Iu.useSyncExternalStore(g.useCallback(B=>R(b,(se,ce)=>{T(ce,se)||B()}),[r,b]),I[0],I[1]),D=!j.current,z=p[b]&&p[b].length>0,H=L.data,F=Qe(H)?k:H,U=L.error,Y=g.useRef(F),G=f?Qe(H)?Y.current:H:F,re=z&&!Qe(U)?!1:D&&!Qe(s)?s:C().isPaused()?!1:a?Qe(F)?!1:c:Qe(F)||c,Z=!!(b&&t&&D&&re),q=Qe(L.isValidating)?Z:L.isValidating,W=Qe(L.isLoading)?Z:L.isLoading,Q=g.useCallback(async B=>{const se=E.current;if(!b||!se||w.current||C().isPaused())return!1;let ce,ve,Te=!0;const qe=B||{},Ye=!m[b]||!qe.dedupe,ze=()=>ZN?!w.current&&b===_.current&&j.current:b===_.current,at={isValidating:!1,isLoading:!1},He=()=>{N(at)},it=()=>{const Et=m[b];Et&&Et[1]===ve&&delete m[b]},Vt={isValidating:!0};Qe(P().data)&&(Vt.isLoading=!0);try{if(Ye&&(N(Vt),n.loadingTimeout&&Qe(P().data)&&setTimeout(()=>{Te&&ze()&&C().onLoadingSlow(b,n)},n.loadingTimeout),m[b]=[se(x),gg()]),[ce,ve]=m[b],ce=await ce,Ye&&setTimeout(it,n.dedupingInterval),!m[b]||m[b][1]!==ve)return Ye&&ze()&&C().onDiscarded(b),!1;at.error=ln;const Et=y[b];if(!Qe(Et)&&(ve<=Et[0]||ve<=Et[1]||Et[1]===0))return He(),Ye&&ze()&&C().onDiscarded(b),!1;const mt=P().data;at.data=o(mt,ce)?mt:ce,Ye&&ze()&&C().onSuccess(ce,b,n)}catch(Et){it();const mt=C(),{shouldRetryOnError:At}=mt;mt.isPaused()||(at.error=Et,Ye&&ze()&&(mt.onError(Et,b,mt),(At===!0||lr(At)&&At(Et))&&(!C().revalidateOnFocus||!C().revalidateOnReconnect||M())&&mt.onErrorRetry(Et,b,mt,yn=>{const wr=p[b];wr&&wr[0]&&wr[0](Vc.ERROR_REVALIDATE_EVENT,yn)},{retryCount:(qe.retryCount||0)+1,dedupe:!0})))}return Te=!1,He(),!0},[b,r]),te=g.useCallback((...B)=>o2(r,_.current,...B),[]);if(hg(()=>{E.current=t,S.current=n,Qe(H)||(Y.current=H)}),hg(()=>{if(!b)return;const B=Q.bind(ln,vg);let se=0;const ce=iY(b,p,(ve,Te={})=>{if(ve==Vc.FOCUS_EVENT){const qe=Date.now();C().revalidateOnFocus&&qe>se&&M()&&(se=qe+C().focusThrottleInterval,B())}else if(ve==Vc.RECONNECT_EVENT)C().revalidateOnReconnect&&M()&&B();else{if(ve==Vc.MUTATE_EVENT)return Q();if(ve==Vc.ERROR_REVALIDATE_EVENT)return Q(Te)}});return w.current=!1,_.current=b,j.current=!0,N({_k:x}),re&&(Qe(F)||zc?B():Uq(B)),()=>{w.current=!0,ce()}},[b]),hg(()=>{let B;function se(){const ve=lr(l)?l(P().data):l;ve&&B!==-1&&(B=setTimeout(ce,ve))}function ce(){!P().error&&(u||C().isVisible())&&(d||C().isOnline())?Q(vg).then(se):se()}return se(),()=>{B&&(clearTimeout(B),B=-1)}},[l,u,d,b]),g.useDebugValue(G),a&&Qe(F)&&b){if(!ZN&&zc)throw new Error("Fallback data is required when using suspense in SSR.");E.current=t,S.current=n,w.current=!1;const B=v[b];if(!Qe(B)){const se=te(B);c2(se)}if(Qe(U)){const se=Q(vg);Qe(G)||(se.status="fulfilled",se.value=!0),c2(se)}else throw U}return{mutate:te,get data(){return O.data=!0,G},get error(){return O.error=!0,U},get isValidating(){return O.isValidating=!0,q},get isLoading(){return O.isLoading=!0,W}}},$d=aY(sY);var bg,l2;function cY(){if(l2)return bg;l2=1;function e(t,n){if(typeof t!="function")throw new TypeError(`Expected the first argument to be a \`function\`, got \`${typeof t}\`.`);let r,o=0;return function(...a){clearTimeout(r);const i=Date.now(),s=i-o,c=n-s;c<=0?(o=i,t.apply(this,a)):r=setTimeout(()=>{o=Date.now(),t.apply(this,a)},c)}}return bg=e,bg}var lY=cY();const uY=Xe(lY);function u2(e,t){return t!=null?uY(e,t):e}var dY=async(e,t,n,r,o,a,i,s,c,l,u,d,f,p,y,m,v)=>{var b;const x=i.current;n(t.messages,!1);const j=p?t.messages:t.messages.map(({role:_,content:E,experimental_attachments:S,data:C,annotations:M,toolInvocations:P})=>({role:_,content:E,...S!==void 0&&{experimental_attachments:S},...C!==void 0&&{data:C},...M!==void 0&&{annotations:M},...P!==void 0&&{toolInvocations:P}})),w=o.current;return await Tq({api:e,body:(b=y==null?void 0:y({messages:t.messages,requestData:t.data,requestBody:t.body}))!=null?b:{messages:j,data:t.data,...a.current.body,...t.body},streamProtocol:l,credentials:a.current.credentials,headers:{...a.current.headers,...t.headers},abortController:()=>s.current,restoreMessagesOnFailure(){v||n(x,!1)},onResponse:d,onUpdate(_,E){n([...t.messages,..._],!1),E!=null&&E.length&&r([...w??[],...E],!1)},onToolCall:f,onFinish:u,generateId:c,fetch:m})};function fY({api:e="/api/chat",id:t,initialMessages:n,initialInput:r="",sendExtraMessageFields:o,onToolCall:a,experimental_prepareRequestBody:i,maxSteps:s=1,streamProtocol:c="data",onResponse:l,onFinish:u,onError:d,credentials:f,headers:p,body:y,generateId:m=WN,fetch:v,keepLastMessageOnError:b=!0,experimental_throttle:x}={}){const j=g.useId(),w=t??j,_=typeof e=="string"?[e,w]:w,[E]=g.useState([]),{data:S,mutate:C}=$d([_,"messages"],null,{fallbackData:n??E}),M=g.useRef(S||[]);g.useEffect(()=>{M.current=S||[]},[S]);const{data:P,mutate:N}=$d([_,"streamData"],null),R=g.useRef(P);g.useEffect(()=>{R.current=P},[P]);const{data:A=!1,mutate:O}=$d([_,"loading"],null),{data:k=void 0,mutate:T}=$d([_,"error"],null),I=g.useRef(null),L=g.useRef({credentials:f,headers:p,body:y});g.useEffect(()=>{L.current={credentials:f,headers:p,body:y}},[f,p,y]);const D=g.useCallback(async q=>{const W=M.current.length;try{O(!0),T(void 0);const B=new AbortController;I.current=B,await dY(e,q,u2(C,x),u2(N,x),R,L,M,I,m,c,u,l,a,o,i,v,b),I.current=null}catch(B){if(B.name==="AbortError")return I.current=null,null;d&&B instanceof Error&&d(B),T(B)}finally{O(!1)}const Q=M.current,te=Q[Q.length-1];Q.length>W&&te!=null&&s>1&&d2(te)&&pY(Q)<s&&await D({messages:Q})},[C,O,e,L,l,u,d,T,N,R,c,o,i,a,s,M,I,m,v,b,x]),z=g.useCallback(async(q,{data:W,headers:Q,body:te,experimental_attachments:B}={})=>{var se,ce;q.id||(q.id=m());const ve=await f2(B),Te=M.current.concat({...q,id:(se=q.id)!=null?se:m(),createdAt:(ce=q.createdAt)!=null?ce:new Date,experimental_attachments:ve.length>0?ve:void 0});return D({messages:Te,headers:Q,body:te,data:W})},[D,m]),H=g.useCallback(async({data:q,headers:W,body:Q}={})=>{const te=M.current;if(te.length===0)return null;const B=te[te.length-1];return D({messages:B.role==="assistant"?te.slice(0,-1):te,headers:W,body:Q,data:q})},[D]),F=g.useCallback(()=>{I.current&&(I.current.abort(),I.current=null)},[]),U=g.useCallback(q=>{typeof q=="function"&&(q=q(M.current)),C(q,!1),M.current=q},[C]),Y=g.useCallback(q=>{typeof q=="function"&&(q=q(R.current)),N(q,!1),R.current=q},[N]),[G,re]=g.useState(r),Z=g.useCallback(async(q,W={},Q)=>{var te;if((te=q==null?void 0:q.preventDefault)==null||te.call(q),!G&&!W.allowEmptySubmit)return;Q&&(L.current={...L.current,...Q});const B=await f2(W.experimental_attachments),se={messages:!G&&!B.length&&W.allowEmptySubmit?M.current:M.current.concat({id:m(),createdAt:new Date,role:"user",content:G,experimental_attachments:B.length>0?B:void 0}),headers:W.headers,body:W.body,data:W.data};D(se),re("")},[G,m,D]);return{messages:S||[],setMessages:U,data:P,setData:Y,error:k,append:z,reload:H,stop:F,input:G,setInput:re,handleInputChange:q=>{re(q.target.value)},handleSubmit:Z,isLoading:A,addToolResult:({toolCallId:q,result:W})=>{const Q=M.current.map((B,se,ce)=>se===ce.length-1&&B.role==="assistant"&&B.toolInvocations?{...B,toolInvocations:B.toolInvocations.map(ve=>ve.toolCallId===q?{...ve,result:W,state:"result"}:ve)}:B);C(Q,!1);const te=Q[Q.length-1];d2(te)&&D({messages:Q})}}}function d2(e){return e.role==="assistant"&&e.toolInvocations&&e.toolInvocations.length>0&&e.toolInvocations.every(t=>"result"in t)}function pY(e){let t=0;for(let n=e.length-1;n>=0&&e[n].role==="assistant";n--)t++;return t}async function f2(e){if(e==null)return[];if(e instanceof FileList)return Promise.all(Array.from(e).map(async t=>{const{name:n,type:r}=t,o=await new Promise((a,i)=>{const s=new FileReader;s.onload=c=>{var l;a((l=c.target)==null?void 0:l.result)},s.onerror=c=>i(c),s.readAsDataURL(t)});return{name:n,contentType:r,url:o}}));if(Array.isArray(e))return e;throw new Error("Invalid attachments type")}$E=fY;const so=g.forwardRef(({className:e,...t},n)=>h.jsx("textarea",{className:J("flex min-h-[100px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-0 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...t}));so.displayName="Textarea";function hY({minHeight:e,maxHeight:t}){const n=g.useRef(null),r=g.useCallback(o=>{const a=n.current;if(!a)return;if(o){a.style.height=`${e}px`;return}a.style.height=`${e}px`;const i=Math.max(e,Math.min(a.scrollHeight,t??Number.POSITIVE_INFINITY));a.style.height=`${i}px`},[e,t]);return g.useEffect(()=>{const o=n.current;o&&(o.style.height=`${e}px`)},[e]),g.useEffect(()=>{const o=()=>r();return window.addEventListener("resize",o),()=>window.removeEventListener("resize",o)},[r]),{textareaRef:n,adjustHeight:r}}const mY=48,p2=164;function h2({onSubmit:e,disabled:t,enableTool:n,enableFile:r,placeholder:o,minHeight:a,maxHeight:i,className:s,onChange:c,value:l}){const[u,d]=g.useState(!1),[f,p]=g.useState(""),{textareaRef:y,adjustHeight:m}=hY({minHeight:a||mY,maxHeight:i||p2}),[v,b]=g.useState(!0),x=async j=>{try{d(!0),await e(f,j)}finally{d(!1)}};return h.jsx("div",{className:J("w-full py-4 max-w-xl",s),children:h.jsx("div",{className:"relative w-full mx-auto",children:h.jsxs("div",{className:"relative flex flex-col",children:[h.jsx("div",{className:"overflow-y-auto",style:{maxHeight:`${i||p2}px`},children:h.jsx(so,{id:"ai-input-04",value:(c?l:f)||"",disabled:t||u,placeholder:o,className:"w-full rounded-xl rounded-b-none px-4 py-3 bg-black/5 dark:bg-white/5 border-none dark:text-white placeholder:text-black/70 dark:placeholder:text-white/70 resize-none focus-visible:ring-0 leading-[1.2]",ref:y,onKeyDown:j=>{j.key==="Enter"&&!j.shiftKey&&(j.preventDefault(),x(j))},onChange:j=>{c||p(j.target.value),m(),c==null||c(j)}})}),h.jsxs("div",{className:"h-12 bg-black/5 dark:bg-white/5 rounded-b-xl",children:[h.jsxs("div",{className:"absolute left-3 bottom-3 flex items-center gap-2",children:[r?h.jsxs("label",{className:"cursor-pointer rounded-lg p-2 bg-black/5 dark:bg-white/5",children:[h.jsx("input",{type:"file",className:"hidden"}),h.jsx(de,{name:"paperclip",className:"w-4 h-4 text-black/40 dark:text-white/40 hover:text-black dark:hover:text-white transition-colors"})]}):void 0,n?h.jsxs("button",{type:"button",onClick:()=>{b(!v)},className:J("rounded-full transition-all flex items-center gap-2 px-1.5 py-1 border h-8",v?"bg-sky-500/15 border-sky-400 text-sky-500":"bg-black/5 dark:bg-white/5 border-transparent text-black/40 dark:text-white/40 hover:text-black dark:hover:text-white"),children:[h.jsx("div",{className:"w-4 h-4 flex items-center justify-center flex-shrink-0",children:h.jsx(Ou.div,{animate:{rotate:v?180:0,scale:v?1.1:1},whileHover:{rotate:v?180:15,scale:1.1,transition:{type:"spring",stiffness:300,damping:10}},transition:{type:"spring",stiffness:260,damping:25},children:h.jsx(de,{name:"globe",className:J("w-4 h-4",v?"text-sky-500":"text-inherit")})})}),h.jsx(O$,{children:v&&h.jsx(Ou.span,{initial:{width:0,opacity:0},animate:{width:"auto",opacity:1},exit:{width:0,opacity:0},transition:{duration:.2},className:"text-sm overflow-hidden whitespace-nowrap text-sky-500 flex-shrink-0",children:"Search"})})]}):void 0]}),h.jsx("div",{className:"absolute right-3 bottom-3",children:h.jsx("button",{type:"button",disabled:t||u,onClick:j=>{x(j)},className:J("rounded-lg p-2",c&&l||f?"bg-sky-500/15 text-sky-500":"bg-black/5 dark:bg-white/5 text-black/40 dark:text-white/40 hover:text-black dark:hover:text-white"),children:h.jsx(de,{name:"send",className:"w-4 h-4"})})})]})]})})})}var xg,m2;function yY(){if(m2)return xg;m2=1;function e(){this.__data__=[],this.size=0}return xg=e,xg}var wg,y2;Ys=function(){if(y2)return wg;y2=1;function e(t,n){return t===n||t!==t&&n!==n}return wg=e,wg};var _g,g2;function zd(){if(g2)return _g;g2=1;var e=Ys();function t(n,r){for(var o=n.length;o--;)if(e(n[o][0],r))return o;return-1}return _g=t,_g}var jg,v2;function gY(){if(v2)return jg;v2=1;var e=zd(),t=Array.prototype,n=t.splice;function r(o){var a=this.__data__,i=e(a,o);if(i<0)return!1;var s=a.length-1;return i==s?a.pop():n.call(a,i,1),--this.size,!0}return jg=r,jg}var Eg,b2;function vY(){if(b2)return Eg;b2=1;var e=zd();function t(n){var r=this.__data__,o=e(r,n);return o<0?void 0:r[o][1]}return Eg=t,Eg}var Sg,x2;function bY(){if(x2)return Sg;x2=1;var e=zd();function t(n){return e(this.__data__,n)>-1}return Sg=t,Sg}var Cg,w2;function xY(){if(w2)return Cg;w2=1;var e=zd();function t(n,r){var o=this.__data__,a=e(o,n);return a<0?(++this.size,o.push([n,r])):o[a][1]=r,this}return Cg=t,Cg}var Og,_2;function Vd(){if(_2)return Og;_2=1;var e=yY(),t=gY(),n=vY(),r=bY(),o=xY();function a(i){var s=-1,c=i==null?0:i.length;for(this.clear();++s<c;){var l=i[s];this.set(l[0],l[1])}}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=n,a.prototype.has=r,a.prototype.set=o,Og=a,Og}var Mg,j2;function wY(){if(j2)return Mg;j2=1;var e=Vd();function t(){this.__data__=new e,this.size=0}return Mg=t,Mg}var Ng,E2;function _Y(){if(E2)return Ng;E2=1;function e(t){var n=this.__data__,r=n.delete(t);return this.size=n.size,r}return Ng=e,Ng}var Pg,S2;function jY(){if(S2)return Pg;S2=1;function e(t){return this.__data__.get(t)}return Pg=e,Pg}var kg,C2;function EY(){if(C2)return kg;C2=1;function e(t){return this.__data__.has(t)}return kg=e,kg}var Ag,O2;function M2(){if(O2)return Ag;O2=1;var e=typeof Hs=="object"&&Hs&&Hs.Object===Object&&Hs;return Ag=e,Ag}var Tg,N2;er=function(){if(N2)return Tg;N2=1;var e=M2(),t=typeof self=="object"&&self&&self.Object===Object&&self,n=e||t||Function("return this")();return Tg=n,Tg};var Rg,P2;oi=function(){if(P2)return Rg;P2=1;var e=er(),t=e.Symbol;return Rg=t,Rg};var Ig,k2;function SY(){if(k2)return Ig;k2=1;var e=oi(),t=Object.prototype,n=t.hasOwnProperty,r=t.toString,o=e?e.toStringTag:void 0;function a(i){var s=n.call(i,o),c=i[o];try{i[o]=void 0;var l=!0}catch{}var u=r.call(i);return l&&(s?i[o]=c:delete i[o]),u}return Ig=a,Ig}var Dg,A2;function CY(){if(A2)return Dg;A2=1;var e=Object.prototype,t=e.toString;function n(r){return t.call(r)}return Dg=n,Dg}var Lg,T2;function co(){if(T2)return Lg;T2=1;var e=oi(),t=SY(),n=CY(),r="[object Null]",o="[object Undefined]",a=e?e.toStringTag:void 0;function i(s){return s==null?s===void 0?o:r:a&&a in Object(s)?t(s):n(s)}return Lg=i,Lg}var Fg,R2;tr=function(){if(R2)return Fg;R2=1;function e(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}return Fg=e,Fg};var Bg,I2;Ru=function(){if(I2)return Bg;I2=1;var e=co(),t=tr(),n="[object AsyncFunction]",r="[object Function]",o="[object GeneratorFunction]",a="[object Proxy]";function i(s){if(!t(s))return!1;var c=e(s);return c==r||c==o||c==n||c==a}return Bg=i,Bg};var $g,D2;function OY(){if(D2)return $g;D2=1;var e=er(),t=e["__core-js_shared__"];return $g=t,$g}var zg,L2;function MY(){if(L2)return zg;L2=1;var e=OY(),t=function(){var r=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function n(r){return!!t&&t in r}return zg=n,zg}var Vg,F2;function B2(){if(F2)return Vg;F2=1;var e=Function.prototype,t=e.toString;function n(r){if(r!=null){try{return t.call(r)}catch{}try{return r+""}catch{}}return""}return Vg=n,Vg}var Ug,$2;function NY(){if($2)return Ug;$2=1;var e=Ru(),t=MY(),n=tr(),r=B2(),o=/[\\^$.*+?()[\]{}|]/g,a=/^\[object .+?Constructor\]$/,i=Function.prototype,s=Object.prototype,c=i.toString,l=s.hasOwnProperty,u=RegExp("^"+c.call(l).replace(o,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function d(f){if(!n(f)||t(f))return!1;var p=e(f)?u:a;return p.test(r(f))}return Ug=d,Ug}var Hg,z2;function PY(){if(z2)return Hg;z2=1;function e(t,n){return t==null?void 0:t[n]}return Hg=e,Hg}var Wg,V2;function xa(){if(V2)return Wg;V2=1;var e=NY(),t=PY();function n(r,o){var a=t(r,o);return e(a)?a:void 0}return Wg=n,Wg}var qg,U2;function Yg(){if(U2)return qg;U2=1;var e=xa(),t=er(),n=e(t,"Map");return qg=n,qg}var Kg,H2;function Ud(){if(H2)return Kg;H2=1;var e=xa(),t=e(Object,"create");return Kg=t,Kg}var Xg,W2;function kY(){if(W2)return Xg;W2=1;var e=Ud();function t(){this.__data__=e?e(null):{},this.size=0}return Xg=t,Xg}var Gg,q2;function AY(){if(q2)return Gg;q2=1;function e(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}return Gg=e,Gg}var Qg,Y2;function TY(){if(Y2)return Qg;Y2=1;var e=Ud(),t="__lodash_hash_undefined__",n=Object.prototype,r=n.hasOwnProperty;function o(a){var i=this.__data__;if(e){var s=i[a];return s===t?void 0:s}return r.call(i,a)?i[a]:void 0}return Qg=o,Qg}var Jg,K2;function RY(){if(K2)return Jg;K2=1;var e=Ud(),t=Object.prototype,n=t.hasOwnProperty;function r(o){var a=this.__data__;return e?a[o]!==void 0:n.call(a,o)}return Jg=r,Jg}var Zg,X2;function IY(){if(X2)return Zg;X2=1;var e=Ud(),t="__lodash_hash_undefined__";function n(r,o){var a=this.__data__;return this.size+=this.has(r)?0:1,a[r]=e&&o===void 0?t:o,this}return Zg=n,Zg}var ev,G2;function DY(){if(G2)return ev;G2=1;var e=kY(),t=AY(),n=TY(),r=RY(),o=IY();function a(i){var s=-1,c=i==null?0:i.length;for(this.clear();++s<c;){var l=i[s];this.set(l[0],l[1])}}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=n,a.prototype.has=r,a.prototype.set=o,ev=a,ev}var tv,Q2;function LY(){if(Q2)return tv;Q2=1;var e=DY(),t=Vd(),n=Yg();function r(){this.size=0,this.__data__={hash:new e,map:new(n||t),string:new e}}return tv=r,tv}var nv,J2;function FY(){if(J2)return nv;J2=1;function e(t){var n=typeof t;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?t!=="__proto__":t===null}return nv=e,nv}var rv,Z2;function Hd(){if(Z2)return rv;Z2=1;var e=FY();function t(n,r){var o=n.__data__;return e(r)?o[typeof r=="string"?"string":"hash"]:o.map}return rv=t,rv}var ov,eP;function BY(){if(eP)return ov;eP=1;var e=Hd();function t(n){var r=e(this,n).delete(n);return this.size-=r?1:0,r}return ov=t,ov}var av,tP;function $Y(){if(tP)return av;tP=1;var e=Hd();function t(n){return e(this,n).get(n)}return av=t,av}var iv,nP;function zY(){if(nP)return iv;nP=1;var e=Hd();function t(n){return e(this,n).has(n)}return iv=t,iv}var sv,rP;function VY(){if(rP)return sv;rP=1;var e=Hd();function t(n,r){var o=e(this,n),a=o.size;return o.set(n,r),this.size+=o.size==a?0:1,this}return sv=t,sv}var cv,oP;function lv(){if(oP)return cv;oP=1;var e=LY(),t=BY(),n=$Y(),r=zY(),o=VY();function a(i){var s=-1,c=i==null?0:i.length;for(this.clear();++s<c;){var l=i[s];this.set(l[0],l[1])}}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=n,a.prototype.has=r,a.prototype.set=o,cv=a,cv}var uv,aP;function UY(){if(aP)return uv;aP=1;var e=Vd(),t=Yg(),n=lv(),r=200;function o(a,i){var s=this.__data__;if(s instanceof e){var c=s.__data__;if(!t||c.length<r-1)return c.push([a,i]),this.size=++s.size,this;s=this.__data__=new n(c)}return s.set(a,i),this.size=s.size,this}return uv=o,uv}var dv,iP;Am=function(){if(iP)return dv;iP=1;var e=Vd(),t=wY(),n=_Y(),r=jY(),o=EY(),a=UY();function i(s){var c=this.__data__=new e(s);this.size=c.size}return i.prototype.clear=t,i.prototype.delete=n,i.prototype.get=r,i.prototype.has=o,i.prototype.set=a,dv=i,dv};var fv,sP;function HY(){if(sP)return fv;sP=1;var e="__lodash_hash_undefined__";function t(n){return this.__data__.set(n,e),this}return fv=t,fv}var pv,cP;function WY(){if(cP)return pv;cP=1;function e(t){return this.__data__.has(t)}return pv=e,pv}var hv,lP;function uP(){if(lP)return hv;lP=1;var e=lv(),t=HY(),n=WY();function r(o){var a=-1,i=o==null?0:o.length;for(this.__data__=new e;++a<i;)this.add(o[a])}return r.prototype.add=r.prototype.push=t,r.prototype.has=n,hv=r,hv}var mv,dP;function fP(){if(dP)return mv;dP=1;function e(t,n){for(var r=-1,o=t==null?0:t.length;++r<o;)if(n(t[r],r,t))return!0;return!1}return mv=e,mv}var yv,pP;function hP(){if(pP)return yv;pP=1;function e(t,n){return t.has(n)}return yv=e,yv}var gv,mP;function yP(){if(mP)return gv;mP=1;var e=uP(),t=fP(),n=hP(),r=1,o=2;function a(i,s,c,l,u,d){var f=c&r,p=i.length,y=s.length;if(p!=y&&!(f&&y>p))return!1;var m=d.get(i),v=d.get(s);if(m&&v)return m==s&&v==i;var b=-1,x=!0,j=c&o?new e:void 0;for(d.set(i,s),d.set(s,i);++b<p;){var w=i[b],_=s[b];if(l)var E=f?l(_,w,b,s,i,d):l(w,_,b,i,s,d);if(E!==void 0){if(E)continue;x=!1;break}if(j){if(!t(s,function(S,C){if(!n(j,C)&&(w===S||u(w,S,c,l,d)))return j.push(C)})){x=!1;break}}else if(!(w===_||u(w,_,c,l,d))){x=!1;break}}return d.delete(i),d.delete(s),x}return gv=a,gv}var vv,gP;JE=function(){if(gP)return vv;gP=1;var e=er(),t=e.Uint8Array;return vv=t,vv};var bv,vP;function qY(){if(vP)return bv;vP=1;function e(t){var n=-1,r=Array(t.size);return t.forEach(function(o,a){r[++n]=[a,o]}),r}return bv=e,bv}var xv,bP;function wv(){if(bP)return xv;bP=1;function e(t){var n=-1,r=Array(t.size);return t.forEach(function(o){r[++n]=o}),r}return xv=e,xv}var _v,xP;function YY(){if(xP)return _v;xP=1;var e=oi(),t=JE(),n=Ys(),r=yP(),o=qY(),a=wv(),i=1,s=2,c="[object Boolean]",l="[object Date]",u="[object Error]",d="[object Map]",f="[object Number]",p="[object RegExp]",y="[object Set]",m="[object String]",v="[object Symbol]",b="[object ArrayBuffer]",x="[object DataView]",j=e?e.prototype:void 0,w=j?j.valueOf:void 0;function _(E,S,C,M,P,N,R){switch(C){case x:if(E.byteLength!=S.byteLength||E.byteOffset!=S.byteOffset)return!1;E=E.buffer,S=S.buffer;case b:return!(E.byteLength!=S.byteLength||!N(new t(E),new t(S)));case c:case l:case f:return n(+E,+S);case u:return E.name==S.name&&E.message==S.message;case p:case m:return E==S+"";case d:var A=o;case y:var O=M&i;if(A||(A=a),E.size!=S.size&&!O)return!1;var k=R.get(E);if(k)return k==S;M|=s,R.set(E,S);var T=r(A(E),A(S),M,P,N,R);return R.delete(E),T;case v:if(w)return w.call(E)==w.call(S)}return!1}return _v=_,_v}var jv,wP;function Ev(){if(wP)return jv;wP=1;function e(t,n){for(var r=-1,o=n.length,a=t.length;++r<o;)t[a+r]=n[r];return t}return jv=e,jv}var Sv,_P;an=function(){if(_P)return Sv;_P=1;var e=Array.isArray;return Sv=e,Sv};var Cv,jP;function EP(){if(jP)return Cv;jP=1;var e=Ev(),t=an();function n(r,o,a){var i=o(r);return t(r)?i:e(i,a(r))}return Cv=n,Cv}var Ov,SP;function KY(){if(SP)return Ov;SP=1;function e(t,n){for(var r=-1,o=t==null?0:t.length,a=0,i=[];++r<o;){var s=t[r];n(s,r,t)&&(i[a++]=s)}return i}return Ov=e,Ov}var Mv,CP;function OP(){if(CP)return Mv;CP=1;function e(){return[]}return Mv=e,Mv}var Nv,MP;Om=function(){if(MP)return Nv;MP=1;var e=KY(),t=OP(),n=Object.prototype,r=n.propertyIsEnumerable,o=Object.getOwnPropertySymbols,a=o?function(i){return i==null?[]:(i=Object(i),e(o(i),function(s){return r.call(i,s)}))}:t;return Nv=a,Nv};var Pv,NP;function XY(){if(NP)return Pv;NP=1;function e(t,n){for(var r=-1,o=Array(t);++r<t;)o[r]=n(r);return o}return Pv=e,Pv}var kv,PP;jr=function(){if(PP)return kv;PP=1;function e(t){return t!=null&&typeof t=="object"}return kv=e,kv};var Av,kP;function GY(){if(kP)return Av;kP=1;var e=co(),t=jr(),n="[object Arguments]";function r(o){return t(o)&&e(o)==n}return Av=r,Av}var Tv,AP;Tu=function(){if(AP)return Tv;AP=1;var e=GY(),t=jr(),n=Object.prototype,r=n.hasOwnProperty,o=n.propertyIsEnumerable,a=e(function(){return arguments}())?e:function(i){return t(i)&&r.call(i,"callee")&&!o.call(i,"callee")};return Tv=a,Tv};var Wd={exports:{}},Rv,TP;function QY(){if(TP)return Rv;TP=1;function e(){return!1}return Rv=e,Rv}Wd.exports;var RP;Tm=function(){return RP||(RP=1,function(e,t){var n=er(),r=QY(),o=t&&!t.nodeType&&t,a=o&&!0&&e&&!e.nodeType&&e,i=a&&a.exports===o,s=i?n.Buffer:void 0,c=s?s.isBuffer:void 0,l=c||r;e.exports=l}(Wd,Wd.exports)),Wd.exports};var Iv,IP;function qd(){if(IP)return Iv;IP=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function n(r,o){var a=typeof r;return o=o??e,!!o&&(a=="number"||a!="symbol"&&t.test(r))&&r>-1&&r%1==0&&r<o}return Iv=n,Iv}var Dv,DP;function Lv(){if(DP)return Dv;DP=1;var e=9007199254740991;function t(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=e}return Dv=t,Dv}var Fv,LP;function JY(){if(LP)return Fv;LP=1;var e=co(),t=Lv(),n=jr(),r="[object Arguments]",o="[object Array]",a="[object Boolean]",i="[object Date]",s="[object Error]",c="[object Function]",l="[object Map]",u="[object Number]",d="[object Object]",f="[object RegExp]",p="[object Set]",y="[object String]",m="[object WeakMap]",v="[object ArrayBuffer]",b="[object DataView]",x="[object Float32Array]",j="[object Float64Array]",w="[object Int8Array]",_="[object Int16Array]",E="[object Int32Array]",S="[object Uint8Array]",C="[object Uint8ClampedArray]",M="[object Uint16Array]",P="[object Uint32Array]",N={};N[x]=N[j]=N[w]=N[_]=N[E]=N[S]=N[C]=N[M]=N[P]=!0,N[r]=N[o]=N[v]=N[a]=N[b]=N[i]=N[s]=N[c]=N[l]=N[u]=N[d]=N[f]=N[p]=N[y]=N[m]=!1;function R(A){return n(A)&&t(A.length)&&!!N[e(A)]}return Fv=R,Fv}var Bv,FP;km=function(){if(FP)return Bv;FP=1;function e(t){return function(n){return t(n)}}return Bv=e,Bv};var Yd={exports:{}};Yd.exports;var BP;eS=function(){return BP||(BP=1,function(e,t){var n=M2(),r=t&&!t.nodeType&&t,o=r&&!0&&e&&!e.nodeType&&e,a=o&&o.exports===r,i=a&&n.process,s=function(){try{var c=o&&o.require&&o.require("util").types;return c||i&&i.binding&&i.binding("util")}catch{}}();e.exports=s}(Yd,Yd.exports)),Yd.exports};var $v,$P;Lh=function(){if($P)return $v;$P=1;var e=JY(),t=km(),n=eS(),r=n&&n.isTypedArray,o=r?t(r):e;return $v=o,$v};var zv,zP;function VP(){if(zP)return zv;zP=1;var e=XY(),t=Tu(),n=an(),r=Tm(),o=qd(),a=Lh(),i=Object.prototype,s=i.hasOwnProperty;function c(l,u){var d=n(l),f=!d&&t(l),p=!d&&!f&&r(l),y=!d&&!f&&!p&&a(l),m=d||f||p||y,v=m?e(l.length,String):[],b=v.length;for(var x in l)(u||s.call(l,x))&&!(m&&(x=="length"||p&&(x=="offset"||x=="parent")||y&&(x=="buffer"||x=="byteLength"||x=="byteOffset")||o(x,b)))&&v.push(x);return v}return zv=c,zv}var Vv,UP;Pm=function(){if(UP)return Vv;UP=1;var e=Object.prototype;function t(n){var r=n&&n.constructor,o=typeof r=="function"&&r.prototype||e;return n===o}return Vv=t,Vv};var Uv,HP;function WP(){if(HP)return Uv;HP=1;function e(t,n){return function(r){return t(n(r))}}return Uv=e,Uv}var Hv,qP;function ZY(){if(qP)return Hv;qP=1;var e=WP(),t=e(Object.keys,Object);return Hv=t,Hv}var Wv,YP;function eK(){if(YP)return Wv;YP=1;var e=Pm(),t=ZY(),n=Object.prototype,r=n.hasOwnProperty;function o(a){if(!e(a))return t(a);var i=[];for(var s in Object(a))r.call(a,s)&&s!="constructor"&&i.push(s);return i}return Wv=o,Wv}var qv,KP;ua=function(){if(KP)return qv;KP=1;var e=Ru(),t=Lv();function n(r){return r!=null&&t(r.length)&&!e(r)}return qv=n,qv};var Yv,XP;Js=function(){if(XP)return Yv;XP=1;var e=VP(),t=eK(),n=ua();function r(o){return n(o)?e(o):t(o)}return Yv=r,Yv};var Kv,GP;nS=function(){if(GP)return Kv;GP=1;var e=EP(),t=Om(),n=Js();function r(o){return e(o,n,t)}return Kv=r,Kv};var Xv,QP;function tK(){if(QP)return Xv;QP=1;var e=nS(),t=1,n=Object.prototype,r=n.hasOwnProperty;function o(a,i,s,c,l,u){var d=s&t,f=e(a),p=f.length,y=e(i),m=y.length;if(p!=m&&!d)return!1;for(var v=p;v--;){var b=f[v];if(!(d?b in i:r.call(i,b)))return!1}var x=u.get(a),j=u.get(i);if(x&&j)return x==i&&j==a;var w=!0;u.set(a,i),u.set(i,a);for(var _=d;++v<p;){b=f[v];var E=a[b],S=i[b];if(c)var C=d?c(S,E,b,i,a,u):c(E,S,b,a,i,u);if(!(C===void 0?E===S||l(E,S,s,c,u):C)){w=!1;break}_||(_=b=="constructor")}if(w&&!_){var M=a.constructor,P=i.constructor;M!=P&&"constructor"in a&&"constructor"in i&&!(typeof M=="function"&&M instanceof M&&typeof P=="function"&&P instanceof P)&&(w=!1)}return u.delete(a),u.delete(i),w}return Xv=o,Xv}var Gv,JP;function nK(){if(JP)return Gv;JP=1;var e=xa(),t=er(),n=e(t,"DataView");return Gv=n,Gv}var Qv,ZP;function rK(){if(ZP)return Qv;ZP=1;var e=xa(),t=er(),n=e(t,"Promise");return Qv=n,Qv}var Jv,ek;function tk(){if(ek)return Jv;ek=1;var e=xa(),t=er(),n=e(t,"Set");return Jv=n,Jv}var Zv,nk;function oK(){if(nk)return Zv;nk=1;var e=xa(),t=er(),n=e(t,"WeakMap");return Zv=n,Zv}var e0,rk;ZE=function(){if(rk)return e0;rk=1;var e=nK(),t=Yg(),n=rK(),r=tk(),o=oK(),a=co(),i=B2(),s="[object Map]",c="[object Object]",l="[object Promise]",u="[object Set]",d="[object WeakMap]",f="[object DataView]",p=i(e),y=i(t),m=i(n),v=i(r),b=i(o),x=a;return(e&&x(new e(new ArrayBuffer(1)))!=f||t&&x(new t)!=s||n&&x(n.resolve())!=l||r&&x(new r)!=u||o&&x(new o)!=d)&&(x=function(j){var w=a(j),_=w==c?j.constructor:void 0,E=_?i(_):"";if(E)switch(E){case p:return f;case y:return s;case m:return l;case v:return u;case b:return d}return w}),e0=x,e0};var t0,ok;function aK(){if(ok)return t0;ok=1;var e=Am(),t=yP(),n=YY(),r=tK(),o=ZE(),a=an(),i=Tm(),s=Lh(),c=1,l="[object Arguments]",u="[object Array]",d="[object Object]",f=Object.prototype,p=f.hasOwnProperty;function y(m,v,b,x,j,w){var _=a(m),E=a(v),S=_?u:o(m),C=E?u:o(v);S=S==l?d:S,C=C==l?d:C;var M=S==d,P=C==d,N=S==C;if(N&&i(m)){if(!i(v))return!1;_=!0,M=!1}if(N&&!M)return w||(w=new e),_||s(m)?t(m,v,b,x,j,w):n(m,v,S,b,x,j,w);if(!(b&c)){var R=M&&p.call(m,"__wrapped__"),A=P&&p.call(v,"__wrapped__");if(R||A){var O=R?m.value():m,k=A?v.value():v;return w||(w=new e),j(O,k,b,x,w)}}return N?(w||(w=new e),r(m,v,b,x,j,w)):!1}return t0=y,t0}var n0,ak;function r0(){if(ak)return n0;ak=1;var e=aK(),t=jr();function n(r,o,a,i,s){return r===o?!0:r==null||o==null||!t(r)&&!t(o)?r!==r&&o!==o:e(r,o,a,i,n,s)}return n0=n,n0}var o0,ik;function iK(){if(ik)return o0;ik=1;var e=Am(),t=r0(),n=1,r=2;function o(a,i,s,c){var l=s.length,u=l,d=!c;if(a==null)return!u;for(a=Object(a);l--;){var f=s[l];if(d&&f[2]?f[1]!==a[f[0]]:!(f[0]in a))return!1}for(;++l<u;){f=s[l];var p=f[0],y=a[p],m=f[1];if(d&&f[2]){if(y===void 0&&!(p in a))return!1}else{var v=new e;if(c)var b=c(y,m,p,a,i,v);if(!(b===void 0?t(m,y,n|r,c,v):b))return!1}}return!0}return o0=o,o0}var a0,sk;function ck(){if(sk)return a0;sk=1;var e=tr();function t(n){return n===n&&!e(n)}return a0=t,a0}var i0,lk;function sK(){if(lk)return i0;lk=1;var e=ck(),t=Js();function n(r){for(var o=t(r),a=o.length;a--;){var i=o[a],s=r[i];o[a]=[i,s,e(s)]}return o}return i0=n,i0}var s0,uk;function dk(){if(uk)return s0;uk=1;function e(t,n){return function(r){return r==null?!1:r[t]===n&&(n!==void 0||t in Object(r))}}return s0=e,s0}var c0,fk;function cK(){if(fk)return c0;fk=1;var e=iK(),t=sK(),n=dk();function r(o){var a=t(o);return a.length==1&&a[0][2]?n(a[0][0],a[0][1]):function(i){return i===o||e(i,o,a)}}return c0=r,c0}var l0,pk;function Ni(){if(pk)return l0;pk=1;var e=co(),t=jr(),n="[object Symbol]";function r(o){return typeof o=="symbol"||t(o)&&e(o)==n}return l0=r,l0}var u0,hk;function d0(){if(hk)return u0;hk=1;var e=an(),t=Ni(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function o(a,i){if(e(a))return!1;var s=typeof a;return s=="number"||s=="symbol"||s=="boolean"||a==null||t(a)?!0:r.test(a)||!n.test(a)||i!=null&&a in Object(i)}return u0=o,u0}var f0,mk;function yk(){if(mk)return f0;mk=1;var e=lv(),t="Expected a function";function n(r,o){if(typeof r!="function"||o!=null&&typeof o!="function")throw new TypeError(t);var a=function(){var i=arguments,s=o?o.apply(this,i):i[0],c=a.cache;if(c.has(s))return c.get(s);var l=r.apply(this,i);return a.cache=c.set(s,l)||c,l};return a.cache=new(n.Cache||e),a}return n.Cache=e,f0=n,f0}var p0,gk;function lK(){if(gk)return p0;gk=1;var e=yk(),t=500;function n(r){var o=e(r,function(i){return a.size===t&&a.clear(),i}),a=o.cache;return o}return p0=n,p0}var h0,vk;function uK(){if(vk)return h0;vk=1;var e=lK(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,r=e(function(o){var a=[];return o.charCodeAt(0)===46&&a.push(""),o.replace(t,function(i,s,c,l){a.push(c?l.replace(n,"$1"):s||i)}),a});return h0=r,h0}var m0,bk;qs=function(){if(bk)return m0;bk=1;function e(t,n){for(var r=-1,o=t==null?0:t.length,a=Array(o);++r<o;)a[r]=n(t[r],r,t);return a}return m0=e,m0};var y0,xk;function dK(){if(xk)return y0;xk=1;var e=oi(),t=qs(),n=an(),r=Ni(),o=1/0,a=e?e.prototype:void 0,i=a?a.toString:void 0;function s(c){if(typeof c=="string")return c;if(n(c))return t(c,s)+"";if(r(c))return i?i.call(c):"";var l=c+"";return l=="0"&&1/c==-o?"-0":l}return y0=s,y0}var g0,wk;function _k(){if(wk)return g0;wk=1;var e=dK();function t(n){return n==null?"":e(n)}return g0=t,g0}var v0,jk;tc=function(){if(jk)return v0;jk=1;var e=an(),t=d0(),n=uK(),r=_k();function o(a,i){return e(a)?a:t(a,i)?[a]:n(r(a))}return v0=o,v0};var b0,Ek;ai=function(){if(Ek)return b0;Ek=1;var e=Ni(),t=1/0;function n(r){if(typeof r=="string"||e(r))return r;var o=r+"";return o=="0"&&1/r==-t?"-0":o}return b0=n,b0};var x0,Sk;ec=function(){if(Sk)return x0;Sk=1;var e=tc(),t=ai();function n(r,o){o=e(o,r);for(var a=0,i=o.length;r!=null&&a<i;)r=r[t(o[a++])];return a&&a==i?r:void 0}return x0=n,x0};var w0,Ck;function Ok(){if(Ck)return w0;Ck=1;var e=ec();function t(n,r,o){var a=n==null?void 0:e(n,r);return a===void 0?o:a}return w0=t,w0}var _0,Mk;function fK(){if(Mk)return _0;Mk=1;function e(t,n){return t!=null&&n in Object(t)}return _0=e,_0}var j0,Nk;function pK(){if(Nk)return j0;Nk=1;var e=tc(),t=Tu(),n=an(),r=qd(),o=Lv(),a=ai();function i(s,c,l){c=e(c,s);for(var u=-1,d=c.length,f=!1;++u<d;){var p=a(c[u]);if(!(f=s!=null&&l(s,p)))break;s=s[p]}return f||++u!=d?f:(d=s==null?0:s.length,!!d&&o(d)&&r(p,d)&&(n(s)||t(s)))}return j0=i,j0}var E0,Pk;vE=function(){if(Pk)return E0;Pk=1;var e=fK(),t=pK();function n(r,o){return r!=null&&t(r,o,e)}return E0=n,E0};var S0,kk;function hK(){if(kk)return S0;kk=1;var e=r0(),t=Ok(),n=vE(),r=d0(),o=ck(),a=dk(),i=ai(),s=1,c=2;function l(u,d){return r(u)&&o(d)?a(i(u),d):function(f){var p=t(f,u);return p===void 0&&p===d?n(f,u):e(d,p,s|c)}}return S0=l,S0}var C0,Ak;function Pi(){if(Ak)return C0;Ak=1;function e(t){return t}return C0=e,C0}var O0,Tk;function mK(){if(Tk)return O0;Tk=1;function e(t){return function(n){return n==null?void 0:n[t]}}return O0=e,O0}var M0,Rk;function yK(){if(Rk)return M0;Rk=1;var e=ec();function t(n){return function(r){return e(r,n)}}return M0=t,M0}var N0,Ik;function gK(){if(Ik)return N0;Ik=1;var e=mK(),t=yK(),n=d0(),r=ai();function o(a){return n(a)?e(r(a)):t(a)}return N0=o,N0}var P0,Dk;function Mr(){if(Dk)return P0;Dk=1;var e=cK(),t=hK(),n=Pi(),r=an(),o=gK();function a(i){return typeof i=="function"?i:i==null?n:typeof i=="object"?r(i)?t(i[0],i[1]):e(i):o(i)}return P0=a,P0}var k0,Lk;function vK(){if(Lk)return k0;Lk=1;var e="Expected a function";function t(n){if(typeof n!="function")throw new TypeError(e);return function(){var r=arguments;switch(r.length){case 0:return!n.call(this);case 1:return!n.call(this,r[0]);case 2:return!n.call(this,r[0],r[1]);case 3:return!n.call(this,r[0],r[1],r[2])}return!n.apply(this,r)}}return k0=t,k0}var A0,Fk;function Bk(){if(Fk)return A0;Fk=1;var e=xa(),t=function(){try{var n=e(Object,"defineProperty");return n({},"",{}),n}catch{}}();return A0=t,A0}var T0,$k;Bh=function(){if($k)return T0;$k=1;var e=Bk();function t(n,r,o){r=="__proto__"&&e?e(n,r,{configurable:!0,enumerable:!0,value:o,writable:!0}):n[r]=o}return T0=t,T0};var R0,zk;tS=function(){if(zk)return R0;zk=1;var e=Bh(),t=Ys(),n=Object.prototype,r=n.hasOwnProperty;function o(a,i,s){var c=a[i];(!(r.call(a,i)&&t(c,s))||s===void 0&&!(i in a))&&e(a,i,s)}return R0=o,R0};var I0,Vk;function bK(){if(Vk)return I0;Vk=1;var e=tS(),t=tc(),n=qd(),r=tr(),o=ai();function a(i,s,c,l){if(!r(i))return i;s=t(s,i);for(var u=-1,d=s.length,f=d-1,p=i;p!=null&&++u<d;){var y=o(s[u]),m=c;if(y==="__proto__"||y==="constructor"||y==="prototype")return i;if(u!=f){var v=p[y];m=l?l(v,y,p):void 0,m===void 0&&(m=r(v)?v:n(s[u+1])?[]:{})}e(p,y,m),p=p[y]}return i}return I0=a,I0}var D0,Uk;gE=function(){if(Uk)return D0;Uk=1;var e=ec(),t=bK(),n=tc();function r(o,a,i){for(var s=-1,c=a.length,l={};++s<c;){var u=a[s],d=e(o,u);i(d,u)&&t(l,n(u,o),d)}return l}return D0=r,D0};var L0,Hk;Nm=function(){if(Hk)return L0;Hk=1;var e=WP(),t=e(Object.getPrototypeOf,Object);return L0=t,L0};var F0,Wk;QE=function(){if(Wk)return F0;Wk=1;var e=Ev(),t=Nm(),n=Om(),r=OP(),o=Object.getOwnPropertySymbols,a=o?function(i){for(var s=[];i;)e(s,n(i)),i=t(i);return s}:r;return F0=a,F0};var B0,qk;function xK(){if(qk)return B0;qk=1;function e(t){var n=[];if(t!=null)for(var r in Object(t))n.push(r);return n}return B0=e,B0}var $0,Yk;function wK(){if(Yk)return $0;Yk=1;var e=tr(),t=Pm(),n=xK(),r=Object.prototype,o=r.hasOwnProperty;function a(i){if(!e(i))return n(i);var s=t(i),c=[];for(var l in i)l=="constructor"&&(s||!o.call(i,l))||c.push(l);return c}return $0=a,$0}var z0,Kk;GE=function(){if(Kk)return z0;Kk=1;var e=VP(),t=wK(),n=ua();function r(o){return n(o)?e(o,!0):t(o)}return z0=r,z0};var V0,Xk;rS=function(){if(Xk)return V0;Xk=1;var e=EP(),t=QE(),n=GE();function r(o){return e(o,n,t)}return V0=r,V0};var U0,Gk;function _K(){if(Gk)return U0;Gk=1;var e=qs(),t=Mr(),n=gE(),r=rS();function o(a,i){if(a==null)return{};var s=e(r(a),function(c){return[c]});return i=t(i),n(a,s,function(c,l){return i(c,l[0])})}return U0=o,U0}var H0,Qk;function jK(){if(Qk)return H0;Qk=1;var e=Mr(),t=vK(),n=_K();function r(o,a){return n(o,t(e(a)))}return H0=r,H0}var EK=jK();const Uc=Xe(EK);var W0,Jk;function SK(){if(Jk)return W0;Jk=1;function e(t){return t===void 0}return W0=e,W0}var CK=SK();const Hc=Xe(CK);function Tt(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=Tt(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var OK={value:()=>{}};function Kd(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Xd(n)}function Xd(e){this._=e}function MK(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",o=n.indexOf(".");if(o>=0&&(r=n.slice(o+1),n=n.slice(0,o)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Xd.prototype=Kd.prototype={constructor:Xd,on:function(e,t){var n=this._,r=MK(e+"",n),o,a=-1,i=r.length;if(arguments.length<2){for(;++a<i;)if((o=(e=r[a]).type)&&(o=NK(n[o],e.name)))return o;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<i;)if(o=(e=r[a]).type)n[o]=Zk(n[o],e.name,t);else if(t==null)for(o in n)n[o]=Zk(n[o],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Xd(e)},call:function(e,t){if((o=arguments.length-2)>0)for(var n=new Array(o),r=0,o,a;r<o;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],r=0,o=a.length;r<o;++r)a[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],o=0,a=r.length;o<a;++o)r[o].value.apply(t,n)}};function NK(e,t){for(var n=0,r=e.length,o;n<r;++n)if((o=e[n]).name===t)return o.value}function Zk(e,t,n){for(var r=0,o=e.length;r<o;++r)if(e[r].name===t){e[r]=OK,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var q0="http://www.w3.org/1999/xhtml";const eA={svg:"http://www.w3.org/2000/svg",xhtml:q0,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Gd(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),eA.hasOwnProperty(t)?{space:eA[t],local:e}:e}function PK(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===q0&&t.documentElement.namespaceURI===q0?t.createElement(e):t.createElementNS(n,e)}}function kK(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function tA(e){var t=Gd(e);return(t.local?kK:PK)(t)}function AK(){}function Y0(e){return e==null?AK:function(){return this.querySelector(e)}}function TK(e){typeof e!="function"&&(e=Y0(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var a=t[o],i=a.length,s=r[o]=new Array(i),c,l,u=0;u<i;++u)(c=a[u])&&(l=e.call(c,c.__data__,u,a))&&("__data__"in c&&(l.__data__=c.__data__),s[u]=l);return new Tn(r,this._parents)}function RK(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function IK(){return[]}function nA(e){return e==null?IK:function(){return this.querySelectorAll(e)}}function DK(e){return function(){return RK(e.apply(this,arguments))}}function LK(e){typeof e=="function"?e=DK(e):e=nA(e);for(var t=this._groups,n=t.length,r=[],o=[],a=0;a<n;++a)for(var i=t[a],s=i.length,c,l=0;l<s;++l)(c=i[l])&&(r.push(e.call(c,c.__data__,l,i)),o.push(c));return new Tn(r,o)}function rA(e){return function(){return this.matches(e)}}function oA(e){return function(t){return t.matches(e)}}var FK=Array.prototype.find;function BK(e){return function(){return FK.call(this.children,e)}}function $K(){return this.firstElementChild}function zK(e){return this.select(e==null?$K:BK(typeof e=="function"?e:oA(e)))}var VK=Array.prototype.filter;function UK(){return Array.from(this.children)}function HK(e){return function(){return VK.call(this.children,e)}}function WK(e){return this.selectAll(e==null?UK:HK(typeof e=="function"?e:oA(e)))}function qK(e){typeof e!="function"&&(e=rA(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var a=t[o],i=a.length,s=r[o]=[],c,l=0;l<i;++l)(c=a[l])&&e.call(c,c.__data__,l,a)&&s.push(c);return new Tn(r,this._parents)}function aA(e){return new Array(e.length)}function YK(){return new Tn(this._enter||this._groups.map(aA),this._parents)}function Qd(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Qd.prototype={constructor:Qd,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function KK(e){return function(){return e}}function XK(e,t,n,r,o,a){for(var i=0,s,c=t.length,l=a.length;i<l;++i)(s=t[i])?(s.__data__=a[i],r[i]=s):n[i]=new Qd(e,a[i]);for(;i<c;++i)(s=t[i])&&(o[i]=s)}function GK(e,t,n,r,o,a,i){var s,c,l=new Map,u=t.length,d=a.length,f=new Array(u),p;for(s=0;s<u;++s)(c=t[s])&&(f[s]=p=i.call(c,c.__data__,s,t)+"",l.has(p)?o[s]=c:l.set(p,c));for(s=0;s<d;++s)p=i.call(e,a[s],s,a)+"",(c=l.get(p))?(r[s]=c,c.__data__=a[s],l.delete(p)):n[s]=new Qd(e,a[s]);for(s=0;s<u;++s)(c=t[s])&&l.get(f[s])===c&&(o[s]=c)}function QK(e){return e.__data__}function JK(e,t){if(!arguments.length)return Array.from(this,QK);var n=t?GK:XK,r=this._parents,o=this._groups;typeof e!="function"&&(e=KK(e));for(var a=o.length,i=new Array(a),s=new Array(a),c=new Array(a),l=0;l<a;++l){var u=r[l],d=o[l],f=d.length,p=ZK(e.call(u,u&&u.__data__,l,r)),y=p.length,m=s[l]=new Array(y),v=i[l]=new Array(y),b=c[l]=new Array(f);n(u,d,m,v,b,p,t);for(var x=0,j=0,w,_;x<y;++x)if(w=m[x]){for(x>=j&&(j=x+1);!(_=v[j])&&++j<y;);w._next=_||null}}return i=new Tn(i,r),i._enter=s,i._exit=c,i}function ZK(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function eX(){return new Tn(this._exit||this._groups.map(aA),this._parents)}function tX(e,t,n){var r=this.enter(),o=this,a=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(o=t(o),o&&(o=o.selection())),n==null?a.remove():n(a),r&&o?r.merge(o).order():o}function nX(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,o=n.length,a=r.length,i=Math.min(o,a),s=new Array(o),c=0;c<i;++c)for(var l=n[c],u=r[c],d=l.length,f=s[c]=new Array(d),p,y=0;y<d;++y)(p=l[y]||u[y])&&(f[y]=p);for(;c<o;++c)s[c]=n[c];return new Tn(s,this._parents)}function rX(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],o=r.length-1,a=r[o],i;--o>=0;)(i=r[o])&&(a&&i.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(i,a),a=i);return this}function oX(e){e||(e=aX);function t(d,f){return d&&f?e(d.__data__,f.__data__):!d-!f}for(var n=this._groups,r=n.length,o=new Array(r),a=0;a<r;++a){for(var i=n[a],s=i.length,c=o[a]=new Array(s),l,u=0;u<s;++u)(l=i[u])&&(c[u]=l);c.sort(t)}return new Tn(o,this._parents).order()}function aX(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function iX(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function sX(){return Array.from(this)}function cX(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,a=r.length;o<a;++o){var i=r[o];if(i)return i}return null}function lX(){let e=0;for(const t of this)++e;return e}function uX(){return!this.node()}function dX(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var o=t[n],a=0,i=o.length,s;a<i;++a)(s=o[a])&&e.call(s,s.__data__,a,o);return this}function fX(e){return function(){this.removeAttribute(e)}}function pX(e){return function(){this.removeAttributeNS(e.space,e.local)}}function hX(e,t){return function(){this.setAttribute(e,t)}}function mX(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function yX(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function gX(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function vX(e,t){var n=Gd(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?pX:fX:typeof t=="function"?n.local?gX:yX:n.local?mX:hX)(n,t))}function iA(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function bX(e){return function(){this.style.removeProperty(e)}}function xX(e,t,n){return function(){this.style.setProperty(e,t,n)}}function wX(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function _X(e,t,n){return arguments.length>1?this.each((t==null?bX:typeof t=="function"?wX:xX)(e,t,n??"")):ki(this.node(),e)}function ki(e,t){return e.style.getPropertyValue(t)||iA(e).getComputedStyle(e,null).getPropertyValue(t)}function jX(e){return function(){delete this[e]}}function EX(e,t){return function(){this[e]=t}}function SX(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function CX(e,t){return arguments.length>1?this.each((t==null?jX:typeof t=="function"?SX:EX)(e,t)):this.node()[e]}function sA(e){return e.trim().split(/^|\s+/)}function K0(e){return e.classList||new cA(e)}function cA(e){this._node=e,this._names=sA(e.getAttribute("class")||"")}cA.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function lA(e,t){for(var n=K0(e),r=-1,o=t.length;++r<o;)n.add(t[r])}function uA(e,t){for(var n=K0(e),r=-1,o=t.length;++r<o;)n.remove(t[r])}function OX(e){return function(){lA(this,e)}}function MX(e){return function(){uA(this,e)}}function NX(e,t){return function(){(t.apply(this,arguments)?lA:uA)(this,e)}}function PX(e,t){var n=sA(e+"");if(arguments.length<2){for(var r=K0(this.node()),o=-1,a=n.length;++o<a;)if(!r.contains(n[o]))return!1;return!0}return this.each((typeof t=="function"?NX:t?OX:MX)(n,t))}function kX(){this.textContent=""}function AX(e){return function(){this.textContent=e}}function TX(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function RX(e){return arguments.length?this.each(e==null?kX:(typeof e=="function"?TX:AX)(e)):this.node().textContent}function IX(){this.innerHTML=""}function DX(e){return function(){this.innerHTML=e}}function LX(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function FX(e){return arguments.length?this.each(e==null?IX:(typeof e=="function"?LX:DX)(e)):this.node().innerHTML}function BX(){this.nextSibling&&this.parentNode.appendChild(this)}function $X(){return this.each(BX)}function zX(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function VX(){return this.each(zX)}function UX(e){var t=typeof e=="function"?e:tA(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function HX(){return null}function WX(e,t){var n=typeof e=="function"?e:tA(e),r=t==null?HX:typeof t=="function"?t:Y0(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function qX(){var e=this.parentNode;e&&e.removeChild(this)}function YX(){return this.each(qX)}function KX(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function XX(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function GX(e){return this.select(e?XX:KX)}function QX(e){return arguments.length?this.property("__data__",e):this.node().__data__}function JX(e){return function(t){e.call(this,t,this.__data__)}}function ZX(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function eG(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,o=t.length,a;n<o;++n)a=t[n],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++r]=a;++r?t.length=r:delete this.__on}}}function tG(e,t,n){return function(){var r=this.__on,o,a=JX(t);if(r){for(var i=0,s=r.length;i<s;++i)if((o=r[i]).type===e.type&&o.name===e.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=a,o.options=n),o.value=t;return}}this.addEventListener(e.type,a,n),o={type:e.type,name:e.name,value:t,listener:a,options:n},r?r.push(o):this.__on=[o]}}function nG(e,t,n){var r=ZX(e+""),o,a=r.length,i;if(arguments.length<2){var s=this.node().__on;if(s){for(var c=0,l=s.length,u;c<l;++c)for(o=0,u=s[c];o<a;++o)if((i=r[o]).type===u.type&&i.name===u.name)return u.value}return}for(s=t?tG:eG,o=0;o<a;++o)this.each(s(r[o],t,n));return this}function dA(e,t,n){var r=iA(e),o=r.CustomEvent;typeof o=="function"?o=new o(t,n):(o=r.document.createEvent("Event"),n?(o.initEvent(t,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}function rG(e,t){return function(){return dA(this,e,t)}}function oG(e,t){return function(){return dA(this,e,t.apply(this,arguments))}}function aG(e,t){return this.each((typeof t=="function"?oG:rG)(e,t))}function*iG(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,a=r.length,i;o<a;++o)(i=r[o])&&(yield i)}var fA=[null];function Tn(e,t){this._groups=e,this._parents=t}function Wc(){return new Tn([[document.documentElement]],fA)}function sG(){return this}Tn.prototype=Wc.prototype={constructor:Tn,select:TK,selectAll:LK,selectChild:zK,selectChildren:WK,filter:qK,data:JK,enter:YK,exit:eX,join:tX,merge:nX,selection:sG,order:rX,sort:oX,call:iX,nodes:sX,node:cX,size:lX,empty:uX,each:dX,attr:vX,style:_X,property:CX,classed:PX,text:RX,html:FX,raise:$X,lower:VX,append:UX,insert:WX,remove:YX,clone:GX,datum:QX,on:nG,dispatch:aG,[Symbol.iterator]:iG};function Rn(e){return typeof e=="string"?new Tn([[document.querySelector(e)]],[document.documentElement]):new Tn([[e]],fA)}function cG(e){let t;for(;t=e.sourceEvent;)e=t;return e}function ur(e,t){if(e=cG(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}}return[e.pageX,e.pageY]}const lG={passive:!1},qc={capture:!0,passive:!1};function X0(e){e.stopImmediatePropagation()}function Ai(e){e.preventDefault(),e.stopImmediatePropagation()}function pA(e){var t=e.document.documentElement,n=Rn(e).on("dragstart.drag",Ai,qc);"onselectstart"in t?n.on("selectstart.drag",Ai,qc):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function hA(e,t){var n=e.document.documentElement,r=Rn(e).on("dragstart.drag",null);t&&(r.on("click.drag",Ai,qc),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Jd=e=>()=>e;function G0(e,{sourceEvent:t,subject:n,target:r,identifier:o,active:a,x:i,y:s,dx:c,dy:l,dispatch:u}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:i,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:l,enumerable:!0,configurable:!0},_:{value:u}})}G0.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function uG(e){return!e.ctrlKey&&!e.button}function dG(){return this.parentNode}function fG(e,t){return t??{x:e.x,y:e.y}}function pG(){return navigator.maxTouchPoints||"ontouchstart"in this}function mA(){var e=uG,t=dG,n=fG,r=pG,o={},a=Kd("start","drag","end"),i=0,s,c,l,u,d=0;function f(w){w.on("mousedown.drag",p).filter(r).on("touchstart.drag",v).on("touchmove.drag",b,lG).on("touchend.drag touchcancel.drag",x).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(w,_){if(!(u||!e.call(this,w,_))){var E=j(this,t.call(this,w,_),w,_,"mouse");E&&(Rn(w.view).on("mousemove.drag",y,qc).on("mouseup.drag",m,qc),pA(w.view),X0(w),l=!1,s=w.clientX,c=w.clientY,E("start",w))}}function y(w){if(Ai(w),!l){var _=w.clientX-s,E=w.clientY-c;l=_*_+E*E>d}o.mouse("drag",w)}function m(w){Rn(w.view).on("mousemove.drag mouseup.drag",null),hA(w.view,l),Ai(w),o.mouse("end",w)}function v(w,_){if(e.call(this,w,_)){var E=w.changedTouches,S=t.call(this,w,_),C=E.length,M,P;for(M=0;M<C;++M)(P=j(this,S,w,_,E[M].identifier,E[M]))&&(X0(w),P("start",w,E[M]))}}function b(w){var _=w.changedTouches,E=_.length,S,C;for(S=0;S<E;++S)(C=o[_[S].identifier])&&(Ai(w),C("drag",w,_[S]))}function x(w){var _=w.changedTouches,E=_.length,S,C;for(u&&clearTimeout(u),u=setTimeout(function(){u=null},500),S=0;S<E;++S)(C=o[_[S].identifier])&&(X0(w),C("end",w,_[S]))}function j(w,_,E,S,C,M){var P=a.copy(),N=ur(M||E,_),R,A,O;if((O=n.call(w,new G0("beforestart",{sourceEvent:E,target:f,identifier:C,active:i,x:N[0],y:N[1],dx:0,dy:0,dispatch:P}),S))!=null)return R=O.x-N[0]||0,A=O.y-N[1]||0,function k(T,I,L){var D=N,z;switch(T){case"start":o[C]=k,z=i++;break;case"end":delete o[C],--i;case"drag":N=ur(L||I,_),z=i;break}P.call(T,w,new G0(T,{sourceEvent:I,subject:O,target:f,identifier:C,active:z,x:N[0]+R,y:N[1]+A,dx:N[0]-D[0],dy:N[1]-D[1],dispatch:P}),S)}}return f.filter=function(w){return arguments.length?(e=typeof w=="function"?w:Jd(!!w),f):e},f.container=function(w){return arguments.length?(t=typeof w=="function"?w:Jd(w),f):t},f.subject=function(w){return arguments.length?(n=typeof w=="function"?w:Jd(w),f):n},f.touchable=function(w){return arguments.length?(r=typeof w=="function"?w:Jd(!!w),f):r},f.on=function(){var w=a.on.apply(a,arguments);return w===a?f:w},f.clickDistance=function(w){return arguments.length?(d=(w=+w)*w,f):Math.sqrt(d)},f}function Q0(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function yA(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Yc(){}var Kc=.7,Zd=1/Kc,Ti="\\s*([+-]?\\d+)\\s*",Xc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Nr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",hG=/^#([0-9a-f]{3,8})$/,mG=new RegExp(`^rgb\\(${Ti},${Ti},${Ti}\\)$`),yG=new RegExp(`^rgb\\(${Nr},${Nr},${Nr}\\)$`),gG=new RegExp(`^rgba\\(${Ti},${Ti},${Ti},${Xc}\\)$`),vG=new RegExp(`^rgba\\(${Nr},${Nr},${Nr},${Xc}\\)$`),bG=new RegExp(`^hsl\\(${Xc},${Nr},${Nr}\\)$`),xG=new RegExp(`^hsla\\(${Xc},${Nr},${Nr},${Xc}\\)$`),gA={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Q0(Yc,wa,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:vA,formatHex:vA,formatHex8:wG,formatHsl:_G,formatRgb:bA,toString:bA});function vA(){return this.rgb().formatHex()}function wG(){return this.rgb().formatHex8()}function _G(){return EA(this).formatHsl()}function bA(){return this.rgb().formatRgb()}function wa(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=hG.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?xA(t):n===3?new bn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?ef(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?ef(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=mG.exec(e))?new bn(t[1],t[2],t[3],1):(t=yG.exec(e))?new bn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=gG.exec(e))?ef(t[1],t[2],t[3],t[4]):(t=vG.exec(e))?ef(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=bG.exec(e))?jA(t[1],t[2]/100,t[3]/100,1):(t=xG.exec(e))?jA(t[1],t[2]/100,t[3]/100,t[4]):gA.hasOwnProperty(e)?xA(gA[e]):e==="transparent"?new bn(NaN,NaN,NaN,0):null}function xA(e){return new bn(e>>16&255,e>>8&255,e&255,1)}function ef(e,t,n,r){return r<=0&&(e=t=n=NaN),new bn(e,t,n,r)}function jG(e){return e instanceof Yc||(e=wa(e)),e?(e=e.rgb(),new bn(e.r,e.g,e.b,e.opacity)):new bn}function J0(e,t,n,r){return arguments.length===1?jG(e):new bn(e,t,n,r??1)}function bn(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Q0(bn,J0,yA(Yc,{brighter(e){return e=e==null?Zd:Math.pow(Zd,e),new bn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Kc:Math.pow(Kc,e),new bn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new bn(_a(this.r),_a(this.g),_a(this.b),tf(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:wA,formatHex:wA,formatHex8:EG,formatRgb:_A,toString:_A}));function wA(){return`#${ja(this.r)}${ja(this.g)}${ja(this.b)}`}function EG(){return`#${ja(this.r)}${ja(this.g)}${ja(this.b)}${ja((isNaN(this.opacity)?1:this.opacity)*255)}`}function _A(){const e=tf(this.opacity);return`${e===1?"rgb(":"rgba("}${_a(this.r)}, ${_a(this.g)}, ${_a(this.b)}${e===1?")":`, ${e})`}`}function tf(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function _a(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ja(e){return e=_a(e),(e<16?"0":"")+e.toString(16)}function jA(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new dr(e,t,n,r)}function EA(e){if(e instanceof dr)return new dr(e.h,e.s,e.l,e.opacity);if(e instanceof Yc||(e=wa(e)),!e)return new dr;if(e instanceof dr)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,o=Math.min(t,n,r),a=Math.max(t,n,r),i=NaN,s=a-o,c=(a+o)/2;return s?(t===a?i=(n-r)/s+(n<r)*6:n===a?i=(r-t)/s+2:i=(t-n)/s+4,s/=c<.5?a+o:2-a-o,i*=60):s=c>0&&c<1?0:i,new dr(i,s,c,e.opacity)}function SG(e,t,n,r){return arguments.length===1?EA(e):new dr(e,t,n,r??1)}function dr(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Q0(dr,SG,yA(Yc,{brighter(e){return e=e==null?Zd:Math.pow(Zd,e),new dr(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Kc:Math.pow(Kc,e),new dr(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,o=2*n-r;return new bn(Z0(e>=240?e-240:e+120,o,r),Z0(e,o,r),Z0(e<120?e+240:e-120,o,r),this.opacity)},clamp(){return new dr(SA(this.h),nf(this.s),nf(this.l),tf(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=tf(this.opacity);return`${e===1?"hsl(":"hsla("}${SA(this.h)}, ${nf(this.s)*100}%, ${nf(this.l)*100}%${e===1?")":`, ${e})`}`}}));function SA(e){return e=(e||0)%360,e<0?e+360:e}function nf(e){return Math.max(0,Math.min(1,e||0))}function Z0(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const eb=e=>()=>e;function CG(e,t){return function(n){return e+n*t}}function OG(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function MG(e){return(e=+e)==1?CA:function(t,n){return n-t?OG(t,n,e):eb(isNaN(t)?n:t)}}function CA(e,t){var n=t-e;return n?CG(e,n):eb(isNaN(e)?t:e)}const rf=function e(t){var n=MG(t);function r(o,a){var i=n((o=J0(o)).r,(a=J0(a)).r),s=n(o.g,a.g),c=n(o.b,a.b),l=CA(o.opacity,a.opacity);return function(u){return o.r=i(u),o.g=s(u),o.b=c(u),o.opacity=l(u),o+""}}return r.gamma=e,r}(1);function NG(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),o;return function(a){for(o=0;o<n;++o)r[o]=e[o]*(1-a)+t[o]*a;return r}}function PG(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function kG(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,o=new Array(r),a=new Array(n),i;for(i=0;i<r;++i)o[i]=Ri(e[i],t[i]);for(;i<n;++i)a[i]=t[i];return function(s){for(i=0;i<r;++i)a[i]=o[i](s);return a}}function AG(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function fr(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function TG(e,t){var n={},r={},o;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(o in t)o in e?n[o]=Ri(e[o],t[o]):r[o]=t[o];return function(a){for(o in n)r[o]=n[o](a);return r}}var tb=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,nb=new RegExp(tb.source,"g");function RG(e){return function(){return e}}function IG(e){return function(t){return e(t)+""}}function OA(e,t){var n=tb.lastIndex=nb.lastIndex=0,r,o,a,i=-1,s=[],c=[];for(e=e+"",t=t+"";(r=tb.exec(e))&&(o=nb.exec(t));)(a=o.index)>n&&(a=t.slice(n,a),s[i]?s[i]+=a:s[++i]=a),(r=r[0])===(o=o[0])?s[i]?s[i]+=o:s[++i]=o:(s[++i]=null,c.push({i,x:fr(r,o)})),n=nb.lastIndex;return n<t.length&&(a=t.slice(n),s[i]?s[i]+=a:s[++i]=a),s.length<2?c[0]?IG(c[0].x):RG(t):(t=c.length,function(l){for(var u=0,d;u<t;++u)s[(d=c[u]).i]=d.x(l);return s.join("")})}function Ri(e,t){var n=typeof t,r;return t==null||n==="boolean"?eb(t):(n==="number"?fr:n==="string"?(r=wa(t))?(t=r,rf):OA:t instanceof wa?rf:t instanceof Date?AG:PG(t)?NG:Array.isArray(t)?kG:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?TG:fr)(e,t)}function rb(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var MA=180/Math.PI,NA={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function PA(e,t,n,r,o,a){var i,s,c;return(i=Math.sqrt(e*e+t*t))&&(e/=i,t/=i),(c=e*n+t*r)&&(n-=e*c,r-=t*c),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,c/=s),e*r<t*n&&(e=-e,t=-t,c=-c,i=-i),{translateX:o,translateY:a,rotate:Math.atan2(t,e)*MA,skewX:Math.atan(c)*MA,scaleX:i,scaleY:s}}var of;function DG(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?NA:PA(t.a,t.b,t.c,t.d,t.e,t.f)}function LG(e){return e==null||(of||(of=document.createElementNS("http://www.w3.org/2000/svg","g")),of.setAttribute("transform",e),!(e=of.transform.baseVal.consolidate()))?NA:(e=e.matrix,PA(e.a,e.b,e.c,e.d,e.e,e.f))}function kA(e,t,n,r){function o(l){return l.length?l.pop()+" ":""}function a(l,u,d,f,p,y){if(l!==d||u!==f){var m=p.push("translate(",null,t,null,n);y.push({i:m-4,x:fr(l,d)},{i:m-2,x:fr(u,f)})}else(d||f)&&p.push("translate("+d+t+f+n)}function i(l,u,d,f){l!==u?(l-u>180?u+=360:u-l>180&&(l+=360),f.push({i:d.push(o(d)+"rotate(",null,r)-2,x:fr(l,u)})):u&&d.push(o(d)+"rotate("+u+r)}function s(l,u,d,f){l!==u?f.push({i:d.push(o(d)+"skewX(",null,r)-2,x:fr(l,u)}):u&&d.push(o(d)+"skewX("+u+r)}function c(l,u,d,f,p,y){if(l!==d||u!==f){var m=p.push(o(p)+"scale(",null,",",null,")");y.push({i:m-4,x:fr(l,d)},{i:m-2,x:fr(u,f)})}else(d!==1||f!==1)&&p.push(o(p)+"scale("+d+","+f+")")}return function(l,u){var d=[],f=[];return l=e(l),u=e(u),a(l.translateX,l.translateY,u.translateX,u.translateY,d,f),i(l.rotate,u.rotate,d,f),s(l.skewX,u.skewX,d,f),c(l.scaleX,l.scaleY,u.scaleX,u.scaleY,d,f),l=u=null,function(p){for(var y=-1,m=f.length,v;++y<m;)d[(v=f[y]).i]=v.x(p);return d.join("")}}}var FG=kA(DG,"px, ","px)","deg)"),BG=kA(LG,", ",")",")"),$G=1e-12;function AA(e){return((e=Math.exp(e))+1/e)/2}function zG(e){return((e=Math.exp(e))-1/e)/2}function VG(e){return((e=Math.exp(2*e))-1)/(e+1)}const UG=function e(t,n,r){function o(a,i){var s=a[0],c=a[1],l=a[2],u=i[0],d=i[1],f=i[2],p=u-s,y=d-c,m=p*p+y*y,v,b;if(m<$G)b=Math.log(f/l)/t,v=function(S){return[s+S*p,c+S*y,l*Math.exp(t*S*b)]};else{var x=Math.sqrt(m),j=(f*f-l*l+r*m)/(2*l*n*x),w=(f*f-l*l-r*m)/(2*f*n*x),_=Math.log(Math.sqrt(j*j+1)-j),E=Math.log(Math.sqrt(w*w+1)-w);b=(E-_)/t,v=function(S){var C=S*b,M=AA(_),P=l/(n*x)*(M*VG(t*C+_)-zG(_));return[s+P*p,c+P*y,l*M/AA(t*C+_)]}}return v.duration=b*1e3*t/Math.SQRT2,v}return o.rho=function(a){var i=Math.max(.001,+a),s=i*i,c=s*s;return e(i,s,c)},o}(Math.SQRT2,2,4);function HG(e,t){t===void 0&&(t=e,e=Ri);for(var n=0,r=t.length-1,o=t[0],a=new Array(r<0?0:r);n<r;)a[n]=e(o,o=t[++n]);return function(i){var s=Math.max(0,Math.min(r-1,Math.floor(i*=r)));return a[s](i-s)}}var Ii=0,Gc=0,Qc=0,TA=1e3,af,Jc,sf=0,Ea=0,cf=0,Zc=typeof performance=="object"&&performance.now?performance:Date,RA=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function ob(){return Ea||(RA(WG),Ea=Zc.now()+cf)}function WG(){Ea=0}function lf(){this._call=this._time=this._next=null}lf.prototype=IA.prototype={constructor:lf,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?ob():+n)+(t==null?0:+t),!this._next&&Jc!==this&&(Jc?Jc._next=this:af=this,Jc=this),this._call=e,this._time=n,ab()},stop:function(){this._call&&(this._call=null,this._time=1/0,ab())}};function IA(e,t,n){var r=new lf;return r.restart(e,t,n),r}function qG(){ob(),++Ii;for(var e=af,t;e;)(t=Ea-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Ii}function DA(){Ea=(sf=Zc.now())+cf,Ii=Gc=0;try{qG()}finally{Ii=0,KG(),Ea=0}}function YG(){var e=Zc.now(),t=e-sf;t>TA&&(cf-=t,sf=e)}function KG(){for(var e,t=af,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:af=n);Jc=e,ab(r)}function ab(e){if(!Ii){Gc&&(Gc=clearTimeout(Gc));var t=e-Ea;t>24?(e<1/0&&(Gc=setTimeout(DA,e-Zc.now()-cf)),Qc&&(Qc=clearInterval(Qc))):(Qc||(sf=Zc.now(),Qc=setInterval(YG,TA)),Ii=1,RA(DA))}}function LA(e,t,n){var r=new lf;return t=t==null?0:+t,r.restart(o=>{r.stop(),e(o+t)},t,n),r}var XG=Kd("start","end","cancel","interrupt"),GG=[],FA=0,BA=1,ib=2,uf=3,$A=4,sb=5,df=6;function ff(e,t,n,r,o,a){var i=e.__transition;if(!i)e.__transition={};else if(n in i)return;QG(e,n,{name:t,index:r,group:o,on:XG,tween:GG,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:FA})}function cb(e,t){var n=pr(e,t);if(n.state>FA)throw new Error("too late; already scheduled");return n}function Pr(e,t){var n=pr(e,t);if(n.state>uf)throw new Error("too late; already running");return n}function pr(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function QG(e,t,n){var r=e.__transition,o;r[t]=n,n.timer=IA(a,0,n.time);function a(l){n.state=BA,n.timer.restart(i,n.delay,n.time),n.delay<=l&&i(l-n.delay)}function i(l){var u,d,f,p;if(n.state!==BA)return c();for(u in r)if(p=r[u],p.name===n.name){if(p.state===uf)return LA(i);p.state===$A?(p.state=df,p.timer.stop(),p.on.call("interrupt",e,e.__data__,p.index,p.group),delete r[u]):+u<t&&(p.state=df,p.timer.stop(),p.on.call("cancel",e,e.__data__,p.index,p.group),delete r[u])}if(LA(function(){n.state===uf&&(n.state=$A,n.timer.restart(s,n.delay,n.time),s(l))}),n.state=ib,n.on.call("start",e,e.__data__,n.index,n.group),n.state===ib){for(n.state=uf,o=new Array(f=n.tween.length),u=0,d=-1;u<f;++u)(p=n.tween[u].value.call(e,e.__data__,n.index,n.group))&&(o[++d]=p);o.length=d+1}}function s(l){for(var u=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(c),n.state=sb,1),d=-1,f=o.length;++d<f;)o[d].call(e,u);n.state===sb&&(n.on.call("end",e,e.__data__,n.index,n.group),c())}function c(){n.state=df,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function pf(e,t){var n=e.__transition,r,o,a=!0,i;if(n){t=t==null?null:t+"";for(i in n){if((r=n[i]).name!==t){a=!1;continue}o=r.state>ib&&r.state<sb,r.state=df,r.timer.stop(),r.on.call(o?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[i]}a&&delete e.__transition}}function JG(e){return this.each(function(){pf(this,e)})}function ZG(e,t){var n,r;return function(){var o=Pr(this,e),a=o.tween;if(a!==n){r=n=a;for(var i=0,s=r.length;i<s;++i)if(r[i].name===t){r=r.slice(),r.splice(i,1);break}}o.tween=r}}function eQ(e,t,n){var r,o;if(typeof n!="function")throw new Error;return function(){var a=Pr(this,e),i=a.tween;if(i!==r){o=(r=i).slice();for(var s={name:t,value:n},c=0,l=o.length;c<l;++c)if(o[c].name===t){o[c]=s;break}c===l&&o.push(s)}a.tween=o}}function tQ(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=pr(this.node(),n).tween,o=0,a=r.length,i;o<a;++o)if((i=r[o]).name===e)return i.value;return null}return this.each((t==null?ZG:eQ)(n,e,t))}function lb(e,t,n){var r=e._id;return e.each(function(){var o=Pr(this,r);(o.value||(o.value={}))[t]=n.apply(this,arguments)}),function(o){return pr(o,r).value[t]}}function zA(e,t){var n;return(typeof t=="number"?fr:t instanceof wa?rf:(n=wa(t))?(t=n,rf):OA)(e,t)}function nQ(e){return function(){this.removeAttribute(e)}}function rQ(e){return function(){this.removeAttributeNS(e.space,e.local)}}function oQ(e,t,n){var r,o=n+"",a;return function(){var i=this.getAttribute(e);return i===o?null:i===r?a:a=t(r=i,n)}}function aQ(e,t,n){var r,o=n+"",a;return function(){var i=this.getAttributeNS(e.space,e.local);return i===o?null:i===r?a:a=t(r=i,n)}}function iQ(e,t,n){var r,o,a;return function(){var i,s=n(this),c;return s==null?void this.removeAttribute(e):(i=this.getAttribute(e),c=s+"",i===c?null:i===r&&c===o?a:(o=c,a=t(r=i,s)))}}function sQ(e,t,n){var r,o,a;return function(){var i,s=n(this),c;return s==null?void this.removeAttributeNS(e.space,e.local):(i=this.getAttributeNS(e.space,e.local),c=s+"",i===c?null:i===r&&c===o?a:(o=c,a=t(r=i,s)))}}function cQ(e,t){var n=Gd(e),r=n==="transform"?BG:zA;return this.attrTween(e,typeof t=="function"?(n.local?sQ:iQ)(n,r,lb(this,"attr."+e,t)):t==null?(n.local?rQ:nQ)(n):(n.local?aQ:oQ)(n,r,t))}function lQ(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function uQ(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function dQ(e,t){var n,r;function o(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&uQ(e,a)),n}return o._value=t,o}function fQ(e,t){var n,r;function o(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&lQ(e,a)),n}return o._value=t,o}function pQ(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=Gd(e);return this.tween(n,(r.local?dQ:fQ)(r,t))}function hQ(e,t){return function(){cb(this,e).delay=+t.apply(this,arguments)}}function mQ(e,t){return t=+t,function(){cb(this,e).delay=t}}function yQ(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?hQ:mQ)(t,e)):pr(this.node(),t).delay}function gQ(e,t){return function(){Pr(this,e).duration=+t.apply(this,arguments)}}function vQ(e,t){return t=+t,function(){Pr(this,e).duration=t}}function bQ(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?gQ:vQ)(t,e)):pr(this.node(),t).duration}function xQ(e,t){if(typeof t!="function")throw new Error;return function(){Pr(this,e).ease=t}}function wQ(e){var t=this._id;return arguments.length?this.each(xQ(t,e)):pr(this.node(),t).ease}function _Q(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Pr(this,e).ease=n}}function jQ(e){if(typeof e!="function")throw new Error;return this.each(_Q(this._id,e))}function EQ(e){typeof e!="function"&&(e=rA(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var a=t[o],i=a.length,s=r[o]=[],c,l=0;l<i;++l)(c=a[l])&&e.call(c,c.__data__,l,a)&&s.push(c);return new lo(r,this._parents,this._name,this._id)}function SQ(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,o=n.length,a=Math.min(r,o),i=new Array(r),s=0;s<a;++s)for(var c=t[s],l=n[s],u=c.length,d=i[s]=new Array(u),f,p=0;p<u;++p)(f=c[p]||l[p])&&(d[p]=f);for(;s<r;++s)i[s]=t[s];return new lo(i,this._parents,this._name,this._id)}function CQ(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function OQ(e,t,n){var r,o,a=CQ(t)?cb:Pr;return function(){var i=a(this,e),s=i.on;s!==r&&(o=(r=s).copy()).on(t,n),i.on=o}}function MQ(e,t){var n=this._id;return arguments.length<2?pr(this.node(),n).on.on(e):this.each(OQ(n,e,t))}function NQ(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function PQ(){return this.on("end.remove",NQ(this._id))}function kQ(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Y0(e));for(var r=this._groups,o=r.length,a=new Array(o),i=0;i<o;++i)for(var s=r[i],c=s.length,l=a[i]=new Array(c),u,d,f=0;f<c;++f)(u=s[f])&&(d=e.call(u,u.__data__,f,s))&&("__data__"in u&&(d.__data__=u.__data__),l[f]=d,ff(l[f],t,n,f,l,pr(u,n)));return new lo(a,this._parents,t,n)}function AQ(e){var t=this._name,n=this._id;typeof e!="function"&&(e=nA(e));for(var r=this._groups,o=r.length,a=[],i=[],s=0;s<o;++s)for(var c=r[s],l=c.length,u,d=0;d<l;++d)if(u=c[d]){for(var f=e.call(u,u.__data__,d,c),p,y=pr(u,n),m=0,v=f.length;m<v;++m)(p=f[m])&&ff(p,t,n,m,f,y);a.push(f),i.push(u)}return new lo(a,i,t,n)}var TQ=Wc.prototype.constructor;function RQ(){return new TQ(this._groups,this._parents)}function IQ(e,t){var n,r,o;return function(){var a=ki(this,e),i=(this.style.removeProperty(e),ki(this,e));return a===i?null:a===n&&i===r?o:o=t(n=a,r=i)}}function VA(e){return function(){this.style.removeProperty(e)}}function DQ(e,t,n){var r,o=n+"",a;return function(){var i=ki(this,e);return i===o?null:i===r?a:a=t(r=i,n)}}function LQ(e,t,n){var r,o,a;return function(){var i=ki(this,e),s=n(this),c=s+"";return s==null&&(c=s=(this.style.removeProperty(e),ki(this,e))),i===c?null:i===r&&c===o?a:(o=c,a=t(r=i,s))}}function FQ(e,t){var n,r,o,a="style."+t,i="end."+a,s;return function(){var c=Pr(this,e),l=c.on,u=c.value[a]==null?s||(s=VA(t)):void 0;(l!==n||o!==u)&&(r=(n=l).copy()).on(i,o=u),c.on=r}}function BQ(e,t,n){var r=(e+="")=="transform"?FG:zA;return t==null?this.styleTween(e,IQ(e,r)).on("end.style."+e,VA(e)):typeof t=="function"?this.styleTween(e,LQ(e,r,lb(this,"style."+e,t))).each(FQ(this._id,e)):this.styleTween(e,DQ(e,r,t),n).on("end.style."+e,null)}function $Q(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function zQ(e,t,n){var r,o;function a(){var i=t.apply(this,arguments);return i!==o&&(r=(o=i)&&$Q(e,i,n)),r}return a._value=t,a}function VQ(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,zQ(e,t,n??""))}function UQ(e){return function(){this.textContent=e}}function HQ(e){return function(){var t=e(this);this.textContent=t??""}}function WQ(e){return this.tween("text",typeof e=="function"?HQ(lb(this,"text",e)):UQ(e==null?"":e+""))}function qQ(e){return function(t){this.textContent=e.call(this,t)}}function YQ(e){var t,n;function r(){var o=e.apply(this,arguments);return o!==n&&(t=(n=o)&&qQ(o)),t}return r._value=e,r}function KQ(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,YQ(e))}function XQ(){for(var e=this._name,t=this._id,n=UA(),r=this._groups,o=r.length,a=0;a<o;++a)for(var i=r[a],s=i.length,c,l=0;l<s;++l)if(c=i[l]){var u=pr(c,t);ff(c,e,n,l,i,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new lo(r,this._parents,e,n)}function GQ(){var e,t,n=this,r=n._id,o=n.size();return new Promise(function(a,i){var s={value:i},c={value:function(){--o===0&&a()}};n.each(function(){var l=Pr(this,r),u=l.on;u!==e&&(t=(e=u).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(c)),l.on=t}),o===0&&a()})}var QQ=0;function lo(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function UA(){return++QQ}var uo=Wc.prototype;lo.prototype={constructor:lo,select:kQ,selectAll:AQ,selectChild:uo.selectChild,selectChildren:uo.selectChildren,filter:EQ,merge:SQ,selection:RQ,transition:XQ,call:uo.call,nodes:uo.nodes,node:uo.node,size:uo.size,empty:uo.empty,each:uo.each,on:MQ,attr:cQ,attrTween:pQ,style:BQ,styleTween:VQ,text:WQ,textTween:KQ,remove:PQ,tween:tQ,delay:yQ,duration:bQ,ease:wQ,easeVarying:jQ,end:GQ,[Symbol.iterator]:uo[Symbol.iterator]};function JQ(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var ZQ={time:null,delay:0,duration:250,ease:JQ};function eJ(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function tJ(e){var t,n;e instanceof lo?(t=e._id,e=e._name):(t=UA(),(n=ZQ).time=ob(),e=e==null?null:e+"");for(var r=this._groups,o=r.length,a=0;a<o;++a)for(var i=r[a],s=i.length,c,l=0;l<s;++l)(c=i[l])&&ff(c,e,t,l,i,n||eJ(c,t));return new lo(r,this._parents,e,t)}Wc.prototype.interrupt=JG,Wc.prototype.transition=tJ;const hf=e=>()=>e;function nJ(e,{sourceEvent:t,target:n,transform:r,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:o}})}function fo(e,t,n){this.k=e,this.x=t,this.y=n}fo.prototype={constructor:fo,scale:function(e){return e===1?this:new fo(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new fo(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var mf=new fo(1,0,0);HA.prototype=fo.prototype;function HA(e){for(;!e.__zoom;)if(!(e=e.parentNode))return mf;return e.__zoom}function ub(e){e.stopImmediatePropagation()}function el(e){e.preventDefault(),e.stopImmediatePropagation()}function rJ(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function oJ(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function WA(){return this.__zoom||mf}function aJ(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function iJ(){return navigator.maxTouchPoints||"ontouchstart"in this}function sJ(e,t,n){var r=e.invertX(t[0][0])-n[0][0],o=e.invertX(t[1][0])-n[1][0],a=e.invertY(t[0][1])-n[0][1],i=e.invertY(t[1][1])-n[1][1];return e.translate(o>r?(r+o)/2:Math.min(0,r)||Math.max(0,o),i>a?(a+i)/2:Math.min(0,a)||Math.max(0,i))}function qA(){var e=rJ,t=oJ,n=sJ,r=aJ,o=iJ,a=[0,1/0],i=[[-1/0,-1/0],[1/0,1/0]],s=250,c=UG,l=Kd("start","zoom","end"),u,d,f,p=500,y=150,m=0,v=10;function b(O){O.property("__zoom",WA).on("wheel.zoom",C,{passive:!1}).on("mousedown.zoom",M).on("dblclick.zoom",P).filter(o).on("touchstart.zoom",N).on("touchmove.zoom",R).on("touchend.zoom touchcancel.zoom",A).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}b.transform=function(O,k,T,I){var L=O.selection?O.selection():O;L.property("__zoom",WA),O!==L?_(O,k,T,I):L.interrupt().each(function(){E(this,arguments).event(I).start().zoom(null,typeof k=="function"?k.apply(this,arguments):k).end()})},b.scaleBy=function(O,k,T,I){b.scaleTo(O,function(){var L=this.__zoom.k,D=typeof k=="function"?k.apply(this,arguments):k;return L*D},T,I)},b.scaleTo=function(O,k,T,I){b.transform(O,function(){var L=t.apply(this,arguments),D=this.__zoom,z=T==null?w(L):typeof T=="function"?T.apply(this,arguments):T,H=D.invert(z),F=typeof k=="function"?k.apply(this,arguments):k;return n(j(x(D,F),z,H),L,i)},T,I)},b.translateBy=function(O,k,T,I){b.transform(O,function(){return n(this.__zoom.translate(typeof k=="function"?k.apply(this,arguments):k,typeof T=="function"?T.apply(this,arguments):T),t.apply(this,arguments),i)},null,I)},b.translateTo=function(O,k,T,I,L){b.transform(O,function(){var D=t.apply(this,arguments),z=this.__zoom,H=I==null?w(D):typeof I=="function"?I.apply(this,arguments):I;return n(mf.translate(H[0],H[1]).scale(z.k).translate(typeof k=="function"?-k.apply(this,arguments):-k,typeof T=="function"?-T.apply(this,arguments):-T),D,i)},I,L)};function x(O,k){return k=Math.max(a[0],Math.min(a[1],k)),k===O.k?O:new fo(k,O.x,O.y)}function j(O,k,T){var I=k[0]-T[0]*O.k,L=k[1]-T[1]*O.k;return I===O.x&&L===O.y?O:new fo(O.k,I,L)}function w(O){return[(+O[0][0]+ +O[1][0])/2,(+O[0][1]+ +O[1][1])/2]}function _(O,k,T,I){O.on("start.zoom",function(){E(this,arguments).event(I).start()}).on("interrupt.zoom end.zoom",function(){E(this,arguments).event(I).end()}).tween("zoom",function(){var L=this,D=arguments,z=E(L,D).event(I),H=t.apply(L,D),F=T==null?w(H):typeof T=="function"?T.apply(L,D):T,U=Math.max(H[1][0]-H[0][0],H[1][1]-H[0][1]),Y=L.__zoom,G=typeof k=="function"?k.apply(L,D):k,re=c(Y.invert(F).concat(U/Y.k),G.invert(F).concat(U/G.k));return function(Z){if(Z===1)Z=G;else{var q=re(Z),W=U/q[2];Z=new fo(W,F[0]-q[0]*W,F[1]-q[1]*W)}z.zoom(null,Z)}})}function E(O,k,T){return!T&&O.__zooming||new S(O,k)}function S(O,k){this.that=O,this.args=k,this.active=0,this.sourceEvent=null,this.extent=t.apply(O,k),this.taps=0}S.prototype={event:function(O){return O&&(this.sourceEvent=O),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(O,k){return this.mouse&&O!=="mouse"&&(this.mouse[1]=k.invert(this.mouse[0])),this.touch0&&O!=="touch"&&(this.touch0[1]=k.invert(this.touch0[0])),this.touch1&&O!=="touch"&&(this.touch1[1]=k.invert(this.touch1[0])),this.that.__zoom=k,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(O){var k=Rn(this.that).datum();l.call(O,this.that,new nJ(O,{sourceEvent:this.sourceEvent,target:b,type:O,transform:this.that.__zoom,dispatch:l}),k)}};function C(O,...k){if(!e.apply(this,arguments))return;var T=E(this,k).event(O),I=this.__zoom,L=Math.max(a[0],Math.min(a[1],I.k*Math.pow(2,r.apply(this,arguments)))),D=ur(O);if(T.wheel)(T.mouse[0][0]!==D[0]||T.mouse[0][1]!==D[1])&&(T.mouse[1]=I.invert(T.mouse[0]=D)),clearTimeout(T.wheel);else{if(I.k===L)return;T.mouse=[D,I.invert(D)],pf(this),T.start()}el(O),T.wheel=setTimeout(z,y),T.zoom("mouse",n(j(x(I,L),T.mouse[0],T.mouse[1]),T.extent,i));function z(){T.wheel=null,T.end()}}function M(O,...k){if(f||!e.apply(this,arguments))return;var T=O.currentTarget,I=E(this,k,!0).event(O),L=Rn(O.view).on("mousemove.zoom",F,!0).on("mouseup.zoom",U,!0),D=ur(O,T),z=O.clientX,H=O.clientY;pA(O.view),ub(O),I.mouse=[D,this.__zoom.invert(D)],pf(this),I.start();function F(Y){if(el(Y),!I.moved){var G=Y.clientX-z,re=Y.clientY-H;I.moved=G*G+re*re>m}I.event(Y).zoom("mouse",n(j(I.that.__zoom,I.mouse[0]=ur(Y,T),I.mouse[1]),I.extent,i))}function U(Y){L.on("mousemove.zoom mouseup.zoom",null),hA(Y.view,I.moved),el(Y),I.event(Y).end()}}function P(O,...k){if(e.apply(this,arguments)){var T=this.__zoom,I=ur(O.changedTouches?O.changedTouches[0]:O,this),L=T.invert(I),D=T.k*(O.shiftKey?.5:2),z=n(j(x(T,D),I,L),t.apply(this,k),i);el(O),s>0?Rn(this).transition().duration(s).call(_,z,I,O):Rn(this).call(b.transform,z,I,O)}}function N(O,...k){if(e.apply(this,arguments)){var T=O.touches,I=T.length,L=E(this,k,O.changedTouches.length===I).event(O),D,z,H,F;for(ub(O),z=0;z<I;++z)H=T[z],F=ur(H,this),F=[F,this.__zoom.invert(F),H.identifier],L.touch0?!L.touch1&&L.touch0[2]!==F[2]&&(L.touch1=F,L.taps=0):(L.touch0=F,D=!0,L.taps=1+!!u);u&&(u=clearTimeout(u)),D&&(L.taps<2&&(d=F[0],u=setTimeout(function(){u=null},p)),pf(this),L.start())}}function R(O,...k){if(this.__zooming){var T=E(this,k).event(O),I=O.changedTouches,L=I.length,D,z,H,F;for(el(O),D=0;D<L;++D)z=I[D],H=ur(z,this),T.touch0&&T.touch0[2]===z.identifier?T.touch0[0]=H:T.touch1&&T.touch1[2]===z.identifier&&(T.touch1[0]=H);if(z=T.that.__zoom,T.touch1){var U=T.touch0[0],Y=T.touch0[1],G=T.touch1[0],re=T.touch1[1],Z=(Z=G[0]-U[0])*Z+(Z=G[1]-U[1])*Z,q=(q=re[0]-Y[0])*q+(q=re[1]-Y[1])*q;z=x(z,Math.sqrt(Z/q)),H=[(U[0]+G[0])/2,(U[1]+G[1])/2],F=[(Y[0]+re[0])/2,(Y[1]+re[1])/2]}else if(T.touch0)H=T.touch0[0],F=T.touch0[1];else return;T.zoom("touch",n(j(z,H,F),T.extent,i))}}function A(O,...k){if(this.__zooming){var T=E(this,k).event(O),I=O.changedTouches,L=I.length,D,z;for(ub(O),f&&clearTimeout(f),f=setTimeout(function(){f=null},p),D=0;D<L;++D)z=I[D],T.touch0&&T.touch0[2]===z.identifier?delete T.touch0:T.touch1&&T.touch1[2]===z.identifier&&delete T.touch1;if(T.touch1&&!T.touch0&&(T.touch0=T.touch1,delete T.touch1),T.touch0)T.touch0[1]=this.__zoom.invert(T.touch0[0]);else if(T.end(),T.taps===2&&(z=ur(z,this),Math.hypot(d[0]-z[0],d[1]-z[1])<v)){var H=Rn(this).on("dblclick.zoom");H&&H.apply(this,arguments)}}}return b.wheelDelta=function(O){return arguments.length?(r=typeof O=="function"?O:hf(+O),b):r},b.filter=function(O){return arguments.length?(e=typeof O=="function"?O:hf(!!O),b):e},b.touchable=function(O){return arguments.length?(o=typeof O=="function"?O:hf(!!O),b):o},b.extent=function(O){return arguments.length?(t=typeof O=="function"?O:hf([[+O[0][0],+O[0][1]],[+O[1][0],+O[1][1]]]),b):t},b.scaleExtent=function(O){return arguments.length?(a[0]=+O[0],a[1]=+O[1],b):[a[0],a[1]]},b.translateExtent=function(O){return arguments.length?(i[0][0]=+O[0][0],i[1][0]=+O[1][0],i[0][1]=+O[0][1],i[1][1]=+O[1][1],b):[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},b.constrain=function(O){return arguments.length?(n=O,b):n},b.duration=function(O){return arguments.length?(s=+O,b):s},b.interpolate=function(O){return arguments.length?(c=O,b):c},b.on=function(){var O=l.on.apply(l,arguments);return O===l?b:O},b.clickDistance=function(O){return arguments.length?(m=(O=+O)*O,b):Math.sqrt(m)},b.tapDistance=function(O){return arguments.length?(v=+O,b):v},b}const po={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:n,targetHandle:r})=>`Couldn't create edge for ${e} handle id: "${e==="source"?n:r}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`},tl=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],YA=["Enter"," ","Escape"];var Di;(function(e){e.Strict="strict",e.Loose="loose"})(Di||(Di={}));var Ho;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Ho||(Ho={}));var nl;(function(e){e.Partial="partial",e.Full="full"})(nl||(nl={}));const KA={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var Wo;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Wo||(Wo={}));var yf;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(yf||(yf={}));var fe;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(fe||(fe={}));const XA={[fe.Left]:fe.Right,[fe.Right]:fe.Left,[fe.Top]:fe.Bottom,[fe.Bottom]:fe.Top};function cJ(e,t){if(!e&&!t)return!0;if(!e||!t||e.size!==t.size)return!1;if(!e.size&&!t.size)return!0;for(const n of e.keys())if(!t.has(n))return!1;return!0}function GA(e,t,n){if(!n)return;const r=[];e.forEach((o,a)=>{t!=null&&t.has(a)||r.push(o)}),r.length&&n(r)}function QA(e){return e===null?null:e?"valid":"invalid"}const JA=e=>"id"in e&&"source"in e&&"target"in e,lJ=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),db=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),rl=(e,t=[0,0])=>{const{width:n,height:r}=ho(e),o=e.origin??t,a=n*o[0],i=r*o[1];return{x:e.position.x-a,y:e.position.y-i}},uJ=(e,t={nodeOrigin:[0,0],nodeLookup:void 0})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,o)=>{const a=typeof o=="string";let i=!t.nodeLookup&&!a?o:void 0;t.nodeLookup&&(i=a?t.nodeLookup.get(o):db(o)?o:t.nodeLookup.get(o.id));const s=i?bf(i,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return gf(r,s)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return vf(n)},ol=(e,t={})=>{if(e.size===0)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return e.forEach(r=>{if(t.filter===void 0||t.filter(r)){const o=bf(r);n=gf(n,o)}}),vf(n)},ZA=(e,t,[n,r,o]=[0,0,1],a=!1,i=!1)=>{const s={...il(t,[n,r,o]),width:t.width/o,height:t.height/o},c=[];for(const l of e.values()){const{measured:u,selectable:d=!0,hidden:f=!1}=l;if(i&&!d||f)continue;const p=u.width??l.width??l.initialWidth??null,y=u.height??l.height??l.initialHeight??null,m=al(s,Fi(l)),v=(p??0)*(y??0),b=a&&m>0;(!l.internals.handleBounds||b||m>=v||l.dragging)&&c.push(l)}return c},dJ=(e,t)=>{const n=new Set;return e.forEach(r=>{n.add(r.id)}),t.filter(r=>n.has(r.source)||n.has(r.target))};function fb(e,t){const n=new Map,r=t!=null&&t.nodes?new Set(t.nodes.map(o=>o.id)):null;return e.forEach(o=>{o.measured.width&&o.measured.height&&(t!=null&&t.includeHiddenNodes||!o.hidden)&&(!r||r.has(o.id))&&n.set(o.id,o)}),n}async function pb({nodes:e,width:t,height:n,panZoom:r,minZoom:o,maxZoom:a},i){if(e.size===0)return Promise.resolve(!1);const s=ol(e),c=mb(s,t,n,(i==null?void 0:i.minZoom)??o,(i==null?void 0:i.maxZoom)??a,(i==null?void 0:i.padding)??.1);return await r.setViewport(c,{duration:i==null?void 0:i.duration}),Promise.resolve(!0)}function eT({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:r=[0,0],nodeExtent:o,onError:a}){const i=n.get(e),s=i.parentId?n.get(i.parentId):void 0,{x:c,y:l}=s?s.internals.positionAbsolute:{x:0,y:0},u=i.origin??r;let d=o;if(i.extent==="parent"&&!i.expandParent)if(!s)a==null||a("005",po.error005());else{const p=s.measured.width,y=s.measured.height;p&&y&&(d=[[c,l],[c+p,l+y]])}else s&&Bi(i.extent)&&(d=[[i.extent[0][0]+c,i.extent[0][1]+l],[i.extent[1][0]+c,i.extent[1][1]+l]]);const f=Bi(d)?Sa(t,d,i.measured):t;return{position:{x:f.x-c+i.measured.width*u[0],y:f.y-l+i.measured.height*u[1]},positionAbsolute:f}}async function fJ({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:r,onBeforeDelete:o}){const a=new Set(e.map(d=>d.id)),i=[];for(const d of n){if(d.deletable===!1)continue;const f=a.has(d.id),p=!f&&d.parentId&&i.find(y=>y.id===d.parentId);(f||p)&&i.push(d)}const s=new Set(t.map(d=>d.id)),c=r.filter(d=>d.deletable!==!1),l=dJ(i,c);for(const d of c)s.has(d.id)&&!l.find(f=>f.id===d.id)&&l.push(d);if(!o)return{edges:l,nodes:i};const u=await o({nodes:i,edges:l});return typeof u=="boolean"?u?{edges:l,nodes:i}:{edges:[],nodes:[]}:u}const Li=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),Sa=(e={x:0,y:0},t,n)=>({x:Li(e.x,t[0][0],t[1][0]-((n==null?void 0:n.width)??0)),y:Li(e.y,t[0][1],t[1][1]-((n==null?void 0:n.height)??0))});function tT(e,t,n){const{width:r,height:o}=ho(n),{x:a,y:i}=n.internals.positionAbsolute;return Sa(e,[[a,i],[a+r,i+o]],t)}const nT=(e,t,n)=>e<t?Li(Math.abs(e-t),1,t)/t:e>n?-Li(Math.abs(e-n),1,t)/t:0,rT=(e,t,n=15,r=40)=>{const o=nT(e.x,r,t.width-r)*n,a=nT(e.y,r,t.height-r)*n;return[o,a]},gf=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),hb=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),vf=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),Fi=(e,t=[0,0])=>{var o,a;const{x:n,y:r}=db(e)?e.internals.positionAbsolute:rl(e,t);return{x:n,y:r,width:((o=e.measured)==null?void 0:o.width)??e.width??e.initialWidth??0,height:((a=e.measured)==null?void 0:a.height)??e.height??e.initialHeight??0}},bf=(e,t=[0,0])=>{var o,a;const{x:n,y:r}=db(e)?e.internals.positionAbsolute:rl(e,t);return{x:n,y:r,x2:n+(((o=e.measured)==null?void 0:o.width)??e.width??e.initialWidth??0),y2:r+(((a=e.measured)==null?void 0:a.height)??e.height??e.initialHeight??0)}},oT=(e,t)=>vf(gf(hb(e),hb(t))),al=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},aT=e=>hr(e.width)&&hr(e.height)&&hr(e.x)&&hr(e.y),hr=e=>!isNaN(e)&&isFinite(e),pJ=(e,t)=>{},xf=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),il=({x:e,y:t},[n,r,o],a=!1,i=[1,1])=>{const s={x:(e-n)/o,y:(t-r)/o};return a?xf(s,i):s},iT=({x:e,y:t},[n,r,o])=>({x:e*o+n,y:t*o+r}),mb=(e,t,n,r,o,a)=>{const i=t/(e.width*(1+a)),s=n/(e.height*(1+a)),c=Math.min(i,s),l=Li(c,r,o),u=e.x+e.width/2,d=e.y+e.height/2,f=t/2-u*l,p=n/2-d*l;return{x:f,y:p,zoom:l}},wf=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function Bi(e){return e!==void 0&&e!=="parent"}function ho(e){var t,n;return{width:((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth??0,height:((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight??0}}function sT(e){var t,n;return(((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth)!==void 0&&(((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight)!==void 0}function cT(e,t={width:0,height:0},n,r,o){const a={...e},i=r.get(n);if(i){const s=i.origin||o;a.x+=i.internals.positionAbsolute.x-(t.width??0)*s[0],a.y+=i.internals.positionAbsolute.y-(t.height??0)*s[1]}return a}function sl(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:r,containerBounds:o}){const{x:a,y:i}=mo(e),s=il({x:a-((o==null?void 0:o.left)??0),y:i-((o==null?void 0:o.top)??0)},r),{x:c,y:l}=n?xf(s,t):s;return{xSnapped:c,ySnapped:l,...s}}const _f=e=>({width:e.offsetWidth,height:e.offsetHeight}),lT=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},hJ=["INPUT","SELECT","TEXTAREA"];function yb(e){var n,r;const t=((r=(n=e.composedPath)==null?void 0:n.call(e))==null?void 0:r[0])||e.target;return hJ.includes(t==null?void 0:t.nodeName)||(t==null?void 0:t.hasAttribute("contenteditable"))||!!(t!=null&&t.closest(".nokey"))}const uT=e=>"clientX"in e,mo=(e,t)=>{var a,i;const n=uT(e),r=n?e.clientX:(a=e.touches)==null?void 0:a[0].clientX,o=n?e.clientY:(i=e.touches)==null?void 0:i[0].clientY;return{x:r-((t==null?void 0:t.left)??0),y:o-((t==null?void 0:t.top)??0)}},dT=(e,t,n,r,o)=>{const a=t.querySelectorAll(`.${e}`);return!a||!a.length?null:Array.from(a).map(i=>{const s=i.getBoundingClientRect();return{id:i.getAttribute("data-handleid"),type:e,nodeId:o,position:i.getAttribute("data-handlepos"),x:(s.left-n.left)/r,y:(s.top-n.top)/r,..._f(i)}})};function fT({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:o,sourceControlY:a,targetControlX:i,targetControlY:s}){const c=e*.125+o*.375+i*.375+n*.125,l=t*.125+a*.375+s*.375+r*.125,u=Math.abs(c-e),d=Math.abs(l-t);return[c,l,u,d]}function jf(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function pT({pos:e,x1:t,y1:n,x2:r,y2:o,c:a}){switch(e){case fe.Left:return[t-jf(t-r,a),n];case fe.Right:return[t+jf(r-t,a),n];case fe.Top:return[t,n-jf(n-o,a)];case fe.Bottom:return[t,n+jf(o-n,a)]}}function hT({sourceX:e,sourceY:t,sourcePosition:n=fe.Bottom,targetX:r,targetY:o,targetPosition:a=fe.Top,curvature:i=.25}){const[s,c]=pT({pos:n,x1:e,y1:t,x2:r,y2:o,c:i}),[l,u]=pT({pos:a,x1:r,y1:o,x2:e,y2:t,c:i}),[d,f,p,y]=fT({sourceX:e,sourceY:t,targetX:r,targetY:o,sourceControlX:s,sourceControlY:c,targetControlX:l,targetControlY:u});return[`M${e},${t} C${s},${c} ${l},${u} ${r},${o}`,d,f,p,y]}function mT({sourceX:e,sourceY:t,targetX:n,targetY:r}){const o=Math.abs(n-e)/2,a=n<e?n+o:n-o,i=Math.abs(r-t)/2,s=r<t?r+i:r-i;return[a,s,o,i]}function mJ({sourceNode:e,targetNode:t,selected:n=!1,zIndex:r=0,elevateOnSelect:o=!1}){if(!o)return r;const a=n||t.selected||e.selected,i=Math.max(e.internals.z||0,t.internals.z||0,1e3);return r+(a?i:0)}function yJ({sourceNode:e,targetNode:t,width:n,height:r,transform:o}){const a=gf(bf(e),bf(t));a.x===a.x2&&(a.x2+=1),a.y===a.y2&&(a.y2+=1);const i={x:-o[0]/o[2],y:-o[1]/o[2],width:n/o[2],height:r/o[2]};return al(i,vf(a))>0}const gJ=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`xy-edge__${e}${t||""}-${n}${r||""}`,vJ=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),yT=(e,t)=>{if(!e.source||!e.target)return t;let n;return JA(e)?n={...e}:n={...e,id:gJ(e)},vJ(n,t)?t:(n.sourceHandle===null&&delete n.sourceHandle,n.targetHandle===null&&delete n.targetHandle,t.concat(n))};function gT({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[o,a,i,s]=mT({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,o,a,i,s]}const vT={[fe.Left]:{x:-1,y:0},[fe.Right]:{x:1,y:0},[fe.Top]:{x:0,y:-1},[fe.Bottom]:{x:0,y:1}},bJ=({source:e,sourcePosition:t=fe.Bottom,target:n})=>t===fe.Left||t===fe.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},bT=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function xJ({source:e,sourcePosition:t=fe.Bottom,target:n,targetPosition:r=fe.Top,center:o,offset:a}){const i=vT[t],s=vT[r],c={x:e.x+i.x*a,y:e.y+i.y*a},l={x:n.x+s.x*a,y:n.y+s.y*a},u=bJ({source:c,sourcePosition:t,target:l}),d=u.x!==0?"x":"y",f=u[d];let p=[],y,m;const v={x:0,y:0},b={x:0,y:0},[x,j,w,_]=mT({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(i[d]*s[d]===-1){y=o.x??x,m=o.y??j;const E=[{x:y,y:c.y},{x:y,y:l.y}],S=[{x:c.x,y:m},{x:l.x,y:m}];i[d]===f?p=d==="x"?E:S:p=d==="x"?S:E}else{const E=[{x:c.x,y:l.y}],S=[{x:l.x,y:c.y}];if(d==="x"?p=i.x===f?S:E:p=i.y===f?E:S,t===r){const R=Math.abs(e[d]-n[d]);if(R<=a){const A=Math.min(a-1,a-R);i[d]===f?v[d]=(c[d]>e[d]?-1:1)*A:b[d]=(l[d]>n[d]?-1:1)*A}}if(t!==r){const R=d==="x"?"y":"x",A=i[d]===s[R],O=c[R]>l[R],k=c[R]<l[R];(i[d]===1&&(!A&&O||A&&k)||i[d]!==1&&(!A&&k||A&&O))&&(p=d==="x"?E:S)}const C={x:c.x+v.x,y:c.y+v.y},M={x:l.x+b.x,y:l.y+b.y},P=Math.max(Math.abs(C.x-p[0].x),Math.abs(M.x-p[0].x)),N=Math.max(Math.abs(C.y-p[0].y),Math.abs(M.y-p[0].y));P>=N?(y=(C.x+M.x)/2,m=p[0].y):(y=p[0].x,m=(C.y+M.y)/2)}return[[e,{x:c.x+v.x,y:c.y+v.y},...p,{x:l.x+b.x,y:l.y+b.y},n],y,m,w,_]}function wJ(e,t,n,r){const o=Math.min(bT(e,t)/2,bT(t,n)/2,r),{x:a,y:i}=t;if(e.x===a&&a===n.x||e.y===i&&i===n.y)return`L${a} ${i}`;if(e.y===i){const l=e.x<n.x?-1:1,u=e.y<n.y?1:-1;return`L ${a+o*l},${i}Q ${a},${i} ${a},${i+o*u}`}const s=e.x<n.x?1:-1,c=e.y<n.y?-1:1;return`L ${a},${i+o*c}Q ${a},${i} ${a+o*s},${i}`}function gb({sourceX:e,sourceY:t,sourcePosition:n=fe.Bottom,targetX:r,targetY:o,targetPosition:a=fe.Top,borderRadius:i=5,centerX:s,centerY:c,offset:l=20}){const[u,d,f,p,y]=xJ({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:o},targetPosition:a,center:{x:s,y:c},offset:l});return[u.reduce((m,v,b)=>{let x="";return b>0&&b<u.length-1?x=wJ(u[b-1],v,u[b+1],i):x=`${b===0?"M":"L"}${v.x} ${v.y}`,m+=x,m},""),d,f,p,y]}function xT(e){var t;return e&&!!(e.internals.handleBounds||(t=e.handles)!=null&&t.length)&&!!(e.measured.width||e.width||e.initialWidth)}function _J(e){var d;const{sourceNode:t,targetNode:n}=e;if(!xT(t)||!xT(n))return null;const r=t.internals.handleBounds||wT(t.handles),o=n.internals.handleBounds||wT(n.handles),a=_T((r==null?void 0:r.source)??[],e.sourceHandle),i=_T(e.connectionMode===Di.Strict?(o==null?void 0:o.target)??[]:((o==null?void 0:o.target)??[]).concat((o==null?void 0:o.source)??[]),e.targetHandle);if(!a||!i)return(d=e.onError)==null||d.call(e,"008",po.error008(a?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const s=(a==null?void 0:a.position)||fe.Bottom,c=(i==null?void 0:i.position)||fe.Top,l=cl(t,a,s),u=cl(n,i,c);return{sourceX:l.x,sourceY:l.y,targetX:u.x,targetY:u.y,sourcePosition:s,targetPosition:c}}function wT(e){if(!e)return null;const t=[],n=[];for(const r of e)r.width=r.width??1,r.height=r.height??1,r.type==="source"?t.push(r):r.type==="target"&&n.push(r);return{source:t,target:n}}function cl(e,t,n=fe.Left,r=!1){const o=((t==null?void 0:t.x)??0)+e.internals.positionAbsolute.x,a=((t==null?void 0:t.y)??0)+e.internals.positionAbsolute.y,{width:i,height:s}=t??ho(e);if(r)return{x:o+i/2,y:a+s/2};switch((t==null?void 0:t.position)??n){case fe.Top:return{x:o+i/2,y:a};case fe.Right:return{x:o+i,y:a+s/2};case fe.Bottom:return{x:o+i/2,y:a+s};case fe.Left:return{x:o,y:a+s/2}}}function _T(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function vb(e,t){return e?typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(n=>`${n}=${e[n]}`).join("&")}`:""}function jJ(e,{id:t,defaultColor:n,defaultMarkerStart:r,defaultMarkerEnd:o}){const a=new Set;return e.reduce((i,s)=>([s.markerStart||r,s.markerEnd||o].forEach(c=>{if(c&&typeof c=="object"){const l=vb(c,t);a.has(l)||(i.push({id:l,color:c.color||n,...c}),a.add(l))}}),i),[]).sort((i,s)=>i.id.localeCompare(s.id))}const bb={nodeOrigin:[0,0],nodeExtent:tl,elevateNodesOnSelect:!0,defaults:{}},EJ={...bb,checkEquality:!0};function xb(e,t){const n={...e};for(const r in t)t[r]!==void 0&&(n[r]=t[r]);return n}function SJ(e,t,n){const r=xb(bb,n);for(const o of e.values())if(o.parentId)_b(o,e,t,r);else{const a=rl(o,r.nodeOrigin),i=Bi(o.extent)?o.extent:r.nodeExtent,s=Sa(a,i,ho(o));o.internals.positionAbsolute=s}}function wb(e,t,n,r){var s,c;const o=xb(EJ,r),a=new Map(t),i=o!=null&&o.elevateNodesOnSelect?1e3:0;t.clear(),n.clear();for(const l of e){let u=a.get(l.id);if(o.checkEquality&&l===(u==null?void 0:u.internals.userNode))t.set(l.id,u);else{const d=rl(l,o.nodeOrigin),f=Bi(l.extent)?l.extent:o.nodeExtent,p=Sa(d,f,ho(l));u={...o.defaults,...l,measured:{width:(s=l.measured)==null?void 0:s.width,height:(c=l.measured)==null?void 0:c.height},internals:{positionAbsolute:p,handleBounds:l.measured?u==null?void 0:u.internals.handleBounds:void 0,z:jT(l,i),userNode:l}},t.set(l.id,u)}l.parentId&&_b(u,t,n,r)}}function CJ(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function _b(e,t,n,r){const{elevateNodesOnSelect:o,nodeOrigin:a,nodeExtent:i}=xb(bb,r),s=e.parentId,c=t.get(s);if(!c){console.warn(`Parent node ${s} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}CJ(e,n);const l=o?1e3:0,{x:u,y:d,z:f}=OJ(e,c,a,i,l),{positionAbsolute:p}=e.internals,y=u!==p.x||d!==p.y;(y||f!==e.internals.z)&&(e.internals={...e.internals,positionAbsolute:y?{x:u,y:d}:p,z:f})}function jT(e,t){return(hr(e.zIndex)?e.zIndex:0)+(e.selected?t:0)}function OJ(e,t,n,r,o){const{x:a,y:i}=t.internals.positionAbsolute,s=ho(e),c=rl(e,n),l=Bi(e.extent)?Sa(c,e.extent,s):c;let u=Sa({x:a+l.x,y:i+l.y},r,s);e.extent==="parent"&&(u=tT(u,s,t));const d=jT(e,o),f=t.internals.z??0;return{x:u.x,y:u.y,z:f>d?f:d}}function jb(e,t,n,r=[0,0]){var i;const o=[],a=new Map;for(const s of e){const c=t.get(s.parentId);if(!c)continue;const l=((i=a.get(s.parentId))==null?void 0:i.expandedRect)??Fi(c),u=oT(l,s.rect);a.set(s.parentId,{expandedRect:u,parent:c})}return a.size>0&&a.forEach(({expandedRect:s,parent:c},l)=>{var j;const u=c.internals.positionAbsolute,d=ho(c),f=c.origin??r,p=s.x<u.x?Math.round(Math.abs(u.x-s.x)):0,y=s.y<u.y?Math.round(Math.abs(u.y-s.y)):0,m=Math.max(d.width,Math.round(s.width)),v=Math.max(d.height,Math.round(s.height)),b=(m-d.width)*f[0],x=(v-d.height)*f[1];(p>0||y>0||b||x)&&(o.push({id:l,type:"position",position:{x:c.position.x-p+b,y:c.position.y-y+x}}),(j=n.get(l))==null||j.forEach(w=>{e.some(_=>_.id===w.id)||o.push({id:w.id,type:"position",position:{x:w.position.x+p,y:w.position.y+y}})})),(d.width<s.width||d.height<s.height||p||y)&&o.push({id:l,type:"dimensions",setAttributes:!0,dimensions:{width:m+(p?f[0]*p-b:0),height:v+(y?f[1]*y-x:0)}})}),o}function MJ(e,t,n,r,o,a){const i=r==null?void 0:r.querySelector(".xyflow__viewport");let s=!1;if(!i)return{changes:[],updatedInternals:s};const c=[],l=window.getComputedStyle(i),{m22:u}=new window.DOMMatrixReadOnly(l.transform),d=[];for(const f of e.values()){const p=t.get(f.id);if(p)if(p.hidden)p.internals={...p.internals,handleBounds:void 0},s=!0;else{const y=_f(f.nodeElement),m=p.measured.width!==y.width||p.measured.height!==y.height;if(y.width&&y.height&&(m||!p.internals.handleBounds||f.force)){const v=f.nodeElement.getBoundingClientRect(),b=Bi(p.extent)?p.extent:a;let{positionAbsolute:x}=p.internals;p.parentId&&p.extent==="parent"?x=tT(x,y,t.get(p.parentId)):b&&(x=Sa(x,b,y)),p.measured=y,p.internals={...p.internals,positionAbsolute:x,handleBounds:{source:dT("source",f.nodeElement,v,u,p.id),target:dT("target",f.nodeElement,v,u,p.id)}},p.parentId&&_b(p,t,n,{nodeOrigin:o}),s=!0,m&&(c.push({id:p.id,type:"dimensions",dimensions:y}),p.expandParent&&p.parentId&&d.push({id:p.id,parentId:p.parentId,rect:Fi(p,o)}))}}}if(d.length>0){const f=jb(d,t,n,o);c.push(...f)}return{changes:c,updatedInternals:s}}async function NJ({delta:e,panZoom:t,transform:n,translateExtent:r,width:o,height:a}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const i=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[o,a]],r),s=!!i&&(i.x!==n[0]||i.y!==n[1]||i.k!==n[2]);return Promise.resolve(s)}function ET(e,t,n){e.clear(),t.clear();for(const r of n){const{source:o,target:a,sourceHandle:i=null,targetHandle:s=null}=r,c=`${o}-source-${i}`,l=`${a}-target-${s}`,u=e.get(c)||new Map,d=e.get(l)||new Map,f={edgeId:r.id,source:o,target:a,sourceHandle:i,targetHandle:s};t.set(r.id,r),e.set(c,u.set(`${a}-${s}`,f)),e.set(l,d.set(`${o}-${i}`,f))}}function ST(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return n?n.selected?!0:ST(n,t):!1}function CT(e,t,n){let r=e;do{if(r!=null&&r.matches(t))return!0;if(r===n)return!1;r=r.parentElement}while(r);return!1}function PJ(e,t,n,r){const o=new Map;for(const[a,i]of e)if((i.selected||i.id===r)&&(!i.parentId||!ST(i,e))&&(i.draggable||t&&typeof i.draggable>"u")){const s=e.get(a);s&&o.set(a,{id:a,position:s.position||{x:0,y:0},distance:{x:n.x-s.internals.positionAbsolute.x,y:n.y-s.internals.positionAbsolute.y},extent:s.extent,parentId:s.parentId,origin:s.origin,expandParent:s.expandParent,internals:{positionAbsolute:s.internals.positionAbsolute||{x:0,y:0}},measured:{width:s.measured.width??0,height:s.measured.height??0}})}return o}function Eb({nodeId:e,dragItems:t,nodeLookup:n,dragging:r=!0}){var i,s,c;const o=[];for(const[l,u]of t){const d=(i=n.get(l))==null?void 0:i.internals.userNode;d&&o.push({...d,position:u.position,dragging:r})}if(!e)return[o[0],o];const a=(s=n.get(e))==null?void 0:s.internals.userNode;return[a?{...a,position:((c=t.get(e))==null?void 0:c.position)||a.position,dragging:r}:o[0],o]}function kJ({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:r,onDragStop:o}){let a={x:null,y:null},i=0,s=new Map,c=!1,l={x:0,y:0},u=null,d=!1,f=null,p=!1;function y({noDragClassName:v,handleSelector:b,domNode:x,isSelectable:j,nodeId:w,nodeClickDistance:_=0}){f=Rn(x);function E({x:P,y:N},R){const{nodeLookup:A,nodeExtent:O,snapGrid:k,snapToGrid:T,nodeOrigin:I,onNodeDrag:L,onSelectionDrag:D,onError:z,updateNodePositions:H}=t();a={x:P,y:N};let F=!1,U={x:0,y:0,x2:0,y2:0};if(s.size>1&&O){const Y=ol(s);U=hb(Y)}for(const[Y,G]of s){if(!A.has(Y))continue;let re={x:P-G.distance.x,y:N-G.distance.y};T&&(re=xf(re,k));let Z=[[O[0][0],O[0][1]],[O[1][0],O[1][1]]];if(s.size>1&&O&&!G.extent){const{positionAbsolute:Q}=G.internals,te=Q.x-U.x+O[0][0],B=Q.x+G.measured.width-U.x2+O[1][0],se=Q.y-U.y+O[0][1],ce=Q.y+G.measured.height-U.y2+O[1][1];Z=[[te,se],[B,ce]]}const{position:q,positionAbsolute:W}=eT({nodeId:Y,nextPosition:re,nodeLookup:A,nodeExtent:Z,nodeOrigin:I,onError:z});F=F||G.position.x!==q.x||G.position.y!==q.y,G.position=q,G.internals.positionAbsolute=W}if(F&&(H(s,!0),R&&(r||L||!w&&D))){const[Y,G]=Eb({nodeId:w,dragItems:s,nodeLookup:A});r==null||r(R,s,Y,G),L==null||L(R,Y,G),w||(D==null||D(R,G))}}async function S(){if(!u)return;const{transform:P,panBy:N,autoPanSpeed:R}=t(),[A,O]=rT(l,u,R);(A!==0||O!==0)&&(a.x=(a.x??0)-A/P[2],a.y=(a.y??0)-O/P[2],await N({x:A,y:O})&&E(a,null)),i=requestAnimationFrame(S)}function C(P){var F;const{nodeLookup:N,multiSelectionActive:R,nodesDraggable:A,transform:O,snapGrid:k,snapToGrid:T,selectNodesOnDrag:I,onNodeDragStart:L,onSelectionDragStart:D,unselectNodesAndEdges:z}=t();d=!0,(!I||!j)&&!R&&w&&((F=N.get(w))!=null&&F.selected||z()),j&&I&&w&&(e==null||e(w));const H=sl(P.sourceEvent,{transform:O,snapGrid:k,snapToGrid:T,containerBounds:u});if(a=H,s=PJ(N,A,H,w),s.size>0&&(n||L||!w&&D)){const[U,Y]=Eb({nodeId:w,dragItems:s,nodeLookup:N});n==null||n(P.sourceEvent,s,U,Y),L==null||L(P.sourceEvent,U,Y),w||(D==null||D(P.sourceEvent,Y))}}const M=mA().clickDistance(_).on("start",P=>{const{domNode:N,nodeDragThreshold:R,transform:A,snapGrid:O,snapToGrid:k}=t();u=(N==null?void 0:N.getBoundingClientRect())||null,p=!1,R===0&&C(P),a=sl(P.sourceEvent,{transform:A,snapGrid:O,snapToGrid:k,containerBounds:u}),l=mo(P.sourceEvent,u)}).on("drag",P=>{const{autoPanOnNodeDrag:N,transform:R,snapGrid:A,snapToGrid:O,nodeDragThreshold:k,nodeLookup:T}=t(),I=sl(P.sourceEvent,{transform:R,snapGrid:A,snapToGrid:O,containerBounds:u});if((P.sourceEvent.type==="touchmove"&&P.sourceEvent.touches.length>1||w&&!T.has(w))&&(p=!0),!p){if(!c&&N&&d&&(c=!0,S()),!d){const L=I.xSnapped-(a.x??0),D=I.ySnapped-(a.y??0);Math.sqrt(L*L+D*D)>k&&C(P)}(a.x!==I.xSnapped||a.y!==I.ySnapped)&&s&&d&&(l=mo(P.sourceEvent,u),E(I,P.sourceEvent))}}).on("end",P=>{if(!(!d||p)&&(c=!1,d=!1,cancelAnimationFrame(i),s.size>0)){const{nodeLookup:N,updateNodePositions:R,onNodeDragStop:A,onSelectionDragStop:O}=t();if(R(s,!1),o||A||!w&&O){const[k,T]=Eb({nodeId:w,dragItems:s,nodeLookup:N,dragging:!1});o==null||o(P.sourceEvent,s,k,T),A==null||A(P.sourceEvent,k,T),w||(O==null||O(P.sourceEvent,T))}}}).filter(P=>{const N=P.target;return!P.button&&(!v||!CT(N,`.${v}`,x))&&(!b||CT(N,b,x))});f.call(M)}function m(){f==null||f.on(".drag",null)}return{update:y,destroy:m}}function AJ(e,t,n){const r=[],o={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const a of t.values())al(o,Fi(a))>0&&r.push(a);return r}const TJ=250;function RJ(e,t,n,r){var s,c;let o=[],a=1/0;const i=AJ(e,n,t+TJ);for(const l of i){const u=[...((s=l.internals.handleBounds)==null?void 0:s.source)??[],...((c=l.internals.handleBounds)==null?void 0:c.target)??[]];for(const d of u){if(r.nodeId===d.nodeId&&r.type===d.type&&r.id===d.id)continue;const{x:f,y:p}=cl(l,d,d.position,!0),y=Math.sqrt(Math.pow(f-e.x,2)+Math.pow(p-e.y,2));y>t||(y<a?(o=[{...d,x:f,y:p}],a=y):y===a&&o.push({...d,x:f,y:p}))}}if(!o.length)return null;if(o.length>1){const l=r.type==="source"?"target":"source";return o.find(u=>u.type===l)??o[0]}return o[0]}function OT(e,t,n,r,o,a=!1){var l,u,d;const i=r.get(e);if(!i)return null;const s=o==="strict"?(l=i.internals.handleBounds)==null?void 0:l[t]:[...((u=i.internals.handleBounds)==null?void 0:u.source)??[],...((d=i.internals.handleBounds)==null?void 0:d.target)??[]],c=(n?s==null?void 0:s.find(f=>f.id===n):s==null?void 0:s[0])??null;return c&&a?{...c,...cl(i,c,c.position,!0)}:c}function MT(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function IJ(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}const NT=()=>!0;function DJ(e,{connectionMode:t,connectionRadius:n,handleId:r,nodeId:o,edgeUpdaterType:a,isTarget:i,domNode:s,nodeLookup:c,lib:l,autoPanOnConnect:u,flowId:d,panBy:f,cancelConnection:p,onConnectStart:y,onConnect:m,onConnectEnd:v,isValidConnection:b=NT,onReconnectEnd:x,updateConnection:j,getTransform:w,getFromHandle:_,autoPanSpeed:E}){const S=lT(e.target);let C=0,M;const{x:P,y:N}=mo(e),R=S==null?void 0:S.elementFromPoint(P,N),A=MT(a,R),O=s==null?void 0:s.getBoundingClientRect();if(!O||!A)return;const k=OT(o,A,r,c,t);if(!k)return;let T=mo(e,O),I=!1,L=null,D=!1,z=null;function H(){if(!u||!O)return;const[q,W]=rT(T,O,E);f({x:q,y:W}),C=requestAnimationFrame(H)}const F={...k,nodeId:o,type:A,position:k.position},U=c.get(o),Y={inProgress:!0,isValid:null,from:cl(U,F,fe.Left,!0),fromHandle:F,fromPosition:F.position,fromNode:U,to:T,toHandle:null,toPosition:XA[F.position],toNode:null};j(Y);let G=Y;y==null||y(e,{nodeId:o,handleId:r,handleType:A});function re(q){if(!_()||!F){Z(q);return}const W=w();T=mo(q,O),M=RJ(il(T,W,!1,[1,1]),n,c,F),I||(H(),I=!0);const Q=PT(q,{handle:M,connectionMode:t,fromNodeId:o,fromHandleId:r,fromType:i?"target":"source",isValidConnection:b,doc:S,lib:l,flowId:d,nodeLookup:c});z=Q.handleDomNode,L=Q.connection,D=IJ(!!M,Q.isValid);const te={...G,isValid:D,to:M&&D?iT({x:M.x,y:M.y},W):T,toHandle:Q.toHandle,toPosition:D&&Q.toHandle?Q.toHandle.position:XA[F.position],toNode:Q.toHandle?c.get(Q.toHandle.nodeId):null};D&&M&&G.toHandle&&te.toHandle&&G.toHandle.type===te.toHandle.type&&G.toHandle.nodeId===te.toHandle.nodeId&&G.toHandle.id===te.toHandle.id&&G.to.x===te.to.x&&G.to.y===te.to.y||(j(te),G=te)}function Z(q){(M||z)&&L&&D&&(m==null||m(L));const{inProgress:W,...Q}=G,te={...Q,toPosition:G.toHandle?G.toPosition:null};v==null||v(q,te),a&&(x==null||x(q,te)),p(),cancelAnimationFrame(C),I=!1,D=!1,L=null,z=null,S.removeEventListener("mousemove",re),S.removeEventListener("mouseup",Z),S.removeEventListener("touchmove",re),S.removeEventListener("touchend",Z)}S.addEventListener("mousemove",re),S.addEventListener("mouseup",Z),S.addEventListener("touchmove",re),S.addEventListener("touchend",Z)}function PT(e,{handle:t,connectionMode:n,fromNodeId:r,fromHandleId:o,fromType:a,doc:i,lib:s,flowId:c,isValidConnection:l=NT,nodeLookup:u}){const d=a==="target",f=t?i.querySelector(`.${s}-flow__handle[data-id="${c}-${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`):null,{x:p,y}=mo(e),m=i.elementFromPoint(p,y),v=m!=null&&m.classList.contains(`${s}-flow__handle`)?m:f,b={handleDomNode:v,isValid:!1,connection:null,toHandle:null};if(v){const x=MT(void 0,v),j=v.getAttribute("data-nodeid"),w=v.getAttribute("data-handleid"),_=v.classList.contains("connectable"),E=v.classList.contains("connectableend");if(!j||!x)return b;const S={source:d?j:r,sourceHandle:d?w:o,target:d?r:j,targetHandle:d?o:w};b.connection=S;const C=_&&E&&(n===Di.Strict?d&&x==="source"||!d&&x==="target":j!==r||w!==o);b.isValid=C&&l(S),b.toHandle=OT(j,x,w,u,n,!1)}return b}const Sb={onPointerDown:DJ,isValid:PT};function LJ({domNode:e,panZoom:t,getTransform:n,getViewScale:r}){const o=Rn(e);function a({translateExtent:s,width:c,height:l,zoomStep:u=10,pannable:d=!0,zoomable:f=!0,inversePan:p=!1}){const y=j=>{const w=n();if(j.sourceEvent.type!=="wheel"||!t)return;const _=-j.sourceEvent.deltaY*(j.sourceEvent.deltaMode===1?.05:j.sourceEvent.deltaMode?1:.002)*u,E=w[2]*Math.pow(2,_);t.scaleTo(E)};let m=[0,0];const v=j=>{(j.sourceEvent.type==="mousedown"||j.sourceEvent.type==="touchstart")&&(m=[j.sourceEvent.clientX??j.sourceEvent.touches[0].clientX,j.sourceEvent.clientY??j.sourceEvent.touches[0].clientY])},b=j=>{const w=n();if(j.sourceEvent.type!=="mousemove"&&j.sourceEvent.type!=="touchmove"||!t)return;const _=[j.sourceEvent.clientX??j.sourceEvent.touches[0].clientX,j.sourceEvent.clientY??j.sourceEvent.touches[0].clientY],E=[_[0]-m[0],_[1]-m[1]];m=_;const S=r()*Math.max(w[2],Math.log(w[2]))*(p?-1:1),C={x:w[0]-E[0]*S,y:w[1]-E[1]*S},M=[[0,0],[c,l]];t.setViewportConstrained({x:C.x,y:C.y,zoom:w[2]},M,s)},x=qA().on("start",v).on("zoom",d?b:null).on("zoom.wheel",f?y:null);o.call(x,{})}function i(){o.on("zoom",null)}return{update:a,destroy:i,pointer:ur}}const FJ=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,Ef=e=>({x:e.x,y:e.y,zoom:e.k}),Cb=({x:e,y:t,zoom:n})=>mf.translate(e,t).scale(n),$i=(e,t)=>e.target.closest(`.${t}`),kT=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),Ob=(e,t=0,n=()=>{})=>{const r=typeof t=="number"&&t>0;return r||n(),r?e.transition().duration(t).on("end",n):e},AT=e=>{const t=e.ctrlKey&&wf()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function BJ({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:r,panOnScrollMode:o,panOnScrollSpeed:a,zoomOnPinch:i,onPanZoomStart:s,onPanZoom:c,onPanZoomEnd:l}){return u=>{if($i(u,t))return!1;u.preventDefault(),u.stopImmediatePropagation();const d=n.property("__zoom").k||1;if(u.ctrlKey&&i){const v=ur(u),b=AT(u),x=d*Math.pow(2,b);r.scaleTo(n,x,v,u);return}const f=u.deltaMode===1?20:1;let p=o===Ho.Vertical?0:u.deltaX*f,y=o===Ho.Horizontal?0:u.deltaY*f;!wf()&&u.shiftKey&&o!==Ho.Vertical&&(p=u.deltaY*f,y=0),r.translateBy(n,-(p/d)*a,-(y/d)*a,{internal:!0});const m=Ef(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling||(e.isPanScrolling=!0,s==null||s(u,m)),e.isPanScrolling&&(c==null||c(u,m),e.panScrollTimeout=setTimeout(()=>{l==null||l(u,m),e.isPanScrolling=!1},150))}}function $J({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(r,o){if(!t&&r.type==="wheel"&&!r.ctrlKey||$i(r,e))return null;r.preventDefault(),n.call(this,r,o)}}function zJ({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return r=>{var a,i,s;if((a=r.sourceEvent)!=null&&a.internal)return;const o=Ef(r.transform);e.mouseButton=((i=r.sourceEvent)==null?void 0:i.button)||0,e.isZoomingOrPanning=!0,e.prevViewport=o,((s=r.sourceEvent)==null?void 0:s.type)==="mousedown"&&t(!0),n&&(n==null||n(r.sourceEvent,o))}}function VJ({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:r,onPanZoom:o}){return a=>{var i,s;e.usedRightMouseButton=!!(n&&kT(t,e.mouseButton??0)),(i=a.sourceEvent)!=null&&i.sync||r([a.transform.x,a.transform.y,a.transform.k]),o&&!((s=a.sourceEvent)!=null&&s.internal)&&(o==null||o(a.sourceEvent,Ef(a.transform)))}}function UJ({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:r,onPanZoomEnd:o,onPaneContextMenu:a}){return i=>{var s;if(!((s=i.sourceEvent)!=null&&s.internal)&&(e.isZoomingOrPanning=!1,a&&kT(t,e.mouseButton??0)&&!e.usedRightMouseButton&&i.sourceEvent&&a(i.sourceEvent),e.usedRightMouseButton=!1,r(!1),o&&FJ(e.prevViewport,i.transform))){const c=Ef(i.transform);e.prevViewport=c,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{o==null||o(i.sourceEvent,c)},n?150:0)}}}function HJ({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:r,panOnScroll:o,zoomOnDoubleClick:a,userSelectionActive:i,noWheelClassName:s,noPanClassName:c,lib:l}){return u=>{var y;const d=e||t,f=n&&u.ctrlKey;if(u.button===1&&u.type==="mousedown"&&($i(u,`${l}-flow__node`)||$i(u,`${l}-flow__edge`)))return!0;if(!r&&!d&&!o&&!a&&!n||i||$i(u,s)&&u.type==="wheel"||$i(u,c)&&(u.type!=="wheel"||o&&u.type==="wheel"&&!e)||!n&&u.ctrlKey&&u.type==="wheel")return!1;if(!n&&u.type==="touchstart"&&((y=u.touches)==null?void 0:y.length)>1)return u.preventDefault(),!1;if(!d&&!o&&!f&&u.type==="wheel"||!r&&(u.type==="mousedown"||u.type==="touchstart")||Array.isArray(r)&&!r.includes(u.button)&&u.type==="mousedown")return!1;const p=Array.isArray(r)&&r.includes(u.button)||!u.button||u.button<=1;return(!u.ctrlKey||u.type==="wheel")&&p}}function WJ({domNode:e,minZoom:t,maxZoom:n,paneClickDistance:r,translateExtent:o,viewport:a,onPanZoom:i,onPanZoomStart:s,onPanZoomEnd:c,onDraggingChange:l}){const u={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},d=e.getBoundingClientRect(),f=qA().clickDistance(!hr(r)||r<0?0:r).scaleExtent([t,n]).translateExtent(o),p=Rn(e).call(f);j({x:a.x,y:a.y,zoom:Li(a.zoom,t,n)},[[0,0],[d.width,d.height]],o);const y=p.on("wheel.zoom"),m=p.on("dblclick.zoom");f.wheelDelta(AT);function v(R,A){return p?new Promise(O=>{f==null||f.transform(Ob(p,A==null?void 0:A.duration,()=>O(!0)),R)}):Promise.resolve(!1)}function b({noWheelClassName:R,noPanClassName:A,onPaneContextMenu:O,userSelectionActive:k,panOnScroll:T,panOnDrag:I,panOnScrollMode:L,panOnScrollSpeed:D,preventScrolling:z,zoomOnPinch:H,zoomOnScroll:F,zoomOnDoubleClick:U,zoomActivationKeyPressed:Y,lib:G,onTransformChange:re}){k&&!u.isZoomingOrPanning&&x();const Z=T&&!Y&&!k?BJ({zoomPanValues:u,noWheelClassName:R,d3Selection:p,d3Zoom:f,panOnScrollMode:L,panOnScrollSpeed:D,zoomOnPinch:H,onPanZoomStart:s,onPanZoom:i,onPanZoomEnd:c}):$J({noWheelClassName:R,preventScrolling:z,d3ZoomHandler:y});if(p.on("wheel.zoom",Z,{passive:!1}),!k){const W=zJ({zoomPanValues:u,onDraggingChange:l,onPanZoomStart:s});f.on("start",W);const Q=VJ({zoomPanValues:u,panOnDrag:I,onPaneContextMenu:!!O,onPanZoom:i,onTransformChange:re});f.on("zoom",Q);const te=UJ({zoomPanValues:u,panOnDrag:I,panOnScroll:T,onPaneContextMenu:O,onPanZoomEnd:c,onDraggingChange:l});f.on("end",te)}const q=HJ({zoomActivationKeyPressed:Y,panOnDrag:I,zoomOnScroll:F,panOnScroll:T,zoomOnDoubleClick:U,zoomOnPinch:H,userSelectionActive:k,noPanClassName:A,noWheelClassName:R,lib:G});f.filter(q),U?p.on("dblclick.zoom",m):p.on("dblclick.zoom",null)}function x(){f.on("zoom",null)}async function j(R,A,O){const k=Cb(R),T=f==null?void 0:f.constrain()(k,A,O);return T&&await v(T),new Promise(I=>I(T))}async function w(R,A){const O=Cb(R);return await v(O,A),new Promise(k=>k(O))}function _(R){if(p){const A=Cb(R),O=p.property("__zoom");(O.k!==R.zoom||O.x!==R.x||O.y!==R.y)&&(f==null||f.transform(p,A,null,{sync:!0}))}}function E(){const R=p?HA(p.node()):{x:0,y:0,k:1};return{x:R.x,y:R.y,zoom:R.k}}function S(R,A){return p?new Promise(O=>{f==null||f.scaleTo(Ob(p,A==null?void 0:A.duration,()=>O(!0)),R)}):Promise.resolve(!1)}function C(R,A){return p?new Promise(O=>{f==null||f.scaleBy(Ob(p,A==null?void 0:A.duration,()=>O(!0)),R)}):Promise.resolve(!1)}function M(R){f==null||f.scaleExtent(R)}function P(R){f==null||f.translateExtent(R)}function N(R){const A=!hr(R)||R<0?0:R;f==null||f.clickDistance(A)}return{update:b,destroy:x,setViewport:w,setViewportConstrained:j,getViewport:E,scaleTo:S,scaleBy:C,setScaleExtent:M,setTranslateExtent:P,syncViewport:_,setClickDistance:N}}var zi;(function(e){e.Line="line",e.Handle="handle"})(zi||(zi={}));const qJ=["top-left","top-right","bottom-left","bottom-right"],YJ=["top","right","bottom","left"];function KJ({width:e,prevWidth:t,height:n,prevHeight:r,affectsX:o,affectsY:a}){const i=e-t,s=n-r,c=[i>0?1:i<0?-1:0,s>0?1:s<0?-1:0];return i&&o&&(c[0]=c[0]*-1),s&&a&&(c[1]=c[1]*-1),c}function XJ(e){const t=e.includes("right")||e.includes("left"),n=e.includes("bottom")||e.includes("top"),r=e.includes("left"),o=e.includes("top");return{isHorizontal:t,isVertical:n,affectsX:r,affectsY:o}}function qo(e,t){return Math.max(0,t-e)}function Yo(e,t){return Math.max(0,e-t)}function Sf(e,t,n){return Math.max(0,t-e,e-n)}function TT(e,t){return e?!t:t}function GJ(e,t,n,r,o,a,i,s){let{affectsX:c,affectsY:l}=t;const{isHorizontal:u,isVertical:d}=t,f=u&&d,{xSnapped:p,ySnapped:y}=n,{minWidth:m,maxWidth:v,minHeight:b,maxHeight:x}=r,{x:j,y:w,width:_,height:E,aspectRatio:S}=e;let C=Math.floor(u?p-e.pointerX:0),M=Math.floor(d?y-e.pointerY:0);const P=_+(c?-C:C),N=E+(l?-M:M),R=-a[0]*_,A=-a[1]*E;let O=Sf(P,m,v),k=Sf(N,b,x);if(i){let L=0,D=0;c&&C<0?L=qo(j+C+R,i[0][0]):!c&&C>0&&(L=Yo(j+P+R,i[1][0])),l&&M<0?D=qo(w+M+A,i[0][1]):!l&&M>0&&(D=Yo(w+N+A,i[1][1])),O=Math.max(O,L),k=Math.max(k,D)}if(s){let L=0,D=0;c&&C>0?L=Yo(j+C,s[0][0]):!c&&C<0&&(L=qo(j+P,s[1][0])),l&&M>0?D=Yo(w+M,s[0][1]):!l&&M<0&&(D=qo(w+N,s[1][1])),O=Math.max(O,L),k=Math.max(k,D)}if(o){if(u){const L=Sf(P/S,b,x)*S;if(O=Math.max(O,L),i){let D=0;!c&&!l||c&&!l&&f?D=Yo(w+A+P/S,i[1][1])*S:D=qo(w+A+(c?C:-C)/S,i[0][1])*S,O=Math.max(O,D)}if(s){let D=0;!c&&!l||c&&!l&&f?D=qo(w+P/S,s[1][1])*S:D=Yo(w+(c?C:-C)/S,s[0][1])*S,O=Math.max(O,D)}}if(d){const L=Sf(N*S,m,v)/S;if(k=Math.max(k,L),i){let D=0;!c&&!l||l&&!c&&f?D=Yo(j+N*S+R,i[1][0])/S:D=qo(j+(l?M:-M)*S+R,i[0][0])/S,k=Math.max(k,D)}if(s){let D=0;!c&&!l||l&&!c&&f?D=qo(j+N*S,s[1][0])/S:D=Yo(j+(l?M:-M)*S,s[0][0])/S,k=Math.max(k,D)}}}M=M+(M<0?k:-k),C=C+(C<0?O:-O),o&&(f?P>N*S?M=(TT(c,l)?-C:C)/S:C=(TT(c,l)?-M:M)*S:u?(M=C/S,l=c):(C=M*S,c=l));const T=c?j+C:j,I=l?w+M:w;return{width:_+(c?-C:C),height:E+(l?-M:M),x:a[0]*C*(c?-1:1)+T,y:a[1]*M*(l?-1:1)+I}}const RT={width:0,height:0,x:0,y:0},QJ={...RT,pointerX:0,pointerY:0,aspectRatio:1};function JJ(e){return[[0,0],[e.measured.width,e.measured.height]]}function ZJ(e,t,n){const r=t.position.x+e.position.x,o=t.position.y+e.position.y,a=e.measured.width??0,i=e.measured.height??0,s=n[0]*a,c=n[1]*i;return[[r-s,o-c],[r+a-s,o+i-c]]}function eZ({domNode:e,nodeId:t,getStoreItems:n,onChange:r,onEnd:o}){const a=Rn(e);function i({controlPosition:c,boundaries:l,keepAspectRatio:u,onResizeStart:d,onResize:f,onResizeEnd:p,shouldResize:y}){let m={...RT},v={...QJ};const b=XJ(c);let x,j=null,w=[],_,E,S;const C=mA().on("start",M=>{const{nodeLookup:P,transform:N,snapGrid:R,snapToGrid:A,nodeOrigin:O,paneDomNode:k}=n();if(x=P.get(t),!x)return;j=(k==null?void 0:k.getBoundingClientRect())??null;const{xSnapped:T,ySnapped:I}=sl(M.sourceEvent,{transform:N,snapGrid:R,snapToGrid:A,containerBounds:j});m={width:x.measured.width??0,height:x.measured.height??0,x:x.position.x??0,y:x.position.y??0},v={...m,pointerX:T,pointerY:I,aspectRatio:m.width/m.height},_=void 0,x.parentId&&(x.extent==="parent"||x.expandParent)&&(_=P.get(x.parentId),E=_&&x.extent==="parent"?JJ(_):void 0),w=[],S=void 0;for(const[L,D]of P)if(D.parentId===t&&(w.push({id:L,position:{...D.position},extent:D.extent}),D.extent==="parent"||D.expandParent)){const z=ZJ(D,x,D.origin??O);S?S=[[Math.min(z[0][0],S[0][0]),Math.min(z[0][1],S[0][1])],[Math.max(z[1][0],S[1][0]),Math.max(z[1][1],S[1][1])]]:S=z}d==null||d(M,{...m})}).on("drag",M=>{const{transform:P,snapGrid:N,snapToGrid:R,nodeOrigin:A}=n(),O=sl(M.sourceEvent,{transform:P,snapGrid:N,snapToGrid:R,containerBounds:j}),k=[];if(!x)return;const{x:T,y:I,width:L,height:D}=m,z={},H=x.origin??A,{width:F,height:U,x:Y,y:G}=GJ(v,b,O,l,u,H,E,S),re=F!==L,Z=U!==D,q=Y!==T&&re,W=G!==I&&Z;if(!q&&!W&&!re&&!Z)return;if((q||W||H[0]===1||H[1]===1)&&(z.x=q?Y:m.x,z.y=W?G:m.y,m.x=z.x,m.y=z.y,w.length>0)){const B=Y-T,se=G-I;for(const ce of w)ce.position={x:ce.position.x-B+H[0]*(F-L),y:ce.position.y-se+H[1]*(U-D)},k.push(ce)}if((re||Z)&&(z.width=re?F:m.width,z.height=Z?U:m.height,m.width=z.width,m.height=z.height),_&&x.expandParent){const B=H[0]*(z.width??0);z.x&&z.x<B&&(m.x=B,v.x=v.x-(z.x-B));const se=H[1]*(z.height??0);z.y&&z.y<se&&(m.y=se,v.y=v.y-(z.y-se))}const Q=KJ({width:m.width,prevWidth:L,height:m.height,prevHeight:D,affectsX:b.affectsX,affectsY:b.affectsY}),te={...m,direction:Q};(y==null?void 0:y(M,te))!==!1&&(f==null||f(M,te),r(z,k))}).on("end",M=>{p==null||p(M,{...m}),o==null||o()});a.call(C)}function s(){a.on(".drag",null)}return{update:i,destroy:s}}var IT={exports:{}},Mb={},DT;function tZ(){if(DT)return Mb;DT=1;var e=i$(),t=GN();function n(l,u){return l===u&&(l!==0||1/l===1/u)||l!==l&&u!==u}var r=typeof Object.is=="function"?Object.is:n,o=t.useSyncExternalStore,a=e.useRef,i=e.useEffect,s=e.useMemo,c=e.useDebugValue;return Mb.useSyncExternalStoreWithSelector=function(l,u,d,f,p){var y=a(null);if(y.current===null){var m={hasValue:!1,value:null};y.current=m}else m=y.current;y=s(function(){function b(E){if(!x){if(x=!0,j=E,E=f(E),p!==void 0&&m.hasValue){var S=m.value;if(p(S,E))return w=S}return w=E}if(S=w,r(j,E))return S;var C=f(E);return p!==void 0&&p(S,C)?S:(j=E,w=C)}var x=!1,j,w,_=d===void 0?null:d;return[function(){return b(u())},_===null?void 0:function(){return b(_())}]},[u,d,f,p]);var v=o(l,y[0],y[1]);return i(function(){m.hasValue=!0,m.value=v},[v]),c(v),v},Mb}var LT;function nZ(){return LT||(LT=1,IT.exports=tZ()),IT.exports}var rZ=nZ();let FT,Nb,BT,$T,zT,VT;mE=Xe(rZ),FT={BASE_URL:"/NoLLMChat/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_BASE_URL:"/NoLLMChat/",VITE_ROUTE_MODE:"hash"},Nb=e=>{let t;const n=new Set,r=(s,c)=>{const l=typeof s=="function"?s(t):s;if(!Object.is(l,t)){const u=t;t=c??(typeof l!="object"||l===null)?l:Object.assign({},t,l),n.forEach(d=>d(t,u))}},o=()=>t,a={setState:r,getState:o,getInitialState:()=>i,subscribe:s=>(n.add(s),()=>n.delete(s)),destroy:()=>{(FT?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},i=t=e(r,o,a);return a},BT=e=>e?Nb(e):Nb,{useDebugValue:$T}=V,{useSyncExternalStoreWithSelector:zT}=mE,VT=e=>e;function UT(e,t=VT,n){const r=zT(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return $T(r),r}const HT=(e,t)=>{const n=BT(e),r=(o,a=t)=>UT(n,o,a);return Object.assign(r,n),r},oZ=(e,t)=>e?HT(e,t):HT;function _t(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,o]of e)if(!Object.is(o,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}const Cf=g.createContext(null),aZ=Cf.Provider,WT=po.error001();function Ve(e,t){const n=g.useContext(Cf);if(n===null)throw new Error(WT);return UT(n,e,t)}function gt(){const e=g.useContext(Cf);if(e===null)throw new Error(WT);return g.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])}const qT={display:"none"},iZ={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},YT="react-flow__node-desc",KT="react-flow__edge-desc",sZ="react-flow__aria-live",cZ=e=>e.ariaLiveMessage;function lZ({rfId:e}){const t=Ve(cZ);return h.jsx("div",{id:`${sZ}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:iZ,children:t})}function uZ({rfId:e,disableKeyboardA11y:t}){return h.jsxs(h.Fragment,{children:[h.jsxs("div",{id:`${YT}-${e}`,style:qT,children:["Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "]}),h.jsx("div",{id:`${KT}-${e}`,style:qT,children:"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."}),!t&&h.jsx(lZ,{rfId:e})]})}const dZ=e=>e.userSelectionActive?"none":"all";function Vi({position:e="top-left",children:t,className:n,style:r,...o}){const a=Ve(dZ),i=`${e}`.split("-");return h.jsx("div",{className:Tt(["react-flow__panel",n,...i]),style:{...r,pointerEvents:a},...o,children:t})}function fZ({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:h.jsx(Vi,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:h.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const pZ=e=>{const t=[],n=[];for(const[,r]of e.nodeLookup)r.selected&&t.push(r.internals.userNode);for(const[,r]of e.edgeLookup)r.selected&&n.push(r);return{selectedNodes:t,selectedEdges:n}},Of=e=>e.id;function hZ(e,t){return _t(e.selectedNodes.map(Of),t.selectedNodes.map(Of))&&_t(e.selectedEdges.map(Of),t.selectedEdges.map(Of))}function mZ({onSelectionChange:e}){const t=gt(),{selectedNodes:n,selectedEdges:r}=Ve(pZ,hZ);return g.useEffect(()=>{const o={nodes:n,edges:r};e==null||e(o),t.getState().onSelectionChangeHandlers.forEach(a=>a(o))},[n,r,e]),null}const yZ=e=>!!e.onSelectionChangeHandlers;function gZ({onSelectionChange:e}){const t=Ve(yZ);return e||t?h.jsx(mZ,{onSelectionChange:e}):null}const XT=[0,0],vZ={x:0,y:0,zoom:1},bZ=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","onBeforeDelete","debug","autoPanSpeed","paneClickDistance"],GT=[...bZ,"rfId"],xZ=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setPaneClickDistance:e.setPaneClickDistance}),QT={translateExtent:tl,nodeOrigin:XT,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1",paneClickDistance:0};function wZ(e){const{setNodes:t,setEdges:n,setMinZoom:r,setMaxZoom:o,setTranslateExtent:a,setNodeExtent:i,reset:s,setDefaultNodesAndEdges:c,setPaneClickDistance:l}=Ve(xZ,_t),u=gt();g.useEffect(()=>(c(e.defaultNodes,e.defaultEdges),()=>{d.current=QT,s()}),[]);const d=g.useRef(QT);return g.useEffect(()=>{for(const f of GT){const p=e[f],y=d.current[f];p!==y&&(typeof e[f]>"u"||(f==="nodes"?t(p):f==="edges"?n(p):f==="minZoom"?r(p):f==="maxZoom"?o(p):f==="translateExtent"?a(p):f==="nodeExtent"?i(p):f==="paneClickDistance"?l(p):f==="fitView"?u.setState({fitViewOnInit:p}):f==="fitViewOptions"?u.setState({fitViewOnInitOptions:p}):u.setState({[f]:p})))}d.current=e},GT.map(f=>e[f])),null}function JT(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function _Z(e){var r;const[t,n]=g.useState(e==="system"?null:e);return g.useEffect(()=>{if(e!=="system"){n(e);return}const o=JT(),a=()=>n(o!=null&&o.matches?"dark":"light");return a(),o==null||o.addEventListener("change",a),()=>{o==null||o.removeEventListener("change",a)}},[e]),t!==null?t:(r=JT())!=null&&r.matches?"dark":"light"}const ZT=typeof document<"u"?document:null;function ll(e=null,t={target:ZT,actInsideInputWithModifier:!0}){const[n,r]=g.useState(!1),o=g.useRef(!1),a=g.useRef(new Set([])),[i,s]=g.useMemo(()=>{if(e!==null){const c=(Array.isArray(e)?e:[e]).filter(u=>typeof u=="string").map(u=>u.replace("+",`
`).replace(`

`,`
+`).split(`
`)),l=c.reduce((u,d)=>u.concat(...d),[]);return[c,l]}return[[],[]]},[e]);return g.useEffect(()=>{const c=(t==null?void 0:t.target)||ZT;if(e!==null){const l=f=>{if(o.current=f.ctrlKey||f.metaKey||f.shiftKey,(!o.current||o.current&&!t.actInsideInputWithModifier)&&yb(f))return!1;const p=tR(f.code,s);a.current.add(f[p]),eR(i,a.current,!1)&&(f.preventDefault(),r(!0))},u=f=>{if((!o.current||o.current&&!t.actInsideInputWithModifier)&&yb(f))return!1;const p=tR(f.code,s);eR(i,a.current,!0)?(r(!1),a.current.clear()):a.current.delete(f[p]),f.key==="Meta"&&a.current.clear(),o.current=!1},d=()=>{a.current.clear(),r(!1)};return c==null||c.addEventListener("keydown",l),c==null||c.addEventListener("keyup",u),window.addEventListener("blur",d),window.addEventListener("contextmenu",d),()=>{c==null||c.removeEventListener("keydown",l),c==null||c.removeEventListener("keyup",u),window.removeEventListener("blur",d),window.removeEventListener("contextmenu",d)}}},[e,r]),n}function eR(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(o=>t.has(o)))}function tR(e,t){return t.includes(e)?"code":"key"}const jZ=()=>{const e=gt();return g.useMemo(()=>({zoomIn:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomOut:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1/1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomTo:(t,n)=>{const{panZoom:r}=e.getState();return r?r.scaleTo(t,{duration:n==null?void 0:n.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(t,n)=>{const{transform:[r,o,a],panZoom:i}=e.getState();return i?(await i.setViewport({x:t.x??r,y:t.y??o,zoom:t.zoom??a},{duration:n==null?void 0:n.duration}),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[t,n,r]=e.getState().transform;return{x:t,y:n,zoom:r}},fitView:t=>{const{nodeLookup:n,minZoom:r,maxZoom:o,panZoom:a,domNode:i}=e.getState();if(!a||!i)return Promise.resolve(!1);const s=fb(n,t),{width:c,height:l}=_f(i);return pb({nodes:s,width:c,height:l,minZoom:r,maxZoom:o,panZoom:a},t)},setCenter:async(t,n,r)=>{const{width:o,height:a,maxZoom:i,panZoom:s}=e.getState(),c=typeof(r==null?void 0:r.zoom)<"u"?r.zoom:i,l=o/2-t*c,u=a/2-n*c;return s?(await s.setViewport({x:l,y:u,zoom:c},{duration:r==null?void 0:r.duration}),Promise.resolve(!0)):Promise.resolve(!1)},fitBounds:async(t,n)=>{const{width:r,height:o,minZoom:a,maxZoom:i,panZoom:s}=e.getState(),c=mb(t,r,o,a,i,(n==null?void 0:n.padding)??.1);return s?(await s.setViewport(c,{duration:n==null?void 0:n.duration}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(t,n={snapToGrid:!0})=>{const{transform:r,snapGrid:o,domNode:a}=e.getState();if(!a)return t;const{x:i,y:s}=a.getBoundingClientRect(),c={x:t.x-i,y:t.y-s};return il(c,r,n.snapToGrid,o)},flowToScreenPosition:t=>{const{transform:n,domNode:r}=e.getState();if(!r)return t;const{x:o,y:a}=r.getBoundingClientRect(),i=iT(t,n);return{x:i.x+o,y:i.y+a}}}),[])};function nR(e,t){const n=[],r=new Map,o=[];for(const a of e)if(a.type==="add"){o.push(a);continue}else if(a.type==="remove"||a.type==="replace")r.set(a.id,[a]);else{const i=r.get(a.id);i?i.push(a):r.set(a.id,[a])}for(const a of t){const i=r.get(a.id);if(!i){n.push(a);continue}if(i[0].type==="remove")continue;if(i[0].type==="replace"){n.push({...i[0].item});continue}const s={...a};for(const c of i)EZ(c,s);n.push(s)}return o.length&&o.forEach(a=>{a.index!==void 0?n.splice(a.index,0,{...a.item}):n.push({...a.item})}),n}function EZ(e,t){switch(e.type){case"select":{t.selected=e.selected;break}case"position":{typeof e.position<"u"&&(t.position=e.position),typeof e.dragging<"u"&&(t.dragging=e.dragging);break}case"dimensions":{typeof e.dimensions<"u"&&(t.measured??(t.measured={}),t.measured.width=e.dimensions.width,t.measured.height=e.dimensions.height,e.setAttributes&&(t.width=e.dimensions.width,t.height=e.dimensions.height)),typeof e.resizing=="boolean"&&(t.resizing=e.resizing);break}}}function Ca(e,t){return nR(e,t)}function ul(e,t){return nR(e,t)}function Oa(e,t){return{id:e,type:"select",selected:t}}function Ui(e,t=new Set,n=!1){const r=[];for(const[o,a]of e){const i=t.has(o);!(a.selected===void 0&&!i)&&a.selected!==i&&(n&&(a.selected=i),r.push(Oa(a.id,i)))}return r}function rR({items:e=[],lookup:t}){var o;const n=[],r=new Map(e.map(a=>[a.id,a]));for(const[a,i]of e.entries()){const s=t.get(i.id),c=((o=s==null?void 0:s.internals)==null?void 0:o.userNode)??s;c!==void 0&&c!==i&&n.push({id:i.id,item:i,type:"replace"}),c===void 0&&n.push({item:i,type:"add",index:a})}for(const[a]of t)r.get(a)===void 0&&n.push({id:a,type:"remove"});return n}function oR(e){return{id:e.id,type:"remove"}}const aR=e=>lJ(e),SZ=e=>JA(e);function iR(e){return g.forwardRef(e)}const CZ=typeof window<"u"?g.useLayoutEffect:g.useEffect;function sR(e){const[t,n]=g.useState(BigInt(0)),[r]=g.useState(()=>OZ(()=>n(o=>o+BigInt(1))));return CZ(()=>{const o=r.get();o.length&&(e(o),r.reset())},[t]),r}function OZ(e){let t=[];return{get:()=>t,reset:()=>{t=[]},push:n=>{t.push(n),e()}}}const cR=g.createContext(null);function MZ({children:e}){const t=gt(),n=g.useCallback(s=>{const{nodes:c=[],setNodes:l,hasDefaultNodes:u,onNodesChange:d,nodeLookup:f}=t.getState();let p=c;for(const y of s)p=typeof y=="function"?y(p):y;u?l(p):d&&d(rR({items:p,lookup:f}))},[]),r=sR(n),o=g.useCallback(s=>{const{edges:c=[],setEdges:l,hasDefaultEdges:u,onEdgesChange:d,edgeLookup:f}=t.getState();let p=c;for(const y of s)p=typeof y=="function"?y(p):y;u?l(p):d&&d(rR({items:p,lookup:f}))},[]),a=sR(o),i=g.useMemo(()=>({nodeQueue:r,edgeQueue:a}),[]);return h.jsx(cR.Provider,{value:i,children:e})}function NZ(){const e=g.useContext(cR);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}const PZ=e=>!!e.panZoom;function Un(){const e=jZ(),t=gt(),n=NZ(),r=Ve(PZ),o=g.useMemo(()=>{const a=d=>t.getState().nodeLookup.get(d),i=d=>{n.nodeQueue.push(d)},s=d=>{n.edgeQueue.push(d)},c=d=>{var b,x;const{nodeLookup:f,nodeOrigin:p}=t.getState(),y=aR(d)?d:f.get(d.id),m=y.parentId?cT(y.position,y.measured,y.parentId,f,p):y.position,v={id:y.id,position:m,width:((b=y.measured)==null?void 0:b.width)??y.width,height:((x=y.measured)==null?void 0:x.height)??y.height,data:y.data};return Fi(v)},l=(d,f,p={replace:!1})=>{i(y=>y.map(m=>{if(m.id===d){const v=typeof f=="function"?f(m):f;return p.replace&&aR(v)?v:{...m,...v}}return m}))},u=(d,f,p={replace:!1})=>{s(y=>y.map(m=>{if(m.id===d){const v=typeof f=="function"?f(m):f;return p.replace&&SZ(v)?v:{...m,...v}}return m}))};return{getNodes:()=>t.getState().nodes.map(d=>({...d})),getNode:d=>{var f;return(f=a(d))==null?void 0:f.internals.userNode},getInternalNode:a,getEdges:()=>{const{edges:d=[]}=t.getState();return d.map(f=>({...f}))},getEdge:d=>t.getState().edgeLookup.get(d),setNodes:i,setEdges:s,addNodes:d=>{const f=Array.isArray(d)?d:[d];n.nodeQueue.push(p=>[...p,...f])},addEdges:d=>{const f=Array.isArray(d)?d:[d];n.edgeQueue.push(p=>[...p,...f])},toObject:()=>{const{nodes:d=[],edges:f=[],transform:p}=t.getState(),[y,m,v]=p;return{nodes:d.map(b=>({...b})),edges:f.map(b=>({...b})),viewport:{x:y,y:m,zoom:v}}},deleteElements:async({nodes:d=[],edges:f=[]})=>{const{nodes:p,edges:y,onNodesDelete:m,onEdgesDelete:v,triggerNodeChanges:b,triggerEdgeChanges:x,onDelete:j,onBeforeDelete:w}=t.getState(),{nodes:_,edges:E}=await fJ({nodesToRemove:d,edgesToRemove:f,nodes:p,edges:y,onBeforeDelete:w}),S=E.length>0,C=_.length>0;if(S){const M=E.map(oR);v==null||v(E),x(M)}if(C){const M=_.map(oR);m==null||m(_),b(M)}return(C||S)&&(j==null||j({nodes:_,edges:E})),{deletedNodes:_,deletedEdges:E}},getIntersectingNodes:(d,f=!0,p)=>{const y=aT(d),m=y?d:c(d),v=p!==void 0;return m?(p||t.getState().nodes).filter(b=>{const x=t.getState().nodeLookup.get(b.id);if(x&&!y&&(b.id===d.id||!x.internals.positionAbsolute))return!1;const j=Fi(v?b:x),w=al(j,m);return f&&w>0||w>=m.width*m.height}):[]},isNodeIntersecting:(d,f,p=!0)=>{const y=aT(d)?d:c(d);if(!y)return!1;const m=al(y,f);return p&&m>0||m>=y.width*y.height},updateNode:l,updateNodeData:(d,f,p={replace:!1})=>{l(d,y=>{const m=typeof f=="function"?f(y):f;return p.replace?{...y,data:m}:{...y,data:{...y.data,...m}}},p)},updateEdge:u,updateEdgeData:(d,f,p={replace:!1})=>{u(d,y=>{const m=typeof f=="function"?f(y):f;return p.replace?{...y,data:m}:{...y,data:{...y.data,...m}}},p)},getNodesBounds:d=>{const{nodeLookup:f,nodeOrigin:p}=t.getState();return uJ(d,{nodeLookup:f,nodeOrigin:p})},getHandleConnections:({type:d,id:f,nodeId:p})=>{var y;return Array.from(((y=t.getState().connectionLookup.get(`${p}-${d}-${f??null}`))==null?void 0:y.values())??[])}}},[]);return g.useMemo(()=>({...o,...e,viewportInitialized:r}),[r])}const lR=e=>e.selected,kZ={actInsideInputWithModifier:!1},AZ=typeof window<"u"?window:void 0;function TZ({deleteKeyCode:e,multiSelectionKeyCode:t}){const n=gt(),{deleteElements:r}=Un(),o=ll(e,kZ),a=ll(t,{target:AZ});g.useEffect(()=>{if(o){const{edges:i,nodes:s}=n.getState();r({nodes:s.filter(lR),edges:i.filter(lR)}),n.setState({nodesSelectionActive:!1})}},[o]),g.useEffect(()=>{n.setState({multiSelectionActive:a})},[a])}function RZ(e){const t=gt();g.useEffect(()=>{const n=()=>{var o,a;if(!e.current)return!1;const r=_f(e.current);(r.height===0||r.width===0)&&((a=(o=t.getState()).onError)==null||a.call(o,"004",po.error004())),t.setState({width:r.width||500,height:r.height||500})};if(e.current){n(),window.addEventListener("resize",n);const r=new ResizeObserver(()=>n());return r.observe(e.current),()=>{window.removeEventListener("resize",n),r&&e.current&&r.unobserve(e.current)}}},[])}const Mf={position:"absolute",width:"100%",height:"100%",top:0,left:0},IZ=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib});function DZ({onPaneContextMenu:e,zoomOnScroll:t=!0,zoomOnPinch:n=!0,panOnScroll:r=!1,panOnScrollSpeed:o=.5,panOnScrollMode:a=Ho.Free,zoomOnDoubleClick:i=!0,panOnDrag:s=!0,defaultViewport:c,translateExtent:l,minZoom:u,maxZoom:d,zoomActivationKeyCode:f,preventScrolling:p=!0,children:y,noWheelClassName:m,noPanClassName:v,onViewportChange:b,isControlledViewport:x,paneClickDistance:j}){const w=gt(),_=g.useRef(null),{userSelectionActive:E,lib:S}=Ve(IZ,_t),C=ll(f),M=g.useRef();RZ(_);const P=g.useCallback(N=>{b==null||b({x:N[0],y:N[1],zoom:N[2]}),x||w.setState({transform:N})},[b,x]);return g.useEffect(()=>{if(_.current){M.current=WJ({domNode:_.current,minZoom:u,maxZoom:d,translateExtent:l,viewport:c,paneClickDistance:j,onDraggingChange:O=>w.setState({paneDragging:O}),onPanZoomStart:(O,k)=>{const{onViewportChangeStart:T,onMoveStart:I}=w.getState();I==null||I(O,k),T==null||T(k)},onPanZoom:(O,k)=>{const{onViewportChange:T,onMove:I}=w.getState();I==null||I(O,k),T==null||T(k)},onPanZoomEnd:(O,k)=>{const{onViewportChangeEnd:T,onMoveEnd:I}=w.getState();I==null||I(O,k),T==null||T(k)}});const{x:N,y:R,zoom:A}=M.current.getViewport();return w.setState({panZoom:M.current,transform:[N,R,A],domNode:_.current.closest(".react-flow")}),()=>{var O;(O=M.current)==null||O.destroy()}}},[]),g.useEffect(()=>{var N;(N=M.current)==null||N.update({onPaneContextMenu:e,zoomOnScroll:t,zoomOnPinch:n,panOnScroll:r,panOnScrollSpeed:o,panOnScrollMode:a,zoomOnDoubleClick:i,panOnDrag:s,zoomActivationKeyPressed:C,preventScrolling:p,noPanClassName:v,userSelectionActive:E,noWheelClassName:m,lib:S,onTransformChange:P})},[e,t,n,r,o,a,i,s,C,p,v,E,m,S,P]),h.jsx("div",{className:"react-flow__renderer",ref:_,style:Mf,children:y})}const LZ=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function FZ(){const{userSelectionActive:e,userSelectionRect:t}=Ve(LZ,_t);return e&&t?h.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}const Pb=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},BZ=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging});function $Z({isSelecting:e,selectionKeyPressed:t,selectionMode:n=nl.Full,panOnDrag:r,selectionOnDrag:o,onSelectionStart:a,onSelectionEnd:i,onPaneClick:s,onPaneContextMenu:c,onPaneScroll:l,onPaneMouseEnter:u,onPaneMouseMove:d,onPaneMouseLeave:f,children:p}){const y=g.useRef(null),m=gt(),v=g.useRef(0),b=g.useRef(0),x=g.useRef(),j=g.useRef(new Map),{userSelectionActive:w,elementsSelectable:_,dragging:E}=Ve(BZ,_t),S=_&&(e||w),C=g.useRef(!1),M=g.useRef(!1),P=()=>{m.setState({userSelectionActive:!1,userSelectionRect:null}),v.current=0,b.current=0},N=L=>{if(C.current){C.current=!1;return}s==null||s(L),m.getState().resetSelectedElements(),m.setState({nodesSelectionActive:!1})},R=L=>{if(Array.isArray(r)&&(r!=null&&r.includes(2))){L.preventDefault();return}c==null||c(L)},A=l?L=>l(L):void 0,O=L=>{var Y,G,re,Z;const{resetSelectedElements:D,domNode:z,edgeLookup:H}=m.getState();if(x.current=z==null?void 0:z.getBoundingClientRect(),!_||!e||L.button!==0||L.target!==y.current||!x.current)return;(G=(Y=L.target)==null?void 0:Y.setPointerCapture)==null||G.call(Y,L.pointerId),M.current=!0,C.current=!1,j.current=new Map;for(const[q,W]of H)j.current.set(W.source,((re=j.current.get(W.source))==null?void 0:re.add(q))||new Set([q])),j.current.set(W.target,((Z=j.current.get(W.target))==null?void 0:Z.add(q))||new Set([q]));const{x:F,y:U}=mo(L.nativeEvent,x.current);D(),m.setState({userSelectionRect:{width:0,height:0,startX:F,startY:U,x:F,y:U}}),a==null||a(L)},k=L=>{const{userSelectionRect:D,edgeLookup:z,transform:H,nodeLookup:F,triggerNodeChanges:U,triggerEdgeChanges:Y}=m.getState();if(!x.current||!D)return;C.current=!0;const{x:G,y:re}=mo(L.nativeEvent,x.current),{startX:Z,startY:q}=D,W={startX:Z,startY:q,x:G<Z?G:Z,y:re<q?re:q,width:Math.abs(G-Z),height:Math.abs(re-q)},Q=ZA(F,W,H,n===nl.Partial,!0),te=new Set,B=new Set;for(const se of Q){B.add(se.id);const ce=j.current.get(se.id);if(ce)for(const ve of ce)te.add(ve)}if(v.current!==B.size){v.current=B.size;const se=Ui(F,B,!0);U(se)}if(b.current!==te.size){b.current=te.size;const se=Ui(z,te);Y(se)}m.setState({userSelectionRect:W,userSelectionActive:!0,nodesSelectionActive:!1})},T=L=>{var z,H;if(L.button!==0||!M.current)return;(H=(z=L.target)==null?void 0:z.releasePointerCapture)==null||H.call(z,L.pointerId);const{userSelectionRect:D}=m.getState();!w&&D&&L.target===y.current&&(N==null||N(L)),v.current>0&&m.setState({nodesSelectionActive:!0}),P(),i==null||i(L),(t||o)&&(C.current=!1),M.current=!1},I=r===!0||Array.isArray(r)&&r.includes(0);return h.jsxs("div",{className:Tt(["react-flow__pane",{draggable:I,dragging:E,selection:e}]),onClick:S?void 0:Pb(N,y),onContextMenu:Pb(R,y),onWheel:Pb(A,y),onPointerEnter:S?void 0:u,onPointerDown:S?O:d,onPointerMove:S?k:d,onPointerUp:S?T:void 0,onPointerLeave:f,ref:y,style:Mf,children:[p,h.jsx(FZ,{})]})}function kb({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:o,unselectNodesAndEdges:a,multiSelectionActive:i,nodeLookup:s,onError:c}=t.getState(),l=s.get(e);if(!l){c==null||c("012",po.error012(e));return}t.setState({nodesSelectionActive:!1}),l.selected?(n||l.selected&&i)&&(a({nodes:[l],edges:[]}),requestAnimationFrame(()=>{var u;return(u=r==null?void 0:r.current)==null?void 0:u.blur()})):o([e])}function uR({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:o,isSelectable:a,nodeClickDistance:i}){const s=gt(),[c,l]=g.useState(!1),u=g.useRef();return g.useEffect(()=>{u.current=kJ({getStoreItems:()=>s.getState(),onNodeMouseDown:d=>{kb({id:d,store:s,nodeRef:e})},onDragStart:()=>{l(!0)},onDragStop:()=>{l(!1)}})},[]),g.useEffect(()=>{var d,f;if(t)(d=u.current)==null||d.destroy();else if(e.current)return(f=u.current)==null||f.update({noDragClassName:n,handleSelector:r,domNode:e.current,isSelectable:a,nodeId:o,nodeClickDistance:i}),()=>{var p;(p=u.current)==null||p.destroy()}},[n,r,t,a,e,o]),c}const zZ=e=>t=>t.selected&&(t.draggable||e&&typeof t.draggable>"u");function dR(){const e=gt();return g.useCallback(t=>{const{nodeExtent:n,snapToGrid:r,snapGrid:o,nodesDraggable:a,onError:i,updateNodePositions:s,nodeLookup:c,nodeOrigin:l}=e.getState(),u=new Map,d=zZ(a),f=r?o[0]:5,p=r?o[1]:5,y=t.direction.x*f*t.factor,m=t.direction.y*p*t.factor;for(const[,v]of c){if(!d(v))continue;let b={x:v.internals.positionAbsolute.x+y,y:v.internals.positionAbsolute.y+m};r&&(b=xf(b,o));const{position:x,positionAbsolute:j}=eT({nodeId:v.id,nextPosition:b,nodeLookup:c,nodeExtent:n,nodeOrigin:l,onError:i});v.position=x,v.internals.positionAbsolute=j,u.set(v.id,v)}s(u)},[])}const Ab=g.createContext(null),VZ=Ab.Provider;Ab.Consumer;const Tb=()=>g.useContext(Ab),UZ=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),HZ=(e,t,n)=>r=>{const{connectionClickStartHandle:o,connectionMode:a,connection:i}=r,{fromHandle:s,toHandle:c,isValid:l}=i,u=(c==null?void 0:c.nodeId)===e&&(c==null?void 0:c.id)===t&&(c==null?void 0:c.type)===n;return{connectingFrom:(s==null?void 0:s.nodeId)===e&&(s==null?void 0:s.id)===t&&(s==null?void 0:s.type)===n,connectingTo:u,clickConnecting:(o==null?void 0:o.nodeId)===e&&(o==null?void 0:o.id)===t&&(o==null?void 0:o.type)===n,isPossibleEndHandle:a===Di.Strict?(s==null?void 0:s.type)!==n:e!==(s==null?void 0:s.nodeId)||t!==(s==null?void 0:s.id),connectionInProcess:!!s,valid:u&&l}};function WZ({type:e="source",position:t=fe.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:o=!0,isConnectableEnd:a=!0,id:i,onConnect:s,children:c,className:l,onMouseDown:u,onTouchStart:d,...f},p){var O,k;const y=i||null,m=e==="target",v=gt(),b=Tb(),{connectOnClick:x,noPanClassName:j,rfId:w}=Ve(UZ,_t),{connectingFrom:_,connectingTo:E,clickConnecting:S,isPossibleEndHandle:C,connectionInProcess:M,valid:P}=Ve(HZ(b,y,e),_t);b||((k=(O=v.getState()).onError)==null||k.call(O,"010",po.error010()));const N=T=>{const{defaultEdgeOptions:I,onConnect:L,hasDefaultEdges:D}=v.getState(),z={...I,...T};if(D){const{edges:H,setEdges:F}=v.getState();F(yT(z,H))}L==null||L(z),s==null||s(z)},R=T=>{if(!b)return;const I=uT(T.nativeEvent);if(o&&(I&&T.button===0||!I)){const L=v.getState();Sb.onPointerDown(T.nativeEvent,{autoPanOnConnect:L.autoPanOnConnect,connectionMode:L.connectionMode,connectionRadius:L.connectionRadius,domNode:L.domNode,nodeLookup:L.nodeLookup,lib:L.lib,isTarget:m,handleId:y,nodeId:b,flowId:L.rfId,panBy:L.panBy,cancelConnection:L.cancelConnection,onConnectStart:L.onConnectStart,onConnectEnd:L.onConnectEnd,updateConnection:L.updateConnection,onConnect:N,isValidConnection:n||L.isValidConnection,getTransform:()=>v.getState().transform,getFromHandle:()=>v.getState().connection.fromHandle,autoPanSpeed:L.autoPanSpeed})}I?u==null||u(T):d==null||d(T)},A=T=>{const{onClickConnectStart:I,onClickConnectEnd:L,connectionClickStartHandle:D,connectionMode:z,isValidConnection:H,lib:F,rfId:U,nodeLookup:Y,connection:G}=v.getState();if(!b||!D&&!o)return;if(!D){I==null||I(T.nativeEvent,{nodeId:b,handleId:y,handleType:e}),v.setState({connectionClickStartHandle:{nodeId:b,type:e,id:y}});return}const re=lT(T.target),Z=n||H,{connection:q,isValid:W}=Sb.isValid(T.nativeEvent,{handle:{nodeId:b,id:y,type:e},connectionMode:z,fromNodeId:D.nodeId,fromHandleId:D.id||null,fromType:D.type,isValidConnection:Z,flowId:U,doc:re,lib:F,nodeLookup:Y});W&&q&&N(q);const Q=structuredClone(G);delete Q.inProgress,Q.toPosition=Q.toHandle?Q.toHandle.position:null,L==null||L(T,Q),v.setState({connectionClickStartHandle:null})};return h.jsx("div",{"data-handleid":y,"data-nodeid":b,"data-handlepos":t,"data-id":`${w}-${b}-${y}-${e}`,className:Tt(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",j,l,{source:!m,target:m,connectable:r,connectablestart:o,connectableend:a,clickconnecting:S,connectingfrom:_,connectingto:E,valid:P,connectionindicator:r&&(!M||C)&&(M?a:o)}]),onMouseDown:R,onTouchStart:R,onClick:x?A:void 0,ref:p,...f,children:c})}const dl=g.memo(iR(WZ));function qZ({data:e,isConnectable:t,sourcePosition:n=fe.Bottom}){return h.jsxs(h.Fragment,{children:[e==null?void 0:e.label,h.jsx(dl,{type:"source",position:n,isConnectable:t})]})}function YZ({data:e,isConnectable:t,targetPosition:n=fe.Top,sourcePosition:r=fe.Bottom}){return h.jsxs(h.Fragment,{children:[h.jsx(dl,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,h.jsx(dl,{type:"source",position:r,isConnectable:t})]})}function KZ(){return null}function XZ({data:e,isConnectable:t,targetPosition:n=fe.Top}){return h.jsxs(h.Fragment,{children:[h.jsx(dl,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label]})}const Nf={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},fR={input:qZ,default:YZ,output:XZ,group:KZ};function GZ(e){var t,n,r,o;return e.internals.handleBounds===void 0?{width:e.width??e.initialWidth??((t=e.style)==null?void 0:t.width),height:e.height??e.initialHeight??((n=e.style)==null?void 0:n.height)}:{width:e.width??((r=e.style)==null?void 0:r.width),height:e.height??((o=e.style)==null?void 0:o.height)}}const QZ=e=>{const{width:t,height:n,x:r,y:o}=ol(e.nodeLookup,{filter:a=>!!a.selected});return{width:hr(t)?t:null,height:hr(n)?n:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${r}px,${o}px)`}};function JZ({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=gt(),{width:o,height:a,transformString:i,userSelectionActive:s}=Ve(QZ,_t),c=dR(),l=g.useRef(null);if(g.useEffect(()=>{var f;n||((f=l.current)==null||f.focus({preventScroll:!0}))},[n]),uR({nodeRef:l}),s||!o||!a)return null;const u=e?f=>{const p=r.getState().nodes.filter(y=>y.selected);e(f,p)}:void 0,d=f=>{Object.prototype.hasOwnProperty.call(Nf,f.key)&&c({direction:Nf[f.key],factor:f.shiftKey?4:1})};return h.jsx("div",{className:Tt(["react-flow__nodesselection","react-flow__container",t]),style:{transform:i},children:h.jsx("div",{ref:l,className:"react-flow__nodesselection-rect",onContextMenu:u,tabIndex:n?void 0:-1,onKeyDown:n?void 0:d,style:{width:o,height:a}})})}const pR=typeof window<"u"?window:void 0,ZZ=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function hR({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:o,onPaneContextMenu:a,onPaneScroll:i,paneClickDistance:s,deleteKeyCode:c,selectionKeyCode:l,selectionOnDrag:u,selectionMode:d,onSelectionStart:f,onSelectionEnd:p,multiSelectionKeyCode:y,panActivationKeyCode:m,zoomActivationKeyCode:v,elementsSelectable:b,zoomOnScroll:x,zoomOnPinch:j,panOnScroll:w,panOnScrollSpeed:_,panOnScrollMode:E,zoomOnDoubleClick:S,panOnDrag:C,defaultViewport:M,translateExtent:P,minZoom:N,maxZoom:R,preventScrolling:A,onSelectionContextMenu:O,noWheelClassName:k,noPanClassName:T,disableKeyboardA11y:I,onViewportChange:L,isControlledViewport:D}){const{nodesSelectionActive:z,userSelectionActive:H}=Ve(ZZ),F=ll(l,{target:pR}),U=ll(m,{target:pR}),Y=U||C,G=U||w,re=u&&Y!==!0,Z=F||H||re;return TZ({deleteKeyCode:c,multiSelectionKeyCode:y}),h.jsx(DZ,{onPaneContextMenu:a,elementsSelectable:b,zoomOnScroll:x,zoomOnPinch:j,panOnScroll:G,panOnScrollSpeed:_,panOnScrollMode:E,zoomOnDoubleClick:S,panOnDrag:!F&&Y,defaultViewport:M,translateExtent:P,minZoom:N,maxZoom:R,zoomActivationKeyCode:v,preventScrolling:A,noWheelClassName:k,noPanClassName:T,onViewportChange:L,isControlledViewport:D,paneClickDistance:s,children:h.jsxs($Z,{onSelectionStart:f,onSelectionEnd:p,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:o,onPaneContextMenu:a,onPaneScroll:i,panOnDrag:Y,isSelecting:!!Z,selectionMode:d,selectionKeyPressed:F,selectionOnDrag:re,children:[e,z&&h.jsx(JZ,{onSelectionContextMenu:O,noPanClassName:T,disableKeyboardA11y:I})]})})}hR.displayName="FlowRenderer";const eee=g.memo(hR),tee=e=>t=>e?ZA(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map(n=>n.id):Array.from(t.nodeLookup.keys());function nee(e){return Ve(g.useCallback(tee(e),[e]),_t)}const ree=e=>e.updateNodeInternals;function oee(){const e=Ve(ree),[t]=g.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(n=>{const r=new Map;n.forEach(o=>{const a=o.target.getAttribute("data-id");r.set(a,{id:a,nodeElement:o.target,force:!0})}),e(r)}));return g.useEffect(()=>()=>{t==null||t.disconnect()},[t]),t}function aee({node:e,nodeType:t,hasDimensions:n,resizeObserver:r}){const o=gt(),a=g.useRef(null),i=g.useRef(null),s=g.useRef(e.sourcePosition),c=g.useRef(e.targetPosition),l=g.useRef(t),u=n&&!!e.internals.handleBounds;return g.useEffect(()=>{a.current&&!e.hidden&&(!u||i.current!==a.current)&&(i.current&&(r==null||r.unobserve(i.current)),r==null||r.observe(a.current),i.current=a.current)},[u,e.hidden]),g.useEffect(()=>()=>{i.current&&(r==null||r.unobserve(i.current),i.current=null)},[]),g.useEffect(()=>{if(a.current){const d=l.current!==t,f=s.current!==e.sourcePosition,p=c.current!==e.targetPosition;(d||f||p)&&(l.current=t,s.current=e.sourcePosition,c.current=e.targetPosition,o.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:a.current,force:!0}]])))}},[e.id,t,e.sourcePosition,e.targetPosition]),a}function iee({id:e,onClick:t,onMouseEnter:n,onMouseMove:r,onMouseLeave:o,onContextMenu:a,onDoubleClick:i,nodesDraggable:s,elementsSelectable:c,nodesConnectable:l,nodesFocusable:u,resizeObserver:d,noDragClassName:f,noPanClassName:p,disableKeyboardA11y:y,rfId:m,nodeTypes:v,nodeExtent:b,nodeClickDistance:x,onError:j}){const{node:w,internals:_,isParent:E}=Ve(q=>{const W=q.nodeLookup.get(e),Q=q.parentLookup.has(e);return{node:W,internals:W.internals,isParent:Q}},_t);let S=w.type||"default",C=(v==null?void 0:v[S])||fR[S];C===void 0&&(j==null||j("003",po.error003(S)),S="default",C=fR.default);const M=!!(w.draggable||s&&typeof w.draggable>"u"),P=!!(w.selectable||c&&typeof w.selectable>"u"),N=!!(w.connectable||l&&typeof w.connectable>"u"),R=!!(w.focusable||u&&typeof w.focusable>"u"),A=gt(),O=sT(w),k=aee({node:w,nodeType:S,hasDimensions:O,resizeObserver:d}),T=uR({nodeRef:k,disabled:w.hidden||!M,noDragClassName:f,handleSelector:w.dragHandle,nodeId:e,isSelectable:P,nodeClickDistance:x}),I=dR();if(w.hidden)return null;const L=ho(w),D=GZ(w),z=P||M||t||n||r||o,H=n?q=>n(q,{..._.userNode}):void 0,F=r?q=>r(q,{..._.userNode}):void 0,U=o?q=>o(q,{..._.userNode}):void 0,Y=a?q=>a(q,{..._.userNode}):void 0,G=i?q=>i(q,{..._.userNode}):void 0,re=q=>{const{selectNodesOnDrag:W,nodeDragThreshold:Q}=A.getState();P&&(!W||!M||Q>0)&&kb({id:e,store:A,nodeRef:k}),t&&t(q,{..._.userNode})},Z=q=>{if(!(yb(q.nativeEvent)||y))if(YA.includes(q.key)&&P){const W=q.key==="Escape";kb({id:e,store:A,unselect:W,nodeRef:k})}else M&&w.selected&&Object.prototype.hasOwnProperty.call(Nf,q.key)&&(A.setState({ariaLiveMessage:`Moved selected node ${q.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~_.positionAbsolute.x}, y: ${~~_.positionAbsolute.y}`}),I({direction:Nf[q.key],factor:q.shiftKey?4:1}))};return h.jsx("div",{className:Tt(["react-flow__node",`react-flow__node-${S}`,{[p]:M},w.className,{selected:w.selected,selectable:P,parent:E,draggable:M,dragging:T}]),ref:k,style:{zIndex:_.z,transform:`translate(${_.positionAbsolute.x}px,${_.positionAbsolute.y}px)`,pointerEvents:z?"all":"none",visibility:O?"visible":"hidden",...w.style,...D},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:H,onMouseMove:F,onMouseLeave:U,onContextMenu:Y,onClick:re,onDoubleClick:G,onKeyDown:R?Z:void 0,tabIndex:R?0:void 0,role:R?"button":void 0,"aria-describedby":y?void 0:`${YT}-${m}`,"aria-label":w.ariaLabel,children:h.jsx(VZ,{value:e,children:h.jsx(C,{id:e,data:w.data,type:S,positionAbsoluteX:_.positionAbsolute.x,positionAbsoluteY:_.positionAbsolute.y,selected:w.selected,selectable:P,draggable:M,deletable:w.deletable??!0,isConnectable:N,sourcePosition:w.sourcePosition,targetPosition:w.targetPosition,dragging:T,dragHandle:w.dragHandle,zIndex:_.z,parentId:w.parentId,...L})})})}const see=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function mR(e){const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:o,onError:a}=Ve(see,_t),i=nee(e.onlyRenderVisibleElements),s=oee();return h.jsx("div",{className:"react-flow__nodes",style:Mf,children:i.map(c=>h.jsx(iee,{id:c,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:s,nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:o,nodeClickDistance:e.nodeClickDistance,onError:a},c))})}mR.displayName="NodeRenderer";const cee=g.memo(mR);function lee(e){return Ve(g.useCallback(t=>{if(!e)return t.edges.map(r=>r.id);const n=[];if(t.width&&t.height)for(const r of t.edges){const o=t.nodeLookup.get(r.source),a=t.nodeLookup.get(r.target);o&&a&&yJ({sourceNode:o,targetNode:a,width:t.width,height:t.height,transform:t.transform})&&n.push(r.id)}return n},[e]),_t)}const uee=({color:e="none",strokeWidth:t=1})=>h.jsx("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),dee=({color:e="none",strokeWidth:t=1})=>h.jsx("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),yR={[yf.Arrow]:uee,[yf.ArrowClosed]:dee};function fee(e){const t=gt();return g.useMemo(()=>{var n,r;return Object.prototype.hasOwnProperty.call(yR,e)?yR[e]:((r=(n=t.getState()).onError)==null||r.call(n,"009",po.error009(e)),null)},[e])}const pee=({id:e,type:t,color:n,width:r=12.5,height:o=12.5,markerUnits:a="strokeWidth",strokeWidth:i,orient:s="auto-start-reverse"})=>{const c=fee(t);return c?h.jsx("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${o}`,viewBox:"-10 -10 20 20",markerUnits:a,orient:s,refX:"0",refY:"0",children:h.jsx(c,{color:n,strokeWidth:i})}):null},gR=({defaultColor:e,rfId:t})=>{const n=Ve(a=>a.edges),r=Ve(a=>a.defaultEdgeOptions),o=g.useMemo(()=>jJ(n,{id:t,defaultColor:e,defaultMarkerStart:r==null?void 0:r.markerStart,defaultMarkerEnd:r==null?void 0:r.markerEnd}),[n,r,t,e]);return o.length?h.jsx("svg",{className:"react-flow__marker",children:h.jsx("defs",{children:o.map(a=>h.jsx(pee,{id:a.id,type:a.type,color:a.color,width:a.width,height:a.height,markerUnits:a.markerUnits,strokeWidth:a.strokeWidth,orient:a.orient},a.id))})}):null};gR.displayName="MarkerDefinitions";var hee=g.memo(gR);function vR({x:e,y:t,label:n,labelStyle:r={},labelShowBg:o=!0,labelBgStyle:a={},labelBgPadding:i=[2,4],labelBgBorderRadius:s=2,children:c,className:l,...u}){const[d,f]=g.useState({x:1,y:0,width:0,height:0}),p=Tt(["react-flow__edge-textwrapper",l]),y=g.useRef(null);return g.useEffect(()=>{if(y.current){const m=y.current.getBBox();f({x:m.x,y:m.y,width:m.width,height:m.height})}},[n]),typeof n>"u"||!n?null:h.jsxs("g",{transform:`translate(${e-d.width/2} ${t-d.height/2})`,className:p,visibility:d.width?"visible":"hidden",...u,children:[o&&h.jsx("rect",{width:d.width+2*i[0],x:-i[0],y:-i[1],height:d.height+2*i[1],className:"react-flow__edge-textbg",style:a,rx:s,ry:s}),h.jsx("text",{className:"react-flow__edge-text",y:d.height/2,dy:"0.3em",ref:y,style:r,children:n}),c]})}vR.displayName="EdgeText";const mee=g.memo(vR);function Pf({id:e,path:t,labelX:n,labelY:r,label:o,labelStyle:a,labelShowBg:i,labelBgStyle:s,labelBgPadding:c,labelBgBorderRadius:l,style:u,markerEnd:d,markerStart:f,className:p,interactionWidth:y=20}){return h.jsxs(h.Fragment,{children:[h.jsx("path",{id:e,style:u,d:t,fill:"none",className:Tt(["react-flow__edge-path",p]),markerEnd:d,markerStart:f}),y&&h.jsx("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:y,className:"react-flow__edge-interaction"}),o&&hr(n)&&hr(r)?h.jsx(mee,{x:n,y:r,label:o,labelStyle:a,labelShowBg:i,labelBgStyle:s,labelBgPadding:c,labelBgBorderRadius:l}):null]})}function bR({pos:e,x1:t,y1:n,x2:r,y2:o}){return e===fe.Left||e===fe.Right?[.5*(t+r),n]:[t,.5*(n+o)]}function xR({sourceX:e,sourceY:t,sourcePosition:n=fe.Bottom,targetX:r,targetY:o,targetPosition:a=fe.Top}){const[i,s]=bR({pos:n,x1:e,y1:t,x2:r,y2:o}),[c,l]=bR({pos:a,x1:r,y1:o,x2:e,y2:t}),[u,d,f,p]=fT({sourceX:e,sourceY:t,targetX:r,targetY:o,sourceControlX:i,sourceControlY:s,targetControlX:c,targetControlY:l});return[`M${e},${t} C${i},${s} ${c},${l} ${r},${o}`,u,d,f,p]}function wR(e){return g.memo(({id:t,sourceX:n,sourceY:r,targetX:o,targetY:a,sourcePosition:i=fe.Bottom,targetPosition:s=fe.Top,label:c,labelStyle:l,labelShowBg:u,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:p,style:y,markerEnd:m,markerStart:v,interactionWidth:b})=>{const[x,j,w]=xR({sourceX:n,sourceY:r,sourcePosition:i,targetX:o,targetY:a,targetPosition:s}),_=e.isInternal?void 0:t;return h.jsx(Pf,{id:_,path:x,labelX:j,labelY:w,label:c,labelStyle:l,labelShowBg:u,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:p,style:y,markerEnd:m,markerStart:v,interactionWidth:b})})}const yee=wR({isInternal:!1}),_R=wR({isInternal:!0});yee.displayName="SimpleBezierEdge",_R.displayName="SimpleBezierEdgeInternal";function jR(e){return g.memo(({id:t,sourceX:n,sourceY:r,targetX:o,targetY:a,label:i,labelStyle:s,labelShowBg:c,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:d,style:f,sourcePosition:p=fe.Bottom,targetPosition:y=fe.Top,markerEnd:m,markerStart:v,pathOptions:b,interactionWidth:x})=>{const[j,w,_]=gb({sourceX:n,sourceY:r,sourcePosition:p,targetX:o,targetY:a,targetPosition:y,borderRadius:b==null?void 0:b.borderRadius,offset:b==null?void 0:b.offset}),E=e.isInternal?void 0:t;return h.jsx(Pf,{id:E,path:j,labelX:w,labelY:_,label:i,labelStyle:s,labelShowBg:c,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:d,style:f,markerEnd:m,markerStart:v,interactionWidth:x})})}const ER=jR({isInternal:!1}),SR=jR({isInternal:!0});ER.displayName="SmoothStepEdge",SR.displayName="SmoothStepEdgeInternal";function CR(e){return g.memo(({id:t,...n})=>{var o;const r=e.isInternal?void 0:t;return h.jsx(ER,{...n,id:r,pathOptions:g.useMemo(()=>{var a;return{borderRadius:0,offset:(a=n.pathOptions)==null?void 0:a.offset}},[(o=n.pathOptions)==null?void 0:o.offset])})})}const gee=CR({isInternal:!1}),OR=CR({isInternal:!0});gee.displayName="StepEdge",OR.displayName="StepEdgeInternal";function MR(e){return g.memo(({id:t,sourceX:n,sourceY:r,targetX:o,targetY:a,label:i,labelStyle:s,labelShowBg:c,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:d,style:f,markerEnd:p,markerStart:y,interactionWidth:m})=>{const[v,b,x]=gT({sourceX:n,sourceY:r,targetX:o,targetY:a}),j=e.isInternal?void 0:t;return h.jsx(Pf,{id:j,path:v,labelX:b,labelY:x,label:i,labelStyle:s,labelShowBg:c,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:d,style:f,markerEnd:p,markerStart:y,interactionWidth:m})})}const vee=MR({isInternal:!1}),NR=MR({isInternal:!0});vee.displayName="StraightEdge",NR.displayName="StraightEdgeInternal";function PR(e){return g.memo(({id:t,sourceX:n,sourceY:r,targetX:o,targetY:a,sourcePosition:i=fe.Bottom,targetPosition:s=fe.Top,label:c,labelStyle:l,labelShowBg:u,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:p,style:y,markerEnd:m,markerStart:v,pathOptions:b,interactionWidth:x})=>{const[j,w,_]=hT({sourceX:n,sourceY:r,sourcePosition:i,targetX:o,targetY:a,targetPosition:s,curvature:b==null?void 0:b.curvature}),E=e.isInternal?void 0:t;return h.jsx(Pf,{id:E,path:j,labelX:w,labelY:_,label:c,labelStyle:l,labelShowBg:u,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:p,style:y,markerEnd:m,markerStart:v,interactionWidth:x})})}const bee=PR({isInternal:!1}),kR=PR({isInternal:!0});bee.displayName="BezierEdge",kR.displayName="BezierEdgeInternal";const AR={default:kR,straight:NR,step:OR,smoothstep:SR,simplebezier:_R},TR={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},xee=(e,t,n)=>n===fe.Left?e-t:n===fe.Right?e+t:e,wee=(e,t,n)=>n===fe.Top?e-t:n===fe.Bottom?e+t:e,RR="react-flow__edgeupdater";function IR({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:o,onMouseEnter:a,onMouseOut:i,type:s}){return h.jsx("circle",{onMouseDown:o,onMouseEnter:a,onMouseOut:i,className:Tt([RR,`${RR}-${s}`]),cx:xee(t,r,e),cy:wee(n,r,e),r,stroke:"transparent",fill:"transparent"})}function _ee({isReconnectable:e,reconnectRadius:t,edge:n,sourceX:r,sourceY:o,targetX:a,targetY:i,sourcePosition:s,targetPosition:c,onReconnect:l,onReconnectStart:u,onReconnectEnd:d,setReconnecting:f,setUpdateHover:p}){const y=gt(),m=(w,_)=>{if(w.button!==0)return;const{autoPanOnConnect:E,domNode:S,isValidConnection:C,connectionMode:M,connectionRadius:P,lib:N,onConnectStart:R,onConnectEnd:A,cancelConnection:O,nodeLookup:k,rfId:T,panBy:I,updateConnection:L}=y.getState(),D=_.type==="target";f(!0),u==null||u(w,n,_.type);const z=(F,U)=>{f(!1),d==null||d(F,n,_.type,U)},H=F=>l==null?void 0:l(n,F);Sb.onPointerDown(w.nativeEvent,{autoPanOnConnect:E,connectionMode:M,connectionRadius:P,domNode:S,handleId:_.id,nodeId:_.nodeId,nodeLookup:k,isTarget:D,edgeUpdaterType:_.type,lib:N,flowId:T,cancelConnection:O,panBy:I,isValidConnection:C,onConnect:H,onConnectStart:R,onConnectEnd:A,onReconnectEnd:z,updateConnection:L,getTransform:()=>y.getState().transform,getFromHandle:()=>y.getState().connection.fromHandle})},v=w=>m(w,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),b=w=>m(w,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),x=()=>p(!0),j=()=>p(!1);return h.jsxs(h.Fragment,{children:[(e===!0||e==="source")&&h.jsx(IR,{position:s,centerX:r,centerY:o,radius:t,onMouseDown:v,onMouseEnter:x,onMouseOut:j,type:"source"}),(e===!0||e==="target")&&h.jsx(IR,{position:c,centerX:a,centerY:i,radius:t,onMouseDown:b,onMouseEnter:x,onMouseOut:j,type:"target"})]})}function jee({id:e,edgesFocusable:t,edgesReconnectable:n,elementsSelectable:r,onClick:o,onDoubleClick:a,onContextMenu:i,onMouseEnter:s,onMouseMove:c,onMouseLeave:l,reconnectRadius:u,onReconnect:d,onReconnectStart:f,onReconnectEnd:p,rfId:y,edgeTypes:m,noPanClassName:v,onError:b,disableKeyboardA11y:x}){let j=Ve(B=>B.edgeLookup.get(e));const w=Ve(B=>B.defaultEdgeOptions);j=w?{...w,...j}:j;let _=j.type||"default",E=(m==null?void 0:m[_])||AR[_];E===void 0&&(b==null||b("011",po.error011(_)),_="default",E=AR.default);const S=!!(j.focusable||t&&typeof j.focusable>"u"),C=typeof d<"u"&&(j.reconnectable||n&&typeof j.reconnectable>"u"),M=!!(j.selectable||r&&typeof j.selectable>"u"),P=g.useRef(null),[N,R]=g.useState(!1),[A,O]=g.useState(!1),k=gt(),{zIndex:T,sourceX:I,sourceY:L,targetX:D,targetY:z,sourcePosition:H,targetPosition:F}=Ve(g.useCallback(B=>{const se=B.nodeLookup.get(j.source),ce=B.nodeLookup.get(j.target);if(!se||!ce)return{zIndex:j.zIndex,...TR};const ve=_J({id:e,sourceNode:se,targetNode:ce,sourceHandle:j.sourceHandle||null,targetHandle:j.targetHandle||null,connectionMode:B.connectionMode,onError:b});return{zIndex:mJ({selected:j.selected,zIndex:j.zIndex,sourceNode:se,targetNode:ce,elevateOnSelect:B.elevateEdgesOnSelect}),...ve||TR}},[j.source,j.target,j.sourceHandle,j.targetHandle,j.selected,j.zIndex]),_t),U=g.useMemo(()=>j.markerStart?`url('#${vb(j.markerStart,y)}')`:void 0,[j.markerStart,y]),Y=g.useMemo(()=>j.markerEnd?`url('#${vb(j.markerEnd,y)}')`:void 0,[j.markerEnd,y]);if(j.hidden||I===null||L===null||D===null||z===null)return null;const G=B=>{var Te;const{addSelectedEdges:se,unselectNodesAndEdges:ce,multiSelectionActive:ve}=k.getState();M&&(k.setState({nodesSelectionActive:!1}),j.selected&&ve?(ce({nodes:[],edges:[j]}),(Te=P.current)==null||Te.blur()):se([e])),o&&o(B,j)},re=a?B=>{a(B,{...j})}:void 0,Z=i?B=>{i(B,{...j})}:void 0,q=s?B=>{s(B,{...j})}:void 0,W=c?B=>{c(B,{...j})}:void 0,Q=l?B=>{l(B,{...j})}:void 0,te=B=>{var se;if(!x&&YA.includes(B.key)&&M){const{unselectNodesAndEdges:ce,addSelectedEdges:ve}=k.getState();B.key==="Escape"?((se=P.current)==null||se.blur(),ce({edges:[j]})):ve([e])}};return h.jsx("svg",{style:{zIndex:T},children:h.jsxs("g",{className:Tt(["react-flow__edge",`react-flow__edge-${_}`,j.className,v,{selected:j.selected,animated:j.animated,inactive:!M&&!o,updating:N,selectable:M}]),onClick:G,onDoubleClick:re,onContextMenu:Z,onMouseEnter:q,onMouseMove:W,onMouseLeave:Q,onKeyDown:S?te:void 0,tabIndex:S?0:void 0,role:S?"button":"img","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":j.ariaLabel===null?void 0:j.ariaLabel||`Edge from ${j.source} to ${j.target}`,"aria-describedby":S?`${KT}-${y}`:void 0,ref:P,children:[!A&&h.jsx(E,{id:e,source:j.source,target:j.target,type:j.type,selected:j.selected,animated:j.animated,selectable:M,deletable:j.deletable??!0,label:j.label,labelStyle:j.labelStyle,labelShowBg:j.labelShowBg,labelBgStyle:j.labelBgStyle,labelBgPadding:j.labelBgPadding,labelBgBorderRadius:j.labelBgBorderRadius,sourceX:I,sourceY:L,targetX:D,targetY:z,sourcePosition:H,targetPosition:F,data:j.data,style:j.style,sourceHandleId:j.sourceHandle,targetHandleId:j.targetHandle,markerStart:U,markerEnd:Y,pathOptions:"pathOptions"in j?j.pathOptions:void 0,interactionWidth:j.interactionWidth}),C&&h.jsx(_ee,{edge:j,isReconnectable:C,reconnectRadius:u,onReconnect:d,onReconnectStart:f,onReconnectEnd:p,sourceX:I,sourceY:L,targetX:D,targetY:z,sourcePosition:H,targetPosition:F,setUpdateHover:R,setReconnecting:O})]})})}const Eee=e=>({width:e.width,height:e.height,edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function DR({defaultMarkerColor:e,onlyRenderVisibleElements:t,rfId:n,edgeTypes:r,noPanClassName:o,onReconnect:a,onEdgeContextMenu:i,onEdgeMouseEnter:s,onEdgeMouseMove:c,onEdgeMouseLeave:l,onEdgeClick:u,reconnectRadius:d,onEdgeDoubleClick:f,onReconnectStart:p,onReconnectEnd:y,disableKeyboardA11y:m}){const{edgesFocusable:v,edgesReconnectable:b,elementsSelectable:x,onError:j}=Ve(Eee,_t),w=lee(t);return h.jsxs("div",{className:"react-flow__edges",children:[h.jsx(hee,{defaultColor:e,rfId:n}),w.map(_=>h.jsx(jee,{id:_,edgesFocusable:v,edgesReconnectable:b,elementsSelectable:x,noPanClassName:o,onReconnect:a,onContextMenu:i,onMouseEnter:s,onMouseMove:c,onMouseLeave:l,onClick:u,reconnectRadius:d,onDoubleClick:f,onReconnectStart:p,onReconnectEnd:y,rfId:n,onError:j,edgeTypes:r,disableKeyboardA11y:m},_))]})}DR.displayName="EdgeRenderer";const See=g.memo(DR),Cee=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function Oee({children:e}){const t=Ve(Cee);return h.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:t},children:e})}function Mee(e){const t=Un(),n=g.useRef(!1);g.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const Nee=e=>{var t;return(t=e.panZoom)==null?void 0:t.syncViewport};function Pee(e){const t=Ve(Nee),n=gt();return g.useEffect(()=>{e&&(t==null||t(e),n.setState({transform:[e.x,e.y,e.zoom]}))},[e,t]),null}function kee(e){return e.connection.inProgress?{...e.connection,to:il(e.connection.to,e.transform)}:{...e.connection}}function Aee(e){return kee}function Tee(e){const t=Aee();return Ve(t,_t)}const Ree=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function Iee({containerStyle:e,style:t,type:n,component:r}){const{nodesConnectable:o,width:a,height:i,isValid:s,inProgress:c}=Ve(Ree,_t);return a&&o&&c?h.jsx("svg",{style:e,width:a,height:i,className:"react-flow__connectionline react-flow__container",children:h.jsx("g",{className:Tt(["react-flow__connection",QA(s)]),children:h.jsx(LR,{style:t,type:n,CustomComponent:r,isValid:s})})}):null}const LR=({style:e,type:t=Wo.Bezier,CustomComponent:n,isValid:r})=>{const{inProgress:o,from:a,fromNode:i,fromHandle:s,fromPosition:c,to:l,toNode:u,toHandle:d,toPosition:f}=Tee();if(!o)return;if(n)return h.jsx(n,{connectionLineType:t,connectionLineStyle:e,fromNode:i,fromHandle:s,fromX:a.x,fromY:a.y,toX:l.x,toY:l.y,fromPosition:c,toPosition:f,connectionStatus:QA(r),toNode:u,toHandle:d});let p="";const y={sourceX:a.x,sourceY:a.y,sourcePosition:c,targetX:l.x,targetY:l.y,targetPosition:f};switch(t){case Wo.Bezier:[p]=hT(y);break;case Wo.SimpleBezier:[p]=xR(y);break;case Wo.Step:[p]=gb({...y,borderRadius:0});break;case Wo.SmoothStep:[p]=gb(y);break;default:[p]=gT(y)}return h.jsx("path",{d:p,fill:"none",className:"react-flow__connection-path",style:e})};LR.displayName="ConnectionLine";const Dee={};function FR(e=Dee){g.useRef(e),gt(),g.useEffect(()=>{},[e])}function Lee(){gt(),g.useRef(!1),g.useEffect(()=>{},[])}function BR({nodeTypes:e,edgeTypes:t,onInit:n,onNodeClick:r,onEdgeClick:o,onNodeDoubleClick:a,onEdgeDoubleClick:i,onNodeMouseEnter:s,onNodeMouseMove:c,onNodeMouseLeave:l,onNodeContextMenu:u,onSelectionContextMenu:d,onSelectionStart:f,onSelectionEnd:p,connectionLineType:y,connectionLineStyle:m,connectionLineComponent:v,connectionLineContainerStyle:b,selectionKeyCode:x,selectionOnDrag:j,selectionMode:w,multiSelectionKeyCode:_,panActivationKeyCode:E,zoomActivationKeyCode:S,deleteKeyCode:C,onlyRenderVisibleElements:M,elementsSelectable:P,defaultViewport:N,translateExtent:R,minZoom:A,maxZoom:O,preventScrolling:k,defaultMarkerColor:T,zoomOnScroll:I,zoomOnPinch:L,panOnScroll:D,panOnScrollSpeed:z,panOnScrollMode:H,zoomOnDoubleClick:F,panOnDrag:U,onPaneClick:Y,onPaneMouseEnter:G,onPaneMouseMove:re,onPaneMouseLeave:Z,onPaneScroll:q,onPaneContextMenu:W,paneClickDistance:Q,nodeClickDistance:te,onEdgeContextMenu:B,onEdgeMouseEnter:se,onEdgeMouseMove:ce,onEdgeMouseLeave:ve,reconnectRadius:Te,onReconnect:qe,onReconnectStart:Ye,onReconnectEnd:ze,noDragClassName:at,noWheelClassName:He,noPanClassName:it,disableKeyboardA11y:Vt,nodeExtent:Et,rfId:mt,viewport:At,onViewportChange:yn}){return FR(e),FR(t),Lee(),Mee(n),Pee(At),h.jsx(eee,{onPaneClick:Y,onPaneMouseEnter:G,onPaneMouseMove:re,onPaneMouseLeave:Z,onPaneContextMenu:W,onPaneScroll:q,paneClickDistance:Q,deleteKeyCode:C,selectionKeyCode:x,selectionOnDrag:j,selectionMode:w,onSelectionStart:f,onSelectionEnd:p,multiSelectionKeyCode:_,panActivationKeyCode:E,zoomActivationKeyCode:S,elementsSelectable:P,zoomOnScroll:I,zoomOnPinch:L,zoomOnDoubleClick:F,panOnScroll:D,panOnScrollSpeed:z,panOnScrollMode:H,panOnDrag:U,defaultViewport:N,translateExtent:R,minZoom:A,maxZoom:O,onSelectionContextMenu:d,preventScrolling:k,noDragClassName:at,noWheelClassName:He,noPanClassName:it,disableKeyboardA11y:Vt,onViewportChange:yn,isControlledViewport:!!At,children:h.jsxs(Oee,{children:[h.jsx(See,{edgeTypes:t,onEdgeClick:o,onEdgeDoubleClick:i,onReconnect:qe,onReconnectStart:Ye,onReconnectEnd:ze,onlyRenderVisibleElements:M,onEdgeContextMenu:B,onEdgeMouseEnter:se,onEdgeMouseMove:ce,onEdgeMouseLeave:ve,reconnectRadius:Te,defaultMarkerColor:T,noPanClassName:it,disableKeyboardA11y:Vt,rfId:mt}),h.jsx(Iee,{style:m,type:y,component:v,containerStyle:b}),h.jsx("div",{className:"react-flow__edgelabel-renderer"}),h.jsx(cee,{nodeTypes:e,onNodeClick:r,onNodeDoubleClick:a,onNodeMouseEnter:s,onNodeMouseMove:c,onNodeMouseLeave:l,onNodeContextMenu:u,nodeClickDistance:te,onlyRenderVisibleElements:M,noPanClassName:it,noDragClassName:at,disableKeyboardA11y:Vt,nodeExtent:Et,rfId:mt}),h.jsx("div",{className:"react-flow__viewport-portal"})]})})}BR.displayName="GraphView";const Fee=g.memo(BR),$R=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:o,height:a,fitView:i,nodeOrigin:s,nodeExtent:c}={})=>{const l=new Map,u=new Map,d=new Map,f=new Map,p=r??t??[],y=n??e??[],m=s??[0,0],v=c??tl;ET(d,f,p),wb(y,l,u,{nodeOrigin:m,nodeExtent:v,elevateNodesOnSelect:!1});let b=[0,0,1];if(i&&o&&a){const x=ol(l,{filter:E=>!!((E.width||E.initialWidth)&&(E.height||E.initialHeight))}),{x:j,y:w,zoom:_}=mb(x,o,a,.5,2,.1);b=[j,w,_]}return{rfId:"1",width:0,height:0,transform:b,nodes:y,nodeLookup:l,parentLookup:u,edges:p,edgeLookup:f,connectionLookup:d,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:n!==void 0,hasDefaultEdges:r!==void 0,panZoom:null,minZoom:.5,maxZoom:2,translateExtent:tl,nodeExtent:v,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:Di.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:m,nodeDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,fitViewOnInit:!1,fitViewDone:!1,fitViewOnInitOptions:void 0,selectNodesOnDrag:!0,multiSelectionActive:!1,connection:{...KA},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanSpeed:15,connectionRadius:20,onError:pJ,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1}},Bee=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:o,height:a,fitView:i,nodeOrigin:s,nodeExtent:c})=>oZ((l,u)=>({...$R({nodes:e,edges:t,width:o,height:a,fitView:i,nodeOrigin:s,nodeExtent:c,defaultNodes:n,defaultEdges:r}),setNodes:d=>{const{nodeLookup:f,parentLookup:p,nodeOrigin:y,elevateNodesOnSelect:m}=u();wb(d,f,p,{nodeOrigin:y,nodeExtent:c,elevateNodesOnSelect:m,checkEquality:!0}),l({nodes:d})},setEdges:d=>{const{connectionLookup:f,edgeLookup:p}=u();ET(f,p,d),l({edges:d})},setDefaultNodesAndEdges:(d,f)=>{if(d){const{setNodes:p}=u();p(d),l({hasDefaultNodes:!0})}if(f){const{setEdges:p}=u();p(f),l({hasDefaultEdges:!0})}},updateNodeInternals:(d,f={triggerFitView:!0})=>{const{triggerNodeChanges:p,nodeLookup:y,parentLookup:m,fitViewOnInit:v,fitViewDone:b,fitViewOnInitOptions:x,domNode:j,nodeOrigin:w,nodeExtent:_,debug:E,fitViewSync:S}=u(),{changes:C,updatedInternals:M}=MJ(d,y,m,j,w,_);if(M){if(SJ(y,m,{nodeOrigin:w,nodeExtent:_}),f.triggerFitView){let P=b;!b&&v&&(P=S({...x,nodes:x==null?void 0:x.nodes})),l({fitViewDone:P})}else l({});(C==null?void 0:C.length)>0&&(E&&console.log("React Flow: trigger node changes",C),p==null||p(C))}},updateNodePositions:(d,f=!1)=>{const p=[],y=[];for(const[m,v]of d){const b={id:m,type:"position",position:v.position,dragging:f};v!=null&&v.expandParent&&(v!=null&&v.parentId)&&b.position&&(p.push({id:m,parentId:v.parentId,rect:{...v.internals.positionAbsolute,width:v.measured.width,height:v.measured.height}}),b.position.x=Math.max(0,b.position.x),b.position.y=Math.max(0,b.position.y)),y.push(b)}if(p.length>0){const{nodeLookup:m,parentLookup:v,nodeOrigin:b}=u(),x=jb(p,m,v,b);y.push(...x)}u().triggerNodeChanges(y)},triggerNodeChanges:d=>{const{onNodesChange:f,setNodes:p,nodes:y,hasDefaultNodes:m,debug:v}=u();if(d!=null&&d.length){if(m){const b=Ca(d,y);p(b)}v&&console.log("React Flow: trigger node changes",d),f==null||f(d)}},triggerEdgeChanges:d=>{const{onEdgesChange:f,setEdges:p,edges:y,hasDefaultEdges:m,debug:v}=u();if(d!=null&&d.length){if(m){const b=ul(d,y);p(b)}v&&console.log("React Flow: trigger edge changes",d),f==null||f(d)}},addSelectedNodes:d=>{const{multiSelectionActive:f,edgeLookup:p,nodeLookup:y,triggerNodeChanges:m,triggerEdgeChanges:v}=u();if(f){const b=d.map(x=>Oa(x,!0));m(b);return}m(Ui(y,new Set([...d]),!0)),v(Ui(p))},addSelectedEdges:d=>{const{multiSelectionActive:f,edgeLookup:p,nodeLookup:y,triggerNodeChanges:m,triggerEdgeChanges:v}=u();if(f){const b=d.map(x=>Oa(x,!0));v(b);return}v(Ui(p,new Set([...d]))),m(Ui(y,new Set,!0))},unselectNodesAndEdges:({nodes:d,edges:f}={})=>{const{edges:p,nodes:y,nodeLookup:m,triggerNodeChanges:v,triggerEdgeChanges:b}=u(),x=d||y,j=f||p,w=x.map(E=>{const S=m.get(E.id);return S&&(S.selected=!1),Oa(E.id,!1)}),_=j.map(E=>Oa(E.id,!1));v(w),b(_)},setMinZoom:d=>{const{panZoom:f,maxZoom:p}=u();f==null||f.setScaleExtent([d,p]),l({minZoom:d})},setMaxZoom:d=>{const{panZoom:f,minZoom:p}=u();f==null||f.setScaleExtent([p,d]),l({maxZoom:d})},setTranslateExtent:d=>{var f;(f=u().panZoom)==null||f.setTranslateExtent(d),l({translateExtent:d})},setPaneClickDistance:d=>{var f;(f=u().panZoom)==null||f.setClickDistance(d)},resetSelectedElements:()=>{const{edges:d,nodes:f,triggerNodeChanges:p,triggerEdgeChanges:y}=u(),m=f.reduce((b,x)=>x.selected?[...b,Oa(x.id,!1)]:b,[]),v=d.reduce((b,x)=>x.selected?[...b,Oa(x.id,!1)]:b,[]);p(m),y(v)},setNodeExtent:d=>{const{nodes:f,nodeLookup:p,parentLookup:y,nodeOrigin:m,elevateNodesOnSelect:v,nodeExtent:b}=u();d[0][0]===b[0][0]&&d[0][1]===b[0][1]&&d[1][0]===b[1][0]&&d[1][1]===b[1][1]||(wb(f,p,y,{nodeOrigin:m,nodeExtent:d,elevateNodesOnSelect:v,checkEquality:!1}),l({nodeExtent:d}))},panBy:d=>{const{transform:f,width:p,height:y,panZoom:m,translateExtent:v}=u();return NJ({delta:d,panZoom:m,transform:f,translateExtent:v,width:p,height:y})},fitView:d=>{const{panZoom:f,width:p,height:y,minZoom:m,maxZoom:v,nodeLookup:b}=u();if(!f)return Promise.resolve(!1);const x=fb(b,d);return pb({nodes:x,width:p,height:y,panZoom:f,minZoom:m,maxZoom:v},d)},fitViewSync:d=>{const{panZoom:f,width:p,height:y,minZoom:m,maxZoom:v,nodeLookup:b}=u();if(!f)return!1;const x=fb(b,d);return pb({nodes:x,width:p,height:y,panZoom:f,minZoom:m,maxZoom:v},d),x.size>0},cancelConnection:()=>{l({connection:{...KA}})},updateConnection:d=>{l({connection:d})},reset:()=>l({...$R()})}),Object.is);function $ee({initialNodes:e,initialEdges:t,defaultNodes:n,defaultEdges:r,initialWidth:o,initialHeight:a,fitView:i,nodeOrigin:s,nodeExtent:c,children:l}){const[u]=g.useState(()=>Bee({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:o,height:a,fitView:i,nodeOrigin:s,nodeExtent:c}));return h.jsx(aZ,{value:u,children:h.jsx(MZ,{children:l})})}function zee({children:e,nodes:t,edges:n,defaultNodes:r,defaultEdges:o,width:a,height:i,fitView:s,nodeOrigin:c,nodeExtent:l}){return g.useContext(Cf)?h.jsx(h.Fragment,{children:e}):h.jsx($ee,{initialNodes:t,initialEdges:n,defaultNodes:r,defaultEdges:o,initialWidth:a,initialHeight:i,fitView:s,nodeOrigin:c,nodeExtent:l,children:e})}const Vee={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function Uee({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:o,nodeTypes:a,edgeTypes:i,onNodeClick:s,onEdgeClick:c,onInit:l,onMove:u,onMoveStart:d,onMoveEnd:f,onConnect:p,onConnectStart:y,onConnectEnd:m,onClickConnectStart:v,onClickConnectEnd:b,onNodeMouseEnter:x,onNodeMouseMove:j,onNodeMouseLeave:w,onNodeContextMenu:_,onNodeDoubleClick:E,onNodeDragStart:S,onNodeDrag:C,onNodeDragStop:M,onNodesDelete:P,onEdgesDelete:N,onDelete:R,onSelectionChange:A,onSelectionDragStart:O,onSelectionDrag:k,onSelectionDragStop:T,onSelectionContextMenu:I,onSelectionStart:L,onSelectionEnd:D,onBeforeDelete:z,connectionMode:H,connectionLineType:F=Wo.Bezier,connectionLineStyle:U,connectionLineComponent:Y,connectionLineContainerStyle:G,deleteKeyCode:re="Backspace",selectionKeyCode:Z="Shift",selectionOnDrag:q=!1,selectionMode:W=nl.Full,panActivationKeyCode:Q="Space",multiSelectionKeyCode:te=wf()?"Meta":"Control",zoomActivationKeyCode:B=wf()?"Meta":"Control",snapToGrid:se,snapGrid:ce,onlyRenderVisibleElements:ve=!1,selectNodesOnDrag:Te,nodesDraggable:qe,nodesConnectable:Ye,nodesFocusable:ze,nodeOrigin:at=XT,edgesFocusable:He,edgesReconnectable:it,elementsSelectable:Vt=!0,defaultViewport:Et=vZ,minZoom:mt=.5,maxZoom:At=2,translateExtent:yn=tl,preventScrolling:wr=!0,nodeExtent:Qa,defaultMarkerColor:Qn="#b1b1b7",zoomOnScroll:ca=!0,zoomOnPinch:X=!0,panOnScroll:ee=!1,panOnScrollSpeed:ie=.5,panOnScrollMode:pe=Ho.Free,zoomOnDoubleClick:Ne=!0,panOnDrag:Ot=!0,onPaneClick:xt,onPaneMouseEnter:Be,onPaneMouseMove:ge,onPaneMouseLeave:we,onPaneScroll:_e,onPaneContextMenu:je,paneClickDistance:Le=0,nodeClickDistance:ct=0,children:St,onReconnect:$,onReconnectStart:K,onReconnectEnd:ne,onEdgeContextMenu:le,onEdgeDoubleClick:Se,onEdgeMouseEnter:Pe,onEdgeMouseMove:Ie,onEdgeMouseLeave:Ce,reconnectRadius:Me=10,onNodesChange:be,onEdgesChange:De,noDragClassName:Ue="nodrag",noWheelClassName:yt="nowheel",noPanClassName:wt="nopan",fitView:Ke,fitViewOptions:En,connectOnClick:kt,attributionPosition:Ja,proOptions:_r,defaultEdgeOptions:la,elevateNodesOnSelect:Vr,elevateEdgesOnSelect:ju,disableKeyboardA11y:Jn=!1,autoPanOnConnect:$s,autoPanOnNodeDrag:zs,autoPanSpeed:Vs,connectionRadius:et,isValidConnection:Sn,onError:Za,style:Ct,id:To,nodeDragThreshold:kh,viewport:Jj,onViewportChange:Mxe,width:Nxe,height:Pxe,colorMode:kxe="light",debug:Axe,...Txe},Rxe){const Zj=To||"1",Ixe=_Z(kxe);return h.jsx("div",{...Txe,style:{...Ct,...Vee},ref:Rxe,className:Tt(["react-flow",o,Ixe]),"data-testid":"rf__wrapper",id:To,children:h.jsxs(zee,{nodes:e,edges:t,width:Nxe,height:Pxe,fitView:Ke,nodeOrigin:at,nodeExtent:Qa,children:[h.jsx(Fee,{onInit:l,onNodeClick:s,onEdgeClick:c,onNodeMouseEnter:x,onNodeMouseMove:j,onNodeMouseLeave:w,onNodeContextMenu:_,onNodeDoubleClick:E,nodeTypes:a,edgeTypes:i,connectionLineType:F,connectionLineStyle:U,connectionLineComponent:Y,connectionLineContainerStyle:G,selectionKeyCode:Z,selectionOnDrag:q,selectionMode:W,deleteKeyCode:re,multiSelectionKeyCode:te,panActivationKeyCode:Q,zoomActivationKeyCode:B,onlyRenderVisibleElements:ve,defaultViewport:Et,translateExtent:yn,minZoom:mt,maxZoom:At,preventScrolling:wr,zoomOnScroll:ca,zoomOnPinch:X,zoomOnDoubleClick:Ne,panOnScroll:ee,panOnScrollSpeed:ie,panOnScrollMode:pe,panOnDrag:Ot,onPaneClick:xt,onPaneMouseEnter:Be,onPaneMouseMove:ge,onPaneMouseLeave:we,onPaneScroll:_e,onPaneContextMenu:je,paneClickDistance:Le,nodeClickDistance:ct,onSelectionContextMenu:I,onSelectionStart:L,onSelectionEnd:D,onReconnect:$,onReconnectStart:K,onReconnectEnd:ne,onEdgeContextMenu:le,onEdgeDoubleClick:Se,onEdgeMouseEnter:Pe,onEdgeMouseMove:Ie,onEdgeMouseLeave:Ce,reconnectRadius:Me,defaultMarkerColor:Qn,noDragClassName:Ue,noWheelClassName:yt,noPanClassName:wt,rfId:Zj,disableKeyboardA11y:Jn,nodeExtent:Qa,viewport:Jj,onViewportChange:Mxe}),h.jsx(wZ,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:p,onConnectStart:y,onConnectEnd:m,onClickConnectStart:v,onClickConnectEnd:b,nodesDraggable:qe,nodesConnectable:Ye,nodesFocusable:ze,edgesFocusable:He,edgesReconnectable:it,elementsSelectable:Vt,elevateNodesOnSelect:Vr,elevateEdgesOnSelect:ju,minZoom:mt,maxZoom:At,nodeExtent:Qa,onNodesChange:be,onEdgesChange:De,snapToGrid:se,snapGrid:ce,connectionMode:H,translateExtent:yn,connectOnClick:kt,defaultEdgeOptions:la,fitView:Ke,fitViewOptions:En,onNodesDelete:P,onEdgesDelete:N,onDelete:R,onNodeDragStart:S,onNodeDrag:C,onNodeDragStop:M,onSelectionDrag:k,onSelectionDragStart:O,onSelectionDragStop:T,onMove:u,onMoveStart:d,onMoveEnd:f,noPanClassName:wt,nodeOrigin:at,rfId:Zj,autoPanOnConnect:$s,autoPanOnNodeDrag:zs,autoPanSpeed:Vs,onError:Za,connectionRadius:et,isValidConnection:Sn,selectNodesOnDrag:Te,nodeDragThreshold:kh,onBeforeDelete:z,paneClickDistance:Le,debug:Axe}),h.jsx(gZ,{onSelectionChange:A}),St,h.jsx(fZ,{proOptions:_r,position:Ja}),h.jsx(uZ,{rfId:Zj,disableKeyboardA11y:Jn})]})})}var Hee=iR(Uee);const Wee=e=>{var t;return(t=e.domNode)==null?void 0:t.querySelector(".react-flow__viewport-portal")};function qee({children:e}){const t=Ve(Wee);return t?Eu.createPortal(e,t):null}const Yee=e=>e.nodes;function Kee(){return Ve(Yee,_t)}function kf({type:e,id:t=null,nodeId:n,onConnect:r,onDisconnect:o}){const a=Tb(),i=n??a,s=g.useRef(null),c=Ve(l=>l.connectionLookup.get(`${i}-${e}-${t}`),cJ);return g.useEffect(()=>{if(s.current&&s.current!==c){const l=c??new Map;GA(s.current,l,o),GA(l,s.current,r)}s.current=c??new Map},[c,r,o]),g.useMemo(()=>Array.from((c==null?void 0:c.values())??[]),[c])}qt=function(e){return Ve(g.useCallback(t=>t.nodeLookup.get(e),[e]),_t)};function Xee({dimensions:e,lineWidth:t,variant:n,className:r}){return h.jsx("path",{strokeWidth:t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:Tt(["react-flow__background-pattern",n,r])})}function Gee({radius:e,className:t}){return h.jsx("circle",{cx:e,cy:e,r:e,className:Tt(["react-flow__background-pattern","dots",t])})}var yo;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(yo||(yo={}));const Qee={[yo.Dots]:1,[yo.Lines]:1,[yo.Cross]:6},Jee=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function zR({id:e,variant:t=yo.Dots,gap:n=20,size:r,lineWidth:o=1,offset:a=0,color:i,bgColor:s,style:c,className:l,patternClassName:u}){const d=g.useRef(null),{transform:f,patternId:p}=Ve(Jee,_t),y=r||Qee[t],m=t===yo.Dots,v=t===yo.Cross,b=Array.isArray(n)?n:[n,n],x=[b[0]*f[2]||1,b[1]*f[2]||1],j=y*f[2],w=Array.isArray(a)?a:[a,a],_=v?[j,j]:x,E=[w[0]*f[2]||1+_[0]/2,w[1]*f[2]||1+_[1]/2],S=`${p}${e||""}`;return h.jsxs("svg",{className:Tt(["react-flow__background",l]),style:{...c,...Mf,"--xy-background-color-props":s,"--xy-background-pattern-color-props":i},ref:d,"data-testid":"rf__background",children:[h.jsx("pattern",{id:S,x:f[0]%x[0],y:f[1]%x[1],width:x[0],height:x[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${E[0]},-${E[1]})`,children:m?h.jsx(Gee,{radius:j/2,className:u}):h.jsx(Xee,{dimensions:_,lineWidth:o,variant:t,className:u})}),h.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${S})`})]})}zR.displayName="Background";const Zee=g.memo(zR);function ete(){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:h.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function tte(){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:h.jsx("path",{d:"M0 0h32v4.2H0z"})})}function nte(){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:h.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function rte(){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:h.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function ote(){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:h.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function Af({children:e,className:t,...n}){return h.jsx("button",{type:"button",className:Tt(["react-flow__controls-button",t]),...n,children:e})}const ate=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom});function VR({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:o,onZoomIn:a,onZoomOut:i,onFitView:s,onInteractiveChange:c,className:l,children:u,position:d="bottom-left",orientation:f="vertical","aria-label":p="React Flow controls"}){const y=gt(),{isInteractive:m,minZoomReached:v,maxZoomReached:b}=Ve(ate,_t),{zoomIn:x,zoomOut:j,fitView:w}=Un(),_=()=>{x(),a==null||a()},E=()=>{j(),i==null||i()},S=()=>{w(o),s==null||s()},C=()=>{y.setState({nodesDraggable:!m,nodesConnectable:!m,elementsSelectable:!m}),c==null||c(!m)},M=f==="horizontal"?"horizontal":"vertical";return h.jsxs(Vi,{className:Tt(["react-flow__controls",M,l]),position:d,style:e,"data-testid":"rf__controls","aria-label":p,children:[t&&h.jsxs(h.Fragment,{children:[h.jsx(Af,{onClick:_,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:b,children:h.jsx(ete,{})}),h.jsx(Af,{onClick:E,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:v,children:h.jsx(tte,{})})]}),n&&h.jsx(Af,{className:"react-flow__controls-fitview",onClick:S,title:"fit view","aria-label":"fit view",children:h.jsx(nte,{})}),r&&h.jsx(Af,{className:"react-flow__controls-interactive",onClick:C,title:"toggle interactivity","aria-label":"toggle interactivity",children:m?h.jsx(ote,{}):h.jsx(rte,{})}),u]})}VR.displayName="Controls";const ite=g.memo(VR);function ste({id:e,x:t,y:n,width:r,height:o,style:a,color:i,strokeColor:s,strokeWidth:c,className:l,borderRadius:u,shapeRendering:d,selected:f,onClick:p}){const{background:y,backgroundColor:m}=a||{},v=i||y||m;return h.jsx("rect",{className:Tt(["react-flow__minimap-node",{selected:f},l]),x:t,y:n,rx:u,ry:u,width:r,height:o,style:{fill:v,stroke:s,strokeWidth:c},shapeRendering:d,onClick:p?b=>p(b,e):void 0})}const cte=g.memo(ste),lte=e=>e.nodes.map(t=>t.id),Rb=e=>e instanceof Function?e:()=>e;function ute({nodeStrokeColor:e,nodeColor:t,nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:o,nodeComponent:a=cte,onClick:i}){const s=Ve(lte,_t),c=Rb(t),l=Rb(e),u=Rb(n),d=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return h.jsx(h.Fragment,{children:s.map(f=>h.jsx(fte,{id:f,nodeColorFunc:c,nodeStrokeColorFunc:l,nodeClassNameFunc:u,nodeBorderRadius:r,nodeStrokeWidth:o,NodeComponent:a,onClick:i,shapeRendering:d},f))})}function dte({id:e,nodeColorFunc:t,nodeStrokeColorFunc:n,nodeClassNameFunc:r,nodeBorderRadius:o,nodeStrokeWidth:a,shapeRendering:i,NodeComponent:s,onClick:c}){const{node:l,x:u,y:d,width:f,height:p}=Ve(y=>{const m=y.nodeLookup.get(e),{x:v,y:b}=m.internals.positionAbsolute,{width:x,height:j}=ho(m);return{node:m,x:v,y:b,width:x,height:j}},_t);return!l||l.hidden||!sT(l)?null:h.jsx(s,{x:u,y:d,width:f,height:p,style:l.style,selected:!!l.selected,className:r(l),color:t(l),borderRadius:o,strokeColor:n(l),strokeWidth:a,shapeRendering:i,onClick:c,id:l.id})}const fte=g.memo(dte);var pte=g.memo(ute);const hte=200,mte=150,yte=e=>{const t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:t,boundingRect:e.nodeLookup.size>0?oT(ol(e.nodeLookup),t):t,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height}},gte="react-flow__minimap-desc";function UR({style:e,className:t,nodeStrokeColor:n,nodeColor:r,nodeClassName:o="",nodeBorderRadius:a=5,nodeStrokeWidth:i,nodeComponent:s,bgColor:c,maskColor:l,maskStrokeColor:u,maskStrokeWidth:d,position:f="bottom-right",onClick:p,onNodeClick:y,pannable:m=!1,zoomable:v=!1,ariaLabel:b="React Flow mini map",inversePan:x,zoomStep:j=10,offsetScale:w=5}){const _=gt(),E=g.useRef(null),{boundingRect:S,viewBB:C,rfId:M,panZoom:P,translateExtent:N,flowWidth:R,flowHeight:A}=Ve(yte,_t),O=(e==null?void 0:e.width)??hte,k=(e==null?void 0:e.height)??mte,T=S.width/O,I=S.height/k,L=Math.max(T,I),D=L*O,z=L*k,H=w*L,F=S.x-(D-S.width)/2-H,U=S.y-(z-S.height)/2-H,Y=D+H*2,G=z+H*2,re=`${gte}-${M}`,Z=g.useRef(0),q=g.useRef();Z.current=L,g.useEffect(()=>{if(E.current&&P)return q.current=LJ({domNode:E.current,panZoom:P,getTransform:()=>_.getState().transform,getViewScale:()=>Z.current}),()=>{var te;(te=q.current)==null||te.destroy()}},[P]),g.useEffect(()=>{var te;(te=q.current)==null||te.update({translateExtent:N,width:R,height:A,inversePan:x,pannable:m,zoomStep:j,zoomable:v})},[m,v,x,j,N,R,A]);const W=p?te=>{var ce;const[B,se]=((ce=q.current)==null?void 0:ce.pointer(te))||[0,0];p(te,{x:B,y:se})}:void 0,Q=y?g.useCallback((te,B)=>{const se=_.getState().nodeLookup.get(B);y(te,se)},[]):void 0;return h.jsx(Vi,{position:f,style:{...e,"--xy-minimap-background-color-props":typeof c=="string"?c:void 0,"--xy-minimap-mask-background-color-props":typeof l=="string"?l:void 0,"--xy-minimap-mask-stroke-color-props":typeof u=="string"?u:void 0,"--xy-minimap-mask-stroke-width-props":typeof d=="number"?d*L:void 0,"--xy-minimap-node-background-color-props":typeof r=="string"?r:void 0,"--xy-minimap-node-stroke-color-props":typeof n=="string"?n:void 0,"--xy-minimap-node-stroke-width-props":typeof i=="string"?i:void 0},className:Tt(["react-flow__minimap",t]),"data-testid":"rf__minimap",children:h.jsxs("svg",{width:O,height:k,viewBox:`${F} ${U} ${Y} ${G}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":re,ref:E,onClick:W,children:[b&&h.jsx("title",{id:re,children:b}),h.jsx(pte,{onClick:Q,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:a,nodeClassName:o,nodeStrokeWidth:i,nodeComponent:s}),h.jsx("path",{className:"react-flow__minimap-mask",d:`M${F-H},${U-H}h${Y+H*2}v${G+H*2}h${-Y-H*2}z
        M${C.x},${C.y}h${C.width}v${C.height}h${-C.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}UR.displayName="MiniMap";const vte=g.memo(UR);function bte({nodeId:e,position:t,variant:n=zi.Handle,className:r,style:o={},children:a,color:i,minWidth:s=10,minHeight:c=10,maxWidth:l=Number.MAX_VALUE,maxHeight:u=Number.MAX_VALUE,keepAspectRatio:d=!1,shouldResize:f,onResizeStart:p,onResize:y,onResizeEnd:m}){const v=Tb(),b=typeof e=="string"?e:v,x=gt(),j=g.useRef(null),w=n===zi.Line?"right":"bottom-right",_=t??w,E=g.useRef(null);g.useEffect(()=>{if(!(!j.current||!b))return E.current||(E.current=eZ({domNode:j.current,nodeId:b,getStoreItems:()=>{const{nodeLookup:P,transform:N,snapGrid:R,snapToGrid:A,nodeOrigin:O,domNode:k}=x.getState();return{nodeLookup:P,transform:N,snapGrid:R,snapToGrid:A,nodeOrigin:O,paneDomNode:k}},onChange:(P,N)=>{const{triggerNodeChanges:R,nodeLookup:A,parentLookup:O,nodeOrigin:k}=x.getState(),T=[],I={x:P.x,y:P.y},L=A.get(b);if(L&&L.expandParent&&L.parentId){const D=L.origin??k,z=P.width??L.measured.width,H=P.height??L.measured.height,F={id:L.id,parentId:L.parentId,rect:{width:z,height:H,...cT({x:P.x??L.position.x,y:P.y??L.position.y},{width:z,height:H},L.parentId,A,D)}},U=jb([F],A,O,k);T.push(...U),I.x=P.x?Math.max(D[0]*z,P.x):void 0,I.y=P.y?Math.max(D[1]*H,P.y):void 0}if(I.x!==void 0&&I.y!==void 0){const D={id:b,type:"position",position:{...I}};T.push(D)}if(P.width!==void 0&&P.height!==void 0){const D={id:b,type:"dimensions",resizing:!0,setAttributes:!0,dimensions:{width:P.width,height:P.height}};T.push(D)}for(const D of N){const z={...D,type:"position"};T.push(z)}R(T)},onEnd:()=>{const P={id:b,type:"dimensions",resizing:!1};x.getState().triggerNodeChanges([P])}})),E.current.update({controlPosition:_,boundaries:{minWidth:s,minHeight:c,maxWidth:l,maxHeight:u},keepAspectRatio:d,onResizeStart:p,onResize:y,onResizeEnd:m,shouldResize:f}),()=>{var P;(P=E.current)==null||P.destroy()}},[_,s,c,l,u,d,p,y,m,f]);const S=_.split("-"),C=n===zi.Line?"borderColor":"backgroundColor",M=i?{...o,[C]:i}:o;return h.jsx("div",{className:Tt(["react-flow__resize-control","nodrag",...S,n,r]),ref:j,style:M,children:a})}const HR=g.memo(bte);function xte({nodeId:e,isVisible:t=!0,handleClassName:n,handleStyle:r,lineClassName:o,lineStyle:a,color:i,minWidth:s=10,minHeight:c=10,maxWidth:l=Number.MAX_VALUE,maxHeight:u=Number.MAX_VALUE,keepAspectRatio:d=!1,shouldResize:f,onResizeStart:p,onResize:y,onResizeEnd:m}){return t?h.jsxs(h.Fragment,{children:[YJ.map(v=>h.jsx(HR,{className:o,style:a,nodeId:e,position:v,variant:zi.Line,color:i,minWidth:s,minHeight:c,maxWidth:l,maxHeight:u,onResizeStart:p,keepAspectRatio:d,shouldResize:f,onResize:y,onResizeEnd:m},v)),qJ.map(v=>h.jsx(HR,{className:n,style:r,nodeId:e,position:v,color:i,minWidth:s,minHeight:c,maxWidth:l,maxHeight:u,onResizeStart:p,keepAspectRatio:d,shouldResize:f,onResize:y,onResizeEnd:m},v))]}):null}var Ib,WR;function wte(){if(WR)return Ib;WR=1;var e=function(b){return t(b)&&!n(b)};function t(b){return!!b&&typeof b=="object"}function n(b){var x=Object.prototype.toString.call(b);return x==="[object RegExp]"||x==="[object Date]"||a(b)}var r=typeof Symbol=="function"&&Symbol.for,o=r?Symbol.for("react.element"):60103;function a(b){return b.$$typeof===o}function i(b){return Array.isArray(b)?[]:{}}function s(b,x){return x.clone!==!1&&x.isMergeableObject(b)?m(i(b),b,x):b}function c(b,x,j){return b.concat(x).map(function(w){return s(w,j)})}function l(b,x){if(!x.customMerge)return m;var j=x.customMerge(b);return typeof j=="function"?j:m}function u(b){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(b).filter(function(x){return Object.propertyIsEnumerable.call(b,x)}):[]}function d(b){return Object.keys(b).concat(u(b))}function f(b,x){try{return x in b}catch{return!1}}function p(b,x){return f(b,x)&&!(Object.hasOwnProperty.call(b,x)&&Object.propertyIsEnumerable.call(b,x))}function y(b,x,j){var w={};return j.isMergeableObject(b)&&d(b).forEach(function(_){w[_]=s(b[_],j)}),d(x).forEach(function(_){p(b,_)||(f(b,_)&&j.isMergeableObject(x[_])?w[_]=l(_,j)(b[_],x[_],j):w[_]=s(x[_],j))}),w}function m(b,x,j){j=j||{},j.arrayMerge=j.arrayMerge||c,j.isMergeableObject=j.isMergeableObject||e,j.cloneUnlessOtherwiseSpecified=s;var w=Array.isArray(x),_=Array.isArray(b),E=w===_;return E?w?j.arrayMerge(b,x,j):y(b,x,j):s(x,j)}m.all=function(b,x){if(!Array.isArray(b))throw new Error("first argument should be an array");return b.reduce(function(j,w){return m(j,w,x)},{})};var v=m;return Ib=v,Ib}var _te=wte();const Tf=Xe(_te);var qR={},YR;function jte(){if(YR)return qR;YR=1;var e;return function(t){(function(n){var r=typeof globalThis=="object"?globalThis:typeof Hs=="object"?Hs:typeof self=="object"?self:typeof this=="object"?this:c(),o=a(t);typeof r.Reflect<"u"&&(o=a(r.Reflect,o)),n(o,r),typeof r.Reflect>"u"&&(r.Reflect=t);function a(l,u){return function(d,f){Object.defineProperty(l,d,{configurable:!0,writable:!0,value:f}),u&&u(d,f)}}function i(){try{return Function("return this;")()}catch{}}function s(){try{return(0,eval)("(function() { return this; })()")}catch{}}function c(){return i()||s()}})(function(n,r){var o=Object.prototype.hasOwnProperty,a=typeof Symbol=="function",i=a&&typeof Symbol.toPrimitive<"u"?Symbol.toPrimitive:"@@toPrimitive",s=a&&typeof Symbol.iterator<"u"?Symbol.iterator:"@@iterator",c=typeof Object.create=="function",l={__proto__:[]}instanceof Array,u=!c&&!l,d={create:c?function(){return ca(Object.create(null))}:l?function(){return ca({__proto__:null})}:function(){return ca({})},has:u?function(X,ee){return o.call(X,ee)}:function(X,ee){return ee in X},get:u?function(X,ee){return o.call(X,ee)?X[ee]:void 0}:function(X,ee){return X[ee]}},f=Object.getPrototypeOf(Function),p=typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:wr(),y=typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:Qa(),m=typeof WeakMap=="function"?WeakMap:Qn(),v=a?Symbol.for("@reflect-metadata:registry"):void 0,b=Et(),x=mt(b);function j(X,ee,ie,pe){if(U(ie)){if(!B(X))throw new TypeError;if(!ce(ee))throw new TypeError;return A(X,ee)}else{if(!B(X))throw new TypeError;if(!re(ee))throw new TypeError;if(!re(pe)&&!U(pe)&&!Y(pe))throw new TypeError;return Y(pe)&&(pe=void 0),ie=te(ie),O(X,ee,ie,pe)}}n("decorate",j);function w(X,ee){function ie(pe,Ne){if(!re(pe))throw new TypeError;if(!U(Ne)&&!ve(Ne))throw new TypeError;D(X,ee,pe,Ne)}return ie}n("metadata",w);function _(X,ee,ie,pe){if(!re(ie))throw new TypeError;return U(pe)||(pe=te(pe)),D(X,ee,ie,pe)}n("defineMetadata",_);function E(X,ee,ie){if(!re(ee))throw new TypeError;return U(ie)||(ie=te(ie)),k(X,ee,ie)}n("hasMetadata",E);function S(X,ee,ie){if(!re(ee))throw new TypeError;return U(ie)||(ie=te(ie)),T(X,ee,ie)}n("hasOwnMetadata",S);function C(X,ee,ie){if(!re(ee))throw new TypeError;return U(ie)||(ie=te(ie)),I(X,ee,ie)}n("getMetadata",C);function M(X,ee,ie){if(!re(ee))throw new TypeError;return U(ie)||(ie=te(ie)),L(X,ee,ie)}n("getOwnMetadata",M);function P(X,ee){if(!re(X))throw new TypeError;return U(ee)||(ee=te(ee)),z(X,ee)}n("getMetadataKeys",P);function N(X,ee){if(!re(X))throw new TypeError;return U(ee)||(ee=te(ee)),H(X,ee)}n("getOwnMetadataKeys",N);function R(X,ee,ie){if(!re(ee))throw new TypeError;if(U(ie)||(ie=te(ie)),!re(ee))throw new TypeError;U(ie)||(ie=te(ie));var pe=yn(ee,ie,!1);return U(pe)?!1:pe.OrdinaryDeleteMetadata(X,ee,ie)}n("deleteMetadata",R);function A(X,ee){for(var ie=X.length-1;ie>=0;--ie){var pe=X[ie],Ne=pe(ee);if(!U(Ne)&&!Y(Ne)){if(!ce(Ne))throw new TypeError;ee=Ne}}return ee}function O(X,ee,ie,pe){for(var Ne=X.length-1;Ne>=0;--Ne){var Ot=X[Ne],xt=Ot(ee,ie,pe);if(!U(xt)&&!Y(xt)){if(!re(xt))throw new TypeError;pe=xt}}return pe}function k(X,ee,ie){var pe=T(X,ee,ie);if(pe)return!0;var Ne=it(ee);return Y(Ne)?!1:k(X,Ne,ie)}function T(X,ee,ie){var pe=yn(ee,ie,!1);return U(pe)?!1:W(pe.OrdinaryHasOwnMetadata(X,ee,ie))}function I(X,ee,ie){var pe=T(X,ee,ie);if(pe)return L(X,ee,ie);var Ne=it(ee);if(!Y(Ne))return I(X,Ne,ie)}function L(X,ee,ie){var pe=yn(ee,ie,!1);if(!U(pe))return pe.OrdinaryGetOwnMetadata(X,ee,ie)}function D(X,ee,ie,pe){var Ne=yn(ie,pe,!0);Ne.OrdinaryDefineOwnMetadata(X,ee,ie,pe)}function z(X,ee){var ie=H(X,ee),pe=it(X);if(pe===null)return ie;var Ne=z(pe,ee);if(Ne.length<=0)return ie;if(ie.length<=0)return Ne;for(var Ot=new y,xt=[],Be=0,ge=ie;Be<ge.length;Be++){var we=ge[Be],_e=Ot.has(we);_e||(Ot.add(we),xt.push(we))}for(var je=0,Le=Ne;je<Le.length;je++){var we=Le[je],_e=Ot.has(we);_e||(Ot.add(we),xt.push(we))}return xt}function H(X,ee){var ie=yn(X,ee,!1);return ie?ie.OrdinaryOwnMetadataKeys(X,ee):[]}function F(X){if(X===null)return 1;switch(typeof X){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return X===null?1:6;default:return 6}}function U(X){return X===void 0}function Y(X){return X===null}function G(X){return typeof X=="symbol"}function re(X){return typeof X=="object"?X!==null:typeof X=="function"}function Z(X,ee){switch(F(X)){case 0:return X;case 1:return X;case 2:return X;case 3:return X;case 4:return X;case 5:return X}var ie="string",pe=qe(X,i);if(pe!==void 0){var Ne=pe.call(X,ie);if(re(Ne))throw new TypeError;return Ne}return q(X)}function q(X,ee){var ie,pe;{var Ne=X.toString;if(se(Ne)){var pe=Ne.call(X);if(!re(pe))return pe}var ie=X.valueOf;if(se(ie)){var pe=ie.call(X);if(!re(pe))return pe}}throw new TypeError}function W(X){return!!X}function Q(X){return""+X}function te(X){var ee=Z(X);return G(ee)?ee:Q(ee)}function B(X){return Array.isArray?Array.isArray(X):X instanceof Object?X instanceof Array:Object.prototype.toString.call(X)==="[object Array]"}function se(X){return typeof X=="function"}function ce(X){return typeof X=="function"}function ve(X){switch(F(X)){case 3:return!0;case 4:return!0;default:return!1}}function Te(X,ee){return X===ee||X!==X&&ee!==ee}function qe(X,ee){var ie=X[ee];if(ie!=null){if(!se(ie))throw new TypeError;return ie}}function Ye(X){var ee=qe(X,s);if(!se(ee))throw new TypeError;var ie=ee.call(X);if(!re(ie))throw new TypeError;return ie}function ze(X){return X.value}function at(X){var ee=X.next();return ee.done?!1:ee}function He(X){var ee=X.return;ee&&ee.call(X)}function it(X){var ee=Object.getPrototypeOf(X);if(typeof X!="function"||X===f||ee!==f)return ee;var ie=X.prototype,pe=ie&&Object.getPrototypeOf(ie);if(pe==null||pe===Object.prototype)return ee;var Ne=pe.constructor;return typeof Ne!="function"||Ne===X?ee:Ne}function Vt(){var X;!U(v)&&typeof r.Reflect<"u"&&!(v in r.Reflect)&&typeof r.Reflect.defineMetadata=="function"&&(X=At(r.Reflect));var ee,ie,pe,Ne=new m,Ot={registerProvider:xt,getProvider:ge,setProvider:_e};return Ot;function xt(je){if(!Object.isExtensible(Ot))throw new Error("Cannot add provider to a frozen registry.");switch(!0){case X===je:break;case U(ee):ee=je;break;case ee===je:break;case U(ie):ie=je;break;case ie===je:break;default:pe===void 0&&(pe=new y),pe.add(je);break}}function Be(je,Le){if(!U(ee)){if(ee.isProviderFor(je,Le))return ee;if(!U(ie)){if(ie.isProviderFor(je,Le))return ee;if(!U(pe))for(var ct=Ye(pe);;){var St=at(ct);if(!St)return;var $=ze(St);if($.isProviderFor(je,Le))return He(ct),$}}}if(!U(X)&&X.isProviderFor(je,Le))return X}function ge(je,Le){var ct=Ne.get(je),St;return U(ct)||(St=ct.get(Le)),U(St)&&(St=Be(je,Le),U(St)||(U(ct)&&(ct=new p,Ne.set(je,ct)),ct.set(Le,St))),St}function we(je){if(U(je))throw new TypeError;return ee===je||ie===je||!U(pe)&&pe.has(je)}function _e(je,Le,ct){if(!we(ct))throw new Error("Metadata provider not registered.");var St=ge(je,Le);if(St!==ct){if(!U(St))return!1;var $=Ne.get(je);U($)&&($=new p,Ne.set(je,$)),$.set(Le,ct)}return!0}}function Et(){var X;return!U(v)&&re(r.Reflect)&&Object.isExtensible(r.Reflect)&&(X=r.Reflect[v]),U(X)&&(X=Vt()),!U(v)&&re(r.Reflect)&&Object.isExtensible(r.Reflect)&&Object.defineProperty(r.Reflect,v,{enumerable:!1,configurable:!1,writable:!1,value:X}),X}function mt(X){var ee=new m,ie={isProviderFor:function(we,_e){var je=ee.get(we);return U(je)?!1:je.has(_e)},OrdinaryDefineOwnMetadata:xt,OrdinaryHasOwnMetadata:Ne,OrdinaryGetOwnMetadata:Ot,OrdinaryOwnMetadataKeys:Be,OrdinaryDeleteMetadata:ge};return b.registerProvider(ie),ie;function pe(we,_e,je){var Le=ee.get(we),ct=!1;if(U(Le)){if(!je)return;Le=new p,ee.set(we,Le),ct=!0}var St=Le.get(_e);if(U(St)){if(!je)return;if(St=new p,Le.set(_e,St),!X.setProvider(we,_e,ie))throw Le.delete(_e),ct&&ee.delete(we),new Error("Wrong provider for target.")}return St}function Ne(we,_e,je){var Le=pe(_e,je,!1);return U(Le)?!1:W(Le.has(we))}function Ot(we,_e,je){var Le=pe(_e,je,!1);if(!U(Le))return Le.get(we)}function xt(we,_e,je,Le){var ct=pe(je,Le,!0);ct.set(we,_e)}function Be(we,_e){var je=[],Le=pe(we,_e,!1);if(U(Le))return je;for(var ct=Le.keys(),St=Ye(ct),$=0;;){var K=at(St);if(!K)return je.length=$,je;var ne=ze(K);try{je[$]=ne}catch(le){try{He(St)}finally{throw le}}$++}}function ge(we,_e,je){var Le=pe(_e,je,!1);if(U(Le)||!Le.delete(we))return!1;if(Le.size===0){var ct=ee.get(_e);U(ct)||(ct.delete(je),ct.size===0&&ee.delete(ct))}return!0}}function At(X){var ee=X.defineMetadata,ie=X.hasOwnMetadata,pe=X.getOwnMetadata,Ne=X.getOwnMetadataKeys,Ot=X.deleteMetadata,xt=new m,Be={isProviderFor:function(ge,we){var _e=xt.get(ge);return!U(_e)&&_e.has(we)?!0:Ne(ge,we).length?(U(_e)&&(_e=new y,xt.set(ge,_e)),_e.add(we),!0):!1},OrdinaryDefineOwnMetadata:ee,OrdinaryHasOwnMetadata:ie,OrdinaryGetOwnMetadata:pe,OrdinaryOwnMetadataKeys:Ne,OrdinaryDeleteMetadata:Ot};return Be}function yn(X,ee,ie){var pe=b.getProvider(X,ee);if(!U(pe))return pe;if(ie){if(b.setProvider(X,ee,x))return x;throw new Error("Illegal state.")}}function wr(){var X={},ee=[],ie=function(){function Be(ge,we,_e){this._index=0,this._keys=ge,this._values=we,this._selector=_e}return Be.prototype["@@iterator"]=function(){return this},Be.prototype[s]=function(){return this},Be.prototype.next=function(){var ge=this._index;if(ge>=0&&ge<this._keys.length){var we=this._selector(this._keys[ge],this._values[ge]);return ge+1>=this._keys.length?(this._index=-1,this._keys=ee,this._values=ee):this._index++,{value:we,done:!1}}return{value:void 0,done:!0}},Be.prototype.throw=function(ge){throw this._index>=0&&(this._index=-1,this._keys=ee,this._values=ee),ge},Be.prototype.return=function(ge){return this._index>=0&&(this._index=-1,this._keys=ee,this._values=ee),{value:ge,done:!0}},Be}(),pe=function(){function Be(){this._keys=[],this._values=[],this._cacheKey=X,this._cacheIndex=-2}return Object.defineProperty(Be.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),Be.prototype.has=function(ge){return this._find(ge,!1)>=0},Be.prototype.get=function(ge){var we=this._find(ge,!1);return we>=0?this._values[we]:void 0},Be.prototype.set=function(ge,we){var _e=this._find(ge,!0);return this._values[_e]=we,this},Be.prototype.delete=function(ge){var we=this._find(ge,!1);if(we>=0){for(var _e=this._keys.length,je=we+1;je<_e;je++)this._keys[je-1]=this._keys[je],this._values[je-1]=this._values[je];return this._keys.length--,this._values.length--,Te(ge,this._cacheKey)&&(this._cacheKey=X,this._cacheIndex=-2),!0}return!1},Be.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=X,this._cacheIndex=-2},Be.prototype.keys=function(){return new ie(this._keys,this._values,Ne)},Be.prototype.values=function(){return new ie(this._keys,this._values,Ot)},Be.prototype.entries=function(){return new ie(this._keys,this._values,xt)},Be.prototype["@@iterator"]=function(){return this.entries()},Be.prototype[s]=function(){return this.entries()},Be.prototype._find=function(ge,we){if(!Te(this._cacheKey,ge)){this._cacheIndex=-1;for(var _e=0;_e<this._keys.length;_e++)if(Te(this._keys[_e],ge)){this._cacheIndex=_e;break}}return this._cacheIndex<0&&we&&(this._cacheIndex=this._keys.length,this._keys.push(ge),this._values.push(void 0)),this._cacheIndex},Be}();return pe;function Ne(Be,ge){return Be}function Ot(Be,ge){return ge}function xt(Be,ge){return[Be,ge]}}function Qa(){var X=function(){function ee(){this._map=new p}return Object.defineProperty(ee.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),ee.prototype.has=function(ie){return this._map.has(ie)},ee.prototype.add=function(ie){return this._map.set(ie,ie),this},ee.prototype.delete=function(ie){return this._map.delete(ie)},ee.prototype.clear=function(){this._map.clear()},ee.prototype.keys=function(){return this._map.keys()},ee.prototype.values=function(){return this._map.keys()},ee.prototype.entries=function(){return this._map.entries()},ee.prototype["@@iterator"]=function(){return this.keys()},ee.prototype[s]=function(){return this.keys()},ee}();return X}function Qn(){var X=16,ee=d.create(),ie=pe();return function(){function ge(){this._key=pe()}return ge.prototype.has=function(we){var _e=Ne(we,!1);return _e!==void 0?d.has(_e,this._key):!1},ge.prototype.get=function(we){var _e=Ne(we,!1);return _e!==void 0?d.get(_e,this._key):void 0},ge.prototype.set=function(we,_e){var je=Ne(we,!0);return je[this._key]=_e,this},ge.prototype.delete=function(we){var _e=Ne(we,!1);return _e!==void 0?delete _e[this._key]:!1},ge.prototype.clear=function(){this._key=pe()},ge}();function pe(){var ge;do ge="@@WeakMap@@"+Be();while(d.has(ee,ge));return ee[ge]=!0,ge}function Ne(ge,we){if(!o.call(ge,ie)){if(!we)return;Object.defineProperty(ge,ie,{value:d.create()})}return ge[ie]}function Ot(ge,we){for(var _e=0;_e<we;++_e)ge[_e]=Math.random()*255|0;return ge}function xt(ge){if(typeof Uint8Array=="function"){var we=new Uint8Array(ge);return typeof crypto<"u"?crypto.getRandomValues(we):typeof msCrypto<"u"?msCrypto.getRandomValues(we):Ot(we,ge),we}return Ot(new Array(ge),ge)}function Be(){var ge=xt(X);ge[6]=ge[6]&79|64,ge[8]=ge[8]&191|128;for(var we="",_e=0;_e<X;++_e){var je=ge[_e];(_e===4||_e===6||_e===8)&&(we+="-"),je<16&&(we+="0"),we+=je.toString(16).toLowerCase()}return we}}function ca(X){return X.__=void 0,delete X.__,X}})}(e||(e={})),qR}jte(),typeof window<"u"&&(window.Buffer=Yxe),typeof Mm<"u"&&typeof require<"u"&&(Mm.Buffer=require("buffer/").Buffer);class Rt{static isObject(t){return t!==null&&typeof t=="object"}static isObjectWithName(t){return t!==null&&typeof t=="object"&&t.name!==void 0}static assign(t,...n){for(const r of n)for(const o of Object.getOwnPropertyNames(r))t[o]=r[o]}static mixedListToArray(t){return t!==null&&typeof t=="object"?Object.keys(t).map(n=>t[n]):t}}class xe extends Error{get name(){return this.constructor.name}constructor(t){super(t),Object.setPrototypeOf?Object.setPrototypeOf(this,new.target.prototype):this.__proto__=new.target.prototype}}class Hi extends xe{constructor(){super("Locking not supported on given driver.")}}class Db extends xe{constructor(){super('Cannot perform update query because update values are not defined. Call "qb.set(...)" method to specify updated values.')}}class dt{static isMssqlParameter(t){return this.check(t,"MssqlParameter")}static isEntityMetadata(t){return this.check(t,"EntityMetadata")}static isColumnMetadata(t){return this.check(t,"ColumnMetadata")}static isSelectQueryBuilder(t){return this.check(t,"SelectQueryBuilder")}static isInsertQueryBuilder(t){return this.check(t,"InsertQueryBuilder")}static isDeleteQueryBuilder(t){return this.check(t,"DeleteQueryBuilder")}static isUpdateQueryBuilder(t){return this.check(t,"UpdateQueryBuilder")}static isSoftDeleteQueryBuilder(t){return this.check(t,"SoftDeleteQueryBuilder")}static isRelationQueryBuilder(t){return this.check(t,"RelationQueryBuilder")}static isBrackets(t){return this.check(t,"Brackets")||this.check(t,"NotBrackets")}static isNotBrackets(t){return this.check(t,"NotBrackets")}static isSubject(t){return this.check(t,"Subject")}static isRdbmsSchemaBuilder(t){return this.check(t,"RdbmsSchemaBuilder")}static isMongoEntityManager(t){return this.check(t,"MongoEntityManager")}static isSqljsEntityManager(t){return this.check(t,"SqljsEntityManager")}static isEntitySchema(t){return this.check(t,"EntitySchema")}static isBaseEntityConstructor(t){return typeof t=="function"&&typeof t.hasId=="function"&&typeof t.save=="function"&&typeof t.useDataSource=="function"}static isFindOperator(t){return this.check(t,"FindOperator")||this.check(t,"EqualOperator")}static isEqualOperator(t){return this.check(t,"EqualOperator")}static isQuery(t){return this.check(t,"Query")}static isTable(t){return this.check(t,"Table")}static isTableCheck(t){return this.check(t,"TableCheck")}static isTableColumn(t){return this.check(t,"TableColumn")}static isTableExclusion(t){return this.check(t,"TableExclusion")}static isTableForeignKey(t){return this.check(t,"TableForeignKey")}static isTableIndex(t){return this.check(t,"TableIndex")}static isTableUnique(t){return this.check(t,"TableUnique")}static isView(t){return this.check(t,"View")}static isDataSource(t){return this.check(t,"DataSource")}static check(t,n){return typeof t=="object"&&t!==null&&t["@instanceof"]===Symbol.for(n)}}class Ete extends xe{constructor(t,n){super(),this.entityClass=t,this.criteria=n,this.message=`Could not find any entity of type "${this.stringifyTarget(t)}" matching: ${this.stringifyCriteria(n)}`}stringifyTarget(t){return dt.isEntitySchema(t)?t.options.name:typeof t=="function"||Rt.isObject(t)&&"name"in t?t.name:t}stringifyCriteria(t){try{return JSON.stringify(t,null,4)}catch{}return""+t}}class KR extends xe{constructor(t,n,r){super(`The optimistic lock on entity ${t} failed, version ${n} was expected, but is actually ${r}.`)}}class XR extends xe{constructor(){super("Your database does not support LIMIT on UPDATE statements.")}}class Ste extends xe{constructor(t){super(`Entity "${t.name}" does not have delete date columns.`)}}class Rf extends xe{constructor(){super("OUTPUT or RETURNING clause only supported by Microsoft SQL Server or PostgreSQL or MariaDB databases.")}}class kr extends xe{constructor(t,n){super(t),Object.setPrototypeOf(this,kr.prototype),this.message=`Property "${t}" was not found in "${n.targetName}". Make sure your query is correct.`}}class Cte extends xe{constructor(t){super(`Entity ${t} does not have version or update date columns.`)}}class Ote extends xe{constructor(){super('Cannot perform insert query because values are not defined. Call "qb.values(...)" method to specify inserted values.')}}class fl extends xe{constructor(){super("The optimistic lock can be used only with getOne() method.")}}class Mte extends xe{constructor(t){super(),t.length===1?this.message=`Relation "${t[0]}" was not found; please check if it is correct and really exists in your entity.`:this.message=`Relations ${t.map(n=>`"${n}"`).join(", ")} were not found; please check if relations are correct and they exist in your entities.`}}class Nte extends xe{constructor(){super("An open transaction is required for pessimistic lock.")}}class Pte extends xe{constructor(){super("RDBMS does not support OFFSET without LIMIT in SELECT statements. You must use limit in conjunction with offset function (or take in conjunction with skip function if you are using pagination).")}}class GR{constructor(t){Rt.assign(this,t||{})}get target(){return this.metadata.target}get hasMetadata(){return!!this._metadata}set metadata(t){this._metadata=t}get metadata(){if(!this._metadata)throw new xe(`Cannot get entity metadata for the given alias "${this.name}"`);return this._metadata}}class Ar{static isAliasProperty(t){if(typeof t!="string"||t.indexOf(".")===-1)return!1;const[n,r]=t.split(".");return!(!n||!r||t.indexOf("(")!==-1||t.indexOf(")")!==-1)}}var Lb={exports:{}},Fb={exports:{}},QR;function Wi(){return QR||(QR=1,typeof Object.create=="function"?Fb.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:Fb.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}),Fb.exports}var Bb={exports:{}},JR;function Ma(){return JR||(JR=1,function(e,t){var n=Kxe(),r=n.Buffer;function o(i,s){for(var c in i)s[c]=i[c]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?e.exports=n:(o(n,t),t.Buffer=a);function a(i,s,c){return r(i,s,c)}a.prototype=Object.create(r.prototype),o(r,a),a.from=function(i,s,c){if(typeof i=="number")throw new TypeError("Argument must not be a number");return r(i,s,c)},a.alloc=function(i,s,c){if(typeof i!="number")throw new TypeError("Argument must be a number");var l=r(i);return s!==void 0?typeof c=="string"?l.fill(s,c):l.fill(s):l.fill(0),l},a.allocUnsafe=function(i){if(typeof i!="number")throw new TypeError("Argument must be a number");return r(i)},a.allocUnsafeSlow=function(i){if(typeof i!="number")throw new TypeError("Argument must be a number");return n.SlowBuffer(i)}}(Bb,Bb.exports)),Bb.exports}var $b,ZR;function qi(){if(ZR)return $b;ZR=1;var e=Ma().Buffer;function t(n,r){this._block=e.alloc(n),this._finalSize=r,this._blockSize=n,this._len=0}return t.prototype.update=function(n,r){typeof n=="string"&&(r=r||"utf8",n=e.from(n,r));for(var o=this._block,a=this._blockSize,i=n.length,s=this._len,c=0;c<i;){for(var l=s%a,u=Math.min(i-c,a-l),d=0;d<u;d++)o[l+d]=n[c+d];s+=u,c+=u,s%a===0&&this._update(o)}return this._len+=i,this},t.prototype.digest=function(n){var r=this._len%this._blockSize;this._block[r]=128,this._block.fill(0,r+1),r>=this._finalSize&&(this._update(this._block),this._block.fill(0));var o=this._len*8;if(o<=4294967295)this._block.writeUInt32BE(o,this._blockSize-4);else{var a=(o&4294967295)>>>0,i=(o-a)/4294967296;this._block.writeUInt32BE(i,this._blockSize-8),this._block.writeUInt32BE(a,this._blockSize-4)}this._update(this._block);var s=this._hash();return n?s.toString(n):s},t.prototype._update=function(){throw new Error("_update must be implemented by subclass")},$b=t,$b}var zb,eI;function kte(){if(eI)return zb;eI=1;var e=Wi(),t=qi(),n=Ma().Buffer,r=[1518500249,1859775393,-1894007588,-899497514],o=new Array(80);function a(){this.init(),this._w=o,t.call(this,64,56)}e(a,t),a.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function i(l){return l<<5|l>>>27}function s(l){return l<<30|l>>>2}function c(l,u,d,f){return l===0?u&d|~u&f:l===2?u&d|u&f|d&f:u^d^f}return a.prototype._update=function(l){for(var u=this._w,d=this._a|0,f=this._b|0,p=this._c|0,y=this._d|0,m=this._e|0,v=0;v<16;++v)u[v]=l.readInt32BE(v*4);for(;v<80;++v)u[v]=u[v-3]^u[v-8]^u[v-14]^u[v-16];for(var b=0;b<80;++b){var x=~~(b/20),j=i(d)+c(x,f,p,y)+m+u[b]+r[x]|0;m=y,y=p,p=s(f),f=d,d=j}this._a=d+this._a|0,this._b=f+this._b|0,this._c=p+this._c|0,this._d=y+this._d|0,this._e=m+this._e|0},a.prototype._hash=function(){var l=n.allocUnsafe(20);return l.writeInt32BE(this._a|0,0),l.writeInt32BE(this._b|0,4),l.writeInt32BE(this._c|0,8),l.writeInt32BE(this._d|0,12),l.writeInt32BE(this._e|0,16),l},zb=a,zb}var Vb,tI;function Ate(){if(tI)return Vb;tI=1;var e=Wi(),t=qi(),n=Ma().Buffer,r=[1518500249,1859775393,-1894007588,-899497514],o=new Array(80);function a(){this.init(),this._w=o,t.call(this,64,56)}e(a,t),a.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function i(u){return u<<1|u>>>31}function s(u){return u<<5|u>>>27}function c(u){return u<<30|u>>>2}function l(u,d,f,p){return u===0?d&f|~d&p:u===2?d&f|d&p|f&p:d^f^p}return a.prototype._update=function(u){for(var d=this._w,f=this._a|0,p=this._b|0,y=this._c|0,m=this._d|0,v=this._e|0,b=0;b<16;++b)d[b]=u.readInt32BE(b*4);for(;b<80;++b)d[b]=i(d[b-3]^d[b-8]^d[b-14]^d[b-16]);for(var x=0;x<80;++x){var j=~~(x/20),w=s(f)+l(j,p,y,m)+v+d[x]+r[j]|0;v=m,m=y,y=c(p),p=f,f=w}this._a=f+this._a|0,this._b=p+this._b|0,this._c=y+this._c|0,this._d=m+this._d|0,this._e=v+this._e|0},a.prototype._hash=function(){var u=n.allocUnsafe(20);return u.writeInt32BE(this._a|0,0),u.writeInt32BE(this._b|0,4),u.writeInt32BE(this._c|0,8),u.writeInt32BE(this._d|0,12),u.writeInt32BE(this._e|0,16),u},Vb=a,Vb}var Ub,nI;function rI(){if(nI)return Ub;nI=1;var e=Wi(),t=qi(),n=Ma().Buffer,r=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],o=new Array(64);function a(){this.init(),this._w=o,t.call(this,64,56)}e(a,t),a.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this};function i(f,p,y){return y^f&(p^y)}function s(f,p,y){return f&p|y&(f|p)}function c(f){return(f>>>2|f<<30)^(f>>>13|f<<19)^(f>>>22|f<<10)}function l(f){return(f>>>6|f<<26)^(f>>>11|f<<21)^(f>>>25|f<<7)}function u(f){return(f>>>7|f<<25)^(f>>>18|f<<14)^f>>>3}function d(f){return(f>>>17|f<<15)^(f>>>19|f<<13)^f>>>10}return a.prototype._update=function(f){for(var p=this._w,y=this._a|0,m=this._b|0,v=this._c|0,b=this._d|0,x=this._e|0,j=this._f|0,w=this._g|0,_=this._h|0,E=0;E<16;++E)p[E]=f.readInt32BE(E*4);for(;E<64;++E)p[E]=d(p[E-2])+p[E-7]+u(p[E-15])+p[E-16]|0;for(var S=0;S<64;++S){var C=_+l(x)+i(x,j,w)+r[S]+p[S]|0,M=c(y)+s(y,m,v)|0;_=w,w=j,j=x,x=b+C|0,b=v,v=m,m=y,y=C+M|0}this._a=y+this._a|0,this._b=m+this._b|0,this._c=v+this._c|0,this._d=b+this._d|0,this._e=x+this._e|0,this._f=j+this._f|0,this._g=w+this._g|0,this._h=_+this._h|0},a.prototype._hash=function(){var f=n.allocUnsafe(32);return f.writeInt32BE(this._a,0),f.writeInt32BE(this._b,4),f.writeInt32BE(this._c,8),f.writeInt32BE(this._d,12),f.writeInt32BE(this._e,16),f.writeInt32BE(this._f,20),f.writeInt32BE(this._g,24),f.writeInt32BE(this._h,28),f},Ub=a,Ub}var Hb,oI;function Tte(){if(oI)return Hb;oI=1;var e=Wi(),t=rI(),n=qi(),r=Ma().Buffer,o=new Array(64);function a(){this.init(),this._w=o,n.call(this,64,56)}return e(a,t),a.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},a.prototype._hash=function(){var i=r.allocUnsafe(28);return i.writeInt32BE(this._a,0),i.writeInt32BE(this._b,4),i.writeInt32BE(this._c,8),i.writeInt32BE(this._d,12),i.writeInt32BE(this._e,16),i.writeInt32BE(this._f,20),i.writeInt32BE(this._g,24),i},Hb=a,Hb}var Wb,aI;function iI(){if(aI)return Wb;aI=1;var e=Wi(),t=qi(),n=Ma().Buffer,r=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],o=new Array(160);function a(){this.init(),this._w=o,t.call(this,128,112)}e(a,t),a.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this};function i(m,v,b){return b^m&(v^b)}function s(m,v,b){return m&v|b&(m|v)}function c(m,v){return(m>>>28|v<<4)^(v>>>2|m<<30)^(v>>>7|m<<25)}function l(m,v){return(m>>>14|v<<18)^(m>>>18|v<<14)^(v>>>9|m<<23)}function u(m,v){return(m>>>1|v<<31)^(m>>>8|v<<24)^m>>>7}function d(m,v){return(m>>>1|v<<31)^(m>>>8|v<<24)^(m>>>7|v<<25)}function f(m,v){return(m>>>19|v<<13)^(v>>>29|m<<3)^m>>>6}function p(m,v){return(m>>>19|v<<13)^(v>>>29|m<<3)^(m>>>6|v<<26)}function y(m,v){return m>>>0<v>>>0?1:0}return a.prototype._update=function(m){for(var v=this._w,b=this._ah|0,x=this._bh|0,j=this._ch|0,w=this._dh|0,_=this._eh|0,E=this._fh|0,S=this._gh|0,C=this._hh|0,M=this._al|0,P=this._bl|0,N=this._cl|0,R=this._dl|0,A=this._el|0,O=this._fl|0,k=this._gl|0,T=this._hl|0,I=0;I<32;I+=2)v[I]=m.readInt32BE(I*4),v[I+1]=m.readInt32BE(I*4+4);for(;I<160;I+=2){var L=v[I-30],D=v[I-15*2+1],z=u(L,D),H=d(D,L);L=v[I-2*2],D=v[I-2*2+1];var F=f(L,D),U=p(D,L),Y=v[I-7*2],G=v[I-7*2+1],re=v[I-16*2],Z=v[I-16*2+1],q=H+G|0,W=z+Y+y(q,H)|0;q=q+U|0,W=W+F+y(q,U)|0,q=q+Z|0,W=W+re+y(q,Z)|0,v[I]=W,v[I+1]=q}for(var Q=0;Q<160;Q+=2){W=v[Q],q=v[Q+1];var te=s(b,x,j),B=s(M,P,N),se=c(b,M),ce=c(M,b),ve=l(_,A),Te=l(A,_),qe=r[Q],Ye=r[Q+1],ze=i(_,E,S),at=i(A,O,k),He=T+Te|0,it=C+ve+y(He,T)|0;He=He+at|0,it=it+ze+y(He,at)|0,He=He+Ye|0,it=it+qe+y(He,Ye)|0,He=He+q|0,it=it+W+y(He,q)|0;var Vt=ce+B|0,Et=se+te+y(Vt,ce)|0;C=S,T=k,S=E,k=O,E=_,O=A,A=R+He|0,_=w+it+y(A,R)|0,w=j,R=N,j=x,N=P,x=b,P=M,M=He+Vt|0,b=it+Et+y(M,He)|0}this._al=this._al+M|0,this._bl=this._bl+P|0,this._cl=this._cl+N|0,this._dl=this._dl+R|0,this._el=this._el+A|0,this._fl=this._fl+O|0,this._gl=this._gl+k|0,this._hl=this._hl+T|0,this._ah=this._ah+b+y(this._al,M)|0,this._bh=this._bh+x+y(this._bl,P)|0,this._ch=this._ch+j+y(this._cl,N)|0,this._dh=this._dh+w+y(this._dl,R)|0,this._eh=this._eh+_+y(this._el,A)|0,this._fh=this._fh+E+y(this._fl,O)|0,this._gh=this._gh+S+y(this._gl,k)|0,this._hh=this._hh+C+y(this._hl,T)|0},a.prototype._hash=function(){var m=n.allocUnsafe(64);function v(b,x,j){m.writeInt32BE(b,j),m.writeInt32BE(x,j+4)}return v(this._ah,this._al,0),v(this._bh,this._bl,8),v(this._ch,this._cl,16),v(this._dh,this._dl,24),v(this._eh,this._el,32),v(this._fh,this._fl,40),v(this._gh,this._gl,48),v(this._hh,this._hl,56),m},Wb=a,Wb}var qb,sI;function Rte(){if(sI)return qb;sI=1;var e=Wi(),t=iI(),n=qi(),r=Ma().Buffer,o=new Array(160);function a(){this.init(),this._w=o,n.call(this,128,112)}return e(a,t),a.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},a.prototype._hash=function(){var i=r.allocUnsafe(48);function s(c,l,u){i.writeInt32BE(c,u),i.writeInt32BE(l,u+4)}return s(this._ah,this._al,0),s(this._bh,this._bl,8),s(this._ch,this._cl,16),s(this._dh,this._dl,24),s(this._eh,this._el,32),s(this._fh,this._fl,40),i},qb=a,qb}var cI;function Ite(){if(cI)return Lb.exports;cI=1;var e=Lb.exports=function(t){t=t.toLowerCase();var n=e[t];if(!n)throw new Error(t+" is not supported (we accept pull requests)");return new n};return e.sha=kte(),e.sha1=Ate(),e.sha224=Tte(),e.sha256=rI(),e.sha384=Rte(),e.sha512=iI(),Lb.exports}var Dte=Ite();const Lte=Xe(Dte);function Fte(e,t={}){const{segmentLength:n=4,separator:r="__",termLength:o=2}=t;return e.split(r).reduce((a,i)=>{const s=i.replace(/([a-z\xE0-\xFF])([A-Z\xC0-\xDF])/g,"$1 $2").split(" "),c=s.length>1?o:n,l=s.map(u=>u.substr(0,c)).join("");return a.push(l),a},[]).join(r)}function Bte(e,t={}){const n=Lte("sha1");n.update(e,"utf8");const r=n.digest("hex");return t.length?r.slice(0,t.length):r}class $te{static isGreaterOrEqual(t,n){const r=lI(t),o=lI(n);return r[0]>o[0]||r[0]===o[0]&&r[1]>o[1]||r[0]===o[0]&&r[1]===o[1]&&r[2]>=o[2]}}function lI(e=""){const t=[0,0,0];return e.split(".").forEach((n,r)=>t[r]=parseInt(n,10)),t}class ye{static isSQLiteFamily(t){return["sqlite","cordova","react-native","nativescript","sqljs","expo","better-sqlite3","capacitor"].includes(t.options.type)}static isMySQLFamily(t){return["mysql","mariadb"].includes(t.options.type)}static isReleaseVersionOrGreater(t,n){return t.version!=null&&$te.isGreaterOrEqual(t.version,n)}static isPostgresFamily(t){return["postgres","aurora-postgres","cockroachdb"].includes(t.options.type)}static buildDriverOptions(t,n){if(t.url){const r=this.parseConnectionUrl(t.url);n&&n.useSid&&r.database&&(r.sid=r.database);for(const o of Object.keys(r))typeof r[o]>"u"&&delete r[o];return Object.assign({},t,r)}return Object.assign({},t)}static buildMongoDBDriverOptions(t,n){if(t.url){const r=this.parseMongoDBConnectionUrl(t.url);n&&n.useSid&&r.database&&(r.sid=r.database);for(const o of Object.keys(r))typeof r[o]>"u"&&delete r[o];return Object.assign({},t,r)}return Object.assign({},t)}static buildAlias({maxAliasLength:t},n,...r){const o=n&&n.joiner?n.joiner:"_";let a=r.length===1?r[0]:r.join(o);if(t&&t>0&&a.length>t){if(n&&n.shorten===!0){const i=Fte(a);if(i.length<t)return i}return Bte(a,{length:t})}return a}static buildColumnAlias({maxAliasLength:t},n,...r){return typeof n=="string"?(r.unshift(n),n={shorten:!1,joiner:"_"}):n=Object.assign({shorten:!1,joiner:"_"},n),this.buildAlias({maxAliasLength:t},n,...r)}static parseConnectionUrl(t){const n=t.split(":")[0],r=t.indexOf("//"),o=t.substr(r+2),a=o.indexOf("/"),i=a!==-1?o.substr(0,a):o;let s=a!==-1?o.substr(a+1):void 0;s&&s.indexOf("?")!==-1&&(s=s.substr(0,s.indexOf("?")));const c=i.lastIndexOf("@"),l=i.substr(0,c),u=i.substr(c+1);let d=l,f="";const p=l.indexOf(":");p!==-1&&(d=l.substr(0,p),f=l.substr(p+1));const[y,m]=u.split(":");return{type:n,host:y,username:decodeURIComponent(d),password:decodeURIComponent(f),port:m?parseInt(m):void 0,database:s||void 0}}static parseMongoDBConnectionUrl(t){const n=t.split(":")[0],r=t.indexOf("//"),o=t.substr(r+2),a=o.indexOf("/"),i=a!==-1?o.substr(0,a):o;let s=a!==-1?o.substr(a+1):void 0,c="",l,u,d,f,p={};if(s&&s.indexOf("?")!==-1){c=s.substr(s.indexOf("?")+1,s.length);const _=c.split("&");let E,S;_.forEach(C=>{E=C.split("=")[0],S=C.split("=")[1],p[E]=S}),f=p.replicaSet,s=s.substr(0,s.indexOf("?"))}const y=i.lastIndexOf("@"),m=i.substr(0,y),v=i.substr(y+1);let b=m,x="";const j=m.indexOf(":");j!==-1&&(b=m.substr(0,j),x=m.substr(j+1)),f?d=v:[l,u]=v.split(":");let w={type:n,host:l,hostReplicaSet:d,username:decodeURIComponent(b),password:decodeURIComponent(x),port:u?parseInt(u):void 0,database:s||void 0};for(const[_,E]of Object.entries(p))w[_]=E;return w}}class uI{constructor(t,n,r){this.connection=t,this.queryExpressionMap=n,this.isSelectedEvaluated=!1,this.relationEvaluated=!1,r&&Rt.assign(this,r)}get isMany(){return this.isMappingMany!==void 0?this.isMappingMany:this.relation?this.relation.isManyToMany||this.relation.isOneToMany:!1}get isSelected(){if(!this.isSelectedEvaluated){let t=()=>{for(const n of this.queryExpressionMap.selects)if(n.selection===this.alias.name||this.metadata&&this.metadata.columns.find(r=>n.selection===this.alias.name+"."+r.propertyPath))return!0;return!1};this.isSelectedCache=t(),this.isSelectedEvaluated=!0}return this.isSelectedCache}get tablePath(){return this.metadata?this.metadata.tablePath:this.entityOrProperty}get parentAlias(){if(Ar.isAliasProperty(this.entityOrProperty))return this.entityOrProperty.substr(0,this.entityOrProperty.indexOf("."))}get relationPropertyPath(){if(Ar.isAliasProperty(this.entityOrProperty))return this.entityOrProperty.substr(this.entityOrProperty.indexOf(".")+1)}get relation(){if(!this.relationEvaluated){let t=()=>{if(!Ar.isAliasProperty(this.entityOrProperty))return;const n=this.queryExpressionMap.findAliasByName(this.parentAlias);let r=n.metadata.findRelationWithPropertyPath(this.relationPropertyPath);if(r||n.metadata.parentEntityMetadata&&(r=n.metadata.parentEntityMetadata.findRelationWithPropertyPath(this.relationPropertyPath),r))return r;throw new xe(`Relation with property path ${this.relationPropertyPath} in entity was not found.`)};this.relationCache=t.bind(this)(),this.relationEvaluated=!0}return this.relationCache}get metadata(){if(this.relation)return this.relation.inverseEntityMetadata;if(this.connection.hasMetadata(this.entityOrProperty))return this.connection.getMetadata(this.entityOrProperty);if(this.mapAsEntity&&this.connection.hasMetadata(this.mapAsEntity))return this.connection.getMetadata(this.mapAsEntity)}get junctionAlias(){if(!this.relation)throw new xe("Cannot get junction table for join without relation.");if(typeof this.entityOrProperty!="string")throw new xe("Junction property is not defined.");const t=this.entityOrProperty.substr(0,this.entityOrProperty.indexOf("."));return this.relation.isOwning?ye.buildAlias(this.connection.driver,void 0,t,this.alias.name):ye.buildAlias(this.connection.driver,void 0,this.alias.name,t)}get mapToPropertyParentAlias(){if(this.mapToProperty)return this.mapToProperty.split(".")[0]}get mapToPropertyPropertyName(){if(this.mapToProperty)return this.mapToProperty.split(".")[1]}}class Yb{constructor(t,n){this.queryExpressionMap=t,this.disableMixedMap=!1,Rt.assign(this,n||{})}get joinInverseSideMetadata(){return this.relation.inverseEntityMetadata}get parentAlias(){if(!Ar.isAliasProperty(this.relationName))throw new xe("Given value must be a string representation of alias property");return this.relationName.substr(0,this.relationName.indexOf("."))}get relationPropertyPath(){if(!Ar.isAliasProperty(this.relationName))throw new xe("Given value must be a string representation of alias property");return this.relationName.substr(this.relationName.indexOf(".")+1)}get relation(){if(!Ar.isAliasProperty(this.relationName))throw new xe("Given value must be a string representation of alias property");const t=this.queryExpressionMap.findAliasByName(this.parentAlias).metadata.findRelationWithPropertyPath(this.relationPropertyPath);if(!t)throw new xe(`Relation with property path ${this.relationPropertyPath} in entity was not found.`);return t}get junctionAlias(){const[t,n]=this.relationName.split(".");return t+"_"+n+"_rid"}get junctionMetadata(){return this.relation.junctionEntityMetadata}get mapToPropertyParentAlias(){return this.mapToProperty.substr(0,this.mapToProperty.indexOf("."))}get mapToPropertyPropertyPath(){return this.mapToProperty.substr(this.mapToProperty.indexOf(".")+1)}}class Kb{constructor(t,n){this.expressionMap=t,Rt.assign(this,n||{})}get joinInverseSideMetadata(){return this.relation.inverseEntityMetadata}get parentAlias(){if(!Ar.isAliasProperty(this.relationName))throw new xe("Given value must be a string representation of alias property");return this.relationName.split(".")[0]}get relationProperty(){if(!Ar.isAliasProperty(this.relationName))throw new xe("Given value is a string representation of alias property");return this.relationName.split(".")[1]}get junctionAlias(){const[t,n]=this.relationName.split(".");return t+"_"+n+"_rc"}get relation(){if(!Ar.isAliasProperty(this.relationName))throw new xe("Given value is a string representation of alias property");const[t,n]=this.relationName.split("."),r=this.expressionMap.findAliasByName(t).metadata.findRelationWithPropertyPath(n);if(!r)throw new xe(`Relation with property path ${n} in entity was not found.`);return r}get metadata(){if(!Ar.isAliasProperty(this.relationName))throw new xe("Given value is a string representation of alias property");const t=this.relationName.split(".")[0];return this.expressionMap.findAliasByName(t).metadata}get mapToPropertyPropertyName(){return this.mapToProperty.split(".")[1]}}class Xb{constructor(t){var n;this.connection=t,this.relationLoadStrategy="join",this.queryEntity=!1,this.aliases=[],this.queryType="select",this.selects=[],this.maxExecutionTime=0,this.selectDistinct=!1,this.selectDistinctOn=[],this.extraReturningColumns=[],this.onConflict="",this.onIgnore=!1,this.joinAttributes=[],this.relationIdAttributes=[],this.relationCountAttributes=[],this.wheres=[],this.havings=[],this.orderBys={},this.groupBys=[],this.withDeleted=!1,this.parameters={},this.disableEscaping=!0,this.enableRelationIdValues=!1,this.extraAppendedAndWhereCondition="",this.subQuery=!1,this.aliasNamePrefixingEnabled=!0,this.options=[],this.insertColumns=[],this.whereEntities=[],this.updateEntity=!0,this.callListeners=!0,this.useTransaction=!1,this.nativeParameters={},this.locallyGenerated={},this.commonTableExpressions=[],t.options.relationLoadStrategy&&(this.relationLoadStrategy=t.options.relationLoadStrategy),this.timeTravel=((n=t.options)==null?void 0:n.timeTravelQueries)||!1}get allOrderBys(){if(!Object.keys(this.orderBys).length&&this.mainAlias.hasMetadata&&this.options.indexOf("disable-global-order")===-1){const t=this.mainAlias.metadata.orderBy||{};return Object.keys(t).reduce((n,r)=>(n[this.mainAlias.name+"."+r]=t[r],n),{})}return this.orderBys}setMainAlias(t){return this.mainAlias=t,t}createAlias(t){let n=t.name;!n&&t.tablePath&&(n=t.tablePath),!n&&typeof t.target=="function"&&(n=t.target.name),!n&&typeof t.target=="string"&&(n=t.target);const r=new GR;return r.type=t.type,n&&(r.name=n),t.metadata&&(r.metadata=t.metadata),t.target&&!r.hasMetadata&&(r.metadata=this.connection.getMetadata(t.target)),t.tablePath&&(r.tablePath=t.tablePath),t.subQuery&&(r.subQuery=t.subQuery),this.aliases.push(r),r}findAliasByName(t){const n=this.aliases.find(r=>r.name===t);if(!n)throw new xe(`"${t}" alias was not found. Maybe you forgot to join it?`);return n}findColumnByAliasExpression(t){const[n,r]=t.split(".");return this.findAliasByName(n).metadata.findColumnWithPropertyName(r)}get relationMetadata(){if(!this.mainAlias)throw new xe("Entity to work with is not specified!");const t=this.mainAlias.metadata.findRelationWithPropertyPath(this.relationPropertyPath);if(!t)throw new xe(`Relation ${this.relationPropertyPath} was not found in entity ${this.mainAlias.name}`);return t}clone(){const t=new Xb(this.connection);return t.queryType=this.queryType,t.selects=this.selects.map(n=>n),t.maxExecutionTime=this.maxExecutionTime,t.selectDistinct=this.selectDistinct,t.selectDistinctOn=this.selectDistinctOn,this.aliases.forEach(n=>t.aliases.push(new GR(n))),t.relationLoadStrategy=this.relationLoadStrategy,t.mainAlias=this.mainAlias,t.valuesSet=this.valuesSet,t.returning=this.returning,t.onConflict=this.onConflict,t.onIgnore=this.onIgnore,t.onUpdate=this.onUpdate,t.joinAttributes=this.joinAttributes.map(n=>new uI(this.connection,this,n)),t.relationIdAttributes=this.relationIdAttributes.map(n=>new Yb(this,n)),t.relationCountAttributes=this.relationCountAttributes.map(n=>new Kb(this,n)),t.wheres=this.wheres.map(n=>({...n})),t.havings=this.havings.map(n=>({...n})),t.orderBys=Object.assign({},this.orderBys),t.groupBys=this.groupBys.map(n=>n),t.limit=this.limit,t.offset=this.offset,t.skip=this.skip,t.take=this.take,t.lockMode=this.lockMode,t.onLocked=this.onLocked,t.lockVersion=this.lockVersion,t.lockTables=this.lockTables,t.withDeleted=this.withDeleted,t.parameters=Object.assign({},this.parameters),t.disableEscaping=this.disableEscaping,t.enableRelationIdValues=this.enableRelationIdValues,t.extraAppendedAndWhereCondition=this.extraAppendedAndWhereCondition,t.subQuery=this.subQuery,t.aliasNamePrefixingEnabled=this.aliasNamePrefixingEnabled,t.cache=this.cache,t.cacheId=this.cacheId,t.cacheDuration=this.cacheDuration,t.relationPropertyPath=this.relationPropertyPath,t.of=this.of,t.insertColumns=this.insertColumns,t.whereEntities=this.whereEntities,t.updateEntity=this.updateEntity,t.callListeners=this.callListeners,t.useTransaction=this.useTransaction,t.timeTravel=this.timeTravel,t.nativeParameters=Object.assign({},this.nativeParameters),t.comment=this.comment,t.commonTableExpressions=this.commonTableExpressions.map(n=>({alias:n.alias,queryBuilder:typeof n.queryBuilder=="string"?n.queryBuilder:n.queryBuilder.clone(),options:n.options})),t}}class dI{constructor(t){this["@instanceof"]=Symbol.for("Brackets"),this.whereFactory=t}}class Gb{static transformFrom(t,n){return Array.isArray(t)?t.slice().reverse().reduce((r,o)=>o.from(r),n):t.from(n)}static transformTo(t,n){return Array.isArray(t)?t.reduce((r,o)=>o.to(r),n):t.to(n)}}class pl{constructor(t,n,r=!0,o=!1,a,i){this["@instanceof"]=Symbol.for("FindOperator"),this._type=t,this._value=n,this._useParameter=r,this._multipleParameters=o,this._getSql=a,this._objectLiteralParameters=i}get useParameter(){return dt.isFindOperator(this._value)?this._value.useParameter:this._useParameter}get multipleParameters(){return dt.isFindOperator(this._value)?this._value.multipleParameters:this._multipleParameters}get type(){return this._type}get value(){return dt.isFindOperator(this._value)?this._value.value:this._value}get objectLiteralParameters(){return dt.isFindOperator(this._value)?this._value.objectLiteralParameters:this._objectLiteralParameters}get child(){if(dt.isFindOperator(this._value))return this._value}get getSql(){return dt.isFindOperator(this._value)?this._value.getSql:this._getSql}transformValue(t){this._value instanceof pl?this._value.transformValue(t):this._value=Array.isArray(this._value)&&this._multipleParameters?this._value.map(n=>t&&Gb.transformTo(t,n)):Gb.transformTo(t,this._value)}}function go(e){return new pl("in",e,!0,!0)}const zte=/[.*+\-?^${}()|[\]\\]/g,Vte=e=>e.replace(zte,"\\$&");class Nt{constructor(t,n){this["@instanceof"]=Symbol.for("QueryBuilder"),this.parameterIndex=0,dt.isDataSource(t)?(this.connection=t,this.queryRunner=n,this.expressionMap=new Xb(this.connection)):(this.connection=t.connection,this.queryRunner=t.queryRunner,this.expressionMap=t.expressionMap.clone())}static registerQueryBuilderClass(t,n){Nt.queryBuilderRegistry[t]=n}get alias(){if(!this.expressionMap.mainAlias)throw new xe("Main alias is not set");return this.expressionMap.mainAlias.name}select(t,n){return this.expressionMap.queryType="select",Array.isArray(t)?this.expressionMap.selects=t.map(r=>({selection:r})):t&&(this.expressionMap.selects=[{selection:t,aliasName:n}]),dt.isSelectQueryBuilder(this)?this:Nt.queryBuilderRegistry.SelectQueryBuilder(this)}insert(){return this.expressionMap.queryType="insert",dt.isInsertQueryBuilder(this)?this:Nt.queryBuilderRegistry.InsertQueryBuilder(this)}update(t,n){const r=n||t;if(t=dt.isEntitySchema(t)?t.options.name:t,typeof t=="function"||typeof t=="string"){const o=this.createFromAlias(t);this.expressionMap.setMainAlias(o)}return this.expressionMap.queryType="update",this.expressionMap.valuesSet=r,dt.isUpdateQueryBuilder(this)?this:Nt.queryBuilderRegistry.UpdateQueryBuilder(this)}delete(){return this.expressionMap.queryType="delete",dt.isDeleteQueryBuilder(this)?this:Nt.queryBuilderRegistry.DeleteQueryBuilder(this)}softDelete(){return this.expressionMap.queryType="soft-delete",dt.isSoftDeleteQueryBuilder(this)?this:Nt.queryBuilderRegistry.SoftDeleteQueryBuilder(this)}restore(){return this.expressionMap.queryType="restore",dt.isSoftDeleteQueryBuilder(this)?this:Nt.queryBuilderRegistry.SoftDeleteQueryBuilder(this)}relation(t,n){const r=arguments.length===2?t:void 0,o=arguments.length===2?n:t;if(this.expressionMap.queryType="relation",this.expressionMap.relationPropertyPath=o,r){const a=this.createFromAlias(r);this.expressionMap.setMainAlias(a)}return dt.isRelationQueryBuilder(this)?this:Nt.queryBuilderRegistry.RelationQueryBuilder(this)}hasRelation(t,n){const r=this.connection.getMetadata(t);return(Array.isArray(n)?n:[n]).every(o=>!!r.findRelationWithPropertyPath(o))}hasParameter(t){var n;return((n=this.parentQueryBuilder)==null?void 0:n.hasParameter(t))||t in this.expressionMap.parameters}setParameter(t,n){if(typeof n=="function")throw new xe(`Function parameter isn't supported in the parameters. Please check "${t}" parameter.`);if(!t.match(/^([A-Za-z0-9_.]+)$/))throw new xe("QueryBuilder parameter keys may only contain numbers, letters, underscores, or periods.");return this.parentQueryBuilder&&this.parentQueryBuilder.setParameter(t,n),this.expressionMap.parameters[t]=n,this}setParameters(t){for(const[n,r]of Object.entries(t))this.setParameter(n,r);return this}createParameter(t){let n;do n=`orm_param_${this.parameterIndex++}`;while(this.hasParameter(n));return this.setParameter(n,t),`:${n}`}setNativeParameters(t){return this.parentQueryBuilder&&this.parentQueryBuilder.setNativeParameters(t),Object.keys(t).forEach(n=>{this.expressionMap.nativeParameters[n]=t[n]}),this}getParameters(){const t=Object.assign({},this.expressionMap.parameters);if(this.expressionMap.mainAlias&&this.expressionMap.mainAlias.hasMetadata){const n=this.expressionMap.mainAlias.metadata;if(n.discriminatorColumn&&n.parentEntityMetadata){const r=n.childEntityMetadatas.filter(o=>o.discriminatorColumn).map(o=>o.discriminatorValue);r.push(n.discriminatorValue),t.discriminatorColumnValues=r}}return t}printSql(){const[t,n]=this.getQueryAndParameters();return this.connection.logger.logQuery(t,n),this}getSql(){return this.getQueryAndParameters()[0]}getQueryAndParameters(){const t=this.getQuery(),n=this.getParameters();return this.connection.driver.escapeQueryWithParameters(t,n,this.expressionMap.nativeParameters)}async execute(){const[t,n]=this.getQueryAndParameters(),r=this.obtainQueryRunner();try{return await r.query(t,n)}finally{r!==this.queryRunner&&await r.release()}}createQueryBuilder(t){return new this.constructor(this.connection,t??this.queryRunner)}clone(){return new this.constructor(this)}comment(t){return this.expressionMap.comment=t,this}disableEscaping(){return this.expressionMap.disableEscaping=!1,this}escape(t){return this.expressionMap.disableEscaping?this.connection.driver.escape(t):t}setQueryRunner(t){return this.queryRunner=t,this}callListeners(t){return this.expressionMap.callListeners=t,this}useTransaction(t){return this.expressionMap.useTransaction=t,this}addCommonTableExpression(t,n,r){return this.expressionMap.commonTableExpressions.push({queryBuilder:t,alias:n,options:r||{}}),this}getTableName(t){return t.split(".").map(n=>n===""?n:this.escape(n)).join(".")}getMainTableName(){if(!this.expressionMap.mainAlias)throw new xe('Entity where values should be inserted is not specified. Call "qb.into(entity)" method to specify it.');return this.expressionMap.mainAlias.hasMetadata?this.expressionMap.mainAlias.metadata.tablePath:this.expressionMap.mainAlias.tablePath}createFromAlias(t,n){if(this.connection.hasMetadata(t)){const r=this.connection.getMetadata(t);return this.expressionMap.createAlias({type:"from",name:n,metadata:this.connection.getMetadata(t),tablePath:r.tablePath})}else{if(typeof t=="string"){const a=t.substr(0,1)==="("&&t.substr(-1)===")";return this.expressionMap.createAlias({type:"from",name:n,tablePath:a?void 0:t,subQuery:a?t:void 0})}const r=t(this.subQuery());this.setParameters(r.getParameters());const o=r.getQuery();return this.expressionMap.createAlias({type:"from",name:n,subQuery:o})}}replacePropertyNames(t){return t}replacePropertyNamesForTheWholeQuery(t){const n={};for(const a of this.expressionMap.aliases){if(!a.hasMetadata)continue;const i=this.expressionMap.aliasNamePrefixingEnabled&&a.name?`${a.name}.`:"";n[i]||(n[i]={});for(const s of a.metadata.relations)s.joinColumns.length>0&&(n[i][s.propertyPath]=s.joinColumns[0].databaseName);for(const s of a.metadata.relations){const c=[...s.joinColumns,...s.inverseJoinColumns];for(const l of c){const u=`${s.propertyPath}.${l.referencedColumn.propertyPath}`;n[i][u]=l.databaseName}}for(const s of a.metadata.columns)n[i][s.databaseName]=s.databaseName;for(const s of a.metadata.columns)n[i][s.propertyName]=s.databaseName;for(const s of a.metadata.columns)n[i][s.propertyPath]=s.databaseName}const r=Object.keys(n),o=r.map(a=>Vte(a)).join("|");return r.length>0&&(t=t.replace(new RegExp(`([ =(]|^.{0})${o?"("+o+")":""}([^ =(),]+)(?=[ =),]|.{0}$)`,"gm"),(...a)=>{let i,s,c;if(o){if(i=a[0],s=a[1],c=a[3],n[a[2]][c])return`${s}${this.escape(a[2].substring(0,a[2].length-1))}.${this.escape(n[a[2]][c])}`}else if(i=a[0],s=a[1],c=a[2],n[""][c])return`${s}${this.escape(n[""][c])}`;return i})),t}createComment(){return this.expressionMap.comment?`/* ${this.expressionMap.comment.replace(/\*\//g,"")} */ `:""}createTimeTravelQuery(){return this.expressionMap.queryType==="select"&&this.expressionMap.timeTravel?` AS OF SYSTEM TIME ${this.expressionMap.timeTravel}`:""}createWhereExpression(){const t=[],n=this.createWhereClausesExpression(this.expressionMap.wheres);if(n.length>0&&n!=="1=1"&&t.push(this.replacePropertyNames(n)),this.expressionMap.mainAlias.hasMetadata){const o=this.expressionMap.mainAlias.metadata;if(this.expressionMap.queryType==="select"&&!this.expressionMap.withDeleted&&o.deleteDateColumn){const a=this.expressionMap.aliasNamePrefixingEnabled?this.expressionMap.mainAlias.name+"."+o.deleteDateColumn.propertyName:o.deleteDateColumn.propertyName,i=`${this.replacePropertyNames(a)} IS NULL`;t.push(i)}if(o.discriminatorColumn&&o.parentEntityMetadata){const a=this.expressionMap.aliasNamePrefixingEnabled?this.expressionMap.mainAlias.name+"."+o.discriminatorColumn.databaseName:o.discriminatorColumn.databaseName,i=`${this.replacePropertyNames(a)} IN (:...discriminatorColumnValues)`;t.push(i)}}if(this.expressionMap.extraAppendedAndWhereCondition){const o=this.replacePropertyNames(this.expressionMap.extraAppendedAndWhereCondition);t.push(o)}let r="";return r+=this.createTimeTravelQuery(),t.length?t.length===1?r+=` WHERE ${t[0]}`:r+=` WHERE ( ${t.join(" ) AND ( ")} )`:r+="",r}createReturningExpression(t){const n=this.getReturningColumns(),r=this.connection.driver;if(typeof this.expressionMap.returning!="string"&&this.expressionMap.extraReturningColumns.length>0&&r.isReturningSqlSupported(t)&&n.push(...this.expressionMap.extraReturningColumns.filter(o=>n.indexOf(o)===-1)),n.length){let o=n.map(a=>{const i=this.escape(a.databaseName);return r.options.type==="mssql"?this.expressionMap.queryType==="insert"||this.expressionMap.queryType==="update"||this.expressionMap.queryType==="soft-delete"||this.expressionMap.queryType==="restore"?"INSERTED."+i:this.escape(this.getMainTableName())+"."+i:i}).join(", ");return r.options.type==="oracle"&&(o+=" INTO "+n.map(a=>this.createParameter({type:r.columnTypeToNativeParameter(a.type),dir:r.oracle.BIND_OUT})).join(", ")),r.options.type==="mssql"&&(this.expressionMap.queryType==="insert"||this.expressionMap.queryType==="update")&&(o+=" INTO @OutputTable"),o}else if(typeof this.expressionMap.returning=="string")return this.expressionMap.returning;return""}getReturningColumns(){const t=[];return Array.isArray(this.expressionMap.returning)&&this.expressionMap.returning.forEach(n=>{this.expressionMap.mainAlias.hasMetadata&&t.push(...this.expressionMap.mainAlias.metadata.findColumnsWithPropertyPath(n))}),t}createWhereClausesExpression(t){return t.map((n,r)=>{const o=this.createWhereConditionExpression(n.condition);switch(n.type){case"and":return(r>0?"AND ":"")+`${this.connection.options.isolateWhereStatements?"(":""}${o}${this.connection.options.isolateWhereStatements?")":""}`;case"or":return(r>0?"OR ":"")+`${this.connection.options.isolateWhereStatements?"(":""}${o}${this.connection.options.isolateWhereStatements?")":""}`}return o}).join(" ").trim()}createWhereConditionExpression(t,n=!1){if(typeof t=="string")return t;if(Array.isArray(t))return t.length===0?"1=1":t.length===1&&!n?this.createWhereClausesExpression(t):"("+this.createWhereClausesExpression(t)+")";const{driver:r}=this.connection;switch(t.operator){case"lessThan":return`${t.parameters[0]} < ${t.parameters[1]}`;case"lessThanOrEqual":return`${t.parameters[0]} <= ${t.parameters[1]}`;case"arrayContains":return`${t.parameters[0]} @> ${t.parameters[1]}`;case"jsonContains":return`${t.parameters[0]} ::jsonb @> ${t.parameters[1]}`;case"arrayContainedBy":return`${t.parameters[0]} <@ ${t.parameters[1]}`;case"arrayOverlap":return`${t.parameters[0]} && ${t.parameters[1]}`;case"moreThan":return`${t.parameters[0]} > ${t.parameters[1]}`;case"moreThanOrEqual":return`${t.parameters[0]} >= ${t.parameters[1]}`;case"notEqual":return`${t.parameters[0]} != ${t.parameters[1]}`;case"equal":return`${t.parameters[0]} = ${t.parameters[1]}`;case"ilike":return r.options.type==="postgres"||r.options.type==="cockroachdb"?`${t.parameters[0]} ILIKE ${t.parameters[1]}`:`UPPER(${t.parameters[0]}) LIKE UPPER(${t.parameters[1]})`;case"like":return`${t.parameters[0]} LIKE ${t.parameters[1]}`;case"between":return`${t.parameters[0]} BETWEEN ${t.parameters[1]} AND ${t.parameters[2]}`;case"in":return t.parameters.length<=1?"0=1":`${t.parameters[0]} IN (${t.parameters.slice(1).join(", ")})`;case"any":return r.options.type==="cockroachdb"?`${t.parameters[0]}::STRING = ANY(${t.parameters[1]}::STRING[])`:`${t.parameters[0]} = ANY(${t.parameters[1]})`;case"isNull":return`${t.parameters[0]} IS NULL`;case"not":return`NOT(${this.createWhereConditionExpression(t.condition)})`;case"brackets":return`${this.createWhereConditionExpression(t.condition,!0)}`;case"and":return"("+t.parameters.join(" AND ")+")";case"or":return"("+t.parameters.join(" OR ")+")"}throw new TypeError(`Unsupported FindOperator ${pl.constructor.name}`)}createCteExpression(){if(!this.hasCommonTableExpressions())return"";const t=this.connection.driver.cteCapabilities.requiresRecursiveHint;return"WITH "+this.expressionMap.commonTableExpressions.map(n=>{const r=typeof n.queryBuilder=="string"?n.queryBuilder:n.queryBuilder.getQuery();if(typeof n.queryBuilder!="string"){if(n.queryBuilder.hasCommonTableExpressions())throw new xe(`Nested CTEs aren't supported (CTE: ${n.alias})`);if(!this.connection.driver.cteCapabilities.writable&&!dt.isSelectQueryBuilder(n.queryBuilder))throw new xe(`Only select queries are supported in CTEs in ${this.connection.options.type} (CTE: ${n.alias})`);this.setParameters(n.queryBuilder.getParameters())}let o=this.escape(n.alias);if(n.options.columnNames){const s=n.options.columnNames.map(c=>this.escape(c));if(dt.isSelectQueryBuilder(n.queryBuilder)&&n.queryBuilder.expressionMap.selects.length&&n.options.columnNames.length!==n.queryBuilder.expressionMap.selects.length)throw new xe(`cte.options.columnNames length (${n.options.columnNames.length}) doesn't match subquery select list length ${n.queryBuilder.expressionMap.selects.length} (CTE: ${n.alias})`);o+=`(${s.join(", ")})`}const a=n.options.recursive&&t?"RECURSIVE":"";let i="";return this.connection.driver.cteCapabilities.materializedHint&&n.options.materialized!==void 0&&(i=n.options.materialized?"MATERIALIZED":"NOT MATERIALIZED"),[a,o,"AS",i,`(${r})`].filter(Boolean).join(" ")}).join(", ")+" "}getWhereInIdsCondition(t){const n=this.expressionMap.mainAlias.metadata,r=(Array.isArray(t)?t:[t]).map(o=>n.ensureEntityIdMap(o));if(!n.hasMultiplePrimaryKeys){const o=n.primaryColumns[0];if(!o.transformer&&!o.relationMetadata&&!o.embeddedMetadata)return{[o.propertyName]:go(r.map(a=>o.getEntityValue(a,!1)))}}return new dI(o=>{for(const a of r)o.orWhere(new dI(i=>i.where(a)))})}getExistsCondition(t){const n=t.clone().orderBy().groupBy().offset(void 0).limit(void 0).skip(void 0).take(void 0).select("1").setOption("disable-global-order");return[`EXISTS (${n.getQuery()})`,n.getParameters()]}findColumnsForPropertyPath(t){let n=this.expressionMap.mainAlias;const r=[],o=t.split(".");for(;o.length>1;){const s=o[0];if(!(n!=null&&n.hasMetadata))break;if(n.metadata.hasEmbeddedWithPropertyPath(s)){o.unshift(`${o.shift()}.${o.shift()}`);continue}if(n.metadata.hasRelationWithPropertyPath(s)){const c=this.expressionMap.joinAttributes.find(l=>l.relationPropertyPath===s);if(!(c!=null&&c.alias)){const l=r.length>0?`${r.join(".")}.${s}`:s;throw new Error(`Cannot find alias for relation at ${l}`)}n=c.alias,r.push(...s.split(".")),o.shift();continue}break}if(!n)throw new Error(`Cannot find alias for property ${t}`);const a=o.join("."),i=n.metadata.findColumnsWithPropertyPath(a);if(!i.length)throw new kr(t,n.metadata);return[n,r,i]}createPropertyPath(t,n,r=""){const o=[];for(const a of Object.keys(n)){const i=r?`${r}.${a}`:a;if(n[a]===null||typeof n[a]!="object"||dt.isFindOperator(n[a])){o.push(i);continue}if(t.hasEmbeddedWithPropertyPath(i)){const s=this.createPropertyPath(t,n[a],i);o.push(...s);continue}if(t.hasRelationWithPropertyPath(i)){const s=t.findRelationWithPropertyPath(i);if(s.relationType==="one-to-one"||s.relationType==="many-to-one"){const u=s.joinColumns.map(d=>d.referencedColumn).filter(d=>!!d);if(u.length>0&&u.every(d=>d.getEntityValue(n[a],!1))){o.push(i);continue}}if(s.relationType==="one-to-many"||s.relationType==="many-to-many")throw new Error(`Cannot query across ${s.relationType} for property ${i}`);const c=s.inverseEntityMetadata.primaryColumns;if(c.length>0&&c.every(u=>u.getEntityValue(n[a],!1))){const u=c.map(d=>`${i}.${d.propertyPath}`);o.push(...u);continue}const l=this.createPropertyPath(s.inverseEntityMetadata,n[a]).map(u=>`${i}.${u}`);o.push(...l);continue}o.push(i)}return o}*getPredicates(t){if(this.expressionMap.mainAlias.hasMetadata){const n=this.createPropertyPath(this.expressionMap.mainAlias.metadata,t);for(const r of n){const[o,a,i]=this.findColumnsForPropertyPath(r);for(const s of i){let c=t;for(const d of a){if(!c||!(d in c)){c={};break}c=c[d]}const l=this.expressionMap.aliasNamePrefixingEnabled?`${o.name}.${s.propertyPath}`:s.propertyPath,u=s.getEntityValue(c,!0);yield[l,u]}}}else for(const n of Object.keys(t)){const r=t[n];yield[this.expressionMap.aliasNamePrefixingEnabled?`${this.alias}.${n}`:n,r]}}getWherePredicateCondition(t,n){if(dt.isFindOperator(n)){let r=[];if(n.useParameter)if(n.objectLiteralParameters)this.setParameters(n.objectLiteralParameters);else if(n.multipleParameters)for(const o of n.value)r.push(this.createParameter(o));else r.push(this.createParameter(n.value));if(n.type==="raw")return n.getSql?n.getSql(t):{operator:"equal",parameters:[t,n.value]};if(n.type==="not")return n.child?{operator:n.type,condition:this.getWherePredicateCondition(t,n.child)}:{operator:"notEqual",parameters:[t,...r]};if(n.type==="and"){const o=n.value;return{operator:n.type,parameters:o.map(a=>this.createWhereConditionExpression(this.getWherePredicateCondition(t,a)))}}else if(n.type==="or"){const o=n.value;return{operator:n.type,parameters:o.map(a=>this.createWhereConditionExpression(this.getWherePredicateCondition(t,a)))}}else return{operator:n.type,parameters:[t,...r]}}else return{operator:"equal",parameters:[t,this.createParameter(n)]}}getWhereCondition(t){if(typeof t=="string")return t;if(dt.isBrackets(t)){const o=this.createQueryBuilder();return o.parentQueryBuilder=this,o.expressionMap.mainAlias=this.expressionMap.mainAlias,o.expressionMap.aliasNamePrefixingEnabled=this.expressionMap.aliasNamePrefixingEnabled,o.expressionMap.parameters=this.expressionMap.parameters,o.expressionMap.nativeParameters=this.expressionMap.nativeParameters,o.expressionMap.wheres=[],t.whereFactory(o),{operator:dt.isNotBrackets(t)?"not":"brackets",condition:o.expressionMap.wheres}}if(typeof t=="function")return t(this);const n=Array.isArray(t)?t:[t],r=[];for(const o of n){const a=[];for(const[i,s]of this.getPredicates(o))a.push({type:"and",condition:this.getWherePredicateCondition(i,s)});r.push({type:"or",condition:a})}return r.length===1?r[0].condition:r}obtainQueryRunner(){return this.queryRunner||this.connection.createQueryRunner()}hasCommonTableExpressions(){return this.expressionMap.commonTableExpressions.length>0}}Nt.queryBuilderRegistry={};class Ute{static from(t){const n=new this;return n.raw=t.records,n.affected=t.affected,n}}class Hte extends Nt{constructor(t,n){super(t,n),this["@instanceof"]=Symbol.for("DeleteQueryBuilder"),this.expressionMap.aliasNamePrefixingEnabled=!1}getQuery(){let t=this.createComment();return t+=this.createCteExpression(),t+=this.createDeleteExpression(),this.replacePropertyNamesForTheWholeQuery(t.trim())}async execute(){const[t,n]=this.getQueryAndParameters(),r=this.obtainQueryRunner();let o=!1;try{this.expressionMap.useTransaction===!0&&r.isTransactionActive===!1&&(await r.startTransaction(),o=!0),this.expressionMap.callListeners===!0&&this.expressionMap.mainAlias.hasMetadata&&await r.broadcaster.broadcast("BeforeRemove",this.expressionMap.mainAlias.metadata);const a=await r.query(t,n,!0),i=Ute.from(a);return this.expressionMap.callListeners===!0&&this.expressionMap.mainAlias.hasMetadata&&await r.broadcaster.broadcast("AfterRemove",this.expressionMap.mainAlias.metadata),o&&await r.commitTransaction(),i}catch(a){if(o)try{await r.rollbackTransaction()}catch{}throw a}finally{r!==this.queryRunner&&await r.release()}}from(t,n){t=dt.isEntitySchema(t)?t.options.name:t;const r=this.createFromAlias(t,n);return this.expressionMap.setMainAlias(r),this}where(t,n){this.expressionMap.wheres=[];const r=this.getWhereCondition(t);return r&&(this.expressionMap.wheres=[{type:"simple",condition:r}]),n&&this.setParameters(n),this}andWhere(t,n){return this.expressionMap.wheres.push({type:"and",condition:this.getWhereCondition(t)}),n&&this.setParameters(n),this}orWhere(t,n){return this.expressionMap.wheres.push({type:"or",condition:this.getWhereCondition(t)}),n&&this.setParameters(n),this}whereInIds(t){return this.where(this.getWhereInIdsCondition(t))}andWhereInIds(t){return this.andWhere(this.getWhereInIdsCondition(t))}orWhereInIds(t){return this.orWhere(this.getWhereInIdsCondition(t))}output(t){return this.returning(t)}returning(t){if(!this.connection.driver.isReturningSqlSupported("delete"))throw new Rf;return this.expressionMap.returning=t,this}createDeleteExpression(){const t=this.getTableName(this.getMainTableName()),n=this.createWhereExpression(),r=this.createReturningExpression("delete");return r===""?`DELETE FROM ${t}${n}`:this.connection.driver.options.type==="mssql"?`DELETE FROM ${t} OUTPUT ${r}${n}`:`DELETE FROM ${t}${n} RETURNING ${r}`}}let If;const Wte=new Uint8Array(16);function qte(){if(!If&&(If=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!If))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return If(Wte)}const Kt=[];for(let e=0;e<256;++e)Kt.push((e+256).toString(16).slice(1));function Yte(e,t=0){return Kt[e[t+0]]+Kt[e[t+1]]+Kt[e[t+2]]+Kt[e[t+3]]+"-"+Kt[e[t+4]]+Kt[e[t+5]]+"-"+Kt[e[t+6]]+Kt[e[t+7]]+"-"+Kt[e[t+8]]+Kt[e[t+9]]+"-"+Kt[e[t+10]]+Kt[e[t+11]]+Kt[e[t+12]]+Kt[e[t+13]]+Kt[e[t+14]]+Kt[e[t+15]]}const Kte=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),fI={randomUUID:Kte};function Xte(e,t,n){if(fI.randomUUID&&!t&&!e)return fI.randomUUID();e=e||{};const r=e.random||(e.rng||qte)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,Yte(r)}class pI{constructor(){this.count=0,this.promises=[]}async wait(){return this.promises.length>0&&await Promise.all(this.promises),this}}class hI{constructor(){this.identifiers=[],this.generatedMaps=[]}static from(t){const n=new this;return n.raw=t.raw,n}}class Qb{constructor(t,n){this.queryRunner=t,this.expressionMap=n}async update(t,n){const r=this.expressionMap.mainAlias.metadata;await Promise.all(n.map(async(o,a)=>{if(this.queryRunner.connection.driver.isReturningSqlSupported("update")){this.queryRunner.connection.driver.options.type==="oracle"&&Array.isArray(t.raw)&&this.expressionMap.extraReturningColumns.length>0&&(t.raw=t.raw.reduce((c,l,u)=>(c[this.expressionMap.extraReturningColumns[u].databaseName]=l[0],c),{}));const i=Array.isArray(t.raw)?t.raw[a]:t.raw,s=this.queryRunner.connection.driver.createGeneratedMap(r,i);s&&(this.queryRunner.manager.merge(r.target,o,s),t.generatedMaps.push(s))}else{const i=this.expressionMap.extraReturningColumns;if(i.length>0){const s=this.expressionMap.mainAlias.metadata.getEntityIdMap(o);if(!s)throw new xe("Cannot update entity because entity id is not set in the entity.");const c=await this.queryRunner.manager.createQueryBuilder().select(r.primaryColumns.map(l=>r.targetName+"."+l.propertyPath)).addSelect(i.map(l=>r.targetName+"."+l.propertyPath)).from(r.target,r.targetName).where(s).withDeleted().setOption("create-pojo").getOne();c&&(this.queryRunner.manager.merge(r.target,o,c),t.generatedMaps.push(c))}}}))}async insert(t,n){const r=this.expressionMap.mainAlias.metadata;let o=r.getInsertionReturningColumns();const a=this.queryRunner.connection.driver.isReturningSqlSupported("insert");o=o.filter(s=>s.isGenerated?a===!0:!0);const i=n.map((s,c)=>{this.queryRunner.connection.driver.options.type==="oracle"&&Array.isArray(t.raw)&&this.expressionMap.extraReturningColumns.length>0&&(t.raw=t.raw.reduce((d,f,p)=>(d[this.expressionMap.extraReturningColumns[p].databaseName]=f[0],d),{}));const l=Array.isArray(t.raw)?t.raw[c]:t.raw,u=this.queryRunner.connection.driver.createGeneratedMap(r,l,c,n.length)||{};return c in this.expressionMap.locallyGenerated&&this.queryRunner.manager.merge(r.target,u,this.expressionMap.locallyGenerated[c]),this.queryRunner.manager.merge(r.target,s,u),u});if(o.length>0&&!this.queryRunner.connection.driver.isReturningSqlSupported("insert")){const s=n.map(l=>{const u=r.getEntityIdMap(l);if(!u)throw new xe("Cannot update entity because entity id is not set in the entity.");return u}),c=await this.queryRunner.manager.createQueryBuilder().select(r.primaryColumns.map(l=>r.targetName+"."+l.propertyPath)).addSelect(o.map(l=>r.targetName+"."+l.propertyPath)).from(r.target,r.targetName).where(s).setOption("create-pojo").getMany();n.forEach((l,u)=>{this.queryRunner.manager.merge(r.target,i[u],c[u]),this.queryRunner.manager.merge(r.target,l,c[u])})}n.forEach((s,c)=>{const l=r.getEntityIdMap(s);t.identifiers.push(l),t.generatedMaps.push(i[c])})}getUpdationReturningColumns(){return this.expressionMap.mainAlias.metadata.columns.filter(t=>t.asExpression!==void 0||t.isUpdateDate||t.isVersion)}getSoftDeletionReturningColumns(){return this.expressionMap.mainAlias.metadata.columns.filter(t=>t.asExpression!==void 0||t.isUpdateDate||t.isVersion||t.isDeleteDate)}}class Gte extends Nt{constructor(){super(...arguments),this["@instanceof"]=Symbol.for("InsertQueryBuilder")}getQuery(){let t=this.createComment();return t+=this.createCteExpression(),t+=this.createInsertExpression(),this.replacePropertyNamesForTheWholeQuery(t.trim())}async execute(){const t=this.getValueSets();if(t.length===0)return new hI;const n=this.obtainQueryRunner();let r=!1;try{if(this.expressionMap.useTransaction===!0&&n.isTransactionActive===!1&&(await n.startTransaction(),r=!0),this.expressionMap.callListeners===!0&&this.expressionMap.mainAlias.hasMetadata){const p=new pI;t.forEach(y=>{n.broadcaster.broadcastBeforeInsertEvent(p,this.expressionMap.mainAlias.metadata,y)}),await p.wait()}let o=null,a=null;const i=new Qb(n,this.expressionMap),s=[];if(Array.isArray(this.expressionMap.returning)&&this.expressionMap.mainAlias.hasMetadata)for(const p of this.expressionMap.returning)s.push(...this.expressionMap.mainAlias.metadata.findColumnsWithPropertyPath(p));this.expressionMap.updateEntity===!0&&this.expressionMap.mainAlias.hasMetadata&&(t.length>1&&this.connection.driver.options.type==="oracle"||(this.expressionMap.extraReturningColumns=this.expressionMap.mainAlias.metadata.getInsertionReturningColumns()),s.push(...this.expressionMap.extraReturningColumns.filter(p=>!s.includes(p)))),s.length>0&&this.connection.driver.options.type==="mssql"&&(o=this.connection.driver.buildTableVariableDeclaration("@OutputTable",s),a="SELECT * FROM @OutputTable");const[c,l]=this.getQueryAndParameters(),u=[o,c,a].filter(p=>p!=null).join(`;

`),d=await n.query(u,l,!0),f=hI.from(d);if(this.expressionMap.updateEntity===!0&&this.expressionMap.mainAlias.hasMetadata&&await i.insert(f,t),this.expressionMap.callListeners===!0&&this.expressionMap.mainAlias.hasMetadata){const p=new pI;t.forEach(y=>{n.broadcaster.broadcastAfterInsertEvent(p,this.expressionMap.mainAlias.metadata,y)}),await p.wait()}return r&&await n.commitTransaction(),f}catch(o){if(r)try{await n.rollbackTransaction()}catch{}throw o}finally{n!==this.queryRunner&&await n.release()}}into(t,n){t=dt.isEntitySchema(t)?t.options.name:t;const r=this.createFromAlias(t);return this.expressionMap.setMainAlias(r),this.expressionMap.insertColumns=n||[],this}values(t){return this.expressionMap.valuesSet=t,this}output(t){return this.returning(t)}returning(t){if(!this.connection.driver.isReturningSqlSupported("insert"))throw new Rf;return this.expressionMap.returning=t,this}updateEntity(t){return this.expressionMap.updateEntity=t,this}onConflict(t){return this.expressionMap.onConflict=t,this}orIgnore(t=!0){return this.expressionMap.onIgnore=!!t,this}orUpdate(t,n,r){return Array.isArray(t)?(this.expressionMap.onUpdate={overwrite:t,conflict:n,skipUpdateIfNoValuesChanged:r==null?void 0:r.skipUpdateIfNoValuesChanged,indexPredicate:r==null?void 0:r.indexPredicate,upsertType:r==null?void 0:r.upsertType},this):(this.expressionMap.onUpdate={conflict:t==null?void 0:t.conflict_target,columns:t==null?void 0:t.columns,overwrite:t==null?void 0:t.overwrite,skipUpdateIfNoValuesChanged:r==null?void 0:r.skipUpdateIfNoValuesChanged,upsertType:r==null?void 0:r.upsertType},this)}createInsertExpression(){var i,s;const t=this.getTableName(this.getMainTableName()),n=this.createValuesExpression(),r=this.connection.driver.options.type==="oracle"&&this.getValueSets().length>1?null:this.createReturningExpression("insert"),o=this.createColumnNamesExpression();let a="INSERT ";if(((i=this.expressionMap.onUpdate)==null?void 0:i.upsertType)==="primary-key"&&(a="UPSERT "),(ye.isMySQLFamily(this.connection.driver)||this.connection.driver.options.type==="aurora-mysql")&&(a+=`${this.expressionMap.onIgnore?" IGNORE ":""}`),a+=`INTO ${t}`,this.alias!==this.getMainTableName()&&ye.isPostgresFamily(this.connection.driver)&&(a+=` AS "${this.alias}"`),o?a+=`(${o})`:!n&&(ye.isMySQLFamily(this.connection.driver)||this.connection.driver.options.type==="aurora-mysql")&&(a+="()"),r&&this.connection.driver.options.type==="mssql"&&(a+=` OUTPUT ${r}`),n?(this.connection.driver.options.type==="oracle"||this.connection.driver.options.type==="sap")&&this.getValueSets().length>1?a+=` ${n}`:a+=` VALUES ${n}`:ye.isMySQLFamily(this.connection.driver)||this.connection.driver.options.type==="aurora-mysql"?a+=" VALUES ()":a+=" DEFAULT VALUES",((s=this.expressionMap.onUpdate)==null?void 0:s.upsertType)!=="primary-key"){if(this.connection.driver.supportedUpsertTypes.includes("on-conflict-do-update")){if(this.expressionMap.onIgnore)a+=" ON CONFLICT DO NOTHING ";else if(this.expressionMap.onConflict)a+=` ON CONFLICT ${this.expressionMap.onConflict} `;else if(this.expressionMap.onUpdate){const{overwrite:c,columns:l,conflict:u,skipUpdateIfNoValuesChanged:d,indexPredicate:f}=this.expressionMap.onUpdate;let p="ON CONFLICT";if(Array.isArray(u)){if(p+=` ( ${u.map(m=>this.escape(m)).join(", ")} )`,f&&!ye.isPostgresFamily(this.connection.driver))throw new xe("indexPredicate option is not supported by the current database driver");f&&ye.isPostgresFamily(this.connection.driver)&&(p+=` WHERE ( ${f} )`)}else u&&(p+=` ON CONSTRAINT ${this.escape(u)}`);const y=[];Array.isArray(c)?y.push(...c.map(m=>`${this.escape(m)} = EXCLUDED.${this.escape(m)}`)):l&&y.push(...l.map(m=>`${this.escape(m)} = :${m}`)),y.length>0&&(a+=` ${p} DO UPDATE SET `,y.push(...this.expressionMap.mainAlias.metadata.columns.filter(m=>m.isUpdateDate&&!(c!=null&&c.includes(m.databaseName))&&!(this.connection.driver.options.type==="oracle"&&this.getValueSets().length>1||ye.isSQLiteFamily(this.connection.driver)||this.connection.driver.options.type==="sap"||this.connection.driver.options.type==="spanner")).map(m=>`${this.escape(m.databaseName)} = DEFAULT`)),a+=y.join(", "),a+=" "),Array.isArray(c)&&d&&ye.isPostgresFamily(this.connection.driver)&&(a+=" WHERE (",a+=c.map(m=>`${t}.${this.escape(m)} IS DISTINCT FROM EXCLUDED.${this.escape(m)}`).join(" OR "),a+=") ")}}else if(this.connection.driver.supportedUpsertTypes.includes("on-duplicate-key-update")){if(this.expressionMap.onUpdate){const{overwrite:c,columns:l}=this.expressionMap.onUpdate;Array.isArray(c)?(a+=" ON DUPLICATE KEY UPDATE ",a+=c.map(u=>`${this.escape(u)} = VALUES(${this.escape(u)})`).join(", "),a+=" "):Array.isArray(l)&&(a+=" ON DUPLICATE KEY UPDATE ",a+=l.map(u=>`${this.escape(u)} = :${u}`).join(", "),a+=" ")}}else if(this.expressionMap.onUpdate)throw new xe("onUpdate is not supported by the current database driver")}return r&&(ye.isPostgresFamily(this.connection.driver)||this.connection.driver.options.type==="oracle"||this.connection.driver.options.type==="cockroachdb"||ye.isMySQLFamily(this.connection.driver))&&(a+=` RETURNING ${r}`),this.connection.driver.options.type==="mssql"&&this.expressionMap.mainAlias.hasMetadata&&this.expressionMap.mainAlias.metadata.columns.filter(c=>this.expressionMap.insertColumns.length>0?this.expressionMap.insertColumns.indexOf(c.propertyPath)!==-1:c.isInsert).some(c=>this.isOverridingAutoIncrementBehavior(c))&&(a=`SET IDENTITY_INSERT ${t} ON; ${a}; SET IDENTITY_INSERT ${t} OFF`),a}getInsertedColumns(){return this.expressionMap.mainAlias.hasMetadata?this.expressionMap.mainAlias.metadata.columns.filter(t=>this.expressionMap.insertColumns.length?this.expressionMap.insertColumns.indexOf(t.propertyPath)!==-1:!(!t.isInsert||t.isGenerated&&t.generationStrategy==="increment"&&this.connection.driver.options.type!=="spanner"&&this.connection.driver.options.type!=="oracle"&&!ye.isSQLiteFamily(this.connection.driver)&&!ye.isMySQLFamily(this.connection.driver)&&this.connection.driver.options.type!=="aurora-mysql"&&!(this.connection.driver.options.type==="mssql"&&this.isOverridingAutoIncrementBehavior(t)))):[]}createColumnNamesExpression(){const t=this.getInsertedColumns();if(t.length>0)return t.map(n=>this.escape(n.databaseName)).join(", ");if(!this.expressionMap.mainAlias.hasMetadata&&!this.expressionMap.insertColumns.length){const n=this.getValueSets();if(n.length===1)return Object.keys(n[0]).map(r=>this.escape(r)).join(", ")}return this.expressionMap.insertColumns.map(n=>this.escape(n)).join(", ")}createValuesExpression(){const t=this.getValueSets(),n=this.getInsertedColumns();if(n.length>0){let r="";return t.forEach((o,a)=>{n.forEach((i,s)=>{s===0&&(this.connection.driver.options.type==="oracle"&&t.length>1||this.connection.driver.options.type==="sap"&&t.length>1?r+=" SELECT ":r+="(");let c=i.getEntityValue(o);if(typeof c!="function"&&(c=this.connection.driver.preparePersistentValue(c,i)),i.isVersion&&c===void 0)r+="1";else if(i.isDiscriminator)r+=this.createParameter(this.expressionMap.mainAlias.metadata.discriminatorValue);else if(i.isGenerated&&i.generationStrategy==="uuid"&&!this.connection.driver.isUUIDGenerationSupported()&&c===void 0)c=Xte(),r+=this.createParameter(c),a in this.expressionMap.locallyGenerated||(this.expressionMap.locallyGenerated[a]={}),i.setEntityValue(this.expressionMap.locallyGenerated[a],c);else if(c===void 0)this.connection.driver.options.type==="oracle"&&t.length>1||ye.isSQLiteFamily(this.connection.driver)||this.connection.driver.options.type==="sap"||this.connection.driver.options.type==="spanner"?i.default!==void 0&&i.default!==null?r+=this.connection.driver.normalizeDefault(i):r+="NULL":r+="DEFAULT";else if(c===null&&this.connection.driver.options.type==="spanner")r+="NULL";else if(typeof c=="function")r+=c();else{this.connection.driver.options.type==="mssql"&&(c=this.connection.driver.parametrizeValue(i,c));const l=this.createParameter(c);if((ye.isMySQLFamily(this.connection.driver)||this.connection.driver.options.type==="aurora-mysql")&&this.connection.driver.spatialTypes.indexOf(i.type)!==-1){const u=this.connection.driver.options.legacySpatialSupport?"GeomFromText":"ST_GeomFromText";i.srid!=null?r+=`${u}(${l}, ${i.srid})`:r+=`${u}(${l})`}else ye.isPostgresFamily(this.connection.driver)&&this.connection.driver.spatialTypes.indexOf(i.type)!==-1?i.srid!=null?r+=`ST_SetSRID(ST_GeomFromGeoJSON(${l}), ${i.srid})::${i.type}`:r+=`ST_GeomFromGeoJSON(${l})::${i.type}`:this.connection.driver.options.type==="mssql"&&this.connection.driver.spatialTypes.indexOf(i.type)!==-1?r+=i.type+"::STGeomFromText("+l+", "+(i.srid||"0")+")":r+=l}s===n.length-1?a===t.length-1?this.connection.driver.options.type==="oracle"&&t.length>1?r+=" FROM DUAL ":this.connection.driver.options.type==="sap"&&t.length>1?r+=" FROM dummy ":r+=")":this.connection.driver.options.type==="oracle"&&t.length>1?r+=" FROM DUAL UNION ALL ":this.connection.driver.options.type==="sap"&&t.length>1?r+=" FROM dummy UNION ALL ":r+="), ":r+=", "})}),r==="()"?"":r}else{let r="";return t.forEach((o,a)=>{Object.keys(o).forEach((i,s)=>{s===0&&(r+="(");const c=o[i];typeof c=="function"?r+=c():c===void 0?this.connection.driver.options.type==="oracle"&&t.length>1||ye.isSQLiteFamily(this.connection.driver)||this.connection.driver.options.type==="sap"||this.connection.driver.options.type==="spanner"?r+="NULL":r+="DEFAULT":c===null&&this.connection.driver.options.type==="spanner"||(r+=this.createParameter(c)),s===Object.keys(o).length-1?a===t.length-1?r+=")":r+="), ":r+=", "})}),r==="()"?"":r}}getValueSets(){if(Array.isArray(this.expressionMap.valuesSet))return this.expressionMap.valuesSet;if(Rt.isObject(this.expressionMap.valuesSet))return[this.expressionMap.valuesSet];throw new Ote}isOverridingAutoIncrementBehavior(t){return t.isPrimary&&t.isGenerated&&t.generationStrategy==="increment"&&this.getValueSets().some(n=>t.getEntityValue(n)!==void 0&&t.getEntityValue(n)!==null)}}class mI{constructor(t,n){this.queryBuilder=t,this.expressionMap=n}async update(t){const n=this.expressionMap.relationMetadata;if(n.isManyToOne||n.isOneToOneOwner){const r=n.joinColumns.reduce((o,a)=>{const i=Rt.isObject(t)?a.referencedColumn.getEntityValue(t):t;return a.setEntityValue(o,i),o},{});if(!this.expressionMap.of||Array.isArray(this.expressionMap.of)&&!this.expressionMap.of.length)return;await this.queryBuilder.createQueryBuilder().update(n.entityMetadata.target).set(r).whereInIds(this.expressionMap.of).execute()}else if((n.isOneToOneNotOwner||n.isOneToMany)&&t===null){const r={};n.inverseRelation.joinColumns.forEach(c=>{r[c.propertyName]=null});const o=Array.isArray(this.expressionMap.of)?this.expressionMap.of:[this.expressionMap.of],a={},i=[];o.forEach((c,l)=>{n.inverseRelation.joinColumns.map((u,d)=>{const f="joinColumn_"+l+"_"+d;a[f]=Rt.isObject(c)?u.referencedColumn.getEntityValue(c):c,i.push(`${u.propertyPath} = :${f}`)})});const s=i.map(c=>"("+c+")").join(" OR ");if(!s)return;await this.queryBuilder.createQueryBuilder().update(n.inverseEntityMetadata.target).set(r).where(s).setParameters(a).execute()}else if(n.isOneToOneNotOwner||n.isOneToMany){if(Array.isArray(this.expressionMap.of))throw new xe("You cannot update relations of multiple entities with the same related object. Provide a single entity into .of method.");const r=this.expressionMap.of,o=n.inverseRelation.joinColumns.reduce((a,i)=>{const s=Rt.isObject(r)?i.referencedColumn.getEntityValue(r):r;return i.setEntityValue(a,s),a},{});if(!t||Array.isArray(t)&&!t.length)return;await this.queryBuilder.createQueryBuilder().update(n.inverseEntityMetadata.target).set(o).whereInIds(t).execute()}else{const r=n.junctionEntityMetadata,o=Array.isArray(this.expressionMap.of)?this.expressionMap.of:[this.expressionMap.of],a=Array.isArray(t)?t:[t],i=n.isManyToManyOwner?o:a,s=n.isManyToManyOwner?a:o,c=[];if(i.forEach(l=>{s.forEach(u=>{const d={};r.ownerColumns.forEach(f=>{d[f.databaseName]=Rt.isObject(l)?f.referencedColumn.getEntityValue(l):l}),r.inverseColumns.forEach(f=>{d[f.databaseName]=Rt.isObject(u)?f.referencedColumn.getEntityValue(u):u}),c.push(d)})}),!c.length)return;this.queryBuilder.connection.driver.options.type==="oracle"||this.queryBuilder.connection.driver.options.type==="sap"?await Promise.all(c.map(l=>this.queryBuilder.createQueryBuilder().insert().into(r.tableName).values(l).execute())):await this.queryBuilder.createQueryBuilder().insert().into(r.tableName).values(c).execute()}}}class Qte{constructor(t,n){this.queryBuilder=t,this.expressionMap=n}async remove(t){const n=this.expressionMap.relationMetadata;if(n.isOneToMany){const r=Array.isArray(this.expressionMap.of)?this.expressionMap.of:[this.expressionMap.of],o=Array.isArray(t)?t:[t],a={};n.inverseRelation.joinColumns.forEach(l=>{a[l.propertyName]=null});const i={},s=[];r.forEach((l,u)=>{s.push(...o.map((d,f)=>[...n.inverseRelation.joinColumns.map((p,y)=>{const m="joinColumn_"+u+"_"+f+"_"+y;return i[m]=Rt.isObject(l)?p.referencedColumn.getEntityValue(l):l,`${p.propertyPath} = :${m}`}),...n.inverseRelation.entityMetadata.primaryColumns.map((p,y)=>{const m="primaryColumn_"+f+"_"+f+"_"+y;return i[m]=Rt.isObject(d)?p.getEntityValue(d):d,`${p.propertyPath} = :${m}`})].join(" AND ")))});const c=s.map(l=>"("+l+")").join(" OR ");if(!c)return;await this.queryBuilder.createQueryBuilder().update(n.inverseEntityMetadata.target).set(a).where(c).setParameters(i).execute()}else{const r=n.junctionEntityMetadata,o=Array.isArray(this.expressionMap.of)?this.expressionMap.of:[this.expressionMap.of],a=Array.isArray(t)?t:[t],i=n.isManyToManyOwner?o:a,s=n.isManyToManyOwner?a:o,c={},l=[];i.forEach((d,f)=>{l.push(...s.map((p,y)=>[...r.ownerColumns.map((m,v)=>{const b="firstValue_"+f+"_"+y+"_"+v;return c[b]=Rt.isObject(d)?m.referencedColumn.getEntityValue(d):d,`${m.databaseName} = :${b}`}),...r.inverseColumns.map((m,v)=>{const b="secondValue_"+f+"_"+y+"_"+v;return c[b]=Rt.isObject(p)?m.referencedColumn.getEntityValue(p):p,`${m.databaseName} = :${b}`})].join(" AND ")))});const u=l.map(d=>"("+d+")").join(" OR ");await this.queryBuilder.createQueryBuilder().delete().from(r.tableName).where(u).setParameters(c).execute()}}}class Jte extends Nt{constructor(){super(...arguments),this["@instanceof"]=Symbol.for("RelationQueryBuilder")}getQuery(){return""}of(t){return this.expressionMap.of=t,this}async set(t){const n=this.expressionMap.relationMetadata;if(!this.expressionMap.of)throw new xe("Entity whose relation needs to be set is not set. Use .of method to define whose relation you want to set.");if(n.isManyToMany||n.isOneToMany)throw new xe(`Set operation is only supported for many-to-one and one-to-one relations. However given "${n.propertyPath}" has ${n.relationType} relation. Use .add() method instead.`);if(n.joinColumns&&n.joinColumns.length>1&&(!Rt.isObject(t)||Object.keys(t).length<n.joinColumns.length))throw new xe('Value to be set into the relation must be a map of relation ids, for example: .set({ firstName: "...", lastName: "..." })');return new mI(this,this.expressionMap).update(t)}async add(t){if(Array.isArray(t)&&t.length===0)return;const n=this.expressionMap.relationMetadata;if(!this.expressionMap.of)throw new xe("Entity whose relation needs to be set is not set. Use .of method to define whose relation you want to set.");if(n.isManyToOne||n.isOneToOne)throw new xe(`Add operation is only supported for many-to-many and one-to-many relations. However given "${n.propertyPath}" has ${n.relationType} relation. Use .set() method instead.`);if(n.joinColumns&&n.joinColumns.length>1&&(!Rt.isObject(t)||Object.keys(t).length<n.joinColumns.length))throw new xe('Value to be set into the relation must be a map of relation ids, for example: .set({ firstName: "...", lastName: "..." })');return new mI(this,this.expressionMap).update(t)}async remove(t){if(Array.isArray(t)&&t.length===0)return;const n=this.expressionMap.relationMetadata;if(!this.expressionMap.of)throw new xe("Entity whose relation needs to be set is not set. Use .of method to define whose relation you want to set.");if(n.isManyToOne||n.isOneToOne)throw new xe(`Add operation is only supported for many-to-many and one-to-many relations. However given "${n.propertyPath}" has ${n.relationType} relation. Use .set(null) method instead.`);return new Qte(this,this.expressionMap).remove(t)}async addAndRemove(t,n){await this.remove(n),await this.add(t)}async loadOne(){return this.loadMany().then(t=>t[0])}async loadMany(){let t=this.expressionMap.of;if(!Rt.isObject(t)){const n=this.expressionMap.mainAlias.metadata;if(n.hasMultiplePrimaryKeys)throw new xe("Cannot load entity because only one primary key was specified, however entity contains multiple primary keys");t=n.primaryColumns[0].createValueMap(t)}return this.connection.relationLoader.load(this.expressionMap.relationMetadata,t,this.queryRunner)}}class Xt{static chunk(t,n){return Array.from(Array(Math.ceil(t.length/n)),(r,o)=>t.slice(o*n,o*n+n))}static splitClassesAndStrings(t){return[t.filter(n=>typeof n!="string"),t.filter(n=>typeof n=="string")]}static groupBy(t,n){return t.reduce((r,o)=>{const a=n(o);let i=r.find(s=>s.id===a);return i||(i={id:a,items:[]},r.push(i)),i.items.push(o),r},[])}static uniq(t,n){return t.reduce((r,o)=>{let a=!1;if(typeof n=="function"){const i=n(o);a=!!r.find(s=>n(s)===i)}else typeof n=="string"?a=!!r.find(i=>i[n]===o[n]):a=r.indexOf(o)!==-1;return a||r.push(o),r},[])}static isPlainObject(t){return t==null?!1:!t.constructor||t.constructor===Object}static mergeArrayKey(t,n,r,o){if(o.has(r)){t[n]=o.get(r);return}if(!(r instanceof Promise)){if(!this.isPlainObject(r)&&!Array.isArray(r)){t[n]=r;return}t[n]||(t[n]=Array.isArray(r)?[]:{}),o.set(r,t[n]),this.merge(t[n],r,o),o.delete(r)}}static mergeObjectKey(t,n,r,o){if(o.has(r)){Object.assign(t,{[n]:o.get(r)});return}if(!(r instanceof Promise)){if(!this.isPlainObject(r)&&!Array.isArray(r)){Object.assign(t,{[n]:r});return}t[n]||Object.assign(t,{[n]:Array.isArray(r)?[]:{}}),o.set(r,t[n]),this.merge(t[n],r,o),o.delete(r)}}static merge(t,n,r=new Map){if(this.isPlainObject(t)&&this.isPlainObject(n))for(const o of Object.keys(n))o!=="__proto__"&&this.mergeObjectKey(t,o,n[o],r);if(Array.isArray(t)&&Array.isArray(n))for(let o=0;o<n.length;o++)this.mergeArrayKey(t,o,n[o],r)}static mergeDeep(t,...n){if(!n.length)return t;for(const r of n)Xt.merge(t,r);return t}static deepCompare(...t){let n,r,o,a;if(arguments.length<1)return!0;for(n=1,r=arguments.length;n<r;n++)if(o=[],a=[],!this.compare2Objects(o,a,arguments[0],arguments[n]))return!1;return!0}static deepValue(t,n){const r=n.split(".");for(let o=0,a=r.length;o<a;o++)t=t[r[o]];return t}static replaceEmptyObjectsWithBooleans(t){for(let n in t)t[n]&&typeof t[n]=="object"&&(Object.keys(t[n]).length===0?t[n]=!0:this.replaceEmptyObjectsWithBooleans(t[n]))}static propertyPathsToTruthyObject(t){let n={};for(let r of t){const o=r.split(".");if(!o.length)continue;(!n[o[0]]||n[o[0]]===!0)&&(n[o[0]]={});let a=n[o[0]];for(let[i,s]of o.entries())i!==0&&(a[s]?a=a[s]:i===o.length-1?(a[s]={},a=null):(a[s]={},a=a[s]))}return this.replaceEmptyObjectsWithBooleans(n),n}static compareIds(t,n){return t==null||n===void 0||n===null?!1:(typeof t.id=="string"&&typeof n.id=="string"||typeof t.id=="number"&&typeof n.id=="number")&&Object.keys(t).length===1&&Object.keys(n).length===1?t.id===n.id:Xt.deepCompare(t,n)}static toBoolean(t){return typeof t=="boolean"?t:typeof t=="string"?t==="true"||t==="1":typeof t=="number"?t>0:!1}static zipObject(t,n){return t.reduce((r,o,a)=>(r[o]=n[a],r),{})}static isArraysEqual(t,n){return t.length!==n.length?!1:t.every(r=>n.indexOf(r)!==-1)}static areMutuallyExclusive(...t){return!t.some(n=>{const r=t.filter(o=>o!==n);return n.some(o=>r.some(a=>a.includes(o)))})}static parseSqlCheckExpression(t,n){const r=t.match(new RegExp(`"${n}" varchar CHECK\\s*\\(\\s*"${n}"\\s+IN\\s*`));if(r&&r.index){const o=t.substring(r.index+r[0].length);let a="",i="";const s=[];for(let c=0;c<o.length;c++){const l=o[c];switch(l){case",":a==""?(s.push(i),i=""):i+=l;break;case"'":a==l?o[c+1]===l?(i+=l,c+=1):a="":a=l;break;case")":if(a=="")return s.push(i),s;i+=l;break;default:a!=""&&(i+=l)}}}}static compare2Objects(t,n,r,o){let a;if(Number.isNaN(r)&&Number.isNaN(o)||r===o)return!0;if(r===null||o===null||r===void 0||o===void 0)return!1;if((typeof r.equals=="function"||typeof r.equals=="function")&&r.equals(o))return!0;if(typeof r=="function"&&typeof o=="function"||r instanceof Date&&o instanceof Date||r instanceof RegExp&&o instanceof RegExp||typeof r=="string"&&typeof o=="string"||typeof r=="number"&&typeof o=="number")return r.toString()===o.toString();if(!(typeof r=="object"&&typeof o=="object")||Object.prototype.isPrototypeOf.call(r,o)||Object.prototype.isPrototypeOf.call(o,r)||r.constructor!==o.constructor||r.prototype!==o.prototype||t.indexOf(r)>-1||n.indexOf(o)>-1)return!1;for(a in o)if(o.hasOwnProperty(a)!==r.hasOwnProperty(a)||typeof o[a]!=typeof r[a])return!1;for(a in r){if(o.hasOwnProperty(a)!==r.hasOwnProperty(a)||typeof o[a]!=typeof r[a])return!1;switch(typeof r[a]){case"object":case"function":if(t.push(r),n.push(o),!this.compare2Objects(t,n,r[a],o[a]))return!1;t.pop(),n.pop();break;default:if(r[a]!==o[a])return!1;break}}return!0}}class Zte{constructor(t,n,r,o,a){this.expressionMap=t,this.driver=n,this.rawRelationIdResults=r,this.rawRelationCountResults=o,this.queryRunner=a}transform(t,n){const r=this.group(t,n),o=[];return r.forEach(a=>{const i=this.transformRawResultsGroup(a,n);i!==void 0&&!Object.values(i).every(s=>s===null)&&o.push(i)}),o}group(t,n){const r=new Map,o=[];return n.metadata.tableType==="view"?o.push(...n.metadata.columns.map(a=>ye.buildAlias(this.driver,void 0,n.name,a.databaseName))):o.push(...n.metadata.primaryColumns.map(a=>ye.buildAlias(this.driver,void 0,n.name,a.databaseName))),t.forEach(a=>{const i=o.map(c=>{const l=a[c];return Th.isBuffer(l)?l.toString("hex"):Rt.isObject(l)?JSON.stringify(l):l}).join("_"),s=r.get(i);s?s.push(a):r.set(i,[a])}),r}transformRawResultsGroup(t,n){let r=n.metadata;if(r.discriminatorColumn){const l=t.map(d=>d[ye.buildAlias(this.driver,void 0,n.name,n.metadata.discriminatorColumn.databaseName)]),u=r.childEntityMetadatas.find(d=>typeof l.find(f=>f===d.discriminatorValue)<"u");u&&(r=u)}let o=r.create(this.queryRunner,{fromDeserializer:!0,pojo:this.expressionMap.options.indexOf("create-pojo")!==-1});const a=this.transformColumns(t,n,o,r),i=this.transformJoins(t,o,n,r),s=this.transformRelationIds(t,n,o,r),c=this.transformRelationCounts(t,n,o);if(a||r.primaryColumns.filter(l=>l.isVirtual===!1).length===0&&(i||s||c))return o}transformColumns(t,n,r,o){let a=!1;return o.columns.forEach(i=>{if(o.childEntityMetadatas.length>0&&o.childEntityMetadatas.findIndex(c=>c.target===i.target)!==-1)return;const s=t[0][ye.buildAlias(this.driver,void 0,n.name,i.databaseName)];s===void 0||i.isVirtual||this.expressionMap.selects.find(c=>c.selection===n.name||c.selection===n.name+"."+i.propertyPath)&&(i.setEntityValue(r,this.driver.prepareHydratedValue(s,i)),s!==null&&(a=!0))}),a}transformJoins(t,n,r,o){let a=!1;return this.expressionMap.joinAttributes.forEach(i=>{if(!i.metadata||!i.isSelected||i.relation&&!o.relations.find(c=>c===i.relation))return;if(i.mapToProperty){if(i.mapToPropertyParentAlias!==r.name)return}else if(!i.relation||i.parentAlias!==r.name||i.relationPropertyPath!==i.relation.propertyPath)return;let s=this.transform(t,i.alias);s=i.isMany?s:s[0],s=!i.isMany&&s===void 0?null:s,s!==void 0&&(i.mapToPropertyPropertyName?n[i.mapToPropertyPropertyName]=s:i.relation.setEntityValue(n,s),a=!0)}),a}transformRelationIds(t,n,r,o){let a=!1;return this.rawRelationIdResults.forEach((i,s)=>{if(i.relationIdAttribute.parentAlias!==n.name)return;const c=i.relationIdAttribute.relation,l=this.createValueMapFromJoinColumns(c,i.relationIdAttribute.parentAlias,t);if(l==null)return;this.prepareDataForTransformRelationIds();const u=this.hashEntityIds(c,l),d=this.relationIdMaps[s][u]||[],f=i.relationIdAttribute.mapToPropertyPropertyPath.split("."),p=(y,m,v)=>{const b=y.shift();if(b&&y.length===0)return m[b]=v,m;if(b&&y.length>0)p(y,m[b],v);else return m};c.isOneToOne||c.isManyToOne?d[0]!==void 0&&(p(f,r,d[0]),a=!0):(p(f,r,d),a=a||d.length>0)}),a}transformRelationCounts(t,n,r){let o=!1;return this.rawRelationCountResults.filter(a=>a.relationCountAttribute.parentAlias===n.name).forEach(a=>{const i=a.relationCountAttribute.relation;let s;i.isOneToMany?s=i.inverseRelation.joinColumns[0].referencedColumn.databaseName:s=i.isOwning?i.joinColumns[0].referencedColumn.databaseName:i.inverseRelation.joinColumns[0].referencedColumn.databaseName;const c=t[0][ye.buildAlias(this.driver,void 0,n.name,s)];c!=null&&(r[a.relationCountAttribute.mapToPropertyPropertyName]=0,a.results.filter(l=>l.parentId===c).forEach(l=>{r[a.relationCountAttribute.mapToPropertyPropertyName]=parseInt(l.cnt),o=!0}))}),o}createValueMapFromJoinColumns(t,n,r){let o;return t.isManyToOne||t.isOneToOneOwner?o=t.entityMetadata.primaryColumns.map(a=>a):t.isOneToMany||t.isOneToOneNotOwner?o=t.inverseRelation.joinColumns.map(a=>a):t.isOwning?o=t.joinColumns.map(a=>a):o=t.inverseRelation.inverseJoinColumns.map(a=>a),o.reduce((a,i)=>(r.forEach(s=>{t.isManyToOne||t.isOneToOneOwner?a[i.databaseName]=this.driver.prepareHydratedValue(s[ye.buildAlias(this.driver,void 0,n,i.databaseName)],i):a[i.databaseName]=this.driver.prepareHydratedValue(s[ye.buildAlias(this.driver,void 0,n,i.referencedColumn.databaseName)],i.referencedColumn)}),a),{})}extractEntityPrimaryIds(t,n){let r;return t.isManyToOne||t.isOneToOneOwner?r=t.entityMetadata.primaryColumns.map(o=>o):t.isOneToMany||t.isOneToOneNotOwner?r=t.inverseRelation.joinColumns.map(o=>o):t.isOwning?r=t.joinColumns.map(o=>o):r=t.inverseRelation.inverseJoinColumns.map(o=>o),r.reduce((o,a)=>(o[a.databaseName]=n[a.databaseName],o),{})}prepareDataForTransformRelationIds(){this.relationIdMaps||(this.relationIdMaps=this.rawRelationIdResults.map(t=>{const n=t.relationIdAttribute.relation;let r;return n.isManyToOne||n.isOneToOneOwner?r=n.joinColumns:n.isOneToMany||n.isOneToOneNotOwner?r=n.inverseEntityMetadata.primaryColumns:n.isOwning?r=n.inverseJoinColumns:r=n.inverseRelation.joinColumns,t.results.reduce((o,a)=>{let i=r.reduce((s,c)=>{let l=a[c.databaseName];return n.isOneToMany||n.isOneToOneNotOwner?(c.isVirtual&&c.referencedColumn&&c.referencedColumn.propertyName!==c.propertyName&&(l=c.referencedColumn.createValueMap(l)),Xt.mergeDeep(s,c.createValueMap(l))):(!c.isPrimary&&c.referencedColumn.referencedColumn&&(l=c.referencedColumn.referencedColumn.createValueMap(l)),Xt.mergeDeep(s,c.referencedColumn.createValueMap(l)))},{});if(r.length===1&&!t.relationIdAttribute.disableMixedMap&&(n.isOneToMany||n.isOneToOneNotOwner?i=r[0].getEntityValue(i):i=r[0].referencedColumn.getEntityValue(i)),i!==void 0){const s=this.hashEntityIds(n,a);o[s]?o[s].push(i):o[s]=[i]}return o},{})}))}hashEntityIds(t,n){const r=this.extractEntityPrimaryIds(t,n);return JSON.stringify(r)}}let ene=class{constructor(e,t,n){this.connection=e,this.queryRunner=t,this.relationIdAttributes=n}async load(e){const t=this.relationIdAttributes.map(async n=>{if(n.relation.isManyToOne||n.relation.isOneToOneOwner){if(n.queryBuilderFactory)throw new xe("Additional condition can not be used with ManyToOne or OneToOne owner relations.");const r={},o=e.map(a=>{const i={},s=[];n.relation.joinColumns.forEach(l=>{i[l.databaseName]=this.connection.driver.prepareHydratedValue(a[ye.buildAlias(this.connection.driver,void 0,n.parentAlias,l.databaseName)],l.referencedColumn);const u=`${l.databaseName}:${i[l.databaseName]}`;s.indexOf(u)===-1&&s.push(u)}),n.relation.entityMetadata.primaryColumns.forEach(l=>{i[l.databaseName]=this.connection.driver.prepareHydratedValue(a[ye.buildAlias(this.connection.driver,void 0,n.parentAlias,l.databaseName)],l);const u=`${l.databaseName}:${i[l.databaseName]}`;s.indexOf(u)===-1&&s.push(u)}),s.sort();const c=s.join("::");return r[c]?null:(r[c]=!0,i)}).filter(a=>a);return{relationIdAttribute:n,results:o}}else if(n.relation.isOneToMany||n.relation.isOneToOneNotOwner){const r=n.relation,o=r.isOwning?r.joinColumns:r.inverseRelation.joinColumns,a=r.inverseEntityMetadata.target,i=r.inverseEntityMetadata.tableName,s=n.alias||i,c={},l={},u=e.map((p,y)=>{const m=[],v={},b=o.map(j=>{const w=j.databaseName+y,_=p[ye.buildAlias(this.connection.driver,void 0,n.parentAlias,j.referencedColumn.databaseName)],E=`${s}:${j.propertyPath}:${_}`;return m.indexOf(E)!==-1?"":(m.push(E),v[w]=_,s+"."+j.propertyPath+" = :"+w)}).filter(j=>j).join(" AND ");m.sort();const x=m.join("::");return c[x]?"":(c[x]=!0,Object.assign(l,v),b)}).filter(p=>p).map(p=>"("+p+")").join(" OR ");if(!u)return{relationIdAttribute:n,results:[]};const d=this.connection.createQueryBuilder(this.queryRunner);Xt.uniq([...o,...r.inverseRelation.entityMetadata.primaryColumns],p=>p.propertyPath).forEach(p=>{d.addSelect(s+"."+p.propertyPath,p.databaseName)}),d.from(a,s).where("("+u+")").setParameters(l),n.queryBuilderFactory&&n.queryBuilderFactory(d);const f=await d.getRawMany();return f.forEach(p=>{o.forEach(y=>{p[y.databaseName]=this.connection.driver.prepareHydratedValue(p[y.databaseName],y.referencedColumn)}),r.inverseRelation.entityMetadata.primaryColumns.forEach(y=>{p[y.databaseName]=this.connection.driver.prepareHydratedValue(p[y.databaseName],y)})}),{relationIdAttribute:n,results:f}}else{const r=n.relation,o=r.isOwning?r.joinColumns:r.inverseRelation.inverseJoinColumns,a=r.isOwning?r.inverseJoinColumns:r.inverseRelation.joinColumns,i=n.junctionAlias,s=n.joinInverseSideMetadata.tableName,c=n.alias||s,l=r.isOwning?r.junctionEntityMetadata.tableName:r.inverseRelation.junctionEntityMetadata.tableName,u=e.map(x=>o.reduce((j,w)=>(j[w.propertyPath]=x[ye.buildAlias(this.connection.driver,void 0,n.parentAlias,w.referencedColumn.databaseName)],j),{}));if(u.length===0)return{relationIdAttribute:n,results:[]};const d={},f={},p=u.map((x,j)=>{const w=[],_={},E=Object.keys(x).map(C=>{const M=C+j,P=x[C],N=`${i}:${C}:${P}`;return w.indexOf(N)!==-1?"":(w.push(N),_[M]=P,i+"."+C+" = :"+M)}).filter(C=>C).join(" AND ");w.sort();const S=w.join("::");return f[S]?"":(f[S]=!0,Object.assign(d,_),E)}).filter(x=>x),y=a.map(x=>i+"."+x.propertyPath+" = "+c+"."+x.referencedColumn.propertyPath).join(" AND "),m=p.map(x=>"("+x+" AND "+y+")").join(" OR "),v=this.connection.createQueryBuilder(this.queryRunner);a.forEach(x=>{v.addSelect(i+"."+x.propertyPath,x.databaseName).addOrderBy(i+"."+x.propertyPath)}),o.forEach(x=>{v.addSelect(i+"."+x.propertyPath,x.databaseName).addOrderBy(i+"."+x.propertyPath)}),v.from(s,c).innerJoin(l,i,m).setParameters(d),n.queryBuilderFactory&&n.queryBuilderFactory(v);const b=await v.getRawMany();return b.forEach(x=>{[...o,...a].forEach(j=>{x[j.databaseName]=this.connection.driver.prepareHydratedValue(x[j.databaseName],j.referencedColumn)})}),{relationIdAttribute:n,results:b}}});return Promise.all(t)}};class tne{constructor(t,n){this.connection=t,this.queryRunner=n}load(t,n,r){const o=Array.isArray(n)?n:[n],a=Array.isArray(r)?r:r?[r]:void 0;return t.isManyToMany?this.loadForManyToMany(t,o,a):t.isManyToOne||t.isOneToOneOwner?this.loadForManyToOneAndOneToOneOwner(t,o,a):this.loadForOneToManyAndOneToOneNotOwner(t,o,a)}async loadManyToManyRelationIdsAndGroup(t,n,r,o){const a=t.isManyToMany||t.isOneToMany,i=Array.isArray(n)?n:[n];if(!r&&(r=await this.connection.relationLoader.load(t,n,this.queryRunner,o),!r.length))return i.map(d=>({entity:d,related:a?[]:void 0}));const s=await this.load(t,n,r),c=Array.isArray(r)?r:[r];let l=[],u=[];return t.isManyToManyOwner?(l=t.junctionEntityMetadata.inverseColumns.map(d=>d.referencedColumn),u=t.junctionEntityMetadata.ownerColumns.map(d=>d.referencedColumn)):t.isManyToManyNotOwner?(l=t.junctionEntityMetadata.ownerColumns.map(d=>d.referencedColumn),u=t.junctionEntityMetadata.inverseColumns.map(d=>d.referencedColumn)):t.isManyToOne||t.isOneToOneOwner?(l=t.joinColumns.map(d=>d.referencedColumn),u=t.entityMetadata.primaryColumns):(t.isOneToMany||t.isOneToOneNotOwner)&&(l=t.inverseRelation.entityMetadata.primaryColumns,u=t.inverseRelation.joinColumns.map(d=>d.referencedColumn)),i.map(d=>{const f={entity:d,related:a?[]:void 0},p=s.filter(y=>u.every(m=>m.compareEntityValue(d,y[m.entityMetadata.name+"_"+m.propertyAliasName])));return p.length&&c.forEach(y=>{p.forEach(m=>{l.every(v=>v.compareEntityValue(y,m[ye.buildAlias(this.connection.driver,void 0,v.entityMetadata.name+"_"+t.propertyPath.replace(".","_")+"_"+v.propertyPath.replace(".","_"))]))&&(a?f.related.push(y):f.related=y)})}),f})}loadForManyToMany(t,n,r){const o=t.junctionEntityMetadata,a=o.name,i=t.isOwning?o.ownerColumns:o.inverseColumns,s=t.isOwning?o.inverseColumns:o.ownerColumns,c=this.connection.createQueryBuilder(this.queryRunner);i.forEach(f=>{const p=ye.buildAlias(this.connection.driver,void 0,f.referencedColumn.entityMetadata.name+"_"+f.referencedColumn.propertyPath.replace(".","_"));c.addSelect(a+"."+f.propertyPath,p)}),s.forEach(f=>{const p=ye.buildAlias(this.connection.driver,void 0,f.referencedColumn.entityMetadata.name+"_"+t.propertyPath.replace(".","_")+"_"+f.referencedColumn.propertyPath.replace(".","_"));c.addSelect(a+"."+f.propertyPath,p)});let l="";if(i.length===1){const f=n.map(p=>i[0].referencedColumn.getEntityValue(p));f.every(p=>typeof p=="number")?l=`${a}.${i[0].propertyPath} IN (${f.join(", ")})`:(c.setParameter("values1",f),l=a+"."+i[0].propertyPath+" IN (:...values1)")}else l="("+n.map((f,p)=>i.map(y=>{const m="entity1_"+p+"_"+y.propertyName;return c.setParameter(m,y.referencedColumn.getEntityValue(f)),a+"."+y.propertyPath+" = :"+m}).join(" AND ")).map(f=>"("+f+")").join(" OR ")+")";let u="";if(r)if(s.length===1){const f=r.map(p=>s[0].referencedColumn.getEntityValue(p));f.every(p=>typeof p=="number")?u=`${a}.${s[0].propertyPath} IN (${f.join(", ")})`:(c.setParameter("values2",f),u=a+"."+s[0].propertyPath+" IN (:...values2)")}else u="("+r.map((f,p)=>s.map(y=>{const m="entity2_"+p+"_"+y.propertyName;return c.setParameter(m,y.referencedColumn.getEntityValue(f)),a+"."+y.propertyPath+" = :"+m}).join(" AND ")).map(f=>"("+f+")").join(" OR ")+")";const d=[l,u].filter(f=>f.length>0).join(" AND ");return c.from(o.target,a).where(d).getRawMany()}loadForManyToOneAndOneToOneOwner(t,n,r){const o=t.entityMetadata.targetName,a=t.joinColumns.every(c=>!!t.entityMetadata.nonVirtualColumns.find(l=>l===c));if(r&&a){let c=[];if(n.forEach(l=>{let u={};t.entityMetadata.primaryColumns.forEach(d=>{const f=d.entityMetadata.name+"_"+d.propertyPath.replace(".","_");u[f]=d.getEntityValue(l)}),r.forEach(d=>{t.joinColumns.forEach(f=>{const p=f.getEntityValue(l),y=f.referencedColumn.getEntityValue(d);if(!(p===void 0||y===void 0)&&p===y){const m=f.referencedColumn.entityMetadata.name+"_"+t.propertyPath.replace(".","_")+"_"+f.referencedColumn.propertyPath.replace(".","_");u[m]=y}})}),Object.keys(u).length===t.entityMetadata.primaryColumns.length+t.joinColumns.length&&c.push(u)}),c.length===n.length)return Promise.resolve(c)}const i=this.connection.createQueryBuilder(this.queryRunner);t.entityMetadata.primaryColumns.forEach(c=>{const l=ye.buildAlias(this.connection.driver,void 0,c.entityMetadata.name+"_"+c.propertyPath.replace(".","_"));i.addSelect(o+"."+c.propertyPath,l)}),t.joinColumns.forEach(c=>{const l=ye.buildAlias(this.connection.driver,void 0,c.referencedColumn.entityMetadata.name+"_"+t.propertyPath.replace(".","_")+"_"+c.referencedColumn.propertyPath.replace(".","_"));i.addSelect(o+"."+c.propertyPath,l)});let s="";if(t.entityMetadata.primaryColumns.length===1){const c=n.map(l=>t.entityMetadata.primaryColumns[0].getEntityValue(l));c.every(l=>typeof l=="number")?s=`${o}.${t.entityMetadata.primaryColumns[0].propertyPath} IN (${c.join(", ")})`:(i.setParameter("values",c),s=o+"."+t.entityMetadata.primaryColumns[0].propertyPath+" IN (:...values)")}else s=n.map((c,l)=>t.entityMetadata.primaryColumns.map((u,d)=>{const f="entity"+l+"_"+d;return i.setParameter(f,u.getEntityValue(c)),o+"."+u.propertyPath+" = :"+f}).join(" AND ")).map(c=>"("+c+")").join(" OR ");return i.from(t.entityMetadata.target,o).where(s).getRawMany()}loadForOneToManyAndOneToOneNotOwner(t,n,r){if(t=t.inverseRelation,t.entityMetadata.primaryColumns.length===t.joinColumns.length&&t.entityMetadata.primaryColumns.every(s=>t.joinColumns.indexOf(s)!==-1))return Promise.resolve(n.map(s=>{const c={};return t.joinColumns.forEach(function(l){const u=l.referencedColumn.getEntityValue(s),d=l.referencedColumn.entityMetadata.name+"_"+l.referencedColumn.propertyPath.replace(".","_"),f=l.entityMetadata.name+"_"+t.inverseRelation.propertyPath.replace(".","_")+"_"+l.propertyPath.replace(".","_");c[d]=u,c[f]=u}),c}));const o=t.entityMetadata.targetName,a=this.connection.createQueryBuilder(this.queryRunner);t.entityMetadata.primaryColumns.forEach(s=>{const c=ye.buildAlias(this.connection.driver,void 0,s.entityMetadata.name+"_"+t.inverseRelation.propertyPath.replace(".","_")+"_"+s.propertyPath.replace(".","_"));a.addSelect(o+"."+s.propertyPath,c)}),t.joinColumns.forEach(s=>{const c=ye.buildAlias(this.connection.driver,void 0,s.referencedColumn.entityMetadata.name+"_"+s.referencedColumn.propertyPath.replace(".","_"));a.addSelect(o+"."+s.propertyPath,c)});let i="";if(t.joinColumns.length===1){const s=n.map(c=>t.joinColumns[0].referencedColumn.getEntityValue(c));s.every(c=>typeof c=="number")?i=`${o}.${t.joinColumns[0].propertyPath} IN (${s.join(", ")})`:(a.setParameter("values",s),i=o+"."+t.joinColumns[0].propertyPath+" IN (:...values)")}else i=n.map((s,c)=>t.joinColumns.map((l,u)=>{const d="entity"+c+"_"+u;return a.setParameter(d,l.referencedColumn.getEntityValue(s)),o+"."+l.propertyPath+" = :"+d}).join(" AND ")).map(s=>"("+s+")").join(" OR ");return a.from(t.entityMetadata.target,o).where(i).getRawMany()}}class nne{constructor(t){this.expressionMap=t}transform(){this.expressionMap.mainAlias&&this.expressionMap.mainAlias.metadata.relationIds.forEach(t=>{const n=this.metadataToAttribute(this.expressionMap.mainAlias.name,t);this.expressionMap.relationIdAttributes.push(n)}),this.expressionMap.joinAttributes.forEach(t=>{!t.metadata||t.metadata.isJunction||t.metadata.relationIds.forEach(n=>{const r=this.metadataToAttribute(t.alias.name,n);this.expressionMap.relationIdAttributes.push(r)})})}metadataToAttribute(t,n){return new Yb(this.expressionMap,{relationName:t+"."+n.relation.propertyName,mapToProperty:t+"."+n.propertyName,alias:n.alias,queryBuilderFactory:n.queryBuilderFactory})}}class rne{constructor(t,n,r){this.connection=t,this.queryRunner=n,this.relationCountAttributes=r}async load(t){const n=(o,a,i)=>i.indexOf(o)===a,r=this.relationCountAttributes.map(async o=>{if(o.relation.isOneToMany){const a=o.relation,i=a.inverseRelation,s=i.joinColumns[0].referencedColumn.propertyName,c=a.inverseEntityMetadata.target,l=a.inverseEntityMetadata.tableName,u=o.alias||l,d=i.propertyName;let f=t.map(y=>y[o.parentAlias+"_"+s]).filter(y=>!!y);if(f=f.filter(n),f.length===0)return{relationCountAttribute:o,results:[]};const p=this.connection.createQueryBuilder(this.queryRunner);return p.select(u+"."+d,"parentId").addSelect("COUNT(*)","cnt").from(c,u).where(u+"."+d+" IN (:...ids)").addGroupBy(u+"."+d).setParameter("ids",f),o.queryBuilderFactory&&o.queryBuilderFactory(p),{relationCountAttribute:o,results:await p.getRawMany()}}else{let a,i,s,c;o.relation.isOwning?(a=o.relation.joinColumns[0].referencedColumn.databaseName,i=o.relation.inverseJoinColumns[0].referencedColumn.databaseName,s=o.relation.junctionEntityMetadata.columns[0],c=o.relation.junctionEntityMetadata.columns[1]):(a=o.relation.inverseRelation.inverseJoinColumns[0].referencedColumn.databaseName,i=o.relation.inverseRelation.joinColumns[0].referencedColumn.databaseName,s=o.relation.junctionEntityMetadata.columns[1],c=o.relation.junctionEntityMetadata.columns[0]);let l=t.map(v=>v[o.parentAlias+"_"+a]).filter(v=>!!v);if(l=l.filter(n),l.length===0)return{relationCountAttribute:o,results:[]};const u=o.junctionAlias,d=o.joinInverseSideMetadata.tableName,f=o.alias||d,p=o.relation.junctionEntityMetadata.tableName,y=u+"."+s.propertyName+" IN ("+l.map(v=>isNaN(v)?"'"+v+"'":v)+") AND "+u+"."+c.propertyName+" = "+f+"."+i,m=this.connection.createQueryBuilder(this.queryRunner);return m.select(u+"."+s.propertyName,"parentId").addSelect("COUNT("+m.escape(f)+"."+m.escape(i)+")","cnt").from(d,f).innerJoin(p,u,y).addGroupBy(u+"."+s.propertyName),o.queryBuilderFactory&&o.queryBuilderFactory(m),{relationCountAttribute:o,results:await m.getRawMany()}}});return Promise.all(r)}}class one{constructor(t){this.expressionMap=t}transform(){this.expressionMap.mainAlias&&this.expressionMap.mainAlias.metadata.relationCounts.forEach(t=>{const n=this.metadataToAttribute(this.expressionMap.mainAlias.name,t);this.expressionMap.relationCountAttributes.push(n)}),this.expressionMap.joinAttributes.forEach(t=>{!t.metadata||t.metadata.isJunction||t.metadata.relationCounts.forEach(n=>{const r=this.metadataToAttribute(t.alias.name,n);this.expressionMap.relationCountAttributes.push(r)})})}metadataToAttribute(t,n){return new Kb(this.expressionMap,{relationName:t+"."+n.relation.propertyName,mapToProperty:t+"."+n.propertyName,alias:n.alias,queryBuilderFactory:n.queryBuilderFactory})}}class Jb{static isFindOneOptions(t){const n=t;return n&&(Array.isArray(n.select)||Array.isArray(n.relations)||typeof n.select=="object"||typeof n.relations=="object"||typeof n.where=="object"||typeof n.join=="object"||typeof n.order=="object"||typeof n.cache=="object"||typeof n.cache=="boolean"||typeof n.cache=="number"||typeof n.comment=="string"||typeof n.lock=="object"||typeof n.loadRelationIds=="object"||typeof n.loadRelationIds=="boolean"||typeof n.loadEagerRelations=="boolean"||typeof n.withDeleted=="boolean"||typeof n.relationLoadStrategy=="string"||typeof n.transaction=="boolean")}static isFindManyOptions(t){const n=t;return n&&(this.isFindOneOptions(n)||typeof n.skip=="number"||typeof n.take=="number"||typeof n.skip=="string"||typeof n.take=="string")}static extractFindManyOptionsAlias(t){if(this.isFindManyOptions(t)&&t.join)return t.join.alias}static applyOptionsToTreeQueryBuilder(t,n){if(n!=null&&n.relations){const r=[...n.relations];if(Jb.applyRelationsRecursively(t,r,t.expressionMap.mainAlias.name,t.expressionMap.mainAlias.metadata,""),r.length>0)throw new Mte(r)}return t}static applyRelationsRecursively(t,n,r,o,a){let i=[];if(a){const s=new RegExp("^"+a.replace(".","\\.")+"\\.");i=n.filter(c=>c.match(s)).map(c=>o.findRelationWithPropertyPath(c.replace(s,""))).filter(c=>c)}else i=n.map(s=>o.findRelationWithPropertyPath(s)).filter(s=>s);i.forEach(s=>{let c=ye.buildAlias(t.connection.driver,{joiner:"__"},r,s.propertyPath);const l=r+"."+s.propertyPath;t.expressionMap.relationLoadStrategy==="query"?t.concatRelationMetadata(s):t.leftJoinAndSelect(l,c),n.splice(n.indexOf(a?a+"."+s.propertyPath:s.propertyPath),1);let u,d;if(t.expressionMap.relationLoadStrategy==="query")u=s.inverseEntityMetadata,d=c;else{const f=t.expressionMap.joinAttributes.find(p=>p.entityOrProperty===l);u=f.metadata,d=f.alias.name}if(!d||!u)throw new kr(s.propertyPath,o);if(this.applyRelationsRecursively(t,n,d,u,a?a+"."+s.propertyPath:s.propertyPath),t.expressionMap.relationLoadStrategy==="join"){const f=o.relations.find(p=>p.propertyName===s.propertyPath);f&&this.joinEagerRelations(t,c,f.inverseEntityMetadata)}})}static joinEagerRelations(t,n,r){r.eagerRelations.forEach(o=>{let a=ye.buildAlias(t.connection.driver,{joiner:"__"},n,o.propertyName),i=!0;for(const l of t.expressionMap.joinAttributes)if(!(l.condition!==void 0||l.mapToProperty!==void 0||l.isMappingMany!==void 0||l.direction!=="LEFT"||l.entityOrProperty!==`${n}.${o.propertyPath}`)){i=!1,a=l.alias.name;break}const s=!!t.expressionMap.joinAttributes.find(l=>l.alias.name===a);i&&!s&&t.leftJoin(n+"."+o.propertyPath,a);let c=!0;for(const l of t.expressionMap.selects)if(!(l.aliasName!==void 0||l.virtual!==void 0||l.selection!==a)){c=!1;break}c&&t.addSelect(a),this.joinEagerRelations(t,a,o.inverseEntityMetadata)})}}class Zb extends Nt{constructor(){super(...arguments),this["@instanceof"]=Symbol.for("SelectQueryBuilder"),this.findOptions={},this.selects=[],this.joins=[],this.conditions="",this.orderBys=[],this.relationMetadatas=[]}getQuery(){let t=this.createComment();return t+=this.createCteExpression(),t+=this.createSelectExpression(),t+=this.createJoinExpression(),t+=this.createWhereExpression(),t+=this.createGroupByExpression(),t+=this.createHavingExpression(),t+=this.createOrderByExpression(),t+=this.createLimitOffsetExpression(),t+=this.createLockExpression(),t=t.trim(),this.expressionMap.subQuery&&(t="("+t+")"),this.replacePropertyNamesForTheWholeQuery(t)}setFindOptions(t){return this.findOptions=t,this.applyFindOptions(),this}subQuery(){const t=this.createQueryBuilder();return t.expressionMap.subQuery=!0,t.parentQueryBuilder=this,t}select(t,n){if(this.expressionMap.queryType="select",Array.isArray(t))this.expressionMap.selects=t.map(r=>({selection:r}));else if(typeof t=="function"){const r=t(this.subQuery());this.setParameters(r.getParameters()),this.expressionMap.selects.push({selection:r.getQuery(),aliasName:n})}else t&&(this.expressionMap.selects=[{selection:t,aliasName:n}]);return this}addSelect(t,n){if(!t)return this;if(Array.isArray(t))this.expressionMap.selects=this.expressionMap.selects.concat(t.map(r=>({selection:r})));else if(typeof t=="function"){const r=t(this.subQuery());this.setParameters(r.getParameters()),this.expressionMap.selects.push({selection:r.getQuery(),aliasName:n})}else t&&this.expressionMap.selects.push({selection:t,aliasName:n});return this}maxExecutionTime(t){return this.expressionMap.maxExecutionTime=t,this}distinct(t=!0){return this.expressionMap.selectDistinct=t,this}distinctOn(t){return this.expressionMap.selectDistinctOn=t,this}fromDummy(){return this.from(this.connection.driver.dummyTableName??"(SELECT 1 AS dummy_column)","dummy_table")}from(t,n){const r=this.createFromAlias(t,n);return this.expressionMap.setMainAlias(r),this}addFrom(t,n){const r=this.createFromAlias(t,n);return this.expressionMap.mainAlias||this.expressionMap.setMainAlias(r),this}innerJoin(t,n,r,o){return this.join("INNER",t,n,r,o),this}leftJoin(t,n,r,o){return this.join("LEFT",t,n,r,o),this}innerJoinAndSelect(t,n,r,o){return this.addSelect(n),this.innerJoin(t,n,r,o),this}leftJoinAndSelect(t,n,r,o){return this.addSelect(n),this.leftJoin(t,n,r,o),this}innerJoinAndMapMany(t,n,r,o,a){return this.addSelect(r),this.join("INNER",n,r,o,a,t,!0),this}innerJoinAndMapOne(t,n,r,o,a,i){return this.addSelect(r),this.join("INNER",n,r,o,a,t,!1,i),this}leftJoinAndMapMany(t,n,r,o,a){return this.addSelect(r),this.join("LEFT",n,r,o,a,t,!0),this}leftJoinAndMapOne(t,n,r,o,a,i){return this.addSelect(r),this.join("LEFT",n,r,o,a,t,!1,i),this}loadRelationIdAndMap(t,n,r,o){const a=new Yb(this.expressionMap);return a.mapToProperty=t,a.relationName=n,typeof r=="string"&&(a.alias=r),typeof r=="object"&&r.disableMixedMap&&(a.disableMixedMap=!0),a.queryBuilderFactory=o,this.expressionMap.relationIdAttributes.push(a),a.relation.junctionEntityMetadata&&this.expressionMap.createAlias({type:"other",name:a.junctionAlias,metadata:a.relation.junctionEntityMetadata}),this}loadRelationCountAndMap(t,n,r,o){const a=new Kb(this.expressionMap);return a.mapToProperty=t,a.relationName=n,a.alias=r,a.queryBuilderFactory=o,this.expressionMap.relationCountAttributes.push(a),this.expressionMap.createAlias({type:"other",name:a.junctionAlias}),a.relation.junctionEntityMetadata&&this.expressionMap.createAlias({type:"other",name:a.junctionAlias,metadata:a.relation.junctionEntityMetadata}),this}loadAllRelationIds(t){return this.expressionMap.mainAlias.metadata.relations.forEach(n=>{t!==void 0&&t.relations!==void 0&&t.relations.indexOf(n.propertyPath)===-1||this.loadRelationIdAndMap(this.expressionMap.mainAlias.name+"."+n.propertyPath,this.expressionMap.mainAlias.name+"."+n.propertyPath,t)}),this}where(t,n){this.expressionMap.wheres=[];const r=this.getWhereCondition(t);return r&&(this.expressionMap.wheres=[{type:"simple",condition:r}]),n&&this.setParameters(n),this}andWhere(t,n){return this.expressionMap.wheres.push({type:"and",condition:this.getWhereCondition(t)}),n&&this.setParameters(n),this}orWhere(t,n){return this.expressionMap.wheres.push({type:"or",condition:this.getWhereCondition(t)}),n&&this.setParameters(n),this}whereExists(t){return this.where(...this.getExistsCondition(t))}andWhereExists(t){return this.andWhere(...this.getExistsCondition(t))}orWhereExists(t){return this.orWhere(...this.getExistsCondition(t))}whereInIds(t){return this.where(this.getWhereInIdsCondition(t))}andWhereInIds(t){return this.andWhere(this.getWhereInIdsCondition(t))}orWhereInIds(t){return this.orWhere(this.getWhereInIdsCondition(t))}having(t,n){return this.expressionMap.havings.push({type:"simple",condition:t}),n&&this.setParameters(n),this}andHaving(t,n){return this.expressionMap.havings.push({type:"and",condition:t}),n&&this.setParameters(n),this}orHaving(t,n){return this.expressionMap.havings.push({type:"or",condition:t}),n&&this.setParameters(n),this}groupBy(t){return t?this.expressionMap.groupBys=[t]:this.expressionMap.groupBys=[],this}addGroupBy(t){return this.expressionMap.groupBys.push(t),this}timeTravelQuery(t){return this.connection.driver.options.type==="cockroachdb"&&(t===void 0?this.expressionMap.timeTravel="follower_read_timestamp()":this.expressionMap.timeTravel=t),this}orderBy(t,n="ASC",r){if(n!==void 0&&n!=="ASC"&&n!=="DESC")throw new xe('SelectQueryBuilder.addOrderBy "order" can accept only "ASC" and "DESC" values.');if(r!==void 0&&r!=="NULLS FIRST"&&r!=="NULLS LAST")throw new xe('SelectQueryBuilder.addOrderBy "nulls" can accept only "NULLS FIRST" and "NULLS LAST" values.');return t?typeof t=="object"?this.expressionMap.orderBys=t:r?this.expressionMap.orderBys={[t]:{order:n,nulls:r}}:this.expressionMap.orderBys={[t]:n}:this.expressionMap.orderBys={},this}addOrderBy(t,n="ASC",r){if(n!==void 0&&n!=="ASC"&&n!=="DESC")throw new xe('SelectQueryBuilder.addOrderBy "order" can accept only "ASC" and "DESC" values.');if(r!==void 0&&r!=="NULLS FIRST"&&r!=="NULLS LAST")throw new xe('SelectQueryBuilder.addOrderBy "nulls" can accept only "NULLS FIRST" and "NULLS LAST" values.');return r?this.expressionMap.orderBys[t]={order:n,nulls:r}:this.expressionMap.orderBys[t]=n,this}limit(t){if(this.expressionMap.limit=this.normalizeNumber(t),this.expressionMap.limit!==void 0&&isNaN(this.expressionMap.limit))throw new xe('Provided "limit" value is not a number. Please provide a numeric value.');return this}offset(t){if(this.expressionMap.offset=this.normalizeNumber(t),this.expressionMap.offset!==void 0&&isNaN(this.expressionMap.offset))throw new xe('Provided "offset" value is not a number. Please provide a numeric value.');return this}take(t){if(this.expressionMap.take=this.normalizeNumber(t),this.expressionMap.take!==void 0&&isNaN(this.expressionMap.take))throw new xe('Provided "take" value is not a number. Please provide a numeric value.');return this}skip(t){if(this.expressionMap.skip=this.normalizeNumber(t),this.expressionMap.skip!==void 0&&isNaN(this.expressionMap.skip))throw new xe('Provided "skip" value is not a number. Please provide a numeric value.');return this}useIndex(t){return this.expressionMap.useIndex=t,this}setLock(t,n,r){return this.expressionMap.lockMode=t,this.expressionMap.lockVersion=n,this.expressionMap.lockTables=r,this}setOnLocked(t){return this.expressionMap.onLocked=t,this}withDeleted(){return this.expressionMap.withDeleted=!0,this}async getRawOne(){return(await this.getRawMany())[0]}async getRawMany(){if(this.expressionMap.lockMode==="optimistic")throw new fl;this.expressionMap.queryEntity=!1;const t=this.obtainQueryRunner();let n=!1;try{this.expressionMap.useTransaction===!0&&t.isTransactionActive===!1&&(await t.startTransaction(),n=!0);const r=await this.loadRawResults(t);return n&&await t.commitTransaction(),r}catch(r){if(n)try{await t.rollbackTransaction()}catch{}throw r}finally{t!==this.queryRunner&&await t.release()}}async getRawAndEntities(){const t=this.obtainQueryRunner();let n=!1;try{this.expressionMap.useTransaction===!0&&t.isTransactionActive===!1&&(await t.startTransaction(),n=!0),this.expressionMap.queryEntity=!0;const r=await this.executeEntitiesAndRawResults(t);return n&&await t.commitTransaction(),r}catch(r){if(n)try{await t.rollbackTransaction()}catch{}throw r}finally{t!==this.queryRunner&&await t.release()}}async getOne(){const t=(await this.getRawAndEntities()).entities[0];if(t&&this.expressionMap.lockMode==="optimistic"&&this.expressionMap.lockVersion){const n=this.expressionMap.mainAlias.metadata;if(this.expressionMap.lockVersion instanceof Date){const r=n.updateDateColumn.getEntityValue(t);if(r.getTime()!==this.expressionMap.lockVersion.getTime())throw new KR(n.name,this.expressionMap.lockVersion,r)}else{const r=n.versionColumn.getEntityValue(t);if(r!==this.expressionMap.lockVersion)throw new KR(n.name,this.expressionMap.lockVersion,r)}}return t===void 0?null:t}async getOneOrFail(){const t=await this.getOne();if(!t)throw new Ete(this.expressionMap.mainAlias.target,this.expressionMap.parameters);return t}async getMany(){if(this.expressionMap.lockMode==="optimistic")throw new fl;return(await this.getRawAndEntities()).entities}async getCount(){if(this.expressionMap.lockMode==="optimistic")throw new fl;const t=this.obtainQueryRunner();let n=!1;try{this.expressionMap.useTransaction===!0&&t.isTransactionActive===!1&&(await t.startTransaction(),n=!0),this.expressionMap.queryEntity=!1;const r=await this.executeCountQuery(t);return n&&await t.commitTransaction(),r}catch(r){if(n)try{await t.rollbackTransaction()}catch{}throw r}finally{t!==this.queryRunner&&await t.release()}}async getExists(){if(this.expressionMap.lockMode==="optimistic")throw new fl;const t=this.obtainQueryRunner();let n=!1;try{this.expressionMap.useTransaction===!0&&t.isTransactionActive===!1&&(await t.startTransaction(),n=!0),this.expressionMap.queryEntity=!1;const r=await this.executeExistsQuery(t);return n&&await t.commitTransaction(),r}catch(r){if(n)try{await t.rollbackTransaction()}catch{}throw r}finally{t!==this.queryRunner&&await t.release()}}async getManyAndCount(){if(this.expressionMap.lockMode==="optimistic")throw new fl;const t=this.obtainQueryRunner();let n=!1;try{this.expressionMap.useTransaction===!0&&t.isTransactionActive===!1&&(await t.startTransaction(),n=!0),this.expressionMap.queryEntity=!0;const r=await this.executeEntitiesAndRawResults(t);this.expressionMap.queryEntity=!1;const o=this.expressionMap.cacheId;this.expressionMap.cacheId=o&&`${o}-count`;const a=await this.executeCountQuery(t),i=[r.entities,a];return n&&await t.commitTransaction(),i}catch(r){if(n)try{await t.rollbackTransaction()}catch{}throw r}finally{t!==this.queryRunner&&await t.release()}}async stream(){this.expressionMap.queryEntity=!1;const[t,n]=this.getQueryAndParameters(),r=this.obtainQueryRunner();let o=!1;try{this.expressionMap.useTransaction===!0&&r.isTransactionActive===!1&&(await r.startTransaction(),o=!0);const a=()=>{if(r!==this.queryRunner)return r.release()},i=r.stream(t,n,a,a);return o&&await r.commitTransaction(),i}catch(a){if(o)try{await r.rollbackTransaction()}catch{}throw a}}cache(t,n){return typeof t=="boolean"?this.expressionMap.cache=t:typeof t=="number"?(this.expressionMap.cache=!0,this.expressionMap.cacheDuration=t):(typeof t=="string"||typeof t=="number")&&(this.expressionMap.cache=!0,this.expressionMap.cacheId=t),n&&(this.expressionMap.cacheDuration=n),this}setOption(t){return this.expressionMap.options.push(t),this}join(t,n,r,o,a,i,s,c){a&&this.setParameters(a);const l=new uI(this.connection,this.expressionMap);l.direction=t,l.mapAsEntity=c,l.mapToProperty=i,l.isMappingMany=s,l.entityOrProperty=n,l.condition=o,this.expressionMap.joinAttributes.push(l);const u=l.metadata;if(u){if(u.deleteDateColumn&&!this.expressionMap.withDeleted){const d=`${r}.${u.deleteDateColumn.propertyName} IS NULL`;l.condition=l.condition?` ${l.condition} AND ${d}`:`${d}`}l.alias=this.expressionMap.createAlias({type:"join",name:r,metadata:u}),l.relation&&l.relation.junctionEntityMetadata&&this.expressionMap.createAlias({type:"join",name:l.junctionAlias,metadata:l.relation.junctionEntityMetadata})}else{let d="";if(typeof n=="function"){const p=n(this.subQuery());this.setParameters(p.getParameters()),d=p.getQuery()}else d=n;const f=typeof n=="function"||n.substr(0,1)==="("&&n.substr(-1)===")";l.alias=this.expressionMap.createAlias({type:"join",name:r,tablePath:f===!1?n:void 0,subQuery:f===!0?d:void 0})}}createSelectExpression(){if(!this.expressionMap.mainAlias)throw new xe("Cannot build query because main alias is not set (call qb#from method)");const t=[],n=[];if(this.expressionMap.mainAlias.hasMetadata){const s=this.expressionMap.mainAlias.metadata;t.push(...this.buildEscapedEntityColumnSelects(this.expressionMap.mainAlias.name,s)),n.push(...this.findEntityColumnSelects(this.expressionMap.mainAlias.name,s))}this.expressionMap.joinAttributes.forEach(s=>{if(s.metadata)t.push(...this.buildEscapedEntityColumnSelects(s.alias.name,s.metadata)),n.push(...this.findEntityColumnSelects(s.alias.name,s.metadata));else if(this.expressionMap.selects.some(c=>c.selection===s.alias.name)){t.push({selection:this.escape(s.alias.name)+".*"});const c=this.expressionMap.selects.find(l=>l.selection===s.alias.name);n.push(c)}}),this.expressionMap.selects.filter(s=>n.indexOf(s)===-1).forEach(s=>t.push({selection:this.replacePropertyNames(s.selection),aliasName:s.aliasName})),t.length===0&&t.push({selection:"*"});let r="";this.expressionMap.useIndex&&ye.isMySQLFamily(this.connection.driver)&&(r=` USE INDEX (${this.expressionMap.useIndex})`);const o=this.expressionMap.aliases.filter(s=>s.type==="from"&&(s.tablePath||s.subQuery)).map(s=>s.subQuery?s.subQuery+" "+this.escape(s.name):this.getTableName(s.tablePath)+" "+this.escape(s.name)),a=this.createSelectDistinctExpression(),i=t.map(s=>s.selection+(s.aliasName?" AS "+this.escape(s.aliasName):"")).join(", ");return a+i+" FROM "+o.join(", ")+this.createTableLockExpression()+r}createSelectDistinctExpression(){const{selectDistinct:t,selectDistinctOn:n,maxExecutionTime:r}=this.expressionMap,{driver:o}=this.connection;let a="SELECT ";return r>0&&ye.isMySQLFamily(o)&&(a+=`/*+ MAX_EXECUTION_TIME(${this.expressionMap.maxExecutionTime}) */ `),ye.isPostgresFamily(o)&&n.length>0?a=`SELECT DISTINCT ON (${n.map(i=>this.replacePropertyNames(i)).join(", ")}) `:t&&(a="SELECT DISTINCT "),a}createJoinExpression(){return this.expressionMap.joinAttributes.map(t=>{const n=t.relation,r=t.tablePath,o=t.alias.name;let a=t.condition?" AND ("+t.condition+")":"";const i=t.parentAlias;if(!i||!n){const s=t.alias.subQuery?t.alias.subQuery:this.getTableName(r);return" "+t.direction+" JOIN "+s+" "+this.escape(o)+this.createTableLockExpression()+(t.condition?" ON "+this.replacePropertyNames(t.condition):"")}if(n.isManyToOne||n.isOneToOneOwner){const s=n.joinColumns.map(c=>o+"."+c.referencedColumn.propertyPath+"="+i+"."+n.propertyPath+"."+c.referencedColumn.propertyPath).join(" AND ");return" "+t.direction+" JOIN "+this.getTableName(r)+" "+this.escape(o)+this.createTableLockExpression()+" ON "+this.replacePropertyNames(s+a)}else if(n.isOneToMany||n.isOneToOneNotOwner){const s=n.inverseRelation.joinColumns.map(c=>(n.inverseEntityMetadata.tableType==="entity-child"&&n.inverseEntityMetadata.discriminatorColumn&&(a+=" AND "+o+"."+n.inverseEntityMetadata.discriminatorColumn.databaseName+"='"+n.inverseEntityMetadata.discriminatorValue+"'"),o+"."+n.inverseRelation.propertyPath+"."+c.referencedColumn.propertyPath+"="+i+"."+c.referencedColumn.propertyPath)).join(" AND ");if(!s)throw new xe(`Relation ${n.entityMetadata.name}.${n.propertyName} does not have join columns.`);return" "+t.direction+" JOIN "+this.getTableName(r)+" "+this.escape(o)+this.createTableLockExpression()+" ON "+this.replacePropertyNames(s+a)}else{const s=n.junctionEntityMetadata.tablePath,c=t.junctionAlias;let l="",u="";return n.isOwning?(l=n.joinColumns.map(d=>c+"."+d.propertyPath+"="+i+"."+d.referencedColumn.propertyPath).join(" AND "),u=n.inverseJoinColumns.map(d=>o+"."+d.referencedColumn.propertyPath+"="+c+"."+d.propertyPath).join(" AND ")):(l=n.inverseRelation.inverseJoinColumns.map(d=>c+"."+d.propertyPath+"="+i+"."+d.referencedColumn.propertyPath).join(" AND "),u=n.inverseRelation.joinColumns.map(d=>o+"."+d.referencedColumn.propertyPath+"="+c+"."+d.propertyPath).join(" AND "))," "+t.direction+" JOIN "+this.getTableName(s)+" "+this.escape(c)+this.createTableLockExpression()+" ON "+this.replacePropertyNames(l)+" "+t.direction+" JOIN "+this.getTableName(r)+" "+this.escape(o)+this.createTableLockExpression()+" ON "+this.replacePropertyNames(u+a)}}).join(" ")}createGroupByExpression(){return!this.expressionMap.groupBys||!this.expressionMap.groupBys.length?"":" GROUP BY "+this.replacePropertyNames(this.expressionMap.groupBys.join(", "))}createOrderByExpression(){const t=this.expressionMap.allOrderBys;return Object.keys(t).length===0?"":" ORDER BY "+Object.keys(t).map(n=>{const r=typeof t[n]=="string"?t[n]:t[n].order+" "+t[n].nulls,o=this.expressionMap.selects.find(a=>a.selection===n);if(o&&!o.aliasName&&n.indexOf(".")!==-1){const a=n.split("."),i=a[0],s=a.slice(1).join("."),c=this.expressionMap.aliases.find(l=>l.name===i);if(c){const l=c.metadata.findColumnWithPropertyPath(s);if(l){const u=ye.buildAlias(this.connection.driver,void 0,i,l.databaseName);return this.escape(u)+" "+r}}}return this.replacePropertyNames(n)+" "+r}).join(", ")}createLimitOffsetExpression(){let t=this.expressionMap.offset,n=this.expressionMap.limit;if(!t&&!n&&this.expressionMap.joinAttributes.length===0&&(t=this.expressionMap.skip,n=this.expressionMap.take),this.connection.driver.options.type==="mssql"){let r="";if((n||t)&&Object.keys(this.expressionMap.allOrderBys).length<=0&&(r=" ORDER BY (SELECT NULL)"),n&&t)return r+" OFFSET "+t+" ROWS FETCH NEXT "+n+" ROWS ONLY";if(n)return r+" OFFSET 0 ROWS FETCH NEXT "+n+" ROWS ONLY";if(t)return r+" OFFSET "+t+" ROWS"}else if(ye.isMySQLFamily(this.connection.driver)||this.connection.driver.options.type==="aurora-mysql"||this.connection.driver.options.type==="sap"||this.connection.driver.options.type==="spanner"){if(n&&t)return" LIMIT "+n+" OFFSET "+t;if(n)return" LIMIT "+n;if(t)throw new Pte}else if(ye.isSQLiteFamily(this.connection.driver)){if(n&&t)return" LIMIT "+n+" OFFSET "+t;if(n)return" LIMIT "+n;if(t)return" LIMIT -1 OFFSET "+t}else if(this.connection.driver.options.type==="oracle"){if(n&&t)return" OFFSET "+t+" ROWS FETCH NEXT "+n+" ROWS ONLY";if(n)return" FETCH NEXT "+n+" ROWS ONLY";if(t)return" OFFSET "+t+" ROWS"}else{if(n&&t)return" LIMIT "+n+" OFFSET "+t;if(n)return" LIMIT "+n;if(t)return" OFFSET "+t}return""}createTableLockExpression(){if(this.connection.driver.options.type==="mssql")switch(this.expressionMap.lockMode){case"pessimistic_read":return" WITH (HOLDLOCK, ROWLOCK)";case"pessimistic_write":return" WITH (UPDLOCK, ROWLOCK)";case"dirty_read":return" WITH (NOLOCK)"}return""}createLockExpression(){const t=this.connection.driver;let n="";if(this.expressionMap.lockTables){if(!(ye.isPostgresFamily(t)||t.options.type==="cockroachdb"))throw new xe("Lock tables not supported in selected driver");if(this.expressionMap.lockTables.length<1)throw new xe("lockTables cannot be an empty array");n=" OF "+this.expressionMap.lockTables.join(", ")}let r="";switch(this.expressionMap.onLocked==="nowait"?r=" NOWAIT":this.expressionMap.onLocked==="skip_locked"&&(r=" SKIP LOCKED"),this.expressionMap.lockMode){case"pessimistic_read":if(t.options.type==="mysql"||t.options.type==="aurora-mysql")return ye.isReleaseVersionOrGreater(t,"8.0.0")?" FOR SHARE"+n+r:" LOCK IN SHARE MODE";if(t.options.type==="mariadb")return" LOCK IN SHARE MODE";if(ye.isPostgresFamily(t))return" FOR SHARE"+n+r;if(t.options.type==="oracle")return" FOR UPDATE";if(t.options.type==="mssql")return"";throw new Hi;case"pessimistic_write":if(ye.isMySQLFamily(t)||t.options.type==="aurora-mysql"||t.options.type==="oracle")return" FOR UPDATE"+r;if(ye.isPostgresFamily(t)||t.options.type==="cockroachdb")return" FOR UPDATE"+n+r;if(t.options.type==="mssql")return"";throw new Hi;case"pessimistic_partial_write":if(ye.isPostgresFamily(t))return" FOR UPDATE"+n+" SKIP LOCKED";if(ye.isMySQLFamily(t))return" FOR UPDATE SKIP LOCKED";throw new Hi;case"pessimistic_write_or_fail":if(ye.isPostgresFamily(t)||t.options.type==="cockroachdb")return" FOR UPDATE"+n+" NOWAIT";if(ye.isMySQLFamily(t))return" FOR UPDATE NOWAIT";throw new Hi;case"for_no_key_update":if(ye.isPostgresFamily(t)||t.options.type==="cockroachdb")return" FOR NO KEY UPDATE"+n+r;throw new Hi;case"for_key_share":if(ye.isPostgresFamily(t))return" FOR KEY SHARE"+n+r;throw new Hi;default:return""}}createHavingExpression(){if(!this.expressionMap.havings||!this.expressionMap.havings.length)return"";const t=this.expressionMap.havings.map((n,r)=>{switch(n.type){case"and":return(r>0?"AND ":"")+this.replacePropertyNames(n.condition);case"or":return(r>0?"OR ":"")+this.replacePropertyNames(n.condition);default:return this.replacePropertyNames(n.condition)}}).join(" ");return t.length?" HAVING "+t:""}buildEscapedEntityColumnSelects(t,n){const r=this.expressionMap.selects.some(l=>l.selection===t),o=[];if(r&&o.push(...n.columns.filter(l=>l.isSelect===!0)),o.push(...n.columns.filter(l=>this.expressionMap.selects.some(u=>u.selection===t+"."+l.propertyPath))),o.length===0)return[];const a=this.expressionMap.queryEntity?n.primaryColumns.filter(l=>o.indexOf(l)===-1):[],i=[...o,...a],s=[],c=this.escape(t);return i.forEach(l=>{let u=c+"."+this.escape(l.databaseName);l.isVirtualProperty&&l.query&&(u=`(${l.query(c)})`),this.connection.driver.spatialTypes.indexOf(l.type)!==-1&&((ye.isMySQLFamily(this.connection.driver)||this.connection.driver.options.type==="aurora-mysql")&&(u=`${this.connection.driver.options.legacySpatialSupport?"AsText":"ST_AsText"}(${u})`),ye.isPostgresFamily(this.connection.driver)&&(l.precision?u=`ST_AsGeoJSON(${u}, ${l.precision})::json`:u=`ST_AsGeoJSON(${u})::json`),this.connection.driver.options.type==="mssql"&&(u=`${u}.ToString()`));const d=this.expressionMap.selects.filter(f=>f.selection===t+"."+l.propertyPath);if(d.length)d.forEach(f=>{s.push({selection:u,aliasName:f.aliasName?f.aliasName:ye.buildAlias(this.connection.driver,void 0,t,l.databaseName),virtual:f.virtual})});else{if(l.isVirtualProperty)return;s.push({selection:u,aliasName:ye.buildAlias(this.connection.driver,void 0,t,l.databaseName),virtual:r})}}),s}findEntityColumnSelects(t,n){const r=this.expressionMap.selects.find(o=>o.selection===t);return r?[r]:this.expressionMap.selects.filter(o=>n.columns.some(a=>o.selection===t+"."+a.propertyPath))}computeCountExpression(){const t=this.expressionMap.mainAlias.name,n=this.expressionMap.mainAlias.metadata.primaryColumns,r=this.escape(t);if(this.expressionMap.joinAttributes.length===0&&this.expressionMap.relationIdAttributes.length===0&&this.expressionMap.relationCountAttributes.length===0)return"COUNT(1)";if(this.connection.driver.options.type==="cockroachdb"||ye.isPostgresFamily(this.connection.driver))return"COUNT(DISTINCT("+n.map(o=>`${r}.${this.escape(o.databaseName)}`).join(", ")+"))";if(ye.isMySQLFamily(this.connection.driver))return"COUNT(DISTINCT "+n.map(o=>`${r}.${this.escape(o.databaseName)}`).join(", ")+")";if(this.connection.driver.options.type==="mssql"){const o=n.map(a=>`${r}.${this.escape(a.databaseName)}`).join(", '|;|', ");return n.length===1?`COUNT(DISTINCT(${o}))`:`COUNT(DISTINCT(CONCAT(${o})))`}return this.connection.driver.options.type==="spanner"?n.length===1?`COUNT(DISTINCT(${r}.${this.escape(n[0].databaseName)}))`:`COUNT(DISTINCT(CONCAT(${n.map(o=>`CAST(${r}.${this.escape(o.databaseName)} AS STRING)`).join(", '|;|', ")})))`:"COUNT(DISTINCT("+n.map(o=>`${r}.${this.escape(o.databaseName)}`).join(" || '|;|' || ")+"))"}async executeCountQuery(t){const n=this.computeCountExpression(),r=await this.clone().orderBy().groupBy().offset(void 0).limit(void 0).skip(void 0).take(void 0).select(n,"cnt").setOption("disable-global-order").loadRawResults(t);return!r||!r[0]||!r[0].cnt?0:parseInt(r[0].cnt)}async executeExistsQuery(t){return(await this.connection.createQueryBuilder().fromDummy().select("1","row_exists").whereExists(this).limit(1).loadRawResults(t)).length>0}applyFindOptions(){if(this.expressionMap.mainAlias.metadata){if(this.findOptions.relationLoadStrategy&&(this.expressionMap.relationLoadStrategy=this.findOptions.relationLoadStrategy),this.findOptions.comment&&this.comment(this.findOptions.comment),this.findOptions.withDeleted&&this.withDeleted(),this.findOptions.select){const t=Array.isArray(this.findOptions.select)?Xt.propertyPathsToTruthyObject(this.findOptions.select):this.findOptions.select;this.buildSelect(t,this.expressionMap.mainAlias.metadata,this.expressionMap.mainAlias.name)}if(this.selects.length&&this.select(this.selects),this.selects=[],this.findOptions.relations){const t=Array.isArray(this.findOptions.relations)?Xt.propertyPathsToTruthyObject(this.findOptions.relations):this.findOptions.relations;this.buildRelations(t,typeof this.findOptions.select=="object"?this.findOptions.select:void 0,this.expressionMap.mainAlias.metadata,this.expressionMap.mainAlias.name),this.findOptions.loadEagerRelations!==!1&&this.expressionMap.relationLoadStrategy==="join"&&this.buildEagerRelations(t,typeof this.findOptions.select=="object"?this.findOptions.select:void 0,this.expressionMap.mainAlias.metadata,this.expressionMap.mainAlias.name)}if(this.selects.length&&this.addSelect(this.selects),this.findOptions.where&&(this.conditions=this.buildWhere(this.findOptions.where,this.expressionMap.mainAlias.metadata,this.expressionMap.mainAlias.name),this.conditions.length&&this.andWhere(this.conditions.substr(0,1)!=="("?"("+this.conditions+")":this.conditions)),this.findOptions.order&&this.buildOrder(this.findOptions.order,this.expressionMap.mainAlias.metadata,this.expressionMap.mainAlias.name),this.joins.length&&this.joins.forEach(t=>{t.select&&!t.selection?t.type==="inner"?this.innerJoinAndSelect(`${t.parentAlias}.${t.relationMetadata.propertyPath}`,t.alias):this.leftJoinAndSelect(`${t.parentAlias}.${t.relationMetadata.propertyPath}`,t.alias):t.type==="inner"?this.innerJoin(`${t.parentAlias}.${t.relationMetadata.propertyPath}`,t.alias):this.leftJoin(`${t.parentAlias}.${t.relationMetadata.propertyPath}`,t.alias)}),this.findOptions.skip!==void 0&&this.skip(this.findOptions.skip),this.findOptions.take!==void 0&&this.take(this.findOptions.take),typeof this.findOptions.cache=="number"?this.cache(this.findOptions.cache):typeof this.findOptions.cache=="boolean"?this.cache(this.findOptions.cache):typeof this.findOptions.cache=="object"&&this.cache(this.findOptions.cache.id,this.findOptions.cache.milliseconds),this.findOptions.join&&(this.findOptions.join.leftJoin&&Object.keys(this.findOptions.join.leftJoin).forEach(t=>{this.leftJoin(this.findOptions.join.leftJoin[t],t)}),this.findOptions.join.innerJoin&&Object.keys(this.findOptions.join.innerJoin).forEach(t=>{this.innerJoin(this.findOptions.join.innerJoin[t],t)}),this.findOptions.join.leftJoinAndSelect&&Object.keys(this.findOptions.join.leftJoinAndSelect).forEach(t=>{this.leftJoinAndSelect(this.findOptions.join.leftJoinAndSelect[t],t)}),this.findOptions.join.innerJoinAndSelect&&Object.keys(this.findOptions.join.innerJoinAndSelect).forEach(t=>{this.innerJoinAndSelect(this.findOptions.join.innerJoinAndSelect[t],t)})),this.findOptions.lock){if(this.findOptions.lock.mode==="optimistic")this.setLock(this.findOptions.lock.mode,this.findOptions.lock.version);else if(this.findOptions.lock.mode==="pessimistic_read"||this.findOptions.lock.mode==="pessimistic_write"||this.findOptions.lock.mode==="dirty_read"||this.findOptions.lock.mode==="pessimistic_partial_write"||this.findOptions.lock.mode==="pessimistic_write_or_fail"||this.findOptions.lock.mode==="for_no_key_update"||this.findOptions.lock.mode==="for_key_share"){const t=this.findOptions.lock.tables?this.findOptions.lock.tables.map(n=>{const r=this.expressionMap.aliases.find(o=>o.metadata.tableNameWithoutPrefix===n);if(!r)throw new xe(`"${n}" is not part of this query`);return this.escape(r.name)}):void 0;this.setLock(this.findOptions.lock.mode,void 0,t),this.findOptions.lock.onLocked&&this.setOnLocked(this.findOptions.lock.onLocked)}}this.findOptions.loadRelationIds===!0?this.loadAllRelationIds():typeof this.findOptions.loadRelationIds=="object"&&this.loadAllRelationIds(this.findOptions.loadRelationIds),this.findOptions.loadEagerRelations!==!1&&Jb.joinEagerRelations(this,this.expressionMap.mainAlias.name,this.expressionMap.mainAlias.metadata),this.findOptions.transaction===!0&&(this.expressionMap.useTransaction=!0)}}concatRelationMetadata(t){this.relationMetadatas.push(t)}async executeEntitiesAndRawResults(t){if(!this.expressionMap.mainAlias)throw new xe('Alias is not set. Use "from" method to set an alias.');if((this.expressionMap.lockMode==="pessimistic_read"||this.expressionMap.lockMode==="pessimistic_write"||this.expressionMap.lockMode==="pessimistic_partial_write"||this.expressionMap.lockMode==="pessimistic_write_or_fail"||this.expressionMap.lockMode==="for_no_key_update"||this.expressionMap.lockMode==="for_key_share")&&!t.isTransactionActive)throw new Nte;if(this.expressionMap.lockMode==="optimistic"){const i=this.expressionMap.mainAlias.metadata;if(!i.versionColumn&&!i.updateDateColumn)throw new Cte(i.name)}const n=new ene(this.connection,t,this.expressionMap.relationIdAttributes),r=new rne(this.connection,t,this.expressionMap.relationCountAttributes);new nne(this.expressionMap).transform(),new one(this.expressionMap).transform();let o=[],a=[];if((this.expressionMap.skip||this.expressionMap.take)&&this.expressionMap.joinAttributes.length>0){const[i,s]=this.createOrderByCombinedWithSelectExpression("distinctAlias"),c=this.expressionMap.mainAlias.metadata,l=this.expressionMap.mainAlias.name,u=c.primaryColumns.map(p=>{const y=this.escape("distinctAlias"),m=this.escape(ye.buildAlias(this.connection.driver,void 0,l,p.databaseName));s[m]||(s[m]="ASC");const v=ye.buildAlias(this.connection.driver,void 0,"ids_"+l,p.databaseName);return`${y}.${m} AS ${this.escape(v)}`}),d=this.clone(),f=d.expressionMap.timeTravel;if(o=await new Zb(this.connection,t).select(`DISTINCT ${u.join(", ")}`).addSelect(i).from(`(${d.orderBy().timeTravelQuery(!1).getQuery()})`,"distinctAlias").timeTravelQuery(f).offset(this.expressionMap.skip).limit(this.expressionMap.take).orderBy(s).cache(this.expressionMap.cache&&this.expressionMap.cacheId?`${this.expressionMap.cacheId}-pagination`:this.expressionMap.cache,this.expressionMap.cacheDuration).setParameters(this.getParameters()).setNativeParameters(this.expressionMap.nativeParameters).getRawMany(),o.length>0){let p="";const y={};if(c.hasMultiplePrimaryKeys)p=o.map((m,v)=>c.primaryColumns.map(b=>{const x=`orm_distinct_ids_${v}_${b.databaseName}`,j=ye.buildAlias(this.connection.driver,void 0,"ids_"+l,b.databaseName);return y[x]=m[j],`${l}.${b.propertyPath}=:${x}`}).join(" AND ")).join(" OR ");else{const m=ye.buildAlias(this.connection.driver,void 0,"ids_"+l,c.primaryColumns[0].databaseName),v=o.map(b=>b[m]);v.every(b=>typeof b=="number")?p=`${l}.${c.primaryColumns[0].propertyPath} IN (${v.join(", ")})`:(y.orm_distinct_ids=v,p=l+"."+c.primaryColumns[0].propertyPath+" IN (:...orm_distinct_ids)")}o=await this.clone().mergeExpressionMap({extraAppendedAndWhereCondition:p}).setParameters(y).loadRawResults(t)}}else o=await this.loadRawResults(t);if(o.length>0){const i=await n.load(o),s=await r.load(o);a=new Zte(this.expressionMap,this.connection.driver,i,s,this.queryRunner).transform(o,this.expressionMap.mainAlias),this.expressionMap.callListeners===!0&&this.expressionMap.mainAlias.hasMetadata&&await t.broadcaster.broadcast("Load",this.expressionMap.mainAlias.metadata,a)}if(this.expressionMap.relationLoadStrategy==="query"){const i=new tne(this.connection,t);await Promise.all(this.relationMetadatas.map(async s=>{const c=s.inverseEntityMetadata.target,l=s.inverseEntityMetadata.targetName,u=Array.isArray(this.findOptions.select)?Xt.propertyPathsToTruthyObject(this.findOptions.select):this.findOptions.select,d=Array.isArray(this.findOptions.relations)?Xt.propertyPathsToTruthyObject(this.findOptions.relations):this.findOptions.relations,f=this.createQueryBuilder(t).select(l).from(c,l).setFindOptions({select:u?Xt.deepValue(u,s.propertyPath):void 0,order:this.findOptions.order?Xt.deepValue(this.findOptions.order,s.propertyPath):void 0,relations:d?Xt.deepValue(d,s.propertyPath):void 0,withDeleted:this.findOptions.withDeleted,relationLoadStrategy:this.findOptions.relationLoadStrategy});if(a.length>0){const p=await i.loadManyToManyRelationIdsAndGroup(s,a,void 0,f);a.forEach(y=>{const m=p.find(v=>v.entity===y);if(m){const v=m.related===void 0?null:m.related;s.setEntityValue(y,v)}})}}))}return{raw:o,entities:a}}createOrderByCombinedWithSelectExpression(t){const n=this.expressionMap.allOrderBys,r=Object.keys(n).map(a=>{if(a.indexOf(".")!==-1){const i=a.split("."),s=i[0],c=i.slice(1).join("."),l=this.expressionMap.findAliasByName(s).metadata.findColumnWithPropertyPath(c);return this.escape(t)+"."+this.escape(ye.buildAlias(this.connection.driver,void 0,s,l.databaseName))}else return this.expressionMap.selects.find(i=>i.selection===a||i.aliasName===a)?this.escape(t)+"."+this.escape(a):""}).join(", "),o={};return Object.keys(n).forEach(a=>{if(a.indexOf(".")!==-1){const i=a.split("."),s=i[0],c=i.slice(1).join("."),l=this.expressionMap.findAliasByName(s).metadata.findColumnWithPropertyPath(c);o[this.escape(t)+"."+this.escape(ye.buildAlias(this.connection.driver,void 0,s,l.databaseName))]=n[a]}else this.expressionMap.selects.find(i=>i.selection===a||i.aliasName===a)?o[this.escape(t)+"."+this.escape(a)]=n[a]:o[a]=n[a]}),[r,o]}async loadRawResults(t){const[n,r]=this.getQueryAndParameters(),o=n+" -- PARAMETERS: "+JSON.stringify(r,(u,d)=>typeof d=="bigint"?d.toString():d),a=typeof this.connection.options.cache=="object"?this.connection.options.cache:{};let i;const s=a.alwaysEnabled&&this.expressionMap.cache!==!1||this.expressionMap.cache===!0;let c=!1;if(this.connection.queryResultCache&&s)try{if(i=await this.connection.queryResultCache.getFromCache({identifier:this.expressionMap.cacheId,query:o,duration:this.expressionMap.cacheDuration||a.duration||1e3},t),i&&!this.connection.queryResultCache.isExpired(i))return JSON.parse(i.result)}catch(u){if(!a.ignoreErrors)throw u;c=!0}const l=await t.query(n,r,!0);if(!c&&this.connection.queryResultCache&&s)try{await this.connection.queryResultCache.storeInCache({identifier:this.expressionMap.cacheId,query:o,time:new Date().getTime(),duration:this.expressionMap.cacheDuration||a.duration||1e3,result:JSON.stringify(l.records)},i,t)}catch(u){if(!a.ignoreErrors)throw u}return l.records}mergeExpressionMap(t){return Rt.assign(this.expressionMap,t),this}normalizeNumber(t){return typeof t=="number"||t===void 0||t===null?t:Number(t)}obtainQueryRunner(){return this.queryRunner||this.connection.createQueryRunner(this.connection.defaultReplicationModeForReads())}buildSelect(t,n,r,o){for(let a in t){if(t[a]===void 0||t[a]===!1)continue;const i=o?o+"."+a:a,s=n.findColumnWithPropertyPathStrict(i),c=n.findEmbeddedWithPropertyPath(i),l=n.findRelationWithPropertyPath(i);if(!c&&!s&&!l)throw new kr(i,n);s?this.selects.push(r+"."+i):c&&this.buildSelect(t[a],n,r,i)}}buildRelations(t,n,r,o,a){t&&Object.keys(t).forEach(i=>{const s=t[i],c=a?a+"."+i:i,l=r.findEmbeddedWithPropertyPath(c),u=r.findRelationWithPropertyPath(c);if(!l&&!u)throw new kr(c,r);if(l)this.buildRelations(s,typeof n=="object"?Xt.deepValue(n,l.propertyPath):void 0,r,o,c);else if(u){let d=o+"_"+c.replace(".","_");d=ye.buildAlias(this.connection.driver,{joiner:"__"},o,d),(s===!0||typeof s=="object")&&(this.expressionMap.relationLoadStrategy==="query"?this.concatRelationMetadata(u):(this.joins.push({type:"left",select:!0,selection:n&&typeof n[i]=="object"?n[i]:void 0,alias:d,parentAlias:o,relationMetadata:u}),n&&typeof n[i]=="object"&&this.buildSelect(n[i],u.inverseEntityMetadata,d))),typeof s=="object"&&this.expressionMap.relationLoadStrategy==="join"&&this.buildRelations(s,typeof n=="object"?Xt.deepValue(n,u.propertyPath):void 0,u.inverseEntityMetadata,d,void 0)}})}buildEagerRelations(t,n,r,o,a){t&&Object.keys(t).forEach(i=>{const s=t[i],c=a?a+"."+i:i,l=r.findEmbeddedWithPropertyPath(c),u=r.findRelationWithPropertyPath(c);if(!l&&!u)throw new kr(c,r);if(l)this.buildEagerRelations(s,typeof n=="object"?Xt.deepValue(n,l.propertyPath):void 0,r,o,c);else if(u){let d=o+"_"+c.replace(".","_");d=ye.buildAlias(this.connection.driver,{joiner:"__"},o,d),(s===!0||typeof s=="object")&&u.inverseEntityMetadata.eagerRelations.forEach(f=>{let p=d+"_"+f.propertyPath.replace(".","_");p=ye.buildAlias(this.connection.driver,{joiner:"__"},d,p),this.joins.find(y=>y.alias===p)||this.joins.push({type:"left",select:!0,alias:p,parentAlias:d,selection:void 0,relationMetadata:f}),n&&typeof n[i]=="object"&&this.buildSelect(n[i],u.inverseEntityMetadata,d)}),typeof s=="object"&&this.buildEagerRelations(s,typeof n=="object"?Xt.deepValue(n,u.propertyPath):void 0,u.inverseEntityMetadata,d,void 0)}})}buildOrder(t,n,r,o){for(let a in t){if(t[a]===void 0)continue;const i=o?o+"."+a:a,s=n.findColumnWithPropertyPathStrict(i),c=n.findEmbeddedWithPropertyPath(i),l=n.findRelationWithPropertyPath(i);if(!c&&!s&&!l)throw new kr(i,n);if(s){let u=typeof t[a]=="object"?t[a].direction:t[a];u=u==="DESC"||u==="desc"||u===-1?"DESC":"ASC";let d=typeof t[a]=="object"?t[a].nulls:void 0;d=(d==null?void 0:d.toLowerCase())==="first"?"NULLS FIRST":(d==null?void 0:d.toLowerCase())==="last"?"NULLS LAST":void 0;let f=`${r}.${i}`;this.addOrderBy(f,u,d)}else if(c)this.buildOrder(t[a],n,r,i);else if(l){let u=r+"_"+i.replace(".","_");u=ye.buildAlias(this.connection.driver,{joiner:"__"},r,u),this.joins.find(d=>d.alias===u)||this.joins.push({type:"left",select:!1,alias:u,parentAlias:r,selection:void 0,relationMetadata:l}),this.buildOrder(t[a],l.inverseEntityMetadata,u)}}}buildWhere(t,n,r,o){let a="";if(Array.isArray(t))t.length&&(a=t.map(i=>this.buildWhere(i,n,r,o)).filter(i=>!!i).map(i=>"("+i+")").join(" OR "));else{let i=[];for(let s in t){if(t[s]===void 0||t[s]===null)continue;const c=o?o+"."+s:s,l=n.findColumnWithPropertyPathStrict(c),u=n.findEmbeddedWithPropertyPath(c),d=n.findRelationWithPropertyPath(c);if(!u&&!l&&!d)throw new kr(c,n);if(l){let f=`${r}.${c}`;l.isVirtualProperty&&l.query&&(f=`(${l.query(r)})`);let p=t[s];dt.isEqualOperator(t[s])&&(p=t[s].value),l.transformer&&(p instanceof pl?p.transformValue(l.transformer):p=Gb.transformTo(l.transformer,p)),i.push(this.createWhereConditionExpression(this.getWherePredicateCondition(f,p)))}else if(u){const f=this.buildWhere(t[s],n,r,c);f&&i.push(f)}else if(d){if(typeof t[s]=="object"&&Object.keys(t[s]).every(f=>t[s][f]===void 0))continue;if(dt.isFindOperator(t[s]))if(t[s].type==="moreThan"||t[s].type==="lessThan"||t[s].type==="moreThanOrEqual"||t[s].type==="lessThanOrEqual"){let f="";t[s].type==="moreThan"?f=">":t[s].type==="lessThan"?f="<":t[s].type==="moreThanOrEqual"?f=">=":t[s].type==="lessThanOrEqual"&&(f="<=");const p=this.subQuery();if(d.isManyToManyOwner)p.select("COUNT(*)").from(d.joinTableName,d.joinTableName).where(d.joinColumns.map(y=>`${d.joinTableName}.${y.propertyName} = ${r}.${y.referencedColumn.propertyName}`).join(" AND "));else if(d.isManyToManyNotOwner)p.select("COUNT(*)").from(d.inverseRelation.joinTableName,d.inverseRelation.joinTableName).where(d.inverseRelation.inverseJoinColumns.map(y=>`${d.inverseRelation.joinTableName}.${y.propertyName} = ${r}.${y.referencedColumn.propertyName}`).join(" AND "));else if(d.isOneToMany)p.select("COUNT(*)").from(d.inverseEntityMetadata.target,d.inverseEntityMetadata.tableName).where(d.inverseRelation.joinColumns.map(y=>`${d.inverseEntityMetadata.tableName}.${y.propertyName} = ${r}.${y.referencedColumn.propertyName}`).join(" AND "));else throw new Error("This relation isn't supported by given find operator");this.andWhere(p.getSql()+" "+f+" "+parseInt(t[s].value))}else if(d.isManyToOne||d.isOneToOne&&d.isOneToOneOwner){const f=`${r}.${c}`;i.push(this.createWhereConditionExpression(this.getWherePredicateCondition(f,t[s])))}else throw new Error("This relation isn't supported by given find operator");else{let f=r+"_"+d.propertyPath.replace(".","_");f=ye.buildAlias(this.connection.driver,{joiner:"__"},r,f),this.joins.find(y=>y.alias===f)||this.joins.push({type:"left",select:!1,selection:void 0,alias:f,parentAlias:r,relationMetadata:d});const p=this.buildWhere(t[s],d.inverseEntityMetadata,f);p&&i.push(p)}}}a=i.length?"("+i.join(") AND (")+")":i.join(" AND ")}return a.length?"("+a+")":a}}class yI{constructor(){this.generatedMaps=[]}static from(t){const n=new this;return n.raw=t.records,n.affected=t.affected,n}}class ane extends Nt{constructor(t,n){super(t,n),this["@instanceof"]=Symbol.for("SoftDeleteQueryBuilder"),this.expressionMap.aliasNamePrefixingEnabled=!1}getQuery(){let t=this.createUpdateExpression();return t+=this.createCteExpression(),t+=this.createOrderByExpression(),t+=this.createLimitExpression(),this.replacePropertyNamesForTheWholeQuery(t.trim())}async execute(){const t=this.obtainQueryRunner();let n=!1;try{this.expressionMap.useTransaction===!0&&t.isTransactionActive===!1&&(await t.startTransaction(),n=!0),this.expressionMap.callListeners===!0&&this.expressionMap.mainAlias.hasMetadata&&(this.expressionMap.queryType==="soft-delete"?await t.broadcaster.broadcast("BeforeSoftRemove",this.expressionMap.mainAlias.metadata):this.expressionMap.queryType==="restore"&&await t.broadcaster.broadcast("BeforeRecover",this.expressionMap.mainAlias.metadata));const r=new Qb(t,this.expressionMap);this.expressionMap.updateEntity===!0&&this.expressionMap.mainAlias.hasMetadata&&this.expressionMap.whereEntities.length>0&&(this.expressionMap.extraReturningColumns=r.getSoftDeletionReturningColumns());const[o,a]=this.getQueryAndParameters(),i=await t.query(o,a,!0),s=yI.from(i);return this.expressionMap.updateEntity===!0&&this.expressionMap.mainAlias.hasMetadata&&this.expressionMap.whereEntities.length>0&&await r.update(s,this.expressionMap.whereEntities),this.expressionMap.callListeners===!0&&this.expressionMap.mainAlias.hasMetadata&&(this.expressionMap.queryType==="soft-delete"?await t.broadcaster.broadcast("AfterSoftRemove",this.expressionMap.mainAlias.metadata):this.expressionMap.queryType==="restore"&&await t.broadcaster.broadcast("AfterRecover",this.expressionMap.mainAlias.metadata)),n&&await t.commitTransaction(),s}catch(r){if(n)try{await t.rollbackTransaction()}catch{}throw r}finally{t!==this.queryRunner&&await t.release()}}from(t,n){t=dt.isEntitySchema(t)?t.options.name:t;const r=this.createFromAlias(t,n);return this.expressionMap.setMainAlias(r),this}where(t,n){this.expressionMap.wheres=[];const r=this.getWhereCondition(t);return r&&(this.expressionMap.wheres=[{type:"simple",condition:r}]),n&&this.setParameters(n),this}andWhere(t,n){return this.expressionMap.wheres.push({type:"and",condition:this.getWhereCondition(t)}),n&&this.setParameters(n),this}orWhere(t,n){return this.expressionMap.wheres.push({type:"or",condition:this.getWhereCondition(t)}),n&&this.setParameters(n),this}whereInIds(t){return this.where(this.getWhereInIdsCondition(t))}andWhereInIds(t){return this.andWhere(this.getWhereInIdsCondition(t))}orWhereInIds(t){return this.orWhere(this.getWhereInIdsCondition(t))}output(t){return this.returning(t)}returning(t){if(!this.connection.driver.isReturningSqlSupported("update"))throw new Rf;return this.expressionMap.returning=t,this}orderBy(t,n="ASC",r){return t?typeof t=="object"?this.expressionMap.orderBys=t:r?this.expressionMap.orderBys={[t]:{order:n,nulls:r}}:this.expressionMap.orderBys={[t]:n}:this.expressionMap.orderBys={},this}addOrderBy(t,n="ASC",r){return r?this.expressionMap.orderBys[t]={order:n,nulls:r}:this.expressionMap.orderBys[t]=n,this}limit(t){return this.expressionMap.limit=t,this}whereEntity(t){if(!this.expressionMap.mainAlias.hasMetadata)throw new xe(".whereEntity method can only be used on queries which update real entity table.");this.expressionMap.wheres=[];const n=Array.isArray(t)?t:[t];return n.forEach(r=>{const o=this.expressionMap.mainAlias.metadata.getEntityIdMap(r);if(!o)throw new xe("Provided entity does not have ids set, cannot perform operation.");this.orWhereInIds(o)}),this.expressionMap.whereEntities=n,this}updateEntity(t){return this.expressionMap.updateEntity=t,this}createUpdateExpression(){const t=this.expressionMap.mainAlias.hasMetadata?this.expressionMap.mainAlias.metadata:void 0;if(!t)throw new xe(`Cannot get entity metadata for the given alias "${this.expressionMap.mainAlias}"`);if(!t.deleteDateColumn)throw new Ste(t);const n=[];switch(this.expressionMap.queryType){case"soft-delete":n.push(this.escape(t.deleteDateColumn.databaseName)+" = CURRENT_TIMESTAMP");break;case"restore":n.push(this.escape(t.deleteDateColumn.databaseName)+" = NULL");break;default:throw new xe('The queryType must be "soft-delete" or "restore"')}if(t.versionColumn&&n.push(this.escape(t.versionColumn.databaseName)+" = "+this.escape(t.versionColumn.databaseName)+" + 1"),t.updateDateColumn&&n.push(this.escape(t.updateDateColumn.databaseName)+" = CURRENT_TIMESTAMP"),n.length<=0)throw new Db;const r=this.createWhereExpression(),o=this.createReturningExpression("update");return o===""?`UPDATE ${this.getTableName(this.getMainTableName())} SET ${n.join(", ")}${r}`:this.connection.driver.options.type==="mssql"?`UPDATE ${this.getTableName(this.getMainTableName())} SET ${n.join(", ")} OUTPUT ${o}${r}`:`UPDATE ${this.getTableName(this.getMainTableName())} SET ${n.join(", ")}${r} RETURNING ${o}`}createOrderByExpression(){const t=this.expressionMap.orderBys;return Object.keys(t).length>0?" ORDER BY "+Object.keys(t).map(n=>typeof t[n]=="string"?this.replacePropertyNames(n)+" "+t[n]:this.replacePropertyNames(n)+" "+t[n].order+" "+t[n].nulls).join(", "):""}createLimitExpression(){let t=this.expressionMap.limit;if(t){if(ye.isMySQLFamily(this.connection.driver))return" LIMIT "+t;throw new XR}return""}}class ine extends Nt{constructor(t,n){super(t,n),this["@instanceof"]=Symbol.for("UpdateQueryBuilder"),this.expressionMap.aliasNamePrefixingEnabled=!1}getQuery(){let t=this.createComment();return t+=this.createCteExpression(),t+=this.createUpdateExpression(),t+=this.createOrderByExpression(),t+=this.createLimitExpression(),this.replacePropertyNamesForTheWholeQuery(t.trim())}async execute(){const t=this.obtainQueryRunner();let n=!1;try{this.expressionMap.useTransaction===!0&&t.isTransactionActive===!1&&(await t.startTransaction(),n=!0),this.expressionMap.callListeners===!0&&this.expressionMap.mainAlias.hasMetadata&&await t.broadcaster.broadcast("BeforeUpdate",this.expressionMap.mainAlias.metadata,this.expressionMap.valuesSet);let r=null,o=null;const a=new Qb(t,this.expressionMap),i=[];if(Array.isArray(this.expressionMap.returning)&&this.expressionMap.mainAlias.hasMetadata)for(const f of this.expressionMap.returning)i.push(...this.expressionMap.mainAlias.metadata.findColumnsWithPropertyPath(f));this.expressionMap.updateEntity===!0&&this.expressionMap.mainAlias.hasMetadata&&this.expressionMap.whereEntities.length>0&&(this.expressionMap.extraReturningColumns=a.getUpdationReturningColumns(),i.push(...this.expressionMap.extraReturningColumns.filter(f=>!i.includes(f)))),i.length>0&&this.connection.driver.options.type==="mssql"&&(r=this.connection.driver.buildTableVariableDeclaration("@OutputTable",i),o="SELECT * FROM @OutputTable");const[s,c]=this.getQueryAndParameters(),l=[r,s,o],u=await t.query(l.filter(f=>f!=null).join(`;

`),c,!0),d=yI.from(u);return this.expressionMap.updateEntity===!0&&this.expressionMap.mainAlias.hasMetadata&&this.expressionMap.whereEntities.length>0&&await a.update(d,this.expressionMap.whereEntities),this.expressionMap.callListeners===!0&&this.expressionMap.mainAlias.hasMetadata&&await t.broadcaster.broadcast("AfterUpdate",this.expressionMap.mainAlias.metadata,this.expressionMap.valuesSet),n&&await t.commitTransaction(),d}catch(r){if(n)try{await t.rollbackTransaction()}catch{}throw r}finally{t!==this.queryRunner&&await t.release()}}set(t){return this.expressionMap.valuesSet=t,this}where(t,n){this.expressionMap.wheres=[];const r=this.getWhereCondition(t);return r&&(this.expressionMap.wheres=[{type:"simple",condition:r}]),n&&this.setParameters(n),this}andWhere(t,n){return this.expressionMap.wheres.push({type:"and",condition:this.getWhereCondition(t)}),n&&this.setParameters(n),this}orWhere(t,n){return this.expressionMap.wheres.push({type:"or",condition:this.getWhereCondition(t)}),n&&this.setParameters(n),this}whereInIds(t){return this.where(this.getWhereInIdsCondition(t))}andWhereInIds(t){return this.andWhere(this.getWhereInIdsCondition(t))}orWhereInIds(t){return this.orWhere(this.getWhereInIdsCondition(t))}output(t){return this.returning(t)}returning(t){if(!this.connection.driver.isReturningSqlSupported("update"))throw new Rf;return this.expressionMap.returning=t,this}orderBy(t,n="ASC",r){return t?typeof t=="object"?this.expressionMap.orderBys=t:r?this.expressionMap.orderBys={[t]:{order:n,nulls:r}}:this.expressionMap.orderBys={[t]:n}:this.expressionMap.orderBys={},this}addOrderBy(t,n="ASC",r){return r?this.expressionMap.orderBys[t]={order:n,nulls:r}:this.expressionMap.orderBys[t]=n,this}limit(t){return this.expressionMap.limit=t,this}whereEntity(t){if(!this.expressionMap.mainAlias.hasMetadata)throw new xe(".whereEntity method can only be used on queries which update real entity table.");this.expressionMap.wheres=[];const n=Array.isArray(t)?t:[t];return n.forEach(r=>{const o=this.expressionMap.mainAlias.metadata.getEntityIdMap(r);if(!o)throw new xe("Provided entity does not have ids set, cannot perform operation.");this.orWhereInIds(o)}),this.expressionMap.whereEntities=n,this}updateEntity(t){return this.expressionMap.updateEntity=t,this}createUpdateExpression(){const t=this.getValueSet(),n=this.expressionMap.mainAlias.hasMetadata?this.expressionMap.mainAlias.metadata:void 0,r={};for(let c in t)t[c]!==void 0&&(r[c]=t[c]);const o=[],a=[];if(n?(this.createPropertyPath(n,r).forEach(c=>{const l=n.findColumnsWithPropertyPath(c);if(l.length<=0)throw new kr(c,n);l.forEach(u=>{if(!u.isUpdate||a.includes(u))return;a.push(u);let d=u.getEntityValue(r);if(u.referencedColumn&&typeof d=="object"&&!(d instanceof Date)&&d!==null&&!Th.isBuffer(d)?d=u.referencedColumn.getEntityValue(d):typeof d!="function"&&(d=this.connection.driver.preparePersistentValue(d,u)),typeof d=="function")o.push(this.escape(u.databaseName)+" = "+d());else if((this.connection.driver.options.type==="sap"||this.connection.driver.options.type==="spanner")&&d===null)o.push(this.escape(u.databaseName)+" = NULL");else{this.connection.driver.options.type==="mssql"&&(d=this.connection.driver.parametrizeValue(u,d));const f=this.createParameter(d);let p=null;if((ye.isMySQLFamily(this.connection.driver)||this.connection.driver.options.type==="aurora-mysql")&&this.connection.driver.spatialTypes.indexOf(u.type)!==-1){const y=this.connection.driver.options.legacySpatialSupport?"GeomFromText":"ST_GeomFromText";u.srid!=null?p=`${y}(${f}, ${u.srid})`:p=`${y}(${f})`}else ye.isPostgresFamily(this.connection.driver)&&this.connection.driver.spatialTypes.indexOf(u.type)!==-1?u.srid!=null?p=`ST_SetSRID(ST_GeomFromGeoJSON(${f}), ${u.srid})::${u.type}`:p=`ST_GeomFromGeoJSON(${f})::${u.type}`:this.connection.driver.options.type==="mssql"&&this.connection.driver.spatialTypes.indexOf(u.type)!==-1?p=u.type+"::STGeomFromText("+f+", "+(u.srid||"0")+")":p=f;o.push(this.escape(u.databaseName)+" = "+p)}})}),(o.length>0||Object.keys(r).length===0)&&(n.versionColumn&&a.indexOf(n.versionColumn)===-1&&o.push(this.escape(n.versionColumn.databaseName)+" = "+this.escape(n.versionColumn.databaseName)+" + 1"),n.updateDateColumn&&a.indexOf(n.updateDateColumn)===-1&&o.push(this.escape(n.updateDateColumn.databaseName)+" = CURRENT_TIMESTAMP"))):Object.keys(r).map(c=>{let l=r[c];if(typeof l=="function")o.push(this.escape(c)+" = "+l());else if((this.connection.driver.options.type==="sap"||this.connection.driver.options.type==="spanner")&&l===null)o.push(this.escape(c)+" = NULL");else{const u=this.createParameter(l);o.push(this.escape(c)+" = "+u)}}),o.length<=0)throw new Db;const i=this.createWhereExpression(),s=this.createReturningExpression("update");return s===""?`UPDATE ${this.getTableName(this.getMainTableName())} SET ${o.join(", ")}${i}`:this.connection.driver.options.type==="mssql"?`UPDATE ${this.getTableName(this.getMainTableName())} SET ${o.join(", ")} OUTPUT ${s}${i}`:`UPDATE ${this.getTableName(this.getMainTableName())} SET ${o.join(", ")}${i} RETURNING ${s}`}createOrderByExpression(){const t=this.expressionMap.orderBys;return Object.keys(t).length>0?" ORDER BY "+Object.keys(t).map(n=>typeof t[n]=="string"?this.replacePropertyNames(n)+" "+t[n]:this.replacePropertyNames(n)+" "+t[n].order+" "+t[n].nulls).join(", "):""}createLimitExpression(){let t=this.expressionMap.limit;if(t){if(ye.isMySQLFamily(this.connection.driver)||this.connection.driver.options.type==="aurora-mysql")return" LIMIT "+t;throw new XR}return""}getValueSet(){if(typeof this.expressionMap.valuesSet=="object")return this.expressionMap.valuesSet;throw new Db}}function sne(){Nt.registerQueryBuilderClass("DeleteQueryBuilder",e=>new Hte(e)),Nt.registerQueryBuilderClass("InsertQueryBuilder",e=>new Gte(e)),Nt.registerQueryBuilderClass("RelationQueryBuilder",e=>new Jte(e)),Nt.registerQueryBuilderClass("SelectQueryBuilder",e=>new Zb(e)),Nt.registerQueryBuilderClass("SoftDeleteQueryBuilder",e=>new ane(e)),Nt.registerQueryBuilderClass("UpdateQueryBuilder",e=>new ine(e))}var gI;(function(e){e.VIEW="VIEW",e.MATERIALIZED_VIEW="MATERIALIZED_VIEW",e.GENERATED_COLUMN="GENERATED_COLUMN"})(gI||(gI={}));var ex={exports:{}},tx,vI;function cne(){if(vI)return tx;vI=1;var e=1e3,t=e*60,n=t*60,r=n*24,o=r*7,a=r*365.25;tx=function(u,d){d=d||{};var f=typeof u;if(f==="string"&&u.length>0)return i(u);if(f==="number"&&isFinite(u))return d.long?c(u):s(u);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(u))};function i(u){if(u=String(u),!(u.length>100)){var d=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(u);if(d){var f=parseFloat(d[1]),p=(d[2]||"ms").toLowerCase();switch(p){case"years":case"year":case"yrs":case"yr":case"y":return f*a;case"weeks":case"week":case"w":return f*o;case"days":case"day":case"d":return f*r;case"hours":case"hour":case"hrs":case"hr":case"h":return f*n;case"minutes":case"minute":case"mins":case"min":case"m":return f*t;case"seconds":case"second":case"secs":case"sec":case"s":return f*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return f;default:return}}}}function s(u){var d=Math.abs(u);return d>=r?Math.round(u/r)+"d":d>=n?Math.round(u/n)+"h":d>=t?Math.round(u/t)+"m":d>=e?Math.round(u/e)+"s":u+"ms"}function c(u){var d=Math.abs(u);return d>=r?l(u,d,r,"day"):d>=n?l(u,d,n,"hour"):d>=t?l(u,d,t,"minute"):d>=e?l(u,d,e,"second"):u+" ms"}function l(u,d,f,p){var y=d>=f*1.5;return Math.round(u/f)+" "+p+(y?"s":"")}return tx}var nx,bI;function lne(){if(bI)return nx;bI=1;function e(t){r.debug=r,r.default=r,r.coerce=l,r.disable=i,r.enable=a,r.enabled=s,r.humanize=cne(),r.destroy=u,Object.keys(t).forEach(d=>{r[d]=t[d]}),r.names=[],r.skips=[],r.formatters={};function n(d){let f=0;for(let p=0;p<d.length;p++)f=(f<<5)-f+d.charCodeAt(p),f|=0;return r.colors[Math.abs(f)%r.colors.length]}r.selectColor=n;function r(d){let f,p=null,y,m;function v(...b){if(!v.enabled)return;const x=v,j=Number(new Date),w=j-(f||j);x.diff=w,x.prev=f,x.curr=j,f=j,b[0]=r.coerce(b[0]),typeof b[0]!="string"&&b.unshift("%O");let _=0;b[0]=b[0].replace(/%([a-zA-Z%])/g,(E,S)=>{if(E==="%%")return"%";_++;const C=r.formatters[S];if(typeof C=="function"){const M=b[_];E=C.call(x,M),b.splice(_,1),_--}return E}),r.formatArgs.call(x,b),(x.log||r.log).apply(x,b)}return v.namespace=d,v.useColors=r.useColors(),v.color=r.selectColor(d),v.extend=o,v.destroy=r.destroy,Object.defineProperty(v,"enabled",{enumerable:!0,configurable:!1,get:()=>p!==null?p:(y!==r.namespaces&&(y=r.namespaces,m=r.enabled(d)),m),set:b=>{p=b}}),typeof r.init=="function"&&r.init(v),v}function o(d,f){const p=r(this.namespace+(typeof f>"u"?":":f)+d);return p.log=this.log,p}function a(d){r.save(d),r.namespaces=d,r.names=[],r.skips=[];let f;const p=(typeof d=="string"?d:"").split(/[\s,]+/),y=p.length;for(f=0;f<y;f++)p[f]&&(d=p[f].replace(/\*/g,".*?"),d[0]==="-"?r.skips.push(new RegExp("^"+d.slice(1)+"$")):r.names.push(new RegExp("^"+d+"$")))}function i(){const d=[...r.names.map(c),...r.skips.map(c).map(f=>"-"+f)].join(",");return r.enable(""),d}function s(d){if(d[d.length-1]==="*")return!0;let f,p;for(f=0,p=r.skips.length;f<p;f++)if(r.skips[f].test(d))return!1;for(f=0,p=r.names.length;f<p;f++)if(r.names[f].test(d))return!0;return!1}function c(d){return d.toString().substring(2,d.toString().length-2).replace(/\.\*\?$/,"*")}function l(d){return d instanceof Error?d.stack||d.message:d}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}return nx=e,nx}var xI;function une(){return xI||(xI=1,function(e,t){var n={};t.formatArgs=o,t.save=a,t.load=i,t.useColors=r,t.storage=s(),t.destroy=(()=>{let l=!1;return()=>{l||(l=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function r(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let l;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(l=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(l[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function o(l){if(l[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+l[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const u="color: "+this.color;l.splice(1,0,u,"color: inherit");let d=0,f=0;l[0].replace(/%[a-zA-Z%]/g,p=>{p!=="%%"&&(d++,p==="%c"&&(f=d))}),l.splice(f,0,u)}t.log=console.debug||console.log||(()=>{});function a(l){try{l?t.storage.setItem("debug",l):t.storage.removeItem("debug")}catch{}}function i(){let l;try{l=t.storage.getItem("debug")}catch{}return!l&&typeof s$<"u"&&"env"in s$&&(l=n.DEBUG),l}function s(){try{return localStorage}catch{}}e.exports=lne()(t);const{formatters:c}=e.exports;c.j=function(l){try{return JSON.stringify(l)}catch(u){return"[UnexpectedJSONParseError]: "+u.message}}}(ex,ex.exports)),ex.exports}une(),sne();const wI=(e,t)=>({id:e.id,type:e.node_type,position:{x:e.x||0,y:e.y||0},width:e.width||void 0,height:e.height||void 0,data:{loading:!1,flowNode:e,...t}}),dne=e=>({id:e.id,target:e.target,source:e.target,targetHandle:e.targetHandle,sourceHandle:e.sourceHandle}),_I=e=>({id:e.id,source:e.source,target:e.target,targetHandle:e.targetHandle,sourceHandle:e.sourceHandle}),fne=e=>e.filter(t=>"edgeId"in t?`${t.edgeId}`.startsWith("xy-edge__"):!1),rx=(e,t,n)=>{const r=[];return{changes:e.map(o=>{var c;const a=t.find(l=>o.id===l.id);a||r.push(o.id);const i=(c=n==null?void 0:n[o.source_type])==null?void 0:c.find(l=>(l==null?void 0:l.id)===o.source_id),s=wI(o,{...a==null?void 0:a.data,entity:i});return{type:a?"replace":"add",id:o.id,item:a?Tf({...a||{},data:void 0},Uc(s,Hc)):s}}),newIds:[]}},ox=(e,t)=>{const n=[],r=[],o=e.map(a=>{const i=t.find(s=>a.source===s.source&&a.target===s.target);return!i||i.id!==a.id?(i&&r.push(i.id),{type:"add",item:_I(a)}):(n.push(a.id),{type:"replace",item:_I(a)})});return t.forEach(a=>{n.includes(a.id)||r.push(a.id)}),{changes:o,updatedIds:n,deletedIds:r}},ax={width:440,height:360},Df={width:380,height:650},hl={[ae.Toolbox]:"toolbox",[ae.SessionInfo]:"session-info",[ae.DefaultEmbeddingModel]:"default-embedding-model",[ae.ApplicationBar]:"application-bar"},pne={id:hl[ae.Toolbox],type:ae.Toolbox,position:{x:10+Df.width+20,y:10},measured:ax,data:{}},hne={id:hl[ae.SessionInfo],type:ae.SessionInfo,position:{x:10,y:10},measured:Df,data:{}},mne={id:hl[ae.DefaultEmbeddingModel],type:ae.DefaultEmbeddingModel,position:{x:10+Df.width+ax.width+40,y:10},data:{model:Xxe}},yne={id:hl[ae.ApplicationBar],type:ae.ApplicationBar,position:{x:10+Df.width+ax.width+40,y:80},data:{}},gne=[pne,hne,mne,yne],vne=[ae.Toolbox,ae.SessionInfo,ae.ApplicationBar,ae.EditorApp,ae.CodeContainerApp],jI={flowNodes:[],flowEdges:[],ready:!0,flowEdgeLoading:!1,flowNodeLoading:!1,syncedNodes:[],syncedEdges:[],syncNodeQueue:[],syncEdgeQueue:[],edges:[],nodes:gne},ix=async e=>{const t=await ue("FlowNode").find(e),n=t.reduce((o,a)=>{var i;return o[a.source_type]||(o[a.source_type]=[]),(i=o[a.source_type])==null||i.push(a),o},{}),r={};return await Promise.all(Object.entries(n).map(async([o,a])=>{const i=o;r[i]=await ue(i).find({where:{id:go(a.map(s=>s.source_id))}})})),{flowNodes:t,entityGroups:n,flowNodeDatas:r}},bne=(e,t)=>({reset:()=>{e(jI)},setNodes:n=>{if(typeof n=="function"){e({nodes:n(t().nodes)});return}e({nodes:n})},setEdges:n=>{if(typeof n=="function"){e({edges:n(t().edges)});return}e({edges:n})},updateNodes:n=>{const r=t().nodes;e({nodes:Ca(n,r)})},updateEdges:n=>{const r=t().edges;e({edges:ul(n,r)})},addConnectionToEdges:n=>{const r=t().edges;e({edges:yT(n,r)})},flowNodesToNodes:(n,r={})=>{const o=t().nodes,{changes:a}=rx(n,o,r);e({nodes:Ca(a,o)})},flowEdgesToEdges:n=>{const r=t().edges,{changes:o,updatedIds:a,deletedIds:i}=ox(n,r);r.forEach(s=>{a.includes(s.id)||i.push(s.id)}),i.forEach(s=>{o.push({type:"remove",id:s})}),e({edges:ul(o,r)})},getNodes:n=>t().nodes.filter(r=>n.includes(r.id)),removeSyncNodeQueue:n=>{const{syncNodeQueue:r}=t();for(const o of n){const a=r.findIndex(i=>i.timestamp===o);a>-1&&r.splice(a,1)}e({syncNodeQueue:r})},removeSyncEdgeQueue:n=>{const{syncEdgeQueue:r}=t();for(const o of n){const a=r.findIndex(i=>i.timestamp===o);a>-1&&r.splice(a,1)}e({syncEdgeQueue:r})},pushSyncNodeQueue:(n,r)=>{const{syncNodeQueue:o}=t();e({syncNodeQueue:[...o,{query:r,timestamp:Date.now(),syncType:n}]})},pushSyncEdgeQueue:()=>{const{syncEdgeQueue:n}=t();e({syncEdgeQueue:[...n,{timestamp:Date.now()}]})},findFlowNodesWithSource:async(n,r)=>{try{e({flowNodeLoading:!0});const{flowNodes:o,flowNodeDatas:a}=await ix(n);if(r!=null&&r.clean)e({flowNodes:o,nodes:o.map(i=>{var c;const s=(c=a==null?void 0:a[i.source_type])==null?void 0:c.find(l=>l.id===i.source_id);return wI(i,{data:s})})});else{const i=t().flowNodes,s=o.map(u=>u.id),c=t().nodes,{changes:l}=rx(o,c,a);e({flowNodes:[...i.filter(u=>!s.includes(u.id)),...o],nodes:Ca(l,c)})}return o}finally{e({flowNodeLoading:!1})}},findFlowEdges:async(n,r)=>{try{e({flowEdgeLoading:!0});const o=await ue("FlowEdge").find(n),a=t().flowEdges,i=o.map(s=>s.id);if(r!=null&&r.clean)e({flowEdges:o,edges:o.map(s=>dne(s))});else{const s=t().edges,{changes:c}=ox(o,s);e({flowEdges:[...a.filter(l=>!i.includes(l.id)),...o],edges:ul(c,s)})}return o}finally{e({flowEdgeLoading:!1})}},deleteFlowNode:async n=>{try{if(!n.id&&!n.source_type&&!n.source_id)throw new Error("Missing flow node indentify");const r=await ue("FlowNode").findOne({where:n.id?{id:n.id}:{source_type:n.source_type,source_id:n.source_id}});if(r){await ue("FlowNode").delete(r.id);const o=t().flowNodes;r.source_type&&r.source_id&&await ue(r.source_type).delete(r.source_id).catch(i=>{Wr("Failed to delete source entity",r.source_type,r.source_id,i)});const a=t().nodes;e({flowNodes:o.filter(i=>i.id!==r.id),nodes:Ca([{type:"remove",id:r.id}],a)})}}catch(r){Wr("Failed to delete flow node",r)}},deleteFlowEdge:async n=>{try{if(!n.id&&!n.source&&!n.target)throw new Error("Missing flow edge indentify");const r=await ue("FlowEdge").findOne({where:n.id?{id:n.id}:{source:n.source,target:n.target}});if(r){await ue("FlowEdge").delete(r.id);const o=t().flowEdges;e({flowEdges:o.filter(a=>a.id!==r.id)})}}catch(r){Wr("Failed to delete flow edge",r)}},updateFlowNode:async(n,r)=>{var o;try{if(!((o=pt.getState().currentSession)!=null&&o.id))throw new Error("Session not found");if(!n.id)throw new Error("Missing flow node indentify");await ue("FlowNode").update(n.id,n);const a=t().flowNodes.map(i=>i.id===n.id?{...i,...n}:i);e({flowNodes:r!=null&&r.silent?a:[...a]})}catch(a){Wr("Failed to create or update flow node",a,n)}},createOrUpdateFlowNode:async(n,r)=>{var o;try{const a=pt.getState().currentSession;if(!(a!=null&&a.id))throw new Error("Session not found");if(!n.id&&(!n.source_type||!n.source_id))throw new Error("Missing flow node indentify");let i,s=n!=null&&n.id?t().flowNodes.find(p=>p.id===n.id):void 0;if(!s&&(n.id||n.source_type&&n.source_id)&&(s=await ue("FlowNode").findOne({where:n.id?{id:n.id}:{source_type:n.source_type,source_id:n.source_id}})),s)i=Tf(s,Uc(n,Hc)),r!=null&&r.lazy?ue("FlowNode").update(s.id,i):await ue("FlowNode").update(s.id,i);else if(n.source_id&&n.source_type)i={...n,source_id:`${n.source_id}`,source_type:`${n.source_type}`,node_type:n.node_type||"NEW_MESSAGE",session_id:n.session_id||(a==null?void 0:a.id)},r!=null&&r.lazy?(i.id=Pu(),ue("FlowNode").save(i)):i=await ue("FlowNode").save(i);else throw new Error("Missing source id and type");let c;const l=t().nodes.find(p=>p.id===i.id);i.source_type&&!l?c=await ue(i.source_type).findOne({where:{id:n.source_id}}):i.source_type&&l&&(c=(o=l==null?void 0:l.data)==null?void 0:o.entity);const u=t().flowNodes,d=t().nodes,{changes:f}=rx([i],d,{[i.source_type]:[c]});return e({flowNodes:[...u.filter(p=>p.id!==i.id),i],nodes:Ca(f,d)}),i}catch(a){Wr("Failed to create or update flow node",a,n)}},createOrUpdateFlowEdge:async(n,r)=>{try{const o=pt.getState().currentSession;if(!(o!=null&&o.id))throw new Error("Session not found");if(!n.id&&(!n.source||!n.target))throw new Error("Missing flow node indentify");let a,i=n!=null&&n.id?t().flowEdges.find(l=>l.id===n.id):void 0;if(i&&(n.id||n.source&&n.target)&&(i=await ue("FlowEdge").findOne({where:n.id?{id:n.id}:{source:n.source,target:n.target}})),i)a=Tf(i,Uc(n,Hc)),r!=null&&r.lazy?ue("FlowEdge").update(i.id,a):await ue("FlowEdge").update(i.id,a);else if(n.source&&n.target)a={...n,source:`${n.source}`,target:`${n.target}`,session_id:n.session_id||(o==null?void 0:o.id)},r!=null&&r.lazy?(a.id=Pu(),ue("FlowEdge").save(a)):a=await ue("FlowEdge").save(a);else throw new Error("Missing source and target");const s=t().flowEdges,c=t().edges;return e({flowEdges:[...s.filter(l=>l.id!==a.id),a],edges:ul(ox([a],c).changes,c)}),a}catch(o){Wr("Failed to create or update flow node",o)}}}),xne=()=>{var v;const[e,t]=g.useState(),[n,r]=g.useState(),[o,a]=g.useState(),[i,s]=g.useState(),c=g.useRef(),l=g.useRef({}),u=pt(b=>b.currentSession),d=Zn(b=>b.loadModel),f=g.useCallback(async()=>{var b,x;try{if(l.current.handling=u==null?void 0:u.id,!(u!=null&&u.id)||!(u!=null&&u.main_source_id)||(u==null?void 0:u.main_source_type)!=="Thread")return;const[j,w]=await Promise.all([ue("Thread").findOne({where:{id:u.main_source_id,session_id:u.id}}),ue("FlowNode").findOne({where:{source_id:u.main_source_id,source_type:"Thread",session_id:u.id}})]);if(!j||!w)return;const _=await ue("FlowEdge").find({where:{session_id:u.id,target:w.id}}),{flowNodes:E,flowNodeDatas:S}=await ix({where:{session_id:u.id,id:go(_.map(A=>A.source))}}),C=(await ue("FlowEdge").find({where:{session_id:u.id}})).filter(A=>A.target===w.id).map(A=>{var k;const O=E.find(T=>T.id===A.source);return{connection:A,source:O,entity:(k=S==null?void 0:S[O.source_type])==null?void 0:k.find(T=>T.id===O.source_id)}}),M=C.find(A=>A.source.source_type==="LLM"),P=C.filter(A=>A.source.source_type==="Prompt"),N=C.find(A=>A.source.source_type==="Schema");if(!(M!=null&&M.entity))return;const R=await ue("FlowEdge").findOne({where:{session_id:u.id,source:w.id},order:{id:"DESC"}});if(R){const A=await ue("FlowNode").findOne({where:{id:R.target,session_id:u.id}});if(!A)return;const O=await ue("JSONData").findOne({where:{id:A.source_id,session_id:u.id}});if(!O)return;(b=c.current)==null||b.call(c,O.data),s({node:A,enity:O})}else{const A=await ue("JSONData").save({headers:"item",session_id:u.id,json:"",data:[]});if(!A)return;const O=await ue("FlowNode").save({session_id:u.id,source_id:A.id,source_type:"JSONData",node_type:"JSON_DATA",x:0,y:0});if(!O)return;await ue("FlowEdge").save({session_id:u.id,source:w.id,target:O.id}),(x=c.current)==null||x.call(c,[]),s({node:O,enity:A})}a({llm:M.entity,status:Mt.Started,progress:""}),r({thread:j,threadNode:w}),t({prompts:(P==null?void 0:P.map(A=>A.entity))||[],schema:N==null?void 0:N.entity}),l.current.handled=u.id}finally{l.current.handling=void 0}},[u==null?void 0:u.id,u==null?void 0:u.main_source_id,u==null?void 0:u.main_source_type]),p=g.useCallback(async()=>{if(o!=null&&o.llm.name)try{a(b=>b&&{...b,status:Mt.Loading}),await d(o==null?void 0:o.llm.name,b=>{a(x=>x&&{...x,progress:b.text})}),a(b=>b&&{...b,status:Mt.Loaded,progress:""})}catch{a(b=>b&&{...b,status:Mt.Started,progress:""})}},[(v=o==null?void 0:o.llm)==null?void 0:v.name,d]),y=g.useCallback(b=>(c.current=b,()=>{c.current=void 0}),[]),m=g.useCallback(async b=>{!(i!=null&&i.node)||!(i!=null&&i.enity)||await ue("JSONData").save({...i.enity,data:b})},[i==null?void 0:i.enity,i==null?void 0:i.node]);return g.useEffect(()=>{l.current.handling||(l==null?void 0:l.current.handled)===(u==null?void 0:u.id)||f()},[u==null?void 0:u.id,f]),{...e,loadLLM:p,threadInfo:n,mainLLMInfo:o,currentDataNode:i,updateMessagesData:m,onThreadMessagesLoaded:y}};class wne extends Gxe{get lc_attributes(){return{partialVariables:void 0}}constructor(t){super(t),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompts",this._getPromptType()]}),Object.defineProperty(this,"inputVariables",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputParser",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"partialVariables",{enumerable:!0,configurable:!0,writable:!0,value:void 0});const{inputVariables:n}=t;if(n.includes("stop"))throw new Error("Cannot have an input variable named 'stop', as it is used internally, please rename.");Object.assign(this,t)}async mergePartialAndUserVariables(t){const n=this.partialVariables??{},r={};for(const[o,a]of Object.entries(n))typeof a=="string"?r[o]=a:r[o]=await a();return{...r,...t}}async invoke(t,n){return this._callWithConfig(r=>this.formatPromptValue(r),t,{...n,runType:"prompt"})}serialize(){throw new Error("Use .toJSON() instead")}static async deserialize(t){switch(t._type){case"prompt":{const{PromptTemplate:n}=await Zt(async()=>{const{PromptTemplate:r}=await Promise.resolve().then(()=>TI);return{PromptTemplate:r}},[]);return n.deserialize(t)}case void 0:{const{PromptTemplate:n}=await Zt(async()=>{const{PromptTemplate:r}=await Promise.resolve().then(()=>TI);return{PromptTemplate:r}},void 0);return n.deserialize({...t,_type:"prompt"})}case"few_shot":{const{FewShotPromptTemplate:n}=await Zt(async()=>{const{FewShotPromptTemplate:r}=await import("./few_shot-CefJPzX-.js").then(async o=>(await o.__tla,o));return{FewShotPromptTemplate:r}},__vite__mapDeps([0,1,2,3,4,5,6]));return n.deserialize(t)}default:throw new Error(`Invalid prompt type in config: ${t._type}`)}}}class _ne extends Qxe{}class jne extends _ne{static lc_name(){return"StringPromptValue"}constructor(t){super({value:t}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompt_values"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.value=t}toString(){return this.value}toChatMessages(){return[new ku(this.value)]}}KE=class extends wne{async formatPromptValue(e){const t=await this.format(e);return new jne(t)}};var Ene=Object.prototype.toString,Yi=Array.isArray||function(e){return Ene.call(e)==="[object Array]"};function sx(e){return typeof e=="function"}function Sne(e){return Yi(e)?"array":typeof e}function cx(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function EI(e,t){return e!=null&&typeof e=="object"&&t in e}function Cne(e,t){return e!=null&&typeof e!="object"&&e.hasOwnProperty&&e.hasOwnProperty(t)}var One=RegExp.prototype.test;function Mne(e,t){return One.call(e,t)}var Nne=/\S/;function Pne(e){return!Mne(Nne,e)}var kne={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function Ane(e){return String(e).replace(/[&<>"'`=\/]/g,function(t){return kne[t]})}var Tne=/\s*/,Rne=/\s+/,SI=/\s*=/,Ine=/\s*\}/,Dne=/#|\^|\/|>|\{|&|=|!/;function Lne(e,t){if(!e)return[];var n=!1,r=[],o=[],a=[],i=!1,s=!1,c="",l=0;function u(){if(i&&!s)for(;a.length;)delete o[a.pop()];else a=[];i=!1,s=!1}var d,f,p;function y(C){if(typeof C=="string"&&(C=C.split(Rne,2)),!Yi(C)||C.length!==2)throw new Error("Invalid tags: "+C);d=new RegExp(cx(C[0])+"\\s*"),f=new RegExp("\\s*"+cx(C[1])),p=new RegExp("\\s*"+cx("}"+C[1]))}y(t||xn.tags);for(var m=new ml(e),v,b,x,j,w,_;!m.eos();){if(v=m.pos,x=m.scanUntil(d),x)for(var E=0,S=x.length;E<S;++E)j=x.charAt(E),Pne(j)?(a.push(o.length),c+=j):(s=!0,n=!0,c+=" "),o.push(["text",j,v,v+1]),v+=1,j===`
`&&(u(),c="",l=0,n=!1);if(!m.scan(d))break;if(i=!0,b=m.scan(Dne)||"name",m.scan(Tne),b==="="?(x=m.scanUntil(SI),m.scan(SI),m.scanUntil(f)):b==="{"?(x=m.scanUntil(p),m.scan(Ine),m.scanUntil(f),b="&"):x=m.scanUntil(f),!m.scan(f))throw new Error("Unclosed tag at "+m.pos);if(b==">"?w=[b,x,v,m.pos,c,l,n]:w=[b,x,v,m.pos],l++,o.push(w),b==="#"||b==="^")r.push(w);else if(b==="/"){if(_=r.pop(),!_)throw new Error('Unopened section "'+x+'" at '+v);if(_[1]!==x)throw new Error('Unclosed section "'+_[1]+'" at '+v)}else b==="name"||b==="{"||b==="&"?s=!0:b==="="&&y(x)}if(u(),_=r.pop(),_)throw new Error('Unclosed section "'+_[1]+'" at '+m.pos);return Bne(Fne(o))}function Fne(e){for(var t=[],n,r,o=0,a=e.length;o<a;++o)n=e[o],n&&(n[0]==="text"&&r&&r[0]==="text"?(r[1]+=n[1],r[3]=n[3]):(t.push(n),r=n));return t}function Bne(e){for(var t=[],n=t,r=[],o,a,i=0,s=e.length;i<s;++i)switch(o=e[i],o[0]){case"#":case"^":n.push(o),r.push(o),n=o[4]=[];break;case"/":a=r.pop(),a[5]=o[2],n=r.length>0?r[r.length-1][4]:t;break;default:n.push(o)}return t}function ml(e){this.string=e,this.tail=e,this.pos=0}ml.prototype.eos=function(){return this.tail===""},ml.prototype.scan=function(e){var t=this.tail.match(e);if(!t||t.index!==0)return"";var n=t[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n},ml.prototype.scanUntil=function(e){var t=this.tail.search(e),n;switch(t){case-1:n=this.tail,this.tail="";break;case 0:n="";break;default:n=this.tail.substring(0,t),this.tail=this.tail.substring(t)}return this.pos+=n.length,n};function Ki(e,t){this.view=e,this.cache={".":this.view},this.parent=t}Ki.prototype.push=function(e){return new Ki(e,this)},Ki.prototype.lookup=function(e){var t=this.cache,n;if(t.hasOwnProperty(e))n=t[e];else{for(var r=this,o,a,i,s=!1;r;){if(e.indexOf(".")>0)for(o=r.view,a=e.split("."),i=0;o!=null&&i<a.length;)i===a.length-1&&(s=EI(o,a[i])||Cne(o,a[i])),o=o[a[i++]];else o=r.view[e],s=EI(r.view,e);if(s){n=o;break}r=r.parent}t[e]=n}return sx(n)&&(n=n.call(this.view)),n};function un(){this.templateCache={_cache:{},set:function(e,t){this._cache[e]=t},get:function(e){return this._cache[e]},clear:function(){this._cache={}}}}un.prototype.clearCache=function(){typeof this.templateCache<"u"&&this.templateCache.clear()},un.prototype.parse=function(e,t){var n=this.templateCache,r=e+":"+(t||xn.tags).join(":"),o=typeof n<"u",a=o?n.get(r):void 0;return a==null&&(a=Lne(e,t),o&&n.set(r,a)),a},un.prototype.render=function(e,t,n,r){var o=this.getConfigTags(r),a=this.parse(e,o),i=t instanceof Ki?t:new Ki(t,void 0);return this.renderTokens(a,i,n,e,r)},un.prototype.renderTokens=function(e,t,n,r,o){for(var a="",i,s,c,l=0,u=e.length;l<u;++l)c=void 0,i=e[l],s=i[0],s==="#"?c=this.renderSection(i,t,n,r,o):s==="^"?c=this.renderInverted(i,t,n,r,o):s===">"?c=this.renderPartial(i,t,n,o):s==="&"?c=this.unescapedValue(i,t):s==="name"?c=this.escapedValue(i,t,o):s==="text"&&(c=this.rawValue(i)),c!==void 0&&(a+=c);return a},un.prototype.renderSection=function(e,t,n,r,o){var a=this,i="",s=t.lookup(e[1]);function c(d){return a.render(d,t,n,o)}if(s){if(Yi(s))for(var l=0,u=s.length;l<u;++l)i+=this.renderTokens(e[4],t.push(s[l]),n,r,o);else if(typeof s=="object"||typeof s=="string"||typeof s=="number")i+=this.renderTokens(e[4],t.push(s),n,r,o);else if(sx(s)){if(typeof r!="string")throw new Error("Cannot use higher-order sections without the original template");s=s.call(t.view,r.slice(e[3],e[5]),c),s!=null&&(i+=s)}else i+=this.renderTokens(e[4],t,n,r,o);return i}},un.prototype.renderInverted=function(e,t,n,r,o){var a=t.lookup(e[1]);if(!a||Yi(a)&&a.length===0)return this.renderTokens(e[4],t,n,r,o)},un.prototype.indentPartial=function(e,t,n){for(var r=t.replace(/[^ \t]/g,""),o=e.split(`
`),a=0;a<o.length;a++)o[a].length&&(a>0||!n)&&(o[a]=r+o[a]);return o.join(`
`)},un.prototype.renderPartial=function(e,t,n,r){if(n){var o=this.getConfigTags(r),a=sx(n)?n(e[1]):n[e[1]];if(a!=null){var i=e[6],s=e[5],c=e[4],l=a;s==0&&c&&(l=this.indentPartial(a,c,i));var u=this.parse(l,o);return this.renderTokens(u,t,n,l,r)}}},un.prototype.unescapedValue=function(e,t){var n=t.lookup(e[1]);if(n!=null)return n},un.prototype.escapedValue=function(e,t,n){var r=this.getConfigEscape(n)||xn.escape,o=t.lookup(e[1]);if(o!=null)return typeof o=="number"&&r===xn.escape?String(o):r(o)},un.prototype.rawValue=function(e){return e[1]},un.prototype.getConfigTags=function(e){return Yi(e)?e:e&&typeof e=="object"?e.tags:void 0},un.prototype.getConfigEscape=function(e){if(e&&typeof e=="object"&&!Yi(e))return e.escape};var xn={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(e){yl.templateCache=e},get templateCache(){return yl.templateCache}},yl=new un;xn.clearCache=function(){return yl.clearCache()},xn.parse=function(e,t){return yl.parse(e,t)},xn.render=function(e,t,n,r){if(typeof e!="string")throw new TypeError('Invalid template! Template should be a "string" but "'+Sne(e)+'" was given as the first argument for mustache#render(template, view, partials)');return yl.render(e,t,n,r)},xn.escape=Ane,xn.Scanner=ml,xn.Context=Ki,xn.Writer=un;function CI(){xn.escape=e=>e}let lx,OI,MI,NI,PI,Lf,kI,AI;lx=e=>{const t=e.split(""),n=[],r=(a,i)=>{for(let s=i;s<t.length;s+=1)if(a.includes(t[s]))return s;return-1};let o=0;for(;o<t.length;)if(t[o]==="{"&&o+1<t.length&&t[o+1]==="{")n.push({type:"literal",text:"{"}),o+=2;else if(t[o]==="}"&&o+1<t.length&&t[o+1]==="}")n.push({type:"literal",text:"}"}),o+=2;else if(t[o]==="{"){const a=r("}",o);if(a<0)throw new Error("Unclosed '{' in template.");n.push({type:"variable",name:t.slice(o+1,a).join("")}),o=a+1}else{if(t[o]==="}")throw new Error("Single '}' in template.");{const a=r("{}",o),i=(a<0?t.slice(o):t.slice(o,a)).join("");n.push({type:"literal",text:i}),o=a<0?t.length:a}}return n},OI=e=>e.map(t=>t[0]==="name"?{type:"variable",name:t[1].includes(".")?t[1].split(".")[0]:t[1]}:["#","&","^",">"].includes(t[0])?{type:"variable",name:t[1]}:{type:"literal",text:t[1]}),MI=e=>{CI();const t=xn.parse(e);return OI(t)},NI=(e,t)=>lx(e).reduce((n,r)=>{if(r.type==="variable"){if(r.name in t)return n+t[r.name];throw new Error(`(f-string) Missing value for input ${r.name}`)}return n+r.text},""),PI=(e,t)=>(CI(),xn.render(e,t)),Lf={"f-string":NI,mustache:PI},kI={"f-string":lx,mustache:MI},ri=(e,t,n)=>Lf[t](e,n),AI=(e,t)=>kI[t](e),XE=(e,t,n)=>{if(!(t in Lf)){const r=Object.keys(Lf);throw new Error(`Invalid template format. Got \`${t}\`;
                         should be one of ${r}`)}try{const r=n.reduce((o,a)=>(o[a]="foo",o),{});Array.isArray(e)?e.forEach(o=>{if(o.type==="text")ri(o.text,t,r);else if(o.type==="image_url")if(typeof o.image_url=="string")ri(o.image_url,t,r);else{const a=o.image_url.url;ri(a,t,r)}else throw new Error(`Invalid message template received. ${JSON.stringify(o,null,2)}`)}):ri(e,t,r)}catch(r){throw new Error(`Invalid prompt schema: ${r.message}`)}},pa=class extends KE{static lc_name(){return"PromptTemplate"}constructor(e){if(super(e),Object.defineProperty(this,"template",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"templateFormat",{enumerable:!0,configurable:!0,writable:!0,value:"f-string"}),Object.defineProperty(this,"validateTemplate",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"additionalContentFields",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e.templateFormat==="mustache"&&e.validateTemplate===void 0&&(this.validateTemplate=!1),Object.assign(this,e),this.validateTemplate){if(this.templateFormat==="mustache")throw new Error("Mustache templates cannot be validated.");let t=this.inputVariables;this.partialVariables&&(t=t.concat(Object.keys(this.partialVariables))),XE(this.template,this.templateFormat,t)}}_getPromptType(){return"prompt"}async format(e){const t=await this.mergePartialAndUserVariables(e);return ri(this.template,this.templateFormat,t)}static fromExamples(e,t,n,r=`

`,o=""){const a=[o,...e,t].join(r);return new pa({inputVariables:n,template:a})}static fromTemplate(e,t){const{templateFormat:n="f-string",...r}=t??{},o=new Set;return AI(e,n).forEach(a=>{a.type==="variable"&&o.add(a.name)}),new pa({inputVariables:[...o],templateFormat:n,template:e,...r})}async partial(e){const t=this.inputVariables.filter(o=>!(o in e)),n={...this.partialVariables??{},...e},r={...this,inputVariables:t,partialVariables:n};return new pa(r)}serialize(){if(this.outputParser!==void 0)throw new Error("Cannot serialize a prompt template with an output parser");return{_type:this._getPromptType(),input_variables:this.inputVariables,template:this.template,template_format:this.templateFormat}}static async deserialize(e){if(!e.template)throw new Error("Prompt template must have a template");return new pa({inputVariables:e.input_variables,template:e.template,templateFormat:e.template_format})}};const TI=Object.freeze(Object.defineProperty({__proto__:null,PromptTemplate:pa},Symbol.toStringTag,{value:"Module"})),$ne=()=>{const[e]=g.useState(!1),t=Au(a=>a.similaritySearchWithScore),{stream:n}=Dm(),r=g.useCallback(async(a,i)=>{const{placeholders:s}=i||{};if(!(s!=null&&s.length))return[];const c=[];return await Promise.all(s.map(async l=>{var d,f,p,y,m,v;const u=(d=l.node.data)==null?void 0:d.entity;if(u)switch(u.placeholder_type){case ii.VECTOR_DATABASE_RETREIVER:{const b=(f=l.connectedNodes)==null?void 0:f.find(j=>j.type===ae.VectorDatabase),x=(p=b==null?void 0:b.data)==null?void 0:p.entity;return(v=(m=(y=l.connectedNodes)==null?void 0:y.find(j=>j.type===ae.Prompt))==null?void 0:m.data)!=null&&v.entity,void 0}}})),c},[t]),o=g.useCallback(async(a,i,s,c,{onMessageUpdate:l})=>{const{tools:u,schemas:d,placeholders:f}=s||{},p=[];f!=null&&f.length&&p.push(...await r(a,s));const y=i.map(v=>v.role==="system"?new c$(v.content):v.role==="user"?new ku(v.content):new Rh(v.content)),{content:m}=await n(y,{tools:u,schemas:d,onMessageUpdate:({content:v})=>{l==null||l({nodeData:{loading:!0,content:v}})}});return l==null||l({nodeData:{content:m}}),m},[r,n]);return{loading:e,sendMessage:o}},zne=Ur("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Tr=g.forwardRef(({className:e,variant:t,...n},r)=>h.jsx("div",{ref:r,role:"alert",className:J(zne({variant:t}),e),...n}));Tr.displayName="Alert";const Rr=g.forwardRef(({className:e,...t},n)=>h.jsx("h5",{ref:n,className:J("mb-1 font-medium leading-none tracking-tight",e),...t}));Rr.displayName="AlertTitle";const Xi=g.forwardRef(({className:e,...t},n)=>h.jsx("div",{ref:n,className:J("text-sm [&_p]:leading-relaxed",e),...t}));Xi.displayName="AlertDescription";const Vne=e=>g.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",fill:"none",height:192,viewBox:"0 0 150 150",width:192,...e},g.createElement("clipPath",{id:"a"},g.createElement("path",{d:"m0 0h150v150h-150z"})),g.createElement("g",{clipPath:"url(#a)"},g.createElement("path",{d:"m150 0h-150v150h150z",fill:"#29b5e8"}),g.createElement("path",{clipRule:"evenodd",d:"m130.375 67.2532-14.096 8.1221 14.096 8.0536c.843.4872 1.581 1.1357 2.174 1.9084.592.7727 1.026 1.6545 1.278 2.5951.251.9406.315 1.9215.188 2.8867-.128.9652-.444 1.8959-.931 2.7388-.488.843-1.136 1.5817-1.909 2.174s-1.654 1.0267-2.595 1.2782-1.921.3154-2.887.1878c-.965-.1275-1.896-.444-2.739-.9312l-25.2559-14.5496c-1.1575-.6696-2.1128-1.6394-2.765-2.8068-.6523-1.1674-.9773-2.4893-.9408-3.826.0198-.5792.1089-1.1538.2653-1.7117.517-1.8711 1.7458-3.4654 3.4234-4.4419l25.256-14.4983c.847-.4892 1.782-.8067 2.751-.9343.97-.1275 1.955-.0627 2.899.1909.945.2536 1.83.6909 2.605 1.287.775.596 1.425 1.3391 1.913 2.1866.49.8402.808 1.7693.935 2.7334.128.964.063 1.9439-.191 2.8826-.254.9388-.692 1.8177-1.288 2.5859-.597.7681-1.34 1.4101-2.186 1.8887zm-13.343 39.3698-25.2478-14.5243c-1.1296-.6483-2.4091-.9896-3.7115-.9902s-2.5823.3397-3.7124.987c-1.1301.6472-2.0712 1.579-2.7297 2.7026-.6585 1.1237-1.0115 2.4001-1.0239 3.7024v29.0135c.0654 1.928.8772 3.755 2.264 5.095 1.3869 1.341 3.2403 2.09 5.1691 2.09 1.9289 0 3.7823-.749 5.1691-2.09 1.3868-1.34 2.1986-3.167 2.264-5.095v-16.261l14.1301 8.122c.843.488 1.774.805 2.739.933.966.128 1.947.064 2.888-.187s1.823-.685 2.596-1.277c.774-.592 1.423-1.331 1.91-2.174.488-.843.805-1.773.933-2.739.128-.965.065-1.946-.186-2.887s-.685-1.824-1.277-2.597-1.331-1.422-2.174-1.91zm-29.0992-28.3806-10.527 10.3986c-.3601.3349-.8269.5319-1.318.5563h-3.0897c-.49-.0294-.9551-.2257-1.318-.5563l-10.4671-10.4329c-.3274-.3573-.521-.817-.5478-1.3009v-3.081c.0283-.4861.2215-.9481.5478-1.3095l10.4671-10.4329c.3637-.3281.829-.5214 1.318-.5477h3.0897c.4899.0228.9562.2166 1.318.5477l10.4928 10.4329c.3237.3623.514.8243.5392 1.3095v3.081c-.0237.483-.2143.9428-.5392 1.3009zm-8.3874-2.8928c-.0404-.499-.2485-.9696-.5905-1.3352l-3.0383-3.004c-.3641-.3275-.8291-.5207-1.318-.5478h-.1113c-.4867.0255-.9495.2191-1.3094.5478l-3.0383 3.004c-.3262.3676-.5165.8358-.5392 1.3266v.1113c.0215.4834.2124.9439.5392 1.3009l3.0554 2.9955c.3607.3274.823.5208 1.3094.5477h.1113c.4889-.027.9539-.2203 1.318-.5477l3.0383-3.0212c.3282-.3576.5244-.8166.5563-1.3009zm-47.4914-31.2217 25.2563 14.4811c1.1308.648 2.4115.989 3.7149.9889 1.3033 0 2.584-.3409 3.7148-.989 1.1309-.648 2.0725-1.5806 2.7314-2.7051.659-1.1245 1.0123-2.4018 1.0249-3.7051v-28.9879c-.0654-1.9277-.8772-3.7546-2.264-5.0952s-3.2402-2.0899-5.1691-2.0899c-1.9288 0-3.7822.7493-5.169 2.0899-1.3869 1.3406-2.1987 3.1675-2.2641 5.0952v16.2613l-14.1473-8.1307c-.8429-.4877-1.7737-.8047-2.7392-.9328-.9654-.1281-1.9466-.0647-2.8876.1864s-1.8232.6852-2.5965 1.2773c-.7732.5921-1.4222 1.3307-1.91 2.1736-.4878.843-.8048 1.7738-.9329 2.7392-.128.9655-.0647 1.9467.1864 2.8876.2512.941.6852 1.8233 1.2773 2.5965.5921.7733 1.3307 1.4223 2.1737 1.9101zm55.4252 15.4739c1.4914.118 2.9836-.2193 4.2793-.9671l25.2475-14.5496c.843-.4877 1.582-1.1368 2.174-1.91s1.026-1.6555 1.277-2.5965.315-1.9222.187-2.8876c-.128-.9655-.445-1.8962-.933-2.7392-.488-.8429-1.137-1.5816-1.91-2.1737-.774-.5921-1.656-1.0261-2.597-1.2772-1.9-.5072-3.924-.2387-5.627.7464l-14.1298 8.1991v-16.2613c-.0654-1.9277-.8772-3.7546-2.264-5.0952-1.3868-1.3405-3.2402-2.0899-5.1691-2.0899-1.9288 0-3.7822.7494-5.169 2.0899-1.3869 1.3406-2.1987 3.1675-2.2641 5.0952v29.0136c-.0023 1.8784.7086 3.6876 1.9892 5.0619 1.2805 1.3743 3.0351 2.2111 4.909 2.3412zm-25.8554 31.5298c-1.4916-.1213-2.9847.2162-4.2793.9671l-25.2905 14.4893c-1.7024.985-2.9438 2.607-3.451 4.507s-.2387 3.924.7465 5.627c.9851 1.702 2.6061 2.943 4.5065 3.451 1.9004.507 3.9244.238 5.6268-.747l14.1473-8.122v16.261c.0654 1.928.8772 3.755 2.2641 5.096 1.3868 1.34 3.2402 2.09 5.169 2.09 1.9289 0 3.7823-.75 5.1691-2.09 1.3868-1.341 2.1986-3.168 2.264-5.096v-29.0645c-.0038-1.869-.7144-3.6673-1.9891-5.0341s-3.0192-2.2009-4.8834-2.3348zm-6.8468-13.5825c.4875-1.6032.414-3.3247-.2083-4.8806-.6224-1.5559-1.7564-2.8532-3.2152-3.6779l-25.2306-14.541c-1.704-.976-3.7248-1.2385-5.6216-.7303-1.8968.5083-3.5155 1.7461-4.5032 3.4433-.4889.84-.8065 1.7686-.9343 2.732-.1278.9635-.0632 1.9428.1899 2.8811.2531.9384.6897 1.8173 1.2846 2.5858.595.7686 1.3364 1.4115 2.1814 1.8917l14.096 8.1221-14.096 8.0536c-.8429.4861-1.5819 1.1334-2.1746 1.9051-.5928.7717-1.0277 1.6526-1.2801 2.5923-.2523.9398-.317 1.9201-.1905 2.8849s.4418 1.8952.9279 2.7382c.4861.8429 1.1335 1.5819 1.9051 2.1746.7717.5928 1.6526 1.0277 2.5924 1.2801.9397.2523 1.92.317 2.8848.1905s1.8952-.4418 2.7382-.9279l25.2306-14.5496c1.6248-.9071 2.8451-2.3965 3.4149-4.168z",fill:"#fff",fillRule:"evenodd"}))),Une=e=>g.createElement("svg",{className:"mr-2 w-5 h-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",width:48,height:48,...e},g.createElement("path",{fill:"#fbc02d",d:"M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12 s5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24s8.955,20,20,20 s20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"}),g.createElement("path",{fill:"#e53935",d:"M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039 l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"}),g.createElement("path",{fill:"#4caf50",d:"M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36 c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"}),g.createElement("path",{fill:"#1565c0",d:"M43.611,20.083L43.595,20L42,20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571 c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z"})),Hne=e=>g.createElement("svg",{className:"mr-2 w-5 h-5",width:1024,height:1024,viewBox:"0 0 1024 1024",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},g.createElement("path",{d:"M44.522 44.5217H489.739V489.739H44.522V44.5217Z",fill:"#F35325"}),g.createElement("path",{d:"M534.261 44.5217H979.478V489.739H534.261V44.5217Z",fill:"#81BC06"}),g.createElement("path",{d:"M44.522 534.261H489.739V979.478H44.522V534.261Z",fill:"#05A6F0"}),g.createElement("path",{d:"M534.261 534.261H979.478V979.478H534.261V534.261Z",fill:"#FFBA08"})),Wne=e=>g.createElement("svg",{id:"Layer_1","data-name":"Layer 1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 287.56 191",...e},g.createElement("defs",null,g.createElement("style",null,".cls-1{fill:#0081fb;}.cls-2{fill:url(#linear-gradient);}.cls-3{fill:url(#linear-gradient-2);}"),g.createElement("linearGradient",{id:"linear-gradient",x1:62.34,y1:101.45,x2:260.34,y2:91.45,gradientTransform:"matrix(1, 0, 0, -1, 0, 192)",gradientUnits:"userSpaceOnUse"},g.createElement("stop",{offset:0,stopColor:"#0064e1"}),g.createElement("stop",{offset:.4,stopColor:"#0064e1"}),g.createElement("stop",{offset:.83,stopColor:"#0073ee"}),g.createElement("stop",{offset:1,stopColor:"#0082fb"})),g.createElement("linearGradient",{id:"linear-gradient-2",x1:41.42,y1:53,x2:41.42,y2:126,gradientTransform:"matrix(1, 0, 0, -1, 0, 192)",gradientUnits:"userSpaceOnUse"},g.createElement("stop",{offset:0,stopColor:"#0082fb"}),g.createElement("stop",{offset:1,stopColor:"#0064e0"}))),g.createElement("title",null,"facebook-meta"),g.createElement("path",{className:"cls-1",d:"M31.06,126c0,11,2.41,19.41,5.56,24.51A19,19,0,0,0,53.19,160c8.1,0,15.51-2,29.79-21.76,11.44-15.83,24.92-38,34-52l15.36-23.6c10.67-16.39,23-34.61,37.18-47C181.07,5.6,193.54,0,206.09,0c21.07,0,41.14,12.21,56.5,35.11,16.81,25.08,25,56.67,25,89.27,0,19.38-3.82,33.62-10.32,44.87C271,180.13,258.72,191,238.13,191V160c17.63,0,22-16.2,22-34.74,0-26.42-6.16-55.74-19.73-76.69-9.63-14.86-22.11-23.94-35.84-23.94-14.85,0-26.8,11.2-40.23,31.17-7.14,10.61-14.47,23.54-22.7,38.13l-9.06,16c-18.2,32.27-22.81,39.62-31.91,51.75C84.74,183,71.12,191,53.19,191c-21.27,0-34.72-9.21-43-23.09C3.34,156.6,0,141.76,0,124.85Z"}),g.createElement("path",{className:"cls-2",d:"M24.49,37.3C38.73,15.35,59.28,0,82.85,0c13.65,0,27.22,4,41.39,15.61,15.5,12.65,32,33.48,52.63,67.81l7.39,12.32c17.84,29.72,28,45,33.93,52.22,7.64,9.26,13,12,19.94,12,17.63,0,22-16.2,22-34.74l27.4-.86c0,19.38-3.82,33.62-10.32,44.87C271,180.13,258.72,191,238.13,191c-12.8,0-24.14-2.78-36.68-14.61-9.64-9.08-20.91-25.21-29.58-39.71L146.08,93.6c-12.94-21.62-24.81-37.74-31.68-45C107,40.71,97.51,31.23,82.35,31.23c-12.27,0-22.69,8.61-31.41,21.78Z"}),g.createElement("path",{className:"cls-3",d:"M82.35,31.23c-12.27,0-22.69,8.61-31.41,21.78C38.61,71.62,31.06,99.34,31.06,126c0,11,2.41,19.41,5.56,24.51L10.14,167.91C3.34,156.6,0,141.76,0,124.85,0,94.1,8.44,62.05,24.49,37.3,38.73,15.35,59.28,0,82.85,0Z"})),qne=e=>g.createElement("svg",{className:"mr-2 w-5 h-5",width:256,height:233,viewBox:"0 0 256 233",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},g.createElement("path",{d:"M186.182 0h46.545v46.545h-46.545z"}),g.createElement("path",{fill:"#f7d046",d:"M209.455 0H256v46.545h-46.545z"}),g.createElement("path",{d:"M0 0h46.545v46.545H0zm0 46.545h46.545V93.09H0zm0 46.546h46.545v46.545H0zm0 46.545h46.545v46.545H0zm0 46.546h46.545v46.545H0z"}),g.createElement("path",{fill:"#f7d046",d:"M23.273 0h46.545v46.545H23.273z"}),g.createElement("path",{fill:"#f2a73b",d:"M209.455 46.545H256V93.09h-46.545zm-186.182 0h46.545V93.09H23.273z"}),g.createElement("path",{d:"M139.636 46.545h46.545V93.09h-46.545z"}),g.createElement("path",{fill:"#f2a73b",d:"M162.909 46.545h46.545V93.09h-46.545zm-93.091 0h46.545V93.09H69.818z"}),g.createElement("path",{fill:"#ee792f",d:"M116.364 93.091h46.545v46.545h-46.545zm46.545 0h46.545v46.545h-46.545zm-93.091 0h46.545v46.545H69.818z"}),g.createElement("path",{d:"M93.091 139.636h46.545v46.545H93.091z"}),g.createElement("path",{fill:"#eb5829",d:"M116.364 139.636h46.545v46.545h-46.545z"}),g.createElement("path",{fill:"#ee792f",d:"M209.455 93.091H256v46.545h-46.545zm-186.182 0h46.545v46.545H23.273z"}),g.createElement("path",{d:"M186.182 139.636h46.545v46.545h-46.545z"}),g.createElement("path",{fill:"#eb5829",d:"M209.455 139.636H256v46.545h-46.545z"}),g.createElement("path",{d:"M186.182 186.182h46.545v46.545h-46.545z"}),g.createElement("path",{fill:"#eb5829",d:"M23.273 139.636h46.545v46.545H23.273z"}),g.createElement("path",{fill:"#ea3326",d:"M209.455 186.182H256v46.545h-46.545zm-186.182 0h46.545v46.545H23.273z"})),Yne="/NoLLMChat/assets/qwen-B-gSh3_v.webp",Kne="/NoLLMChat/assets/smollm-CikBjd4F.png",Xne="/NoLLMChat/assets/stablelm-BquePdQ7.png",Gne="/NoLLMChat/assets/nomic-BjJqoFji.webp",Qne="/NoLLMChat/assets/joshua-ByaReJuI.webp",Na=g.memo(({name:e,className:t,...n})=>(e=e.toLowerCase(),e.includes("gemma")?h.jsx(Une,{className:J("w-5 h-5",t),...n}):e!=null&&e.includes("qwen")?h.jsx("img",{className:J("w-5 h-5",t),src:Yne,alt:"qwen",...n}):e!=null&&e.includes("phi")?h.jsx(Hne,{className:J("w-5 h-5",t),...n}):e!=null&&e.includes("llama")?h.jsx(Wne,{className:J("w-5 h-5",t),...n}):e!=null&&e.includes("smollm")?h.jsx("img",{className:J("w-5 h-5",t),src:Kne,alt:"smollm",...n}):e!=null&&e.includes("mistral")?h.jsx(qne,{className:J("w-5 h-5",t),...n}):e!=null&&e.includes("snowflake")?h.jsx(Vne,{className:J("w-5 h-5 rounded-full",t),...n}):e!=null&&e.includes("stablelm")?h.jsx("img",{className:J("w-5 h-5 rounded-full",t),src:Xne,alt:"stablelm",...n}):e!=null&&e.includes("nomic")?h.jsx("img",{className:J("w-5 h-5 rounded-full",t),src:Gne,alt:"nomic",...n}):e!=null&&e.includes("Xenova")||e!=null&&e.includes("janus")?h.jsx("img",{className:J("w-5 h-5 rounded-full",t),src:Qne,alt:"Xenova",...n}):h.jsx(de,{className:J("w-5 h-5",t),name:"brain"}))),ux=["Qwen2.5-1.5B-Instruct-q4f32_1-MLC","Qwen2.5-Coder-1.5B-Instruct-q4f16_1-MLC","stablelm-2-zephyr-1_6b-q4f16_1-MLC-1k","Phi-3.5-mini-instruct-q4f16_1-MLC-1k","Llama-3.2-3B-Instruct-q4f32_1-MLC"],gl=g.memo(e=>{var s;const{name:t,model:n,isCached:r,isFunctionCalling:o}=e,{t:a}=Ae("atoms"),i=g.useCallback(c=>c===1?"llm_info.model_types.embedding":c===2?"llm_info.model_types.vlm":"llm_info.model_types.llm",[]);if(n)return h.jsxs(h.Fragment,{children:[h.jsx(cn,{className:"",children:a(i(n.model_type))}),ux.some(c=>t&&c.includes(t))?h.jsx(cn,{className:"",variant:"outline",children:a("llm_info.recommended")}):null,r?h.jsx(cn,{className:"",variant:"outline",children:a("llm_info.cached")}):null,o?h.jsx(cn,{className:"",variant:"outline",children:a("llm_info.function_calling")}):null,n!=null&&n.low_resource_required?h.jsx(cn,{className:"",variant:"outline",children:a("llm_info.low_resource_required")}):null,(s=n==null?void 0:n.overrides)!=null&&s.context_window_size?h.jsxs(cn,{className:"",variant:"outline",children:[n.overrides.context_window_size.toLocaleString("en-US")," Tokens"]}):null,n!=null&&n.vram_required_MB?h.jsxs(cn,{className:"",variant:"outline",children:["VRAM: ",n.vram_required_MB.toLocaleString("en-US")," MB"]}):null]})}),Jne=g.memo(({llm:e,status:t,loadLLM:n,progress:r})=>{const{t:o}=Ae("flows"),[a,i]=g.useState();g.useEffect(()=>{a||!(e!=null&&e.name)||Zt(()=>import("./index-D7zprebX.js").then(async l=>(await l.__tla,l)),__vite__mapDeps([7,1,2,3,4,5,6])).then(async({hasModelInCache:l,functionCallingModelIds:u,prebuiltAppConfig:d})=>{const f=await l(e==null?void 0:e.name);i({hasCache:f,isFunctionCalling:u.includes(e==null?void 0:e.name),info:d.model_list.find(p=>p.model_id===(e==null?void 0:e.name))})})},[e==null?void 0:e.name,a]);const s=g.useCallback(async()=>{await(n==null?void 0:n())},[n]),c=g.useMemo(()=>{switch(t){case Mt.Downloading:return h.jsx(de,{className:"animate-spin w-7 h-7",name:"arrow-big-down-dash"});case Mt.Loaded:return h.jsx(Na,{name:(e==null?void 0:e.name)||"brain",className:"w-7 h-7"});default:return h.jsx(Na,{name:(e==null?void 0:e.name)||"brain",className:"w-7 h-7"})}},[e==null?void 0:e.name,t]);return h.jsx(Tr,{className:"flex justify-center !border-none !bg-inherit !p-2 max-w-full overflow-y-hidden mb-2",children:h.jsxs("div",{className:"ml-2 pt-1 max-w-full",children:[h.jsxs(Rr,{className:"flex gap-2 items-center pr-6",children:[c,`${(e==null?void 0:e.name)||""}`]}),h.jsxs("div",{className:"max-w-full mt-2 flex-wrap flex gap-1",children:[h.jsx(gl,{model:a==null?void 0:a.info,isFunctionCalling:(a==null?void 0:a.isFunctionCalling)||!1,name:e==null?void 0:e.name,isCached:(a==null?void 0:a.hasCache)||!1}),t!==Mt.Loaded?r?h.jsx("div",{className:"text-sm break-words flex-wrap",children:r}):h.jsx(ut,{disabled:t===Mt.Loading,onClick:s,className:"mt-4 w-full",children:o(a!=null&&a.hasCache?"llm_node.load_model_button":"llm_node.download_model_button")}):void 0]})]})})}),Zne=e=>{const[t,n]=g.useState([]),r=pt(a=>a.currentSession),o=g.useCallback(async()=>{if(!e||!(r!=null&&r.id))return;const a=await ue("FlowEdge").find({where:{session_id:r.id,source:e.id},order:{id:"DESC"}}),{flowNodes:i,flowNodeDatas:s}=await ix({where:{session_id:r.id,id:go(a.map(c=>c.target)),source_type:"JSONData"},order:{updated_at:"DESC"},select:["id","source_id","source_type","updated_at"]});n(i.reduce((c,l)=>{var d;const u=(d=s[l.source_type])==null?void 0:d.find(f=>f.id===l.source_id);return u&&c.push({node:l,entity:u}),c},[]))},[r==null?void 0:r.id,e]);return g.useEffect(()=>{e&&o()},[o,e]),{chatList:t,getChatList:o}};function ere({mainLLMInfo:e,loadLLM:t,threadNode:n,currentDataNode:r,...o}){const{chatList:a}=Zne(n);return h.jsxs(Ly,{variant:"sidebar",side:"right",collapsible:"none",...o,children:[h.jsx("div",{className:"h-1"}),h.jsxs(By,{children:[h.jsx(Ec,{className:"flex-1",children:h.jsx(bi,{children:a.map(({node:i},s)=>{var c;return h.jsx(eo,{children:h.jsxs(to,{className:"cursor-pointer",children:[h.jsx("span",{children:`Thread ${s+1}`}),h.jsx(de,{name:((c=r==null?void 0:r.node)==null?void 0:c.id)===i.id?"check":"chevron-right",className:"ml-auto transition-transform duration-200 group-data-[state=open]/collapsible:rotate-90"})]})},i.id)})})}),h.jsx(Jne,{llm:e==null?void 0:e.llm,status:e==null?void 0:e.status,progress:e==null?void 0:e.progress,loadLLM:t})]})]})}const tre=g.lazy(()=>Zt(()=>import("./index-DOJvyzuh.js").then(async e=>(await e.__tla,e)),__vite__mapDeps([8,9,1,2,10,11]))),nre=[{icon:mwe,label:"Copy"},{icon:gwe,label:"Refresh"},{icon:bwe,label:"Volume"}],rre=g.memo(()=>{const e=g.useRef(!1),[t,n]=g.useState(!1),r=g.useCallback(()=>{setTimeout(()=>{j.current&&(j.current.scrollTop=j.current.scrollHeight)},50)},[]),{threadInfo:o,mainLLMInfo:a,currentDataNode:i,loadLLM:s,updateMessagesData:c,onThreadMessagesLoaded:l}=xne(),{sendMessage:u}=$ne(),{input:d,setInput:f,messages:p,handleSubmit:y,handleInputChange:m,isLoading:v,reload:b,setMessages:x}=$E({fetch:async(S,C)=>{const M=JSON.parse(C==null?void 0:C.body),P=Pu(),N=M.messages[M.messages.length-1];return e.current=!0,x(R=>[...R,{id:Pu(),content:N.content,role:"user"},{id:P,content:"Thinking...",role:"assistant"}]),await u(N.content,M.messages||[],void 0,[],{onMessageUpdate(R){x(A=>{const O=[...A],k=O.findIndex(T=>T.id===P);return k!==-1&&(O[k]={...O[k],content:R.nodeData.content||""}),O}),e.current&&r()}}),x(R=>(c(R),R)),n(!1),f(""),e.current&&r(),new Response}}),j=g.useRef(null);g.useEffect(()=>{const S=l(C=>{x(C||[]),r()});return()=>{S()}},[x,l,r]);const w=async(S,C)=>(n(!0),await y(C),!0),_=async(S,C)=>{if(S==="Refresh"){n(!0);try{await b()}catch(M){console.error("Error reloading:",M)}finally{n(!1)}}if(S==="Copy"){const M=p[C];M&&M.role==="assistant"&&navigator.clipboard.writeText(M.content)}if(S==="Volume"){const M=p[C];M!=null&&M.content&&await oE.speak((M==null?void 0:M.content)||"")}},E=g.useCallback(()=>e.current=!1,[]);return h.jsxs(Dy,{onClick:E,className:"max-h-full !overflow-hidden !min-h-full",style:{minHeight:"unset"},defaultOpen:!0,children:[h.jsx(Fy,{className:"!max-h-full !overflow-hidden",style:{minHeight:"unset"},children:h.jsxs("main",{className:"flex h-full w-full max-w-2xl flex-col items-center mx-auto overflow-hidden",children:[h.jsx("div",{className:"flex-1 overflow-y-auto overflow-x-hidden min-w-full",children:h.jsx(NN,{className:"!max-h-full",ref:j,children:p&&p.map((S,C)=>h.jsxs(ON,{variant:S.role=="user"?"sent":"received",children:[S.role!=="user"?h.jsx(JW,{src:"",fallback:"\u{1F916}"}):void 0,h.jsxs(MN,{children:[h.jsx(g.Suspense,{fallback:h.jsx(CN,{}),children:h.jsx(tre,{className:"!text-sm [&_p]:leading-relaxed !max-w-full !bg-transparent !text-inherit !font-sans",source:S.content||""})}),S.role==="assistant"&&p.length-1===C&&h.jsx("div",{className:"flex items-center mt-1.5 gap-1",children:!t&&h.jsx(h.Fragment,{children:nre.map((M,P)=>{const N=M.icon;return h.jsx(eq,{variant:"ghost",className:"size-5",icon:h.jsx(N,{className:"size-3"}),onClick:()=>_(M.label,C)},P)})})})]})]},C))})}),h.jsx(h2,{className:"!max-w-2xl px-4",onSubmit:w,disabled:v||t||(a==null?void 0:a.status)!==Mt.Loaded,placeholder:"Type your message here...",maxHeight:72,value:d,onChange:m})]})}),h.jsx(ere,{currentDataNode:i,threadNode:o==null?void 0:o.threadNode,loadLLM:s,mainLLMInfo:a})]})});function ore(){const e=pt(t=>t.currentSession);if(!e)return h.jsx(Jxe,{flickeringGrid:!0,className:"w-full h-full"});if(e.main_source_type==="Thread")return h.jsx(rre,{})}var Ff="Menubar",[dx,are,ire]=Nu(Ff),[RI,Cwe]=Fn(Ff,[ire,qr]),dn=Du(),II=qr(),[sre,fx]=RI(Ff),DI=g.forwardRef((e,t)=>{const{__scopeMenubar:n,value:r,onValueChange:o,defaultValue:a,loop:i=!0,dir:s,...c}=e,l=Io(s),u=II(n),[d="",f]=Jt({prop:r,onChange:o,defaultProp:a}),[p,y]=g.useState(null);return h.jsx(sre,{scope:n,value:d,onMenuOpen:g.useCallback(m=>{f(m),y(m)},[f]),onMenuClose:g.useCallback(()=>f(""),[f]),onMenuToggle:g.useCallback(m=>{f(v=>v?"":m),y(m)},[f]),dir:l,loop:i,children:h.jsx(dx.Provider,{scope:n,children:h.jsx(dx.Slot,{scope:n,children:h.jsx(Ks,{asChild:!0,...u,orientation:"horizontal",loop:i,dir:l,currentTabStopId:p,onCurrentTabStopIdChange:y,children:h.jsx(Oe.div,{role:"menubar",...c,ref:t})})})})})});DI.displayName=Ff;var px="MenubarMenu",[cre,LI]=RI(px),FI=e=>{const{__scopeMenubar:t,value:n,...r}=e,o=ht(),a=n||o||"LEGACY_REACT_AUTO_VALUE",i=fx(px,t),s=dn(t),c=g.useRef(null),l=g.useRef(!1),u=i.value===a;return g.useEffect(()=>{u||(l.current=!1)},[u]),h.jsx(cre,{scope:t,value:a,triggerId:ht(),triggerRef:c,contentId:ht(),wasKeyboardTriggerOpenRef:l,children:h.jsx(rm,{...s,open:u,onOpenChange:d=>{d||i.onMenuClose()},modal:!1,dir:i.dir,...r})})};FI.displayName=px;var hx="MenubarTrigger",BI=g.forwardRef((e,t)=>{const{__scopeMenubar:n,disabled:r=!1,...o}=e,a=II(n),i=dn(n),s=fx(hx,n),c=LI(hx,n),l=g.useRef(null),u=tt(t,l,c.triggerRef),[d,f]=g.useState(!1),p=s.value===c.value;return h.jsx(dx.ItemSlot,{scope:n,value:c.value,disabled:r,children:h.jsx(Xs,{asChild:!0,...a,focusable:!r,tabStopId:c.value,children:h.jsx(Uh,{asChild:!0,...i,children:h.jsx(Oe.button,{type:"button",role:"menuitem",id:c.triggerId,"aria-haspopup":"menu","aria-expanded":p,"aria-controls":p?c.contentId:void 0,"data-highlighted":d?"":void 0,"data-state":p?"open":"closed","data-disabled":r?"":void 0,disabled:r,...o,ref:u,onPointerDown:he(e.onPointerDown,y=>{!r&&y.button===0&&y.ctrlKey===!1&&(s.onMenuOpen(c.value),p||y.preventDefault())}),onPointerEnter:he(e.onPointerEnter,()=>{var y;s.value&&!p&&(s.onMenuOpen(c.value),(y=l.current)==null||y.focus())}),onKeyDown:he(e.onKeyDown,y=>{r||(["Enter"," "].includes(y.key)&&s.onMenuToggle(c.value),y.key==="ArrowDown"&&s.onMenuOpen(c.value),["Enter"," ","ArrowDown"].includes(y.key)&&(c.wasKeyboardTriggerOpenRef.current=!0,y.preventDefault()))}),onFocus:he(e.onFocus,()=>f(!0)),onBlur:he(e.onBlur,()=>f(!1))})})})})});BI.displayName=hx;var lre="MenubarPortal",$I=e=>{const{__scopeMenubar:t,...n}=e,r=dn(t);return h.jsx(nm,{...r,...n})};$I.displayName=lre;var mx="MenubarContent",zI=g.forwardRef((e,t)=>{const{__scopeMenubar:n,align:r="start",...o}=e,a=dn(n),i=fx(mx,n),s=LI(mx,n),c=are(n),l=g.useRef(!1);return h.jsx(Hh,{id:s.contentId,"aria-labelledby":s.triggerId,"data-radix-menubar-content":"",...a,...o,ref:t,align:r,onCloseAutoFocus:he(e.onCloseAutoFocus,u=>{var d;!i.value&&!l.current&&((d=s.triggerRef.current)==null||d.focus()),l.current=!1,u.preventDefault()}),onFocusOutside:he(e.onFocusOutside,u=>{const d=u.target;c().some(f=>{var p;return(p=f.ref.current)==null?void 0:p.contains(d)})&&u.preventDefault()}),onInteractOutside:he(e.onInteractOutside,()=>{l.current=!0}),onEntryFocus:u=>{s.wasKeyboardTriggerOpenRef.current||u.preventDefault()},onKeyDown:he(e.onKeyDown,u=>{if(["ArrowRight","ArrowLeft"].includes(u.key)){const d=u.target,f=d.hasAttribute("data-radix-menubar-subtrigger"),p=d.closest("[data-radix-menubar-content]")!==u.currentTarget,y=(i.dir==="rtl"?"ArrowRight":"ArrowLeft")===u.key;if(!y&&f||p&&y)return;let m=c().filter(x=>!x.disabled).map(x=>x.value);y&&m.reverse();const v=m.indexOf(s.value);m=i.loop?Ere(m,v+1):m.slice(v+1);const[b]=m;b&&i.onMenuOpen(b)}},{checkForDefaultPrevented:!1}),style:{...e.style,"--radix-menubar-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-menubar-content-available-width":"var(--radix-popper-available-width)","--radix-menubar-content-available-height":"var(--radix-popper-available-height)","--radix-menubar-trigger-width":"var(--radix-popper-anchor-width)","--radix-menubar-trigger-height":"var(--radix-popper-anchor-height)"}})});zI.displayName=mx;var ure="MenubarGroup",dre=g.forwardRef((e,t)=>{const{__scopeMenubar:n,...r}=e,o=dn(n);return h.jsx(Wh,{...o,...r,ref:t})});dre.displayName=ure;var fre="MenubarLabel",VI=g.forwardRef((e,t)=>{const{__scopeMenubar:n,...r}=e,o=dn(n);return h.jsx(qh,{...o,...r,ref:t})});VI.displayName=fre;var pre="MenubarItem",UI=g.forwardRef((e,t)=>{const{__scopeMenubar:n,...r}=e,o=dn(n);return h.jsx(Yh,{...o,...r,ref:t})});UI.displayName=pre;var hre="MenubarCheckboxItem",HI=g.forwardRef((e,t)=>{const{__scopeMenubar:n,...r}=e,o=dn(n);return h.jsx(Kh,{...o,...r,ref:t})});HI.displayName=hre;var mre="MenubarRadioGroup",yre=g.forwardRef((e,t)=>{const{__scopeMenubar:n,...r}=e,o=dn(n);return h.jsx(Xh,{...o,...r,ref:t})});yre.displayName=mre;var gre="MenubarRadioItem",WI=g.forwardRef((e,t)=>{const{__scopeMenubar:n,...r}=e,o=dn(n);return h.jsx(Gh,{...o,...r,ref:t})});WI.displayName=gre;var vre="MenubarItemIndicator",qI=g.forwardRef((e,t)=>{const{__scopeMenubar:n,...r}=e,o=dn(n);return h.jsx(Qh,{...o,...r,ref:t})});qI.displayName=vre;var bre="MenubarSeparator",YI=g.forwardRef((e,t)=>{const{__scopeMenubar:n,...r}=e,o=dn(n);return h.jsx(Jh,{...o,...r,ref:t})});YI.displayName=bre;var xre="MenubarArrow",wre=g.forwardRef((e,t)=>{const{__scopeMenubar:n,...r}=e,o=dn(n);return h.jsx(Zh,{...o,...r,ref:t})});wre.displayName=xre;var _re="MenubarSubTrigger",KI=g.forwardRef((e,t)=>{const{__scopeMenubar:n,...r}=e,o=dn(n);return h.jsx(em,{"data-radix-menubar-subtrigger":"",...o,...r,ref:t})});KI.displayName=_re;var jre="MenubarSubContent",XI=g.forwardRef((e,t)=>{const{__scopeMenubar:n,...r}=e,o=dn(n);return h.jsx(tm,{...o,"data-radix-menubar-content":"",...r,ref:t,style:{...e.style,"--radix-menubar-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-menubar-content-available-width":"var(--radix-popper-available-width)","--radix-menubar-content-available-height":"var(--radix-popper-available-height)","--radix-menubar-trigger-width":"var(--radix-popper-anchor-width)","--radix-menubar-trigger-height":"var(--radix-popper-anchor-height)"}})});XI.displayName=jre;function Ere(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var GI=DI,Sre=FI,QI=BI,Cre=$I,JI=zI,ZI=VI,e3=UI,t3=HI,n3=WI,r3=qI,o3=YI,a3=KI,i3=XI;const yx=Sre,s3=g.forwardRef(({className:e,...t},n)=>h.jsx(GI,{ref:n,className:J("flex h-10 items-center space-x-1 rounded-md border bg-background p-1",e),...t}));s3.displayName=GI.displayName;const gx=g.forwardRef(({className:e,...t},n)=>h.jsx(QI,{ref:n,className:J("flex cursor-default select-none items-center rounded-sm px-3 py-1.5 text-sm font-medium outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground",e),...t}));gx.displayName=QI.displayName;const Ore=g.forwardRef(({className:e,inset:t,children:n,...r},o)=>h.jsxs(a3,{ref:o,className:J("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground",t&&"pl-8",e),...r,children:[n,h.jsx(de,{name:"chevron-right",className:"ml-auto h-4 w-4"})]}));Ore.displayName=a3.displayName;const Mre=g.forwardRef(({className:e,...t},n)=>h.jsx(i3,{ref:n,className:J("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));Mre.displayName=i3.displayName;const c3=g.forwardRef(({className:e,align:t="start",alignOffset:n=-4,sideOffset:r=8,...o},a)=>h.jsx(Cre,{children:h.jsx(JI,{ref:a,align:t,alignOffset:n,sideOffset:r,className:J("z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...o})}));c3.displayName=JI.displayName;const l3=g.forwardRef(({className:e,inset:t,...n},r)=>h.jsx(e3,{ref:r,className:J("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...n}));l3.displayName=e3.displayName;const Nre=g.forwardRef(({className:e,children:t,checked:n,...r},o)=>h.jsxs(t3,{ref:o,className:J("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:n,...r,children:[h.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:h.jsx(r3,{children:h.jsx(de,{name:"check",className:"h-4 w-4"})})}),t]}));Nre.displayName=t3.displayName;const Pre=g.forwardRef(({className:e,children:t,...n},r)=>h.jsxs(n3,{ref:r,className:J("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[h.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:h.jsx(r3,{children:h.jsx(de,{name:"circle",className:"h-2 w-2 fill-current"})})}),t]}));Pre.displayName=n3.displayName;const kre=g.forwardRef(({className:e,inset:t,...n},r)=>h.jsx(ZI,{ref:r,className:J("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...n}));kre.displayName=ZI.displayName;const Are=g.forwardRef(({className:e,...t},n)=>h.jsx(o3,{ref:n,className:J("-mx-1 my-1 h-px bg-muted",e),...t}));Are.displayName=o3.displayName;const Ft=g.forwardRef(({className:e,...t},n)=>h.jsx("div",{ref:n,className:J("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));Ft.displayName="Card";const fn=g.forwardRef(({className:e,...t},n)=>h.jsx("div",{ref:n,className:J("flex flex-col space-y-1.5 p-6",e),...t}));fn.displayName="CardHeader";const wn=g.forwardRef(({className:e,...t},n)=>h.jsx("h3",{ref:n,className:J("text-2xl font-semibold leading-none tracking-tight",e),...t}));wn.displayName="CardTitle";const u3=g.forwardRef(({className:e,...t},n)=>h.jsx("p",{ref:n,className:J("text-sm text-muted-foreground",e),...t}));u3.displayName="CardDescription";const pn=g.forwardRef(({className:e,...t},n)=>h.jsx("div",{ref:n,className:J("p-6 pt-0",e),...t}));pn.displayName="CardContent";const Ko=g.forwardRef(({className:e,...t},n)=>h.jsx("div",{ref:n,className:J("flex items-center p-6 pt-0",e),...t}));Ko.displayName="CardFooter";let d3;ke=Zxe()(ewe(twe((e,t)=>({...jI,...bne(e,t)})))),d3=()=>{const e=pt(i=>{var s;return(s=i.currentSession)==null?void 0:s.id}),[t,n]=g.useState(!1),r=ke(i=>i.pushSyncNodeQueue),o=ke(i=>i.createOrUpdateFlowNode),a=g.useCallback(async(i,s)=>{try{if(!e)throw new Error("Session not found");n(!0);const c=await ue("LLM").findOne({where:{name:s.name,session_id:e}});return c?(r("LLM",{where:{source_type:"LLM",source_id:c.id}}),c):ue("LLM").save({name:`${s.name}`,status:Mt.Started,session_id:e,provider:Fu.WebLLM,metadata:JSON.stringify({}),model_type:s.model_type||nc.LLM,...s}).then(async l=>{var u,d,f;return await o({source_id:l.id,source_type:"LLM",node_type:ae.LLM,x:(u=i.position)==null?void 0:u.x,y:((d=i.position)==null?void 0:d.y)+(((f=i.measured)==null?void 0:f.height)||0)+30}),l})}finally{n(!1)}},[o,r,e]);return{loading:t,createDatabaseLLM:a}};var vx="Popover",[f3,Owe]=Fn(vx,[Vo]),vl=Vo(),[Tre,Xo]=f3(vx),p3=e=>{const{__scopePopover:t,children:n,open:r,defaultOpen:o,onOpenChange:a,modal:i=!1}=e,s=vl(t),c=g.useRef(null),[l,u]=g.useState(!1),[d=!1,f]=Jt({prop:r,defaultProp:o,onChange:a});return h.jsx(bc,{...s,children:h.jsx(Tre,{scope:t,contentId:ht(),triggerRef:c,open:d,onOpenChange:f,onOpenToggle:g.useCallback(()=>f(p=>!p),[f]),hasCustomAnchor:l,onCustomAnchorAdd:g.useCallback(()=>u(!0),[]),onCustomAnchorRemove:g.useCallback(()=>u(!1),[]),modal:i,children:n})})};p3.displayName=vx;let bx;bx="PopoverAnchor",jm=g.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,o=Xo(bx,n),a=vl(n),{onCustomAnchorAdd:i,onCustomAnchorRemove:s}=o;return g.useEffect(()=>(i(),()=>s()),[i,s]),h.jsx(xc,{...a,...r,ref:t})}),jm.displayName=bx;var h3="PopoverTrigger",xx=g.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,o=Xo(h3,n),a=vl(n),i=tt(t,o.triggerRef),s=h.jsx(Oe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":b3(o.open),...r,ref:i,onClick:he(e.onClick,o.onOpenToggle)});return o.hasCustomAnchor?s:h.jsx(xc,{asChild:!0,...a,children:s})});xx.displayName=h3;var wx="PopoverPortal",[Rre,Ire]=f3(wx,{forceMount:void 0}),m3=e=>{const{__scopePopover:t,forceMount:n,children:r,container:o}=e,a=Xo(wx,t);return h.jsx(Rre,{scope:t,forceMount:n,children:h.jsx(Cn,{present:n||a.open,children:h.jsx(Cu,{asChild:!0,container:o,children:r})})})};m3.displayName=wx;var Gi="PopoverContent",y3=g.forwardRef((e,t)=>{const n=Ire(Gi,e.__scopePopover),{forceMount:r=n.forceMount,...o}=e,a=Xo(Gi,e.__scopePopover);return h.jsx(Cn,{present:r||a.open,children:a.modal?h.jsx(Dre,{...o,ref:t}):h.jsx(Lre,{...o,ref:t})})});y3.displayName=Gi;var Dre=g.forwardRef((e,t)=>{const n=Xo(Gi,e.__scopePopover),r=g.useRef(null),o=tt(t,r),a=g.useRef(!1);return g.useEffect(()=>{const i=r.current;if(i)return sd(i)},[]),h.jsx(mc,{as:Hr,allowPinchZoom:!0,children:h.jsx(g3,{...e,ref:o,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:he(e.onCloseAutoFocus,i=>{var s;i.preventDefault(),a.current||((s=n.triggerRef.current)==null||s.focus())}),onPointerDownOutside:he(e.onPointerDownOutside,i=>{const s=i.detail.originalEvent,c=s.button===0&&s.ctrlKey===!0,l=s.button===2||c;a.current=l},{checkForDefaultPrevented:!1}),onFocusOutside:he(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1})})})}),Lre=g.forwardRef((e,t)=>{const n=Xo(Gi,e.__scopePopover),r=g.useRef(!1),o=g.useRef(!1);return h.jsx(g3,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var i,s;(i=e.onCloseAutoFocus)==null||i.call(e,a),a.defaultPrevented||(r.current||((s=n.triggerRef.current)==null||s.focus()),a.preventDefault()),r.current=!1,o.current=!1},onInteractOutside:a=>{var s,c;(s=e.onInteractOutside)==null||s.call(e,a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const i=a.target;(c=n.triggerRef.current)!=null&&c.contains(i)&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&o.current&&a.preventDefault()}})}),g3=g.forwardRef((e,t)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:o,onCloseAutoFocus:a,disableOutsidePointerEvents:i,onEscapeKeyDown:s,onPointerDownOutside:c,onFocusOutside:l,onInteractOutside:u,...d}=e,f=Xo(Gi,n),p=vl(n);return Zu(),h.jsx(hc,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:o,onUnmountAutoFocus:a,children:h.jsx(Su,{asChild:!0,disableOutsidePointerEvents:i,onInteractOutside:u,onEscapeKeyDown:s,onPointerDownOutside:c,onFocusOutside:l,onDismiss:()=>f.onOpenChange(!1),children:h.jsx(gd,{"data-state":b3(f.open),role:"dialog",id:f.contentId,...p,...d,ref:t,style:{...d.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),v3="PopoverClose",Fre=g.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,o=Xo(v3,n);return h.jsx(Oe.button,{type:"button",...r,ref:t,onClick:he(e.onClick,()=>o.onOpenChange(!1))})});Fre.displayName=v3;var Bre="PopoverArrow",$re=g.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,o=vl(n);return h.jsx(vd,{...o,...r,ref:t})});$re.displayName=Bre;function b3(e){return e?"open":"closed"}IE=p3,y$=jm,b$=xx,DE=m3,mm=y3;const zre=IE,x3=g.forwardRef(({className:e,align:t="center",sideOffset:n=4,...r},o)=>h.jsx(DE,{children:h.jsx(mm,{ref:o,align:t,sideOffset:n,className:J("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));x3.displayName=mm.displayName;var w3=1,Vre=.9,Ure=.8,Hre=.17,_x=.1,jx=.999,Wre=.9999,qre=.99,Yre=/[\\\/_+.#"@\[\(\{&]/,Kre=/[\\\/_+.#"@\[\(\{&]/g,Xre=/[\s-]/,_3=/[\s-]/g;function Ex(e,t,n,r,o,a,i){if(a===t.length)return o===e.length?w3:qre;var s=`${o},${a}`;if(i[s]!==void 0)return i[s];for(var c=r.charAt(a),l=n.indexOf(c,o),u=0,d,f,p,y;l>=0;)d=Ex(e,t,n,r,l+1,a+1,i),d>u&&(l===o?d*=w3:Yre.test(e.charAt(l-1))?(d*=Ure,p=e.slice(o,l-1).match(Kre),p&&o>0&&(d*=Math.pow(jx,p.length))):Xre.test(e.charAt(l-1))?(d*=Vre,y=e.slice(o,l-1).match(_3),y&&o>0&&(d*=Math.pow(jx,y.length))):(d*=Hre,o>0&&(d*=Math.pow(jx,l-o))),e.charAt(l)!==t.charAt(a)&&(d*=Wre)),(d<_x&&n.charAt(l-1)===r.charAt(a+1)||r.charAt(a+1)===r.charAt(a)&&n.charAt(l-1)!==r.charAt(a))&&(f=Ex(e,t,n,r,l+1,a+2,i),f*_x>d&&(d=f*_x)),d>u&&(u=d),l=n.indexOf(c,l+1);return i[s]=u,u}function j3(e){return e.toLowerCase().replace(_3," ")}function Gre(e,t,n){return e=n&&n.length>0?`${e+" "+n.join(" ")}`:e,Ex(e,t,j3(e),j3(t),0,0,{})}var bl='[cmdk-group=""]',Sx='[cmdk-group-items=""]',Qre='[cmdk-group-heading=""]',Cx='[cmdk-item=""]',E3=`${Cx}:not([aria-disabled="true"])`,Ox="cmdk-item-select",Pa="data-value",Jre=(e,t,n)=>Gre(e,t,n),S3=g.createContext(void 0),xl=()=>g.useContext(S3),C3=g.createContext(void 0),Mx=()=>g.useContext(C3),O3=g.createContext(void 0),M3=g.forwardRef((e,t)=>{let n=Qi(()=>{var F,U;return{search:"",value:(U=(F=e.value)!=null?F:e.defaultValue)!=null?U:"",filtered:{count:0,items:new Map,groups:new Set}}}),r=Qi(()=>new Set),o=Qi(()=>new Map),a=Qi(()=>new Map),i=Qi(()=>new Set),s=N3(e),{label:c,children:l,value:u,onValueChange:d,filter:f,shouldFilter:p,loop:y,disablePointerSelection:m=!1,vimBindings:v=!0,...b}=e,x=ht(),j=ht(),w=ht(),_=g.useRef(null),E=loe();ka(()=>{if(u!==void 0){let F=u.trim();n.current.value=F,S.emit()}},[u]),ka(()=>{E(6,A)},[]);let S=g.useMemo(()=>({subscribe:F=>(i.current.add(F),()=>i.current.delete(F)),snapshot:()=>n.current,setState:(F,U,Y)=>{var G,re,Z;if(!Object.is(n.current[F],U)){if(n.current[F]=U,F==="search")R(),P(),E(1,N);else if(F==="value"&&(Y||E(5,A),((G=s.current)==null?void 0:G.value)!==void 0)){let q=U??"";(Z=(re=s.current).onValueChange)==null||Z.call(re,q);return}S.emit()}},emit:()=>{i.current.forEach(F=>F())}}),[]),C=g.useMemo(()=>({value:(F,U,Y)=>{var G;U!==((G=a.current.get(F))==null?void 0:G.value)&&(a.current.set(F,{value:U,keywords:Y}),n.current.filtered.items.set(F,M(U,Y)),E(2,()=>{P(),S.emit()}))},item:(F,U)=>(r.current.add(F),U&&(o.current.has(U)?o.current.get(U).add(F):o.current.set(U,new Set([F]))),E(3,()=>{R(),P(),n.current.value||N(),S.emit()}),()=>{a.current.delete(F),r.current.delete(F),n.current.filtered.items.delete(F);let Y=O();E(4,()=>{R(),(Y==null?void 0:Y.getAttribute("id"))===F&&N(),S.emit()})}),group:F=>(o.current.has(F)||o.current.set(F,new Set),()=>{a.current.delete(F),o.current.delete(F)}),filter:()=>s.current.shouldFilter,label:c||e["aria-label"],getDisablePointerSelection:()=>s.current.disablePointerSelection,listId:x,inputId:w,labelId:j,listInnerRef:_}),[]);function M(F,U){var Y,G;let re=(G=(Y=s.current)==null?void 0:Y.filter)!=null?G:Jre;return F?re(F,n.current.search,U):0}function P(){if(!n.current.search||s.current.shouldFilter===!1)return;let F=n.current.filtered.items,U=[];n.current.filtered.groups.forEach(G=>{let re=o.current.get(G),Z=0;re.forEach(q=>{let W=F.get(q);Z=Math.max(W,Z)}),U.push([G,Z])});let Y=_.current;k().sort((G,re)=>{var Z,q;let W=G.getAttribute("id"),Q=re.getAttribute("id");return((Z=F.get(Q))!=null?Z:0)-((q=F.get(W))!=null?q:0)}).forEach(G=>{let re=G.closest(Sx);re?re.appendChild(G.parentElement===re?G:G.closest(`${Sx} > *`)):Y.appendChild(G.parentElement===Y?G:G.closest(`${Sx} > *`))}),U.sort((G,re)=>re[1]-G[1]).forEach(G=>{var re;let Z=(re=_.current)==null?void 0:re.querySelector(`${bl}[${Pa}="${encodeURIComponent(G[0])}"]`);Z==null||Z.parentElement.appendChild(Z)})}function N(){let F=k().find(Y=>Y.getAttribute("aria-disabled")!=="true"),U=F==null?void 0:F.getAttribute(Pa);S.setState("value",U||void 0)}function R(){var F,U,Y,G;if(!n.current.search||s.current.shouldFilter===!1){n.current.filtered.count=r.current.size;return}n.current.filtered.groups=new Set;let re=0;for(let Z of r.current){let q=(U=(F=a.current.get(Z))==null?void 0:F.value)!=null?U:"",W=(G=(Y=a.current.get(Z))==null?void 0:Y.keywords)!=null?G:[],Q=M(q,W);n.current.filtered.items.set(Z,Q),Q>0&&re++}for(let[Z,q]of o.current)for(let W of q)if(n.current.filtered.items.get(W)>0){n.current.filtered.groups.add(Z);break}n.current.filtered.count=re}function A(){var F,U,Y;let G=O();G&&(((F=G.parentElement)==null?void 0:F.firstChild)===G&&((Y=(U=G.closest(bl))==null?void 0:U.querySelector(Qre))==null||Y.scrollIntoView({block:"nearest"})),G.scrollIntoView({block:"nearest"}))}function O(){var F;return(F=_.current)==null?void 0:F.querySelector(`${Cx}[aria-selected="true"]`)}function k(){var F;return Array.from(((F=_.current)==null?void 0:F.querySelectorAll(E3))||[])}function T(F){let U=k()[F];U&&S.setState("value",U.getAttribute(Pa))}function I(F){var U;let Y=O(),G=k(),re=G.findIndex(q=>q===Y),Z=G[re+F];(U=s.current)!=null&&U.loop&&(Z=re+F<0?G[G.length-1]:re+F===G.length?G[0]:G[re+F]),Z&&S.setState("value",Z.getAttribute(Pa))}function L(F){let U=O(),Y=U==null?void 0:U.closest(bl),G;for(;Y&&!G;)Y=F>0?soe(Y,bl):coe(Y,bl),G=Y==null?void 0:Y.querySelector(E3);G?S.setState("value",G.getAttribute(Pa)):I(F)}let D=()=>T(k().length-1),z=F=>{F.preventDefault(),F.metaKey?D():F.altKey?L(1):I(1)},H=F=>{F.preventDefault(),F.metaKey?T(0):F.altKey?L(-1):I(-1)};return g.createElement(Oe.div,{ref:t,tabIndex:-1,...b,"cmdk-root":"",onKeyDown:F=>{var U;if((U=b.onKeyDown)==null||U.call(b,F),!F.defaultPrevented)switch(F.key){case"n":case"j":{v&&F.ctrlKey&&z(F);break}case"ArrowDown":{z(F);break}case"p":case"k":{v&&F.ctrlKey&&H(F);break}case"ArrowUp":{H(F);break}case"Home":{F.preventDefault(),T(0);break}case"End":{F.preventDefault(),D();break}case"Enter":if(!F.nativeEvent.isComposing&&F.keyCode!==229){F.preventDefault();let Y=O();if(Y){let G=new Event(Ox);Y.dispatchEvent(G)}}}}},g.createElement("label",{"cmdk-label":"",htmlFor:C.inputId,id:C.labelId,style:doe},c),Bf(e,F=>g.createElement(C3.Provider,{value:S},g.createElement(S3.Provider,{value:C},F))))}),Zre=g.forwardRef((e,t)=>{var n,r;let o=ht(),a=g.useRef(null),i=g.useContext(O3),s=xl(),c=N3(e),l=(r=(n=c.current)==null?void 0:n.forceMount)!=null?r:i==null?void 0:i.forceMount;ka(()=>{if(!l)return s.item(o,i==null?void 0:i.id)},[l]);let u=P3(o,a,[e.value,e.children,a],e.keywords),d=Mx(),f=Aa(E=>E.value&&E.value===u.current),p=Aa(E=>l||s.filter()===!1?!0:E.search?E.filtered.items.get(o)>0:!0);g.useEffect(()=>{let E=a.current;if(!(!E||e.disabled))return E.addEventListener(Ox,y),()=>E.removeEventListener(Ox,y)},[p,e.onSelect,e.disabled]);function y(){var E,S;m(),(S=(E=c.current).onSelect)==null||S.call(E,u.current)}function m(){d.setState("value",u.current,!0)}if(!p)return null;let{disabled:v,value:b,onSelect:x,forceMount:j,keywords:w,..._}=e;return g.createElement(Oe.div,{ref:wl([a,t]),..._,id:o,"cmdk-item":"",role:"option","aria-disabled":!!v,"aria-selected":!!f,"data-disabled":!!v,"data-selected":!!f,onPointerMove:v||s.getDisablePointerSelection()?void 0:m,onClick:v?void 0:y},e.children)}),eoe=g.forwardRef((e,t)=>{let{heading:n,children:r,forceMount:o,...a}=e,i=ht(),s=g.useRef(null),c=g.useRef(null),l=ht(),u=xl(),d=Aa(p=>o||u.filter()===!1?!0:p.search?p.filtered.groups.has(i):!0);ka(()=>u.group(i),[]),P3(i,s,[e.value,e.heading,c]);let f=g.useMemo(()=>({id:i,forceMount:o}),[o]);return g.createElement(Oe.div,{ref:wl([s,t]),...a,"cmdk-group":"",role:"presentation",hidden:d?void 0:!0},n&&g.createElement("div",{ref:c,"cmdk-group-heading":"","aria-hidden":!0,id:l},n),Bf(e,p=>g.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":n?l:void 0},g.createElement(O3.Provider,{value:f},p))))}),toe=g.forwardRef((e,t)=>{let{alwaysRender:n,...r}=e,o=g.useRef(null),a=Aa(i=>!i.search);return!n&&!a?null:g.createElement(Oe.div,{ref:wl([o,t]),...r,"cmdk-separator":"",role:"separator"})}),noe=g.forwardRef((e,t)=>{let{onValueChange:n,...r}=e,o=e.value!=null,a=Mx(),i=Aa(u=>u.search),s=Aa(u=>u.value),c=xl(),l=g.useMemo(()=>{var u;let d=(u=c.listInnerRef.current)==null?void 0:u.querySelector(`${Cx}[${Pa}="${encodeURIComponent(s)}"]`);return d==null?void 0:d.getAttribute("id")},[]);return g.useEffect(()=>{e.value!=null&&a.setState("search",e.value)},[e.value]),g.createElement(Oe.input,{ref:t,...r,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":c.listId,"aria-labelledby":c.labelId,"aria-activedescendant":l,id:c.inputId,type:"text",value:o?e.value:i,onChange:u=>{o||a.setState("search",u.target.value),n==null||n(u.target.value)}})}),roe=g.forwardRef((e,t)=>{let{children:n,label:r="Suggestions",...o}=e,a=g.useRef(null),i=g.useRef(null),s=xl();return g.useEffect(()=>{if(i.current&&a.current){let c=i.current,l=a.current,u,d=new ResizeObserver(()=>{u=requestAnimationFrame(()=>{let f=c.offsetHeight;l.style.setProperty("--cmdk-list-height",f.toFixed(1)+"px")})});return d.observe(c),()=>{cancelAnimationFrame(u),d.unobserve(c)}}},[]),g.createElement(Oe.div,{ref:wl([a,t]),...o,"cmdk-list":"",role:"listbox","aria-label":r,id:s.listId},Bf(e,c=>g.createElement("div",{ref:wl([i,s.listInnerRef]),"cmdk-list-sizer":""},c)))}),ooe=g.forwardRef((e,t)=>{let{open:n,onOpenChange:r,overlayClassName:o,contentClassName:a,container:i,...s}=e;return g.createElement(Gs,{open:n,onOpenChange:r},g.createElement(Qs,{container:i},g.createElement(da,{"cmdk-overlay":"",className:o}),g.createElement(fa,{"aria-label":e.label,"cmdk-dialog":"",className:a},g.createElement(M3,{ref:t,...s}))))}),aoe=g.forwardRef((e,t)=>Aa(n=>n.filtered.count===0)?g.createElement(Oe.div,{ref:t,...e,"cmdk-empty":"",role:"presentation"}):null),ioe=g.forwardRef((e,t)=>{let{progress:n,children:r,label:o="Loading...",...a}=e;return g.createElement(Oe.div,{ref:t,...a,"cmdk-loading":"",role:"progressbar","aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,"aria-label":o},Bf(e,i=>g.createElement("div",{"aria-hidden":!0},i)))}),_n=Object.assign(M3,{List:roe,Item:Zre,Input:noe,Group:eoe,Separator:toe,Dialog:ooe,Empty:aoe,Loading:ioe});function soe(e,t){let n=e.nextElementSibling;for(;n;){if(n.matches(t))return n;n=n.nextElementSibling}}function coe(e,t){let n=e.previousElementSibling;for(;n;){if(n.matches(t))return n;n=n.previousElementSibling}}function N3(e){let t=g.useRef(e);return ka(()=>{t.current=e}),t}var ka=typeof window>"u"?g.useEffect:g.useLayoutEffect;function Qi(e){let t=g.useRef();return t.current===void 0&&(t.current=e()),t}function wl(e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}function Aa(e){let t=Mx(),n=()=>e(t.snapshot());return Iu.useSyncExternalStore(t.subscribe,n,n)}function P3(e,t,n,r=[]){let o=g.useRef(),a=xl();return ka(()=>{var i;let s=(()=>{var l;for(let u of n){if(typeof u=="string")return u.trim();if(typeof u=="object"&&"current"in u)return u.current?(l=u.current.textContent)==null?void 0:l.trim():o.current}})(),c=r.map(l=>l.trim());a.value(e,s,c),(i=t.current)==null||i.setAttribute(Pa,s),o.current=s}),o}var loe=()=>{let[e,t]=g.useState(),n=Qi(()=>new Map);return ka(()=>{n.current.forEach(r=>r()),n.current=new Map},[e]),(r,o)=>{n.current.set(r,o),t({})}};function uoe(e){let t=e.type;return typeof t=="function"?t(e.props):"render"in t?t.render(e.props):e}function Bf({asChild:e,children:t},n){return e&&g.isValidElement(t)?g.cloneElement(uoe(t),{ref:t.ref},n(t.props.children)):n(t)}var doe={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const k3=g.forwardRef(({className:e,...t},n)=>h.jsx(_n,{ref:n,className:J("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",e),...t}));k3.displayName=_n.displayName;const A3=g.forwardRef(({className:e,...t},n)=>h.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[h.jsx(de,{name:"search",className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),h.jsx(_n.Input,{ref:n,className:J("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",e),...t})]}));A3.displayName=_n.Input.displayName;const T3=g.forwardRef(({className:e,...t},n)=>h.jsx(_n.List,{ref:n,className:J("max-h-[300px] overflow-y-auto overflow-x-hidden",e),...t}));T3.displayName=_n.List.displayName;const R3=g.forwardRef((e,t)=>h.jsx(_n.Empty,{ref:t,className:"py-6 text-center text-sm",...e}));R3.displayName=_n.Empty.displayName;const I3=g.forwardRef(({className:e,...t},n)=>h.jsx(_n.Group,{ref:n,className:J("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",e),...t}));I3.displayName=_n.Group.displayName;const foe=g.forwardRef(({className:e,...t},n)=>h.jsx(_n.Separator,{ref:n,className:J("-mx-1 h-px bg-border",e),...t}));foe.displayName=_n.Separator.displayName;const D3=g.forwardRef(({className:e,...t},n)=>h.jsx(_n.Item,{ref:n,className:J("relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",e),...t}));D3.displayName=_n.Item.displayName,Em=function(e,[t,n]){return Math.min(n,Math.max(t,e))};function L3(e){const t=g.useRef({value:e,previous:e});return g.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var poe=[" ","Enter","ArrowUp","ArrowDown"],hoe=[" ","Enter"],_l="Select",[$f,zf,moe]=Nu(_l),[Ji,Mwe]=Fn(_l,[moe,Vo]),Vf=Vo(),[yoe,Go]=Ji(_l),[goe,voe]=Ji(_l),F3=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:o,onOpenChange:a,value:i,defaultValue:s,onValueChange:c,dir:l,name:u,autoComplete:d,disabled:f,required:p,form:y}=e,m=Vf(t),[v,b]=g.useState(null),[x,j]=g.useState(null),[w,_]=g.useState(!1),E=Io(l),[S=!1,C]=Jt({prop:r,defaultProp:o,onChange:a}),[M,P]=Jt({prop:i,defaultProp:s,onChange:c}),N=g.useRef(null),R=v?y||!!v.closest("form"):!0,[A,O]=g.useState(new Set),k=Array.from(A).map(T=>T.props.value).join(";");return h.jsx(bc,{...m,children:h.jsxs(yoe,{required:p,scope:t,trigger:v,onTriggerChange:b,valueNode:x,onValueNodeChange:j,valueNodeHasChildren:w,onValueNodeHasChildrenChange:_,contentId:ht(),value:M,onValueChange:P,open:S,onOpenChange:C,dir:E,triggerPointerDownPosRef:N,disabled:f,children:[h.jsx($f.Provider,{scope:t,children:h.jsx(goe,{scope:e.__scopeSelect,onNativeOptionAdd:g.useCallback(T=>{O(I=>new Set(I).add(T))},[]),onNativeOptionRemove:g.useCallback(T=>{O(I=>{const L=new Set(I);return L.delete(T),L})},[]),children:n})}),R?h.jsxs(lD,{"aria-hidden":!0,required:p,tabIndex:-1,name:u,autoComplete:d,value:M,onChange:T=>P(T.target.value),disabled:f,form:y,children:[M===void 0?h.jsx("option",{value:""}):null,Array.from(A)]},k):null]})})};F3.displayName=_l;var B3="SelectTrigger",$3=g.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...o}=e,a=Vf(n),i=Go(B3,n),s=i.disabled||r,c=tt(t,i.onTriggerChange),l=zf(n),u=g.useRef("touch"),[d,f,p]=uD(m=>{const v=l().filter(j=>!j.disabled),b=v.find(j=>j.value===i.value),x=dD(v,m,b);x!==void 0&&i.onValueChange(x.value)}),y=m=>{s||(i.onOpenChange(!0),p()),m&&(i.triggerPointerDownPosRef.current={x:Math.round(m.pageX),y:Math.round(m.pageY)})};return h.jsx(xc,{asChild:!0,...a,children:h.jsx(Oe.button,{type:"button",role:"combobox","aria-controls":i.contentId,"aria-expanded":i.open,"aria-required":i.required,"aria-autocomplete":"none",dir:i.dir,"data-state":i.open?"open":"closed",disabled:s,"data-disabled":s?"":void 0,"data-placeholder":cD(i.value)?"":void 0,...o,ref:c,onClick:he(o.onClick,m=>{m.currentTarget.focus(),u.current!=="mouse"&&y(m)}),onPointerDown:he(o.onPointerDown,m=>{u.current=m.pointerType;const v=m.target;v.hasPointerCapture(m.pointerId)&&v.releasePointerCapture(m.pointerId),m.button===0&&m.ctrlKey===!1&&m.pointerType==="mouse"&&(y(m),m.preventDefault())}),onKeyDown:he(o.onKeyDown,m=>{const v=d.current!=="";!(m.ctrlKey||m.altKey||m.metaKey)&&m.key.length===1&&f(m.key),!(v&&m.key===" ")&&poe.includes(m.key)&&(y(),m.preventDefault())})})})});$3.displayName=B3;var z3="SelectValue",V3=g.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:o,children:a,placeholder:i="",...s}=e,c=Go(z3,n),{onValueNodeHasChildrenChange:l}=c,u=a!==void 0,d=tt(t,c.onValueNodeChange);return gn(()=>{l(u)},[l,u]),h.jsx(Oe.span,{...s,ref:d,style:{pointerEvents:"none"},children:cD(c.value)?h.jsx(h.Fragment,{children:i}):a})});V3.displayName=z3;var boe="SelectIcon",U3=g.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...o}=e;return h.jsx(Oe.span,{"aria-hidden":!0,...o,ref:t,children:r||"\u25BC"})});U3.displayName=boe;var xoe="SelectPortal",H3=e=>h.jsx(Cu,{asChild:!0,...e});H3.displayName=xoe;var Ta="SelectContent",W3=g.forwardRef((e,t)=>{const n=Go(Ta,e.__scopeSelect),[r,o]=g.useState();if(gn(()=>{o(new DocumentFragment)},[]),!n.open){const a=r;return a?Eu.createPortal(h.jsx(q3,{scope:e.__scopeSelect,children:h.jsx($f.Slot,{scope:e.__scopeSelect,children:h.jsx("div",{children:e.children})})}),a):null}return h.jsx(Y3,{...e,ref:t})});W3.displayName=Ta;var mr=10,[q3,Qo]=Ji(Ta),woe="SelectContentImpl",Y3=g.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:o,onEscapeKeyDown:a,onPointerDownOutside:i,side:s,sideOffset:c,align:l,alignOffset:u,arrowPadding:d,collisionBoundary:f,collisionPadding:p,sticky:y,hideWhenDetached:m,avoidCollisions:v,...b}=e,x=Go(Ta,n),[j,w]=g.useState(null),[_,E]=g.useState(null),S=tt(t,Z=>w(Z)),[C,M]=g.useState(null),[P,N]=g.useState(null),R=zf(n),[A,O]=g.useState(!1),k=g.useRef(!1);g.useEffect(()=>{if(j)return sd(j)},[j]),Zu();const T=g.useCallback(Z=>{const[q,...W]=R().map(B=>B.ref.current),[Q]=W.slice(-1),te=document.activeElement;for(const B of Z)if(B===te||(B==null||B.scrollIntoView({block:"nearest"}),B===q&&_&&(_.scrollTop=0),B===Q&&_&&(_.scrollTop=_.scrollHeight),B==null||B.focus(),document.activeElement!==te))return},[R,_]),I=g.useCallback(()=>T([C,j]),[T,C,j]);g.useEffect(()=>{A&&I()},[A,I]);const{onOpenChange:L,triggerPointerDownPosRef:D}=x;g.useEffect(()=>{if(j){let Z={x:0,y:0};const q=Q=>{var te,B;Z={x:Math.abs(Math.round(Q.pageX)-(((te=D.current)==null?void 0:te.x)??0)),y:Math.abs(Math.round(Q.pageY)-(((B=D.current)==null?void 0:B.y)??0))}},W=Q=>{Z.x<=10&&Z.y<=10?Q.preventDefault():j.contains(Q.target)||L(!1),document.removeEventListener("pointermove",q),D.current=null};return D.current!==null&&(document.addEventListener("pointermove",q),document.addEventListener("pointerup",W,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",q),document.removeEventListener("pointerup",W,{capture:!0})}}},[j,L,D]),g.useEffect(()=>{const Z=()=>L(!1);return window.addEventListener("blur",Z),window.addEventListener("resize",Z),()=>{window.removeEventListener("blur",Z),window.removeEventListener("resize",Z)}},[L]);const[z,H]=uD(Z=>{const q=R().filter(te=>!te.disabled),W=q.find(te=>te.ref.current===document.activeElement),Q=dD(q,Z,W);Q&&setTimeout(()=>Q.ref.current.focus())}),F=g.useCallback((Z,q,W)=>{const Q=!k.current&&!W;(x.value!==void 0&&x.value===q||Q)&&(M(Z),Q&&(k.current=!0))},[x.value]),U=g.useCallback(()=>j==null?void 0:j.focus(),[j]),Y=g.useCallback((Z,q,W)=>{const Q=!k.current&&!W;(x.value!==void 0&&x.value===q||Q)&&N(Z)},[x.value]),G=r==="popper"?Nx:K3,re=G===Nx?{side:s,sideOffset:c,align:l,alignOffset:u,arrowPadding:d,collisionBoundary:f,collisionPadding:p,sticky:y,hideWhenDetached:m,avoidCollisions:v}:{};return h.jsx(q3,{scope:n,content:j,viewport:_,onViewportChange:E,itemRefCallback:F,selectedItem:C,onItemLeave:U,itemTextRefCallback:Y,focusSelectedItem:I,selectedItemText:P,position:r,isPositioned:A,searchRef:z,children:h.jsx(mc,{as:Hr,allowPinchZoom:!0,children:h.jsx(hc,{asChild:!0,trapped:x.open,onMountAutoFocus:Z=>{Z.preventDefault()},onUnmountAutoFocus:he(o,Z=>{var q;(q=x.trigger)==null||q.focus({preventScroll:!0}),Z.preventDefault()}),children:h.jsx(Su,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:i,onFocusOutside:Z=>Z.preventDefault(),onDismiss:()=>x.onOpenChange(!1),children:h.jsx(G,{role:"listbox",id:x.contentId,"data-state":x.open?"open":"closed",dir:x.dir,onContextMenu:Z=>Z.preventDefault(),...b,...re,onPlaced:()=>O(!0),ref:S,style:{display:"flex",flexDirection:"column",outline:"none",...b.style},onKeyDown:he(b.onKeyDown,Z=>{const q=Z.ctrlKey||Z.altKey||Z.metaKey;if(Z.key==="Tab"&&Z.preventDefault(),!q&&Z.key.length===1&&H(Z.key),["ArrowUp","ArrowDown","Home","End"].includes(Z.key)){let W=R().filter(Q=>!Q.disabled).map(Q=>Q.ref.current);if(["ArrowUp","End"].includes(Z.key)&&(W=W.slice().reverse()),["ArrowUp","ArrowDown"].includes(Z.key)){const Q=Z.target,te=W.indexOf(Q);W=W.slice(te+1)}setTimeout(()=>T(W)),Z.preventDefault()}})})})})})})});Y3.displayName=woe;var _oe="SelectItemAlignedPosition",K3=g.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...o}=e,a=Go(Ta,n),i=Qo(Ta,n),[s,c]=g.useState(null),[l,u]=g.useState(null),d=tt(t,S=>u(S)),f=zf(n),p=g.useRef(!1),y=g.useRef(!0),{viewport:m,selectedItem:v,selectedItemText:b,focusSelectedItem:x}=i,j=g.useCallback(()=>{if(a.trigger&&a.valueNode&&s&&l&&m&&v&&b){const S=a.trigger.getBoundingClientRect(),C=l.getBoundingClientRect(),M=a.valueNode.getBoundingClientRect(),P=b.getBoundingClientRect();if(a.dir!=="rtl"){const Q=P.left-C.left,te=M.left-Q,B=S.left-te,se=S.width+B,ce=Math.max(se,C.width),ve=window.innerWidth-mr,Te=Em(te,[mr,Math.max(mr,ve-ce)]);s.style.minWidth=se+"px",s.style.left=Te+"px"}else{const Q=C.right-P.right,te=window.innerWidth-M.right-Q,B=window.innerWidth-S.right-te,se=S.width+B,ce=Math.max(se,C.width),ve=window.innerWidth-mr,Te=Em(te,[mr,Math.max(mr,ve-ce)]);s.style.minWidth=se+"px",s.style.right=Te+"px"}const N=f(),R=window.innerHeight-mr*2,A=m.scrollHeight,O=window.getComputedStyle(l),k=parseInt(O.borderTopWidth,10),T=parseInt(O.paddingTop,10),I=parseInt(O.borderBottomWidth,10),L=parseInt(O.paddingBottom,10),D=k+T+A+L+I,z=Math.min(v.offsetHeight*5,D),H=window.getComputedStyle(m),F=parseInt(H.paddingTop,10),U=parseInt(H.paddingBottom,10),Y=S.top+S.height/2-mr,G=R-Y,re=v.offsetHeight/2,Z=v.offsetTop+re,q=k+T+Z,W=D-q;if(q<=Y){const Q=N.length>0&&v===N[N.length-1].ref.current;s.style.bottom="0px";const te=l.clientHeight-m.offsetTop-m.offsetHeight,B=Math.max(G,re+(Q?U:0)+te+I),se=q+B;s.style.height=se+"px"}else{const Q=N.length>0&&v===N[0].ref.current;s.style.top="0px";const te=Math.max(Y,k+m.offsetTop+(Q?F:0)+re)+W;s.style.height=te+"px",m.scrollTop=q-Y+m.offsetTop}s.style.margin=`${mr}px 0`,s.style.minHeight=z+"px",s.style.maxHeight=R+"px",r==null||r(),requestAnimationFrame(()=>p.current=!0)}},[f,a.trigger,a.valueNode,s,l,m,v,b,a.dir,r]);gn(()=>j(),[j]);const[w,_]=g.useState();gn(()=>{l&&_(window.getComputedStyle(l).zIndex)},[l]);const E=g.useCallback(S=>{S&&y.current===!0&&(j(),x==null||x(),y.current=!1)},[j,x]);return h.jsx(Eoe,{scope:n,contentWrapper:s,shouldExpandOnScrollRef:p,onScrollButtonChange:E,children:h.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:w},children:h.jsx(Oe.div,{...o,ref:d,style:{boxSizing:"border-box",maxHeight:"100%",...o.style}})})})});K3.displayName=_oe;var joe="SelectPopperPosition",Nx=g.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:o=mr,...a}=e,i=Vf(n);return h.jsx(gd,{...i,...a,ref:t,align:r,collisionPadding:o,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Nx.displayName=joe;var[Eoe,Px]=Ji(Ta,{}),kx="SelectViewport",X3=g.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:r,...o}=e,a=Qo(kx,n),i=Px(kx,n),s=tt(t,a.onViewportChange),c=g.useRef(0);return h.jsxs(h.Fragment,{children:[h.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),h.jsx($f.Slot,{scope:n,children:h.jsx(Oe.div,{"data-radix-select-viewport":"",role:"presentation",...o,ref:s,style:{position:"relative",flex:1,overflow:"hidden auto",...o.style},onScroll:he(o.onScroll,l=>{const u=l.currentTarget,{contentWrapper:d,shouldExpandOnScrollRef:f}=i;if(f!=null&&f.current&&d){const p=Math.abs(c.current-u.scrollTop);if(p>0){const y=window.innerHeight-mr*2,m=parseFloat(d.style.minHeight),v=parseFloat(d.style.height),b=Math.max(m,v);if(b<y){const x=b+p,j=Math.min(y,x),w=x-j;d.style.height=j+"px",d.style.bottom==="0px"&&(u.scrollTop=w>0?w:0,d.style.justifyContent="flex-end")}}}c.current=u.scrollTop})})})]})});X3.displayName=kx;var G3="SelectGroup",[Soe,Coe]=Ji(G3),Ooe=g.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,o=ht();return h.jsx(Soe,{scope:n,id:o,children:h.jsx(Oe.div,{role:"group","aria-labelledby":o,...r,ref:t})})});Ooe.displayName=G3;var Q3="SelectLabel",J3=g.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,o=Coe(Q3,n);return h.jsx(Oe.div,{id:o.id,...r,ref:t})});J3.displayName=Q3;var Uf="SelectItem",[Moe,Z3]=Ji(Uf),eD=g.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:o=!1,textValue:a,...i}=e,s=Go(Uf,n),c=Qo(Uf,n),l=s.value===r,[u,d]=g.useState(a??""),[f,p]=g.useState(!1),y=tt(t,x=>{var j;return(j=c.itemRefCallback)==null?void 0:j.call(c,x,r,o)}),m=ht(),v=g.useRef("touch"),b=()=>{o||(s.onValueChange(r),s.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return h.jsx(Moe,{scope:n,value:r,disabled:o,textId:m,isSelected:l,onItemTextChange:g.useCallback(x=>{d(j=>j||((x==null?void 0:x.textContent)??"").trim())},[]),children:h.jsx($f.ItemSlot,{scope:n,value:r,disabled:o,textValue:u,children:h.jsx(Oe.div,{role:"option","aria-labelledby":m,"data-highlighted":f?"":void 0,"aria-selected":l&&f,"data-state":l?"checked":"unchecked","aria-disabled":o||void 0,"data-disabled":o?"":void 0,tabIndex:o?void 0:-1,...i,ref:y,onFocus:he(i.onFocus,()=>p(!0)),onBlur:he(i.onBlur,()=>p(!1)),onClick:he(i.onClick,()=>{v.current!=="mouse"&&b()}),onPointerUp:he(i.onPointerUp,()=>{v.current==="mouse"&&b()}),onPointerDown:he(i.onPointerDown,x=>{v.current=x.pointerType}),onPointerMove:he(i.onPointerMove,x=>{var j;v.current=x.pointerType,o?(j=c.onItemLeave)==null||j.call(c):v.current==="mouse"&&x.currentTarget.focus({preventScroll:!0})}),onPointerLeave:he(i.onPointerLeave,x=>{var j;x.currentTarget===document.activeElement&&((j=c.onItemLeave)==null||j.call(c))}),onKeyDown:he(i.onKeyDown,x=>{var j;((j=c.searchRef)==null?void 0:j.current)!==""&&x.key===" "||(hoe.includes(x.key)&&b(),x.key===" "&&x.preventDefault())})})})})});eD.displayName=Uf;var jl="SelectItemText",tD=g.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:o,...a}=e,i=Go(jl,n),s=Qo(jl,n),c=Z3(jl,n),l=voe(jl,n),[u,d]=g.useState(null),f=tt(t,b=>d(b),c.onItemTextChange,b=>{var x;return(x=s.itemTextRefCallback)==null?void 0:x.call(s,b,c.value,c.disabled)}),p=u==null?void 0:u.textContent,y=g.useMemo(()=>h.jsx("option",{value:c.value,disabled:c.disabled,children:p},c.value),[c.disabled,c.value,p]),{onNativeOptionAdd:m,onNativeOptionRemove:v}=l;return gn(()=>(m(y),()=>v(y)),[m,v,y]),h.jsxs(h.Fragment,{children:[h.jsx(Oe.span,{id:c.textId,...a,ref:f}),c.isSelected&&i.valueNode&&!i.valueNodeHasChildren?Eu.createPortal(a.children,i.valueNode):null]})});tD.displayName=jl;var nD="SelectItemIndicator",rD=g.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return Z3(nD,n).isSelected?h.jsx(Oe.span,{"aria-hidden":!0,...r,ref:t}):null});rD.displayName=nD;var Ax="SelectScrollUpButton",oD=g.forwardRef((e,t)=>{const n=Qo(Ax,e.__scopeSelect),r=Px(Ax,e.__scopeSelect),[o,a]=g.useState(!1),i=tt(t,r.onScrollButtonChange);return gn(()=>{if(n.viewport&&n.isPositioned){let s=function(){const l=c.scrollTop>0;a(l)};const c=n.viewport;return s(),c.addEventListener("scroll",s),()=>c.removeEventListener("scroll",s)}},[n.viewport,n.isPositioned]),o?h.jsx(iD,{...e,ref:i,onAutoScroll:()=>{const{viewport:s,selectedItem:c}=n;s&&c&&(s.scrollTop=s.scrollTop-c.offsetHeight)}}):null});oD.displayName=Ax;var Tx="SelectScrollDownButton",aD=g.forwardRef((e,t)=>{const n=Qo(Tx,e.__scopeSelect),r=Px(Tx,e.__scopeSelect),[o,a]=g.useState(!1),i=tt(t,r.onScrollButtonChange);return gn(()=>{if(n.viewport&&n.isPositioned){let s=function(){const l=c.scrollHeight-c.clientHeight,u=Math.ceil(c.scrollTop)<l;a(u)};const c=n.viewport;return s(),c.addEventListener("scroll",s),()=>c.removeEventListener("scroll",s)}},[n.viewport,n.isPositioned]),o?h.jsx(iD,{...e,ref:i,onAutoScroll:()=>{const{viewport:s,selectedItem:c}=n;s&&c&&(s.scrollTop=s.scrollTop+c.offsetHeight)}}):null});aD.displayName=Tx;var iD=g.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...o}=e,a=Qo("SelectScrollButton",n),i=g.useRef(null),s=zf(n),c=g.useCallback(()=>{i.current!==null&&(window.clearInterval(i.current),i.current=null)},[]);return g.useEffect(()=>()=>c(),[c]),gn(()=>{var l,u;(u=(l=s().find(d=>d.ref.current===document.activeElement))==null?void 0:l.ref.current)==null||u.scrollIntoView({block:"nearest"})},[s]),h.jsx(Oe.div,{"aria-hidden":!0,...o,ref:t,style:{flexShrink:0,...o.style},onPointerDown:he(o.onPointerDown,()=>{i.current===null&&(i.current=window.setInterval(r,50))}),onPointerMove:he(o.onPointerMove,()=>{var l;(l=a.onItemLeave)==null||l.call(a),i.current===null&&(i.current=window.setInterval(r,50))}),onPointerLeave:he(o.onPointerLeave,()=>{c()})})}),Noe="SelectSeparator",sD=g.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return h.jsx(Oe.div,{"aria-hidden":!0,...r,ref:t})});sD.displayName=Noe;var Rx="SelectArrow",Poe=g.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,o=Vf(n),a=Go(Rx,n),i=Qo(Rx,n);return a.open&&i.position==="popper"?h.jsx(vd,{...o,...r,ref:t}):null});Poe.displayName=Rx;function cD(e){return e===""||e===void 0}var lD=g.forwardRef((e,t)=>{const{value:n,...r}=e,o=g.useRef(null),a=tt(t,o),i=L3(n);return g.useEffect(()=>{const s=o.current,c=window.HTMLSelectElement.prototype,l=Object.getOwnPropertyDescriptor(c,"value").set;if(i!==n&&l){const u=new Event("change",{bubbles:!0});l.call(s,n),s.dispatchEvent(u)}},[i,n]),h.jsx(nwe,{asChild:!0,children:h.jsx("select",{...r,ref:a,defaultValue:n})})});lD.displayName="BubbleSelect";function uD(e){const t=Ro(e),n=g.useRef(""),r=g.useRef(0),o=g.useCallback(i=>{const s=n.current+i;t(s),function c(l){n.current=l,window.clearTimeout(r.current),l!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(s)},[t]),a=g.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return g.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,o,a]}function dD(e,t,n){const r=t.length>1&&Array.from(t).every(s=>s===t[0])?t[0]:t,o=n?e.indexOf(n):-1;let a=koe(e,Math.max(o,0));r.length===1&&(a=a.filter(s=>s!==n));const i=a.find(s=>s.textValue.toLowerCase().startsWith(r.toLowerCase()));return i!==n?i:void 0}function koe(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var Aoe=F3,fD=$3,Toe=V3,Roe=U3,Ioe=H3,pD=W3,Doe=X3,hD=J3,mD=eD,Loe=tD,Foe=rD,yD=oD,gD=aD,vD=sD;const vo=Aoe,bo=Toe,Ir=g.forwardRef(({className:e,children:t,...n},r)=>h.jsxs(fD,{ref:r,className:J("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...n,children:[t,h.jsx(Roe,{asChild:!0,children:h.jsx(de,{name:"chevron-down",className:"h-4 w-4 opacity-50"})})]}));Ir.displayName=fD.displayName;const bD=g.forwardRef(({className:e,...t},n)=>h.jsx(yD,{ref:n,className:J("flex cursor-default items-center justify-center py-1",e),...t,children:h.jsx(de,{name:"chevron-up",className:"h-4 w-4"})}));bD.displayName=yD.displayName;const xD=g.forwardRef(({className:e,...t},n)=>h.jsx(gD,{ref:n,className:J("flex cursor-default items-center justify-center py-1",e),...t,children:h.jsx(de,{name:"chevron-down",className:"h-4 w-4"})}));xD.displayName=gD.displayName;const Dr=g.forwardRef(({className:e,children:t,position:n="popper",...r},o)=>h.jsx(Ioe,{children:h.jsxs(pD,{ref:o,className:J("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[h.jsx(bD,{}),h.jsx(Doe,{className:J("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),h.jsx(xD,{})]})}));Dr.displayName=pD.displayName;const Boe=g.forwardRef(({className:e,...t},n)=>h.jsx(hD,{ref:n,className:J("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));Boe.displayName=hD.displayName;const jn=g.forwardRef(({className:e,children:t,...n},r)=>h.jsxs(mD,{ref:r,className:J("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[h.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:h.jsx(Foe,{children:h.jsx(de,{name:"check",className:"h-4 w-4"})})}),h.jsx(Loe,{children:t})]}));jn.displayName=mD.displayName;const $oe=g.forwardRef(({className:e,...t},n)=>h.jsx(vD,{ref:n,className:J("-mx-1 my-1 h-px bg-muted",e),...t}));$oe.displayName=vD.displayName;let wD;Bn=g.memo(e=>{const{loading:t,...n}=e;return h.jsx(ut,{...n,disabled:e.disabled||t,children:t?h.jsx(de,{name:"loader-circle",className:"animate-spin"}):e.children})}),wD=[Fu.WebLLM];function zoe(e){var O;const{id:t,setDialog:n}=e,{t:r}=Ae("components"),{toast:o}=on(),a=qt(t),[i,s]=g.useState(""),[c,l]=g.useState(!1),[u,d]=g.useState(""),[f,p]=g.useState(Fu.WebLLM),[y,m]=g.useState(!1),[v,b]=g.useState(),x=Zn(k=>k.syncCachedLLMURLs),j=Zn(k=>k.cachedLLMURLs),{loading:w,createDatabaseLLM:_}=d3();g.useEffect(()=>{Zt(()=>import("./index-D7zprebX.js").then(async k=>(await k.__tla,k)),__vite__mapDeps([7,1,2,3,4,5,6])).then(async({functionCallingModelIds:k,prebuiltAppConfig:T})=>{const I=T.model_list;b({modelList:I,functionCallingModelIds:k})})},[]),g.useEffect(()=>{x()},[x]);const E=g.useMemo(()=>!(v!=null&&v.functionCallingModelIds)||!(v!=null&&v.modelList)?[]:((u?v==null?void 0:v.modelList.filter(k=>k.model_id.toLowerCase().includes(u.toLowerCase())):v==null?void 0:v.modelList)||[]).sort((k,T)=>{const I=j.some(U=>U.includes(k.model_id)),L=j.some(U=>U.includes(T.model_id));if(I&&!L)return-1;if(!I&&L)return 1;const D=ux.includes(k.model_id),z=ux.includes(T.model_id);if(D&&!z)return-1;if(!D&&z)return 1;const H=v==null?void 0:v.functionCallingModelIds.includes(k.model_id),F=v==null?void 0:v.functionCallingModelIds.includes(T.model_id);return H&&!F?-1:!H&&F?1:k.vram_required_MB&&T.vram_required_MB&&k.vram_required_MB!==T.vram_required_MB?k.vram_required_MB-T.vram_required_MB:k.model_id.localeCompare(T.model_id)}),[v==null?void 0:v.modelList,v==null?void 0:v.functionCallingModelIds,u,j]),S=g.useMemo(()=>{if(!(!i||!(v!=null&&v.modelList)))return v==null?void 0:v.modelList.find(k=>k.model_id===i)},[i,v==null?void 0:v.modelList]);g.useEffect(()=>{!(S!=null&&S.model_id)||!j||m(j.some(k=>k.includes(S.model_id)))},[j,S==null?void 0:S.model_id]);const C=g.useCallback(k=>k===1?nc.embedding:k===2?nc.VLM:nc.LLM,[]),M=g.useCallback(k=>{s(k),l(!1)},[]),P=g.useCallback(k=>{d(k)},[]),N=g.useCallback(k=>{p(k)},[]),R=async()=>{var k;if(a)try{await _(a,{name:i,model_type:C(S==null?void 0:S.model_type),function_calling:S!=null&&S.model_id?(k=v==null?void 0:v.functionCallingModelIds)==null?void 0:k.includes(S==null?void 0:S.model_id):!1}),n==null||n(!1)}catch{o({variant:"destructive",description:r("add_llm_card.errors.failed_to_create")})}finally{s("")}},A=g.useMemo(()=>E.map(k=>{var T;return h.jsxs(D3,{value:k.model_id,onSelect:M,children:[i===k.model_id?h.jsx(de,{name:"check",className:"mr-2 h-4 w-4"}):h.jsx("div",{className:"mr-2 h-4 w-4"}),h.jsxs("span",{className:"max-w-md",children:[h.jsxs("div",{className:"flex gap-2 mb-2",children:[h.jsx(Na,{name:k.model_id}),k.model_id]}),h.jsx("div",{className:"flex max-w-full flex-wrap gap-1",children:h.jsx(gl,{model:k,isFunctionCalling:((T=v==null?void 0:v.functionCallingModelIds)==null?void 0:T.includes(k.model_id))||!1,name:k.model_id,isCached:j.some(I=>I.includes(k.model_id))||!1})})]})]},k.model_id)}),[j,M,i,v==null?void 0:v.functionCallingModelIds,E]);return h.jsxs(Ft,{className:"max-w-lg",children:[h.jsx(fn,{children:h.jsx(wn,{children:r("add_llm_card.title")})}),h.jsxs(pn,{children:[h.jsxs("div",{className:"grid w-full gap-1.5",children:[h.jsx(Ge,{children:r("add_llm_card.provider")}),h.jsxs(vo,{value:f,onValueChange:N,children:[h.jsx(Ir,{className:"w-full mb-4",children:h.jsx(bo,{placeholder:r("add_llm_card.provider_select_placeholder")})}),h.jsx(Dr,{children:Object.values(wD).map(k=>h.jsx(jn,{value:k,children:r(`add_llm_card.providers.${k.toLowerCase()}`)},k))})]}),h.jsx(Ge,{children:r("add_llm_card.model_name")}),h.jsxs(zre,{open:c,onOpenChange:l,children:[h.jsx(xx,{asChild:!0,children:h.jsxs(ut,{variant:"outline",role:"combobox","aria-expanded":c,className:"w-full justify-between",children:[i?S==null?void 0:S.model_id:r("add_llm_card.select_model_placeholder"),h.jsx(de,{name:"chevrons-up-down",className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),h.jsx(x3,{className:"w-full p-0",children:h.jsxs(k3,{children:[h.jsx(A3,{onValueChange:P,placeholder:r("add_llm_card.search_placeholder")}),h.jsxs(T3,{children:[h.jsx(R3,{children:r("add_llm_card.no_model")}),h.jsx(I3,{children:A})]})]})})]})]}),S?h.jsxs("div",{className:"mt-4",children:[h.jsxs("div",{className:"mt-4 text-sm text-muted-foreground center flex max-w-full flex-wrap gap-1",children:[h.jsx(Na,{name:S.model_id,className:"mr-2"}),h.jsx(gl,{model:S,isFunctionCalling:((O=v==null?void 0:v.functionCallingModelIds)==null?void 0:O.includes(S.model_id))||!1,name:S.model_id,isCached:j.some(k=>k.includes(S.model_id))||!1})]}),h.jsxs("div",{className:"mt-2 text-sm text-muted-foreground",children:[h.jsx("span",{className:"font-bold mr-2",children:r("add_llm_card.model_url")}),S.model]}),h.jsxs("div",{className:"mt-2 text-sm text-muted-foreground center flex",children:[h.jsx("span",{className:"font-bold mr-2",children:r("add_llm_card.model_lib_url")}),S.model_lib]}),h.jsxs("div",{className:"mt-2 text-sm text-muted-foreground center flex",children:[h.jsx("span",{className:"font-bold mr-2",children:r("add_llm_card.metadata")}),JSON.stringify(S.overrides)]})]}):null]}),h.jsx(Ko,{className:"flex justify-between",children:h.jsx(Bn,{loading:w,disabled:!(i!=null&&i.length),onClick:R,className:"w-full",children:r(y?"add_llm_card.button_add":"add_llm_card.button_download_and_add")})})]})}const _D=()=>{const e=pt(a=>{var i;return(i=a.currentSession)==null?void 0:i.id}),[t,n]=g.useState(!1),r=ke(a=>a.createOrUpdateFlowNode),o=g.useCallback(async(a,i)=>{var s,c,l;try{if(!a||!e)throw new Error("Source or Session not found");n(!0);const u=((s=a.position)==null?void 0:s.x)||0,d=(((c=a.position)==null?void 0:c.y)||0)+(((l=a.measured)==null?void 0:l.height)||0),f=await ue("Prompt").save({content:i.content,prefix:i.prefix,role:i.role||Mn.System,status:Yr.Started,session_id:e,type:i.type||Nn.Chat});if(!f)throw new Error("Failed to save prompt");if(!await r({source_id:f.id,source_type:"Prompt",node_type:ae.Prompt,x:u,y:d+20}))throw new Error("Failed to save prompt node")}finally{n(!1)}},[e,r]);return{loading:t,createPrompt:o}},Voe={[Nn.Chat]:{label:"add_prompt_card.prompt_types.chat",value:Nn.Chat},[Nn.FewShotExample]:{label:"add_prompt_card.prompt_types.few_shot_example",value:Nn.FewShotExample}},Uoe={[Mn.System]:{label:"add_prompt_card.prompt_roles.system",value:Mn.System},[Mn.Human]:{label:"add_prompt_card.prompt_roles.human",value:Mn.Human},[Mn.AI]:{label:"add_prompt_card.prompt_roles.ai",value:Mn.AI}},Ix=g.memo(({defaultPromptContent:e,defaultPromptRole:t,defaultPromptType:n,hidePromptRole:r,hidePromptType:o,loading:a,onSubmit:i})=>{const[s,c]=g.useState(e||""),[l,u]=g.useState(n||Nn.Chat),[d,f]=g.useState(t),[p,y]=g.useState(""),{t:m}=Ae("components"),v=g.useCallback(_=>{c(_.target.value)},[]),b=g.useCallback(_=>{y(_.target.value)},[]),x=g.useCallback(_=>{_===Nn.FewShotExample&&c(`Question: {input}
Answer: {output}`),u(_)},[]),j=g.useCallback(_=>{f(_)},[]),w=async()=>{await i({content:s,role:d,prefix:p,type:l})&&(c(""),f(void 0),u("chat"),y(""))};return h.jsxs("div",{children:[h.jsxs("div",{className:"grid w-full gap-1.5",children:[o?void 0:h.jsxs(h.Fragment,{children:[h.jsx(Ge,{children:m("add_prompt_card.prompt_type")}),h.jsxs(vo,{value:l,onValueChange:x,children:[h.jsx(Ir,{className:"w-full mb-4",children:h.jsx(bo,{placeholder:m("add_prompt_card.type_select_placeholder")})}),h.jsx(Dr,{children:Object.values(Voe).map(_=>h.jsx(jn,{value:_.value,children:m(_.label)},_.value))})]})]}),r?void 0:h.jsxs(h.Fragment,{children:[h.jsx(Ge,{children:m("add_prompt_card.prompt_role")}),h.jsxs(vo,{value:d,onValueChange:j,children:[h.jsx(Ir,{className:"w-full mb-4",children:h.jsx(bo,{placeholder:m("add_prompt_card.role_select_placeholder")})}),h.jsx(Dr,{children:Object.values(Uoe).map(_=>h.jsx(jn,{value:_.value,children:m(_.label)},_.value))})]})]}),l===Nn.FewShotExample&&h.jsxs(h.Fragment,{children:[h.jsx(Ge,{children:m("add_prompt_card.prompt_prefix")}),h.jsx(so,{value:p,onChange:b,disabled:!1,className:"h-20",placeholder:m("add_prompt_card.placeholder"),id:"message"}),h.jsx(Ge,{children:m("add_prompt_card.prompt_content")}),h.jsxs("div",{className:"w-full border-0 text-gray-700 flex text-sm justify-end items-center",children:[h.jsx(de,{name:"info",className:"mr-2",size:14}),m("add_prompt_card.few_shot_example_note")]})]}),h.jsx(so,{value:s,onChange:v,disabled:!1,placeholder:m("add_prompt_card.placeholder"),id:"message"})]}),h.jsx("div",{children:h.jsx(Bn,{loading:a,disabled:!(s!=null&&s.length),onClick:w,className:"w-full mt-4",children:m("add_prompt_card.button")})})]})}),Hoe=g.memo(e=>{const{id:t,thread:n,setDialog:r}=e,{t:o}=Ae("components"),{toast:a}=on(),i=qt(t),{createPrompt:s,loading:c}=_D(),l=async u=>{if(i)try{if(!(u!=null&&u.content))throw new Error("Prompt data is missing");await s(i,{...u,content:u.content,thread:n}),r==null||r(!1)}catch(d){a({variant:"destructive",title:`${d}`})}};return h.jsxs(Ft,{className:"mw-full",children:[h.jsx(fn,{children:h.jsx(wn,{children:o("add_prompt_card.title")})}),h.jsx(pn,{children:h.jsx(Ix,{onSubmit:l,loading:c,defaultPromptRole:"system",defaultPromptType:"chat"})})]})}),Woe="0123456789abcdef",qoe=[8,4,4,4,12];function Dx(){return qoe.map(e=>rwe(Woe,e)()).join("-")}const Yoe=()=>{const e=pt(i=>{var s;return(s=i.currentSession)==null?void 0:s.id}),[t,n]=g.useState(!1),r=ke(i=>i.createOrUpdateFlowNode),o=g.useCallback((i,s,c,l)=>{var u;if(e){for(const d of s)(u=d.data)!=null&&u.length?o(i,d.data,c,d.id):c.push({name:d.name,type:d.type,enum:d.enum?JSON.stringify(d.enum):"",required:d.required,description:d.description,id:d.id||Dx(),parent_id:l,schema_id:i,session_id:e});return c}},[e]),a=g.useCallback(async(i,s)=>{var c,l,u;try{if(!i||!e)throw new Error("Source or Session not found");n(!0);const d=((c=i.position)==null?void 0:c.x)||0,f=(((l=i.position)==null?void 0:l.y)||0)+(((u=i.measured)==null?void 0:u.height)||0),p=await ue("Schema").save({name:"Untitled Schema",session_id:e});if(!p)throw new Error("Failed to save schema");const y=o(p.id,s,[],void 0);if(!(y!=null&&y.length))throw new Error("Failed to convert schema items");if(await ue("SchemaItem").save(y),!await r({source_id:p.id,source_type:"Schema",node_type:ae.Schema,x:d,y:f+20}))throw new Error("Failed to save schema node")}finally{n(!1)}},[e,o,r]);return{loading:t,createSchema:a}};var xo="Accordion",Koe=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[Lx,Xoe,Goe]=Nu(xo),[Hf,Nwe]=Fn(xo,[Goe,nC]),Fx=nC(),jD=V.forwardRef((e,t)=>{const{type:n,...r}=e,o=r,a=r;return h.jsx(Lx.Provider,{scope:e.__scopeAccordion,children:n==="multiple"?h.jsx(eae,{...a,ref:t}):h.jsx(Zoe,{...o,ref:t})})});jD.displayName=xo;var[ED,Qoe]=Hf(xo),[SD,Joe]=Hf(xo,{collapsible:!1}),Zoe=V.forwardRef((e,t)=>{const{value:n,defaultValue:r,onValueChange:o=()=>{},collapsible:a=!1,...i}=e,[s,c]=Jt({prop:n,defaultProp:r,onChange:o});return h.jsx(ED,{scope:e.__scopeAccordion,value:s?[s]:[],onItemOpen:c,onItemClose:V.useCallback(()=>a&&c(""),[a,c]),children:h.jsx(SD,{scope:e.__scopeAccordion,collapsible:a,children:h.jsx(CD,{...i,ref:t})})})}),eae=V.forwardRef((e,t)=>{const{value:n,defaultValue:r,onValueChange:o=()=>{},...a}=e,[i=[],s]=Jt({prop:n,defaultProp:r,onChange:o}),c=V.useCallback(u=>s((d=[])=>[...d,u]),[s]),l=V.useCallback(u=>s((d=[])=>d.filter(f=>f!==u)),[s]);return h.jsx(ED,{scope:e.__scopeAccordion,value:i,onItemOpen:c,onItemClose:l,children:h.jsx(SD,{scope:e.__scopeAccordion,collapsible:!0,children:h.jsx(CD,{...a,ref:t})})})}),[tae,Wf]=Hf(xo),CD=V.forwardRef((e,t)=>{const{__scopeAccordion:n,disabled:r,dir:o,orientation:a="vertical",...i}=e,s=V.useRef(null),c=tt(s,t),l=Xoe(n),u=Io(o)==="ltr",d=he(e.onKeyDown,f=>{var S;if(!Koe.includes(f.key))return;const p=f.target,y=l().filter(C=>{var M;return!((M=C.ref.current)!=null&&M.disabled)}),m=y.findIndex(C=>C.ref.current===p),v=y.length;if(m===-1)return;f.preventDefault();let b=m;const x=0,j=v-1,w=()=>{b=m+1,b>j&&(b=x)},_=()=>{b=m-1,b<x&&(b=j)};switch(f.key){case"Home":b=x;break;case"End":b=j;break;case"ArrowRight":a==="horizontal"&&(u?w():_());break;case"ArrowDown":a==="vertical"&&w();break;case"ArrowLeft":a==="horizontal"&&(u?_():w());break;case"ArrowUp":a==="vertical"&&_();break}const E=b%v;(S=y[E].ref.current)==null||S.focus()});return h.jsx(tae,{scope:n,disabled:r,direction:o,orientation:a,children:h.jsx(Lx.Slot,{scope:n,children:h.jsx(Oe.div,{...i,"data-orientation":a,ref:c,onKeyDown:r?void 0:d})})})}),qf="AccordionItem",[nae,Bx]=Hf(qf),OD=V.forwardRef((e,t)=>{const{__scopeAccordion:n,value:r,...o}=e,a=Wf(qf,n),i=Qoe(qf,n),s=Fx(n),c=ht(),l=r&&i.value.includes(r)||!1,u=a.disabled||e.disabled;return h.jsx(nae,{scope:n,open:l,disabled:u,triggerId:c,children:h.jsx(aC,{"data-orientation":a.orientation,"data-state":TD(l),...s,...o,ref:t,disabled:u,open:l,onOpenChange:d=>{d?i.onItemOpen(r):i.onItemClose(r)}})})});OD.displayName=qf;var MD="AccordionHeader",ND=V.forwardRef((e,t)=>{const{__scopeAccordion:n,...r}=e,o=Wf(xo,n),a=Bx(MD,n);return h.jsx(Oe.h3,{"data-orientation":o.orientation,"data-state":TD(a.open),"data-disabled":a.disabled?"":void 0,...r,ref:t})});ND.displayName=MD;var $x="AccordionTrigger",PD=V.forwardRef((e,t)=>{const{__scopeAccordion:n,...r}=e,o=Wf(xo,n),a=Bx($x,n),i=Joe($x,n),s=Fx(n);return h.jsx(Lx.ItemSlot,{scope:n,children:h.jsx(B7,{"aria-disabled":a.open&&!i.collapsible||void 0,"data-orientation":o.orientation,id:a.triggerId,...s,...r,ref:t})})});PD.displayName=$x;var kD="AccordionContent",AD=V.forwardRef((e,t)=>{const{__scopeAccordion:n,...r}=e,o=Wf(xo,n),a=Bx(kD,n),i=Fx(n);return h.jsx($7,{role:"region","aria-labelledby":a.triggerId,"data-orientation":o.orientation,...i,...r,ref:t,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...e.style}})});AD.displayName=kD;function TD(e){return e?"open":"closed"}let RD;VE=jD,UE=OD,RD=ND,Sm=PD,Cm=AD;const ID=VE,zx=g.forwardRef(({className:e,...t},n)=>h.jsx(UE,{ref:n,className:J("border-b",e),...t}));zx.displayName="AccordionItem";const Vx=g.forwardRef(({className:e,children:t,...n},r)=>h.jsx(RD,{className:"flex",children:h.jsxs(Sm,{ref:r,className:J("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",e),...n,children:[t,h.jsx(de,{name:"chevron-down",className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));Vx.displayName=Sm.displayName;const Ux=g.forwardRef(({className:e,children:t,...n},r)=>h.jsx(Cm,{ref:r,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...n,children:h.jsx("div",{className:J("pb-4 pt-0",e),children:t})}));Ux.displayName=Cm.displayName;var Hx="Checkbox",[rae,Pwe]=Fn(Hx),[oae,aae]=rae(Hx),DD=g.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:r,checked:o,defaultChecked:a,required:i,disabled:s,value:c="on",onCheckedChange:l,form:u,...d}=e,[f,p]=g.useState(null),y=tt(t,w=>p(w)),m=g.useRef(!1),v=f?u||!!f.closest("form"):!0,[b=!1,x]=Jt({prop:o,defaultProp:a,onChange:l}),j=g.useRef(b);return g.useEffect(()=>{const w=f==null?void 0:f.form;if(w){const _=()=>x(j.current);return w.addEventListener("reset",_),()=>w.removeEventListener("reset",_)}},[f,x]),h.jsxs(oae,{scope:n,state:b,disabled:s,children:[h.jsx(Oe.button,{type:"button",role:"checkbox","aria-checked":Jo(b)?"mixed":b,"aria-required":i,"data-state":BD(b),"data-disabled":s?"":void 0,disabled:s,value:c,...d,ref:y,onKeyDown:he(e.onKeyDown,w=>{w.key==="Enter"&&w.preventDefault()}),onClick:he(e.onClick,w=>{x(_=>Jo(_)?!0:!_),v&&(m.current=w.isPropagationStopped(),m.current||w.stopPropagation())})}),v&&h.jsx(iae,{control:f,bubbles:!m.current,name:r,value:c,checked:b,required:i,disabled:s,form:u,style:{transform:"translateX(-100%)"},defaultChecked:Jo(a)?!1:a})]})});DD.displayName=Hx;var LD="CheckboxIndicator",FD=g.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:r,...o}=e,a=aae(LD,n);return h.jsx(Cn,{present:r||Jo(a.state)||a.state===!0,children:h.jsx(Oe.span,{"data-state":BD(a.state),"data-disabled":a.disabled?"":void 0,...o,ref:t,style:{pointerEvents:"none",...e.style}})})});FD.displayName=LD;var iae=e=>{const{control:t,checked:n,bubbles:r=!0,defaultChecked:o,...a}=e,i=g.useRef(null),s=L3(n),c=mO(t);g.useEffect(()=>{const u=i.current,d=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(d,"checked").set;if(s!==n&&f){const p=new Event("click",{bubbles:r});u.indeterminate=Jo(n),f.call(u,Jo(n)?!1:n),u.dispatchEvent(p)}},[s,n,r]);const l=g.useRef(Jo(n)?!1:n);return h.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:o??l.current,...a,tabIndex:-1,ref:i,style:{...e.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function Jo(e){return e==="indeterminate"}function BD(e){return Jo(e)?"indeterminate":e?"checked":"unchecked"}om=DD,PE=FD;const $D=g.forwardRef(({className:e,...t},n)=>h.jsx(om,{ref:n,className:J("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:h.jsx(PE,{className:J("flex items-center justify-center text-current"),children:h.jsx(de,{name:"check",className:"h-4 w-4"})})}));$D.displayName=om.displayName;const zD=g.memo(({setData:e,data:t,id:n})=>{const{t:r}=Ae("components"),[o,a]=g.useState({name:"",description:"",type:"string",required:!1,data:[]}),i=g.useMemo(()=>n&&t.find(m=>m.id===n)||o,[t,o,n]),s=g.useCallback(m=>{m.target.value&&!/^[a-zA-Z_][a-zA-Z0-9_]*$/.test(m.target.value)||(n?e(v=>[...v.map(b=>b.id===n?{...b,name:m.target.value||""}:b)]):a(v=>({...v,name:m.target.value||""})))},[n,e]),c=g.useCallback(m=>{n?e(v=>[...v.map(b=>b.id===n?{...b,description:m.target.value||""}:b)]):a(v=>({...v,description:m.target.value||""}))},[n,e]),l=g.useCallback(m=>{n?e(v=>[...v.map(b=>b.id===n?{...b,type:m||""}:b)]):a(v=>({...v,type:m||"string"}))},[n,e]),u=g.useCallback(m=>{n?e(v=>[...v.map(b=>b.id===n?{...b,required:!!m||!1}:b)]):a(v=>({...v,required:!!m||!1}))},[n,e]),d=g.useCallback(m=>{n?e(v=>[...v.map(b=>b.id===n?{...b,enum:m.target.value||""}:b)]):a(v=>({...v,enum:m.target.value||""}))},[n,e]),f=g.useCallback(()=>{if(t.find(m=>m.name===o.name))return Ws({variant:"destructive",content:"Name already exists"});o.id=Dx(),e(m=>[...m,{...o}]),a({name:"",description:"",type:"string",required:!1,id:Dx(),parent:n||void 0,data:[]})},[t,o,e,n]),p=g.useCallback(m=>{e(v=>[...v.map(b=>b.id===n?{...b,data:m(b.data||[])}:b)])},[n,e]),y=["object","array"].includes(i.type);return h.jsxs("div",{className:"w-full p-1",children:[h.jsxs("div",{children:[h.jsx(Ge,{children:r("add_schema_card.field.name")}),h.jsx(sn,{id:"name",onChange:s,placeholder:r("add_schema_card.field.name_placeholder"),value:(i==null?void 0:i.name)||""})]}),h.jsxs("div",{children:[h.jsx(Ge,{children:r("add_schema_card.field.description")}),h.jsx(sn,{id:"description",placeholder:r("add_schema_card.field.description_placeholder"),onChange:c,value:(i==null?void 0:i.description)||""})]}),h.jsxs("div",{children:[h.jsx(Ge,{children:r("add_schema_card.field.type")}),h.jsxs(vo,{onValueChange:l,value:(i==null?void 0:i.type)||"",children:[h.jsx(Ir,{children:h.jsx(bo,{placeholder:r("add_schema_card.field.type_placeholder")})}),h.jsxs(Dr,{children:[h.jsx(jn,{value:"string",children:r("add_schema_card.types.string")}),h.jsx(jn,{value:"boolean",children:r("add_schema_card.types.boolean")}),h.jsx(jn,{value:"number",children:r("add_schema_card.types.number")}),h.jsx(jn,{value:"object",children:r("add_schema_card.types.object")}),h.jsx(jn,{value:"array",children:r("add_schema_card.types.array")})]})]})]}),h.jsxs("div",{className:"flex items-center h-10",children:[h.jsx(Ge,{children:r("add_schema_card.field.required")}),h.jsx($D,{className:"ml-2","aria-label":"Select row",onCheckedChange:u,checked:i==null?void 0:i.required})]}),y?h.jsxs("div",{className:"mt-2 flex flex-col gap-2",children:[h.jsx(Ge,{children:r("add_schema_card.children")}),h.jsx(VD,{data:(i==null?void 0:i.data)||[],setData:p})]}):null,(i==null?void 0:i.type)==="enum"?h.jsxs("div",{className:"mt-2 flex flex-col gap-2",children:[h.jsx(Ge,{children:r("add_schema_card.field.enum")}),h.jsx(sn,{id:"enum",onChange:d,placeholder:"Enum"})]}):null,n?null:h.jsx("div",{className:"w-full flex justify-end mt-2",children:h.jsx(ut,{variant:"secondary",disabled:!i.name||!i.description||!i.type,onClick:f,className:"w-full",children:r("add_schema_card.field.add_field")})})]})}),VD=g.memo(({data:e,setData:t})=>h.jsxs(ID,{type:"single",collapsible:!0,children:[e.map(n=>h.jsxs(zx,{value:`${n.id}`,children:[h.jsx(Vx,{children:n.name}),h.jsx(Ux,{children:h.jsx(zD,{setData:t,data:e,id:n.id})})]},n.id||"new")),h.jsx(Ft,{className:"p-2 mt-4",children:h.jsx(zD,{setData:t,data:e})})]})),sae=g.memo(e=>{const{t}=Ae("components"),{id:n}=e,r=qt(n),[o,a]=g.useState([]),{createSchema:i,loading:s}=Yoe(),c=async()=>{if(r&&(o!=null&&o.length))try{await i(r,o),a([])}catch(l){Ws({variant:"destructive",title:`${l}`})}};return h.jsxs(Ft,{className:"max-w-lg",children:[h.jsx(fn,{children:h.jsx(wn,{children:t("add_schema_card.title")})}),h.jsx(pn,{className:"min-w-96",children:h.jsx(VD,{setData:a,data:o})}),h.jsx(Ko,{className:"flex justify-between",children:h.jsx(Bn,{loading:s,disabled:!(o!=null&&o.length),onClick:c,className:"w-full",children:t("add_schema_card.create")})})]})}),UD=()=>{const e=pt(a=>{var i;return(i=a.currentSession)==null?void 0:i.id}),[t,n]=g.useState(!1),r=ke(a=>a.createOrUpdateFlowNode),o=g.useCallback(async(a,i,s)=>{var c,l,u;try{if(!a||!e)throw new Error("Source or Session not found");n(!0);const d=((c=a.position)==null?void 0:c.x)||0,f=(((l=a.position)==null?void 0:l.y)||0)+(((u=a.measured)==null?void 0:u.height)||0),p=owe(i,s),y=await ue("CSVData").save({headers:p.headers,csv:p.data,session_id:e});if(!y)throw new Error("Failed to save");if(!await r({source_id:y.id,source_type:"CSVData",node_type:ae.CSVData,x:d,y:f+20}))throw new Error("Failed to save node")}finally{n(!1)}},[e,r]);return{loading:t,createCSVData:o}},Yf=g.forwardRef(({className:e,...t},n)=>h.jsx("div",{className:"relative w-full overflow-auto",children:h.jsx("table",{ref:n,className:J("w-full caption-bottom text-sm",e),...t})}));Yf.displayName="Table";const Kf=g.forwardRef(({className:e,...t},n)=>h.jsx("thead",{ref:n,className:J("[&_tr]:border-b",e),...t}));Kf.displayName="TableHeader";const Xf=g.forwardRef(({className:e,...t},n)=>h.jsx("tbody",{ref:n,className:J("[&_tr:last-child]:border-0",e),...t}));Xf.displayName="TableBody";const cae=g.forwardRef(({className:e,...t},n)=>h.jsx("tfoot",{ref:n,className:J("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));cae.displayName="TableFooter";const Ra=g.forwardRef(({className:e,...t},n)=>h.jsx("tr",{ref:n,className:J("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));Ra.displayName="TableRow";const Zi=g.forwardRef(({className:e,...t},n)=>h.jsx("th",{ref:n,className:J("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));Zi.displayName="TableHead";const es=g.forwardRef(({className:e,...t},n)=>h.jsx("td",{ref:n,className:J("align-middle [&:has([role=checkbox])]:pr-0",e),...t}));es.displayName="TableCell";const lae=g.forwardRef(({className:e,...t},n)=>h.jsx("caption",{ref:n,className:J("mt-4 text-sm text-muted-foreground",e),...t}));lae.displayName="TableCaption";function uae({data:e}){const{t}=Ae("components");return h.jsxs(Yf,{className:"w-full",children:[h.jsx(Kf,{children:h.jsxs(Ra,{children:[h.jsx(Zi,{children:t("add_few_shot_example_card.input")}),h.jsx(Zi,{children:t("add_few_shot_example_card.output")})]})}),h.jsx(Xf,{children:e==null?void 0:e.map((n,r)=>h.jsxs(Ra,{children:[h.jsx(es,{className:"p-4",children:n.input}),h.jsx(es,{className:"p-4",children:n.output})]},`${n.input}_${n.output}_${r}`))})]})}const dae=g.memo(e=>{const{id:t}=e,{t:n}=Ae("components"),[r,o]=g.useState([]),[a,i]=g.useState(""),[s,c]=g.useState(""),l=qt(t),{createCSVData:u,loading:d}=UD(),f=()=>{o(y=>[...y,{input:a,output:s}]),i(""),c("")},p=async()=>{l&&await u(l,["input","output"],r.map(y=>[y.input,y.output]))};return h.jsxs(Ft,{className:"mw-full",children:[h.jsx(fn,{children:h.jsx(wn,{children:n("add_few_shot_example_card.title")})}),h.jsxs(pn,{children:[h.jsxs("div",{className:"flex flex-col space-y-1.5",children:[h.jsx(Ge,{htmlFor:"name",children:n("add_few_shot_example_card.input")}),h.jsx(sn,{value:a,onChange:y=>i(y.target.value||""),id:"name",placeholder:n("add_few_shot_example_card.input_placeholder")})]}),h.jsxs("div",{className:"flex flex-col space-y-1.5 mt-3",children:[h.jsx(Ge,{htmlFor:"name",children:n("add_few_shot_example_card.output")}),h.jsx(so,{value:s,onChange:y=>c(y.target.value||""),placeholder:n("add_few_shot_example_card.output_placeholder")})]}),h.jsx("div",{className:"w-full flex mt-4 justify-end",children:h.jsx(ut,{disabled:!a||!s,onClick:f,className:"w-40",children:n("add_few_shot_example_card.add")})}),h.jsx(uae,{data:r||[]})]}),h.jsx(Ko,{className:"flex justify-between",children:h.jsx(Bn,{loading:d,disabled:!(r!=null&&r.length),onClick:p,className:"w-full",children:n("add_few_shot_example_card.create")})})]})}),fae=()=>{const e=pt(i=>{var s;return(s=i.currentSession)==null?void 0:s.id}),[t,n]=g.useState(!1),r=ke(i=>i.createOrUpdateFlowNode),o=ke(i=>i.createOrUpdateFlowEdge),a=g.useCallback(async(i,s,c)=>{var l,u,d;try{if(!i||!e)throw new Error("Source or Session not found");if(!s.name||!s.description)throw new Error("Name is required");n(!0);const f=((l=i.position)==null?void 0:l.x)||0,p=(((u=i.position)==null?void 0:u.y)||0)+(((d=i.measured)==null?void 0:d.height)||0),y=await ue("ToolDefinition").save({...s,name:`${s.name}`,description:`${s.description}`,session_id:e});if(!y)throw new Error("Failed create tool.");const m=await r({source_id:y.id,source_type:"ToolDefinition",node_type:ae.ToolDefinition,x:f,y:p+20});if(!m)throw new Error("Failed to save node");c!=null&&c.schemaNode&&await o({source:c.schemaNode.id,target:m.id})}finally{n(!1)}},[e,r,o]);return{loading:t,createTool:a}},pae=g.memo(e=>{const{t}=Ae("components"),{toast:n}=on(),{id:r}=e,o=qt(r),[a,i]=g.useState(""),[s,c]=g.useState(""),{createTool:l,loading:u}=fae(),d=y=>{i(y.target.value)},f=y=>{c(y.target.value)},p=async()=>{if(o&&a&&s)try{await l(o,{name:a,description:s}),i(""),c("")}catch(y){Wr(y),n({variant:"destructive",title:t("add_tool_card.errors.create_tool_failed")})}};return h.jsxs(Ft,{className:"mw-full",children:[h.jsx(fn,{children:h.jsx(wn,{children:t("add_tool_card.title")})}),h.jsxs(pn,{children:[h.jsxs("div",{className:"flex flex-col space-y-1.5",children:[h.jsx(Ge,{htmlFor:"name",children:t("add_tool_card.tool_name")}),h.jsx(sn,{onChange:d,id:"name",placeholder:t("add_tool_card.name_placeholder")})]}),h.jsxs("div",{className:"flex flex-col space-y-1.5 mt-3",children:[h.jsx(Ge,{htmlFor:"name",children:t("add_tool_card.tool_description")}),h.jsx(so,{onChange:f,placeholder:t("add_tool_card.description_placeholder")})]})]}),h.jsx(Ko,{className:"flex justify-between",children:h.jsx(Bn,{loading:u,onClick:p,className:"w-full",children:t("add_tool_card.create")})})]})}),hae=()=>{const e=pt(i=>{var s;return(s=i.currentSession)==null?void 0:s.id}),[t,n]=g.useState(!1),r=ke(i=>i.createOrUpdateFlowNode),o=ke(i=>i.createOrUpdateFlowEdge),a=g.useCallback(async(i,s,c)=>{var l,u,d;try{if(!(s!=null&&s.name)||!i||!e)throw new Error("Source or Session not found");n(!0);const f=((l=i.position)==null?void 0:l.x)||0,p=(((u=i.position)==null?void 0:u.y)||0)+(((d=i.measured)==null?void 0:d.height)||0),y=await ue("JSONLData").save({headers:awe(["content","embedding","metadata"]),jsonl:"",session_id:e});if(!y)throw new Error("Failed to save databaseSource");const m=await r({source_id:y.id,source_type:"JSONLData",node_type:ae.JSONLData,x:f+80,y:p+30});if(!m)throw new Error("Failed to save databaseSource node");const v=await ue("VectorDatabase").save({...s,name:`${s.name}`,type:s.type||iwe.Local,storage:s.storage||l$.DataNode,provider:s.provider||u$.Memory,session_id:e,metadata:c?JSON.stringify({textSplitter:c}):void 0});if(!v)throw new Error("Failed to save vectorDatabase");const b=await r({source_id:v.id,source_type:"VectorDatabase",node_type:ae.VectorDatabase,x:f,y:p+30});if(!b)throw new Error("Failed to save vectorDatabase node");return await o({source:m.id,target:b.id}),{vectorDatabase:v,vectorDatabaseNode:b}}finally{n(!1)}},[e,r,o]);return{loading:t,createVectorDatabase:a}},El=[u$.Memory],Sl=[l$.DataNode],mae=["TokenTextSplitter","CharacterTextSplitter","RecursiveCharacterTextSplitter"],yae=g.memo(e=>{const{t}=Ae("components"),{id:n}=e,r=qt(n),{toast:o}=on(),[a,i]=g.useState(""),[s,c]=g.useState(El[0]),[l,u]=g.useState(Sl[0]),[d,f]=g.useState({}),{loading:p,createVectorDatabase:y}=hae(),m=g.useCallback(E=>{c(E)},[]),v=g.useCallback(E=>{u(E)},[]),b=g.useCallback(E=>{f(S=>({...S,type:E,chunkSize:500,chunkOverlap:40}))},[]),x=g.useCallback(E=>{i(E.target.value||"")},[]),j=g.useCallback(E=>{f(S=>({...S,chunkSize:Number(E.target.value)}))},[]),w=g.useCallback(E=>{f(S=>({...S,chunkOverlap:Number(E.target.value)}))},[]),_=async()=>{try{if(!r)return;await y(r,{name:a,provider:s,storage:l},d!=null&&d.type?{type:d.type,chunkSize:d.chunkSize||500,chunkOverlap:d.chunkOverlap||0}:void 0),i(""),f({})}catch{o({variant:"destructive",description:t("create_vector_database_card.errors.create_failed")})}};return h.jsxs(Ft,{className:"mw-full",children:[h.jsx(fn,{children:h.jsx(wn,{children:t("create_vector_database_card.title")})}),h.jsx(pn,{children:h.jsxs("div",{className:"grid w-full gap-1.5",children:[h.jsx(Ge,{children:t("create_vector_database_card.name")}),h.jsx(sn,{className:"mb-4",value:a,onChange:x}),(Sl==null?void 0:Sl.length)>1?h.jsxs(h.Fragment,{children:[h.jsx(Ge,{children:t("create_vector_database_card.storage_type")}),h.jsxs(vo,{value:l,onValueChange:v,children:[h.jsx(Ir,{className:"w-full mb-4",children:h.jsx(bo,{placeholder:t("create_vector_database_card.provider_select_placeholder")})}),h.jsx(Dr,{children:Object.values(Sl).map(E=>h.jsx(jn,{value:E,children:t(`create_vector_database_card.storage_types.${E.toLowerCase()}`)},E))})]})]}):void 0,(El==null?void 0:El.length)>1?h.jsxs(h.Fragment,{children:[h.jsx(Ge,{children:t("create_vector_database_card.provider")}),h.jsxs(vo,{value:s,onValueChange:m,children:[h.jsx(Ir,{className:"w-full mb-4",children:h.jsx(bo,{placeholder:t("create_vector_database_card.provider_select_placeholder")})}),h.jsx(Dr,{children:Object.values(El).map(E=>h.jsx(jn,{value:E,children:t(`create_vector_database_card.providers.${E.toLowerCase()}`)},E))})]})]}):void 0,h.jsx(Ge,{children:t("create_vector_database_card.text_splitter")}),h.jsxs(vo,{value:d.type,onValueChange:b,children:[h.jsx(Ir,{className:"w-full mb-4",children:h.jsx(bo,{placeholder:t("create_vector_database_card.text_splitter_select_placeholder")})}),h.jsx(Dr,{children:Object.values(mae).map(E=>h.jsx(jn,{value:E,children:t(`create_vector_database_card.text_splitters.${E.toLowerCase()}`)},E))})]}),d.type?h.jsxs(Ft,{children:[h.jsx(fn,{children:h.jsx(wn,{children:t("create_vector_database_card.text_splitter_configuration")})}),h.jsxs(pn,{children:[h.jsx(Ge,{children:t("create_vector_database_card.text_splitter_chunksize")}),h.jsx(sn,{value:d.chunkSize,onChange:j,placeholder:t("create_vector_database_card.text_splitter_chunksize_placeholder")}),h.jsx(Ge,{children:t("create_vector_database_card.text_splitter_chunkoverlap")}),h.jsx(sn,{value:d.chunkOverlap,onChange:w,placeholder:t("create_vector_database_card.text_splitter_chunkoverlap_placeholder")})]})]}):void 0]})}),h.jsx(Ko,{className:"flex justify-between",children:h.jsx(Bn,{disabled:!d.type||!a,loading:p,onClick:_,className:"w-full",children:t("create_vector_database_card.create")})})]})}),gae=e=>g.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"512.000000pt",height:"512.000000pt",viewBox:"64 64 384.000000 384.000000",preserveAspectRatio:"xMidYMid meet",fill:"#000000",...e},g.createElement("g",{transform:"translate(0.000000,512.000000) scale(0.100000,-0.100000)",stroke:"none"},g.createElement("path",{d:"M1953 3948 c-13 -21 -16 -289 -4 -369 15 -97 39 -193 62 -247 l18 -42 -69 -133 -69 -132 32 -22 c18 -12 40 -25 49 -28 24 -9 13 -25 -18 -25 -13 0 -24 -4 -24 -9 0 -13 40 -60 61 -71 10 -6 107 -15 215 -21 175 -9 198 -8 214 6 10 9 33 18 51 21 31 4 40 -1 92 -52 64 -63 70 -88 25 -114 -22 -12 -33 -12 -58 -3 -34 13 -41 0 -9 -17 24 -13 73 -5 89 15 10 12 17 11 43 -6 41 -24 59 -24 88 2 l24 20 -28 -17 c-26 -16 -31 -16 -62 -1 -58 27 -55 54 11 120 65 65 90 71 145 34 31 -20 41 -21 114 -15 44 4 129 10 190 14 107 6 110 7 142 39 39 39 42 55 8 55 -37 0 -31 17 14 40 22 11 42 24 46 30 7 11 -13 51 -90 184 -54 95 -54 95 -39 131 8 20 27 84 41 143 24 95 27 126 28 284 0 125 -4 180 -12 189 -30 30 -262 -126 -372 -250 l-62 -70 -42 16 c-67 25 -247 28 -332 6 l-70 -19 -86 86 c-96 96 -180 160 -272 207 -70 37 -73 38 -84 21z m1117 -261 c0 -2 -9 -14 -20 -27 -11 -13 -20 -19 -20 -15 0 5 7 17 17 27 15 17 23 22 23 15z m-830 -97 c6 -11 7 -20 2 -20 -6 0 -12 9 -15 20 -3 11 -3 20 -1 20 2 0 8 -9 14 -20z m744 -15 c-9 -14 -18 -25 -21 -25 -5 0 5 18 20 38 17 22 18 13 1 -13z m-654 -534 c0 -27 4 -61 10 -75 8 -21 7 -26 -6 -26 -38 0 -100 67 -119 128 -6 21 -4 22 54 22 l61 0 0 -49z m700 39 c0 -44 -80 -140 -117 -140 -12 0 -14 7 -9 31 3 17 6 51 6 75 l0 44 60 0 c35 0 60 -4 60 -10z m-587 -35 c15 -14 27 -30 27 -34 0 -18 -42 -60 -69 -69 -29 -10 -30 -10 -20 14 5 14 9 45 9 70 0 51 12 56 53 19z m411 -37 c3 -34 4 -64 1 -66 -15 -15 -85 53 -85 82 0 7 61 46 71 46 3 0 9 -28 13 -62z"}),g.createElement("path",{d:"M1590 3717 c0 -2 15 -16 33 -33 l32 -29 -29 33 c-28 30 -36 37 -36 29z"}),g.createElement("path",{d:"M1723 2863 c26 -2 68 -2 95 0 26 2 4 3 -48 3 -52 0 -74 -1 -47 -3z"}),g.createElement("path",{d:"M3403 2863 c31 -2 83 -2 115 0 31 2 5 3 -58 3 -63 0 -89 -1 -57 -3z"}),g.createElement("path",{d:"M3258 2853 c6 -2 18 -2 25 0 6 3 1 5 -13 5 -14 0 -19 -2 -12 -5z"}),g.createElement("path",{d:"M2010 2830 c4 -8 20 -26 35 -40 l27 -25 -24 -6 c-16 -4 -7 -7 32 -13 58 -7 245 20 305 44 30 12 30 12 7 21 -23 9 -190 25 -324 32 -57 2 -65 1 -58 -13z"}),g.createElement("path",{d:"M3165 2844 c-148 -9 -306 -28 -293 -35 8 -6 -3 -9 -32 -10 -39 -1 -36 -3 25 -11 39 -5 79 -13 90 -18 33 -15 173 -32 197 -24 13 4 37 7 53 7 29 0 29 0 3 4 -33 5 -35 14 -7 39 29 26 44 55 27 52 -7 -1 -35 -3 -63 -4z"}),g.createElement("path",{d:"M2300 2749 c-63 -10 -130 -19 -147 -20 -37 -3 -40 -7 -17 -24 14 -9 -3 -19 -100 -60 -63 -27 -114 -51 -112 -53 3 -2 57 19 121 47 l117 50 41 -30 c51 -37 105 -61 121 -53 6 3 -11 -14 -39 -38 -172 -148 -266 -262 -325 -392 -16 -35 -36 -66 -45 -70 -9 -3 -55 -6 -102 -6 -94 0 -130 -16 -158 -70 -20 -39 -19 -80 10 -341 32 -287 32 -264 -5 -242 -56 33 -110 97 -139 168 -43 104 -99 136 -175 100 -122 -58 -74 -289 92 -450 65 -63 155 -118 231 -140 l59 -18 6 -56 c4 -31 15 -71 26 -89 39 -64 1 -62 962 -62 848 0 874 1 905 20 61 37 61 34 119 556 58 521 58 539 12 581 -44 40 -62 43 -242 43 l-176 0 -40 82 c-73 146 -155 247 -294 356 l-77 61 43 22 c23 12 60 33 81 47 32 21 41 23 63 13 36 -16 44 -13 12 5 -32 17 -36 31 -10 37 9 3 -2 5 -24 6 -23 0 -77 7 -120 15 -90 16 -164 26 -164 21 0 -2 31 -13 70 -25 63 -20 69 -23 60 -41 -23 -42 -111 -99 -194 -124 -99 -30 -148 -31 -236 -5 -73 22 -182 87 -200 119 -12 23 -15 21 85 60 59 24 54 24 -95 0z m1414 -684 c35 -23 56 -65 56 -112 1 -65 -91 -906 -103 -947 -7 -22 -24 -48 -40 -60 -28 -21 -34 -21 -900 -24 -851 -2 -873 -2 -904 17 -18 11 -39 30 -47 43 -15 23 -39 208 -71 538 -9 85 -22 211 -30 280 -22 184 -21 194 19 238 34 37 35 37 133 43 54 4 494 6 979 4 823 -2 883 -4 908 -20z"}),g.createElement("path",{d:"M1973 2743 c9 -2 23 -2 30 0 6 3 -1 5 -18 5 -16 0 -22 -2 -12 -5z"}),g.createElement("path",{d:"M3263 2743 c9 -2 23 -2 30 0 6 3 -1 5 -18 5 -16 0 -22 -2 -12 -5z"}),g.createElement("path",{d:"M1908 2733 c6 -2 18 -2 25 0 6 3 1 5 -13 5 -14 0 -19 -2 -12 -5z"}),g.createElement("path",{d:"M2435 2730 c-3 -5 -1 -10 4 -10 6 0 11 5 11 10 0 6 -2 10 -4 10 -3 0 -8 -4 -11 -10z"}),g.createElement("path",{d:"M3328 2733 c6 -2 18 -2 25 0 6 3 1 5 -13 5 -14 0 -19 -2 -12 -5z"}),g.createElement("path",{d:"M1848 2723 c6 -2 18 -2 25 0 6 3 1 5 -13 5 -14 0 -19 -2 -12 -5z"}),g.createElement("path",{d:"M3383 2723 c9 -2 23 -2 30 0 6 3 -1 5 -18 5 -16 0 -22 -2 -12 -5z"}),g.createElement("path",{d:"M1798 2713 c6 -2 18 -2 25 0 6 3 1 5 -13 5 -14 0 -19 -2 -12 -5z"}),g.createElement("path",{d:"M3438 2713 c7 -3 16 -2 19 1 4 3 -2 6 -13 5 -11 0 -14 -3 -6 -6z"}),g.createElement("path",{d:"M1738 2703 c6 -2 18 -2 25 0 6 3 1 5 -13 5 -14 0 -19 -2 -12 -5z"}),g.createElement("path",{d:"M3488 2703 c7 -3 16 -2 19 1 4 3 -2 6 -13 5 -11 0 -14 -3 -6 -6z"}),g.createElement("path",{d:"M1688 2693 c6 -2 18 -2 25 0 6 3 1 5 -13 5 -14 0 -19 -2 -12 -5z"}),g.createElement("path",{d:"M3538 2693 c7 -3 16 -2 19 1 4 3 -2 6 -13 5 -11 0 -14 -3 -6 -6z"}),g.createElement("path",{d:"M3170 2660 c8 -5 20 -10 25 -10 6 0 3 5 -5 10 -8 5 -19 10 -25 10 -5 0 -3 -5 5 -10z"}),g.createElement("path",{d:"M3230 2635 c14 -8 30 -14 35 -14 6 0 -1 6 -15 14 -14 8 -29 14 -35 14 -5 0 1 -6 15 -14z"}),g.createElement("path",{d:"M3349 2584 c41 -19 76 -33 78 -31 4 5 -133 67 -145 66 -4 0 26 -16 67 -35z"}),g.createElement("path",{d:"M1860 2570 c-8 -5 -10 -10 -5 -10 6 0 17 5 25 10 8 5 11 10 5 10 -5 0 -17 -5 -25 -10z"}),g.createElement("path",{d:"M1764 2524 c-18 -14 -18 -14 6 -3 31 14 36 19 24 19 -6 0 -19 -7 -30 -16z"}),g.createElement("path",{d:"M3470 2530 c8 -5 20 -10 25 -10 6 0 3 5 -5 10 -8 5 -19 10 -25 10 -5 0 -3 -5 5 -10z"})));function vae({data:e}){const{t}=Ae("components");return h.jsxs(Yf,{className:"w-full",children:[h.jsx(Kf,{children:h.jsx(Ra,{children:h.jsx(Zi,{children:t("add_text_data.text")})})}),h.jsx(Xf,{children:e==null?void 0:e.map((n,r)=>h.jsx(Ra,{children:h.jsx(es,{className:"p-4",children:n.text})},`${n.text}_${r}`))})]})}const bae=g.memo(e=>{const{id:t}=e,{t:n}=Ae("components"),[r,o]=g.useState([]),[a,i]=g.useState(""),s=qt(t),{createCSVData:c,loading:l}=UD(),u=()=>{o(f=>[...f,{text:a}]),i("")},d=async()=>{s&&await c(s,["text"],r.map(f=>[f.text]))};return h.jsxs(Ft,{className:"mw-full",children:[h.jsx(fn,{children:h.jsx(wn,{children:n("add_text_data.title")})}),h.jsxs(pn,{children:[h.jsxs("div",{className:"flex flex-col space-y-1.5 mt-3",children:[h.jsx(Ge,{htmlFor:"name",children:n("add_text_data.text")}),h.jsx(so,{value:a,onChange:f=>i(f.target.value||""),placeholder:n("add_text_data.text_placeholder")})]}),h.jsx("div",{className:"w-full flex mt-4 justify-end",children:h.jsx(ut,{disabled:!a,onClick:u,className:"w-40",children:n("add_text_data.add")})}),h.jsx(vae,{data:r||[]})]}),h.jsx(Ko,{className:"flex justify-between",children:h.jsx(Bn,{loading:l,disabled:!(r!=null&&r.length),onClick:d,className:"w-full",children:n("add_text_data.create")})})]})});var wo=(e=>(e.ADD_LLM="ADD_LLM",e.ADD_PROMPT="ADD_PROMPT",e.ADD_TOOL_DEFINITION="ADD_TOOL_DEFINITION",e.ADD_SCHEMA="ADD_SCHEMA",e.ADD_FEW_SHOT_EXAMPLE="ADD_FEW_SHOT_EXAMPLE",e.ADD_VECTOR_DATABASE="ADD_VECTOR_DATABASE",e.ADD_TEXT_DATA="ADD_TEXT_DATA",e))(wo||{});const xae=["ADD_LLM","ADD_PROMPT","ADD_SCHEMA","ADD_VECTOR_DATABASE",{key:"more",label:"more",icon:"ellipsis",children:["ADD_TOOL_DEFINITION","ADD_FEW_SHOT_EXAMPLE"]}],wae=()=>{const e="_coolMode_effect",t=document.getElementById(e);if(t)return t;const n=document.createElement("div");return n.setAttribute("id",e),n.setAttribute("style","overflow:hidden; position:fixed; height:100%; top:0; left:0; right:0; bottom:0; pointer-events:none; z-index:2147483647"),document.body.appendChild(n),n};let HD=0,WD,qD,YD,KD,XD,GD,en,Gf,Je,QD,JD,ZD,e5,Qf,Wx,qx,Yx,t5,Kx,n5,r5,o5;WD=(e,t)=>{HD++;const n=(t==null?void 0:t.particle)||"circle",r=[15,20,25,35,45],o=45;let a=[],i=!1,s=0,c=0;const l=wae();function u(){const S=(t==null?void 0:t.size)||r[Math.floor(Math.random()*r.length)],C=(t==null?void 0:t.speedHorz)||Math.random()*10,M=(t==null?void 0:t.speedUp)||Math.random()*25,P=Math.random()*360,N=Math.random()*35*(Math.random()<=.5?-1:1),R=c-S/2,A=s-S/2,O=Math.random()<=.5?-1:1,k=document.createElement("div");if(n==="circle"){const T="http://www.w3.org/2000/svg",I=document.createElementNS(T,"svg"),L=document.createElementNS(T,"circle");L.setAttributeNS(null,"cx",(S/2).toString()),L.setAttributeNS(null,"cy",(S/2).toString()),L.setAttributeNS(null,"r",(S/2).toString()),L.setAttributeNS(null,"fill",`hsl(${Math.random()*360}, 70%, 50%)`),I.appendChild(L),I.setAttribute("width",S.toString()),I.setAttribute("height",S.toString()),k.appendChild(I)}else k.innerHTML=`<img src="${n}" width="${S}" height="${S}" style="border-radius: 50%">`;k.style.position="absolute",k.style.transform=`translate3d(${A}px, ${R}px, 0px) rotate(${P}deg)`,l.appendChild(k),a.push({direction:O,element:k,left:A,size:S,speedHorz:C,speedUp:M,spinSpeed:N,spinVal:P,top:R})}function d(){a.forEach(S=>{S.left=S.left-S.speedHorz*S.direction,S.top=S.top-S.speedUp,S.speedUp=Math.min(S.size,S.speedUp-1),S.spinVal=S.spinVal+S.spinSpeed,S.top>=Math.max(window.innerHeight,document.body.clientHeight)+S.size&&(a=a.filter(C=>C!==S),S.element.remove()),S.element.setAttribute("style",["position:absolute","will-change:transform",`top:${S.top}px`,`left:${S.left}px`,`transform:rotate(${S.spinVal}deg)`].join(";"))})}let f,p=0;const y=30;function m(){const S=performance.now();i&&a.length<o&&S-p>y&&(u(),p=S),d(),f=requestAnimationFrame(m)}m();const v="ontouchstart"in window,b=v?"touchstart":"mousedown",x=v?"touchend":"mouseup",j=v?"touchmove":"mousemove",w=S=>{var C,M;"touches"in S?(s=(C=S.touches)==null?void 0:C[0].clientX,c=(M=S.touches)==null?void 0:M[0].clientY):(s=S.clientX,c=S.clientY)},_=S=>{w(S),i=!0},E=()=>{i=!1};return e.addEventListener(j,w,{passive:!0}),e.addEventListener(b,_,{passive:!0}),e.addEventListener(x,E,{passive:!0}),e.addEventListener("mouseleave",E,{passive:!0}),()=>{e.removeEventListener(j,w),e.removeEventListener(b,_),e.removeEventListener(x,E),e.removeEventListener("mouseleave",E);const S=setInterval(()=>{f&&a.length===0&&(cancelAnimationFrame(f),clearInterval(S),--HD===0&&l.remove())},500)}},qD=({children:e,options:t})=>{const n=g.useRef(null);return g.useEffect(()=>{if(n.current)return WD(n.current,t)},[t]),V.cloneElement(e,{ref:n})},YD=g.memo(e=>{const{t}=Ae("flows"),n=Mu(s=>s.theme),[r,o]=g.useState(`${wo.ADD_LLM}`),a=g.useMemo(()=>h.jsxs(s3,{children:[h.jsx(yx,{children:h.jsx(qD,{children:h.jsx(ut,{variant:"link",className:"!p-0 !pl-3",children:h.jsx(gae,{width:32,height:32,className:J(n==="dark"?"fill-white":"fill-black")})})})}),xae.map(s=>typeof s=="object"?h.jsxs(yx,{children:[h.jsx(gx,{children:s.icon?h.jsx(de,{name:s.icon}):t(`supported_nodes.${s.label}`)}),h.jsx(c3,{children:s.children.map(c=>h.jsx(l3,{onClick:()=>o(c),children:t(`supported_nodes.${c.toLowerCase()}`)},c))})]},s.key):h.jsx(yx,{children:h.jsx(gx,{value:s,onClick:()=>o(s),children:t(`supported_nodes.${s.toLowerCase()}`)})},s))]}),[t,n]),i=g.useMemo(()=>{switch(r){case wo.ADD_LLM:return h.jsx(zoe,{...e});case wo.ADD_PROMPT:return h.jsx(Hoe,{...e});case wo.ADD_SCHEMA:return h.jsx(sae,{...e});case wo.ADD_FEW_SHOT_EXAMPLE:return h.jsx(dae,{...e});case wo.ADD_TOOL_DEFINITION:return h.jsx(pae,{...e});case wo.ADD_VECTOR_DATABASE:return h.jsx(yae,{...e});case wo.ADD_TEXT_DATA:return h.jsx(bae,{...e})}},[e,r]);return h.jsxs(h.Fragment,{children:[a,h.jsx("div",{className:"mt-4",children:i})]})}),KD=()=>{const[e,t]=g.useState(!1),n=pt(i=>i.currentSession),r=pt(i=>i.getLatestApplications),o=g.useCallback(async(i,s,c,l)=>{var f;const u=(f=s.data)==null?void 0:f.entity;let d=s.type?swe[s.type]:void 0;if(d&&u&&s&&typeof u=="object"&&"id"in u&&!c.has(`${u.id}`)){d=d;const p=await ue(d).save({...u,...u&&typeof u=="object"&&"session_id"in u?{session_id:i.id}:{}});c.set(`${u.id}`,p.id);const y=await ue("FlowNode").save({...s.data.flowNode,session_id:i.id,id:void 0,source_type:d,source_id:p.id});return l.set(`${s.id}`,y.id),{entityName:d,entity:p,node:y}}},[]),a=g.useCallback(async(i,s)=>{try{if(!n)throw new Error("No current session");t(!0);const c=await ue("Session").save({type:rE.StandaloneApp,name:s.name||(n!=null&&n.name?`${n.name}`:"Standalone"),status:cwe.Started});if(!c)throw new Error("Failed create standalone session");const l=new Map,u=new Map,d=await o(c,i,l,u);if(!d)throw new Error("Failed to clone main node");await ue("Session").update(c.id,{main_node_id:d.node.id,main_source_id:d.entity.id,main_source_type:d.entityName});for(const{node:f,connectedNodes:p}of s.connections)if(await o(c,f,l,u),p)for(const y of p)await o(c,y,l,u);for(const{connections:f}of s.connections)for(const p of f){const y=u.get(`${p.source}`),m=u.get(`${p.target}`);if(!y||!m)throw new Error("Failed to get connected flow node id");await ue("FlowEdge").save({source:y,target:m,sourceHandle:p.sourceHandle,targetHandle:p.targetHandle,session_id:c.id})}return r(),!0}finally{t(!1)}},[o,n,r]);return{loading:e,createStandaloneSession:a}},XD=()=>{const[e,t]=g.useState(!1),n=ke(a=>a.updateNodes),r=ke(a=>a.updateEdges),o=g.useCallback(async a=>{try{t(!0),await ue("FlowNode").delete(a);const i=await ue("FlowEdge").find({where:[{source:a},{target:a}]});return await Promise.all(i.map(s=>ue("FlowEdge").delete(s.id))),await n([{id:a,type:"remove"}]),await r(i.map(s=>({id:s.id,type:"remove"}))),!0}catch{return!1}finally{t(!1)}},[r,n]);return{loading:e,deleteNodeFlow:o}},GD=Us(({cloneStandaloneSession:e})=>{const t=On(),{t:n}=Ae("dialogs"),[r,o]=g.useState(""),{toast:a}=on(),i=c=>{o(c.target.value)},s=async()=>{try{t.hide(),await e(r)}catch{a({variant:"destructive",description:n("create_standalone_application.errors.create_failed")})}};return h.jsx(Sc,{open:t.visible,onOpenChange:t.hide,children:h.jsxs(xi,{className:"sm:max-w-[425px]",children:[h.jsxs(wi,{children:[h.jsx(_i,{children:n("create_session.title")}),h.jsx(Vy,{children:n("create_standalone_application.description")})]}),h.jsx("div",{className:"grid gap-4 py-4",children:h.jsxs("div",{className:"flex flex-col space-y-1.5",children:[h.jsx(Ge,{className:"mb-2",htmlFor:"name",children:n("create_standalone_application.name")}),h.jsx(sn,{onChange:i,id:"name",value:r,placeholder:n("create_standalone_application.name_placeholder")})]})}),h.jsx(zy,{children:h.jsx(ut,{onClick:s,disabled:!r,type:"submit",children:n("create_standalone_application.create")})})]})})}),en=g.memo(({id:e,className:t,enableToStandalone:n,getLinkedConnections:r})=>{const{t:o}=Ae("common"),{getNode:a}=Un(),{loading:i,deleteNodeFlow:s}=XD(),{createStandaloneSession:c}=KD(),{toast:l}=on(),u=On(GD),d=g.useCallback(async()=>{try{await s(e),l({description:o("deleted")})}catch{l({description:o("errors.delete_failed"),variant:"destructive"})}},[s,e,l,o]),f=g.useCallback(async y=>{try{const m=a(e);if(!m)throw new Error("No current node");const v=(r==null?void 0:r(e))||[];await c(m,{name:y,connections:v}),l({description:o("standalone_session_created")})}catch(m){d$(m),l({description:o("errors.create_standalone_session_failed"),variant:"destructive"})}},[a,e,r,c,l,o]),p=g.useCallback(()=>{u.show({cloneStandaloneSession:f})},[f,u]);return h.jsxs("div",{className:J("flex absolute z-[51] right-0 top-0 h-10",t),children:[n?h.jsx(ut,{className:"!rounded-none !px-2",onClick:p,variant:"ghost",children:h.jsx(de,{name:"package-plus",size:16})}):void 0,h.jsx(Bn,{loading:i,className:"!rounded-none !px-2",onClick:d,variant:"ghost",children:h.jsx(de,{name:"trash-2",size:16})})]})}),Gf=({className:e,size:t=200,duration:n=15,anchor:r=90,borderWidth:o=1.5,colorFrom:a="#ffaa40",colorTo:i="#9c40ff",delay:s=0})=>h.jsx("div",{style:{"--size":t,"--duration":n,"--anchor":r,"--border-width":o,"--color-from":a,"--color-to":i,"--delay":`-${s}s`},className:J("pointer-events-none absolute inset-0 rounded-[inherit] [border:calc(var(--border-width)*1px)_solid_transparent]","![mask-clip:padding-box,border-box] ![mask-composite:intersect] [mask:linear-gradient(transparent,transparent),linear-gradient(white,white)]","after:absolute after:aspect-square after:w-[calc(var(--size)*1px)] after:animate-border-beam after:[animation-delay:var(--delay)] after:[background:linear-gradient(to_left,var(--color-from),var(--color-to),transparent)] after:[offset-anchor:calc(var(--anchor)*1%)_50%] after:[offset-path:rect(0_auto_auto_0_round_calc(var(--size)*1px))]",e)}),Je=g.memo(e=>{const{className:t,...n}=e;return h.jsx(dl,{className:J("!w-2 !h-2 !border-none !rounded-full !bg-slate-700",e.position===fe.Top?"!top-[-2px]":"",t),...n})}),QD=()=>{const e=pt(i=>{var s;return(s=i.currentSession)==null?void 0:s.id}),[t,n]=g.useState(!1),r=ke(i=>i.createOrUpdateFlowNode),o=ke(i=>i.createOrUpdateFlowEdge),a=g.useCallback(async(i,s)=>{var c,l,u,d,f;n(!0);try{const p=(c=i.data)==null?void 0:c.entity;if(!p||!e)throw new Error("LLM or Session not found");const y=await((d=(u=(l=s==null?void 0:s.connectedNodes)==null?void 0:l.find(w=>w.type===ae.Schema))==null?void 0:u.data)==null?void 0:d.entity),m=i.position.x,v=i.position.y+(((f=i.measured)==null?void 0:f.height)||0),b=await ue("Thread").save({initial_llm_id:p.id,title:`New thread with ${p.name}`,status:Bu.Started,messages:[],session_id:e,schema_id:y==null?void 0:y.id}),x=await r({source_id:b.id,source_type:"Thread",node_type:ae.Thread,x:m,y:v+60});if(!x)throw new Error("Failed to create thread node");const j=await o({source:i.id,target:x.id});return{thread:b,flowNode:x,flowEdge:j}}finally{n(!1)}},[o,r,e]);return{loading:t,createThread:a}},JD=(e,t)=>{var w;const{t:n}=Ae("flows"),{toast:r}=on(),[o,a]=g.useState(!1),[i,s]=g.useState(!1),c=qt(e),l=Zn(_=>_.loadModel),{createThread:u,loading:d}=QD(),f=ke(_=>_.updateNodes),p=ke(_=>_.pushSyncNodeQueue),{getNode:y,getNodes:m,getHandleConnections:v}=Un(),b=g.useCallback(async()=>{try{if(s(!0),t.entity.id){const _=await ue("Thread").find({where:{initial_llm_id:t.entity.id}});p("Thread",{where:{source_type:"Thread",source_id:go(_.map(E=>E.id))}})}}finally{s(!1)}},[(w=t==null?void 0:t.entity)==null?void 0:w.id,p]),x=g.useCallback(async()=>{try{if(a(!0),t.entity&&c){await(l==null?void 0:l(`${t.entity.name}`));const _=m().filter(E=>E.type===ae.LLM).map(E=>(E.data.status=Mt.Started,{id:E.id,type:"replace",item:E}));c.data.status=Mt.Loading,_.push({id:e,type:"replace",item:c}),f(_),await b()}}catch(_){Wr(_),r({variant:"destructive",description:n("llm_node.errors.loading_model")})}finally{a(!1)}},[t.entity,m,e,l,c,b,n,r,f]),j=g.useCallback(async()=>{if(t.entity&&c){const _=v({type:"target",nodeId:c.id}).map(E=>y(E.source)).filter(Boolean);await(u==null?void 0:u(c,{connectedNodes:_}))}},[t.entity,c,v,u,y]);return{loadingModel:o,creatingThread:d,queringThreads:i,loadModel:x,createThread:j,queryThreads:b}},vn=(e,t)=>{const[n,r]=g.useState(!1),[o,a]=g.useState([]),{deleteElements:i,getNode:s}=Un();kf({type:"target",nodeId:e,onConnect:l=>{l!=null&&l.length&&a(u=>[...u,...fne(l)])}});const c=g.useCallback(async(l,u,d,f)=>{try{return await t({id:e,edgeId:l,source:u,target:d,connection:f})}catch{return{deleteEdgeId:l}}},[t,e]);g.useEffect(()=>{!(o!=null&&o.length)||n||(async()=>{try{r(!0);const l=[...o];a([]);const u=[],d=s(e);await Promise.all(l.map(async f=>{const p="edgeId"in f?f.edgeId:void 0,y=s(f.source);if(!y||!d)return;const m=await c(`${p}`,y,d,f);m!=null&&m.deleteEdgeId&&u.push(...Array.isArray(m.deleteEdgeId)?m.deleteEdgeId:[m.deleteEdgeId])})),u!=null&&u.length&&await i({edges:u.map(f=>({id:f}))})}finally{r(!1)}})()},[i,s,e,n,c,o])},ZD=e=>{const t=g.useCallback(async()=>{},[]);vn(e,t)},e5=g.memo(e=>{var m,v,b,x;const{id:t,data:n,isConnectable:r}=e,[o,a]=g.useState(),{t:i}=Ae("flows"),{createThread:s,loadModel:c,queringThreads:l,queryThreads:u,loadingModel:d}=JD(t,n);ZD(t);const f=[Mt.Loading,Mt.Downloading].includes(n.status);g.useEffect(()=>{var j;o||!((j=n==null?void 0:n.entity)!=null&&j.name)||Zt(()=>import("./index-D7zprebX.js").then(async w=>(await w.__tla,w)),__vite__mapDeps([7,1,2,3,4,5,6])).then(async({hasModelInCache:w,functionCallingModelIds:_,prebuiltAppConfig:E})=>{var C,M;const S=await w((C=n==null?void 0:n.entity)==null?void 0:C.name);a({hasCache:S,isFunctionCalling:_.includes((M=n==null?void 0:n.entity)==null?void 0:M.name),info:E.model_list.find(P=>{var N;return P.model_id===((N=n==null?void 0:n.entity)==null?void 0:N.name)})})})},[(m=n==null?void 0:n.entity)==null?void 0:m.name,o]);const p=g.useMemo(()=>{var j,w;switch(n.status){case Mt.Downloading:return h.jsx(de,{className:"animate-spin w-7 h-7",name:"arrow-big-down-dash"});case Mt.Loaded:return h.jsx(Na,{name:((j=n.entity)==null?void 0:j.name)||"brain",className:"w-7 h-7"});case Mt.Loading:return h.jsx(de,{className:"animate-spin w-7 h-7",name:"loader-circle"});default:return h.jsx(Na,{name:((w=n.entity)==null?void 0:w.name)||"brain",className:"w-7 h-7"})}},[(v=n.entity)==null?void 0:v.name,n.status]),y=g.useMemo(()=>f?null:d?h.jsx(ut,{disabled:!0,className:"w-full mt-4",children:h.jsx(de,{className:"animate-spin",size:24,name:"loader-circle"})}):n.status===Mt.Loaded?h.jsx(ut,{onClick:s,className:"mt-4 w-full",children:i("llm_node.create_thread_button")}):h.jsxs("div",{className:"flex gap-2 mt-4",children:[o!=null&&o.hasCache?h.jsx(Bn,{loading:l,onClick:u,children:h.jsx(de,{size:24,name:"message-square-more"})}):null,h.jsx(ut,{disabled:d,onClick:c,className:"w-full",children:i(o!=null&&o.hasCache?"llm_node.load_model_button":"llm_node.download_model_button")})]}),[f,d,n.status,o==null?void 0:o.hasCache,l,u,c,i,s]);return h.jsxs("div",{children:[h.jsxs("div",{children:[h.jsx(en,{id:t}),h.jsxs(Tr,{className:"flex justify-center",children:[p,h.jsxs("div",{className:"ml-2 pt-1 max-w-lg",children:[h.jsx(Rr,{className:"flex gap-2 items-center pr-6",children:`${((b=n==null?void 0:n.entity)==null?void 0:b.name)||""}`}),h.jsx(Xi,{className:"max-w-full",children:`${n.label||""}`}),h.jsx("div",{className:"max-w-full mt-2 flex-wrap flex gap-1",children:h.jsx(gl,{model:o==null?void 0:o.info,isFunctionCalling:(o==null?void 0:o.isFunctionCalling)||!1,name:(x=n==null?void 0:n.entity)==null?void 0:x.name,isCached:(o==null?void 0:o.hasCache)||!1})}),y]})]}),f?h.jsx(Gf,{className:"rounded-lg"}):void 0]}),h.jsx(Je,{type:"source",position:fe.Bottom,id:"a",isConnectable:r})]})}),Qf=g.memo(({tags:e,disabled:t,loading:n,onSubmit:r})=>{const{t:o}=Ae("components"),a=async i=>{try{return await r(i),!0}catch{return!1}};return h.jsxs(Ft,{className:"min-w-80",children:[h.jsx(fn,{children:h.jsx(wn,{children:o("add_message_card.title")})}),h.jsxs(pn,{children:[h.jsx("div",{className:"grid w-full gap-1.5",children:h.jsx(h2,{onSubmit:a,disabled:t||n,placeholder:o("add_message_card.placeholder")})}),e?h.jsx("div",{className:"mt-2 gap-1 flex flex-wrap",children:e}):null]})]})}),Wx=(e,t,n,r=[],o)=>{const a=e.map(i=>o.getNode(i));for(const i of a){if(!i)continue;const s=o.getHandleConnections({type:"target",nodeId:i.id});if(n.push(...s),i.type===ae.Thread){r.push(i.id),t.push(i);continue}else if(i.type!==ae.Message){r.push(i.id);continue}else if(r.includes(i.id))continue;r.push(i.id),t.push(i),s.length&&Wx(s.map(c=>c.source),t,n,r,o)}return{nodes:t,connections:n}},qx=(e,t)=>{const n=t.getHandleConnections({nodeId:e.id,type:"target"}),r=n.map(d=>{const f=t.getNode(d.source);return f?{connections:t.getHandleConnections({nodeId:f.id,type:"target"}),node:f}:void 0}),o=r.filter(d=>{var f;return((f=d.node)==null?void 0:f.type)===ae.Prompt}),a=[];o!=null&&o.length&&o.forEach(d=>{var p;const f=(p=d.connections)==null?void 0:p.map(y=>t.getNode(y.source)).filter(Boolean);a.push({node:d.node,connections:d.connections,connectedNodes:f})});const i=r.filter(d=>{var f;return((f=d.node)==null?void 0:f.type)===ae.ToolDefinition}),s=[];i!=null&&i.length&&i.forEach(d=>{var p;const f=(p=d.connections)==null?void 0:p.map(y=>t.getNode(y.source)).filter(Boolean);f!=null&&f.find(y=>y.type===ae.Schema)&&s.push({node:d.node,connections:d.connections,connectedNodes:f})});const c=r.filter(d=>{var f;return((f=d.node)==null?void 0:f.type)===ae.PlaceHolder}),l=[];c!=null&&c.length&&c.forEach(d=>{var p;const f=(p=d.connections)==null?void 0:p.map(y=>t.getNode(y.source)).filter(Boolean);f&&l.push({node:d.node,connections:d.connections,connectedNodes:f})});const u=r.find(d=>{var f;return((f=d.node)==null?void 0:f.type)===ae.Schema});return{thread:{node:e,connections:n},llm:r.find(d=>{var f;return((f=d.node)==null?void 0:f.type)===ae.LLM}),schemas:u?[u]:[],prompts:a,tools:s,placeholders:l}},Yx=e=>{const t=[];return e.forEach(n=>{var a,i,s;const{node:r,connectedNodes:o}=n;if((a=r.data)!=null&&a.entity){if(r.type===ae.Message){const c=r.data.entity;switch(c.role){case"human":t.push(new ku(c.content));break;case"ai":t.push(new Rh(c.content));break}}else if(r.type===ae.Prompt){const c=r.data.entity;let l=`${c.prefix?`${c.prefix}
`:""}`;if(c.type===Nn.FewShotExample){const u=(s=(i=o.find(d=>d.type===ae.CSVData))==null?void 0:i.data)==null?void 0:s.entity;if(u){const{rows:d}=f$(u.headers,u.csv);d.forEach(f=>{l+=`${c.content.replace(/{([^{}]*)}/g,(p,y)=>`${f[y]}`)}
`})}}else l+=c.content;switch(c.suffix&&(l+=`
${c.suffix}`),c.role){case"human":t.push(new ku(l));break;case"system":t.push(new c$(l));break;default:t.push(new Rh(l));break}}}}),t},t5=(e,t)=>{const n=(e==null?void 0:e.filter(o=>o.type===ae.Message).map(o=>({node:o,connectedNodes:[]})).reverse())||[],r=[];return t.forEach(async o=>{r.unshift({node:o.node,connectedNodes:o.connectedNodes||[]})}),{history:Yx(n),systems:Yx(r)}},Kx=({getNode:e,getHandleConnections:t})=>{const{t:n}=Ae("create_new_message"),[r,o]=g.useState(!1),a=ke(y=>y.createOrUpdateFlowNode),i=ke(y=>y.createOrUpdateFlowEdge),s=Au(y=>y.similaritySearchWithScore),c=Zn(y=>y.getCurrentModelInfo),{stream:l}=Dm(),u=g.useCallback(async({content:y,threadId:m,sourceId:v,initialX:b,initialY:x,initialLLMId:j})=>{const w=await ue("Message").save({thread_id:m,content:y,role:Mn.Human,status:Yr.Started,llm_id:j});if(!w)throw new Error("Failed to save message");const _=await a({source_id:w.id,source_type:"Message",node_type:ae.Message,x:b,y:x+80});if(!_)throw new Error("Failed to save human message node");await i({source:v,target:_.id});const E=await ue("Message").save({thread_id:m,content:n("initial_ai_message"),role:Mn.AI,status:Yr.Inprogress,llm_id:j,parent_message_id:w.id});if(!E)throw new Error("Failed to save message");const S=await a({source_id:E.id,source_type:"Message",node_type:ae.Message,x:b,y:x+250});if(!S)throw new Error("Failed to save ai message node");return await i({source:_.id,target:S.id}),{aiMessage:E,humanMessage:w,aiMessageNode:S,humanMessageNode:_}},[i,a,n]),d=g.useCallback(async(y,m)=>{const{placeholders:v}=m;if(!(v!=null&&v.length))return[];const b=[];return await Promise.all(v.map(async x=>{var w,_,E,S,C,M,P,N,R,A,O,k;const j=(w=x.node.data)==null?void 0:w.entity;if(j)switch(j.placeholder_type){case ii.VECTOR_DATABASE_RETREIVER:{const T=(_=x.connectedNodes)==null?void 0:_.find(Y=>Y.type===ae.VectorDatabase),I=(E=T==null?void 0:T.data)==null?void 0:E.entity,L=(M=(C=(S=x.connectedNodes)==null?void 0:S.find(Y=>Y.type===ae.Prompt))==null?void 0:C.data)==null?void 0:M.entity;if(!L||!I||!T)return;const D=(N=(P=t({nodeId:T.id,type:"target"}).map(Y=>e(Y.source)).find(Y=>(Y==null?void 0:Y.type)&&[ae.JSONLData,ae.CSVData].includes(Y==null?void 0:Y.type)))==null?void 0:P.data)==null?void 0:N.entity;if(!D)return;const z=(R=j.metadata)!=null&&R.k?+((A=j.metadata)==null?void 0:A.k):1;let H=(O=j.metadata)!=null&&O.minimalScore?+((k=j.metadata)==null?void 0:k.minimalScore):void 0;H&&H>1&&(H=H/100);const F=await s({databaseId:I.id,dataSourceId:D.id,dataSourceType:aE(D)},y.humanMessage.content,z);if(!F)return[];const U=new pa({template:L.content,inputVariables:["context"]});b.push(new Rh(await U.format({context:H?F.filter(([,Y])=>Y>=H).map(([Y])=>Y.pageContent).join(`
`):F.map(([Y])=>Y.pageContent).join(`
`)})))}}})),b},[t,e,s]),f=g.useCallback(async(y,m,v,{onMessageUpdate:b})=>{const{prompts:x,tools:j,schemas:w,placeholders:_}=m,E=[];_!=null&&_.length&&E.push(...await d(y,m));const{history:S,systems:C}=t5(v,x),M=[...C,...E,...S,new ku(y.humanMessage.content)],{lastChunk:P,content:N}=await l(M,{tools:j,schemas:w,onMessageUpdate:({content:R})=>{b==null||b({id:y.aiMessageNode.id,nodeData:{loading:!0,content:R}})}});return y.aiMessage.content=N,y.aiMessage.metadata=JSON.stringify({message:P}),b==null||b({id:y.aiMessageNode.id,nodeData:{content:N,loading:!1,entity:y.aiMessage}}),y.aiMessage.id&&await ue("Message").update(y.aiMessage.id,{content:N,metadata:JSON.stringify({message:P})}),N},[d,l]),p=g.useCallback(async(y,m,v)=>{var E,S,C;const{nodes:b}=Wx([y.id],[],[],[],{getNode:e,getHandleConnections:t}),x=b.find(M=>M.type===ae.Thread),j=x==null?void 0:x.data.entity;if(!y||!j||!x)throw new Error("Source or thread is not found");if(!await c())throw new Error("Model is not loaded yet");const w=qx(x,{getNode:e,getHandleConnections:t});if(!(w!=null&&w.thread))throw new Error("Thread node is not found");let _;try{o(!0);const M=((E=y.position)==null?void 0:E.x)||0,P=(((S=y.position)==null?void 0:S.y)||0)+(((C=y.measured)==null?void 0:C.height)||0);return _=await u({content:m,initialX:M,initialY:P,sourceId:y.id,threadId:j.id,initialLLMId:j.initial_llm_id}),await f(_,w,b,v),await ue("Message").update(`${_.aiMessage.id}`,{status:Yr.Success}),_.aiMessage.status=Yr.Success,v.onMessageUpdate({id:_.aiMessageNode.id,nodeData:{entity:_.aiMessage,loading:!1}}),!0}catch{_!=null&&_.aiMessage&&await ue("Message").update(`${_.aiMessage.id}`,{status:Yr.Failed,content:n("errors.ai_message_content_failed")}),_!=null&&_.aiMessageNode.id&&(v==null||v.onMessageUpdate({id:_.aiMessageNode.id,nodeData:{content:n("errors.ai_message_content_failed"),loading:!1}}))}finally{o(!1)}},[c,t,e,u,f,n]);return{loading:r,createMessage:p}},n5=(e,t)=>{const n=qt(e),{t:r}=Ae("flows"),{getNode:o,getHandleConnections:a}=Un(),i=ke(f=>f.updateNodes),{createMessage:s,loading:c}=Kx({getNode:o,getHandleConnections:a}),l=g.useCallback(f=>{if(!f.id)return;const p=o(f.id);!p||!f.nodeData||i([{id:p.id,type:"replace",item:{...p,data:{...p.data,...Uc(f.nodeData,Hc)}}}])},[o,i]),u=g.useCallback(async f=>{if(n&&t.entity)try{await s(n,f,{onMessageUpdate:l})}catch(p){if(p instanceof Error&&p.message.includes("LLM_NOT_LOADED_YET"))return Ws({variant:"destructive",title:r("thread_node.errors.llm_not_loaded_yet")});Ws({variant:"destructive",title:`${p}`})}},[n,t.entity,s,l,r]),d=g.useCallback(f=>{const p=o(f);if(!p)return[];const y=[],m=qx(p,{getNode:o,getHandleConnections:a});return m.thread&&y.push({node:m.thread.node,connectedNodes:[],connections:m.thread.connections}),m.prompts&&y.push(...m.prompts.map(v=>({node:v.node,connectedNodes:v.connectedNodes,connections:v.connections}))),m.schemas&&y.push(...m.schemas.map(v=>({node:v.node,connectedNodes:[],connections:v.connections}))),m.placeholders&&y.push(...m.placeholders.map(v=>({node:v.node,connectedNodes:[],connections:v.connections}))),m.llm&&y.push(m.llm),y},[a,o]);return{loading:c,createMessage:u,getLinkedConnections:d}},r5=e=>{const t=ke(r=>r.createOrUpdateFlowEdge),n=g.useCallback(async({edgeId:r,source:o,target:a,connection:i})=>{try{if((o==null?void 0:o.type)===ae.Prompt&&(a==null?void 0:a.type)===ae.Thread){await t({source:i.source,target:i.target,sourceHandle:i.sourceHandle,targetHandle:i.targetHandle});return}else if((o==null?void 0:o.type)===ae.LLM&&(a==null?void 0:a.type)===ae.Thread){await t({source:i.source,target:i.target,sourceHandle:i.sourceHandle,targetHandle:i.targetHandle});return}else if((o==null?void 0:o.type)===ae.Schema&&(a==null?void 0:a.type)===ae.Thread){await t({source:i.source,target:i.target,sourceHandle:i.sourceHandle,targetHandle:i.targetHandle});const s=a.data.entity,c=a.data.entity;await ue("Thread").update(s.id,{schema_id:c.id});return}else if((o==null?void 0:o.type)===ae.ToolDefinition&&(a==null?void 0:a.type)===ae.Thread){await t({source:i.source,target:i.target,sourceHandle:i.sourceHandle,targetHandle:i.targetHandle});return}else if((o==null?void 0:o.type)===ae.VectorDatabase&&(a==null?void 0:a.type)===ae.Thread){await t({source:i.source,target:i.target,sourceHandle:i.sourceHandle,targetHandle:i.targetHandle});return}else if((o==null?void 0:o.type)===ae.PlaceHolder&&(a==null?void 0:a.type)===ae.Thread&&o.data.entity.placeholder_type===ii.VECTOR_DATABASE_RETREIVER){await t({source:i.source,target:i.target,sourceHandle:i.sourceHandle,targetHandle:i.targetHandle});return}return{deleteEdgeId:r}}catch{return{deleteEdgeId:r}}},[t]);vn(e,n)},o5=g.memo(e=>{const{id:t,data:n,isConnectable:r}=e,{t:o}=Ae("flows"),[a,i]=g.useState(!1),s=kf({type:"source"}),c=kf({type:"target"}),{getNode:l}=Un(),{loading:u,createMessage:d,getLinkedConnections:f}=n5(t,n);r5(t);const p=g.useCallback(async(...b)=>(i(!1),await d(...b)),[d]),y=g.useMemo(()=>s.length>0,[s]),m=g.useCallback(()=>{i(b=>!b)},[]),v=g.useMemo(()=>{var x,j;const b=c.map((w,_)=>{var S;const E=l(w.source);if((E==null?void 0:E.type)===ae.Schema)return h.jsx(cn,{children:o("thread_node.structured_output")},`${_}`);if((E==null?void 0:E.type)===ae.Prompt){const C=E.data.entity;return h.jsx(cn,{children:o(C.type===Nn.FewShotExample?"thread_node.prompts.few_shot_example":`thread_node.prompts.${C.role.toLowerCase()}`)},`${_}`)}else if((E==null?void 0:E.type)===ae.PlaceHolder&&((S=E.data.entity)==null?void 0:S.placeholder_type)===ii.VECTOR_DATABASE_RETREIVER)return h.jsx(cn,{children:o("thread_node.vector_database_retriever")},`${_}`)}).filter(Boolean);return e.data.entity&&!((j=(x=e.data.entity)==null?void 0:x.messages)!=null&&j.length)&&!y?h.jsx(Qf,{disabled:u,loading:u,onSubmit:p,tags:b}):b!=null&&b.length?h.jsxs(Ft,{className:"p-4 pt-2",children:[h.jsx(wn,{className:"mb-2",children:o("thread_node.title")}),h.jsx("div",{className:"flex gap-1.5",children:b}),h.jsx("div",{className:"mt-4 w-full flex justify-end",children:h.jsxs(ut,{onClick:m,variant:"outline",children:[h.jsx(de,{name:a?"copy-minus":"copy-plus"}),o(a?"thread_node.hide":"thread_node.clone")]})})]}):h.jsx("div",{className:"w-12 h-10"})},[y,l,p,m,u,e.data.entity,a,o,c]);return h.jsxs("div",{children:[h.jsx(Je,{type:"target",position:fe.Top,isConnectable:r}),h.jsxs("div",{children:[h.jsx(en,{id:t,enableToStandalone:!0,getLinkedConnections:f}),v,a?h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"w-[1px] absolute ml-[50%] h-[30px] bg-gray-500"}),h.jsx("div",{className:"absolute mt-[30px] w-full",children:h.jsx("div",{className:"ml-[10%] w-80 animate-in slide-in-from-bottom-5",children:h.jsx(Qf,{disabled:u,loading:u,onSubmit:p})})})]}):void 0]}),h.jsx(Je,{type:"source",position:fe.Bottom,id:"a",isConnectable:r})]})});function _ae({data:e,onNewThread:t,loading:n,showThread:r}){var a;const{t:o}=Ae("flows");return h.jsxs(Tr,{className:"flex min-w-52",children:[h.jsx(de,{size:24,name:"user"}),h.jsxs("div",{className:"ml-2 max-w-full w-full",children:[h.jsx(Rr,{children:"Human"}),h.jsx(Xi,{children:`${e.content||((a=e.entity)==null?void 0:a.content)||""}`}),t?h.jsx("div",{className:"w-full mt-2 flex items-center justify-end",children:h.jsxs(ut,{onClick:t,disabled:n,variant:"outline",children:[h.jsx(de,{name:r?"minus":"plus",size:16}),o(r?"message_node.hide_thread":"message_node.new_thread")]})}):void 0]})]})}const jae=g.lazy(()=>Zt(()=>import("./index-DOJvyzuh.js").then(async e=>(await e.__tla,e)),__vite__mapDeps([8,9,1,2,10,11])));function Eae({data:e,onNewThread:t,loading:n,showThread:r}){var i,s,c,l,u,d,f,p;const{t:o}=Ae("flows"),a=g.useMemo(()=>{var y;try{return JSON.parse(((y=e==null?void 0:e.entity)==null?void 0:y.metadata)||"{}")}catch{return{}}},[(i=e==null?void 0:e.entity)==null?void 0:i.metadata]);return h.jsxs(Tr,{className:"flex min-w-52",children:[h.jsx(de,{className:J(e.loading?"animate-spin":void 0),size:24,name:e.loading?"loader-circle":"bot"}),h.jsx(de,{name:r?"minus":"plus",size:24}),h.jsxs("div",{className:"ml-2 w-full max-w-full",children:[h.jsx(Rr,{children:o(`message_node.message_roles.${(c=(s=e.entity)==null?void 0:s.role)==null?void 0:c.toLowerCase()}`)}),h.jsx(g.Suspense,{fallback:h.jsx("div",{className:"h-full w-ful rounded-lg flex justify-center items-center",children:h.jsx(de,{name:"loader-circle",className:"animate-spin"})}),children:h.jsx(jae,{className:"!text-sm [&_p]:leading-relaxed !max-w-full !bg-transparent !text-inherit !font-sans",source:`${e.content||((l=e.entity)==null?void 0:l.content)||""}`})}),Array.isArray((u=a==null?void 0:a.message)==null?void 0:u.tool_calls)&&((f=(d=a==null?void 0:a.message)==null?void 0:d.tool_calls)!=null&&f.length)?(p=a==null?void 0:a.message)==null?void 0:p.tool_calls.map((y,m)=>h.jsx(cn,{children:o("message_node.tool_call",{name:y.name,args:Object.entries(y.args).map(([v,b])=>`"${v}": "${b}"`).join(", ")})},`${y.name}_${m}`)):null,t?h.jsx("div",{className:"w-full mt-2 flex items-center justify-end",children:h.jsxs(ut,{onClick:t,disabled:n,variant:"outline",children:[h.jsx(de,{name:r?"minus":"plus",size:16}),o(r?"message_node.hide_thread":"message_node.new_thread")]})}):void 0]}),e.loading?h.jsx(Gf,{size:350,duration:10}):void 0]})}const Sae=e=>{const{t}=Ae("flows"),n=qt(e),r=ke(u=>u.updateNodes),{getNode:o,getHandleConnections:a}=Un(),{createMessage:i,loading:s}=Kx({getNode:o,getHandleConnections:a}),c=g.useCallback(u=>{if(!u.id)return;const d=o(u.id);!d||!u.nodeData||r([{id:d.id,type:"replace",item:{...d,data:{...d.data,...Uc(u.nodeData,Hc)}}}])},[o,r]),l=g.useCallback(async u=>{if(n)try{await i(n,u,{onMessageUpdate:c})}catch(d){if(d instanceof Error&&d.message.includes("LLM_NOT_LOADED_YET"))return Ws({variant:"destructive",title:t("message_node.errors.llm_not_loaded_yet")});Ws({variant:"destructive",title:t("message_node.errors.create_message")})}},[n,t,i,c]);return{loading:s,createMessage:l}},a5=()=>{const e=ke(n=>n.createOrUpdateFlowNode),t=ke(n=>n.createOrUpdateFlowEdge);return{createIdieMessage:g.useCallback(async(n,r,o,a)=>{var p,y,m,v,b;if(!n||!r)return;const i=(y=(p=a==null?void 0:a.promptNode)==null?void 0:p.data)==null?void 0:y.entity,s=((m=n.position)==null?void 0:m.x)||0,c=(((v=n.position)==null?void 0:v.y)||0)+(((b=n.measured)==null?void 0:b.height)||0),l=await ue("Message").save({thread_id:r.id,content:o,role:(i==null?void 0:i.role)||Mn.Human,status:Yr.Started,llm_id:r.initial_llm_id});if(!l)throw new Error("Failed to save message");const u=await e({source_id:l.id,source_type:"Message",node_type:ae.Message,x:s,y:c});if(!u)throw new Error("Failed to save message node");const d=await t({source:n.id,target:u.id});let f;return a!=null&&a.promptNode&&(f=await t({source:a==null?void 0:a.promptNode.id,target:u.id})),{message:l,edgeToPrompt:f,messageNode:u,messageEdge:d}},[e,t])}},Cae=e=>{const{createIdieMessage:t}=a5(),n=g.useCallback(async({edgeId:r,source:o,target:a})=>{var i,s;try{if((o==null?void 0:o.type)===ae.Prompt&&(a==null?void 0:a.type)===ae.Message){const c=(i=a==null?void 0:a.data)==null?void 0:i.entity,l=(s=o==null?void 0:o.data)==null?void 0:s.entity;if(!l||!c||!a)return{deleteEdgeId:r};await t(a,{id:c==null?void 0:c.thread_id,title:"",status:Bu.Started,initial_llm_id:c.llm_id,session_id:l.session_id},l.content,{promptNode:o});return}return{deleteEdgeId:r}}catch{return{deleteEdgeId:r}}},[t]);vn(e,n)},Oae=g.memo(e=>{var j,w,_;const{id:t,data:n,isConnectable:r}=e,[o,a]=g.useState(!1),[i,s]=g.useState(!1),{t:c}=Ae("common"),l=kf({type:"source"}),{loading:u,createMessage:d}=Sae(t),{toast:f}=on();Cae(t);const p=g.useCallback(async(...E)=>{const S=await d(...E);return a(!1),S},[d]),y=g.useMemo(()=>l.length===0,[l]),m=g.useCallback(()=>{var E;(E=n.entity)!=null&&E.content&&(navigator.clipboard.writeText(n.entity.content),f({description:c("copied")}))},[f,n,c]),v=g.useCallback(async()=>{var E;try{if(i)return await oE.stop(),s(!1);s(!0),await oE.speak(((E=n.entity)==null?void 0:E.content)||"")}catch{f({variant:"destructive",description:c("errors.speech_is_not_supported")})}finally{s(!1)}},[(j=n.entity)==null?void 0:j.content,i,c,f]),b=g.useCallback(()=>{a(E=>!E)},[]),x=g.useMemo(()=>{var E;if(!(!y&&!o||n.loading||u||((E=n==null?void 0:n.entity)==null?void 0:E.status)==="inprogress"))return h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"w-[1px] absolute ml-[50%] h-[30px] bg-gray-500"}),h.jsx("div",{className:"absolute mt-[30px] w-full",children:h.jsx("div",{className:"ml-[10%] w-80 animate-in slide-in-from-bottom-5",children:h.jsx(Qf,{disabled:u,loading:u,onSubmit:p})})})]})},[(w=n==null?void 0:n.entity)==null?void 0:w.status,n.loading,p,y,u,o]);return h.jsxs("div",{children:[h.jsx(Je,{type:"target",position:fe.Top,isConnectable:r}),h.jsxs("div",{className:"max-w-sm min-w-64",children:[h.jsxs("div",{className:"w-auto",children:[h.jsx(en,{id:t}),h.jsx("div",{children:((_=n.entity)==null?void 0:_.role)===Mn.Human?h.jsx(_ae,{data:n,showThread:o,onNewThread:y?void 0:b}):h.jsx(Eae,{data:n,showThread:o,loading:u,onNewThread:y?void 0:b})}),h.jsx(ut,{onClick:v,className:"absolute top-0 right-[68px] !px-2 !rounded-none",variant:"ghost",children:h.jsx(de,{name:i?"circle-stop":"speech",size:16})}),h.jsx(ut,{onClick:m,className:"absolute top-0 right-[36px] !px-2 !rounded-none",variant:"ghost",children:h.jsx(de,{name:"copy",size:16})})]}),x]}),h.jsx(Je,{type:"source",position:fe.Bottom,id:"a",isConnectable:r})]})}),i5=Us(({title:e,content:t})=>{const n=On();return h.jsx(Sc,{open:n.visible,onOpenChange:n.hide,children:h.jsxs(xi,{className:"sm:max-w-2xl",children:[h.jsx(wi,{children:h.jsxs("div",{className:"flex",children:[h.jsx(de,{name:"file",className:"mr-2 h-4 w-4"}),h.jsx(_i,{children:e})]})}),h.jsx("div",{className:"mx-auto w-full min-h-96 max-h-96 overflow-hidden",children:h.jsx("div",{className:"relative w-full h-full overflow-hidden rounded-xl p-1 border border-border",children:h.jsx("pre",{className:"break-all h-full overflow-y-auto bg-background font-mono text-xs w-full",children:t})})})]})})}),Mae=e=>{const t=ke(o=>o.createOrUpdateFlowEdge),{createIdieMessage:n}=a5(),r=g.useCallback(async({edgeId:o,source:a,target:i})=>{var s,c,l,u;try{const d=(s=i==null?void 0:i.data)==null?void 0:s.entity,f=(c=a==null?void 0:a.data)==null?void 0:c.entity;if((a==null?void 0:a.type)===ae.Message&&(i==null?void 0:i.type)===ae.Prompt){const p=(l=a==null?void 0:a.data)==null?void 0:l.entity,y=(u=i==null?void 0:i.data)==null?void 0:u.entity;if(!y||!p||!i)return{deleteEdgeId:o};await n(a,{id:p==null?void 0:p.thread_id,title:"",status:Bu.Started,initial_llm_id:p.llm_id,session_id:y.session_id},y.content,{promptNode:i});return}else if((a==null?void 0:a.type)===ae.CSVData&&(i==null?void 0:i.type)===ae.Prompt&&(d==null?void 0:d.type)===Nn.FewShotExample&&(f!=null&&f.headers.includes("input"))&&(f!=null&&f.headers.includes("output"))){await t({source:a.id,target:i.id});return}return{deleteEdgeId:o}}catch{return{deleteEdgeId:o}}},[n,t]);vn(e,r)},Nae=g.memo(e=>{var l,u,d;const{id:t,data:n,isConnectable:r}=e;Mae(t);const o=On(i5),a=g.useMemo(()=>{var f,p,y;return`${(f=n.entity)!=null&&f.prefix?`${(p=n.entity)==null?void 0:p.prefix}
`:""}${((y=n.entity)==null?void 0:y.content)||""}`},[(l=n.entity)==null?void 0:l.prefix,(u=n.entity)==null?void 0:u.content]),i=g.useMemo(()=>{var p;const f=/{(.*?)}/g;return((p=a.match(f))==null?void 0:p.map(y=>y.replace("{","").replace("}","")))||[]},[a]),s=a.length>990,c=()=>{o.show({title:"Prompt",content:a})};return h.jsxs("div",{className:"min-w-56",children:[h.jsx(Je,{type:"target",position:fe.Top,isConnectable:r}),h.jsxs("div",{children:[h.jsx(en,{id:t}),h.jsxs(Tr,{className:"flex justify-center max-w-72",variant:"default",children:[h.jsx(de,{size:24,name:"notepad-text"}),h.jsxs("div",{className:"ml-2 max-w-full break-words break-all",children:[h.jsx(Rr,{children:`${((d=n.entity)==null?void 0:d.role)||""}`}),h.jsxs(Xi,{onClick:s?c:void 0,children:[s?`${a.slice(0,990)}...`:a,s?h.jsx("span",{className:"float-right",children:h.jsx(de,{name:"chevron-right"})}):void 0]}),i!=null&&i.length?i.map((f,p)=>h.jsx(cn,{className:"mt-2 mr-1",variant:"default",children:f},p)):void 0]})]})]}),h.jsx(Je,{type:"source",position:fe.Bottom,id:"a",isConnectable:r})]})});var Pae=Ok();const Hn=Xe(Pae);var Xx,s5;function kae(){if(s5)return Xx;s5=1;function e(t){return t==null}return Xx=e,Xx}var Aae=kae();const rt=Xe(Aae);var Gx,c5;function Tae(){if(c5)return Gx;c5=1;var e=co(),t=an(),n=jr(),r="[object String]";function o(a){return typeof a=="string"||!t(a)&&n(a)&&e(a)==r}return Gx=o,Gx}var Rae=Tae();const Cl=Xe(Rae);var Iae=Ru();const We=Xe(Iae);var Dae=tr();const ts=Xe(Dae);var l5={exports:{}},ot={},u5;function Lae(){if(u5)return ot;u5=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),i=Symbol.for("react.context"),s=Symbol.for("react.server_context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.suspense_list"),d=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.for("react.offscreen"),y;y=Symbol.for("react.module.reference");function m(v){if(typeof v=="object"&&v!==null){var b=v.$$typeof;switch(b){case e:switch(v=v.type,v){case n:case o:case r:case l:case u:return v;default:switch(v=v&&v.$$typeof,v){case s:case i:case c:case f:case d:case a:return v;default:return b}}case t:return b}}}return ot.ContextConsumer=i,ot.ContextProvider=a,ot.Element=e,ot.ForwardRef=c,ot.Fragment=n,ot.Lazy=f,ot.Memo=d,ot.Portal=t,ot.Profiler=o,ot.StrictMode=r,ot.Suspense=l,ot.SuspenseList=u,ot.isAsyncMode=function(){return!1},ot.isConcurrentMode=function(){return!1},ot.isContextConsumer=function(v){return m(v)===i},ot.isContextProvider=function(v){return m(v)===a},ot.isElement=function(v){return typeof v=="object"&&v!==null&&v.$$typeof===e},ot.isForwardRef=function(v){return m(v)===c},ot.isFragment=function(v){return m(v)===n},ot.isLazy=function(v){return m(v)===f},ot.isMemo=function(v){return m(v)===d},ot.isPortal=function(v){return m(v)===t},ot.isProfiler=function(v){return m(v)===o},ot.isStrictMode=function(v){return m(v)===r},ot.isSuspense=function(v){return m(v)===l},ot.isSuspenseList=function(v){return m(v)===u},ot.isValidElementType=function(v){return typeof v=="string"||typeof v=="function"||v===n||v===o||v===r||v===l||v===u||v===p||typeof v=="object"&&v!==null&&(v.$$typeof===f||v.$$typeof===d||v.$$typeof===a||v.$$typeof===i||v.$$typeof===c||v.$$typeof===y||v.getModuleId!==void 0)},ot.typeOf=m,ot}var d5;function Fae(){return d5||(d5=1,l5.exports=Lae()),l5.exports}var Bae=Fae(),Qx,f5;function p5(){if(f5)return Qx;f5=1;var e=co(),t=jr(),n="[object Number]";function r(o){return typeof o=="number"||t(o)&&e(o)==n}return Qx=r,Qx}var Jx,h5;function $ae(){if(h5)return Jx;h5=1;var e=p5();function t(n){return e(n)&&n!=+n}return Jx=t,Jx}var zae=$ae();const Ol=Xe(zae);var Vae=p5();const Uae=Xe(Vae);var yr=function(e){return e===0?0:e>0?1:-1},Ia=function(e){return Cl(e)&&e.indexOf("%")===e.length-1},me=function(e){return Uae(e)&&!Ol(e)},Bt=function(e){return me(e)||Cl(e)},Hae=0,Jf=function(e){var t=++Hae;return"".concat(e||"").concat(t)},Da=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!me(e)&&!Cl(e))return n;var o;if(Ia(e)){var a=e.indexOf("%");o=t*parseFloat(e.slice(0,a))/100}else o=+e;return Ol(o)&&(o=n),r&&o>t&&(o=t),o},Zo=function(e){if(!e)return null;var t=Object.keys(e);return t&&t.length?e[t[0]]:null},Wae=function(e){if(!Array.isArray(e))return!1;for(var t=e.length,n={},r=0;r<t;r++)if(!n[e[r]])n[e[r]]=!0;else return!0;return!1},ns=function(e,t){return me(e)&&me(t)?function(n){return e+n*(t-e)}:function(){return t}};function Zx(e,t,n){return!e||!e.length?null:e.find(function(r){return r&&(typeof t=="function"?t(r):Hn(r,t))===n})}function rs(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var r in t)if({}.hasOwnProperty.call(t,r)&&!{}.hasOwnProperty.call(e,r))return!1;return!0}function ew(e){"@babel/helpers - typeof";return ew=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ew(e)}var qae=["viewBox","children"],Yae=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],m5=["points","pathLength"],tw={svg:qae,polygon:m5,polyline:m5},nw=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Zf=function(e,t){if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(g.isValidElement(e)&&(n=e.props),!ts(n))return null;var r={};return Object.keys(n).forEach(function(o){nw.includes(o)&&(r[o]=t||function(a){return n[o](n,a)})}),r},Kae=function(e,t,n){return function(r){return e(t,n,r),null}},ep=function(e,t,n){if(!ts(e)||ew(e)!=="object")return null;var r=null;return Object.keys(e).forEach(function(o){var a=e[o];nw.includes(o)&&typeof a=="function"&&(r||(r={}),r[o]=Kae(a,t,n))}),r},Xae=["children"],Gae=["children"];function y5(e,t){if(e==null)return{};var n=Qae(e,t),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Qae(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var g5={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart"},_o=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},v5=null,rw=null,ow=function e(t){if(t===v5&&Array.isArray(rw))return rw;var n=[];return g.Children.forEach(t,function(r){rt(r)||(Bae.isFragment(r)?n=n.concat(e(r.props.children)):n.push(r))}),rw=n,v5=t,n};function gr(e,t){var n=[],r=[];return Array.isArray(t)?r=t.map(function(o){return _o(o)}):r=[_o(t)],ow(e).forEach(function(o){var a=Hn(o,"type.displayName")||Hn(o,"type.name");r.indexOf(a)!==-1&&n.push(o)}),n}function In(e,t){var n=gr(e,t);return n&&n[0]}var b5=function(e){if(!e||!e.props)return!1;var t=e.props,n=t.width,r=t.height;return!(!me(n)||n<=0||!me(r)||r<=0)},Jae=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],Zae=function(e){return e&&e.type&&Cl(e.type)&&Jae.indexOf(e.type)>=0},eie=function(e,t,n,r){var o,a=(o=tw==null?void 0:tw[r])!==null&&o!==void 0?o:[];return!We(e)&&(r&&a.includes(t)||Yae.includes(t))||n&&nw.includes(t)},nt=function(e,t,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(g.isValidElement(e)&&(r=e.props),!ts(r))return null;var o={};return Object.keys(r).forEach(function(a){var i;eie((i=r)===null||i===void 0?void 0:i[a],a,t,n)&&(o[a]=r[a])}),o},aw=function e(t,n){if(t===n)return!0;var r=g.Children.count(t);if(r!==g.Children.count(n))return!1;if(r===0)return!0;if(r===1)return x5(Array.isArray(t)?t[0]:t,Array.isArray(n)?n[0]:n);for(var o=0;o<r;o++){var a=t[o],i=n[o];if(Array.isArray(a)||Array.isArray(i)){if(!e(a,i))return!1}else if(!x5(a,i))return!1}return!0},x5=function(e,t){if(rt(e)&&rt(t))return!0;if(!rt(e)&&!rt(t)){var n=e.props||{},r=n.children,o=y5(n,Xae),a=t.props||{},i=a.children,s=y5(a,Gae);return r&&i?rs(o,s)&&aw(r,i):!r&&!i?rs(o,s):!1}return!1},w5=function(e,t){var n=[],r={};return ow(e).forEach(function(o,a){if(Zae(o))n.push(o);else if(o){var i=_o(o.type),s=t[i]||{},c=s.handler,l=s.once;if(c&&(!l||!r[i])){var u=c(o,i,a);n.push(u),r[i]=!0}}}),n},tie=function(e){var t=e&&e.type;return t&&g5[t]?g5[t]:null},nie=function(e,t){return ow(t).indexOf(e)},rie=["children","width","height","viewBox","className","style","title","desc"];function iw(){return iw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},iw.apply(this,arguments)}function oie(e,t){if(e==null)return{};var n=aie(e,t),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function aie(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function sw(e){var t=e.children,n=e.width,r=e.height,o=e.viewBox,a=e.className,i=e.style,s=e.title,c=e.desc,l=oie(e,rie),u=o||{width:n,height:r,x:0,y:0},d=st("recharts-surface",a);return V.createElement("svg",iw({},nt(l,!0,"svg"),{className:d,width:n,height:r,style:i,viewBox:"".concat(u.x," ").concat(u.y," ").concat(u.width," ").concat(u.height)}),V.createElement("title",null,s),V.createElement("desc",null,c),t)}var iie=["children","className"];function cw(){return cw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cw.apply(this,arguments)}function sie(e,t){if(e==null)return{};var n=cie(e,t),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function cie(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var Ut=V.forwardRef(function(e,t){var n=e.children,r=e.className,o=sie(e,iie),a=st("recharts-layer",r);return V.createElement("g",cw({className:a},nt(o,!0),{ref:t}),n)}),jo=function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o]},lw,_5;Rm=function(){if(_5)return lw;_5=1;function e(t,n,r){var o=-1,a=t.length;n<0&&(n=-n>a?0:a+n),r=r>a?a:r,r<0&&(r+=a),a=n>r?0:r-n>>>0,n>>>=0;for(var i=Array(a);++o<a;)i[o]=t[o+n];return i}return lw=e,lw};var uw,j5;function lie(){if(j5)return uw;j5=1;var e=Rm();function t(n,r,o){var a=n.length;return o=o===void 0?a:o,!r&&o>=a?n:e(n,r,o)}return uw=t,uw}var dw,E5;function S5(){if(E5)return dw;E5=1;var e="\uD800-\uDFFF",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",o=t+n+r,a="\\ufe0e\\ufe0f",i="\\u200d",s=RegExp("["+i+e+o+a+"]");function c(l){return s.test(l)}return dw=c,dw}var fw,C5;function uie(){if(C5)return fw;C5=1;function e(t){return t.split("")}return fw=e,fw}var pw,O5;function die(){if(O5)return pw;O5=1;var e="\uD800-\uDFFF",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",o=t+n+r,a="\\ufe0e\\ufe0f",i="["+e+"]",s="["+o+"]",c="\uD83C[\uDFFB-\uDFFF]",l="(?:"+s+"|"+c+")",u="[^"+e+"]",d="(?:\uD83C[\uDDE6-\uDDFF]){2}",f="[\uD800-\uDBFF][\uDC00-\uDFFF]",p="\\u200d",y=l+"?",m="["+a+"]?",v="(?:"+p+"(?:"+[u,d,f].join("|")+")"+m+y+")*",b=m+y+v,x="(?:"+[u+s+"?",s,d,f,i].join("|")+")",j=RegExp(c+"(?="+c+")|"+x+b,"g");function w(_){return _.match(j)||[]}return pw=w,pw}var hw,M5;function fie(){if(M5)return hw;M5=1;var e=uie(),t=S5(),n=die();function r(o){return t(o)?n(o):e(o)}return hw=r,hw}var mw,N5;function pie(){if(N5)return mw;N5=1;var e=lie(),t=S5(),n=fie(),r=_k();function o(a){return function(i){i=r(i);var s=t(i)?n(i):void 0,c=s?s[0]:i.charAt(0),l=s?e(s,1).join(""):i.slice(1);return c[a]()+l}}return mw=o,mw}var yw,P5;function hie(){if(P5)return yw;P5=1;var e=pie(),t=e("toUpperCase");return yw=t,yw}var mie=hie();const tp=Xe(mie);function vt(e){return function(){return e}}const k5=Math.cos,np=Math.sin,vr=Math.sqrt,rp=Math.PI,op=2*rp,gw=Math.PI,vw=2*gw,La=1e-6,yie=vw-La;function A5(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function gie(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return A5;const n=10**t;return function(r){this._+=r[0];for(let o=1,a=r.length;o<a;++o)this._+=Math.round(arguments[o]*n)/n+r[o]}}class vie{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?A5:gie(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,o){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+o}`}bezierCurveTo(t,n,r,o,a,i){this._append`C${+t},${+n},${+r},${+o},${this._x1=+a},${this._y1=+i}`}arcTo(t,n,r,o,a){if(t=+t,n=+n,r=+r,o=+o,a=+a,a<0)throw new Error(`negative radius: ${a}`);let i=this._x1,s=this._y1,c=r-t,l=o-n,u=i-t,d=s-n,f=u*u+d*d;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(f>La)if(!(Math.abs(d*c-l*u)>La)||!a)this._append`L${this._x1=t},${this._y1=n}`;else{let p=r-i,y=o-s,m=c*c+l*l,v=p*p+y*y,b=Math.sqrt(m),x=Math.sqrt(f),j=a*Math.tan((gw-Math.acos((m+f-v)/(2*b*x)))/2),w=j/x,_=j/b;Math.abs(w-1)>La&&this._append`L${t+w*u},${n+w*d}`,this._append`A${a},${a},0,0,${+(d*p>u*y)},${this._x1=t+_*c},${this._y1=n+_*l}`}}arc(t,n,r,o,a,i){if(t=+t,n=+n,r=+r,i=!!i,r<0)throw new Error(`negative radius: ${r}`);let s=r*Math.cos(o),c=r*Math.sin(o),l=t+s,u=n+c,d=1^i,f=i?o-a:a-o;this._x1===null?this._append`M${l},${u}`:(Math.abs(this._x1-l)>La||Math.abs(this._y1-u)>La)&&this._append`L${l},${u}`,r&&(f<0&&(f=f%vw+vw),f>yie?this._append`A${r},${r},0,1,${d},${t-s},${n-c}A${r},${r},0,1,${d},${this._x1=l},${this._y1=u}`:f>La&&this._append`A${r},${r},0,${+(f>=gw)},${d},${this._x1=t+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(t,n,r,o){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+o}h${-r}Z`}toString(){return this._}}function bw(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new vie(t)}function xw(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function T5(e){this._context=e}T5.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function ap(e){return new T5(e)}function R5(e){return e[0]}function I5(e){return e[1]}function D5(e,t){var n=vt(!0),r=null,o=ap,a=null,i=bw(s);e=typeof e=="function"?e:e===void 0?R5:vt(e),t=typeof t=="function"?t:t===void 0?I5:vt(t);function s(c){var l,u=(c=xw(c)).length,d,f=!1,p;for(r==null&&(a=o(p=i())),l=0;l<=u;++l)!(l<u&&n(d=c[l],l,c))===f&&((f=!f)?a.lineStart():a.lineEnd()),f&&a.point(+e(d,l,c),+t(d,l,c));if(p)return a=null,p+""||null}return s.x=function(c){return arguments.length?(e=typeof c=="function"?c:vt(+c),s):e},s.y=function(c){return arguments.length?(t=typeof c=="function"?c:vt(+c),s):t},s.defined=function(c){return arguments.length?(n=typeof c=="function"?c:vt(!!c),s):n},s.curve=function(c){return arguments.length?(o=c,r!=null&&(a=o(r)),s):o},s.context=function(c){return arguments.length?(c==null?r=a=null:a=o(r=c),s):r},s}function ip(e,t,n){var r=null,o=vt(!0),a=null,i=ap,s=null,c=bw(l);e=typeof e=="function"?e:e===void 0?R5:vt(+e),t=typeof t=="function"?t:vt(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?I5:vt(+n);function l(d){var f,p,y,m=(d=xw(d)).length,v,b=!1,x,j=new Array(m),w=new Array(m);for(a==null&&(s=i(x=c())),f=0;f<=m;++f){if(!(f<m&&o(v=d[f],f,d))===b)if(b=!b)p=f,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),y=f-1;y>=p;--y)s.point(j[y],w[y]);s.lineEnd(),s.areaEnd()}b&&(j[f]=+e(v,f,d),w[f]=+t(v,f,d),s.point(r?+r(v,f,d):j[f],n?+n(v,f,d):w[f]))}if(x)return s=null,x+""||null}function u(){return D5().defined(o).curve(i).context(a)}return l.x=function(d){return arguments.length?(e=typeof d=="function"?d:vt(+d),r=null,l):e},l.x0=function(d){return arguments.length?(e=typeof d=="function"?d:vt(+d),l):e},l.x1=function(d){return arguments.length?(r=d==null?null:typeof d=="function"?d:vt(+d),l):r},l.y=function(d){return arguments.length?(t=typeof d=="function"?d:vt(+d),n=null,l):t},l.y0=function(d){return arguments.length?(t=typeof d=="function"?d:vt(+d),l):t},l.y1=function(d){return arguments.length?(n=d==null?null:typeof d=="function"?d:vt(+d),l):n},l.lineX0=l.lineY0=function(){return u().x(e).y(t)},l.lineY1=function(){return u().x(e).y(n)},l.lineX1=function(){return u().x(r).y(t)},l.defined=function(d){return arguments.length?(o=typeof d=="function"?d:vt(!!d),l):o},l.curve=function(d){return arguments.length?(i=d,a!=null&&(s=i(a)),l):i},l.context=function(d){return arguments.length?(d==null?a=s=null:s=i(a=d),l):a},l}class L5{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function bie(e){return new L5(e,!0)}function xie(e){return new L5(e,!1)}const ww={draw(e,t){const n=vr(t/rp);e.moveTo(n,0),e.arc(0,0,n,0,op)}},wie={draw(e,t){const n=vr(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},F5=vr(1/3),_ie=F5*2,jie={draw(e,t){const n=vr(t/_ie),r=n*F5;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},Eie={draw(e,t){const n=vr(t),r=-n/2;e.rect(r,r,n,n)}},Sie=.8908130915292852,B5=np(rp/10)/np(7*rp/10),Cie=np(op/10)*B5,Oie=-k5(op/10)*B5,Mie={draw(e,t){const n=vr(t*Sie),r=Cie*n,o=Oie*n;e.moveTo(0,-n),e.lineTo(r,o);for(let a=1;a<5;++a){const i=op*a/5,s=k5(i),c=np(i);e.lineTo(c*n,-s*n),e.lineTo(s*r-c*o,c*r+s*o)}e.closePath()}},_w=vr(3),Nie={draw(e,t){const n=-vr(t/(_w*3));e.moveTo(0,n*2),e.lineTo(-_w*n,-n),e.lineTo(_w*n,-n),e.closePath()}},Wn=-.5,qn=vr(3)/2,jw=1/vr(12),Pie=(jw/2+1)*3,kie={draw(e,t){const n=vr(t/Pie),r=n/2,o=n*jw,a=r,i=n*jw+n,s=-a,c=i;e.moveTo(r,o),e.lineTo(a,i),e.lineTo(s,c),e.lineTo(Wn*r-qn*o,qn*r+Wn*o),e.lineTo(Wn*a-qn*i,qn*a+Wn*i),e.lineTo(Wn*s-qn*c,qn*s+Wn*c),e.lineTo(Wn*r+qn*o,Wn*o-qn*r),e.lineTo(Wn*a+qn*i,Wn*i-qn*a),e.lineTo(Wn*s+qn*c,Wn*c-qn*s),e.closePath()}};function Aie(e,t){let n=null,r=bw(o);e=typeof e=="function"?e:vt(e||ww),t=typeof t=="function"?t:vt(t===void 0?64:+t);function o(){let a;if(n||(n=a=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),a)return n=null,a+""||null}return o.type=function(a){return arguments.length?(e=typeof a=="function"?a:vt(a),o):e},o.size=function(a){return arguments.length?(t=typeof a=="function"?a:vt(+a),o):t},o.context=function(a){return arguments.length?(n=a??null,o):n},o}function sp(){}function cp(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function $5(e){this._context=e}$5.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:cp(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:cp(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Tie(e){return new $5(e)}function z5(e){this._context=e}z5.prototype={areaStart:sp,areaEnd:sp,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:cp(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Rie(e){return new z5(e)}function V5(e){this._context=e}V5.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:cp(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Iie(e){return new V5(e)}function U5(e){this._context=e}U5.prototype={areaStart:sp,areaEnd:sp,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function Die(e){return new U5(e)}function H5(e){return e<0?-1:1}function W5(e,t,n){var r=e._x1-e._x0,o=t-e._x1,a=(e._y1-e._y0)/(r||o<0&&-0),i=(n-e._y1)/(o||r<0&&-0),s=(a*o+i*r)/(r+o);return(H5(a)+H5(i))*Math.min(Math.abs(a),Math.abs(i),.5*Math.abs(s))||0}function q5(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function Ew(e,t,n){var r=e._x0,o=e._y0,a=e._x1,i=e._y1,s=(a-r)/3;e._context.bezierCurveTo(r+s,o+s*t,a-s,i-s*n,a,i)}function lp(e){this._context=e}lp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Ew(this,this._t0,q5(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Ew(this,q5(this,n=W5(this,e,t)),n);break;default:Ew(this,this._t0,n=W5(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function Y5(e){this._context=new K5(e)}(Y5.prototype=Object.create(lp.prototype)).point=function(e,t){lp.prototype.point.call(this,t,e)};function K5(e){this._context=e}K5.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,o,a){this._context.bezierCurveTo(t,e,r,n,a,o)}};function Lie(e){return new lp(e)}function Fie(e){return new Y5(e)}function X5(e){this._context=e}X5.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=G5(e),o=G5(t),a=0,i=1;i<n;++a,++i)this._context.bezierCurveTo(r[0][a],o[0][a],r[1][a],o[1][a],e[i],t[i]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function G5(e){var t,n=e.length-1,r,o=new Array(n),a=new Array(n),i=new Array(n);for(o[0]=0,a[0]=2,i[0]=e[0]+2*e[1],t=1;t<n-1;++t)o[t]=1,a[t]=4,i[t]=4*e[t]+2*e[t+1];for(o[n-1]=2,a[n-1]=7,i[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=o[t]/a[t-1],a[t]-=r,i[t]-=r*i[t-1];for(o[n-1]=i[n-1]/a[n-1],t=n-2;t>=0;--t)o[t]=(i[t]-o[t+1])/a[t];for(a[n-1]=(e[n]+o[n-1])/2,t=0;t<n-1;++t)a[t]=2*e[t+1]-o[t+1];return[o,a]}function Bie(e){return new X5(e)}function up(e,t){this._context=e,this._t=t}up.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function $ie(e){return new up(e,.5)}function zie(e){return new up(e,0)}function Vie(e){return new up(e,1)}function os(e,t){if((i=e.length)>1)for(var n=1,r,o,a=e[t[0]],i,s=a.length;n<i;++n)for(o=a,a=e[t[n]],r=0;r<s;++r)a[r][1]+=a[r][0]=isNaN(o[r][1])?o[r][0]:o[r][1]}function Sw(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function Uie(e,t){return e[t]}function Hie(e){const t=[];return t.key=e,t}function Wie(){var e=vt([]),t=Sw,n=os,r=Uie;function o(a){var i=Array.from(e.apply(this,arguments),Hie),s,c=i.length,l=-1,u;for(const d of a)for(s=0,++l;s<c;++s)(i[s][l]=[0,+r(d,i[s].key,l,a)]).data=d;for(s=0,u=xw(t(i));s<c;++s)i[u[s]].index=s;return n(i,u),i}return o.keys=function(a){return arguments.length?(e=typeof a=="function"?a:vt(Array.from(a)),o):e},o.value=function(a){return arguments.length?(r=typeof a=="function"?a:vt(+a),o):r},o.order=function(a){return arguments.length?(t=a==null?Sw:typeof a=="function"?a:vt(Array.from(a)),o):t},o.offset=function(a){return arguments.length?(n=a??os,o):n},o}function qie(e,t){if((r=e.length)>0){for(var n,r,o=0,a=e[0].length,i;o<a;++o){for(i=n=0;n<r;++n)i+=e[n][o][1]||0;if(i)for(n=0;n<r;++n)e[n][o][1]/=i}os(e,t)}}function Yie(e,t){if((o=e.length)>0){for(var n=0,r=e[t[0]],o,a=r.length;n<a;++n){for(var i=0,s=0;i<o;++i)s+=e[i][n][1]||0;r[n][1]+=r[n][0]=-s/2}os(e,t)}}function Kie(e,t){if(!(!((i=e.length)>0)||!((a=(o=e[t[0]]).length)>0))){for(var n=0,r=1,o,a,i;r<a;++r){for(var s=0,c=0,l=0;s<i;++s){for(var u=e[t[s]],d=u[r][1]||0,f=u[r-1][1]||0,p=(d-f)/2,y=0;y<s;++y){var m=e[t[y]],v=m[r][1]||0,b=m[r-1][1]||0;p+=v-b}c+=d,l+=p*d}o[r-1][1]+=o[r-1][0]=n,c&&(n-=l/c)}o[r-1][1]+=o[r-1][0]=n,os(e,t)}}function Ml(e){"@babel/helpers - typeof";return Ml=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ml(e)}var Xie=["type","size","sizeType"];function Cw(){return Cw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Cw.apply(this,arguments)}function Q5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function J5(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Q5(Object(n),!0).forEach(function(r){Gie(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q5(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Gie(e,t,n){return t=Qie(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Qie(e){var t=Jie(e,"string");return Ml(t)=="symbol"?t:t+""}function Jie(e,t){if(Ml(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Ml(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Zie(e,t){if(e==null)return{};var n=ese(e,t),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function ese(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var Z5={symbolCircle:ww,symbolCross:wie,symbolDiamond:jie,symbolSquare:Eie,symbolStar:Mie,symbolTriangle:Nie,symbolWye:kie},tse=Math.PI/180,nse=function(e){var t="symbol".concat(tp(e));return Z5[t]||ww},rse=function(e,t,n){if(t==="area")return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var r=18*tse;return 1.25*e*e*(Math.tan(r)-Math.tan(r*2)*Math.pow(Math.tan(r),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},ose=function(e,t){Z5["symbol".concat(tp(e))]=t},Ow=function(e){var t=e.type,n=t===void 0?"circle":t,r=e.size,o=r===void 0?64:r,a=e.sizeType,i=a===void 0?"area":a,s=Zie(e,Xie),c=J5(J5({},s),{},{type:n,size:o,sizeType:i}),l=function(){var y=nse(n),m=Aie().type(y).size(rse(o,i,n));return m()},u=c.className,d=c.cx,f=c.cy,p=nt(c,!0);return d===+d&&f===+f&&o===+o?V.createElement("path",Cw({},p,{className:st("recharts-symbols",u),transform:"translate(".concat(d,", ").concat(f,")"),d:l()})):null};Ow.registerSymbol=ose;function as(e){"@babel/helpers - typeof";return as=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},as(e)}function Mw(){return Mw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Mw.apply(this,arguments)}function e4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function ase(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?e4(Object(n),!0).forEach(function(r){Nl(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):e4(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ise(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function sse(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,n4(r.key),r)}}function cse(e,t,n){return t&&sse(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function lse(e,t,n){return t=dp(t),use(e,t4()?Reflect.construct(t,n||[],dp(e).constructor):t.apply(e,n))}function use(e,t){if(t&&(as(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return dse(e)}function dse(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function t4(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(t4=function(){return!!e})()}function dp(e){return dp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},dp(e)}function fse(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Nw(e,t)}function Nw(e,t){return Nw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Nw(e,t)}function Nl(e,t,n){return t=n4(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function n4(e){var t=pse(e,"string");return as(t)=="symbol"?t:t+""}function pse(e,t){if(as(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(as(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Yn=32,Pw=function(e){function t(){return ise(this,t),lse(this,t,arguments)}return fse(t,e),cse(t,[{key:"renderIcon",value:function(n){var r=this.props.inactiveColor,o=Yn/2,a=Yn/6,i=Yn/3,s=n.inactive?r:n.color;if(n.type==="plainline")return V.createElement("line",{strokeWidth:4,fill:"none",stroke:s,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:o,x2:Yn,y2:o,className:"recharts-legend-icon"});if(n.type==="line")return V.createElement("path",{strokeWidth:4,fill:"none",stroke:s,d:"M0,".concat(o,"h").concat(i,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(2*i,",").concat(o,`
            H`).concat(Yn,"M").concat(2*i,",").concat(o,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(i,",").concat(o),className:"recharts-legend-icon"});if(n.type==="rect")return V.createElement("path",{stroke:"none",fill:s,d:"M0,".concat(Yn/8,"h").concat(Yn,"v").concat(Yn*3/4,"h").concat(-Yn,"z"),className:"recharts-legend-icon"});if(V.isValidElement(n.legendIcon)){var c=ase({},n);return delete c.legendIcon,V.cloneElement(n.legendIcon,c)}return V.createElement(Ow,{fill:s,cx:o,cy:o,size:Yn,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,r=this.props,o=r.payload,a=r.iconSize,i=r.layout,s=r.formatter,c=r.inactiveColor,l={x:0,y:0,width:Yn,height:Yn},u={display:i==="horizontal"?"inline-block":"block",marginRight:10},d={display:"inline-block",verticalAlign:"middle",marginRight:4};return o.map(function(f,p){var y=f.formatter||s,m=st(Nl(Nl({"recharts-legend-item":!0},"legend-item-".concat(p),!0),"inactive",f.inactive));if(f.type==="none")return null;var v=We(f.value)?null:f.value;jo(!We(f.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var b=f.inactive?c:f.color;return V.createElement("li",Mw({className:m,style:u,key:"legend-item-".concat(p)},ep(n.props,f,p)),V.createElement(sw,{width:a,height:a,viewBox:l,style:d},n.renderIcon(f)),V.createElement("span",{className:"recharts-legend-item-text",style:{color:b}},y?y(v,f,p):v))})}},{key:"render",value:function(){var n=this.props,r=n.payload,o=n.layout,a=n.align;if(!r||!r.length)return null;var i={padding:0,margin:0,textAlign:o==="horizontal"?a:"left"};return V.createElement("ul",{className:"recharts-default-legend",style:i},this.renderItems())}}])}(g.PureComponent);Nl(Pw,"displayName","Legend"),Nl(Pw,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var kw,r4;function o4(){if(r4)return kw;r4=1;function e(t,n,r,o){for(var a=t.length,i=r+(o?1:-1);o?i--:++i<a;)if(n(t[i],i,t))return i;return-1}return kw=e,kw}var Aw,a4;function hse(){if(a4)return Aw;a4=1;function e(t){return t!==t}return Aw=e,Aw}var Tw,i4;function mse(){if(i4)return Tw;i4=1;function e(t,n,r){for(var o=r-1,a=t.length;++o<a;)if(t[o]===n)return o;return-1}return Tw=e,Tw}var Rw,s4;function yse(){if(s4)return Rw;s4=1;var e=o4(),t=hse(),n=mse();function r(o,a,i){return a===a?n(o,a,i):e(o,t,i)}return Rw=r,Rw}var Iw,c4;function gse(){if(c4)return Iw;c4=1;var e=yse();function t(n,r){var o=n==null?0:n.length;return!!o&&e(n,r,0)>-1}return Iw=t,Iw}var Dw,l4;function vse(){if(l4)return Dw;l4=1;function e(t,n,r){for(var o=-1,a=t==null?0:t.length;++o<a;)if(r(n,t[o]))return!0;return!1}return Dw=e,Dw}var Lw,u4;function bse(){if(u4)return Lw;u4=1;function e(){}return Lw=e,Lw}var Fw,d4;function xse(){if(d4)return Fw;d4=1;var e=tk(),t=bse(),n=wv(),r=1/0,o=e&&1/n(new e([,-0]))[1]==r?function(a){return new e(a)}:t;return Fw=o,Fw}var Bw,f4;function wse(){if(f4)return Bw;f4=1;var e=uP(),t=gse(),n=vse(),r=hP(),o=xse(),a=wv(),i=200;function s(c,l,u){var d=-1,f=t,p=c.length,y=!0,m=[],v=m;if(u)y=!1,f=n;else if(p>=i){var b=l?null:o(c);if(b)return a(b);y=!1,f=r,v=new e}else v=l?[]:m;e:for(;++d<p;){var x=c[d],j=l?l(x):x;if(x=u||x!==0?x:0,y&&j===j){for(var w=v.length;w--;)if(v[w]===j)continue e;l&&v.push(j),m.push(x)}else f(v,j,u)||(v!==m&&v.push(j),m.push(x))}return m}return Bw=s,Bw}var $w,p4;function _se(){if(p4)return $w;p4=1;var e=Mr(),t=wse();function n(r,o){return r&&r.length?t(r,e(o,2)):[]}return $w=n,$w}var jse=_se();const h4=Xe(jse);function m4(e,t,n){return t===!0?h4(e,n):We(t)?h4(e,t):e}function is(e){"@babel/helpers - typeof";return is=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},is(e)}var Ese=["ref"];function y4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Eo(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?y4(Object(n),!0).forEach(function(r){pp(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y4(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Sse(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g4(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,b4(r.key),r)}}function Cse(e,t,n){return t&&g4(e.prototype,t),n&&g4(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ose(e,t,n){return t=fp(t),Mse(e,v4()?Reflect.construct(t,n||[],fp(e).constructor):t.apply(e,n))}function Mse(e,t){if(t&&(is(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Nse(e)}function Nse(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v4(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(v4=function(){return!!e})()}function fp(e){return fp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},fp(e)}function Pse(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zw(e,t)}function zw(e,t){return zw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},zw(e,t)}function pp(e,t,n){return t=b4(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b4(e){var t=kse(e,"string");return is(t)=="symbol"?t:t+""}function kse(e,t){if(is(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(is(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ase(e,t){if(e==null)return{};var n=Tse(e,t),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Tse(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Rse(e){return e.value}function Ise(e,t){if(V.isValidElement(e))return V.cloneElement(e,t);if(typeof e=="function")return V.createElement(e,t);t.ref;var n=Ase(t,Ese);return V.createElement(Pw,n)}var x4=1,ss=function(e){function t(){var n;Sse(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return n=Ose(this,t,[].concat(o)),pp(n,"lastBoundingBox",{width:-1,height:-1}),n}return Pse(t,e),Cse(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,r=this.getBBox();r?(Math.abs(r.width-this.lastBoundingBox.width)>x4||Math.abs(r.height-this.lastBoundingBox.height)>x4)&&(this.lastBoundingBox.width=r.width,this.lastBoundingBox.height=r.height,n&&n(r)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Eo({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var r=this.props,o=r.layout,a=r.align,i=r.verticalAlign,s=r.margin,c=r.chartWidth,l=r.chartHeight,u,d;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(a==="center"&&o==="vertical"){var f=this.getBBoxSnapshot();u={left:((c||0)-f.width)/2}}else u=a==="right"?{right:s&&s.right||0}:{left:s&&s.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(i==="middle"){var p=this.getBBoxSnapshot();d={top:((l||0)-p.height)/2}}else d=i==="bottom"?{bottom:s&&s.bottom||0}:{top:s&&s.top||0};return Eo(Eo({},u),d)}},{key:"render",value:function(){var n=this,r=this.props,o=r.content,a=r.width,i=r.height,s=r.wrapperStyle,c=r.payloadUniqBy,l=r.payload,u=Eo(Eo({position:"absolute",width:a||"auto",height:i||"auto"},this.getDefaultPosition(s)),s);return V.createElement("div",{className:"recharts-legend-wrapper",style:u,ref:function(d){n.wrapperNode=d}},Ise(o,Eo(Eo({},this.props),{},{payload:m4(l,c,Rse)})))}}],[{key:"getWithHeight",value:function(n,r){var o=Eo(Eo({},this.defaultProps),n.props),a=o.layout;return a==="vertical"&&me(n.props.height)?{height:n.props.height}:a==="horizontal"?{width:n.props.width||r}:null}}])}(g.PureComponent);pp(ss,"displayName","Legend"),pp(ss,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var Vw,w4;function Dse(){if(w4)return Vw;w4=1;var e=oi(),t=Tu(),n=an(),r=e?e.isConcatSpreadable:void 0;function o(a){return n(a)||t(a)||!!(r&&a&&a[r])}return Vw=o,Vw}var Uw,_4;Dh=function(){if(_4)return Uw;_4=1;var e=Ev(),t=Dse();function n(r,o,a,i,s){var c=-1,l=r.length;for(a||(a=t),s||(s=[]);++c<l;){var u=r[c];o>0&&a(u)?o>1?n(u,o-1,a,i,s):e(s,u):i||(s[s.length]=u)}return s}return Uw=n,Uw};var Hw,j4;function Lse(){if(j4)return Hw;j4=1;function e(t){return function(n,r,o){for(var a=-1,i=Object(n),s=o(n),c=s.length;c--;){var l=s[t?c:++a];if(r(i[l],l,i)===!1)break}return n}}return Hw=e,Hw}var Ww,E4;dE=function(){if(E4)return Ww;E4=1;var e=Lse(),t=e();return Ww=t,Ww};var qw,S4;function C4(){if(S4)return qw;S4=1;var e=dE(),t=Js();function n(r,o){return r&&e(r,o,t)}return qw=n,qw}var Yw,O4;function Fse(){if(O4)return Yw;O4=1;var e=ua();function t(n,r){return function(o,a){if(o==null)return o;if(!e(o))return n(o,a);for(var i=o.length,s=r?i:-1,c=Object(o);(r?s--:++s<i)&&a(c[s],s,c)!==!1;);return o}}return Yw=t,Yw}var Kw,M4;function Xw(){if(M4)return Kw;M4=1;var e=C4(),t=Fse(),n=t(e);return Kw=n,Kw}var Gw,N4;function P4(){if(N4)return Gw;N4=1;var e=Xw(),t=ua();function n(r,o){var a=-1,i=t(r)?Array(r.length):[];return e(r,function(s,c,l){i[++a]=o(s,c,l)}),i}return Gw=n,Gw}var Qw,k4;function Bse(){if(k4)return Qw;k4=1;function e(t,n){var r=t.length;for(t.sort(n);r--;)t[r]=t[r].value;return t}return Qw=e,Qw}var Jw,A4;function $se(){if(A4)return Jw;A4=1;var e=Ni();function t(n,r){if(n!==r){var o=n!==void 0,a=n===null,i=n===n,s=e(n),c=r!==void 0,l=r===null,u=r===r,d=e(r);if(!l&&!d&&!s&&n>r||s&&c&&u&&!l&&!d||a&&c&&u||!o&&u||!i)return 1;if(!a&&!s&&!d&&n<r||d&&o&&i&&!a&&!s||l&&o&&i||!c&&i||!u)return-1}return 0}return Jw=t,Jw}var Zw,T4;function zse(){if(T4)return Zw;T4=1;var e=$se();function t(n,r,o){for(var a=-1,i=n.criteria,s=r.criteria,c=i.length,l=o.length;++a<c;){var u=e(i[a],s[a]);if(u){if(a>=l)return u;var d=o[a];return u*(d=="desc"?-1:1)}}return n.index-r.index}return Zw=t,Zw}var e1,R4;function Vse(){if(R4)return e1;R4=1;var e=qs(),t=ec(),n=Mr(),r=P4(),o=Bse(),a=km(),i=zse(),s=Pi(),c=an();function l(u,d,f){d.length?d=e(d,function(m){return c(m)?function(v){return t(v,m.length===1?m[0]:m)}:m}):d=[s];var p=-1;d=e(d,a(n));var y=r(u,function(m,v,b){var x=e(d,function(j){return j(m)});return{criteria:x,index:++p,value:m}});return o(y,function(m,v){return i(m,v,f)})}return e1=l,e1}var t1,I4;bE=function(){if(I4)return t1;I4=1;function e(t,n,r){switch(r.length){case 0:return t.call(n);case 1:return t.call(n,r[0]);case 2:return t.call(n,r[0],r[1]);case 3:return t.call(n,r[0],r[1],r[2])}return t.apply(n,r)}return t1=e,t1};var n1,D4;uE=function(){if(D4)return n1;D4=1;var e=bE(),t=Math.max;function n(r,o,a){return o=t(o===void 0?r.length-1:o,0),function(){for(var i=arguments,s=-1,c=t(i.length-o,0),l=Array(c);++s<c;)l[s]=i[o+s];s=-1;for(var u=Array(o+1);++s<o;)u[s]=i[s];return u[o]=a(l),e(r,this,u)}}return n1=n,n1};var r1,L4;function Use(){if(L4)return r1;L4=1;function e(t){return function(){return t}}return r1=e,r1}var o1,F4;function Hse(){if(F4)return o1;F4=1;var e=Use(),t=Bk(),n=Pi(),r=t?function(o,a){return t(o,"toString",{configurable:!0,enumerable:!1,value:e(a),writable:!0})}:n;return o1=r,o1}var a1,B4;function Wse(){if(B4)return a1;B4=1;var e=800,t=16,n=Date.now;function r(o){var a=0,i=0;return function(){var s=n(),c=t-(s-i);if(i=s,c>0){if(++a>=e)return arguments[0]}else a=0;return o.apply(void 0,arguments)}}return a1=r,a1}var i1,$4;lE=function(){if($4)return i1;$4=1;var e=Hse(),t=Wse(),n=t(e);return i1=n,i1};var s1,z4;fE=function(){if(z4)return s1;z4=1;var e=Pi(),t=uE(),n=lE();function r(o,a){return n(t(o,a,e),o+"")}return s1=r,s1};var c1,V4;ei=function(){if(V4)return c1;V4=1;var e=Ys(),t=ua(),n=qd(),r=tr();function o(a,i,s){if(!r(s))return!1;var c=typeof i;return(c=="number"?t(s)&&n(i,s.length):c=="string"&&i in s)?e(s[i],a):!1}return c1=o,c1};var l1,U4;function qse(){if(U4)return l1;U4=1;var e=Dh(),t=Vse(),n=fE(),r=ei(),o=n(function(a,i){if(a==null)return[];var s=i.length;return s>1&&r(a,i[0],i[1])?i=[]:s>2&&r(i[0],i[1],i[2])&&(i=[i[0]]),t(a,e(i,1),[])});return l1=o,l1}var Yse=qse();const u1=Xe(Yse);function Pl(e){"@babel/helpers - typeof";return Pl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pl(e)}function d1(){return d1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d1.apply(this,arguments)}function Kse(e,t){return Jse(e)||Qse(e,t)||Gse(e,t)||Xse()}function Xse(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Gse(e,t){if(e){if(typeof e=="string")return H4(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return H4(e,t)}}function H4(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Qse(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,o,a,i,s=[],c=!0,l=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(c=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(u){l=!0,o=u}finally{try{if(!c&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return s}}function Jse(e){if(Array.isArray(e))return e}function W4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function f1(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?W4(Object(n),!0).forEach(function(r){Zse(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W4(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Zse(e,t,n){return t=ece(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ece(e){var t=tce(e,"string");return Pl(t)=="symbol"?t:t+""}function tce(e,t){if(Pl(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Pl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function nce(e){return Array.isArray(e)&&Bt(e[0])&&Bt(e[1])?e.join(" ~ "):e}var rce=function(e){var t=e.separator,n=t===void 0?" : ":t,r=e.contentStyle,o=r===void 0?{}:r,a=e.itemStyle,i=a===void 0?{}:a,s=e.labelStyle,c=s===void 0?{}:s,l=e.payload,u=e.formatter,d=e.itemSorter,f=e.wrapperClassName,p=e.labelClassName,y=e.label,m=e.labelFormatter,v=e.accessibilityLayer,b=v===void 0?!1:v,x=function(){if(l&&l.length){var P={padding:0,margin:0},N=(d?u1(l,d):l).map(function(R,A){if(R.type==="none")return null;var O=f1({display:"block",paddingTop:4,paddingBottom:4,color:R.color||"#000"},i),k=R.formatter||u||nce,T=R.value,I=R.name,L=T,D=I;if(k&&L!=null&&D!=null){var z=k(T,I,R,A,l);if(Array.isArray(z)){var H=Kse(z,2);L=H[0],D=H[1]}else L=z}return V.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(A),style:O},Bt(D)?V.createElement("span",{className:"recharts-tooltip-item-name"},D):null,Bt(D)?V.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,V.createElement("span",{className:"recharts-tooltip-item-value"},L),V.createElement("span",{className:"recharts-tooltip-item-unit"},R.unit||""))});return V.createElement("ul",{className:"recharts-tooltip-item-list",style:P},N)}return null},j=f1({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},o),w=f1({margin:0},c),_=!rt(y),E=_?y:"",S=st("recharts-default-tooltip",f),C=st("recharts-tooltip-label",p);_&&m&&l!==void 0&&l!==null&&(E=m(y,l));var M=b?{role:"status","aria-live":"assertive"}:{};return V.createElement("div",d1({className:S,style:j},M),V.createElement("p",{className:C,style:w},V.isValidElement(E)?E:"".concat(E)),x())};function kl(e){"@babel/helpers - typeof";return kl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kl(e)}function hp(e,t,n){return t=oce(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oce(e){var t=ace(e,"string");return kl(t)=="symbol"?t:t+""}function ace(e,t){if(kl(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(kl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Al="recharts-tooltip-wrapper",ice={visibility:"hidden"};function sce(e){var t=e.coordinate,n=e.translateX,r=e.translateY;return st(Al,hp(hp(hp(hp({},"".concat(Al,"-right"),me(n)&&t&&me(t.x)&&n>=t.x),"".concat(Al,"-left"),me(n)&&t&&me(t.x)&&n<t.x),"".concat(Al,"-bottom"),me(r)&&t&&me(t.y)&&r>=t.y),"".concat(Al,"-top"),me(r)&&t&&me(t.y)&&r<t.y))}function q4(e){var t=e.allowEscapeViewBox,n=e.coordinate,r=e.key,o=e.offsetTopLeft,a=e.position,i=e.reverseDirection,s=e.tooltipDimension,c=e.viewBox,l=e.viewBoxDimension;if(a&&me(a[r]))return a[r];var u=n[r]-s-o,d=n[r]+o;if(t[r])return i[r]?u:d;if(i[r]){var f=u,p=c[r];return f<p?Math.max(d,c[r]):Math.max(u,c[r])}var y=d+s,m=c[r]+l;return y>m?Math.max(u,c[r]):Math.max(d,c[r])}function cce(e){var t=e.translateX,n=e.translateY,r=e.useTranslate3d;return{transform:r?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}function lce(e){var t=e.allowEscapeViewBox,n=e.coordinate,r=e.offsetTopLeft,o=e.position,a=e.reverseDirection,i=e.tooltipBox,s=e.useTranslate3d,c=e.viewBox,l,u,d;return i.height>0&&i.width>0&&n?(u=q4({allowEscapeViewBox:t,coordinate:n,key:"x",offsetTopLeft:r,position:o,reverseDirection:a,tooltipDimension:i.width,viewBox:c,viewBoxDimension:c.width}),d=q4({allowEscapeViewBox:t,coordinate:n,key:"y",offsetTopLeft:r,position:o,reverseDirection:a,tooltipDimension:i.height,viewBox:c,viewBoxDimension:c.height}),l=cce({translateX:u,translateY:d,useTranslate3d:s})):l=ice,{cssProperties:l,cssClasses:sce({translateX:u,translateY:d,coordinate:n})}}function cs(e){"@babel/helpers - typeof";return cs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cs(e)}function Y4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function K4(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Y4(Object(n),!0).forEach(function(r){h1(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y4(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function uce(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dce(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,G4(r.key),r)}}function fce(e,t,n){return t&&dce(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function pce(e,t,n){return t=mp(t),hce(e,X4()?Reflect.construct(t,n||[],mp(e).constructor):t.apply(e,n))}function hce(e,t){if(t&&(cs(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return mce(e)}function mce(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function X4(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(X4=function(){return!!e})()}function mp(e){return mp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},mp(e)}function yce(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p1(e,t)}function p1(e,t){return p1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},p1(e,t)}function h1(e,t,n){return t=G4(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function G4(e){var t=gce(e,"string");return cs(t)=="symbol"?t:t+""}function gce(e,t){if(cs(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(cs(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Q4=1,vce=function(e){function t(){var n;uce(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return n=pce(this,t,[].concat(o)),h1(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),h1(n,"handleKeyDown",function(i){if(i.key==="Escape"){var s,c,l,u;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(s=(c=n.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&s!==void 0?s:0,y:(l=(u=n.props.coordinate)===null||u===void 0?void 0:u.y)!==null&&l!==void 0?l:0}})}}),n}return yce(t,e),fce(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>Q4||Math.abs(n.height-this.state.lastBoundingBox.height)>Q4)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,r;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,r=this.props,o=r.active,a=r.allowEscapeViewBox,i=r.animationDuration,s=r.animationEasing,c=r.children,l=r.coordinate,u=r.hasPayload,d=r.isAnimationActive,f=r.offset,p=r.position,y=r.reverseDirection,m=r.useTranslate3d,v=r.viewBox,b=r.wrapperStyle,x=lce({allowEscapeViewBox:a,coordinate:l,offsetTopLeft:f,position:p,reverseDirection:y,tooltipBox:this.state.lastBoundingBox,useTranslate3d:m,viewBox:v}),j=x.cssClasses,w=x.cssProperties,_=K4(K4({transition:d&&o?"transform ".concat(i,"ms ").concat(s):void 0},w),{},{pointerEvents:"none",visibility:!this.state.dismissed&&o&&u?"visible":"hidden",position:"absolute",top:0,left:0},b);return V.createElement("div",{tabIndex:-1,className:j,style:_,ref:function(E){n.wrapperNode=E}},c)}}])}(g.PureComponent),bce=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},ea={isSsr:bce(),get:function(e){return ea[e]},set:function(e,t){if(typeof e=="string")ea[e]=t;else{var n=Object.keys(e);n&&n.length&&n.forEach(function(r){ea[r]=e[r]})}}};function ls(e){"@babel/helpers - typeof";return ls=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ls(e)}function J4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Z4(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?J4(Object(n),!0).forEach(function(r){y1(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J4(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function xce(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wce(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,tL(r.key),r)}}function _ce(e,t,n){return t&&wce(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function jce(e,t,n){return t=yp(t),Ece(e,eL()?Reflect.construct(t,n||[],yp(e).constructor):t.apply(e,n))}function Ece(e,t){if(t&&(ls(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Sce(e)}function Sce(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function eL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(eL=function(){return!!e})()}function yp(e){return yp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},yp(e)}function Cce(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m1(e,t)}function m1(e,t){return m1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},m1(e,t)}function y1(e,t,n){return t=tL(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tL(e){var t=Oce(e,"string");return ls(t)=="symbol"?t:t+""}function Oce(e,t){if(ls(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(ls(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Mce(e){return e.dataKey}function Nce(e,t){return V.isValidElement(e)?V.cloneElement(e,t):typeof e=="function"?V.createElement(e,t):V.createElement(rce,t)}var Lr=function(e){function t(){return xce(this,t),jce(this,t,arguments)}return Cce(t,e),_ce(t,[{key:"render",value:function(){var n=this,r=this.props,o=r.active,a=r.allowEscapeViewBox,i=r.animationDuration,s=r.animationEasing,c=r.content,l=r.coordinate,u=r.filterNull,d=r.isAnimationActive,f=r.offset,p=r.payload,y=r.payloadUniqBy,m=r.position,v=r.reverseDirection,b=r.useTranslate3d,x=r.viewBox,j=r.wrapperStyle,w=p??[];u&&w.length&&(w=m4(p.filter(function(E){return E.value!=null&&(E.hide!==!0||n.props.includeHidden)}),y,Mce));var _=w.length>0;return V.createElement(vce,{allowEscapeViewBox:a,animationDuration:i,animationEasing:s,isAnimationActive:d,active:o,coordinate:l,hasPayload:_,offset:f,position:m,reverseDirection:v,useTranslate3d:b,viewBox:x,wrapperStyle:j},Nce(c,Z4(Z4({},this.props),{},{payload:w})))}}])}(g.PureComponent);y1(Lr,"displayName","Tooltip"),y1(Lr,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!ea.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var g1,nL;function Pce(){if(nL)return g1;nL=1;var e=er(),t=function(){return e.Date.now()};return g1=t,g1}var v1,rL;function kce(){if(rL)return v1;rL=1;var e=/\s/;function t(n){for(var r=n.length;r--&&e.test(n.charAt(r)););return r}return v1=t,v1}var b1,oL;function Ace(){if(oL)return b1;oL=1;var e=kce(),t=/^\s+/;function n(r){return r&&r.slice(0,e(r)+1).replace(t,"")}return b1=n,b1}var x1,aL;function iL(){if(aL)return x1;aL=1;var e=Ace(),t=tr(),n=Ni(),r=NaN,o=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,i=/^0o[0-7]+$/i,s=parseInt;function c(l){if(typeof l=="number")return l;if(n(l))return r;if(t(l)){var u=typeof l.valueOf=="function"?l.valueOf():l;l=t(u)?u+"":u}if(typeof l!="string")return l===0?l:+l;l=e(l);var d=a.test(l);return d||i.test(l)?s(l.slice(2),d?2:8):o.test(l)?r:+l}return x1=c,x1}var w1,sL;yE=function(){if(sL)return w1;sL=1;var e=tr(),t=Pce(),n=iL(),r="Expected a function",o=Math.max,a=Math.min;function i(s,c,l){var u,d,f,p,y,m,v=0,b=!1,x=!1,j=!0;if(typeof s!="function")throw new TypeError(r);c=n(c)||0,e(l)&&(b=!!l.leading,x="maxWait"in l,f=x?o(n(l.maxWait)||0,c):f,j="trailing"in l?!!l.trailing:j);function w(A){var O=u,k=d;return u=d=void 0,v=A,p=s.apply(k,O),p}function _(A){return v=A,y=setTimeout(C,c),b?w(A):p}function E(A){var O=A-m,k=A-v,T=c-O;return x?a(T,f-k):T}function S(A){var O=A-m,k=A-v;return m===void 0||O>=c||O<0||x&&k>=f}function C(){var A=t();if(S(A))return M(A);y=setTimeout(C,E(A))}function M(A){return y=void 0,j&&u?w(A):(u=d=void 0,p)}function P(){y!==void 0&&clearTimeout(y),v=0,u=m=d=y=void 0}function N(){return y===void 0?p:M(t())}function R(){var A=t(),O=S(A);if(u=arguments,d=this,m=A,O){if(y===void 0)return _(m);if(x)return clearTimeout(y),y=setTimeout(C,c),w(m)}return y===void 0&&(y=setTimeout(C,c)),p}return R.cancel=P,R.flush=N,R}return w1=i,w1};var _1,cL;function Tce(){if(cL)return _1;cL=1;var e=yE(),t=tr(),n="Expected a function";function r(o,a,i){var s=!0,c=!0;if(typeof o!="function")throw new TypeError(n);return t(i)&&(s="leading"in i?!!i.leading:s,c="trailing"in i?!!i.trailing:c),e(o,a,{leading:s,maxWait:a,trailing:c})}return _1=r,_1}var Rce=Tce();Fh=Xe(Rce);function Tl(e){"@babel/helpers - typeof";return Tl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tl(e)}function lL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function gp(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?lL(Object(n),!0).forEach(function(r){Ice(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lL(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Ice(e,t,n){return t=Dce(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Dce(e){var t=Lce(e,"string");return Tl(t)=="symbol"?t:t+""}function Lce(e,t){if(Tl(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Tl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Fce(e,t){return Vce(e)||zce(e,t)||$ce(e,t)||Bce()}function Bce(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $ce(e,t){if(e){if(typeof e=="string")return uL(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return uL(e,t)}}function uL(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function zce(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,o,a,i,s=[],c=!0,l=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(c=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(u){l=!0,o=u}finally{try{if(!c&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return s}}function Vce(e){if(Array.isArray(e))return e}var Uce=g.forwardRef(function(e,t){var n=e.aspect,r=e.initialDimension,o=r===void 0?{width:-1,height:-1}:r,a=e.width,i=a===void 0?"100%":a,s=e.height,c=s===void 0?"100%":s,l=e.minWidth,u=l===void 0?0:l,d=e.minHeight,f=e.maxHeight,p=e.children,y=e.debounce,m=y===void 0?0:y,v=e.id,b=e.className,x=e.onResize,j=e.style,w=j===void 0?{}:j,_=g.useRef(null),E=g.useRef();E.current=x,g.useImperativeHandle(t,function(){return Object.defineProperty(_.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),_.current},configurable:!0})});var S=g.useState({containerWidth:o.width,containerHeight:o.height}),C=Fce(S,2),M=C[0],P=C[1],N=g.useCallback(function(A,O){P(function(k){var T=Math.round(A),I=Math.round(O);return k.containerWidth===T&&k.containerHeight===I?k:{containerWidth:T,containerHeight:I}})},[]);g.useEffect(function(){var A=function(L){var D,z=L[0].contentRect,H=z.width,F=z.height;N(H,F),(D=E.current)===null||D===void 0||D.call(E,H,F)};m>0&&(A=Fh(A,m,{trailing:!0,leading:!1}));var O=new ResizeObserver(A),k=_.current.getBoundingClientRect(),T=k.width,I=k.height;return N(T,I),O.observe(_.current),function(){O.disconnect()}},[N,m]);var R=g.useMemo(function(){var A=M.containerWidth,O=M.containerHeight;if(A<0||O<0)return null;jo(Ia(i)||Ia(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,i,c),jo(!n||n>0,"The aspect(%s) must be greater than zero.",n);var k=Ia(i)?A:i,T=Ia(c)?O:c;n&&n>0&&(k?T=k/n:T&&(k=T*n),f&&T>f&&(T=f)),jo(k>0||T>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,k,T,i,c,u,d,n);var I=!Array.isArray(p)&&_o(p.type).endsWith("Chart");return V.Children.map(p,function(L){return V.isValidElement(L)?g.cloneElement(L,gp({width:k,height:T},I?{style:gp({height:"100%",width:"100%",maxHeight:T,maxWidth:k},L.props.style)}:{})):L})},[n,p,c,f,d,u,M,i]);return V.createElement("div",{id:v?"".concat(v):void 0,className:st("recharts-responsive-container",b),style:gp(gp({},w),{},{width:i,height:c,minWidth:u,minHeight:d,maxHeight:f}),ref:_},R)}),dL=function(e){return null};dL.displayName="Cell";function Rl(e){"@babel/helpers - typeof";return Rl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rl(e)}function fL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function j1(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?fL(Object(n),!0).forEach(function(r){Hce(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fL(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Hce(e,t,n){return t=Wce(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Wce(e){var t=qce(e,"string");return Rl(t)=="symbol"?t:t+""}function qce(e,t){if(Rl(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Rl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var us={widthCache:{},cacheCount:0},Yce=2e3,Kce={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},pL="recharts_measurement_span";function Xce(e){var t=j1({},e);return Object.keys(t).forEach(function(n){t[n]||delete t[n]}),t}var Il=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||ea.isSsr)return{width:0,height:0};var n=Xce(t),r=JSON.stringify({text:e,copyStyle:n});if(us.widthCache[r])return us.widthCache[r];try{var o=document.getElementById(pL);o||(o=document.createElement("span"),o.setAttribute("id",pL),o.setAttribute("aria-hidden","true"),document.body.appendChild(o));var a=j1(j1({},Kce),n);Object.assign(o.style,a),o.textContent="".concat(e);var i=o.getBoundingClientRect(),s={width:i.width,height:i.height};return us.widthCache[r]=s,++us.cacheCount>Yce&&(us.cacheCount=0,us.widthCache={}),s}catch{return{width:0,height:0}}},Gce=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function Dl(e){"@babel/helpers - typeof";return Dl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dl(e)}function vp(e,t){return ele(e)||Zce(e,t)||Jce(e,t)||Qce()}function Qce(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Jce(e,t){if(e){if(typeof e=="string")return hL(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hL(e,t)}}function hL(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Zce(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,o,a,i,s=[],c=!0,l=!1;try{if(a=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(u){l=!0,o=u}finally{try{if(!c&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return s}}function ele(e){if(Array.isArray(e))return e}function tle(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mL(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,rle(r.key),r)}}function nle(e,t,n){return t&&mL(e.prototype,t),n&&mL(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function rle(e){var t=ole(e,"string");return Dl(t)=="symbol"?t:t+""}function ole(e,t){if(Dl(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Dl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var yL=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,gL=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,ale=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,ile=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,vL={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},sle=Object.keys(vL),ds="NaN";function cle(e,t){return e*vL[t]}var bp=function(){function e(t,n){tle(this,e),this.num=t,this.unit=n,this.num=t,this.unit=n,Number.isNaN(t)&&(this.unit=""),n!==""&&!ale.test(n)&&(this.num=NaN,this.unit=""),sle.includes(n)&&(this.num=cle(t,n),this.unit="px")}return nle(e,[{key:"add",value:function(t){return this.unit!==t.unit?new e(NaN,""):new e(this.num+t.num,this.unit)}},{key:"subtract",value:function(t){return this.unit!==t.unit?new e(NaN,""):new e(this.num-t.num,this.unit)}},{key:"multiply",value:function(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new e(NaN,""):new e(this.num*t.num,this.unit||t.unit)}},{key:"divide",value:function(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new e(NaN,""):new e(this.num/t.num,this.unit||t.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(t){var n,r=(n=ile.exec(t))!==null&&n!==void 0?n:[],o=vp(r,3),a=o[1],i=o[2];return new e(parseFloat(a),i??"")}}])}();function bL(e){if(e.includes(ds))return ds;for(var t=e;t.includes("*")||t.includes("/");){var n,r=(n=yL.exec(t))!==null&&n!==void 0?n:[],o=vp(r,4),a=o[1],i=o[2],s=o[3],c=bp.parse(a??""),l=bp.parse(s??""),u=i==="*"?c.multiply(l):c.divide(l);if(u.isNaN())return ds;t=t.replace(yL,u.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var d,f=(d=gL.exec(t))!==null&&d!==void 0?d:[],p=vp(f,4),y=p[1],m=p[2],v=p[3],b=bp.parse(y??""),x=bp.parse(v??""),j=m==="+"?b.add(x):b.subtract(x);if(j.isNaN())return ds;t=t.replace(gL,j.toString())}return t}var xL=/\(([^()]*)\)/;function lle(e){for(var t=e;t.includes("(");){var n=xL.exec(t),r=vp(n,2),o=r[1];t=t.replace(xL,bL(o))}return t}function ule(e){var t=e.replace(/\s+/g,"");return t=lle(t),t=bL(t),t}function dle(e){try{return ule(e)}catch{return ds}}function E1(e){var t=dle(e.slice(5,-1));return t===ds?"":t}var fle=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],ple=["dx","dy","angle","className","breakAll"];function S1(){return S1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},S1.apply(this,arguments)}function wL(e,t){if(e==null)return{};var n=hle(e,t),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function hle(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function _L(e,t){return vle(e)||gle(e,t)||yle(e,t)||mle()}function mle(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yle(e,t){if(e){if(typeof e=="string")return jL(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jL(e,t)}}function jL(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function gle(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,o,a,i,s=[],c=!0,l=!1;try{if(a=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(u){l=!0,o=u}finally{try{if(!c&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return s}}function vle(e){if(Array.isArray(e))return e}var EL=/[ \f\n\r\t\v\u2028\u2029]+/,SL=function(e){var t=e.children,n=e.breakAll,r=e.style;try{var o=[];rt(t)||(n?o=t.toString().split(""):o=t.toString().split(EL));var a=o.map(function(s){return{word:s,width:Il(s,r).width}}),i=n?0:Il("\xA0",r).width;return{wordsWithComputedWidth:a,spaceWidth:i}}catch{return null}},ble=function(e,t,n,r,o){var a=e.maxLines,i=e.children,s=e.style,c=e.breakAll,l=me(a),u=i,d=function(){var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return A.reduce(function(O,k){var T=k.word,I=k.width,L=O[O.length-1];if(L&&(r==null||o||L.width+I+n<Number(r)))L.words.push(T),L.width+=I+n;else{var D={words:[T],width:I};O.push(D)}return O},[])},f=d(t),p=function(A){return A.reduce(function(O,k){return O.width>k.width?O:k})};if(!l)return f;for(var y="\u2026",m=function(A){var O=u.slice(0,A),k=SL({breakAll:c,style:s,children:O+y}).wordsWithComputedWidth,T=d(k),I=T.length>a||p(T).width>Number(r);return[I,T]},v=0,b=u.length-1,x=0,j;v<=b&&x<=u.length-1;){var w=Math.floor((v+b)/2),_=w-1,E=m(_),S=_L(E,2),C=S[0],M=S[1],P=m(w),N=_L(P,1),R=N[0];if(!C&&!R&&(v=w+1),C&&R&&(b=w-1),!C&&R){j=M;break}x++}return j||f},CL=function(e){var t=rt(e)?[]:e.toString().split(EL);return[{words:t}]},xle=function(e){var t=e.width,n=e.scaleToFit,r=e.children,o=e.style,a=e.breakAll,i=e.maxLines;if((t||n)&&!ea.isSsr){var s,c,l=SL({breakAll:a,children:r,style:o});if(l){var u=l.wordsWithComputedWidth,d=l.spaceWidth;s=u,c=d}else return CL(r);return ble({breakAll:a,children:r,maxLines:i,style:o},s,c,t,n)}return CL(r)},OL="#808080",xp=function(e){var t=e.x,n=t===void 0?0:t,r=e.y,o=r===void 0?0:r,a=e.lineHeight,i=a===void 0?"1em":a,s=e.capHeight,c=s===void 0?"0.71em":s,l=e.scaleToFit,u=l===void 0?!1:l,d=e.textAnchor,f=d===void 0?"start":d,p=e.verticalAnchor,y=p===void 0?"end":p,m=e.fill,v=m===void 0?OL:m,b=wL(e,fle),x=g.useMemo(function(){return xle({breakAll:b.breakAll,children:b.children,maxLines:b.maxLines,scaleToFit:u,style:b.style,width:b.width})},[b.breakAll,b.children,b.maxLines,u,b.style,b.width]),j=b.dx,w=b.dy,_=b.angle,E=b.className,S=b.breakAll,C=wL(b,ple);if(!Bt(n)||!Bt(o))return null;var M=n+(me(j)?j:0),P=o+(me(w)?w:0),N;switch(y){case"start":N=E1("calc(".concat(c,")"));break;case"middle":N=E1("calc(".concat((x.length-1)/2," * -").concat(i," + (").concat(c," / 2))"));break;default:N=E1("calc(".concat(x.length-1," * -").concat(i,")"));break}var R=[];if(u){var A=x[0].width,O=b.width;R.push("scale(".concat((me(O)?O/A:1)/A,")"))}return _&&R.push("rotate(".concat(_,", ").concat(M,", ").concat(P,")")),R.length&&(C.transform=R.join(" ")),V.createElement("text",S1({},nt(C,!0),{x:M,y:P,className:st("recharts-text",E),textAnchor:f,fill:v.includes("url")?OL:v}),x.map(function(k,T){var I=k.words.join(S?"":" ");return V.createElement("tspan",{x:M,dy:T===0?N:i,key:"".concat(I,"-").concat(T)},I)}))};function ta(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function wle(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function C1(e){let t,n,r;e.length!==2?(t=ta,n=(s,c)=>ta(e(s),c),r=(s,c)=>e(s)-c):(t=e===ta||e===wle?e:_le,n=e,r=e);function o(s,c,l=0,u=s.length){if(l<u){if(t(c,c)!==0)return u;do{const d=l+u>>>1;n(s[d],c)<0?l=d+1:u=d}while(l<u)}return l}function a(s,c,l=0,u=s.length){if(l<u){if(t(c,c)!==0)return u;do{const d=l+u>>>1;n(s[d],c)<=0?l=d+1:u=d}while(l<u)}return l}function i(s,c,l=0,u=s.length){const d=o(s,c,l,u-1);return d>l&&r(s[d-1],c)>-r(s[d],c)?d-1:d}return{left:o,center:i,right:a}}function _le(){return 0}function ML(e){return e===null?NaN:+e}function*jle(e,t){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const Ele=C1(ta),Ll=Ele.right;C1(ML).center;class NL extends Map{constructor(t,n=Ole){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,o]of t)this.set(r,o)}get(t){return super.get(PL(this,t))}has(t){return super.has(PL(this,t))}set(t,n){return super.set(Sle(this,t),n)}delete(t){return super.delete(Cle(this,t))}}function PL({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function Sle({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function Cle({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function Ole(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Mle(e=ta){if(e===ta)return kL;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function kL(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const Nle=Math.sqrt(50),Ple=Math.sqrt(10),kle=Math.sqrt(2);function wp(e,t,n){const r=(t-e)/Math.max(0,n),o=Math.floor(Math.log10(r)),a=r/Math.pow(10,o),i=a>=Nle?10:a>=Ple?5:a>=kle?2:1;let s,c,l;return o<0?(l=Math.pow(10,-o)/i,s=Math.round(e*l),c=Math.round(t*l),s/l<e&&++s,c/l>t&&--c,l=-l):(l=Math.pow(10,o)*i,s=Math.round(e/l),c=Math.round(t/l),s*l<e&&++s,c*l>t&&--c),c<s&&.5<=n&&n<2?wp(e,t,n*2):[s,c,l]}function O1(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[o,a,i]=r?wp(t,e,n):wp(e,t,n);if(!(a>=o))return[];const s=a-o+1,c=new Array(s);if(r)if(i<0)for(let l=0;l<s;++l)c[l]=(a-l)/-i;else for(let l=0;l<s;++l)c[l]=(a-l)*i;else if(i<0)for(let l=0;l<s;++l)c[l]=(o+l)/-i;else for(let l=0;l<s;++l)c[l]=(o+l)*i;return c}function M1(e,t,n){return t=+t,e=+e,n=+n,wp(e,t,n)[2]}function N1(e,t,n){t=+t,e=+e,n=+n;const r=t<e,o=r?M1(t,e,n):M1(e,t,n);return(r?-1:1)*(o<0?1/-o:o)}function AL(e,t){let n;for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function TL(e,t){let n;for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function RL(e,t,n=0,r=1/0,o){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(o=o===void 0?kL:Mle(o);r>n;){if(r-n>600){const c=r-n+1,l=t-n+1,u=Math.log(c),d=.5*Math.exp(2*u/3),f=.5*Math.sqrt(u*d*(c-d)/c)*(l-c/2<0?-1:1),p=Math.max(n,Math.floor(t-l*d/c+f)),y=Math.min(r,Math.floor(t+(c-l)*d/c+f));RL(e,t,p,y,o)}const a=e[t];let i=n,s=r;for(Fl(e,n,t),o(e[r],a)>0&&Fl(e,n,r);i<s;){for(Fl(e,i,s),++i,--s;o(e[i],a)<0;)++i;for(;o(e[s],a)>0;)--s}o(e[n],a)===0?Fl(e,n,s):(++s,Fl(e,s,r)),s<=t&&(n=s+1),t<=s&&(r=s-1)}return e}function Fl(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function Ale(e,t,n){if(e=Float64Array.from(jle(e)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return TL(e);if(t>=1)return AL(e);var r,o=(r-1)*t,a=Math.floor(o),i=AL(RL(e,a).subarray(0,a+1)),s=TL(e.subarray(a+1));return i+(s-i)*(o-a)}}function Tle(e,t,n=ML){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,o=(r-1)*t,a=Math.floor(o),i=+n(e[a],a,e),s=+n(e[a+1],a+1,e);return i+(s-i)*(o-a)}}function Rle(e,t,n){e=+e,t=+t,n=(o=arguments.length)<2?(t=e,e=0,1):o<3?1:+n;for(var r=-1,o=Math.max(0,Math.ceil((t-e)/n))|0,a=new Array(o);++r<o;)a[r]=e+r*n;return a}function Kn(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function So(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const P1=Symbol("implicit");function k1(){var e=new NL,t=[],n=[],r=P1;function o(a){let i=e.get(a);if(i===void 0){if(r!==P1)return r;e.set(a,i=t.push(a)-1)}return n[i%n.length]}return o.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new NL;for(const i of a)e.has(i)||e.set(i,t.push(i)-1);return o},o.range=function(a){return arguments.length?(n=Array.from(a),o):n.slice()},o.unknown=function(a){return arguments.length?(r=a,o):r},o.copy=function(){return k1(t,n).unknown(r)},Kn.apply(o,arguments),o}function Bl(){var e=k1().unknown(void 0),t=e.domain,n=e.range,r=0,o=1,a,i,s=!1,c=0,l=0,u=.5;delete e.unknown;function d(){var f=t().length,p=o<r,y=p?o:r,m=p?r:o;a=(m-y)/Math.max(1,f-c+l*2),s&&(a=Math.floor(a)),y+=(m-y-a*(f-c))*u,i=a*(1-c),s&&(y=Math.round(y),i=Math.round(i));var v=Rle(f).map(function(b){return y+a*b});return n(p?v.reverse():v)}return e.domain=function(f){return arguments.length?(t(f),d()):t()},e.range=function(f){return arguments.length?([r,o]=f,r=+r,o=+o,d()):[r,o]},e.rangeRound=function(f){return[r,o]=f,r=+r,o=+o,s=!0,d()},e.bandwidth=function(){return i},e.step=function(){return a},e.round=function(f){return arguments.length?(s=!!f,d()):s},e.padding=function(f){return arguments.length?(c=Math.min(1,l=+f),d()):c},e.paddingInner=function(f){return arguments.length?(c=Math.min(1,f),d()):c},e.paddingOuter=function(f){return arguments.length?(l=+f,d()):l},e.align=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),d()):u},e.copy=function(){return Bl(t(),[r,o]).round(s).paddingInner(c).paddingOuter(l).align(u)},Kn.apply(d(),arguments)}function IL(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return IL(t())},e}function $l(){return IL(Bl.apply(null,arguments).paddingInner(1))}function Ile(e){return function(){return e}}function _p(e){return+e}var DL=[0,1];function hn(e){return e}function A1(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Ile(isNaN(t)?NaN:.5)}function Dle(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function Lle(e,t,n){var r=e[0],o=e[1],a=t[0],i=t[1];return o<r?(r=A1(o,r),a=n(i,a)):(r=A1(r,o),a=n(a,i)),function(s){return a(r(s))}}function Fle(e,t,n){var r=Math.min(e.length,t.length)-1,o=new Array(r),a=new Array(r),i=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++i<r;)o[i]=A1(e[i],e[i+1]),a[i]=n(t[i],t[i+1]);return function(s){var c=Ll(e,s,1,r)-1;return a[c](o[c](s))}}function zl(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function jp(){var e=DL,t=DL,n=Ri,r,o,a,i=hn,s,c,l;function u(){var f=Math.min(e.length,t.length);return i!==hn&&(i=Dle(e[0],e[f-1])),s=f>2?Fle:Lle,c=l=null,d}function d(f){return f==null||isNaN(f=+f)?a:(c||(c=s(e.map(r),t,n)))(r(i(f)))}return d.invert=function(f){return i(o((l||(l=s(t,e.map(r),fr)))(f)))},d.domain=function(f){return arguments.length?(e=Array.from(f,_p),u()):e.slice()},d.range=function(f){return arguments.length?(t=Array.from(f),u()):t.slice()},d.rangeRound=function(f){return t=Array.from(f),n=rb,u()},d.clamp=function(f){return arguments.length?(i=f?!0:hn,u()):i!==hn},d.interpolate=function(f){return arguments.length?(n=f,u()):n},d.unknown=function(f){return arguments.length?(a=f,d):a},function(f,p){return r=f,o=p,u()}}function T1(){return jp()(hn,hn)}function Ble(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Ep(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function fs(e){return e=Ep(Math.abs(e)),e?e[1]:NaN}function $le(e,t){return function(n,r){for(var o=n.length,a=[],i=0,s=e[0],c=0;o>0&&s>0&&(c+s+1>r&&(s=Math.max(1,r-c)),a.push(n.substring(o-=s,o+s)),!((c+=s+1)>r));)s=e[i=(i+1)%e.length];return a.reverse().join(t)}}function zle(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var Vle=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Vl(e){if(!(t=Vle.exec(e)))throw new Error("invalid format: "+e);var t;return new R1({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Vl.prototype=R1.prototype;function R1(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}R1.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Ule(e){e:for(var t=e.length,n=1,r=-1,o;n<t;++n)switch(e[n]){case".":r=o=n;break;case"0":r===0&&(r=n),o=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(o+1):e}var LL;function Hle(e,t){var n=Ep(e,t);if(!n)return e+"";var r=n[0],o=n[1],a=o-(LL=Math.max(-8,Math.min(8,Math.floor(o/3)))*3)+1,i=r.length;return a===i?r:a>i?r+new Array(a-i+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+Ep(e,Math.max(0,t+a-1))[0]}function FL(e,t){var n=Ep(e,t);if(!n)return e+"";var r=n[0],o=n[1];return o<0?"0."+new Array(-o).join("0")+r:r.length>o+1?r.slice(0,o+1)+"."+r.slice(o+1):r+new Array(o-r.length+2).join("0")}const BL={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Ble,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>FL(e*100,t),r:FL,s:Hle,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function $L(e){return e}var zL=Array.prototype.map,VL=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function Wle(e){var t=e.grouping===void 0||e.thousands===void 0?$L:$le(zL.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",o=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?$L:zle(zL.call(e.numerals,String)),i=e.percent===void 0?"%":e.percent+"",s=e.minus===void 0?"\u2212":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function l(d){d=Vl(d);var f=d.fill,p=d.align,y=d.sign,m=d.symbol,v=d.zero,b=d.width,x=d.comma,j=d.precision,w=d.trim,_=d.type;_==="n"?(x=!0,_="g"):BL[_]||(j===void 0&&(j=12),w=!0,_="g"),(v||f==="0"&&p==="=")&&(v=!0,f="0",p="=");var E=m==="$"?n:m==="#"&&/[boxX]/.test(_)?"0"+_.toLowerCase():"",S=m==="$"?r:/[%p]/.test(_)?i:"",C=BL[_],M=/[defgprs%]/.test(_);j=j===void 0?6:/[gprs]/.test(_)?Math.max(1,Math.min(21,j)):Math.max(0,Math.min(20,j));function P(N){var R=E,A=S,O,k,T;if(_==="c")A=C(N)+A,N="";else{N=+N;var I=N<0||1/N<0;if(N=isNaN(N)?c:C(Math.abs(N),j),w&&(N=Ule(N)),I&&+N==0&&y!=="+"&&(I=!1),R=(I?y==="("?y:s:y==="-"||y==="("?"":y)+R,A=(_==="s"?VL[8+LL/3]:"")+A+(I&&y==="("?")":""),M){for(O=-1,k=N.length;++O<k;)if(T=N.charCodeAt(O),48>T||T>57){A=(T===46?o+N.slice(O+1):N.slice(O))+A,N=N.slice(0,O);break}}}x&&!v&&(N=t(N,1/0));var L=R.length+N.length+A.length,D=L<b?new Array(b-L+1).join(f):"";switch(x&&v&&(N=t(D+N,D.length?b-A.length:1/0),D=""),p){case"<":N=R+N+A+D;break;case"=":N=R+D+N+A;break;case"^":N=D.slice(0,L=D.length>>1)+R+N+A+D.slice(L);break;default:N=D+R+N+A;break}return a(N)}return P.toString=function(){return d+""},P}function u(d,f){var p=l((d=Vl(d),d.type="f",d)),y=Math.max(-8,Math.min(8,Math.floor(fs(f)/3)))*3,m=Math.pow(10,-y),v=VL[8+y/3];return function(b){return p(m*b)+v}}return{format:l,formatPrefix:u}}var Sp,I1,UL;qle({thousands:",",grouping:[3],currency:["$",""]});function qle(e){return Sp=Wle(e),I1=Sp.format,UL=Sp.formatPrefix,Sp}function Yle(e){return Math.max(0,-fs(Math.abs(e)))}function Kle(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(fs(t)/3)))*3-fs(Math.abs(e)))}function Xle(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,fs(t)-fs(e))+1}function HL(e,t,n,r){var o=N1(e,t,n),a;switch(r=Vl(r??",f"),r.type){case"s":{var i=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(a=Kle(o,i))&&(r.precision=a),UL(r,i)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=Xle(o,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=Yle(o))&&(r.precision=a-(r.type==="%")*2);break}}return I1(r)}function na(e){var t=e.domain;return e.ticks=function(n){var r=t();return O1(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var o=t();return HL(o[0],o[o.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),o=0,a=r.length-1,i=r[o],s=r[a],c,l,u=10;for(s<i&&(l=i,i=s,s=l,l=o,o=a,a=l);u-- >0;){if(l=M1(i,s,n),l===c)return r[o]=i,r[a]=s,t(r);if(l>0)i=Math.floor(i/l)*l,s=Math.ceil(s/l)*l;else if(l<0)i=Math.ceil(i*l)/l,s=Math.floor(s*l)/l;else break;c=l}return e},e}function Cp(){var e=T1();return e.copy=function(){return zl(e,Cp())},Kn.apply(e,arguments),na(e)}function WL(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,_p),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return WL(e).unknown(t)},e=arguments.length?Array.from(e,_p):[0,1],na(n)}function qL(e,t){e=e.slice();var n=0,r=e.length-1,o=e[n],a=e[r],i;return a<o&&(i=n,n=r,r=i,i=o,o=a,a=i),e[n]=t.floor(o),e[r]=t.ceil(a),e}function YL(e){return Math.log(e)}function KL(e){return Math.exp(e)}function Gle(e){return-Math.log(-e)}function Qle(e){return-Math.exp(-e)}function Jle(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Zle(e){return e===10?Jle:e===Math.E?Math.exp:t=>Math.pow(e,t)}function eue(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function XL(e){return(t,n)=>-e(-t,n)}function D1(e){const t=e(YL,KL),n=t.domain;let r=10,o,a;function i(){return o=eue(r),a=Zle(r),n()[0]<0?(o=XL(o),a=XL(a),e(Gle,Qle)):e(YL,KL),t}return t.base=function(s){return arguments.length?(r=+s,i()):r},t.domain=function(s){return arguments.length?(n(s),i()):n()},t.ticks=s=>{const c=n();let l=c[0],u=c[c.length-1];const d=u<l;d&&([l,u]=[u,l]);let f=o(l),p=o(u),y,m;const v=s==null?10:+s;let b=[];if(!(r%1)&&p-f<v){if(f=Math.floor(f),p=Math.ceil(p),l>0){for(;f<=p;++f)for(y=1;y<r;++y)if(m=f<0?y/a(-f):y*a(f),!(m<l)){if(m>u)break;b.push(m)}}else for(;f<=p;++f)for(y=r-1;y>=1;--y)if(m=f>0?y/a(-f):y*a(f),!(m<l)){if(m>u)break;b.push(m)}b.length*2<v&&(b=O1(l,u,v))}else b=O1(f,p,Math.min(p-f,v)).map(a);return d?b.reverse():b},t.tickFormat=(s,c)=>{if(s==null&&(s=10),c==null&&(c=r===10?"s":","),typeof c!="function"&&(!(r%1)&&(c=Vl(c)).precision==null&&(c.trim=!0),c=I1(c)),s===1/0)return c;const l=Math.max(1,r*s/t.ticks().length);return u=>{let d=u/a(Math.round(o(u)));return d*r<r-.5&&(d*=r),d<=l?c(u):""}},t.nice=()=>n(qL(n(),{floor:s=>a(Math.floor(o(s))),ceil:s=>a(Math.ceil(o(s)))})),t}function GL(){const e=D1(jp()).domain([1,10]);return e.copy=()=>zl(e,GL()).base(e.base()),Kn.apply(e,arguments),e}function QL(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function JL(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function L1(e){var t=1,n=e(QL(t),JL(t));return n.constant=function(r){return arguments.length?e(QL(t=+r),JL(t)):t},na(n)}function ZL(){var e=L1(jp());return e.copy=function(){return zl(e,ZL()).constant(e.constant())},Kn.apply(e,arguments)}function e6(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function tue(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function nue(e){return e<0?-e*e:e*e}function F1(e){var t=e(hn,hn),n=1;function r(){return n===1?e(hn,hn):n===.5?e(tue,nue):e(e6(n),e6(1/n))}return t.exponent=function(o){return arguments.length?(n=+o,r()):n},na(t)}function B1(){var e=F1(jp());return e.copy=function(){return zl(e,B1()).exponent(e.exponent())},Kn.apply(e,arguments),e}function rue(){return B1.apply(null,arguments).exponent(.5)}function t6(e){return Math.sign(e)*e*e}function oue(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function n6(){var e=T1(),t=[0,1],n=!1,r;function o(a){var i=oue(e(a));return isNaN(i)?r:n?Math.round(i):i}return o.invert=function(a){return e.invert(t6(a))},o.domain=function(a){return arguments.length?(e.domain(a),o):e.domain()},o.range=function(a){return arguments.length?(e.range((t=Array.from(a,_p)).map(t6)),o):t.slice()},o.rangeRound=function(a){return o.range(a).round(!0)},o.round=function(a){return arguments.length?(n=!!a,o):n},o.clamp=function(a){return arguments.length?(e.clamp(a),o):e.clamp()},o.unknown=function(a){return arguments.length?(r=a,o):r},o.copy=function(){return n6(e.domain(),t).round(n).clamp(e.clamp()).unknown(r)},Kn.apply(o,arguments),na(o)}function r6(){var e=[],t=[],n=[],r;function o(){var i=0,s=Math.max(1,t.length);for(n=new Array(s-1);++i<s;)n[i-1]=Tle(e,i/s);return a}function a(i){return i==null||isNaN(i=+i)?r:t[Ll(n,i)]}return a.invertExtent=function(i){var s=t.indexOf(i);return s<0?[NaN,NaN]:[s>0?n[s-1]:e[0],s<n.length?n[s]:e[e.length-1]]},a.domain=function(i){if(!arguments.length)return e.slice();e=[];for(let s of i)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(ta),o()},a.range=function(i){return arguments.length?(t=Array.from(i),o()):t.slice()},a.unknown=function(i){return arguments.length?(r=i,a):r},a.quantiles=function(){return n.slice()},a.copy=function(){return r6().domain(e).range(t).unknown(r)},Kn.apply(a,arguments)}function o6(){var e=0,t=1,n=1,r=[.5],o=[0,1],a;function i(c){return c!=null&&c<=c?o[Ll(r,c,0,n)]:a}function s(){var c=-1;for(r=new Array(n);++c<n;)r[c]=((c+1)*t-(c-n)*e)/(n+1);return i}return i.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,s()):[e,t]},i.range=function(c){return arguments.length?(n=(o=Array.from(c)).length-1,s()):o.slice()},i.invertExtent=function(c){var l=o.indexOf(c);return l<0?[NaN,NaN]:l<1?[e,r[0]]:l>=n?[r[n-1],t]:[r[l-1],r[l]]},i.unknown=function(c){return arguments.length&&(a=c),i},i.thresholds=function(){return r.slice()},i.copy=function(){return o6().domain([e,t]).range(o).unknown(a)},Kn.apply(na(i),arguments)}function a6(){var e=[.5],t=[0,1],n,r=1;function o(a){return a!=null&&a<=a?t[Ll(e,a,0,r)]:n}return o.domain=function(a){return arguments.length?(e=Array.from(a),r=Math.min(e.length,t.length-1),o):e.slice()},o.range=function(a){return arguments.length?(t=Array.from(a),r=Math.min(e.length,t.length-1),o):t.slice()},o.invertExtent=function(a){var i=t.indexOf(a);return[e[i-1],e[i]]},o.unknown=function(a){return arguments.length?(n=a,o):n},o.copy=function(){return a6().domain(e).range(t).unknown(n)},Kn.apply(o,arguments)}const $1=new Date,z1=new Date;function $t(e,t,n,r){function o(a){return e(a=arguments.length===0?new Date:new Date(+a)),a}return o.floor=a=>(e(a=new Date(+a)),a),o.ceil=a=>(e(a=new Date(a-1)),t(a,1),e(a),a),o.round=a=>{const i=o(a),s=o.ceil(a);return a-i<s-a?i:s},o.offset=(a,i)=>(t(a=new Date(+a),i==null?1:Math.floor(i)),a),o.range=(a,i,s)=>{const c=[];if(a=o.ceil(a),s=s==null?1:Math.floor(s),!(a<i)||!(s>0))return c;let l;do c.push(l=new Date(+a)),t(a,s),e(a);while(l<a&&a<i);return c},o.filter=a=>$t(i=>{if(i>=i)for(;e(i),!a(i);)i.setTime(i-1)},(i,s)=>{if(i>=i)if(s<0)for(;++s<=0;)for(;t(i,-1),!a(i););else for(;--s>=0;)for(;t(i,1),!a(i););}),n&&(o.count=(a,i)=>($1.setTime(+a),z1.setTime(+i),e($1),e(z1),Math.floor(n($1,z1))),o.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?o.filter(r?i=>r(i)%a===0:i=>o.count(0,i)%a===0):o)),o}const Op=$t(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Op.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?$t(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):Op),Op.range;const Co=1e3,Xn=Co*60,Oo=Xn*60,Mo=Oo*24,V1=Mo*7,i6=Mo*30,U1=Mo*365,Fa=$t(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Co)},(e,t)=>(t-e)/Co,e=>e.getUTCSeconds());Fa.range;const H1=$t(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Co)},(e,t)=>{e.setTime(+e+t*Xn)},(e,t)=>(t-e)/Xn,e=>e.getMinutes());H1.range;const W1=$t(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Xn)},(e,t)=>(t-e)/Xn,e=>e.getUTCMinutes());W1.range;const q1=$t(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Co-e.getMinutes()*Xn)},(e,t)=>{e.setTime(+e+t*Oo)},(e,t)=>(t-e)/Oo,e=>e.getHours());q1.range;const Y1=$t(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Oo)},(e,t)=>(t-e)/Oo,e=>e.getUTCHours());Y1.range;const Ul=$t(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Xn)/Mo,e=>e.getDate()-1);Ul.range;const Mp=$t(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Mo,e=>e.getUTCDate()-1);Mp.range;const s6=$t(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Mo,e=>Math.floor(e/Mo));s6.range;function Ba(e){return $t(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Xn)/V1)}const Np=Ba(0),Pp=Ba(1),aue=Ba(2),iue=Ba(3),ps=Ba(4),sue=Ba(5),cue=Ba(6);Np.range,Pp.range,aue.range,iue.range,ps.range,sue.range,cue.range;function $a(e){return $t(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/V1)}const kp=$a(0),Ap=$a(1),lue=$a(2),uue=$a(3),hs=$a(4),due=$a(5),fue=$a(6);kp.range,Ap.range,lue.range,uue.range,hs.range,due.range,fue.range;const K1=$t(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());K1.range;const X1=$t(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());X1.range;const No=$t(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());No.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:$t(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)}),No.range;const Po=$t(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Po.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:$t(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)}),Po.range;function c6(e,t,n,r,o,a){const i=[[Fa,1,Co],[Fa,5,5*Co],[Fa,15,15*Co],[Fa,30,30*Co],[a,1,Xn],[a,5,5*Xn],[a,15,15*Xn],[a,30,30*Xn],[o,1,Oo],[o,3,3*Oo],[o,6,6*Oo],[o,12,12*Oo],[r,1,Mo],[r,2,2*Mo],[n,1,V1],[t,1,i6],[t,3,3*i6],[e,1,U1]];function s(l,u,d){const f=u<l;f&&([l,u]=[u,l]);const p=d&&typeof d.range=="function"?d:c(l,u,d),y=p?p.range(l,+u+1):[];return f?y.reverse():y}function c(l,u,d){const f=Math.abs(u-l)/d,p=C1(([,,v])=>v).right(i,f);if(p===i.length)return e.every(N1(l/U1,u/U1,d));if(p===0)return Op.every(Math.max(N1(l,u,d),1));const[y,m]=i[f/i[p-1][2]<i[p][2]/f?p-1:p];return y.every(m)}return[s,c]}const[pue,hue]=c6(Po,X1,kp,s6,Y1,W1),[mue,yue]=c6(No,K1,Np,Ul,q1,H1);function G1(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Q1(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Hl(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function gue(e){var t=e.dateTime,n=e.date,r=e.time,o=e.periods,a=e.days,i=e.shortDays,s=e.months,c=e.shortMonths,l=Wl(o),u=ql(o),d=Wl(a),f=ql(a),p=Wl(i),y=ql(i),m=Wl(s),v=ql(s),b=Wl(c),x=ql(c),j={a:I,A:L,b:D,B:z,c:null,d:h6,e:h6,f:$ue,g:Gue,G:Jue,H:Lue,I:Fue,j:Bue,L:m6,m:zue,M:Vue,p:H,q:F,Q:w6,s:_6,S:Uue,u:Hue,U:Wue,V:que,w:Yue,W:Kue,x:null,X:null,y:Xue,Y:Que,Z:Zue,"%":x6},w={a:U,A:Y,b:G,B:re,c:null,d:g6,e:g6,f:rde,g:pde,G:mde,H:ede,I:tde,j:nde,L:v6,m:ode,M:ade,p:Z,q,Q:w6,s:_6,S:ide,u:sde,U:cde,V:lde,w:ude,W:dde,x:null,X:null,y:fde,Y:hde,Z:yde,"%":x6},_={a:P,A:N,b:R,B:A,c:O,d:f6,e:f6,f:Tue,g:d6,G:u6,H:p6,I:p6,j:Nue,L:Aue,m:Mue,M:Pue,p:M,q:Oue,Q:Iue,s:Due,S:kue,u:_ue,U:jue,V:Eue,w:wue,W:Sue,x:k,X:T,y:d6,Y:u6,Z:Cue,"%":Rue};j.x=E(n,j),j.X=E(r,j),j.c=E(t,j),w.x=E(n,w),w.X=E(r,w),w.c=E(t,w);function E(W,Q){return function(te){var B=[],se=-1,ce=0,ve=W.length,Te,qe,Ye;for(te instanceof Date||(te=new Date(+te));++se<ve;)W.charCodeAt(se)===37&&(B.push(W.slice(ce,se)),(qe=l6[Te=W.charAt(++se)])!=null?Te=W.charAt(++se):qe=Te==="e"?" ":"0",(Ye=Q[Te])&&(Te=Ye(te,qe)),B.push(Te),ce=se+1);return B.push(W.slice(ce,se)),B.join("")}}function S(W,Q){return function(te){var B=Hl(1900,void 0,1),se=C(B,W,te+="",0),ce,ve;if(se!=te.length)return null;if("Q"in B)return new Date(B.Q);if("s"in B)return new Date(B.s*1e3+("L"in B?B.L:0));if(Q&&!("Z"in B)&&(B.Z=0),"p"in B&&(B.H=B.H%12+B.p*12),B.m===void 0&&(B.m="q"in B?B.q:0),"V"in B){if(B.V<1||B.V>53)return null;"w"in B||(B.w=1),"Z"in B?(ce=Q1(Hl(B.y,0,1)),ve=ce.getUTCDay(),ce=ve>4||ve===0?Ap.ceil(ce):Ap(ce),ce=Mp.offset(ce,(B.V-1)*7),B.y=ce.getUTCFullYear(),B.m=ce.getUTCMonth(),B.d=ce.getUTCDate()+(B.w+6)%7):(ce=G1(Hl(B.y,0,1)),ve=ce.getDay(),ce=ve>4||ve===0?Pp.ceil(ce):Pp(ce),ce=Ul.offset(ce,(B.V-1)*7),B.y=ce.getFullYear(),B.m=ce.getMonth(),B.d=ce.getDate()+(B.w+6)%7)}else("W"in B||"U"in B)&&("w"in B||(B.w="u"in B?B.u%7:"W"in B?1:0),ve="Z"in B?Q1(Hl(B.y,0,1)).getUTCDay():G1(Hl(B.y,0,1)).getDay(),B.m=0,B.d="W"in B?(B.w+6)%7+B.W*7-(ve+5)%7:B.w+B.U*7-(ve+6)%7);return"Z"in B?(B.H+=B.Z/100|0,B.M+=B.Z%100,Q1(B)):G1(B)}}function C(W,Q,te,B){for(var se=0,ce=Q.length,ve=te.length,Te,qe;se<ce;){if(B>=ve)return-1;if(Te=Q.charCodeAt(se++),Te===37){if(Te=Q.charAt(se++),qe=_[Te in l6?Q.charAt(se++):Te],!qe||(B=qe(W,te,B))<0)return-1}else if(Te!=te.charCodeAt(B++))return-1}return B}function M(W,Q,te){var B=l.exec(Q.slice(te));return B?(W.p=u.get(B[0].toLowerCase()),te+B[0].length):-1}function P(W,Q,te){var B=p.exec(Q.slice(te));return B?(W.w=y.get(B[0].toLowerCase()),te+B[0].length):-1}function N(W,Q,te){var B=d.exec(Q.slice(te));return B?(W.w=f.get(B[0].toLowerCase()),te+B[0].length):-1}function R(W,Q,te){var B=b.exec(Q.slice(te));return B?(W.m=x.get(B[0].toLowerCase()),te+B[0].length):-1}function A(W,Q,te){var B=m.exec(Q.slice(te));return B?(W.m=v.get(B[0].toLowerCase()),te+B[0].length):-1}function O(W,Q,te){return C(W,t,Q,te)}function k(W,Q,te){return C(W,n,Q,te)}function T(W,Q,te){return C(W,r,Q,te)}function I(W){return i[W.getDay()]}function L(W){return a[W.getDay()]}function D(W){return c[W.getMonth()]}function z(W){return s[W.getMonth()]}function H(W){return o[+(W.getHours()>=12)]}function F(W){return 1+~~(W.getMonth()/3)}function U(W){return i[W.getUTCDay()]}function Y(W){return a[W.getUTCDay()]}function G(W){return c[W.getUTCMonth()]}function re(W){return s[W.getUTCMonth()]}function Z(W){return o[+(W.getUTCHours()>=12)]}function q(W){return 1+~~(W.getUTCMonth()/3)}return{format:function(W){var Q=E(W+="",j);return Q.toString=function(){return W},Q},parse:function(W){var Q=S(W+="",!1);return Q.toString=function(){return W},Q},utcFormat:function(W){var Q=E(W+="",w);return Q.toString=function(){return W},Q},utcParse:function(W){var Q=S(W+="",!0);return Q.toString=function(){return W},Q}}}var l6={"-":"",_:" ",0:"0"},Ht=/^\s*\d+/,vue=/^%/,bue=/[\\^$*+?|[\]().{}]/g;function Ze(e,t,n){var r=e<0?"-":"",o=(r?-e:e)+"",a=o.length;return r+(a<n?new Array(n-a+1).join(t)+o:o)}function xue(e){return e.replace(bue,"\\$&")}function Wl(e){return new RegExp("^(?:"+e.map(xue).join("|")+")","i")}function ql(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function wue(e,t,n){var r=Ht.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function _ue(e,t,n){var r=Ht.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function jue(e,t,n){var r=Ht.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function Eue(e,t,n){var r=Ht.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function Sue(e,t,n){var r=Ht.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function u6(e,t,n){var r=Ht.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function d6(e,t,n){var r=Ht.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Cue(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Oue(e,t,n){var r=Ht.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function Mue(e,t,n){var r=Ht.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function f6(e,t,n){var r=Ht.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function Nue(e,t,n){var r=Ht.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function p6(e,t,n){var r=Ht.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function Pue(e,t,n){var r=Ht.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function kue(e,t,n){var r=Ht.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function Aue(e,t,n){var r=Ht.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function Tue(e,t,n){var r=Ht.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Rue(e,t,n){var r=vue.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function Iue(e,t,n){var r=Ht.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function Due(e,t,n){var r=Ht.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function h6(e,t){return Ze(e.getDate(),t,2)}function Lue(e,t){return Ze(e.getHours(),t,2)}function Fue(e,t){return Ze(e.getHours()%12||12,t,2)}function Bue(e,t){return Ze(1+Ul.count(No(e),e),t,3)}function m6(e,t){return Ze(e.getMilliseconds(),t,3)}function $ue(e,t){return m6(e,t)+"000"}function zue(e,t){return Ze(e.getMonth()+1,t,2)}function Vue(e,t){return Ze(e.getMinutes(),t,2)}function Uue(e,t){return Ze(e.getSeconds(),t,2)}function Hue(e){var t=e.getDay();return t===0?7:t}function Wue(e,t){return Ze(Np.count(No(e)-1,e),t,2)}function y6(e){var t=e.getDay();return t>=4||t===0?ps(e):ps.ceil(e)}function que(e,t){return e=y6(e),Ze(ps.count(No(e),e)+(No(e).getDay()===4),t,2)}function Yue(e){return e.getDay()}function Kue(e,t){return Ze(Pp.count(No(e)-1,e),t,2)}function Xue(e,t){return Ze(e.getFullYear()%100,t,2)}function Gue(e,t){return e=y6(e),Ze(e.getFullYear()%100,t,2)}function Que(e,t){return Ze(e.getFullYear()%1e4,t,4)}function Jue(e,t){var n=e.getDay();return e=n>=4||n===0?ps(e):ps.ceil(e),Ze(e.getFullYear()%1e4,t,4)}function Zue(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Ze(t/60|0,"0",2)+Ze(t%60,"0",2)}function g6(e,t){return Ze(e.getUTCDate(),t,2)}function ede(e,t){return Ze(e.getUTCHours(),t,2)}function tde(e,t){return Ze(e.getUTCHours()%12||12,t,2)}function nde(e,t){return Ze(1+Mp.count(Po(e),e),t,3)}function v6(e,t){return Ze(e.getUTCMilliseconds(),t,3)}function rde(e,t){return v6(e,t)+"000"}function ode(e,t){return Ze(e.getUTCMonth()+1,t,2)}function ade(e,t){return Ze(e.getUTCMinutes(),t,2)}function ide(e,t){return Ze(e.getUTCSeconds(),t,2)}function sde(e){var t=e.getUTCDay();return t===0?7:t}function cde(e,t){return Ze(kp.count(Po(e)-1,e),t,2)}function b6(e){var t=e.getUTCDay();return t>=4||t===0?hs(e):hs.ceil(e)}function lde(e,t){return e=b6(e),Ze(hs.count(Po(e),e)+(Po(e).getUTCDay()===4),t,2)}function ude(e){return e.getUTCDay()}function dde(e,t){return Ze(Ap.count(Po(e)-1,e),t,2)}function fde(e,t){return Ze(e.getUTCFullYear()%100,t,2)}function pde(e,t){return e=b6(e),Ze(e.getUTCFullYear()%100,t,2)}function hde(e,t){return Ze(e.getUTCFullYear()%1e4,t,4)}function mde(e,t){var n=e.getUTCDay();return e=n>=4||n===0?hs(e):hs.ceil(e),Ze(e.getUTCFullYear()%1e4,t,4)}function yde(){return"+0000"}function x6(){return"%"}function w6(e){return+e}function _6(e){return Math.floor(+e/1e3)}var ms,j6,E6;gde({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function gde(e){return ms=gue(e),j6=ms.format,ms.parse,E6=ms.utcFormat,ms.utcParse,ms}function vde(e){return new Date(e)}function bde(e){return e instanceof Date?+e:+new Date(+e)}function J1(e,t,n,r,o,a,i,s,c,l){var u=T1(),d=u.invert,f=u.domain,p=l(".%L"),y=l(":%S"),m=l("%I:%M"),v=l("%I %p"),b=l("%a %d"),x=l("%b %d"),j=l("%B"),w=l("%Y");function _(E){return(c(E)<E?p:s(E)<E?y:i(E)<E?m:a(E)<E?v:r(E)<E?o(E)<E?b:x:n(E)<E?j:w)(E)}return u.invert=function(E){return new Date(d(E))},u.domain=function(E){return arguments.length?f(Array.from(E,bde)):f().map(vde)},u.ticks=function(E){var S=f();return e(S[0],S[S.length-1],E??10)},u.tickFormat=function(E,S){return S==null?_:l(S)},u.nice=function(E){var S=f();return(!E||typeof E.range!="function")&&(E=t(S[0],S[S.length-1],E??10)),E?f(qL(S,E)):u},u.copy=function(){return zl(u,J1(e,t,n,r,o,a,i,s,c,l))},u}function xde(){return Kn.apply(J1(mue,yue,No,K1,Np,Ul,q1,H1,Fa,j6).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function wde(){return Kn.apply(J1(pue,hue,Po,X1,kp,Mp,Y1,W1,Fa,E6).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Tp(){var e=0,t=1,n,r,o,a,i=hn,s=!1,c;function l(d){return d==null||isNaN(d=+d)?c:i(o===0?.5:(d=(a(d)-n)*o,s?Math.max(0,Math.min(1,d)):d))}l.domain=function(d){return arguments.length?([e,t]=d,n=a(e=+e),r=a(t=+t),o=n===r?0:1/(r-n),l):[e,t]},l.clamp=function(d){return arguments.length?(s=!!d,l):s},l.interpolator=function(d){return arguments.length?(i=d,l):i};function u(d){return function(f){var p,y;return arguments.length?([p,y]=f,i=d(p,y),l):[i(0),i(1)]}}return l.range=u(Ri),l.rangeRound=u(rb),l.unknown=function(d){return arguments.length?(c=d,l):c},function(d){return a=d,n=d(e),r=d(t),o=n===r?0:1/(r-n),l}}function ra(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function S6(){var e=na(Tp()(hn));return e.copy=function(){return ra(e,S6())},So.apply(e,arguments)}function C6(){var e=D1(Tp()).domain([1,10]);return e.copy=function(){return ra(e,C6()).base(e.base())},So.apply(e,arguments)}function O6(){var e=L1(Tp());return e.copy=function(){return ra(e,O6()).constant(e.constant())},So.apply(e,arguments)}function Z1(){var e=F1(Tp());return e.copy=function(){return ra(e,Z1()).exponent(e.exponent())},So.apply(e,arguments)}function _de(){return Z1.apply(null,arguments).exponent(.5)}function M6(){var e=[],t=hn;function n(r){if(r!=null&&!isNaN(r=+r))return t((Ll(e,r,1)-1)/(e.length-1))}return n.domain=function(r){if(!arguments.length)return e.slice();e=[];for(let o of r)o!=null&&!isNaN(o=+o)&&e.push(o);return e.sort(ta),n},n.interpolator=function(r){return arguments.length?(t=r,n):t},n.range=function(){return e.map((r,o)=>t(o/(e.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(o,a)=>Ale(e,a/r))},n.copy=function(){return M6(t).domain(e)},So.apply(n,arguments)}function Rp(){var e=0,t=.5,n=1,r=1,o,a,i,s,c,l=hn,u,d=!1,f;function p(m){return isNaN(m=+m)?f:(m=.5+((m=+u(m))-a)*(r*m<r*a?s:c),l(d?Math.max(0,Math.min(1,m)):m))}p.domain=function(m){return arguments.length?([e,t,n]=m,o=u(e=+e),a=u(t=+t),i=u(n=+n),s=o===a?0:.5/(a-o),c=a===i?0:.5/(i-a),r=a<o?-1:1,p):[e,t,n]},p.clamp=function(m){return arguments.length?(d=!!m,p):d},p.interpolator=function(m){return arguments.length?(l=m,p):l};function y(m){return function(v){var b,x,j;return arguments.length?([b,x,j]=v,l=HG(m,[b,x,j]),p):[l(0),l(.5),l(1)]}}return p.range=y(Ri),p.rangeRound=y(rb),p.unknown=function(m){return arguments.length?(f=m,p):f},function(m){return u=m,o=m(e),a=m(t),i=m(n),s=o===a?0:.5/(a-o),c=a===i?0:.5/(i-a),r=a<o?-1:1,p}}function N6(){var e=na(Rp()(hn));return e.copy=function(){return ra(e,N6())},So.apply(e,arguments)}function P6(){var e=D1(Rp()).domain([.1,1,10]);return e.copy=function(){return ra(e,P6()).base(e.base())},So.apply(e,arguments)}function k6(){var e=L1(Rp());return e.copy=function(){return ra(e,k6()).constant(e.constant())},So.apply(e,arguments)}function e_(){var e=F1(Rp());return e.copy=function(){return ra(e,e_()).exponent(e.exponent())},So.apply(e,arguments)}function jde(){return e_.apply(null,arguments).exponent(.5)}const A6=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Bl,scaleDiverging:N6,scaleDivergingLog:P6,scaleDivergingPow:e_,scaleDivergingSqrt:jde,scaleDivergingSymlog:k6,scaleIdentity:WL,scaleImplicit:P1,scaleLinear:Cp,scaleLog:GL,scaleOrdinal:k1,scalePoint:$l,scalePow:B1,scaleQuantile:r6,scaleQuantize:o6,scaleRadial:n6,scaleSequential:S6,scaleSequentialLog:C6,scaleSequentialPow:Z1,scaleSequentialQuantile:M6,scaleSequentialSqrt:_de,scaleSequentialSymlog:O6,scaleSqrt:rue,scaleSymlog:ZL,scaleThreshold:a6,scaleTime:xde,scaleUtc:wde,tickFormat:HL},Symbol.toStringTag,{value:"Module"}));var t_,T6;function R6(){if(T6)return t_;T6=1;var e=Ni();function t(n,r,o){for(var a=-1,i=n.length;++a<i;){var s=n[a],c=r(s);if(c!=null&&(l===void 0?c===c&&!e(c):o(c,l)))var l=c,u=s}return u}return t_=t,t_}var n_,I6;function Ede(){if(I6)return n_;I6=1;function e(t,n){return t>n}return n_=e,n_}var r_,D6;function Sde(){if(D6)return r_;D6=1;var e=R6(),t=Ede(),n=Pi();function r(o){return o&&o.length?e(o,n,t):void 0}return r_=r,r_}var Cde=Sde();const Ip=Xe(Cde);var o_,L6;function Ode(){if(L6)return o_;L6=1;function e(t,n){return t<n}return o_=e,o_}var a_,F6;function Mde(){if(F6)return a_;F6=1;var e=R6(),t=Ode(),n=Pi();function r(o){return o&&o.length?e(o,n,t):void 0}return a_=r,a_}var Nde=Mde();const Dp=Xe(Nde);var i_,B6;pE=function(){if(B6)return i_;B6=1;var e=qs(),t=Mr(),n=P4(),r=an();function o(a,i){var s=r(a)?e:n;return s(a,t(i,3))}return i_=o,i_};var s_,$6;function Pde(){if($6)return s_;$6=1;var e=Dh(),t=pE();function n(r,o){return e(t(r,o),1)}return s_=n,s_}var kde=Pde();const Ade=Xe(kde);var c_,z6;function Tde(){if(z6)return c_;z6=1;var e=r0();function t(n,r){return e(n,r)}return c_=t,c_}var Rde=Tde();const l_=Xe(Rde);var ys=1e9,Ide={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},f_,jt=!0,Gn="[DecimalError] ",za=Gn+"Invalid argument: ",u_=Gn+"Exponent out of range: ",gs=Math.floor,Va=Math.pow,Dde=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Dn,Wt=1e7,bt=7,V6=9007199254740991,Lp=gs(V6/bt),Ee={};Ee.absoluteValue=Ee.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e},Ee.comparedTo=Ee.cmp=function(e){var t,n,r,o,a=this;if(e=new a.constructor(e),a.s!==e.s)return a.s||-e.s;if(a.e!==e.e)return a.e>e.e^a.s<0?1:-1;for(r=a.d.length,o=e.d.length,t=0,n=r<o?r:o;t<n;++t)if(a.d[t]!==e.d[t])return a.d[t]>e.d[t]^a.s<0?1:-1;return r===o?0:r>o^a.s<0?1:-1},Ee.decimalPlaces=Ee.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*bt;if(t=e.d[t],t)for(;t%10==0;t/=10)n--;return n<0?0:n},Ee.dividedBy=Ee.div=function(e){return ko(this,new this.constructor(e))},Ee.dividedToIntegerBy=Ee.idiv=function(e){var t=this,n=t.constructor;return ft(ko(t,new n(e),0,1),n.precision)},Ee.equals=Ee.eq=function(e){return!this.cmp(e)},Ee.exponent=function(){return It(this)},Ee.greaterThan=Ee.gt=function(e){return this.cmp(e)>0},Ee.greaterThanOrEqualTo=Ee.gte=function(e){return this.cmp(e)>=0},Ee.isInteger=Ee.isint=function(){return this.e>this.d.length-2},Ee.isNegative=Ee.isneg=function(){return this.s<0},Ee.isPositive=Ee.ispos=function(){return this.s>0},Ee.isZero=function(){return this.s===0},Ee.lessThan=Ee.lt=function(e){return this.cmp(e)<0},Ee.lessThanOrEqualTo=Ee.lte=function(e){return this.cmp(e)<1},Ee.logarithm=Ee.log=function(e){var t,n=this,r=n.constructor,o=r.precision,a=o+5;if(e===void 0)e=new r(10);else if(e=new r(e),e.s<1||e.eq(Dn))throw Error(Gn+"NaN");if(n.s<1)throw Error(Gn+(n.s?"NaN":"-Infinity"));return n.eq(Dn)?new r(0):(jt=!1,t=ko(Yl(n,a),Yl(e,a),a),jt=!0,ft(t,o))},Ee.minus=Ee.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?q6(t,e):U6(t,(e.s=-e.s,e))},Ee.modulo=Ee.mod=function(e){var t,n=this,r=n.constructor,o=r.precision;if(e=new r(e),!e.s)throw Error(Gn+"NaN");return n.s?(jt=!1,t=ko(n,e,0,1).times(e),jt=!0,n.minus(t)):ft(new r(n),o)},Ee.naturalExponential=Ee.exp=function(){return H6(this)},Ee.naturalLogarithm=Ee.ln=function(){return Yl(this)},Ee.negated=Ee.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e},Ee.plus=Ee.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?U6(t,e):q6(t,(e.s=-e.s,e))},Ee.precision=Ee.sd=function(e){var t,n,r,o=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(za+e);if(t=It(o)+1,r=o.d.length-1,n=r*bt+1,r=o.d[r],r){for(;r%10==0;r/=10)n--;for(r=o.d[0];r>=10;r/=10)n++}return e&&t>n?t:n},Ee.squareRoot=Ee.sqrt=function(){var e,t,n,r,o,a,i,s=this,c=s.constructor;if(s.s<1){if(!s.s)return new c(0);throw Error(Gn+"NaN")}for(e=It(s),jt=!1,o=Math.sqrt(+s),o==0||o==1/0?(t=Br(s.d),(t.length+e)%2==0&&(t+="0"),o=Math.sqrt(t),e=gs((e+1)/2)-(e<0||e%2),o==1/0?t="5e"+e:(t=o.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),r=new c(t)):r=new c(o.toString()),n=c.precision,o=i=n+3;;)if(a=r,r=a.plus(ko(s,a,i+2)).times(.5),Br(a.d).slice(0,i)===(t=Br(r.d)).slice(0,i)){if(t=t.slice(i-3,i+1),o==i&&t=="4999"){if(ft(a,n+1,0),a.times(a).eq(s)){r=a;break}}else if(t!="9999")break;i+=4}return jt=!0,ft(r,n)},Ee.times=Ee.mul=function(e){var t,n,r,o,a,i,s,c,l,u=this,d=u.constructor,f=u.d,p=(e=new d(e)).d;if(!u.s||!e.s)return new d(0);for(e.s*=u.s,n=u.e+e.e,c=f.length,l=p.length,c<l&&(a=f,f=p,p=a,i=c,c=l,l=i),a=[],i=c+l,r=i;r--;)a.push(0);for(r=l;--r>=0;){for(t=0,o=c+r;o>r;)s=a[o]+p[r]*f[o-r-1]+t,a[o--]=s%Wt|0,t=s/Wt|0;a[o]=(a[o]+t)%Wt|0}for(;!a[--i];)a.pop();return t?++n:a.shift(),e.d=a,e.e=n,jt?ft(e,d.precision):e},Ee.toDecimalPlaces=Ee.todp=function(e,t){var n=this,r=n.constructor;return n=new r(n),e===void 0?n:(Fr(e,0,ys),t===void 0?t=r.rounding:Fr(t,0,8),ft(n,e+It(n)+1,t))},Ee.toExponential=function(e,t){var n,r=this,o=r.constructor;return e===void 0?n=Ua(r,!0):(Fr(e,0,ys),t===void 0?t=o.rounding:Fr(t,0,8),r=ft(new o(r),e+1,t),n=Ua(r,!0,e+1)),n},Ee.toFixed=function(e,t){var n,r,o=this,a=o.constructor;return e===void 0?Ua(o):(Fr(e,0,ys),t===void 0?t=a.rounding:Fr(t,0,8),r=ft(new a(o),e+It(o)+1,t),n=Ua(r.abs(),!1,e+It(r)+1),o.isneg()&&!o.isZero()?"-"+n:n)},Ee.toInteger=Ee.toint=function(){var e=this,t=e.constructor;return ft(new t(e),It(e)+1,t.rounding)},Ee.toNumber=function(){return+this},Ee.toPower=Ee.pow=function(e){var t,n,r,o,a,i,s=this,c=s.constructor,l=12,u=+(e=new c(e));if(!e.s)return new c(Dn);if(s=new c(s),!s.s){if(e.s<1)throw Error(Gn+"Infinity");return s}if(s.eq(Dn))return s;if(r=c.precision,e.eq(Dn))return ft(s,r);if(t=e.e,n=e.d.length-1,i=t>=n,a=s.s,i){if((n=u<0?-u:u)<=V6){for(o=new c(Dn),t=Math.ceil(r/bt+4),jt=!1;n%2&&(o=o.times(s),Y6(o.d,t)),n=gs(n/2),n!==0;)s=s.times(s),Y6(s.d,t);return jt=!0,e.s<0?new c(Dn).div(o):ft(o,r)}}else if(a<0)throw Error(Gn+"NaN");return a=a<0&&e.d[Math.max(t,n)]&1?-1:1,s.s=1,jt=!1,o=e.times(Yl(s,r+l)),jt=!0,o=H6(o),o.s=a,o},Ee.toPrecision=function(e,t){var n,r,o=this,a=o.constructor;return e===void 0?(n=It(o),r=Ua(o,n<=a.toExpNeg||n>=a.toExpPos)):(Fr(e,1,ys),t===void 0?t=a.rounding:Fr(t,0,8),o=ft(new a(o),e,t),n=It(o),r=Ua(o,e<=n||n<=a.toExpNeg,e)),r},Ee.toSignificantDigits=Ee.tosd=function(e,t){var n=this,r=n.constructor;return e===void 0?(e=r.precision,t=r.rounding):(Fr(e,1,ys),t===void 0?t=r.rounding:Fr(t,0,8)),ft(new r(n),e,t)},Ee.toString=Ee.valueOf=Ee.val=Ee.toJSON=Ee[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=It(e),n=e.constructor;return Ua(e,t<=n.toExpNeg||t>=n.toExpPos)};function U6(e,t){var n,r,o,a,i,s,c,l,u=e.constructor,d=u.precision;if(!e.s||!t.s)return t.s||(t=new u(e)),jt?ft(t,d):t;if(c=e.d,l=t.d,i=e.e,o=t.e,c=c.slice(),a=i-o,a){for(a<0?(r=c,a=-a,s=l.length):(r=l,o=i,s=c.length),i=Math.ceil(d/bt),s=i>s?i+1:s+1,a>s&&(a=s,r.length=1),r.reverse();a--;)r.push(0);r.reverse()}for(s=c.length,a=l.length,s-a<0&&(a=s,r=l,l=c,c=r),n=0;a;)n=(c[--a]=c[a]+l[a]+n)/Wt|0,c[a]%=Wt;for(n&&(c.unshift(n),++o),s=c.length;c[--s]==0;)c.pop();return t.d=c,t.e=o,jt?ft(t,d):t}function Fr(e,t,n){if(e!==~~e||e<t||e>n)throw Error(za+e)}function Br(e){var t,n,r,o=e.length-1,a="",i=e[0];if(o>0){for(a+=i,t=1;t<o;t++)r=e[t]+"",n=bt-r.length,n&&(a+=oa(n)),a+=r;i=e[t],r=i+"",n=bt-r.length,n&&(a+=oa(n))}else if(i===0)return"0";for(;i%10===0;)i/=10;return a+i}var ko=function(){function e(r,o){var a,i=0,s=r.length;for(r=r.slice();s--;)a=r[s]*o+i,r[s]=a%Wt|0,i=a/Wt|0;return i&&r.unshift(i),r}function t(r,o,a,i){var s,c;if(a!=i)c=a>i?1:-1;else for(s=c=0;s<a;s++)if(r[s]!=o[s]){c=r[s]>o[s]?1:-1;break}return c}function n(r,o,a){for(var i=0;a--;)r[a]-=i,i=r[a]<o[a]?1:0,r[a]=i*Wt+r[a]-o[a];for(;!r[0]&&r.length>1;)r.shift()}return function(r,o,a,i){var s,c,l,u,d,f,p,y,m,v,b,x,j,w,_,E,S,C,M=r.constructor,P=r.s==o.s?1:-1,N=r.d,R=o.d;if(!r.s)return new M(r);if(!o.s)throw Error(Gn+"Division by zero");for(c=r.e-o.e,S=R.length,_=N.length,p=new M(P),y=p.d=[],l=0;R[l]==(N[l]||0);)++l;if(R[l]>(N[l]||0)&&--c,a==null?x=a=M.precision:i?x=a+(It(r)-It(o))+1:x=a,x<0)return new M(0);if(x=x/bt+2|0,l=0,S==1)for(u=0,R=R[0],x++;(l<_||u)&&x--;l++)j=u*Wt+(N[l]||0),y[l]=j/R|0,u=j%R|0;else{for(u=Wt/(R[0]+1)|0,u>1&&(R=e(R,u),N=e(N,u),S=R.length,_=N.length),w=S,m=N.slice(0,S),v=m.length;v<S;)m[v++]=0;C=R.slice(),C.unshift(0),E=R[0],R[1]>=Wt/2&&++E;do u=0,s=t(R,m,S,v),s<0?(b=m[0],S!=v&&(b=b*Wt+(m[1]||0)),u=b/E|0,u>1?(u>=Wt&&(u=Wt-1),d=e(R,u),f=d.length,v=m.length,s=t(d,m,f,v),s==1&&(u--,n(d,S<f?C:R,f))):(u==0&&(s=u=1),d=R.slice()),f=d.length,f<v&&d.unshift(0),n(m,d,v),s==-1&&(v=m.length,s=t(R,m,S,v),s<1&&(u++,n(m,S<v?C:R,v))),v=m.length):s===0&&(u++,m=[0]),y[l++]=u,s&&m[0]?m[v++]=N[w]||0:(m=[N[w]],v=1);while((w++<_||m[0]!==void 0)&&x--)}return y[0]||y.shift(),p.e=c,ft(p,i?a+It(p)+1:a)}}();function H6(e,t){var n,r,o,a,i,s,c=0,l=0,u=e.constructor,d=u.precision;if(It(e)>16)throw Error(u_+It(e));if(!e.s)return new u(Dn);for(t==null?(jt=!1,s=d):s=t,i=new u(.03125);e.abs().gte(.1);)e=e.times(i),l+=5;for(r=Math.log(Va(2,l))/Math.LN10*2+5|0,s+=r,n=o=a=new u(Dn),u.precision=s;;){if(o=ft(o.times(e),s),n=n.times(++c),i=a.plus(ko(o,n,s)),Br(i.d).slice(0,s)===Br(a.d).slice(0,s)){for(;l--;)a=ft(a.times(a),s);return u.precision=d,t==null?(jt=!0,ft(a,d)):a}a=i}}function It(e){for(var t=e.e*bt,n=e.d[0];n>=10;n/=10)t++;return t}function d_(e,t,n){if(t>e.LN10.sd())throw jt=!0,n&&(e.precision=n),Error(Gn+"LN10 precision limit exceeded");return ft(new e(e.LN10),t)}function oa(e){for(var t="";e--;)t+="0";return t}function Yl(e,t){var n,r,o,a,i,s,c,l,u,d=1,f=10,p=e,y=p.d,m=p.constructor,v=m.precision;if(p.s<1)throw Error(Gn+(p.s?"NaN":"-Infinity"));if(p.eq(Dn))return new m(0);if(t==null?(jt=!1,l=v):l=t,p.eq(10))return t==null&&(jt=!0),d_(m,l);if(l+=f,m.precision=l,n=Br(y),r=n.charAt(0),a=It(p),Math.abs(a)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)p=p.times(e),n=Br(p.d),r=n.charAt(0),d++;a=It(p),r>1?(p=new m("0."+n),a++):p=new m(r+"."+n.slice(1))}else return c=d_(m,l+2,v).times(a+""),p=Yl(new m(r+"."+n.slice(1)),l-f).plus(c),m.precision=v,t==null?(jt=!0,ft(p,v)):p;for(s=i=p=ko(p.minus(Dn),p.plus(Dn),l),u=ft(p.times(p),l),o=3;;){if(i=ft(i.times(u),l),c=s.plus(ko(i,new m(o),l)),Br(c.d).slice(0,l)===Br(s.d).slice(0,l))return s=s.times(2),a!==0&&(s=s.plus(d_(m,l+2,v).times(a+""))),s=ko(s,new m(d),l),m.precision=v,t==null?(jt=!0,ft(s,v)):s;s=c,o+=2}}function W6(e,t){var n,r,o;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;t.charCodeAt(r)===48;)++r;for(o=t.length;t.charCodeAt(o-1)===48;)--o;if(t=t.slice(r,o),t){if(o-=r,n=n-r-1,e.e=gs(n/bt),e.d=[],r=(n+1)%bt,n<0&&(r+=bt),r<o){for(r&&e.d.push(+t.slice(0,r)),o-=bt;r<o;)e.d.push(+t.slice(r,r+=bt));t=t.slice(r),r=bt-t.length}else r-=o;for(;r--;)t+="0";if(e.d.push(+t),jt&&(e.e>Lp||e.e<-Lp))throw Error(u_+n)}else e.s=0,e.e=0,e.d=[0];return e}function ft(e,t,n){var r,o,a,i,s,c,l,u,d=e.d;for(i=1,a=d[0];a>=10;a/=10)i++;if(r=t-i,r<0)r+=bt,o=t,l=d[u=0];else{if(u=Math.ceil((r+1)/bt),a=d.length,u>=a)return e;for(l=a=d[u],i=1;a>=10;a/=10)i++;r%=bt,o=r-bt+i}if(n!==void 0&&(a=Va(10,i-o-1),s=l/a%10|0,c=t<0||d[u+1]!==void 0||l%a,c=n<4?(s||c)&&(n==0||n==(e.s<0?3:2)):s>5||s==5&&(n==4||c||n==6&&(r>0?o>0?l/Va(10,i-o):0:d[u-1])%10&1||n==(e.s<0?8:7))),t<1||!d[0])return c?(a=It(e),d.length=1,t=t-a-1,d[0]=Va(10,(bt-t%bt)%bt),e.e=gs(-t/bt)||0):(d.length=1,d[0]=e.e=e.s=0),e;if(r==0?(d.length=u,a=1,u--):(d.length=u+1,a=Va(10,bt-r),d[u]=o>0?(l/Va(10,i-o)%Va(10,o)|0)*a:0),c)for(;;)if(u==0){(d[0]+=a)==Wt&&(d[0]=1,++e.e);break}else{if(d[u]+=a,d[u]!=Wt)break;d[u--]=0,a=1}for(r=d.length;d[--r]===0;)d.pop();if(jt&&(e.e>Lp||e.e<-Lp))throw Error(u_+It(e));return e}function q6(e,t){var n,r,o,a,i,s,c,l,u,d,f=e.constructor,p=f.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new f(e),jt?ft(t,p):t;if(c=e.d,d=t.d,r=t.e,l=e.e,c=c.slice(),i=l-r,i){for(u=i<0,u?(n=c,i=-i,s=d.length):(n=d,r=l,s=c.length),o=Math.max(Math.ceil(p/bt),s)+2,i>o&&(i=o,n.length=1),n.reverse(),o=i;o--;)n.push(0);n.reverse()}else{for(o=c.length,s=d.length,u=o<s,u&&(s=o),o=0;o<s;o++)if(c[o]!=d[o]){u=c[o]<d[o];break}i=0}for(u&&(n=c,c=d,d=n,t.s=-t.s),s=c.length,o=d.length-s;o>0;--o)c[s++]=0;for(o=d.length;o>i;){if(c[--o]<d[o]){for(a=o;a&&c[--a]===0;)c[a]=Wt-1;--c[a],c[o]+=Wt}c[o]-=d[o]}for(;c[--s]===0;)c.pop();for(;c[0]===0;c.shift())--r;return c[0]?(t.d=c,t.e=r,jt?ft(t,p):t):new f(0)}function Ua(e,t,n){var r,o=It(e),a=Br(e.d),i=a.length;return t?(n&&(r=n-i)>0?a=a.charAt(0)+"."+a.slice(1)+oa(r):i>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(o<0?"e":"e+")+o):o<0?(a="0."+oa(-o-1)+a,n&&(r=n-i)>0&&(a+=oa(r))):o>=i?(a+=oa(o+1-i),n&&(r=n-o-1)>0&&(a=a+"."+oa(r))):((r=o+1)<i&&(a=a.slice(0,r)+"."+a.slice(r)),n&&(r=n-i)>0&&(o+1===i&&(a+="."),a+=oa(r))),e.s<0?"-"+a:a}function Y6(e,t){if(e.length>t)return e.length=t,!0}function K6(e){var t,n,r;function o(a){var i=this;if(!(i instanceof o))return new o(a);if(i.constructor=o,a instanceof o){i.s=a.s,i.e=a.e,i.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(za+a);if(a>0)i.s=1;else if(a<0)a=-a,i.s=-1;else{i.s=0,i.e=0,i.d=[0];return}if(a===~~a&&a<1e7){i.e=0,i.d=[a];return}return W6(i,a.toString())}else if(typeof a!="string")throw Error(za+a);if(a.charCodeAt(0)===45?(a=a.slice(1),i.s=-1):i.s=1,Dde.test(a))W6(i,a);else throw Error(za+a)}if(o.prototype=Ee,o.ROUND_UP=0,o.ROUND_DOWN=1,o.ROUND_CEIL=2,o.ROUND_FLOOR=3,o.ROUND_HALF_UP=4,o.ROUND_HALF_DOWN=5,o.ROUND_HALF_EVEN=6,o.ROUND_HALF_CEIL=7,o.ROUND_HALF_FLOOR=8,o.clone=K6,o.config=o.set=Lde,e===void 0&&(e={}),e)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<r.length;)e.hasOwnProperty(n=r[t++])||(e[n]=this[n]);return o.config(e),o}function Lde(e){if(!e||typeof e!="object")throw Error(Gn+"Object expected");var t,n,r,o=["precision",1,ys,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<o.length;t+=3)if((r=e[n=o[t]])!==void 0)if(gs(r)===r&&r>=o[t+1]&&r<=o[t+2])this[n]=r;else throw Error(za+n+": "+r);if((r=e[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(za+n+": "+r);return this}var f_=K6(Ide);Dn=new f_(1);const lt=f_;function Fde(e){return Vde(e)||zde(e)||$de(e)||Bde()}function Bde(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $de(e,t){if(e){if(typeof e=="string")return p_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p_(e,t)}}function zde(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function Vde(e){if(Array.isArray(e))return p_(e)}function p_(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ude=function(e){return e},X6={"@@functional/placeholder":!0},G6=function(e){return e===X6},Q6=function(e){return function t(){return arguments.length===0||arguments.length===1&&G6(arguments.length<=0?void 0:arguments[0])?t:e.apply(void 0,arguments)}},Hde=function e(t,n){return t===1?n:Q6(function(){for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];var i=o.filter(function(s){return s!==X6}).length;return i>=t?n.apply(void 0,o):e(t-i,Q6(function(){for(var s=arguments.length,c=new Array(s),l=0;l<s;l++)c[l]=arguments[l];var u=o.map(function(d){return G6(d)?c.shift():d});return n.apply(void 0,Fde(u).concat(c))}))})},Fp=function(e){return Hde(e.length,e)},h_=function(e,t){for(var n=[],r=e;r<t;++r)n[r-e]=r;return n},Wde=Fp(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(n){return t[n]}).map(e)}),qde=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!t.length)return Ude;var r=t.reverse(),o=r[0],a=r.slice(1);return function(){return a.reduce(function(i,s){return s(i)},o.apply(void 0,arguments))}},m_=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},J6=function(e){var t=null,n=null;return function(){for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return t&&o.every(function(i,s){return i===t[s]})||(t=o,n=e.apply(void 0,o)),n}};function Yde(e){var t;return e===0?t=1:t=Math.floor(new lt(e).abs().log(10).toNumber())+1,t}function Kde(e,t,n){for(var r=new lt(e),o=0,a=[];r.lt(t)&&o<1e5;)a.push(r.toNumber()),r=r.add(n),o++;return a}var Xde=Fp(function(e,t,n){var r=+e,o=+t;return r+n*(o-r)}),Gde=Fp(function(e,t,n){var r=t-+e;return r=r||1/0,(n-e)/r}),Qde=Fp(function(e,t,n){var r=t-+e;return r=r||1/0,Math.max(0,Math.min(1,(n-e)/r))});const Bp={rangeStep:Kde,getDigitCount:Yde,interpolateNumber:Xde,uninterpolateNumber:Gde,uninterpolateTruncation:Qde};function y_(e){return efe(e)||Zde(e)||Z6(e)||Jde()}function Jde(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Zde(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function efe(e){if(Array.isArray(e))return g_(e)}function Kl(e,t){return rfe(e)||nfe(e,t)||Z6(e,t)||tfe()}function tfe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Z6(e,t){if(e){if(typeof e=="string")return g_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g_(e,t)}}function g_(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function nfe(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var n=[],r=!0,o=!1,a=void 0;try{for(var i=e[Symbol.iterator](),s;!(r=(s=i.next()).done)&&(n.push(s.value),!(t&&n.length===t));r=!0);}catch(c){o=!0,a=c}finally{try{!r&&i.return!=null&&i.return()}finally{if(o)throw a}}return n}}function rfe(e){if(Array.isArray(e))return e}function e8(e){var t=Kl(e,2),n=t[0],r=t[1],o=n,a=r;return n>r&&(o=r,a=n),[o,a]}function t8(e,t,n){if(e.lte(0))return new lt(0);var r=Bp.getDigitCount(e.toNumber()),o=new lt(10).pow(r),a=e.div(o),i=r!==1?.05:.1,s=new lt(Math.ceil(a.div(i).toNumber())).add(n).mul(i),c=s.mul(o);return t?c:new lt(Math.ceil(c))}function ofe(e,t,n){var r=1,o=new lt(e);if(!o.isint()&&n){var a=Math.abs(e);a<1?(r=new lt(10).pow(Bp.getDigitCount(e)-1),o=new lt(Math.floor(o.div(r).toNumber())).mul(r)):a>1&&(o=new lt(Math.floor(e)))}else e===0?o=new lt(Math.floor((t-1)/2)):n||(o=new lt(Math.floor(e)));var i=Math.floor((t-1)/2),s=qde(Wde(function(c){return o.add(new lt(c-i).mul(r)).toNumber()}),h_);return s(0,t)}function n8(e,t,n,r){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(n-1)))return{step:new lt(0),tickMin:new lt(0),tickMax:new lt(0)};var a=t8(new lt(t).sub(e).div(n-1),r,o),i;e<=0&&t>=0?i=new lt(0):(i=new lt(e).add(t).div(2),i=i.sub(new lt(i).mod(a)));var s=Math.ceil(i.sub(e).div(a).toNumber()),c=Math.ceil(new lt(t).sub(i).div(a).toNumber()),l=s+c+1;return l>n?n8(e,t,n,r,o+1):(l<n&&(c=t>0?c+(n-l):c,s=t>0?s:s+(n-l)),{step:a,tickMin:i.sub(new lt(s).mul(a)),tickMax:i.add(new lt(c).mul(a))})}function afe(e){var t=Kl(e,2),n=t[0],r=t[1],o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=Math.max(o,2),s=e8([n,r]),c=Kl(s,2),l=c[0],u=c[1];if(l===-1/0||u===1/0){var d=u===1/0?[l].concat(y_(h_(0,o-1).map(function(){return 1/0}))):[].concat(y_(h_(0,o-1).map(function(){return-1/0})),[u]);return n>r?m_(d):d}if(l===u)return ofe(l,o,a);var f=n8(l,u,i,a),p=f.step,y=f.tickMin,m=f.tickMax,v=Bp.rangeStep(y,m.add(new lt(.1).mul(p)),p);return n>r?m_(v):v}function ife(e,t){var n=Kl(e,2),r=n[0],o=n[1],a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=e8([r,o]),s=Kl(i,2),c=s[0],l=s[1];if(c===-1/0||l===1/0)return[r,o];if(c===l)return[c];var u=Math.max(t,2),d=t8(new lt(l).sub(c).div(u-1),a,0),f=[].concat(y_(Bp.rangeStep(new lt(c),new lt(l).sub(new lt(.99).mul(d)),d)),[l]);return r>o?m_(f):f}var sfe=J6(afe),cfe=J6(ife),lfe="Invariant failed";function Ha(e,t){throw new Error(lfe)}var ufe=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function vs(e){"@babel/helpers - typeof";return vs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vs(e)}function $p(){return $p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$p.apply(this,arguments)}function dfe(e,t){return mfe(e)||hfe(e,t)||pfe(e,t)||ffe()}function ffe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pfe(e,t){if(e){if(typeof e=="string")return r8(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r8(e,t)}}function r8(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function hfe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,o,a,i,s=[],c=!0,l=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(c=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(u){l=!0,o=u}finally{try{if(!c&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return s}}function mfe(e){if(Array.isArray(e))return e}function yfe(e,t){if(e==null)return{};var n=gfe(e,t),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function gfe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function vfe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bfe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,i8(r.key),r)}}function xfe(e,t,n){return t&&bfe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function wfe(e,t,n){return t=zp(t),_fe(e,o8()?Reflect.construct(t,n||[],zp(e).constructor):t.apply(e,n))}function _fe(e,t){if(t&&(vs(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return jfe(e)}function jfe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function o8(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(o8=function(){return!!e})()}function zp(e){return zp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},zp(e)}function Efe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v_(e,t)}function v_(e,t){return v_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},v_(e,t)}function a8(e,t,n){return t=i8(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i8(e){var t=Sfe(e,"string");return vs(t)=="symbol"?t:t+""}function Sfe(e,t){if(vs(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(vs(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Vp=function(e){function t(){return vfe(this,t),wfe(this,t,arguments)}return Efe(t,e),xfe(t,[{key:"render",value:function(){var n=this.props,r=n.offset,o=n.layout,a=n.width,i=n.dataKey,s=n.data,c=n.dataPointFormatter,l=n.xAxis,u=n.yAxis,d=yfe(n,ufe),f=nt(d,!1);this.props.direction==="x"&&l.type!=="number"&&Ha();var p=s.map(function(y){var m=c(y,i),v=m.x,b=m.y,x=m.value,j=m.errorVal;if(!j)return null;var w=[],_,E;if(Array.isArray(j)){var S=dfe(j,2);_=S[0],E=S[1]}else _=E=j;if(o==="vertical"){var C=l.scale,M=b+r,P=M+a,N=M-a,R=C(x-_),A=C(x+E);w.push({x1:A,y1:P,x2:A,y2:N}),w.push({x1:R,y1:M,x2:A,y2:M}),w.push({x1:R,y1:P,x2:R,y2:N})}else if(o==="horizontal"){var O=u.scale,k=v+r,T=k-a,I=k+a,L=O(x-_),D=O(x+E);w.push({x1:T,y1:D,x2:I,y2:D}),w.push({x1:k,y1:L,x2:k,y2:D}),w.push({x1:T,y1:L,x2:I,y2:L})}return V.createElement(Ut,$p({className:"recharts-errorBar",key:"bar-".concat(w.map(function(z){return"".concat(z.x1,"-").concat(z.x2,"-").concat(z.y1,"-").concat(z.y2)}))},f),w.map(function(z){return V.createElement("line",$p({},z,{key:"line-".concat(z.x1,"-").concat(z.x2,"-").concat(z.y1,"-").concat(z.y2)}))}))});return V.createElement(Ut,{className:"recharts-errorBars"},p)}}])}(V.Component);a8(Vp,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"}),a8(Vp,"displayName","ErrorBar");function Xl(e){"@babel/helpers - typeof";return Xl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xl(e)}function s8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Wa(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?s8(Object(n),!0).forEach(function(r){Cfe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s8(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Cfe(e,t,n){return t=Ofe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ofe(e){var t=Mfe(e,"string");return Xl(t)=="symbol"?t:t+""}function Mfe(e,t){if(Xl(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Xl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var c8=function(e){var t=e.children,n=e.formattedGraphicalItems,r=e.legendWidth,o=e.legendContent,a=In(t,ss);if(!a)return null;var i=ss.defaultProps,s=i!==void 0?Wa(Wa({},i),a.props):{},c;return a.props&&a.props.payload?c=a.props&&a.props.payload:o==="children"?c=(n||[]).reduce(function(l,u){var d=u.item,f=u.props,p=f.sectors||f.data||[];return l.concat(p.map(function(y){return{type:a.props.iconType||d.props.legendType,value:y.name,color:y.fill,payload:y}}))},[]):c=(n||[]).map(function(l){var u=l.item,d=u.type.defaultProps,f=d!==void 0?Wa(Wa({},d),u.props):{},p=f.dataKey,y=f.name,m=f.legendType,v=f.hide;return{inactive:v,dataKey:p,type:s.iconType||m||"square",color:x_(u),value:y||p,payload:f}}),Wa(Wa(Wa({},s),ss.getWithHeight(a,r)),{},{payload:c,item:a})};function Gl(e){"@babel/helpers - typeof";return Gl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gl(e)}function l8(e){return Afe(e)||kfe(e)||Pfe(e)||Nfe()}function Nfe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Pfe(e,t){if(e){if(typeof e=="string")return b_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b_(e,t)}}function kfe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Afe(e){if(Array.isArray(e))return b_(e)}function b_(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Pt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?u8(Object(n),!0).forEach(function(r){bs(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u8(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function bs(e,t,n){return t=Tfe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Tfe(e){var t=Rfe(e,"string");return Gl(t)=="symbol"?t:t+""}function Rfe(e,t){if(Gl(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Gl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $r(e,t,n){return rt(e)||rt(t)?n:Bt(t)?Hn(e,t,n):We(t)?t(e):n}function Up(e,t,n,r){var o=Ade(e,function(s){return $r(s,t)});if(n==="number"){var a=o.filter(function(s){return me(s)||parseFloat(s)});return a.length?[Dp(a),Ip(a)]:[1/0,-1/0]}var i=r?o.filter(function(s){return!rt(s)}):o;return i.map(function(s){return Bt(s)||s instanceof Date?s:""})}var Ife=function(e){var t,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,a=-1,i=(t=n==null?void 0:n.length)!==null&&t!==void 0?t:0;if(i<=1)return 0;if(o&&o.axisType==="angleAxis"&&Math.abs(Math.abs(o.range[1]-o.range[0])-360)<=1e-6)for(var s=o.range,c=0;c<i;c++){var l=c>0?r[c-1].coordinate:r[i-1].coordinate,u=r[c].coordinate,d=c>=i-1?r[0].coordinate:r[c+1].coordinate,f=void 0;if(yr(u-l)!==yr(d-u)){var p=[];if(yr(d-u)===yr(s[1]-s[0])){f=d;var y=u+s[1]-s[0];p[0]=Math.min(y,(y+l)/2),p[1]=Math.max(y,(y+l)/2)}else{f=l;var m=d+s[1]-s[0];p[0]=Math.min(u,(m+u)/2),p[1]=Math.max(u,(m+u)/2)}var v=[Math.min(u,(f+u)/2),Math.max(u,(f+u)/2)];if(e>v[0]&&e<=v[1]||e>=p[0]&&e<=p[1]){a=r[c].index;break}}else{var b=Math.min(l,d),x=Math.max(l,d);if(e>(b+u)/2&&e<=(x+u)/2){a=r[c].index;break}}}else for(var j=0;j<i;j++)if(j===0&&e<=(n[j].coordinate+n[j+1].coordinate)/2||j>0&&j<i-1&&e>(n[j].coordinate+n[j-1].coordinate)/2&&e<=(n[j].coordinate+n[j+1].coordinate)/2||j===i-1&&e>(n[j].coordinate+n[j-1].coordinate)/2){a=n[j].index;break}return a},x_=function(e){var t,n=e,r=n.type.displayName,o=(t=e.type)!==null&&t!==void 0&&t.defaultProps?Pt(Pt({},e.type.defaultProps),e.props):e.props,a=o.stroke,i=o.fill,s;switch(r){case"Line":s=a;break;case"Area":case"Radar":s=a&&a!=="none"?a:i;break;default:s=i;break}return s},Dfe=function(e){var t=e.barSize,n=e.totalSize,r=e.stackGroups,o=r===void 0?{}:r;if(!o)return{};for(var a={},i=Object.keys(o),s=0,c=i.length;s<c;s++)for(var l=o[i[s]].stackGroups,u=Object.keys(l),d=0,f=u.length;d<f;d++){var p=l[u[d]],y=p.items,m=p.cateAxisId,v=y.filter(function(E){return _o(E.type).indexOf("Bar")>=0});if(v&&v.length){var b=v[0].type.defaultProps,x=b!==void 0?Pt(Pt({},b),v[0].props):v[0].props,j=x.barSize,w=x[m];a[w]||(a[w]=[]);var _=rt(j)?t:j;a[w].push({item:v[0],stackList:v.slice(1),barSize:rt(_)?void 0:Da(_,n,0)})}}return a},Lfe=function(e){var t=e.barGap,n=e.barCategoryGap,r=e.bandSize,o=e.sizeList,a=o===void 0?[]:o,i=e.maxBarSize,s=a.length;if(s<1)return null;var c=Da(t,r,0,!0),l,u=[];if(a[0].barSize===+a[0].barSize){var d=!1,f=r/s,p=a.reduce(function(j,w){return j+w.barSize||0},0);p+=(s-1)*c,p>=r&&(p-=(s-1)*c,c=0),p>=r&&f>0&&(d=!0,f*=.9,p=s*f);var y=(r-p)/2>>0,m={offset:y-c,size:0};l=a.reduce(function(j,w){var _={item:w.item,position:{offset:m.offset+m.size+c,size:d?f:w.barSize}},E=[].concat(l8(j),[_]);return m=E[E.length-1].position,w.stackList&&w.stackList.length&&w.stackList.forEach(function(S){E.push({item:S,position:m})}),E},u)}else{var v=Da(n,r,0,!0);r-2*v-(s-1)*c<=0&&(c=0);var b=(r-2*v-(s-1)*c)/s;b>1&&(b>>=0);var x=i===+i?Math.min(b,i):b;l=a.reduce(function(j,w,_){var E=[].concat(l8(j),[{item:w.item,position:{offset:v+(b+c)*_+(b-x)/2,size:x}}]);return w.stackList&&w.stackList.length&&w.stackList.forEach(function(S){E.push({item:S,position:E[E.length-1].position})}),E},u)}return l},Ffe=function(e,t,n,r){var o=n.children,a=n.width,i=n.margin,s=a-(i.left||0)-(i.right||0),c=c8({children:o,legendWidth:s});if(c){var l=r||{},u=l.width,d=l.height,f=c.align,p=c.verticalAlign,y=c.layout;if((y==="vertical"||y==="horizontal"&&p==="middle")&&f!=="center"&&me(e[f]))return Pt(Pt({},e),{},bs({},f,e[f]+(u||0)));if((y==="horizontal"||y==="vertical"&&f==="center")&&p!=="middle"&&me(e[p]))return Pt(Pt({},e),{},bs({},p,e[p]+(d||0)))}return e},Bfe=function(e,t,n){return rt(t)?!0:e==="horizontal"?t==="yAxis":e==="vertical"||n==="x"?t==="xAxis":n==="y"?t==="yAxis":!0},d8=function(e,t,n,r,o){var a=t.props.children,i=gr(a,Vp).filter(function(c){return Bfe(r,o,c.props.direction)});if(i&&i.length){var s=i.map(function(c){return c.props.dataKey});return e.reduce(function(c,l){var u=$r(l,n);if(rt(u))return c;var d=Array.isArray(u)?[Dp(u),Ip(u)]:[u,u],f=s.reduce(function(p,y){var m=$r(l,y,0),v=d[0]-Math.abs(Array.isArray(m)?m[0]:m),b=d[1]+Math.abs(Array.isArray(m)?m[1]:m);return[Math.min(v,p[0]),Math.max(b,p[1])]},[1/0,-1/0]);return[Math.min(f[0],c[0]),Math.max(f[1],c[1])]},[1/0,-1/0])}return null},$fe=function(e,t,n,r,o){var a=t.map(function(i){return d8(e,i,n,o,r)}).filter(function(i){return!rt(i)});return a&&a.length?a.reduce(function(i,s){return[Math.min(i[0],s[0]),Math.max(i[1],s[1])]},[1/0,-1/0]):null},f8=function(e,t,n,r,o){var a=t.map(function(s){var c=s.props.dataKey;return n==="number"&&c&&d8(e,s,c,r)||Up(e,c,n,o)});if(n==="number")return a.reduce(function(s,c){return[Math.min(s[0],c[0]),Math.max(s[1],c[1])]},[1/0,-1/0]);var i={};return a.reduce(function(s,c){for(var l=0,u=c.length;l<u;l++)i[c[l]]||(i[c[l]]=!0,s.push(c[l]));return s},[])},p8=function(e,t){return e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis"},h8=function(e,t,n,r){if(r)return e.map(function(s){return s.coordinate});var o,a,i=e.map(function(s){return s.coordinate===t&&(o=!0),s.coordinate===n&&(a=!0),s.coordinate});return o||i.push(t),a||i.push(n),i},Ao=function(e,t,n){if(!e)return null;var r=e.scale,o=e.duplicateDomain,a=e.type,i=e.range,s=e.realScaleType==="scaleBand"?r.bandwidth()/2:2,c=(t||n)&&a==="category"&&r.bandwidth?r.bandwidth()/s:0;if(c=e.axisType==="angleAxis"&&(i==null?void 0:i.length)>=2?yr(i[0]-i[1])*2*c:c,t&&(e.ticks||e.niceTicks)){var l=(e.ticks||e.niceTicks).map(function(u){var d=o?o.indexOf(u):u;return{coordinate:r(d)+c,value:u,offset:c}});return l.filter(function(u){return!Ol(u.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(u,d){return{coordinate:r(u)+c,value:u,index:d,offset:c}}):r.ticks&&!n?r.ticks(e.tickCount).map(function(u){return{coordinate:r(u)+c,value:u,offset:c}}):r.domain().map(function(u,d){return{coordinate:r(u)+c,value:o?o[u]:u,index:d,offset:c}})},w_=new WeakMap,Hp=function(e,t){if(typeof t!="function")return e;w_.has(e)||w_.set(e,new WeakMap);var n=w_.get(e);if(n.has(t))return n.get(t);var r=function(){e.apply(void 0,arguments),t.apply(void 0,arguments)};return n.set(t,r),r},zfe=function(e,t,n){var r=e.scale,o=e.type,a=e.layout,i=e.axisType;if(r==="auto")return a==="radial"&&i==="radiusAxis"?{scale:Bl(),realScaleType:"band"}:a==="radial"&&i==="angleAxis"?{scale:Cp(),realScaleType:"linear"}:o==="category"&&t&&(t.indexOf("LineChart")>=0||t.indexOf("AreaChart")>=0||t.indexOf("ComposedChart")>=0&&!n)?{scale:$l(),realScaleType:"point"}:o==="category"?{scale:Bl(),realScaleType:"band"}:{scale:Cp(),realScaleType:"linear"};if(Cl(r)){var s="scale".concat(tp(r));return{scale:(A6[s]||$l)(),realScaleType:A6[s]?s:"point"}}return We(r)?{scale:r}:{scale:$l(),realScaleType:"point"}},m8=1e-4,Vfe=function(e){var t=e.domain();if(!(!t||t.length<=2)){var n=t.length,r=e.range(),o=Math.min(r[0],r[1])-m8,a=Math.max(r[0],r[1])+m8,i=e(t[0]),s=e(t[n-1]);(i<o||i>a||s<o||s>a)&&e.domain([t[0],t[n-1]])}},Ufe=function(e,t){if(!e)return null;for(var n=0,r=e.length;n<r;n++)if(e[n].item===t)return e[n].position;return null},Hfe=function(e,t){if(!t||t.length!==2||!me(t[0])||!me(t[1]))return e;var n=Math.min(t[0],t[1]),r=Math.max(t[0],t[1]),o=[e[0],e[1]];return(!me(e[0])||e[0]<n)&&(o[0]=n),(!me(e[1])||e[1]>r)&&(o[1]=r),o[0]>r&&(o[0]=r),o[1]<n&&(o[1]=n),o},Wfe=function(e){var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var o=0,a=0,i=0;i<t;++i){var s=Ol(e[i][n][1])?e[i][n][0]:e[i][n][1];s>=0?(e[i][n][0]=o,e[i][n][1]=o+s,o=e[i][n][1]):(e[i][n][0]=a,e[i][n][1]=a+s,a=e[i][n][1])}},qfe=function(e){var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var o=0,a=0;a<t;++a){var i=Ol(e[a][n][1])?e[a][n][0]:e[a][n][1];i>=0?(e[a][n][0]=o,e[a][n][1]=o+i,o=e[a][n][1]):(e[a][n][0]=0,e[a][n][1]=0)}},Yfe={sign:Wfe,expand:qie,none:os,silhouette:Yie,wiggle:Kie,positive:qfe},Kfe=function(e,t,n){var r=t.map(function(i){return i.props.dataKey}),o=Yfe[n],a=Wie().keys(r).value(function(i,s){return+$r(i,s,0)}).order(Sw).offset(o);return a(e)},Xfe=function(e,t,n,r,o,a){if(!e)return null;var i=a?t.reverse():t,s={},c=i.reduce(function(u,d){var f,p=(f=d.type)!==null&&f!==void 0&&f.defaultProps?Pt(Pt({},d.type.defaultProps),d.props):d.props,y=p.stackId,m=p.hide;if(m)return u;var v=p[n],b=u[v]||{hasStack:!1,stackGroups:{}};if(Bt(y)){var x=b.stackGroups[y]||{numericAxisId:n,cateAxisId:r,items:[]};x.items.push(d),b.hasStack=!0,b.stackGroups[y]=x}else b.stackGroups[Jf("_stackId_")]={numericAxisId:n,cateAxisId:r,items:[d]};return Pt(Pt({},u),{},bs({},v,b))},s),l={};return Object.keys(c).reduce(function(u,d){var f=c[d];if(f.hasStack){var p={};f.stackGroups=Object.keys(f.stackGroups).reduce(function(y,m){var v=f.stackGroups[m];return Pt(Pt({},y),{},bs({},m,{numericAxisId:n,cateAxisId:r,items:v.items,stackedData:Kfe(e,v.items,o)}))},p)}return Pt(Pt({},u),{},bs({},d,f))},l)},Gfe=function(e,t){var n=t.realScaleType,r=t.type,o=t.tickCount,a=t.originalDomain,i=t.allowDecimals,s=n||t.scale;if(s!=="auto"&&s!=="linear")return null;if(o&&r==="number"&&a&&(a[0]==="auto"||a[1]==="auto")){var c=e.domain();if(!c.length)return null;var l=sfe(c,o,i);return e.domain([Dp(l),Ip(l)]),{niceTicks:l}}if(o&&r==="number"){var u=e.domain(),d=cfe(u,o,i);return{niceTicks:d}}return null},y8=function(e){var t=e.axis,n=e.ticks,r=e.offset,o=e.bandSize,a=e.entry,i=e.index;if(t.type==="category")return n[i]?n[i].coordinate+r:null;var s=$r(a,t.dataKey,t.domain[i]);return rt(s)?null:t.scale(s)-o/2+r},Qfe=function(e){var t=e.numericAxis,n=t.scale.domain();if(t.type==="number"){var r=Math.min(n[0],n[1]),o=Math.max(n[0],n[1]);return r<=0&&o>=0?0:o<0?o:r}return n[0]},Jfe=function(e,t){var n,r=(n=e.type)!==null&&n!==void 0&&n.defaultProps?Pt(Pt({},e.type.defaultProps),e.props):e.props,o=r.stackId;if(Bt(o)){var a=t[o];if(a){var i=a.items.indexOf(e);return i>=0?a.stackedData[i]:null}}return null},Zfe=function(e){return e.reduce(function(t,n){return[Dp(n.concat([t[0]]).filter(me)),Ip(n.concat([t[1]]).filter(me))]},[1/0,-1/0])},g8=function(e,t,n){return Object.keys(e).reduce(function(r,o){var a=e[o],i=a.stackedData,s=i.reduce(function(c,l){var u=Zfe(l.slice(t,n+1));return[Math.min(c[0],u[0]),Math.max(c[1],u[1])]},[1/0,-1/0]);return[Math.min(s[0],r[0]),Math.max(s[1],r[1])]},[1/0,-1/0]).map(function(r){return r===1/0||r===-1/0?0:r})},v8=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,b8=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,__=function(e,t,n){if(We(e))return e(t,n);if(!Array.isArray(e))return t;var r=[];if(me(e[0]))r[0]=n?e[0]:Math.min(e[0],t[0]);else if(v8.test(e[0])){var o=+v8.exec(e[0])[1];r[0]=t[0]-o}else We(e[0])?r[0]=e[0](t[0]):r[0]=t[0];if(me(e[1]))r[1]=n?e[1]:Math.max(e[1],t[1]);else if(b8.test(e[1])){var a=+b8.exec(e[1])[1];r[1]=t[1]+a}else We(e[1])?r[1]=e[1](t[1]):r[1]=t[1];return r},Wp=function(e,t,n){if(e&&e.scale&&e.scale.bandwidth){var r=e.scale.bandwidth();if(!n||r>0)return r}if(e&&t&&t.length>=2){for(var o=u1(t,function(u){return u.coordinate}),a=1/0,i=1,s=o.length;i<s;i++){var c=o[i],l=o[i-1];a=Math.min((c.coordinate||0)-(l.coordinate||0),a)}return a===1/0?0:a}return n?void 0:0},x8=function(e,t,n){return!e||!e.length||l_(e,Hn(n,"type.defaultProps.domain"))?t:e},w8=function(e,t){var n=e.type.defaultProps?Pt(Pt({},e.type.defaultProps),e.props):e.props,r=n.dataKey,o=n.name,a=n.unit,i=n.formatter,s=n.tooltipType,c=n.chartType,l=n.hide;return Pt(Pt({},nt(e,!1)),{},{dataKey:r,unit:a,formatter:i,name:o||r,color:x_(e),value:$r(t,r),type:s,payload:t,chartType:c,hide:l})};function Ql(e){"@babel/helpers - typeof";return Ql=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ql(e)}function _8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function j8(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?_8(Object(n),!0).forEach(function(r){epe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_8(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function epe(e,t,n){return t=tpe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tpe(e){var t=npe(e,"string");return Ql(t)=="symbol"?t:t+""}function npe(e,t){if(Ql(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Ql(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var qp=Math.PI/180,rpe=function(e){return e*180/Math.PI},Gt=function(e,t,n,r){return{x:e+Math.cos(-qp*r)*n,y:t+Math.sin(-qp*r)*n}},ope=function(e,t){var n=e.x,r=e.y,o=t.x,a=t.y;return Math.sqrt(Math.pow(n-o,2)+Math.pow(r-a,2))},ape=function(e,t){var n=e.x,r=e.y,o=t.cx,a=t.cy,i=ope({x:n,y:r},{x:o,y:a});if(i<=0)return{radius:i};var s=(n-o)/i,c=Math.acos(s);return r>a&&(c=2*Math.PI-c),{radius:i,angle:rpe(c),angleInRadian:c}},ipe=function(e){var t=e.startAngle,n=e.endAngle,r=Math.floor(t/360),o=Math.floor(n/360),a=Math.min(r,o);return{startAngle:t-a*360,endAngle:n-a*360}},spe=function(e,t){var n=t.startAngle,r=t.endAngle,o=Math.floor(n/360),a=Math.floor(r/360),i=Math.min(o,a);return e+i*360},E8=function(e,t){var n=e.x,r=e.y,o=ape({x:n,y:r},t),a=o.radius,i=o.angle,s=t.innerRadius,c=t.outerRadius;if(a<s||a>c)return!1;if(a===0)return!0;var l=ipe(t),u=l.startAngle,d=l.endAngle,f=i,p;if(u<=d){for(;f>d;)f-=360;for(;f<u;)f+=360;p=f>=u&&f<=d}else{for(;f>u;)f-=360;for(;f<d;)f+=360;p=f>=d&&f<=u}return p?j8(j8({},t),{},{radius:a,angle:spe(f,t)}):null};function Jl(e){"@babel/helpers - typeof";return Jl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jl(e)}var cpe=["offset"];function lpe(e){return ppe(e)||fpe(e)||dpe(e)||upe()}function upe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dpe(e,t){if(e){if(typeof e=="string")return j_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return j_(e,t)}}function fpe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function ppe(e){if(Array.isArray(e))return j_(e)}function j_(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function hpe(e,t){if(e==null)return{};var n=mpe(e,t),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function mpe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function S8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function zt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?S8(Object(n),!0).forEach(function(r){ype(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S8(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ype(e,t,n){return t=gpe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gpe(e){var t=vpe(e,"string");return Jl(t)=="symbol"?t:t+""}function vpe(e,t){if(Jl(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Jl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Zl(){return Zl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Zl.apply(this,arguments)}var bpe=function(e){var t=e.value,n=e.formatter,r=rt(e.children)?t:e.children;return We(n)?n(r):r},xpe=function(e,t){var n=yr(t-e),r=Math.min(Math.abs(t-e),360);return n*r},wpe=function(e,t,n){var r=e.position,o=e.viewBox,a=e.offset,i=e.className,s=o,c=s.cx,l=s.cy,u=s.innerRadius,d=s.outerRadius,f=s.startAngle,p=s.endAngle,y=s.clockWise,m=(u+d)/2,v=xpe(f,p),b=v>=0?1:-1,x,j;r==="insideStart"?(x=f+b*a,j=y):r==="insideEnd"?(x=p-b*a,j=!y):r==="end"&&(x=p+b*a,j=y),j=v<=0?j:!j;var w=Gt(c,l,m,x),_=Gt(c,l,m,x+(j?1:-1)*359),E="M".concat(w.x,",").concat(w.y,`
    A`).concat(m,",").concat(m,",0,1,").concat(j?0:1,`,
    `).concat(_.x,",").concat(_.y),S=rt(e.id)?Jf("recharts-radial-line-"):e.id;return V.createElement("text",Zl({},n,{dominantBaseline:"central",className:st("recharts-radial-bar-label",i)}),V.createElement("defs",null,V.createElement("path",{id:S,d:E})),V.createElement("textPath",{xlinkHref:"#".concat(S)},t))},_pe=function(e){var t=e.viewBox,n=e.offset,r=e.position,o=t,a=o.cx,i=o.cy,s=o.innerRadius,c=o.outerRadius,l=o.startAngle,u=o.endAngle,d=(l+u)/2;if(r==="outside"){var f=Gt(a,i,c+n,d),p=f.x,y=f.y;return{x:p,y,textAnchor:p>=a?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:a,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:a,y:i,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:a,y:i,textAnchor:"middle",verticalAnchor:"end"};var m=(s+c)/2,v=Gt(a,i,m,d),b=v.x,x=v.y;return{x:b,y:x,textAnchor:"middle",verticalAnchor:"middle"}},jpe=function(e){var t=e.viewBox,n=e.parentViewBox,r=e.offset,o=e.position,a=t,i=a.x,s=a.y,c=a.width,l=a.height,u=l>=0?1:-1,d=u*r,f=u>0?"end":"start",p=u>0?"start":"end",y=c>=0?1:-1,m=y*r,v=y>0?"end":"start",b=y>0?"start":"end";if(o==="top"){var x={x:i+c/2,y:s-u*r,textAnchor:"middle",verticalAnchor:f};return zt(zt({},x),n?{height:Math.max(s-n.y,0),width:c}:{})}if(o==="bottom"){var j={x:i+c/2,y:s+l+d,textAnchor:"middle",verticalAnchor:p};return zt(zt({},j),n?{height:Math.max(n.y+n.height-(s+l),0),width:c}:{})}if(o==="left"){var w={x:i-m,y:s+l/2,textAnchor:v,verticalAnchor:"middle"};return zt(zt({},w),n?{width:Math.max(w.x-n.x,0),height:l}:{})}if(o==="right"){var _={x:i+c+m,y:s+l/2,textAnchor:b,verticalAnchor:"middle"};return zt(zt({},_),n?{width:Math.max(n.x+n.width-_.x,0),height:l}:{})}var E=n?{width:c,height:l}:{};return o==="insideLeft"?zt({x:i+m,y:s+l/2,textAnchor:b,verticalAnchor:"middle"},E):o==="insideRight"?zt({x:i+c-m,y:s+l/2,textAnchor:v,verticalAnchor:"middle"},E):o==="insideTop"?zt({x:i+c/2,y:s+d,textAnchor:"middle",verticalAnchor:p},E):o==="insideBottom"?zt({x:i+c/2,y:s+l-d,textAnchor:"middle",verticalAnchor:f},E):o==="insideTopLeft"?zt({x:i+m,y:s+d,textAnchor:b,verticalAnchor:p},E):o==="insideTopRight"?zt({x:i+c-m,y:s+d,textAnchor:v,verticalAnchor:p},E):o==="insideBottomLeft"?zt({x:i+m,y:s+l-d,textAnchor:b,verticalAnchor:f},E):o==="insideBottomRight"?zt({x:i+c-m,y:s+l-d,textAnchor:v,verticalAnchor:f},E):ts(o)&&(me(o.x)||Ia(o.x))&&(me(o.y)||Ia(o.y))?zt({x:i+Da(o.x,c),y:s+Da(o.y,l),textAnchor:"end",verticalAnchor:"end"},E):zt({x:i+c/2,y:s+l/2,textAnchor:"middle",verticalAnchor:"middle"},E)},Epe=function(e){return"cx"in e&&me(e.cx)};function tn(e){var t=e.offset,n=t===void 0?5:t,r=hpe(e,cpe),o=zt({offset:n},r),a=o.viewBox,i=o.position,s=o.value,c=o.children,l=o.content,u=o.className,d=u===void 0?"":u,f=o.textBreakAll;if(!a||rt(s)&&rt(c)&&!g.isValidElement(l)&&!We(l))return null;if(g.isValidElement(l))return g.cloneElement(l,o);var p;if(We(l)){if(p=g.createElement(l,o),g.isValidElement(p))return p}else p=bpe(o);var y=Epe(a),m=nt(o,!0);if(y&&(i==="insideStart"||i==="insideEnd"||i==="end"))return wpe(o,p,m);var v=y?_pe(o):jpe(o);return V.createElement(xp,Zl({className:st("recharts-label",d)},m,v,{breakAll:f}),p)}tn.displayName="Label";var C8=function(e){var t=e.cx,n=e.cy,r=e.angle,o=e.startAngle,a=e.endAngle,i=e.r,s=e.radius,c=e.innerRadius,l=e.outerRadius,u=e.x,d=e.y,f=e.top,p=e.left,y=e.width,m=e.height,v=e.clockWise,b=e.labelViewBox;if(b)return b;if(me(y)&&me(m)){if(me(u)&&me(d))return{x:u,y:d,width:y,height:m};if(me(f)&&me(p))return{x:f,y:p,width:y,height:m}}return me(u)&&me(d)?{x:u,y:d,width:0,height:0}:me(t)&&me(n)?{cx:t,cy:n,startAngle:o||r||0,endAngle:a||r||0,innerRadius:c||0,outerRadius:l||s||i||0,clockWise:v}:e.viewBox?e.viewBox:{}},Spe=function(e,t){return e?e===!0?V.createElement(tn,{key:"label-implicit",viewBox:t}):Bt(e)?V.createElement(tn,{key:"label-implicit",viewBox:t,value:e}):g.isValidElement(e)?e.type===tn?g.cloneElement(e,{key:"label-implicit",viewBox:t}):V.createElement(tn,{key:"label-implicit",content:e,viewBox:t}):We(e)?V.createElement(tn,{key:"label-implicit",content:e,viewBox:t}):ts(e)?V.createElement(tn,Zl({viewBox:t},e,{key:"label-implicit"})):null:null},Cpe=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var r=e.children,o=C8(e),a=gr(r,tn).map(function(s,c){return g.cloneElement(s,{viewBox:t||o,key:"label-".concat(c)})});if(!n)return a;var i=Spe(e.label,t||o);return[i].concat(lpe(a))};tn.parseViewBox=C8,tn.renderCallByParent=Cpe;var E_,O8;sE=function(){if(O8)return E_;O8=1;function e(t){var n=t==null?0:t.length;return n?t[n-1]:void 0}return E_=e,E_};var Ope=sE();hE=Xe(Ope);function eu(e){"@babel/helpers - typeof";return eu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},eu(e)}var Mpe=["valueAccessor"],Npe=["data","dataKey","clockWise","id","textBreakAll"];function Ppe(e){return Rpe(e)||Tpe(e)||Ape(e)||kpe()}function kpe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ape(e,t){if(e){if(typeof e=="string")return S_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return S_(e,t)}}function Tpe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Rpe(e){if(Array.isArray(e))return S_(e)}function S_(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Yp(){return Yp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Yp.apply(this,arguments)}function M8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function N8(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?M8(Object(n),!0).forEach(function(r){Ipe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M8(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Ipe(e,t,n){return t=Dpe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Dpe(e){var t=Lpe(e,"string");return eu(t)=="symbol"?t:t+""}function Lpe(e,t){if(eu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(eu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function P8(e,t){if(e==null)return{};var n=Fpe(e,t),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Fpe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var Bpe=function(e){return Array.isArray(e.value)?hE(e.value):e.value};function qa(e){var t=e.valueAccessor,n=t===void 0?Bpe:t,r=P8(e,Mpe),o=r.data,a=r.dataKey,i=r.clockWise,s=r.id,c=r.textBreakAll,l=P8(r,Npe);return!o||!o.length?null:V.createElement(Ut,{className:"recharts-label-list"},o.map(function(u,d){var f=rt(a)?n(u,d):$r(u&&u.payload,a),p=rt(s)?{}:{id:"".concat(s,"-").concat(d)};return V.createElement(tn,Yp({},nt(u,!0),l,p,{parentViewBox:u.parentViewBox,value:f,textBreakAll:c,viewBox:tn.parseViewBox(rt(i)?u:N8(N8({},u),{},{clockWise:i})),key:"label-".concat(d),index:d}))}))}qa.displayName="LabelList";function $pe(e,t){return e?e===!0?V.createElement(qa,{key:"labelList-implicit",data:t}):V.isValidElement(e)||We(e)?V.createElement(qa,{key:"labelList-implicit",data:t,content:e}):ts(e)?V.createElement(qa,Yp({data:t},e,{key:"labelList-implicit"})):null:null}function zpe(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var r=e.children,o=gr(r,qa).map(function(i,s){return g.cloneElement(i,{data:t,key:"labelList-".concat(s)})});if(!n)return o;var a=$pe(e.label,t);return[a].concat(Ppe(o))}qa.renderCallByParent=zpe;function tu(e){"@babel/helpers - typeof";return tu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tu(e)}function C_(){return C_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},C_.apply(this,arguments)}function k8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function A8(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?k8(Object(n),!0).forEach(function(r){Vpe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k8(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Vpe(e,t,n){return t=Upe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Upe(e){var t=Hpe(e,"string");return tu(t)=="symbol"?t:t+""}function Hpe(e,t){if(tu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(tu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Wpe=function(e,t){var n=yr(t-e),r=Math.min(Math.abs(t-e),359.999);return n*r},Kp=function(e){var t=e.cx,n=e.cy,r=e.radius,o=e.angle,a=e.sign,i=e.isExternal,s=e.cornerRadius,c=e.cornerIsExternal,l=s*(i?1:-1)+r,u=Math.asin(s/l)/qp,d=c?o:o+a*u,f=Gt(t,n,l,d),p=Gt(t,n,r,d),y=c?o-a*u:o,m=Gt(t,n,l*Math.cos(u*qp),y);return{center:f,circleTangency:p,lineTangency:m,theta:u}},T8=function(e){var t=e.cx,n=e.cy,r=e.innerRadius,o=e.outerRadius,a=e.startAngle,i=e.endAngle,s=Wpe(a,i),c=a+s,l=Gt(t,n,o,a),u=Gt(t,n,o,c),d="M ".concat(l.x,",").concat(l.y,`
    A `).concat(o,",").concat(o,`,0,
    `).concat(+(Math.abs(s)>180),",").concat(+(a>c),`,
    `).concat(u.x,",").concat(u.y,`
  `);if(r>0){var f=Gt(t,n,r,a),p=Gt(t,n,r,c);d+="L ".concat(p.x,",").concat(p.y,`
            A `).concat(r,",").concat(r,`,0,
            `).concat(+(Math.abs(s)>180),",").concat(+(a<=c),`,
            `).concat(f.x,",").concat(f.y," Z")}else d+="L ".concat(t,",").concat(n," Z");return d},qpe=function(e){var t=e.cx,n=e.cy,r=e.innerRadius,o=e.outerRadius,a=e.cornerRadius,i=e.forceCornerRadius,s=e.cornerIsExternal,c=e.startAngle,l=e.endAngle,u=yr(l-c),d=Kp({cx:t,cy:n,radius:o,angle:c,sign:u,cornerRadius:a,cornerIsExternal:s}),f=d.circleTangency,p=d.lineTangency,y=d.theta,m=Kp({cx:t,cy:n,radius:o,angle:l,sign:-u,cornerRadius:a,cornerIsExternal:s}),v=m.circleTangency,b=m.lineTangency,x=m.theta,j=s?Math.abs(c-l):Math.abs(c-l)-y-x;if(j<0)return i?"M ".concat(p.x,",").concat(p.y,`
        a`).concat(a,",").concat(a,",0,0,1,").concat(a*2,`,0
        a`).concat(a,",").concat(a,",0,0,1,").concat(-a*2,`,0
      `):T8({cx:t,cy:n,innerRadius:r,outerRadius:o,startAngle:c,endAngle:l});var w="M ".concat(p.x,",").concat(p.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(u<0),",").concat(f.x,",").concat(f.y,`
    A`).concat(o,",").concat(o,",0,").concat(+(j>180),",").concat(+(u<0),",").concat(v.x,",").concat(v.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(u<0),",").concat(b.x,",").concat(b.y,`
  `);if(r>0){var _=Kp({cx:t,cy:n,radius:r,angle:c,sign:u,isExternal:!0,cornerRadius:a,cornerIsExternal:s}),E=_.circleTangency,S=_.lineTangency,C=_.theta,M=Kp({cx:t,cy:n,radius:r,angle:l,sign:-u,isExternal:!0,cornerRadius:a,cornerIsExternal:s}),P=M.circleTangency,N=M.lineTangency,R=M.theta,A=s?Math.abs(c-l):Math.abs(c-l)-C-R;if(A<0&&a===0)return"".concat(w,"L").concat(t,",").concat(n,"Z");w+="L".concat(N.x,",").concat(N.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(u<0),",").concat(P.x,",").concat(P.y,`
      A`).concat(r,",").concat(r,",0,").concat(+(A>180),",").concat(+(u>0),",").concat(E.x,",").concat(E.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(u<0),",").concat(S.x,",").concat(S.y,"Z")}else w+="L".concat(t,",").concat(n,"Z");return w},Ype={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},R8=function(e){var t=A8(A8({},Ype),e),n=t.cx,r=t.cy,o=t.innerRadius,a=t.outerRadius,i=t.cornerRadius,s=t.forceCornerRadius,c=t.cornerIsExternal,l=t.startAngle,u=t.endAngle,d=t.className;if(a<o||l===u)return null;var f=st("recharts-sector",d),p=a-o,y=Da(i,p,0,!0),m;return y>0&&Math.abs(l-u)<360?m=qpe({cx:n,cy:r,innerRadius:o,outerRadius:a,cornerRadius:Math.min(y,p/2),forceCornerRadius:s,cornerIsExternal:c,startAngle:l,endAngle:u}):m=T8({cx:n,cy:r,innerRadius:o,outerRadius:a,startAngle:l,endAngle:u}),V.createElement("path",C_({},nt(t,!0),{className:f,d:m,role:"img"}))};function nu(e){"@babel/helpers - typeof";return nu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nu(e)}function O_(){return O_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},O_.apply(this,arguments)}function I8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function D8(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?I8(Object(n),!0).forEach(function(r){Kpe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I8(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Kpe(e,t,n){return t=Xpe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Xpe(e){var t=Gpe(e,"string");return nu(t)=="symbol"?t:t+""}function Gpe(e,t){if(nu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(nu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var L8={curveBasisClosed:Rie,curveBasisOpen:Iie,curveBasis:Tie,curveBumpX:bie,curveBumpY:xie,curveLinearClosed:Die,curveLinear:ap,curveMonotoneX:Lie,curveMonotoneY:Fie,curveNatural:Bie,curveStep:$ie,curveStepAfter:Vie,curveStepBefore:zie},Xp=function(e){return e.x===+e.x&&e.y===+e.y},ru=function(e){return e.x},ou=function(e){return e.y},Qpe=function(e,t){if(We(e))return e;var n="curve".concat(tp(e));return(n==="curveMonotone"||n==="curveBump")&&t?L8["".concat(n).concat(t==="vertical"?"Y":"X")]:L8[n]||ap},Jpe=function(e){var t=e.type,n=t===void 0?"linear":t,r=e.points,o=r===void 0?[]:r,a=e.baseLine,i=e.layout,s=e.connectNulls,c=s===void 0?!1:s,l=Qpe(n,i),u=c?o.filter(function(y){return Xp(y)}):o,d;if(Array.isArray(a)){var f=c?a.filter(function(y){return Xp(y)}):a,p=u.map(function(y,m){return D8(D8({},y),{},{base:f[m]})});return i==="vertical"?d=ip().y(ou).x1(ru).x0(function(y){return y.base.x}):d=ip().x(ru).y1(ou).y0(function(y){return y.base.y}),d.defined(Xp).curve(l),d(p)}return i==="vertical"&&me(a)?d=ip().y(ou).x1(ru).x0(a):me(a)?d=ip().x(ru).y1(ou).y0(a):d=D5().x(ru).y(ou),d.defined(Xp).curve(l),d(u)},F8=function(e){var t=e.className,n=e.points,r=e.path,o=e.pathRef;if((!n||!n.length)&&!r)return null;var a=n&&n.length?Jpe(e):r;return V.createElement("path",O_({},nt(e,!1),Zf(e),{className:st("recharts-curve",t),d:a,ref:o}))},B8={exports:{}},M_,$8;function Zpe(){if($8)return M_;$8=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return M_=e,M_}var N_,z8;function ehe(){if(z8)return N_;z8=1;var e=Zpe();function t(){}function n(){}return n.resetWarningCache=t,N_=function(){function r(i,s,c,l,u,d){if(d!==e){var f=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw f.name="Invariant Violation",f}}r.isRequired=r;function o(){return r}var a={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:o,element:r,elementType:r,instanceOf:o,node:r,objectOf:o,oneOf:o,oneOfType:o,shape:o,exact:o,checkPropTypes:n,resetWarningCache:t};return a.PropTypes=a,a},N_}var V8;function the(){return V8||(V8=1,B8.exports=ehe()()),B8.exports}var nhe=the();const Fe=Xe(nhe);var rhe=Object.getOwnPropertyNames,ohe=Object.getOwnPropertySymbols,ahe=Object.prototype.hasOwnProperty;function U8(e,t){return function(n,r,o){return e(n,r,o)&&t(n,r,o)}}function Gp(e){return function(t,n,r){if(!t||!n||typeof t!="object"||typeof n!="object")return e(t,n,r);var o=r.cache,a=o.get(t),i=o.get(n);if(a&&i)return a===n&&i===t;o.set(t,n),o.set(n,t);var s=e(t,n,r);return o.delete(t),o.delete(n),s}}function H8(e){return rhe(e).concat(ohe(e))}var W8=Object.hasOwn||function(e,t){return ahe.call(e,t)};function xs(e,t){return e||t?e===t:e===t||e!==e&&t!==t}var q8="_owner",Y8=Object.getOwnPropertyDescriptor,K8=Object.keys;function ihe(e,t,n){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(!n.equals(e[r],t[r],r,r,e,t,n))return!1;return!0}function she(e,t){return xs(e.getTime(),t.getTime())}function X8(e,t,n){if(e.size!==t.size)return!1;for(var r={},o=e.entries(),a=0,i,s;(i=o.next())&&!i.done;){for(var c=t.entries(),l=!1,u=0;(s=c.next())&&!s.done;){var d=i.value,f=d[0],p=d[1],y=s.value,m=y[0],v=y[1];!l&&!r[u]&&(l=n.equals(f,m,a,u,e,t,n)&&n.equals(p,v,f,m,e,t,n))&&(r[u]=!0),u++}if(!l)return!1;a++}return!0}function che(e,t,n){var r=K8(e),o=r.length;if(K8(t).length!==o)return!1;for(var a;o-- >0;)if(a=r[o],a===q8&&(e.$$typeof||t.$$typeof)&&e.$$typeof!==t.$$typeof||!W8(t,a)||!n.equals(e[a],t[a],a,a,e,t,n))return!1;return!0}function au(e,t,n){var r=H8(e),o=r.length;if(H8(t).length!==o)return!1;for(var a,i,s;o-- >0;)if(a=r[o],a===q8&&(e.$$typeof||t.$$typeof)&&e.$$typeof!==t.$$typeof||!W8(t,a)||!n.equals(e[a],t[a],a,a,e,t,n)||(i=Y8(e,a),s=Y8(t,a),(i||s)&&(!i||!s||i.configurable!==s.configurable||i.enumerable!==s.enumerable||i.writable!==s.writable)))return!1;return!0}function lhe(e,t){return xs(e.valueOf(),t.valueOf())}function uhe(e,t){return e.source===t.source&&e.flags===t.flags}function G8(e,t,n){if(e.size!==t.size)return!1;for(var r={},o=e.values(),a,i;(a=o.next())&&!a.done;){for(var s=t.values(),c=!1,l=0;(i=s.next())&&!i.done;)!c&&!r[l]&&(c=n.equals(a.value,i.value,a.value,i.value,e,t,n))&&(r[l]=!0),l++;if(!c)return!1}return!0}function dhe(e,t){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(e[n]!==t[n])return!1;return!0}var fhe="[object Arguments]",phe="[object Boolean]",hhe="[object Date]",mhe="[object Map]",yhe="[object Number]",ghe="[object Object]",vhe="[object RegExp]",bhe="[object Set]",xhe="[object String]",whe=Array.isArray,Q8=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,J8=Object.assign,_he=Object.prototype.toString.call.bind(Object.prototype.toString);function jhe(e){var t=e.areArraysEqual,n=e.areDatesEqual,r=e.areMapsEqual,o=e.areObjectsEqual,a=e.arePrimitiveWrappersEqual,i=e.areRegExpsEqual,s=e.areSetsEqual,c=e.areTypedArraysEqual;return function(l,u,d){if(l===u)return!0;if(l==null||u==null||typeof l!="object"||typeof u!="object")return l!==l&&u!==u;var f=l.constructor;if(f!==u.constructor)return!1;if(f===Object)return o(l,u,d);if(whe(l))return t(l,u,d);if(Q8!=null&&Q8(l))return c(l,u,d);if(f===Date)return n(l,u,d);if(f===RegExp)return i(l,u,d);if(f===Map)return r(l,u,d);if(f===Set)return s(l,u,d);var p=_he(l);return p===hhe?n(l,u,d):p===vhe?i(l,u,d):p===mhe?r(l,u,d):p===bhe?s(l,u,d):p===ghe?typeof l.then!="function"&&typeof u.then!="function"&&o(l,u,d):p===fhe?o(l,u,d):p===phe||p===yhe||p===xhe?a(l,u,d):!1}}function Ehe(e){var t=e.circular,n=e.createCustomConfig,r=e.strict,o={areArraysEqual:r?au:ihe,areDatesEqual:she,areMapsEqual:r?U8(X8,au):X8,areObjectsEqual:r?au:che,arePrimitiveWrappersEqual:lhe,areRegExpsEqual:uhe,areSetsEqual:r?U8(G8,au):G8,areTypedArraysEqual:r?au:dhe};if(n&&(o=J8({},o,n(o))),t){var a=Gp(o.areArraysEqual),i=Gp(o.areMapsEqual),s=Gp(o.areObjectsEqual),c=Gp(o.areSetsEqual);o=J8({},o,{areArraysEqual:a,areMapsEqual:i,areObjectsEqual:s,areSetsEqual:c})}return o}function She(e){return function(t,n,r,o,a,i,s){return e(t,n,s)}}function Che(e){var t=e.circular,n=e.comparator,r=e.createState,o=e.equals,a=e.strict;if(r)return function(s,c){var l=r(),u=l.cache,d=u===void 0?t?new WeakMap:void 0:u,f=l.meta;return n(s,c,{cache:d,equals:o,meta:f,strict:a})};if(t)return function(s,c){return n(s,c,{cache:new WeakMap,equals:o,meta:void 0,strict:a})};var i={cache:void 0,equals:o,meta:void 0,strict:a};return function(s,c){return n(s,c,i)}}var Ohe=aa();aa({strict:!0}),aa({circular:!0}),aa({circular:!0,strict:!0}),aa({createInternalComparator:function(){return xs}}),aa({strict:!0,createInternalComparator:function(){return xs}}),aa({circular:!0,createInternalComparator:function(){return xs}}),aa({circular:!0,createInternalComparator:function(){return xs},strict:!0});function aa(e){e===void 0&&(e={});var t=e.circular,n=t===void 0?!1:t,r=e.createInternalComparator,o=e.createState,a=e.strict,i=a===void 0?!1:a,s=Ehe(e),c=jhe(s),l=r?r(c):She(c);return Che({circular:n,comparator:c,createState:o,equals:l,strict:i})}function Mhe(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function Z8(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,r=function o(a){n<0&&(n=a),a-n>t?(e(a),n=-1):Mhe(o)};requestAnimationFrame(r)}function P_(e){"@babel/helpers - typeof";return P_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},P_(e)}function Nhe(e){return The(e)||Ahe(e)||khe(e)||Phe()}function Phe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function khe(e,t){if(e){if(typeof e=="string")return eF(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return eF(e,t)}}function eF(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ahe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function The(e){if(Array.isArray(e))return e}function Rhe(){var e={},t=function(){return null},n=!1,r=function o(a){if(!n){if(Array.isArray(a)){if(!a.length)return;var i=a,s=Nhe(i),c=s[0],l=s.slice(1);if(typeof c=="number"){Z8(o.bind(null,l),c);return}o(c),Z8(o.bind(null,l));return}P_(a)==="object"&&(e=a,t(e)),typeof a=="function"&&a()}};return{stop:function(){n=!0},start:function(o){n=!1,r(o)},subscribe:function(o){return t=o,function(){t=function(){return null}}}}}function iu(e){"@babel/helpers - typeof";return iu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},iu(e)}function tF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function nF(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?tF(Object(n),!0).forEach(function(r){rF(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tF(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function rF(e,t,n){return t=Ihe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ihe(e){var t=Dhe(e,"string");return iu(t)==="symbol"?t:String(t)}function Dhe(e,t){if(iu(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(iu(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Lhe=function(e,t){return[Object.keys(e),Object.keys(t)].reduce(function(n,r){return n.filter(function(o){return r.includes(o)})})},Fhe=function(e){return e},Bhe=function(e){return e.replace(/([A-Z])/g,function(t){return"-".concat(t.toLowerCase())})},su=function(e,t){return Object.keys(t).reduce(function(n,r){return nF(nF({},n),{},rF({},r,e(r,t[r])))},{})},oF=function(e,t,n){return e.map(function(r){return"".concat(Bhe(r)," ").concat(t,"ms ").concat(n)}).join(",")};function $he(e,t){return Uhe(e)||Vhe(e,t)||aF(e,t)||zhe()}function zhe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vhe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,o,a,i,s=[],c=!0,l=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(c=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(u){l=!0,o=u}finally{try{if(!c&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return s}}function Uhe(e){if(Array.isArray(e))return e}function Hhe(e){return Yhe(e)||qhe(e)||aF(e)||Whe()}function Whe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function aF(e,t){if(e){if(typeof e=="string")return k_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return k_(e,t)}}function qhe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Yhe(e){if(Array.isArray(e))return k_(e)}function k_(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Qp=1e-4,iF=function(e,t){return[0,3*e,3*t-6*e,3*e-3*t+1]},sF=function(e,t){return e.map(function(n,r){return n*Math.pow(t,r)}).reduce(function(n,r){return n+r})},cF=function(e,t){return function(n){var r=iF(e,t);return sF(r,n)}},Khe=function(e,t){return function(n){var r=iF(e,t),o=[].concat(Hhe(r.map(function(a,i){return a*i}).slice(1)),[0]);return sF(o,n)}},lF=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],o=t[1],a=t[2],i=t[3];if(t.length===1)switch(t[0]){case"linear":r=0,o=0,a=1,i=1;break;case"ease":r=.25,o=.1,a=.25,i=1;break;case"ease-in":r=.42,o=0,a=1,i=1;break;case"ease-out":r=.42,o=0,a=.58,i=1;break;case"ease-in-out":r=0,o=0,a=.58,i=1;break;default:{var s=t[0].split("(");if(s[0]==="cubic-bezier"&&s[1].split(")")[0].split(",").length===4){var c=s[1].split(")")[0].split(",").map(function(m){return parseFloat(m)}),l=$he(c,4);r=l[0],o=l[1],a=l[2],i=l[3]}}}var u=cF(r,a),d=cF(o,i),f=Khe(r,a),p=function(m){return m>1?1:m<0?0:m},y=function(m){for(var v=m>1?1:m,b=v,x=0;x<8;++x){var j=u(b)-v,w=f(b);if(Math.abs(j-v)<Qp||w<Qp)return d(b);b=p(b-j/w)}return d(b)};return y.isStepper=!1,y},Xhe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.stiff,n=t===void 0?100:t,r=e.damping,o=r===void 0?8:r,a=e.dt,i=a===void 0?17:a,s=function(c,l,u){var d=-(c-l)*n,f=u*o,p=u+(d-f)*i/1e3,y=u*i/1e3+c;return Math.abs(y-l)<Qp&&Math.abs(p)<Qp?[l,0]:[y,p]};return s.isStepper=!0,s.dt=i,s},Ghe=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0];if(typeof r=="string")switch(r){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return lF(r);case"spring":return Xhe();default:if(r.split("(")[0]==="cubic-bezier")return lF(r)}return typeof r=="function"?r:null};function cu(e){"@babel/helpers - typeof";return cu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cu(e)}function uF(e){return Zhe(e)||Jhe(e)||fF(e)||Qhe()}function Qhe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Jhe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Zhe(e){if(Array.isArray(e))return T_(e)}function dF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Qt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?dF(Object(n),!0).forEach(function(r){A_(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dF(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function A_(e,t,n){return t=eme(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function eme(e){var t=tme(e,"string");return cu(t)==="symbol"?t:String(t)}function tme(e,t){if(cu(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(cu(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function nme(e,t){return ame(e)||ome(e,t)||fF(e,t)||rme()}function rme(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fF(e,t){if(e){if(typeof e=="string")return T_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return T_(e,t)}}function T_(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ome(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,o,a,i,s=[],c=!0,l=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(c=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(u){l=!0,o=u}finally{try{if(!c&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return s}}function ame(e){if(Array.isArray(e))return e}var Jp=function(e,t,n){return e+(t-e)*n},R_=function(e){var t=e.from,n=e.to;return t!==n},ime=function e(t,n,r){var o=su(function(a,i){if(R_(i)){var s=t(i.from,i.to,i.velocity),c=nme(s,2),l=c[0],u=c[1];return Qt(Qt({},i),{},{from:l,velocity:u})}return i},n);return r<1?su(function(a,i){return R_(i)?Qt(Qt({},i),{},{velocity:Jp(i.velocity,o[a].velocity,r),from:Jp(i.from,o[a].from,r)}):i},n):e(t,o,r-1)};const sme=function(e,t,n,r,o){var a=Lhe(e,t),i=a.reduce(function(v,b){return Qt(Qt({},v),{},A_({},b,[e[b],t[b]]))},{}),s=a.reduce(function(v,b){return Qt(Qt({},v),{},A_({},b,{from:e[b],velocity:0,to:t[b]}))},{}),c=-1,l,u,d=function(){return null},f=function(){return su(function(v,b){return b.from},s)},p=function(){return!Object.values(s).filter(R_).length},y=function(v){l||(l=v);var b=v-l,x=b/n.dt;s=ime(n,s,x),o(Qt(Qt(Qt({},e),t),f())),l=v,p()||(c=requestAnimationFrame(d))},m=function(v){u||(u=v);var b=(v-u)/r,x=su(function(w,_){return Jp.apply(void 0,uF(_).concat([n(b)]))},i);if(o(Qt(Qt(Qt({},e),t),x)),b<1)c=requestAnimationFrame(d);else{var j=su(function(w,_){return Jp.apply(void 0,uF(_).concat([n(1)]))},i);o(Qt(Qt(Qt({},e),t),j))}};return d=n.isStepper?y:m,function(){return requestAnimationFrame(d),function(){cancelAnimationFrame(c)}}};function ws(e){"@babel/helpers - typeof";return ws=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ws(e)}var cme=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function lme(e,t){if(e==null)return{};var n=ume(e,t),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function ume(e,t){if(e==null)return{};var n={},r=Object.keys(e),o,a;for(a=0;a<r.length;a++)o=r[a],!(t.indexOf(o)>=0)&&(n[o]=e[o]);return n}function I_(e){return hme(e)||pme(e)||fme(e)||dme()}function dme(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fme(e,t){if(e){if(typeof e=="string")return D_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return D_(e,t)}}function pme(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function hme(e){if(Array.isArray(e))return D_(e)}function D_(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function pF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function br(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?pF(Object(n),!0).forEach(function(r){lu(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pF(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function lu(e,t,n){return t=hF(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mme(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yme(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,hF(r.key),r)}}function gme(e,t,n){return t&&yme(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function hF(e){var t=vme(e,"string");return ws(t)==="symbol"?t:String(t)}function vme(e,t){if(ws(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(ws(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function bme(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&L_(e,t)}function L_(e,t){return L_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},L_(e,t)}function xme(e){var t=wme();return function(){var n=Zp(e),r;if(t){var o=Zp(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return F_(this,r)}}function F_(e,t){if(t&&(ws(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return B_(e)}function B_(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wme(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Zp(e){return Zp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Zp(e)}var ia=function(e){bme(n,e);var t=xme(n);function n(r,o){var a;mme(this,n),a=t.call(this,r,o);var i=a.props,s=i.isActive,c=i.attributeName,l=i.from,u=i.to,d=i.steps,f=i.children,p=i.duration;if(a.handleStyleChange=a.handleStyleChange.bind(B_(a)),a.changeStyle=a.changeStyle.bind(B_(a)),!s||p<=0)return a.state={style:{}},typeof f=="function"&&(a.state={style:u}),F_(a);if(d&&d.length)a.state={style:d[0].style};else if(l){if(typeof f=="function")return a.state={style:l},F_(a);a.state={style:c?lu({},c,l):l}}else a.state={style:{}};return a}return gme(n,[{key:"componentDidMount",value:function(){var r=this.props,o=r.isActive,a=r.canBegin;this.mounted=!0,!(!o||!a)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(r){var o=this.props,a=o.isActive,i=o.canBegin,s=o.attributeName,c=o.shouldReAnimate,l=o.to,u=o.from,d=this.state.style;if(i){if(!a){var f={style:s?lu({},s,l):l};this.state&&d&&(s&&d[s]!==l||!s&&d!==l)&&this.setState(f);return}if(!(Ohe(r.to,l)&&r.canBegin&&r.isActive)){var p=!r.canBegin||!r.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var y=p||c?u:r.to;if(this.state&&d){var m={style:s?lu({},s,y):y};(s&&d[s]!==y||!s&&d!==y)&&this.setState(m)}this.runAnimation(br(br({},this.props),{},{from:y,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var r=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),r&&r()}},{key:"handleStyleChange",value:function(r){this.changeStyle(r)}},{key:"changeStyle",value:function(r){this.mounted&&this.setState({style:r})}},{key:"runJSAnimation",value:function(r){var o=this,a=r.from,i=r.to,s=r.duration,c=r.easing,l=r.begin,u=r.onAnimationEnd,d=r.onAnimationStart,f=sme(a,i,Ghe(c),s,this.changeStyle),p=function(){o.stopJSAnimation=f()};this.manager.start([d,l,p,s,u])}},{key:"runStepAnimation",value:function(r){var o=this,a=r.steps,i=r.begin,s=r.onAnimationStart,c=a[0],l=c.style,u=c.duration,d=u===void 0?0:u,f=function(p,y,m){if(m===0)return p;var v=y.duration,b=y.easing,x=b===void 0?"ease":b,j=y.style,w=y.properties,_=y.onAnimationEnd,E=m>0?a[m-1]:y,S=w||Object.keys(j);if(typeof x=="function"||x==="spring")return[].concat(I_(p),[o.runJSAnimation.bind(o,{from:E.style,to:j,duration:v,easing:x}),v]);var C=oF(S,v,x),M=br(br(br({},E.style),j),{},{transition:C});return[].concat(I_(p),[M,v,_]).filter(Fhe)};return this.manager.start([s].concat(I_(a.reduce(f,[l,Math.max(d,i)])),[r.onAnimationEnd]))}},{key:"runAnimation",value:function(r){this.manager||(this.manager=Rhe());var o=r.begin,a=r.duration,i=r.attributeName,s=r.to,c=r.easing,l=r.onAnimationStart,u=r.onAnimationEnd,d=r.steps,f=r.children,p=this.manager;if(this.unSubscribe=p.subscribe(this.handleStyleChange),typeof c=="function"||typeof f=="function"||c==="spring"){this.runJSAnimation(r);return}if(d.length>1){this.runStepAnimation(r);return}var y=i?lu({},i,s):s,m=oF(Object.keys(y),a,c);p.start([l,o,br(br({},y),{},{transition:m}),a,u])}},{key:"render",value:function(){var r=this.props,o=r.children;r.begin;var a=r.duration;r.attributeName,r.easing;var i=r.isActive;r.steps,r.from,r.to,r.canBegin,r.onAnimationEnd,r.shouldReAnimate,r.onAnimationReStart;var s=lme(r,cme),c=g.Children.count(o),l=this.state.style;if(typeof o=="function")return o(l);if(!i||c===0||a<=0)return o;var u=function(d){var f=d.props,p=f.style,y=p===void 0?{}:p,m=f.className,v=g.cloneElement(d,br(br({},s),{},{style:br(br({},y),l),className:m}));return v};return c===1?u(g.Children.only(o)):V.createElement("div",null,g.Children.map(o,function(d){return u(d)}))}}]),n}(g.PureComponent);ia.displayName="Animate",ia.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}},ia.propTypes={from:Fe.oneOfType([Fe.object,Fe.string]),to:Fe.oneOfType([Fe.object,Fe.string]),attributeName:Fe.string,duration:Fe.number,begin:Fe.number,easing:Fe.oneOfType([Fe.string,Fe.func]),steps:Fe.arrayOf(Fe.shape({duration:Fe.number.isRequired,style:Fe.object.isRequired,easing:Fe.oneOfType([Fe.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Fe.func]),properties:Fe.arrayOf("string"),onAnimationEnd:Fe.func})),children:Fe.oneOfType([Fe.node,Fe.func]),isActive:Fe.bool,canBegin:Fe.bool,onAnimationEnd:Fe.func,shouldReAnimate:Fe.bool,onAnimationStart:Fe.func,onAnimationReStart:Fe.func},Fe.object,Fe.object,Fe.object,Fe.element,Fe.object,Fe.object,Fe.object,Fe.oneOfType([Fe.array,Fe.element]),Fe.any;function uu(e){"@babel/helpers - typeof";return uu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},uu(e)}function eh(){return eh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},eh.apply(this,arguments)}function _me(e,t){return Cme(e)||Sme(e,t)||Eme(e,t)||jme()}function jme(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Eme(e,t){if(e){if(typeof e=="string")return mF(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mF(e,t)}}function mF(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Sme(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,o,a,i,s=[],c=!0,l=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(c=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(u){l=!0,o=u}finally{try{if(!c&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return s}}function Cme(e){if(Array.isArray(e))return e}function yF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function gF(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?yF(Object(n),!0).forEach(function(r){Ome(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yF(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Ome(e,t,n){return t=Mme(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Mme(e){var t=Nme(e,"string");return uu(t)=="symbol"?t:t+""}function Nme(e,t){if(uu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(uu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var vF=function(e,t,n,r,o){var a=Math.min(Math.abs(n)/2,Math.abs(r)/2),i=r>=0?1:-1,s=n>=0?1:-1,c=r>=0&&n>=0||r<0&&n<0?1:0,l;if(a>0&&o instanceof Array){for(var u=[0,0,0,0],d=0,f=4;d<f;d++)u[d]=o[d]>a?a:o[d];l="M".concat(e,",").concat(t+i*u[0]),u[0]>0&&(l+="A ".concat(u[0],",").concat(u[0],",0,0,").concat(c,",").concat(e+s*u[0],",").concat(t)),l+="L ".concat(e+n-s*u[1],",").concat(t),u[1]>0&&(l+="A ".concat(u[1],",").concat(u[1],",0,0,").concat(c,`,
        `).concat(e+n,",").concat(t+i*u[1])),l+="L ".concat(e+n,",").concat(t+r-i*u[2]),u[2]>0&&(l+="A ".concat(u[2],",").concat(u[2],",0,0,").concat(c,`,
        `).concat(e+n-s*u[2],",").concat(t+r)),l+="L ".concat(e+s*u[3],",").concat(t+r),u[3]>0&&(l+="A ".concat(u[3],",").concat(u[3],",0,0,").concat(c,`,
        `).concat(e,",").concat(t+r-i*u[3])),l+="Z"}else if(a>0&&o===+o&&o>0){var p=Math.min(a,o);l="M ".concat(e,",").concat(t+i*p,`
            A `).concat(p,",").concat(p,",0,0,").concat(c,",").concat(e+s*p,",").concat(t,`
            L `).concat(e+n-s*p,",").concat(t,`
            A `).concat(p,",").concat(p,",0,0,").concat(c,",").concat(e+n,",").concat(t+i*p,`
            L `).concat(e+n,",").concat(t+r-i*p,`
            A `).concat(p,",").concat(p,",0,0,").concat(c,",").concat(e+n-s*p,",").concat(t+r,`
            L `).concat(e+s*p,",").concat(t+r,`
            A `).concat(p,",").concat(p,",0,0,").concat(c,",").concat(e,",").concat(t+r-i*p," Z")}else l="M ".concat(e,",").concat(t," h ").concat(n," v ").concat(r," h ").concat(-n," Z");return l},Pme=function(e,t){if(!e||!t)return!1;var n=e.x,r=e.y,o=t.x,a=t.y,i=t.width,s=t.height;if(Math.abs(i)>0&&Math.abs(s)>0){var c=Math.min(o,o+i),l=Math.max(o,o+i),u=Math.min(a,a+s),d=Math.max(a,a+s);return n>=c&&n<=l&&r>=u&&r<=d}return!1},kme={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},$_=function(e){var t=gF(gF({},kme),e),n=g.useRef(),r=g.useState(-1),o=_me(r,2),a=o[0],i=o[1];g.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var j=n.current.getTotalLength();j&&i(j)}catch{}},[]);var s=t.x,c=t.y,l=t.width,u=t.height,d=t.radius,f=t.className,p=t.animationEasing,y=t.animationDuration,m=t.animationBegin,v=t.isAnimationActive,b=t.isUpdateAnimationActive;if(s!==+s||c!==+c||l!==+l||u!==+u||l===0||u===0)return null;var x=st("recharts-rectangle",f);return b?V.createElement(ia,{canBegin:a>0,from:{width:l,height:u,x:s,y:c},to:{width:l,height:u,x:s,y:c},duration:y,animationEasing:p,isActive:b},function(j){var w=j.width,_=j.height,E=j.x,S=j.y;return V.createElement(ia,{canBegin:a>0,from:"0px ".concat(a===-1?1:a,"px"),to:"".concat(a,"px 0px"),attributeName:"strokeDasharray",begin:m,duration:y,isActive:v,easing:p},V.createElement("path",eh({},nt(t,!0),{className:x,d:vF(E,S,w,_,d),ref:n})))}):V.createElement("path",eh({},nt(t,!0),{className:x,d:vF(s,c,l,u,d)}))};function z_(){return z_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},z_.apply(this,arguments)}var bF=function(e){var t=e.cx,n=e.cy,r=e.r,o=e.className,a=st("recharts-dot",o);return t===+t&&n===+n&&r===+r?V.createElement("circle",z_({},nt(e,!1),Zf(e),{className:a,cx:t,cy:n,r})):null};function du(e){"@babel/helpers - typeof";return du=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},du(e)}var Ame=["x","y","top","left","width","height","className"];function V_(){return V_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},V_.apply(this,arguments)}function xF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Tme(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?xF(Object(n),!0).forEach(function(r){Rme(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xF(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Rme(e,t,n){return t=Ime(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ime(e){var t=Dme(e,"string");return du(t)=="symbol"?t:t+""}function Dme(e,t){if(du(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(du(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Lme(e,t){if(e==null)return{};var n=Fme(e,t),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Fme(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var Bme=function(e,t,n,r,o,a){return"M".concat(e,",").concat(o,"v").concat(r,"M").concat(a,",").concat(t,"h").concat(n)},$me=function(e){var t=e.x,n=t===void 0?0:t,r=e.y,o=r===void 0?0:r,a=e.top,i=a===void 0?0:a,s=e.left,c=s===void 0?0:s,l=e.width,u=l===void 0?0:l,d=e.height,f=d===void 0?0:d,p=e.className,y=Lme(e,Ame),m=Tme({x:n,y:o,top:i,left:c,width:u,height:f},y);return!me(n)||!me(o)||!me(u)||!me(f)||!me(i)||!me(c)?null:V.createElement("path",V_({},nt(m,!0),{className:st("recharts-cross",p),d:Bme(n,o,u,f,i,c)}))},U_,wF;cE=function(){if(wF)return U_;wF=1;var e=co(),t=Nm(),n=jr(),r="[object Object]",o=Function.prototype,a=Object.prototype,i=o.toString,s=a.hasOwnProperty,c=i.call(Object);function l(u){if(!n(u)||e(u)!=r)return!1;var d=t(u);if(d===null)return!0;var f=s.call(d,"constructor")&&d.constructor;return typeof f=="function"&&f instanceof f&&i.call(f)==c}return U_=l,U_};var zme=cE();const Vme=Xe(zme);var H_,_F;function Ume(){if(_F)return H_;_F=1;var e=co(),t=jr(),n="[object Boolean]";function r(o){return o===!0||o===!1||t(o)&&e(o)==n}return H_=r,H_}var Hme=Ume();const Wme=Xe(Hme);function fu(e){"@babel/helpers - typeof";return fu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fu(e)}function th(){return th=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},th.apply(this,arguments)}function qme(e,t){return Gme(e)||Xme(e,t)||Kme(e,t)||Yme()}function Yme(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Kme(e,t){if(e){if(typeof e=="string")return jF(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jF(e,t)}}function jF(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Xme(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,o,a,i,s=[],c=!0,l=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(c=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(u){l=!0,o=u}finally{try{if(!c&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return s}}function Gme(e){if(Array.isArray(e))return e}function EF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function SF(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?EF(Object(n),!0).forEach(function(r){Qme(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):EF(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Qme(e,t,n){return t=Jme(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Jme(e){var t=Zme(e,"string");return fu(t)=="symbol"?t:t+""}function Zme(e,t){if(fu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(fu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var CF=function(e,t,n,r,o){var a=n-r,i;return i="M ".concat(e,",").concat(t),i+="L ".concat(e+n,",").concat(t),i+="L ".concat(e+n-a/2,",").concat(t+o),i+="L ".concat(e+n-a/2-r,",").concat(t+o),i+="L ".concat(e,",").concat(t," Z"),i},eye={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},tye=function(e){var t=SF(SF({},eye),e),n=g.useRef(),r=g.useState(-1),o=qme(r,2),a=o[0],i=o[1];g.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var x=n.current.getTotalLength();x&&i(x)}catch{}},[]);var s=t.x,c=t.y,l=t.upperWidth,u=t.lowerWidth,d=t.height,f=t.className,p=t.animationEasing,y=t.animationDuration,m=t.animationBegin,v=t.isUpdateAnimationActive;if(s!==+s||c!==+c||l!==+l||u!==+u||d!==+d||l===0&&u===0||d===0)return null;var b=st("recharts-trapezoid",f);return v?V.createElement(ia,{canBegin:a>0,from:{upperWidth:0,lowerWidth:0,height:d,x:s,y:c},to:{upperWidth:l,lowerWidth:u,height:d,x:s,y:c},duration:y,animationEasing:p,isActive:v},function(x){var j=x.upperWidth,w=x.lowerWidth,_=x.height,E=x.x,S=x.y;return V.createElement(ia,{canBegin:a>0,from:"0px ".concat(a===-1?1:a,"px"),to:"".concat(a,"px 0px"),attributeName:"strokeDasharray",begin:m,duration:y,easing:p},V.createElement("path",th({},nt(t,!0),{className:b,d:CF(E,S,j,w,_),ref:n})))}):V.createElement("g",null,V.createElement("path",th({},nt(t,!0),{className:b,d:CF(s,c,l,u,d)})))},nye=["option","shapeType","propTransformer","activeClassName","isActive"];function pu(e){"@babel/helpers - typeof";return pu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pu(e)}function rye(e,t){if(e==null)return{};var n=oye(e,t),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function oye(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function OF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function nh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?OF(Object(n),!0).forEach(function(r){aye(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):OF(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function aye(e,t,n){return t=iye(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function iye(e){var t=sye(e,"string");return pu(t)=="symbol"?t:t+""}function sye(e,t){if(pu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(pu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function cye(e,t){return nh(nh({},t),e)}function lye(e,t){return e==="symbols"}function MF(e){var t=e.shapeType,n=e.elementProps;switch(t){case"rectangle":return V.createElement($_,n);case"trapezoid":return V.createElement(tye,n);case"sector":return V.createElement(R8,n);case"symbols":if(lye(t))return V.createElement(Ow,n);break;default:return null}}function uye(e){return g.isValidElement(e)?e.props:e}function dye(e){var t=e.option,n=e.shapeType,r=e.propTransformer,o=r===void 0?cye:r,a=e.activeClassName,i=a===void 0?"recharts-active-shape":a,s=e.isActive,c=rye(e,nye),l;if(g.isValidElement(t))l=g.cloneElement(t,nh(nh({},c),uye(t)));else if(We(t))l=t(c);else if(Vme(t)&&!Wme(t)){var u=o(t,c);l=V.createElement(MF,{shapeType:n,elementProps:u})}else{var d=c;l=V.createElement(MF,{shapeType:n,elementProps:d})}return s?V.createElement(Ut,{className:i},l):l}function rh(e,t){return t!=null&&"trapezoids"in e.props}function oh(e,t){return t!=null&&"sectors"in e.props}function hu(e,t){return t!=null&&"points"in e.props}function fye(e,t){var n,r,o=e.x===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.x)||e.x===t.x,a=e.y===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.y)||e.y===t.y;return o&&a}function pye(e,t){var n=e.endAngle===t.endAngle,r=e.startAngle===t.startAngle;return n&&r}function hye(e,t){var n=e.x===t.x,r=e.y===t.y,o=e.z===t.z;return n&&r&&o}function mye(e,t){var n;return rh(e,t)?n=fye:oh(e,t)?n=pye:hu(e,t)&&(n=hye),n}function yye(e,t){var n;return rh(e,t)?n="trapezoids":oh(e,t)?n="sectors":hu(e,t)&&(n="points"),n}function gye(e,t){if(rh(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(oh(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return hu(e,t)?t.payload:{}}function vye(e){var t=e.activeTooltipItem,n=e.graphicalItem,r=e.itemData,o=yye(n,t),a=gye(n,t),i=r.filter(function(c,l){var u=l_(a,c),d=n.props[o].filter(function(y){var m=mye(n,t);return m(y,t)}),f=n.props[o].indexOf(d[d.length-1]),p=l===f;return u&&p}),s=r.indexOf(i[i.length-1]);return s}var W_,NF;function bye(){if(NF)return W_;NF=1;var e=Math.ceil,t=Math.max;function n(r,o,a,i){for(var s=-1,c=t(e((o-r)/(a||1)),0),l=Array(c);c--;)l[i?c:++s]=r,r+=a;return l}return W_=n,W_}var q_,PF;function kF(){if(PF)return q_;PF=1;var e=iL(),t=1/0,n=17976931348623157e292;function r(o){if(!o)return o===0?o:0;if(o=e(o),o===t||o===-t){var a=o<0?-1:1;return a*n}return o===o?o:0}return q_=r,q_}var Y_,AF;function xye(){if(AF)return Y_;AF=1;var e=bye(),t=ei(),n=kF();function r(o){return function(a,i,s){return s&&typeof s!="number"&&t(a,i,s)&&(i=s=void 0),a=n(a),i===void 0?(i=a,a=0):i=n(i),s=s===void 0?a<i?1:-1:n(s),e(a,i,s,o)}}return Y_=r,Y_}var K_,TF;function wye(){if(TF)return K_;TF=1;var e=xye(),t=e();return K_=t,K_}var _ye=wye();const ah=Xe(_ye);function mu(e){"@babel/helpers - typeof";return mu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mu(e)}function RF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function IF(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?RF(Object(n),!0).forEach(function(r){DF(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):RF(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function DF(e,t,n){return t=jye(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jye(e){var t=Eye(e,"string");return mu(t)=="symbol"?t:t+""}function Eye(e,t){if(mu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(mu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Sye=["Webkit","Moz","O","ms"],Cye=function(e,t){var n=e.replace(/(\w)/,function(o){return o.toUpperCase()}),r=Sye.reduce(function(o,a){return IF(IF({},o),{},DF({},a+n,t))},{});return r[e]=t,r};function _s(e){"@babel/helpers - typeof";return _s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_s(e)}function ih(){return ih=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ih.apply(this,arguments)}function LF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function X_(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?LF(Object(n),!0).forEach(function(r){Ln(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):LF(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Oye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function FF(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,$F(r.key),r)}}function Mye(e,t,n){return t&&FF(e.prototype,t),n&&FF(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Nye(e,t,n){return t=sh(t),Pye(e,BF()?Reflect.construct(t,n||[],sh(e).constructor):t.apply(e,n))}function Pye(e,t){if(t&&(_s(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kye(e)}function kye(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function BF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(BF=function(){return!!e})()}function sh(e){return sh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},sh(e)}function Aye(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&G_(e,t)}function G_(e,t){return G_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},G_(e,t)}function Ln(e,t,n){return t=$F(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $F(e){var t=Tye(e,"string");return _s(t)=="symbol"?t:t+""}function Tye(e,t){if(_s(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(_s(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Rye=function(e){var t=e.data,n=e.startIndex,r=e.endIndex,o=e.x,a=e.width,i=e.travellerWidth;if(!t||!t.length)return{};var s=t.length,c=$l().domain(ah(0,s)).range([o,o+a-i]),l=c.domain().map(function(u){return c(u)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:c(n),endX:c(r),scale:c,scaleValues:l}},zF=function(e){return e.changedTouches&&!!e.changedTouches.length},js=function(e){function t(n){var r;return Oye(this,t),r=Nye(this,t,[n]),Ln(r,"handleDrag",function(o){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(o):r.state.isSlideMoving&&r.handleSlideDrag(o)}),Ln(r,"handleTouchMove",function(o){o.changedTouches!=null&&o.changedTouches.length>0&&r.handleDrag(o.changedTouches[0])}),Ln(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var o=r.props,a=o.endIndex,i=o.onDragEnd,s=o.startIndex;i==null||i({endIndex:a,startIndex:s})}),r.detachDragEndListener()}),Ln(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),Ln(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),Ln(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),Ln(r,"handleSlideDragStart",function(o){var a=zF(o)?o.changedTouches[0]:o;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:a.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return Aye(t,e),Mye(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var r=n.startX,o=n.endX,a=this.state.scaleValues,i=this.props,s=i.gap,c=i.data,l=c.length-1,u=Math.min(r,o),d=Math.max(r,o),f=t.getIndexInRange(a,u),p=t.getIndexInRange(a,d);return{startIndex:f-f%s,endIndex:p===l?l:p-p%s}}},{key:"getTextOfTick",value:function(n){var r=this.props,o=r.data,a=r.tickFormatter,i=r.dataKey,s=$r(o[n],i,n);return We(a)?a(s,n):s}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var r=this.state,o=r.slideMoveStartX,a=r.startX,i=r.endX,s=this.props,c=s.x,l=s.width,u=s.travellerWidth,d=s.startIndex,f=s.endIndex,p=s.onChange,y=n.pageX-o;y>0?y=Math.min(y,c+l-u-i,c+l-u-a):y<0&&(y=Math.max(y,c-a,c-i));var m=this.getIndex({startX:a+y,endX:i+y});(m.startIndex!==d||m.endIndex!==f)&&p&&p(m),this.setState({startX:a+y,endX:i+y,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,r){var o=zF(r)?r.changedTouches[0]:r;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:o.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var r=this.state,o=r.brushMoveStartX,a=r.movingTravellerId,i=r.endX,s=r.startX,c=this.state[a],l=this.props,u=l.x,d=l.width,f=l.travellerWidth,p=l.onChange,y=l.gap,m=l.data,v={startX:this.state.startX,endX:this.state.endX},b=n.pageX-o;b>0?b=Math.min(b,u+d-f-c):b<0&&(b=Math.max(b,u-c)),v[a]=c+b;var x=this.getIndex(v),j=x.startIndex,w=x.endIndex,_=function(){var E=m.length-1;return a==="startX"&&(i>s?j%y===0:w%y===0)||i<s&&w===E||a==="endX"&&(i>s?w%y===0:j%y===0)||i>s&&w===E};this.setState(Ln(Ln({},a,c+b),"brushMoveStartX",n.pageX),function(){p&&_()&&p(x)})}},{key:"handleTravellerMoveKeyboard",value:function(n,r){var o=this,a=this.state,i=a.scaleValues,s=a.startX,c=a.endX,l=this.state[r],u=i.indexOf(l);if(u!==-1){var d=u+n;if(!(d===-1||d>=i.length)){var f=i[d];r==="startX"&&f>=c||r==="endX"&&f<=s||this.setState(Ln({},r,f),function(){o.props.onChange(o.getIndex({startX:o.state.startX,endX:o.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,r=n.x,o=n.y,a=n.width,i=n.height,s=n.fill,c=n.stroke;return V.createElement("rect",{stroke:c,fill:s,x:r,y:o,width:a,height:i})}},{key:"renderPanorama",value:function(){var n=this.props,r=n.x,o=n.y,a=n.width,i=n.height,s=n.data,c=n.children,l=n.padding,u=g.Children.only(c);return u?V.cloneElement(u,{x:r,y:o,width:a,height:i,margin:l,compact:!0,data:s}):null}},{key:"renderTravellerLayer",value:function(n,r){var o,a,i=this,s=this.props,c=s.y,l=s.travellerWidth,u=s.height,d=s.traveller,f=s.ariaLabel,p=s.data,y=s.startIndex,m=s.endIndex,v=Math.max(n,this.props.x),b=X_(X_({},nt(this.props,!1)),{},{x:v,y:c,width:l,height:u}),x=f||"Min value: ".concat((o=p[y])===null||o===void 0?void 0:o.name,", Max value: ").concat((a=p[m])===null||a===void 0?void 0:a.name);return V.createElement(Ut,{tabIndex:0,role:"slider","aria-label":x,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[r],onTouchStart:this.travellerDragStartHandlers[r],onKeyDown:function(j){["ArrowLeft","ArrowRight"].includes(j.key)&&(j.preventDefault(),j.stopPropagation(),i.handleTravellerMoveKeyboard(j.key==="ArrowRight"?1:-1,r))},onFocus:function(){i.setState({isTravellerFocused:!0})},onBlur:function(){i.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(d,b))}},{key:"renderSlide",value:function(n,r){var o=this.props,a=o.y,i=o.height,s=o.stroke,c=o.travellerWidth,l=Math.min(n,r)+c,u=Math.max(Math.abs(r-n)-c,0);return V.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:s,fillOpacity:.2,x:l,y:a,width:u,height:i})}},{key:"renderText",value:function(){var n=this.props,r=n.startIndex,o=n.endIndex,a=n.y,i=n.height,s=n.travellerWidth,c=n.stroke,l=this.state,u=l.startX,d=l.endX,f=5,p={pointerEvents:"none",fill:c};return V.createElement(Ut,{className:"recharts-brush-texts"},V.createElement(xp,ih({textAnchor:"end",verticalAnchor:"middle",x:Math.min(u,d)-f,y:a+i/2},p),this.getTextOfTick(r)),V.createElement(xp,ih({textAnchor:"start",verticalAnchor:"middle",x:Math.max(u,d)+s+f,y:a+i/2},p),this.getTextOfTick(o)))}},{key:"render",value:function(){var n=this.props,r=n.data,o=n.className,a=n.children,i=n.x,s=n.y,c=n.width,l=n.height,u=n.alwaysShowText,d=this.state,f=d.startX,p=d.endX,y=d.isTextActive,m=d.isSlideMoving,v=d.isTravellerMoving,b=d.isTravellerFocused;if(!r||!r.length||!me(i)||!me(s)||!me(c)||!me(l)||c<=0||l<=0)return null;var x=st("recharts-brush",o),j=V.Children.count(a)===1,w=Cye("userSelect","none");return V.createElement(Ut,{className:x,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:w},this.renderBackground(),j&&this.renderPanorama(),this.renderSlide(f,p),this.renderTravellerLayer(f,"startX"),this.renderTravellerLayer(p,"endX"),(y||m||v||b||u)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var r=n.x,o=n.y,a=n.width,i=n.height,s=n.stroke,c=Math.floor(o+i/2)-1;return V.createElement(V.Fragment,null,V.createElement("rect",{x:r,y:o,width:a,height:i,fill:s,stroke:"none"}),V.createElement("line",{x1:r+1,y1:c,x2:r+a-1,y2:c,fill:"none",stroke:"#fff"}),V.createElement("line",{x1:r+1,y1:c+2,x2:r+a-1,y2:c+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,r){var o;return V.isValidElement(n)?o=V.cloneElement(n,r):We(n)?o=n(r):o=t.renderDefaultTraveller(r),o}},{key:"getDerivedStateFromProps",value:function(n,r){var o=n.data,a=n.width,i=n.x,s=n.travellerWidth,c=n.updateId,l=n.startIndex,u=n.endIndex;if(o!==r.prevData||c!==r.prevUpdateId)return X_({prevData:o,prevTravellerWidth:s,prevUpdateId:c,prevX:i,prevWidth:a},o&&o.length?Rye({data:o,width:a,x:i,travellerWidth:s,startIndex:l,endIndex:u}):{scale:null,scaleValues:null});if(r.scale&&(a!==r.prevWidth||i!==r.prevX||s!==r.prevTravellerWidth)){r.scale.range([i,i+a-s]);var d=r.scale.domain().map(function(f){return r.scale(f)});return{prevData:o,prevTravellerWidth:s,prevUpdateId:c,prevX:i,prevWidth:a,startX:r.scale(n.startIndex),endX:r.scale(n.endIndex),scaleValues:d}}return null}},{key:"getIndexInRange",value:function(n,r){for(var o=n.length,a=0,i=o-1;i-a>1;){var s=Math.floor((a+i)/2);n[s]>r?i=s:a=s}return r>=n[i]?i:a}}])}(g.PureComponent);Ln(js,"displayName","Brush"),Ln(js,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var Q_,VF;function Iye(){if(VF)return Q_;VF=1;var e=Xw();function t(n,r){var o;return e(n,function(a,i,s){return o=r(a,i,s),!o}),!!o}return Q_=t,Q_}var J_,UF;function Dye(){if(UF)return J_;UF=1;var e=fP(),t=Mr(),n=Iye(),r=an(),o=ei();function a(i,s,c){var l=r(i)?e:n;return c&&o(i,s,c)&&(s=void 0),l(i,t(s,3))}return J_=a,J_}var Lye=Dye();const Fye=Xe(Lye);var zr=function(e,t){var n=e.alwaysShow,r=e.ifOverflow;return n&&(r="extendDomain"),r===t},Z_,HF;function Bye(){if(HF)return Z_;HF=1;var e=Bh(),t=C4(),n=Mr();function r(o,a){var i={};return a=n(a,3),t(o,function(s,c,l){e(i,c,a(s,c,l))}),i}return Z_=r,Z_}var $ye=Bye();const zye=Xe($ye);var ej,WF;function Vye(){if(WF)return ej;WF=1;function e(t,n){for(var r=-1,o=t==null?0:t.length;++r<o;)if(!n(t[r],r,t))return!1;return!0}return ej=e,ej}var tj,qF;function Uye(){if(qF)return tj;qF=1;var e=Xw();function t(n,r){var o=!0;return e(n,function(a,i,s){return o=!!r(a,i,s),o}),o}return tj=t,tj}var nj,YF;function Hye(){if(YF)return nj;YF=1;var e=Vye(),t=Uye(),n=Mr(),r=an(),o=ei();function a(i,s,c){var l=r(i)?e:t;return c&&o(i,s,c)&&(s=void 0),l(i,n(s,3))}return nj=a,nj}var Wye=Hye();const KF=Xe(Wye);var qye=["x","y"];function yu(e){"@babel/helpers - typeof";return yu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yu(e)}function rj(){return rj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rj.apply(this,arguments)}function XF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function gu(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?XF(Object(n),!0).forEach(function(r){Yye(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):XF(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Yye(e,t,n){return t=Kye(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Kye(e){var t=Xye(e,"string");return yu(t)=="symbol"?t:t+""}function Xye(e,t){if(yu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(yu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Gye(e,t){if(e==null)return{};var n=Qye(e,t),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Qye(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Jye(e,t){var n=e.x,r=e.y,o=Gye(e,qye),a="".concat(n),i=parseInt(a,10),s="".concat(r),c=parseInt(s,10),l="".concat(t.height||o.height),u=parseInt(l,10),d="".concat(t.width||o.width),f=parseInt(d,10);return gu(gu(gu(gu(gu({},t),o),i?{x:i}:{}),c?{y:c}:{}),{},{height:u,width:f,name:t.name,radius:t.radius})}function GF(e){return V.createElement(dye,rj({shapeType:"rectangle",propTransformer:Jye,activeClassName:"recharts-active-bar"},e))}var Zye=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,r){if(typeof e=="number")return e;var o=typeof n=="number";return o?e(n,r):(o||Ha(),t)}},ege=["value","background"],QF;function Es(e){"@babel/helpers - typeof";return Es=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Es(e)}function tge(e,t){if(e==null)return{};var n=nge(e,t),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function nge(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function ch(){return ch=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ch.apply(this,arguments)}function JF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function Dt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?JF(Object(n),!0).forEach(function(r){sa(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):JF(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function rge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ZF(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,tB(r.key),r)}}function oge(e,t,n){return t&&ZF(e.prototype,t),n&&ZF(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function age(e,t,n){return t=lh(t),ige(e,eB()?Reflect.construct(t,n||[],lh(e).constructor):t.apply(e,n))}function ige(e,t){if(t&&(Es(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return sge(e)}function sge(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function eB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(eB=function(){return!!e})()}function lh(e){return lh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},lh(e)}function cge(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&oj(e,t)}function oj(e,t){return oj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},oj(e,t)}function sa(e,t,n){return t=tB(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tB(e){var t=lge(e,"string");return Es(t)=="symbol"?t:t+""}function lge(e,t){if(Es(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Es(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ya=function(e){function t(){var n;rge(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return n=age(this,t,[].concat(o)),sa(n,"state",{isAnimationFinished:!1}),sa(n,"id",Jf("recharts-bar-")),sa(n,"handleAnimationEnd",function(){var i=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),i&&i()}),sa(n,"handleAnimationStart",function(){var i=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),i&&i()}),n}return cge(t,e),oge(t,[{key:"renderRectanglesStatically",value:function(n){var r=this,o=this.props,a=o.shape,i=o.dataKey,s=o.activeIndex,c=o.activeBar,l=nt(this.props,!1);return n&&n.map(function(u,d){var f=d===s,p=f?c:a,y=Dt(Dt(Dt({},l),u),{},{isActive:f,option:p,index:d,dataKey:i,onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd});return V.createElement(Ut,ch({className:"recharts-bar-rectangle"},ep(r.props,u,d),{key:"rectangle-".concat(u==null?void 0:u.x,"-").concat(u==null?void 0:u.y,"-").concat(u==null?void 0:u.value)}),V.createElement(GF,y))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,r=this.props,o=r.data,a=r.layout,i=r.isAnimationActive,s=r.animationBegin,c=r.animationDuration,l=r.animationEasing,u=r.animationId,d=this.state.prevData;return V.createElement(ia,{begin:s,duration:c,isActive:i,easing:l,from:{t:0},to:{t:1},key:"bar-".concat(u),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(f){var p=f.t,y=o.map(function(m,v){var b=d&&d[v];if(b){var x=ns(b.x,m.x),j=ns(b.y,m.y),w=ns(b.width,m.width),_=ns(b.height,m.height);return Dt(Dt({},m),{},{x:x(p),y:j(p),width:w(p),height:_(p)})}if(a==="horizontal"){var E=ns(0,m.height),S=E(p);return Dt(Dt({},m),{},{y:m.y+m.height-S,height:S})}var C=ns(0,m.width),M=C(p);return Dt(Dt({},m),{},{width:M})});return V.createElement(Ut,null,n.renderRectanglesStatically(y))})}},{key:"renderRectangles",value:function(){var n=this.props,r=n.data,o=n.isAnimationActive,a=this.state.prevData;return o&&r&&r.length&&(!a||!l_(a,r))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(r)}},{key:"renderBackground",value:function(){var n=this,r=this.props,o=r.data,a=r.dataKey,i=r.activeIndex,s=nt(this.props.background,!1);return o.map(function(c,l){c.value;var u=c.background,d=tge(c,ege);if(!u)return null;var f=Dt(Dt(Dt(Dt(Dt({},d),{},{fill:"#eee"},u),s),ep(n.props,c,l)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:a,index:l,className:"recharts-bar-background-rectangle"});return V.createElement(GF,ch({key:"background-bar-".concat(l),option:n.props.background,isActive:l===i},f))})}},{key:"renderErrorBar",value:function(n,r){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var o=this.props,a=o.data,i=o.xAxis,s=o.yAxis,c=o.layout,l=o.children,u=gr(l,Vp);if(!u)return null;var d=c==="vertical"?a[0].height/2:a[0].width/2,f=function(y,m){var v=Array.isArray(y.value)?y.value[1]:y.value;return{x:y.x,y:y.y,value:v,errorVal:$r(y,m)}},p={clipPath:n?"url(#clipPath-".concat(r,")"):null};return V.createElement(Ut,p,u.map(function(y){return V.cloneElement(y,{key:"error-bar-".concat(r,"-").concat(y.props.dataKey),data:a,xAxis:i,yAxis:s,layout:c,offset:d,dataPointFormatter:f})}))}},{key:"render",value:function(){var n=this.props,r=n.hide,o=n.data,a=n.className,i=n.xAxis,s=n.yAxis,c=n.left,l=n.top,u=n.width,d=n.height,f=n.isAnimationActive,p=n.background,y=n.id;if(r||!o||!o.length)return null;var m=this.state.isAnimationFinished,v=st("recharts-bar",a),b=i&&i.allowDataOverflow,x=s&&s.allowDataOverflow,j=b||x,w=rt(y)?this.id:y;return V.createElement(Ut,{className:v},b||x?V.createElement("defs",null,V.createElement("clipPath",{id:"clipPath-".concat(w)},V.createElement("rect",{x:b?c:c-u/2,y:x?l:l-d/2,width:b?u:u*2,height:x?d:d*2}))):null,V.createElement(Ut,{className:"recharts-bar-rectangles",clipPath:j?"url(#clipPath-".concat(w,")"):null},p?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(j,w),(!f||m)&&qa.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(n,r){return n.animationId!==r.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:r.curData}:n.data!==r.curData?{curData:n.data}:null}}])}(g.PureComponent);QF=Ya,sa(Ya,"displayName","Bar"),sa(Ya,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!ea.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"}),sa(Ya,"getComposedData",function(e){var t=e.props,n=e.item,r=e.barPosition,o=e.bandSize,a=e.xAxis,i=e.yAxis,s=e.xAxisTicks,c=e.yAxisTicks,l=e.stackedData,u=e.dataStartIndex,d=e.displayedData,f=e.offset,p=Ufe(r,n);if(!p)return null;var y=t.layout,m=n.type.defaultProps,v=m!==void 0?Dt(Dt({},m),n.props):n.props,b=v.dataKey,x=v.children,j=v.minPointSize,w=y==="horizontal"?i:a,_=l?w.scale.domain():null,E=Qfe({numericAxis:w}),S=gr(x,dL),C=d.map(function(M,P){var N,R,A,O,k,T;l?N=Hfe(l[u+P],_):(N=$r(M,b),Array.isArray(N)||(N=[E,N]));var I=Zye(j,QF.defaultProps.minPointSize)(N[1],P);if(y==="horizontal"){var L,D=[i.scale(N[0]),i.scale(N[1])],z=D[0],H=D[1];R=y8({axis:a,ticks:s,bandSize:o,offset:p.offset,entry:M,index:P}),A=(L=H??z)!==null&&L!==void 0?L:void 0,O=p.size;var F=z-H;if(k=Number.isNaN(F)?0:F,T={x:R,y:i.y,width:O,height:i.height},Math.abs(I)>0&&Math.abs(k)<Math.abs(I)){var U=yr(k||I)*(Math.abs(I)-Math.abs(k));A-=U,k+=U}}else{var Y=[a.scale(N[0]),a.scale(N[1])],G=Y[0],re=Y[1];if(R=G,A=y8({axis:i,ticks:c,bandSize:o,offset:p.offset,entry:M,index:P}),O=re-G,k=p.size,T={x:a.x,y:A,width:a.width,height:k},Math.abs(I)>0&&Math.abs(O)<Math.abs(I)){var Z=yr(O||I)*(Math.abs(I)-Math.abs(O));O+=Z}}return Dt(Dt(Dt({},M),{},{x:R,y:A,width:O,height:k,value:l?N:N[1],payload:M,background:T},S&&S[P]&&S[P].props),{},{tooltipPayload:[w8(n,M)],tooltipPosition:{x:R+O/2,y:A+k/2}})});return Dt({data:C,layout:y},f)});function vu(e){"@babel/helpers - typeof";return vu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vu(e)}function uge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nB(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,oB(r.key),r)}}function dge(e,t,n){return t&&nB(e.prototype,t),n&&nB(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function rB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function xr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?rB(Object(n),!0).forEach(function(r){uh(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function uh(e,t,n){return t=oB(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oB(e){var t=fge(e,"string");return vu(t)=="symbol"?t:t+""}function fge(e,t){if(vu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(vu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var pge=function(e,t,n,r,o){var a=e.width,i=e.height,s=e.layout,c=e.children,l=Object.keys(t),u={left:n.left,leftMirror:n.left,right:a-n.right,rightMirror:a-n.right,top:n.top,topMirror:n.top,bottom:i-n.bottom,bottomMirror:i-n.bottom},d=!!In(c,Ya);return l.reduce(function(f,p){var y=t[p],m=y.orientation,v=y.domain,b=y.padding,x=b===void 0?{}:b,j=y.mirror,w=y.reversed,_="".concat(m).concat(j?"Mirror":""),E,S,C,M,P;if(y.type==="number"&&(y.padding==="gap"||y.padding==="no-gap")){var N=v[1]-v[0],R=1/0,A=y.categoricalDomain.sort();if(A.forEach(function(U,Y){Y>0&&(R=Math.min((U||0)-(A[Y-1]||0),R))}),Number.isFinite(R)){var O=R/N,k=y.layout==="vertical"?n.height:n.width;if(y.padding==="gap"&&(E=O*k/2),y.padding==="no-gap"){var T=Da(e.barCategoryGap,O*k),I=O*k/2;E=I-T-(I-T)/k*T}}}r==="xAxis"?S=[n.left+(x.left||0)+(E||0),n.left+n.width-(x.right||0)-(E||0)]:r==="yAxis"?S=s==="horizontal"?[n.top+n.height-(x.bottom||0),n.top+(x.top||0)]:[n.top+(x.top||0)+(E||0),n.top+n.height-(x.bottom||0)-(E||0)]:S=y.range,w&&(S=[S[1],S[0]]);var L=zfe(y,o,d),D=L.scale,z=L.realScaleType;D.domain(v).range(S),Vfe(D);var H=Gfe(D,xr(xr({},y),{},{realScaleType:z}));r==="xAxis"?(P=m==="top"&&!j||m==="bottom"&&j,C=n.left,M=u[_]-P*y.height):r==="yAxis"&&(P=m==="left"&&!j||m==="right"&&j,C=u[_]-P*y.width,M=n.top);var F=xr(xr(xr({},y),H),{},{realScaleType:z,x:C,y:M,scale:D,width:r==="xAxis"?n.width:y.width,height:r==="yAxis"?n.height:y.height});return F.bandSize=Wp(F,H),!y.hide&&r==="xAxis"?u[_]+=(P?-1:1)*F.height:y.hide||(u[_]+=(P?-1:1)*F.width),xr(xr({},f),{},uh({},p,F))},{})},aB=function(e,t){var n=e.x,r=e.y,o=t.x,a=t.y;return{x:Math.min(n,o),y:Math.min(r,a),width:Math.abs(o-n),height:Math.abs(a-r)}},hge=function(e){var t=e.x1,n=e.y1,r=e.x2,o=e.y2;return aB({x:t,y:n},{x:r,y:o})},iB=function(){function e(t){uge(this,e),this.scale=t}return dge(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.bandAware,o=n.position;if(t!==void 0){if(o)switch(o){case"start":return this.scale(t);case"middle":{var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+a}case"end":{var i=this.bandwidth?this.bandwidth():0;return this.scale(t)+i}default:return this.scale(t)}if(r){var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+s}return this.scale(t)}}},{key:"isInRange",value:function(t){var n=this.range(),r=n[0],o=n[n.length-1];return r<=o?t>=r&&t<=o:t>=o&&t<=r}}],[{key:"create",value:function(t){return new e(t)}}])}();uh(iB,"EPS",1e-4);var aj=function(e){var t=Object.keys(e).reduce(function(n,r){return xr(xr({},n),{},uh({},r,iB.create(e[r])))},{});return xr(xr({},t),{},{apply:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=r.bandAware,a=r.position;return zye(n,function(i,s){return t[s].apply(i,{bandAware:o,position:a})})},isInRange:function(n){return KF(n,function(r,o){return t[o].isInRange(r)})}})};function mge(e){return(e%180+180)%180}var yge=function(e){var t=e.width,n=e.height,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=mge(r),a=o*Math.PI/180,i=Math.atan(n/t),s=a>i&&a<Math.PI-i?n/Math.sin(a):t/Math.cos(a);return Math.abs(s)},ij,sB;function gge(){if(sB)return ij;sB=1;var e=Mr(),t=ua(),n=Js();function r(o){return function(a,i,s){var c=Object(a);if(!t(a)){var l=e(i,3);a=n(a),i=function(d){return l(c[d],d,c)}}var u=o(a,i,s);return u>-1?c[l?a[u]:u]:void 0}}return ij=r,ij}var sj,cB;function lB(){if(cB)return sj;cB=1;var e=kF();function t(n){var r=e(n),o=r%1;return r===r?o?r-o:r:0}return sj=t,sj}var cj,uB;function vge(){if(uB)return cj;uB=1;var e=o4(),t=Mr(),n=lB(),r=Math.max;function o(a,i,s){var c=a==null?0:a.length;if(!c)return-1;var l=s==null?0:n(s);return l<0&&(l=r(c+l,0)),e(a,t(i,3),l)}return cj=o,cj}var lj,dB;function bge(){if(dB)return lj;dB=1;var e=gge(),t=vge(),n=e(t);return lj=n,lj}var xge=bge();const wge=Xe(xge);var _ge=yk(),jge=Xe(_ge)(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),uj=g.createContext(void 0),dj=g.createContext(void 0),fB=g.createContext(void 0),pB=g.createContext({}),hB=g.createContext(void 0),mB=g.createContext(0),yB=g.createContext(0),gB=function(e){var t=e.state,n=t.xAxisMap,r=t.yAxisMap,o=t.offset,a=e.clipPathId,i=e.children,s=e.width,c=e.height,l=jge(o);return V.createElement(uj.Provider,{value:n},V.createElement(dj.Provider,{value:r},V.createElement(pB.Provider,{value:o},V.createElement(fB.Provider,{value:l},V.createElement(hB.Provider,{value:a},V.createElement(mB.Provider,{value:c},V.createElement(yB.Provider,{value:s},i)))))))},Ege=function(){return g.useContext(hB)},vB=function(e){var t=g.useContext(uj);t==null&&Ha();var n=t[e];return n==null&&Ha(),n},Sge=function(){var e=g.useContext(uj);return Zo(e)},Cge=function(){var e=g.useContext(dj),t=wge(e,function(n){return KF(n.domain,Number.isFinite)});return t||Zo(e)},bB=function(e){var t=g.useContext(dj);t==null&&Ha();var n=t[e];return n==null&&Ha(),n},Oge=function(){var e=g.useContext(fB);return e},Mge=function(){return g.useContext(pB)},fj=function(){return g.useContext(yB)},pj=function(){return g.useContext(mB)};function Ss(e){"@babel/helpers - typeof";return Ss=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ss(e)}function Nge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Pge(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,jB(r.key),r)}}function kge(e,t,n){return t&&Pge(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Age(e,t,n){return t=dh(t),Tge(e,xB()?Reflect.construct(t,n||[],dh(e).constructor):t.apply(e,n))}function Tge(e,t){if(t&&(Ss(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Rge(e)}function Rge(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(xB=function(){return!!e})()}function dh(e){return dh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},dh(e)}function Ige(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hj(e,t)}function hj(e,t){return hj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},hj(e,t)}function wB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function _B(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?wB(Object(n),!0).forEach(function(r){mj(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function mj(e,t,n){return t=jB(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jB(e){var t=Dge(e,"string");return Ss(t)=="symbol"?t:t+""}function Dge(e,t){if(Ss(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Ss(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Lge(e,t){return zge(e)||$ge(e,t)||Bge(e,t)||Fge()}function Fge(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bge(e,t){if(e){if(typeof e=="string")return EB(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return EB(e,t)}}function EB(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function $ge(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,o,a,i,s=[],c=!0,l=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(c=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(u){l=!0,o=u}finally{try{if(!c&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return s}}function zge(e){if(Array.isArray(e))return e}function yj(){return yj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yj.apply(this,arguments)}var Vge=function(e,t){var n;return V.isValidElement(e)?n=V.cloneElement(e,t):We(e)?n=e(t):n=V.createElement("line",yj({},t,{className:"recharts-reference-line-line"})),n},Uge=function(e,t,n,r,o,a,i,s,c){var l=o.x,u=o.y,d=o.width,f=o.height;if(n){var p=c.y,y=e.y.apply(p,{position:a});if(zr(c,"discard")&&!e.y.isInRange(y))return null;var m=[{x:l+d,y},{x:l,y}];return s==="left"?m.reverse():m}if(t){var v=c.x,b=e.x.apply(v,{position:a});if(zr(c,"discard")&&!e.x.isInRange(b))return null;var x=[{x:b,y:u+f},{x:b,y:u}];return i==="top"?x.reverse():x}if(r){var j=c.segment,w=j.map(function(_){return e.apply(_,{position:a})});return zr(c,"discard")&&Fye(w,function(_){return!e.isInRange(_)})?null:w}return null};function Hge(e){var t=e.x,n=e.y,r=e.segment,o=e.xAxisId,a=e.yAxisId,i=e.shape,s=e.className,c=e.alwaysShow,l=Ege(),u=vB(o),d=bB(a),f=Oge();if(!l||!f)return null;jo(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var p=aj({x:u.scale,y:d.scale}),y=Bt(t),m=Bt(n),v=r&&r.length===2,b=Uge(p,y,m,v,f,e.position,u.orientation,d.orientation,e);if(!b)return null;var x=Lge(b,2),j=x[0],w=j.x,_=j.y,E=x[1],S=E.x,C=E.y,M=zr(e,"hidden")?"url(#".concat(l,")"):void 0,P=_B(_B({clipPath:M},nt(e,!0)),{},{x1:w,y1:_,x2:S,y2:C});return V.createElement(Ut,{className:st("recharts-reference-line",s)},Vge(i,P),tn.renderCallByParent(e,hge({x1:w,y1:_,x2:S,y2:C})))}var gj=function(e){function t(){return Nge(this,t),Age(this,t,arguments)}return Ige(t,e),kge(t,[{key:"render",value:function(){return V.createElement(Hge,this.props)}}])}(V.Component);mj(gj,"displayName","ReferenceLine"),mj(gj,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function vj(){return vj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vj.apply(this,arguments)}function Cs(e){"@babel/helpers - typeof";return Cs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cs(e)}function SB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function CB(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?SB(Object(n),!0).forEach(function(r){ph(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Wge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qge(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,MB(r.key),r)}}function Yge(e,t,n){return t&&qge(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Kge(e,t,n){return t=fh(t),Xge(e,OB()?Reflect.construct(t,n||[],fh(e).constructor):t.apply(e,n))}function Xge(e,t){if(t&&(Cs(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Gge(e)}function Gge(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function OB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(OB=function(){return!!e})()}function fh(e){return fh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},fh(e)}function Qge(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&bj(e,t)}function bj(e,t){return bj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},bj(e,t)}function ph(e,t,n){return t=MB(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function MB(e){var t=Jge(e,"string");return Cs(t)=="symbol"?t:t+""}function Jge(e,t){if(Cs(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Cs(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Zge=function(e){var t=e.x,n=e.y,r=e.xAxis,o=e.yAxis,a=aj({x:r.scale,y:o.scale}),i=a.apply({x:t,y:n},{bandAware:!0});return zr(e,"discard")&&!a.isInRange(i)?null:i},hh=function(e){function t(){return Wge(this,t),Kge(this,t,arguments)}return Qge(t,e),Yge(t,[{key:"render",value:function(){var n=this.props,r=n.x,o=n.y,a=n.r,i=n.alwaysShow,s=n.clipPathId,c=Bt(r),l=Bt(o);if(jo(i===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!c||!l)return null;var u=Zge(this.props);if(!u)return null;var d=u.x,f=u.y,p=this.props,y=p.shape,m=p.className,v=zr(this.props,"hidden")?"url(#".concat(s,")"):void 0,b=CB(CB({clipPath:v},nt(this.props,!0)),{},{cx:d,cy:f});return V.createElement(Ut,{className:st("recharts-reference-dot",m)},t.renderDot(y,b),tn.renderCallByParent(this.props,{x:d-a,y:f-a,width:2*a,height:2*a}))}}])}(V.Component);ph(hh,"displayName","ReferenceDot"),ph(hh,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1}),ph(hh,"renderDot",function(e,t){var n;return V.isValidElement(e)?n=V.cloneElement(e,t):We(e)?n=e(t):n=V.createElement(bF,vj({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),n});function xj(){return xj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xj.apply(this,arguments)}function Os(e){"@babel/helpers - typeof";return Os=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Os(e)}function NB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function PB(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?NB(Object(n),!0).forEach(function(r){yh(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):NB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function eve(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tve(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,AB(r.key),r)}}function nve(e,t,n){return t&&tve(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function rve(e,t,n){return t=mh(t),ove(e,kB()?Reflect.construct(t,n||[],mh(e).constructor):t.apply(e,n))}function ove(e,t){if(t&&(Os(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ave(e)}function ave(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function kB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(kB=function(){return!!e})()}function mh(e){return mh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},mh(e)}function ive(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&wj(e,t)}function wj(e,t){return wj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},wj(e,t)}function yh(e,t,n){return t=AB(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function AB(e){var t=sve(e,"string");return Os(t)=="symbol"?t:t+""}function sve(e,t){if(Os(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Os(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var cve=function(e,t,n,r,o){var a=o.x1,i=o.x2,s=o.y1,c=o.y2,l=o.xAxis,u=o.yAxis;if(!l||!u)return null;var d=aj({x:l.scale,y:u.scale}),f={x:e?d.x.apply(a,{position:"start"}):d.x.rangeMin,y:n?d.y.apply(s,{position:"start"}):d.y.rangeMin},p={x:t?d.x.apply(i,{position:"end"}):d.x.rangeMax,y:r?d.y.apply(c,{position:"end"}):d.y.rangeMax};return zr(o,"discard")&&(!d.isInRange(f)||!d.isInRange(p))?null:aB(f,p)},gh=function(e){function t(){return eve(this,t),rve(this,t,arguments)}return ive(t,e),nve(t,[{key:"render",value:function(){var n=this.props,r=n.x1,o=n.x2,a=n.y1,i=n.y2,s=n.className,c=n.alwaysShow,l=n.clipPathId;jo(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var u=Bt(r),d=Bt(o),f=Bt(a),p=Bt(i),y=this.props.shape;if(!u&&!d&&!f&&!p&&!y)return null;var m=cve(u,d,f,p,this.props);if(!m&&!y)return null;var v=zr(this.props,"hidden")?"url(#".concat(l,")"):void 0;return V.createElement(Ut,{className:st("recharts-reference-area",s)},t.renderRect(y,PB(PB({clipPath:v},nt(this.props,!0)),m)),tn.renderCallByParent(this.props,m))}}])}(V.Component);yh(gh,"displayName","ReferenceArea"),yh(gh,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1}),yh(gh,"renderRect",function(e,t){var n;return V.isValidElement(e)?n=V.cloneElement(e,t):We(e)?n=e(t):n=V.createElement($_,xj({},t,{className:"recharts-reference-area-rect"})),n});function TB(e,t,n){if(t<1)return[];if(t===1&&n===void 0)return e;for(var r=[],o=0;o<e.length;o+=t)r.push(e[o]);return r}function lve(e,t,n){var r={width:e.width+t.width,height:e.height+t.height};return yge(r,n)}function uve(e,t,n){var r=n==="width",o=e.x,a=e.y,i=e.width,s=e.height;return t===1?{start:r?o:a,end:r?o+i:a+s}:{start:r?o+i:a+s,end:r?o:a}}function vh(e,t,n,r,o){if(e*t<e*r||e*t>e*o)return!1;var a=n();return e*(t-e*a/2-r)>=0&&e*(t+e*a/2-o)<=0}function dve(e,t){return TB(e,t+1)}function fve(e,t,n,r,o){for(var a=(r||[]).slice(),i=t.start,s=t.end,c=0,l=1,u=i,d=function(){var p=r==null?void 0:r[c];if(p===void 0)return{v:TB(r,l)};var y=c,m,v=function(){return m===void 0&&(m=n(p,y)),m},b=p.coordinate,x=c===0||vh(e,b,v,u,s);x||(c=0,u=i,l+=1),x&&(u=b+e*(v()/2+o),c+=l)},f;l<=a.length;)if(f=d(),f)return f.v;return[]}function bu(e){"@babel/helpers - typeof";return bu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bu(e)}function RB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function nn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?RB(Object(n),!0).forEach(function(r){pve(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):RB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function pve(e,t,n){return t=hve(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hve(e){var t=mve(e,"string");return bu(t)=="symbol"?t:t+""}function mve(e,t){if(bu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(bu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function yve(e,t,n,r,o){for(var a=(r||[]).slice(),i=a.length,s=t.start,c=t.end,l=function(d){var f=a[d],p,y=function(){return p===void 0&&(p=n(f,d)),p};if(d===i-1){var m=e*(f.coordinate+e*y()/2-c);a[d]=f=nn(nn({},f),{},{tickCoord:m>0?f.coordinate-m*e:f.coordinate})}else a[d]=f=nn(nn({},f),{},{tickCoord:f.coordinate});var v=vh(e,f.tickCoord,y,s,c);v&&(c=f.tickCoord-e*(y()/2+o),a[d]=nn(nn({},f),{},{isShow:!0}))},u=i-1;u>=0;u--)l(u);return a}function gve(e,t,n,r,o,a){var i=(r||[]).slice(),s=i.length,c=t.start,l=t.end;if(a){var u=r[s-1],d=n(u,s-1),f=e*(u.coordinate+e*d/2-l);i[s-1]=u=nn(nn({},u),{},{tickCoord:f>0?u.coordinate-f*e:u.coordinate});var p=vh(e,u.tickCoord,function(){return d},c,l);p&&(l=u.tickCoord-e*(d/2+o),i[s-1]=nn(nn({},u),{},{isShow:!0}))}for(var y=a?s-1:s,m=function(b){var x=i[b],j,w=function(){return j===void 0&&(j=n(x,b)),j};if(b===0){var _=e*(x.coordinate-e*w()/2-c);i[b]=x=nn(nn({},x),{},{tickCoord:_<0?x.coordinate-_*e:x.coordinate})}else i[b]=x=nn(nn({},x),{},{tickCoord:x.coordinate});var E=vh(e,x.tickCoord,w,c,l);E&&(c=x.tickCoord+e*(w()/2+o),i[b]=nn(nn({},x),{},{isShow:!0}))},v=0;v<y;v++)m(v);return i}function _j(e,t,n){var r=e.tick,o=e.ticks,a=e.viewBox,i=e.minTickGap,s=e.orientation,c=e.interval,l=e.tickFormatter,u=e.unit,d=e.angle;if(!o||!o.length||!r)return[];if(me(c)||ea.isSsr)return dve(o,typeof c=="number"&&me(c)?c:0);var f=[],p=s==="top"||s==="bottom"?"width":"height",y=u&&p==="width"?Il(u,{fontSize:t,letterSpacing:n}):{width:0,height:0},m=function(x,j){var w=We(l)?l(x.value,j):x.value;return p==="width"?lve(Il(w,{fontSize:t,letterSpacing:n}),y,d):Il(w,{fontSize:t,letterSpacing:n})[p]},v=o.length>=2?yr(o[1].coordinate-o[0].coordinate):1,b=uve(a,v,p);return c==="equidistantPreserveStart"?fve(v,b,m,o,i):(c==="preserveStart"||c==="preserveStartEnd"?f=gve(v,b,m,o,i,c==="preserveStartEnd"):f=yve(v,b,m,o,i),f.filter(function(x){return x.isShow}))}var vve=["viewBox"],bve=["viewBox"],xve=["ticks"];function Ms(e){"@babel/helpers - typeof";return Ms=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ms(e)}function Ns(){return Ns=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ns.apply(this,arguments)}function IB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function mn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?IB(Object(n),!0).forEach(function(r){Sj(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):IB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function jj(e,t){if(e==null)return{};var n=wve(e,t),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function wve(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function _ve(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function DB(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,FB(r.key),r)}}function jve(e,t,n){return t&&DB(e.prototype,t),n&&DB(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Eve(e,t,n){return t=bh(t),Sve(e,LB()?Reflect.construct(t,n||[],bh(e).constructor):t.apply(e,n))}function Sve(e,t){if(t&&(Ms(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Cve(e)}function Cve(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function LB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(LB=function(){return!!e})()}function bh(e){return bh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},bh(e)}function Ove(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ej(e,t)}function Ej(e,t){return Ej=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Ej(e,t)}function Sj(e,t,n){return t=FB(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function FB(e){var t=Mve(e,"string");return Ms(t)=="symbol"?t:t+""}function Mve(e,t){if(Ms(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Ms(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ps=function(e){function t(n){var r;return _ve(this,t),r=Eve(this,t,[n]),r.state={fontSize:"",letterSpacing:""},r}return Ove(t,e),jve(t,[{key:"shouldComponentUpdate",value:function(n,r){var o=n.viewBox,a=jj(n,vve),i=this.props,s=i.viewBox,c=jj(i,bve);return!rs(o,s)||!rs(a,c)||!rs(r,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var r=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];r&&this.setState({fontSize:window.getComputedStyle(r).fontSize,letterSpacing:window.getComputedStyle(r).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var r=this.props,o=r.x,a=r.y,i=r.width,s=r.height,c=r.orientation,l=r.tickSize,u=r.mirror,d=r.tickMargin,f,p,y,m,v,b,x=u?-1:1,j=n.tickSize||l,w=me(n.tickCoord)?n.tickCoord:n.coordinate;switch(c){case"top":f=p=n.coordinate,m=a+ +!u*s,y=m-x*j,b=y-x*d,v=w;break;case"left":y=m=n.coordinate,p=o+ +!u*i,f=p-x*j,v=f-x*d,b=w;break;case"right":y=m=n.coordinate,p=o+ +u*i,f=p+x*j,v=f+x*d,b=w;break;default:f=p=n.coordinate,m=a+ +u*s,y=m+x*j,b=y+x*d,v=w;break}return{line:{x1:f,y1:y,x2:p,y2:m},tick:{x:v,y:b}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,r=n.orientation,o=n.mirror,a;switch(r){case"left":a=o?"start":"end";break;case"right":a=o?"end":"start";break;default:a="middle";break}return a}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,r=n.orientation,o=n.mirror,a="end";switch(r){case"left":case"right":a="middle";break;case"top":a=o?"start":"end";break;default:a=o?"end":"start";break}return a}},{key:"renderAxisLine",value:function(){var n=this.props,r=n.x,o=n.y,a=n.width,i=n.height,s=n.orientation,c=n.mirror,l=n.axisLine,u=mn(mn(mn({},nt(this.props,!1)),nt(l,!1)),{},{fill:"none"});if(s==="top"||s==="bottom"){var d=+(s==="top"&&!c||s==="bottom"&&c);u=mn(mn({},u),{},{x1:r,y1:o+d*i,x2:r+a,y2:o+d*i})}else{var f=+(s==="left"&&!c||s==="right"&&c);u=mn(mn({},u),{},{x1:r+f*a,y1:o,x2:r+f*a,y2:o+i})}return V.createElement("line",Ns({},u,{className:st("recharts-cartesian-axis-line",Hn(l,"className"))}))}},{key:"renderTicks",value:function(n,r,o){var a=this,i=this.props,s=i.tickLine,c=i.stroke,l=i.tick,u=i.tickFormatter,d=i.unit,f=_j(mn(mn({},this.props),{},{ticks:n}),r,o),p=this.getTickTextAnchor(),y=this.getTickVerticalAnchor(),m=nt(this.props,!1),v=nt(l,!1),b=mn(mn({},m),{},{fill:"none"},nt(s,!1)),x=f.map(function(j,w){var _=a.getTickLineCoord(j),E=_.line,S=_.tick,C=mn(mn(mn(mn({textAnchor:p,verticalAnchor:y},m),{},{stroke:"none",fill:c},v),S),{},{index:w,payload:j,visibleTicksCount:f.length,tickFormatter:u});return V.createElement(Ut,Ns({className:"recharts-cartesian-axis-tick",key:"tick-".concat(j.value,"-").concat(j.coordinate,"-").concat(j.tickCoord)},ep(a.props,j,w)),s&&V.createElement("line",Ns({},b,E,{className:st("recharts-cartesian-axis-tick-line",Hn(s,"className"))})),l&&t.renderTickItem(l,C,"".concat(We(u)?u(j.value,w):j.value).concat(d||"")))});return V.createElement("g",{className:"recharts-cartesian-axis-ticks"},x)}},{key:"render",value:function(){var n=this,r=this.props,o=r.axisLine,a=r.width,i=r.height,s=r.ticksGenerator,c=r.className,l=r.hide;if(l)return null;var u=this.props,d=u.ticks,f=jj(u,xve),p=d;return We(s)&&(p=d&&d.length>0?s(this.props):s(f)),a<=0||i<=0||!p||!p.length?null:V.createElement(Ut,{className:st("recharts-cartesian-axis",c),ref:function(y){n.layerReference=y}},o&&this.renderAxisLine(),this.renderTicks(p,this.state.fontSize,this.state.letterSpacing),tn.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(n,r,o){var a;return V.isValidElement(n)?a=V.cloneElement(n,r):We(n)?a=n(r):a=V.createElement(xp,Ns({},r,{className:"recharts-cartesian-axis-tick-value"}),o),a}}])}(g.Component);Sj(Ps,"displayName","CartesianAxis"),Sj(Ps,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var Nve=["x1","y1","x2","y2","key"],Pve=["offset"];function Ka(e){"@babel/helpers - typeof";return Ka=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ka(e)}function BB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function rn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?BB(Object(n),!0).forEach(function(r){kve(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):BB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function kve(e,t,n){return t=Ave(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ave(e){var t=Tve(e,"string");return Ka(t)=="symbol"?t:t+""}function Tve(e,t){if(Ka(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Ka(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Xa(){return Xa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Xa.apply(this,arguments)}function $B(e,t){if(e==null)return{};var n=Rve(e,t),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Rve(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var Ive=function(e){var t=e.fill;if(!t||t==="none")return null;var n=e.fillOpacity,r=e.x,o=e.y,a=e.width,i=e.height,s=e.ry;return V.createElement("rect",{x:r,y:o,ry:s,width:a,height:i,stroke:"none",fill:t,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function zB(e,t){var n;if(V.isValidElement(e))n=V.cloneElement(e,t);else if(We(e))n=e(t);else{var r=t.x1,o=t.y1,a=t.x2,i=t.y2,s=t.key,c=$B(t,Nve),l=nt(c,!1);l.offset;var u=$B(l,Pve);n=V.createElement("line",Xa({},u,{x1:r,y1:o,x2:a,y2:i,fill:"none",key:s}))}return n}function Dve(e){var t=e.x,n=e.width,r=e.horizontal,o=r===void 0?!0:r,a=e.horizontalPoints;if(!o||!a||!a.length)return null;var i=a.map(function(s,c){var l=rn(rn({},e),{},{x1:t,y1:s,x2:t+n,y2:s,key:"line-".concat(c),index:c});return zB(o,l)});return V.createElement("g",{className:"recharts-cartesian-grid-horizontal"},i)}function Lve(e){var t=e.y,n=e.height,r=e.vertical,o=r===void 0?!0:r,a=e.verticalPoints;if(!o||!a||!a.length)return null;var i=a.map(function(s,c){var l=rn(rn({},e),{},{x1:s,y1:t,x2:s,y2:t+n,key:"line-".concat(c),index:c});return zB(o,l)});return V.createElement("g",{className:"recharts-cartesian-grid-vertical"},i)}function Fve(e){var t=e.horizontalFill,n=e.fillOpacity,r=e.x,o=e.y,a=e.width,i=e.height,s=e.horizontalPoints,c=e.horizontal,l=c===void 0?!0:c;if(!l||!t||!t.length)return null;var u=s.map(function(f){return Math.round(f+o-o)}).sort(function(f,p){return f-p});o!==u[0]&&u.unshift(0);var d=u.map(function(f,p){var y=!u[p+1],m=y?o+i-f:u[p+1]-f;if(m<=0)return null;var v=p%t.length;return V.createElement("rect",{key:"react-".concat(p),y:f,x:r,height:m,width:a,stroke:"none",fill:t[v],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return V.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function Bve(e){var t=e.vertical,n=t===void 0?!0:t,r=e.verticalFill,o=e.fillOpacity,a=e.x,i=e.y,s=e.width,c=e.height,l=e.verticalPoints;if(!n||!r||!r.length)return null;var u=l.map(function(f){return Math.round(f+a-a)}).sort(function(f,p){return f-p});a!==u[0]&&u.unshift(0);var d=u.map(function(f,p){var y=!u[p+1],m=y?a+s-f:u[p+1]-f;if(m<=0)return null;var v=p%r.length;return V.createElement("rect",{key:"react-".concat(p),x:f,y:i,width:m,height:c,stroke:"none",fill:r[v],fillOpacity:o,className:"recharts-cartesian-grid-bg"})});return V.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var $ve=function(e,t){var n=e.xAxis,r=e.width,o=e.height,a=e.offset;return h8(_j(rn(rn(rn({},Ps.defaultProps),n),{},{ticks:Ao(n,!0),viewBox:{x:0,y:0,width:r,height:o}})),a.left,a.left+a.width,t)},zve=function(e,t){var n=e.yAxis,r=e.width,o=e.height,a=e.offset;return h8(_j(rn(rn(rn({},Ps.defaultProps),n),{},{ticks:Ao(n,!0),viewBox:{x:0,y:0,width:r,height:o}})),a.top,a.top+a.height,t)},ks={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function VB(e){var t,n,r,o,a,i,s=fj(),c=pj(),l=Mge(),u=rn(rn({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:ks.stroke,fill:(n=e.fill)!==null&&n!==void 0?n:ks.fill,horizontal:(r=e.horizontal)!==null&&r!==void 0?r:ks.horizontal,horizontalFill:(o=e.horizontalFill)!==null&&o!==void 0?o:ks.horizontalFill,vertical:(a=e.vertical)!==null&&a!==void 0?a:ks.vertical,verticalFill:(i=e.verticalFill)!==null&&i!==void 0?i:ks.verticalFill,x:me(e.x)?e.x:l.left,y:me(e.y)?e.y:l.top,width:me(e.width)?e.width:l.width,height:me(e.height)?e.height:l.height}),d=u.x,f=u.y,p=u.width,y=u.height,m=u.syncWithTicks,v=u.horizontalValues,b=u.verticalValues,x=Sge(),j=Cge();if(!me(p)||p<=0||!me(y)||y<=0||!me(d)||d!==+d||!me(f)||f!==+f)return null;var w=u.verticalCoordinatesGenerator||$ve,_=u.horizontalCoordinatesGenerator||zve,E=u.horizontalPoints,S=u.verticalPoints;if((!E||!E.length)&&We(_)){var C=v&&v.length,M=_({yAxis:j?rn(rn({},j),{},{ticks:C?v:j.ticks}):void 0,width:s,height:c,offset:l},C?!0:m);jo(Array.isArray(M),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Ka(M),"]")),Array.isArray(M)&&(E=M)}if((!S||!S.length)&&We(w)){var P=b&&b.length,N=w({xAxis:x?rn(rn({},x),{},{ticks:P?b:x.ticks}):void 0,width:s,height:c,offset:l},P?!0:m);jo(Array.isArray(N),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Ka(N),"]")),Array.isArray(N)&&(S=N)}return V.createElement("g",{className:"recharts-cartesian-grid"},V.createElement(Ive,{fill:u.fill,fillOpacity:u.fillOpacity,x:u.x,y:u.y,width:u.width,height:u.height,ry:u.ry}),V.createElement(Dve,Xa({},u,{offset:l,horizontalPoints:E,xAxis:x,yAxis:j})),V.createElement(Lve,Xa({},u,{offset:l,verticalPoints:S,xAxis:x,yAxis:j})),V.createElement(Fve,Xa({},u,{horizontalPoints:E})),V.createElement(Bve,Xa({},u,{verticalPoints:S})))}VB.displayName="CartesianGrid";function As(e){"@babel/helpers - typeof";return As=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},As(e)}function Vve(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Uve(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,WB(r.key),r)}}function Hve(e,t,n){return t&&Uve(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Wve(e,t,n){return t=xh(t),qve(e,UB()?Reflect.construct(t,n||[],xh(e).constructor):t.apply(e,n))}function qve(e,t){if(t&&(As(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Yve(e)}function Yve(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function UB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(UB=function(){return!!e})()}function xh(e){return xh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},xh(e)}function Kve(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Cj(e,t)}function Cj(e,t){return Cj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Cj(e,t)}function HB(e,t,n){return t=WB(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function WB(e){var t=Xve(e,"string");return As(t)=="symbol"?t:t+""}function Xve(e,t){if(As(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(As(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Oj(){return Oj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Oj.apply(this,arguments)}function Gve(e){var t=e.xAxisId,n=fj(),r=pj(),o=vB(t);return o==null?null:V.createElement(Ps,Oj({},o,{className:st("recharts-".concat(o.axisType," ").concat(o.axisType),o.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(a){return Ao(a,!0)}}))}var wh=function(e){function t(){return Vve(this,t),Wve(this,t,arguments)}return Kve(t,e),Hve(t,[{key:"render",value:function(){return V.createElement(Gve,this.props)}}])}(V.Component);HB(wh,"displayName","XAxis"),HB(wh,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Ts(e){"@babel/helpers - typeof";return Ts=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ts(e)}function Qve(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Jve(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,KB(r.key),r)}}function Zve(e,t,n){return t&&Jve(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function e0e(e,t,n){return t=_h(t),t0e(e,qB()?Reflect.construct(t,n||[],_h(e).constructor):t.apply(e,n))}function t0e(e,t){if(t&&(Ts(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return n0e(e)}function n0e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(qB=function(){return!!e})()}function _h(e){return _h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},_h(e)}function r0e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Mj(e,t)}function Mj(e,t){return Mj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Mj(e,t)}function YB(e,t,n){return t=KB(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function KB(e){var t=o0e(e,"string");return Ts(t)=="symbol"?t:t+""}function o0e(e,t){if(Ts(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Ts(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Nj(){return Nj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Nj.apply(this,arguments)}var a0e=function(e){var t=e.yAxisId,n=fj(),r=pj(),o=bB(t);return o==null?null:V.createElement(Ps,Nj({},o,{className:st("recharts-".concat(o.axisType," ").concat(o.axisType),o.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(a){return Ao(a,!0)}}))},Pj=function(e){function t(){return Qve(this,t),e0e(this,t,arguments)}return r0e(t,e),Zve(t,[{key:"render",value:function(){return V.createElement(a0e,this.props)}}])}(V.Component);YB(Pj,"displayName","YAxis"),YB(Pj,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function XB(e){return l0e(e)||c0e(e)||s0e(e)||i0e()}function i0e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function s0e(e,t){if(e){if(typeof e=="string")return kj(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return kj(e,t)}}function c0e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function l0e(e){if(Array.isArray(e))return kj(e)}function kj(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Aj=function(e,t,n,r,o){var a=gr(e,gj),i=gr(e,hh),s=[].concat(XB(a),XB(i)),c=gr(e,gh),l="".concat(r,"Id"),u=r[0],d=t;if(s.length&&(d=s.reduce(function(y,m){if(m.props[l]===n&&zr(m.props,"extendDomain")&&me(m.props[u])){var v=m.props[u];return[Math.min(y[0],v),Math.max(y[1],v)]}return y},d)),c.length){var f="".concat(u,"1"),p="".concat(u,"2");d=c.reduce(function(y,m){if(m.props[l]===n&&zr(m.props,"extendDomain")&&me(m.props[f])&&me(m.props[p])){var v=m.props[f],b=m.props[p];return[Math.min(y[0],v,b),Math.max(y[1],v,b)]}return y},d)}return o&&o.length&&(d=o.reduce(function(y,m){return me(m)?[Math.min(y[0],m),Math.max(y[1],m)]:y},d)),d},GB={exports:{}},QB;function u0e(){return QB||(QB=1,function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function o(c,l,u){this.fn=c,this.context=l,this.once=u||!1}function a(c,l,u,d,f){if(typeof u!="function")throw new TypeError("The listener must be a function");var p=new o(u,d||c,f),y=n?n+l:l;return c._events[y]?c._events[y].fn?c._events[y]=[c._events[y],p]:c._events[y].push(p):(c._events[y]=p,c._eventsCount++),c}function i(c,l){--c._eventsCount===0?c._events=new r:delete c._events[l]}function s(){this._events=new r,this._eventsCount=0}s.prototype.eventNames=function(){var c=[],l,u;if(this._eventsCount===0)return c;for(u in l=this._events)t.call(l,u)&&c.push(n?u.slice(1):u);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(l)):c},s.prototype.listeners=function(c){var l=n?n+c:c,u=this._events[l];if(!u)return[];if(u.fn)return[u.fn];for(var d=0,f=u.length,p=new Array(f);d<f;d++)p[d]=u[d].fn;return p},s.prototype.listenerCount=function(c){var l=n?n+c:c,u=this._events[l];return u?u.fn?1:u.length:0},s.prototype.emit=function(c,l,u,d,f,p){var y=n?n+c:c;if(!this._events[y])return!1;var m=this._events[y],v=arguments.length,b,x;if(m.fn){switch(m.once&&this.removeListener(c,m.fn,void 0,!0),v){case 1:return m.fn.call(m.context),!0;case 2:return m.fn.call(m.context,l),!0;case 3:return m.fn.call(m.context,l,u),!0;case 4:return m.fn.call(m.context,l,u,d),!0;case 5:return m.fn.call(m.context,l,u,d,f),!0;case 6:return m.fn.call(m.context,l,u,d,f,p),!0}for(x=1,b=new Array(v-1);x<v;x++)b[x-1]=arguments[x];m.fn.apply(m.context,b)}else{var j=m.length,w;for(x=0;x<j;x++)switch(m[x].once&&this.removeListener(c,m[x].fn,void 0,!0),v){case 1:m[x].fn.call(m[x].context);break;case 2:m[x].fn.call(m[x].context,l);break;case 3:m[x].fn.call(m[x].context,l,u);break;case 4:m[x].fn.call(m[x].context,l,u,d);break;default:if(!b)for(w=1,b=new Array(v-1);w<v;w++)b[w-1]=arguments[w];m[x].fn.apply(m[x].context,b)}}return!0},s.prototype.on=function(c,l,u){return a(this,c,l,u,!1)},s.prototype.once=function(c,l,u){return a(this,c,l,u,!0)},s.prototype.removeListener=function(c,l,u,d){var f=n?n+c:c;if(!this._events[f])return this;if(!l)return i(this,f),this;var p=this._events[f];if(p.fn)p.fn===l&&(!d||p.once)&&(!u||p.context===u)&&i(this,f);else{for(var y=0,m=[],v=p.length;y<v;y++)(p[y].fn!==l||d&&!p[y].once||u&&p[y].context!==u)&&m.push(p[y]);m.length?this._events[f]=m.length===1?m[0]:m:i(this,f)}return this},s.prototype.removeAllListeners=function(c){var l;return c?(l=n?n+c:c,this._events[l]&&i(this,l)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,e.exports=s}(GB)),GB.exports}var d0e=u0e();const f0e=Xe(d0e);var Tj=new f0e,Rj="recharts.syncMouseEvents";function xu(e){"@babel/helpers - typeof";return xu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xu(e)}function p0e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h0e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,JB(r.key),r)}}function m0e(e,t,n){return t&&h0e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ij(e,t,n){return t=JB(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function JB(e){var t=y0e(e,"string");return xu(t)=="symbol"?t:t+""}function y0e(e,t){if(xu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(xu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var g0e=function(){function e(){p0e(this,e),Ij(this,"activeIndex",0),Ij(this,"coordinateList",[]),Ij(this,"layout","horizontal")}return m0e(e,[{key:"setDetails",value:function(t){var n,r=t.coordinateList,o=r===void 0?null:r,a=t.container,i=a===void 0?null:a,s=t.layout,c=s===void 0?null:s,l=t.offset,u=l===void 0?null:l,d=t.mouseHandlerCallback,f=d===void 0?null:d;this.coordinateList=(n=o??this.coordinateList)!==null&&n!==void 0?n:[],this.container=i??this.container,this.layout=c??this.layout,this.offset=u??this.offset,this.mouseHandlerCallback=f??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(t){if(this.coordinateList.length!==0)switch(t.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(t){this.activeIndex=t}},{key:"spoofMouse",value:function(){var t,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var r=this.container.getBoundingClientRect(),o=r.x,a=r.y,i=r.height,s=this.coordinateList[this.activeIndex].coordinate,c=((t=window)===null||t===void 0?void 0:t.scrollX)||0,l=((n=window)===null||n===void 0?void 0:n.scrollY)||0,u=o+s+c,d=a+this.offset.top+i/2+l;this.mouseHandlerCallback({pageX:u,pageY:d})}}}])}();function v0e(e,t,n){if(n==="number"&&t===!0&&Array.isArray(e)){var r=e==null?void 0:e[0],o=e==null?void 0:e[1];if(r&&o&&me(r)&&me(o))return!0}return!1}function b0e(e,t,n,r){var o=r/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-o:n.left+.5,y:e==="horizontal"?n.top+.5:t.y-o,width:e==="horizontal"?r:n.width-1,height:e==="horizontal"?n.height-1:r}}function ZB(e){var t=e.cx,n=e.cy,r=e.radius,o=e.startAngle,a=e.endAngle,i=Gt(t,n,r,o),s=Gt(t,n,r,a);return{points:[i,s],cx:t,cy:n,radius:r,startAngle:o,endAngle:a}}function x0e(e,t,n){var r,o,a,i;if(e==="horizontal")r=t.x,a=r,o=n.top,i=n.top+n.height;else if(e==="vertical")o=t.y,i=o,r=n.left,a=n.left+n.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var s=t.cx,c=t.cy,l=t.innerRadius,u=t.outerRadius,d=t.angle,f=Gt(s,c,l,d),p=Gt(s,c,u,d);r=f.x,o=f.y,a=p.x,i=p.y}else return ZB(t);return[{x:r,y:o},{x:a,y:i}]}function wu(e){"@babel/helpers - typeof";return wu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wu(e)}function e9(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function jh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?e9(Object(n),!0).forEach(function(r){w0e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):e9(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function w0e(e,t,n){return t=_0e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _0e(e){var t=j0e(e,"string");return wu(t)=="symbol"?t:t+""}function j0e(e,t){if(wu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(wu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function E0e(e){var t,n,r=e.element,o=e.tooltipEventType,a=e.isActive,i=e.activeCoordinate,s=e.activePayload,c=e.offset,l=e.activeTooltipIndex,u=e.tooltipAxisBandSize,d=e.layout,f=e.chartName,p=(t=r.props.cursor)!==null&&t!==void 0?t:(n=r.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!r||!p||!a||!i||f!=="ScatterChart"&&o!=="axis")return null;var y,m=F8;if(f==="ScatterChart")y=i,m=$me;else if(f==="BarChart")y=b0e(d,i,c,u),m=$_;else if(d==="radial"){var v=ZB(i),b=v.cx,x=v.cy,j=v.radius,w=v.startAngle,_=v.endAngle;y={cx:b,cy:x,startAngle:w,endAngle:_,innerRadius:j,outerRadius:j},m=R8}else y={points:x0e(d,i,c)},m=F8;var E=jh(jh(jh(jh({stroke:"#ccc",pointerEvents:"none"},c),y),nt(p,!1)),{},{payload:s,payloadIndex:l,className:st("recharts-tooltip-cursor",p.className)});return g.isValidElement(p)?g.cloneElement(p,E):g.createElement(m,E)}var S0e=["item"],C0e=["children","className","width","height","style","compact","title","desc"];function Rs(e){"@babel/helpers - typeof";return Rs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rs(e)}function Is(){return Is=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Is.apply(this,arguments)}function t9(e,t){return N0e(e)||M0e(e,t)||o9(e,t)||O0e()}function O0e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function M0e(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,o,a,i,s=[],c=!0,l=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(c=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(u){l=!0,o=u}finally{try{if(!c&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return s}}function N0e(e){if(Array.isArray(e))return e}function n9(e,t){if(e==null)return{};var n=P0e(e,t),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function P0e(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function k0e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function A0e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,i9(r.key),r)}}function T0e(e,t,n){return t&&A0e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function R0e(e,t,n){return t=Eh(t),I0e(e,r9()?Reflect.construct(t,n||[],Eh(e).constructor):t.apply(e,n))}function I0e(e,t){if(t&&(Rs(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return D0e(e)}function D0e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function r9(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(r9=function(){return!!e})()}function Eh(e){return Eh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Eh(e)}function L0e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Dj(e,t)}function Dj(e,t){return Dj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Dj(e,t)}function Ds(e){return $0e(e)||B0e(e)||o9(e)||F0e()}function F0e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function o9(e,t){if(e){if(typeof e=="string")return Lj(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Lj(e,t)}}function B0e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function $0e(e){if(Array.isArray(e))return Lj(e)}function Lj(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a9(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function oe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?a9(Object(n),!0).forEach(function(r){Re(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a9(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Re(e,t,n){return t=i9(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i9(e){var t=z0e(e,"string");return Rs(t)=="symbol"?t:t+""}function z0e(e,t){if(Rs(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Rs(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var V0e={xAxis:["bottom","top"],yAxis:["left","right"]},U0e={width:"100%",height:"100%"},s9={x:0,y:0};function Sh(e){return e}var H0e=function(e,t){return t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius},W0e=function(e,t,n,r){var o=t.find(function(l){return l&&l.index===n});if(o){if(e==="horizontal")return{x:o.coordinate,y:r.y};if(e==="vertical")return{x:r.x,y:o.coordinate};if(e==="centric"){var a=o.coordinate,i=r.radius;return oe(oe(oe({},r),Gt(r.cx,r.cy,i,a)),{},{angle:a,radius:i})}var s=o.coordinate,c=r.angle;return oe(oe(oe({},r),Gt(r.cx,r.cy,s,c)),{},{angle:c,radius:s})}return s9},Ch=function(e,t){var n=t.graphicalItems,r=t.dataStartIndex,o=t.dataEndIndex,a=(n??[]).reduce(function(i,s){var c=s.props.data;return c&&c.length?[].concat(Ds(i),Ds(c)):i},[]);return a.length>0?a:e&&e.length&&me(r)&&me(o)?e.slice(r,o+1):[]};function c9(e){return e==="number"?[0,"auto"]:void 0}var Fj=function(e,t,n,r){var o=e.graphicalItems,a=e.tooltipAxis,i=Ch(t,e);return n<0||!o||!o.length||n>=i.length?null:o.reduce(function(s,c){var l,u=(l=c.props.data)!==null&&l!==void 0?l:t;u&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=n&&(u=u.slice(e.dataStartIndex,e.dataEndIndex+1));var d;if(a.dataKey&&!a.allowDuplicatedCategory){var f=u===void 0?i:u;d=Zx(f,a.dataKey,r)}else d=u&&u[n]||i[n];return d?[].concat(Ds(s),[w8(c,d)]):s},[])},l9=function(e,t,n,r){var o=r||{x:e.chartX,y:e.chartY},a=H0e(o,n),i=e.orderedTooltipTicks,s=e.tooltipAxis,c=e.tooltipTicks,l=Ife(a,i,c,s);if(l>=0&&c){var u=c[l]&&c[l].value,d=Fj(e,t,l,u),f=W0e(n,i,l,o);return{activeTooltipIndex:l,activeLabel:u,activePayload:d,activeCoordinate:f}}return null},q0e=function(e,t){var n=t.axes,r=t.graphicalItems,o=t.axisType,a=t.axisIdKey,i=t.stackGroups,s=t.dataStartIndex,c=t.dataEndIndex,l=e.layout,u=e.children,d=e.stackOffset,f=p8(l,o);return n.reduce(function(p,y){var m,v=y.type.defaultProps!==void 0?oe(oe({},y.type.defaultProps),y.props):y.props,b=v.type,x=v.dataKey,j=v.allowDataOverflow,w=v.allowDuplicatedCategory,_=v.scale,E=v.ticks,S=v.includeHidden,C=v[a];if(p[C])return p;var M=Ch(e.data,{graphicalItems:r.filter(function(H){var F,U=a in H.props?H.props[a]:(F=H.type.defaultProps)===null||F===void 0?void 0:F[a];return U===C}),dataStartIndex:s,dataEndIndex:c}),P=M.length,N,R,A;v0e(v.domain,j,b)&&(N=__(v.domain,null,j),f&&(b==="number"||_!=="auto")&&(A=Up(M,x,"category")));var O=c9(b);if(!N||N.length===0){var k,T=(k=v.domain)!==null&&k!==void 0?k:O;if(x){if(N=Up(M,x,b),b==="category"&&f){var I=Wae(N);w&&I?(R=N,N=ah(0,P)):w||(N=x8(T,N,y).reduce(function(H,F){return H.indexOf(F)>=0?H:[].concat(Ds(H),[F])},[]))}else if(b==="category")w?N=N.filter(function(H){return H!==""&&!rt(H)}):N=x8(T,N,y).reduce(function(H,F){return H.indexOf(F)>=0||F===""||rt(F)?H:[].concat(Ds(H),[F])},[]);else if(b==="number"){var L=$fe(M,r.filter(function(H){var F,U,Y=a in H.props?H.props[a]:(F=H.type.defaultProps)===null||F===void 0?void 0:F[a],G="hide"in H.props?H.props.hide:(U=H.type.defaultProps)===null||U===void 0?void 0:U.hide;return Y===C&&(S||!G)}),x,o,l);L&&(N=L)}f&&(b==="number"||_!=="auto")&&(A=Up(M,x,"category"))}else f?N=ah(0,P):i&&i[C]&&i[C].hasStack&&b==="number"?N=d==="expand"?[0,1]:g8(i[C].stackGroups,s,c):N=f8(M,r.filter(function(H){var F=a in H.props?H.props[a]:H.type.defaultProps[a],U="hide"in H.props?H.props.hide:H.type.defaultProps.hide;return F===C&&(S||!U)}),b,l,!0);if(b==="number")N=Aj(u,N,C,o,E),T&&(N=__(T,N,j));else if(b==="category"&&T){var D=T,z=N.every(function(H){return D.indexOf(H)>=0});z&&(N=D)}}return oe(oe({},p),{},Re({},C,oe(oe({},v),{},{axisType:o,domain:N,categoricalDomain:A,duplicateDomain:R,originalDomain:(m=v.domain)!==null&&m!==void 0?m:O,isCategorical:f,layout:l})))},{})},Y0e=function(e,t){var n=t.graphicalItems,r=t.Axis,o=t.axisType,a=t.axisIdKey,i=t.stackGroups,s=t.dataStartIndex,c=t.dataEndIndex,l=e.layout,u=e.children,d=Ch(e.data,{graphicalItems:n,dataStartIndex:s,dataEndIndex:c}),f=d.length,p=p8(l,o),y=-1;return n.reduce(function(m,v){var b=v.type.defaultProps!==void 0?oe(oe({},v.type.defaultProps),v.props):v.props,x=b[a],j=c9("number");if(!m[x]){y++;var w;return p?w=ah(0,f):i&&i[x]&&i[x].hasStack?(w=g8(i[x].stackGroups,s,c),w=Aj(u,w,x,o)):(w=__(j,f8(d,n.filter(function(_){var E,S,C=a in _.props?_.props[a]:(E=_.type.defaultProps)===null||E===void 0?void 0:E[a],M="hide"in _.props?_.props.hide:(S=_.type.defaultProps)===null||S===void 0?void 0:S.hide;return C===x&&!M}),"number",l),r.defaultProps.allowDataOverflow),w=Aj(u,w,x,o)),oe(oe({},m),{},Re({},x,oe(oe({axisType:o},r.defaultProps),{},{hide:!0,orientation:Hn(V0e,"".concat(o,".").concat(y%2),null),domain:w,originalDomain:j,isCategorical:p,layout:l})))}return m},{})},K0e=function(e,t){var n=t.axisType,r=n===void 0?"xAxis":n,o=t.AxisComp,a=t.graphicalItems,i=t.stackGroups,s=t.dataStartIndex,c=t.dataEndIndex,l=e.children,u="".concat(r,"Id"),d=gr(l,o),f={};return d&&d.length?f=q0e(e,{axes:d,graphicalItems:a,axisType:r,axisIdKey:u,stackGroups:i,dataStartIndex:s,dataEndIndex:c}):a&&a.length&&(f=Y0e(e,{Axis:o,graphicalItems:a,axisType:r,axisIdKey:u,stackGroups:i,dataStartIndex:s,dataEndIndex:c})),f},X0e=function(e){var t=Zo(e),n=Ao(t,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:u1(n,function(r){return r.coordinate}),tooltipAxis:t,tooltipAxisBandSize:Wp(t,n)}},u9=function(e){var t=e.children,n=e.defaultShowTooltip,r=In(t,js),o=0,a=0;return e.data&&e.data.length!==0&&(a=e.data.length-1),r&&r.props&&(r.props.startIndex>=0&&(o=r.props.startIndex),r.props.endIndex>=0&&(a=r.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:o,dataEndIndex:a,activeTooltipIndex:-1,isTooltipActive:!!n}},G0e=function(e){return!e||!e.length?!1:e.some(function(t){var n=_o(t&&t.type);return n&&n.indexOf("Bar")>=0})},d9=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},Q0e=function(e,t){var n=e.props,r=e.graphicalItems,o=e.xAxisMap,a=o===void 0?{}:o,i=e.yAxisMap,s=i===void 0?{}:i,c=n.width,l=n.height,u=n.children,d=n.margin||{},f=In(u,js),p=In(u,ss),y=Object.keys(s).reduce(function(w,_){var E=s[_],S=E.orientation;return!E.mirror&&!E.hide?oe(oe({},w),{},Re({},S,w[S]+E.width)):w},{left:d.left||0,right:d.right||0}),m=Object.keys(a).reduce(function(w,_){var E=a[_],S=E.orientation;return!E.mirror&&!E.hide?oe(oe({},w),{},Re({},S,Hn(w,"".concat(S))+E.height)):w},{top:d.top||0,bottom:d.bottom||0}),v=oe(oe({},m),y),b=v.bottom;f&&(v.bottom+=f.props.height||js.defaultProps.height),p&&t&&(v=Ffe(v,r,n,t));var x=c-v.left-v.right,j=l-v.top-v.bottom;return oe(oe({brushBottom:b},v),{},{width:Math.max(x,0),height:Math.max(j,0)})},J0e=function(e,t){if(t==="xAxis")return e[t].width;if(t==="yAxis")return e[t].height},Z0e=function(e){var t=e.chartName,n=e.GraphicalChild,r=e.defaultTooltipEventType,o=r===void 0?"axis":r,a=e.validateTooltipEventTypes,i=a===void 0?["axis"]:a,s=e.axisComponents,c=e.legendContent,l=e.formatAxisMap,u=e.defaultProps,d=function(m,v){var b=v.graphicalItems,x=v.stackGroups,j=v.offset,w=v.updateId,_=v.dataStartIndex,E=v.dataEndIndex,S=m.barSize,C=m.layout,M=m.barGap,P=m.barCategoryGap,N=m.maxBarSize,R=d9(C),A=R.numericAxisName,O=R.cateAxisName,k=G0e(b),T=[];return b.forEach(function(I,L){var D=Ch(m.data,{graphicalItems:[I],dataStartIndex:_,dataEndIndex:E}),z=I.type.defaultProps!==void 0?oe(oe({},I.type.defaultProps),I.props):I.props,H=z.dataKey,F=z.maxBarSize,U=z["".concat(A,"Id")],Y=z["".concat(O,"Id")],G={},re=s.reduce(function(ze,at){var He=v["".concat(at.axisType,"Map")],it=z["".concat(at.axisType,"Id")];He&&He[it]||at.axisType==="zAxis"||Ha();var Vt=He[it];return oe(oe({},ze),{},Re(Re({},at.axisType,Vt),"".concat(at.axisType,"Ticks"),Ao(Vt)))},G),Z=re[O],q=re["".concat(O,"Ticks")],W=x&&x[U]&&x[U].hasStack&&Jfe(I,x[U].stackGroups),Q=_o(I.type).indexOf("Bar")>=0,te=Wp(Z,q),B=[],se=k&&Dfe({barSize:S,stackGroups:x,totalSize:J0e(re,O)});if(Q){var ce,ve,Te=rt(F)?N:F,qe=(ce=(ve=Wp(Z,q,!0))!==null&&ve!==void 0?ve:Te)!==null&&ce!==void 0?ce:0;B=Lfe({barGap:M,barCategoryGap:P,bandSize:qe!==te?qe:te,sizeList:se[Y],maxBarSize:Te}),qe!==te&&(B=B.map(function(ze){return oe(oe({},ze),{},{position:oe(oe({},ze.position),{},{offset:ze.position.offset-qe/2})})}))}var Ye=I&&I.type&&I.type.getComposedData;Ye&&T.push({props:oe(oe({},Ye(oe(oe({},re),{},{displayedData:D,props:m,dataKey:H,item:I,bandSize:te,barPosition:B,offset:j,stackedData:W,layout:C,dataStartIndex:_,dataEndIndex:E}))),{},Re(Re(Re({key:I.key||"item-".concat(L)},A,re[A]),O,re[O]),"animationId",w)),childIndex:nie(I,m.children),item:I})}),T},f=function(m,v){var b=m.props,x=m.dataStartIndex,j=m.dataEndIndex,w=m.updateId;if(!b5({props:b}))return null;var _=b.children,E=b.layout,S=b.stackOffset,C=b.data,M=b.reverseStackOrder,P=d9(E),N=P.numericAxisName,R=P.cateAxisName,A=gr(_,n),O=Xfe(C,A,"".concat(N,"Id"),"".concat(R,"Id"),S,M),k=s.reduce(function(z,H){var F="".concat(H.axisType,"Map");return oe(oe({},z),{},Re({},F,K0e(b,oe(oe({},H),{},{graphicalItems:A,stackGroups:H.axisType===N&&O,dataStartIndex:x,dataEndIndex:j}))))},{}),T=Q0e(oe(oe({},k),{},{props:b,graphicalItems:A}),v==null?void 0:v.legendBBox);Object.keys(k).forEach(function(z){k[z]=l(b,k[z],T,z.replace("Map",""),t)});var I=k["".concat(R,"Map")],L=X0e(I),D=d(b,oe(oe({},k),{},{dataStartIndex:x,dataEndIndex:j,updateId:w,graphicalItems:A,stackGroups:O,offset:T}));return oe(oe({formattedGraphicalItems:D,graphicalItems:A,offset:T,stackGroups:O},L),k)},p=function(m){function v(b){var x,j,w;return k0e(this,v),w=R0e(this,v,[b]),Re(w,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Re(w,"accessibilityManager",new g0e),Re(w,"handleLegendBBoxUpdate",function(_){if(_){var E=w.state,S=E.dataStartIndex,C=E.dataEndIndex,M=E.updateId;w.setState(oe({legendBBox:_},f({props:w.props,dataStartIndex:S,dataEndIndex:C,updateId:M},oe(oe({},w.state),{},{legendBBox:_}))))}}),Re(w,"handleReceiveSyncEvent",function(_,E,S){if(w.props.syncId===_){if(S===w.eventEmitterSymbol&&typeof w.props.syncMethod!="function")return;w.applySyncEvent(E)}}),Re(w,"handleBrushChange",function(_){var E=_.startIndex,S=_.endIndex;if(E!==w.state.dataStartIndex||S!==w.state.dataEndIndex){var C=w.state.updateId;w.setState(function(){return oe({dataStartIndex:E,dataEndIndex:S},f({props:w.props,dataStartIndex:E,dataEndIndex:S,updateId:C},w.state))}),w.triggerSyncEvent({dataStartIndex:E,dataEndIndex:S})}}),Re(w,"handleMouseEnter",function(_){var E=w.getMouseInfo(_);if(E){var S=oe(oe({},E),{},{isTooltipActive:!0});w.setState(S),w.triggerSyncEvent(S);var C=w.props.onMouseEnter;We(C)&&C(S,_)}}),Re(w,"triggeredAfterMouseMove",function(_){var E=w.getMouseInfo(_),S=E?oe(oe({},E),{},{isTooltipActive:!0}):{isTooltipActive:!1};w.setState(S),w.triggerSyncEvent(S);var C=w.props.onMouseMove;We(C)&&C(S,_)}),Re(w,"handleItemMouseEnter",function(_){w.setState(function(){return{isTooltipActive:!0,activeItem:_,activePayload:_.tooltipPayload,activeCoordinate:_.tooltipPosition||{x:_.cx,y:_.cy}}})}),Re(w,"handleItemMouseLeave",function(){w.setState(function(){return{isTooltipActive:!1}})}),Re(w,"handleMouseMove",function(_){_.persist(),w.throttleTriggeredAfterMouseMove(_)}),Re(w,"handleMouseLeave",function(_){w.throttleTriggeredAfterMouseMove.cancel();var E={isTooltipActive:!1};w.setState(E),w.triggerSyncEvent(E);var S=w.props.onMouseLeave;We(S)&&S(E,_)}),Re(w,"handleOuterEvent",function(_){var E=tie(_),S=Hn(w.props,"".concat(E));if(E&&We(S)){var C,M;/.*touch.*/i.test(E)?M=w.getMouseInfo(_.changedTouches[0]):M=w.getMouseInfo(_),S((C=M)!==null&&C!==void 0?C:{},_)}}),Re(w,"handleClick",function(_){var E=w.getMouseInfo(_);if(E){var S=oe(oe({},E),{},{isTooltipActive:!0});w.setState(S),w.triggerSyncEvent(S);var C=w.props.onClick;We(C)&&C(S,_)}}),Re(w,"handleMouseDown",function(_){var E=w.props.onMouseDown;if(We(E)){var S=w.getMouseInfo(_);E(S,_)}}),Re(w,"handleMouseUp",function(_){var E=w.props.onMouseUp;if(We(E)){var S=w.getMouseInfo(_);E(S,_)}}),Re(w,"handleTouchMove",function(_){_.changedTouches!=null&&_.changedTouches.length>0&&w.throttleTriggeredAfterMouseMove(_.changedTouches[0])}),Re(w,"handleTouchStart",function(_){_.changedTouches!=null&&_.changedTouches.length>0&&w.handleMouseDown(_.changedTouches[0])}),Re(w,"handleTouchEnd",function(_){_.changedTouches!=null&&_.changedTouches.length>0&&w.handleMouseUp(_.changedTouches[0])}),Re(w,"triggerSyncEvent",function(_){w.props.syncId!==void 0&&Tj.emit(Rj,w.props.syncId,_,w.eventEmitterSymbol)}),Re(w,"applySyncEvent",function(_){var E=w.props,S=E.layout,C=E.syncMethod,M=w.state.updateId,P=_.dataStartIndex,N=_.dataEndIndex;if(_.dataStartIndex!==void 0||_.dataEndIndex!==void 0)w.setState(oe({dataStartIndex:P,dataEndIndex:N},f({props:w.props,dataStartIndex:P,dataEndIndex:N,updateId:M},w.state)));else if(_.activeTooltipIndex!==void 0){var R=_.chartX,A=_.chartY,O=_.activeTooltipIndex,k=w.state,T=k.offset,I=k.tooltipTicks;if(!T)return;if(typeof C=="function")O=C(I,_);else if(C==="value"){O=-1;for(var L=0;L<I.length;L++)if(I[L].value===_.activeLabel){O=L;break}}var D=oe(oe({},T),{},{x:T.left,y:T.top}),z=Math.min(R,D.x+D.width),H=Math.min(A,D.y+D.height),F=I[O]&&I[O].value,U=Fj(w.state,w.props.data,O),Y=I[O]?{x:S==="horizontal"?I[O].coordinate:z,y:S==="horizontal"?H:I[O].coordinate}:s9;w.setState(oe(oe({},_),{},{activeLabel:F,activeCoordinate:Y,activePayload:U,activeTooltipIndex:O}))}else w.setState(_)}),Re(w,"renderCursor",function(_){var E,S=w.state,C=S.isTooltipActive,M=S.activeCoordinate,P=S.activePayload,N=S.offset,R=S.activeTooltipIndex,A=S.tooltipAxisBandSize,O=w.getTooltipEventType(),k=(E=_.props.active)!==null&&E!==void 0?E:C,T=w.props.layout,I=_.key||"_recharts-cursor";return V.createElement(E0e,{key:I,activeCoordinate:M,activePayload:P,activeTooltipIndex:R,chartName:t,element:_,isActive:k,layout:T,offset:N,tooltipAxisBandSize:A,tooltipEventType:O})}),Re(w,"renderPolarAxis",function(_,E,S){var C=Hn(_,"type.axisType"),M=Hn(w.state,"".concat(C,"Map")),P=_.type.defaultProps,N=P!==void 0?oe(oe({},P),_.props):_.props,R=M&&M[N["".concat(C,"Id")]];return g.cloneElement(_,oe(oe({},R),{},{className:st(C,R.className),key:_.key||"".concat(E,"-").concat(S),ticks:Ao(R,!0)}))}),Re(w,"renderPolarGrid",function(_){var E=_.props,S=E.radialLines,C=E.polarAngles,M=E.polarRadius,P=w.state,N=P.radiusAxisMap,R=P.angleAxisMap,A=Zo(N),O=Zo(R),k=O.cx,T=O.cy,I=O.innerRadius,L=O.outerRadius;return g.cloneElement(_,{polarAngles:Array.isArray(C)?C:Ao(O,!0).map(function(D){return D.coordinate}),polarRadius:Array.isArray(M)?M:Ao(A,!0).map(function(D){return D.coordinate}),cx:k,cy:T,innerRadius:I,outerRadius:L,key:_.key||"polar-grid",radialLines:S})}),Re(w,"renderLegend",function(){var _=w.state.formattedGraphicalItems,E=w.props,S=E.children,C=E.width,M=E.height,P=w.props.margin||{},N=C-(P.left||0)-(P.right||0),R=c8({children:S,formattedGraphicalItems:_,legendWidth:N,legendContent:c});if(!R)return null;var A=R.item,O=n9(R,S0e);return g.cloneElement(A,oe(oe({},O),{},{chartWidth:C,chartHeight:M,margin:P,onBBoxUpdate:w.handleLegendBBoxUpdate}))}),Re(w,"renderTooltip",function(){var _,E=w.props,S=E.children,C=E.accessibilityLayer,M=In(S,Lr);if(!M)return null;var P=w.state,N=P.isTooltipActive,R=P.activeCoordinate,A=P.activePayload,O=P.activeLabel,k=P.offset,T=(_=M.props.active)!==null&&_!==void 0?_:N;return g.cloneElement(M,{viewBox:oe(oe({},k),{},{x:k.left,y:k.top}),active:T,label:O,payload:T?A:[],coordinate:R,accessibilityLayer:C})}),Re(w,"renderBrush",function(_){var E=w.props,S=E.margin,C=E.data,M=w.state,P=M.offset,N=M.dataStartIndex,R=M.dataEndIndex,A=M.updateId;return g.cloneElement(_,{key:_.key||"_recharts-brush",onChange:Hp(w.handleBrushChange,_.props.onChange),data:C,x:me(_.props.x)?_.props.x:P.left,y:me(_.props.y)?_.props.y:P.top+P.height+P.brushBottom-(S.bottom||0),width:me(_.props.width)?_.props.width:P.width,startIndex:N,endIndex:R,updateId:"brush-".concat(A)})}),Re(w,"renderReferenceElement",function(_,E,S){if(!_)return null;var C=w,M=C.clipPathId,P=w.state,N=P.xAxisMap,R=P.yAxisMap,A=P.offset,O=_.type.defaultProps||{},k=_.props,T=k.xAxisId,I=T===void 0?O.xAxisId:T,L=k.yAxisId,D=L===void 0?O.yAxisId:L;return g.cloneElement(_,{key:_.key||"".concat(E,"-").concat(S),xAxis:N[I],yAxis:R[D],viewBox:{x:A.left,y:A.top,width:A.width,height:A.height},clipPathId:M})}),Re(w,"renderActivePoints",function(_){var E=_.item,S=_.activePoint,C=_.basePoint,M=_.childIndex,P=_.isRange,N=[],R=E.props.key,A=E.item.type.defaultProps!==void 0?oe(oe({},E.item.type.defaultProps),E.item.props):E.item.props,O=A.activeDot,k=A.dataKey,T=oe(oe({index:M,dataKey:k,cx:S.x,cy:S.y,r:4,fill:x_(E.item),strokeWidth:2,stroke:"#fff",payload:S.payload,value:S.value},nt(O,!1)),Zf(O));return N.push(v.renderActiveDot(O,T,"".concat(R,"-activePoint-").concat(M))),C?N.push(v.renderActiveDot(O,oe(oe({},T),{},{cx:C.x,cy:C.y}),"".concat(R,"-basePoint-").concat(M))):P&&N.push(null),N}),Re(w,"renderGraphicChild",function(_,E,S){var C=w.filterFormatItem(_,E,S);if(!C)return null;var M=w.getTooltipEventType(),P=w.state,N=P.isTooltipActive,R=P.tooltipAxis,A=P.activeTooltipIndex,O=P.activeLabel,k=w.props.children,T=In(k,Lr),I=C.props,L=I.points,D=I.isRange,z=I.baseLine,H=C.item.type.defaultProps!==void 0?oe(oe({},C.item.type.defaultProps),C.item.props):C.item.props,F=H.activeDot,U=H.hide,Y=H.activeBar,G=H.activeShape,re=!!(!U&&N&&T&&(F||Y||G)),Z={};M!=="axis"&&T&&T.props.trigger==="click"?Z={onClick:Hp(w.handleItemMouseEnter,_.props.onClick)}:M!=="axis"&&(Z={onMouseLeave:Hp(w.handleItemMouseLeave,_.props.onMouseLeave),onMouseEnter:Hp(w.handleItemMouseEnter,_.props.onMouseEnter)});var q=g.cloneElement(_,oe(oe({},C.props),Z));function W(He){return typeof R.dataKey=="function"?R.dataKey(He.payload):null}if(re)if(A>=0){var Q,te;if(R.dataKey&&!R.allowDuplicatedCategory){var B=typeof R.dataKey=="function"?W:"payload.".concat(R.dataKey.toString());Q=Zx(L,B,O),te=D&&z&&Zx(z,B,O)}else Q=L==null?void 0:L[A],te=D&&z&&z[A];if(G||Y){var se=_.props.activeIndex!==void 0?_.props.activeIndex:A;return[g.cloneElement(_,oe(oe(oe({},C.props),Z),{},{activeIndex:se})),null,null]}if(!rt(Q))return[q].concat(Ds(w.renderActivePoints({item:C,activePoint:Q,basePoint:te,childIndex:A,isRange:D})))}else{var ce,ve=(ce=w.getItemByXY(w.state.activeCoordinate))!==null&&ce!==void 0?ce:{graphicalItem:q},Te=ve.graphicalItem,qe=Te.item,Ye=qe===void 0?_:qe,ze=Te.childIndex,at=oe(oe(oe({},C.props),Z),{},{activeIndex:ze});return[g.cloneElement(Ye,at),null,null]}return D?[q,null,null]:[q,null]}),Re(w,"renderCustomized",function(_,E,S){return g.cloneElement(_,oe(oe({key:"recharts-customized-".concat(S)},w.props),w.state))}),Re(w,"renderMap",{CartesianGrid:{handler:Sh,once:!0},ReferenceArea:{handler:w.renderReferenceElement},ReferenceLine:{handler:Sh},ReferenceDot:{handler:w.renderReferenceElement},XAxis:{handler:Sh},YAxis:{handler:Sh},Brush:{handler:w.renderBrush,once:!0},Bar:{handler:w.renderGraphicChild},Line:{handler:w.renderGraphicChild},Area:{handler:w.renderGraphicChild},Radar:{handler:w.renderGraphicChild},RadialBar:{handler:w.renderGraphicChild},Scatter:{handler:w.renderGraphicChild},Pie:{handler:w.renderGraphicChild},Funnel:{handler:w.renderGraphicChild},Tooltip:{handler:w.renderCursor,once:!0},PolarGrid:{handler:w.renderPolarGrid,once:!0},PolarAngleAxis:{handler:w.renderPolarAxis},PolarRadiusAxis:{handler:w.renderPolarAxis},Customized:{handler:w.renderCustomized}}),w.clipPathId="".concat((x=b.id)!==null&&x!==void 0?x:Jf("recharts"),"-clip"),w.throttleTriggeredAfterMouseMove=Fh(w.triggeredAfterMouseMove,(j=b.throttleDelay)!==null&&j!==void 0?j:1e3/60),w.state={},w}return L0e(v,m),T0e(v,[{key:"componentDidMount",value:function(){var b,x;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(b=this.props.margin.left)!==null&&b!==void 0?b:0,top:(x=this.props.margin.top)!==null&&x!==void 0?x:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var b=this.props,x=b.children,j=b.data,w=b.height,_=b.layout,E=In(x,Lr);if(E){var S=E.props.defaultIndex;if(!(typeof S!="number"||S<0||S>this.state.tooltipTicks.length-1)){var C=this.state.tooltipTicks[S]&&this.state.tooltipTicks[S].value,M=Fj(this.state,j,S,C),P=this.state.tooltipTicks[S].coordinate,N=(this.state.offset.top+w)/2,R=_==="horizontal",A=R?{x:P,y:N}:{y:P,x:N},O=this.state.formattedGraphicalItems.find(function(T){var I=T.item;return I.type.name==="Scatter"});O&&(A=oe(oe({},A),O.props.points[S].tooltipPosition),M=O.props.points[S].tooltipPayload);var k={activeTooltipIndex:S,isTooltipActive:!0,activeLabel:C,activePayload:M,activeCoordinate:A};this.setState(k),this.renderCursor(E),this.accessibilityManager.setIndex(S)}}}},{key:"getSnapshotBeforeUpdate",value:function(b,x){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==x.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==b.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==b.margin){var j,w;this.accessibilityManager.setDetails({offset:{left:(j=this.props.margin.left)!==null&&j!==void 0?j:0,top:(w=this.props.margin.top)!==null&&w!==void 0?w:0}})}return null}},{key:"componentDidUpdate",value:function(b){aw([In(b.children,Lr)],[In(this.props.children,Lr)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var b=In(this.props.children,Lr);if(b&&typeof b.props.shared=="boolean"){var x=b.props.shared?"axis":"item";return i.indexOf(x)>=0?x:o}return o}},{key:"getMouseInfo",value:function(b){if(!this.container)return null;var x=this.container,j=x.getBoundingClientRect(),w=Gce(j),_={chartX:Math.round(b.pageX-w.left),chartY:Math.round(b.pageY-w.top)},E=j.width/x.offsetWidth||1,S=this.inRange(_.chartX,_.chartY,E);if(!S)return null;var C=this.state,M=C.xAxisMap,P=C.yAxisMap,N=this.getTooltipEventType();if(N!=="axis"&&M&&P){var R=Zo(M).scale,A=Zo(P).scale,O=R&&R.invert?R.invert(_.chartX):null,k=A&&A.invert?A.invert(_.chartY):null;return oe(oe({},_),{},{xValue:O,yValue:k})}var T=l9(this.state,this.props.data,this.props.layout,S);return T?oe(oe({},_),T):null}},{key:"inRange",value:function(b,x){var j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,w=this.props.layout,_=b/j,E=x/j;if(w==="horizontal"||w==="vertical"){var S=this.state.offset,C=_>=S.left&&_<=S.left+S.width&&E>=S.top&&E<=S.top+S.height;return C?{x:_,y:E}:null}var M=this.state,P=M.angleAxisMap,N=M.radiusAxisMap;if(P&&N){var R=Zo(P);return E8({x:_,y:E},R)}return null}},{key:"parseEventsOfWrapper",value:function(){var b=this.props.children,x=this.getTooltipEventType(),j=In(b,Lr),w={};j&&x==="axis"&&(j.props.trigger==="click"?w={onClick:this.handleClick}:w={onMouseEnter:this.handleMouseEnter,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd});var _=Zf(this.props,this.handleOuterEvent);return oe(oe({},_),w)}},{key:"addListener",value:function(){Tj.on(Rj,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){Tj.removeListener(Rj,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(b,x,j){for(var w=this.state.formattedGraphicalItems,_=0,E=w.length;_<E;_++){var S=w[_];if(S.item===b||S.props.key===b.key||x===_o(S.item.type)&&j===S.childIndex)return S}return null}},{key:"renderClipPath",value:function(){var b=this.clipPathId,x=this.state.offset,j=x.left,w=x.top,_=x.height,E=x.width;return V.createElement("defs",null,V.createElement("clipPath",{id:b},V.createElement("rect",{x:j,y:w,height:_,width:E})))}},{key:"getXScales",value:function(){var b=this.state.xAxisMap;return b?Object.entries(b).reduce(function(x,j){var w=t9(j,2),_=w[0],E=w[1];return oe(oe({},x),{},Re({},_,E.scale))},{}):null}},{key:"getYScales",value:function(){var b=this.state.yAxisMap;return b?Object.entries(b).reduce(function(x,j){var w=t9(j,2),_=w[0],E=w[1];return oe(oe({},x),{},Re({},_,E.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(b){var x;return(x=this.state.xAxisMap)===null||x===void 0||(x=x[b])===null||x===void 0?void 0:x.scale}},{key:"getYScaleByAxisId",value:function(b){var x;return(x=this.state.yAxisMap)===null||x===void 0||(x=x[b])===null||x===void 0?void 0:x.scale}},{key:"getItemByXY",value:function(b){var x=this.state,j=x.formattedGraphicalItems,w=x.activeItem;if(j&&j.length)for(var _=0,E=j.length;_<E;_++){var S=j[_],C=S.props,M=S.item,P=M.type.defaultProps!==void 0?oe(oe({},M.type.defaultProps),M.props):M.props,N=_o(M.type);if(N==="Bar"){var R=(C.data||[]).find(function(T){return Pme(b,T)});if(R)return{graphicalItem:S,payload:R}}else if(N==="RadialBar"){var A=(C.data||[]).find(function(T){return E8(b,T)});if(A)return{graphicalItem:S,payload:A}}else if(rh(S,w)||oh(S,w)||hu(S,w)){var O=vye({graphicalItem:S,activeTooltipItem:w,itemData:P.data}),k=P.activeIndex===void 0?O:P.activeIndex;return{graphicalItem:oe(oe({},S),{},{childIndex:k}),payload:hu(S,w)?P.data[O]:S.props.data[O]}}}return null}},{key:"render",value:function(){var b=this;if(!b5(this))return null;var x=this.props,j=x.children,w=x.className,_=x.width,E=x.height,S=x.style,C=x.compact,M=x.title,P=x.desc,N=n9(x,C0e),R=nt(N,!1);if(C)return V.createElement(gB,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},V.createElement(sw,Is({},R,{width:_,height:E,title:M,desc:P}),this.renderClipPath(),w5(j,this.renderMap)));if(this.props.accessibilityLayer){var A,O;R.tabIndex=(A=this.props.tabIndex)!==null&&A!==void 0?A:0,R.role=(O=this.props.role)!==null&&O!==void 0?O:"application",R.onKeyDown=function(T){b.accessibilityManager.keyboardEvent(T)},R.onFocus=function(){b.accessibilityManager.focus()}}var k=this.parseEventsOfWrapper();return V.createElement(gB,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},V.createElement("div",Is({className:st("recharts-wrapper",w),style:oe({position:"relative",cursor:"default",width:_,height:E},S)},k,{ref:function(T){b.container=T}}),V.createElement(sw,Is({},R,{width:_,height:E,title:M,desc:P,style:U0e}),this.renderClipPath(),w5(j,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(g.Component);Re(p,"displayName",t),Re(p,"defaultProps",oe({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},u)),Re(p,"getDerivedStateFromProps",function(m,v){var b=m.dataKey,x=m.data,j=m.children,w=m.width,_=m.height,E=m.layout,S=m.stackOffset,C=m.margin,M=v.dataStartIndex,P=v.dataEndIndex;if(v.updateId===void 0){var N=u9(m);return oe(oe(oe({},N),{},{updateId:0},f(oe(oe({props:m},N),{},{updateId:0}),v)),{},{prevDataKey:b,prevData:x,prevWidth:w,prevHeight:_,prevLayout:E,prevStackOffset:S,prevMargin:C,prevChildren:j})}if(b!==v.prevDataKey||x!==v.prevData||w!==v.prevWidth||_!==v.prevHeight||E!==v.prevLayout||S!==v.prevStackOffset||!rs(C,v.prevMargin)){var R=u9(m),A={chartX:v.chartX,chartY:v.chartY,isTooltipActive:v.isTooltipActive},O=oe(oe({},l9(v,x,E)),{},{updateId:v.updateId+1}),k=oe(oe(oe({},R),A),O);return oe(oe(oe({},k),f(oe({props:m},k),v)),{},{prevDataKey:b,prevData:x,prevWidth:w,prevHeight:_,prevLayout:E,prevStackOffset:S,prevMargin:C,prevChildren:j})}if(!aw(j,v.prevChildren)){var T,I,L,D,z=In(j,js),H=z&&(T=(I=z.props)===null||I===void 0?void 0:I.startIndex)!==null&&T!==void 0?T:M,F=z&&(L=(D=z.props)===null||D===void 0?void 0:D.endIndex)!==null&&L!==void 0?L:P,U=H!==M||F!==P,Y=!rt(x),G=Y&&!U?v.updateId:v.updateId+1;return oe(oe({updateId:G},f(oe(oe({props:m},v),{},{updateId:G,dataStartIndex:H,dataEndIndex:F}),v)),{},{prevChildren:j,dataStartIndex:H,dataEndIndex:F})}return null}),Re(p,"renderActiveDot",function(m,v,b){var x;return g.isValidElement(m)?x=g.cloneElement(m,v):We(m)?x=m(v):x=V.createElement(bF,v),V.createElement(Ut,{className:"recharts-active-dot",key:b},x)});var y=g.forwardRef(function(m,v){return V.createElement(p,Is({},m,{ref:v}))});return y.displayName=p.displayName,y},ebe=Z0e({chartName:"BarChart",GraphicalChild:Ya,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:wh},{axisType:"yAxis",AxisComp:Pj}],formatAxisMap:pge});const tbe={light:"",dark:".dark"},f9=g.createContext(null);function p9(){const e=g.useContext(f9);if(!e)throw new Error("useChart must be used within a <ChartContainer />");return e}const h9=g.forwardRef(({id:e,className:t,children:n,config:r,...o},a)=>{const i=g.useId(),s=`chart-${e||i.replace(/:/g,"")}`;return h.jsx(f9.Provider,{value:{config:r},children:h.jsxs("div",{"data-chart":s,ref:a,className:J("flex aspect-video justify-center text-xs",t),...o,children:[h.jsx(nbe,{id:s,config:r}),h.jsx(Uce,{children:n})]})})});h9.displayName="Chart";const nbe=({id:e,config:t})=>{const n=Object.entries(t).filter(([r,o])=>o.theme||o.color);return n.length?h.jsx("style",{dangerouslySetInnerHTML:{__html:Object.entries(tbe).map(([r,o])=>`
${o} [data-chart=${e}] {
${n.map(([a,i])=>{var c;const s=((c=i.theme)==null?void 0:c[r])||i.color;return s?`  --color-${a}: ${s};`:null}).join(`
`)}
}
`).join(`
`)}}):null},rbe=Lr,m9=g.forwardRef(({active:e,payload:t,className:n,indicator:r="dot",hideLabel:o=!1,hideIndicator:a=!1,label:i,labelFormatter:s,labelClassName:c,formatter:l,color:u,nameKey:d,labelKey:f},p)=>{const{config:y}=p9(),m=g.useMemo(()=>{var _;if(o||!(t!=null&&t.length))return null;const[b]=t,x=`${f||b.dataKey||b.name||"value"}`,j=Bj(y,b,x),w=!f&&typeof i=="string"?((_=y[i])==null?void 0:_.label)||i:j==null?void 0:j.label;return s?h.jsx("div",{className:J("font-medium",c),children:s(w,t)}):w?h.jsx("div",{className:J("font-medium",c),children:w}):null},[i,s,t,o,c,y,f]);if(!e||!(t!=null&&t.length))return null;const v=t.length===1&&r!=="dot";return h.jsxs("div",{ref:p,className:J("grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl",n),children:[v?null:m,h.jsx("div",{className:"grid gap-1.5",children:t.map((b,x)=>{const j=`${d||b.name||b.dataKey||"value"}`,w=Bj(y,b,j),_=u||b.payload.fill||b.color;return h.jsx("div",{className:J("flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground",r==="dot"&&"items-center"),children:l&&(b==null?void 0:b.value)!==void 0&&b.name?l(b.value,b.name,b,x,b.payload):h.jsxs(h.Fragment,{children:[w!=null&&w.icon?h.jsx(w.icon,{}):!a&&h.jsx("div",{className:J("shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]",{"h-2.5 w-2.5":r==="dot","w-1":r==="line","w-0 border-[1.5px] border-dashed bg-transparent":r==="dashed","my-0.5":v&&r==="dashed"}),style:{"--color-bg":_,"--color-border":_}}),h.jsxs("div",{className:J("flex flex-1 justify-between leading-none",v?"items-end":"items-center"),children:[h.jsxs("div",{className:"grid gap-1.5",children:[v?m:null,h.jsx("span",{className:"text-muted-foreground",children:(w==null?void 0:w.label)||b.name})]}),b.value&&h.jsx("span",{className:"font-mono font-medium tabular-nums text-foreground",children:b.value.toLocaleString()})]})]})},b.dataKey)})})]})});m9.displayName="ChartTooltip";const obe=g.forwardRef(({className:e,hideIcon:t=!1,payload:n,verticalAlign:r="bottom",nameKey:o},a)=>{const{config:i}=p9();return n!=null&&n.length?h.jsx("div",{ref:a,className:J("flex items-center justify-center gap-4",r==="top"?"pb-3":"pt-3",e),children:n.map(s=>{const c=`${o||s.dataKey||"value"}`,l=Bj(i,s,c);return h.jsxs("div",{className:J("flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground"),children:[l!=null&&l.icon&&!t?h.jsx(l.icon,{}):h.jsx("div",{className:"h-2 w-2 shrink-0 rounded-[2px]",style:{backgroundColor:s.color}}),l==null?void 0:l.label]},s.value)})}):null});obe.displayName="ChartLegend";function Bj(e,t,n){if(typeof t!="object"||t===null)return;const r="payload"in t&&typeof t.payload=="object"&&t.payload!==null?t.payload:void 0;let o=n;return n in t&&typeof t[n]=="string"?o=t[n]:r&&n in r&&typeof r[n]=="string"&&(o=r[n]),o in e?e[o]:e[n]}const y9=e=>{const t=["Bytes","KB","MB","GB","TB"];if(e===void 0)return"Unknown size";if(e===0)return"0 Byte";const n=Math.floor(Math.log(e)/Math.log(1024));return`${Math.round(e/Math.pow(1024,n))} ${t[n]}`},abe=g.memo(()=>{const{t:e}=Ae("flows"),[t,n]=g.useState(),r=Zn(y=>y.cachedLLMURLs),o=pt(y=>y.currentSession),[a,i]=g.useState(),[s,c]=g.useState(""),[l,u]=g.useState(),d=g.useMemo(()=>({nodes:{label:e("session_info_node.entities.nodes"),color:"#2563eb"},edges:{label:e("session_info_node.entities.edges"),color:"#34d399"},threads:{label:e("session_info_node.entities.threads"),color:"#fbbf24"},llms:{label:e("session_info_node.entities.llms"),color:"#f87171"},prompts:{label:e("session_info_node.entities.prompts"),color:"#a78bfa"},tools:{label:e("session_info_node.entities.tools"),color:"#ffcccb"},schemas:{label:e("session_info_node.entities.schemas"),color:"#ffb6c1"},vectorDatabases:{label:e("session_info_node.entities.vector_databases"),color:"#ff69b4"},jsonlDatas:{label:e("session_info_node.entities.jsonl_data"),color:"#ff1493"},csvDatas:{label:e("session_info_node.entities.csv_data"),color:"#db7093"}}),[e]);g.useEffect(()=>{Zt(async()=>{const{functionCallingModelIds:y,prebuiltAppConfig:m}=await import("./index-D7zprebX.js").then(async v=>(await v.__tla,v));return{functionCallingModelIds:y,prebuiltAppConfig:m}},__vite__mapDeps([7,1,2,3,4,5,6])).then(({functionCallingModelIds:y,prebuiltAppConfig:m})=>{n(r==null?void 0:r.map(v=>{const b=m.model_list.find(x=>v.includes(x.model));if(b)return{model_id:(b==null?void 0:b.model_id)||"",info:b,isFunctionCalling:y.includes((b==null?void 0:b.model_id)||"")}}))})},[r,o==null?void 0:o.id]);const f=g.useCallback(async()=>{navigator.storage.estimate().then(y=>{y&&c(e("session_info_node.used_bytes",{used:y9(y.usage),total:y9(y==null?void 0:y.quota)}))}),o!=null&&o.id&&(Promise.all([ue("FlowNode").findOne({where:{session_id:o==null?void 0:o.id},order:{updated_at:"DESC"}}),ue("FlowEdge").findOne({where:{session_id:o==null?void 0:o.id},order:{updated_at:"DESC"}}),ue("Thread").findOne({where:{session_id:o==null?void 0:o.id},order:{updated_at:"DESC"}}),ue("Prompt").findOne({where:{session_id:o==null?void 0:o.id},order:{updated_at:"DESC"}}),ue("LLM").findOne({where:{session_id:o==null?void 0:o.id},order:{updated_at:"DESC"}}),ue("Schema").findOne({where:{session_id:o==null?void 0:o.id},order:{updated_at:"DESC"}}),ue("ToolDefinition").findOne({where:{session_id:o==null?void 0:o.id},order:{updated_at:"DESC"}}),ue("VectorDatabase").findOne({where:{session_id:o==null?void 0:o.id},order:{updated_at:"DESC"}}),ue("JSONLData").findOne({where:{session_id:o==null?void 0:o.id},order:{updated_at:"DESC"}}),ue("CSVData").findOne({where:{session_id:o==null?void 0:o.id},order:{updated_at:"DESC"}})]).then(y=>{const m=y.reduce((v,b)=>b!=null&&b.updated_at&&(!v||new Date(b.updated_at)>v)?new Date(b.updated_at):v,o.updated_at?new Date(o.updated_at):void 0);i(m)}),Promise.all([ue("FlowNode").count({where:{session_id:o==null?void 0:o.id}}),ue("FlowEdge").count({where:{session_id:o==null?void 0:o.id}}),ue("Thread").count({where:{session_id:o==null?void 0:o.id}}),ue("Prompt").count({where:{session_id:o==null?void 0:o.id}}),ue("LLM").count({where:{session_id:o==null?void 0:o.id}}),ue("ToolDefinition").count({where:{session_id:o==null?void 0:o.id}}),ue("Schema").count({where:{session_id:o==null?void 0:o.id}}),ue("VectorDatabase").count({where:{session_id:o==null?void 0:o.id}}),ue("JSONLData").count({where:{session_id:o==null?void 0:o.id}}),ue("CSVData").count({where:{session_id:o==null?void 0:o.id}})]).then(([y,m,v,b,x,j,w,_,E,S])=>{u([{name:e("session_info_node.count_info.title"),nodes:y||0,edges:m||0,threads:v||0,prompts:b||0,llms:x||0,tools:j||0,schemas:w||0,vectorDatabases:_||0,jsonlDatas:E||0,csvDatas:S||0}])}))},[o==null?void 0:o.id,o==null?void 0:o.updated_at,e]),p=g.useCallback(()=>{f()},[f]);return g.useEffect(()=>{f()},[f]),h.jsxs(Ft,{className:"w-96",children:[h.jsxs(fn,{children:[h.jsx(wn,{children:e("session_info_node.title")}),h.jsx(u3,{children:a||o!=null&&o.updated_at?lwe(a||(o==null?void 0:o.updated_at)).fromNow():""})]}),h.jsxs(pn,{className:"grid gap-4",children:[h.jsx("div",{className:"flex items-center space-x-4 rounded-md border p-4",children:h.jsxs("div",{className:"flex-1 space-y-1",children:[h.jsx("p",{className:"text-sm font-medium leading-none",children:e("session_info_node.disk_size")}),h.jsx("p",{className:"text-sm text-muted-foreground",children:s})]})}),h.jsx("div",{className:"flex items-center space-x-4 rounded-md border p-4",children:h.jsxs("div",{className:"flex-1 space-y-1",children:[h.jsxs("div",{className:"text-sm font-medium leading-none",children:[e("session_info_node.cached_llms"),h.jsx(cn,{className:"ml-2",children:(t==null?void 0:t.length)||0})]}),t==null?void 0:t.map(y=>h.jsxs("div",{className:"text-sm text-muted-foreground gap-1",children:[y==null?void 0:y.model_id,h.jsx("div",{className:"max-w-full gap-1 flex flex-wrap mt-1",children:h.jsx(gl,{model:y==null?void 0:y.info,isFunctionCalling:(y==null?void 0:y.isFunctionCalling)||!1,isCached:!0})})]},y==null?void 0:y.model_id))]})}),h.jsx("div",{children:h.jsx(h9,{config:d,className:"min-h-28 w-full",children:h.jsxs(ebe,{accessibilityLayer:!0,data:l,children:[h.jsx(VB,{vertical:!1}),h.jsx(wh,{dataKey:"name",tickLine:!1,tickMargin:10,axisLine:!1}),h.jsx(rbe,{content:h.jsx(m9,{})}),Object.entries(d).map(([y,m])=>h.jsx(Ya,{dataKey:y,fill:m.color,radius:4},y))]})})})]}),h.jsx(Ko,{children:h.jsxs(ut,{className:"w-full",onClick:p,children:[h.jsx(de,{size:24,name:"refresh-ccw"}),e("session_info_node.reload")]})})]})}),ibe=e=>{const t=(n,r=null)=>{let o=`{
`;return n.filter(a=>a.parent_id===r).forEach(a=>{if(a.type==="object"){const i=e.filter(c=>c.parent_id===a.id),s=t(i,a.id);o+=`  ${a.name}${a.required?"":"?"}: ${s}
`}else o+=`  // ${a.description||""}
  ${a.name}${a.required?"":"?"}: ${a.type};
`}),o+="}",o};return t(e)},sbe=e=>{const t=(r,o=null)=>{let a="";return r.filter(i=>i.parent_id===o).forEach(i=>{if(i.type==="object"){const s=t(r,i.id);a+=`    ${i.name}: z.object({
${s}    })${i.required?"":".optional()"}.describe('${i.description||""}'),
`}else a+=`    ${i.name}: z.${i.type}()${i.required?"":".optional()"}.describe('${i.description||""}'),
`}),a};let n=`const schema = z.object({
`;return n+=t(e),n+="});",n};var $j="Tabs",[cbe,Awe]=Fn($j,[qr]),g9=qr(),[lbe,zj]=cbe($j),v9=g.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:o,defaultValue:a,orientation:i="horizontal",dir:s,activationMode:c="automatic",...l}=e,u=Io(s),[d,f]=Jt({prop:r,onChange:o,defaultProp:a});return h.jsx(lbe,{scope:n,baseId:ht(),value:d,onValueChange:f,orientation:i,dir:u,activationMode:c,children:h.jsx(Oe.div,{dir:u,"data-orientation":i,...l,ref:t})})});v9.displayName=$j;var b9="TabsList",x9=g.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...o}=e,a=zj(b9,n),i=g9(n);return h.jsx(Ks,{asChild:!0,...i,orientation:a.orientation,dir:a.dir,loop:r,children:h.jsx(Oe.div,{role:"tablist","aria-orientation":a.orientation,...o,ref:t})})});x9.displayName=b9;var w9="TabsTrigger",_9=g.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:o=!1,...a}=e,i=zj(w9,n),s=g9(n),c=S9(i.baseId,r),l=C9(i.baseId,r),u=r===i.value;return h.jsx(Xs,{asChild:!0,...s,focusable:!o,active:u,children:h.jsx(Oe.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":l,"data-state":u?"active":"inactive","data-disabled":o?"":void 0,disabled:o,id:c,...a,ref:t,onMouseDown:he(e.onMouseDown,d=>{!o&&d.button===0&&d.ctrlKey===!1?i.onValueChange(r):d.preventDefault()}),onKeyDown:he(e.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&i.onValueChange(r)}),onFocus:he(e.onFocus,()=>{const d=i.activationMode!=="manual";!u&&!o&&d&&i.onValueChange(r)})})})});_9.displayName=w9;var j9="TabsContent",E9=g.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:o,children:a,...i}=e,s=zj(j9,n),c=S9(s.baseId,r),l=C9(s.baseId,r),u=r===s.value,d=g.useRef(u);return g.useEffect(()=>{const f=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(f)},[]),h.jsx(Cn,{present:o||u,children:({present:f})=>h.jsx(Oe.div,{"data-state":u?"active":"inactive","data-orientation":s.orientation,role:"tabpanel","aria-labelledby":c,hidden:!f,id:l,tabIndex:0,...i,ref:t,style:{...e.style,animationDuration:d.current?"0s":void 0},children:f&&a})})});E9.displayName=j9;function S9(e,t){return`${e}-trigger-${t}`}function C9(e,t){return`${e}-content-${t}`}var ube=v9,O9=x9,M9=_9,N9=E9;const P9=ube,Vj=g.forwardRef(({className:e,...t},n)=>h.jsx(O9,{ref:n,className:J("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));Vj.displayName=O9.displayName;const Ls=g.forwardRef(({className:e,...t},n)=>h.jsx(M9,{ref:n,className:J("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));Ls.displayName=M9.displayName;const Fs=g.forwardRef(({className:e,...t},n)=>h.jsx(N9,{ref:n,className:J("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));Fs.displayName=N9.displayName;const dbe=e=>{const t=g.useCallback(async({edgeId:n})=>{try{return{deleteEdgeId:n}}catch{return{deleteEdgeId:n}}},[]);vn(e,t)},fbe=g.memo(e=>{var c,l;const{t}=Ae("flows"),{id:n,data:r,isConnectable:o}=e,a=g.useRef(!1),i=qt(n),s=ke(u=>u.updateNodes);return dbe(n),g.useEffect(()=>{var d;const u=r==null?void 0:r.entity;!u||!i||a.current||(d=u==null?void 0:u.schema_items)!=null&&d.length||r.loaded||(a.current=!0,ue("SchemaItem").find({where:{schema_id:u.id}}).then(f=>{s([{id:i.id,type:"replace",item:{...i,data:{...(i==null?void 0:i.data)||{},loaded:!0,entity:{...r.entity,schema_items:f}}}}])}).finally(()=>{a.current=!1}))},[r.entity,r.loaded,i,s]),h.jsxs("div",{children:[h.jsxs("div",{children:[h.jsx(en,{id:n}),h.jsxs(P9,{defaultValue:"account",className:"w-[400px]",children:[h.jsxs(Vj,{className:"grid w-full grid-cols-2",children:[h.jsx(Ls,{value:"account",children:t("schema_node.typescript")}),h.jsx(Ls,{value:"password",children:t("schema_node.zod")})]}),h.jsx(Fs,{value:"account",children:h.jsx(Ft,{className:"p-4",children:h.jsx("pre",{children:ibe(((c=r==null?void 0:r.entity)==null?void 0:c.schema_items)||[])})})}),h.jsx(Fs,{value:"password",children:h.jsx(Ft,{className:"p-4",children:h.jsx("pre",{children:sbe(((l=r==null?void 0:r.entity)==null?void 0:l.schema_items)||[])})})})]})]}),h.jsx(Je,{type:"source",position:fe.Bottom,id:"a",isConnectable:o})]})}),k9=({className:e,...t})=>h.jsx("nav",{role:"navigation","aria-label":"pagination",className:J("mx-auto flex w-full justify-center",e),...t});k9.displayName="Pagination";const A9=g.forwardRef(({className:e,...t},n)=>h.jsx("ul",{ref:n,className:J("flex flex-row items-center gap-1",e),...t}));A9.displayName="PaginationContent";const Bs=g.forwardRef(({className:e,...t},n)=>h.jsx("li",{ref:n,className:J("",e),...t}));Bs.displayName="PaginationItem";const Oh=({className:e,isActive:t,size:n="icon",...r})=>h.jsx("a",{"aria-current":t?"page":void 0,className:J(fc({variant:t?"outline":"ghost",size:n}),e),...r});Oh.displayName="PaginationLink";const T9=({className:e,...t})=>{const{t:n}=Ae("atoms");return h.jsxs(Oh,{"aria-label":"Go to previous page",size:"default",className:J("gap-1 pl-2.5",e),...t,children:[h.jsx(de,{name:"chevron-left",className:"h-4 w-4"}),h.jsx("span",{children:n("pagination.previous")})]})};T9.displayName="PaginationPrevious";const R9=({className:e,...t})=>{const{t:n}=Ae("atoms");return h.jsxs(Oh,{"aria-label":"Go to next page",size:"default",className:J("gap-1 pr-2.5",e),...t,children:[h.jsx("span",{children:n("pagination.next")}),h.jsx(de,{name:"chevron-right",className:"h-4 w-4"})]})};R9.displayName="PaginationNext";const Uj=({className:e,...t})=>{const{t:n}=Ae("atoms");return h.jsxs("span",{"aria-hidden":!0,className:J("flex h-9 w-9 items-center justify-center",e),...t,children:[h.jsx(de,{name:"ellipsis",className:"h-4 w-4"}),h.jsx("span",{className:"sr-only",children:n("pagination.more_pages")})]})};Uj.displayName="PaginationEllipsis";const I9=g.memo(e=>{const{data:t,headers:n,limitLengthByColumns:r,showPerPage:o=7,paginationShowLimit:a=1,contentLengthLimit:i=64}=e,[s,c]=g.useState({page:1,maxPage:1}),l=On(i5);g.useEffect(()=>{c(p=>({...p,maxPage:Math.ceil(t.length/o)}))},[t.length,o]);const u=g.useMemo(()=>t.slice((s.page-1)*o,s.page*o),[t,s.page,o]),d=g.useMemo(()=>{let p=!1,y=!1;return h.jsx(k9,{className:"mt-4 mb-4 ml-4 mr-4 w-full",children:h.jsxs(A9,{children:[s.page>1?h.jsx(Bs,{onClick:()=>c(m=>({...m,page:m.page-1})),children:h.jsx(T9,{})}):null,Array.from({length:s.maxPage},(m,v)=>{const b=v+1,x=v===0||v===s.maxPage-1;return!x&&b>s.page+a&&y?null:!x&&b>s.page+a?(y=!0,h.jsx(Bs,{children:h.jsx(Uj,{})},v)):!x&&b<s.page-a&&p?null:!x&&b<s.page-a?(p=!0,h.jsx(Bs,{children:h.jsx(Uj,{})},v)):h.jsx(Bs,{onClick:()=>c(j=>({...j,page:b})),children:h.jsx(Oh,{isActive:v+1===s.page,children:v+1})},v)}),s.page<s.maxPage?h.jsx(Bs,{onClick:()=>c(m=>({...m,page:m.page+1})),children:h.jsx(R9,{})}):null]})})},[s.maxPage,s.page,a]),f=(p,y)=>{if(!p)return;const m=Array.isArray(p)?p:n.map(v=>p[v]);return h.jsxs(Ra,{children:[h.jsx(es,{children:h.jsx("div",{className:"font-bold",children:y+1})}),m.map((v,b)=>{const x=typeof v=="string"?v:JSON.stringify(v),j=n[b],w=(r==null?void 0:r[j])||i,_=x.length>w;return h.jsx(es,{className:"p-4",children:h.jsxs("div",{onClick:_?()=>l.show({title:j,content:x}):void 0,className:"flex gap-4",children:[_?`${x.substring(0,w)}...`:x,_?h.jsx(de,{className:"w-6 mt-[-2px]",name:"chevron-right"}):null]})},`${b}`)})]},`${y}`)};return h.jsxs(h.Fragment,{children:[h.jsxs(Yf,{className:"w-full",children:[h.jsx(Kf,{children:h.jsxs(Ra,{children:[h.jsx(Zi,{},"index"),n?n.map(p=>h.jsx(Zi,{children:h.jsx("div",{className:"font-bold",children:p})},p)):void 0]})}),h.jsx(Xf,{children:u!=null&&u.length?u==null?void 0:u.map(f):void 0})]}),d]})}),pbe=g.memo(e=>{var a,i;const{id:t,data:n,isConnectable:r}=e,o=g.useMemo(()=>{if(!(n!=null&&n.entity))return{headers:[],rows:[]};const s=p$(n.entity.csv);return{headers:iE(n.entity.headers),rows:s.map(c=>iE(c))}},[n==null?void 0:n.entity]);return h.jsxs("div",{children:[h.jsx(Je,{type:"target",position:fe.Top,isConnectable:r}),h.jsxs("div",{children:[h.jsx(en,{id:t}),h.jsxs(Ft,{className:"min-w-32 min-h-16 p-4",children:[h.jsx(fn,{className:"!p-0",children:h.jsxs("div",{className:"pt-2 flex !flex-row",children:[h.jsx(de,{name:"file-spreadsheet",className:"mr-2"}),h.jsxs(Ge,{className:"!font-medium leading-none tracking-tight pr-8",children:[ae.CSVData," ",(a=o==null?void 0:o.rows)!=null&&a.length?`(${((i=o==null?void 0:o.rows)==null?void 0:i.length)||0})`:""]})]})}),h.jsx(pn,{className:"pb-0",children:h.jsx(I9,{data:o.rows,headers:o.headers})})]})]}),h.jsx(Je,{type:"source",position:fe.Bottom,id:"a",isConnectable:r})]})}),hbe=e=>{const t=ke(r=>r.createOrUpdateFlowEdge),n=g.useCallback(async({edgeId:r,source:o,target:a,connection:i})=>{try{if((o==null?void 0:o.type)===ae.Schema&&(a==null?void 0:a.type)===ae.ToolDefinition){await t({source:i.source,target:i.target,sourceHandle:i.sourceHandle,targetHandle:i.targetHandle});return}return{deleteEdgeId:r}}catch{return{deleteEdgeId:r}}},[t]);vn(e,n)},mbe=g.memo(({id:e,data:t,isConnectable:n})=>{var r,o;return hbe(e),h.jsxs("div",{children:[h.jsx(Je,{type:"target",position:fe.Top,isConnectable:n}),h.jsx("div",{children:h.jsxs(Tr,{className:"flex justify-center",children:[h.jsx(de,{size:24,name:"wrench"}),h.jsxs("div",{className:"ml-2",children:[h.jsx(Rr,{children:`${((r=t.entity)==null?void 0:r.name)||""}`}),h.jsx(Xi,{children:`${((o=t.entity)==null?void 0:o.description)||""}`})]})]})}),h.jsx(Je,{type:"source",position:fe.Bottom,id:"a",isConnectable:n})]})}),ybe=e=>{const t=g.useCallback(async({edgeId:n})=>({deleteEdgeId:n}),[]);vn(e,t)},gbe=g.memo(e=>{const{id:t,data:n,isConnectable:r}=e;return ybe(t),h.jsxs("div",{children:[h.jsx(Je,{type:"target",position:fe.Top,isConnectable:r}),h.jsx("div",{children:h.jsxs(Tr,{className:"flex justify-center max-w-80",variant:"default",children:[h.jsx(Na,{name:n.model||"brain",className:"w-7 h-7"}),h.jsx("div",{className:"ml-2 pr-4 flex items-center",children:h.jsx(Rr,{children:`${n.model||""}`})})]})}),h.jsx(Je,{type:"source",position:fe.Bottom,id:"a",isConnectable:r})]})});class vbe{async loadAndSplit(t){if(t===void 0)throw new Error("You must pass a text splitter to use this method.");const n=await this.load();return t.invoke(n)}}class bbe extends vbe{constructor(t,{splitPages:n=!0,pdfjs:r=xbe,parsedItemSeparator:o=""}={}){super(),Object.defineProperty(this,"blob",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"splitPages",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"pdfjs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"parsedItemSeparator",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.blob=t,this.splitPages=n??this.splitPages,this.pdfjs=r,this.parsedItemSeparator=o}async load(){const{getDocument:t,version:n}=await this.pdfjs(),r=await t({data:new Uint8Array(await this.blob.arrayBuffer()),useWorkerFetch:!1,isEvalSupported:!1,useSystemFonts:!0}).promise,o=await r.getMetadata().catch(()=>null),a=[];for(let i=1;i<=r.numPages;i+=1){const s=await(await r.getPage(i)).getTextContent();if(s.items.length===0)continue;let c;const l=[];for(const d of s.items)"str"in d&&(c===d.transform[5]||!c?l.push(d.str):l.push(`
${d.str}`),c=d.transform[5]);const u=l.join(this.parsedItemSeparator);a.push(new Ih({pageContent:u,metadata:{pdf:{version:n,info:o==null?void 0:o.info,metadata:o==null?void 0:o.metadata,totalPages:r.numPages},loc:{pageNumber:i}}}))}return this.splitPages?a:a.length===0?[]:[new Ih({pageContent:a.map(i=>i.pageContent).join(`

`),metadata:{pdf:{version:n,info:o==null?void 0:o.info,metadata:o==null?void 0:o.metadata,totalPages:r.numPages}}})]}}async function xbe(){try{const{default:e}=await Zt(async()=>{const{default:r}=await import("./pdf-xbqmmcSf.js").then(async o=>(await o.__tla,o)).then(o=>o.p);return{default:r}},__vite__mapDeps([12,1,2])),{getDocument:t,version:n}=e;return{getDocument:t,version:n}}catch(e){throw console.error(e),new Error("Failed to load pdf-parse. Please install it with eg. `npm install pdf-parse`.")}}const wbe=`Use the following pieces of context to answer the question at the end.
If you don't know the answer, just say that you don't know, don't try to make up an answer.
Use three sentences maximum and keep the answer as concise as possible.

{context}
`,_be=Us(e=>{const{source:t,documents:n}=e,r=On(),{toast:o}=on(),{t:a}=Ae("dialogs"),{loading:i,createPrompt:s}=_D(),c=async l=>{try{if(!l.content||!l.content.includes("{context}")){o({title:a("create_vector_database_prompt.errors.fill_context"),variant:"destructive"});return}const u=l.content.replace("{context}",n.map(d=>`<document>${d.pageContent}</document>`).join(`
`));return await s(t,{...l,content:u}),r.hide(),!0}catch{o({title:a("create_vector_database_prompt.errors.create_failed"),variant:"destructive"})}};return h.jsx(Sc,{open:r.visible,onOpenChange:r.hide,children:h.jsxs(xi,{className:"sm:max-w-[425px]",children:[h.jsx(wi,{children:h.jsxs("div",{className:"flex",children:[h.jsx(de,{name:"file",className:"mr-2 h-4 w-4"}),h.jsx(_i,{children:a("create_vector_database_prompt.title")})]})}),h.jsxs("div",{className:"flex gap-4 py-4 flex-col",children:[h.jsx(Ix,{onSubmit:c,loading:i,hidePromptType:!0,defaultPromptRole:"system",defaultPromptContent:wbe}),h.jsxs("div",{className:"w-full border-0 text-gray-700 flex text-sm items-center",children:[h.jsx(de,{name:"info",className:"mr-2",size:14}),a("create_vector_database_prompt.fill_content_note")]})]})]})})}),jbe=()=>{const e=pt(i=>{var s;return(s=i.currentSession)==null?void 0:s.id}),[t,n]=g.useState(!1),r=ke(i=>i.createOrUpdateFlowNode),o=ke(i=>i.createOrUpdateFlowEdge),a=g.useCallback(async({prompt:i,source:s,metadata:c})=>{var l,u,d,f;try{const p=(l=s==null?void 0:s.data)==null?void 0:l.entity;if(!p||!e)throw new Error("Source or Session not found");n(!0);const y=((u=s.position)==null?void 0:u.x)||0,m=(((d=s.position)==null?void 0:d.y)||0)+(((f=s.measured)==null?void 0:f.height)||0),v=await ue("Prompt").save({...i,status:(i==null?void 0:i.status)||Yr.Started,role:(i==null?void 0:i.role)||Mn.System,type:(i==null?void 0:i.type)||Nn.Chat,content:(i==null?void 0:i.content)||"{context}",session_id:e});if(!v)throw new Error("Failed to save prompt");const b=await r({source_id:v.id,source_type:"Prompt",node_type:ae.Prompt,x:y,y:m+20});if(!b)throw new Error("Failed to save prompt node");const x=await ue("FlowNodePlaceholder").save({placeholder:`Retriever for ${p.name}`,placeholder_type:ii.VECTOR_DATABASE_RETREIVER,session_id:e,metadata:c});if(!x)throw new Error("Failed to save node placeholder");const j=await r({source_id:x.id,source_type:"FlowNodePlaceholder",node_type:ae.PlaceHolder,x:y,y:m+40});if(!j)throw new Error("Failed to save node placeholder node");await o({source:b.id,target:j.id}),await o({source:s.id,target:j.id})}finally{n(!1)}},[e,r,o]);return{loading:t,createVectorDatabaseRetriever:a}},Ebe=`Use the following pieces of context to answer the question at the end.
If you don't know the answer, just say that you don't know, don't try to make up an answer.
----------------
{context}
`,Sbe=Us(e=>{const{source:t}=e,n=On(),{toast:r}=on(),{t:o}=Ae("dialogs"),[a,i]=g.useState(1),[s,c]=g.useState(void 0),{loading:l,createVectorDatabaseRetriever:u}=jbe(),d=async y=>{try{const m=y.content;if(!m||!m.includes("{context}")){r({title:o("create_vector_database_retriever.errors.fill_context"),variant:"destructive"});return}return await u({source:t,prompt:{content:m},metadata:{k:a,minimalScore:s}}),n.hide(),!0}catch{r({title:o("create_vector_database_retriever.errors.create_failed"),variant:"destructive"})}},f=y=>{i(y.target.value?Number(y.target.value):void 0)},p=y=>{c(y.target.value?Number(y.target.value):void 0)};return h.jsx(Sc,{open:n.visible,onOpenChange:n.hide,children:h.jsxs(xi,{className:"sm:max-w-[425px]",children:[h.jsx(wi,{children:h.jsxs("div",{className:"flex",children:[h.jsx(de,{name:"file",className:"mr-2 h-4 w-4"}),h.jsx(_i,{children:o("create_vector_database_retriever.title")})]})}),h.jsxs("div",{className:"flex gap-4 py-4 flex-col",children:[h.jsx(Ix,{onSubmit:d,loading:l,hidePromptType:!0,defaultPromptRole:"system",defaultPromptContent:Ebe}),h.jsxs(Ft,{children:[h.jsx(fn,{children:h.jsx(wn,{children:o("create_vector_database_retriever.retriever_settings")})}),h.jsxs(pn,{children:[h.jsx(Ge,{children:o("create_vector_database_retriever.retriever_k")}),h.jsx(sn,{value:a||"",type:"number",onChange:f,placeholder:o("create_vector_database_retriever.retriever_k_placeholder")}),h.jsx(Ge,{children:o("create_vector_database_retriever.retriever_minimum_score")}),h.jsx(sn,{value:s||"",type:"number",onChange:p,placeholder:o("create_vector_database_retriever.retriever_minimum_score_placeholder")})]})]}),h.jsxs("div",{className:"w-full border-0 text-gray-700 flex text-sm items-center",children:[h.jsx(de,{name:"info",className:"mr-2",size:14}),o("create_vector_database_retriever.fill_content_note")]})]})]})})}),Cbe=e=>{const t=ke(o=>o.createOrUpdateFlowEdge),n=Au(o=>o.index),r=g.useCallback(async({edgeId:o,target:a,source:i})=>{var s,c;try{const l=(s=a==null?void 0:a.data)==null?void 0:s.entity;if((i==null?void 0:i.type)===ae.CSVData&&(a==null?void 0:a.type)===ae.VectorDatabase){const u=(c=i==null?void 0:i.data)==null?void 0:c.entity;if(!u||!l)return{deleteEdgeId:o};const{rows:d}=f$(u.headers,u.csv),f=d.map(p=>new Ih({pageContent:`${p.text}`}));await n({databaseId:l.id,dataSourceId:u.id,dataSourceType:"CSVData"},f),await t({source:i.id,target:a.id});return}return{deleteEdgeId:o}}catch{return{deleteEdgeId:o}}},[t,n]);vn(e,r)};var Hj,D9;function Obe(){if(D9)return Hj;D9=1;var e=Rm(),t=ei(),n=lB(),r=Math.ceil,o=Math.max;function a(i,s,c){(c?t(i,s,c):s===void 0)?s=1:s=o(n(s),0);var l=i==null?0:i.length;if(!l||s<1)return[];for(var u=0,d=0,f=Array(r(l/s));u<l;)f[d++]=e(i,u,u+=s);return f}return Hj=a,Hj}var Mbe=Obe();const Nbe=Xe(Mbe),Pbe=e=>{var p,y;const[t,n]=g.useState(!1),{t:r}=Ae("flows"),{toast:o}=on(),a=qt(e),{getNode:i,getHandleConnections:s}=Un(),c=ke(m=>m.updateNodes),l=Au(m=>m.index),u=Au(m=>m.similaritySearchWithScore),d=g.useCallback(async(m,v)=>{var b,x,j;try{const w=(b=a==null?void 0:a.data)==null?void 0:b.entity;if(!w){o({variant:"destructive",title:r("vector_database_node.errors.vector_database_not_found")});return}const _=(j=(x=s({nodeId:e,type:"target"}).map(E=>i(E.source)).find(E=>(E==null?void 0:E.type)&&[ae.JSONLData,ae.CSVData].includes(E==null?void 0:E.type)))==null?void 0:x.data)==null?void 0:j.entity;if(!_&&w.storage==="DataNode"){o({variant:"destructive",title:r("vector_database_node.errors.data_node_not_found")});return}return n(!0),await u({databaseId:w.id,dataSourceId:_.id,dataSourceType:aE(_)},m,v==null?void 0:v.k)}catch{o({variant:"destructive",title:r("vector_database_node.errors.similarity_search_failed")})}finally{n(!1)}},[(p=a==null?void 0:a.data)==null?void 0:p.entity,s,e,u,o,r,i]),f=g.useCallback(async(m,v)=>{var b,x,j;try{const w=m.content?[new Ih({pageContent:m.content,id:m.id,metadata:{id:m.id}})]:m.documents;if(!(w!=null&&w.length)){o({variant:"destructive",title:r("vector_database_node.errors.content_not_found")});return}const _=(b=a==null?void 0:a.data)==null?void 0:b.entity;if(!_){o({variant:"destructive",title:r("vector_database_node.errors.vector_database_not_found")});return}const E=s({nodeId:e,type:"target"}).map(N=>i(N.source)).find(N=>(N==null?void 0:N.type)&&[ae.JSONLData,ae.CSVData].includes(N==null?void 0:N.type)),S=(x=E==null?void 0:E.data)==null?void 0:x.entity;if(!S&&_.storage==="DataNode"){o({variant:"destructive",title:r("vector_database_node.errors.data_node_not_found")});return}n(!0);const C=aE(S),M=Nbe(w,10);let P=0;for(const N of M){if((j=v==null?void 0:v.onProgressReport)==null||j.call(v,{handling:N.length,handled:P,total:w.length}),await l({databaseId:_.id,dataSourceId:S.id,dataSourceType:C},N),C&&E){const R=await ue(C).findOne({where:{id:S.id}});c([{type:"replace",id:E.id,item:{...E,data:{...E.data,entity:R}}}])}P+=N.length}}catch{o({variant:"destructive",title:r("vector_database_node.errors.similarity_search_failed")})}finally{n(!1)}},[(y=a==null?void 0:a.data)==null?void 0:y.entity,s,e,l,o,r,i,c]);return{loading:t,indexData:f,similaritySearchWithScore:d}},kbe=[1,2,3,4,5,6,7,8,9,10],Abe=g.memo(e=>{const{t}=Ae("flows"),[n,r]=g.useState(""),[o,a]=g.useState([]),[i,s]=g.useState("1"),{loading:c,onSimilaritySearch:l,onCreatePrompt:u,onCreateRetriever:d}=e,f=async()=>{a(await l(n,+i)),r("")},p=async y=>{y.key==="Enter"&&!y.shiftKey&&(y.preventDefault(),f())};return h.jsxs("div",{className:"mt-4 max-w-full",children:[h.jsx("div",{className:"bg-black/5 dark:bg-white/5 rounded-xl relative",children:h.jsxs("div",{className:"relative px-2 py-1 pb-2",children:[h.jsxs(vo,{value:`${i}`,onValueChange:y=>s(y),children:[h.jsx(Ir,{className:"absolute left-0 !w-14 top-[2px] rounded-xl bg-transparent border-none focus:outline-none focus:ring-0 focus:border-opacity-0 focus:ring-transparent",children:h.jsx(bo,{placeholder:t("vector_database_node.k_select_placeholder")})}),h.jsx(Dr,{children:kbe.map(y=>h.jsx(jn,{value:`${y}`,children:y},`${y}`))})]}),h.jsx(so,{value:n,disabled:c,placeholder:t("vector_database_node.similarity_search_placeholder"),className:J("w-full rounded-xl px-2 pl-11 border-none resize-none bg-transparent","min-h-8 max-h-8"),onKeyDown:p,onChange:y=>{r(y.target.value)}}),h.jsx("button",{type:"button",disabled:c,onClick:f,className:"absolute right-3 top-5 -translate-y-1/2 rounded-xl bg-black/5 dark:bg-white/5 p-1",children:h.jsx(de,{name:c?"loader-circle":"arrow-right",className:J("w-4 h-4 dark:text-white",n?"opacity-100":"opacity-30",c?"animate-spin":"")})})]})}),h.jsx(ID,{type:"single",collapsible:!0,children:o==null?void 0:o.map(([y,m],v)=>h.jsxs(zx,{value:`${v}`,children:[h.jsxs(Vx,{children:[`[${m.toFixed(2)}] ${y.pageContent}`.substring(0,32),"..."]}),h.jsx(Ux,{children:y.pageContent})]},`${v}`))}),h.jsxs("div",{className:"w-full mt-4 flex flex-col gap-1",children:[h.jsx(ut,{disabled:c,onClick:d,className:"w-full",children:t("vector_database_node.to_retriever")}),o!=null&&o.length&&u?h.jsx(ut,{disabled:c,onClick:()=>u(o),className:"w-full",children:t("vector_database_node.create_prompt")}):void 0]})]})}),Tbe=g.memo(({loading:e,onCreateData:t})=>{const{t:n}=Ae("flows"),[r,o]=g.useState(""),[a,i]=g.useState(""),s=async()=>{a&&(await t({id:r,content:a}),o(""),i(""))};return h.jsxs("div",{className:"min-w-80",children:[h.jsxs("div",{className:"flex flex-col space-y-1.5 mt-3",children:[h.jsx(Ge,{htmlFor:"name",children:n("vector_database_node.add_text.id")}),h.jsx(sn,{value:r,disabled:e,onChange:c=>o(c.target.value||""),placeholder:n("vector_database_node.add_text.id_placeholder"),className:"mb-4"}),h.jsxs(Ge,{htmlFor:"name",children:[n("vector_database_node.add_text.content")," ",h.jsx("span",{className:"text-red-600",children:"*"})]}),h.jsx(so,{value:a,disabled:e,onChange:c=>i(c.target.value||""),placeholder:n("vector_database_node.add_text.content_placeholder")})]}),h.jsx("div",{className:"flex justify-between mt-6",children:h.jsx(Bn,{loading:e,disabled:!(a!=null&&a.length),onClick:s,className:"w-full",children:n("vector_database_node.add_text.add")})})]})});function Rbe({accept:e,maxSize:t}){const{t:n}=Ae("atoms"),[r,o]=g.useState(""),[a,i]=g.useState(""),s=g.useRef(null),[c,l]=g.useState(0),u=f=>{var y;const p=(y=f.target.files)==null?void 0:y[0];d(p)},d=f=>{if(i(""),f){if(t&&f.size>t*1024*1024){i(n("file_upload_input.errors.max_size",{maxSize:t,fileSize:(f.size/1024/1024).toFixed(2)}));return}const p=e==null?void 0:e.split(",").map(y=>y.replace(".","").trim());if(e&&!f.type.match(e.replace("/*",""))&&!(p!=null&&p.some(y=>f.type.includes(y)))){i(n("file_upload_input.errors.accept",{accept:e}));return}return l(f.size),o(f.name),f}};return{fileName:r,error:a,fileInputRef:s,handleFileSelect:u,validateAndSetFile:d,clearFile:()=>{o(""),i(""),l(0),s.current&&(s.current.value="")},fileSize:c}}function Ibe({file:e,setFile:t,loading:n,progress:r,fileOptions:o}){const{toast:a}=on(),{t:i}=Ae("atoms"),[s,c]=g.useState(!1),{fileName:l,fileInputRef:u,clearFile:d,error:f,validateAndSetFile:p,fileSize:y}=Rbe({accept:(o==null?void 0:o.accept)||"image/*",maxSize:(o==null?void 0:o.maxSize)||3});g.useEffect(()=>{e||d()},[d,e]),g.useEffect(()=>{f&&a({title:f,variant:"destructive"})},[f,a]);function m(w){const _=p(w);_&&t(_)}function v(w){w.preventDefault(),c(!1);const _=w.dataTransfer.files[0];_&&m(_)}function b(w){var E;const _=(E=w.target.files)==null?void 0:E[0];_&&m(_)}function x(){d(),t(void 0)}const j=g.useMemo(()=>{if(!e)return h.jsx("div",{className:"w-16 h-16 rounded-lg bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center",children:h.jsx(de,{name:"file-text",className:"w-8 h-8 text-zinc-400"})});const w=e.type.startsWith("image/");return h.jsx("div",{className:"relative w-16 h-16 rounded-lg overflow-hidden",children:w?h.jsx("img",{src:URL.createObjectURL(e),alt:"Preview",className:"w-full h-full object-cover"}):h.jsx(de,{className:"w-14 h-14",name:"file-text"})})},[e]);return h.jsx(h.Fragment,{children:h.jsxs("div",{className:J("relative group cursor-pointer","rounded-lg border-2 border-dashed","transition-colors duration-200",s?"border-indigo-500 bg-indigo-50/50 dark:bg-indigo-500/10":"border-zinc-200 dark:border-zinc-800"),onDragOver:w=>{w.preventDefault(),c(!0)},onDragLeave:()=>c(!1),onDrop:v,onClick:()=>{var w;return(w=u.current)==null?void 0:w.click()},onKeyDown:w=>{var _;(w.key==="Enter"||w.key===" ")&&(w.preventDefault(),(_=u.current)==null||_.click())},"aria-label":"Upload file",children:[h.jsx("input",{ref:u,type:"file",disabled:n||!!(r&&r<1),accept:(o==null?void 0:o.accept)||"image/*",onChange:b,className:"hidden"}),h.jsx("div",{className:"p-8 space-y-4",children:l?h.jsxs("div",{className:"flex items-center gap-4",children:[j,h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsxs("p",{className:"text-sm font-medium truncate",children:[l||"No file selected"," ",h.jsx("span",{className:"text-xs text-zinc-500 leading-5",children:y?`(${(y/1024/1024).toFixed(2)} MB)`:""})]}),r&&r<1?h.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[h.jsxs("p",{children:[(r*100).toFixed(2)," %"]}),h.jsx("div",{className:"h-1 flex-1 bg-zinc-100 dark:bg-zinc-800 rounded-full overflow-hidden items-center flex",children:h.jsx("div",{className:"h-full bg-indigo-500 transition-all duration-200",style:{width:`${r*100}%`}})})]}):void 0]}),h.jsx("button",{type:"button",disabled:n||!!(r&&r<1),onClick:w=>{w.stopPropagation(),x()},className:"p-1 hover:bg-zinc-100 dark:hover:bg-zinc-800 rounded",children:h.jsx(de,{name:"x",className:"w-5 h-5 text-zinc-400"})}),r&&r<1?h.jsx(Gf,{className:"rounded-lg"}):void 0]}):h.jsxs("div",{className:"flex flex-col items-center gap-2",children:[h.jsx(de,{name:"upload",className:"w-8 h-8 text-zinc-400 dark:text-zinc-500"}),h.jsx("p",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:i("file_upload_input.drop_file")})]})})]})})}function Dbe({onFileSubmit:e,fileOptions:t,progress:n,loading:r}){const{t:o}=Ae("flows"),[a,i]=g.useState(),s=async()=>{a&&(await e(a),i(void 0))};return h.jsxs("div",{className:"w-full max-w-md space-y-2 mt-4",children:[h.jsx("div",{className:"mb-6",children:h.jsx(Ibe,{progress:n,loading:r,fileOptions:t,setFile:i,file:a})}),h.jsx(Bn,{loading:r,disabled:!a,onClick:s,className:"w-full mt-4",children:o("vector_database_node.add_file.index")})]})}const Lbe=g.memo(e=>{var _;const{t}=Ae("flows"),[n,r]=g.useState(0),[o,a]=g.useState("search"),i=qt(e.id),{id:s,data:c,isConnectable:l}=e,{loading:u,similaritySearchWithScore:d,indexData:f}=Pbe(s),p=On(_be),y=On(Sbe);Cbe(s);const m=g.useCallback(async(...E)=>{i&&await f(...E)},[f,i]),v=g.useCallback(async(E,S)=>{const C=E.trim(),M=await d(C,{k:S});if(M!=null&&M.length)return M},[d]),b=g.useCallback(E=>{p.show({source:i,documents:E.map(([S])=>S)})},[p,i]),x=g.useCallback(async()=>{y.show({source:i})},[y,i]),j=g.useCallback(async E=>{if(E.type.includes("text")||E.type.includes("txt")){const S=new FileReader;S.onload=async C=>{var P;const M=(P=C.target)==null?void 0:P.result;await m({content:M})},S.readAsText(E)}else if(E.type.endsWith("pdf")){const S=new Blob([E],{type:"application/pdf"}),C=await new bbe(S,{pdfjs:async()=>{const M=await Zt(()=>import("./pdf.min-BmcZ7_QX.js").then(async P=>(await P.__tla,P)),__vite__mapDeps([13,1,2,3,4,5,6]));return await Zt(()=>import("./pdf.worker.min-DmjRoT18.js").then(async P=>(await P.__tla,P)),__vite__mapDeps([14,1,2,3,4,5,6])),M.GlobalWorkerOptions.workerSrc=new URL("pdfjs-dist/build/pdf.worker.min.js",import.meta.url).toString(),M},parsedItemSeparator:" "}).load();await m({documents:C},{onProgressReport:M=>{r((M.handled+M.handling)/M.total)}})}},[m]),w=g.useMemo(()=>{switch(o){case"search":return h.jsx(Fs,{value:"search",children:h.jsx(Abe,{loading:u,onSimilaritySearch:v,onCreatePrompt:b,onCreateRetriever:x})});case"new":return h.jsx(Fs,{className:"min-w-80",value:"new",children:h.jsx(Tbe,{loading:u,onCreateData:m})});case"file":return h.jsx(Fs,{value:"file",children:h.jsx(Dbe,{loading:u,progress:n,onFileSubmit:j,fileOptions:{accept:".pdf,.txt,.text",maxSize:1}})})}},[m,b,x,j,v,u,o,n]);return h.jsxs("div",{className:"min-w-72 max-w-md",children:[h.jsx(Je,{type:"target",position:fe.Top,isConnectable:l}),h.jsxs("div",{className:"max-w-full",children:[h.jsx(en,{id:s}),h.jsxs(Tr,{className:"flex justify-center",variant:"default",children:[h.jsx(de,{size:24,name:"database-zap"}),h.jsxs("div",{className:"ml-2 max-w-full",children:[h.jsx(Rr,{children:`${((_=c.entity)==null?void 0:_.name)||""}`}),h.jsxs(P9,{value:o,onValueChange:a,defaultValue:"search",className:"w-full mt-4",children:[h.jsxs(Vj,{className:"grid w-full grid-cols-3",children:[h.jsx(Ls,{value:"search",children:t("vector_database_node.search")}),h.jsx(Ls,{value:"new",children:t("vector_database_node.text")}),h.jsx(Ls,{value:"file",children:t("vector_database_node.file")})]}),w]})]})]})]}),h.jsx(Je,{type:"source",position:fe.Bottom,id:"a",isConnectable:l})]})}),Fbe={embedding:32},Bbe=g.memo(e=>{var a,i,s;const{id:t,data:n,isConnectable:r}=e,o=g.useMemo(()=>{var u;if(!((u=n==null?void 0:n.entity)!=null&&u.jsonl))return{headers:[],rows:[]};const c=iE(n.entity.headers||""),l=p$(n.entity.jsonl);return{headers:c,rows:l.map(d=>{try{return JSON.parse(d)}catch{return[]}})}},[(a=n==null?void 0:n.entity)==null?void 0:a.jsonl,n.entity.headers]);return h.jsxs("div",{className:"min-w-80",children:[h.jsx(Je,{type:"target",position:fe.Top,isConnectable:r}),h.jsxs("div",{children:[h.jsx(en,{id:t}),h.jsxs(Ft,{className:"min-w-32 min-h-16 p-4",children:[h.jsx(fn,{className:"!p-0",children:h.jsxs("div",{className:"pt-2 flex !flex-row",children:[h.jsx(de,{name:"file-json",className:"mr-2"}),h.jsxs(Ge,{className:"!font-medium leading-none tracking-tight pr-8",children:[ae.JSONLData," ",(i=o==null?void 0:o.rows)!=null&&i.length?`(${((s=o==null?void 0:o.rows)==null?void 0:s.length)||0})`:""]})]})}),h.jsx(pn,{className:"pb-0",children:h.jsx(I9,{data:o.rows,headers:o.headers,limitLengthByColumns:Fbe})})]})]}),h.jsx(Je,{type:"source",position:fe.Bottom,id:"a",isConnectable:r})]})}),L9=60,F9=140,$be=Ur("supports-backdrop-blur:bg-white/10 supports-backdrop-blur:dark:bg-black/10 mx-auto flex h-[58px] w-max gap-2 rounded-lg border p-2 backdrop-blur-md"),B9=V.forwardRef(({className:e,children:t,magnification:n=L9,distance:r=F9,direction:o="bottom",...a},i)=>{const s=Im(1/0),c=()=>V.Children.map(t,l=>V.isValidElement(l)&&l.type===_u?V.cloneElement(l,{...l.props,mouseX:s,magnification:n,distance:r}):l);return h.jsx(Ou.div,{ref:i,onMouseMove:l=>s.set(l.pageX),onMouseLeave:()=>s.set(1/0),...a,className:J($be({className:e}),{"items-start":o==="top","items-center":o==="middle","items-end":o==="bottom"}),children:c()})});B9.displayName="Dock";const _u=({magnification:e=L9,distance:t=F9,mouseX:n,className:r,children:o,...a})=>{const i=g.useRef(null),s=sS(n||new uwe,u=>{var f;const d=((f=i.current)==null?void 0:f.getBoundingClientRect())??{x:0,width:0};return u-d.x-d.width/2}),c=sS(s,[-t,0,t],[40,e,40]),l=A$(c,{mass:.1,stiffness:150,damping:12});return h.jsx(Ou.div,{ref:i,style:{width:l},className:J("flex aspect-square cursor-pointer items-center justify-center rounded-full",r),...a,children:o})};_u.displayName="DockIcon";const zbe={[ae.Shape]:{width:100,height:100},[ae.CircleShape]:{width:100,height:100},[ae.TriangleShape]:{width:100,height:100},[ae.EditorApp]:{width:1240,height:400}},Vbe=e=>{const t=qt(e),n=pt(s=>s.currentSession),[r,o]=g.useState(!1),a=ke(s=>s.createOrUpdateFlowNode),i=g.useCallback(async s=>{var c,l,u;try{if(o(!0),t&&(n==null?void 0:n.id)){const d=((c=t.position)==null?void 0:c.x)||0,f=(((l=t.position)==null?void 0:l.y)||0)+(((u=t.measured)==null?void 0:u.height)||0),p=await ue("FlowNodeData").save({data:{},session_id:n.id});if(!p)throw new Error("Failed to save node data");if(!await a({node_type:s,data:{},source_id:p.id,source_type:"FlowNodeData",x:d,y:f+20,...zbe[s]||{}}))throw new Error("Failed to save node")}}finally{o(!1)}},[a,n==null?void 0:n.id,t]);return{loading:r,createNode:i}},Wj={applications:[{key:ae.EditorApp,icon:"notebook-text",label:"application_bar.note"},{key:ae.VSLiteApp,icon:"square-terminal",label:"application_bar.vslite"}],shapes:[{key:ae.Shape,icon:"square",label:"application_bar.square"},{key:ae.CircleShape,icon:"circle",label:"application_bar.circle"},{key:ae.TriangleShape,icon:"triangle",label:"application_bar.triangle"}],old:[{key:ae.CodeContainerApp,icon:"file-code-2",label:"application_bar.code_editor"}]},Ube=g.memo(e=>{const{t}=Ae("flows"),{toast:n}=on(),{loading:r,createNode:o}=Vbe(e.id),a=async i=>{try{if(r)return;await o(i)}catch{n({description:t("application_bar.errors.add_node_failed"),variant:"destructive"})}};return h.jsx(TO,{children:h.jsxs(B9,{direction:"middle",children:[Wj.applications.map(i=>h.jsx(_u,{children:h.jsxs(_d,{children:[h.jsx(jd,{children:h.jsx(de,{onClick:()=>a(i.key),name:i.icon})}),h.jsx(_c,{children:h.jsx("p",{children:t(i.label)})})]})},i.label)),h.jsx(pc,{orientation:"vertical",className:"h-full"}),Wj.shapes.map(i=>h.jsx(_u,{children:h.jsxs(_d,{children:[h.jsx(jd,{children:h.jsx(de,{onClick:()=>a(i.key),name:i.icon})}),h.jsx(_c,{children:h.jsx("p",{children:t(i.label)})})]})},i.label)),h.jsx(pc,{orientation:"vertical",className:"h-full"}),Wj.old.map(i=>h.jsx(_u,{children:h.jsxs(_d,{children:[h.jsx(jd,{children:h.jsx(de,{onClick:()=>a(i.key),name:i.icon})}),h.jsx(_c,{children:h.jsx("p",{children:t(i.label)})})]})},i.label))]})})}),Mh=g.memo(e=>{const{lineClassName:t,handleClassName:n,...r}=e;return h.jsx(xte,{lineClassName:J("!border-1.5",t),handleClassName:J("!w-2 !h-2 !border-2 !rounded-full",n),...r})}),Hbe=e=>{const t=ke(r=>r.createOrUpdateFlowEdge),n=g.useCallback(async({edgeId:r,source:o,target:a,connection:i})=>{try{if([ae.CircleShape,ae.TriangleShape].includes(o==null?void 0:o.type)&&(a==null?void 0:a.type)===ae.Shape){await t({source:i.source,target:i.target,sourceHandle:i.sourceHandle,targetHandle:i.targetHandle});return}return{deleteEdgeId:r}}catch{return{deleteEdgeId:r}}},[t]);vn(e,n)},Wbe=g.memo(e=>{const{id:t,selected:n,isConnectable:r}=e;return Hbe(t),h.jsxs(h.Fragment,{children:[h.jsx(Mh,{isVisible:!!n,minWidth:40,minHeight:40}),h.jsx(Je,{type:"target",position:fe.Top,isConnectable:r}),h.jsx("div",{className:"min-w-10 min-h-10 w-full h-full bg-border border",children:h.jsx(en,{id:t})}),h.jsx(Je,{type:"source",position:fe.Bottom,isConnectable:r})]})}),qbe=e=>{const t=ke(r=>r.createOrUpdateFlowEdge),n=g.useCallback(async({edgeId:r,source:o,target:a,connection:i})=>{try{if([ae.Shape,ae.TriangleShape].includes(o==null?void 0:o.type)&&(a==null?void 0:a.type)===ae.CircleShape){await t({source:i.source,target:i.target,sourceHandle:i.sourceHandle,targetHandle:i.targetHandle});return}return{deleteEdgeId:r}}catch{return{deleteEdgeId:r}}},[t]);vn(e,n)},Ybe=g.memo(e=>{const{id:t,selected:n,isConnectable:r}=e;return qbe(t),h.jsxs(h.Fragment,{children:[h.jsx(Mh,{isVisible:!!n,minWidth:40,minHeight:40}),h.jsx(Je,{type:"target",position:fe.Top,isConnectable:r}),h.jsx("div",{className:"min-w-10 min-h-10 w-full h-full bg-border rounded-full border",children:h.jsx(en,{id:t})}),h.jsx(Je,{type:"source",position:fe.Bottom,isConnectable:r})]})}),Kbe=e=>{const t=ke(r=>r.createOrUpdateFlowEdge),n=g.useCallback(async({edgeId:r,source:o,target:a,connection:i})=>{try{if([ae.CircleShape,ae.Shape].includes(o==null?void 0:o.type)&&(a==null?void 0:a.type)===ae.TriangleShape){await t({source:i.source,target:i.target,sourceHandle:i.sourceHandle,targetHandle:i.targetHandle});return}return{deleteEdgeId:r}}catch{return{deleteEdgeId:r}}},[t]);vn(e,n)},Xbe=g.memo(e=>{const{id:t,selected:n,width:r,height:o,isConnectable:a}=e;return Kbe(t),h.jsxs(h.Fragment,{children:[h.jsx(Mh,{isVisible:!!n,minWidth:40,minHeight:40}),h.jsx(Je,{type:"target",position:fe.Top,isConnectable:a}),h.jsx("div",{className:"w-0 h-0 border-l-transparent border-r-transparent border-b-border",style:{borderLeftWidth:(r||0)/2,borderRightWidth:(r||0)/2,borderBottomWidth:o||0}}),h.jsx(en,{id:t,className:"absolute top-0 right-0"}),h.jsx(Je,{type:"source",position:fe.Bottom,isConnectable:a})]})}),Gbe=e=>{const t=ke(r=>r.createOrUpdateFlowEdge),n=g.useCallback(async({edgeId:r,source:o,target:a,connection:i})=>{try{if((o==null?void 0:o.type)===ae.LLM&&(a==null?void 0:a.type)===ae.EditorApp){await t({source:i.source,target:i.target,sourceHandle:i.sourceHandle,targetHandle:i.targetHandle});return}return{deleteEdgeId:r}}catch{return{deleteEdgeId:r}}},[t]);vn(e,n)},Qbe=e=>{const t=qt(e),{t:n}=Ae("flows"),r=g.useRef(null),{toast:o}=on(),{getNode:a,getHandleConnections:i}=Un(),s=Zn(l=>l.stream),c=g.useCallback(async l=>{t&&(clearTimeout(r.current),r.current=setTimeout(async()=>{await ue("FlowNode").update(t.id,{data:l})},150))},[t]);return{createMessage:g.useCallback(async(l,u)=>{if(t){const d=i({nodeId:e,type:"target"}).find(p=>{var y;return((y=a(p.source))==null?void 0:y.type)===ae.LLM}),f=d?a(d==null?void 0:d.source):void 0;if(f){if(f.data.status!==Mt.Loaded)return o({variant:"destructive",description:n("editor_node.errors.llm_not_loaded_yet")})}else return o({variant:"destructive",description:n("editor_node.errors.llm_not_found")});try{const p=s(l);if(!p)throw new Error("Stream is not supported");const y=[];for await(const m of p)m&&Array.isArray(m)&&(y.push(...m.map(v=>v.content)),m!=null&&m.length&&(u==null||u(m.map(v=>v.content).join(""))));return y.join("")}catch(p){if(p instanceof Error&&p.message.includes("LLM_NOT_LOADED_YET"))return o({title:n("editor_node.errors.llm_not_loaded_yet")});o({variant:"destructive",title:n("editor_node.errors.stream_message_failed")})}}},[t,i,e,a,o,n,s]),updateEditorContent:c}},Jbe=g.lazy(()=>Zt(()=>import("./PlateEditor-CM7GTHu8.js").then(async e=>(await e.__tla,e)),__vite__mapDeps([15,1,2,10,16,4,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,3,5,6,105]))),Zbe=g.memo(e=>{var c;const{id:t,data:n,selected:r,isConnectable:o}=e;Gbe(t);const{createMessage:a,updateEditorContent:i}=Qbe(t),s=g.useCallback(l=>{i(l)},[i]);return h.jsxs("div",{className:"w-full min-w-[1240px] h-full",children:[h.jsx(Mh,{isVisible:!!r,minWidth:1240,minHeight:400}),h.jsx(Je,{type:"target",position:fe.Top,isConnectable:o}),h.jsxs("div",{className:"min-w-10 min-h-10 w-full h-full rounded-lg border bg-background",children:[h.jsx(en,{className:"!z-[100]",id:t}),h.jsx(g.Suspense,{fallback:h.jsx("div",{className:"h-full w-ful rounded-lg flex justify-center items-center",children:h.jsx(de,{name:"loader-circle",className:"animate-spin"})}),children:h.jsx("div",{className:"h-full w-ful rounded-lg","data-registry":"plate",children:h.jsx(Jbe,{defaultValue:(c=n==null?void 0:n.flowNode)==null?void 0:c.data,onValueChange:s,copilotStream:a})})})]}),h.jsx(Je,{type:"source",position:fe.Bottom,isConnectable:o})]})}),exe=e=>{const t=g.useCallback(async({edgeId:n})=>{try{return{deleteEdgeId:n}}catch{return{deleteEdgeId:n}}},[]);vn(e,t)},txe=g.memo(e=>{var i,s;const{id:t,data:n,isConnectable:r}=e,{t:o}=Ae("flows");exe(t);let a="";switch((i=n.entity)==null?void 0:i.placeholder_type){case"VECTOR_DATABASE_RETREIVER":a=o("placeholder_node.vector_database_retriever");break}return h.jsxs("div",{children:[h.jsx(Je,{type:"target",position:fe.Top,isConnectable:r}),h.jsxs(Tr,{className:"flex justify-center max-w-80",variant:"default",children:[h.jsx(en,{id:t}),h.jsx(de,{name:"land-plot",className:"w-7 h-7"}),h.jsxs("div",{className:"ml-2 pr-4",children:[h.jsx(Rr,{children:`${((s=n.entity)==null?void 0:s.placeholder)||""}`}),h.jsx(Xi,{children:a?h.jsx(cn,{children:a}):void 0})]})]}),h.jsx(Je,{type:"source",position:fe.Bottom,id:"a",isConnectable:r})]})}),nxe=g.lazy(()=>Zt(()=>import("./CodeContainerApp-UXO66lvG.js").then(async e=>(await e.__tla,e)).then(e=>e.C),__vite__mapDeps([106,1,2,104,107,9,108,4,109,110]))),rxe=g.memo(e=>{const{id:t,isConnectable:n}=e;return h.jsxs("div",{className:"w-[1380px] h-[600px]",children:[h.jsx(Je,{type:"target",position:fe.Top,isConnectable:n}),h.jsxs("div",{className:"w-full h-full rounded-lg border bg-card overflow-hidden",children:[h.jsx(en,{id:t}),h.jsx(g.Suspense,{fallback:h.jsx("div",{className:"h-full w-full flex justify-center items-center",children:h.jsx(de,{name:"loader-circle",className:"animate-spin"})}),children:h.jsx(nxe,{...e})})]}),h.jsx(Je,{type:"source",position:fe.Bottom,isConnectable:n})]})});HE=function(e,t=""){const n=[];for(const[r,o]of Object.entries(e)){const a=Pu(),i=[t,r].filter(Boolean).join("/"),s="file"in o&&"contents"in o.file?o.file:void 0,c={id:a,isSelectable:!0,content:typeof(s==null?void 0:s.contents)=="string"?s.contents:void 0,file:i,name:r,children:[]};"directory"in o&&(c.children=HE(o.directory,i)),n.push(c)}return n},WE=function(e){const t=e.trim().split(`
`),n={};return t.forEach(r=>{const{file:o,content:a}=JSON.parse(r),i=o.split("/");let s=n;for(let c=0;c<i.length;c++){const l=i[c];c===i.length-1?s[l]={file:{contents:a}}:(s[l]||(s[l]={directory:{}}),s=s[l].directory)}}),n},zE=function(e){const t=[];function n(r,o=[]){for(const[a,i]of Object.entries(r))if("file"in i){const s=[...o,a].join("/");if("contents"in i.file){const c=i.file.contents;t.push(JSON.stringify({file:s,content:c}))}}else"directory"in i&&n(i.directory,[...o,a])}return n(e),t.join(`
`)},qE=function(e,t,n){const r=t.replace(/^\.\//,"").split("/");let o=e;for(let a=0;a<r.length;a++){const i=r[a];if(a===r.length-1)i in o&&"file"in o[i]?o[i].file.contents=n:Wr(`Path "${t}" is not a file.`);else if(i in o&&"directory"in o[i])o=o[i].directory;else return Wr(`Path "${t}" does not exist.`),e}return e};let $9,z9,V9,U9,H9,W9;$9=["vite-vue","shadcn-react-vite"],z9=async e=>{switch(e){case"vite-vue":return Zt(()=>import("./vite-vue-QLmMXcee.js"),[]).then(t=>t.VITE_VUE_BASE);case"shadcn-react-vite":return Zt(()=>import("./shadcn-react-vite-eg07VqhU.js"),[]).then(t=>t.SHADCN_REACT_VITE_BASE);default:throw new Error(`Unknown source base: ${e}`)}},YE=g.memo(({className:e,onUpdateSourceBase:t})=>{const{t:n}=Ae("components"),[r,o]=g.useState();return h.jsxs(Ft,{className:J("mw-full",e),children:[h.jsx(fn,{className:"p-4",children:h.jsx(wn,{children:n("add_source_base.title")})}),h.jsx(pn,{className:"p-4",children:h.jsxs("div",{className:"flex items-center justify-center w-full h-full flex-col",children:[h.jsxs(vo,{onValueChange:a=>o(a),children:[h.jsx(Ir,{className:"w-full mb-4",children:h.jsx(bo,{placeholder:n("add_source_base.source_base_select_placeholder")})}),h.jsx(Dr,{children:$9.map(a=>h.jsx(jn,{value:`${a}`,children:n(`add_source_base.sourcebases.${a.toLowerCase()}`)},`${a}`))})]}),h.jsx(ut,{className:"w-full",onClick:async()=>r&&t(await z9(r)),children:n("add_source_base.update_source")})]})})]})}),V9=e=>(qt(e),{updateCodeContainerData:g.useCallback(async(t,n)=>{await ue("FlowNode").update(t,{raw:zE(n)})},[])}),U9=g.lazy(()=>Zt(()=>import("./index-DFjBx4x8.js").then(async e=>(await e.__tla,e)),__vite__mapDeps([111,1,2,104,107,3,4,5,6,112]))),H9=g.memo(e=>{var l,u,d;const{id:t,isConnectable:n,data:r}=e,[o,a]=g.useState((l=r==null?void 0:r.flowNode)!=null&&l.raw?WE(r.flowNode.raw):void 0),{updateCodeContainerData:i}=V9(t),s=g.useCallback(async f=>{var p,y;(p=r==null?void 0:r.flowNode)!=null&&p.id&&(await i((y=r==null?void 0:r.flowNode)==null?void 0:y.id,f),a(f))},[(u=r==null?void 0:r.flowNode)==null?void 0:u.id,i]),c=g.useCallback(async(f,p)=>{a(y=>{var v;if(!y)return y;const m=qE(y,f,p);return i((v=r==null?void 0:r.flowNode)==null?void 0:v.id,m),m})},[(d=r==null?void 0:r.flowNode)==null?void 0:d.id,i]);return o?h.jsxs("div",{className:"w-[1380px] h-[600px]",children:[h.jsx(Je,{type:"target",position:fe.Top,isConnectable:n}),h.jsxs("div",{className:"w-full h-full rounded-lg border bg-card overflow-hidden",children:[h.jsx(en,{id:t,className:"z-50"}),h.jsx(g.Suspense,{fallback:h.jsx("div",{className:"h-full w-full flex justify-center items-center",children:h.jsx(de,{name:"loader-circle",className:"animate-spin"})}),children:h.jsx(U9,{fileSystemTree:o,onUpdateFileContent:c})})]}),h.jsx(Je,{type:"source",position:fe.Bottom,isConnectable:n})]}):h.jsx("div",{className:"h-full flex justify-center items-center",children:h.jsx(YE,{className:"w-64",onUpdateSourceBase:s})})}),W9={[ae.LLM]:e5,[ae.Toolbox]:YD,[ae.Thread]:o5,[ae.Message]:Oae,[ae.Prompt]:Nae,[ae.SessionInfo]:abe,[ae.Schema]:fbe,[ae.CSVData]:pbe,[ae.ToolDefinition]:mbe,[ae.DefaultEmbeddingModel]:gbe,[ae.VectorDatabase]:Lbe,[ae.JSONLData]:Bbe,[ae.ApplicationBar]:Ube,[ae.Shape]:Wbe,[ae.CircleShape]:Ybe,[ae.TriangleShape]:Xbe,[ae.EditorApp]:Zbe,[ae.PlaceHolder]:txe,[ae.CodeContainerApp]:rxe,[ae.VSLiteApp]:H9};function oxe(e,t=[]){let n=[];function r(a,i){const s=g.createContext(i),c=n.length;n=[...n,i];function l(d){const{scope:f,children:p,...y}=d,m=(f==null?void 0:f[e][c])||s,v=g.useMemo(()=>y,Object.values(y));return h.jsx(m.Provider,{value:v,children:p})}function u(d,f){const p=(f==null?void 0:f[e][c])||s,y=g.useContext(p);if(y)return y;if(i!==void 0)return i;throw new Error(`\`${d}\` must be used within \`${a}\``)}return l.displayName=a+"Provider",[l,u]}const o=()=>{const a=n.map(i=>g.createContext(i));return function(i){const s=(i==null?void 0:i[e])||a;return g.useMemo(()=>({[`__scope${e}`]:{...i,[e]:s}}),[i,s])}};return o.scopeName=e,[r,axe(o,...t)]}function axe(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(o){const a=r.reduce((i,{useScope:s,scopeName:c})=>{const l=s(o)[`__scope${c}`];return{...i,...l}},{});return g.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return n.scopeName=t.scopeName,n}var ixe="Toggle",qj=g.forwardRef((e,t)=>{const{pressed:n,defaultPressed:r=!1,onPressedChange:o,...a}=e,[i=!1,s]=Jt({prop:n,onChange:o,defaultProp:r});return h.jsx(Oe.button,{type:"button","aria-pressed":i,"data-state":i?"on":"off","data-disabled":e.disabled?"":void 0,...a,ref:t,onClick:he(e.onClick,()=>{e.disabled||s(!i)})})});qj.displayName=ixe;let Yj,Ga,Kj,Xj,Nh;Yj=qj,Ga="ToggleGroup",[Kj,h$]=oxe(Ga,[qr]),Xj=qr(),Nh=V.forwardRef((e,t)=>{const{type:n,...r}=e;if(n==="single"){const o=r;return h.jsx(sxe,{...o,ref:t})}if(n==="multiple"){const o=r;return h.jsx(cxe,{...o,ref:t})}throw new Error(`Missing prop \`type\` expected on \`${Ga}\``)}),Nh.displayName=Ga;var[q9,Y9]=Kj(Ga),sxe=V.forwardRef((e,t)=>{const{value:n,defaultValue:r,onValueChange:o=()=>{},...a}=e,[i,s]=Jt({prop:n,defaultProp:r,onChange:o});return h.jsx(q9,{scope:e.__scopeToggleGroup,type:"single",value:i?[i]:[],onItemActivate:s,onItemDeactivate:V.useCallback(()=>s(""),[s]),children:h.jsx(K9,{...a,ref:t})})}),cxe=V.forwardRef((e,t)=>{const{value:n,defaultValue:r,onValueChange:o=()=>{},...a}=e,[i=[],s]=Jt({prop:n,defaultProp:r,onChange:o}),c=V.useCallback(u=>s((d=[])=>[...d,u]),[s]),l=V.useCallback(u=>s((d=[])=>d.filter(f=>f!==u)),[s]);return h.jsx(q9,{scope:e.__scopeToggleGroup,type:"multiple",value:i,onItemActivate:c,onItemDeactivate:l,children:h.jsx(K9,{...a,ref:t})})});Nh.displayName=Ga;var[lxe,uxe]=Kj(Ga),K9=V.forwardRef((e,t)=>{const{__scopeToggleGroup:n,disabled:r=!1,rovingFocus:o=!0,orientation:a,dir:i,loop:s=!0,...c}=e,l=Xj(n),u=Io(i),d={role:"group",dir:u,...c};return h.jsx(lxe,{scope:n,rovingFocus:o,disabled:r,children:o?h.jsx(Ks,{asChild:!0,...l,orientation:a,dir:u,loop:s,children:h.jsx(Oe.div,{...d,ref:t})}):h.jsx(Oe.div,{...d,ref:t})})}),Ph="ToggleGroupItem",X9=V.forwardRef((e,t)=>{const n=Y9(Ph,e.__scopeToggleGroup),r=uxe(Ph,e.__scopeToggleGroup),o=Xj(e.__scopeToggleGroup),a=n.value.includes(e.value),i=r.disabled||e.disabled,s={...e,pressed:a,disabled:i},c=V.useRef(null);return r.rovingFocus?h.jsx(Xs,{asChild:!0,...o,focusable:!i,active:a,ref:c,children:h.jsx(Gj,{...s,ref:t})}):h.jsx(Gj,{...s,ref:t})});X9.displayName=Ph;let Gj;Gj=V.forwardRef((e,t)=>{const{__scopeToggleGroup:n,value:r,...o}=e,a=Y9(Ph,n),i={role:"radio","aria-checked":e.pressed,"aria-pressed":void 0},s=a.type==="single"?i:void 0;return h.jsx(qj,{...s,...o,ref:t,onPressedChange:c=>{c?a.onItemActivate(r):a.onItemDeactivate(r)}})}),zh=Nh,Vh=X9;const G9=Ur("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 gap-2",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground"},size:{default:"h-10 px-3 min-w-10",sm:"h-9 px-2.5 min-w-9",lg:"h-11 px-5 min-w-11"}},defaultVariants:{variant:"default",size:"default"}}),dxe=g.forwardRef(({className:e,variant:t,size:n,...r},o)=>h.jsx(Yj,{ref:o,className:J(G9({variant:t,size:n,className:e})),...r}));dxe.displayName=Yj.displayName;const Q9=g.createContext({size:"default",variant:"default"}),J9=g.forwardRef(({className:e,variant:t,size:n,children:r,...o},a)=>h.jsx(zh,{ref:a,className:J("flex items-center justify-center gap-1",e),...o,children:h.jsx(Q9.Provider,{value:{variant:t,size:n},children:r})}));J9.displayName=zh.displayName;const Z9=g.forwardRef(({className:e,children:t,variant:n,size:r,...o},a)=>{const i=g.useContext(Q9);return h.jsx(Vh,{ref:a,className:J(G9({variant:i.variant||n,size:i.size||r}),e),...o,children:t})});Z9.displayName=Vh.displayName;function fxe(){const e=Ve(t=>`x: ${t.transform[0].toFixed(2)}, y: ${t.transform[1].toFixed(2)}, zoom: ${t.transform[2].toFixed(2)}`);return h.jsx("div",{children:e})}function pxe({change:e}){var r,o,a,i;const t="id"in e?e.id:"-",{type:n}=e;return h.jsxs("div",{className:"mb-3",children:[h.jsxs("div",{children:["node id: ",t]}),h.jsxs("div",{children:[n==="add"?JSON.stringify(e.item,null,2):null,n==="dimensions"?`dimensions: ${(r=e.dimensions)==null?void 0:r.width} \xD7 ${(o=e.dimensions)==null?void 0:o.height}`:null,n==="position"?`position: ${(a=e.position)==null?void 0:a.x.toFixed(1)}, ${(i=e.position)==null?void 0:i.y.toFixed(1)}`:null,n==="remove"?"remove":null,n==="select"?e.selected?"select":"unselect":null]})]})}function hxe({limit:e=20}){const[t,n]=g.useState([]),r=gt(),o=g.useCallback(i=>{n(s=>[...i,...s].slice(0,e))},[e]);g.useEffect(()=>(r.setState({onNodesChange:o}),()=>r.setState({onNodesChange:void 0})),[o,r]);const a=()=>h.jsx("div",{children:"No Changes Triggered"});return h.jsx(h.Fragment,{children:t.length===0?h.jsx(a,{}):t.map((i,s)=>h.jsx(pxe,{change:i},s))})}function mxe(){const{getInternalNode:e}=Un(),t=Kee();return h.jsx(qee,{children:h.jsx("div",{className:"text-secondary-foreground",children:t.map(n=>{var a,i;const r=e(n.id);if(!r)return null;const o=r==null?void 0:r.internals.positionAbsolute;return h.jsx(yxe,{id:n.id,selected:!!n.selected,type:n.type||"default",position:n.position,absPosition:o,width:((a=n.measured)==null?void 0:a.width)??0,height:((i=n.measured)==null?void 0:i.height)??0,data:n.data},n.id)})})})}function yxe({id:e,type:t,selected:n,position:r,absPosition:o,width:a,height:i,data:s}){if(!a||!i)return null;const c=`translate(${o.x}px, ${o.y+i}px)`,l=`${r.x.toFixed(1)}, ${r.y.toFixed(1)}`,u=`${a} \xD7 ${i}`,d=n?"Selected":"Not Selected";return h.jsxs("div",{style:{position:"absolute",transform:c,width:a*2},className:"text-xs",children:[h.jsxs("div",{children:["id: ",e]}),h.jsxs("div",{children:["type: ",t]}),h.jsxs("div",{children:["selected: ",d]}),h.jsxs("div",{children:["position: ",l]}),h.jsxs("div",{children:["dimensions: ",u]}),h.jsxs("div",{children:["data: ",JSON.stringify(s,null,2)]})]})}function gxe({tools:e}){return h.jsx(Vi,{position:"top-left",className:"bg-card p-1 border rounded shadow-sm",children:h.jsx(J9,{type:"multiple",children:e.map(({active:t,setActive:n,label:r,value:o})=>h.jsx(Z9,{value:o,onClick:()=>n(a=>!a),"aria-pressed":t,className:"bg-card text-card-foreground transition-colors duration-300 hover:bg-secondary hover:text-secondary-foreground",children:r},o))})})}function e$(){const[e,t]=g.useState(!1),[n,r]=g.useState(!1),[o,a]=g.useState(!1),i=[{active:e,setActive:t,label:"Node Inspector",value:"node-inspector"},{active:n,setActive:r,label:"Change Logger",value:"change-logger"},{active:o,setActive:a,label:"Viewport Logger",value:"viewport-logger"}];return h.jsxs(h.Fragment,{children:[h.jsx(gxe,{tools:i}),n&&h.jsx(Vi,{className:"text-xs p-5 bg-white rounded shadow-md overflow-y-auto max-h-[50%] mt-20",position:"bottom-right",children:h.jsx(hxe,{})}),e&&h.jsx(mxe,{}),o&&h.jsx(Vi,{position:"bottom-left",className:"text-secondary-foreground",children:h.jsx(fxe,{})})]})}e$.displayName="DevTools";const vxe=()=>{const e=g.useRef({}),t=g.useRef({}),n=ke(P=>P.flowEdges),r=pt(P=>P.currentSession),o=ke(P=>P.setNodes),a=ke(P=>P.updateNodes),i=ke(P=>P.updateEdges),s=ke(P=>P.addConnectionToEdges),c=ke(P=>P.reset),l=ke(P=>P.findFlowEdges),u=ke(P=>P.deleteFlowNode),d=ke(P=>P.deleteFlowEdge),f=ke(P=>P.updateFlowNode),p=ke(P=>P.getNodes),y=ke(P=>P.findFlowNodesWithSource),m=g.useRef(n),v=g.useRef(),[b,x]=g.useState({loading:!1});m.current=n;const j=g.useCallback(async(P,N)=>{try{v.current=P,c(),await(N==null?void 0:N())}catch{v.current=void 0}},[c]),w=g.useCallback(async P=>{try{if(!(r!=null&&r.id))return;x(A=>({...A,loading:!0}));const N=await y({...P,where:{...P.where,session_id:r.id}}),R=await l({where:[{source:go(N.map(A=>A.id))},{target:go(N.map(A=>A.id))}]});return{flowNodes:N,flowEdges:R}}finally{x(N=>({...N,loading:!1}))}},[y,l,r==null?void 0:r.id]),_=g.useCallback(async P=>{var N,R;for(const A of P)if("id"in A&&Object.values(hl).includes(A.id)&&A.type!=="remove")a([A]);else if(A.type==="position"&&A.position&&!isNaN(A.position.x)&&!isNaN(A.position.y)){a([A]);const O=A.position.x,k=A.position.y;clearTimeout(e.current[A.id]),e.current[A.id]=setTimeout(async()=>{e.current[A.id]=void 0,await f({id:A.id,x:O,y:k},{silent:!0})},200)}else if(A.type==="remove"){const O=(N=p([A.id]))==null?void 0:N[0];if(!(O!=null&&O.type)||vne.includes(O.type))return;await u({id:A.id})}else if(A.type==="dimensions"&&A.dimensions&&!isNaN(A.dimensions.width)&&!isNaN(A.dimensions.height)){const O=(R=p([A.id]))==null?void 0:R[0];if(!(O!=null&&O.width)&&!(O!=null&&O.height))return;a([A]),clearTimeout(t.current[A.id]);const k=A.dimensions.width,T=A.dimensions.height;t.current[A.id]=setTimeout(async()=>{await f({id:A.id,width:k,height:T},{silent:!0})},200)}else A.type==="select"&&a([A])},[a,f,p,u]),E=g.useCallback(P=>{Promise.all(P.map(async N=>{if(N.type==="remove")return d({id:N.id})})),i(P)},[d,i]),S=g.useCallback(P=>{s(P)},[s]),C=g.useCallback(()=>{var P;(P=m.current)==null||P.length},[]),M=g.useCallback(P=>{o(N=>{var k,T;let R;if(typeof P=="function"?R=P(N):R=P,!R)return N;const A=N==null?void 0:N.find(I=>I.id===R.id),O={id:R.id,item:A?Tf(A,R):{...R,position:{x:((k=R.position)==null?void 0:k.x)||0,y:((T=R.position)==null?void 0:T.y)||0}},type:A?"replace":"add"};return Ca([O],N)})},[o]);return{syncEdges:C,initialFlow:j,loadingState:b,prepareFlowInfo:w,updateNodeChanges:_,updateEdgeChanges:E,updateOrCreateNode:M,currentSessionIdRef:v,updateEdgeConnection:S}},bxe=e=>{const t=pt(u=>{var d;return(d=u.currentSession)==null?void 0:d.id}),{loadingState:n,prepareFlowInfo:r,syncEdges:o,initialFlow:a,currentSessionIdRef:i}=e,s=ke(u=>u.ready),c=ke(u=>u.removeSyncNodeQueue),l=ke(u=>u.removeSyncEdgeQueue);g.useLayoutEffect(()=>{},[t]),g.useEffect(()=>{n.loading||!s||!t||i.current===t||a(t,async()=>{await r({where:{session_id:t}})})},[a,r,n.loading,i,s,t]),g.useEffect(()=>{const u=ke.subscribe(f=>f.syncNodeQueue,async(f,p)=>{var v;const y=p.map(b=>b.timestamp),m=f.filter(b=>!y.includes(b.timestamp));if(m.length){c(m.map(b=>b.timestamp));for(const b of m){const x=await r(b.query);switch(b.syncType){case"Thread":{const j=(v=x==null?void 0:x.flowNodes)==null?void 0:v.map(w=>{if(w.source_id&&w.source_type==="Thread")return w.source_id}).filter(Boolean);if(j!=null&&j.length){const w=await ue("Message").find({where:{thread_id:go(j)}});await r({where:{source_type:"Message",source_id:go(w.map(_=>_.id))}})}}break}}}}),d=ke.subscribe(f=>f.syncEdgeQueue,async(f,p)=>{const y=p.map(v=>v.timestamp),m=f.filter(v=>!y.includes(v.timestamp));m.length&&(l(m.map(v=>v.timestamp)),o())});return()=>{u(),d()}},[r,l,c,o])},xxe=()=>{const[e,t]=g.useState(!0),n=vxe(),r=Zn(u=>u.selectedModel),o=g.useRef(r),a=Zn(u=>u.setInitProgressCallback),{updateOrCreateNode:i,updateNodeChanges:s,updateEdgeChanges:c,updateEdgeConnection:l}=n;return bxe(n),o.current=r,g.useEffect(()=>{const u=a==null?void 0:a(d=>{if(!o.current)return;const f=`${o.current}`;i(p=>{const y=p==null?void 0:p.find(m=>{var v;return(v=m.data)!=null&&v.entity&&typeof m.data.entity=="object"&&"name"in m.data.entity?m.data.entity.name===f:!1});if(y)return y.data.label=d.text,y.data.status=Mt.Loading,d.progress===100&&(y.data.label="",y.data.status=Mt.Loaded),y})});return()=>{u==null||u()}},[a,i]),g.useMemo(()=>({updateNodeChanges:s,updateEdgeChanges:c,initializing:e,setInitializing:t,updateEdgeConnection:l}),[s,c,e,t,l])},wxe=()=>{const e=Mu(l=>l.theme),t=ke(l=>l.nodes),n=ke(l=>l.edges),{updateNodeChanges:r,updateEdgeChanges:o,updateEdgeConnection:a}=xxe(),i=g.useCallback(l=>{r(l)},[r]),s=g.useCallback(l=>{o(l)},[o]),c=g.useCallback(l=>{a(l)},[a]);return h.jsxs(Hee,{nodes:t,edges:n,nodeTypes:W9,onNodesChange:i,onEdgesChange:s,onConnect:c,panOnScroll:!0,panOnScrollMode:Ho.Free,colorMode:e,fitView:!0,children:[h.jsx(Zee,{variant:yo.Dots,gap:24,size:1}),h.jsx(ite,{}),h.jsx(vte,{}),dwe?h.jsx(e$,{}):void 0]})},_xe=g.memo(wxe);function jxe(){return h.jsx(_xe,{})}const Exe="hash";function Qj(){const e=VS();return d$(e),h.jsx(pwe,{})}const Sxe=Jz(h.jsxs(uc,{Component:YW,errorElement:h.jsx(Qj,{}),children:[h.jsx(uc,{path:$y.whiteboard,Component:jxe,errorElement:h.jsx(Qj,{})}),h.jsx(uc,{path:$y.application,errorElement:h.jsx(Qj,{}),Component:ore}),h.jsx(uc,{path:"*",element:h.jsx(Xz,{to:cr("whiteboard")})})]})),Cxe=(e,t)=>{switch(Exe){case"browser":return QS(e,t);case"hash":return _7(e);default:return QS(e,t)}},Oxe=Cxe(Sxe,{basename:"/NoLLMChat/"});fwe("[BASE_URL]","/NoLLMChat/");let t$;t$=g.memo(()=>(g.useEffect(()=>{window.location.pathname.includes("/NoLLMChat/")||(window.location.href="/NoLLMChat/".replace("//","/"))},[]),h.jsx(T7,{router:Oxe})),()=>!0),w$=Object.freeze(Object.defineProperty({__proto__:null,default:t$},Symbol.toStringTag,{value:"Module"}))});export{h$ as $,sE as A,cE as B,Dh as C,lE as D,uE as E,qs as F,Ys as G,ua as H,Tu as I,Ru as J,Lh as K,dE as L,fE as M,ei as N,pE as O,hE as P,mE as Q,yE as R,Fh as S,gE as T,vE as U,bE as V,xE as W,wE as X,_E as Y,jE as Z,qr as _,wwe as __tla,Bh as a,Iu as a$,Io as a0,Ks as a1,$h as a2,Xs as a3,zh as a4,Vh as a5,EE as a6,SE as a7,CE as a8,m$ as a9,OE as aA,ME as aB,Du as aC,Uh as aD,Hh as aE,Wh as aF,qh as aG,Yh as aH,Kh as aI,Xh as aJ,Gh as aK,Qh as aL,Jh as aM,Zh as aN,em as aO,tm as aP,nm as aQ,rm as aR,NE as aS,om as aT,PE as aU,y$ as aV,ht as aW,Gs as aX,Qs as aY,da as aZ,fa as a_,am as aa,kE as ab,g$ as ac,im as ad,sm as ae,cm as af,AE as ag,lm as ah,um as ai,dm as aj,fm as ak,pm as al,hm as am,TE as an,RE as ao,v$ as ap,IE as aq,b$ as ar,DE as as,mm as at,ym as au,gm as av,vm as aw,bm as ax,xm as ay,wm as az,Js as b,Zs as b0,ti as b1,ni as b2,x$ as b3,LE as b4,FE as b5,BE as b6,_m as b7,jm as b8,$E as b9,ke as ba,vn as bb,qt as bc,zE as bd,Em as be,VE as bf,UE as bg,Sm as bh,Cm as bi,ut as bj,HE as bk,WE as bl,qE as bm,YE as bn,Ge as bo,Bn as bp,KE as bq,XE as br,ri as bs,pa as bt,w$ as bu,GE as c,er as d,Om as e,QE as f,Mm as g,JE as h,oi as i,tr as j,Nm as k,Pm as l,ZE as m,jr as n,eS as o,km as p,Am as q,tS as r,nS as s,rS as t,Tm as u,an as v,ec as w,Rm as x,tc as y,ai as z};
